From rajeshreddy82 at gmail.com  Mon Mar  1 01:32:22 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Mon, 1 Mar 2021 02:32:22 -0700 (MST)
Subject: [gdal-dev] Merge the GeoJSON files
Message-ID: <1614591142860-0.post@n6.nabble.com>

Hi,

I have two GeoJSON files. One is having features A and B, another one is
having Features B and C. In these two files Feature B is common ( same
attributes and same geometry).

Now I want to merge these two GeoJSON files into either a single GoeJSON
file or a GPKG file. But the Output file should not contain the duplicates.
This means It should contain only A, B, and C features.

I have tried to use -

ogr2ogr -f GPKG "C:\Test.gpkg" "C:\test.vrt"

VRT file is - 
<?xml version="1.0" encoding="utf-8"?>
<OGRVRTDataSource>
<OGRVRTUnionLayer name="unionLayer">
  <OGRVRTLayer name="File1">
    <SrcDataSource relativeToVRT="1">File1.json</SrcDataSource>    
  </OGRVRTLayer>
  <OGRVRTLayer name="File2">
    <SrcDataSource relativeToVRT="1">File2.json</SrcDataSource>    
  </OGRVRTLayer>  
</OGRVRTUnionLayer>
</OGRVRTDataSource>

I have gone through the below link -
https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogrupdate.py

But How to use it here?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From boxerab at gmail.com  Mon Mar  1 05:21:22 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 1 Mar 2021 08:21:22 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700> <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
Message-ID: <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>

Hi Brad,

Definitely makes for an interesting discussion.

A few questions to ponder:

Is it GDAL's mandate to encourage projects with permissive licenses and to,
shall we say,
discourage those with copy-left licenses ? This is how Google and Apple
operate,
but they are for-profit corporations who clearly have a vested interest in
permissive open source.
GDAL is a non-profit, open source project. Also, most GDAL users are not
GDAL developers,
and many of these users have no strong feelings about licensing as long as
they can get their work done.
If driver A is faster and more feature rich than driver B, they will want
driver A.

Is it legitimate to take OpenJPEG, close the source, improve the code and
add features,
and then sell the result without contributing these improvements back to
OpenJPEG?
Indeed, it is legitimate, permitted, and encouraged by the BSD license. And
many have
done so. Likewise with relicensing under a different FLOSS license, as long
as BSD terms are
respected.

If GDAL supports proprietary drivers but rejects open source drivers
because they are copy-left,
this doesn't seem consistent to me. Perhaps all proprietary drivers should
be removed, if
that is the desire of the project? Keeping JP2KAK and rejecting JP2Grok
seems a bit hard
to fathom to me.

As for proliferation of driver code, the Jasper driver seems to be on the
way out, as Jasper
code is dangerously insecure and filled with bugs. So, JP2Grok would simply
take its place.

My two cents.

Aaron


On Sun, Feb 28, 2021 at 8:15 PM Brad Hards <bradh at frogmouth.net> wrote:

> I think this will be an interesting issue for the GDAL PMC.
>
> On one hand, AGPL is no worse than some proprietary (optional) dependency
> libraries. On the other hand, supporting it in GDAL is
> implicitly endorsing the fork, and adds to the proliferation of driver
> code in the GDAL/OGR repository. I think this could
> reasonably be decided either way.
>
> Brad
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210301/021f59e2/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Mar  1 07:47:25 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 1 Mar 2021 08:47:25 -0700 (MST)
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
Message-ID: <1614613645878-0.post@n6.nabble.com>

Hi,

In my opinion it is GDAL's mandate to favor projects that use the same type
of license than GDAL itself. Both proprietary and more copy-left licenses
makes it a bit harder to handle the whole system. Individual developers may
have their own opinions about what licensing model is the best when it comes
to principles, but I would rather see GDAL as a project to be neutral "We
prefer BSD, but we respect also libraries with other licensing models. To
respect does not mean that we want all of them incorporated". 

If a project selects BSD it is clear from the beginning that anything that
is allowed by the license may happen. 

I don't agree that GDAL supports proprietary drivers more than copy-left
drivers. We have told you that it is quite OK to have a new JP2Grok even we
would prefer to see improvements in JP2OpenJPEG because it is BSD like the
rest of GDAL. And that we are a bit sad because of AGPL and there are users
who can't use Grok, but nothing harder than that. That we prefer BSD is
consistent to our message to the MapInfo team that suggested to add a new
proprietary driver https://github.com/OSGeo/gdal/pull/3447.

To suggest that we should remove all existing proprietary drivers if we are
not very eager in accepting one more JPEG2000 driver is obviously meant to
be a provocation but I do not know how to react.

GDAL project does not easily drop existing good drivers which have an
established user base. We may drop JP2KAK some day because it is not really
actively maintained but it is quite a good driver even it does not utilize
some improvements introduced in latest latest KDU SDK versions. So perhaps
it is kept as long as it is possible to compile. If Kakadu was open source
we would be in the situation that you described "If driver A is faster and
more feature rich than driver B, they will want driver A." Unfortunaly very
few users can afford to select driver A in this case.

We do remove old drivers https://github.com/OSGeo/gdal/pull/3505 and it
means goodbye to Jasper.

-Jukka Rahkonen-


boxerab wrote
> Hi Brad,
> 
> Definitely makes for an interesting discussion.
> 
> A few questions to ponder:
> 
> Is it GDAL's mandate to encourage projects with permissive licenses and
> to,
> shall we say,
> discourage those with copy-left licenses ? This is how Google and Apple
> operate,
> but they are for-profit corporations who clearly have a vested interest in
> permissive open source.
> GDAL is a non-profit, open source project. Also, most GDAL users are not
> GDAL developers,
> and many of these users have no strong feelings about licensing as long as
> they can get their work done.
> If driver A is faster and more feature rich than driver B, they will want
> driver A.
> 
> Is it legitimate to take OpenJPEG, close the source, improve the code and
> add features,
> and then sell the result without contributing these improvements back to
> OpenJPEG?
> Indeed, it is legitimate, permitted, and encouraged by the BSD license.
> And
> many have
> done so. Likewise with relicensing under a different FLOSS license, as
> long
> as BSD terms are
> respected.
> 
> If GDAL supports proprietary drivers but rejects open source drivers
> because they are copy-left,
> this doesn't seem consistent to me. Perhaps all proprietary drivers should
> be removed, if
> that is the desire of the project? Keeping JP2KAK and rejecting JP2Grok
> seems a bit hard
> to fathom to me.
> 
> As for proliferation of driver code, the Jasper driver seems to be on the
> way out, as Jasper
> code is dangerously insecure and filled with bugs. So, JP2Grok would
> simply
> take its place.
> 
> My two cents.
> 
> Aaron
> 
> 
> On Sun, Feb 28, 2021 at 8:15 PM Brad Hards &lt;

> bradh@

> &gt; wrote:
> 
>> I think this will be an interesting issue for the GDAL PMC.
>>
>> On one hand, AGPL is no worse than some proprietary (optional) dependency
>> libraries. On the other hand, supporting it in GDAL is
>> implicitly endorsing the fork, and adds to the proliferation of driver
>> code in the GDAL/OGR repository. I think this could
>> reasonably be decided either way.
>>
>> Brad
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From boxerab at gmail.com  Mon Mar  1 08:46:57 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 1 Mar 2021 11:46:57 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <1614613645878-0.post@n6.nabble.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700> <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
Message-ID: <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>

Hi Jukka,

Thanks, makes a lot of sense. My comments about removing proprietary drivers
weren't meant as a provocation, I'm sorry you received it that way. Just a
thought experiment
to explore possible inconsistency of keeping proprietary drivers while
pushing back
on GPL drivers.  But your explanation of JP2KAK background makes it much
clearer
in my mind.

Anyways, I'm just a newcomer here, so I will say no more and let the
community
decide what is best.

Best Regards,
Aaron

On Mon, Mar 1, 2021 at 10:47 AM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> In my opinion it is GDAL's mandate to favor projects that use the same type
> of license than GDAL itself. Both proprietary and more copy-left licenses
> makes it a bit harder to handle the whole system. Individual developers may
> have their own opinions about what licensing model is the best when it
> comes
> to principles, but I would rather see GDAL as a project to be neutral "We
> prefer BSD, but we respect also libraries with other licensing models. To
> respect does not mean that we want all of them incorporated".
>
> If a project selects BSD it is clear from the beginning that anything that
> is allowed by the license may happen.
>
> I don't agree that GDAL supports proprietary drivers more than copy-left
> drivers. We have told you that it is quite OK to have a new JP2Grok even we
> would prefer to see improvements in JP2OpenJPEG because it is BSD like the
> rest of GDAL. And that we are a bit sad because of AGPL and there are users
> who can't use Grok, but nothing harder than that. That we prefer BSD is
> consistent to our message to the MapInfo team that suggested to add a new
> proprietary driver https://github.com/OSGeo/gdal/pull/3447.
>
> To suggest that we should remove all existing proprietary drivers if we are
> not very eager in accepting one more JPEG2000 driver is obviously meant to
> be a provocation but I do not know how to react.
>
> GDAL project does not easily drop existing good drivers which have an
> established user base. We may drop JP2KAK some day because it is not really
> actively maintained but it is quite a good driver even it does not utilize
> some improvements introduced in latest latest KDU SDK versions. So perhaps
> it is kept as long as it is possible to compile. If Kakadu was open source
> we would be in the situation that you described "If driver A is faster and
> more feature rich than driver B, they will want driver A." Unfortunaly very
> few users can afford to select driver A in this case.
>
> We do remove old drivers https://github.com/OSGeo/gdal/pull/3505 and it
> means goodbye to Jasper.
>
> -Jukka Rahkonen-
>
>
> boxerab wrote
> > Hi Brad,
> >
> > Definitely makes for an interesting discussion.
> >
> > A few questions to ponder:
> >
> > Is it GDAL's mandate to encourage projects with permissive licenses and
> > to,
> > shall we say,
> > discourage those with copy-left licenses ? This is how Google and Apple
> > operate,
> > but they are for-profit corporations who clearly have a vested interest
> in
> > permissive open source.
> > GDAL is a non-profit, open source project. Also, most GDAL users are not
> > GDAL developers,
> > and many of these users have no strong feelings about licensing as long
> as
> > they can get their work done.
> > If driver A is faster and more feature rich than driver B, they will want
> > driver A.
> >
> > Is it legitimate to take OpenJPEG, close the source, improve the code and
> > add features,
> > and then sell the result without contributing these improvements back to
> > OpenJPEG?
> > Indeed, it is legitimate, permitted, and encouraged by the BSD license.
> > And
> > many have
> > done so. Likewise with relicensing under a different FLOSS license, as
> > long
> > as BSD terms are
> > respected.
> >
> > If GDAL supports proprietary drivers but rejects open source drivers
> > because they are copy-left,
> > this doesn't seem consistent to me. Perhaps all proprietary drivers
> should
> > be removed, if
> > that is the desire of the project? Keeping JP2KAK and rejecting JP2Grok
> > seems a bit hard
> > to fathom to me.
> >
> > As for proliferation of driver code, the Jasper driver seems to be on the
> > way out, as Jasper
> > code is dangerously insecure and filled with bugs. So, JP2Grok would
> > simply
> > take its place.
> >
> > My two cents.
> >
> > Aaron
> >
> >
> > On Sun, Feb 28, 2021 at 8:15 PM Brad Hards &lt;
>
> > bradh@
>
> > &gt; wrote:
> >
> >> I think this will be an interesting issue for the GDAL PMC.
> >>
> >> On one hand, AGPL is no worse than some proprietary (optional)
> dependency
> >> libraries. On the other hand, supporting it in GDAL is
> >> implicitly endorsing the fork, and adds to the proliferation of driver
> >> code in the GDAL/OGR repository. I think this could
> >> reasonably be decided either way.
> >>
> >> Brad
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >>
>
> > gdal-dev at .osgeo
>
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210301/e117c417/attachment.html>

From even.rouault at spatialys.com  Mon Mar  1 09:01:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Mar 2021 18:01:07 +0100
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <5723603.CtAnagbAJd@even-i700>
References: <5723603.CtAnagbAJd@even-i700>
Message-ID: <1915345.2jBuSuvXGK@even-i700>

Hi
 
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
> 
> Starting with my +1

I declare this motion passed with +1 from PSC members MateuszL, KurtS, JukkaR, 
DanielM and myself.

Best regards,

Even

-- 
http://www.spatialys.com

From gdt at lexort.com  Mon Mar  1 09:39:21 2021
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 01 Mar 2021 12:39:21 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 (Aaron Boxer's message of "Mon, 1 Mar 2021 11:46:57 -0500")
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
Message-ID: <rmi8s76rcxi.fsf@s1.lexort.com>


Having ranted earlier about the use of AGPL3 to sell proprietary
licenses, I'd like to say that I'm glad to hear the new library is
"righteous AGPL3" instead of "subversive AGPL3".

I also was unclear on the optional driver situation.  Certainly if
drivers can link with proprietary libraries, there is absolutely no
reason to object to a driver because it links so an AGPL3 library.

I believe that drivers with non-MIT licenses shouldn't be built by
default even if the prerequisite libraries are available in the build
environment.  Partly this bias is from pkgsrc, as packaging systems
typically try to control the build to get a repeatable outcome, and
partly because having a proprietary library installed is different from
a decision to make gdal use it and thus end up with possible
distribrution problems.

I found
  https://gdal.org/download.html#development-source
  https://gdal.org/drivers/vector/index.html#vector-drivers
  https://gdal.org/drivers/raster/index.html#raster-drivers

but didn't from that understand if one needs to pass --enable, or if the
library being found is enough.

Consulting configure.ac, it seems some drivers are built if the library
is found, and others are only built if the driver is requested and also
the library is found.

For pkgsrc this is not a big issue as our build process hides libraries
that have not been declared as an explicit dependency.  But I wonder if
it would be best to document that libraries that are other than MIT
(really, not MIT-ish) will not be searched for and used without an
explicit --enable-foo, and adjust.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210301/cd087956/attachment.sig>

From andrew at aitchison.me.uk  Mon Mar  1 10:37:54 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 1 Mar 2021 18:37:54 +0000 (GMT)
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <rmi8s76rcxi.fsf@s1.lexort.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 <rmi8s76rcxi.fsf@s1.lexort.com>
Message-ID: <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk>

On Mon, 1 Mar 2021, Greg Troxel wrote:

> I also was unclear on the optional driver situation.  Certainly if
> drivers can link with proprietary libraries, there is absolutely no
> reason to object to a driver because it links so an AGPL3 library.
>
> I believe that drivers with non-MIT licenses shouldn't be built by
> default even if the prerequisite libraries are available in the build
> environment.  Partly this bias is from pkgsrc, as packaging systems
> typically try to control the build to get a repeatable outcome, and
> partly because having a proprietary library installed is different from
> a decision to make gdal use it and thus end up with possible
> distribrution problems.
>
> I found
>  https://gdal.org/download.html#development-source
>  https://gdal.org/drivers/vector/index.html#vector-drivers
>  https://gdal.org/drivers/raster/index.html#raster-drivers
>
> but didn't from that understand if one needs to pass --enable, or if the
> library being found is enough.
>
> Consulting configure.ac, it seems some drivers are built if the library
> is found, and others are only built if the driver is requested and also
> the library is found.

I take it you are aware of
doc/source/development/rfc/rfc34_license_policy.rst
https://gdal.org/development/rfc/rfc34_license_policy.html

User License Policy
-------------------

The restrictions on mixing proprietary and reciprocally licensed
software generally applies at the point of distribution. In particular,
it is not intended to prevent the end user from assembling a variety of
components for their own use as they see fit, for their own use. To that
end it is important to provide a mechanism for the end user to
deliberately override the restrictions on mixing reciprocally licensed,
and proprietary components. This is accomplished via the
GDAL_LICENSE_POLICY configuration variable which might typically be set
via the environment or via the --config commandline switch to most GDAL
applications. It may have the following values:

-  "USE_ALL": do not discard any drivers based on licensing
    restrictions.
-  "PREFER_PROPRIETARY": If there is a conflict between proprietary and
    reciprocally licensed drivers, use the proprietary ones.
-  "PREFER_RECIPROCAL": If there is a conflict between proprietary and
    reciprocally licensed drivers, use the reciprocally licensed ones.

In addition to setting this via config variables, there will also be a
configure / nmake.opt declaration to alter the default
GDAL_LICENSE_POLICY. Thus a local build could be configured to USE_ALL
at build time instead of having to set environment variables or
commandline switches. This would not be suitable for software that will
be redistributed.

> For pkgsrc this is not a big issue as our build process hides libraries
> that have not been declared as an explicit dependency.  But I wonder if
> it would be best to document that libraries that are other than MIT
> (really, not MIT-ish) will not be searched for and used without an
> explicit --enable-foo, and adjust.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From erentar2002 at gmail.com  Tue Mar  2 08:50:04 2021
From: erentar2002 at gmail.com (erentar2002)
Date: Tue, 2 Mar 2021 17:50:04 +0100
Subject: [gdal-dev] Unexpected behavior on gdal2tiles.py
Message-ID: <3a9eee56-a130-2689-afb0-f7f65cfa991d@gmail.com>

Machine A:

user at machineA:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None, 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None, 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None, 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '', 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey': 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE', 'mapml_template': None, 'processes': 1}
Input: debris.jp2
Output: debris
Cache: 1604.5949211120605 MB

Begin tiles details calc
Input file: ( 29232P x 20669L - 4 bands)
NODATA: []
Preprocessed file: ( 29232P x 20669L - 4 bands)
ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not belong to the same celestial body
ERROR 6: Cannot find coordinate operations from `GEOGCRS["GCS_Mars_2000",DATUM["D_Mars_2000",ELLIPSOID["Mars_2000_IAU_IAG",3396190,169.894447223612,LENGTHUNIT["metre",1,ID["EPSG",9001]]]],PRIMEM["Reference_Meridian",0,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]]]' to `EPSG:4326'
Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 3242, in sys.exit(main(sys.argv)) File "/usr/bin/gdal2tiles.py", line 3234, in
main single_threaded_tiling(input_file, output_folder, options) File
"/usr/bin/gdal2tiles.py", line 3154, in single_threaded_tiling conf,
tile_details = worker_tile_details(input_file, output_folder, options)
File "/usr/bin/gdal2tiles.py", line 3070, in worker_tile_details
gdal2tiles.open_input() File "/usr/bin/gdal2tiles.py", line 1742, in
open_input self.warped_input_dataset =
update_alpha_value_for_non_alpha_inputs( File "/usr/bin/gdal2tiles.py",
line 1061, in update_alpha_value_for_non_alpha_inputs if
warped_vrt_dataset.RasterCount in [1, 3]: AttributeError: 'NoneType'
object has no attribute 'RasterCount'

Machine B:

user at machineB:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None, 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None, 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None, 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '', 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey': 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE', 'processes': 1}
Input: debris.jp2
Output: debris
Cache: 384.14570236206055 MB

Begin tiles details calc
Input file: ( 29232P x 20669L - 4 bands)
NODATA: []
Preprocessed file: ( 29232P x 20669L - 4 bands)
ERROR 1: PROJ: proj_create_from_database: /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It comes from another PROJ installation.
Projected file: tiles.vrt ( 29232P x 20669L - 4 bands)
ERROR 1: PROJ: proj_create_from_database: /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It comes from another PROJ installation.
KML autotest OK!
Bounds (output srs): 77.42551250577 18.429672337269487 77.47613730177316 18.465467490135833
Bounds (latlong): 77.42551250577002 18.429672337269487 77.47613730177316 18.465467490135833
Generating Base Tiles:

Tiles generated from the max zoom level:
----------------------------------------

dataBandsCount:  3
tilebands:  4
1 / 1 debris/8/183/77.png
	Native Extent (querysize 76443 ):  (0, 0, 29232, 20669) (47211, 705631, 29232, 20669)
Tiles details calc complete.
	ReadRaster Extent:  (0, 0, 29232, 20669) (59, 889, 36, 26)
Generating Overview Tiles:
01 / 2 debris/7/91/38.png
	build from zoom 8  tiles: (182, 76) (183, 76) (182, 77) (183, 77)
2 / 2 debris/6/45/19.png
	build from zoom 7  tiles: (90, 38) (91, 38) (90, 39) (91, 39)

Why does this succeed in machine B and fail in machine A with identical
inputs?

both machines run fresh copies of gdal-bin 3.2.1+dfsg-1+b1 amd64 from
debian sid.

machine B is my desktop and machine A is a headless server.

will provide more information as asked.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210302/1430f192/attachment.html>

From shaw.th at utexas.edu  Tue Mar  2 11:50:30 2021
From: shaw.th at utexas.edu (Shaw, Theodore)
Date: Tue, 2 Mar 2021 13:50:30 -0600
Subject: [gdal-dev] GDAL SVG to BMP conversion
Message-ID: <ea8de9ee-8e81-3097-0856-e516dc3002cf@utexas.edu>

I'm attempting to convert SVG files output by Gdspy to large BMPs, 
approximately 50,000 x 50,000 pixels. This documentation page 
https://gdal.org/drivers/vector/svg.html looks like it says that GDAL 
only supports SVG files that are the output of Cloudmade Vector Stream 
Server. Am I understanding correctly that I won't be able to use GDAL 
for this task?

Thank you very much.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar  2 14:17:02 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 2 Mar 2021 15:17:02 -0700 (MST)
Subject: [gdal-dev] Unexpected behavior on gdal2tiles.py
In-Reply-To: <3a9eee56-a130-2689-afb0-f7f65cfa991d@gmail.com>
References: <3a9eee56-a130-2689-afb0-f7f65cfa991d@gmail.com>
Message-ID: <1614723422974-0.post@n6.nabble.com>

Hi,

By looking at the messages the installation on Machine B has an error: "It
[means proj.db] comes from another PROJ installation." Because of that error
gdal2tiles "works". If you fix the installation on Machine B it will fail
for the same reason than Machine A: "Cannot find coordinate operations from
[something in Mars] to EPSG:4326 [that is in Tellus].

I believe that you must fool gdal2tiles somehow and make it to believe that
the source data are also from our planet. Unfortunately I don't know how.
But does it even make sense to project data from Mars into EPSG:4326?
Perhaps "-p raster" would create something usable.

-Jukka Rahkonen-



erentar2002 wrote
> Machine A:
> 
> user at machineA:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
> Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None,
> 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None,
> 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None,
> 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '',
> 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey':
> 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE',
> 'mapml_template': None, 'processes': 1}
> Input: debris.jp2
> Output: debris
> Cache: 1604.5949211120605 MB
> 
> Begin tiles details calc
> Input file: ( 29232P x 20669L - 4 bands)
> NODATA: []
> Preprocessed file: ( 29232P x 20669L - 4 bands)
> ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not
> belong to the same celestial body
> ERROR 6: Cannot find coordinate operations from
> `GEOGCRS["GCS_Mars_2000",DATUM["D_Mars_2000",ELLIPSOID["Mars_2000_IAU_IAG",3396190,169.894447223612,LENGTHUNIT["metre",1,ID["EPSG",9001]]]],PRIMEM["Reference_Meridian",0,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]]]'
> to `EPSG:4326'
> Traceback (most recent call last):
>   File "/usr/bin/gdal2tiles.py", line 3242, in sys.exit(main(sys.argv))
> File "/usr/bin/gdal2tiles.py", line 3234, in
> main single_threaded_tiling(input_file, output_folder, options) File
> "/usr/bin/gdal2tiles.py", line 3154, in single_threaded_tiling conf,
> tile_details = worker_tile_details(input_file, output_folder, options)
> File "/usr/bin/gdal2tiles.py", line 3070, in worker_tile_details
> gdal2tiles.open_input() File "/usr/bin/gdal2tiles.py", line 1742, in
> open_input self.warped_input_dataset =
> update_alpha_value_for_non_alpha_inputs( File "/usr/bin/gdal2tiles.py",
> line 1061, in update_alpha_value_for_non_alpha_inputs if
> warped_vrt_dataset.RasterCount in [1, 3]: AttributeError: 'NoneType'
> object has no attribute 'RasterCount'
> 
> Machine B:
> 
> user at machineB:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
> Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None,
> 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None,
> 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None,
> 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '',
> 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey':
> 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE', 'processes': 1}
> Input: debris.jp2
> Output: debris
> Cache: 384.14570236206055 MB
> 
> Begin tiles details calc
> Input file: ( 29232P x 20669L - 4 bands)
> NODATA: []
> Preprocessed file: ( 29232P x 20669L - 4 bands)
> ERROR 1: PROJ: proj_create_from_database:
> /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks
> DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It
> comes from another PROJ installation.
> Projected file: tiles.vrt ( 29232P x 20669L - 4 bands)
> ERROR 1: PROJ: proj_create_from_database:
> /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks
> DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It
> comes from another PROJ installation.
> KML autotest OK!
> Bounds (output srs): 77.42551250577 18.429672337269487 77.47613730177316
> 18.465467490135833
> Bounds (latlong): 77.42551250577002 18.429672337269487 77.47613730177316
> 18.465467490135833
> Generating Base Tiles:
> 
> Tiles generated from the max zoom level:
> ----------------------------------------
> 
> dataBandsCount:  3
> tilebands:  4
> 1 / 1 debris/8/183/77.png
> 	Native Extent (querysize 76443 ):  (0, 0, 29232, 20669) (47211, 705631,
> 29232, 20669)
> Tiles details calc complete.
> 	ReadRaster Extent:  (0, 0, 29232, 20669) (59, 889, 36, 26)
> Generating Overview Tiles:
> 01 / 2 debris/7/91/38.png
> 	build from zoom 8  tiles: (182, 76) (183, 76) (182, 77) (183, 77)
> 2 / 2 debris/6/45/19.png
> 	build from zoom 7  tiles: (90, 38) (91, 38) (90, 39) (91, 39)
> 
> Why does this succeed in machine B and fail in machine A with identical
> inputs?
> 
> both machines run fresh copies of gdal-bin 3.2.1+dfsg-1+b1 amd64 from
> debian sid.
> 
> machine B is my desktop and machine A is a headless server.
> 
> will provide more information as asked.
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar  2 14:31:58 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 2 Mar 2021 15:31:58 -0700 (MST)
Subject: [gdal-dev] GDAL SVG to BMP conversion
In-Reply-To: <ea8de9ee-8e81-3097-0856-e516dc3002cf@utexas.edu>
References: <ea8de9ee-8e81-3097-0856-e516dc3002cf@utexas.edu>
Message-ID: <1614724318730-0.post@n6.nabble.com>

Hi,

You can test it with any SVG file

ogrinfo matplotlib.svg --debug on
...
SVG: matplotlib.svg seems to be a SVG file, but not a Cloudmade vector one.
...

I recommend to use some other tools.

-Jukka Rahkonen-


Shaw, Theodore wrote
> I'm attempting to convert SVG files output by Gdspy to large BMPs, 
> approximately 50,000 x 50,000 pixels. This documentation page 
> https://gdal.org/drivers/vector/svg.html looks like it says that GDAL 
> only supports SVG files that are the output of Cloudmade Vector Stream 
> Server. Am I understanding correctly that I won't be able to use GDAL 
> for this task?
> 
> Thank you very much.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From erentar2002 at gmail.com  Tue Mar  2 21:14:16 2021
From: erentar2002 at gmail.com (=?UTF-8?B?RXJlbiBUYXLDr21jw68=?=)
Date: Wed, 3 Mar 2021 06:14:16 +0100
Subject: [gdal-dev] Unexpected behavior on gdal2tiles.py
In-Reply-To: <1614723422974-0.post@n6.nabble.com>
References: <3a9eee56-a130-2689-afb0-f7f65cfa991d@gmail.com>
 <1614723422974-0.post@n6.nabble.com>
Message-ID: <af805871-75f9-0c2e-192e-027de5010a60@gmail.com>

If i use raster, the resulting tiles are not georeferenced, i.e the
{x},{y},{z} coordinates are not correct. I require them to be
georeferenced. Do you know of another tool that would let me render
georeferenced tiles for mars?

On 02/03/2021 23.17, jratike80 wrote:
> Hi,
>
> By looking at the messages the installation on Machine B has an error: "It
> [means proj.db] comes from another PROJ installation." Because of that error
> gdal2tiles "works". If you fix the installation on Machine B it will fail
> for the same reason than Machine A: "Cannot find coordinate operations from
> [something in Mars] to EPSG:4326 [that is in Tellus].
>
> I believe that you must fool gdal2tiles somehow and make it to believe that
> the source data are also from our planet. Unfortunately I don't know how.
> But does it even make sense to project data from Mars into EPSG:4326?
> Perhaps "-p raster" would create something usable.
>
> -Jukka Rahkonen-
>
>
>
> erentar2002 wrote
>> Machine A:
>>
>> user at machineA:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
>> Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None,
>> 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None,
>> 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None,
>> 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '',
>> 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey':
>> 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE',
>> 'mapml_template': None, 'processes': 1}
>> Input: debris.jp2
>> Output: debris
>> Cache: 1604.5949211120605 MB
>>
>> Begin tiles details calc
>> Input file: ( 29232P x 20669L - 4 bands)
>> NODATA: []
>> Preprocessed file: ( 29232P x 20669L - 4 bands)
>> ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not
>> belong to the same celestial body
>> ERROR 6: Cannot find coordinate operations from
>> `GEOGCRS["GCS_Mars_2000",DATUM["D_Mars_2000",ELLIPSOID["Mars_2000_IAU_IAG",3396190,169.894447223612,LENGTHUNIT["metre",1,ID["EPSG",9001]]]],PRIMEM["Reference_Meridian",0,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]]]'
>> to `EPSG:4326'
>> Traceback (most recent call last):
>>   File "/usr/bin/gdal2tiles.py", line 3242, in sys.exit(main(sys.argv))
>> File "/usr/bin/gdal2tiles.py", line 3234, in
>> main single_threaded_tiling(input_file, output_folder, options) File
>> "/usr/bin/gdal2tiles.py", line 3154, in single_threaded_tiling conf,
>> tile_details = worker_tile_details(input_file, output_folder, options)
>> File "/usr/bin/gdal2tiles.py", line 3070, in worker_tile_details
>> gdal2tiles.open_input() File "/usr/bin/gdal2tiles.py", line 1742, in
>> open_input self.warped_input_dataset =
>> update_alpha_value_for_non_alpha_inputs( File "/usr/bin/gdal2tiles.py",
>> line 1061, in update_alpha_value_for_non_alpha_inputs if
>> warped_vrt_dataset.RasterCount in [1, 3]: AttributeError: 'NoneType'
>> object has no attribute 'RasterCount'
>>
>> Machine B:
>>
>> user at machineB:~/mars$ gdal2tiles.py -z 6-8 -p geodetic -v debris.jp2
>> Options: {'profile': 'geodetic', 'resampling': 'average', 's_srs': None,
>> 'zoom': '6-8', 'resume': False, 'srcnodata': None, 'tmscompatible': None,
>> 'xyz': None, 'verbose': True, 'exclude_transparent': None, 'quiet': None,
>> 'nb_processes': None, 'tilesize': 256, 'kml': False, 'url': '',
>> 'webviewer': 'all', 'title': 'debris.jp2', 'copyright': '', 'googlekey':
>> 'INSERT_YOUR_KEY_HERE', 'bingkey': 'INSERT_YOUR_KEY_HERE', 'processes': 1}
>> Input: debris.jp2
>> Output: debris
>> Cache: 384.14570236206055 MB
>>
>> Begin tiles details calc
>> Input file: ( 29232P x 20669L - 4 bands)
>> NODATA: []
>> Preprocessed file: ( 29232P x 20669L - 4 bands)
>> ERROR 1: PROJ: proj_create_from_database:
>> /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks
>> DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It
>> comes from another PROJ installation.
>> Projected file: tiles.vrt ( 29232P x 20669L - 4 bands)
>> ERROR 1: PROJ: proj_create_from_database:
>> /home/user/OTB-7.2.0-Linux64/share/proj/proj.db lacks
>> DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR metadata. It
>> comes from another PROJ installation.
>> KML autotest OK!
>> Bounds (output srs): 77.42551250577 18.429672337269487 77.47613730177316
>> 18.465467490135833
>> Bounds (latlong): 77.42551250577002 18.429672337269487 77.47613730177316
>> 18.465467490135833
>> Generating Base Tiles:
>>
>> Tiles generated from the max zoom level:
>> ----------------------------------------
>>
>> dataBandsCount:  3
>> tilebands:  4
>> 1 / 1 debris/8/183/77.png
>> 	Native Extent (querysize 76443 ):  (0, 0, 29232, 20669) (47211, 705631,
>> 29232, 20669)
>> Tiles details calc complete.
>> 	ReadRaster Extent:  (0, 0, 29232, 20669) (59, 889, 36, 26)
>> Generating Overview Tiles:
>> 01 / 2 debris/7/91/38.png
>> 	build from zoom 8  tiles: (182, 76) (183, 76) (182, 77) (183, 77)
>> 2 / 2 debris/6/45/19.png
>> 	build from zoom 7  tiles: (90, 38) (91, 38) (90, 39) (91, 39)
>>
>> Why does this succeed in machine B and fail in machine A with identical
>> inputs?
>>
>> both machines run fresh copies of gdal-bin 3.2.1+dfsg-1+b1 amd64 from
>> debian sid.
>>
>> machine B is my desktop and machine A is a headless server.
>>
>> will provide more information as asked.
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar  2 23:01:08 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 3 Mar 2021 00:01:08 -0700 (MST)
Subject: [gdal-dev] Unexpected behavior on gdal2tiles.py
In-Reply-To: <af805871-75f9-0c2e-192e-027de5010a60@gmail.com>
References: <3a9eee56-a130-2689-afb0-f7f65cfa991d@gmail.com>
 <1614723422974-0.post@n6.nabble.com>
 <af805871-75f9-0c2e-192e-027de5010a60@gmail.com>
Message-ID: <1614754868131-0.post@n6.nabble.com>

Hi,

Tiles created by gdal2tiles are never georeferenced directly but only
through the tileset definition. I had a try with your coordinate system with
raster profile and by looking at the generated tilemapresource.xml it seems
to me that the tileset is correct and tiles georeferenced right. Client that
reads the tilemaprerource.xml or that is configured manually to use the same
tileset should show correct coordinate, including a knowledge that the tiles
are from Mars.


<?xml version="1.0" encoding="utf-8"?>
    <TileMap version="1.0.0" tilemapservice="http://tms.osgeo.org/1.0.0">
      <Title>mars.tif</Title>
      <Abstract></Abstract>
     
<SRS>GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190,169.894447223612]],PRIMEM["Reference_Meridian",0],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST]]</SRS>
      <BoundingBox minx="494000.00000000000000"
miny="7008000.00000000000000" maxx="500000.00000000000000"
maxy="7014000.00000000000000"/>
      <Origin x="494000.00000000000000" y="7008000.00000000000000"/>
      <TileFormat width="256" height="256" mime-type="image/png"
extension="png"/>
      <TileSets profile="raster">
        <TileSet href="0" units-per-pixel="32.00000000000000" order="0"/>
        <TileSet href="1" units-per-pixel="16.00000000000000" order="1"/>
  ...
      </TileSets>
    </TileMap>
    

-Jukka Rahkonen-


erentar2002 wrote
> If i use raster, the resulting tiles are not georeferenced, i.e the
> {x},{y},{z} coordinates are not correct. I require them to be
> georeferenced. Do you know of another tool that would let me render
> georeferenced tiles for mars?





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Mar  3 10:48:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 19:48:53 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
Message-ID: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>

Hi,

Following the discussions of past weeks, I motion to:

- remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
not aware of them having been much used or being still in use. 
Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
code, doc and tests) have been moved to the 
https://github.com/OSGeo/gdal-extra-drivers

- deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, 
JPEG2000, JPEGLS, MG4LIDAR,
GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP
and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME,
GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now 
be disabled
at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
configuration option is set to YES, and will be removed in GDAL 3.5. 
Implemented in https://github.com/OSGeo/gdal/pull/3505

Starting with my +1

Even

-- 
http://www.spatialys.com


From jluis at ualg.pt  Wed Mar  3 11:02:01 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Wed, 3 Mar 2021 19:02:01 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
Message-ID: <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>

Even,

May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.

Joaquim

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Wednesday, March 3, 2021 6:49 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Motion: remove and deprecate a few drivers

Hi,

Following the discussions of past weeks, I motion to:

- remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use. 
Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers

- deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
configuration option is set to YES, and will be removed in GDAL 3.5. 
Implemented in https://github.com/OSGeo/gdal/pull/3505

Starting with my +1

Even

--
http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Mar  3 11:35:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 20:35:51 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>

Is the GSAG format really used ?

Which one(s) are proposed by default as output of current Surfer versions ?

Can't Surfer export to other formats already handled by GDAL ?

Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit?:
> Even,
>
> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.
>
> Joaquim
>
> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
> Sent: Wednesday, March 3, 2021 6:49 PM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
>
> Hi,
>
> Following the discussions of past weeks, I motion to:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com


From jluis at ualg.pt  Wed Mar  3 11:55:50 2021
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Wed, 3 Mar 2021 19:55:50 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
Message-ID: <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>


> Is the GSAG format really used ?

What can I say. Because it's a simple format I used to have colleagues that used it for I/O of their codes and not rarely it ended up in my hands. But can't honestly say it's much used. 


> Which one(s) are proposed by default as output of current Surfer versions ?

GS7BG. In fact GMT can read the simple variations (without breaklines) of this somewhat complicated format 


> Can't Surfer export to other formats already handled by GDAL ?

Yes, some. Nc and ArcInfo ascii at least



Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit?:
> Even,
>
> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.
>
> Joaquim
>
> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
> Sent: Wednesday, March 3, 2021 6:49 PM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
>
> Hi,
>
> Following the discussions of past weeks, I motion to:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com


From even.rouault at spatialys.com  Wed Mar  3 12:07:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 21:07:00 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>

OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's 
mark GSAG and GSBG as deprecated and see if that triggers reactions once 
this is in the wild.

Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit?:
>> Is the GSAG format really used ?
> What can I say. Because it's a simple format I used to have colleagues that used it for I/O of their codes and not rarely it ended up in my hands. But can't honestly say it's much used.
>
>
>> Which one(s) are proposed by default as output of current Surfer versions ?
> GS7BG. In fact GMT can read the simple variations (without breaklines) of this somewhat complicated format
>
>
>> Can't Surfer export to other formats already handled by GDAL ?
> Yes, some. Nc and ArcInfo ascii at least
>
>
>
> Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit?:
>> Even,
>>
>> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
>> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.
>>
>> Joaquim
>>
>> -----Original Message-----
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
>> Sent: Wednesday, March 3, 2021 6:49 PM
>> To: gdal-dev at lists.osgeo.org
>> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
>>
>> Hi,
>>
>> Following the discussions of past weeks, I motion to:
>>
>> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use.
>> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
>>
>> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
>> configuration option is set to YES, and will be removed in GDAL 3.5.
>> Implemented in https://github.com/OSGeo/gdal/pull/3505
>>
>> Starting with my +1
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com


From gdt at lexort.com  Wed Mar  3 12:14:35 2021
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 03 Mar 2021 15:14:35 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk> (Andrew
 C. Aitchison's message of "Mon, 1 Mar 2021 18:37:54 +0000 (GMT)")
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 <rmi8s76rcxi.fsf@s1.lexort.com>
 <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk>
Message-ID: <rmipn0gc7v8.fsf@s1.lexort.com>


Andrew C Aitchison <andrew at aitchison.me.uk> writes:

> On Mon, 1 Mar 2021, Greg Troxel wrote:
>
>> I also was unclear on the optional driver situation.  Certainly if
>> drivers can link with proprietary libraries, there is absolutely no
>> reason to object to a driver because it links so an AGPL3 library.
>>
>> I believe that drivers with non-MIT licenses shouldn't be built by
>> default even if the prerequisite libraries are available in the build
>> environment.  Partly this bias is from pkgsrc, as packaging systems
>> typically try to control the build to get a repeatable outcome, and
>> partly because having a proprietary library installed is different from
>> a decision to make gdal use it and thus end up with possible
>> distribrution problems.
>>
>> I found
>>  https://gdal.org/download.html#development-source
>>  https://gdal.org/drivers/vector/index.html#vector-drivers
>>  https://gdal.org/drivers/raster/index.html#raster-drivers
>>
>> but didn't from that understand if one needs to pass --enable, or if the
>> library being found is enough.
>>
>> Consulting configure.ac, it seems some drivers are built if the library
>> is found, and others are only built if the driver is requested and also
>> the library is found.
>
> I take it you are aware of
> doc/source/development/rfc/rfc34_license_policy.rst
> https://gdal.org/development/rfc/rfc34_license_policy.html

No, I was not aware of that; thanks for pointing it out.

What I did was look at the top-level docs and for the INSTALL file that
is typically present, to try to understand the prereqs and rules.  Even
looking at that page there is a bunch of text that doesn't read like
it's a done deal.

But, I'm worried about something different.  As a packager, I'd like to
know that unless I take the affirmative step of passing --enable-foo,
for any GPLish or proprietary foo, I won't end up with a gdal build
linked with foo just because it happened to be present in my build
environment.

I don't think this set of build defaults is controlled by RFC34.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/3247ac6e/attachment.sig>

From ivan.lucena at outlook.com  Wed Mar  3 12:20:46 2021
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Wed, 3 Mar 2021 20:20:46 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>,
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
Message-ID: <MN2PR04MB56934DCD322B089ADC9EF118F2989@MN2PR04MB5693.namprd04.prod.outlook.com>

Even,

Is the INGR driver for Integraph raster install needed?

It was developed when the format was already deprecated.

It was supposed to read old files and there was some old hardware, scanner, spitting out in that file format.

Regards,

Ivan
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault <even.rouault at spatialys.com>
Sent: Wednesday, March 3, 2021 3:07 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: remove and deprecate a few drivers

OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's
mark GSAG and GSBG as deprecated and see if that triggers reactions once
this is in the wild.

Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit :
>> Is the GSAG format really used ?
> What can I say. Because it's a simple format I used to have colleagues that used it for I/O of their codes and not rarely it ended up in my hands. But can't honestly say it's much used.
>
>
>> Which one(s) are proposed by default as output of current Surfer versions ?
> GS7BG. In fact GMT can read the simple variations (without breaklines) of this somewhat complicated format
>
>
>> Can't Surfer export to other formats already handled by GDAL ?
> Yes, some. Nc and ArcInfo ascii at least
>
>
>
> Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit :
>> Even,
>>
>> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
>> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.
>>
>> Joaquim
>>
>> -----Original Message-----
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
>> Sent: Wednesday, March 3, 2021 6:49 PM
>> To: gdal-dev at lists.osgeo.org
>> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
>>
>> Hi,
>>
>> Following the discussions of past weeks, I motion to:
>>
>> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use.
>> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
>>
>> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
>> configuration option is set to YES, and will be removed in GDAL 3.5.
>> Implemented in https://github.com/OSGeo/gdal/pull/3505
>>
>> Starting with my +1
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/e02ce642/attachment.html>

From ivan.lucena at outlook.com  Wed Mar  3 12:22:09 2021
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Wed, 3 Mar 2021 20:22:09 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <MN2PR04MB56934DCD322B089ADC9EF118F2989@MN2PR04MB5693.namprd04.prod.outlook.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>,
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>,
 <MN2PR04MB56934DCD322B089ADC9EF118F2989@MN2PR04MB5693.namprd04.prod.outlook.com>
Message-ID: <MN2PR04MB5693879088E8E02D0B901ADDF2989@MN2PR04MB5693.namprd04.prod.outlook.com>

still (not install)

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Ivan Lucena <ivan.lucena at outlook.com>
Sent: Wednesday, March 3, 2021 3:20 PM
To: Even Rouault <even.rouault at spatialys.com>; Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: remove and deprecate a few drivers

Even,

Is the INGR driver for Integraph raster install needed?

It was developed when the format was already deprecated.

It was supposed to read old files and there was some old hardware, scanner, spitting out in that file format.

Regards,

Ivan
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault <even.rouault at spatialys.com>
Sent: Wednesday, March 3, 2021 3:07 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: remove and deprecate a few drivers

OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's
mark GSAG and GSBG as deprecated and see if that triggers reactions once
this is in the wild.

Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit :
>> Is the GSAG format really used ?
> What can I say. Because it's a simple format I used to have colleagues that used it for I/O of their codes and not rarely it ended up in my hands. But can't honestly say it's much used.
>
>
>> Which one(s) are proposed by default as output of current Surfer versions ?
> GS7BG. In fact GMT can read the simple variations (without breaklines) of this somewhat complicated format
>
>
>> Can't Surfer export to other formats already handled by GDAL ?
> Yes, some. Nc and ArcInfo ascii at least
>
>
>
> Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit :
>> Even,
>>
>> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG --- ?
>> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is the only one that I know that is able to read this format. Maybe not in this list but there are still many people who use Golden software grid formats.
>>
>> Joaquim
>>
>> -----Original Message-----
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
>> Sent: Wednesday, March 3, 2021 6:49 PM
>> To: gdal-dev at lists.osgeo.org
>> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
>>
>> Hi,
>>
>> Following the discussions of past weeks, I motion to:
>>
>> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use.
>> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
>>
>> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
>> configuration option is set to YES, and will be removed in GDAL 3.5.
>> Implemented in https://github.com/OSGeo/gdal/pull/3505
>>
>> Starting with my +1
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/0025a28f/attachment-0001.html>

From even.rouault at spatialys.com  Wed Mar  3 12:22:28 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 21:22:28 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <MN2PR04MB56934DCD322B089ADC9EF118F2989@MN2PR04MB5693.namprd04.prod.outlook.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
 <MN2PR04MB56934DCD322B089ADC9EF118F2989@MN2PR04MB5693.namprd04.prod.outlook.com>
Message-ID: <e4023019-254a-62d5-805d-cc555cc89e3b@spatialys.com>

Le 03/03/2021 ? 21:20, Ivan Lucena a ?crit?:
> Even,
>
> Is the INGR driver for Integraph raster install needed?
>
> It was developed when the format was already deprecated.
>
> It was supposed to read old files and there was some old hardware, 
> scanner, spitting out in that file format.


I'll add it to the list of deprecated drivers then.


Even


>
> Regards,
>
> Ivan
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even 
> Rouault <even.rouault at spatialys.com>
> *Sent:* Wednesday, March 3, 2021 3:07 PM
> *To:* Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; 
> gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Motion: remove and deprecate a few drivers
> OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's
> mark GSAG and GSBG as deprecated and see if that triggers reactions once
> this is in the wild.
>
> Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit?:
> >> Is the GSAG format really used ?
> > What can I say. Because it's a simple format I used to have 
> colleagues that used it for I/O of their codes and not rarely it ended 
> up in my hands. But can't honestly say it's much used.
> >
> >
> >> Which one(s) are proposed by default as output of current Surfer 
> versions ?
> > GS7BG. In fact GMT can read the simple variations (without 
> breaklines) of this somewhat complicated format
> >
> >
> >> Can't Surfer export to other formats already handled by GDAL ?
> > Yes, some. Nc and ArcInfo ascii at least
> >
> >
> >
> > Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit?:
> >> Even,
> >>
> >> May you reconsider the Golden Software drivers --- GS7BG, GSAG, 
> GSBG --- ?
> >> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL 
> is the only one that I know that is able to read this format. Maybe 
> not in this list but there are still many people who use Golden 
> software grid formats.
> >>
> >> Joaquim
> >>
> >> -----Original Message-----
> >> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even 
> Rouault
> >> Sent: Wednesday, March 3, 2021 6:49 PM
> >> To: gdal-dev at lists.osgeo.org
> >> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
> >>
> >> Hi,
> >>
> >> Following the discussions of past weeks, I motion to:
> >>
> >> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, 
> SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and 
> I'm not aware of them having been much used or being still in use.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3373 
> <https://github.com/OSGeo/gdal/pull/3373>. They (driver code, doc and 
> tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers 
> <https://github.com/OSGeo/gdal-extra-drivers>
> >>
> >> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, 
> JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, 
> NDF, SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, 
> CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, 
> REC, SDTDS, TIGER, WALK. They will now be disabled at runtime by 
> default, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> >> configuration option is set to YES, and will be removed in GDAL 3.5.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3505 
> <https://github.com/OSGeo/gdal/pull/3505>
> >>
> >> Starting with my +1
> >>
> >> Even
> >>
> >> --
> >> http://www.spatialys.com <http://www.spatialys.com>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> -- 
> http://www.spatialys.com <http://www.spatialys.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>

-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/9046fbb5/attachment.html>

From norman.barker at gmail.com  Wed Mar  3 12:22:40 2021
From: norman.barker at gmail.com (Norman Barker)
Date: Wed, 3 Mar 2021 14:22:40 -0600
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
Message-ID: <CAN_Dn-GU7U1MJ+gZW3706amjCu415hLOjCS_c+RNMip84BOt=g@mail.gmail.com>

I wrote the Cloudant driver (though it extends the CouchDB driver), it was
very useful! However afaik it is no longer being used. Though I no longer
work with CouchDB I see very little mention of geospatial and CouchDB
nowadays on their mailing lists.

I agree with the list of drivers proposed for deprecation.

+1

Norman

On Wed, Mar 3, 2021 at 2:07 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's
> mark GSAG and GSBG as deprecated and see if that triggers reactions once
> this is in the wild.
>
> Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit :
> >> Is the GSAG format really used ?
> > What can I say. Because it's a simple format I used to have colleagues
> that used it for I/O of their codes and not rarely it ended up in my hands.
> But can't honestly say it's much used.
> >
> >
> >> Which one(s) are proposed by default as output of current Surfer
> versions ?
> > GS7BG. In fact GMT can read the simple variations (without breaklines)
> of this somewhat complicated format
> >
> >
> >> Can't Surfer export to other formats already handled by GDAL ?
> > Yes, some. Nc and ArcInfo ascii at least
> >
> >
> >
> > Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit :
> >> Even,
> >>
> >> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG
> --- ?
> >> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is
> the only one that I know that is able to read this format. Maybe not in
> this list but there are still many people who use Golden software grid
> formats.
> >>
> >> Joaquim
> >>
> >> -----Original Message-----
> >> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even
> Rouault
> >> Sent: Wednesday, March 3, 2021 6:49 PM
> >> To: gdal-dev at lists.osgeo.org
> >> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
> >>
> >> Hi,
> >>
> >> Following the discussions of past weeks, I motion to:
> >>
> >> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
> >>
> >> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM,
> JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF,
> SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT,
> COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER,
> WALK. They will now be disabled at runtime by default, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> >> configuration option is set to YES, and will be removed in GDAL 3.5.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3505
> >>
> >> Starting with my +1
> >>
> >> Even
> >>
> >> --
> >> http://www.spatialys.com
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/9b5e7a3a/attachment.html>

From even.rouault at spatialys.com  Wed Mar  3 12:31:12 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 21:31:12 +0100
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <rmipn0gc7v8.fsf@s1.lexort.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 <rmi8s76rcxi.fsf@s1.lexort.com>
 <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk>
 <rmipn0gc7v8.fsf@s1.lexort.com>
Message-ID: <7076d880-51d2-5fe6-b750-a931003344a1@spatialys.com>

Hi,
> https://gdal.org/development/rfc/rfc34_license_policy.html

As indicated in the top of the RFC, its status is "development" (draft), 
which here means stalled/non-adopted given that it was proposed long 
time ago. So there's no runtime mechanism to control license compatibility.


> But, I'm worried about something different.  As a packager, I'd like to
> know that unless I take the affirmative step of passing --enable-foo,
> for any GPLish or proprietary foo, I won't end up with a gdal build
> linked with foo just because it happened to be present in my build
> environment.

This should normally be the case. One of the few GPL dependencies is 
Poppler and must be explicitly enabled with --with-poppler . Similarly 
with MySQL. All proprietary dependencies need also to be explicitly 
enabled AFAIK (you actually need to point to their SDK).

GEOS (LGPL) is enabled by default is found.

Even

-- 

http://www.spatialys.com


From schwehr at gmail.com  Wed Mar  3 12:34:13 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 3 Mar 2021 12:34:13 -0800
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
Message-ID: <CACmBxysq0ByoBiCkrUa72GirWDPb-Y1uiuftv3nXA4DNkkG23g@mail.gmail.com>

Thanks Even! Hurray for cleanup!  Some thoughts looking at the list:

> SEGY

Makes me sad, but I've never seen anyone use it.  I've done seismic work
but never needed it.  +1 to nuke it.

> E00GRID

I keep running into E00 data from the USGS, but it's mostly been vector
data.  I'm +0 on removing this.  I ended up using GDAL on an e00 grid a
year or two ago, but that isn't much of an argument for keeping it.

> Deprecate JPEG2000

Is there something the openjpeg2 driver can't do that Jasper can?  Can it
be removed?

> TIGER

It looks like they don't use that format any more, so +1

https://www.census.gov/programs-surveys/geography/guidance/tiger-data-products-guide.html


On Wed, Mar 3, 2021 at 12:07 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> OK, I amend my motion to keep GS7BG as non-deprecated for now. Let's
> mark GSAG and GSBG as deprecated and see if that triggers reactions once
> this is in the wild.
>
> Le 03/03/2021 ? 20:55, Joaquim Manuel Freire Lu?s a ?crit :
> >> Is the GSAG format really used ?
> > What can I say. Because it's a simple format I used to have colleagues
> that used it for I/O of their codes and not rarely it ended up in my hands.
> But can't honestly say it's much used.
> >
> >
> >> Which one(s) are proposed by default as output of current Surfer
> versions ?
> > GS7BG. In fact GMT can read the simple variations (without breaklines)
> of this somewhat complicated format
> >
> >
> >> Can't Surfer export to other formats already handled by GDAL ?
> > Yes, some. Nc and ArcInfo ascii at least
> >
> >
> >
> > Le 03/03/2021 ? 20:02, Joaquim Manuel Freire Lu?s a ?crit :
> >> Even,
> >>
> >> May you reconsider the Golden Software drivers --- GS7BG, GSAG, GSBG
> --- ?
> >> GMT can read/write GSBG, but specially GS7BG, besides Surfer, GDAL is
> the only one that I know that is able to read this format. Maybe not in
> this list but there are still many people who use Golden software grid
> formats.
> >>
> >> Joaquim
> >>
> >> -----Original Message-----
> >> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even
> Rouault
> >> Sent: Wednesday, March 3, 2021 6:49 PM
> >> To: gdal-dev at lists.osgeo.org
> >> Subject: [gdal-dev] Motion: remove and deprecate a few drivers
> >>
> >> Hi,
> >>
> >> Following the discussions of past weeks, I motion to:
> >>
> >> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
> >>
> >> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM,
> JPEG2000, JPEGLS, MG4LIDAR, GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF,
> SDTS, SGI, XPM, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT,
> COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER,
> WALK. They will now be disabled at runtime by default, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> >> configuration option is set to YES, and will be removed in GDAL 3.5.
> >> Implemented in https://github.com/OSGeo/gdal/pull/3505
> >>
> >> Starting with my +1
> >>
> >> Even
> >>
> >> --
> >> http://www.spatialys.com
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/442aab1a/attachment.html>

From even.rouault at spatialys.com  Wed Mar  3 12:39:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 21:39:54 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <CACmBxysq0ByoBiCkrUa72GirWDPb-Y1uiuftv3nXA4DNkkG23g@mail.gmail.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
 <CACmBxysq0ByoBiCkrUa72GirWDPb-Y1uiuftv3nXA4DNkkG23g@mail.gmail.com>
Message-ID: <782f5a6f-24eb-db8d-429b-f30a8a258436@spatialys.com>

 > Deprecate JPEG2000
>
> Is there something the openjpeg2 driver can't do that Jasper can?? Can 
> it be removed?

I'm not aware of things that Jasper/JPEG2000 can do that JP2OpenJPEG 
can't. But there are definitely binary distributions still using it, and 
not yet JP2OpenJPEG. The deprecation hint for that driver is to use 
JP2OpenJPEG, so yes ultimately we'll remove it.

Even

-- 
http://www.spatialys.com


From warmerdam at pobox.com  Wed Mar  3 13:10:05 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 3 Mar 2021 16:10:05 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <7076d880-51d2-5fe6-b750-a931003344a1@spatialys.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700> <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 <rmi8s76rcxi.fsf@s1.lexort.com>
 <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk>
 <rmipn0gc7v8.fsf@s1.lexort.com>
 <7076d880-51d2-5fe6-b750-a931003344a1@spatialys.com>
Message-ID: <CA+YzLBc15=2wQe-UxChw=vMQOqdyMmLEe6O5RU404==hvb98KA@mail.gmail.com>

Folks,

When Andrew first mentioned RFC 34 I skimmed it and was a bit surprised it
existed though perhaps it seemed a wee bit familiar.  Now that Even
mentions it was not ever implemented I see that *I* proposed it and
presumably did not actually follow up on implementing it or getting it
adopted.   It still seems like a vaguely good idea, but also apparently one
without a compelling need since it has not been followed up on.

However, it does not solve the build-time problem posed by Greg.  I think
the approach that inclusion of reciprocally licensed or proprietary drivers
requiring explicit inclusion at configure time is a reasonable approach to
avoid accidental license violations by packagers.

Best regards,
Frank



On Wed, Mar 3, 2021 at 3:31 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
> > https://gdal.org/development/rfc/rfc34_license_policy.html
>
> As indicated in the top of the RFC, its status is "development" (draft),
> which here means stalled/non-adopted given that it was proposed long
> time ago. So there's no runtime mechanism to control license compatibility.
>
>
> > But, I'm worried about something different.  As a packager, I'd like to
> > know that unless I take the affirmative step of passing --enable-foo,
> > for any GPLish or proprietary foo, I won't end up with a gdal build
> > linked with foo just because it happened to be present in my build
> > environment.
>
> This should normally be the case. One of the few GPL dependencies is
> Poppler and must be explicitly enabled with --with-poppler . Similarly
> with MySQL. All proprietary dependencies need also to be explicitly
> enabled AFAIK (you actually need to point to their SDK).
>
> GEOS (LGPL) is enabled by default is found.
>
> Even
>
> --
>
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/3f611b25/attachment.html>

From ron.palmer at pgcgroup.com.au  Wed Mar  3 13:55:26 2021
From: ron.palmer at pgcgroup.com.au (Ron Palmer)
Date: Thu, 4 Mar 2021 07:55:26 +1000
Subject: [gdal-dev] problem: gdal_grid, output ers raster file
In-Reply-To: <1e6573b4-e303-7b20-3cac-e1681c6ea6f6@pgcgroup.com.au>
References: <1e6573b4-e303-7b20-3cac-e1681c6ea6f6@pgcgroup.com.au>
Message-ID: <b9cfc764-6bc2-98a9-2fac-a9290edf78b4@pgcgroup.com.au>

Looks to me like the ERMapper ERS driver has a bug, using the bottom 
left corner to georef the raster, instead of top left. I can only use it 
if I use local coordinates, any negative northings are plotted towards 
the north. ERS is the main raster format I use.

I am happy to assist in sorting out the ERS format if the person behind 
it is willing to have a look at it.

Thanks,

Ron

On 17/02/2021 4:55 pm, Ron Palmer wrote:
>
> I am having issues with outputting ers raster file from gdal_grid. I 
> import a csv as shape, then grid it and output as ers. The Y coords 
> are all negative as it is in fact a section I simply grid as a 2D 
> raster. Although the shape file plots as I expect it, the ers is 
> flipped upside-down, and hung at the lowest Y value. Please note, if I 
> use GS7BG it works fine.
>
> How do I get an ERS output that matches the shape file/data points?
>
> I have created a simple example... however, I am new to GDAL, and this 
> is my first post, so please let me know if there is anything else I 
> should provide.
>
> Thanks
>
> Ron
>
>
> These are the commands:
>
> ? 711? ogr2ogr -f "ESRI Shapefile" xc_zc.shp new.csv -oo 
> X_POSSIBLE_NAMES=xc -oo Y_POSSIBLE_NAMES=zc
> ? 712? gdal_grid -zfield Value -a linear:radius=5 xc_zc.shp -of ERS 
> xc_zc.ers
>
> here is the content of the data
>
> xc,zc,Value
> 1.25,-0.625,5
> 3.75,-0.625,5
> 6.25,-0.625,5
> 8.75,-0.625,5
> 11.25,-0.625,5
> 1.25,-1.938,4
> 3.75,-1.938,4
> 6.25,-1.938,4
> 8.75,-1.938,4
> 11.25,-1.938,4
> 1.25,-3.381,3
> 3.75,-3.381,3
> 6.25,-3.381,3
> 8.75,-3.381,3
> 11.25,-3.381,3
> 1.25,-4.969,2
> 3.75,-4.969,2
> 6.25,-4.969,2
> 8.75,-4.969,2
> 11.25,-4.969,2
> 1.25,-6.716,1
> 3.75,-6.716,1
> 6.25,-6.716,1
> 8.75,-6.716,1
> 11.25,-6.716,1
>
> I have attached a jpg of my output (not sure whether the mailing list 
> allows attachments...)
>
>
>
> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
> 	Virus-free. www.avg.com 
> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
>
>
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
-- 

*Ron Palmer*MSc MBA

Principal Geophysicist

0413 579 099??ron.palmer at pgcgroup.com.au

www.pgcgroup.com.au <URL:www.pgcgroup.com.au>

*/PGC Geophysics - We specialise in Electrical Surveys!/*



-- 
This email has been checked for viruses by AVG.
https://www.avg.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/e41763f5/attachment-0001.html>

From even.rouault at spatialys.com  Wed Mar  3 14:11:44 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Mar 2021 23:11:44 +0100
Subject: [gdal-dev] problem: gdal_grid, output ers raster file
In-Reply-To: <b9cfc764-6bc2-98a9-2fac-a9290edf78b4@pgcgroup.com.au>
References: <1e6573b4-e303-7b20-3cac-e1681c6ea6f6@pgcgroup.com.au>
 <b9cfc764-6bc2-98a9-2fac-a9290edf78b4@pgcgroup.com.au>
Message-ID: <65cbf32e-4281-4164-e573-a67d539c19be@spatialys.com>

Hi,

This is a "well known" behaviour of gdal_grid in which it writes raster 
with a bottom-left corner origin, whereas most other GDAL utilities use 
a top-left corner origin. The ERS driver doesn't support such 
convention. The workaround you can use is to output gdal_grid as a TIFF 
(tmp.tif), then use "gdalwarp tmp.tif out.ers" to flip the origin to a 
top-left one.

Even

Le 03/03/2021 ? 22:55, Ron Palmer a ?crit?:
>
> Looks to me like the ERMapper ERS driver has a bug, using the bottom 
> left corner to georef the raster, instead of top left. I can only use 
> it if I use local coordinates, any negative northings are plotted 
> towards the north. ERS is the main raster format I use.
>
> I am happy to assist in sorting out the ERS format if the person 
> behind it is willing to have a look at it.
>
> Thanks,
>
> Ron
>
> On 17/02/2021 4:55 pm, Ron Palmer wrote:
>>
>> I am having issues with outputting ers raster file from gdal_grid. I 
>> import a csv as shape, then grid it and output as ers. The Y coords 
>> are all negative as it is in fact a section I simply grid as a 2D 
>> raster. Although the shape file plots as I expect it, the ers is 
>> flipped upside-down, and hung at the lowest Y value. Please note, if 
>> I use GS7BG it works fine.
>>
>> How do I get an ERS output that matches the shape file/data points?
>>
>> I have created a simple example... however, I am new to GDAL, and 
>> this is my first post, so please let me know if there is anything 
>> else I should provide.
>>
>> Thanks
>>
>> Ron
>>
>>
>> These are the commands:
>>
>> ? 711? ogr2ogr -f "ESRI Shapefile" xc_zc.shp new.csv -oo 
>> X_POSSIBLE_NAMES=xc -oo Y_POSSIBLE_NAMES=zc
>> ? 712? gdal_grid -zfield Value -a linear:radius=5 xc_zc.shp -of ERS 
>> xc_zc.ers
>>
>> here is the content of the data
>>
>> xc,zc,Value
>> 1.25,-0.625,5
>> 3.75,-0.625,5
>> 6.25,-0.625,5
>> 8.75,-0.625,5
>> 11.25,-0.625,5
>> 1.25,-1.938,4
>> 3.75,-1.938,4
>> 6.25,-1.938,4
>> 8.75,-1.938,4
>> 11.25,-1.938,4
>> 1.25,-3.381,3
>> 3.75,-3.381,3
>> 6.25,-3.381,3
>> 8.75,-3.381,3
>> 11.25,-3.381,3
>> 1.25,-4.969,2
>> 3.75,-4.969,2
>> 6.25,-4.969,2
>> 8.75,-4.969,2
>> 11.25,-4.969,2
>> 1.25,-6.716,1
>> 3.75,-6.716,1
>> 6.25,-6.716,1
>> 8.75,-6.716,1
>> 11.25,-6.716,1
>>
>> I have attached a jpg of my output (not sure whether the mailing list 
>> allows attachments...)
>>
>>
>>
>> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
>> 	Virus-free. www.avg.com 
>> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
>>
>>
>> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> -- 
>
> *Ron Palmer*MSc MBA
>
> Principal Geophysicist
>
> 0413 579 099 ron.palmer at pgcgroup.com.au
>
> www.pgcgroup.com.au <URL:www.pgcgroup.com.au>
>
> */PGC Geophysics - We specialise in Electrical Surveys!/*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/5b8b85e5/attachment.html>

From ron.palmer at pgcgroup.com.au  Wed Mar  3 14:24:11 2021
From: ron.palmer at pgcgroup.com.au (Ron Palmer)
Date: Thu, 4 Mar 2021 08:24:11 +1000
Subject: [gdal-dev] problem: gdal_grid, output ers raster file
In-Reply-To: <65cbf32e-4281-4164-e573-a67d539c19be@spatialys.com>
References: <1e6573b4-e303-7b20-3cac-e1681c6ea6f6@pgcgroup.com.au>
 <b9cfc764-6bc2-98a9-2fac-a9290edf78b4@pgcgroup.com.au>
 <65cbf32e-4281-4164-e573-a67d539c19be@spatialys.com>
Message-ID: <4b9c38da-64a8-ac8c-5c46-9b7bdda284b9@pgcgroup.com.au>

Thanks Even for the follow up and description of the work-around, will 
try it right now.

Ron

On 4/03/2021 8:11 am, Even Rouault wrote:
>
> Hi,
>
> This is a "well known" behaviour of gdal_grid in which it writes 
> raster with a bottom-left corner origin, whereas most other GDAL 
> utilities use a top-left corner origin. The ERS driver doesn't support 
> such convention. The workaround you can use is to output gdal_grid as 
> a TIFF (tmp.tif), then use "gdalwarp tmp.tif out.ers" to flip the 
> origin to a top-left one.
>
> Even
>
> Le 03/03/2021 ? 22:55, Ron Palmer a ?crit?:
>>
>> Looks to me like the ERMapper ERS driver has a bug, using the bottom 
>> left corner to georef the raster, instead of top left. I can only use 
>> it if I use local coordinates, any negative northings are plotted 
>> towards the north. ERS is the main raster format I use.
>>
>> I am happy to assist in sorting out the ERS format if the person 
>> behind it is willing to have a look at it.
>>
>> Thanks,
>>
>> Ron
>>
>> On 17/02/2021 4:55 pm, Ron Palmer wrote:
>>>
>>> I am having issues with outputting ers raster file from gdal_grid. I 
>>> import a csv as shape, then grid it and output as ers. The Y coords 
>>> are all negative as it is in fact a section I simply grid as a 2D 
>>> raster. Although the shape file plots as I expect it, the ers is 
>>> flipped upside-down, and hung at the lowest Y value. Please note, if 
>>> I use GS7BG it works fine.
>>>
>>> How do I get an ERS output that matches the shape file/data points?
>>>
>>> I have created a simple example... however, I am new to GDAL, and 
>>> this is my first post, so please let me know if there is anything 
>>> else I should provide.
>>>
>>> Thanks
>>>
>>> Ron
>>>
>>>
>>> These are the commands:
>>>
>>> ? 711? ogr2ogr -f "ESRI Shapefile" xc_zc.shp new.csv -oo 
>>> X_POSSIBLE_NAMES=xc -oo Y_POSSIBLE_NAMES=zc
>>> ? 712? gdal_grid -zfield Value -a linear:radius=5 xc_zc.shp -of ERS 
>>> xc_zc.ers
>>>
>>> here is the content of the data
>>>
>>> xc,zc,Value
>>> 1.25,-0.625,5
>>> 3.75,-0.625,5
>>> 6.25,-0.625,5
>>> 8.75,-0.625,5
>>> 11.25,-0.625,5
>>> 1.25,-1.938,4
>>> 3.75,-1.938,4
>>> 6.25,-1.938,4
>>> 8.75,-1.938,4
>>> 11.25,-1.938,4
>>> 1.25,-3.381,3
>>> 3.75,-3.381,3
>>> 6.25,-3.381,3
>>> 8.75,-3.381,3
>>> 11.25,-3.381,3
>>> 1.25,-4.969,2
>>> 3.75,-4.969,2
>>> 6.25,-4.969,2
>>> 8.75,-4.969,2
>>> 11.25,-4.969,2
>>> 1.25,-6.716,1
>>> 3.75,-6.716,1
>>> 6.25,-6.716,1
>>> 8.75,-6.716,1
>>> 11.25,-6.716,1
>>>
>>> I have attached a jpg of my output (not sure whether the mailing 
>>> list allows attachments...)
>>>
>>>
>>>
>>> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
>>> 	Virus-free. www.avg.com 
>>> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 
>>>
>>>
>>> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>> -- 
>>
>> *Ron Palmer*MSc MBA
>>
>> Principal Geophysicist
>>
>> 0413 579 099 ron.palmer at pgcgroup.com.au
>>
>> www.pgcgroup.com.au <URL:www.pgcgroup.com.au>
>>
>> */PGC Geophysics - We specialise in Electrical Surveys!/*
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
-- 

*Ron Palmer*MSc MBA

Principal Geophysicist

0413 579 099??ron.palmer at pgcgroup.com.au

www.pgcgroup.com.au <URL:www.pgcgroup.com.au>

*/PGC Geophysics - We specialise in Electrical Surveys!/*



-- 
This email has been checked for viruses by AVG.
https://www.avg.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/f152c5c0/attachment-0001.html>

From runette at gmail.com  Wed Mar  3 14:48:15 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 3 Mar 2021 22:48:15 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <782f5a6f-24eb-db8d-429b-f30a8a258436@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <AM6PR04MB3959138CC7E41F90BB993F0AA6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <9b374c19-237c-ec69-e56a-d6e00b81edec@spatialys.com>
 <AM6PR04MB39592F54AA64D64F356B17F6A6989@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <5e9fbbd5-b12c-8515-08b9-81b5d5ff04a4@spatialys.com>
 <CACmBxysq0ByoBiCkrUa72GirWDPb-Y1uiuftv3nXA4DNkkG23g@mail.gmail.com>
 <782f5a6f-24eb-db8d-429b-f30a8a258436@spatialys.com>
Message-ID: <CAE8nN5NQ+TPJvNPixfyKhddkSNJt3mM_PA883qinM4KLJmRQTg@mail.gmail.com>

I have to agree with the comments about Surfer and GS7. I was given a file
in that format only last week.

On Wed, 3 Mar 2021 at 20:40, Even Rouault <even.rouault at spatialys.com>
wrote:

>  > Deprecate JPEG2000
> >
> > Is there something the openjpeg2 driver can't do that Jasper can?  Can
> > it be removed?
>
> I'm not aware of things that Jasper/JPEG2000 can do that JP2OpenJPEG
> can't. But there are definitely binary distributions still using it, and
> not yet JP2OpenJPEG. The deprecation hint for that driver is to use
> JP2OpenJPEG, so yes ultimately we'll remove it.
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/c86e806b/attachment.html>

From gdt at lexort.com  Wed Mar  3 14:55:47 2021
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 03 Mar 2021 17:55:47 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <7076d880-51d2-5fe6-b750-a931003344a1@spatialys.com> (Even
 Rouault's message of "Wed, 3 Mar 2021 21:31:12 +0100")
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>
 <CAK8GPyAFgN_u2w34JZUi_YrfqfH4iQPYnS3gDaCedBgvr=07Aw@mail.gmail.com>
 <1614613645878-0.post@n6.nabble.com>
 <CAK8GPyCbAWXHeAcy8cN5iXNopUSDXYK_OaMBRQ=Umu=irrzRQA@mail.gmail.com>
 <rmi8s76rcxi.fsf@s1.lexort.com>
 <9a76e283-983f-247-406a-a1e37fd2c669@aitchison.me.uk>
 <rmipn0gc7v8.fsf@s1.lexort.com>
 <7076d880-51d2-5fe6-b750-a931003344a1@spatialys.com>
Message-ID: <rmiczwfc0ek.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

>> But, I'm worried about something different.  As a packager, I'd like to
>> know that unless I take the affirmative step of passing --enable-foo,
>> for any GPLish or proprietary foo, I won't end up with a gdal build
>> linked with foo just because it happened to be present in my build
>> environment.
>
> This should normally be the case. One of the few GPL dependencies is
> Poppler and must be explicitly enabled with --with-poppler . Similarly
> with MySQL. All proprietary dependencies need also to be explicitly
> enabled AFAIK (you actually need to point to their SDK).

Thanks.   I'll report if I find any otherwise.

> GEOS (LGPL) is enabled by default is found.

That seems entirely reasonable to me.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/05773b0d/attachment.sig>

From warmerdam at pobox.com  Wed Mar  3 14:58:18 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 3 Mar 2021 17:58:18 -0500
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
Message-ID: <CA+YzLBcyniEvrdkh+MO+=xpPxQm8B_jFBk2mE4hAKTAWjySUCQ@mail.gmail.com>

Even,

I'm -1 on this motion as it stands.  There are a quite a few formats that I
think we ought to continue to support for archival purposes
indefinitely including FIT, JDEM, GMT, DOQ1/2, LAN, MFF, NDF, SDTS, SGI,
XPM, and TIGER.  I am prepared to be listed as supporting maintainer for
these drivers.

Best regards,
Frank


On Wed, Mar 3, 2021 at 1:49 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Following the discussions of past weeks, I motion to:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM,
> JPEG2000, JPEGLS, MG4LIDAR,
> GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP
> and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME,
> GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now
> be disabled
> at runtime by default, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/27fa089d/attachment.html>

From even.rouault at spatialys.com  Wed Mar  3 15:55:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 00:55:45 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <CA+YzLBcyniEvrdkh+MO+=xpPxQm8B_jFBk2mE4hAKTAWjySUCQ@mail.gmail.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CA+YzLBcyniEvrdkh+MO+=xpPxQm8B_jFBk2mE4hAKTAWjySUCQ@mail.gmail.com>
Message-ID: <51110890-52f3-f4bd-5640-b173ea8e0ec9@spatialys.com>

Frank,
> Even,
>
> I'm -1 on this motion as it stands.? There are a quite a few formats 
> that I think we ought to continue to support for archival purposes 
> indefinitely?including FIT, JDEM, GMT, DOQ1/2, LAN, MFF, NDF, SDTS, 
> SGI, XPM, and TIGER.? I am prepared to be listed as supporting 
> maintainer for these drivers.

Those formats were aimed for the runtime deprecation mechanism. The idea 
was to get ~ 1 year feedback period to see if people really need that 
nowadays, which I strongly doubt about. There are Docker images of older 
GDAL versions available for people that would still need to access such 
archives. I believe I tried to make previously the point that the issue 
wasn't the individual maintenance of those formats, but the weight they 
had to the whole for little benefit to the majority of users & developers.

Are you OK at least with the removal of the drivers I mentioned in the 
first bullet of the motion ? (the ones of 
https://github.com/OSGeo/gdal/pull/3373). I'm not willing to support 
them any longer (and I'm not asking anyone to step up for that!)

Even

-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/7245a710/attachment.html>

From darren.weber at jupiterintel.com  Wed Mar  3 15:56:15 2021
From: darren.weber at jupiterintel.com (Darren Weber)
Date: Wed, 3 Mar 2021 15:56:15 -0800
Subject: [gdal-dev] Prevent GDAL reads for .aux or any other s3 objects that
 do not exist
Message-ID: <CAODt-gpoqudevD3EuUBZ2Zr2S2CtOwm-jFdbPUSYWfg+WJwGwg@mail.gmail.com>

In https://github.com/mapbox/rasterio/issues/2119#issuecomment-790024225
I've noted how s3-COG reads can use retries to handle s3 rate throttling
(503) by enabling the `GDAL_HTTP_MAX_RETRY`.  Our dataset on s3 only
contains *.tif files and we need to prevent GDAL from issuing any GET/HEAD
requests to try to read any other files.  Is there an env-var for this?

The `GDAL_DISABLE_READDIR_ON_OPEN` is `False` so that GDAL can read the s3
prefix to list objects in one GET request.  From that read, it should have
already determined that there are only *.tif files and no *.aux* files
available.  When it gets a 503 rate throttle response, however, it seems to
auto-try to read some supplementary files, e.g. one log contains messages
that indicate GDAL is trying to read an .aux file that does not exist and
we want to prevent GDAL from issuing any GET or HEAD requests for anything
other than *.tif files (objects).

[WARNING] 2021-03-03T19:37:40.312Z CPLE_AppDefined in HTTP error code:
503 - https://a-bucket.s3.amazonaws.com/geotiff.aux. Retrying again in
0.5 secs
[WARNING] 2021-03-03T19:37:40.795Z CPLE_AppDefined in HTTP error code:
503 - https://a-bucket.s3.amazonaws.com/geotiff.aux. Retrying again in
1.0 secs
[WARNING] 2021-03-03T19:37:41.796Z CPLE_AppDefined in HTTP error code:
503 - https://a-bucket.s3.amazonaws.com/geotiff.aux. Retrying again in
2.2 secs
[WARNING] 2021-03-03T19:37:44.290Z CPLE_AppDefined in HTTP response
code on https://a-bucket.s3.amazonaws.com/geotiff.aux: 503
2021-03-03 19:37:44,155 | INFO | extract_raster_points:1036 |
s3://a-bucket/geotiff.tif extract cells (1)...
2021-03-03 19:37:44,347 | INFO | extract_raster_points:1050 |
s3://a-bucket/geotiff.tif extract cells (1) done

That log suggests that there is a huge performance hit to retry reading an
.aux file that does not exist and GDAL should not even try to issue any
kind of request for it (i.e. we want to prevent it).

When running some unit tests with debug curl details available (but no
ability to create 503 responses), it appears that GDAL finds just the file
required and reads only partial reads from that file, e.g. this is a sample
of GET requests to read from one .tif s3-COG:

$ grep 'GET' tmp.log
> GET /?delimiter=%2F&prefix=unit_tests%2Fgis%2F HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> GET /unit_tests/gis/cea_blocks.tif HTTP/1.1

TIA, Darren


-- 
Darren Weber, PhD
Senior Software Engineer
Jupiter Intelligence


*"Predicting risk in a changing climate"*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/a4ac924c/attachment-0001.html>

From warmerdam at pobox.com  Wed Mar  3 16:16:34 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 3 Mar 2021 19:16:34 -0500
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <51110890-52f3-f4bd-5640-b173ea8e0ec9@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CA+YzLBcyniEvrdkh+MO+=xpPxQm8B_jFBk2mE4hAKTAWjySUCQ@mail.gmail.com>
 <51110890-52f3-f4bd-5640-b173ea8e0ec9@spatialys.com>
Message-ID: <CA+YzLBcwZzcqKkrscX8T-C9jGO0Oro9uRPA2KopeeBdQu3yFdw@mail.gmail.com>

On Wed, Mar 3, 2021 at 6:55 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Frank,
>
> Even,
>
> I'm -1 on this motion as it stands.  There are a quite a few formats that
> I think we ought to continue to support for archival purposes
> indefinitely including FIT, JDEM, GMT, DOQ1/2, LAN, MFF, NDF, SDTS, SGI,
> XPM, and TIGER.  I am prepared to be listed as supporting maintainer for
> these drivers.
>
> Those formats were aimed for the runtime deprecation mechanism. The idea
> was to get ~ 1 year feedback period to see if people really need that
> nowadays, which I strongly doubt about. There are Docker images of older
> GDAL versions available for people that would still need to access such
> archives. I believe I tried to make previously the point that the issue
> wasn't the individual maintenance of those formats, but the weight they had
> to the whole for little benefit to the majority of users & developers.
>
> Are you OK at least with the removal of the drivers I mentioned in the
> first bullet of the motion ? (the ones of
> https://github.com/OSGeo/gdal/pull/3373). I'm not willing to support them
> any longer (and I'm not asking anyone to step up for that!)
> Even
>
> -- http://www.spatialys.com
>
> Even,

I'm ok with the removal list.  I do not really agree with the deprecating
the formats I listed.  I feel like the deprecate and wait for useful
feedback is more appropriate to formats that are hard to support now (like
those depending on external libraries) and that the main kind of feedback
to be sought would be someone willing to be responsible for them.

Best regards,
Frank




-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/97b1818f/attachment.html>

From vincent.sarago at gmail.com  Wed Mar  3 16:19:58 2021
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Wed, 3 Mar 2021 19:19:58 -0500
Subject: [gdal-dev] Prevent GDAL reads for .aux or any other s3 objects
 that do not exist
In-Reply-To: <CAODt-gpoqudevD3EuUBZ2Zr2S2CtOwm-jFdbPUSYWfg+WJwGwg@mail.gmail.com>
References: <CAODt-gpoqudevD3EuUBZ2Zr2S2CtOwm-jFdbPUSYWfg+WJwGwg@mail.gmail.com>
Message-ID: <E41ACECE-8B6A-4181-931A-4DF1ED2D921E@gmail.com>

Hi Darren

You can do this by setting `GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR` or by narrowing the allowed extension with "CPL_VSIL_CURL_ALLOWED_EXTENSIONS=.tif"

Kyle is working on some docs that explains those env in TiTiler:
- https://github.com/developmentseed/titiler/blob/0a5288de30845865256a0124ed233f918812aa78/docs/concepts/performance_tuning.md#gdal_disable_readdir_on_open <https://github.com/developmentseed/titiler/blob/0a5288de30845865256a0124ed233f918812aa78/docs/concepts/performance_tuning.md#gdal_disable_readdir_on_open>
- https://github.com/developmentseed/titiler/blob/0a5288de30845865256a0124ed233f918812aa78/docs/concepts/performance_tuning.md#cpl_vsil_curl_allowed_extensions <https://github.com/developmentseed/titiler/blob/0a5288de30845865256a0124ed233f918812aa78/docs/concepts/performance_tuning.md#cpl_vsil_curl_allowed_extensions>

Vincent

> On Mar 3, 2021, at 6:56 PM, Darren Weber <darren.weber at jupiterintel.com> wrote:
> 
> In https://github.com/mapbox/rasterio/issues/2119#issuecomment-790024225 <https://github.com/mapbox/rasterio/issues/2119#issuecomment-790024225> I've noted how s3-COG reads can use retries to handle s3 rate throttling (503) by enabling the `GDAL_HTTP_MAX_RETRY`.  Our dataset on s3 only contains *.tif files and we need to prevent GDAL from issuing any GET/HEAD requests to try to read any other files.  Is there an env-var for this?
> 
> The `GDAL_DISABLE_READDIR_ON_OPEN` is `False` so that GDAL can read the s3 prefix to list objects in one GET request.  From that read, it should have already determined that there are only *.tif files and no *.aux* files available.  When it gets a 503 rate throttle response, however, it seems to auto-try to read some supplementary files, e.g. one log contains messages that indicate GDAL is trying to read an .aux file that does not exist and we want to prevent GDAL from issuing any GET or HEAD requests for anything other than *.tif files (objects).
> 
> [WARNING] 2021-03-03T19:37:40.312Z CPLE_AppDefined in HTTP error code: 503 - https://a-bucket.s3.amazonaws.com/geotiff.aux <https://a-bucket.s3.amazonaws.com/geotiff.aux>. Retrying again in 0.5 secs
> [WARNING] 2021-03-03T19:37:40.795Z CPLE_AppDefined in HTTP error code: 503 - https://a-bucket.s3.amazonaws.com/geotiff.aux <https://a-bucket.s3.amazonaws.com/geotiff.aux>. Retrying again in 1.0 secs
> [WARNING] 2021-03-03T19:37:41.796Z CPLE_AppDefined in HTTP error code: 503 - https://a-bucket.s3.amazonaws.com/geotiff.aux <https://a-bucket.s3.amazonaws.com/geotiff.aux>. Retrying again in 2.2 secs
> [WARNING] 2021-03-03T19:37:44.290Z CPLE_AppDefined in HTTP response code on https://a-bucket.s3.amazonaws.com/geotiff.aux <https://a-bucket.s3.amazonaws.com/geotiff.aux>: 503
> 2021-03-03 19:37:44,155 | INFO | extract_raster_points:1036 | s3://a-bucket/geotiff.tif extract cells (1)...
> 2021-03-03 19:37:44,347 | INFO | extract_raster_points:1050 | s3://a-bucket/geotiff.tif extract cells (1) done
> That log suggests that there is a huge performance hit to retry reading an .aux file that does not exist and GDAL should not even try to issue any kind of request for it (i.e. we want to prevent it).
> 
> When running some unit tests with debug curl details available (but no ability to create 503 responses), it appears that GDAL finds just the file required and reads only partial reads from that file, e.g. this is a sample of GET requests to read from one .tif s3-COG:
> 
> $ grep 'GET' tmp.log
> > GET /?delimiter=%2F&prefix=unit_tests%2Fgis%2F HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> > GET /unit_tests/gis/cea_blocks.tif HTTP/1.1
> 
> TIA, Darren
> 
> 
> -- 
> Darren Weber, PhD
> Senior Software Engineer
> Jupiter Intelligence
> 
> 
> "Predicting risk in a changing climate"
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210303/6d8f9911/attachment.html>

From j1 at jimenezshaw.com  Thu Mar  4 00:41:22 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 4 Mar 2021 09:41:22 +0100
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
Message-ID: <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>

+1

(using a docker image to convert any of those removed formats if you find a
file at the bottom of you cellar in the far future is a great alternative.
Thanks Even)

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 3 Mar 2021 at 19:49, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Following the discussions of past weeks, I motion to:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM,
> JPEG2000, JPEGLS, MG4LIDAR,
> GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP
> and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME,
> GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now
> be disabled
> at runtime by default, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/62c61cc1/attachment-0001.html>

From andrew at aitchison.me.uk  Thu Mar  4 00:59:06 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 4 Mar 2021 08:59:06 +0000 (GMT)
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>
Message-ID: <6a6fbab4-9f32-2463-d89-df3613bb5fe@aitchison.me.uk>

On Thu, 4 Mar 2021, Javier Jimenez Shaw wrote:

> (using a docker image to convert any of those removed formats if you find a
> file at the bottom of you cellar in the far future is a great alternative.

I don't have a lot of confidence in being able to run an old docker image
in the far future, especially if I don't have an x86 machine to run it on.

https://medium.com/nttlabs/buildx-multiarch-2c6c2df00ca2
suggests that docker images should be built "multi-arch"
so that they run on x86 and the new ARM-based Apple Macs.
Who is going to rebuild and host the current GDAL docker like this ?

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From robert.coup at koordinates.com  Thu Mar  4 05:36:15 2021
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 4 Mar 2021 13:36:15 +0000
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <6a6fbab4-9f32-2463-d89-df3613bb5fe@aitchison.me.uk>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>
 <6a6fbab4-9f32-2463-d89-df3613bb5fe@aitchison.me.uk>
Message-ID: <CAFLLRp+LQbrs1xYh=fyfQ_EMF0T+OGrScX3BL07gbUkqgwt2eg@mail.gmail.com>

Hi Andrew,

On Thu, 4 Mar 2021 at 08:59, Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

> On Thu, 4 Mar 2021, Javier Jimenez Shaw wrote:
>
> > (using a docker image to convert any of those removed formats if you
> find a
> > file at the bottom of you cellar in the far future is a great
> alternative.
>
> I don't have a lot of confidence in being able to run an old docker image
> in the far future, especially if I don't have an x86 machine to run it on.
>
> https://medium.com/nttlabs/buildx-multiarch-2c6c2df00ca2
> suggests that docker images should be built "multi-arch"
> so that they run on x86 and the new ARM-based Apple Macs.



Who is going to rebuild and host the current GDAL docker like this?


Your question comes across as entitled ? the answer is: whoever cares
enough to either do the work or pay someone to do it.

The source code is there, the release archives are staying, and it will be
possible to build an old release in the future which can read & convert a
file they find. Docker images provide a great *shortcut*, which means if
you find a file you can trivially convert it *without* building GDAL. I'm
sure eventually GDAL will produce multi-arch docker images, but that
shouldn't be a prerequisite for this deprecation/removal.

Debian 1.1 386 floppy disk images from 1996 are still available, and if you
have a m68000, sparc, a s390 or something else long-gone you can easily
find historic Linux release images with compilers which will happily run.
x86 will not disappear quickly, today's Linux kernel releases continue to
support 486s and they were discontinued over 13 years ago. GDALs source
code is also held in the Arctic Code Vault and other archival libraries
<https://archiveprogram.github.com/> ? it's not going to disappear any time
soon.

Regards,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/3f25154d/attachment.html>

From even.rouault at spatialys.com  Thu Mar  4 08:03:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 17:03:25 +0100
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <1915345.2jBuSuvXGK@even-i700>
References: <5723603.CtAnagbAJd@even-i700> <1915345.2jBuSuvXGK@even-i700>
Message-ID: <587a56b4-c8b6-96c4-8425-566f57139478@spatialys.com>

Hi,

https://gdal.org/community/service_providers.html is now online and 
waiting for more companies to add themselves.

Even

Le 01/03/2021 ? 18:01, Even Rouault a ?crit?:
> Hi
>   
>> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
>> https://github.com/OSGeo/gdal/pull/3473
>>
>> Starting with my +1
> I declare this motion passed with +1 from PSC members MateuszL, KurtS, JukkaR,
> DanielM and myself.
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com


From even.rouault at spatialys.com  Thu Mar  4 08:32:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 17:32:53 +0100
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
Message-ID: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>

Hi,

Updating my yesterday motion with the feedback received (only second 
bullet updated with a more restricted set of drivers)

Motion:

- remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
not aware of them having been much used or being still in use. 
Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
code, doc and tests) have been moved to the 
https://github.com/OSGeo/gdal-extra-drivers

- deprecate the raster drivers DODS, JPEG2000 (superseded per 
JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector 
driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, 
GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will 
now be disabled at runtime by default, with an explicit error message 
when they are triggered, unless the 
GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
configuration option is set to YES, and will be removed in GDAL 3.5. 
Implemented in https://github.com/OSGeo/gdal/pull/3505

Starting with my +1

Even

-- 
http://www.spatialys.com


From howard at hobu.co  Thu Mar  4 08:40:20 2021
From: howard at hobu.co (Howard Butler)
Date: Thu, 4 Mar 2021 10:40:20 -0600
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <745DB6B3-D8C0-4D75-A9D4-97D95AFA45E3@hobu.co>



> On Mar 4, 2021, at 10:32 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> Updating my yesterday motion with the feedback received (only second bullet updated with a more restricted set of drivers)
> 
> Motion:
> 
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm not aware of them having been much used or being still in use. Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
> 
> - deprecate the raster drivers DODS, JPEG2000 (superseded per JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will now be disabled at runtime by default, with an explicit error message when they are triggered, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. Implemented in https://github.com/OSGeo/gdal/pull/3505
> 
> Starting with my +1

+1

Howard


From warmerdam at pobox.com  Thu Mar  4 08:52:22 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 4 Mar 2021 11:52:22 -0500
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <745DB6B3-D8C0-4D75-A9D4-97D95AFA45E3@hobu.co>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
 <745DB6B3-D8C0-4D75-A9D4-97D95AFA45E3@hobu.co>
Message-ID: <CA+YzLBfGjH-f91+KgHWjqmgi5K0Y4BPSUG0yxA6bDuc7JB114A@mail.gmail.com>

+1


On Thu, Mar 4, 2021 at 11:40 AM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Mar 4, 2021, at 10:32 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Hi,
> >
> > Updating my yesterday motion with the feedback received (only second
> bullet updated with a more restricted set of drivers)
> >
> > Motion:
> >
> > - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use. Implemented
> in https://github.com/OSGeo/gdal/pull/3373. They (driver code, doc and
> tests) have been moved to the https://github.com/OSGeo/gdal-extra-drivers
> >
> > - deprecate the raster drivers DODS, JPEG2000 (superseded per
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector driver
> ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM,
> INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will now be
> disabled at runtime by default, with an explicit error message when they
> are triggered, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> > configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
> >
> > Starting with my +1
>
> +1
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/6465c0f6/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  4 09:37:17 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 4 Mar 2021 10:37:17 -0700 (MST)
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <1614879437552-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Updating my yesterday motion with the feedback received (only second 
> bullet updated with a more restricted set of drivers)
> 
> Motion:
> 
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
> not aware of them having been much used or being still in use. 
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
> code, doc and tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers
> 
> - deprecate the raster drivers DODS, JPEG2000 (superseded per 
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector 
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, 
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will 
> now be disabled at runtime by default, with an explicit error message 
> when they are triggered, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. 
> Implemented in https://github.com/OSGeo/gdal/pull/3505
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Thu Mar  4 09:43:39 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 4 Mar 2021 13:43:39 -0400
Subject: [gdal-dev] Motion: remove and deprecate a few drivers
In-Reply-To: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
Message-ID: <1744a950-fe58-7d48-7827-6934f4d50067@gatewaygeomatics.com>

+1

(I think we should also list the 3.5.0 milestone at 
https://github.com/OSGeo/gdal/milestones so packagers/community can make 
adjustments in time for that date)

-jeff



On 2021-03-03 2:48 p.m., Even Rouault wrote:
> Hi,
> 
> Following the discussions of past weeks, I motion to:
> 
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
> not aware of them having been much used or being still in use. 
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
> code, doc and tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers
> 
> - deprecate the raster drivers DODS, FIT, GS7BG, GSAG, GSBG, JDEM, 
> JPEG2000, JPEGLS, MG4LIDAR,
> GMT, DOQ1, DOQ2, FUJIBAS, IDA, LAN, MFF, NDF, SDTS, SGI, XPM, ZMAP
> and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME,
> GEOMEDIA, GTM, INGRES, MONGODB, REC, SDTDS, TIGER, WALK. They will now 
> be disabled
> at runtime by default, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. 
> Implemented in https://github.com/OSGeo/gdal/pull/3505
> 
> Starting with my +1
> 
> Even
> 


-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From sean at mapbox.com  Thu Mar  4 10:12:14 2021
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 4 Mar 2021 11:12:14 -0700
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <CADPhZXwiPzQ8XPRmnBhKsZmggLU0494ZNmE4yMTgCWqcumVchw@mail.gmail.com>

+1

On Thu, Mar 4, 2021 at 9:33 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Updating my yesterday motion with the feedback received (only second
> bullet updated with a more restricted set of drivers)
>
> Motion:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, JPEG2000 (superseded per
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA,
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will
> now be disabled at runtime by default, with an explicit error message
> when they are triggered, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/566abb95/attachment.html>

From schwehr at gmail.com  Thu Mar  4 10:17:33 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 4 Mar 2021 10:17:33 -0800
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <CACmBxytm9hTn-KmPxsZeCaqrU_zy+=u-YTmZvYBxMjatbDAH3Q@mail.gmail.com>

+1 KurtS

On Thu, Mar 4, 2021 at 8:33 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Updating my yesterday motion with the feedback received (only second
> bullet updated with a more restricted set of drivers)
>
> Motion:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, JPEG2000 (superseded per
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA,
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will
> now be disabled at runtime by default, with an explicit error message
> when they are triggered, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/d5012e89/attachment.html>

From jmckenna at gatewaygeomatics.com  Thu Mar  4 10:34:50 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 4 Mar 2021 14:34:50 -0400
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <c7cffb16-90d8-cb67-3b70-a9456250cacc@gatewaygeomatics.com>

+1 (wrong thread)


(I think we should also list the 3.5.0 milestone at 
https://github.com/OSGeo/gdal/milestones so packagers/community can make 
adjustments in time for that date)

-jeff



On 2021-03-04 12:32 p.m., Even Rouault wrote:
> Hi,
> 
> Updating my yesterday motion with the feedback received (only second 
> bullet updated with a more restricted set of drivers)
> 
> Motion:
> 
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
> not aware of them having been much used or being still in use. 
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
> code, doc and tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers
> 
> - deprecate the raster drivers DODS, JPEG2000 (superseded per 
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector 
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, 
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will 
> now be disabled at runtime by default, with an explicit error message 
> when they are triggered, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. 
> Implemented in https://github.com/OSGeo/gdal/pull/3505
> 
> Starting with my +1
> 
> Even
> 


-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From thomas.bonfort at gmail.com  Thu Mar  4 10:40:42 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Thu, 4 Mar 2021 19:40:42 +0100
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <CAOM3y2gh=+XO53NkUAzR7yWTK6FCa+6--wPvwV90WNhukOYRtA@mail.gmail.com>

FWIW +1 from a non PSC member

Thomas


Le jeu. 4 mars 2021 ? 17:33, Even Rouault <even.rouault at spatialys.com> a
?crit :

> Hi,
>
> Updating my yesterday motion with the feedback received (only second
> bullet updated with a more restricted set of drivers)
>
> Motion:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA,
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON,
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm
> not aware of them having been much used or being still in use.
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver
> code, doc and tests) have been moved to the
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, JPEG2000 (superseded per
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA,
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will
> now be disabled at runtime by default, with an explicit error message
> when they are triggered, unless the
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5.
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210304/66f9e7ac/attachment.html>

From landa.martin at gmail.com  Thu Mar  4 13:23:23 2021
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 4 Mar 2021 22:23:23 +0100
Subject: [gdal-dev] GML duplicated FID
Message-ID: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>

Hi all,

I have an issue with GML generated by GeoServer. There are features
with duplicated FID:

```
OGRFeature(lucas_view):36
  gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e6
  point_id (Integer) = 45502976
  nuts0 (String) = CZ
  POINT (4550000 2976000)
OGRFeature(lucas_view):36
  gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e5
  point_id (Integer) = 45542918
  nuts0 (String) = CZ
  POINT (4554000 2918000)
```

This is a reason why converting such data into GPKG (using
CopyLayer()) fails with:

```
ERROR 1: failed to execute insert : UNIQUE constraint failed: layer.fid
```

Is there any way to force the GML driver to generate a unique FID
instead of guessing from  gml_id?

Thanks in advance, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Thu Mar  4 13:36:59 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 22:36:59 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
Message-ID: <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>

Martin,

You can't probably fix this by using CopyLayer(). But if you use 
GDALVectorTranslate() with the -unsetFid option, that should solve your 
issue.

It would be also good that you file an issue with a minimum reproducer 
file. The GML driver should be ideally be smarter in the way it 
generates FID to avoid this.

Even

Le 04/03/2021 ? 22:23, Martin Landa a ?crit?:
> Hi all,
>
> I have an issue with GML generated by GeoServer. There are features
> with duplicated FID:
>
> ```
> OGRFeature(lucas_view):36
>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e6
>    point_id (Integer) = 45502976
>    nuts0 (String) = CZ
>    POINT (4550000 2976000)
> OGRFeature(lucas_view):36
>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e5
>    point_id (Integer) = 45542918
>    nuts0 (String) = CZ
>    POINT (4554000 2918000)
> ```
>
> This is a reason why converting such data into GPKG (using
> CopyLayer()) fails with:
>
> ```
> ERROR 1: failed to execute insert : UNIQUE constraint failed: layer.fid
> ```
>
> Is there any way to force the GML driver to generate a unique FID
> instead of guessing from  gml_id?
>
> Thanks in advance, Martin
>
-- 
http://www.spatialys.com


From landa.martin at gmail.com  Thu Mar  4 13:42:04 2021
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 4 Mar 2021 22:42:04 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>
Message-ID: <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>

Dear Even,

?t 4. 3. 2021 v 22:37 odes?latel Even Rouault
<even.rouault at spatialys.com> napsal:

first of all, thanks for quick reply!

> You can't probably fix this by using CopyLayer(). But if you use
> GDALVectorTranslate() with the -unsetFid option, that should solve your
> issue.

Thanks for a hint!

> It would be also good that you file an issue with a minimum reproducer
> file. The GML driver should be ideally be smarter in the way it
> generates FID to avoid this.

Here it is [1]. Should I report it as a Github issue?

Martin

[1] http://geo102.fsv.cvut.cz/~landa/tmp/data_CZ.gml.7z

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Thu Mar  4 13:48:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 22:48:07 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>
 <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>
Message-ID: <9c904c24-d4c9-cc13-0193-cf5a856d3ead@spatialys.com>


> Here it is [1]. Should I report it as a Github issue?
>
> Martin
>
> [1] http://geo102.fsv.cvut.cz/~landa/tmp/data_CZ.gml.7z

yes please. If you can strip it down to just a few features that can 
reproduce the issue, that's even better.

-- 

http://www.spatialys.com


From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  4 14:02:27 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 4 Mar 2021 15:02:27 -0700 (MST)
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
Message-ID: <1614895347633-0.post@n6.nabble.com>

Hi,

It would be interesting to know how you manage to generate duplicate fids
with Geoserver but perhaps it is better to discuss about that in
geoserver-users.

-Jukka Rahkonen-


Martin Landa wrote
> Hi all,
> 
> I have an issue with GML generated by GeoServer. There are features
> with duplicated FID:
> 
> ```
> OGRFeature(lucas_view):36
>   gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e6
>   point_id (Integer) = 45502976
>   nuts0 (String) = CZ
>   POINT (4550000 2976000)
> OGRFeature(lucas_view):36
>   gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e5
>   point_id (Integer) = 45542918
>   nuts0 (String) = CZ
>   POINT (4554000 2918000)
> ```
> 
> This is a reason why converting such data into GPKG (using
> CopyLayer()) fails with:
> 
> ```
> ERROR 1: failed to execute insert : UNIQUE constraint failed: layer.fid
> ```
> 
> Is there any way to force the GML driver to generate a unique FID
> instead of guessing from  gml_id?
> 
> Thanks in advance, Martin
> 
> -- 
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From landa.martin at gmail.com  Thu Mar  4 14:03:52 2021
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 4 Mar 2021 23:03:52 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>
 <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>
Message-ID: <CA+Ei1OepfrUqzkOVniTtz48Xqy6_8srcnnvZitz8KEDk4Dwmqw@mail.gmail.com>

Hi,

?t 4. 3. 2021 v 22:42 odes?latel Martin Landa <landa.martin at gmail.com> napsal:
> > You can't probably fix this by using CopyLayer(). But if you use
> > GDALVectorTranslate() with the -unsetFid option, that should solve your
> > issue.
>
> Thanks for a hint!

```
gdal.VectorTranslate("file.gpkg", "file.gml")
```

works like a charm! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Thu Mar  4 14:06:24 2021
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 4 Mar 2021 23:06:24 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <1614895347633-0.post@n6.nabble.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <1614895347633-0.post@n6.nabble.com>
Message-ID: <CA+Ei1OeE0M+7R6NFzK0FZU+sg2BB+KZ6JHdX+rc5e8KOC5oWNg@mail.gmail.com>

Hi,

?t 4. 3. 2021 v 23:03 odes?latel jratike80
<jukka.rahkonen at maanmittauslaitos.fi> napsal:
> It would be interesting to know how you manage to generate duplicate fids
> with Geoserver but perhaps it is better to discuss about that in
> geoserver-users.

to my understanding, the duplicate FID are generated by GDAL not by
GeoServer. See

```
> OGRFeature(lucas_view):36
>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e6
>    point_id (Integer) = 45502976
>    nuts0 (String) = CZ
>    POINT (4550000 2976000)
> OGRFeature(lucas_view):36
>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e5
>    point_id (Integer) = 45542918
>    nuts0 (String) = CZ
>    POINT (4554000 2918000)
```

In both cases gml_id ends with `-36e5` and FID generated by GDAL is 36.

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Thu Mar  4 14:10:36 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Mar 2021 23:10:36 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <1614895347633-0.post@n6.nabble.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <1614895347633-0.post@n6.nabble.com>
Message-ID: <c8889a97-8c9c-da84-6e24-7d61373d1748@spatialys.com>

In the below example, the gml_id are not duplicated if you look 
cloosely. The duplication of the OGR FID is a pure GDAL behaviour in the 
way it tries to derive a FID from gml_id. So Geoserver behaves just fine 
here.

Le 04/03/2021 ? 23:02, jratike80 a ?crit?:
> Hi,
>
> It would be interesting to know how you manage to generate duplicate fids
> with Geoserver but perhaps it is better to discuss about that in
> geoserver-users.
>
> -Jukka Rahkonen-
>
>
> Martin Landa wrote
>> Hi all,
>>
>> I have an issue with GML generated by GeoServer. There are features
>> with duplicated FID:
>>
>> ```
>> OGRFeature(lucas_view):36
>>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e6
>>    point_id (Integer) = 45502976
>>    nuts0 (String) = CZ
>>    POINT (4550000 2976000)
>> OGRFeature(lucas_view):36
>>    gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36e5
>>    point_id (Integer) = 45542918
>>    nuts0 (String) = CZ
>>    POINT (4554000 2918000)
>> ```
>>
>> This is a reason why converting such data into GPKG (using
>> CopyLayer()) fails with:
>>
>> ```
>> ERROR 1: failed to execute insert : UNIQUE constraint failed: layer.fid
>> ```
>>
>> Is there any way to force the GML driver to generate a unique FID
>> instead of guessing from  gml_id?
>>
>> Thanks in advance, Martin
>>
>> -- 
>> Martin Landa
>> http://geo.fsv.cvut.cz/gwiki/Landa
>> http://gismentors.cz/mentors/landa
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com


From landa.martin at gmail.com  Thu Mar  4 14:57:14 2021
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 4 Mar 2021 23:57:14 +0100
Subject: [gdal-dev] GML duplicated FID
In-Reply-To: <9c904c24-d4c9-cc13-0193-cf5a856d3ead@spatialys.com>
References: <CA+Ei1OetO5rQjaw5LjiQ-An4yXDCOUzXmj_zjTj9xb1TmGS5EQ@mail.gmail.com>
 <3bad78cb-94a6-f186-410a-269596371bcb@spatialys.com>
 <CA+Ei1Ofo0a3XKr15DUb5BVtLYtKPrSMm6dySJLh-7QuwG5ttOQ@mail.gmail.com>
 <9c904c24-d4c9-cc13-0193-cf5a856d3ead@spatialys.com>
Message-ID: <CA+Ei1OcQnhBd9vf-p6VMxyaOBBs_EjwejrHGycw9-NtWaFHAXw@mail.gmail.com>

Hi,

?t 4. 3. 2021 v 22:48 odes?latel Even Rouault
<even.rouault at spatialys.com> napsal:
> > [1] http://geo102.fsv.cvut.cz/~landa/tmp/data_CZ.gml.7z
>
> yes please. If you can strip it down to just a few features that can
> reproduce the issue, that's even better.

I am not sure what is the reason why GML driver behaves like that.
GDAL generates unique FID even when gml_id is duplicated...

```
OGRFeature(lucas_view):0
  gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36ed
  point_id (Integer) = 45502976
  nuts0 (String) = CZ

OGRFeature(lucas_view):1
  gml_id (String) = lucas_view.fid--269ff1b9_177af2abc34_-36ed
  point_id (Integer) = 45542918
  nuts0 (String) = CZ
```

Issue created anyway [1].

Ma

[1] https://github.com/OSGeo/gdal/issues/3532

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From stefano.iacovella at gmail.com  Fri Mar  5 00:42:23 2021
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri, 5 Mar 2021 09:42:23 +0100
Subject: [gdal-dev] Failure with osr.CoordinateTransformationOptions()
Message-ID: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>

Hi all,

I am trying to use GDAL, via Python bindings, to convert coordinates.
I would like to select a specific transformation when converting among CRS
with different Datums. Reading the documentation my understanding is that I
need to create a osr.CoordinateTransformation with options parameter
valorized properly.
I am using binaries from OSGEO4WIN, the release are 3.1.4 for GDAL and
6.3.2 for PROJ
This is a code snippet I am using to debug:

from osgeo import ogr
from osgeo import osr

source = osr.SpatialReference()
source.ImportFromEPSG(3003)

target = osr.SpatialReference()
target.ImportFromEPSG(4326)

options = osr.CoordinateTransformationOptions()
options.SetOperation("urn:ogc:def:coordinateOperation:EPSG::1169")
transform = osr.CoordinateTransformation(source, target, options)

point = ogr.CreateGeometryFromWkt("POINT (1622987 4756952)")
point.Transform(transform)

print point.ExportToWkt()

I have no errors running it but the coordinates of the point, after the
transformation, are infinite. If I create the CoordinateTransformation
without options like this:

transform = osr.CoordinateTransformation(source, target)

The point coordinates after transformation are ok but of course the
conversion is performed using the Coordinate Operation automatically
selected by the system.
Am I doing something wrong?

Thank you in advance for your help.

All the best,

Stefano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/995a2293/attachment.html>

From stefano.iacovella at gmail.com  Fri Mar  5 02:22:33 2021
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri, 5 Mar 2021 11:22:33 +0100
Subject: [gdal-dev] Failure with osr.CoordinateTransformationOptions()
In-Reply-To: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
References: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
Message-ID: <CAG9OqYq1s7SRH9xk8kfJxUbQGp0qtraYybGPDHK80PRGZR2Z9A@mail.gmail.com>

Hi again,

a brief update on my issue.
I discovered that the operation works if I explicitly transform the
coordinates in two steps.
The first step I transform the coordinates from the projected CRS to the
Geodetic CRS, then I can apply the selected Operation.
Is this the correct approach?

Thank you

Stefano

Il giorno ven 5 mar 2021 alle ore 09:42 Stefano Iacovella <
stefano.iacovella at gmail.com> ha scritto:

> Hi all,
>
> I am trying to use GDAL, via Python bindings, to convert coordinates.
> I would like to select a specific transformation when converting among CRS
> with different Datums. Reading the documentation my understanding is that I
> need to create a osr.CoordinateTransformation with options parameter
> valorized properly.
> I am using binaries from OSGEO4WIN, the release are 3.1.4 for GDAL and
> 6.3.2 for PROJ
> This is a code snippet I am using to debug:
>
> from osgeo import ogr
> from osgeo import osr
>
> source = osr.SpatialReference()
> source.ImportFromEPSG(3003)
>
> target = osr.SpatialReference()
> target.ImportFromEPSG(4326)
>
> options = osr.CoordinateTransformationOptions()
> options.SetOperation("urn:ogc:def:coordinateOperation:EPSG::1169")
> transform = osr.CoordinateTransformation(source, target, options)
>
> point = ogr.CreateGeometryFromWkt("POINT (1622987 4756952)")
> point.Transform(transform)
>
> print point.ExportToWkt()
>
> I have no errors running it but the coordinates of the point, after the
> transformation, are infinite. If I create the CoordinateTransformation
> without options like this:
>
> transform = osr.CoordinateTransformation(source, target)
>
> The point coordinates after transformation are ok but of course the
> conversion is performed using the Coordinate Operation automatically
> selected by the system.
> Am I doing something wrong?
>
> Thank you in advance for your help.
>
> All the best,
>
> Stefano
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/51ebfbfc/attachment.html>

From even.rouault at spatialys.com  Fri Mar  5 03:11:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Mar 2021 12:11:19 +0100
Subject: [gdal-dev] Failure with osr.CoordinateTransformationOptions()
In-Reply-To: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
References: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
Message-ID: <87d31890-3246-0423-b626-14dc48bc8419@spatialys.com>

Stefano,

urn:ogc:def:coordinateOperation:EPSG::1169 is a transformation between 
EPSG:4265 (the geographic CRS of Monte Mario) and EPSG:4326. You cannot 
use it directly when the source CRS is EPSG:3003, which is a projected 
CRS based on EPSG:4265.

You could instead use

options.SetOperation("""+proj=pipeline
 ? +step +inv +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
 ??????? +ellps=intl
 ? +step +proj=push +v_3
 ? +step +proj=cart +ellps=intl
 ? +step +proj=helmert +x=-225 +y=-65 +z=9
 ? +step +inv +proj=cart +ellps=WGS84
 ? +step +proj=pop +v_3
 ? +step +proj=unitconvert +xy_in=rad +xy_out=deg
 ? +step +proj=axisswap +order=2,1""")

as suggested by the output of projinfo -s EPSG:3003 -t EPSG:4326 
--spatial-test intersects

Even

Le 05/03/2021 ? 09:42, Stefano Iacovella a ?crit?:
> Hi all,
>
> I am trying to use GDAL, via Python bindings, to convert coordinates.
> I would like to select a specific transformation when converting among 
> CRS with different Datums. Reading the documentation my understanding 
> is that I need to create a osr.CoordinateTransformation with options 
> parameter valorized properly.
> I am using binaries from OSGEO4WIN, the release are 3.1.4 for GDAL and 
> 6.3.2 for PROJ
> This is a code snippet I am using to debug:
>
> from osgeo import ogr
> from osgeo import osr
>
> source = osr.SpatialReference()
> source.ImportFromEPSG(3003)
>
> target = osr.SpatialReference()
> target.ImportFromEPSG(4326)
>
> options = osr.CoordinateTransformationOptions()
> options.SetOperation("urn:ogc:def:coordinateOperation:EPSG::1169")
> transform = osr.CoordinateTransformation(source, target, options)
>
> point = ogr.CreateGeometryFromWkt("POINT (1622987 4756952)")
> point.Transform(transform)
>
> print point.ExportToWkt()
>
> I have no errors running it but the coordinates of the point, after 
> the transformation, are infinite. If I create the 
> CoordinateTransformation without options like this:
>
> transform = osr.CoordinateTransformation(source, target)
>
> The point coordinates after transformation are ok but of course the 
> conversion is performed using the Coordinate Operation automatically 
> selected by the system.
> Am I doing something wrong?
>
> Thank you in advance for your help.
>
> All the best,
>
> Stefano
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/4830368c/attachment.html>

From stefano.iacovella at gmail.com  Fri Mar  5 03:54:35 2021
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri, 5 Mar 2021 12:54:35 +0100
Subject: [gdal-dev] Failure with osr.CoordinateTransformationOptions()
In-Reply-To: <87d31890-3246-0423-b626-14dc48bc8419@spatialys.com>
References: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
 <87d31890-3246-0423-b626-14dc48bc8419@spatialys.com>
Message-ID: <CAG9OqYo+pCxwUfO5SdQki2=izSMg4KqUgmVvifBcucQPA+f50A@mail.gmail.com>

Hi Even,

Thank you for your detailed reply.
So if I want to use 1169 or also 1660, that is the first candidate listed by

projinfo -s EPSG:3003 -t EPSG:4326 --spatial-test intersects

I can transform the coordinates from 3003 to 4265, that is the geodetic SRS
used by 3003

sourceProj = osr.SpatialReference()
sourceProj.ImportFromEPSG(3003)

sourceGeo = osr.SpatialReference()
sourceGeo.ImportFromEPSG(4265)

proj2geo = osr.CoordinateTransformation(sourcePro,sourceGeo)

point.Transform(proj2geo)

then I can use EPSG:1169. I tried the code snippet and it seems to be
working properly.
Do you think this is a correct approach?

All the best

Stefano


Il giorno ven 5 mar 2021 alle ore 12:11 Even Rouault <
even.rouault at spatialys.com> ha scritto:

> Stefano,
>
> urn:ogc:def:coordinateOperation:EPSG::1169 is a transformation between
> EPSG:4265 (the geographic CRS of Monte Mario) and EPSG:4326. You cannot use
> it directly when the source CRS is EPSG:3003, which is a projected CRS
> based on EPSG:4265.
>
> You could instead use
>
> options.SetOperation("""+proj=pipeline
>   +step +inv +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
>         +ellps=intl
>   +step +proj=push +v_3
>   +step +proj=cart +ellps=intl
>   +step +proj=helmert +x=-225 +y=-65 +z=9
>   +step +inv +proj=cart +ellps=WGS84
>   +step +proj=pop +v_3
>   +step +proj=unitconvert +xy_in=rad +xy_out=deg
>   +step +proj=axisswap +order=2,1""")
>
> as suggested by the output of projinfo -s EPSG:3003 -t EPSG:4326
> --spatial-test intersects
>
> Even
> Le 05/03/2021 ? 09:42, Stefano Iacovella a ?crit :
>
> Hi all,
>
> I am trying to use GDAL, via Python bindings, to convert coordinates.
> I would like to select a specific transformation when converting among CRS
> with different Datums. Reading the documentation my understanding is that I
> need to create a osr.CoordinateTransformation with options parameter
> valorized properly.
> I am using binaries from OSGEO4WIN, the release are 3.1.4 for GDAL and
> 6.3.2 for PROJ
> This is a code snippet I am using to debug:
>
> from osgeo import ogr
> from osgeo import osr
>
> source = osr.SpatialReference()
> source.ImportFromEPSG(3003)
>
> target = osr.SpatialReference()
> target.ImportFromEPSG(4326)
>
> options = osr.CoordinateTransformationOptions()
> options.SetOperation("urn:ogc:def:coordinateOperation:EPSG::1169")
> transform = osr.CoordinateTransformation(source, target, options)
>
> point = ogr.CreateGeometryFromWkt("POINT (1622987 4756952)")
> point.Transform(transform)
>
> print point.ExportToWkt()
>
> I have no errors running it but the coordinates of the point, after the
> transformation, are infinite. If I create the CoordinateTransformation
> without options like this:
>
> transform = osr.CoordinateTransformation(source, target)
>
> The point coordinates after transformation are ok but of course the
> conversion is performed using the Coordinate Operation automatically
> selected by the system.
> Am I doing something wrong?
>
> Thank you in advance for your help.
>
> All the best,
>
> Stefano
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/391195a1/attachment-0001.html>

From even.rouault at spatialys.com  Fri Mar  5 04:04:38 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Mar 2021 13:04:38 +0100
Subject: [gdal-dev] Failure with osr.CoordinateTransformationOptions()
In-Reply-To: <CAG9OqYo+pCxwUfO5SdQki2=izSMg4KqUgmVvifBcucQPA+f50A@mail.gmail.com>
References: <CAG9OqYo1rygnJvprQHUKbma6xYnOPcf-dsQ7JWbj4HK-5GkwVg@mail.gmail.com>
 <87d31890-3246-0423-b626-14dc48bc8419@spatialys.com>
 <CAG9OqYo+pCxwUfO5SdQki2=izSMg4KqUgmVvifBcucQPA+f50A@mail.gmail.com>
Message-ID: <7d4d84c9-5b43-0c87-a67c-a1e8f4808033@spatialys.com>


Le 05/03/2021 ? 12:54, Stefano Iacovella a ?crit?:
> Hi Even,
>
> Thank you for your detailed reply.
> So if I want to use 1169 or also 1660, that is the first candidate 
> listed by
>
> projinfo -s EPSG:3003 -t EPSG:4326 --spatial-test intersects
>
> I can transform the coordinates from 3003 to 4265, that is the 
> geodetic SRS used by 3003
>
> sourceProj = osr.SpatialReference()
> sourceProj.ImportFromEPSG(3003)
>
> sourceGeo = osr.SpatialReference()
> sourceGeo.ImportFromEPSG(4265)
>
> proj2geo = osr.CoordinateTransformation(sourcePro,sourceGeo)
>
> point.Transform(proj2geo)
>
> then I can use EPSG:1169. I tried the code snippet and it seems to be 
> working properly.
> Do you think this is a correct approach?

Yes that's probably the best approach if you don't want to use PROJ 
pipelines to do it in one step.


>
> All the best
>
> Stefano
>
>
> Il giorno ven 5 mar 2021 alle ore 12:11 Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> ha 
> scritto:
>
>     Stefano,
>
>     urn:ogc:def:coordinateOperation:EPSG::1169 is a transformation
>     between EPSG:4265 (the geographic CRS of Monte Mario) and
>     EPSG:4326. You cannot use it directly when the source CRS is
>     EPSG:3003, which is a projected CRS based on EPSG:4265.
>
>     You could instead use
>
>     options.SetOperation("""+proj=pipeline
>     ? +step +inv +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000
>     +y_0=0
>     ??????? +ellps=intl
>     ? +step +proj=push +v_3
>     ? +step +proj=cart +ellps=intl
>     ? +step +proj=helmert +x=-225 +y=-65 +z=9
>     ? +step +inv +proj=cart +ellps=WGS84
>     ? +step +proj=pop +v_3
>     ? +step +proj=unitconvert +xy_in=rad +xy_out=deg
>     ? +step +proj=axisswap +order=2,1""")
>
>     as suggested by the output of projinfo -s EPSG:3003 -t EPSG:4326
>     --spatial-test intersects
>
>     Even
>
>     Le 05/03/2021 ? 09:42, Stefano Iacovella a ?crit?:
>>     Hi all,
>>
>>     I am trying to use GDAL, via Python bindings, to convert coordinates.
>>     I would like to select a specific transformation when converting
>>     among CRS with different Datums. Reading the documentation my
>>     understanding is that I need to create a
>>     osr.CoordinateTransformation with options parameter valorized
>>     properly.
>>     I am using binaries from OSGEO4WIN, the release are 3.1.4 for
>>     GDAL and 6.3.2 for PROJ
>>     This is a code snippet I am using to debug:
>>
>>     from osgeo import ogr
>>     from osgeo import osr
>>
>>     source = osr.SpatialReference()
>>     source.ImportFromEPSG(3003)
>>
>>     target = osr.SpatialReference()
>>     target.ImportFromEPSG(4326)
>>
>>     options = osr.CoordinateTransformationOptions()
>>     options.SetOperation("urn:ogc:def:coordinateOperation:EPSG::1169")
>>     transform = osr.CoordinateTransformation(source, target, options)
>>
>>     point = ogr.CreateGeometryFromWkt("POINT (1622987 4756952)")
>>     point.Transform(transform)
>>
>>     print point.ExportToWkt()
>>
>>     I have no errors running it but the coordinates of the point,
>>     after the transformation, are infinite. If I create the
>>     CoordinateTransformation without options like this:
>>
>>     transform = osr.CoordinateTransformation(source, target)
>>
>>     The point coordinates after transformation are ok but of course
>>     the conversion is performed using the Coordinate Operation
>>     automatically selected by the system.
>>     Am I doing something wrong?
>>
>>     Thank you in advance for your help.
>>
>>     All the best,
>>
>>     Stefano
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>
-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/5127981f/attachment.html>

From even.rouault at spatialys.com  Fri Mar  5 04:06:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Mar 2021 13:06:48 +0100
Subject: [gdal-dev] GDAL 3.2.2 RC1 available
Message-ID: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.2.2 release candidate.

Pick up an archive among the following ones (by ascending size):

   https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.xz
   https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.gz
   https://download.osgeo.org/gdal/3.2.2/gdal322rc1.zip

A snapshot of the gdalautotest suite is also available :

   https://download.osgeo.org/gdal/3.2.2/gdalautotest-3.2.2rc1.tar.gz
   https://download.osgeo.org/gdal/3.2.2/gdalautotest-3.2.2rc1.zip

GDAL-GRASS plugin:

   https://download.osgeo.org/gdal/3.2.2/gdal-grass-3.2.2.tar.gz

The NEWS file is here :

   https://github.com/OSGeo/gdal/blob/v3.2.2RC1/gdal/NEWS

I'll call for a vote promoting it to final around beginning of next week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com


From jmckenna at gatewaygeomatics.com  Fri Mar  5 09:02:22 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 5 Mar 2021 13:02:22 -0400
Subject: [gdal-dev] GDAL 3.2.2 RC1 available
In-Reply-To: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com>
References: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com>
Message-ID: <2f9b826c-1193-e42d-e187-98d0f36539dd@gatewaygeomatics.com>

Hi Even,

No issues so far here on Windows (with PROJ 8.0).

-jeff






-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/



On 2021-03-05 8:06 a.m., Even Rouault wrote:
> Hi,
> 
> I have prepared a GDAL/OGR 3.2.2 release candidate.
> 
> Pick up an archive among the following ones (by ascending size):
> 
>  ? https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.xz
>  ? https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.2.2/gdal322rc1.zip
> 
> A snapshot of the gdalautotest suite is also available :
> 
>  ? https://download.osgeo.org/gdal/3.2.2/gdalautotest-3.2.2rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.2.2/gdalautotest-3.2.2rc1.zip
> 
> GDAL-GRASS plugin:
> 
>  ? https://download.osgeo.org/gdal/3.2.2/gdal-grass-3.2.2.tar.gz
> 
> The NEWS file is here :
> 
>  ? https://github.com/OSGeo/gdal/blob/v3.2.2RC1/gdal/NEWS
> 
> I'll call for a vote promoting it to final around beginning of next week 
> if no
> serious problems are reported before.
> 
> Best regards,
> 
> Even
> 


From even.rouault at spatialys.com  Fri Mar  5 10:31:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Mar 2021 19:31:05 +0100
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
Message-ID: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>

Hi,

following recent discussions about maintenance, I've initiated

https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system

with "just" drivers and binding languages

You're invited to check (I've put a few names that I had in mind in 
front of a few items) and update it.

Even

-- 
http://www.spatialys.com


From gdt at lexort.com  Fri Mar  5 13:33:06 2021
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 05 Mar 2021 16:33:06 -0500
Subject: [gdal-dev] GDAL 3.2.2 RC1 available
In-Reply-To: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com> (Even
 Rouault's message of "Fri, 5 Mar 2021 13:06:48 +0100")
References: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com>
Message-ID: <rmitupp4771.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> I have prepared a GDAL/OGR 3.2.2 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
>   https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.xz
>   https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2rc1.tar.gz
>   https://download.osgeo.org/gdal/3.2.2/gdal322rc1.zip

I locally updated the pkgsrc package (from 3.2.1) and built on NetBSD 9
amd64, which was uneventful.  With the new package installed, I was able
to start qgis and see my expected layers.  The shlib major did not
change.  So it looks good to me.

I have not tested on any other arches, such as earmvhf-el or aarch64.  I
have a dim recollection of trouble with gdal 3.0 on one of those, but I
realize you don't want to deal with 3.0 reports and now I won't ever
build it.   I'll of course send a note if I run into an actual problem.

(I know I should run the test suite; on my todo list.)

It would be nice if 3.2.2rc1 unpacked to 3.2.2rc1 instead of 3.2.2,
because the obvious thing for me to do is just change the version in the
package control file and rebuild, but it unpacks to a place not matching
the tarball name.  It's easy enough for me to rename tit, but then I
have a file that looks like the release but isn't.  I realize the other
half of the people probably wouldn't like it with the rc1 in the
directory name, but just thought I'd mention my experience.

Greg


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210305/70dc9eac/attachment.sig>

From even.rouault at spatialys.com  Fri Mar  5 13:49:29 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Mar 2021 22:49:29 +0100
Subject: [gdal-dev] GDAL 3.2.2 RC1 available
In-Reply-To: <rmitupp4771.fsf@s1.lexort.com>
References: <3ec68183-a59a-b13f-0c2e-c52531cf22e3@spatialys.com>
 <rmitupp4771.fsf@s1.lexort.com>
Message-ID: <63c0afd8-dac4-ed29-d645-71c3ec99e6af@spatialys.com>


> It would be nice if 3.2.2rc1 unpacked to 3.2.2rc1 instead of 3.2.2,
> because the obvious thing for me to do is just change the version in the
> package control file and rebuild, but it unpacks to a place not matching
> the tarball name.  It's easy enough for me to rename tit, but then I
> have a file that looks like the release but isn't.  I realize the other
> half of the people probably wouldn't like it with the rc1 in the
> directory name, but just thought I'd mention my experience.

The current behavior is intended : the idea is that the content of the 
.tar.gz should be unmodified (ie binary identical) if we promote the 
release candidate as final, so we must put the final directory name in 
it. Promotion just consists in renaming the archive filename.

Even

-- 
http://www.spatialys.com


From nyall.dawson at gmail.com  Fri Mar  5 14:02:58 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 6 Mar 2021 08:02:58 +1000
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
Message-ID: <CAB28AshD308fdbUYvbyS9F=fFNXLvKgF+4jJGMBuc9VymBPCfg@mail.gmail.com>

On Sat, 6 Mar 2021 at 04:31, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> following recent discussions about maintenance, I've initiated
>
> https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system

This is looking rather sad at the moment. I'd be willing to take on
the pgeo and mdb drivers if no-one more qualified is available!

Nyall


>
> with "just" drivers and binding languages
>
> You're invited to check (I've put a few names that I had in mind in
> front of a few items) and update it.
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Sat Mar  6 00:59:23 2021
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 6 Mar 2021 10:59:23 +0200
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
Message-ID: <a65bd860-5763-b082-fda5-e2142c70d30b@gmail.com>

Even Rouault kirjoitti 5.3.2021 klo 20.31:

> Hi,
>
> following recent discussions about maintenance, I've initiated
>
> https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system
>
> with "just" drivers and binding languages
>
> You're invited to check (I've put a few names that I had in mind in 
> front of a few items) and update it.


I removed the "?" from front of my name in WCS but left it in braces.

I added "To be removed in ?" to Perl bindings and added a reference to 
Geo::GDAL::FFI, which is preferred and I'm more prone to maintain.

Ari


>
> Even
>

From even.rouault at spatialys.com  Sat Mar  6 03:23:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Mar 2021 12:23:11 +0100
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <a65bd860-5763-b082-fda5-e2142c70d30b@gmail.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
 <a65bd860-5763-b082-fda5-e2142c70d30b@gmail.com>
Message-ID: <9799f324-8295-a1ac-3804-48336fb6d01f@spatialys.com>

Ari,
> I added "To be removed in ?" to Perl bindings and added a reference to 
> Geo::GDAL::FFI, which is preferred and I'm more prone to maintain.

If Geo::GDAL::FFI is the way to go, perhaps you could add a runtime 
deprecation warning (if such thing exists in Perl) in the SWIG Perl 
bindings indicated they will be removed in let's say 3.5 and a hint that 
people should use Geo:GDAL:FFI instead ?

Even

-- 
http://www.spatialys.com


From kerim.khemraev at mail.ru  Sat Mar  6 05:56:17 2021
From: kerim.khemraev at mail.ru (=?UTF-8?B?0JrQtdGA0LjQvCDQpdC10LzRgNCw0LXQsg==?=)
Date: Sat, 06 Mar 2021 16:56:17 +0300
Subject: [gdal-dev] =?utf-8?q?Build_gdal_as_external_cmake_externalprojec?=
 =?utf-8?q?t?=
Message-ID: <1615038977.177093956@f513.i.mail.ru>


Hi,
?
I need to build GDAL with PROJ support as cmake?external?project (ExternalProject_Add).
?
When building GDAL as SHARED library I need to build SHARED PROJ and PROJ depends on Sqlite3. That means that Sqlite3 should also be built as SHARED library but I can?t find a way to build?SHARED?Sqlite3 (via  Sqlite3-amalgamation )? with CMake.?
?
Actually my project already?includes STATIC?Sqlite3.?So?I?m thinking to build PROJ and GDAL?statically is that possible (GDAL with PROJ support)??
?
If anybody has idea?please share it.
?
?
Best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210306/d5eb712e/attachment.html>

From andrew at aitchison.me.uk  Sat Mar  6 06:35:51 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Sat, 6 Mar 2021 14:35:51 +0000 (GMT)
Subject: [gdal-dev] Docker - was Re: Motion: remove and deprecate a few
 drivers
In-Reply-To: <CAFLLRp+LQbrs1xYh=fyfQ_EMF0T+OGrScX3BL07gbUkqgwt2eg@mail.gmail.com>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>
 <6a6fbab4-9f32-2463-d89-df3613bb5fe@aitchison.me.uk>
 <CAFLLRp+LQbrs1xYh=fyfQ_EMF0T+OGrScX3BL07gbUkqgwt2eg@mail.gmail.com>
Message-ID: <685535e0-d44d-f667-a762-1a79cdb7ecc@aitchison.me.uk>


On Thu, 4 Mar 2021, Robert Coup wrote:

> On Thu, 4 Mar 2021 at 08:59, Andrew C Aitchison <andrew at aitchison.me.uk>
> wrote:
>
>> On Thu, 4 Mar 2021, Javier Jimenez Shaw wrote:
>>
>>> (using a docker image to convert any of those removed formats if you
>>> find a file at the bottom of you cellar in the far future is a great
>>> alternative.
>>
>> I don't have a lot of confidence in being able to run an old docker image
>> in the far future, especially if I don't have an x86 machine to run it on.
>>
>> https://medium.com/nttlabs/buildx-multiarch-2c6c2df00ca2
>> suggests that docker images should be built "multi-arch"
>> so that they run on x86 and the new ARM-based Apple Macs.
>> Who is going to rebuild and host the current GDAL docker like this?

> Your question comes across as entitled

I am sorry if it came across like that.

The rest of this post is probably off topic, so private replies may be best.

> the answer is: whoever cares
> enough to either do the work or pay someone to do it.
>
> The source code is there, the release archives are staying, and it will be
> possible to build an old release in the future which can read & convert a
> file they find. Docker images provide a great *shortcut*, which means if
> you find a file you can trivially convert it *without* building GDAL. I'm
> sure eventually GDAL will produce multi-arch docker images, but that
> shouldn't be a prerequisite for this deprecation/removal.

If someone builds a docker image with gdal including support for the formats
that are about to go away,
and you have hardware that runs that image when you need the conversion,
then docker is great.

If, in five, ten, fifteen or even twenty five years, I don't have
hardware that can run an existing docker image, then I'm less sure that
docker is the answer. Will I have to rely on someone having made that
Apple-ARM docker image of GDAL 3.2.2 back in 2021 ?

Why do I not think docker will be the answer ?
Experience suggests that I am likely to have more success building ancient
gdal on a current machine than building a docker image of that gdal that runs
on the current machine.
I suppose that a pre-existing ancient docker image with compilers should
allow me to build ancient gdal inside the container running on the current
machine ...

> Debian 1.1 386 floppy disk images from 1996 are still available, and if you
> have a m68000, sparc, a s390 or something else long-gone you can easily
> find historic Linux release images with compilers which will happily run.
> x86 will not disappear quickly, today's Linux kernel releases continue to
> support 486s and they were discontinued over 13 years ago. GDALs source
> code is also held in the Arctic Code Vault and other archival libraries
> <https://archiveprogram.github.com/> - it's not going to disappear 
> any time soon.

I had forgotten that the Linux kernel still supported 486.
Red Hat dropped support for 686 hardware with RHEL7 (released 2014)
- although 32bit binaries will still run on RHEL7 and RHEL8
according to https://access.redhat.com/solutions/509373
(personally, I never managed to build 32bit libraries on 64bit RHEL6).

But none of those images are likely to help me run software they contain
on next year's MacBook - though the Debian 1.1 image may run on an
x86_64 RHEL 8 machine.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From markus.metz.giswork at gmail.com  Sat Mar  6 10:44:34 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sat, 6 Mar 2021 19:44:34 +0100
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
Message-ID: <CAG+h=FE8dXsZDz3Js=uj0iZBVpKv8c1ZPZkpDtV+HV+uMrVMyw@mail.gmail.com>

Hi,

for the raster and vector GRASS drivers, can someone please add "@metzm,
@neteler (mundialis)"? Thanks!

Markus M+N


On Fri, Mar 5, 2021 at 7:31 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> following recent discussions about maintenance, I've initiated
>
> https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system
>
> with "just" drivers and binding languages
>
> You're invited to check (I've put a few names that I had in mind in
> front of a few items) and update it.
>
> Even
>
> --
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210306/9ace472a/attachment-0001.html>

From dmorissette at mapgears.com  Sat Mar  6 12:05:57 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sat, 6 Mar 2021 15:05:57 -0500
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <6ebda1aa-0347-a440-e2d4-155199fe6080@mapgears.com>

+1

Daniel


On 2021-03-04 11:32, Even Rouault wrote:
> Hi,
> 
> Updating my yesterday motion with the feedback received (only second 
> bullet updated with a more restricted set of drivers)
> 
> Motion:
> 
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and I'm 
> not aware of them having been much used or being still in use. 
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
> code, doc and tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers
> 
> - deprecate the raster drivers DODS, JPEG2000 (superseded per 
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector 
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, 
> GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK . They will 
> now be disabled at runtime by default, with an explicit error message 
> when they are triggered, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. 
> Implemented in https://github.com/OSGeo/gdal/pull/3505
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From jukka.rahkonen at maanmittauslaitos.fi  Sat Mar  6 13:36:46 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sat, 6 Mar 2021 14:36:46 -0700 (MST)
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
Message-ID: <1615066606069-0.post@n6.nabble.com>

Hi,

I cannot maintain any driver myself but I could be listed as someone who is
willing to sponsor the maintenance work that is needed to keep the OpenJUMP
JML driver alive. Of course it depends on the price, if there are other
users to share the costs, if any service provider or individual is willing
to take the task, and if it is not against what is generally good for the
GDAL project.

-Jukka Rahkonen-



Even Rouault-2 wrote
> Hi,
> 
> following recent discussions about maintenance, I've initiated
> 
> https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system
> 
> with "just" drivers and binding languages
> 
> You're invited to check (I've put a few names that I had in mind in 
> front of a few items) and update it.
> 
> Even
> 
> -- 
> http://www.spatialys.com
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From englishchristophera at gmail.com  Sun Mar  7 11:52:57 2021
From: englishchristophera at gmail.com (chris english)
Date: Sun, 7 Mar 2021 14:52:57 -0500
Subject: [gdal-dev] building gdal-3.3.0-dev with proj free(): invalid pointer
Message-ID: <CAASFQpRx3e0=f0UaZmOwEZZVcT04EYFiY_d6r4umAQdZJPRXAQ@mail.gmail.com>

Hi.

Been building and rebuilding gdal-3.3.0-dev and arrive at this output:

chris at jacie:~$ gdalinfo --version
GDAL 3.3.0dev-96fab634a5, released 2021/03/02
free(): invalid pointer
Aborted

two version of libproj are involved:

chris at jacie:~$ ldd /usr/local/bin/gdalinfo | grep libproj
libproj.so.22 => /usr/local/lib/libproj.so.22 (0x00007f3a6cecc000)
libproj.so.19 => /usr/local/lib/libproj.so.19 (0x00007f3a659da000)

This is because when built with libproj.so.22 only, gdalinfo complained
libproj.so.19 couldn't be loaded on attempting to execute. libproj.so.22 is
in /usr/local and prjo.h is from libproj.so.22, also in /usr/local. 19 is
ln from /usr/local/lib.
in gdb I get:

gdb) set substitute-path /build/glibc-eX1tMB/glibc-2.31
/home/chris/glibc-2.31
(gdb) frame 1
#1  0x00007f8b2a4a3859 in __GI_abort () at abort.c:79
79      raise (SIGABRT);
(gdb) frame 2
#2  0x00007f8b2a50e3ee in __libc_message (action=action at entry=do_abort,
    fmt=fmt at entry=0x7f8b2a638285 "%s\n") at
../sysdeps/posix/libc_fatal.c:155
155    abort ();
(gdb) frame 3
#3  0x00007f8b2a51647c in malloc_printerr (
    str=str at entry=0x7f8b2a6364ae "free(): invalid pointer") at malloc.c:5347
5347  __libc_message (do_abort, "%s\n", str);
(gdb) frame 4
#4  0x00007f8b2a517cac in _int_free (av=<optimized out>, p=<optimized out>,
    have_lock=0) at malloc.c:4173
4173    malloc_printerr ("free(): invalid pointer");
(gdb) frame 5
#5  0x00007f8b27035480 in __gnu_cxx::new_allocator<char>::deallocate (
    this=0x557019391ff0, __p=<optimized out>)
    at /usr/include/c++/9/ext/new_allocator.h:119
119      deallocate(pointer __p, size_type)
(gdb) frame 6
#6  std::allocator_traits<std::allocator<char> >::deallocate (__a=...,
    __n=<optimized out>, __p=<optimized out>)
    at /usr/include/c++/9/bits/alloc_traits.h:470
470      { __a.deallocate(__p, __n); }
(gdb) frame 7
#7  std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >::_M_destroy (__size=<optimized out>,
this=0x557019391ff0)
    at /usr/include/c++/9/bits/basic_string.h:237
237      { _Alloc_traits::deallocate(_M_get_allocator(), _M_data(), __size
+ 1); }
(gdb) frame 8
#8  std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >::_M_dispose (this=0x557019391ff0)
    at /usr/include/c++/9/bits/basic_string.h:232
232  _M_destroy(_M_allocated_capacity);
(gdb) frame 9
#9  std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >::~basic_string (this=0x557019391ff0,
__in_chrg=<optimized out>)
    at /usr/include/c++/9/bits/basic_string.h:658
658      { _M_dispose(); }
(gdb) frame 10
#10 osgeo::proj::common::UnitOfMeasure::Private::~Private (
    this=0x557019391ff0, __in_chrg=<optimized out>) at
iso19111/common.cpp:72
72 struct UnitOfMeasure::Private {
(gdb) frame 11
#11
std::default_delete<osgeo::proj::common::UnitOfMeasure::Private>::operator()
(this=0x7f8b272e1f60 <osgeo::proj::common::UnitOfMeasure::PPM_PER_YEAR+16>,
    __ptr=0x557019391ff0) at /usr/include/c++/9/bits/unique_ptr.h:81
81 delete __ptr;
(gdb) frame 12
#12 std::unique_ptr<osgeo::proj::common::UnitOfMeasure::Private,
std::default_delete<osgeo::proj::common::UnitOfMeasure::Private>
>::~unique_ptr (
    this=0x7f8b272e1f60
<osgeo::proj::common::UnitOfMeasure::PPM_PER_YEAR+16>,
    __in_chrg=<optimized out>) at /usr/include/c++/9/bits/unique_ptr.h:292
292  get_deleter()(std::move(__ptr));
(gdb) frame 13
#13 osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure (
    this=0x7f8b272e1f50 <osgeo::proj::common::UnitOfMeasure::PPM_PER_YEAR>,
    __in_chrg=<optimized out>) at ../include/proj/common.hpp:60
60 class PROJ_GCC_DLL UnitOfMeasure : public util::BaseObject {
(gdb) frame 14
#14 0x00007f8b2a4c815e in __cxa_finalize (d=0x7f8b1fdec720)
    at cxa_finalize.c:83
83    cxafn (cxaarg, 0);
(gdb) frame 15
#15 0x00007f8b1fb399b7 in __do_global_dtors_aux ()
   from /usr/local/lib/libproj.so.19
(gdb) frame 16
#16 0x00007ffe33879550 in ?? ()
(gdb) frame 17
#17 0x00007f8b2d55ef5b in _dl_fini () at dl-fini.c:138
138    ((fini_t) array[i]) ();

Haven't been able to further clarify frame 16 function call. Which I guess
would be useful. Any thoughts on how to proceed greatly appreciated.

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210307/3dad1ca1/attachment.html>

From even.rouault at spatialys.com  Sun Mar  7 11:58:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Mar 2021 20:58:02 +0100
Subject: [gdal-dev] building gdal-3.3.0-dev with proj free(): invalid
 pointer
In-Reply-To: <CAASFQpRx3e0=f0UaZmOwEZZVcT04EYFiY_d6r4umAQdZJPRXAQ@mail.gmail.com>
References: <CAASFQpRx3e0=f0UaZmOwEZZVcT04EYFiY_d6r4umAQdZJPRXAQ@mail.gmail.com>
Message-ID: <245922d8-cf67-84e2-21eb-6644fb51bbb2@spatialys.com>

Chris,


> two version of libproj are involved:
>
> chris at jacie:~$ ldd /usr/local/bin/gdalinfo | grep libproj
> libproj.so.22 => /usr/local/lib/libproj.so.22 (0x00007f3a6cecc000)
> libproj.so.19 => /usr/local/lib/libproj.so.19 (0x00007f3a659da000)

That's definitely the cause of the crash. It is illegal for a process to 
link to several versions of libproj. You need to make sure that your 
GDAL dependencies link against the same libproj version. You likely need 
to rebuild libspatialite or libgeotiff (if using external libgeotiff) 
against the newer PROJ version

Even

-- 

http://www.spatialys.com


From jluis at ualg.pt  Sun Mar  7 12:42:02 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Sun, 7 Mar 2021 20:42:02 +0000
Subject: [gdal-dev] Is it possible to switch warnings off?
Message-ID: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>

Hi,

I have this strange case where some warnings come from don't know where.

>From a shell command (cmd but it doesn't matter) all fine

gdalinfo AQUA_MODIS.20020717T135006.L2.SST.nc
Driver: netCDF/Network Common Data Format
Files: AQUA_MODIS.20020717T135006.L2.SST.nc
Size is 512, 512
Metadata:
  /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
...


However, the same but this time called from Julia that wraps calls to
                              options = GDALInfoOptionsNew(options, C_NULL)
                              result = GDALInfo(ds.ptr, options)
                              GDALInfoOptionsFree(options)

I get these warnings

julia> println(gdalinfo("AQUA_MODIS.20020717T135006.L2.SST.nc"))
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
Driver: netCDF/Network Common Data Format
Files: AQUA_MODIS.20020717T135006.L2.SST.nc
Size is 512, 512
Metadata:
  /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
...

Also get several of these in other commands

Warning 1: dimension #1 (pixels_per_line) is not a Longitude/X dimension.
Warning 1: dimension #0 (number_of_lines) is not a Latitude/Y dimension.


Is there anyway to shut up this warnings, or warnings in general?


Thanks

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210307/e0873a46/attachment.html>

From mateusz at loskot.net  Sun Mar  7 14:11:26 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 7 Mar 2021 23:11:26 +0100
Subject: [gdal-dev] Is it possible to switch warnings off?
In-Reply-To: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <CABUeae9Cep9NzDuqUmD-urAUp9dGBsFQL5MH=vR8saxGimRMgA@mail.gmail.com>

On Sun, 7 Mar 2021 at 21:42, Joaquim Manuel Freire Lu?s <jluis at ualg.pt> wrote:
>
> I have this strange case where some warnings come from don?t know where.
> [...]
> Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.

https://github.com/OSGeo/gdal/blob/fa752ad6eabafaf630a704e1892a9d837d683cb3/gdal/frmts/netcdf/netcdfdataset.cpp#L11567-L11570

> Is there anyway to shut up this warnings, or warnings in general?

https://gdal.org/api/cpl.html?highlight=cplerror#_CPPv48CPLError6CPLErr11CPLErrorNumPKcz
"The effect of this function can be altered by applications by
installing a custom error handling using CPLSetErrorHandler()."

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Sun Mar  7 14:15:13 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Mar 2021 23:15:13 +0100
Subject: [gdal-dev] Is it possible to switch warnings off?
In-Reply-To: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <ac07e52f-ed95-9ba8-48d2-e397a481454b@spatialys.com>

Joaquim,

I suspect you are not testing with the same GDAL version with your 
gdalinfo shell invokation or within julia.

With the C API, you can shut down warnings and errors with

CPLPushErrorHandler(CPLQuietErrorHandler);

...

CPLPopErrorHandler();

You can install a custom error handler that filters only some category 
of events. See

https://gdal.org/api/cpl.html?highlight=cplpusherrorhandler#_CPPv419CPLPushErrorHandler15CPLErrorHandler

Even

Le 07/03/2021 ? 21:42, Joaquim Manuel Freire Lu?s a ?crit?:
>
> Hi,
>
> I have this strange case where some warnings come from don?t know where.
>
> From a shell command (cmd but it doesn?t matter) all fine
>
> gdalinfo AQUA_MODIS.20020717T135006.L2.SST.nc
>
> Driver: netCDF/Network Common Data Format
>
> Files: AQUA_MODIS.20020717T135006.L2.SST.nc
>
> Size is 512, 512
>
> Metadata:
>
> /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
>
> ?
>
> However, the same but this time called from Julia that wraps calls to
>
> options = GDALInfoOptionsNew(options, C_NULL)
>
> result = GDALInfo(ds.ptr, options)
>
> ?????????????? GDALInfoOptionsFree(options)
>
> I get these warnings
>
> julia> println(gdalinfo("AQUA_MODIS.20020717T135006.L2.SST.nc"))
>
> Warning 1: The dataset has several variables that could be identified 
> as vector fields, but not all share the same primary dimension. 
> Consequently they will be ignored.
>
> Warning 1: The dataset has several variables that could be identified 
> as vector fields, but not all share the same primary dimension. 
> Consequently they will be ignored.
>
> Driver: netCDF/Network Common Data Format
>
> Files: AQUA_MODIS.20020717T135006.L2.SST.nc
>
> Size is 512, 512
>
> Metadata:
>
> /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
>
> ?
>
> Also get several of these in other commands
>
> Warning 1: dimension #1 (pixels_per_line) is not a Longitude/X dimension.
>
> Warning 1: dimension #0 (number_of_lines) is not a Latitude/Y dimension.
>
> Is there anyway to shut up this warnings, or warnings in general?
>
> Thanks
>
> Joaquim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210307/aa30b338/attachment-0001.html>

From jluis at ualg.pt  Sun Mar  7 14:42:05 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Sun, 7 Mar 2021 22:42:05 +0000
Subject: [gdal-dev] Is it possible to switch warnings off?
In-Reply-To: <ac07e52f-ed95-9ba8-48d2-e397a481454b@spatialys.com>
References: <AM6PR04MB39599315FC3E8ED1095901DFA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <ac07e52f-ed95-9ba8-48d2-e397a481454b@spatialys.com>
Message-ID: <AM6PR04MB395978DC10AE0315A9EDE1BDA6949@AM6PR04MB3959.eurprd04.prod.outlook.com>

Thanks Even e Mateusz

It is the same gdal lib in both cases. The only other one I have is sheltered in OSCeo4W.
And I had found where the messages are coming from but it's weird that they are printed in one case and not the other. I guess some internal setting that doesn't get set when called via Julia.

I'll explore the CPLPushErrorHandler()

Joaquim

From: Even Rouault <even.rouault at spatialys.com>
Sent: Sunday, March 7, 2021 10:15 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Is it possible to switch warnings off?


Joaquim,

I suspect you are not testing with the same GDAL version with your gdalinfo shell invokation or within julia.

With the C API, you can shut down warnings and errors with

CPLPushErrorHandler(CPLQuietErrorHandler);

...

CPLPopErrorHandler();

You can install a custom error handler that filters only some category of events. See

https://gdal.org/api/cpl.html?highlight=cplpusherrorhandler#_CPPv419CPLPushErrorHandler15CPLErrorHandler

Even
Le 07/03/2021 ? 21:42, Joaquim Manuel Freire Lu?s a ?crit :
Hi,

I have this strange case where some warnings come from don't know where.

>From a shell command (cmd but it doesn't matter) all fine

gdalinfo AQUA_MODIS.20020717T135006.L2.SST.nc
Driver: netCDF/Network Common Data Format
Files: AQUA_MODIS.20020717T135006.L2.SST.nc
Size is 512, 512
Metadata:
  /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
...


However, the same but this time called from Julia that wraps calls to
                              options = GDALInfoOptionsNew(options, C_NULL)
                              result = GDALInfo(ds.ptr, options)
                              GDALInfoOptionsFree(options)

I get these warnings

julia> println(gdalinfo("AQUA_MODIS.20020717T135006.L2.SST.nc"))
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
Driver: netCDF/Network Common Data Format
Files: AQUA_MODIS.20020717T135006.L2.SST.nc
Size is 512, 512
Metadata:
  /navigation_data/NC_GLOBAL#gringpointlatitude={28.923635,25.633446,42.81229,46.942131}
...

Also get several of these in other commands

Warning 1: dimension #1 (pixels_per_line) is not a Longitude/X dimension.
Warning 1: dimension #0 (number_of_lines) is not a Latitude/Y dimension.


Is there anyway to shut up this warnings, or warnings in general?


Thanks

Joaquim



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210307/a46583e1/attachment.html>

From rajeshreddy82 at gmail.com  Sun Mar  7 21:21:29 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Sun, 7 Mar 2021 22:21:29 -0700 (MST)
Subject: [gdal-dev] clipping with an irregular polygon with
 gdal.VectorTranslate
Message-ID: <1615180889510-0.post@n6.nabble.com>

Developers,

I am trying to set the "-clipsrc" with bbox, it is working as expected.

ogr2ogr -clipsrc -9943695.99544 5321548.895035 -9943537.149741
5321390.049336 -f MVT....

But how can I set a "-clipsrc" with an irregular polygon? 

Any other ways?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From bradh at frogmouth.net  Sun Mar  7 21:39:08 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 8 Mar 2021 16:39:08 +1100
Subject: [gdal-dev] clipping with an irregular polygon with
 gdal.VectorTranslate
In-Reply-To: <1615180889510-0.post@n6.nabble.com>
References: <1615180889510-0.post@n6.nabble.com>
Message-ID: <069601d713dd$5c3caf20$14b60d60$@frogmouth.net>

Perhaps 

ogr2ogr -clipsrc polygon.shp -f MVT....

If that doesn't do what you want, you might need to provide more info, including a full description of the source data, the clipping
polygon you want to use, what you expect to happen, and what happens instead.

Brad


From robert.coup at koordinates.com  Mon Mar  8 03:07:57 2021
From: robert.coup at koordinates.com (Robert Coup)
Date: Mon, 8 Mar 2021 11:07:57 +0000
Subject: [gdal-dev] Docker - was Re: Motion: remove and deprecate a few
 drivers
In-Reply-To: <685535e0-d44d-f667-a762-1a79cdb7ecc@aitchison.me.uk>
References: <e23043e4-6cb1-e1ca-25a4-29a63bb0bea4@spatialys.com>
 <CADRrdKsn5wyOJT2119qjHXgCL-jQ3yJRLvmTpbA2=OjLdsnU7w@mail.gmail.com>
 <6a6fbab4-9f32-2463-d89-df3613bb5fe@aitchison.me.uk>
 <CAFLLRp+LQbrs1xYh=fyfQ_EMF0T+OGrScX3BL07gbUkqgwt2eg@mail.gmail.com>
 <685535e0-d44d-f667-a762-1a79cdb7ecc@aitchison.me.uk>
Message-ID: <CAFLLRp+g9hq5Z1c2kSDFkYefHsGBsvaykbhmBqg=USV=YQegzg@mail.gmail.com>

Hi Andrew,

On Sat, 6 Mar 2021 at 14:36, Andrew C Aitchison <andrew at aitchison.me.uk> wrote:
> If, in five, ten, fifteen or even twenty five years, I don't have
> hardware that can run an existing docker image, then I'm less sure that
> docker is the answer. Will I have to rely on someone having made that
> Apple-ARM docker image of GDAL 3.2.2 back in 2021 ?

Again, Docker's a shortcut.

You can always build GDAL binaries from the 3.2.2 source in future as
long as you can find a C/C++ compiler with a matching libc
implementation. It might be simpler if it was GCC or LLVM/Clang or
MSVC but you can feasibly make it work with any future compiler with
(hopefully) limited effort. Likewise, if the compiler supports a
future CPU architecture it should build & work with (hopefully)
limited effort. Or run it via an emulator, given how ubiquitous x86 is
they'll probably still be emulating it in another 100 years.

Currently (for example) Debian builds and packages GDAL releases for
amd64, arm64, armel, armhf, i386, mips, mips64el, mipsel, ppc64el, and
s390x. And GDAL builds every commit in CI against 32 + 64 bit Linux
(with both GCC & Clang), macOS, Windows, and Android. There's no
shortage of supported CPU architectures, compilers, and operating
systems at present.

And worst-case, if C++ is long gone, future-you or your AI helper
could port the code to some other language.

Rob :)

From even.rouault at spatialys.com  Mon Mar  8 05:56:13 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Mar 2021 14:56:13 +0100
Subject: [gdal-dev] Motion: Motion: promote GDAL 3.2.2 RC1
Message-ID: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>

Hi,

Having heard no issues being reported regarding RC1

Motion:

Adopt GDAL 3.2.2 RC1 as final 3.2.2 release

Starting with my +1

Even

-- 
http://www.spatialys.com


From jmckenna at gatewaygeomatics.com  Mon Mar  8 05:59:01 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 8 Mar 2021 09:59:01 -0400
Subject: [gdal-dev] Motion: Motion: promote GDAL 3.2.2 RC1
In-Reply-To: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
References: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
Message-ID: <80ccda5c-ae5c-0bf5-6654-e55d8a265d26@gatewaygeomatics.com>

+1 jeff



On 2021-03-08 9:56 a.m., Even Rouault wrote:
> Hi,
> 
> Having heard no issues being reported regarding RC1
> 
> Motion:
> 
> Adopt GDAL 3.2.2 RC1 as final 3.2.2 release
> 
> Starting with my +1
> 
> Even
> 


-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From hugues.francois at inrae.fr  Mon Mar  8 05:50:24 2021
From: hugues.francois at inrae.fr (Hugues =?utf-8?Q?Fran=C3=A7ois?=)
Date: Mon, 8 Mar 2021 14:50:24 +0100 (CET)
Subject: [gdal-dev] gdal_rasterize expected behaviour
Message-ID: <560903418.550648.1615211424218.JavaMail.zimbra@inrae.fr>

Hello, 

I don't know exactly where I should ask this question and I wasn't able to find the answer when searching on the internet (maybe I didn't use the right keywords). 

I have to rasterize a vector layer, made of polygons, which resolution is finer than the destination raster I have to use so that I want to use the "all_touched" option. But since my the raster resolution is coarser than the vector one, it may happens sometimes that a single pixel is touched by several polygons (and sometime none of them encompass the pixel center point). In this case, how does the value burned to the raster is chosen among the candidates? 

Best regards, 
Hug

-- 

Hugues Fran?ois [ mailto:prenom.nom at inrae.fr ] 

IR - Administrateur de la BD Stations / StationoScope 

http://www.observatoire-stations.fr 

UR LESSEM 

+33 4 76 76 27 44 

+33 6 77 66 21 31

From jukka.rahkonen at maanmittauslaitos.fi  Mon Mar  8 06:24:54 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 8 Mar 2021 07:24:54 -0700 (MST)
Subject: [gdal-dev] Motion: Motion: promote GDAL 3.2.2 RC1
In-Reply-To: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
References: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
Message-ID: <1615213494267-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Having heard no issues being reported regarding RC1
> 
> Motion:
> 
> Adopt GDAL 3.2.2 RC1 as final 3.2.2 release
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Mar  8 08:40:59 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Mar 2021 17:40:59 +0100
Subject: [gdal-dev] Motion (V2): remove and deprecate a few drivers
In-Reply-To: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
References: <fa89453f-1e2b-2f68-85a1-0b40f50a83e0@spatialys.com>
Message-ID: <b9741a30-dd84-895b-8e7b-a01f2d7e3443@spatialys.com>


Le 04/03/2021 ? 17:32, Even Rouault a ?crit?:
> Hi,
>
> Updating my yesterday motion with the feedback received (only second 
> bullet updated with a more restricted set of drivers)
>
> Motion:
>
> - remove the vector drivers BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, 
> SEGY, SUA, XPlane and raster drivers BPG, E00GRID, EPSILON, 
> IGNFHeightASCIIGrid, NTv1. They have all been authored by myself and 
> I'm not aware of them having been much used or being still in use. 
> Implemented in https://github.com/OSGeo/gdal/pull/3373. They (driver 
> code, doc and tests) have been moved to the 
> https://github.com/OSGeo/gdal-extra-drivers
>
> - deprecate the raster drivers DODS, JPEG2000 (superseded per 
> JP2OpenJPEG), JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector 
> driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, 
> GEOMEDIA, GTM, INGRES, MONGODB (superserded per MongoDBV3), REC, WALK 
> . They will now be disabled at runtime by default, with an explicit 
> error message when they are triggered, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername}
> configuration option is set to YES, and will be removed in GDAL 3.5. 
> Implemented in https://github.com/OSGeo/gdal/pull/3505
>
> Starting with my +1
I declare this motion passed with +1 from PSC members HowardB, FrankW, 
JukkaR, SeanG, KurtS, DanielM and myself
>
> Even
>
-- 
http://www.spatialys.com


From sean at mapbox.com  Mon Mar  8 08:48:51 2021
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 8 Mar 2021 09:48:51 -0700
Subject: [gdal-dev] gdal_rasterize expected behaviour
In-Reply-To: <560903418.550648.1615211424218.JavaMail.zimbra@inrae.fr>
References: <560903418.550648.1615211424218.JavaMail.zimbra@inrae.fr>
Message-ID: <CADPhZXx6JtX0xEB+W7zT83Ka2UwccJ8zX7SqSkPQnaa1SmVGmw@mail.gmail.com>

Hi Hug,

GDALRasterizeGeometries takes an array of geometries and iterates over them
from start to end, burning them into the raster one at a time. With a
strictly ordered vector layer, you can expect the later shapes to be burned
over the earlier ones.

On Mon, Mar 8, 2021 at 7:00 AM Hugues Fran?ois <hugues.francois at inrae.fr>
wrote:

> Hello,
>
> I don't know exactly where I should ask this question and I wasn't able to
> find the answer when searching on the internet (maybe I didn't use the
> right keywords).
>
> I have to rasterize a vector layer, made of polygons, which resolution is
> finer than the destination raster I have to use so that I want to use the
> "all_touched" option. But since my the raster resolution is coarser than
> the vector one, it may happens sometimes that a single pixel is touched by
> several polygons (and sometime none of them encompass the pixel center
> point). In this case, how does the value burned to the raster is chosen
> among the candidates?
>
> Best regards,
> Hug
>
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210308/e634d936/attachment.html>

From hugues.francois at inrae.fr  Mon Mar  8 09:48:04 2021
From: hugues.francois at inrae.fr (Hugues =?utf-8?Q?Fran=C3=A7ois?=)
Date: Mon, 8 Mar 2021 18:48:04 +0100 (CET)
Subject: [gdal-dev] gdal_rasterize expected behaviour
In-Reply-To: <CADPhZXx6JtX0xEB+W7zT83Ka2UwccJ8zX7SqSkPQnaa1SmVGmw@mail.gmail.com>
References: <560903418.550648.1615211424218.JavaMail.zimbra@inrae.fr>
 <CADPhZXx6JtX0xEB+W7zT83Ka2UwccJ8zX7SqSkPQnaa1SmVGmw@mail.gmail.com>
Message-ID: <454337552.750924.1615225684481.JavaMail.zimbra@inrae.fr>

Hi Sean, 

That's perfectly clear and that's what I feared! I'll try to deal with that before processing my data with gdal_rasterize. 

All the best, 
Hug

-- 

Hugues Fran?ois [ mailto:prenom.nom at inrae.fr ] 

IR - Administrateur de la BD Stations / StationoScope 

http://www.observatoire-stations.fr 

UR LESSEM 

+33 4 76 76 27 44 

+33 6 77 66 21 31

----- Mail original -----
De: "gdal-dev" <gdal-dev at lists.osgeo.org>
?: "gdal-dev" <gdal-dev at lists.osgeo.org>
Envoy?: Lundi 8 Mars 2021 17:48:51
Objet: Re: [gdal-dev] gdal_rasterize expected behaviour

Hi Hug, 

GDALRasterizeGeometries takes an array of geometries and iterates over them from start to end, burning them into the raster one at a time. With a strictly ordered vector layer, you can expect the later shapes to be burned over the earlier ones. 

On Mon, Mar 8, 2021 at 7:00 AM Hugues Fran?ois < [ mailto:hugues.francois at inrae.fr | hugues.francois at inrae.fr ] > wrote: 


Hello, 

I don't know exactly where I should ask this question and I wasn't able to find the answer when searching on the internet (maybe I didn't use the right keywords). 

I have to rasterize a vector layer, made of polygons, which resolution is finer than the destination raster I have to use so that I want to use the "all_touched" option. But since my the raster resolution is coarser than the vector one, it may happens sometimes that a single pixel is touched by several polygons (and sometime none of them encompass the pixel center point). In this case, how does the value burned to the raster is chosen among the candidates? 

Best regards, 
Hug 






-- 
Sean Gillies 


[Fichier texte:ATT00001] 


From rajeshreddy82 at gmail.com  Mon Mar  8 23:02:49 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Tue, 9 Mar 2021 00:02:49 -0700 (MST)
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <CABUeae9r3vQHeFLs1mkvgwdERcKDCQKS1g08ziuJaEb5R+OjuQ@mail.gmail.com>
References: <1613994853795-0.post@n6.nabble.com>
 <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
 <1614196843609-0.post@n6.nabble.com>
 <CABUeae9r3vQHeFLs1mkvgwdERcKDCQKS1g08ziuJaEb5R+OjuQ@mail.gmail.com>
Message-ID: <1615273369372-0.post@n6.nabble.com>

Hi,

Do we have any libraries to get the tiles other than mercantile?

mercantile is having one method  - mercantile.tiles(*bounds, zooms=[18])

Which is accepting only bounds in bbox format.

Our requirement is to pass the irregular polygon and get the tiles.

Thanks

Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mwoo391 at gmail.com  Tue Mar  9 12:21:22 2021
From: mwoo391 at gmail.com (Maggie Wooten)
Date: Tue, 9 Mar 2021 15:21:22 -0500
Subject: [gdal-dev] Trouble with removing features in .gdb
Message-ID: <CAB=GGNHpG1ZanMnVFBcT7twv7iRDv2B=GEynptcY5v5SFHCb+g@mail.gmail.com>

I keep coming back to this issue, where I cannot delete features from a
.gdb in Python. I don't get any errors, it just doesn't do anything.  I
have searched the internet for solutions (which is how I got what I have
now) but none of the suggestions are working. Any other suggestions I could
try? It is a rather larger .gdb and I would prefer to not start from
scratch or have to copy it to a new .gdb.

Here is my code:

driver = ogr.GetDriverByName('FileGDB')
fc = driver.Open(inFC, 1)
fcLayer = fc.GetLayer()

for f in featureList:
    fcLayer.DeleteFeature(f)
    fc.ExecuteSQL('REPACK ' + fcLayer.GetName())
    fc.ExecuteSQL('RECOMPUTE EXTENT ON ' + fcLayer.GetName())

Where featureList is a list of integers that correspond to the features I
want to delete and inFC is the path a the .gdb I want to delete them from.

I am using GDAL 2.2.2.

My apologies if I have not submitted this email correctly, or am missing
information. Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210309/40ff809d/attachment.html>

From jgr at osgeopt.pt  Tue Mar  9 12:27:28 2021
From: jgr at osgeopt.pt (Jorge Gustavo Rocha)
Date: Tue, 9 Mar 2021 20:27:28 +0000
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
Message-ID: <83791e74-2b70-f9be-f209-d5daa1738639@osgeopt.pt>

Hi,

This table a good way to distribute issues and tasks among the
contributors, preserving the core developers.

Add myself to maintain DWG and DGNv8 support, since I've made a very
small contribution to them. I can keep the compilation with ODA
libraries in sync, since I have such license (although I'm limited to
linux).

Regards,

Jorge Gustavo

?s 18:31 de 05/03/21, Even Rouault escreveu:
> Hi,
> 
> following recent discussions about maintenance, I've initiated
> 
> https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system
> 
> with "just" drivers and binding languages
> 
> You're invited to check (I've put a few names that I had in mind in
> front of a few items) and update it.
> 
> Even
> 

-- 
OSGeo Portugal
NIF: 509588190
email: geral at osgeopt.pt
https://www.osgeopt.pt/

Pr?ximo evento: SASIG 2017, 20 a 22 de novembro, Porto
Mais informa??es: http://osgeopt.pt/sasig2017/

From p.baron at eta-etudes.com  Wed Mar 10 00:08:52 2021
From: p.baron at eta-etudes.com (pbaron)
Date: Wed, 10 Mar 2021 01:08:52 -0700 (MST)
Subject: [gdal-dev] Entwine help
Message-ID: <1615363732249-0.post@n6.nabble.com>

Hello, 
I search someone for helping me with the beginning of the history :
 entwine build -i https://data.entwine.io/red-rocks.laz -o
~/entwine/red-rocks 
This work on my computer (PC), but when i try with my own laz file, it
doesn't work 

https://dropbox.com/s/41ci0l4klc192ed/nuage1.laz?dl=0?

 do you know someone interested in helping me ! 

Patrick From France



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Mar 10 05:56:34 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Mar 2021 14:56:34 +0100
Subject: [gdal-dev] Motion: Motion: promote GDAL 3.2.2 RC1
In-Reply-To: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
References: <941b4e3a-8e7b-eeaa-115b-f23099635550@spatialys.com>
Message-ID: <e5baf1b5-bce3-a692-3a78-9682a06a4fc0@spatialys.com>


Le 08/03/2021 ? 14:56, Even Rouault a ?crit?:
> Hi,
>
> Having heard no issues being reported regarding RC1
>
> Motion:
>
> Adopt GDAL 3.2.2 RC1 as final 3.2.2 release
>
> Starting with my +1
I declare this motion passed with +1 from PSC members JukkaR and myself.
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Mar 10 06:42:59 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Mar 2021 15:42:59 +0100
Subject: [gdal-dev] GDAL 3.2.2 is released
Message-ID: <64b170b4-6182-6884-567d-80f3ff63f792@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the
release of the GDAL/OGR 3.2.2 bug fix version.

Consult the release notes for the list of issues addressed :
   https://github.com/OSGeo/gdal/blob/v3.2.2/gdal/NEWS

The sources are available at:

     https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2.tar.xz
     https://download.osgeo.org/gdal/3.2.2/gdal-3.2.2.tar.gz
     https://download.osgeo.org/gdal/3.2.2/gdal322.zip
     https://download.osgeo.org/gdal/3.2.2/gdal-grass-3.2.2.tar.gz

Also note that the GDAL 3.2.x series will be the last one to support Python
2.7. Starting with GDAL 3.3, Python 3.6 or above will be required for Python
functionality.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jrmorreale_ml at enoreth.net  Wed Mar 10 09:22:04 2021
From: jrmorreale_ml at enoreth.net (Jean-Roc Morreale (ml))
Date: Wed, 10 Mar 2021 18:22:04 +0100
Subject: [gdal-dev] Entwine help
In-Reply-To: <1615363732249-0.post@n6.nabble.com>
References: <1615363732249-0.post@n6.nabble.com>
Message-ID: <47a639423be074f73f25505b0ed2dc2cd212eab0.camel@enoreth.net>

Hi Patrick,

Sorry but this is the wrong list, wrong project, what you are looking
is the PDAL mailing list or Gitter https://pdal.io/community.html

Please add details about your entwine installation and the output of
pdal info --summary

regards,
jean-roc


Le mercredi 10 mars 2021 ? 01:08 -0700, pbaron a ?crit?:
> Hello, 
> I search someone for helping me with the beginning of the history :
> ?entwine build -i https://data.entwine.io/red-rocks.laz?-o
> ~/entwine/red-rocks 
> This work on my computer (PC), but when i try with my own laz file, it
> doesn't work 
> 
> https://dropbox.com/s/41ci0l4klc192ed/nuage1.laz?dl=0?
> 
> ?do you know someone interested in helping me ! 
> 
> Patrick From France
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From rajeshreddy82 at gmail.com  Thu Mar 11 01:46:03 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 11 Mar 2021 02:46:03 -0700 (MST)
Subject: [gdal-dev] Vector Tile size change in Ogr2Ogr
Message-ID: <1615455963261-0.post@n6.nabble.com>

Developers,

What is the default tile size when we generate the Vector tiles (MVT) using
Ogr2Ogr? Can we set the tile size as 512x512?


Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Mar 11 01:59:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 11 Mar 2021 10:59:54 +0100
Subject: [gdal-dev] Vector Tile size change in Ogr2Ogr
In-Reply-To: <1615455963261-0.post@n6.nabble.com>
References: <1615455963261-0.post@n6.nabble.com>
Message-ID: <9d04c631-9cc3-bd7c-f63f-f7c64503195e@spatialys.com>


Le 11/03/2021 ? 10:46, MRRAJESH a ?crit?:
> Developers,
>
> What is the default tile size when we generate the Vector tiles (MVT) using
> Ogr2Ogr? Can we set the tile size as 512x512?

See the EXTENT dataset creation option of 
https://gdal.org/drivers/vector/mvt.html#dataset-creation-options

It defaults already to 4096 units, as in the MVT specification itself.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From paul.malm at lfv.se  Thu Mar 11 02:12:24 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Thu, 11 Mar 2021 10:12:24 +0000
Subject: [gdal-dev] Javabindings
Message-ID: <51ba1ddf34e14f58ad425c889c41a2cf@lfv.se>

Hi,
I've tried to install java bindings for GDAL this whole week. But is seems impossible for me to manage that.
I've read on internet a lot of discussions an tried solutions that other has suggested, but without success.
I have Windows 10,
Java 1.8.0
Eclipse 4.17.0
I installed gdal-302-1928-x64-core.msi from
https://www.gisinternals.com/query.html?content=filelist&file=release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip to
C:\Program Files

I've set the following "extra" Environment variables:
PATH:
C:\Program Files\Gdal\bin\gdal\apps;
C:\Program Files\Gdal\bin;
C:\Program Files\Gdal\bin\gdal;
C:\Program Files\Gdal\bin\gdal\java;
C:\Program Files\Gdal\bin\gdal\plugins-external
C:\Program Files\Gdal\bin\gdal\plugins
C:\Program Files\java-1.8.0-openjdk-1.8.0.201-1.b09.ojdkbuild.windows.x86_64\jre\bin;

Other environment variables I have set:
GDAL_BIN                    C:\Program Files\Gdal\bin
GDAL_DATA                C:\Program Files\Gdal\bin\gdal-data
GDAL_DRIVER             C:\Program Files\Gdal\bin\gdal\plugins
GDAL_DRIVER_PATH C:\Program Files\Gdal\bin\gdal\plugins
PROJ_LIB                     C:\Program Files\Gdal\bin\proj7\share
JAVA_HOME               C:\Program Files\java-1.8.0-openjdk-1.8.0.201-1.b09.ojdkbuild.windows.x86_64\jre

Eclipse:
In run configurations I added the argument:
-Djava.library.path="C:\Program Files\Gdal\bin\gdal\java;${env_var:PATH}"
In java build path I added external library: C:\Program Files\Gdal\bin\gdal\java\gdal.jar

The error code I get is however I do/configure is:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\Gdal\bin\gdal\java\gdalalljni.dll:
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)
            at org.lfv.raster.TransformRaster.<init>(TransformRaster.java:64)
            at org.lfv.raster.TransformRaster.main(TransformRaster.java:51)



When I run gdalinfo --formats
I get the following response:

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\gdal_GEOR.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\gdal_GEOR.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\ogr_OCI.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\ogr_OCI.dll
126: Det g?r inte att hitta den angivna modulen.

Supported Formats:
  BAG -raster,multidimensional raster,vector- (rw+v): Bathymetry Attributed Grid
  ECW -raster- (rov): ERDAS Compressed Wavelets (SDK 5.5)
  JP2ECW -raster,vector- (rov): ERDAS JPEG2000 (SDK 5.5)
  FITS -raster,vector- (rw+): Flexible Image Transport System
  GMT -raster- (rw): GMT NetCDF Grid Format
  HDF4 -raster,multidimensional raster- (ros): Hierarchical Data Format Release 4
  Etc...

As I'm listing, the files are there:
Directory of C:\Program Files\Gdal\bin\gdal\plugins
2021-03-11  08:58    <DIR>          .
2021-03-11  08:58    <DIR>          ..
2021-02-11  19:04         2 937 344 gdal_BAG.dll
2021-02-11  19:05           195 584 gdal_ECW_JP2ECW.dll
2021-02-11  19:05           205 824 gdal_FITS.dll
2021-02-11  19:03           412 672 gdal_GEOR.dll
2021-02-11  19:04           578 048 gdal_GMT.dll
2021-02-11  19:04           520 704 gdal_HDF4.dll
2021-02-11  19:04           520 704 gdal_HDF4Image.dll
2021-02-11  19:04         2 937 344 gdal_HDF5.dll
2021-02-11  19:04         2 937 344 gdal_HDF5Image.dll
2021-02-11  19:04         2 957 312 gdal_KEA.dll
2021-02-11  19:04           139 776 gdal_MG4Lidar.dll
2021-02-11  19:03           154 112 gdal_MrSID.dll
2021-02-11  19:04           578 048 gdal_netCDF.dll
2021-02-11  19:03         3 954 688 gdal_PDF.dll
2021-02-11  19:05           232 960 ogr_AmigoCloud.dll
2021-02-11  19:03           203 776 ogr_OCI.dll

Soon I don't have any hair left :-(
Is there someone who can say what I'm doing wrong.
Please..
/Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210311/656314ed/attachment.html>

From paul.malm at lfv.se  Thu Mar 11 02:53:08 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Thu, 11 Mar 2021 10:53:08 +0000
Subject: [gdal-dev] javabindings
Message-ID: <1fe271b8c9f74e4a8d884b4a29ee1423@lfv.se>

Hi,
I've tried to install java bindings for GDAL this whole week. But is seems impossible for me to manage that.
I've read on internet a lot of discussions an tried solutions that other has suggested, but without success.
I have Windows 10,
Java 1.8.0
Eclipse 4.17.0
I installed gdal-302-1928-x64-core.msi from
https://www.gisinternals.com/query.html?content=filelist&file=release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip to
C:\Program Files

I've set the following "extra" Environment variables:
PATH:
C:\Program Files\Gdal\bin\gdal\apps;
C:\Program Files\Gdal\bin;
C:\Program Files\Gdal\bin\gdal;
C:\Program Files\Gdal\bin\gdal\java;
C:\Program Files\Gdal\bin\gdal\plugins-external
C:\Program Files\Gdal\bin\gdal\plugins
C:\Program Files\java-1.8.0-openjdk-1.8.0.201-1.b09.ojdkbuild.windows.x86_64\jre\bin;

Other environment variables I have set:
GDAL_BIN                    C:\Program Files\Gdal\bin
GDAL_DATA                C:\Program Files\Gdal\bin\gdal-data
GDAL_DRIVER             C:\Program Files\Gdal\bin\gdal\plugins
GDAL_DRIVER_PATH C:\Program Files\Gdal\bin\gdal\plugins
PROJ_LIB                     C:\Program Files\Gdal\bin\proj7\share
JAVA_HOME               C:\Program Files\java-1.8.0-openjdk-1.8.0.201-1.b09.ojdkbuild.windows.x86_64\jre

Eclipse:
In run configurations I added the argument:
-Djava.library.path="C:\Program Files\Gdal\bin\gdal\java;${env_var:PATH}"
In java build path I added external library: C:\Program Files\Gdal\bin\gdal\java\gdal.jar

The error code I get is however I do/configure is:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\Gdal\bin\gdal\java\gdalalljni.dll:
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)
            at org.lfv.raster.TransformRaster.<init>(TransformRaster.java:64)
            at org.lfv.raster.TransformRaster.main(TransformRaster.java:51)



When I run gdalinfo --formats
I get the following response:

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\gdal_GEOR.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\gdal_GEOR.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\ogr_OCI.dll
126: Det g?r inte att hitta den angivna modulen.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal\bin\gdal\plugins\ogr_OCI.dll
126: Det g?r inte att hitta den angivna modulen.

Supported Formats:
  BAG -raster,multidimensional raster,vector- (rw+v): Bathymetry Attributed Grid
  ECW -raster- (rov): ERDAS Compressed Wavelets (SDK 5.5)
  JP2ECW -raster,vector- (rov): ERDAS JPEG2000 (SDK 5.5)
  FITS -raster,vector- (rw+): Flexible Image Transport System
  GMT -raster- (rw): GMT NetCDF Grid Format
  HDF4 -raster,multidimensional raster- (ros): Hierarchical Data Format Release 4
  Etc...

As I'm listing, the files are there:
Directory of C:\Program Files\Gdal\bin\gdal\plugins
2021-03-11  08:58    <DIR>          .
2021-03-11  08:58    <DIR>          ..
2021-02-11  19:04         2 937 344 gdal_BAG.dll
2021-02-11  19:05           195 584 gdal_ECW_JP2ECW.dll
2021-02-11  19:05           205 824 gdal_FITS.dll
2021-02-11  19:03           412 672 gdal_GEOR.dll
2021-02-11  19:04           578 048 gdal_GMT.dll
2021-02-11  19:04           520 704 gdal_HDF4.dll
2021-02-11  19:04           520 704 gdal_HDF4Image.dll
2021-02-11  19:04         2 937 344 gdal_HDF5.dll
2021-02-11  19:04         2 937 344 gdal_HDF5Image.dll
2021-02-11  19:04         2 957 312 gdal_KEA.dll
2021-02-11  19:04           139 776 gdal_MG4Lidar.dll
2021-02-11  19:03           154 112 gdal_MrSID.dll
2021-02-11  19:04           578 048 gdal_netCDF.dll
2021-02-11  19:03         3 954 688 gdal_PDF.dll
2021-02-11  19:05           232 960 ogr_AmigoCloud.dll
2021-02-11  19:03           203 776 ogr_OCI.dll

Soon I don't have any hair left :-(
Is there someone who can say what I'm doing wrong.
Please..
/Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210311/62774c6c/attachment-0001.html>

From rajeshreddy82 at gmail.com  Thu Mar 11 03:44:59 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 11 Mar 2021 04:44:59 -0700 (MST)
Subject: [gdal-dev] Vector Tile size change in Ogr2Ogr
In-Reply-To: <9d04c631-9cc3-bd7c-f63f-f7c64503195e@spatialys.com>
References: <1615455963261-0.post@n6.nabble.com>
 <9d04c631-9cc3-bd7c-f63f-f7c64503195e@spatialys.com>
Message-ID: <1615463099188-0.post@n6.nabble.com>

Thank you Even.

Can you please explain the BOUNDS usage? How it is related to EXTENT?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From traviskirstine at gmail.com  Thu Mar 11 05:44:27 2021
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu, 11 Mar 2021 08:44:27 -0500
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <1615273369372-0.post@n6.nabble.com>
References: <1613994853795-0.post@n6.nabble.com>
 <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
 <1614196843609-0.post@n6.nabble.com>
 <CABUeae9r3vQHeFLs1mkvgwdERcKDCQKS1g08ziuJaEb5R+OjuQ@mail.gmail.com>
 <1615273369372-0.post@n6.nabble.com>
Message-ID: <CALtm4h2t6udJ7abbp09=dANgL8LJYox4obsYN-tQJOLztpGPRA@mail.gmail.com>

You could get the "bbox" list from mercantile.tiles and then get the bounds
for each tile using mercantile.bounds and then check the intersection with
your irregular polygon, this would be fairly slow depending on the bounds /
zoom.
I'm not aware of any other libraries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210311/cc3fef16/attachment.html>

From rajeshreddy82 at gmail.com  Thu Mar 11 07:58:12 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 11 Mar 2021 08:58:12 -0700 (MST)
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <CALtm4h2t6udJ7abbp09=dANgL8LJYox4obsYN-tQJOLztpGPRA@mail.gmail.com>
References: <1613994853795-0.post@n6.nabble.com>
 <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
 <1614196843609-0.post@n6.nabble.com>
 <CABUeae9r3vQHeFLs1mkvgwdERcKDCQKS1g08ziuJaEb5R+OjuQ@mail.gmail.com>
 <1615273369372-0.post@n6.nabble.com>
 <CALtm4h2t6udJ7abbp09=dANgL8LJYox4obsYN-tQJOLztpGPRA@mail.gmail.com>
Message-ID: <1615478292544-0.post@n6.nabble.com>

Thanks for the reply. I got one library, i.e.,
https://github.com/mapbox/tile-cover




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar 11 10:30:17 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 11 Mar 2021 11:30:17 -0700 (MST)
Subject: [gdal-dev] Vector Tile size change in Ogr2Ogr
In-Reply-To: <1615463099188-0.post@n6.nabble.com>
References: <1615455963261-0.post@n6.nabble.com>
 <9d04c631-9cc3-bd7c-f63f-f7c64503195e@spatialys.com>
 <1615463099188-0.post@n6.nabble.com>
Message-ID: <1615487417556-0.post@n6.nabble.com>





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 12 01:00:14 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 12 Mar 2021 02:00:14 -0700 (MST)
Subject: [gdal-dev] Vector Tile size change in Ogr2Ogr
In-Reply-To: <1615463099188-0.post@n6.nabble.com>
References: <1615455963261-0.post@n6.nabble.com>
 <9d04c631-9cc3-bd7c-f63f-f7c64503195e@spatialys.com>
 <1615463099188-0.post@n6.nabble.com>
Message-ID: <1615539614580-0.post@n6.nabble.com>

Hi,

Bounds and other metadata are explained in
https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md.

"The metadata table SHOULD contain these four rows:

bounds (string of comma-separated numbers): The maximum extent of the
rendered map area. Bounds must define an area covered by all zoom levels.
The bounds are represented as WGS 84 latitude and longitude values, in the
OpenLayers Bounds format (left, bottom, right, top). For example, the bounds
of the full Earth, minus the poles, would be: -180.0,-85,180,85.

    center (string of comma-separated numbers): The longitude, latitude, and
zoom level of the default view of the map. Example: -122.1906,37.7599,11

    minzoom (number): The lowest zoom level for which the tileset provides
data"

    maxzoom (number): The highest zoom level for which the tileset provides
data

Metadata helps the vector tile client to zoom to correct area, at reasonable
scale. There is no connection with EXTENT. Extent defines the precision of
the local coordinate system that is used within a vector tile. The same
z/x/y tile is always located in the same place on Earth and that location is
defined by the tiling schema. Geometries within a tile are encoded by using
integer numbers starting from (0 0) that is at top left corner. EXTENT
defines the lower right corner in local coordinates and by default it is
(4096 4096).

All this is well described in the vector tile specification
https://github.com/mapbox/vector-tile-spec/tree/master/2.1.

-Jukka Rahkonen-
   


MRRAJESH wrote
> Thank you Even.
> 
> Can you please explain the BOUNDS usage? How it is related to EXTENT?
> 
> Regards,
> Rajesh
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From olh at geosite.dk  Fri Mar 12 06:58:14 2021
From: olh at geosite.dk (Ove Lindholt Hansen)
Date: Fri, 12 Mar 2021 15:58:14 +0100
Subject: [gdal-dev] Error from GDAL/Ogr creating StatialReference on web app
 under windows
Message-ID: <CA+mxHjjucNmtPNjjOGTJudN=k99hLwWqoZynpdy4Vn1dNk+xEA@mail.gmail.com>

Hello List.

I just ran into a problem.
I am using GDAL/Ogr from my web application.

I just upgraded to 3.2.1 using the fine installer
gdal-302-1928-x64-core.msi from gisinternals.

Initalisation of the ogr works fine, as it used to.
But creating spatial reference gives a strange error.

See code her:

var CRSInput = new SpatialReference("");
CRSInput.ImportFromEPSGA(25832);


The error I get is this:

SQLite error on SELECT name, coordinate_system_auth_name,
coordinate_system_code, geodetic_crs_auth_name, geodetic_crs_code,
conversion_auth_name, conversion_code, area_of_use_auth_name,
area_of_use_code, text_definition, deprecated FROM projected_crs WHERE
auth_name = ? AND code = ?: no such column: area_of_use_auth_name



-- 
Venlig hilsen

Ove Lindholt Hansen
GeoSite
T: 40916223
A: Solmarksvej 20, DK8240 Risskov
L?s om GIS4Mobile's nye LedningsInfo
<https://www.gis4mobile.dk/produkter/ledningsinfo-entreprenoerer/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210312/ad8062ce/attachment.html>

From runette at gmail.com  Fri Mar 12 07:55:28 2021
From: runette at gmail.com (Paul Harwood)
Date: Fri, 12 Mar 2021 15:55:28 +0000
Subject: [gdal-dev] Error from GDAL/Ogr creating StatialReference on web
 app under windows
In-Reply-To: <CA+mxHjjucNmtPNjjOGTJudN=k99hLwWqoZynpdy4Vn1dNk+xEA@mail.gmail.com>
References: <CA+mxHjjucNmtPNjjOGTJudN=k99hLwWqoZynpdy4Vn1dNk+xEA@mail.gmail.com>
Message-ID: <CAE8nN5PbaLYsdLYUmHdh3GDdsFo3At-6LVWx-9C1ZMsDpvZqgQ@mail.gmail.com>

I have got that before when using the wrong version of the proj.db for the
version of PROJ I am using - and if I remember correctly there is a PROJ
version update in 3.2.1

Have you checked you have the correct version of proj.db

On Fri, 12 Mar 2021 at 14:59, Ove Lindholt Hansen <olh at geosite.dk> wrote:

> Hello List.
>
> I just ran into a problem.
> I am using GDAL/Ogr from my web application.
>
> I just upgraded to 3.2.1 using the fine installer
> gdal-302-1928-x64-core.msi from gisinternals.
>
> Initalisation of the ogr works fine, as it used to.
> But creating spatial reference gives a strange error.
>
> See code her:
>
> var CRSInput = new SpatialReference("");
> CRSInput.ImportFromEPSGA(25832);
>
>
> The error I get is this:
>
> SQLite error on SELECT name, coordinate_system_auth_name,
> coordinate_system_code, geodetic_crs_auth_name, geodetic_crs_code,
> conversion_auth_name, conversion_code, area_of_use_auth_name,
> area_of_use_code, text_definition, deprecated FROM projected_crs WHERE
> auth_name = ? AND code = ?: no such column: area_of_use_auth_name
>
>
>
> --
> Venlig hilsen
>
> Ove Lindholt Hansen
> GeoSite
> T: 40916223
> A: Solmarksvej 20, DK8240 Risskov
> L?s om GIS4Mobile's nye LedningsInfo
> <https://www.gis4mobile.dk/produkter/ledningsinfo-entreprenoerer/>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210312/69c383c7/attachment.html>

From matt.wilkie at gov.yk.ca  Fri Mar 12 10:13:44 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Fri, 12 Mar 2021 11:13:44 -0700 (MST)
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
Message-ID: <1615572824401-0.post@n6.nabble.com>

I have this bat file in a directory in PATH (For me this is
C:\bin\osgeo-py3.bat). I run it in a command session after running
Osgeo4W.bat. After this you don't need to use the `python
path\to\file.py`invocation.

:::
set
PATH=%PATH%;%OSGEO4W_ROOT%\apps\Python37;%OSGEO4W_ROOT%\apps\Python37\Scripts
set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37
:::

You could put it in Osgeo4W.bat and save yourself a step but it will be
clobbered on every upgrade. It's not set by default now because of needing
to support python 2 & 3 at the same time.

(Aside: It's pretty cool to see that the simple script I wrote a zillion
years ago to "OSGeo4W creates .bat file for each Python script." is still
used and working. Thanks for the kind words Jukka.)



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matt.wilkie at gov.yk.ca  Fri Mar 12 10:17:54 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Fri, 12 Mar 2021 11:17:54 -0700 (MST)
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
Message-ID: <1615573074305-0.post@n6.nabble.com>

Is it expected that `gdal_retile -of cog -ps 4096 4096 -t myoutdir
infile.tif` creates files that are not georeferenced?

Using Gdal from QGIS 3.16 on Win10.

~~~
$ gdalinfo --version
GDAL 3.1.4, released 2020/10/20

$ gdalinfo u:.\SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers_01_01.tif.msk
Driver: GTiff/GeoTIFF
Files: u:.\SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers_01_01.tif.msk
Size is 4096, 4096
Metadata:
  INTERNAL_MASK_FLAGS_1=2
  INTERNAL_MASK_FLAGS_2=2
  INTERNAL_MASK_FLAGS_3=2
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 4096.0)
Upper Right ( 4096.0,    0.0)
Lower Right ( 4096.0, 4096.0)
Center      ( 2048.0, 2048.0)
Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
~~~





-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matt.wilkie at gov.yk.ca  Fri Mar 12 10:50:50 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Fri, 12 Mar 2021 11:50:50 -0700 (MST)
Subject: [gdal-dev] nearblack on multi GB images very slow
Message-ID: <1615575050335-0.post@n6.nabble.com>

I have a lot of multi GB images that are unfortunately jpeg-in-geotiff
encoded before nodata was properly defined. As a result they all suffer from
the jagged edges problem.
<http://osgeo-org.1560.x6.nabble.com/file/t192661/WVpPW.png> 

I've defined a method for adding a nodata mask side-car file that works
around this: 
https://gis.stackexchange.com/questions/387877/add-a-nodata-mask-or-alpha-band-to-read-only-image/

 * Create a working copy de-collared image with a mask file
 * Rename the mask file to match original
 * Remove working copy

Windows command line syntax:

:::
nearblack -o xxx.tif -setmask in_image.tif
move xxx.tif.msk in_image.tif.msk
del xxx.*
:::

Unfortunately nearblack is unusable on large images. With a source image of
3.9 GB (126015 x 68149 pixels, 3 channels) it was only at 35% after 17
hours. I forgot about the process and rebooted my machine so I don't know
how long it would taken to complete, if it would have finished at all.

I used gdal_retile to break the source into 4096x4096 tiles and ran
nearblack on those. It finished in under 2 hours for the entire set of 527
files, but i can't use the result because the tiles aren't georeferenced
(see other thread). That problem aside, the experiment demonstrates much
optimization is possible. 

Any advice on how else I might solve this?







-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From me at komzpa.net  Fri Mar 12 11:09:51 2021
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Fri, 12 Mar 2021 22:09:51 +0300
Subject: [gdal-dev] nearblack on multi GB images very slow
In-Reply-To: <1615575050335-0.post@n6.nabble.com>
References: <1615575050335-0.post@n6.nabble.com>
Message-ID: <CAC8Q8tLRhHTVRYptcwTRyptTREpLYx33pvjzxaiAKhc-zzJviw@mail.gmail.com>

You need to enlarge cache size (GDAL_CACHEMAX) so that it can fit the
uncompressed tiles of one single row of your image.

On Fri, Mar 12, 2021 at 9:50 PM mhw-at-yg <matt.wilkie at gov.yk.ca> wrote:

> I have a lot of multi GB images that are unfortunately jpeg-in-geotiff
> encoded before nodata was properly defined. As a result they all suffer
> from
> the jagged edges problem.
> <http://osgeo-org.1560.x6.nabble.com/file/t192661/WVpPW.png>
>
> I've defined a method for adding a nodata mask side-car file that works
> around this:
>
> https://gis.stackexchange.com/questions/387877/add-a-nodata-mask-or-alpha-band-to-read-only-image/
>
>  * Create a working copy de-collared image with a mask file
>  * Rename the mask file to match original
>  * Remove working copy
>
> Windows command line syntax:
>
> :::
> nearblack -o xxx.tif -setmask in_image.tif
> move xxx.tif.msk in_image.tif.msk
> del xxx.*
> :::
>
> Unfortunately nearblack is unusable on large images. With a source image of
> 3.9 GB (126015 x 68149 pixels, 3 channels) it was only at 35% after 17
> hours. I forgot about the process and rebooted my machine so I don't know
> how long it would taken to complete, if it would have finished at all.
>
> I used gdal_retile to break the source into 4096x4096 tiles and ran
> nearblack on those. It finished in under 2 hours for the entire set of 527
> files, but i can't use the result because the tiles aren't georeferenced
> (see other thread). That problem aside, the experiment demonstrates much
> optimization is possible.
>
> Any advice on how else I might solve this?
>
>
>
>
>
>
>
> -----
> -Matt
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Darafei "Kom?pa" Praliaskouski
OSM BY Team - http://openstreetmap.by/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210312/a9f259fd/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 12 11:24:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 12 Mar 2021 12:24:48 -0700 (MST)
Subject: [gdal-dev] nearblack on multi GB images very slow
In-Reply-To: <1615575050335-0.post@n6.nabble.com>
References: <1615575050335-0.post@n6.nabble.com>
Message-ID: <1615577088537-0.post@n6.nabble.com>

Hi,

Are your multigigabyte originals tiled or striped tiffs?

-Jukka Rahkonen-



mhw-at-yg wrote
> I have a lot of multi GB images that are unfortunately jpeg-in-geotiff
> encoded before nodata was properly defined. As a result they all suffer
> from
> the jagged edges problem.
> &lt;http://osgeo-org.1560.x6.nabble.com/file/t192661/WVpPW.png&gt; 
> 
> I've defined a method for adding a nodata mask side-car file that works
> around this: 
> https://gis.stackexchange.com/questions/387877/add-a-nodata-mask-or-alpha-band-to-read-only-image/
> 
>  * Create a working copy de-collared image with a mask file
>  * Rename the mask file to match original
>  * Remove working copy
> 
> Windows command line syntax:
> 
> :::
> nearblack -o xxx.tif -setmask in_image.tif
> move xxx.tif.msk in_image.tif.msk
> del xxx.*
> :::
> 
> Unfortunately nearblack is unusable on large images. With a source image
> of
> 3.9 GB (126015 x 68149 pixels, 3 channels) it was only at 35% after 17
> hours. I forgot about the process and rebooted my machine so I don't know
> how long it would taken to complete, if it would have finished at all.
> 
> I used gdal_retile to break the source into 4096x4096 tiles and ran
> nearblack on those. It finished in under 2 hours for the entire set of 527
> files, but i can't use the result because the tiles aren't georeferenced
> (see other thread). That problem aside, the experiment demonstrates much
> optimization is possible. 
> 
> Any advice on how else I might solve this?
> 
> 
> 
> 
> 
> 
> 
> -----
> -Matt
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 12 11:37:55 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 12 Mar 2021 12:37:55 -0700 (MST)
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
In-Reply-To: <1615573074305-0.post@n6.nabble.com>
References: <1615573074305-0.post@n6.nabble.com>
Message-ID: <1615577875967-0.post@n6.nabble.com>

Hi,

Expected behavior is documented in
https://gdal.org/programs/gdal_retile.html.

-s_srs <srs_def>

    Source spatial reference to use. The coordinate systems that can be
passed are anything supported by the OGRSpatialReference.SetFromUserInput()
call, which includes EPSG, PCS, and GCSes (i.e. EPSG:4296), PROJ.4
declarations (as above), or the name of a .prj file containing well known
text. If no srs_def is given, the srs_def of the source tiles is used (if
there is any). The srs_def will be propagated to created tiles (if possible)
and to the optional shape file(s)

-tileIndex <tileIndexName>

    The name of shape file containing the result tile(s) index

Thus if your infile.tif is reoreferenced the tif tiles should have the same
georeferencing. If they don't you may try to give some help with "-s_srs".
In any case the tiles are indirectly georeferenced by the shapefile index
where georeferenced polygons present the footprints of the tiles and
filename can be found from an attribute field.

-Jukka Rahkonen-




mhw-at-yg wrote
> Is it expected that `gdal_retile -of cog -ps 4096 4096 -t myoutdir
> infile.tif` creates files that are not georeferenced?
> 
> Using Gdal from QGIS 3.16 on Win10.





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From evert.etienne at sitemark.com  Fri Mar 12 11:43:47 2021
From: evert.etienne at sitemark.com (Evert Etienne (SITEMARK))
Date: Fri, 12 Mar 2021 19:43:47 +0000
Subject: [gdal-dev] Converting DEM height values from feet to meter
Message-ID: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>

Hello all,

I was wondering what the best or recommended way was to convert the vertical unit of a DEM/DSM. I am able to use gdal_translate, gdal_calc.py, GDAL python bindings or rasterio. I will afterwards be tiling using gdal2tiles.
Any pointers would be appreciated. 

Greetings

From me at komzpa.net  Fri Mar 12 13:25:24 2021
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Sat, 13 Mar 2021 00:25:24 +0300
Subject: [gdal-dev] nearblack on multi GB images very slow
In-Reply-To: <67e7d6cc151647d0b7f89991caa46141@app-exch2.gov.yk.ca>
References: <1615575050335-0.post@n6.nabble.com>
 <CAC8Q8tLRhHTVRYptcwTRyptTREpLYx33pvjzxaiAKhc-zzJviw@mail.gmail.com>
 <67e7d6cc151647d0b7f89991caa46141@app-exch2.gov.yk.ca>
Message-ID: <CAC8Q8tKm2+0ii+CZipGeMQcHJmSRdJT-hnmxPTbwSHWZJ5QF3A@mail.gmail.com>

You need to count tiles in the row, not pixels.

ceil(126015/128)*3*8*128*128 = 387 118 080 = half a gigabyte.


On Sat, Mar 13, 2021 at 12:08 AM <Matt.Wilkie at yukon.ca> wrote:

> > You need to enlarge cache size (GDAL_CACHEMAX) so that it can fit the
> uncompressed tiles of one single row of your image.
>
>
>
> Oh, ok. What?s the formula for that? A single row of pixels X num bands X
> bit-depth? Or Block-size X bands X depth?
>
>
>
> Given a source of:
>
>
>
> Size is 126015, 68149
>
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>
>
>
> The math would be:
>
>
>
> 126015*3*8=3024360 bytes
>
>             3024360/1024= 2,954 KB
>
>
>
> Or:
>
>
>
> 126015*3*8*128*128=4E10 bytes
>
> 4E10/1024/1024= 3,8147 MB
>
>
>
> ?
>
>
>
> -Matt
>
>
>


-- 
Darafei "Kom?pa" Praliaskouski
OSM BY Team - http://openstreetmap.by/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210313/707ee1e4/attachment.html>

From Matt.Wilkie at yukon.ca  Sun Mar 14 21:04:04 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Mon, 15 Mar 2021 04:04:04 +0000
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?
Message-ID: <1615781080797.37078@yukon.ca>

So this is curious: output to Cloud optimized Geotiff with ZSTD compression to Level 17 is smaller than levels 18-22. Or at least that's my results when testing compression results with Gdal 3.1 via Qgis 3.18 on Windows 10. I expected compression levels to get smaller with higher levels, at expense of longer and longer computation time. Levels 1 to 16 do that. Even more curious than 17 being the smallest of the lot is that each step 18 to 22 is progressively larger, albeit by a miniscule amount.

Here's my results:

% smaller than biggest  Bytes   Filename        Compression     Predictor       Level
24.2%   200,968,821     cog-zstd-pyes-lev17.tif zstd    yes     17
22.8%   204,567,155     cog-zstd-pyes-lev18.tif zstd    yes     18
22.8%   204,594,678
        cog-zstd-pyes-lev19.tif zstd    yes
        19
22.8%   204,594,678     cog-zstd-pyes-lev20.tif zstd    yes     20
22.8%   204,626,722     cog-zstd-pyes-lev21.tif zstd    yes     21
22.8%   204,635,985     cog-zstd-pyes-lev22.tif zstd    yes     22
22.6%   205,026,301     cog-zstd-pyes-lev16.tif zstd    yes     16
21.5%   208,039,012
        cog-zstd-pyes-lev15.tif zstd    yes     15
21.5%   208,094,559     cog-zstd-pyes-lev13.tif zstd    yes     13
21.5%   208,094,560     cog-zstd-pyes-lev14.tif zstd    yes     14
21.3%   208,714,731     cog-zstd-pyes-lev12.tif zstd    yes     12
21.2%   208,989,301     cog-zstd-pyes-lev11.tif zstd    yes     11
21.2%   208,989,994     cog-zstd-pyes-lev10.tif zstd    yes     10
21.1%   209,071,549     cog-zstd-pyes-lev9.tif  zstd    yes     9
21.0%   209,453,858     cog-zstd-pyes-lev8.tif  zstd    yes     8
20.9%   209,634,360     cog-zstd-pyes-lev7.tif  zstd    yes     7
20.7%   210,182,178     cog-zstd-pyes-lev6.tif  zstd    yes     6
20.4%   210,992,074     cog-zstd-pyes-lev5.tif  zstd    yes     5
18.9%   214,894,175     cog-zstd-pyes-lev4.tif  zstd    yes     4
17.4%   218,911,762     cog-zstd-pyes-lev3.tif  lzw     2       3
16.6%   220,991,236     cog-dflt-p2.tif deflate 2
13.0%   230,553,902     cog-zstd-pyes-lev2.tif  zstd    yes
        2
11.6%   234,277,147     cog-zstd-pyes-lev1.tif  zstd    yes     1
5.7%    249,979,858     cog-dflt-p1.tif deflate 1
0.0%    265,062,854     cog-lzw-p2.tif  lzw     2



Command line pattern:


gdal_translate ^

  -co compress=zstd ^

  -co predictor=yes ^

  -co level=3 ^

  -co num_threads=all_cpus ^

  -of cog ^

  mtn-view.tif ^

  mtn-view-cog-zstd-pyes-lev3.tif


Source image:


Name


AerialPhotos/AerialPhotos


URL


https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer


Source


crs='EPSG:3578' format='JPGPNG' layer='' url='https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer'


CRS


EPSG:3578 - NAD83 / Yukon Albers - Projected


Export extent


Upper Left, Lower Left, Upper Right, Lower Right

356750.816,  702590.026

356750.816,  699097.526

361572.583,  702590.026

361572.583,  699097.526


Pixel size


0.5m



Do others see the same thing?


?Cheers,

Matt Wilkie
Environment | Information Management & Technology | 867-667-8133 ?? Yukon.ca<http://yukon.ca/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210315/58b010e5/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Sun Mar 14 21:08:14 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Mon, 15 Mar 2021 04:08:14 +0000
Subject: [gdal-dev] nearblack on multi GB images very slow
In-Reply-To: <CAC8Q8tKm2+0ii+CZipGeMQcHJmSRdJT-hnmxPTbwSHWZJ5QF3A@mail.gmail.com>
References: <1615575050335-0.post@n6.nabble.com>
 <CAC8Q8tLRhHTVRYptcwTRyptTREpLYx33pvjzxaiAKhc-zzJviw@mail.gmail.com>
 <67e7d6cc151647d0b7f89991caa46141@app-exch2.gov.yk.ca>,
 <CAC8Q8tKm2+0ii+CZipGeMQcHJmSRdJT-hnmxPTbwSHWZJ5QF3A@mail.gmail.com>
Message-ID: <1615781330638.26525@yukon.ca>

>You need to count tiles in the row, not pixels.

>
>ceil(126015/128)*3*8*128*128 = 387 118 080 = half a gigabyte.

Thank you! That made a huge difference. With GDAL_CACHEMAX=1024 it finished in about 40 minutes.

-Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210315/f4f3a376/attachment.html>

From matt.wilkie at yukon.ca  Sun Mar 14 21:11:05 2021
From: matt.wilkie at yukon.ca (mhw-at-yg)
Date: Sun, 14 Mar 2021 21:11:05 -0700 (MST)
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
In-Reply-To: <1615577875967-0.post@n6.nabble.com>
References: <1615573074305-0.post@n6.nabble.com>
 <1615577875967-0.post@n6.nabble.com>
Message-ID: <1615781465225-0.post@n6.nabble.com>

The source file is georeferenced, so from the docs it does sound like that is
supposed to be passed through to the tiles. When I'm back in the office I'll
try forcing the SRS and see what happens.

-Matt



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew at aitchison.me.uk  Mon Mar 15 01:21:56 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 15 Mar 2021 08:21:56 +0000 (GMT)
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
In-Reply-To: <1615573074305-0.post@n6.nabble.com>
References: <1615573074305-0.post@n6.nabble.com>
Message-ID: <ba64448-c939-4e6d-18ba-172afd3c9c0@aitchison.me.uk>

On Fri, 12 Mar 2021, mhw-at-yg wrote:

> Is it expected that `gdal_retile -of cog -ps 4096 4096 -t myoutdir
> infile.tif` creates files that are not georeferenced?
>
> Using Gdal from QGIS 3.16 on Win10.
>
> ~~~
> $ gdalinfo --version
> GDAL 3.1.4, released 2020/10/20
>
> $ gdalinfo u:.\SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers_01_01.tif.msk
> Driver: GTiff/GeoTIFF
> Files: u:.\SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers_01_01.tif.msk
> Size is 4096, 4096
> Metadata:
>  INTERNAL_MASK_FLAGS_1=2
>  INTERNAL_MASK_FLAGS_2=2
>  INTERNAL_MASK_FLAGS_3=2
> Image Structure Metadata:
>  COMPRESSION=DEFLATE
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 4096.0)
> Upper Right ( 4096.0,    0.0)
> Lower Right ( 4096.0, 4096.0)
> Center      ( 2048.0, 2048.0)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
> ~~~

Is the "main" or "image" file geo-referenced ?
It may be that the .tif.msk mask files are assumed to be the same as
the matching .tif file.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From Daniel.Evans at jbarisk.com  Mon Mar 15 02:35:34 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Mon, 15 Mar 2021 09:35:34 +0000
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?
In-Reply-To: <1615781080797.37078@yukon.ca>
References: <1615781080797.37078@yukon.ca>
Message-ID: <LO2P123MB4652F9E3199F6464EFC7CD59956C9@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>

I don?t think it?s particularly unusual for any compression algorithm to have this sort of behaviour once it?s ?maxed out?.

Running the in-built zstd benchmarks from the command line without any custom parameters ? so entirely separate of how GDAL uses it ? it shows your observed behaviour to an even greater extent, with most levels doing worse than level 1!

Level
Size
% Smaller than Level 1
1
3154783
0.00%
2
3130807
0.76%
3
3231415
-2.43%
4
3346308
-6.07%
5
3335646
-5.73%
6
3340284
-5.88%
7
3324298
-5.37%
8
3315170
-5.08%
9
3321085
-5.27%
10
3355473
-6.36%
11
3355932
-6.38%
12
3355857
-6.37%
13
3355401
-6.36%
14
3354678
-6.34%
15
3353801
-6.31%
16
3083731
2.25%
17
3142331
0.39%
18
3147466
0.23%
19
3146084
0.28%
20
3146548
0.26%
21
3145580
0.29%
22
3142972
0.37%

Table generated from output of `zstd -b1 -e22`, ?zstd command line interface 64-bits v1.4.7?.


Dr Daniel Evans
Software Developer

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Matt.Wilkie at yukon.ca
Sent: 15 March 2021 04:04
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?

So this is curious: output to Cloud optimized Geotiff with ZSTD compression to Level 17 is smaller than levels 18-22. Or at least that's my results when testing compression results with Gdal 3.1 via Qgis 3.18 on Windows 10. I expected compression levels to get smaller with higher levels, at expense of longer and longer computation time. Levels 1 to 16 do that. Even more curious than 17 being the smallest of the lot is that each step 18 to 22 is progressively larger, albeit by a miniscule amount.

Here's my results:

% smaller than biggest
Bytes
Filename
Compression
Predictor
Level
24.2%
200,968,821
cog-zstd-pyes-lev17.tif
zstd
yes
17
22.8%
204,567,155
cog-zstd-pyes-lev18.tif
zstd
yes
18
22.8%
204,594,678
cog-zstd-pyes-lev19.tif
zstd
yes
19
22.8%
204,594,678
cog-zstd-pyes-lev20.tif
zstd
yes
20
22.8%
204,626,722
cog-zstd-pyes-lev21.tif
zstd
yes
21
22.8%
204,635,985
cog-zstd-pyes-lev22.tif
zstd
yes
22
22.6%
205,026,301
cog-zstd-pyes-lev16.tif
zstd
yes
16
21.5%
208,039,012
cog-zstd-pyes-lev15.tif
zstd
yes
15
21.5%
208,094,559
cog-zstd-pyes-lev13.tif
zstd
yes
13
21.5%
208,094,560
cog-zstd-pyes-lev14.tif
zstd
yes
14
21.3%
208,714,731
cog-zstd-pyes-lev12.tif
zstd
yes
12
21.2%
208,989,301
cog-zstd-pyes-lev11.tif
zstd
yes
11
21.2%
208,989,994
cog-zstd-pyes-lev10.tif
zstd
yes
10
21.1%
209,071,549
cog-zstd-pyes-lev9.tif
zstd
yes
9
21.0%
209,453,858
cog-zstd-pyes-lev8.tif
zstd
yes
8
20.9%
209,634,360
cog-zstd-pyes-lev7.tif
zstd
yes
7
20.7%
210,182,178
cog-zstd-pyes-lev6.tif
zstd
yes
6
20.4%
210,992,074
cog-zstd-pyes-lev5.tif
zstd
yes
5
18.9%
214,894,175
cog-zstd-pyes-lev4.tif
zstd
yes
4
17.4%
218,911,762
cog-zstd-pyes-lev3.tif
lzw
2
3
16.6%
220,991,236
cog-dflt-p2.tif
deflate
2
13.0%
230,553,902
cog-zstd-pyes-lev2.tif
zstd
yes
2
11.6%
234,277,147
cog-zstd-pyes-lev1.tif
zstd
yes
1
5.7%
249,979,858
cog-dflt-p1.tif
deflate
1
0.0%
265,062,854
cog-lzw-p2.tif
lzw
2


Command line pattern:


gdal_translate ^

  -co compress=zstd ^

  -co predictor=yes ^

  -co level=3 ^

  -co num_threads=all_cpus ^

  -of cog ^

  mtn-view.tif ^

  mtn-view-cog-zstd-pyes-lev3.tif


Source image:

Name

AerialPhotos/AerialPhotos

URL

https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer

Source

crs='EPSG:3578' format='JPGPNG' layer='' url='https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer'

CRS

EPSG:3578 - NAD83 / Yukon Albers - Projected

Export extent

Upper Left, Lower Left, Upper Right, Lower Right

356750.816,  702590.026

356750.816,  699097.526

361572.583,  702590.026

361572.583,  699097.526

Pixel size

0.5m


Do others see the same thing?


?Cheers,


Matt Wilkie
Environment | Information Management & Technology | 867-667-8133 ? Yukon.ca<http://yukon.ca/>

T +44 (0)1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]  [Follow us on Twitter] <https://twitter.com/jbarisk>

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210315/46c88cd2/attachment-0001.html>

From even.rouault at spatialys.com  Mon Mar 15 04:57:30 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Mar 2021 12:57:30 +0100
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
In-Reply-To: <ba64448-c939-4e6d-18ba-172afd3c9c0@aitchison.me.uk>
References: <1615573074305-0.post@n6.nabble.com>
 <ba64448-c939-4e6d-18ba-172afd3c9c0@aitchison.me.uk>
Message-ID: <7ed0f886-1069-2d1b-edc8-722b6a066f93@spatialys.com>


> Is the "main" or "image" file geo-referenced ?
> It may be that the .tif.msk mask files are assumed to be the same as
> the matching .tif file.

yes, on creation of a .msk or .ovr, GDAL currently doesn't write any SRS 
or geotransform information into them. It could be appropriate however 
to do so. Someone may create an enhancement ticket about that.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From nextstopsun at gmail.com  Mon Mar 15 06:55:32 2021
From: nextstopsun at gmail.com (Next Stop)
Date: Mon, 15 Mar 2021 16:55:32 +0300
Subject: [gdal-dev] Save MVT tiles to a local MBTiles file
Message-ID: <D03BA38A-DB30-4FD5-BF57-4ED6E87303F6@gmail.com>

Can ogr2ogr be used to save MVT tiles from an HTTP server to a local MBTiles file? 
I just need to fetch tiles at given bbox and zoom levels and insert them to MBTiles DB without any format conversion or schema introspection. 
Seems like writing to mbtiles db with ogr is possible.
Can I use og2ogr without -oo metadata_file in this case?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210315/cfa2ca6e/attachment.html>

From even.rouault at spatialys.com  Mon Mar 15 15:56:03 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Mar 2021 23:56:03 +0100
Subject: [gdal-dev] Save MVT tiles to a local MBTiles file
In-Reply-To: <D03BA38A-DB30-4FD5-BF57-4ED6E87303F6@gmail.com>
References: <D03BA38A-DB30-4FD5-BF57-4ED6E87303F6@gmail.com>
Message-ID: <992737e0-8a08-2e05-5d03-d5c332af110c@spatialys.com>

Le 15/03/2021 ? 14:55, Next Stop a ?crit?:
> Can ogr2ogr be used to save MVT tiles from an HTTP server to a local 
> MBTiles file?
> I just need to fetch tiles at given bbox and zoom levels and insert 
> them to MBTiles DB without any format conversion or schema introspection.
> Seems like writing to mbtiles db with ogr is possible.
> Can I use og2ogr without -oo metadata_file in this case?

No, ogr2ogr will always go through the OGR data model converting input 
MVT tiles to OGRFeature and then generating new tiles from them. For 
what you want to accomplish, you need to do that "at hand" with your own 
code.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From idan at miara.com  Tue Mar 16 00:00:15 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 16 Mar 2021 09:00:15 +0200
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
Message-ID: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>

Hi all,

Having heard no further comments regarding RFC78
<https://github.com/OSGeo/gdal/pull/3260>.

Motion:

Adopt RFC 78: gdal-utils package
<https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst>
(formatted
version).

*A personal note*
The points I've mentioned in the motivation section have affected me
personally - Enough to spend a considerable time to write and
implement this RFC.
Other developers and users might be encountering the same issues and thus
would benefit from this RFC.

I have contributed a fair amount of Python code to gdal in the past year.
If you find my contributions to gdal
<https://github.com/OSGeo/gdal/pulls?q=is%3Apr+author%3Aidanmiara+>
valuable and want me to have more time to further contribute to gdal then
please accept this RFC even if you don't personally appreciate the
motinations I've mentioned.
Otherwise I would need to continue maintaining this branch to workaround
the issues I've mentioned (which is time consuming by itself because I need
to keep rebasing it and resolve conflicts), thus having less time to
actually contribute to gdal and improve the gdal-utils modules.

`gdal-utils` wheels that were built and uploaded by myself to address these
issues are already available in pypi <https://pypi.org/project/gdal-utils/>.
If this PR is accepted, I will give complete control over this pypi package
to the gdal project owners. Yanking "unofficial" gdal-utils packages is
accepted if necessary once this motion is passed and the first official
gdal-utils wheel is released on pypi.

Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210316/ad7f4dc0/attachment.html>

From ari.jolma at gmail.com  Tue Mar 16 07:42:21 2021
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 16 Mar 2021 16:42:21 +0200
Subject: [gdal-dev] libgdal depends on two libprojs, what's going on?
Message-ID: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>

I needed later libgdal so I added ubuntugi-unstable and installed 
libgdal-dev. Now I have both libgdal26 and libgdal28. But I assume 
something is wrong because I get from trying to use the libgdal28

(gdb) bt
#0? __GI_raise (sig=sig at entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50
#1? 0x00007ffff7c63859 in __GI_abort () at abort.c:79
#2? 0x00007ffff7cce3ee in __libc_message (action=action at entry=do_abort, 
fmt=fmt at entry=0x7ffff7df8285 "%s\n") at ../sysdeps/posix/libc_fatal.c:155
#3? 0x00007ffff7cd647c in malloc_printerr (str=str at entry=0x7ffff7df64ae 
"free(): invalid pointer") at malloc.c:5347
#4? 0x00007ffff7cd7cac in _int_free (av=<optimized out>, p=<optimized 
out>, have_lock=0) at malloc.c:4173
#5? 0x00007ffff01aec20 in 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() () from 
/usr/lib/x86_64-linux-gnu/libproj.so.15
#6? 0x00007ffff7c87a27 in __run_exit_handlers (status=0, 
listp=0x7ffff7e29718 <__exit_funcs>, 
run_list_atexit=run_list_atexit at entry=true,
 ??? run_dtors=run_dtors at entry=true) at exit.c:108
#7? 0x00007ffff7c87be0 in __GI_exit (status=<optimized out>) at exit.c:139
#8? 0x000055555559d426 in main ()

Maybe it's because libgdal seems to use two libprojs:

ldd /usr/lib/libgdal.so.28.0.1 | grep libproj
 ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
(0x00007f70d3343000)
 ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
(0x00007f70cef6f000)

Is there anything I can do except try things on a virtual machine or 
something like that?

Ari



From even.rouault at spatialys.com  Tue Mar 16 07:49:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Mar 2021 15:49:16 +0100
Subject: [gdal-dev] libgdal depends on two libprojs, what's going on?
In-Reply-To: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>
References: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>
Message-ID: <510b5f1b-5889-e9f3-ac5c-6878e3b5c725@spatialys.com>

Ari,
> Maybe it's because libgdal seems to use two libprojs:
>
> ldd /usr/lib/libgdal.so.28.0.1 | grep libproj
> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
> (0x00007f70d3343000)
> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
> (0x00007f70cef6f000)
>
> Is there anything I can do except try things on a virtual machine or 
> something like that?

See https://lists.osgeo.org/pipermail/gdal-dev/2021-March/053627.html

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From ari.jolma at gmail.com  Tue Mar 16 07:53:11 2021
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 16 Mar 2021 16:53:11 +0200
Subject: [gdal-dev] libgdal depends on two libprojs, what's going on?
In-Reply-To: <510b5f1b-5889-e9f3-ac5c-6878e3b5c725@spatialys.com>
References: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>
 <510b5f1b-5889-e9f3-ac5c-6878e3b5c725@spatialys.com>
Message-ID: <387a77fd-7a0e-a2b4-1b14-e50ac0f62d2a@gmail.com>

Even Rouault kirjoitti 16.3.2021 klo 16.49:
> Ari,
>> Maybe it's because libgdal seems to use two libprojs:
>>
>> ldd /usr/lib/libgdal.so.28.0.1 | grep libproj
>> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
>> (0x00007f70d3343000)
>> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
>> (0x00007f70cef6f000)
>>
>> Is there anything I can do except try things on a virtual machine or 
>> something like that?
>
> See https://lists.osgeo.org/pipermail/gdal-dev/2021-March/053627.html


ok, as this was with apt install from ubuntugis-unstable and I did not 
build anything, I guess its them to blame?

Ari


>
> Even
>

From ari.jolma at gmail.com  Tue Mar 16 08:01:34 2021
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 16 Mar 2021 17:01:34 +0200
Subject: [gdal-dev] libgdal depends on two libprojs, what's going on?
In-Reply-To: <387a77fd-7a0e-a2b4-1b14-e50ac0f62d2a@gmail.com>
References: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>
 <510b5f1b-5889-e9f3-ac5c-6878e3b5c725@spatialys.com>
 <387a77fd-7a0e-a2b4-1b14-e50ac0f62d2a@gmail.com>
Message-ID: <4e45ba02-a877-b87c-c1c3-4d1f0028edbe@gmail.com>

Ari Jolma kirjoitti 16.3.2021 klo 16.53:
> Even Rouault kirjoitti 16.3.2021 klo 16.49:
>> Ari,
>>> Maybe it's because libgdal seems to use two libprojs:
>>>
>>> ldd /usr/lib/libgdal.so.28.0.1 | grep libproj
>>> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
>>> (0x00007f70d3343000)
>>> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
>>> (0x00007f70cef6f000)
>>>
>>> Is there anything I can do except try things on a virtual machine or 
>>> something like that?
>>
>> See https://lists.osgeo.org/pipermail/gdal-dev/2021-March/053627.html
>
>
> ok, as this was with apt install from ubuntugis-unstable and I did not 
> build anything, I guess its them to blame?


It seems to have been a transient problem. It is gone now as I updated 
all packages.


>
> Ari
>
>
>>
>> Even
>>

From even.rouault at spatialys.com  Tue Mar 16 08:01:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Mar 2021 16:01:42 +0100
Subject: [gdal-dev] libgdal depends on two libprojs, what's going on?
In-Reply-To: <387a77fd-7a0e-a2b4-1b14-e50ac0f62d2a@gmail.com>
References: <09a6905f-0003-62c5-c7a8-09f2bef6c97a@gmail.com>
 <510b5f1b-5889-e9f3-ac5c-6878e3b5c725@spatialys.com>
 <387a77fd-7a0e-a2b4-1b14-e50ac0f62d2a@gmail.com>
Message-ID: <c77c9697-0164-c1bb-cb0d-9b6f6805099f@spatialys.com>


Le 16/03/2021 ? 15:53, Ari Jolma a ?crit?:
> Even Rouault kirjoitti 16.3.2021 klo 16.49:
>> Ari,
>>> Maybe it's because libgdal seems to use two libprojs:
>>>
>>> ldd /usr/lib/libgdal.so.28.0.1 | grep libproj
>>> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
>>> (0x00007f70d3343000)
>>> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
>>> (0x00007f70cef6f000)
>>>
>>> Is there anything I can do except try things on a virtual machine or 
>>> something like that?
>>
>> See https://lists.osgeo.org/pipermail/gdal-dev/2021-March/053627.html
>
>
> ok, as this was with apt install from ubuntugis-unstable and I did not 
> build anything, I guess its them to blame?
>
Indeed, they probably need to rebuild libspatialite and libgeotiff 
against their custom libproj, and provide them. CC'ing Angelos

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Tue Mar 16 08:38:12 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 16 Mar 2021 15:38:12 +0000
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?
In-Reply-To: <LO2P123MB4652F9E3199F6464EFC7CD59956C9@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
References: <1615781080797.37078@yukon.ca>
 <LO2P123MB4652F9E3199F6464EFC7CD59956C9@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <89481e1fae524423accfbf3670a9e70e@app-exch2.gov.yk.ca>

Oh that?s so weird. Well that puts my take-away as: just use Level=17 and forget the rest exist!

-Matt

From: Daniel Evans <Daniel.Evans at jbarisk.com>
Sent: March 15, 2021 2:36 AM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>; gdal-dev at lists.osgeo.org
Subject: RE: ZSTD compression level 17 smaller than 18+?


*** External email: Do not click on links or attachments except from trusted senders. ***

******************************************************************************************



I don?t think it?s particularly unusual for any compression algorithm to have this sort of behaviour once it?s ?maxed out?.

Running the in-built zstd benchmarks from the command line without any custom parameters ? so entirely separate of how GDAL uses it ? it shows your observed behaviour to an even greater extent, with most levels doing worse than level 1!

Level

Size

% Smaller than Level 1

1

3154783

0.00%

2

3130807

0.76%

3

3231415

-2.43%

4

3346308

-6.07%

5

3335646

-5.73%

6

3340284

-5.88%

7

3324298

-5.37%

8

3315170

-5.08%

9

3321085

-5.27%

10

3355473

-6.36%

11

3355932

-6.38%

12

3355857

-6.37%

13

3355401

-6.36%

14

3354678

-6.34%

15

3353801

-6.31%

16

3083731

2.25%

17

3142331

0.39%

18

3147466

0.23%

19

3146084

0.28%

20

3146548

0.26%

21

3145580

0.29%

22

3142972

0.37%


Table generated from output of `zstd -b1 -e22`, ?zstd command line interface 64-bits v1.4.7?.


Dr Daniel Evans
Software Developer

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Matt.Wilkie at yukon.ca<mailto:Matt.Wilkie at yukon.ca>
Sent: 15 March 2021 04:04
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?

So this is curious: output to Cloud optimized Geotiff with ZSTD compression to Level 17 is smaller than levels 18-22. Or at least that's my results when testing compression results with Gdal 3.1 via Qgis 3.18 on Windows 10. I expected compression levels to get smaller with higher levels, at expense of longer and longer computation time. Levels 1 to 16 do that. Even more curious than 17 being the smallest of the lot is that each step 18 to 22 is progressively larger, albeit by a miniscule amount.

Here's my results:

% smaller than biggest

Bytes

Filename

Compression

Predictor

Level

24.2%

200,968,821

cog-zstd-pyes-lev17.tif

zstd

yes

17

22.8%

204,567,155

cog-zstd-pyes-lev18.tif

zstd

yes

18

22.8%

204,594,678

cog-zstd-pyes-lev19.tif

zstd

yes

19

22.8%

204,594,678

cog-zstd-pyes-lev20.tif

zstd

yes

20

22.8%

204,626,722

cog-zstd-pyes-lev21.tif

zstd

yes

21

22.8%

204,635,985

cog-zstd-pyes-lev22.tif

zstd

yes

22

22.6%

205,026,301

cog-zstd-pyes-lev16.tif

zstd

yes

16

21.5%

208,039,012

cog-zstd-pyes-lev15.tif

zstd

yes

15

21.5%

208,094,559

cog-zstd-pyes-lev13.tif

zstd

yes

13

21.5%

208,094,560

cog-zstd-pyes-lev14.tif

zstd

yes

14

21.3%

208,714,731

cog-zstd-pyes-lev12.tif

zstd

yes

12

21.2%

208,989,301

cog-zstd-pyes-lev11.tif

zstd

yes

11

21.2%

208,989,994

cog-zstd-pyes-lev10.tif

zstd

yes

10

21.1%

209,071,549

cog-zstd-pyes-lev9.tif

zstd

yes

9

21.0%

209,453,858

cog-zstd-pyes-lev8.tif

zstd

yes

8

20.9%

209,634,360

cog-zstd-pyes-lev7.tif

zstd

yes

7

20.7%

210,182,178

cog-zstd-pyes-lev6.tif

zstd

yes

6

20.4%

210,992,074

cog-zstd-pyes-lev5.tif

zstd

yes

5

18.9%

214,894,175

cog-zstd-pyes-lev4.tif

zstd

yes

4

17.4%

218,911,762

cog-zstd-pyes-lev3.tif

lzw

2

3

16.6%

220,991,236

cog-dflt-p2.tif

deflate

2

13.0%

230,553,902

cog-zstd-pyes-lev2.tif

zstd

yes

2

11.6%

234,277,147

cog-zstd-pyes-lev1.tif

zstd

yes

1

5.7%

249,979,858

cog-dflt-p1.tif

deflate

1

0.0%

265,062,854

cog-lzw-p2.tif

lzw

2



Command line pattern:


gdal_translate ^

  -co compress=zstd ^

  -co predictor=yes ^

  -co level=3 ^

  -co num_threads=all_cpus ^

  -of cog ^

  mtn-view.tif ^

  mtn-view-cog-zstd-pyes-lev3.tif


Source image:

Name


AerialPhotos/AerialPhotos


URL


https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer


Source


crs='EPSG:3578' format='JPGPNG' layer='' url='https://mapservices.gov.yk.ca/imagery/rest/services/AerialPhotos/AerialPhotos/ImageServer'


CRS


EPSG:3578 - NAD83 / Yukon Albers - Projected


Export extent


Upper Left, Lower Left, Upper Right, Lower Right

356750.816,  702590.026

356750.816,  699097.526

361572.583,  702590.026

361572.583,  699097.526


Pixel size


0.5m



Do others see the same thing?


?Cheers,


Matt Wilkie
Environment | Information Management & Technology | 867-667-8133 ? Yukon.ca<http://yukon.ca/>

T +44 (0)1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]  [Follow us on Twitter] <https://twitter.com/jbarisk>


Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210316/f2bb83f3/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Tue Mar 16 09:45:59 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 16 Mar 2021 16:45:59 +0000
Subject: [gdal-dev] gdal_retile: output isn't georeferenced?
In-Reply-To: <ba64448-c939-4e6d-18ba-172afd3c9c0@aitchison.me.uk>
References: <1615573074305-0.post@n6.nabble.com>
 <ba64448-c939-4e6d-18ba-172afd3c9c0@aitchison.me.uk>
Message-ID: <8b6e8a6472e84a59ac33a651d3948ba4@app-exch2.gov.yk.ca>

> Is the "main" or "image" file geo-referenced ?
> It may be that the .tif.msk mask files are assumed to be the same as the 
> matching .tif file.

Ahh yes that's it. The tile main image is georeferenced and it's just the mask on it's own which is not. Thanks for pointing that out.

-Matt


From tobias.wendorff at tu-dortmund.de  Tue Mar 16 11:23:43 2021
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Tue, 16 Mar 2021 19:23:43 +0100
Subject: [gdal-dev] ZSTD compression level 17 smaller than 18+?
In-Reply-To: <1615781080797.37078@yukon.ca>
References: <1615781080797.37078@yukon.ca>
Message-ID: <379b6e34-de50-16a2-be8c-60eb0cc6cb5d@tu-dortmund.de>

Am 15.03.2021 um 05:04 schrieb Matt.Wilkie at yukon.ca:

 >> Here's my results:

I'm also using zstd for lots of stuff. It's really performing very well.

But it often behaves totally unpredictably. For example, I get a better 
compression ratio with SQL files in level 1 than with level 3. And level 
6 is significantly slower than level 4 with the same compression ratio.

But overall performance is always better than its competitors.

From matt.wilkie at yukon.ca  Tue Mar 16 13:28:58 2021
From: matt.wilkie at yukon.ca (mhw-at-yg)
Date: Tue, 16 Mar 2021 13:28:58 -0700 (MST)
Subject: [gdal-dev] nearblack on multi GB images very slow
In-Reply-To: <1615575050335-0.post@n6.nabble.com>
References: <1615575050335-0.post@n6.nabble.com>
Message-ID: <1615926538838-0.post@n6.nabble.com>

mhw-at-yg wrote
> I have a lot of multi GB images that are unfortunately jpeg-in-geotiff
> encoded before nodata was properly defined. As a result they all suffer
> from
> the jagged edges problem.
> &lt;http://osgeo-org.1560.x6.nabble.com/file/t192661/WVpPW.png&gt; 
> 
> I've defined a method for adding a nodata mask side-car file that works
> around this: 
> https://gis.stackexchange.com/questions/387877/add-a-nodata-mask-or-alpha-band-to-read-only-image/

Here's a windows bat file to recursively create masks for all TIF images in
a directory tree. It's for the scenario where you can write to the folder
where the images are stored:
https://github.com/maphew/gdal-plus/blob/master/bin/readonly-nearblack.bat



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Matt.Wilkie at yukon.ca  Tue Mar 16 13:45:43 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 16 Mar 2021 20:45:43 +0000
Subject: [gdal-dev] lossless jpeg crop in gdal?
Message-ID: <06c7da14be9b4ae9965f595a20fff7be@app-exch2.gov.yk.ca>

I recently learned that jpegtran from the JPEG library has the ability to crop and save a new jpeg losslessly:

These transformations are each completely lossless and reversible. The transformations on the image data comprise:
?         eliminate non-standard application-specific data inserted by some image programs,
?         perform certain transformations on a file, such as:
o    discarding of colour channels (conversion to greyscale),
o    rotating and flipping in steps of 90 degrees,
o    cropping at image block borders (every 8?8 or 16?16 pixels),
o    rescaling.[7]<https://en.wikipedia.org/wiki/Libjpeg#cite_note-jpegtran-7>
These are lossless and reversible only regarding the image data that is kept. Reencoding with repeated lossy quantisation of the image data (generation loss) does not take place.

-- https://en.wikipedia.org/wiki/Libjpeg#jpegtran


Can GDAL take advantage of this for jpeg-in-geotiff images?

Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210316/832e684b/attachment.html>

From even.rouault at spatialys.com  Tue Mar 16 14:06:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Mar 2021 22:06:45 +0100
Subject: [gdal-dev] lossless jpeg crop in gdal?
In-Reply-To: <06c7da14be9b4ae9965f595a20fff7be@app-exch2.gov.yk.ca>
References: <06c7da14be9b4ae9965f595a20fff7be@app-exch2.gov.yk.ca>
Message-ID: <c2b7d0e4-ae95-d1db-2db4-160a5e54c432@spatialys.com>

Matt,

Le 16/03/2021 ? 21:45, Matt.Wilkie at yukon.ca a ?crit?:
>
> I recently learned that *jpegtran* from the JPEG library has the 
> ability to crop and save a new jpeg losslessly:
>
> ?[...]
>
> Can GDAL take advantage of this for jpeg-in-geotiff images?
>
to some limited extent, yes. I thought this was documented in 
https://gdal.org/drivers/raster/gtiff.html but I can't find it.

So the most relevant doc is from this comment of the GeoTIFF driver

 ??? // When CreateCopy'ing() from a JPEG dataset, and asking for 
COMPRESS=JPEG,
 ??? // use DCT coefficients (unless other options are incompatible, like
 ??? // strip/tile dimensions, specifying JPEG_QUALITY option, incompatible
 ??? // PHOTOMETRIC with the source colorspace, etc.) to avoid the lossy 
steps
 ??? // involved by decompression/recompression.

Basically, you can do JPEG to JPEG-in-TIFF lossless transcoding if doing:

gdal_translate in.jpg out.tif -co COMPRESS=JPEG [[-co TILED=YES] [-co 
BLOCKXSIZE=...] [-co BLOCKYSIZE=...]]

where the block size should be a multiple of 16.

Most other gdal_translate generic option (like -projwin / -srcwin) or 
GTiff driver creation option are incompatible with the implementation of 
this special mode (subsetting could be in theory possible on boundaries 
of JPEG DCT blocks, but isn't implemented).

If adding "--debug on", you should see a line "GTiff: Using special copy 
mode from a JPEG dataset" when this lossless transcoding mode works. 
Otherwise the generic JPEG decoding / recoding is used.

JPEG-in-TIFF to JPEG-in-TIFF or JPEG lossless transcodingcould also be 
in theory supported, but isn't implemented . With modest effort though 
with some scripting it is possible to extract a JPEG file from a tiled 
JPEG-in-TIFF file by reassembling the TIFF tile content with the 
huffman/quantization tables in the JPEGTABLE TIFF tag.

If someone wants to propose a pull request with a doc addition to the 
GTiff driver doc with the above content, that'd be welcome.

Even

> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | _Yukon.ca <http://yukon.ca/>_
>
> /Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210316/fea85309/attachment.html>

From Matt.Wilkie at yukon.ca  Wed Mar 17 14:22:33 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 17 Mar 2021 21:22:33 +0000
Subject: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?
Message-ID: <27d922a6e630450fb2b28ffa46f50c58@app-exch2.gov.yk.ca>

SPOT 6/7 satellite imagery is captured with a dynamic range of 12 bits per pixel per channel (ref<https://eos.com/spot-6-and-7/>). However almost all of the SPOT imagery I have seen in use has been 8 bits per channel, and split into RGB natural colour (Bands-321) and Near-infrared-RG false colour (Bands-432). What information is lost in this 12 to 8 bits conversion?

I'm wondering if we should be altering our request for purchase specifications to deliver the full bit depth.

Although I'm referencing SPOT imagery specifically the question is general and really applies to any satellite or sensor system.
Cross-post: https://gis.stackexchange.com/questions/390315/what-is-lost-when-converting-12-bit-imagery-to-8-bit


Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210317/1da6397f/attachment.html>

From patrick.mckendree.young at gmail.com  Wed Mar 17 20:13:09 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 17 Mar 2021 21:13:09 -0600
Subject: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?
In-Reply-To: <27d922a6e630450fb2b28ffa46f50c58@app-exch2.gov.yk.ca>
References: <27d922a6e630450fb2b28ffa46f50c58@app-exch2.gov.yk.ca>
Message-ID: <CADXYQQ4zDbtL9C0XtoR2fTnc7x42Cn4+Y6tGceKLNhdo2cybDw@mail.gmail.com>

I would guess you usually see 8bit RGB images because that is what your
monitor can display.   What is lost is a deeper question, per channel you
have to squeeze the original [0 - 4095] pixel value range per channel down
to [0 -255], and there are lots of ways to do it.  The problem is sometimes
called tone mapping
<https://en.wikipedia.org/wiki/Tone_mapping#:~:text=Tone%20mapping%20is%20a%20technique,a%20more%20limited%20dynamic%20range.>.
Planet had a nice blog post describing how they manually convert their
imagery to 8bit RGB here <https://www.planet.com/pulse/color-correction/>.
If you were using the imagery for analytic things (e.g. converting pixel
values to reflectance) you'd probably not want the 8bit product.

To get GDAL in the mix, note that gdal_translate can do simple tone mapping
for you:
https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale

Patrick





On Wed, Mar 17, 2021 at 3:23 PM <Matt.Wilkie at yukon.ca> wrote:

> SPOT 6/7 satellite imagery is captured with a dynamic range of 12 bits per
> pixel per channel (ref <https://eos.com/spot-6-and-7/>). However almost
> all of the SPOT imagery I have seen in use has been 8 bits per channel, and
> split into RGB natural colour (Bands-321) and Near-infrared-RG false colour
> (Bands-432). What information is lost in this 12 to 8 bits conversion?
>
> I'm wondering if we should be altering our request for purchase
> specifications to deliver the full bit depth.
>
> *Although I'm referencing SPOT imagery specifically the question is
> general and really applies to any satellite or sensor system.*
>
> Cross-post:
> https://gis.stackexchange.com/questions/390315/what-is-lost-when-converting-12-bit-imagery-to-8-bit
>
>
>
>
>
> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>
> *Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210317/bf855262/attachment.html>

From warmerdam at pobox.com  Wed Mar 17 20:29:21 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 17 Mar 2021 23:29:21 -0400
Subject: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?
In-Reply-To: <CADXYQQ4zDbtL9C0XtoR2fTnc7x42Cn4+Y6tGceKLNhdo2cybDw@mail.gmail.com>
References: <27d922a6e630450fb2b28ffa46f50c58@app-exch2.gov.yk.ca>
 <CADXYQQ4zDbtL9C0XtoR2fTnc7x42Cn4+Y6tGceKLNhdo2cybDw@mail.gmail.com>
Message-ID: <CA+YzLBecK4QXb7d8se++yx8iDR3LkwYDmCgibHmq-uswBjftTQ@mail.gmail.com>

Patrick,

FWIW, Rob's post is on the process he uses in Photoshop to prepare images
for various venues.  For imagery published through the platform we (Planet)
do not use per-image white-point and black-point (or we would not have day
to day, and scene to scene consistency).  We do apply color curves Rob
prepared in our automated process but with "fixed" black/white point which
results in an automated 8bit RGB product that tends to be very suboptimal
in dark or bright areas.     The imagery Planet shows in our web-explorer
interface is served from highly compressed JPEG-in-TIFF adding an
additional layer of image damage. :-)  While that pains me, we are keeping
around nearly 3 billion scenes online at nearly full resolution for fast
visualization so some compromises have to be made.

Beyond nit-picking, I think my point is:
 - given 12bit "rawer" data you have the opportunity to do careful scene
dependent conversion to 8bit in a way that best brings out the details
available in the source data if you have the time and patience.
 - having this process done for you in advance by a skilled supplier
(perhaps in such a way as to maintain reasonable consistency for large area
coverages) may actually save you a lot of work if you mostly just want to
fairly generic visualization - and it might even be a better visualization
than you would do yourself if you aren't going to do a lot of work.

Best regards,
Frank

On Wed, Mar 17, 2021 at 11:13 PM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> I would guess you usually see 8bit RGB images because that is what your
> monitor can display.   What is lost is a deeper question, per channel you
> have to squeeze the original [0 - 4095] pixel value range per channel down
> to [0 -255], and there are lots of ways to do it.  The problem is sometimes
> called tone mapping
> <https://en.wikipedia.org/wiki/Tone_mapping#:~:text=Tone%20mapping%20is%20a%20technique,a%20more%20limited%20dynamic%20range.>.
> Planet had a nice blog post describing how they manually convert their
> imagery to 8bit RGB here <https://www.planet.com/pulse/color-correction/>.
> If you were using the imagery for analytic things (e.g. converting pixel
> values to reflectance) you'd probably not want the 8bit product.
>
> To get GDAL in the mix, note that gdal_translate can do simple tone
> mapping for you:
> https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale
>
> Patrick
>
>
>
>
>
> On Wed, Mar 17, 2021 at 3:23 PM <Matt.Wilkie at yukon.ca> wrote:
>
>> SPOT 6/7 satellite imagery is captured with a dynamic range of 12 bits
>> per pixel per channel (ref <https://eos.com/spot-6-and-7/>). However
>> almost all of the SPOT imagery I have seen in use has been 8 bits per
>> channel, and split into RGB natural colour (Bands-321) and Near-infrared-RG
>> false colour (Bands-432). What information is lost in this 12 to 8 bits
>> conversion?
>>
>> I'm wondering if we should be altering our request for purchase
>> specifications to deliver the full bit depth.
>>
>> *Although I'm referencing SPOT imagery specifically the question is
>> general and really applies to any satellite or sensor system.*
>>
>> Cross-post:
>> https://gis.stackexchange.com/questions/390315/what-is-lost-when-converting-12-bit-imagery-to-8-bit
>>
>>
>>
>>
>>
>> *Matt Wilkie*
>>
>> Geomatics Analyst
>>
>> Environment | Technology, Innovation and Mapping
>>
>> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>>
>> *Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.*
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210317/26cba4f2/attachment-0001.html>

From rajeshreddy82 at gmail.com  Wed Mar 17 22:01:20 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 17 Mar 2021 22:01:20 -0700 (MST)
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at a
 time
Message-ID: <1616043680903-0.post@n6.nabble.com>

Developers,

We came to know that OSGeo.OGR.Geometry is having the *Union *method which
allows to the union of the two geometries (code snippet below). But this
allows us one by one. How to union the multiple geometries (say 1000
geometries) at a time? Any methods or libraries in GDAL?

OSGeo.OGR.Geometry g1 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......
OSGeo.OGR.Geometry g2 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......
OSGeo.OGR.Geometry g3 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......

OSGeo.OGR.Geometry unionGeometry = (g1.Union(g2)).Union(g3);

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Mar 18 04:08:59 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Mar 2021 12:08:59 +0100
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at
 a time
In-Reply-To: <1616043680903-0.post@n6.nabble.com>
References: <1616043680903-0.post@n6.nabble.com>
Message-ID: <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>

Rajesh,

Use geom_collection.UnionCascaded() where geom_collection is a 
GeometryCollection / MultiPolygon of your many polygons. See 
https://github.com/OSGeo/gdal/blob/5fcc5dd5995af063065c253387bd9c767aeb8130/autotest/ogr/ogr_geos.py#L336

Even

Le 18/03/2021 ? 06:01, MRRAJESH a ?crit?:
> Developers,
>
> We came to know that OSGeo.OGR.Geometry is having the *Union *method which
> allows to the union of the two geometries (code snippet below). But this
> allows us one by one. How to union the multiple geometries (say 1000
> geometries) at a time? Any methods or libraries in GDAL?
>
> OSGeo.OGR.Geometry g1 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......
> OSGeo.OGR.Geometry g2 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......
> OSGeo.OGR.Geometry g3 = OSGeo.OGR.Geometry.CreateFromWkt("POLYGON(......
>
> OSGeo.OGR.Geometry unionGeometry = (g1.Union(g2)).Union(g3);
>
> Regards,
> Rajesh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From evert.etienne at sitemark.com  Thu Mar 18 04:20:32 2021
From: evert.etienne at sitemark.com (Evert Etienne (SITEMARK))
Date: Thu, 18 Mar 2021 11:20:32 +0000
Subject: [gdal-dev] Converting DEM height values from feet to meter
In-Reply-To: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>
References: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>
Message-ID: <4FC1FAC9-BA85-4E00-AE5A-1FAECAD52965@sitemark.com>

For reference, I decided to go for a simple gdal_calc with `f"--calc=A*{factor}?`

> On 12 Mar 2021, at 20:43, Evert Etienne (SITEMARK) <evert.etienne at sitemark.com> wrote:
> 
> Hello all,
> 
> I was wondering what the best or recommended way was to convert the vertical unit of a DEM/DSM. I am able to use gdal_translate, gdal_calc.py, GDAL python bindings or rasterio. I will afterwards be tiling using gdal2tiles.
> Any pointers would be appreciated. 
> 
> Greetings
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C6c3aa10464d049460cdb08d8e58f2fb1%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637511750448796572%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=TPf74UL%2B%2FL%2FyfIRFrJDDPZ0wy8ZxDOx6MTDQFPVOiwU%3D&amp;reserved=0


From even.rouault at spatialys.com  Thu Mar 18 04:38:55 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Mar 2021 12:38:55 +0100
Subject: [gdal-dev] Converting DEM height values from feet to meter
In-Reply-To: <4FC1FAC9-BA85-4E00-AE5A-1FAECAD52965@sitemark.com>
References: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>
 <4FC1FAC9-BA85-4E00-AE5A-1FAECAD52965@sitemark.com>
Message-ID: <32a7eba0-8fe3-0872-611d-038571260cc6@spatialys.com>

"gdal_translate -scale 0 1 0 factor in out" could also be used. As a 
bonus point, this works with VRT as an output if you don't want to 
materialize the intermediate file.

Even

Le 18/03/2021 ? 12:20, Evert Etienne (SITEMARK) a ?crit?:
> For reference, I decided to go for a simple gdal_calc with `f"--calc=A*{factor}?`
>
>> On 12 Mar 2021, at 20:43, Evert Etienne (SITEMARK) <evert.etienne at sitemark.com> wrote:
>>
>> Hello all,
>>
>> I was wondering what the best or recommended way was to convert the vertical unit of a DEM/DSM. I am able to use gdal_translate, gdal_calc.py, GDAL python bindings or rasterio. I will afterwards be tiling using gdal2tiles.
>> Any pointers would be appreciated.
>>
>> Greetings
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C6c3aa10464d049460cdb08d8e58f2fb1%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637511750448796572%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=TPf74UL%2B%2FL%2FyfIRFrJDDPZ0wy8ZxDOx6MTDQFPVOiwU%3D&amp;reserved=0
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From adzor.verhaagen at cgi.com  Thu Mar 18 05:48:55 2021
From: adzor.verhaagen at cgi.com (Adzorv1)
Date: Thu, 18 Mar 2021 05:48:55 -0700 (MST)
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
Message-ID: <1616071735841-0.post@n6.nabble.com>

For some time i have been trying to install the latest version of GDAL or
anything above 3.1.0 on my ubuntu 20.04 system, unfortunately the version
that keeps being installed is 3.0.4 which is outdated for the uses we need.
I have followed several online guides but keep hitting the same issue.

if i try to run:
pip3 install GDAL==3.1.0

I get a huge red wall of errors with the final line stating that the wheel
failed to build.

any suggestions would be really appreciated



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From osgeo.mailinglist at gmail.com  Thu Mar 18 08:07:07 2021
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 18 Mar 2021 16:07:07 +0100
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <1616071735841-0.post@n6.nabble.com>
References: <1616071735841-0.post@n6.nabble.com>
Message-ID: <CACPZzQ1pO_1Z4QKwwwRcd6=oFHjgABwZgZarHtyeTKSn=--gYA@mail.gmail.com>

Hi,

First, be sure to "pip3 install -U pip" to get latest pip as got some
issues with wheels build because was using outdated pip.

In https://pypi.org/project/GDAL/, there is a mention that gdal python
bindings have dependencies e.g

* libgdal (3.2.2 or greater) and header files (gdal-devel)
* numpy (1.0.0 or greater) and header files (numpy-devel) (not explicitly
required, but many examples and utilities will not work without it)

For 3.1, you will need libgdal 3.1 and headers files

The alternative to get a recent gdal without pain is to use conda to
install the latest version but I do not know the environment around e.g how
you need to link to others software you need to use

# With conda already installed
conda config --add channels conda-forge
conda create --name gdal_latest -y
conda activate gdal_latest
# get a list of available GDAL versions
conda search gdal --channel conda-forge
conda install -c conda-forge gdal==3.2.2 -y


Regards

Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210318/a5e9c3f2/attachment.html>

From pwillis at aslenv.com  Thu Mar 18 08:17:47 2021
From: pwillis at aslenv.com (pwillis at aslenv.com)
Date: Thu, 18 Mar 2021 08:17:47 -0700
Subject: [gdal-dev] SQLite3 Compile Issue With Visual Studio Community 2019
Message-ID: <000001d71c09$db0329e0$91097da0$@aslenv.com>

Hello,

When compiling gdal-3.2.2  I get an error due to a missing SQLLite3 link
library.
Downloads from the SQLLite site do not appear to provide, or compile to, a
'sqlite3.lib'  file at all.

Is there any way to disable the sqlite3 feature in  the gdal build?
Alternately, where is the 'sqlite2.lib' coming from that is expected by the
3.2.2 build ? 

Error dump is below.

Thanks for any info.

 



---------------------------


1>   Creating library gdal_i_d.lib and object gdal_i_d.exp
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_close referenced in function "private: bool __cdecl
osgeo::proj::DiskChunkCache::initialize(void)"
(?initialize at DiskChunkCache@proj at osgeo@@AEAA_NXZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_close
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_exec referenced in function "private: bool __cdecl
osgeo::proj::DiskChunkCache::initialize(void)"
(?initialize at DiskChunkCache@proj at osgeo@@AEAA_NXZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_last_insert_rowid referenced in function "public: void
__cdecl osgeo::proj::NetworkChunkCache::insert(struct pj_ctx *,class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,unsigned __int64,class std::vector<unsigned
char,class std::allocator<unsigned char> > &&)"
(?insert at NetworkChunkCache@proj at osgeo@@QEAAXPEAUpj_ctx@@AEBV?$basic_string at D
U?$char_traits at D@std@@V?$allocator at D@2@@std@@_K$$QEAV?$vector at EV?$allocator@
E at std@@@6@@Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_get_table referenced in function "private: bool __cdecl
osgeo::proj::DiskChunkCache::initialize(void)"
(?initialize at DiskChunkCache@proj at osgeo@@AEAA_NXZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_free_table referenced in function "private: bool __cdecl
osgeo::proj::DiskChunkCache::initialize(void)"
(?initialize at DiskChunkCache@proj at osgeo@@AEAA_NXZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_snprintf referenced in function "public: static struct
PROJ_NETWORK_HANDLE * __cdecl osgeo::proj::CurlFileHandle::open(struct
pj_ctx *,char const *,unsigned __int64,unsigned __int64,void *,unsigned
__int64 *,unsigned __int64,char *,void *)"
(?open at CurlFileHandle@proj at osgeo@@SAPEAUPROJ_NETWORK_HANDLE@@PEAUpj_ctx@@PEB
D_K2PEAXPEA_K2PEAD3 at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_open_v2 referenced in function "private: bool __cdecl
osgeo::proj::DiskChunkCache::initialize(void)"
(?initialize at DiskChunkCache@proj at osgeo@@AEAA_NXZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_open_v2
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_errmsg referenced in function proj_is_download_needed
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_errmsg
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_prepare_v2 referenced in function "public: class
std::unique_ptr<class osgeo::proj::SQLiteStatement,struct
std::default_delete<class osgeo::proj::SQLiteStatement> > __cdecl
osgeo::proj::DiskChunkCache::prepare(char const *)"
(?prepare at DiskChunkCache@proj at osgeo@@QEAA?AV?$unique_ptr at VSQLiteStatement@pr
oj at osgeo@@U?$default_delete at VSQLiteStatement@proj at osgeo@@@std@@@std@@PEBD at Z)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_prepare_v2
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_bind_blob referenced in function "public: void __cdecl
osgeo::proj::SQLiteStatement::bindBlob(void const *,unsigned __int64)"
(?bindBlob at SQLiteStatement@proj at osgeo@@QEAAXPEBX_K at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_bind_int64 referenced in function "public: void __cdecl
osgeo::proj::SQLiteStatement::bindInt64(__int64)"
(?bindInt64 at SQLiteStatement@proj at osgeo@@QEAAX_J at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_bind_null referenced in function "public: void __cdecl
osgeo::proj::SQLiteStatement::bindNull(void)"
(?bindNull at SQLiteStatement@proj at osgeo@@QEAAXXZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_bind_text referenced in function "public: void __cdecl
osgeo::proj::SQLiteStatement::bindText(char const *)"
(?bindText at SQLiteStatement@proj at osgeo@@QEAAXPEBD at Z)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_bind_text
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_step referenced in function "public: int __cdecl
osgeo::proj::SQLiteStatement::execute(void)"
(?execute at SQLiteStatement@proj at osgeo@@QEAAHXZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_step
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_column_blob referenced in function "public: void const *
__cdecl osgeo::proj::SQLiteStatement::getBlob(int &)"
(?getBlob at SQLiteStatement@proj at osgeo@@QEAAPEBXAEAH at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_column_int64 referenced in function "public: __int64 __cdecl
osgeo::proj::SQLiteStatement::getInt64(void)"
(?getInt64 at SQLiteStatement@proj at osgeo@@QEAA_JXZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_column_text referenced in function "public: char const *
__cdecl osgeo::proj::SQLiteStatement::getText(void)"
(?getText at SQLiteStatement@proj at osgeo@@QEAAPEBDXZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_column_text
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_column_bytes referenced in function "public: void const *
__cdecl osgeo::proj::SQLiteStatement::getBlob(int &)"
(?getBlob at SQLiteStatement@proj at osgeo@@QEAAPEBXAEAH at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_finalize referenced in function "public: __cdecl
osgeo::proj::SQLiteStatement::~SQLiteStatement(void)"
(??1SQLiteStatement at proj@osgeo@@QEAA at XZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_finalize
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol sqlite3_reset referenced in function "public: void __cdecl
osgeo::proj::SQLiteStatement::reset(void)"
(?reset at SQLiteStatement@proj at osgeo@@QEAAXXZ)
1>proj_d.lib(factory.obj) : error LNK2001: unresolved external symbol
sqlite3_reset
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol __imp_curl_easy_init referenced in function "public: static struct
PROJ_NETWORK_HANDLE * __cdecl osgeo::proj::CurlFileHandle::open(struct
pj_ctx *,char const *,unsigned __int64,unsigned __int64,void *,unsigned
__int64 *,unsigned __int64,char *,void *)"
(?open at CurlFileHandle@proj at osgeo@@SAPEAUPROJ_NETWORK_HANDLE@@PEAUpj_ctx@@PEB
D_K2PEAXPEA_K2PEAD3 at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol __imp_curl_easy_setopt referenced in function "public: __cdecl
osgeo::proj::CurlFileHandle::CurlFileHandle(struct pj_ctx *,char const
*,void *,char const *)"
(??0CurlFileHandle at proj@osgeo@@QEAA at PEAUpj_ctx@@PEBDPEAX1 at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol __imp_curl_easy_perform referenced in function "public: static struct
PROJ_NETWORK_HANDLE * __cdecl osgeo::proj::CurlFileHandle::open(struct
pj_ctx *,char const *,unsigned __int64,unsigned __int64,void *,unsigned
__int64 *,unsigned __int64,char *,void *)"
(?open at CurlFileHandle@proj at osgeo@@SAPEAUPROJ_NETWORK_HANDLE@@PEAUpj_ctx@@PEB
D_K2PEAXPEA_K2PEAD3 at Z)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol __imp_curl_easy_cleanup referenced in function "public: __cdecl
osgeo::proj::CurlFileHandle::~CurlFileHandle(void)"
(??1CurlFileHandle at proj@osgeo@@QEAA at XZ)
1>proj_d.lib(networkfilemanager.obj) : error LNK2019: unresolved external
symbol __imp_curl_easy_getinfo referenced in function "public: static struct
PROJ_NETWORK_HANDLE * __cdecl osgeo::proj::CurlFileHandle::open(struct
pj_ctx *,char const *,unsigned __int64,unsigned __int64,void *,unsigned
__int64 *,unsigned __int64,char *,void *)"
(?open at CurlFileHandle@proj at osgeo@@SAPEAUPROJ_NETWORK_HANDLE@@PEAUpj_ctx@@PEB
D_K2PEAXPEA_K2PEAD3 at Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_libversion referenced in function "public: void __cdecl
osgeo::proj::io::DatabaseContext::Private::open(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,struct pj_ctx *)"
(?open at Private@DatabaseContext at io@proj at osgeo@@QEAAXAEBV?$basic_string at DU?$ch
ar_traits at D@std@@V?$allocator at D@2@@std@@PEAUpj_ctx@@@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_libversion_number referenced in function "public: void __cdecl
osgeo::proj::io::DatabaseContext::Private::open(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,struct pj_ctx *)"
(?open at Private@DatabaseContext at io@proj at osgeo@@QEAAXAEBV?$basic_string at DU?$ch
ar_traits at D@std@@V?$allocator at D@2@@std@@PEAUpj_ctx@@@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_bind_double referenced in function "public: class std::list<class
std::vector<class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > >,class std::allocator<class std::vector<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > > > > __cdecl
osgeo::proj::io::DatabaseContext::Private::run(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,class std::list<struct
osgeo::proj::io::SQLValues,class std::allocator<struct
osgeo::proj::io::SQLValues> > const &,bool)"
(?run at Private@DatabaseContext at io@proj at osgeo@@QEAA?AV?$list at V?$vector at V?$basi
c_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$allocator at V?$basic
_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@std@@V?$allocator@
V?$vector at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$a
llocator at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@s
td@@@2@@std@@AEBV?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@7 at A
EBV?$list at USQLValues@io at proj@osgeo@@V?$allocator at USQLValues@io at proj@osgeo@@@
std@@@7 at _N@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_column_count referenced in function "public: class std::list<class
std::vector<class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > >,class std::allocator<class std::vector<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > > > > __cdecl
osgeo::proj::io::DatabaseContext::Private::run(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,class std::list<struct
osgeo::proj::io::SQLValues,class std::allocator<struct
osgeo::proj::io::SQLValues> > const &,bool)"
(?run at Private@DatabaseContext at io@proj at osgeo@@QEAA?AV?$list at V?$vector at V?$basi
c_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$allocator at V?$basic
_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@std@@V?$allocator@
V?$vector at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$a
llocator at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@s
td@@@2@@std@@AEBV?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@7 at A
EBV?$list at USQLValues@io at proj@osgeo@@V?$allocator at USQLValues@io at proj@osgeo@@@
std@@@7 at _N@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_column_double referenced in function "public: class std::list<class
std::vector<class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > >,class std::allocator<class std::vector<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > > > > __cdecl
osgeo::proj::io::DatabaseContext::Private::run(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,class std::list<struct
osgeo::proj::io::SQLValues,class std::allocator<struct
osgeo::proj::io::SQLValues> > const &,bool)"
(?run at Private@DatabaseContext at io@proj at osgeo@@QEAA?AV?$list at V?$vector at V?$basi
c_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$allocator at V?$basic
_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@std@@V?$allocator@
V?$vector at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$a
llocator at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@s
td@@@2@@std@@AEBV?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@7 at A
EBV?$list at USQLValues@io at proj@osgeo@@V?$allocator at USQLValues@io at proj@osgeo@@@
std@@@7 at _N@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_column_type referenced in function "public: class std::list<class
std::vector<class std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > >,class std::allocator<class std::vector<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> >,class std::allocator<class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > > > > > __cdecl
osgeo::proj::io::DatabaseContext::Private::run(class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > const &,class std::list<struct
osgeo::proj::io::SQLValues,class std::allocator<struct
osgeo::proj::io::SQLValues> > const &,bool)"
(?run at Private@DatabaseContext at io@proj at osgeo@@QEAA?AV?$list at V?$vector at V?$basi
c_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$allocator at V?$basic
_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@std@@V?$allocator@
V?$vector at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@V?$a
llocator at V?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@std@@@2@@s
td@@@2@@std@@AEBV?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@7 at A
EBV?$list at USQLValues@io at proj@osgeo@@V?$allocator at USQLValues@io at proj@osgeo@@@
std@@@7 at _N@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_create_function referenced in function "private: void __cdecl
osgeo::proj::io::DatabaseContext::Private::registerFunctions(void)"
(?registerFunctions at Private@DatabaseContext at io@proj at osgeo@@AEAAXXZ)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_value_double referenced in function "double __cdecl
osgeo::proj::io::PROJ_SQLITE_GetValAsDouble(struct sqlite3_value *,bool &)"
(?PROJ_SQLITE_GetValAsDouble at io@proj at osgeo@@YANPEAUsqlite3_value@@AEA_N at Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_value_int64 referenced in function "double __cdecl
osgeo::proj::io::PROJ_SQLITE_GetValAsDouble(struct sqlite3_value *,bool &)"
(?PROJ_SQLITE_GetValAsDouble at io@proj at osgeo@@YANPEAUsqlite3_value@@AEA_N at Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_value_type referenced in function "double __cdecl
osgeo::proj::io::PROJ_SQLITE_GetValAsDouble(struct sqlite3_value *,bool &)"
(?PROJ_SQLITE_GetValAsDouble at io@proj at osgeo@@YANPEAUsqlite3_value@@AEA_N at Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_result_double referenced in function "void __cdecl
osgeo::proj::io::PROJ_SQLITE_pseudo_area_from_swne(struct sqlite3_context
*,int,struct sqlite3_value * *)"
(?PROJ_SQLITE_pseudo_area_from_swne at io@proj at osgeo@@YAXPEAUsqlite3_context@@H
PEAPEAUsqlite3_value@@@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_result_int referenced in function "void __cdecl
osgeo::proj::io::PROJ_SQLITE_intersects_bbox(struct sqlite3_context
*,int,struct sqlite3_value * *)"
(?PROJ_SQLITE_intersects_bbox at io@proj at osgeo@@YAXPEAUsqlite3_context@@HPEAPEA
Usqlite3_value@@@Z)
1>proj_d.lib(factory.obj) : error LNK2019: unresolved external symbol
sqlite3_result_null referenced in function "void __cdecl
osgeo::proj::io::PROJ_SQLITE_pseudo_area_from_swne(struct sqlite3_context
*,int,struct sqlite3_value * *)"
(?PROJ_SQLITE_pseudo_area_from_swne at io@proj at osgeo@@YAXPEAUsqlite3_context@@H
PEAPEAUsqlite3_value@@@Z)
1>proj_d.lib(sqlite3_utils.obj) : error LNK2019: unresolved external symbol
sqlite3_initialize referenced in function "public: static class
std::unique_ptr<class osgeo::proj::SQLite3VFS,struct
std::default_delete<class osgeo::proj::SQLite3VFS> > __cdecl
osgeo::proj::SQLite3VFS::create(bool,bool,bool)"
(?create at SQLite3VFS@proj at osgeo@@SA?AV?$unique_ptr at VSQLite3VFS@proj at osgeo@@U?
$default_delete at VSQLite3VFS@proj at osgeo@@@std@@@std@@_N00 at Z)
1>proj_d.lib(sqlite3_utils.obj) : error LNK2019: unresolved external symbol
sqlite3_config referenced in function "public: __cdecl `public: static class
std::unique_ptr<class osgeo::proj::SQLite3VFS,struct
std::default_delete<class osgeo::proj::SQLite3VFS> > __cdecl
osgeo::proj::SQLite3VFS::create(bool,bool,bool)'::`2'::InstallSqliteLogger::
InstallSqliteLogger(void)"
(??0InstallSqliteLogger@?1??create at SQLite3VFS@proj at osgeo@@SA?AV?$unique_ptr@
VSQLite3VFS at proj@osgeo@@U?$default_delete at VSQLite3VFS@proj at osgeo@@@std@@@std
@@_N00 at Z@QEAA at XZ)
1>proj_d.lib(sqlite3_utils.obj) : error LNK2019: unresolved external symbol
sqlite3_vfs_find referenced in function "public: static class
std::unique_ptr<class osgeo::proj::SQLite3VFS,struct
std::default_delete<class osgeo::proj::SQLite3VFS> > __cdecl
osgeo::proj::SQLite3VFS::create(bool,bool,bool)"
(?create at SQLite3VFS@proj at osgeo@@SA?AV?$unique_ptr at VSQLite3VFS@proj at osgeo@@U?
$default_delete at VSQLite3VFS@proj at osgeo@@@std@@@std@@_N00 at Z)
1>proj_d.lib(sqlite3_utils.obj) : error LNK2019: unresolved external symbol
sqlite3_vfs_register referenced in function "public: static class
std::unique_ptr<class osgeo::proj::SQLite3VFS,struct
std::default_delete<class osgeo::proj::SQLite3VFS> > __cdecl
osgeo::proj::SQLite3VFS::create(bool,bool,bool)"
(?create at SQLite3VFS@proj at osgeo@@SA?AV?$unique_ptr at VSQLite3VFS@proj at osgeo@@U?
$default_delete at VSQLite3VFS@proj at osgeo@@@std@@@std@@_N00 at Z)
1>proj_d.lib(sqlite3_utils.obj) : error LNK2019: unresolved external symbol
sqlite3_vfs_unregister referenced in function "public: __cdecl
osgeo::proj::SQLite3VFS::~SQLite3VFS(void)"
(??1SQLite3VFS at proj@osgeo@@QEAA at XZ)
1>proj_d.lib(proj_json_streaming_writer.obj) : error LNK2019: unresolved
external symbol sqlite3_vsnprintf referenced in function "class
std::basic_string<char,struct std::char_traits<char>,class
std::allocator<char> > __cdecl CPLSPrintf(char const *,...)"
(?CPLSPrintf@@YA?AV?$basic_string at DU?$char_traits at D@std@@V?$allocator at D@2@@s
td@@PEBDZZ)
1>gdal302_d.dll : fatal error LNK1120: 44 unresolved externals
1>NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\VC\Tools\MSVC\14.28.29910\bin\HostX86\x64\link.EXE"' :
return code '0x460'
1>Stop.
1>C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\MSBuild\Microsoft\VC\v160\Microsoft.MakeFile.Targets(5
4,5): error MSB3073: The command "nmake -f makefile.vc MSVC_VER=1920 WIN64=1
DEBUG=1 WITH_PDB=1 clean && nmake -f makefile.vc MSVC_VER=1920 WIN64=1
DEBUG=1 WITH_PDB=1" exited with code 2.
1>Done building project "gdal_vs2019.vcxproj" -- FAILED.
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========


From gcpp.kalxas at gmail.com  Thu Mar 18 08:46:58 2021
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Thu, 18 Mar 2021 17:46:58 +0200
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <1616071735841-0.post@n6.nabble.com>
References: <1616071735841-0.post@n6.nabble.com>
Message-ID: <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>

Hi,

Recent GDAL release is available in UbuntuGIS unstable ppa:
https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable

On 3/18/21 2:48 PM, Adzorv1 wrote:
> For some time i have been trying to install the latest version of GDAL or
> anything above 3.1.0 on my ubuntu 20.04 system, unfortunately the version
> that keeps being installed is 3.0.4 which is outdated for the uses we need.
> I have followed several online guides but keep hitting the same issue.
>
> if i try to run:
> pip3 install GDAL==3.1.0
>
> I get a huge red wall of errors with the final line stating that the wheel
> failed to build.
>
> any suggestions would be really appreciated
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Angelos Tzotsos, PhD
President
Open Source Geospatial Foundation
http://users.ntua.gr/tzotsos


From Matt.Wilkie at yukon.ca  Thu Mar 18 09:04:38 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Thu, 18 Mar 2021 16:04:38 +0000
Subject: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?
In-Reply-To: <CA+YzLBecK4QXb7d8se++yx8iDR3LkwYDmCgibHmq-uswBjftTQ@mail.gmail.com>
References: <27d922a6e630450fb2b28ffa46f50c58@app-exch2.gov.yk.ca>
 <CADXYQQ4zDbtL9C0XtoR2fTnc7x42Cn4+Y6tGceKLNhdo2cybDw@mail.gmail.com>
 <CA+YzLBecK4QXb7d8se++yx8iDR3LkwYDmCgibHmq-uswBjftTQ@mail.gmail.com>
Message-ID: <4ea9deca11ae405398fd56445e5e9dba@app-exch2.gov.yk.ca>

Thank you all. This is good information and helps solidify my thinking: we ask for both.

We want to keep getting the processed to 8bit visual imagery as we don?t have the capacity to that in-house for the amount of data we get. However we also want to have 12 bit for those occasions when analysis is primary goal, and we do this also.

Cheers,

-Matt

From: Frank Warmerdam <warmerdam at pobox.com>
Sent: March 17, 2021 8:29 PM
To: Patrick Young <patrick.mckendree.young at gmail.com>
Cc: Matt.Wilkie <Matt.Wilkie at yukon.ca>; gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?

Patrick,

FWIW, Rob's post is on the process he uses in Photoshop to prepare images for various venues.  For imagery published through the platform we (Planet) do not use per-image white-point and black-point (or we would not have day to day, and scene to scene consistency).  We do apply color curves Rob prepared in our automated process but with "fixed" black/white point which results in an automated 8bit RGB product that tends to be very suboptimal in dark or bright areas.     The imagery Planet shows in our web-explorer interface is served from highly compressed JPEG-in-TIFF adding an additional layer of image damage. :-)  While that pains me, we are keeping around nearly 3 billion scenes online at nearly full resolution for fast visualization so some compromises have to be made.

Beyond nit-picking, I think my point is:
 - given 12bit "rawer" data you have the opportunity to do careful scene dependent conversion to 8bit in a way that best brings out the details available in the source data if you have the time and patience.
 - having this process done for you in advance by a skilled supplier (perhaps in such a way as to maintain reasonable consistency for large area coverages) may actually save you a lot of work if you mostly just want to fairly generic visualization - and it might even be a better visualization than you would do yourself if you aren't going to do a lot of work.

Best regards,
Frank

On Wed, Mar 17, 2021 at 11:13 PM Patrick Young <patrick.mckendree.young at gmail.com<mailto:patrick.mckendree.young at gmail.com>> wrote:
I would guess you usually see 8bit RGB images because that is what your monitor can display.   What is lost is a deeper question, per channel you have to squeeze the original [0 - 4095] pixel value range per channel down to [0 -255], and there are lots of ways to do it.  The problem is sometimes called tone mapping<https://en.wikipedia.org/wiki/Tone_mapping#:~:text=Tone%20mapping%20is%20a%20technique,a%20more%20limited%20dynamic%20range.>.  Planet had a nice blog post describing how they manually convert their imagery to 8bit RGB here<https://www.planet.com/pulse/color-correction/>.  If you were using the imagery for analytic things (e.g. converting pixel values to reflectance) you'd probably not want the 8bit product.

To get GDAL in the mix, note that gdal_translate can do simple tone mapping for you:  https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale

Patrick


On Wed, Mar 17, 2021 at 3:23 PM <Matt.Wilkie at yukon.ca<mailto:Matt.Wilkie at yukon.ca>> wrote:

SPOT 6/7 satellite imagery is captured with a dynamic range of 12 bits per pixel per channel (ref<https://eos.com/spot-6-and-7/>). However almost all of the SPOT imagery I have seen in use has been 8 bits per channel, and split into RGB natural colour (Bands-321) and Near-infrared-RG false colour (Bands-432). What information is lost in this 12 to 8 bits conversion?

I'm wondering if we should be altering our request for purchase specifications to deliver the full bit depth.

Although I'm referencing SPOT imagery specifically the question is general and really applies to any satellite or sensor system.
Cross-post: https://gis.stackexchange.com/questions/390315/what-is-lost-when-converting-12-bit-imagery-to-8-bit

Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fyukon.ca&umid=4069A3E7-BDC7-3505-BA97-48548791B267&auth=c132af8ee7c9d1278d61a701569070a095ce962e-48dacb3d842116a19074c604a613050cec3e1729>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210318/a3894a1d/attachment-0001.html>

From adzor.verhaagen at cgi.com  Thu Mar 18 09:04:43 2021
From: adzor.verhaagen at cgi.com (Adzorv1)
Date: Thu, 18 Mar 2021 09:04:43 -0700 (MST)
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>
References: <1616071735841-0.post@n6.nabble.com>
 <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>
Message-ID: <1616083483006-0.post@n6.nabble.com>

Thanks for the reply, 

Unfortunately when i try to add ubutugis, i always get the same message:

Cannot add PPA: 'ppa:~ubuntugis/ubuntu/ubuntugis-unstable'.
ERROR: '~ubuntugis' user or team does not exist.

i've searched online for solutions such as adding '-E' to the command line,
but it hasn't worked so far




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From evert.etienne at sitemark.com  Thu Mar 18 09:06:16 2021
From: evert.etienne at sitemark.com (Evert Etienne (SITEMARK))
Date: Thu, 18 Mar 2021 16:06:16 +0000
Subject: [gdal-dev] Converting DEM height values from feet to meter
In-Reply-To: <32a7eba0-8fe3-0872-611d-038571260cc6@spatialys.com>
References: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>
 <4FC1FAC9-BA85-4E00-AE5A-1FAECAD52965@sitemark.com>
 <32a7eba0-8fe3-0872-611d-038571260cc6@spatialys.com>
Message-ID: <4C275F37-F1A3-4598-A229-2C8D6915F968@sitemark.com>

Does one of the 2 options keep more settings of the input file? Such as NoData value, BIGTIFF creation option??

But indeed, the possibility to use VRT does seem better since then it can be done during tiling. This probably only saves space and not time, correct (due to lack of understanding of VRT).

Thanks for replying!

> On 18 Mar 2021, at 12:38, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> "gdal_translate -scale 0 1 0 factor in out" could also be used. As a bonus point, this works with VRT as an output if you don't want to materialize the intermediate file.
> 
> Even
> 
> Le 18/03/2021 ? 12:20, Evert Etienne (SITEMARK) a ?crit :
>> For reference, I decided to go for a simple gdal_calc with `f"--calc=A*{factor}?`
>> 
>>> On 12 Mar 2021, at 20:43, Evert Etienne (SITEMARK) <evert.etienne at sitemark.com> wrote:
>>> 
>>> Hello all,
>>> 
>>> I was wondering what the best or recommended way was to convert the vertical unit of a DEM/DSM. I am able to use gdal_translate, gdal_calc.py, GDAL python bindings or rasterio. I will afterwards be tiling using gdal2tiles.
>>> Any pointers would be appreciated.
>>> 
>>> Greetings
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420232810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=HDEyVo8bDzuSqnBJg%2BvqAfuIPLBgRxnnBKw03vom1X4%3D&amp;reserved=0
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420242765%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=pvs4dgTJ%2BiH14dqXg9P5vRdQzy6SEpRToNNcEbOplwQ%3D&amp;reserved=0
> 
> -- 
> https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420242765%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=0MnXcpJIbk%2BXK2CAI4EHWVbY36JItSXq0Rbyeoa19Gc%3D&amp;reserved=0
> My software is free, but my time generally not.
> 


From even.rouault at spatialys.com  Thu Mar 18 09:13:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Mar 2021 17:13:22 +0100
Subject: [gdal-dev] Converting DEM height values from feet to meter
In-Reply-To: <4C275F37-F1A3-4598-A229-2C8D6915F968@sitemark.com>
References: <57B04432-7DAC-4C25-B72A-05B8F7CE7DDC@sitemark.com>
 <4FC1FAC9-BA85-4E00-AE5A-1FAECAD52965@sitemark.com>
 <32a7eba0-8fe3-0872-611d-038571260cc6@spatialys.com>
 <4C275F37-F1A3-4598-A229-2C8D6915F968@sitemark.com>
Message-ID: <964a2c26-d5bb-f9f1-14ee-b598545a7c5b@spatialys.com>


Le 18/03/2021 ? 17:06, Evert Etienne (SITEMARK) a ?crit?:
> Does one of the 2 options keep more settings of the input file? Such as NoData value, BIGTIFF creation option??

gdal_calc modify the nodata value settings AFAIR. You have to consult 
its doc. gdal_translate should be fine. But when rescaling, some care as 
always to be taken regarding nodata.

BigTIFF preserveration is a creation option of the GTiff driver, so you 
have to explicitly pass it (or rely on the automatic mode whose 
heuristics will decide if it must use BigTIFF or not)

>
> But indeed, the possibility to use VRT does seem better since then it can be done during tiling. This probably only saves space and not time, correct (due to lack of understanding of VRT).
VRT will generally not save time (unless you materialize the 
intermediate format to some compressed format and time of 
compression/decompression is significant).
>
> Thanks for replying!
>
>> On 18 Mar 2021, at 12:38, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> "gdal_translate -scale 0 1 0 factor in out" could also be used. As a bonus point, this works with VRT as an output if you don't want to materialize the intermediate file.
>>
>> Even
>>
>> Le 18/03/2021 ? 12:20, Evert Etienne (SITEMARK) a ?crit :
>>> For reference, I decided to go for a simple gdal_calc with `f"--calc=A*{factor}?`
>>>
>>>> On 12 Mar 2021, at 20:43, Evert Etienne (SITEMARK) <evert.etienne at sitemark.com> wrote:
>>>>
>>>> Hello all,
>>>>
>>>> I was wondering what the best or recommended way was to convert the vertical unit of a DEM/DSM. I am able to use gdal_translate, gdal_calc.py, GDAL python bindings or rasterio. I will afterwards be tiling using gdal2tiles.
>>>> Any pointers would be appreciated.
>>>>
>>>> Greetings
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420232810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=HDEyVo8bDzuSqnBJg%2BvqAfuIPLBgRxnnBKw03vom1X4%3D&amp;reserved=0
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420242765%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=pvs4dgTJ%2BiH14dqXg9P5vRdQzy6SEpRToNNcEbOplwQ%3D&amp;reserved=0
>> -- 
>> https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&amp;data=04%7C01%7Cevert.etienne%40sitemark.com%7C8ca005c4c92144dbdf2f08d8ea026c13%7Cfc89adff07ac47008853b7b7e906068e%7C0%7C0%7C637516643420242765%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=0MnXcpJIbk%2BXK2CAI4EHWVbY36JItSXq0Rbyeoa19Gc%3D&amp;reserved=0
>> My software is free, but my time generally not.
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From osgeo.mailinglist at gmail.com  Thu Mar 18 10:15:02 2021
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 18 Mar 2021 18:15:02 +0100
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <1616083483006-0.post@n6.nabble.com>
References: <1616071735841-0.post@n6.nabble.com>
 <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>
 <1616083483006-0.post@n6.nabble.com>
Message-ID: <CACPZzQ2MOQBSJsEaSxbihqxkU+_gVzow6pSx63z5mmfcncBaGA@mail.gmail.com>

Hi,

Did you try the following?

sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update

Not sure what you tried

Regards

Thomas



Le jeu. 18 mars 2021 ? 17:05, Adzorv1 <adzor.verhaagen at cgi.com> a ?crit :

> Thanks for the reply,
>
> Unfortunately when i try to add ubutugis, i always get the same message:
>
> Cannot add PPA: 'ppa:~ubuntugis/ubuntu/ubuntugis-unstable'.
> ERROR: '~ubuntugis' user or team does not exist.
>
> i've searched online for solutions such as adding '-E' to the command line,
> but it hasn't worked so far
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210318/d28a6469/attachment.html>

From adzor.verhaagen at cgi.com  Thu Mar 18 10:19:24 2021
From: adzor.verhaagen at cgi.com (Adzorv1)
Date: Thu, 18 Mar 2021 10:19:24 -0700 (MST)
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <CACPZzQ2MOQBSJsEaSxbihqxkU+_gVzow6pSx63z5mmfcncBaGA@mail.gmail.com>
References: <1616071735841-0.post@n6.nabble.com>
 <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>
 <1616083483006-0.post@n6.nabble.com>
 <CACPZzQ2MOQBSJsEaSxbihqxkU+_gVzow6pSx63z5mmfcncBaGA@mail.gmail.com>
Message-ID: <1616087964114-0.post@n6.nabble.com>

Hey, 
Yup, tried both 

sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update

and

sudo -E add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update


Hi,

Did you try the following?

sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update

Not sure what you tried

Regards

Thomas



Le jeu. 18 mars 2021 ? 17:05, Adzorv1 &lt;adzor.verhaagen@&gt; a ?crit :

> Thanks for the reply,
>
> Unfortunately when i try to add ubutugis, i always get the same message:
>
> Cannot add PPA: 'ppa:~ubuntugis/ubuntu/ubuntugis-unstable'.
> ERROR: '~ubuntugis' user or team does not exist.
>
> i've searched online for solutions such as adding '-E' to the command
> line,
> but it hasn't worked so far




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From runette at gmail.com  Thu Mar 18 12:06:59 2021
From: runette at gmail.com (Paul Harwood)
Date: Thu, 18 Mar 2021 19:06:59 +0000
Subject: [gdal-dev] Installing the latest GDAL version on ubuntu 20.04
In-Reply-To: <1616087964114-0.post@n6.nabble.com>
References: <1616071735841-0.post@n6.nabble.com>
 <7fa7cb6e-1d3e-8c6f-6483-eb069a04a92c@gmail.com>
 <1616083483006-0.post@n6.nabble.com>
 <CACPZzQ2MOQBSJsEaSxbihqxkU+_gVzow6pSx63z5mmfcncBaGA@mail.gmail.com>
 <1616087964114-0.post@n6.nabble.com>
Message-ID: <CAE8nN5OEUNuV5v1ZORdznp-QyAOQuP=dvA2VYohd3T+R=VV-vQ@mail.gmail.com>

I think the official source for all platform is Conda - and that certainly
work and gets gdal 3.2.2 on ubuntu for me.

conda install -c conda-forge gdal

if you don't have conda - you can install miniconda from here
https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html

On Thu, 18 Mar 2021 at 17:19, Adzorv1 <adzor.verhaagen at cgi.com> wrote:

> Hey,
> Yup, tried both
>
> sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
> sudo apt-get update
>
> and
>
> sudo -E add-apt-repository ppa:ubuntugis/ubuntugis-unstable
> sudo apt-get update
>
>
> Hi,
>
> Did you try the following?
>
> sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
> sudo apt-get update
>
> Not sure what you tried
>
> Regards
>
> Thomas
>
>
>
> Le jeu. 18 mars 2021 ? 17:05, Adzorv1 &lt;adzor.verhaagen@&gt; a ?crit :
>
> > Thanks for the reply,
> >
> > Unfortunately when i try to add ubutugis, i always get the same message:
> >
> > Cannot add PPA: 'ppa:~ubuntugis/ubuntu/ubuntugis-unstable'.
> > ERROR: '~ubuntugis' user or team does not exist.
> >
> > i've searched online for solutions such as adding '-E' to the command
> > line,
> > but it hasn't worked so far
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210318/2304bb9d/attachment.html>

From rajeshreddy82 at gmail.com  Thu Mar 18 23:05:47 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 18 Mar 2021 23:05:47 -0700 (MST)
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at
 a time
In-Reply-To: <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>
References: <1616043680903-0.post@n6.nabble.com>
 <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>
Message-ID: <1616133947913-0.post@n6.nabble.com>

Thanks Even. 

Whether this algorithm internally use Convex Hull or Concave Hull?
How to get Concave Hull-based union geometry using GDAL?

Are these functionalities (ogr.CreateGeometryFromWkt..) available with C#
bindings?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 19 01:43:44 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 19 Mar 2021 01:43:44 -0700 (MST)
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at
 a time
In-Reply-To: <1616133947913-0.post@n6.nabble.com>
References: <1616043680903-0.post@n6.nabble.com>
 <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>
 <1616133947913-0.post@n6.nabble.com>
Message-ID: <1616143424618-0.post@n6.nabble.com>

Hi,

Please explain what do you mean by "Concave Hull-based union geometry".
Union is union as it is defined in the OpenGIS Simple Features
Implementation Specification for SQL 1.1 standard. There is only one
possible correct result from union. The source code is available if you are
interested in how it is implemented. Also this blog post is good reading.
Unfortunately the images do not show directly on browser, probably because
the links use http instead of https.

-Jukka Rahkonen-


MRRAJESH wrote
> Thanks Even. 
> 
> Whether this algorithm internally use Convex Hull or Concave Hull?
> How to get Concave Hull-based union geometry using GDAL?
> 
> Are these functionalities (ogr.CreateGeometryFromWkt..) available with C#
> bindings?
> 
> Regards,
> Rajesh
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matrixtempnew at gmail.com  Fri Mar 19 02:19:51 2021
From: matrixtempnew at gmail.com (mat data)
Date: Fri, 19 Mar 2021 14:49:51 +0530
Subject: [gdal-dev] Question Regarding Custom gdal_translate
Message-ID: <CALJ6_CnTCbrY5A6dqzidLk=J-+-L=NRJ-4sF5KvFFoK2NSPXag@mail.gmail.com>

I am required to edit a portion of gdal_translate utility to fit my own
needs. For that reason I would need to edit the code in gdal_translate
related cpp files. And redo the whole "make" command many times. Is there a
way so I can specifically test only gdal_translate functionality. So I
don't have to compile the GDAL project many times to test my custom code.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210319/b054169c/attachment.html>

From andrew at aitchison.me.uk  Fri Mar 19 02:34:49 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Fri, 19 Mar 2021 09:34:49 +0000 (GMT)
Subject: [gdal-dev] Question Regarding Custom gdal_translate
In-Reply-To: <CALJ6_CnTCbrY5A6dqzidLk=J-+-L=NRJ-4sF5KvFFoK2NSPXag@mail.gmail.com>
References: <CALJ6_CnTCbrY5A6dqzidLk=J-+-L=NRJ-4sF5KvFFoK2NSPXag@mail.gmail.com>
Message-ID: <f7dcb2b-084-eb56-851d-6dc881d14b3@aitchison.me.uk>

On Fri, 19 Mar 2021, mat data wrote:

> I am required to edit a portion of gdal_translate utility to fit my own
> needs. For that reason I would need to edit the code in gdal_translate
> related cpp files. And redo the whole "make" command many times. Is there a
> way so I can specifically test only gdal_translate functionality. So I
> don't have to compile the GDAL project many times to test my custom code.

If you do not run
 	make clean
each time, then subsequent "make"runs should be fairly quick.
This is one of the main features of make.

You may also find that running make in the apps directory or the
directory with the changed .cpp files is sufficient
and that you do not need to run make in the top directory.

You may find that you do still need to run
      make install
unless you run the newlybuilt copy of gdal_translate in the
build directory ( "apps" if I remember correctly).

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From patrick.mckendree.young at gmail.com  Fri Mar 19 07:20:17 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Fri, 19 Mar 2021 08:20:17 -0600
Subject: [gdal-dev] Question Regarding Custom gdal_translate
In-Reply-To: <f7dcb2b-084-eb56-851d-6dc881d14b3@aitchison.me.uk>
References: <CALJ6_CnTCbrY5A6dqzidLk=J-+-L=NRJ-4sF5KvFFoK2NSPXag@mail.gmail.com>
 <f7dcb2b-084-eb56-851d-6dc881d14b3@aitchison.me.uk>
Message-ID: <CADXYQQ49vohx-jNxvKK_CAa4Z4WQmALU_uckM3pcjZ7RjtQMKQ@mail.gmail.com>

FWIW check out

https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdal_translate.py
https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdal_translate_lib.py

On Fri, Mar 19, 2021 at 3:35 AM Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

> On Fri, 19 Mar 2021, mat data wrote:
>
> > I am required to edit a portion of gdal_translate utility to fit my own
> > needs. For that reason I would need to edit the code in gdal_translate
> > related cpp files. And redo the whole "make" command many times. Is
> there a
> > way so I can specifically test only gdal_translate functionality. So I
> > don't have to compile the GDAL project many times to test my custom code.
>
> If you do not run
>         make clean
> each time, then subsequent "make"runs should be fairly quick.
> This is one of the main features of make.
>
> You may also find that running make in the apps directory or the
> directory with the changed .cpp files is sufficient
> and that you do not need to run make in the top directory.
>
> You may find that you do still need to run
>       make install
> unless you run the newlybuilt copy of gdal_translate in the
> build directory ( "apps" if I remember correctly).
>
> --
> Andrew C. Aitchison                                     Kendal, UK
>                         andrew at aitchison.me.uk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210319/fb4f5ffe/attachment.html>

From eric.g.younkin at noaa.gov  Fri Mar 19 09:51:55 2021
From: eric.g.younkin at noaa.gov (Eric Younkin - NOAA Federal)
Date: Fri, 19 Mar 2021 12:51:55 -0400
Subject: [gdal-dev] BAG Driver - dimension size being written in the wrong
 order
Message-ID: <CAFe6qKhPXdgRvZYGLaXXY3sG4zHqPGZHMnPWM4YSaBrhwNBpTg@mail.gmail.com>

Hello,

Using conda installed GDAL 3.2.1

I think I've stumbled on a bug with the BAG driver.  It seems as though
when you use Create() to make a BAG, it writes the dimensionSize xml
attribute in the wrong order.  It sets the column dimension size to the row
dimensionSize xml attribute, and row to column.  I found this on examining
the xml manually, see blob below.

<gmd:axisDimensionProperties>
        <gmd:MD_Dimension>
          <gmd:dimensionName>
            <gmd:MD_DimensionNameTypeCode codeList="
http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode"
codeListValue="row">row</gmd:MD_DimensionNameTypeCode>
          </gmd:dimensionName>


*          <gmd:dimensionSize>            <gco:Integer>546</gco:Integer>
      </gmd:dimensionSize>*
          <gmd:resolution>
            <gco:Measure uom="m">2.0</gco:Measure>
          </gmd:resolution>
        </gmd:MD_Dimension>
      </gmd:axisDimensionProperties>

This bug does not affect viewing the BAG in QGIS, as it seems like QGIS
just computes the size using the actual array.  I found that GDAL created
BAGs would not load in Caris, a software for viewing bathymetric data.  I
believe that is because Caris is using the dimensionSize xml instead of
calculating size from the data.  If I swap row/col dimensionSize, the BAG
then works in Caris.

Seems like a relatively simple fix (assuming I am right about this), please
let me know if I need to submit it somewhere else.

Thanks,
Eric

-- 
Eric Younkin
Physical Scientist
NOAA OCS, Hydrographic Systems and Technology Branch
1315 East-West Highway
N/CS11, Room 6604
Silver Spring, MD 20910
Office: 240-847-8208
Cell: 828-331-8197
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210319/998391ce/attachment-0001.html>

From even.rouault at spatialys.com  Fri Mar 19 10:22:32 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Mar 2021 18:22:32 +0100
Subject: [gdal-dev] BAG Driver - dimension size being written in the
 wrong order
In-Reply-To: <CAFe6qKhPXdgRvZYGLaXXY3sG4zHqPGZHMnPWM4YSaBrhwNBpTg@mail.gmail.com>
References: <CAFe6qKhPXdgRvZYGLaXXY3sG4zHqPGZHMnPWM4YSaBrhwNBpTg@mail.gmail.com>
Message-ID: <cdf12223-567c-80b4-7686-459d1ed1bc85@spatialys.com>

Eric,

I believe you're right. I've just fixed the issue by changing the 
template resource XML file used by the GDAL driver in

https://github.com/OSGeo/gdal/commit/1d2e7bc8fcde059de853335fee390479d457be06

So you can easily workaround the issue by updating this file in your 
existing installation.

For a next time, better file an issue at 
https://github.com/OSGeo/gdal/issues however. This will minimize the 
risk that your report is lost because nobody was able to address it at 
the very moment where they read it.

Even

Le 19/03/2021 ? 17:51, Eric Younkin - NOAA Federal via gdal-dev a ?crit?:
> Hello,
>
> Using conda installed GDAL 3.2.1
>
> I think I've stumbled on a bug with the BAG driver.? It seems as 
> though when you use Create() to make a BAG, it writes the 
> dimensionSize xml attribute in the wrong order.? It sets the column 
> dimension size to the row dimensionSize xml attribute, and row to 
> column.? I found this on examining the xml manually, see blob below.
>
> <gmd:axisDimensionProperties>
> ? ? ? ? <gmd:MD_Dimension>
> ? ? ? ? ? <gmd:dimensionName>
> ? ? ? ? ? ? <gmd:MD_DimensionNameTypeCode 
> codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode 
> <http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode>" 
> codeListValue="row">row</gmd:MD_DimensionNameTypeCode>
> ? ? ? ? ? </gmd:dimensionName>
> *? ? ? ? ? <gmd:dimensionSize>
> ? ? ? ? ? ? <gco:Integer>546</gco:Integer>
> ? ? ? ? ? </gmd:dimensionSize>*
> ? ? ? ? ? <gmd:resolution>
> ? ? ? ? ? ? <gco:Measure uom="m">2.0</gco:Measure>
> ? ? ? ? ? </gmd:resolution>
> ? ? ? ? </gmd:MD_Dimension>
> ? ? ? </gmd:axisDimensionProperties>
>
> This bug does not affect viewing the BAG in QGIS, as it seems like 
> QGIS just computes the size using the actual array.? I found that GDAL 
> created BAGs would not load in Caris, a software for viewing 
> bathymetric data.? I believe that is because Caris is using the 
> dimensionSize xml instead of calculating size from the data.? If I 
> swap row/col dimensionSize, the BAG then works in Caris.
>
> Seems like a relatively simple fix (assuming I am right about this), 
> please let me know if I need to submit it somewhere else.
>
> Thanks,
> Eric
>
> -- 
> Eric Younkin
> Physical Scientist
> NOAA OCS, Hydrographic Systems and Technology Branch
> 1315 East-West Highway
> N/CS11, Room 6604
> Silver Spring, MD 20910
> Office: 240-847-8208
> Cell: 828-331-8197
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210319/37b4c70d/attachment.html>

From eric.g.younkin at noaa.gov  Fri Mar 19 10:25:08 2021
From: eric.g.younkin at noaa.gov (Eric Younkin - NOAA Federal)
Date: Fri, 19 Mar 2021 13:25:08 -0400
Subject: [gdal-dev] BAG Driver - dimension size being written in the
 wrong order
In-Reply-To: <cdf12223-567c-80b4-7686-459d1ed1bc85@spatialys.com>
References: <CAFe6qKhPXdgRvZYGLaXXY3sG4zHqPGZHMnPWM4YSaBrhwNBpTg@mail.gmail.com>
 <cdf12223-567c-80b4-7686-459d1ed1bc85@spatialys.com>
Message-ID: <CAFe6qKj-kZpR+KPuZFnPQs43khBiei3jXyCOq03Zj4PhYJq21A@mail.gmail.com>

Thanks Even!

On Fri, Mar 19, 2021 at 1:22 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Eric,
>
> I believe you're right. I've just fixed the issue by changing the template
> resource XML file used by the GDAL driver in
>
>
> https://github.com/OSGeo/gdal/commit/1d2e7bc8fcde059de853335fee390479d457be06
>
> So you can easily workaround the issue by updating this file in your
> existing installation.
>
> For a next time, better file an issue at
> https://github.com/OSGeo/gdal/issues however. This will minimize the risk
> that your report is lost because nobody was able to address it at the very
> moment where they read it.
>
> Even
> Le 19/03/2021 ? 17:51, Eric Younkin - NOAA Federal via gdal-dev a ?crit :
>
> Hello,
>
> Using conda installed GDAL 3.2.1
>
> I think I've stumbled on a bug with the BAG driver.  It seems as though
> when you use Create() to make a BAG, it writes the dimensionSize xml
> attribute in the wrong order.  It sets the column dimension size to the row
> dimensionSize xml attribute, and row to column.  I found this on examining
> the xml manually, see blob below.
>
> <gmd:axisDimensionProperties>
>         <gmd:MD_Dimension>
>           <gmd:dimensionName>
>             <gmd:MD_DimensionNameTypeCode codeList="
> http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode"
> codeListValue="row">row</gmd:MD_DimensionNameTypeCode>
>           </gmd:dimensionName>
>
>
> *          <gmd:dimensionSize>             <gco:Integer>546</gco:Integer>
>           </gmd:dimensionSize>*
>           <gmd:resolution>
>             <gco:Measure uom="m">2.0</gco:Measure>
>           </gmd:resolution>
>         </gmd:MD_Dimension>
>       </gmd:axisDimensionProperties>
>
> This bug does not affect viewing the BAG in QGIS, as it seems like QGIS
> just computes the size using the actual array.  I found that GDAL created
> BAGs would not load in Caris, a software for viewing bathymetric data.  I
> believe that is because Caris is using the dimensionSize xml instead of
> calculating size from the data.  If I swap row/col dimensionSize, the BAG
> then works in Caris.
>
> Seems like a relatively simple fix (assuming I am right about this),
> please let me know if I need to submit it somewhere else.
>
> Thanks,
> Eric
>
> --
> Eric Younkin
> Physical Scientist
> NOAA OCS, Hydrographic Systems and Technology Branch
> 1315 East-West Highway
> N/CS11, Room 6604
> Silver Spring, MD 20910
> Office: 240-847-8208
> Cell: 828-331-8197
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Eric Younkin
Physical Scientist
NOAA OCS, Hydrographic Systems and Technology Branch
1315 East-West Highway
N/CS11, Room 6604
Silver Spring, MD 20910
Office: 240-847-8208
Cell: 828-331-8197
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210319/324f37ea/attachment.html>

From ali_sarlak at rocketmail.com  Sat Mar 20 14:14:59 2021
From: ali_sarlak at rocketmail.com (alien)
Date: Sat, 20 Mar 2021 14:14:59 -0700 (MST)
Subject: [gdal-dev] GDAL malfunction in android armeabi-v7a
Message-ID: <1616274899654-0.post@n6.nabble.com>

Hello,

I implemented a Linux application that uses GDAL to cover its GIS
requirements. Then, I tried to port the app to Android. So, I need to
cross-compile the GDAL library for Android. Firstly, I compiled the library
for the Android simulator, which is x86. In x86 architecture, the app and
library work fine. Then, when I tried to cross-compile it for armeabi-v7a
the library doesn't work fully-functional. Some functions run perfectly,
though others don't. In some cases, application crashes due to an exception
that occurred inside of the GDAL library.

For instance, once you want to use the GetGeoTransform function, your app
crashes in armeabi-v7a architecture. However, the same code works nicely on
the x86 android simulator.

Another interesting fact is that the size of libgdal.so in armeabi-v7a is
about 43MB. However, the size for that of x86 is around 135MB.

I use Ubuntu 16.04 LTS x64 ,NDK r21e ,Android SDK 24, Android 7.0-7.1 ,GDAL
3.2.0.

GDAL configuration command:
./configure --host=$CROSS_COMPILE --prefix=$PWD/../../sysroot/
--target=android --with-libtiff=$PWD/../../sysroot/
--with-proj=$PWD/../../sysroot/ --with-sqlite3=$PWD/../../sysroot
--with-expat=$PWD/../../sysroot/ --with-png=$PWD/../../sysroot/
--with-curl=no

Log:
log.txt <http://osgeo-org.1560.x6.nabble.com/file/t387871/log.txt>  

I appreciate any help.
Yours,






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From paul.malm at lfv.se  Tue Mar 23 00:26:01 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Tue, 23 Mar 2021 07:26:01 +0000
Subject: [gdal-dev] Gdal Java
Message-ID: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/97a513e1/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 23 05:21:01 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 23 Mar 2021 12:21:01 +0000
Subject: [gdal-dev] OAPIF with Accept-encoding: gzip
Message-ID: <4abc7d393b6347e48d1b6da6a517e420@maanmittauslaitos.fi>

Hi,

Is it possible to ask the OAPIF server to send response as gzipped, and if it succeeds, would GDAL know what to do with the response? I made a try by saving a line "Accept-Encoding: gzip" as a test file and then making this request:

ogrinfo OAPIF:"https://beta-paikkatieto.maanmittauslaitos.fi/inspire-buildings/features/v1/collections/building/" --config GDAL_HTTP_HEADER_FILE headers.txt --debug on --config cpl_debug on

Unfortunately it seems that Accept-Encoding header was not added:
HTTP: These HTTP headers were set: Accept: application/geo+json, application/json

Is there some trick to make this to work or would it require changes into the OAPIF driver?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/d48823b9/attachment.html>

From even.rouault at spatialys.com  Tue Mar 23 07:02:41 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Mar 2021 15:02:41 +0100
Subject: [gdal-dev] OAPIF with Accept-encoding: gzip
In-Reply-To: <4abc7d393b6347e48d1b6da6a517e420@maanmittauslaitos.fi>
References: <4abc7d393b6347e48d1b6da6a517e420@maanmittauslaitos.fi>
Message-ID: <6e5dd24f-00be-dcf1-3711-3fe1a51e959f@spatialys.com>

Hi Jukka,

Accept-Encoding: gzip is actually sent by default as you can see with 
"ogrinfo 
OAPIF:"https://beta-paikkatieto.maanmittauslaitos.fi/inspire-buildings/features/v1/collections/building/" 
--debug on --config CPL_CURL_VERBOSE YES", and the server honors it:

[...]

> GET 
/inspire-buildings/features/v1/collections/building/items?f=json&limit=10 
HTTP/1.1
Host: beta-paikkatieto.maanmittauslaitos.fi
Accept-Encoding: gzip
Accept: application/geo+json, application/json

< HTTP/1.1 200 OK
[...]
< Content-Encoding: gzip
< Content-Type: application/geo+json

Curl automatically uncompress the data, so this is transparent for GDAL.

The debug trace "HTTP: These HTTP headers were set" is a bit misleading 
as it only displays the HEADERS option sent to CPLHttpFetch(), but not 
the content of what is specified with the GDAL_HTTP_HEADER_FILE config 
option. Enabling Curl traces with CPL_CURL_VERBOSE=YES is the ultimate 
way of seeing what is really sent to the server.

Even


Le 23/03/2021 ? 13:21, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> Is it possible to ask the OAPIF server to send response as gzipped, 
> and if it succeeds, would GDAL know what to do with the response? I 
> made a try by saving a line ?Accept-Encoding: gzip" as a test file and 
> then making this request:
>
> ogrinfo 
> OAPIF:"https://beta-paikkatieto.maanmittauslaitos.fi/inspire-buildings/features/v1/collections/building/" 
> --config GDAL_HTTP_HEADER_FILE headers.txt --debug on --config 
> cpl_debug on
>
> Unfortunately it seems that Accept-Encoding header was not added:
>
> HTTP: These HTTP headers were set: Accept: application/geo+json, 
> application/json
>
> Is there some trick to make this to work or would it require changes 
> into the OAPIF driver?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/50324593/attachment.html>

From sebastian.bullinger at iosb.fraunhofer.de  Tue Mar 23 10:47:43 2021
From: sebastian.bullinger at iosb.fraunhofer.de (Bullinger, Sebastian)
Date: Tue, 23 Mar 2021 17:47:43 +0000
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set of
 GCPs also rectifies the input images
Message-ID: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>

Dear gdal community,

I'm currently working with a set of satellite images that are geo-registered with a set of GCPs. To compute a geo-transform from the GCPs, I've been using gdalwarp with:

gdalwarp -of GTiff path/to/original/file path/to/warped/file

While "gdalwarp" correctly computes a transformation from the GCPs, at the same it also performs some kind of rectification / north-up image transformation. I'm not sure about the applied operation.

Presumably, the reason for this is that the original GCPs reflect a transformation with skew factors.
See the following transformations of the original and the warped image.

>>> import gdal
>>> dataset = gdal.Open("path/to/original/file")
>>> print(gdal.GCPsToGeoTransform(dataset.GetGCPs()))
(-58.57294039342205, -3.991598267026281e-06, 0.0, -34.451175177186684, -3.6492767328575985e-07, 3.1987810722132996e-06)

>>> import gdal
>>> dataset = gdal.Open("path/to/warped/file")
>>> print(dataset.GetGeoTransform())
(-58.577917916461026, 3.435846284510554e-06, 0.0, -34.44693359348493, 0.0, -3.435846284510554e-06)

The "rectification" result is very convenient, since it allows to use the images with an existing satellite image segmentation pipeline (which tiles the satellite images using geo-tiles)
However, in order to overlay the segmentations (performed on the "rectified" images) with the original images, I need some information about the transformation applied during "gdalwarp".

I've searched the documentation for more information - unfortunately without success.
For example, parameters like "-novshiftgrid" do not affect this transformation.

It would be very helpful, if someone could shed some light on the used "rectification".
What kind of operation is applied? What would be the correct term to search for?
Is it "only" a decomposition of the transform? Or does "gdalwarp" something else too?
Is there a possibility to access this information, while using "gdalwarp"? (Or can this operation also be done by hand?)
Does GDAL contain any functions to invert this "rectification" step - given the corresponding transformation used by "gdalwarp"?

Best regards,
Sebastian



--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/23a6c141/attachment-0001.html>

From mateusz at loskot.net  Tue Mar 23 12:58:52 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 23 Mar 2021 20:58:52 +0100
Subject: [gdal-dev] Fwd: [IIIF-Discuss] IIIF Maps Community Call on
 Wednesday March 24
In-Reply-To: <5b9e8595-3ed1-4a48-b57d-fb91b99cf0cen@googlegroups.com>
References: <5b9e8595-3ed1-4a48-b57d-fb91b99cf0cen@googlegroups.com>
Message-ID: <CABUeae9w9vRt8f9J6hAiXVT5MP=mUZ0FUbv+u4V9O96g_Avn5g@mail.gmail.com>

FYI, GDAL is on the agenda

ML

---------- Forwarded message ---------
From: Eliot Jordan <eliot.jordan at gmail.com>
Date: Tue, 23 Mar 2021 at 20:42
Subject: [IIIF-Discuss] IIIF Maps Community Call on Wednesday March 24
To: IIIF Discuss <iiif-discuss at googlegroups.com>


Map Enthusiasts -

We have a maps community call scheduled for Wednesday March 24 at 8:00
AM PDT, 11:00 AM EDT, 15:00 UK, 16:00 CET.

Zoom Link: https://stanford.zoom.us/j/99449304468?pwd=UUNzMmFtV2dXSWs2MjVicnplS29LUT09

Agenda:

https://docs.google.com/document/d/1Rfl7ufHFJtLUgLdaZUjX8CPEsmy0fPW3MWY_GPDRHl4

If you have anything you?d like to talk about or any related work
you?ve done recently please add to the agenda!

See you there.

- Eliot
______
Eliot Jordan
Geospatial Infrastructure Developer
Princeton University Library

From even.rouault at spatialys.com  Tue Mar 23 14:20:08 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Mar 2021 22:20:08 +0100
Subject: [gdal-dev] BAG Driver - dimension size being written in the
 wrong order
In-Reply-To: <cdf12223-567c-80b4-7686-459d1ed1bc85@spatialys.com>
References: <CAFe6qKhPXdgRvZYGLaXXY3sG4zHqPGZHMnPWM4YSaBrhwNBpTg@mail.gmail.com>
 <cdf12223-567c-80b4-7686-459d1ed1bc85@spatialys.com>
Message-ID: <4d1c741d-0951-42d8-8d0f-e8cc567fa7db@spatialys.com>

Hi,

For posterity: just to note that the below fix turned out to be incorrect

See https://github.com/OSGeo/gdal/issues/3605 for more details and the 
appropriate fix

Even

Le 19/03/2021 ? 18:22, Even Rouault a ?crit?:
>
> Eric,
>
> I believe you're right. I've just fixed the issue by changing the 
> template resource XML file used by the GDAL driver in
>
> https://github.com/OSGeo/gdal/commit/1d2e7bc8fcde059de853335fee390479d457be06
>
> So you can easily workaround the issue by updating this file in your 
> existing installation.
>
> For a next time, better file an issue at 
> https://github.com/OSGeo/gdal/issues however. This will minimize the 
> risk that your report is lost because nobody was able to address it at 
> the very moment where they read it.
>
> Even
>
> Le 19/03/2021 ? 17:51, Eric Younkin - NOAA Federal via gdal-dev a ?crit?:
>> Hello,
>>
>> Using conda installed GDAL 3.2.1
>>
>> I think I've stumbled on a bug with the BAG driver.? It seems as 
>> though when you use Create() to make a BAG, it writes the 
>> dimensionSize xml attribute in the wrong order. It sets the column 
>> dimension size to the row dimensionSize xml attribute, and row to 
>> column.? I found this on examining the xml manually, see blob below.
>>
>> <gmd:axisDimensionProperties>
>> ? ? ? ? <gmd:MD_Dimension>
>> ? ? ? ? ? <gmd:dimensionName>
>> ? ? ? ? ? ? <gmd:MD_DimensionNameTypeCode 
>> codeList="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode 
>> <http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#MD_DimensionNameTypeCode>" 
>> codeListValue="row">row</gmd:MD_DimensionNameTypeCode>
>> ? ? ? ? ? </gmd:dimensionName>
>> *? ? ? ? ? <gmd:dimensionSize>
>> ? ? ? ? ? ? <gco:Integer>546</gco:Integer>
>> ? ? ? ? ? </gmd:dimensionSize>*
>> ? ? ? ? ? <gmd:resolution>
>> ? ? ? ? ? ? <gco:Measure uom="m">2.0</gco:Measure>
>> ? ? ? ? ? </gmd:resolution>
>> ? ? ? ? </gmd:MD_Dimension>
>> ? ? ? </gmd:axisDimensionProperties>
>>
>> This bug does not affect viewing the BAG in QGIS, as it seems like 
>> QGIS just computes the size using the actual array.? I found that 
>> GDAL created BAGs would not load in Caris, a software for viewing 
>> bathymetric data.? I believe that is because Caris is using the 
>> dimensionSize xml instead of calculating size from the data.? If I 
>> swap row/col dimensionSize, the BAG then works in Caris.
>>
>> Seems like a relatively simple fix (assuming I am right about this), 
>> please let me know if I need to submit it somewhere else.
>>
>> Thanks,
>> Eric
>>
>> -- 
>> Eric Younkin
>> Physical Scientist
>> NOAA OCS, Hydrographic Systems and Technology Branch
>> 1315 East-West Highway
>> N/CS11, Room 6604
>> Silver Spring, MD 20910
>> Office: 240-847-8208
>> Cell: 828-331-8197
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/61c12ae9/attachment.html>

From Matt.Wilkie at yukon.ca  Tue Mar 23 16:27:30 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 23 Mar 2021 23:27:30 +0000
Subject: [gdal-dev] SUMMARY RE: What is lost when converting 12 bit imagery
 to 8 bit?
Message-ID: <228f993b4d014a64914c15d60ce1c0d4@app-exch2.gov.yk.ca>

The position I've moved to after reading through and thinking about all the responses here and gdal-dev<https://lists.osgeo.org/mailman/listinfo/gdal-dev> (here<http://osgeo-org.1560.x6.nabble.com/gdal-dev-What-is-lost-when-converting-12-bit-imagery-to-8-bit-tt5482829.html>) is we need to ask for both 8 & 12 bit from the vendors.

8 bit is for visual use. It can be viewed on all displays and most programs without modification. Since this is 90%+ of usage scenarios having them ready to go is definitely beneficial to us. Additionally having the processing done in advance by a skilled supplier will save a lot of work -- and might even be a better visualization than we could produce ourselves. Producing good visuals across scenes systematically is not trivial.

The main drawback to automated 12 to 8 bit RGB products is that they tend to be very suboptimal in dark or bright areas (shadows, water, snow). This is because the fixed white and black point anchors needed to span the scene sets can not account for individual scene variation.

We should also ask imagery suppliers to describe their bit-reduction process. This will allow us to determine how it affects our application.

In audio terms, its a bit like cutting either the bass or the treble - what is best for you depends on what you want to do with the music afterwards.

  *   8 bits allows numbers from 0 to 255 (2 to the power of 8 values)
  *   12 bits allows numbers from 0 to 4095 (2 to the power of 12 values)

The simplest way conversion from 12 to 8 bits is setting the last four to zero, and the remaining bits shifted right four places. Its like rounding decimals to the nearest 100 or 1000.

What's lost is fine detail. For example the ability to discriminate between values of 9 and 12 - if rounded to the nearest 10 they'll both be 10 in the data. The same happens with binary data truncated from 12 to 8 bits.

There are other methods that could be used that preserve detail in certain regions of the intensity - perhaps the highest and lowest parts of the image can be encoded with less dynamic range, taking fewer bits, by a non-linear scaling of the raw data. That leaves more bits to encode the data in the middle of the intensity region, which might be the most important part.

12 bit is for analytic use. When using imagery for analytically (e.g. converting pixel values to reflectance) you probably do not want the 8 bit product. With the 12 bit values of 0-4095 compared to 8 bit's 0-255 there is opportunity to do careful scene dependent conversion in a way that best brings out the details available in the source data. There are a lot of methods, and they generally require time and patience. The challenge is sometimes called tone mapping<https://en.wikipedia.org/wiki/Tone_mapping#:%7E:text=Tone%20mapping%20is%20a%20technique,a%20more%20limited%20dynamic%20range.>.

Planet has a blog post describing how to manually convert single scene imagery to 8bit RGB at A Hands-On Guide to Color Correction<https://www.planet.com/pulse/color-correction/>. It's a good article as it explains the theory for how certain things are done instead of merely giving a recipe of steps.

To get GDAL in the mix: gdal-translate<https://gis.stackexchange.com/questions/tagged/gdal-translate> can do simple tone mapping for you with the -scale<https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale> parameter.

A special note regarding SPOT6/7: 12 bit orthorectified (level 2 processing) does not appear to available as a standard product, so to get 8 & 12 it might be necessary to purchase both Standard and Primary products. See SPOT image user guide<https://earth.esa.int/eogateway/documents/20142/37627/SPOT-6-7-imagery-user-guide.pdf>, particularly the descriptions of different processing levels in section 2.3.

________________________________

This answer summarized from the contributions of @rs_burner, @spacedman, @Vince, Frank Warmerdam, and Patrick Young. Thank you!


Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/fff7ab6c/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Tue Mar 23 16:32:48 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 23 Mar 2021 23:32:48 +0000
Subject: [gdal-dev] SUMMARY RE: What is lost when converting 12 bit
 imagery to 8 bit?
In-Reply-To: <4710a7502fc94262baf2c3e6b1d302f8@app-exch2.gov.yk.ca>
References: <4710a7502fc94262baf2c3e6b1d302f8@app-exch2.gov.yk.ca>
Message-ID: <78a8e145cbfa415da77c858475361262@app-exch2.gov.yk.ca>

The summary also posted to the GIS Stack Exchange thread https://gis.stackexchange.com/questions/390315/what-is-lost-when-converting-12-bit-imagery-to-8-bit/.

Also in the credits I neglected to include @nils-erik-j?rgensen.

-Matt

From: Matt.Wilkie
Sent: March 23, 2021 4:27 PM
To: 'gdal dev' <gdal-dev at lists.osgeo.org>
Subject: SUMMARY RE: [gdal-dev] What is lost when converting 12 bit imagery to 8 bit?


The position I've moved to after reading through and thinking about all the responses here and gdal-dev<https://lists.osgeo.org/mailman/listinfo/gdal-dev> (here<http://osgeo-org.1560.x6.nabble.com/gdal-dev-What-is-lost-when-converting-12-bit-imagery-to-8-bit-tt5482829.html>) is we need to ask for both 8 & 12 bit from the vendors.

8 bit is for visual use. It can be viewed on all displays and most programs without modification. Since this is 90%+ of usage scenarios having them ready to go is definitely beneficial to us. Additionally having the processing done in advance by a skilled supplier will save a lot of work -- and might even be a better visualization than we could produce ourselves. Producing good visuals across scenes systematically is not trivial.

The main drawback to automated 12 to 8 bit RGB products is that they tend to be very suboptimal in dark or bright areas (shadows, water, snow). This is because the fixed white and black point anchors needed to span the scene sets can not account for individual scene variation.

We should also ask imagery suppliers to describe their bit-reduction process. This will allow us to determine how it affects our application.

In audio terms, its a bit like cutting either the bass or the treble - what is best for you depends on what you want to do with the music afterwards.

  *   8 bits allows numbers from 0 to 255 (2 to the power of 8 values)
  *   12 bits allows numbers from 0 to 4095 (2 to the power of 12 values)

The simplest way conversion from 12 to 8 bits is setting the last four to zero, and the remaining bits shifted right four places. Its like rounding decimals to the nearest 100 or 1000.

What's lost is fine detail. For example the ability to discriminate between values of 9 and 12 - if rounded to the nearest 10 they'll both be 10 in the data. The same happens with binary data truncated from 12 to 8 bits.

There are other methods that could be used that preserve detail in certain regions of the intensity - perhaps the highest and lowest parts of the image can be encoded with less dynamic range, taking fewer bits, by a non-linear scaling of the raw data. That leaves more bits to encode the data in the middle of the intensity region, which might be the most important part.

12 bit is for analytic use. When using imagery for analytically (e.g. converting pixel values to reflectance) you probably do not want the 8 bit product. With the 12 bit values of 0-4095 compared to 8 bit's 0-255 there is opportunity to do careful scene dependent conversion in a way that best brings out the details available in the source data. There are a lot of methods, and they generally require time and patience. The challenge is sometimes called tone mapping<https://en.wikipedia.org/wiki/Tone_mapping#:%7E:text=Tone%20mapping%20is%20a%20technique,a%20more%20limited%20dynamic%20range.>.

Planet has a blog post describing how to manually convert single scene imagery to 8bit RGB at A Hands-On Guide to Color Correction<https://www.planet.com/pulse/color-correction/>. It's a good article as it explains the theory for how certain things are done instead of merely giving a recipe of steps.

To get GDAL in the mix: gdal-translate<https://gis.stackexchange.com/questions/tagged/gdal-translate> can do simple tone mapping for you with the -scale<https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale> parameter.

A special note regarding SPOT6/7: 12 bit orthorectified (level 2 processing) does not appear to available as a standard product, so to get 8 & 12 it might be necessary to purchase both Standard and Primary products. See SPOT image user guide<https://earth.esa.int/eogateway/documents/20142/37627/SPOT-6-7-imagery-user-guide.pdf>, particularly the descriptions of different processing levels in section 2.3.

________________________________

This answer summarized from the contributions of @rs_burner, @spacedman, @Vince, Frank Warmerdam, and Patrick Young. Thank you!


Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210323/7e1e77e1/attachment-0001.html>

From rajeshreddy82 at gmail.com  Tue Mar 23 22:05:14 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Tue, 23 Mar 2021 22:05:14 -0700 (MST)
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at
 a time
In-Reply-To: <1616143424618-0.post@n6.nabble.com>
References: <1616043680903-0.post@n6.nabble.com>
 <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>
 <1616133947913-0.post@n6.nabble.com> <1616143424618-0.post@n6.nabble.com>
Message-ID: <1616562314333-0.post@n6.nabble.com>

I am referring to the below image -

<http://osgeo-org.1560.x6.nabble.com/file/t386336/Convex_ConcaveHull.png> 





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 24 00:32:54 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 24 Mar 2021 00:32:54 -0700 (MST)
Subject: [gdal-dev] OSGeo.OGR.Geometry: Union the mutiple geometries at
 a time
In-Reply-To: <1616562314333-0.post@n6.nabble.com>
References: <1616043680903-0.post@n6.nabble.com>
 <0f61cf2b-3ba9-ca93-ffbd-2e2b64e997e7@spatialys.com>
 <1616133947913-0.post@n6.nabble.com> <1616143424618-0.post@n6.nabble.com>
 <1616562314333-0.post@n6.nabble.com>
Message-ID: <1616571174274-0.post@n6.nabble.com>

Hi,

I can't imagine any connection between Union and Convex/Concave hull. Union
of the points in the example image is a MultiPoint geometry. The hull is a
single geometry that encloses the input geometries, in this case it is a
polygon. There is no need to consider hulls when doing Union. Generally
hulls are useful things and I believe that GDAL supports convex hull through
GEOS. Convex hull is well defined and there is only one correct solution
when it is computed. It is also included in the OGC Simple Feature standard. 
Concave hulls are not as well defined and different implementations give
different results. If you need concave hull I would recommend PostGIS
https://postgis.net/docs/ST_ConcaveHull.html.

-Jukka Rahkonen- 

 


MRRAJESH wrote
> I am referring to the below image -
> 
> &lt;http://osgeo-org.1560.x6.nabble.com/file/t386336/Convex_ConcaveHull.png&gt; 
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Stefan.Moebius at amdocs.com  Wed Mar 24 01:41:44 2021
From: Stefan.Moebius at amdocs.com (Stefan Moebius)
Date: Wed, 24 Mar 2021 08:41:44 +0000
Subject: [gdal-dev] Gdal Java
In-Reply-To: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
Message-ID: <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>

Hi Paul,
I find the binaries provided at https://www.gisinternals.com/release.php the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)

If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service <https://www.amdocs.com/about/email-terms-of-service>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/03ae9bdb/attachment.html>

From even.rouault at spatialys.com  Wed Mar 24 12:02:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Mar 2021 20:02:57 +0100
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
Message-ID: <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>

Hi Idan,

>
> Motion:
>
> Adopt RFC 78: gdal-utils?package 
> <https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst>?(formatted 
> version).

+1.

Sorry for the late reply.

I'd like some efforts on the documentation front regarding this new 
addition. The new doc page hhttps://gdal.org/api/python.html (initiated 
from the swig/python/README.rst. not sure how we could avoid duplication 
of content in the tree. perhaps some inclusion of README.rst from the 
docs) would need to be enriched with details from the RFC, to explain 
how the 2 pypi packages relate, and the potential issues in the 
workflows you indicate.

The HOWTO-RELEASE procedure will likely need to be adjusted.

I'll appreciate too that you actively support users in github issues / 
email traffic on this topic once this is deployed in a release.

Best regards,

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/d2af5446/attachment.html>

From idan at miara.com  Wed Mar 24 12:16:12 2021
From: idan at miara.com (Idan Miara)
Date: Wed, 24 Mar 2021 21:16:12 +0200
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
Message-ID: <CAEDrt3_tXxbECgG8kNvEhuZGnaEMZyNq8QdyookD3x+4J1jj2g@mail.gmail.com>

Hi Even,

Thanks for supporting this RFC!
I'd be happy to improve the documentation of this addition once it's merged.
I can volunteer to be listed as the maintainer of the new package if it
makes sense.
Please tag me if you see a related issue that I've missed.

Idan

On Wed, 24 Mar 2021 at 21:03, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Idan,
>
>
> Motion:
>
> Adopt RFC 78: gdal-utils package
> <https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst> (formatted
> version).
>
> +1.
>
> Sorry for the late reply.
>
> I'd like some efforts on the documentation front regarding this new
> addition. The new doc page hhttps://gdal.org/api/python.html (initiated
> from the swig/python/README.rst. not sure how we could avoid duplication of
> content in the tree. perhaps some inclusion of README.rst from the docs)
> would need to be enriched with details from the RFC, to explain how the 2
> pypi packages relate, and the potential issues in the workflows you
> indicate.
>
> The HOWTO-RELEASE procedure will likely need to be adjusted.
>
> I'll appreciate too that you actively support users in github issues /
> email traffic on this topic once this is deployed in a release.
>
> Best regards,
>
> Even
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/242fc9c4/attachment.html>

From schwehr at gmail.com  Wed Mar 24 12:57:13 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 24 Mar 2021 12:57:13 -0700
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
Message-ID: <CACmBxyuJp18vzJPz528Z8t5B3wu3vT3xdnd3K35H+c3oD8up+A@mail.gmail.com>

+0  KurtS

I have some vague undefined unease about this.  Even's comments help
diminish that some.  I don't see strong enough arguments for me to vote for
it.

On Wed, Mar 24, 2021 at 12:03 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Idan,
>
>
> Motion:
>
> Adopt RFC 78: gdal-utils package
> <https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst> (formatted
> version).
>
> +1.
>
> Sorry for the late reply.
>
> I'd like some efforts on the documentation front regarding this new
> addition. The new doc page hhttps://gdal.org/api/python.html (initiated
> from the swig/python/README.rst. not sure how we could avoid duplication of
> content in the tree. perhaps some inclusion of README.rst from the docs)
> would need to be enriched with details from the RFC, to explain how the 2
> pypi packages relate, and the potential issues in the workflows you
> indicate.
>
> The HOWTO-RELEASE procedure will likely need to be adjusted.
>
> I'll appreciate too that you actively support users in github issues /
> email traffic on this topic once this is deployed in a release.
>
> Best regards,
>
> Even
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/b0b6d032/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 24 13:38:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 24 Mar 2021 13:38:48 -0700 (MST)
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
Message-ID: <1616618328717-0.post@n6.nabble.com>

+0


I have a positive feeling but unfortunately I do not really understand the
topic well enough to say yes or no.

-Jukka Rahkonen-


Idan Miara wrote
> Hi all,
> 
> Having heard no further comments regarding RFC78
> &lt;https://github.com/OSGeo/gdal/pull/3260&gt;.
> 
> Motion:
> 
> Adopt RFC 78: gdal-utils package
> &lt;https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst&gt;
> (formatted
> version).
> 
> *A personal note*
> The points I've mentioned in the motivation section have affected me
> personally - Enough to spend a considerable time to write and
> implement this RFC.
> Other developers and users might be encountering the same issues and thus
> would benefit from this RFC.
> 
> I have contributed a fair amount of Python code to gdal in the past year.
> If you find my contributions to gdal
> &lt;https://github.com/OSGeo/gdal/pulls?q=is%3Apr+author%3Aidanmiara+&gt;
> valuable and want me to have more time to further contribute to gdal then
> please accept this RFC even if you don't personally appreciate the
> motinations I've mentioned.
> Otherwise I would need to continue maintaining this branch to workaround
> the issues I've mentioned (which is time consuming by itself because I
> need
> to keep rebasing it and resolve conflicts), thus having less time to
> actually contribute to gdal and improve the gdal-utils modules.
> 
> `gdal-utils` wheels that were built and uploaded by myself to address
> these
> issues are already available in pypi
> &lt;https://pypi.org/project/gdal-utils/&gt;.
> If this PR is accepted, I will give complete control over this pypi
> package
> to the gdal project owners. Yanking "unofficial" gdal-utils packages is
> accepted if necessary once this motion is passed and the first official
> gdal-utils wheel is released on pypi.
> 
> Idan
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From alansnow21 at gmail.com  Wed Mar 24 13:51:12 2021
From: alansnow21 at gmail.com (Alan Snow)
Date: Wed, 24 Mar 2021 15:51:12 -0500
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <1616618328717-0.post@n6.nabble.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
Message-ID: <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>

One recommendation I have for this RFC would be to remove gdal_utils
entirely from the main GDAL repository and into its own repository.
The main reason would be to test against multiple versions of GDAL to
ensure compatibility. Compatibility across versions is a main goal of this
RFC if I understand correctly, so that is why I bring it up.

Hope that is helpful,
Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/6d36eb88/attachment.html>

From idan at miara.com  Wed Mar 24 14:07:51 2021
From: idan at miara.com (Idan Miara)
Date: Wed, 24 Mar 2021 23:07:51 +0200
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
Message-ID: <CAEDrt3-7MvsWuO5NzX-8AOFcEHe4HYXyfitpFbQN8LpxsimynQ@mail.gmail.com>

Hi Alan,

Thanks for your comment.
That was actually my original idea, but while I was planning to implement
it appeared that it requires much more additional work, mainly because the
tests of the core and the utils are not separated and tested as a single CI
pipeline.
I also didn't want to make such a disruption especially before I know that
the general idea is accepted.

Many drafts later I ended up implementing it the way I believe would be the
most future compatible and the least disruptive.

It might be a good idea to reconsider that later so we can take it one step
at a time.

Idan

On Wed, 24 Mar 2021, 22:51 Alan Snow, <alansnow21 at gmail.com> wrote:

> One recommendation I have for this RFC would be to remove gdal_utils
> entirely from the main GDAL repository and into its own repository.
> The main reason would be to test against multiple versions of GDAL to
> ensure compatibility. Compatibility across versions is a main goal of this
> RFC if I understand correctly, so that is why I bring it up.
>
> Hope that is helpful,
> Alan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/03313d82/attachment-0001.html>

From howard at hobu.co  Wed Mar 24 15:18:41 2021
From: howard at hobu.co (Howard Butler)
Date: Wed, 24 Mar 2021 17:18:41 -0500
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
Message-ID: <2B47F905-2A9A-47CC-BE6C-C7C36D01859E@hobu.co>



> On Mar 24, 2021, at 2:02 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi Idan,
> 
>> 
>> Motion:
>> 
>> Adopt RFC 78: gdal-utils package (formatted version).
> +1.
> 
> Sorry for the late reply.
> 
> I'd like some efforts on the documentation front regarding this new addition. The new doc page hhttps://gdal.org/api/python.html (initiated from the swig/python/README.rst. not sure how we could avoid duplication of content in the tree. perhaps some inclusion of README.rst from the docs) would need to be enriched with details from the RFC, to explain how the 2 pypi packages relate, and the potential issues in the workflows you indicate.
> 
> The HOWTO-RELEASE procedure will likely need to be adjusted.
> 
> I'll appreciate too that you actively support users in github issues / email traffic on this topic once this is deployed in a release.

I'm also + 1 on this RFC. Like Alan, I too would like to eventually go further and kick the bindings out of the main library entirely to release on their own schedule, but that cannot happen given our current autotest dependency. 

This is a good start, but clear documentation will be needed so things don't fall out of sync and to prevent people from being confused. 

Howard

From Matt.Wilkie at yukon.ca  Wed Mar 24 16:26:31 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 24 Mar 2021 23:26:31 +0000
Subject: [gdal-dev] interpreting gdalcompare results
Message-ID: <eb46ac4925554c2cbf5c14fe8dc69537@app-exch2.gov.yk.ca>

Hi,

How do I find out more info on what the differences are from gdalcompare? What does "New: n" mean?

$ gdalcompare source-image.tif  xxx-001.tif
Files differ at the binary level.
Band 1 overview count difference:
  Golden: 0
  New:    5
Band 2 overview count difference:
  Golden: 0
  New:    5
Band 3 overview count difference:
  Golden: 0
  New:    5
Differences Found: 4


I've used raster math to subtract one image from the other and the result is zero in all pixels.


Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/cd220450/attachment.html>

From sean at mapbox.com  Wed Mar 24 17:30:44 2021
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 24 Mar 2021 18:30:44 -0600
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
Message-ID: <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>

Hi,

On Wed, Mar 24, 2021 at 2:51 PM Alan Snow <alansnow21 at gmail.com> wrote:

> One recommendation I have for this RFC would be to remove gdal_utils
> entirely from the main GDAL repository and into its own repository.
> The main reason would be to test against multiple versions of GDAL to
> ensure compatibility. Compatibility across versions is a main goal of this
> RFC if I understand correctly, so that is why I bring it up.
>
> Hope that is helpful,
> Alan
>

Thank you for bringing this up and joining the discussion, Alan!. I agree
that gdal_utils is a lot like projects we work on together in this respect.

I scanned the RFC and am confused about what I read in
https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst#how-to-upgrade-the-utils-without-upgrading-the-bindings
.

> pip install a wheel overwrites whichever files already exist (even if
installed by a different package) If you pip install gdal then pip install
gdal-utils you'd get the utils from gdal-utils. If later you do again pip
install gdal with a different version then you'd get the utils from gdal
again, and so on. (it doesn't seem that it matters which version is a
bigger number, just which one you installed later)

How certain are we of this? I am not 100% certain that this is true or that
the behavior of pip here is totally specified. Even if it is true, it seems
like there is a lot of potential for confusion. I think it would be much
better for users if we didn't have 2 distributions contending for the same
namespace.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210324/311950eb/attachment.html>

From idan at miara.com  Wed Mar 24 22:33:24 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Mar 2021 07:33:24 +0200
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
Message-ID: <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>

Hi Sean,

Removing the utils from the gdal sdist/wheel means that people who install
gdal won't have the utils unless they installed the utils wheel.

My understanding from the earlier discussion was that it is too disruptive
and confusing for the average user, thus I ended up with this mix
compromise.

Regarding the pip behaviour, that was my conclusion upon testing it. You
may verify it easily :)

I think that is a good compromise for now and we might want to add a
warning somehow in gdal 3.3 if we want to do a proper split in some major
version later, say in gdal 3.5, along with the other cleanups that are
planned for 3.5.

Idan

On Thu, 25 Mar 2021, 02:31 Sean Gillies via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> On Wed, Mar 24, 2021 at 2:51 PM Alan Snow <alansnow21 at gmail.com> wrote:
>
>> One recommendation I have for this RFC would be to remove gdal_utils
>> entirely from the main GDAL repository and into its own repository.
>> The main reason would be to test against multiple versions of GDAL to
>> ensure compatibility. Compatibility across versions is a main goal of this
>> RFC if I understand correctly, so that is why I bring it up.
>>
>> Hope that is helpful,
>> Alan
>>
>
> Thank you for bringing this up and joining the discussion, Alan!. I agree
> that gdal_utils is a lot like projects we work on together in this respect.
>
> I scanned the RFC and am confused about what I read in
> https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst#how-to-upgrade-the-utils-without-upgrading-the-bindings
> .
>
> > pip install a wheel overwrites whichever files already exist (even if
> installed by a different package) If you pip install gdal then pip install
> gdal-utils you'd get the utils from gdal-utils. If later you do again pip
> install gdal with a different version then you'd get the utils from gdal
> again, and so on. (it doesn't seem that it matters which version is a
> bigger number, just which one you installed later)
>
> How certain are we of this? I am not 100% certain that this is true or
> that the behavior of pip here is totally specified. Even if it is true, it
> seems like there is a lot of potential for confusion. I think it would be
> much better for users if we didn't have 2 distributions contending for the
> same namespace.
>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/ced267db/attachment-0001.html>

From paul.malm at lfv.se  Thu Mar 25 02:38:25 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Thu, 25 Mar 2021 09:38:25 +0000
Subject: [gdal-dev] Gdal Java
In-Reply-To: <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
Message-ID: <4e5fa62b66ae4eee89497491d22b51fe@lfv.se>

Hi Stefan,
Thanks for responding on my guestion for help!

-I've downloaded release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip
and unzipped it to C:\Program Files\Gdal_321.
-Then I added to the system path:
C:\Program Files\Gdal_321\bin\gdal\java and C:\Program Files\Gdal_321\bin.
-Restarted the computer.
Entered Eclipse.
-Set the Class-path to C:\Program Files\Gdal_321\bin\gdal\java\gdal.jar
-Run a simple java program with the commands:
gdalJNI jni= new gdalJNI();
if(jni.HasThreadSupport())
...

The error code I get is:
Native library load failed.
java.lang.UnsatisfiedLinkError: no gdalalljni in java.library.path
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)
            at org.geotools.jdbcconnection.raster.TransformRaster.<init>(TransformRaster.java:64)
            at org.geotools.jdbcconnection.raster.TransformRaster.main(TransformRaster.java:51)


Then I copy the gdalalljni.dll to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\
And gets the following error code:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: Det g?r inte att hitta den angivna proceduren
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)


Both GDAL and Java are windows x64.
I would be more then grateful for further help.
/Paul

Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r Stefan Moebius via gdal-dev
Skickat: den 24 mars 2021 09:42
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java


Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
Hi Paul,
I find the binaries provided at https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6 the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)
If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service<https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/166abf98/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar 25 04:01:41 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 25 Mar 2021 04:01:41 -0700 (MST)
Subject: [gdal-dev] interpreting gdalcompare results
In-Reply-To: <eb46ac4925554c2cbf5c14fe8dc69537@app-exch2.gov.yk.ca>
References: <eb46ac4925554c2cbf5c14fe8dc69537@app-exch2.gov.yk.ca>
Message-ID: <1616670101234-0.post@n6.nabble.com>

Hi,

There is some documentation in https://gdal.org/programs/gdalcompare.html:

Synopsis:
gdalcompare.py [-sds] golden_file new_file

<golden_file>
The file that is considered correct, referred to as the golden file.

<new_file>
The file being compared to the golden file, referred to as the new file.

In your report the golden file (call is as the first file if it feels
better) has zero overview levels and the second file has 5 overview levels.

At pixel level there are no differences. The script does not inform about
similarities. You can also have a look at the comments in the script itself.
You can find it from your computer and from GitHub
https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/osgeo/utils/gdalcompare.py.

-Jukka Rahkonen-


mhw-at-yg wrote
> Hi,
> 
> How do I find out more info on what the differences are from gdalcompare?
> What does "New: n" mean?
> 
> $ gdalcompare source-image.tif  xxx-001.tif
> Files differ at the binary level.
> Band 1 overview count difference:
>   Golden: 0
>   New:    5
> Band 2 overview count difference:
>   Golden: 0
>   New:    5
> Band 3 overview count difference:
>   Golden: 0
>   New:    5
> Differences Found: 4
> 
> 
> I've used raster math to subtract one image from the other and the result
> is zero in all pixels.
> 
> 
> Matt Wilkie
> Geomatics Analyst
> Environment | Technology, Innovation and Mapping
> T 867-667-8133 | Yukon.ca&lt;http://yukon.ca/&gt;
> Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From alansnow21 at gmail.com  Thu Mar 25 07:49:55 2021
From: alansnow21 at gmail.com (Alan Snow)
Date: Thu, 25 Mar 2021 09:49:55 -0500
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
Message-ID: <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>

> Removing the utils from the gdal sdist/wheel means that people who
install gdal won't have the utils unless they installed the utils wheel.

You mentioned that gdal_utils is now on pypi. Are you able to set it as a
dependency in the setup.py so it is installed when the main osgeo/gdal
python package is installed?

Best,
Alan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/e12e1182/attachment.html>

From hydrolithe at gmail.com  Thu Mar 25 08:08:20 2021
From: hydrolithe at gmail.com (Pierre)
Date: Thu, 25 Mar 2021 16:08:20 +0100
Subject: [gdal-dev] gdal_retile not enough memory
Message-ID: <CA+to5E_98VQ3+2mNZNOmCVYLJZcm-qLX9HDmVAzxqNpYQQj7rw@mail.gmail.com>

Hi,

I have a set of .jp2 files (orthophotos) which I want to use in Geoserver.
All the files are around 24,5 Go.

I transform all the .jp2 files in a .vrt :
gdalbuildvrt D:\ortho\ortho.vrt -srcnodata 255 -hidenodata
D:\ortho\2020\*.jp2

Then I launch a gdaladdo on the .vrt. The .ovr file created is around 11,9
Go :
gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL -r average D:\ortho\ortho.vrt 2 4
8 16 32 64

At the step of gdal_retile, I launch this command in GDAL 2.4.4 :
python gdal_retile.py -v -r bilinear -levels 4 -ps 2500 2500 -co
"COMPRESS=JPEG" -co "TILED=YES" -targetDir D:\ortho\tiles
D:\ortho\ortho.vrt

The program runs well (20440 tiles created) till an error message appears :
ERROR 1: Not enough memory to decode tile

ERROR 1: opj_decode() failed
ERROR 1:
D:\Donnees\bd_ortho\2020\25cm\07-2020-0785-6420-LA93-0M20-E080.jp2, band 1:
IReadBlock failed at X offset 0, Y offset 0: opj_decode() failed
D:\Donnees\bd_ortho\2020\25cm\07-2020-0785-6420-LA93-0M20-E080.jp2, band 1:
IReadBlock failed at X offset 0, Y offset 0: opj_decode() failed
Traceback (most recent call last):
File "gdal_retile.py", line 1022, in <module>
sys.exit(main(sys.argv))
File "gdal_retile.py", line 929, in main
dsCreatedTileIndex = tileImage(minfo, ti)
File "gdal_retile.py", line 358, in tileImage
createTile(minfo, offsetX, offsetY, width, height, tilename, OGRDS)
File "gdal_retile.py", line 502, in createTile
dec.uly + offsetY * dec.scaleY)
File "gdal_retile.py", line 269, in getDataSet
t_band.WriteRaster(tw_xoff, tw_yoff, tw_xsize, twysize, data)
File
"C:\Users\SIG-Pierre\AppData\Local\Programs\Python\Python37\lib\site-packages\osgeo\gdal.py",
line 2381, in Write Raster
return _gdal.Band_WriteRaster(self, *args, **kwargs)
TypeError: not a unicode string or a bytes

My computer is on Windows 10 (20H2), Intel core i7 and 16 Gb RAM.

Is there a problem with my computer (not enough RAM as the error message
says) or is there a problem in my "gdal_retile" command ? I am listening if
you have some advices.

Pierre
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/eb60cded/attachment.html>

From matt.wilkie at yukon.ca  Thu Mar 25 08:53:09 2021
From: matt.wilkie at yukon.ca (mhw-at-yg)
Date: Thu, 25 Mar 2021 08:53:09 -0700 (MST)
Subject: [gdal-dev] interpreting gdalcompare results
In-Reply-To: <1616670101234-0.post@n6.nabble.com>
References: <eb46ac4925554c2cbf5c14fe8dc69537@app-exch2.gov.yk.ca>
 <1616670101234-0.post@n6.nabble.com>
Message-ID: <1616687589608-0.post@n6.nabble.com>

Oohhh. A "doh!" moment. I did not see the word `overview` in "Band 1 overview
count difference:" heading. Sheesh. Thanks Jukka!



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew at aitchison.me.uk  Thu Mar 25 08:56:39 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 25 Mar 2021 15:56:39 +0000 (GMT)
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
Message-ID: <fc66e6cb-ba8f-9963-1ae0-48eedb6bfa77@aitchison.me.uk>

On Tue, 23 Mar 2021, Bullinger, Sebastian wrote:

> Dear gdal community,
>
> I'm currently working with a set of satellite images that are geo-registered with a set of GCPs. To compute a geo-transform from the GCPs, I've been using gdalwarp with:
>
> gdalwarp -of GTiff path/to/original/file path/to/warped/file
>
> While "gdalwarp" correctly computes a transformation from the GCPs, at the same it also performs some kind of rectification / north-up image transformation. I'm not sure about the applied operation.
>
> Presumably, the reason for this is that the original GCPs reflect a transformation with skew factors.
> See the following transformations of the original and the warped image.
>
>>>> import gdal
>>>> dataset = gdal.Open("path/to/original/file")
>>>> print(gdal.GCPsToGeoTransform(dataset.GetGCPs()))
> (-58.57294039342205, -3.991598267026281e-06, 0.0, -34.451175177186684, -3.6492767328575985e-07, 3.1987810722132996e-06)
>
>>>> import gdal
>>>> dataset = gdal.Open("path/to/warped/file")
>>>> print(dataset.GetGeoTransform())
> (-58.577917916461026, 3.435846284510554e-06, 0.0, -34.44693359348493, 0.0, -3.435846284510554e-06)
>
> The "rectification" result is very convenient, since it allows to use the images with an existing satellite image segmentation pipeline (which tiles the satellite images using geo-tiles)
> However, in order to overlay the segmentations (performed on the "rectified" images) with the original images, I need some information about the transformation applied during "gdalwarp".
>
> I've searched the documentation for more information - unfortunately without success.
> For example, parameters like "-novshiftgrid" do not affect this transformation.
>
> It would be very helpful, if someone could shed some light on the used "rectification".
> What kind of operation is applied? What would be the correct term to search for?
> Is it "only" a decomposition of the transform? Or does "gdalwarp" something else too?
> Is there a possibility to access this information, while using "gdalwarp"? (Or can this operation also be done by hand?)
> Does GDAL contain any functions to invert this "rectification" step - given the corresponding transformation used by "gdalwarp"?

I don't know the answers.

I *guess* that the rectification is not deliberate, but simply that the
output rectangle is aligned with the (target) spatial reference system 
(SRS).
Have you noticed whether the output image has no-data pixels at the 
edges, or crops the original ? I would expect it to do a little of each.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Thu Mar 25 09:08:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Mar 2021 17:08:01 +0100
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
Message-ID: <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>

Hi,

When creating an output file from scatch (either it doesn't exist, or 
-overwrite is used), gdalwarp will always produce a "north-up" image in 
the target CRS. This is by design of the utility. If you just want to 
subset, preserving the original orientation, use gdal_translate. In 
update mode of an existing target dataset however, gdalwarp will use the 
georeferencing attached to the target (so potentially not north-up).

How gdalwarp rectifies depends on content of the source dataset (GCP, 
geolocation arrays, RPCs), user switches and default behaviours. For a 
source dataset with GCPs, if you have < 6 GCPs, a linear fit will be 
used by default. For >= 6 GCPs, a 2nd order polynomial fit will be used. 
You may also use the -tps switch to ask for thin plate splines. The -to 
switch can also be used for finer control: see link pointed by 
https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-to

Even

Le 23/03/2021 ? 18:47, Bullinger, Sebastian a ?crit?:
> Dear gdal community,
>
> I'm currently working with a set of satellite images that are 
> geo-registered with a set of GCPs. To compute a geo-transform from the 
> GCPs, I've been using gdalwarp with:
>
> gdalwarp -of GTiff path/to/original/file path/to/warped/file
>
> While "gdalwarp" correctly computes a transformation from the GCPs, at 
> the same it also performs some kind of rectification / north-up image 
> transformation. I'm not sure about the applied operation.
>
> Presumably, the reason for this is that the original GCPs reflect a 
> transformation with skew factors.
> See the following transformations of the original and the warped image.
>
> >>> import gdal
> >>> dataset = gdal.Open("path/to/original/file")
> >>> print(gdal.GCPsToGeoTransform(dataset.GetGCPs()))
> (-58.57294039342205, -3.991598267026281e-06, 0.0, -34.451175177186684, 
> -3.6492767328575985e-07, 3.1987810722132996e-06)
>
> >>> import gdal
> >>> dataset = gdal.Open("path/to/warped/file")
> >>> print(dataset.GetGeoTransform())
> (-58.577917916461026, 3.435846284510554e-06, 0.0, -34.44693359348493, 
> 0.0, -3.435846284510554e-06)
>
> The "rectification" result is very convenient, since it allows to use 
> the images with an existing satellite image segmentation pipeline 
> (which tiles the satellite images using geo-tiles)
> However, in order to overlay the segmentations (performed on the 
> "rectified" images) with the original images, I need some information 
> about the transformation applied during "gdalwarp".
>
> I've searched the documentation for more information - unfortunately 
> without success.
> For example, parameters like "-novshiftgrid" do not affect this 
> transformation.
>
> It would be very helpful, if someone could shed some light on the used 
> "rectification".
> What kind of operation is applied? What would be the correct term to 
> search for?
> Is it "only" a decomposition of the transform? Or does "gdalwarp" 
> something else too?
> Is there a possibility to access this information, while 
> using"gdalwarp"? (Or can this operation also be done by hand?)
> Does GDAL contain any functions to invert this "rectification" step - 
> given the corresponding transformation used by "gdalwarp"?
>
> Best regards,
> Sebastian
>
>
> --
> Dr. Sebastian Bullinger
> Department Object Recognition
> Fraunhofer Institute of
> Optronics, Sytem Technologies and Image Exploitation IOSB
> Gutleuthausstr. 1, 76275 Ettlingen, Germany
> Phone +49 7243 992-197
> sebastian.bullinger at iosb.fraunhofer.de 
> <mailto:sebastian.bullinger at iosb.fraunhofer.de>
> www.iosb.fraunhofer.de 
> <https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/93bc1856/attachment-0001.html>

From sean.gillies at gmail.com  Thu Mar 25 09:12:20 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 25 Mar 2021 10:12:20 -0600
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CACmBxyuJp18vzJPz528Z8t5B3wu3vT3xdnd3K35H+c3oD8up+A@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <91f04c68-24cf-5b95-b389-0803371a45f9@spatialys.com>
 <CACmBxyuJp18vzJPz528Z8t5B3wu3vT3xdnd3K35H+c3oD8up+A@mail.gmail.com>
Message-ID: <CAOodmJp1Vvabe_v_LSPxKwC0nQiXN-9OJgpX_q6O4uc4ezwFPw@mail.gmail.com>

It looks to me like this RFC commits the project to spending more energy on
language bindings for the next few versions. I'm not enthusiastic about
that, but am not super opposed. So I'm a -0.

On Wed, Mar 24, 2021 at 1:58 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> +0  KurtS
>
> I have some vague undefined unease about this.  Even's comments help
> diminish that some.  I don't see strong enough arguments for me to vote for
> it.
>
> On Wed, Mar 24, 2021 at 12:03 PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi Idan,
>>
>>
>> Motion:
>>
>> Adopt RFC 78: gdal-utils package
>> <https://github.com/talos-gis/gdal/blob/Branch_rfc78_py_modules/gdal/doc/source/development/rfc/rfc78_gdal_utils_package.rst> (formatted
>> version).
>>
>> +1.
>>
>> Sorry for the late reply.
>>
>> I'd like some efforts on the documentation front regarding this new
>> addition. The new doc page hhttps://gdal.org/api/python.html (initiated
>> from the swig/python/README.rst. not sure how we could avoid duplication of
>> content in the tree. perhaps some inclusion of README.rst from the docs)
>> would need to be enriched with details from the RFC, to explain how the 2
>> pypi packages relate, and the potential issues in the workflows you
>> indicate.
>>
>> The HOWTO-RELEASE procedure will likely need to be adjusted.
>>
>> I'll appreciate too that you actively support users in github issues /
>> email traffic on this topic once this is deployed in a release.
>>
>> Best regards,
>>
>> Even
>>
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/7894d83a/attachment.html>

From idan at miara.com  Thu Mar 25 09:31:41 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Mar 2021 18:31:41 +0200
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
 <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
Message-ID: <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>

Hi Alan,

pip install gdal-utils
Will install also gdal as it is its dependency.

In case we will take the utils out of the gdal sdist - Even tough your
suggestion to add gdal-utils as a dependency to gdal would make `pip
install gdal` to also install both, it makes less sense to me as gdal does
not actually depend on gdal-utils and it might complicate things in other
ways. In that case, IMHO telling people who want to install the utils to
pip install gdal-utils makes more sense...

Idan

On Thu, 25 Mar 2021, 16:50 Alan Snow, <alansnow21 at gmail.com> wrote:

> > Removing the utils from the gdal sdist/wheel means that people who
> install gdal won't have the utils unless they installed the utils wheel.
>
> You mentioned that gdal_utils is now on pypi. Are you able to set it as a
> dependency in the setup.py so it is installed when the main osgeo/gdal
> python package is installed?
>
> Best,
> Alan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/6d1a706e/attachment.html>

From andrew at aitchison.me.uk  Thu Mar 25 09:39:15 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 25 Mar 2021 16:39:15 +0000 (GMT)
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
 <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
 <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
Message-ID: <97253368-26b7-4839-e17b-417686a1b079@aitchison.me.uk>


So if I currently have gdal, which includes the utils and I run
    pip --upgrade
I will get the new gdal without the utils but not gdal-utils,
so the upgrade will remove the utils functionality ?

On Thu, 25 Mar 2021, Idan Miara wrote:

> Hi Alan,
>
> pip install gdal-utils
> Will install also gdal as it is its dependency.
>
> In case we will take the utils out of the gdal sdist - Even tough your
> suggestion to add gdal-utils as a dependency to gdal would make `pip
> install gdal` to also install both, it makes less sense to me as gdal does
> not actually depend on gdal-utils and it might complicate things in other
> ways. In that case, IMHO telling people who want to install the utils to
> pip install gdal-utils makes more sense...
>
> Idan
>
> On Thu, 25 Mar 2021, 16:50 Alan Snow, <alansnow21 at gmail.com> wrote:
>
>>> Removing the utils from the gdal sdist/wheel means that people who
>> install gdal won't have the utils unless they installed the utils wheel.
>>
>> You mentioned that gdal_utils is now on pypi. Are you able to set it as a
>> dependency in the setup.py so it is installed when the main osgeo/gdal
>> python package is installed?
>>
>> Best,
>> Alan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From Daniel.Evans at jbarisk.com  Thu Mar 25 09:46:42 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Thu, 25 Mar 2021 16:46:42 +0000
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
 <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
 <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
Message-ID: <LO2P123MB4652325B99BEB5506A595E3395629@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>

There?s also the option of using the ?extra dependencies? functionality for Python packages, which is often used for including, well, extra features!

https://setuptools.readthedocs.io/en/latest/userguide/dependency_management.html#optional-dependencies

Again, it?s not entirely the intended use case ? the normal use is for real dependencies that enable/improve functionality of the base package ? but perhaps a bit more palatable.

(I do wonder if worrying about how to tie it to the GDAL PyPI package is really a major point for many users, given the difficulty of installing and compiling it compared to the pre-compiled packages from other sources. Will those changes affect those distributions, too?)

Dr Daniel Evans
Software Developer


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Idan Miara
Sent: 25 March 2021 16:32
To: Alan Snow <alansnow21 at gmail.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: RFC 78: gdal-utils package

Hi Alan,

pip install gdal-utils
Will install also gdal as it is its dependency.

In case we will take the utils out of the gdal sdist - Even tough your suggestion to add gdal-utils as a dependency to gdal would make `pip install gdal` to also install both, it makes less sense to me as gdal does not actually depend on gdal-utils and it might complicate things in other ways. In that case, IMHO telling people who want to install the utils to pip install gdal-utils makes more sense...

Idan

On Thu, 25 Mar 2021, 16:50 Alan Snow, <alansnow21 at gmail.com<mailto:alansnow21 at gmail.com>> wrote:
> Removing the utils from the gdal sdist/wheel means that people who install gdal won't have the utils unless they installed the utils wheel.

You mentioned that gdal_utils is now on pypi. Are you able to set it as a dependency in the setup.py so it is installed when the main osgeo/gdal python package is installed?

Best,
Alan

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image429892.png
Type: image/png
Size: 9886 bytes
Desc: image429892.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image302987.png
Type: image/png
Size: 651 bytes
Desc: image302987.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image207250.png
Type: image/png
Size: 715 bytes
Desc: image207250.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image972005.png
Type: image/png
Size: 966 bytes
Desc: image972005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image431562.png
Type: image/png
Size: 784 bytes
Desc: image431562.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/b7440d3e/attachment-0009.png>

From sebastian.bullinger at iosb.fraunhofer.de  Thu Mar 25 10:31:08 2021
From: sebastian.bullinger at iosb.fraunhofer.de (Bullinger, Sebastian)
Date: Thu, 25 Mar 2021 17:31:08 +0000
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>,
 <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>
Message-ID: <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>

Hi,


@Andrew

> Have you noticed whether the output image has no-data pixels at the
> edges, or crops the original ? I would expect it to do a little of each.

The output image has no-data values - it does not crop the image - which is inline with the description by Even (see below).


@Even

> When creating an output file from scatch (either it doesn't exist, or -overwrite is used),
> gdalwarp will always produce a "north-up" image in the target CRS.
> ...
> How gdalwarp rectifies depends on content of the source dataset (GCP, geolocation arrays, RPCs),
> user switches and default behaviours. For a source dataset with GCPs, if you have < 6 GCPs,
> a linear fit will be used by default. For >= 6 GCPs, a 2nd order polynomial fit will be used.

Thank you for clarifying this - this explains the results I'm observing.

Is it possible access the transformation used to rectify the images during the gdalwarp call?
At the moment, I feel that gdalwarp acts (w.r.t. the rectification) like a black box.
Maybe it would be reasonable to (optionally) provide some information about the rectification process?

If it is not possible to get this information, could you point out the code snippet that performs the rectification step?
Since GDAL's code base is quite large, it is not easy to find the appropriate location.

Thank you for your help - and sorry for the noise.


Best regards,
Sebastian



--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, March 25, 2021 5:08 PM
To: Bullinger, Sebastian; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Computing a geo-transform with gdalwarp from a set of GCPs also rectifies the input images


Hi,

When creating an output file from scatch (either it doesn't exist, or -overwrite is used), gdalwarp will always produce a "north-up" image in the target CRS. This is by design of the utility. If you just want to subset, preserving the original orientation, use gdal_translate. In update mode of an existing target dataset however, gdalwarp will use the georeferencing attached to the target (so potentially not north-up).

How gdalwarp rectifies depends on content of the source dataset (GCP, geolocation arrays, RPCs), user switches and default behaviours. For a source dataset with GCPs, if you have < 6 GCPs, a linear fit will be used by default. For >= 6 GCPs, a 2nd order polynomial fit will be used. You may also use the -tps switch to ask for thin plate splines. The -to switch can also be used for finer control: see link pointed by https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-to

Even

Le 23/03/2021 ? 18:47, Bullinger, Sebastian a ?crit :
Dear gdal community,

I'm currently working with a set of satellite images that are geo-registered with a set of GCPs. To compute a geo-transform from the GCPs, I've been using gdalwarp with:

gdalwarp -of GTiff path/to/original/file path/to/warped/file

While "gdalwarp" correctly computes a transformation from the GCPs, at the same it also performs some kind of rectification / north-up image transformation. I'm not sure about the applied operation.

Presumably, the reason for this is that the original GCPs reflect a transformation with skew factors.
See the following transformations of the original and the warped image.

>>> import gdal
>>> dataset = gdal.Open("path/to/original/file")
>>> print(gdal.GCPsToGeoTransform(dataset.GetGCPs()))
(-58.57294039342205, -3.991598267026281e-06, 0.0, -34.451175177186684, -3.6492767328575985e-07, 3.1987810722132996e-06)

>>> import gdal
>>> dataset = gdal.Open("path/to/warped/file")
>>> print(dataset.GetGeoTransform())
(-58.577917916461026, 3.435846284510554e-06, 0.0, -34.44693359348493, 0.0, -3.435846284510554e-06)

The "rectification" result is very convenient, since it allows to use the images with an existing satellite image segmentation pipeline (which tiles the satellite images using geo-tiles)
However, in order to overlay the segmentations (performed on the "rectified" images) with the original images, I need some information about the transformation applied during "gdalwarp".

I've searched the documentation for more information - unfortunately without success.
For example, parameters like "-novshiftgrid" do not affect this transformation.

It would be very helpful, if someone could shed some light on the used "rectification".
What kind of operation is applied? What would be the correct term to search for?
Is it "only" a decomposition of the transform? Or does "gdalwarp" something else too?
Is there a possibility to access this information, while using "gdalwarp"? (Or can this operation also be done by hand?)
Does GDAL contain any functions to invert this "rectification" step - given the corresponding transformation used by "gdalwarp"?

Best regards,
Sebastian



--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/052975ca/attachment.html>

From alansnow21 at gmail.com  Thu Mar 25 10:44:01 2021
From: alansnow21 at gmail.com (Alan Snow)
Date: Thu, 25 Mar 2021 12:44:01 -0500
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <LO2P123MB4652325B99BEB5506A595E3395629@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
 <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
 <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
 <LO2P123MB4652325B99BEB5506A595E3395629@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CAGybdFTd=CoR6e=rxn-a0299dYhpqi3cRjpfxXLU3mf7Yst6UA@mail.gmail.com>

> IMHO telling people who want to install the utils to pip install
gdal-utils makes more sense...

The circular dependency does make things tricky. Writing documentation
sounds like the way to go in this scenario.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/6b39208a/attachment.html>

From jluis at ualg.pt  Thu Mar 25 11:00:45 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 25 Mar 2021 18:00:45 +0000
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>,
 <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>
 <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>
Message-ID: <AM6PR04MB395941388060293F1C1DDA37A6629@AM6PR04MB3959.eurprd04.prod.outlook.com>

>Since GDAL's code base is quite large, it is not easy to find the appropriate location.

I have found that using Visual Studio Code is an unvaluable tool to navigate in large source codes.
To find a definition of a function one only have to right-click it and ask to go to its definition.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Bullinger, Sebastian
Sent: Thursday, March 25, 2021 5:31 PM
To: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Computing a geo-transform with gdalwarp from a set of GCPs also rectifies the input images

Hi,


@Andrew

> Have you noticed whether the output image has no-data pixels at the
> edges, or crops the original ? I would expect it to do a little of each.

The output image has no-data values - it does not crop the image - which is inline with the description by Even (see below).


@Even

> When creating an output file from scatch (either it doesn't exist, or -overwrite is used),
> gdalwarp will always produce a "north-up" image in the target CRS.
> ...
> How gdalwarp rectifies depends on content of the source dataset (GCP, geolocation arrays, RPCs),
> user switches and default behaviours. For a source dataset with GCPs, if you have < 6 GCPs,
> a linear fit will be used by default. For >= 6 GCPs, a 2nd order polynomial fit will be used.

Thank you for clarifying this - this explains the results I'm observing.

Is it possible access the transformation used to rectify the images during the gdalwarp call?
At the moment, I feel that gdalwarp acts (w.r.t. the rectification) like a black box.
Maybe it would be reasonable to (optionally) provide some information about the rectification process?

If it is not possible to get this information, could you point out the code snippet that performs the rectification step?
Since GDAL's code base is quite large, it is not easy to find the appropriate location.

Thank you for your help - and sorry for the noise.


Best regards,
Sebastian



--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>

________________________________
From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Thursday, March 25, 2021 5:08 PM
To: Bullinger, Sebastian; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Computing a geo-transform with gdalwarp from a set of GCPs also rectifies the input images


Hi,

When creating an output file from scatch (either it doesn't exist, or -overwrite is used), gdalwarp will always produce a "north-up" image in the target CRS. This is by design of the utility. If you just want to subset, preserving the original orientation, use gdal_translate. In update mode of an existing target dataset however, gdalwarp will use the georeferencing attached to the target (so potentially not north-up).

How gdalwarp rectifies depends on content of the source dataset (GCP, geolocation arrays, RPCs), user switches and default behaviours. For a source dataset with GCPs, if you have < 6 GCPs, a linear fit will be used by default. For >= 6 GCPs, a 2nd order polynomial fit will be used. You may also use the -tps switch to ask for thin plate splines. The -to switch can also be used for finer control: see link pointed by https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-to

Even
Le 23/03/2021 ? 18:47, Bullinger, Sebastian a ?crit :
Dear gdal community,

I'm currently working with a set of satellite images that are geo-registered with a set of GCPs. To compute a geo-transform from the GCPs, I've been using gdalwarp with:

gdalwarp -of GTiff path/to/original/file path/to/warped/file

While "gdalwarp" correctly computes a transformation from the GCPs, at the same it also performs some kind of rectification / north-up image transformation. I'm not sure about the applied operation.

Presumably, the reason for this is that the original GCPs reflect a transformation with skew factors.
See the following transformations of the original and the warped image.

>>> import gdal
>>> dataset = gdal.Open("path/to/original/file")
>>> print(gdal.GCPsToGeoTransform(dataset.GetGCPs()))
(-58.57294039342205, -3.991598267026281e-06, 0.0, -34.451175177186684, -3.6492767328575985e-07, 3.1987810722132996e-06)

>>> import gdal
>>> dataset = gdal.Open("path/to/warped/file")
>>> print(dataset.GetGeoTransform())
(-58.577917916461026, 3.435846284510554e-06, 0.0, -34.44693359348493, 0.0, -3.435846284510554e-06)

The "rectification" result is very convenient, since it allows to use the images with an existing satellite image segmentation pipeline (which tiles the satellite images using geo-tiles)
However, in order to overlay the segmentations (performed on the "rectified" images) with the original images, I need some information about the transformation applied during "gdalwarp".

I've searched the documentation for more information - unfortunately without success.
For example, parameters like "-novshiftgrid" do not affect this transformation.

It would be very helpful, if someone could shed some light on the used "rectification".
What kind of operation is applied? What would be the correct term to search for?
Is it "only" a decomposition of the transform? Or does "gdalwarp" something else too?
Is there a possibility to access this information, while using "gdalwarp"? (Or can this operation also be done by hand?)
Does GDAL contain any functions to invert this "rectification" step - given the corresponding transformation used by "gdalwarp"?

Best regards,
Sebastian



--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/a116f86f/attachment-0001.html>

From even.rouault at spatialys.com  Thu Mar 25 11:15:52 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Mar 2021 19:15:52 +0100
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
 <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>
 <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>
Message-ID: <45499db8-27cc-9f84-11c8-adc7b62168f0@spatialys.com>


> If it is not possible to get this information, could you point out the 
> code snippet that performs the rectification step?
> Since GDAL's code base is quite large, it is not easy to find the 
> appropriate location.
Entry point of the logic to compute the transformation from source pixel 
coordinates to target pixel coordinates

https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdaltransformer.cpp#L1380

And in the first step of this transformation, when using polynomial 
adjustment of GCPs, you'll use:

https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdal_crs.cpp

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210325/5c3581ca/attachment.html>

From matt.wilkie at yukon.ca  Thu Mar 25 15:11:36 2021
From: matt.wilkie at yukon.ca (mhw-at-yg)
Date: Thu, 25 Mar 2021 15:11:36 -0700 (MST)
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
Message-ID: <1616710296582-0.post@n6.nabble.com>

Having been away from gdal-dev for some years, happily existing as an end of
the line tool only user, and only recently re-engaging with the development
community I have nothing to say on the strength and validity the RFC. 

I would like to comment though that it doesn't have a high altitude overview
and say what gdal-utils is and where to look at it now. For instance is it
all the files in ./gdal/swig/python/scripts/? or gdal/swig/python/osgeo/? or
even gdal/swig/python? or somewhere else I haven't looked yet. It needn't be
a lot words (there's so much there already it's hard for a newcomer like me
to make out the structural bones). One sentence and a link would probably do
it.

I am excited about the prospect of a gdal-utils sub project, whether it
remains within the core repository or is carved off into it's own. It would
be a named place where my skills have a chance of contributing little
somethings, and I could easily ignore the much larger set of things I don't
understand in GDAL proper. ;-)

cheers,



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sebastian.bullinger at iosb.fraunhofer.de  Fri Mar 26 00:57:41 2021
From: sebastian.bullinger at iosb.fraunhofer.de (Bullinger, Sebastian)
Date: Fri, 26 Mar 2021 07:57:41 +0000
Subject: [gdal-dev] Computing a geo-transform with gdalwarp from a set
 of GCPs also rectifies the input images
In-Reply-To: <45499db8-27cc-9f84-11c8-adc7b62168f0@spatialys.com>
References: <e8f5b454711a48039405a1319dec4681@iosb.fraunhofer.de>
 <5c506172-af07-24f6-44fd-609e9126b82d@spatialys.com>
 <dc76e49edefa4a0bbafb603fe86c91e5@iosb.fraunhofer.de>,
 <45499db8-27cc-9f84-11c8-adc7b62168f0@spatialys.com>
Message-ID: <44998648bfa7457c80688c50a1a14059@iosb.fraunhofer.de>

Thank you for pointing out these references.


Best regards,

Sebastian


--
Dr. Sebastian Bullinger
Department Object Recognition
Fraunhofer Institute of
Optronics, Sytem Technologies and Image Exploitation IOSB
Gutleuthausstr. 1, 76275 Ettlingen, Germany
Phone +49 7243 992-197
sebastian.bullinger at iosb.fraunhofer.de<mailto:sebastian.bullinger at iosb.fraunhofer.de>
www.iosb.fraunhofer.de<https://webmail.iosb.fraunhofer.de/owa/redir.aspx?C=GM65JhP8Gk6mqlokIktWtqcWz_hm-dIIiaYxp7LDE5w39h4r54rwzTEQR1dXSKQtdNkO601Flpk.&URL=http%3a%2f%2fwww.iosb.fraunhofer.de%2f>
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, March 25, 2021 7:15:52 PM
To: Bullinger, Sebastian; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Computing a geo-transform with gdalwarp from a set of GCPs also rectifies the input images


If it is not possible to get this information, could you point out the code snippet that performs the rectification step?
Since GDAL's code base is quite large, it is not easy to find the appropriate location.
Entry point of the logic to compute the transformation from source pixel coordinates to target pixel coordinates

https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdaltransformer.cpp#L1380

And in the first step of this transformation, when using polynomial adjustment of GCPs, you'll use:

https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdal_crs.cpp

Even

--

http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/4dc87ec8/attachment.html>

From idan at miara.com  Fri Mar 26 04:56:58 2021
From: idan at miara.com (Idan Miara)
Date: Fri, 26 Mar 2021 14:56:58 +0300
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <LO2P123MB4652325B99BEB5506A595E3395629@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616618328717-0.post@n6.nabble.com>
 <CAGybdFQF8BYmM9jD2ZjxyjcoCzJf=x=PkZTfv4VV6VM9dB2Jkg@mail.gmail.com>
 <CADPhZXwhc5Ha-sWSt-hYoM9qaB-ZENzVNgRmTc4ty_HQahxrgQ@mail.gmail.com>
 <CAEDrt3-9f2HLg=PJBwRKSYYHqgAPHEHqEj78erkMcXgjozcZuw@mail.gmail.com>
 <CAGybdFTGivoYhiSfPSRZPF=WS011dqqya4viJak=EKJLNC9cDw@mail.gmail.com>
 <CAEDrt39L8BAAoS+g3fF0+ei77PtDLT59y05RFArLFUJzFp0XSA@mail.gmail.com>
 <LO2P123MB4652325B99BEB5506A595E3395629@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CAEDrt39dSH+xOW3QKZf=n35D_0wz=wojYsYG9EVQDoy-5T9k8w@mail.gmail.com>

Hi Daniel,

I see what you mean, And I agree that gdal-utils should not be a dependency
or an extra-dependency for gdal.

This issue would be relevant anyway only if we decide to remove the utils
from the gdal sdist, which is not suggested by this RFC as some members
didn't think it's preferable in the earlier discussion.
Regarding your reference to unofficial binary gdal-wheels, As they usually
offer a binary form of the sdist I believe that it should be the equivalent
of installing the sdist (i.e. if the utils are inside the sdist then they
will be inside the unofficial binary wheels).
I do agree that all the difficulty to install the sdist from pypi (at least
on Windows) is much bigger issue that we need to address (probably by
offering binary wheels, at least for Windows) then the issue of people need
to explicitly `pip install gdal-utils` if they want the utils.
I would advise that if the PSC members think it is a good idea to remove
the utils outside the gdal sdist then maybe to add the warning in 3.3 and
to execute it in 3.5 along with the other major cleanups.

Idan

On Thu, 25 Mar 2021 at 18:46, Daniel Evans <Daniel.Evans at jbarisk.com> wrote:

> There?s also the option of using the ?extra dependencies? functionality
> for Python packages, which is often used for including, well, extra
> features!
>
>
>
>
> https://setuptools.readthedocs.io/en/latest/userguide/dependency_management.html#optional-dependencies
>
>
>
> Again, it?s not entirely the intended use case ? the normal use is for
> real dependencies that enable/improve functionality of the base package ?
> but perhaps a bit more palatable.
>
>
>
> (I do wonder if worrying about how to tie it to the GDAL PyPI package is
> really a major point for many users, given the difficulty of installing and
> compiling it compared to the pre-compiled packages from other sources. Will
> those changes affect those distributions, too?)
>
>
>
> *Dr Daniel Evans*
>
> Software Developer
>
>
> e:  *Daniel.Evans at jbarisk.com* <Daniel.Evans at jbarisk.com>
> t:  *+44 (0)1756 799919* <+44%20(0)1756%20799919>
> *www.jbarisk.com* <http://www.jbarisk.com/>
> [image: Facebook] <https://www.facebook.com/TheFloodPeople>
> [image: LinkedIn] <https://www.linkedin.com/company/jba-risk-management/>
> [image: Twitter] <https://twitter.com/JBARisk>
> [image: YouTube]
> <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
>
> All JBA Risk Management's email messages contain confidential information
> and are intended only for the individual(s) named. If you are not the named
> addressee you should not disseminate, distribute or copy this e-mail.
> Please notify the sender immediately by email if you have received this
> email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North
> Yorkshire, BD23 3FD, England.
>
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *On Behalf Of *Idan
> Miara
> *Sent:* 25 March 2021 16:32
> *To:* Alan Snow <alansnow21 at gmail.com>
> *Cc:* gdal dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Motion: RFC 78: gdal-utils package
>
>
>
> Hi Alan,
>
>
>
> pip install gdal-utils
>
> Will install also gdal as it is its dependency.
>
>
>
> In case we will take the utils out of the gdal sdist - Even tough your
> suggestion to add gdal-utils as a dependency to gdal would make `pip
> install gdal` to also install both, it makes less sense to me as gdal does
> not actually depend on gdal-utils and it might complicate things in other
> ways. In that case, IMHO telling people who want to install the utils to
> pip install gdal-utils makes more sense...
>
>
>
> Idan
>
>
>
> On Thu, 25 Mar 2021, 16:50 Alan Snow, <alansnow21 at gmail.com> wrote:
>
> > Removing the utils from the gdal sdist/wheel means that people who
> install gdal won't have the utils unless they installed the utils wheel.
>
>
>
> You mentioned that gdal_utils is now on pypi. Are you able to set it as a
> dependency in the setup.py so it is installed when the main osgeo/gdal
> python package is installed?
>
>
>
> Best,
>
> Alan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image429892.png
Type: image/png
Size: 9886 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image302987.png
Type: image/png
Size: 651 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image207250.png
Type: image/png
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image972005.png
Type: image/png
Size: 966 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image431562.png
Type: image/png
Size: 784 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/238b2460/attachment-0009.png>

From idan at miara.com  Fri Mar 26 05:29:15 2021
From: idan at miara.com (Idan Miara)
Date: Fri, 26 Mar 2021 15:29:15 +0300
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <1616710296582-0.post@n6.nabble.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616710296582-0.post@n6.nabble.com>
Message-ID: <CAEDrt3_3gEkSAV2+vs5Yf-RXfSQ5cGsYURAOvr5gqOMNPzbd8A@mail.gmail.com>

Hi Matt,

Point noted. I've updated the Summary section:

Idan
Summary

This RFC suggests to put all the GDAL python modules (formly scripts),
except from the GDAL core SWIG bindings, into their own distribution on
pypi. The GDAL python sub-package osgeo.utils (introduced in GDAL 3.2)
would be renamed into a package named osgeo_utils.

The standalone python scripts from GDAL <= 3.1 were transformed to
osgeo.utils in GDAL 3.2. For backwards compatibility these scripts still
exist and function as tiny wrappers around the python modules. Users of
these scripts would not be effected from this RFC as the scripts would
continue to function in GDAL 3.3 in the same way as in GDAL <= 3.2.

To allow maximum backwards compatibility, The osgeo package (which includes
the GDAL core SWIG bindings) and the osgeo_utils package will continue to
be distributed in a single sdist named gdal in pypi.

In addition, a new pure python wheel distribution named gdal-utils will be
available in pypi under the name gdal-utils.

This will allow users who wish to upgrade the utils without upgrading the
bindings to do so with pip install --upgrade gdal-utils (see more details
in the following sections).


On Fri, 26 Mar 2021 at 00:11, mhw-at-yg <matt.wilkie at yukon.ca> wrote:

> Having been away from gdal-dev for some years, happily existing as an end
> of
> the line tool only user, and only recently re-engaging with the development
> community I have nothing to say on the strength and validity the RFC.
>
> I would like to comment though that it doesn't have a high altitude
> overview
> and say what gdal-utils is and where to look at it now. For instance is it
> all the files in ./gdal/swig/python/scripts/? or gdal/swig/python/osgeo/?
> or
> even gdal/swig/python? or somewhere else I haven't looked yet. It needn't
> be
> a lot words (there's so much there already it's hard for a newcomer like me
> to make out the structural bones). One sentence and a link would probably
> do
> it.
>
> I am excited about the prospect of a gdal-utils sub project, whether it
> remains within the core repository or is carved off into it's own. It would
> be a named place where my skills have a chance of contributing little
> somethings, and I could easily ignore the much larger set of things I don't
> understand in GDAL proper. ;-)
>
> cheers,
>
>
>
> -----
> -Matt
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/e9b77995/attachment.html>

From Matt.Wilkie at yukon.ca  Fri Mar 26 08:57:02 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Fri, 26 Mar 2021 15:57:02 +0000
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <CAEDrt3_3gEkSAV2+vs5Yf-RXfSQ5cGsYURAOvr5gqOMNPzbd8A@mail.gmail.com>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616710296582-0.post@n6.nabble.com>
 <CAEDrt3_3gEkSAV2+vs5Yf-RXfSQ5cGsYURAOvr5gqOMNPzbd8A@mail.gmail.com>
Message-ID: <f73a864769d84224838f3d4dd1c1dfce@app-exch2.gov.yk.ca>

Thanks, that?s exactly the info I needed to get oriented.

-Matt

From: Idan Miara <idan at miara.com>
Sent: March 26, 2021 5:29 AM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: RFC 78: gdal-utils package

Hi Matt,

Point noted. I've updated the Summary section:

Idan
Summary

This RFC suggests to put all the GDAL python modules (formly scripts), except from the GDAL core SWIG bindings, into their own distribution on pypi. The GDAL python sub-package osgeo.utils (introduced in GDAL 3.2) would be renamed into a package named osgeo_utils.

The standalone python scripts from GDAL <= 3.1 were transformed to osgeo.utils in GDAL 3.2. For backwards compatibility these scripts still exist and function as tiny wrappers around the python modules. Users of these scripts would not be effected from this RFC as the scripts would continue to function in GDAL 3.3 in the same way as in GDAL <= 3.2.

To allow maximum backwards compatibility, The osgeo package (which includes the GDAL core SWIG bindings) and the osgeo_utils package will continue to be distributed in a single sdist named gdal in pypi.

In addition, a new pure python wheel distribution named gdal-utils will be available in pypi under the name gdal-utils.

This will allow users who wish to upgrade the utils without upgrading the bindings to do so with pip install --upgrade gdal-utils (see more details in the following sections).


On Fri, 26 Mar 2021 at 00:11, mhw-at-yg <matt.wilkie at yukon.ca<mailto:matt.wilkie at yukon.ca>> wrote:
Having been away from gdal-dev for some years, happily existing as an end of
the line tool only user, and only recently re-engaging with the development
community I have nothing to say on the strength and validity the RFC.

I would like to comment though that it doesn't have a high altitude overview
and say what gdal-utils is and where to look at it now. For instance is it
all the files in ./gdal/swig/python/scripts/? or gdal/swig/python/osgeo/? or
even gdal/swig/python? or somewhere else I haven't looked yet. It needn't be
a lot words (there's so much there already it's hard for a newcomer like me
to make out the structural bones). One sentence and a link would probably do
it.

I am excited about the prospect of a gdal-utils sub project, whether it
remains within the core repository or is carved off into it's own. It would
be a named place where my skills have a chance of contributing little
somethings, and I could easily ignore the much larger set of things I don't
understand in GDAL proper. ;-)

cheers,



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/254fb5a3/attachment-0001.html>

From hbarrett at edac.unm.edu  Fri Mar 26 09:14:22 2021
From: hbarrett at edac.unm.edu (Hays Barrett)
Date: Fri, 26 Mar 2021 10:14:22 -0600 (MDT)
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can result
 in data loss.
Message-ID: <694250640.2345334.1616775262896.JavaMail.zimbra@edac.unm.edu>

If the gcps stretch the image beyond the dimensions of the original raster it appears to clip the data that sits outside of the original raster dimensions rather than increase the raster dimensions to fit the stretched data . 
Is this the expected behavior? 
If so is there a way to increase the dimensions of a raster so there is no data loss? 
Thanks, 
-Hays 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/deea2a3a/attachment.html>

From idan at miara.com  Fri Mar 26 09:30:13 2021
From: idan at miara.com (Idan Miara)
Date: Fri, 26 Mar 2021 19:30:13 +0300
Subject: [gdal-dev] Motion: RFC 78: gdal-utils package
In-Reply-To: <f73a864769d84224838f3d4dd1c1dfce@app-exch2.gov.yk.ca>
References: <CAEDrt3_tCze2rcS6OynmFhQUfX2d5MZK5CDWqzZe0L4GB=ijjA@mail.gmail.com>
 <1616710296582-0.post@n6.nabble.com>
 <CAEDrt3_3gEkSAV2+vs5Yf-RXfSQ5cGsYURAOvr5gqOMNPzbd8A@mail.gmail.com>
 <f73a864769d84224838f3d4dd1c1dfce@app-exch2.gov.yk.ca>
Message-ID: <CAEDrt3_bYYVKtDJSXub7Qmb5+vushCen8NeKzwk1fn_P60+7Pw@mail.gmail.com>

Thanks for everyone who participated!

I declare this motion passed with the following votes from PSC members:

+1 from EvenR, HowardB
+0 from KurtS, JukkaR
-0 from SeanG

Idan

On Fri, 26 Mar 2021, 18:57 , <Matt.Wilkie at yukon.ca> wrote:

> Thanks, that?s exactly the info I needed to get oriented.
>
>
>
> -Matt
>
>
>
> *From:* Idan Miara <idan at miara.com>
> *Sent:* March 26, 2021 5:29 AM
> *To:* Matt.Wilkie <Matt.Wilkie at yukon.ca>
> *Cc:* gdal dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Motion: RFC 78: gdal-utils package
>
>
>
> Hi Matt,
>
>
>
> Point noted. I've updated the Summary section:
>
>
>
> Idan
> Summary
>
> This RFC suggests to put all the GDAL python modules (formly scripts),
> except from the GDAL core SWIG bindings, into their own distribution on
> pypi. The GDAL python sub-package osgeo.utils (introduced in GDAL 3.2)
> would be renamed into a package named osgeo_utils.
>
> The standalone python scripts from GDAL <= 3.1 were transformed to
> osgeo.utils in GDAL 3.2. For backwards compatibility these scripts still
> exist and function as tiny wrappers around the python modules. Users of
> these scripts would not be effected from this RFC as the scripts would
> continue to function in GDAL 3.3 in the same way as in GDAL <= 3.2.
>
> To allow maximum backwards compatibility, The osgeo package (which
> includes the GDAL core SWIG bindings) and the osgeo_utils package will
> continue to be distributed in a single sdist named gdal in pypi.
>
> In addition, a new pure python wheel distribution named gdal-utils will be
> available in pypi under the name gdal-utils.
>
> This will allow users who wish to upgrade the utils without upgrading the
> bindings to do so with pip install --upgrade gdal-utils (see more details
> in the following sections).
>
>
>
>
>
> On Fri, 26 Mar 2021 at 00:11, mhw-at-yg <matt.wilkie at yukon.ca> wrote:
>
> Having been away from gdal-dev for some years, happily existing as an end
> of
> the line tool only user, and only recently re-engaging with the development
> community I have nothing to say on the strength and validity the RFC.
>
> I would like to comment though that it doesn't have a high altitude
> overview
> and say what gdal-utils is and where to look at it now. For instance is it
> all the files in ./gdal/swig/python/scripts/? or gdal/swig/python/osgeo/?
> or
> even gdal/swig/python? or somewhere else I haven't looked yet. It needn't
> be
> a lot words (there's so much there already it's hard for a newcomer like me
> to make out the structural bones). One sentence and a link would probably
> do
> it.
>
> I am excited about the prospect of a gdal-utils sub project, whether it
> remains within the core repository or is carved off into it's own. It would
> be a named place where my skills have a chance of contributing little
> somethings, and I could easily ignore the much larger set of things I don't
> understand in GDAL proper. ;-)
>
> cheers,
>
>
>
> -----
> -Matt
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/9b75c402/attachment.html>

From matt.wilkie at yukon.ca  Fri Mar 26 10:31:37 2021
From: matt.wilkie at yukon.ca (mhw-at-yg)
Date: Fri, 26 Mar 2021 10:31:37 -0700 (MST)
Subject: [gdal-dev] gdal_retile not enough memory
In-Reply-To: <CA+to5E_98VQ3+2mNZNOmCVYLJZcm-qLX9HDmVAzxqNpYQQj7rw@mail.gmail.com>
References: <CA+to5E_98VQ3+2mNZNOmCVYLJZcm-qLX9HDmVAzxqNpYQQj7rw@mail.gmail.com>
Message-ID: <1616779897003-0.post@n6.nabble.com>

just a shot in the dark, but maybe increasing GDAL_CACHEMAX would help? 

> You need to enlarge cache size (GDAL_CACHEMAX) so that it can fit the 
> uncompressed tiles of one single row (count tiles in the row, not pixels.)
>
> ceil(126015/128)*3*8*128*128 = 387 118 080 = half a gigabyte

>From my example where 126015 is the number of pixels in the row and tile
size is 128x128.

Thanks go to Darafei in
http://osgeo-org.1560.x6.nabble.com/gdal-dev-nearblack-on-multi-GB-images-very-slow-td5482527.html




-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From hydrolithe at gmail.com  Fri Mar 26 10:54:11 2021
From: hydrolithe at gmail.com (Pedrogeo)
Date: Fri, 26 Mar 2021 10:54:11 -0700 (MST)
Subject: [gdal-dev] gdal_retile not enough memory
In-Reply-To: <1616779897003-0.post@n6.nabble.com>
References: <CA+to5E_98VQ3+2mNZNOmCVYLJZcm-qLX9HDmVAzxqNpYQQj7rw@mail.gmail.com>
 <1616779897003-0.post@n6.nabble.com>
Message-ID: <1616781251165-0.post@n6.nabble.com>

Hi,

Thanks for the tip. I will try with this option and I tell you if this
works. 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From idan at miara.com  Fri Mar 26 12:56:17 2021
From: idan at miara.com (Idan Miara)
Date: Fri, 26 Mar 2021 22:56:17 +0300
Subject: [gdal-dev] Python Wheels for gdal
In-Reply-To: <CAEDrt3-OTzoNVe1f7G4DDPk+O-1Zcgp1=yfst--LM2ACGkyTXA@mail.gmail.com>
References: <CAHtCBniKAStXMsA8gg=QoyYeGRdgT19_QGrCpDS2RwhNaGRX6Q@mail.gmail.com>
 <2004643.y9WdgZ42uR@even-i700>
 <CADPhZXx5+tPznCqLOnTkJv1Nx8tMT9H=n+4dEs3BCUTX+bwGkg@mail.gmail.com>
 <5814936.ysQ6HM8itc@even-i700>
 <CAEDrt3-ppbYF8JFEZ0jSU3gb5ta+EeQrBFJLeqOq3uH-Hf6uCA@mail.gmail.com>
 <CAFLLRpLyBCKvaZG5a5CiDmEUKjD+DO70KjXtqEesFEthH4_H2g@mail.gmail.com>
 <CAEDrt3-OTzoNVe1f7G4DDPk+O-1Zcgp1=yfst--LM2ACGkyTXA@mail.gmail.com>
Message-ID: <CAEDrt3-bhtbEr99SB38TbPH9wVhcs+-jcP8gDjocmiBmA3Hhxg@mail.gmail.com>

Hi all,

I'm wondering how difficult it would be to build the windows wheels with
the windows builder on the github CI
<https://github.com/OSGeo/gdal/blob/master/.github/workflows/windows_build.yml>,
.
I imagine we would need to install all the supported python versions to
build all the pyd files.
We might want to build a win32 version if anyone still cares about those.

Does someone have a different idea ? maybe a standalone builder script? but
then someone would need to run it manually I guess.

Idan

On Tue, 23 Feb 2021 at 16:13, Idan Miara <idan at miara.com> wrote:

> Hi Rob,
>
> Good point.
> I don't know - I've added Christoph to this thread.
> Christoph - can you share with us any build scripts or source file changes
> you make in order to build these wheels?
>
> I was able to combine the cp37+cp38+cp39 from Christoph's wheels for each
> platform by extracting the wheel files and repacking them in a single wheel
> per platform using a custom setup.py+setup.cfg
> The pyd files are very small so the overhead in wheel size is negligible.
> https://github.com/talos-gis/gdal-win
> Running build_all.bat creates:
> gdal-3.2.1-py37.py38.py39-none-win_amd64.whl
> gdal-3.2.1-py37.py38.py39-none-win32.whl
> (Note that this batch does not build the sources, just repacks the wheels)
>
> Idan.
>
>
> On Tue, 23 Feb 2021 at 16:02, Robert Coup <robert.coup at koordinates.com>
> wrote:
>
>> Hi Idan,
>>
>> On Wed, 17 Feb 2021 at 12:24, Idan Miara <idan at miara.com> wrote:
>>
>>> From what I can see, the gdal302.dll inside
>>> https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal doesn't depend on any
>>> non-windows DLL. All its dependencies are statically linked.
>>>
>>> Maybe until a better solution is found, and to remedy all the windows
>>> users who just want to `pip install gdal`,
>>> We could push Christoph Gohlke's wheels to pypi ?
>>>
>>
>> Do you know if the build scripts for Christoph Gohlke's GDAL/related
>> builds are available? I don't think we could push any binaries on behalf of
>> GDAL unless people can reproduce or adapt them.
>>
>> Rob :)
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/13dd27c5/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 26 13:59:36 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 26 Mar 2021 13:59:36 -0700 (MST)
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can
 result in data loss.
In-Reply-To: <694250640.2345334.1616775262896.JavaMail.zimbra@edac.unm.edu>
References: <694250640.2345334.1616775262896.JavaMail.zimbra@edac.unm.edu>
Message-ID: <1616792376226-0.post@n6.nabble.com>

Hi,

Please give an exact example. Preferably with a raster that can be created
from command line with gdal_create followed by other required commands. Or
alternatively Python code that re-produces the issue.

-Jukka Rahkonen-



Hays Barrett wrote
> If the gcps stretch the image beyond the dimensions of the original raster
> it appears to clip the data that sits outside of the original raster
> dimensions rather than increase the raster dimensions to fit the stretched
> data . 
> Is this the expected behavior? 
> If so is there a way to increase the dimensions of a raster so there is no
> data loss? 
> Thanks, 
> -Hays 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Matt.Wilkie at yukon.ca  Fri Mar 26 16:40:17 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Fri, 26 Mar 2021 23:40:17 +0000
Subject: [gdal-dev] gdalbuildvrt and band descriptions
Message-ID: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>

Hi Folks,

`gdal_translate -b 1 infile.tif outfile.vrt` will copy the band 1 description to the output file.

`gdalbuild.vrt` on the other hand leaves the band descriptions behind. Is there a way to have vrt carry the description across also?

The project behind the question is to keep only the 4 bands of interest from 6 bands spread across two files (Red, Green, Blue and Near infrared) and merge them into a single output file, and keep all their metadata. VRT is a good intermediary except for it drops the band descriptions. (And some other metadata too, but I'm less concerned about that.)

Split each band into a single vrt:

gdal_translate -b 1 rgb.tif b-red.vrt
gdal_translate -b 2 rgb.tif b-grn.vrt
gdal_translate -b 3 rgb.tif b-blu.vrt
gdal_translate -b 1 infrared.tif b-nir.vrt

Stack the 4 bands we want back together:

gdalbuildvrt -separate rgb-nir.vrt b-red.vrt b-grn.vrt b-blu.vrt b-nir.vrt


Currently I'm hand editing the last stage vrt to put the description back in, but it's a pain and error prone. Is there a better way?

In the end I want arcgis desktop users to see something like the image on the left (plus the additional NIR band) instead of the right, which is what happens when there's no description.

[Machine generated alternative text: WorldView-3 Blue (0.450 - 0.510) um  WorldView-3 Green (0.510 - 0.380) um  WorldView-3 Red (0.630 - 0.690) um]

[Machine generated alternative text: @ Band_l  Band_2  Band_3]


Cheers,
Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/33b96f3f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5832 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/33b96f3f/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 3692 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210326/33b96f3f/attachment-0003.png>

From even.rouault at spatialys.com  Fri Mar 26 17:08:31 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Mar 2021 01:08:31 +0100
Subject: [gdal-dev] gdalbuildvrt and band descriptions
In-Reply-To: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
References: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
Message-ID: <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>

Matt,

copying over band description (and other band metadata) in the -separate 
case would make sense. Please file an enhancement ticket about that

Even

Le 27/03/2021 ? 00:40, Matt.Wilkie at yukon.ca a ?crit?:
>
> Hi Folks,
>
> `gdal_translate -b 1 infile.tif outfile.vrt` will copy the band 1 
> description to the output file.
>
> `gdalbuild.vrt` on the other hand leaves the band descriptions behind. 
> Is there a way to have vrt carry the description across also?
>
> The project behind the question is to keep only the 4 bands of 
> interest from 6 bands spread across two files (Red, Green, Blue and 
> Near infrared) and merge them into a single output file, and keep all 
> their metadata. VRT is a good intermediary except for it drops the 
> band descriptions. (And some other metadata too, but I?m less 
> concerned about that.)
>
> Split each band into a single vrt:
>
> gdal_translate -b 1 rgb.tif b-red.vrt
>
> gdal_translate -b 2 rgb.tif b-grn.vrt
>
> gdal_translate -b 3 rgb.tif b-blu.vrt
>
> gdal_translate -b 1 infrared.tif b-nir.vrt
>
> Stack the 4 bands we want back together:
>
> gdalbuildvrt -separate rgb-nir.vrt b-red.vrt b-grn.vrt b-blu.vrt b-nir.vrt
>
> Currently I?m hand editing the last stage vrt to put the description 
> back in, but it?s a pain and error prone. Is there a better way?
>
> In the end I want arcgis desktop users to see something like the image 
> on the left (plus the additional NIR band) instead of the right, which 
> is what happens when there?s no description.
>
> Machine generated alternative text: WorldView-3 Blue (0.450 - 0.510) 
> um WorldView-3 Green (0.510 - 0.380) um WorldView-3 Red (0.630 - 
> 0.690) um
>
> 	
>
> Machine generated alternative text: @ Band_l Band_2 Band_3
>
> Cheers,
>
> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | _Yukon.ca <http://yukon.ca/>_
>
> /Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/c4e9231f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/c4e9231f/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 3692 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/c4e9231f/attachment-0001.png>

From j1 at jimenezshaw.com  Sat Mar 27 04:44:50 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 27 Mar 2021 12:44:50 +0100
Subject: [gdal-dev] gdalbuildvrt and band descriptions
In-Reply-To: <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
References: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
 <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
Message-ID: <CADRrdKvacmXU57VFADASJ2YrehsJSqqeu1k-86k494iHFJj8Gw@mail.gmail.com>

Hi,

Is there any way in C++ to set the band description?
I know only SetColorInterpretation
<https://gdal.org/doxygen/classGDALRasterBand.html#a10346d2761b6cd4def98e0430305d5d5>
that
has a limited number of options (
https://gdal.org/doxygen/gdal_8h.html#ace76452d94514561fffa8ea1d2a5968c)
none of them for near infrared.

Thanks
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Sat, 27 Mar 2021 at 01:08, Even Rouault <even.rouault at spatialys.com>
wrote:

> Matt,
>
> copying over band description (and other band metadata) in the -separate
> case would make sense. Please file an enhancement ticket about that
>
> Even
> Le 27/03/2021 ? 00:40, Matt.Wilkie at yukon.ca a ?crit :
>
> Hi Folks,
>
>
>
> `gdal_translate -b 1 infile.tif outfile.vrt` will copy the band 1
> description to the output file.
>
>
>
> `gdalbuild.vrt` on the other hand leaves the band descriptions behind. Is
> there a way to have vrt carry the description across also?
>
>
>
> The project behind the question is to keep only the 4 bands of interest
> from 6 bands spread across two files (Red, Green, Blue and Near infrared)
> and merge them into a single output file, and keep all their metadata. VRT
> is a good intermediary except for it drops the band descriptions. (And some
> other metadata too, but I?m less concerned about that.)
>
>
>
> Split each band into a single vrt:
>
>
>
> gdal_translate -b 1 rgb.tif b-red.vrt
>
> gdal_translate -b 2 rgb.tif b-grn.vrt
>
> gdal_translate -b 3 rgb.tif b-blu.vrt
>
> gdal_translate -b 1 infrared.tif b-nir.vrt
>
>
>
> Stack the 4 bands we want back together:
>
>
>
> gdalbuildvrt -separate rgb-nir.vrt b-red.vrt b-grn.vrt b-blu.vrt b-nir.vrt
>
>
>
>
>
> Currently I?m hand editing the last stage vrt to put the description back
> in, but it?s a pain and error prone. Is there a better way?
>
>
>
> In the end I want arcgis desktop users to see something like the image on
> the left (plus the additional NIR band) instead of the right, which is what
> happens when there?s no description.
>
>
>
> [image: Machine generated alternative text: WorldView-3 Blue (0.450 -
> 0.510) um WorldView-3 Green (0.510 - 0.380) um WorldView-3 Red (0.630 -
> 0.690) um]
>
> [image: Machine generated alternative text: @ Band_l Band_2 Band_3]
>
>
>
> Cheers,
>
> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>
> *Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.*
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/f45127fc/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/f45127fc/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 3692 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/f45127fc/attachment-0003.png>

From even.rouault at spatialys.com  Sat Mar 27 04:58:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Mar 2021 12:58:01 +0100
Subject: [gdal-dev] gdalbuildvrt and band descriptions
In-Reply-To: <CADRrdKvacmXU57VFADASJ2YrehsJSqqeu1k-86k494iHFJj8Gw@mail.gmail.com>
References: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
 <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
 <CADRrdKvacmXU57VFADASJ2YrehsJSqqeu1k-86k494iHFJj8Gw@mail.gmail.com>
Message-ID: <7f3fac89-b3b5-be25-b26a-e41b2c64ed0e@spatialys.com>

Javier,

Le 27/03/2021 ? 12:44, Javier Jimenez Shaw a ?crit?:
> Hi,
>
> Is there any way in C++ to set the band description?

GDALMajorObject::Description()


> I know only SetColorInterpretation 
> <https://gdal.org/doxygen/classGDALRasterBand.html#a10346d2761b6cd4def98e0430305d5d5>?that 
> has a limited number of options 
> (https://gdal.org/doxygen/gdal_8h.html#ace76452d94514561fffa8ea1d2a5968c 
> <https://gdal.org/doxygen/gdal_8h.html#ace76452d94514561fffa8ea1d2a5968c>) 
> none of them for near infrared.

Yes, the enumeration doesn't include infrared. Currently a few drivers 
use custom metadata items like NITF that can report 
BandName=NearInfrared/Infrared. Some also report wavelengths min/max in 
other metadata items.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/f76f3633/attachment.html>

From j1 at jimenezshaw.com  Sat Mar 27 05:42:23 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 27 Mar 2021 13:42:23 +0100
Subject: [gdal-dev] gdalbuildvrt and band descriptions
In-Reply-To: <7f3fac89-b3b5-be25-b26a-e41b2c64ed0e@spatialys.com>
References: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
 <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
 <CADRrdKvacmXU57VFADASJ2YrehsJSqqeu1k-86k494iHFJj8Gw@mail.gmail.com>
 <7f3fac89-b3b5-be25-b26a-e41b2c64ed0e@spatialys.com>
Message-ID: <CADRrdKugEfr1SRve8z77+obVKu9Rd=YwXZkrZH4axF55+Kbucw@mail.gmail.com>

Thanks Even, very useful.

I didn't check the parent class, GDALMajorObject, my fault.

I use two sources (example for raster band):
- https://gdal.org/doxygen/classGDALRasterBand.html where I have to click
on the parent class(es), and study them recursively. Oh, now I realize that
the small arrow in front is a toggle (|> Public Member Functions inherited
from GDALMajorObject), that doesn't work (chromium and firefox). The
browser console says:
  classGDALRasterBand.html:246 Uncaught ReferenceError: toggleInherit is
not defined
      at HTMLTableCellElement.onclick (classGDALRasterBand.html:246)
- https://gdal.org/api/gdalrasterband_cpp.html where the name of the parent
class is not a link. Actually I do not find the parent class in the API
section. BTW, this page has a strange formatting, without spaces in the
function declarations, that makes complicated to read it.

My subconscious was expecting the list of all public methods, including
those that come from the ancestor classes, in the class documentation.

Cheers,
Javier.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Sat, 27 Mar 2021 at 12:58, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
> Le 27/03/2021 ? 12:44, Javier Jimenez Shaw a ?crit :
>
> Hi,
>
> Is there any way in C++ to set the band description?
>
> GDALMajorObject::Description()
>
> I know only SetColorInterpretation
> <https://gdal.org/doxygen/classGDALRasterBand.html#a10346d2761b6cd4def98e0430305d5d5> that
> has a limited number of options (
> https://gdal.org/doxygen/gdal_8h.html#ace76452d94514561fffa8ea1d2a5968c)
> none of them for near infrared.
>
> Yes, the enumeration doesn't include infrared. Currently a few drivers use
> custom metadata items like NITF that can report
> BandName=NearInfrared/Infrared. Some also report wavelengths min/max in
> other metadata items.
>
> Even
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/1dc6e46d/attachment.html>

From jp.perez.alcantara at gmail.com  Sat Mar 27 13:17:37 2021
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Sat, 27 Mar 2021 21:17:37 +0100
Subject: [gdal-dev] Relation between PROJ8, GDAL, and national grids
Message-ID: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>

Hi all,

I'm at a loss trying to understand the relationship between PROJ8, GDAL,
and how to use TIFF national grids. So far my findings are:

- PROJ8 is installed and cs2cs uses the grid to transform, performing an
extremely accurate shift;

- GDAL, compile on the above PROJ8, when using
gdaltransform, yields less accurate


---

Juan Pedro P?rez Alc?ntara

jp.perez.alcantara at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/952760df/attachment.html>

From jp.perez.alcantara at gmail.com  Sat Mar 27 13:25:44 2021
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Sat, 27 Mar 2021 21:25:44 +0100
Subject: [gdal-dev] Forget last message, I mess myself with shortcuts > PROJ8,
 GDAL, National grids
Message-ID: <CAMPpJ8hZ+MKjsyYpGRgP6tyKQBvZ4mKJ+ZhtDJJenefve5dQUg@mail.gmail.com>

Hi all,

I'm at a loss trying to understand the relationship between PROJ8, GDAL,
and how to use TIFF national grids PROJ8 data comes with. So far my
findings are the following.

PROJ8 is installed and cs2cs uses the grid to transform, performing an
extremely accurate shift.

GDAL, compiled on the above PROJ8, when running:

gdaltransform -s_srs epsg:23030 -t_srs epsg:25830

yields less accurate results, hinting the grid is not being used. However:

gdaltransform -s_srs "+proj=utm +zone=30 +ellps=intl +units=m +no_defs
+nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif" -t_srs "+proj=utm
+zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"

explicitly detailing the use of the grid, nails it. It would be great,
however, to get these results using the -s_srs epsg:XXXX syntax.

So I would like if anyone can help me in carrying out these options:

- can PROJ be used directly in GDAL using the CRS definitions in it? My
hope is that GDAL, somehow, uses PROJ definitions and uses the grid without
any further config;

- if the above is not possible and/or makes no sense, how can I tweak the
SRS PROJ or WKT definitions in GDAL to use the grid?

Any light you can shed on this will be mostly welcome. Thanks in advance.

---

Juan Pedro P?rez Alc?ntara

jp.perez.alcantara at gmail.com


---

Juan Pedro P?rez Alc?ntara

jp.perez.alcantara at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210327/7babf121/attachment.html>

From even.rouault at spatialys.com  Sat Mar 27 13:32:29 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Mar 2021 21:32:29 +0100
Subject: [gdal-dev] Relation between PROJ8, GDAL, and national grids
In-Reply-To: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>
References: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>
Message-ID: <77c6ae5b-bf63-b26e-7adb-055cdc02b0ec@spatialys.com>

Juan Pedro,


>
> I'm at a loss trying to understand the relationship between PROJ8, 
> GDAL, and how to use TIFF national grids. So far my findings are:
>
> - PROJ8 is installed and cs2cs uses the grid to transform, performing 
> an extremely accurate shift;
>
> - GDAL, compile on the above PROJ8, when using
> gdaltransform, yields less accurate

There's no fundamental reason for transforms with gdaltransform being 
less accurate than with cs2cs. You have to be much more specific with 
the exact gdaltransform invokation you are trying. And are you really 
sure that you use the PROJ version you think ? (check with ldd 
libgdal.so on Linux)

You can also set the PROJ_DEBUG=2 and CPL_DEBUG=ON environment variables 
and look at the traces.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jluis at ualg.pt  Sun Mar 28 10:57:15 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Sun, 28 Mar 2021 17:57:15 +0000
Subject: [gdal-dev] Where is the projection info stored in a GDAL dataset?
Message-ID: <AM6PR04MB395973D2E5D4C48C1F8C37C1A67F9@AM6PR04MB3959.eurprd04.prod.outlook.com>

Hi,

I am trying to use the GDAL shared lib directly from Julia and there are things that keep breaking my head. For example, the lines below use a mix of GMT and GDAL wrapper functions calls that WORK. First command creates a GMT dataset with two UTM points type with an assigned coordinate system. Next, in 2), I create a GDAL dataset of a LineString, convert it to geog in 3) and save it to file using the OGR_GMT driver in 4)

1) D2 = mat2ds([588977.324434907 4095339.69117669; 579551.921920776 4150721.71333039], proj="+proj=utm +zone=29");
2) ds = gmt2gd(D2);
3) ds2=ogr2ogr(ds, ["-t_srs", "+proj=longlat", "-overwrite"])
4) ogr2ogr(ds2, dest="lixo2.gmt")

Now the troubles. When I tried to use GDALSetProjection() I got an error like this

ERROR 6: /vsimem/##269: Dataset does not support the SetSpatialRef() method.

So I found that I could set the CRS with GDALDatasetCreateLayer() while creating a layer on the dataset (using the Memory driver)
(https://github.com/GenericMappingTools/GMT.jl/blob/master/src/gdal_utils.jl#L254)

But oddly trying to inquiry the *ds* with GDALGetSpatialRef() returns an empty pointer. I.e.:

julia> Gdal.GDALGetSpatialRef(ds.ptr)
Ptr{Nothing} @0x0000000000000000

However the CSR was well sored in some place because the ="lixo2.gmt" is correct (it has this)

# @VGMT1.0 @GLINESTRING
# @R-8.1/-8/37/37.5
# @Jp"+proj=longlat +datum=WGS84 +no_defs"
# @Jw"GEOGCS[\"unknown\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Longitude\",EAST],AXIS[\"Latitude\",NORTH]]"
# FEATURE_DATA
>
-8 37.0
-8.1 37.5

But my trouble is that I want to fish the CRS from the ogr2ogr dataset (the ds2 above) so that I can convert back from GDAL to GMT (which I already can) without having to save to a file in disk.

So basically my question is where is that CRS stored and how can I access it?

Thanks

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210328/010f66ef/attachment-0001.html>

From jp.perez.alcantara at gmail.com  Sun Mar 28 10:57:08 2021
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Sun, 28 Mar 2021 19:57:08 +0200
Subject: [gdal-dev] Relation between PROJ8, GDAL, and national grids
In-Reply-To: <77c6ae5b-bf63-b26e-7adb-055cdc02b0ec@spatialys.com>
References: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>
 <77c6ae5b-bf63-b26e-7adb-055cdc02b0ec@spatialys.com>
Message-ID: <CAMPpJ8gg0oo9KyEzaYL3Ke15nkU4s3nmh+O9agux_S33QOL=cA@mail.gmail.com>

Even, thanks for replying, and Javier, thanks for the advice about the list
etiquette. I will not change the subject in such events.

I'm sure it's the only PROJ installation because I'm building the libraries
in a Docker container. I've also conducted some more tests from zero, I've
found out I've been using some old tests I wrote some time ago that were
outdated and faulty, sorry about that. What follows is the detailed actions
I've taken.

With the IGN (Spanish National Geographic Institute) geodesic calculator I
performed a EPSG 23030 (ED50 UTM 30N) to EPSG 25830 (ETRS89 UTM 30N) shift:

235205.243 4142110.093  >  235094 4141906

I take this as the target result.

I set PROJ_LIB to /usr/local/share/proj and configured PROJ with a simple
./configure, no options.

Using cs2cs:

cs2cs EPSG:23030 EPSG:25830 > 235094.09 4141905.02

which I suppose is a 7 parameters shift, which is great, but not perfect,
can do better with the grid. Thus:

cs2cs +proj=utm +zone=30 +ellps=intl +units=m +no_defs
+nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif +to EPSG:25830 >
235094.00 4141906.00

which nails it. Again, my fault assuming PROJ was using the grid by default.

Then I compiled GDAL with another flat ./configure, it found a PROJ >= 6.
Using gdaltransform:

gdaltransform -s_srs EPSG:23030 -t_srs EPSG:25830 > 235094.087184815
4141905.01683498

which is consistent with cs2cs. Using:

gdaltransform -s_srs "+proj=utm +zone=30 +ellps=intl +units=m +no_defs
+nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif" -t_srs EPSG:25830 >
235094.000297496 4141905.99963473

which is consistent with cs2cs too.

Then, having solved this part of the issue, I would like very much if you
can advice me on how to "tweak" default definitions of the SRS to include
the use of the grid by default, which would be not absolutely necessary for
my application but a nice to have.

Also, just out of curiosity, why are PROJ and GDAL yielding slightly
different outputs (albeit perfectly ok both)? Is GDAL doing its own
calculations besides PROJ? Forgive my lack of deep understanding of the
GDAL inner architecture for I am an end user and not a developer. Just
curious.


Best regards,

---

Juan Pedro P?rez Alc?ntara

jp.perez.alcantara at gmail.com


On Sat, 27 Mar 2021 at 21:32, Even Rouault <even.rouault at spatialys.com>
wrote:

> Juan Pedro,
>
>
> >
> > I'm at a loss trying to understand the relationship between PROJ8,
> > GDAL, and how to use TIFF national grids. So far my findings are:
> >
> > - PROJ8 is installed and cs2cs uses the grid to transform, performing
> > an extremely accurate shift;
> >
> > - GDAL, compile on the above PROJ8, when using
> > gdaltransform, yields less accurate
>
> There's no fundamental reason for transforms with gdaltransform being
> less accurate than with cs2cs. You have to be much more specific with
> the exact gdaltransform invokation you are trying. And are you really
> sure that you use the PROJ version you think ? (check with ldd
> libgdal.so on Linux)
>
> You can also set the PROJ_DEBUG=2 and CPL_DEBUG=ON environment variables
> and look at the traces.
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210328/56be24fb/attachment.html>

From even.rouault at spatialys.com  Sun Mar 28 11:14:15 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Mar 2021 20:14:15 +0200
Subject: [gdal-dev] Where is the projection info stored in a GDAL
 dataset?
In-Reply-To: <AM6PR04MB395973D2E5D4C48C1F8C37C1A67F9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB395973D2E5D4C48C1F8C37C1A67F9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <2b9dc454-feb6-63b6-1d7a-de741dec8c1d@spatialys.com>

Joaquim,

ogr2ogr -t_srs passes the CRS object as an argument of the 
GDALDataset::CreateLayer() API

GDALDataset::SetProjection() / GDALSetProjection() is (at least in all 
implementations of in-tree drivers) reserved for the raster API, and 
raster drivers that support the Create() API.

Similarly GDALDataset::GetSpatialRef() / GDALGetSpatialRef() is for the 
raster API

For the vector API, use OGRLayer::GetSpatialRef() (different layers in a 
same dataset could have different CRS)

Best regards,

Even

Le 28/03/2021 ? 19:57, Joaquim Manuel Freire Lu?s a ?crit?:
>
> Hi,
>
> I am trying to use the GDAL shared lib directly from Julia and there 
> are things that keep breaking my head. For example, the lines below 
> use a mix of GMT and GDAL wrapper functions calls that *WORK*. First 
> command creates a GMT dataset with two UTM points type with an 
> assigned coordinate system. Next, in 2), I create a GDAL dataset of a 
> LineString, convert it to geog in 3) and save it to file using the 
> OGR_GMT driver in 4)
>
> 1) D2 = mat2ds([588977.324434907 4095339.69117669; 579551.921920776 
> 4150721.71333039], proj="+proj=utm +zone=29");
>
> 2) ds = gmt2gd(D2);
>
> 3) ds2=ogr2ogr(ds, ["-t_srs", "+proj=longlat", "-overwrite"])
>
> 4) ogr2ogr(ds2, dest="lixo2.gmt")
>
> Now the troubles. When I tried to use GDALSetProjection() I got an 
> error like this
>
> ERROR 6: /vsimem/##269: Dataset does not support the SetSpatialRef() 
> method.
>
> So I found that I could set the CRS with GDALDatasetCreateLayer() 
> while creating a layer on the dataset (using the Memory driver)
>
> (https://github.com/GenericMappingTools/GMT.jl/blob/master/src/gdal_utils.jl#L254 
> <https://github.com/GenericMappingTools/GMT.jl/blob/master/src/gdal_utils.jl#L254>)
>
> But oddly trying to inquiry the **ds** with GDALGetSpatialRef() 
> returns an empty pointer. I.e.:
>
> julia> Gdal.GDALGetSpatialRef(ds.ptr)
>
> Ptr{Nothing} @0x0000000000000000
>
> However the CSR was well sored in some place because the ="lixo2.gmt? 
> is correct (it has this)
>
> # @VGMT1.0 @GLINESTRING
>
> # @R-8.1/-8/37/37.5
>
> # @Jp"+proj=longlat +datum=WGS84 +no_defs"
>
> # @Jw"GEOGCS[\"unknown\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 
> 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Longitude\",EAST],AXIS[\"Latitude\",NORTH]]"
>
> # FEATURE_DATA
>
> > 
>
> -8 37.0
>
> -8.1 37.5
>
> But my trouble is that I want to fish the CRS from the ogr2ogr dataset 
> (the ds2 above) so that I can convert back from GDAL to GMT (which I 
> already can) without having to save to a file in disk.
>
> So basically my question is where is that CRS stored and how can I 
> access it?
>
> Thanks
>
> Joaquim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210328/ce00ba85/attachment.html>

From jluis at ualg.pt  Sun Mar 28 11:50:32 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Sun, 28 Mar 2021 18:50:32 +0000
Subject: [gdal-dev] Where is the projection info stored in a GDAL
 dataset?
In-Reply-To: <2b9dc454-feb6-63b6-1d7a-de741dec8c1d@spatialys.com>
References: <AM6PR04MB395973D2E5D4C48C1F8C37C1A67F9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <2b9dc454-feb6-63b6-1d7a-de741dec8c1d@spatialys.com>
Message-ID: <AM6PR04MB3959CCD5B0153B72FA1D46C7A67F9@AM6PR04MB3959.eurprd04.prod.outlook.com>

Thanks Even,

That led me to OGR_L_GetSpatialRef()

julia> Gdal.OGR_L_GetSpatialRef(getlayer(ds2,0).ptr)
Ptr{Nothing} @0x0000000067ce4610

and

julia> toWKT(Gdal.SpatialRef(p))
"GEOGCS[\"unknown\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Longitude\",EAST],AXIS[\"Latitude\",NORTH]]"

Just have to make this a bit more smooth.


From: Even Rouault <even.rouault at spatialys.com>
Sent: Sunday, March 28, 2021 7:14 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Where is the projection info stored in a GDAL dataset?


Joaquim,

ogr2ogr -t_srs passes the CRS object as an argument of the GDALDataset::CreateLayer() API

GDALDataset::SetProjection() / GDALSetProjection() is (at least in all implementations of in-tree drivers) reserved for the raster API, and raster drivers that support the Create() API.

Similarly GDALDataset::GetSpatialRef() / GDALGetSpatialRef() is for the raster API

For the vector API, use OGRLayer::GetSpatialRef() (different layers in a same dataset could have different CRS)

Best regards,

Even
Le 28/03/2021 ? 19:57, Joaquim Manuel Freire Lu?s a ?crit :
Hi,

I am trying to use the GDAL shared lib directly from Julia and there are things that keep breaking my head. For example, the lines below use a mix of GMT and GDAL wrapper functions calls that WORK. First command creates a GMT dataset with two UTM points type with an assigned coordinate system. Next, in 2), I create a GDAL dataset of a LineString, convert it to geog in 3) and save it to file using the OGR_GMT driver in 4)

1) D2 = mat2ds([588977.324434907 4095339.69117669; 579551.921920776 4150721.71333039], proj="+proj=utm +zone=29");
2) ds = gmt2gd(D2);
3) ds2=ogr2ogr(ds, ["-t_srs", "+proj=longlat", "-overwrite"])
4) ogr2ogr(ds2, dest="lixo2.gmt")

Now the troubles. When I tried to use GDALSetProjection() I got an error like this

ERROR 6: /vsimem/##269: Dataset does not support the SetSpatialRef() method.

So I found that I could set the CRS with GDALDatasetCreateLayer() while creating a layer on the dataset (using the Memory driver)
(https://github.com/GenericMappingTools/GMT.jl/blob/master/src/gdal_utils.jl#L254)

But oddly trying to inquiry the *ds* with GDALGetSpatialRef() returns an empty pointer. I.e.:

julia> Gdal.GDALGetSpatialRef(ds.ptr)
Ptr{Nothing} @0x0000000000000000

However the CSR was well sored in some place because the ="lixo2.gmt" is correct (it has this)

# @VGMT1.0 @GLINESTRING
# @R-8.1/-8/37/37.5
# @Jp"+proj=longlat +datum=WGS84 +no_defs"
# @Jw"GEOGCS[\"unknown\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Longitude\",EAST],AXIS[\"Latitude\",NORTH]]"
# FEATURE_DATA
>
-8 37.0
-8.1 37.5

But my trouble is that I want to fish the CRS from the ogr2ogr dataset (the ds2 above) so that I can convert back from GDAL to GMT (which I already can) without having to save to a file in disk.

So basically my question is where is that CRS stored and how can I access it?

Thanks

Joaquim



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210328/a1ee5562/attachment-0001.html>

From even.rouault at spatialys.com  Sun Mar 28 12:17:18 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Mar 2021 21:17:18 +0200
Subject: [gdal-dev] Relation between PROJ8, GDAL, and national grids
In-Reply-To: <CAMPpJ8gg0oo9KyEzaYL3Ke15nkU4s3nmh+O9agux_S33QOL=cA@mail.gmail.com>
References: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>
 <77c6ae5b-bf63-b26e-7adb-055cdc02b0ec@spatialys.com>
 <CAMPpJ8gg0oo9KyEzaYL3Ke15nkU4s3nmh+O9agux_S33QOL=cA@mail.gmail.com>
Message-ID: <a0e41bff-6243-e7ba-eb44-6dfff13f6911@spatialys.com>

Juan Pedro,

the fact that the es_ign_SPED2ETV2.tif grid wasn't used turned out to be 
a PROJ issue, with a fix now queued in 
https://github.com/OSGeo/PROJ/pull/2619

One easy workaround is that you create symbol links:

ln -s es_ign_SPED2ETV2.tif /usr/local/share/proj/PENR2009.gsb

ln -s es_ign_SPED2ETV2.tif /usr/local/share/proj/BALR2009.gsb

Regarding the differences in output between gdaltransform and cs2cs, 
this is just different rounding modes of the floating point values. You 
can change the number of decimals of cs2cs with the -d 
{number_of_decimals} switch

Even

Le 28/03/2021 ? 19:57, Juan Pedro P?rez Alc?ntara a ?crit?:
> Even, thanks for replying, and Javier, thanks for the advice about the 
> list etiquette. I will not change the subject in such events.
>
> I'm sure it's the only PROJ installation because I'm building the 
> libraries in a Docker container. I've also conducted some more tests 
> from zero, I've found out I've been using some old tests I wrote some 
> time ago that were outdated and faulty, sorry about that. What follows 
> is the detailed actions I've taken.
>
> With the IGN (Spanish National Geographic Institute) geodesic 
> calculator I performed a EPSG 23030 (ED50 UTM 30N) to EPSG 25830 
> (ETRS89 UTM 30N) shift:
>
> 235205.243 4142110.093? >? 235094 4141906
>
> I take this as the target result.
>
> I set PROJ_LIB to /usr/local/share/proj and configured PROJ with a 
> simple ./configure, no options.
>
> Using cs2cs:
>
> cs2cs EPSG:23030 EPSG:25830 > 235094.09 4141905.02
>
> which I suppose is a 7 parameters shift, which is great, but not 
> perfect, can do better with the grid. Thus:
>
> cs2cs +proj=utm +zone=30 +ellps=intl +units=m +no_defs 
> +nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif +to EPSG:25830 > 
> 235094.00 4141906.00
>
> which nails it. Again, my fault assuming PROJ was using the grid by 
> default.
>
> Then I compiled GDAL with another flat ./configure, it found a PROJ >= 
> 6. Using gdaltransform:
>
> gdaltransform -s_srs EPSG:23030 -t_srs EPSG:25830 > 235094.087184815 
> 4141905.01683498
>
> which is consistent with cs2cs. Using:
>
> gdaltransform -s_srs "+proj=utm +zone=30 +ellps=intl +units=m +no_defs 
> +nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif" -t_srs 
> EPSG:25830 > 235094.000297496 4141905.99963473
>
> which is consistent with cs2cs too.
>
> Then, having solved this part of the issue, I would like very much if 
> you can advice me on how to "tweak" default definitions of the SRS to 
> include the use of the grid by default, which would be not absolutely 
> necessary for my application but a nice to have.
>
> Also, just out of curiosity, why are PROJ and GDAL yielding slightly 
> different outputs (albeit perfectly ok both)? Is GDAL doing its own 
> calculations besides PROJ? Forgive my lack of deep understanding of 
> the GDAL inner architecture for I am an end user and not a developer. 
> Just curious.
>
>
> Best regards,
>
> ---
>
> Juan Pedro P?rez Alc?ntara
>
> jp.perez.alcantara at gmail.com <mailto:jp.perez.alcantara at gmail.com>
>
>
>
> On Sat, 27 Mar 2021 at 21:32, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Juan Pedro,
>
>
>     >
>     > I'm at a loss trying to understand the relationship between PROJ8,
>     > GDAL, and how to use TIFF national grids. So far my findings are:
>     >
>     > - PROJ8 is installed and cs2cs uses the grid to transform,
>     performing
>     > an extremely accurate shift;
>     >
>     > - GDAL, compile on the above PROJ8, when using
>     > gdaltransform, yields less accurate
>
>     There's no fundamental reason for transforms with gdaltransform being
>     less accurate than with cs2cs. You have to be much more specific with
>     the exact gdaltransform invokation you are trying. And are you really
>     sure that you use the PROJ version you think ? (check with ldd
>     libgdal.so on Linux)
>
>     You can also set the PROJ_DEBUG=2 and CPL_DEBUG=ON environment
>     variables
>     and look at the traces.
>
>     Even
>
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210328/5b7c26e5/attachment.html>

From jp.perez.alcantara at gmail.com  Mon Mar 29 01:47:06 2021
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Mon, 29 Mar 2021 10:47:06 +0200
Subject: [gdal-dev] Relation between PROJ8, GDAL, and national grids
In-Reply-To: <a0e41bff-6243-e7ba-eb44-6dfff13f6911@spatialys.com>
References: <CAMPpJ8jPx0aXxQmLMZBgRk4BM2o4xSBG=eHgVFXwVatb6de_xw@mail.gmail.com>
 <77c6ae5b-bf63-b26e-7adb-055cdc02b0ec@spatialys.com>
 <CAMPpJ8gg0oo9KyEzaYL3Ke15nkU4s3nmh+O9agux_S33QOL=cA@mail.gmail.com>
 <a0e41bff-6243-e7ba-eb44-6dfff13f6911@spatialys.com>
Message-ID: <CAMPpJ8io2RTM0bV6ErNr8Cw_9TR28nJGwz6sgiRfwBq+W4zG8Q@mail.gmail.com>

Even, thanks for the answer. The symlinks to the old grid names worked as
expected. Thanks for reporting the fix to PROJ and for finally help me
understand the libraries' dependencies.

Regards,

---

Juan Pedro P?rez Alc?ntara

jp.perez.alcantara at gmail.com


On Sun, 28 Mar 2021 at 21:17, Even Rouault <even.rouault at spatialys.com>
wrote:

> Juan Pedro,
>
> the fact that the es_ign_SPED2ETV2.tif grid wasn't used turned out to be a
> PROJ issue, with a fix now queued in
> https://github.com/OSGeo/PROJ/pull/2619
>
> One easy workaround is that you create symbol links:
>
> ln -s es_ign_SPED2ETV2.tif /usr/local/share/proj/PENR2009.gsb
>
> ln -s es_ign_SPED2ETV2.tif /usr/local/share/proj/BALR2009.gsb
>
> Regarding the differences in output between gdaltransform and cs2cs, this
> is just different rounding modes of the floating point values. You can
> change the number of decimals of cs2cs with the -d {number_of_decimals}
> switch
>
> Even
> Le 28/03/2021 ? 19:57, Juan Pedro P?rez Alc?ntara a ?crit :
>
> Even, thanks for replying, and Javier, thanks for the advice about the
> list etiquette. I will not change the subject in such events.
>
> I'm sure it's the only PROJ installation because I'm building the
> libraries in a Docker container. I've also conducted some more tests from
> zero, I've found out I've been using some old tests I wrote some time ago
> that were outdated and faulty, sorry about that. What follows is the
> detailed actions I've taken.
>
> With the IGN (Spanish National Geographic Institute) geodesic calculator I
> performed a EPSG 23030 (ED50 UTM 30N) to EPSG 25830 (ETRS89 UTM 30N) shift:
>
> 235205.243 4142110.093  >  235094 4141906
>
> I take this as the target result.
>
> I set PROJ_LIB to /usr/local/share/proj and configured PROJ with a simple
> ./configure, no options.
>
> Using cs2cs:
>
> cs2cs EPSG:23030 EPSG:25830 > 235094.09 4141905.02
>
> which I suppose is a 7 parameters shift, which is great, but not perfect,
> can do better with the grid. Thus:
>
> cs2cs +proj=utm +zone=30 +ellps=intl +units=m +no_defs
> +nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif +to EPSG:25830 >
> 235094.00 4141906.00
>
> which nails it. Again, my fault assuming PROJ was using the grid by
> default.
>
> Then I compiled GDAL with another flat ./configure, it found a PROJ >= 6.
> Using gdaltransform:
>
> gdaltransform -s_srs EPSG:23030 -t_srs EPSG:25830 > 235094.087184815
> 4141905.01683498
>
> which is consistent with cs2cs. Using:
>
> gdaltransform -s_srs "+proj=utm +zone=30 +ellps=intl +units=m +no_defs
> +nadgrids=/usr/local/share/proj/es_ign_SPED2ETV2.tif" -t_srs EPSG:25830 >
> 235094.000297496 4141905.99963473
>
> which is consistent with cs2cs too.
>
> Then, having solved this part of the issue, I would like very much if you
> can advice me on how to "tweak" default definitions of the SRS to include
> the use of the grid by default, which would be not absolutely necessary for
> my application but a nice to have.
>
> Also, just out of curiosity, why are PROJ and GDAL yielding slightly
> different outputs (albeit perfectly ok both)? Is GDAL doing its own
> calculations besides PROJ? Forgive my lack of deep understanding of the
> GDAL inner architecture for I am an end user and not a developer. Just
> curious.
>
>
> Best regards,
>
> ---
>
> Juan Pedro P?rez Alc?ntara
>
> jp.perez.alcantara at gmail.com
>
>
> On Sat, 27 Mar 2021 at 21:32, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Juan Pedro,
>>
>>
>> >
>> > I'm at a loss trying to understand the relationship between PROJ8,
>> > GDAL, and how to use TIFF national grids. So far my findings are:
>> >
>> > - PROJ8 is installed and cs2cs uses the grid to transform, performing
>> > an extremely accurate shift;
>> >
>> > - GDAL, compile on the above PROJ8, when using
>> > gdaltransform, yields less accurate
>>
>> There's no fundamental reason for transforms with gdaltransform being
>> less accurate than with cs2cs. You have to be much more specific with
>> the exact gdaltransform invokation you are trying. And are you really
>> sure that you use the PROJ version you think ? (check with ldd
>> libgdal.so on Linux)
>>
>> You can also set the PROJ_DEBUG=2 and CPL_DEBUG=ON environment variables
>> and look at the traces.
>>
>> Even
>>
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/de99afc2/attachment.html>

From boxerab at gmail.com  Mon Mar 29 07:21:54 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 29 Mar 2021 10:21:54 -0400
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
Message-ID: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>

Hello There,
I'm curious what folks here think about the future of JPEG 2000 in
geospatial?
I was having a little discussion about this over here:
https://github.com/USGS-Astrogeology/ISIS3/issues/4237

To me, the features that made JP2 unique amongst the many codecs were:

0. royalty free
1. support for lossy and lossless compression in a single framework
2. support for TB images
3. fast on-the-fly random access into large images
4. decoder can determine what sort of progression it uses at decode time:
resolution,
quality, component or spatial.
5. precise rate control
6. error and re-compression resilience
7. JPIP protocol for progressive transmission over low-bandwidth networks

The cons to JP2 were:

0. computational complexity i.e. dog slow
1. (until recently) buggy and slow OSS implementations
2. patent questions (largely resolved)
3. poor support from HW and browsers

Do you think there is currently a viable alternative which covers enough of
the advantages while lacking enough of the negatives that plague JP2 ?  I'm
curious because I have been devoting quite a bit of time to addressing some
of those negatives, as discussed at length previously,
The standard remains essential in digital cinema, medical imaging and in
the archive community. But, those last two fields may also be ripe for
change.

In digital cinema, precise rate control is a must, so I think it is here to
stay in the area.

Thanks,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/da92f89c/attachment-0001.html>

From rlelamer at hotmail.fr  Mon Mar 29 08:24:34 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Mon, 29 Mar 2021 17:24:34 +0200
Subject: [gdal-dev] Errors with gdalwarp in reprojection
Message-ID: <PR3P193MB0507C1A41BBC6A7F9FF0D91AB67E9@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Hi,

From a png file library (524288 tiles of 256x256px), I georeference them using gdal_translate like this :
=> gdal_translate -of VRT -a_srs EPSG: 4326 -a_nodata 255 PATH / FILE.png PATH / FILE.vrt -a_ullr ULLR

Then I use gdalwarp to reproject them like this :
=> gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:3857 -co COMPRESS=LZW PATH/FILE.vrt PATH/FILE.tiff

524286 tiles, out of 524288, work without any problem but 2 gives me an error message ?

The 2 .vrt files of these tiles tell me this :

Driver: VRT/Virtual Raster
Files: map_11_1023_0.vrt
       /Users/romain/VRTiles/bw_png/map_11_1023_0.png
Size is 256, 256
Coordinate System is:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
Origin = (179.648437500000000,90.000000000000000)
Pixel Size = (0.001373291015625,-0.001373291015625)
Corner Coordinates:
Upper Left  ( 179.6484375,  90.0000000) (179d38'54.38"E, 90d 0' 0.00"N)
Lower Left  ( 179.6484375,  89.6484375) (179d38'54.38"E, 89d38'54.38"N)
Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
Lower Right ( 180.0000000,  89.6484375) (180d 0' 0.00"E, 89d38'54.38"N)
Center      ( 179.8242188,  89.8242188) (179d49'27.19"E, 89d49'27.19"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
  NoData Value=255
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 0,0,0,255
    1: 255,255,255,255

Driver: VRT/Virtual Raster
Files: map_11_1023_511.vrt
       /Users/romain/VRTiles/bw_png/map_11_1023_511.png
Size is 256, 256
Coordinate System is:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
Origin = (179.648437500000000,-89.648437500000000)
Pixel Size = (0.001373291015625,-0.001373291015625)
Corner Coordinates:
Upper Left  ( 179.6484375, -89.6484375) (179d38'54.38"E, 89d38'54.38"S)
Lower Left  ( 179.6484375, -90.0000000) (179d38'54.38"E, 90d 0' 0.00"S)
Upper Right ( 180.0000000, -89.6484375) (180d 0' 0.00"E, 89d38'54.38"S)
Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
Center      ( 179.8242188, -89.8242188) (179d49'27.19"E, 89d49'27.19"S)
Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
  NoData Value=255
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 0,0,0,255
    1: 255,255,255,255


gdalwarp errors :
? the first one give me this :

Creating output file that is -2147483648P x 362L.
ERROR 1: Attempt to create -2147483648x362 dataset is illegal,sizes must be larger than zero.

? the second one give me this :

Creating output file that is -2147483648P x 362L.
ERROR 1: Attempt to create -2147483648x362 dataset is illegal,sizes must be larger than zero.

And I don't understand why ... what am I doing that is not correct since it works well on all the other tiles?

I use GDAL 3.2.2, released 2021/03/05

Thanks

Romain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/7e8bd870/attachment-0001.html>

From jluis at ualg.pt  Mon Mar 29 08:26:24 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Mar 2021 15:26:24 +0000
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
Message-ID: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>

OK, one more from the Julia wrappers. Playing with buffers now, and it works but I want to get the points and that fails

julia> wkt = "POINT (1198054.34 648493.09)";

julia> dbf = Gdal.buffer(Gdal.fromWKT(wkt), 500)
Geometry: POLYGON ((1198554.34 648493.09,1198553.65476738 64 ... .09))

julia> toWKT(dbf)[1:90]
"POLYGON ((1198554.34 648493.09,1198553.65476738 648466.922021879,1198551.60094768 648440.8"

The 'toWKT()' function calls OGR_G_ExportToWkt()

But now if I try to extract the points with OGR_G_GetX() it errors

julia> Gdal.OGR_G_GetX(dbf.ptr, 0)
ERROR 6: Incompatible geometry for operation                    # <=============== ????
0.0

julia> Gdal.OGR_G_GetPointCount(dbf.ptr)                           # <=============== Why so?
0

Although the toWKT() works, tat's an ascii representation but I want I want to access them in binary (not in WKB) to send to GMT.


Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/b85598b1/attachment.html>

From even.rouault at spatialys.com  Mon Mar 29 08:42:33 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Mar 2021 17:42:33 +0200
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
In-Reply-To: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>

OGR_G_GetX() can only work on a Point or a LineString/LinearRing

for a polygon, you need to extract the ring first with 
OGR_G_GetGeometryRef() / OGR_G_GetGeometryCount()

Even

Le 29/03/2021 ? 17:26, Joaquim Manuel Freire Lu?s a ?crit?:
>
> OK, one more from the Julia wrappers. Playing with buffers now, and it 
> works but I want to get the points and that fails
>
> julia> wkt = "POINT (1198054.34 648493.09)";
>
> julia> dbf = Gdal.buffer(Gdal.fromWKT(wkt), 500)
>
> Geometry: POLYGON ((1198554.34 648493.09,1198553.65476738 64 ... .09))
>
> julia> toWKT(dbf)[1:90]
>
> "POLYGON ((1198554.34 648493.09,1198553.65476738 
> 648466.922021879,1198551.60094768 648440.8"
>
> The ?toWKT()? function calls OGR_G_ExportToWkt()
>
> But now if I try to extract the points with OGR_G_GetX() it errors
>
> julia> Gdal.OGR_G_GetX(dbf.ptr, 0)
>
> ERROR 6: Incompatible geometry for operation??????????????????? # 
> ?============= ????
>
> 0.0
>
> julia> Gdal.OGR_G_GetPointCount(dbf.ptr) ?????????# ?============= Why so?
>
> 0
>
> Although the toWKT() works, tat?s an ascii representation but I want I 
> want to access them in binary (not in WKB) to send to GMT.
>
> Joaquim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/6ca2b415/attachment.html>

From jluis at ualg.pt  Mon Mar 29 08:46:13 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Mar 2021 15:46:13 +0000
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
In-Reply-To: <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>
References: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>
Message-ID: <AM6PR04MB395933C79C02B0F9B773116DA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>

Thanks,

Maybe add that info to the docs? By now it only says

"OGR_G_GetX() Fetch the x coordinate of a point from a geometry."


From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, March 29, 2021 4:43 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Can't access to points in a buffer returned geometry with OGR_G_GetX


OGR_G_GetX() can only work on a Point or a LineString/LinearRing

for a polygon, you need to extract the ring first with OGR_G_GetGeometryRef() / OGR_G_GetGeometryCount()

Even
Le 29/03/2021 ? 17:26, Joaquim Manuel Freire Lu?s a ?crit :
OK, one more from the Julia wrappers. Playing with buffers now, and it works but I want to get the points and that fails

julia> wkt = "POINT (1198054.34 648493.09)";

julia> dbf = Gdal.buffer(Gdal.fromWKT(wkt), 500)
Geometry: POLYGON ((1198554.34 648493.09,1198553.65476738 64 ... .09))

julia> toWKT(dbf)[1:90]
"POLYGON ((1198554.34 648493.09,1198553.65476738 648466.922021879,1198551.60094768 648440.8"

The 'toWKT()' function calls OGR_G_ExportToWkt()

But now if I try to extract the points with OGR_G_GetX() it errors

julia> Gdal.OGR_G_GetX(dbf.ptr, 0)
ERROR 6: Incompatible geometry for operation                    # ?============= ????
0.0

julia> Gdal.OGR_G_GetPointCount(dbf.ptr)                           # ?============= Why so?
0

Although the toWKT() works, tat's an ascii representation but I want I want to access them in binary (not in WKB) to send to GMT.


Joaquim



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/3cdca95f/attachment-0001.html>

From even.rouault at spatialys.com  Mon Mar 29 08:46:58 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Mar 2021 17:46:58 +0200
Subject: [gdal-dev] Errors with gdalwarp in reprojection
In-Reply-To: <PR3P193MB0507C1A41BBC6A7F9FF0D91AB67E9@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
References: <PR3P193MB0507C1A41BBC6A7F9FF0D91AB67E9@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
Message-ID: <3c576018-a132-7c1f-1f2a-dab24a008a06@spatialys.com>

Hi,

There might 2 potential issues here: being close to the antimeridian 
(and potentially slightly crossing it, but not visible here with the 
rounding used to display coordinates), and being close to the pole. I 
think that might be the later reason here. Basically EPSG:3857 can't be 
reasonably used beyond 85 degrees of latitude. Latitudes of +/- 90 
project to infinity in mercator projection...

Even

Le 29/03/2021 ? 17:24, Hotmail a ?crit?:
> Hi,
>
> From a png file library (524288 tiles of 256x256px), I georeference 
> them using gdal_translate like this :
> => gdal_translate -of VRT -a_srs EPSG: 4326 -a_nodata 255 PATH / 
> FILE.png PATH / FILE.vrt -a_ullr ULLR
>
> Then I use gdalwarp to reproject them like this :
> =>?gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:3857 -co 
> COMPRESS=LZW PATH/FILE.vrt PATH/FILE.tiff
>
> 524286 tiles, out of 524288, work without any problem but 2 gives me 
> an error message ?
>
> The 2 .vrt files of these tiles tell me this :
>
> Driver: VRT/Virtual Raster
> Files: map_11_1023_0.vrt
> /Users/romain/VRTiles/bw_png/map_11_1023_0.png
> Size is 256, 256
> Coordinate System is:
> GEOGCRS["WGS 84",
> ? ? DATUM["World Geodetic System 1984",
> ? ? ? ? ELLIPSOID["WGS 84",6378137,298.257223563,
> LENGTHUNIT["metre",1]]],
> ? ? PRIMEM["Greenwich",0,
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? CS[ellipsoidal,2],
> ? ? ? ? AXIS["geodetic latitude (Lat)",north,
> ? ? ? ? ? ? ORDER[1],
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? AXIS["geodetic longitude (Lon)",east,
> ? ? ? ? ? ? ORDER[2],
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ID["EPSG",4326]]
> Data axis to CRS axis mapping: 2,1
> Origin = (179.648437500000000,90.000000000000000)
> Pixel Size = (0.001373291015625,-0.001373291015625)
> Corner Coordinates:
> Upper Left? ( 179.6484375, 90.0000000) (179d38'54.38"E, 90d 0' 0.00"N)
> Lower Left? ( 179.6484375, 89.6484375) (179d38'54.38"E, 89d38'54.38"N)
> Upper Right ( 180.0000000, 90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
> Lower Right ( 180.0000000, 89.6484375) (180d 0' 0.00"E, 89d38'54.38"N)
> Center? ? ? ( 179.8242188, 89.8242188) (179d49'27.19"E, 89d49'27.19"N)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
> ? NoData Value=255
> ? Image Structure Metadata:
> ? ? NBITS=1
> ? Color Table (RGB with 2 entries)
> ? ? 0: 0,0,0,255
> ? ? 1: 255,255,255,255
>
> Driver: VRT/Virtual Raster
> Files: map_11_1023_511.vrt
> /Users/romain/VRTiles/bw_png/map_11_1023_511.png
> Size is 256, 256
> Coordinate System is:
> GEOGCRS["WGS 84",
> ? ? DATUM["World Geodetic System 1984",
> ? ? ? ? ELLIPSOID["WGS 84",6378137,298.257223563,
> LENGTHUNIT["metre",1]]],
> ? ? PRIMEM["Greenwich",0,
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? CS[ellipsoidal,2],
> ? ? ? ? AXIS["geodetic latitude (Lat)",north,
> ? ? ? ? ? ? ORDER[1],
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? AXIS["geodetic longitude (Lon)",east,
> ? ? ? ? ? ? ORDER[2],
> ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ID["EPSG",4326]]
> Data axis to CRS axis mapping: 2,1
> Origin = (179.648437500000000,-89.648437500000000)
> Pixel Size = (0.001373291015625,-0.001373291015625)
> Corner Coordinates:
> Upper Left? ( 179.6484375, -89.6484375) (179d38'54.38"E, 89d38'54.38"S)
> Lower Left? ( 179.6484375, -90.0000000) (179d38'54.38"E, 90d 0' 0.00"S)
> Upper Right ( 180.0000000, -89.6484375) (180d 0' 0.00"E, 89d38'54.38"S)
> Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
> Center? ? ? ( 179.8242188, -89.8242188) (179d49'27.19"E, 89d49'27.19"S)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
> ? NoData Value=255
> ? Image Structure Metadata:
> ? ? NBITS=1
> ? Color Table (RGB with 2 entries)
> ? ? 0: 0,0,0,255
> ? ? 1: 255,255,255,255
>
>
> _gdalwarp errors :_
> ? the first one give me this :
>
> Creating output file that is -2147483648P x 362L.
> ERROR 1: Attempt to create -2147483648x362 dataset is illegal,sizes 
> must be larger than zero.
>
> ? the second one give me this :
>
> Creating output file that is -2147483648P x 362L.
> ERROR 1: Attempt to create -2147483648x362 dataset is illegal,sizes 
> must be larger than zero.
>
> And I don't understand why ... what am I doing that is not correct 
> since it works well on all the other tiles?
>
> I use GDAL 3.2.2, released 2021/03/05
>
> Thanks
>
> Romain
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/ea5901fa/attachment.html>

From even.rouault at spatialys.com  Mon Mar 29 08:50:39 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Mar 2021 17:50:39 +0200
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
In-Reply-To: <AM6PR04MB395933C79C02B0F9B773116DA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>
 <AM6PR04MB395933C79C02B0F9B773116DA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <f3b3f8db-ae23-09e0-106d-37b218613144@spatialys.com>


Le 29/03/2021 ? 17:46, Joaquim Manuel Freire Lu?s a ?crit?:
>
> Thanks,
>
> Maybe add that info to the docs? By now it only says
>
We would definitely appreciate your contribution !

> ?OGR_G_GetX() Fetch the x coordinate of a point from a geometry.?
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* Monday, March 29, 2021 4:43 PM
> *To:* Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Can't access to points in a buffer returned 
> geometry with OGR_G_GetX
>
> OGR_G_GetX() can only work on a Point or a LineString/LinearRing
>
> for a polygon, you need to extract the ring first with 
> OGR_G_GetGeometryRef() / OGR_G_GetGeometryCount()
>
> Even
>
> Le 29/03/2021 ? 17:26, Joaquim Manuel Freire Lu?s a ?crit?:
>
>     OK, one more from the Julia wrappers. Playing with buffers now,
>     and it works but I want to get the points and that fails
>
>     julia> wkt = "POINT (1198054.34 648493.09)";
>
>     julia> dbf = Gdal.buffer(Gdal.fromWKT(wkt), 500)
>
>     Geometry: POLYGON ((1198554.34 648493.09,1198553.65476738 64 ... .09))
>
>     julia> toWKT(dbf)[1:90]
>
>     "POLYGON ((1198554.34 648493.09,1198553.65476738
>     648466.922021879,1198551.60094768 648440.8"
>
>     The ?toWKT()? function calls OGR_G_ExportToWkt()
>
>     But now if I try to extract the points with OGR_G_GetX() it errors
>
>     julia> Gdal.OGR_G_GetX(dbf.ptr, 0)
>
>     ERROR 6: Incompatible geometry for operation??????????????????? #
>     ?============= ????
>
>     0.0
>
>     julia> Gdal.OGR_G_GetPointCount(dbf.ptr) ?????????# ?=============
>     Why so?
>
>     0
>
>     Although the toWKT() works, tat?s an ascii representation but I
>     want I want to access them in binary (not in WKB) to send to GMT.
>
>     Joaquim
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/15ca52d9/attachment-0001.html>

From jluis at ualg.pt  Mon Mar 29 08:56:33 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Mar 2021 15:56:33 +0000
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
In-Reply-To: <f3b3f8db-ae23-09e0-106d-37b218613144@spatialys.com>
References: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>
 <AM6PR04MB395933C79C02B0F9B773116DA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <f3b3f8db-ae23-09e0-106d-37b218613144@spatialys.com>
Message-ID: <AM6PR04MB3959B78FA5AED667CECE35A7A67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>



Le 29/03/2021 ? 17:46, Joaquim Manuel Freire Lu?s a ?crit :
Thanks,

Maybe add that info to the docs? By now it only says

We would definitely appreciate your contribution !



OK, I owe you at least that. It's just a heavy first step (fork+PR) for this small thing but I'll do it.





"OGR_G_GetX() Fetch the x coordinate of a point from a geometry."


From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: Monday, March 29, 2021 4:43 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt><mailto:jluis at ualg.pt>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Can't access to points in a buffer returned geometry with OGR_G_GetX


OGR_G_GetX() can only work on a Point or a LineString/LinearRing

for a polygon, you need to extract the ring first with OGR_G_GetGeometryRef() / OGR_G_GetGeometryCount()

Even
Le 29/03/2021 ? 17:26, Joaquim Manuel Freire Lu?s a ?crit :
OK, one more from the Julia wrappers. Playing with buffers now, and it works but I want to get the points and that fails

julia> wkt = "POINT (1198054.34 648493.09)";

julia> dbf = Gdal.buffer(Gdal.fromWKT(wkt), 500)
Geometry: POLYGON ((1198554.34 648493.09,1198553.65476738 64 ... .09))

julia> toWKT(dbf)[1:90]
"POLYGON ((1198554.34 648493.09,1198553.65476738 648466.922021879,1198551.60094768 648440.8"

The 'toWKT()' function calls OGR_G_ExportToWkt()

But now if I try to extract the points with OGR_G_GetX() it errors

julia> Gdal.OGR_G_GetX(dbf.ptr, 0)
ERROR 6: Incompatible geometry for operation                    # ?============= ????
0.0

julia> Gdal.OGR_G_GetPointCount(dbf.ptr)                           # ?============= Why so?
0

Although the toWKT() works, tat's an ascii representation but I want I want to access them in binary (not in WKB) to send to GMT.


Joaquim




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/cc421137/attachment.html>

From even.rouault at spatialys.com  Mon Mar 29 09:02:03 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Mar 2021 18:02:03 +0200
Subject: [gdal-dev] Can't access to points in a buffer returned geometry
 with OGR_G_GetX
In-Reply-To: <AM6PR04MB3959B78FA5AED667CECE35A7A67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB3959C265F190C7F5592EF08CA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <86021856-8b6c-ef1d-56b1-6449e5886a65@spatialys.com>
 <AM6PR04MB395933C79C02B0F9B773116DA67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <f3b3f8db-ae23-09e0-106d-37b218613144@spatialys.com>
 <AM6PR04MB3959B78FA5AED667CECE35A7A67E9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <c2742d78-7700-792a-6ba3-275aaa4f70c2@spatialys.com>


> It?s just a heavy first step (fork+PR) for this small thing but I?ll 
> do it.
>
Not necessarily. For "trivial" changes like that, you may just edit on line:

https://github.com/OSGeo/gdal/edit/master/gdal/ogr/ogr_api.cpp

and this will create the PR in a few clicks.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/18aee723/attachment.html>

From marty.sullivan at cornell.edu  Mon Mar 29 09:12:01 2021
From: marty.sullivan at cornell.edu (Marty J. Sullivan)
Date: Mon, 29 Mar 2021 16:12:01 +0000
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
Message-ID: <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>

Just my two cents, I have very little personal use of JP2 although I?ve experimented with it in the past.

I personally have switched to using WEBP and have not run into any issues (other than wide support). I think the one place JP2 beats WEBP is that JP2 supports virtually unlimited image dimensions whereas WEBP is limited to 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty much a non-issue.

AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll see support for that someday in GDAL as well. It supports larger image dimensions than WEBP (65536x65536)

With that in mind, I personally would never choose to use JP2 at this point, but maybe there are other use-cases I?m unaware of.

Marty

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Aaron Boxer <boxerab at gmail.com>
Date: Monday, March 29, 2021 at 10:22 AM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000

Hello There,
I'm curious what folks here think about the future of JPEG 2000 in geospatial?
I was having a little discussion about this over here:
https://github.com/USGS-Astrogeology/ISIS3/issues/4237

To me, the features that made JP2 unique amongst the many codecs were:

0. royalty free
1. support for lossy and lossless compression in a single framework
2. support for TB images
3. fast on-the-fly random access into large images
4. decoder can determine what sort of progression it uses at decode time: resolution,
quality, component or spatial.
5. precise rate control
6. error and re-compression resilience
7. JPIP protocol for progressive transmission over low-bandwidth networks

The cons to JP2 were:

0. computational complexity i.e. dog slow
1. (until recently) buggy and slow OSS implementations
2. patent questions (largely resolved)
3. poor support from HW and browsers

Do you think there is currently a viable alternative which covers enough of the advantages while lacking enough of the negatives that plague JP2 ?  I'm curious because I have been devoting quite a bit of time to addressing some of those negatives, as discussed at length previously,
The standard remains essential in digital cinema, medical imaging and in the archive community. But, those last two fields may also be ripe for change.

In digital cinema, precise rate control is a must, so I think it is here to stay in the area.

Thanks,
Aaron



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/75eb8677/attachment-0001.html>

From rlelamer at hotmail.fr  Mon Mar 29 09:43:51 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Mon, 29 Mar 2021 18:43:51 +0200
Subject: [gdal-dev] Errors with gdalwarp in reprojection
In-Reply-To: <3c576018-a132-7c1f-1f2a-dab24a008a06@spatialys.com>
References: <PR3P193MB0507C1A41BBC6A7F9FF0D91AB67E9@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
 <3c576018-a132-7c1f-1f2a-dab24a008a06@spatialys.com>
Message-ID: <PR3P193MB050709EAE7CD707E8467FD73B67E9@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Thanks a lot, I understand better why I saw an 89.5 in the notes ...


From boxerab at gmail.com  Mon Mar 29 10:59:19 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 29 Mar 2021 13:59:19 -0400
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
Message-ID: <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>

On Mon, Mar 29, 2021 at 12:12 PM Marty J. Sullivan <
marty.sullivan at cornell.edu> wrote:

> Just my two cents, I have very little personal use of JP2 although I?ve
> experimented with it in the past.
>
>
>
> I personally have switched to using WEBP and have not run into any issues
> (other than wide support). I think the one place JP2 beats WEBP is that JP2
> supports virtually unlimited image dimensions whereas WEBP is limited to
> 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty much a
> non-issue.
>

16383 x 16383 sounds a bit limited. Even if you use tiling, if your
compression is lossy then you will see artifacts at the tile boundaries.


>
>
> AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll see
> support for that someday in GDAL as well. It supports larger image
> dimensions than WEBP (65536x65536)
>
>
>
> With that in mind, I personally would never choose to use JP2 at this
> point, but maybe there are other use-cases I?m unaware of.
>

The problem with larger dimensions  in WebP is the impossibility of
decoding a sub window in the image. You are forced to do
a complete decode each time you view it.



>
>
> Marty
>
>
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Aaron
> Boxer <boxerab at gmail.com>
> *Date: *Monday, March 29, 2021 at 10:22 AM
> *To: *gdal dev <gdal-dev at lists.osgeo.org>
> *Subject: *[gdal-dev] Long Term Prognosis for JPEG 2000
>
>
>
> Hello There,
>
> I'm curious what folks here think about the future of JPEG 2000 in
> geospatial?
>
> I was having a little discussion about this over here:
>
> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>
>
>
> To me, the features that made JP2 unique amongst the many codecs were:
>
>
>
> 0. royalty free
>
> 1. support for lossy and lossless compression in a single framework
>
> 2. support for TB images
>
> 3. fast on-the-fly random access into large images
>
> 4. decoder can determine what sort of progression it uses at decode time:
> resolution,
>
> quality, component or spatial.
>
> 5. precise rate control
>
> 6. error and re-compression resilience
>
> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>
>
>
> The cons to JP2 were:
>
>
>
> 0. computational complexity i.e. dog slow
>
> 1. (until recently) buggy and slow OSS implementations
>
> 2. patent questions (largely resolved)
>
> 3. poor support from HW and browsers
>
>
>
> Do you think there is currently a viable alternative which covers enough
> of the advantages while lacking enough of the negatives that plague JP2 ?
> I'm curious because I have been devoting quite a bit of time to addressing
> some of those negatives, as discussed at length previously,
>
> The standard remains essential in digital cinema, medical imaging and in
> the archive community. But, those last two fields may also be ripe for
> change.
>
>
>
> In digital cinema, precise rate control is a must, so I think it is here
> to stay in the area.
>
>
>
> Thanks,
>
> Aaron
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/86fc1ee7/attachment.html>

From j1 at jimenezshaw.com  Mon Mar 29 11:40:36 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 29 Mar 2021 20:40:36 +0200
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
 <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
Message-ID: <CADRrdKu6YACgORwhqaK2FP8DJwonEM4ubCkYy7m6e7RquLiW-w@mail.gmail.com>

What about COG (Cloud Optimized GeoTIFF - https://www.cogeo.org/)?
No file size limit (using BigTIFF), different encodings (LZW, deflate,
JPEG, zstd, ...), direct access to any part of the image,
overviews/pyramids for different levels of detail, well known format (TIFF).
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Mon, 29 Mar 2021 at 19:59, Aaron Boxer <boxerab at gmail.com> wrote:

> On Mon, Mar 29, 2021 at 12:12 PM Marty J. Sullivan <
> marty.sullivan at cornell.edu> wrote:
>
>> Just my two cents, I have very little personal use of JP2 although I?ve
>> experimented with it in the past.
>>
>>
>>
>> I personally have switched to using WEBP and have not run into any issues
>> (other than wide support). I think the one place JP2 beats WEBP is that JP2
>> supports virtually unlimited image dimensions whereas WEBP is limited to
>> 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty much a
>> non-issue.
>>
>
> 16383 x 16383 sounds a bit limited. Even if you use tiling, if your
> compression is lossy then you will see artifacts at the tile boundaries.
>
>
>>
>>
>> AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll see
>> support for that someday in GDAL as well. It supports larger image
>> dimensions than WEBP (65536x65536)
>>
>>
>>
>> With that in mind, I personally would never choose to use JP2 at this
>> point, but maybe there are other use-cases I?m unaware of.
>>
>
> The problem with larger dimensions  in WebP is the impossibility of
> decoding a sub window in the image. You are forced to do
> a complete decode each time you view it.
>
>
>
>>
>>
>> Marty
>>
>>
>>
>> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Aaron
>> Boxer <boxerab at gmail.com>
>> *Date: *Monday, March 29, 2021 at 10:22 AM
>> *To: *gdal dev <gdal-dev at lists.osgeo.org>
>> *Subject: *[gdal-dev] Long Term Prognosis for JPEG 2000
>>
>>
>>
>> Hello There,
>>
>> I'm curious what folks here think about the future of JPEG 2000 in
>> geospatial?
>>
>> I was having a little discussion about this over here:
>>
>> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>>
>>
>>
>> To me, the features that made JP2 unique amongst the many codecs were:
>>
>>
>>
>> 0. royalty free
>>
>> 1. support for lossy and lossless compression in a single framework
>>
>> 2. support for TB images
>>
>> 3. fast on-the-fly random access into large images
>>
>> 4. decoder can determine what sort of progression it uses at decode time:
>> resolution,
>>
>> quality, component or spatial.
>>
>> 5. precise rate control
>>
>> 6. error and re-compression resilience
>>
>> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>>
>>
>>
>> The cons to JP2 were:
>>
>>
>>
>> 0. computational complexity i.e. dog slow
>>
>> 1. (until recently) buggy and slow OSS implementations
>>
>> 2. patent questions (largely resolved)
>>
>> 3. poor support from HW and browsers
>>
>>
>>
>> Do you think there is currently a viable alternative which covers enough
>> of the advantages while lacking enough of the negatives that plague JP2 ?
>> I'm curious because I have been devoting quite a bit of time to addressing
>> some of those negatives, as discussed at length previously,
>>
>> The standard remains essential in digital cinema, medical imaging and in
>> the archive community. But, those last two fields may also be ripe for
>> change.
>>
>>
>>
>> In digital cinema, precise rate control is a must, so I think it is here
>> to stay in the area.
>>
>>
>>
>> Thanks,
>>
>> Aaron
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/a3c276ed/attachment-0001.html>

From even.rouault at spatialys.com  Mon Mar 29 13:34:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Mar 2021 22:34:16 +0200
Subject: [gdal-dev] GDAL talk for FOSS4G
Message-ID: <850c56bf-0c17-44bb-80e4-0f1070d01386@spatialys.com>

Hi,

I see the deadline to submit talks for FOSS4G 2021 is tomorrow. I'll 
probably submit the usual "State of GDAL" talk. Other people are welcome 
to submit GDAL oriented talks as well.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From palmerjnz at gmail.com  Mon Mar 29 14:02:14 2021
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Tue, 30 Mar 2021 08:02:14 +1100
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CADRrdKu6YACgORwhqaK2FP8DJwonEM4ubCkYy7m6e7RquLiW-w@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
 <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
 <CADRrdKu6YACgORwhqaK2FP8DJwonEM4ubCkYy7m6e7RquLiW-w@mail.gmail.com>
Message-ID: <CAA5WJYmCZEdP-NSy3faqC3-nK9nT3VgBqttAqC+gsz_58FPDhw@mail.gmail.com>

I would second COGs using WebP etc compressions. With internal tiling and
overviews it's great for easy hosting and access from cloud providers.
Also, support for Geotifff is great within desktop, serverside, and in
browser.

On Tue, 30 Mar 2021, 05:42 Javier Jimenez Shaw, <j1 at jimenezshaw.com> wrote:

> What about COG (Cloud Optimized GeoTIFF - https://www.cogeo.org/)?
> No file size limit (using BigTIFF), different encodings (LZW, deflate,
> JPEG, zstd, ...), direct access to any part of the image,
> overviews/pyramids for different levels of detail, well known format (TIFF).
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Mon, 29 Mar 2021 at 19:59, Aaron Boxer <boxerab at gmail.com> wrote:
>
>> On Mon, Mar 29, 2021 at 12:12 PM Marty J. Sullivan <
>> marty.sullivan at cornell.edu> wrote:
>>
>>> Just my two cents, I have very little personal use of JP2 although I?ve
>>> experimented with it in the past.
>>>
>>>
>>>
>>> I personally have switched to using WEBP and have not run into any
>>> issues (other than wide support). I think the one place JP2 beats WEBP is
>>> that JP2 supports virtually unlimited image dimensions whereas WEBP is
>>> limited to 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty
>>> much a non-issue.
>>>
>>
>> 16383 x 16383 sounds a bit limited. Even if you use tiling, if your
>> compression is lossy then you will see artifacts at the tile boundaries.
>>
>>
>>>
>>>
>>> AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll
>>> see support for that someday in GDAL as well. It supports larger image
>>> dimensions than WEBP (65536x65536)
>>>
>>>
>>>
>>> With that in mind, I personally would never choose to use JP2 at this
>>> point, but maybe there are other use-cases I?m unaware of.
>>>
>>
>> The problem with larger dimensions  in WebP is the impossibility of
>> decoding a sub window in the image. You are forced to do
>> a complete decode each time you view it.
>>
>>
>>
>>>
>>>
>>> Marty
>>>
>>>
>>>
>>> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Aaron
>>> Boxer <boxerab at gmail.com>
>>> *Date: *Monday, March 29, 2021 at 10:22 AM
>>> *To: *gdal dev <gdal-dev at lists.osgeo.org>
>>> *Subject: *[gdal-dev] Long Term Prognosis for JPEG 2000
>>>
>>>
>>>
>>> Hello There,
>>>
>>> I'm curious what folks here think about the future of JPEG 2000 in
>>> geospatial?
>>>
>>> I was having a little discussion about this over here:
>>>
>>> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>>>
>>>
>>>
>>> To me, the features that made JP2 unique amongst the many codecs were:
>>>
>>>
>>>
>>> 0. royalty free
>>>
>>> 1. support for lossy and lossless compression in a single framework
>>>
>>> 2. support for TB images
>>>
>>> 3. fast on-the-fly random access into large images
>>>
>>> 4. decoder can determine what sort of progression it uses at decode
>>> time: resolution,
>>>
>>> quality, component or spatial.
>>>
>>> 5. precise rate control
>>>
>>> 6. error and re-compression resilience
>>>
>>> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>>>
>>>
>>>
>>> The cons to JP2 were:
>>>
>>>
>>>
>>> 0. computational complexity i.e. dog slow
>>>
>>> 1. (until recently) buggy and slow OSS implementations
>>>
>>> 2. patent questions (largely resolved)
>>>
>>> 3. poor support from HW and browsers
>>>
>>>
>>>
>>> Do you think there is currently a viable alternative which covers enough
>>> of the advantages while lacking enough of the negatives that plague JP2 ?
>>> I'm curious because I have been devoting quite a bit of time to addressing
>>> some of those negatives, as discussed at length previously,
>>>
>>> The standard remains essential in digital cinema, medical imaging and in
>>> the archive community. But, those last two fields may also be ripe for
>>> change.
>>>
>>>
>>>
>>> In digital cinema, precise rate control is a must, so I think it is here
>>> to stay in the area.
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Aaron
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/1d992443/attachment.html>

From boxerab at gmail.com  Mon Mar 29 14:15:45 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 29 Mar 2021 17:15:45 -0400
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CADRrdKu6YACgORwhqaK2FP8DJwonEM4ubCkYy7m6e7RquLiW-w@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
 <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
 <CADRrdKu6YACgORwhqaK2FP8DJwonEM4ubCkYy7m6e7RquLiW-w@mail.gmail.com>
Message-ID: <CAK8GPyAqpHVVziE7M2sDs8Oc7595-ZiFMQmCrc8yMap6FkSJGw@mail.gmail.com>

On Mon, Mar 29, 2021 at 2:40 PM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> What about COG (Cloud Optimized GeoTIFF - https://www.cogeo.org/)?
> No file size limit (using BigTIFF), different encodings (LZW, deflate,
> JPEG, zstd, ...), direct access to any part of the image,
> overviews/pyramids for different levels of detail, well known format (TIFF).
>

Interesting. So spatial progression is baked into the file, and the
underlying compression format becomes somewhat irrelevant.



> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Mon, 29 Mar 2021 at 19:59, Aaron Boxer <boxerab at gmail.com> wrote:
>
>> On Mon, Mar 29, 2021 at 12:12 PM Marty J. Sullivan <
>> marty.sullivan at cornell.edu> wrote:
>>
>>> Just my two cents, I have very little personal use of JP2 although I?ve
>>> experimented with it in the past.
>>>
>>>
>>>
>>> I personally have switched to using WEBP and have not run into any
>>> issues (other than wide support). I think the one place JP2 beats WEBP is
>>> that JP2 supports virtually unlimited image dimensions whereas WEBP is
>>> limited to 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty
>>> much a non-issue.
>>>
>>
>> 16383 x 16383 sounds a bit limited. Even if you use tiling, if your
>> compression is lossy then you will see artifacts at the tile boundaries.
>>
>>
>>>
>>>
>>> AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll
>>> see support for that someday in GDAL as well. It supports larger image
>>> dimensions than WEBP (65536x65536)
>>>
>>>
>>>
>>> With that in mind, I personally would never choose to use JP2 at this
>>> point, but maybe there are other use-cases I?m unaware of.
>>>
>>
>> The problem with larger dimensions  in WebP is the impossibility of
>> decoding a sub window in the image. You are forced to do
>> a complete decode each time you view it.
>>
>>
>>
>>>
>>>
>>> Marty
>>>
>>>
>>>
>>> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Aaron
>>> Boxer <boxerab at gmail.com>
>>> *Date: *Monday, March 29, 2021 at 10:22 AM
>>> *To: *gdal dev <gdal-dev at lists.osgeo.org>
>>> *Subject: *[gdal-dev] Long Term Prognosis for JPEG 2000
>>>
>>>
>>>
>>> Hello There,
>>>
>>> I'm curious what folks here think about the future of JPEG 2000 in
>>> geospatial?
>>>
>>> I was having a little discussion about this over here:
>>>
>>> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>>>
>>>
>>>
>>> To me, the features that made JP2 unique amongst the many codecs were:
>>>
>>>
>>>
>>> 0. royalty free
>>>
>>> 1. support for lossy and lossless compression in a single framework
>>>
>>> 2. support for TB images
>>>
>>> 3. fast on-the-fly random access into large images
>>>
>>> 4. decoder can determine what sort of progression it uses at decode
>>> time: resolution,
>>>
>>> quality, component or spatial.
>>>
>>> 5. precise rate control
>>>
>>> 6. error and re-compression resilience
>>>
>>> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>>>
>>>
>>>
>>> The cons to JP2 were:
>>>
>>>
>>>
>>> 0. computational complexity i.e. dog slow
>>>
>>> 1. (until recently) buggy and slow OSS implementations
>>>
>>> 2. patent questions (largely resolved)
>>>
>>> 3. poor support from HW and browsers
>>>
>>>
>>>
>>> Do you think there is currently a viable alternative which covers enough
>>> of the advantages while lacking enough of the negatives that plague JP2 ?
>>> I'm curious because I have been devoting quite a bit of time to addressing
>>> some of those negatives, as discussed at length previously,
>>>
>>> The standard remains essential in digital cinema, medical imaging and in
>>> the archive community. But, those last two fields may also be ripe for
>>> change.
>>>
>>>
>>>
>>> In digital cinema, precise rate control is a must, so I think it is here
>>> to stay in the area.
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Aaron
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210329/01d81964/attachment-0001.html>

From paul.malm at lfv.se  Mon Mar 29 23:45:14 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Tue, 30 Mar 2021 06:45:14 +0000
Subject: [gdal-dev] Gdal Java
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
Message-ID: <ffd9a8a553e74e3c80d3ab60dbc6e584@lfv.se>

Hi stefan,
I have not come any further...
I have copied gdalalljni.dll to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin
And I have set the following environment variables:
GDAL_DATA=C:\Program Files\Gdal_321\bin\gdal-data
GDAL_DRIVER_PATH=C:\Program Files\Gdal_321\bin\gdal\plugins
JAVA_HOME=C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\
Path=...C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin;
              C:\Program Files\Gdal_321\bin\gdal\java;
              C:\Program Files\Gdal_321\bin;
              C:\Program Files\Gdal_321;
              C:\Program Files\Gdal_321\bin\gdal\apps;

And when I run gdalinfo - version, I get the following messages:
C:\>gdalinfo --version
ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\gdal_GEOR.dll
126: It is not possible to find the specified module.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\gdal_GEOR.dll
126: It is not possible to find the specified module.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\ogr_OCI.dll
126: It is not possible to find the specified module.

ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\ogr_OCI.dll
126: It is not possible to find the specified module.

GDAL 3.2.1, released 2020/12/29

Any ideas?
Kind regards,
Paul

Fr?n: Malm, Paul (Operations AIM)
Skickat: den 25 mars 2021 10:38
Till: 'Stefan Moebius' <Stefan.Moebius at amdocs.com>; gdal-dev at lists.osgeo.org
?mne: SV: Gdal Java

Hi Stefan,
Thanks for responding on my guestion for help!

-I've downloaded release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip
and unzipped it to C:\Program Files\Gdal_321.
-Then I added to the system path:
C:\Program Files\Gdal_321\bin\gdal\java and C:\Program Files\Gdal_321\bin.
-Restarted the computer.
Entered Eclipse.
-Set the Class-path to C:\Program Files\Gdal_321\bin\gdal\java\gdal.jar
-Run a simple java program with the commands:
gdalJNI jni= new gdalJNI();
if(jni.HasThreadSupport())
...

The error code I get is:
Native library load failed.
java.lang.UnsatisfiedLinkError: no gdalalljni in java.library.path
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)
            at org.geotools.jdbcconnection.raster.TransformRaster.<init>(TransformRaster.java:64)
            at org.geotools.jdbcconnection.raster.TransformRaster.main(TransformRaster.java:51)


Then I copy the gdalalljni.dll to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\
And gets the following error code:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: Det g?r inte att hitta den angivna proceduren
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
            at org.gdal.gdal.gdalJNI.HasThreadSupport(Native Method)


Both GDAL and Java are windows x64.
I would be more then grateful for further help.
/Paul

Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r Stefan Moebius via gdal-dev
Skickat: den 24 mars 2021 09:42
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java


Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
Hi Paul,
I find the binaries provided at https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6 the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)
If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service<https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/b34a41f9/attachment-0001.html>

From jef at norbit.de  Tue Mar 30 03:00:38 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 30 Mar 2021 12:00:38 +0200
Subject: [gdal-dev] Gdal Java
In-Reply-To: <ffd9a8a553e74e3c80d3ab60dbc6e584@lfv.se>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
 <ffd9a8a553e74e3c80d3ab60dbc6e584@lfv.se>
Message-ID: <20210330100037.ai2f5jtfaoj4iudu@norbit.de>

Hi Paul,

On Tue, 30. Mar 2021 at 06:45:14 +0000, paul.malm at lfv.se wrote:
> C:\>gdalinfo --version
> ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\gdal_GEOR.dll
> 126: It is not possible to find the specified module.
> 
> ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\gdal_GEOR.dll
> 126: It is not possible to find the specified module.
> 
> ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\ogr_OCI.dll
> 126: It is not possible to find the specified module.
> 
> ERROR 1: Can't load requested DLL: C:\Program Files\Gdal_321\bin\gdal\plugins\ogr_OCI.dll
> 126: It is not possible to find the specified module.

Those plugins depend on Oracle DLLs.  You can remove them if you don't need
Oracle.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden              https://www.norbit.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/df65b75b/attachment.sig>

From marty.sullivan at cornell.edu  Tue Mar 30 08:57:10 2021
From: marty.sullivan at cornell.edu (Marty J. Sullivan)
Date: Tue, 30 Mar 2021 15:57:10 +0000
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <A554D86D-510B-4626-92FC-42162B6CAA2D@cornell.edu>
 <CAK8GPyCNZ1kjuU6C1qQ7Zj4DiCM8Z7AONM2OQFZP_0Rn_F1YHw@mail.gmail.com>
Message-ID: <C33A1E41-8F58-4B1A-B021-0023F04A7143@cornell.edu>

I?m not sure I?ve run into an issue with 16383x16383 yet other than when I was just experimenting with WEBP. As Jeremy mentioned, we are using COG in practice, where tiles are generally very small (512x512). I haven?t noticed any artifacts in the COGs I?ve created on the tile boundaries. I generally use level 95 for lossy compression so maybe if I used higher compression I could potentially start to see that.

With such small tiles, and several overviews, decoding COG is generally not an issue and you can quickly pull out as small or as large of an area as you like with GDAL.

It seems like if you?re using a traditional image in a desktop application, using JP2 might have a few advantages, but for network optimized access and web/browser support, WEBP is the clear winner for me.

Marty

From: Aaron Boxer <boxerab at gmail.com>
Date: Monday, March 29, 2021 at 1:59 PM
To: "Marty J. Sullivan" <marty.sullivan at cornell.edu>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Long Term Prognosis for JPEG 2000

On Mon, Mar 29, 2021 at 12:12 PM Marty J. Sullivan <marty.sullivan at cornell.edu<mailto:marty.sullivan at cornell.edu>> wrote:
Just my two cents, I have very little personal use of JP2 although I?ve experimented with it in the past.

I personally have switched to using WEBP and have not run into any issues (other than wide support). I think the one place JP2 beats WEBP is that JP2 supports virtually unlimited image dimensions whereas WEBP is limited to 16383 x 16383. Then again, with GeoTIFF tiling, this is pretty much a non-issue.

16383 x 16383 sounds a bit limited. Even if you use tiling, if your compression is lossy then you will see artifacts at the tile boundaries.


AVIF is also up and coming and superior to WEBP, so I?d imagine we?ll see support for that someday in GDAL as well. It supports larger image dimensions than WEBP (65536x65536)

With that in mind, I personally would never choose to use JP2 at this point, but maybe there are other use-cases I?m unaware of.

The problem with larger dimensions  in WebP is the impossibility of decoding a sub window in the image. You are forced to do
a complete decode each time you view it.



Marty

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> on behalf of Aaron Boxer <boxerab at gmail.com<mailto:boxerab at gmail.com>>
Date: Monday, March 29, 2021 at 10:22 AM
To: gdal dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000

Hello There,
I'm curious what folks here think about the future of JPEG 2000 in geospatial?
I was having a little discussion about this over here:
https://github.com/USGS-Astrogeology/ISIS3/issues/4237

To me, the features that made JP2 unique amongst the many codecs were:

0. royalty free
1. support for lossy and lossless compression in a single framework
2. support for TB images
3. fast on-the-fly random access into large images
4. decoder can determine what sort of progression it uses at decode time: resolution,
quality, component or spatial.
5. precise rate control
6. error and re-compression resilience
7. JPIP protocol for progressive transmission over low-bandwidth networks

The cons to JP2 were:

0. computational complexity i.e. dog slow
1. (until recently) buggy and slow OSS implementations
2. patent questions (largely resolved)
3. poor support from HW and browsers

Do you think there is currently a viable alternative which covers enough of the advantages while lacking enough of the negatives that plague JP2 ?  I'm curious because I have been devoting quite a bit of time to addressing some of those negatives, as discussed at length previously,
The standard remains essential in digital cinema, medical imaging and in the archive community. But, those last two fields may also be ripe for change.

In digital cinema, precise rate control is a must, so I think it is here to stay in the area.

Thanks,
Aaron



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/70204259/attachment-0001.html>

From schwehr at gmail.com  Tue Mar 30 09:11:30 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 30 Mar 2021 09:11:30 -0700
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
Message-ID: <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>

Jp2k is likely to continue with heavy use for a long time to come.  There
are lots of hardware encoders in our solar system and the existing base of
data in that format is massive.  And with the improvements in Openjpeg,
it's support seems viable.  It's not the first choice for most, but that's
okay.

On Mon, Mar 29, 2021, 7:22 AM Aaron Boxer <boxerab at gmail.com> wrote:

> Hello There,
> I'm curious what folks here think about the future of JPEG 2000 in
> geospatial?
> I was having a little discussion about this over here:
> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>
> To me, the features that made JP2 unique amongst the many codecs were:
>
> 0. royalty free
> 1. support for lossy and lossless compression in a single framework
> 2. support for TB images
> 3. fast on-the-fly random access into large images
> 4. decoder can determine what sort of progression it uses at decode time:
> resolution,
> quality, component or spatial.
> 5. precise rate control
> 6. error and re-compression resilience
> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>
> The cons to JP2 were:
>
> 0. computational complexity i.e. dog slow
> 1. (until recently) buggy and slow OSS implementations
> 2. patent questions (largely resolved)
> 3. poor support from HW and browsers
>
> Do you think there is currently a viable alternative which covers enough
> of the advantages while lacking enough of the negatives that plague JP2 ?
> I'm curious because I have been devoting quite a bit of time to addressing
> some of those negatives, as discussed at length previously,
> The standard remains essential in digital cinema, medical imaging and in
> the archive community. But, those last two fields may also be ripe for
> change.
>
> In digital cinema, precise rate control is a must, so I think it is here
> to stay in the area.
>
> Thanks,
> Aaron
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/4ce36103/attachment.html>

From schwehr at gmail.com  Tue Mar 30 09:16:34 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 30 Mar 2021 09:16:34 -0700
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
Message-ID: <CACmBxyvq6gfBTgCPpgTD3ZTToVcyzdr8uFhvGcVkSaQbSJf2vQ@mail.gmail.com>

One downside in the jpeg2000 ecosystem that I have to call out:

Kakadu doesn't come with any tests unit tests.  I tried to donate some
simple starter tests, but no luck getting traction.  :(

On Tue, Mar 30, 2021, 9:11 AM Kurt Schwehr <schwehr at gmail.com> wrote:

> Jp2k is likely to continue with heavy use for a long time to come.  There
> are lots of hardware encoders in our solar system and the existing base of
> data in that format is massive.  And with the improvements in Openjpeg,
> it's support seems viable.  It's not the first choice for most, but that's
> okay.
>
> On Mon, Mar 29, 2021, 7:22 AM Aaron Boxer <boxerab at gmail.com> wrote:
>
>> Hello There,
>> I'm curious what folks here think about the future of JPEG 2000 in
>> geospatial?
>> I was having a little discussion about this over here:
>> https://github.com/USGS-Astrogeology/ISIS3/issues/4237
>>
>> To me, the features that made JP2 unique amongst the many codecs were:
>>
>> 0. royalty free
>> 1. support for lossy and lossless compression in a single framework
>> 2. support for TB images
>> 3. fast on-the-fly random access into large images
>> 4. decoder can determine what sort of progression it uses at decode time:
>> resolution,
>> quality, component or spatial.
>> 5. precise rate control
>> 6. error and re-compression resilience
>> 7. JPIP protocol for progressive transmission over low-bandwidth networks
>>
>> The cons to JP2 were:
>>
>> 0. computational complexity i.e. dog slow
>> 1. (until recently) buggy and slow OSS implementations
>> 2. patent questions (largely resolved)
>> 3. poor support from HW and browsers
>>
>> Do you think there is currently a viable alternative which covers enough
>> of the advantages while lacking enough of the negatives that plague JP2 ?
>> I'm curious because I have been devoting quite a bit of time to addressing
>> some of those negatives, as discussed at length previously,
>> The standard remains essential in digital cinema, medical imaging and in
>> the archive community. But, those last two fields may also be ripe for
>> change.
>>
>> In digital cinema, precise rate control is a must, so I think it is here
>> to stay in the area.
>>
>> Thanks,
>> Aaron
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/ae8c227b/attachment.html>

From hbarrett at edac.unm.edu  Tue Mar 30 09:36:34 2021
From: hbarrett at edac.unm.edu (Hays Barrett)
Date: Tue, 30 Mar 2021 10:36:34 -0600 (MDT)
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can
 result in data loss.
In-Reply-To: <1616792376226-0.post@n6.nabble.com>
References: <694250640.2345334.1616775262896.JavaMail.zimbra@edac.unm.edu>
 <1616792376226-0.post@n6.nabble.com>
Message-ID: <1559436865.3198908.1617122194846.JavaMail.zimbra@edac.unm.edu>

I put together a page that better explains the issue and used one of the actual images from our project.
https://haysbarrett.com/gdal_translate/
Thanks for looking into this for me.
-Hays

----- Original Message -----
From: "jratike80" <jukka.rahkonen at maanmittauslaitos.fi>
To: gdal-dev at lists.osgeo.org
Sent: Friday, March 26, 2021 2:59:36 PM
Subject: Re: [gdal-dev] Adding gcps to a raster using gdal_translate can result in data loss.

Hi,

Please give an exact example. Preferably with a raster that can be created
from command line with gdal_create followed by other required commands. Or
alternatively Python code that re-produces the issue.

-Jukka Rahkonen-



Hays Barrett wrote
> If the gcps stretch the image beyond the dimensions of the original raster
> it appears to clip the data that sits outside of the original raster
> dimensions rather than increase the raster dimensions to fit the stretched
> data . 
> Is this the expected behavior? 
> If so is there a way to increase the dimensions of a raster so there is no
> data loss? 
> Thanks, 
> -Hays 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 30 09:51:47 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 30 Mar 2021 16:51:47 +0000
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can
 result in data loss.
Message-ID: <24e9d5b5070240658d7bbc8398547f8e@maanmittauslaitos.fi>

Hi,

I did not have a close look into your ground control points but perhaps they are not very well distributed and therefore the default warping algorithm eats one corner of the image. Have a try with thin plate splin (-tps) instead.  There may be some bug, it does not feel right that some source data are lost with default algorithm.

-Jukka Rahkonen-


L?hett?j?: Hays Barrett <hays.barrett at gmail.com>
L?hetetty: tiistai 30. maaliskuuta 2021 19.32
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Adding gcps to a raster using gdal_translate can result in data loss.

I put together a page that better explains the issue and used one of the actual images from our project.
https://haysbarrett.com/gdal_translate/
Thanks for looking into this for me.
-Hays

On Fri, Mar 26, 2021 at 2:59 PM jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Please give an exact example. Preferably with a raster that can be created
from command line with gdal_create followed by other required commands. Or
alternatively Python code that re-produces the issue.

-Jukka Rahkonen-



Hays Barrett wrote
> If the gcps stretch the image beyond the dimensions of the original raster
> it appears to clip the data that sits outside of the original raster
> dimensions rather than increase the raster dimensions to fit the stretched
> data .
> Is this the expected behavior?
> If so is there a way to increase the dimensions of a raster so there is no
> data loss?
> Thanks,
> -Hays
>
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/3295a714/attachment-0001.html>

From even.rouault at spatialys.com  Tue Mar 30 10:12:38 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Mar 2021 19:12:38 +0200
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can
 result in data loss.
In-Reply-To: <24e9d5b5070240658d7bbc8398547f8e@maanmittauslaitos.fi>
References: <24e9d5b5070240658d7bbc8398547f8e@maanmittauslaitos.fi>
Message-ID: <d3bbeeef-c03f-1d05-ae89-92d3795bad2f@spatialys.com>

Jukka' suggestion is a good one. Using -tps solver or affine 
approximation -order 1 fixes the issue. The default behaviour with GCPs 
when there are 6 or more of them is to use the second order polynomial 
adjustment. The issue here is when computing output bounds. We actually 
compute two 2nd order polynomial adjustments: one from source image 
coordinates to georeferenced ones, and one from georeferenced ones to 
source image. The former one is used to compute the output bounds, but 
the second one is used to do warping. The issue with 2nd order 
polynomial is that those two transformers are generally not the inverse 
of each other... We should likely compute the source image coordinates 
-> georeferenced coordinates as an iterative inversion of the other one, 
so they are invertible. The first order polynomial / affine 
transformation hasn't that issue due to how affine transformation works. 
The TPS one isn't likely perfectly invertible but TPS transformation is? 
guaranteed to be exact at GCPs, so that diminishes the effect. But 2nd 
order polynomial has overshoots particularities that can cause the issue 
observed.

Another workaround is to specify the desired output bounds with -te

Anyway, Hays, could you file an issue about that in 
https://github.com/OSGeo/gdal/issues, ideally copying over your web page 
(or pointing to it if it can remain stable), and pasting my above comment.

Even

Le 30/03/2021 ? 18:51, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> I did not have a close look into your ground control points but 
> perhaps they are not very well distributed and therefore the default 
> warping algorithm eats one corner of the image. Have a try with thin 
> plate splin (-tps) instead.? There may be some bug, it does not feel 
> right that some source data are lost with default algorithm.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*Hays Barrett <hays.barrett at gmail.com>
> *L?hetetty:* tiistai 30. maaliskuuta 2021 19.32
> *Vastaanottaja:* Rahkonen Jukka (MML) 
> <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] Adding gcps to a raster using gdal_translate 
> can result in data loss.
>
> I?put together a page that better explains?the issue and used?one 
> of?the?actual images from our project.
>
> https://haysbarrett.com/gdal_translate/ 
> <https://haysbarrett.com/gdal_translate/>
>
> Thanks for looking into this for me.
>
> -Hays
>
> On Fri, Mar 26, 2021 at 2:59 PM jratike80 
> <jukka.rahkonen at maanmittauslaitos.fi 
> <mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
>
>     Hi,
>
>     Please give an exact example. Preferably with a raster that can be
>     created
>     from command line with gdal_create followed by other required
>     commands. Or
>     alternatively Python code that re-produces the issue.
>
>     -Jukka Rahkonen-
>
>
>
>     Hays Barrett wrote
>     > If the gcps stretch the image beyond the dimensions of the
>     original raster
>     > it appears to clip the data that sits outside of the original raster
>     > dimensions rather than increase the raster dimensions to fit the
>     stretched
>     > data .
>     > Is this the expected behavior?
>     > If so is there a way to increase the dimensions of a raster so
>     there is no
>     > data loss?
>     > Thanks,
>     > -Hays
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>
>     > gdal-dev at .osgeo <mailto:gdal-dev at .osgeo>
>
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
>
>     --
>     Sent from:
>     http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>     <http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/0c2ea5ed/attachment.html>

From hbarrett at edac.unm.edu  Tue Mar 30 10:45:08 2021
From: hbarrett at edac.unm.edu (Hays Barrett)
Date: Tue, 30 Mar 2021 11:45:08 -0600 (MDT)
Subject: [gdal-dev] Adding gcps to a raster using gdal_translate can
 result in data loss.
In-Reply-To: <d3bbeeef-c03f-1d05-ae89-92d3795bad2f@spatialys.com>
References: <24e9d5b5070240658d7bbc8398547f8e@maanmittauslaitos.fi>
 <d3bbeeef-c03f-1d05-ae89-92d3795bad2f@spatialys.com>
Message-ID: <842936839.3209671.1617126308649.JavaMail.zimbra@edac.unm.edu>

Will do. 
Thanks! 


From: "Even Rouault" <even.rouault at spatialys.com> 
To: "Rahkonen Jukka (MML)" <jukka.rahkonen at maanmittauslaitos.fi>, "hays" <Hays.Barrett at gmail.com> 
Cc: gdal-dev at lists.osgeo.org 
Sent: Tuesday, March 30, 2021 11:12:38 AM 
Subject: Re: [gdal-dev] Adding gcps to a raster using gdal_translate can result in data loss. 



Jukka' suggestion is a good one. Using -tps solver or affine approximation -order 1 fixes the issue. The default behaviour with GCPs when there are 6 or more of them is to use the second order polynomial adjustment. The issue here is when computing output bounds. We actually compute two 2nd order polynomial adjustments: one from source image coordinates to georeferenced ones, and one from georeferenced ones to source image. The former one is used to compute the output bounds, but the second one is used to do warping. The issue with 2nd order polynomial is that those two transformers are generally not the inverse of each other... We should likely compute the source image coordinates -> georeferenced coordinates as an iterative inversion of the other one, so they are invertible. The first order polynomial / affine transformation hasn't that issue due to how affine transformation works. The TPS one isn't likely perfectly invertible but TPS transformation is guaranteed to be exact at GCPs, so that diminishes the effect. But 2nd order polynomial has overshoots particularities that can cause the issue observed. 

Another workaround is to specify the desired output bounds with -te 


Anyway, Hays, could you file an issue about that in [ https://github.com/OSGeo/gdal/issues | https://github.com/OSGeo/gdal/issues ] , ideally copying over your web page (or pointing to it if it can remain stable), and pasting my above comment. 

Even 
Le 30/03/2021 ? 18:51, Rahkonen Jukka (MML) a ?crit : 





Hi, 



I did not have a close look into your ground control points but perhaps they are not very well distributed and therefore the default warping algorithm eats one corner of the image. Have a try with thin plate splin (-tps) instead. There may be some bug, it does not feel right that some source data are lost with default algorithm. 



-Jukka Rahkonen- 






L?hett?j?: Hays Barrett [ mailto:hays.barrett at gmail.com | <hays.barrett at gmail.com> ] 
L?hetetty: tiistai 30. maaliskuuta 2021 19.32 
Vastaanottaja: Rahkonen Jukka (MML) [ mailto:jukka.rahkonen at maanmittauslaitos.fi | <jukka.rahkonen at maanmittauslaitos.fi> ] 
Kopio: [ mailto:gdal-dev at lists.osgeo.org | gdal-dev at lists.osgeo.org ] 
Aihe: Re: [gdal-dev] Adding gcps to a raster using gdal_translate can result in data loss. 





I put together a page that better explains the issue and used one of the actual images from our project. 


[ https://haysbarrett.com/gdal_translate/ | https://haysbarrett.com/gdal_translate/ ] 


Thanks for looking into this for me. 


-Hays 





On Fri, Mar 26, 2021 at 2:59 PM jratike80 < [ mailto:jukka.rahkonen at maanmittauslaitos.fi | jukka.rahkonen at maanmittauslaitos.fi ] > wrote: 

BQ_BEGIN


Hi, 

Please give an exact example. Preferably with a raster that can be created 
from command line with gdal_create followed by other required commands. Or 
alternatively Python code that re-produces the issue. 

-Jukka Rahkonen- 



Hays Barrett wrote 
> If the gcps stretch the image beyond the dimensions of the original raster 
> it appears to clip the data that sits outside of the original raster 
> dimensions rather than increase the raster dimensions to fit the stretched 
> data . 
> Is this the expected behavior? 
> If so is there a way to increase the dimensions of a raster so there is no 
> data loss? 
> Thanks, 
> -Hays 
> 
> _______________________________________________ 
> gdal-dev mailing list 

> [ mailto:gdal-dev at .osgeo | gdal-dev at .osgeo ] 

> [ https://lists.osgeo.org/mailman/listinfo/gdal-dev | https://lists.osgeo.org/mailman/listinfo/gdal-dev ] 





-- 
Sent from: [ http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html | 
http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html ] 
_______________________________________________ 
gdal-dev mailing list 
[ mailto:gdal-dev at lists.osgeo.org | gdal-dev at lists.osgeo.org ] 
[ https://lists.osgeo.org/mailman/listinfo/gdal-dev | https://lists.osgeo.org/mailman/listinfo/gdal-dev ] 



_______________________________________________
gdal-dev mailing list [ mailto:gdal-dev at lists.osgeo.org | gdal-dev at lists.osgeo.org ] [ https://lists.osgeo.org/mailman/listinfo/gdal-dev | https://lists.osgeo.org/mailman/listinfo/gdal-dev ] 

BQ_END

-- [ http://www.spatialys.com/ | http://www.spatialys.com ] My software is free, but my time generally not. 

_______________________________________________ 
gdal-dev mailing list 
gdal-dev at lists.osgeo.org 
https://lists.osgeo.org/mailman/listinfo/gdal-dev 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/948218dd/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Tue Mar 30 15:45:26 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 30 Mar 2021 22:45:26 +0000
Subject: [gdal-dev] gdalbuildvrt and band descriptions
In-Reply-To: <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
References: <1849f2cef4964313b6ccff723e581271@app-exch2.gov.yk.ca>
 <ff88eb87-b82b-6e19-a77a-102220531f39@spatialys.com>
Message-ID: <5ae8309a31a6453294a15c9d6e1349df@app-exch2.gov.yk.ca>

Done!

Enable gdalbuildvrt to retain metadata such as band description
https://github.com/OSGeo/gdal/issues/3627

-Matt

From: Even Rouault <even.rouault at spatialys.com>
Sent: March 26, 2021 5:09 PM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdalbuildvrt and band descriptions

Matt,

copying over band description (and other band metadata) in the -separate case would make sense. Please file an enhancement ticket about that

Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/4e005c30/attachment.html>

From Matt.Wilkie at yukon.ca  Tue Mar 30 16:40:24 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 30 Mar 2021 23:40:24 +0000
Subject: [gdal-dev] More info on gdalwarp resampling methods?
Message-ID: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>

Hi folks,

I'm seeking more information on the various gdalwarp resampling methods, the scenarios where they are most usefully applied, and the converse: where they should not be used. It would be especially helpful if there were also visuals. For example I know what min/max/median are when working with a list of numbers but my understanding of what they do when applied to rasters of various types is quite hazy.


Background: I'm getting error messages when trying to use some of the methods with 16bit imagery and I don't know if I'm seeing a gdal bug, a data bug, or just "you can't use that method with this raster type".

ERROR 1: Failed to acquire WarpMutex in WarpRegion().

Thanks!

Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210330/0c9dd896/attachment.html>

From bradh at frogmouth.net  Tue Mar 30 18:02:31 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 31 Mar 2021 12:02:31 +1100
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
Message-ID: <08aa01d725c9$876c12a0$964437e0$@frogmouth.net>

I agree that JP2 usage is likely to continue for a long time. One of the key differentiators is the ability to support higher bit depth. 

 

However I don?t see it being as popular for new applications in the same way. It feels like there is a push / shift to ?something newer?, and that (to me) looks like HEIF with AV1. There are definitely options on both the file format side ? a newer GeoTIFF / COG or MXF could also be candidates; and on the codec side (especially for HEVC aka H.265). That movement is likely 5+ years though, unless something disruptive happens in sensing.

 

For ?non-display? purposes, where the primary use is analysis rather than visualisation, I think there will be increasing desire to keep the source values (potentially floating point) ? maybe a point cloud of LIDAR, or data cube of hyperspectral imagery.  That looks like HDF5 at the moment, although maybe the back-end format and compression matters less than the access approach.

Difficult to see advanced codecs making much progress here. 

 

Brad

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Kurt Schwehr
Sent: Wednesday, 31 March 2021 3:12 AM
To: Aaron Boxer <boxerab at gmail.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Long Term Prognosis for JPEG 2000

 

Jp2k is likely to continue with heavy use for a long time to come.  There are lots of hardware encoders in our solar system and the existing base of data in that format is massive.  And with the improvements in Openjpeg, it's support seems viable.  It's not the first choice for most, but that's okay.

 

On Mon, Mar 29, 2021, 7:22 AM Aaron Boxer <boxerab at gmail.com <mailto:boxerab at gmail.com> > wrote:

Hello There,

I'm curious what folks here think about the future of JPEG 2000 in geospatial?

I was having a little discussion about this over here:

https://github.com/USGS-Astrogeology/ISIS3/issues/4237

 

To me, the features that made JP2 unique amongst the many codecs were:

 

0. royalty free

1. support for lossy and lossless compression in a single framework

2. support for TB images

3. fast on-the-fly random access into large images

4. decoder can determine what sort of progression it uses at decode time: resolution,

quality, component or spatial.

5. precise rate control

6. error and re-compression resilience

7. JPIP protocol for progressive transmission over low-bandwidth networks

 

The cons to JP2 were:

 

0. computational complexity i.e. dog slow

1. (until recently) buggy and slow OSS implementations

2. patent questions (largely resolved)

3. poor support from HW and browsers

 

Do you think there is currently a viable alternative which covers enough of the advantages while lacking enough of the negatives that plague JP2 ?  I'm curious because I have been devoting quite a bit of time to addressing some of those negatives, as discussed at length previously,

The standard remains essential in digital cinema, medical imaging and in the archive community. But, those last two fields may also be ripe for change.

 

In digital cinema, precise rate control is a must, so I think it is here to stay in the area.

 

Thanks,

Aaron

 

 

 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/e1819d47/attachment-0001.html>

From even.rouault at spatialys.com  Tue Mar 30 23:38:41 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Mar 2021 08:38:41 +0200
Subject: [gdal-dev] More info on gdalwarp resampling methods?
In-Reply-To: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>
References: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>
Message-ID: <e9e33706-52d5-8582-722a-b7a0e1f10275@spatialys.com>

Matt,

(leaving out a bit your general question) The below looks is an error 
unrelated to whatever resampling method you apply. This is completely 
unfamiliar though. Do you build GDAL yourself ? Did you disable 
threading at build time ? Or maybe you're enabling threading with a huge 
number of threads ? Does that happen all the time ?

Even

> Background: I?m getting error messages when trying to use some of the 
> methods with 16bit imagery and I don?t know if I?m seeing a gdal bug, 
> a data bug, or just ?you can?t use that method with this raster type?.
>
> ERROR 1: Failed to acquire WarpMutex in WarpRegion().
>
> Thanks!
>
> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | _Yukon.ca <http://yukon.ca/>_
>
> /Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/0a7a7bdc/attachment.html>

From paul.malm at lfv.se  Wed Mar 31 00:59:50 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 31 Mar 2021 07:59:50 +0000
Subject: [gdal-dev] Gdal Java
In-Reply-To: <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
Message-ID: <66f97f83d49646f0b0e0db82f601fd51@lfv.se>

Hi,
I've installed dependency Walker 22_x64.
I don't know how to use it, but when I load gdalalljni.dll I get the following errorcodes:
Error: At least one required implicit or forwarded dependency was not found.
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Error: A circular dependency was detected.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module.

I can also see that a lot of DLL-files are not found e.g. EXT-MS-WINDOWSCORE-DEVICEINFO-L1-1-0.DLL...

In the module window of dependency walker I can see that there is 2 different CPU types, the DLL-files with x86 are marked red while the x64 are written in black (CPU-column).
E.g. c:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\API-MS-WIN-CORE-DEBUG-L1-1-0.DLL are marked with red text x86 in the CPU column.

In the "tree" under GDALALLJNI.DLL some DLLs are marked with a red icon, e.g API-MS-WIN-CRT-HEAP-L1-1-0.DLL.
When I search for that DLL-file in my computer it is found under several libraries
e.g C:\Windows\System32\downlevel, C:\Program Files (x86)\Citrix\ICA Client\Receiver, C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\bin
and a lot of other places...

My JAVA_HOME points to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin. It is a x64 Java version.
My OS is windows10 with a x64 based processor.

Can this be any help finding the solution on my run time error:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: The specified procedure cannot be found

Kind regards,
Paul
Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r Stefan Moebius via gdal-dev
Skickat: den 24 mars 2021 09:42
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java


Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
Hi Paul,
I find the binaries provided at https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6 the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)
If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service<https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/3f9a8642/attachment-0001.html>

From paul.malm at lfv.se  Wed Mar 31 01:49:53 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 31 Mar 2021 08:49:53 +0000
Subject: [gdal-dev] Gdal Java
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
Message-ID: <0dcd246320ca4351beb7726d47f49c2f@lfv.se>

Hi, additional information.
All DLL-files in Dependency Walker under the tree of GDALALLJNI.dll that are placed in C:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\
are marked with a red "frame" icon.
/Paul

Fr?n: Malm, Paul (Operations AIM)
Skickat: den 31 mars 2021 10:00
Till: 'Stefan Moebius' <Stefan.Moebius at amdocs.com>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
?mne: SV: Gdal Java

Hi,
I've installed dependency Walker 22_x64.
I don't know how to use it, but when I load gdalalljni.dll I get the following errorcodes:
Error: At least one required implicit or forwarded dependency was not found.
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Error: A circular dependency was detected.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module.

I can also see that a lot of DLL-files are not found e.g. EXT-MS-WINDOWSCORE-DEVICEINFO-L1-1-0.DLL...

In the module window of dependency walker I can see that there is 2 different CPU types, the DLL-files with x86 are marked red while the x64 are written in black (CPU-column).
E.g. c:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\API-MS-WIN-CORE-DEBUG-L1-1-0.DLL are marked with red text x86 in the CPU column.

In the "tree" under GDALALLJNI.DLL some DLLs are marked with a red icon, e.g API-MS-WIN-CRT-HEAP-L1-1-0.DLL.
When I search for that DLL-file in my computer it is found under several libraries
e.g C:\Windows\System32\downlevel, C:\Program Files (x86)\Citrix\ICA Client\Receiver, C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\bin
and a lot of other places...

My JAVA_HOME points to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin. It is a x64 Java version.
My OS is windows10 with a x64 based processor.

Can this be any help finding the solution on my run time error:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: The specified procedure cannot be found

Kind regards,
Paul
Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r Stefan Moebius via gdal-dev
Skickat: den 24 mars 2021 09:42
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java


Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
Hi Paul,
I find the binaries provided at https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6 the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)
If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service<https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/becfb90f/attachment.html>

From paul.malm at lfv.se  Wed Mar 31 03:09:34 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 31 Mar 2021 10:09:34 +0000
Subject: [gdal-dev] Gdal Java
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
Message-ID: <09fd12c3f9b943a3af3fd44c373f37e8@lfv.se>

Hi,
further additional information.

I'm using
Windows 11 64-bit with x64 based processor
PROCESSOR_ARCHITECTURE=AMD64
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 13, GenuineIntel
PROCESSOR_LEVEL=6
The Java I'm using is: OpenJDK's 8u262-b1, x86 64bit JRE.
/Paul


Fr?n: Malm, Paul (Operations AIM)
Skickat: den 31 mars 2021 10:50
Till: 'Stefan Moebius' <Stefan.Moebius at amdocs.com>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
?mne: SV: Gdal Java

Hi, additional information.
All DLL-files in Dependency Walker under the tree of GDALALLJNI.dll that are placed in C:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\
are marked with a red "frame" icon.
/Paul

Fr?n: Malm, Paul (Operations AIM)
Skickat: den 31 mars 2021 10:00
Till: 'Stefan Moebius' <Stefan.Moebius at amdocs.com>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
?mne: SV: Gdal Java

Hi,
I've installed dependency Walker 22_x64.
I don't know how to use it, but when I load gdalalljni.dll I get the following errorcodes:
Error: At least one required implicit or forwarded dependency was not found.
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found.
Error: A circular dependency was detected.
Warning: At least one delay-load dependency module was not found.
Warning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module.

I can also see that a lot of DLL-files are not found e.g. EXT-MS-WINDOWSCORE-DEVICEINFO-L1-1-0.DLL...

In the module window of dependency walker I can see that there is 2 different CPU types, the DLL-files with x86 are marked red while the x64 are written in black (CPU-column).
E.g. c:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\API-MS-WIN-CORE-DEBUG-L1-1-0.DLL are marked with red text x86 in the CPU column.

In the "tree" under GDALALLJNI.DLL some DLLs are marked with a red icon, e.g API-MS-WIN-CRT-HEAP-L1-1-0.DLL.
When I search for that DLL-file in my computer it is found under several libraries
e.g C:\Windows\System32\downlevel, C:\Program Files (x86)\Citrix\ICA Client\Receiver, C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\bin
and a lot of other places...

My JAVA_HOME points to C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin. It is a x64 Java version.
My OS is windows10 with a x64 based processor.

Can this be any help finding the solution on my run time error:
Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: The specified procedure cannot be found

Kind regards,
Paul
Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r Stefan Moebius via gdal-dev
Skickat: den 24 mars 2021 09:42
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java


Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
Hi Paul,
I find the binaries provided at https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6 the easiest to use. If you click on one build, e.g. release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download options, including several installers. If you use the first one (Compiled binaries in a single .zip package), you get an archive which you need to extract, and which contains a folder bin\gdal\java. In there you find gdal.jar and gdalalljni.dll. Now in order to use this, you need to have

  *   Gdal.jar in your Java Classpath
  *   The extracted bin\gdal\java and bin folders in your Path (in Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the value, or set in the system)
If that doesn't work, you'll need to provide some more detailed description of what issue you are facing.

--
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Dienstag, 23. M?rz 2021 08:26
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal Java

Hi list,
is there someone out there who has succeeded in installing Gdal Javabindings in Windows?
I've tried for some weeks now :( and I can't find very much information how to do it I Windows.
gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as installed by the installation process.
I've been asking around on internet, but without any luck.
If these is someone who knows how to do it in Windows with Eclipse, it would be much appreciated to get some info...
It would be nice to have a bullet list (for dummies), from where to get the correct download files, installation, setting environment, what is needed to be set in Eclipse etc. I don't have any experience with javabindings or C++...

Kind regards,
Paul
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service<https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/89f431e9/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 31 04:29:03 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 31 Mar 2021 04:29:03 -0700 (MST)
Subject: [gdal-dev] Gdal Java
In-Reply-To: <09fd12c3f9b943a3af3fd44c373f37e8@lfv.se>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
 <09fd12c3f9b943a3af3fd44c373f37e8@lfv.se>
Message-ID: <1617190143707-0.post@n6.nabble.com>

Hi,

Perhaps you could ask from the Geotools/Geoserver teams how they manage to
get their GDAL plugin
https://docs.geotools.org/stable/userguide/library/coverage/imageio.html
https://docs.geoserver.org/stable/en/user/data/raster/gdal.html to work.

-Jukka Rahkonen-


paul.malm wrote
> Hi,
> further additional information.
> 
> I'm using
> Windows 11 64-bit with x64 based processor
> PROCESSOR_ARCHITECTURE=AMD64
> PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 13, GenuineIntel
> PROCESSOR_LEVEL=6
> The Java I'm using is: OpenJDK's 8u262-b1, x86 64bit JRE.
> /Paul
> 
> 
> Fr?n: Malm, Paul (Operations AIM)
> Skickat: den 31 mars 2021 10:50
> Till: 'Stefan Moebius' &lt;

> Stefan.Moebius@

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> ?mne: SV: Gdal Java
> 
> Hi, additional information.
> All DLL-files in Dependency Walker under the tree of GDALALLJNI.dll that
> are placed in C:\program files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\
> are marked with a red "frame" icon.
> /Paul
> 
> Fr?n: Malm, Paul (Operations AIM)
> Skickat: den 31 mars 2021 10:00
> Till: 'Stefan Moebius' &lt;

> Stefan.Moebius@

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> ?mne: SV: Gdal Java
> 
> Hi,
> I've installed dependency Walker 22_x64.
> I don't know how to use it, but when I load gdalalljni.dll I get the
> following errorcodes:
> Error: At least one required implicit or forwarded dependency was not
> found.
> Error: At least one module has an unresolved import due to a missing
> export function in an implicitly dependent module.
> Error: Modules with different CPU types were found.
> Error: A circular dependency was detected.
> Warning: At least one delay-load dependency module was not found.
> Warning: At least one module has an unresolved import due to a missing
> export function in a delay-load dependent module.
> 
> I can also see that a lot of DLL-files are not found e.g.
> EXT-MS-WINDOWSCORE-DEVICEINFO-L1-1-0.DLL...
> 
> In the module window of dependency walker I can see that there is 2
> different CPU types, the DLL-files with x86 are marked red while the x64
> are written in black (CPU-column).
> E.g. c:\program
> files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\API-MS-WIN-CORE-DEBUG-L1-1-0.DLL
> are marked with red text x86 in the CPU column.
> 
> In the "tree" under GDALALLJNI.DLL some DLLs are marked with a red icon,
> e.g API-MS-WIN-CRT-HEAP-L1-1-0.DLL.
> When I search for that DLL-file in my computer it is found under several
> libraries
> e.g C:\Windows\System32\downlevel, C:\Program Files (x86)\Citrix\ICA
> Client\Receiver, C:\Program
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\bin
> and a lot of other places...
> 
> My JAVA_HOME points to C:\Program
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin. It is a x64 Java version.
> My OS is windows10 with a x64 based processor.
> 
> Can this be any help finding the solution on my run time error:
> Native library load failed.
> java.lang.UnsatisfiedLinkError: C:\Program
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: The specified
> procedure cannot be found
> 
> Kind regards,
> Paul
> Fr?n: gdal-dev &lt;

> gdal-dev-bounces at .osgeo

> &gt; F?r Stefan Moebius via gdal-dev
> Skickat: den 24 mars 2021 09:42
> Till: 

> gdal-dev at .osgeo

> ?mne: Re: [gdal-dev] Gdal Java
> 
> 
> Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet
> att inneh?llet ?r s?kert.
> Hi Paul,
> I find the binaries provided at
> https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljttalb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOGIjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871SA4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6
> the easiest to use. If you click on one build, e.g.
> release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of download
> options, including several installers. If you use the first one (Compiled
> binaries in a single .zip package), you get an archive which you need to
> extract, and which contains a folder bin\gdal\java. In there you find
> gdal.jar and gdalalljni.dll. Now in order to use this, you need to have
> 
>   *   Gdal.jar in your Java Classpath
>   *   The extracted bin\gdal\java and bin folders in your Path (in
> Eclipse: Run Configuration -> Environment -> Select -> Path, then edit the
> value, or set in the system)
> If that doesn't work, you'll need to provide some more detailed
> description of what issue you are facing.
> 
> --
> Stefan
> 
> From: gdal-dev &lt;

> gdal-dev-bounces at .osgeo

> &gt; On Behalf Of 

> paul.malm@

> Sent: Dienstag, 23. M?rz 2021 08:26
> To: 

> gdal-dev at .osgeo

> Subject: [gdal-dev] Gdal Java
> 
> Hi list,
> is there someone out there who has succeeded in installing Gdal
> Javabindings in Windows?
> I've tried for some weeks now :( and I can't find very much information
> how to do it I Windows.
> gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as
> installed by the installation process.
> I've been asking around on internet, but without any luck.
> If these is someone who knows how to do it in Windows with Eclipse, it
> would be much appreciated to get some info...
> It would be nice to have a bullet list (for dummies), from where to get
> the correct download files, installation, setting environment, what is
> needed to be set in Eclipse etc. I don't have any experience with
> javabindings or C++...
> 
> Kind regards,
> Paul
> This email and the information contained herein is proprietary and
> confidential and subject to the Amdocs Email Terms of Service, which you
> may review at
> https://www.amdocs.com/about/email-terms-of-service&lt;https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&amp;i=57e1b682&amp;c=5keNkrDjrvzwcRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6cjwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmhYOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RMryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w&gt;
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jluis at ualg.pt  Wed Mar 31 06:34:15 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Wed, 31 Mar 2021 13:34:15 +0000
Subject: [gdal-dev] using an in-memory file as -cutline argument in gdalwarp
Message-ID: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>

I have low hopes on this one but have to confirm.

I have this "ds" dataset with one polygon geometry, which is correctly saved on disk with

ogr2ogr(ds, save="lixo.gmt")

and later correctly "cutlines" with

gdalwarp("IMG_9106.jpg", ["-cutline", "lixo.gmt", "-to", "SRC_METHOD=NO_GEOTRANSFORM"]);

but I wanted to avoid the step of saving to disk and instead using the inMemory file. If I ask its name, I see

GDALGetDescription(ds.ptr)
"/vsimem/##258"

But this fails

gdalwarp("IMG_9106.jpg", ["-cutline", GDALGetDescription(ds.ptr), "-to", "SRC_METHOD=NO_GEOTRANSFORM"])
NULL Dataset

Can this be made to work (would it work with the python bindings?) and I'm just doing it wrong or it just can't?

Thanks

Joaquim


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/bffa027b/attachment.html>

From even.rouault at spatialys.com  Wed Mar 31 06:43:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Mar 2021 15:43:14 +0200
Subject: [gdal-dev] using an in-memory file as -cutline argument in
 gdalwarp
In-Reply-To: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <99d14823-8ddb-f460-5400-7e2b432993f5@spatialys.com>

Joaquim,

yes, you should be able to use a /vsimem/ file as a cutline dataset. 
Here's an example in Python with a shapefile in /vsimem/:

https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/autotest/utilities/test_gdalwarp_lib.py#L1103

The cutlineDSName=is just python syntaxic sugar to format the arguments. 
There's no reason it shouldn't work in Julia too

Make sure that the cutline dataset is properly closed, before using it 
with gdalwarp

Even

Le 31/03/2021 ? 15:34, Joaquim Manuel Freire Lu?s a ?crit?:
>
> I have low hopes on this one but have to confirm.
>
> I have this ?ds? dataset with one polygon geometry, which is correctly 
> saved on disk with
>
> ogr2ogr(ds, save="lixo.gmt")
>
> and later correctly ?cutlines? with
>
> gdalwarp("IMG_9106.jpg", ["-cutline", "lixo.gmt", "-to", 
> "SRC_METHOD=NO_GEOTRANSFORM"]);
>
> but I wanted to avoid the step of saving to disk and instead using the 
> inMemory file. If I ask its name, I see
>
> GDALGetDescription(ds.ptr)
>
> "/vsimem/##258"
>
> But this fails
>
> gdalwarp("IMG_9106.jpg", ["-cutline", GDALGetDescription(ds.ptr), 
> "-to", "SRC_METHOD=NO_GEOTRANSFORM"])
>
> NULL Dataset
>
> Can this be made to work (would it work with the python bindings?) and 
> I?m just doing it wrong or it just can?t?
>
> Thanks
>
> Joaquim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/ebf1d380/attachment.html>

From pierre at chachatelier.fr  Wed Mar 31 06:14:39 2021
From: pierre at chachatelier.fr (Pierre Chatelier)
Date: Wed, 31 Mar 2021 15:14:39 +0200
Subject: [gdal-dev] Copy or translate ?
Message-ID: <f0601865-39c9-fdaa-2fac-e8f024277c13@chachatelier.fr>

Hello,
This a question about good practice in GDAL.

A data source provides me fixed-sized blocks of data, but the total 
amount of data is not known in advance.
To store them until the "end" event, I incrementally add those blocks to 
a dataset using AddBand() (supported by driver "MEM")

But once the dataset is complete, I want to reorder its data (because 
what I used as X will be in fact a band, Y will become X, and band will 
become Y) (and I want to store that in a ENVI BIL file for the 
efficiency of an exisiting tool later in the workflow)

I have different options? :
1)for each band : RasterIO(read from MEM dataset) -> tmp buffer -> 
RasterIO(write to ENVI dataset)
2)try to use gdal_translate_lib, but I will have a hard time figuring 
how to build the good parameters
3)something else ?

Considering performance first, what would you recommand ?

Pierre Chatelier




From andrew at aitchison.me.uk  Wed Mar 31 08:31:08 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 31 Mar 2021 16:31:08 +0100 (BST)
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
Message-ID: <4f786e53-17c9-86c1-4e5f-d9a384f8a829@aitchison.me.uk>

On Tue, 30 Mar 2021, Kurt Schwehr wrote:

> Jp2k is likely to continue with heavy use for a long time to come.  There
> are lots of hardware encoders in our solar system

So NASA may not be able to repeat the trick of upgrading the compression
software in a remote space probe (was that for Voyager or Pioneer ?)

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From marty.sullivan at cornell.edu  Wed Mar 31 08:57:43 2021
From: marty.sullivan at cornell.edu (Marty J. Sullivan)
Date: Wed, 31 Mar 2021 15:57:43 +0000
Subject: [gdal-dev] Long Term Prognosis for JPEG 2000
In-Reply-To: <4f786e53-17c9-86c1-4e5f-d9a384f8a829@aitchison.me.uk>
References: <CAK8GPyBQud-eqHMLCQ3D=NL8VPuMQFiuaYLO2cn0ZB2BnBk5ag@mail.gmail.com>
 <CACmBxysVuoysmxdF7S_rYpGKMRK4epumLxD4-07_un32vXcheg@mail.gmail.com>
 <4f786e53-17c9-86c1-4e5f-d9a384f8a829@aitchison.me.uk>
Message-ID: <446264BB-6CDF-474A-8C0C-CAC9FE727662@cornell.edu>

I guess it would depend on whether they used ASICs or FPGAs. For FPGAs, they could update hardware algorithms remotely.

?On 3/31/21, 11:31 AM, "gdal-dev on behalf of Andrew C Aitchison" <gdal-dev-bounces at lists.osgeo.org on behalf of andrew at aitchison.me.uk> wrote:

    On Tue, 30 Mar 2021, Kurt Schwehr wrote:

    > Jp2k is likely to continue with heavy use for a long time to come.  There
    > are lots of hardware encoders in our solar system

    So NASA may not be able to repeat the trick of upgrading the compression
    software in a remote space probe (was that for Voyager or Pioneer ?)

    -- 
    Andrew C. Aitchison					Kendal, UK
     			andrew at aitchison.me.uk
    _______________________________________________
    gdal-dev mailing list
    gdal-dev at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/gdal-dev


From Matt.Wilkie at yukon.ca  Wed Mar 31 09:46:46 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 31 Mar 2021 16:46:46 +0000
Subject: [gdal-dev] More info on gdalwarp resampling methods?
In-Reply-To: <e9e33706-52d5-8582-722a-b7a0e1f10275@spatialys.com>
References: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>
 <e9e33706-52d5-8582-722a-b7a0e1f10275@spatialys.com>
Message-ID: <9cf803e5a2b5441d901f411882178007@app-exch2.gov.yk.ca>

It looks like my knack for stumbling into weird edge cases is still alive and well! Whee.

I'm using gdal from Qgis v3.16 on Windows.

I was trying the (mode,max,min,med) resampling methods and get the error reliably with `mode`. I thought I got it on a 2nd or 3rd method also but didn't repeat that this morning. I've been playing with GDAL_CACHEMAX and -wm numbers so that might be a factor.

Working directory is a local SSD drive and there is 32 GB physical memory, generally 50% or more free. Free drive space is on the low end, 10 GB on C: and 7 GB on D:, where the working folder is.

~~~
gdalwarp ^
--config GDAL_CACHEMAX 4096 ^
-wm 512 ^
-multi ^
-co TILED=YES ^
-co COMPRESS=ZSTD ^
-t_srs EPSG:3579 ^
-r mode ^
-co predictor=2 ^
tri_mergedDEM_clipped_16bit.tif ^
tri_mergedDEM_clipped_16bit_ytalb-rs-mode.tif
~~~

Console:
~~~
$ gdalwarp --config GDAL_CACHEMAX 4096 -wm 512 -multi -co TILED=YES -co COMPRESS=ZSTD -t_srs EPSG:3579 -r mode -co predictor=2 tri_mergedDEM_clipped_16bit.tif tri_mergedDEM_clipped_16bit_ytalb-rs-mode.tif
Creating output file that is 89772P x 73148L.
Processing tri_mergedDEM_clipped_16bit.tif [1/1] : 0Using internal nodata values (e.g. -99) for image tri_mergedDEM_clipped_16bit.tif.
Copying nodata values from source tri_mergedDEM_clipped_16bit.tif to destination tri_mergedDEM_clipped_16bit_ytalb-rs-mode.tif.
..ERROR 1: Failed to acquire WarpMutex in WarpRegion().
.
~~~

The info report for source image is attached, which can be downloaded from https://sft.gov.yk.ca/link/gV2K9F4PyH1PTJLQH8fy99  until April 14. (500mb).


-Matt

From: Even Rouault <even.rouault at spatialys.com>
Sent: March 30, 2021 11:39 PM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] More info on gdalwarp resampling methods?


Matt,

(leaving out a bit your general question) The below looks is an error unrelated to whatever resampling method you apply. This is completely unfamiliar though. Do you build GDAL yourself ? Did you disable threading at build time ? Or maybe you're enabling threading with a huge number of threads ? Does that happen all the time ?

Even
Background: I'm getting error messages when trying to use some of the methods with 16bit imagery and I don't know if I'm seeing a gdal bug, a data bug, or just "you can't use that method with this raster type".

ERROR 1: Failed to acquire WarpMutex in WarpRegion().

Thanks!

Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fyukon.ca&umid=AC1EC954-BECF-5E05-B6CB-AE995C90C7E2&auth=c132af8ee7c9d1278d61a701569070a095ce962e-90d4f63b9d26941043d059b2a373176c1c6f200f>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
 _______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fwww.spatialys.com&umid=AC1EC954-BECF-5E05-B6CB-AE995C90C7E2&auth=c132af8ee7c9d1278d61a701569070a095ce962e-76fdcd2f1d6f12f56ce5a5d39e4c63f2993393ad>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/8dbf7f1f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tri_mergedDEM_clipped_16bit.tif.info
Type: application/octet-stream
Size: 1769 bytes
Desc: tri_mergedDEM_clipped_16bit.tif.info
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/8dbf7f1f/attachment-0001.obj>

From even.rouault at spatialys.com  Wed Mar 31 10:27:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Mar 2021 19:27:24 +0200
Subject: [gdal-dev] More info on gdalwarp resampling methods?
In-Reply-To: <9cf803e5a2b5441d901f411882178007@app-exch2.gov.yk.ca>
References: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>
 <e9e33706-52d5-8582-722a-b7a0e1f10275@spatialys.com>
 <9cf803e5a2b5441d901f411882178007@app-exch2.gov.yk.ca>
Message-ID: <3b912232-987c-752c-5a3a-7362e64a736c@spatialys.com>

Matt,

I see that in the -multi mode, the I/O threads waits for a maximum of 10 
minutes for the computation thread to have finished. And you likely hit 
that limit because of the large value of -wm you set. There's no reason 
we max at 10 minutes however. Please find a but about that, including my 
analysis.

For better speed, I'd suggest you add --config GDAL_NUM_THREADS ALL_CPUS 
(or a given number of threads). The -multi switch only does one thread 
for I/O and one thread for computation. By adding --config 
GDAL_NUM_THREADS xxx you'll also multi-thread the computation part. The 
gain of -multi alone is generally neglectable. We should probably make 
-multi turn on --config GDAL_NUM_THREADS ALL_CPUS as well.

I also see that the mode resampling spend an awful lot of time on line 
"memset(panVals, 0, nBins*sizeof(int));" where nBins=65536 on Int16 
data, and that for each output pixel. We could probably do something 
much less expensive for most cases. Please file a separate enhancement 
ticket about that particular case.

Even


Le 31/03/2021 ? 18:46, Matt.Wilkie at yukon.ca a ?crit?:
> gdalwarp --config GDAL_CACHEMAX 4096 -wm 512 -multi -co TILED=YES -co 
> COMPRESS=ZSTD -t_srs EPSG:3579 -r mode -co predictor=2 
> tri_mergedDEM_clipped_16bit.tif 
> tri_mergedDEM_clipped_16bit_ytalb-rs-mode.tif 

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/f6181373/attachment.html>

From jluis at ualg.pt  Wed Mar 31 11:03:13 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Wed, 31 Mar 2021 18:03:13 +0000
Subject: [gdal-dev] using an in-memory file as -cutline argument in
 gdalwarp
In-Reply-To: <99d14823-8ddb-f460-5400-7e2b432993f5@spatialys.com>
References: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <99d14823-8ddb-f460-5400-7e2b432993f5@spatialys.com>
Message-ID: <AM6PR04MB395964D8E828737A96A8A077A67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>

This one is resisting. I can't spot any difference from your python example but it still fails.

What you mean by "Make sure that the cutline dataset is properly closed".
If I call GDALClose on it, then it disappears.
(note, I also tried by creating a "/vsimem/cut.shp" Memory cutline but the result was the same)


GDALGetDescription(ds.ptr)
"/vsimem/##280"

GDALClose(ds.ptr)

GDALGetDescription(ds.ptr)
""

From: Even Rouault <even.rouault at spatialys.com>
Sent: Wednesday, March 31, 2021 2:43 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] using an in-memory file as -cutline argument in gdalwarp


Joaquim,

yes, you should be able to use a /vsimem/ file as a cutline dataset. Here's an example in Python with a shapefile in /vsimem/:

https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/autotest/utilities/test_gdalwarp_lib.py#L1103

The cutlineDSName= is just python syntaxic sugar to format the arguments. There's no reason it shouldn't work in Julia too

Make sure that the cutline dataset is properly closed, before using it with gdalwarp

Even
Le 31/03/2021 ? 15:34, Joaquim Manuel Freire Lu?s a ?crit :

I have low hopes on this one but have to confirm.

I have this "ds" dataset with one polygon geometry, which is correctly saved on disk with

ogr2ogr(ds, save="lixo.gmt")

and later correctly "cutlines" with

gdalwarp("IMG_9106.jpg", ["-cutline", "lixo.gmt", "-to", "SRC_METHOD=NO_GEOTRANSFORM"]);

but I wanted to avoid the step of saving to disk and instead using the inMemory file. If I ask its name, I see

GDALGetDescription(ds.ptr)
"/vsimem/##258"

But this fails

gdalwarp("IMG_9106.jpg", ["-cutline", GDALGetDescription(ds.ptr), "-to", "SRC_METHOD=NO_GEOTRANSFORM"])
NULL Dataset

Can this be made to work (would it work with the python bindings?) and I'm just doing it wrong or it just can't?

Thanks

Joaquim





_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/9bf29ce3/attachment.html>

From even.rouault at spatialys.com  Wed Mar 31 12:28:12 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Mar 2021 21:28:12 +0200
Subject: [gdal-dev] using an in-memory file as -cutline argument in
 gdalwarp
In-Reply-To: <AM6PR04MB395964D8E828737A96A8A077A67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <99d14823-8ddb-f460-5400-7e2b432993f5@spatialys.com>
 <AM6PR04MB395964D8E828737A96A8A077A67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <cd1b25db-cf2d-865f-5d1b-8f7fe646a871@spatialys.com>

Ah, is it using the Memory driver ? As I saw a /vsimem/ filename and 
mention of gmt, I assumed you create a GMT file in /vsimem/, for which 
my example would have worked. But if you use the Memory driver, there's 
no way you can't use it as a cutline, since a dataset of the Memory 
driver can't be re-opened. You can just use the handle returned by the 
create method.

Le 31/03/2021 ? 20:03, Joaquim Manuel Freire Lu?s a ?crit?:
>
> This one is resisting. I can?t spot any difference from your python 
> example but it still fails.
>
> What you mean by ?Make sure that the cutline dataset is properly closed?.
>
> If I call GDALClose on it, then it disappears.
>
> (note, I also tried by creating a "/vsimem/cut.shp" Memory cutline but 
> the result was the same)
>
> GDALGetDescription(ds.ptr)
>
> "/vsimem/##280"
>
> GDALClose(ds.ptr)
>
> GDALGetDescription(ds.ptr)
>
> ??
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* Wednesday, March 31, 2021 2:43 PM
> *To:* Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] using an in-memory file as -cutline argument 
> in gdalwarp
>
> Joaquim,
>
> yes, you should be able to use a /vsimem/ file as a cutline dataset. 
> Here's an example in Python with a shapefile in /vsimem/:
>
> https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/autotest/utilities/test_gdalwarp_lib.py#L1103 
> <https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/autotest/utilities/test_gdalwarp_lib.py#L1103>
>
> The cutlineDSName=is just python syntaxic sugar to format the 
> arguments. There's no reason it shouldn't work in Julia too
>
> Make sure that the cutline dataset is properly closed, before using it 
> with gdalwarp
>
> Even
>
> Le 31/03/2021 ? 15:34, Joaquim Manuel Freire Lu?s a ?crit?:
>
>     I have low hopes on this one but have to confirm.
>
>     I have this ?ds? dataset with one polygon geometry, which is
>     correctly saved on disk with
>
>     ogr2ogr(ds, save="lixo.gmt")
>
>     and later correctly ?cutlines? with
>
>     gdalwarp("IMG_9106.jpg", ["-cutline", "lixo.gmt", "-to",
>     "SRC_METHOD=NO_GEOTRANSFORM"]);
>
>     but I wanted to avoid the step of saving to disk and instead using
>     the inMemory file. If I ask its name, I see
>
>     GDALGetDescription(ds.ptr)
>
>     "/vsimem/##258"
>
>     But this fails
>
>     gdalwarp("IMG_9106.jpg", ["-cutline", GDALGetDescription(ds.ptr),
>     "-to", "SRC_METHOD=NO_GEOTRANSFORM"])
>
>     NULL Dataset
>
>     Can this be made to work (would it work with the python bindings?)
>     and I?m just doing it wrong or it just can?t?
>
>     Thanks
>
>     Joaquim
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/703dfa47/attachment.html>

From Matt.Wilkie at yukon.ca  Wed Mar 31 12:29:35 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 31 Mar 2021 19:29:35 +0000
Subject: [gdal-dev] More info on gdalwarp resampling methods?
In-Reply-To: <3b912232-987c-752c-5a3a-7362e64a736c@spatialys.com>
References: <197953442ec546178b9c727a316e4dcd@app-exch2.gov.yk.ca>
 <e9e33706-52d5-8582-722a-b7a0e1f10275@spatialys.com>
 <9cf803e5a2b5441d901f411882178007@app-exch2.gov.yk.ca>
 <3b912232-987c-752c-5a3a-7362e64a736c@spatialys.com>
Message-ID: <f81654d20ca343138e03f441ae17ea13@app-exch2.gov.yk.ca>

Issues opened:


?         #3630 gdalwarp -multi should auto-enable GDAL_NUM_THREADS=ALL_CPUS <https://github.com/OSGeo/gdal/issues/3630>

?         #3631 gdalwarp error "Failed to acquire WarpMutex in WarpRegion()"<https://github.com/OSGeo/gdal/issues/3631>

?         #3632 gdalwarp mode resample much more expensive than needed<https://github.com/OSGeo/gdal/issues/3632>

-Matt

From: Even Rouault <even.rouault at spatialys.com>
Sent: March 31, 2021 10:27 AM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] More info on gdalwarp resampling methods?


*** External email: Do not click on links or attachments except from trusted senders. ***

******************************************************************************************




Matt,

I see that in the -multi mode, the I/O threads waits for a maximum of 10 minutes for the computation thread to have finished. And you likely hit that limit because of the large value of -wm you set. There's no reason we max at 10 minutes however. Please find a but about that, including my analysis.

For better speed, I'd suggest you add --config GDAL_NUM_THREADS ALL_CPUS (or a given number of threads). The -multi switch only does one thread for I/O and one thread for computation. By adding --config GDAL_NUM_THREADS xxx you'll also multi-thread the computation part. The gain of -multi alone is generally neglectable. We should probably make -multi turn on --config GDAL_NUM_THREADS ALL_CPUS as well.

I also see that the mode resampling spend an awful lot of time on line "memset(panVals, 0, nBins*sizeof(int));" where nBins=65536 on Int16 data, and that for each output pixel. We could probably do something much less expensive for most cases. Please file a separate enhancement ticket about that particular case.

Even


Le 31/03/2021 ? 18:46, Matt.Wilkie at yukon.ca<mailto:Matt.Wilkie at yukon.ca> a ?crit :
gdalwarp --config GDAL_CACHEMAX 4096 -wm 512 -multi -co TILED=YES -co COMPRESS=ZSTD -t_srs EPSG:3579 -r mode -co predictor=2 tri_mergedDEM_clipped_16bit.tif tri_mergedDEM_clipped_16bit_ytalb-rs-mode.tif

--

http://www.spatialys.com<https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fwww.spatialys.com&umid=682B3DEE-BED8-6F05-8639-74A30E43DC88&auth=c132af8ee7c9d1278d61a701569070a095ce962e-453104e8853fb736505949aed5860b4e74f3ecf8>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/937aff36/attachment-0001.html>

From jesse.bickel at noaa.gov  Wed Mar 31 12:54:37 2021
From: jesse.bickel at noaa.gov (Jesse Bickel - NOAA Affiliate)
Date: Wed, 31 Mar 2021 14:54:37 -0500
Subject: [gdal-dev] netCDF vector driver reading CF-1.6 point featureType
 with time coordinate variable
Message-ID: <dhwdtuorw136.wl-jesse.bickel@noaa.gov>

Hello,

When using the netCDF vector driver to read CF-1.6 point features, it appears
a netCDF time coordinate variable prevents OGR layers from being produced. When
the time variable units are changed to fake units, such as meters, layers are
then produced.

Attached are two example CDL files and two netCDF 3 files produced from the
CDL files. From the below log one can see the layer count 1 for the netCDF data
labeled "ogr_layer_produced" and layer count 0 for the netCDF data labeled
"ogr_layer_not_produced" for GDAL/OGR version 3.2.1. The effect in a downstream
tool such as QGIS is success or failure in reading a GIS layer from the netCDF.

I see the warning about sharing a primary dimension, but I do not see such a
requirement in the CF conventions. It would be preferred to allow layers to be
produced for the latter variables when there is a time coordinate variable
present as a time variable.

Thank you for your consideration,

Jesse

--
Contractor, ERT, Inc.
Federal Affiliation: NWC/OWP/NOAA/DOC

-------------- next part --------------
netcdf ogr_layer_produced {
dimensions:
	geo = 3 ;
	duration = 1 ;
	time = 1 ;
	name_string_len = 2 ;
	long_string_len = 20 ;
variables:
	int ProjectionCoordinateSystem ;
		ProjectionCoordinateSystem:long_name = "CRS definition" ;
		ProjectionCoordinateSystem:grid_mapping_name = "latitude_longitude" ;
		ProjectionCoordinateSystem:spatial_ref = "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]]" ;
		ProjectionCoordinateSystem:longitude_of_prime_meridian = 0. ;
		ProjectionCoordinateSystem:semi_major_axis = 6378137. ;
		ProjectionCoordinateSystem:inverse_flattening = 298.257223563 ;
		ProjectionCoordinateSystem:proj4 = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs" ;
	int duration(duration) ;
		duration:units = "meters" ;
		duration:long_name = "The duration associated with all values in variables of interest." ;
		duration:notes = "Purposely avoided setting true units and standard_name attributes to maintain compatibility with GDAL/OGR 3.0.4 and QGIS 3.10.5." ;
	double lat(geo) ;
		lat:units = "degrees_north" ;
		lat:standard_name = "latitude" ;
		lat:long_name = "latitude" ;
		lat:axis = "Y" ;
		lat:_FillValue = 9.96920996838687e+36 ;
		lat:missing_value = 9.96920996838687e+36 ;
	double lon(geo) ;
		lon:units = "degrees_east" ;
		lon:standard_name = "longitude" ;
		lon:long_name = "longitude" ;
		lon:axis = "X" ;
		lon:_FillValue = 9.96920996838687e+36 ;
		lon:missing_value = 9.96920996838687e+36 ;
	char long_name(geo, long_string_len) ;
		long_name:coordinates = "lon lat" ;
		long_name:grid_mapping = "ProjectionCoordinateSystem" ;
		long_name:long_name = "The long name of the geo." ;
	char name(geo, name_string_len) ;
		name:coordinates = "lon lat" ;
		name:grid_mapping = "ProjectionCoordinateSystem" ;
		name:long_name = "The short name of the geo." ;
	int time(time) ;
		time:units = "meters" ;
		time:long_name = "minutes since 1970-01-01T00:00:00Z" ;
		time:notes = "Purposely avoided setting true units and standard_name attributes to maintain compatibility with GDAL/OGR 3.0.4 and QGIS 3.10.5." ;
	double VARIABLE_OF_INTEREST_1(geo) ;
		VARIABLE_OF_INTEREST_1:_FillValue = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_1:missing_value = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_1:long_name = "The first variable to plot." ;
		VARIABLE_OF_INTEREST_1:measurement_unit = "feet" ;
		VARIABLE_OF_INTEREST_1:grid_mapping = "ProjectionCoordinateSystem" ;
		VARIABLE_OF_INTEREST_1:coordinates = "lon lat" ;
	double VARIABLE_OF_INTEREST_2(geo) ;
		VARIABLE_OF_INTEREST_2:_FillValue = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_2:missing_value = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_2:long_name = "The second variable to plot." ;
		VARIABLE_OF_INTEREST_2:measurement_unit = "feet" ;
		VARIABLE_OF_INTEREST_2:grid_mapping = "ProjectionCoordinateSystem" ;
		VARIABLE_OF_INTEREST_2:coordinates = "lon lat" ;

// global attributes:
		:Conventions = "CF-1.6" ;
		:featureType = "point" ;
data:

 ProjectionCoordinateSystem = _ ;

 duration = 120 ;

 lat = 37.0, 35.0, 36.0 ;

 lon = -97.0, -97.5, -97.8 ;

 long_name =
  "1111111111_AAAAAAAAA",
  "2222222222_BBBBBBBBB",
  "3333333333_CCCCCCCCC" ;

 name =
  "1A",
  "2B",
  "3C" ;

 time = 26852709 ;

 VARIABLE_OF_INTEREST_1 = 0.344485291636462, 0.155167470401714, 
    0.0597629903227599 ;

 VARIABLE_OF_INTEREST_2 = 24, 13, 23 ;
}
-------------- next part --------------

-------------- next part --------------
netcdf ogr_layer_not_produced {
dimensions:
	geo = 3 ;
	duration = 1 ;
	time = 1 ;
	name_string_len = 2 ;
	long_string_len = 20 ;
variables:
	int ProjectionCoordinateSystem ;
		ProjectionCoordinateSystem:long_name = "CRS definition" ;
		ProjectionCoordinateSystem:grid_mapping_name = "latitude_longitude" ;
		ProjectionCoordinateSystem:spatial_ref = "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]]" ;
		ProjectionCoordinateSystem:longitude_of_prime_meridian = 0. ;
		ProjectionCoordinateSystem:semi_major_axis = 6378137. ;
		ProjectionCoordinateSystem:inverse_flattening = 298.257223563 ;
		ProjectionCoordinateSystem:proj4 = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs" ;
	int duration(duration) ;
		duration:units = "minutes" ;
		duration:standard_name = "time" ;
		duration:long_name = "The duration associated with all values in variables of interest." ;
	double lat(geo) ;
		lat:units = "degrees_north" ;
		lat:standard_name = "latitude" ;
		lat:long_name = "latitude" ;
		lat:axis = "Y" ;
		lat:_FillValue = 9.96920996838687e+36 ;
		lat:missing_value = 9.96920996838687e+36 ;
	double lon(geo) ;
		lon:units = "degrees_east" ;
		lon:standard_name = "longitude" ;
		lon:long_name = "longitude" ;
		lon:axis = "X" ;
		lon:_FillValue = 9.96920996838687e+36 ;
		lon:missing_value = 9.96920996838687e+36 ;
	char long_name(geo, long_string_len) ;
		long_name:coordinates = "lon lat" ;
		long_name:grid_mapping = "ProjectionCoordinateSystem" ;
		long_name:long_name = "The long name of the geo." ;
	char name(geo, name_string_len) ;
		name:coordinates = "lon lat" ;
		name:grid_mapping = "ProjectionCoordinateSystem" ;
		name:long_name = "The short name of the geo." ;
	int time(time) ;
		time:units = "minutes since 1970-01-01T00:00:00Z" ;
		time:standard_name = "time" ;
		time:long_name = "The datetime associated with all values in variables of interest." ;
	double VARIABLE_OF_INTEREST_1(geo) ;
		VARIABLE_OF_INTEREST_1:_FillValue = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_1:missing_value = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_1:long_name = "The first variable to plot." ;
		VARIABLE_OF_INTEREST_1:measurement_unit = "feet" ;
		VARIABLE_OF_INTEREST_1:grid_mapping = "ProjectionCoordinateSystem" ;
		VARIABLE_OF_INTEREST_1:coordinates = "lon lat" ;
	double VARIABLE_OF_INTEREST_2(geo) ;
		VARIABLE_OF_INTEREST_2:_FillValue = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_2:missing_value = 9.96920996838687e+36 ;
		VARIABLE_OF_INTEREST_2:long_name = "The second variable to plot." ;
		VARIABLE_OF_INTEREST_2:measurement_unit = "feet" ;
		VARIABLE_OF_INTEREST_2:grid_mapping = "ProjectionCoordinateSystem" ;
		VARIABLE_OF_INTEREST_2:coordinates = "lon lat" ;

// global attributes:
		:Conventions = "CF-1.6" ;
		:featureType = "point" ;
data:

 ProjectionCoordinateSystem = _ ;

 duration = 120 ;

 lat = 37.0, 35.0, 36.0 ;

 lon = -97.0, -97.5, -97.8 ;

 long_name =
  "1111111111_AAAAAAAAA",
  "2222222222_BBBBBBBBB",
  "3333333333_CCCCCCCCC" ;

 name =
  "1A",
  "2B",
  "3C" ;

 time = 26852709 ;

 VARIABLE_OF_INTEREST_1 = 0.344485291636462, 0.155167470401714, 
    0.0597629903227599 ;

 VARIABLE_OF_INTEREST_2 = 24, 13, 23 ;
}
-------------- next part --------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr_layer_produced.nc
Type: application/octet-stream
Size: 2968 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/82a07df0/attachment.obj>
-------------- next part --------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr_layer_not_produced.nc
Type: application/octet-stream
Size: 2796 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/82a07df0/attachment-0001.obj>
-------------- next part --------------



User.Name at MACHINE-NAME /cygdrive/C/Users/User.Name/code/gdal-3.2.1/apps
$ CPL_DEBUG=ON ./ogrinfo.exe ../../../Downloads/ogr_layer_produced.nc
GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
GDAL_netCDF: var_count = 9
GDAL_netCDF:
=====
SetProjectionFromVar( 65536, 4)
GDAL_netCDF: got grid_mapping ProjectionCoordinateSystem
GDAL_netCDF: bIsGdalFile=0 bIsGdalCfFile=0 bSwitchedXY=0 bBottomUp=1
GDAL_netCDF: got spheroid from CF: (6378137.000000 , 298.257224)
GDAL_netCDF: setting WKT from CF
GDAL_netCDF: setting WKT from GDAL
GDAL_netCDF: SetProjection, WKT = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
GDAL_netCDF: Got SRS but no geotransform from GDAL!
GDAL: GDALOpen(../../../Downloads/ogr_layer_produced.nc, this=0x8000dafa0) succeeds as netCDF.
INFO: Open of `../../../Downloads/ogr_layer_produced.nc'
      using driver `netCDF' successful.
OGR: GetLayerCount() = 1

1: ogr_layer_produced (Point)
GDAL: GDALClose(../../../Downloads/ogr_layer_produced.nc, this=0x8000dafa0)
GDAL: In GDALDestroy - unloading GDAL shared library.

User.Name at MACHINE-NAME /cygdrive/C/Users/User.Name/code/gdal-3.2.1/apps
$ CPL_DEBUG=ON ./ogrinfo.exe ../../../Downloads/ogr_layer_not_produced.nc
GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
GDAL_netCDF: var_count = 9
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
GDAL_netCDF: var_count = 9
Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
GDAL: GDALOpen(../../../Downloads/ogr_layer_not_produced.nc, this=0x8000db3b0) succeeds as netCDF.
INFO: Open of `../../../Downloads/ogr_layer_not_produced.nc'
      using driver `netCDF' successful.
Metadata:
  NC_GLOBAL#Conventions=CF-1.6
  NC_GLOBAL#featureType=point
OGR: GetLayerCount() = 0

GDAL: GDALClose(../../../Downloads/ogr_layer_not_produced.nc, this=0x8000db3b0)
GDAL: In GDALDestroy - unloading GDAL shared library.

From even.rouault at spatialys.com  Wed Mar 31 13:23:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Mar 2021 22:23:14 +0200
Subject: [gdal-dev] netCDF vector driver reading CF-1.6 point
 featureType with time coordinate variable
In-Reply-To: <dhwdtuorw136.wl-jesse.bickel@noaa.gov>
References: <dhwdtuorw136.wl-jesse.bickel@noaa.gov>
Message-ID: <c6d41c04-1afa-4851-6d0f-4b532558b64c@spatialys.com>

There are heuristics in the driver to try to detect variables that are 
vector data from 2D or more gridded data that should be handled only by 
the raster side. Please file a ticket on github with the details you've 
provided in this email.

Le 31/03/2021 ? 21:54, Jesse Bickel - NOAA Affiliate via gdal-dev a ?crit?:
> Hello,
>
> When using the netCDF vector driver to read CF-1.6 point features, it appears
> a netCDF time coordinate variable prevents OGR layers from being produced. When
> the time variable units are changed to fake units, such as meters, layers are
> then produced.
>
> Attached are two example CDL files and two netCDF 3 files produced from the
> CDL files. From the below log one can see the layer count 1 for the netCDF data
> labeled "ogr_layer_produced" and layer count 0 for the netCDF data labeled
> "ogr_layer_not_produced" for GDAL/OGR version 3.2.1. The effect in a downstream
> tool such as QGIS is success or failure in reading a GIS layer from the netCDF.
>
> I see the warning about sharing a primary dimension, but I do not see such a
> requirement in the CF conventions. It would be preferred to allow layers to be
> produced for the latter variables when there is a time coordinate variable
> present as a time variable.
>
> Thank you for your consideration,
>
> Jesse
>
> --
> Contractor, ERT, Inc.
> Federal Affiliation: NWC/OWP/NOAA/DOC
>
>
>
>
>
>
>
> User.Name at MACHINE-NAME /cygdrive/C/Users/User.Name/code/gdal-3.2.1/apps
> $ CPL_DEBUG=ON ./ogrinfo.exe ../../../Downloads/ogr_layer_produced.nc
> GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
> GDAL_netCDF: var_count = 9
> GDAL_netCDF:
> =====
> SetProjectionFromVar( 65536, 4)
> GDAL_netCDF: got grid_mapping ProjectionCoordinateSystem
> GDAL_netCDF: bIsGdalFile=0 bIsGdalCfFile=0 bSwitchedXY=0 bBottomUp=1
> GDAL_netCDF: got spheroid from CF: (6378137.000000 , 298.257224)
> GDAL_netCDF: setting WKT from CF
> GDAL_netCDF: setting WKT from GDAL
> GDAL_netCDF: SetProjection, WKT = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
> GDAL_netCDF: Got SRS but no geotransform from GDAL!
> GDAL: GDALOpen(../../../Downloads/ogr_layer_produced.nc, this=0x8000dafa0) succeeds as netCDF.
> INFO: Open of `../../../Downloads/ogr_layer_produced.nc'
>        using driver `netCDF' successful.
> OGR: GetLayerCount() = 1
>
> 1: ogr_layer_produced (Point)
> GDAL: GDALClose(../../../Downloads/ogr_layer_produced.nc, this=0x8000dafa0)
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> User.Name at MACHINE-NAME /cygdrive/C/Users/User.Name/code/gdal-3.2.1/apps
> $ CPL_DEBUG=ON ./ogrinfo.exe ../../../Downloads/ogr_layer_not_produced.nc
> GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
> GDAL_netCDF: var_count = 9
> Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
> GDAL_netCDF: driver detected file type=1, libnetcdf detected type=1
> GDAL_netCDF: var_count = 9
> Warning 1: The dataset has several variables that could be identified as vector fields, but not all share the same primary dimension. Consequently they will be ignored.
> GDAL: GDALOpen(../../../Downloads/ogr_layer_not_produced.nc, this=0x8000db3b0) succeeds as netCDF.
> INFO: Open of `../../../Downloads/ogr_layer_not_produced.nc'
>        using driver `netCDF' successful.
> Metadata:
>    NC_GLOBAL#Conventions=CF-1.6
>    NC_GLOBAL#featureType=point
> OGR: GetLayerCount() = 0
>
> GDAL: GDALClose(../../../Downloads/ogr_layer_not_produced.nc, this=0x8000db3b0)
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/c7e68a2f/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Wed Mar 31 14:56:17 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 31 Mar 2021 21:56:17 +0000
Subject: [gdal-dev] Comprehensive list of values for ColorInterp
Message-ID: <51e320ae581d4ab98fcdaad3fd4cb604@app-exch2.gov.yk.ca>

What are the useful and/or valid values for the `ColorInterp` setting of a raster band?
I have seen: Red, Green, Blue, Gray, Undefined.
Is this a complete list or can there be values like "Mask", "Infrared", or...?

[cid:image001.png at 01D7263D.FF7F1CA0]


Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/2806d03e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7416 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210331/2806d03e/attachment.png>

From j1 at jimenezshaw.com  Wed Mar 31 15:07:42 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 1 Apr 2021 00:07:42 +0200
Subject: [gdal-dev] Comprehensive list of values for ColorInterp
In-Reply-To: <51e320ae581d4ab98fcdaad3fd4cb604@app-exch2.gov.yk.ca>
References: <51e320ae581d4ab98fcdaad3fd4cb604@app-exch2.gov.yk.ca>
Message-ID: <CADRrdKvJqsZLaTyNyeogpst6VdV9_Ot6jCmObC7Nmzo=Xwy26g@mail.gmail.com>

You have a list here:
https://gdal.org/doxygen/gdal_8h.html#ace76452d94514561fffa8ea1d2a5968c

The conversion from the enum to string here:
https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdal_misc.cpp#L904

Cheers
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 31 Mar 2021 at 23:56, <Matt.Wilkie at yukon.ca> wrote:

> What are the useful and/or valid values for the `ColorInterp` setting of a
> raster band?
>
> I have seen: Red, Green, Blue, Gray, Undefined.
>
> Is this a complete list or can there be values like ?Mask?, ?Infrared?,
> or??
>
>
>
>
>
>
>
> *Matt Wilkie*
>
> Geomatics Analyst
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>
> *Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210401/8671204e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7416 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210401/8671204e/attachment-0001.png>

From jluis at ualg.pt  Wed Mar 31 18:39:38 2021
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 1 Apr 2021 01:39:38 +0000
Subject: [gdal-dev] using an in-memory file as -cutline argument in
 gdalwarp
In-Reply-To: <cd1b25db-cf2d-865f-5d1b-8f7fe646a871@spatialys.com>
References: <AM6PR04MB3959889ECC098A47359C6A4EA67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <99d14823-8ddb-f460-5400-7e2b432993f5@spatialys.com>
 <AM6PR04MB395964D8E828737A96A8A077A67C9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <cd1b25db-cf2d-865f-5d1b-8f7fe646a871@spatialys.com>
Message-ID: <VI1PR04MB3966C4431D080DAE77E8160BA67B9@VI1PR04MB3966.eurprd04.prod.outlook.com>

Ok, I tried to use the handle like you said but couldn't find how to. That handle is a *void and options to gdalwarp are passed as strings.

Also tried to create a /vismem/filename but the same code that creates the in Memory GDAL datasets errored at line  (when line 285 was uncommented)
https://github.com/GenericMappingTools/GMT.jl/blob/master/src/gdal_utils.jl#L333
(setfeature!(layer, feature))

But it was not all failures. Managed to make it work if using ogr2ogr to write the /vsimem/file (though I might as well write it on disk)

This succeeded

julia> ogr2ogr(ds, dest="/vsimem/lixo.gmt")
julia> gdalwarp("IMG_9106.jpg", ["-cutline", "/vsimem/lixo.gmt", "-to", "SRC_METHOD=NO_GEOTRANSFORM"])

Not the best but also allows me to keep learning this business.


From: Even Rouault <even.rouault at spatialys.com>
Sent: Wednesday, March 31, 2021 8:28 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] using an in-memory file as -cutline argument in gdalwarp


Ah, is it using the Memory driver ? As I saw a /vsimem/ filename and mention of gmt, I assumed you create a GMT file in /vsimem/, for which my example would have worked. But if you use the Memory driver, there's no way you can't use it as a cutline, since a dataset of the Memory driver can't be re-opened. You can just use the handle returned by the create method.
Le 31/03/2021 ? 20:03, Joaquim Manuel Freire Lu?s a ?crit :
This one is resisting. I can't spot any difference from your python example but it still fails.

What you mean by "Make sure that the cutline dataset is properly closed".
If I call GDALClose on it, then it disappears.
(note, I also tried by creating a "/vsimem/cut.shp" Memory cutline but the result was the same)


GDALGetDescription(ds.ptr)
"/vsimem/##280"

GDALClose(ds.ptr)

GDALGetDescription(ds.ptr)
""

From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: Wednesday, March 31, 2021 2:43 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt><mailto:jluis at ualg.pt>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] using an in-memory file as -cutline argument in gdalwarp


Joaquim,

yes, you should be able to use a /vsimem/ file as a cutline dataset. Here's an example in Python with a shapefile in /vsimem/:

https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/autotest/utilities/test_gdalwarp_lib.py#L1103

The cutlineDSName= is just python syntaxic sugar to format the arguments. There's no reason it shouldn't work in Julia too

Make sure that the cutline dataset is properly closed, before using it with gdalwarp

Even
Le 31/03/2021 ? 15:34, Joaquim Manuel Freire Lu?s a ?crit :
I have low hopes on this one but have to confirm.

I have this "ds" dataset with one polygon geometry, which is correctly saved on disk with

ogr2ogr(ds, save="lixo.gmt")

and later correctly "cutlines" with

gdalwarp("IMG_9106.jpg", ["-cutline", "lixo.gmt", "-to", "SRC_METHOD=NO_GEOTRANSFORM"]);

but I wanted to avoid the step of saving to disk and instead using the inMemory file. If I ask its name, I see

GDALGetDescription(ds.ptr)
"/vsimem/##258"

But this fails

gdalwarp("IMG_9106.jpg", ["-cutline", GDALGetDescription(ds.ptr), "-to", "SRC_METHOD=NO_GEOTRANSFORM"])
NULL Dataset

Can this be made to work (would it work with the python bindings?) and I'm just doing it wrong or it just can't?

Thanks

Joaquim




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210401/98af6749/attachment.html>

