From info at knowhow-la.de  Fri Mar  1 00:30:34 2013
From: info at knowhow-la.de (Helmut Seidel M.A.)
Date: Fri, 01 Mar 2013 09:30:34 +0100
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
In-Reply-To: <512E10E4.5040001@knowhow-la.de>
References: <512E10E4.5040001@knowhow-la.de>
Message-ID: <5130672A.5030704@knowhow-la.de>

Hello again,

Thank you for your answers, which guided me through my first steps. 
Yesterday I was quite happy to succeed compiling mapserver with perl 
which is a first step. In compiling gdal I was not that lucky but got a 
few millimeters forward.

I tried compiling with MinGW and mysys - and the --with-perl option. 
gdal itself compiles ok but the perl-portion breaks up with a file not 
found error (perl.h). I guess MinGW gets confused with the perl 
installations (it tries to use the one that comes with mysys not the one 
I installed in C:\Perl. Is there a way how to tell configure/make which 
Perl to use?

I then tried the visualc option - which succeeded aswell, but without 
perl. So here are two more questions (sorry for that):

 1. Is it possibible to tell Visualc to compile with perl (as in the
    --with-perl - option in MinGW)?
 2. Is it possible to first build gdal without perl and then install
    perl later?

Thanks again.

Helmut

Am 27.02.2013 14:57, schrieb Helmut Seidel M.A.:
> Hello everybody,
>
> in my comming up perl-project I need to use the Geo::Gdal - module. As 
> I understand I need to compile gdal from sources first and then build 
> the perl bindings. So far so good, but as I'm not a C/C++ developer I 
> ran into a host of problems. The first thing I tried, was to install 
> MinGW and compile gdal with the "--with-perl" option, which ran for 
> about two hours but broke of with a message complaining that perl 5.8 
> was not found on my system (I have ActivePerl 5.16 installed) - as far 
> as I could decipher the message - I tried gdal 1.90 and gdal 1.92.
> I then tried to compile it using VC 10 which seemed to work but I 
> didn't find a possibility where to put the "--with-perl" option - 
> anyway I tried to compile perl using perl Makefile.PL which imediately 
> complained about being not able to find gdal-conf (which I couldn't 
> find either). I guess there would be lots of complaints after that, 
> but I only got that far.
> I'm sure my errors have something to do with setting up paths and 
> compilation options, but I dont't know which and where to set them.
> So here's my question: has anybody a blow by blow account for C/C++ 
> dummies how to set up Geo::Gdal? That would be great!
> Another question is how to deploy the finished application to other 
> computers.
>
> I hope you could understand all of my English and my questions are not 
> too stupid - but I spend two working days on it so far so I'm a little 
> desperate now.
>
> Thanks and regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130301/ec0bc48a/attachment.html>

From even.rouault at mines-paris.org  Fri Mar  1 06:47:02 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 1 Mar 2013 15:47:02 +0100
Subject: [gdal-dev] help for GDAL 1.10
In-Reply-To: <A298ABDC148F6545BF68981CA859D12596FAF948@000S-EX-MBX-QS2.unimelb.edu.au>
References: <A298ABDC148F6545BF68981CA859D12596FAF90C@000S-EX-MBX-QS2.unimelb.edu.au>
	<A298ABDC148F6545BF68981CA859D12596FAF91D@000S-EX-MBX-QS2.unimelb.edu.au>
	<A298ABDC148F6545BF68981CA859D12596FAF948@000S-EX-MBX-QS2.unimelb.edu.au>
Message-ID: <201303011547.02708.even.rouault@mines-paris.org>

Le vendredi 01 mars 2013 14:53:15, Chunsun Zhang a ?crit :
> Hi Even,
> 
> I am a researcher in geospatial science. We want to use GDAL 1.10 with the
> recently released openJPEG 2.0 to read satellite imagery. However, I
> encountered errors in build GDAL 1.10beta. Can you please advise me how to
> build this version of GDAL?

Chunsun,

In general, please be much more precise in the description of the errors you 
encountered (i.e. paste the exact error message from the build console, and 
relevant extract from the nmake.local file or modified nmake.opt )

> I also appreciate your advice on how to build
> GDAL 1.10 with openJPEG 2. I am working on windows XP and windows 7 on PC.

I've not tried myself to build GDAL with openjpeg under Windows, but if you 
want to be lazy (which is a good thing), you could just download one of the 
packages labelled "MSVCXXXX (WinYY) - development" at the top of 
http://www.gisinternals.com/sdk/ : there are GDAL 1.10dev binaries with the 
openjpeg driver included.

In the "GDAL and MapServer build SDK packages (provides to compile MapServer 
and GDAL by yourself)" section, you'll also find the SDK to rebuild the above 
mentionned binaries.

> 
> Many thanks,
> 
> Chunsun

From Tom.Kralidis at ec.gc.ca  Fri Mar  1 08:12:06 2013
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Fri, 1 Mar 2013 11:12:06 -0500
Subject: [gdal-dev] PostGIS date field output
In-Reply-To: <512FD27B.1040301@swoodbridge.com>
References: <D4979196AC320B45BE4A5DD7EE80C3E44F073A@sdow04exmail2.ontario.int.ec.gc.ca>
	<512FD27B.1040301@swoodbridge.com>
Message-ID: <D4979196AC320B45BE4A5DD7EE80C3E44F07B7@sdow04exmail2.ontario.int.ec.gc.ca>



> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of Stephen Woodbridge
> Sent: Thursday, February 28, 2013 16:56
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] PostGIS date field output
> 
> On 2/28/2013 4:40 PM, Kralidis,Tom [Ontario] wrote:
> > Hi: we are using 1.9.2 via MapServer WFS to serve out PostGIS data
in
> > GeoJSON, which works very well -- great feature!
> >
> > I was having issues with GeoJSON output on date fields when hour is
<
> > 10.
> >
> > Digging deeper:
> >
> > The column in question is of PostgreSQL type 'timestamp without time
> > zone'.  When querying the data in psql, I get:
> >
> > mydatetime: 2013-02-19 01:03:34
> >
> > When I do an ogrinfo the same is shown as:
> >
> > mydatetime (DateTime) = 2013/02/19  1:03:34
> >
> > The month is zero padded, but not the hour.  I would have expected
it to
> > be consistent one way or the other.   Naturally, any format which
OGR
> > writes to carries this format.
> >
> > Our downstream UI (in this case) has to implement a workaround, as
it
> > expects zero padded hour values.
> >
> > Is this by design in GDAL/OGR?  Is there any we can do to output
hour
> > values zero padded in this case?  I'd rather not have the front end
have
> > to fix this, and using MapServer WFS out of the box leaves us little
> > options for custom scripting.
> 
> Tom,
> 
> Can you cast it to a string in sql so it gets passed through a text?
> 
> -Steve W

Steve: thanks for the suggestion.  FYI Even has since implemented a fix
in
https://github.com/OSGeo/gdal/commit/fb3f860779c9ef736c42750b9e7199baebc
44216

Thanks

..Tom


From even.rouault at mines-paris.org  Fri Mar  1 09:35:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 1 Mar 2013 18:35:14 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+ROfT5bHFaVQwObLwE7mMV2L=g34V9FLcN5hE=Pq+QbVw@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<201302251712.04917.even.rouault@mines-paris.org>
	<CACALY+ROfT5bHFaVQwObLwE7mMV2L=g34V9FLcN5hE=Pq+QbVw@mail.gmail.com>
Message-ID: <201303011835.14994.even.rouault@mines-paris.org>

Le lundi 25 f?vrier 2013 19:53:22, Tamas Szekeres a ?crit :
> So we seem to have 3 divergent options to provide a work around:
> 
> 1. Expose fieldmap setting to let the user decide the order of the fields
> to be copied.
> 2. Modify GetFieldIndex to provide the name based lookup by the truncated
> name (for the shape driver specifically)
> 3. Provide an option to instruct ogr2ogr to consider the source and the
> destination has the same field structure (order).
> 
> Which would be the most reasonable?
> 
> I personally in favour of #3 or #1.  #3 is easier to implement, but #1 is
> more customizable.
> With regards to #2 we might continue to encounter non trivial matches.

There's even a 4th option that doesn't require any code change. Create a OGR 
VRT file that renames the source fields to the truncated shapefile field names (or 
the reverse : creates a OGR VRT that renames the truncated shapefile field names 
to the original field names, since OGR VRT now supports since a few versions 
CreateFeature())

From szekerest at gmail.com  Fri Mar  1 11:57:43 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 1 Mar 2013 20:57:43 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <201303011835.14994.even.rouault@mines-paris.org>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<201302251712.04917.even.rouault@mines-paris.org>
	<CACALY+ROfT5bHFaVQwObLwE7mMV2L=g34V9FLcN5hE=Pq+QbVw@mail.gmail.com>
	<201303011835.14994.even.rouault@mines-paris.org>
Message-ID: <CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>

2013/3/1 Even Rouault <even.rouault at mines-paris.org>

>
> There's even a 4th option that doesn't require any code change. Create a
> OGR
> VRT file that renames the source fields to the truncated shapefile field
> names (or
> the reverse : creates a OGR VRT that renames the truncated shapefile field
> names
> to the original field names, since OGR VRT now supports since a few
> versions
> CreateFeature())
>


This may probably work, but doesn't seem to be very user friendly. Actually
I would prefer to include at least a flag to indicate that ogr2ogr should
provide mapping the fields in the same order (don't lookup field index by
name) for example:

ogr2ogr -append -f "ESRI Shapefile" -nofieldreorder destination.shp
 [source]

or with the previous fieldmap approach

ogr2ogr -append -f "ESRI Shapefile" -fieldmap "default" destination.shp
 [source]

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130301/93c52fd1/attachment-0001.html>

From chaitanya.ch at gmail.com  Fri Mar  1 12:00:26 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 2 Mar 2013 01:30:26 +0530
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<201302251712.04917.even.rouault@mines-paris.org>
	<CACALY+ROfT5bHFaVQwObLwE7mMV2L=g34V9FLcN5hE=Pq+QbVw@mail.gmail.com>
	<201303011835.14994.even.rouault@mines-paris.org>
	<CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>
Message-ID: <CAMKgpOZJcF+SM6ifsU9gPjn_5SB2v9BNqCfE6bPyqr2joM4Epw@mail.gmail.com>

A simple temporary fix is to use the -sql option and use the AS keyword to
set the alias of the original field name into the truncated name.


On Sat, Mar 2, 2013 at 1:27 AM, Tamas Szekeres <szekerest at gmail.com> wrote:

>
>
> 2013/3/1 Even Rouault <even.rouault at mines-paris.org>
>
>>
>> There's even a 4th option that doesn't require any code change. Create a
>> OGR
>> VRT file that renames the source fields to the truncated shapefile field
>> names (or
>> the reverse : creates a OGR VRT that renames the truncated shapefile
>> field names
>> to the original field names, since OGR VRT now supports since a few
>> versions
>> CreateFeature())
>>
>
>
> This may probably work, but doesn't seem to be very user friendly.
> Actually I would prefer to include at least a flag to indicate that ogr2ogr
> should provide mapping the fields in the same order (don't lookup field
> index by name) for example:
>
> ogr2ogr -append -f "ESRI Shapefile" -nofieldreorder destination.shp
>  [source]
>
> or with the previous fieldmap approach
>
> ogr2ogr -append -f "ESRI Shapefile" -fieldmap "default" destination.shp
>  [source]
>
> Best regards,
>
> Tamas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130302/8a296ae0/attachment.html>

From ronthecon at gmail.com  Fri Mar  1 12:11:34 2013
From: ronthecon at gmail.com (Ronak Bhatia)
Date: Fri, 1 Mar 2013 15:11:34 -0500
Subject: [gdal-dev] Cannot find gdaltransform's C wrapper
In-Reply-To: <CAM6dNWqoA0emrbiVPxpsQrainDCrFG9JgL=aCviOLrZDBkUyBg@mail.gmail.com>
References: <CAM6dNWqoA0emrbiVPxpsQrainDCrFG9JgL=aCviOLrZDBkUyBg@mail.gmail.com>
Message-ID: <CAM6dNWr9k39JxaFMny7nm6qJkpyxjjQizYD9tQZV-xtUBQYxEA@mail.gmail.com>

Hi,

I'm using Yorick, a programming language similar to C and Matlab, and
trying to port the function gdaltransform to Yorick. In order for me to do
that, I have to find the C wrapper for the particular function and then I
can work on porting it. I looked through gdal.h under gcore and no luck.
Could you direct me to the right path?

Thanks,
R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130301/800eae6b/attachment.html>

From allenck at windstream.net  Fri Mar  1 15:56:34 2013
From: allenck at windstream.net (allenck)
Date: Fri, 1 Mar 2013 15:56:34 -0800 (PST)
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Compiling with OpenJpeg 2.0
In-Reply-To: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>
References: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>
Message-ID: <1362182194316-5037910.post@n6.nabble.com>

I have had some problems compiling the 1.10 beta with OpenJpeg support on
windows 7 and Microsoft Visual C++ 2008. 
 After configuring GDAL's nmake.opt file to include  OpenJpeg. I was getting
errors that openjpeg-2.0\openjpeg.h could not be found. There is a
workaround since GDAL is looking in the wrong place for the file:
 a)in the OpenJpeg project, make a copy of directory 'openjp2' in folder
..\openjpeg\src\lib and rename it to openjpeg-2.0
 a)Copy the file ..\Downloads\openjpeg\build\src\lib\openjp2\opj_config.h
into the openjpeg-2.0 folder created above. 
 b)GDAL will now compile but you will get onresolved virtuals. In order to
fix this, the gdal nmake.opt file needs to be edited to hard code the
library path in the link command: 
 c)EXTERNAL_LIBS =	$(OGDILIB) $(XERCES_LIB) $(EXPAT_LIB) $(OCI_LIB)
$(PG_LIB) \
	$(ECW_LIB_LINK) $(HDF4_LIB_LINK) $(FME_LIB) $(MRSID_LIB_LINK) \
	$(FITS_LIB_LINK) $(JPEG_LIB) $(NETCDF_LIB_LINK) $(PROJ4_LIB) \
	$(GEOTIFF_LIB) $(TIFF_LIB) $(PROJ_LIBRARY) $(SQLITE_LIB) \
	$(MYSQL_LIB) $(GEOS_LIB) $(HDF5_LIB_LINK) $(SDE_LIB) $(ARCOBJECTS_LIB)
$(DWG_LIB) \
	$(IDB_LIB) $(CURL_LIB) $(DODS_LIB) $(KAKLIB) $(PCIDSK_LIB) \
	$(ODBCLIB) $(JASPER_LIB) $(PNG_LIB) $(ADD_LIBS) $(OPENJPEG_LIB) \
	$(MRSID_LIDAR_LIB) $(LIBKML_LIBS) $(SOSI_LIBS) $(POPPLER_LIBS) \
	C:\Users\Allen\Downloads\openjpeg\build\bin\Debug\openjp2.lib \
	C:\Users\Allen\Downloads\podofo-0.9.1\build\src\Debug\podofo.lib \
	"C:\Program Files (x86)\freetype\lib\freetype.lib" \
	gdi32.lib \
	$(LZMA_LIBS) \
	$(LIBICONV_LIBRARY) $(WEBP_LIBS) $(FGDB_LIB_LINK) $(FREEXL_LIBS)
$(GTA_LIBS) \
	$(INGRES_LIB) $(LIBXML2_LIB) $(PCRE_LIB)

Also in makefile.vc, I had to change the compiler /MD flag to /MDd for the
debug compile. 

I hope this 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-1-10-0-Beta1-tp5028821p5037910.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Mar  1 19:44:18 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 04:44:18 +0100
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Compiling with OpenJpeg 2.0
In-Reply-To: <1362182194316-5037910.post@n6.nabble.com>
References: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>
	<1362182194316-5037910.post@n6.nabble.com>
Message-ID: <201303020444.18955.even.rouault@mines-paris.org>

Le samedi 02 mars 2013 00:56:34, allenck a ?crit :
> I have had some problems compiling the 1.10 beta with OpenJpeg support on
> windows 7 and Microsoft Visual C++ 2008.
>  After configuring GDAL's nmake.opt file to include  OpenJpeg. I was
> getting errors that openjpeg-2.0\openjpeg.h could not be found. There is a
> workaround since GDAL is looking in the wrong place for the file:
>  a)in the OpenJpeg project, make a copy of directory 'openjp2' in folder
> ..\openjpeg\src\lib and rename it to openjpeg-2.0
>  a)Copy the file ..\Downloads\openjpeg\build\src\lib\openjp2\opj_config.h
> into the openjpeg-2.0 folder created above.
>  b)GDAL will now compile but you will get onresolved virtuals. In order to
> fix this, the gdal nmake.opt file needs to be edited to hard code the
> library path in the link command:
>  c)EXTERNAL_LIBS =	$(OGDILIB) $(XERCES_LIB) $(EXPAT_LIB) $(OCI_LIB)
> $(PG_LIB) \
> 	$(ECW_LIB_LINK) $(HDF4_LIB_LINK) $(FME_LIB) $(MRSID_LIB_LINK) \
> 	$(FITS_LIB_LINK) $(JPEG_LIB) $(NETCDF_LIB_LINK) $(PROJ4_LIB) \
> 	$(GEOTIFF_LIB) $(TIFF_LIB) $(PROJ_LIBRARY) $(SQLITE_LIB) \
> 	$(MYSQL_LIB) $(GEOS_LIB) $(HDF5_LIB_LINK) $(SDE_LIB) $(ARCOBJECTS_LIB)
> $(DWG_LIB) \
> 	$(IDB_LIB) $(CURL_LIB) $(DODS_LIB) $(KAKLIB) $(PCIDSK_LIB) \
> 	$(ODBCLIB) $(JASPER_LIB) $(PNG_LIB) $(ADD_LIBS) $(OPENJPEG_LIB) \
> 	$(MRSID_LIDAR_LIB) $(LIBKML_LIBS) $(SOSI_LIBS) $(POPPLER_LIBS) \
> 	C:\Users\Allen\Downloads\openjpeg\build\bin\Debug\openjp2.lib \
> 	C:\Users\Allen\Downloads\podofo-0.9.1\build\src\Debug\podofo.lib \
> 	"C:\Program Files (x86)\freetype\lib\freetype.lib" \
> 	gdi32.lib \
> 	$(LZMA_LIBS) \
> 	$(LIBICONV_LIBRARY) $(WEBP_LIBS) $(FGDB_LIB_LINK) $(FREEXL_LIBS)
> $(GTA_LIBS) \
> 	$(INGRES_LIB) $(LIBXML2_LIB) $(PCRE_LIB)

You shouldn't need to modify EXTERNAL_LIBS directly. You have to uncomment and 
adapt the following section of nmake.opt with the paths appropriate to your 
setup (or best copy it into nmake.local to avoid modifying nmake.opt itself)

# Uncomment for OpenJpeg (release v2.0.0) support
#OPENJPEG_ENABLED = YES
#OPENJPEG_CFLAGS = -IC:\openjpeg\include
#OPENJPEG_LIB = C:\openjpeg\lib\openjpeg.lib

From even.rouault at mines-paris.org  Fri Mar  1 19:57:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 04:57:07 +0100
Subject: [gdal-dev] Cannot find gdaltransform's C wrapper
In-Reply-To: <CAM6dNWr9k39JxaFMny7nm6qJkpyxjjQizYD9tQZV-xtUBQYxEA@mail.gmail.com>
References: <CAM6dNWqoA0emrbiVPxpsQrainDCrFG9JgL=aCviOLrZDBkUyBg@mail.gmail.com>
	<CAM6dNWr9k39JxaFMny7nm6qJkpyxjjQizYD9tQZV-xtUBQYxEA@mail.gmail.com>
Message-ID: <201303020457.07855.even.rouault@mines-paris.org>

Le vendredi 01 mars 2013 21:11:34, Ronak Bhatia a ?crit :
> Hi,
> 
> I'm using Yorick, a programming language similar to C and Matlab, and
> trying to port the function gdaltransform to Yorick. In order for me to do
> that, I have to find the C wrapper for the particular function and then I
> can work on porting it. I looked through gdal.h under gcore and no luck.
> Could you direct me to the right path?

The source code of the gdaltransform application is in apps/gdaltransform.cpp

> 
> Thanks,
> R

From even.rouault at mines-paris.org  Fri Mar  1 20:03:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 05:03:48 +0100
Subject: [gdal-dev] problems with gdal reprojection (from pixel to
	latitude/longitude)
In-Reply-To: <1361975011981-5037268.post@n6.nabble.com>
References: <1361975011981-5037268.post@n6.nabble.com>
Message-ID: <201303020503.48718.even.rouault@mines-paris.org>

Le mercredi 27 f?vrier 2013 15:23:31, B.O a ?crit :
> I have a satellite images of this type (link to example:
> http://navigator.eumetsat.int/smartEditor/preview/msg-level-1-5.jpg). I
> have to reproject the image to obtain latitude and longitude values for
> every pixel. I use gdal library (http://www.gdal.org/), and I follow some
> public example. The problem is that longitude and latitude values do not
> corrispond to real values that i suppose...
> I link a short version of my code. I do not use class GDALDataset because I
> have geotransform matrix yet (values are g0, g1, g2, g3, g4, g5).
> 
> 
> OGRSpatialReference *poSRS_Proj = new OGRSpatialReference("WGS84");
> poSRS_Proj->importFromEPSG( 4326 );
> // Define Geographic coordinate system - set it to WGS84.
> OGRSpatialReference *poSRS_Geog = new OGRSpatialReference("WGS84");
> poSRS_Geog->importFromEPSG( 4326 ); // WGS84
> // Set up the coordinate transform (projected-to-geographic).
> OGRCoordinateTransformation *poCT_Proj2Geog;
> poCT_Proj2Geog = OGRCreateCoordinateTransformation( poSRS_Proj, poSRS_Geog
> );

From the above definitions of poSRS_Proj and poSRS_Geog, your poCT_Proj2Geog 
transformation will be the identity. You must modify poSRS_Proj to reflect the 
projection of the image.

> 
> double lats = g3 + g4 * (row_pixel) + g5 * (column_pixel);
> double lons = g0 + g1 * (row_pixel) + g2 * (column_pixel);

You must invert row_pixel and column_pixel in the above formulas

> 
> double lat0 = lats;
> double lon0 = lons;
> // Projected coordinates to latlon
> poCT_Proj2Geog->Transform(1, &lat0, &lon0);

You must invert lat0 and lon0

> 
> 
> Outputs are: latitude = 1.06815e+06, longitude = -1.06815e+06.
> I tried several values for row_pixel and column_pixel but i get always the
> same problem.
> Can someone help me???? Thanks!

After doing the above changes, if it still does not yet work, I'd also double 
check that your geotransform is correct.

Another possibilitiy if the image is recognized as a GDAL format and include 
projection and geotransform information is to use the gdaltransform utility

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/problems-with-gdal-reprojection-from-p
> ixel-to-latitude-longitude-tp5037268.html Sent from the GDAL - Dev mailing
> list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Fri Mar  1 20:14:51 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 05:14:51 +0100
Subject: [gdal-dev] Problems linking without curl
In-Reply-To: <CAMWde5omzL2LYidcxUHtmR7wz5WJDjr1jdj=E8V=FmxDhkzx6A@mail.gmail.com>
References: <CAMWde5omzL2LYidcxUHtmR7wz5WJDjr1jdj=E8V=FmxDhkzx6A@mail.gmail.com>
Message-ID: <201303020514.51317.even.rouault@mines-paris.org>

Le mardi 26 f?vrier 2013 18:50:18, Jose Gomez-Dans a ?crit :
> Hi,
> Trying to compile GDAL on RHEL6 x864_64. It's failing looking for libcurl
> when linking. I don't need curl in this machine, and it's not installed. My
> configure line is as follows:
> 
> ./configure --prefix=/home/User/bin/ --with-libtiff=internal
> --with-hdf4=/usr/lib64/hdf  --without-curl --without-expat --without-mysql
> --without-dwgdirect --without-odbc --with-python --without-oci
> --without-sqlite3 --without-oci-include --without-oci-lib --without-grib
> 
> Unrelated to curl, in order to configure HDF4, I need the line above.
> However, I then need to go into GDALmake.opt and edit the content of
> HDF4_INCLUDE to point to /usr/include/hdf.

--with-hdf4 should be enough. If you specify a path behind  --with-hdf4= , it 
must be the root installation directory of the hdf4 ( /usr , /usr/local, etc 
... ), not the path of the .so itself. But with x86_64 RedHat based 
distributions that have stuff in /usr/lib64 , some ./configure detections don't 
work out of the box.

However in the HDF4 case it should work since I can see that in the 
configure.in script :

[snip]
  if test x"$with_hdf4" = x"yes" -o x"$with_hdf4" = x"" ; then
dnl Fedora has hdf static libraries in /usr/lib/hdf
    if test -d /usr/lib64/hdf; then
      HDF_LIB_DIR="/usr/lib64/hdf"
[snip]

> 
> But how can I get rid of the curl dependency?

I'm surprised  --without-curl doesn't work for you. Perhaps you should look at 
config.log and search "curl" in it to see if something interesting shows up.

> 
> Thanks!
> Jose

From even.rouault at mines-paris.org  Sat Mar  2 09:29:54 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 18:29:54 +0100
Subject: [gdal-dev] Cannot find gdaltransform's C wrapper
In-Reply-To: <513235E2.1080503@wildcats.unh.edu>
References: <CAM6dNWqoA0emrbiVPxpsQrainDCrFG9JgL=aCviOLrZDBkUyBg@mail.gmail.com>
	<201303020457.07855.even.rouault@mines-paris.org>
	<513235E2.1080503@wildcats.unh.edu>
Message-ID: <201303021829.54252.even.rouault@mines-paris.org>

Le samedi 02 mars 2013 18:24:50, Ronak Bhatia a ?crit :
> Isn't that in C++ though? I thought there were C wrappers for every
> function?

Looking at the code, I see it only uses the C API. It's just a .cpp file for 
the conveniency of declaring variables in the middle of blocks.

From even.rouault at mines-paris.org  Sat Mar  2 09:45:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Mar 2013 18:45:00 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<201303011835.14994.even.rouault@mines-paris.org>
	<CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>
Message-ID: <201303021845.00592.even.rouault@mines-paris.org>

Le vendredi 01 mars 2013 20:57:43, Tamas Szekeres a ?crit :
> 2013/3/1 Even Rouault <even.rouault at mines-paris.org>
> 
> > There's even a 4th option that doesn't require any code change. Create a
> > OGR
> > VRT file that renames the source fields to the truncated shapefile field
> > names (or
> > the reverse : creates a OGR VRT that renames the truncated shapefile
> > field names
> > to the original field names, since OGR VRT now supports since a few
> > versions
> > CreateFeature())
> 
> This may probably work, but doesn't seem to be very user friendly. Actually
> I would prefer to include at least a flag to indicate that ogr2ogr should
> provide mapping the fields in the same order (don't lookup field index by
> name) for example:
> 
> ogr2ogr -append -f "ESRI Shapefile" -nofieldreorder destination.shp
>  [source]
> 
> or with the previous fieldmap approach
> 
> ogr2ogr -append -f "ESRI Shapefile" -fieldmap "default" destination.shp
>  [source]

I'm fine with -fieldmap. It will be just another advanced option (I'm culprit 
for a bunch of other options...).  Perhaps "same_order" (or "identity" to be 
mathematically purist) instead of "default", since it's not actually the 
default behaviour (the default behaviour is to match the field names to build 
the field map). Some care should be done to check that the specified map is of 
the right size (number of fields of the source layer), or if 
"same_order"/"identity" is specified that the number of fields in the source and 
target layers are identical.

As ogr2ogr can accept several source layers, perhaps a word of caution in the 
doc of the option to mention that the specified map applies to all source 
layers, so if they don't have the same field definition, the option might not be 
relevant in that case.

> 
> Best regards,
> 
> Tamas

From JPalmer at linz.govt.nz  Sat Mar  2 22:17:53 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Sun, 3 Mar 2013 19:17:53 +1300
Subject: [gdal-dev] WFS Axis order issue with projected coordinate system
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB5@prdlsmmsg01.ad.linz.govt.nz>

I'm having trouble with inverted axis coordinates with projected New Zealand Coordinate Systems that define their axis order as North, East (y, x) in the EPSG database.

I've read in http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes that GDAL/OGR set axis values for projected coordinate systems, but that doesn't seem to be the case.

Using gdalsrsinfo for EPSG:2193 you can see the axis order is correctly set as North/East in the GDAL database:

PROJ.4 : '+proj=tmerc +lat_0=0 +lon_0=173 +k=0.9996 +x_0=1600000 +y_0=10000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '

OGC WKT :
PROJCS["NZGD2000 / New Zealand Transverse Mercator 2000",
    GEOGCS["NZGD2000",
        DATUM["New_Zealand_Geodetic_Datum_2000",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6167"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4167"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",173],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1600000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Northing",NORTH],
    AXIS["Easting",EAST],
    AUTHORITY["EPSG","2193"]]
NZTM2000 / EPSG:2193

However when I use WFS against a geoserver instance  (which respects the EPSG axis order) on a EPSG:2193 feature type the coordinate data is inverted. e.g:

ogrinfo -al wfs:"http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x231/wfs?VERSION=1.1.0&MAXFEATURES=1":


INFO: Open of `wfs:http://wfs.data.linz.govt.nz/3b7124f23806431c8371f139ec84c40e/v/x231/wfs?VERSION=1.1.0&MAXFEATURES=1'
      using driver `WFS' successful.

Layer name: v:x231
Geometry: Line String
Feature Count: 1
Extent: (5751904.957475, 1845470.695523) - (5751944.729380, 1846001.917550)
Layer SRS WKT:
PROJCS["NZGD2000 / New Zealand Transverse Mercator 2000",
    GEOGCS["NZGD2000",
        DATUM["New_Zealand_Geodetic_Datum_2000",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6167"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AXIS["Latitude",NORTH],
        AXIS["Longitude",EAST],
        AUTHORITY["EPSG","4167"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",173],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1600000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Northing",NORTH],
    AXIS["Easting",EAST],
    AUTHORITY["EPSG","2193"]]
Geometry Column = GEOMETRY
gml_id: String (0.0)
name: String (0.0)
status: String (0.0)
track_type: String (0.0)
track_use: String (0.0)
OGRFeature(v:x231):7078
  gml_id (String) = x231.fid-7803daab_13d2d6742b0_-7078
  name (String) = (null)
  status (String) = (null)
  track_type (String) = (null)
  track_use (String) = vehicle
  LINESTRING (5751904.957475 1845470.695523,5751944.7293799994513 1846001.9175499998964)


Funny thing is ogrinfo reports the SRS with the correct axis order.

Of course I can add "SRSNAME=EPSG:2193" to the URL, but I'd rather the GDAL internals were working correctly.

Thanks
Jeremy



This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Sun Mar  3 00:52:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 3 Mar 2013 09:52:14 +0100
Subject: [gdal-dev] WFS Axis order issue with projected coordinate system
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB5@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB5@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201303030952.14688.even.rouault@mines-paris.org>

> 
> 
> Funny thing is ogrinfo reports the SRS with the correct axis order.
> 
> Of course I can add "SRSNAME=EPSG:2193" to the URL, but I'd rather the GDAL
> internals were working correctly.

This is http://trac.osgeo.org/gdal/ticket/4329

In short, the WFS/GML drivers can deal with geographic SRS that have 
latitude/longitude ordering and do the coordinate swapping, but not yet for 
projected SRS that have northing/easting ordering.

The return of the driver is somehow correct.  It reports a SRS in 
northing/easting ordering and presents coordinates in that order. But I agree 
it would be nicer for it to behave like geographic SRS with inverted axis 
order.

Another way of working around that is to force VERSION=1.0.0, since GeoServer 
only honours EPSG axis order from WFS 1.1.0. Remembers me 
http://dmorissette.blogspot.fr/2012/12/dont-upgrade-to-wms-130-unless-you.html

From taibc_coltech at yahoo.com  Mon Mar  4 02:12:27 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 4 Mar 2013 02:12:27 -0800 (PST)
Subject: [gdal-dev] How to identify custom lines in .Dgn file using DgnLib ?
Message-ID: <1362391947744-5038200.post@n6.nabble.com>

Hi everyone,

I am getting a problem, I can't identify custom lines in .Dgn file.

As you know, in Microstation 7, we can assign the style value of lines from
0 to 7.

But if  lines are customed lines, they always have the style value is 0. How
can we identify them ?

Please find the attached image and dgn files for demo.

Thank you very much for your help !

<http://osgeo-org.1560.n6.nabble.com/file/n5038200/image.png> 
SD.dgn <http://osgeo-org.1560.n6.nabble.com/file/n5038200/SD.dgn>  



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-custom-lines-in-Dgn-file-using-DgnLib-tp5038200.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From tyler.mitchell at actian.com  Mon Mar  4 19:31:42 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 4 Mar 2013 19:31:42 -0800
Subject: [gdal-dev] Creation/read format question
Message-ID: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>

Not sure how to describe it, but when gdal lists available formats, I see a few different ways that formats are marked as read, write, etc.
The "rw" and "ro" items are easy enough for me to understand, but what about:
"rov" 
"rw+v"
"rwv"
"rw+"
?

Does the "v" refer to support in VRTs perhaps?
Do  rw+v, rwv, rw+ all mean same thing?

Any tips appreciated :) 

Tyler

From chaitanya.ch at gmail.com  Mon Mar  4 21:14:09 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 5 Mar 2013 10:44:09 +0530
Subject: [gdal-dev] Creation/read format question
In-Reply-To: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>
References: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>
Message-ID: <CAMKgpObHBT1eahGmevL7qRkp4PEV4ryMOYv_Y-ZpAr0jszZUDA@mail.gmail.com>

Hi Tyler,

'ro' and 'rw' mean what they imply.

The '+' symbol tells that the format supports the Create() method. So, we
can use them to create a dataset from scratch and add metadata explicitly.
Without it, we need a 'template' dataset.

The 'v' means that the format driver supports the virtual system interface.
Note that there may be drivers that support it but don't report that they
do.


On Tue, Mar 5, 2013 at 9:01 AM, Tyler Mitchell <tyler.mitchell at actian.com>wrote:

> Not sure how to describe it, but when gdal lists available formats, I see
> a few different ways that formats are marked as read, write, etc.
> The "rw" and "ro" items are easy enough for me to understand, but what
> about:
> "rov"
> "rw+v"
> "rwv"
> "rw+"
> ?
>
> Does the "v" refer to support in VRTs perhaps?
> Do  rw+v, rwv, rw+ all mean same thing?
>
> Any tips appreciated :)
>
> Tyler
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/8b6e9e67/attachment.html>

From cdhanger at gmail.com  Mon Mar  4 21:26:35 2013
From: cdhanger at gmail.com (Caleb Hanger)
Date: Mon, 4 Mar 2013 22:26:35 -0700
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <20130305004213.GA19684@gmail.com>
References: <20130305004213.GA19684@gmail.com>
Message-ID: <20130305052635.GB16844@gmail.com>

All,

I am writing a script which is calling gdalinfo to get a histogram of pixel values in an image file.  Apparently the mechanism for obtaining a "default" histogram enables the "bIncludeOutOfRange" flag to dump not-in-range pixels (including null pixels, in formats that support it) into whichever bin of the histogram is closest.  I see that in the GetHistogram() function, the functionality is already coded to respond appropriately to either a true *or* false value in this flag.  However, I can't seem to find any way to turn that flag off through any of the user-level programs (in particular, gdalinfo), rendering the parameter to the function useless, unless I'm just not looking hard enough.  Hence, my questions:

1) Is there any standard user-level operation (preferably in gdalinfo) which disables, or at least *allows* for disabling of, the bIncludeOutOfRange flag?  If so, I can't find it.
2) If not, how come?  Has there been no apparent need for histograms that omit null values or other "out of range" situations?

Thanks in advance for any insight,
Caleb Hanger

From chaitanya.ch at gmail.com  Mon Mar  4 21:49:27 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 5 Mar 2013 11:19:27 +0530
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <20130305052635.GB16844@gmail.com>
References: <20130305004213.GA19684@gmail.com>
	<20130305052635.GB16844@gmail.com>
Message-ID: <CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>

Caleb,

gdalinfo uses the GetDefaultHistogram() method which can do this faster by
fetching a precomputed histogram.
gdalinfo is a command line program. Even a default histogram of 256 buckets
is hard to visualize in text mode. A much better way is to use a desktop
GIS like qgis to view the histogram.

Can you justify adding this extra functionality in gdalinfo?



On Tue, Mar 5, 2013 at 10:56 AM, Caleb Hanger <cdhanger at gmail.com> wrote:

> All,
>
> I am writing a script which is calling gdalinfo to get a histogram of
> pixel values in an image file.  Apparently the mechanism for obtaining a
> "default" histogram enables the "bIncludeOutOfRange" flag to dump
> not-in-range pixels (including null pixels, in formats that support it)
> into whichever bin of the histogram is closest.  I see that in the
> GetHistogram() function, the functionality is already coded to respond
> appropriately to either a true *or* false value in this flag.  However, I
> can't seem to find any way to turn that flag off through any of the
> user-level programs (in particular, gdalinfo), rendering the parameter to
> the function useless, unless I'm just not looking hard enough.  Hence, my
> questions:
>
> 1) Is there any standard user-level operation (preferably in gdalinfo)
> which disables, or at least *allows* for disabling of, the
> bIncludeOutOfRange flag?  If so, I can't find it.
> 2) If not, how come?  Has there been no apparent need for histograms that
> omit null values or other "out of range" situations?
>
> Thanks in advance for any insight,
> Caleb Hanger
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/2b7e6169/attachment.html>

From cdhanger at gmail.com  Mon Mar  4 22:23:02 2013
From: cdhanger at gmail.com (Caleb Hanger)
Date: Mon, 4 Mar 2013 23:23:02 -0700
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>
References: <20130305004213.GA19684@gmail.com>
	<20130305052635.GB16844@gmail.com>
	<CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>
Message-ID: <20130305062301.GA17604@gmail.com>

On Tue, Mar 05, 2013 at 11:19:27AM +0530, Chaitanya kumar CH wrote:

> Caleb,
> 
> gdalinfo uses the GetDefaultHistogram() method which can do this faster by
> fetching a precomputed histogram.

What do you mean?  The histogram is only precomputed if gdalinfo has been run previously and stored a cache of data (the XML file) for later reference; please correct me if I'm wrong.  Otherwise, it seems to me that the data *must* be analyzed and the data computed; there is no way around that.  Additionally, I don't think it makes sense to say that it is faster to assemble a histogram that includes out-of-range values than to assemble a histogram that does not, because the latter is a subset contained within the former.

> gdalinfo is a command line program. Even a default histogram of 256 buckets
> is hard to visualize in text mode. A much better way is to use a desktop
> GIS like qgis to view the histogram.

A desktop GIS is not practical for providing a shell script meant to automate a repetitive (and much larger) task, with a small chunk of data that it needs for a single step in the process.  That is, I don't need to "visualize" the data -- I just need to get the information.  The more primitive the format, the better, as I like things that are lean and mean, and I know how to instruct the script to do the required mathematics upon the text-only histogram.

> Can you justify adding this extra functionality in gdalinfo?

Yes: quite simply, a histogram that does not include illegitimate values makes more sense than a histogram that does include them.  At least, this is the case in my experience; perhaps there are situations I'm unfamiliar with in which the histogram is desired to include values outside of the histogram's range, for some reason.  I'd even go so far as to say that gdalinfo currently *lies* about the histogram, telling the user that the histogram shows "256 buckets from X to Y" even though the histogram includes values which are *outside of that range*.

Arguably an even better justification is that the machinery to exclude the illegitimate values is already present in GetHistogram, so *very* few lines of code would need to be added to gdalinfo, simply to provide a flag for the user and if that flag is specified, pass "false" for the right parameter to GetHistogram (bIncludeOutOfRange), instead of just calling GetDefaultHistogram.

> On Tue, Mar 5, 2013 at 10:56 AM, Caleb Hanger <cdhanger at gmail.com> wrote:
> 
> > All,
> >
> > I am writing a script which is calling gdalinfo to get a histogram of
> > pixel values in an image file.  Apparently the mechanism for obtaining a
> > "default" histogram enables the "bIncludeOutOfRange" flag to dump
> > not-in-range pixels (including null pixels, in formats that support it)
> > into whichever bin of the histogram is closest.  I see that in the
> > GetHistogram() function, the functionality is already coded to respond
> > appropriately to either a true *or* false value in this flag.  However, I
> > can't seem to find any way to turn that flag off through any of the
> > user-level programs (in particular, gdalinfo), rendering the parameter to
> > the function useless, unless I'm just not looking hard enough.  Hence, my
> > questions:
> >
> > 1) Is there any standard user-level operation (preferably in gdalinfo)
> > which disables, or at least *allows* for disabling of, the
> > bIncludeOutOfRange flag?  If so, I can't find it.
> > 2) If not, how come?  Has there been no apparent need for histograms that
> > omit null values or other "out of range" situations?
> >
> > Thanks in advance for any insight,
> > Caleb Hanger
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E

From chaitanya.ch at gmail.com  Tue Mar  5 00:01:01 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 5 Mar 2013 13:31:01 +0530
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <20130305062301.GA17604@gmail.com>
References: <20130305004213.GA19684@gmail.com>
	<20130305052635.GB16844@gmail.com>
	<CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>
	<20130305062301.GA17604@gmail.com>
Message-ID: <CAMKgpOap9vPwfsABsWziRwtsF_cioWcOK=PZ4ar5KLJco-z0xg@mail.gmail.com>

Caleb,


On Tue, Mar 5, 2013 at 11:53 AM, Caleb Hanger <cdhanger at gmail.com> wrote:

> On Tue, Mar 05, 2013 at 11:19:27AM +0530, Chaitanya kumar CH wrote:
>
> > Caleb,
> >
> > gdalinfo uses the GetDefaultHistogram() method which can do this faster
> by
> > fetching a precomputed histogram.
>
> What do you mean?  The histogram is only precomputed if gdalinfo has been
> run previously and stored a cache of data (the XML file) for later
> reference; please correct me if I'm wrong.  Otherwise, it seems to me that
> the data *must* be analyzed and the data computed; there is no way around
> that.  Additionally, I don't think it makes sense to say that it is faster
> to assemble a histogram that includes out-of-range values than to assemble
> a histogram that does not, because the latter is a subset contained within
> the former.
>
Some raster formats can store the histogram data as metadata. Also, there
are is a shortcut; overviews can be used to get approximate values faster.


>
> gdalinfo is a command line program. Even a default histogram of 256
> buckets
> > is hard to visualize in text mode. A much better way is to use a desktop
> > GIS like qgis to view the histogram.
>
> A desktop GIS is not practical for providing a shell script meant to
> automate a repetitive (and much larger) task, with a small chunk of data
> that it needs for a single step in the process.  That is, I don't need to
> "visualize" the data -- I just need to get the information.  The more
> primitive the format, the better, as I like things that are lean and mean,
> and I know how to instruct the script to do the required mathematics upon
> the text-only histogram.
>
You can write a simple python script to get the histogram. You can get a
good idea at
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/histogram.py#L103


>
> > Can you justify adding this extra functionality in gdalinfo?
>
> Yes: quite simply, a histogram that does not include illegitimate values
> makes more sense than a histogram that does include them.  At least, this
> is the case in my experience; perhaps there are situations I'm unfamiliar
> with in which the histogram is desired to include values outside of the
> histogram's range, for some reason.  I'd even go so far as to say that
> gdalinfo currently *lies* about the histogram, telling the user that the
> histogram shows "256 buckets from X to Y" even though the histogram
> includes values which are *outside of that range*.
>
> Arguably an even better justification is that the machinery to exclude the
> illegitimate values is already present in GetHistogram, so *very* few lines
> of code would need to be added to gdalinfo, simply to provide a flag for
> the user and if that flag is specified, pass "false" for the right
> parameter to GetHistogram (bIncludeOutOfRange), instead of just calling
> GetDefaultHistogram.
>

That sounds reasonable. If you can, you should submit a patch or a request
at http://trac.osgeo.org/gdal/newticket
Note that the functionality should include the facility to include options
to mention the min/max values.


> > On Tue, Mar 5, 2013 at 10:56 AM, Caleb Hanger <cdhanger at gmail.com>
> wrote:
> >
> > > All,
> > >
> > > I am writing a script which is calling gdalinfo to get a histogram of
> > > pixel values in an image file.  Apparently the mechanism for obtaining
> a
> > > "default" histogram enables the "bIncludeOutOfRange" flag to dump
> > > not-in-range pixels (including null pixels, in formats that support it)
> > > into whichever bin of the histogram is closest.  I see that in the
> > > GetHistogram() function, the functionality is already coded to respond
> > > appropriately to either a true *or* false value in this flag.
>  However, I
> > > can't seem to find any way to turn that flag off through any of the
> > > user-level programs (in particular, gdalinfo), rendering the parameter
> to
> > > the function useless, unless I'm just not looking hard enough.  Hence,
> my
> > > questions:
> > >
> > > 1) Is there any standard user-level operation (preferably in gdalinfo)
> > > which disables, or at least *allows* for disabling of, the
> > > bIncludeOutOfRange flag?  If so, I can't find it.
> > > 2) If not, how come?  Has there been no apparent need for histograms
> that
> > > omit null values or other "out of range" situations?
> > >
> > > Thanks in advance for any insight,
> > > Caleb Hanger
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/5298e1bb/attachment-0001.html>

From cdhanger at gmail.com  Tue Mar  5 07:30:19 2013
From: cdhanger at gmail.com (Caleb Hanger)
Date: Tue, 5 Mar 2013 08:30:19 -0700
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <CAMKgpOap9vPwfsABsWziRwtsF_cioWcOK=PZ4ar5KLJco-z0xg@mail.gmail.com>
References: <20130305004213.GA19684@gmail.com>
	<20130305052635.GB16844@gmail.com>
	<CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>
	<20130305062301.GA17604@gmail.com>
	<CAMKgpOap9vPwfsABsWziRwtsF_cioWcOK=PZ4ar5KLJco-z0xg@mail.gmail.com>
Message-ID: <20130305153019.GB17604@gmail.com>

On Tue, Mar 05, 2013 at 01:31:01PM +0530, Chaitanya kumar CH wrote:
> On Tue, Mar 5, 2013 at 11:53 AM, Caleb Hanger <cdhanger at gmail.com> wrote:
> > What do you mean?  The histogram is only precomputed if gdalinfo has been
> > run previously and stored a cache of data (the XML file) for later
> > reference; please correct me if I'm wrong.  Otherwise, it seems to me that
> > the data *must* be analyzed and the data computed; there is no way around
> > that.  Additionally, I don't think it makes sense to say that it is faster
> > to assemble a histogram that includes out-of-range values than to assemble
> > a histogram that does not, because the latter is a subset contained within
> > the former.
> >
> Some raster formats can store the histogram data as metadata. Also, there
> are is a shortcut; overviews can be used to get approximate values faster.

Understood, thanks for pointing that out.  In that case, however, the responsibility to decide whether to include out-of-range values lies in the raster format, correct?

> You can write a simple python script to get the histogram. You can get a
> good idea at
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/histogram.py#L103

Right, of course I can construct my own utility to include the GDAL libraries and call GetHistogram in the manner I'd like, and I will probably end up doing so, but in C.  My main goal at the moment is a bash shell script that accomplishes a bigger task, so with a Python script I'd still have to call out to the Python script externally.  Either language would be suited well for the smaller purpose of getting and analyzing the histogram.  I merely found it odd that gdalinfo does not allow the user to disable an option that just doesn't seem to make sense for most applications.

> > Yes: quite simply, a histogram that does not include illegitimate values
> > makes more sense than a histogram that does include them.  At least, this
> > is the case in my experience; perhaps there are situations I'm unfamiliar
> > with in which the histogram is desired to include values outside of the
> > histogram's range, for some reason.  I'd even go so far as to say that
> > gdalinfo currently *lies* about the histogram, telling the user that the
> > histogram shows "256 buckets from X to Y" even though the histogram
> > includes values which are *outside of that range*.
> >
> > Arguably an even better justification is that the machinery to exclude the
> > illegitimate values is already present in GetHistogram, so *very* few lines
> > of code would need to be added to gdalinfo, simply to provide a flag for
> > the user and if that flag is specified, pass "false" for the right
> > parameter to GetHistogram (bIncludeOutOfRange), instead of just calling
> > GetDefaultHistogram.
> >
> 
> That sounds reasonable. If you can, you should submit a patch or a request
> at http://trac.osgeo.org/gdal/newticket
> Note that the functionality should include the facility to include options
> to mention the min/max values.

Thanks; I will post a patch when I have a chance.  When requesting a histogram in gdalinfo, the min/max values are already mentioned, and this will just be an addition to, and modification of, that functionality.

From chaitanya.ch at gmail.com  Tue Mar  5 08:00:07 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 5 Mar 2013 21:30:07 +0530
Subject: [gdal-dev] Histograms without null pixels
In-Reply-To: <20130305153019.GB17604@gmail.com>
References: <20130305004213.GA19684@gmail.com>
	<20130305052635.GB16844@gmail.com>
	<CAMKgpOaXn8zLpVpf7behqZgdGow4sXG_8b1Wc=qT4g6zRTZSwg@mail.gmail.com>
	<20130305062301.GA17604@gmail.com>
	<CAMKgpOap9vPwfsABsWziRwtsF_cioWcOK=PZ4ar5KLJco-z0xg@mail.gmail.com>
	<20130305153019.GB17604@gmail.com>
Message-ID: <CAMKgpOZYWX846s3rMvT_n45aJpB2CpjGGsp28M9xMaazYsJHRg@mail.gmail.com>

The main usage of gdalinfo is manual inspection of the image. It was not
intended for use within other scripts. The output is formatted for human
reading.


On Tue, Mar 5, 2013 at 9:00 PM, Caleb Hanger <cdhanger at gmail.com> wrote:

> On Tue, Mar 05, 2013 at 01:31:01PM +0530, Chaitanya kumar CH wrote:
> > On Tue, Mar 5, 2013 at 11:53 AM, Caleb Hanger <cdhanger at gmail.com>
> wrote:
> > > What do you mean?  The histogram is only precomputed if gdalinfo has
> been
> > > run previously and stored a cache of data (the XML file) for later
> > > reference; please correct me if I'm wrong.  Otherwise, it seems to me
> that
> > > the data *must* be analyzed and the data computed; there is no way
> around
> > > that.  Additionally, I don't think it makes sense to say that it is
> faster
> > > to assemble a histogram that includes out-of-range values than to
> assemble
> > > a histogram that does not, because the latter is a subset contained
> within
> > > the former.
> > >
> > Some raster formats can store the histogram data as metadata. Also, there
> > are is a shortcut; overviews can be used to get approximate values
> faster.
>
> Understood, thanks for pointing that out.  In that case, however, the
> responsibility to decide whether to include out-of-range values lies in the
> raster format, correct?
>
> > You can write a simple python script to get the histogram. You can get a
> > good idea at
> >
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/histogram.py#L103
>
> Right, of course I can construct my own utility to include the GDAL
> libraries and call GetHistogram in the manner I'd like, and I will probably
> end up doing so, but in C.  My main goal at the moment is a bash shell
> script that accomplishes a bigger task, so with a Python script I'd still
> have to call out to the Python script externally.  Either language would be
> suited well for the smaller purpose of getting and analyzing the histogram.
>  I merely found it odd that gdalinfo does not allow the user to disable an
> option that just doesn't seem to make sense for most applications.
>
> > > Yes: quite simply, a histogram that does not include illegitimate
> values
> > > makes more sense than a histogram that does include them.  At least,
> this
> > > is the case in my experience; perhaps there are situations I'm
> unfamiliar
> > > with in which the histogram is desired to include values outside of the
> > > histogram's range, for some reason.  I'd even go so far as to say that
> > > gdalinfo currently *lies* about the histogram, telling the user that
> the
> > > histogram shows "256 buckets from X to Y" even though the histogram
> > > includes values which are *outside of that range*.
> > >
> > > Arguably an even better justification is that the machinery to exclude
> the
> > > illegitimate values is already present in GetHistogram, so *very* few
> lines
> > > of code would need to be added to gdalinfo, simply to provide a flag
> for
> > > the user and if that flag is specified, pass "false" for the right
> > > parameter to GetHistogram (bIncludeOutOfRange), instead of just calling
> > > GetDefaultHistogram.
> > >
> >
> > That sounds reasonable. If you can, you should submit a patch or a
> request
> > at http://trac.osgeo.org/gdal/newticket
> > Note that the functionality should include the facility to include
> options
> > to mention the min/max values.
>
> Thanks; I will post a patch when I have a chance.  When requesting a
> histogram in gdalinfo, the min/max values are already mentioned, and this
> will just be an addition to, and modification of, that functionality.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/5fd3cbb7/attachment.html>

From info at knowhow-la.de  Tue Mar  5 09:40:47 2013
From: info at knowhow-la.de (Helmut Seidel M.A.)
Date: Tue, 05 Mar 2013 18:40:47 +0100
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
In-Reply-To: <5130672A.5030704@knowhow-la.de>
References: <512E10E4.5040001@knowhow-la.de> <5130672A.5030704@knowhow-la.de>
Message-ID: <51362E1F.9090005@knowhow-la.de>

Hello again,

I proceeded a little further now. I can run make generate and 
Makefile.PL now and dmake starts compiling until the error-message:

osr_wrap.cpp:1581:24: fatal error: cpl_string.h: No such file or directory
compilation terminated.
dmake.exe:  Error code 129, while making 'osr_wrap.o'

The file is there - but how do I include the path - I altered the 
path-variable and user the perl -I ... switch to the same result ...

Can anybody help?

Thanks Helmut

Am 01.03.2013 09:30, schrieb Helmut Seidel M.A.:
> Hello again,
>
> Thank you for your answers, which guided me through my first steps. 
> Yesterday I was quite happy to succeed compiling mapserver with perl 
> which is a first step. In compiling gdal I was not that lucky but got 
> a few millimeters forward.
>
> I tried compiling with MinGW and mysys - and the --with-perl option. 
> gdal itself compiles ok but the perl-portion breaks up with a file not 
> found error (perl.h). I guess MinGW gets confused with the perl 
> installations (it tries to use the one that comes with mysys not the 
> one I installed in C:\Perl. Is there a way how to tell configure/make 
> which Perl to use?
>
> I then tried the visualc option - which succeeded aswell, but without 
> perl. So here are two more questions (sorry for that):
>
>  1. Is it possibible to tell Visualc to compile with perl (as in the
>     --with-perl - option in MinGW)?
>  2. Is it possible to first build gdal without perl and then install
>     perl later?
>
> Thanks again.
>
> Helmut
>
> Am 27.02.2013 14:57, schrieb Helmut Seidel M.A.:
>> Hello everybody,
>>
>> in my comming up perl-project I need to use the Geo::Gdal - module. 
>> As I understand I need to compile gdal from sources first and then 
>> build the perl bindings. So far so good, but as I'm not a C/C++ 
>> developer I ran into a host of problems. The first thing I tried, was 
>> to install MinGW and compile gdal with the "--with-perl" option, 
>> which ran for about two hours but broke of with a message complaining 
>> that perl 5.8 was not found on my system (I have ActivePerl 5.16 
>> installed) - as far as I could decipher the message - I tried gdal 
>> 1.90 and gdal 1.92.
>> I then tried to compile it using VC 10 which seemed to work but I 
>> didn't find a possibility where to put the "--with-perl" option - 
>> anyway I tried to compile perl using perl Makefile.PL which 
>> imediately complained about being not able to find gdal-conf (which I 
>> couldn't find either). I guess there would be lots of complaints 
>> after that, but I only got that far.
>> I'm sure my errors have something to do with setting up paths and 
>> compilation options, but I dont't know which and where to set them.
>> So here's my question: has anybody a blow by blow account for C/C++ 
>> dummies how to set up Geo::Gdal? That would be great!
>> Another question is how to deploy the finished application to other 
>> computers.
>>
>> I hope you could understand all of my English and my questions are 
>> not too stupid - but I spend two working days on it so far so I'm a 
>> little desperate now.
>>
>> Thanks and regards
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/a072daac/attachment.html>

From tyler.mitchell at actian.com  Tue Mar  5 09:53:26 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 5 Mar 2013 09:53:26 -0800
Subject: [gdal-dev] Creation/read format question
In-Reply-To: <CAMKgpObHBT1eahGmevL7qRkp4PEV4ryMOYv_Y-ZpAr0jszZUDA@mail.gmail.com>
References: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>
	<CAMKgpObHBT1eahGmevL7qRkp4PEV4ryMOYv_Y-ZpAr0jszZUDA@mail.gmail.com>
Message-ID: <A0D449F8-6F0B-4EAB-89D8-79DFE153CA49@actian.com>

Great explanation, thanks!

On 2013-03-04, at 9:14 PM, Chaitanya kumar CH wrote:

> Hi Tyler,
> 
> 'ro' and 'rw' mean what they imply.
> 
> The '+' symbol tells that the format supports the Create() method. So, we can use them to create a dataset from scratch and add metadata explicitly. Without it, we need a 'template' dataset.
> 
> The 'v' means that the format driver supports the virtual system interface. Note that there may be drivers that support it but don't report that they do.
> 
> 
> On Tue, Mar 5, 2013 at 9:01 AM, Tyler Mitchell <tyler.mitchell at actian.com> wrote:
> Not sure how to describe it, but when gdal lists available formats, I see a few different ways that formats are marked as read, write, etc.
> The "rw" and "ro" items are easy enough for me to understand, but what about:
> "rov"
> "rw+v"
> "rwv"
> "rw+"
> ?
> 
> Does the "v" refer to support in VRTs perhaps?
> Do  rw+v, rwv, rw+ all mean same thing?
> 
> Any tips appreciated :)
> 
> Tyler
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/b3a8ef54/attachment-0001.html>

From ari.jolma at gmail.com  Tue Mar  5 10:13:54 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 05 Mar 2013 20:13:54 +0200
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
In-Reply-To: <51362E1F.9090005@knowhow-la.de>
References: <512E10E4.5040001@knowhow-la.de> <5130672A.5030704@knowhow-la.de>
	<51362E1F.9090005@knowhow-la.de>
Message-ID: <513635E2.6070507@gmail.com>

On 03/05/2013 07:40 PM, Helmut Seidel M.A. wrote:
> Hello again,
>
> I proceeded a little further now. I can run make generate and 
> Makefile.PL now and dmake starts compiling until the error-message:
>
> osr_wrap.cpp:1581:24: fatal error: cpl_string.h: No such file or directory
> compilation terminated.
> dmake.exe:  Error code 129, while making 'osr_wrap.o'
>
> The file is there - but how do I include the path - I altered the 
> path-variable and user the perl -I ... switch to the same result ...

Where cpl_string.h is in your system - did you install GDAL or are you 
building within the GDAL source tree?

Makefile.PL should add the include path to the Makefile_Geo__OSR, which 
is used for compiling osr_wrap.cpp. You may need to edit Makefile.PL a 
bit. See how it tests where GDAL and gdal-config is. It adds to the $INC 
variable include paths depending on where is finds gdal-config.

Ari

>
> Can anybody help?
>
> Thanks Helmut
>
> Am 01.03.2013 09:30, schrieb Helmut Seidel M.A.:
>> Hello again,
>>
>> Thank you for your answers, which guided me through my first steps. 
>> Yesterday I was quite happy to succeed compiling mapserver with perl 
>> which is a first step. In compiling gdal I was not that lucky but got 
>> a few millimeters forward.
>>
>> I tried compiling with MinGW and mysys - and the --with-perl option. 
>> gdal itself compiles ok but the perl-portion breaks up with a file 
>> not found error (perl.h). I guess MinGW gets confused with the perl 
>> installations (it tries to use the one that comes with mysys not the 
>> one I installed in C:\Perl. Is there a way how to tell configure/make 
>> which Perl to use?
>>
>> I then tried the visualc option - which succeeded aswell, but without 
>> perl. So here are two more questions (sorry for that):
>>
>>  1. Is it possibible to tell Visualc to compile with perl (as in the
>>     --with-perl - option in MinGW)?
>>  2. Is it possible to first build gdal without perl and then install
>>     perl later?
>>
>> Thanks again.
>>
>> Helmut
>>
>> Am 27.02.2013 14:57, schrieb Helmut Seidel M.A.:
>>> Hello everybody,
>>>
>>> in my comming up perl-project I need to use the Geo::Gdal - module. 
>>> As I understand I need to compile gdal from sources first and then 
>>> build the perl bindings. So far so good, but as I'm not a C/C++ 
>>> developer I ran into a host of problems. The first thing I tried, 
>>> was to install MinGW and compile gdal with the "--with-perl" option, 
>>> which ran for about two hours but broke of with a message 
>>> complaining that perl 5.8 was not found on my system (I have 
>>> ActivePerl 5.16 installed) - as far as I could decipher the message 
>>> - I tried gdal 1.90 and gdal 1.92.
>>> I then tried to compile it using VC 10 which seemed to work but I 
>>> didn't find a possibility where to put the "--with-perl" option - 
>>> anyway I tried to compile perl using perl Makefile.PL which 
>>> imediately complained about being not able to find gdal-conf (which 
>>> I couldn't find either). I guess there would be lots of complaints 
>>> after that, but I only got that far.
>>> I'm sure my errors have something to do with setting up paths and 
>>> compilation options, but I dont't know which and where to set them.
>>> So here's my question: has anybody a blow by blow account for C/C++ 
>>> dummies how to set up Geo::Gdal? That would be great!
>>> Another question is how to deploy the finished application to other 
>>> computers.
>>>
>>> I hope you could understand all of my English and my questions are 
>>> not too stupid - but I spend two working days on it so far so I'm a 
>>> little desperate now.
>>>
>>> Thanks and regards
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/4ef52dab/attachment.html>

From even.rouault at mines-paris.org  Tue Mar  5 10:39:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 05 Mar 2013 19:39:32 +0100
Subject: [gdal-dev] Creation/read format question
In-Reply-To: <A0D449F8-6F0B-4EAB-89D8-79DFE153CA49@actian.com>
References: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>
	<CAMKgpObHBT1eahGmevL7qRkp4PEV4ryMOYv_Y-ZpAr0jszZUDA@mail.gmail.com>
	<A0D449F8-6F0B-4EAB-89D8-79DFE153CA49@actian.com>
Message-ID: <1362508772.51363be410212@imp.free.fr>

Selon Tyler Mitchell <tyler.mitchell at actian.com>:

> Great explanation, thanks!

I knew this was documented somewhere. See --formats in the "General Command Line
Switches" section of http://gdal.org/gdal_utilities.html


From tyler.mitchell at actian.com  Tue Mar  5 10:44:22 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 5 Mar 2013 10:44:22 -0800
Subject: [gdal-dev] Creation/read format question
In-Reply-To: <1362508772.51363be410212@imp.free.fr>
References: <747AA186-7411-4D2E-A354-F991067B58BA@actian.com>
	<CAMKgpObHBT1eahGmevL7qRkp4PEV4ryMOYv_Y-ZpAr0jszZUDA@mail.gmail.com>
	<A0D449F8-6F0B-4EAB-89D8-79DFE153CA49@actian.com>
	<1362508772.51363be410212@imp.free.fr>
Message-ID: <8A5989E8-CCF2-442A-96C8-5F0485D92761@actian.com>

On 2013-03-05, at 10:39 AM, Even Rouault wrote:

> Selon Tyler Mitchell <tyler.mitchell at actian.com>:
> 
>> Great explanation, thanks!
> 
> I knew this was documented somewhere. See --formats in the "General Command Line
> Switches" section of http://gdal.org/gdal_utilities.html

Ah, perfect, I had thought I saw it somewhere too!  I'm writing about it in some tutorials and it helps a lot, thanks.  

Tyler


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/c61efa41/attachment.html>

From tyler.mitchell at actian.com  Tue Mar  5 11:35:32 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 5 Mar 2013 11:35:32 -0800
Subject: [gdal-dev] Approaches for 3D and beyond
Message-ID: <319F9CD7-79B0-4CB2-A011-D03E8E3A449D@actian.com>

Hi guys,

What are GEOS users and devs doing to enable M measures in their GEOS-backed solutions?  I won't worry about specialised functions at this point, but at least being able to reliably handle and maintain all XYZM ordinates is important for me.  Is it such a lot of work that it's not worth adding this to GEOS?  I saw a few messages in the archives looking at how to add measures but it wasn't encouraging ;)

Do you think GEOS will support all the SFSQL 1.2 types?

Are people moving to Boost or CGAL instead?  Would love to hear thoughts on it.

Cheers,
Tyler


Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/4289d537/attachment-0001.html>

From tyler.mitchell at actian.com  Tue Mar  5 11:36:22 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 5 Mar 2013 11:36:22 -0800
Subject: [gdal-dev] Approaches for 3D and beyond
In-Reply-To: <319F9CD7-79B0-4CB2-A011-D03E8E3A449D@actian.com>
References: <319F9CD7-79B0-4CB2-A011-D03E8E3A449D@actian.com>
Message-ID: <0BE40BB3-0899-476B-8CEC-A75DD2405C19@actian.com>

oops wrong list :)

On 2013-03-05, at 11:35 AM, Tyler Mitchell wrote:

> Hi guys,
> 
> What are GEOS users and devs doing to enable M measures in their GEOS-backed solutions?  I won't worry about specialised functions at this point, but at least being able to reliably handle and maintain all XYZM ordinates is important for me.  Is it such a lot of work that it's not worth adding this to GEOS?  I saw a few messages in the archives looking at how to add measures but it wasn't encouraging ;)
> 
> Do you think GEOS will support all the SFSQL 1.2 types?
> 
> Are people moving to Boost or CGAL instead?  Would love to hear thoughts on it.
> 
> Cheers,
> Tyler


From aashishcy at gmail.com  Tue Mar  5 17:03:31 2013
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Tue, 5 Mar 2013 20:03:31 -0500
Subject: [gdal-dev] GDAL fails on reading rset via Virtual File
Message-ID: <CAGeT8ykkcRAEn6H_qpH6dy_hLaD8CDDasdq=Sk_U9tNbf=SVUg@mail.gmail.com>

Folks,

I am using GDAL Virtual File mechanism to read data off a stream (something
like what's shown below)

VSILFILE* fpTemp = VSIFileFromMemBuffer(szTempFileName, (GByte*)
s->file_size(), FALSE);
this->gdal_data_ = (GDALDataset*) GDALOpen(szTempFileName, GA_ReadOnly)

The code works for most of the file formats of varying size but when I
tried my reader on the rset NITF files (for example foo.r0), it exited with
an error below

Image 29952x21760x1
File Format: File formats supported by GDAL
Decoding view (0,0) (+29952,+21760)...ERROR 4:
VSIFOpenL(/vsimem/tmp_0x1758cd0) failed unexpectedly in jpgdataset.cpp
ERROR 1: /vsimem/tmp_0x1758cd0, band 1: IReadBlock failed at X offset 75, Y
offset 2
ERROR 1: GetBlockRef failed at X block offset 75, Y block offset 2
vil_convert:
/home/aashish/tools/vidtk/src.git/wrappers/vil_plugins/file_formats/vil_gdal_image.cxx:235:
vil_image_view_base_sptr
vil_gdal_image_impl::read_data(vil_memory_chunk_sptr, unsigned int,
unsigned int, unsigned int, unsigned int, unsigned int) [with TPixel =
unsigned char]: Assertion `err == CE_None' failed.

Any help is appreciated.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130305/595e7f1d/attachment.html>

From ari.jolma at gmail.com  Tue Mar  5 22:06:54 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 06 Mar 2013 08:06:54 +0200
Subject: [gdal-dev] Approaches for 3D and beyond
In-Reply-To: <0BE40BB3-0899-476B-8CEC-A75DD2405C19@actian.com>
References: <319F9CD7-79B0-4CB2-A011-D03E8E3A449D@actian.com>
	<0BE40BB3-0899-476B-8CEC-A75DD2405C19@actian.com>
Message-ID: <5136DCFE.1050407@gmail.com>

On 03/05/2013 09:36 PM, Tyler Mitchell wrote:
> oops wrong list :)

Not really. XYZM issue is relevant for GDAL too

http://trac.osgeo.org/gdal/wiki/GDAL20Changes

Ari

>
> On 2013-03-05, at 11:35 AM, Tyler Mitchell wrote:
>
>> Hi guys,
>>
>> What are GEOS users and devs doing to enable M measures in their GEOS-backed solutions?  I won't worry about specialised functions at this point, but at least being able to reliably handle and maintain all XYZM ordinates is important for me.  Is it such a lot of work that it's not worth adding this to GEOS?  I saw a few messages in the archives looking at how to add measures but it wasn't encouraging ;)
>>
>> Do you think GEOS will support all the SFSQL 1.2 types?
>>
>> Are people moving to Boost or CGAL instead?  Would love to hear thoughts on it.
>>
>> Cheers,
>> Tyler
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Mar  6 01:53:54 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 06 Mar 2013 10:53:54 +0100
Subject: [gdal-dev] GDAL fails on reading rset via Virtual File
In-Reply-To: <CAGeT8ykkcRAEn6H_qpH6dy_hLaD8CDDasdq=Sk_U9tNbf=SVUg@mail.gmail.com>
References: <CAGeT8ykkcRAEn6H_qpH6dy_hLaD8CDDasdq=Sk_U9tNbf=SVUg@mail.gmail.com>
Message-ID: <1362563634.513712328a37b@imp.free.fr>

Selon Jayesh Chaudhary <aashishcy at gmail.com>:

> Folks,
>
> I am using GDAL Virtual File mechanism to read data off a stream (something
> like what's shown below)
>
> VSILFILE* fpTemp = VSIFileFromMemBuffer(szTempFileName, (GByte*)
> s->file_size(), FALSE);
> this->gdal_data_ = (GDALDataset*) GDALOpen(szTempFileName, GA_ReadOnly)
>
> The code works for most of the file formats of varying size but when I
> tried my reader on the rset NITF files (for example foo.r0), it exited with
> an error below
>
> Image 29952x21760x1
> File Format: File formats supported by GDAL
> Decoding view (0,0) (+29952,+21760)...ERROR 4:
> VSIFOpenL(/vsimem/tmp_0x1758cd0) failed unexpectedly in jpgdataset.cpp
> ERROR 1: /vsimem/tmp_0x1758cd0, band 1: IReadBlock failed at X offset 75, Y
> offset 2
> ERROR 1: GetBlockRef failed at X block offset 75, Y block offset 2
> vil_convert:
>
/home/aashish/tools/vidtk/src.git/wrappers/vil_plugins/file_formats/vil_gdal_image.cxx:235:
> vil_image_view_base_sptr
> vil_gdal_image_impl::read_data(vil_memory_chunk_sptr, unsigned int,
> unsigned int, unsigned int, unsigned int, unsigned int) [with TPixel =
> unsigned char]: Assertion `err == CE_None' failed.
>
> Any help is appreciated.

The error message shows an error in the JPEG driver. Are your NITF files JPEG
compressed ? And you're mentionning a RSET NITF, but the filename
/vsimem/tmp_0x1758cd0 doesn't end by r0. Overall it's a bit difficult to
understand what's going wrong without a small self-contained test case and the
associated data files that demonstrate the issue. Looking at the code that deal
with RSET detection, I don't see any obvious reason why in memory files wouldn't
work.


>
> Thanks.
>



From aboudreault at mapgears.com  Wed Mar  6 03:02:42 2013
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Wed, 06 Mar 2013 06:02:42 -0500
Subject: [gdal-dev] New Driver: DDS
Message-ID: <51372252.1000902@mapgears.com>

Hi,

I'd like to get your hints on a new DDS driver. Please, take a look at 
my brief ticket and let me know if there is anything wrong or if it's ok 
to commit.

http://trac.osgeo.org/gdal/ticket/5017

Regards,
Alan

-- 
Alan Boudreault
http://www.mapgears.com/

From lauramail at iol.it  Wed Mar  6 05:29:17 2013
From: lauramail at iol.it (laura0)
Date: Wed, 6 Mar 2013 05:29:17 -0800 (PST)
Subject: [gdal-dev] INSPIRE compliant metadata
Message-ID: <1362576557618-5038779.post@n6.nabble.com>

Hello,
I am using the GDAL Utility Program gdalinfo to report metadata about a
raster file (netCDF, grib, hdf). I would like to transform these information
collected using the inspire directive (ogc csw). Is there a tool to automate
this translation? I have found CatMDEdit but it does not support the format
(gdalinfo output) I need.

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/INSPIRE-compliant-metadata-tp5038779.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From diregola at gmail.com  Wed Mar  6 06:47:07 2013
From: diregola at gmail.com (Margherita Di Leo)
Date: Wed, 6 Mar 2013 15:47:07 +0100
Subject: [gdal-dev] INSPIRE compliant metadata
In-Reply-To: <1362576557618-5038779.post@n6.nabble.com>
References: <1362576557618-5038779.post@n6.nabble.com>
Message-ID: <CABa=8QrnF0-hFpVLtHxzLHC5ZmUN0y_-pKTyxFGwHzqPSSB5+Q@mail.gmail.com>

Hi Laura,

On Wed, Mar 6, 2013 at 2:29 PM, laura0 <lauramail at iol.it> wrote:

> Hello,
> I am using the GDAL Utility Program gdalinfo to report metadata about a
> raster file (netCDF, grib, hdf). I would like to transform these
> information
> collected using the inspire directive (ogc csw). Is there a tool to
> automate
> this translation? I have found CatMDEdit but it does not support the format
> (gdalinfo output) I need.
>

see http://wiki.osgeo.org/wiki/Metadata_software

HTH,
madi

>
> Thanks
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/INSPIRE-compliant-metadata-tp5038779.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Margherita DI LEO
Postdoctoral Researcher

European Commission - DG JRC
Institute for Environment and Sustainability (IES)
Via Fermi, 2749
I-21027 Ispra (VA) - Italy - TP 261

Tel. +39 0332 78 3600
margherita.di-leo at jrc.ec.europa.eu

Disclaimer: The views expressed are purely those of the writer and may not
in any circumstance be regarded as stating an official position of the
European Commission.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/ec928bf6/attachment.html>

From Tom.Kralidis at ec.gc.ca  Wed Mar  6 06:59:28 2013
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Wed, 6 Mar 2013 09:59:28 -0500
Subject: [gdal-dev] INSPIRE compliant metadata
References: <1362576557618-5038779.post@n6.nabble.com>
Message-ID: <D4979196AC320B45BE4A5DD7EE80C3E40FFE1C@sdow04exmail2.ontario.int.ec.gc.ca>


One approach could be a script to use the GDAL/OGR libraries to generate the XML document, given that there are metadata elements that you can't derive just from the data.

..Tom



-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org on behalf of laura0
Sent: Wed 06-Mar-13 08:29
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] INSPIRE compliant metadata
 
Hello,
I am using the GDAL Utility Program gdalinfo to report metadata about a
raster file (netCDF, grib, hdf). I would like to transform these information
collected using the inspire directive (ogc csw). Is there a tool to automate
this translation? I have found CatMDEdit but it does not support the format
(gdalinfo output) I need.

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/INSPIRE-compliant-metadata-tp5038779.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From lauramail at iol.it  Wed Mar  6 07:10:03 2013
From: lauramail at iol.it (laura0)
Date: Wed, 6 Mar 2013 07:10:03 -0800 (PST)
Subject: [gdal-dev] INSPIRE compliant metadata
In-Reply-To: <D4979196AC320B45BE4A5DD7EE80C3E40FFE1C@sdow04exmail2.ontario.int.ec.gc.ca>
References: <1362576557618-5038779.post@n6.nabble.com>
	<D4979196AC320B45BE4A5DD7EE80C3E40FFE1C@sdow04exmail2.ontario.int.ec.gc.ca>
Message-ID: <1362582603494-5038802.post@n6.nabble.com>

Thanks for the answers,
Tom, can you suggest me links (if any) to help me to follow your idea?

Thanks,
Laura



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/INSPIRE-compliant-metadata-tp5038779p5038802.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yjacolin at free.fr  Wed Mar  6 06:38:11 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Wed, 06 Mar 2013 15:38:11 +0100
Subject: [gdal-dev] append mode in postgresql
Message-ID: <1861603.BdQxMOre7d@tatras>

Hello,

I am trying to import EDIGEO files in append mode. The doc said to use -append 
flag with ogr2ogr commande.

ogr2ogr -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo  host='localhost'" -
lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -lco "OVERWRITE=YES" -nln 
EDIGEO_parcelle  E0001.THF PARCELLE_id

=> ok

ogr2ogr -append -update -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo  
host='localhost'" -lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -nln 
EDIGEO_parcelle  E0002.THF PARCELLE_id

=> nok I get this error message:

ERROR 1: Layer test.edigeo_parcelle already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.
ERROR 1: Terminating translation prematurely after failed
translation of layer PARCELLE_id (use -skipfailures to skip errors)

Postgresql log file shows:
2013-03-06 15:35:44 CET LOG:  could not receive data from client: Connection 
reset by peer
2013-03-06 15:35:44 CET LOG:  unexpected EOF on client connection

and other information which doesn't seem interesting to me.

Any idea whe append mode is not wroking in my test?

Thanks,

Y.


From yjacolin at free.fr  Wed Mar  6 07:07:39 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Wed, 06 Mar 2013 16:07:39 +0100
Subject: [gdal-dev] append mode in postgresql
In-Reply-To: <1861603.BdQxMOre7d@tatras>
References: <1861603.BdQxMOre7d@tatras>
Message-ID: <2498266.kDmIf8SHIn@tatras>

Le mercredi 6 mars 2013 15:38:11 Yves Jacolin a ?crit :
> Hello,
> 
> I am trying to import EDIGEO files in append mode. The doc said to use
> -append flag with ogr2ogr commande.
> 
> ogr2ogr -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo  host='localhost'"
> - lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -lco "OVERWRITE=YES" -nln
> EDIGEO_parcelle  E0001.THF PARCELLE_id
> 
> => ok
> 
> ogr2ogr -append -update -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo
> host='localhost'" -lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -nln
> EDIGEO_parcelle  E0002.THF PARCELLE_id
> 
> => nok I get this error message:
> 
> ERROR 1: Layer test.edigeo_parcelle already exists, CreateLayer failed.
> Use the layer creation option OVERWRITE=YES to replace it.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer PARCELLE_id (use -skipfailures to skip errors)
> 
> Postgresql log file shows:
> 2013-03-06 15:35:44 CET LOG:  could not receive data from client: Connection
> reset by peer
> 2013-03-06 15:35:44 CET LOG:  unexpected EOF on client connection
> 
> and other information which doesn't seem interesting to me.
> 
> Any idea whe append mode is not wroking in my test?
> 
> Thanks,
> 
> Y.
Here some information about my issue:

1/ ogr2ogr is not protecting layer name. If I use EDIGEO_parcelle as a 
layername, Postgresql will create "edigeo_parcelle" table which is incorrect 
(even if this is not a good practice to set up an uppercase table name).

2/ In SQL request sent by ogr2ogr I find this one:
SELECT a.attname, a.attnum, t.typname, t.typname = 
ANY(ARRAY['int2','int4','serial']) AS isfid FROM pg_class c, pg_attribute a, 
pg_type t, pg_namespace n, pg_index i WHERE a.attnum > 0 AND a.attrelid = 
c.oid AND a.atttypid = t.oid AND c.relnamespace = n.oid AND c.oid = i.indrelid 
AND i.indisprimary = 't' AND t.typname !~ '^geom' AND c.relname = 
'edigeo_parcelle' AND (i.indkey[0]=a.attnum OR i.indkey[1]=a.attnum OR 
i.indkey[2]=a.attnum OR i.indkey[3]=a.attnum OR i.indkey[4]=a.attnum OR 
i.indkey[5]=a.attnum OR i.indkey[6]=a.attnum OR i.indkey[7]=a.attnum OR 
i.indkey[8]=a.attnum OR i.indkey[9]=a.attnum) AND n.nspname='public' ORDER BY 
a.attnum;

But my layer should be in "test" schema. Correct SQL request should be:

SELECT a.attname, a.attnum, t.typname, t.typname = 
ANY(ARRAY['int2','int4','serial']) AS isfid FROM pg_class c, pg_attribute a, 
pg_type t, pg_namespace n, pg_index i WHERE a.attnum > 0 AND a.attrelid = 
c.oid AND a.atttypid = t.oid AND c.relnamespace = n.oid AND c.oid = i.indrelid 
AND i.indisprimary = 't' AND t.typname !~ '^geom' AND c.relname = 
'edigeo_parcelle' AND (i.indkey[0]=a.attnum OR i.indkey[1]=a.attnum OR 
i.indkey[2]=a.attnum OR i.indkey[3]=a.attnum OR i.indkey[4]=a.attnum OR 
i.indkey[5]=a.attnum OR i.indkey[6]=a.attnum OR i.indkey[7]=a.attnum OR 
i.indkey[8]=a.attnum OR i.indkey[9]=a.attnum) AND n.nspname='test' ORDER BY 
a.attnum;

I am not sure how to report the last one.

Y.

From yjacolin at free.fr  Wed Mar  6 06:20:20 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Wed, 06 Mar 2013 15:20:20 +0100
Subject: [gdal-dev] EDIGEO format
In-Reply-To: <20130228175117.GA27089@norbit.de>
References: <6308627.K79jHZHfKx@tatras> <20130228175117.GA27089@norbit.de>
Message-ID: <1433975.O0xxlPMd1v@tatras>

Le jeudi 28 f?vrier 2013 18:51:17 J?rgen E. Fischer a ?crit :
> Hi Yves,
> 
> On Thu, 28. Feb 2013 at 16:16:02 +0100, Yves Jacolin (Free) wrote:
> > I am working on EDIGEO files, is this something I have to expect:
> Not sure what you question is.
> 
> > $ ogrinfo *.THF
> > Had to open data source read-only.
> > INFO: Open of `E0000101.THF'
> > 
> >       using driver `EDIGEO' successful.
> > 
> > FAILURE: Couldn't fetch requested layer E0000201.THF!
> 
> This probably expands to
> 
> ogrinfo E0000101.THF E0000201.THF
> 
> i.e. list the layer "E0000201.THF" in the data source E0000101.THF - which
> is probably not what you meant.
> 
> 
J?rgen,

Thanks you were right, I forget to add "PARCELLE_id" (the layer name I need in 
EDIGEO files).

I tests correctly for one file (ogrinfo E0000101.THF PARCELLE_id) but when I 
went to test all my THF files I changed my command line.

Y.

From even.rouault at mines-paris.org  Wed Mar  6 07:42:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 06 Mar 2013 16:42:09 +0100
Subject: [gdal-dev] append mode in postgresql
In-Reply-To: <2498266.kDmIf8SHIn@tatras>
References: <1861603.BdQxMOre7d@tatras> <2498266.kDmIf8SHIn@tatras>
Message-ID: <1362584529.513763d1d5231@imp.free.fr>

Selon "Yves Jacolin (Free)" <yjacolin at free.fr>:

> Le mercredi 6 mars 2013 15:38:11 Yves Jacolin a ?crit :
> > Hello,
> >
> > I am trying to import EDIGEO files in append mode. The doc said to use
> > -append flag with ogr2ogr commande.
> >
> > ogr2ogr -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo  host='localhost'"
> > - lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -lco "OVERWRITE=YES" -nln
> > EDIGEO_parcelle  E0001.THF PARCELLE_id
> >
> > => ok
> >
> > ogr2ogr -append -update -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo
> > host='localhost'" -lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -nln
> > EDIGEO_parcelle  E0002.THF PARCELLE_id
> >
> > => nok I get this error message:
> >
> > ERROR 1: Layer test.edigeo_parcelle already exists, CreateLayer failed.
> > Use the layer creation option OVERWRITE=YES to replace it.
> > ERROR 1: Terminating translation prematurely after failed
> > translation of layer PARCELLE_id (use -skipfailures to skip errors)

You cannot use -lco (layer *creation* option) for an append/update. Well, you
can, but they will be ignored. As such, the schema that will be used will be the
public schema (since -lco SCHEMA=test is ignored). In your update ogr2ogr
command line, you have to specify either "-nln test.PARCELLE_id" or add "
active_schema=test" to your connexion string, i.e. "PG:dbname=test_edigeo
host='localhost' active_schema=test" (you could also have used active_schema for
the first ogr2ogr command that will create the table)

> >
> > Y.
> Here some information about my issue:
>
> 1/ ogr2ogr is not protecting layer name. If I use EDIGEO_parcelle as a
> layername, Postgresql will create "edigeo_parcelle" table which is incorrect
> (even if this is not a good practice to set up an uppercase table name).

This is the effect of the "laundering" that is done by default. See the LAUNDER
layer creation option documented in http://gdal.org/ogr/drv_pg.html

>
> 2/ In SQL request sent by ogr2ogr I find this one:
> SELECT a.attname, a.attnum, t.typname, t.typname =
> ANY(ARRAY['int2','int4','serial']) AS isfid FROM pg_class c, pg_attribute a,
> pg_type t, pg_namespace n, pg_index i WHERE a.attnum > 0 AND a.attrelid =
> c.oid AND a.atttypid = t.oid AND c.relnamespace = n.oid AND c.oid =
> i.indrelid
> AND i.indisprimary = 't' AND t.typname !~ '^geom' AND c.relname =
> 'edigeo_parcelle' AND (i.indkey[0]=a.attnum OR i.indkey[1]=a.attnum OR
> i.indkey[2]=a.attnum OR i.indkey[3]=a.attnum OR i.indkey[4]=a.attnum OR
> i.indkey[5]=a.attnum OR i.indkey[6]=a.attnum OR i.indkey[7]=a.attnum OR
> i.indkey[8]=a.attnum OR i.indkey[9]=a.attnum) AND n.nspname='public' ORDER BY
> a.attnum;
>
> But my layer should be in "test" schema. Correct SQL request should be:

See above explanation about active_schema.











































From yjacolin at free.fr  Wed Mar  6 07:52:45 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Wed, 06 Mar 2013 16:52:45 +0100
Subject: [gdal-dev] append mode in postgresql
In-Reply-To: <1362584529.513763d1d5231@imp.free.fr>
References: <1861603.BdQxMOre7d@tatras> <2498266.kDmIf8SHIn@tatras>
	<1362584529.513763d1d5231@imp.free.fr>
Message-ID: <1697451.3PV8F3ThOv@tatras>

thanks Even. All information is in the pg_driver page. I really need to read 
it more carefully :(

There is just a very small issue, the doc said about SCHEMA:
"Use the -nln option of ogr2ogr instead, or better the active_schema "

But there is no example about SCHEMA :/

Y.
Le mercredi 6 mars 2013 16:42:09 Even Rouault a ?crit :
> Selon "Yves Jacolin (Free)" <yjacolin at free.fr>:
> > Le mercredi 6 mars 2013 15:38:11 Yves Jacolin a ?crit :
> > > Hello,
> > > 
> > > I am trying to import EDIGEO files in append mode. The doc said to use
> > > -append flag with ogr2ogr commande.
> > > 
> > > ogr2ogr -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo 
> > > host='localhost'"
> > > - lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -lco "OVERWRITE=YES"
> > > -nln
> > > EDIGEO_parcelle  E0001.THF PARCELLE_id
> > > 
> > > => ok
> > > 
> > > ogr2ogr -append -update -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo
> > > host='localhost'" -lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -nln
> > > EDIGEO_parcelle  E0002.THF PARCELLE_id
> > > 
> > > => nok I get this error message:
> > > 
> > > ERROR 1: Layer test.edigeo_parcelle already exists, CreateLayer failed.
> > > Use the layer creation option OVERWRITE=YES to replace it.
> > > ERROR 1: Terminating translation prematurely after failed
> > > translation of layer PARCELLE_id (use -skipfailures to skip errors)
> 
> You cannot use -lco (layer *creation* option) for an append/update. Well,
> you can, but they will be ignored. As such, the schema that will be used
> will be the public schema (since -lco SCHEMA=test is ignored). In your
> update ogr2ogr command line, you have to specify either "-nln
> test.PARCELLE_id" or add " active_schema=test" to your connexion string,
> i.e. "PG:dbname=test_edigeo host='localhost' active_schema=test" (you could
> also have used active_schema for the first ogr2ogr command that will create
> the table)
> 
> > > Y.
> > 
> > Here some information about my issue:
> > 
> > 1/ ogr2ogr is not protecting layer name. If I use EDIGEO_parcelle as a
> > layername, Postgresql will create "edigeo_parcelle" table which is
> > incorrect (even if this is not a good practice to set up an uppercase
> > table name).
> This is the effect of the "laundering" that is done by default. See the
> LAUNDER layer creation option documented in http://gdal.org/ogr/drv_pg.html
> > 2/ In SQL request sent by ogr2ogr I find this one:
> > SELECT a.attname, a.attnum, t.typname, t.typname =
> > ANY(ARRAY['int2','int4','serial']) AS isfid FROM pg_class c, pg_attribute
> > a, pg_type t, pg_namespace n, pg_index i WHERE a.attnum > 0 AND
> > a.attrelid = c.oid AND a.atttypid = t.oid AND c.relnamespace = n.oid AND
> > c.oid = i.indrelid
> > AND i.indisprimary = 't' AND t.typname !~ '^geom' AND c.relname =
> > 'edigeo_parcelle' AND (i.indkey[0]=a.attnum OR i.indkey[1]=a.attnum OR
> > i.indkey[2]=a.attnum OR i.indkey[3]=a.attnum OR i.indkey[4]=a.attnum OR
> > i.indkey[5]=a.attnum OR i.indkey[6]=a.attnum OR i.indkey[7]=a.attnum OR
> > i.indkey[8]=a.attnum OR i.indkey[9]=a.attnum) AND n.nspname='public' ORDER
> > BY a.attnum;
> 
> > But my layer should be in "test" schema. Correct SQL request should be:
> See above explanation about active_schema.

From even.rouault at mines-paris.org  Wed Mar  6 08:02:01 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 06 Mar 2013 17:02:01 +0100
Subject: [gdal-dev] append mode in postgresql
In-Reply-To: <1697451.3PV8F3ThOv@tatras>
References: <1861603.BdQxMOre7d@tatras> <2498266.kDmIf8SHIn@tatras>
	<1362584529.513763d1d5231@imp.free.fr> <1697451.3PV8F3ThOv@tatras>
Message-ID: <1362585721.513768796d793@imp.free.fr>

Selon "Yves Jacolin (Free)" <yjacolin at free.fr>:

> thanks Even. All information is in the pg_driver page. I really need to read
> it more carefully :(
>
> There is just a very small issue, the doc said about SCHEMA:
> "Use the -nln option of ogr2ogr instead, or better the active_schema "
>
> But there is no example about SCHEMA :/

This was actually moved in the http://gdal.org/ogr/drv_pg_advanced.html , that
can be accessed from the "Advanced OGR PostgreSQL driver Information" link at
the end of the main doc page of the PG driver.

>
> Y.
> Le mercredi 6 mars 2013 16:42:09 Even Rouault a ?crit :
> > Selon "Yves Jacolin (Free)" <yjacolin at free.fr>:
> > > Le mercredi 6 mars 2013 15:38:11 Yves Jacolin a ?crit :
> > > > Hello,
> > > >
> > > > I am trying to import EDIGEO files in append mode. The doc said to use
> > > > -append flag with ogr2ogr commande.
> > > >
> > > > ogr2ogr -gt 65536 -f "PostgreSQL" "PG:dbname=test_edigeo
> > > > host='localhost'"
> > > > - lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -lco "OVERWRITE=YES"
> > > > -nln
> > > > EDIGEO_parcelle  E0001.THF PARCELLE_id
> > > >
> > > > => ok
> > > >
> > > > ogr2ogr -append -update -gt 65536 -f "PostgreSQL"
> "PG:dbname=test_edigeo
> > > > host='localhost'" -lco "GEOMETRY_NAME=the_geom" -lco "SCHEMA=test" -nln
> > > > EDIGEO_parcelle  E0002.THF PARCELLE_id
> > > >
> > > > => nok I get this error message:
> > > >
> > > > ERROR 1: Layer test.edigeo_parcelle already exists, CreateLayer failed.
> > > > Use the layer creation option OVERWRITE=YES to replace it.
> > > > ERROR 1: Terminating translation prematurely after failed
> > > > translation of layer PARCELLE_id (use -skipfailures to skip errors)
> >
> > You cannot use -lco (layer *creation* option) for an append/update. Well,
> > you can, but they will be ignored. As such, the schema that will be used
> > will be the public schema (since -lco SCHEMA=test is ignored). In your
> > update ogr2ogr command line, you have to specify either "-nln
> > test.PARCELLE_id" or add " active_schema=test" to your connexion string,
> > i.e. "PG:dbname=test_edigeo host='localhost' active_schema=test" (you could
> > also have used active_schema for the first ogr2ogr command that will create
> > the table)
> >
> > > > Y.
> > >
> > > Here some information about my issue:
> > >
> > > 1/ ogr2ogr is not protecting layer name. If I use EDIGEO_parcelle as a
> > > layername, Postgresql will create "edigeo_parcelle" table which is
> > > incorrect (even if this is not a good practice to set up an uppercase
> > > table name).
> > This is the effect of the "laundering" that is done by default. See the
> > LAUNDER layer creation option documented in http://gdal.org/ogr/drv_pg.html
> > > 2/ In SQL request sent by ogr2ogr I find this one:
> > > SELECT a.attname, a.attnum, t.typname, t.typname =
> > > ANY(ARRAY['int2','int4','serial']) AS isfid FROM pg_class c, pg_attribute
> > > a, pg_type t, pg_namespace n, pg_index i WHERE a.attnum > 0 AND
> > > a.attrelid = c.oid AND a.atttypid = t.oid AND c.relnamespace = n.oid AND
> > > c.oid = i.indrelid
> > > AND i.indisprimary = 't' AND t.typname !~ '^geom' AND c.relname =
> > > 'edigeo_parcelle' AND (i.indkey[0]=a.attnum OR i.indkey[1]=a.attnum OR
> > > i.indkey[2]=a.attnum OR i.indkey[3]=a.attnum OR i.indkey[4]=a.attnum OR
> > > i.indkey[5]=a.attnum OR i.indkey[6]=a.attnum OR i.indkey[7]=a.attnum OR
> > > i.indkey[8]=a.attnum OR i.indkey[9]=a.attnum) AND n.nspname='public'
> ORDER
> > > BY a.attnum;
> >
> > > But my layer should be in "test" schema. Correct SQL request should be:
> > See above explanation about active_schema.
>



From JPalmer at linz.govt.nz  Wed Mar  6 10:12:54 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 7 Mar 2013 07:12:54 +1300
Subject: [gdal-dev] WFS Axis order issue with projected coordinate system
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB7@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB5@prdlsmmsg01.ad.linz.govt.nz>,
	<201303030952.14688.even.rouault@mines-paris.org>,
	<666FB8D75E95AE42965A0E76A5E5337E0F7091EAB7@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F736344D2@prdlsmmsg01.ad.linz.govt.nz>

Thanks Even.

So does this ticket account for this problem?

http://trac.osgeo.org/gdal/ticket/4329

Or do changes need to be applied in the WFS driver as well?

Yes the ISO/OGC people have made my job very hard here in NZ. As NZ's leading geospatial government department LINZ is tasked with pushing OGC standards to get interoperability going. But with all of NZ's 50+ projections being defined as Northing, Easting it's making it very hard to push with users. Because most WFS service talk the highest available version by default, it hard to get users to use and understand why they must use version 1.0.0. BTW it was a mistake that the axis order was set as North, East for NZ projections. In the EPSG submission it was not explicitly specified, rather EPSG inferred it!

________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Sunday, 3 March 2013 9:52 p.m.
To: gdal-dev at lists.osgeo.org
Cc: Jeremy Palmer
Subject: Re: [gdal-dev] WFS Axis order issue with projected coordinate system

>
>
> Funny thing is ogrinfo reports the SRS with the correct axis order.
>
> Of course I can add "SRSNAME=EPSG:2193" to the URL, but I'd rather the GDAL
> internals were working correctly.

This is http://trac.osgeo.org/gdal/ticket/4329

In short, the WFS/GML drivers can deal with geographic SRS that have
latitude/longitude ordering and do the coordinate swapping, but not yet for
projected SRS that have northing/easting ordering.

The return of the driver is somehow correct.  It reports a SRS in
northing/easting ordering and presents coordinates in that order. But I agree
it would be nicer for it to behave like geographic SRS with inverted axis
order.

Another way of working around that is to force VERSION=1.0.0, since GeoServer
only honours EPSG axis order from WFS 1.1.0. Remembers me
http://dmorissette.blogspot.fr/2012/12/dont-upgrade-to-wms-130-unless-you.html

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jluis at ualg.pt  Wed Mar  6 10:53:14 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 06 Mar 2013 18:53:14 +0000
Subject: [gdal-dev] nodata in .bil format
Message-ID: <5137909A.1030405@ualg.pt>

Hi,

While playing a bit with Lastools I came across this behavior. I create 
outputs in both .bil and .asc ESRI formats
The weird thing is that beeing the .hdr header file common (I mean 
exactly equal) to both outputs the  .bil format does not recognize the 
nodata value.
Is this a knwon issue?    (GDAL trunk on Windows)

gdalinfo lixo.bil
ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this dataset.
Driver: EHdr/ESRI .hdr Labelled


C:\programs\lastools\data>gdalinfo lixo.asc
Driver: AAIGrid/Arc/Info ASCII Grid
Files: lixo.asc
...
Band 1 Block=250x1 Type=Float32, ColorInterp=Undefined
   NoData Value=-9999

Joaquim

From JPalmer at linz.govt.nz  Wed Mar  6 11:01:35 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 7 Mar 2013 08:01:35 +1300
Subject: [gdal-dev] Python API
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F736344D3@prdlsmmsg01.ad.linz.govt.nz>

Hi All,

I've got a few questions about the support and future of some method calls within the OGR Python API.

1/ What is preferred way to method to access geometries from features? is it feature.geometry() or feature.GetGeometryRef()? "geometry()" seems funny as it's not well documented and is not declared using camel case (or at least starting with a capital letter). Is this going to be well supported in the future?

2/ Is accessing feature field values via the pythonic attribute interface (i.e feature['myatt'] or feature['myatt'] = 1) the preferred way? Also is this API going to be well supported in the future?

3/ Following on from discussion about destroy() from geo.org/gdal/wiki/PythonGotchas, can it be confirmed if you need to call destroy at 'all' on OGR objects with GDAL/OGR 1.9? Can some examples be given?

Thanks,
Jeremy


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jan.heckman at gmail.com  Wed Mar  6 12:10:23 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Wed, 6 Mar 2013 21:10:23 +0100
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <5137909A.1030405@ualg.pt>
References: <5137909A.1030405@ualg.pt>
Message-ID: <CAKMUAtAMyKHoe8dtcWUnhB4xdri+ucxu0s_17=pO6bOqw0cNRw@mail.gmail.com>

Hi,
There should certainly not be a space between Nodata and Value as in your
mail below.
There are two formats relevant for (at least) arcgis:
.bil. In this case the keyword is NoData
.flt. In this case the keyword is NoData_Value.
Capitalization, afaik, is irrelevant.
So you could modify the .hdr file as a test, and if it works out as I
indicated (NoData=-9999 in stead of NoData Value=-9999) you can file a
useful ticket.
.flt, by the way, is a float array which appears to be used only as an
intermediate (conversion) format, as in the conversion tools: float to
raster and vice versa.
Hope this helps a little,
Jan

On Wed, Mar 6, 2013 at 7:53 PM, Joaquim Luis <jluis at ualg.pt> wrote:

> Hi,
>
> While playing a bit with Lastools I came across this behavior. I create
> outputs in both .bil and .asc ESRI formats
> The weird thing is that beeing the .hdr header file common (I mean exactly
> equal) to both outputs the  .bil format does not recognize the nodata value.
> Is this a knwon issue?    (GDAL trunk on Windows)
>
> gdalinfo lixo.bil
> ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this dataset.
> Driver: EHdr/ESRI .hdr Labelled
>
>
> C:\programs\lastools\data>**gdalinfo lixo.asc
> Driver: AAIGrid/Arc/Info ASCII Grid
> Files: lixo.asc
> ...
> Band 1 Block=250x1 Type=Float32, ColorInterp=Undefined
>   NoData Value=-9999
>
> Joaquim
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/6fe5f4aa/attachment.html>

From jluis at ualg.pt  Wed Mar  6 13:15:36 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 06 Mar 2013 21:15:36 +0000
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <CAKMUAtAMyKHoe8dtcWUnhB4xdri+ucxu0s_17=pO6bOqw0cNRw@mail.gmail.com>
References: <5137909A.1030405@ualg.pt>
	<CAKMUAtAMyKHoe8dtcWUnhB4xdri+ucxu0s_17=pO6bOqw0cNRw@mail.gmail.com>
Message-ID: <5137B1F8.3040701@ualg.pt>

Jan,

My mail used copy-paste so the spaces are the same as printed by 
gdalinfo but I don't think that is important as it merely reflects how 
gdalinfo prints the info. Actually I crossed this problem when my 
gdalread mex lib showed that the nodata for the .bil case was 1e10 
instead of the -9999.

As another set of tests I converted the .bil to .asc with

gdal_translate -of AAIGrid lixo.bil lixa.asc
ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this dataset.
Input file size is 250, 250
0...10...20...30...40...50...60...70...80...90...100 - done.

and here despite the error message the -9999 nodata value was written in 
the output.

On the other hand, converting the .asc to .bil (as in below) though no 
warnings created a companion .hdr that does not have the 'nodata' line

gdal_translate -of EHdr lixo.asc lixa.bil
Input file size is 250, 250
0...10...20...30...40...50...60...70...80...90...100 - done.

> Hi,
> There should certainly not be a space between Nodata and Value as in 
> your mail below.
> There are two formats relevant for (at least) arcgis:
> .bil. In this case the keyword is NoData
> .flt. In this case the keyword is NoData_Value.
> Capitalization, afaik, is irrelevant.
> So you could modify the .hdr file as a test, and if it works out as I 
> indicated (NoData=-9999 in stead of NoData Value=-9999) you can file a 
> useful ticket.
> .flt, by the way, is a float array which appears to be used only as an 
> intermediate (conversion) format, as in the conversion tools: float to 
> raster and vice versa.
> Hope this helps a little,
> Jan
>
> On Wed, Mar 6, 2013 at 7:53 PM, Joaquim Luis <jluis at ualg.pt 
> <mailto:jluis at ualg.pt>> wrote:
>
>     Hi,
>
>     While playing a bit with Lastools I came across this behavior. I
>     create outputs in both .bil and .asc ESRI formats
>     The weird thing is that beeing the .hdr header file common (I mean
>     exactly equal) to both outputs the  .bil format does not recognize
>     the nodata value.
>     Is this a knwon issue?    (GDAL trunk on Windows)
>
>     gdalinfo lixo.bil
>     ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this
>     dataset.
>     Driver: EHdr/ESRI .hdr Labelled
>
>
>     C:\programs\lastools\data>gdalinfo lixo.asc
>     Driver: AAIGrid/Arc/Info ASCII Grid
>     Files: lixo.asc
>     ...
>     Band 1 Block=250x1 Type=Float32, ColorInterp=Undefined
>       NoData Value=-9999
>
>     Joaquim
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/9e4f6552/attachment.html>

From ustroetz at gmail.com  Wed Mar  6 14:49:53 2013
From: ustroetz at gmail.com (=?ISO-8859-1?Q?Uli_Str=F6tz?=)
Date: Wed, 6 Mar 2013 14:49:53 -0800
Subject: [gdal-dev] OGR distance different than in ArcGIS
Message-ID: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>

I want to determine the shortest distance between a point and a line. I use
the following Python script to do so. If I compare the result of the script
with the result of ArcMap's Near Analysis, I get a completely different
results. The shapefiles are in the CRS GCS_North_American_1983 and
projected with Albers. What could be the reason for the difference?

import ogr

driver = ogr.GetDriverByName('ESRI Shapefile')

lineshp = driver.Open('U:/My Documents/Tool/shp/line.shp', 0)
linelyr = lineshp.GetLayer()

pointshp = driver.Open('U:/My Documents/Tool/shp/point.shp', 0)
pointlyr = pointshp.GetLayer()

line = linelyr.GetNextFeature()
point = pointlyr.GetNextFeature()

line_geom = line.GetGeometryRef()
point_geom = point.GetGeometryRef()

dist = point_geom.Distance(line_geom)

print dist

Thanks ahead!

Uli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/d12703b0/attachment.html>

From warmerdam at pobox.com  Wed Mar  6 15:54:16 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 6 Mar 2013 15:54:16 -0800
Subject: [gdal-dev] OGR distance different than in ArcGIS
In-Reply-To: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
References: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
Message-ID: <CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>

Uli,

You might want to elaborate on in what ways the results differ.  Perhaps
for a concrete example pair of geometries.  The GDAL/OGR Distance is going
to give planar distance in "decimal degrees" if everything is in geographic
coordinates without regard to ellipsoidal geometries.  I suspect the ArcGIS
algorithm is actually giving a distance in meters - possibly for the great
circle path from the closest points.  If that is what you need, a different
approach will be needed.

Best regards,
Frank

On Wed, Mar 6, 2013 at 2:49 PM, Uli Str?tz <ustroetz at gmail.com> wrote:

>
>    I want to determine the shortest distance between a point and a line.
> I use the following Python script to do so. If I compare the result of the
> script with the result of ArcMap's Near Analysis, I get a completely
> different results. The shapefiles are in the CRS GCS_North_American_1983
> and projected with Albers. What could be the reason for the difference?
>
> import ogr
>
> driver = ogr.GetDriverByName('ESRI Shapefile')
>
> lineshp = driver.Open('U:/My Documents/Tool/shp/line.shp', 0)
> linelyr = lineshp.GetLayer()
>
> pointshp = driver.Open('U:/My Documents/Tool/shp/point.shp', 0)
> pointlyr = pointshp.GetLayer()
>
> line = linelyr.GetNextFeature()
> point = pointlyr.GetNextFeature()
>
> line_geom = line.GetGeometryRef()
> point_geom = point.GetGeometryRef()
>
> dist = point_geom.Distance(line_geom)
>
> print dist
>
> Thanks ahead!
>
> Uli
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/740d3f8c/attachment.html>

From ustroetz at gmail.com  Wed Mar  6 15:59:02 2013
From: ustroetz at gmail.com (=?ISO-8859-1?Q?Uli_Str=F6tz?=)
Date: Wed, 6 Mar 2013 15:59:02 -0800
Subject: [gdal-dev] OGR distance different than in ArcGIS
In-Reply-To: <CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>
References: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
	<CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>
Message-ID: <CA+-+ixPxvtXYDLj0AMJY8BEDXXf9UHwu6rwjCDqFzSx83fatBw@mail.gmail.com>

Hi Frank,

The distance is according to ArcGIS 500m. According to Python(OGR)
29215.31. I was thinking the same, that GDAL gives the distance according
to the Geographic Coordinate System. Is there a way it uses the units of
the Projected Coordinate System (which would be meters)? Or do you know of
another workaround to get the result in meters?

Best,

Uli


2013/3/6 Frank Warmerdam <warmerdam at pobox.com>

> Uli,
>
> You might want to elaborate on in what ways the results differ.  Perhaps
> for a concrete example pair of geometries.  The GDAL/OGR Distance is going
> to give planar distance in "decimal degrees" if everything is in geographic
> coordinates without regard to ellipsoidal geometries.  I suspect the ArcGIS
> algorithm is actually giving a distance in meters - possibly for the great
> circle path from the closest points.  If that is what you need, a different
> approach will be needed.
>
> Best regards,
> Frank
>
> On Wed, Mar 6, 2013 at 2:49 PM, Uli Str?tz <ustroetz at gmail.com> wrote:
>
>>
>>    I want to determine the shortest distance between a point and a line.
>> I use the following Python script to do so. If I compare the result of the
>> script with the result of ArcMap's Near Analysis, I get a completely
>> different results. The shapefiles are in the CRS GCS_North_American_1983
>> and projected with Albers. What could be the reason for the difference?
>>
>> import ogr
>>
>> driver = ogr.GetDriverByName('ESRI Shapefile')
>>
>> lineshp = driver.Open('U:/My Documents/Tool/shp/line.shp', 0)
>> linelyr = lineshp.GetLayer()
>>
>> pointshp = driver.Open('U:/My Documents/Tool/shp/point.shp', 0)
>> pointlyr = pointshp.GetLayer()
>>
>> line = linelyr.GetNextFeature()
>> point = pointlyr.GetNextFeature()
>>
>> line_geom = line.GetGeometryRef()
>> point_geom = point.GetGeometryRef()
>>
>> dist = point_geom.Distance(line_geom)
>>
>> print dist
>>
>> Thanks ahead!
>>
>> Uli
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/0a79ddc4/attachment-0001.html>

From warmerdam at pobox.com  Wed Mar  6 16:00:59 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 6 Mar 2013 16:00:59 -0800
Subject: [gdal-dev] Python API
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F736344D3@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0F736344D3@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CA+YzLBcOmA5zGSxoH2KYkNXC+-COdv6ayNFbhOz+3hq=MOWmZw@mail.gmail.com>

On Wed, Mar 6, 2013 at 11:01 AM, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:

> Hi All,
>
> I've got a few questions about the support and future of some method calls
> within the OGR Python API.
>
> 1/ What is preferred way to method to access geometries from features? is
> it feature.geometry() or feature.GetGeometryRef()? "geometry()" seems funny
> as it's not well documented and is not declared using camel case (or at
> least starting with a capital letter). Is this going to be well supported
> in the future?
>

Jeremy,

Hmm, I didn't know that geometry() existed.  I always call GetGeometryRef()
which is a bit ugly.   I see geometry() called exactly once in the autotest
suite so I would not be terribly certain it will continue to exist.


> 2/ Is accessing feature field values via the pythonic attribute interface
> (i.e feature['myatt'] or feature['myatt'] = 1) the preferred way? Also is
> this API going to be well supported in the future?
>

 I do not see why this should go away.

3/ Following on from discussion about destroy() from
> geo.org/gdal/wiki/PythonGotchas, can it be confirmed if you need to call
> destroy at 'all' on OGR objects with GDAL/OGR 1.9? Can some examples be
> given?
>

I now never call destroy but I do something set references to None to
control object lifetime.

No really solid answers but hopefully better than silence.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/14ead6e4/attachment.html>

From warmerdam at pobox.com  Wed Mar  6 16:17:13 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 6 Mar 2013 16:17:13 -0800
Subject: [gdal-dev] OGR distance different than in ArcGIS
In-Reply-To: <CA+-+ixPxvtXYDLj0AMJY8BEDXXf9UHwu6rwjCDqFzSx83fatBw@mail.gmail.com>
References: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
	<CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>
	<CA+-+ixPxvtXYDLj0AMJY8BEDXXf9UHwu6rwjCDqFzSx83fatBw@mail.gmail.com>
Message-ID: <CA+YzLBc+pie2M_Nc4w31LjwrGBp_9rto5=6qUR+gqtQWbZYwvw@mail.gmail.com>

On Wed, Mar 6, 2013 at 3:59 PM, Uli Str?tz <ustroetz at gmail.com> wrote:

> Hi Frank,
>
> The distance is according to ArcGIS 500m. According to Python(OGR)
> 29215.31. I was thinking the same, that GDAL gives the distance according
> to the Geographic Coordinate System. Is there a way it uses the units of
> the Projected Coordinate System (which would be meters)? Or do you know of
> another workaround to get the result in meters?
>

Uli,

A lot depends on the precision you need.  Options include:

1) Compute normally and multiply by a fixed degrees to meters value to get
an approximate distance in meters.  A WGS degree is approximately 111111
meters.

2) Transform everything to an appropriate projected coordinate system, and
do the distance there.

3) Somehow find the nearest point on the line to the point (I don't see how
to do that with ogr.Geometry) and then use a great circle calculator like
the PROJ.4 geod command.

4) Do this in PostGIS using the "geography" type instead of "geometry".
 This is supposed to allow metric operations on spherical geometry.  I have
no direct experience though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/73736018/attachment.html>

From ustroetz at gmail.com  Wed Mar  6 16:33:56 2013
From: ustroetz at gmail.com (=?ISO-8859-1?Q?Uli_Str=F6tz?=)
Date: Wed, 6 Mar 2013 16:33:56 -0800
Subject: [gdal-dev] OGR distance different than in ArcGIS
In-Reply-To: <CA+YzLBc+pie2M_Nc4w31LjwrGBp_9rto5=6qUR+gqtQWbZYwvw@mail.gmail.com>
References: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
	<CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>
	<CA+-+ixPxvtXYDLj0AMJY8BEDXXf9UHwu6rwjCDqFzSx83fatBw@mail.gmail.com>
	<CA+YzLBc+pie2M_Nc4w31LjwrGBp_9rto5=6qUR+gqtQWbZYwvw@mail.gmail.com>
Message-ID: <CA+-+ixO1UO=i5LxiXj-UrwLKRf+0mHU8txCX0-2vqG-+MSYzpQ@mail.gmail.com>

Thanks for your answers. I tried number two and the files are projected in
Albers (meters) (see attachment). The results are still the same as being
unprojected. Is there a way to tell GDAL to only use the Projected
Coordinate System instead of the CRS?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/13a0d464/attachment-0001.html>

From thare at usgs.gov  Wed Mar  6 16:51:56 2013
From: thare at usgs.gov (Hare, Trent)
Date: Wed, 6 Mar 2013 17:51:56 -0700
Subject: [gdal-dev] OGR distance different than in ArcGIS
In-Reply-To: <CA+-+ixO1UO=i5LxiXj-UrwLKRf+0mHU8txCX0-2vqG-+MSYzpQ@mail.gmail.com>
References: <CA+-+ixN0mGEejH-PQ75CJxcLc6FMMROqgY8-kF6wtWNQ9p-eNQ@mail.gmail.com>
	<CA+YzLBfOCQ80DxrTBRfZvZ9AGO8UWtOZp9nVSO+tYcT1DZ5qZA@mail.gmail.com>
	<CA+-+ixPxvtXYDLj0AMJY8BEDXXf9UHwu6rwjCDqFzSx83fatBw@mail.gmail.com>
	<CA+YzLBc+pie2M_Nc4w31LjwrGBp_9rto5=6qUR+gqtQWbZYwvw@mail.gmail.com>
	<CA+-+ixO1UO=i5LxiXj-UrwLKRf+0mHU8txCX0-2vqG-+MSYzpQ@mail.gmail.com>
Message-ID: <CAB6t5t8o27JdtHHwDOnkL_OOSF4xdZ6-5RmZ4Vi8OE+62g+A2w@mail.gmail.com>

Uli,
   Unless your neighbors are very localized (in an undistorted projection),
I would recommend using some geodesic methods (in ArcMap or OGR).

For ArcMap, you can beat this free add-on (Tools for Graphics and Shapes)
which does geodesic lengths, areas, and azimuths no matter the input
projection:
http://www.jennessent.com/arcgis/shapes_graphics.htm (very
good documentation)

For OGR, I would recommend running the lat/lon pairs through or Haversine
or Vincenty's equations.
examples:
Haversine:
http://stackoverflow.com/questions/11703407/how-to-calculate-distance-between-points-on-python-side-of-my-appplication-in-wa
Vincenty's:
https://code.google.com/p/pyroms/source/browse/trunk/pyroms/greatcircle.py?r=58

Good luck,
Trent



On Wed, Mar 6, 2013 at 5:33 PM, Uli Str?tz <ustroetz at gmail.com> wrote:

> Thanks for your answers. I tried number two and the files are projected in
> Albers (meters) (see attachment). The results are still the same as being
> unprojected. Is there a way to tell GDAL to only use the Projected
> Coordinate System instead of the CRS?
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130306/ab8cc02b/attachment.html>

From ichikawa.yuji at gmail.com  Wed Mar  6 20:18:56 2013
From: ichikawa.yuji at gmail.com (=?iso-2022-jp?B?GyRCO1RAbhsoQiAbJEJNOkZzGyhC?=)
Date: Thu, 7 Mar 2013 13:18:56 +0900
Subject: [gdal-dev] Help me about gdal2tiles
Message-ID: <58DE5502-37C5-4C0D-9E65-4FAA92AB3F7A@gmail.com>

Hi.

I want to make data as TMS from NOAA GLOBE, but am in trouble at gdal2tiles.py stage.

Here are what I did.

1. installed GDAL library (1.9.2) by HomeBrew on MacOS X(10.8.2)
2. installed gdal by pip on python2.7.3
3. downloaded all data from http://www.ngdc.noaa.gov/mgg/topo/gltiles.html and extract.
4. downloaded all headers from http://www.ngdc.noaa.gov/mgg/topo/elev/esri/hdr/
5. added "PIXELTYPE      SIGNEDINT" according tohttp://fortrangis.berlios.de/doc/globe.html
6. gdalbuildvrt globe.vrt ?10g
7. gdalwarp -t_srs EPSG:3857 -r bilinear globe.vrt globe-3857.tif
8. gdal2tiles.py -s EPSG:3857 -z 0-16 globe-3857.tif

The last process was done soon and resulting directories and files are a few like below.
globe-3857---16---32767---32767.png, 32768.png
                              +-32768---32767.png, 32768.png
I miss 0-32766 folders and 0-32766.pngs.

What should I do?

I checked behaviors inside gdal2tiles.py and found unit inconsistency in line 959.
line 959 is a part in determining tile range, and such as below.
	tminx, tminy = self.mercator.MetersToTile( self.ominx, self.ominy, tz )
Here self.ominx, self.ominy should be meters but actually they are degrees.

But I am not quite sure where should I fix.

With best regards,
-
ICHIKAWA, Yuji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130307/218f0973/attachment.html>

From pierigis at gmail.com  Wed Mar  6 23:35:51 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Wed, 6 Mar 2013 23:35:51 -0800 (PST)
Subject: [gdal-dev] gdaladdo errors for overviews on vrt file
Message-ID: <1362641751156-5038929.post@n6.nabble.com>

Hi all
I'm trying to make overviews on a vrt file.
Windows XP x32, dual opteron 4Gb RAM, Osgeo4W.

This file is a virtual dataset, a mosaic of 993 tiff images 1bit b/w.

gdalinfo for one of these tiff is:
****************************************************
Driver: GTiff/GeoTIFF
Files: 109021.tif
       109021.tfw
       109021.aux
Size is 7600, 6550
Coordinate System is `'
Origin = (2400071.386161581600000,5072907.599233778200000)
Pixel Size = (0.433431096374989,-0.433431096374989)
Metadata:
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=59
  TIFFTAG_YRESOLUTION=59
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
  MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 2400071.386, 5072907.599)
Lower Left  ( 2400071.386, 5070068.626)
Upper Right ( 2403365.462, 5072907.599)
Lower Right ( 2403365.462, 5070068.626)
Center      ( 2401718.424, 5071488.112)
Band 1 Block=7600x1 Type=Byte, ColorInterp=Palette
  Description = Band_1
  Metadata:
    LAYER_TYPE=athematic
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255
*************************************

The mosaic header is:
<VRTDataset rasterXSize="292042" rasterYSize="284413">
<VRTRasterBand dataType="Byte" band="1">
    <NoDataValue>0.00000000000000E+000</NoDataValue>
    <HideNoDataValue>1</HideNoDataValue>
    <ColorInterp>Palette</ColorInterp>
    <ColorTable>
      <Entry c1="255" c2="255" c3="255" c4="255" />
      <Entry c1="0" c2="0" c3="0" c4="255" />
    </ColorTable>

I'm making overviews with this command:
gdaladdo -r nearest --config COMPRESS_OVERVIEW deflate file.vrt 2 4 8 16 32
64 128 256

It's 48 hours that gdaladdo is working, now it's 70% done and today I read
some errors on the osgeo shell:

ERROR 1: TIFFMergeFieldInfo:Failed to allocate fields array
ERROR 1: dxf_tiff.vrt.ovr:Failed to allocate memory for for fields array
(467763
0 elements of 16 bytes each)
ERROR 1: TIFFMergeFieldInfo:Failed to allocate fields array
ERROR 1: dxf_tiff.vrt.ovr:Failed to allocate memory for for fields array
(467763
0 elements of 16 bytes each)
ERROR 1: TIFFMergeFieldInfo:Failed to allocate fields array
ERROR 1: dxf_tiff.vrt.ovr:Failed to allocate memory for for fields array
(467763
0 elements of 16 bytes each)
ERROR 1: TIFFMergeFieldInfo:Failed to allocate fields array
More than 1000 errors or warnings have been reported. No more will be
reported f
rom now.

gdaladdo at the beginning was using 10%cpu and few ram
Today It's using 50% CPU (i.e. 1 phisical processor) and 1.3Gb RAM

What is this? RAM problem??
Thank you all
Pietro



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdaladdo-errors-for-overviews-on-vrt-file-tp5038929.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Mar  7 00:04:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 07 Mar 2013 09:04:29 +0100
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <5137909A.1030405@ualg.pt>
References: <5137909A.1030405@ualg.pt>
Message-ID: <1362643469.51384a0de994d@imp.free.fr>

Selon Joaquim Luis <jluis at ualg.pt>:

> Hi,
>
> While playing a bit with Lastools I came across this behavior. I create
> outputs in both .bil and .asc ESRI formats
> The weird thing is that beeing the .hdr header file common (I mean
> exactly equal) to both outputs

I don't understand this. The .hdr file is only created/recognized for EHdr
datasets. AAIGrid datasets have both their header and samples in the .asc file
and the .hdr file isn't used in that case.


 the  .bil format does not recognize the
> nodata value.
> Is this a knwon issue?    (GDAL trunk on Windows)

No, I just managed to do :

gdal_translate byte.tif byte.bil -of ehdr -a_nodata 1

I then deleted the byte.bil.aux.xml file just to be sure it doesn't interfere

and then :

C:\gdal_trunk\gdal>gdalinfo byte.bil
Driver: EHdr/ESRI .hdr Labelled
Files: byte.bil
       byte.hdr
       byte.prj
Size is 20, 20
Coordinate System is:
PROJCS["NAD_1927_UTM_Zone_11N",
    GEOGCS["GCS_North_American_1927",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke_1866",6378206.4,294.9786982]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
Lower Left  (  440720.000, 3750120.000) (117d38'27.92"W, 33d53'29.51"N)
Upper Right (  441920.000, 3751320.000) (117d37'41.48"W, 33d54' 8.71"N)
Lower Right (  441920.000, 3750120.000) (117d37'41.20"W, 33d53'29.75"N)
Center      (  441320.000, 3750720.000) (117d38' 4.70"W, 33d53'49.11"N)
Band 1 Block=20x1 Type=Byte, ColorInterp=Undefined
  NoData Value=1

>
> gdalinfo lixo.bil
> ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this dataset.

This message is displayed if GDALRasterBand::SetNoDataValue() is called. But in
normal situations, it should not, unless PAM is disabled. Are you disabling PAM
by chance ?

From even.rouault at mines-paris.org  Thu Mar  7 00:06:33 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 07 Mar 2013 09:06:33 +0100
Subject: [gdal-dev] WFS Axis order issue with projected coordinate system
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F736344D2@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAB5@prdlsmmsg01.ad.linz.govt.nz>,
	<201303030952.14688.even.rouault@mines-paris.org>,
	<666FB8D75E95AE42965A0E76A5E5337E0F7091EAB7@prdlsmmsg01.ad.linz.govt.nz>
	<666FB8D75E95AE42965A0E76A5E5337E0F736344D2@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <1362643593.51384a89a8455@imp.free.fr>

Selon Jeremy Palmer <JPalmer at linz.govt.nz>:

> Thanks Even.
>
> So does this ticket account for this problem?
>
> http://trac.osgeo.org/gdal/ticket/4329
>
> Or do changes need to be applied in the WFS driver as well?

The best is that you try and report. I believe this should be sufficient, but
might be wrong. Not sure if the patch still applies cleanly on trunk.

>
> Yes the ISO/OGC people have made my job very hard here in NZ. As NZ's leading
> geospatial government department LINZ is tasked with pushing OGC standards to
> get interoperability going. But with all of NZ's 50+ projections being
> defined as Northing, Easting it's making it very hard to push with users.
> Because most WFS service talk the highest available version by default, it
> hard to get users to use and understand why they must use version 1.0.0. BTW
> it was a mistake that the axis order was set as North, East for NZ
> projections. In the EPSG submission it was not explicitly specified, rather
> EPSG inferred it!
>
> ________________________________________
> From: Even Rouault [even.rouault at mines-paris.org]
> Sent: Sunday, 3 March 2013 9:52 p.m.
> To: gdal-dev at lists.osgeo.org
> Cc: Jeremy Palmer
> Subject: Re: [gdal-dev] WFS Axis order issue with projected coordinate system
>
> >
> >
> > Funny thing is ogrinfo reports the SRS with the correct axis order.
> >
> > Of course I can add "SRSNAME=EPSG:2193" to the URL, but I'd rather the GDAL
> > internals were working correctly.
>
> This is http://trac.osgeo.org/gdal/ticket/4329
>
> In short, the WFS/GML drivers can deal with geographic SRS that have
> latitude/longitude ordering and do the coordinate swapping, but not yet for
> projected SRS that have northing/easting ordering.
>
> The return of the driver is somehow correct.  It reports a SRS in
> northing/easting ordering and presents coordinates in that order. But I agree
> it would be nicer for it to behave like geographic SRS with inverted axis
> order.
>
> Another way of working around that is to force VERSION=1.0.0, since GeoServer
> only honours EPSG axis order from WFS 1.1.0. Remembers me
> http://dmorissette.blogspot.fr/2012/12/dont-upgrade-to-wms-130-unless-you.html
>
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800 665
> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
> responsibility for changes to this email, or for any attachments, after its
> transmission from LINZ. Thank You.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jluis at ualg.pt  Thu Mar  7 06:04:06 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 07 Mar 2013 14:04:06 +0000
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <1362643469.51384a0de994d@imp.free.fr>
References: <5137909A.1030405@ualg.pt> <1362643469.51384a0de994d@imp.free.fr>
Message-ID: <51389E56.9030108@ualg.pt>


> I don't understand this. The .hdr file is only created/recognized for EHdr
> datasets. AAIGrid datasets have both their header and samples in the .asc file
> and the .hdr file isn't used in that case.
Grrrr. I know that too but 'head didn't think' and I just took it to be 
common to both formats (I generated the .asc after finding the issue 
with the .bil)
the .bil format does not recognize the
>> nodata value.
>> Is this a knwon issue?    (GDAL trunk on Windows)
> No, I just managed to do :
>
> gdal_translate byte.tif byte.bil -of ehdr -a_nodata 1
>
> I then deleted the byte.bil.aux.xml file just to be sure it doesn't interfere
> Band 1 Block=20x1 Type=Byte, ColorInterp=Undefined
>    NoData Value=1

>> gdalinfo lixo.bil
>> ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this dataset.
> This message is displayed if GDALRasterBand::SetNoDataValue() is called. But in
> normal situations, it should not, unless PAM is disabled. Are you disabling PAM
> by chance ?

Yes I have (sometimes I has problems in classroom computers that didn't 
have writing privileges in the program's install dir and disable it).

So apparently the situation is, with PAM disabled once can convert from 
.bil to .asc and that caries the nodata info but accessing the .bil 
with, for example gdalinfo (and my gdalread mex) does not read the 
nodata field. Right?

From even.rouault at mines-paris.org  Thu Mar  7 06:29:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 07 Mar 2013 15:29:16 +0100
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <51389E56.9030108@ualg.pt>
References: <5137909A.1030405@ualg.pt> <1362643469.51384a0de994d@imp.free.fr>
	<51389E56.9030108@ualg.pt>
Message-ID: <1362666556.5138a43cb32fe@imp.free.fr>

> >> gdalinfo lixo.bil
> >> ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this
> dataset.
> > This message is displayed if GDALRasterBand::SetNoDataValue() is called.
> But in
> > normal situations, it should not, unless PAM is disabled. Are you disabling
> PAM
> > by chance ?
>
> Yes I have (sometimes I has problems in classroom computers that didn't
> have writing privileges in the program's install dir and disable it).
>
> So apparently the situation is, with PAM disabled once can convert from
> .bil to .asc and that caries the nodata info but accessing the .bil
> with, for example gdalinfo (and my gdalread mex) does not read the
> nodata field. Right?

Should be fixed by r25701

>



From jluis at ualg.pt  Thu Mar  7 06:35:14 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 07 Mar 2013 14:35:14 +0000
Subject: [gdal-dev] nodata in .bil format
In-Reply-To: <1362666556.5138a43cb32fe@imp.free.fr>
References: <5137909A.1030405@ualg.pt> <1362643469.51384a0de994d@imp.free.fr>
	<51389E56.9030108@ualg.pt> <1362666556.5138a43cb32fe@imp.free.fr>
Message-ID: <5138A5A2.1060806@ualg.pt>

On 07-03-2013 14:29, Even Rouault wrote:
>>>> gdalinfo lixo.bil
>>>> ERROR 6: lixo.bil, band 1: SetNoDataValue() not supported for this
>> dataset.
>>> This message is displayed if GDALRasterBand::SetNoDataValue() is called.
>> But in
>>> normal situations, it should not, unless PAM is disabled. Are you disabling
>> PAM
>>> by chance ?
>> Yes I have (sometimes I has problems in classroom computers that didn't
>> have writing privileges in the program's install dir and disable it).
>>
>> So apparently the situation is, with PAM disabled once can convert from
>> .bil to .asc and that caries the nodata info but accessing the .bil
>> with, for example gdalinfo (and my gdalread mex) does not read the
>> nodata field. Right?
> Should be fixed by r25701

Thanks. I'll rebuild and try later tonight or tomorrow.

Joaquim


From jason.greenlaw at noaa.gov  Thu Mar  7 14:11:29 2013
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Thu, 7 Mar 2013 17:11:29 -0500
Subject: [gdal-dev] Empty region after projecting GeoTIFF from 4326 to 102113
Message-ID: <CAAoP0JyQUGhwxnTX-u986GeoNVHM0BSou8ELhsOuTkQTtfE-VA@mail.gmail.com>

I have an RGBA GeoTIFF in EPSG:4326 with an extent that wraps the 180
decimal degree international dateline (western extent: 74.2 dd, eastern
extent: 433.8 dd).

When I attempt to project this image to either EPSG:102113 (as defined in
$GDAL_DATA/esri_extra.wkt) or a very similar custom mercator projection, it
results in a large empty region at the seam of the original raster (around
74 degrees east).  The projected result looks fine other than this empty
area (it normalizes the image so that its origin is at the dateline, which
is good).

Although a small seam is expected since there is no data from 73.8E to
74.2E, the missing region is much larger than anticipated.

Does anyone have any insight into why this is occurring or how to rectify
it?

The command I am using to perform the reprojection is:

    gdalwarp -s_srs EPSG:4326 -t_srs EPSG:102113 -r bilinear -co
COMPRESS=LZW -co TILED=yes rtofs-gcs.tif rtofs-102113.tif

The original EPSG:4326 GeoTIFF and world file can be found at:

http://jgreenlaw.org/gdal/rtofs-gcs.tif
http://jgreenlaw.org/gdal/rtofs-gcs.wld

The reprojected EPSG:102113 GeoTIFF can be found at:

http://jgreenlaw.org/gdal/rtofs-102113.tif

Thanks
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130307/b29a0fa9/attachment.html>

From warmerdam at pobox.com  Thu Mar  7 14:23:52 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 7 Mar 2013 14:23:52 -0800
Subject: [gdal-dev] Empty region after projecting GeoTIFF from 4326 to
	102113
In-Reply-To: <CAAoP0JyQUGhwxnTX-u986GeoNVHM0BSou8ELhsOuTkQTtfE-VA@mail.gmail.com>
References: <CAAoP0JyQUGhwxnTX-u986GeoNVHM0BSou8ELhsOuTkQTtfE-VA@mail.gmail.com>
Message-ID: <CA+YzLBeEaaj5R4Uq+rFSrFtFOEMH9TcyT-UbC14YHq5Lj9hViw@mail.gmail.com>

Jason,

gdalwarp uses a sampling technique to figure out the region of the
source image needed to produce each tile of the output image and this
works poorly for transformation "interruptions" like datelines.

Some warp options which have an effect are documented at:

  http://www.gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08

(linked from the gdalwarp utility docs).

I think you need something like:

gdalwarp -wo SOURCE_EXTRA=100 ...

This means, for whatever imagery chunk the system thinks it needs, add
100 pixels around it.

Adding SAMPLE_STEPS to a largish value would also help but unless it
is really huge you will still likely miss a wee bit of imagery.

Best regards,
Frank

On Thu, Mar 7, 2013 at 2:11 PM, Jason Greenlaw - NOAA Affiliate
<jason.greenlaw at noaa.gov> wrote:
> I have an RGBA GeoTIFF in EPSG:4326 with an extent that wraps the 180
> decimal degree international dateline (western extent: 74.2 dd, eastern
> extent: 433.8 dd).
>
> When I attempt to project this image to either EPSG:102113 (as defined in
> $GDAL_DATA/esri_extra.wkt) or a very similar custom mercator projection, it
> results in a large empty region at the seam of the original raster (around
> 74 degrees east).  The projected result looks fine other than this empty
> area (it normalizes the image so that its origin is at the dateline, which
> is good).
>
> Although a small seam is expected since there is no data from 73.8E to
> 74.2E, the missing region is much larger than anticipated.
>
> Does anyone have any insight into why this is occurring or how to rectify
> it?
>
> The command I am using to perform the reprojection is:
>
>     gdalwarp -s_srs EPSG:4326 -t_srs EPSG:102113 -r bilinear -co
> COMPRESS=LZW -co TILED=yes rtofs-gcs.tif rtofs-102113.tif
>
> The original EPSG:4326 GeoTIFF and world file can be found at:
>
> http://jgreenlaw.org/gdal/rtofs-gcs.tif
> http://jgreenlaw.org/gdal/rtofs-gcs.wld
>
> The reprojected EPSG:102113 GeoTIFF can be found at:
>
> http://jgreenlaw.org/gdal/rtofs-102113.tif
>
> Thanks
> Jason
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From szekerest at gmail.com  Fri Mar  8 00:52:13 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 8 Mar 2013 09:52:13 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <201303021845.00592.even.rouault@mines-paris.org>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<201303011835.14994.even.rouault@mines-paris.org>
	<CACALY+TW+0J6Jz5Jwks1LxgLLP131LNd93_jadsXzk6oU+ab4w@mail.gmail.com>
	<201303021845.00592.even.rouault@mines-paris.org>
Message-ID: <CACALY+Tg0_9=gxj0Dc8Na1hLXfZb=t5c0N3jd7wvhwwDc7=-yA@mail.gmail.com>

Added a ticket with the proposed implementation patch. Let me know how you
like it.

http://trac.osgeo.org/gdal/ticket/5021

Best regards,

Tamas



2013/3/2 Even Rouault <even.rouault at mines-paris.org>

> Le vendredi 01 mars 2013 20:57:43, Tamas Szekeres a ?crit :
> > 2013/3/1 Even Rouault <even.rouault at mines-paris.org>
> >
> > > There's even a 4th option that doesn't require any code change. Create
> a
> > > OGR
> > > VRT file that renames the source fields to the truncated shapefile
> field
> > > names (or
> > > the reverse : creates a OGR VRT that renames the truncated shapefile
> > > field names
> > > to the original field names, since OGR VRT now supports since a few
> > > versions
> > > CreateFeature())
> >
> > This may probably work, but doesn't seem to be very user friendly.
> Actually
> > I would prefer to include at least a flag to indicate that ogr2ogr should
> > provide mapping the fields in the same order (don't lookup field index by
> > name) for example:
> >
> > ogr2ogr -append -f "ESRI Shapefile" -nofieldreorder destination.shp
> >  [source]
> >
> > or with the previous fieldmap approach
> >
> > ogr2ogr -append -f "ESRI Shapefile" -fieldmap "default" destination.shp
> >  [source]
>
> I'm fine with -fieldmap. It will be just another advanced option (I'm
> culprit
> for a bunch of other options...).  Perhaps "same_order" (or "identity" to
> be
> mathematically purist) instead of "default", since it's not actually the
> default behaviour (the default behaviour is to match the field names to
> build
> the field map). Some care should be done to check that the specified map
> is of
> the right size (number of fields of the source layer), or if
> "same_order"/"identity" is specified that the number of fields in the
> source and
> target layers are identical.
>
> As ogr2ogr can accept several source layers, perhaps a word of caution in
> the
> doc of the option to mention that the specified map applies to all source
> layers, so if they don't have the same field definition, the option might
> not be
> relevant in that case.
>
> >
> > Best regards,
> >
> > Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/43ea5c13/attachment.html>

From gabrielfusca at suremptec.com.ar  Fri Mar  8 06:28:21 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Fri, 8 Mar 2013 11:28:21 -0300
Subject: [gdal-dev]  Google maps support licensing question
Message-ID: <CAJ1ZnRUFGgrUyigU8W6fhPtG4zvcdaZmF2Yn9S5=qfDqN-4n+Q@mail.gmail.com>

Hi All,

I'm developing a free but not open-source desktop application using Gdal
1.9.

I want to know if exists any licesing problem to support google maps layers

Best regards,

-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/bdc6464a/attachment.html>

From robert at urban4m.com  Fri Mar  8 13:35:44 2013
From: robert at urban4m.com (Robert Nix)
Date: Fri, 8 Mar 2013 16:35:44 -0500
Subject: [gdal-dev] More information to understand ColorTables in GeoTiffs
Message-ID: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>

Hi,

I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as follows:

import numpy as np
import gdal

driver = gdal.GetDriverByName('GTiff')
dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)

band = dst_ds.GetRasterBand(1)
band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)

c = gdal.ColorTable(gdal.GCI_PaletteIndex)
c.SetColorEntry(1,(255,127,0,63))
band.SetColorTable(c)

a = np.random.randint(1,10,size=(100,100))
band.WriteArray(a)

dst_ds = None

The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535 color table entries:

Driver: GTiff/GeoTIFF
Files: testcolor.tif
       testcolor.tif.aux.xml
Size is 100, 100
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  100.0)
Upper Right (  100.0,    0.0)
Lower Right (  100.0,  100.0)
Center      (   50.0,   50.0)
Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
  Color Table (RGB with 65536 entries)
    0: 1,0,0,255
    1: 1,0,0,255
    2: 0,0,0,255
    3: 0,0,0,255
...
  65533: 0,0,0,255
  65534: 0,0,0,255
  65535: 0,0,0,255

What's going on ? besides the fact that maybe i'm not understanding color-tables? If it's clear i don't understand, is there a good resource for understanding color-tables? Or must I go learn the source code (which i really don't have to do)?

Thanks
--nix

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/9c691b40/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/9c691b40/attachment.bin>

From robert at urban4m.com  Fri Mar  8 14:05:08 2013
From: robert at urban4m.com (Robert Nix)
Date: Fri, 8 Mar 2013 17:05:08 -0500
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
Message-ID: <C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>

Let me adjust my question. I changed the color-table code to:

c = gdal.ColorTable(gdal.GCI_PaletteIndex)
n = c.SetColorEntry(1,[255,128,0,0])
m = c.SetColorEntry(65535,[0,128,255,255])
c.CreateColorRamp(1,n,65535,m)
band.SetColorTable(c)

I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and got 255) so i realized that maybe i need to create a ramp?

But the above code fails with:

Traceback (most recent call last):
  File "makecolortable.py", line 14, in <module>
    n = c.SetColorEntry(1,[255,128,0,0])
  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in SetColorEntry
    return _gdal.ColorTable_SetColorEntry(self, *args)
TypeError: Invalid values in ColorEntry sequence 

That sequence appears correct as all four values meet the short requirement, (i think this is the code that produces the error):

if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
  PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence ");


--nix

On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:

> Hi,
> 
> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as follows:
> 
> import numpy as np
> import gdal
> 
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
> 
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
> 
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> c.SetColorEntry(1,(255,127,0,63))
> band.SetColorTable(c)
> 
> a = np.random.randint(1,10,size=(100,100))
> band.WriteArray(a)
> 
> dst_ds = None
> 
> The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535 color table entries:
> 
> Driver: GTiff/GeoTIFF
> Files: testcolor.tif
>        testcolor.tif.aux.xml
> Size is 100, 100
> Coordinate System is `'
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  100.0)
> Upper Right (  100.0,    0.0)
> Lower Right (  100.0,  100.0)
> Center      (   50.0,   50.0)
> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>   Color Table (RGB with 65536 entries)
>     0: 1,0,0,255
>     1: 1,0,0,255
>     2: 0,0,0,255
>     3: 0,0,0,255
> ...
>   65533: 0,0,0,255
>   65534: 0,0,0,255
>   65535: 0,0,0,255
> 
> What's going on ? besides the fact that maybe i'm not understanding color-tables? If it's clear i don't understand, is there a good resource for understanding color-tables? Or must I go learn the source code (which i really don't have to do)?
> 
> Thanks
> --nix
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/5b1da38d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/5b1da38d/attachment.bin>

From warmerdam at pobox.com  Fri Mar  8 14:41:23 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 8 Mar 2013 14:41:23 -0800
Subject: [gdal-dev] Google Summer of Code
Message-ID: <CA+YzLBdGKHPz4H7CmJBHyEkyJLXRjvihjekk=wgRdTbbJJVLSg@mail.gmail.com>

Folks,

Somewhat belatedly I've been thinking about things students could
do this year for Google Summer of Code and put a few ideas at:

  http://trac.osgeo.org/gdal/wiki/SummerOfCode

Feel free to extend, or to promote doing summer of code for GDAL
or other OSGeo projects to those who might be good candidates.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From warmerdam at pobox.com  Fri Mar  8 16:09:54 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 8 Mar 2013 16:09:54 -0800
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
	<C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
Message-ID: <CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>

On Fri, Mar 8, 2013 at 2:05 PM, Robert Nix <robert at urban4m.com> wrote:
> Let me adjust my question. I changed the color-table code to:
>
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> n = c.SetColorEntry(1,[255,128,0,0])
> m = c.SetColorEntry(65535,[0,128,255,255])
> c.CreateColorRamp(1,n,65535,m)
> band.SetColorTable(c)
>
>
> I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and
> got 255) so i realized that maybe i need to create a ramp?

Robert,

I will note that the TIFF format does not support "short colormaps".
So if the type of the pixel is 8bit byte then the color table will be
exactly 256 entries even if you only put in one color.  Frr UInt16 it
will be 65536.  Most other colormap supporting formats do not impose
this.

> But the above code fails with:
>
> Traceback (most recent call last):
>   File "makecolortable.py", line 14, in <module>
>     n = c.SetColorEntry(1,[255,128,0,0])
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
> SetColorEntry
>     return _gdal.ColorTable_SetColorEntry(self, *args)
> TypeError: Invalid values in ColorEntry sequence
>
>
> That sequence appears correct as all four values meet the short requirement,
> (i think this is the code that produces the error):
>
> if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
>
>   PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence
> ");


I think the problem is that you switched from tuples to lists (ie.
from (r,g,b,a) to [r,g,b,a]).

Also, FYI, TIFF does not support alpha in colormaps.

Best regards,
Frank

> --nix
>
> On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:
>
> Hi,
>
> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as
> follows:
>
> import numpy as np
> import gdal
>
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> c.SetColorEntry(1,(255,127,0,63))
> band.SetColorTable(c)
>
> a = np.random.randint(1,10,size=(100,100))
> band.WriteArray(a)
>
> dst_ds = None
>
>
> The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535
> color table entries:
>
> Driver: GTiff/GeoTIFF
> Files: testcolor.tif
>        testcolor.tif.aux.xml
> Size is 100, 100
> Coordinate System is `'
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  100.0)
> Upper Right (  100.0,    0.0)
> Lower Right (  100.0,  100.0)
> Center      (   50.0,   50.0)
> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>   Color Table (RGB with 65536 entries)
>     0: 1,0,0,255
>     1: 1,0,0,255
>     2: 0,0,0,255
>     3: 0,0,0,255
> ...
>   65533: 0,0,0,255
>   65534: 0,0,0,255
>   65535: 0,0,0,255
>
>
> What's going on ? besides the fact that maybe i'm not understanding
> color-tables? If it's clear i don't understand, is there a good resource for
> understanding color-tables? Or must I go learn the source code (which i
> really don't have to do)?
>
> Thanks
> --nix
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From allenck at windstream.net  Fri Mar  8 17:20:55 2013
From: allenck at windstream.net (Allen Kempe)
Date: Fri, 08 Mar 2013 20:20:55 -0500
Subject: [gdal-dev] How to re-register a driver
Message-ID: <513A8E77.9030005@windstream.net>


In my application, I would like to be able to programatically specify 
which driver to use when opening a GDALDataset when more than one driver 
can process the file. To do this, I have deregistered the drivers that I 
don't want to use. The GetGDALDriverManager-::DeregisterDriver() 
function does the trick.

The problem I have is being able to reregister the drivers that I 
deregistered above. First of all, in order to register a driver, you 
need a handle to it. It would seem that GetDriverByName should do the 
trick but it returns NULL if the driver was previously deregistered. 
Looking at the GDALDriverrManager code, it is easy to see why this is as 
GDALDriver manager only searches the currently enabled drivers to get 
its handle.

I then thought that calling GDALDriverManager::AutoloadDrivers() would 
reinitialise the driver list but it does not return the driver that has 
been deregistered.  It would seem that GDALRegisterDriver would work but 
it requires a handle to the driver which as I stated above, cannot be 
obtained once a driver has been deregistered.

So, how does one get a handle to a deregistered driver or alternatively, 
how can GDALDriverManager::AutoloadDrivers be made to reconstruct the 
driver list with all the currently configured drivers?

It seems that GDALDriverManager::RegisterDriver is a useless function 
since there is no way to get a handle to a previously deregistered driver.
-- 


    Allen Kempe

http://acksoft.dyndns.biz/PictureGallery
298 W. Audubon Drive
Shepherdsville, KY 40165
+1 502 543-3438
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/c39ae795/attachment.html>

From robert at urban4m.com  Fri Mar  8 19:52:02 2013
From: robert at urban4m.com (robert)
Date: Fri, 8 Mar 2013 22:52:02 -0500
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
	<C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
	<CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>
Message-ID: <8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>

Frank,

Thanks for the response.

I've tried variations of [] and (), with and without alpha (3 or 4 values), and with various values ranging from 0 to 255. They all have failed so it seems i'm doing something fundamentally wrong.


Traceback (most recent call last):
  File "makecolortable.py", line 13, in <module>
    c.CreateColorRamp(1,n,65535,m)
  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1117, in CreateColorRamp
    return _gdal.ColorTable_CreateColorRamp(self, *args)
TypeError: not a sequence


Traceback (most recent call last):
  File "makecolortable.py", line 11, in <module>
    n = c.SetColorEntry(1,[0,0,0])
  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in SetColorEntry
    return _gdal.ColorTable_SetColorEntry(self, *args)
TypeError: Invalid values in ColorEntry sequence 



import numpy as np
import gdal

driver = gdal.GetDriverByName('GTiff')
dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)

band = dst_ds.GetRasterBand(1)
band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)

c = gdal.ColorTable(gdal.GCI_PaletteIndex)
n = c.SetColorEntry(1,[0,0,0])
m = c.SetColorEntry(65535,[0,0,0])
c.CreateColorRamp(1,n,65535,m)
band.SetColorTable(c)

--nix

On 2013/03/08, at 19:09, Frank Warmerdam <warmerdam at pobox.com> wrote:

> On Fri, Mar 8, 2013 at 2:05 PM, Robert Nix <robert at urban4m.com> wrote:
>> Let me adjust my question. I changed the color-table code to:
>> 
>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>> n = c.SetColorEntry(1,[255,128,0,0])
>> m = c.SetColorEntry(65535,[0,128,255,255])
>> c.CreateColorRamp(1,n,65535,m)
>> band.SetColorTable(c)
>> 
>> 
>> I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and
>> got 255) so i realized that maybe i need to create a ramp?
> 
> Robert,
> 
> I will note that the TIFF format does not support "short colormaps".
> So if the type of the pixel is 8bit byte then the color table will be
> exactly 256 entries even if you only put in one color.  Frr UInt16 it
> will be 65536.  Most other colormap supporting formats do not impose
> this.
> 
>> But the above code fails with:
>> 
>> Traceback (most recent call last):
>>  File "makecolortable.py", line 14, in <module>
>>    n = c.SetColorEntry(1,[255,128,0,0])
>>  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
>> SetColorEntry
>>    return _gdal.ColorTable_SetColorEntry(self, *args)
>> TypeError: Invalid values in ColorEntry sequence
>> 
>> 
>> That sequence appears correct as all four values meet the short requirement,
>> (i think this is the code that produces the error):
>> 
>> if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
>> 
>>  PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence
>> ");
> 
> 
> I think the problem is that you switched from tuples to lists (ie.
> from (r,g,b,a) to [r,g,b,a]).
> 
> Also, FYI, TIFF does not support alpha in colormaps.
> 
> Best regards,
> Frank
> 
>> --nix
>> 
>> On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:
>> 
>> Hi,
>> 
>> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as
>> follows:
>> 
>> import numpy as np
>> import gdal
>> 
>> driver = gdal.GetDriverByName('GTiff')
>> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>> 
>> band = dst_ds.GetRasterBand(1)
>> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>> 
>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>> c.SetColorEntry(1,(255,127,0,63))
>> band.SetColorTable(c)
>> 
>> a = np.random.randint(1,10,size=(100,100))
>> band.WriteArray(a)
>> 
>> dst_ds = None
>> 
>> 
>> The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535
>> color table entries:
>> 
>> Driver: GTiff/GeoTIFF
>> Files: testcolor.tif
>>       testcolor.tif.aux.xml
>> Size is 100, 100
>> Coordinate System is `'
>> Image Structure Metadata:
>>  INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  100.0)
>> Upper Right (  100.0,    0.0)
>> Lower Right (  100.0,  100.0)
>> Center      (   50.0,   50.0)
>> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>>  Color Table (RGB with 65536 entries)
>>    0: 1,0,0,255
>>    1: 1,0,0,255
>>    2: 0,0,0,255
>>    3: 0,0,0,255
>> ...
>>  65533: 0,0,0,255
>>  65534: 0,0,0,255
>>  65535: 0,0,0,255
>> 
>> 
>> What's going on ? besides the fact that maybe i'm not understanding
>> color-tables? If it's clear i don't understand, is there a good resource for
>> understanding color-tables? Or must I go learn the source code (which i
>> really don't have to do)?
>> 
>> Thanks
>> --nix
>> 
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/c485579e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130308/c485579e/attachment.bin>

From even.rouault at mines-paris.org  Fri Mar  8 23:12:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 9 Mar 2013 08:12:48 +0100
Subject: [gdal-dev] How to re-register a driver
In-Reply-To: <513A8E77.9030005@windstream.net>
References: <513A8E77.9030005@windstream.net>
Message-ID: <201303090812.48217.even.rouault@mines-paris.org>

Le samedi 09 mars 2013 02:20:55, Allen Kempe a ?crit :
> In my application, I would like to be able to programatically specify
> which driver to use when opening a GDALDataset when more than one driver
> can process the file. To do this, I have deregistered the drivers that I
> don't want to use. The GetGDALDriverManager-::DeregisterDriver()
> function does the trick.
> 
> The problem I have is being able to reregister the drivers that I
> deregistered above. First of all, in order to register a driver, you
> need a handle to it. It would seem that GetDriverByName should do the
> trick but it returns NULL if the driver was previously deregistered.
> Looking at the GDALDriverrManager code, it is easy to see why this is as
> GDALDriver manager only searches the currently enabled drivers to get
> its handle.
> 
> I then thought that calling GDALDriverManager::AutoloadDrivers() would
> reinitialise the driver list but it does not return the driver that has
> been deregistered.  It would seem that GDALRegisterDriver would work but
> it requires a handle to the driver which as I stated above, cannot be
> obtained once a driver has been deregistered.
> 
> So, how does one get a handle to a deregistered driver or alternatively,
> how can GDALDriverManager::AutoloadDrivers be made to reconstruct the
> driver list with all the currently configured drivers?
> 
> It seems that GDALDriverManager::RegisterDriver is a useless function
> since there is no way to get a handle to a previously deregistered driver.

Keep the handle of the driver that your deregister in some map, list, etc... 
and reuse it wen you want to reregister the driver.

Or call again GDALAllRegister() that wil register again all drivers.

Or call GDALRegister_XXXX().

From jgomezdans at gmail.com  Sat Mar  9 05:54:31 2013
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Sat, 9 Mar 2013 13:54:31 +0000
Subject: [gdal-dev] Efficient access to large multiband files
Message-ID: <CAMWde5qr0gDtyigSw4NDDXaZVjmsK+isB93H2F6AN+=NhNHOHw@mail.gmail.com>

Hi,
I usually process large multiband datasets (typically 2000*2000*1000 in x,y
and no. Bands ). I've been using VRT for this but sometimes that is too
much for our NFS disk setup and timeouts looking up the individual files
that make up the VRT break my programs.

So I'm thinking of converting to a real format. My question is what should
I choose given that I'll use spatial subsets containing contiguous bands
(say 256*256*300)? Band interleaving, pixel interleaving? Also I wouldn't
mind a compressed format. Will BigTIFF with a few extra config options be
enough?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130309/e234dd61/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Mar  9 06:06:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 9 Mar 2013 15:06:29 +0100
Subject: [gdal-dev] Efficient access to large multiband files
In-Reply-To: <CAMWde5qr0gDtyigSw4NDDXaZVjmsK+isB93H2F6AN+=NhNHOHw@mail.gmail.com>
References: <CAMWde5qr0gDtyigSw4NDDXaZVjmsK+isB93H2F6AN+=NhNHOHw@mail.gmail.com>
Message-ID: <201303091506.29376.even.rouault@mines-paris.org>

Le samedi 09 mars 2013 14:54:31, Jose Gomez-Dans a ?crit :
> Hi,
> I usually process large multiband datasets (typically 2000*2000*1000 in x,y
> and no. Bands ). I've been using VRT for this but sometimes that is too
> much for our NFS disk setup and timeouts looking up the individual files
> that make up the VRT break my programs.
> 
> So I'm thinking of converting to a real format. My question is what should
> I choose given that I'll use spatial subsets containing contiguous bands
> (say 256*256*300)? Band interleaving, pixel interleaving? Also I wouldn't
> mind a compressed format. Will BigTIFF with a few extra config options be
> enough?

You can try a pixel-interleaved tiled BigTIFF indeed. So use -co TILED=YES 
when creating it. Pixel interleaving is the default . For compression, you can 
for example try -co COMPRESS=DEFLATE .

> 
> Thanks!
> Jose

From allenck at windstream.net  Sat Mar  9 07:28:13 2013
From: allenck at windstream.net (Allen C Kempe)
Date: Sat, 09 Mar 2013 10:28:13 -0500
Subject: [gdal-dev] How to re-register a driver
In-Reply-To: <201303090812.48217.even.rouault@mines-paris.org>
References: <513A8E77.9030005@windstream.net>
	<201303090812.48217.even.rouault@mines-paris.org>
Message-ID: <513B550D.40404@windstream.net>

On 3/9/2013 2:12 AM, Even Rouault wrote:
> Le samedi 09 mars 2013 02:20:55, Allen Kempe a ?crit :
>> In my application, I would like to be able to programatically specify
>> which driver to use when opening a GDALDataset when more than one driver
>> can process the file. To do this, I have deregistered the drivers that I
>> don't want to use. The GetGDALDriverManager-::DeregisterDriver()
>> function does the trick.
>>
>> The problem I have is being able to reregister the drivers that I
>> deregistered above. First of all, in order to register a driver, you
>> need a handle to it. It would seem that GetDriverByName should do the
>> trick but it returns NULL if the driver was previously deregistered.
>> Looking at the GDALDriverrManager code, it is easy to see why this is as
>> GDALDriver manager only searches the currently enabled drivers to get
>> its handle.
>>
>> I then thought that calling GDALDriverManager::AutoloadDrivers() would
>> reinitialise the driver list but it does not return the driver that has
>> been deregistered.  It would seem that GDALRegisterDriver would work but
>> it requires a handle to the driver which as I stated above, cannot be
>> obtained once a driver has been deregistered.
>>
>> So, how does one get a handle to a deregistered driver or alternatively,
>> how can GDALDriverManager::AutoloadDrivers be made to reconstruct the
>> driver list with all the currently configured drivers?
>>
>> It seems that GDALDriverManager::RegisterDriver is a useless function
>> since there is no way to get a handle to a previously deregistered driver.
> Keep the handle of the driver that your deregister in some map, list, etc...
> and reuse it wen you want to reregister the driver.
>
> Or call again GDALAllRegister() that wil register again all drivers.
>
> Or call GDALRegister_XXXX().
I had previously tried saving the handle as you suggested but that 
resulted in a segmentation fault. However, the call to GDALAllRegister 
accomplishes what I want to do.

Thanks!

From robert at urban4m.com  Sun Mar 10 09:43:54 2013
From: robert at urban4m.com (Robert Nix)
Date: Sun, 10 Mar 2013 12:43:54 -0400
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
	<C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
	<CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>
	<8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>
Message-ID: <DFA3B41F-7411-410B-AA3A-7B22D6752F94@urban4m.com>

Maybe someone can just show me a working python example of how to create a color table in a tiff using gdal?

Here's what i've tried. It seems all the "Invalid value" errors are the closest to success.

c1 = c.SetColorEntry(1,"1,2")
TypeError: Invalid values in ColorEntry sequence 

c1 = c.SetColorEntry(1,"1,2,3")
TypeError: Invalid values in ColorEntry sequence 

c1 = c.SetColorEntry(1,[255,128,0,0])
TypeError: Invalid values in ColorEntry sequence 

c1 = c.SetColorEntry(1,[1,1,1,1])
TypeError: Invalid values in ColorEntry sequence 

from array import array
c1 = c.SetColorEntry(1,array("h",[255,128,0,0]))
TypeError: Invalid values in ColorEntry sequence 

c1 = c.SetColorEntry(1,{"c1":255,"c2":128,"c3":0,"c4":0})
TypeError: not a sequence

c1 = c.SetColorEntry(1,(255,128,0,0))
TypeError: not a sequence

c1 = c.SetColorEntry(1,"255,128,0")
TypeError: ColorEntry sequence too long

c1 = c.SetColorEntry(1,"1")
TypeError: ColorEntry sequence too short

c1 = c.SetColorEntry(1,1,1)
TypeError: ColorTable_SetColorEntry() takes exactly 3 arguments (4 given)

c1 = c.SetColorEntry(1,1)
TypeError: not a sequence

c1 = c.SetColorEntry(1,struct.pack("hhh",1,1,1))
TypeError: ColorEntry sequence too long



What is GDALColorEntry expecting and how to produce this from python but, maybe more importantly, why isn't it obvious? It seems like most of the above should just work.

According to the GDALColorEntry code below, it myst be a tuple of 3 or 4 short ints. 

%typemap(in) GDALColorEntry* (GDALColorEntry ce)
{
  /* %typemap(in) GDALColorEntry* */
   ce.c4 = 255;
  if (! PySequence_Check($input) ) {
    PyErr_SetString(PyExc_TypeError, "not a sequence");
    SWIG_fail;
  }
   int size = PySequence_Size($input);
   if ( size > 4 ) {
     PyErr_SetString(PyExc_TypeError, "ColorEntry sequence too long");
     SWIG_fail;
   }
   if ( size < 3 ) {
     PyErr_SetString(PyExc_TypeError, "ColorEntry sequence too short");
     SWIG_fail;
   }
   if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
     PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence ");
     SWIG_fail;
   }
   $1 = &ce;
}


--nix

On Mar 8, 2013, at 22:52, robert <robert at urban4m.com> wrote:

> Frank,
> 
> Thanks for the response.
> 
> I've tried variations of [] and (), with and without alpha (3 or 4 values), and with various values ranging from 0 to 255. They all have failed so it seems i'm doing something fundamentally wrong.
> 
> 
> Traceback (most recent call last):
>   File "makecolortable.py", line 13, in <module>
>     c.CreateColorRamp(1,n,65535,m)
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1117, in CreateColorRamp
>     return _gdal.ColorTable_CreateColorRamp(self, *args)
> TypeError: not a sequence
> 
> 
> Traceback (most recent call last):
>   File "makecolortable.py", line 11, in <module>
>     n = c.SetColorEntry(1,[0,0,0])
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in SetColorEntry
>     return _gdal.ColorTable_SetColorEntry(self, *args)
> TypeError: Invalid values in ColorEntry sequence 
> 
> 
> 
> import numpy as np
> import gdal
> 
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
> 
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
> 
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> n = c.SetColorEntry(1,[0,0,0])
> m = c.SetColorEntry(65535,[0,0,0])
> c.CreateColorRamp(1,n,65535,m)
> band.SetColorTable(c)
> 
> --nix
> 
> On 2013/03/08, at 19:09, Frank Warmerdam <warmerdam at pobox.com> wrote:
> 
>> On Fri, Mar 8, 2013 at 2:05 PM, Robert Nix <robert at urban4m.com> wrote:
>>> Let me adjust my question. I changed the color-table code to:
>>> 
>>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>>> n = c.SetColorEntry(1,[255,128,0,0])
>>> m = c.SetColorEntry(65535,[0,128,255,255])
>>> c.CreateColorRamp(1,n,65535,m)
>>> band.SetColorTable(c)
>>> 
>>> 
>>> I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and
>>> got 255) so i realized that maybe i need to create a ramp?
>> 
>> Robert,
>> 
>> I will note that the TIFF format does not support "short colormaps".
>> So if the type of the pixel is 8bit byte then the color table will be
>> exactly 256 entries even if you only put in one color.  Frr UInt16 it
>> will be 65536.  Most other colormap supporting formats do not impose
>> this.
>> 
>>> But the above code fails with:
>>> 
>>> Traceback (most recent call last):
>>>  File "makecolortable.py", line 14, in <module>
>>>    n = c.SetColorEntry(1,[255,128,0,0])
>>>  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
>>> SetColorEntry
>>>    return _gdal.ColorTable_SetColorEntry(self, *args)
>>> TypeError: Invalid values in ColorEntry sequence
>>> 
>>> 
>>> That sequence appears correct as all four values meet the short requirement,
>>> (i think this is the code that produces the error):
>>> 
>>> if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
>>> 
>>>  PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence
>>> ");
>> 
>> 
>> I think the problem is that you switched from tuples to lists (ie.
>> from (r,g,b,a) to [r,g,b,a]).
>> 
>> Also, FYI, TIFF does not support alpha in colormaps.
>> 
>> Best regards,
>> Frank
>> 
>>> --nix
>>> 
>>> On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:
>>> 
>>> Hi,
>>> 
>>> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as
>>> follows:
>>> 
>>> import numpy as np
>>> import gdal
>>> 
>>> driver = gdal.GetDriverByName('GTiff')
>>> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>>> 
>>> band = dst_ds.GetRasterBand(1)
>>> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>>> 
>>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>>> c.SetColorEntry(1,(255,127,0,63))
>>> band.SetColorTable(c)
>>> 
>>> a = np.random.randint(1,10,size=(100,100))
>>> band.WriteArray(a)
>>> 
>>> dst_ds = None
>>> 
>>> 
>>> The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535
>>> color table entries:
>>> 
>>> Driver: GTiff/GeoTIFF
>>> Files: testcolor.tif
>>>       testcolor.tif.aux.xml
>>> Size is 100, 100
>>> Coordinate System is `'
>>> Image Structure Metadata:
>>>  INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (    0.0,    0.0)
>>> Lower Left  (    0.0,  100.0)
>>> Upper Right (  100.0,    0.0)
>>> Lower Right (  100.0,  100.0)
>>> Center      (   50.0,   50.0)
>>> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>>>  Color Table (RGB with 65536 entries)
>>>    0: 1,0,0,255
>>>    1: 1,0,0,255
>>>    2: 0,0,0,255
>>>    3: 0,0,0,255
>>> ...
>>>  65533: 0,0,0,255
>>>  65534: 0,0,0,255
>>>  65535: 0,0,0,255
>>> 
>>> 
>>> What's going on ? besides the fact that maybe i'm not understanding
>>> color-tables? If it's clear i don't understand, is there a good resource for
>>> understanding color-tables? Or must I go learn the source code (which i
>>> really don't have to do)?
>>> 
>>> Thanks
>>> --nix
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> 
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130310/517f5388/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130310/517f5388/attachment.bin>

From jan.heckman at gmail.com  Sun Mar 10 13:57:47 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sun, 10 Mar 2013 21:57:47 +0100
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
	<C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
	<CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>
	<8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>
Message-ID: <CAKMUAtBg0EJ7BmZDu6v=6+6k1O3ESvrT0K2EnDVs2ogocRtmeg@mail.gmail.com>

Robert,
Afaik, you need a three tuple for the color info. See e.g.
http://osgeo-org.1560.n6.nabble.com/gdal-dev-tiff-with-colortable-loses-alpha-values-td3747611.html
.
It has a line giving an apparently working SetColorEntry() call without
also using CreateColorRamp() which just complicates things here.
For tuples in python,
http://docs.python.org/release/1.5.1p1/tut/tuples.html gives
a useful explanation.
Hope this helps a bit,
Jan

On Sat, Mar 9, 2013 at 4:52 AM, robert <robert at urban4m.com> wrote:

> Frank,
>
> Thanks for the response.
>
> I've tried variations of [] and (), with and without alpha (3 or 4
> values), and with various values ranging from 0 to 255. They all have
> failed so it seems i'm doing something fundamentally wrong.
>
>
> Traceback (most recent call last):
>   File "makecolortable.py", line 13, in <module>
>     c.CreateColorRamp(1,n,65535,m)
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1117, in
> CreateColorRamp
>     return _gdal.ColorTable_CreateColorRamp(self, *args)
> TypeError: not a sequence
>
>
> Traceback (most recent call last):
>   File "makecolortable.py", line 11, in <module>
>     n = c.SetColorEntry(1,[0,0,0])
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
> SetColorEntry
>     return _gdal.ColorTable_SetColorEntry(self, *args)
> TypeError: Invalid values in ColorEntry sequence
>
>
>
> import numpy as np
> import gdal
>
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> n = c.SetColorEntry(1,[0,0,0])
> m = c.SetColorEntry(65535,[0,0,0])
> c.CreateColorRamp(1,n,65535,m)
> band.SetColorTable(c)
>
>
> --nix
>
> On 2013/03/08, at 19:09, Frank Warmerdam <warmerdam at pobox.com> wrote:
>
> On Fri, Mar 8, 2013 at 2:05 PM, Robert Nix <robert at urban4m.com> wrote:
>
> Let me adjust my question. I changed the color-table code to:
>
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> n = c.SetColorEntry(1,[255,128,0,0])
> m = c.SetColorEntry(65535,[0,128,255,255])
> c.CreateColorRamp(1,n,65535,m)
> band.SetColorTable(c)
>
>
> I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and
> got 255) so i realized that maybe i need to create a ramp?
>
>
> Robert,
>
> I will note that the TIFF format does not support "short colormaps".
> So if the type of the pixel is 8bit byte then the color table will be
> exactly 256 entries even if you only put in one color.  Frr UInt16 it
> will be 65536.  Most other colormap supporting formats do not impose
> this.
>
> But the above code fails with:
>
> Traceback (most recent call last):
>  File "makecolortable.py", line 14, in <module>
>    n = c.SetColorEntry(1,[255,128,0,0])
>  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
> SetColorEntry
>    return _gdal.ColorTable_SetColorEntry(self, *args)
> TypeError: Invalid values in ColorEntry sequence
>
>
> That sequence appears correct as all four values meet the short
> requirement,
> (i think this is the code that produces the error):
>
> if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) )
> {
>
>  PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence
> ");
>
>
>
> I think the problem is that you switched from tuples to lists (ie.
> from (r,g,b,a) to [r,g,b,a]).
>
> Also, FYI, TIFF does not support alpha in colormaps.
>
> Best regards,
> Frank
>
> --nix
>
> On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:
>
> Hi,
>
> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as
> follows:
>
> import numpy as np
> import gdal
>
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> c.SetColorEntry(1,(255,127,0,63))
> band.SetColorTable(c)
>
> a = np.random.randint(1,10,size=(100,100))
> band.WriteArray(a)
>
> dst_ds = None
>
>
> The problem is that when i run gdalinfo on the testcolor.tif, it lists
> 65535
> color table entries:
>
> Driver: GTiff/GeoTIFF
> Files: testcolor.tif
>       testcolor.tif.aux.xml
> Size is 100, 100
> Coordinate System is `'
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  100.0)
> Upper Right (  100.0,    0.0)
> Lower Right (  100.0,  100.0)
> Center      (   50.0,   50.0)
> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>  Color Table (RGB with 65536 entries)
>    0: 1,0,0,255
>    1: 1,0,0,255
>    2: 0,0,0,255
>    3: 0,0,0,255
> ...
>  65533: 0,0,0,255
>  65534: 0,0,0,255
>  65535: 0,0,0,255
>
>
> What's going on ? besides the fact that maybe i'm not understanding
> color-tables? If it's clear i don't understand, is there a good resource
> for
> understanding color-tables? Or must I go learn the source code (which i
> really don't have to do)?
>
> Thanks
> --nix
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130310/3e47026a/attachment.html>

From robert at urban4m.com  Sun Mar 10 19:21:42 2013
From: robert at urban4m.com (Robert Nix)
Date: Sun, 10 Mar 2013 22:21:42 -0400
Subject: [gdal-dev] More information to understand ColorTables in
	GeoTiffs
In-Reply-To: <CAKMUAtBg0EJ7BmZDu6v=6+6k1O3ESvrT0K2EnDVs2ogocRtmeg@mail.gmail.com>
References: <9E15D3B8-46F1-4ADF-985E-959B2E9294A6@urban4m.com>
	<C40EE6A3-B7A0-4634-8CDE-3AE435C910C8@urban4m.com>
	<CA+YzLBd11ENese73WXPS=nW73QUZaFkk6X88RqqRxaigyGmTxw@mail.gmail.com>
	<8136F063-6197-45BE-89F4-C624155BA3F0@urban4m.com>
	<CAKMUAtBg0EJ7BmZDu6v=6+6k1O3ESvrT0K2EnDVs2ogocRtmeg@mail.gmail.com>
Message-ID: <DE9DC1F9-2002-49FA-9A1C-B0CD2F08960E@urban4m.com>

Thanks Jan (and Frank),

Problem 1 was that i had overlooked that SetColorEntry returns void.
Problem 2 was that i expected i needed to pass a ColorEntry to CreateColorRamp instead of just passing tuples.
Problem 3 was that i was creating the color table as gdal.ColorTable(gdal.GCI_PaletteIndex) but apparently it must be just gdal.ColorTable(). 
This one was a little confusing since http://www.gdal.org/classGDALColorTable.html#a49b488f77a913fffbdffb5e4cb6b9226 states:

> "? the passed in entry must match the color interpretation of the table to which it is being assigned."

which i took to mean that i needed to create the color table the same as i set the raster band's color interpretation, i.e:

	band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)

Anyway, having those three problems all at the same time was confusing the issue.

So, this works:

	ds = driver.Create('ct.tif', 100, 100, 1, gdal.GDT_Byte)
	band = ds.GetRasterBand(1)
	band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)

	c = gdal.ColorTable()
	c.CreateColorRamp(0,(0,0,0),127,(255,0,0))
	c.CreateColorRamp(128,(0,0,0),255,(0,0,255))
	band.SetColorTable(c)

	band.WriteArray(m)

	ds = None

Here's another thread for reference:
http://lists.osgeo.org/pipermail/gdal-dev/2012-September/034142.html

Thanks,
--nix

On Mar 10, 2013, at 16:57, Jan Heckman <jan.heckman at gmail.com> wrote:

> Robert,
> Afaik, you need a three tuple for the color info. See e.g. http://osgeo-org.1560.n6.nabble.com/gdal-dev-tiff-with-colortable-loses-alpha-values-td3747611.html.
> It has a line giving an apparently working SetColorEntry() call without also using CreateColorRamp() which just complicates things here.
> For tuples in python, http://docs.python.org/release/1.5.1p1/tut/tuples.html gives a useful explanation.
> Hope this helps a bit,
> Jan
> 
> On Sat, Mar 9, 2013 at 4:52 AM, robert <robert at urban4m.com> wrote:
> Frank,
> 
> Thanks for the response.
> 
> I've tried variations of [] and (), with and without alpha (3 or 4 values), and with various values ranging from 0 to 255. They all have failed so it seems i'm doing something fundamentally wrong.
> 
> 
> Traceback (most recent call last):
>   File "makecolortable.py", line 13, in <module>
>     c.CreateColorRamp(1,n,65535,m)
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1117, in CreateColorRamp
>     return _gdal.ColorTable_CreateColorRamp(self, *args)
> TypeError: not a sequence
> 
> 
> Traceback (most recent call last):
>   File "makecolortable.py", line 11, in <module>
>     n = c.SetColorEntry(1,[0,0,0])
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in SetColorEntry
>     return _gdal.ColorTable_SetColorEntry(self, *args)
> TypeError: Invalid values in ColorEntry sequence 
> 
> 
> 
> import numpy as np
> import gdal
> 
> driver = gdal.GetDriverByName('GTiff')
> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
> 
> band = dst_ds.GetRasterBand(1)
> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
> 
> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
> n = c.SetColorEntry(1,[0,0,0])
> m = c.SetColorEntry(65535,[0,0,0])
> c.CreateColorRamp(1,n,65535,m)
> band.SetColorTable(c)
> 
> --nix
> 
> On 2013/03/08, at 19:09, Frank Warmerdam <warmerdam at pobox.com> wrote:
> 
>> On Fri, Mar 8, 2013 at 2:05 PM, Robert Nix <robert at urban4m.com> wrote:
>>> Let me adjust my question. I changed the color-table code to:
>>> 
>>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>>> n = c.SetColorEntry(1,[255,128,0,0])
>>> m = c.SetColorEntry(65535,[0,128,255,255])
>>> c.CreateColorRamp(1,n,65535,m)
>>> band.SetColorTable(c)
>>> 
>>> 
>>> I discovered that the 64K colors are due to the UInt16 (tested GDT_Byte and
>>> got 255) so i realized that maybe i need to create a ramp?
>> 
>> Robert,
>> 
>> I will note that the TIFF format does not support "short colormaps".
>> So if the type of the pixel is 8bit byte then the color table will be
>> exactly 256 entries even if you only put in one color.  Frr UInt16 it
>> will be 65536.  Most other colormap supporting formats do not impose
>> this.
>> 
>>> But the above code fails with:
>>> 
>>> Traceback (most recent call last):
>>>  File "makecolortable.py", line 14, in <module>
>>>    n = c.SetColorEntry(1,[255,128,0,0])
>>>  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 1113, in
>>> SetColorEntry
>>>    return _gdal.ColorTable_SetColorEntry(self, *args)
>>> TypeError: Invalid values in ColorEntry sequence
>>> 
>>> 
>>> That sequence appears correct as all four values meet the short requirement,
>>> (i think this is the code that produces the error):
>>> 
>>> if ( !PyArg_ParseTuple( $input,"hhh|h", &ce.c1, &ce.c2, &ce.c3, &ce.c4 ) ) {
>>> 
>>>  PyErr_SetString(PyExc_TypeError, "Invalid values in ColorEntry sequence
>>> ");
>> 
>> 
>> I think the problem is that you switched from tuples to lists (ie.
>> from (r,g,b,a) to [r,g,b,a]).
>> 
>> Also, FYI, TIFF does not support alpha in colormaps.
>> 
>> Best regards,
>> Frank
>> 
>>> --nix
>>> 
>>> On Mar 8, 2013, at 16:35, Robert Nix <robert at urban4m.com> wrote:
>>> 
>>> Hi,
>>> 
>>> I'm trying to add a color table to a 1-band UInt16 GeoTiff with Python as
>>> follows:
>>> 
>>> import numpy as np
>>> import gdal
>>> 
>>> driver = gdal.GetDriverByName('GTiff')
>>> dst_ds = driver.Create('testcolor.tif', 100, 100, 1, gdal.GDT_UInt16)
>>> 
>>> band = dst_ds.GetRasterBand(1)
>>> band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
>>> 
>>> c = gdal.ColorTable(gdal.GCI_PaletteIndex)
>>> c.SetColorEntry(1,(255,127,0,63))
>>> band.SetColorTable(c)
>>> 
>>> a = np.random.randint(1,10,size=(100,100))
>>> band.WriteArray(a)
>>> 
>>> dst_ds = None
>>> 
>>> 
>>> The problem is that when i run gdalinfo on the testcolor.tif, it lists 65535
>>> color table entries:
>>> 
>>> Driver: GTiff/GeoTIFF
>>> Files: testcolor.tif
>>>       testcolor.tif.aux.xml
>>> Size is 100, 100
>>> Coordinate System is `'
>>> Image Structure Metadata:
>>>  INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (    0.0,    0.0)
>>> Lower Left  (    0.0,  100.0)
>>> Upper Right (  100.0,    0.0)
>>> Lower Right (  100.0,  100.0)
>>> Center      (   50.0,   50.0)
>>> Band 1 Block=100x40 Type=UInt16, ColorInterp=Palette
>>>  Color Table (RGB with 65536 entries)
>>>    0: 1,0,0,255
>>>    1: 1,0,0,255
>>>    2: 0,0,0,255
>>>    3: 0,0,0,255
>>> ...
>>>  65533: 0,0,0,255
>>>  65534: 0,0,0,255
>>>  65535: 0,0,0,255
>>> 
>>> 
>>> What's going on ? besides the fact that maybe i'm not understanding
>>> color-tables? If it's clear i don't understand, is there a good resource for
>>> understanding color-tables? Or must I go learn the source code (which i
>>> really don't have to do)?
>>> 
>>> Thanks
>>> --nix
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> 
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130310/09fc996c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130310/09fc996c/attachment-0001.bin>

From muratbeyhan28 at gmail.com  Mon Mar 11 01:35:10 2013
From: muratbeyhan28 at gmail.com (Murat Beyhan)
Date: Mon, 11 Mar 2013 10:35:10 +0200
Subject: [gdal-dev] translate polygon shape file
Message-ID: <CAEZYbZsCgko_R5gAhEExgkRznCtK-ZFR90rYRqjsH0a5-wPJ7A@mail.gmail.com>

Hi friends,

I have a polygon shape file which is including district of the city
It is latitude longitude data. And I try to transform it into UTM data
Is it possible to do using gdal.
I have googled it some but I could not find appropriate way to do.

The example of the data as follows.
Thanks for help....

Murat


Shapefile Type: Polygon   # of Shapes: 909

File Bounds: (      25.667,      35.820,0,0)
         to  (      44.869,      42.095,0,0)

Shape:0 (Polygon)  nVertices=156, nParts=1
  Bounds:(      34.833,      41.681, 0, 0)
      to (      35.213,      42.095, 0, 0)
     (      34.833,      41.691, 0, 0) Ring
     (      34.836,      41.702, 0, 0)
     (      34.838,      41.710, 0, 0)
     (      34.840,      41.719, 0, 0)
     (      34.842,      41.727, 0, 0)
     (      34.843,      41.736, 0, 0)
     (      34.845,      41.745, 0, 0)
     (      34.847,      41.753, 0, 0)
     (      34.851,      41.761, 0, 0)
     (      34.855,      41.770, 0, 0)

 ogrinfo -al tr_ilce_siniri_dd.shp|more

OGRFeature(tr_ilce_siniri_dd):908
  AREA (Real) =      0.013454
  PERIMETER (Real) =      0.538581
  ILCEDD_ (Real) =         910
  ILCEDD_ID (Real) =         931
  ILCE_AD (String) = MARMARA
  IL_KOD (Integer) = 10
  IL_ADI (String) = BALIKESIR
  POLYGON ((27.584554672241211 40.573818206787109,27.578886032104492
40.573699951171875,27.572929382324219 40.575611114501953,27.571149826049805
40.576972961425781,27.567972183227539 40.577934265136719,27.565275192260742
40.57794189453125,27.557207107543945 40.577068328857422,27.552865982055664
40.575958251953125,27.547388076782227 40.577339172363281,27.542625427246094
40.581424713134766,27.537281036376953 40.584625244140625,27.527751922607422
40.587604522705078,27.521244049072266 40.59442138671875,27.509946823120117
40.601016998291016,27.506982803344727 40.607612609863281,27.509469985961914
40.622554779052734,27.507785797119141 40.644989013671875,27.509929656982422
)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130311/0c987dfc/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Mar 11 03:40:51 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 11 Mar 2013 10:40:51 +0000 (UTC)
Subject: [gdal-dev] translate polygon shape file
References: <CAEZYbZsCgko_R5gAhEExgkRznCtK-ZFR90rYRqjsH0a5-wPJ7A@mail.gmail.com>
Message-ID: <loom.20130311T113342-409@post.gmane.org>

Murat Beyhan <muratbeyhan28 <at> gmail.com> writes:

> 
> Hi friends,I have a polygon shape file which is including district of the
cityIt is latitude longitude data. And I try to transform it into UTM data Is it
possible to do using gdal.

Read http://www.gdal.org/ogr2ogr.html and you will make it.

-Jukka Rahkonen-


From penorman at mac.com  Mon Mar 11 10:55:55 2013
From: penorman at mac.com (Paul Norman)
Date: Mon, 11 Mar 2013 10:55:55 -0700
Subject: [gdal-dev] Applying colour/contrast corrections to geotiffs
Message-ID: <008c01ce1e81$af015e40$0d041ac0$@mac.com>

I am generating a geotiff from a WMS source. I can do so from either PNG
requests or JPEG requests. The PNG requests have better contrast but are
4x-5x as slow.

I would like to compare the PNG and JPEG request results for a
representative area and develop a contrast correction which I can apply to
the JPEG request result to make it look like the PNG request result, but I
am not certain how to do this. I can get histograms and stats with gdalinfo.
I was thinking perhaps developing a LUT correction which I could then apply,
but I'm not sure how to match the images or apply the correction.

Other potentially relevant information

- The total image size is going to be 350GB-500GB, in a few slices

- The WMS server owners are okay with me scraping this, but won't give me
the original imagery file

- I will be eventually compressing the imagery as JPEG in TIFF

- The result will be used by mapserver, then sliced and served as TMS images
by mapproxy. If all else fails I can apply a LUT in mapserver.

- Screenshots of the jpeg request results vs. png request results are at
http://took.paulnorman.ca/images/databc_differences.png. The differences are
minimal, but I'd like to do this right

I'm after any suggestions for how to derive the adjustments needed as well
as how to apply them.

Thanks,

Paul Norman


From even.rouault at mines-paris.org  Mon Mar 11 12:12:58 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Mar 2013 20:12:58 +0100
Subject: [gdal-dev] Applying colour/contrast corrections to geotiffs
In-Reply-To: <008c01ce1e81$af015e40$0d041ac0$@mac.com>
References: <008c01ce1e81$af015e40$0d041ac0$@mac.com>
Message-ID: <201303112012.58452.even.rouault@mines-paris.org>

Le lundi 11 mars 2013 18:55:55, Paul Norman a ?crit :
> I am generating a geotiff from a WMS source. I can do so from either PNG
> requests or JPEG requests. The PNG requests have better contrast but are
> 4x-5x as slow.
> 
> I would like to compare the PNG and JPEG request results for a
> representative area and develop a contrast correction which I can apply to
> the JPEG request result to make it look like the PNG request result, but I
> am not certain how to do this. I can get histograms and stats with
> gdalinfo. I was thinking perhaps developing a LUT correction which I could
> then apply, but I'm not sure how to match the images or apply the
> correction.

I doubt that any correction/transformation can recover the lost information. 
JPEG is a lossy compression format. You basically loose the high frequencies 
of the image. I can't see how you can recover them, unless perhaps some 
specialized transformation like edge enhancing to remove the bluring effect of 
JPEG. I would expect the histogram and stats of JPEG and PNG to be fairly 
similar. The differences should be much subtle and shown by more advanced 
indicators.

> 
> Other potentially relevant information
> 
> - The total image size is going to be 350GB-500GB, in a few slices
> 
> - The WMS server owners are okay with me scraping this, but won't give me
> the original imagery file
> 
> - I will be eventually compressing the imagery as JPEG in TIFF

Well, then there's very little interest in trying to "correct" the JPEG tiles, 
since you'll again have a lossy transformation when you will transform in 
JPEG-in-TIFF that should cause the same kind of loss as introduced by the JPEG 
output of the WMS server.

Note: in GDAL 1.10, I've introduced in the GeoTIFF driver an optimization that 
will take the JPEG coefficients of a JPEG dataset and put them as a JPEG-in-TIFF 
without doing any decompression/decompression, so preserving exactly the 
quality of the source JPEG (and being much faster)

This is accomplished by : gdal_translate my.jpeg my.tif -co COMPRESS=JPEG
(if you add -co QUALITY=xxx , or some other options, then the optimization 
will not be triggered)

Note that it currently only works with a single JPEG image, not a VRT of 
several JPEG for example.

> 
> - The result will be used by mapserver, then sliced and served as TMS
> images by mapproxy. If all else fails I can apply a LUT in mapserver.
> 
> - Screenshots of the jpeg request results vs. png request results are at
> http://took.paulnorman.ca/images/databc_differences.png. The differences
> are minimal, but I'd like to do this right

Honestly, I can't detect the differences with normal zooming. But my eyes are 
perhaps not the best ones.

> 
> I'm after any suggestions for how to derive the adjustments needed as well
> as how to apply them.
> 
> Thanks,
> 
> Paul Norman
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From subscriber at linuxmail.org  Mon Mar 11 12:30:37 2013
From: subscriber at linuxmail.org (Nick)
Date: Mon, 11 Mar 2013 15:30:37 -0400
Subject: [gdal-dev] A few questions for a new user.
Message-ID: <20130311193037.150090@gmx.com>

Hello all, I am using the Java bindings on a Windows 7 machine. I am trying to do my first conversion of a file based on the API Tutorial and the sample java files.

1) How does gdal.Open() convert the ingested data into a Dataset object? I've looked at the Javadocs and API listed, but I cannot find code for that method to explain this.

2) Is there a source file for the java bindings that has explicit code for the classes and methods of gdal that I can view?


I've been studying the GDALtest.java http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/GDALtest.java  sample code file. It takes a selected image from the desktop and uses gdal.Open() to convert it to a Dataset and then converts that Dataset into a BufferedImage object.

I am trying to figure out how to get the Dataset object I have and just create a file with the same data as the one I opened. Then I am goiing to try and convert it to a different format.

I followed the API Tutorial http://www.gdal.org/gdal_tutorial.html  all the way to the section on using Create() and CreateCopy() methods. But then I don't know what to do with the new Dataset object I have. There must be a way to get it in the right data object that Java needs to write an image file.

Any help would be greatly appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130311/8fe99639/attachment.html>

From allenck at windstream.net  Mon Mar 11 13:21:50 2013
From: allenck at windstream.net (Allen Kempe)
Date: Mon, 11 Mar 2013 16:21:50 -0400
Subject: [gdal-dev] Gdal Asynchronous IO
Message-ID: <513E3CDE.8020107@windstream.net>

In Rfc 24: GDAL Progressive Data Support it says that the metadata for a 
driver will specify metadata item "DCAP_ASYNCIO" as yes if the driver 
supports asynchronous IO. So, code like this should retrieve this option:
const char* s_asyncio = drv->GetMetadataItem("DCAP_ASYNCIO");
However, I have been unable to find any drivers that return "Yes".

So, is this the correct way to check whether a driver supports 
asynchronous io?
Are there any drivers that currently support this besides Kadaku which I 
don't have?


    Allen Kempe

http://acksoft.dyndns.biz/PictureGallery
298 W. Audubon Drive
Shepherdsville, KY 40165
+1 502 543-3438

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130311/31caa7e4/attachment.html>

From even.rouault at mines-paris.org  Mon Mar 11 13:34:59 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Mar 2013 21:34:59 +0100
Subject: [gdal-dev] Gdal Asynchronous IO
In-Reply-To: <513E3CDE.8020107@windstream.net>
References: <513E3CDE.8020107@windstream.net>
Message-ID: <201303112134.59506.even.rouault@mines-paris.org>

Le lundi 11 mars 2013 21:21:50, Allen Kempe a ?crit :
> In Rfc 24: GDAL Progressive Data Support it says that the metadata for a
> driver will specify metadata item "DCAP_ASYNCIO" as yes if the driver
> supports asynchronous IO. So, code like this should retrieve this option:
> const char* s_asyncio = drv->GetMetadataItem("DCAP_ASYNCIO");
> However, I have been unable to find any drivers that return "Yes".

Hum, grepping the GDAL code base, it seems that this metadata item has never 
been set in drivers implementing progressive rendering.

> 
> So, is this the correct way to check whether a driver supports
> asynchronous io?
> Are there any drivers that currently support this besides Kadaku which I
> don't have?

"grep -r BeginAsyncReader frmts/" shows that the only drivers supporting async 
io are JPIPKAK and ECW (with SDK 4.x and later)

> 
> 
>     Allen Kempe
> 
> http://acksoft.dyndns.biz/PictureGallery
> 298 W. Audubon Drive
> Shepherdsville, KY 40165
> +1 502 543-3438

From penorman at mac.com  Mon Mar 11 13:45:07 2013
From: penorman at mac.com (Paul Norman)
Date: Mon, 11 Mar 2013 13:45:07 -0700
Subject: [gdal-dev] Applying colour/contrast corrections to geotiffs
In-Reply-To: <201303112012.58452.even.rouault@mines-paris.org>
References: <008c01ce1e81$af015e40$0d041ac0$@mac.com>
	<201303112012.58452.even.rouault@mines-paris.org>
Message-ID: <00d301ce1e99$5226ff00$f674fd00$@mac.com>

> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Monday, March 11, 2013 12:13 PM
> Subject: Re: [gdal-dev] Applying colour/contrast corrections to geotiffs
> 
> Le lundi 11 mars 2013 18:55:55, Paul Norman a ?crit :
> 
> I doubt that any correction/transformation can recover the lost
> information.
> JPEG is a lossy compression format. You basically loose the high
> frequencies of the image. I can't see how you can recover them, unless
> perhaps some specialized transformation like edge enhancing to remove
> the bluring effect of JPEG. I would expect the histogram and stats of
> JPEG and PNG to be fairly similar. The differences should be much subtle
> and shown by more advanced indicators.

I'm not speaking of the blurring of the JPEG request results. That is
unrecoverable, although mostly insignificant compared to the film grain in
this imagery.

If I plot the difference between the green histograms of the two images, I
see that there is a systematic shift of dark shades from about 40 to 52.
I've put the two histograms and the difference up at
http://took.paulnorman.ca/images/databc.pdf.

The difference is small enough (except at 0 and 255) that I may decide to
ignore it because of the optimizations you mentioned below. The differences
at 0 and 255 are likely artifacts off the edges of the imagery from JPEG
compression.

If I were forced to guess, I'd guess that somewhere a gamma setting is
getting misprocessed or dropped, but if this is the cause I bet it's in ESRI
mapserver, which I have no control over.

> Note: in GDAL 1.10, I've introduced in the GeoTIFF driver an
> optimization that will take the JPEG coefficients of a JPEG dataset and
> put them as a JPEG-in-TIFF without doing any
> decompression/decompression, so preserving exactly the quality of the
> source JPEG (and being much faster)
> 
> This is accomplished by : gdal_translate my.jpeg my.tif -co
> COMPRESS=JPEG (if you add -co QUALITY=xxx , or some other options, then
> the optimization will not be triggered)
> 
> Note that it currently only works with a single JPEG image, not a VRT of
> several JPEG for example.

Is there a way to verify if it is using this optimization? I'm not actually
feeding it a JPEG in the command line at any point, but the WMS driver is
downloading JPEGs as I am using a WMS source with
<ImageFormat>image/png</ImageFormat>, which might be similar to a VRT. I
don't know how this is treated internally.

My recollection is that it is theoretically possible to merge multiple jpeg
images without decompressing and recompressing, provided the images all lie
on the same block boundaries, where I believe a block is 8x8 pixels. I used
to have some image editing software that would crop JPEGs without
recompression if the cropping lied on the right lines.

If you run nearblack to go from one JPEG in TIFF to another JPEG in TIFF,
does it use this optimization for the RGB bands?


From even.rouault at mines-paris.org  Mon Mar 11 13:54:33 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Mar 2013 21:54:33 +0100
Subject: [gdal-dev] Applying colour/contrast corrections to geotiffs
In-Reply-To: <00d301ce1e99$5226ff00$f674fd00$@mac.com>
References: <008c01ce1e81$af015e40$0d041ac0$@mac.com>
	<201303112012.58452.even.rouault@mines-paris.org>
	<00d301ce1e99$5226ff00$f674fd00$@mac.com>
Message-ID: <201303112154.33427.even.rouault@mines-paris.org>

> Is there a way to verify if it is using this optimization?

$ gdal_translate byte.jpg byte.tif -co compress=jpeg --debug GTiff -q
GTiff: Using special copy mode from a JPEG dataset
GTiff: Setting JPEGCOLORMODE_RGB

> I'm not actually
> feeding it a JPEG in the command line at any point, but the WMS driver is
> downloading JPEGs as I am using a WMS source with
> <ImageFormat>image/png</ImageFormat>, which might be similar to a VRT. I
> don't know how this is treated internally.

It won't likely trigger the optimization. As I said, it is currently only 
implemented in the specific case of JPEG --> JPEG-in-TIFF CreateCopy(). Well, 
it actually also works in 
VRT_made_of_a_single_JPEG_without_any_fancy_transform_other_than_metadata_or_gereferencing_additions 
--> JPEG-in-TIFF.

> 
> My recollection is that it is theoretically possible to merge multiple jpeg
> images without decompressing and recompressing, provided the images all lie
> on the same block boundaries, where I believe a block is 8x8 pixels. I used
> to have some image editing software that would crop JPEGs without
> recompression if the cropping lied on the right lines.

Yes, this is indeed theoretically possible.

> 
> If you run nearblack to go from one JPEG in TIFF to another JPEG in TIFF,
> does it use this optimization for the RGB bands?

I don't see the interest of doing nearblack from JPEG-in-TIFF to JPEG-in-TIFF. 
Nearblack can be interesting from JPEG-in-TIFF to lossless-TIFF to eliminate 
near zero values at the edge of the imagery due to JPEG compression. But once 
you get again to JPEG-in-TIFF, the artifacts will come again.
And no, the above mentionned optimization could not work since nearblack 
changes imagery, and doesn't use the CreateCopy() API.


From penorman at mac.com  Mon Mar 11 14:42:01 2013
From: penorman at mac.com (Paul Norman)
Date: Mon, 11 Mar 2013 14:42:01 -0700
Subject: [gdal-dev] Applying colour/contrast corrections to geotiffs
In-Reply-To: <201303112154.33427.even.rouault@mines-paris.org>
References: <008c01ce1e81$af015e40$0d041ac0$@mac.com>
	<201303112012.58452.even.rouault@mines-paris.org>
	<00d301ce1e99$5226ff00$f674fd00$@mac.com>
	<201303112154.33427.even.rouault@mines-paris.org>
Message-ID: <00db01ce1ea1$4497cc90$cdc765b0$@mac.com>

> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Monday, March 11, 2013 1:55 PM
> Subject: Re: [gdal-dev] Applying colour/contrast corrections to geotiffs
> 
> > If you run nearblack to go from one JPEG in TIFF to another JPEG in
> > TIFF, does it use this optimization for the RGB bands?
> 
> I don't see the interest of doing nearblack from JPEG-in-TIFF to JPEG-
> in-TIFF.
> Nearblack can be interesting from JPEG-in-TIFF to lossless-TIFF to
> eliminate near zero values at the edge of the imagery due to JPEG
> compression. But once you get again to JPEG-in-TIFF, the artifacts will
> come again.

The issue I have the imagery has an irregular edge and the result of the WMS
server when transparency is off has either black boundaries for the very
outside or white ones for parts inside of that. It also has pixels within
the image which are 100% white where there was lens flare or snow on the
ground, so only the edge white areas are no data areas. nearblack is the
only software I'm aware of which deals with areas of a solid colour around a
geotiff.

I haven't given much thought to how process it after the download stage yet.
I will have some time to think about this because the download stage will
take so long. My first step is to download an area I can test with. I'd
welcome suggestions!


From p.halls at york.ac.uk  Tue Mar 12 01:10:46 2013
From: p.halls at york.ac.uk (Peter Halls)
Date: Tue, 12 Mar 2013 08:10:46 +0000
Subject: [gdal-dev] A few questions for a new user.
In-Reply-To: <20130311193037.150090@gmx.com>
References: <20130311193037.150090@gmx.com>
Message-ID: <CADEnnONtiJ83pQ5PaEZH-V6gDC=4o8NTCexaDmQHamuYW_RjBg@mail.gmail.com>

Nick,

     you are asking questions about the inner workings of GDAL/OGR, rather
than the Java API.  At the heart of GDAL/OGR is a library of C++ functions
that do the work.  So, when you open a dataset, the low level routines
obtain memory for the data structures, populate them and pass, as a result,
a pointer to these data structures - the dataset object.  If you want to
understand this part of the process, then you must study the C++ code or,
at the very least, the C++ Class definitions that are on the GDAL web pages.

Best wishes,

Peter

On 11 March 2013 19:30, Nick <subscriber at linuxmail.org> wrote:

> Hello all, I am using the Java bindings on a Windows 7 machine. I am
> trying to do my first conversion of a file based on the API Tutorial and
> the sample java files.
>
> 1) How does gdal.Open() convert the ingested data into a Dataset object?
> I've looked at the Javadocs and API listed, but I cannot find code for that
> method to explain this.
>
> 2) Is there a source file for the java bindings that has explicit code for
> the classes and methods of gdal that I can view?
>
>
> I've been studying the GDALtest.java<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/GDALtest.java>sample code file. It takes a selected image from the desktop and uses
> gdal.Open() to convert it to a Dataset and then converts that Dataset into
> a BufferedImage object.
>
> I am trying to figure out how to get the Dataset object I have and just
> create a file with the same data as the one I opened. Then I am goiing to
> try and convert it to a different format.
>
> I followed the API Tutorial <http://www.gdal.org/gdal_tutorial.html> all
> the way to the section on using Create() and CreateCopy() methods. But then
> I don't know what to do with the new Dataset object I have. There must be a
> way to get it in the right data object that Java needs to write an image
> file.
>
> Any help would be greatly appreciated.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130312/2b9ac9e4/attachment-0001.html>

From Sjur.A.Kolberg at sintef.no  Tue Mar 12 03:25:20 2013
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Tue, 12 Mar 2013 10:25:20 +0000
Subject: [gdal-dev] Difficulties reading a ODIM HDF5 file
Message-ID: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>

Hello,

I have problems reading a HDF5 ODIM file containing weather radar data.
ODIM is the Opera Data and Information Model (http://www.eumetnet.eu/opera)

The file is from the Norwegian met. Office www.met.no<http://www.met.no>.
It is nicely described in their GDAL 1.6.3.
I can also open the file in HDFView(2.6).

This is the error output I get from GDAL(1.9.0)/HDF5(1.8.5) on Windows.
The output from GDAL(1.6.3)/HDF5(1.8.4) on Linux is below.

Anyone knowing what causes this?

Regards,
Sjur Kolberg


Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.


C:\Devel_VS2010\gdal-1.9.0\distro\bin>gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
HDF5-DIAG: Error detected in HDF5 (1.8.5) thread 0:
  #000: ..\..\..\src\H5Gdeprec.c line 780 in H5Giterate(): group iteration failed
    major: Symbol table
    minor: Iteration failed
  #001: ..\..\..\src\H5G.c line 1534 in H5G_iterate(): error iterating over links
    major: Symbol table
    minor: Iteration failed
  #002: ..\..\..\src\H5Gobj.c line 695 in H5G_obj_iterate(): can't iterate over symbol table
    major: Symbol table
    minor: Iteration failed
  #003: ..\..\..\src\H5Gstab.c line 506 in H5G_stab_iterate(): unable to protect symbol table heap
    major: Symbol table
    minor: Protected metadata error
  #004: ..\..\..\src\H5HL.c line 460 in H5HL_protect(): unable to load heap prefix
    major: Heap
    minor: Unable to protect metadata
  #005: ..\..\..\src\H5AC.c line 1597 in H5AC_protect(): H5C_protect() failed.
    major: Object cache
    minor: Unable to protect metadata
  #006: ..\..\..\src\H5C.c line 3333 in H5C_protect(): can't load entry
    major: Object cache
    minor: Unable to load metadata into cache
  #007: ..\..\..\src\H5C.c line 8177 in H5C_load_entry(): unable to load entry
    major: Object cache
    minor: Unable to load metadata into cache
  #008: ..\..\..\src\H5HLcache.c line 342 in H5HL_prefix_load(): can't initialize free list
    major: Heap
    minor: Unable to initialize object
  #009: ..\..\..\src\H5HLcache.c line 165 in H5HL_fl_deserialize(): free block size is zero?
    major: Heap
    minor: Bad value
Driver: HDF5/Hierarchical Data Format Release 5
Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Size is 512, 512
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

C:\Devel_VS2010\gdal-1.9.0\distro\bin>gdalinfo -version
GDAL 1.9.0, released 2011/12/29

I built both HDF5 and GDAL using MS Visual Studio 2010.



And here the error output from GDAL(1.6.3)/HDF5(1.8.4) on Linux:


christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf

Driver: HDF5/Hierarchical Data Format Release 5

Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf

Size is 512, 512

Coordinate System is `'

Metadata:

  what:product=PPI

  what:prodpar=0.5

  what:quantity=DBZH

  what:gain=0.5

  what:offset=-32

  what:nodata=255

  what:undetect=0

  how:system=GEMA

  how:software=RAINBOW

  how:startepochs=1183248009

  how:endepochs=1183248039

  what:object=IMAGE

  what:version=H5rad 2.1

  what:date=20070701

  what:time=000039

  what:source=NOD:norsa

  what:source_wmoid=WMO:00

  what:source_plc=PLC:Rissa

  where:LL_lat=61.303

  where:LL_lon=5.70656

  where:UR_lat=65.5981

  where:UR_lon=15.4113

  where:projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=WGS84

  where:lat=63.69

  where:lon=10.204

  where:lat_sphere=63.5368

  where:lon_sphere=10.204

  where:height=620

  where:xsize=480

  where:ysize=480

  where:xscale=1000

  where:yscale=1000

Subdatasets:

  SUBDATASET_1_NAME=HDF5:"norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf"://dataset1/data1/data

  SUBDATASET_1_DESC=[480x480] //dataset1/data1/data (8-bit unsigned character) Corner Coordinates:

Upper Left  (    0.0,    0.0)

Lower Left  (    0.0,  512.0)

Upper Right (  512.0,    0.0)

Lower Right (  512.0,  512.0)

Center      (  256.0,  256.0)

christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo --version GDAL 1.6.3, released 2009/11/19 christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ h5ls --version

h5ls: Version 1.8.4





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130312/935383c7/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Type: application/x-hdf
Size: 15868 bytes
Desc: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130312/935383c7/attachment-0001.hdf>

From aboudreault at mapgears.com  Tue Mar 12 15:48:11 2013
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Tue, 12 Mar 2013 18:48:11 -0400
Subject: [gdal-dev] New Driver: DDS
In-Reply-To: <51372252.1000902@mapgears.com>
References: <51372252.1000902@mapgears.com>
Message-ID: <513FB0AB.9050305@mapgears.com>

After some discussions in the ticket and a few modifications to the 
driver. I think it is ok to commit. If there are no objection in the 
next days, I'll commit.

Regards,
Alan

On 13-03-06 06:02 AM, Alan Boudreault wrote:
> Hi,
>
> I'd like to get your hints on a new DDS driver. Please, take a look at
> my brief ticket and let me know if there is anything wrong or if it's ok
> to commit.
>
> http://trac.osgeo.org/gdal/ticket/5017
>
> Regards,
> Alan
>


-- 
Alan Boudreault
http://www.mapgears.com/

From kassies at gmail.com  Wed Mar 13 00:51:26 2013
From: kassies at gmail.com (Rutger)
Date: Wed, 13 Mar 2013 00:51:26 -0700 (PDT)
Subject: [gdal-dev] Difficulties reading a ODIM HDF5 file
In-Reply-To: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>
References: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>
Message-ID: <1363161086475-5040058.post@n6.nabble.com>

Hey,

For what its worth; it works fine on Windows for me, using verion:
GDAL 1.9.2, released 2012/10/08

Gdalinfo output looks equal to your Linux output, and gdal_translate is able
to convert the layer to a GeoTiff for example.

Im using the pre-build cmd utilities from  http://www.gisinternals.com/sdk/
<http://www.gisinternals.com/sdk/>  . Maybe you can peak over there to see
if there is any difference in building.

Regards,
Rutger



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Difficulties-reading-a-ODIM-HDF5-file-tp5039864p5040058.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yehil at rafael.co.il  Wed Mar 13 04:55:31 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 13 Mar 2013 13:55:31 +0200
Subject: [gdal-dev] KAKADU jpeg 2000 driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CB29DA4369@MAILBOXSERVER.rf.local>


Hi
Is it possible with the GDAL kakadu driver to specify the options of :

1.       Cuse_sop : to add SOP (start of packet) marker

2.       ORGtparts=R

Thanks
Yehiyam Livneh


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130313/55e437c3/attachment.html>

From warmerdam at pobox.com  Wed Mar 13 08:23:49 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 13 Mar 2013 08:23:49 -0700
Subject: [gdal-dev] KAKADU jpeg 2000 driver
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CB29DA4369@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CB29DA4369@MAILBOXSERVER.rf.local>
Message-ID: <CA+YzLBcs=ADZAgGpL=xddowOfUoqLzKN15f7-A60q_ue7Pz7WA@mail.gmail.com>

On Wed, Mar 13, 2013 at 4:55 AM, Livneh Yehiyam <yehil at rafael.co.il> wrote:

>  Hi****
>
> Is it possible with the GDAL kakadu driver to specify the options of :****
>
> **1.       **Cuse_sop : to add SOP (start of packet) marker****
>
> 2.       ORGtparts=R
>

Yehiyam,

Skimming the code in gdal/frmts/jp2kak/jp2kakdataset.cpp,
these do not seem to be supported parameters.  It looks like
it should be pretty easy to add them though.  If you look for
the two places that Qguard appears in that file it should be
fairly obvious how to add them.

Do you feel up to patching this yourself, and submitting
the change after testing?  If not, I could prepare the patch
if you are willing to test it.  Opening a ticket would be a good
first step.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130313/adaf1244/attachment.html>

From warmerdam at pobox.com  Wed Mar 13 08:45:42 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 13 Mar 2013 08:45:42 -0700
Subject: [gdal-dev] Difficulties reading a ODIM HDF5 file
In-Reply-To: <1363161086475-5040058.post@n6.nabble.com>
References: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>
	<1363161086475-5040058.post@n6.nabble.com>
Message-ID: <CA+YzLBeV-mqQj6Uud6bWQAMzDxzc1YMxKK-L+dn6O41HUQBhBg@mail.gmail.com>

Sjur / Rutger,

It also seems to work fine for me with trunk on linux.  I suspect the
problem is some sort of mixup at build time between versions of the
HDF include files or something like that.  Very hard to debug such a
thing remotely.

Best regards,
Frank

On Wed, Mar 13, 2013 at 12:51 AM, Rutger <kassies at gmail.com> wrote:
> Hey,
>
> For what its worth; it works fine on Windows for me, using verion:
> GDAL 1.9.2, released 2012/10/08
>
> Gdalinfo output looks equal to your Linux output, and gdal_translate is able
> to convert the layer to a GeoTiff for example.
>
> Im using the pre-build cmd utilities from  http://www.gisinternals.com/sdk/
> <http://www.gisinternals.com/sdk/>  . Maybe you can peak over there to see
> if there is any difference in building.
>
> Regards,
> Rutger
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Difficulties-reading-a-ODIM-HDF5-file-tp5039864p5040058.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From ivan.lucena at princeton-ma.us  Wed Mar 13 11:11:16 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed, 13 Mar 2013 13:11:16 -0500
Subject: [gdal-dev] =?iso-8859-1?q?Berkeley_DB_OGR_=22driver=22?=
Message-ID: <20130313181116.29960.qmail@s466.sureserver.com>

Hi there,

Although it is pretty simple to build support for Berkeley DB it is a little bit confusing since it used the SQLITE driver.

After downloading and installing the software, all we need to do is to change the nmake.opt (or nmake.local) variables to point to the Berkeley DB folders and rebuild GDAL.

SQLITE_INC  = -I"C:\Program Files (x86)\Oracle\Berkeley DB 11gR2 5.3.21\include" -DSPATIALITE_AMALGAMATION
SQLITE_LIB  = "C:\Program Files (x86)\Oracle\Berkeley DB 11gR2 5.3.21\lib\libdb_sql53.lib"

Berkeley DB comes with SQLite API out of the box. You can also add the Spatialite if you want/need too.

Does anybody have ever tried something like that before?

The problem is that you cannot have "both" SQLITE driver build at the same time and the "ogrinfo --formats" will not going to tell that this SQLite is using Berkeley DB. One would *not* be able to pass data from a SQLITE file to a Berkley DB in one ogr2ogr step.

The only solution I can think about would be that for Berkeley DB we would build the driver as plugin and add a compiler variable to tell that the SQLITE driver should be registered with another name. I believe that by building the driver as plugin we would avoid collision between the two SQLITE API that would happen if we build it on the same library (Thanks Evens for point that out).

Would that be a reasonable solution? Any suggestion?

Best regards,

Ivan





 



From yehil at rafael.co.il  Wed Mar 13 12:39:28 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 13 Mar 2013 21:39:28 +0200
Subject: [gdal-dev] KAKADU jpeg 2000 driver
In-Reply-To: <CA+YzLBcs=ADZAgGpL=xddowOfUoqLzKN15f7-A60q_ue7Pz7WA@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CB29DA4369@MAILBOXSERVER.rf.local>,
	<CA+YzLBcs=ADZAgGpL=xddowOfUoqLzKN15f7-A60q_ue7Pz7WA@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CB2AE3B12F@MAILBOXSERVER.rf.local>

Frank
Thanks for the quick reply. I think I will be able to make the changes, test and post a patch.

Yehiyam
________________________________________
From: fwarmerdam at gmail.com [fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam [warmerdam at pobox.com]
Sent: Wednesday, March 13, 2013 17:23
To: Livneh Yehiyam
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] KAKADU jpeg 2000 driver

On Wed, Mar 13, 2013 at 4:55 AM, Livneh Yehiyam <yehil at rafael.co.il<mailto:yehil at rafael.co.il><table align='center'><tr><td></td></tr></table>> wrote:

Hi
Is it possible with the GDAL kakadu driver to specify the options of :

1.       Cuse_sop : to add SOP (start of packet) marker

2.       ORGtparts=R

Yehiyam,

Skimming the code in gdal/frmts/jp2kak/jp2kakdataset.cpp,
these do not seem to be supported parameters.  It looks like
it should be pretty easy to add them though.  If you look for
the two places that Qguard appears in that file it should be
fairly obvious how to add them.

Do you feel up to patching this yourself, and submitting
the change after testing?  If not, I could prepare the patch
if you are willing to test it.  Opening a ticket would be a good
first step.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.

From jmckenna at gatewaygeomatics.com  Wed Mar 13 12:52:15 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 13 Mar 2013 16:52:15 -0300
Subject: [gdal-dev] Berkeley DB OGR "driver"
In-Reply-To: <20130313181116.29960.qmail@s466.sureserver.com>
References: <20130313181116.29960.qmail@s466.sureserver.com>
Message-ID: <5140D8EF.4050301@gatewaygeomatics.com>

Hi Ivan,

I'm interested, but I have no solution.

I also now compile BerkeleyDB on Windows, as part of the
MapServer/MapCache process, and I would be curious how to add BDB
support in my GDAL build.

Maybe we can start a BuildHints page for this as we travel down this
path? http://trac.osgeo.org/gdal/wiki/BuildHints

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 2013-03-13 3:11 PM, Ivan Lucena wrote:
> Hi there,
> 
> Although it is pretty simple to build support for Berkeley DB it is a little bit confusing since it used the SQLITE driver.
> 
> After downloading and installing the software, all we need to do is to change the nmake.opt (or nmake.local) variables to point to the Berkeley DB folders and rebuild GDAL.
> 
> SQLITE_INC  = -I"C:\Program Files (x86)\Oracle\Berkeley DB 11gR2 5.3.21\include" -DSPATIALITE_AMALGAMATION
> SQLITE_LIB  = "C:\Program Files (x86)\Oracle\Berkeley DB 11gR2 5.3.21\lib\libdb_sql53.lib"
> 
> Berkeley DB comes with SQLite API out of the box. You can also add the Spatialite if you want/need too.
> 
> Does anybody have ever tried something like that before?
> 
> The problem is that you cannot have "both" SQLITE driver build at the same time and the "ogrinfo --formats" will not going to tell that this SQLite is using Berkeley DB. One would *not* be able to pass data from a SQLITE file to a Berkley DB in one ogr2ogr step.
> 
> The only solution I can think about would be that for Berkeley DB we would build the driver as plugin and add a compiler variable to tell that the SQLITE driver should be registered with another name. I believe that by building the driver as plugin we would avoid collision between the two SQLITE API that would happen if we build it on the same library (Thanks Evens for point that out).
> 
> Would that be a reasonable solution? Any suggestion?
> 
> Best regards,
> 
> Ivan
> 
> 



From raghavendra at vizexperts.com  Wed Mar 13 21:18:17 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Wed, 13 Mar 2013 21:18:17 -0700 (PDT)
Subject: [gdal-dev] Finding if a source exists in particular block of a
	VRTRasterBand
Message-ID: <1363234697243-5040251.post@n6.nabble.com>

Hi, 

I have created a VRTDataset and added multiple simple sources to its
rasterbands in a function of my application. In another function i have the
instance of this VRTDataset and its VRTRasterbands and, Now i would like to
find for a particular offsets an dimensions if there exists a source in
VRTRasterband. 

I did not find any API functions to do this operations, so thought to  call
functions from the classes and tried the code like bellow: 

GDALRasterBand* preBand = dataSource->GetRasterBand(1); 
VRTSourcedRasterBand* Vrtband =
dynamic_cast<VRTSourcedRasterBand*>(preBand); 
int hasValidSource = 0; 
for(int srcIndex = 0; srcIndex < Vrtband->nSources; srcIndex++) 
{ 
VRTSimpleSource* simpleSource =
static_cast<VRTSimpleSource*>(Vrtband->papoSources[srcIndex]); 
hasValidSource = simpleSource->GetSrcDstWindow(xoff, yoff, read_size[0],
read_size[1],	          read_size[0], read_size[1],	  &nReqXOff, &nReqYOff,
&nReqXSize, &nReqYSize,	  &nOutXOff, &nOutYOff, &nOutXSize, &nOutYSize ); 
} 

To do this operation, the problem i am facing is VRTSimpleSource class is
not exported and so the function GetSrcDstWindow() is throwing a linker
errors. 

Is there any way to solve this issue? 
Or Is there any API function which does this operation? 

Thanks, 
Ryagz 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Finding-if-a-source-exists-in-particular-block-of-a-VRTRasterBand-tp5040251.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Mar 14 00:05:51 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 14 Mar 2013 08:05:51 +0100
Subject: [gdal-dev] Finding if a source exists in particular block of a
	VRTRasterBand
In-Reply-To: <1363234697243-5040251.post@n6.nabble.com>
References: <1363234697243-5040251.post@n6.nabble.com>
Message-ID: <201303140805.51952.even.rouault@mines-paris.org>

Le jeudi 14 mars 2013 05:18:17, ryagz a ?crit :
> Hi,
> 
> I have created a VRTDataset and added multiple simple sources to its
> rasterbands in a function of my application. In another function i have the
> instance of this VRTDataset and its VRTRasterbands and, Now i would like to
> find for a particular offsets an dimensions if there exists a source in
> VRTRasterband.
> 
> I did not find any API functions to do this operations, so thought to  call
> functions from the classes and tried the code like bellow:
> 
> GDALRasterBand* preBand = dataSource->GetRasterBand(1);
> VRTSourcedRasterBand* Vrtband =
> dynamic_cast<VRTSourcedRasterBand*>(preBand);
> int hasValidSource = 0;
> for(int srcIndex = 0; srcIndex < Vrtband->nSources; srcIndex++)
> {
> VRTSimpleSource* simpleSource =
> static_cast<VRTSimpleSource*>(Vrtband->papoSources[srcIndex]);
> hasValidSource = simpleSource->GetSrcDstWindow(xoff, yoff, read_size[0],
> read_size[1],	          read_size[0], read_size[1],	  &nReqXOff, &nReqYOff,
> &nReqXSize, &nReqYSize,	  &nOutXOff, &nOutYOff, &nOutXSize, &nOutYSize );
> }
> 
> To do this operation, the problem i am facing is VRTSimpleSource class is
> not exported and so the function GetSrcDstWindow() is throwing a linker
> errors.
> 
> Is there any way to solve this issue?
> Or Is there any API function which does this operation?

You can look at the gdallocationinfo source code to see how it manages to 
retrieve the source file :

$ gdallocationinfo byte.vrt 0 0
Report:
  Location: (0P,0L)
  Band 1:
    <LocationInfo><File>/home/even/gdal/svn/trunk/gdal/byte.tif</File></LocationInfo>
    Value: 110

Migth require GDAL 1.9 at least.

> 
> Thanks,
> Ryagz
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Finding-if-a-source-exists-in-particul
> ar-block-of-a-VRTRasterBand-tp5040251.html Sent from the GDAL - Dev mailing
> list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From petern at pembrokeshirecoast.org.uk  Thu Mar 14 05:22:10 2013
From: petern at pembrokeshirecoast.org.uk (Pete)
Date: Thu, 14 Mar 2013 05:22:10 -0700 (PDT)
Subject: [gdal-dev] Mapinfo --> postgis db using ogr2ogr,
	failing to overwrite
In-Reply-To: <CAMKgpOYFgNtftKN1OMobtd33RhtDn8k_2WEkx4TcORWSuNtvzw@mail.gmail.com>
References: <1313667474609-6699039.post@n2.nabble.com>
	<CAMKgpOYFgNtftKN1OMobtd33RhtDn8k_2WEkx4TcORWSuNtvzw@mail.gmail.com>
Message-ID: <1363263730131-5040341.post@n6.nabble.com>

Hi, Sorry to revive this post but I'm a non GIS type and have a similar
issue.

I'm trying to upload a mapinfo layer using WinSCP and Ogr2Ogr to work it's
magic to put it into the GeoStore, this via GeoServer ensures our Openlayers
map is up-to-date.

The trouble is that I get the exact same error IF the existing table being
overwritten has views based on it, otherwise the overwrite works fine.

The views go to make up the layers on the map that can be turned on/off.  I
really don't want to end up with a table for each of these !

Is this possible ?   is there a better way of doing it ?  

*The command we?re using *
call ogr2ogr -f "PostgreSQL" PG:"host=localhost user=pembs dbname=pembs
password=12345" ./WindTurbines.TAB  -nln public.windturbines -lco
OVERWRITE=YES -T_SRS EPSG:27700

*The Error we get*
failed with return code 1 and error message
ERROR 1: CREATE TABLE "public"."windturbines" ( OGC_FID SERIAL, CONSTRAINT
"windturbines_pk" PRIMARY KEY (OGC_FID) )
ERROR:  relation "windturbines" already exists
ERROR 1: Terminating translation prematurely after failed
translation of layer WindTurbines (use -skipfailures to skip errors).


Appologies again that i'm not a GIS bod so hope my lack of understanding
doesn't confuse you!

Pete



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Mapinfo-postgis-db-using-ogr2ogr-failing-to-overwrite-tp3743940p5040341.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Mar 14 05:33:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 14 Mar 2013 13:33:55 +0100
Subject: [gdal-dev] Mapinfo --> postgis db using ogr2ogr,
	failing to overwrite
In-Reply-To: <1363263730131-5040341.post@n6.nabble.com>
References: <1313667474609-6699039.post@n2.nabble.com>
	<CAMKgpOYFgNtftKN1OMobtd33RhtDn8k_2WEkx4TcORWSuNtvzw@mail.gmail.com>
	<1363263730131-5040341.post@n6.nabble.com>
Message-ID: <1363264435.5141c3b39b973@imp.free.fr>

Selon Pete <petern at pembrokeshirecoast.org.uk>:

> Hi, Sorry to revive this post but I'm a non GIS type and have a similar
> issue.
>
> I'm trying to upload a mapinfo layer using WinSCP and Ogr2Ogr to work it's
> magic to put it into the GeoStore, this via GeoServer ensures our Openlayers
> map is up-to-date.
>
> The trouble is that I get the exact same error IF the existing table being
> overwritten has views based on it, otherwise the overwrite works fine.
>
> The views go to make up the layers on the map that can be turned on/off.  I
> really don't want to end up with a table for each of these !
>
> Is this possible ?   is there a better way of doing it ?
>
> *The command we???re using *
> call ogr2ogr -f "PostgreSQL" PG:"host=localhost user=pembs dbname=pembs
> password=12345" ./WindTurbines.TAB  -nln public.windturbines -lco
> OVERWRITE=YES -T_SRS EPSG:27700
>
> *The Error we get*
> failed with return code 1 and error message
> ERROR 1: CREATE TABLE "public"."windturbines" ( OGC_FID SERIAL, CONSTRAINT
> "windturbines_pk" PRIMARY KEY (OGC_FID) )
> ERROR:  relation "windturbines" already exists
> ERROR 1: Terminating translation prematurely after failed
> translation of layer WindTurbines (use -skipfailures to skip errors).
>
>
> Appologies again that i'm not a GIS bod so hope my lack of understanding
> doesn't confuse you!

I guess that the -lco OVERWRITE=YES that cause a "DROP TABLE windturbines" must
fail because the table is referenced by the views.
One option, provided that the structure of the existing windturbines table is
compatible with the windturbines.tab file you want to inject into it, would be
to :

1) ogrinfo PG:"host=localhost..." -sql "DELETE FROM windturbines"
2) ogr2ogr -update -append PG:"host=localhost..."  ./WindTurbines.TAB -nln
public.windturbines

>
> Pete
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/Mapinfo-postgis-db-using-ogr2ogr-failing-to-overwrite-tp3743940p5040341.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From jefflacostegdal at gmail.com  Thu Mar 14 05:46:23 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Thu, 14 Mar 2013 08:46:23 -0400
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
Message-ID: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>

Hi,

'GDALFPolygonize' create polygons from a raster band into a vector file.
Can this function called from multiple threads safely ?

For ex. I have 10 raster files and would like to fire 10 threads. Every
thread opens a raster
and call GDALFPolygonize to generate a vector file in MapInfo format.

Would this be concurrent safe ?

Thanks

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/1ef6ab8a/attachment.html>

From Sjur.A.Kolberg at sintef.no  Thu Mar 14 05:48:07 2013
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Thu, 14 Mar 2013 12:48:07 +0000
Subject: [gdal-dev] Difficulties reading a ODIM HDF5 file
In-Reply-To: <CA+YzLBeV-mqQj6Uud6bWQAMzDxzc1YMxKK-L+dn6O41HUQBhBg@mail.gmail.com>
References: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>
	<1363161086475-5040058.post@n6.nabble.com>
	<CA+YzLBeV-mqQj6Uud6bWQAMzDxzc1YMxKK-L+dn6O41HUQBhBg@mail.gmail.com>
Message-ID: <BA73879899D42842BC5BBF1BFB9AF33F377DABB7@SINTEFEXMBX04.sintef.no>


Hello again!

Thanks for your help. I downloaded the pre-built GDAL binaries from Tamas Szekeres' www.gisinternals.com and managed to read the HDF5 file.

Almost.

And actually better with GDAL 1.7.3 than with GDAL 1.9.2, both downloaded prebuilt from www.gisinternals.com. 1.7.3 can read the projection info, 1.9.2 cannot. 

They also seem to handle metadata (and subdataset?) differently; 1.9.2 seem to attribute the first 7 metadata items to a dataset1, whereas 1.7.3 does not. 1.9.2 also finds the "Conventions" attribute.

None of the two detects the what:nodata attribute.

I can see that the corner coordinates are wrong, I'll discuss that with the provider.

But does anyone see what causes 1.9.2 to miss the refsystem?

Grateful for any clue. The attached file may be different from the one in the previous mail.

Sjur :-)



GDALINFO output from 1.9.2:, command window spawn from SDKShell.bat:

Setting environment for using the GDAL and MapServer tools.
Hiding the OCI plugin library.
C:\Devel_VS2010\GDAL-1.9.2>gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000
039Z.hdf
Driver: HDF5Image/HDF5 Dataset
Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Size is 480, 480
Coordinate System is `'
Metadata:
  Conventions=ODIM_H5/V2_1
  dataset1_what_gain=0.5
  dataset1_what_nodata=255
  dataset1_what_offset=-32
  dataset1_what_prodpar=0.5
  dataset1_what_product=PPI
  dataset1_what_quantity=DBZH
  dataset1_what_undetect=0
  how_endepochs=1180656039
  how_software=RAINBOW
  how_startepochs=1180656009
  how_system=GEMA
  what_date=20070601
  what_object=IMAGE
  what_source=NOD:norsa
  what_source_plc=PLC:Rissa
  what_source_wmoid=WMO:00
  what_time=000039
  what_version=H5rad 2.1
  where_height=620
  where_lat=63.69
  where_lat_sphere=63.536783
  where_LL_lat=61.303028
  where_LL_lon=5.70656
  where_lon=10.204
  where_lon_sphere=10.204
  where_projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=W
GS84
  where_UR_lat=65.59814
  where_UR_lon=15.411344
  where_xscale=1000
  where_xsize=480
  where_yscale=1000
  where_ysize=480
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  480.0)
Upper Right (  480.0,    0.0)
Lower Right (  480.0,  480.0)
Center      (  240.0,  240.0)
Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
  Metadata:
    dataset1_data1_data_CLASS=IMAGE
    dataset1_data1_data_IMAGE_VERSION=1.2

C:\Devel_VS2010\GDAL-1.9.2>




GDALINFO output from 1.7.3:, command window spawn from SDKShell.bat:

Setting environment for using the GDAL and MapServer tools.
Hiding the OCI plugin library.
C:\Devel_VS2010\GDAL-1.7.3>gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000
039Z.hdf
Driver: HDF5Image/HDF5 Dataset
Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Size is 480, 480
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Metadata:
  what:product=PPI
  what:prodpar=0.5
  what:quantity=DBZH
  what:gain=0.5
  what:offset=-32
  what:nodata=255
  what:undetect=0
  how:system=GEMA
  how:software=RAINBOW
  how:startepochs=1180656009
  how:endepochs=1180656039
  what:object=IMAGE
  what:version=H5rad 2.1
  what:date=20070601
  what:time=000039
  what:source=NOD:norsa
  what:source_wmoid=WMO:00
  what:source_plc=PLC:Rissa
  where:LL_lat=61.303
  where:LL_lon=5.70656
  where:UR_lat=65.5981
  where:UR_lon=15.4113
  where:projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=W
GS84
  where:lat=63.69
  where:lon=10.204
  where:lat_sphere=63.5368
  where:lon_sphere=10.204
  where:height=620
  where:xsize=480
  where:ysize=480
  where:xscale=1000
  where:yscale=1000
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  480.0)
Upper Right (  480.0,    0.0)
Lower Right (  480.0,  480.0)
Center      (  240.0,  240.0)
Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
  Metadata:
    data:CLASS=IMAGE
    data:IMAGE_VERSION=1.2

C:\Devel_VS2010\GDAL-1.7.3>



GDALINFO output from 1.7.3 on Linux at met.no, with h5ls: Version 1.8.7. This is equal to the result I get with GDAL 1.7.3 on Windows.

christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Driver: HDF5Image/HDF5 Dataset
Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Size is 480, 480
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Metadata:
  what:product=PPI
  what:prodpar=0.5
  what:quantity=DBZH
  what:gain=0.5
  what:offset=-32
  what:nodata=255
  what:undetect=0
  how:system=GEMA
  how:software=RAINBOW
  how:startepochs=1180656009
  how:endepochs=1180656039
  what:object=IMAGE
  what:version=H5rad 2.1
  what:date=20070601
  what:time=000039
  what:source=NOD:norsa
  what:source_wmoid=WMO:00
  what:source_plc=PLC:Rissa
  where:LL_lat=61.303
  where:LL_lon=5.70656
  where:UR_lat=65.5981
  where:UR_lon=15.4113
  where:projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=WGS84
  where:lat=63.69
  where:lon=10.204
  where:lat_sphere=63.5368
  where:lon_sphere=10.204
  where:height=620
  where:xsize=480
  where:ysize=480
  where:xscale=1000
  where:yscale=1000
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  480.0)
Upper Right (  480.0,    0.0)
Lower Right (  480.0,  480.0)
Center      (  240.0,  240.0)
Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
  Metadata:
    data:CLASS=IMAGE
    data:IMAGE_VERSION=1.2
christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ h5ls --version
h5ls: Version 1.8.7
christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo --version GDAL 1.7.3, released 2010/11/10




> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: 13. mars 2013 16:46
> To: Rutger
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Difficulties reading a ODIM HDF5 file
> 
> Sjur / Rutger,
> 
> It also seems to work fine for me with trunk on linux.  I suspect the problem
> is some sort of mixup at build time between versions of the HDF include files
> or something like that.  Very hard to debug such a thing remotely.
> 
> Best regards,
> Frank
> 
> On Wed, Mar 13, 2013 at 12:51 AM, Rutger <kassies at gmail.com> wrote:
> > Hey,
> >
> > For what its worth; it works fine on Windows for me, using verion:
> > GDAL 1.9.2, released 2012/10/08
> >
> > Gdalinfo output looks equal to your Linux output, and gdal_translate
> > is able to convert the layer to a GeoTiff for example.
> >
> > Im using the pre-build cmd utilities from
> > http://www.gisinternals.com/sdk/ <http://www.gisinternals.com/sdk/>  .
> > Maybe you can peak over there to see if there is any difference in building.
> >
> > Regards,
> > Rutger
> >
> >
> >
> > --
> > View this message in context:
> > http://osgeo-org.1560.n6.nabble.com/gdal-dev-Difficulties-reading-a-OD
> > IM-HDF5-file-tp5039864p5040058.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> --
> ---------------------------------------+--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
Type: application/x-hdf
Size: 15868 bytes
Desc: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/19d79748/attachment-0001.hdf>

From jmckenna at gatewaygeomatics.com  Thu Mar 14 06:14:51 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 14 Mar 2013 10:14:51 -0300
Subject: [gdal-dev] Berkeley DB OGR "driver"
In-Reply-To: <5141CA9B.7000708@princeton-ma.us>
References: <20130313181116.29960.qmail@s466.sureserver.com>
	<5140D8EF.4050301@gatewaygeomatics.com>
	<5141CA9B.7000708@princeton-ma.us>
Message-ID: <5141CD4B.4080506@gatewaygeomatics.com>

On 2013-03-14 10:03 AM, Ivan Lucena wrote:
> Hi Jeff,
> 
> Yes, once we figure out how to deal with the driver name issue I will
> write instruction to the GDAL Wiki.
> 
> But I am curious. How do use BDB on MapServer/MapCache? Do you use the
> SQLITE API or goes directly to the DBD API?
> 
> How do you compare BDB to SQLITE in terms of performance and functionality?

Hi Ivan,

I'm not the developer of MapCache so I can't fully answer your questions
(but maybe others lurking on this list can). Or we can switch this/your
exact questions to the MapServer-dev list.

For me on the Windows compile side of things, I am able to point to
SQLITE libs for sqlite tile output support for MapCache, or BDB libs for
BDB tile output support for MapCache.  I'm not aware of the magic in how
that happens, you'll have to discuss this more on MapServer-dev.

In terms of performance, I notice both are very fast (maybe BDB
faster?), I don't have exact numbers.  I believe SQLITE is limited to
2TB in size, and maybe BDB is not?  I can't remember this issue/rule.
BDB support in MapCache is still pretty new/most are not using this yet
I feel.

I did find and file an issue where BerkeleyDB tile caches created
through MapCache cannot be opened with the BDB dbsql.exe utility
(https://github.com/mapserver/mapcache/issues/58), but that is
unanswered.  The support for BDB is still very new.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From admin at michiganwxsystem.com  Thu Mar 14 06:11:38 2013
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Thu, 14 Mar 2013 09:11:38 -0400
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
Message-ID: <5141CC8A.2030101@michiganwxsystem.com>

I use GDALPolygonize.py to convert 8 in a row and have no problems

-----------------------------------------------------
-Jeff Lake K8JSL
MichiganWxSystem.com
AllisonHouse.com
TheWeatherCenter.net
GRLevelXStuff.com

On 3/14/2013 8:46, Jeff Lacoste wrote:
> Hi,
>
> 'GDALFPolygonize' create polygons from a raster band into a vector 
> file. Can this function called from multiple threads safely ?
>
> For ex. I have 10 raster files and would like to fire 10 threads. 
> Every thread opens a raster
> and call GDALFPolygonize to generate a vector file in MapInfo format.
>
> Would this be concurrent safe ?
>
> Thanks
>
> Jeff
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/4131bb62/attachment.html>

From jefflacostegdal at gmail.com  Thu Mar 14 07:45:18 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Thu, 14 Mar 2013 10:45:18 -0400
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <5141CC8A.2030101@michiganwxsystem.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
	<5141CC8A.2030101@michiganwxsystem.com>
Message-ID: <CAFOE_BfW08mbntY_6fKiLJea667vfZjeDU322Lymf-KsjmUXhQ@mail.gmail.com>

Thanks Jeff.

Being not familiar with python, i'm not sure if it start a new process each
time or not and hence it would be hiding any non thread safety issues.

I would like to use the API function 'GDALFPolygonize' directly from within
one process (.exe).

Jeff


On Thu, Mar 14, 2013 at 9:11 AM, Jeff Lake <admin at michiganwxsystem.com>wrote:

>  I use GDALPolygonize.py to convert 8 in a row and have no problems
>
> -----------------------------------------------------
> -Jeff Lake K8JSL
> MichiganWxSystem.com
> AllisonHouse.com
> TheWeatherCenter.net
> GRLevelXStuff.com
>
> On 3/14/2013 8:46, Jeff Lacoste wrote:
>
> Hi,
>
>  'GDALFPolygonize' create polygons from a raster band into a vector file.
> Can this function called from multiple threads safely ?
>
>  For ex. I have 10 raster files and would like to fire 10 threads. Every
> thread opens a raster
> and call GDALFPolygonize to generate a vector file in MapInfo format.
>
>  Would this be concurrent safe ?
>
>  Thanks
>
>  Jeff
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/b967f48d/attachment.html>

From warmerdam at pobox.com  Thu Mar 14 08:50:07 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 14 Mar 2013 08:50:07 -0700
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
Message-ID: <CA+YzLBeKtKE7eqAE7EGNawr9tF0gPud5oWYiHDoghFHmKLi1eg@mail.gmail.com>

Jeff,

I reviewed the polygonize code and I don't see any multi-threading
issues in it on quick inspection.

The algorithm does read from GDAL and write to OGR so it would also be
sensitive to issues with particular drivers.  The main GDAL drivers
(ie. GeoTIFF, MEM) should be fine.  For writing OGR drivers like
shapefile, or MEM should be ok.

I'm assuming each thread is writing to a distinct output OGR supported
datasource and layer.

No guarantees unfortunately.

Best regards,
Frank

On Thu, Mar 14, 2013 at 5:46 AM, Jeff Lacoste <jefflacostegdal at gmail.com> wrote:
> Hi,
>
> 'GDALFPolygonize' create polygons from a raster band into a vector file. Can
> this function called from multiple threads safely ?
>
> For ex. I have 10 raster files and would like to fire 10 threads. Every
> thread opens a raster
> and call GDALFPolygonize to generate a vector file in MapInfo format.
>
> Would this be concurrent safe ?
>
> Thanks
>
> Jeff
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From warmerdam at pobox.com  Thu Mar 14 08:53:32 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 14 Mar 2013 08:53:32 -0700
Subject: [gdal-dev] Difficulties reading a ODIM HDF5 file
In-Reply-To: <BA73879899D42842BC5BBF1BFB9AF33F377DABB7@SINTEFEXMBX04.sintef.no>
References: <BA73879899D42842BC5BBF1BFB9AF33F377DA749@SINTEFEXMBX04.sintef.no>
	<1363161086475-5040058.post@n6.nabble.com>
	<CA+YzLBeV-mqQj6Uud6bWQAMzDxzc1YMxKK-L+dn6O41HUQBhBg@mail.gmail.com>
	<BA73879899D42842BC5BBF1BFB9AF33F377DABB7@SINTEFEXMBX04.sintef.no>
Message-ID: <CA+YzLBc1rDPRs7wOuHQEhz8Vph0ZhcKU32SU_qo+chemzsQAag@mail.gmail.com>

Sjur,

Could you file a ticket on the metadata and projection issues, and
attach or point to the dataset?  I think these regressions deserve a
careful review and I don't want to lose the issue in ephemeral email.

Best regards,
Frank


On Thu, Mar 14, 2013 at 5:48 AM, Sjur Kolberg <Sjur.A.Kolberg at sintef.no> wrote:
>
> Hello again!
>
> Thanks for your help. I downloaded the pre-built GDAL binaries from Tamas Szekeres' www.gisinternals.com and managed to read the HDF5 file.
>
> Almost.
>
> And actually better with GDAL 1.7.3 than with GDAL 1.9.2, both downloaded prebuilt from www.gisinternals.com. 1.7.3 can read the projection info, 1.9.2 cannot.
>
> They also seem to handle metadata (and subdataset?) differently; 1.9.2 seem to attribute the first 7 metadata items to a dataset1, whereas 1.7.3 does not. 1.9.2 also finds the "Conventions" attribute.
>
> None of the two detects the what:nodata attribute.
>
> I can see that the corner coordinates are wrong, I'll discuss that with the provider.
>
> But does anyone see what causes 1.9.2 to miss the refsystem?
>
> Grateful for any clue. The attached file may be different from the one in the previous mail.
>
> Sjur :-)
>
>
>
> GDALINFO output from 1.9.2:, command window spawn from SDKShell.bat:
>
> Setting environment for using the GDAL and MapServer tools.
> Hiding the OCI plugin library.
> C:\Devel_VS2010\GDAL-1.9.2>gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000
> 039Z.hdf
> Driver: HDF5Image/HDF5 Dataset
> Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
> Size is 480, 480
> Coordinate System is `'
> Metadata:
>   Conventions=ODIM_H5/V2_1
>   dataset1_what_gain=0.5
>   dataset1_what_nodata=255
>   dataset1_what_offset=-32
>   dataset1_what_prodpar=0.5
>   dataset1_what_product=PPI
>   dataset1_what_quantity=DBZH
>   dataset1_what_undetect=0
>   how_endepochs=1180656039
>   how_software=RAINBOW
>   how_startepochs=1180656009
>   how_system=GEMA
>   what_date=20070601
>   what_object=IMAGE
>   what_source=NOD:norsa
>   what_source_plc=PLC:Rissa
>   what_source_wmoid=WMO:00
>   what_time=000039
>   what_version=H5rad 2.1
>   where_height=620
>   where_lat=63.69
>   where_lat_sphere=63.536783
>   where_LL_lat=61.303028
>   where_LL_lon=5.70656
>   where_lon=10.204
>   where_lon_sphere=10.204
>   where_projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=W
> GS84
>   where_UR_lat=65.59814
>   where_UR_lon=15.411344
>   where_xscale=1000
>   where_xsize=480
>   where_yscale=1000
>   where_ysize=480
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  480.0)
> Upper Right (  480.0,    0.0)
> Lower Right (  480.0,  480.0)
> Center      (  240.0,  240.0)
> Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
>   Metadata:
>     dataset1_data1_data_CLASS=IMAGE
>     dataset1_data1_data_IMAGE_VERSION=1.2
>
> C:\Devel_VS2010\GDAL-1.9.2>
>
>
>
>
> GDALINFO output from 1.7.3:, command window spawn from SDKShell.bat:
>
> Setting environment for using the GDAL and MapServer tools.
> Hiding the OCI plugin library.
> C:\Devel_VS2010\GDAL-1.7.3>gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000
> 039Z.hdf
> Driver: HDF5Image/HDF5 Dataset
> Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
> Size is 480, 480
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> Metadata:
>   what:product=PPI
>   what:prodpar=0.5
>   what:quantity=DBZH
>   what:gain=0.5
>   what:offset=-32
>   what:nodata=255
>   what:undetect=0
>   how:system=GEMA
>   how:software=RAINBOW
>   how:startepochs=1180656009
>   how:endepochs=1180656039
>   what:object=IMAGE
>   what:version=H5rad 2.1
>   what:date=20070601
>   what:time=000039
>   what:source=NOD:norsa
>   what:source_wmoid=WMO:00
>   what:source_plc=PLC:Rissa
>   where:LL_lat=61.303
>   where:LL_lon=5.70656
>   where:UR_lat=65.5981
>   where:UR_lon=15.4113
>   where:projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=W
> GS84
>   where:lat=63.69
>   where:lon=10.204
>   where:lat_sphere=63.5368
>   where:lon_sphere=10.204
>   where:height=620
>   where:xsize=480
>   where:ysize=480
>   where:xscale=1000
>   where:yscale=1000
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  480.0)
> Upper Right (  480.0,    0.0)
> Lower Right (  480.0,  480.0)
> Center      (  240.0,  240.0)
> Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
>   Metadata:
>     data:CLASS=IMAGE
>     data:IMAGE_VERSION=1.2
>
> C:\Devel_VS2010\GDAL-1.7.3>
>
>
>
> GDALINFO output from 1.7.3 on Linux at met.no, with h5ls: Version 1.8.7. This is equal to the result I get with GDAL 1.7.3 on Windows.
>
> christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
> Driver: HDF5Image/HDF5 Dataset
> Files: norsa.ss.ppi-00.5-dbz.aeqd-1000.20070601T000039Z.hdf
> Size is 480, 480
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> Metadata:
>   what:product=PPI
>   what:prodpar=0.5
>   what:quantity=DBZH
>   what:gain=0.5
>   what:offset=-32
>   what:nodata=255
>   what:undetect=0
>   how:system=GEMA
>   how:software=RAINBOW
>   how:startepochs=1180656009
>   how:endepochs=1180656039
>   what:object=IMAGE
>   what:version=H5rad 2.1
>   what:date=20070601
>   what:time=000039
>   what:source=NOD:norsa
>   what:source_wmoid=WMO:00
>   what:source_plc=PLC:Rissa
>   where:LL_lat=61.303
>   where:LL_lon=5.70656
>   where:UR_lat=65.5981
>   where:UR_lon=15.4113
>   where:projdef=+proj=aeqd +lat_0=63.536783 +lon_0=10.204000 +R=6371000 +datum=WGS84
>   where:lat=63.69
>   where:lon=10.204
>   where:lat_sphere=63.5368
>   where:lon_sphere=10.204
>   where:height=620
>   where:xsize=480
>   where:ysize=480
>   where:xscale=1000
>   where:yscale=1000
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  480.0)
> Upper Right (  480.0,    0.0)
> Lower Right (  480.0,  480.0)
> Center      (  240.0,  240.0)
> Band 1 Block=480x480 Type=Byte, ColorInterp=Undefined
>   Metadata:
>     data:CLASS=IMAGE
>     data:IMAGE_VERSION=1.2
> christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ h5ls --version
> h5ls: Version 1.8.7
> christofferae at pc2752:~/src/prorad-clean/processing/prorad-process$ gdalinfo --version GDAL 1.7.3, released 2010/11/10
>
>
>
>
>> -----Original Message-----
>> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
>> bounces at lists.osgeo.org] On Behalf Of Frank Warmerdam
>> Sent: 13. mars 2013 16:46
>> To: Rutger
>> Cc: gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] Difficulties reading a ODIM HDF5 file
>>
>> Sjur / Rutger,
>>
>> It also seems to work fine for me with trunk on linux.  I suspect the problem
>> is some sort of mixup at build time between versions of the HDF include files
>> or something like that.  Very hard to debug such a thing remotely.
>>
>> Best regards,
>> Frank
>>
>> On Wed, Mar 13, 2013 at 12:51 AM, Rutger <kassies at gmail.com> wrote:
>> > Hey,
>> >
>> > For what its worth; it works fine on Windows for me, using verion:
>> > GDAL 1.9.2, released 2012/10/08
>> >
>> > Gdalinfo output looks equal to your Linux output, and gdal_translate
>> > is able to convert the layer to a GeoTiff for example.
>> >
>> > Im using the pre-build cmd utilities from
>> > http://www.gisinternals.com/sdk/ <http://www.gisinternals.com/sdk/>  .
>> > Maybe you can peak over there to see if there is any difference in building.
>> >
>> > Regards,
>> > Rutger
>> >
>> >
>> >
>> > --
>> > View this message in context:
>> > http://osgeo-org.1560.n6.nabble.com/gdal-dev-Difficulties-reading-a-OD
>> > IM-HDF5-file-tp5039864p5040058.html
>> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------
>> ---------------------------------------+------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Thu Mar 14 08:56:33 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Thu, 14 Mar 2013 11:56:33 -0400
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <CA+YzLBeKtKE7eqAE7EGNawr9tF0gPud5oWYiHDoghFHmKLi1eg@mail.gmail.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
	<CA+YzLBeKtKE7eqAE7EGNawr9tF0gPud5oWYiHDoghFHmKLi1eg@mail.gmail.com>
Message-ID: <CAFOE_Bf3NLoLFeaishEf1gPBdXRZCk83G+a0Lr6srxpb7uQHVg@mail.gmail.com>

Great. Thanks Frank.

Yes I'm writing to distinct output OGR.

For GDAL drivers you mean that some of them might not be thread safe ? and
hence may not be used safely from multiple threads
even for read access ?

Is MapInfo OGR driver thread safe as long as i'm writing one distinct .tab
from one distinct thread ?

Jeff




On Thu, Mar 14, 2013 at 11:50 AM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Jeff,
>
> I reviewed the polygonize code and I don't see any multi-threading
> issues in it on quick inspection.
>
> The algorithm does read from GDAL and write to OGR so it would also be
> sensitive to issues with particular drivers.  The main GDAL drivers
> (ie. GeoTIFF, MEM) should be fine.  For writing OGR drivers like
> shapefile, or MEM should be ok.
>
> I'm assuming each thread is writing to a distinct output OGR supported
> datasource and layer.
>
> No guarantees unfortunately.
>
> Best regards,
> Frank
>
> On Thu, Mar 14, 2013 at 5:46 AM, Jeff Lacoste <jefflacostegdal at gmail.com>
> wrote:
> > Hi,
> >
> > 'GDALFPolygonize' create polygons from a raster band into a vector file.
> Can
> > this function called from multiple threads safely ?
> >
> > For ex. I have 10 raster files and would like to fire 10 threads. Every
> > thread opens a raster
> > and call GDALFPolygonize to generate a vector file in MapInfo format.
> >
> > Would this be concurrent safe ?
> >
> > Thanks
> >
> > Jeff
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/c1725062/attachment.html>

From warmerdam at pobox.com  Thu Mar 14 09:00:15 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 14 Mar 2013 09:00:15 -0700
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <CAFOE_Bf3NLoLFeaishEf1gPBdXRZCk83G+a0Lr6srxpb7uQHVg@mail.gmail.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
	<CA+YzLBeKtKE7eqAE7EGNawr9tF0gPud5oWYiHDoghFHmKLi1eg@mail.gmail.com>
	<CAFOE_Bf3NLoLFeaishEf1gPBdXRZCk83G+a0Lr6srxpb7uQHVg@mail.gmail.com>
Message-ID: <CA+YzLBdbckZDzcaEBLsYjsmPhPkixpWFtE4VnmggbzrfHAXhsQ@mail.gmail.com>

On Thu, Mar 14, 2013 at 8:56 AM, Jeff Lacoste <jefflacostegdal at gmail.com> wrote:
> Great. Thanks Frank.
>
> Yes I'm writing to distinct output OGR.
>
> For GDAL drivers you mean that some of them might not be thread safe ? and
> hence may not be used safely from multiple threads
> even for read access ?

Jeff,

There are a lot of GDAL drivers and it is entirely possible, even
likely, that some have threading issues.  I believe most are ok.

> Is MapInfo OGR driver thread safe as long as i'm writing one distinct .tab
> from one distinct thread ?

I don't know of any issues with the mapinfo driver, but it is
complicated and I have not personally done an audit of it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From alisson.uece at gmail.com  Thu Mar 14 09:23:40 2013
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Thu, 14 Mar 2013 13:23:40 -0300
Subject: [gdal-dev] Polygonizer / Lines
Message-ID: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>

Hi friends,

I have a set of OGRLineStrings and an OGRLinearRing with many
intersections. I would like to polygonize this set of lines. Can anybody
help me?

Best regards,
-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/ba505713/attachment.html>

From raghavendra at vizexperts.com  Thu Mar 14 10:11:34 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Thu, 14 Mar 2013 10:11:34 -0700 (PDT)
Subject: [gdal-dev] Postgis Raster out-db support
Message-ID: <1363281094734-5040436.post@n6.nabble.com>

Hi,

Is the current trunk of GDAL supports loading out-db raster data from
postgis?

If no, is there any specific timeline for that?

Thanks,
Ryagz



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Postgis-Raster-out-db-support-tp5040436.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Thu Mar 14 10:14:53 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 14 Mar 2013 17:14:53 +0000
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <1363281094734-5040436.post@n6.nabble.com>
References: <1363281094734-5040436.post@n6.nabble.com>
Message-ID: <CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>

On 14 March 2013 17:11, ryagz <raghavendra at vizexperts.com> wrote:
>
> Is the current trunk of GDAL supports loading out-db raster data from
> postgis?
>
> If no, is there any specific timeline for that?

FYI, there is significant work planned in PostGIS Raster,
which will affect out-db support:

http://trac.osgeo.org/postgis/ticket/2217
http://trac.osgeo.org/postgis/ticket/2222

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From chaitanya.ch at gmail.com  Thu Mar 14 10:22:24 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 14 Mar 2013 22:52:24 +0530
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
Message-ID: <CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>

Allison,

Check out OGRGeometry::Polygonize()

The result depends on the type of intersections in your lines.

--
Best regards,
Chaitanya Kumar CH
On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:

> Hi friends,
>
> I have a set of OGRLineStrings and an OGRLinearRing with many
> intersections. I would like to polygonize this set of lines. Can anybody
> help me?
>
> Best regards,
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/1d0c1864/attachment.html>

From jefflacostegdal at gmail.com  Thu Mar 14 10:34:36 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Thu, 14 Mar 2013 13:34:36 -0400
Subject: [gdal-dev] Is GDALFPolygonize thread safe ?
In-Reply-To: <CA+YzLBdbckZDzcaEBLsYjsmPhPkixpWFtE4VnmggbzrfHAXhsQ@mail.gmail.com>
References: <CAFOE_Bca1ZV80P7EwPXXL6wmpMc59GQ4Qk2MB8u6m6zUsX9bPw@mail.gmail.com>
	<CA+YzLBeKtKE7eqAE7EGNawr9tF0gPud5oWYiHDoghFHmKLi1eg@mail.gmail.com>
	<CAFOE_Bf3NLoLFeaishEf1gPBdXRZCk83G+a0Lr6srxpb7uQHVg@mail.gmail.com>
	<CA+YzLBdbckZDzcaEBLsYjsmPhPkixpWFtE4VnmggbzrfHAXhsQ@mail.gmail.com>
Message-ID: <CAFOE_Bdj18DA-zOsYfMSsZHGN2_rn2kbMLJTDOmq+Cgy+6aNOA@mail.gmail.com>

Thanks again Frank.

May be some one else knows more about the MapInfo OGR driver would comment
on its thread safety ?

Jeff


On Thu, Mar 14, 2013 at 12:00 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> On Thu, Mar 14, 2013 at 8:56 AM, Jeff Lacoste <jefflacostegdal at gmail.com>
> wrote:
> > Great. Thanks Frank.
> >
> > Yes I'm writing to distinct output OGR.
> >
> > For GDAL drivers you mean that some of them might not be thread safe ?
> and
> > hence may not be used safely from multiple threads
> > even for read access ?
>
> Jeff,
>
> There are a lot of GDAL drivers and it is entirely possible, even
> likely, that some have threading issues.  I believe most are ok.
>
> > Is MapInfo OGR driver thread safe as long as i'm writing one distinct
> .tab
> > from one distinct thread ?
>
> I don't know of any issues with the mapinfo driver, but it is
> complicated and I have not personally done an audit of it.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/1e300345/attachment.html>

From alisson.uece at gmail.com  Thu Mar 14 11:28:11 2013
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Thu, 14 Mar 2013 15:28:11 -0300
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
Message-ID: <CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>

Can you explain a bit better?

2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>

> Allison,
>
> Check out OGRGeometry::Polygonize()
>
> The result depends on the type of intersections in your lines.
>
> --
> Best regards,
> Chaitanya Kumar CH
> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:
>
>> Hi friends,
>>
>> I have a set of OGRLineStrings and an OGRLinearRing with many
>> intersections. I would like to polygonize this set of lines. Can anybody
>> help me?
>>
>> Best regards,
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130314/a6335c19/attachment-0001.html>

From ngarel at micromine.com  Thu Mar 14 17:35:44 2013
From: ngarel at micromine.com (ngarel)
Date: Thu, 14 Mar 2013 17:35:44 -0700 (PDT)
Subject: [gdal-dev] Cannot write jpeg2000 with ERDAS 4.3
Message-ID: <1363307744610-5040505.post@n6.nabble.com>

Hi,
I created this  ticket <http://trac.osgeo.org/gdal/ticket/5025>   but maybe
I should have asked the question first here.

We upgraded the ERDAS library from 4.2 to 4.3 and the gdal_translate fails
to open the output file in GDALECWCompressor::Initialize() function, at
oError = CNCSJP2FileView::Open( &(m_OStream) );

oError.m_eError always returns NCS_FILE_OPEN_FAILED which did not use to
happen with 4.2 library.

the output error is: ERROR 1: An error has occurred: Error 2 "File open
failed" file "" line 0

Gdal dll has been rebuilt with the following flags:

ECWDIR = "<path>\ERDAS ECW JPEG2000 4.3 SDK" ECWFLAGS = -DECWSDK_VERSION=43
\

-DHAVE_COMPRESS \ -I$(ECWDIR)\include \ -I$(ECWDIR)\include\NCSECW\api
-I$(ECWDIR)\include\NCSECW\jp2 \ -I$(ECWDIR)\include\NCSECW\ecw

ECWLIB = $(ECWDIR)\lib\vc10\win32\NCSEcw4d.lib \

$(ECWDIR)\lib\vc10\win32\NCSUtil4d.lib \
$(ECWDIR)\lib\vc10\win32\NCScnet4d.lib

Does anybody have had the same issue when upgrading the ERDAS library?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Cannot-write-jpeg2000-with-ERDAS-4-3-tp5040505.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Thu Mar 14 19:48:59 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 15 Mar 2013 08:18:59 +0530
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
Message-ID: <CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>

Alisson,

You can refer to the method's documentation here:
http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec

The mechanism of this operation was already explained Peter Halls in this
mailing list[1]. GEOS does a good job identifying line strings touching at
end points and then combining them to make rings and then polygons.

However, it's your job to ensure that all the line strings passed to the
method are part of a single polygon.

[1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html


On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <alisson.uece at gmail.com>wrote:

> Can you explain a bit better?
>
>
> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>
>> Allison,
>>
>> Check out OGRGeometry::Polygonize()
>>
>> The result depends on the type of intersections in your lines.
>>
>> --
>> Best regards,
>> Chaitanya Kumar CH
>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:
>>
>>> Hi friends,
>>>
>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>> intersections. I would like to polygonize this set of lines. Can anybody
>>> help me?
>>>
>>> Best regards,
>>> --
>>> Alisson Barbosa
>>> Systems Analyst - FUNCEME
>>> M.Sc. in Computer Science - MACC
>>> Graduate in Computer Science  - UECE
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
>
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/09e26dbd/attachment.html>

From quiztli at lavabit.com  Fri Mar 15 00:33:35 2013
From: quiztli at lavabit.com (quiztli at lavabit.com)
Date: Fri, 15 Mar 2013 03:33:35 -0400 (EDT)
Subject: [gdal-dev] Issues with FileGDB support
Message-ID: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>

Hello

I have built gdal from source (1.9.2, latest stable) with Esri FileGDB
support included. This is specified during the configuration,
--with-fgdb=/usr/local/FileGDB_API/.

The configuration and build goes well and I can see that the fileGDB libs
get linked but when I check the format support with for example 'ogrinfo
--format' FileGDB doesn't show up. ldd shows that the binary is linked to
the fileGDB libs.

At this point I guess that the most likely explanation for this is an
error in the code, but I haven't checked it.

So, is FileGDB support working for you?

----
While I'm at it - there seems to be two slightly different releases of the
FileGDB library.

One hosted by Esri (the one I used and seemingly the one gdal is written
to use)
http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api

One hosted at SourceForge
http://sourceforge.net/projects/esrifgdblinuxru/

The the Esri hosted code is version 1.2, whereas the code at SF gives 1.3
as version number. There are some minor differences such as filenames
which has to be manually tweaked to make gdal use the latter (although I
haven't actually tried it out myself ;) ).

Best Regards
quiztli



From alisson.uece at gmail.com  Fri Mar 15 05:50:31 2013
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Fri, 15 Mar 2013 09:50:31 -0300
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
	<CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
Message-ID: <CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>

Thank you Chaitanya,

I had read the explanation of Peter Halls. But that was *raster
polygonization*. I am currently working with another type: *polygonization
of OGRLineStrings*.

My question was because i was not able to polygonize using the mentioned
method. I created an OGRMultiLineString or an OGRGeometryCollection and
added geometries (many OGRLineStrings) by addGeometry or
addGeometryDirectly methods. But the polygonization always returned null.

I solved using this:

OGRMultiLineString *mls = new OGRMultiLineString();
OGRMultiLineString* pTemp = NULL;
while(...) //iteration of lines
{
        //creation of line
        pTemp = static_cast<OGRMultiLineString*>(mls->Union(line));
        if (pTemp != NULL)
        {
            if( mls != NULL)
            {
                if( mls->getNumGeometries() > 0)
                    delete mls;
            }
            mls = pTemp;
        }
}

Thanks,

2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>

> Alisson,
>
> You can refer to the method's documentation here:
> http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec
>
> The mechanism of this operation was already explained Peter Halls in this
> mailing list[1]. GEOS does a good job identifying line strings touching at
> end points and then combining them to make rings and then polygons.
>
> However, it's your job to ensure that all the line strings passed to the
> method are part of a single polygon.
>
> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html
>
>
> On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <alisson.uece at gmail.com>wrote:
>
>> Can you explain a bit better?
>>
>>
>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>
>>> Allison,
>>>
>>> Check out OGRGeometry::Polygonize()
>>>
>>> The result depends on the type of intersections in your lines.
>>>
>>> --
>>> Best regards,
>>> Chaitanya Kumar CH
>>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:
>>>
>>>> Hi friends,
>>>>
>>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>>> intersections. I would like to polygonize this set of lines. Can anybody
>>>> help me?
>>>>
>>>> Best regards,
>>>> --
>>>> Alisson Barbosa
>>>> Systems Analyst - FUNCEME
>>>> M.Sc. in Computer Science - MACC
>>>> Graduate in Computer Science  - UECE
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>
>>
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/c618697e/attachment.html>

From chaitanya.ch at gmail.com  Fri Mar 15 06:06:01 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 15 Mar 2013 18:36:01 +0530
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
	<CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
	<CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
Message-ID: <CAMKgpOYhJbpLd+ZJ4ueMds6WWS2QM2BxAb_Ha3F_2zpEB-DYEA@mail.gmail.com>

Alisson,

Can you provide a sample dataset that didn't work?


On Fri, Mar 15, 2013 at 6:20 PM, Alisson Barbosa <alisson.uece at gmail.com>wrote:

> Thank you Chaitanya,
>
> I had read the explanation of Peter Halls. But that was *raster
> polygonization*. I am currently working with another type: *polygonization
> of OGRLineStrings*.
>
> My question was because i was not able to polygonize using the mentioned
> method. I created an OGRMultiLineString or an OGRGeometryCollection and
> added geometries (many OGRLineStrings) by addGeometry or
> addGeometryDirectly methods. But the polygonization always returned null.
>
> I solved using this:
>
> OGRMultiLineString *mls = new OGRMultiLineString();
> OGRMultiLineString* pTemp = NULL;
> while(...) //iteration of lines
> {
>         //creation of line
>         pTemp = static_cast<OGRMultiLineString*>(mls->Union(line));
>         if (pTemp != NULL)
>         {
>             if( mls != NULL)
>             {
>                 if( mls->getNumGeometries() > 0)
>                     delete mls;
>             }
>             mls = pTemp;
>         }
> }
>
> Thanks,
>
>
> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>
>> Alisson,
>>
>> You can refer to the method's documentation here:
>> http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec
>>
>> The mechanism of this operation was already explained Peter Halls in this
>> mailing list[1]. GEOS does a good job identifying line strings touching at
>> end points and then combining them to make rings and then polygons.
>>
>> However, it's your job to ensure that all the line strings passed to the
>> method are part of a single polygon.
>>
>> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html
>>
>>
>> On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <alisson.uece at gmail.com
>> > wrote:
>>
>>> Can you explain a bit better?
>>>
>>>
>>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>>
>>>> Allison,
>>>>
>>>> Check out OGRGeometry::Polygonize()
>>>>
>>>> The result depends on the type of intersections in your lines.
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya Kumar CH
>>>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:
>>>>
>>>>> Hi friends,
>>>>>
>>>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>>>> intersections. I would like to polygonize this set of lines. Can anybody
>>>>> help me?
>>>>>
>>>>> Best regards,
>>>>> --
>>>>> Alisson Barbosa
>>>>> Systems Analyst - FUNCEME
>>>>> M.Sc. in Computer Science - MACC
>>>>> Graduate in Computer Science  - UECE
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>
>>>
>>> --
>>> Alisson Barbosa
>>> Systems Analyst - FUNCEME
>>> M.Sc. in Computer Science - MACC
>>> Graduate in Computer Science  - UECE
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/ee4b3fbd/attachment-0001.html>

From alisson.uece at gmail.com  Fri Mar 15 06:19:27 2013
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Fri, 15 Mar 2013 10:19:27 -0300
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CAMKgpOYhJbpLd+ZJ4ueMds6WWS2QM2BxAb_Ha3F_2zpEB-DYEA@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
	<CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
	<CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
	<CAMKgpOYhJbpLd+ZJ4ueMds6WWS2QM2BxAb_Ha3F_2zpEB-DYEA@mail.gmail.com>
Message-ID: <CALwK9Yw2tXFkKA5gSNmPu_h-crUjOVBF02yL1aUkybXV2dDRzQ@mail.gmail.com>

Attached...

2013/3/15 Chaitanya kumar CH <chaitanya.ch at gmail.com>

> Alisson,
>
> Can you provide a sample dataset that didn't work?
>
>
> On Fri, Mar 15, 2013 at 6:20 PM, Alisson Barbosa <alisson.uece at gmail.com>wrote:
>
>> Thank you Chaitanya,
>>
>> I had read the explanation of Peter Halls. But that was *raster
>> polygonization*. I am currently working with another type: *
>> polygonization of OGRLineStrings*.
>>
>> My question was because i was not able to polygonize using the mentioned
>> method. I created an OGRMultiLineString or an OGRGeometryCollection and
>> added geometries (many OGRLineStrings) by addGeometry or
>> addGeometryDirectly methods. But the polygonization always returned null.
>>
>> I solved using this:
>>
>> OGRMultiLineString *mls = new OGRMultiLineString();
>> OGRMultiLineString* pTemp = NULL;
>> while(...) //iteration of lines
>> {
>>         //creation of line
>>         pTemp = static_cast<OGRMultiLineString*>(mls->Union(line));
>>         if (pTemp != NULL)
>>         {
>>             if( mls != NULL)
>>             {
>>                 if( mls->getNumGeometries() > 0)
>>                     delete mls;
>>             }
>>             mls = pTemp;
>>         }
>> }
>>
>> Thanks,
>>
>>
>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>
>>> Alisson,
>>>
>>> You can refer to the method's documentation here:
>>> http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec
>>>
>>> The mechanism of this operation was already explained Peter Halls in
>>> this mailing list[1]. GEOS does a good job identifying line strings
>>> touching at end points and then combining them to make rings and then
>>> polygons.
>>>
>>> However, it's your job to ensure that all the line strings passed to the
>>> method are part of a single polygon.
>>>
>>> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html
>>>
>>>
>>> On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <
>>> alisson.uece at gmail.com> wrote:
>>>
>>>> Can you explain a bit better?
>>>>
>>>>
>>>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>>>
>>>>> Allison,
>>>>>
>>>>> Check out OGRGeometry::Polygonize()
>>>>>
>>>>> The result depends on the type of intersections in your lines.
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya Kumar CH
>>>>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi friends,
>>>>>>
>>>>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>>>>> intersections. I would like to polygonize this set of lines. Can anybody
>>>>>> help me?
>>>>>>
>>>>>> Best regards,
>>>>>> --
>>>>>> Alisson Barbosa
>>>>>> Systems Analyst - FUNCEME
>>>>>> M.Sc. in Computer Science - MACC
>>>>>> Graduate in Computer Science  - UECE
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Alisson Barbosa
>>>> Systems Analyst - FUNCEME
>>>> M.Sc. in Computer Science - MACC
>>>> Graduate in Computer Science  - UECE
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/b3a12058/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.zip
Type: application/zip
Size: 1562 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/b3a12058/attachment.zip>

From p.halls at york.ac.uk  Fri Mar 15 06:23:40 2013
From: p.halls at york.ac.uk (Peter Halls)
Date: Fri, 15 Mar 2013 13:23:40 +0000
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
	<CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
	<CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
Message-ID: <CADEnnOOuK+rK+6YLhE_eh02DtZ-sVrAXFdSfYa+zBQMDwx8j8A@mail.gmail.com>

Alisson,

     in vector mode, where you are working with linestrings, the procedure
is as described in Stephen Wise's book, GIS Basics (Taylor & Francis, 2002)
chapters 2 - 4.  You will need to compute the intersection of all the lines
(Chapter 3), split them at the intersections and either duplicate the
common boundary segments or (my preferred way) build a simple topology
table that lists each line segment required for each polygon.  That way you
can still output the set of complete polygons to a shapefile (no
topology).  You will need to take account of the fact that some line
segments must be reversed when building the polygon.

Does that help?

Best wishes,

Peter

On 15 March 2013 12:50, Alisson Barbosa <alisson.uece at gmail.com> wrote:

> Thank you Chaitanya,
>
> I had read the explanation of Peter Halls. But that was *raster
> polygonization*. I am currently working with another type: *polygonization
> of OGRLineStrings*.
>
> My question was because i was not able to polygonize using the mentioned
> method. I created an OGRMultiLineString or an OGRGeometryCollection and
> added geometries (many OGRLineStrings) by addGeometry or
> addGeometryDirectly methods. But the polygonization always returned null.
>
> I solved using this:
>
> OGRMultiLineString *mls = new OGRMultiLineString();
> OGRMultiLineString* pTemp = NULL;
> while(...) //iteration of lines
> {
>         //creation of line
>         pTemp = static_cast<OGRMultiLineString*>(mls->Union(line));
>         if (pTemp != NULL)
>         {
>             if( mls != NULL)
>             {
>                 if( mls->getNumGeometries() > 0)
>                     delete mls;
>             }
>             mls = pTemp;
>         }
> }
>
> Thanks,
>
> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>
>> Alisson,
>>
>> You can refer to the method's documentation here:
>> http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec
>>
>> The mechanism of this operation was already explained Peter Halls in this
>> mailing list[1]. GEOS does a good job identifying line strings touching at
>> end points and then combining them to make rings and then polygons.
>>
>> However, it's your job to ensure that all the line strings passed to the
>> method are part of a single polygon.
>>
>> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html
>>
>>
>> On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <alisson.uece at gmail.com
>> > wrote:
>>
>>> Can you explain a bit better?
>>>
>>>
>>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>>
>>>> Allison,
>>>>
>>>> Check out OGRGeometry::Polygonize()
>>>>
>>>> The result depends on the type of intersections in your lines.
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya Kumar CH
>>>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com> wrote:
>>>>
>>>>> Hi friends,
>>>>>
>>>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>>>> intersections. I would like to polygonize this set of lines. Can anybody
>>>>> help me?
>>>>>
>>>>> Best regards,
>>>>> --
>>>>> Alisson Barbosa
>>>>> Systems Analyst - FUNCEME
>>>>> M.Sc. in Computer Science - MACC
>>>>> Graduate in Computer Science  - UECE
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>
>>>
>>> --
>>> Alisson Barbosa
>>> Systems Analyst - FUNCEME
>>> M.Sc. in Computer Science - MACC
>>> Graduate in Computer Science  - UECE
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130315/5eb389d6/attachment-0001.html>

From pcorti at gmail.com  Fri Mar 15 08:44:14 2013
From: pcorti at gmail.com (Paolo Corti)
Date: Fri, 15 Mar 2013 16:44:14 +0100
Subject: [gdal-dev] How to set OGR_INTERLEAVED_READING when using the OSM
	driver
Message-ID: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>

Hi guys

I am giving a try to the new OSM driver, that looks very promising to me ;)
I am using the latest source code from trunk, and I cannot figure out
how can I set the OGR_INTERLEAVED_READING when using ogr2ogr.

If I try to export an OSM file like this the option seems to be
ignored, and the process export just the first 100k features:

$ ogr2ogr test.shp myfile.pbf lines -lco OGR_INTERLEAVED_READING=YES
ERROR 1: Too many features have accumulated in lines layer. Use
OGR_INTERLEAVED_READING=YES mode

If I try to export the OGR_INTERLEAVED_READING as an env variable, the
process fails:

$ export OGR_INTERLEAVED_READING=YES

$ ogr2ogr test.shp myfile.pbf lines --debug ON
OGR: OGROpen(myfile.pbf/0x914ef78) succeeded as OSM.
Shape: DBF Codepage = LDID/87 for test.shp
Shape: Treating as encoding 'ISO-8859-1'.
OSM: OGR_INTERLEAVED_READING = 1
OSM: Got bounds : minx=11.361760, miny=40.717850, maxx=14.099890, maxy=42.916190
OSM: For layer points, new max size is 128
OSM: For layer points, new max size is 320
OSM: For layer points, new max size is 608
OSM: For layer points, new max size is 1040
OSM: For layer points, new max size is 1688
OSM: For layer points, new max size is 2660
OSM: For layer points, new max size is 4118
OSM: For layer points, new max size is 6305
OSM: For layer points, new max size is 9585
OSM: For layer points, new max size is 14505
OSM: For layer points, new max size is 21885
OSM: For layer points, new max size is 32955
OSM: For layer points, new max size is 49560
OSM: Switching to 'points' as they are no more feature in 'lines'
OGR2OGR: 0 features written in layer 'test'
OSM: Number of bytes read in file : 14874118

According to the documentation anyway, the option should not be set at
all, as "the ogr2ogr application has been modified to use that
OGR_INTERLEAVED_READING mode without any particular user action".

Ideas? Am I doing something obviously wrong?
thanks
p


-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From jukka.rahkonen at mmmtike.fi  Fri Mar 15 11:09:31 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 15 Mar 2013 18:09:31 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?How_to_set_OGR=5FINTERLEAVED=5FREADING_when_?=
	=?utf-8?q?using_the_OSM=09driver?=
References: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>
Message-ID: <loom.20130315T190159-677@post.gmane.org>

Paolo Corti <pcorti <at> gmail.com> writes:

> 
> Hi guys
> 
> I am giving a try to the new OSM driver, that looks very promising to me ;)
> I am using the latest source code from trunk, and I cannot figure out
> how can I set the OGR_INTERLEAVED_READING when using ogr2ogr.
> 
> If I try to export an OSM file like this the option seems to be
> ignored, and the process export just the first 100k features:
> 
> $ ogr2ogr test.shp myfile.pbf lines -lco OGR_INTERLEAVED_READING=YES
> ERROR 1: Too many features have accumulated in lines layer. Use
> OGR_INTERLEAVED_READING=YES mode

Configuration options are given as --config OPTION VALUE

This is the command I have been using for converting OSM data into Spatialite

ogr2ogr finland.sqlite finland.osm.pbf -f SQLite -dsco SPATIALITE=YES
-gt 10000 --config OGR_SQLITE_SYNCHRONOUS OFF

-Jukka Rahkonen-


From feumar at shaw.ca  Fri Mar 15 11:10:12 2013
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Fri, 15 Mar 2013 11:10:12 -0700
Subject: [gdal-dev] Issues with FileGDB support
In-Reply-To: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
References: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
Message-ID: <51436404.9000203@shaw.ca>

Don't know if this helps but, when i was using (not building) ogr, i had 
to specially select the filedb facility as an 'extra' during 
installation (or choose to do it later).

Martin Feuchtwanger  feumar at shaw.ca  604-254-0361
Vancouver, BC  V5N 1J6
http://members.shaw.ca/geomatics.developer

On 15/03/2013 12:33 AM, quiztli at lavabit.com wrote:

> Hello
>
> I have built gdal from source (1.9.2, latest stable) with Esri FileGDB
> support included. This is specified during the configuration,
> --with-fgdb=/usr/local/FileGDB_API/.
>
> The configuration and build goes well and I can see that the fileGDB libs
> get linked but when I check the format support with for example 'ogrinfo
> --format' FileGDB doesn't show up. ldd shows that the binary is linked to
> the fileGDB libs.
>
> At this point I guess that the most likely explanation for this is an
> error in the code, but I haven't checked it.
>
> So, is FileGDB support working for you?
>
> ----
> While I'm at it - there seems to be two slightly different releases of the
> FileGDB library.
>
> One hosted by Esri (the one I used and seemingly the one gdal is written
> to use)
> http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api
>
> One hosted at SourceForge
> http://sourceforge.net/projects/esrifgdblinuxru/
>
> The the Esri hosted code is version 1.2, whereas the code at SF gives 1.3
> as version number. There are some minor differences such as filenames
> which has to be manually tweaked to make gdal use the latter (although I
> haven't actually tried it out myself ;) ).
>
> Best Regards
> quiztli
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From penorman at mac.com  Fri Mar 15 11:31:47 2013
From: penorman at mac.com (Paul Norman)
Date: Fri, 15 Mar 2013 11:31:47 -0700
Subject: [gdal-dev] Issues with FileGDB support
In-Reply-To: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
References: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
Message-ID: <048101ce21ab$5ae93440$10bb9cc0$@mac.com>

> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Issues with FileGDB support
> 
> Hello
> 
> I have built gdal from source (1.9.2, latest stable) with Esri FileGDB
> support included. This is specified during the configuration, --with-
> fgdb=/usr/local/FileGDB_API/.
> 
> The configuration and build goes well and I can see that the fileGDB
> libs get linked but when I check the format support with for example
> 'ogrinfo --format' FileGDB doesn't show up. ldd shows that the binary is
> linked to the fileGDB libs.
> 
> At this point I guess that the most likely explanation for this is an
> error in the code, but I haven't checked it.
> 
> So, is FileGDB support working for you?

It's been awhile, but I successfully built gdal with FileGDB support.

My notes indicate I used ./configure --with-fgdb=/home/pnorman/FileGDB_API
and installed files from that location to /usr/local/lib/libFileGDBAPI.so
and /usr/local/lib/libfgdbunixrtl.so, as well as
/usr/share/doc/filegdb-api/.

I believe I installed from svn, and ogrinfo --version reports GDAL 2.0dev,
released 2011/12/29


From jorgearevalo at libregis.org  Fri Mar 15 12:09:57 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Fri, 15 Mar 2013 20:09:57 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
Message-ID: <3100774DE78C4235B97A3015E138B525@libregis.org>

Hello, 

I'm getting an error compiling GDAL from trunk (r25758). I successfully compiled GDAL from trunk before with this configure script:

https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh

But after last svn update to r25758, I get this error

https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.log

I haven't compiled GDAL on Mac for a while. So, The problem isn't necessarily caused by the last update.

Anyone else with the same problem?

Thanks in advance, 

-- 
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)



From even.rouault at mines-paris.org  Fri Mar 15 14:36:36 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 15 Mar 2013 22:36:36 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <3100774DE78C4235B97A3015E138B525@libregis.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
Message-ID: <201303152236.36381.even.rouault@mines-paris.org>

Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> Hello,
> 
> I'm getting an error compiling GDAL from trunk (r25758). I successfully
> compiled GDAL from trunk before with this configure script:
> 
> https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> 
> But after last svn update to r25758, I get this error
> 
> https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.log
> 
> I haven't compiled GDAL on Mac for a while. So, The problem isn't
> necessarily caused by the last update.
> 
> Anyone else with the same problem?

Cool that someone tests on the Mac and reports.

Well, I assumed that "extern char** environ" that contains the environment 
variable was available on all POSIX platforms, but apparently not.

http://www.gnu.org/software/gnulib/manual/html_node/environ.html suggests me 
the following patch. Please test and report if it works.

Index: port/cpl_spawn.cpp
===================================================================
--- port/cpl_spawn.cpp	(revision 25734)
+++ port/cpl_spawn.cpp	(working copy)
@@ -461,8 +461,13 @@
 #include <signal.h>
 #ifdef HAVE_POSIX_SPAWNP
 #include <spawn.h>
+#ifdef MACOSX_FRAMEWORK
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#else
 extern char** environ;
 #endif
+#endif
 
 #if 0
 /************************************************************************/


> 
> Thanks in advance,

From even.rouault at mines-paris.org  Fri Mar 15 14:47:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 15 Mar 2013 22:47:41 +0100
Subject: [gdal-dev] How to set OGR_INTERLEAVED_READING when using the
	OSM driver
In-Reply-To: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>
References: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>
Message-ID: <201303152247.41993.even.rouault@mines-paris.org>

Le vendredi 15 mars 2013 16:44:14, Paolo Corti a ?crit :
> Hi guys
> 
> I am giving a try to the new OSM driver, that looks very promising to me ;)
> I am using the latest source code from trunk, and I cannot figure out
> how can I set the OGR_INTERLEAVED_READING when using ogr2ogr.
> 
> If I try to export an OSM file like this the option seems to be
> ignored, and the process export just the first 100k features:
> 
> $ ogr2ogr test.shp myfile.pbf lines -lco OGR_INTERLEAVED_READING=YES
> ERROR 1: Too many features have accumulated in lines layer. Use
> OGR_INTERLEAVED_READING=YES mode
> 
> If I try to export the OGR_INTERLEAVED_READING as an env variable, the
> process fails:
> 
> $ export OGR_INTERLEAVED_READING=YES
> 
> $ ogr2ogr test.shp myfile.pbf lines --debug ON
> OGR: OGROpen(myfile.pbf/0x914ef78) succeeded as OSM.
> Shape: DBF Codepage = LDID/87 for test.shp
> Shape: Treating as encoding 'ISO-8859-1'.
> OSM: OGR_INTERLEAVED_READING = 1
> OSM: Got bounds : minx=11.361760, miny=40.717850, maxx=14.099890,
> maxy=42.916190 OSM: For layer points, new max size is 128
> OSM: For layer points, new max size is 320
> OSM: For layer points, new max size is 608
> OSM: For layer points, new max size is 1040
> OSM: For layer points, new max size is 1688
> OSM: For layer points, new max size is 2660
> OSM: For layer points, new max size is 4118
> OSM: For layer points, new max size is 6305
> OSM: For layer points, new max size is 9585
> OSM: For layer points, new max size is 14505
> OSM: For layer points, new max size is 21885
> OSM: For layer points, new max size is 32955
> OSM: For layer points, new max size is 49560
> OSM: Switching to 'points' as they are no more feature in 'lines'
> OGR2OGR: 0 features written in layer 'test'
> OSM: Number of bytes read in file : 14874118
> 
> According to the documentation anyway, the option should not be set at
> all, as "the ogr2ogr application has been modified to use that
> OGR_INTERLEAVED_READING mode without any particular user action".
> 
> Ideas? Am I doing something obviously wrong?

Indeed, there's nothing special to do. The "ogr2ogr test.shp myfile.pbf lines" 
line is sufficient and I've just tested it successfully.

My hypothesis, from the above debug log, would be that you don't run the 
ogr2ogr binary from trunk, but perhaps the one from a previous release...

> thanks
> p

From jorgearevalo at libregis.org  Fri Mar 15 14:53:36 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Fri, 15 Mar 2013 22:53:36 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <201303152236.36381.even.rouault@mines-paris.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152236.36381.even.rouault@mines-paris.org>
Message-ID: <046E9069BAC447308260CBD09A391831@libregis.org>

El viernes 15 de marzo de 2013 a las 22:36, Even Rouault escribi?:
> Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> > Hello,
> >  
> > I'm getting an error compiling GDAL from trunk (r25758). I successfully
> > compiled GDAL from trunk before with this configure script:
> >  
> > https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> >  
> > But after last svn update to r25758, I get this error
> >  
> > https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.log
> >  
> > I haven't compiled GDAL on Mac for a while. So, The problem isn't
> > necessarily caused by the last update.
> >  
> > Anyone else with the same problem?
>  
> Cool that someone tests on the Mac and reports.
>  
> Well, I assumed that "extern char** environ" that contains the environment  
> variable was available on all POSIX platforms, but apparently not.
>  
> http://www.gnu.org/software/gnulib/manual/html_node/environ.html suggests me  
> the following patch. Please test and report if it works.
>  
> Index: port/cpl_spawn.cpp
> ===================================================================
> --- port/cpl_spawn.cpp (revision 25734)
> +++ port/cpl_spawn.cpp (working copy)
> @@ -461,8 +461,13 @@
> #include <signal.h>
> #ifdef HAVE_POSIX_SPAWNP
> #include <spawn.h>
> +#ifdef MACOSX_FRAMEWORK
> +#include <crt_externs.h>
> +#define environ (*_NSGetEnviron())
> +#else
> extern char** environ;
> #endif
> +#endif
>  
> #if 0
> /************************************************************************/
>  
>  
> >  
> > Thanks in advance,  

Thanks! We got to the same solution :-). I've found the same patch in MacPorts (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-packages-base-include-HsBase.h.diff?rev=81676). It worked.  

I could create a new ticket and attach the patch file. Is it ok?

--  
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig) 

From even.rouault at mines-paris.org  Fri Mar 15 15:03:19 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 15 Mar 2013 23:03:19 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <046E9069BAC447308260CBD09A391831@libregis.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152236.36381.even.rouault@mines-paris.org>
	<046E9069BAC447308260CBD09A391831@libregis.org>
Message-ID: <201303152303.19546.even.rouault@mines-paris.org>

Le vendredi 15 mars 2013 22:53:36, Jorge Ar?valo a ?crit :
> El viernes 15 de marzo de 2013 a las 22:36, Even Rouault escribi?:
> > Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> > > Hello,
> > > 
> > > I'm getting an error compiling GDAL from trunk (r25758). I successfully
> > > compiled GDAL from trunk before with this configure script:
> > > 
> > > https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> > > 
> > > But after last svn update to r25758, I get this error
> > > 
> > > https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.log
> > > 
> > > I haven't compiled GDAL on Mac for a while. So, The problem isn't
> > > necessarily caused by the last update.
> > > 
> > > Anyone else with the same problem?
> > 
> > Cool that someone tests on the Mac and reports.
> > 
> > Well, I assumed that "extern char** environ" that contains the
> > environment variable was available on all POSIX platforms, but
> > apparently not.
> > 
> > http://www.gnu.org/software/gnulib/manual/html_node/environ.html suggests
> > me the following patch. Please test and report if it works.
> > 
> > Index: port/cpl_spawn.cpp
> > ===================================================================
> > --- port/cpl_spawn.cpp (revision 25734)
> > +++ port/cpl_spawn.cpp (working copy)
> > @@ -461,8 +461,13 @@
> > #include <signal.h>
> > #ifdef HAVE_POSIX_SPAWNP
> > #include <spawn.h>
> > +#ifdef MACOSX_FRAMEWORK
> > +#include <crt_externs.h>
> > +#define environ (*_NSGetEnviron())
> > +#else
> > extern char** environ;
> > #endif
> > +#endif
> > 
> > #if 0
> > /************************************************************************
> > /
> > 
> > > Thanks in advance,
> 
> Thanks! We got to the same solution :-). I've found the same patch in
> MacPorts
> (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-pac
> kages-base-include-HsBase.h.diff?rev=81676). It worked.
> 
> I could create a new ticket and attach the patch file. Is it ok?

Or you can commit it directly as you wish since you've commit rights. But the 
patch are not strictly identical. I tested #ifdef MACOSX_FRAMEWORK whereas the 
link you provide test #ifdef __APPLE__ . Not sure if they are equivalent in 
the GDAL context. Perhaps #ifdef __APPLE__ is better and MACOSX_FRAMEWORK too 
specific to a special flavour of building a shared lib ? Just guessing 
blindly...

> 
> --
> Jorge Arevalo
> Freelance developer
> 
> http://www.krop.com/jorgearevalo
> http://about.me/jorgeas80
> 
> Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)

From jorgearevalo at libregis.org  Fri Mar 15 15:55:18 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Fri, 15 Mar 2013 23:55:18 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <201303152303.19546.even.rouault@mines-paris.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152236.36381.even.rouault@mines-paris.org>
	<046E9069BAC447308260CBD09A391831@libregis.org>
	<201303152303.19546.even.rouault@mines-paris.org>
Message-ID: <4DC25A8283FB49AD9505B336214961A5@libregis.org>

El viernes 15 de marzo de 2013 a las 23:03, Even Rouault escribi?:
> Le vendredi 15 mars 2013 22:53:36, Jorge Ar?valo a ?crit :
> > El viernes 15 de marzo de 2013 a las 22:36, Even Rouault escribi?:
> > > Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> > > > Hello,
> > > >  
> > > > I'm getting an error compiling GDAL from trunk (r25758). I successfully
> > > > compiled GDAL from trunk before with this configure script:
> > > >  
> > > > https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> > > >  
> > > > But after last svn update to r25758, I get this error
> > > >  
> > > > https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.log
> > > >  
> > > > I haven't compiled GDAL on Mac for a while. So, The problem isn't
> > > > necessarily caused by the last update.
> > > >  
> > > > Anyone else with the same problem?
> > >  
> > > Cool that someone tests on the Mac and reports.
> > >  
> > > Well, I assumed that "extern char** environ" that contains the
> > > environment variable was available on all POSIX platforms, but
> > > apparently not.
> > >  
> > > http://www.gnu.org/software/gnulib/manual/html_node/environ.html suggests
> > > me the following patch. Please test and report if it works.
> > >  
> > > Index: port/cpl_spawn.cpp
> > > ===================================================================
> > > --- port/cpl_spawn.cpp (revision 25734)
> > > +++ port/cpl_spawn.cpp (working copy)
> > > @@ -461,8 +461,13 @@
> > > #include <signal.h>
> > > #ifdef HAVE_POSIX_SPAWNP
> > > #include <spawn.h>
> > > +#ifdef MACOSX_FRAMEWORK
> > > +#include <crt_externs.h>
> > > +#define environ (*_NSGetEnviron())
> > > +#else
> > > extern char** environ;
> > > #endif
> > > +#endif
> > >  
> > > #if 0
> > > /************************************************************************
> > > /
> > >  
> > > > Thanks in advance,
> >  
> > Thanks! We got to the same solution :-). I've found the same patch in
> > MacPorts
> > (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-pac
> > kages-base-include-HsBase.h.diff?rev=81676). It worked.
> >  
> > I could create a new ticket and attach the patch file. Is it ok?
>  
> Or you can commit it directly as you wish since you've commit rights. But the  
> patch are not strictly identical. I tested #ifdef MACOSX_FRAMEWORK whereas the  
> link you provide test #ifdef __APPLE__ . Not sure if they are equivalent in  
> the GDAL context. Perhaps #ifdef __APPLE__ is better and MACOSX_FRAMEWORK too  
> specific to a special flavour of building a shared lib ? Just guessing  
> blindly...
>  
> >  
> > --
> > Jorge Arevalo
> > Freelance developer
> >  
> > http://www.krop.com/jorgearevalo
> > http://about.me/jorgeas80
> >  
> > Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)  

Honestly, I'm not sure.  

__APPLE__ is a gcc predefined macro (as listed here http://sourceforge.net/p/predef/wiki/OperatingSystems/), and MACOSX_FRAMEWORK is defined by GDAL in configure time if the user specified --with-macosx-framework and 'Darwin' is present executing uname. That option tells GDAL to be constructed as a Mac OS X Framework.

Both macros are used in the sources. Why do we have 2 options to the same thing? Or am I wrong and they have different purposes?

--  
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)

From woklist at kyngchaos.com  Fri Mar 15 17:05:27 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 15 Mar 2013 19:05:27 -0500
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <4DC25A8283FB49AD9505B336214961A5@libregis.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152236.36381.even.rouault@mines-paris.org>
	<046E9069BAC447308260CBD09A391831@libregis.org>
	<201303152303.19546.even.rouault@mines-paris.org>
	<4DC25A8283FB49AD9505B336214961A5@libregis.org>
Message-ID: <5D3D6C27-E1CC-437E-AB81-F328A6707F34@kyngchaos.com>

On Mar 15, 2013, at 5:55 PM, Jorge Ar?valo wrote:

>>>> http://www.gnu.org/software/gnulib/manual/html_node/environ.html suggests
>>>> me the following patch. Please test and report if it works.
>>>> 
>>>> Index: port/cpl_spawn.cpp
>>>> ===================================================================
>>>> --- port/cpl_spawn.cpp (revision 25734)
>>>> +++ port/cpl_spawn.cpp (working copy)
>>>> @@ -461,8 +461,13 @@
>>>> #include <signal.h>
>>>> #ifdef HAVE_POSIX_SPAWNP
>>>> #include <spawn.h>
>>>> +#ifdef MACOSX_FRAMEWORK
>>>> +#include <crt_externs.h>
>>>> +#define environ (*_NSGetEnviron())
>>>> +#else
>>>> extern char** environ;
>>>> #endif
>>>> +#endif
>>>> 
>>>> #if 0
>>>> /************************************************************************
>>>> /
>>>> 
>>>>> Thanks in advance,
>>> 
>>> Thanks! We got to the same solution :-). I've found the same patch in
>>> MacPorts
>>> (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-pac
>>> kages-base-include-HsBase.h.diff?rev=81676). It worked.
>>> 
>>> I could create a new ticket and attach the patch file. Is it ok?
>> 
>> Or you can commit it directly as you wish since you've commit rights. But the  
>> patch are not strictly identical. I tested #ifdef MACOSX_FRAMEWORK whereas the  
>> link you provide test #ifdef __APPLE__ . Not sure if they are equivalent in  
>> the GDAL context. Perhaps #ifdef __APPLE__ is better and MACOSX_FRAMEWORK too  
>> specific to a special flavour of building a shared lib ? Just guessing  
>> blindly...
> 
> Honestly, I'm not sure.  
> 
> __APPLE__ is a gcc predefined macro (as listed here http://sourceforge.net/p/predef/wiki/OperatingSystems/), and MACOSX_FRAMEWORK is defined by GDAL in configure time if the user specified --with-macosx-framework and 'Darwin' is present executing uname. That option tells GDAL to be constructed as a Mac OS X Framework.
> 
> Both macros are used in the sources. Why do we have 2 options to the same thing? Or am I wrong and they have different purposes?
> 
__APPLE__ is standard for OS X, this is what should be used.  MACOSX_FRAMEWORK is internal for GDAL, and is for when GDAL is configured to make a framework instead of a standard dylib.  Both configurations use all the same system headers and APIs otherwise.  (Note that the "dylib" in the error has nothing to do with a non-framework build, the basic compilation always produces this internally and it is at installation that it is made into a framework if requested.)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From even.rouault at mines-paris.org  Fri Mar 15 17:06:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 16 Mar 2013 01:06:46 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <4DC25A8283FB49AD9505B336214961A5@libregis.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152303.19546.even.rouault@mines-paris.org>
	<4DC25A8283FB49AD9505B336214961A5@libregis.org>
Message-ID: <201303160106.46710.even.rouault@mines-paris.org>

Le vendredi 15 mars 2013 23:55:18, Jorge Ar?valo a ?crit :
> El viernes 15 de marzo de 2013 a las 23:03, Even Rouault escribi?:
> > Le vendredi 15 mars 2013 22:53:36, Jorge Ar?valo a ?crit :
> > > El viernes 15 de marzo de 2013 a las 22:36, Even Rouault escribi?:
> > > > Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> > > > > Hello,
> > > > > 
> > > > > I'm getting an error compiling GDAL from trunk (r25758). I
> > > > > successfully compiled GDAL from trunk before with this configure
> > > > > script:
> > > > > 
> > > > > https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> > > > > 
> > > > > But after last svn update to r25758, I get this error
> > > > > 
> > > > > https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.lo
> > > > > g
> > > > > 
> > > > > I haven't compiled GDAL on Mac for a while. So, The problem isn't
> > > > > necessarily caused by the last update.
> > > > > 
> > > > > Anyone else with the same problem?
> > > > 
> > > > Cool that someone tests on the Mac and reports.
> > > > 
> > > > Well, I assumed that "extern char** environ" that contains the
> > > > environment variable was available on all POSIX platforms, but
> > > > apparently not.
> > > > 
> > > > http://www.gnu.org/software/gnulib/manual/html_node/environ.html
> > > > suggests me the following patch. Please test and report if it works.
> > > > 
> > > > Index: port/cpl_spawn.cpp
> > > > ===================================================================
> > > > --- port/cpl_spawn.cpp (revision 25734)
> > > > +++ port/cpl_spawn.cpp (working copy)
> > > > @@ -461,8 +461,13 @@
> > > > #include <signal.h>
> > > > #ifdef HAVE_POSIX_SPAWNP
> > > > #include <spawn.h>
> > > > +#ifdef MACOSX_FRAMEWORK
> > > > +#include <crt_externs.h>
> > > > +#define environ (*_NSGetEnviron())
> > > > +#else
> > > > extern char** environ;
> > > > #endif
> > > > +#endif
> > > > 
> > > > #if 0
> > > > /********************************************************************
> > > > **** /
> > > > 
> > > > > Thanks in advance,
> > > 
> > > Thanks! We got to the same solution :-). I've found the same patch in
> > > MacPorts
> > > (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-
> > > pac kages-base-include-HsBase.h.diff?rev=81676). It worked.
> > > 
> > > I could create a new ticket and attach the patch file. Is it ok?
> > 
> > Or you can commit it directly as you wish since you've commit rights. But
> > the patch are not strictly identical. I tested #ifdef MACOSX_FRAMEWORK
> > whereas the link you provide test #ifdef __APPLE__ . Not sure if they
> > are equivalent in the GDAL context. Perhaps #ifdef __APPLE__ is better
> > and MACOSX_FRAMEWORK too specific to a special flavour of building a
> > shared lib ? Just guessing blindly...
> > 
> > > --
> > > Jorge Arevalo
> > > Freelance developer
> > > 
> > > http://www.krop.com/jorgearevalo
> > > http://about.me/jorgeas80
> > > 
> > > Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)
> 
> Honestly, I'm not sure.
> 
> __APPLE__ is a gcc predefined macro (as listed here
> http://sourceforge.net/p/predef/wiki/OperatingSystems/), and
> MACOSX_FRAMEWORK is defined by GDAL in configure time if the user
> specified --with-macosx-framework and 'Darwin' is present executing uname.
> That option tells GDAL to be constructed as a Mac OS X Framework.
> 
> Both macros are used in the sources. Why do we have 2 options to the same
> thing? Or am I wrong and they have different purposes?

I'd say that for the environ stuff #ifdef __APPLE__ sounds more appropriate ?

> 
> --
> Jorge Arevalo
> Freelance developer
> 
> http://www.krop.com/jorgearevalo
> http://about.me/jorgeas80
> 
> Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)

From jan.heckman at gmail.com  Sat Mar 16 00:49:02 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sat, 16 Mar 2013 08:49:02 +0100
Subject: [gdal-dev] Issues with FileGDB support
In-Reply-To: <048101ce21ab$5ae93440$10bb9cc0$@mac.com>
References: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
	<048101ce21ab$5ae93440$10bb9cc0$@mac.com>
Message-ID: <CAKMUAtD+nULZHQZvDWu8P+hmQ0xNfkHFceXOF2=pX=DC+Wp0yQ@mail.gmail.com>

Hi,
I have the gdb support working on a windows box, compiled 1.9.1, some time
ago.
>From memory:
Remember filegdb support is a plugin. The dll needs to be in a specific
gdalplugins directory.
I guess that if the support is compiled correctly and the dll is not found,
this would be mentioned in an error.
I had to edit nmake.opt; have to do that anyway for lots of support.
Lastly, when I built, there were 2 windows lib/dll's from esri (for
filegdb),  1 for vs 2008, and 1 for vs 2010.
Only the first works, which compelled me to compile using VS 2008.
If you have another vs version installed, you need to run the correct
vsvars.bat before starting (commandline) compilation.

FGDB_ENABLED = YES
FGDB_PLUGIN = YES
FGDB_SDK =
"D:\win7users\jan\Documents\Visual_Studio_2012\Projects\FileGDB_API_VS2008_1_2"
FGDB_INC = $(FGDB_SDK)\include
FGDB_LIB = $(FGDB_SDK)\lib\FileGDBAPI.lib

Specific supportfiles - see if these are compiled - are
in gdal-1.9.1\ogr\ogrsf_frmts\filegdb.
You should see ogr_FileGDB.dll and ogr_FileGDB.lib.
Let me know if this helps any.
Jan

On Fri, Mar 15, 2013 at 7:31 PM, Paul Norman <penorman at mac.com> wrote:

> > From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> > To: gdal-dev at lists.osgeo.org
> > Subject: [gdal-dev] Issues with FileGDB support
> >
> > Hello
> >
> > I have built gdal from source (1.9.2, latest stable) with Esri FileGDB
> > support included. This is specified during the configuration, --with-
> > fgdb=/usr/local/FileGDB_API/.
> >
> > The configuration and build goes well and I can see that the fileGDB
> > libs get linked but when I check the format support with for example
> > 'ogrinfo --format' FileGDB doesn't show up. ldd shows that the binary is
> > linked to the fileGDB libs.
> >
> > At this point I guess that the most likely explanation for this is an
> > error in the code, but I haven't checked it.
> >
> > So, is FileGDB support working for you?
>
> It's been awhile, but I successfully built gdal with FileGDB support.
>
> My notes indicate I used ./configure --with-fgdb=/home/pnorman/FileGDB_API
> and installed files from that location to /usr/local/lib/libFileGDBAPI.so
> and /usr/local/lib/libfgdbunixrtl.so, as well as
> /usr/share/doc/filegdb-api/.
>
> I believe I installed from svn, and ogrinfo --version reports GDAL 2.0dev,
> released 2011/12/29
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130316/a8dff32f/attachment.html>

From jmckenna at gatewaygeomatics.com  Sat Mar 16 06:13:19 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 16 Mar 2013 10:13:19 -0300
Subject: [gdal-dev] Issues with FileGDB support
In-Reply-To: <CAKMUAtD+nULZHQZvDWu8P+hmQ0xNfkHFceXOF2=pX=DC+Wp0yQ@mail.gmail.com>
References: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
	<048101ce21ab$5ae93440$10bb9cc0$@mac.com>
	<CAKMUAtD+nULZHQZvDWu8P+hmQ0xNfkHFceXOF2=pX=DC+Wp0yQ@mail.gmail.com>
Message-ID: <51446FEF.4040301@gatewaygeomatics.com>

On 2013-03-16 4:49 AM, Jan Heckman wrote:
> Hi,
> I have the gdb support working on a windows box, compiled 1.9.1, some
> time ago.
> From memory:
> Remember filegdb support is a plugin. The dll needs to be in a specific
> gdalplugins directory.
> I guess that if the support is compiled correctly and the dll is not
> found, this would be mentioned in an error.
> I had to edit nmake.opt; have to do that anyway for lots of support.
> Lastly, when I built, there were 2 windows lib/dll's from esri (for
> filegdb),  1 for vs 2008, and 1 for vs 2010.
> Only the first works, which compelled me to compile using VS 2008.
> If you have another vs version installed, you need to run the correct
> vsvars.bat before starting (commandline) compilation.
> 
> FGDB_ENABLED = YES
> FGDB_PLUGIN = YES
> FGDB_SDK =
> "D:\win7users\jan\Documents\Visual_Studio_2012\Projects\FileGDB_API_VS2008_1_2"
> FGDB_INC = $(FGDB_SDK)\include 
> FGDB_LIB = $(FGDB_SDK)\lib\FileGDBAPI.lib
> 
> Specific supportfiles - see if these are compiled - are
> in gdal-1.9.1\ogr\ogrsf_frmts\filegdb.
> You should see ogr_FileGDB.dll and ogr_FileGDB.lib.
> Let me know if this helps any.
> Jan
> 
>

I've been maintaining my Windows build steps at
http://trac.osgeo.org/gdal/wiki/FileGDB  It would be most excellent if
others can write their advice/steps on this wiki page as they travel
down this path (whatever operating system path it is).  Thanks!  (yes
I'm a broken please-help-document record!)

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From diego.gnesi at gmail.com  Sat Mar 16 08:14:30 2013
From: diego.gnesi at gmail.com (Diego Gnesi Bartolani)
Date: Sat, 16 Mar 2013 16:14:30 +0100
Subject: [gdal-dev] Get a list of supported file formats
Message-ID: <CAML4TunJG5QcMRrn2Lyztf3gnNHwFoP4qwcNtSQkT0-1PZkGyA@mail.gmail.com>

Hi,

I'm writing a python plugin for QGIS. I need to implement a "Save As"
dialog and the user should choose among all GDAL's supported file formats.
Is there a method inside the GDAL API to iterate over all the supported
raster (and only raster) file formats and get the file extension and the
format definition, i.e. the tuple ("*.TIF, *.tif", "GeoTIFF")?

Thanks!

Diego
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130316/fce0eb07/attachment.html>

From pcorti at gmail.com  Sat Mar 16 12:51:42 2013
From: pcorti at gmail.com (Paolo Corti)
Date: Sat, 16 Mar 2013 20:51:42 +0100
Subject: [gdal-dev] How to set OGR_INTERLEAVED_READING when using the
	OSM driver
In-Reply-To: <201303152247.41993.even.rouault@mines-paris.org>
References: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>
	<201303152247.41993.even.rouault@mines-paris.org>
Message-ID: <CAHXrU-L7_AnjWL9Ftgi74k=r3Ug9d2jZ4ndb0vBJ7r_psRVMxA@mail.gmail.com>

Hi Even and Jukka, please follow me inline:

On Fri, Mar 15, 2013 at 10:47 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>>
>> According to the documentation anyway, the option should not be set at
>> all, as "the ogr2ogr application has been modified to use that
>> OGR_INTERLEAVED_READING mode without any particular user action".
>>
>> Ideas? Am I doing something obviously wrong?
>
> Indeed, there's nothing special to do. The "ogr2ogr test.shp myfile.pbf lines"
> line is sufficient and I've just tested it successfully.
>
> My hypothesis, from the above debug log, would be that you don't run the
> ogr2ogr binary from trunk, but perhaps the one from a previous release...
>

You are right, I had a previous GDAL version on the computer I am
working (I think 1.9.2), but after building from trunk the GDAL
commands seem to have been correctly updated:

$ ogr2ogr --version
GDAL 1.10dev, released 2011/12/29

> Configuration options are given as --config OPTION VALUE
>
> This is the command I have been using for converting OSM data into Spatialite
>
> ogr2ogr finland.sqlite finland.osm.pbf -f SQLite -dsco SPATIALITE=YES
> -gt 10000 --config OGR_SQLITE_SYNCHRONOUS OFF

Thanks for the information, but it is not working for me.
I am trying to load to a PostGIS layer using the following syntax. It
seems that first time the table is only created, without uploading
features to it.
Using ogr2ogr with the -append option after it, I will be able to
manage to upload features to it, but only 10k at a time, as the
OGR_INTERLEAVED_READING configuration seems to be ignored when
appending:

The first time I run ogr2ogr, PostGIS layer is correctly created, but
features not uploaded:

$ ogr2ogr -f PostgreSQL -lco GEOMETRY_NAME=the_geom -nln
myschema.osm_roads PG:"dbname='mydb' user='me' password='mypassword'"
myosm.pbf lines --config OGR_INTERLEAVED_READING YES --debug ON
OGR: OGROpen(myosm.pbf/0x91e21c8) succeeded as OSM.
PG: DBName="'mydb'"
PG: PostgreSQL version string : 'PostgreSQL 9.1.8 on
i686-pc-linux-gnu, compiled by gcc (Ubuntu/Linaro 4.6.3-1ubuntu5)
4.6.3, 32-bit'
PG: PostGIS version string : '2.0 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Layer 'osm_roads' geometry type: POINT:Point, Dim=2
OGR_PG_NOTICE: NOTICE:  CREATE TABLE will create implicit sequence
"osm_roads_ogc_fid_seq" for serial column "osm_roads.ogc_fid"
OGR_PG_NOTICE: NOTICE:  CREATE TABLE / PRIMARY KEY will create
implicit index "osm_roads_pk" for table "osm_roads"
PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'osm_roads'
PG: Layer 'osm_roads' geometry type: LINESTRING:Line String, Dim=2
OSM: OGR_INTERLEAVED_READING = 1
OSM: Got bounds : minx=11.361760, miny=40.717850, maxx=14.099890, maxy=42.916190
OSM: For layer points, new max size is 128
OSM: For layer points, new max size is 320
OSM: For layer points, new max size is 608
OSM: For layer points, new max size is 1040
OSM: For layer points, new max size is 1688
OSM: For layer points, new max size is 2660
OSM: For layer points, new max size is 4118
OSM: For layer points, new max size is 6305
OSM: For layer points, new max size is 9585
OSM: For layer points, new max size is 14505
OSM: For layer points, new max size is 21885
OSM: For layer points, new max size is 32955
OSM: For layer points, new max size is 49560
OSM: Switching to 'points' as they are no more feature in 'lines'
OGR2OGR: 0 features written in layer 'myschema.osm_roads'
OSM: Number of bytes read in file : 14874118

And after running again ogr2ogr with the append option, the first
10.001 features are appended to the layer:

$ ogr2ogr -f PostgreSQL -lco GEOMETRY_NAME=the_geom -nln
myschema.osm_roads PG:"dbname='mydb' user='me' password='mypassword'"
myosm.pbf lines -append
WARNING: Layer creation options ignored since an existing layer is
         being appended to.
ERROR 1: Too many features have accumulated in lines layer. Use
OGR_INTERLEAVED_READING=YES mode

If I try to use the OGR_INTERLEAVED_READING option with -append, the
process won't work as "Layer creation options ignored since an
existing layer is being appended to." according to the output

thanks for your invaluable feedback
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From even.rouault at mines-paris.org  Sat Mar 16 15:32:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 16 Mar 2013 23:32:47 +0100
Subject: [gdal-dev] Get a list of supported file formats
In-Reply-To: <CAML4TunJG5QcMRrn2Lyztf3gnNHwFoP4qwcNtSQkT0-1PZkGyA@mail.gmail.com>
References: <CAML4TunJG5QcMRrn2Lyztf3gnNHwFoP4qwcNtSQkT0-1PZkGyA@mail.gmail.com>
Message-ID: <201303162332.47056.even.rouault@mines-paris.org>

Le samedi 16 mars 2013 16:14:30, Diego Gnesi Bartolani a ?crit :
> Hi,
> 
> I'm writing a python plugin for QGIS. I need to implement a "Save As"
> dialog and the user should choose among all GDAL's supported file formats.
> Is there a method inside the GDAL API to iterate over all the supported
> raster (and only raster) file formats and get the file extension and the
> format definition, i.e. the tuple ("*.TIF, *.tif", "GeoTIFF")?

Look at http://svn.osgeo.org/gdal/trunk/gdal/gcore/gdal_misc.cpp, lines 2344 
to 2453

> 
> Thanks!
> 
> Diego

From even.rouault at mines-paris.org  Sat Mar 16 15:51:12 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 16 Mar 2013 23:51:12 +0100
Subject: [gdal-dev] How to set OGR_INTERLEAVED_READING when using the
	OSM driver
In-Reply-To: <CAHXrU-L7_AnjWL9Ftgi74k=r3Ug9d2jZ4ndb0vBJ7r_psRVMxA@mail.gmail.com>
References: <CAHXrU-J-iXqRLhrNnDePqubvfVfwN9+SLieX7pqCc9NJSyM8MA@mail.gmail.com>
	<201303152247.41993.even.rouault@mines-paris.org>
	<CAHXrU-L7_AnjWL9Ftgi74k=r3Ug9d2jZ4ndb0vBJ7r_psRVMxA@mail.gmail.com>
Message-ID: <201303162351.12123.even.rouault@mines-paris.org>

Le samedi 16 mars 2013 20:51:42, Paolo Corti a ?crit :
> Hi Even and Jukka, please follow me inline:
> 
> On Fri, Mar 15, 2013 at 10:47 PM, Even Rouault
> 
> <even.rouault at mines-paris.org> wrote:
> >> According to the documentation anyway, the option should not be set at
> >> all, as "the ogr2ogr application has been modified to use that
> >> OGR_INTERLEAVED_READING mode without any particular user action".
> >> 
> >> Ideas? Am I doing something obviously wrong?
> > 
> > Indeed, there's nothing special to do. The "ogr2ogr test.shp myfile.pbf
> > lines" line is sufficient and I've just tested it successfully.
> > 
> > My hypothesis, from the above debug log, would be that you don't run the
> > ogr2ogr binary from trunk, but perhaps the one from a previous release...
> 
> You are right, I had a previous GDAL version on the computer I am
> working (I think 1.9.2), but after building from trunk the GDAL
> commands seem to have been correctly updated:
> 
> $ ogr2ogr --version
> GDAL 1.10dev, released 2011/12/29
> 
> > Configuration options are given as --config OPTION VALUE
> > 
> > This is the command I have been using for converting OSM data into
> > Spatialite
> > 
> > ogr2ogr finland.sqlite finland.osm.pbf -f SQLite -dsco SPATIALITE=YES
> > -gt 10000 --config OGR_SQLITE_SYNCHRONOUS OFF
> 
> Thanks for the information, but it is not working for me.
> I am trying to load to a PostGIS layer using the following syntax. It
> seems that first time the table is only created, without uploading
> features to it.
> Using ogr2ogr with the -append option after it, I will be able to
> manage to upload features to it, but only 10k at a time, as the
> OGR_INTERLEAVED_READING configuration seems to be ignored when
> appending:
> 
> The first time I run ogr2ogr, PostGIS layer is correctly created, but
> features not uploaded:
> 
> $ ogr2ogr -f PostgreSQL -lco GEOMETRY_NAME=the_geom -nln
> myschema.osm_roads PG:"dbname='mydb' user='me' password='mypassword'"
> myosm.pbf lines --config OGR_INTERLEAVED_READING YES --debug ON

Hum, actually looking at ogr2ogr.cpp, I see that if you specified  --config 
OGR_INTERLEAVED_READING YES , it would not use the special routine to do 
interleaved reading... It was working if you didn't specify anything (YES was 
assumed to be the default value). I've just fixed that so that specifying --
config OGR_INTERLEAVED_READING YES also works ...


From JPalmer at linz.govt.nz  Sat Mar 16 19:23:10 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Sun, 17 Mar 2013 15:23:10 +1300
Subject: [gdal-dev] Missing Python Geometry Methods
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F7363450A@prdlsmmsg01.ad.linz.govt.nz>

Any reason these methods are missing from the python geometry API:

swapXY()
Polygonize()

??

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From markus.u.mueller at zoho.com  Sun Mar 17 18:27:21 2013
From: markus.u.mueller at zoho.com (markus.u.mueller)
Date: Sun, 17 Mar 2013 18:27:21 -0700
Subject: [gdal-dev] C#-bindings and AccessViolationException
Message-ID: <13d7b1ba41f.-7819226603112424032.1572387785842852064@zoho.com>


Dear listers,

I have troubles with the C#-bindings of GDAL. I use FWTools 2.4.7 on Windows XP 32bit, VS 2010 and .NET 4.0. When I try to run one of the GDAL-apps, GDALInfo.cs for example, I keep getting an Error saying
"AccessViolationException was unhandled. Attempted to read or write protected memory. This is often an indication that other memory is corrupt.


I stumbled upon bits and pieces of other people having the same problem but did not get a consistent idea what is behind the problem and how it can be solved. Obviously there are also 2 trac tickets that seem to be related to this problem.
http://trac.osgeo.org/gdal/ticket/4049 and
http://trac.osgeo.org/gdal/ticket/3249




Any help would be appreciated,




Markus







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130317/eed6837b/attachment.html>

From szekerest at gmail.com  Sun Mar 17 23:06:43 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 18 Mar 2013 07:06:43 +0100
Subject: [gdal-dev] C#-bindings and AccessViolationException
In-Reply-To: <13d7b1ba41f.-7819226603112424032.1572387785842852064@zoho.com>
References: <13d7b1ba41f.-7819226603112424032.1572387785842852064@zoho.com>
Message-ID: <CACALY+QkZFPo3U=4yeM1yon57fpMr_5HWOpUSBc7qjVov3ugVQ@mail.gmail.com>

Markus,

Do you experience the same with a newer set of binaries, like with the
daily builds available at: http://www.gisinternals.com/sdk/ ?

Best regards,

Tamas



2013/3/18 markus.u.mueller <markus.u.mueller at zoho.com>

> **
>
> Dear listers,
>
> I have troubles with the C#-bindings of GDAL. I use FWTools 2.4.7 on
> Windows XP 32bit, VS 2010 and .NET 4.0. When I try to run one of the
> GDAL-apps, GDALInfo.cs for example, I keep getting an Error saying
> "AccessViolationException was unhandled. Attempted to read or write
> protected memory. This is often an indication that other memory is corrupt.
>
> I stumbled upon bits and pieces of other people having the same problem
> but did not get a consistent idea what is behind the problem and how it can
> be solved. Obviously there are also 2 trac tickets that seem to be related
> to this problem.
> http://trac.osgeo.org/gdal/ticket/4049 and
> http://trac.osgeo.org/gdal/ticket/3249
>
>
> Any help would be appreciated,
>
>
> Markus
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/c5378ce9/attachment.html>

From alisson.uece at gmail.com  Mon Mar 18 06:25:41 2013
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Mon, 18 Mar 2013 10:25:41 -0300
Subject: [gdal-dev] Polygonizer / Lines
In-Reply-To: <CADEnnOOuK+rK+6YLhE_eh02DtZ-sVrAXFdSfYa+zBQMDwx8j8A@mail.gmail.com>
References: <CALwK9Yysc6-e63UfVmuLrxyYTk9e3PcZd-SgSbtrY04CSrVVhw@mail.gmail.com>
	<CAMKgpOas9ccJXfbLeGnqsFKnVeg24mqS7Lxdgy0zXzB7rhYD-w@mail.gmail.com>
	<CALwK9Yz186boQNzEmen48fJY6=pN3-7RR6r02tZ-hqr8GV0i_w@mail.gmail.com>
	<CAMKgpOa5+wHqATxgoeM1veqawa0nOOCg5A7FEG6reYzs_4Oq5Q@mail.gmail.com>
	<CALwK9YyeSgnX7-R4bFGYNAW=RS=p0ZnvAxsdXBAjnm_FtiRr7A@mail.gmail.com>
	<CADEnnOOuK+rK+6YLhE_eh02DtZ-sVrAXFdSfYa+zBQMDwx8j8A@mail.gmail.com>
Message-ID: <CALwK9YzsS47=j0iduhbEHA+T5=5WX5iCQzXdpxPd0y2kfdd8Nw@mail.gmail.com>

Yes Peter. I'm trying to get the Thiessen polygons.

Thanks for the tips, but the Polygonize method of OGRMultiLineString worked
for me.

Thank you.

2013/3/15 Peter Halls <p.halls at york.ac.uk>

> Alisson,
>
>      in vector mode, where you are working with linestrings, the procedure
> is as described in Stephen Wise's book, GIS Basics (Taylor & Francis, 2002)
> chapters 2 - 4.  You will need to compute the intersection of all the lines
> (Chapter 3), split them at the intersections and either duplicate the
> common boundary segments or (my preferred way) build a simple topology
> table that lists each line segment required for each polygon.  That way you
> can still output the set of complete polygons to a shapefile (no
> topology).  You will need to take account of the fact that some line
> segments must be reversed when building the polygon.
>
> Does that help?
>
> Best wishes,
>
> Peter
>
>
> On 15 March 2013 12:50, Alisson Barbosa <alisson.uece at gmail.com> wrote:
>
>> Thank you Chaitanya,
>>
>> I had read the explanation of Peter Halls. But that was *raster
>> polygonization*. I am currently working with another type: *
>> polygonization of OGRLineStrings*.
>>
>> My question was because i was not able to polygonize using the mentioned
>> method. I created an OGRMultiLineString or an OGRGeometryCollection and
>> added geometries (many OGRLineStrings) by addGeometry or
>> addGeometryDirectly methods. But the polygonization always returned null.
>>
>> I solved using this:
>>
>> OGRMultiLineString *mls = new OGRMultiLineString();
>> OGRMultiLineString* pTemp = NULL;
>> while(...) //iteration of lines
>> {
>>         //creation of line
>>         pTemp = static_cast<OGRMultiLineString*>(mls->Union(line));
>>         if (pTemp != NULL)
>>         {
>>             if( mls != NULL)
>>             {
>>                 if( mls->getNumGeometries() > 0)
>>                     delete mls;
>>             }
>>             mls = pTemp;
>>         }
>> }
>>
>> Thanks,
>>
>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>
>>> Alisson,
>>>
>>> You can refer to the method's documentation here:
>>> http://www.gdal.org/ogr/classOGRGeometry.html#a674319670e735bf6d4049300096157ec
>>>
>>> The mechanism of this operation was already explained Peter Halls in
>>> this mailing list[1]. GEOS does a good job identifying line strings
>>> touching at end points and then combining them to make rings and then
>>> polygons.
>>>
>>> However, it's your job to ensure that all the line strings passed to the
>>> method are part of a single polygon.
>>>
>>> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034793.html
>>>
>>>
>>> On Thu, Mar 14, 2013 at 11:58 PM, Alisson Barbosa <
>>> alisson.uece at gmail.com> wrote:
>>>
>>>> Can you explain a bit better?
>>>>
>>>>
>>>> 2013/3/14 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>>>>
>>>>> Allison,
>>>>>
>>>>> Check out OGRGeometry::Polygonize()
>>>>>
>>>>> The result depends on the type of intersections in your lines.
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya Kumar CH
>>>>> On 14 Mar 2013 21:53, "Alisson Barbosa" <alisson.uece at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi friends,
>>>>>>
>>>>>> I have a set of OGRLineStrings and an OGRLinearRing with many
>>>>>> intersections. I would like to polygonize this set of lines. Can anybody
>>>>>> help me?
>>>>>>
>>>>>> Best regards,
>>>>>> --
>>>>>> Alisson Barbosa
>>>>>> Systems Analyst - FUNCEME
>>>>>> M.Sc. in Computer Science - MACC
>>>>>> Graduate in Computer Science  - UECE
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Alisson Barbosa
>>>> Systems Analyst - FUNCEME
>>>> M.Sc. in Computer Science - MACC
>>>> Graduate in Computer Science  - UECE
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ----------------------------------------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Team Leader Applications Support and
> Training,
>                Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>                 Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> ----------------------------------------------------------------------------------------------------------------
>



-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/f1f844ec/attachment.html>

From jp.alcantara at geographica.gs  Mon Mar 18 13:02:37 2013
From: jp.alcantara at geographica.gs (=?ISO-8859-1?Q?Juan_Pedro_P=E9rez_Alc=E1ntara?=)
Date: Mon, 18 Mar 2013 21:02:37 +0100
Subject: [gdal-dev] Generate DXF labels from a PostGIS
Message-ID: <CACFPusgneO=8Gaz=jibyrxQbiCrQbwPef_gk_Qj6cZbBfo8C-Q@mail.gmail.com>

Hi,

I don't know if this is the list for this question, if not, please forvige
my clumsyness.

So far, I've been able to create multilayered DXF from polygon geometries
in PostGIS, but now I'm trying to create a LABEL layer with text from the
database. I've tried with OGR_STYLE, but to no avail, I can't find an
example.

Do you know where I can find one?

Thanks a lot,
Juan Pedro P?rez Alc?ntara
Technical Director
jp.alcantara at geographica.gs <alberto.asuero at geographica.gs>
+34 670 786 422
Rodio 35
41007 Sevilla
Spain
<http://maps.google.es/maps?f=q&source=s_q&hl=es&geocode=&q=rodio+35,+sevilla+espa%C3%B1a&sll=40.396764,-3.713379&sspn=10.787528,19.753418&ie=UTF8&hq=&hnear=Calle+Rodio,+35,+41007+Sevilla,+Andaluc%C3%ADa&t=h&z=16>
T  +34  954 437 818
F  +34  955 110 441
Visit our web
*www.geographica.gs*
<http://www.geographica.gs/>
Follow us on Twitter
*@Geographica_ST*
<https://twitter.com/#%21/Geographica_GS>
[image: Twitter] <https://twitter.com/#%21/Geographica_ST>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/65f87941/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logo.png
Type: image/png
Size: 2424 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/65f87941/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: maps.png
Type: image/png
Size: 398 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/65f87941/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: icon_twitter.png
Type: image/png
Size: 1196 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/65f87941/attachment-0002.png>

From jefflacostegdal at gmail.com  Mon Mar 18 13:06:12 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Mon, 18 Mar 2013 16:06:12 -0400
Subject: [gdal-dev] GDAL using Visual Studio 2012 And GeoPdf
Message-ID: <CAFOE_BfdETXsrc7eEcGDgaOAg+fwsRsLgk5ZJDPcoyrWxbV8xg@mail.gmail.com>

Hi,

Is there a GDAL dev build using Visual Studio  2012 with Geopdf dependent
library ?

I built GDAL using VS 2012 but run into an issue with missing 3rd party lib
to enable Geopdf format.

Any hints where to find either a VS 2012 static geopdf .lib (like Poppler)
or
may be VS 2010 Poppler stub .lib and .dll ?

Thanks

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/ff914327/attachment.html>

From ragi at burhum.com  Mon Mar 18 13:45:52 2013
From: ragi at burhum.com (rburhum)
Date: Mon, 18 Mar 2013 13:45:52 -0700 (PDT)
Subject: [gdal-dev] Issues with FileGDB support
In-Reply-To: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
References: <15260.136.163.203.9.1363332815.squirrel@lavabit.com>
Message-ID: <1363639552196-5041216.post@n6.nabble.com>

Hello quiztli,

I have it working on Windows and OSX. I believe EvenR did the port for
Linux. 

If I had to do a wild guess, I would say that the dynamic library for the
esri implementation is not being found at run-time. Check your
LD_LIBRARY_PATH (Linux) / DYLD_LIBRARY_PATH (OSX) to make sure that the
required libraries will be found.

I would recommend stopping by the IRC #gdal channel on Freenode. If I am not
lurking, somebody else may be able to help you.

Best Regards,

- Ragi




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Issues-with-FileGDB-support-tp5040537p5041216.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jorgearevalo at libregis.org  Mon Mar 18 14:15:23 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Mon, 18 Mar 2013 22:15:23 +0100
Subject: [gdal-dev] Error compiling GDAL from trunk on Mac OS X 10.6.8
In-Reply-To: <201303160106.46710.even.rouault@mines-paris.org>
References: <3100774DE78C4235B97A3015E138B525@libregis.org>
	<201303152303.19546.even.rouault@mines-paris.org>
	<4DC25A8283FB49AD9505B336214961A5@libregis.org>
	<201303160106.46710.even.rouault@mines-paris.org>
Message-ID: <0E4B40267AC7406CBB5426211286B2DD@libregis.org>

El s?bado 16 de marzo de 2013 a las 01:06, Even Rouault escribi?:
> Le vendredi 15 mars 2013 23:55:18, Jorge Ar?valo a ?crit :
> > El viernes 15 de marzo de 2013 a las 23:03, Even Rouault escribi?:
> > > Le vendredi 15 mars 2013 22:53:36, Jorge Ar?valo a ?crit :
> > > > El viernes 15 de marzo de 2013 a las 22:36, Even Rouault escribi?:
> > > > > Le vendredi 15 mars 2013 20:09:57, Jorge Ar?valo a ?crit :
> > > > > > Hello,
> > > > > >  
> > > > > > I'm getting an error compiling GDAL from trunk (r25758). I
> > > > > > successfully compiled GDAL from trunk before with this configure
> > > > > > script:
> > > > > >  
> > > > > > https://dl.dropbox.com/u/6599273/gdal/configure_gdal.sh
> > > > > >  
> > > > > > But after last svn update to r25758, I get this error
> > > > > >  
> > > > > > https://dl.dropbox.com/u/6599273/errors/gdal_trunk_compile_error.lo
> > > > > > g
> > > > > >  
> > > > > > I haven't compiled GDAL on Mac for a while. So, The problem isn't
> > > > > > necessarily caused by the last update.
> > > > > >  
> > > > > > Anyone else with the same problem?
> > > > >  
> > > > > Cool that someone tests on the Mac and reports.
> > > > >  
> > > > > Well, I assumed that "extern char** environ" that contains the
> > > > > environment variable was available on all POSIX platforms, but
> > > > > apparently not.
> > > > >  
> > > > > http://www.gnu.org/software/gnulib/manual/html_node/environ.html
> > > > > suggests me the following patch. Please test and report if it works.
> > > > >  
> > > > > Index: port/cpl_spawn.cpp
> > > > > ===================================================================
> > > > > --- port/cpl_spawn.cpp (revision 25734)
> > > > > +++ port/cpl_spawn.cpp (working copy)
> > > > > @@ -461,8 +461,13 @@
> > > > > #include <signal.h>
> > > > > #ifdef HAVE_POSIX_SPAWNP
> > > > > #include <spawn.h>
> > > > > +#ifdef MACOSX_FRAMEWORK
> > > > > +#include <crt_externs.h>
> > > > > +#define environ (*_NSGetEnviron())
> > > > > +#else
> > > > > extern char** environ;
> > > > > #endif
> > > > > +#endif
> > > > >  
> > > > > #if 0
> > > > > /********************************************************************
> > > > > **** /
> > > > >  
> > > > > > Thanks in advance,
> > > >  
> > > > Thanks! We got to the same solution :-). I've found the same patch in
> > > > MacPorts
> > > > (http://trac.macports.org/browser/trunk/dports/lang/hugs98/files/patch-
> > > > pac kages-base-include-HsBase.h.diff?rev=81676). It worked.
> > > >  
> > > > I could create a new ticket and attach the patch file. Is it ok?
> > >  
> > > Or you can commit it directly as you wish since you've commit rights. But
> > > the patch are not strictly identical. I tested #ifdef MACOSX_FRAMEWORK
> > > whereas the link you provide test #ifdef __APPLE__ . Not sure if they
> > > are equivalent in the GDAL context. Perhaps #ifdef __APPLE__ is better
> > > and MACOSX_FRAMEWORK too specific to a special flavour of building a
> > > shared lib ? Just guessing blindly...
> > >  
> > > > --
> > > > Jorge Arevalo
> > > > Freelance developer
> > > >  
> > > > http://www.krop.com/jorgearevalo
> > > > http://about.me/jorgeas80
> > > >  
> > > > Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)
> >  
> > Honestly, I'm not sure.
> >  
> > __APPLE__ is a gcc predefined macro (as listed here
> > http://sourceforge.net/p/predef/wiki/OperatingSystems/), and
> > MACOSX_FRAMEWORK is defined by GDAL in configure time if the user
> > specified --with-macosx-framework and 'Darwin' is present executing uname.
> > That option tells GDAL to be constructed as a Mac OS X Framework.
> >  
> > Both macros are used in the sources. Why do we have 2 options to the same
> > thing? Or am I wrong and they have different purposes?
>  
>  
>  
> I'd say that for the environ stuff #ifdef __APPLE__ sounds more appropriate ?

Yes, that makes sense. I'll commit the changes right now.
  
>  
> >  
> > --
> > Jorge Arevalo
> > Freelance developer
> >  
> > http://www.krop.com/jorgearevalo
> > http://about.me/jorgeas80
> >  
> > Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)  



From markus.u.mueller at zoho.com  Mon Mar 18 15:27:39 2013
From: markus.u.mueller at zoho.com (markus.u.mueller)
Date: Mon, 18 Mar 2013 15:27:39 -0700
Subject: [gdal-dev] C#-bindings and AccessViolationException
In-Reply-To: <CACALY+QkZFPo3U=4yeM1yon57fpMr_5HWOpUSBc7qjVov3ugVQ@mail.gmail.com>
References: <13d7b1ba41f.-7819226603112424032.1572387785842852064@zoho.com>
	<CACALY+QkZFPo3U=4yeM1yon57fpMr_5HWOpUSBc7qjVov3ugVQ@mail.gmail.com>
Message-ID: <13d7f9d77cf.657341958682355951.6940964916043400385@zoho.com>

Tamas,

thanks, that fixed it. Easy. :)






Cheers,


Markus



---- On Sun, 17 Mar 2013 23:06:43 -0700 Tamas Szekeres &lt;szekerest at gmail.com&gt; wrote ---- 


Markus,
 
Do you experience the same with a newer set of binaries, like with the daily builds available at: http://www.gisinternals.com/sdk/ ?
  
Best regards,
 
Tamas


 
2013/3/18 markus.u.mueller &lt;markus.u.mueller at zoho.com&gt;
  
Dear listers,

I have troubles with the C#-bindings of GDAL. I use FWTools 2.4.7 on Windows XP 32bit, VS 2010 and .NET 4.0. When I try to run one of the GDAL-apps, GDALInfo.cs for example, I keep getting an Error saying
 "AccessViolationException was unhandled. Attempted to read or write protected memory. This is often an indication that other memory is corrupt.


I stumbled upon bits and pieces of other people having the same problem but did not get a consistent idea what is behind the problem and how it can be solved. Obviously there are also 2 trac tickets that seem to be related to this problem.
 http://trac.osgeo.org/gdal/ticket/4049 and
http://trac.osgeo.org/gdal/ticket/3249
 



Any help would be appreciated,




Markus









_______________________________________________
 gdal-dev mailing list
 gdal-dev at lists.osgeo.org
 http://lists.osgeo.org/mailman/listinfo/gdal-dev


 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/f54773c1/attachment-0001.html>

From andy.canfield at gmail.com  Mon Mar 18 19:21:54 2013
From: andy.canfield at gmail.com (Andy Canfield)
Date: Mon, 18 Mar 2013 20:21:54 -0600
Subject: [gdal-dev] C# examples or help docs?
Message-ID: <CAH9DkXwnFyePn21hWDSLo-GjQ=z4BgU+_05KBQEzFqmDfNePbw@mail.gmail.com>

       Where would I go about finding examples or samples of basic
manipulation of GeoTiffs using C# with the .Net bindings for GDAL?

I am looking to read a GeoTiff from disc that will be in UTM Zone 14 North
and transform it to WGS84 and write it to Disc as a new GeoTiff that is a
projected copy of the original with a new name etc. Any help getting to
that goal is greatly appreciated even if it just a link to a sample or help
API.

Thank You,
Andy Canfield
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130318/8c19b060/attachment.html>

From sravichandran at rothwellgroup.com  Tue Mar 19 11:52:42 2013
From: sravichandran at rothwellgroup.com (Srinaath Ravichandran)
Date: Tue, 19 Mar 2013 12:52:42 -0600
Subject: [gdal-dev] Rubber sheeting process using Gdal
Message-ID: <CAEXt07KDXMm31in77WXM2E1euw0umCh=9P4iXoER-W_Z4xn9jA@mail.gmail.com>

Hi,

I'm actually new to development using Gdal. My question to the group is

What is best approach to perform rubber sheeting process on a raster using
Gdal ?I need to perform the following steps

a)Taking a set of source control points in the raster
b)Rotate those points to get an equivalent set of target control points
c)Transform the raster from the source control points to target control
points

The problem is how do I implement each of the above steps using Gdal and
what gdal libraries need to be used.If possible, providing links to code
samples  would be great

Regards
Srinaath Ravi
Software Engineer
Email: sravichandran at rothwellgroup.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130319/9e5cd781/attachment.html>

From sravichandran at rothwellgroup.com  Tue Mar 19 15:03:12 2013
From: sravichandran at rothwellgroup.com (Srinaath Ravichandran)
Date: Tue, 19 Mar 2013 16:03:12 -0600
Subject: [gdal-dev] Raster file type compatibilty
Message-ID: <CAEXt07+Y6rYuispmte2ctqyMQyPP+PnQM=58Zjd1236SAFUOnA@mail.gmail.com>

Hi,

I wanted to know the raster format that is most compatible for working with
both Gdal and Esri libraries?

Regards
Srinaath Ravi
Email:sravichandran at rothwellgroup.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130319/094d47c5/attachment.html>

From markus.u.mueller at zoho.com  Tue Mar 19 15:31:31 2013
From: markus.u.mueller at zoho.com (markus.u.mueller)
Date: Tue, 19 Mar 2013 15:31:31 -0700
Subject: [gdal-dev] C# examples or help docs?
In-Reply-To: <CAH9DkXwnFyePn21hWDSLo-GjQ=z4BgU+_05KBQEzFqmDfNePbw@mail.gmail.com>
References: <CAH9DkXwnFyePn21hWDSLo-GjQ=z4BgU+_05KBQEzFqmDfNePbw@mail.gmail.com>
Message-ID: <13d84c75e80.-4040161874567557032.6799391914597772858@zoho.com>

Hi Andy,

I started documenting my experiences with GDAL and C# at http://vipassanaandenvironmentalinformatics.blogspot.co.nz/2013/03/getting-started-with-c-and-gdal.html. So far this is only about the very beginnings but I hope I can add some more tutorial-style information in the future.


Would also be happy if anybody else has suggestions for improvement in regard to what I wrote.




Cheers,


Markus




---- On Mon, 18 Mar 2013 19:21:54 -0700 Andy Canfield &lt;andy.canfield at gmail.com&gt; wrote ---- 


       Where would I go about finding examples or samples of basic manipulation of GeoTiffs using C# with the .Net bindings for GDAL?


 I am looking to read a GeoTiff from disc that will be in UTM Zone 14 North and transform it to WGS84 and write it to Disc as a new GeoTiff that is a projected copy of the original with a new name etc. Any help getting to that goal is greatly appreciated even if it just a link to a sample or help API.
 

 Thank You,
 Andy Canfield

 _______________________________________________ 
gdal-dev mailing list 
gdal-dev at lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130319/9bd2f329/attachment.html>

From doug_newcomb at fws.gov  Tue Mar 19 16:59:41 2013
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Tue, 19 Mar 2013 19:59:41 -0400
Subject: [gdal-dev] Raster file type compatibilty
In-Reply-To: <CAEXt07+Y6rYuispmte2ctqyMQyPP+PnQM=58Zjd1236SAFUOnA@mail.gmail.com>
References: <CAEXt07+Y6rYuispmte2ctqyMQyPP+PnQM=58Zjd1236SAFUOnA@mail.gmail.com>
Message-ID: <CALQGVr2wWbvZVBJ9uE7wWc3Mz07CMeKtSq_kyJFrD11iW1yBHA@mail.gmail.com>

Srinaath,
I've had good luck with ERDAS Imagine rasters ( designated HFA in GDAL)
with rasters up to 755 million cells.  I have created .img fuiles up to 6
billion cells, but ArcGIS ( version 10 at least ) has problems displaying
Erdas Imagine files that large.

Doug


On Tue, Mar 19, 2013 at 6:03 PM, Srinaath Ravichandran <
sravichandran at rothwellgroup.com> wrote:

> Hi,
>
> I wanted to know the raster format that is most compatible for working
> with both Gdal and Esri libraries?
>
> Regards
> Srinaath Ravi
> Email:sravichandran at rothwellgroup.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130319/bb4f2272/attachment.html>

From ed.hudspeth at nnpa.org.uk  Wed Mar 20 07:19:43 2013
From: ed.hudspeth at nnpa.org.uk (EdH)
Date: Wed, 20 Mar 2013 07:19:43 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
Message-ID: <1363789183601-5041735.post@n6.nabble.com>

Hi, 

I'm trying to extract a table from PostGIS into a shapefile. Using the
command: 

"c:\Program Files\Quantum GIS Lisboa\bin\ogr2ogr.exe" -f "ESRI Shapefile"
c:\test\planning.shp PG:"host=w2k3nnpgis1 user=postgres dbname=mapdata
password=********" "dm_planning-apps"
 
And I get this error: 

ERROR 1: No field definitions found for 'dm_planning-apps', is it a table? 
FAILURE: Couldn't fetch requested layer 'dm_planning-apps'! 

Using the same command with a different db connection works fine. The
difference being that the failure happens on PostgreSQL 9.1.4 with PostGIS
2.0 installed, and I think the other db is on an older installation (I don't
manage the working one).
 
Judging by other posts it seems like ogr2ogr thinks that the data isn't in
the geomety_columns table, however I notice PostGIS 2.0 has replaced the
geometry columns table with a 'view'. Might this be anything to do with it?
 
Many thanks if anyone can help with this. 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From r.m.krug at gmail.com  Wed Mar 20 08:01:47 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Wed, 20 Mar 2013 16:01:47 +0100
Subject: [gdal-dev] What is the format of a .prf file?
Message-ID: <5149CF5B.9030803@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I'm using gdalward in a script as follow, which works fine:

  FN=THERASTERLAYER
  gdalwarp -s_srs epsg:4148 \
           -t_srs "+proj=aea \
                   +lat_1=-28.25
                   +lat_2=-29.75 \
                   +lat_0=-29 \
                   +lon_0=30.75 \
                   +x_0=0  \
                   +y_0=0  \
                   +datum=WGS84 \
                   +units=m  \
                   +no_defs" \
            -dstnodata -9999 \
           $FN \
           $FN.gtif

What I don't like is that I have to specify t_srs in such a long way. It states that t_srs can be
"a .prf file containing well known text", but I can't figure out what a .pdf file is. Would for
exmple work, if I put

  +proj=aea
  +lat_1=-28.25
  +lat_2=-29.75
  +lat_0=-29
  +lon_0=30.75
  +x_0=0
  +y_0=0
  +datum=WGS84
  +units=m
  +no_defs

in t.prf and refer to it in gdalward as "-t_sts t.prf"?

Are there any examples available for prf files and allowed formats?

Thanks,

Rainer

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRSc9bAAoJENvXNx4PUvmCqgwIANU0QD/rleq8jcEyYBoFh7mn
F/xD4gfKtoKV4FkPwzD7oKuSstCgTrbbm4scbHk3TQpajwWflEr9Rl5tqyHAFdDM
q3G/AQIqfYNRCdSzkb6ZchqTuFn22qDGnBy0Xfax398sIc/iucFO4Pa++X5WbN3d
dxIEGOtsMSWXkMlf7zwjubSqL77jJWVeyB6yBOOkqX5Nug3Y9PKdSFybws2zlCEQ
lpfoBxAbMlpmH8N9rN0Yw3zvJxaHjHG/dkjCZRMtLRMI7kcZ2STYoGO9OKB3uqkI
5Ps0NNYxNLbbah86UNzSrIc/3gIiBeotAQtRUfA+FkPbVAt1NnKIOio4TnrNmtk=
=vmS7
-----END PGP SIGNATURE-----

From andre+joost at nurfuerspam.de  Wed Mar 20 08:44:01 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 20 Mar 2013 16:44:01 +0100
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <5149CF5B.9030803@gmail.com>
References: <5149CF5B.9030803@gmail.com>
Message-ID: <kiclge$8m9$1@ger.gmane.org>

Am 20.03.2013 16:01, schrieb Rainer M Krug:

> What I don't like is that I have to specify t_srs in such a long way. It states that t_srs can be
> "a .prf file containing well known text", but I can't figure out what a .pdf file is. Would for
> exmple work, if I put
>
>    +proj=aea
>    +lat_1=-28.25
>    +lat_2=-29.75
>    +lat_0=-29
>    +lon_0=30.75
>    +x_0=0
>    +y_0=0
>    +datum=WGS84
>    +units=m
>    +no_defs
>
> in t.prf and refer to it in gdalward as "-t_sts t.prf"?
>

No, the proj definition text is not "well known text" WKT.


> Are there any examples available for prf files and allowed formats?

It's simply the same format as in every shapefiles .prj file.

For example
ogr2ogr -s_srs epsg:3375 -t_srs epsg:4245 Malay-Kertau.shp rivers-neu.shp
ogr2ogr -s_srs epsg:3375 -t_srs Malay-Kertau.prj Malay-prj.shp 
rivers-neu.shp

returns two identical outputs, where Malay-Kertau.prj contains the 
definition used in the first run with EPSG:4245.

Greetings,
Andr? Joost




From r.m.krug at gmail.com  Thu Mar 21 01:08:58 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 21 Mar 2013 09:08:58 +0100
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <kiclge$8m9$1@ger.gmane.org>
References: <5149CF5B.9030803@gmail.com> <kiclge$8m9$1@ger.gmane.org>
Message-ID: <514AC01A.6060406@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 20/03/13 16:44, Andre Joost wrote:
> Am 20.03.2013 16:01, schrieb Rainer M Krug:
> 
>> What I don't like is that I have to specify t_srs in such a long way. It states that t_srs
>> can be "a .prf file containing well known text", but I can't figure out what a .pdf file is.
>> Would for exmple work, if I put
>> 
>> +proj=aea +lat_1=-28.25 +lat_2=-29.75 +lat_0=-29 +lon_0=30.75 +x_0=0 +y_0=0 +datum=WGS84 
>> +units=m +no_defs
>> 
>> in t.prf and refer to it in gdalward as "-t_sts t.prf"?
>> 
> 
> No, the proj definition text is not "well known text" WKT.
> 
> 
>> Are there any examples available for prf files and allowed formats?
> 
> It's simply the same format as in every shapefiles .prj file.
> 
> For example ogr2ogr -s_srs epsg:3375 -t_srs epsg:4245 Malay-Kertau.shp rivers-neu.shp ogr2ogr
> -s_srs epsg:3375 -t_srs Malay-Kertau.prj Malay-prj.shp rivers-neu.shp
> 
> returns two identical outputs, where Malay-Kertau.prj contains the definition used in the first
> run with EPSG:4245.

Thanks for the response.

So the file Malay-Kertau.prj would then contain the text:

epsg:4245

?

So I have to put into the file simply the text as supplied to -t_srs ?

And what is the difference between a .prj file used by shape files and a .pdf file (format wise)?

Rainer


Rainer

> 
> Greetings, Andr? Joost
> 
> 
> 
> _______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRSsAaAAoJENvXNx4PUvmCLCgH/2ZdL433Twrcvrmq0Nwz5HH7
osTxtve9AunR5nuNaMX9uyFihXjXbbMLf0gm8/8sZ3C4Z/tPb+9/vRvQYTD5cEPj
GTgDWboY7wg25IrDiWgYPpbiyZ3kkaXwmOmTCZeS03AzRtB15EQ/T/+77YHD7C99
Yg74pombMKHPYXbEeu5gAqGzP94eB0L0NlXaTqgeXhfo9uo6vo7JdPOQTTApYRml
Dh0jybjv783eItoFnW7P8MkOADx2AKpsu30KuWVuJX99WWw/353lqemG2jfJKRKW
1ZkakihyT1+d8rrvJv0vMPVOn3GvR0MrLluSLoLFrt5zGAtjKyVgUfRwom7Gfw4=
=TJnh
-----END PGP SIGNATURE-----

From Armin.R.Schmidt at Gmail.com  Thu Mar 21 01:48:11 2013
From: Armin.R.Schmidt at Gmail.com (Armin Schmidt)
Date: Thu, 21 Mar 2013 01:48:11 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363789183601-5041735.post@n6.nabble.com>
References: <1363789183601-5041735.post@n6.nabble.com>
Message-ID: <1363855691225-5041984.post@n6.nabble.com>

Might this be a problem with your table's name: "dm_planning-apps" ? Having a
hyphen in a table's name can have all sorts of side effects.
Armin



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5041984.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ed.hudspeth at nnpa.org.uk  Thu Mar 21 02:50:45 2013
From: ed.hudspeth at nnpa.org.uk (EdH)
Date: Thu, 21 Mar 2013 02:50:45 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363855691225-5041984.post@n6.nabble.com>
References: <1363789183601-5041735.post@n6.nabble.com>
	<1363855691225-5041984.post@n6.nabble.com>
Message-ID: <1363859445498-5042009.post@n6.nabble.com>

Thanks for this suggestion, but I'm still getting the same error when I try
another table in the same db called "lnr" (i.e. no hyphens).





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5042009.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Mar 21 02:54:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 21 Mar 2013 10:54:07 +0100
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363859445498-5042009.post@n6.nabble.com>
References: <1363789183601-5041735.post@n6.nabble.com>
	<1363855691225-5041984.post@n6.nabble.com>
	<1363859445498-5042009.post@n6.nabble.com>
Message-ID: <1363859647.514ad8bf23737@imp.free.fr>

Selon EdH <ed.hudspeth at nnpa.org.uk>:

> Thanks for this suggestion, but I'm still getting the same error when I try
> another table in the same db called "lnr" (i.e. no hyphens).


You didn't specify which GDAL/OGR version you are using. You need GDAL/OGR 1.9
or later for PostGIS 2.0 compatibility.

>
>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5042009.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From ed.hudspeth at nnpa.org.uk  Thu Mar 21 04:48:00 2013
From: ed.hudspeth at nnpa.org.uk (EdH)
Date: Thu, 21 Mar 2013 04:48:00 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363859647.514ad8bf23737@imp.free.fr>
References: <1363789183601-5041735.post@n6.nabble.com>
	<1363855691225-5041984.post@n6.nabble.com>
	<1363859445498-5042009.post@n6.nabble.com>
	<1363859647.514ad8bf23737@imp.free.fr>
Message-ID: <1363866480207-5042046.post@n6.nabble.com>

Just installed GDAL 1.9.2 and am having the same error.

When I run a query in PGadmin to show all tables the gemoetry columns "view"
does not appear but the other three "views" do (e.g. geography columns
etc...)



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5042046.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Mar 21 04:58:37 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 21 Mar 2013 12:58:37 +0100
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363866480207-5042046.post@n6.nabble.com>
References: <1363789183601-5041735.post@n6.nabble.com>
	<1363855691225-5041984.post@n6.nabble.com>
	<1363859445498-5042009.post@n6.nabble.com>
	<1363859647.514ad8bf23737@imp.free.fr>
	<1363866480207-5042046.post@n6.nabble.com>
Message-ID: <1363867117.514af5ed61e5b@imp.free.fr>

Selon EdH <ed.hudspeth at nnpa.org.uk>:

> Just installed GDAL 1.9.2 and am having the same error.
>
> When I run a query in PGadmin to show all tables the gemoetry columns "view"
> does not appear but the other three "views" do (e.g. geography columns
> etc...)

Ah then it is likely a problem with the setup of your database. Or perhaps a
permission problem for the user opening the database.

>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5042046.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>













From sfkeller at gmail.com  Thu Mar 21 05:14:10 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 21 Mar 2013 13:14:10 +0100
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
Message-ID: <CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>

Hi Mateusz, hi all

Did anyone ever tried to use a tiling tool like gdal2raster (or
mapnik) as source and PostGIS Raster as target?
Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?

Yours,
Stefan



2013/3/14 Mateusz Loskot <mateusz at loskot.net>:
> On 14 March 2013 17:11, ryagz <raghavendra at vizexperts.com> wrote:
>>
>> Is the current trunk of GDAL supports loading out-db raster data from
>> postgis?
>>
>> If no, is there any specific timeline for that?
>
> FYI, there is significant work planned in PostGIS Raster,
> which will affect out-db support:
>
> http://trac.osgeo.org/postgis/ticket/2217
> http://trac.osgeo.org/postgis/ticket/2222
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ed.hudspeth at nnpa.org.uk  Thu Mar 21 05:36:32 2013
From: ed.hudspeth at nnpa.org.uk (EdH)
Date: Thu, 21 Mar 2013 05:36:32 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr and PostGIS 2.0
In-Reply-To: <1363867117.514af5ed61e5b@imp.free.fr>
References: <1363789183601-5041735.post@n6.nabble.com>
	<1363855691225-5041984.post@n6.nabble.com>
	<1363859445498-5042009.post@n6.nabble.com>
	<1363859647.514ad8bf23737@imp.free.fr>
	<1363866480207-5042046.post@n6.nabble.com>
	<1363867117.514af5ed61e5b@imp.free.fr>
Message-ID: <1363869392332-5042074.post@n6.nabble.com>

Hi,

It's the superuser of the whole db cluster so I'd be surprised if its a
permissions error.

Any ideas what might be wrong in the setup to cause this or how i might
diagnose a problem?





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-and-PostGIS-2-0-tp5041735p5042074.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woodbri at swoodbridge.com  Thu Mar 21 06:48:38 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu, 21 Mar 2013 09:48:38 -0400
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <514AC01A.6060406@gmail.com>
References: <5149CF5B.9030803@gmail.com> <kiclge$8m9$1@ger.gmane.org>
	<514AC01A.6060406@gmail.com>
Message-ID: <514B0FB6.20204@swoodbridge.com>

On 3/21/2013 4:08 AM, Rainer M Krug wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 20/03/13 16:44, Andre Joost wrote:
>> Am 20.03.2013 16:01, schrieb Rainer M Krug:
>>
>>> What I don't like is that I have to specify t_srs in such a long way. It states that t_srs
>>> can be "a .prf file containing well known text", but I can't figure out what a .pdf file is.
>>> Would for exmple work, if I put
>>>
>>> +proj=aea +lat_1=-28.25 +lat_2=-29.75 +lat_0=-29 +lon_0=30.75 +x_0=0 +y_0=0 +datum=WGS84
>>> +units=m +no_defs
>>>
>>> in t.prf and refer to it in gdalward as "-t_sts t.prf"?
>>>
>>
>> No, the proj definition text is not "well known text" WKT.
>>
>>
>>> Are there any examples available for prf files and allowed formats?
>>
>> It's simply the same format as in every shapefiles .prj file.
>>
>> For example ogr2ogr -s_srs epsg:3375 -t_srs epsg:4245 Malay-Kertau.shp rivers-neu.shp ogr2ogr
>> -s_srs epsg:3375 -t_srs Malay-Kertau.prj Malay-prj.shp rivers-neu.shp
>>
>> returns two identical outputs, where Malay-Kertau.prj contains the definition used in the first
>> run with EPSG:4245.
>
> Thanks for the response.
>
> So the file Malay-Kertau.prj would then contain the text:
>
> epsg:4245
>
> ?

No you would need something like:

GEOGCS["GCS_Kertau",DATUM["D_Kertau",SPHEROID["Everest_1830_Modified",6377304.063,300.8017]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]

I found this here:
http://webhelp.esri.com/arcims/9.3/general/mergedprojects/ArcXMLGuide/elements/gcs.htm

webhelp.esri.com/arcims/9.3/general/mergedprojects/wms_connect/wms_admin/srs_list.htm

WKT for projections refers to ESRI projection info NOT proj4 epsg codes.

Read this:

http://www.nceas.ucsb.edu/scicomp/recipes/projections

-Steve W



> So I have to put into the file simply the text as supplied to -t_srs ?
>
> And what is the difference between a .prj file used by shape files and a .pdf file (format wise)?
>
> Rainer
>
>
> Rainer
>
>>
>> Greetings, Andr? Joost
>>
>>
>>
>> _______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> - --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
> (Germany)
>
> Centre of Excellence for Invasion Biology
> Stellenbosch University
> South Africa
>
> Tel :       +33 - (0)9 53 10 27 44
> Cell:       +33 - (0)6 85 62 59 98
> Fax :       +33 - (0)9 58 10 27 44
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.11 (GNU/Linux)
> Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/
>
> iQEcBAEBAgAGBQJRSsAaAAoJENvXNx4PUvmCLCgH/2ZdL433Twrcvrmq0Nwz5HH7
> osTxtve9AunR5nuNaMX9uyFihXjXbbMLf0gm8/8sZ3C4Z/tPb+9/vRvQYTD5cEPj
> GTgDWboY7wg25IrDiWgYPpbiyZ3kkaXwmOmTCZeS03AzRtB15EQ/T/+77YHD7C99
> Yg74pombMKHPYXbEeu5gAqGzP94eB0L0NlXaTqgeXhfo9uo6vo7JdPOQTTApYRml
> Dh0jybjv783eItoFnW7P8MkOADx2AKpsu30KuWVuJX99WWw/353lqemG2jfJKRKW
> 1ZkakihyT1+d8rrvJv0vMPVOn3GvR0MrLluSLoLFrt5zGAtjKyVgUfRwom7Gfw4=
> =TJnh
> -----END PGP SIGNATURE-----
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From r.m.krug at gmail.com  Thu Mar 21 07:12:54 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 21 Mar 2013 15:12:54 +0100
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <514B0FB6.20204@swoodbridge.com>
References: <5149CF5B.9030803@gmail.com> <kiclge$8m9$1@ger.gmane.org>
	<514AC01A.6060406@gmail.com> <514B0FB6.20204@swoodbridge.com>
Message-ID: <514B1566.1030802@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 21/03/13 14:48, Stephen Woodbridge wrote:
> On 3/21/2013 4:08 AM, Rainer M Krug wrote: On 20/03/13 16:44, Andre Joost wrote:
>>>> Am 20.03.2013 16:01, schrieb Rainer M Krug:
>>>> 
>>>>> What I don't like is that I have to specify t_srs in such a long way. It states that
>>>>> t_srs can be "a .prf file containing well known text", but I can't figure out what a
>>>>> .pdf file is. Would for exmple work, if I put
>>>>> 
>>>>> +proj=aea +lat_1=-28.25 +lat_2=-29.75 +lat_0=-29 +lon_0=30.75 +x_0=0 +y_0=0
>>>>> +datum=WGS84 +units=m +no_defs
>>>>> 
>>>>> in t.prf and refer to it in gdalward as "-t_sts t.prf"?
>>>>> 
>>>> 
>>>> No, the proj definition text is not "well known text" WKT.
>>>> 
>>>> 
>>>>> Are there any examples available for prf files and allowed formats?
>>>> 
>>>> It's simply the same format as in every shapefiles .prj file.
>>>> 
>>>> For example ogr2ogr -s_srs epsg:3375 -t_srs epsg:4245 Malay-Kertau.shp rivers-neu.shp
>>>> ogr2ogr -s_srs epsg:3375 -t_srs Malay-Kertau.prj Malay-prj.shp rivers-neu.shp
>>>> 
>>>> returns two identical outputs, where Malay-Kertau.prj contains the definition used in the
>>>> first run with EPSG:4245.
> 
> Thanks for the response.
> 
> So the file Malay-Kertau.prj would then contain the text:
> 
> epsg:4245
> 
> ?
> 
>> No you would need something like:
> 
>> GEOGCS["GCS_Kertau",DATUM["D_Kertau",SPHEROID["Everest_1830_Modified",6377304.063,300.8017]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]
>
>> 
> 
>> I found this here: 
>> http://webhelp.esri.com/arcims/9.3/general/mergedprojects/ArcXMLGuide/elements/gcs.htm
> 
>> webhelp.esri.com/arcims/9.3/general/mergedprojects/wms_connect/wms_admin/srs_list.htm
> 
>> WKT for projections refers to ESRI projection info NOT proj4 epsg codes.

Ah - now I understand it. "Well-known text" *is* a format of specifying
projections. I thought it was referring to "ascii text file" or something
along these lines. Maybe a link to a WKT format specification would be
useful or at least changing the text

"name of a .prf file containing well known text"
 to
"name of a .txt file containing the projection in WKT (well known text) format"

as pdr file irritated me as well...

Cheers,

Rainer
> 
>> Read this:
> 
>> http://www.nceas.ucsb.edu/scicomp/recipes/projections
> 
>> -Steve W
> 
> 
> 
> So I have to put into the file simply the text as supplied to -t_srs ?
> 
> And what is the difference between a .prj file used by shape files and a .pdf file (format
> wise)?
> 
> Rainer
> 
> 
> Rainer
> 
>>>> 
>>>> Greetings, Andr? Joost
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________ gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
>> _______________________________________________ gdal-dev mailing list 
>> gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> _______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRSxVmAAoJENvXNx4PUvmCckAH/jmM1kUCJi3PgXQLscvarghn
4r5fHm9A9seI1M4/IPYofkCmp73zmkUD45uE8V5rlXBzsrfgRr4fdKv+PnWqslQs
jSmXKSQ3tbaDGoVYKrgMgr73XVbvTU0CXgeuQb7IgXPXRVN1Yv/7wIDs9BZ9qvG7
wFb2fSn4E3xFfUpgkkicSPpF/tAExmbDvhCueoV2aFnj6U5spRtLwuBLNRka/cZN
bSrx95fS+M0aGQSmIFLAHuEjtgM4pNBsnNqSsWZ30ZL8GniE/VEJes1om7lhqlub
CeW2cxSwYaTk1g9QNdED2++IbmRMd5Ud0HWumFODqaXmTFNuAnf6WKyi9iQUdU8=
=umxw
-----END PGP SIGNATURE-----

From jrepetto at free.fr  Thu Mar 21 07:25:57 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 21 Mar 2013 15:25:57 +0100
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <514B1566.1030802@gmail.com>
References: <5149CF5B.9030803@gmail.com> <kiclge$8m9$1@ger.gmane.org>
	<514AC01A.6060406@gmail.com> <514B0FB6.20204@swoodbridge.com>
	<514B1566.1030802@gmail.com>
Message-ID: <514B1875.9030201@free.fr>

Le 21/03/2013 15:12, Rainer M Krug a ?crit :

> Ah - now I understand it. "Well-known text" *is* a format of specifying
> projections. I thought it was referring to "ascii text file" or something
> along these lines. Maybe a link to a WKT format specification would be
> useful or at least changing the text

http://en.wikipedia.org/wiki/Well-known_text



From r.m.krug at gmail.com  Thu Mar 21 07:42:24 2013
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 21 Mar 2013 15:42:24 +0100
Subject: [gdal-dev] What is the format of a .prf file?
In-Reply-To: <514B1875.9030201@free.fr>
References: <5149CF5B.9030803@gmail.com> <kiclge$8m9$1@ger.gmane.org>
	<514AC01A.6060406@gmail.com> <514B0FB6.20204@swoodbridge.com>
	<514B1566.1030802@gmail.com> <514B1875.9030201@free.fr>
Message-ID: <514B1C50.7010503@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 21/03/13 15:25, Jean-Claude Repetto wrote:
> Le 21/03/2013 15:12, Rainer M Krug a ?crit :
> 
>> Ah - now I understand it. "Well-known text" *is* a format of specifying projections. I
>> thought it was referring to "ascii text file" or something along these lines. Maybe a link to
>> a WKT format specification would be useful or at least changing the text
> 
> http://en.wikipedia.org/wiki/Well-known_text
> 

I found that one - after asking. Additionally, In the manual it says "well known text" without the
first hyphen, whereas the format seems to be with the first hyphen.

Cheers,

Rainer


> 
> _______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
0

- -- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys.
(Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJRSxxQAAoJENvXNx4PUvmCnbUIAJQDQHCyGWpgHimf7uTHhjFL
wGq1/opZyGKIQgJ/LMXH02mUHDR2l8SPxGAFCkT+CTkZLXq+b2eYDHaquUuw+RhG
Zkkrh0U6G9lDmGABDrYA2Vy8rPKJhQZqlcr03C/W3LS/tomQUd5lRbmc9sVKOXb7
f8cQSLlhovu4Q8eYb2n6RlAZ8LMcuVnPQsQ/5lewG4191DpfZulatFpYul2dVtwr
sZEr/Yhc9pmdT/GbNOn1Ka2o9uxF3qgi0P9zxTZjXFz/6H1QeczGY1XkOqCTBvnV
cnoV4wfRROGACYZQIrUkbSedJ3iJRjApVDn6Pz5ycf5jVW4E2XOuxuDBSXkokdo=
=/hmo
-----END PGP SIGNATURE-----

From mateusz at loskot.net  Thu Mar 21 07:55:06 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 21 Mar 2013 14:55:06 +0000
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
Message-ID: <CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>

On 21 March 2013 12:14, Stefan Keller <sfkeller at gmail.com> wrote:
> Hi Mateusz, hi all
>
> Did anyone ever tried to use a tiling tool like gdal2raster (or
> mapnik) as source and PostGIS Raster as target?

I don't know anything about gdal2raster, I'm afraid.

> Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?

I haven't used MBTilse myself.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Thu Mar 21 07:57:30 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 21 Mar 2013 14:57:30 +0000
Subject: [gdal-dev] Do not cross post (was  Postgis Raster out-db support)
Message-ID: <CABUeae-KF1eDA-Pc7XDXZqF52vd-EPuUP1y0KdMgTjcEGWTOQw@mail.gmail.com>

Cross-posting is evil!

--===============8939576714711225125==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit

You are not allowed to post to this mailing list, and your message has
been automatically rejected.  If you think that your messages are
being rejected in error, contact the mailing list owner at
postgis-users-owner at lists.osgeo.org.

On 21 March 2013 14:55, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 21 March 2013 12:14, Stefan Keller <sfkeller at gmail.com> wrote:
>> Hi Mateusz, hi all
>>
>> Did anyone ever tried to use a tiling tool like gdal2raster (or
>> mapnik) as source and PostGIS Raster as target?
>
> I don't know anything about gdal2raster, I'm afraid.
>
>> Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?
>
> I haven't used MBTilse myself.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net



--
Mateusz Loskot, http://mateusz.loskot.net

From sfkeller at gmail.com  Thu Mar 21 08:13:31 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 21 Mar 2013 16:13:31 +0100
Subject: [gdal-dev] Do not cross post (was Postgis Raster out-db support)
In-Reply-To: <CABUeae-KF1eDA-Pc7XDXZqF52vd-EPuUP1y0KdMgTjcEGWTOQw@mail.gmail.com>
References: <CABUeae-KF1eDA-Pc7XDXZqF52vd-EPuUP1y0KdMgTjcEGWTOQw@mail.gmail.com>
Message-ID: <CAFcOn2-tf5C7ZQTQa7-u6x0rEOFZ58N+ny1Lo26S3LBj4CcZqQ@mail.gmail.com>

Thanks for the hint.
But no rules without exception - and this seem to me one.

Yours, Stefan

2013/3/21 Mateusz Loskot <mateusz at loskot.net>:
> Cross-posting is evil!
>
> --===============8939576714711225125==
> Content-Type: text/plain; charset="us-ascii"
> MIME-Version: 1.0
> Content-Transfer-Encoding: 7bit
>
> You are not allowed to post to this mailing list, and your message has
> been automatically rejected.  If you think that your messages are
> being rejected in error, contact the mailing list owner at
> postgis-users-owner at lists.osgeo.org.
>
> On 21 March 2013 14:55, Mateusz Loskot <mateusz at loskot.net> wrote:
>> On 21 March 2013 12:14, Stefan Keller <sfkeller at gmail.com> wrote:
>>> Hi Mateusz, hi all
>>>
>>> Did anyone ever tried to use a tiling tool like gdal2raster (or
>>> mapnik) as source and PostGIS Raster as target?
>>
>> I don't know anything about gdal2raster, I'm afraid.
>>
>>> Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?
>>
>> I haven't used MBTilse myself.
>>
>> Best regards,
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>
>
>
> --
> Mateusz Loskot, http://mateusz.loskot.net

From sfkeller at gmail.com  Thu Mar 21 08:15:45 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 21 Mar 2013 16:15:45 +0100
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
Message-ID: <CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>

Sry: I meant GDAL2Tiles, not gdal2raster.

Yours, Stefan

2013/3/21 Mateusz Loskot <mateusz at loskot.net>:
> On 21 March 2013 12:14, Stefan Keller <sfkeller at gmail.com> wrote:
>> Hi Mateusz, hi all
>>
>> Did anyone ever tried to use a tiling tool like gdal2raster (or
>> mapnik) as source and PostGIS Raster as target?
>
> I don't know anything about gdal2raster, I'm afraid.
>
>> Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?
>
> I haven't used MBTilse myself.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

From pcorti at gmail.com  Thu Mar 21 08:27:55 2013
From: pcorti at gmail.com (Paolo Corti)
Date: Thu, 21 Mar 2013 16:27:55 +0100
Subject: [gdal-dev] [postgis-users]  Postgis Raster out-db support
In-Reply-To: <CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
Message-ID: <CAHXrU-LncXM-ysHgz4OzXKxr4B6U8mJj1iMfP3A1sXmX5Ksg4w@mail.gmail.com>

On Thu, Mar 21, 2013 at 4:15 PM, Stefan Keller <sfkeller at gmail.com> wrote:
>>
>>> Or exporting PostGIS Raster to MBTiles format (using GDAL as resampler)?
>>

GDAL MBTiles driver is read only according to the documentation
regards
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From mateusz at loskot.net  Thu Mar 21 08:40:44 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 21 Mar 2013 15:40:44 +0000
Subject: [gdal-dev] Do not cross post (was Postgis Raster out-db support)
In-Reply-To: <CAFcOn2-tf5C7ZQTQa7-u6x0rEOFZ58N+ny1Lo26S3LBj4CcZqQ@mail.gmail.com>
References: <CABUeae-KF1eDA-Pc7XDXZqF52vd-EPuUP1y0KdMgTjcEGWTOQw@mail.gmail.com>
	<CAFcOn2-tf5C7ZQTQa7-u6x0rEOFZ58N+ny1Lo26S3LBj4CcZqQ@mail.gmail.com>
Message-ID: <CABUeae8mPNTA710JCvc9XYBh8Fx=edNLc9da+Z7-F4V86ZQMQg@mail.gmail.com>

On 21 March 2013 15:13, Stefan Keller <sfkeller at gmail.com> wrote:
> Thanks for the hint.
> But no rules without exception - and this seem to me one.

Stefan,

GDAL2Tiles is GDAL tool.
Asking about GDAL tool on PostGIS mailing list is act of posting
off-topic question.
Off-topic posts on a mailing list is unwanted mail, for those subscribed.
Unwanted mail is a spam.
Cross-posting also causes leads to number of technical issues like the
message bounced in error.
Finally, this is not about rules & exceptions, but good manners.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Thu Mar 21 08:42:41 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 21 Mar 2013 15:42:41 +0000
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
Message-ID: <CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>

On 21 March 2013 15:15, Stefan Keller <sfkeller at gmail.com> wrote:
> Sry: I meant GDAL2Tiles, not gdal2raster.

>From what it says on the tin, GDAL2Tiles converts to directory structure,
not a database.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From woklist at kyngchaos.com  Thu Mar 21 16:46:17 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 21 Mar 2013 18:46:17 -0500
Subject: [gdal-dev] GDAL 1.10?
Message-ID: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>

Sorry to pester people working diligently on the next release, but what's holding up at least an RC for 1.10?

It would be nice to have 1.10 for the upcoming QGIS 2.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From sfkeller at gmail.com  Fri Mar 22 05:02:18 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 22 Mar 2013 13:02:18 +0100
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
	<CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>
Message-ID: <CAFcOn2_qZ2qZ=NUZWh2ovSSLqQimGSPD252+5pvP6JsxJjN2VA@mail.gmail.com>

Hi Paolo and Mateusz

Thanks for the hints.
I'm fully aware what's in the docs.
PostGIS Raster stores raster data in tiles.
When moving data in and out, GDAL (including Python scripts) could
help to tile, resample, transform and convert.

Yours, Stefan


2013/3/21 Mateusz Loskot <mateusz at loskot.net>:
> On 21 March 2013 15:15, Stefan Keller <sfkeller at gmail.com> wrote:
>> Sry: I meant GDAL2Tiles, not gdal2raster.
>
> From what it says on the tin, GDAL2Tiles converts to directory structure,
> not a database.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Fri Mar 22 05:59:38 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 22 Mar 2013 12:59:38 +0000
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CAFcOn2_qZ2qZ=NUZWh2ovSSLqQimGSPD252+5pvP6JsxJjN2VA@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
	<CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>
	<CAFcOn2_qZ2qZ=NUZWh2ovSSLqQimGSPD252+5pvP6JsxJjN2VA@mail.gmail.com>
Message-ID: <CABUeae9cPtc5VU2835sfA1Z4gcihWDxML56SqcQFEb=3jJpLUw@mail.gmail.com>

On 22 March 2013 12:02, Stefan Keller <sfkeller at gmail.com> wrote:
> Hi Paolo and Mateusz
>
> Thanks for the hints.
> I'm fully aware what's in the docs.
> PostGIS Raster stores raster data in tiles.

I'd say, PostGIS Raster may store in tiles, if you wish so, but tiles are
just one of possible schemes.

You may also want to check latest issues related to out-db

http://trac.osgeo.org/postgis/ticket/2217
http://trac.osgeo.org/postgis/ticket/2222

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From sfkeller at gmail.com  Fri Mar 22 07:19:20 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 22 Mar 2013 15:19:20 +0100
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CABUeae9cPtc5VU2835sfA1Z4gcihWDxML56SqcQFEb=3jJpLUw@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
	<CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>
	<CAFcOn2_qZ2qZ=NUZWh2ovSSLqQimGSPD252+5pvP6JsxJjN2VA@mail.gmail.com>
	<CABUeae9cPtc5VU2835sfA1Z4gcihWDxML56SqcQFEb=3jJpLUw@mail.gmail.com>
Message-ID: <CAFcOn28A_WTJsw=UQvWBaw0nBHnD1GXiaj9+WFwZbYTTiLChXQ@mail.gmail.com>

2013/3/22 Mateusz Loskot <mateusz at loskot.net>:
> I'd say, PostGIS Raster may store in tiles, if you wish so, but tiles are
> just one of possible schemes.

Thanks for the hints to the tickets/issues.
You're right. But usually you will want to tile your raster.

AFAIK the maximum width x height permitted in PostGIS Raster is 65535 x 65535.
And the maximum field size is 1 GB (PostgreSQL).

Yours, Stefan

2013/3/22 Mateusz Loskot <mateusz at loskot.net>:
> On 22 March 2013 12:02, Stefan Keller <sfkeller at gmail.com> wrote:
>> Hi Paolo and Mateusz
>>
>> Thanks for the hints.
>> I'm fully aware what's in the docs.
>> PostGIS Raster stores raster data in tiles.
>
> I'd say, PostGIS Raster may store in tiles, if you wish so, but tiles are
> just one of possible schemes.
>
> You may also want to check latest issues related to out-db
>
> http://trac.osgeo.org/postgis/ticket/2217
> http://trac.osgeo.org/postgis/ticket/2222
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Fri Mar 22 10:05:47 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 22 Mar 2013 17:05:47 +0000
Subject: [gdal-dev] Postgis Raster out-db support
In-Reply-To: <CAFcOn28A_WTJsw=UQvWBaw0nBHnD1GXiaj9+WFwZbYTTiLChXQ@mail.gmail.com>
References: <1363281094734-5040436.post@n6.nabble.com>
	<CABUeae9aU+DnpoANwF8zrSQWPWUoF44eQNFVWD+UWH_8AnKJQg@mail.gmail.com>
	<CAFcOn2_V2+12ExXS0NMv8YAC1VW_3S=6mQNqqNn_KFyomu3Hag@mail.gmail.com>
	<CABUeae9WoOhc=TjnDGjSyiuSauRX5dxFuD4HWAtcotd2donXrg@mail.gmail.com>
	<CAFcOn287dMCSA0SwWvE9nJMhYVyVRJQTAPvQ1HsOWQ6s8--4Kg@mail.gmail.com>
	<CABUeae9VG29ynmddWie4piEdXWcxUkE+ZmxWK+bxPVgSks4YwQ@mail.gmail.com>
	<CAFcOn2_qZ2qZ=NUZWh2ovSSLqQimGSPD252+5pvP6JsxJjN2VA@mail.gmail.com>
	<CABUeae9cPtc5VU2835sfA1Z4gcihWDxML56SqcQFEb=3jJpLUw@mail.gmail.com>
	<CAFcOn28A_WTJsw=UQvWBaw0nBHnD1GXiaj9+WFwZbYTTiLChXQ@mail.gmail.com>
Message-ID: <CABUeae8GpXkgYEh4bxhbzguqamS7uqi0=ngQE3aox0UbqCm0Qg@mail.gmail.com>

On 22 March 2013 14:19, Stefan Keller <sfkeller at gmail.com> wrote:
> 2013/3/22 Mateusz Loskot <mateusz at loskot.net>:
>> I'd say, PostGIS Raster may store in tiles, if you wish so, but tiles are
>> just one of possible schemes.
>
> Thanks for the hints to the tickets/issues.
> You're right. But usually you will want to tile your raster.

If usually or often or sporadically, that is a matter of a different discussion
and as a proof that things may not be as obvious as they seem,
you may search postgis-devel for discussions I had with other
developers of PostGIS
Raster where I argue that tiling (specifically, regular grid tiling)
is common use case, they argue it is not.

Second, "to tile your raster" is not very precise.
In PostGIS Raster you have infinite schemes of tiling: regular blocking
or your own, where the latter may be regular, irregular, with or w/o
overlapped tiles, etc.

> AFAIK the maximum width x height permitted in PostGIS Raster is 65535 x 65535.

Yes, and you can have, for instance, three rows:
1 with 65535x65535 raster
1 with 32767x32767 raster
1 with 1x1 raster

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From diego.gnesi at gmail.com  Fri Mar 22 10:47:49 2013
From: diego.gnesi at gmail.com (Diego Gnesi Bartolani)
Date: Fri, 22 Mar 2013 18:47:49 +0100
Subject: [gdal-dev] ReadAsArray: putting data in an already existent array
Message-ID: <CAML4TukT4JV9b=ftR=8yUYPgRt0na-NC3tn9KKvAeW1wvHyp-g@mail.gmail.com>

Hi,

    I'm programming in Python and I need to "scan" a large image with GDAL
reading n rows at the time. I'm using the ReadAsArray method, but every
time I execute it I get a new array. I think this solution consumes a lot
of resources.
Is there a method or option to pass to ReadAsArray an array that already
exists, in order to change it's value, like in the following pseudo-code:

band1 = ds.GetRasterBand(1)
my_arr = band1.ReadAsArrray([params])
[Do something with my_arr]
band1.ReadAsArray([params to get other rows], save_to=my_arr)

Of course, my_arr must have the correct size for storing incoming data.

Thanks,

Diego
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130322/9ecf1f20/attachment.html>

From gabrielfusca at suremptec.com.ar  Fri Mar 22 11:02:41 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Fri, 22 Mar 2013 15:02:41 -0300
Subject: [gdal-dev] Google maps support licensing question
In-Reply-To: <CAJ1ZnRUFGgrUyigU8W6fhPtG4zvcdaZmF2Yn9S5=qfDqN-4n+Q@mail.gmail.com>
References: <CAJ1ZnRUFGgrUyigU8W6fhPtG4zvcdaZmF2Yn9S5=qfDqN-4n+Q@mail.gmail.com>
Message-ID: <CAJ1ZnRWF8pBqPUJEvJJ0bOj+hNAM8jnEOg+ZKDa6J4fJNzq6ww@mail.gmail.com>

/bump


2013/3/8 Gabriel Fusca <gabrielfusca at suremptec.com.ar>

> Hi All,
>
> I'm developing a free but not open-source desktop application using Gdal
> 1.9.
>
> I want to know if exists any licesing problem to support google maps layers
>
> Best regards,
>
> --
> Gabriel Fusca
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> gabrielfusca at suremptec.com.ar
> http://www.suremptec.com/
>



-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130322/5a53dc0a/attachment.html>

From max at geoinova.com  Fri Mar 22 11:16:38 2013
From: max at geoinova.com (Maksim Sestic)
Date: Fri, 22 Mar 2013 11:16:38 -0700 (PDT)
Subject: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
Message-ID: <1363976198155-5042430.post@n6.nabble.com>

Hi all,

Is there any example (or a hint) of converting a System.Drawing.Bitmap into
GDAL Dataset?

Regards,
Maksim Sestic



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Converting-NET-Bitmap-to-GDAL-Dataset-tp5042430.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From frankie at debian.org  Fri Mar 22 11:08:48 2013
From: frankie at debian.org (Francesco P. Lovergine)
Date: Fri, 22 Mar 2013 19:08:48 +0100
Subject: [gdal-dev] GDAL 1.10?
In-Reply-To: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>
References: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>
Message-ID: <20130322180847.GE5126@homebox.lovergine.com>

On Thu, Mar 21, 2013 at 06:46:17PM -0500, William Kyngesburye wrote:
> Sorry to pester people working diligently on the next release, but what's holding up at least an RC for 1.10?
> 
> It would be nice to have 1.10 for the upcoming QGIS 2.
> 

About releasing, would you please also consider:

http://upstream-tracker.org/versions/gdal.html

and specifically 

http://upstream-tracker.org/compat_reports/gdal/1.9.2_to_1.10.0beta1/abi_compat_report.html

That would prospectively useful for ABI/API maitainance at distribution level 
(soname settings, etc.)

-- 
Francesco P. Lovergine

From traviskirstine at gmail.com  Fri Mar 22 11:28:01 2013
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri, 22 Mar 2013 14:28:01 -0400
Subject: [gdal-dev] Google maps support licensing question
In-Reply-To: <CAJ1ZnRWF8pBqPUJEvJJ0bOj+hNAM8jnEOg+ZKDa6J4fJNzq6ww@mail.gmail.com>
References: <CAJ1ZnRUFGgrUyigU8W6fhPtG4zvcdaZmF2Yn9S5=qfDqN-4n+Q@mail.gmail.com>
	<CAJ1ZnRWF8pBqPUJEvJJ0bOj+hNAM8jnEOg+ZKDa6J4fJNzq6ww@mail.gmail.com>
Message-ID: <CALtm4h0BgPjbT8FEykf8rMMZgyMJa1L4FcpiT0HzLCfGE0Nf-g@mail.gmail.com>

I'm 99.9% sure this would be against the terms of service:

http://www.google.com/help/terms_maps.html

Section 2 would cover this.

Regards



On 22 March 2013 14:02, Gabriel Fusca <gabrielfusca at suremptec.com.ar> wrote:

> /bump
>
>
> 2013/3/8 Gabriel Fusca <gabrielfusca at suremptec.com.ar>
>
>> Hi All,
>>
>> I'm developing a free but not open-source desktop application using Gdal
>> 1.9.
>>
>> I want to know if exists any licesing problem to support google maps
>> layers
>>
>> Best regards,
>>
>> --
>> Gabriel Fusca
>> SUR Emprendimientos Tecnol?gicos
>>
>> Per? 345  Piso 5to Oficina "B" (C1067AAG)
>> Ciudad de Buenos Aires, Argentina
>> Tel. +54 (11) 4342-2976/84
>> gabrielfusca at suremptec.com.ar
>> http://www.suremptec.com/
>>
>
>
>
> --
> Gabriel Fusca
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> gabrielfusca at suremptec.com.ar
> http://www.suremptec.com/
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130322/a9fa6ac7/attachment.html>

From even.rouault at mines-paris.org  Fri Mar 22 12:29:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 22 Mar 2013 20:29:40 +0100
Subject: [gdal-dev] GDAL 1.10?
In-Reply-To: <20130322180847.GE5126@homebox.lovergine.com>
References: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>
	<20130322180847.GE5126@homebox.lovergine.com>
Message-ID: <201303222029.40763.even.rouault@mines-paris.org>

Le vendredi 22 mars 2013 19:08:48, Francesco P. Lovergine a ?crit :
> On Thu, Mar 21, 2013 at 06:46:17PM -0500, William Kyngesburye wrote:
> > Sorry to pester people working diligently on the next release, but what's
> > holding up at least an RC for 1.10?
> > 
> > It would be nice to have 1.10 for the upcoming QGIS 2.
> 
> About releasing, would you please also consider:
> 
> http://upstream-tracker.org/versions/gdal.html
> 
> and specifically
> 
> http://upstream-tracker.org/compat_reports/gdal/1.9.2_to_1.10.0beta1/abi_co
> mpat_report.html
> 
> That would prospectively useful for ABI/API maitainance at distribution
> level (soname settings, etc.)

Looks fine to me. The C API has only been extended. Only a few C++ changes. So 
according to our usual practices documented in HOWTO-RELEASE, the libtool 
version-info of 1.10 should be 18.0.17.

From szekerest at gmail.com  Fri Mar 22 13:12:16 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 22 Mar 2013 21:12:16 +0100
Subject: [gdal-dev]  Converting .NET Bitmap to GDAL Dataset
In-Reply-To: <CACALY+RFzErc4WDSc6UhWoFZBiZO53Pq8tbnzNgDCMdRLrCr-A@mail.gmail.com>
References: <1363976198155-5042430.post@n6.nabble.com>
	<CACALY+RFzErc4WDSc6UhWoFZBiZO53Pq8tbnzNgDCMdRLrCr-A@mail.gmail.com>
Message-ID: <CACALY+SaewxMEK5w=CstfgobDwO1LFiAtzLsuR2R8mUfYa-4PA@mail.gmail.com>

For an example of the reverse action see SaveBitMapDirect in
GDALReadDirect.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs>

To write data to GDAL dataset see:
GDALWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALWrite.cs>or
GDALDatasetWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetWrite.cs>

Best regards,

Tamas



2013/3/22 Maksim Sestic <max at geoinova.com>

> Hi all,
>
> Is there any example (or a hint) of converting a System.Drawing.Bitmap into
> GDAL Dataset?
>
> Regards,
> Maksim Sestic
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Converting-NET-Bitmap-to-GDAL-Dataset-tp5042430.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130322/2e6e526d/attachment.html>

From JPalmer at linz.govt.nz  Fri Mar 22 14:12:51 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Sat, 23 Mar 2013 10:12:51 +1300
Subject: [gdal-dev] WFS and HTTP compression
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F73634521@prdlsmmsg01.ad.linz.govt.nz>

Hi All,

I've being doing some bandwidth analysis when using GDAL/OGR trunk with a Geoserver WFS 1.1.0 server. I've found that gzip HTTP compression is not used when requesting the data in the GML2 and GML3 output format if OGR_WFS_USE_STREAMING is set to YES. However when requesting the GeoJSON output format (regardless of the OGR_WFS_USE_STREAMING setting) it is using HTTP gzip compression.

Is there a reason why HTTP compression is not used for GML when streaming is enabled?

Thanks,
Jeremy

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Fri Mar 22 14:29:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 22 Mar 2013 22:29:03 +0100
Subject: [gdal-dev] WFS and HTTP compression
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F73634521@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0F73634521@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201303222229.03998.even.rouault@mines-paris.org>

Le vendredi 22 mars 2013 22:12:51, Jeremy Palmer a ?crit :
> Hi All,
> 
> I've being doing some bandwidth analysis when using GDAL/OGR trunk with a
> Geoserver WFS 1.1.0 server. I've found that gzip HTTP compression is not
> used when requesting the data in the GML2 and GML3 output format if
> OGR_WFS_USE_STREAMING is set to YES. However when requesting the GeoJSON
> output format (regardless of the OGR_WFS_USE_STREAMING setting) it is
> using HTTP gzip compression.
> 
> Is there a reason why HTTP compression is not used for GML when streaming
> is enabled?

Because it doesn't take the same code path (GML uses /vsicurl_steaming/ while 
other output formats use CPLHttpFetch() that downloads the whole file into 
memory and then parses it). I've just added GZip compression request in 
/vsicurl_streaming/ (can be turned off by setting CPL_CURL_GZIP to NO)

> 
> Thanks,
> Jeremy
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From JPalmer at linz.govt.nz  Fri Mar 22 14:54:13 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Sat, 23 Mar 2013 10:54:13 +1300
Subject: [gdal-dev] WFS and HTTP compression
In-Reply-To: <201303222229.03998.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0F73634521@prdlsmmsg01.ad.linz.govt.nz>,
	<201303222229.03998.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F73634523@prdlsmmsg01.ad.linz.govt.nz>

> Because it doesn't take the same code path (GML uses /vsicurl_steaming/ while
> other output formats use CPLHttpFetch() that downloads the whole file into
> memory and then parses it). I've just added GZip compression request in
> /vsicurl_streaming/ (can be turned off by setting CPL_CURL_GZIP to NO)

Thanks Even!

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Sat Mar 23 08:12:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 23 Mar 2013 16:12:14 +0100
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
Message-ID: <201303231612.15218.even.rouault@mines-paris.org>

Hi,

I have prepared a GDAL/OGR 1.10 second beta release.

  http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz

The NEWS for the release can be found at the top of:

  http://svn.osgeo.org/gdal/trunk/gdal/NEWS

As usual, you are kindly invited to test and report (ideally with patches) 
anything that must be fixed before the release.

There will be perhaps another beta, but if things go smoothly, the next step 
will be RC1.

Best regards,

Even

From jan.heckman at gmail.com  Sat Mar 23 12:30:52 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sat, 23 Mar 2013 20:30:52 +0100
Subject: [gdal-dev] ReadAsArray: putting data in an already existent
	array
In-Reply-To: <CAML4TukT4JV9b=ftR=8yUYPgRt0na-NC3tn9KKvAeW1wvHyp-g@mail.gmail.com>
References: <CAML4TukT4JV9b=ftR=8yUYPgRt0na-NC3tn9KKvAeW1wvHyp-g@mail.gmail.com>
Message-ID: <CAKMUAtDyqBwtrAGum6Ura5dzcx_fuEMSiumnmVNvWoBKspqx-g@mail.gmail.com>

Hi Diego,
I haven't checked this out, but my guess is that you should make a
(python)list of the arrays if you need to keep them.  If you don't need to
keep them, you might try to del(ete) myarray before the next ReadAsArray
call.
Of course there is a lower level function which accepts an address as you
suggest, but the question is whether it should be exposed.
Because of the potential for errors, exposing it might not be the best.
You could expose it yourself, probably, but I very much suggest trying my
suggestion first.
Good luck,
Jan

On Fri, Mar 22, 2013 at 6:47 PM, Diego Gnesi Bartolani <
diego.gnesi at gmail.com> wrote:

> Hi,
>
>     I'm programming in Python and I need to "scan" a large image with GDAL
> reading n rows at the time. I'm using the ReadAsArray method, but every
> time I execute it I get a new array. I think this solution consumes a lot
> of resources.
> Is there a method or option to pass to ReadAsArray an array that already
> exists, in order to change it's value, like in the following pseudo-code:
>
> band1 = ds.GetRasterBand(1)
> my_arr = band1.ReadAsArrray([params])
> [Do something with my_arr]
> band1.ReadAsArray([params to get other rows], save_to=my_arr)
>
> Of course, my_arr must have the correct size for storing incoming data.
>
> Thanks,
>
> Diego
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130323/ada13dc5/attachment.html>

From even.rouault at mines-paris.org  Sat Mar 23 12:41:01 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 23 Mar 2013 20:41:01 +0100
Subject: [gdal-dev] ReadAsArray: putting data in an already existent
	array
In-Reply-To: <CAML4TukT4JV9b=ftR=8yUYPgRt0na-NC3tn9KKvAeW1wvHyp-g@mail.gmail.com>
References: <CAML4TukT4JV9b=ftR=8yUYPgRt0na-NC3tn9KKvAeW1wvHyp-g@mail.gmail.com>
Message-ID: <201303232041.02149.even.rouault@mines-paris.org>

Le vendredi 22 mars 2013 18:47:49, Diego Gnesi Bartolani a ?crit :
> Hi,
> 
>     I'm programming in Python and I need to "scan" a large image with GDAL
> reading n rows at the time. I'm using the ReadAsArray method, but every
> time I execute it I get a new array. I think this solution consumes a lot
> of resources.
> Is there a method or option to pass to ReadAsArray an array that already
> exists, in order to change it's value, like in the following pseudo-code:
> 
> band1 = ds.GetRasterBand(1)
> my_arr = band1.ReadAsArrray([params])
> [Do something with my_arr]
> band1.ReadAsArray([params to get other rows], save_to=my_arr)

You can try :

band1.ReadAsArray([params to get other rows], buf_obj = my_arr)

See
http://svn.osgeo.org/gdal/trunk/autotest/gcore/numpy_rw.py

> 
> Of course, my_arr must have the correct size for storing incoming data.
> 
> Thanks,
> 
> Diego

From diego.gnesi at gmail.com  Sat Mar 23 14:45:00 2013
From: diego.gnesi at gmail.com (Diego Gnesi)
Date: Sat, 23 Mar 2013 21:45:00 +0000
Subject: [gdal-dev] R: Re: ReadAsArray: putting data in an already existent
	array
Message-ID: <393835428-1364075084-cardhu_decombobulator_blackberry.rim.net-2064274966-@b27.c15.bise7.blackberry>

Thank you Even!
------Messaggio originale------
Da: Even Rouault
A: gdal-dev at lists.osgeo.org
Cc: Diego Gnesi
Oggetto: Re: [gdal-dev] ReadAsArray: putting data in an already existent array
Inviato: 23 mar 2013 20:41

Le vendredi 22 mars 2013 18:47:49, Diego Gnesi Bartolani a ?crit :
> Hi,
> 
>     I'm programming in Python and I need to "scan" a large image with GDAL
> reading n rows at the time. I'm using the ReadAsArray method, but every
> time I execute it I get a new array. I think this solution consumes a lot
> of resources.
> Is there a method or option to pass to ReadAsArray an array that already
> exists, in order to change it's value, like in the following pseudo-code:
> 
> band1 = ds.GetRasterBand(1)
> my_arr = band1.ReadAsArrray([params])
> [Do something with my_arr]
> band1.ReadAsArray([params to get other rows], save_to=my_arr)

You can try :

band1.ReadAsArray([params to get other rows], buf_obj = my_arr)

See
http://svn.osgeo.org/gdal/trunk/autotest/gcore/numpy_rw.py

> 
> Of course, my_arr must have the correct size for storing incoming data.
> 
> Thanks,
> 
> Diego



From szekerest at gmail.com  Sun Mar 24 06:23:49 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 24 Mar 2013 14:23:49 +0100
Subject: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
In-Reply-To: <C7219BDF4D5B4917BF159406D4AFBA58@max6>
References: <1363976198155-5042430.post@n6.nabble.com>
	<CACALY+RFzErc4WDSc6UhWoFZBiZO53Pq8tbnzNgDCMdRLrCr-A@mail.gmail.com>
	<CACALY+SaewxMEK5w=CstfgobDwO1LFiAtzLsuR2R8mUfYa-4PA@mail.gmail.com>
	<9D7F40B94FE84C9D879B06DBB73761F2@max6>
	<CACALY+To5LUL3hUj04rUCrK_XuLQe1ggN2UK6ZE2tNR_mCk_qA@mail.gmail.com>
	<0261285A5EC94887A594D739C987A21A@max6>
	<CACALY+QS4EQOLe=zckFmGwD_wWmUYeq7FqCga2=uiRN7d7TUkw@mail.gmail.com>
	<EE6C9028FFB14F44913DEE08F50DADD5@max6>
	<CACALY+QFKbHB7Y-heffNjcTw8EHD1N5pudLODUFG-9+p5r_0_g@mail.gmail.com>
	<04B7EC0A218646CC8E4A803D190B5883@max6>
	<CACALY+TrjzDtAsS_eDTo8vL6fU=n14Ms7=cqhcKEXpSFbs4AGw@mail.gmail.com>
	<C7219BDF4D5B4917BF159406D4AFBA58@max6>
Message-ID: <CACALY+RuTxvk7uEKLFz=+yEPetuqkOOLz7AVPLREMeJyna0YEA@mail.gmail.com>

This is because there's no driver to recognise the image data directly. You
should provide the image file in a GDAL supported binary format (like jpg
or png or tif) or use the MEM driver to represent the dataset. I've created
a new sample for this approach at:

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALMemDataset.cs

In this example I create the bands in a reverse order as it looks like the
Windows bitmap format requires it.


Best regards,

Tamas



2013/3/23 Maksim Sestic <max at geoinova.com>

>  It's a Bitmap instance created using:****
>
> ** **
>
> Dim bmp As Bitmap = Bitmap.FromFile("C:\Input.png")****
>
> ** **
>
> then converted to byte array (as per MSDN article):****
>
> ** **
>
> ' Lock the bitmap's bits.****
>
> Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)****
>
> Dim bmpData As BitmapData = bmp.LockBits(rect, ImageLockMode.ReadOnly,
> bmp.PixelFormat)****
>
> ** **
>
> ' Get the address of the first line.****
>
> Dim ptr As IntPtr = bmpData.Scan0****
>
> ** **
>
> ' Declare an array to hold the bytes of the bitmap.****
>
> Dim bitmapData As Byte()****
>
> ReDim bitmapData(Math.Abs(bmpData.Stride) * bmp.Height)****
>
> ** **
>
> ' Copy the RGB values into the array.****
>
> Marshal.Copy(ptr, bitmapData, 0, bitmapData.Length)****
>
> ** **
>
> ' Unlock the bits.****
>
> bmp.UnlockBits(bmpData)****
>
> ** **
>
> The rest is your code (abbreviated version):****
>
> ** **
>
> 'Code provided by Tamas Szekeres****
>
> Gdal.AllRegister()****
>
> Dim handle As GCHandle = GCHandle.Alloc(bitmapData, GCHandleType.Pinned)**
> **
>
> Dim memFilename As String = "/vsimem/inmemfile"****
>
> Gdal.FileFromMemBuffer(memFilename, bitmapData.Length,
> handle.AddrOfPinnedObject())****
>
> Dim ds As Dataset = Gdal.Open(memFilename, Access.GA_ReadOnly)     '<<<
> Exception gets thrown at this line****
>
> Dim drv As Driver = Gdal.GetDriverByName("GTiff")****
>
> drv.CreateCopy("C:\Output.tif", ds, 0, Nothing, Nothing, Nothing)****
>
> Gdal.Unlink(memFilename)****
>
> handle.Free()****
>
> ** **
>
> Sorry about my VB.NET :-) ****
>
> ** **
>
> I'm certain it's not about assembly referencing issues and such, since it
> works correctly using "classic" Gdal.Open(...) method.****
>
> ** **
>
> Regards,****
>
> Maksim Sestic****
>
> ** **
>
> ** **
>  ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
> *Sent:* Saturday, March 23, 2013 23:46
>
> *To:* Maksim Sestic
> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
> ****
>
>  ** **
>
> What is the input file you are using?****
>
> ** **
>
> Tamas****
>
> ** **
>
> 2013/3/23 Maksim Sestic <max at geoinova.com>****
>
> Hi Tamas,****
>
>  ****
>
> It throws exception at line:****
>
>  ****
>
> Dataset ds = Gdal.Open(memFilename, Access.GA_ReadOnly);****
>
>  ****
>
> ...saying that "/vsimem/inmemfile" is not a recognized format.****
>
>  ****
>
> I'm using GDAL 1.8.0, could it be version-related?****
>
>  ****
>
> Regards,****
>
> Maksim Sestic ****
>
>  ****
>  ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
> *Sent:* Saturday, March 23, 2013 22:11****
>
>
> *To:* Maksim Sestic
> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>
>  ****
>
> Added a C# example to demonstrate the usage of the /vsimem facilities.****
>
>  ****
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/VSIMem.cs**
> **
>
>  ****
>
> Best regards,****
>
>  ****
>
> Tamas****
>
>  ****
>
>  ****
>
>  ****
>
> 2013/3/23 Maksim Sestic <max at geoinova.com>****
>
> Hi Tamas,****
>
>  ****
>
> Thanks for the help. I recall hitting this issue before as well:
> http://lists.osgeo.org/pipermail/gdal-dev/2012-May/032972.html****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>  ****
>
> P.S.****
>
> Sorry, just noticed that the conversation went to priv. only and not to
> gdal-dev forum.****
>
>  ****
>  ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
> *Sent:* Saturday, March 23, 2013 10:56****
>
>
> *To:* Maksim Sestic
> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>
>  ****
>
> You may probably utilize the MEM driver (http://www.gdal.org/frmt_mem.html)
> or the vsimem virtual file system
> http://gdal.org/cpl__vsi_8h.html#a66e2e6f093fd42f8a941b962d4c8a19e****
>
>  ****
>
> Best regards,****
>
>  ****
>
> Tamas****
>
>  ****
>
> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>
> Hi Tamas,****
>
>  ****
>
> You're right, thanks. ****
>
>  ****
>
> I was trying to create a pair of "roundtrip" classes utilizing Gdal. First
> one would read e.g. a file into Bitmap instance, that's what GDALRead.cs
> demonstrates perfectly. The other would write this Bitmap instance using
> Gdal drivers back to e.g. another file. You might have guessed that I was
> stuck at the second one. I neve actually coded against Gdal memory driver,
> should give it a try I guess...****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>  ****
>  ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
> *Sent:* Friday, March 22, 2013 22:58
> *To:* Maksim Sestic
> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>
>  ****
>
> Dataset is considered as an interface to the underlying driver. Aside from
> the 'in memory driver' and some sort of internal caching facilities the
> dataset doesn't hold data in memory. In this regard we cannot convert these
> 2 objects types to each other. The most obvious action regarding to your
> requirement is to create and in memory dataset and copy data from the
> bitmap to the dataset, as I've mentioned before.****
>
>  ****
>
> Best regards,****
>
>  ****
>
> Tamas****
>
>  ****
>
>  ****
>
> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>
> Hi Tamas,****
>
>  ****
>
> If I'm not mistaken, GDALWrite.cs and GDALDatasetWrite.cs examples are
> about writing (using Create() method) a dataset to disk. What I'm trying to
> do is to convert a System.Drawing.Bitmap instance to a GDAL.Dataset,
> in-memory only. But I'm not sure about how to do it...****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>  ****
>
>  ****
>  ------------------------------
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Tamas Szekeres
> *Sent:* Friday, March 22, 2013 21:12
> *To:* gdal-dev
> *Subject:* [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>
>  ****
>
>  ****
>
> For an example of the reverse action see SaveBitMapDirect in
> GDALReadDirect.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs>
>  ****
>
> To write data to GDAL dataset see: GDALWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALWrite.cs>or
> GDALDatasetWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetWrite.cs>
> ****
>
>  ****
>
> Best regards,****
>
>  ****
>
> Tamas****
>
>  ****
>
>  ****
>
> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>
> Hi all,
>
> Is there any example (or a hint) of converting a System.Drawing.Bitmap into
> GDAL Dataset?
>
> Regards,
> Maksim Sestic
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Converting-NET-Bitmap-to-GDAL-Dataset-tp5042430.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>  ****
>
>  ****
>
>  ****
>
>  ****
>
>  ****
>
> ** **
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130324/fc726654/attachment-0001.html>

From aboudreault at mapgears.com  Sun Mar 24 08:12:24 2013
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Sun, 24 Mar 2013 11:12:24 -0400
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
In-Reply-To: <201303231612.15218.even.rouault@mines-paris.org>
References: <201303231612.15218.even.rouault@mines-paris.org>
Message-ID: <514F17D8.1040502@mapgears.com>

Hi EvenR,

I was about to commit my new DDS driver on Monday, at the osgeo code 
sprint. I'm going to confirm its addition as soon as it's done. It would 
be nice to wait for it before the beta3 (Just mentionning.. I doubt any 
other beta was planned in the next 2 days anyway).

Thanks!
Alan

On 13-03-23 11:12 AM, Even Rouault wrote:
> Hi,
>
> I have prepared a GDAL/OGR 1.10 second beta release.
>
>    http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz
>
> The NEWS for the release can be found at the top of:
>
>    http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>
> As usual, you are kindly invited to test and report (ideally with patches)
> anything that must be fixed before the release.
>
> There will be perhaps another beta, but if things go smoothly, the next step
> will be RC1.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Alan Boudreault
http://www.mapgears.com/

From raghavendra at vizexperts.com  Sun Mar 24 08:50:51 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Sun, 24 Mar 2013 08:50:51 -0700 (PDT)
Subject: [gdal-dev] Issue with Postgis Raster Cover with different
	resolutions
Message-ID: <1364140251325-5042596.post@n6.nabble.com>

Hi,

I found an issue in GDAL postgis raster, When we upload multiple tiff files
to a same table as a raster cover through raster2pgsql(each file divided
into tiles and each tile inserted as row in the table). And load the table
back using GDAL driver(tried with 1.10 beta1) into any application, one of
the raster is loading properly but in other rasters(tiff files which are
uploaded) i am seeing some rows and columns where data is missing. 

I figured out that this issue is because of having minor differences in the
x and y resolutions of different tiff files. Can you please suggest a way to
fix this issue?

Thanks
Ryagz



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Issue-with-Postgis-Raster-Cover-with-different-resolutions-tp5042596.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woklist at kyngchaos.com  Sun Mar 24 09:04:44 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 24 Mar 2013 11:04:44 -0500
Subject: [gdal-dev] GDAL 1.10?
In-Reply-To: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>
References: <57ECDE5D-4EA2-4235-B644-36AA239BA775@kyngchaos.com>
Message-ID: <92B8181A-D13E-44FE-8D70-3046693FDAB5@kyngchaos.com>

Thanks for the beta2.  Patience can easily turn into worry and other emotions when there is no news.

On Mar 21, 2013, at 6:46 PM, William Kyngesburye wrote:

> Sorry to pester people working diligently on the next release, but what's holding up at least an RC for 1.10?
> 
> It would be nice to have 1.10 for the upcoming QGIS 2.
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan






From szekerest at gmail.com  Sun Mar 24 09:24:51 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 24 Mar 2013 17:24:51 +0100
Subject: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
In-Reply-To: <CACALY+RuTxvk7uEKLFz=+yEPetuqkOOLz7AVPLREMeJyna0YEA@mail.gmail.com>
References: <1363976198155-5042430.post@n6.nabble.com>
	<CACALY+RFzErc4WDSc6UhWoFZBiZO53Pq8tbnzNgDCMdRLrCr-A@mail.gmail.com>
	<CACALY+SaewxMEK5w=CstfgobDwO1LFiAtzLsuR2R8mUfYa-4PA@mail.gmail.com>
	<9D7F40B94FE84C9D879B06DBB73761F2@max6>
	<CACALY+To5LUL3hUj04rUCrK_XuLQe1ggN2UK6ZE2tNR_mCk_qA@mail.gmail.com>
	<0261285A5EC94887A594D739C987A21A@max6>
	<CACALY+QS4EQOLe=zckFmGwD_wWmUYeq7FqCga2=uiRN7d7TUkw@mail.gmail.com>
	<EE6C9028FFB14F44913DEE08F50DADD5@max6>
	<CACALY+QFKbHB7Y-heffNjcTw8EHD1N5pudLODUFG-9+p5r_0_g@mail.gmail.com>
	<04B7EC0A218646CC8E4A803D190B5883@max6>
	<CACALY+TrjzDtAsS_eDTo8vL6fU=n14Ms7=cqhcKEXpSFbs4AGw@mail.gmail.com>
	<C7219BDF4D5B4917BF159406D4AFBA58@max6>
	<CACALY+RuTxvk7uEKLFz=+yEPetuqkOOLz7AVPLREMeJyna0YEA@mail.gmail.com>
Message-ID: <CACALY+RwErMXiPu4oAz=baQSS=FkuDSRbZ6miiDBp9o3ZTdAqg@mail.gmail.com>

We could also convert the bitmap to png or some other formats that the GDAL
drivers reconise, something like:

        byte[] imageBuffer;
        using (MemoryStream stream = new MemoryStream())
        {
            bmp.Save(stream, ImageFormat.Png);
            imageBuffer = stream.ToArray();
        }

        Gdal.FileFromMemBuffer(memFilename, imageBuffer);
        Dataset ds = Gdal.Open(memFilename, Access.GA_ReadOnly);


Best regards,

Tamas



2013/3/24 Tamas Szekeres <szekerest at gmail.com>

> This is because there's no driver to recognise the image data directly.
> You should provide the image file in a GDAL supported binary format (like
> jpg or png or tif) or use the MEM driver to represent the dataset. I've
> created a new sample for this approach at:
>
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALMemDataset.cs
>
> In this example I create the bands in a reverse order as it looks like the
> Windows bitmap format requires it.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2013/3/23 Maksim Sestic <max at geoinova.com>
>
>>  It's a Bitmap instance created using:****
>>
>> ** **
>>
>> Dim bmp As Bitmap = Bitmap.FromFile("C:\Input.png")****
>>
>> ** **
>>
>> then converted to byte array (as per MSDN article):****
>>
>> ** **
>>
>> ' Lock the bitmap's bits.****
>>
>> Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)****
>>
>> Dim bmpData As BitmapData = bmp.LockBits(rect, ImageLockMode.ReadOnly,
>> bmp.PixelFormat)****
>>
>> ** **
>>
>> ' Get the address of the first line.****
>>
>> Dim ptr As IntPtr = bmpData.Scan0****
>>
>> ** **
>>
>> ' Declare an array to hold the bytes of the bitmap.****
>>
>> Dim bitmapData As Byte()****
>>
>> ReDim bitmapData(Math.Abs(bmpData.Stride) * bmp.Height)****
>>
>> ** **
>>
>> ' Copy the RGB values into the array.****
>>
>> Marshal.Copy(ptr, bitmapData, 0, bitmapData.Length)****
>>
>> ** **
>>
>> ' Unlock the bits.****
>>
>> bmp.UnlockBits(bmpData)****
>>
>> ** **
>>
>> The rest is your code (abbreviated version):****
>>
>> ** **
>>
>> 'Code provided by Tamas Szekeres****
>>
>> Gdal.AllRegister()****
>>
>> Dim handle As GCHandle = GCHandle.Alloc(bitmapData, GCHandleType.Pinned)*
>> ***
>>
>> Dim memFilename As String = "/vsimem/inmemfile"****
>>
>> Gdal.FileFromMemBuffer(memFilename, bitmapData.Length,
>> handle.AddrOfPinnedObject())****
>>
>> Dim ds As Dataset = Gdal.Open(memFilename, Access.GA_ReadOnly)     '<<<
>> Exception gets thrown at this line****
>>
>> Dim drv As Driver = Gdal.GetDriverByName("GTiff")****
>>
>> drv.CreateCopy("C:\Output.tif", ds, 0, Nothing, Nothing, Nothing)****
>>
>> Gdal.Unlink(memFilename)****
>>
>> handle.Free()****
>>
>> ** **
>>
>> Sorry about my VB.NET :-) ****
>>
>> ** **
>>
>> I'm certain it's not about assembly referencing issues and such, since it
>> works correctly using "classic" Gdal.Open(...) method.****
>>
>> ** **
>>
>> Regards,****
>>
>> Maksim Sestic****
>>
>> ** **
>>
>> ** **
>>  ------------------------------
>>
>> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
>> *Sent:* Saturday, March 23, 2013 23:46
>>
>> *To:* Maksim Sestic
>> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
>> ****
>>
>>  ** **
>>
>> What is the input file you are using?****
>>
>> ** **
>>
>> Tamas****
>>
>> ** **
>>
>> 2013/3/23 Maksim Sestic <max at geoinova.com>****
>>
>> Hi Tamas,****
>>
>>  ****
>>
>> It throws exception at line:****
>>
>>  ****
>>
>> Dataset ds = Gdal.Open(memFilename, Access.GA_ReadOnly);****
>>
>>  ****
>>
>> ...saying that "/vsimem/inmemfile" is not a recognized format.****
>>
>>  ****
>>
>> I'm using GDAL 1.8.0, could it be version-related?****
>>
>>  ****
>>
>> Regards,****
>>
>> Maksim Sestic ****
>>
>>  ****
>>  ------------------------------
>>
>> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
>> *Sent:* Saturday, March 23, 2013 22:11****
>>
>>
>> *To:* Maksim Sestic
>> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>>
>>  ****
>>
>> Added a C# example to demonstrate the usage of the /vsimem facilities.***
>> *
>>
>>  ****
>>
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/VSIMem.cs*
>> ***
>>
>>  ****
>>
>> Best regards,****
>>
>>  ****
>>
>> Tamas****
>>
>>  ****
>>
>>  ****
>>
>>  ****
>>
>> 2013/3/23 Maksim Sestic <max at geoinova.com>****
>>
>> Hi Tamas,****
>>
>>  ****
>>
>> Thanks for the help. I recall hitting this issue before as well:
>> http://lists.osgeo.org/pipermail/gdal-dev/2012-May/032972.html****
>>
>>  ****
>>
>> Regards,****
>>
>> Maksim Sestic****
>>
>>  ****
>>
>> P.S.****
>>
>> Sorry, just noticed that the conversation went to priv. only and not to
>> gdal-dev forum.****
>>
>>  ****
>>  ------------------------------
>>
>> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
>> *Sent:* Saturday, March 23, 2013 10:56****
>>
>>
>> *To:* Maksim Sestic
>> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>>
>>  ****
>>
>> You may probably utilize the MEM driver (
>> http://www.gdal.org/frmt_mem.html) or the vsimem virtual file system
>> http://gdal.org/cpl__vsi_8h.html#a66e2e6f093fd42f8a941b962d4c8a19e****
>>
>>  ****
>>
>> Best regards,****
>>
>>  ****
>>
>> Tamas****
>>
>>  ****
>>
>> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>>
>> Hi Tamas,****
>>
>>  ****
>>
>> You're right, thanks. ****
>>
>>  ****
>>
>> I was trying to create a pair of "roundtrip" classes utilizing Gdal.
>> First one would read e.g. a file into Bitmap instance, that's what
>> GDALRead.cs demonstrates perfectly. The other would write this Bitmap
>> instance using Gdal drivers back to e.g. another file. You might have
>> guessed that I was stuck at the second one. I neve actually coded against
>> Gdal memory driver, should give it a try I guess...****
>>
>>  ****
>>
>> Regards,****
>>
>> Maksim Sestic****
>>
>>  ****
>>  ------------------------------
>>
>> *From:* Tamas Szekeres [mailto:szekerest at gmail.com]
>> *Sent:* Friday, March 22, 2013 22:58
>> *To:* Maksim Sestic
>> *Subject:* Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>>
>>  ****
>>
>> Dataset is considered as an interface to the underlying driver. Aside
>> from the 'in memory driver' and some sort of internal caching facilities
>> the dataset doesn't hold data in memory. In this regard we cannot convert
>> these 2 objects types to each other. The most obvious action regarding to
>> your requirement is to create and in memory dataset and copy data from the
>> bitmap to the dataset, as I've mentioned before.****
>>
>>  ****
>>
>> Best regards,****
>>
>>  ****
>>
>> Tamas****
>>
>>  ****
>>
>>  ****
>>
>> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>>
>> Hi Tamas,****
>>
>>  ****
>>
>> If I'm not mistaken, GDALWrite.cs and GDALDatasetWrite.cs examples are
>> about writing (using Create() method) a dataset to disk. What I'm trying to
>> do is to convert a System.Drawing.Bitmap instance to a GDAL.Dataset,
>> in-memory only. But I'm not sure about how to do it...****
>>
>>  ****
>>
>> Regards,****
>>
>> Maksim Sestic****
>>
>>  ****
>>
>>  ****
>>  ------------------------------
>>
>> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
>> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Tamas Szekeres
>> *Sent:* Friday, March 22, 2013 21:12
>> *To:* gdal-dev
>> *Subject:* [gdal-dev] Converting .NET Bitmap to GDAL Dataset****
>>
>>  ****
>>
>>  ****
>>
>> For an example of the reverse action see SaveBitMapDirect in
>> GDALReadDirect.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs>
>>  ****
>>
>> To write data to GDAL dataset see: GDALWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALWrite.cs>or
>> GDALDatasetWrite.cs<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetWrite.cs>
>> ****
>>
>>  ****
>>
>> Best regards,****
>>
>>  ****
>>
>> Tamas****
>>
>>  ****
>>
>>  ****
>>
>> 2013/3/22 Maksim Sestic <max at geoinova.com>****
>>
>> Hi all,
>>
>> Is there any example (or a hint) of converting a System.Drawing.Bitmap
>> into
>> GDAL Dataset?
>>
>> Regards,
>> Maksim Sestic
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/Converting-NET-Bitmap-to-GDAL-Dataset-tp5042430.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>>
>>  ****
>>
>>  ****
>>
>>  ****
>>
>>  ****
>>
>>  ****
>>
>> ** **
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130324/532551bc/attachment-0001.html>

From max at geoinova.com  Sun Mar 24 15:41:48 2013
From: max at geoinova.com (Maksim Sestic)
Date: Sun, 24 Mar 2013 23:41:48 +0100
Subject: [gdal-dev] Converting .NET Bitmap to GDAL Dataset
References: <1363976198155-5042430.post@n6.nabble.com><CACALY+RFzErc4WDSc6UhWoFZBiZO53Pq8tbnzNgDCMdRLrCr-A@mail.gmail.com><CACALY+SaewxMEK5w=CstfgobDwO1LFiAtzLsuR2R8mUfYa-4PA@mail.gmail.com><9D7F40B94FE84C9D879B06DBB73761F2@max6><CACALY+To5LUL3hUj04rUCrK_XuLQe1ggN2UK6ZE2tNR_mCk_qA@mail.gmail.com><0261285A5EC94887A594D739C987A21A@max6><CACALY+QS4EQOLe=zckFmGwD_wWmUYeq7FqCga2=uiRN7d7TUkw@mail.gmail.com><EE6C9028FFB14F44913DEE08F50DADD5@max6><CACALY+QFKbHB7Y-heffNjcTw8EHD1N5pudLODUFG-9+p5r_0_g@mail.gmail.com><04B7EC0A218646CC8E4A803D190B5883@max6><CACALY+TrjzDtAsS_eDTo8vL6fU=n14Ms7=cqhcKEXpSFbs4AGw@mail.gmail.com><C7219BDF4D5B4917BF159406D4AFBA58@max6><CACALY+RuTxvk7uEKLFz=+yEPetuqkOOLz7AVPLREMeJyna0YEA@mail.gmail.com>
	<CACALY+RwErMXiPu4oAz=baQSS=FkuDSRbZ6miiDBp9o3ZTdAqg@mail.gmail.com>
Message-ID: <6045F0E591E742D8986DF353E84F6FD6@max6>

Hi Tamas,

 

Yes, finally, "vsimem" works once bitmap is Png (abbreviated VB.NET code
follows):

 

      Dim bmp As Bitmap = Bitmap.FromFile("C:\Input.tif")

 

            Dim imageBuffer As Byte()

            Using stream As New MemoryStream()

                bmp.Save(stream, ImageFormat.Png)

                imageBuffer = stream.ToArray()

            End Using

 

            Dim pinnedArray As GCHandle = GCHandle.Alloc(imageBuffer,
GCHandleType.Pinned)

            Dim pointer As IntPtr = pinnedArray.AddrOfPinnedObject()

 

            Dim memFilename As String = "/vsimem/data"

            Gdal.FileFromMemBuffer(memFilename, imageBuffer.Length, pointer)

            Dim ds As Dataset = Gdal.Open(memFilename, Access.GA_ReadOnly)

 

            Dim drv As Driver = Gdal.GetDriverByName("GTiff")

            Dim ds1 = drv.CreateCopy("C:\Output.tif", ds, 0, Nothing,
Nothing, Nothing)

 

            pinnedArray.Free()

 

I've tested it on bitmaps originating from .bmp, .png, .tif and .jpg.

 

Regards,

Maksim Sestic

 

  _____  

From: Tamas Szekeres [mailto:szekerest at gmail.com] 
Sent: Sunday, March 24, 2013 17:25
To: Maksim Sestic
Cc: gdal-dev
Subject: Re: [gdal-dev] Converting .NET Bitmap to GDAL Dataset

 

We could also convert the bitmap to png or some other formats that the GDAL
drivers reconise, something like:

 

        byte[] imageBuffer;

        using (MemoryStream stream = new MemoryStream())

        {

            bmp.Save(stream, ImageFormat.Png);

            imageBuffer = stream.ToArray();

        }

 

        Gdal.FileFromMemBuffer(memFilename, imageBuffer);

        Dataset ds = Gdal.Open(memFilename, Access.GA_ReadOnly);

 

 

Best regards,

 

Tamas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130324/04118b91/attachment.html>

From aboudreault at mapgears.com  Mon Mar 25 08:05:43 2013
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Mon, 25 Mar 2013 11:05:43 -0400
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
In-Reply-To: <514F17D8.1040502@mapgears.com>
References: <201303231612.15218.even.rouault@mines-paris.org>
	<514F17D8.1040502@mapgears.com>
Message-ID: <515067C7.2080906@mapgears.com>

The driver is committed.

Alan

On 13-03-24 11:12 AM, Alan Boudreault wrote:
> Hi EvenR,
>
> I was about to commit my new DDS driver on Monday, at the osgeo code
> sprint. I'm going to confirm its addition as soon as it's done. It would
> be nice to wait for it before the beta3 (Just mentionning.. I doubt any
> other beta was planned in the next 2 days anyway).
>
> Thanks!
> Alan
>
> On 13-03-23 11:12 AM, Even Rouault wrote:
>> Hi,
>>
>> I have prepared a GDAL/OGR 1.10 second beta release.
>>
>>    http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz
>>
>> The NEWS for the release can be found at the top of:
>>
>>    http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>
>> As usual, you are kindly invited to test and report (ideally with
>> patches)
>> anything that must be fixed before the release.
>>
>> There will be perhaps another beta, but if things go smoothly, the
>> next step
>> will be RC1.
>>
>> Best regards,
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Alan Boudreault
http://www.mapgears.com/

From aboudreault at mapgears.com  Mon Mar 25 09:02:30 2013
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Mon, 25 Mar 2013 12:02:30 -0400
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
In-Reply-To: <51507478.2000701@c-s.fr>
References: <201303231612.15218.even.rouault@mines-paris.org>
	<514F17D8.1040502@mapgears.com> <515067C7.2080906@mapgears.com>
	<51507478.2000701@c-s.fr>
Message-ID: <51507516.5030604@mapgears.com>

Hi Julien,

I just committed a fix about that. Try to update please.

Alan

On 13-03-25 11:59 AM, Julien Malik wrote:
> Hi Alan,
>
> Just updated and I can't compile anymore.
> ddsdataset is activated by default though it requires some dependencies.
> I tried --without-dds, then --with-dds=no. No luck, it wants to compile
> ddsdataset.cpp anyway.
>
> I guess some configure magic is missing.
>
> Julien
>
> On 03/25/2013 04:05 PM, Alan Boudreault wrote:
>> The driver is committed.
>>
>> Alan
>>
>> On 13-03-24 11:12 AM, Alan Boudreault wrote:
>>> Hi EvenR,
>>>
>>> I was about to commit my new DDS driver on Monday, at the osgeo code
>>> sprint. I'm going to confirm its addition as soon as it's done. It would
>>> be nice to wait for it before the beta3 (Just mentionning.. I doubt any
>>> other beta was planned in the next 2 days anyway).
>>>
>>> Thanks!
>>> Alan
>>>
>>> On 13-03-23 11:12 AM, Even Rouault wrote:
>>>> Hi,
>>>>
>>>> I have prepared a GDAL/OGR 1.10 second beta release.
>>>>
>>>>    http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz
>>>>
>>>> The NEWS for the release can be found at the top of:
>>>>
>>>>    http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>>>
>>>> As usual, you are kindly invited to test and report (ideally with
>>>> patches)
>>>> anything that must be fixed before the release.
>>>>
>>>> There will be perhaps another beta, but if things go smoothly, the
>>>> next step
>>>> will be RC1.
>>>>
>>>> Best regards,
>>>>
>>>> Even
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>>
>


-- 
Alan Boudreault
http://www.mapgears.com/

From julien.malik at c-s.fr  Mon Mar 25 09:36:31 2013
From: julien.malik at c-s.fr (Julien Malik)
Date: Mon, 25 Mar 2013 17:36:31 +0100
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
In-Reply-To: <51507516.5030604@mapgears.com>
References: <201303231612.15218.even.rouault@mines-paris.org>
	<514F17D8.1040502@mapgears.com> <515067C7.2080906@mapgears.com>
	<51507478.2000701@c-s.fr> <51507516.5030604@mapgears.com>
Message-ID: <51507D0F.2060302@c-s.fr>

fix confirmed.
Thanks

On 03/25/2013 05:02 PM, Alan Boudreault wrote:
> Hi Julien,
>
> I just committed a fix about that. Try to update please.
>
> Alan
>
> On 13-03-25 11:59 AM, Julien Malik wrote:
>> Hi Alan,
>>
>> Just updated and I can't compile anymore.
>> ddsdataset is activated by default though it requires some dependencies.
>> I tried --without-dds, then --with-dds=no. No luck, it wants to compile
>> ddsdataset.cpp anyway.
>>
>> I guess some configure magic is missing.
>>
>> Julien
>>
>> On 03/25/2013 04:05 PM, Alan Boudreault wrote:
>>> The driver is committed.
>>>
>>> Alan
>>>
>>> On 13-03-24 11:12 AM, Alan Boudreault wrote:
>>>> Hi EvenR,
>>>>
>>>> I was about to commit my new DDS driver on Monday, at the osgeo code
>>>> sprint. I'm going to confirm its addition as soon as it's done. It 
>>>> would
>>>> be nice to wait for it before the beta3 (Just mentionning.. I doubt 
>>>> any
>>>> other beta was planned in the next 2 days anyway).
>>>>
>>>> Thanks!
>>>> Alan
>>>>
>>>> On 13-03-23 11:12 AM, Even Rouault wrote:
>>>>> Hi,
>>>>>
>>>>> I have prepared a GDAL/OGR 1.10 second beta release.
>>>>>
>>>>>    http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz
>>>>>
>>>>> The NEWS for the release can be found at the top of:
>>>>>
>>>>>    http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>>>>
>>>>> As usual, you are kindly invited to test and report (ideally with
>>>>> patches)
>>>>> anything that must be fixed before the release.
>>>>>
>>>>> There will be perhaps another beta, but if things go smoothly, the
>>>>> next step
>>>>> will be RC1.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Even
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>
>>>
>>
>
>


From julien.malik at c-s.fr  Mon Mar 25 08:59:52 2013
From: julien.malik at c-s.fr (Julien Malik)
Date: Mon, 25 Mar 2013 16:59:52 +0100
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta2 ready
In-Reply-To: <515067C7.2080906@mapgears.com>
References: <201303231612.15218.even.rouault@mines-paris.org>
	<514F17D8.1040502@mapgears.com> <515067C7.2080906@mapgears.com>
Message-ID: <51507478.2000701@c-s.fr>

Hi Alan,

Just updated and I can't compile anymore.
ddsdataset is activated by default though it requires some dependencies.
I tried --without-dds, then --with-dds=no. No luck, it wants to compile 
ddsdataset.cpp anyway.

I guess some configure magic is missing.

Julien

On 03/25/2013 04:05 PM, Alan Boudreault wrote:
> The driver is committed.
>
> Alan
>
> On 13-03-24 11:12 AM, Alan Boudreault wrote:
>> Hi EvenR,
>>
>> I was about to commit my new DDS driver on Monday, at the osgeo code
>> sprint. I'm going to confirm its addition as soon as it's done. It would
>> be nice to wait for it before the beta3 (Just mentionning.. I doubt any
>> other beta was planned in the next 2 days anyway).
>>
>> Thanks!
>> Alan
>>
>> On 13-03-23 11:12 AM, Even Rouault wrote:
>>> Hi,
>>>
>>> I have prepared a GDAL/OGR 1.10 second beta release.
>>>
>>>    http://download.osgeo.org/gdal/gdal-1.10.0beta2.tar.gz
>>>
>>> The NEWS for the release can be found at the top of:
>>>
>>>    http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>>
>>> As usual, you are kindly invited to test and report (ideally with
>>> patches)
>>> anything that must be fixed before the release.
>>>
>>> There will be perhaps another beta, but if things go smoothly, the
>>> next step
>>> will be RC1.
>>>
>>> Best regards,
>>>
>>> Even
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>


From andy.canfield at gmail.com  Mon Mar 25 16:51:43 2013
From: andy.canfield at gmail.com (Andy Canfield)
Date: Mon, 25 Mar 2013 17:51:43 -0600
Subject: [gdal-dev] Image(GeoTiff) not rotated properly?
Message-ID: <CAH9DkXyi5XQycFkEi0qDku=4rnm8PL5bVBPm-ajq63UqTA7TFg@mail.gmail.com>

I am attempting to tranform a GeoTiff from UTM14N to WGS84 using GDAL from
VC++ 2008 and I am brand new to using GDAL.

When I do the transformation everything seems to go off correctly but when
I compare my transformed image in Quantum GIS to the source image projected
on the fly by Quantum GIS their image is slightly rotated and mine is
straight. Theirs is correct, mine is not(I believe), yet I am not sure what
I am doing incorrectly. Is it my affine translation parameters, is it that
I am warping it improperly, did I calculate corners improperly or something
else entirely?

The source image is a 3 band GeoTiff if that helps at all.

Here is my complete code as I have it right now:

#include "stdafx.h"
#include "gdalwarper.h"
#include "cpl_conv.h"
#include "gdal_priv.h"
#include <ogr_spatialref.h>
#include "ogr_srs_api.h"

int _tmain(int argc, _TCHAR* argv[])
{
GDALAllRegister();

GDALDataset  *poDataset, *poDstDS;
const char *pszFormat = "GTiff";
const char *pszSrcFilename = "C:\\Example\\SampleData\\In.tif";
const char *pszDstFilename = "C:\\Example\\SampleData\\Out.tif";
GDALDriver *poDriver;
int rasterCount;

OGRSpatialReference oSrcSRS,oDstSRS;
char *pszSrcSRSWKT = NULL;
char *pszDstSRSWKT = NULL;

OGRCoordinateTransformation *transform = NULL;

double adfSrcGeoTransform[6];
double adfDstGeoTransform[6];
double xS[2];
double yS[2];

//Set destination spatial reference to WGS84 and get its WKT
oDstSRS.SetWellKnownGeogCS("WGS84");
oDstSRS.exportToWkt(&pszDstSRSWKT);

//Now set the source spatial reference to UTM14N WGS84 and get its WKT
oSrcSRS.SetProjCS( "UTM 14 (WGS84) in northern hemisphere." );
    oSrcSRS.SetWellKnownGeogCS( "WGS84" );
    oSrcSRS.SetUTM( 14, TRUE );
oSrcSRS.exportToWkt(&pszSrcSRSWKT);

//Set the coordinate transformation
transform = OGRCreateCoordinateTransformation(&oSrcSRS,&oDstSRS);

//Set the GeoTiff driver
poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);

// Open input and output files.
    poDataset = (GDALDataset *) GDALOpen( pszSrcFilename, GA_ReadOnly );
    rasterCount = poDataset->GetRasterCount();

poDstDS = poDriver->CreateCopy( pszDstFilename, poDataset, FALSE, NULL,
NULL, NULL );

    // Setup warp options.
GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

psWarpOptions->hSrcDS = poDataset;
psWarpOptions->hDstDS = poDstDS;


psWarpOptions->nBandCount = rasterCount;
psWarpOptions->panSrcBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount );
psWarpOptions->panDstBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount );

for(int i=0;i<rasterCount;i++)
{
psWarpOptions->panSrcBands[i] = i+1;//src band number
psWarpOptions->panDstBands[i] = i+1;//dst band number
}

psWarpOptions->pfnProgress = GDALTermProgress;

// Establish reprojection transformer.

psWarpOptions->pTransformerArg =
GDALCreateGenImgProjTransformer( poDataset,
pszSrcSRSWKT,
poDstDS,
pszDstSRSWKT,
FALSE, 0.0, 1 );

psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
psWarpOptions->eResampleAlg = GRA_Cubic;

// Initialize and execute the warp operation.
GDALWarpOperation oOperation;

oOperation.Initialize( psWarpOptions );
oOperation.ChunkAndWarpImage( 0, 0, GDALGetRasterXSize( poDstDS ),
GDALGetRasterYSize( poDstDS ) );

GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
GDALDestroyWarpOptions( psWarpOptions );

//Set the new image's projection tag info
poDstDS->SetProjection(pszDstSRSWKT);

//Get the original affine parameters
poDataset->GetGeoTransform(adfSrcGeoTransform);

double srcWidth = poDataset->GetRasterXSize();
double srcHeight = poDataset->GetRasterYSize();


//Get the corners
xS[0] = adfSrcGeoTransform[0];//minx
xS[1] = adfSrcGeoTransform[0] + srcWidth*adfSrcGeoTransform[1] +
srcHeight*adfSrcGeoTransform[2];//??? maxx

yS[0] = adfSrcGeoTransform[3];//maxy
yS[1] = adfSrcGeoTransform[3] + srcWidth*adfSrcGeoTransform[4] +
srcHeight*adfSrcGeoTransform[5];//??? miny


//Reproject its corners coordinate info
transform->Transform(2,xS,yS);

//Set all the new affine parameters
adfDstGeoTransform[0] = xS[0];
adfDstGeoTransform[1] = (xS[1] - xS[0]) / srcWidth;//(xMax - xMin) /
imageWidth
adfDstGeoTransform[2] = adfSrcGeoTransform[2];
adfDstGeoTransform[3] = yS[0];
adfDstGeoTransform[4] = adfSrcGeoTransform[4];
adfDstGeoTransform[5] = ((yS[0] - yS[1]) / srcHeight)*(-1);//((yMax - yMin)
/ imageHeight)*(-1)

//Set the new images affine information
poDstDS->SetGeoTransform(adfDstGeoTransform);

    GDALClose( poDstDS );
    GDALClose( poDataset );

    return 0;
}

Thank you in advance for any help you folks may be able to give me on this.

-Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130325/b91ff2db/attachment.html>

From gabrielfusca at suremptec.com.ar  Tue Mar 26 05:59:45 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Tue, 26 Mar 2013 09:59:45 -0300
Subject: [gdal-dev] Google maps support licensing question
In-Reply-To: <CALtm4h0BgPjbT8FEykf8rMMZgyMJa1L4FcpiT0HzLCfGE0Nf-g@mail.gmail.com>
References: <CAJ1ZnRUFGgrUyigU8W6fhPtG4zvcdaZmF2Yn9S5=qfDqN-4n+Q@mail.gmail.com>
	<CAJ1ZnRWF8pBqPUJEvJJ0bOj+hNAM8jnEOg+ZKDa6J4fJNzq6ww@mail.gmail.com>
	<CALtm4h0BgPjbT8FEykf8rMMZgyMJa1L4FcpiT0HzLCfGE0Nf-g@mail.gmail.com>
Message-ID: <CAJ1ZnRUVvu0EZqornOaGdv_QvYgBjdhv+VFt2KY4gm6OwyASjQ@mail.gmail.com>

Thanks!


2013/3/22 Travis Kirstine <traviskirstine at gmail.com>

> I'm 99.9% sure this would be against the terms of service:
>
> http://www.google.com/help/terms_maps.html
>
> Section 2 would cover this.
>
> Regards
>
>
>
> On 22 March 2013 14:02, Gabriel Fusca <gabrielfusca at suremptec.com.ar>wrote:
>
>> /bump
>>
>>
>> 2013/3/8 Gabriel Fusca <gabrielfusca at suremptec.com.ar>
>>
>>> Hi All,
>>>
>>> I'm developing a free but not open-source desktop application using Gdal
>>> 1.9.
>>>
>>> I want to know if exists any licesing problem to support google maps
>>> layers
>>>
>>> Best regards,
>>>
>>> --
>>> Gabriel Fusca
>>> SUR Emprendimientos Tecnol?gicos
>>>
>>> Per? 345  Piso 5to Oficina "B" (C1067AAG)
>>> Ciudad de Buenos Aires, Argentina
>>> Tel. +54 (11) 4342-2976/84
>>> gabrielfusca at suremptec.com.ar
>>> http://www.suremptec.com/
>>>
>>
>>
>>
>> --
>> Gabriel Fusca
>> SUR Emprendimientos Tecnol?gicos
>>
>> Per? 345  Piso 5to Oficina "B" (C1067AAG)
>> Ciudad de Buenos Aires, Argentina
>> Tel. +54 (11) 4342-2976/84
>> gabrielfusca at suremptec.com.ar
>> http://www.suremptec.com/
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130326/1b874398/attachment.html>

From andy.canfield at gmail.com  Tue Mar 26 09:17:51 2013
From: andy.canfield at gmail.com (Andy Canfield)
Date: Tue, 26 Mar 2013 10:17:51 -0600
Subject: [gdal-dev] Image(GeoTiff) not rotated properly?
Message-ID: <CAH9DkXyuSLCy1oY7fgFgX3HRGTosYw3=PmcPJV1YP36sapGTnQ@mail.gmail.com>

Please disregard I found what I needed to know in here:
http://www.gdal.org/warptut.html

and in here:
http://trac.osgeo.org/gdal/browser/trunk/gdal/alg/gdalwarper.cpp

and I now have it coming out correctly tilted.

Thank You,
Andy Canfield


On Mon, Mar 25, 2013 at 5:51 PM, Andy Canfield <andy.canfield at gmail.com>wrote:

> I am attempting to tranform a GeoTiff from UTM14N to WGS84 using GDAL from
> VC++ 2008 and I am brand new to using GDAL.
>
> When I do the transformation everything seems to go off correctly but when
> I compare my transformed image in Quantum GIS to the source image projected
> on the fly by Quantum GIS their image is slightly rotated and mine is
> straight. Theirs is correct, mine is not(I believe), yet I am not sure what
> I am doing incorrectly. Is it my affine translation parameters, is it that
> I am warping it improperly, did I calculate corners improperly or something
> else entirely?
>
> The source image is a 3 band GeoTiff if that helps at all.
>
> Here is my complete code as I have it right now:
>
> #include "stdafx.h"
> #include "gdalwarper.h"
> #include "cpl_conv.h"
> #include "gdal_priv.h"
> #include <ogr_spatialref.h>
> #include "ogr_srs_api.h"
>
> int _tmain(int argc, _TCHAR* argv[])
> {
> GDALAllRegister();
>
> GDALDataset  *poDataset, *poDstDS;
> const char *pszFormat = "GTiff";
>  const char *pszSrcFilename = "C:\\Example\\SampleData\\In.tif";
> const char *pszDstFilename = "C:\\Example\\SampleData\\Out.tif";
>  GDALDriver *poDriver;
> int rasterCount;
>
> OGRSpatialReference oSrcSRS,oDstSRS;
>  char *pszSrcSRSWKT = NULL;
> char *pszDstSRSWKT = NULL;
>
> OGRCoordinateTransformation *transform = NULL;
>
> double adfSrcGeoTransform[6];
> double adfDstGeoTransform[6];
> double xS[2];
>  double yS[2];
>
> //Set destination spatial reference to WGS84 and get its WKT
> oDstSRS.SetWellKnownGeogCS("WGS84");
>  oDstSRS.exportToWkt(&pszDstSRSWKT);
>
> //Now set the source spatial reference to UTM14N WGS84 and get its WKT
>  oSrcSRS.SetProjCS( "UTM 14 (WGS84) in northern hemisphere." );
>     oSrcSRS.SetWellKnownGeogCS( "WGS84" );
>     oSrcSRS.SetUTM( 14, TRUE );
> oSrcSRS.exportToWkt(&pszSrcSRSWKT);
>
> //Set the coordinate transformation
>  transform = OGRCreateCoordinateTransformation(&oSrcSRS,&oDstSRS);
>
> //Set the GeoTiff driver
>  poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);
>
> // Open input and output files.
>     poDataset = (GDALDataset *) GDALOpen( pszSrcFilename, GA_ReadOnly );
>     rasterCount = poDataset->GetRasterCount();
>
> poDstDS = poDriver->CreateCopy( pszDstFilename, poDataset, FALSE, NULL,
> NULL, NULL );
>
>      // Setup warp options.
> GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();
>
> psWarpOptions->hSrcDS = poDataset;
>  psWarpOptions->hDstDS = poDstDS;
>
>
> psWarpOptions->nBandCount = rasterCount;
>  psWarpOptions->panSrcBands = (int *) CPLMalloc(sizeof(int) *
> psWarpOptions->nBandCount );
> psWarpOptions->panDstBands = (int *) CPLMalloc(sizeof(int) *
> psWarpOptions->nBandCount );
>
> for(int i=0;i<rasterCount;i++)
> {
> psWarpOptions->panSrcBands[i] = i+1;//src band number
>  psWarpOptions->panDstBands[i] = i+1;//dst band number
> }
>
> psWarpOptions->pfnProgress = GDALTermProgress;
>
> // Establish reprojection transformer.
>
> psWarpOptions->pTransformerArg =
>  GDALCreateGenImgProjTransformer( poDataset,
> pszSrcSRSWKT,
> poDstDS,
>  pszDstSRSWKT,
> FALSE, 0.0, 1 );
>
> psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
>  psWarpOptions->eResampleAlg = GRA_Cubic;
>
> // Initialize and execute the warp operation.
>  GDALWarpOperation oOperation;
>
> oOperation.Initialize( psWarpOptions );
> oOperation.ChunkAndWarpImage( 0, 0, GDALGetRasterXSize( poDstDS ),
> GDALGetRasterYSize( poDstDS ) );
>
> GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
> GDALDestroyWarpOptions( psWarpOptions );
>
> //Set the new image's projection tag info
> poDstDS->SetProjection(pszDstSRSWKT);
>
> //Get the original affine parameters
> poDataset->GetGeoTransform(adfSrcGeoTransform);
>
> double srcWidth = poDataset->GetRasterXSize();
> double srcHeight = poDataset->GetRasterYSize();
>
>
> //Get the corners
> xS[0] = adfSrcGeoTransform[0];//minx
> xS[1] = adfSrcGeoTransform[0] + srcWidth*adfSrcGeoTransform[1] +
> srcHeight*adfSrcGeoTransform[2];//??? maxx
>
> yS[0] = adfSrcGeoTransform[3];//maxy
> yS[1] = adfSrcGeoTransform[3] + srcWidth*adfSrcGeoTransform[4] +
> srcHeight*adfSrcGeoTransform[5];//??? miny
>
>
> //Reproject its corners coordinate info
> transform->Transform(2,xS,yS);
>
> //Set all the new affine parameters
> adfDstGeoTransform[0] = xS[0];
> adfDstGeoTransform[1] = (xS[1] - xS[0]) / srcWidth;//(xMax - xMin) /
> imageWidth
>  adfDstGeoTransform[2] = adfSrcGeoTransform[2];
> adfDstGeoTransform[3] = yS[0];
> adfDstGeoTransform[4] = adfSrcGeoTransform[4];
>  adfDstGeoTransform[5] = ((yS[0] - yS[1]) / srcHeight)*(-1);//((yMax -
> yMin) / imageHeight)*(-1)
>
> //Set the new images affine information
>  poDstDS->SetGeoTransform(adfDstGeoTransform);
>
>     GDALClose( poDstDS );
>     GDALClose( poDataset );
>
>     return 0;
> }
>
> Thank you in advance for any help you folks may be able to give me on this.
>
> -Andy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130326/91b8151e/attachment-0001.html>

From chaoyuejoy at gmail.com  Tue Mar 26 10:18:16 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Tue, 26 Mar 2013 18:18:16 +0100
Subject: [gdal-dev] import error on fedora?
Message-ID: <CAAN-aRGOSbaXE-VnsfpJZd8TA6vs0VYekdV88XU2duc3FsLZ1w@mail.gmail.com>

Dear all,

I use "yum install gdal"  to install gdal on fedora 16,
I can see all following commands in the terminal:

ychao at lsce3139:~$ gdal
gdaladdo        gdal_contour    gdalenhance     gdalinfo
gdal_rasterize  gdaltransform   gdalwarp
gdalbuildvrt    gdaldem         gdal_grid       gdalmanage
gdaltindex      gdal_translate

However when I tried to import gdal, I get import error:

In [1]: import gdal
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-27bf4694dd2b> in <module>()
----> 1 import gdal

ImportError: No module named gdal

In [2]: from osgeo import gdal
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-a04b80bf4e65> in <module>()
----> 1 from osgeo import gdal

ImportError: No module named osgeo

so what's going on here? thanks for any response.

best regards,

chao
-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130326/f450cde9/attachment.html>

From kyle at pobox.com  Tue Mar 26 10:26:51 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 26 Mar 2013 11:26:51 -0600
Subject: [gdal-dev] import error on fedora?
In-Reply-To: <CAAN-aRGOSbaXE-VnsfpJZd8TA6vs0VYekdV88XU2duc3FsLZ1w@mail.gmail.com>
References: <CAAN-aRGOSbaXE-VnsfpJZd8TA6vs0VYekdV88XU2duc3FsLZ1w@mail.gmail.com>
Message-ID: <CAJ0mEz1M8tcta7dxFuLM_rhpEH4qQRBeRS=jCafO+EmtrazchA@mail.gmail.com>

Not a fedora guy, but you probably need the gdal-python package, try
installing python-gdal or gdal-python using yum.

kss

On Tue, Mar 26, 2013 at 11:18 AM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> Dear all,
>
> I use "yum install gdal"  to install gdal on fedora 16,
> I can see all following commands in the terminal:
>
> ychao at lsce3139:~$ gdal
> gdaladdo        gdal_contour    gdalenhance     gdalinfo
> gdal_rasterize  gdaltransform   gdalwarp
> gdalbuildvrt    gdaldem         gdal_grid       gdalmanage      gdaltindex
> gdal_translate
>
> However when I tried to import gdal, I get import error:
>
> In [1]: import gdal
> ---------------------------------------------------------------------------
> ImportError                               Traceback (most recent call last)
> <ipython-input-1-27bf4694dd2b> in <module>()
> ----> 1 import gdal
>
> ImportError: No module named gdal
>
> In [2]: from osgeo import gdal
> ---------------------------------------------------------------------------
> ImportError                               Traceback (most recent call last)
> <ipython-input-2-a04b80bf4e65> in <module>()
> ----> 1 from osgeo import gdal
>
> ImportError: No module named osgeo
>
> so what's going on here? thanks for any response.
>
> best regards,
>
> chao
> --
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> ************************************************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaoyuejoy at gmail.com  Tue Mar 26 10:34:21 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Tue, 26 Mar 2013 18:34:21 +0100
Subject: [gdal-dev] import error on fedora?
In-Reply-To: <CAJ0mEz1M8tcta7dxFuLM_rhpEH4qQRBeRS=jCafO+EmtrazchA@mail.gmail.com>
References: <CAAN-aRGOSbaXE-VnsfpJZd8TA6vs0VYekdV88XU2duc3FsLZ1w@mail.gmail.com>
	<CAJ0mEz1M8tcta7dxFuLM_rhpEH4qQRBeRS=jCafO+EmtrazchA@mail.gmail.com>
Message-ID: <CAAN-aRHCaV_aKdSuvtXMXdmHfq8N2VSdRTy+tfFjG7oC64+d_w@mail.gmail.com>

luckily, it solves my problem!  thanks!

Chao

On Tue, Mar 26, 2013 at 6:26 PM, Kyle Shannon <kyle at pobox.com> wrote:

> Not a fedora guy, but you probably need the gdal-python package, try
> installing python-gdal or gdal-python using yum.
>
> kss
>
> On Tue, Mar 26, 2013 at 11:18 AM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> > Dear all,
> >
> > I use "yum install gdal"  to install gdal on fedora 16,
> > I can see all following commands in the terminal:
> >
> > ychao at lsce3139:~$ gdal
> > gdaladdo        gdal_contour    gdalenhance     gdalinfo
> > gdal_rasterize  gdaltransform   gdalwarp
> > gdalbuildvrt    gdaldem         gdal_grid       gdalmanage
>  gdaltindex
> > gdal_translate
> >
> > However when I tried to import gdal, I get import error:
> >
> > In [1]: import gdal
> >
> ---------------------------------------------------------------------------
> > ImportError                               Traceback (most recent call
> last)
> > <ipython-input-1-27bf4694dd2b> in <module>()
> > ----> 1 import gdal
> >
> > ImportError: No module named gdal
> >
> > In [2]: from osgeo import gdal
> >
> ---------------------------------------------------------------------------
> > ImportError                               Traceback (most recent call
> last)
> > <ipython-input-2-a04b80bf4e65> in <module>()
> > ----> 1 from osgeo import gdal
> >
> > ImportError: No module named osgeo
> >
> > so what's going on here? thanks for any response.
> >
> > best regards,
> >
> > chao
> > --
> >
> ***********************************************************************************
> > Chao YUE
> > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > UMR 1572 CEA-CNRS-UVSQ
> > Batiment 712 - Pe 119
> > 91191 GIF Sur YVETTE Cedex
> > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> >
> ************************************************************************************
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130326/0b9b3096/attachment.html>

From chaoyuejoy at gmail.com  Wed Mar 27 13:52:24 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Wed, 27 Mar 2013 21:52:24 +0100
Subject: [gdal-dev] extract information from polygon shapefile based on
	raster grid?
Message-ID: <CAAN-aRFc7C76WhiF0cc2n-OdVUH8KQGus73xbs1JnLFNfvCMNQ@mail.gmail.com>

Dear all,

I am using the python binding of GDAL for reading polygon shapefiles.

I have a polygon shapefile which contains the fire polygon and burned area,
with typical fires burning on 10-100ha.
my model simulation result is based on 0.5degree X 0.5degree. So I need to
extract from this shapefile on each gridcell
of the 0.5d X 0.5 grid the information about like number of fires and mean
fire size etc.

The approach I am thinking currently is to calculate the center of each of
fire polygon, and check which 0.5d X 0.5d gridcell
it falls in, then build a huge dictionary with key as the numpy index of
the 0.5dX0.5d array, with the dictionary values as
the list(or array or pandas dataframe) which include the information of all
the polygons falling within the the same grid cell.

I don't know if there is a better approach than this? I appreciate any
comments.

best regards,

Chao

-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130327/b6ce767b/attachment.html>

From mathuin at gmail.com  Wed Mar 27 14:13:53 2013
From: mathuin at gmail.com (John Twilley)
Date: Wed, 27 Mar 2013 14:13:53 -0700
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <5122541B.7070908@uva.nl>
References: <51223405.1000005@uva.nl>
	<5122541B.7070908@uva.nl>
Message-ID: <CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>

I'm interested in this feature request as well.  Adding the mode resampling
algorithm to gdalwarp would be very beneficial to my projects, right up
there with being able to access the warp API from Python.  Is this at all
possible?  Should I submit a feature request on Trac, or what?  Just let me
know!

Jack.

-- 
mathuin at gmail dot com


On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

>
>  Hi devs,
>
> Would it be possible to add gauss and other interpolations to gdalwarp? At
> the moment I georeference large scans to 2000*2000 tiles at the most
> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
> etc  times the original scale, using gdaladdo and gauss or other
> interpolations. It would help immensely if I could do that directly with
> gdalwarp.
>
>
> Funding would probably no problem. The question is: can and should it be
> done?
>
> Jan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130327/e737c94d/attachment.html>

From jan.heckman at gmail.com  Wed Mar 27 15:38:49 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Wed, 27 Mar 2013 23:38:49 +0100
Subject: [gdal-dev] extract information from polygon shapefile based on
 raster grid?
In-Reply-To: <CAAN-aRFc7C76WhiF0cc2n-OdVUH8KQGus73xbs1JnLFNfvCMNQ@mail.gmail.com>
References: <CAAN-aRFc7C76WhiF0cc2n-OdVUH8KQGus73xbs1JnLFNfvCMNQ@mail.gmail.com>
Message-ID: <CAKMUAtCb0mjPWXu47ZCzmru4DFXV6uuY5tegp4o20RjuBcEssA@mail.gmail.com>

Hello Chao,

I may not understand your wish quite well, but I think you need some
datastructure which conforms to the elements of the grid and receives
addtional information derived from a number of shapes with attributes.
Your output could be another shapefile,  with the summed results as
attributes, like the number of fires.
In the case that the only spatial relationship between shapes and
gridelements is whether or not a shape falls inside, you can indeed
simplify the polygon shape to pointshapes (centerpoints) which can be
converted to a raster of 1's and 0's. Then you could use a dictionary to
put the shapeattributes in the right place. I see a problem when several
shapes fall into the same grid-element, having different attribute values.
So you would be better off with a way of rasterbuilding, where each
attribute is summed per gridelement over all the shapes that fall inside.
Such routines exist at least in several programs.
Alternatively, you can make a polygon shapefile which conforms to the
rasterelements, then do a spatial join between your (centerpoint) shapefile
and and the rastershape (effectively adding a field to the pointshapes
which is the index into the grid), then add the several attribute data per
gridelement by e.g. making a pivot table.
If you have to work with shapes that are larger than the gridelements, you
would need another solution; there would be a choice between sampling the
shapes or distributing shape attributes proportionally to calculated
overlap with (polygonal) gridelements.

So, more simply still,  assuming the grid is regular and it is possible to
compute the gridindex from pointcoordinates:

Add an index field to the centerpoint shape which has the attributes;
calculate the gridindex from the coordinates and put this into the index
field;
bring the table e.g. into excel;
do a pivot table for the attributes (count or sum).
If necessary, add the centerpoint coordinates to the resulting table;
convert the table into a new point shape with the desired attributes.

Hope I got you right and this helps,
Jan

On Wed, Mar 27, 2013 at 9:52 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:

> Dear all,
>
> I am using the python binding of GDAL for reading polygon shapefiles.
>
> I have a polygon shapefile which contains the fire polygon and burned
> area, with typical fires burning on 10-100ha.
> my model simulation result is based on 0.5degree X 0.5degree. So I need to
> extract from this shapefile on each gridcell
> of the 0.5d X 0.5 grid the information about like number of fires and mean
> fire size etc.
>
> The approach I am thinking currently is to calculate the center of each of
> fire polygon, and check which 0.5d X 0.5d gridcell
> it falls in, then build a huge dictionary with key as the numpy index of
> the 0.5dX0.5d array, with the dictionary values as
> the list(or array or pandas dataframe) which include the information of
> all the polygons falling within the the same grid cell.
>
> I don't know if there is a better approach than this? I appreciate any
> comments.
>
> best regards,
>
> Chao
>
> --
>
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>
> ************************************************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130327/68828e13/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Mar 28 04:27:11 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 28 Mar 2013 12:27:11 +0100
Subject: [gdal-dev] Feature request: gauss and other interpolations in
 gdalwarp
In-Reply-To: <CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
Message-ID: <5154290F.2020402@uva.nl>

Perhaps I should clarify a bit what I meant, I haven't had any reactions 
until now, positive or negative, and it is important for me.

I use Gdalwarp and gdaladdo extensively for goereferencing and tiling 
large historical maps serieses (raster scans). To display them 
efficiently, I need to create layers at different scale levels, e.g. if 
the original maps have a pixel size of 10 meters, I need to resample 
them to rasters with pixel sizes of 20, 40, 80 , 160, 320 and 640 
meters, and tile all those maps appropriately. So the original maps have 
to be resampled quite drastically. In Gdalwarp there is no adequeate 
resampling algorithm, and you end up with very grainy map at those lower 
resolutions. Gdaladdo has several more algorithms, with gauss in many 
cases the most efficient. However, even with the gauss filter, maps 
resampled at very low resolutions turn out too hazy. For an example see 
the 1930 map of the Netherlands:

http://mapserver.sara.nl/topo/triang/

If you zoom in to more detailed levels, you'll see the way the image 
sharpens. For the effect on black-white image choose the TMK-map (1850) 
with the top-center button. Filters like "unsharp mask" would perform 
much better in these cases.

So I would like to propose two enhancements to gdal:

- add additional filters to gdalwarp, gauss and the filters mentioned below.
- implement more filters for gdalwarp and gdaladdo, e.g. "unsharp mask", 
or the "mode" filter asked by Jack below. Perhaps even add the 
possibility to specify parameters, like in ImageMagick

I don't know how difficult is, and whether the gdal devs would find this 
really an improvement for gdal. I could do this with some ImageMagick or 
Gimp scripts, but it would be a kludge. As we are going to georeference 
the complete cadastral and topographical map base of the Netherlands 
from 1832 to 1994 the next few years (millions of map-scans), this 
exentsion of gdal would come in very handy. And funding it will really 
be no problem at all.

I would appreciate any kind of comment on this, positive or negative.

Regards,

Jan

Dr. J. Hartmann
Department of Geography
University of Amsterdam

On 03/27/2013 10:13 PM, John Twilley wrote:
> I'm interested in this feature request as well.  Adding the mode 
> resampling algorithm to gdalwarp would be very beneficial to my 
> projects, right up there with being able to access the warp API from 
> Python.  Is this at all possible?  Should I submit a feature request 
> on Trac, or what?  Just let me know!
>
> Jack.
>
> -- 
> mathuin at gmail dot com
>
>
> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>> wrote:
>
>
>     Hi devs,
>
>     Would it be possible to add gauss and other interpolations to
>     gdalwarp? At the moment I georeference large scans to 2000*2000
>     tiles at the most detailed scale, and then create 2000*2000 tiles
>     at resolutions of 2, 4 6 etc  times the original scale, using
>     gdaladdo and gauss or other interpolations. It would help
>     immensely if I could do that directly with gdalwarp.
>
>
>     Funding would probably no problem. The question is: can and should
>     it be done?
>
>     Jan
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/6e54d0d5/attachment-0001.html>

From doug_newcomb at fws.gov  Thu Mar 28 05:39:37 2013
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 28 Mar 2013 08:39:37 -0400
Subject: [gdal-dev] extract information from polygon shapefile based on
 raster grid?
In-Reply-To: <CAKMUAtCb0mjPWXu47ZCzmru4DFXV6uuY5tegp4o20RjuBcEssA@mail.gmail.com>
References: <CAAN-aRFc7C76WhiF0cc2n-OdVUH8KQGus73xbs1JnLFNfvCMNQ@mail.gmail.com>
	<CAKMUAtCb0mjPWXu47ZCzmru4DFXV6uuY5tegp4o20RjuBcEssA@mail.gmail.com>
Message-ID: <CALQGVr3wvhHeaUQmF7az9PmGWm7GQkLdeYC-LoZAFuG1t9hnUA@mail.gmail.com>

Chao,
Depending on how detailed you want your stats to be, it might be easier
 run the zonal statistics plugin in qgis or run v.rast.stats in GRASS 70.


Doug

On Wed, Mar 27, 2013 at 6:38 PM, Jan Heckman <jan.heckman at gmail.com> wrote:

> Hello Chao,
>
> I may not understand your wish quite well, but I think you need some
> datastructure which conforms to the elements of the grid and receives
> addtional information derived from a number of shapes with attributes.
> Your output could be another shapefile,  with the summed results as
> attributes, like the number of fires.
> In the case that the only spatial relationship between shapes and
> gridelements is whether or not a shape falls inside, you can indeed
> simplify the polygon shape to pointshapes (centerpoints) which can be
> converted to a raster of 1's and 0's. Then you could use a dictionary to
> put the shapeattributes in the right place. I see a problem when several
> shapes fall into the same grid-element, having different attribute values.
> So you would be better off with a way of rasterbuilding, where each
> attribute is summed per gridelement over all the shapes that fall inside.
> Such routines exist at least in several programs.
> Alternatively, you can make a polygon shapefile which conforms to the
> rasterelements, then do a spatial join between your (centerpoint) shapefile
> and and the rastershape (effectively adding a field to the pointshapes
> which is the index into the grid), then add the several attribute data per
> gridelement by e.g. making a pivot table.
> If you have to work with shapes that are larger than the gridelements, you
> would need another solution; there would be a choice between sampling the
> shapes or distributing shape attributes proportionally to calculated
> overlap with (polygonal) gridelements.
>
> So, more simply still,  assuming the grid is regular and it is possible to
> compute the gridindex from pointcoordinates:
>
> Add an index field to the centerpoint shape which has the attributes;
> calculate the gridindex from the coordinates and put this into the index
> field;
> bring the table e.g. into excel;
> do a pivot table for the attributes (count or sum).
> If necessary, add the centerpoint coordinates to the resulting table;
> convert the table into a new point shape with the desired attributes.
>
> Hope I got you right and this helps,
> Jan
>
> On Wed, Mar 27, 2013 at 9:52 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
>
>> Dear all,
>>
>> I am using the python binding of GDAL for reading polygon shapefiles.
>>
>> I have a polygon shapefile which contains the fire polygon and burned
>> area, with typical fires burning on 10-100ha.
>> my model simulation result is based on 0.5degree X 0.5degree. So I need
>> to extract from this shapefile on each gridcell
>> of the 0.5d X 0.5 grid the information about like number of fires and
>> mean fire size etc.
>>
>> The approach I am thinking currently is to calculate the center of each
>> of fire polygon, and check which 0.5d X 0.5d gridcell
>> it falls in, then build a huge dictionary with key as the numpy index of
>> the 0.5dX0.5d array, with the dictionary values as
>> the list(or array or pandas dataframe) which include the information of
>> all the polygons falling within the the same grid cell.
>>
>> I don't know if there is a better approach than this? I appreciate any
>> comments.
>>
>> best regards,
>>
>> Chao
>>
>> --
>>
>> ***********************************************************************************
>> Chao YUE
>> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
>> UMR 1572 CEA-CNRS-UVSQ
>> Batiment 712 - Pe 119
>> 91191 GIF Sur YVETTE Cedex
>> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>>
>> ************************************************************************************
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/4bf9ee6a/attachment.html>

From jgrn at illinois.edu  Thu Mar 28 07:12:45 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 28 Mar 2013 09:12:45 -0500
Subject: [gdal-dev] GDAL Question about the band/frequence information
In-Reply-To: <CA+YzLBc4Wak84fwcxi6dGQBe79rnVZ6cYMWBDUU0s4QV6Pc8uw@mail.gmail.com>
References: <CA+o=fQC5fKMsd_UOyF2HXpH9yqR7b3o27xJNPeWSq2Gq5gR4dQ@mail.gmail.com>
	<CA+o=fQDB9FMC6LBocH4o1hzLRsJe4WB4917tPCiZOS_2LX2Dyg@mail.gmail.com>
	<CA+YzLBc4Wak84fwcxi6dGQBe79rnVZ6cYMWBDUU0s4QV6Pc8uw@mail.gmail.com>
Message-ID: <CABG0rft7gnT-8u+eExHm2j4vP7XRDuNuHLf0sqn7fexW+EHqOw@mail.gmail.com>

I was recently looking into for some code I'm writing in R using rgdal, and
I wanted to see if we could generate some new effort on this.  While the
way each file format specifies RS information may be different, there are
some standard pieces of info that could be read/stored in a meaningful way
with GDAL.  Minimally, band wavelength and some storage of the units would
be really helpful.  I would think amongst the various RS software formats
(ENVI, Imagine, PCI Geomatica), we could come to a consensus on what
metadata might be common.

I am happy to consult on this, but I'm not capable of coding this sort of
thing myself.

Does anyone want to discuss this on/offline?

--j


On Wed, Feb 6, 2013 at 3:59 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Shuqing,
>
> GDAL does not have a well defined name for metadata describing a bands
> wavelength.  Some data products carry this in their metadata and it
> may be carried through via the GDAL generic metadata at either the
> band or dataset level.  Running gdalinfo against a file will show such
> generic metadata if it exists.  If not, you are out of luck.  :-(  In
> any event since there is no consistent approach to this you are going
> to be stuck doing product specific things, likely based on researching
> the each sensor yourself.
>
> Best regards,
> Frank
>
>
>
> On Wed, Feb 6, 2013 at 1:51 PM, Shuqing Chen <chenshuqing82 at gmail.com>
> wrote:
> >
> > Hello GDAL Developers,
> >
> > I have intergrated your GDAL library in my Multi Spectra analysis
> Project.
> > It works very well and ease to use.
> > A question is how can I find the band/frequence information for each
> band in
> > image dataset? Thank you in advance.
> >
> > Best regards,
> > Shuqing Chen
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/74c3a046/attachment.html>

From waelinsat at gmail.com  Thu Mar 28 07:17:27 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 28 Mar 2013 15:17:27 +0100
Subject: [gdal-dev] Add a style to a geojson layer
Message-ID: <CAPBhV0fcwwuYnVgGEES3REfj_ShODio+i0NHB3MGDpxVoeehwg@mail.gmail.com>

Hi All;

Excuse me for this question but i'm trying to add a style to a simple
Multipolygon in a GeoJson file but it can't be applied!

This is the code :

*{ "type": "MultiPolygon",
  "coordinates": [
    [[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0,
2.0]]],
    [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
     [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]]]
    ],

    "style":{
        //all SVG styles allowed
        "fill":"red",
        "stroke-width":"3",
        "fill-opacity":0.6
    }


  }*

regards;

-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/fe405957/attachment.html>

From waelinsat at gmail.com  Thu Mar 28 07:19:15 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 28 Mar 2013 15:19:15 +0100
Subject: [gdal-dev] Add a style to a Geojson Layer
Message-ID: <CAPBhV0exrL5xE7EgXo8HLZQhZ09L1Q9-Pm3O_BEV4e+V-aMZ-g@mail.gmail.com>

Hi all;

I'm trying to add a style to a geojson layer which is composed by a simple
multipolygon but it can't be applied...

This is the code:


*{ "type": "MultiPolygon",
  "coordinates": [
    [[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0,
2.0]]],
    [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
     [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]]]
    ],

    "style":{
        //all SVG styles allowed
        "fill":"red",
        "stroke-width":"3",
        "fill-opacity":0.6
    }


  }*

regards;
-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/7fd187c9/attachment-0001.html>

From waelinsat at gmail.com  Thu Mar 28 07:23:03 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 28 Mar 2013 15:23:03 +0100
Subject: [gdal-dev] Add a style to a Geojson Layer
In-Reply-To: <CAPBhV0exrL5xE7EgXo8HLZQhZ09L1Q9-Pm3O_BEV4e+V-aMZ-g@mail.gmail.com>
References: <CAPBhV0exrL5xE7EgXo8HLZQhZ09L1Q9-Pm3O_BEV4e+V-aMZ-g@mail.gmail.com>
Message-ID: <CAPBhV0d7qw0DdKF6S9Vz=3si+Xz89qdchEaH4wzp9as+-xNXrg@mail.gmail.com>

Anybody here?

2013/3/28 Wael Tarhouni <waelinsat at gmail.com>

> Hi all;
>
> I'm trying to add a style to a geojson layer which is composed by a simple
> multipolygon but it can't be applied...
>
> This is the code:
>
>
> *{ "type": "MultiPolygon",
>   "coordinates": [
>     [[[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0,
> 2.0]]],
>     [[[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0,
> 0.0]],
>      [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2,
> 0.2]]]
>     ],
>
>     "style":{
>         //all SVG styles allowed
>         "fill":"red",
>         "stroke-width":"3",
>         "fill-opacity":0.6
>     }
>
>
>   }*
>
> regards;
> --
> Wael Tarhouni
> Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT
>
> (+216) 22 239 551
>



-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/c9282974/attachment.html>

From osgeo.mailinglist at gmail.com  Thu Mar 28 07:35:42 2013
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 28 Mar 2013 15:35:42 +0100
Subject: [gdal-dev] Add a style to a Geojson Layer
In-Reply-To: <CAPBhV0d7qw0DdKF6S9Vz=3si+Xz89qdchEaH4wzp9as+-xNXrg@mail.gmail.com>
References: <CAPBhV0exrL5xE7EgXo8HLZQhZ09L1Q9-Pm3O_BEV4e+V-aMZ-g@mail.gmail.com>
	<CAPBhV0d7qw0DdKF6S9Vz=3si+Xz89qdchEaH4wzp9as+-xNXrg@mail.gmail.com>
Message-ID: <CACPZzQ1_Y-U2=YzUYKSoZ2NmMGj2hAQPthstcTYrW+ZL9yTvTw@mail.gmail.com>

Hello,

It seems you're not aware Geosjon is not KML, there is no mix between
styles and data, it's only data.
Read the specification http://www.geojson.org/geojson-spec.html

Regards

ThomasG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/78ac612e/attachment.html>

From chlup.ondra at gmail.com  Thu Mar 28 08:49:21 2013
From: chlup.ondra at gmail.com (Ondrej Chlup)
Date: Thu, 28 Mar 2013 16:49:21 +0100
Subject: [gdal-dev] Gdal_translate terminated - buffer overflow detected
Message-ID: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>

Hi,

I was using GDAL version 1.9.1 to get NTv2 grid from raster in PostGIS
using gdal_translate. I got the error: 0*** buffer overflow detected ***:
gdal_translate terminated
I was trying to use GDAL version 1.9.2 but with the same error. Is there
any way how to fix it?

Thanks,

Ondrej

Code:
gdal_translate -of NTv2 "PG:dbname='dataz' schema='public'
table='rast_ntv_b' column='rast_ntv' mode='2'" rast_ntv4.gsb
Input file size is 20, 20
0*** buffer overflow detected ***: gdal_translate terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0xb6b09045]
/lib/i386-linux-gnu/libc.so.6(+0x102e1a)[0xb6b07e1a]
/lib/i386-linux-gnu/libc.so.6(+0x10214d)[0xb6b0714d]
/usr/lib/libgdal.so.1(_ZN20PostGISRasterDataset9IRasterIOE10GDALRWFlagiiiiPvii12GDALDataTypeiPiiii+0x3a8)[0xb708eef8]
/usr/lib/libgdal.so.1(_ZN11GDALDataset8RasterIOE10GDALRWFlagiiiiPvii12GDALDataTypeiPiiii+0x5b1)[0xb715d581]
/usr/lib/libgdal.so.1(GDALDatasetCopyWholeRaster+0x4ef)[0xb7187b1f]
/usr/lib/libgdal.so.1(_ZN10GDALDriver17DefaultCreateCopyEPKcP11GDALDatasetiPPcPFidS1_PvES6_+0x67d)[0xb71622ed]
/usr/lib/libgdal.so.1(_ZN10GDALDriver10CreateCopyEPKcP11GDALDatasetiPPcPFidS1_PvES6_+0x173)[0xb7162683]
/usr/lib/libgdal.so.1(GDALCreateCopy+0x53)[0xb7162703]
gdal_translate[0x804ca0c]
gdal_translate[0x8049b41]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb6a1e4d3]
gdal_translate[0x8049b65]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/e8495007/attachment.html>

From waelinsat at gmail.com  Thu Mar 28 09:29:59 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 28 Mar 2013 17:29:59 +0100
Subject: [gdal-dev] Apply a style to geojson
Message-ID: <CAPBhV0fpi3a57qs2vBnMXL+EgDbRK17Fu4DSzfKrQkscdppYNA@mail.gmail.com>

Hi all;

Is it possible to apply a style to a geojson file ?

regards;

-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/9259d212/attachment.html>

From waelinsat at gmail.com  Thu Mar 28 09:31:19 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 28 Mar 2013 17:31:19 +0100
Subject: [gdal-dev] Apply a style to geojson file
Message-ID: <CAPBhV0fcSu89YDTw7iKh+2NVU8M6hheAH9VhZiWePJ92EBYVeQ@mail.gmail.com>

Hi All;
*
*
Please can i apply a style to a geojson file ? and how?


regards;
-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/b7ba1e83/attachment.html>

From osgeo.mailinglist at gmail.com  Thu Mar 28 09:33:46 2013
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 28 Mar 2013 17:33:46 +0100
Subject: [gdal-dev] Apply a style to geojson
In-Reply-To: <CAPBhV0fpi3a57qs2vBnMXL+EgDbRK17Fu4DSzfKrQkscdppYNA@mail.gmail.com>
References: <CAPBhV0fpi3a57qs2vBnMXL+EgDbRK17Fu4DSzfKrQkscdppYNA@mail.gmail.com>
Message-ID: <CACPZzQ0iQmsCDm2rpreCUnznL8v0nZ+LHJgUwyp51WJJhMENvA@mail.gmail.com>

Hello,

You'd better ask on http://gis.stackexchange.com/ because the list you're
using now is dedicated to GDAL developpers not for all purpose GIS
questions.

Regards

ThomasG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/0db42fff/attachment.html>

From warmerdam at pobox.com  Thu Mar 28 09:54:20 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 28 Mar 2013 09:54:20 -0700
Subject: [gdal-dev] Gdal_translate terminated - buffer overflow detected
In-Reply-To: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>
References: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>
Message-ID: <CA+YzLBeBc8_Y-By0e8kdu+aA4w1zOVtZ5Q_1tsKzce17CKZyJg@mail.gmail.com>

Ondrej,

I don't see any obviously related fixes since 1.9.1 in the history for
the NTv2 writer:

  http://trac.osgeo.org/gdal/log/trunk/gdal/frmts/raw/ntv2dataset.cpp

Perhaps you could translate the data to a GeoTIFF and then go from
that to NTv2.  Assuming the problem persists on the translation to
GeoTIFF that would give you something easy you could file a ticket on.

I suspect there is something odd about your data configuration that is
confusing the NTv2 driver which is pretty new and rarely used.

Best regards,
Frank

On Thu, Mar 28, 2013 at 8:49 AM, Ondrej Chlup <chlup.ondra at gmail.com> wrote:
> Hi,
>
> I was using GDAL version 1.9.1 to get NTv2 grid from raster in PostGIS using
> gdal_translate. I got the error: 0*** buffer overflow detected ***:
> gdal_translate terminated
> I was trying to use GDAL version 1.9.2 but with the same error. Is there any
> way how to fix it?
>
> Thanks,
>
> Ondrej
>
> Code:
> gdal_translate -of NTv2 "PG:dbname='dataz' schema='public'
> table='rast_ntv_b' column='rast_ntv' mode='2'" rast_ntv4.gsb
> Input file size is 20, 20
> 0*** buffer overflow detected ***: gdal_translate terminated
> ======= Backtrace: =========
> /lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0xb6b09045]
> /lib/i386-linux-gnu/libc.so.6(+0x102e1a)[0xb6b07e1a]
> /lib/i386-linux-gnu/libc.so.6(+0x10214d)[0xb6b0714d]
> /usr/lib/libgdal.so.1(_ZN20PostGISRasterDataset9IRasterIOE10GDALRWFlagiiiiPvii12GDALDataTypeiPiiii+0x3a8)[0xb708eef8]
> /usr/lib/libgdal.so.1(_ZN11GDALDataset8RasterIOE10GDALRWFlagiiiiPvii12GDALDataTypeiPiiii+0x5b1)[0xb715d581]
> /usr/lib/libgdal.so.1(GDALDatasetCopyWholeRaster+0x4ef)[0xb7187b1f]
> /usr/lib/libgdal.so.1(_ZN10GDALDriver17DefaultCreateCopyEPKcP11GDALDatasetiPPcPFidS1_PvES6_+0x67d)[0xb71622ed]
> /usr/lib/libgdal.so.1(_ZN10GDALDriver10CreateCopyEPKcP11GDALDatasetiPPcPFidS1_PvES6_+0x173)[0xb7162683]
> /usr/lib/libgdal.so.1(GDALCreateCopy+0x53)[0xb7162703]
> gdal_translate[0x804ca0c]
> gdal_translate[0x8049b41]
> /lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb6a1e4d3]
> gdal_translate[0x8049b65]
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From chaoyuejoy at gmail.com  Thu Mar 28 09:58:15 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Thu, 28 Mar 2013 17:58:15 +0100
Subject: [gdal-dev] more than one linearring object in the geometry but with
 all linerring objects having zero points?
Message-ID: <CAAN-aRGzASvgmHeS6pFRVOXtAV_u0G3Oo+sAeQ8WG=3dJ9yHCQ@mail.gmail.com>

Dear all,

I try to read fire polygon shapefile by ogr (beginner level), I referred to
some sources online:
http://geoinformaticstutorial.blogspot.fr/2012/10/accessing-vertices-from-polygon-with.html
http://gis.stackexchange.com/questions/8144/get-all-vertices-of-a-polygon-using-ogr-and-python

However, both the links are incomplete as I have polygons who have more
than one linearring objects, which
fianally turns out to have hole inside the polygon.

But I have another strange issue, is that there are some polygons with more
than one linearring object,
but all the rings have zero points. However, the fire size of the polygon
is not zero, and when I checked
the same polygon in ArcGIS, there is really a shape! could anyone point out
I miss something?
thanks!!

In [28]:

feature = layer.GetFeature(276)

geo = feature.GetGeometryRef()

geo.GetGeometryCount()

Out[28]:

2

In [29]:

ring = geo.GetGeometryRef(0)

ring.GetPointCount()

Out[29]:

0

In [31]:

ring = geo.GetGeometryRef(1)

ring.GetPointCount()

Out[31]:

0

In [34]:

feature.items()['SIZE_HA']

Out[34]:

13041.187


Chao
-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/41e86258/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Mar 28 10:04:35 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 28 Mar 2013 18:04:35 +0100
Subject: [gdal-dev] Gdal_translate terminated - buffer overflow detected
In-Reply-To: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>
References: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>
Message-ID: <1364490275.51547823a24d4@imp.free.fr>

Selon Ondrej Chlup <chlup.ondra at gmail.com>:

> Hi,
>
> I was using GDAL version 1.9.1 to get NTv2 grid from raster in PostGIS
> using gdal_translate. I got the error: 0*** buffer overflow detected ***:
> gdal_translate terminated
> I was trying to use GDAL version 1.9.2 but with the same error. Is there
> any way how to fix it?

You are probably running into a knwown problem of the PostgisRaster driver
http://trac.osgeo.org/gdal/ticket/4703 that has been fixed in the dev version
(GDAL 1.10dev)



From warmerdam at pobox.com  Thu Mar 28 11:06:48 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 28 Mar 2013 11:06:48 -0700
Subject: [gdal-dev] more than one linearring object in the geometry but
 with all linerring objects having zero points?
In-Reply-To: <CAAN-aRGzASvgmHeS6pFRVOXtAV_u0G3Oo+sAeQ8WG=3dJ9yHCQ@mail.gmail.com>
References: <CAAN-aRGzASvgmHeS6pFRVOXtAV_u0G3Oo+sAeQ8WG=3dJ9yHCQ@mail.gmail.com>
Message-ID: <CA+YzLBd2gjrySu3s3mr_74ywhtP5snABvWD9BDa=j6vDSft4aA@mail.gmail.com>

Chao,

I suspect you have a multipolygon.  So each subgeometry is a polygon
on which there are in turn subgeometries which are rings.

By the way, if you just print the geometry in python you should get
the "Well Known Text" representation which can be explanatory.

Best regards,
Frank



On Thu, Mar 28, 2013 at 9:58 AM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> Dear all,
>
> I try to read fire polygon shapefile by ogr (beginner level), I referred to
> some sources online:
> http://geoinformaticstutorial.blogspot.fr/2012/10/accessing-vertices-from-polygon-with.html
> http://gis.stackexchange.com/questions/8144/get-all-vertices-of-a-polygon-using-ogr-and-python
>
> However, both the links are incomplete as I have polygons who have more than
> one linearring objects, which
> fianally turns out to have hole inside the polygon.
>
> But I have another strange issue, is that there are some polygons with more
> than one linearring object,
> but all the rings have zero points. However, the fire size of the polygon is
> not zero, and when I checked
> the same polygon in ArcGIS, there is really a shape! could anyone point out
> I miss something?
> thanks!!
>
> In [28]:
>
> feature = layer.GetFeature(276)
>
> geo = feature.GetGeometryRef()
>
> geo.GetGeometryCount()
>
> Out[28]:
>
> 2
>
> In [29]:
>
> ring = geo.GetGeometryRef(0)
>
> ring.GetPointCount()
>
> Out[29]:
>
> 0
>
> In [31]:
>
> ring = geo.GetGeometryRef(1)
>
> ring.GetPointCount()
>
> Out[31]:
>
> 0
>
> In [34]:
>
> feature.items()['SIZE_HA']
>
> Out[34]:
>
> 13041.187
>
>
> Chao
> --
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> ************************************************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From chlup.ondra at gmail.com  Thu Mar 28 15:25:33 2013
From: chlup.ondra at gmail.com (Ondrej Chlup)
Date: Thu, 28 Mar 2013 23:25:33 +0100
Subject: [gdal-dev] Gdal_translate terminated - buffer overflow detected
In-Reply-To: <1364490275.51547823a24d4@imp.free.fr>
References: <CAG3QfFsptwWw-jo9tCtKKes04Kzsdk=_YMzqpfrzpP2QZampvA@mail.gmail.com>
	<1364490275.51547823a24d4@imp.free.fr>
Message-ID: <CAG3QfFvD=rMNnDwUarmRtjFcGEQHQpD2cszTS_duvH8eRq9ETQ@mail.gmail.com>

GDAL 1.10 works without errors. Thanks.

Ondrej


2013/3/28 Even Rouault <even.rouault at mines-paris.org>

> Selon Ondrej Chlup <chlup.ondra at gmail.com>:
>
> > Hi,
> >
> > I was using GDAL version 1.9.1 to get NTv2 grid from raster in PostGIS
> > using gdal_translate. I got the error: 0*** buffer overflow detected ***:
> > gdal_translate terminated
> > I was trying to use GDAL version 1.9.2 but with the same error. Is there
> > any way how to fix it?
>
> You are probably running into a knwown problem of the PostgisRaster driver
> http://trac.osgeo.org/gdal/ticket/4703 that has been fixed in the dev
> version
> (GDAL 1.10dev)
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130328/296ad20b/attachment.html>

From chaoyuejoy at gmail.com  Fri Mar 29 10:52:46 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Fri, 29 Mar 2013 18:52:46 +0100
Subject: [gdal-dev] more than one linearring object in the geometry but
 with all linerring objects having zero points?
In-Reply-To: <CA+YzLBd2gjrySu3s3mr_74ywhtP5snABvWD9BDa=j6vDSft4aA@mail.gmail.com>
References: <CAAN-aRGzASvgmHeS6pFRVOXtAV_u0G3Oo+sAeQ8WG=3dJ9yHCQ@mail.gmail.com>
	<CA+YzLBd2gjrySu3s3mr_74ywhtP5snABvWD9BDa=j6vDSft4aA@mail.gmail.com>
Message-ID: <CAAN-aREuomN0V5HY=qYHR9DO1mcAMKoWXUP_1_SJtQBRONxiHw@mail.gmail.com>

Hi Frank,

thanks for pointing out the MultiPolygon, Indeed you're right.

While when I print the geometry, I get all the underlying vertices data.

feature = layer.GetFeature(408)
georef = feature.GetGeometryRef()
georef.GetGeometryName()

'MULTIPOLYGON'

when I print georef, I get a big list of data which are the vertices I
guess.

thanks again,

Chao

On Thu, Mar 28, 2013 at 7:06 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Chao,
>
> I suspect you have a multipolygon.  So each subgeometry is a polygon
> on which there are in turn subgeometries which are rings.
>
> By the way, if you just print the geometry in python you should get
> the "Well Known Text" representation which can be explanatory.
>
> Best regards,
> Frank
>
>
>
> On Thu, Mar 28, 2013 at 9:58 AM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> > Dear all,
> >
> > I try to read fire polygon shapefile by ogr (beginner level), I referred
> to
> > some sources online:
> >
> http://geoinformaticstutorial.blogspot.fr/2012/10/accessing-vertices-from-polygon-with.html
> >
> http://gis.stackexchange.com/questions/8144/get-all-vertices-of-a-polygon-using-ogr-and-python
> >
> > However, both the links are incomplete as I have polygons who have more
> than
> > one linearring objects, which
> > fianally turns out to have hole inside the polygon.
> >
> > But I have another strange issue, is that there are some polygons with
> more
> > than one linearring object,
> > but all the rings have zero points. However, the fire size of the
> polygon is
> > not zero, and when I checked
> > the same polygon in ArcGIS, there is really a shape! could anyone point
> out
> > I miss something?
> > thanks!!
> >
> > In [28]:
> >
> > feature = layer.GetFeature(276)
> >
> > geo = feature.GetGeometryRef()
> >
> > geo.GetGeometryCount()
> >
> > Out[28]:
> >
> > 2
> >
> > In [29]:
> >
> > ring = geo.GetGeometryRef(0)
> >
> > ring.GetPointCount()
> >
> > Out[29]:
> >
> > 0
> >
> > In [31]:
> >
> > ring = geo.GetGeometryRef(1)
> >
> > ring.GetPointCount()
> >
> > Out[31]:
> >
> > 0
> >
> > In [34]:
> >
> > feature.items()['SIZE_HA']
> >
> > Out[34]:
> >
> > 13041.187
> >
> >
> > Chao
> > --
> >
> ***********************************************************************************
> > Chao YUE
> > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > UMR 1572 CEA-CNRS-UVSQ
> > Batiment 712 - Pe 119
> > 91191 GIF Sur YVETTE Cedex
> > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> >
> ************************************************************************************
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/0036b484/attachment.html>

From bfraser at geoanalytic.com  Fri Mar 29 12:28:34 2013
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri, 29 Mar 2013 13:28:34 -0600
Subject: [gdal-dev] Feature request: gauss and other interpolations in
 gdalwarp
In-Reply-To: <5154290F.2020402@uva.nl>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<5154290F.2020402@uva.nl>
Message-ID: <5155EB62.5090303@geoanalytic.com>

Jan,

   I can't speak the development request, but you may be able to do some 
sharpening using the <Kernel> object in a VRT.  I've used
<Coefs>-0.111 -0.111 -0.111 -0.111 2 -0.111 -0.111 -0.111 -0.111</Coefs>
to apply sharpening to satellite imagery.

     And a few years ago I found that using wavelet compression on 
scanned topographic maps when downsampling  made the text more readable 
(preserves edges more).  I used ECW back then, but I suspect JPEG2000 
may do it as well...

Best Regards,
Brent Fraser

On 3/28/2013 5:27 AM, Jan Hartmann wrote:
> Perhaps I should clarify a bit what I meant, I haven't had any 
> reactions until now, positive or negative, and it is important for me.
>
> I use Gdalwarp and gdaladdo extensively for goereferencing and tiling 
> large historical maps serieses (raster scans). To display them 
> efficiently, I need to create layers at different scale levels, e.g. 
> if the original maps have a pixel size of 10 meters, I need to 
> resample them to rasters with pixel sizes of 20, 40, 80 , 160, 320 and 
> 640 meters, and tile all those maps appropriately. So the original 
> maps have to be resampled quite drastically. In Gdalwarp there is no 
> adequeate resampling algorithm, and you end up with very grainy map at 
> those lower resolutions. Gdaladdo has several more algorithms, with 
> gauss in many cases the most efficient. However, even with the gauss 
> filter, maps resampled at very low resolutions turn out too hazy. For 
> an example see the 1930 map of the Netherlands:
>
> http://mapserver.sara.nl/topo/triang/
>
> If you zoom in to more detailed levels, you'll see the way the image 
> sharpens. For the effect on black-white image choose the TMK-map 
> (1850) with the top-center button. Filters like "unsharp mask" would 
> perform much better in these cases.
>
> So I would like to propose two enhancements to gdal:
>
> - add additional filters to gdalwarp, gauss and the filters mentioned 
> below.
> - implement more filters for gdalwarp and gdaladdo, e.g. "unsharp 
> mask", or the "mode" filter asked by Jack below. Perhaps even add the 
> possibility to specify parameters, like in ImageMagick
>
> I don't know how difficult is, and whether the gdal devs would find 
> this really an improvement for gdal. I could do this with some 
> ImageMagick or Gimp scripts, but it would be a kludge. As we are going 
> to georeference the complete cadastral and topographical map base of 
> the Netherlands from 1832 to 1994 the next few years (millions of 
> map-scans), this exentsion of gdal would come in very handy. And 
> funding it will really be no problem at all.
>
> I would appreciate any kind of comment on this, positive or negative.
>
> Regards,
>
> Jan
>
> Dr. J. Hartmann
> Department of Geography
> University of Amsterdam
>
> On 03/27/2013 10:13 PM, John Twilley wrote:
>> I'm interested in this feature request as well.  Adding the mode 
>> resampling algorithm to gdalwarp would be very beneficial to my 
>> projects, right up there with being able to access the warp API from 
>> Python.  Is this at all possible?  Should I submit a feature request 
>> on Trac, or what?  Just let me know!
>>
>> Jack.
>>
>> -- 
>> mathuin at gmail dot com
>>
>>
>> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl 
>> <mailto:j.l.h.hartmann at uva.nl>> wrote:
>>
>>
>>     Hi devs,
>>
>>     Would it be possible to add gauss and other interpolations to
>>     gdalwarp? At the moment I georeference large scans to 2000*2000
>>     tiles at the most detailed scale, and then create 2000*2000 tiles
>>     at resolutions of 2, 4 6 etc  times the original scale, using
>>     gdaladdo and gauss or other interpolations. It would help
>>     immensely if I could do that directly with gdalwarp.
>>
>>
>>     Funding would probably no problem. The question is: can and
>>     should it be done?
>>
>>     Jan
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/9d0ea94c/attachment.html>

From grub80 at gmail.com  Fri Mar 29 12:34:50 2013
From: grub80 at gmail.com (George)
Date: Fri, 29 Mar 2013 12:34:50 -0700
Subject: [gdal-dev] Problems using gdalwarp -cutline
Message-ID: <CALPxBA+hta53SqGTuOey-JSwx+o3EdVhy0mun_-KRkjYN2Ax5g@mail.gmail.com>

Hi there,

sorry for the newbie question, but I couldn't figure out my problem reading
documentation and examples on the web. Here is my problem:

- I have a Landsat raster image
- I have a ESRI sahpefile representing a fire perimeter
- I need to crop the raster using the fire perimeter

Following the gdalwarp page <http://www.gdal.org/gdalwarp.html>, I did this
from my terminal:
gdalwarp -cutline Santiago2007_reporj.shp  LT50400372008225PAC01_B1.TIF
CROPPED.TIF

But the result is a black raster, completely misplaced. I also tried to add
the -cl layername option but didn't do any better.

Please find the raster and shape files in my Dropbox public
folder<https://www.dropbox.com/sh/t1thka9wdl7ojf6/CxlYC_K-lG>
.

Thanks in advance for your help,
George
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/c229fdb4/attachment.html>

From mahdavi.parissa at gmail.com  Fri Mar 29 12:37:21 2013
From: mahdavi.parissa at gmail.com (Parissa Mahdavi)
Date: Sat, 30 Mar 2013 00:07:21 +0430
Subject: [gdal-dev] dear god!!
Message-ID: <CAFJndSvo6vGZQtHopvHvx2HL8KTRye=ti6VCzp5=QWEx6a90Pw@mail.gmail.com>

i want to unsubscribe, help me!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130330/9ad3b06d/attachment.html>

From even.rouault at mines-paris.org  Fri Mar 29 12:39:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 29 Mar 2013 20:39:21 +0100
Subject: [gdal-dev] Problems using gdalwarp -cutline
In-Reply-To: <CALPxBA+hta53SqGTuOey-JSwx+o3EdVhy0mun_-KRkjYN2Ax5g@mail.gmail.com>
References: <CALPxBA+hta53SqGTuOey-JSwx+o3EdVhy0mun_-KRkjYN2Ax5g@mail.gmail.com>
Message-ID: <201303292039.21358.even.rouault@mines-paris.org>

Le vendredi 29 mars 2013 20:34:50, George a ?crit :
> Hi there,
> 
> sorry for the newbie question, but I couldn't figure out my problem reading
> documentation and examples on the web. Here is my problem:
> 
> - I have a Landsat raster image
> - I have a ESRI sahpefile representing a fire perimeter
> - I need to crop the raster using the fire perimeter
> 
> Following the gdalwarp page <http://www.gdal.org/gdalwarp.html>, I did this
> from my terminal:
> gdalwarp -cutline Santiago2007_reporj.shp  LT50400372008225PAC01_B1.TIF
> CROPPED.TIF

Make sure that the projection of the shapefile and the TIF is the same (and 
remove the CROPPED.TIF between 2 attempts)

> 
> But the result is a black raster, completely misplaced. I also tried to add
> the -cl layername option but didn't do any better.
> 
> Please find the raster and shape files in my Dropbox public
> folder<https://www.dropbox.com/sh/t1thka9wdl7ojf6/CxlYC_K-lG>
> .
> 
> Thanks in advance for your help,
> George

From chaoyuejoy at gmail.com  Fri Mar 29 13:02:38 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Fri, 29 Mar 2013 21:02:38 +0100
Subject: [gdal-dev] dear god!!
In-Reply-To: <CAFJndSvo6vGZQtHopvHvx2HL8KTRye=ti6VCzp5=QWEx6a90Pw@mail.gmail.com>
References: <CAFJndSvo6vGZQtHopvHvx2HL8KTRye=ti6VCzp5=QWEx6a90Pw@mail.gmail.com>
Message-ID: <CAAN-aRG6+xdqNQx+ryO7SAJit5b6WQjCGy2UzBtrNx7v24iJ5A@mail.gmail.com>

I saw you're using gmail, when you mark the mails from this list as spam,
gmail should be able to unsubscribe for you, did you try this?

Chao


On Fri, Mar 29, 2013 at 8:37 PM, Parissa Mahdavi
<mahdavi.parissa at gmail.com>wrote:

> i want to unsubscribe, help me!
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/0fdb9de6/attachment.html>

From andy.canfield at gmail.com  Fri Mar 29 13:38:13 2013
From: andy.canfield at gmail.com (Andy Canfield)
Date: Fri, 29 Mar 2013 14:38:13 -0600
Subject: [gdal-dev] OGRDataSource::CreateLayer error on application exit
Message-ID: <CAH9DkXzG4FKiHpyZLCu+J-4s5-28==VapiMUx6K_jeS=VS6SiA@mail.gmail.com>

If I create a shapefile layer like so:
const char *pszShpDriverName = "ESRI Shapefile";
OGRSFDriver *poShpDriver;
poShpDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
poShpLayer = poShpDS->CreateLayer( "poly_out", NULL, wkbPolygon, NULL );


and close it like so:
OGRDataSource::DestroyDataSource(poShpDS);


I have no problems, but if I specify a projection for it from an open
GeoTiff I have
as the data set "poDataset" like so:

OGRSpatialReference *poSrcSRS = new
OGRSpatialReference(poDataset->GetProjectionRef());


const char *pszShpDriverName = "ESRI Shapefile";
OGRSFDriver *poShpDriver;
poShpDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
poShpLayer = poShpDS->CreateLayer( "poly_out", poSrcSRS, wkbPolygon, NULL );

I get this error when I go to shut my application down after using the
above code be it in a dll or in a console app.

The error I get is:
First-chance exception at 0x7c90e4ff in TestApp.exe: 0xC0000008: An invalid
handle was specified

that jumps my debugger to crt0dat.c to this method:

void __cdecl __crtExitProcess (
        int status
        )
{
        __crtCorExitProcess(status);

        /*
         * Either mscoree.dll isn't loaded,
         * or CorExitProcess isn't exported from mscoree.dll,
         * or CorExitProcess returned (should never happen).
         * Just call ExitProcess.
         */

        ExitProcess(status);
}


This only happens when I create the file using a projection and it doesn't
seem to matter if I build the projection myself or get it from the GeoTiff.
It seems to be the creation of the .prj file that is the problem.

I could always just create my own prj file in the same directory and spit
out the WKT to it but I would rather not if I don't have to.

Anyone know a fix for this?

Thank You,
Andy Canfield
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/3e268de9/attachment-0001.html>

From even.rouault at mines-paris.org  Fri Mar 29 14:00:33 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 29 Mar 2013 22:00:33 +0100
Subject: [gdal-dev] OGRDataSource::CreateLayer error on application exit
In-Reply-To: <CAH9DkXzG4FKiHpyZLCu+J-4s5-28==VapiMUx6K_jeS=VS6SiA@mail.gmail.com>
References: <CAH9DkXzG4FKiHpyZLCu+J-4s5-28==VapiMUx6K_jeS=VS6SiA@mail.gmail.com>
Message-ID: <201303292200.33340.even.rouault@mines-paris.org>

Le vendredi 29 mars 2013 21:38:13, Andy Canfield a ?crit :
> If I create a shapefile layer like so:
> const char *pszShpDriverName = "ESRI Shapefile";
> OGRSFDriver *poShpDriver;
> poShpDriver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
> poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
> poShpLayer = poShpDS->CreateLayer( "poly_out", NULL, wkbPolygon, NULL );
> 
> 
> and close it like so:
> OGRDataSource::DestroyDataSource(poShpDS);
> 
> 
> I have no problems, but if I specify a projection for it from an open
> GeoTiff I have
> as the data set "poDataset" like so:
> 
> OGRSpatialReference *poSrcSRS = new
> OGRSpatialReference(poDataset->GetProjectionRef());
> 
> 
> const char *pszShpDriverName = "ESRI Shapefile";
> OGRSFDriver *poShpDriver;
> poShpDriver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
> poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
> poShpLayer = poShpDS->CreateLayer( "poly_out", poSrcSRS, wkbPolygon, NULL
> );
> 
> I get this error when I go to shut my application down after using the
> above code be it in a dll or in a console app.

This is just a guess, but it might be related how you delete poSrcSRS. As 
you've allocated it with "new", you should delete it with "delete" (and not 
OGRSpatialReference::DestroySpatialReference() )

From andy.canfield at gmail.com  Fri Mar 29 14:12:48 2013
From: andy.canfield at gmail.com (Andy Canfield)
Date: Fri, 29 Mar 2013 15:12:48 -0600
Subject: [gdal-dev] OGRDataSource::CreateLayer error on application exit
In-Reply-To: <201303292200.33340.even.rouault@mines-paris.org>
References: <CAH9DkXzG4FKiHpyZLCu+J-4s5-28==VapiMUx6K_jeS=VS6SiA@mail.gmail.com>
	<201303292200.33340.even.rouault@mines-paris.org>
Message-ID: <CAH9DkXx46etLEoHrm9+vEunKAiiJ0cJqjUTiATODsLVjADwyug@mail.gmail.com>

On Fri, Mar 29, 2013 at 3:00 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le vendredi 29 mars 2013 21:38:13, Andy Canfield a ?crit :
> > If I create a shapefile layer like so:
> > const char *pszShpDriverName = "ESRI Shapefile";
> > OGRSFDriver *poShpDriver;
> > poShpDriver =
> > OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
> > poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
> > poShpLayer = poShpDS->CreateLayer( "poly_out", NULL, wkbPolygon, NULL );
> >
> >
> > and close it like so:
> > OGRDataSource::DestroyDataSource(poShpDS);
> >
> >
> > I have no problems, but if I specify a projection for it from an open
> > GeoTiff I have
> > as the data set "poDataset" like so:
> >
> > OGRSpatialReference *poSrcSRS = new
> > OGRSpatialReference(poDataset->GetProjectionRef());
> >
> >
> > const char *pszShpDriverName = "ESRI Shapefile";
> > OGRSFDriver *poShpDriver;
> > poShpDriver =
> > OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszShpDriverName);
> > poShpDS = poShpDriver->CreateDataSource(pszDstFilename, NULL);
> > poShpLayer = poShpDS->CreateLayer( "poly_out", poSrcSRS, wkbPolygon, NULL
> > );
> >
> > I get this error when I go to shut my application down after using the
> > above code be it in a dll or in a console app.
>
> This is just a guess, but it might be related how you delete poSrcSRS. As
> you've allocated it with "new", you should delete it with "delete" (and not
> OGRSpatialReference::DestroySpatialReference() )
>

Calling delete or OGRSpatialReference::DestroySpatialReference() on
poSrcSRS both
throw an error even if I never use it, but it is a different error than the
one I am seeing currently on app shutdown.

-Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130329/e0265e9e/attachment.html>

From gdal at stripfamily.net  Fri Mar 29 14:28:23 2013
From: gdal at stripfamily.net (David Strip)
Date: Fri, 29 Mar 2013 15:28:23 -0600
Subject: [gdal-dev] dear god!!
In-Reply-To: <CAAN-aRG6+xdqNQx+ryO7SAJit5b6WQjCGy2UzBtrNx7v24iJ5A@mail.gmail.com>
References: <CAFJndSvo6vGZQtHopvHvx2HL8KTRye=ti6VCzp5=QWEx6a90Pw@mail.gmail.com>
	<CAAN-aRG6+xdqNQx+ryO7SAJit5b6WQjCGy2UzBtrNx7v24iJ5A@mail.gmail.com>
Message-ID: <51560777.7080506@stripfamily.net>

the bottom of the message you sent (just like every message) has a link 
to the mailing list manager - 
http://lists.osgeo.org/mailman/listinfo/gdal-dev
Follow that link and you'll find unsubscribe instructions at the bottom.


From chaoyuejoy at gmail.com  Sat Mar 30 04:22:25 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sat, 30 Mar 2013 12:22:25 +0100
Subject: [gdal-dev] copy (duplicate) feature with python ogr?
Message-ID: <CAAN-aRH6iCWtE-Gvt+Re75jj8v1zZgKBrCUwx6Bazwm2NLRByg@mail.gmail.com>

Dear all,

I am trying to create a new polygon shapefile and copy features from
existing shapefile into it and I have some problems doing this.
the script is below:

num_feature_multipolygon is a dictionary of (fdi,feature) pairs (see at the
end of mail)

dsnew = driver.CreateDataSource('Multi_polygon.shp')
layernew = dsnew.CreateLayer('multi_polygon',geom_type=ogr.wkbMultiPolygon)
for fid, feature_temp in num_feature_multipolygon.items():
    feature_new = feature_temp.Clone()
    layernew.CreateFeature(feature_new)
    #feature_new.Destroy()
ds.Destroy()


I tested the resulting feature from feature.Clone() has the same attribute
values and geometry with the original one.
I guess somewhere I am wrong in the script?

Two other posts online point to similar issue but not very helpful:
http://lists.osgeo.org/pipermail/gdal-dev/2008-July/017635.html
http://gis.stackexchange.com/questions/56703/better-way-to-duplicate-a-layer-using-ogr-in-python

could anyone explain a bit?  thanks a lot in advance!!

Chao


In [11]:

num_feature_multipolygon

Out[11]:

{276: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 303: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 314: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 315: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 324: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 326: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 327: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 387: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 408: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 409: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 411: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >,
 442: <osgeo.ogr.Feature;

copy (duplicate) feature with python ogr?
[image: Minimize][image: Pop-out][image: Close]

gdal-dev at lists.osgeo.org



 proxy of <Swig Object of type 'OGRFeatureShadow *' at 0x3f2ce70> >,
 443: <osgeo.ogr.Feature; proxy of <Swig Object of type
'OGRFeatureShadow *' at 0x3f2ce70> >}


-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130330/6b9d270d/attachment.html>

From even.rouault at mines-paris.org  Sat Mar 30 04:41:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 30 Mar 2013 12:41:28 +0100
Subject: [gdal-dev] copy (duplicate) feature with python ogr?
In-Reply-To: <CAAN-aRH6iCWtE-Gvt+Re75jj8v1zZgKBrCUwx6Bazwm2NLRByg@mail.gmail.com>
References: <CAAN-aRH6iCWtE-Gvt+Re75jj8v1zZgKBrCUwx6Bazwm2NLRByg@mail.gmail.com>
Message-ID: <201303301241.28556.even.rouault@mines-paris.org>

Le samedi 30 mars 2013 12:22:25, Chao YUE a ?crit :
> Dear all,
> 
> I am trying to create a new polygon shapefile and copy features from
> existing shapefile into it and I have some problems doing this.
> the script is below:
> 
> num_feature_multipolygon is a dictionary of (fdi,feature) pairs (see at the
> end of mail)
> 
> dsnew = driver.CreateDataSource('Multi_polygon.shp')
> layernew = dsnew.CreateLayer('multi_polygon',geom_type=ogr.wkbMultiPolygon)

--> You need to setup the layernew field definition here, i.e. use 
layernew.CreateField()

> for fid, feature_temp in num_feature_multipolygon.items():
>     feature_new = feature_temp.Clone()

--> you need to create a new feature from the layernew field definition and copy 
the feature_temp into it with feature_new.SetFrom(feature_temp)

>     layernew.CreateFeature(feature_new)
>     #feature_new.Destroy()
> ds.Destroy()
> 
> 
> I tested the resulting feature from feature.Clone() has the same attribute
> values and geometry with the original one.
> I guess somewhere I am wrong in the script?

You can find something very close to what you are looking for in 
http://svn.osgeo.org/gdal/trunk/autotest/ogr/ogr_shape.py in the ogr_shape_2() 
test.

From chaoyuejoy at gmail.com  Sat Mar 30 07:01:15 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sat, 30 Mar 2013 15:01:15 +0100
Subject: [gdal-dev] copy (duplicate) feature with python ogr?
In-Reply-To: <201303301241.28556.even.rouault@mines-paris.org>
References: <CAAN-aRH6iCWtE-Gvt+Re75jj8v1zZgKBrCUwx6Bazwm2NLRByg@mail.gmail.com>
	<201303301241.28556.even.rouault@mines-paris.org>
Message-ID: <CAAN-aRErgHMTM477ekABYsOwg4+9jiFA-0O8tf8A3xc8e_T80w@mail.gmail.com>

Hi Even,

this solves my probelm, the example in the script is quite useful. Thanks.

chao


On Sat, Mar 30, 2013 at 12:41 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le samedi 30 mars 2013 12:22:25, Chao YUE a ?crit :
> > Dear all,
> >
> > I am trying to create a new polygon shapefile and copy features from
> > existing shapefile into it and I have some problems doing this.
> > the script is below:
> >
> > num_feature_multipolygon is a dictionary of (fdi,feature) pairs (see at
> the
> > end of mail)
> >
> > dsnew = driver.CreateDataSource('Multi_polygon.shp')
> > layernew =
> dsnew.CreateLayer('multi_polygon',geom_type=ogr.wkbMultiPolygon)
>
> --> You need to setup the layernew field definition here, i.e. use
> layernew.CreateField()
>
> > for fid, feature_temp in num_feature_multipolygon.items():
> >     feature_new = feature_temp.Clone()
>
> --> you need to create a new feature from the layernew field definition
> and copy
> the feature_temp into it with feature_new.SetFrom(feature_temp)
>
> >     layernew.CreateFeature(feature_new)
> >     #feature_new.Destroy()
> > ds.Destroy()
> >
> >
> > I tested the resulting feature from feature.Clone() has the same
> attribute
> > values and geometry with the original one.
> > I guess somewhere I am wrong in the script?
>
> You can find something very close to what you are looking for in
> http://svn.osgeo.org/gdal/trunk/autotest/ogr/ogr_shape.py in the
> ogr_shape_2()
> test.
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130330/ea85a840/attachment-0001.html>

From jaak at nutiteq.com  Sun Mar 31 08:12:26 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Sun, 31 Mar 2013 18:12:26 +0300
Subject: [gdal-dev] Get a list of supported file formats
In-Reply-To: <201303162332.47056.even.rouault@mines-paris.org>
References: <CAML4TunJG5QcMRrn2Lyztf3gnNHwFoP4qwcNtSQkT0-1PZkGyA@mail.gmail.com>
	<201303162332.47056.even.rouault@mines-paris.org>
Message-ID: <CAFqye3KqWDNB6bdXEy44SKfWRPBMw26GaSQKVvQccYBxfvE2Kw@mail.gmail.com>

Hello,
 There is no similar simple way to get list of OGR datasource extensions,
as there is no "driver metadata" for OGR, correct ?

 I found out that some GDAL datasources do not report their extensions,
e.g. BSB, also some datasources may have alternative extensions, from where
datasource reports only one (there is "tif", but no "geotiff" or "tiff")

Jaak

2013/3/17 Even Rouault <even.rouault at mines-paris.org>

> Le samedi 16 mars 2013 16:14:30, Diego Gnesi Bartolani a ?crit :
> > Hi,
> >
> > I'm writing a python plugin for QGIS. I need to implement a "Save As"
> > dialog and the user should choose among all GDAL's supported file
> formats.
> > Is there a method inside the GDAL API to iterate over all the supported
> > raster (and only raster) file formats and get the file extension and the
> > format definition, i.e. the tuple ("*.TIF, *.tif", "GeoTIFF")?
>
> Look at http://svn.osgeo.org/gdal/trunk/gdal/gcore/gdal_misc.cpp, lines
> 2344
> to 2453
>
> >
> > Thanks!
> >
> > Diego
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Jaak Laineste
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130331/74730e09/attachment.html>

From even.rouault at mines-paris.org  Sun Mar 31 08:14:49 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 31 Mar 2013 17:14:49 +0200
Subject: [gdal-dev] Get a list of supported file formats
In-Reply-To: <CAFqye3KqWDNB6bdXEy44SKfWRPBMw26GaSQKVvQccYBxfvE2Kw@mail.gmail.com>
References: <CAML4TunJG5QcMRrn2Lyztf3gnNHwFoP4qwcNtSQkT0-1PZkGyA@mail.gmail.com>
	<201303162332.47056.even.rouault@mines-paris.org>
	<CAFqye3KqWDNB6bdXEy44SKfWRPBMw26GaSQKVvQccYBxfvE2Kw@mail.gmail.com>
Message-ID: <201303311714.49472.even.rouault@mines-paris.org>

Le dimanche 31 mars 2013 17:12:26, Jaak Laineste (Nutiteq) a ?crit :
> Hello,
>  There is no similar simple way to get list of OGR datasource extensions,
> as there is no "driver metadata" for OGR, correct ?

Correct

> 
>  I found out that some GDAL datasources do not report their extensions,
> e.g. BSB, also some datasources may have alternative extensions, from where
> datasource reports only one (there is "tif", but no "geotiff" or "tiff")

This has been discussed in the email thread archived at :

http://lists.osgeo.org/pipermail/gdal-dev/2013-February/thread.html#35509

