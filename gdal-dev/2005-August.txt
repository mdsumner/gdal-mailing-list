From neteler at itc.it  Mon Aug  1 13:19:05 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:41 2007
Subject: [Gdal-dev] OGR and support for older PostGIS DBs?
Message-ID: <20050801171905.GC4461@thuille.itc.it>

Hi,

I was trying the current OGR (today) against an older
PostGIS database (based on libpostgis.so.0.7 and PostgreSQL V7.3.3):


grinfo -summary PG:'host=myserver user=postgres dbname=spearfish' streams_pg
OGR_PG: DBName="spearfish"
OGR_PG: POSTGIS_VERSION=0.7
OGR_PG: Layer 'streams_geom' geometry type: GEOMETRY:Unknown (any), Dim=2
OGR_PG: Layer 'streams_length_geom' geometry type: GEOMETRY:Unknown (any), Dim=2
OGR_PG: Layer 'areecampione2' geometry type: POLYGON:Polygon, Dim=2
OGR_PG: Layer 'archistes' geometry type: POINT:Point, Dim=2
OGR_PG: Layer 'streams_pg' geometry type: LINESTRING:Line String, Dim=2
OGR_PG: Layer 'mystreams_pg' geometry type: LINESTRING:Line String, Dim=2
OGR: OGROpen(PG:host=myserver user=postgres dbname=spearfish) succeeded (0x837a3f8).
INFO: Open of `PG:host=myserver user=postgres dbname=spearfish'
using driver `PostgreSQL' successful.

Layer name: streams_pg
Geometry: Line String
OGR_PG: PQexec(DECLARE countCursor CURSOR for SELECT count(*) FROM "streams_pg" )

Feature Count: 116
OGR_PG: PQexec(SELECT Extent("wkb_geometry") FROM "streams_pg")
ERROR 5: Bad extent representation: 'BOX3D(589443.06 4913935.46 0,609526.75 4928059.15 0)'
Layer SRS WKT:
PROJCS["UTM Zone 13, Northern Hemisphere",
    GEOGCS["clark66",
        DATUM["North_American_Datum_1927",
            SPHEROID["clark66",6378206.4,294.9786982]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["meter",1]]
cat: Integer (0.0)
label: String (0.0)


-> Bad extent representation: 'BOX3D.."
-> Integer (0.0)
-> String (0.0)

I am not sure what's wrong... AFAIK I didn't touch the PG DB for a long
while. Is backward compatibility supported? Otherwise I'll have to upgrade
my PG database.

This patch cured at least the BOX3D problem:
--- ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      20 Jul 2005 01:45:30 -0000      1.29
+++ ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      1 Aug 2005 17:18:19 -0000
@@ -1282,7 +1282,7 @@
                szVals[strstr(ptr,")") - ptr] = '\0';

                char ** papszTokens = CSLTokenizeString2(szVals," ,",CSLT_HONOURSTRINGS);
-               if ( CSLCount(papszTokens) != 4 )
+               if ( CSLCount(papszTokens) != 6 )
                {
                        CPLError(CE_Failure, CPLE_IllegalArg, "Bad extent representation: '%s'", pszBox);
                        CSLDestroy(papszTokens);


Help is appreciated,

 Markus

From armin.burger at gmx.net  Tue Aug  2 15:04:59 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ogr2ogr and field matching
In-Reply-To: <20050801171905.GC4461@thuille.itc.it>
References: <20050801171905.GC4461@thuille.itc.it>
Message-ID: <42EFC3DB.10706@gmx.net>

Hello everybody,

I tried to use ogr2ogr for loading data from shapefiles into PostGIS 
because it gives more flexibility than the shp2pgsql utilitiy.  I tried 
to combine data from different sources that can have differences in the 
field names of the shapefiles. ogr2ogr offers the possibility to specify 
the SQL command for loading. So I tried

"ogr2ogr -sql "SELECT ARRGCDL0 AS iso
FROM countries WHERE ARCNTY_ID>100"  -a_srs "EPSG:4326" -append
 -f PostgreSQL PG:'host=localhost user=postgres dbname=testdb'   
countries.shp"

But I get the error
ERROR 1: SQL: Missing comma after column ARRGCDL0 in SELECT statement.

So there seems to be no possibility to map an existing column in the 
shapefile to an existing in the PG table using the 'AS' statement. When 
the two column names differ, the data from the shapefile field are just 
not loaded into the PG table. Are there any workarounds for that?

Thanks in advance for any help

Armin

From fwarmerdam at gmail.com  Tue Aug  2 15:27:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Question about writing ECWs
In-Reply-To: <Pine.LNX.4.61.0508021440420.30194@primary-server.dramail>
References: <Pine.LNX.4.61.0508021440420.30194@primary-server.dramail>
Message-ID: <931f8ea905080212277b229385@mail.gmail.com>

On 8/2/05, Ken Sewell <sewell@dramail.com> wrote:
> 
> I have GDAL 1.2.6 built with the Linux ECW SDK 3.1.25jan05.  Reading ECWs
> works, but writing them does not.  I can't find anything saying that linux
> can't write them, but is this the case?
> This is what I get:
> 
> gdal_translate -of ECW test.tif test.ecw
> Input file size is 5571, 4677
> 0.100 - done.
> ERROR 4: 'test.ecw' not recognised as a supported file format.

Ken,

I see you emailed through the old gdal-dev@xserve.flids.com.  Please
use the new address gdal-dev@lists.maptools.org.

I am a bit surprised at the way it fails.  I would suggestion:

 o There is some sort of "temp dir" environment variable used by
    the ECW SDK for write caching.  Perhaps TMP or TMPDIR or
   TEMP or something like that.  Try setting these names to point to
   /tmp.   In later versions I have taken to hacking in /tmp as the
   default.  

 o Try upgrading to a more recent version of gdal (ie. CVS snapshot)

 o Try upgrading to more recent ECW SDK source (ie 3.2beta1). 

 o Try applying some of the patches mentioned in the ECW SDK 
    forum. 

I retain high hopes that a 3.2beta2 SDK will be released soon that
resolves most of the problem. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Aug  2 15:41:51 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ogr2ogr and field matching
In-Reply-To: <42EFC3DB.10706@gmx.net>
References: <20050801171905.GC4461@thuille.itc.it> <42EFC3DB.10706@gmx.net>
Message-ID: <931f8ea905080212417850093c@mail.gmail.com>

On 8/2/05, Armin Burger <armin.burger@gmx.net> wrote:
> Hello everybody,
> 
> I tried to use ogr2ogr for loading data from shapefiles into PostGIS
> because it gives more flexibility than the shp2pgsql utilitiy.  I tried
> to combine data from different sources that can have differences in the
> field names of the shapefiles. ogr2ogr offers the possibility to specify
> the SQL command for loading. So I tried
> 
> "ogr2ogr -sql "SELECT ARRGCDL0 AS iso
> FROM countries WHERE ARCNTY_ID>100"  -a_srs "EPSG:4326" -append
>  -f PostgreSQL PG:'host=localhost user=postgres dbname=testdb'
> countries.shp"
> 
> But I get the error
> ERROR 1: SQL: Missing comma after column ARRGCDL0 in SELECT statement.
> 
> So there seems to be no possibility to map an existing column in the
> shapefile to an existing in the PG table using the 'AS' statement. When
> the two column names differ, the data from the shapefile field are just
> not loaded into the PG table. Are there any workarounds for that?

Armin, 

You are correct that OGR SQL does not support the "AS" keyword 
to rename a field.  I don't know of a direct way of accomplishing
what you want, but it could be done with a Python script of course.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From FClaudel at csir.co.za  Wed Aug  3 02:21:46 2005
From: FClaudel at csir.co.za (Frederic Claudel)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Question about writing ECWs
Message-ID: <s2f07eaf.015@cs-emo.csir.co.za>


Ken (&Frank)
just in case it is that previous problem about file size (which I doubt because the file seems small)
if your uncompressed image is larger than 500Mb, then you must specifically enable ECW compression for large files (and agree with the ERMapper licensing scheme for that case)

eg:
gdal_translate -of ECW -co TARGET=90 --config ECW_LARGE_OK YES PS_L7_mosaic_ERDAS.img PS_L7_mosaic_ECW.ecw

hope it helps,
Frederic

>>> fwarmerdam@gmail.com 02/08/2005 21:27 >>>
On 8/2/05, Ken Sewell <sewell@dramail.com> wrote:
> 
> I have GDAL 1.2.6 built with the Linux ECW SDK 3.1.25jan05.  Reading ECWs
> works, but writing them does not.  I can't find anything saying that linux
> can't write them, but is this the case?
> This is what I get:
> 
> gdal_translate -of ECW test.tif test.ecw
> Input file size is 5571, 4677
> 0.100 - done.
> ERROR 4: 'test.ecw' not recognised as a supported file format.

Ken,

I see you emailed through the old gdal-dev@xserve.flids.com.  Please
use the new address gdal-dev@lists.maptools.org.

I am a bit surprised at the way it fails.  I would suggestion:

 o There is some sort of "temp dir" environment variable used by
    the ECW SDK for write caching.  Perhaps TMP or TMPDIR or
   TEMP or something like that.  Try setting these names to point to
   /tmp.   In later versions I have taken to hacking in /tmp as the
   default.  

 o Try upgrading to a more recent version of gdal (ie. CVS snapshot)

 o Try upgrading to more recent ECW SDK source (ie 3.2beta1). 

 o Try applying some of the patches mentioned in the ECW SDK 
    forum. 

I retain high hopes that a 3.2beta2 SDK will be released soon that
resolves most of the problem. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From fwarmerdam at gmail.com  Wed Aug  3 09:22:26 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR and support for older PostGIS DBs?
In-Reply-To: <20050801171905.GC4461@thuille.itc.it>
References: <20050801171905.GC4461@thuille.itc.it>
Message-ID: <931f8ea90508030622279ff2f@mail.gmail.com>

On 8/1/05, Markus Neteler <neteler@itc.it> wrote:
> Hi,
> 
> I was trying the current OGR (today) against an older
> PostGIS database (based on libpostgis.so.0.7 and PostgreSQL V7.3.3):
....
> I am not sure what's wrong... AFAIK I didn't touch the PG DB for a long
> while. Is backward compatibility supported? Otherwise I'll have to upgrade
> my PG database.
> 
> This patch cured at least the BOX3D problem:
> --- ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      20 Jul 2005 01:45:30 -0000      1.29
> +++ ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      1 Aug 2005 17:18:19 -0000
> @@ -1282,7 +1282,7 @@
>                 szVals[strstr(ptr,")") - ptr] = '\0';
> 
>                 char ** papszTokens = CSLTokenizeString2(szVals," ,",CSLT_HONOURSTRINGS);
> -               if ( CSLCount(papszTokens) != 4 )
> +               if ( CSLCount(papszTokens) != 6 )
>                 {
>                         CPLError(CE_Failure, CPLE_IllegalArg, "Bad extent representation: '%s'", pszBox);
>                         CSLDestroy(papszTokens);
> 
> 
> Help is appreciated,

Markus,

Sorry about this.  I asked Andrey and Oleg to look into this yesterday,
but I believe Andrey is travelling today.  I am commiting the following
patch which I think should support the BOX3D if it is returned by 
the Extent() operator.   I am not sure if this is a postgis version issue or
not, but it is my intention to continue supporting earlier versions of
PostGIS for a year or two at least. 

diff -u -b -r1.29 ogrpgtablelayer.cpp
--- ogrpgtablelayer.cpp 20 Jul 2005 01:45:30 -0000      1.29
+++ ogrpgtablelayer.cpp 3 Aug 2005 13:18:49 -0000
@@ -1282,9 +1282,11 @@
                szVals[strstr(ptr,")") - ptr] = '\0';
 
                char ** papszTokens = CSLTokenizeString2(szVals," ,",CSLT_HONOUR
STRINGS);
-               if ( CSLCount(papszTokens) != 4 )
+        if ( CSLCount(papszTokens) != 4 
+             && CSLCount(papszTokens) != 6 )
                {
-                       CPLError(CE_Failure, CPLE_IllegalArg, "Bad extent repres
entation: '%s'", pszBox);
+            CPLError(CE_Failure, CPLE_IllegalArg, 
+                     "Bad extent representation: '%s'", pszBox);
                        CSLDestroy(papszTokens);
                        PQclear(hResult);
                        return OGRERR_FAILURE;
@@ -1292,8 +1294,21 @@
 
                psExtent->MinX = CPLScanDouble(papszTokens[0],strlen(papszTokens
[0]),"C");
                psExtent->MinY = CPLScanDouble(papszTokens[1],strlen(papszTokens
[1]),"C");
-               psExtent->MaxX = CPLScanDouble(papszTokens[2],strlen(papszTokens
[2]),"C");
-               psExtent->MaxY = CPLScanDouble(papszTokens[3],strlen(papszTokens
[3]),"C");
+
+        if( CSLCount( papszTokens ) == 4 ) // BOX2D
+        {
+            psExtent->MaxX = CPLScanDouble(papszTokens[2],
+                                           strlen(papszTokens[2]),"C");
+            psExtent->MaxY = CPLScanDouble(papszTokens[3],
+                                           strlen(papszTokens[3]),"C");
+        }
+        else // BOX3D
+        {
+            psExtent->MaxX = CPLScanDouble(papszTokens[3],
+                                           strlen(papszTokens[4]),"C");
+            psExtent->MaxY = CPLScanDouble(papszTokens[4],
+                                           strlen(papszTokens[5]),"C");
+        }
 
                CSLDestroy(papszTokens);

Note my change differs from yours in that it correctly extract
the extents in the case of a BOX3D and in that it continues
to support the 2D version of the box. 

Andrey / Oleg, perhaps you guys could verify the changed 
code makes sense in all circumstances. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Wed Aug  3 13:06:35 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR and support for older PostGIS DBs?
In-Reply-To: <931f8ea90508030622279ff2f@mail.gmail.com>
References: <20050801171905.GC4461@thuille.itc.it>
	<931f8ea90508030622279ff2f@mail.gmail.com>
Message-ID: <20050803170635.GB1147@thuille.itc.it>

On Wed, Aug 03, 2005 at 09:22:26AM -0400, Frank Warmerdam wrote:
> On 8/1/05, Markus Neteler <neteler@itc.it> wrote:
> > Hi,
> > 
> > I was trying the current OGR (today) against an older
> > PostGIS database (based on libpostgis.so.0.7 and PostgreSQL V7.3.3):
> ....
> > I am not sure what's wrong... AFAIK I didn't touch the PG DB for a long
> > while. Is backward compatibility supported? Otherwise I'll have to upgrade
> > my PG database.
> > 
> > This patch cured at least the BOX3D problem:
> > --- ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      20 Jul 2005 01:45:30 -0000      1.29
> > +++ ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp      1 Aug 2005 17:18:19 -0000
> > @@ -1282,7 +1282,7 @@
> >                 szVals[strstr(ptr,")") - ptr] = '\0';
> > 
> >                 char ** papszTokens = CSLTokenizeString2(szVals," ,",CSLT_HONOURSTRINGS);
> > -               if ( CSLCount(papszTokens) != 4 )
> > +               if ( CSLCount(papszTokens) != 6 )
> >                 {
> >                         CPLError(CE_Failure, CPLE_IllegalArg, "Bad extent representation: '%s'", pszBox);
> >                         CSLDestroy(papszTokens);
> > 
> > 
> > Help is appreciated,
> 
> Markus,
> 
> Sorry about this.  I asked Andrey and Oleg to look into this yesterday,
> but I believe Andrey is travelling today.  I am commiting the following
> patch which I think should support the BOX3D if it is returned by 
> the Extent() operator.   I am not sure if this is a postgis version issue or
> not, but it is my intention to continue supporting earlier versions of
> PostGIS for a year or two at least. 
> 
> diff -u -b -r1.29 ogrpgtablelayer.cpp
[snip]
 
> Note my change differs from yours in that it correctly extract
> the extents in the case of a BOX3D and in that it continues
> to support the 2D version of the box. 
> 
> Andrey / Oleg, perhaps you guys could verify the changed 
> code makes sense in all circumstances. 

Thanks for the update! This solves the BOX problem. Unfortunately
I still cannot fetch from PostGIS:

ogrinfo  PG:'host=myserver user=postgres dbname=spearfish' streams_pg
OGR_PG: DBName="spearfish"
OGR_PG: POSTGIS_VERSION=0.7
OGR_PG: Layer 'streams_geom' geometry type: GEOMETRY:Unknown (any), Dim=2
OGR_PG: Layer 'streams_length_geom' geometry type: GEOMETRY:Unknown (any), Dim=2
OGR_PG: Layer 'areecampione2' geometry type: POLYGON:Polygon, Dim=2
OGR_PG: Layer 'archistes' geometry type: POINT:Point, Dim=2
OGR_PG: Layer 'streams_pg' geometry type: LINESTRING:Line String, Dim=2
OGR_PG: Layer 'mystreams_pg' geometry type: LINESTRING:Line String, Dim=2
OGR: OGROpen(PG:host=myserver user=postgres dbname=spearfish) succeeded (0x97623f8).
INFO: Open of `PG:host=myserver user=postgres dbname=spearfish'
using driver `PostgreSQL' successful.

Layer name: streams_pg
Geometry: Line String
OGR_PG: PQexec(DECLARE countCursor CURSOR for SELECT count(*) FROM "streams_pg" )

Feature Count: 116
OGR_PG: PQexec(SELECT Extent("wkb_geometry") FROM "streams_pg")
Extent: (589443.060000, 4913935.460000) - (609526.750000, 4.000000)
Layer SRS WKT:
PROJCS["UTM Zone 13, Northern Hemisphere",
    GEOGCS["clark66",
        DATUM["North_American_Datum_1927",
            SPHEROID["clark66",6378206.4,294.9786982]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["meter",1]]
cat: Integer (0.0)
label: String (0.0)
OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT "ogc_fid", AsEWKT("wkb_geometry"), "cat", "label" FROM "streams_pg" )
OGR_PG_NOTICE: WARNING:  PerformPortalClose: portal "ogrpglayerreader" not found

Thanks

 markus


From craig.miller at spatialminds.com  Wed Aug  3 20:21:37 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] IsProjected and IsGeographic
Message-ID: <ALEXANDRIAj758flERZ000001bd@ALEXANDRIA.spatialminds.local>

Frank,

I just wanted to verify that my code isn't going to fail on some oddball
case.  :-)  Is it always true that if an SRS is not Geographic that it will
be Projected and that if an SRS is not Projected that it is Geographic?

E.g.
 
Assert(  

(OGRSpatialReference::IsGeographic() == FALSE &&
OGRSpatialReference::IsProjected() == TRUE)  
||  
(OGRSpatialReference::IsProjected() == FALSE &&
OGRSpatialReference::IsProjected() == TRUE)
);

Thanks,
Craig



-------------------------
Craig Miller
GIS Architect
Spatial Minds, LLC
(206) 331-3952 



From fwarmerdam at gmail.com  Wed Aug  3 22:47:15 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] IsProjected and IsGeographic
In-Reply-To: <ALEXANDRIAj758flERZ000001bd@ALEXANDRIA.spatialminds.local>
References: <ALEXANDRIAj758flERZ000001bd@ALEXANDRIA.spatialminds.local>
Message-ID: <931f8ea905080319476225c939@mail.gmail.com>

On 8/3/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> Frank,
> 
> I just wanted to verify that my code isn't going to fail on some oddball
> case.  :-)  Is it always true that if an SRS is not Geographic that it will
> be Projected and that if an SRS is not Projected that it is Geographic?
> 
> E.g.
> 
> Assert(
> 
> (OGRSpatialReference::IsGeographic() == FALSE &&
> OGRSpatialReference::IsProjected() == TRUE)
> ||
> (OGRSpatialReference::IsProjected() == FALSE &&
> OGRSpatialReference::IsProjected() == TRUE)
> );

Craig,

Currently there is also a third type of SRS indicated by the IsLocal()
method.  In the future there may be additional types such as a compound
coordinate system (one that defines the vertical datum).  So, no, it is
not wise to assume that a coordinate system is either projected or
geographic if you wish to operate with complete generality.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Thu Aug  4 00:58:31 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR and support for older PostGIS DBs?
In-Reply-To: <20050803170635.GB1147@thuille.itc.it>
References: <20050801171905.GC4461@thuille.itc.it>
	<931f8ea90508030622279ff2f@mail.gmail.com>
	<20050803170635.GB1147@thuille.itc.it>
Message-ID: <931f8ea905080321582c88f2fb@mail.gmail.com>

On 8/3/05, Markus Neteler <neteler@itc.it> wrote:
> label: String (0.0)
> OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT "ogc_fid", AsEWKT("wkb_geometry"), "cat", "label" FROM "streams_pg" )
> OGR_PG_NOTICE: WARNING:  PerformPortalClose: portal "ogrpglayerreader" not found

Markus,

I applogise.  This looks like the PostGIS version was improperly
determined as 1.0 or later since the AsEWKT() is being used.

I tried reproducing your problem here on my postgis 0.7 install, but
now a recent batch of changes from Oleg have completely broken
pre-PostGIS 1.0 support.

Oleg, 
 
First postgis_lib_version() does not exist before PostGIS 1.0 so there is
no point using it to test the version. 

Second, the query:

              hResult = PQexec(hPGConn,
                             "DECLARE mycursor CURSOR for "
                             "SELECT c.relname FROM pg_class c,
geometry_columns g "
                             "WHERE (c.relkind in ('r','v') AND
c.relname !~ '^pg' "
                             "AND c.relname = g.f_table_name)" );

Is failing on my PostGIS 0.7 system with the error message:

"Unable to identify an operator '=' for types 'name' and 'varchar'
 You will have to retype this query using an explicit cast"

I'm not clear why, but clearly you are doing something PostgreSQL 8
specific.   Could you please setup a PostGIS 0.7 on PostgreSQL 7.x
and fixup your code to be compatible.  If this isn't practical, then we
should backout your recent changes, and I can workout any other
outstanding issues with PostGIS 0.7 support. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dburken at comcast.net  Thu Aug  4 07:06:04 2005
From: dburken at comcast.net (David Burken)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] cvs build error...
In-Reply-To: <931f8ea90508031931c13d7dd@mail.gmail.com>
References: <42F111A9.1070006@comcast.net>
	<931f8ea90508031931c13d7dd@mail.gmail.com>
Message-ID: <42F1F69C.1090203@comcast.net>

Frank,

Sorry I sent this to the wrong list yesterday...

In current cvs gdal getting:
ilwisdataset.h:127: error: expected `)' before ?*? token
ilwisdataset.cpp: In static member function ?static GDALDataset* 
ILWISDataset::Open(GDALOpenInfo*)?:

Need forward class declaration now (line 118):
class ILWISDataset;

I think that "friend" used to be picked up as an implicit class dec. 
This occurred after a gcc update the other day.

Dave


From fwarmerdam at gmail.com  Thu Aug  4 11:27:11 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] cvs build error...
In-Reply-To: <42F1F69C.1090203@comcast.net>
References: <42F111A9.1070006@comcast.net>
	<931f8ea90508031931c13d7dd@mail.gmail.com>
	<42F1F69C.1090203@comcast.net>
Message-ID: <931f8ea905080408277f4737c7@mail.gmail.com>

On 8/4/05, David Burken <dburken@comcast.net> wrote:
> Frank,
> 
> Sorry I sent this to the wrong list yesterday...
> 
> In current cvs gdal getting:
> ilwisdataset.h:127: error: expected `)' before '*' token
> ilwisdataset.cpp: In static member function 'static GDALDataset*
> ILWISDataset::Open(GDALOpenInfo*)':
> 
> Need forward class declaration now (line 118):
> class ILWISDataset;
> 
> I think that "friend" used to be picked up as an implicit class dec.
> This occurred after a gcc update the other day.

Dave,

I have added a forward declaration for ILWISDataset.  Let me know
if the problem persists. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Thu Aug  4 12:18:38 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR and support for older PostGIS DBs?
In-Reply-To: <931f8ea905080321582c88f2fb@mail.gmail.com>
References: <20050801171905.GC4461@thuille.itc.it>
	<931f8ea90508030622279ff2f@mail.gmail.com>
	<20050803170635.GB1147@thuille.itc.it>
	<931f8ea905080321582c88f2fb@mail.gmail.com>
Message-ID: <20050804161838.GC1949@thuille.itc.it>

On Thu, Aug 04, 2005 at 12:58:31AM -0400, Frank Warmerdam wrote:
> On 8/3/05, Markus Neteler <neteler@itc.it> wrote:
> > label: String (0.0)
> > OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT "ogc_fid", AsEWKT("wkb_geometry"), "cat", "label" FROM "streams_pg" )
> > OGR_PG_NOTICE: WARNING:  PerformPortalClose: portal "ogrpglayerreader" not found
> 
> Markus,
> 
> I applogise.  This looks like the PostGIS version was improperly
> determined as 1.0 or later since the AsEWKT() is being used.

No problem, Frank.
 
> I tried reproducing your problem here on my postgis 0.7 install, but
> now a recent batch of changes from Oleg have completely broken
> pre-PostGIS 1.0 support.

I was updating this Italian morning, it works smoothly now for me.
Congrats to the quick fixing.

> Oleg, 
>  
> First postgis_lib_version() does not exist before PostGIS 1.0 so there is
> no point using it to test the version. 
> 
> Second, the query:
> 
>               hResult = PQexec(hPGConn,
>                              "DECLARE mycursor CURSOR for "
>                              "SELECT c.relname FROM pg_class c,
> geometry_columns g "
>                              "WHERE (c.relkind in ('r','v') AND
> c.relname !~ '^pg' "
>                              "AND c.relname = g.f_table_name)" );
> 
> Is failing on my PostGIS 0.7 system with the error message:
> 
> "Unable to identify an operator '=' for types 'name' and 'varchar'
>  You will have to retype this query using an explicit cast"
> 
> I'm not clear why, but clearly you are doing something PostgreSQL 8
> specific.   Could you please setup a PostGIS 0.7 on PostgreSQL 7.x
> and fixup your code to be compatible.  If this isn't practical, then we
> should backout your recent changes, and I can workout any other
> outstanding issues with PostGIS 0.7 support. 


Apparently the problem is solved in CVS.

Thanks to you and Oleg,

 Markus

From csab7771 at uibk.ac.at  Thu Aug  4 12:40:52 2005
From: csab7771 at uibk.ac.at (Sabine Grabner)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] eosat fast format
Message-ID: <1123173652.42f245144885b@web-mail1.uibk.ac.at>

hi,

i work with gdal version 1.2.6.0 released 2005/03/13 and want to read landsat7
level1G data which i have as eosat fast format.

surprisingly gdal_translate help does not say anything about supporting eosat
fast format.

hence i looked to gdal/frmts/fast/. this directory is empty.

can you please help me to fix this problem?

thank you,

sabine




********************************************************
Sabine Grabner
Assistant Researcher

Institute for Computational Earth System Science (ICESS)
6724 Ellison Hall
University of California
Santa Barbara, CA 93106-3060
Phone: 805-893-5308  Fax: 805-893-2578
E-mail: csab7771@uibk.ac.at
Web: www.icess.ucsb.edu

From fwarmerdam at gmail.com  Thu Aug  4 13:15:23 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] eosat fast format
In-Reply-To: <1123173652.42f245144885b@web-mail1.uibk.ac.at>
References: <1123173652.42f245144885b@web-mail1.uibk.ac.at>
Message-ID: <931f8ea90508041015bf013a4@mail.gmail.com>

On 8/4/05, Sabine Grabner <csab7771@uibk.ac.at> wrote:
> hi,
> 
> i work with gdal version 1.2.6.0 released 2005/03/13 and want to read landsat7
> level1G data which i have as eosat fast format.
> 
> surprisingly gdal_translate help does not say anything about supporting eosat
> fast format.
> 
> hence i looked to gdal/frmts/fast/. this directory is empty.
> 
> can you please help me to fix this problem?

Sabine, 

The EOSAT Fast Format driver is named FAST and now lives
in gdal/frmts/raw.  It should be built in by default. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sewell at dramail.com  Thu Aug  4 17:02:23 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
Message-ID: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>


I've got the ECW SDK 3.2 (11 Jun 2005 ) built.  I tried to configure gdal 
(cvs checked out 03 Aug 2005 ) with it, but the configure script is 
looking for the libNCSE*.so files and the ecw 3.2 builds one library named 
libecwj2.so.  Is there a patch or trick to get it to work that I'm 
missing?

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

From sewell at dramail.com  Thu Aug  4 17:25:57 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
In-Reply-To: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
References: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
Message-ID: <Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>


Answering my own question.  It seems a simple replace of libNCSE* with 
libecwj2.so is all thats needed in the configure script.   Also in the ecw 
directory you need to do 'ln -s Source/include .'

This gets it so that GDAL mostly compiles.  But here's the problem now.  
In the frmts/ecw directory the compiler has problems.  Mostly it seems to 
do with typedefs.  It looks like the gdal code needs to #include "ECW.h".  
This help resolve alot of the problems, however there are still some I 
haven't tracked down.  Am I the only one having issues with this?  Has 
anyone else tried these libraries?  I'm building on Suse 9.3 64-bit.  
Thanks for any help.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

On Thu, 4 Aug 2005, Ken Sewell wrote:

> 
> I've got the ECW SDK 3.2 (11 Jun 2005 ) built.  I tried to configure gdal 
> (cvs checked out 03 Aug 2005 ) with it, but the configure script is 
> looking for the libNCSE*.so files and the ecw 3.2 builds one library named 
> libecwj2.so.  Is there a patch or trick to get it to work that I'm 
> missing?
> 
> Ken Sewell                   Defense Research Associates
> Project Engineer             3915 Germany Lane, Suite 102
> 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> sewell@dramail.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From bill at binko.net  Thu Aug  4 17:38:09 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
In-Reply-To: <Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>
References: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
	<Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>
Message-ID: <Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>


Ken,

Frank is on top of this, and we're hoping for a new build of ECW 3.2 that 
solves most of these issues.

I'm sure he can get you a config that works.

You might(!) get away with adding -DLINUX -DPOSIX and -DUNICODE to the 
build command line -- it has worked before.

Other than that, I'll wait for Frank's response.

Bill

On Thu, 4 Aug 2005, Ken Sewell wrote:

> 
> Answering my own question.  It seems a simple replace of libNCSE* with 
> libecwj2.so is all thats needed in the configure script.   Also in the ecw 
> directory you need to do 'ln -s Source/include .'
> 
> This gets it so that GDAL mostly compiles.  But here's the problem now.  
> In the frmts/ecw directory the compiler has problems.  Mostly it seems to 
> do with typedefs.  It looks like the gdal code needs to #include "ECW.h".  
> This help resolve alot of the problems, however there are still some I 
> haven't tracked down.  Am I the only one having issues with this?  Has 
> anyone else tried these libraries?  I'm building on Suse 9.3 64-bit.  
> Thanks for any help.
> 
> Ken Sewell                   Defense Research Associates
> Project Engineer             3915 Germany Lane, Suite 102
> 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> sewell@dramail.com
> 
> On Thu, 4 Aug 2005, Ken Sewell wrote:
> 
> > 
> > I've got the ECW SDK 3.2 (11 Jun 2005 ) built.  I tried to configure gdal 
> > (cvs checked out 03 Aug 2005 ) with it, but the configure script is 
> > looking for the libNCSE*.so files and the ecw 3.2 builds one library named 
> > libecwj2.so.  Is there a patch or trick to get it to work that I'm 
> > missing?
> > 
> > Ken Sewell                   Defense Research Associates
> > Project Engineer             3915 Germany Lane, Suite 102
> > 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> > sewell@dramail.com
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From sewell at dramail.com  Fri Aug  5 09:39:53 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
In-Reply-To: <Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>
References: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
	<Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>
	<Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>
Message-ID: <Pine.LNX.4.61.0508050935580.4170@primary-server.dramail>


I'll give those command line options a try.  Is the source for any of the 
3.1 versions available?  From ERMapper's site I can only find 3.2.  I was 
using the prebuilt binary libs from the gdal ftp site, but they don't seem 
to work on the 64-bit machine.  This is what lead me into the 3.2 problems 
in the first place.  I really don't care which I use, I was just hoping to 
get it working by today, so I could let it run some jobs over the weekend.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

On Thu, 4 Aug 2005, Bill Binko wrote:

> 
> Ken,
> 
> Frank is on top of this, and we're hoping for a new build of ECW 3.2 that 
> solves most of these issues.
> 
> I'm sure he can get you a config that works.
> 
> You might(!) get away with adding -DLINUX -DPOSIX and -DUNICODE to the 
> build command line -- it has worked before.
> 
> Other than that, I'll wait for Frank's response.
> 
> Bill
> 
> On Thu, 4 Aug 2005, Ken Sewell wrote:
> 
> > 
> > Answering my own question.  It seems a simple replace of libNCSE* with 
> > libecwj2.so is all thats needed in the configure script.   Also in the ecw 
> > directory you need to do 'ln -s Source/include .'
> > 
> > This gets it so that GDAL mostly compiles.  But here's the problem now.  
> > In the frmts/ecw directory the compiler has problems.  Mostly it seems to 
> > do with typedefs.  It looks like the gdal code needs to #include "ECW.h".  
> > This help resolve alot of the problems, however there are still some I 
> > haven't tracked down.  Am I the only one having issues with this?  Has 
> > anyone else tried these libraries?  I'm building on Suse 9.3 64-bit.  
> > Thanks for any help.
> > 
> > Ken Sewell                   Defense Research Associates
> > Project Engineer             3915 Germany Lane, Suite 102
> > 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> > sewell@dramail.com
> > 
> > On Thu, 4 Aug 2005, Ken Sewell wrote:
> > 
> > > 
> > > I've got the ECW SDK 3.2 (11 Jun 2005 ) built.  I tried to configure gdal 
> > > (cvs checked out 03 Aug 2005 ) with it, but the configure script is 
> > > looking for the libNCSE*.so files and the ecw 3.2 builds one library named 
> > > libecwj2.so.  Is there a patch or trick to get it to work that I'm 
> > > missing?
> > > 
> > > Ken Sewell                   Defense Research Associates
> > > Project Engineer             3915 Germany Lane, Suite 102
> > > 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> > > sewell@dramail.com
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> 

From sewell at dramail.com  Fri Aug  5 09:44:15 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Writing an ENVI file.
Message-ID: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>


A co-worker is trying to use gdalwarp to warp an ENVI file into a new 
projection.  It seems to work, but when we examine the header file it 
seems to have lost all geotransform and coordinate system info.  From 
searching the mailing list archives, I found that writing to envi is not 
complete, but should at least output the coord/geo information.  Is there 
a gotcha we need to know about?

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

From grevedan at hotmail.com  Fri Aug  5 10:12:00 2005
From: grevedan at hotmail.com (Dan Greve)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ECW "Rotational Coefficients Ignored"
Message-ID: <BAY102-F25C71504328DEF7F4277E3C7C70@phx.gbl>

Does this mean the input images need to be warped to North-Up?  What are the 
rotational coefficients ignored?  I'm trying to convert a NITF into an ECW 
with gdal_translate and no special switches.  I get the same error for 
JP2ECW and ECW.

Here's the source nitf info

<snip>
Driver: NITF/National Imagery Transmission Format
Size is 1008, 1018
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  -117.8627781861234, -2.758468498700545e-007, 1.092537965703008e-006
  34.90493000453995, 9.654639743857878e-007, 1.36567245712876e-007
Metadata:
  NITF_FHDR=NITF02.00
  NITF_CLEVEL=99
  NITF_STYPE=
  NITF_OSTAID=CWIN
  NITF_FDT=13214514ZMAR99
  NITF_FTITLE=
    0019960002
  NITF_FSCLAS=U
  NITF_FSCODE=
  NITF_FSCTLH=
  NITF_FSREL=
  NITF_FSCAUT=
  NITF_FSCTLN=
  NITF_FSDWNG=
  NITF_FSCOP=
  NITF_FSCPYS=
  NITF_ENCRYP=0
  NITF_ONAME=
  NITF_OPHONE=
  NITF_IID1=      9228
  NITF_IDATIM=13214514ZMAR99
  NITF_TGTID=
  NITF_ITITLE=
  NITF_ISCLAS=U
  NITF_ISCODE=
  NITF_ISCTLH=
  NITF_ISREL=
  NITF_ISCAUT=
  NITF_ISCTLN=
  NITF_ISDWNG=
  NITF_ISORCE=
  NITF_PVTYPE=INT
  NITF_IREP=MONO
  NITF_ICAT=VIS
  NITF_ABPP=08
  NITF_PJUST=R
  NITF_IMAGE_COMMENTS=

  NITF_IC=NC
  NITF_IMODE=B
Corner Coordinates:
Upper Left  (-117.8627782,  34.9049300) (117d51'46.00"W, 34d54'17.75"N)
Lower Left  (-117.8616660,  34.9050690) (117d51'42.00"W, 34d54'18.25"N)
Upper Right (-117.8630562,  34.9059032) (117d51'47.00"W, 34d54'21.25"N)
Lower Right (-117.8619440,  34.9060422) (117d51'43.00"W, 34d54'21.75"N)
Center      (-117.8623611,  34.9054861) (117d51'44.50"W, 34d54'19.75"N)
Band 1 Block=1008x1 Type=Byte, ColorInterp=Undefined
</snip>

And the output ECW
<snip>
Driver: ECW/ERMapper Compressed Wavelets
Size is 1008, 1018
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (0.000000,1018.000000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (       0.000,    1018.000) (  0d 0'0.01"E,1018d 0'0.00"N)
Lower Left  (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Upper Right (    1008.000,    1018.000) (1008d 0'0.00"E,1018d 0'0.00"N)
Lower Right (    1008.000,       0.000) (1008d 0'0.00"E,  0d 0'0.01"N)
Center      (     504.000,     509.000) (504d 0'0.00"E,509d 0'0.00"N)
Band 1 Block=1008x1 Type=Byte, ColorInterp=Gray
  Overviews: arbitrary
</snip>



From sewell at dramail.com  Fri Aug  5 10:17:48 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
In-Reply-To: <Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>
References: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
	<Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>
	<Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>
Message-ID: <Pine.LNX.4.61.0508051016410.4170@primary-server.dramail>


Thanks, Bill.  All it needed was the -DLINUX and -DPOSIX.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

On Thu, 4 Aug 2005, Bill Binko wrote:

> 
> Ken,
> 
> Frank is on top of this, and we're hoping for a new build of ECW 3.2 that 
> solves most of these issues.
> 
> I'm sure he can get you a config that works.
> 
> You might(!) get away with adding -DLINUX -DPOSIX and -DUNICODE to the 
> build command line -- it has worked before.
> 
> Other than that, I'll wait for Frank's response.
> 
> Bill
> 
> On Thu, 4 Aug 2005, Ken Sewell wrote:
> 
> > 
> > Answering my own question.  It seems a simple replace of libNCSE* with 
> > libecwj2.so is all thats needed in the configure script.   Also in the ecw 
> > directory you need to do 'ln -s Source/include .'
> > 
> > This gets it so that GDAL mostly compiles.  But here's the problem now.  
> > In the frmts/ecw directory the compiler has problems.  Mostly it seems to 
> > do with typedefs.  It looks like the gdal code needs to #include "ECW.h".  
> > This help resolve alot of the problems, however there are still some I 
> > haven't tracked down.  Am I the only one having issues with this?  Has 
> > anyone else tried these libraries?  I'm building on Suse 9.3 64-bit.  
> > Thanks for any help.
> > 
> > Ken Sewell                   Defense Research Associates
> > Project Engineer             3915 Germany Lane, Suite 102
> > 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> > sewell@dramail.com
> > 
> > On Thu, 4 Aug 2005, Ken Sewell wrote:
> > 
> > > 
> > > I've got the ECW SDK 3.2 (11 Jun 2005 ) built.  I tried to configure gdal 
> > > (cvs checked out 03 Aug 2005 ) with it, but the configure script is 
> > > looking for the libNCSE*.so files and the ecw 3.2 builds one library named 
> > > libecwj2.so.  Is there a patch or trick to get it to work that I'm 
> > > missing?
> > > 
> > > Ken Sewell                   Defense Research Associates
> > > Project Engineer             3915 Germany Lane, Suite 102
> > > 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> > > sewell@dramail.com
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> 

From tflynch at gmail.com  Fri Aug  5 10:36:57 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal with ecwsdk 3.2
In-Reply-To: <Pine.LNX.4.61.0508051016410.4170@primary-server.dramail>
References: <Pine.LNX.4.61.0508041659140.24892@primary-server.dramail>
	<Pine.LNX.4.61.0508041719060.24892@primary-server.dramail>
	<Pine.LNX.4.58.0508041735560.483@fastcat.binko.net>
	<Pine.LNX.4.61.0508051016410.4170@primary-server.dramail>
Message-ID: <c39b2a650508050736c74e1fd@mail.gmail.com>

Hi Ken, Bill and others with an interest in the ECW JPEG 2000 SDK:

Just to let you know a little in advance of time, a new wrap of the
ECW JPEG 2000 SDK source distribution is currently scheduled to be out
some time during the coming week, pending the progress of QA, doco
updates and tweaking.

The current "what's new" for this distro includes "configure/make
install" build support via GNU autotools on supported platforms
(thanks to Frank for getting the ball rolling on that), a fix to the
ECW decoding bug on big-endian platforms, and fixes to some snarky
pthread bugs on Linux (some of which came from Frank and Bill), as
well as improved documentation and sample code.

There will also be further relaxation of the remaining restrictions in
the "Public Use" License agreement to bring it more into line with the
GPL, which will be clarified when the release occurs.

For various reasons the new distribution will be referred to as v3.3 RC1.  

Stay tuned :-)

cheers

Tom.

On 8/5/05, Ken Sewell <sewell@dramail.com> wrote:
> 
> Thanks, Bill.  All it needed was the -DLINUX and -DPOSIX.
-- 
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com


From fwarmerdam at gmail.com  Fri Aug  5 10:40:50 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ECW "Rotational Coefficients Ignored"
In-Reply-To: <BAY102-F25C71504328DEF7F4277E3C7C70@phx.gbl>
References: <BAY102-F25C71504328DEF7F4277E3C7C70@phx.gbl>
Message-ID: <931f8ea905080507401c4541c@mail.gmail.com>

On 8/5/05, Dan Greve <grevedan@hotmail.com> wrote:
> Does this mean the input images need to be warped to North-Up?  What are the
> rotational coefficients ignored?  I'm trying to convert a NITF into an ECW
> with gdal_translate and no special switches.  I get the same error for
> JP2ECW and ECW.

Dan,

Yes, it means that either the source file has to be north up, or the 
coordinate information needs to be discarded.  

It might be possible to work around this via use of a world file.

For JP2 files, the JP2ECW driver could likely be modified to avoid
emitting the ERMapper GML header and instead generate the 
geotiff-in-jpeg2000 header which can support rotated images.  But
some potentially non-trivial code changes would be required.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marco_vieira at uk2.net  Fri Aug  5 10:51:33 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdalwarp with multiple options
Message-ID: <27733.200.169.121.246.1123253493.squirrel@maxproxy1.uk2net.com>

Hi list.

It is not a big spot.

$ gdalwarp -s_srs '+proj=tmerc +k_0=0.9996 +x_0=500000 +y_0=10000000
+ellps=intl +lat_0=0 +lon_0=-51' -t_srs '+proj=latlong +ellps=WGS84'
test.tif test_out.tif

works.

$ gdalwarp -tr 150 150 test.tif test_out.tif

works too.

$ gdalwarp -s_srs '+proj=tmerc +k_0=0.9996 +x_0=500000 +y_0=10000000
+ellps=intl +lat_0=0 +lon_0=-51' -t_srs '+proj=latlong +ellps=WGS84' -tr
150 150 test.tif test_out.tif

Returns a float point exception.

Creating output file that is 0P x 0L.
ERROR 1: _TIFFVSetField:test_out.tif: Bad value 0 for "RowsPerStrip"
Exce??o de ponto flutuante

My GDAL is:
$ gdalwarp --version
GDAL 1.2.6.0, released 2005/03/13
over
$ uname -a
Linux 41100V4A020 2.6.8-1-386 #1 Thu Nov 25 04:24:08 UTC 2004 i686 GNU/Linux

Thanks.

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net

From tflynch at gmail.com  Fri Aug  5 11:31:12 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ECW "Rotational Coefficients Ignored"
In-Reply-To: <931f8ea905080507401c4541c@mail.gmail.com>
References: <BAY102-F25C71504328DEF7F4277E3C7C70@phx.gbl>
	<931f8ea905080507401c4541c@mail.gmail.com>
Message-ID: <c39b2a6505080508311801d0bf@mail.gmail.com>

It's possible to store a rotation value in a JPEG 2000 file using the
ECW JPEG 2000 SDK.  The GeoJP2 header box stores the rotation in the
affine coefficients of a GeoTIFF ModelTransformationTag, and the GML
header box stores the rotation in a GML cell offset vector..

The current GDAL JP2ECW drive sets the conceptual rotation in an
output JPEG 2000 file to zero - see from comment "Georeferencing"
around line 880 of ecwcreatecopy.cpp.  If this value
(psClient->fCWRotationDegrees) is specified using the affine values in
padfGeoTransform nearby when creating a JPEG 2000 file (but not ECW,
see below), it should go some way to resolving the problem.

In the case of the ECW format, an oversight in the original metadata
design means that it cannot store rotated registration info, only a
tie point and pixel scale, so here you will be forced to use a world
file or warp your input data to north-up, as Frank says.

On 8/5/05, Frank Warmerdam <fwarmerdam@gmail.com> wrote:
> On 8/5/05, Dan Greve <grevedan@hotmail.com> wrote:
> > Does this mean the input images need to be warped to North-Up?  What are the
> > rotational coefficients ignored?  I'm trying to convert a NITF into an ECW
> > with gdal_translate and no special switches.  I get the same error for
> > JP2ECW and ECW.
> 
> Dan,
> 
> Yes, it means that either the source file has to be north up, or the
> coordinate information needs to be discarded.
> 
> It might be possible to work around this via use of a world file.
> 
> For JP2 files, the JP2ECW driver could likely be modified to avoid
> emitting the ERMapper GML header and instead generate the
> geotiff-in-jpeg2000 header which can support rotated images.  But
> some potentially non-trivial code changes would be required.
> 
> Best regards,
> 
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com


From fwarmerdam at gmail.com  Fri Aug  5 13:43:10 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Writing an ENVI file.
In-Reply-To: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>
References: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>
Message-ID: <931f8ea90508051043653ce794@mail.gmail.com>

On 8/5/05, Ken Sewell <sewell@dramail.com> wrote:
> 
> A co-worker is trying to use gdalwarp to warp an ENVI file into a new
> projection.  It seems to work, but when we examine the header file it
> seems to have lost all geotransform and coordinate system info.  From
> searching the mailing list archives, I found that writing to envi is not
> complete, but should at least output the coord/geo information.  Is there
> a gotcha we need to know about?

Ken,

It looks like Lichun Wang (ITC) did a significant overhaul of the
header writing for ENVI format very shortly after 1.2.6 release.   Are
you using 1.2.6 or GDAL CVS?  I would encourage you to try a
nightly snapshot if you are currently using 1.2.6.

Looking at the code, it seems it should always write out the
geotransform information as a mapinfo line, even if the coordinate
system is not known.  What does the generated header file look like?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Fri Aug  5 13:59:40 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdalwarp with multiple options
In-Reply-To: <27733.200.169.121.246.1123253493.squirrel@maxproxy1.uk2net.com>
References: <27733.200.169.121.246.1123253493.squirrel@maxproxy1.uk2net.com>
Message-ID: <931f8ea9050805105919585e3d@mail.gmail.com>

On 8/5/05, Marco Vieira <marco_vieira@uk2.net> wrote:
> Hi list.
> 
> It is not a big spot.
> 
> $ gdalwarp -s_srs '+proj=tmerc +k_0=0.9996 +x_0=500000 +y_0=10000000
> +ellps=intl +lat_0=0 +lon_0=-51' -t_srs '+proj=latlong +ellps=WGS84'
> test.tif test_out.tif
> 
> works.
> 
> $ gdalwarp -tr 150 150 test.tif test_out.tif
> 
> works too.
> 
> $ gdalwarp -s_srs '+proj=tmerc +k_0=0.9996 +x_0=500000 +y_0=10000000
> +ellps=intl +lat_0=0 +lon_0=-51' -t_srs '+proj=latlong +ellps=WGS84' -tr
> 150 150 test.tif test_out.tif
> 
> Returns a float point exception.
> 
> Creating output file that is 0P x 0L.
> ERROR 1: _TIFFVSetField:test_out.tif: Bad value 0 for "RowsPerStrip"
> Exce??o de ponto flutuante

Marco,

The problem is that you are trying to specify the output resolution as
150m x 150m but the output coordinate system is degrees.  So when
GDAL computes how many 150 degree x 150 degree pixels it will
need for the data, it comes up with 0x0 which causes the failure.

Since 1.2.6 I have made the code issue an error instead of core dumping,
but it still doesn't work as you want.  150m is roughly 0.00135 degrees,
so try using "-tr 0.00135 0.00135" instead of "-tr 150 150".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marco_vieira at uk2.net  Fri Aug  5 14:23:41 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] raster format and indexation for not so static repository
Message-ID: <33524.200.169.121.246.1123266221.squirrel@maxproxy3.uk2net.com>

Hi list.
 Hi have 150Gb of raster data distributed in hundred thousand files in a
non standart 16bit raw format that I can convert to a Arc/Info ASCII Grid
- AAIGrid format to display with mapserver in many scales. This data need
to be updated almost everyday (converted and presented).
 I planned to convert to a non compressed format (tif) in three diferent
resolution (a fake "pyramids") to classify pixel values dinamically with
mapserver and planned to use simple tile indexation like gdaltindex +
shptree but it is not showing me a good idea because needes to much time
to process and to much volume to handle.
 Anyone has some suggestion about raster format and indexation to optimize
handling and fast presentation? ECW?


Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net






From ed at topozone.com  Fri Aug  5 14:38:50 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] raster format and indexation for not so static
	repository
Message-ID: <4BF377919225F449BB097CB76FFE9BC81887AD@ptolemy.topozone.com>

Marco -

I'm not sure just what is taking too much time to process - the
conversion to TIFF, or the classification and display in MapServer?
Compressed formats are probably not a good idea, since they are likely
to take more time to generate and more time to decode.  Compression
software is designed to save space rather than save time.

Your overall approach sounds fine.  If your conversion takes too long,
tell us what tools you are using for the conversion.  It is possible
that you simply have too much conversion to do for the equipment you
have, and you'll need more hardware to do it.  But it is also possible
that there are faster ways of doing the conversion.  But if you're going
to convert 100,000 files in less than 24 hours, you will need to convert
about 1 file per second, and that's pretty fast.  Each file should be
about 1.5 megabytes, so they're small files, but that's still a lot of
conversion.

     - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Marco Vieira
Sent: Friday, August 05, 2005 2:24 PM
To: Gdal-dev@lists.maptools.org
Subject: [Gdal-dev] raster format and indexation for not so static
repository

Hi list.
 Hi have 150Gb of raster data distributed in hundred thousand files in a
non standart 16bit raw format that I can convert to a Arc/Info ASCII
Grid
- AAIGrid format to display with mapserver in many scales. This data
need to be updated almost everyday (converted and presented).
 I planned to convert to a non compressed format (tif) in three diferent
resolution (a fake "pyramids") to classify pixel values dinamically with
mapserver and planned to use simple tile indexation like gdaltindex +
shptree but it is not showing me a good idea because needes to much time
to process and to much volume to handle.
 Anyone has some suggestion about raster format and indexation to
optimize handling and fast presentation? ECW?


Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net





_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sab at isis.vpac.org  Fri Aug  5 12:37:12 2005
From: sab at isis.vpac.org (Shoaib Burq (VPAC))
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Writing an ENVI file.
In-Reply-To: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>
References: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>
Message-ID: <Pine.LNX.4.63.0508060152380.2113@isis.vpac.org>

I seem to recall running into similar issues while converting ESRI Binary 
Grids to ENVI format.

Ended up writing a small GDAL program that read the ESRI Grid's Coordinate 
system and projection info and spat it out in the ENVI header format 
(mapinfo={...})

But I was under the impression is was due to the partial support for 
Binary Grids.

What do you get if you run gdalinfo on the file?

Shoaib Burq
--
VPAC - Geospatial Applications Developer
Building 91, 110 Victoria Street,
Carlton South, Vic 3053, Australia


On Fri, 5 Aug 2005, Ken Sewell wrote:

>
> A co-worker is trying to use gdalwarp to warp an ENVI file into a new
> projection.  It seems to work, but when we examine the header file it
> seems to have lost all geotransform and coordinate system info.  From
> searching the mailing list archives, I found that writing to envi is not
> complete, but should at least output the coord/geo information.  Is there
> a gotcha we need to know about?
>
> Ken Sewell                   Defense Research Associates
> Project Engineer             3915 Germany Lane, Suite 102
> 937-656-4899 x3004           Beavercreek, Ohio 45431-1608
> sewell@dramail.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu at iastate.edu  Fri Aug  5 18:10:06 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Next Generation Language Binding News
Message-ID: <6.2.1.2.2.20050805170553.03575e18@hobu.mail.iastate.edu>

Kevin Ruland and myself (well, Kevin mostly) have been working on the next 
generation bindings for GDAL.  These new bindings take advantage of new 
features in SWIG 1.3.25.  Most importantly, this development provides the 
architecture for supporting more languages than the current Python and VB 
bindings.  This post will describe the work that has been going on, what is 
yet to be done, and how we need your help.

Work that has gone on
------------------------------------

Current Python bindings for GDAL are generated with SWIG 1.1, with a lot of 
hand rolling of code by Frank.  They work great, but the development is not 
sustainable when you start factoring in the desire to have more than Python 
be supported.  In addition, migrating these bindings from 1.1 to 1.3 SWIG 
is difficult because Frank had to do a lot of swig voodoo to get what he 
needed.

In February, Kevin and myself started working on new SWIG definition files, 
in a similar fashion to MapScript, that provide a fully backward-compatible 
Python interface and provide the architecture to support more language 
bindings in a more automated way.  The ng Python bindings were in a 
reasonable state just before the OSGIS conference and throughout the spring 
I worked on C# bindings.

In addition, Kevin, heavyweight that he his, tore into SWIG itself to make 
it support PHP better and bring SWIG PHP support to the same level as many 
of the other languages in SWIG specifically for the development of PHP GDAL 
wrappers.  These updates are expected to be available in an upcoming SWIG 
release...

Where we're at now
--------------------------------

So, to recap where we're at, ng Python bindings are backward compatible 
(however lightly tested) with existing Python bindings, C# has bindings 
that are about 90% of the way there, and PHP bindings are on the 
horizon.  Now I'm going to explain what has yet to be done.

1.  SWIG is a fantastic, if arcane, tool that allows you to auto-generate 
code to bind C/C++ to one of its supported langauges.  There are a few 
gotchas with SWIG though.  First, not all of the concepts in every language 
transfers easily to other languages.  For example, things like default 
arguments, common in Python don't translate to Java.  Module-level 
variables, common in C/C++, Python and others, don't work in C#.  Second, 
the types in one language (C/C++, for example) cannot be automagically 
coerced into the types of another language (list of strings in C#, for 
example).  SWIG has a system called typemaps that a programmer must use to 
provide definitions for how SWIG is to make these kinds of coercions.  So, 
while SWIG gets you through the boring 90% of generating the bindings, 
there's still a really messy 10% that has to be done.

2.  ng Python bindings have almost all of the their typemaps done, past 
most of the gdalautotest suite of tests, and seem to be working pretty 
well.  I have used these fairly extensively.  It is important that they are 
widely tested before we attempt to replace the current Python bindings with 
these, however.

3.  ng C# bindings are 90% of the way there.  The build environment exists, 
C# and C/C++ dlls are created as expected, and you can import everything 
into Visual Studio .NET and use them some.  It's that last 10% that is the 
killer though.  There are *no* typemaps beyond the stock SWIG ones.  This 
means you can't return a list of GeoTransform variables... instead you just 
get back a pointer to it.

4.  Some PHP typemaps exist, and I can let Kevin explain things further, 
but an updated SWIG with Kevin's improvements isn't available yet, so these 
are a ways off.

5.  Charlie Savage has been playing around with working up Ruby 
bindings.  I'll let him comment on how much progress has been made.

6.  No Java, Perl or TCL bindings have been attempted.  Java users could 
use the C# bindings as a template -- adding in typemaps  specific to Java 
where needed.  Perl and TCL users might use the Python bindings as a template.

How we need your help
-----------------------------------

We need developers who have expertise in their pet language's C/C++ 
API.  For C#, this is the PINVOKE mechanism.  For Python, it is the Python 
C API.  For Java, it is JNI.  And so on.  There is some typemap code for 
individual languages in MapScript that might be useful as a guide.  Without 
the typemaps, your language will be a second class citizen ... you'll have 
primitive bindings, but you won't be able to do everything you want.  This 
situation is still better than where you might have been before the ng 
development -- hand-rolling bindings entirely by yourself.

To reiterate, if you are a Python GDAL user, please test the ng bindings in 
the upcoming 1.3 beta.  They are located under swig/python.  C# users might 
grab a copy of SWIG 1.3.25 from Sourceforge and build up C# bindings with 
the makefile.vc that exists in swig/csharp.  Anyone else who has a language 
not mentioned should check out the stuff in the swig directory and see how 
they might make SWIG generate what they need.

Howard 


From bill at binko.net  Sat Aug  6 02:36:55 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Next Generation Language Binding News
In-Reply-To: <6.2.1.2.2.20050805170553.03575e18@hobu.mail.iastate.edu>
References: <6.2.1.2.2.20050805170553.03575e18@hobu.mail.iastate.edu>
Message-ID: <Pine.LNX.4.58.0508060229190.16956@fastcat.binko.net>

> 
> We need developers who have expertise in their pet language's C/C++ 
> API.  For C#, this is the PINVOKE mechanism.  For Python, it is the Python 
> C API.  For Java, it is JNI.  And so on.  There is some typemap code for 
> individual languages in MapScript that might be useful as a guide.  Without 
> the typemaps, your language will be a second class citizen ... you'll have 
> primitive bindings, but you won't be able to do everything you want.  This 
> situation is still better than where you might have been before the ng 
> development -- hand-rolling bindings entirely by yourself.
> 

Howard,

I have agreed to test some of Kevin's upcoming PHP mapping, and he's sent 
me a snapshot of it.  My mapping work (which is "side-work" for me) is 
almost all in PHP, so I am looking forward to getting that working.

However, my day job is almost all Java.  While there are reasons that I 
choose PHP for side-work, I have a lot of experience with JNI and writing 
C wrappers.  (In fact, I've been doing that since I wrote this article 
about wrapping Postgres95's interface with pre-JNI Java bindings in 1996 
:)

http://www.linuxjournal.com/article/5535

I have no real use for the Java bindings, and I don't really want to 
take on the work of integrating them.  However, I'd like to offer my help 
to whoever takes up that gauntlet.

Bill

From oss-dev at rambler.ru  Sat Aug  6 10:53:08 2005
From: oss-dev at rambler.ru (Oleg Semykin)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR PostGIS driver BINARY CURSOR support
Message-ID: <42F4CED4.6080806@rambler.ru>

Hi, Frank!! Hi ALL!

I am just finished the binary cursor support for PostGIS.

This support is switched off by default.
To switch it ON, you have to replace two first character of driver 
string ('PG') with ('PGB') -> PG Binary

For example:
ogrinfo 'PGB:host=192.168.17.3 dbname=lenobl user='postgres' password='' 
port=5432' t_table_10

Everybody is welcome to test this feature for a bugs and performance.

I am have tables with only ~5000 records of complex geometries ( 
MULTIPOLYGON)
And that is my results:

oss@oss:~/work/gis/gdal$ time ogrinfo 'PG:host=192.168.17.3 
dbname=lenobl user='postgres' password='' port=5432' t_table_10 > 
/dev/null 2>&1

real    0m17.252s
user    0m2.214s
sys     0m0.162s

oss@oss:~/work/gis/gdal$ time ogrinfo 'PGB:host=192.168.17.3 
dbname=lenobl user='postgres' password='' port=5432' t_table_10 > 
/dev/null 2>&1

real    0m9.504s
user    0m1.969s
sys     0m0.165s

I would be very thankful for any suggestions.

From fwarmerdam at gmail.com  Sun Aug  7 16:49:51 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
Message-ID: <931f8ea90508071349521512b1@mail.gmail.com>

Folks,

In lead up to a GDAL 1.3.0 release, I have prepared a first beta
release.  It is available at:

  http://www.gdal.org/dl/gdal-1.3.0b1.tar.gz
or
  http://www.gdal.org/dl/gdal130b1.zip

Check the NEWS file for updates since 1.2.6, in March, which are 
plentiful.  Included in this package are "pre-generated" swig bindings
for Python using the "next generation" swig files Kevin and Howard
have been working on.  However, for now the default is still the old
bindings. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From lists at b-open-solutions.it  Sun Aug  7 17:42:46 2005
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <931f8ea90508071349521512b1@mail.gmail.com>
References: <931f8ea90508071349521512b1@mail.gmail.com>
Message-ID: <200508072342.47179.lists@b-open-solutions.it>


Frank,

On Sunday 07 August 2005 22:49, Frank Warmerdam wrote:
> In lead up to a GDAL 1.3.0 release, I have prepared a first beta
> release.  It is available at:

ugh! i noticed the announce just after having tested on current cvs, hope they 
are not that different...


being back to the remote sensing/gis business (at least for a while) i'm 
writing a tiny python/qt application on top of gdal and i hit the following 
bug with both debian gdal-1.2.6 and current cvs (--with-threads).

i open a bunch of tif files and gdal behaves quite reasonably within the same 
function, i.e. i can use GetRasterBand().ReadAsArray normally.

then if i try to access the gdal.Band objects from within a qt button click 
handler i get random errors and random segfault's as soon as i try to 
ReadAsArray.

example errors are ('raster of' numbers change):
ERROR 5: Access window out of range in RasterIO().  Requested
(0,0) of size 10x10 on raster of -216068892x23625214.

and the segfault appears to be inside the locking code:
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread -1210644800 (LWP 22483)]
0xb7856faa in GDALRasterBand::TryGetLockedBlockRef () 
from /usr/local/lib/libgdal.so.1
(gdb)

the pythonic attributes of gdal.Band work as usual, so i'm inclined to think 
this might be a memory corruption bug possibly due to threading-problems.

with the same files i can reproduce the problem within the python interpreter.

cheers,
alessandro

-- 
B-Open Solutions srl - http://www.bopen.it/

From lists at b-open-solutions.it  Sun Aug  7 17:50:04 2005
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <200508072342.47179.lists@b-open-solutions.it>
References: <931f8ea90508071349521512b1@mail.gmail.com>
	<200508072342.47179.lists@b-open-solutions.it>
Message-ID: <200508072350.05141.lists@b-open-solutions.it>

On Sunday 07 August 2005 23:42, Alessandro Amici wrote:
> with the same files i can reproduce the problem within the python
> interpreter.

d'ho! i **can't** reproduce the problem within the python interpreter.

-- 
B-Open Solutions srl - http://www.bopen.it/

From fwarmerdam at gmail.com  Sun Aug  7 17:56:49 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <200508072342.47179.lists@b-open-solutions.it>
References: <931f8ea90508071349521512b1@mail.gmail.com>
	<200508072342.47179.lists@b-open-solutions.it>
Message-ID: <931f8ea905080714565ee1ef3b@mail.gmail.com>

On 8/7/05, Alessandro Amici <lists@b-open-solutions.it> wrote:
> example errors are ('raster of' numbers change):
> ERROR 5: Access window out of range in RasterIO().  Requested
> (0,0) of size 10x10 on raster of -216068892x23625214.

Alessandro, 

This does sound like something is corrupt in the GDALRasterBand
(or GDALDataset).  
 
> and the segfault appears to be inside the locking code:
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread -1210644800 (LWP 22483)]
> 0xb7856faa in GDALRasterBand::TryGetLockedBlockRef ()
> from /usr/local/lib/libgdal.so.1
> (gdb)
> 
> the pythonic attributes of gdal.Band work as usual, so i'm inclined to think
> this might be a memory corruption bug possibly due to threading-problems.
> 
> with the same files i can reproduce the problem within the python interpreter.

Anything odd about your platform? (ie. 64bit or non-x86).

I don't see anything like this with the GDAL python tools (ie pretty
much the whole autotest suite works fine), so there must be something
different between our environments. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at charter.net  Sun Aug  7 17:56:51 2005
From: woklist at charter.net (William K)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <931f8ea90508071349521512b1@mail.gmail.com>
References: <931f8ea90508071349521512b1@mail.gmail.com>
Message-ID: <54690E8C-30AD-4131-84E0-51B6B3F29355@charter.net>

Oh, blast!  I just uploaded binaries to my site based on this  
morning's CVS.  Other than the version, any significant changes from  
this morning to the beta that I should be worried about?


On Aug 7, 2005, at 3:49 PM, Frank Warmerdam wrote:

> Folks,
>
> In lead up to a GDAL 1.3.0 release, I have prepared a first beta
> release.  It is available at:
>
>   http://www.gdal.org/dl/gdal-1.3.0b1.tar.gz
> or
>   http://www.gdal.org/dl/gdal130b1.zip
>
> Check the NEWS file for updates since 1.2.6, in March, which are
> plentiful.  Included in this package are "pre-generated" swig bindings
> for Python using the "next generation" swig files Kevin and Howard
> have been working on.  However, for now the default is still the old
> bindings.
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro

From fwarmerdam at gmail.com  Sun Aug  7 18:34:09 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <54690E8C-30AD-4131-84E0-51B6B3F29355@charter.net>
References: <931f8ea90508071349521512b1@mail.gmail.com>
	<54690E8C-30AD-4131-84E0-51B6B3F29355@charter.net>
Message-ID: <931f8ea905080715346992d2c2@mail.gmail.com>

On 8/7/05, William K <woklist@charter.net> wrote:
> Oh, blast!  I just uploaded binaries to my site based on this
> morning's CVS.  Other than the version, any significant changes from
> this morning to the beta that I should be worried about?

William, 

Nope.  Nothing of substance changed other than committing the swig "ng"
bindings in CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at charter.net  Sun Aug  7 20:10:36 2005
From: woklist at charter.net (William K)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GIS Libs for Mac OS X (GDAL/OGR) updated
Message-ID: <DD13C387-5A5C-473D-A67D-A24D45472143@charter.net>

An update for my GIS Libs package for Mac OS X.


The main attraction here is GDAL/OGR.  Now at 1.3.0b1 (really CVS  
from this morning).  Recently added Xerces GML support.

Raster support (from gdalinfo --formats): VRT, GTiff, NITF, HFA,  
SAR_CEOS, CEOS, ELAS, AIG, AAIGrid, SDTS, OGDI, DTED, PNG, JPEG, MEM,  
JDEM, GIF, ESAT, FITS, BSB, XPM, BMP, AirSAR, RS2, PCIDSK, ILWIS,  
GMT, netCDF, HDF4, HDF4Image, PNM, DOQ1, DOQ2, ENVI, EHdr, PAux, MFF,  
MFF2, FujiBAS, GSC, FAST, BT, LAN, CPG, IDA, NDF, JPEG2000 (GeoJP2),  
L1B, FIT, RMF, USGSDEM, GXF, GRASS Rasters

Vector support (from ogrinfo --formats): ESRI Shapefile, UK .NTF,  
SDTS, TIGER, S57, MapInfo, DGN, VRT, AVCBin, REC, Memory, CSV, GML,  
Interlis 1, Interlis 2, OGDI, PostgreSQL, MySQL

PostGIS and MySQL are linked statically, so you don't need them on  
the same Mac as GIS Libs.  NetDCF and HDF are also linked in static.   
HDF includes szip decompression support.  PROJ and GEOS support is  
also included.

I left out MrSID because it doesn't support GCC 4 (used in Tiger)  
yet.  For consistency, the Panther package doesn't include MrSID either.

ECW I'm not sure about yet - that last time I tried I couldn't get  
the ECW SDK to work.  I haven't checked in a while, so maybe it has  
improved for Mac OS X.  I will add it to GIS Libs when I can.


See my web site for this and PostGIS, PHP and MapServer installers.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.

From lists at b-open-solutions.it  Mon Aug  8 05:14:41 2005
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <931f8ea905080714565ee1ef3b@mail.gmail.com>
References: <931f8ea90508071349521512b1@mail.gmail.com>
	<200508072342.47179.lists@b-open-solutions.it>
	<931f8ea905080714565ee1ef3b@mail.gmail.com>
Message-ID: <200508081114.42094.lists@b-open-solutions.it>


Frank,

to correct my initial posting i actually take a reference to a band with 
GetBand(1) and not to the dataset it is attached to.

On Sunday 07 August 2005 23:56, Frank Warmerdam wrote:
> This does sound like something is corrupt in the GDALRasterBand
> (or GDALDataset).

any chance that the dataset reference count goes to zero if i only bring along 
the band object...

[trying...]

BINGO!

if i carry along a reference to the original dataset together the reference to 
that raster band everything works ;)

so, from the look of it the ReadAsArray method uses something from the dataset 
c++ object, but the 'pythonic' band object doesn't take a 'pythonic' 
reference to its parent dataset that gets garbage collected. is it right?

> Anything odd about your platform? (ie. 64bit or non-x86).

nope, just a dual-cpu: debian i386 k7-smp. nothing fancy.

i'm going to work around this problem, for now.

i'll try to send you a minimal sample of code that demonstrate the problem.

cheers,
alessandro

-- 
B-Open Solutions srl - http://www.bopen.it/

From fwarmerdam at gmail.com  Mon Aug  8 09:39:48 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <200508081114.42094.lists@b-open-solutions.it>
References: <931f8ea90508071349521512b1@mail.gmail.com>
	<200508072342.47179.lists@b-open-solutions.it>
	<931f8ea905080714565ee1ef3b@mail.gmail.com>
	<200508081114.42094.lists@b-open-solutions.it>
Message-ID: <931f8ea9050808063927b12a6c@mail.gmail.com>

On 8/8/05, Alessandro Amici <lists@b-open-solutions.it> wrote:
> 
> Frank,
> 
> to correct my initial posting i actually take a reference to a band with
> GetBand(1) and not to the dataset it is attached to.
> 
> On Sunday 07 August 2005 23:56, Frank Warmerdam wrote:
> > This does sound like something is corrupt in the GDALRasterBand
> > (or GDALDataset).
> 
> any chance that the dataset reference count goes to zero if i only bring along
> the band object...
> 
> [trying...]
> 
> BINGO!
> 
> if i carry along a reference to the original dataset together the reference to
> that raster band everything works ;)
> 
> so, from the look of it the ReadAsArray method uses something from the dataset
> c++ object, but the 'pythonic' band object doesn't take a 'pythonic'
> reference to its parent dataset that gets garbage collected. is it right?

 
Alessandro,

Ah, I have run into this in python scripts. It is important to keep around
a gdal.Dataset() reference till you are all done with the dataset or it
gets closed.  You are right that any gdal.Band objects ought to also
acquire a reference to the dataset, though I think that is a bit hard
for various reasons.  Mainly because bands can exist without an
explicit relationship to a dataset in some odd situations. 

If you wish, you can open a bug report in bugzilla on this issue,
and we can try to correct it in the NG bindings. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sewell at dramail.com  Mon Aug  8 10:02:43 2005
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Writing an ENVI file.
In-Reply-To: <931f8ea90508051043653ce794@mail.gmail.com>
References: <Pine.LNX.4.61.0508050940420.4170@primary-server.dramail>
	<931f8ea90508051043653ce794@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0508080949540.3347@primary-server.dramail>


Frank,
	I am working off of a CVS version from 03 Aug 2005.  My input file 
is an ENVI file with the info:

ENVI
samples = 27309
lines   = 15414
bands   = 4
header offset = 0
file type = ENVI Standard
data type = 12
interleave = bsq
sensor type = Unknown
byte order = 0
map info = {UTM, 1.000, 1.000, 672230.424, 3829409.895, 6.9000000000e-001, 
6.9000000000e-001, 42, North, WGS-84, units=Meters}
wavelength units = Unknown
band names = {
 GS Sharpen (Orthorectified (MULTI (B ) MS):03JUL05QB0100026MS_P008),
 GS Sharpen (Orthorectified (MULTI (G ) MS):03JUL05QB0100026MS_P008),
 GS Sharpen (Orthorectified (MULTI (R ) MS):03JUL05QB0100026MS_P008),
 GS Sharpen (Orthorectified (MULTI (N ) MS):03JUL05QB0100026MS_P008)}


After running it through gdalwarp with -t_srs EPSG:4326


ENVI
samples = 28018
lines   = 10180
bands   = 4
header offset = 0
file type = ENVI Standard
data type = 1
interleave = bsq
byte order = 0



Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-656-4899 x3004           Beavercreek, Ohio 45431-1608
sewell@dramail.com

On Fri, 5 Aug 2005, Frank Warmerdam wrote:

> On 8/5/05, Ken Sewell <sewell@dramail.com> wrote:
> > 
> > A co-worker is trying to use gdalwarp to warp an ENVI file into a new
> > projection.  It seems to work, but when we examine the header file it
> > seems to have lost all geotransform and coordinate system info.  From
> > searching the mailing list archives, I found that writing to envi is not
> > complete, but should at least output the coord/geo information.  Is there
> > a gotcha we need to know about?
> 
> Ken,
> 
> It looks like Lichun Wang (ITC) did a significant overhaul of the
> header writing for ENVI format very shortly after 1.2.6 release.   Are
> you using 1.2.6 or GDAL CVS?  I would encourage you to try a
> nightly snapshot if you are currently using 1.2.6.
> 
> Looking at the code, it seems it should always write out the
> geotransform information as a mapinfo line, even if the coordinate
> system is not known.  What does the generated header file look like?
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

From kruland at ku.edu  Mon Aug  8 10:53:57 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Next Generation Language Binding News
In-Reply-To: <6.2.1.2.2.20050805170553.03575e18@hobu.mail.iastate.edu>
References: <6.2.1.2.2.20050805170553.03575e18@hobu.mail.iastate.edu>
Message-ID: <42F77205.7060008@ku.edu>


Hi all,

I thought I'd add a couple of things to what Howard had said.

>
> So, to recap where we're at, ng Python bindings are backward
> compatible (however lightly tested) with existing Python bindings, C#
> has bindings that are about 90% of the way there, and PHP bindings are
> on the horizon.  Now I'm going to explain what has yet to be done.
>

The Python bindings are supposed to be completely backwards compatible. 
On my machine they pass and fail the gdalautotest suite in exactly the
same way as the standard bindings.  It should be noted that the
gdalautotest suite is intended to test the gdal library functionality
and not the script bindings.  We were just lucky that they were written
in python and hence provided enough test cases to give us a reasonable
since of security.

Even though the gdal python bindings are backward compatible, I've heard
grumblings from other python users that they wanted to use python
exceptions to indicate problems rather than testing return codes.  So
the largest deviation from the standard bindings is the implementation
of optional exception generation.  By calling:

gdal.UseExceptions()

at the top of a script, all function calls which used to return status
codes not raise an exception.  This particular piece of functionality is
very experimental and I would like feedback on its correctness.  The
default behavour of the bindings is to return status codes, and you can
switch back by calling:

gdal.DontUseExceptions()

Please note, this has not been implemented in either osr or ogr yet.

The osr ng bindings are the most incomplete.  There are is a large
number of "Set*" methods in SpatialReference which are not wrapped at all. 

If anyone decides to work on another language binding, I would suggest
the following:

1)  Throw exceptions if they are natural in the script language.  Most
languages in common use today use exceptions within their standard
libraries.  The complexity to implement the "optional exceptions" is
rather unnatural and requires some wacky typemap tricks and additional
runtime overhead.  It was only done to maintain backward compatibility
with existing python scripts.

2)  There are methods which have multiple returns.  In Python and Php,
these return lists.  I don't know how to handle this in other languages
which are not so dynamic.  Also, I don't know exactly which functions do
return multiple values.

3)  The python bindings make heavy use of keyword args for optional
arguments.  In other languages these become positional arguments.  I
haven't tried to generate JNI bindings so I don't know what this ends up
looking like in Java or other languages which don't provide "vararg"
parameter calls.

Kevin

From bill at binko.net  Mon Aug  8 13:06:11 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OGR PostGIS driver BINARY CURSOR support
In-Reply-To: <42F4CED4.6080806@rambler.ru>
References: <42F4CED4.6080806@rambler.ru>
Message-ID: <Pine.LNX.4.58.0508081305240.639@fastcat.binko.net>


Here is some timing from 330K complex multi-polygons:

[bill@fastcat gdal]$ time ogrinfo "PG:host=localhost dbname=gis user=bill port=5432" parcels > /dev/null
43.76user 5.82system 1:59.53elapsed 41%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+1406minor)pagefaults 0swaps

[bill@fastcat gdal]$ time ogrinfo "PGB:host=localhost dbname=gis user=bill port=5432" parcels > /dev/null
35.68user 5.48system 1:28.80elapsed 46%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+1331minor)pagefaults 0swaps

Bill

From JAMES.E.HOPPER at saic.com  Mon Aug  8 15:56:41 2005
From: JAMES.E.HOPPER at saic.com (James E. Hopper)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] 1.3.0b1 missing file
In-Reply-To: <200508081403.j78E37WA021585@duke.maptools.org>
References: <200508081403.j78E37WA021585@duke.maptools.org>
Message-ID: <56C76FEC-6D05-4850-B0B1-2E9E2F799A99@saic.com>

the file :
     gdal_building.html

is missin from the beta distribution.  called from index_raw.html in  
folder doc.



From fwarmerdam at gmail.com  Mon Aug  8 16:12:58 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] 1.3.0b1 missing file
In-Reply-To: <56C76FEC-6D05-4850-B0B1-2E9E2F799A99@saic.com>
References: <200508081403.j78E37WA021585@duke.maptools.org>
	<56C76FEC-6D05-4850-B0B1-2E9E2F799A99@saic.com>
Message-ID: <931f8ea9050808131214740bf7@mail.gmail.com>

On 8/8/05, James E. Hopper <JAMES.E.HOPPER@saic.com> wrote:
> the file :
>      gdal_building.html
> 
> is missin from the beta distribution.  called from index_raw.html in
> folder doc.

James, 

gdal_building.html is built from gdal_building.dox using Doxygen.
To use this you would need to have a reasonably recent Doxygen
installed on your system, and then do "make docs" in the main 
directory.

The index_raw.html is used in generating the index.html but isn't
intended to be used directly. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Tue Aug  9 15:26:11 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
	Was: Custom scenery integration
Message-ID: <ddb00j$13ak$1@osprey.mgras.de>

Hello Norman, Hello Frank,

On Tue, Aug 09, 2005 at 12:10:24PM -0400, Norman Vine wrote:

> If the following doesn't help please join us on IRC
> or ask on the GDAL mailing list so others can benefit
> from the discussion

Thanks for pointing me at the appropriate mailing list. As I'm not that
comfortable with IRC I'll chose this medium.

> FrankW  nhv: Check http://rafb.net/paste/results/PGY8bR34.html

Indeed, this is almost what I'm doing here. I just added renaming the
layers (with "-nln") in order to make it a functional equivalent of
yours. All this looks quite reasonable and 'ogr2ogr' always returns
zero. What makes me wonder is that the dump of the resulting database
is only 14 MByte in size as the respective 'v0eur' dataset is 521
MByte. Does this match your experience or do you think I missed
something relevant ?
Some old posting on this topic suggested to remove trailing dots at
filenames in the VMAP0 set - I already did that without realizing
significant change.

> FrankW  It looks ok to me too. Is he using ogdi 3.1.5?
[...]
> FrankW  Also, PostGIS 1.0 requires a very recent GDAL/OGR to work
> properly.

In any case I took the most recent releases I could find, which means
ogdi-3.1.4 and gdal-1.2.6 (besides proj-4.4.9 and geos-2.1.3).
Everything built without errors (GCC-3.4.2 on Solaris8/Sparc).

Ah, I just found out where to get ogdi-3.1.5 and check with it -
although I suspect the error is a totally different one. I'll ned to
get some debug information out of 'ogr2gr', probably it actually
doesn't read the VMAP0 contents, just the structure.

Cheers,
	Martin.


-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From fwarmerdam at gmail.com  Tue Aug  9 16:34:35 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
	Was: Custom scenery integration
In-Reply-To: <ddb00j$13ak$1@osprey.mgras.de>
References: <ddb00j$13ak$1@osprey.mgras.de>
Message-ID: <931f8ea905080913343a466e98@mail.gmail.com>

On 8/9/05, Martin Spott <Martin.Spott@mgras.net> wrote:
> > FrankW  nhv: Check http://rafb.net/paste/results/PGY8bR34.html
> 
> Indeed, this is almost what I'm doing here. I just added renaming the
> layers (with "-nln") in order to make it a functional equivalent of
> yours. All this looks quite reasonable and 'ogr2ogr' always returns
> zero. What makes me wonder is that the dump of the resulting database
> is only 14 MByte in size as the respective 'v0eur' dataset is 521
> MByte. Does this match your experience or do you think I missed
> something relevant ?
> Some old posting on this topic suggested to remove trailing dots at
> filenames in the VMAP0 set - I already did that without realizing
> significant change.

Martin,

On reflection, I think the problem is still likely to be the related to 
the naming conventions of the fileset.  Where did you get your VMAP0
dataset?   Could I suggest you grab and unpack:

  ftp://ftp.remotesensing.org/v0eur.tar.gz

With this and FWTools 0.9.9b3 I get the following for one of the layers.
Could you see if you get a similar result? 

$ ogrinfo gltp:/vrf/home/warmerda/v0eur/vmaplv0/eurnasia 'cropa@veg(*)_area' -so
ERROR 4: OGDI Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `gltp:/vrf/home/warmerda/v0eur/vmaplv0/eurnasia'
using driver `OGDI' successful.

Layer name: cropa@veg(*)_area
Geometry: Polygon
Feature Count: 44114
Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
ftc: Integer (5.0)
veg: Integer (5.0)
tile_id: Integer (5.0)
fac_id: Integer (10.0)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Tue Aug  9 17:01:15 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905080913343a466e98@mail.gmail.com>
Message-ID: <ddb5ir$gv8$1@osprey.mgras.de>

Hello Frank,

Frank Warmerdam wrote:

> Layer name: cropa@veg(*)_area
> Geometry: Polygon
> Feature Count: 44114
> Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
[...]

O.k., I prefer yours. Mine looks like this:

INFO: Open of `gltp:/vrf/home/martin/VMAP0/v0eur/vmaplv0/eurnasia'
using driver `OGDI' successful.

Layer name: cropa@veg(*)_area
Geometry: Polygon
Feature Count: 0
              ^^^
[...]


I'll grab the data from remotesensing and will report back if this
makes any difference.

Thanks,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From grevedan at hotmail.com  Tue Aug  9 18:31:21 2005
From: grevedan at hotmail.com (Dan Greve)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <931f8ea9050808063927b12a6c@mail.gmail.com>
Message-ID: <BAY102-F395E7A7512A4B0BC6F90AEC7BB0@phx.gbl>

FYI

In the root nmake.opt, the dll version number is still 12.

# Version number embedded in DLL name.
VERSION =	12



From grevedan at hotmail.com  Tue Aug  9 18:54:47 2005
From: grevedan at hotmail.com (Dan Greve)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Debugging in Visual C++ with nmake build
Message-ID: <BAY102-F2493F3DDD4812E700D14EC7BB0@phx.gbl>

Is this even possible?  I'm getting tired of maintaining a separate gdal 
project to make the makefile.vc for the entire gdal tree.  Any visual c++ 
experts? I'm using 6.0

-- dan greve
-- melbourne fl



From bfraser at geoanalytic.com  Tue Aug  9 21:11:24 2005
From: bfraser at geoanalytic.com (bfraser@geoanalytic.com)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Debugging in Visual C++ with nmake build
In-Reply-To: <BAY102-F2493F3DDD4812E700D14EC7BB0@phx.gbl>
References: <BAY102-F2493F3DDD4812E700D14EC7BB0@phx.gbl>
Message-ID: <.24.71.223.141.1123636284.squirrel@24.71.223.141>

Dan,

  A trick I've used is to insert a
     DebugBreak();
statement in the C main I want to debug and compile gdal for debug using
nmake -f makefile.vc.  When you run the app, a dialog will popup asking if
you want to abort the application (or No to debug it).  If you answer No,
the VC++ IDE will be invoked, showing the assembler code.  Click the
"Single Step" icon twice in the IDE to advance to the source code, and
dismiss the assembler window.  You can then step thru the source.

Oh yeah, to be able to compile with the DebugBreak(); you need to do
#include <windows.h>

Sounds kinda complicated, but it's not too bad once you try it.  It's also
a handy way of debugging a CGI app like Mapserver...

Brent Fraser



> Is this even possible?  I'm getting tired of maintaining a separate gdal
> project to make the makefile.vc for the entire gdal tree.  Any visual c++
> experts? I'm using 6.0
>
> -- dan greve
> -- melbourne fl



From Martin.Spott at mgras.net  Wed Aug 10 07:10:34 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905080913343a466e98@mail.gmail.com>
Message-ID: <ddcnba$16dc$1@osprey.mgras.de>

Hello Frank,

Frank Warmerdam wrote:

> On reflection, I think the problem is still likely to be the related to 
> the naming conventions of the fileset.  Where did you get your VMAP0
> dataset?   Could I suggest you grab and unpack:
> 
>   ftp://ftp.remotesensing.org/v0eur.tar.gz

This is actually identical to the dataset I used previously. The MD5
checksum of the file is different but the size as well as the contents
are the same.

> Layer name: cropa@veg(*)_area
> Geometry: Polygon
> Feature Count: 44114
> Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
[...]


This is how the 'ogrinfo' output for the complete layer looks here:

ERROR 4: OGDI Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `gltp:/vrf/home/martin/VMAP0/v0eur/vmaplv0/eurnasia'
using driver `OGDI' successful.

Layer name: cropa@veg(*)_area
Geometry: Polygon
Feature Count: 0
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
ftc: Integer (5.0)
veg: Integer (5.0)
tile_id: Integer (5.0)
fac_id: Integer (10.0)


I put a copy of the 'ogrinfo' output fo the whole v0eur dataset here:

  ftp://ftp.ihg.uni-duisburg.de/local/ogrinfo.v0eur.gz

Surprisingly the first four layers are reported to have "features", all
of the following are 'empty', but they still contain the
meta-information.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From pspencer at dmsolutions.ca  Wed Aug 10 08:41:00 2005
From: pspencer at dmsolutions.ca (Paul Spencer)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;	Was: Custom
	scenery integration
In-Reply-To: <931f8ea905080913343a466e98@mail.gmail.com>
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905080913343a466e98@mail.gmail.com>
Message-ID: <42F9F5DC.5070606@dmsolutions.ca>

Frank,

this is timely.  I'm interested in the vmap0 data also.  I downloaded 
v0sas and extracted it, then used ogrinfo that is built with the most 
recent version of FGS ... it has OGDI support (as of yesterday) and no 
core dump ;) with ogrinfo --formats, but it refuses to open the dataset 
using the syntax you listed below.  So I d/l and extracted your dataset 
and tried ... again, no joy :S

pspencer@merlin /home/common/vmap0 $ ogrinfo 
gltp:/home/common/vmap0/v0eur/vmaplv0/eurnasia 'crop@veg*_area' -so
FAILURE:
Unable to open datasource 
`gltp:/home/common/vmap0/v0eur/vmaplv0/eurnasia' with the following drivers.
   -> ESRI Shapefile
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> MapInfo File
   -> DGN
   -> VRT
   -> AVCBin
   -> REC
   -> Memory
   -> CSV
   -> GML
   -> ODBC
   -> OGDI
   -> PostgreSQL
   -> MySQL

any ideas?  Am I missing some option in OGDI?

Paul

Frank Warmerdam wrote:
> On 8/9/05, Martin Spott <Martin.Spott@mgras.net> wrote:
> 
>>>FrankW  nhv: Check http://rafb.net/paste/results/PGY8bR34.html
>>
>>Indeed, this is almost what I'm doing here. I just added renaming the
>>layers (with "-nln") in order to make it a functional equivalent of
>>yours. All this looks quite reasonable and 'ogr2ogr' always returns
>>zero. What makes me wonder is that the dump of the resulting database
>>is only 14 MByte in size as the respective 'v0eur' dataset is 521
>>MByte. Does this match your experience or do you think I missed
>>something relevant ?
>>Some old posting on this topic suggested to remove trailing dots at
>>filenames in the VMAP0 set - I already did that without realizing
>>significant change.
> 
> 
> Martin,
> 
> On reflection, I think the problem is still likely to be the related to 
> the naming conventions of the fileset.  Where did you get your VMAP0
> dataset?   Could I suggest you grab and unpack:
> 
>   ftp://ftp.remotesensing.org/v0eur.tar.gz
> 
> With this and FWTools 0.9.9b3 I get the following for one of the layers.
> Could you see if you get a similar result? 
> 
> $ ogrinfo gltp:/vrf/home/warmerda/v0eur/vmaplv0/eurnasia 'cropa@veg(*)_area' -so
> ERROR 4: OGDI Driver doesn't support update.
> Had to open data source read-only.
> INFO: Open of `gltp:/vrf/home/warmerda/v0eur/vmaplv0/eurnasia'
> using driver `OGDI' successful.
> 
> Layer name: cropa@veg(*)_area
> Geometry: Polygon
> Feature Count: 44114
> Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
> Layer SRS WKT:
> GEOGCS["NAD83",
>     DATUM["North_American_Datum_1983",
>         SPHEROID["GRS 1980",6378137,298.257222101,
>             AUTHORITY["EPSG","7019"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6269"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4269"]]
> id: Integer (10.0)
> f_code: String (5.0)
> ftc: Integer (5.0)
> veg: Integer (5.0)
> tile_id: Integer (5.0)
> fac_id: Integer (10.0)
> 
> Best regards,

-- 
+-----------------------------------------------------------------+
|Paul Spencer                           pspencer@dmsolutions.ca   |
+-----------------------------------------------------------------+
|Applications & Software Development                              |
|DM Solutions Group Inc                 http://www.dmsolutions.ca/|
+-----------------------------------------------------------------+

From Martin.Spott at mgras.net  Wed Aug 10 09:50:01 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database; Was: Custom
References: <ddb00j$13ak$1@osprey.mgras.de> <42F9F5DC.5070606@dmsolutions.ca>
Message-ID: <ddd0m8$1ehi$1@osprey.mgras.de>

Paul Spencer wrote:

> gltp:/home/common/vmap0/v0eur/vmaplv0/eurnasia 'crop@veg*_area' -so
     ^^^
You should add the driver, like:

  gltp:/vrf/home/<your directory without trailing slash>

Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From fwarmerdam at gmail.com  Wed Aug 10 10:00:53 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL 1.3.0 Beta1 Released
In-Reply-To: <BAY102-F395E7A7512A4B0BC6F90AEC7BB0@phx.gbl>
References: <931f8ea9050808063927b12a6c@mail.gmail.com>
	<BAY102-F395E7A7512A4B0BC6F90AEC7BB0@phx.gbl>
Message-ID: <931f8ea90508100700648392e5@mail.gmail.com>

On 8/9/05, Dan Greve <grevedan@hotmail.com> wrote:
> FYI
> 
> In the root nmake.opt, the dll version number is still 12.
> 
> # Version number embedded in DLL name.
> VERSION =       12

Dan,

Good point, fixed in CVS now.

Best regards, 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Wed Aug 10 10:05:09 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Injury...
Message-ID: <931f8ea9050810070544fe7b21@mail.gmail.com>

Folks,

I had a bit of a biking injury last night and it would seem both wrists 
are sprained, my right quite badly.

So writing email, and code, is quite painful and slow (all with my
left hand).  So, please be forgiving if I am slow to respond or brief for
a while.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Wed Aug 10 10:11:20 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Injury...
In-Reply-To: <931f8ea9050810070544fe7b21@mail.gmail.com>
References: <931f8ea9050810070544fe7b21@mail.gmail.com>
Message-ID: <42FA0B08.2040709@ku.edu>

Frank,

Might be time for the Left-handed Dvorak layout:
http://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard

Ksr

Frank Warmerdam wrote:

>Folks,
>
>I had a bit of a biking injury last night and it would seem both wrists 
>are sprained, my right quite badly.
>
>So writing email, and code, is quite painful and slow (all with my
>left hand).  So, please be forgiving if I am slow to respond or brief for
>a while.
>
>Best regards,
>  
>

From neteler at itc.it  Wed Aug 10 10:52:06 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
In-Reply-To: <ddb5ir$gv8$1@osprey.mgras.de>
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905080913343a466e98@mail.gmail.com>
	<ddb5ir$gv8$1@osprey.mgras.de>
Message-ID: <20050810145206.GL4033@thuille.itc.it>

On Tue, Aug 09, 2005 at 09:01:15PM +0000, Martin Spott wrote:
> Hello Frank,
> 
> Frank Warmerdam wrote:
> 
> > Layer name: cropa@veg(*)_area
> > Geometry: Polygon
> > Feature Count: 44114
> > Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
> [...]
> 
> O.k., I prefer yours. Mine looks like this:
> 
> INFO: Open of `gltp:/vrf/home/martin/VMAP0/v0eur/vmaplv0/eurnasia'
> using driver `OGDI' successful.
> 
> Layer name: cropa@veg(*)_area
> Geometry: Polygon
> Feature Count: 0
>               ^^^
> [...]
> 

Hi,

I guess that this comes from the trailing dot problem and
the upper case directories to lower case names problem.

The latest GRASS Newletter comes with an article on VMAP0/OGR:
 http://grass.itc.it/newsletter/index.php
 GRASS Newsletter vol. 3 (June 2005)
 -> http://grass.itc.it/newsletter/GRASSNews_vol3.pdf

It includes a script to fix the file name issues (see page 5).

For convenience saved here:

#file/dir name fixes:
 http://mpa.itc.it/markus/useful/srtm_vmap_article2005_script_fig3.sh

#OGR conversion to SHAPE:
 http://mpa.itc.it/markus/useful/srtm_vmap_article2005_script_fig4.sh

It should be easy to adapt the second procedure to write PG instead
of SHAPE (did that some time ago).

Cheers

 Markus


From fwarmerdam at gmail.com  Wed Aug 10 11:54:24 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
In-Reply-To: <ddb5ir$gv8$1@osprey.mgras.de>
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905080913343a466e98@mail.gmail.com>
	<ddb5ir$gv8$1@osprey.mgras.de>
Message-ID: <931f8ea905081008541ebf34d4@mail.gmail.com>

On 8/9/05, Martin Spott <Martin.Spott@mgras.net> wrote:
> Hello Frank,
> 
> Frank Warmerdam wrote:
> 
> > Layer name: cropa@veg(*)_area
> > Geometry: Polygon
> > Feature Count: 44114
> > Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
> [...]
> 
> O.k., I prefer yours. Mine looks like this:
> 
> INFO: Open of `gltp:/vrf/home/martin/VMAP0/v0eur/vmaplv0/eurnasia'
> using driver `OGDI' successful.

Martin could you try changing the vmap0 directory to lower case?
I vaguely recall a sensitivity to that in the vrf driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mpg at lizardtech.com  Wed Aug 10 11:57:45 2005
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Xerces versions?
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD123F6AFC@sea-srv-ms3.lizardtech.com>

The nmake.opt file implies that that the GML support in OGR requires
Xerces version 1.7:

  #XERCES_DIR = d:\warmerda\iii\drivers\gml\xerces-c1_7_0-win32
  #XERCES_INCLUDE = -I$(XERCES_DIR)/include
-I$(XERCES_DIR)/include/xercesc
  #XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

We're already using xerces 2.6 internally, but if I try to use that
instead of 1.7 I get linker errors of the form:

   gdal.lib(gmlreader.obj) : error LNK2019: unresolved external symbol
"__declspec(dllimport) public: __thiscall
xercesc_2_6::XMLPScanToken::XMLPScanToken(void)"
(__imp_??0XMLPScanToken@xercesc_2_6@@QAE@XZ) referenced in function
"public: __thiscall GMLReader::GMLReader(void)" (??0GMLReader@@QAE@XZ)
   gdal.lib(gmlreader.obj) : error LNK2019: unresolved external symbol
"__declspec(dllimport) public: __thiscall
xercesc_2_6::XMLPScanToken::~XMLPScanToken(void)"
(__imp_??1XMLPScanToken@xercesc_2_6@@QAE@XZ) referenced in function
"public: virtual __thiscall GMLReader::~GMLReader(void)"
(??1GMLReader@@UAE@XZ)
   [...]
   gdal.lib(gmlhandler.obj) : error LNK2019: unresolved external symbol
"__declspec(dllimport) public: virtual __thiscall
xercesc_2_6::DefaultHandler::~DefaultHandler(void)"
(__imp_??1DefaultHandler@xercesc_2_6@@UAE@XZ) referenced in function
"public: virtual __thiscall GMLHandler::~GMLHandler(void)"
(??1GMLHandler@@UAE@XZ)

I'm not sure I understand this.  I could understand the link reasonably
failing with 2.6, but these specific errors seem appear to imply
something missing from the 2.6 library itself.  Weird.  (I did verify
that if I use the 1.7 libs all is well, so I don't *think* it is
anything local to my build environment.)

Suggestions?

-mpg (mpg@lizardtech.com)


From Martin.Spott at mgras.net  Wed Aug 10 12:46:43 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de>
	<931f8ea905081008541ebf34d4@mail.gmail.com>
Message-ID: <dddb1j$1eii$1@osprey.mgras.de>

Markus Neteler wrote:

> I guess that this comes from the trailing dot problem and
> the upper case directories to lower case names problem.

Frank Warmerdam wrote:
> On 8/9/05, Martin Spott wrote:

>> INFO: Open of `gltp:/vrf/home/martin/VMAP0/v0eur/vmaplv0/eurnasia'
>> using driver `OGDI' successful.
> 
> Martin could you try changing the vmap0 directory to lower case?
> I vaguely recall a sensitivity to that in the vrf driver.

Well, you both actually made my day !!!
Apparently it's only an issue with uppercase directory names. The
'v0eur' TAR file doesn't contain uppercase letters, but I was a bit
blind and didn't realize that my own VMAP0 base directory could be an
issue as well.

It looks like the OGDI VPF driver is able to deal with the trailing
dots. I ran 'ogrinfo' over a fresh VMAP0 tree and the result looks
promising:

INFO: Open of `gltp:/vrf/home/martin/vmap0/v0eur/vmaplv0/eurnasia'
using driver `OGDI' successful.

Layer name: cropa@veg(*)_area
Geometry: Polygon
Feature Count: 44114
Extent: (-10.377182, 30.000000) - (159.805161, 68.291046)
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
ftc: Integer (5.0)
veg: Integer (5.0)
tile_id: Integer (5.0)
fac_id: Integer (10.0)


Thanks again,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From grevedan at hotmail.com  Wed Aug 10 16:25:39 2005
From: grevedan at hotmail.com (Dan Greve)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Debugging in Visual C++ with nmake build
In-Reply-To: <.24.71.223.141.1123636284.squirrel@24.71.223.141>
Message-ID: <BAY102-F6B7A6AC37F6A8B3C6ADA4C7BA0@phx.gbl>

Brent,

Interesting technique.  Not sure how you figured that one out.  I added the 
line, and rebuilt but the executable, gdaltindex.exe, does not popup a 
dialog, nor is there any output. Am I missing something?

-- dan

>From: bfraser@geoanalytic.com
>To: "Dan Greve" <grevedan@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] Debugging in Visual C++ with nmake build
>Date: Tue, 9 Aug 2005 19:11:24 -0600 (Mountain Daylight Time)
>
>Dan,
>
>   A trick I've used is to insert a
>      DebugBreak();
>statement in the C main I want to debug and compile gdal for debug using
>nmake -f makefile.vc.  When you run the app, a dialog will popup asking if
>you want to abort the application (or No to debug it).  If you answer No,
>the VC++ IDE will be invoked, showing the assembler code.  Click the
>"Single Step" icon twice in the IDE to advance to the source code, and
>dismiss the assembler window.  You can then step thru the source.
>
>Oh yeah, to be able to compile with the DebugBreak(); you need to do
>#include <windows.h>
>
>Sounds kinda complicated, but it's not too bad once you try it.  It's also
>a handy way of debugging a CGI app like Mapserver...
>
>Brent Fraser
>
>
>
> > Is this even possible?  I'm getting tired of maintaining a separate gdal
> > project to make the makefile.vc for the entire gdal tree.  Any visual 
>c++
> > experts? I'm using 6.0
> >
> > -- dan greve
> > -- melbourne fl
>
>



From bfraser at geoanalytic.com  Wed Aug 10 16:54:37 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Debugging in Visual C++ with nmake build
References: <BAY102-F6B7A6AC37F6A8B3C6ADA4C7BA0@phx.gbl>
Message-ID: <001501c59ded$b87d5a40$160002c0@shark>

Hmm. I'm not sure how I figured that our either!  Oh yeah, I had to debug
C++ ActiveX dlls called from a VB app.

I thought there must be a better way to solve your problem, so I tried
setting the exe in a project:

- make sure the gdaltindex.exe is compiled for Debug via nmake
- Invoke the VC++ 6 IDE, and create a new console app project (it doesn't
matter where or what it is named)
- Select Project -> Settings, then select the Debug tab
- Select the ">" button on the end of the "Executable for debug session" and
select browse
- Browse to your gdaltindex.exe, click Ok to dismiss Project Settings dialog
- Select Build -> Start Debug -> step Into

It should stop at the first executable line and show your source code.  And
no DebugBreak required.

Brent


----- Original Message ----- 
From: "Dan Greve" <grevedan@hotmail.com>
To: <bfraser@geoanalytic.com>
Cc: <gdal-dev@lists.maptools.org>
Sent: Wednesday, August 10, 2005 2:25 PM
Subject: Re: [Gdal-dev] Debugging in Visual C++ with nmake build


> Brent,
>
> Interesting technique.  Not sure how you figured that one out.  I added
the
> line, and rebuilt but the executable, gdaltindex.exe, does not popup a
> dialog, nor is there any output. Am I missing something?
>
> -- dan
>
> >From: bfraser@geoanalytic.com
> >To: "Dan Greve" <grevedan@hotmail.com>
> >CC: gdal-dev@lists.maptools.org
> >Subject: Re: [Gdal-dev] Debugging in Visual C++ with nmake build
> >Date: Tue, 9 Aug 2005 19:11:24 -0600 (Mountain Daylight Time)
> >
> >Dan,
> >
> >   A trick I've used is to insert a
> >      DebugBreak();
> >statement in the C main I want to debug and compile gdal for debug using
> >nmake -f makefile.vc.  When you run the app, a dialog will popup asking
if
> >you want to abort the application (or No to debug it).  If you answer No,
> >the VC++ IDE will be invoked, showing the assembler code.  Click the
> >"Single Step" icon twice in the IDE to advance to the source code, and
> >dismiss the assembler window.  You can then step thru the source.
> >
> >Oh yeah, to be able to compile with the DebugBreak(); you need to do
> >#include <windows.h>
> >
> >Sounds kinda complicated, but it's not too bad once you try it.  It's
also
> >a handy way of debugging a CGI app like Mapserver...
> >
> >Brent Fraser
> >
> >
> >
> > > Is this even possible?  I'm getting tired of maintaining a separate
gdal
> > > project to make the makefile.vc for the entire gdal tree.  Any visual
> >c++
> > > experts? I'm using 6.0
> > >
> > > -- dan greve
> > > -- melbourne fl
> >
> >
>
>


From fwarmerdam at gmail.com  Wed Aug 10 17:37:20 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Xerces versions?
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD123F6AFC@sea-srv-ms3.lizardtech.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD123F6AFC@sea-srv-ms3.lizardtech.com>
Message-ID: <931f8ea905081014376ab58282@mail.gmail.com>

On 8/10/05, Michael P. Gerlek <mpg@lizardtech.com> wrote:
> The nmake.opt file implies that that the GML support in OGR requires
> Xerces version 1.7:
> 
>   #XERCES_DIR = d:\warmerda\iii\drivers\gml\xerces-c1_7_0-win32
>   #XERCES_INCLUDE = -I$(XERCES_DIR)/include
> -I$(XERCES_DIR)/include/xercesc
>   #XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib
> 
> We're already using xerces 2.6 internally, but if I try to use that
> instead of 1.7 I get linker errors of the form:
> 
>    gdal.lib(gmlreader.obj) : error LNK2019: unresolved external symbol
> "__declspec(dllimport) public: __thiscall
> xercesc_2_6::XMLPScanToken::XMLPScanToken(void)"
> (__imp_??0XMLPScanToken@xercesc_2_6@@QAE@XZ) referenced in function
> "public: __thiscall GMLReader::GMLReader(void)" (??0GMLReader@@QAE@XZ)
>    gdal.lib(gmlreader.obj) : error LNK2019: unresolved external symbol
> "__declspec(dllimport) public: __thiscall
> xercesc_2_6::XMLPScanToken::~XMLPScanToken(void)"
> (__imp_??1XMLPScanToken@xercesc_2_6@@QAE@XZ) referenced in function
> "public: virtual __thiscall GMLReader::~GMLReader(void)"
> (??1GMLReader@@UAE@XZ)
>    [...]
>    gdal.lib(gmlhandler.obj) : error LNK2019: unresolved external symbol
> "__declspec(dllimport) public: virtual __thiscall
> xercesc_2_6::DefaultHandler::~DefaultHandler(void)"
> (__imp_??1DefaultHandler@xercesc_2_6@@UAE@XZ) referenced in function
> "public: virtual __thiscall GMLHandler::~GMLHandler(void)"
> (??1GMLHandler@@UAE@XZ)
> 
> I'm not sure I understand this.  I could understand the link reasonably
> failing with 2.6, but these specific errors seem appear to imply
> something missing from the 2.6 library itself.  Weird.  (I did verify
> that if I use the 1.7 libs all is well, so I don't *think* it is
> anything local to my build environment.)

Michael,

I just tried a build with Xerces 2.6 on win32, and had no problem.
This was with the pre-built msvc6 binaries from the Xerces web site.#
Uncomment for Xerces based GML support.  My nmake.opt entries looked
like:

XERCES_DIR =	c:\warmerda\supportlibs\xerces-c_2_6_0
XERCES_INCLUDE = -I$(XERCES_DIR)/include -I$(XERCES_DIR)/include/xercesc
XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_2.lib

I'm not sure why you are running into problems.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bt at ccgis.de  Thu Aug 11 07:30:14 2005
From: bt at ccgis.de (Benjamin Thelen)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal > 1.2.4: configure fails on FreeBSD
Message-ID: <42FB36C6.7090000@ccgis.de>

Hello list,


since version 1.2.4 I am not able to configure gdal successfully on 
FreeBSD 4.11 and 5.4 boxes, on which I have installed geos-2.0.1 from 
ports (which should be sufficient, I assume). Please see the error 
messages below.



- gdal-1.2.6
.
.
.
checking for geos-config... /usr/local/bin/geos-config
./configure.lineno: 25342: Syntax error: Bad substitution


- gdal-1.2.5
.
.
.
checking for geos-config... /usr/local/bin/geos-config
./configure.lineno: 25342: Syntax error: Bad substitution


- gdal-1.2.4
.
.
.
checking for geos-config... /usr/local/bin/geos-config
./configure.lineno: 25342: Syntax error: Bad substitution




I tried to configure --without-geos respectively --without-mysql, but 
that hat no effect.


I also had a look into the files "configure" and "configure.lineno" on 
the specified lines and into config.log, but that all did not help (me 
;-)). Google didn't help at all :-(.


If you need some more information, like log-files or so, I'll send them 
immediately.


Can you give me some hints. I'd appreciate your help very much.


Kind Regards,
Benjamin Thelen

---------------------------------
CCGIS GbR - Bonn
http://www.ccgis.de



From fwarmerdam at gmail.com  Thu Aug 11 10:24:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal > 1.2.4: configure fails on FreeBSD
In-Reply-To: <42FB36C6.7090000@ccgis.de>
References: <42FB36C6.7090000@ccgis.de>
Message-ID: <931f8ea90508110724229818ed@mail.gmail.com>

On 8/11/05, Benjamin Thelen <bt@ccgis.de> wrote:
> Hello list,
> 
> 
> since version 1.2.4 I am not able to configure gdal successfully on
> FreeBSD 4.11 and 5.4 boxes, on which I have installed geos-2.0.1 from
> ports (which should be sufficient, I assume). Please see the error
> messages below.

Benjamin,

I think this was corrected post 1.2.6.  Could you try the 1.3.0beta
source now available?

The challenge with freebsd is to avoid any bash specific issues in
the configure script.  Since my /bin/sh is usually bash I don't often
notice these issues.  That is one reason why it is so important that
folks on slightly less common platforms, like freebsd, try the betas.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bt at ccgis.de  Thu Aug 11 14:16:06 2005
From: bt at ccgis.de (Benjamin Thelen)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal > 1.2.4: configure fails on FreeBSD
In-Reply-To: <931f8ea90508110724229818ed@mail.gmail.com>
References: <42FB36C6.7090000@ccgis.de>
	<931f8ea90508110724229818ed@mail.gmail.com>
Message-ID: <42FB95E6.1000401@ccgis.de>

Frank Warmerdam wrote:
> On 8/11/05, Benjamin Thelen <bt@ccgis.de> wrote:
> 
>>Hello list,
>>
>>
>>since version 1.2.4 I am not able to configure gdal successfully on
>>FreeBSD 4.11 and 5.4 boxes, on which I have installed geos-2.0.1 from
>>ports (which should be sufficient, I assume). Please see the error
>>messages below.
> 
> 
> Benjamin,
> 
> I think this was corrected post 1.2.6.  Could you try the 1.3.0beta
> source now available?
> 
> The challenge with freebsd is to avoid any bash specific issues in
> the configure script.  Since my /bin/sh is usually bash I don't often
> notice these issues.  That is one reason why it is so important that
> folks on slightly less common platforms, like freebsd, try the betas.
> 
> Best regards,


Hello Frank,


the 1.3.0beta configure script runs successfully on FreeBSD 4.11 and 
5.4, but building fails on both, please see the output below. I don't 
have geotiff installed, but I have tiff-3.7.3 installed from ports on 
both boxes. So, I don't understand what it's about this "xtiffio.h:10: 
tiffio.h: No such file or directory".


Using a bash solves the 1.2.6 (and I assume, 1.2.4 and 1.2.5) issue!


If you need more information, please feel free to drop a mail!


Best Regards,
Ben



- FreeBSD 4.11


  g++ -c -I../port -I../gcore -I../alg -I../ogr -I../ogr/ogrsf_frmts 
-Wall -O2 -D 
                   FRMT_gxf -DFRMT_gtiff -DFRMT_hfa -DFRMT_aigrid 
-DFRMT_aaigrid -DFRMT_ceos -DFRMT 
                                        _ceos2 -DFRMT_iso8211 -DFRMT_xpm 
-DFRMT_sdts -DFRMT_raw -DFRMT_dted -DFRMT_mem - 
                                                      DFRMT_jdem 
-DFRMT_envisat -DFRMT_elas -DFRMT_fit -DFRMT_vrt -DFRMT_usgsdem -DFRM 
 
     T_l1b -DFRMT_nitf -DFRMT_bmp -DFRMT_pcidsk -DFRMT_airsar -DFRMT_rs2 
-DFRMT_ilwis 
                    -DFRMT_rmf -DFRMT_bsb -DFRMT_jpeg2000 -DFRMT_hdf4 
-DFRMT_gif -DFRMT_jpeg -DFRMT 
                                    _png "-DGDAL_FORMATS=gxf gtiff hfa 
aigrid aaigrid ceos ceos2 iso8211 xpm sdts ra 
                                                    w dted mem jdem 
envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwi 
                                                                       s 
rmf bsb jpeg2000 hdf4 gif jpeg png " gdalallregister.cpp -o 
o/gdalallregister. 
                         o >/dev/null 2>&1
gmake -C gxf install-obj
gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/gxf'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port 
-I../../gcore 
                     -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/gxfdat 
                                      aset.o gxfdataset.cpp
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxfdataset.cpp  -fPIC 
-DPIC -o ../o/.libs/gxfdataset.o
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxfdataset.cpp -o 
../o/gxfdataset.o >/dev/null 2>&1
/bin/sh ../../libtool --mode=compile gcc -Wall  -O2   -I../../port 
-I../../gcore 
                     -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/gxfope 
                                      n.o gxfopen.c
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxfopen.c  -fPIC -DPIC -o 
../o/.libs/gxfopen.o
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxfopen.c -o 
../o/gxfopen.o >/dev/null 2>&1
/bin/sh ../../libtool --mode=compile gcc -Wall  -O2   -I../../port 
-I../../gcore 
                     -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/gxf_pr 
                                      oj4.o gxf_proj4.c
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_proj4.c  -fPIC -DPIC 
-o ../o/.libs/gxf_proj4.o
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_proj4.c -o 
../o/gxf_proj4.o >/dev/null 2>&1
/bin/sh ../../libtool --mode=compile gcc -Wall  -O2   -I../../port 
-I../../gcore 
                     -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/gxf_og 
                                      cwkt.o gxf_ogcwkt.c
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_ogcwkt.c  -fPIC -DPIC 
-o ../o/.libs/gxf_ogcwkt.o
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_ogcwkt.c -o 
../o/gxf_ogcwkt.o >/dev/null 2>&1
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gxf'
gmake -C gtiff install-obj
gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/gtiff'
(cd libgeotiff; gmake install-obj)
gmake[3]: Entering directory `/data/src/gdal-1.3.0b1/frmts/gtiff/libgeotiff'
/bin/sh ../../../libtool --mode=compile gcc -c -I../../../port -Wall 
-O2   xtif 
                 f.c -o ../../o/xtiff.o
  gcc -c -I../../../port -Wall -O2 xtiff.c  -fPIC -DPIC -o 
../../o/.libs/xtiff.o
In file included from xtiff.c:17:
xtiffio.h:10: tiffio.h: No such file or directory
gmake[3]: *** [../../o/xtiff.o] Fehler 1
gmake[3]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gtiff/libgeotiff'
gmake[2]: *** [lib-geotiff] Fehler 2
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gtiff'
gmake[1]: *** [gtiff-install-obj] Fehler 2
gmake[1]: Leaving directory `/data/src/gdal-1.3.0b1/frmts'
gmake: *** [frmts-target] Fehler 2







- FreeBSD 5.4



  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_ogcwkt.c  -fPIC -DPIC 
-o ../o/.libs/gxf_ogcwkt.o
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/og 
                     rsf_frmts -I../../port -c gxf_ogcwkt.c -o 
../o/gxf_ogcwkt.o >/dev/null 2>&1
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gxf'
gmake -C gtiff install-obj
gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/gtiff'
(cd libgeotiff; gmake install-obj)
gmake[3]: Entering directory `/data/src/gdal-1.3.0b1/frmts/gtiff/libgeotiff'
/bin/sh ../../../libtool --mode=compile gcc -c -I../../../port -Wall 
-O2   xtif 
                 f.c -o ../../o/xtiff.o
  gcc -c -I../../../port -Wall -O2 xtiff.c  -fPIC -DPIC -o 
../../o/.libs/xtiff.o
In file included from xtiff.c:17:
xtiffio.h:10:20: tiffio.h: No such file or directory
In file included from xtiff.c:17:
xtiffio.h:68: error: syntax error before '*' token
xtiffio.h:68: warning: type defaults to `int' in declaration of `XTIFFOpen'
xtiffio.h:68: warning: data definition has no type or storage class
xtiffio.h:69: error: syntax error before '*' token
xtiffio.h:69: warning: type defaults to `int' in declaration of 
`XTIFFFdOpen'
xtiffio.h:69: warning: data definition has no type or storage class
xtiffio.h:70: error: syntax error before '*' token
xtiffio.h:72: error: syntax error before '*' token
xtiffio.h:73: error: syntax error before "thandle_t"
xtiffio.h:77: warning: type defaults to `int' in declaration of 
`XTIFFClientOpen 
                       '
xtiffio.h:77: warning: data definition has no type or storage class
xtiff.c:30: error: syntax error before "xtiffFieldInfo"
xtiff.c:30: warning: type defaults to `int' in declaration of 
`xtiffFieldInfo'
xtiff.c:33: warning: braces around scalar initializer
xtiff.c:33: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:33: warning: excess elements in scalar initializer
xtiff.c:33: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:33: warning: excess elements in scalar initializer
xtiff.c:33: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:33: error: `TIFF_DOUBLE' undeclared here (not in a function)
xtiff.c:33: warning: excess elements in scalar initializer
xtiff.c:33: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:33: error: `FIELD_CUSTOM' undeclared here (not in a function)
xtiff.c:33: warning: excess elements in scalar initializer
xtiff.c:33: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:34: warning: excess elements in scalar initializer
xtiff.c:34: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:34: warning: excess elements in scalar initializer
xtiff.c:34: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:34: warning: excess elements in scalar initializer
xtiff.c:34: warning: (near initialization for `xtiffFieldInfo[0]')
xtiff.c:35: warning: braces around scalar initializer
xtiff.c:35: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:35: warning: excess elements in scalar initializer
xtiff.c:35: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:35: warning: excess elements in scalar initializer
xtiff.c:35: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:35: warning: excess elements in scalar initializer
xtiff.c:35: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:35: warning: excess elements in scalar initializer
xtiff.c:35: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:36: warning: excess elements in scalar initializer
xtiff.c:36: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:36: warning: excess elements in scalar initializer
xtiff.c:36: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:36: warning: excess elements in scalar initializer
xtiff.c:36: warning: (near initialization for `xtiffFieldInfo[1]')
xtiff.c:37: warning: braces around scalar initializer
xtiff.c:37: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:37: warning: excess elements in scalar initializer
xtiff.c:37: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:37: warning: excess elements in scalar initializer
xtiff.c:37: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:37: warning: excess elements in scalar initializer
xtiff.c:37: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:37: warning: excess elements in scalar initializer
xtiff.c:37: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:38: warning: excess elements in scalar initializer
xtiff.c:38: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:38: warning: excess elements in scalar initializer
xtiff.c:38: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:38: warning: excess elements in scalar initializer
xtiff.c:38: warning: (near initialization for `xtiffFieldInfo[2]')
xtiff.c:39: warning: braces around scalar initializer
xtiff.c:39: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:39: warning: excess elements in scalar initializer
xtiff.c:39: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:39: warning: excess elements in scalar initializer
xtiff.c:39: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:39: warning: excess elements in scalar initializer
xtiff.c:39: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:39: warning: excess elements in scalar initializer
xtiff.c:39: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:40: warning: excess elements in scalar initializer
xtiff.c:40: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:40: warning: excess elements in scalar initializer
xtiff.c:40: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:40: warning: excess elements in scalar initializer
xtiff.c:40: warning: (near initialization for `xtiffFieldInfo[3]')
xtiff.c:41: warning: braces around scalar initializer
xtiff.c:41: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:41: warning: excess elements in scalar initializer
xtiff.c:41: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:41: warning: excess elements in scalar initializer
xtiff.c:41: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:41: error: `TIFF_SHORT' undeclared here (not in a function)
xtiff.c:41: warning: excess elements in scalar initializer
xtiff.c:41: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:41: warning: excess elements in scalar initializer
xtiff.c:41: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:42: warning: excess elements in scalar initializer
xtiff.c:42: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:42: warning: excess elements in scalar initializer
xtiff.c:42: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:42: warning: excess elements in scalar initializer
xtiff.c:42: warning: (near initialization for `xtiffFieldInfo[4]')
xtiff.c:43: warning: braces around scalar initializer
xtiff.c:43: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:43: warning: excess elements in scalar initializer
xtiff.c:43: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:43: warning: excess elements in scalar initializer
xtiff.c:43: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:43: warning: excess elements in scalar initializer
xtiff.c:43: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:43: warning: excess elements in scalar initializer
xtiff.c:43: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:44: warning: excess elements in scalar initializer
xtiff.c:44: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:44: warning: excess elements in scalar initializer
xtiff.c:44: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:44: warning: excess elements in scalar initializer
xtiff.c:44: warning: (near initialization for `xtiffFieldInfo[5]')
xtiff.c:45: warning: braces around scalar initializer
xtiff.c:45: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:45: warning: excess elements in scalar initializer
xtiff.c:45: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:45: warning: excess elements in scalar initializer
xtiff.c:45: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:45: error: `TIFF_ASCII' undeclared here (not in a function)
xtiff.c:45: warning: excess elements in scalar initializer
xtiff.c:45: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:45: warning: excess elements in scalar initializer
xtiff.c:45: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:46: warning: excess elements in scalar initializer
xtiff.c:46: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:46: warning: excess elements in scalar initializer
xtiff.c:46: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:46: warning: excess elements in scalar initializer
xtiff.c:46: warning: (near initialization for `xtiffFieldInfo[6]')
xtiff.c:51: warning: data definition has no type or storage class
xtiff.c:54: error: syntax error before '*' token
xtiff.c: In function `_XTIFFLocalDefaultDirectory':
xtiff.c:57: warning: implicit declaration of function `TIFFMergeFieldInfo'
xtiff.c:57: error: `tif' undeclared (first use in this function)
xtiff.c:57: error: (Each undeclared identifier is reported only once
xtiff.c:57: error: for each function it appears in.)
xtiff.c: At top level:
xtiff.c:65: error: syntax error before "_ParentExtender"
xtiff.c:65: warning: type defaults to `int' in declaration of 
`_ParentExtender'
xtiff.c:65: warning: data definition has no type or storage class
xtiff.c:74: error: syntax error before '*' token
xtiff.c: In function `_XTIFFDefaultDirectory':
xtiff.c:77: error: `tif' undeclared (first use in this function)
xtiff.c:85: error: invalid type argument of `unary *'
xtiff.c: In function `_XTIFFInitialize':
xtiff.c:102: warning: implicit declaration of function `TIFFSetTagExtender'
xtiff.c: At top level:
xtiff.c:128: error: syntax error before '*' token
xtiff.c:130: warning: return type defaults to `int'
xtiff.c: In function `XTIFFOpen':
xtiff.c:131: error: `TIFF' undeclared (first use in this function)
xtiff.c:131: error: `tif' undeclared (first use in this function)
xtiff.c:138: warning: implicit declaration of function `TIFFOpen'
xtiff.c: At top level:
xtiff.c:144: error: syntax error before '*' token
xtiff.c:146: warning: return type defaults to `int'
xtiff.c: In function `XTIFFFdOpen':
xtiff.c:147: error: `TIFF' undeclared (first use in this function)
xtiff.c:147: error: `tif' undeclared (first use in this function)
xtiff.c:154: warning: implicit declaration of function `TIFFFdOpen'
xtiff.c: At top level:
xtiff.c:160: error: syntax error before '*' token
xtiff.c:161: error: syntax error before "thandle_t"
xtiff.c:166: warning: return type defaults to `int'
xtiff.c: In function `XTIFFClientOpen':
xtiff.c:167: error: `TIFF' undeclared (first use in this function)
xtiff.c:167: error: `tif' undeclared (first use in this function)
xtiff.c:174: warning: implicit declaration of function `TIFFClientOpen'
xtiff.c:174: error: `name' undeclared (first use in this function)
xtiff.c:174: error: `mode' undeclared (first use in this function)
xtiff.c:174: error: `thehandle' undeclared (first use in this function)
xtiff.c:175: error: `RWProc' undeclared (first use in this function)
xtiff.c:175: error: `RWProc2' undeclared (first use in this function)
xtiff.c:176: error: `SProc' undeclared (first use in this function)
xtiff.c:176: error: `CProc' undeclared (first use in this function)
xtiff.c:177: error: `SzProc' undeclared (first use in this function)
xtiff.c:178: error: `MFProvc' undeclared (first use in this function)
xtiff.c:178: error: `UMFProc' undeclared (first use in this function)
xtiff.c: At top level:
xtiff.c:196: error: syntax error before '*' token
xtiff.c: In function `XTIFFClose':
xtiff.c:198: warning: implicit declaration of function `TIFFClose'
xtiff.c:198: error: `tif' undeclared (first use in this function)
gmake[3]: *** [../../o/xtiff.o] Fehler 1
gmake[3]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gtiff/libgeotiff'
gmake[2]: *** [lib-geotiff] Fehler 2
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/gtiff'
gmake[1]: *** [gtiff-install-obj] Fehler 2
gmake[1]: Leaving directory `/data/src/gdal-1.3.0b1/frmts'
gmake: *** [frmts-target] Fehler 2

From fwarmerdam at gmail.com  Thu Aug 11 14:49:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal > 1.2.4: configure fails on FreeBSD
In-Reply-To: <42FB95E6.1000401@ccgis.de>
References: <42FB36C6.7090000@ccgis.de>
	<931f8ea90508110724229818ed@mail.gmail.com>
	<42FB95E6.1000401@ccgis.de>
Message-ID: <931f8ea905081111493942c4e5@mail.gmail.com>

On 8/11/05, Benjamin Thelen <bt@ccgis.de> wrote:
> the 1.3.0beta configure script runs successfully on FreeBSD 4.11 and
> 5.4, but building fails on both, please see the output below. I don't
> have geotiff installed, but I have tiff-3.7.3 installed from ports on
> both boxes. So, I don't understand what it's about this "xtiffio.h:10:
> tiffio.h: No such file or directory".

Benjamin, 

Where is the tiffio.h in your installed tree?  In /usr/include?
I imagine you can fix this by configuring GDAL with "--with-libtiff=internal"
but I would like to know why it isn't working properly with the installed
version. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dburken at comcast.net  Thu Aug 11 14:57:32 2005
From: dburken at comcast.net (dburken@comcast.net)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] make clean and config.log
Message-ID: <081120051857.8835.42FB9F9C0006FDCD000022832207300033020A059D9A0D0B@comcast.net>

Hi Frank,

Hope your injuries are healing...

Hey it would be way too cool in the "make clean" did not clean the "config.log".  Sometimes gdal's configure lines get quite lengthy.  I have learned to capture them.

Perhaps a "make clean" and a "make clobber" or "make realclean" target...

You don't have to type a response (doctor's orders).  Just something to think about.

Take care,
Dave



From Martin.Spott at mgras.net  Thu Aug 11 16:37:11 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
Message-ID: <ddgctn$10qi$1@osprey.mgras.de>

Martin Spott wrote:

> Apparently it's only an issue with uppercase directory names. The
> 'v0eur' TAR file doesn't contain uppercase letters, but I was a bit
> blind and didn't realize that my own VMAP0 base directory could be an
> issue as well.
> 
> It looks like the OGDI VPF driver is able to deal with the trailing
> dots.

I made a small test by importing three layers, first without trailing
dots and a second time with dots. I compared the database dumps of both
and they don't even differ by a single character,

Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From bt at ccgis.de  Fri Aug 12 05:04:38 2005
From: bt at ccgis.de (Benjamin Thelen)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] gdal > 1.2.4: configure fails on FreeBSD
In-Reply-To: <931f8ea905081111493942c4e5@mail.gmail.com>
References: <42FB36C6.7090000@ccgis.de>	
	<931f8ea90508110724229818ed@mail.gmail.com>	
	<42FB95E6.1000401@ccgis.de>
	<931f8ea905081111493942c4e5@mail.gmail.com>
Message-ID: <42FC6626.3080203@ccgis.de>

Frank Warmerdam wrote:
> On 8/11/05, Benjamin Thelen <bt@ccgis.de> wrote:
> 
>>the 1.3.0beta configure script runs successfully on FreeBSD 4.11 and
>>5.4, but building fails on both, please see the output below. I don't
>>have geotiff installed, but I have tiff-3.7.3 installed from ports on
>>both boxes. So, I don't understand what it's about this "xtiffio.h:10:
>>tiffio.h: No such file or directory".
> 
> 
> Benjamin, 
> 
> Where is the tiffio.h in your installed tree?  In /usr/include?
> I imagine you can fix this by configuring GDAL with "--with-libtiff=internal"
> but I would like to know why it isn't working properly with the installed
> version. 
> 
> Best regards,


Hello Frank, hello Tom,

I found tiffio.h here:

/usr/local/include/tiffio.h
/usr/local/include/tiffio.hxx



I'd like to quote an e-mail I received off-list from Tom Russo this 
morning. I suppose this would be an explanation.


"I build gdal on freebsd (4.11 and 5.4) all the time.  The important 
thing to remember is that freebsd installs almost every part of the 
ports collection into /usr/local, not /usr.

To configure gdal properly, you need to use --with-local=/usr/local
Doing so will make CFLAGS, CPPFLAGS, LDFLAGS and LIBS right to find all 
your ports-installed headers."





But it doesn't work (at least for me)!  But I also have to say, that I 
never had to supply "--with-local=/usr/local" up to gdal-1.2.6. Has 
something changed, that this is now required?


/bin/sh ../libtool --mode=compile gcc -Wall  -O2 -I/usr/local/include 
-I../por t -I../gcore -I../alg -I../ogr -I../ogr/ogrsf_frmts 
-I/usr/local/include -I../po rt  -c -o gdal_crs.o gdal_crs.c
  gcc -Wall -O2 -I/usr/local/include -I../port -I../gcore -I../alg 
-I../ogr -I../ ogr/ogrsf_frmts -I/usr/local/include -I../port -c 
gdal_crs.c  -fPIC -DPIC -o .li bs/gdal_crs.o
In file included from gdal_crs.c:80:
gdal_alg.h:112: syntax error before `GDALComputeMedianCutPCT'
gdal_alg.h:121: syntax error before `GDALDitherRGB2PCT'
gdal_alg.h:129: syntax error before `GDALChecksumImage'
gdal_alg.h:222: syntax error before `GDALSimpleImageWarp'
gdal_alg.h:232: syntax error before `GDALSuggestedWarpOutput'
gmake[1]: *** [gdal_crs.o] Fehler 1
gmake[1]: Leaving directory `/data/src/gdal-1.3.0b1/alg'
gmake: *** [core-target] Fehler 2




I then tried "--with-libtiff=internal". I think building now fails at 
another point: "jasper/jasper.h: No such file or directory". Please see 
the output below.

I found jasper.h here:
/usr/local/include/jasper/jasper.h


Hope that helps!


Thanks Frank, thanks Tom!
Ben





gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/rmf'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port 
-I../../gcore -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/rmfdataset.o rmfdataset.cpp
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c rmfdataset.cpp  -fPIC -DPIC -o 
../o/.libs/rmfdataset.o
rmfdataset.cpp: In method `enum CPLErr RMFRasterBand::IWriteBlock(int, 
int, void *)':
rmfdataset.cpp:459: warning: unused variable `GUInt32 i'
rmfdataset.cpp: In function `static class GDALDataset * 
RMFDataset::Open(GDALOpenInfo *)':
rmfdataset.cpp:1029: warning: `enum GDALDataType eType' might be used 
uninitialized in this function
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c rmfdataset.cpp -o 
../o/rmfdataset.o >/dev/null 2>&1
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/rmf'
gmake -C bsb install-obj
gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/bsb'
/bin/sh ../../libtool --mode=compile gcc -Wall  -O2   -I../../port 
-I../../gcore -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/bsb_read.o bsb_read.c
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c bsb_read.c  -fPIC -DPIC -o 
../o/.libs/bsb_read.o
  gcc -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c bsb_read.c -o ../o/bsb_read.o 
 >/dev/null 2>&1
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port 
-I../../gcore -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts 
-I../../port  -c -o ../o/bsbdataset.o bsbdataset.cpp
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c bsbdataset.cpp  -fPIC -DPIC -o 
../o/.libs/bsbdataset.o
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c bsbdataset.cpp -o 
../o/bsbdataset.o >/dev/null 2>&1
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/bsb'
gmake -C jpeg2000 install-obj
gmake[2]: Entering directory `/data/src/gdal-1.3.0b1/frmts/jpeg2000'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -g -O2 
-I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../libjasper/include  -I../../port  -c -o 
../o/jpeg2000dataset.o jpeg2000dataset.cpp
  g++ -Wall -O2 -g -O2 -I../../port -I../../gcore -I../../alg 
-I../../ogr -I../../ogr/ogrsf_frmts -I../libjasper/include -I../../port 
-c jpeg2000dataset.cpp  -fPIC -DPIC -o ../o/.libs/jpeg2000dataset.o
jpeg2000dataset.cpp:96: jasper/jasper.h: No such file or directory
gmake[2]: *** [../o/jpeg2000dataset.o] Fehler 1
gmake[2]: Leaving directory `/data/src/gdal-1.3.0b1/frmts/jpeg2000'
gmake[1]: *** [jpeg2000-install-obj] Fehler 2
gmake[1]: Leaving directory `/data/src/gdal-1.3.0b1/frmts'
gmake: *** [frmts-target] Fehler 2







From t.r.decarlo at larc.nasa.gov  Fri Aug 12 17:29:20 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
Message-ID: <00c201c59f84$e73e81e0$959877c6@cts1149>

Hey,
Can gdal import/convert the Mars Global Surveyor data? It is in something
called either NASA PDS or MOQ format. 

Thanks!


--
Thom DeCarlo
---------------------------------
Where are we going and why am I in this handbasket?




From sgillies at frii.com  Fri Aug 12 17:40:35 2005
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
In-Reply-To: <00c201c59f84$e73e81e0$959877c6@cts1149>
References: <00c201c59f84$e73e81e0$959877c6@cts1149>
Message-ID: <e4e5eba0deb7e259df246b9cbe5a4460@frii.com>

On Aug 12, 2005, at 3:29 PM, Thom DeCarlo wrote:

> Hey,
> Can gdal import/convert the Mars Global Surveyor data? It is in 
> something
> called either NASA PDS or MOQ format.
>
> Thanks!
>

Yes.

   http://zcologia.com/news/39

cheers,
Sean

--
Sean Gillies
sgillies at frii dot com
http://zcologia.com


From Klug.Stefan at gmx.de  Sun Aug 14 08:14:26 2005
From: Klug.Stefan at gmx.de (Stefan Klug)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] VRTFuncSource
Message-ID: <42FF35A2.4080707@gmx.de>

Hi everybody,

I'm fairly new to gdal and am currently stuck with the following problem:

My App needs to extract small parts of a geotiff and write them down as 
a JPEG
With an RGB Tiff my approach would be the following:
- create a VRTDataset with three bands
- plug in the three Rasterbands of my geotiff as VRTSimpleSource
- create a copy of the VRTDataset using the JPEG driver

would that be the best way to go?


with indexed geotiffs I thought I could create three inbetween buffers 
(red/green/blue) and put them into the VRTDataset using a VRTFuncSource. 
But when creating a copy of the VRTDataset using the JPEG driver I get 
the following error
VRTFuncSource::RasterIO() - Irregular request
because of nPixelSpace set to 3

Stepping through the code I realized that the JPEG driver requests 3 
interleaved bytes per Pixel. There seems to be no possibility to use the 
VRTFuncSource when writing color JPEGs as there is no GDALDataType with 
3 bytes in size, which would prevent the error?!
Wouldn't it make more sense to pass nPixelSpace to the VRTFuncSource 
callback, letting the user handle it?
There is another issue with the speed of the taken approach. When 
writing JPEGs like described above, the JPEG driver creates a buffer for 
one scanline, passes it to the first band to write the read channel, 
then passes buffer+1 to the second band and then buffer+2 to the third 
band. All bands writing to the same buffer and propably reading from one 
(interleaved) source. Wouldn't it be much more efficient to introduce a 
RGB Band which would allow a direct copy of interleaved data?

Or did I completely misunderstand the philosophy behind gdal?
Is the only working solution to write a JPEG from a indexed tiff to 
convert the Tiff to a temporarily RGB Tiff, and then writing the JPEG?

Would be great if someone could give me some insight.

Thanks a lot
    Stefan Klug

From richard.greenwood at gmail.com  Sun Aug 14 10:43:25 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] mmintrin.h for V
Message-ID: <ae9185aa05081407434cf087d3@mail.gmail.com>

In trying to build Gdal with ECW support under VC 6.0. It fails at
ecwdataset.cpp with mmintrin.h and xmmintrin.h not found.

It looks like those header files contain only type definitions and
macros, so I tried copying them from mingw, but then I get the error:
   "MMX instruction set not enabled"

I am using ECW SDK 3.1RC2, might that be my problem?

Rich 
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From bartvde at xs4all.nl  Sun Aug 14 15:22:20 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] mmintrin.h for V
In-Reply-To: <ae9185aa05081407434cf087d3@mail.gmail.com>
References: <ae9185aa05081407434cf087d3@mail.gmail.com>
Message-ID: <op.sviirivrmjfraz@bart.lan>

Hi Rich,

you need to have the Windows Platform SDK installed. Do you have that?

Best regards,
Bart

On Sun, 14 Aug 2005 16:43:25 +0200, Richard Greenwood  
<richard.greenwood@gmail.com> wrote:

> In trying to build Gdal with ECW support under VC 6.0. It fails at
> ecwdataset.cpp with mmintrin.h and xmmintrin.h not found.
>
> It looks like those header files contain only type definitions and
> macros, so I tried copying them from mingw, but then I get the error:
>    "MMX instruction set not enabled"
>
> I am using ECW SDK 3.1RC2, might that be my problem?
>
> Rich



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From richard.greenwood at gmail.com  Sun Aug 14 22:35:19 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] mmintrin.h for V
In-Reply-To: <op.sviirivrmjfraz@bart.lan>
References: <ae9185aa05081407434cf087d3@mail.gmail.com>
	<op.sviirivrmjfraz@bart.lan>
Message-ID: <ae9185aa050814193511aa9b5f@mail.gmail.com>

Hi Bart and venerable list,

Thanks, I was not familiar with the Windows Platform SDK and I did not
have it installed. After installing it, I now get:
   Cannot open include file: 'NCSJP2File.h'
And I am again suspicious that it might be related to my ECW SDK
version. I am rather a noob at building, so my apologies if I am
overlooking the obvious.

Thanks,
Rich


On 8/14/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> Hi Rich,
> 
> you need to have the Windows Platform SDK installed. Do you have that?
> 
> Best regards,
> Bart
> 
> On Sun, 14 Aug 2005 16:43:25 +0200, Richard Greenwood
> <richard.greenwood@gmail.com> wrote:
> 
> > In trying to build Gdal with ECW support under VC 6.0. It fails at
> > ecwdataset.cpp with mmintrin.h and xmmintrin.h not found.
> >
> > It looks like those header files contain only type definitions and
> > macros, so I tried copying them from mingw, but then I get the error:
> >    "MMX instruction set not enabled"
> >
> > I am using ECW SDK 3.1RC2, might that be my problem?
> >
> > Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From richard.greenwood at gmail.com  Sun Aug 14 23:27:35 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] mmintrin.h for V
Message-ID: <ae9185aa05081420272989826e@mail.gmail.com>

Got it! For the record:
1. Download and install Windows Platform SDK as discussed below.
(Thanks Bart!)
2. Download and unpack NCSSource_3-1_RC2.zip from ermapper.com and add:
  INC = ..... -IF:\projects\ECW_SDK_3.1RC2\Source\include
as noted by Brent Fraser in message:
  http://lists.maptools.org/pipermail/gdal-dev/2005-April/005506.html
(Thanks Brent!)

Best regards,
Rich


Richard Greenwood <richard.greenwood <at> gmail.com> writes:
> Hi Bart and venerable list,
> 
> Thanks, I was not familiar with the Windows Platform SDK and I did not
> have it installed. After installing it, I now get:
>    Cannot open include file: 'NCSJP2File.h'
> And I am again suspicious that it might be related to my ECW SDK
> version. I am rather a noob at building, so my apologies if I am
> overlooking the obvious.
> 
> Thanks,
> Rich
> 
> On 8/14/05, Bart van den Eijnden <bartvde <at> xs4all.nl> wrote:
> > Hi Rich,
> > 
> > you need to have the Windows Platform SDK installed. Do you have that?
> > 
> > Best regards,
> > Bart
> > 
> > On Sun, 14 Aug 2005 16:43:25 +0200, Richard Greenwood
> > <richard.greenwood <at> gmail.com> wrote:
> > 
> > > In trying to build Gdal with ECW support under VC 6.0. It fails at
> > > ecwdataset.cpp with mmintrin.h and xmmintrin.h not found.
> > >
> > > It looks like those header files contain only type definitions and
> > > macros, so I tried copying them from mingw, but then I get the error:
> > >    "MMX instruction set not enabled"
> > >
> > > I am using ECW SDK 3.1RC2, might that be my problem?
> > >
> > > Rich
> 
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From sylvain_duclos at yahoo.com  Mon Aug 15 09:49:44 2005
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
In-Reply-To: <e4e5eba0deb7e259df246b9cbe5a4460@frii.com>
Message-ID: <20050815134944.99709.qmail@web30707.mail.mud.yahoo.com>

WOW!

thxs,


Sylvain.

--- Sean Gillies <sgillies@frii.com> wrote:

> On Aug 12, 2005, at 3:29 PM, Thom DeCarlo wrote:
> 
> > Hey,
> > Can gdal import/convert the Mars Global Surveyor
> data? It is in 
> > something
> > called either NASA PDS or MOQ format.
> >
> > Thanks!
> >
> 
> Yes.
> 
>    http://zcologia.com/news/39
> 
> cheers,
> Sean
> 
> --
> Sean Gillies
> sgillies at frii dot com
> http://zcologia.com
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From stefan.paulick at urbeli.com  Mon Aug 15 10:39:21 2005
From: stefan.paulick at urbeli.com (Paulick Consult)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] AttributeError: Driver instance has no attribute
	'has_key' 
Message-ID: <20050815143921.53775.qmail@mail.bytecamp.net>

Hello list, 

when working trough http://www.gdal.org/gdal_tutorial.html,
this error came up: 

Traceback (most recent call last):
if metadata.has_key(gdal.DCAP_CREATE) \
AttributeError: Driver instance has no attribute 'has_key' 

Did I miss something or is has_key not longer available? 

code was: 

import gdal
from gdalconst import * 

filename= 'c:\data\ueb.bild'
dataset = gdal.Open( filename, GA_ReadOnly )
if dataset is None:
   print "bild nicht angelegt:",filename
   format = "GTiff"
   metadata = gdal.GetDriverByName( format )
   if metadata.has_key(gdal.DCAP_CREATE) \
      and metadata[gdal.DCAP_CREATE] == 'YES':
       print 'Driver %s supports Create() method.' % format
   if metadata.has_key(gdal.DCAP_CREATECOPY) \
      and metadata[gdal.DCAP_CREATECOPY] == 'YES':
       print 'Driver %s supports CreateCopy() method.' % format 

 

Mit freundlichen Gr??en / With kindest regards 

Stefan Paulick 


http://www.urbeli.com
mailto://stefan.paulick@urbeli.com
/*----------------------*/

From fwarmerdam at gmail.com  Mon Aug 15 10:56:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] AttributeError: Driver instance has no attribute
	'has_key'
In-Reply-To: <20050815143921.53775.qmail@mail.bytecamp.net>
References: <20050815143921.53775.qmail@mail.bytecamp.net>
Message-ID: <931f8ea90508150756559c4061@mail.gmail.com>

On 8/15/05, Paulick Consult <stefan.paulick@urbeli.com> wrote:
> Hello list,
> 
> when working trough http://www.gdal.org/gdal_tutorial.html,
> this error came up:
> 
> Traceback (most recent call last):
> if metadata.has_key(gdal.DCAP_CREATE) \
> AttributeError: Driver instance has no attribute 'has_key'
> 
> Did I miss something or is has_key not longer available?
> 
> code was:
> 
> import gdal
> from gdalconst import *
> 
> filename= 'c:\data\ueb.bild'
> dataset = gdal.Open( filename, GA_ReadOnly )
> if dataset is None:
>    print "bild nicht angelegt:",filename
>    format = "GTiff"
>    metadata = gdal.GetDriverByName( format )
>    if metadata.has_key(gdal.DCAP_CREATE) \

Stefan,

I believe the problem is that you fetch the driver by name, but
don't request the driver metadata.  Try changing:

  metadata = gdal.GetDriverByName(format)

to:

   driver = gdal.GetDriverByName(format)
   metadata = driver.GetMetadata()

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mboos at augsignals.com  Mon Aug 15 10:55:16 2005
From: mboos at augsignals.com (Mike Boos)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Compiling C# bindings for 1.3.0b1
Message-ID: <4300ACD4.4000300@augsignals.com>

Hello

This is my first time trying to compile GDAL. I am using version 1.3.0 
beta 1 on Windows, as I need to be able to use it with C#. I compiled 
the main portion without a hitch. When I go into the swig directory and 
invoke 'nmake /f makefile.vc csharp', I get the following errors:

osr_wrap.cpp(2660) : error C2065: 'ANY' : undeclared identifier
osr_wrap.cpp(2660) : error C2057: expected constant expression
osr_wrap.cpp(2660) : error C2466: cannot allocate an array of constant 
size 0
osr_wrap.cpp(2660) : error C2133: 'argout4' : unknown size
osr_wrap.cpp(2721) : error C2057: expected constant expression
osr_wrap.cpp(2721) : error C2466: cannot allocate an array of constant 
size 0
osr_wrap.cpp(2721) : error C2133: 'argout4' : unknown size
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'C:\PROGRA~1\MICROS~4\VC98\BIN\NMAKE.EXE' : 
return code '0x2'
Stop.
NMAKE : fatal error U1077: 'C:\PROGRA~1\MICROS~4\VC98\BIN\NMAKE.EXE' : 
return code '0x2'
Stop.

The errors appear to be occuring in a file that is generated by SWIG 
(I'm using version 1.3.25). Would anyone be able to help me in figuring 
out what I need to do to get this to compile?

Thanks
Mike Boos

From t.r.decarlo at larc.nasa.gov  Mon Aug 15 11:10:02 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
In-Reply-To: <20050815134944.99709.qmail@web30707.mail.mud.yahoo.com>
Message-ID: <012001c5a1ab$6959cea0$959877c6@cts1149>

Ditto!

--
Thom DeCarlo
-------------------------------------------------------
I know the Voices aren't REAL.
But, sometimes they have good ideas!

> -----Original Message-----
> From: s duclos
> Sent: Monday, August 15, 2005 9:50 AM
> To: Sean Gillies; gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Processing MOLA and MOC data?
> 
> WOW!
> 
> thxs,
> 
> 
> Sylvain.
> 
> --- Sean Gillies <sgillies@frii.com> wrote:
> 
> > On Aug 12, 2005, at 3:29 PM, Thom DeCarlo wrote:
> >
> > > Hey,
> > > Can gdal import/convert the Mars Global Surveyor
> > data? It is in
> > > something
> > > called either NASA PDS or MOQ format.
> > >
> > > Thanks!
> > >
> >
> > Yes.
> >
> >    http://zcologia.com/news/39
> >
> > cheers,
> > Sean
> >
> > --
> > Sean Gillies
> > sgillies at frii dot com
> > http://zcologia.com
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From hobu at iastate.edu  Mon Aug 15 11:12:04 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Compiling C# bindings for 1.3.0b1
In-Reply-To: <4300ACD4.4000300@augsignals.com>
References: <4300ACD4.4000300@augsignals.com>
Message-ID: <6.2.1.2.2.20050815100821.1c116f70@hobu.mail.iastate.edu>

Mike,

The C# bindings can only be compiled with Microsoft Visual Studio .NET 2003 
.  I see that you are using MSVC 6 by the VC98 directory in your make 
statement.  Any chance you are using the wrong compiler VCVARS32.BAT?

Also, as I stated before in a previous email, the C# bindings are not 
complete.  You will be able to do some basic things like open a GDAL 
Dataset and write out a copy, but you will not be able to use any functions 
that return complex types (like GetGeoTransform).  If you are really 
committed to C# and GDAL, be prepared to invest some effort in developing 
the typemap conversions to do so.  There are dummy typemaps in the 
typemaps_csharp.i file that specify what will need to be done.

Howard

At 09:55 AM 8/15/2005, Mike Boos wrote:
>Hello
>
>This is my first time trying to compile GDAL. I am using version 1.3.0 
>beta 1 on Windows, as I need to be able to use it with C#. I compiled the 
>main portion without a hitch. When I go into the swig directory and invoke 
>'nmake /f makefile.vc csharp', I get the following errors:
>
>osr_wrap.cpp(2660) : error C2065: 'ANY' : undeclared identifier
>osr_wrap.cpp(2660) : error C2057: expected constant expression
>osr_wrap.cpp(2660) : error C2466: cannot allocate an array of constant size 0
>osr_wrap.cpp(2660) : error C2133: 'argout4' : unknown size
>osr_wrap.cpp(2721) : error C2057: expected constant expression
>osr_wrap.cpp(2721) : error C2466: cannot allocate an array of constant size 0
>osr_wrap.cpp(2721) : error C2133: 'argout4' : unknown size
>NMAKE : fatal error U1077: 'cl' : return code '0x2'
>Stop.
>NMAKE : fatal error U1077: 'C:\PROGRA~1\MICROS~4\VC98\BIN\NMAKE.EXE' : 
>return code '0x2'
>Stop.
>NMAKE : fatal error U1077: 'C:\PROGRA~1\MICROS~4\VC98\BIN\NMAKE.EXE' : 
>return code '0x2'
>Stop.
>
>The errors appear to be occuring in a file that is generated by SWIG (I'm 
>using version 1.3.25). Would anyone be able to help me in figuring out 
>what I need to do to get this to compile?
>
>Thanks
>Mike Boos
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From stefan.paulick at urbeli.com  Mon Aug 15 11:22:27 2005
From: stefan.paulick at urbeli.com (Paulick Consult)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: AttributeError: Driver instance has no attribute
	'has_key'
In-Reply-To: <931f8ea90508150756559c4061@mail.gmail.com>
References: <20050815143921.53775.qmail@mail.bytecamp.net>
	<931f8ea90508150756559c4061@mail.gmail.com>
Message-ID: <20050815152227.22222.qmail@mail.bytecamp.net>

Yes, now it works. Thank you very much! 

Maybe you can correct the given python example code? 

It lives at "Techniques for Creating Files" in 
http://www.gdal.org/gdal_tutorial.html 


/Stefan 


Frank Warmerdam schrieb: 

> On 8/15/05, Paulick Consult <stefan.paulick@urbeli.com> wrote:
>> Hello list, 
>> 
>> when working trough http://www.gdal.org/gdal_tutorial.html,
>> this error came up: 
>> 
>> Traceback (most recent call last):
>> if metadata.has_key(gdal.DCAP_CREATE) \
>> AttributeError: Driver instance has no attribute 'has_key' 
>> 
>> Did I miss something or is has_key not longer available? 
>> 
>> code was: 
>> 
>> import gdal
>> from gdalconst import * 
>> 
>> filename= 'c:\data\ueb.bild'
>> dataset = gdal.Open( filename, GA_ReadOnly )
>> if dataset is None:
>>    print "bild nicht angelegt:",filename
>>    format = "GTiff"
>>    metadata = gdal.GetDriverByName( format )
>>    if metadata.has_key(gdal.DCAP_CREATE) \
> 
> Stefan, 
> 
> I believe the problem is that you fetch the driver by name, but
> don't request the driver metadata.  Try changing: 
> 
>   metadata = gdal.GetDriverByName(format) 
> 
> to: 
> 
>    driver = gdal.GetDriverByName(format)
>    metadata = driver.GetMetadata() 
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
 


Mit freundlichen Gr??en / With kindest regards 

Stefan Paulick 


http://www.urbeli.com
mailto://stefan.paulick@urbeli.com
/*----------------------*/ 


From fwarmerdam at gmail.com  Mon Aug 15 13:03:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] VRTFuncSource
In-Reply-To: <42FF35A2.4080707@gmx.de>
References: <42FF35A2.4080707@gmx.de>
Message-ID: <931f8ea9050815100316a9d7ad@mail.gmail.com>

On 8/14/05, Stefan Klug <Klug.Stefan@gmx.de> wrote:
> Hi everybody,
> 
> I'm fairly new to gdal and am currently stuck with the following problem:
> 
> My App needs to extract small parts of a geotiff and write them down as
> a JPEG
> With an RGB Tiff my approach would be the following:
> - create a VRTDataset with three bands
> - plug in the three Rasterbands of my geotiff as VRTSimpleSource
> - create a copy of the VRTDataset using the JPEG driver
> 
> would that be the best way to go?
> 
> 
> with indexed geotiffs I thought I could create three inbetween buffers
> (red/green/blue) and put them into the VRTDataset using a VRTFuncSource.
> But when creating a copy of the VRTDataset using the JPEG driver I get
> the following error
> VRTFuncSource::RasterIO() - Irregular request
> because of nPixelSpace set to 3

Stefan,

This is really just an incomplete implementation of the VRTFuncSource
class.  The VRTFuncSource::RasterIO() method should really be extended
to support reading data from funcs into a temporary buffer, and then 
re-interleaving the data into the callers buffer. 

I must confess I have no current plans to implement the VRTFuncSource
properly. If you provided clean looking patches, I would be willing to 
incorporate them. 

> Stepping through the code I realized that the JPEG driver requests 3
> interleaved bytes per Pixel. There seems to be no possibility to use the
> VRTFuncSource when writing color JPEGs as there is no GDALDataType with
> 3 bytes in size, which would prevent the error?!
> Wouldn't it make more sense to pass nPixelSpace to the VRTFuncSource
> callback, letting the user handle it?
> There is another issue with the speed of the taken approach. When
> writing JPEGs like described above, the JPEG driver creates a buffer for
> one scanline, passes it to the first band to write the read channel,
> then passes buffer+1 to the second band and then buffer+2 to the third
> band. All bands writing to the same buffer and propably reading from one
> (interleaved) source. Wouldn't it be much more efficient to introduce a
> RGB Band which would allow a direct copy of interleaved data?
> 
> Or did I completely misunderstand the philosophy behind gdal?
> Is the only working solution to write a JPEG from a indexed tiff to
> convert the Tiff to a temporarily RGB Tiff, and then writing the JPEG?

RGB images are 3 distinct bands in the GDAL model.  The RasterIO()
call supports a variety of ways of interleaving bands in work buffers,
and - in theory - drivers can provide particular interleavings quite
efficiently if implemented appropriately.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Aug 15 16:26:40 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 Released
Message-ID: <931f8ea905081513267c70c103@mail.gmail.com>

Folks,

The FWTools 0.9.9 release is now available.   FWTools is a packaged
build including recent snapshots of OpenEV, MapServer, GDAL, PROJ.4
and a variety of underlying packages.  It aims to be "cutting edge" with
recent developments and also to include as many optional formats
as practical.  It also includes a complete Python instance, and python
binding support for GDAL and MapServer. 

It should work smoothly on Windows, and most 32bit Intel Linux platforms 
regardless of native packaging system.  

More information is available at:

  http://fwtools.maptools.org/

Direct downloads are available from:

Windows:
  http://www.gdal.org/dl/fwtools/FWTools099.exe

Linux:
  http://www.gdal.org/dl/fwtools/FWTools-linux-0.9.9.tar.gz

Best regards,  
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Aug 15 17:42:52 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.0 Released
Message-ID: <931f8ea905081514427f6eed62@mail.gmail.com>

Folks,

At last, the GDAL/OGR 1.3.0 final release is out there.  

  http://www.gdal.org/dl/gdal-1.3.0.tar.gz
  http://www.gdal.org/dl/gdal130.zip

>From the NEWS file:

GDAL 1.3.0 - Overview of Changes
--------------------------------

Multithreading:
 - Lots of work done to implement support for multiple threads reading
   from distinct GDALDataset objects at the same time. 

GDALRasterBand / Persistant Auxilary Metadata (PAM):
 - Support for preserving a variety of metadata in a supporting XML file. 
 - GDALRasterBand now supports "remembering" histograms, and has a concept
   of the default histogram. 
 - GDALRasterBand now supports remembering image statistics.
 - Disabled by default (set GDAL_PAM_ENABLED=YES to turn on). 
 - Supported by *most* drivers with some caveats.

GDALCopyWords(): 
 - This function is a low level work horse for copying and converting pixel 
   data in GDAL.  It has been substantially optimized by Steve Soule (Vexcel).

Next Generation Bindings:
 - Kevin Ruland and Howard Butler are working on reworked support for 
   SWIG to generate Python, PHP, Java, C# and other language bindings for GDAL
   and OGR. 

VB6 Bindings: 
 - Now substantially complete, see VB6 directory.

HDF5 Driver: 
 - New HDF5 driver implemented by Denis Nadeau. 

RMF Driver: 
 - New driver for Raster Matrix Format by Andrey Kislev. 

MSGN (Meteosat Second Generation Native) Driver:
 - New driver implemented by Frans van der Bergh.

VRT Driver:
 - Fixed whopper of a memory leak in warped raster case.

NetCDF Driver: 
 - Preliminary CF conventions support by Denis Nadeau.

NITF Driver:
 - NITF files between 2 and 4 GB in size can now be read and written.

JPEG Driver: 
 - Added support for reading EXIF as metadata by Denis Nadeau.

DODS Driver:
 - Fixed up libdap 3.5.x compatibility.

JP2ECW (JPEG2000 ECW SDK) Driver:
 - Implemented support for new GML-in-JPEG2000 specification.
 - Implemented support for old MSI "worldfile" box. 

JP2KAK (JPEG2000 Kakadu) Driver:
 - Implemented support for new GML-in-JPEG2000 specification.
 - Implemented support for old MSI "worldfile" box. 

PCIDSK Driver: 
 - tiled files now supported for reading.
 - overviews now supported for reading.

HFA (Imagine) Driver:
 - Supports creating internal overviews in very large files. 
 - Support reading class names. 
 - Support creating compressed files. 

GeoTIFF Driver:
 - Support reading files with odd bit depths (ie. 3, 12, etc). 
 - Support 16/24bit floating point TIFFs (per Technote 3) (Andrey).
 - Support 12bit jpeg compressed imagery using libjpeg "MK1" library.

HDF4 Driver:
 - Added support for ASTER Level 1A, 1B and 2 products (Andrey). 


OGR 1.3.0 - Overview of Changes
-------------------------------

OGRGeometry:
 - WKT (and GML) encoding now attempts to preserve pretty much full double
   precision. 
 - geometries are now "coordinate dimension preserving" rather than dynamically
   figuring out dimension depending on whether Z is set.  So a geometry can
   now be 3D even if all z values are zero.  
 - Fixed up proper EMPTY geometry support per standard.

GRASS Driver:  
 - New driver for GRASS 6 vector data written by Radim Blazek. 

Interlis Driver: 
 - New driver for Swiss Interlis format from Permin Kalberer (SourcePole).

Shape Driver:
 - Fixed logic for degenerate polygons (Baumann Konstantin).
 
PostgreSQL/PostGIS Driver:
 - Implemented fast GetExtent() method (Oleg Semykin).
 - Implemented layer type from geometry_columns (Oleg Semykin).
 - Handle PostGIS 1.0 requirements for coordinate dimemsion exactness.
 - Handle EWKT type in PostGIS 1.0.
 - Generally PostGIS 0.x and 1.0 should now be supported fairly gracefully.
 - Added PostGIS "binary cursor" mode for faster geometry access.

VRT Driver:
 - Pass through attribute queries to underlying driver. 
 - Pass through spatial queries as attribute filters on the underlying layer.

S57 Driver:
 - Added concept of supporting different profiles. 
 - Added prototype AML profile support. 

MySQL Driver:
 - Fixed for FID recognition (eg. mediumint). 

GML Driver: 
 - Various fixes for generated GML correctness (Tom Kralidis).

TIGER/Line Driver:
 - Added Tiger 2004 support.

Oracle Driver:
 - Use VARCHAR2 for fixed size string fields. 
 - Use OCI_FID config variable when creating layers, and reading select results

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bfraser at geoanalytic.com  Mon Aug 15 18:50:27 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ogrvrtlayer.cpp(126) : error C2065: 'bSrcLayerFromSQL' :
	undeclared identifier
Message-ID: <04fe01c5a1eb$bb0f3650$160002c0@shark>

Frank,

  I just downloaded 1.3.0.  When I compile it fails at:

ogrvrtlayer.cpp(126) : error C2065: 'bSrcLayerFromSQL' : undeclared
identifier

And it doesn't seem to be in any of the includes...

(no PostGIS, MySQL, SQLite, or Oracle enabled in nmake.opt)

Brent


From fwarmerdam at gmail.com  Mon Aug 15 20:29:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: ogrvrtlayer.cpp(126) : error C2065:
	'bSrcLayerFromSQL' : undeclared identifier
In-Reply-To: <04fe01c5a1eb$bb0f3650$160002c0@shark>
References: <04fe01c5a1eb$bb0f3650$160002c0@shark>
Message-ID: <931f8ea905081517296c44fb7f@mail.gmail.com>

On 8/15/05, Brent Fraser <bfraser@geoanalytic.com> wrote:
> Frank,
> 
>   I just downloaded 1.3.0.  When I compile it fails at:
> 
> ogrvrtlayer.cpp(126) : error C2065: 'bSrcLayerFromSQL' : undeclared
> identifier
> 
> And it doesn't seem to be in any of the includes...
> 
> (no PostGIS, MySQL, SQLite, or Oracle enabled in nmake.opt)

Brent,

Stupid stupid me. 

I made last minute changes before the release, and didn't commit the 
change.  I have done so, and re-uploaded the 1.3.0 release. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Klug.Stefan at gmx.de  Tue Aug 16 04:18:19 2005
From: Klug.Stefan at gmx.de (Stefan Klug)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] MinGW Build Error gdal-1.3.0
Message-ID: <4301A14B.3060607@gmx.de>

Hi everybody,

I get a build error with MinGW under Windows.
tif_jpeg fails to compile...

My configure options are:
./configure --without-unix-stdio-64

The problem is in tif_jpeg.c line 68...

/* Define "boolean" as unsigned char, not int, per Windows custom. */
#if defined(WIN32)
# ifndef __RPCNDR_H__            /* don't conflict if rpcndr.h already 
read */
   typedef unsigned char boolean;
# endif
# define HAVE_BOOLEAN            /* prevent jmorecfg.h from redefining it */
#endif

This seems to define HAVE_BOOLEAN without boolean being defined.
If I add an #undef HAVE_BOOLEAN to the top of jmorecfg.h everything runs 
smoothly.

Is there an MinGW professional out there to give a clean solution?
It took me some time to solve this issue for the first time, would be 
great if a solution could be committed to help other MinGW users.

Also the FAQ on gdal.org might be updated, as configure does everything 
right on MinGW, except the definition of  UNIX_STDIO_64, thats why I 
added --without-unix-stdio-64

Best regards,
Stefan Klug



From nbarker at rsinc.com  Tue Aug 16 07:10:02 2005
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Arbitrary XML in JPEG2000
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E80A2AC6@bath.uk.rsinc.com>

Hi,
 
I am doing a quick prototype for creating a series of JPEG2000 image with XML metadata encoded inside the image from a series of tif files with the metadata (not geo-metadata) in a tab delimited text file.  I know it can be done :-), but I was trying to think of the quickest way to do this with GDAL.
 
In particular is there an option with within gdal_translate, to encode xml such as <test>test_value</test> from the command line, or can I do this with the python bindings?
 
I am using FWTools 0.9.9b2 on Windows.
 
Many thanks,
 
Norman Barker
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050816/3e4e6b73/attachment.html
From fwarmerdam at gmail.com  Tue Aug 16 09:06:28 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Arbitrary XML in JPEG2000
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E80A2AC6@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E80A2AC6@bath.uk.rsinc.com>
Message-ID: <931f8ea905081606061f58caab@mail.gmail.com>

On 8/16/05, Norman Barker <nbarker@rsinc.com> wrote:
>  
> Hi, 
>   
> I am doing a quick prototype for creating a series of JPEG2000 image with
> XML metadata encoded inside the image from a series of tif files with the
> metadata (not geo-metadata) in a tab delimited text file.  I know it can be
> done :-), but I was trying to think of the quickest way to do this with
> GDAL. 
>   
> In particular is there an option with within gdal_translate, to encode xml
> such as <test>test_value</test> from the command line, or can I do this with
> the python bindings? 
>   
> I am using FWTools 0.9.9b2 on Windows. 

Norman, 

There is not currently any way to accomplish this within the
JPEG2000 file.  You could write it to the file as metadata (using
Python for instance) but that would just result in it getting dumped
in the .aux.xml file, assuming you enabled the PAM feature of GDAL.

Emitting custom XML inside the JPEG2000 file wouldn't be all that
hard.  Using the ECW SDK, you can see how this is accomplished
in GDALECWCompressor::PrepareCoverageBox() in 
gdal/frmts/ecw/ecwcreatecopy.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Aug 16 10:04:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] MinGW Build Error gdal-1.3.0
In-Reply-To: <4301A14B.3060607@gmx.de>
References: <4301A14B.3060607@gmx.de>
Message-ID: <931f8ea905081607043fb252bf@mail.gmail.com>

On 8/16/05, Stefan Klug <Klug.Stefan@gmx.de> wrote:
> Hi everybody,
> 
> I get a build error with MinGW under Windows.
> tif_jpeg fails to compile...
> 
> My configure options are:
> ./configure --without-unix-stdio-64
> 
> The problem is in tif_jpeg.c line 68...
> 
> /* Define "boolean" as unsigned char, not int, per Windows custom. */
> #if defined(WIN32)
> # ifndef __RPCNDR_H__            /* don't conflict if rpcndr.h already
> read */
>    typedef unsigned char boolean;
> # endif
> # define HAVE_BOOLEAN            /* prevent jmorecfg.h from redefining it */
> #endif
> 
> This seems to define HAVE_BOOLEAN without boolean being defined.
> If I add an #undef HAVE_BOOLEAN to the top of jmorecfg.h everything runs
> smoothly.
> 
> Is there an MinGW professional out there to give a clean solution?
> It took me some time to solve this issue for the first time, would be
> great if a solution could be committed to help other MinGW users.

Stefan,

This is not really a MingW specific issue.  In various forms it
comes up in other scenarios as well.

> Also the FAQ on gdal.org might be updated, as configure does everything
> right on MinGW, except the definition of  UNIX_STDIO_64, thats why I
> added --without-unix-stdio-64

Could you provide specific text you would suggest for the MingW 
case? 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Tue Aug 16 10:05:07 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] MrSID on MapServer w/ FWTools 0.9.9
Message-ID: <ae9185aa050816070527bb7d4d@mail.gmail.com>

First, thanks Frank for the new FWTools!

Second, sorry to bother this list with such a seemingly simple
problem, but I am not able to get mapserver to display MrSID with the
FWTools 0.9.9. Gdalinfo recognizes sid files, but thus far mapserver
does not. I have set GDAL_DRIVER_PATH and also tried copying all the
dll's into the mapserver directory.

Third, I'm not trying to set up a production server, I just want to do
a quick test of MrSID performance with mapserver. In the past I found
it to be unacceptably slow when working with a large (423MB) sid file.
If anyone has recent experience to the contrary I would be interested
to hear it.

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From fwarmerdam at gmail.com  Tue Aug 16 10:24:56 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] MrSID on MapServer w/ FWTools 0.9.9
In-Reply-To: <ae9185aa050816070527bb7d4d@mail.gmail.com>
References: <ae9185aa050816070527bb7d4d@mail.gmail.com>
Message-ID: <931f8ea9050816072432a5d581@mail.gmail.com>

On 8/16/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> First, thanks Frank for the new FWTools!
> 
> Second, sorry to bother this list with such a seemingly simple
> problem, but I am not able to get mapserver to display MrSID with the
> FWTools 0.9.9. Gdalinfo recognizes sid files, but thus far mapserver
> does not. I have set GDAL_DRIVER_PATH and also tried copying all the
> dll's into the mapserver directory.
> 
> Third, I'm not trying to set up a production server, I just want to do
> a quick test of MrSID performance with mapserver. In the past I found
> it to be unacceptably slow when working with a large (423MB) sid file.
> If anyone has recent experience to the contrary I would be interested
> to hear it.

Rich, 

I have clients who with various fixes through the spring and
summer have achieved respectible, if not exceptional speed
from large MrSID files.  The fixes were quite important. 

There is still the issue that 3 passes are made over RGB files
instead of just 1. 

I don't know why things aren't working with MapServer.  I would 
assume it is something missing from the environment, a permissions
problem or a DLL not in the right place. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From BEN at Syncera-ITSolutions.NL  Tue Aug 16 10:50:10 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 and ECW
Message-ID: <s3021948.065@syncera.nl>

Hi list, Frank,

is the ECW support in FWTools 0.9.9 safe to use from Mapscript? Does it have Bill Binko's fix applied for the threading issues? Does it use ECW SDK 3.1 or 3.2?

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl



From richard.greenwood at gmail.com  Tue Aug 16 11:07:39 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] MrSID on MapServer w/ FWTools 0.9.9
In-Reply-To: <931f8ea9050816072432a5d581@mail.gmail.com>
References: <ae9185aa050816070527bb7d4d@mail.gmail.com>
	<931f8ea9050816072432a5d581@mail.gmail.com>
Message-ID: <ae9185aa05081608073a02656e@mail.gmail.com>

On 8/16/05, Frank Warmerdam <fwarmerdam@gmail.com> wrote:
> On 8/16/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> > First, thanks Frank for the new FWTools!
> >
> > Second, sorry to bother this list with such a seemingly simple
> > problem, but I am not able to get mapserver to display MrSID with the
> > FWTools 0.9.9. Gdalinfo recognizes sid files, but thus far mapserver
> > does not. I have set GDAL_DRIVER_PATH and also tried copying all the
> > dll's into the mapserver directory.
> >
> > Third, I'm not trying to set up a production server, I just want to do
> > a quick test of MrSID performance with mapserver. In the past I found
> > it to be unacceptably slow when working with a large (423MB) sid file.
> > If anyone has recent experience to the contrary I would be interested
> > to hear it.
> 
> Rich,
> 
> I have clients who with various fixes through the spring and
> summer have achieved respectible, if not exceptional speed
> from large MrSID files.  The fixes were quite important.
> 
> There is still the issue that 3 passes are made over RGB files
> instead of just 1.
> 
> I don't know why things aren't working with MapServer.  I would
> assume it is something missing from the environment, a permissions
> problem or a DLL not in the right place.

Thanks, I'll keep working on it. Sometimes I miss the obvious, so I
figured I'd ask before I spent more time chasing DLLs, etc.

Regarding my past performace issue with MrSID and mapserver -  I have
a 95930x104860 RGB sid that displayed quite quickly at full extent,
but the cloaser the user zoomed in, the slower it got. However, this
was with mapserver and gdal builds of a year or more ago.
Unfortunately, I still have the same 95930x104860 sid, and thus the
new FWTools 0.9.9 caught my eye as a possible solution to displaying
this ugly file.

As always, thanks for your prompt and insightful rplies.

Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From fwarmerdam at gmail.com  Tue Aug 16 11:16:53 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 and ECW
In-Reply-To: <s3021948.065@syncera.nl>
References: <s3021948.065@syncera.nl>
Message-ID: <931f8ea905081608161ebf4645@mail.gmail.com>

On 8/16/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list, Frank,
> 
> is the ECW support in FWTools 0.9.9 safe to use from Mapscript? Does it have Bill Binko's fix applied for the threading issues? Does it use ECW SDK 3.1 or 3.2?

Bart,

It seems the ECW SDK in FWTools for Linux is somewhat out of date,
and may have some problems with hanging.  I have held back on 
updating till the next ECW SDK version is related.

Sorry...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From BEN at Syncera-ITSolutions.NL  Tue Aug 16 11:22:25 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 and ECW
Message-ID: <s30220e2.099@syncera.nl>

Hi Frank,

you mention Linux, but does this also apply to the Windows version?

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> fwarmerdam@gmail.com 08/16/05 05:16pm >>>
On 8/16/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list, Frank,
> 
> is the ECW support in FWTools 0.9.9 safe to use from Mapscript? Does it have Bill Binko's fix applied for the threading issues? Does it use ECW SDK 3.1 or 3.2?

Bart,

It seems the ECW SDK in FWTools for Linux is somewhat out of date,
and may have some problems with hanging.  I have held back on 
updating till the next ECW SDK version is related.

Sorry...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fwarmerdam at gmail.com  Tue Aug 16 11:28:48 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 and ECW
In-Reply-To: <s30220e2.000@syncera.nl>
References: <s30220e2.000@syncera.nl>
Message-ID: <931f8ea905081608283e699d6c@mail.gmail.com>

On 8/16/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi Frank,
> 
> you mention Linux, but does this also apply to the Windows version?

Bart,

I think I am using stock ECW library binaries from ERMapper and they
don't have the linux problems on win32. I think they are safe for any
use. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bill at binko.net  Tue Aug 16 11:51:28 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] FWTools 0.9.9 and ECW
In-Reply-To: <931f8ea905081608283e699d6c@mail.gmail.com>
References: <s30220e2.000@syncera.nl>
	<931f8ea905081608283e699d6c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508161145060.16039@fastcat.binko.net>

On Tue, 16 Aug 2005, Frank Warmerdam wrote:

> On 8/16/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> > Hi Frank,
> > 
> > you mention Linux, but does this also apply to the Windows version?
> 
> Bart,
> 
> I think I am using stock ECW library binaries from ERMapper and they
> don't have the linux problems on win32. I think they are safe for any
> use. 

While I have not tested ECW on Win32, I can explain what the problem and 
solution were so that Frank can guess whether he has a problem.

The problem was an uninitialized boolean variable (that should have
defaulted to false or 0 ).  When build with -g (debugging) on Linux (and
most *nix's), that variable will be set to 0 as the compiler includes
memsets to start all variables at 0.  When compiled with -O2 (or any of 
the -O's) for optimization, those memsets are removed and the value will 
have a random value.

The code that waited for running threads was expecting that to start at 
zero and was not letting the process die (or the library call return).

So, depending on how FWTools was build (-g or -O) and depending on how 
Win32 initializes memory, you might or might not have a problem :)

Tom has assured us that this will be in libECW Real Soon Now (TM) so 
hopefully, Frank will put out a new FWTools when that happens.

Bill

From dem at acri-st.fr  Wed Aug 17 05:32:15 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Shape Polygon to Line
Message-ID: <6.1.1.1.0.20050817112250.0254fa48@pop3>

Hi,

I try to translate a polygon shapefile to a line shapefile with ogr2ogr ; 
I've tried
ogr2ogr -nlt LINESTRING -lco SHPT=ARC Austrialine.shp Austria.shp
but it returns this error :
ERROR 1: Attempt to write non-linestring (POLYGON) geometry to ARC type 
shapefile.
ERROR 1: Terminating translation prematurely after failed translation of 
layer Austria

Is it possible to translate polygon to line using ogr2ogr ?


thanks in advance,

Julien


From fwarmerdam at gmail.com  Wed Aug 17 10:01:29 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Shape Polygon to Line
In-Reply-To: <6.1.1.1.0.20050817112250.0254fa48@pop3>
References: <6.1.1.1.0.20050817112250.0254fa48@pop3>
Message-ID: <931f8ea905081707013ebed36e@mail.gmail.com>

On 8/17/05, Julien Demaria <dem@acri-st.fr> wrote:
> Hi,
> 
> I try to translate a polygon shapefile to a line shapefile with ogr2ogr ;
> I've tried
> ogr2ogr -nlt LINESTRING -lco SHPT=ARC Austrialine.shp Austria.shp
> but it returns this error :
> ERROR 1: Attempt to write non-linestring (POLYGON) geometry to ARC type
> shapefile.
> ERROR 1: Terminating translation prematurely after failed translation of
> layer Austria
> 
> Is it possible to translate polygon to line using ogr2ogr ?

Julien,

Sorry, not I don't think it is.  You could write a python script to
accomplish this transformation, but it would be a non-trivial
effort.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Wed Aug 17 10:03:48 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: MrSID on MapServer w/ FWTools 0.9.9
Message-ID: <ae9185aa05081707033306f4f7@mail.gmail.com>

On windows, it seems that when GDAL_DRIVER_PATH is set as an
environment variable, mapserver is not reading it, but when set in the
map file with:
   CONFIG GDAL_DRIVER_PATH "F:\FWTools0.9.9\gdal_plugins"
thing work. I have tested this on Wondows 2000 and XP, with several
variations of quoted/non-quoted, forwardSlash/backSlash,
driveLetter/noDriveLetter. Gdalinfo see the environment variable,
mapserver does not.

I must admit that the distinction between 'gdal_plugins' and 'plugins'
 had me chasing my tail for a bit.

Unfortunatley, now that mapserver/gdal is processing my sid file, I
get the following error after a few seconds:
msDrawMap(): Image handling error. Failed to draw layer named 'color2004'. 
MrSIDRasterBand::IRasterIO(): Failed to load image. mg2 somethi:
Unable to access file. GDALRasterIO() failed: drawGDAL()

Getting this file to display in mapserver is not a big deal for me, so
please don't put undue effort into addressing my problem. I am trying
to help a small rural county access some federally produced imagery.
I'd prefer not to use MrSID, but I have had mrsiddecode decoding this
file for 5.5 days now, and it's only 40% of the way thru it.

Best regards,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From fwarmerdam at gmail.com  Wed Aug 17 10:31:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: MrSID on MapServer w/ FWTools 0.9.9
In-Reply-To: <ae9185aa05081707033306f4f7@mail.gmail.com>
References: <ae9185aa05081707033306f4f7@mail.gmail.com>
Message-ID: <931f8ea9050817073179229a1f@mail.gmail.com>

On 8/17/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> On windows, it seems that when GDAL_DRIVER_PATH is set as an
> environment variable, mapserver is not reading it, but when set in the
> map file with:
>    CONFIG GDAL_DRIVER_PATH "F:\FWTools0.9.9\gdal_plugins"
> thing work. I have tested this on Wondows 2000 and XP, with several
> variations of quoted/non-quoted, forwardSlash/backSlash,
> driveLetter/noDriveLetter. Gdalinfo see the environment variable,
> mapserver does not.

Rich,

I'm not too sure why the environment variable didn't work.  Did you
set it as a system env. variable or user env. variable?  

> I must admit that the distinction between 'gdal_plugins' and 'plugins'
>  had me chasing my tail for a bit.
> 
> Unfortunatley, now that mapserver/gdal is processing my sid file, I
> get the following error after a few seconds:
> msDrawMap(): Image handling error. Failed to draw layer named 'color2004'.
> MrSIDRasterBand::IRasterIO(): Failed to load image. mg2 somethi:
> Unable to access file. GDALRasterIO() failed: drawGDAL()

The above message seems to mean that a poImageReader->read()
call failed.   It looks like the low level MrSID error message has
been truncated for some reason, perhaps by an error message length
limit in MapServer.  So it literally says "mg2 somethi"?  Funky.

I will try some experiments here to see if I can reproduce this 
behavior.  Would you mind filing a bug in bugzilla for this issue 
with the error message, and the gdalinfo report of the mrsid file
in question?  Also, could you note the extents (and render size)
of the mapserver request that lead to this problem?  I am suspecting
we may be trying to read one-too-many overview levels, since this
is an area that has changed in recent months.  
 
> Getting this file to display in mapserver is not a big deal for me, so
> please don't put undue effort into addressing my problem. I am trying
> to help a small rural county access some federally produced imagery.
> I'd prefer not to use MrSID, but I have had mrsiddecode decoding this
> file for 5.5 days now, and it's only 40% of the way thru it.

Well, I have a number of paid clients using MrSID support, so I am
keen to work out any bugs or quirks in the implementation. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Wed Aug 17 10:49:43 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Using the 1.3.0 "ng" python bindings.
Message-ID: <43034E87.5020603@ku.edu>


Hi all,

Since you're lurking here, you probably know that gdal 1.3.0 has been
officially released, and also that it contains two different python
bindings:  "Standard" and ng (next generation).  Although nobody has
blessed the term "Standard", I think it's more appropriate for now than
how I've been referring to it in the past ( "old school" or sometimes
"Frank's old bindings").  The Standard libraries are installed by
default and are still the "Officially Blessed Packages".  If you desire
to try to the ng bindings, then you will have to work a little harder.

The Standard and ng bindings cannot coexist easily on the same install. 
There are some tricks you can do to have them both and I will attempt to
describe that here.

When you install gdal-1.3.0 from source with ./configure && make
install, if configure finds a python, it will build and install the
Standard bindings in the appropriate location.  This is usually
/usr/lib/python2.4/site-packages/  (replace "2.4" with your python
version number...)  The files it installs are:

gdalconst.py
_gdalmodule.a
_gdalmodule.la
_gdalmodule.so
gdal.py
ogr.py
osr.py

Python will produce .pyc files for the .py's the first time they are loaded.

If you want to simply experiment with the ng bindings, you first need to
pick an alternative directory in which to install the python bindings. 
For the sake of discussion, lets say you want to install them in
/usr/local/gdal-ng/ and your gdal-1.3 source tree is in /tmp/gdal-1.3/. 
Then you need to do the following:

cd /tmp/gdal-1.3/swig/python
python setup.py install --prefix=/usr/local/gdal-ng/

This will put the following files in /usr/local/gdal-ng/:

gdalconst.py
_gdalconst.so
gdal.py
_gdal.so
ogr.py
_ogr.so
osr.py
_osr.so

Note: If you leave the --prefix off, these files will be installed in
/usr/lib/python2.4/site-packages and pretty much blow away the Standard
bindings.

If you want your python scripts to use the new bindings, you need to
prepend PYTHONPATH environment variable with /usr/local/gdal-ng.  To
switch back to using Standard bindings, don't export PYTHONPATH, or
remove the /usr/local/gdal-ng.

If you plan on installing the ng bindings in the standard location,
/usr/lib/python2.4/site-packages, the best thing to do is remove the
Standard binding files from this location first.  If you have a
'confused' installation, like mismatched .py and .so files, you will get
wierd errors when you first 'import gdal' in your python scripts.  The
complaints will most likely be about not being able to find symbols or
libraries.

Hope this helps.

Kevin

From BEN at Syncera-ITSolutions.NL  Wed Aug 17 11:10:27 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: MrSID on MapServer w/ FWTools 0.9.9
Message-ID: <s3036f96.008@syncera.nl>

Just a note on the environment variables.

Apache on Windows does not pick up environment variables, you need to put a SetEnv directive into the httpd.conf file. That's the way it works. IIS does pick them up.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl
>>> fwarmerdam@gmail.com 08/17/05 16:54 PM >>>
On 8/17/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> On windows, it seems that when GDAL_DRIVER_PATH is set as an
> environment variable, mapserver is not reading it, but when set in the
> map file with:
>    CONFIG GDAL_DRIVER_PATH "F:\FWTools0.9.9\gdal_plugins"
> thing work. I have tested this on Wondows 2000 and XP, with several
> variations of quoted/non-quoted, forwardSlash/backSlash,
> driveLetter/noDriveLetter. Gdalinfo see the environment variable,
> mapserver does not.

Rich,

I'm not too sure why the environment variable didn't work.  Did you
set it as a system env. variable or user env. variable?  

> I must admit that the distinction between 'gdal_plugins' and 'plugins'
>  had me chasing my tail for a bit.
> 
> Unfortunatley, now that mapserver/gdal is processing my sid file, I
> get the following error after a few seconds:
> msDrawMap(): Image handling error. Failed to draw layer named 'color2004'..
> MrSIDRasterBand::IRasterIO(): Failed to load image. mg2 somethi:
> Unable to access file. GDALRasterIO() failed: drawGDAL()

The above message seems to mean that a poImageReader->read()
call failed.   It looks like the low level MrSID error message has
been truncated for some reason, perhaps by an error message length
limit in MapServer.  So it literally says "mg2 somethi"?  Funky.

I will try some experiments here to see if I can reproduce this 
behavior.  Would you mind filing a bug in bugzilla for this issue 
with the error message, and the gdalinfo report of the mrsid file
in question?  Also, could you note the extents (and render size)
of the mapserver request that lead to this problem?  I am suspecting
we may be trying to read one-too-many overview levels, since this
is an area that has changed in recent months.  
 
> Getting this file to display in mapserver is not a big deal for me, so
> please don't put undue effort into addressing my problem. I am trying
> to help a small rural county access some federally produced imagery.
> I'd prefer not to use MrSID, but I have had mrsiddecode decoding this
> file for 5.5 days now, and it's only 40% of the way thru it.

Well, I have a number of paid clients using MrSID support, so I am
keen to work out any bugs or quirks in the implementation. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From alan at signal11.us  Wed Aug 17 11:13:42 2005
From: alan at signal11.us (Alan Ott)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] CADRG Problem
Message-ID: <43035426.2020509@signal11.us>

Hello,

I have just recently started using GDAL to view CADRG data. I have 
several sets of data, and GDAL is able to load some of them perfectly. I 
am having trouble, however, with the data I downloaded from 
http://www.aeroplanner.com/cadrg/ (click the "Sample CADRG (2.78MB)" for 
a zip file). I put one of the files here 
(http://www.signal11.us/~alan/001DR00B.LF2) for download convenience.

The files load fine in Rockware's Global Mapper software 
(http://www.rockware.com . free trial download available), but produce 
weird images in my application. The weird images I get correlate with 
images produced by OSSIM's ivew and OpenEV 1.8 In (which uses 
GDAL).terestingly, ivew and OpenEV Seem to produce very similar images 
to one another (while not correct).

You can see screenshots here:
http://www.signal11.us/~alan/openev.png (Screenshot from OpenEV)
http://www.signal11.us/~alan/globalmapper.png (Screenshot from Global 
Mapper)

I don't currently have a pressing need to be able to view these 
particular files, so consider this somewhat of a bug report, although 
it's hard to say what kind of data I may need to view in the future.

Alan.



From richard.greenwood at gmail.com  Wed Aug 17 11:17:08 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: MrSID on MapServer w/ FWTools 0.9.9
In-Reply-To: <s3036f96.006@syncera.nl>
References: <s3036f96.006@syncera.nl>
Message-ID: <ae9185aa0508170817336eb1f5@mail.gmail.com>

On 8/17/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Just a note on the environment variables.
> 
> Apache on Windows does not pick up environment variables, you need to put a SetEnv directive into the httpd.conf file. That's the way it works. IIS does pick them up.
 
> Best regards,
> Bart

Thanks for the info, I did not know that about Apache. I am on IIS,
and the PROJ_LIB variable is getting read, but not the
GDAL_DRIVER_PATH.

Best regards,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From hrz at geodata.soton.ac.uk  Wed Aug 17 11:26:04 2005
From: hrz at geodata.soton.ac.uk (hrz@geodata.soton.ac.uk)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ASCII Grid data type issue
Message-ID: <20050817152603.GA10496@geodata.soton.ac.uk>

Dear List,

I'm working with some Arc/Info ASCII Grid files which (not atypically
for this format) have NODATA values which are integers (i.e. -1 or
-9999). The actual data, however, are floats. My problem arises when
some of these files are interpreted as being of type Int16 instead of
Float32.

Looking at the code (the Open() method in aaigriddataset.cpp), this
seems to be due to the fact that if a decimal place is found in the
first kilobyte or so of code the file is determined to be Float32,
otherwise it is specified as Int16. Many of my files have a large
numer of integer NODATA values in the beginning of the file and are
therefore mistakenly identified as Int16.

My question is whether a solution exists that would not involve
altering the data and setting the NODATA values to floats. It seems
that a bullet-proof algorithm would involve checking the contents of
the entire file until either a decimal point or EOF was reached. If
the data type is known this could be specified as an option somewhere
and the above processing skipped. Is this at all practicable?

Whilst using the python API I tried to alter the DataType property of
the gdal.Band instance but this didn't have the desired result ;)

Thanks in advance for any ideas!

Kind regards,

Homme.



From fwarmerdam at gmail.com  Wed Aug 17 12:12:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] CADRG Problem
In-Reply-To: <43035426.2020509@signal11.us>
References: <43035426.2020509@signal11.us>
Message-ID: <931f8ea9050817091258f41cd9@mail.gmail.com>

On 8/17/05, Alan Ott <alan@signal11.us> wrote:
> Hello,
> 
> I have just recently started using GDAL to view CADRG data. I have
> several sets of data, and GDAL is able to load some of them perfectly. I
> am having trouble, however, with the data I downloaded from
> http://www.aeroplanner.com/cadrg/ (click the "Sample CADRG (2.78MB)" for
> a zip file). I put one of the files here
> (http://www.signal11.us/~alan/001DR00B.LF2) for download convenience.
> 
> The files load fine in Rockware's Global Mapper software
> (http://www.rockware.com . free trial download available), but produce
> weird images in my application. The weird images I get correlate with
> images produced by OSSIM's ivew and OpenEV 1.8 In (which uses
> GDAL).terestingly, ivew and OpenEV Seem to produce very similar images
> to one another (while not correct).
> 
> You can see screenshots here:
> http://www.signal11.us/~alan/openev.png (Screenshot from OpenEV)
> http://www.signal11.us/~alan/globalmapper.png (Screenshot from Global
> Mapper)
> 
> I don't currently have a pressing need to be able to view these
> particular files, so consider this somewhat of a bug report, although
> it's hard to say what kind of data I may need to view in the future.

Alan,

I have confirmed your results though I'm still not clear what is happening.
I have submitted a bug report on the issue.  You might want to add yourself
to the cc list. 

  http://bugzilla.remotesensing.org/show_bug.cgi?id=913

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Wed Aug 17 12:18:21 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ASCII Grid data type issue
In-Reply-To: <20050817152603.GA10496@geodata.soton.ac.uk>
References: <20050817152603.GA10496@geodata.soton.ac.uk>
Message-ID: <931f8ea905081709184111d40@mail.gmail.com>

On 8/17/05, hrz@geodata.soton.ac.uk <hrz@geodata.soton.ac.uk> wrote:
> Dear List,
> 
> I'm working with some Arc/Info ASCII Grid files which (not atypically
> for this format) have NODATA values which are integers (i.e. -1 or
> -9999). The actual data, however, are floats. My problem arises when
> some of these files are interpreted as being of type Int16 instead of
> Float32.
> 
> Looking at the code (the Open() method in aaigriddataset.cpp), this
> seems to be due to the fact that if a decimal place is found in the
> first kilobyte or so of code the file is determined to be Float32,
> otherwise it is specified as Int16. Many of my files have a large
> numer of integer NODATA values in the beginning of the file and are
> therefore mistakenly identified as Int16.
> 
> My question is whether a solution exists that would not involve
> altering the data and setting the NODATA values to floats. It seems
> that a bullet-proof algorithm would involve checking the contents of
> the entire file until either a decimal point or EOF was reached. If
> the data type is known this could be specified as an option somewhere
> and the above processing skipped. Is this at all practicable?

Homme,

Sort of asking people to edit their files to add an extra header, 
I don't know of any way to discover whether the files are really
floating point without scanning the whole thing, which I am loath
to do.   There is an open bug report on this issue, I believe. 

I would be happy to add logic so that an extra header indicating
type would be honoured, but that won't help people trying to use
the data for the first time, who will end up going through much of the
same pain as you. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matt.wilkie at gov.yk.ca  Wed Aug 17 12:37:21 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] ASCII Grid data type issue
In-Reply-To: <931f8ea905081709184111d40@mail.gmail.com>
References: <20050817152603.GA10496@geodata.soton.ac.uk>
	<931f8ea905081709184111d40@mail.gmail.com>
Message-ID: <430367C1.1090402@gov.yk.ca>

Maybe this is a stupid question, but wouldn't reading Nbytes past the 
first non-NODATA value work? The NODATA value is specified in the first 
few lines of the file.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From werchowyna at epf.pl  Wed Aug 17 14:25:36 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Shape Polygon to Line
References: <6.1.1.1.0.20050817112250.0254fa48@pop3>
	<931f8ea905081707013ebed36e@mail.gmail.com>
Message-ID: <00f001c5a35c$e51b0880$c2e41d3e@eustahiush>

Julien,

If that's any help for you, Grass 6.0/6.1 provides such a functionality.

v.in.ogr to import Austria

v.type input=Austria output=Austria_line type=boundary,line

v.out.ogr to export back to shapefile

Maciek

From richard.greenwood at gmail.com  Wed Aug 17 15:24:48 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: MrSID on MapServer w/ FWTools 0.9.9
In-Reply-To: <s303789a.031@syncera.nl>
References: <s303789a.031@syncera.nl>
Message-ID: <ae9185aa05081712246413be20@mail.gmail.com>

On 8/17/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Could it be that the server needs a restart to pick it up? Has the PROJ_LIB been in there longer than the other one?
> 
> Bart

Yes! In this my quick test it seemed to require a reboot (just
restarting IIS did not pick it up). Thanks very much for the
suggestion, I would never have thought of it myself. I will do a
little research on the issue.

Rich
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From daniel.wallner at bredband.net  Wed Aug 17 17:22:58 2005
From: daniel.wallner at bredband.net (Daniel Wallner)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] RIK driver
Message-ID: <20050817212258.BGQX17509.mxfep02.bredband.com@mxfep02>

Hi, 
I have added a driver for the RIK format to the CVS repository. 
The RIK format is used by the swedish organization Lantm?teriet. 
 
Only read access has been implemented, and the latest version 
of the format is not yet supported, due to lack of specifications. 
 
The driver is based on the reverse engineering of the format done 
in the TRikPanel project: 
http://sourceforge.net/projects/trikpanel 
 
There is a description of the format in the implementation file: 
gdal/frmts/rik/rikdataset.cpp 
 
Regards, 
Daniel 
 


From denis.nadeau at gmail.com  Wed Aug 17 18:26:24 2005
From: denis.nadeau at gmail.com (Denis Nadeau)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] GDAL netcdf convention CF support
Message-ID: <304163b0050817152656b8500c@mail.gmail.com>

GDAL now supports netcdf format using CF convention as specified by unidata.

http://my.unidata.ucar.edu/content/software/netcdf/conventions.hdf

The software looks if the variables lat/latitude and lon/longitude are 
presents in the netcdf file. If found, these variables are used to specify 
the georeferencing transformation.

I'd like the community to try it out and if there are some problems, let me 
know. GDAL netcdf format also works on Windows with he precompile library 
version 3.6.1-beta1 (January 2005).

Regards,
Denis Nadeau
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050817/5809b0cd/attachment.html
From d.lowe at rl.ac.uk  Thu Aug 18 05:00:18 2005
From: d.lowe at rl.ac.uk (Dominic Lowe)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <304163b0050817152656b8500c@mail.gmail.com>
References: <304163b0050817152656b8500c@mail.gmail.com>
Message-ID: <43044E22.9060402@rl.ac.uk>


Hi Denis,

I'd also done a "bit" of work on this, but I'll happily abandon my 
efforts if your driver is now in the distribution.

I had a look at your code (haven't compiled it yet) but  one thing I had 
in my driver that you might like to consider adding is a check to see if 
the file is CF compliant (or rather, a check to see if it has the CF 
"Conventions"  attribute).

Also, if I remember rightly (it's been a few months since I wrote it) 
this check should stop your netCDF driver picking up "GMT" grid files, 
which should be left to the GMT driver to deal with.

This is the check I added, with a bit of the existing code for reference:

/* -------------------------------------------------------------------- */
/*      Try opening the dataset.                                        */
/* -------------------------------------------------------------------- */
    int cdfid, dim_count, var_count;

    if( nc_open( poOpenInfo->pszFilename, NC_NOWRITE, &cdfid ) != NC_NOERR )
        return NULL;

/* 
----------------------------------------------------------------------- */
    /*This bit added by Dominic Lowe, British Atmospheric Data Centre.*/
    /*Checking for CF (Climate & Forecast) compliance:
    First check for Conventions global attribute*/
/* 
----------------------------------------------------------------------- */
        attname = (char *) malloc(NC_MAX_NAME*sizeof(char));
       if ((status = nc_get_att_text(cdfid, NC_GLOBAL, "Conventions", 
attname)) != NC_NOERR)
    {
        CPLError( CE_Warning, CPLE_AppDefined, "No Conventions global 
attribute");*/
         /* note that 'Conventions' is always capital 'C' in CF spec*/
        return NULL;
        nc_close( cdfid );
    }

    /*then check Conventions is of the form "CF-etc" eg "CF-1.0"*/
      if( attname[0] != 'C'
        || attname[1] != 'F'
        || attname[2] != '-'  )
    {
     CPLError( CE_Warning, CPLE_AppDefined, "Convention attribute did 
not match CF convention");
        return NULL;
        nc_close( cdfid );
     }
/* 
----------------------------------------------------------------------- */
    

Hope that's useful, I'll give the driver a go sometime soon.

Dominic



Denis Nadeau wrote:

> GDAL now supports netcdf format using CF convention as specified by 
> unidata.
>
>    http://my.unidata.ucar.edu/content/software/netcdf/conventions.hdf
>
> The software looks if the variables lat/latitude and lon/longitude are 
> presents in the netcdf file.  If found, these variables are used to 
> specify the georeferencing transformation.
>
> I'd like the community to try it out and if there are some problems, 
> let me know. GDAL netcdf format also works on Windows with he 
> precompile library version 3.6.1-beta1 (January 2005).
>
> Regards,
> Denis Nadeau
>


From nbarker at rsinc.com  Thu Aug 18 05:07:57 2005
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E80A2ADB@bath.uk.rsinc.com>

 

-----Original Message-----
From: owner-galeon@unidata.ucar.edu [mailto:owner-galeon@unidata.ucar.edu]On Behalf Of Denis Nadeau
Sent: Wednesday, August 17, 2005 11:26 PM
To: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
Subject: GDAL netcdf convention CF support


GDAL now supports netcdf format using CF convention as specified by unidata.

   http://my.unidata.ucar.edu/content/software/netcdf/conventions.hdf

The software looks if the variables lat/latitude and lon/longitude are presents in the netcdf file.  If found, these variables are used to specify the georeferencing transformation.

I'd like the community to try it out and if there are some problems, let me know. GDAL netcdf format also works on Windows with he precompile library version 3.6.1-beta1 (January 2005).

Regards,
Denis Nadeau
[Norman Barker] 
 
Hi,
 
this is a really exciting announcement.  I have run ncdump on my netcdf file and checked the variables, and gdalinfo picks up the lat, lon, and ozone vars ok.  It puts the z-levels in bands within the data file which is ok since that was the way that we had done it with geotiff.  It has lost the information attaching the band level to an atmospheric height.  Even if this was a comma separated index string it would be useful.    It has also lost the Time dimension stamp within the file.  Again is this could just be a metadata tag that would be great.
 
I would like to help wrap this into MapServer WCS if possible, if I am missing something with my comments above please let me know.  This is great though, is has caused great excitement in our office!

Norman 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050818/836017cf/attachment.html
From hipoxi at gmail.com  Thu Aug 18 08:07:26 2005
From: hipoxi at gmail.com (Ibrahim HIDIR)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OCI connection close !!!
Message-ID: <206242620508180507336bcf2f@mail.gmail.com>

hi,
i am ibrahim from turkey ankara,

i am using gdal 126, and oracle 9.2.0.1, i am connecting oracle with
ds = ogr.Open('OCI:harita/harita@dunya_srv',1)
and working fast and fine thnkyou, but when i can't close the
connection, i search everywhere but icoulD2t find anything about
closing the connection, i have to close the connection because in
oracle every connection staying alive until i close it, so oracle
lucks after hundreds open connection, what can i do?

thankyou


From fwarmerdam at gmail.com  Thu Aug 18 09:03:46 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:42 2007
Subject: [Gdal-dev] OCI connection close !!!
In-Reply-To: <206242620508180507336bcf2f@mail.gmail.com>
References: <206242620508180507336bcf2f@mail.gmail.com>
Message-ID: <931f8ea905081806035f73559f@mail.gmail.com>

On 8/18/05, Ibrahim HIDIR <hipoxi@gmail.com> wrote:
> hi,
> i am ibrahim from turkey ankara,
> 
> i am using gdal 126, and oracle 9.2.0.1, i am connecting oracle with
> ds = ogr.Open('OCI:harita/harita@dunya_srv',1)
> and working fast and fine thnkyou, but when i can't close the
> connection, i search everywhere but icoulD2t find anything about
> closing the connection, i have to close the connection because in
> oracle every connection staying alive until i close it, so oracle
> lucks after hundreds open connection, what can i do?

Ibrahim,

Yikes, reviewing the OCI driver cleanup code, there is no sign that
it tries to drop the connection.   I think (assume?) it is dropped 
automatically when the program terminates which I guess has been
fine for most of my use.  

Could you file a bug on this issue?  I will need to look into it at some
point when I am booted into my oracle dev environment. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mbu at endoxon.com  Thu Aug 18 09:12:33 2005
From: mbu at endoxon.com (michael buerge)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] gdal_merge MemoryError
Message-ID: <7787235.1124370753134.SLOX.WebMail.wwwrun@hermes.endoxon.com>

hi

I'm having problems joining several images using gdal_merge.
Python throws me a MemoryError. The offending file (part2.tif) is fairly
big (1GB), the error is caused as soon as gdal_merge tries to start
copying from it so I'm assuming it is related to the size. The parts
(part[0-3].tif) were created using gdal_translate.

beeing a newbie in using the gdal utilities (as well as python, for that
matter) I'm pretty stuck and any pointers that help me solve this issue
will be greatly appreciated.

system-info and the output of the command I'm trying to run are included
below.

Michael



system:
Win XP, 2G RAM
GDAL 1.3.0.0b1, FWTools 0.9.9, released 2005/08/15


From fwarmerdam at gmail.com  Thu Aug 18 09:23:34 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E80A2ADB@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E80A2ADB@bath.uk.rsinc.com>
Message-ID: <931f8ea90508180623512701db@mail.gmail.com>

On 8/18/05, Norman Barker <nbarker@rsinc.com> wrote:
> [Norman Barker]  
>   
> Hi, 
>   
> this is a really exciting announcement.  I have run ncdump on my netcdf file
> and checked the variables, and gdalinfo picks up the lat, lon, and ozone
> vars ok.  It puts the z-levels in bands within the data file which is ok
> since that was the way that we had done it with geotiff.  It has lost the
> information attaching the band level to an atmospheric height.  Even if this
> was a comma separated index string it would be useful.    It has also lost
> the Time dimension stamp within the file.  Again is this could just be a
> metadata tag that would be great. 

Norman / Denis,

I agree that attaching the dimension value(s) unrolled as bands as
band metatadata would be desirable.  
 
> I would like to help wrap this into MapServer WCS if possible, if I am
> missing something with my comments above please let me know.  This is great
> though, is has caused great excitement in our office! 

Are you interested in having GDAL write netCDF files so that 
MapServer can return netCDF files?   As far as I know, there is no
support for creation/writing in the generic netcdf module in GDAL but
it seems like it might not be that hard to implement.  

Denis, please feel free to proceed with this as you have time.

I would like to stress to everyone that Denis will not have any 
significant time to work on GDAL after the end of August, so if
you want to try out netcdf (or HDF5) support, now is the time to 
do it, and get him feedback in time to make fixes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nbarker at rsinc.com  Thu Aug 18 09:36:14 2005
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E80A2ADF@bath.uk.rsinc.com>



-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com]
Sent: Thursday, August 18, 2005 2:24 PM
To: Norman Barker
Cc: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
Subject: Re: [Gdal-dev] RE: GDAL netcdf convention CF support


On 8/18/05, Norman Barker <nbarker@rsinc.com> wrote:
> [Norman Barker]  
>   
> Hi, 
>   
> this is a really exciting announcement.  I have run ncdump on my netcdf file
> and checked the variables, and gdalinfo picks up the lat, lon, and ozone
> vars ok.  It puts the z-levels in bands within the data file which is ok
> since that was the way that we had done it with geotiff.  It has lost the
> information attaching the band level to an atmospheric height.  Even if this
> was a comma separated index string it would be useful.    It has also lost
> the Time dimension stamp within the file.  Again is this could just be a
> metadata tag that would be great. 

Norman / Denis,

I agree that attaching the dimension value(s) unrolled as bands as
band metatadata would be desirable.  
 
> I would like to help wrap this into MapServer WCS if possible, if I am
> missing something with my comments above please let me know.  This is great
> though, is has caused great excitement in our office! 

Are you interested in having GDAL write netCDF files so that 
MapServer can return netCDF files?   As far as I know, there is no
support for creation/writing in the generic netcdf module in GDAL but
it seems like it might not be that hard to implement.  

<snip>

Ideally having MapServer return netCDF would be a nice to have, but as we have discussed before about 3D BBOX + parameters (and this is an aim of OGC GALEON), there is little to differentiate between a geotiff and a netCDF file (or any banded file) when implemented this way (2D + bands for the z-level).  If we could access netCDF through MapServer in an ND sense it would be different, I hope this is something we can work through in GALEON.  It is still possible to make a very workable WCS with 2D + bands though, and I am interested in a way to keep the metadata within the file.

However most of the work (for example when you have 40TB of data as our domain user does!) is in the conversion, so having gdal and hence MapServer read CF netCDF is a major plus (really good!), and makes using MapServer WCS even easier.

This is great though, I am compiling up MapServer with this new GDAL as we speak!

Hats off to Denis and Frank!

Norman


From hipoxi at gmail.com  Thu Aug 18 10:19:23 2005
From: hipoxi at gmail.com (Ibrahim HIDIR)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] OCI connection close !!!
Message-ID: <2062426205081807196e1c2059@mail.gmail.com>

hi again, i think i solved connection problem, i justt add 

-------------------------------------
OGROCIDataSource::~OGROCIDataSource()

{
    int         i;

    CPLFree( pszName );
    CPLFree( pszDBName );

    for( i = 0; i < nLayers; i++ )
        delete papoLayers[i];
    
    CPLFree( papoLayers );

    for( i = 0; i < nKnownSRID; i++ )
    {
        delete papoSRS[i];
    }
    CPLFree( papoSRS );
    CPLFree( panSRID );
    
    delete poSession;   /*  new line  */
}
-------------------------------------

in ogrocidatasource.cpp  file, when i destroy the connection it ends
the session :)


From fwarmerdam at gmail.com  Thu Aug 18 10:46:29 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] OCI connection close !!!
In-Reply-To: <2062426205081807196e1c2059@mail.gmail.com>
References: <2062426205081807196e1c2059@mail.gmail.com>
Message-ID: <931f8ea9050818074640b3d3c7@mail.gmail.com>

On 8/18/05, Ibrahim HIDIR <hipoxi@gmail.com> wrote:
> hi again, i think i solved connection problem, i justt add
...
>     CPLFree( papoSRS );
>     CPLFree( panSRID );
> 
>     delete poSession;   /*  new line  */
> }
> -------------------------------------
> 
> in ogrocidatasource.cpp  file, when i destroy the connection it ends
> the session :)

Ibrahim,

I have committed a variation on the change looking like:

    CPLFree( papoSRS );
    CPLFree( panSRID );

    if( poSession != NULL )
        delete poSession;
}

There are a few early failure cases where poSession might
still be NULL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Thu Aug 18 11:21:28 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <F93ED76B6830FB4CB81262937940F72605BBD9@exchange11.fed.cclrc.ac.uk>
References: <F93ED76B6830FB4CB81262937940F72605BBD9@exchange11.fed.cclrc.ac.uk>
Message-ID: <931f8ea9050818082170f0e0de@mail.gmail.com>

On 8/18/05, Woolf, A (Andrew) <A.Woolf@rl.ac.uk> wrote:
>  
> This is great news, a good step along the road we're all headed. Norman
> mentioned what is also the end game for us - the WCS *spec* supports
> arbitrary 1-,2-,3- or 4-d slices in a fully 4-d dataset, eg: 
>   
> ?3-d volume (lat-lon-height): 
> 
> http://glue.badc.rl.ac.uk/cgi-
> 
> bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
> 
> erage=temperature&BBOX=-180,-
> 
> 90,179,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF 
> ?Hovmuller (lat vs time): 
> 
> http://glue.badc.rl.ac.uk/cgi-
> 
> bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
> 
> erage=temperature&BBOX=10,-
> 
> 90,10,90,500,500&TIME=1996/2005/1&CRS=some3dCRS&FORMAT=CF-netCDF
> ?Vertical slice through atmosphere (lat vs height): 
> 
> http://glue.badc.rl.ac.uk/cgi-
> 
> bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
> 
> erage=temperature&BBOX=10,-
> 
> 90,10,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF 
>   
> These are all *valid WCS requests*!!! My understanding, however, is that
> fundamental 2-D limitations in GDAL will make this extremely difficult to
> achieve in Mapserver - any views to the contrary? 

Andrew,

Indeed, as things stand in GDAL and MapServer it would be hard
to achieve support for 3D and 4D datasets smoothly.   It might be
possible to "hack something up", but I'm not sure how desirable
that would be.  At best, it would be fragile and/or dependent on
alot of extra configuration information in MapServer which would
internally still need to treat results as stacks of 2D bands. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nbarker at rsinc.com  Thu Aug 18 11:47:21 2005
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support - MapServer
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E80A2AE2@bath.uk.rsinc.com>

 

-----Original Message-----
From: owner-galeon@unidata.ucar.edu [mailto:owner-galeon@unidata.ucar.edu]On Behalf Of Denis Nadeau
Sent: Wednesday, August 17, 2005 11:26 PM
To: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
Subject: GDAL netcdf convention CF support


GDAL now supports netcdf format using CF convention as specified by unidata.

   http://my.unidata.ucar.edu/content/software/netcdf/conventions.hdf

The software looks if the variables lat/latitude and lon/longitude are presents in the netcdf file.  If found, these variables are used to specify the georeferencing transformation.

I'd like the community to try it out and if there are some problems, let me know. GDAL netcdf format also works on Windows with he precompile library version 3.6.1-beta1 (January 2005).

Regards,
Denis Nadeau
[Norman Barker] 
 
Pleased to report this works fine with MapServer, reading netCDF files directly from disk.  I compiled the c netcdf libraries from unidata, then gdal, then mapserver, all worked fine.
 
I am finding that gdal isn't picking up any geographic coordinate information from the netcdf files, despite them having a geogrid, I am putting this in by hand in the map file.
 
The WCS getCoverage query worked, returning what was a netCDF file on disk as a floating point geotiff.  
 
This is really good, thanks, once I have got fully working on the production system, I will update the howto on the MapServer web site for WCS.
 
Norman 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050818/98443787/attachment.html
From fwarmerdam at gmail.com  Thu Aug 18 11:49:30 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] gdal_merge MemoryError
In-Reply-To: <7787235.1124370753134.SLOX.WebMail.wwwrun@hermes.endoxon.com>
References: <7787235.1124370753134.SLOX.WebMail.wwwrun@hermes.endoxon.com>
Message-ID: <931f8ea905081808494af79745@mail.gmail.com>

On 8/18/05, michael buerge <mbu@endoxon.com> wrote:
> hi
> 
> I'm having problems joining several images using gdal_merge.
> Python throws me a MemoryError. The offending file (part2.tif) is fairly
> big (1GB), the error is caused as soon as gdal_merge tries to start
> copying from it so I'm assuming it is related to the size. The parts
> (part[0-3].tif) were created using gdal_translate.
> 
> beeing a newbie in using the gdal utilities (as well as python, for that
> matter) I'm pretty stuck and any pointers that help me solve this issue
> will be greatly appreciated.
> 
> system-info and the output of the command I'm trying to run are included
> below.

Michael, 

gdal_merge.py actually loads each input image into RAM before
writing out to the mosaic file so it is inappropriate to use for very
large images.

I would suggest you let gdal_merge.py create the output file, and 
then using gdalwarp with each input file to copy it into the
mosaic file.  The gdalwarp program uses the low level warp api
and does not depend on holding the whole image in memory.

Previously there was no well determined way to have gdal_merge.py
create the mosaic file, but not try to write to it, but I have added a 
new -createonly switch to gdal_merge.py.  You should be able to
grab this new version at:

  http://www.gdal.org/srctree/pymod/gdal_merge.py

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From denis.nadeau at gmail.com  Thu Aug 18 11:57:23 2005
From: denis.nadeau at gmail.com (Denis Nadeau)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <43044E22.9060402@rl.ac.uk>
References: <304163b0050817152656b8500c@mail.gmail.com>
	<43044E22.9060402@rl.ac.uk>
Message-ID: <304163b00508180857711a4c04@mail.gmail.com>

2005/8/18, Dominic Lowe <d.lowe@rl.ac.uk>:
> 
> 
> Hi Denis,
> 
> I'd also done a "bit" of work on this, but I'll happily abandon my
> efforts if your driver is now in the distribution.


I did not know somebody else worked on this. Sorry to hear that we 
duplicated the work.

I had a look at your code (haven't compiled it yet) but one thing I had
> in my driver that you might like to consider adding is a check to see if
> the file is CF compliant (or rather, a check to see if it has the CF
> "Conventions" attribute).
> 
> Also, if I remember rightly (it's been a few months since I wrote it)
> this check should stop your netCDF driver picking up "GMT" grid files,
> which should be left to the GMT driver to deal with.


I can add some of your code, but some people still uses COARDS convention 
which is compatible with CF-etc. 

I notice that GMT checks for variable name "dimension" and "z". GMT driver 
should then reject netcdf CF or COARDS Convention except if these variables 
exists. This test seems to be good enough for the moment. 

At this point, I would like the netcdf driver to try to read the data even 
if it is not CF or COARDS.

Regards,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050818/2ef075c7/attachment.html
From denis.nadeau at gmail.com  Thu Aug 18 12:17:14 2005
From: denis.nadeau at gmail.com (Denis Nadeau)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E80A2ADF@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E80A2ADF@bath.uk.rsinc.com>
Message-ID: <304163b005081809176a736805@mail.gmail.com>

> 
> -----Original Message-----
> From: Frank Warmerdam [mailto:fwarmerdam@gmail.com]
> Sent: Thursday, August 18, 2005 2:24 PM
> To: Norman Barker
> Cc: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
> Subject: Re: [Gdal-dev] RE: GDAL netcdf convention CF support
> 
> 
> On 8/18/05, Norman Barker <nbarker@rsinc.com> wrote:
> > [Norman Barker]
> >
> > Hi,
> >
> > this is a really exciting announcement. I have run ncdump on my netcdf 
> file
> > and checked the variables, and gdalinfo picks up the lat, lon, and ozone
> > vars ok. It puts the z-levels in bands within the data file which is ok
> > since that was the way that we had done it with geotiff. It has lost the
> > information attaching the band level to an atmospheric height. Even if 
> this
> > was a comma separated index string it would be useful. It has also lost
> > the Time dimension stamp within the file. Again is this could just be a
> > metadata tag that would be great.
> 
> Norman / Denis,
> 
> I agree that attaching the dimension value(s) unrolled as bands as
> band metatadata would be desirable.


I could write the metadata such as 

GDALInfoBands = "times X isobaric (2 x 19 )"

Gdal order the bands in the following way:

band time isobaric
------ ----- ---------
1 1 1
2 1 2
... .... ....
19 1 19
20 2 1
21 2 2
... ... ...
38 2 19



> I would like to help wrap this into MapServer WCS if possible, if I am
> > missing something with my comments above please let me know. This is 
> great
> > though, is has caused great excitement in our office!
> 
> Are you interested in having GDAL write netCDF files so that
> MapServer can return netCDF files? As far as I know, there is no
> support for creation/writing in the generic netcdf module in GDAL but
> it seems like it might not be that hard to implement.
> 
> <snip>
> 
> Ideally having MapServer return netCDF would be a nice to have, but as we 
> have discussed before about 3D BBOX + parameters (and this is an aim of OGC 
> GALEON), there is little to differentiate between a geotiff and a netCDF 
> file (or any banded file) when implemented this way (2D + bands for the 
> z-level). If we could access netCDF through MapServer in an ND sense it 
> would be different, I hope this is something we can work through in GALEON. 
> It is still possible to make a very workable WCS with 2D + bands though, and 
> I am interested in a way to keep the metadata within the file.
> 
> However most of the work (for example when you have 40TB of data as our 
> domain user does!) is in the conversion, so having gdal and hence MapServer 
> read CF netCDF is a major plus (really good!), and makes using MapServer WCS 
> even easier.
> 
> This is great though, I am compiling up MapServer with this new GDAL as we 
> speak!
> 
> Hats off to Denis and Frank!


Thanks a lot for the Kuddo!! The driver should work for more than 4 
dimensions, but I have not data to check it. 
If you can provide me with 5D or 6D data, I could test the netcdf driver. 
The number of bands grows a lot with 4D data, the RUC.nc test file provided 
by GALEON has about 296 bands....

Denis
P.S. I will check in an new version of netcdfdataset.cpp, I found an error 
in the program this morning.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050818/1de5112a/attachment.html
From d.lowe at rl.ac.uk  Fri Aug 19 05:04:26 2005
From: d.lowe at rl.ac.uk (Dominic Lowe)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <304163b00508180857711a4c04@mail.gmail.com>
References: <304163b0050817152656b8500c@mail.gmail.com>	
	<43044E22.9060402@rl.ac.uk>
	<304163b00508180857711a4c04@mail.gmail.com>
Message-ID: <4305A09A.1040500@rl.ac.uk>

Denis,

>
> I did not know somebody else worked on this.  Sorry to hear that we 
> duplicated the work.

Me neither, but I'd only done a *very* rough version so it's not a problem.

> I notice that GMT checks for variable name "dimension" and "z".  GMT 
> driver should then reject netcdf CF or COARDS Convention except if 
> these variables exists.  This test seems to be good enough for the 
> moment.

You're right, and the facts of the case are slowly coming back to me - 
I'd actually written a  new CF driver separate from the existing gdal 
netcdf driver. The clash was therefore between the two netcdf drivers 
not between GMT and netCDF drivers.  As this isn't an issue now, you're 
right, the extra check isn't necessary. Sorry for confusing the issue!

>
> At this point, I would like the netcdf driver to try to read the data 
> even if it is not CF or COARDS.

Good plan :)

Regards
Dominic

From armin.burger at gmx.net  Fri Aug 19 11:51:33 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL 1.3.0, compile errors
Message-ID: <43060005.4040403@gmx.net>

Hello,

I tried to compile GDAL 1.3.0 on Debian Linux using the configuration

./configure --with-pg=/usr/local/pgsql/bin/pg_config   
--with-geos=yes      --with-xerces --with-xerces-lib="-L/usr/local/lib 
-lxerces-c1_7_0 -lpthread"  --with-xerces-inc=/usr/local/include/xercesc 
--with-ecw=/home/install/mapserver/ecwsdk-3.1.25Jan05-linux/ --with-mysql=no

I got the error starting with

make[4]: Entering directory 
`/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts/ili/iom'
/bin/sh ../../../../libtool --mode=compile g++ -Wall  -O2   
-I/usr/local/include/xercesc -I/usr/local/include/xercesc/xercesc 
-I../../../../port 
-I/home/install/mapserver/ecwsdk-3.1.25Jan05-linux//include  -I.. -c -o 
../../o/iom_attr.o iom_attr.cpp
 g++ -Wall -O2 -I/usr/local/include/xercesc 
-I/usr/local/include/xercesc/xercesc -I../../../../port 
-I/home/install/mapserver/ecwsdk-3.1.25Jan05-linux//include -I.. -c 
iom_attr.cpp  -fPIC -DPIC -o ../../o/.libs/iom_attr.o
In file included from iom_attr.cpp:7:
../iom/iom_p.h:25:55: xercesc/framework/LocalFileFormatTarget.hpp: No 
such file or directory
In file included from iom_attr.cpp:7:
../iom/iom_p.h:46: error: syntax error before `{' token

The complete error text is attached to the mail. It seems to be related 
to Xerces (1.7.0 compiled from source).  I tried also the GDAL CVS 
version from today, the same error.

Any ideas how to solve the problem?

Armin




-------------- next part --------------
./configure --with-pg=/usr/local/pgsql/bin/pg_config   --with-geos=yes      --with-xerces --with-xerces-lib="-L/usr/local/lib -lxerces-c1_7_0 -lpthread"  --with-xerces-inc=/usr/local/include/xercesc --with-ecw=/home/install/mapserver/ecwsdk-3.1.25Jan05-linux/ --with-mysql=no



make[3]: Entering directory `/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts/ili'
make -C iom
make[4]: Entering directory `/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts/ili/iom'
/bin/sh ../../../../libtool --mode=compile g++ -Wall  -O2   -I/usr/local/include/xercesc -I/usr/local/include/xercesc/xercesc -I../../../../port -I/home/install/mapserver/ecwsdk-3.1.25Jan05-linux//include  -I.. -c -o ../../o/iom_attr.o iom_attr.cpp
 g++ -Wall -O2 -I/usr/local/include/xercesc -I/usr/local/include/xercesc/xercesc -I../../../../port -I/home/install/mapserver/ecwsdk-3.1.25Jan05-linux//include -I.. -c iom_attr.cpp  -fPIC -DPIC -o ../../o/.libs/iom_attr.o
In file included from iom_attr.cpp:7:
../iom/iom_p.h:25:55: xercesc/framework/LocalFileFormatTarget.hpp: No such file or directory
In file included from iom_attr.cpp:7:
../iom/iom_p.h:46: error: syntax error before `{' token
../iom/iom_p.h:51: error: parse error before `public'
../iom/iom_p.h:55: error: ISO C++ forbids declaration of `XmlWrtAttr' with no
   type
../iom/iom_p.h:56: error: ISO C++ forbids declaration of `XmlWrtAttr' with no
   type
../iom/iom_p.h:57: error: parse error before `}' token
../iom/iom_p.h:65: error: type specifier omitted for parameter `XmlWrtAttr'
../iom/iom_p.h:65: error: parse error before `[' token
../iom/iom_p.h: In destructor `StrX::~StrX()':
../iom/iom_p.h:665: error: 'class XMLString' has no member named 'release'
../iom/iom_p.h: In destructor `XStr::~XStr()':
../iom/iom_p.h:710: error: 'class XMLString' has no member named 'release'
iom_attr.cpp: In function `const char* iom_getattrname(iom_object*, int)':
iom_attr.cpp:25: error: 'class XMLString' has no member named 'release'
iom_attr.cpp: In function `char* iom_getattrvalue(iom_object*, const char*)':
iom_attr.cpp:48: error: 'class XMLString' has no member named 'release'
iom_attr.cpp: In function `char* iom_getattrprim(iom_object*, const char*, int)
   ':
iom_attr.cpp:85: error: 'class XMLString' has no member named 'release'
iom_attr.cpp: In function `const char* iom_getxmleleattrname(iom_object*, int)
   ':
iom_attr.cpp:160: error: 'class XMLString' has no member named 'release'
iom_attr.cpp: In function `char* iom_getxmleleprim(iom_object*, int)':
iom_attr.cpp:184: error: 'class XMLString' has no member named 'release'
make[4]: *** [../../o/iom_attr.o] Error 1
make[4]: Leaving directory `/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts/ili/iom'
make[3]: *** [iom-target] Error 2
make[3]: Leaving directory `/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts/ili'
make[2]: *** [ili-target] Error 2
make[2]: Leaving directory `/home/install/mapserver/gdal-1.3.0/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/home/install/mapserver/gdal-1.3.0/ogr'
make: *** [ogr-target] Error 2
From pfcsergioliminiana at yahoo.es  Fri Aug 19 13:25:48 2005
From: pfcsergioliminiana at yahoo.es (Sergio Liminiana Bernat)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Idrisi32 and BMP
Message-ID: <20050819172548.30624.qmail@web25609.mail.ukl.yahoo.com>

Hello!!

I'm very grateful of GDAl.
 
 
I'm working with the library because I have to do files in XML to transport raster images (separating blue, red and green) or (black o no), I think that the 
easiliest files for transport to me is BMP files, but I don?t know if when I use gda_translation with differents formats to convert to BMP,
the format of BMP is the same ( compressed method, bands,...) or depends of input file.

Why are not Idrisi32 translator  available , maybe for the lincence? 
 
Thank you 

		
---------------------------------

Correo Yahoo!
Comprueba qu? es nuevo, aqu?
http://correo.yahoo.es
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050819/3937c93d/attachment.html
From fwarmerdam at gmail.com  Fri Aug 19 20:55:30 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL 1.3.0, compile errors
In-Reply-To: <43060005.4040403@gmx.net>
References: <43060005.4040403@gmx.net>
Message-ID: <931f8ea905081917557d6d5e2@mail.gmail.com>

On 8/19/05, Armin Burger <armin.burger@gmx.net> wrote:
> Hello,
> 
> I tried to compile GDAL 1.3.0 on Debian Linux using the configuration
> 
> ./configure --with-pg=/usr/local/pgsql/bin/pg_config
> --with-geos=yes      --with-xerces --with-xerces-lib="-L/usr/local/lib
> -lxerces-c1_7_0 -lpthread"  --with-xerces-inc=/usr/local/include/xercesc
> --with-ecw=/home/install/mapserver/ecwsdk-3.1.25Jan05-linux/ --with-mysql=no

Armin, 

It seems that the Interlis driver requires a newer version of Xerces than 1.7.0.
I would suggest your upgrading to at least Xerces 2.x.  Let me know if 
that solves the problem.  I think I may need to advertise GDAL as depending
on Xerces 2.0 or newer from now on. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Fri Aug 19 20:59:30 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Idrisi32 and BMP
In-Reply-To: <20050819172548.30624.qmail@web25609.mail.ukl.yahoo.com>
References: <20050819172548.30624.qmail@web25609.mail.ukl.yahoo.com>
Message-ID: <931f8ea905081917595bee4f1c@mail.gmail.com>

On 8/19/05, Sergio Liminiana Bernat <pfcsergioliminiana@yahoo.es> wrote:
> Hello!! 
> 
> I'm very grateful of GDAl. 
>   
>   
> I'm working with the library because I have to do files in XML to transport
> raster images (separating blue, red and green) or (black o no), I think that
> the 
> easiliest files for transport to me is BMP files, but I don?t know if when I
> use gda_translation with differents formats to convert to BMP,
> the format of BMP is the same ( compressed method, bands,...) or depends of
> input file. 

Sergio, 

There are a few variations on the kinds of BMP files produced depending
on the input file.  From a quick scan of the code, it looks like 1 band
input files result in a pseudocolored BMP file (greyscale if there is no 
provided colormap), and 3 bands files are treated as RGB. 

There may be a few other variations I am not aware of.  You might want
to skim the user driver documentation.

> Why are not Idrisi32 translator  available , maybe for the lincence? 

Mainly, because no one has contributed one, or paid for the implementation
of one.  I would like to see direct Idrisi support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jgreenberg at arc.nasa.gov  Fri Aug 19 21:23:50 2005
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Compiling GDAL 1.3.0 with GRASS support under CYGWIN?
Message-ID: <200508200124.j7K1O5IZ017120@duke.maptools.org>

I'm trying to install GDAL 1.3.0 with grass support under CYGWIN for windows
-- I have the grass 6.1-cvs version installed from the binary release in the
CYGWIN package manager (it installs GDAL 1.2.3 I think).  When I give the
flag --with-grass=/usr/local/grass6.1.cvs command, it configures fine, but
when I get to the make, I get this error :

make -C grass install-obj
make[2]: Entering directory
`/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts/grass'
/bin/sh.exe ../../libtool --mode=compile g++ -Wall  -D_FILE_OFFSET_BITS=64
-I/usr/local/grass6.1.cvs/include -I../../port -I../../gcore -I../../alg
-I../../ogr -I../../ogr/ogrsf_frmts -D_FILE_OFFSET_BITS=64 -I../../port  -c
-o ../o/grass57dataset.o grass57dataset.cpp
 g++ -Wall -D_FILE_OFFSET_BITS=64 -I/usr/local/grass6.1.cvs/include
-I../../port -I../../gcore -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts
-D_FILE_OFFSET_BITS=64 -I../../port -c grass57dataset.cpp  -DPIC -o
../o/.libs/grass57dataset.o
In file included from grass57dataset.cpp:60:
/usr/local/grass6.1.cvs/include/gprojects.h:20:22: proj_api.h: No such file
or directory
In file included from grass57dataset.cpp:60:
/usr/local/grass6.1.cvs/include/gprojects.h:31: error: ISO C++ forbids
declaration of `projPJ' with no type
/usr/local/grass6.1.cvs/include/gprojects.h:31: error: expected `;' before
'*' token
make[2]: *** [../o/grass57dataset.o] Error 1
make[2]: Leaving directory
`/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts/grass'
make[1]: *** [grass-install-obj] Error 2
make[1]: Leaving directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts'
make: *** [frmts-target] Error 2

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com




From woklist at charter.net  Sat Aug 20 16:54:19 2005
From: woklist at charter.net (William K)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
Message-ID: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>

I'm trying to update gdal to 1.3.0 on my host's debian PCs and didn't  
get very far.  First, apparently now gdal needs 'recursive mutex',  
which i seems my host doesn't support.  No big deal, -> --without- 
threads.

Now, in gcore/gdalopeninfo.cpp I get parse errors in gdal.h.

I have no clue how to tell what version of Debian or Linux it is, and  
my host doesn't say.  All I can tell from config.log is that it's  
using gcc 2.95.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy

From jgreenberg at arc.nasa.gov  Sat Aug 20 17:10:13 2005
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] VSIFOpenL/VSIFCloseL problem compiling GDAL 1.3.0 for
	cygwin
Message-ID: <200508202110.j7KLAQO5012139@duke.maptools.org>

I tried compiling gdal 1.3.0 for cygwin using just a normal ./configure
command (but with the 64 bit compiler flags for large file support) and am
getting this error:

make[1]: Entering directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0'
GNUmakefile:43: warning: overriding commands for target `libgdal.la'
GNUmakefile:39: warning: ignoring old commands for target `libgdal.la'
make[1]: `libgdal.la' is up to date.
make[1]: Leaving directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0'
(cd ogr; make apps)
make[1]: Entering directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0/ogr'
/bin/sh.exe ../libtool --mode=link	g++  ogrinfo.o ../libgdal.la -o
ogrinfo.exe
g++ ogrinfo.o -o ogrinfo.exe  ../.libs/libgdal.a -L/usr/lib -lpq -lz
../.libs/libgdal.a(cpl_conv.o):cpl_conv.cpp:(.text+0x1560): undefined
reference to `_VSIFOpenL'
../.libs/libgdal.a(cpl_conv.o):cpl_conv.cpp:(.text+0x184f): undefined
reference to `_VSIFCloseL'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo.exe] Error 1
make[1]: Leaving directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0/ogr'
make: *** [ogr-apps] Error 2

Thoughts?

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com




From hamish_nospam at yahoo.com  Sat Aug 20 22:46:00 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
Message-ID: <20050821024600.88226.qmail@web52712.mail.yahoo.com>

> I have no clue how to tell what version of Debian or Linux it is, 
> and my host doesn't say.  All I can tell from config.log is that 
> it's using gcc 2.95.

$ uname -a

$ cat /etc/debian_version

$ less /etc/apt/sources.list


might give you some clues in this regard.


Hamish



		
____________________________________________________
Start your day with Yahoo! - make it your home page 
http://www.yahoo.com/r/hs 
 

From Martin.Spott at mgras.net  Sun Aug 21 10:24:17 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de>
Message-ID: <dea2qh$j0m$1@osprey.mgras.de>

Martin Spott wrote:

> Ah, I just found out where to get ogdi-3.1.5 and check with it -

BTW, I just found out that in order to compile ogdi-3.1.5 on 64 bit
Solaris you have to alter 'ogdi/c-api/ecs_xdr.c' and turn any
occurrence of IXDR_*_LONG intp IXDR_*_INT32, see:

  http://www.mail-archive.com/debian-bugs-rc@lists.debian.org/msg18097.html

I'll report later if this actually results in a working driver  :-)

Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From woklist at kyngchaos.com  Sun Aug 21 12:53:03 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <20050821024600.88226.qmail@web52712.mail.yahoo.com>
References: <20050821024600.88226.qmail@web52712.mail.yahoo.com>
Message-ID: <91BF539E-832D-4ABB-B686-57EAF995FBCF@kyngchaos.com>

easy enough.  Looks like Debian 3.0/Linux 2.4.29.

So, does this help explain the parse errors or what to do about them?


On Aug 20, 2005, at 9:46 PM, Hamish wrote:

>> I have no clue how to tell what version of Debian or Linux it is,
>> and my host doesn't say.  All I can tell from config.log is that
>> it's using gcc 2.95.
>>
>
> $ uname -a
>
> $ cat /etc/debian_version
>
> $ less /etc/apt/sources.list
>
>
> might give you some clues in this regard.
>
>
> Hamish


-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy

From fwarmerdam at gmail.com  Sun Aug 21 13:44:24 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
Message-ID: <931f8ea905082110442228bd55@mail.gmail.com>

On 8/20/05, William K <woklist@charter.net> wrote:
> I'm trying to update gdal to 1.3.0 on my host's debian PCs and didn't
> get very far.  First, apparently now gdal needs 'recursive mutex',
> which i seems my host doesn't support.  No big deal, -> --without-
> threads.
> 
> Now, in gcore/gdalopeninfo.cpp I get parse errors in gdal.h.

William, 

I have an x86 Debian system from 2001 or so, and it
seems to build GDAL fine.  Could you be more specific
about the errors you are encountering?   

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Sun Aug 21 13:56:51 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <931f8ea905082110442228bd55@mail.gmail.com>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
	<931f8ea905082110442228bd55@mail.gmail.com>
Message-ID: <2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>

up to here it's fine, then:

(cd gcore; make)
make[1]: Entering directory `/home/kyngchaos/src/gdal-1.3.0/gcore'
/bin/sh ../libtool --mode=compile g++ -DHAVE_MITAB -Wall  -I/home/ 
kyngchaos/sw/include   -I../port -I../gcore -I../alg -I../ogr -I../ 
ogr/ogrsf_frmts -I/home/kyngchaos/sw/include -I../port -I/home/ 
kyngchaos/sw -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw -I/ 
home/kyngchaos/sw/include -I/home/kyngchaos/sw -I/home/kyngchaos/sw/ 
include -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw/include -I/ 
home/kyngchaos/sw -I/home/kyngchaos/sw/include  -c -o gdalopeninfo.o  
gdalopeninfo.cpp
mkdir .libs
g++ -DHAVE_MITAB -Wall -I/home/kyngchaos/sw/include -I../port -I../ 
gcore -I../alg -I../ogr -I../ogr/ogrsf_frmts -I/home/kyngchaos/sw/ 
include -I../port -I/home/kyngchaos/sw -I/home/kyngchaos/sw/include - 
I/home/kyngchaos/sw -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw  
-I/home/kyngchaos/sw/include -I/home/kyngchaos/sw/include -I/home/ 
kyngchaos/sw/include -I/home/kyngchaos/sw -I/home/kyngchaos/sw/ 
include -c gdalopeninfo.cpp  -fPIC -DPIC -o .libs/gdalopeninfo.o
In file included from gdal_priv.h:237,
                  from gdalopeninfo.cpp:36:
gdal.h:234: syntax error before `('
gdal.h:235: syntax error before `('
gdal.h:236: syntax error before `('
gdal.h:237: syntax error before `('
gdal.h:238: syntax error before `('
gdal.h:317: parse error before `*'
.
. [and so on up to line 654]
.
In file included from gdalopeninfo.cpp:36:
gdal_priv.h:301: type specifier omitted for parameter
gdal_priv.h:301: parse error before `,'
gdal_priv.h:313: `CPL_STDCALL' is neither function nor method; cannot  
be declared friend
gdal_priv.h:313: parse error before `('
gdal_priv.h:314: `CPL_STDCALL' is neither function nor method; cannot  
be declared friend
gdal_priv.h:314: declaration of `void * GDALDataset::CPL_STDCALL'
gdal_priv.h:313: conflicts with previous declaration `void *  
GDALDataset::CPL_STDCALL'
gdal_priv.h:314: parse error before `('
gdal_priv.h:339: type specifier omitted for parameter
gdal_priv.h:400: type specifier omitted for parameter
gdal_priv.h:314: duplicate member `GDALDataset::CPL_STDCALL'
gdal_priv.h:592: type specifier omitted for parameter
gdal_priv.h:601: type specifier omitted for parameter
gdal_priv.h:606: type specifier omitted for parameter
gdal_priv.h:671: type specifier omitted for parameter
gdal_priv.h:671: parse error before `,'
gdal_priv.h:690: type specifier omitted for parameter
gdal_priv.h:690: parse error before `,'
gdal_priv.h:750: type specifier omitted for parameter
gdal_priv.h:750: parse error before `,'
gdal_priv.h:757: type specifier omitted for parameter
gdal_priv.h:757: parse error before `,'
gdal_priv.h:762: type specifier omitted for parameter
make[1]: *** [gdalopeninfo.o] Error 1
make[1]: Leaving directory `/home/kyngchaos/src/gdal-1.3.0/gcore'
make: *** [core-target] Error 2

On Aug 21, 2005, at 12:44 PM, Frank Warmerdam wrote:

> On 8/20/05, William K <woklist@charter.net> wrote:
>
>> I'm trying to update gdal to 1.3.0 on my host's debian PCs and didn't
>> get very far.  First, apparently now gdal needs 'recursive mutex',
>> which i seems my host doesn't support.  No big deal, -> --without-
>> threads.
>>
>> Now, in gcore/gdalopeninfo.cpp I get parse errors in gdal.h.
>>
>
> William,
>
> I have an x86 Debian system from 2001 or so, and it
> seems to build GDAL fine.  Could you be more specific
> about the errors you are encountering?
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.

From fwarmerdam at gmail.com  Sun Aug 21 16:41:13 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <430899FA.6@tamu.edu>
References: <F93ED76B6830FB4CB81262937940F72605BBD9@exchange11.fed.cclrc.ac.uk>
	<931f8ea9050818082170f0e0de@mail.gmail.com> <430899FA.6@tamu.edu>
Message-ID: <931f8ea905082113413418a470@mail.gmail.com>

On 8/21/05, Gerry Creager N5JXS <gerry.creager@tamu.edu> wrote:
> Frank, et al,
> 
> I think we need to be thinking either about making GDAL more interested
> in 3D/4D datasets, as that's coming whether we're ready or not... in
> fact, for me, it's already here.. and then see if we need to consider
> forking or augmenting Mapserver to accommodate it.
> 
> I see a lot of conceptual problems for Mapserver, and, for that matter,
> a LOT of GIS packages in incorporating 3D/4D data, and presenting it
> properly.  This has been an issue for GIS practitioners since just about
>   forever: They think in 2 dimensions and can't, as a group, appreciate
> the need for either vertical, or time.  They represent time series data
> as a series of static images.
> 
> I see, in Mapserver, a potential interface.  It's open-source and thus
> maleable for applications like this.  It won't be simple or
> straightforward, and in the end, Mapserver might serve solely as an
> example framework for a new 3D/4D display/dissemination tool, but it
> *is* a starting point.
> 
> I'm kinda thinking about a melding of Mapserver and IDV, in th elong run.

Gerry,

The idea of extending mapserver and GDAL to better support 3D/4D
datasets has been brought up a few time, and I have generally been
quite ... conservative ... in response.  I am concerned about substantial
complication and turmoil in the interfaces of both.

My personal opinion is that in the shorter term it would make more
sense to have a distinct multi-dimensional WCS server implemented
that might derive some code from MapServer, but that would otherwise
be quite distinct.  It would ignore all the vector and "portral" related support
in MapServer in favor of focusing on serving n-dimensional raster data 
via WCS.  

There could be an n-dimensional equivelent to GDAL as well, that might
even include a GDAL plugin for 2D datasets, but that would have it's
own interfaces that are more organized to n-dimensional data.  Perhaps it
could even be closely related to one of the existing n-dimensional file
format libraries like netcdf or HDF (my understanding is that the next
general netcdf is based on HDF5). 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Sun Aug 21 16:50:32 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
	<931f8ea905082110442228bd55@mail.gmail.com>
	<2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>
Message-ID: <931f8ea905082113506f4d0aa1@mail.gmail.com>

On 8/21/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
> up to here it's fine, then:
> 
> (cd gcore; make)
> make[1]: Entering directory `/home/kyngchaos/src/gdal-1.3.0/gcore'
> /bin/sh ../libtool --mode=compile g++ -DHAVE_MITAB -Wall  -I/home/
> kyngchaos/sw/include   -I../port -I../gcore -I../alg -I../ogr -I../
> ogr/ogrsf_frmts -I/home/kyngchaos/sw/include -I../port -I/home/
> kyngchaos/sw -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw -I/
> home/kyngchaos/sw/include -I/home/kyngchaos/sw -I/home/kyngchaos/sw/
> include -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw/include -I/
> home/kyngchaos/sw -I/home/kyngchaos/sw/include  -c -o gdalopeninfo.o
> gdalopeninfo.cpp
> mkdir .libs
> g++ -DHAVE_MITAB -Wall -I/home/kyngchaos/sw/include -I../port -I../
> gcore -I../alg -I../ogr -I../ogr/ogrsf_frmts -I/home/kyngchaos/sw/
> include -I../port -I/home/kyngchaos/sw -I/home/kyngchaos/sw/include -
> I/home/kyngchaos/sw -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw
> -I/home/kyngchaos/sw/include -I/home/kyngchaos/sw/include -I/home/
> kyngchaos/sw/include -I/home/kyngchaos/sw -I/home/kyngchaos/sw/
> include -c gdalopeninfo.cpp  -fPIC -DPIC -o .libs/gdalopeninfo.o
> In file included from gdal_priv.h:237,
>                   from gdalopeninfo.cpp:36:
> gdal.h:234: syntax error before `('
> gdal.h:235: syntax error before `('
> gdal.h:236: syntax error before `('
> gdal.h:237: syntax error before `('
> gdal.h:238: syntax error before `('
> gdal.h:317: parse error before `*'

William, 

My guess would be that you have an older version of gdal 
in /home/kyngchaos/sw and it's include files are getting used
in preference to the newer version.  Is there any chance you
are using --with-local=/home/kyngchaos/sw configuration option?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Sun Aug 21 17:15:18 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <931f8ea905082113506f4d0aa1@mail.gmail.com>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
	<931f8ea905082110442228bd55@mail.gmail.com>
	<2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>
	<931f8ea905082113506f4d0aa1@mail.gmail.com>
Message-ID: <A65CA5E9-826F-412E-A7C7-75B1CD3E019B@kyngchaos.com>

bingo, more or less the problem.  It's not that I used --with-local,  
but the supporting libraries get their -I/home/kyngchaos/sw/include  
bits in the make line, thus getting the old gdal includes.

Odd that I didn't run into this updating my Mac from 1.2.6 to 1.3.0.   
Maybe the newer GCC is a little more forgiving.  Maybe I should redo  
that just to make sure.

On Aug 21, 2005, at 3:50 PM, Frank Warmerdam wrote:

> William,
>
> My guess would be that you have an older version of gdal
> in /home/kyngchaos/sw and it's include files are getting used
> in preference to the newer version.  Is there any chance you
> are using --with-local=/home/kyngchaos/sw configuration option?
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy

From woklist at kyngchaos.com  Sun Aug 21 17:19:04 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <931f8ea905082113506f4d0aa1@mail.gmail.com>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
	<931f8ea905082110442228bd55@mail.gmail.com>
	<2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>
	<931f8ea905082113506f4d0aa1@mail.gmail.com>
Message-ID: <8641D870-13F7-4A86-8495-DFE90C56D310@kyngchaos.com>

[brain skipped a bit and I sent before completing my reply]

So, I deleted the old gdal headers in /home/kyngchaos/sw/include, and  
gdal now builds.


On Aug 21, 2005, at 3:50 PM, Frank Warmerdam wrote:

> William,
>
> My guess would be that you have an older version of gdal
> in /home/kyngchaos/sw and it's include files are getting used
> in preference to the newer version.  Is there any chance you
> are using --with-local=/home/kyngchaos/sw configuration option?
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro

From neteler at itc.it  Mon Aug 22 00:34:40 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Compiling GDAL 1.3.0 with GRASS support under CYGWIN?
In-Reply-To: <200508200124.j7K1O5IZ017120@duke.maptools.org>
References: <200508200124.j7K1O5IZ017120@duke.maptools.org>
Message-ID: <20050822043440.GB12063@vanga.itc.it>

On Fri, Aug 19, 2005 at 06:23:50PM -0700, Jonathan Greenberg wrote:
> I'm trying to install GDAL 1.3.0 with grass support under CYGWIN for windows
> -- I have the grass 6.1-cvs version installed from the binary release in the
> CYGWIN package manager (it installs GDAL 1.2.3 I think).  When I give the
> flag --with-grass=/usr/local/grass6.1.cvs command, it configures fine, but
> when I get to the make, I get this error :
> 
> make -C grass install-obj
> make[2]: Entering directory
> `/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts/grass'
> /bin/sh.exe ../../libtool --mode=compile g++ -Wall  -D_FILE_OFFSET_BITS=64
> -I/usr/local/grass6.1.cvs/include -I../../port -I../../gcore -I../../alg
> -I../../ogr -I../../ogr/ogrsf_frmts -D_FILE_OFFSET_BITS=64 -I../../port  -c
> -o ../o/grass57dataset.o grass57dataset.cpp
>  g++ -Wall -D_FILE_OFFSET_BITS=64 -I/usr/local/grass6.1.cvs/include
> -I../../port -I../../gcore -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts
> -D_FILE_OFFSET_BITS=64 -I../../port -c grass57dataset.cpp  -DPIC -o
> ../o/.libs/grass57dataset.o
> In file included from grass57dataset.cpp:60:
> /usr/local/grass6.1.cvs/include/gprojects.h:20:22: proj_api.h: No such file
> or directory
> In file included from grass57dataset.cpp:60:
> /usr/local/grass6.1.cvs/include/gprojects.h:31: error: ISO C++ forbids
> declaration of `projPJ' with no type
> /usr/local/grass6.1.cvs/include/gprojects.h:31: error: expected `;' before
> '*' token
> make[2]: *** [../o/grass57dataset.o] Error 1
> make[2]: Leaving directory
> `/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts/grass'
> make[1]: *** [grass-install-obj] Error 2
> make[1]: Leaving directory `/home/jonathan/gdal-1.3.0/gdal-1.3.0/frmts'
> make: *** [frmts-target] Error 2
> 
> --j
> 
> --
 
Jonathan

it asks for proj_api.h - did you install PROJ4 including the
header files?

Markus


From ben at vterrain.org  Mon Aug 22 01:59:18 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.0 Released
In-Reply-To: <931f8ea905081514427f6eed62@mail.gmail.com>
Message-ID: <200508220559.j7M5xNNh002475@duke.maptools.org>

I am just trying to build 1.3.0 for the first time today, and there is one
change which gives some compiler worries on MSVC:

Gdal_priv.h
 * Revision 1.62  2005/07/25 21:24:28  ssoule
 * Changed GDALColorTable's "GDALColorEntry *paoEntries" to
 * "std::vector<GDALColorEntry> aoEntries".

This causes the following on MSVC 7.1:

gdal_priv.h(469) : warning C4251: 'GDALColorTable::aoEntries' : class
'std::vector<_Ty>' needs to have dll-interface to be used by clients of
class 'GDALColorTable' with [ _Ty=GDALColorEntry ]

It's just a warning, but a troubling one.  Anyone know what it means?  I
have little idea how calling conventions affect templates like std::vector.

-Ben


From ben at vterrain.org  Mon Aug 22 02:55:44 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Small memleak: no CPLCleanupTLS for non-pthreads
Message-ID: <200508220655.j7M6tnvJ003898@duke.maptools.org>

I am looking at some small new memleaks that have appeared in moving to
1.3.0.  There are some allocations in CPLGetTLSList() which are only freed
in the function CPLCleanupTLS().  However, of the 3 new threading options,
CPLCleanupTLS() only exists in the case of CPL_MULTIPROC_PTHREAD.

On Windows, it defaults to CPL_MULTIPROC_WIN32, so there is no
CPLCleanupTLS() code.  Should it be added, or is there any other way to
release this memory?

Thanks,
Ben


From nilarcs at gmail.com  Mon Aug 22 05:44:07 2005
From: nilarcs at gmail.com (nilarcs)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Cannot update the shapefile's attribute with OGR
Message-ID: <776a7163050822024463e5bd0b@mail.gmail.com>

Hi all

I'm a newbie with OGR. I can use it to read the shapefile, but when I
want to update some attributes, it seemed that it didn't work. I have
opened the shapefile with TRUE parameter , and used the ' SetField (
int   iField,const char *  pszValue)' to give the field some new
attribute . But when the program terminated , the attribute has no
change, even adding the SyncToDisk() method.

I have no idea. How can I do ? Thanks for any advice!  If you can give
some sample code, it's more better :)

-- 
-------------------------------------------------------------------
Zhang Jun


From fwarmerdam at gmail.com  Mon Aug 22 08:51:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Cannot update the shapefile's attribute with OGR
In-Reply-To: <776a7163050822024463e5bd0b@mail.gmail.com>
References: <776a7163050822024463e5bd0b@mail.gmail.com>
Message-ID: <931f8ea9050822055122d84a0f@mail.gmail.com>

On 8/22/05, nilarcs <nilarcs@gmail.com> wrote:
> Hi all
> 
> I'm a newbie with OGR. I can use it to read the shapefile, but when I
> want to update some attributes, it seemed that it didn't work. I have
> opened the shapefile with TRUE parameter , and used the ' SetField (
> int   iField,const char *  pszValue)' to give the field some new
> attribute . But when the program terminated , the attribute has no
> change, even adding the SyncToDisk() method.
> 
> I have no idea. How can I do ? Thanks for any advice!  If you can give
> some sample code, it's more better :)

Zhang,

OGR does not currently support "in place" update of shapefiles.  You
can append new shapes to an existing file in update mode, but not
modify existing shapes.  

This is a limitation of Shapelib and OGR that I would like to correct
at some point, but I wouldn't hold my breath waiting for it to be addressed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Aug 22 09:06:55 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Small memleak: no CPLCleanupTLS for non-pthreads
In-Reply-To: <200508220655.j7M6tnvJ003898@duke.maptools.org>
References: <200508220655.j7M6tnvJ003898@duke.maptools.org>
Message-ID: <931f8ea905082206067d960271@mail.gmail.com>

On 8/22/05, Ben Discoe <ben@vterrain.org> wrote:
> I am looking at some small new memleaks that have appeared in moving to
> 1.3.0.  There are some allocations in CPLGetTLSList() which are only freed
> in the function CPLCleanupTLS().  However, of the 3 new threading options,
> CPLCleanupTLS() only exists in the case of CPL_MULTIPROC_PTHREAD.
> 
> On Windows, it defaults to CPL_MULTIPROC_WIN32, so there is no
> CPLCleanupTLS() code.  Should it be added, or is there any other way to
> release this memory?

Ben,

Pthreads has a mechanism to register a callback function for cleanup
with a TLS object but I am not aware of a corresponding mechanism for
the win32 api. 

If you can come up with a not-too-complicated approach to cleaning this
up, I would be interested.  Essentially some sort of thead "atexit" function.
But we would need to ensure it doesn't get called till fairly late in thread
teardown as we don't want to destroy the TLS structures till other 
GDAL/OGR/CPL level activity for the thread is all complete. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Aug 22 09:09:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.0 Released
In-Reply-To: <200508220559.j7M5xNNh002475@duke.maptools.org>
References: <931f8ea905081514427f6eed62@mail.gmail.com>
	<200508220559.j7M5xNNh002475@duke.maptools.org>
Message-ID: <931f8ea905082206097cf6c3b1@mail.gmail.com>

On 8/22/05, Ben Discoe <ben@vterrain.org> wrote:
> I am just trying to build 1.3.0 for the first time today, and there is one
> change which gives some compiler worries on MSVC:
> 
> Gdal_priv.h
>  * Revision 1.62  2005/07/25 21:24:28  ssoule
>  * Changed GDALColorTable's "GDALColorEntry *paoEntries" to
>  * "std::vector<GDALColorEntry> aoEntries".
> 
> This causes the following on MSVC 7.1:
> 
> gdal_priv.h(469) : warning C4251: 'GDALColorTable::aoEntries' : class
> 'std::vector<_Ty>' needs to have dll-interface to be used by clients of
> class 'GDALColorTable' with [ _Ty=GDALColorEntry ]
> 
> It's just a warning, but a troubling one.  Anyone know what it means?  I
> have little idea how calling conventions affect templates like std::vector.

Ben,

This was incorporated by Steve Soule as a sort of experimental effort
to make better use of the standard C++ library.   An effort to shake out
issues such as you have found. 

Steve, any thoughts on this? 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Aug 22 10:15:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] build errors on host's debian
In-Reply-To: <A65CA5E9-826F-412E-A7C7-75B1CD3E019B@kyngchaos.com>
References: <86165FB5-92F6-4137-AAC4-72CBB887A58A@charter.net>
	<931f8ea905082110442228bd55@mail.gmail.com>
	<2F1F562E-1814-4004-A21B-40EFF1D311E7@kyngchaos.com>
	<931f8ea905082113506f4d0aa1@mail.gmail.com>
	<A65CA5E9-826F-412E-A7C7-75B1CD3E019B@kyngchaos.com>
Message-ID: <931f8ea905082207151173f90f@mail.gmail.com>

On 8/21/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
> bingo, more or less the problem.  It's not that I used --with-local,
> but the supporting libraries get their -I/home/kyngchaos/sw/include
> bits in the make line, thus getting the old gdal includes.

William,

I would like to understand how -I/home/kyngchaos/sw/include
got into the compile line where it did.  I make an effort to ensure
that the include paths for supporting packages always come after
the local GDAL include path to prevent exactly this sort of problem.
It clearly isn't working in this case, and I would like to fix it. 

If I could get a copy of your GDALmake.opt that would be helpful.
I may later need more information on your configure. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From raphaela_saling at caramail.com  Mon Aug 22 10:46:06 2005
From: raphaela_saling at caramail.com (=?ISO-8859-1?Q? Rapha=EBla=20Saling?=)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] problems building gdal with xerces and ecw
Message-ID: <186977078432414@lycos-europe.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050822/b7c2ec03/attachment.html
From kruland at ku.edu  Mon Aug 22 10:50:35 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: DeleteLayer problems
In-Reply-To: <931f8ea905082207256e7f6935@mail.gmail.com>
References: <42F01951.1020407@interserv.com> <42F8FD0E.7000204@interserv.com>	
	<42F95EAC.8080101@ku.edu> <4302DED1.5050703@interserv.com>	
	<430349F8.8080405@ku.edu> <4303BAF5.7000402@interserv.com>	
	<4305834C.3040500@interserv.com> <4305E00F.1020809@ku.edu>	
	<43065C90.2090607@interserv.com> <43068819.5040502@ku.edu>
	<931f8ea905082207256e7f6935@mail.gmail.com>
Message-ID: <4309E63B.8000501@ku.edu>

Frank,

Right now, in the current ng bindings, when a Band (script) object goes
out of scope, and calls it's script destructor, it does not in turn call
any GDAL C library methods to free resources.

You can of course still get in trouble by referring to Band objects
after the Dataset has been deleted, ie,

ds = gdal.Open("cint16.tif")
band = ds.GetRasterBand(1)
ds = None
print band.DataType

This code snippet didn't segfault/core on my system but it did print
complete trash.

Kevin

Frank Warmerdam wrote:

>On 8/19/05, Kevin Ruland <kruland@ku.edu> wrote:
>  
>
>>Charlie,
>>
>>Yes, that is a problem and is very similar to the GDAL problem of
>>deleting a Dataset when you still have a reference to a Band it
>>contains.  Unfortunately this problem is in the underlying C++ code and
>>I don't think there is a whole lot we can do about it in the wrapper layer.
>>    
>>
>
>Kevin / Charles, 
>
>I think part of our problem with layers, and bands is that they aren't
>owned by the script variables that reference them.  They are owned
>by the OGRDataSource and GDALDataset objects.  
>
>My feeling is that the ogr.Layer and gdal.Band script objects should
>*not* be taking and dropping references to the layer and band.  That
>should mean that it doesn't matter if an ogr.Layer is released after
>the corresponding ogr.DataSource since the ogr.Layer cleanup code
>does not actually invoke any code on the layer. 
>
>Note that the above situation is different than the issue with featuredefns.
>There, as I mentioned in the other email, I believe the solution is to properly
>manage the reference counts.   The OGRFeatureDefn class is distinct
>from the OGRLayer itself, in part, so that OGRFeature's can exist without
>a corresponding OGRLayer object. 
>
>Hopefully, as long as we arrange the script bindings to honour the
>underlying GDAL/OGR ownership/reference counting conentions
>*and* fix OGR to do it's reference counting properly, we will be in the 
>clear. 
>
>I must admit that non-deterministically garbage collected languages
>do bring out these issues. 
>
>PS. I do think these conversions would be best held on gdal-dev.  
>It would help make others aware of some of the issues, and directions
>of development.
>
>  
>

From fwarmerdam at gmail.com  Mon Aug 22 11:11:21 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] problems building gdal with xerces and ecw
In-Reply-To: <186977078432414@lycos-europe.com>
References: <186977078432414@lycos-europe.com>
Message-ID: <931f8ea9050822081111608df8@mail.gmail.com>

On 8/22/05, Rapha?la Saling <raphaela_saling@caramail.com> wrote:
>   
> 
>  /usr/bin/ld: warning: libstdc++.so.5, needed by /usr/src/pourmapserver/ecwsdk-3.1.25Jan05-linux/lib/libNCSEcw.so, may conflict with libstdc++.so.6

Rapha?la,

I can see a couple solutions to this. 

 - GDAL 1.3.0's configure logic for Xerces now ignores warnings so it shouldn't
   be so sensitive to this problem. 
 - Build the ECW SDK yourself from source, so that it will be linked with the
   same libstdc++ that you are using for everything else.   This can be tricky
   of course. 

Best regards, 

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dblasby at gmail.com  Mon Aug 22 11:26:01 2005
From: dblasby at gmail.com (David Blasby)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] TIGER 2004se (second edition) is out - will ogr2ogr
	handle it?
Message-ID: <89f845e8050822082612debda6@mail.gmail.com>

It looks like TIGER 2004 second edition came out late last week.  The
main page says that the file format has changed slightly:

http://www.census.gov/geo/www/tiger/tiger2004se/tgr2004se.html

Minor Changes to the File Structure
The Census Bureau has made only minor format changes for the 2004
Second Edition TIGER/Line file format. On Record Type B the Census
Bureau replaced the Urban Area, 2000 Corrected and Urban/Rural
Indicator, 2000 Corrected fields with Reserved Spaces. And on Record
Type I the TIGER 1-Cell Source Code field has become Reserved Space.

I'm just about to load the 2004 data -- I was wondering if ogr2ogr
will work with the new dataset or should I just use the first edition?
 Anyone tried it yet and noticed any problems?

dave


From fwarmerdam at gmail.com  Mon Aug 22 13:09:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] TIGER 2004se (second edition) is out - will ogr2ogr
	handle it?
In-Reply-To: <89f845e8050822082612debda6@mail.gmail.com>
References: <89f845e8050822082612debda6@mail.gmail.com>
Message-ID: <931f8ea905082210096def169@mail.gmail.com>

On 8/22/05, David Blasby <dblasby@gmail.com> wrote:
> It looks like TIGER 2004 second edition came out late last week.  The
> main page says that the file format has changed slightly:
> 
> http://www.census.gov/geo/www/tiger/tiger2004se/tgr2004se.html
> 
> Minor Changes to the File Structure
> The Census Bureau has made only minor format changes for the 2004
> Second Edition TIGER/Line file format. On Record Type B the Census
> Bureau replaced the Urban Area, 2000 Corrected and Urban/Rural
> Indicator, 2000 Corrected fields with Reserved Spaces. And on Record
> Type I the TIGER 1-Cell Source Code field has become Reserved Space.
> 
> I'm just about to load the 2004 data -- I was wondering if ogr2ogr
> will work with the new dataset or should I just use the first edition?
>  Anyone tried it yet and noticed any problems?

Dave,

It sounds like the only problem you will have is extra fields with just
spaces in them.   I would suggest using the second edition.  I presume
it includes spatial accuracy improvements for some counties as Census 
proceeds with their accuracy improvement project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From armin.burger at gmx.net  Mon Aug 22 13:11:22 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL 1.3.0, compile errors
In-Reply-To: <931f8ea905081917557d6d5e2@mail.gmail.com>
References: <43060005.4040403@gmx.net>
	<931f8ea905081917557d6d5e2@mail.gmail.com>
Message-ID: <430A073A.70202@gmx.net>

Frank Warmerdam wrote:

>On 8/19/05, Armin Burger <armin.burger@gmx.net> wrote:
>  
>
>>Hello,
>>
>>I tried to compile GDAL 1.3.0 on Debian Linux using the configuration
>>
>>./configure --with-pg=/usr/local/pgsql/bin/pg_config
>>--with-geos=yes      --with-xerces --with-xerces-lib="-L/usr/local/lib
>>-lxerces-c1_7_0 -lpthread"  --with-xerces-inc=/usr/local/include/xercesc
>>--with-ecw=/home/install/mapserver/ecwsdk-3.1.25Jan05-linux/ --with-mysql=no
>>    
>>
>
>Armin, 
>
>It seems that the Interlis driver requires a newer version of Xerces than 1.7.0.
>I would suggest your upgrading to at least Xerces 2.x.  Let me know if 
>that solves the problem.  I think I may need to advertise GDAL as depending
>on Xerces 2.0 or newer from now on. 
>
>Best regards,
>  
>
Yes, it worked now with Xerces 2.6.
Thanks

Armin

From raphaela_saling at caramail.com  Mon Aug 22 13:20:49 2005
From: raphaela_saling at caramail.com (=?ISO-8859-1?Q? Rapha=EBla=20Saling?=)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] problems building gdal with xerces and ecw
Message-ID: <20029945156284@lycos-europe.com>

Thank you very much, now all is Ok .
I try with gdal-1.3.0

Best regards,
Rapha?la
	

> De: Frank Warmerdam <fwarmerdam@gmail.com>
> A: Rapha?la Saling <raphaela_saling@caramail.com>
> Objet: Re: [Gdal-dev] problems building gdal with xerces and ecw
> Date: Mon, 22 Aug 2005 11:11:21 -0400

> On 8/22/05, Rapha?la Saling <raphaela_saling@caramail.com> wrote:
> >   
> > 
> >  /usr/bin/ld: warning: libstdc++.so.5, needed by /usr/src/pourmapserver/ecwsdk-3.1.25Jan05-linux/lib/libNCSEcw.so, may conflict with libstdc++.so.6
> 
> Rapha?la,
> 
> I can see a couple solutions to this. 
> 
>  - GDAL 1.3.0's configure logic for Xerces now ignores warnings so it shouldn't
>    be so sensitive to this problem. 
>  - Build the ECW SDK yourself from source, so that it will be linked with the
>    same libstdc++ that you are using for everything else.   This can be tricky
>    of course. 
> 
> Best regards, 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | <a href=http://pobox.com/~warmerdam>http://pobox.com/~warmerdam</a>and watch the world go round - Rush    | Geospatial Programmer for Rent

Protek-on: CaraMail met en oeuvre un nouveau Concept de S?curit? Globale - www.caramail.com
From Martin.Spott at mgras.net  Mon Aug 22 16:10:07 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dea2qh$j0m$1@osprey.mgras.de>
Message-ID: <dedbev$1dne$1@osprey.mgras.de>

Martin Spott wrote:

> BTW, I just found out that in order to compile ogdi-3.1.5 on 64 bit
> Solaris you have to alter 'ogdi/c-api/ecs_xdr.c' and turn any
> occurrence of IXDR_*_LONG intp IXDR_*_INT32, see:
[...]
> I'll report later if this actually results in a working driver  :-)

No, it does not. Neither does the driver crash nor does it recognise
the VMAP0 data as valid - which it definitely does on 32 bit Sparc.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From fwarmerdam at gmail.com  Mon Aug 22 16:38:49 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
In-Reply-To: <dedbev$1dne$1@osprey.mgras.de>
References: <ddb00j$13ak$1@osprey.mgras.de> <dea2qh$j0m$1@osprey.mgras.de>
	<dedbev$1dne$1@osprey.mgras.de>
Message-ID: <931f8ea905082213387decee9b@mail.gmail.com>

On 8/22/05, Martin Spott <Martin.Spott@mgras.net> wrote:
> Martin Spott wrote:
> 
> > BTW, I just found out that in order to compile ogdi-3.1.5 on 64 bit
> > Solaris you have to alter 'ogdi/c-api/ecs_xdr.c' and turn any
> > occurrence of IXDR_*_LONG intp IXDR_*_INT32, see:
> [...]
> > I'll report later if this actually results in a working driver  :-)
> 
> No, it does not. Neither does the driver crash nor does it recognise
> the VMAP0 data as valid - which it definitely does on 32 bit Sparc.

Martin,

Thanks for the note.  The conclusion seems to be that the OGDI VRF
driver (and possible the OGDI RPC protocol?) is not currently 64bit safe.
I am not expecting to look into this in the near future but it is good to know.
(I have replied partly as an excuse to cc: ogdidev about the issue). 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bill at binko.net  Mon Aug 22 17:14:14 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MrSID Cross-Compiler Information
Message-ID: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>

Hi everyone,

I have some good news on this front.  After discussing this with Frank, I 
went digging and found a way to link GDAL with a version of the MrSID SDK 
that was built with a different version of GCC.

This page gives the (very) gory details: http://gcc.gnu.org/onlinedocs/libstdc++/abi.html

Bug basically, if you're having linking troubles that look like this: 

 ../.libs/libgdal.so: undefined reference to `std::__default_alloc_template<true, 0>::allocate(unsigned int)' 
 ../.libs/libgdal.so: undefined reference to `std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::_Rep::_S_create(unsigned int, std::allocator<wchar_t> const&)'  

You probably are running against a library linked with an older GCC C++ 
library.

In the past the only solution known (at least to Frank and I) was to build 
a version of GDAL using the same GCC version.  After reading the above 
link, I found that you can instead just manually force the linker to link 
to both stdc++ libraries (assuming you have both on your system)

So: to accomplish this, simply make the following change in GDALmake.opt:

CONFIG_LIBS     =       $(LIBGDAL)

becomes

CONFIG_LIBS     =       $(LIBGDAL) /usr/lib/libstdc++.so.5 /usr/lib/libstdc++.so.6

A clean rebuild should solve your link errors.  I am interested to see how 
people do with this, so please contact me with any issues.

Bill



From woklist at kyngchaos.com  Mon Aug 22 19:23:05 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MrSID Cross-Compiler Information
In-Reply-To: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>
References: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>
Message-ID: <F72C08FF-5B29-421B-94E5-9C15C93ECDB4@kyngchaos.com>

Sounds cool.  No waiting for LizardTech to get crackin' on that GCC 4  
version of the libs.

But, are you sure that's CONFIG_LIBS?  That doesn't affect the GDAL  
build, just how other software links to GDAL.

Shouldn't that go in LIBS?


On Aug 22, 2005, at 4:14 PM, Bill Binko wrote:

> Hi everyone,
>
> I have some good news on this front.  After discussing this with  
> Frank, I
> went digging and found a way to link GDAL with a version of the  
> MrSID SDK
> that was built with a different version of GCC.
>
> This page gives the (very) gory details: http://gcc.gnu.org/ 
> onlinedocs/libstdc++/abi.html
>
> Bug basically, if you're having linking troubles that look like this:
>
>  ../.libs/libgdal.so: undefined reference to  
> `std::__default_alloc_template<true, 0>::allocate(unsigned int)'
>  ../.libs/libgdal.so: undefined reference to  
> `std::basic_string<wchar_t, std::char_traits<wchar_t>,  
> std::allocator<wchar_t> >::_Rep::_S_create(unsigned int,  
> std::allocator<wchar_t> const&)'
>
> You probably are running against a library linked with an older GCC  
> C++
> library.
>
> In the past the only solution known (at least to Frank and I) was  
> to build
> a version of GDAL using the same GCC version.  After reading the above
> link, I found that you can instead just manually force the linker  
> to link
> to both stdc++ libraries (assuming you have both on your system)
>
> So: to accomplish this, simply make the following change in  
> GDALmake.opt:
>
> CONFIG_LIBS     =       $(LIBGDAL)
>
> becomes
>
> CONFIG_LIBS     =       $(LIBGDAL) /usr/lib/libstdc++.so.5 /usr/lib/ 
> libstdc++.so.6
>
> A clean rebuild should solve your link errors.  I am interested to  
> see how
> people do with this, so please contact me with any issues.
>
> Bill
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin

From nilarcs at gmail.com  Mon Aug 22 22:13:37 2005
From: nilarcs at gmail.com (nilarcs)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Cannot update the shapefile's attribute with OGR
In-Reply-To: <931f8ea9050822055122d84a0f@mail.gmail.com>
References: <776a7163050822024463e5bd0b@mail.gmail.com>
	<931f8ea9050822055122d84a0f@mail.gmail.com>
Message-ID: <776a71630508221913340435fa@mail.gmail.com>

2005/8/22, Frank Warmerdam <fwarmerdam@gmail.com>:
> 
> Zhang,
> 
> OGR does not currently support "in place" update of shapefiles.  You
> can append new shapes to an existing file in update mode, but not
> modify existing shapes.
> 
> This is a limitation of Shapelib and OGR that I would like to correct
> at some point, but I wouldn't hold my breath waiting for it to be addressed.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

Thank you Frank !

It seems that I should change my way to solve this problem :)

-- 
-------------------------------------------------------------------
Zhang Jun


From pfcsergioliminiana at yahoo.es  Tue Aug 23 07:51:09 2005
From: pfcsergioliminiana at yahoo.es (Sergio Liminiana Bernat)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] A silly question?
In-Reply-To: <200508221601.j7MG1BVD020268@duke.maptools.org>
Message-ID: <20050823115110.62685.qmail@web25606.mail.ukl.yahoo.com>

Hello!

I`m very confused, Now i'm building GDAL with
vcvars32, it's looks everything is 

ok. I need to use orginfo whith GML. Then I use 

....

GDAL_HOME = "C:\GML"
BINDIR = $(GDAL_HOME)\bin
PY_INST_DIR = $(GDAL_HOME)\pymod
LIBDIR = $(GDAL_HOME)\lib
INCDIR = $(GDAL_HOME)\include
DATADIR = $(GDAL_HOME)\data
HTMLDIR = $(GDAL_HOME)\html

# Set this to the installed directory containing
python.  If you don't
# have python just let it point to a directory that
does not exist (as now). 
PYDIR   =	"C:\Software\Python24"

# Uncomment the first for an optimized build or the
second for a debug build.
#OPTFLAGS=	/nologo /MD /GX /Ox
OPTFLAGS=	/nologo /MD /GX /Zi /Fd$(GDAL_ROOT)\gdal.pdb

....
....

# Uncomment for Xerces based GML support.
#XERCES_DIR =	C:\GML\xerces-c1_7_0-win32
#XERCES_INCLUDE = -I$(XERCES_DIR)/include
-I$(XERCES_DIR)/include/xercesc
#XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

.........

I have the xerces library in this folder and its
1_7_0. About GDAL it's 1.26..., I 

build and install utilities, but when i run orginfo
with a GML file said:


Unable to create Xerces++ based GML reader. Xerces
support not configures into 

GDAL/ORG. 


(the .gml fie is created with ogr2ogr). What I do
wrong?? I thing in th nmake, but 

i don't know. Can you Help me?


		
______________________________________________ 
Renovamos el Correo Yahoo! 
Nuevos servicios, m?s seguridad 
http://correo.yahoo.es

From fwarmerdam at gmail.com  Tue Aug 23 08:42:16 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] A silly question?
In-Reply-To: <20050823115110.62685.qmail@web25606.mail.ukl.yahoo.com>
References: <200508221601.j7MG1BVD020268@duke.maptools.org>
	<20050823115110.62685.qmail@web25606.mail.ukl.yahoo.com>
Message-ID: <931f8ea9050823054213ec4032@mail.gmail.com>

On 8/23/05, Sergio Liminiana Bernat <pfcsergioliminiana@yahoo.es> wrote:
> ....
> 
> # Uncomment for Xerces based GML support.
> #XERCES_DIR =   C:\GML\xerces-c1_7_0-win32
> #XERCES_INCLUDE = -I$(XERCES_DIR)/include
> -I$(XERCES_DIR)/include/xercesc
> #XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

The hatch marks (#) at the beginning of the above lines
makes the lines into comments.  You need to remove
the hatch marks  for the xerces options to be enabled. 

eg. 

> # Uncomment for Xerces based GML support.
#XERCES_DIR =   C:\GML\xerces-c1_7_0-win32
#XERCES_INCLUDE = -I$(XERCES_DIR)/include -I$(XERCES_DIR)/include/xercesc
#XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

Note that you should do a "nmake /f makefile.vc clean" before
rebuilding to ensure everything needing the configuration options
gets rebuilt.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From BEN at Syncera-ITSolutions.NL  Tue Aug 23 11:26:17 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] adding gcp's
Message-ID: <s30b5c4c.026@syncera.nl>

Hi list,

I am trying to create a geotiff and add ground control points to it, using the following command:

gdal_translate ondergrond.tif ondergrond_new.tif -gcp 0 0 63978 458335 -gcp 1290 1619 85630 438699

When I do gdalinfo, the gcp's are added, but the corner info is not using it:

D:\ms4w\apps\stragisweb\htdocs\sites\westland\data\basis\geo>gdalinfo ondergrond_new.tif
Driver: GTiff/GeoTIFF
Size is 1290, 1169
Coordinate System is `'
GCP Projection =
GCP[  0]: Id=1, Info=
          (0,0) -> (63978,458335,0)
GCP[  1]: Id=2, Info=
          (1290,1619) -> (85630,438699,0)
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=150
  TIFFTAG_YRESOLUTION=150
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1169.0)
Upper Right ( 1290.0,    0.0)
Lower Right ( 1290.0, 1169.0)
Center      (  645.0,  584.5)
Band 1 Block=1290x6 Type=Byte, ColorInterp=Red
Band 2 Block=1290x6 Type=Byte, ColorInterp=Green
Band 3 Block=1290x6 Type=Byte, ColorInterp=Blue

What am I doing wrong?

Thanks in advance.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl



From Ken.Boss at dnr.state.mn.us  Tue Aug 23 11:27:47 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] gdal_translate and vrt to ecw - unable to allocate enough
	memory
Message-ID: <s30afa2d.052@co5.dnr.state.mn.us>

Hello Frank and list--

I am attempting (again) to use a VRT full of geotiffs as input to gdal_translate (from FWTools0.9.9), outputting to ECW.  The VRT describes a 307060 x 464371 RGB mosaic.  I'm on a 3 Ghz WinXP machine w/1 GB RAM.

My command looks like:

gdal_translate -of ECW --config ECW_LARGE_OK YES -co target=95 d:\ecw_test\vrt\megamosaic.vrt d:\ecw_test\ecw\megamosaic.ecw

After a few seconds, I get an error:

Input file size is 307060, 464371
0.ERROR 1: An error has occurred: Error 46 "Could not allocate enough memory"  file "C:\warmerda\supportlibs\fw_ecwsdk_apr05\include\NCSError.h" line 53

This is an appreciated improvement over what I was seeing under FWTools0.9.8, where I would get a CPLMalloc() error after a half day or so of processing.  But obviously I am still unable to produce the file I'm after.

Is this to be considered a recognized limitation of this gdal_translate/vrt/ecw mix, or is there possibly some means of either reducing the required memory footprint, or pre-determining the amount of RAM I'd need to have installed in order to complete such a process?

BTW, of course the file referenced in the error message doesn't exist anywhere on my system.  I assume this is simply a compile-time artifact?

--Ken



From fwarmerdam at gmail.com  Tue Aug 23 11:50:47 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] adding gcp's
In-Reply-To: <s30b5c4c.026@syncera.nl>
References: <s30b5c4c.026@syncera.nl>
Message-ID: <931f8ea9050823085011533aab@mail.gmail.com>

On 8/23/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list,
> 
> I am trying to create a geotiff and add ground control points to it, using the following command:
> 
> gdal_translate ondergrond.tif ondergrond_new.tif -gcp 0 0 63978 458335 -gcp 1290 1619 85630 438699
> 
> When I do gdalinfo, the gcp's are added, but the corner info is not using it:

Bart,

A review of the gdalinfo code shows that it does not try and
use GCPs for computing georefencing.  It will only use a 
geotransform (if available). 

Sorry...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Tue Aug 23 12:17:10 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dea2qh$j0m$1@osprey.mgras.de>
	<931f8ea905082213387decee9b@mail.gmail.com>
Message-ID: <defi66$10rq$1@osprey.mgras.de>

Frank Warmerdam wrote:

> Thanks for the note.  The conclusion seems to be that the OGDI VRF
> driver (and possible the OGDI RPC protocol?) is not currently 64bit safe.

.... apparently not only the OGDI driver. I thought I'd convert the
VMAP0 data to Shapefiles on the 32 bit Sparc platform via OGDI/GDAL and
import these into the database on the 64 bit machine via GDAL as well.
This actually works without any trouble.
Now I want to dump the resulting database to compare it with the one I
run at home on 32 bit AIX, but during dump the 'postgres' process on
the UltraSparc dies after consuming all availabe memory.

The conclusion seems to be that it is at all a bad idea (TM) to run
this sort of stuff in a 64 bit environment.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From dblasby at gmail.com  Tue Aug 23 12:29:05 2005
From: dblasby at gmail.com (David Blasby)
Date: Wed Nov 21 11:49:43 2007
Subject: Fwd: [Gdal-dev] TIGER 2004se (second edition) is out - will
	ogr2ogrhandle it?
In-Reply-To: <89f845e805082309242ebe3935@mail.gmail.com>
References: <89f845e8050822082612debda6@mail.gmail.com>
	<000101c5a7fc$aaf04f40$705b88cc@BlackFin>
	<89f845e805082309242ebe3935@mail.gmail.com>
Message-ID: <89f845e8050823092952d462ef@mail.gmail.com>

Roger,


I'm just in the process of loading TIGER data, and I've written some
documentation on how to do it.

The document is long and a bit raw (I'm waiting for our new machine to
arrive before I test on an area larger than NY); most of it is QA/QC
checks.  There's a bug in the OGR polygon building functions -- there's
a long document explaining how to rebuild the polygons using
postgis/GEOS commands.

A much more detailed summary is here:
http://docs.codehaus.org/display/GEOS/Load+TIGER+to+PostGIS
http://docs.codehaus.org/display/GEOS/Dealing+with+tigerpoly.pl+problems

Remember, this is a bit raw; I'll update it at the end of this week,
when our machine arrives.

I process the data into "raw" (what ogr2ogr spits out) data tables,
and I also build several tables of processed data.

dave


From bartvde at xs4all.nl  Tue Aug 23 13:47:07 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] adding gcp's
In-Reply-To: <931f8ea9050823085011533aab@mail.gmail.com>
References: <s30b5c4c.026@syncera.nl>
	<931f8ea9050823085011533aab@mail.gmail.com>
Message-ID: <op.svy2ctxbmjfraz@bart.lan>

Hi Frank,

so will this generated file work with Mapserver (my experience is that it  
would not show up with Mapserver)?

Is the only way to work around it add a tfw or TAB file?

Best regards,
Bart

On Tue, 23 Aug 2005 17:50:47 +0200, Frank Warmerdam <fwarmerdam@gmail.com>  
wrote:

> On 8/23/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
>> Hi list,
>>
>> I am trying to create a geotiff and add ground control points to it,  
>> using the following command:
>>
>> gdal_translate ondergrond.tif ondergrond_new.tif -gcp 0 0 63978 458335  
>> -gcp 1290 1619 85630 438699
>>
>> When I do gdalinfo, the gcp's are added, but the corner info is not  
>> using it:
>
> Bart,
>
> A review of the gdalinfo code shows that it does not try and
> use GCPs for computing georefencing.  It will only use a
> geotransform (if available).
>
> Sorry...
>
> Best regards,



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From jgreenberg at arc.nasa.gov  Tue Aug 23 14:06:28 2005
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Installing header files?
Message-ID: <200508231806.j7NI6iZO030368@duke.maptools.org>

Is there a trick to getting GDAL 1.3.0 to install all the header files in
the appropriate locations?  I can probably hand-copy them, but I'm trying to
compile GRASS 6.1, for instance, and it needs the jpeglib.h include.  I did
a file search and found it IN the gdal-1.3.0 source distribution but it does
not appear to get installed when I do a configure-> make-> make install.

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com



From fwarmerdam at gmail.com  Tue Aug 23 14:17:32 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Installing header files?
In-Reply-To: <200508231806.j7NI6iZO030368@duke.maptools.org>
References: <200508231806.j7NI6iZO030368@duke.maptools.org>
Message-ID: <931f8ea90508231117703feaf4@mail.gmail.com>

On 8/23/05, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> Is there a trick to getting GDAL 1.3.0 to install all the header files in
> the appropriate locations?  I can probably hand-copy them, but I'm trying to
> compile GRASS 6.1, for instance, and it needs the jpeglib.h include.  I did
> a file search and found it IN the gdal-1.3.0 source distribution but it does
> not appear to get installed when I do a configure-> make-> make install.

Jonathan, 

GDAL only installs it's own *public* include files.  The jpeg
include files are not related to the public interface of GDAL
and so are not installed.  I would suggest you download and
install libjpeg separately.   You can find info on it at:

  http://www.ijg.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From luciano at inflor.com.br  Tue Aug 23 14:57:25 2005
From: luciano at inflor.com.br (Luciano Lovate Fardin)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MS4W, GDAL/OGR and Oracle Spatial
Message-ID: <430B7195.7030609@inflor.com.br>

Hi,

we're using MS4W v1.2.1, and we have recompiled GDAL library v1.2.6 to 
support Oracle Spatial. The connection with Oracle works fine and all 
features were displayed without any problem. The problem happens only 
when we try to use the "Query" function in Mapserver. In that case, 
Oracle returns to Mapserver the correct data, but in screen the data 
shown belongs to another feature than the selected one, when anything is 
shown. In most cases, nothing returns...
We tried also to recomplie GDAL v1.3.0, but it seens MS4W v1.2.1 doesn't 
support this version...

does anyone have any idea to solve this problem?

thankz
-- 
Luciano Lovate Fardin
Analista Desenvolvedor
INFLOR Consultoria e Sistemas Ltda.
Email: luciano@inflor.com.br
Tel: +55 (27) 2122-0888 - Ramal: 854
http://www.inflor.com.br

From bartvde at xs4all.nl  Tue Aug 23 15:02:10 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: [ms4w-users] MS4W, GDAL/OGR and Oracle Spatial
In-Reply-To: <430B7195.7030609@inflor.com.br>
References: <430B7195.7030609@inflor.com.br>
Message-ID: <op.svy5twvjmjfraz@bart.lan>

Does your table have a primary key?

Best regards,
Bart

On Tue, 23 Aug 2005 20:57:25 +0200, Luciano Lovate Fardin  
<luciano@inflor.com.br> wrote:

> Hi,
>
> we're using MS4W v1.2.1, and we have recompiled GDAL library v1.2.6 to  
> support Oracle Spatial. The connection with Oracle works fine and all  
> features were displayed without any problem. The problem happens only  
> when we try to use the "Query" function in Mapserver. In that case,  
> Oracle returns to Mapserver the correct data, but in screen the data  
> shown belongs to another feature than the selected one, when anything is  
> shown. In most cases, nothing returns...
> We tried also to recomplie GDAL v1.3.0, but it seens MS4W v1.2.1 doesn't  
> support this version...
>
> does anyone have any idea to solve this problem?
>
> thankz



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From ben at vterrain.org  Tue Aug 23 17:52:07 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MSVC7.1 project files for GDAL 1.3.0
Message-ID: <200508232152.j7NLqCL2004273@duke.maptools.org>


I have updated the MSVC solution/project files for GDAL, and placed them
here:
http://vterrain.org/dist/gdal130_vc71.zip  (22k)

I also built GDAL and created these binaries, in case someone would prefer
to skip building GDAL themselves.  It includes the headers, data, pymod
folder, Debug and Release libraries and DLLs, and the GDAL applications
compiled for Release:
http://vterrain.org/dist/gdal-130-ntbin.zip (2.8MB)

It would be fine to link directly to these, if it would be useful for the
GDAL site to do so.

-Ben


From jgreenberg at arc.nasa.gov  Tue Aug 23 17:58:04 2005
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Order of ops for GRASS with GDAL support install?
Message-ID: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>

BABA Yoshihiko has been doing a great job getting GDAL and GRASS working
under the fink package manager, but I'm noticing a slightly odd way of
getting GRASS with GDAL support -- am I correct in noticing there are
cyclical dependencies, e.g. You have to first compile gdal, then compile
grass with gdal support, then compile gdal with grass support?  If this is
true, is there any way to get around this?

--j


-- 
Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com



From archer at eskimo.com  Tue Aug 23 18:10:03 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] 1.3.0 no worky on SuSE 9.0
In-Reply-To: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
Message-ID: <Pine.SUN.4.58.0508231505130.26968@eskimo.com>


I compiled gdal-1.3.0 just fine on my SuSE 9.1 system, but my SuSE
9.0 system is not happy with the new version.  1.2.3 compiles fine
there.  I just tried gdal-cvs to see if the problems have been fixed
in CVS.  They haven't, so I'm reporting the problem here:


> make
(cd port; make)
make[1]: Entering directory `/home/src/gdal/gdal-cvs/port'
g++    -c -o cpl_conv.o cpl_conv.cpp
cpl_conv.cpp: In function `void* CPLScanPointer(const char*, int)':
cpl_conv.cpp:745: warning: cast to pointer from integer of different size
g++    -c -o cpl_error.o cpl_error.cpp
g++    -c -o cpl_string.o cpl_string.cpp
g++    -c -o cpl_vsisimple.o cpl_vsisimple.cpp
g++    -c -o cplgetsymbol.o cplgetsymbol.cpp
g++    -c -o cpl_dir.o cpl_dir.cpp
g++    -c -o cpl_path.o cpl_path.cpp
g++    -c -o cpl_csv.o cpl_csv.cpp
g++    -c -o cpl_findfile.o cpl_findfile.cpp
g++    -c -o cpl_vsil_unix_stdio_64.o cpl_vsil_unix_stdio_64.cpp
g++    -c -o cpl_minixml.o cpl_minixml.cpp
g++    -c -o cpl_multiproc.o cpl_multiproc.cpp
g++    -c -o cpl_list.o cpl_list.cpp
g++    -c -o cpl_getexecpath.o cpl_getexecpath.cpp
make[1]: Leaving directory `/home/src/gdal/gdal-cvs/port'
(cd gcore; make)
make[1]: Entering directory `/home/src/gdal/gdal-cvs/gcore'
g++     -c -o gdalopeninfo.o gdalopeninfo.cpp
In file included from gdal_priv.h:237,
                 from gdalopeninfo.cpp:36:
gdal.h:234: error: syntax error before `(' token
gdal.h:235: error: syntax error before `(' token
gdal.h:236: error: syntax error before `(' token
gdal.h:237: error: syntax error before `(' token
gdal.h:238: error: syntax error before `(' token
gdal.h:317: error: parse error before `*' token
gdal.h:318: error: syntax error before `(' token
gdal.h:319: error: syntax error before `(' token


Easy fix?

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Tue Aug 23 18:42:54 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] 1.3.0 no worky on SuSE 9.0
In-Reply-To: <Pine.SUN.4.58.0508231505130.26968@eskimo.com>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
	<Pine.SUN.4.58.0508231505130.26968@eskimo.com>
Message-ID: <Pine.SUN.4.58.0508231541430.26968@eskimo.com>

On Tue, 23 Aug 2005, Curt, WE7U wrote:

> I compiled gdal-1.3.0 just fine on my SuSE 9.1 system, but my SuSE
> 9.0 system is not happy with the new version.  1.2.3 compiles fine
> there.  I just tried gdal-cvs to see if the problems have been fixed
> in CVS.  They haven't, so I'm reporting the problem here:

 ./configure --without-jasper --without-mysql

Let it compile all the way through.  Perhaps some of the header
files I have on that system are just too old, or configure makes the
wrong assumptions about the system.  Not a big deal in any case.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Tue Aug 23 19:08:53 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] 1.3.0 no worky on SuSE 9.0
In-Reply-To: <Pine.SUN.4.58.0508231505130.26968@eskimo.com>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
	<Pine.SUN.4.58.0508231505130.26968@eskimo.com>
Message-ID: <Pine.SUN.4.58.0508231607040.26968@eskimo.com>

On Tue, 23 Aug 2005, Curt, WE7U wrote:

>
> I compiled gdal-1.3.0 just fine on my SuSE 9.1 system, but my SuSE
> 9.0 system is not happy with the new version.  1.2.3 compiles fine
> there.  I just tried gdal-cvs to see if the problems have been fixed
> in CVS.  They haven't, so I'm reporting the problem here:
>
>
> > make
> (cd port; make)
> make[1]: Entering directory `/home/src/gdal/gdal-cvs/port'
> g++    -c -o cpl_conv.o cpl_conv.cpp
> cpl_conv.cpp: In function `void* CPLScanPointer(const char*, int)':
> cpl_conv.cpp:745: warning: cast to pointer from integer of different size
> g++    -c -o cpl_error.o cpl_error.cpp
> g++    -c -o cpl_string.o cpl_string.cpp
> g++    -c -o cpl_vsisimple.o cpl_vsisimple.cpp
> g++    -c -o cplgetsymbol.o cplgetsymbol.cpp
> g++    -c -o cpl_dir.o cpl_dir.cpp
> g++    -c -o cpl_path.o cpl_path.cpp
> g++    -c -o cpl_csv.o cpl_csv.cpp
> g++    -c -o cpl_findfile.o cpl_findfile.cpp
> g++    -c -o cpl_vsil_unix_stdio_64.o cpl_vsil_unix_stdio_64.cpp
> g++    -c -o cpl_minixml.o cpl_minixml.cpp
> g++    -c -o cpl_multiproc.o cpl_multiproc.cpp
> g++    -c -o cpl_list.o cpl_list.cpp
> g++    -c -o cpl_getexecpath.o cpl_getexecpath.cpp
> make[1]: Leaving directory `/home/src/gdal/gdal-cvs/port'
> (cd gcore; make)
> make[1]: Entering directory `/home/src/gdal/gdal-cvs/gcore'
> g++     -c -o gdalopeninfo.o gdalopeninfo.cpp
> In file included from gdal_priv.h:237,
>                  from gdalopeninfo.cpp:36:
> gdal.h:234: error: syntax error before `(' token


After configuring/compiling successfully with:

    ./configure --without-jasper --without-mysql

and then doing a "make clean", if I just type "./configure" and then
"make", I don't get the same error as before.  It's as if the "make
clean" isn't hitting all of the directories it should.  Possible?

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From fwarmerdam at gmail.com  Tue Aug 23 19:26:08 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] 1.3.0 no worky on SuSE 9.0
In-Reply-To: <Pine.SUN.4.58.0508231607040.26968@eskimo.com>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
	<Pine.SUN.4.58.0508231505130.26968@eskimo.com>
	<Pine.SUN.4.58.0508231607040.26968@eskimo.com>
Message-ID: <931f8ea905082316265a5d6719@mail.gmail.com>

On 8/23/05, Curt, WE7U <archer@eskimo.com> wrote:
> > g++     -c -o gdalopeninfo.o gdalopeninfo.cpp
> > In file included from gdal_priv.h:237,
> >                  from gdalopeninfo.cpp:36:
> > gdal.h:234: error: syntax error before `(' token

Curt,

Normally when I see these syntax errors on gdal.h:234 (the
first use of the new CPL_STDCALL symbol), I assume it relates
to picking up old GDAL include files.  But your compile line
has essentially no arguments (no include directives, etc).  I 
guess it must be picking up old include files from /usr/local/include.

But the real question is what went wrong with the configure 
that would screw up all the normal options (like -I../port).  
We used to get this problem with old versions of the mysql-config
script which would screw up the configure script and cause it to
not complete properly.  

However, that was all fixed up some time ago.  Perhaps something
similar to that has come up again. 

If you feel like helping me track it down, we should re-run the
original configure and see if we can see anything odd in it's
output (or in config.log). 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Aug 23 19:31:08 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Order of ops for GRASS with GDAL support install?
In-Reply-To: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov>
Message-ID: <931f8ea90508231631620cd2af@mail.gmail.com>

On 8/23/05, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> BABA Yoshihiko has been doing a great job getting GDAL and GRASS working
> under the fink package manager, but I'm noticing a slightly odd way of
> getting GRASS with GDAL support -- am I correct in noticing there are
> cyclical dependencies, e.g. You have to first compile gdal, then compile
> grass with gdal support, then compile gdal with grass support?  If this is
> true, is there any way to get around this?

Jonathan, 

Yes, there is a cyclical dependency.  In the Debian packaging
group, they can't really have that, as they can't seem to force
the package building machinery build and then rebuild GDAL
later.  So what we did was handle the GDAL/GRASS driver as
a separate package which GDAL finds as a plugin.  

For that purpose, the GRASS driver is offered as a separate
source package as well but I won't point you to that yet, because
I want to provide a unified GRASS driver package for GDAL 1.3.0
that includes the OGR GRASS vector drive that Radim implemented
recently. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ben at vterrain.org  Wed Aug 24 02:59:24 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Small memleak: no CPLCleanupTLS for non-pthreads
In-Reply-To: <931f8ea905082206067d960271@mail.gmail.com>
Message-ID: <200508240659.j7O6xWRK020853@duke.maptools.org>

> > On Windows, it defaults to CPL_MULTIPROC_WIN32, so there is no
> > CPLCleanupTLS() code.  Should it be added, or is there any 
> > other way to release this memory?

Frank wrote:
> Pthreads has a mechanism to register a callback function for 
> cleanup with a TLS object but I am not aware of a 
> corresponding mechanism for the win32 api.

Would it perhaps be better to avoid the messiness and portability issues of
an atexit-style callback, and simply expose the function to the user?

It seems reasonable that my application could call CPLCleanupTLS() during
shutdown, after it is done with GDAL.  Currently, it does this:
	GDALDestroyDriverManager();
	OSRCleanup();
	CPLFinderClean();
	delete OGRSFDriverRegistrar::GetRegistrar();

Exposing one more function (CPLCleanupTLS) in order to avoid memleaks would
be worth it.  But, i would not be surprised if there are threading
complexities that i am not realizing.

-Ben


From vincent at ecovla.nl  Wed Aug 24 03:05:42 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] adding gcp's
In-Reply-To: <op.svy2ctxbmjfraz@bart.lan>
References: <s30b5c4c.026@syncera.nl>	<931f8ea9050823085011533aab@mail.gmail.com>
	<op.svy2ctxbmjfraz@bart.lan>
Message-ID: <430C1C46.7020300@ecovla.nl>

I'd try to run gdalwarp on the geotiff with the gcp's. Probably that
will process the gcp info and create a georeferenced file from it.

Vincent.

Bart van den Eijnden wrote:

> Hi Frank,
>
> so will this generated file work with Mapserver (my experience is that
> it  would not show up with Mapserver)?
>
> Is the only way to work around it add a tfw or TAB file?
>
> Best regards,
> Bart
>
> On Tue, 23 Aug 2005 17:50:47 +0200, Frank Warmerdam
> <fwarmerdam@gmail.com>  wrote:
>
>> On 8/23/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
>>
>>> Hi list,
>>>
>>> I am trying to create a geotiff and add ground control points to
>>> it,  using the following command:
>>>
>>> gdal_translate ondergrond.tif ondergrond_new.tif -gcp 0 0 63978
>>> 458335  -gcp 1290 1619 85630 438699
>>>
>>> When I do gdalinfo, the gcp's are added, but the corner info is not 
>>> using it:
>>
>>
>> Bart,
>>
>> A review of the gdalinfo code shows that it does not try and
>> use GCPs for computing georefencing.  It will only use a
>> geotransform (if available).
>>
>> Sorry...
>>
>> Best regards,
>
>
>
>


From neteler at itc.it  Wed Aug 24 04:53:19 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: [GRASSLIST:8037] Order of ops for GRASS with GDAL
	support install?
In-Reply-To: <BF30E976.725A%jgreenberg@arc.nasa.gov>
References: <BF30E976.725A%jgreenberg@arc.nasa.gov>
Message-ID: <20050824085319.GC8509@thuille.itc.it>

On Tue, Aug 23, 2005 at 02:55:50PM -0700, Jonathan Greenberg wrote:
> BABA Yoshihiko has been doing a great job getting GDAL and GRASS working
> under the fink package manager, but I'm noticing a slightly odd way of
> getting GRASS with GDAL support -- am I correct in noticing there are
> cyclical dependencies, e.g. You have to first compile gdal, then compile
> grass with gdal support, then compile gdal with grass support?  If this is
> true, is there any way to get around this?

I am doping this procedure:

HOWTO compile GDAL/GRASS/GRASS-plugin:
  1. compile GDAL without GRASS support (see ./conf_gdal.sh [1] )
  2. compile GRASS itself (see ./conf_grass61_linux.sh [1] )
  3. configure/compile/install GDAL/GRASS plugin (see ./conf_install_gdal_grass_plugin.sh [1])
  4. link GRASS libs into /usr/local/lib/
  5. run 'ldconfig' (as root)

[1] http://mpa.itc.it/markus/useful/

Hope this helps

 Markus

From neteler at itc.it  Wed Aug 24 12:16:01 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: [GRASSLIST:8037] Order of ops for GRASS with GDAL
	support install?
In-Reply-To: <20050824085319.GC8509@thuille.itc.it>
References: <BF30E976.725A%jgreenberg@arc.nasa.gov>
	<20050824085319.GC8509@thuille.itc.it>
Message-ID: <20050824161601.GA31555@thuille.itc.it>

On Wed, Aug 24, 2005 at 10:53:19AM +0200, Markus Neteler wrote:
> On Tue, Aug 23, 2005 at 02:55:50PM -0700, Jonathan Greenberg wrote:
> > BABA Yoshihiko has been doing a great job getting GDAL and GRASS working
> > under the fink package manager, but I'm noticing a slightly odd way of
> > getting GRASS with GDAL support -- am I correct in noticing there are
> > cyclical dependencies, e.g. You have to first compile gdal, then compile
> > grass with gdal support, then compile gdal with grass support?  If this is
> > true, is there any way to get around this?
> 
> I am doping this procedure:
> 
> HOWTO compile GDAL/GRASS/GRASS-plugin:
>   1. compile GDAL without GRASS support (see ./conf_gdal.sh [1] )
>   2. compile GRASS itself (see ./conf_grass61_linux.sh [1] )
>   3. configure/compile/install GDAL/GRASS plugin (see ./conf_install_gdal_grass_plugin.sh [1])
>   4. link GRASS libs into /usr/local/lib/
>   5. run 'ldconfig' (as root)
> 
> [1] http://mpa.itc.it/markus/useful/
> 

Sorry: revised procedure (I just tested it on a "fresh" machine):

HOWTO compile OGR/GRASS/GRASS-plugin:
  1. compile GDAL/OGR without GRASS support (see ./conf_gdal.sh )
  2. compile GRASS itself (see ./conf_grass61_linux.sh )
  3. link GRASS libs into /usr/local/lib/
  4. run 'ldconfig' (as root)
  5. run this script to configure/compile/install OGR/GRASS plugin
     (may require root permissions)

Frank, we are looking forward to the unification of the GRASS drivers :-)

Markus


From peter.kingsbury at gmail.com  Wed Aug 24 13:16:25 2005
From: peter.kingsbury at gmail.com (Peter Kingsbury)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL+MrSID on Apache+MapServer in Chameleon application
Message-ID: <430CAB69.4000105@gmail.com>

Hello all,

I am attempting to enable MrSID functionality in Chameleon, and have 
come to a roadblock. I am trying to compare performance between SID and 
TIF files, to see if it is a viable format for my application.

The host is Windows XP SP2, GDAL 1.3.0 + MrSID on Apache 4 + MapServer 
(MS4W), using the Chameleon application.

I've been ekeing my way through compiling the GDAL library, learning how 
to integrate the DLL into Apache, and expose the SID 
decompression/display in Chameleon. So far I've been compiling the DSDK 
from Lizardtech alright, and I've (to my knowledge) pointed the 
apache.conf GDAL plugin variable to the correct directory (have tried 
relative and absolute).

I've also modified nmake.opt as follows, and compiled GDAL afterward. 
The resulting gdal13.dll is larger than without the below options, so I 
am assuming it worked properly.
#########################################################
# Uncomment the following for MrSID support.
# You will likely require /MD and /EHsc in OPTFLAGS.
MRSID_DIR =    C:\Development\SDK\Geo_DSDK-5.0.6.955
MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include\support \
        -I$(MRSID_DIR)\include\metadata \
        -I$(MRSID_DIR)\include\mrsid_readers \
        -I$(MRSID_DIR)\include\j2k_readers
MRSID_LIB =    $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib advapi32.lib 
user32.lib
# Enable these, if you have the MrSID Encoding SDK and want
# to create MrSID files
#MRSID_FLAGS =    -DMRSID_ESDK_VERSION_40 $(MRSID_FLAGS)
#MRSID_INCLUDE = -I$(MRSID_DIR)\include\mrsid_writers \
#        -I$(MRSID_DIR)\include\j2k_writers $(MRSID_INCLUDE)
#MRSID_LIB =    $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib $(MRSID_LIB)-
# Enable the following if you prefer to build MrSID support as a plugin.
#MRSID_PLUGIN = YES
#########################################################

My apache.conf plugin section looks like this. I have also tried the 
relative path option, same results.
#########################################################
# set GDAL_DATA environment variable to location of supporting gdal files
SetEnv GDAL_DATA "/ms4w/gdaldata"

# set GDAL_DRIVER_PATH environment variable for gdal plugins
#SetEnv GDAL_DRIVER_PATH "/ms4w/gdalplugins"
SetEnv GDAL_DRIVER_PATH "C:/ms4w/gdalplugins"
#########################################################

However, after restarting Apache, and I pointing my Chameleon MAP file 
to the SID files in the data directory (same dir where the working TIF 
files exist), a broken map image link results.

I'm not really sure where to go from here, so I thought I would try a 
few different avenues of support before I pull my hair out :)

Can anyone point me in the correct direction to reach my goal?

Best regards,
- Peter


From fwarmerdam at gmail.com  Wed Aug 24 16:33:17 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL+MrSID on Apache+MapServer in Chameleon application
In-Reply-To: <430CAB69.4000105@gmail.com>
References: <430CAB69.4000105@gmail.com>
Message-ID: <931f8ea905082413331a09e7d@mail.gmail.com>

On 8/24/05, Peter Kingsbury <peter.kingsbury@gmail.com> wrote:
> Hello all,
> 
> I am attempting to enable MrSID functionality in Chameleon, and have
> come to a roadblock. I am trying to compare performance between SID and
> TIF files, to see if it is a viable format for my application.
> 
> The host is Windows XP SP2, GDAL 1.3.0 + MrSID on Apache 4 + MapServer
> (MS4W), using the Chameleon application.

Peter,

Does "gdalinfo --format mrsid" report some information indicating
the driver is available?  Does gdalinfo on the file in question
work?

What version of MS4W are you using?  I hadn't realized a new
one with GDAL 1.3.0 had been released.  If you are using an 
MS4W with GDAL 1.2.6 or earlier, then you cannot just replace
the GDAL DLL with a new 1.3.0 one and have it work.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Wed Aug 24 17:01:57 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] adding gcp's
In-Reply-To: <op.svy2ctxbmjfraz@bart.lan>
References: <s30b5c4c.026@syncera.nl>
	<931f8ea9050823085011533aab@mail.gmail.com>
	<op.svy2ctxbmjfraz@bart.lan>
Message-ID: <931f8ea90508241401296b0f0@mail.gmail.com>

On 8/23/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> Hi Frank,
> 
> so will this generated file work with Mapserver (my experience is that it
> would not show up with Mapserver)?

Bart,

You are correct that MapServer does not currently support rasters
with only GCP georeferencing. 
 
> Is the only way to work around it add a tfw or TAB file?
 
As Vincent suggested, you can use gdalwarp to rectify the image
and produce something that can be used in mapserver.   You could
add a .tfw file since you clearly have an affine transformation for your
two control points. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Wed Aug 24 19:58:07 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Small memleak: no CPLCleanupTLS for non-pthreads
In-Reply-To: <200508240659.j7O6xWRK020853@duke.maptools.org>
References: <931f8ea905082206067d960271@mail.gmail.com>
	<200508240659.j7O6xWRK020853@duke.maptools.org>
Message-ID: <931f8ea90508241658190a9fd8@mail.gmail.com>

On 8/24/05, Ben Discoe <ben@vterrain.org> wrote:
> Would it perhaps be better to avoid the messiness and portability issues of
> an atexit-style callback, and simply expose the function to the user?
> 
> It seems reasonable that my application could call CPLCleanupTLS() during
> shutdown, after it is done with GDAL.  Currently, it does this:
>         GDALDestroyDriverManager();
>         OSRCleanup();
>         CPLFinderClean();
>         delete OGRSFDriverRegistrar::GetRegistrar();
> 
> Exposing one more function (CPLCleanupTLS) in order to avoid memleaks would
> be worth it.  But, i would not be surprised if there are threading
> complexities that i am not realizing.

Ben,

I have implemented a general version of CPLCleanupTLS() that
you would need to call in each thread before exiting to ensure
proper TLS cleanup.  I have done a quick test on all three
build types (Win32, pthreads and stubbed).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From baba.yoshihiko at gmail.com  Thu Aug 25 07:50:34 2005
From: baba.yoshihiko at gmail.com (BABA Yoshihiko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Re: [GRASSLIST:8037] Order of ops for GRASS with GDAL
	support install?
In-Reply-To: <20050824161601.GA31555@thuille.itc.it>
References: <BF30E976.725A%jgreenberg@arc.nasa.gov>
	<20050824085319.GC8509@thuille.itc.it>
	<20050824161601.GA31555@thuille.itc.it>
Message-ID: <ba6f520405082504507e2a7e47@mail.gmail.com>

Hi all,

I'm the maintainer of the both packages for MacOSX/Fink.

2005/8/25, Markus Neteler <neteler@itc.it>:

> > I am doping this procedure:
> >
> > HOWTO compile GDAL/GRASS/GRASS-plugin:
> >   1. compile GDAL without GRASS support (see ./conf_gdal.sh [1] )
> >   2. compile GRASS itself (see ./conf_grass61_linux.sh [1] )
> >   3. configure/compile/install GDAL/GRASS plugin (see ./conf_install_gdal_grass_plugin.sh [1])
> >   4. link GRASS libs into /usr/local/lib/
> >   5. run 'ldconfig' (as root)
> >
> > [1] http://mpa.itc.it/markus/useful/
> >
> 
> Sorry: revised procedure (I just tested it on a "fresh" machine):
> 
> HOWTO compile OGR/GRASS/GRASS-plugin:
>   1. compile GDAL/OGR without GRASS support (see ./conf_gdal.sh )
>   2. compile GRASS itself (see ./conf_grass61_linux.sh )
>   3. link GRASS libs into /usr/local/lib/
>   4. run 'ldconfig' (as root)
>   5. run this script to configure/compile/install OGR/GRASS plugin
>      (may require root permissions)
> 
> Frank, we are looking forward to the unification of the GRASS drivers :-)

Is it better to wait until this driver thing?

>From now is rather a MacOSX/Fink specific issue. Currently, ths issue
is cyclical dependency. To have different configure options of gdal,
Fink policy requires gdal to be separated packages, such as gdal (no
grass) and gdal-grass. I want a package most "newbie" users need to be
teh default. And all the packages that depend on gdal must add
gdal-grass as an alternative, which could be a nightmare (not all the
packages are maitained by myself).

A possible solution, which I have show in Fink ML before, is to have
gdal and gdal-grass families. A slight modification in my brain is to
have libgdal, libgdal-grass, gdal-dev (headers) and gdal-bin. GRASS
depends on gdal-dev at build time and on gdal | gdal-grass at
run-time.

There are several other possibilities. For example, libgdal-nograss
and libgdal-grass, both of which "Provides" gdal. "Provides" sounds a
good solution, but it cannot manage version specific dependency.

Another option is to build gdal with grass support even if grass is
not installed. First, get grass source from the web, then build gdal
with grass headers and other requirements. I don't know if it would
work.

Any comment would be appreciated.

Thank you
-- 
BABA Yoshihiko
http://homepage.mac.com/babayoshihiko/fink/todo.html


From nerwolf at yahoo.es  Thu Aug 25 12:55:37 2005
From: nerwolf at yahoo.es (sergio andres perez navaez)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Usin OGR and GML with files of
	http://www.geoportal-idec.net/wfs
Message-ID: <20050825165537.83275.qmail@web31104.mail.mud.yahoo.com>

I built my Gdal 1.3 with Xerces 2.6 

I have download GML files of Catalonia in
http://www.geoportal-idec.net. the files start like
this:

--------------
----------------------------------------

<?xml version="1.0" encoding="UTF-8"?>
<wfs:FeatureCollection
xmlns:wfs="http://www.geoportal-idec.net/wfs"
xmlns:gml="http://www.opengis.net/gml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.geoportal-idec.net/wfs
Comarques.xsd">
<gml:boundedBy>
<gml:Box
srsName="EPSG:23031"><gml:coordinates>260422.092189937,4488999.69
527466.55,4748098.29</gml:coordinates></gml:Box>
</gml:boundedBy>
<gml:featureMember>
<wfs:comp_polygon>
<wfs:AREA>632964864.50882</wfs:AREA>
<wfs:PERIMETER>122696.14333</wfs:PERIMETER>
<wfs:COMARCA_>1</wfs:COMARCA_>
<wfs:COMARCA_ID>1</wfs:COMARCA_ID>
<wfs:COMARCA>39</wfs:COMARCA>
<wfs:COM1252>Val d'Aran</wfs:COM1252>
<wfs:CCOM1252>Vielha</wfs:CCOM1252>
<wfs:COM7BIT>Val d'Aran</wfs:COM7BIT>
<wfs:CCOM7BIT>Vielha</wfs:CCOM7BIT>
<wfs:COM850>Val d'Aran</wfs:COM850>
<wfs:CCOM850>Vielha</wfs:CCOM850>
<wfs:COM437>Val d'Aran</wfs:COM437>
<wfs:CCOM437>Vielha</wfs:CCOM437>
<gml:polygonProperty>
<gml:Polygon srsName="EPSG:23031">
<gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>317077.25,4720209.01
316128.18,4720368.32 315294.42,4720616.93
314859.54,4720481.07 313591.4,4720806.06
312537.18,4721380.89 311505.56,4722107.54
311404.91,4724097.31 311143.18,4725761.2
310533.54,4726150.76 309942.27,4726797.58
309368.77,4728254.61 308906.92,4728427.1
308409.21,4729349.81 308881.43,4729285.73
309062.722726946,4729162.95504505 309684.75,4729302.22
309557.73,4729928.62 309846.33,4730680.54
310302.32,4731306.25 309586.01,4732522.82
310144.06,4732888.18 309679.44,4733601.67
309410.91,4733742.56 309120.85,4734511.59
309145.35,4734601.18 308835.12,4735140.49
308859.2,4735843.54 308349.79,4736154.99
306850.25,4736409.43 307843.94,4737476.88
308480.38,4738026.85 309196.63,4738531.01
308469.01,4738890.12 307665.36,4739529.1
308078.27,4740079.81 308642.55,4741101.07
309555.16,4741724.57 309456.87,4742558.58
309226,4743324.07 309531.05,4744257.86
309440.29,4744357.47 309038.81,4744668.04
308787.49,4745676.36 310118.86,4746562.93
310363.24,4747445.11 311109.89,4747560.09
312741.84,4748098.29 313455.53,4747914.19
313826.07,4747983.22 314751.32,4747409.2
315101.36,4746665.19 317122.75,4746008.47
318004.34,4745457.54 318890.73,4745274.03
319860.92,4745541.8 320639.2,4745578.13
322813.35,4744365.58 323583.05,4744299.59
324975.85,4743962.64 326070.88,4742760.3
326587.86,4742637.55 327935.41,4741782.56
328787.43,4741103.16 329258.57,4740555.02
329782.5,4740220.2 330865.06,4739629.76
331204.2,4739601.47 331336.17,4740222.43
332047.17,4740804.87 333243.25,4741428.87
333812.723099468,4741041.86148034 334060.68,4740685.57
334609.598111436,4740315.29896943 334717.61,4739851.73
335148.660619532,4739307.48645429 335558.72,4739173.79
336927.61,4739712.99 338711.9,4739092.96
339589.24,4739124.24 339349.89,4738456.74
338833.42,4737544.02 338847.11,4736585.42
338740.72,4735946.67 339099.51,4735825.31
338965.37,4735476.9 338679.9,4733953.77
338586.87,4733098.18 338074.64,4732488.05
338581.75,4731002.85 337386.89,4730666.81
336798.51,4731077.87 335945.95,4730047.98
334762.41,4729615.15 334150.98,4728808.79
335169.89,4727769.05 334763.56,4727109.9
334021.08,4724183.95 333873.76,4724164.85
333594.19,4723024.44 333183.8,4722303.41
332932.05,4721526.89 332702.9,4721162.19
333012.81,4720379.59 333494,4720301.61
333196.98,4718981.11 332185.19,4718753.81
332106.71,4717943.53 331374.39,4717441.16
330884.3,4717476.24 330005.33,4717656.35
329182.59,4718148.39 329021.31,4718852.89
328547.29,4719565.53 327890.83,4719871
327402.9,4720022.82 327354.64,4720137.09
327365.23,4720473.45 327514.14,4720821.97
327589.85,4721364.41 327189.9,4721696.44
326501.82,4722007.93 325996.98,4722360.27
325709.69,4721635.62 324351.54,4721138.13
323736.98,4720703.33 323278.54,4720125.43
322584.88,4719710.9 321775.49,4719416.44
321355.59,4720280.78 320719.96,4720864.02
320160.89,4721058.58 318996.07,4720613.67
317077.25,4720209.01</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs>
</gml:Polygon>
</gml:polygonProperty>
</wfs:comp_polygon>
</gml:featureMember>
<gml:featureMember>
<wfs:comp_polygon>
<wfs:AREA>425690990.17148</wfs:AREA>
<wfs:PERIMETER>129579.79274</wfs:PERIMETER>
<wfs:COMARCA_>2</wfs:COMARCA_>
.................
..............

when I do ogr2ogr -f "GML" of this format i lost all
of the wfs atributes. Ogr2ogr can eat <wfs:...>. I'm
connecting to Intenet and I have all of the .xsd
files.    

Can you help me? If I change wfs: to wfs_ works , but
i prefer not to change it. 

Thank you


	
	
		
______________________________________________ 
Renovamos el Correo Yahoo! 
Nuevos servicios, m?s seguridad 
http://correo.yahoo.es

From archer at eskimo.com  Thu Aug 25 13:25:48 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL, Libtiff, Proj4 compiler warnings
Message-ID: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>


For the Xastir project we use GDAL, Proj4, Shapelib, OGR, libtiff.
We've recently added more strict compiler checking to our Makefiles,
then went through a few rounds of getting rid of the compiler
warnings.

On Linux it builds clean now, but on FreeBSD we have a few warnings
showing up in the external libraries.  Here's a note from one of our
developers that runs FreeBSD:


> No warnings from xastir code.  Only warnings remaining are from
> gdal, libtiff and proj4.  All "declaration not prototype"
> warnings.  Attached, from make with compile lines elided.
>
> These are present both with gcc 2.95 on BSD 4.11 and with gcc 3.4
> on BSD 5.4

-----------------------------------
In file included from /usr/local/include/gdal.h:209,
                 from ../../xastir/src/main.c:132:
/usr/local/include/cpl_error.h:114: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:115: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:116: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:117: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:122: warning: function declaration isn't a prototype

In file included from ../../xastir/src/main.c:132:
/usr/local/include/gdal.h:362: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:652: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:653: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:654: warning: function declaration isn't a prototype

In file included from /usr/local/include/gdal.h:209,
                 from ../../xastir/src/map_gdal.c:115:
/usr/local/include/cpl_error.h:114: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:115: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:116: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:117: warning: function declaration isn't a prototype
/usr/local/include/cpl_error.h:122: warning: function declaration isn't a prototype

In file included from ../../xastir/src/map_gdal.c:115:
/usr/local/include/gdal.h:362: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:652: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:653: warning: function declaration isn't a prototype
/usr/local/include/gdal.h:654: warning: function declaration isn't a prototype

In file included from ../../xastir/src/map_gdal.c:117:
/usr/local/include/ogr_srs_api.h:696: warning: function declaration isn't a prototype

In file included from /usr/local/include/cpl_string.h:93,
                 from ../../xastir/src/map_gdal.c:118:
/usr/local/include/cpl_conv.h:134: warning: function declaration isn't a prototype
/usr/local/include/cpl_conv.h:139: warning: function declaration isn't a prototype
/usr/local/include/cpl_conv.h:225: warning: function declaration isn't a prototype
/usr/local/include/cpl_conv.h:227: warning: function declaration isn't a prototype
/usr/local/include/cpl_conv.h:228: warning: function declaration isn't a prototype

In file included from /usr/local/include/xtiffio.h:10,
                 from ../../xastir/src/map_tif.c:82:
/usr/local/include/tiffio.h:285: warning: function declaration isn't a prototype

In file included from ../../xastir/src/map_tif.c:84:
/usr/local/include/geo_normalize.h:195: warning: function declaration isn't a prototype

In file included from /usr/local/include/projects.h:269,
                 from ../../xastir/src/map_tif.c:85:
/usr/local/include/proj_api.h:126: warning: function declaration isn't a prototype
/usr/local/include/proj_api.h:140: warning: function declaration isn't a prototype
/usr/local/include/proj_api.h:141: warning: function declaration isn't a prototype

In file included from ../../xastir/src/map_tif.c:85:
/usr/local/include/projects.h:420: warning: function declaration isn't a prototype

-----------------------------------

I suspect most of these are easily solved.  In our Xastir code they
were mostly due to "()" instead of "(void)".  The compiler flags
we're using now are:

    -O2 -pipe -W -Wall -Wpointer-arith -Wstrict-prototypes
    -Wno-unused-parameter -pthread

The "-Wno-unused-parameter" flag changes to "-Wno-unused" based on
which GCC version you're using.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"


From nerwolf at yahoo.es  Thu Aug 25 13:49:36 2005
From: nerwolf at yahoo.es (sergio andres perez navaez)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GML in gdal1.3
Message-ID: <20050825174936.36320.qmail@web31107.mail.mud.yahoo.com>

I built my Gdal 1.3 with Xerces 2.6 

I have download GML files of Catalonia in
http://www.geoportal-idec.net. the files start like
this:

--------------
----------------------------------------

<?xml version="1.0" encoding="UTF-8"?>
<wfs:FeatureCollection
xmlns:wfs="http://www.geoportal-idec.net/wfs"
xmlns:gml="http://www.opengis.net/gml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.geoportal-idec.net/wfs
Comarques.xsd">
<gml:boundedBy>
<gml:Box
srsName="EPSG:23031"><gml:coordinates>260422.092189937,4488999.69
527466.55,4748098.29</gml:coordinates></gml:Box>
</gml:boundedBy>
<gml:featureMember>
<wfs:comp_polygon>
<wfs:AREA>632964864.50882</wfs:AREA>
<wfs:PERIMETER>122696.14333</wfs:PERIMETER>
<wfs:COMARCA_>1</wfs:COMARCA_>
<wfs:COMARCA_ID>1</wfs:COMARCA_ID>
<wfs:COMARCA>39</wfs:COMARCA>
<wfs:COM1252>Val d'Aran</wfs:COM1252>
<wfs:CCOM1252>Vielha</wfs:CCOM1252>
<wfs:COM7BIT>Val d'Aran</wfs:COM7BIT>
<wfs:CCOM7BIT>Vielha</wfs:CCOM7BIT>
<wfs:COM850>Val d'Aran</wfs:COM850>
<wfs:CCOM850>Vielha</wfs:CCOM850>
<wfs:COM437>Val d'Aran</wfs:COM437>
<wfs:CCOM437>Vielha</wfs:CCOM437>
<gml:polygonProperty>
<gml:Polygon srsName="EPSG:23031">
<gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>317077.25,4720209.01
316128.18,4720368.32 315294.42,4720616.93
314859.54,4720481.07 313591.4,4720806.06
329021.31,4718852.89
328547.29,4719565.53 320719.96,4720864.02
320160.89,4721058.58 318996.07,4720613.67
317077.25,4720209.01</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs>
</gml:Polygon>
</gml:polygonProperty>
</wfs:comp_polygon>
</gml:featureMember>
<gml:featureMember>
<wfs:comp_polygon>
<wfs:AREA>425690990.17148</wfs:AREA>
<wfs:PERIMETER>129579.79274</wfs:PERIMETER>
<wfs:COMARCA_>2</wfs:COMARCA_>
.................
..............

when I do ogr2ogr -f "GML" of this format i lost all
of the wfs atributes. Ogr2ogr can eat <wfs:...>. I'm
connecting to Intenet and I have all of the .xsd
files.    

Can you help me? If I change wfs: to wfs_ works , but
i prefer not to change it. 

Thank you


	

__________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam ?gratis! 
Reg?strate ya - http://correo.yahoo.es 

From fwarmerdam at gmail.com  Thu Aug 25 14:04:12 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GML in gdal1.3
In-Reply-To: <20050825174936.36320.qmail@web31107.mail.mud.yahoo.com>
References: <20050825174936.36320.qmail@web31107.mail.mud.yahoo.com>
Message-ID: <931f8ea90508251104546cf467@mail.gmail.com>

On 8/25/05, sergio andres perez navaez <nerwolf@yahoo.es> wrote:
> I built my Gdal 1.3 with Xerces 2.6
> 
> I have download GML files of Catalonia in
> http://www.geoportal-idec.net. the files start like
> this:
>
Sergio,

Can you point me to a complete sample GML file I can download
and test with? 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Fri Aug 26 12:10:20 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL, Libtiff, Proj4 compiler warnings
In-Reply-To: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
References: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
Message-ID: <931f8ea905082609105c954047@mail.gmail.com>

On 8/25/05, Curt, WE7U <archer@eskimo.com> wrote:
> 
> For the Xastir project we use GDAL, Proj4, Shapelib, OGR, libtiff.
> We've recently added more strict compiler checking to our Makefiles,
> then went through a few rounds of getting rid of the compiler
> warnings.
> 
> On Linux it builds clean now, but on FreeBSD we have a few warnings
> showing up in the external libraries.  Here's a note from one of our
> developers that runs FreeBSD:
...
> I suspect most of these are easily solved.  In our Xastir code they
> were mostly due to "()" instead of "(void)".  The compiler flags
> we're using now are:
> 
>     -O2 -pipe -W -Wall -Wpointer-arith -Wstrict-prototypes
>     -Wno-unused-parameter -pthread
> 
> The "-Wno-unused-parameter" flag changes to "-Wno-unused" based on
> which GCC version you're using.

Curt, 

I have committed fixes for the item you listed (in libtiff, libgeotiff,
proj and GDAL) but my attempts to reproduce the warning report
with -Wstrict-prototypes failed.  I don't want -Wno-unused-parameter
since it generates alot of junk warnings in functions that legimately
don't need to use all their arguments.  Likewise, I don't want
warnings on pointer arthmetic since I do that frequently and
legimately.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From frank.glandorf at gmail.com  Fri Aug 26 17:06:50 2005
From: frank.glandorf at gmail.com (Frank Glandorf)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] seamlessly joining USGS quadrangle tiffs
Message-ID: <430F846A.3020004@gmail.com>

I mentioned to Frank Warmerdam  that I have a utility for seamlessly 
joining USGS quadrangles in TIFF with a world file, cliping the collars. 
He suggested I post it to gdal-dev to see if there is any interest in it 
so here's a link to it. In particular see quadjoin.

http://members.iglou.com/glandorf/aetools/

The utilities are command line driven and based proj.4 and shapelib. The 
TIFFS need not form a rectangular region. For example to join the 
quadrangles for the Cumberland National Park in Kentucky which are in 
state plane coordinates:

quadjoin -czip -p "+proj=lcc  +datum=NAD83 +lon_0=-85d45 +lat_1=37d05 
+lat_2=38d40 +lat_0=36d20 +x_0=1500000 +y_0=1000000 +units=ft" -o 
cumberland.tif u48.tif  u49.tif  u50.tif  v48.tif

Since many maps are in UTM there's some short cut options. To use utm 
with datum 1927 and zone 16:

quadjoin -d27 -z16 -c zip -o cin.tif ci*dr0016.tif

-Frank


From denis.nadeau at gmail.com  Fri Aug 26 18:01:07 2005
From: denis.nadeau at gmail.com (Denis Nadeau)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GMU WCS Server supports netCDF
In-Reply-To: <931f8ea9050826081331c0cda8@mail.gmail.com>
References: <931f8ea9050826081331c0cda8@mail.gmail.com>
Message-ID: <304163b005082615015c0a110@mail.gmail.com>

Frank,

Netcdf now support UTM and LCC. 
TM projection works fine with WCS data from NWGISS server .

I have checked for uniform grid spacing in projected values at three places 
in the image:
left, middle and right 
If I establish that spacing is uniform accross the map, I enable the 
GeoTransform, 
otherwise it stays disable. 

But I need help with LCC metadata found in the test file RUC.nc. 
I used osr.SetLCC1SP with STD_PARALLEL as dfScale. (Probably wrong...) 
I just don't know what to do with these values for Lamber Conformal Conic :

standard_parallel=25
longitude_of_central_meridian=-95
latitude_of_projection_origin=25
GRIB_earth_shape=spherical
GRIB_earth_shape_code=0

You can see that False_Easting an False_Northing are missing so, I set them 
to 0 which is probably wrong too.

Finallly, for latitude/longitude data, I use WKT "WGS84". 
(I also check for uniform grid spacing as before ...)



Regards,
Denis


2005/8/26, Frank Warmerdam <fwarmerdam@gmail.com>:
> 
> Denis,
> 
> The GMU WCS NetCDF file now reports:
> 
> Coordinate System is `'
> Origin = (94.692708,6.738066)
> Pixel Size = (0.00271231,-0.00268426)
> 
> Corner Coordinates:
> Upper Left ( 94.6927079, 6.7380663)
> Lower Left ( 94.6927079, 4.8295543)
> Upper Right ( 96.8978175, 6.7380663)
> Lower Right ( 96.8978175, 4.8295543)
> Center ( 95.7952627, 5.7838103)
> 
> But, I am not sure how this could be. The file is apparently
> projected in transverse mercator, but those are lat/long values.
> The file presumably is not projected in lat/long so the lat/long
> pixel size will not be consistent across the image. It is important
> we only set the geotransform based on the lat/lon (or projected values)
> if we can establish that the pixel spacing is uniform across the
> dimension maps.
> 
> In this file, we should be picking up the TM values from the xdim and
> ydim arrays.
> 
> ... phone call from you ...
> 
> Well, I think we have covered this mostly on the phone now, but i'll
> send what I had in the email so far.
> 
> Best regards,
> --
> 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050826/9b7e4f54/attachment.html
From stsyo3lwdia4 at vexcel.com  Fri Aug 26 18:40:37 2005
From: stsyo3lwdia4 at vexcel.com (Steve Soule)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL raster block caching issues
Message-ID: <430F9A65.7020303@vexcel.com>

I originally sent the message below to Frank directly, but he asked me 
to send a copy to gdal-dev for archiving and general discussion.  Here 
is the mesage:


In this discussion, "client" means the programmer writing an
application program that uses GDAL.  "User" means a non-programmer
using such an application program.

In this document, I use the acronym LRUL to mean "least recently used
list".  This is a data structure and algorithm used by GDAL to keep
track of flushable raster blocks in order from most recently to least
recently used, so that when the total size of cached blocks passes
a limit, the least recently used blocks are automatically flushed.


Issue 1:  Global vs. dataset LRUL

Currently, the LRUL is global, that is, it contains blocks from all
open datasets.  I think it would be better if each dataset had its
own LRUL (or possibly each raster band).  This would have the following
advantages:

1.  Thread-safety.  A global LRUL is difficult to make thread-safe.
This work has not yet been done in GDAL.  One thing that would be
particularly difficult to resolve is how to handle dirty blocks, that
is, blocks that need to be written to disk before they can be flushed.
A dataset or raster band level LRUL would be trivially thread-safe.

2.  Cache size flexibility.  With a global LRUL, there's one cache
limit (nCacheMax) for the entire process.  This is simple but
not flexible.  When you have more than one dataset open, it may be
that some datasets need caching more than others.  In particular,
datasets accessed over the network are more likely to need caching
than datasets stored on a local disk.  If each dataset had its own
cache limit, it would be easy to tailor it to the individual dataset's
block loading time.

3.  Matches user behavior better.  The application where dataset LRUL
could give a big performance improvement over global LRUL is in image
viewing and marking.  In such an application, the user typically has
from two to six images open at once.  They tend to scroll image one
and mark a point, then scroll image two and mark a point, and so on
until the point has been marked in all images, then start over with
image one.  With global LRUL, if the scrolling is sufficient to consume
all of the cache, then by the time the user gets back to image one,
all of image one's raster blocks have been flushed.  So you get nearly
100% cache misses.  With dataset LRUL, this problem disappears.

This isn't an artificial example.  In my mind, there are two types
of applications for GDAL:  image processing and user interface.
Image processing applications typically process all of the blocks
in an image in order; caching those blocks is useless.  It's in user
interface applications that caching is really useful.  For applications
where the user is looking at a single image, there's no difference
between global and dataset LRUL because there's only one dataset.
So it's only in applications where the user needs more than one
image on the screen at once that global versus dataset LRUL makes
a difference.  Such applications usually involve examining two or
more images of the same thing and comparing, matching, or marking.

FotoG (my main project) is such an application.  We did a user test
of FotoG a few weeks ago, and I observed that most users spent most of
their time sitting and waiting for the screen to update after issuing
a scroll or zoom command.  Turning on GDAL's block caching didn't help
much.  After scratching my head about this for a few weeks, I came to
the realization that the problem would probably be greatly reduced if
GDAL used dataset LRUL instead of global LRUL.  Users have a strong
tendency to think in parallel when more than one image is visible.
This leads them to try to complete a fundamental task in all open
images before moving on to the next fundamental task.  Dataset LRUL
matches this work-in-parallel mindset much better than global LRUL.

4.  Allows more cache algorithm flexibility.  If you ever decide
to support a different cache flushing algorithm than LRUL, it is
highly likely that the client will want to make the choice of cache
flushing algorithm for each dataset, not for the whole application.
With global LRUL, all datasets must use the same algorithm.

5.  Makes turning off write caching possible.  I personally would
prefer not to have write caching in my applications.  If the cache
size were a property of the dataset rather than being global, I could
turn off caching for datasets in which I'm writing data.


Issue 2:  Client-controlled block flushing

Currently, if block caching is turned on in GDAL, the algorithm used
for flushing cache blocks is LRUL.  It would be nice if the client
could manually control loading and flushing of blocks in order to
use a different flushing algorithm.  After some thought on how to
do this, I realized that the capability already exists in GDAL:
to override LRUL for a block, you lock it with GetLockedBlockRef,
and when you want to return caching control to LRUL, you call DropLock.

Though these two functions are technically part of the GDAL API since
they're declared public in gdal_priv.h, it may be that you don't want
these to be officially part of the API.  If you don't want these to
be officially part of the API, perhaps you should provide an alternate
mechanism for overriding LRUL.


Issue 4:  OS versus GDAL caching

How does GDAL's block caching interact with the OS's caching of disk
blocks?  The OS uses any main memory not used by processes for caching
disk blocks.  So it's possible for a chunk of image data to be cached
in main memory twice:  once in the GDAL raster block cache, and once
in the OS disk block cache.  This double-caching may be sufficiently
wasteful to be a problem.  In particular, by splitting main memory
between these two caches, GDAL's block caching may prevent either
cache from being effective.

To test this, I wrote the following simple test program that reads
an image from disk one raster block at a time, then repeats the whole
read a number of times specified on the command line.  Also specified
on the command line is GDAL's raster block cache limit.

#include "gdal_priv.h"
#include <iostream>
#include <vector>
using namespace std;
int main(int argc, char **argv)
{
     if (argc != 4)
     {
         cerr << "Usage:  gdaltest cachemb repeat image\n";
         return 1;
     }
     const char *filename = argv[3];
     int cache = atoi(argv[1]), repeat = atoi(argv[2]);
     GDALAllRegister();
     GDALSetCacheMax(cache * (1024 * 1024));
     GDALDataset *ds = (GDALDataset *)GDALOpen(filename, GA_ReadOnly);
     if (!ds)
     {
         cerr << "GDALOpen failed on " << filename << "\n";
         return 1;
     }
     int xsize = ds->GetRasterXSize();
     int ysize = ds->GetRasterYSize();
     GDALRasterBand *rb = ds->GetRasterBand(1);
     int blockx, blocky;
     rb->GetBlockSize(&blockx, &blocky);
     vector<unsigned short> imgdata(blockx * blocky);
     for (int iter = 0; iter <= repeat; ++iter)
     for (int row = 0; row < ysize; row += blocky)
     {
         int chunky = blocky;
         if (chunky > ysize - row) chunky = ysize - row;
         for (int col = 0; col < xsize; col += blockx)
         {
             int chunkx = blockx;
             if (chunkx > xsize - col) chunkx = xsize - col;
             if (rb->RasterIO(GF_Read, col, row, chunkx, chunky, 
&imgdata[0],
                 chunkx, chunky, GDT_UInt16, 0, 0) == CE_Failure)
             {
                 cerr << "Reading raster data failed on " << filename << 
"\n";
                 return 1;
             }
         }
     }
}

I executed this test program on two files, one of which was 172
MB in size, and the other of which was 380 MB in size.  Both were
16-bit unsigned integer tifs.  My computer has 768 MB of memory;
so image 1 fits in memory twice, and image 2 doesn't.  In order to
ensure that each image was not cached in the OS disk block cache from
one run to the next, I made ten copies of each image, and ran each
test ten times, once on each copy.  I ran tests with repeat counts of
zero through three, and cache sizes of 0, 1, 10, 100, 200, and 400.
I timed the runs (in seconds) and averaged for the ten runs for each
parameter set.  Here are the results:

file 1 (172 MB):
                   cache
repeat    0    1   10  100  200  400
0       8.6  8.6  8.6  8.6  8.6  8.6
1      10.0 10.7 11.1 11.5  8.6  8.7
2      11.2 13.0 12.2 14.3  8.7  8.9
3      12.0 13.0 14.6 15.3  8.9  9.1

file 2 (380 MB):
           0    1   10  100  200  400
0      19.6 19.6 19.6 19.6 19.6 19.7
1      27.4 32.2 30.6 32.2 37.2 19.9
2      36.2 45.2 42.1 51.3 44.6 20.5
3      37.4 46.5 44.2 51.6 70.4 20.7

Here's my analysis of the trends in this data:

1.  If GDAL's raster block cache is large enough for the entire file
to fit in the cache (columns 200 and 400 for image 1, and column
400 for image 2), the raster block cache gets 100% cache hits, and
you see very little increase in loading time for each repeat.  This,
of course, is the primary benefit of GDAL's raster block cache.

2.  If GDAL's raster block cache is off (column 0), each repetition
takes significantly more time, but each repetition takes less time
than the previous one.  This is the case where we're relying completely
on the OS disk block cache, and using as little memory as possible so
that the OS disk block cache is as large as possible.  The fact that
the time goes up so much from repeat 0 to repeat 1 suggests that the
OS's cache flushing algorithm is not LRUL (at least not on Linux, which
is the OS I used for these tests).  The OS's cache flushing algorithm
doesn't appear to be deterministic, predictable, or even consistent.
So for this test, which was designed specifically to test LRUL caches,
it doesn't perform as well as GDAL's LRUL cache.

3.  As GDAL's raster block cache size increases, execution time
increases (as long as GDAL's cache size remains too small for the
image).  I believe this is the effect this test program was designed
to test.  The raster block cache is getting 100% cache misses, so the
raster block cache is rendered useless, and it takes memory away from
the OS's disk block cache, making that cache less effective.

4.  Setting GDAL's cache size to 1 MB significantly hurts performance
relative to 0 MB.  I don't know what causes this.  I don't think
it's because of increased level 2 processor cache misses, because
that would affect the last columns (the 100% raster block cache hit
columns) as well.

5.  For image 1, setting GDAL's cache size to 400 MB rather than 200 MB
hurt performance significantly.  I really don't understand this trend.
 From my understanding of the GDAL source, I would expect this to have
absolutely no effect: comparing an integer (the current cache in use)
against 400 takes no more time than comparing it against 200.  Since
this trend is not relevant to this discussion, I didn't bother to
track down the cause.

My conclusion?  I don't really have one.  On the one hand, one could
claim that this test shows that even in the best case, GDAL's cache
isn't enough better than the OS cache to be worth it, and that the OS
cache could outperform GDAL's cache in real-world examples.  If so,
then removing GDAL's raster block cache would simplify the code and
improve performance.  On the other hand, one could claim that this
test shows that the OS cache performs sufficiently poorly compared to
GDAL's cache that GDAL's cache is clearly of great benefit.  The only
trick is setting the cache size to maximize the benefit.


From bill at binko.net  Fri Aug 26 19:13:51 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] seamlessly joining USGS quadrangle tiffs
In-Reply-To: <430F846A.3020004@gmail.com>
References: <430F846A.3020004@gmail.com>
Message-ID: <Pine.LNX.4.58.0508261730070.13761@fastcat.binko.net>

On Fri, 26 Aug 2005, Frank Glandorf wrote:

> I mentioned to Frank Warmerdam  that I have a utility for seamlessly 
> joining USGS quadrangles in TIFF with a world file, cliping the collars. 
> He suggested I post it to gdal-dev to see if there is any interest in it 
> so here's a link to it. In particular see quadjoin.
> 
> http://members.iglou.com/glandorf/aetools/
> 
> The utilities are command line driven and based proj.4 and shapelib. The 
> TIFFS need not form a rectangular region. For example to join the 
> quadrangles for the Cumberland National Park in Kentucky which are in 
> state plane coordinates:
> 
> quadjoin -czip -p "+proj=lcc  +datum=NAD83 +lon_0=-85d45 +lat_1=37d05 
> +lat_2=38d40 +lat_0=36d20 +x_0=1500000 +y_0=1000000 +units=ft" -o 
> cumberland.tif u48.tif  u49.tif  u50.tif  v48.tif
> 
> Since many maps are in UTM there's some short cut options. To use utm 
> with datum 1927 and zone 16:
> 
> quadjoin -d27 -z16 -c zip -o cin.tif ci*dr0016.tif
> 
> -Frank
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From fwarmerdam at gmail.com  Fri Aug 26 19:13:22 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL raster block caching issues
In-Reply-To: <430F9A65.7020303@vexcel.com>
References: <430F9A65.7020303@vexcel.com>
Message-ID: <931f8ea905082616134cb2d5a7@mail.gmail.com>

On 8/26/05, Steve Soule <Steve.Soule@vexcel.com> wrote:
> Issue 1:  Global vs. dataset LRUL
>
> Currently, the LRUL is global, that is, it contains blocks from all
> open datasets.  I think it would be better if each dataset had its
> own LRUL (or possibly each raster band).  This would have the following
> advantages:
>
> 1.  Thread-safety.  A global LRUL is difficult to make thread-safe.
> This work has not yet been done in GDAL.  One thing that would be
> particularly difficult to resolve is how to handle dirty blocks, that
> is, blocks that need to be written to disk before they can be flushed.
> A dataset or raster band level LRUL would be trivially thread-safe.

Steve,

I concur that using a per-dataset LRUL would make handling the
write-cache-flushing-multi-threading problem go away completely.
A huge benefit since I have been thinking about this issue all
summer with no obvious simple solution.

> 2.  Cache size flexibility.  With a global LRUL, there's one cache
> limit (nCacheMax) for the entire process.  This is simple but
> not flexible.  When you have more than one dataset open, it may be
> that some datasets need caching more than others.  In particular,
> datasets accessed over the network are more likely to need caching
> than datasets stored on a local disk.  If each dataset had its own
> cache limit, it would be easy to tailor it to the individual dataset's
> block loading time.

Frankly, for most uses I don't see this as being much benefit.  In
my experience 98% of the time having one "cache size" knob
to turn is already too much control for people, and results in
lots of confusion.  Having per-dataset control will not be useful
except in some very carefully managed circumstances.

> 3.  Matches user behavior better.  The application where dataset LRUL
> could give a big performance improvement over global LRUL is in image
> viewing and marking.  In such an application, the user typically has
> from two to six images open at once.  They tend to scroll image one
> and mark a point, then scroll image two and mark a point, and so on
> until the point has been marked in all images, then start over with
> image one.  With global LRUL, if the scrolling is sufficient to consume
> all of the cache, then by the time the user gets back to image one,
> all of image one's raster blocks have been flushed.  So you get nearly
> 100% cache misses.  With dataset LRUL, this problem disappears.

Well, my viewer counter example would be that in a viewer people
will often open several files, keeping around old views to potentially
return to but generally only interacting with one view at a time.
To reserve large amounts of cache memory for open datasets that
haven't been used for some time seems like a very poor use of
cache memory.

Also, it seems like it will be hard to decide how to set the
per dataset cache size.  Should we divide a total cache size by the
number of datasets open at any given time?  Should it be a fixed size
per dataset?  If the latter approach is used, having several open
datasets could easily overwhelm physical RAM.

Nevertheless, I concede that your scenario also happens  and
the current behavior is annoying.

> This isn't an artificial example.  In my mind, there are two types
> of applications for GDAL:  image processing and user interface.
> Image processing applications typically process all of the blocks
> in an image in order; caching those blocks is useless.

At this point, I think I need to highly the *main* reason GDAL has
block caching.  That is because applications are welcome to request
data in any pattern they want.  Thus many processing applications
just request it one line at a time because that is convenient and
generally quite efficient.

However, imagine what would happen internally if blocks were
not cached on a tiled dataset.  Each scanline request would
result in reading one whole row of tiles just to extra the portion of
the scanline that goes through that tile, then the tile is discarded.
Without caching, scanlined oriented access to an image with
256x256 tiles would result in 256 reads of each tile.  Of course,
the tiles would presumably be cached by the operating system, but
you would still be moving around of data unnecessary data.  In
cases where the data is compressed on disk, it would be uncompressed
256 times instead of one.

So, block caching *mostly* exists so that applications can access
data on non-block boundaries without suffering too much of a
performance hit.

> 5.  Makes turning off write caching possible.  I personally would
> prefer not to have write caching in my applications.  If the cache
> size were a property of the dataset rather than being global, I could
> turn off caching for datasets in which I'm writing data.

Similarly to the above, write caching mostly exists so that applications
can write data on non-block boundaries without having to constantly
re-read, and re-write blocks to disk just to update a little bit of data.

> Issue 2:  Client-controlled block flushing
>
> Currently, if block caching is turned on in GDAL, the algorithm used
> for flushing cache blocks is LRUL.  It would be nice if the client
> could manually control loading and flushing of blocks in order to
> use a different flushing algorithm.  After some thought on how to
> do this, I realized that the capability already exists in GDAL:
> to override LRUL for a block, you lock it with GetLockedBlockRef,
> and when you want to return caching control to LRUL, you call DropLock.
>
> Though these two functions are technically part of the GDAL API since
> they're declared public in gdal_priv.h, it may be that you don't want
> these to be officially part of the API.  If you don't want these to
> be officially part of the API, perhaps you should provide an alternate
> mechanism for overriding LRUL.

These are public methods and their use is permitted, but it is my
intent that they would rarely be used by applications.  In fact, it
is my intent that nearly all raster access go through the RasterIO()
call, rather than accessing blocks directly.   Nevertheless, for an
application wishing to use the C++ block API, it is OK.

> My conclusion?  I don't really have one.  On the one hand, one could
> claim that this test shows that even in the best case, GDAL's cache
> isn't enough better than the OS cache to be worth it, and that the OS
> cache could outperform GDAL's cache in real-world examples.  If so,
> then removing GDAL's raster block cache would simplify the code and
> improve performance.  On the other hand, one could claim that this
> test shows that the OS cache performs sufficiently poorly compared to
> GDAL's cache that GDAL's cache is clearly of great benefit.  The only
> trick is setting the cache size to maximize the benefit.

Some interesting numbers, though I think they go to show that in
performance testing there are alot of factors and strategies.

Back to your overall point, I am interested in offering per-dataset
caching rather than global caching as an option (presumably
non-default).  Would you be interested in trying to implement this?

My hope is that this could be mostlydone in gdalrasterblock.cpp, likely
with a block list stored on the GDALDataset.  Actually this may be
a bit messy, since there are such things as free standing
GDALRasterBand objects not associated with any GDALDataset.  I'm
not sure how you would want to address that issue.

Ideally the policy could be set at runtime (checked via CPLGetConfigOption()).
If you are interested in doing that, then go ahead, but please let me know
when you commit the changes.

I would also ask that you avoid using too much fancy STL stuff.  I am
already getting significant negative feedback on the std::vector use
in the GDALColorTable, so I would like to avoid use of anything other
than std::string and std::vector for now.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Fri Aug 26 19:14:52 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL, Libtiff, Proj4 compiler warnings
In-Reply-To: <Pine.SUN.4.58.0508261521490.12048@eskimo.com>
References: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
	<931f8ea905082609105c954047@mail.gmail.com>
	<Pine.SUN.4.58.0508261521490.12048@eskimo.com>
Message-ID: <931f8ea905082616147094133@mail.gmail.com>

On 8/26/05, Curt, WE7U <archer@eskimo.com> wrote:
> On Fri, 26 Aug 2005, Frank Warmerdam wrote:
> 
> > I have committed fixes for the item you listed (in libtiff, libgeotiff,
> > proj and GDAL) but my attempts to reproduce the warning report
> > with -Wstrict-prototypes failed.  I don't want -Wno-unused-parameter
> > since it generates alot of junk warnings in functions that legimately
> > don't need to use all their arguments.  Likewise, I don't want
> > warnings on pointer arthmetic since I do that frequently and
> > legimately.
> 
> This is what I got back from Tom:
> 
> > Some of them are gone.
> 
> > Remaining ones are in gdal.h, due to declarations like
> >   int foo();>

Curt,

Sorry about that.  It turns out I was unable to commit my gdal.h
changes yet since they are mixed with a bunch of RasterAttributeTable
stuff I am working on. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bill at binko.net  Sat Aug 27 03:27:20 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MrSID Cross-Compiler Information
In-Reply-To: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>
References: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>
Message-ID: <Pine.LNX.4.58.0508270324001.5657@fastcat.binko.net>


Hate to reply to my own post, but I've found a problem with this.  It's 
fixable, but to be honest, I'll need some assistance in getting it to work 
easily.

The problem is that the 'libtool' command doesn't seem to use the any of
the LIB parameters in GDALmake.opt when it adds the dependencies to the
libgdal.so.  I honestly have tried everything I can think of to make it
add those dependencies.

The problem is that if those dependencies are not added, none of the 
Python stuff will work, and you'll have to re-compile mapserver with the 
same libs.

I have given up for the time being, and re-linked the libgdal.so by hand 
adding the two files.

If anyone familiar with the build would like to fill me in on how to do 
this, I'd appreciate it.

Bill

On Mon, 22 Aug 2005, Bill Binko wrote:

> Hi everyone,
> 
> I have some good news on this front.  After discussing this with Frank, I 
> went digging and found a way to link GDAL with a version of the MrSID SDK 
> that was built with a different version of GCC.
> 
> This page gives the (very) gory details: http://gcc.gnu.org/onlinedocs/libstdc++/abi.html
> 
> Bug basically, if you're having linking troubles that look like this: 
> 
>  ../.libs/libgdal.so: undefined reference to `std::__default_alloc_template<true, 0>::allocate(unsigned int)' 
>  ../.libs/libgdal.so: undefined reference to `std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::_Rep::_S_create(unsigned int, std::allocator<wchar_t> const&)'  
> 
> You probably are running against a library linked with an older GCC C++ 
> library.
> 
> In the past the only solution known (at least to Frank and I) was to build 
> a version of GDAL using the same GCC version.  After reading the above 
> link, I found that you can instead just manually force the linker to link 
> to both stdc++ libraries (assuming you have both on your system)
> 
> So: to accomplish this, simply make the following change in GDALmake.opt:
> 
> CONFIG_LIBS     =       $(LIBGDAL)
> 
> becomes
> 
> CONFIG_LIBS     =       $(LIBGDAL) /usr/lib/libstdc++.so.5 /usr/lib/libstdc++.so.6
> 
> A clean rebuild should solve your link errors.  I am interested to see how 
> people do with this, so please contact me with any issues.
> 
> Bill
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From fwarmerdam at gmail.com  Sat Aug 27 10:45:38 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] MrSID Cross-Compiler Information
In-Reply-To: <Pine.LNX.4.58.0508270324001.5657@fastcat.binko.net>
References: <Pine.LNX.4.58.0508221707190.2203@fastcat.binko.net>
	<Pine.LNX.4.58.0508270324001.5657@fastcat.binko.net>
Message-ID: <931f8ea9050827074566eb2803@mail.gmail.com>

On 8/27/05, Bill Binko <bill@binko.net> wrote:
> 
> Hate to reply to my own post, but I've found a problem with this.  It's
> fixable, but to be honest, I'll need some assistance in getting it to work
> easily.
> 
> The problem is that the 'libtool' command doesn't seem to use the any of
> the LIB parameters in GDALmake.opt when it adds the dependencies to the
> libgdal.so.  I honestly have tried everything I can think of to make it
> add those dependencies.

Bill, 

I recently discovered that libtool honours the "-XCClinker" option
to option to force it to pass specific options on to the linker.  So on
MacOS where I need -framework Python in the link line I did something
like:

elif test ! -z "`uname | grep Darwin`" -a ${with_libtool} == yes ; then
    AC_MSG_RESULT(darwin-libtool)

    PYTHON_LIBS='-XCClinker -framework -XCClinker Python $(LIBS)'
    PY_LD_SHARED='$(LD_SHARED)'
    PY_SO_EXT='$(SO_EXT)'

Perhaps that could help. 

Alternatively, you might just want to build --without-libtool.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From archer at eskimo.com  Fri Aug 26 18:22:41 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL, Libtiff, Proj4 compiler warnings
In-Reply-To: <931f8ea905082609105c954047@mail.gmail.com>
References: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
	<931f8ea905082609105c954047@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0508261521490.12048@eskimo.com>

On Fri, 26 Aug 2005, Frank Warmerdam wrote:

> I have committed fixes for the item you listed (in libtiff, libgeotiff,
> proj and GDAL) but my attempts to reproduce the warning report
> with -Wstrict-prototypes failed.  I don't want -Wno-unused-parameter
> since it generates alot of junk warnings in functions that legimately
> don't need to use all their arguments.  Likewise, I don't want
> warnings on pointer arthmetic since I do that frequently and
> legimately.

This is what I got back from Tom:

> Some of them are gone.

> Remaining ones are in gdal.h, due to declarations like
>   int foo();
>
> which gcc3.4 flags as "not a prototype"
>
> The cpl_error.h warnings are gone.
>
> The main ones remaining are from proj.4 and libtiff/libgeotiff.


--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Fri Aug 26 12:17:05 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL, Libtiff, Proj4 compiler warnings
In-Reply-To: <931f8ea905082609105c954047@mail.gmail.com>
References: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
	<931f8ea905082609105c954047@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0508260911580.25746@eskimo.com>

On Fri, 26 Aug 2005, Frank Warmerdam wrote:

> > The "-Wno-unused-parameter" flag changes to "-Wno-unused" based on
> > which GCC version you're using.

> I have committed fixes for the item you listed (in libtiff, libgeotiff,
> proj and GDAL) but my attempts to reproduce the warning report
> with -Wstrict-prototypes failed.

Understand.  On Linux here I don't get the warnings either, but
another of our developers gets them on FreeBSD.  I'll have him do a
cvs update and get a report back from him.  I'll let you know what
he comes back with.  Thanks!


> I don't want -Wno-unused-parameter since it generates alot of junk
> warnings in functions that legimately don't need to use all their
> arguments.

Actually as I recall the combination of "-W and -Wall" triggers all
of those warnings, and "-Wno-unused-parameter" or "-Wno-unused" gets
rid of those.  We had to add a test to our acinclude.m4/configure.ac
in order to see which of those last two parameters the compiler
likes so that we get a clean build on either compiler.


> Likewise, I don't want warnings on pointer arthmetic since I do
> that frequently and legimately.

Understand.  Thanks for helping to clean things up a bit.  Our users
appreciate the professional look-and-feel of the compile without the
extra warnings.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Thu Aug 25 15:24:50 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] 1.3.0 no worky on SuSE 9.0
In-Reply-To: <931f8ea905082316265a5d6719@mail.gmail.com>
References: <BF30E9FC.725E%jgreenberg@arc.nasa.gov> 
	<Pine.SUN.4.58.0508231505130.26968@eskimo.com>
	<Pine.SUN.4.58.0508231607040.26968@eskimo.com>
	<931f8ea905082316265a5d6719@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0508251221510.2558@eskimo.com>

On Tue, 23 Aug 2005, Frank Warmerdam wrote:

> On 8/23/05, Curt, WE7U <archer@eskimo.com> wrote:
> > > g++     -c -o gdalopeninfo.o gdalopeninfo.cpp
> > > In file included from gdal_priv.h:237,
> > >                  from gdalopeninfo.cpp:36:
> > > gdal.h:234: error: syntax error before `(' token
>
> Curt,
>
> Normally when I see these syntax errors on gdal.h:234 (the
> first use of the new CPL_STDCALL symbol), I assume it relates
> to picking up old GDAL include files.  But your compile line
> has essentially no arguments (no include directives, etc).  I
> guess it must be picking up old include files from /usr/local/include.

If I recall correctly I went and wiped out anything gdal-related
before that, including even the man pages.  I wanted a clean build
of Xastir without any old include/library files hanging around.


> But the real question is what went wrong with the configure
> that would screw up all the normal options (like -I../port).
> We used to get this problem with old versions of the mysql-config
> script which would screw up the configure script and cause it to
> not complete properly.
>
> However, that was all fixed up some time ago.  Perhaps something
> similar to that has come up again.
>
> If you feel like helping me track it down, we should re-run the
> original configure and see if we can see anything odd in it's
> output (or in config.log).

I'd be glad to help.  I'll start by whacking everything again, doing
a find on the /usr/lib, /usr/include, and /usr/local areas to make
sure I got all the gdal-related stuff, then do a clean build from
the tar.gz file.  I'll let you know what I find.  It's possible that
it's an old version of mysql-config on here.  It's the SuSE 9.0
RPM's for that, and 9.0 isn't the latest, but I have done online
updates so it has the very latest 9.0 files on it.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From bill at binko.net  Tue Aug 30 02:30:03 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
Message-ID: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>

Hello everyone,

I need some advice on how to store and process raster images I'm working
with.  The images have generally come in as either ECW (or JP2000 -- my
choice) or MrSID format.  They are aerial images (DOQQs generally at
1meter accuracy).

I need to be able to serve these up efficiently using mapserver (through 
GDAL, of course).  The output will be a 24 bit JPEG (with overlay data 
unfortunately compressed as well) that will be sent over the wire to the 
client.

My problem is that both the ECW and the MrSIDs take a very long time to 
decompress, but GeoTIFF takes an ungodly amount of disk space.  Here are 
some numbers I just grabbed at random:

I took the same data in GeoTIFF, ECW, and MrSID formats and decompressed 
them (to MEM which I thought would be a good comparison to reading into 
mapserver).

$ time gdal_translate -of MEM Q2918se.tiff /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.sid /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.ecw /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps

As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF just
flies.  The flip side (disk space) can be seen here in a directory
listing:

 19226192 Aug 30 02:05 Q2918se.ecw
  7601858 Aug 30 02:21 Q2918se.sid
134983605 Aug 30 02:00 Q2918se.tiff

What I'm considering is keeping the full-scale files in MrSID format, and
keeping overviews (pyramids) of lower resolution images in ECW.  Assuming
I need four layers (dividing each side by 2 -- and the area by 4) or so
for adequate performance, the image above would take:

7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) + 
19/256MB (layer4).

That adds up to 13.9MB, a far cry from the 130MB TIFF.

This also gives me the ability to keep a lossless (MrSID) file in case I 
ever want to convert to GeoTIFFs in the future.

Does this make sense?  Are there better ways to get performance out of 
MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?

I'm sure that someone will say "Hard Drives are Cheap", and I agree, but 
it seems that this data is growing at outrageous rates (uncompressed), and 
that the time spent reading the entire GeoTIFF becomes a bottleneck 
anyway.

I'd really appreciate any advice,

Thanks
Bill


From ari.jolma at tkk.fi  Tue Aug 30 02:30:01 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] swig/perl
In-Reply-To: <Pine.SUN.4.58.0508260911580.25746@eskimo.com>
References: <Pine.SUN.4.58.0508251015260.11088@eskimo.com>
	<931f8ea905082609105c954047@mail.gmail.com>
	<Pine.SUN.4.58.0508260911580.25746@eskimo.com>
Message-ID: <4313FCE9.4010405@tkk.fi>

Hi,

I'm thinking of writing a Perl interface to GDAL using Swig, similar to 
the Python etc. interfaces in gdal distribution. I haven't used Swig so 
I think this is also a good occasion to learn it. So far, in one hour, 
I've got a gdal.pm which loads :) but no ogr.pm for instance (which I'm 
mostly interested in now in fact). I copied typemaps_python.i to 
typemaps_perl.i and made a global replace python->perl but I guess 
there's much to do besides that elsewhere also. I know XS but I'm mostly 
unfamiliar with typemaps.

Is anybody else interested in this? I mean interested enough and with 
some free time to cooperate. I think I know of the usual places for 
existing written advise, but is there anything more in particular I 
should know about?

Ari


From BEN at Syncera-ITSolutions.NL  Tue Aug 30 02:45:57 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
Message-ID: <s3141ccf.049@SRV-POSTIX-DFT>

Bill,

I don't have a straight answer to your question, just a curiosity as how compressed tiff would do in this comparison. Are you able to add that to your testcase?

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> Bill Binko <bill@binko.net> 08/30/05 8:30 am >>>
Hello everyone,

I need some advice on how to store and process raster images I'm working
with.  The images have generally come in as either ECW (or JP2000 -- my
choice) or MrSID format.  They are aerial images (DOQQs generally at
1meter accuracy).

I need to be able to serve these up efficiently using mapserver (through 
GDAL, of course).  The output will be a 24 bit JPEG (with overlay data 
unfortunately compressed as well) that will be sent over the wire to the 
client.

My problem is that both the ECW and the MrSIDs take a very long time to 
decompress, but GeoTIFF takes an ungodly amount of disk space.  Here are 
some numbers I just grabbed at random:

I took the same data in GeoTIFF, ECW, and MrSID formats and decompressed 
them (to MEM which I thought would be a good comparison to reading into 
mapserver).

$ time gdal_translate -of MEM Q2918se.tiff /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.sid /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.ecw /dev/null
Input file size is 6337, 7082
0...10...20...30...40...50...60...70...80...90...100 - done.
25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata 
0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps

As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF just
flies.  The flip side (disk space) can be seen here in a directory
listing:

 19226192 Aug 30 02:05 Q2918se.ecw
  7601858 Aug 30 02:21 Q2918se.sid
134983605 Aug 30 02:00 Q2918se.tiff

What I'm considering is keeping the full-scale files in MrSID format, and
keeping overviews (pyramids) of lower resolution images in ECW.  Assuming
I need four layers (dividing each side by 2 -- and the area by 4) or so
for adequate performance, the image above would take:

7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) + 
19/256MB (layer4).

That adds up to 13.9MB, a far cry from the 130MB TIFF.

This also gives me the ability to keep a lossless (MrSID) file in case I 
ever want to convert to GeoTIFFs in the future.

Does this make sense?  Are there better ways to get performance out of 
MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?

I'm sure that someone will say "Hard Drives are Cheap", and I agree, but 
it seems that this data is growing at outrageous rates (uncompressed), and 
that the time spent reading the entire GeoTIFF becomes a bottleneck 
anyway.

I'd really appreciate any advice,

Thanks
Bill

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From jacob.delfos at maunsell.com  Tue Aug 30 02:47:39 2005
From: jacob.delfos at maunsell.com (Jacob Delfos)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
Message-ID: <000801c5ad2e$b769eb00$5d2815ac@au.aecomnet.com>

Hi Bill,

I am not an expert on this like most people on the list, but in my experience performance in mapserver is not really comparable to decompressing an entire image in its entirety. I suppose it depends on your system, whether harddisk speed is a bottleneck versus CPU. I actually get the best performance on my sites when I use ECW's (better than TIFF), whether my ECW's are big (2.5GB) or small (10MB). Probably because my bottleneck is the harddisk speed, not the CPU (Running a normal pc as server). I notice people running larger sites with many visitors prefer to reduce the load on the CPU by running fast harddisks with uncompressed TIFFs. So I guess you need to see whether you expect a lot of visitors (>100 / hour?). If so, your CPU may not deal well with compressed imagery, slowing down your site.

Hope this helps...

regards,

Jacob

 

? -----Original Message-----
? From: gdal-dev-bounces@lists.maptools.org 
? [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Bill Binko
? Sent: 30 August 2005 14:30
? To: GDAL Developer List
? Subject: [Gdal-dev] Advice on Raster Formats
? 
? Hello everyone,
? 
? I need some advice on how to store and process raster images 
? I'm working
? with.  The images have generally come in as either ECW (or 
? JP2000 -- my
? choice) or MrSID format.  They are aerial images (DOQQs generally at
? 1meter accuracy).
? 
? I need to be able to serve these up efficiently using 
? mapserver (through 
? GDAL, of course).  The output will be a 24 bit JPEG (with 
? overlay data 
? unfortunately compressed as well) that will be sent over the 
? wire to the 
? client.
? 
? My problem is that both the ECW and the MrSIDs take a very 
? long time to 
? decompress, but GeoTIFF takes an ungodly amount of disk 
? space.  Here are 
? some numbers I just grabbed at random:
? 
? I took the same data in GeoTIFF, ECW, and MrSID formats and 
? decompressed 
? them (to MEM which I thought would be a good comparison to 
? reading into 
? mapserver).
? 
? $ time gdal_translate -of MEM Q2918se.tiff /dev/null
? Input file size is 6337, 7082
? 0...10...20...30...40...50...60...70...80...90...100 - done.
? 0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata 
? 0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps
? 
? $ time gdal_translate -of MEM Q2918se.sid /dev/null
? Input file size is 6337, 7082
? 0...10...20...30...40...50...60...70...80...90...100 - done.
? 55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata 
? 0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps
? 
? $ time gdal_translate -of MEM Q2918se.ecw /dev/null
? Input file size is 6337, 7082
? 0...10...20...30...40...50...60...70...80...90...100 - done.
? 25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata 
? 0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps
? 
? As you can see, MrSID is more than twice as slow as ECW, and 
? GeoTIFF just
? flies.  The flip side (disk space) can be seen here in a directory
? listing:
? 
?  19226192 Aug 30 02:05 Q2918se.ecw
?   7601858 Aug 30 02:21 Q2918se.sid
? 134983605 Aug 30 02:00 Q2918se.tiff
? 
? What I'm considering is keeping the full-scale files in MrSID 
? format, and
? keeping overviews (pyramids) of lower resolution images in 
? ECW.  Assuming
? I need four layers (dividing each side by 2 -- and the area 
? by 4) or so
? for adequate performance, the image above would take:
? 
? 7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) + 
? 19/256MB (layer4).
? 
? That adds up to 13.9MB, a far cry from the 130MB TIFF.
? 
? This also gives me the ability to keep a lossless (MrSID) 
? file in case I 
? ever want to convert to GeoTIFFs in the future.
? 
? Does this make sense?  Are there better ways to get 
? performance out of 
? MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?
? 
? I'm sure that someone will say "Hard Drives are Cheap", and I 
? agree, but 
? it seems that this data is growing at outrageous rates 
? (uncompressed), and 
? that the time spent reading the entire GeoTIFF becomes a bottleneck 
? anyway.
? 
? I'd really appreciate any advice,
? 
? Thanks
? Bill
? 
? _______________________________________________
? Gdal-dev mailing list
? Gdal-dev@lists.maptools.org
? http://lists.maptools.org/mailman/listinfo/gdal-dev
? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050830/244a28b6/attachment.html
From vincent at ecovla.nl  Tue Aug 30 03:44:32 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
References: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
Message-ID: <43140E60.70201@ecovla.nl>

Bill,

Just sharing my experiences. Assuming your mapserver app will be more or
less randomly serving extents at more or less random scales, I would
advise using compressed, tiled geotiffs, with pyramids (you can use
gdaladdo for that). Do some test with your data which compressing
algorithm and tilesize suites you best, keeping your app, disksize,
decompression time in mind. I expect that will be the best compromise
for you between file size and serving time. Use tiles because then it is
easier to read only a small (zoomed in) part of your file. It you use
the default striped tiff, always entire rows will be read, also when
only a small part is needed.
Another hint: use lots of ram. Not only are disks cheap, memory is cheap
also and on a busy mapserver server machine, lots of ram can be used as
disk cache, eliminating the need to read often asked files each time.
You could also experiment with enlarging the gdal cache, I suppose that
will hold the *decompressed* files instead of the disk cache, which will
hold the file data itself. Probably someone else on this list (if not
Frank W.) can tell you how to set the gdal cache size.

Cheers,
Vincent.

Bill Binko wrote:
> Hello everyone,
> 
> I need some advice on how to store and process raster images I'm working
> with.  The images have generally come in as either ECW (or JP2000 -- my
> choice) or MrSID format.  They are aerial images (DOQQs generally at
> 1meter accuracy).
> 
> I need to be able to serve these up efficiently using mapserver (through 
> GDAL, of course).  The output will be a 24 bit JPEG (with overlay data 
> unfortunately compressed as well) that will be sent over the wire to the 
> client.
> 
> My problem is that both the ECW and the MrSIDs take a very long time to 
> decompress, but GeoTIFF takes an ungodly amount of disk space.  Here are 
> some numbers I just grabbed at random:
> 
> I took the same data in GeoTIFF, ECW, and MrSID formats and decompressed 
> them (to MEM which I thought would be a good comparison to reading into 
> mapserver).
> 
> $ time gdal_translate -of MEM Q2918se.tiff /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.sid /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.ecw /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps
> 
> As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF just
> flies.  The flip side (disk space) can be seen here in a directory
> listing:
> 
>  19226192 Aug 30 02:05 Q2918se.ecw
>   7601858 Aug 30 02:21 Q2918se.sid
> 134983605 Aug 30 02:00 Q2918se.tiff
> 
> What I'm considering is keeping the full-scale files in MrSID format, and
> keeping overviews (pyramids) of lower resolution images in ECW.  Assuming
> I need four layers (dividing each side by 2 -- and the area by 4) or so
> for adequate performance, the image above would take:
> 
> 7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) + 
> 19/256MB (layer4).
> 
> That adds up to 13.9MB, a far cry from the 130MB TIFF.
> 
> This also gives me the ability to keep a lossless (MrSID) file in case I 
> ever want to convert to GeoTIFFs in the future.
> 
> Does this make sense?  Are there better ways to get performance out of 
> MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?
> 
> I'm sure that someone will say "Hard Drives are Cheap", and I agree, but 
> it seems that this data is growing at outrageous rates (uncompressed), and 
> that the time spent reading the entire GeoTIFF becomes a bottleneck 
> anyway.
> 
> I'd really appreciate any advice,
> 
> Thanks
> Bill
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From noumayoss at gmail.com  Tue Aug 30 07:58:16 2005
From: noumayoss at gmail.com (Benjamin Simon)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] GDAL Postgis Raster Driver
Message-ID: <ccbc9fcf05083004583e356cbf@mail.gmail.com>

Hi all,

I've been playing a bit with GDAL driver implementation and as I am
quite interested in database development, I 've decided to write a
Postgis wrapper for GDAL. I've used the Postgis CHIP datatype to store
rasters in PostgreSQL.

Basically, the driver can read files with a pixel definition of 8 or
16 bits. It can deal with 1 or 4 bands (GREY_SCALE, PALETTE and RGBA).
I've only tested to import PNG, BMP, JPEG and TIF files and I think
the driver is not stable yet with any other formats. The driver is
supposed to be capable of dealing with projections if Postgis was
built with the proj4 library.

I do think it could be good to move some of the functions from the
GDAL Driver source code to Postgis source. However, this would require
I contact Postgis development team and I prefer to finalize the driver
before, as it is really easier to test and develop.

I have contacted Frank so that this new experimental driver can soon
be part of the global GDAL source tree.

If you can't wait unil then or if you're interested in testing, you
can download the source code from this address:
http://simon.benjamin.free.fr/pgchip/ and follow the installation
instructions.

Any suggestions, comments, questions or help are welcome.

Regards,
Benjamin.


From ed at topozone.com  Tue Aug 30 09:14:14 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD2C5@ptolemy.topozone.com>

Bill -

Here are a few thoughts on your situation, in order of when they popped
into my head while reading your note!

How many DOQQs are you dealing with?  That helps us understand the scope
of the problem.

You seem to say that your MrSID images are "lossless" - are you certain
that that's the case?  Your example seems rather small (20:1
compression) for lossless MrSID.  If you really need to get the original
data back, triple-check this point.

You do not need to "read the entire GeoTIFF" to extract a portion of it.
That is one of the significant advantages of the GeoTIFF format.  Your
own numbers below are examples of reading the entire file, where GeoTIFF
seems to do well.

Hard Drives are Cheap.  I just bought Western Digital 250GB EIDE drives
for $125 each.  That's about 1,800 of your 24-bit GeoTIFFs for $125, or
about 7 cents each.  Consider how much time you're spending on this
problem.  I'm surprised you find your data is growing at "outrageous
rates" - the USGS DOQQ data library is not growing all that rapidly
(about 5% per year for the last few years).  If you're starting with a
subset of DOQQs and expanding the area, you might just look at what you
need to cover the entire set.

You might also consider using a commercial WMS service that provides
DOQQ imagery.  It won't be quite as fast as your own online system can
be, but it's likely to be a whole lot faster than your compressed
imagery and might be able to provide something that's almost as fast as
GeoTIFFs on your LAN at a lower price.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Bill Binko
Sent: Tuesday, August 30, 2005 2:30 AM
To: GDAL Developer List
Subject: [Gdal-dev] Advice on Raster Formats

Hello everyone,

I need some advice on how to store and process raster images I'm working
with.  The images have generally come in as either ECW (or JP2000 -- my
choice) or MrSID format.  They are aerial images (DOQQs generally at
1meter accuracy).

I need to be able to serve these up efficiently using mapserver (through
GDAL, of course).  The output will be a 24 bit JPEG (with overlay data
unfortunately compressed as well) that will be sent over the wire to the
client.

My problem is that both the ECW and the MrSIDs take a very long time to
decompress, but GeoTIFF takes an ungodly amount of disk space.  Here are
some numbers I just grabbed at random:

I took the same data in GeoTIFF, ECW, and MrSID formats and decompressed
them (to MEM which I thought would be a good comparison to reading into
mapserver).

$ time gdal_translate -of MEM Q2918se.tiff /dev/null Input file size is
6337, 7082 0...10...20...30...40...50...60...70...80...90...100 - done.
0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata
0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.sid /dev/null Input file size is
6337, 7082 0...10...20...30...40...50...60...70...80...90...100 - done.
55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata
0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps

$ time gdal_translate -of MEM Q2918se.ecw /dev/null Input file size is
6337, 7082 0...10...20...30...40...50...60...70...80...90...100 - done.
25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata
0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps

As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF
just flies.  The flip side (disk space) can be seen here in a directory
listing:

 19226192 Aug 30 02:05 Q2918se.ecw
  7601858 Aug 30 02:21 Q2918se.sid
134983605 Aug 30 02:00 Q2918se.tiff

What I'm considering is keeping the full-scale files in MrSID format,
and keeping overviews (pyramids) of lower resolution images in ECW.
Assuming I need four layers (dividing each side by 2 -- and the area by
4) or so for adequate performance, the image above would take:

7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) +
19/256MB (layer4).

That adds up to 13.9MB, a far cry from the 130MB TIFF.

This also gives me the ability to keep a lossless (MrSID) file in case I
ever want to convert to GeoTIFFs in the future.

Does this make sense?  Are there better ways to get performance out of
MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?

I'm sure that someone will say "Hard Drives are Cheap", and I agree, but
it seems that this data is growing at outrageous rates (uncompressed),
and that the time spent reading the entire GeoTIFF becomes a bottleneck
anyway.

I'd really appreciate any advice,

Thanks
Bill

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mn at blominfo.dk  Tue Aug 30 09:57:50 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Weird colors in gdal_translate
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E040@kernen.blomkbh.dk>

I'm sorry if this is a double-post, but I think something went wrong in
the first email...

Anyway, I'm trying to extract tiles from a large image, but all I get is
a weird-looking image consisting only of rgb levels at either 0 or 255.
There is an example here: http://blominfo.dk/3d/gdalerror.png
<http://blominfo.dk/3d/gdalerror.png> 

 

The input image is an orthophoto mosaic and the top of the extracted
image only contain black pixels (I guess this is kinda like a nodata
area).

In the extracted image, the black area in the lower right corner is
where the actual data was, and the "psychedelic" colored and white area
is where there was actually no-data.

The funny thing is that when I extract from an area just below it, it
all works fine.

 

I've seen similar problems before when I was merging and ECW-compressing
large images, but never found a solution either.

 

Any kind of solution or workaround is highly appreciated.

 

I'm using "FW Tools 0.9.9".

 

Here is the gdalinfo on the input image:

----------------------------------

   Driver: ECW/ERMapper Compressed Wavelets

   Size is 206250, 75000

   Coordinate System is:

   LOCAL_CS["LOCAL",

       UNIT["Meter",1]]

   Origin = (-280500.000000,194000.000000)

   Pixel Size = (0.08000000,-0.08000000)

   Corner Coordinates:

   Upper Left  ( -280500.000,  194000.000)

   Lower Left  ( -280500.000,  188000.000)

   Upper Right ( -264000.000,  194000.000)

   Lower Right ( -264000.000,  188000.000)

   Center      ( -272250.000,  191000.000)

   Band 1 Block=206250x1 Type=Byte, ColorInterp=Red

     Overviews: arbitrary

   Band 2 Block=206250x1 Type=Byte, ColorInterp=Green

     Overviews: arbitrary

   Band 3 Block=206250x1 Type=Byte, ColorInterp=Blue

     Overviews: arbitrary

----------------------------------

Here's the command that produces the output:

gdal_translate -projwin -266437.5 193600 -265412.5 192575 input.ecw
output.tif

 

 

 

Best regards

/Morten 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050830/985df2be/attachment.html
From fwarmerdam at gmail.com  Tue Aug 30 11:03:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Weird colors in gdal_translate
In-Reply-To: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E040@kernen.blomkbh.dk>
References: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E040@kernen.blomkbh.dk>
Message-ID: <931f8ea905083008031461b728@mail.gmail.com>

On 8/30/05, Morten Nielsen <mn@blominfo.dk> wrote:
>  
>  
> 
> I'm sorry if this is a double-post, but I think something went wrong in the
> first email? 
> 
> Anyway, I'm trying to extract tiles from a large image, but all I get is a
> weird-looking image consisting only of rgb levels at either 0 or 255. There
> is an example here: http://blominfo.dk/3d/gdalerror.png 

...
> I'm using "FW Tools 0.9.9". 

Morten, 

I didn't see anything unusual about the image, other than that it is
quite large of course.  Are you using FWTools 0.9.9 on Linux or
Windows?  I don't completely trust the older version of the ECW
library I use on Linux and I am hoping to upgrade again when the
next ECW SDK release comes out. 

Also, could you set the CPL_DEBUG environment variable to ON
and rerun the problem translation and capture all the debug output?
There should be message about the -srcwin that actually gets used
for your projwin, and then various debug messages about what 
GDAL actually does internally. Perhaps some of this will be helpful
in diagnosing the problem. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Ken.Boss at dnr.state.mn.us  Tue Aug 30 11:14:38 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] swig/perl
Message-ID: <s31431bd.098@co5.dnr.state.mn.us>

Hello Ari--

I think Howard Butler and Kevin Ruland have already laid much of the groundwork that you'll require with their "next generation" (ng) GDAL bindings project.  See Howard's recent post at http://lists.maptools.org/pipermail/gdal-dev/2005-August/006120.html.

Further, Schuyler Erle did some preliminary work on perl bindings for GDAL a while back (http://search.cpan.org/~sderle/Geo-GDAL/).  I think in particular you might find his typemap work (http://search.cpan.org/src/SDERLE/Geo-GDAL-0.11/typemap) to be of use.

HTH,

--Ken

>>> Ari Jolma <ari.jolma@tkk.fi> 08/30/05 1:30 AM >>>
Hi,

I'm thinking of writing a Perl interface to GDAL using Swig, similar to 
the Python etc. interfaces in gdal distribution. I haven't used Swig so 
I think this is also a good occasion to learn it. So far, in one hour, 
I've got a gdal.pm which loads :) but no ogr.pm for instance (which I'm 
mostly interested in now in fact). I copied typemaps_python.i to 
typemaps_perl.i and made a global replace python->perl but I guess 
there's much to do besides that elsewhere also. I know XS but I'm mostly 
unfamiliar with typemaps.

Is anybody else interested in this? I mean interested enough and with 
some free time to cooperate. I think I know of the usual places for 
existing written advise, but is there anything more in particular I 
should know about?

Ari

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From nharding at extendthereach.com  Tue Aug 30 11:18:05 2005
From: nharding at extendthereach.com (Ned Harding)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Memory Leaks
Message-ID: <EA3A32572CDE7143B39BC2ADF0511552F63230@rocky.extendthereach.com>

I am trying to clear out all my memory leaks in a project I have.  I have 2
memory leaks in OGR that I can't figure out.  These are minor, but I'd still
rather not have any leaks since this code can be used for a server process
that is expected to live for a long time.

2 functions allocate memory that never get free'd again.

CPLGetErrorContext
CPLGetTLSList

In a single threaded app, these wouldn't be much of an issue because it
would happen once and that's the end of it.  In my app in particular, I
create a new thread to run a background process in and then the thread ends
and goes away when its done.  I don't see any way to clear up this thread
specific data at the end of processing.  Any ideas?  It would be especially
nice if there was a way to reference count this data based on OGR objects
that require it so that nothing special needs to be called to free it, but a
cleanup function would work as well.

Ned Harding
Chief Technology Officer
SRC - Extending the Reach of Micromarketing
3825 Iris Ave Suite 150
Boulder, CO 80303
(303) 440-8896 x104

http://www.extendthereach.com

Technology in Action:

http://www.DemographicsNow.com





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050830/98485acb/attachment.html
From fwarmerdam at gmail.com  Tue Aug 30 11:28:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
References: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
Message-ID: <931f8ea90508300828509cf156@mail.gmail.com>

On 8/30/05, Bill Binko <bill@binko.net> wrote:

> $ time gdal_translate -of MEM Q2918se.tiff /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata
> 0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.sid /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata
> 0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.ecw /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata
> 0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps
> 
> As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF just
> flies.  The flip side (disk space) can be seen here in a directory
> listing:

Bill, 

I don't think the above performance is particularly meaningful with
regard to how fast things would be when using MrSID (or ECW) in
MapServer.  In particular, conversion with gdal_translate generally
results in data from the source being requested one line at a time.
This will generally result in the ECW or MrSID drivers falling back to
a tile based strategy.  In the case of MrSID it will populate the tile
cache with 1024x128 blocks to satisfy requests.  Doing many smallish
requests like this is significantly slower with formats like MrSID, ECW
or JPEG2000 than doing one big pass through.  But because the
driver has trouble predicting what future requests will be made, I 
had to some up with some strategy.

In the case of MapServer though, we take care to do a single
big RasterIO() request so the MrSID, ECW or JP2 readers can
just make one windowed request for data (well sometimes 3
for RGB data since I am not savvy about doing all three bands
at once).  In short, MapServer may have substantially better
performance characteristics than you would expect from the
above numbers. 

I believe you have already tried directly to MrSID with MapServer
and got poor performance (as you showed me in IRC some weeks ago?).
Some of my other clients have also been somewhat disappointed with
performance and I have found performance a bit unreliable in my
local tests (though not too bad).  I'm not sure what to say.   My doing
three passes to get red, green and blue may be a significant factor.
It may also be that there is a non-trivial "connection time" to opening
the MrSIDs and that what we really need is an approach where the
MrSID file(s) are kept open between requests using FastCGI and 
some gdal file handle caching mechanism.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Aug 30 11:57:42 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Memory Leaks
In-Reply-To: <EA3A32572CDE7143B39BC2ADF0511552F63230@rocky.extendthereach.com>
References: <EA3A32572CDE7143B39BC2ADF0511552F63230@rocky.extendthereach.com>
Message-ID: <931f8ea905083008571fc89037@mail.gmail.com>

On 8/30/05, Ned Harding <nharding@extendthereach.com> wrote:
>  
> 
> I am trying to clear out all my memory leaks in a project I have.  I have 2
> memory leaks in OGR that I can't figure out.  These are minor, but I'd still
> rather not have any leaks since this code can be used for a server process
> that is expected to live for a long time. 
> 
> 2 functions allocate memory that never get free'd again. 
> 
> CPLGetErrorContext 
> CPLGetTLSList 

Ned, 

I would *love* to be able to clear these up properly, but I am not
sure about how to register "atexit" handers for threads in a cross
platform way.  In the meantime, you can call CPLCleanupTLS()
at the point where the threads are exiting. 

Note that CPLCleanupTLS() was added after the 1.3.0 release, so
you would need to be using GDAL CVS to get it. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bill at binko.net  Tue Aug 30 13:40:28 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:43 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <931f8ea90508300828509cf156@mail.gmail.com>
References: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
	<931f8ea90508300828509cf156@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508301315420.12414@fastcat.binko.net>

Thank you Frank, Ed and everyone else for your input.

As mentioned, perhaps I should back up and explain my problem a bit more.

I will have DOQQs for the entire state of Florida at 1m (or 3 ft,
depending on the area) accuracy.  Currently, I have 2/3 of the state, and 
it's taking about 30GB compressed, which is completely reasonable.  
However, with a 10:1 decompression rate (at least on the MrSIDS), the 
400GB needed for a full decompressed set (plus the overview size), it 
rapidly becomes untenable.

Certainly the hard-drive space can be overcome: 400GB drives can be had
for $229, and decent SCSI drives at that size are only twice that price.  
However, there are other issues w/the uncompressed files that are 
troublesome:

1) Backups become more difficult as you either need to a) compress the 
files or b) use very expensive tapes or c) use additional (portable) hard 
drives.

2) As my site will be colocated, I will not be able to update the DOQQs 
over the network, and will have to take a portable drive down to the colo 
center.

3) While the GeoTIFFs are far (far!) faster to load, when mapserver 
pointed to the limited set I created, I saw a marked increase in io 
utilization (which is I suppose expected).  With multiple concurrent 
users, I think this may move my bottleneck to the drives.

With all that said, I am certainly open to upgrading my drives if that's 
the best solution.

Now, as to the actual performance problem.

When I zoom into a DOQQ (to the street level or so), the performance is 
fine with both ECW and MrSIDs.  As I zoom out _even within the same DOQQ_, 
it rapidly slows down to the point of being unusable.  When I get to the 
point where I'm at four tiles, ECW is still standing (about 1 minute 
render time), and MrSID is a joke (I haven't waited for it).  I generally 
have to go kill the mapserv processes when I mistakenly start a 
large-scale render on the MrSIDs.

Now, I thought that I would create some overviews with gdaladdo, but that 
doesn't really help.  ECWs have "built-in" overviews that you can't seem 
to tweak, and MrSIDs are not writeable.  Perhaps there's a way to create 
external overviews for MrSIDs, but I have not found one.

So, my next approach was to create pyramid layers that the mapserver 
process would switch between as it zoomed in and out.  This would reduce 
both the decompression time and the resampling time.  So I started writing 
a script to build those pyramids using python and gdal.  I have made 
progress, but have run into some issues.  I can work past all of them (I 
think) with some help from you wonderful people, but I would like to know 
the target: which formats should I be creating these overview layers in.

I hope I haven't been too long-winded, and that this is a bit clearer.

Thanks again,
Bill

PS: regarding the "lossless" MrSIDs -- I am just quoting the agency I got 
the DOQQs from.  I can post the output of gdalinfo if you think it's 
pertinent.

From nharding at extendthereach.com  Tue Aug 30 13:33:04 2005
From: nharding at extendthereach.com (Ned Harding)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Memory Leaks
Message-ID: <EA3A32572CDE7143B39BC2ADF0511552F63257@rocky.extendthereach.com>

Thanks Frank...   

Is there any harm in calling CPLCleanupTLS in a thread and then using that
thread again?  Will it make new structures?  If so, that will make it easy
for me to reference count.

Otherwise, is there any harm in calling it if it has never been initialized?

And finally, has anything been done in OGR post 1.3 that would be risky for
production code?

Thanks again,

Ned.

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] 
Sent: Tuesday, August 30, 2005 8:58 AM
To: Ned Harding
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Memory Leaks

On 8/30/05, Ned Harding <nharding@extendthereach.com> wrote:
>  
> 
> I am trying to clear out all my memory leaks in a project I have.  I 
> have 2 memory leaks in OGR that I can't figure out.  These are minor, 
> but I'd still rather not have any leaks since this code can be used 
> for a server process that is expected to live for a long time.
> 
> 2 functions allocate memory that never get free'd again. 
> 
> CPLGetErrorContext
> CPLGetTLSList

Ned, 

I would *love* to be able to clear these up properly, but I am not sure
about how to register "atexit" handers for threads in a cross platform way.
In the meantime, you can call CPLCleanupTLS() at the point where the threads
are exiting. 

Note that CPLCleanupTLS() was added after the 1.3.0 release, so you would
need to be using GDAL CVS to get it. 

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050830/025fa8b9/attachment.html
From bill at binko.net  Tue Aug 30 13:49:25 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <s3141ccf.048@SRV-POSTIX-DFT>
References: <s3141ccf.048@SRV-POSTIX-DFT>
Message-ID: <Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>

On Tue, 30 Aug 2005, Bart van den Eijnden wrote:

> Bill,
> 
> I don't have a straight answer to your question, just a curiosity as how compressed tiff would do in this comparison. Are you able to add that to your testcase?
> 
> Best regards,
> Bart
> 

Bart, I'll be happy to try this: what gdal_translate command line to you 
suggest?

Bill

From fwarmerdam at gmail.com  Tue Aug 30 13:46:56 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Memory Leaks
In-Reply-To: <EA3A32572CDE7143B39BC2ADF0511552F63257@rocky.extendthereach.com>
References: <EA3A32572CDE7143B39BC2ADF0511552F63257@rocky.extendthereach.com>
Message-ID: <931f8ea905083010463b4c1d77@mail.gmail.com>

On 8/30/05, Ned Harding <nharding@extendthereach.com> wrote:
>  
> 
> Thanks Frank...   
> 
> Is there any harm in calling CPLCleanupTLS in a thread and then using that
> thread again?  Will it make new structures?  If so, that will make it easy
> for me to reference count. 

Ned, 

Calling CPLCleanupTLS() at a point other than thread cleanup is
discouraged.  I'm not aware of any serious issue that it would cause
now, but it might not always be that way (and I may missing something). 
 
> Otherwise, is there any harm in calling it if it has never been initialized?

There is no harm in calling it with nothing previously initialized.

> And finally, has anything been done in OGR post 1.3 that would be risky for
> production code? 

Not that I can think of.  
 
Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Tue Aug 30 14:03:26 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
Message-ID: <op.swb1r0mpmjfraz@bart.lan>

Hi Bill,

I *think* you would have to translate your tiff files first to compressed  
tiff using the -co option.

COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]

I don't think it is possible to do it in one step, but I could be wrong.

Best regards,
Bart

On Tue, 30 Aug 2005 19:49:25 +0200, Bill Binko <bill@binko.net> wrote:

> On Tue, 30 Aug 2005, Bart van den Eijnden wrote:
>
>> Bill,
>>
>> I don't have a straight answer to your question, just a curiosity as  
>> how compressed tiff would do in this comparison. Are you able to add  
>> that to your testcase?
>>
>> Best regards,
>> Bart
>>
>
> Bart, I'll be happy to try this: what gdal_translate command line to you
> suggest?
>
> Bill
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From dron at ak4719.spb.edu  Tue Aug 30 14:33:01 2005
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <op.swb1r0mpmjfraz@bart.lan>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
	<op.swb1r0mpmjfraz@bart.lan>
Message-ID: <20050830183301.GB26893@ak4719.spb.edu>

On Tue, Aug 30, 2005 at 08:03:26PM +0200, Bart van den Eijnden wrote:
> I *think* you would have to translate your tiff files first to
> compressed  tiff using the -co option.
> 
> COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]

I just want to add that typical compression ratio in case of LZW or
DEFLATE methods may be improved by using a predictor feature. It is
disabled by default, but can by switched on with the PREDICTOR=[2/3]
parameter. Value 2 means horisontal differencing, it should help in most
cases when we are working with integer data. Value 3 corresponds to
floating point predictor and should help when you have floating point
dataset. But be carefull: predictor 3 is a newest addition from Adobe
and supported by the limited number of software (for example it is
Photoshop CS2 and software based on latest libtiff 3.7.3). Predictor 2
must be widely supported.

Interleaving type and tile/strip size affect compression ratio as well,
but not too much (though it may be valuable when you are working with
very large datasets).

Regards,
Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From bill at binko.net  Tue Aug 30 16:50:20 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <op.swb1r0mpmjfraz@bart.lan>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
	<op.swb1r0mpmjfraz@bart.lan>
Message-ID: <Pine.LNX.4.58.0508301640160.12414@fastcat.binko.net>

On Tue, 30 Aug 2005, Bart van den Eijnden wrote:

> Hi Bill,
> 
> I *think* you would have to translate your tiff files first to compressed  
> tiff using the -co option.
> 
> COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]
> 
> I don't think it is possible to do it in one step, but I could be wrong.
> 
> Best regards,
> Bart
> 

Looks like you can do it in one step... here are some results:


ECW Q2918se.ecw
24.95user 0.54system 0:25.67elapsed 99%CPU (0avgtext+0avgdata 0maxresident)k

Deflated TIFF Q2918se.dtiff
2.72user 0.42system 0:04.31elapsed 73%CPU (0avgtext+0avgdata 0maxresident)k

JPEG TIFF Q2918se.jtiff
4.20user 0.32system 0:04.58elapsed 98%CPU (0avgtext+0avgdata 0maxresident)k

PACKEDBITS TIFF Q2918se.ptiff
0.75user 0.47system 0:03.51elapsed 35%CPU (0avgtext+0avgdata 0maxresident)k

MrSID Q2918se.sid
54.24user 6.08system 1:07.68elapsed 89%CPU (0avgtext+0avgdata 0maxresident)k

RAW GeoTIFF Q2918se.tiff
0.71user 0.50system 0:03.75elapsed 32%CPU (0avgtext+0avgdata 0maxresident)k

TILED GeoTIFF Q2918se.ttiff
0.99user 0.43system 0:02.18elapsed 65%CPU (0avgtext+0avgdata 0maxresident)k

JPEG2000 (from ERMapper) Q2918se.jp2
50.72user 0.79system 0:52.11elapsed 98%CPU (0avgtext+0avgdata 0maxresident)k

Here are the sizes
 19226192 Aug 30 02:05 Q2918se.ecw
118184508 Aug 30 15:47 Q2918se.dtiff
 33824190 Aug 30 15:48 Q2918se.jtiff
135728598 Aug 30 15:49 Q2918se.ptiff
  7601858 Aug 30 02:21 Q2918se.sid
134983605 Aug 30 02:00 Q2918se.tiff
 20238367 Aug 30 16:45 Q2918se.jp2
137642794 Aug 30 15:53 Q2918se.ttiff

I can see the tradeoffs here (although I can't imagine choosing JP2 over 
ECW).  Thanks for the suggestions.

I'm still mulling over my strategy, let me know if anyone is inspired.

Bill

From bill at binko.net  Tue Aug 30 16:51:37 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <20050830183301.GB26893@ak4719.spb.edu>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
	<op.swb1r0mpmjfraz@bart.lan> <20050830183301.GB26893@ak4719.spb.edu>
Message-ID: <Pine.LNX.4.58.0508301650510.12414@fastcat.binko.net>

On Tue, 30 Aug 2005, Andrey Kiselev wrote:

> On Tue, Aug 30, 2005 at 08:03:26PM +0200, Bart van den Eijnden wrote:
> > I *think* you would have to translate your tiff files first to
> > compressed  tiff using the -co option.
> > 
> > COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]
> 

I don't have LZW enabled (gives a Unisys patent notice), but on deflate, 
the PREDICTOR=2 saved about 2% over no predictor value, and PREDICTOR=3 
threw an error.

Bill

From eric.sokolowsky at gsfc.nasa.gov  Tue Aug 30 17:27:08 2005
From: eric.sokolowsky at gsfc.nasa.gov (Eric Sokolowsky)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508301650510.12414@fastcat.binko.net>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
	<op.swb1r0mpmjfraz@bart.lan> <20050830183301.GB26893@ak4719.spb.edu>
	<Pine.LNX.4.58.0508301650510.12414@fastcat.binko.net>
Message-ID: <Pine.LNX.4.61.0508301722510.28529@svsmail.gsfc.nasa.gov>

On Tue, 30 Aug 2005, Bill Binko wrote:

> On Tue, 30 Aug 2005, Andrey Kiselev wrote:
>
>> On Tue, Aug 30, 2005 at 08:03:26PM +0200, Bart van den Eijnden wrote:
>>> I *think* you would have to translate your tiff files first to
>>> compressed  tiff using the -co option.
>>>
>>> COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]
>>
>
> I don't have LZW enabled (gives a Unisys patent notice), but on deflate,
> the PREDICTOR=2 saved about 2% over no predictor value, and PREDICTOR=3
> threw an error.

I recommend that you use libtiff version 3.7.1 or later in order to 
be able to try LZW compression. Unisys's patent for LZW expired some time
ago and so there is no good reason to keep libtiff crippled.

From armin.burger at gmx.net  Tue Aug 30 17:57:17 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
References: <Pine.LNX.4.58.0508300214550.12690@fastcat.binko.net>
Message-ID: <4314D63D.8080805@gmx.net>

Bill,

we made some tests with Quickbird and Ikonos images using ECW and 
MapServer. The ECW image size ranges from 100 MB to 1 GB. Putting the 
images in an image catalog and displaying them with Mapserver typically 
works very well. The biggest image catalog is made out of 80 
pan-sharpened Ikonos images that have about 12 GB altogether.

If you display all of them together at low scale (which I agree in 
principal makes no sense) still just takes some seconds on a standard 
server even with a not really fast disk array. The more you zoom in the 
faster the processing is, because the server just has to read a few 
images. Doing the same thing with TIFF (even with overviews created) was 
typically somewhat slower.

The ECW has big advantages if you can merge your images into just a few 
big files. If your data changes frequently then of course this approach 
is not the best for you. We created one big ECW from Landsat data for 
most parts of Europe. The size of the ECW is about 4 GB (compression 
ratio about 30 times). The visual quality is not much lower than the 
original files and a map creation with Mapserver takes 0.5 to 2 seconds.

I have to admit that there were some strange problems when zooming to 
higher scales in some parts of the big image. That made the server 
process crash. But I think that could be related to the ECW library 
(still using the 3.1 beta on Linux) and will hopefully resolved in newer 
versions.

I found it a very convenient functionality in newer Mapserver versions 
that you can specify an image catalog now more flexibly. We store all 
the image extents as polygons in PostGIS (instead of shapefiles) and the 
catalog in the map file just uses a filter expression to select the 
images we need from this catalog. I think the current documentation does 
not mention this definition but there was a mail last year on the 
Mapserver mailing list that explained it.

Armin

Bill Binko wrote:
> Hello everyone,
> 
> I need some advice on how to store and process raster images I'm working
> with.  The images have generally come in as either ECW (or JP2000 -- my
> choice) or MrSID format.  They are aerial images (DOQQs generally at
> 1meter accuracy).
> 
> I need to be able to serve these up efficiently using mapserver (through 
> GDAL, of course).  The output will be a 24 bit JPEG (with overlay data 
> unfortunately compressed as well) that will be sent over the wire to the 
> client.
> 
> My problem is that both the ECW and the MrSIDs take a very long time to 
> decompress, but GeoTIFF takes an ungodly amount of disk space.  Here are 
> some numbers I just grabbed at random:
> 
> I took the same data in GeoTIFF, ECW, and MrSID formats and decompressed 
> them (to MEM which I thought would be a good comparison to reading into 
> mapserver).
> 
> $ time gdal_translate -of MEM Q2918se.tiff /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 0.72user 0.52system 0:02.79elapsed 44%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (0major+37327minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.sid /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 55.80user 7.78system 1:12.57elapsed 87%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (3major+631879minor)pagefaults 0swaps
> 
> $ time gdal_translate -of MEM Q2918se.ecw /dev/null
> Input file size is 6337, 7082
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 25.92user 1.43system 0:29.80elapsed 91%CPU (0avgtext+0avgdata 
> 0maxresident)k 0inputs+0outputs (0major+38181minor)pagefaults 0swaps
> 
> As you can see, MrSID is more than twice as slow as ECW, and GeoTIFF just
> flies.  The flip side (disk space) can be seen here in a directory
> listing:
> 
>  19226192 Aug 30 02:05 Q2918se.ecw
>   7601858 Aug 30 02:21 Q2918se.sid
> 134983605 Aug 30 02:00 Q2918se.tiff
> 
> What I'm considering is keeping the full-scale files in MrSID format, and
> keeping overviews (pyramids) of lower resolution images in ECW.  Assuming
> I need four layers (dividing each side by 2 -- and the area by 4) or so
> for adequate performance, the image above would take:
> 
> 7.6 (base) + 19/4MB (layer1) + 19/16MB (layer2)+ 19/64MB (layer3) + 
> 19/256MB (layer4).
> 
> That adds up to 13.9MB, a far cry from the 130MB TIFF.
> 
> This also gives me the ability to keep a lossless (MrSID) file in case I 
> ever want to convert to GeoTIFFs in the future.
> 
> Does this make sense?  Are there better ways to get performance out of 
> MrSIDs?  Should some of the higher (and smaller) layers stay GeoTIFF?
> 
> I'm sure that someone will say "Hard Drives are Cheap", and I agree, but 
> it seems that this data is growing at outrageous rates (uncompressed), and 
> that the time spent reading the entire GeoTIFF becomes a bottleneck 
> anyway.
> 
> I'd really appreciate any advice,
> 
> Thanks
> Bill
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From cbala at geospatialtech.com  Tue Aug 30 18:09:45 2005
From: cbala at geospatialtech.com (Chandrasekar Balasubramaniam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] SFCOM Provider
Message-ID: <BFECLMGFMCODELDNAOEHAELECEAA.cbala@geospatialtech.com>

 Hello Everyone
  Please can somebody tell me what is the current status of SFCOM Provider.
I do see a branch for SFOLE in the source tree but I would like to know if
there are instructions to bundle this into a COM DLL. I would appreciate any
help in this regard. Thanks
regards
chandra

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050830/5dc0ffeb/attachment.html
From fwarmerdam at gmail.com  Tue Aug 30 18:36:34 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] SFCOM Provider
In-Reply-To: <BFECLMGFMCODELDNAOEHAELECEAA.cbala@geospatialtech.com>
References: <BFECLMGFMCODELDNAOEHAELECEAA.cbala@geospatialtech.com>
Message-ID: <931f8ea90508301536534e1693@mail.gmail.com>

On 8/30/05, Chandrasekar Balasubramaniam <cbala@geospatialtech.com> wrote:
>  
>  Hello Everyone 
>   Please can somebody tell me what is the current status of SFCOM Provider.
> I do see a branch for SFOLE in the source tree but I would like to know if
> there are instructions to bundle this into a COM DLL. I would appreciate any
> help in this regard. Thanks 

Chandra,

To build the SFCOM OLEDB provider, cd into gdal\ogr\sfcom_oledb
and do "nmake".  That should build one in the sfcom_oledb\ogrprov
directory.

I will warn you that the OLEDB provider was always a bit flakey and
hasn't had any attention in a year or two.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From James.Browne at liu.edu  Tue Aug 30 19:39:50 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232D@uc-exh-2.liunet.edu>

Hi all,

After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.

However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.

I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?

I will not have time to study this more for a few days. Any ideas will be appreciated greatly.

    Thanks
                    Jim


I tested using both gdal_translate and gdalinfo and the debugging output was the same:

GNU gdb 6.3-debian
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".

(gdb) run --debug ON April1994_raw.ecw
Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
[Thread debugging using libthread_db enabled]
[New Thread 16384 (LWP 12685)]
[New Thread 32769 (LWP 12686)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 32769 (LWP 12686)]
0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
(gdb) bt
#0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
#1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
#2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
#3  0x40bf992a in clone () from /lib/libc.so.6
(gdb) s
Single stepping until exit from function pthread_handle_create,
which has no line number information.

<CTR-C>

Program received signal SIGINT, Interrupt.
[Switching to Thread 16384 (LWP 12685)]
0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
(gdb) bt
#0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
#1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
#2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
#3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
    bCreateSuspended=0) at ../../thread.c:390
#4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
#5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
#6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
#7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
#8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
#9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
#10 0x08049951 in main ()


$ gdal-config --formats
gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
$ gdal-config --version
1.3.0


  


From bill at binko.net  Tue Aug 30 20:42:18 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
In-Reply-To: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232D@uc-exh-2.liunet.edu>
References: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232D@uc-exh-2.liunet.edu>
Message-ID: <Pine.LNX.4.58.0508302041540.3936@fastcat.binko.net>

Have you applied my patch?

I know I said that compiling with -g should solve it, but you might try 
the patch as well.

Bill

On Tue, 30 Aug 2005, James Browne wrote:

> Hi all,
> 
> After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.
> 
> However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.
> 
> I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?
> 
> I will not have time to study this more for a few days. Any ideas will be appreciated greatly.
> 
>     Thanks
>                     Jim
> 
> 
> I tested using both gdal_translate and gdalinfo and the debugging output was the same:
> 
> GNU gdb 6.3-debian
> Copyright 2004 Free Software Foundation, Inc.
> GDB is free software, covered by the GNU General Public License, and you are
> welcome to change it and/or distribute copies of it under certain conditions.
> Type "show copying" to see the conditions.
> There is absolutely no warranty for GDB.  Type "show warranty" for details.
> This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> 
> (gdb) run --debug ON April1994_raw.ecw
> Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
> [Thread debugging using libthread_db enabled]
> [New Thread 16384 (LWP 12685)]
> [New Thread 32769 (LWP 12686)]
> 
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread 32769 (LWP 12686)]
> 0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> (gdb) bt
> #0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> #1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
> #2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
> #3  0x40bf992a in clone () from /lib/libc.so.6
> (gdb) s
> Single stepping until exit from function pthread_handle_create,
> which has no line number information.
> 
> <CTR-C>
> 
> Program received signal SIGINT, Interrupt.
> [Switching to Thread 16384 (LWP 12685)]
> 0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> (gdb) bt
> #0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> #1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
> #2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
> #3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
>     bCreateSuspended=0) at ../../thread.c:390
> #4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
> #5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
> #6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
> #7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
> #8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
> #9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
> #10 0x08049951 in main ()
> 
> 
> $ gdal-config --formats
> gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
> $ gdal-config --version
> 1.3.0
> 
> 
>   
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From richard.greenwood at gmail.com  Tue Aug 30 22:51:59 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] seamlessly joining USGS quadrangle tiffs
Message-ID: <ae9185aa050830195143679c52@mail.gmail.com>

Nice tool, thanks! It works smoothly and quickly on 7.5' quads, but
failed with 1:100k and 1:250k quads.

If you are looking for suggestions:

  You might consider posting the source code.

  You might include the cygwin dlls in the windows distribution:
     cygjpeg-62.dll
     cygproj-0.dll
     cygwin1.dll
     cygz.dll
  Or note that the required cygwin environment.

Regards,
Rich
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From dron at ak4719.spb.edu  Wed Aug 31 02:16:45 2005
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Advice on Raster Formats
In-Reply-To: <Pine.LNX.4.58.0508301650510.12414@fastcat.binko.net>
References: <s3141ccf.048@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0508301348500.12414@fastcat.binko.net>
	<op.swb1r0mpmjfraz@bart.lan>
	<20050830183301.GB26893@ak4719.spb.edu>
	<Pine.LNX.4.58.0508301650510.12414@fastcat.binko.net>
Message-ID: <20050831061645.GA10481@ak4719.spb.edu>

On Tue, Aug 30, 2005 at 04:51:37PM -0400, Bill Binko wrote:
> > > I *think* you would have to translate your tiff files first to
> > > compressed  tiff using the -co option.
> > > 
> > > COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]
> 
> I don't have LZW enabled (gives a Unisys patent notice), but on deflate, 
> the PREDICTOR=2 saved about 2% over no predictor value, and PREDICTOR=3 
> threw an error.

That means you have outdated libtiff. Unisys patent has been expired, so
you can safely use LZW. And, as I noted in previous message, you need
libtiff 3.7.3 to utilize predictor 3. And do not forget that this type
of predictor should be used with the floating point data only and
useless in other cases.

In general, deflate method compresses better than LZW, but LZW works
faster.

Regards,
Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From James.Browne at liu.edu  Wed Aug 31 09:01:15 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232F@uc-exh-2.liunet.edu>

Bill,
     Yes,I tried versions with it and without it. (and thanks for that work) It doesn't seem to even get that far in the code. In a day or two I will have the time to double check to see if I just did something dumb, or otherwise, to step through the code more closely. 
                        Jim


-----Original Message-----
From: Bill Binko [mailto:bill@binko.net]
Sent: Tue 8/30/2005 8:42 PM
To: James Browne
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
 
Have you applied my patch?

I know I said that compiling with -g should solve it, but you might try 
the patch as well.

Bill

On Tue, 30 Aug 2005, James Browne wrote:

> Hi all,
> 
> After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.
> 
> However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.
> 
> I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?
> 
> I will not have time to study this more for a few days. Any ideas will be appreciated greatly.
> 
>     Thanks
>                     Jim
> 
> 
> I tested using both gdal_translate and gdalinfo and the debugging output was the same:
> 
> GNU gdb 6.3-debian
> Copyright 2004 Free Software Foundation, Inc.
> GDB is free software, covered by the GNU General Public License, and you are
> welcome to change it and/or distribute copies of it under certain conditions.
> Type "show copying" to see the conditions.
> There is absolutely no warranty for GDB.  Type "show warranty" for details.
> This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> 
> (gdb) run --debug ON April1994_raw.ecw
> Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
> [Thread debugging using libthread_db enabled]
> [New Thread 16384 (LWP 12685)]
> [New Thread 32769 (LWP 12686)]
> 
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread 32769 (LWP 12686)]
> 0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> (gdb) bt
> #0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> #1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
> #2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
> #3  0x40bf992a in clone () from /lib/libc.so.6
> (gdb) s
> Single stepping until exit from function pthread_handle_create,
> which has no line number information.
> 
> <CTR-C>
> 
> Program received signal SIGINT, Interrupt.
> [Switching to Thread 16384 (LWP 12685)]
> 0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> (gdb) bt
> #0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> #1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
> #2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
> #3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
>     bCreateSuspended=0) at ../../thread.c:390
> #4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
> #5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
> #6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
> #7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
> #8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
> #9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
> #10 0x08049951 in main ()
> 
> 
> $ gdal-config --formats
> gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
> $ gdal-config --version
> 1.3.0
> 
> 
>   
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

  


From noumayoss at gmail.com  Wed Aug 31 12:48:11 2005
From: noumayoss at gmail.com (Benjamin Simon)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL Postgis Raster Driver
In-Reply-To: <002501c5ae41$c449df10$705b88cc@BlackFin>
References: <ccbc9fcf05083004583e356cbf@mail.gmail.com>
	<002501c5ae41$c449df10$705b88cc@BlackFin>
Message-ID: <ccbc9fcf050831094864fd7e00@mail.gmail.com>

Roger,

If you mean "Why use a database engine to store rasters?" then the answer is :

- Use spatial queries among tables of rasters images (i.e extracting
the right image when given an address or any geocoded object)
- Benefit from the database storage assets  ( -> security, fast access
with spatial indexes, backup, ...)
- Merge your spatial raster data with any other data you may have in
your database

I think one can find many good reasons for using databases, it is just
a very powerfull tool for managing your data, whatever its type or
whatever the volume you have. You just need to have the good
structures inside your RDBMS to manipulate it. And that's what the
CHIP structure aims at.

On the other hand, if you just mean "Why use the Postgis CHIP C
structure instead of redesigning a more approriate new one ?" , then
the answer is :

- The Postgis CHIP type is quite well optimized, there could just be
minor improvments to it
and that's what i'm working on at the moment. If Postgis development
team doesn't want to modify the structure, then we might consider to
design a new type in PostgreSQL to store raster data or just cope with
it.

I hope you've found your answer in these words.

Regards,
Benjamin.


2005/8/31, Roger <roger@sylvanascent.com>:
> Ben,
> What are the advantages of using this chip scheme?
> 
> Roger
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Benjamin Simon
> Sent: Tuesday, August 30, 2005 5:58 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] GDAL Postgis Raster Driver
> 
> 
> Hi all,
> 
> I've been playing a bit with GDAL driver implementation and as I am quite
> interested in database development, I 've decided to write a Postgis wrapper
> for GDAL. I've used the Postgis CHIP datatype to store rasters in
> PostgreSQL.
> 
> Basically, the driver can read files with a pixel definition of 8 or 16
> bits. It can deal with 1 or 4 bands (GREY_SCALE, PALETTE and RGBA). I've
> only tested to import PNG, BMP, JPEG and TIF files and I think the driver is
> not stable yet with any other formats. The driver is supposed to be capable
> of dealing with projections if Postgis was built with the proj4 library.
> 
> I do think it could be good to move some of the functions from the GDAL
> Driver source code to Postgis source. However, this would require I contact
> Postgis development team and I prefer to finalize the driver before, as it
> is really easier to test and develop.
> 
> I have contacted Frank so that this new experimental driver can soon be part
> of the global GDAL source tree.
> 
> If you can't wait unil then or if you're interested in testing, you can
> download the source code from this address:
> http://simon.benjamin.free.fr/pgchip/ and follow the installation
> instructions.
> 
> Any suggestions, comments, questions or help are welcome.
> 
> Regards,
> Benjamin.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
>


From support at geoimage.fr  Wed Aug 31 12:50:14 2005
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL 1.3.0 on Solaris 2.7
Message-ID: <0a7b01c5ae4c$0fc392b0$0a01a8c0@pili>

Hello,

I am trying to build GDAL 1.3.0 on Solaris 2.7 - sparc - gcc 3.3.2

After basic build, using built-in librairies (tiff, jpeg, ...), and external
hdf4, xerces and sqlite.

Now I'am trying to add GEOS and ECW support.

    - GEOS : What version of GEOS is supported ? is 2.1.4 OK ?

    - ECW : I have downloaded the SDK :
            ECW JPEG 2000 SDK Source Distribution
            Version 3.2 Beta 1
            Date : 11 June 2005
     and compiled it, but It doesn't work...the example programs hang (infinite
loop over yield)
     Does anyone has successfully  compiled the SDK on Solaris ?

Any help appreciated,
Best Regards,
Fr?d?ric.
_________________________________________________________________
Fr?d?ric Trastour - GEOIMAGE - dev@geoimage.fr


From fwarmerdam at gmail.com  Wed Aug 31 13:30:19 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL 1.3.0 on Solaris 2.7
In-Reply-To: <0a7b01c5ae4c$0fc392b0$0a01a8c0@pili>
References: <0a7b01c5ae4c$0fc392b0$0a01a8c0@pili>
Message-ID: <931f8ea9050831103060e3b4f9@mail.gmail.com>

On 8/31/05, Fr?d?ric Trastour <support@geoimage.fr> wrote:
> Hello,
> 
> I am trying to build GDAL 1.3.0 on Solaris 2.7 - sparc - gcc 3.3.2
> 
> After basic build, using built-in librairies (tiff, jpeg, ...), and external
> hdf4, xerces and sqlite.
> 
> Now I'am trying to add GEOS and ECW support.
> 
>     - GEOS : What version of GEOS is supported ? is 2.1.4 OK ?

Fr?d?ric,

GEOS 2.0.x or 2.1.x should work. 
 
>     - ECW : I have downloaded the SDK :
>             ECW JPEG 2000 SDK Source Distribution
>             Version 3.2 Beta 1
>             Date : 11 June 2005
>      and compiled it, but It doesn't work...the example programs hang (infinite
> loop over yield)
>      Does anyone has successfully  compiled the SDK on Solaris ?

I can't say that I have tried it myself on Solaris, but there are some 
thread-lock-up issues in the POSIX logic that *might* affect Solaris. 
You ought to look through the ECW SDK Forums at ermapper.com and
look for patches by Bill.  Or, if you can wait, hold out for 3.2 final (or 3.3
I think they plan to call it). 

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dblasby at gmail.com  Wed Aug 31 14:12:14 2005
From: dblasby at gmail.com (David Blasby)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL Postgis Raster Driver
In-Reply-To: <ccbc9fcf050831094864fd7e00@mail.gmail.com>
References: <ccbc9fcf05083004583e356cbf@mail.gmail.com>
	<002501c5ae41$c449df10$705b88cc@BlackFin>
	<ccbc9fcf050831094864fd7e00@mail.gmail.com>
Message-ID: <89f845e805083111124a7adf41@mail.gmail.com>

I wrote the original CHIP code. It was designed to be ultra-simple, and I'm 
assuming that no one's changed it in a while (looking at the code base 
indicates this is true). Here's a few notes on it:

1. Right now you cannot directly index a CHIP. It has a bounding box and an 
SRID, so you should be able to use the "normal" postgis indexing code & only 
change a few lines. ie. look for where the indexing code extracts a box3d 
(or box2d) from the GEOMETRY object and change that one line.

2. it hasnt been tested well

3. its incredibly simple - just a simple header and the data

4. consider saving a compressed version (I think you can get postgresql to 
do this for you in the create type command). Accessing large objects in 
expensive, so the decompressing overhead is probably small compared to the 
cost of pulling extra pages off the disk.

5. Also, consider having the header information & the actual data in 
different columns. Yes, I know this is the opposite of what I said in #1. 
Whenever you run a command on a TOASTed column, postgresql will de-serialize 
the ENTIRE object which is very disk intensive if all you want to know is 
what the image size is or what the SRID is.


The entire CHIP code (lwgeom_chip.c in 1.0.x) is only a few hundred lines of 
code.

dave

On 8/31/05, Benjamin Simon <noumayoss@gmail.com> wrote:
> 
> Roger,
> 
> If you mean "Why use a database engine to store rasters?" then the answer 
> is :
> 
> - Use spatial queries among tables of rasters images (i.e extracting
> the right image when given an address or any geocoded object)
> - Benefit from the database storage assets ( -> security, fast access
> with spatial indexes, backup, ...)
> - Merge your spatial raster data with any other data you may have in
> your database
> 
> I think one can find many good reasons for using databases, it is just
> a very powerfull tool for managing your data, whatever its type or
> whatever the volume you have. You just need to have the good
> structures inside your RDBMS to manipulate it. And that's what the
> CHIP structure aims at.
> 
> On the other hand, if you just mean "Why use the Postgis CHIP C
> structure instead of redesigning a more approriate new one ?" , then
> the answer is :
> 
> - The Postgis CHIP type is quite well optimized, there could just be
> minor improvments to it
> and that's what i'm working on at the moment. If Postgis development
> team doesn't want to modify the structure, then we might consider to
> design a new type in PostgreSQL to store raster data or just cope with
> it.
> 
> I hope you've found your answer in these words.
> 
> Regards,
> Benjamin.
> 
> 
> 2005/8/31, Roger <roger@sylvanascent.com>:
> > Ben,
> > What are the advantages of using this chip scheme?
> >
> > Roger
> >
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Benjamin Simon
> > Sent: Tuesday, August 30, 2005 5:58 AM
> > To: gdal-dev@lists.maptools.org
> > Subject: [Gdal-dev] GDAL Postgis Raster Driver
> >
> >
> > Hi all,
> >
> > I've been playing a bit with GDAL driver implementation and as I am 
> quite
> > interested in database development, I 've decided to write a Postgis 
> wrapper
> > for GDAL. I've used the Postgis CHIP datatype to store rasters in
> > PostgreSQL.
> >
> > Basically, the driver can read files with a pixel definition of 8 or 16
> > bits. It can deal with 1 or 4 bands (GREY_SCALE, PALETTE and RGBA). I've
> > only tested to import PNG, BMP, JPEG and TIF files and I think the 
> driver is
> > not stable yet with any other formats. The driver is supposed to be 
> capable
> > of dealing with projections if Postgis was built with the proj4 library.
> >
> > I do think it could be good to move some of the functions from the GDAL
> > Driver source code to Postgis source. However, this would require I 
> contact
> > Postgis development team and I prefer to finalize the driver before, as 
> it
> > is really easier to test and develop.
> >
> > I have contacted Frank so that this new experimental driver can soon be 
> part
> > of the global GDAL source tree.
> >
> > If you can't wait unil then or if you're interested in testing, you can
> > download the source code from this address:
> > http://simon.benjamin.free.fr/pgchip/ and follow the installation
> > instructions.
> >
> > Any suggestions, comments, questions or help are welcome.
> >
> > Regards,
> > Benjamin.
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050831/bd5b05cf/attachment.html
From wsacul at gmail.com  Wed Aug 31 14:30:45 2005
From: wsacul at gmail.com (wsacul)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
Message-ID: <17f672c60508311130a367202@mail.gmail.com>

I'd like to take elevation data from the onearth server and convert it
to a geotiff.

Here's a server request:

http://onearth.jpl.nasa.gov/browse.cgi?wms_server=wms.cgi&layers=worldwind_dem&srs=EPSG:4326&width=1000&height=1000&bbox=-120,30,-90,60&format=image/png&styles=feet_short_int&zoom=

I save the image and attempt to process it with gdal_translate:

gdal_translate -of GTIFF -a_ullr -120 15 -90 45 test.png test.tif

(at this point, gdal 1.3.0 on gentoo complains "option -a_ullr
incomplete, or not recognized", but the same thing in cygwin with
1.3.0.0b1 processes the image fine)

gdal_translate has worked fine for me with making image geotiffs, but
now that I want to make an elevation geotiff what do I need to do?  Is
there a different tool I should be using?

Thanks,

lucasw


From tylermitchell at shaw.ca  Wed Aug 31 14:39:27 2005
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
Message-ID: <525a206525b7cf.525b7cf525a206@shaw.ca>


> I save the image and attempt to process it with gdal_translate:
> 
> gdal_translate -of GTIFF -a_ullr -120 15 -90 45 test.png test.tif
> 
> (at this point, gdal 1.3.0 on gentoo complains "option -a_ullr
> incomplete, or not recognized", but the same thing in cygwin with
> 1.3.0.0b1 processes the image fine)

It looks to me like a_ullr expects "Upper Left" coordinate first and you have the south-west point first.  Perhaps you meant: -120 45 -90 15 instead?

I haven't used this option before, but I have used the -GCP options which work well for georeferencing the image.

Hope that helps.
Tyler



From noumayoss at gmail.com  Wed Aug 31 15:18:02 2005
From: noumayoss at gmail.com (Benjamin Simon)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL Postgis Raster Driver
In-Reply-To: <89f845e805083111124a7adf41@mail.gmail.com>
References: <ccbc9fcf05083004583e356cbf@mail.gmail.com>
	<002501c5ae41$c449df10$705b88cc@BlackFin>
	<ccbc9fcf050831094864fd7e00@mail.gmail.com>
	<89f845e805083111124a7adf41@mail.gmail.com>
Message-ID: <ccbc9fcf0508311218ebed84@mail.gmail.com>

Dave,

I'm definetely not an expert regarding raster formats (I'm just a bit
familiar with png). Any advices concerning the way of optimizing data
storage is thus most welcome. Thank you for all your notes. What I
understood is that you suggest modifying the CHIP structure prior to
doing any extra work on the gdal pgchip driver. If so, I do agree.

Here are some few tips I've used in the current experimental pgchip driver :

- I've used the"future" field to store some meta-information :

future[0] = nBands; 
future[1] = nBitDepth; (8 or 16)
future[2] = nColorType; (RGBA,GREY_SCALE,PALETTE)

- I've used the "compression"  variable to store the number of colors
in case of Palette ColorType. When Palette is used, I place the
palette information between header and data. The CHIP structure then
<header><palette><data>

These modifications you would agree are not acceptable. As you wrote
the original CHIP structure, you might be part of Postgis dev team
(?). Do you know if they plan to improve it ? Are they waiting for
someone to do it ? Shall I ask them directly ;-) ?

Thanks again for all your advices. 

Regards,
Benjamin.







2005/8/31, David Blasby <dblasby@gmail.com>:
> I wrote the original CHIP code.  It was designed to be ultra-simple, and I'm
> assuming that no one's changed it in a while (looking at the code base
> indicates this is true).  Here's a few notes on it:
>  
>  1. Right now you cannot directly index a CHIP.  It has a bounding box and
> an SRID, so you should be able to use the "normal" postgis indexing code &
> only change a few lines.  ie. look for where the indexing code extracts a
> box3d (or box2d) from the GEOMETRY object and change that one line.
>  
>  2. it hasnt been tested well
>  
>  3. its incredibly simple - just a simple header and the data
>  
>  4. consider saving a compressed version (I think you can get postgresql to
> do this for you in the create type command).  Accessing large objects in
> expensive, so the decompressing overhead is probably small compared to the
> cost of pulling extra pages off the disk.
>  
>  5. Also, consider having the header information & the actual data in
> different columns.  Yes, I know this is the opposite of what I said in #1.
> Whenever you run a command on a TOASTed column, postgresql will de-serialize
> the ENTIRE object which is very disk intensive if all you want to know is
> what the image size is or what the SRID is.
>  
>  
>  The entire CHIP code (lwgeom_chip.c in 1.0.x) is only a few hundred lines
> of code.
>  
>  dave
> 
> 
> On 8/31/05, Benjamin Simon <noumayoss@gmail.com> wrote:
> > 
> > Roger,
> > 
> > If you mean "Why use a database engine to store rasters?" then the answer
> is :
> > 
> > - Use spatial queries among tables of rasters images (i.e extracting
> > the right image when given an address or any geocoded object) 
> > - Benefit from the database storage assets  ( -> security, fast access
> > with spatial indexes, backup, ...)
> > - Merge your spatial raster data with any other data you may have in
> > your database
> > 
> > I think one can find many good reasons for using databases, it is just 
> > a very powerfull tool for managing your data, whatever its type or
> > whatever the volume you have. You just need to have the good
> > structures inside your RDBMS to manipulate it. And that's what the
> > CHIP structure aims at. 
> > 
> > On the other hand, if you just mean "Why use the Postgis CHIP C
> > structure instead of redesigning a more approriate new one ?" , then
> > the answer is :
> > 
> > - The Postgis CHIP type is quite well optimized, there could just be 
> > minor improvments to it
> > and that's what i'm working on at the moment. If Postgis development
> > team doesn't want to modify the structure, then we might consider to
> > design a new type in PostgreSQL to store raster data or just cope with 
> > it.
> > 
> > I hope you've found your answer in these words.
> > 
> > Regards,
> > Benjamin.
> > 
> > 
> > 2005/8/31, Roger <roger@sylvanascent.com>:
> > > Ben,
> > > What are the advantages of using this chip scheme? 
> > >
> > > Roger
> > >
> > > -----Original Message-----
> > > From: gdal-dev-bounces@lists.maptools.org
> > > [mailto: gdal-dev-bounces@lists.maptools.org] On Behalf
> Of Benjamin Simon
> > > Sent: Tuesday, August 30, 2005 5:58 AM
> > > To: gdal-dev@lists.maptools.org
> > > Subject: [Gdal-dev] GDAL Postgis Raster Driver 
> > >
> > >
> > > Hi all,
> > >
> > > I've been playing a bit with GDAL driver implementation and as I am
> quite
> > > interested in database development, I 've decided to write a Postgis
> wrapper
> > > for GDAL. I've used the Postgis CHIP datatype to store rasters in 
> > > PostgreSQL.
> > >
> > > Basically, the driver can read files with a pixel definition of 8 or 16
> > > bits. It can deal with 1 or 4 bands (GREY_SCALE, PALETTE and RGBA). I've
> > > only tested to import PNG, BMP, JPEG and TIF files and I think the
> driver is 
> > > not stable yet with any other formats. The driver is supposed to be
> capable
> > > of dealing with projections if Postgis was built with the proj4 library.
> > >
> > > I do think it could be good to move some of the functions from the GDAL 
> > > Driver source code to Postgis source. However, this would require I
> contact
> > > Postgis development team and I prefer to finalize the driver before, as
> it
> > > is really easier to test and develop.
> > > 
> > > I have contacted Frank so that this new experimental driver can soon be
> part
> > > of the global GDAL source tree.
> > >
> > > If you can't wait unil then or if you're interested in testing, you can
> > > download the source code from this address: 
> > > http://simon.benjamin.free.fr/pgchip/ and follow the
> installation
> > > instructions.
> > >
> > > Any suggestions, comments, questions or help are welcome. 
> > >
> > > Regards,
> > > Benjamin.
> > >
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org 
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > >
> > >
> > 
> > _______________________________________________
> > Gdal-dev mailing list 
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
>  
>


From stsyo3lwdia4 at vexcel.com  Wed Aug 31 15:55:40 2005
From: stsyo3lwdia4 at vexcel.com (Steve Soule)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Re: GDAL raster block caching issues
In-Reply-To: <931f8ea9050826134461ede555@mail.gmail.com>
References: <430F74CB.3060002@vexcel.com>
	<931f8ea9050826134461ede555@mail.gmail.com>
Message-ID: <43160B3C.9030108@vexcel.com>

Frank Warmerdam wrote:
> On 8/26/05, Steve Soule <Steve.Soule@vexcel.com> wrote:
> 
>>Issue 1:  Global vs. dataset LRUL
>>
>>Currently, the LRUL is global, that is, it contains blocks from all
>>open datasets.  I think it would be better if each dataset had its
>>own LRUL (or possibly each raster band).  This would have the following
>>advantages:

(What followed was a long discussion of global vs. dataset LRUL, in 
which I gave five arguments why dataset was better, and Frank refuted them.)

Frank, you've convinced me that dataset-level LRUL would not give any 
significant performance benefit, and my arguments two through five 
aren't good arguments.  But argument one (thread-safety) still stands.

> Back to your overall point, I am interested in offering per-dataset
> caching rather than global caching as an option (presumably
> non-default).  Would you be interested in trying to implement this?
> 
> My hope is that this could be mostlydone in gdalrasterblock.cpp, likely
> with a block list stored on the GDALDataset.  Actually this may be
> a bit messy, since there are such things as free standing 
> GDALRasterBand objects not associated with any GDALDataset.  I'm 
> not sure how you would want to address that issue.  
> 
> Ideally the policy could be set at runtime (checked via CPLGetConfigOption()).
> If you are interested in doing that, then go ahead, but please let me know
> when you commit the changes. 

Implementing a dual LRUL mechanism where you could select global or 
dataset LRUL at run-time would not address the thread-safety issue. 
Since that's the one argument for dataset-level LRUL that I still 
believe in, I'm not interested in implementing the 
switch-between-global-and-dataset-LRUL approach.

However, I have a new idea along these lines that could fix the biggest 
thread-unsafety problem with the current caching mechanism:  the dirty 
blocks.  My idea is to make a raster-band-level LRUL just for dirty 
blocks; dirty blocks would not be listed in the global LRUL.  When a 
dirty block was written out, it would be moved from the band-level LRUL 
to the global LRUL.  The default size limit on each band's LRUL would be 
just big enough for one row's worth of blocks.  For datasets that are 
organized into rows, this band-level LRUL would be limited to just one 
block by default.

The global cache use variable "nCacheUsed" would keep track of the sum 
of the sizes of blocks in both the global and band LRULs.  So this 
mechanism would still have the same memory-use characteristics; dirty 
blocks would just have a smaller limit.  Applications that need to work 
on gigantic datasets where a single row doesn't fit into memory can just 
set the dirty block cache limit to zero blocks, effectively turning off 
write caching.

If you like this idea, I can go ahead and implement it.


From ari.jolma at tkk.fi  Wed Aug 31 18:13:56 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] swig/perl
In-Reply-To: <s31431bd.099@co5.dnr.state.mn.us>
References: <s31431bd.099@co5.dnr.state.mn.us>
Message-ID: <43162BA4.4000802@tkk.fi>

Ken Boss wrote:

>Hello Ari--
>
>I think Howard Butler and Kevin Ruland have already laid much of the groundwork that you'll require with their "next generation" (ng) GDAL bindings project.  See Howard's recent post at http://lists.maptools.org/pipermail/gdal-dev/2005-August/006120.html.
>
>Further, Schuyler Erle did some preliminary work on perl bindings for GDAL a while back (http://search.cpan.org/~sderle/Geo-GDAL/).  I think in particular you might find his typemap work (http://search.cpan.org/src/SDERLE/Geo-GDAL-0.11/typemap) to be of use.
>  
>

Thanks. Well, after a few hours of learning swig, perlguts, etc, I could 
finally get my first "hello world, this is your spatial data:..." 
running. My typemaps_perl.i (which is basically where the porting 
happens) is based on the python one but the internals had to be changed 
of course. "make generate" gives two warnings because it can't apply 
IF_FALSE_RETURN_NONE and "tostring argin" because I just removed those 
typemaps for now. I have a small Makefile.PL (perl standard) which makes 
a Makefile ok but "make -f Makefile" fails saying there are two 
_wrap_GetDriverCount's, the other is of course from OGR. If I fix that 
by hand (edit ogr_wrap.cpp by hand) it compiles. I don't know how to 
control the naming of the _wrap function, %rename does not seem to do 
that. I then have a small test.pl which does gdal::AllRegister, opens a 
GTiff and prints out some info from it, works ok but method names are a 
bit odd: e.g. "$dataset->swig_RasterXSize_get" works but not 
"$dataset->RasterXSize".

Ari


From kruland at ku.edu  Wed Aug 31 21:45:21 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] swig/perl
In-Reply-To: <43162BA4.4000802@tkk.fi>
References: <s31431bd.099@co5.dnr.state.mn.us> <43162BA4.4000802@tkk.fi>
Message-ID: <43165D31.2020900@ku.edu>

Congratulations Ari!

Perl should be able to do the tostring argin pretty easily since it
takes any object and "string-ifies" it.

IF_FALSE_RETURN_NONE should also be pretty easy since Perl has a very
nice sense of none.

Send me the code and we'll put it in CVS.

Kevin

Ari Jolma wrote:

> Ken Boss wrote:
>
>> Hello Ari--
>>
>> I think Howard Butler and Kevin Ruland have already laid much of the
>> groundwork that you'll require with their "next generation" (ng) GDAL
>> bindings project.  See Howard's recent post at
>> http://lists.maptools.org/pipermail/gdal-dev/2005-August/006120.html.
>>
>> Further, Schuyler Erle did some preliminary work on perl bindings for
>> GDAL a while back (http://search.cpan.org/~sderle/Geo-GDAL/).  I
>> think in particular you might find his typemap work
>> (http://search.cpan.org/src/SDERLE/Geo-GDAL-0.11/typemap) to be of use.
>>  
>>
>
> Thanks. Well, after a few hours of learning swig, perlguts, etc, I
> could finally get my first "hello world, this is your spatial
> data:..." running. My typemaps_perl.i (which is basically where the
> porting happens) is based on the python one but the internals had to
> be changed of course. "make generate" gives two warnings because it
> can't apply IF_FALSE_RETURN_NONE and "tostring argin" because I just
> removed those typemaps for now. I have a small Makefile.PL (perl
> standard) which makes a Makefile ok but "make -f Makefile" fails
> saying there are two _wrap_GetDriverCount's, the other is of course
> from OGR. If I fix that by hand (edit ogr_wrap.cpp by hand) it
> compiles. I don't know how to control the naming of the _wrap
> function, %rename does not seem to do that. I then have a small
> test.pl which does gdal::AllRegister, opens a GTiff and prints out
> some info from it, works ok but method names are a bit odd: e.g.
> "$dataset->swig_RasterXSize_get" works but not "$dataset->RasterXSize".
>
> Ari
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From hamish_nospam at yahoo.com  Wed Aug 31 22:10:37 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
In-Reply-To: <17f672c60508311130a367202@mail.gmail.com>
References: <17f672c60508311130a367202@mail.gmail.com>
Message-ID: <20050901141037.6d3ad686.hamish_nospam@yahoo.com>

> I'd like to take elevation data from the onearth server and convert it
> to a geotiff.

If you are primarily interested in elevation, may I suggest trying the
ETOPO5 or ETOPO2 datasets?

see  http://grass.itc.it/newsletter/GRASSNews_vol1.pdf


Hamish

From monogis at tao.es  Fri Aug 12 04:43:28 2005
From: monogis at tao.es (TAO ES PF Monogis)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] RE: gdal, swig-ng, csharp & mono
Message-ID: <F351B61A81F4F54F92740EA8B510C2B10223F59E@ESGDASMA5VX0014.ib.gedas.vwg>

 
Hi Vincent,

we did some work with the ogr c api, using the csharp bindings generated by
the swig 1.3.24 version. I have no clou whether or not this version already
uses the ng binding you mention, but we managed to get it work within our
current monogis beta. 
I also made some basic testing with the gdal c api, and had no trouble with
swig. But gdal is not yet used within monogis.
Hope this helps, if you want some further information please don?t hesitate
in contact us.

 
Michael Paul

http://www.monogis.org

 



From rich at greenwoodmap.com  Sun Aug 14 10:36:24 2005
From: rich at greenwoodmap.com (Richard Greenwood)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] mmintrin.h for VC
Message-ID: <42FF56E5.6040402@greenwoodmap.com>

In trying to build Gdal with ECW support under VC 6.0. It fails at 
ecwdataset.cpp with mmintrin.h and xmmintrin.h not found.

It looks like those header files contain only type definitions and 
macros, so I tried copying them from mingw, but then I get the error:
    "MMX instruction set not enabled"

I am using ECW SDK 3.1RC2, might that be my problem?

Rich
-- 
Richard Greenwood
www.greenwoodmap.com

From matt at spotwerks.com  Wed Aug 17 03:34:21 2005
From: matt at spotwerks.com (Matthew Scott)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] RE: Re: WinCE port
Message-ID: <200508170734.j7H7YJpU032453@duke.maptools.org>

I found a post of yours on Gdal-dev mentioning that your team at cadcorp had
ported libtiff to WinCE. 

 

Is there any chance you can you send me the changes you made to get it to
compile on WinCE?

 

Much appreciated,

Matthew Scott

matt@spotwerks.com

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050817/e9ef55c9/attachment.html
From A.Woolf at rl.ac.uk  Thu Aug 18 11:02:36 2005
From: A.Woolf at rl.ac.uk (Woolf, A (Andrew))
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
Message-ID: <F93ED76B6830FB4CB81262937940F72605BBD9@exchange11.fed.cclrc.ac.uk>

This is great news, a good step along the road we're all headed. Norman
mentioned what is also the end game for us - the WCS *spec* supports
arbitrary 1-,2-,3- or 4-d slices in a fully 4-d dataset, eg:
 
*3-d volume (lat-lon-height): http://glue.badc.rl.ac.uk/cgi-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=-180,-90,179,90,0,1000&CRS=some3dCRS
&FORMAT=netCDF>
bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=-180,-90,179,90,0,1000&CRS=some3dCRS
&FORMAT=netCDF> erage=temperature&BBOX=-180,-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=-180,-90,179,90,0,1000&CRS=some3dCRS
&FORMAT=netCDF> 90,179,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=-180,-90,179,90,0,1000&CRS=some3dCRS
&FORMAT=netCDF>  
*Hovmuller (lat vs time): http://glue.badc.rl.ac.uk/cgi-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,500,500&TIME=1996/2005/
1&CRS=some3dCRS&FORMAT=netCDF>
bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,500,500&TIME=1996/2005/
1&CRS=some3dCRS&FORMAT=netCDF> erage=temperature&BBOX=10,-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,500,500&TIME=1996/2005/
1&CRS=some3dCRS&FORMAT=netCDF>
90,10,90,500,500&TIME=1996/2005/1&CRS=some3dCRS&FORMAT=CF-netCDF
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,500,500&TIME=1996/2005/
1&CRS=some3dCRS&FORMAT=netCDF>  
*Vertical slice through atmosphere (lat vs height):
http://glue.badc.rl.ac.uk/cgi-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,0,1000&CRS=some3dCRS&FO
RMAT=netCDF>
bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,0,1000&CRS=some3dCRS&FO
RMAT=netCDF> erage=temperature&BBOX=10,-
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,0,1000&CRS=some3dCRS&FO
RMAT=netCDF> 90,10,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF
<http://glue.badc.rl.ac.uk/cgi-bin/mapserv?REQUEST=GetCoverage&SERVICE=W
CS&Version=1.0.0&Coverage=temp&BBOX=10,-90,10,90,0,1000&CRS=some3dCRS&FO
RMAT=netCDF>  
 
These are all *valid WCS requests*!!! My understanding, however, is that
fundamental 2-D limitations in GDAL will make this extremely difficult
to achieve in Mapserver - any views to the contrary?
 

	-----Original Message-----
	From: owner-galeon@unidata.ucar.edu
[mailto:owner-galeon@unidata.ucar.edu] On Behalf Of Denis Nadeau
	Sent: 17 August 2005 23:26
	To: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
	Subject: GDAL netcdf convention CF support
	
	
	GDAL now supports netcdf format using CF convention as specified
by unidata.
	
	
http://my.unidata.ucar.edu/content/software/netcdf/conventions.hdf
	
	The software looks if the variables lat/latitude and
lon/longitude are presents in the netcdf file.  If found, these
variables are used to specify the georeferencing transformation.
	
	I'd like the community to try it out and if there are some
problems, let me know. GDAL netcdf format also works on Windows with he
precompile library version 3.6.1-beta1 (January 2005).
	
	Regards,
	Denis Nadeau
	
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050818/3148d86e/attachment.html
From gerry.creager at tamu.edu  Sun Aug 21 11:13:05 2005
From: gerry.creager at tamu.edu (Gerry Creager N5JXS)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Re: GDAL netcdf convention CF support
In-Reply-To: <931f8ea9050818082170f0e0de@mail.gmail.com>
References: <F93ED76B6830FB4CB81262937940F72605BBD9@exchange11.fed.cclrc.ac.uk>
	<931f8ea9050818082170f0e0de@mail.gmail.com>
Message-ID: <430899FA.6@tamu.edu>

Frank, et al,

I think we need to be thinking either about making GDAL more interested 
in 3D/4D datasets, as that's coming whether we're ready or not... in 
fact, for me, it's already here.. and then see if we need to consider 
forking or augmenting Mapserver to accommodate it.

I see a lot of conceptual problems for Mapserver, and, for that matter, 
a LOT of GIS packages in incorporating 3D/4D data, and presenting it 
properly.  This has been an issue for GIS practitioners since just about 
  forever: They think in 2 dimensions and can't, as a group, appreciate 
the need for either vertical, or time.  They represent time series data 
as a series of static images.

I see, in Mapserver, a potential interface.  It's open-source and thus 
maleable for applications like this.  It won't be simple or 
straightforward, and in the end, Mapserver might serve solely as an 
example framework for a new 3D/4D display/dissemination tool, but it 
*is* a starting point.

I'm kinda thinking about a melding of Mapserver and IDV, in th elong run.

gerry

Frank Warmerdam wrote:
> On 8/18/05, Woolf, A (Andrew) <A.Woolf@rl.ac.uk> wrote:>  > This is great news, a good step along the road we're all headed. Norman> mentioned what is also the end game for us - the WCS *spec* supports> arbitrary 1-,2-,3- or 4-d slices in a fully 4-d dataset, eg: >   > ?3-d volume (lat-lon-height): > > http://glue.badc.rl.ac.uk/cgi-> > bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov> > erage=temperature&BBOX=-180,-> > 90,179,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF > ?Hovmuller (lat vs time): > > http://glue.badc.rl.ac.uk/cgi-> > bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov> > erage=temperature&BBOX=10,-> > 90,10,90,500,500&TIME=1996/2005/1&CRS=some3dCRS&FORMAT=CF-netCDF> ?Vertical slice through atmosphere (lat vs height): > > http://glue.badc.rl.ac.uk/cgi-> > bin/mapserv?REQUEST=GetCoverage&SERVICE=WCS&Version=1.0.0&Cov> > erage=temperature&BBOX=10,-> > 90,10,90,0,1000&CRS=some3dCRS&FORMAT=CF-netCDF >   > These are all *valid WCS requests*!!!
 !
>  My understanding, however, is that> fundamental 2-D limitations in GDAL will make this extremely difficult to> achieve in Mapserver - any views to the contrary? 
> Andrew,
> Indeed, as things stand in GDAL and MapServer it would be hardto achieve support for 3D and 4D datasets smoothly.   It might bepossible to "hack something up", but I'm not sure how desirablethat would be.  At best, it would be fragile and/or dependent onalot of extra configuration information in MapServer which wouldinternally still need to treat results as stacks of 2D bands. 
> Best regards,-- ---------------------------------------+--------------------------------------I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.comlight and sound - activate the windows | http://pobox.com/~warmerdamand watch the world go round - Rush    | Geospatial Programmer for Rent
> 

-- 
Gerry Creager -- gerry.creager@tamu.edu
Texas Mesonet -- AATLT, Texas A&M University	
Cell: 979.229.5301 Office: 979.458.4020 FAX: 979.847.8578
Page: 979.228.0173
Office: 903A Eller Bldg, TAMU, College Station, TX 77843

From rlake at galdosinc.com  Mon Aug 22 14:10:41 2005
From: rlake at galdosinc.com (Ron Lake)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
Message-ID: <4E1D53230994FD45A119B5090DFBF46023044E@andalusia.Galdos.local>

Hi,

This would seem a natural extension to the OGC WFS specification.  Note
that GML incorporates (under features):
Coverages and support for time (as well as temporal reference systems)
and dynamic features.  Extending MapServer to being a WFS that supports
these features would be a good place to start.  You can likely go some
distance with the existing WFS spec.  What is needed of course is
support for 1) temporal data types (MapServer extension) 2) temporal
operators (WFS extension) .. 

Cheers

Ron

-----Original Message-----
From: owner-galeon@unidata.ucar.edu
[mailto:owner-galeon@unidata.ucar.edu] On Behalf Of Frank Warmerdam
Sent: August 21, 2005 1:41 PM
To: Gerry Creager N5JXS
Cc: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
Subject: Re: GDAL netcdf convention CF support


On 8/21/05, Gerry Creager N5JXS <gerry.creager@tamu.edu> wrote:
> Frank, et al,
> 
> I think we need to be thinking either about making GDAL more 
> interested in 3D/4D datasets, as that's coming whether we're ready or 
> not... in fact, for me, it's already here.. and then see if we need to

> consider forking or augmenting Mapserver to accommodate it.
> 
> I see a lot of conceptual problems for Mapserver, and, for that 
> matter, a LOT of GIS packages in incorporating 3D/4D data, and 
> presenting it properly.  This has been an issue for GIS practitioners
since just about
>   forever: They think in 2 dimensions and can't, as a group, 
> appreciate the need for either vertical, or time.  They represent time

> series data as a series of static images.
> 
> I see, in Mapserver, a potential interface.  It's open-source and thus

> maleable for applications like this.  It won't be simple or 
> straightforward, and in the end, Mapserver might serve solely as an 
> example framework for a new 3D/4D display/dissemination tool, but it
> *is* a starting point.
> 
> I'm kinda thinking about a melding of Mapserver and IDV, in th elong 
> run.

Gerry,

The idea of extending mapserver and GDAL to better support 3D/4D
datasets has been brought up a few time, and I have generally been quite
... conservative ... in response.  I am concerned about substantial
complication and turmoil in the interfaces of both.

My personal opinion is that in the shorter term it would make more sense
to have a distinct multi-dimensional WCS server implemented that might
derive some code from MapServer, but that would otherwise be quite
distinct.  It would ignore all the vector and "portral" related support
in MapServer in favor of focusing on serving n-dimensional raster data 
via WCS.  

There could be an n-dimensional equivelent to GDAL as well, that might
even include a GDAL plugin for 2D datasets, but that would have it's own
interfaces that are more organized to n-dimensional data.  Perhaps it
could even be closely related to one of the existing n-dimensional file
format libraries like netcdf or HDF (my understanding is that the next
general netcdf is based on HDF5). 

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Simon.Cox at csiro.au  Mon Aug 22 23:07:04 2005
From: Simon.Cox at csiro.au (Simon.Cox@csiro.au)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] RE: GDAL netcdf convention CF support
Message-ID: <2A2B2F12CF99EA4A898E2D4729441B41014E6885@exwa2-per.wa.csiro.au>

Note that the addition of temporal operators to the Filter-encoding
specification has been proposed within OWS3. 
A provisional schema is in use in the testbed and is available from the
initiative SubVersion code repository (currently only available to
project participants and observers). 

Simon

> -----Original Message-----
> From: owner-galeon@unidata.ucar.edu 
> [mailto:owner-galeon@unidata.ucar.edu] On Behalf Of Ron Lake
> Sent: Monday, 22 August 2005 2:14 PM
> To: warmerdam@pobox.com; Gerry Creager N5JXS
> Cc: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
> Subject: RE: GDAL netcdf convention CF support
> 
> Hi,
> 
> This would seem a natural extension to the OGC WFS 
> specification.  Note that GML incorporates (under features):
> Coverages and support for time (as well as temporal reference 
> systems) and dynamic features.  Extending MapServer to being 
> a WFS that supports these features would be a good place to 
> start.  You can likely go some distance with the existing WFS 
> spec.  What is needed of course is support for 1) temporal 
> data types (MapServer extension) 2) temporal operators (WFS 
> extension) .. 
> 
> Cheers
> 
> Ron
> 
> -----Original Message-----
> From: owner-galeon@unidata.ucar.edu
> [mailto:owner-galeon@unidata.ucar.edu] On Behalf Of Frank Warmerdam
> Sent: August 21, 2005 1:41 PM
> To: Gerry Creager N5JXS
> Cc: gdal-dev@lists.maptools.org; galeon@unidata.ucar.edu
> Subject: Re: GDAL netcdf convention CF support
> 
> 
> On 8/21/05, Gerry Creager N5JXS <gerry.creager@tamu.edu> wrote:
> > Frank, et al,
> > 
> > I think we need to be thinking either about making GDAL more 
> > interested in 3D/4D datasets, as that's coming whether 
> we're ready or 
> > not... in fact, for me, it's already here.. and then see if 
> we need to
> 
> > consider forking or augmenting Mapserver to accommodate it.
> > 
> > I see a lot of conceptual problems for Mapserver, and, for that 
> > matter, a LOT of GIS packages in incorporating 3D/4D data, and 
> > presenting it properly.  This has been an issue for GIS 
> practitioners
> since just about
> >   forever: They think in 2 dimensions and can't, as a group, 
> > appreciate the need for either vertical, or time.  They 
> represent time
> 
> > series data as a series of static images.
> > 
> > I see, in Mapserver, a potential interface.  It's 
> open-source and thus
> 
> > maleable for applications like this.  It won't be simple or 
> > straightforward, and in the end, Mapserver might serve solely as an 
> > example framework for a new 3D/4D display/dissemination tool, but it
> > *is* a starting point.
> > 
> > I'm kinda thinking about a melding of Mapserver and IDV, in 
> th elong 
> > run.
> 
> Gerry,
> 
> The idea of extending mapserver and GDAL to better support 
> 3D/4D datasets has been brought up a few time, and I have 
> generally been quite ... conservative ... in response.  I am 
> concerned about substantial complication and turmoil in the 
> interfaces of both.
> 
> My personal opinion is that in the shorter term it would make 
> more sense to have a distinct multi-dimensional WCS server 
> implemented that might derive some code from MapServer, but 
> that would otherwise be quite distinct.  It would ignore all 
> the vector and "portral" related support in MapServer in 
> favor of focusing on serving n-dimensional raster data via WCS.  
> 
> There could be an n-dimensional equivelent to GDAL as well, 
> that might even include a GDAL plugin for 2D datasets, but 
> that would have it's own interfaces that are more organized 
> to n-dimensional data.  Perhaps it could even be closely 
> related to one of the existing n-dimensional file format 
> libraries like netcdf or HDF (my understanding is that the 
> next general netcdf is based on HDF5). 
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> 


From remedius at mail.ru  Fri Aug 26 11:37:40 2005
From: remedius at mail.ru (remedius)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] TIFF with JPEG compression on Win32
Message-ID: <430F3744.000003.03872@BMSTU-HOME>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2421 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050826/12dabcc3/attachment.jpe
From mikael at swegis.se  Mon Aug 29 06:06:37 2005
From: mikael at swegis.se (Mikael Elmquist)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Problem with OGRCreateCoordinateTransformation
Message-ID: <auto-000020838262@intermail.se.dataphone.net>

Hi,

 

I'm trying to use OGRCreateCoordinateTransformation to transform a
coordinate, e.g.

 

OGRCoordinateTransformation *poCT;

poCT = OGRCreateCoordinateTransformation( &oInputSRS, &oOutputSRS );

 

OGRCreateCoordinateTransformation does however always return NULL. I have
tried with many OGRSpatialReference as input, created from WKT, EPSG and
well known names, but nothing helps. Is there anything else I'm missing?

 

Regards,

Mikael

 

P.S. I'm using GDAL 1.2.0

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050829/c2da4997/attachment.html
From mn at blominfo.dk  Tue Aug 30 05:56:07 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Weird colors in gdal_translate
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664DFFD@kernen.blomkbh.dk>

I'm trying to extract tiles from a large image, but all I get is a
weird-looking image consisting of primary colors (ie. rgb values are
either 0 or 255). There is an example here:
http://blominfo.dk/3d/gdalerror.png

Here is the gdalinfo on the input image:
----------------------------------
   Driver: ECW/ERMapper Compressed Wavelets
   Size is 206250, 75000
   Coordinate System is:
   LOCAL_CS["LOCAL",
       UNIT["Meter",1]]
   Origin = (-280500.000000,194000.000000)
   Pixel Size = (0.08000000,-0.08000000)
   Corner Coordinates:
   Upper Left  ( -280500.000,  194000.000)
   Lower Left  ( -280500.000,  188000.000)
   Upper Right ( -264000.000,  194000.000)
   Lower Right ( -264000.000,  188000.000)
   Center      ( -272250.000,  191000.000)
   Band 1 Block=206250x1 Type=Byte, ColorInterp=Red
     Overviews: arbitrary
   Band 2 Block=206250x1 Type=Byte, ColorInterp=Green
     Overviews: arbitrary
   Band 3 Block=206250x1 Type=Byte, ColorInterp=Blue
     Overviews: arbitrary
----------------------------------
Here's the command that produces the image:
gdal_translate -projwin -266437.5 193600 -265412.5 192575 input.ecw
output.tif

The input image is an orthophoto mosaic and the top of the extracted
image only contain black pixels (I guess this is kinda like a nodata
area).
In the extracted image, the black area in the lower right corner is
where the actual data was, and the "psychedelic" colored and white area
is where there was actually no-data.
The funny thing is that when I extract from an the area just below it,
it all works fine.

I've seen similar problems before when I was merging and ECW-compressing
large images, but never found a solution either.

Any kind of solution or workaround is highly appreciated.

I'm using "FW Tools 0.9.9".


Best regards
/Morten 



