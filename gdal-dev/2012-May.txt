From kassies at gmail.com  Tue May  1 07:18:16 2012
From: kassies at gmail.com (Rutger)
Date: Tue May  1 07:18:49 2012
Subject: [gdal-dev] Reading a HDF5 file with python (not recognised as a
 supported file format)
Message-ID: <1335871096418-4943361.post@n6.nabble.com>

Dear list, 

Im trying to read an Aster HDF file in Python 2.7.2 on Windows 32bit. Im
using the latest Windows builds (gdal core+python bindings) from Tamas
Szekeres which dont come with the HDF4 driver. Therefore i converted it with
h4toh5convert (from the HDF Group) to a h5 file. 

When i use the default command line utilities all works well. Gdalinfo
nicely lists all metadata and subdatasets as expected and i can easily
convert them to for example geotiff with gdal_translate. So far so good....

However, when i try to load the h5 file in my python setup it fails to load.
The command:
gdal.open('filename.h5')

returns: ERROR 4: `filename.h5' not recognised as a supported file format.

directly accessing a subdataset like: 
gdal.open('HDF5:"filename.h5"://VNIR/VNIR_Swath/Data_Fields/ImageData1')

returns: ERROR 4:
`HDF5:filename.h5://VNIR/VNIR_Swath/Data_Fields/ImageData1' does not exist
in the file system and is not recognised as a supported dataset name.

I cant figure out why it works in the gdal command line utilities but not
with python. Working around it by first using gdal_translate to create a
geotiff and then opening the tiff with gdal.open() works fine, but i would
rather avoid yet another conversion.

Does anyone have any tips on how to debug this problem? Do i need to
(manually) point GDAL/Python to the HDF5 driver? Any help is appreciated.

Regards,
Rutger

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-HDF5-file-with-python-not-recognised-as-a-supported-file-format-tp4943361.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From weixj2003ld at 163.com  Tue May  1 23:45:50 2012
From: weixj2003ld at 163.com (weixj)
Date: Wed May  2 00:01:45 2012
Subject: [gdal-dev] how to judge a file is a DEM file or not?
Message-ID: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>

How to judge a file is a DEM file or not?

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120502/7b9cc195/attachment.html
From brfr at metrico.lu  Wed May  2 02:38:34 2012
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed May  2 03:03:37 2012
Subject: [gdal-dev] how to judge a file is a DEM file or not?
In-Reply-To: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>
References: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>
Message-ID: <4FA0D66A.4090103@metrico.lu>

Am 02.05.2012 05:45, schrieb weixj:
> How to judge a file is a DEM file or not?
>
> Thank you.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Hi

you can try to run gdalinfo on it, or you can try to open it in a text 
editor or in Quantum GIS or guess by file extension?! Without more 
information it is hard to help ... even the term DEM file is not very 
precise, do you mean a specific file type with that extension or "just" 
a terrain model like SRTM or GeoTIFF?

Frank

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Wed May  2 03:24:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May  2 03:25:27 2012
Subject: [gdal-dev] how to judge a file is a DEM file or not?
In-Reply-To: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>
References: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>
Message-ID: <1335943471.4fa0e12f2b666@imp.free.fr>

Selon weixj <weixj2003ld@163.com>:

> How to judge a file is a DEM file or not?

There's no straightforward answer. Some formats (DTED, SRTM, ...) are
specifically aimed for DEM. But DEM can also be conveyed through more generic
purpose formats such as GeoTIFF. In that case, looking at the data type of the
raster bands might give a clue. DEM use generally Int16 or Float32 data types
(at least, not Byte which has not a sufficient range to express elevations).
Eventually, looking at the associated metadata might be necessary to know the
semantics of the data.

Best regards,

Even


From alobolistas at gmail.com  Wed May  2 05:41:34 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed May  2 05:41:37 2012
Subject: [gdal-dev] Problems with gdal and hdf files
Message-ID: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>

Hi!

The gdal info of a multiband satellite image in hdf is reported by
gdal as "Size is 512, 512"
in contradiction with the size of the subdatasets. QGIS and R
(raster+rgdal) report an error at opening the file,
while envi and HDFLook can open it with no problem. I include the
gdalinfo output and the
info reported by HDFLook. Any help appreciated.
Thanks
Agus

$ gdalinfo --version
GDAL 1.8.0, released 2011/01/12

$ gdalinfo lndsr.L5169054_05420101216.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Files: lndsr.L5169054_05420101216.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  DataProvider=UMD
  Satellite=LANDSAT_5
  Instrument=TM
  AcquisitionDate=2010-12-16T00:00:00.000000Z
  Level1ProductionDate=2012-02-22T00:00:00.000000Z
  SolarZenith=42.02009
  SolarAzimuth=141.4236
  WRS_System=2
  WRS_Path=169
  WRS_Row=54
  NumberOfBands=6
  BandNumbers=1, 2, 3, 4, 5, 7
  ShortName=L5TSR
  LocalGranuleID=L5TSR.a2010350.w2p169r054.020.2012117105207.hdf
  ProductionDate=2012-04-26T10:52:07Z
  PGEVersion=1.0.9
  ProcessVersion=1.0.4
  WestBoundingCoordinate=36.6199876177544
  EastBoundingCoordinate=38.780676500528
  NorthBoundingCoordinate=9.61826703329522
  SouthBoundingCoordinate=7.72285510894074
  OrientationAngle=0
  PixelSize=30
  HDFEOSVersion=HDFEOS_V2.4
  Cloud Mask Algo Version=CMReflectanceBasedv1.0
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
  SUBDATASET_1_DESC=[6961x7901] band1 Grid (16-bit integer)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band2
  SUBDATASET_2_DESC=[6961x7901] band2 Grid (16-bit integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band3
  SUBDATASET_3_DESC=[6961x7901] band3 Grid (16-bit integer)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band4
  SUBDATASET_4_DESC=[6961x7901] band4 Grid (16-bit integer)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band5
  SUBDATASET_5_DESC=[6961x7901] band5 Grid (16-bit integer)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band7
  SUBDATASET_6_DESC=[6961x7901] band7 Grid (16-bit integer)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:atmos_opacity
  SUBDATASET_7_DESC=[6961x7901] atmos_opacity Grid (16-bit integer)
  SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:lndsr_QA
  SUBDATASET_8_DESC=[6961x7901] lndsr_QA Grid (16-bit integer)
  SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band6
  SUBDATASET_9_DESC=[6961x7901] band6 Grid (16-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


HDFLooK:

Global attributes: 26
DataProvider: UMDLANDSAT_5TM2010-12-16T00:00:00.000000Z2012-02-22T00:00:00.000000Z	SolarZenith:	42.0201
	SolarAzimuth:	141.424
2	WRS_Path:	169
	WRS_Row:	54
	NumberOfBands:	6
	BandNumbers:	1,  2,  3,  4,  5,  7
L5TSRL5TSR.a2010350.w2p169r054.020.2012117105207.hdf2012-04-26T10:52:07Z1.0.91.0.4	WestBoundingCoordinate:	36.62
	EastBoundingCoordinate:	38.7807
	NorthBoundingCoordinate:	9.61827
	SouthBoundingCoordinate:	7.72286
	OrientationAngle:	0
	PixelSize:	30
HDFEOS_V2.4-----------------------------------------------------------------------------------
GROUP=SwathStructure
END_GROUP=SwathStructure
GROUP=GridStructure
	GROUP=GRID_1
		GridName="Grid"
		XDim=7901
		YDim=6961
		UpperLeftPointMtrs=(238785.000000,1063215.000000)
		LowerRightMtrs=(475815.000000,854385.000000)
		Projection=GCTP_UTM
		ZoneCode=37
		SphereCode=12
		GridOrigin=HDFE_GD_UL
		GROUP=Dimension
		END_GROUP=Dimension
		GROUP=DataField
			OBJECT=DataField_0
				DataFieldName="band1"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_0
			OBJECT=DataField_1
				DataFieldName="band2"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_1
			OBJECT=DataField_2
				DataFieldName="band3"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_2
			OBJECT=DataField_3
				DataFieldName="band4"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_3
			OBJECT=DataField_4
				DataFieldName="band5"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_4
			OBJECT=DataField_5
				DataFieldName="band7"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_5
			OBJECT=DataField_6
				DataFieldName="atmos_opacity"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_6
			OBJECT=DataField_7
				DataFieldName="lndsr_QA"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_7
			OBJECT=DataField_9
				DataFieldName="band6"
				DataType=DFNT_INT16
				DimList=("YDim","XDim")
			END_OBJECT=DataField_9
		END_GROUP=DataField
		GROUP=MergedFields
		END_GROUP=MergedFields
	END_GROUP=GRID_1
END_GROUP=GridStructure
GROUP=PointStructure
END_GROUP=PointStructure
END
-----------------------------------------------------------------------------------
CMReflectanceBasedv1.0
From even.rouault at mines-paris.org  Wed May  2 07:07:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May  2 07:08:18 2012
Subject: [gdal-dev] Problems with gdal and hdf files
In-Reply-To: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
References: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
Message-ID: <1335956856.4fa11578919c3@imp.free.fr>

Selon Agustin Lobo <alobolistas@gmail.com>:

> Hi!
>
> The gdal info of a multiband satellite image in hdf is reported by
> gdal as "Size is 512, 512"
> in contradiction with the size of the subdatasets. QGIS and R
> (raster+rgdal) report an error at opening the file,
> while envi and HDFLook can open it with no problem. I include the
> gdalinfo output and the
> info reported by HDFLook. Any help appreciated.

I don't consider that to be a problem. The size reported on a GDAL dataset that
is only made of subdatasets (that is to say when the dataset has no raster bands
in itself, which is the case here) has no meaning, and is put to a default value
of 512x512. You have to open the subdatasets to know their size(in the case of
HDF4, the description of the subdataset also give them). There are cases where
the subdsatasets have different sizes, so it would be impossible to set a
significant value for the size of the dataset.

> Thanks
> Agus
>
> $ gdalinfo --version
> GDAL 1.8.0, released 2011/01/12
>
> $ gdalinfo lndsr.L5169054_05420101216.hdf
> Driver: HDF4/Hierarchical Data Format Release 4
> Files: lndsr.L5169054_05420101216.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>   DataProvider=UMD
>   Satellite=LANDSAT_5
>   Instrument=TM
>   AcquisitionDate=2010-12-16T00:00:00.000000Z
>   Level1ProductionDate=2012-02-22T00:00:00.000000Z
>   SolarZenith=42.02009
>   SolarAzimuth=141.4236
>   WRS_System=2
>   WRS_Path=169
>   WRS_Row=54
>   NumberOfBands=6
>   BandNumbers=1, 2, 3, 4, 5, 7
>   ShortName=L5TSR
>   LocalGranuleID=L5TSR.a2010350.w2p169r054.020.2012117105207.hdf
>   ProductionDate=2012-04-26T10:52:07Z
>   PGEVersion=1.0.9
>   ProcessVersion=1.0.4
>   WestBoundingCoordinate=36.6199876177544
>   EastBoundingCoordinate=38.780676500528
>   NorthBoundingCoordinate=9.61826703329522
>   SouthBoundingCoordinate=7.72285510894074
>   OrientationAngle=0
>   PixelSize=30
>   HDFEOSVersion=HDFEOS_V2.4
>   Cloud Mask Algo Version=CMReflectanceBasedv1.0
> Subdatasets:
>
>
SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
>   SUBDATASET_1_DESC=[6961x7901] band1 Grid (16-bit integer)
>
>
SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band2
>   SUBDATASET_2_DESC=[6961x7901] band2 Grid (16-bit integer)
>
>
SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band3
>   SUBDATASET_3_DESC=[6961x7901] band3 Grid (16-bit integer)
>
>
SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band4
>   SUBDATASET_4_DESC=[6961x7901] band4 Grid (16-bit integer)
>
>
SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band5
>   SUBDATASET_5_DESC=[6961x7901] band5 Grid (16-bit integer)
>
>
SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band7
>   SUBDATASET_6_DESC=[6961x7901] band7 Grid (16-bit integer)
>
>
SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:atmos_opacity
>   SUBDATASET_7_DESC=[6961x7901] atmos_opacity Grid (16-bit integer)
>
>
SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:lndsr_QA
>   SUBDATASET_8_DESC=[6961x7901] lndsr_QA Grid (16-bit integer)
>
>
SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band6
>   SUBDATASET_9_DESC=[6961x7901] band6 Grid (16-bit integer)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
> HDFLooK:
>
> Global attributes: 26
> DataProvider:
>
UMDLANDSAT_5TM2010-12-16T00:00:00.000000Z2012-02-22T00:00:00.000000Z	SolarZenith:	42.0201
> 	SolarAzimuth:	141.424
> 2	WRS_Path:	169
> 	WRS_Row:	54
> 	NumberOfBands:	6
> 	BandNumbers:	1,  2,  3,  4,  5,  7
>
L5TSRL5TSR.a2010350.w2p169r054.020.2012117105207.hdf2012-04-26T10:52:07Z1.0.91.0.4	WestBoundingCoordinate:	36.62
> 	EastBoundingCoordinate:	38.7807
> 	NorthBoundingCoordinate:	9.61827
> 	SouthBoundingCoordinate:	7.72286
> 	OrientationAngle:	0
> 	PixelSize:	30
>
HDFEOS_V2.4-----------------------------------------------------------------------------------
> GROUP=SwathStructure
> END_GROUP=SwathStructure
> GROUP=GridStructure
> 	GROUP=GRID_1
> 		GridName="Grid"
> 		XDim=7901
> 		YDim=6961
> 		UpperLeftPointMtrs=(238785.000000,1063215.000000)
> 		LowerRightMtrs=(475815.000000,854385.000000)
> 		Projection=GCTP_UTM
> 		ZoneCode=37
> 		SphereCode=12
> 		GridOrigin=HDFE_GD_UL
> 		GROUP=Dimension
> 		END_GROUP=Dimension
> 		GROUP=DataField
> 			OBJECT=DataField_0
> 				DataFieldName="band1"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_0
> 			OBJECT=DataField_1
> 				DataFieldName="band2"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_1
> 			OBJECT=DataField_2
> 				DataFieldName="band3"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_2
> 			OBJECT=DataField_3
> 				DataFieldName="band4"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_3
> 			OBJECT=DataField_4
> 				DataFieldName="band5"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_4
> 			OBJECT=DataField_5
> 				DataFieldName="band7"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_5
> 			OBJECT=DataField_6
> 				DataFieldName="atmos_opacity"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_6
> 			OBJECT=DataField_7
> 				DataFieldName="lndsr_QA"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_7
> 			OBJECT=DataField_9
> 				DataFieldName="band6"
> 				DataType=DFNT_INT16
> 				DimList=("YDim","XDim")
> 			END_OBJECT=DataField_9
> 		END_GROUP=DataField
> 		GROUP=MergedFields
> 		END_GROUP=MergedFields
> 	END_GROUP=GRID_1
> END_GROUP=GridStructure
> GROUP=PointStructure
> END_GROUP=PointStructure
> END
>
-----------------------------------------------------------------------------------
> CMReflectanceBasedv1.0
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From alobolistas at gmail.com  Wed May  2 08:43:12 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed May  2 08:44:04 2012
Subject: [gdal-dev] Problems with gdal and hdf files
In-Reply-To: <1335956856.4fa11578919c3@imp.free.fr>
References: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
	<1335956856.4fa11578919c3@imp.free.fr>
Message-ID: <CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>

You are right. I was confusing bands and subdatasets.
The following does not work:
$ gdal_translate -b 4  lndsr.L5169054_05420101216.hdf test.tif
Input file contains subdatasets. Please, select one of them for reading.

The following works:
$ gdal_translate -sds lndsr.L5169054_05420101216.hdf test.tif
which results in test.tif1 to test.tif9 (probably should be test1.tif
to test9.tif)

but there is no way to actually select 1 or more specific subdatasets

The most important
QGIS complains:
Cannot get GDAL raster band:

R (raster) complains
> r <- brick("lndsr.L5169054_05420101216.hdf")
Error in .rasterObjectFromFile(x, objecttype = "RasterBrick", ...) :
  Cannot create a RasterLayer object from this file.
In addition: Warning message:
In .rasterFromGDAL(x, band = band, objecttype, ...) :
  GeoTransform values not available; georeferencing will not be correct
>

but GDALinfo() is correct.
Cannot test hdf5 or readGDAL() in R as the file is huge

I guess the problem is in QGIS (and R package raster)? I'm not sure,
as I do not know if
subdatasets can be selected for reading using gdal.

Agus

2012/5/2 Even Rouault <even.rouault@mines-paris.org>:
> Selon Agustin Lobo <alobolistas@gmail.com>:
>
>> Hi!
>>
>> The gdal info of a multiband satellite image in hdf is reported by
>> gdal as "Size is 512, 512"
>> in contradiction with the size of the subdatasets. QGIS and R
>> (raster+rgdal) report an error at opening the file,
>> while envi and HDFLook can open it with no problem. I include the
>> gdalinfo output and the
>> info reported by HDFLook. Any help appreciated.
>
> I don't consider that to be a problem. The size reported on a GDAL dataset that
> is only made of subdatasets (that is to say when the dataset has no raster bands
> in itself, which is the case here) has no meaning, and is put to a default value
> of 512x512. You have to open the subdatasets to know their size(in the case of
> HDF4, the description of the subdataset also give them). There are cases where
> the subdsatasets have different sizes, so it would be impossible to set a
> significant value for the size of the dataset.
>
>> Thanks
>> Agus
>>
>> $ gdalinfo --version
>> GDAL 1.8.0, released 2011/01/12
>>
>> $ gdalinfo lndsr.L5169054_05420101216.hdf
>> Driver: HDF4/Hierarchical Data Format Release 4
>> Files: lndsr.L5169054_05420101216.hdf
>> Size is 512, 512
>> Coordinate System is `'
>> Metadata:
>> ? DataProvider=UMD
>> ? Satellite=LANDSAT_5
>> ? Instrument=TM
>> ? AcquisitionDate=2010-12-16T00:00:00.000000Z
>> ? Level1ProductionDate=2012-02-22T00:00:00.000000Z
>> ? SolarZenith=42.02009
>> ? SolarAzimuth=141.4236
>> ? WRS_System=2
>> ? WRS_Path=169
>> ? WRS_Row=54
>> ? NumberOfBands=6
>> ? BandNumbers=1, 2, 3, 4, 5, 7
>> ? ShortName=L5TSR
>> ? LocalGranuleID=L5TSR.a2010350.w2p169r054.020.2012117105207.hdf
>> ? ProductionDate=2012-04-26T10:52:07Z
>> ? PGEVersion=1.0.9
>> ? ProcessVersion=1.0.4
>> ? WestBoundingCoordinate=36.6199876177544
>> ? EastBoundingCoordinate=38.780676500528
>> ? NorthBoundingCoordinate=9.61826703329522
>> ? SouthBoundingCoordinate=7.72285510894074
>> ? OrientationAngle=0
>> ? PixelSize=30
>> ? HDFEOSVersion=HDFEOS_V2.4
>> ? Cloud Mask Algo Version=CMReflectanceBasedv1.0
>> Subdatasets:
>>
>>
> SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
>> ? SUBDATASET_1_DESC=[6961x7901] band1 Grid (16-bit integer)
>>
>>
> SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band2
>> ? SUBDATASET_2_DESC=[6961x7901] band2 Grid (16-bit integer)
>>
>>
> SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band3
>> ? SUBDATASET_3_DESC=[6961x7901] band3 Grid (16-bit integer)
>>
>>
> SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band4
>> ? SUBDATASET_4_DESC=[6961x7901] band4 Grid (16-bit integer)
>>
>>
> SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band5
>> ? SUBDATASET_5_DESC=[6961x7901] band5 Grid (16-bit integer)
>>
>>
> SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band7
>> ? SUBDATASET_6_DESC=[6961x7901] band7 Grid (16-bit integer)
>>
>>
> SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:atmos_opacity
>> ? SUBDATASET_7_DESC=[6961x7901] atmos_opacity Grid (16-bit integer)
>>
>>
> SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:lndsr_QA
>> ? SUBDATASET_8_DESC=[6961x7901] lndsr_QA Grid (16-bit integer)
>>
>>
> SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band6
>> ? SUBDATASET_9_DESC=[6961x7901] band6 Grid (16-bit integer)
>> Corner Coordinates:
>> Upper Left ?( ? ?0.0, ? ?0.0)
>> Lower Left ?( ? ?0.0, ?512.0)
>> Upper Right ( ?512.0, ? ?0.0)
>> Lower Right ( ?512.0, ?512.0)
>> Center ? ? ?( ?256.0, ?256.0)
>>
>>
>> HDFLooK:
>>
>> Global attributes: 26
>> DataProvider:
>>
> UMDLANDSAT_5TM2010-12-16T00:00:00.000000Z2012-02-22T00:00:00.000000Z ? ?SolarZenith: ? ?42.0201
>> ? ? ? SolarAzimuth: ? 141.424
>> 2 ? ? WRS_Path: ? ? ? 169
>> ? ? ? WRS_Row: ? ? ? ?54
>> ? ? ? NumberOfBands: ?6
>> ? ? ? BandNumbers: ? ?1, ?2, ?3, ?4, ?5, ?7
>>
> L5TSRL5TSR.a2010350.w2p169r054.020.2012117105207.hdf2012-04-26T10:52:07Z1.0.91.0.4 ? ? ?WestBoundingCoordinate: 36.62
>> ? ? ? EastBoundingCoordinate: 38.7807
>> ? ? ? NorthBoundingCoordinate: ? ? ? ?9.61827
>> ? ? ? SouthBoundingCoordinate: ? ? ? ?7.72286
>> ? ? ? OrientationAngle: ? ? ? 0
>> ? ? ? PixelSize: ? ? ?30
>>
> HDFEOS_V2.4-----------------------------------------------------------------------------------
>> GROUP=SwathStructure
>> END_GROUP=SwathStructure
>> GROUP=GridStructure
>> ? ? ? GROUP=GRID_1
>> ? ? ? ? ? ? ? GridName="Grid"
>> ? ? ? ? ? ? ? XDim=7901
>> ? ? ? ? ? ? ? YDim=6961
>> ? ? ? ? ? ? ? UpperLeftPointMtrs=(238785.000000,1063215.000000)
>> ? ? ? ? ? ? ? LowerRightMtrs=(475815.000000,854385.000000)
>> ? ? ? ? ? ? ? Projection=GCTP_UTM
>> ? ? ? ? ? ? ? ZoneCode=37
>> ? ? ? ? ? ? ? SphereCode=12
>> ? ? ? ? ? ? ? GridOrigin=HDFE_GD_UL
>> ? ? ? ? ? ? ? GROUP=Dimension
>> ? ? ? ? ? ? ? END_GROUP=Dimension
>> ? ? ? ? ? ? ? GROUP=DataField
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_0
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band1"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_0
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_1
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band2"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_1
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_2
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band3"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_2
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_3
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band4"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_3
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_4
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band5"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_4
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_5
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band7"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_5
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_6
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="atmos_opacity"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_6
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_7
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="lndsr_QA"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_7
>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_9
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band6"
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_9
>> ? ? ? ? ? ? ? END_GROUP=DataField
>> ? ? ? ? ? ? ? GROUP=MergedFields
>> ? ? ? ? ? ? ? END_GROUP=MergedFields
>> ? ? ? END_GROUP=GRID_1
>> END_GROUP=GridStructure
>> GROUP=PointStructure
>> END_GROUP=PointStructure
>> END
>>
> -----------------------------------------------------------------------------------
>> CMReflectanceBasedv1.0
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
From tclarke at ball.com  Wed May  2 08:43:04 2012
From: tclarke at ball.com (Clarke, Trevor)
Date: Wed May  2 08:47:57 2012
Subject: [gdal-dev] how to judge a file is a DEM file or not?
In-Reply-To: <1335943471.4fa0e12f2b666@imp.free.fr>
References: <2adfbc44.11744.1370ba76aba.Coremail.weixj2003ld$163.com>
	<1335943471.4fa0e12f2b666@imp.free.fr>
Message-ID: <873043AF54FE794B912B616ABA7E9FE50B4D8665@daytonmsg2k3.AERO.BALL.COM>

Also, look at the coverage area, DEMs will often (but not always) have a
nice "round" coverage area such as 30 arcsecond, 3 arcsecond, or 1
arcsecond. The pixel values are often converted to a physical unit such
as feet or meters so you can compare the values to height values in
Google Earth or a similar tool. These heuristics tend to hold for pieces
of larger terrain maps such as SRTM, GTOPO30, ASTER, etc. Small area
terrain maps from stereo imagery, airborne SAR, LIDAR, etc. are less
likely to hold to the coverage area rule but are probably still in
physical units.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Wednesday, May 02, 2012 3:25 AM
To: weixj
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] how to judge a file is a DEM file or not?

Selon weixj <weixj2003ld@163.com>:

> How to judge a file is a DEM file or not?

There's no straightforward answer. Some formats (DTED, SRTM, ...) are
specifically aimed for DEM. But DEM can also be conveyed through more
generic
purpose formats such as GeoTIFF. In that case, looking at the data type
of the
raster bands might give a clue. DEM use generally Int16 or Float32 data
types
(at least, not Byte which has not a sufficient range to express
elevations).
Eventually, looking at the associated metadata might be necessary to
know the
semantics of the data.

Best regards,

Even


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



This message and any enclosures are intended only for the addressee.  Please 

notify the sender by email if you are not the intended recipient.  If you are 

not the intended recipient, you may not use, copy, disclose, or distribute this 

message or its contents or enclosures to any other person and any such actions 

may be unlawful.  Ball reserves the right to monitor and review all messages 

and enclosures sent to or from this email address.
From even.rouault at mines-paris.org  Wed May  2 08:54:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May  2 08:55:43 2012
Subject: [gdal-dev] Problems with gdal and hdf files
In-Reply-To: <CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>
References: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
	<1335956856.4fa11578919c3@imp.free.fr>
	<CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>
Message-ID: <1335963298.4fa12ea20a6f6@imp.free.fr>


> but there is no way to actually select 1 or more specific subdatasets

It is possible to select one subdataset. You must use the name reported in the
lines that contain SUBDATASET_XXX_NAME. For example :

gdal_translate HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
out.tif

>
> The most important
> QGIS complains:
> Cannot get GDAL raster band:

I think support for selecting subdatasets has been added in QGIS 1.8 (I haven't
tested myself, just a vague feeling of having seen a commit message about that)

>
> R (raster) complains
> > r <- brick("lndsr.L5169054_05420101216.hdf")
> Error in .rasterObjectFromFile(x, objecttype = "RasterBrick", ...) :
>   Cannot create a RasterLayer object from this file.
> In addition: Warning message:
> In .rasterFromGDAL(x, band = band, objecttype, ...) :
>   GeoTransform values not available; georeferencing will not be correct
> >

You can likely directly provide the subdataset name instead of the dataset name.
Not sure if R exposes a way of getting the subdataset names from the dataset.
From etourigny.dev at gmail.com  Wed May  2 09:04:24 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed May  2 09:04:37 2012
Subject: [Qgis-user] Re: [gdal-dev] Problems with gdal and hdf files
In-Reply-To: <CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>
References: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
	<1335956856.4fa11578919c3@imp.free.fr>
	<CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>
Message-ID: <CA+TxYvMmn_DtejpU2HeQgU=hw8mOY07M0RHgt2t3vFvV-nG1zQ@mail.gmail.com>

On Wed, May 2, 2012 at 9:43 AM, Agustin Lobo <alobolistas@gmail.com> wrote:
> You are right. I was confusing bands and subdatasets.
> The following does not work:
> $ gdal_translate -b 4 ?lndsr.L5169054_05420101216.hdf test.tif
> Input file contains subdatasets. Please, select one of them for reading.
>
> The following works:
> $ gdal_translate -sds lndsr.L5169054_05420101216.hdf test.tif
> which results in test.tif1 to test.tif9 (probably should be test1.tif
> to test9.tif)
>
> but there is no way to actually select 1 or more specific subdatasets

same thing if you use the extended file syntax (e.g.
HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1 ) .

You can probably work around this limitation by creating a vrt file
with gdalbuildvrt

>
> The most important
> QGIS complains:
> Cannot get GDAL raster band:
>
> R (raster) complains
>> r <- brick("lndsr.L5169054_05420101216.hdf")
> Error in .rasterObjectFromFile(x, objecttype = "RasterBrick", ...) :
> ?Cannot create a RasterLayer object from this file.
> In addition: Warning message:
> In .rasterFromGDAL(x, band = band, objecttype, ...) :
> ?GeoTransform values not available; georeferencing will not be correct
>>

pass the vrt file you created to R, it should work as long as gdalinfo
works on that vrt file, although I have never tried it.

>
> but GDALinfo() is correct.
> Cannot test hdf5 or readGDAL() in R as the file is huge
>
> I guess the problem is in QGIS (and R package raster)? I'm not sure,
> as I do not know if
> subdatasets can be selected for reading using gdal.

Also see if you can load the vrt file in qgis!

>
> Agus
>
> 2012/5/2 Even Rouault <even.rouault@mines-paris.org>:
>> Selon Agustin Lobo <alobolistas@gmail.com>:
>>
>>> Hi!
>>>
>>> The gdal info of a multiband satellite image in hdf is reported by
>>> gdal as "Size is 512, 512"
>>> in contradiction with the size of the subdatasets. QGIS and R
>>> (raster+rgdal) report an error at opening the file,
>>> while envi and HDFLook can open it with no problem. I include the
>>> gdalinfo output and the
>>> info reported by HDFLook. Any help appreciated.
>>
>> I don't consider that to be a problem. The size reported on a GDAL dataset that
>> is only made of subdatasets (that is to say when the dataset has no raster bands
>> in itself, which is the case here) has no meaning, and is put to a default value
>> of 512x512. You have to open the subdatasets to know their size(in the case of
>> HDF4, the description of the subdataset also give them). There are cases where
>> the subdsatasets have different sizes, so it would be impossible to set a
>> significant value for the size of the dataset.
>>
>>> Thanks
>>> Agus
>>>
>>> $ gdalinfo --version
>>> GDAL 1.8.0, released 2011/01/12
>>>
>>> $ gdalinfo lndsr.L5169054_05420101216.hdf
>>> Driver: HDF4/Hierarchical Data Format Release 4
>>> Files: lndsr.L5169054_05420101216.hdf
>>> Size is 512, 512
>>> Coordinate System is `'
>>> Metadata:
>>> ? DataProvider=UMD
>>> ? Satellite=LANDSAT_5
>>> ? Instrument=TM
>>> ? AcquisitionDate=2010-12-16T00:00:00.000000Z
>>> ? Level1ProductionDate=2012-02-22T00:00:00.000000Z
>>> ? SolarZenith=42.02009
>>> ? SolarAzimuth=141.4236
>>> ? WRS_System=2
>>> ? WRS_Path=169
>>> ? WRS_Row=54
>>> ? NumberOfBands=6
>>> ? BandNumbers=1, 2, 3, 4, 5, 7
>>> ? ShortName=L5TSR
>>> ? LocalGranuleID=L5TSR.a2010350.w2p169r054.020.2012117105207.hdf
>>> ? ProductionDate=2012-04-26T10:52:07Z
>>> ? PGEVersion=1.0.9
>>> ? ProcessVersion=1.0.4
>>> ? WestBoundingCoordinate=36.6199876177544
>>> ? EastBoundingCoordinate=38.780676500528
>>> ? NorthBoundingCoordinate=9.61826703329522
>>> ? SouthBoundingCoordinate=7.72285510894074
>>> ? OrientationAngle=0
>>> ? PixelSize=30
>>> ? HDFEOSVersion=HDFEOS_V2.4
>>> ? Cloud Mask Algo Version=CMReflectanceBasedv1.0
>>> Subdatasets:
>>>
>>>
>> SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
>>> ? SUBDATASET_1_DESC=[6961x7901] band1 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band2
>>> ? SUBDATASET_2_DESC=[6961x7901] band2 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band3
>>> ? SUBDATASET_3_DESC=[6961x7901] band3 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band4
>>> ? SUBDATASET_4_DESC=[6961x7901] band4 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band5
>>> ? SUBDATASET_5_DESC=[6961x7901] band5 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band7
>>> ? SUBDATASET_6_DESC=[6961x7901] band7 Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:atmos_opacity
>>> ? SUBDATASET_7_DESC=[6961x7901] atmos_opacity Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:lndsr_QA
>>> ? SUBDATASET_8_DESC=[6961x7901] lndsr_QA Grid (16-bit integer)
>>>
>>>
>> SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band6
>>> ? SUBDATASET_9_DESC=[6961x7901] band6 Grid (16-bit integer)
>>> Corner Coordinates:
>>> Upper Left ?( ? ?0.0, ? ?0.0)
>>> Lower Left ?( ? ?0.0, ?512.0)
>>> Upper Right ( ?512.0, ? ?0.0)
>>> Lower Right ( ?512.0, ?512.0)
>>> Center ? ? ?( ?256.0, ?256.0)
>>>
>>>
>>> HDFLooK:
>>>
>>> Global attributes: 26
>>> DataProvider:
>>>
>> UMDLANDSAT_5TM2010-12-16T00:00:00.000000Z2012-02-22T00:00:00.000000Z ? ?SolarZenith: ? ?42.0201
>>> ? ? ? SolarAzimuth: ? 141.424
>>> 2 ? ? WRS_Path: ? ? ? 169
>>> ? ? ? WRS_Row: ? ? ? ?54
>>> ? ? ? NumberOfBands: ?6
>>> ? ? ? BandNumbers: ? ?1, ?2, ?3, ?4, ?5, ?7
>>>
>> L5TSRL5TSR.a2010350.w2p169r054.020.2012117105207.hdf2012-04-26T10:52:07Z1.0.91.0.4 ? ? ?WestBoundingCoordinate: 36.62
>>> ? ? ? EastBoundingCoordinate: 38.7807
>>> ? ? ? NorthBoundingCoordinate: ? ? ? ?9.61827
>>> ? ? ? SouthBoundingCoordinate: ? ? ? ?7.72286
>>> ? ? ? OrientationAngle: ? ? ? 0
>>> ? ? ? PixelSize: ? ? ?30
>>>
>> HDFEOS_V2.4-----------------------------------------------------------------------------------
>>> GROUP=SwathStructure
>>> END_GROUP=SwathStructure
>>> GROUP=GridStructure
>>> ? ? ? GROUP=GRID_1
>>> ? ? ? ? ? ? ? GridName="Grid"
>>> ? ? ? ? ? ? ? XDim=7901
>>> ? ? ? ? ? ? ? YDim=6961
>>> ? ? ? ? ? ? ? UpperLeftPointMtrs=(238785.000000,1063215.000000)
>>> ? ? ? ? ? ? ? LowerRightMtrs=(475815.000000,854385.000000)
>>> ? ? ? ? ? ? ? Projection=GCTP_UTM
>>> ? ? ? ? ? ? ? ZoneCode=37
>>> ? ? ? ? ? ? ? SphereCode=12
>>> ? ? ? ? ? ? ? GridOrigin=HDFE_GD_UL
>>> ? ? ? ? ? ? ? GROUP=Dimension
>>> ? ? ? ? ? ? ? END_GROUP=Dimension
>>> ? ? ? ? ? ? ? GROUP=DataField
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_0
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band1"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_0
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_1
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band2"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_1
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_2
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band3"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_2
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_3
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band4"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_3
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_4
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band5"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_4
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_5
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band7"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_5
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_6
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="atmos_opacity"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_6
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_7
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="lndsr_QA"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_7
>>> ? ? ? ? ? ? ? ? ? ? ? OBJECT=DataField_9
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataFieldName="band6"
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DataType=DFNT_INT16
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DimList=("YDim","XDim")
>>> ? ? ? ? ? ? ? ? ? ? ? END_OBJECT=DataField_9
>>> ? ? ? ? ? ? ? END_GROUP=DataField
>>> ? ? ? ? ? ? ? GROUP=MergedFields
>>> ? ? ? ? ? ? ? END_GROUP=MergedFields
>>> ? ? ? END_GROUP=GRID_1
>>> END_GROUP=GridStructure
>>> GROUP=PointStructure
>>> END_GROUP=PointStructure
>>> END
>>>
>> -----------------------------------------------------------------------------------
>>> CMReflectanceBasedv1.0
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user
From etourigny.dev at gmail.com  Wed May  2 09:07:30 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed May  2 09:07:54 2012
Subject: [gdal-dev] Problems with gdal and hdf files
In-Reply-To: <1335963298.4fa12ea20a6f6@imp.free.fr>
References: <CAG4NReKdey50Pq7weit3N78OKia_WXwunoGOfzp+kY+GYMyLYA@mail.gmail.com>
	<1335956856.4fa11578919c3@imp.free.fr>
	<CAG4NReLrBj4O64o1jC4D8YVqahDoFPjQGkmaqyOkHjp0X-2DDA@mail.gmail.com>
	<1335963298.4fa12ea20a6f6@imp.free.fr>
Message-ID: <CA+TxYvM2PLkx2AZnx5dTOSvKD3DFewzZUvfL3UDab2Z=7=O=pg@mail.gmail.com>

On Wed, May 2, 2012 at 9:54 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>
>> but there is no way to actually select 1 or more specific subdatasets
>
> It is possible to select one subdataset. You must use the name reported in the
> lines that contain SUBDATASET_XXX_NAME. For example :
>
> gdal_translate HDF4_EOS:EOS_GRID:"lndsr.L5169054_05420101216.hdf":Grid:band1
> out.tif
>
>>
>> The most important
>> QGIS complains:
>> Cannot get GDAL raster band:
>
> I think support for selecting subdatasets has been added in QGIS 1.8 (I haven't
> tested myself, just a vague feeling of having seen a commit message about that)

This is now possible for rasters with subdatasets - Jurgen applied my
patches for this. If a file has only 1 subdataset it will now open it,
and if it has many subdatasets it will present a dialog to choose the
layer(s).  Also, if you use the file browser, you are able to view the
subdatasets directly.

>
>>
>> R (raster) complains
>> > r <- brick("lndsr.L5169054_05420101216.hdf")
>> Error in .rasterObjectFromFile(x, objecttype = "RasterBrick", ...) :
>> ? Cannot create a RasterLayer object from this file.
>> In addition: Warning message:
>> In .rasterFromGDAL(x, band = band, objecttype, ...) :
>> ? GeoTransform values not available; georeferencing will not be correct
>> >
>
> You can likely directly provide the subdataset name instead of the dataset name.
> Not sure if R exposes a way of getting the subdataset names from the dataset.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Wed May  2 10:13:40 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed May  2 10:14:18 2012
Subject: [gdal-dev] How to read part of the tiff data and
	generate a new tiff file
In-Reply-To: <4fa0ed3a.08eb440a.5d7e.ffff858aSMTPIN_ADDED@mx.google.com>
References: <17b76f66.29bc1.136e407b25d.Coremail.weixj2003ld@163.com>
	<CAMKgpOb3Ai=JM5CPq_RC77yKH0Tri+qbOg1wURUowZk_a6cJnQ@mail.gmail.com>
	<72751b1c.c5ee.136e8d0e953.Coremail.weixj2003ld@163.com>
	<CAMKgpOYfpzvf3MVNzfmz10gTBXzGDjc0VNHkQ51y0DM0OTkrKg@mail.gmail.com>
	<4fa09d08.46d8440a.1445.ffff98d9SMTPIN_ADDED@mx.google.com>
	<CAMKgpOYmGmk6Pf=qNN8Kr=H5t8iuEi7zFz_z6Ws+=T4JE4hArg@mail.gmail.com>
	<4fa0ed3a.08eb440a.5d7e.ffff858aSMTPIN_ADDED@mx.google.com>
Message-ID: <CAMKgpOYMBrk2b4-21To51P4qhH7pO2q2-hWaEamvsA1W-tcR7A@mail.gmail.com>

weixj,

You can get some free samples at http://www.webgis.com/terr_us1deg.html

On Wed, May 2, 2012 at 1:45 PM, weixj <weixj2003ld@163.com> wrote:

> Thank you for your answer.
> I want to know that where I can get the free DEM data?
> I want a sample data,and test my program.
>
> Thank you.
>
>
>
> At 2012-05-02 12:57:41,"Chaitanya kumar CH" <chaitanya.ch@gmail.com>
> wrote:
>
> weixj,
>
> Digital Elevation Model is a type of data. In this context, it is a grid
> of elevation values stored in a raster file.
> DEM refers to height. The underlying raster format can be anything.
>
> The only reference I found for .gmp format is "Global Mapper Package".
> Perhaps you can find more on the global mapper forums and by opening it in
> a binary editor.
>
> If the data is stored as raw data, you may be able to read it after
> creating a .vrt file to describe it.
>
> On Wed, May 2, 2012 at 8:03 AM, weixj <weixj2003ld@163.com> wrote:
>
>>  DEM is a data format,and the file name extension has many formats,is it
>> right?
>> My colleage give me file  and its name is 90mDataHeight.gmp,and I use the
>> following code read it,and find that it can not open the file.
>>
>> code:
>> GDALAllRegister();
>>  poDataset=(GDALDataset
>> *)GDALOpen(fileName.toLatin1().data(),GA_ReadOnly);
>>  if(poDataset==NULL)
>>  {
>>   QMessageBox::warning(0,"","can not open file:"+fileName);
>>   return false;
>>  }
>>
>> I do not know why?
>> How many formats of DEM file?
>>
>> Thank you.
>>
>> ? 2012-04-25 20:11:45?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>
>> sure
>>
>>
>> 2012/4/25 weixj <weixj2003ld@163.com>
>>
>>>  If the file is DEM?the same?
>>>
>>>
>>> At 2012-04-24 19:36:11,"Chaitanya kumar CH" <chaitanya.ch@gmail.com>
>>> wrote:
>>>
>>> weixj,
>>>
>>> You can use the -projwin option of gdal_translate utility.
>>>
>>> http://www.gdal.org/gdal_translate.html
>>>
>>> 2012/4/24 weixj <weixj2003ld@163.com>
>>>
>>>>  I have a tiff file and four points' coordination(and they are in the
>>>> range of the min and max value of the coordination of the tiff file,I want
>>>> to generate a new tiff file,and the edge of it is constructed by the four
>>>> points.
>>>>
>>>> Thank you  in advance.
>>>>
>>>>
>>>> ------------------------------
>>>> ??Lofter??????????? <http://www.lofter.com/>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>>
>>>
>>> ------------------------------
>>> ??Lofter??????????? <http://www.lofter.com/>
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>>
>> ------------------------------
>> ??Lofter??????????? <http://www.lofter.com/>
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120502/e2e37aab/attachment-0001.html
From even.rouault at mines-paris.org  Wed May  2 14:14:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May  2 14:11:38 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4F9A9384.3090804@gmail.com>
References: <4F9A9384.3090804@gmail.com>
Message-ID: <201205022014.51343.even.rouault@mines-paris.org>

> What would it take to adopt this RFC?

Ari,

I'm pretty satisfied with the current state of the RFC. From a recent 
discussion with Frank, I think he has perhaps some comments to add ?

I've looked at the latest version of the patch. A few comments :

* You should not use GetFeaturesRead() to know how many features have been 
iterated to compute the progress rate. It is not a reliable way of knowing it, 
since it is up to the driver to do the proper incrementation (and many drivers 
don't : this counter is usually only used for debugging purposes). But the 
more fundamental reason is that this counter is global to the session. So if 
the user has already iterated over the input layer before calling the new 
functions, the counter will not be 0. Also, some implementations of 
GetFeatureCount() (actually the default non specialized implementation of 
GetFeatureCount()) might also cause the counter to be incremented. So I'd 
suggest maintaining your own local counter instead.

* At the end of the loop, it would also be appropriate to call the progress 
callback with a progress rate of 1.0. That will make, for example, the output 
of the GDALTermProgress implementation to be nicer.

* In set_filter_from(), pLayer->SetSpatialFilter(geom-
>Intersection(pGeometryExistingFilter)) likely leaks the passed geometry. You 
should assign it to a temporary variable and delete it afterwards.

* In the code block triggered if the pfnProgress returns FALSE, there should 
be a delete x;

* In the Doxygen, it would be appropriate to mention that these routines use 
geometric operations that are only available if GDAL is compiled with GEOS 
support.


I've also read your note in the RFC about performance. It is interesting to 
see that envelope computation is the limiting factor when the method layer is 
in memory. It is an interesting track for a later optimization where envelope 
would be cached instead of being computed each time. Spatial indexing would 
also do the trick. It reminds me that a few years ago I've added a 
cpl_quad_tree.cpp implementation that is a direct transposition of the  
shapelib implementation, but not tied with shapefiles. It has never been 
seriously used AFAIR, but it could perhaps be a starting point to do in-memory 
spatial indexing.

Even
From jason.roberts at duke.edu  Wed May  2 14:56:18 2012
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed May  2 14:56:48 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4F97FCFA.7060905@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
Message-ID: <000601cd2895$42ba0da0$c82e28e0$@roberts@duke.edu>

Hi Ari,

I have been following this proposal with interest. I have a couple of
questions; sorry to bring them up late in the RFC process.

It looks like the inspiration for this was the Overlay toolset in the ArcGIS
geoprocessing toolbox. That is nice for people like me who regularly work
with ArcGIS; it increases the possibility of being able to replace
automation currently based on ArcGIS with something based on GDAL. Assuming
you are aiming for basic parity with ArcGIS:

1. Would you consider implementing a Symmetrical Difference method? It is
the only one from the ArcGIS Overlay toolset that you did not implement
(except Spatial Join, which does not really apply here).

2. In ArcGIS, the Intersect and Union tools support multiple inputs. Is that
something you would consider implementing? I don't have a strong opinion on
this. It is occasionally necessary to use all of these tools with multiple
inputs (e.g. erase several layers from a starting layer). I'm not
immediately sure why ESRI elected to support multiple inputs for two of
their tools but not more of them.

3. Will these functions be exposed from the Python bindings?

Best regards,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Wednesday, April 25, 2012 9:33 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] RFC 39

Folks,

I'll start a new thread for this RFC.

I've uploaded a new patch, which hopefully corrects the issues Even brought
up. Below are comments.

I've not added the Append or Buffer methods, which basically work on just
one layer. I believe such functionality is simple enough to create using
feature iteration.

Ari

the patch: 
http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.pat
ch


On 04/19/2012 02:04 PM, Even Rouault wrote:
>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>
> Ari,
>
> I have reviewed your proposal and it looks interesting. Here are my 
> observations
> :
>
> 1) Argument order. A.Operation(B, C) where C is the target layer 
> doesn't seem very intuitive, but I'm not sure I have something 
> fundamentally better to propose. An alternate solution would be to 
> make the operations static methods, and have 
> OGRLayer::Operation(output_layer, input_layer, method_layer) ? I'd 
> suggest at least to rename B as method_layer and C as result_layer to be
more explicit on the role of each argument.


I've changed the names to Input, Method and Output. For example the layer
object pointers are pLayerInput etc.



> 2) It would perhaps be prudent to add a char** papszOptions argument as a
> provision for future needs.

I've added it.


> 3) I'm wondering if it would not be more appropriate to separate the
creation of
> fields of the output layer in a separate method that might be called, or
not,
> before the real operation. For example IdentifyPrepare() for Identity().
Of
> course this would complicate a bit the implementation of the operation
because
> it will need to look for which fields exist in the output layer and how
the
> input and method layer fields map to those fields. But the establishment
of the
> mapping and the setting of the output feature from the fields of the input
and
> method features could be made in common methods
>
>     This way the XXXXXPrepare() would not need to check that CreateField()
> succeeds because XXXX() could work with an output layer with no fields at
all.
> Checking that there are not fields with same name would not be necessary
(in
> that case the value from B would override the value from A).


I've created a new method into Feature class: SetFieldsFrom, which uses 
a map. It is similar to SetFrom, which uses a map. (thus the field copy 
could be optimized into one function)

The layer methods now first check the existence of fields in the result 
layer. If there are fields, it is assumed that that is what the user 
wants. If there are no fields, a complete set of fields are created for 
fields in input and method layers (in some cases only input layer). This 
behavior could later be overridden with options.


> 4) It would be nice to able to provide a progress callback to get progress
> report (and also being able to interrupt) for such potentially long
operations.


I agree. I've added these to the API, but I've not yet added the calls. 
This requires for example the inclusion of gdal.h into ogr_api.h.


> 5) A few remarks on the implementation itself (only code review, no actual
> testing). You can likely wait for comments from others before heading to
fix
> them...
>
> a) CreateField() and CreateFeature() return code should be tested and
acted
> upon. Likely interrupt the whole process ? (not strictly necessary for
> CreateField() is you adopt the idea developed in point 3))


I've added tests. I've used the "goto done;" style, where done is a 
label just before the release of used resources and exit from the 
method. I've tried to be careful to leave no memory leaks.


> b) I think there's something wrong with OGRGeometry *Bfilter =
> B->GetSpatialFilter(). When you later do
> B->SetSpatialFilter(x_geom->Intersection(Bfilter)), I believe it will
destroy
> the previous installed filter, and thus Bfilter will point to a garbage
object.
> You likely need to clone the initial spatial filter (and delete it after
> restoring it at the end of the method)


Yes. I checked all calls to GetSpatialFilter and now clone the initial 
one and destroy it at the end.


> c) Each time you do a new OGRFeature(), you need do delete it (after the
call to
> CreateFeature()).

They are now deleted.

> d) GetGeometryRef() can return NULL (even for spatial layers). Currently
it is
> never checked, and there are a few places where it is dereferenced.

The validity of the geometry is checked. If there is no geometry, the 
next feature is fetched.

> e) Lines like x_geom_diff = x_geom_diff->Difference(y_geom) (or geom =
> geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely
need
> to do :
> 	OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_geom);
> 	delete x_geom_diff;
> 	x_geom_diff = x_geom_diff_new;

Fixed.

> f) The object returned by GetNextFeature() should be deleted after use.

It is deleted, even if the iteration is continued.

> g) You should be careful with SetGeometryDirectly(). You cannot pass
directly
> the geometry belonging to another feature because this will segfault when
you
> free the said feature.

Fixed

> h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature
that
> was just created and never set before (all the lines z->UnsetField(...) )

The unnecessary code is removed.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From oldtopos at novacell.com  Wed May  2 15:07:00 2012
From: oldtopos at novacell.com (the Old Topo Depot)
Date: Wed May  2 15:07:06 2012
Subject: [gdal-dev] MrSID driver, JPEG2000 format files and world files
In-Reply-To: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
References: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
Message-ID: <CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>

I have found that the existing MrSID gdal driver will ignore j2w files for
geotransform information if present with JPEG2000 formatted files.

While symlinking the j2w files to sdw is an option, adding code to look for
and use a j2w files is simple and seemingly useful.

I added and tested such code to

trunk <http://trac.osgeo.org/gdal/browser/trunk>/gdal<http://trac.osgeo.org/gdal/browser/trunk/gdal>
/frmts <http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts>/mrsid<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/mrsid>
/mrsiddataset.cpp<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/mrsid/mrsiddataset.cpp>

at line 1311

|| GDALReadWorldFile( GetDescription(), ".j2w",
                      adfGeoTransform )


and this change appears to do the right thing with j2w files.  Please
consider integrating this change into the next gdal release.

Best,


-- 
John Novak





-- 
John Novak
Novacell Technologies and the Old Topo Depot
http://www.novacell.com
585-OLD-TOPOS (585-653-8676)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120502/c31b216a/attachment.html
From even.rouault at mines-paris.org  Wed May  2 15:46:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May  2 15:43:03 2012
Subject: [gdal-dev] MrSID driver, JPEG2000 format files and world files
In-Reply-To: <CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>
References: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
	<CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>
Message-ID: <201205022146.16674.even.rouault@mines-paris.org>

Le mercredi 02 mai 2012 21:07:00, the Old Topo Depot a ?crit :
> I have found that the existing MrSID gdal driver will ignore j2w files for
> geotransform information if present with JPEG2000 formatted files.
> 
> While symlinking the j2w files to sdw is an option, adding code to look for
> and use a j2w files is simple and seemingly useful.
> 
Would you mind filing a ticket in http://trac.osgeo.org/gdal/newticket about 
that ? Thanks

> 
> Best,
From oldtopos at novacell.com  Wed May  2 16:45:42 2012
From: oldtopos at novacell.com (the Old Topo Depot)
Date: Wed May  2 16:46:17 2012
Subject: [gdal-dev] MrSID driver, JPEG2000 format files and world files
In-Reply-To: <201205022146.16674.even.rouault@mines-paris.org>
References: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
	<CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>
	<201205022146.16674.even.rouault@mines-paris.org>
Message-ID: <CAEDOfzgfd5ccbu4OCQQM45UoNFH0ZS7Z0W3kHkpXfv7=FPeJtQ@mail.gmail.com>

Ticket http://trac.osgeo.org/gdal/ticket/4651 opened with patch file
attached.

HTH

Best,

On Wed, May 2, 2012 at 3:46 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 02 mai 2012 21:07:00, the Old Topo Depot a ?crit :
> > I have found that the existing MrSID gdal driver will ignore j2w files
> for
> > geotransform information if present with JPEG2000 formatted files.
> >
> > While symlinking the j2w files to sdw is an option, adding code to look
> for
> > and use a j2w files is simple and seemingly useful.
> >
> Would you mind filing a ticket in http://trac.osgeo.org/gdal/newticketabout
> that ? Thanks
>
> >
> > Best,
>



-- 
John Novak
Novacell Technologies and the Old Topo Depot
http://www.novacell.com
585-OLD-TOPOS (585-653-8676)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120502/1ca39b5e/attachment.html
From jukka.rahkonen at mmmtike.fi  Thu May  3 01:43:22 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu May  3 01:44:04 2012
Subject: [gdal-dev] Re: MrSID driver, JPEG2000 format files and world files
References: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
	<CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>
	<201205022146.16674.even.rouault@mines-paris.org>
	<CAEDOfzgfd5ccbu4OCQQM45UoNFH0ZS7Z0W3kHkpXfv7=FPeJtQ@mail.gmail.com>
Message-ID: <loom.20120503T073858-881@post.gmane.org>

the Old Topo Depot <oldtopos <at> novacell.com> writes:

> 
> 
> Ticket?http://trac.osgeo.org/gdal/ticket/4651 opened with patch file attached.
> 

Because it is a GDAL driver it might be good to find also .wld world files if it
does not find them yet.

-Jukka Rahkonen-

From ari.jolma at gmail.com  Thu May  3 02:34:57 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May  3 02:38:01 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
Message-ID: <4FA22711.7070902@gmail.com>

On 05/02/2012 09:56 PM, Jason Roberts wrote:
> Hi Ari,
>
> I have been following this proposal with interest. I have a couple of
> questions; sorry to bring them up late in the RFC process.
>
> It looks like the inspiration for this was the Overlay toolset in the ArcGIS
> geoprocessing toolbox. That is nice for people like me who regularly work
> with ArcGIS; it increases the possibility of being able to replace
> automation currently based on ArcGIS with something based on GDAL. Assuming
> you are aiming for basic parity with ArcGIS:

ArcGIS is an example which is assumably pretty good, and I'm not aware 
of any standards or better ones so that's the reason. Personally, I 
don't use ArcGIS, so I can't say much.

>
> 1. Would you consider implementing a Symmetrical Difference method? It is
> the only one from the ArcGIS Overlay toolset that you did not implement
> (except Spatial Join, which does not really apply here).

I'd be happy to. Can you point me to a description of the method?

>
> 2. In ArcGIS, the Intersect and Union tools support multiple inputs. Is that
> something you would consider implementing? I don't have a strong opinion on
> this. It is occasionally necessary to use all of these tools with multiple
> inputs (e.g. erase several layers from a starting layer). I'm not
> immediately sure why ESRI elected to support multiple inputs for two of
> their tools but not more of them.

We've chosen to implement these tools as C = A.method(B), i.e., they 
always produce a result layer and not change A nor B (the C has to be 
created before the actual method). For Update, Clip and Erase it might 
make sense (as the schema of the result layer is only that of input 
layer) to have the method be an in-place method: A.method(B), i.e., 
change A. Then it would be trivial to write

for all B in (a list of method layers)
     A.method(B)

I would in fact support this syntax as it is more versatile and saves 
memory in some cases. The downside is that it does not work with 
read-only data sources and thus is probably not suitable for GDAL.

In Intersection, Union and Identity the schema of the result may contain 
attributes from the method layer, thus IMO they do not fit so well into 
the in-place syntax.

In the current syntax, to run a method on several method layers:

for all B in (a list of method layers)
     C = new Layer like A
     A.method(B, C)
     delete A
     A = C

It really seems to me that this would be practical only for memory 
layers. Maybe the support for multiple layers should be left for the 
command line tool or scripting language layer.

For example I'll probably build a support into the Perl bindings for the 
in-place syntax.

>
> 3. Will these functions be exposed from the Python bindings?

They are already, if you apply the patch. The test code is written in 
Python.

Thanks for the interest.

Ari

>
> Best regards,
>
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
> Sent: Wednesday, April 25, 2012 9:33 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] RFC 39
>
> Folks,
>
> I'll start a new thread for this RFC.
>
> I've uploaded a new patch, which hopefully corrects the issues Even brought
> up. Below are comments.
>
> I've not added the Append or Buffer methods, which basically work on just
> one layer. I believe such functionality is simple enough to create using
> feature iteration.
>
> Ari
>
> the patch:
> http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.pat
> ch
>
>
> On 04/19/2012 02:04 PM, Even Rouault wrote:
>>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>>
>> Ari,
>>
>> I have reviewed your proposal and it looks interesting. Here are my
>> observations
>> :
>>
>> 1) Argument order. A.Operation(B, C) where C is the target layer
>> doesn't seem very intuitive, but I'm not sure I have something
>> fundamentally better to propose. An alternate solution would be to
>> make the operations static methods, and have
>> OGRLayer::Operation(output_layer, input_layer, method_layer) ? I'd
>> suggest at least to rename B as method_layer and C as result_layer to be
> more explicit on the role of each argument.
>
>
> I've changed the names to Input, Method and Output. For example the layer
> object pointers are pLayerInput etc.
>
>
>
>> 2) It would perhaps be prudent to add a char** papszOptions argument as a
>> provision for future needs.
> I've added it.
>
>
>> 3) I'm wondering if it would not be more appropriate to separate the
> creation of
>> fields of the output layer in a separate method that might be called, or
> not,
>> before the real operation. For example IdentifyPrepare() for Identity().
> Of
>> course this would complicate a bit the implementation of the operation
> because
>> it will need to look for which fields exist in the output layer and how
> the
>> input and method layer fields map to those fields. But the establishment
> of the
>> mapping and the setting of the output feature from the fields of the input
> and
>> method features could be made in common methods
>>
>>      This way the XXXXXPrepare() would not need to check that CreateField()
>> succeeds because XXXX() could work with an output layer with no fields at
> all.
>> Checking that there are not fields with same name would not be necessary
> (in
>> that case the value from B would override the value from A).
>
> I've created a new method into Feature class: SetFieldsFrom, which uses
> a map. It is similar to SetFrom, which uses a map. (thus the field copy
> could be optimized into one function)
>
> The layer methods now first check the existence of fields in the result
> layer. If there are fields, it is assumed that that is what the user
> wants. If there are no fields, a complete set of fields are created for
> fields in input and method layers (in some cases only input layer). This
> behavior could later be overridden with options.
>
>
>> 4) It would be nice to able to provide a progress callback to get progress
>> report (and also being able to interrupt) for such potentially long
> operations.
>
>
> I agree. I've added these to the API, but I've not yet added the calls.
> This requires for example the inclusion of gdal.h into ogr_api.h.
>
>
>> 5) A few remarks on the implementation itself (only code review, no actual
>> testing). You can likely wait for comments from others before heading to
> fix
>> them...
>>
>> a) CreateField() and CreateFeature() return code should be tested and
> acted
>> upon. Likely interrupt the whole process ? (not strictly necessary for
>> CreateField() is you adopt the idea developed in point 3))
>
> I've added tests. I've used the "goto done;" style, where done is a
> label just before the release of used resources and exit from the
> method. I've tried to be careful to leave no memory leaks.
>
>
>> b) I think there's something wrong with OGRGeometry *Bfilter =
>> B->GetSpatialFilter(). When you later do
>> B->SetSpatialFilter(x_geom->Intersection(Bfilter)), I believe it will
> destroy
>> the previous installed filter, and thus Bfilter will point to a garbage
> object.
>> You likely need to clone the initial spatial filter (and delete it after
>> restoring it at the end of the method)
>
> Yes. I checked all calls to GetSpatialFilter and now clone the initial
> one and destroy it at the end.
>
>
>> c) Each time you do a new OGRFeature(), you need do delete it (after the
> call to
>> CreateFeature()).
> They are now deleted.
>
>> d) GetGeometryRef() can return NULL (even for spatial layers). Currently
> it is
>> never checked, and there are a few places where it is dereferenced.
> The validity of the geometry is checked. If there is no geometry, the
> next feature is fetched.
>
>> e) Lines like x_geom_diff = x_geom_diff->Difference(y_geom) (or geom =
>> geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely
> need
>> to do :
>> 	OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_geom);
>> 	delete x_geom_diff;
>> 	x_geom_diff = x_geom_diff_new;
> Fixed.
>
>> f) The object returned by GetNextFeature() should be deleted after use.
> It is deleted, even if the iteration is continued.
>
>> g) You should be careful with SetGeometryDirectly(). You cannot pass
> directly
>> the geometry belonging to another feature because this will segfault when
> you
>> free the said feature.
> Fixed
>
>> h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature
> that
>> was just created and never set before (all the lines z->UnsetField(...) )
> The unnecessary code is removed.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Thu May  3 02:47:12 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May  3 02:51:00 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <201205022014.51343.even.rouault@mines-paris.org>
References: <4F9A9384.3090804@gmail.com>
	<201205022014.51343.even.rouault@mines-paris.org>
Message-ID: <4FA229F0.8030303@gmail.com>

On 05/02/2012 09:14 PM, Even Rouault wrote:
> I've also read your note in the RFC about performance. It is 
> interesting to see that envelope computation is the limiting factor 
> when the method layer is in memory. It is an interesting track for a 
> later optimization where envelope would be cached instead of being 
> computed each time. Spatial indexing would also do the trick. It 
> reminds me that a few years ago I've added a cpl_quad_tree.cpp 
> implementation that is a direct transposition of the shapelib 
> implementation, but not tied with shapefiles. It has never been 
> seriously used AFAIR, but it could perhaps be a starting point to do 
> in-memory spatial indexing. Even 

I'll prepare a new patch later to address the issues I clipped away from 
this reply.

About the performance. I believe that at least in my test case a 
pre-computation of the envelope of the whole method layer (the effective 
part in fact, as there was an attribute filter) could speed up the 
computation into half and I was intending to test that. I'll take a look 
at the quad tree code too - it would be useful when the method layer has 
more effective features.

The performance is anyway an internal issues and the main thing is to 
get the API and logic acceptable.

Ari

From even.rouault at mines-paris.org  Thu May  3 03:08:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May  3 03:08:38 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4FA229F0.8030303@gmail.com>
References: <4F9A9384.3090804@gmail.com>
	<201205022014.51343.even.rouault@mines-paris.org>
	<4FA229F0.8030303@gmail.com>
Message-ID: <1336028898.4fa22ee220cf6@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

>
> The performance is anyway an internal issues and the main thing is to
> get the API and logic acceptable.

Yes, that's what I meant. Those ideas can be kept in mind for later
improvements.

>
> Ari
>
>


From p.halls at york.ac.uk  Thu May  3 04:27:31 2012
From: p.halls at york.ac.uk (Peter Halls)
Date: Thu May  3 04:34:17 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4FA22711.7070902@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
	<4FA22711.7070902@gmail.com>
Message-ID: <CADEnnOOzPp8FtzXYvaDE_68GTcfqoHSEeH55q3XtAVKj9MghAg@mail.gmail.com>

Ari,

    as a user (and teacher of users), I would urge you to keep to the model
where the output is always a new object (actually the same as ArcGIS),
rather than consider modifying an input for any of these spatial
operations.  That automatically solves the read-only input issue.

Best wishes,

Peter

On 3 May 2012 07:34, Ari Jolma <ari.jolma@gmail.com> wrote:

> On 05/02/2012 09:56 PM, Jason Roberts wrote:
>
>> Hi Ari,
>>
>> I have been following this proposal with interest. I have a couple of
>> questions; sorry to bring them up late in the RFC process.
>>
>> It looks like the inspiration for this was the Overlay toolset in the
>> ArcGIS
>> geoprocessing toolbox. That is nice for people like me who regularly work
>> with ArcGIS; it increases the possibility of being able to replace
>> automation currently based on ArcGIS with something based on GDAL.
>> Assuming
>> you are aiming for basic parity with ArcGIS:
>>
>
> ArcGIS is an example which is assumably pretty good, and I'm not aware of
> any standards or better ones so that's the reason. Personally, I don't use
> ArcGIS, so I can't say much.
>
>
>> 1. Would you consider implementing a Symmetrical Difference method? It is
>> the only one from the ArcGIS Overlay toolset that you did not implement
>> (except Spatial Join, which does not really apply here).
>>
>
> I'd be happy to. Can you point me to a description of the method?
>
>
>> 2. In ArcGIS, the Intersect and Union tools support multiple inputs. Is
>> that
>> something you would consider implementing? I don't have a strong opinion
>> on
>> this. It is occasionally necessary to use all of these tools with multiple
>> inputs (e.g. erase several layers from a starting layer). I'm not
>> immediately sure why ESRI elected to support multiple inputs for two of
>> their tools but not more of them.
>>
>
> We've chosen to implement these tools as C = A.method(B), i.e., they
> always produce a result layer and not change A nor B (the C has to be
> created before the actual method). For Update, Clip and Erase it might make
> sense (as the schema of the result layer is only that of input layer) to
> have the method be an in-place method: A.method(B), i.e., change A. Then it
> would be trivial to write
>
> for all B in (a list of method layers)
>    A.method(B)
>
> I would in fact support this syntax as it is more versatile and saves
> memory in some cases. The downside is that it does not work with read-only
> data sources and thus is probably not suitable for GDAL.
>
> In Intersection, Union and Identity the schema of the result may contain
> attributes from the method layer, thus IMO they do not fit so well into the
> in-place syntax.
>
> In the current syntax, to run a method on several method layers:
>
> for all B in (a list of method layers)
>    C = new Layer like A
>    A.method(B, C)
>    delete A
>    A = C
>
> It really seems to me that this would be practical only for memory layers.
> Maybe the support for multiple layers should be left for the command line
> tool or scripting language layer.
>
> For example I'll probably build a support into the Perl bindings for the
> in-place syntax.
>
>
>> 3. Will these functions be exposed from the Python bindings?
>>
>
> They are already, if you apply the patch. The test code is written in
> Python.
>
> Thanks for the interest.
>
> Ari
>
>
>> Best regards,
>>
>> Jason
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.**org<gdal-dev-bounces@lists.osgeo.org>
>> [mailto:gdal-dev-bounces@**lists.osgeo.org<gdal-dev-bounces@lists.osgeo.org>]
>> On Behalf Of Ari Jolma
>> Sent: Wednesday, April 25, 2012 9:33 AM
>> To: gdal-dev@lists.osgeo.org
>> Subject: [gdal-dev] RFC 39
>>
>> Folks,
>>
>> I'll start a new thread for this RFC.
>>
>> I've uploaded a new patch, which hopefully corrects the issues Even
>> brought
>> up. Below are comments.
>>
>> I've not added the Append or Buffer methods, which basically work on just
>> one layer. I believe such functionality is simple enough to create using
>> feature iteration.
>>
>> Ari
>>
>> the patch:
>> http://trac.osgeo.org/gdal/**attachment/wiki/rfc39_ogr_**
>> layer_algebra/rfc39.pat<http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.pat>
>> ch
>>
>>
>> On 04/19/2012 02:04 PM, Even Rouault wrote:
>>
>>> http://trac.osgeo.org/gdal/**wiki/rfc39_ogr_layer_algebra<http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra>
>>>>
>>>>  Ari,
>>>
>>> I have reviewed your proposal and it looks interesting. Here are my
>>> observations
>>> :
>>>
>>> 1) Argument order. A.Operation(B, C) where C is the target layer
>>> doesn't seem very intuitive, but I'm not sure I have something
>>> fundamentally better to propose. An alternate solution would be to
>>> make the operations static methods, and have
>>> OGRLayer::Operation(output_**layer, input_layer, method_layer) ? I'd
>>> suggest at least to rename B as method_layer and C as result_layer to be
>>>
>> more explicit on the role of each argument.
>>
>>
>> I've changed the names to Input, Method and Output. For example the layer
>> object pointers are pLayerInput etc.
>>
>>
>>
>>  2) It would perhaps be prudent to add a char** papszOptions argument as a
>>> provision for future needs.
>>>
>> I've added it.
>>
>>
>>  3) I'm wondering if it would not be more appropriate to separate the
>>>
>> creation of
>>
>>> fields of the output layer in a separate method that might be called, or
>>>
>> not,
>>
>>> before the real operation. For example IdentifyPrepare() for Identity().
>>>
>> Of
>>
>>> course this would complicate a bit the implementation of the operation
>>>
>> because
>>
>>> it will need to look for which fields exist in the output layer and how
>>>
>> the
>>
>>> input and method layer fields map to those fields. But the establishment
>>>
>> of the
>>
>>> mapping and the setting of the output feature from the fields of the
>>> input
>>>
>> and
>>
>>> method features could be made in common methods
>>>
>>>     This way the XXXXXPrepare() would not need to check that
>>> CreateField()
>>> succeeds because XXXX() could work with an output layer with no fields at
>>>
>> all.
>>
>>> Checking that there are not fields with same name would not be necessary
>>>
>> (in
>>
>>> that case the value from B would override the value from A).
>>>
>>
>> I've created a new method into Feature class: SetFieldsFrom, which uses
>> a map. It is similar to SetFrom, which uses a map. (thus the field copy
>> could be optimized into one function)
>>
>> The layer methods now first check the existence of fields in the result
>> layer. If there are fields, it is assumed that that is what the user
>> wants. If there are no fields, a complete set of fields are created for
>> fields in input and method layers (in some cases only input layer). This
>> behavior could later be overridden with options.
>>
>>
>>  4) It would be nice to able to provide a progress callback to get
>>> progress
>>> report (and also being able to interrupt) for such potentially long
>>>
>> operations.
>>
>>
>> I agree. I've added these to the API, but I've not yet added the calls.
>> This requires for example the inclusion of gdal.h into ogr_api.h.
>>
>>
>>  5) A few remarks on the implementation itself (only code review, no
>>> actual
>>> testing). You can likely wait for comments from others before heading to
>>>
>> fix
>>
>>> them...
>>>
>>> a) CreateField() and CreateFeature() return code should be tested and
>>>
>> acted
>>
>>> upon. Likely interrupt the whole process ? (not strictly necessary for
>>> CreateField() is you adopt the idea developed in point 3))
>>>
>>
>> I've added tests. I've used the "goto done;" style, where done is a
>> label just before the release of used resources and exit from the
>> method. I've tried to be careful to leave no memory leaks.
>>
>>
>>  b) I think there's something wrong with OGRGeometry *Bfilter =
>>> B->GetSpatialFilter(). When you later do
>>> B->SetSpatialFilter(x_geom->**Intersection(Bfilter)), I believe it will
>>>
>> destroy
>>
>>> the previous installed filter, and thus Bfilter will point to a garbage
>>>
>> object.
>>
>>> You likely need to clone the initial spatial filter (and delete it after
>>> restoring it at the end of the method)
>>>
>>
>> Yes. I checked all calls to GetSpatialFilter and now clone the initial
>> one and destroy it at the end.
>>
>>
>>  c) Each time you do a new OGRFeature(), you need do delete it (after the
>>>
>> call to
>>
>>> CreateFeature()).
>>>
>> They are now deleted.
>>
>>  d) GetGeometryRef() can return NULL (even for spatial layers). Currently
>>>
>> it is
>>
>>> never checked, and there are a few places where it is dereferenced.
>>>
>> The validity of the geometry is checked. If there is no geometry, the
>> next feature is fetched.
>>
>>  e) Lines like x_geom_diff = x_geom_diff->Difference(y_**geom) (or geom =
>>> geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely
>>>
>> need
>>
>>> to do :
>>>        OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_**geom);
>>>        delete x_geom_diff;
>>>        x_geom_diff = x_geom_diff_new;
>>>
>> Fixed.
>>
>>  f) The object returned by GetNextFeature() should be deleted after use.
>>>
>> It is deleted, even if the iteration is continued.
>>
>>  g) You should be careful with SetGeometryDirectly(). You cannot pass
>>>
>> directly
>>
>>> the geometry belonging to another feature because this will segfault when
>>>
>> you
>>
>>> free the said feature.
>>>
>> Fixed
>>
>>  h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature
>>>
>> that
>>
>>> was just created and never set before (all the lines z->UnsetField(...) )
>>>
>> The unnecessary code is removed.
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120503/09d02a5c/attachment-0001.html
From ari.jolma at gmail.com  Thu May  3 05:12:15 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May  3 05:12:31 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <CADEnnOOzPp8FtzXYvaDE_68GTcfqoHSEeH55q3XtAVKj9MghAg@mail.gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
	<4FA22711.7070902@gmail.com>
	<CADEnnOOzPp8FtzXYvaDE_68GTcfqoHSEeH55q3XtAVKj9MghAg@mail.gmail.com>
Message-ID: <4FA24BEF.8060504@gmail.com>

On 05/03/2012 11:27 AM, Peter Halls wrote:
> Ari,
>
>     as a user (and teacher of users), I would urge you to keep to the 
> model where the output is always a new object (actually the same as 
> ArcGIS), rather than consider modifying an input for any of these 
> spatial operations.  That automatically solves the read-only input issue.

Peter,

At least Perl, probably some other languages too, detect between the two 
usages:

C = A.method(B)

and

A.method(B)

and adjust accordingly. Compare for example to

C = A + B

and

A += B

which is commonly supported in programming languages. In principle, I 
would support (as I wrote) implementing only the in-place version, and 
allow the new object syntax and implement it using the in-place for a 
new object. But, as I wrote, GDAL is often geared towards the former 
paradigm and datasets are often read-only. So, in this case we'll go the 
other way. I want to support the latter paradigm (in-place) in Perl 
bindings - it is often more useful in interactive work, where one may 
typically manipulate a dataset in several steps.

Best regards,

Ari

From oldtopos at novacell.com  Thu May  3 09:33:10 2012
From: oldtopos at novacell.com (the Old Topo Depot)
Date: Thu May  3 09:33:22 2012
Subject: [gdal-dev] Re: MrSID driver, JPEG2000 format files and world files
In-Reply-To: <loom.20120503T073858-881@post.gmane.org>
References: <CAEDOfzgE4wCLGNHMypwyCPbFyCzSViaF1VGbC=P-U3oF787Erg@mail.gmail.com>
	<CAEDOfzgpgwmX5jZzzUFyZcr2=DqA8YfnZJ_JYJgag3YqEpuObw@mail.gmail.com>
	<201205022146.16674.even.rouault@mines-paris.org>
	<CAEDOfzgfd5ccbu4OCQQM45UoNFH0ZS7Z0W3kHkpXfv7=FPeJtQ@mail.gmail.com>
	<loom.20120503T073858-881@post.gmane.org>
Message-ID: <CAEDOfzgwGrCbXHcZBG+6V8r2XFGtFugTqF=S2g+PNvWppUWHsg@mail.gmail.com>

Including the patch, the driver tries to find .sdw, .sidw, .wld, and .j2w
files if no geotransform is found in the base file.


On Thu, May 3, 2012 at 1:43 AM, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>wrote:

> the Old Topo Depot <oldtopos <at> novacell.com> writes:
>
> >
> >
> > Ticket http://trac.osgeo.org/gdal/ticket/4651 opened with patch file
> attached.
> >
>
> Because it is a GDAL driver it might be good to find also .wld world files
> if it
> does not find them yet.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
John Novak
Novacell Technologies and the Old Topo Depot
http://www.novacell.com
585-OLD-TOPOS (585-653-8676)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120503/cc58d3cb/attachment.html
From ari.jolma at gmail.com  Thu May  3 10:39:54 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May  3 10:40:36 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <201205022014.51343.even.rouault@mines-paris.org>
References: <4F9A9384.3090804@gmail.com>
	<201205022014.51343.even.rouault@mines-paris.org>
Message-ID: <4FA298BA.9020503@gmail.com>

Even,

I've uploaded a version, which fixes these. I added a note that GEOS is 
required, as these probably segfault without it (the methods return 
NULLs and not geometries).

I added a simple test against a pre-computed layer envelope, and it 
speeds up the computation in my test case ~30%. Still the most of the 
time is spent in OGRLineString::getEnvelope as it goes through all 
linestrings of the input layer.

Ari

On 05/02/2012 09:14 PM, Even Rouault wrote:
>> What would it take to adopt this RFC?
> Ari,
>
> I'm pretty satisfied with the current state of the RFC. From a recent
> discussion with Frank, I think he has perhaps some comments to add ?
>
> I've looked at the latest version of the patch. A few comments :
>
> * You should not use GetFeaturesRead() to know how many features have been
> iterated to compute the progress rate. It is not a reliable way of knowing it,
> since it is up to the driver to do the proper incrementation (and many drivers
> don't : this counter is usually only used for debugging purposes). But the
> more fundamental reason is that this counter is global to the session. So if
> the user has already iterated over the input layer before calling the new
> functions, the counter will not be 0. Also, some implementations of
> GetFeatureCount() (actually the default non specialized implementation of
> GetFeatureCount()) might also cause the counter to be incremented. So I'd
> suggest maintaining your own local counter instead.
>
> * At the end of the loop, it would also be appropriate to call the progress
> callback with a progress rate of 1.0. That will make, for example, the output
> of the GDALTermProgress implementation to be nicer.
>
> * In set_filter_from(), pLayer->SetSpatialFilter(geom-
>> Intersection(pGeometryExistingFilter)) likely leaks the passed geometry. You
> should assign it to a temporary variable and delete it afterwards.
>
> * In the code block triggered if the pfnProgress returns FALSE, there should
> be a delete x;
>
> * In the Doxygen, it would be appropriate to mention that these routines use
> geometric operations that are only available if GDAL is compiled with GEOS
> support.
>
>
> I've also read your note in the RFC about performance. It is interesting to
> see that envelope computation is the limiting factor when the method layer is
> in memory. It is an interesting track for a later optimization where envelope
> would be cached instead of being computed each time. Spatial indexing would
> also do the trick. It reminds me that a few years ago I've added a
> cpl_quad_tree.cpp implementation that is a direct transposition of the
> shapelib implementation, but not tied with shapefiles. It has never been
> seriously used AFAIR, but it could perhaps be a starting point to do in-memory
> spatial indexing.
>
> Even

From even.rouault at mines-paris.org  Thu May  3 11:12:59 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May  3 11:13:51 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4FA298BA.9020503@gmail.com>
References: <4F9A9384.3090804@gmail.com>
	<201205022014.51343.even.rouault@mines-paris.org>
	<4FA298BA.9020503@gmail.com>
Message-ID: <1336057979.4fa2a07b29f8e@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

> Even,
>
> I've uploaded a version, which fixes these. I added a note that GEOS is
> required, as these probably segfault without it (the methods return
> NULLs and not geometries).

Hi,

Hum, I didn't think at crashes. I thought that the algorithm would just nicely
fail. But yes indeed you are right, reviewing the code, there would be NULL
derefs, so I'd suggest adding a preliminary call to
OGRGeometryFactory::haveGEOS() to exit early if it returns FALSE. This will save
crashes to people running the test suite on a build without GEOS support.

I'm also wondering if there would not be cases where the GEOS routines could
return NULL geometries. Looking at the implementation of GEOSIntersection_r()
(and other methods) in http://svn.osgeo.org/geos/trunk/capi/geos_ts_c.cpp , in
case an exception is thrown in GEOS C++ code, it will be caught by the GEOS C
API and returned as a NULL pointer to the caller. So I suspect that if invalid
geometries are processed, we could get a NULL geometry, and it might be
appropriate to handle it gracefully.

Looking quickly at the patch, I think it would be for the occurrences of
OGRGeometry *x_geom_diff_new (2 places) in OGRLayer::Union(), same in
::Identity(), in ::Update() and ::Clip().

Best regards,

Even
From ari.jolma at gmail.com  Thu May  3 11:17:18 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May  3 11:17:30 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
Message-ID: <4FA2A17E.6000206@gmail.com>

On 05/02/2012 09:56 PM, Jason Roberts wrote:
> 1. Would you consider implementing a Symmetrical Difference method? It is
> the only one from the ArcGIS Overlay toolset that you did not implement
> (except Spatial Join, which does not really apply here).

I've added SymDifference method to the patch. It is basically an 
exclusive OR.

Ari


From jgrn at illinois.edu  Thu May  3 11:35:57 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu May  3 11:36:19 2012
Subject: [gdal-dev] Which formats are just flat binary files plus a header?
Message-ID: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>

Gdalers:

I'm working on some parallel processing routines via rgdal and R, but
thought this question was better answered here.  I'm trying to find out
which raster formats are simply a flat binary file an a header.  ENVI is
the one that springs to mind.  We're trying to work up which files can be
"natively" written as flat binaries where all we have to do after the file
is written is setup the correct header.  Thanks!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120503/2f74ed6a/attachment.html
From newmanw10 at gmail.com  Thu May  3 11:38:10 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Thu May  3 11:39:22 2012
Subject: [gdal-dev] Get SRID from image file
Message-ID: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>

I have some image files (geotiff's) and I would like to store some of the
metadata about the image files in oracle spatial.  Is there any way to get
the SRID for an image file?

Thanks,
Billy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120503/69bcea39/attachment.html
From ivan.lucena at princeton-ma.us  Thu May  3 11:56:50 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu May  3 11:57:33 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR2V0IFNSSUQgZnJvbSBpbWFnZSBmaWxl?=
In-Reply-To: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
Message-ID: <20120503155650.22370.qmail@s466.sureserver.com>


Billy,

The GeoRaster driver will do that for you. It takes the EPSG Authority code from the input file and use it as SRID when loading the image to the database sdo_georaster object. For more info: http://gdal.org/frmt_georaster.html

Regards,

Ivan



>  -------Original Message-------
>  From: Billy Newman <newmanw10@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Get SRID from image file
>  Sent: May 03 '12 10:38
>  
>  I have some image files (geotiff's) and I would like to store some of
>  the metadata about the image files in oracle spatial.? Is there any way to
>  get the SRID for an image file?
>  
>  Thanks,
>  Billy
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From marlam at marlam.de  Thu May  3 12:41:44 2012
From: marlam at marlam.de (Martin Lambers)
Date: Thu May  3 12:51:14 2012
Subject: [gdal-dev] Which formats are just flat binary files plus a header?
In-Reply-To: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
References: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
Message-ID: <20120503184144.11786c1d@daffy>

Hi Jonathan!

On Thu, 3 May 2012 10:35:57 -0500, Jonathan Greenberg wrote:
> I'm working on some parallel processing routines via rgdal and R, but
> thought this question was better answered here.  I'm trying to find
> out which raster formats are simply a flat binary file an a header.
> ENVI is the one that springs to mind.  We're trying to work up which
> files can be "natively" written as flat binaries where all we have to
> do after the file is written is setup the correct header.  Thanks!

GTA is header + flat binary if compression is switched off.

Martin
From Sjur.A.Kolberg at sintef.no  Thu May  3 16:38:20 2012
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Thu May  3 16:39:55 2012
Subject: [gdal-dev] Which formats are just flat binary files plus a header?
In-Reply-To: <20120503184144.11786c1d@daffy>
References: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
	<20120503184144.11786c1d@daffy>
Message-ID: <72251B925CE10A478606EEAC6AA683BE5A38240174@SINTEFEXMBX01.sintef.no>

Jonathan,

The same also for the IDRISI .rst + .rdc format.
An example header (.rdc) ASCII file looks like below.
The short ref. system item names a file in a library supplied with the IDRISI distribution.
The GDAL Idrisi driver recognises a subset of these 

file format : Idrisi Raster A.1
file title  : 
data type   : real
file type   : binary
columns     : 130
rows        : 200
ref. system : utm-32n
ref. units  : m
unit dist.  : 1
min. X      : 400000.0000000
max. X      : 530000.0000000
min. Y      : 6660000.0000000
max. Y      : 6860000.0000000
pos'n error : unspecified
resolution  : 1000.0000000
min. value  : 0
max. value  : 0.66993666
display min : 0
display max : 0.66993666
value units : unspecified
value error : unspecified
flag value  : -9999
flag def'n  : Missing data
legend cats : 0
lineage     : 
comment     :


Sjur K :-)

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Martin Lambers
> Sent: 3. mai 2012 18:42
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Which formats are just flat binary files plus a
> header?
> 
> Hi Jonathan!
> 
> On Thu, 3 May 2012 10:35:57 -0500, Jonathan Greenberg wrote:
> > I'm working on some parallel processing routines via rgdal and R, but
> > thought this question was better answered here.  I'm trying to find
> > out which raster formats are simply a flat binary file an a header.
> > ENVI is the one that springs to mind.  We're trying to work up which
> > files can be "natively" written as flat binaries where all we have to
> > do after the file is written is setup the correct header.  Thanks!
> 
> GTA is header + flat binary if compression is switched off.
> 
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jason.roberts at duke.edu  Thu May  3 17:04:23 2012
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu May  3 17:04:40 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4FA22711.7070902@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
	<4FA22711.7070902@gmail.com>
Message-ID: <001f01cd2970$513de820$f3b9b860$@roberts@duke.edu>

Hi Ari,

Thanks for your response, and for implementing Symmetrical Difference.

Regarding multiple inputs to Intersect and Union. ArcGIS does not use an
in-place pattern either. Instead, rather than accepting two layers as input,
it accepts an unlimited number of layers, performs the intersection or union
of all of them, and creates one (new) output. If you are curious as to the
details of their API, check here:

http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//0008000000090
00000

As I mentioned, I do not have a strong opinion about the value of accepting
multiple inputs. The obvious workaround is to call the same method in a
loop. The main obvious downside of that is having to create and manage the
temporary outputs. I haven't thought about it enough to know whether there
are other disadvantages (e.g. performance). I just thought I should mention
it to you, in case you thought of some or were desiring to achieve parity
with ArcGIS.

Are you looking for additional tools to implement besides Symmetrical
Difference? I could suggest more that are in ArcGIS that would be valuable
to see in GDAL.

Best,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Thursday, May 03, 2012 2:35 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RFC 39

On 05/02/2012 09:56 PM, Jason Roberts wrote:
> Hi Ari,
>
> I have been following this proposal with interest. I have a couple of 
> questions; sorry to bring them up late in the RFC process.
>
> It looks like the inspiration for this was the Overlay toolset in the 
> ArcGIS geoprocessing toolbox. That is nice for people like me who 
> regularly work with ArcGIS; it increases the possibility of being able 
> to replace automation currently based on ArcGIS with something based 
> on GDAL. Assuming you are aiming for basic parity with ArcGIS:

ArcGIS is an example which is assumably pretty good, and I'm not aware of
any standards or better ones so that's the reason. Personally, I don't use
ArcGIS, so I can't say much.

>
> 1. Would you consider implementing a Symmetrical Difference method? It is
> the only one from the ArcGIS Overlay toolset that you did not implement
> (except Spatial Join, which does not really apply here).

I'd be happy to. Can you point me to a description of the method?

>
> 2. In ArcGIS, the Intersect and Union tools support multiple inputs. Is
that
> something you would consider implementing? I don't have a strong opinion
on
> this. It is occasionally necessary to use all of these tools with multiple
> inputs (e.g. erase several layers from a starting layer). I'm not
> immediately sure why ESRI elected to support multiple inputs for two of
> their tools but not more of them.

We've chosen to implement these tools as C = A.method(B), i.e., they 
always produce a result layer and not change A nor B (the C has to be 
created before the actual method). For Update, Clip and Erase it might 
make sense (as the schema of the result layer is only that of input 
layer) to have the method be an in-place method: A.method(B), i.e., 
change A. Then it would be trivial to write

for all B in (a list of method layers)
     A.method(B)

I would in fact support this syntax as it is more versatile and saves 
memory in some cases. The downside is that it does not work with 
read-only data sources and thus is probably not suitable for GDAL.

In Intersection, Union and Identity the schema of the result may contain 
attributes from the method layer, thus IMO they do not fit so well into 
the in-place syntax.

In the current syntax, to run a method on several method layers:

for all B in (a list of method layers)
     C = new Layer like A
     A.method(B, C)
     delete A
     A = C

It really seems to me that this would be practical only for memory 
layers. Maybe the support for multiple layers should be left for the 
command line tool or scripting language layer.

For example I'll probably build a support into the Perl bindings for the 
in-place syntax.

>
> 3. Will these functions be exposed from the Python bindings?

They are already, if you apply the patch. The test code is written in 
Python.

Thanks for the interest.

Ari

>
> Best regards,
>
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
> Sent: Wednesday, April 25, 2012 9:33 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] RFC 39
>
> Folks,
>
> I'll start a new thread for this RFC.
>
> I've uploaded a new patch, which hopefully corrects the issues Even
brought
> up. Below are comments.
>
> I've not added the Append or Buffer methods, which basically work on just
> one layer. I believe such functionality is simple enough to create using
> feature iteration.
>
> Ari
>
> the patch:
>
http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.pat
> ch
>
>
> On 04/19/2012 02:04 PM, Even Rouault wrote:
>>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>>
>> Ari,
>>
>> I have reviewed your proposal and it looks interesting. Here are my
>> observations
>> :
>>
>> 1) Argument order. A.Operation(B, C) where C is the target layer
>> doesn't seem very intuitive, but I'm not sure I have something
>> fundamentally better to propose. An alternate solution would be to
>> make the operations static methods, and have
>> OGRLayer::Operation(output_layer, input_layer, method_layer) ? I'd
>> suggest at least to rename B as method_layer and C as result_layer to be
> more explicit on the role of each argument.
>
>
> I've changed the names to Input, Method and Output. For example the layer
> object pointers are pLayerInput etc.
>
>
>
>> 2) It would perhaps be prudent to add a char** papszOptions argument as a
>> provision for future needs.
> I've added it.
>
>
>> 3) I'm wondering if it would not be more appropriate to separate the
> creation of
>> fields of the output layer in a separate method that might be called, or
> not,
>> before the real operation. For example IdentifyPrepare() for Identity().
> Of
>> course this would complicate a bit the implementation of the operation
> because
>> it will need to look for which fields exist in the output layer and how
> the
>> input and method layer fields map to those fields. But the establishment
> of the
>> mapping and the setting of the output feature from the fields of the
input
> and
>> method features could be made in common methods
>>
>>      This way the XXXXXPrepare() would not need to check that
CreateField()
>> succeeds because XXXX() could work with an output layer with no fields at
> all.
>> Checking that there are not fields with same name would not be necessary
> (in
>> that case the value from B would override the value from A).
>
> I've created a new method into Feature class: SetFieldsFrom, which uses
> a map. It is similar to SetFrom, which uses a map. (thus the field copy
> could be optimized into one function)
>
> The layer methods now first check the existence of fields in the result
> layer. If there are fields, it is assumed that that is what the user
> wants. If there are no fields, a complete set of fields are created for
> fields in input and method layers (in some cases only input layer). This
> behavior could later be overridden with options.
>
>
>> 4) It would be nice to able to provide a progress callback to get
progress
>> report (and also being able to interrupt) for such potentially long
> operations.
>
>
> I agree. I've added these to the API, but I've not yet added the calls.
> This requires for example the inclusion of gdal.h into ogr_api.h.
>
>
>> 5) A few remarks on the implementation itself (only code review, no
actual
>> testing). You can likely wait for comments from others before heading to
> fix
>> them...
>>
>> a) CreateField() and CreateFeature() return code should be tested and
> acted
>> upon. Likely interrupt the whole process ? (not strictly necessary for
>> CreateField() is you adopt the idea developed in point 3))
>
> I've added tests. I've used the "goto done;" style, where done is a
> label just before the release of used resources and exit from the
> method. I've tried to be careful to leave no memory leaks.
>
>
>> b) I think there's something wrong with OGRGeometry *Bfilter =
>> B->GetSpatialFilter(). When you later do
>> B->SetSpatialFilter(x_geom->Intersection(Bfilter)), I believe it will
> destroy
>> the previous installed filter, and thus Bfilter will point to a garbage
> object.
>> You likely need to clone the initial spatial filter (and delete it after
>> restoring it at the end of the method)
>
> Yes. I checked all calls to GetSpatialFilter and now clone the initial
> one and destroy it at the end.
>
>
>> c) Each time you do a new OGRFeature(), you need do delete it (after the
> call to
>> CreateFeature()).
> They are now deleted.
>
>> d) GetGeometryRef() can return NULL (even for spatial layers). Currently
> it is
>> never checked, and there are a few places where it is dereferenced.
> The validity of the geometry is checked. If there is no geometry, the
> next feature is fetched.
>
>> e) Lines like x_geom_diff = x_geom_diff->Difference(y_geom) (or geom =
>> geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely
> need
>> to do :
>> 	OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_geom);
>> 	delete x_geom_diff;
>> 	x_geom_diff = x_geom_diff_new;
> Fixed.
>
>> f) The object returned by GetNextFeature() should be deleted after use.
> It is deleted, even if the iteration is continued.
>
>> g) You should be careful with SetGeometryDirectly(). You cannot pass
> directly
>> the geometry belonging to another feature because this will segfault when
> you
>> free the said feature.
> Fixed
>
>> h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature
> that
>> was just created and never set before (all the lines z->UnsetField(...) )
> The unnecessary code is removed.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From pcorti at gmail.com  Thu May  3 17:31:16 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Thu May  3 17:32:49 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4fa2f2e5.c4c8e00a.7c1d.42a5SMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
	<4FA22711.7070902@gmail.com>
	<4fa2f2e5.c4c8e00a.7c1d.42a5SMTPIN_ADDED@mx.google.com>
Message-ID: <CAHXrU-Kzq1oFmNJqapGa07Pg3=h8-C98npr58v-8dfJwFcc5aw@mail.gmail.com>

On Thu, May 3, 2012 at 11:04 PM, Jason Roberts <jason.roberts@duke.edu> wrote:
> As I mentioned, I do not have a strong opinion about the value of accepting
> multiple inputs. The obvious workaround is to call the same method in a
> loop. The main obvious downside of that is having to create and manage the
> temporary outputs. I haven't thought about it enough to know whether there
> are other disadvantages (e.g. performance). I just thought I should mention
> it to you, in case you thought of some or were desiring to achieve parity
> with ArcGIS.
>

Hi Jason
personally I would leave to GDAL the most basic functionality.
Pretty sure that after it there will be many tools, including Desktop
GIS, giving that feature (batch processing).

Btw, Ari, really cool stuff, looking forward to it, thanks for the
great effort ;)
cheers
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From newmanw10 at gmail.com  Thu May  3 18:22:39 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Thu May  3 18:22:55 2012
Subject: [gdal-dev] Get SRID from image file
In-Reply-To: <20120503155650.22370.qmail@s466.sureserver.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
	<20120503155650.22370.qmail@s466.sureserver.com>
Message-ID: <B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>

I did not know that existed.  A couple quick questions. 

1.  I do not want to store the entire raster file in the database. I just want to store the metadata, i.e. the bounding info and projection of the image file. The GeoRaster driver documentation made it seem like the entire raster file is being stored in the database. 

2. I am running java processes with either jdbc or hibernate. Can I use this driver?  Or is this only a command line utility?

Thanks!

On May 3, 2012, at 9:56 AM, "Ivan Lucena" <ivan.lucena@princeton-ma.us> wrote:

> 
> Billy,
> 
> The GeoRaster driver will do that for you. It takes the EPSG Authority code from the input file and use it as SRID when loading the image to the database sdo_georaster object. For more info: http://gdal.org/frmt_georaster.html
> 
> Regards,
> 
> Ivan
> 
> 
> 
>> -------Original Message-------
>> From: Billy Newman <newmanw10@gmail.com>
>> To: gdal-dev@lists.osgeo.org
>> Subject: [gdal-dev] Get SRID from image file
>> Sent: May 03 '12 10:38
>> 
>> I have some image files (geotiff's) and I would like to store some of
>> the metadata about the image files in oracle spatial.  Is there any way to
>> get the SRID for an image file?
>> 
>> Thanks,
>> Billy
>> 
>> --------------------
>> _______________________________________________
>> gdal-dev mailing list
>> [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From pcorti at gmail.com  Thu May  3 19:14:00 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Thu May  3 19:15:07 2012
Subject: [gdal-dev] Get SRID from image file
In-Reply-To: <B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
	<20120503155650.22370.qmail@s466.sureserver.com>
	<B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
Message-ID: <CAHXrU-+SX3=-xSjea+nMS6m1uQdCAf9xa1JsWBiZt4JCiUmXLA@mail.gmail.com>

On Fri, May 4, 2012 at 12:22 AM, Billy Newman <newmanw10@gmail.com> wrote:
> I did not know that existed. ?A couple quick questions.
>
> 1. ?I do not want to store the entire raster file in the database. I just want to store the metadata, i.e. the bounding info and projection of the image file. The GeoRaster driver documentation made it seem like the entire raster file is being stored in the database.
>
> 2. I am running java processes with either jdbc or hibernate. Can I use this driver? ?Or is this only a command line utility?
>
> Thanks!
>

GDAL is both an API and a set of command line utilities (written from
the API itself).
The API is exposed by several languages binding, Java included.

You could try to do the following (code in Python, but easily
convertible to Java):

>>> from osgeo import gdal, osr
>>> ds = gdal.Open('landcover.img', 0)
>>> prj = ds.GetProjectionRef()
>>> srs = osr.SpatialReference(prj.title())
>>> print srs.GetAuthorityCode('GEOGCS') # or use PROJCS if the srs is projected

cheers
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From warmerdam at pobox.com  Thu May  3 20:20:51 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May  3 20:21:45 2012
Subject: [gdal-dev] Which formats are just flat binary files plus a header?
In-Reply-To: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
References: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
Message-ID: <CA+YzLBdDoe3OSuOcscHU-RkzKDtZJUe60831Yh8aLwKtGeZB9w@mail.gmail.com>

On Thu, May 3, 2012 at 8:35 AM, Jonathan Greenberg <jgrn@illinois.edu> wrote:
> Gdalers:
>
> I'm working on some parallel processing routines via rgdal and R, but
> thought this question was better answered here. ?I'm trying to find out
> which raster formats are simply a flat binary file an a header. ?ENVI is the
> one that springs to mind. ?We're trying to work up which files can be
> "natively" written as flat binaries where all we have to do after the file
> is written is setup the correct header. ?Thanks!

Jonathan,

In addition to those mentioned, my favor GDAL supported raster
raster files + ascii header are:

PAux (PCI with .aux - my design!)
EHdr (ESRI BIL with .hdr)
VRT  (you can use a GDAL VRT to describe a raster raster file with
*full* GDAL metadata, etc)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ari.jolma at gmail.com  Fri May  4 01:16:54 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri May  4 01:17:16 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4fa2f2e5.c7cbe00a.39ce.ffffbf43SMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
	<4fa1835d.c7cbe00a.227a.7c79SMTPIN_ADDED@mx.google.com>
	<4FA22711.7070902@gmail.com>
	<4fa2f2e5.c7cbe00a.39ce.ffffbf43SMTPIN_ADDED@mx.google.com>
Message-ID: <CAEWPGn6kRoe=ag5g65Zettp3fFU09tiuETSW1kkAr78h9iwQvQ@mail.gmail.com>

2012/5/4 Jason Roberts <jason.roberts@duke.edu>


> it accepts an unlimited number of layers, performs the intersection or
> union
> of all of them, and creates one (new) output.



>   The main obvious downside of that is having to create and manage the
> temporary outputs.



Currently the output layer is not checked for existing features and new
features are just added into it. So, it is possible to call the method for
new layers re-using the same output layer. The schema should not be a
problem as it is created in the first call (if it has not been set by the
user) and in subsequent calls the feature attributes are set by name (doing
type conversions if required and done by feature copy).


Are you looking for additional tools to implement besides Symmetrical
> Difference? I could suggest more that are in ArcGIS that would be valuable
> to see in GDAL.
>


Please suggest. I'm at least interested in what people use and find useful.

Ari
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/5c6744aa/attachment.html
From lhomme.xavier at gmail.com  Fri May  4 06:55:31 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Fri May  4 06:56:03 2012
Subject: [gdal-dev] Request for Spatial Operator function
Message-ID: <CACqzBMyPpwW7Hohc=P8k1t-u8gDGuH6HGNCXh1F5JQ_5geYXDg@mail.gmail.com>

Hi

 I'm using a WFS Driver in a C# project. I would like  to add a new
function to the OGRWFSLayer like SetSpatialOperator()
and modify the filter part of the function OGRWFSLayer::MakeGetFeatureURL
if a spatial operator has been set.
 then I need to call the SetSpatialOperator in C#.

 IWhat is the best approach do to this :
   - make a request to de ogr dev team
   - try to code the function by myself and send the result to the
community


best regards
xavier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/dc0ed388/attachment.html
From ari.jolma at gmail.com  Fri May  4 07:23:04 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri May  4 07:23:32 2012
Subject: [gdal-dev] Request for Spatial Operator function
In-Reply-To: <CACqzBMyPpwW7Hohc=P8k1t-u8gDGuH6HGNCXh1F5JQ_5geYXDg@mail.gmail.com>
References: <CACqzBMyPpwW7Hohc=P8k1t-u8gDGuH6HGNCXh1F5JQ_5geYXDg@mail.gmail.com>
Message-ID: <4FA3BC18.1040503@gmail.com>

On 05/04/2012 01:55 PM, xavier lhomme wrote:
> Hi
>
>  I'm using a WFS Driver in a C# project. I would like  to add a new 
> function to the OGRWFSLayer like SetSpatialOperator()
> and modify the filter part of the function 
> OGRWFSLayer::MakeGetFeatureURL if a spatial operator has been set.

Xavier,

To me it looks like maybe there should be a new OGRLayer class method 
SetSpatialOperatorFilter, which would then be also in the C API and 
bindings (e.g., C#).

Then, calling that method from C#, would have the effect that the URL 
would contain the appropriate filter.

Offering a patch would harm nobody so please go ahead, at least I'm 
interested in this. Getting the feature into trunk may need a RFC.

Ari

>  then I need to call the SetSpatialOperator in C#.
>
>  IWhat is the best approach do to this :
>    - make a request to de ogr dev team
>    - try to code the function by myself and send the result to the 
> community
>
>
> best regards
> xavier
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/2ad04974/attachment.html
From ivan.lucena at princeton-ma.us  Fri May  4 07:23:32 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri May  4 07:23:59 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR2V0IFNSSUQgZnJvbSBpbWFnZSBmaWxl?=
In-Reply-To: <B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
	<20120503155650.22370.qmail@s466.sureserver.com>
	<B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
Message-ID: <20120504112332.9955.qmail@s466.sureserver.com>

Hi Billy,

>  
>  I did not know that existed.??A couple quick questions.
>  
>  1.??I do not want to store the entire raster file in the database. I just want to store the metadata, i.e. the bounding 
info and projection of the image file. The GeoRaster driver documentation made it seem like the entire raster file is 
being stored in the database.
>  
>  2. I am running java processes with either jdbc or hibernate. Can I use this driver???Or is this only a command line 
utility?
>

Yes,

If you want to use this driver (GDAL/GEOR) you would need to load the data into the database, once it is there you 
can take advantage of the functions available for you in Oracle Spatial, or in the RDBMS itself like in any other data 
type.

You can use GDAL Java API as you normally do for any other GDAL supported formats. The only difference is that 
instead of passing a file name on GDAL.Open() you pass a connection string like "usr/pwd@db,tab,col,<where 
clause>".  If the where clause return a unique sdo_georaster object you are ready to go, if it returns more than one the 
driver returns a list  of SUBDATASETS (BTW, that is how QGIS browse for sdo_georaster using the Oracle Raster Plugin) 
then you parse the SUBDATASETS names as find each individual images.

Best Regards,

Ivan 
  
>  Thanks!
>  
>  On May 3, 2012, at 9:56 AM, "Ivan Lucena" <ivan.lucena@princeton-ma.us> wrote:
>  
>  >
>  > Billy,
>  >
>  > The GeoRaster driver will do that for you. It takes the EPSG Authority code from the input file and use it as SRID 
when loading the image to the database sdo_georaster object. For more info: http://gdal.org/frmt_georaster.html
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >
>  >
>  >> -------Original Message-------
>  >> From: Billy Newman <newmanw10@gmail.com>
>  >> To: gdal-dev@lists.osgeo.org
>  >> Subject: [gdal-dev] Get SRID from image file
>  >> Sent: May 03 '12 10:38
>  >>
>  >> I have some image files (geotiff's) and I would like to store some of
>  >> the metadata about the image files in oracle spatial.??Is there any way to
>  >> get the SRID for an image file?
>  >>
>  >> Thanks,
>  >> Billy
>  >>
>  >> --------------------
>  >> _______________________________________________
>  >> gdal-dev mailing list
>  >> [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  >> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From jgrn at illinois.edu  Fri May  4 14:42:03 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri May  4 14:42:57 2012
Subject: [gdal-dev] Which formats are just flat binary files plus a header?
In-Reply-To: <CA+YzLBdDoe3OSuOcscHU-RkzKDtZJUe60831Yh8aLwKtGeZB9w@mail.gmail.com>
References: <CABG0rfuxUoJf_VKisXTjGhPr=OGY539xY-ZRYhz=BM+BANsUOQ@mail.gmail.com>
	<CA+YzLBdDoe3OSuOcscHU-RkzKDtZJUe60831Yh8aLwKtGeZB9w@mail.gmail.com>
Message-ID: <CABG0rfu0AfVH-G14x2O2L5QhOvEBZPGwJwvR11ktnZ0NLDHbTw@mail.gmail.com>

Thanks!  This was really helpful!  Cheers!

--j

On Thu, May 3, 2012 at 7:20 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On Thu, May 3, 2012 at 8:35 AM, Jonathan Greenberg <jgrn@illinois.edu>
> wrote:
> > Gdalers:
> >
> > I'm working on some parallel processing routines via rgdal and R, but
> > thought this question was better answered here.  I'm trying to find out
> > which raster formats are simply a flat binary file an a header.  ENVI is
> the
> > one that springs to mind.  We're trying to work up which files can be
> > "natively" written as flat binaries where all we have to do after the
> file
> > is written is setup the correct header.  Thanks!
>
> Jonathan,
>
> In addition to those mentioned, my favor GDAL supported raster
> raster files + ascii header are:
>
> PAux (PCI with .aux - my design!)
> EHdr (ESRI BIL with .hdr)
> VRT  (you can use a GDAL VRT to describe a raster raster file with
> *full* GDAL metadata, etc)
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/db6ab8e2/attachment.html
From newmanw10 at gmail.com  Fri May  4 18:39:36 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Fri May  4 18:40:54 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
Message-ID: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>

I ran a quick test and confirmed that gdal.AutoCreateWarpedVRT is returning
different results than osr.CoordinateTransformation.

I.E. I opened a file using:
Dataset dataset = gdal.Open("/images/image.tif");

I grabbed the corner point and used
osr.CoordinateTransformation.TransformPoint(), to transform the point into
EPSG:4326.

I warped the dataset using gdal.AutoCreateWarpedVRT, grabbed the corner
point and the corner point was a little different.

I am not sure if that is expected behavior or not.  Hopefully I am just
missing some static files and one of the transformations was not quite
right.  I tried all the different sampling algos available for the
AutoCreateWarpedVRT and that did not make a huge difference.

Is warp using a different method to transform the points?  If so is that
transformation available via the API?

I understand that not all calcs may be exact between these two but I would
expect the corner point to be almost exact.

Any ideas?

Thanks,
Billy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/29a61bca/attachment.html
From warmerdam at pobox.com  Sat May  5 01:23:35 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May  5 01:24:26 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
Message-ID: <4FA4B957.5020005@pobox.com>

On 12-05-04 03:39 PM, Billy Newman wrote:
> I ran a quick test and confirmed that gdal.AutoCreateWarpedVRT is returning
> different results than osr.CoordinateTransformation.
>
> I.E. I opened a file using:
> Dataset dataset = gdal.Open("/images/image.tif");
>
> I grabbed the corner point and used
> osr.CoordinateTransformation.TransformPoint(), to transform the point into
> EPSG:4326.
>
> I warped the dataset using gdal.AutoCreateWarpedVRT, grabbed the corner point
> and the corner point was a little different.
>
> I am not sure if that is expected behavior or not.  Hopefully I am just missing
> some static files and one of the transformations was not quite right.  I tried
> all the different sampling algos available for the AutoCreateWarpedVRT and that
> did not make a huge difference.
>
> Is warp using a different method to transform the points?  If so is that
> transformation available via the API?
>
> I understand that not all calcs may be exact between these two but I would
> expect the corner point to be almost exact.

Billy,

Generally speaking the extents of the warped VRT will be somewhat larger
than the original to capture the irregular shape of the source image after
warping into the target coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jzl5325 at psu.edu  Fri May  4 21:16:51 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Sat May  5 01:27:47 2012
Subject: [gdal-dev] Upgraded to 1.9 - Python Bindings Error
Message-ID: <CA+bfmPsEJP5eTOV09OJVyhp3sJw4CrCcsjB+uz6JjySFFUQ8XA@mail.gmail.com>

List,

Just upgraded to 1.9.0 on my windows 7 machine and I can no longer access
gdal via the python bindings.  Command line (ogr2ogr, gdalinfo, etc. are
functioning as expected).  Specifically, running 'from osgeo import gdal',
returns:

File "C:\Python26\ArcGIS10.0\lib\site-packages\osgeo\__init.py__", line 17,
in
swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, descritpion)
ImportError: DLL load failed: The specified procedure could not be found.

GDAL 1.8 was working wonderfully with ArcGIS.  No environmental variables
were altered between installations.  Path still contains C:\Program Files
(x86)\GDAL and GDAL_DATA is stills set to C:\Program Files
(x86)\GDAL\gdal-data.

I did try adding the PYTHONPATH variable and setting that to
C:\Python26\ArcGIS10.0, but no change in the error.

GDAL1.9 and the python bindings were downloaded from
http://www.gisinternals.com/sdk/ (the MSVC2010-32bit stable version).

Oddly, the gdal python utilities are functioning.  That is gdal2tiles.py
for example.

Any suggestions appreciated.  I assume a PATH error that I am missing, but
am stumped.  The mailing list archives were sparse on this error...

Thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120504/3de18333/attachment.html
From newmanw10 at gmail.com  Sat May  5 12:02:32 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sat May  5 12:03:23 2012
Subject: [gdal-dev] Get SRID from image file
In-Reply-To: <20120504112332.9955.qmail@s466.sureserver.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
	<20120503155650.22370.qmail@s466.sureserver.com>
	<B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
	<20120504112332.9955.qmail@s466.sureserver.com>
Message-ID: <60431EDD-9B8F-4C04-8BC8-CE1F04777A76@gmail.com>

Thanks Ivan. 

Unfortunately I was not being very clear. The process in which I am indexing the image files (storing their metadata in the database) is a java process. It is a complex application in which we keep track of the changes in a directory structure such that we can index new files dropped in or remove old files that have been removed. I was wondering if I could use the driver inside my java process, but it does not sound like it. 

Sounds like I might be able to try Palo's example and use the java bindings to extract the SRID from the images projection string. 

Thanks guys!

Sent from my iPhone

On May 4, 2012, at 5:23 AM, "Ivan Lucena" <ivan.lucena@princeton-ma.us> wrote:

> Hi Billy,
> 
>> 
>> I did not know that existed.  A couple quick questions.
>> 
>> 1.  I do not want to store the entire raster file in the database. I just want to store the metadata, i.e. the bounding 
> info and projection of the image file. The GeoRaster driver documentation made it seem like the entire raster file is 
> being stored in the database.
>> 
>> 2. I am running java processes with either jdbc or hibernate. Can I use this driver?  Or is this only a command line 
> utility?
>> 
> 
> Yes,
> 
> If you want to use this driver (GDAL/GEOR) you would need to load the data into the database, once it is there you 
> can take advantage of the functions available for you in Oracle Spatial, or in the RDBMS itself like in any other data 
> type.
> 
> You can use GDAL Java API as you normally do for any other GDAL supported formats. The only difference is that 
> instead of passing a file name on GDAL.Open() you pass a connection string like "usr/pwd@db,tab,col,<where 
> clause>".  If the where clause return a unique sdo_georaster object you are ready to go, if it returns more than one the 
> driver returns a list  of SUBDATASETS (BTW, that is how QGIS browse for sdo_georaster using the Oracle Raster Plugin) 
> then you parse the SUBDATASETS names as find each individual images.
> 
> Best Regards,
> 
> Ivan 
> 
>> Thanks!
>> 
>> On May 3, 2012, at 9:56 AM, "Ivan Lucena" <ivan.lucena@princeton-ma.us> wrote:
>> 
>>> 
>>> Billy,
>>> 
>>> The GeoRaster driver will do that for you. It takes the EPSG Authority code from the input file and use it as SRID 
> when loading the image to the database sdo_georaster object. For more info: http://gdal.org/frmt_georaster.html
>>> 
>>> Regards,
>>> 
>>> Ivan
>>> 
>>> 
>>> 
>>>> -------Original Message-------
>>>> From: Billy Newman <newmanw10@gmail.com>
>>>> To: gdal-dev@lists.osgeo.org
>>>> Subject: [gdal-dev] Get SRID from image file
>>>> Sent: May 03 '12 10:38
>>>> 
>>>> I have some image files (geotiff's) and I would like to store some of
>>>> the metadata about the image files in oracle spatial.  Is there any way to
>>>> get the SRID for an image file?
>>>> 
>>>> Thanks,
>>>> Billy
>>>> 
>>>> --------------------
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>>>> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 

From newmanw10 at gmail.com  Sat May  5 16:19:26 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sat May  5 16:20:45 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <4FA4B957.5020005@pobox.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
Message-ID: <CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>

Frank,

Thanks so mush for the quick response.

One more quick question.  I am grabbing the metadata from my image files to
store in the database as an index of where my imagery lives.  I server out
my images in EPSG:4326 so that is how I would like to store the metadata
(bounding box) of the images.  However I am not really sure how to
calculate the metadata for EPSG:4326 in a timely manner.

I.E. if I just pull the metadata from the image file (without reading the
image itself) and convert the corner point to EPSG:4236 with
CoordinateTransformation I will save some time by not reading the file.
However when I serve out the image I need to use gdalwarp to warp the image
to EPSG:4326.  So the metadata I store in the db does not match the 'real'
warped image's metadata.

I can use gdalwarp on each image then pull the metadata but I assume that
amount of processing on each image just to get the metadata is going to be
a lot slower than just using CoordinateTransformation.

I index millions of images so the index (pulling the metadata) needs to be
somewhat fast.

Can you think of a way that I can get the same metadata as gdalwarp would
give for a warped image without actually warping the image?

Thanks

On Fri, May 4, 2012 at 11:23 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 12-05-04 03:39 PM, Billy Newman wrote:
>
>> I ran a quick test and confirmed that gdal.AutoCreateWarpedVRT is
>> returning
>> different results than osr.CoordinateTransformation.
>>
>> I.E. I opened a file using:
>> Dataset dataset = gdal.Open("/images/image.tif")**;
>>
>> I grabbed the corner point and used
>> osr.CoordinateTransformation.**TransformPoint(), to transform the point
>> into
>> EPSG:4326.
>>
>> I warped the dataset using gdal.AutoCreateWarpedVRT, grabbed the corner
>> point
>> and the corner point was a little different.
>>
>> I am not sure if that is expected behavior or not.  Hopefully I am just
>> missing
>> some static files and one of the transformations was not quite right.  I
>> tried
>> all the different sampling algos available for the AutoCreateWarpedVRT
>> and that
>> did not make a huge difference.
>>
>> Is warp using a different method to transform the points?  If so is that
>> transformation available via the API?
>>
>> I understand that not all calcs may be exact between these two but I would
>> expect the corner point to be almost exact.
>>
>
> Billy,
>
> Generally speaking the extents of the warped VRT will be somewhat larger
> than the original to capture the irregular shape of the source image after
> warping into the target coordinate system.
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120505/e830e8a6/attachment.html
From warmerdam at pobox.com  Sat May  5 17:15:57 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May  5 17:16:22 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
	<CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
Message-ID: <4FA5988D.6080305@pobox.com>

On 12-05-05 01:19 PM, Billy Newman wrote:
> Can you think of a way that I can get the same metadata as gdalwarp would give
> for a warped image without actually warping the image?

Billy,

Just open the .vrt and read the corners (that is compute them from the
size and geotransform).  There will not be any actual warping done just
to get this metadata from the .vrt but you will get the result
representative of the reprojected image.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From newmanw10 at gmail.com  Sat May  5 17:22:46 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sat May  5 17:24:13 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <4FA5988D.6080305@pobox.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
	<CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
	<4FA5988D.6080305@pobox.com>
Message-ID: <CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>

Still very confused.

I have a tiff file.  I want to get the metadata for that tiff but in
EPSG:4326, without actually warping the image.  I can use
CoordinateTransformation to do this, but again it gives me different
results than gdalwarp.

I will use gdalwarp later (realtime) to serve out an image.  But if the
metadata I store (from CoordinateTransformation) is different than the
metadata when I warp I will run into problems.

gdalwarp gives something like minLon = 30.300001234, but
CoordinateTransformation gives minLon = 30.29988787.  I want to gdalwarp
number but without actually warping the entire image.

I am not sure what .vrt file you are talking about.

Thanks again

On Sat, May 5, 2012 at 3:15 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 12-05-05 01:19 PM, Billy Newman wrote:
>
>> Can you think of a way that I can get the same metadata as gdalwarp would
>> give
>> for a warped image without actually warping the image?
>>
>
> Billy,
>
> Just open the .vrt and read the corners (that is compute them from the
> size and geotransform).  There will not be any actual warping done just
> to get this metadata from the .vrt but you will get the result
> representative of the reprojected image.
>
>
> Best regards,
>
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120505/e54ebc8a/attachment.html
From warmerdam at pobox.com  Sat May  5 18:40:47 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May  5 18:41:38 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
	<CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
	<4FA5988D.6080305@pobox.com>
	<CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>
Message-ID: <4FA5AC6F.3020109@pobox.com>

On 12-05-05 02:22 PM, Billy Newman wrote:
> Still very confused.
>
> I have a tiff file.  I want to get the metadata for that tiff but in EPSG:4326,
> without actually warping the image.  I can use CoordinateTransformation to do
> this, but again it gives me different results than gdalwarp.
>
> I will use gdalwarp later (realtime) to serve out an image.  But if the
> metadata I store (from CoordinateTransformation) is different than the metadata
> when I warp I will run into problems.
>
> gdalwarp gives something like minLon = 30.300001234, but
> CoordinateTransformation gives minLon = 30.29988787.  I want to gdalwarp number
> but without actually warping the entire image.
>
> I am not sure what .vrt file you are talking about.

Billy,

The subject line of this thread is about AutoCreateWarpedVRT().  I'm talking
about the VRT created by it.  Note that creating the VRT does not actually
do any work to warp the image - it just create a description of how the
warp would be done in the form of a pseudo-dataset - a VRT.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From newmanw10 at gmail.com  Sat May  5 21:20:19 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sat May  5 21:21:23 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <4FA5AC6F.3020109@pobox.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
	<CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
	<4FA5988D.6080305@pobox.com>
	<CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>
	<4FA5AC6F.3020109@pobox.com>
Message-ID: <CAD34qgkj2eUZX5gs+L593gmXbSVz=+JuzkGUs3k7apLDTGgMMw@mail.gmail.com>

Ok I think I get exactly what you are saying.

Dataset dataset = // image file dataset in wrong projection
Dataset epsg4326Dataset = gdal.AutoCreateWarpedVrt(....);
double[] geoTransform = epsg4326Dataset.GetGeoTransform();
// grab out the corner point in epsg:4326

So doing that won't actually warp the image right?  Only creating virtual
warped points when you ask for them?

Thanks again for all the help, I really appreciate it.

Billy

On Sat, May 5, 2012 at 4:40 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 12-05-05 02:22 PM, Billy Newman wrote:
>
>> Still very confused.
>>
>> I have a tiff file.  I want to get the metadata for that tiff but in
>> EPSG:4326,
>> without actually warping the image.  I can use CoordinateTransformation
>> to do
>> this, but again it gives me different results than gdalwarp.
>>
>> I will use gdalwarp later (realtime) to serve out an image.  But if the
>> metadata I store (from CoordinateTransformation) is different than the
>> metadata
>> when I warp I will run into problems.
>>
>> gdalwarp gives something like minLon = 30.300001234, but
>> CoordinateTransformation gives minLon = 30.29988787.  I want to gdalwarp
>> number
>> but without actually warping the entire image.
>>
>> I am not sure what .vrt file you are talking about.
>>
>
> Billy,
>
> The subject line of this thread is about AutoCreateWarpedVRT().  I'm
> talking
> about the VRT created by it.  Note that creating the VRT does not actually
> do any work to warp the image - it just create a description of how the
> warp would be done in the form of a pseudo-dataset - a VRT.
>
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120505/593c9c1a/attachment.html
From akshaygupta202 at gmail.com  Sun May  6 03:40:40 2012
From: akshaygupta202 at gmail.com (akshay gupta)
Date: Sun May  6 03:41:15 2012
Subject: [gdal-dev] Displaying vector files
Message-ID: <CAB_qc72k4jq_ejSx81qakP8tgp1oHZNjkOpAvbpaPmmAdCZwiA@mail.gmail.com>

Hi all,

I am writing an application to load vector maps/shape files using gdal/ogr
and display them onto a gui designed using Qt. I am  new to dealing with
vector files, I am not able to decide how to render them on GUI. Few
approaches that come to my mind are:
- To convert vector files to raster and display them as raster..
- To draw each shape in vector file one by one (i dont know how to do this,
I dont even know whether it would be even  possible this using GDAL/OGR, or
how complex this would be because in my case vector files can be very
complex)

The decision how to render vector files is very important for me, because
after displaying vector files i need to support some advanced features like
projection change, interactive selection, Geo-referencing etc.

Can any one who has worked on vector/gis stuff, tell me how this is usually
done and what Qt widget is used for displaying such data.

Thanks,
Akshay gupta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120506/dd9707ea/attachment.html
From jrepetto at free.fr  Sun May  6 04:17:53 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sun May  6 04:18:37 2012
Subject: [gdal-dev] Displaying vector files
In-Reply-To: <CAB_qc72k4jq_ejSx81qakP8tgp1oHZNjkOpAvbpaPmmAdCZwiA@mail.gmail.com>
References: <CAB_qc72k4jq_ejSx81qakP8tgp1oHZNjkOpAvbpaPmmAdCZwiA@mail.gmail.com>
Message-ID: <4FA633B1.3000305@free.fr>

On 05/06/12 09:40, akshay gupta wrote:
> Hi all,
>
> I am writing an application to load vector maps/shape files using
> gdal/ogr and display them onto a gui designed using Qt. I am  new to
> dealing with vector files, I am not able to decide how to render them on
> GUI. Few approaches that come to my mind are:
> - To convert vector files to raster and display them as raster..
> - To draw each shape in vector file one by one (i dont know how to do
> this, I dont even know whether it would be even  possible this using
> GDAL/OGR, or how complex this would be because in my case vector files
> can be very complex)
>
> The decision how to render vector files is very important for me,
> because after displaying vector files i need to support some advanced
> features like projection change, interactive selection, Geo-referencing etc.
>
> Can any one who has worked on vector/gis stuff, tell me how this is
> usually done and what Qt widget is used for displaying such data.
>
> Thanks,
> Akshay gupta


Hello,

You should have a look at the QGIS project : www.qgis.org
It displays vector data using GDAL/OGR and Qt, that's exactly what you 
want to do.

Jean-Claude

From etourigny.dev at gmail.com  Sun May  6 12:57:39 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun May  6 12:58:13 2012
Subject: [gdal-dev] gdal.AutoCreateWarpedVRT returning different results
	than osr.CoordinateTransformation
In-Reply-To: <CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>
References: <CAD34qgnfdLw8PYqywiSK=s49tkm62HiPx1xtExO--8ATXmWGpw@mail.gmail.com>
	<4FA4B957.5020005@pobox.com>
	<CAD34qgmU515J_HwkC7rBWWcEdv4Q7eYQBH9e7NHdN2vR3mV7vw@mail.gmail.com>
	<4FA5988D.6080305@pobox.com>
	<CAD34qg=6Lf0ibA70waMqLh5GYXHda+ijdt-kXJSCpO2tMfYhZA@mail.gmail.com>
Message-ID: <CA+TxYvP9sewpN9NJLPOp0TbpgAfwD-b5C7jDphD5h3-dBCUYZw@mail.gmail.com>

Billy,

You might consider creating a warped image with a larger pixel size (a
multiple of your real target size, say 3000m) to calculate the
"correct" extents and then throwing it away.

Etienne

On Sat, May 5, 2012 at 6:22 PM, Billy Newman <newmanw10@gmail.com> wrote:
> Still very confused.
>
> I have a tiff file.? I want to get the metadata for that tiff but in
> EPSG:4326, without actually warping the image.? I can use
> CoordinateTransformation to do this, but again it gives me different results
> than gdalwarp.
>
> I will use gdalwarp later (realtime) to serve out an image.? But if the
> metadata I store (from CoordinateTransformation) is different than the
> metadata when I warp I will run into problems.
>
> gdalwarp gives something like minLon = 30.300001234, but
> CoordinateTransformation gives minLon = 30.29988787.? I want to gdalwarp
> number but without actually warping the entire image.
>
> I am not sure what .vrt file you are talking about.
>
> Thanks again
>
>
> On Sat, May 5, 2012 at 3:15 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>>
>> On 12-05-05 01:19 PM, Billy Newman wrote:
>>>
>>> Can you think of a way that I can get the same metadata as gdalwarp would
>>> give
>>> for a warped image without actually warping the image?
>>
>>
>> Billy,
>>
>> Just open the .vrt and read the corners (that is compute them from the
>> size and geotransform). ?There will not be any actual warping done just
>> to get this metadata from the .vrt but you will get the result
>> representative of the reprojected image.
>>
>>
>> Best regards,
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://home.gdal.org/warmerda
>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at princeton-ma.us  Sun May  6 13:03:52 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sun May  6 13:04:42 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR2V0IFNSSUQgZnJvbSBpbWFnZSBmaWxl?=
In-Reply-To: <60431EDD-9B8F-4C04-8BC8-CE1F04777A76@gmail.com>
References: <CAD34qg=3Jg1dZKh5UHWo4gyXJEKzb4wa4-_MPSM4=ewG9tX5hw@mail.gmail.com>
	<20120503155650.22370.qmail@s466.sureserver.com>
	<B9FBA8E6-F8E4-47DB-B7A4-A16BF7F92447@gmail.com>
	<20120504112332.9955.qmail@s466.sureserver.com>
	<60431EDD-9B8F-4C04-8BC8-CE1F04777A76@gmail.com>
Message-ID: <20120506170352.28334.qmail@s466.sureserver.com>

Hi Billy,

>  Unfortunately I was not being very clear. The process in which I am indexing the image files (storing their metadata 
in the database) is a java process. It is a complex application in which we keep track of the changes in a directory 
structure such that we can index new files dropped in or remove old files that have been removed. I was wondering if I 
could use the driver inside my java process, but it does not sound like it.

You were perfectly clear. I question about it. I understand what you want to do. But let me be clear also that I was 
suggesting an alternative based on that you did not knew about the GeoRaster driver. And now, based on the other 
thread of messages about warping the image I would insist a little more. But this is not the forum for that. You could 
post question to the OTN Spatial Forum if you want and maybe find people with similar requirements.

Anyway,

>  Sounds like I might be able to try Palo's example and use the java bindings to extract the SRID from the images 
projection string.

Yes, if all you need is to query the SRID from the GeoTiff files that would be a job for the GTIFF driver and the GDAL 
SRS API. That should do the job.

My best regards,

Ivan
From etourigny.dev at gmail.com  Sun May  6 13:13:06 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun May  6 13:13:42 2012
Subject: [gdal-dev] Displaying vector files
In-Reply-To: <4FA633B1.3000305@free.fr>
References: <CAB_qc72k4jq_ejSx81qakP8tgp1oHZNjkOpAvbpaPmmAdCZwiA@mail.gmail.com>
	<4FA633B1.3000305@free.fr>
Message-ID: <CA+TxYvOtDjH7LfNeUNm61AajR-20aQZenYz7mNjSa3xEqCoRsw@mail.gmail.com>

You can also create a custom application based on QGis, if you do not
want the entire QGis interface or if you want to customize the UI (or
integrate it with your existing application).

Etienne

On Sun, May 6, 2012 at 5:17 AM, Jean-Claude Repetto <jrepetto@free.fr> wrote:
> On 05/06/12 09:40, akshay gupta wrote:
>>
>> Hi all,
>>
>> I am writing an application to load vector maps/shape files using
>> gdal/ogr and display them onto a gui designed using Qt. I am ?new to
>> dealing with vector files, I am not able to decide how to render them on
>> GUI. Few approaches that come to my mind are:
>> - To convert vector files to raster and display them as raster..
>> - To draw each shape in vector file one by one (i dont know how to do
>> this, I dont even know whether it would be even ?possible this using
>> GDAL/OGR, or how complex this would be because in my case vector files
>> can be very complex)
>>
>> The decision how to render vector files is very important for me,
>> because after displaying vector files i need to support some advanced
>> features like projection change, interactive selection, Geo-referencing
>> etc.
>>
>> Can any one who has worked on vector/gis stuff, tell me how this is
>> usually done and what Qt widget is used for displaying such data.
>>
>> Thanks,
>> Akshay gupta
>
>
>
> Hello,
>
> You should have a look at the QGIS project : www.qgis.org
> It displays vector data using GDAL/OGR and Qt, that's exactly what you want
> to do.
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From contact at sharemap.org  Sun May  6 18:49:23 2012
From: contact at sharemap.org (contact@sharemap.org)
Date: Mon May  7 01:56:21 2012
Subject: [gdal-dev] Calibration/georeferencing and warping of map with
	unknown projection
Message-ID: <7f7346150d3bffb78ffbd991ae848edc@localhost>

Hello,
Project ShareMap[1]  uses gdal_warp on the server side to allow users 
to work with calibrated rasters maps as overlay on web mercator maps. 
In case of maps in large scale it performas relatively well (country 
maps - almost ok, provinces maps - perfect)[2]. The problem is if we 
try to calibrate small scale maps (like this historical europe map) 
using only GCP.

This map[3] is a good example - if we split it to separate countries 
and calibrate every country alone, result is ok, but I don't know how 
to calibrate entire map with only GCP's (map does not contains 
informations about projection)

ShareMap currently execute such commands to warp map to web mercator:

gdal_translate -of GTiff -gcp 281.0 1290.0 -606604.2360752566 
4290256.933470774 -gcp 832.0 1512.0 1213208.4721505132 
3982062.8778166603 -gcp 1722.0 1668.0 3896453.822854374 
3441500.2881376203 -gcp 1436.0 1021.0 3226253.9813841325 
5618426.55426589 -gcp 653.0 701.0 168772.95277900095 6670199.918799774 
map.jpg map.referenced.tif

Values of GCP are in in meters for WebMercator - but in fact this map 
does not look like mercator projection.

Next step is warping

gdalwarp -t_srs +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs 
map.referenced.tif map.referenced_warped.tif

My question is very short - what is the best way of georeferencing and 
transforming to web mercator map with unknown projection, where we have 
several (4 or more) pairs of LAT/LNG and X/Y of pixel.

LAT;LNG;X;Y
35.92464;-5.44921;281;1290
33.65120;10.89843;832;1512
29.51610;35.00244;1722;1668
44.98033;28.98193;1436;1021


[1] ShareMap - ShareMap.org is new web mapping platform that allows 
author to create maps on free sources using data from OpenStreetMaps 
and trace from calibrated raster maps
[2] See this movie for example - www.youtu.be/gPJ7AD15wRI
[3] 
http://www.romanscotland.org.uk/pages/infrastructure/maps/RE395adL.jpg

From Sjur.A.Kolberg at sintef.no  Mon May  7 11:58:16 2012
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Mon May  7 11:59:42 2012
Subject: [gdal-dev] Does the OGR driver for IDRISI read AVL+ADC files?
Message-ID: <72251B925CE10A478606EEAC6AA683BE5BC7A69F0A@SINTEFEXMBX01.sintef.no>

Hello,

I try to migrate my IDRISI Vector reading routines from in-house functions to OGR, but have problems with attribute values files. Vector data sets which are linked to .mdb databases are read OK, but for data sets having only a simple .avl+.adc pair present, these seem to be ignored, and only the .vct and .vdc files seem to be read.

Are .avl and .adc files with the same file title not recognised as a part of the data set?
Is there a way to specify that a certain .avl+.adc pair should be read?

GDAL 1.9.0 / Windows / built with Visual Studio 2010 IDE.



Sjur Kolberg
SINTEF Energi
Sem S?lands vei 11
7465 Trondheim
tlf 73 59 72 78

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120507/d69f179d/attachment.html
From even.rouault at mines-paris.org  Mon May  7 13:54:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon May  7 13:50:23 2012
Subject: [gdal-dev] Does the OGR driver for IDRISI read AVL+ADC files?
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE5BC7A69F0A@SINTEFEXMBX01.sintef.no>
References: <72251B925CE10A478606EEAC6AA683BE5BC7A69F0A@SINTEFEXMBX01.sintef.no>
Message-ID: <201205071954.19393.even.rouault@mines-paris.org>

Le lundi 07 mai 2012 17:58:16, Sjur Kolberg a ?crit :
> Hello,
> 
> I try to migrate my IDRISI Vector reading routines from in-house functions
> to OGR, but have problems with attribute values files. Vector data sets
> which are linked to .mdb databases are read OK, but for data sets having
> only a simple .avl+.adc pair present, these seem to be ignored, and only
> the .vct and .vdc files seem to be read.
> 
> Are .avl and .adc files with the same file title not recognised as a part
> of the data set? Is there a way to specify that a certain .avl+.adc pair
> should be read?

No, there is no support for .avl / .adc yet. It would be helpful if you could 
provide a sample dataset (ideally with .avl, .adc, .vct, .vdc)

> 
> GDAL 1.9.0 / Windows / built with Visual Studio 2010 IDE.
> 
> 
> 
> Sjur Kolberg
> SINTEF Energi
> Sem S?lands vei 11
> 7465 Trondheim
> tlf 73 59 72 78
From even.rouault at mines-paris.org  Mon May  7 16:21:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon May  7 16:18:30 2012
Subject: [gdal-dev] Does the OGR driver for IDRISI read AVL+ADC files?
In-Reply-To: <201205071954.19393.even.rouault@mines-paris.org>
References: <72251B925CE10A478606EEAC6AA683BE5BC7A69F0A@SINTEFEXMBX01.sintef.no>
	<201205071954.19393.even.rouault@mines-paris.org>
Message-ID: <201205072221.51610.even.rouault@mines-paris.org>

Le lundi 07 mai 2012 19:54:19, Even Rouault a ?crit :
> Le lundi 07 mai 2012 17:58:16, Sjur Kolberg a ?crit :
> > Hello,
> > 
> > I try to migrate my IDRISI Vector reading routines from in-house
> > functions to OGR, but have problems with attribute values files. Vector
> > data sets which are linked to .mdb databases are read OK, but for data
> > sets having only a simple .avl+.adc pair present, these seem to be
> > ignored, and only the .vct and .vdc files seem to be read.
> > 
> > Are .avl and .adc files with the same file title not recognised as a part
> > of the data set? Is there a way to specify that a certain .avl+.adc pair
> > should be read?
> 
> No, there is no support for .avl / .adc yet. It would be helpful if you
> could provide a sample dataset (ideally with .avl, .adc, .vct, .vdc)

I've just added support for .avl / .adc in GDAL trunk, lightly tested from the 
samples you've provided. Feedback appreciated. Binary should be available 
download from http://vbkto.dyndns.org/sdk/ daily builds . See the -development 
packages in the first lines of the first table.
From jukka.rahkonen at mmmtike.fi  Tue May  8 05:21:08 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue May  8 05:21:46 2012
Subject: [gdal-dev] TiffAppendToStrip errors with uncompressed output
Message-ID: <loom.20120508T105818-888@post.gmane.org>

Hi,

I have some LZW compressed paletted 8-bit tiff files which I look throuhg a .vrt
file. I have been taking some timings with different gdal_translate parameters
but for some reason the most common command fails always for me. The result is

gdal_translate -of GTiff test.vrt uncompressed.tif

Input file size is 96000, 48000
0...10...20...30ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
ERROR 1: An error occured while writing a dirty block
ERROR 1: TIFFAppendToStrip:Write error at scanline 14664
ERROR 1: TIFFAppendToStrip:Write error at scanline 14664

The error is the same with tiled and untiled output.  However, if I use -co
tiled=yes the error occurs always at scanline 5888 and without tiling it occurs
at scanline 14650. Changing GDAL_CACHEMAX value does not change anything. 

I use compressed output there are no troubles at all. I have verified it with
LZW and packbits compression, with and without tiling and I get no errors ever.

I can make a zip from the originals for downloading if someone is interested in
having a look.

I am on Windows XP and GDAL is from Gisinternals, downloaded in April 24.
Program is listing the version as GDAL 1.9.0, released 2011/12/29 but I do not
quite believe it. Aren't the Gisinternals builds coming from trunk?

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Tue May  8 08:32:48 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue May  8 08:33:17 2012
Subject: [gdal-dev] Re: TiffAppendToStrip errors with uncompressed output
References: <loom.20120508T105818-888@post.gmane.org>
Message-ID: <loom.20120508T140737-661@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Hi,
> 
> I have some LZW compressed paletted 8-bit tiff files which I look 
through a .vrt
> file. I have been taking some timings with different gdal_translate 
parameters
> but for some reason the most common command fails always for me. The 
result is
> 
> gdal_translate -of GTiff test.vrt uncompressed.tif
> 
> Input file size is 96000, 48000
> 0...10...20...30ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
> ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
> ERROR 1: An error occured while writing a dirty block
> ERROR 1: TIFFAppendToStrip:Write error at scanline 14664
> ERROR 1: TIFFAppendToStrip:Write error at scanline 14664

I can repeat the error with another computer (Vista 32-bit). This time 
the error occurs at scanline 44731 when progress bar had advanced to 
value of 90.
Obviously there is a lack of some resource but I cannot imagine what it is and
how I could give more of it for gdal_translate. Both computers have 2 GB of
memory but resource manager does not show signs about running out of memory.

There is now a 460 MB zip file at
http://latuviitta.org/documents/TiffAppendToStrip_error.zip

It contains the source tiffs and .vrt file "UM52.vrt" and after unzipping it
should be ready for a test with
gdal_translate -of GTiff UM542.vrt output.tif

SRS is EPSG:3067 if it matters.

-Jukka Rahkonen-

From jluis at ualg.pt  Tue May  8 09:52:11 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue May  8 09:52:49 2012
Subject: [gdal-dev] writing a subregion with GDALRasterIO
Message-ID: <4FA9250B.9020404@ualg.pt>

Hi,

I am having some troubles in writing a sub-region on an array with 
GDALRasterIO.

The story is this. GMT internal grid arrays have a padding of 2 rows and 
2 columns around the 'true data region' that is used for boundary 
conditions but that need to be striped off upon saving on file.

The following works well when I previously moved all real data in the 
'data' array to the beginning of the array. That is, when I sort of 
removed the the padding zone.

   hDstDS = GDALCreate( hDriver, "mem", nx, ny, n_bands, typeCLASS, NULL );
....
    GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, data, nx, ny, 
typeCLASS, 0, 0 );

However, I would like to avoid that step and read directly the zone of 
interest from 'data', which because of the padding has actually 
(nx+4)x(ny+4) elements. So I tried

     GDALRasterIO( hBand, GF_Write, 2, 2, nx, ny, data, nx+4, ny+4, 
typeCLASS, 0, 0 );

but get this error:

ERROR 5: mem, band 1: Access window out of range in RasterIO().  Requested
(2,2) of size 37x19 on raster of 37x19.

This happens because of the test on gdalrasterband.cpp

    if( nXOff < 0 || nXOff > INT_MAX - nXSize || nXOff + nXSize > 
nRasterXSize

but this means I'm stuck here because the nRasterXSize ('nx' in this 
case) comes from the GDALCreate() and that I cannot change and so
    nXOff + nXSize > nRasterXSize is always true.

Any way out of this gotcha?

Thanks

Joaquim


From armin.burger at gmx.net  Tue May  8 19:13:15 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Tue May  8 19:14:09 2012
Subject: [gdal-dev] Re: TiffAppendToStrip errors with uncompressed output
In-Reply-To: <loom.20120508T140737-661@post.gmane.org>
References: <loom.20120508T105818-888@post.gmane.org>
	<loom.20120508T140737-661@post.gmane.org>
Message-ID: <4FA9A88B.4090104@gmx.net>

Jukka

I downloaded and converted your test VRT file to a single Geotiff 
without any problems - on Linux... Conversion took a few minutes on a 
fast server.

Just a guess, but in my opinion this problem is related to the limited 
memory handling capabilities of Windows. It does not seem to be a 
shortage of total memory but more a sort of memory "fragmentation". 
Windows is not able to provide a contiguous block of memory that is 
required by some software in some cases. Some time ago a colleague had 
this type of problem when working with IDL scripts, it worked fine on 
Linux or Mac OS, never on Windows with larger datasets.

On Windows, working with large datasets and gdal (especially compressed 
and VRT) or allowing gdal_translate to use more memory via GDAL_CACHEMAX 
config, caused always problems for me. So I stopped trying this... On 
Linux I can easily work with VRT files that reference several 100's of 
GB. There on Linux however, higher settings for GDAL_CACHEMAX were 
speeding up conversions noticeably when working with lots of tiles, 
especially when they were compressed Tiffs.

So I can just recommend, if feasible, to try out Linux or any type of 
Unix for your processing and see if the problem disappears.

Greetings
Armin


On 08/05/2012 14:32, Jukka Rahkonen wrote:
> Jukka Rahkonen<jukka.rahkonen<at>  mmmtike.fi>  writes:
>
>>
>> Hi,
>>
>> I have some LZW compressed paletted 8-bit tiff files which I look
> through a .vrt
>> file. I have been taking some timings with different gdal_translate
> parameters
>> but for some reason the most common command fails always for me. The
> result is
>>
>> gdal_translate -of GTiff test.vrt uncompressed.tif
>>
>> Input file size is 96000, 48000
>> 0...10...20...30ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
>> ERROR 1: TIFFAppendToStrip:Write error at scanline 14650
>> ERROR 1: An error occured while writing a dirty block
>> ERROR 1: TIFFAppendToStrip:Write error at scanline 14664
>> ERROR 1: TIFFAppendToStrip:Write error at scanline 14664
>
> I can repeat the error with another computer (Vista 32-bit). This time
> the error occurs at scanline 44731 when progress bar had advanced to
> value of 90.
> Obviously there is a lack of some resource but I cannot imagine what it is and
> how I could give more of it for gdal_translate. Both computers have 2 GB of
> memory but resource manager does not show signs about running out of memory.
>
> There is now a 460 MB zip file at
> http://latuviitta.org/documents/TiffAppendToStrip_error.zip
>
> It contains the source tiffs and .vrt file "UM52.vrt" and after unzipping it
> should be ready for a test with
> gdal_translate -of GTiff UM542.vrt output.tif
>
> SRS is EPSG:3067 if it matters.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Wed May  9 06:13:06 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed May  9 06:13:38 2012
Subject: [gdal-dev] Re: TiffAppendToStrip errors with uncompressed output
	[SOLVED]
References: <loom.20120508T105818-888@post.gmane.org>
	<loom.20120508T140737-661@post.gmane.org>
	<4FA9A88B.4090104@gmx.net>
Message-ID: <loom.20120509T114908-834@post.gmane.org>

Ahem,

It seems to be so that compression makes resulting tiff files smaller.  In some
cases they can then fit to almost full disk even there is not enough room for an
uncompressed version.

An explanation for why I did not notice that disk was too full was that the LZW
compression is so effective for this dataset. The difference is as big as 272 MB
with LZW compression and 4500 MB as uncompressed. The tiff driver error message
is not most obvious either
TIFFAppendToStrip:Write error at scanline 14650

The error message from HFA driver was pretty easy to interpret:
ERROR3: Failed to extend imgtest.ige to full size
likely out of disk space.
No space left on device.

This makes me think about two improvements:
- Make GTiff driver to give better understandable error message when disk
 gets full
- In case of uncompressed tiff output, make driver to test beforehand if 
there is enough disk space for the target image

I would guess that sometimes the latter could prevent some frustration caused by
a many hours conversion job going in vain because of running out of disk space.

-Jukka Rahkonen-


From rlpires at gmail.com  Wed May  9 11:47:28 2012
From: rlpires at gmail.com (Rui L. Pires)
Date: Wed May  9 11:47:49 2012
Subject: [gdal-dev] OGRDataSource::CopyLayer, PostGIS
Message-ID: <CAP6xJcYpaWRMZFhftXf0rzhvkt7S9Q-XxOwGtnoTdF6J3BfRuQ@mail.gmail.com>

Hello everyone,

when using the method OGRDataSource::CopyLayer with a PostGIS data
source my data gets copied perfectly, however I'm seeing that the
sequence for the feature id is not properly set up to the last
existing id (ie. the current stays at 1).

Obviously attempting to create a new feature fails. Once I set the
sequence current value to the highest id, feature creation is OK.

I wonder whether CopyLayer should provide this setup or if the user is
expected to explicitly run a query (like I did) to appropriately
configure the id sequence.

I'm using gdal 1.8 but having looked at the code I believe the same
behaviour can be observed in 1.9.

Thanks in advance for your feedback.

Regards,
-- RLPires
From jukka.rahkonen at mmmtike.fi  Wed May  9 15:50:15 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed May  9 15:50:47 2012
Subject: [gdal-dev] Disk or database full error from Rasterlite driver
Message-ID: <loom.20120509T214058-250@post.gmane.org>

Hi,

I got the following error when testing Rasterlite with a biggish source data set

gdal_translate -of rasterlite -a_srs epsg:3067 -co driver=PNG 50t.vrt
 rasterlite:50t.sqlite,table=50t_rasteri
Input file size is 288000, 480000
0...10...20...30...40...50...60...70.ERROR 1: sqlite3_step() failed:
  database or disk is full (13)
ERROR 1: sqlite3_step() failed:
  PRIMARY KEY must be unique (19)

This time I am sure that the target disk was not full. There was still more than
8 gigabytes free space. However, the Rasterlite file size has probably been
around 4 gigabytes when the error occurred. Did I meet some file size limit or
tile count limit of the Rasterlite driver?

-Jukka Rahkonen-

From a.furieri at lqt.it  Wed May  9 18:04:32 2012
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Wed May  9 18:15:11 2012
Subject: [gdal-dev] Disk or database full error from Rasterlite driver
In-Reply-To: <loom.20120509T214058-250@post.gmane.org>
References: <loom.20120509T214058-250@post.gmane.org>
Message-ID: <af795d20cb25d6d4c380e659e864ceb1@lqt.it>

On Wed, 9 May 2012 19:50:15 +0000 (UTC), Jukka Rahkonen wrote:
> However, the Rasterlite file size has probably been
> around 4 gigabytes when the error occurred. Did I meet some file size
> limit or tile count limit of the Rasterlite driver?
>

Hi Jukka,

on any platform there is an intrinsic physical size limit;
this is simply due to the word size measured in bits.
on 32 bit platforms the max address you can express is 2^32,
i.e. 4 GB; as you probably remember, on earlier versions of
Linux and Win98 this was the max file-size allowed by their
file-systems.

Happily enough, any modern 32 bit Linux supports a file-system
based on long-addressing, i.e. using two 32 bit words in order
to support 64 bit file offsets; and this effectively allows to
store files widely exceeding the 4 GB barrier.

More or less the same is on WinXP, WinVista and Win7 if you are
using the NTFS file-system.
But if you are using instead the obsolete FAT file-system (the
default choice on many USB pen drivers and USB external HDDs) the
old 32 bit addressing is the only one supported, thus still imposing
a file-size limit of 4 GB.

A final consideration: on both Linux 32 bit and Windows 32 bit you
must explicitly set few compile-time flags in order to build an
executable effectively supporting 64 bit extended file addressing;
on both GCC and MSVC these compiler options are:

-D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGE_FILE=1

conclusion: SQLite, SpatiaLite and RasterLite have no intrinsic
file-size limits (I've successfully built several impressively huge
DB-files 100+ GB).
- using 64 bit sw this assumption is surely true
- using 32 bit sw it depends: you are surely limited to 4 GB max,
   if your binaries were built without setting the above mentioned 
flags.
- if you are using the infamous FAT file-system there is absolutely no
   way to escape from the 4 GB barrier because this is the physical 
limit
   imposed by this file-system.

bye Sandro


-- 
Il messaggio e' stato analizzato alla ricerca di virus o
contenuti pericolosi da MailScanner, ed e'
risultato non infetto.

From ealpert at digitalglobe.com  Wed May  9 18:49:19 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed May  9 18:53:20 2012
Subject: [gdal-dev] OGC services requests in VRT?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233098C8D1F@COMAIL01.digitalglobe.com>

Is it possible to use an OGC call in a VRTRasterBand?


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120509/73eedcd8/attachment.html
From kaarigar at gmail.com  Wed May  9 19:06:01 2012
From: kaarigar at gmail.com (kaarigar)
Date: Wed May  9 19:06:12 2012
Subject: [gdal-dev] gdal_translate waits at the end of operation
Message-ID: <1336604761454-4964258.post@n6.nabble.com>

I hope this is the right forum to pose this question to.

I am using gdal_translate on Windows 7 64 bit to batch convert a lot of
GeoTIFF files to XYZ ASCII. (I got gdal_translate when I installed
Geoinformatica tools, based on GDAL version 1.9Dev). However, at the end of
each conversion gdal_translate just waits - I have to press CTRL-C to wake
it up so that the batch file can continue to process the next command. This
very much defeats the purpose of the command line program - because it
forces the user to be around to press key. Is this expected - or am I
missing something here? Any help is very much appreciated. Thanks! 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From kyle at pobox.com  Wed May  9 19:23:28 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Wed May  9 19:26:34 2012
Subject: [gdal-dev] gdal_translate waits at the end of operation
In-Reply-To: <1336604761454-4964258.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
Message-ID: <CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>

Sounds like your doing something wrong, it shouldn't hang.  Can you share
your command line args or a snippet of your batch file?

kss

On Wed, May 9, 2012 at 5:06 PM, kaarigar <kaarigar@gmail.com> wrote:

> I hope this is the right forum to pose this question to.
>
> I am using gdal_translate on Windows 7 64 bit to batch convert a lot of
> GeoTIFF files to XYZ ASCII. (I got gdal_translate when I installed
> Geoinformatica tools, based on GDAL version 1.9Dev). However, at the end of
> each conversion gdal_translate just waits - I have to press CTRL-C to wake
> it up so that the batch file can continue to process the next command. This
> very much defeats the purpose of the command line program - because it
> forces the user to be around to press key. Is this expected - or am I
> missing something here? Any help is very much appreciated. Thanks!
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120509/f2585007/attachment.html
From kaarigar at gmail.com  Wed May  9 19:34:13 2012
From: kaarigar at gmail.com (kaarigar)
Date: Wed May  9 19:34:22 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
Message-ID: <1336606453481-4964307.post@n6.nabble.com>

Here's the command line:

gdal_translate -ot Float32 -of XYZ -co "COLUMN_SEPARATOR=," n40w124.tif
n40w124.xyz


Kyle Shannon-3 wrote
> 
> Sounds like your doing something wrong, it shouldn't hang.  Can you share
> your command line args or a snippet of your batch file?
> 
> kss
> 


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964307.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From kyle at pobox.com  Wed May  9 19:48:25 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Wed May  9 19:48:47 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <1336606453481-4964307.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
Message-ID: <CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>

More questions?  Can you convert one image into an xyz?  It sounds like you
can.  Are there no errors or warnings?

On Wed, May 9, 2012 at 5:34 PM, kaarigar <kaarigar@gmail.com> wrote:

> Here's the command line:
>
> gdal_translate -ot Float32 -of XYZ -co "COLUMN_SEPARATOR=," n40w124.tif
> n40w124.xyz
>
>
> Kyle Shannon-3 wrote
> >
> > Sounds like your doing something wrong, it shouldn't hang.  Can you share
> > your command line args or a snippet of your batch file?
> >
> > kss
> >
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964307.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120509/7108be0c/attachment.html
From kaarigar at gmail.com  Wed May  9 20:17:58 2012
From: kaarigar at gmail.com (kaarigar)
Date: Wed May  9 20:18:00 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
Message-ID: <1336609078159-4964362.post@n6.nabble.com>

I can convert a single image to XYZ from command line. And can also convert
multiple images to command line via batch file - if I press CTRL-C after the
conversion for one file is 100% done - it will continue to the next file. 
There are no errors or warnings. The conversion to XYZ is successful. I have
also tried this on Windows 7 32bit - and found the same problem there too.

Kyle Shannon-3 wrote
> 
> More questions?  Can you convert one image into an xyz?  It sounds like
> you
> can.  Are there no errors or warnings?
> 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964362.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etourigny.dev at gmail.com  Wed May  9 20:28:35 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed May  9 20:29:10 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <1336609078159-4964362.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
Message-ID: <CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>

do you get the same problem when converting to another format (say
gtiff) or using other files as input?

Etienne

On Wed, May 9, 2012 at 9:17 PM, kaarigar <kaarigar@gmail.com> wrote:
> I can convert a single image to XYZ from command line. And can also convert
> multiple images to command line via batch file - if I press CTRL-C after the
> conversion for one file is 100% done - it will continue to the next file.
> There are no errors or warnings. The conversion to XYZ is successful. I have
> also tried this on Windows 7 32bit - and found the same problem there too.
>
> Kyle Shannon-3 wrote
>>
>> More questions? ?Can you convert one image into an xyz? ?It sounds like
>> you
>> can. ?Are there no errors or warnings?
>>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964362.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Thu May 10 02:10:17 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May 10 02:11:12 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <1336606453481-4964307.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
Message-ID: <4FAB5BC9.1030203@gmail.com>

Kaarigar is using gdal_translate on Windows 7 64 bit from Geoinformatica 
stack, which I've compiled with MingW/MSYS on Windows 7 32 bit.

I just tried similar command line on Windows Server 2008 R2 64 bit and I 
don't see it stalling after conversion.

Best regards,

Ari

On 05/10/2012 02:34 AM, kaarigar wrote:
> Here's the command line:
>
> gdal_translate -ot Float32 -of XYZ -co "COLUMN_SEPARATOR=," n40w124.tif
> n40w124.xyz
>
>
> Kyle Shannon-3 wrote
>> Sounds like your doing something wrong, it shouldn't hang.  Can you share
>> your command line args or a snippet of your batch file?
>>
>> kss
>>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964307.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kaarigar at gmail.com  Thu May 10 02:16:15 2012
From: kaarigar at gmail.com (kaarigar)
Date: Thu May 10 02:16:29 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
Message-ID: <1336630575423-4964870.post@n6.nabble.com>

Thanks for the suggestion. I tried to convert GeoTIFF to jpg - and there
wasn't the problem. Then I tried to convert a small GeoTIFF (20 mb) to XYZ -
it still waited for some time (~10 secs) after displaying the "Done."
message. I think what is happening is that I was converting a set of very
large files (each ~300 mb) - and that makes gdal_translate wait for quite
some time after the "Done." message. This time I waited long enough and the
gdal_translate process was able to continue to the next file in the batch
file. Still I am not sure why gdal_translate has to wait at the end of the
conversion. 

Thanks to everyone for help! 


Etienne Tourigny-3 wrote
> 
> do you get the same problem when converting to another format (say
> gtiff) or using other files as input?
> 


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964870.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alexandre.gacon+gdal at gmail.com  Thu May 10 02:27:54 2012
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Thu May 10 02:28:47 2012
Subject: [gdal-dev] Submiting patch on Postgres driver
Message-ID: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr_pg.patch
Type: application/octet-stream
Size: 2110 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/d411bdc3/ogr_pg.obj
From jukka.rahkonen at mmmtike.fi  Thu May 10 02:49:07 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu May 10 02:49:37 2012
Subject: [gdal-dev] Re: Disk or database full error from Rasterlite driver
References: <loom.20120509T214058-250@post.gmane.org>
	<af795d20cb25d6d4c380e659e864ceb1@lqt.it>
Message-ID: <loom.20120510T082204-141@post.gmane.org>

 <a.furieri <at> lqt.it> writes:

> 
> On Wed, 9 May 2012 19:50:15 +0000 (UTC), Jukka Rahkonen wrote:
> > However, the Rasterlite file size has probably been
> > around 4 gigabytes when the error occurred. Did I meet some file size
> > limit or tile count limit of the Rasterlite driver?
> >
> 
> Hi Jukka,
> 
> on any platform there is an intrinsic physical size limit;
> this is simply due to the word size measured in bits.
> on 32 bit platforms the max address you can express is 2^32,
> i.e. 4 GB; as you probably remember, on earlier versions of
> Linux and Win98 this was the max file-size allowed by their
> file-systems.
> 
> Happily enough, any modern 32 bit Linux supports a file-system
> based on long-addressing, i.e. using two 32 bit words in order
> to support 64 bit file offsets; and this effectively allows to
> store files widely exceeding the 4 GB barrier.
> 
> More or less the same is on WinXP, WinVista and Win7 if you are
> using the NTFS file-system.
> But if you are using instead the obsolete FAT file-system (the
> default choice on many USB pen drivers and USB external HDDs) the
> old 32 bit addressing is the only one supported, thus still imposing
> a file-size limit of 4 GB.
> 
> A final consideration: on both Linux 32 bit and Windows 32 bit you
> must explicitly set few compile-time flags in order to build an
> executable effectively supporting 64 bit extended file addressing;
> on both GCC and MSVC these compiler options are:
> 
> -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGE_FILE=1
> 
> conclusion: SQLite, SpatiaLite and RasterLite have no intrinsic
> file-size limits (I've successfully built several impressively huge
> DB-files 100+ GB).
> - using 64 bit sw this assumption is surely true
> - using 32 bit sw it depends: you are surely limited to 4 GB max,
>    if your binaries were built without setting the above mentioned 
> flags.
> - if you are using the infamous FAT file-system there is absolutely no
>    way to escape from the 4 GB barrier because this is the physical 
> limit
>    imposed by this file-system.


Thanks Sandro.

I am tied to use ready made binaries and Windows and I tend to test with pretty
old computers so that raw computing power will not hide the efficiency problems.
But NTFS drives I do have.

Is there a way for me as a non-programmer to check if the components used for
Rasterlite conversion in the Windows 32-bit binaries from gisinternals.com 
have been built with or without
 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGE_FILE=1 ?

4 GB is rather small as a geospatial image nowadays. I think that a good
practice GDAL would be to to use those large file flags as defaults when
compiling for 32-bit systems.

I have now another trial going on with the rasterlite_load tool. After a few
hours I will see if it was successful. I did my first test with GDAL for saving
some time because rasterlite_load consumes only geotiffs and I had just tiffs
and .tfw files.

-Jukka Rahkonen-




From jrepetto at free.fr  Thu May 10 03:00:14 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu May 10 03:01:59 2012
Subject: [gdal-dev] Submiting patch on Postgres driver
In-Reply-To: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>
References: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>
Message-ID: <4FAB677E.1020307@free.fr>

On 05/10/12 08:27, Alexandre Gacon wrote:
> Hi,
>
> I have added an option on the Postgres driver for OGR to avoid
> computation of the SRID of a spatial request when the SRID is known. Is
> it possible to add it to the code repository ?
>
> --
> Alexandre Gacon
>
>
Hi,

You have to open a new ticket at :
http://trac.osgeo.org/gdal/newticket

Jean-Claude
From alexandre.gacon+gdal at gmail.com  Thu May 10 04:26:33 2012
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Thu May 10 04:27:04 2012
Subject: [gdal-dev] Submiting patch on Postgres driver
In-Reply-To: <4FAB677E.1020307@free.fr>
References: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>
	<4FAB677E.1020307@free.fr>
Message-ID: <CAFJaAp71n2v-_32WNPt5YbYzbQXOhJt4LCH2Zm=Zm5Tsydm1ag@mail.gmail.com>

Where can I create a osgeo login ?

Regards
Alexandre

2012/5/10 Jean-Claude Repetto <jrepetto@free.fr>

> On 05/10/12 08:27, Alexandre Gacon wrote:
>
>> Hi,
>>
>> I have added an option on the Postgres driver for OGR to avoid
>> computation of the SRID of a spatial request when the SRID is known. Is
>> it possible to add it to the code repository ?
>>
>> --
>> Alexandre Gacon
>>
>>
>>  Hi,
>
> You have to open a new ticket at :
> http://trac.osgeo.org/gdal/**newticket<http://trac.osgeo.org/gdal/newticket>
>
> Jean-Claude
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/8ddde73b/attachment.html
From jrepetto at free.fr  Thu May 10 04:35:13 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu May 10 04:35:39 2012
Subject: [gdal-dev] Submiting patch on Postgres driver
In-Reply-To: <CAFJaAp71n2v-_32WNPt5YbYzbQXOhJt4LCH2Zm=Zm5Tsydm1ag@mail.gmail.com>
References: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>
	<4FAB677E.1020307@free.fr>
	<CAFJaAp71n2v-_32WNPt5YbYzbQXOhJt4LCH2Zm=Zm5Tsydm1ag@mail.gmail.com>
Message-ID: <4FAB7DC1.1070803@free.fr>

Le 10/05/2012 10:26, Alexandre Gacon a ?crit :
> Where can I create a osgeo login ?

http://www.osgeo.org/osgeo_userid
From a.furieri at lqt.it  Thu May 10 05:56:02 2012
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Thu May 10 05:56:43 2012
Subject: [gdal-dev] Re: Disk or database full error from Rasterlite driver
In-Reply-To: <loom.20120510T082204-141@post.gmane.org>
References: <loom.20120509T214058-250@post.gmane.org>
	<af795d20cb25d6d4c380e659e864ceb1@lqt.it>
	<loom.20120510T082204-141@post.gmane.org>
Message-ID: <403487ce5b8bc48552d1f61894e4a865@lqt.it>

On Thu, 10 May 2012 06:49:07 +0000 (UTC), Jukka Rahkonen wrote:
> Is there a way for me as a non-programmer to check if the components 
> used for
> Rasterlite conversion in the Windows 32-bit binaries from 
> gisinternals.com
> have been built with or without
>  -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE=1 -D_LARGE_FILE=1 ?
>

sorry, no. it's not possible to retrieve this information
from the binary executable.

anyway you can ask this question directly to Tamas Szekeres
<szekerest@gmail.com> (the gisinternals.com maintainer)
just in case (if the above flags are not set at build time)
this may be a useful debugging information for Tamas.

bye Sandro

-- 
Il messaggio e' stato analizzato alla ricerca di virus o
contenuti pericolosi da MailScanner, ed e'
risultato non infetto.

From Odd-Ragnar.Lydersen at powel.no  Thu May 10 07:21:10 2012
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Thu May 10 07:21:58 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
Message-ID: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>

When I call myLayer->GetNextFeature(), I get an exception that tells me the format in request is not supported.

Then I tried to ad < outputformat=text/xml; subtype=gml/3.1.1 > to myWfsDriver->Open() string, and still I get the exception.



I guess my question is this:

How do I specify the outputformat parameter correctly, the server is supposed to support the default for wfs 1.1.0 which is the one I use.



PS! For another server (stable) this works fine, using only < ?service=WFS&version=1.1.0 > as parameters to the service


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/88b92791/attachment.html
From etourigny.dev at gmail.com  Thu May 10 07:45:15 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu May 10 07:45:37 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <1336630575423-4964870.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
Message-ID: <CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>

On Thu, May 10, 2012 at 3:16 AM, kaarigar <kaarigar@gmail.com> wrote:
> Thanks for the suggestion. I tried to convert GeoTIFF to jpg - and there
> wasn't the problem. Then I tried to convert a small GeoTIFF (20 mb) to XYZ -
> it still waited for some time (~10 secs) after displaying the "Done."
> message. I think what is happening is that I was converting a set of very
> large files (each ~300 mb) - and that makes gdal_translate wait for quite
> some time after the "Done." message. This time I waited long enough and the
> gdal_translate process was able to continue to the next file in the batch
> file. Still I am not sure why gdal_translate has to wait at the end of the
> conversion.

Something that is not apparent is that gdal_translate (via driver's
GDALCreateCopy()) usually opens the new dataset after creation, and
the XYZ file loading is slow:

>From the XYZ driver doc at http://www.gdal.org/frmt_xyz.html
"The opening of a big dataset can be slow as the driver must scan the
whole file to determine the dataset size and spatial resolution. The
driver will autodetect the data type among Byte, Int16, Int32 or
Float32."

You can verify this by running the command with debug output like:

$ gdal_translate --debug on -of xyz
LANDSAT_5_TM_20100614_001_067_L2_3B4G5B.tif tmp2.xyz
GDAL: GDALOpen(LANDSAT_5_TM_20100614_001_067_L2_3B4G5B.tif,
this=0xa66950) succeeds as GTiff.
Input file size is 8046, 6767
Warning 6: XYZ driver only uses the first band of the dataset.

0...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALOpen(tmp2.xyz, this=0xa70a00) succeeds as XYZ.

GDAL: GDALClose(tmp2.xyz, this=0xa70a00)
GDAL: GDALClose(LANDSAT_5_TM_20100614_001_067_L2_3B4G5B.tif, this=0xa66950)


>
> Thanks to everyone for help!
>
>
> Etienne Tourigny-3 wrote
>>
>> do you get the same problem when converting to another format (say
>> gtiff) or using other files as input?
>>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4964870.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From yjacolin at free.fr  Thu May 10 04:34:50 2012
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu May 10 08:12:09 2012
Subject: [gdal-dev] Submiting patch on Postgres driver
In-Reply-To: <CAFJaAp71n2v-_32WNPt5YbYzbQXOhJt4LCH2Zm=Zm5Tsydm1ag@mail.gmail.com>
References: <CAFJaAp7Y_eP0nLhOgnWoRL29enXm51xTq471gvMF1RYK68Ai=A@mail.gmail.com>
	<4FAB677E.1020307@free.fr>
	<CAFJaAp71n2v-_32WNPt5YbYzbQXOhJt4LCH2Zm=Zm5Tsydm1ag@mail.gmail.com>
Message-ID: <15750599.xJMc00D8Td@tatras>

Hello,

see http://www.osgeo.org/osgeo_userid

Y.

Le jeudi 10 mai 2012 10:26:33 Alexandre Gacon a ?crit :
> Where can I create a osgeo login ?
> 
> Regards
> Alexandre
> 
> 2012/5/10 Jean-Claude Repetto <jrepetto@free.fr>
> 
> > On 05/10/12 08:27, Alexandre Gacon wrote:
> >> Hi,
> >> 
> >> I have added an option on the Postgres driver for OGR to avoid
> >> computation of the SRID of a spatial request when the SRID is known.
> >> Is
> >> it possible to add it to the code repository ?
> >> 
> >> --
> >> Alexandre Gacon
> >> 
> >>  Hi,
> > 
> > You have to open a new ticket at :
> > http://trac.osgeo.org/gdal/**newticket<http://trac.osgeo.org/gdal/newtic
> > ket>
> > 
> > Jean-Claude
> > ______________________________**_________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.or
> > g/mailman/listinfo/gdal-dev>
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From jorizci at gmail.com  Thu May 10 08:22:30 2012
From: jorizci at gmail.com (Jorge Izquierdo Ciges)
Date: Thu May 10 08:23:19 2012
Subject: [gdal-dev] GDAL with GEOS static
Message-ID: <CAGoYm7vvqRuk-4EbVV5P+sPfkUhh6HcyqcLW1srzObt8iFAYFQ@mail.gmail.com>

Hello and good day.

 I've been trying to get GDAL compiled with GEOS static in Linux with the
./configure, but i've seen in the config.log that it's checked against the
*.so. Also i've not found an option to static link GEOS as it can be with
proj4. Can it be linked statically? and if it's affirmative how should I
proceed?

Thanks in advance.

J.Izquierdo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/2c09fa43/attachment.html
From pcorti at gmail.com  Thu May 10 08:57:10 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Thu May 10 08:58:00 2012
Subject: [gdal-dev] OGC services requests in VRT?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233098C8D1F@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233098C8D1F@COMAIL01.digitalglobe.com>
Message-ID: <CAHXrU-+q9ZBh0Cj6_iU5Nsz2QN0FQ++YkpvAqZi9WuJDnHU5wQ@mail.gmail.com>

On Thu, May 10, 2012 at 12:49 AM, Ethan Alpert <ealpert@digitalglobe.com> wrote:
> Is it possible to use an OGC call in a VRTRasterBand?
>

I guess you mean a WCS, and I think it is possible, just put the xml
file in SourceFilename under VRTRasterBand.

Very quick sample, create a test.xml file like this:

<WCS_GDAL>
  <ServiceURL>http://nsidc.org/cgi-bin/atlas_south?</ServiceURL>
  <CoverageName>antarctica_satellite_image</CoverageName>
</WCS_GDAL>

Now if you export this datasource to a vrt:

$ gdal_translate -of vrt test.xml test.vrt

this is the output test.vrt file:

<VRTDataset rasterXSize="48333" rasterYSize="48333">
  <SRS>PROJCS[&quot;WGS 84 / Antarctic Polar
Stereographic&quot;,GEOGCS[&quot;WGS
84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS
84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Polar_Stereographic&quot;],PARAMETER[&quot;latitude_of_origin&quot;,-71],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;scale_factor&quot;,1],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;3031&quot;]]</SRS>
  <GeoTransform> -3.1745125000000000e+06,  1.2500000000000000e+02,
0.0000000000000000e+00,  2.8160125000000000e+06,
0.0000000000000000e+00, -1.2500000000000000e+02</GeoTransform>
  <Metadata />
  <VRTRasterBand dataType="Int16" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="1">wcs2.xml</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="48333" RasterYSize="48333"
DataType="Int16" BlockXSize="1024" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
      <DstRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From pcorti at gmail.com  Thu May 10 09:00:25 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Thu May 10 09:01:24 2012
Subject: [gdal-dev] OGC services requests in VRT?
In-Reply-To: <CAHXrU-+q9ZBh0Cj6_iU5Nsz2QN0FQ++YkpvAqZi9WuJDnHU5wQ@mail.gmail.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233098C8D1F@COMAIL01.digitalglobe.com>
	<CAHXrU-+q9ZBh0Cj6_iU5Nsz2QN0FQ++YkpvAqZi9WuJDnHU5wQ@mail.gmail.com>
Message-ID: <CAHXrU-+GhT5=4Wqw1K2U0Fpnx2Dyuy6NC+5W4VrzaPntV5pSVA@mail.gmail.com>

On Thu, May 10, 2012 at 2:57 PM, Paolo Corti <pcorti@gmail.com> wrote:
> On Thu, May 10, 2012 at 12:49 AM, Ethan Alpert <ealpert@digitalglobe.com> wrote:
>> Is it possible to use an OGC call in a VRTRasterBand?
>>
>
> I guess you mean a WCS, and I think it is possible, just put the xml
> file in SourceFilename under VRTRasterBand.
>
> Very quick sample, create a test.xml file like this:
>
> <WCS_GDAL>
> ?<ServiceURL>http://nsidc.org/cgi-bin/atlas_south?</ServiceURL>
> ?<CoverageName>antarctica_satellite_image</CoverageName>
> </WCS_GDAL>
>
> Now if you export this datasource to a vrt:
>
> $ gdal_translate -of vrt test.xml test.vrt
>
> this is the output test.vrt file:
>

sorry, this is the correct output vrt file:

<VRTDataset rasterXSize="48333" rasterYSize="48333">
  <SRS>PROJCS[&quo...........</SRS>
  <GeoTransform> -3.1745125000000000e+06,  1.2500000000000000e+02,
0.0000000000000000e+00,  2.8160125000000000e+06,
0.0000000000000000e+00, -1.2500000000000000e+02</GeoTransform>
  <Metadata />
  <VRTRasterBand dataType="Int16" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="1">test.xml</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="48333" RasterYSize="48333"
DataType="Int16" BlockXSize="1024" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
      <DstRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From hilmekrhu at gmail.com  Thu May 10 09:48:44 2012
From: hilmekrhu at gmail.com (Petr Kitashov)
Date: Thu May 10 09:49:53 2012
Subject: [gdal-dev] Raster visualization
Message-ID: <CAP9804+gk2dtwnTLpMoTVy1E45Ta8PDc4-EraczmCqz_P6JGDQ@mail.gmail.com>

Hi,

I need just to display some region(any) from raster file. Seems like I
understand everything until rasterIO.
RasterIO fills(in my case) void* pData with raster info - that's great, but
how to display it?

Which data is stored there when I use GDALDataset::rasterIO, and which in
case of GDALRasterBand::RasterIO?

I.e. how to determine pixel values from pData?

I'm sorry if this question is stupid, but i spent a lot of time in google
and didn't find any solution.

-- 
Best Regards,
Petr Kitashov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/8e095518/attachment-0001.html
From ari.jolma at gmail.com  Thu May 10 10:48:32 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu May 10 10:49:06 2012
Subject: [gdal-dev] Raster visualization
In-Reply-To: <CAP9804+gk2dtwnTLpMoTVy1E45Ta8PDc4-EraczmCqz_P6JGDQ@mail.gmail.com>
References: <CAP9804+gk2dtwnTLpMoTVy1E45Ta8PDc4-EraczmCqz_P6JGDQ@mail.gmail.com>
Message-ID: <4FABD540.90701@gmail.com>

On 05/10/2012 04:48 PM, Petr Kitashov wrote:
> Hi,
>
> I need just to display some region(any) from raster file. Seems like I 
> understand everything until rasterIO.
> RasterIO fills(in my case) void* pData with raster info - that's 
> great, but how to display it?

I do it like this:

1) Call GDALRasterIO to get the part of interest into a 2D table of 
floats or integers (ral_grid).

This happens in ral_grid_create_using_GDAL in 
https://github.com/ajolma/geoinformatica/blob/master/libral/ral_grid_rw.c

2) Create a ral_pixbuf (each pixel has RGBA values) of the same size as 
ral_grid.

3) Render the ral_grid onto the ral_pixbuf using current palette etc.

4) Convert the ral_pixbuf into GdkPixBuf.

5) Use the GdkPixBuf in a GTK+ image widget for display.

This happens in ral_pixbuf_create_from_grid, ral_render_integer_grid, 
and ral_gdk_pixbuf in 
https://github.com/ajolma/geoinformatica/blob/master/libral/ral_pixbuf.c

This is GTK+ specific. There are other Graphics toolkits.

>
> Which data is stored there when I use GDALDataset::rasterIO, and which 
> in case of GDALRasterBand::RasterIO?
>
> I.e. how to determine pixel values from pData?
>
> I'm sorry if this question is stupid, but i spent a lot of time in 
> google and didn't find any solution.

I hope the above helps.

Ari

>
> -- 
> Best Regards,
> Petr Kitashov
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/4d98e3b4/attachment.html
From thomas at silentwings.no  Thu May 10 11:03:46 2012
From: thomas at silentwings.no (tseval)
Date: Thu May 10 11:04:16 2012
Subject: [gdal-dev] Creating a VRT dataset from overviews in C++
Message-ID: <1336662226590-4965891.post@n6.nabble.com>

Hi,

I'm trying to cut and reproject a large image with overviews using the c++
api. This runs extremely slow when I produce highly downsampled cutouts
covering large areas of the original image.

I understand the the Warp API doesn't use the overviews when resampling, so
I wanted to make a temporary dataset from one of the downscaled overviews
and do the warping on this dataset instead.

First of all, is this a sensible way of doing things? If so, what driver
should I use? I guess VRT? I have been trying to create a VRT by doing
something like this:

	double scaleX = (double)ovrW/origW;
	double scaleY = (double)ovrH/origH;
	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
_dataType, NULL);
	GDALSetProjection(vrtDS, _srcProjectionWKT);
	double geoTransform[6];
	srcDS->GetGeoTransform(geoTransform);
	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
	vrtDS->SetGeoTransform(geoTransform);

But how am I supposed to set the bands in the VRT from the downscaled
overview bands in the original image?

Any help on this would be greatly appreciated :)


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From kaarigar at gmail.com  Thu May 10 11:30:46 2012
From: kaarigar at gmail.com (kaarigar)
Date: Thu May 10 11:31:05 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
Message-ID: <1336663846823-4965947.post@n6.nabble.com>


Etienne Tourigny-3 wrote
> 
> Something that is not apparent is that gdal_translate (via driver's
> GDALCreateCopy()) usually opens the new dataset after creation, and
> the XYZ file loading is slow:
> 
That explains it - the XYZ file created is ~4gb in size - it would take it a
very very long time to figure out the details from it. What I don't
understand is why gdal_translate would want to open the created xyz file? Is
there a special build of this utility that doesn't do this?

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu May 10 11:49:27 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 10 11:49:55 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <1336663846823-4965947.post@n6.nabble.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
Message-ID: <CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>

It should be possible to specially implement the CreateCopy for XYZ
format to avoid this.  I'll investigate this.

Best regards,


On Thu, May 10, 2012 at 8:30 AM, kaarigar <kaarigar@gmail.com> wrote:
>
> Etienne Tourigny-3 wrote
>>
>> Something that is not apparent is that gdal_translate (via driver's
>> GDALCreateCopy()) usually opens the new dataset after creation, and
>> the XYZ file loading is slow:
>>
> That explains it - the XYZ file created is ~4gb in size - it would take it a
> very very long time to figure out the details from it. What I don't
> understand is why gdal_translate would want to open the created xyz file? Is
> there a special build of this utility that doesn't do this?
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Thu May 10 11:56:28 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 10 11:56:31 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
Message-ID: <CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>

Folks,

I have discovered Even already implemented my idea for XYZ and AAIGRID
19 months ago.  Based on that I don't know why you are seeing a large
wait on closing.

  http://trac.osgeo.org/gdal/changeset/20770/trunk/gdal/frmts/xyz

hmm, I see a reference to 1.9dev - perhaps that was an old 1.9 pre-release
version that predated the above change?  Perhaps you just need to update.

Best regards,
Frank

On Thu, May 10, 2012 at 8:49 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> It should be possible to specially implement the CreateCopy for XYZ
> format to avoid this. ?I'll investigate this.
>
> Best regards,
>
>
> On Thu, May 10, 2012 at 8:30 AM, kaarigar <kaarigar@gmail.com> wrote:
>>
>> Etienne Tourigny-3 wrote
>>>
>>> Something that is not apparent is that gdal_translate (via driver's
>>> GDALCreateCopy()) usually opens the new dataset after creation, and
>>> the XYZ file loading is slow:
>>>
>> That explains it - the XYZ file created is ~4gb in size - it would take it a
>> very very long time to figure out the details from it. What I don't
>> understand is why gdal_translate would want to open the created xyz file? Is
>> there a special build of this utility that doesn't do this?
>>
>> --
>> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Thu May 10 12:06:56 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 10 12:07:36 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
	<CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
Message-ID: <CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>

Ah, I see I misunderstood what Even's change was doing.  I'll work on this.


On Thu, May 10, 2012 at 8:56 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Folks,
>
> I have discovered Even already implemented my idea for XYZ and AAIGRID
> 19 months ago. ?Based on that I don't know why you are seeing a large
> wait on closing.
>
> ?http://trac.osgeo.org/gdal/changeset/20770/trunk/gdal/frmts/xyz
>
> hmm, I see a reference to 1.9dev - perhaps that was an old 1.9 pre-release
> version that predated the above change? ?Perhaps you just need to update.
>
> Best regards,
> Frank
>
> On Thu, May 10, 2012 at 8:49 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> It should be possible to specially implement the CreateCopy for XYZ
>> format to avoid this. ?I'll investigate this.
>>
>> Best regards,
>>
>>
>> On Thu, May 10, 2012 at 8:30 AM, kaarigar <kaarigar@gmail.com> wrote:
>>>
>>> Etienne Tourigny-3 wrote
>>>>
>>>> Something that is not apparent is that gdal_translate (via driver's
>>>> GDALCreateCopy()) usually opens the new dataset after creation, and
>>>> the XYZ file loading is slow:
>>>>
>>> That explains it - the XYZ file created is ~4gb in size - it would take it a
>>> very very long time to figure out the details from it. What I don't
>>> understand is why gdal_translate would want to open the created xyz file? Is
>>> there a special build of this utility that doesn't do this?
>>>
>>> --
>>> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ivan.lucena at princeton-ma.us  Thu May 10 12:12:48 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu May 10 12:12:56 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmFzdGVyIHZpc3VhbGl6YXRpb24=?=
Message-ID: <20120510161249.26211.qmail@s466.sureserver.com>

Petr,

The GDAL API dos not contain visualization functions. So how to do it will dependents on the programming environment that you are working on, assuming that you are developing some kind of application. The pData pointer points to a memory array of pixels in the data type and the amount of data you requested in you call. You could just pass it to your GUI component or you could do some pixel accessing of your own if you want. 

Take a look at this example in Java [http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/GDALtest.java]

If all you want to do is to display a small region of a raster, you could simple use gdal_translate -of {JPEG,BMP,PNG} -srcwin?and open the little picture file on the desktop visualization tool that comes with the O.S.

C:/> gdal_translate -of bmp bigfile.tif out.bmp -srcwin 0 0 1024 1024
C:/> out.bmp

Regards,

Ivan

>??-------Original Message-------
>??From: Petr Kitashov <hilmekrhu@gmail.com>
>??To: gdal-dev@lists.osgeo.org
>??Subject: [gdal-dev] Raster visualization
>??Sent: May 10 '12 08:48
>??
>??Hi,
>??
>??I need just to display some region(any) from raster file.?Seems like I
>??understand everything until rasterIO.
>??RasterIO fills(in my case) void* pData with raster info -?that's
>??great, but how to display it?
>??
>??Which data is stored there when I use GDALDataset::rasterIO,?and which in
>??case of GDALRasterBand::RasterIO?
>??
>??I.e. how to determine pixel values from pData?
>??
>??I'm sorry if this question is stupid, but i spent a lot of time in
>??google and?didn't find any solution.?
>??
>??
>??--?
>??Best Regards,?
>??Petr Kitashov
>??--------------------
>??_______________________________________________
>??gdal-dev mailing list
>??[LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>??[LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>??http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Thu May 10 12:32:36 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 10 12:32:58 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
	<CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
	<CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>
Message-ID: <CA+YzLBeCTmVavA7AqC1GOemOGKLK_YGwUUU2DOfnAeYJ4WQ5Yg@mail.gmail.com>

OK, I have reworked the xyz driver a bit.  The change is at:

  http://trac.osgeo.org/gdal/changeset/24402

It should be possible to retrofit the driver into older version.  Code at:

  http://svn.osgeo.org/gdal/trunk/gdal/frmts/xyz/xyzdataset.cpp

Best regards,

On Thu, May 10, 2012 at 9:06 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ah, I see I misunderstood what Even's change was doing. ?I'll work on this.
>
>
> On Thu, May 10, 2012 at 8:56 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Folks,
>>
>> I have discovered Even already implemented my idea for XYZ and AAIGRID
>> 19 months ago. ?Based on that I don't know why you are seeing a large
>> wait on closing.
>>
>> ?http://trac.osgeo.org/gdal/changeset/20770/trunk/gdal/frmts/xyz
>>
>> hmm, I see a reference to 1.9dev - perhaps that was an old 1.9 pre-release
>> version that predated the above change? ?Perhaps you just need to update.
>>
>> Best regards,
>> Frank
>>
>> On Thu, May 10, 2012 at 8:49 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>>> It should be possible to specially implement the CreateCopy for XYZ
>>> format to avoid this. ?I'll investigate this.
>>>
>>> Best regards,
>>>
>>>
>>> On Thu, May 10, 2012 at 8:30 AM, kaarigar <kaarigar@gmail.com> wrote:
>>>>
>>>> Etienne Tourigny-3 wrote
>>>>>
>>>>> Something that is not apparent is that gdal_translate (via driver's
>>>>> GDALCreateCopy()) usually opens the new dataset after creation, and
>>>>> the XYZ file loading is slow:
>>>>>
>>>> That explains it - the XYZ file created is ~4gb in size - it would take it a
>>>> very very long time to figure out the details from it. What I don't
>>>> understand is why gdal_translate would want to open the created xyz file? Is
>>>> there a special build of this utility that doesn't do this?
>>>>
>>>> --
>>>> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> --
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush? ? | Geospatial Software Developer
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From kaarigar at gmail.com  Thu May 10 12:59:16 2012
From: kaarigar at gmail.com (Karu Kaarigar)
Date: Thu May 10 12:59:27 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+YzLBeCTmVavA7AqC1GOemOGKLK_YGwUUU2DOfnAeYJ4WQ5Yg@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
	<CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
	<CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>
	<CA+YzLBeCTmVavA7AqC1GOemOGKLK_YGwUUU2DOfnAeYJ4WQ5Yg@mail.gmail.com>
Message-ID: <CAJbDoZqgrE-z7UVyoos+TG4zGZUcEus-y=uKifbwskLFmVE40w@mail.gmail.com>

Thanks, Frank. I am not familiar with the gdal development at all. But I
think replacing the driver binary with this new one wit your change should
fix the behavior locally for me?

Kaarigar
============

On Thu, May 10, 2012 at 9:32 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> OK, I have reworked the xyz driver a bit.  The change is at:
>
>  http://trac.osgeo.org/gdal/changeset/24402
>
> It should be possible to retrofit the driver into older version.  Code at:
>
>  http://svn.osgeo.org/gdal/trunk/gdal/frmts/xyz/xyzdataset.cpp
>
> Best regards,
>
> On Thu, May 10, 2012 at 9:06 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> > Ah, I see I misunderstood what Even's change was doing.  I'll work on
> this.
> >
> >
> > On Thu, May 10, 2012 at 8:56 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> >> Folks,
> >>
> >> I have discovered Even already implemented my idea for XYZ and AAIGRID
> >> 19 months ago.  Based on that I don't know why you are seeing a large
> >> wait on closing.
> >>
> >>  http://trac.osgeo.org/gdal/changeset/20770/trunk/gdal/frmts/xyz
> >>
> >> hmm, I see a reference to 1.9dev - perhaps that was an old 1.9
> pre-release
> >> version that predated the above change?  Perhaps you just need to
> update.
> >>
> >> Best regards,
> >> Frank
> >>
> >> On Thu, May 10, 2012 at 8:49 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> >>> It should be possible to specially implement the CreateCopy for XYZ
> >>> format to avoid this.  I'll investigate this.
> >>>
> >>> Best regards,
> >>>
> >>>
> >>> On Thu, May 10, 2012 at 8:30 AM, kaarigar <kaarigar@gmail.com> wrote:
> >>>>
> >>>> Etienne Tourigny-3 wrote
> >>>>>
> >>>>> Something that is not apparent is that gdal_translate (via driver's
> >>>>> GDALCreateCopy()) usually opens the new dataset after creation, and
> >>>>> the XYZ file loading is slow:
> >>>>>
> >>>> That explains it - the XYZ file created is ~4gb in size - it would
> take it a
> >>>> very very long time to figure out the details from it. What I don't
> >>>> understand is why gdal_translate would want to open the created xyz
> file? Is
> >>>> there a special build of this utility that doesn't do this?
> >>>>
> >>>> --
> >>>> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-translate-waits-at-the-end-of-operation-tp4964258p4965947.html
> >>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>>
> >>>
> >>> --
> >>>
> ---------------------------------------+--------------------------------------
> >>> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> >>> light and sound - activate the windows | http://pobox.com/~warmerdam
> >>> and watch the world go round - Rush    | Geospatial Software Developer
> >>
> >>
> >>
> >> --
> >>
> ---------------------------------------+--------------------------------------
> >> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> >> light and sound - activate the windows | http://pobox.com/~warmerdam
> >> and watch the world go round - Rush    | Geospatial Software Developer
> >
> >
> >
> > --
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Software Developer
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/7199da87/attachment.html
From polimax at mail.ru  Thu May 10 13:11:48 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu May 10 13:11:56 2012
Subject: [gdal-dev] Creating a VRT dataset from overviews in C++
In-Reply-To: <1336662226590-4965891.post@n6.nabble.com>
References: <1336662226590-4965891.post@n6.nabble.com>
Message-ID: <4FABF6D4.8040007@mail.ru>

10.05.2012 19:03, tseval ???????:
> Hi,
>
> I'm trying to cut and reproject a large image with overviews using the c++
> api. This runs extremely slow when I produce highly downsampled cutouts
> covering large areas of the original image.
>
> I understand the the Warp API doesn't use the overviews when resampling, so
> I wanted to make a temporary dataset from one of the downscaled overviews
> and do the warping on this dataset instead.
>
> First of all, is this a sensible way of doing things? If so, what driver
> should I use? I guess VRT? I have been trying to create a VRT by doing
> something like this:
>
> 	double scaleX = (double)ovrW/origW;
> 	double scaleY = (double)ovrH/origH;
> 	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
> _dataType, NULL);
> 	GDALSetProjection(vrtDS, _srcProjectionWKT);
> 	double geoTransform[6];
> 	srcDS->GetGeoTransform(geoTransform);
> 	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
> 	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
> 	vrtDS->SetGeoTransform(geoTransform);
>
> But how am I supposed to set the bands in the VRT from the downscaled
> overview bands in the original image?
>
> Any help on this would be greatly appreciated :)
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi,

You can try to use this patch to enable overviews in VRT 
http://trac.osgeo.org/gdal/ticket/2076
or waits as I accomplish my work on fixing this 
situation.<http://trac.osgeo.org/gdal/ticket/2076>

Best regards,
     Dmitry
<http://trac.osgeo.org/gdal/ticket/2076>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/d94a497f/attachment-0001.html
From warmerdam at pobox.com  Thu May 10 13:17:08 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 10 13:17:29 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CAJbDoZqgrE-z7UVyoos+TG4zGZUcEus-y=uKifbwskLFmVE40w@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
	<CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
	<CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>
	<CA+YzLBeCTmVavA7AqC1GOemOGKLK_YGwUUU2DOfnAeYJ4WQ5Yg@mail.gmail.com>
	<CAJbDoZqgrE-z7UVyoos+TG4zGZUcEus-y=uKifbwskLFmVE40w@mail.gmail.com>
Message-ID: <CA+YzLBdAeX9tkKrq9qrWjV7C_2EfMhDn+vig1-ow0DyDPvMTjw@mail.gmail.com>

On Thu, May 10, 2012 at 9:59 AM, Karu Kaarigar <kaarigar@gmail.com> wrote:
> Thanks, Frank. I am not familiar with the gdal development at all. But I
> think replacing the driver binary with this new one wit your change should
> fix the behavior locally for me?
>
> Kaarigar
> ============

Kaarigar,

The XYZ driver is not built as a distinct driver.  It is just built into the
main GDAL .so/.dll.  If you are using pre-built binaries i may be hard
to incorporate the change.  If you are building from source, just replace
the xyzdataset.cpp file.

In any event, you can just run with the gdal_translate you have now.  It
will just be inefficient.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From KShannon at gcs-research.com  Thu May 10 13:31:55 2012
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Thu May 10 13:43:04 2012
Subject: [gdal-dev] Re: gdal_translate waits at the end of operation
In-Reply-To: <CA+YzLBdAeX9tkKrq9qrWjV7C_2EfMhDn+vig1-ow0DyDPvMTjw@mail.gmail.com>
References: <1336604761454-4964258.post@n6.nabble.com>
	<CAJ0mEz20p2vAaCkEdb3_RZoyVnFPWaXmH7Ei5vnLirUK22dLQA@mail.gmail.com>
	<1336606453481-4964307.post@n6.nabble.com>
	<CAJ0mEz07G58d3o3pcVHgiqg8bcL2pSKefn0SoxTKLsE_mCjYng@mail.gmail.com>
	<1336609078159-4964362.post@n6.nabble.com>
	<CA+TxYvPE6WncUzhSaiwfJ8pMwWrudLu3UuyPh_tqLHjQX-z7iA@mail.gmail.com>
	<1336630575423-4964870.post@n6.nabble.com>
	<CA+TxYvO86vwmXai2DD9cLzQT5vMN3RCWoqKSs6JMfisUt3CHAw@mail.gmail.com>
	<1336663846823-4965947.post@n6.nabble.com>
	<CA+YzLBeHmVvT08p9QLC+H=UOzKBs-HJ4JfiJZV7UR+LC+w_Faw@mail.gmail.com>
	<CA+YzLBf38OcV60_B3pkdwZ55UwEawRiRT3Jtp+MvTf1fhDULOQ@mail.gmail.com>
	<CA+YzLBdZBBrCKZWJn78sa1p-LKUjyOXfL7xLgw5B52t_0kHviw@mail.gmail.com>
	<CA+YzLBeCTmVavA7AqC1GOemOGKLK_YGwUUU2DOfnAeYJ4WQ5Yg@mail.gmail.com>
	<CAJbDoZqgrE-z7UVyoos+TG4zGZUcEus-y=uKifbwskLFmVE40w@mail.gmail.com>
	<CA+YzLBdAeX9tkKrq9qrWjV7C_2EfMhDn+vig1-ow0DyDPvMTjw@mail.gmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B975AB76AD@MAIL.gcs-research.net>

Kaarigar,

You can pick up new binaries tomorrow at:
gisinternals.com/sdk
I don't know at exactly what time the packages get built, but they are built daily.

kss

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Thursday, May 10, 2012 11:17 AM
To: kaarigar@gmail.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Re: gdal_translate waits at the end of operation

On Thu, May 10, 2012 at 9:59 AM, Karu Kaarigar <kaarigar@gmail.com> wrote:
> Thanks, Frank. I am not familiar with the gdal development at all. But 
> I think replacing the driver binary with this new one wit your change 
> should fix the behavior locally for me?
>
> Kaarigar
> ============

Kaarigar,

The XYZ driver is not built as a distinct driver.  It is just built into the main GDAL .so/.dll.  If you are using pre-built binaries i may be hard to incorporate the change.  If you are building from source, just replace the xyzdataset.cpp file.

In any event, you can just run with the gdal_translate you have now.  It will just be inefficient.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com light and sound - activate the windows | http://pobox.com/~warmerdam and watch the world go round - Rush? ? | Geospatial Software Developer _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From thomas at silentwings.no  Thu May 10 15:16:23 2012
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Thu May 10 15:16:37 2012
Subject: [gdal-dev] Creating a VRT dataset from overviews in C++
In-Reply-To: <4FABF6D4.8040007@mail.ru>
References: <1336662226590-4965891.post@n6.nabble.com>
	<4FABF6D4.8040007@mail.ru>
Message-ID: <CAJSDX1gaor3hv5S+MgaoeVGYTkZ601chxNojL5548Z5VwtLqAg@mail.gmail.com>

Hi Dmitry, and thanks for your answer!

I was actually looking at this patch earlier today, but I also wanted to
see if I could solve it without patching.

Will this patch be included in the official source?

Is it possible to do it the way I described in the previous mail?

Cheers,
Thomas

On Thu, May 10, 2012 at 7:11 PM, Dmitry Baryshnikov <polimax@mail.ru> wrote:

>  10.05.2012 19:03, tseval ???????:
>
> Hi,
>
> I'm trying to cut and reproject a large image with overviews using the c++
> api. This runs extremely slow when I produce highly downsampled cutouts
> covering large areas of the original image.
>
> I understand the the Warp API doesn't use the overviews when resampling, so
> I wanted to make a temporary dataset from one of the downscaled overviews
> and do the warping on this dataset instead.
>
> First of all, is this a sensible way of doing things? If so, what driver
> should I use? I guess VRT? I have been trying to create a VRT by doing
> something like this:
>
> 	double scaleX = (double)ovrW/origW;
> 	double scaleY = (double)ovrH/origH;
> 	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
> _dataType, NULL);
> 	GDALSetProjection(vrtDS, _srcProjectionWKT);
> 	double geoTransform[6];
> 	srcDS->GetGeoTransform(geoTransform);
> 	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
> 	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
> 	vrtDS->SetGeoTransform(geoTransform);
>
> But how am I supposed to set the bands in the VRT from the downscaled
> overview bands in the original image?
>
> Any help on this would be greatly appreciated :)
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>  Hi,
>
> You can try to use this patch to enable overviews in VRT
> http://trac.osgeo.org/gdal/ticket/2076
> or waits as I accomplish my work on fixing this situation.
> <http://trac.osgeo.org/gdal/ticket/2076>
>
> Best regards,
>     Dmitry
>  <http://trac.osgeo.org/gdal/ticket/2076>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120510/56f7d503/attachment.html
From polimax at mail.ru  Thu May 10 16:00:34 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu May 10 16:00:55 2012
Subject: Fwd: Re: [gdal-dev] Creating a VRT dataset from overviews in C++
In-Reply-To: <4FAC1DFD.9000102@mail.ru>
References: <4FAC1DFD.9000102@mail.ru>
Message-ID: <4FAC1E62.8030008@mail.ru>



-------- ???????? ????????? --------
????: 	Re: [gdal-dev] Creating a VRT dataset from overviews in C++
????: 	Thu, 10 May 2012 23:58:53 +0400
??: 	Dmitry Baryshnikov <polimax@mail.ru>
????: 	Thomas Sevaldrud <thomas@silentwings.no>



10.05.2012 23:14, Thomas Sevaldrud ???????:
> Hi Dmitry, and thanks for your answer!
Hi Thomas!
>
> I was actually looking at this patch earlier today, but I also wanted 
> to see if I could solve it without patching.
>
> Will this patch be included in the official source?
My patch needs some refactoring and testing on python bindings. The work 
is going on , but not so fast as I wish. As I finished and commit my 
code, It'll be some testing period and than fixes will be accepted.
>
> Is it possible to do it the way I described in the previous mail?
Yes, you can try to warp and overview images (bands). You can get an 
overview of needed level from GDALRasterBand Class via GetOverview (int) 
method, but than you need to work on band basis and mixed them in colour 
image by yourself.
>
> Cheers,
> Thomas
>
> On Thu, May 10, 2012 at 7:11 PM, Dmitry Baryshnikov <polimax@mail.ru 
> <mailto:polimax@mail.ru>> wrote:
>
>     10.05.2012 19:03, tseval ???????:
>>     Hi,
>>
>>     I'm trying to cut and reproject a large image with overviews using the c++
>>     api. This runs extremely slow when I produce highly downsampled cutouts
>>     covering large areas of the original image.
>>
>>     I understand the the Warp API doesn't use the overviews when resampling, so
>>     I wanted to make a temporary dataset from one of the downscaled overviews
>>     and do the warping on this dataset instead.
>>
>>     First of all, is this a sensible way of doing things? If so, what driver
>>     should I use? I guess VRT? I have been trying to create a VRT by doing
>>     something like this:
>>
>>     	double scaleX = (double)ovrW/origW;
>>     	double scaleY = (double)ovrH/origH;
>>     	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
>>     _dataType, NULL);
>>     	GDALSetProjection(vrtDS, _srcProjectionWKT);
>>     	double geoTransform[6];
>>     	srcDS->GetGeoTransform(geoTransform);
>>     	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
>>     	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
>>     	vrtDS->SetGeoTransform(geoTransform);
>>
>>     But how am I supposed to set the bands in the VRT from the downscaled
>>     overview bands in the original image?
>>
>>     Any help on this would be greatly appreciated :)
>>
>>
>>     --
>>     View this message in context:http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
>>     Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>     Hi,
>
>     You can try to use this patch to enable overviews in VRT
>     http://trac.osgeo.org/gdal/ticket/2076
>     or waits as I accomplish my work on fixing this
>     situation.<http://trac.osgeo.org/gdal/ticket/2076>
>
>     Best regards,
>         Dmitry
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/41f87b4d/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Thu May 10 18:07:34 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu May 10 18:08:11 2012
Subject: [gdal-dev] Scale dependent VRT for overviews
Message-ID: <loom.20120510T223139-789@post.gmane.org>

Hi,

This is a long letter and finally it will lead to a suggestion about
implementing some kind of a Virtual Overview (VOV) system for organising a
number of GDAL datasets into a one top level dataset in such a way that GDAL can
automatically select the best source for the requested scale. Same thing is used
in Mapserver through a layer group and scale dependent layers.
---

I noticed today that I had same problem than Andrea Peri some time ago
http://article.gmane.org/gmane.comp.gis.gdal.devel/31177

I had built an biggish image mosaic as VRT. Size of the mosaic was 288000 by
480000 pixels and it was combined fron 400 paletted raster maps (8-bit with a
palette. Naturally I wanted to build some overviews for the VRT and naturally I
started to create them with gdaladdo.  After two hours it was still showing me
zero percant progress. I stopped the job, read Andrea's mail and concluded that
perhaps gdaladdo does not work very well with big VRT files.

I started to think about alternative methods. ECW and JPEG2000 would be pretty
good because they offer overviews for free. Unfortunately ECW itself is not free
and free GDAL JPEG2000 drivers are not fast enough. And even I can mysself write
JPEG2000 with a good licenced SDK our users do not have licensed readers and
slow JPEG2000 drivers are slow in reading too. Thus I will keep on waiting for a
JPEG2000 driver that is at the same time flaming fast AND open.

Then I had a try with dropping the resolution of VRT into half by using
gdalwarp. It managed to convert the VRT into GeoTIFF with double sized pixels in
three hours. Gdalwarp gives also an option to select the resampling method which
is nice sometimes. Gdaladdo has that option too but you may remember that the
program itself seems to be unusable for this purpose.

Three hours felt still rather slow. Then I measured how long it would take to
convert the individual images forming up the VRT with gdal_translate and
-outsize 50% 50%. It took only half on hour. Running gdalbuildvrt took a few
seconds more and I had the first reduced resolution level ready.

First run with gdal_translate gave reasonably good quality but the next reduced
level looked very bad. Several nearest neighbour samplings in a row is obviously
not so good method. I had now paletted raster maps and they do not tolerate
subsampling well with any method. I made some more tests and found that
converting images one be one with gdalwarp was a suitable compromise for me. It
was slower than gdal_translate but gave better looking result and converting all
individual files one by one was faster than converting the VRT as a whole.

After playing with a whole many variations with gdal_translate and gdalwarp,
including some convertions of subareas frpom the VRT for getting bigger tiles
and less files for low resolution scales I had a nice set in my hands. I had no
idea about how to ulilise them as a one GDAL data set but because I have some
experience on Mapserver I just gathered the images for each resolution level
with gdaltindex and then build a scale dependent WMS layer group and all the GIS
programs consuming WMS are happy. However it would be awfull to teach the
process for someone and even I can make a well working WMS service for our
customers I cannot deliver the data which is an odd mess now and only usable as
a one data source for Mapserver.

Now finally to my suggestion. To me GDAL virtual format is quite a lot similar
than Mapserver tileindex, though much more feature rich. But with Mapserver it
is very easy to combine layers into scale dependent layer groups be setting
suitable MINSCALEDENOM and MAXSCALEDENOM values for the individual layers.

Dear GDAL developers, I hope you can find some nice place inside the VRT XML
file for setting MINSCALEDEMON and MAXSCALEDENOM for "SimpleSource" or for some
new "SimpleSourceGroup" or whatever you feel suitable.

Regards,


-Jukka Rahkonen-




From swapsslan at gmail.com  Fri May 11 00:29:30 2012
From: swapsslan at gmail.com (Swapnil Chaudhari)
Date: Fri May 11 00:30:15 2012
Subject: [gdal-dev] Batch Processing for gdal_calc.py
In-Reply-To: <CADbYAJANpCu3t8GzZns1gxergo2WACo+nqqeyMOOjg_cy8iRNA@mail.gmail.com>
References: <CADbYAJANpCu3t8GzZns1gxergo2WACo+nqqeyMOOjg_cy8iRNA@mail.gmail.com>
Message-ID: <CADbYAJCJbfghYgrZoKVvoKnVFBfOVwDA_fvsN_uAOzSDi5be8A@mail.gmail.com>

Dear All,

I would like to get your advise on running gdal_calc using shell.
I am finding it difficult, mostly because the command requires you to
define what ?-A stands for etc. which is quite different from
gdal_translate or such similar tools, so is the case with Raster
package in R.

I wish to scale all the temperature ascii grids that I have for quite
a few number of folders.

I wrote following sh file

for f in *.tif
do
? echo "Processing $f"
? gdal_calc -A $f --outfile=$f_scaled.asc --calc=A/10
done


However, I am making a mistake somewhere, it does not read above
script as a command. I wish to divide all the?rasters?with 10 and also
equally wish to make all output files extent as "-projwin -180.0 90.0
180.0?-60.0" and?column?720 with rows 300

I would be really thankful if you can give some suggestion on this.

Thanks a ton.

Swapnil Chaudhari

? o__
?_> /__
(_) \(_)....... live healthy
From chaitanya.ch at gmail.com  Fri May 11 01:12:24 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri May 11 01:12:54 2012
Subject: [gdal-dev] Batch Processing for gdal_calc.py
In-Reply-To: <CADbYAJCJbfghYgrZoKVvoKnVFBfOVwDA_fvsN_uAOzSDi5be8A@mail.gmail.com>
References: <CADbYAJANpCu3t8GzZns1gxergo2WACo+nqqeyMOOjg_cy8iRNA@mail.gmail.com>
	<CADbYAJCJbfghYgrZoKVvoKnVFBfOVwDA_fvsN_uAOzSDi5be8A@mail.gmail.com>
Message-ID: <CAMKgpOa4VxD5mwdzx8iPhXmg2p7xDqu485-Snz-Lc-+9orkAag@mail.gmail.com>

Swapnil,

You missed the --format option with gdal_calc. If you don't mention it, it
assumes the default format, GeoTiff.

Since the operation is simple, you should be able to do that using
gdal_translate using the -scale option. It also has the -projwin option to
select the extents.

On Fri, May 11, 2012 at 9:59 AM, Swapnil Chaudhari <swapsslan@gmail.com>wrote:

> Dear All,
>
> I would like to get your advise on running gdal_calc using shell.
> I am finding it difficult, mostly because the command requires you to
> define what  -A stands for etc. which is quite different from
> gdal_translate or such similar tools, so is the case with Raster
> package in R.
>
> I wish to scale all the temperature ascii grids that I have for quite
> a few number of folders.
>
> I wrote following sh file
>
> for f in *.tif
> do
>   echo "Processing $f"
>   gdal_calc -A $f --outfile=$f_scaled.asc --calc=A/10
> done
>
>
> However, I am making a mistake somewhere, it does not read above
> script as a command. I wish to divide all the rasters with 10 and also
> equally wish to make all output files extent as "-projwin -180.0 90.0
> 180.0 -60.0" and column 720 with rows 300
>
> I would be really thankful if you can give some suggestion on this.
>
> Thanks a ton.
>
> Swapnil Chaudhari
>
>   o__
>  _> /__
> (_) \(_)....... live healthy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/d93a6c26/attachment.html
From swapsslan at gmail.com  Fri May 11 01:35:55 2012
From: swapsslan at gmail.com (Swapnil Chaudhari)
Date: Fri May 11 01:36:06 2012
Subject: [gdal-dev] Batch Processing for gdal_calc.py
In-Reply-To: <CAMKgpOa4VxD5mwdzx8iPhXmg2p7xDqu485-Snz-Lc-+9orkAag@mail.gmail.com>
References: <CADbYAJANpCu3t8GzZns1gxergo2WACo+nqqeyMOOjg_cy8iRNA@mail.gmail.com>
	<CADbYAJCJbfghYgrZoKVvoKnVFBfOVwDA_fvsN_uAOzSDi5be8A@mail.gmail.com>
	<CAMKgpOa4VxD5mwdzx8iPhXmg2p7xDqu485-Snz-Lc-+9orkAag@mail.gmail.com>
Message-ID: <CADbYAJANEsBLJM=V4GBRBdT+_AUKQ9VYCkGsLNGFnMAGkLtNiw@mail.gmail.com>

Hi Chaitanya,

Thank you for your response. I tried inserting the --format option. It
still gives me the same error.
I would be glad if you can describe the --scale function. It asks for
, [-scale [src_min src_max [dst_min dst_max]]]
How do you put a formula here? like "raster/10"

Thanks a ton! I think you have given me a way to do it.

Swapnil
? o__
?_> /__
(_) \(_)....... live healthy



On Fri, May 11, 2012 at 10:42 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Swapnil,
>
> You missed the --format option with gdal_calc. If you don't mention it, it
> assumes the default format, GeoTiff.
>
> Since the operation is simple, you should be able to do that using
> gdal_translate using the -scale option. It also has the -projwin option to
> select the extents.
>
> On Fri, May 11, 2012 at 9:59 AM, Swapnil Chaudhari <swapsslan@gmail.com>
> wrote:
>>
>> Dear All,
>>
>> I would like to get your advise on running gdal_calc using shell.
>> I am finding it difficult, mostly because the command requires you to
>> define what ?-A stands for etc. which is quite different from
>> gdal_translate or such similar tools, so is the case with Raster
>> package in R.
>>
>> I wish to scale all the temperature ascii grids that I have for quite
>> a few number of folders.
>>
>> I wrote following sh file
>>
>> for f in *.tif
>> do
>> ? echo "Processing $f"
>> ? gdal_calc -A $f --outfile=$f_scaled.asc --calc=A/10
>> done
>>
>>
>> However, I am making a mistake somewhere, it does not read above
>> script as a command. I wish to divide all the?rasters?with 10 and also
>> equally wish to make all output files extent as "-projwin -180.0 90.0
>> 180.0?-60.0" and?column?720 with rows 300
>>
>> I would be really thankful if you can give some suggestion on this.
>>
>> Thanks a ton.
>>
>> Swapnil Chaudhari
>>
>> ? o__
>> ?_> /__
>> (_) \(_)....... live healthy
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
From thomas at silentwings.no  Fri May 11 03:50:49 2012
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Fri May 11 03:50:59 2012
Subject: [gdal-dev] Creating a VRT dataset from overviews in C++
In-Reply-To: <4FAC1E62.8030008@mail.ru>
References: <4FAC1DFD.9000102@mail.ru>
	<4FAC1E62.8030008@mail.ru>
Message-ID: <CAJSDX1jZxb0fL7XdQaLUm+fpfTr_3c0JZMXNqR53Sn=9N+5KTw@mail.gmail.com>

>
> 10.05.2012 23:14, Thomas Sevaldrud ???????:
>
> Hi Dmitry, and thanks for your answer!
>
> Hi Thomas!
>
>
>  I was actually looking at this patch earlier today, but I also wanted to
> see if I could solve it without patching.
>
>  Will this patch be included in the official source?
>
> My patch needs some refactoring and testing on python bindings. The work
> is going on , but not so fast as I wish. As I finished and commit my code,
> It'll be some testing period and than fixes will be accepted.
>
>
>  Is it possible to do it the way I described in the previous mail?
>
> Yes, you can try to warp and overview images (bands). You can get an
> overview of needed level from GDALRasterBand Class via GetOverview (int)
> method, but than you need to work on band basis and mixed them in colour
> image by yourself.
>

This is probably a stupid question, but I couldn't find it anywhere in the
documentation. How do I create a GDALDataset from a set of existing
GDALRasterBands?

I guess I could copy the pixel data with the RasterIO methods, but I was
hoping I could make a VRT or something from a set of existing overview
bands and then do the warping on this, to avoid the copying of a
potentially huge dataset.

- Thomas


>  Cheers,
> Thomas
>
> On Thu, May 10, 2012 at 7:11 PM, Dmitry Baryshnikov <polimax@mail.ru>wrote:
>
>>  10.05.2012 19:03, tseval ???????:
>>
>> Hi,
>>
>> I'm trying to cut and reproject a large image with overviews using the c++
>> api. This runs extremely slow when I produce highly downsampled cutouts
>> covering large areas of the original image.
>>
>> I understand the the Warp API doesn't use the overviews when resampling, so
>> I wanted to make a temporary dataset from one of the downscaled overviews
>> and do the warping on this dataset instead.
>>
>> First of all, is this a sensible way of doing things? If so, what driver
>> should I use? I guess VRT? I have been trying to create a VRT by doing
>> something like this:
>>
>> 	double scaleX = (double)ovrW/origW;
>> 	double scaleY = (double)ovrH/origH;
>> 	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
>> _dataType, NULL);
>> 	GDALSetProjection(vrtDS, _srcProjectionWKT);
>> 	double geoTransform[6];
>> 	srcDS->GetGeoTransform(geoTransform);
>> 	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
>> 	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
>> 	vrtDS->SetGeoTransform(geoTransform);
>>
>> But how am I supposed to set the bands in the VRT from the downscaled
>> overview bands in the original image?
>>
>> Any help on this would be greatly appreciated :)
>>
>>
>> --
>> View this message in context: http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>   Hi,
>>
>> You can try to use this patch to enable overviews in VRT
>> http://trac.osgeo.org/gdal/ticket/2076
>> or waits as I accomplish my work on fixing this situation.
>> <http://trac.osgeo.org/gdal/ticket/2076>
>>
>> Best regards,
>>     Dmitry
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>  Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/ac59ab41/attachment-0001.html
From polimax at mail.ru  Fri May 11 04:53:46 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri May 11 04:54:16 2012
Subject: [gdal-dev] Creating a VRT dataset from overviews in C++
In-Reply-To: <CAJSDX1jZxb0fL7XdQaLUm+fpfTr_3c0JZMXNqR53Sn=9N+5KTw@mail.gmail.com>
References: <4FAC1DFD.9000102@mail.ru> <4FAC1E62.8030008@mail.ru>
	<CAJSDX1jZxb0fL7XdQaLUm+fpfTr_3c0JZMXNqR53Sn=9N+5KTw@mail.gmail.com>
Message-ID: <4FACD39A.4020109@mail.ru>

11.05.2012 11:50, Thomas Sevaldrud ???????:
>
>     10.05.2012 23:14, Thomas Sevaldrud ???????:
>>     Hi Dmitry, and thanks for your answer!
>     Hi Thomas!
>>
>>     I was actually looking at this patch earlier today, but I also
>>     wanted to see if I could solve it without patching.
>>
>>     Will this patch be included in the official source?
>     My patch needs some refactoring and testing on python bindings.
>     The work is going on , but not so fast as I wish. As I finished
>     and commit my code, It'll be some testing period and than fixes
>     will be accepted.
>>
>>     Is it possible to do it the way I described in the previous mail?
>     Yes, you can try to warp and overview images (bands). You can get
>     an overview of needed level from GDALRasterBand Class via
>     GetOverview (int) method, but than you need to work on band basis
>     and mixed them in colour image by yourself.
>
>
> This is probably a stupid question, but I couldn't find it anywhere in 
> the documentation. How do I create a GDALDataset from a set of 
> existing GDALRasterBands?
>
> I guess I could copy the pixel data with the RasterIO methods, but I 
> was hoping I could make a VRT or something from a set of existing 
> overview bands and then do the warping on this, to avoid the copying 
> of a potentially huge dataset.
I don't sure 100% but you can play with VRTDataset. Look at this 
method:  GDALAddBand and VRTAddSimpleSource. Maybe CreateVRTSeparate 
method from apps\gdalbuildvrt.cpp will be helpful.
>
> - Thomas
>
>>     Cheers,
>>     Thomas
>>
>>     On Thu, May 10, 2012 at 7:11 PM, Dmitry Baryshnikov
>>     <polimax@mail.ru <mailto:polimax@mail.ru>> wrote:
>>
>>         10.05.2012 19:03, tseval ???????:
>>>         Hi,
>>>
>>>         I'm trying to cut and reproject a large image with overviews using the c++
>>>         api. This runs extremely slow when I produce highly downsampled cutouts
>>>         covering large areas of the original image.
>>>
>>>         I understand the the Warp API doesn't use the overviews when resampling, so
>>>         I wanted to make a temporary dataset from one of the downscaled overviews
>>>         and do the warping on this dataset instead.
>>>
>>>         First of all, is this a sensible way of doing things? If so, what driver
>>>         should I use? I guess VRT? I have been trying to create a VRT by doing
>>>         something like this:
>>>
>>>         	double scaleX = (double)ovrW/origW;
>>>         	double scaleY = (double)ovrH/origH;
>>>         	GDALDataset* vrtDS = vrtDriver->Create("", ovrW, ovrH, _numBands,
>>>         _dataType, NULL);
>>>         	GDALSetProjection(vrtDS, _srcProjectionWKT);
>>>         	double geoTransform[6];
>>>         	srcDS->GetGeoTransform(geoTransform);
>>>         	geoTransform[XFM_PIXEL_SIZE_EW] = scaleX*geoTransform[XFM_PIXEL_SIZE_EW];
>>>         	geoTransform[XFM_PIXEL_SIZE_NS] = scaleY*geoTransform[XFM_PIXEL_SIZE_NS];
>>>         	vrtDS->SetGeoTransform(geoTransform);
>>>
>>>         But how am I supposed to set the bands in the VRT from the downscaled
>>>         overview bands in the original image?
>>>
>>>         Any help on this would be greatly appreciated :)
>>>
>>>
>>>         --
>>>         View this message in context:http://osgeo-org.1560.n6.nabble.com/Creating-a-VRT-dataset-from-overviews-in-C-tp4965891.html
>>>         Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>         _______________________________________________
>>>         gdal-dev mailing list
>>>         gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>         Hi,
>>
>>         You can try to use this patch to enable overviews in VRT
>>         http://trac.osgeo.org/gdal/ticket/2076
>>         or waits as I accomplish my work on fixing this
>>         situation.<http://trac.osgeo.org/gdal/ticket/2076>
>>
>>         Best regards,
>>             Dmitry
>>
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>     Best regards,
>         Dmitry
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/26e32f94/attachment.html
From chaitanya.ch at gmail.com  Fri May 11 05:02:24 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri May 11 05:03:06 2012
Subject: [gdal-dev] Batch Processing for gdal_calc.py
In-Reply-To: <CADbYAJANEsBLJM=V4GBRBdT+_AUKQ9VYCkGsLNGFnMAGkLtNiw@mail.gmail.com>
References: <CADbYAJANpCu3t8GzZns1gxergo2WACo+nqqeyMOOjg_cy8iRNA@mail.gmail.com>
	<CADbYAJCJbfghYgrZoKVvoKnVFBfOVwDA_fvsN_uAOzSDi5be8A@mail.gmail.com>
	<CAMKgpOa4VxD5mwdzx8iPhXmg2p7xDqu485-Snz-Lc-+9orkAag@mail.gmail.com>
	<CADbYAJANEsBLJM=V4GBRBdT+_AUKQ9VYCkGsLNGFnMAGkLtNiw@mail.gmail.com>
Message-ID: <CAMKgpOaqYpBEpRefJcZATU=hUk70Gg7hmPpgy3JbpDbGAM+cig@mail.gmail.com>

Swapnil,

I'm not sure which shell script you are running, but in bash, you need to
have semicolons somewhere there.

The -scale option does a linear stretch of the pixel values. So, if you
have values ranging from 0 to 250, "-scale 0 250 0 25" will do the job you
are trying to do.

Please add the error messages if you still have any more problems.

On Fri, May 11, 2012 at 11:05 AM, Swapnil Chaudhari <swapsslan@gmail.com>wrote:

> Hi Chaitanya,
>
> Thank you for your response. I tried inserting the --format option. It
> still gives me the same error.
> I would be glad if you can describe the --scale function. It asks for
> , [-scale [src_min src_max [dst_min dst_max]]]
> How do you put a formula here? like "raster/10"
>
> Thanks a ton! I think you have given me a way to do it.
>
> Swapnil
>   o__
>  _> /__
> (_) \(_)....... live healthy
>
>
>
> On Fri, May 11, 2012 at 10:42 AM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
> > Swapnil,
> >
> > You missed the --format option with gdal_calc. If you don't mention it,
> it
> > assumes the default format, GeoTiff.
> >
> > Since the operation is simple, you should be able to do that using
> > gdal_translate using the -scale option. It also has the -projwin option
> to
> > select the extents.
> >
> > On Fri, May 11, 2012 at 9:59 AM, Swapnil Chaudhari <swapsslan@gmail.com>
> > wrote:
> >>
> >> Dear All,
> >>
> >> I would like to get your advise on running gdal_calc using shell.
> >> I am finding it difficult, mostly because the command requires you to
> >> define what  -A stands for etc. which is quite different from
> >> gdal_translate or such similar tools, so is the case with Raster
> >> package in R.
> >>
> >> I wish to scale all the temperature ascii grids that I have for quite
> >> a few number of folders.
> >>
> >> I wrote following sh file
> >>
> >> for f in *.tif
> >> do
> >>   echo "Processing $f"
> >>   gdal_calc -A $f --outfile=$f_scaled.asc --calc=A/10
> >> done
> >>
> >>
> >> However, I am making a mistake somewhere, it does not read above
> >> script as a command. I wish to divide all the rasters with 10 and also
> >> equally wish to make all output files extent as "-projwin -180.0 90.0
> >> 180.0 -60.0" and column 720 with rows 300
> >>
> >> I would be really thankful if you can give some suggestion on this.
> >>
> >> Thanks a ton.
> >>
> >> Swapnil Chaudhari
> >>
> >>   o__
> >>  _> /__
> >> (_) \(_)....... live healthy
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/554d9f11/attachment.html
From rlpires at gmail.com  Fri May 11 10:25:15 2012
From: rlpires at gmail.com (Rui L. Pires)
Date: Fri May 11 10:25:26 2012
Subject: [gdal-dev] bug: OGRDataSource, Postgis driver
Message-ID: <CAP6xJcacvpxOq3pgoUmQPZadmLH9-ogYV7E0-cxiychrqNU3dg@mail.gmail.com>

Hello everyone,

this is a bug report concerning OGRDataSource, for the Postgis driver,
using GDAL 1.9.0.

TestCapability _reports_ being able to create and delete layers,
irrespective of the data source being opened with the update flag
activated in the driver registrar.

A (postgis) data source opened with the update flag set to false was
also _confirmed_ to be able to create and delete layers.

Should a ticket be opened, shall someone take care of that once you
read this message?

Kind regards,
-RLP
From talbertc at usgs.gov  Fri May 11 12:29:03 2012
From: talbertc at usgs.gov (Colin Talbert)
Date: Fri May 11 12:44:34 2012
Subject: [gdal-dev] python gdal.gdal.ReprojectImage not masking NoData in
	signed byte geotifs
Message-ID: <OFA1B15633.3C206AA5-ON872579FB.005A70B7-872579FB.005A8D53@usgs.gov>

Hello all,
    I'm running into an issue reprojecting a single band geotif in python. 

My code works fine on pixel types other than signed byte.  What I'm seeing
is that the interpolation that includes a nodata pixel uses the literal
nodata value (-128 is the nodata but I think this is being interpreted as
128).  In my example I have a grid with values between 0 and 60 and areas 
of
nodata.  Pixels bordering the nodata areas have values up to 126 in the
output.   I've also tried to recreate this process using gdalwarp and I
think I'm getting the same problem.

Thanks for any help or projections.  FYI I'm on GDAL 1.8

Attached are the small test files I'm using.  BigSage.tif is the input,
template2.tif has the projection info and extent I'm using for the output,
output.tif is what I'm getting.
http://osgeo-org.1560.n6.nabble.com/file/n4967005/BigSage.tif BigSage.tif 
http://osgeo-org.1560.n6.nabble.com/file/n4967005/template2.tif
template2.tif  
http://osgeo-org.1560.n6.nabble.com/file/n4967005/output.tif
output.tif 

Below is a striped down version of my code:
tifDriver = gdal.GetDriverByName("GTiff")
tmpOutDataset = tifDriver.Create(tmpOutput, width, height, 1, 
gdal.GDT_Byte,
["PIXELTYPE=SIGNEDBYTE"])
#omited code to set cell size, geotransform, NoData, projection
tmpOutDataset.GetRasterBand(1).PixelType = "SIGNEDBYTE"
tmpOutDataset.GetRasterBand(1).SetMetadata({'PIXELTYPE': 'SIGNEDBYTE'},
'IMAGE_STRUCTURE')

err = gdal.ReprojectImage(srcDs, tmpOutDataset, sourcesrs.ExportToWkt(), 
                                templatesrs.ExportToWkt(),
gdal.GRA_Bilinear)


--
View this message in context: 
http://osgeo-org.1560.n6.nabble.com/python-gdal-gdal-ReprojectImage-not-masking-NoData-in-signed-byte-geotifs-tp4967005.html

Sent from the GDAL - Dev mailing list archive at Nabble.com.



Colin Talbert
GIS Specialist
US Geological Survey - Fort Collins Science Center
2150 Centre Ave. Bldg. C
Fort Collins, CO 80526

(970) 226-9425
talbertc@usgs.gov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120511/47e8ead5/attachment.html
From wonder.sk at gmail.com  Fri May 11 16:08:16 2012
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri May 11 16:08:54 2012
Subject: [gdal-dev] Force bounding box test for spatial filter in OGR
Message-ID: <CAC2XbFdCm9vBNW4Xuj_wfnaSG6ftMwUtYhfHTjo3_goPZnp0XA@mail.gmail.com>

Hi all,

when fetching features in OGR with an active spatial filter, first a
bounding box test is used to resolve simple cases and then exact
intersection with GEOS is done to determine whether the feature is
really within the filter (if compiled with GEOS). I would like to have
an option to force only bounding box test without the expensive GEOS
intersection.

Motivation: recently I have encountered a shapefile with contour
lines: 72K features, geometries with lots of vertices. When displaying
about 1/2 of the layer's extent in QGIS, it takes ~106 seconds to get
the map rendered! When I temporarily disabled setting of spatial
filter in OGR provider, the rendering time went down to ~5 seconds.
That's a great difference, isn't it? I know that this is not the most
typical case, but still it matters. (For the record, spatial index
made little to no difference to original time since the contour lines
are spread out). In general when rendering one does not care so much
if also features slightly outside of the current extent get fetched -
they will be clipped by the rendering engine and that is definitely
faster than the intersection algorithm.

Do you have any suggestions how such option should be implemented -
e.g. add OGRLayer::setFlags(...) method? Would be such addition
accepted?

Regards
Martin
From warmerdam at pobox.com  Fri May 11 16:47:50 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 11 16:48:04 2012
Subject: [gdal-dev] Force bounding box test for spatial filter in OGR
In-Reply-To: <CAC2XbFdCm9vBNW4Xuj_wfnaSG6ftMwUtYhfHTjo3_goPZnp0XA@mail.gmail.com>
References: <CAC2XbFdCm9vBNW4Xuj_wfnaSG6ftMwUtYhfHTjo3_goPZnp0XA@mail.gmail.com>
Message-ID: <CA+YzLBfRt4AJMtdzSA7+6Cg_YAJimUUBDfWPajFwAB2-zwfBXA@mail.gmail.com>

Martin,

I have no objection to your adding a configuration option to control whether
this test in ogrlayer.cpp should be done:

 -------------------------------------------------------------------- */
/*      Fallback to full intersect test (using GEOS) if we still        */
/*      don't know for sure.                                            */
/* -------------------------------------------------------------------- */
        if( OGRGeometryFactory::haveGEOS() )
        {
            //CPLDebug("OGRLayer", "GEOS intersection");
            return m_poFilterGeom->Intersects( poGeometry );
        }
        else
            return TRUE;

Just preceeding it is logic which does fast tests for
intersection of vertices with simple rectangular envelopes.
This can quickly establish that some geometries do
intersect the envelope.

It occurs to me it would be a huge win in some cases to
extend that so if none of the segments could possible
intersect the envelope then we can be sure there is
no intersection and return FALSE without any use of
GEOS.  In fact, I don't see why we can't actually
completely implement intersection tests for geometries
with an envelope "inline" and fairly fast without any use
of GEOS.  We would only need to fallback to using GEOS
for complex filter geometries that are not envelopes.

I think if we do this we could avoid any special
configuration options.

Let me know if you want to pursue this.  If not, I will.

Best regards,
Frank

On Fri, May 11, 2012 at 1:08 PM, Martin Dobias <wonder.sk@gmail.com> wrote:
> Hi all,
>
> when fetching features in OGR with an active spatial filter, first a
> bounding box test is used to resolve simple cases and then exact
> intersection with GEOS is done to determine whether the feature is
> really within the filter (if compiled with GEOS). I would like to have
> an option to force only bounding box test without the expensive GEOS
> intersection.
>
> Motivation: recently I have encountered a shapefile with contour
> lines: 72K features, geometries with lots of vertices. When displaying
> about 1/2 of the layer's extent in QGIS, it takes ~106 seconds to get
> the map rendered! When I temporarily disabled setting of spatial
> filter in OGR provider, the rendering time went down to ~5 seconds.
> That's a great difference, isn't it? I know that this is not the most
> typical case, but still it matters. (For the record, spatial index
> made little to no difference to original time since the contour lines
> are spread out). In general when rendering one does not care so much
> if also features slightly outside of the current extent get fetched -
> they will be clipped by the rendering engine and that is definitely
> faster than the intersection algorithm.
>
> Do you have any suggestions how such option should be implemented -
> e.g. add OGRLayer::setFlags(...) method? Would be such addition
> accepted?
>
> Regards
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ealpert at digitalglobe.com  Fri May 11 17:37:28 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri May 11 17:43:04 2012
Subject: [gdal-dev] OGC services requests in VRT?
In-Reply-To: <CAHXrU-+GhT5=4Wqw1K2U0Fpnx2Dyuy6NC+5W4VrzaPntV5pSVA@mail.gmail.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233098C8D1F@COMAIL01.digitalglobe.com>
	<CAHXrU-+q9ZBh0Cj6_iU5Nsz2QN0FQ++YkpvAqZi9WuJDnHU5wQ@mail.gmail.com>
	<CAHXrU-+GhT5=4Wqw1K2U0Fpnx2Dyuy6NC+5W4VrzaPntV5pSVA@mail.gmail.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233099D6787@COMAIL01.digitalglobe.com>

Interesting thanks! I always for get to try just convering to VRT and seeing what GDAL does.

-e

-----Original Message-----
From: Paolo Corti [mailto:pcorti@gmail.com] 
Sent: Thursday, May 10, 2012 7:00 AM
To: Ethan Alpert
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGC services requests in VRT?

On Thu, May 10, 2012 at 2:57 PM, Paolo Corti <pcorti@gmail.com> wrote:
> On Thu, May 10, 2012 at 12:49 AM, Ethan Alpert <ealpert@digitalglobe.com> wrote:
>> Is it possible to use an OGC call in a VRTRasterBand?
>>
>
> I guess you mean a WCS, and I think it is possible, just put the xml 
> file in SourceFilename under VRTRasterBand.
>
> Very quick sample, create a test.xml file like this:
>
> <WCS_GDAL>
> ?<ServiceURL>http://nsidc.org/cgi-bin/atlas_south?</ServiceURL>
> ?<CoverageName>antarctica_satellite_image</CoverageName>
> </WCS_GDAL>
>
> Now if you export this datasource to a vrt:
>
> $ gdal_translate -of vrt test.xml test.vrt
>
> this is the output test.vrt file:
>

sorry, this is the correct output vrt file:

<VRTDataset rasterXSize="48333" rasterYSize="48333">
  <SRS>PROJCS[&quo...........</SRS>
  <GeoTransform> -3.1745125000000000e+06,  1.2500000000000000e+02, 0.0000000000000000e+00,  2.8160125000000000e+06, 0.0000000000000000e+00, -1.2500000000000000e+02</GeoTransform>
  <Metadata />
  <VRTRasterBand dataType="Int16" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="1">test.xml</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="48333" RasterYSize="48333"
DataType="Int16" BlockXSize="1024" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
      <DstRect xOff="0" yOff="0" xSize="48333" ySize="48333" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

--
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

From matt.gregory at oregonstate.edu  Fri May 11 19:55:13 2012
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri May 11 19:55:40 2012
Subject: [gdal-dev] python SetCacheMax, GetCacheMax
Message-ID: <1D673F86DDA00841A1216F04D1CE70D64711A05F70@EXCH2.nws.oregonstate.edu>

Hi all,

Probably a newbie question.  I'm trying to investigate some read rates without the benefit of caching from Python.  When I do this:

  from osgeo import gdal
  gdal.SetCacheMax(0)
  print gdal.GetCacheMax()

I always get the environment variable value GDAL_CACHE_MAX instead of 0.  Throughout my test script, I can also query gdal.GetCacheUsed() and it increases toward GDAL_CACHE_MAX.  Am I totally misunderstanding their use?  I'm on Windows 7 64-bit, GDAL version 1.7.

matt
From wsj0621 at gmail.com  Sat May 12 04:00:57 2012
From: wsj0621 at gmail.com (Siju Wu)
Date: Sat May 12 04:01:31 2012
Subject: [gdal-dev] PostgreSQL driver for GDAL1.8.1
Message-ID: <CAPKDXFxCkqur3xEyYrsf-8YNYWe5ansW-kvuM=DRpsKCn4gKEA@mail.gmail.com>

Hi,
I began using the GDAL for my master projet last month. Before I used OGR
to read directly the maps of shapefile. But now I need to store the data
first in the database of PostgreSQL and then make access to the database by
using the driver of OGR. However I found that I can't connect the database
by using the function OGRSFDriverRegistrar::Open( source, FALSE ). My code
is as below:


OGRRegisterAll();
 OGRDataSource *poDS;

poDS = OGRSFDriverRegistrar::Open( "PG:dbname='postgis' host='localhost'
     port='5432' user='postgres' password='postgres'", FALSE );
 if( poDS == NULL )
{
printf( "Open failed.\n" );
exit( 1 );
}


the value of poDS is null. Is that means in the version of GDAL there is no
driver for the postgreSQL and I need to write it myself? I work with VS2010
c++ and GDAL 1.8.1. Dose anyone know if there is method to connect the
PostgreSQL by using OGR?

Thanks,
-Michel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120512/9ed67ff6/attachment.html
From polimax at mail.ru  Sat May 12 04:17:28 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat May 12 04:18:20 2012
Subject: [gdal-dev] PostgreSQL driver for GDAL1.8.1
In-Reply-To: <CAPKDXFxCkqur3xEyYrsf-8YNYWe5ansW-kvuM=DRpsKCn4gKEA@mail.gmail.com>
References: <CAPKDXFxCkqur3xEyYrsf-8YNYWe5ansW-kvuM=DRpsKCn4gKEA@mail.gmail.com>
Message-ID: <4FAE1C98.8090008@mail.ru>

12.05.2012 12:00, Siju Wu ???????:
> Hi,
> I began using the GDAL for my master projet last month. Before I 
> used OGR to read directly the maps of shapefile. But now I need to 
> store the data first in the database of PostgreSQL and then make 
> access to the database by using the driver of OGR. However I found 
> that I can't connect the database by using the 
> function OGRSFDriverRegistrar::Open( source, FALSE ). My code is as below:
>
>
> OGRRegisterAll();
> OGRDataSource *poDS;
>
> poDS = OGRSFDriverRegistrar::Open( "PG:dbname='postgis' 
> host='localhost'        port='5432' user='postgres' 
> password='postgres'", FALSE );
> if( poDS == NULL )
> {
> printf( "Open failed.\n" );
> exit( 1 );
> }
>
>
> the value of poDS is null. Is that means in the version of GDAL there 
> is no driver for the postgreSQL and I need to write it myself? I work 
> with VS2010 c++ and GDAL 1.8.1. Dose anyone know if there is method to 
> connect the PostgreSQL by using OGR?
>
> Thanks,
> -Michel
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi Siju,
You can check an error message like this:
     const char* pszErr = CPLGetLastErrorMsg();

Also you can log debug messages like this:
     CPLSetConfigOption("CPL_DEBUG", "ON");
     CPLSetConfigOption("CPL_TIMESTAMP", "ON");
     CPLSetConfigOption("CPL_LOG_ERRORS", "ON");
     CPLSetConfigOption("CPL_LOG", "/some_path/gdal_err.log" );

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120512/dab8c2fb/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Sat May 12 11:53:21 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat May 12 11:54:06 2012
Subject: [gdal-dev] Gdal_translate overwriting images
Message-ID: <loom.20120512T174843-251@post.gmane.org>

Hi,

I am playing with compression options and by accident used an existing image as
a target.

gdal_translate -of GTiff -co tiled=yes -co compress=jpeg q4213e.tif lzw.tif
Input file size is 12000, 12000
ERROR 1: Deleting lzw.tif failed:
Permission denied
0...10...20...30...40...50...60...70...80...90...100 - done.

It looks like gdal_translate tries to avoid overwriting but still gdalinfo shows
that the lzw.tif file is now jpeg compressed. Could it be that check is just
sending the ERROR 1 message but overwriting still happens?

-Jukka Rahkonen-

From martin.martinjensen at gmail.com  Sat May 12 13:43:23 2012
From: martin.martinjensen at gmail.com (Martin Jensen)
Date: Sat May 12 13:44:17 2012
Subject: [gdal-dev] Updating a single PostgreSQL field from ogr/python
Message-ID: <CAApmPxffpxUVBFQBKgTyYyLrB0jVgU05Zws-2eUcg=pkReX3bw@mail.gmail.com>

Hi list,

I was trying to do the following with ogr python bindings

   1. Create  srclayer from PostGIS based on sql statement
   2. Copy srclayer to dstlayer (also PostGIS)
   3. Add new field to dstlayer
   4. assign value to new field

My code is this:

### Open Database

Driver = ogr.GetDriverByName('PostgreSQL')

db = 'pg:host=localhost dbname=test user=postgres password=secret'

dataSource = Driver.Open(db,1 )

## crate source and destination layer

srclayer = dataSource.ExecuteSQL("SELECT gid,aar,ejd_areal,pris, geom FROM
salg WHERE aar=2010 AND pris >0 AND ejd_areal >0 limit 15")

dstlayer = dataSource.CopyLayer(srclayer,'gwr.dstlayer', options = [
'OVERWRITE=YES'] )

## add field to copied layer

fieldDefn = ogr.FieldDefn('gradient', ogr.OFTReal)

dstlayer.CreateField(fieldDefn)

#outFeature = ogr.Feature(dstlayer.GetLayerDefn())

outFeature = dstlayer.GetNextFeature()

## update the new field

for feature in dstlayer:

    outFeature.SetField('gradient',666) ##set this field only

    outFeature.SetFID(-1) ## tried to unset ogc_fid so not violating pk
column constraint

    dstlayer.CreateFeature(outFeature)

    outFeature = dstlayer.GetNextFeature()


I get the error:

ERROR:  duplicate key value violates unique constraint "dstlayer_pk"
DETAIL:  Key (ogc_fid)=(1) already exists.


I have a feeling i'm missing something really simple here.

Any suggestions would be much appreciated!

Software:
GDAL 1.9
PG: PostgreSQL version string : 'PostgreSQL 9.1.3 on
x86_64-apple-darwin11.3.0, compiled by i686-apple-darwin11-llvm-gcc-4.2
(GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00), 64-bit'
PG: PostGIS version string : '2.0 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'

Best regards

Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120512/de5bd90c/attachment.html
From pcreso at pcreso.com  Sat May 12 15:01:48 2012
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Sat May 12 15:04:22 2012
Subject: [gdal-dev] PostgreSQL driver for GDAL1.8.1
In-Reply-To: <CAPKDXFxCkqur3xEyYrsf-8YNYWe5ansW-kvuM=DRpsKCn4gKEA@mail.gmail.com>
Message-ID: <1336849308.28617.YahooMailClassic@web160703.mail.bf1.yahoo.com>

Ensure you have appropriately modified postgreql.conf & pg_hba.conf to allow the appropriate external access to the required database, for the required user, from the client IP (CIDR) address. If this is not enabled, such external connections cannot happen.

Brent Wood

--- On Sat, 5/12/12, Siju Wu <wsj0621@gmail.com> wrote:

From: Siju Wu <wsj0621@gmail.com>
Subject: [gdal-dev] PostgreSQL driver for GDAL1.8.1
To: gdal-dev@lists.osgeo.org
Date: Saturday, May 12, 2012, 8:00 PM

Hi,I began using the GDAL for my master?projet last month. Before I used?OGR to read directly the maps of shapefile. But now I need to store the data first in the database of PostgreSQL and then make access to the database by using the driver of OGR.?However I found that I can't connect the database by using the function?OGRSFDriverRegistrar::Open( source, FALSE ). My code is as below:


	OGRRegisterAll();		OGRDataSource *poDS;

	poDS = OGRSFDriverRegistrar::Open( "PG:dbname='postgis' host='localhost' ? ? ? ?port='5432' user='postgres' password='postgres'", FALSE );
		if( poDS == NULL )	{
		printf( "Open failed.\n" );		exit( 1 );	}


the value of poDS is null.?Is that means in the version of GDAL there is no driver for the postgreSQL and I need to write it myself? I work with VS2010 c++ and GDAL 1.8.1. Dose anyone know if there is method to connect the PostgreSQL by using OGR?

Thanks,-Michel

-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120512/0ab33bf9/attachment.html
From jukka.rahkonen at mmmtike.fi  Sat May 12 15:25:42 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat May 12 15:26:33 2012
Subject: [gdal-dev] How to create a fake GeoTIFF for GeoJP2
Message-ID: <loom.20120512T210839-848@post.gmane.org>

Hi,

I have Geotiff files and a fast program for compressing images into JPEG2000.
However, this program does not add GeoJP2 georeferencing into JPEG2000 files and
I would like to include it.  I have also a program that can add GeoTIFF as an
UUID box into an existing JPEG2000 file.

What I miss is the GeoTIFF to embed into JP2 file. It should be a 1 pixel sized
GeoTIFF with the tags from the original image. Have I understood it right when I
believe that I can create if with gdal_translate simply using 

gdal_translate -srswin 0 0 1 1 original.tif to_be_embedded.tif?

This is the gdalinfo from a geotiff that I took out from the UUID box of a
GeoJP2 image. It seems to be exactly just the topleft pixel of the image.

gdalinfo tiff_from_JPEG2000_UUID.tif
Driver: GTiff/GeoTIFF
Files: geo_tiff.tif
Size is 1, 1
Coordinate System is:
PROJCS["NAD27 / UTM zone 11N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26711"]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
Lower Left  (  440720.000, 3751260.000) (117d38'28.19"W, 33d54' 6.52"N)
Upper Right (  440780.000, 3751320.000) (117d38'25.87"W, 33d54' 8.48"N)
Lower Right (  440780.000, 3751260.000) (117d38'25.86"W, 33d54' 6.53"N)
Center      (  440750.000, 3751290.000) (117d38'27.03"W, 33d54' 7.50"N)
Band 1 Block=1x1 Type=Byte, ColorInterp=Gray

From warmerdam at pobox.com  Sat May 12 15:36:11 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May 12 15:36:29 2012
Subject: [gdal-dev] How to create a fake GeoTIFF for GeoJP2
In-Reply-To: <loom.20120512T210839-848@post.gmane.org>
References: <loom.20120512T210839-848@post.gmane.org>
Message-ID: <4FAEBBAB.8020603@pobox.com>

On 12-05-12 12:25 PM, Jukka Rahkonen wrote:
> Hi,
>
> I have Geotiff files and a fast program for compressing images into JPEG2000.
> However, this program does not add GeoJP2 georeferencing into JPEG2000 files and
> I would like to include it.  I have also a program that can add GeoTIFF as an
> UUID box into an existing JPEG2000 file.
>
> What I miss is the GeoTIFF to embed into JP2 file. It should be a 1 pixel sized
> GeoTIFF with the tags from the original image. Have I understood it right when I
> believe that I can create if with gdal_translate simply using
>
> gdal_translate -srswin 0 0 1 1 original.tif to_be_embedded.tif?
>
> This is the gdalinfo from a geotiff that I took out from the UUID box of a
> GeoJP2 image. It seems to be exactly just the topleft pixel of the image.

Jukka,

Yes, this should do what you need as the top left pixel of original.tif
contains the georeferencing for your whole output image.  If you are
actually compressing original.tif to jpeg2000 then you likely want to do:

   gdal_translate -outsize 1 1 original.tif to_be_embedded.tif

This will give you a 1x1 pixel geotiff that represents the whole area of
the source image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jukka.rahkonen at mmmtike.fi  Sat May 12 15:54:07 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat May 12 15:54:44 2012
Subject: [gdal-dev] Re: How to create a fake GeoTIFF for GeoJP2
References: <loom.20120512T210839-848@post.gmane.org>
	<4FAEBBAB.8020603@pobox.com>
Message-ID: <loom.20120512T214843-505@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:


> >
> > gdal_translate -srswin 0 0 1 1 original.tif to_be_embedded.tif?
> >
> > This is the gdalinfo from a geotiff that I took out from the UUID box of a
> > GeoJP2 image. It seems to be exactly just the topleft pixel of the image.
> 
> Jukka,
> 
> Yes, this should do what you need as the top left pixel of original.tif
> contains the georeferencing for your whole output image.  If you are
> actually compressing original.tif to jpeg2000 then you likely want to do:
> 
>    gdal_translate -outsize 1 1 original.tif to_be_embedded.tif
> 
> This will give you a 1x1 pixel geotiff that represents the whole area of
> the source image.

Thanks Frank, 

I believe that for correct georeferencing the pixel size must not change from
the original and therefore I will need to use -srswin 0 0 1 1 for this use case.
Now I have all that I need for a little test.

-Jukka-



From wonder.sk at gmail.com  Sun May 13 05:42:53 2012
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun May 13 05:43:42 2012
Subject: [gdal-dev] Force bounding box test for spatial filter in OGR
In-Reply-To: <CA+YzLBfRt4AJMtdzSA7+6Cg_YAJimUUBDfWPajFwAB2-zwfBXA@mail.gmail.com>
References: <CAC2XbFdCm9vBNW4Xuj_wfnaSG6ftMwUtYhfHTjo3_goPZnp0XA@mail.gmail.com>
	<CA+YzLBfRt4AJMtdzSA7+6Cg_YAJimUUBDfWPajFwAB2-zwfBXA@mail.gmail.com>
Message-ID: <CAC2XbFdiNEtA3odakejNyd6-F5g6bRkBaFHPjwhU5m_FABeK4A@mail.gmail.com>

Hi Frank

On Fri, May 11, 2012 at 10:47 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> It occurs to me it would be a huge win in some cases to
> extend that so if none of the segments could possible
> intersect the envelope then we can be sure there is
> no intersection and return FALSE without any use of
> GEOS. ?In fact, I don't see why we can't actually
> completely implement intersection tests for geometries
> with an envelope "inline" and fairly fast without any use
> of GEOS. ?We would only need to fallback to using GEOS
> for complex filter geometries that are not envelopes.

Indeed this would be even better solution. Line segment vs. box
(envelope) intersection could be much less expensive [1], in addition
to the gain of not having to convert geometries to GEOS..

> I think if we do this we could avoid any special
> configuration options.
>
> Let me know if you want to pursue this. ?If not, I will.

This gets a bit out of the scope of what I wanted to focus on, so I
would pass it on to you...

Regards
Martin
From even.rouault at mines-paris.org  Sun May 13 15:28:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 13 15:28:59 2012
Subject: [gdal-dev] writing a subregion with GDALRasterIO
In-Reply-To: <4FA9250B.9020404@ualg.pt>
References: <4FA9250B.9020404@ualg.pt>
Message-ID: <201205132128.36621.even.rouault@mines-paris.org>

Le mardi 08 mai 2012 15:52:11, Joaquim Luis a ?crit :
> Hi,
> 
> I am having some troubles in writing a sub-region on an array with
> GDALRasterIO.
> 
> The story is this. GMT internal grid arrays have a padding of 2 rows and
> 2 columns around the 'true data region' that is used for boundary
> conditions but that need to be striped off upon saving on file.
> 
> The following works well when I previously moved all real data in the
> 'data' array to the beginning of the array. That is, when I sort of
> removed the the padding zone.
> 
>    hDstDS = GDALCreate( hDriver, "mem", nx, ny, n_bands, typeCLASS, NULL );
> ....
>     GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, data, nx, ny,
> typeCLASS, 0, 0 );
> 
> However, I would like to avoid that step and read directly the zone of
> interest from 'data', which because of the padding has actually
> (nx+4)x(ny+4) elements. So I tried
> 
>      GDALRasterIO( hBand, GF_Write, 2, 2, nx, ny, data, nx+4, ny+4,
> typeCLASS, 0, 0 );

--> This call is indeed not valid according to the semantics of GDALRasterIO() 
and the error message you get is expected.

Untested, but you could rather try something like (assuming your datatype is 
Byte)

GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, data + 2 * nx + 2, nx, ny,
 typeCLASS, 0, nx + 4 );

to offset the data buffer to the (2,2) pixel and providing a line stride of nx + 
4.

From even.rouault at mines-paris.org  Sun May 13 16:29:11 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 13 16:29:37 2012
Subject: [gdal-dev] Re: TiffAppendToStrip errors with uncompressed output
	[SOLVED]
In-Reply-To: <loom.20120509T114908-834@post.gmane.org>
References: <loom.20120508T105818-888@post.gmane.org>
	<4FA9A88B.4090104@gmx.net>
	<loom.20120509T114908-834@post.gmane.org>
Message-ID: <201205132229.11690.even.rouault@mines-paris.org>

Le mercredi 09 mai 2012 12:13:06, Jukka Rahkonen a ?crit :
> Ahem,
> 
> It seems to be so that compression makes resulting tiff files smaller.  In
> some cases they can then fit to almost full disk even there is not enough
> room for an uncompressed version.
> 
> An explanation for why I did not notice that disk was too full was that the
> LZW compression is so effective for this dataset. The difference is as big
> as 272 MB with LZW compression and 4500 MB as uncompressed. The tiff
> driver error message is not most obvious either
> TIFFAppendToStrip:Write error at scanline 14650
> 
> The error message from HFA driver was pretty easy to interpret:
> ERROR3: Failed to extend imgtest.ige to full size
> likely out of disk space.
> No space left on device.
> 
> This makes me think about two improvements:
> - Make GTiff driver to give better understandable error message when disk
>  gets full

I've added into trunk a better error reporting that will output the reason for 
the failure similarly to the HFA driver.

For example :

0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: _tiffWriteProc:No space left on device
ERROR 1: TIFFAppendToStrip:Write error at scanline 272
[...]

> - In case of uncompressed tiff output, make driver to test beforehand if
> there is enough disk space for the target image

I'm not aware of a portable way of doing that (I haven't searched a lot 
though). For the record, I've tried the following trick : seek to the offset 
that should be the end of the uncompressed file and write a byte. But on Linux, 
due to the way the file system works, this does not work as expected, because 
'skipped' sectors are not allocated at all, so it just needs the size for one 
byte (actually a sector I guess), and not the full file size... We could write 
0's to the file, but that would defeat the purpose of a quick check.

> 
> I would guess that sometimes the latter could prevent some frustration
> caused by a many hours conversion job going in vain because of running out
> of disk space.
> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sun May 13 16:31:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 13 16:31:36 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
In-Reply-To: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
References: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
Message-ID: <201205132231.04777.even.rouault@mines-paris.org>

Le jeudi 10 mai 2012 13:21:10, Odd Ragnar Lydersen a ?crit :
> When I call myLayer->GetNextFeature(), I get an exception that tells me the
> format in request is not supported.

Is this a server accessible from the outside so I can give a try ?
From Jukka.Rahkonen at mmmtike.fi  Sun May 13 17:02:00 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sun May 13 17:02:24 2012
Subject: [gdal-dev] Re: TiffAppendToStrip errors with uncompressed
	output [SOLVED]
In-Reply-To: <201205132229.11690.even.rouault@mines-paris.org>
References: <loom.20120508T105818-888@post.gmane.org>
	<4FA9A88B.4090104@gmx.net>
	<loom.20120509T114908-834@post.gmane.org>,
	<201205132229.11690.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6314E60E@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> - In case of uncompressed tiff output, make driver to test beforehand if
>> there is enough disk space for the target image

> I'm not aware of a portable way of doing that (I haven't searched a lot
> though). For the record, I've tried the following trick : seek to the offset
> that should be the end of the uncompressed file and write a byte. But on Linux,
> due to the way the file system works, this does not work as expected, because
> 'skipped' sectors are not allocated at all, so it just needs the size for one
> byte (actually a sector I guess), and not the full file size... We could write
> 0's to the file, but that would defeat the purpose of a quick check.

I do not know it if it is portable or not, but on Windows the above mentioned HFA
driver throw that error message in the beginning of the process before it started
to make the conversion. It looked like it was initialising the .ige spill file and checking
the disk space at the same.

-Jukka Rahkonen-
From Odd-Ragnar.Lydersen at powel.no  Mon May 14 02:12:04 2012
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Mon May 14 02:12:23 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
In-Reply-To: <201205132231.04777.even.rouault@mines-paris.org>
References: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
	<201205132231.04777.even.rouault@mines-paris.org>
Message-ID: <BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>

Yes, the server is accessible to the outside world.
But first I must say, that we have modified our server to send the correct gml document.
The problem was that the server only got the < text/xml > part specified by the OutputFormat parameter, and not the < subtype=gml/3.1.1 > part, so our server bailed out.

Then we ran into another problem, when we used OGRLayer. SetSpatialFilterRect()
Our server received a filter which is deprecated in version 1.1.0. , so that we now need to be backwards compatible with version 1.0.0, or so the guy making our server says.
I'll get some more detailed info from him when he gets back 16.05

You can have a go if you like and test it:
http://titest01.powel.no/GeminiMapServer/GeminiVADemo.wfs?service=WFS&version=1.1.0


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: 13. mai 2012 22:31

Is this a server accessible from the outside so I can give a try ?
From sigfrido at tiscali.it  Mon May 14 06:07:44 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Mon May 14 06:11:01 2012
Subject: [gdal-dev] Updating a single PostgreSQL field from ogr/python
In-Reply-To: <CAApmPxffpxUVBFQBKgTyYyLrB0jVgU05Zws-2eUcg=pkReX3bw@mail.gmail.com>
References: <CAApmPxffpxUVBFQBKgTyYyLrB0jVgU05Zws-2eUcg=pkReX3bw@mail.gmail.com>
Message-ID: <1336990064.2356.19.camel@GOLEM>


Martin,

you're updating existing features so you don't want to use the
CreateFeature method. If you try to re-insert an existing feature you
will get the duplicate pk error.

See the docs for the SetFeature method.

Moreover, your loop code is a bit confused; usually you would do:

while True:
    outFeature = dstLayer.GetNextFeature()
    if (outFeature is None):
        break
    outFeature.SetField('gradient',666)
    outLayer.SetFeature(outFeature)

You may also use an SQL UPDATE instruction:

dataSource.ExecuteSQL("update gwr.dstlayer set gradient = 666")

Sig

Il giorno sab, 12/05/2012 alle 19.43 +0200, Martin Jensen ha scritto:
> Hi list,
> 
> 
> I was trying to do the following with ogr python bindings
>      1. Create  srclayer from PostGIS based on sql statement
>      2. Copy srclayer to dstlayer (also PostGIS)
>      3. Add new field to dstlayer
>      4. assign value to new field


> outFeature = dstlayer.GetNextFeature()
> 
> ## update the new field 
> 
> for feature in dstlayer:
> 
>     outFeature.SetField('gradient',666) ##set this field only
> 
>     outFeature.SetFID(-1) ## tried to unset ogc_fid so not violating
> pk column constraint
> 
>     dstlayer.CreateFeature(outFeature)
> 
>     outFeature = dstlayer.GetNextFeature()
> 
> 
> 
> 
> 
> 
> I get the error:
> 
> 
> ERROR:  duplicate key value violates unique constraint "dstlayer_pk"
> DETAIL:  Key (ogc_fid)=(1) already exists.
> 
> 
> 
> 
> I have a feeling i'm missing something really simple here.
> 
> 
> Any suggestions would be much appreciated!
> 
> 
> Software:
> GDAL 1.9
> PG: PostgreSQL version string : 'PostgreSQL 9.1.3 on
> x86_64-apple-darwin11.3.0, compiled by
> i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc.
> build 5658) (LLVM build 2336.9.00), 64-bit'
> PG: PostGIS version string : '2.0 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
> 
> 
> Best regards
> 
> 
> Martin 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From jluis at ualg.pt  Mon May 14 06:25:46 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon May 14 06:26:07 2012
Subject: [gdal-dev] writing a subregion with GDALRasterIO
In-Reply-To: <201205132128.36621.even.rouault@mines-paris.org>
References: <4FA9250B.9020404@ualg.pt>
	<201205132128.36621.even.rouault@mines-paris.org>
Message-ID: <4FB0DDAA.5060001@ualg.pt>

On 13-05-2012 20:28, Even Rouault wrote:
> Le mardi 08 mai 2012 15:52:11, Joaquim Luis a ?crit :
>> Hi,
>>
>> I am having some troubles in writing a sub-region on an array with
>> GDALRasterIO.
>>
>> The story is this. GMT internal grid arrays have a padding of 2 rows and
>> 2 columns around the 'true data region' that is used for boundary
>> conditions but that need to be striped off upon saving on file.
>>
>> The following works well when I previously moved all real data in the
>> 'data' array to the beginning of the array. That is, when I sort of
>> removed the the padding zone.
>>
>>     hDstDS = GDALCreate( hDriver, "mem", nx, ny, n_bands, typeCLASS, NULL );
>> ....
>>      GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, data, nx, ny,
>> typeCLASS, 0, 0 );
>>
>> However, I would like to avoid that step and read directly the zone of
>> interest from 'data', which because of the padding has actually
>> (nx+4)x(ny+4) elements. So I tried
>>
>>       GDALRasterIO( hBand, GF_Write, 2, 2, nx, ny, data, nx+4, ny+4,
>> typeCLASS, 0, 0 );
> -->  This call is indeed not valid according to the semantics of GDALRasterIO()
> and the error message you get is expected.
>
> Untested, but you could rather try something like (assuming your datatype is
> Byte)
>
> GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, data + 2 * nx + 2, nx, ny,
>   typeCLASS, 0, nx + 4 );
>
> to offset the data buffer to the (2,2) pixel and providing a line stride of nx +
> 4.

Thanks Even,

The data was actually a float and we can't do the "data + 2 * nx + 2" 
shift trick inside the GDALRasterIO call because it's (void *) there but 
I applied the idea where due and it works fine.

Joaquim

From hamidi at gmail.com  Mon May 14 06:26:41 2012
From: hamidi at gmail.com (hamidi)
Date: Mon May 14 06:26:48 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
In-Reply-To: <BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>
References: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
	<201205132231.04777.even.rouault@mines-paris.org>
	<BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>
Message-ID: <CALKzBke5R69WJ2HPrDyxGUDQraMuMgPO0FbzJFr+CiJjqqyF2A@mail.gmail.com>

hi
i've a question about format of LAYERDEFINITIONFILE.LDF file and the
meaning of entries in this file.
i don't know from where and how can i ask this.
can anyone help?

On Mon, May 14, 2012 at 10:42 AM, Odd Ragnar Lydersen <
Odd-Ragnar.Lydersen@powel.no> wrote:

> Yes, the server is accessible to the outside world.
> But first I must say, that we have modified our server to send the correct
> gml document.
> The problem was that the server only got the < text/xml > part specified
> by the OutputFormat parameter, and not the < subtype=gml/3.1.1 > part, so
> our server bailed out.
>
> Then we ran into another problem, when we used OGRLayer.
> SetSpatialFilterRect()
> Our server received a filter which is deprecated in version 1.1.0. , so
> that we now need to be backwards compatible with version 1.0.0, or so the
> guy making our server says.
> I'll get some more detailed info from him when he gets back 16.05
>
> You can have a go if you like and test it:
>
> http://titest01.powel.no/GeminiMapServer/GeminiVADemo.wfs?service=WFS&version=1.1.0
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: 13. mai 2012 22:31
>
> Is this a server accessible from the outside so I can give a try ?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120514/05e52914/attachment-0001.html
From ericnico.david at gmail.com  Mon May 14 09:49:05 2012
From: ericnico.david at gmail.com (NDavid)
Date: Mon May 14 09:49:23 2012
Subject: [gdal-dev] Re: gdal with CMake?
In-Reply-To: <201204281440.31125.even.rouault@mines-paris.org>
References: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
	<201204281440.31125.even.rouault@mines-paris.org>
Message-ID: <1337003345295-4974442.post@n6.nabble.com>

Hi all

I've just read the cmake/gdal wiki, the new documentation of the cmake
object library and the last "cmake for gdal" discussion from october 2011
and I'm not sure to fully understood why the cmake object library is needed
for gdal cmake build. 
So, I'm wondering  if there is some technical discussion which could explain
this point more deeply ? And is it related to the "cmake superbuild"
mentionned on the "cmake for gdal" discussion ?

Nicolas

PS : 
This is just some curiosity from a cmake user trying to gather some extra
informations

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-gdal-with-CMake-tp4936401p4974442.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Mon May 14 10:14:15 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon May 14 10:15:25 2012
Subject: [gdal-dev] Re: Scale dependent VRT for overviews
References: <loom.20120510T223139-789@post.gmane.org>
Message-ID: <loom.20120514T095618-243@post.gmane.org>

Hi,

I am not sure if it is already possible to do what I want with .VRT file but I
just do not know how. Therefore I prepared a test set if someone happens to be
interested in having a look.

Zip file is at http://latuviitta.org/documents/scale_dependent_gdal_meta_vrt.zip

The package contains:
- two images with 1 m pixel size (left_100.tif and right_100.tif)
- a .vrt file "100_percent.vrt" combining full resolution images

- two images with 2 m pixel size (left_50.tif and right_50.tif)
- a .vrt file "50_percent.vrt" combining half resolution images

- two images with 4 m pixel size (left_25.tif and right_25.tif)
- a .vrt file "25_percent.vrt" combining quarter resolution images

- overviews.vrt file which is created as
  gdalbuildvrt -resolution highest overviews.vrt *.vrt

I can open overview.vrt with Quantum GIS and it shows the rasters OK. Obviously
is is drawing all the layers from the VRT file on top of each other. The 50
percent layer is last in the overview.vrt file and it is drawn last by QGis and
it is the one Qgis user sees.

What I am dreaming of is having a control for setting reasonable scale ranges
for the layers included in overviews.vrt. I have been thinking that it could be
doen with something like "PixelSizeRange" directive. The following VRT would
lead to use
- 100_percent.vrt if output pixel size is less than 2 m
- 50_percent.vrt between 2 an 4 m output pixels
- 25_percent.vrt if output pixels are 4 m or bigger

<SimpleSource>
  <PixelSizeRange MaxXPixelSize="2" MaxYPixelSize="2" </PixelSizeRange>
      <SourceFilename relativeToVRT="1">100_percent.vrt</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="24000" RasterYSize="12000" DataType="Byte"
BlockXSize="128" BlockYSize="128" />
      <SrcRect xOff="0" yOff="0" xSize="24000" ySize="12000" />
      <DstRect xOff="0" yOff="0" xSize="24000" ySize="12000" />
    </SimpleSource>

    <SimpleSource>
<PixelSizeRange MinXPixelSize="2" MinYPixelSize="2" MaxXPixelSize="4"
MaxXPixelSize="4" </PixelSizeRange>
      <SourceFilename relativeToVRT="1">50_percent.vrt</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="12000" RasterYSize="6000" DataType="Byte"
BlockXSize="128" BlockYSize="128" />
      <SrcRect xOff="0" yOff="0" xSize="12000" ySize="6000" />
      <DstRect xOff="0" yOff="0" xSize="24000" ySize="12000" />
    </SimpleSource>

    <SimpleSource>
<PixelSizeRange MinXPixelSize="4" MinYPixelSize="4" </PixelSizeRange>
      <SourceFilename relativeToVRT="1">25_percent.vrt</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="6000" RasterYSize="3000" DataType="Byte"
BlockXSize="128" BlockYSize="128" />
      <SrcRect xOff="0" yOff="0" xSize="6000" ySize="3000" />
      <DstRect xOff="0" yOff="0" xSize="24000" ySize="12000" />
    </SimpleSource>

The result could be pretty convenient and flexible sometimes. For raster map
datasets each overview could contain maps which are rendered to suit best for
just that scale range. Dataset could contain a couple of lossless TIFF layers
first and one lossy JPEG2000 layer for taking care of all the rest resolution
levels. Resampling methods could be selected in the most flexible way, each
resolution layer could be updated individually and so on.

-Jukka Rahkonen-

From tyler.mitchell at actian.com  Mon May 14 13:14:57 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon May 14 13:15:35 2012
Subject: [gdal-dev] Backport Ingres plugin
Message-ID: <6AE076BE-7B64-44C2-86DB-46B6A4344CDB@actian.com>

Hi all, just looking for a tip on backporting the OGR Ingres plugin from 1.9 to 1.8.  Anything in particular that comes to mind to watch for?  I'm naive enough to try to just copy latest 1.9 or trunk versions of the ingres plugin in - but it's not building Ingres support in for some reason.  No errors, but not taking advantage of latest features from 1.9 either.  Any suggestions?

Tyler

From matt.gregory at oregonstate.edu  Mon May 14 13:16:25 2012
From: matt.gregory at oregonstate.edu (Matt Gregory)
Date: Mon May 14 13:17:31 2012
Subject: [gdal-dev] Re: python SetCacheMax, GetCacheMax
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D64711A05F70@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D64711A05F70@EXCH2.nws.oregonstate.edu>
Message-ID: <jorela$tar$1@dough.gmane.org>

On 5/11/2012 4:55 PM, Gregory, Matthew wrote:
> Hi all,
>
> Probably a newbie question.  I'm trying to investigate some read rates without the benefit of caching from Python.  When I do this:
>
>    from osgeo import gdal
>    gdal.SetCacheMax(0)
>    print gdal.GetCacheMax()
>
> I always get the environment variable value GDAL_CACHE_MAX instead of 0.  Throughout my test script, I can also query gdal.GetCacheUsed() and it increases toward GDAL_CACHE_MAX.  Am I totally misunderstanding their use?  I'm on Windows 7 64-bit, GDAL version 1.7.

A bit more experimentation led to this:

 >>> from osgeo import gdal
 >>> print gdal.GetCacheMax()
786432000
 >>> gdal.SetCacheMax(0)
 >>> print gdal.GetCacheMax()
0

So, for some reason a call to GetCacheMax has to occur before 
SetCacheMax can be used?  This seems to be working in my testing script.

matt


From etourigny.dev at gmail.com  Mon May 14 13:22:54 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon May 14 13:23:13 2012
Subject: [gdal-dev] Backport Ingres plugin
In-Reply-To: <6AE076BE-7B64-44C2-86DB-46B6A4344CDB@actian.com>
References: <6AE076BE-7B64-44C2-86DB-46B6A4344CDB@actian.com>
Message-ID: <CA+TxYvP_14MY1VTFPrYbbStE=jGZ8WLtokZ9SNCXkjaxR_HVgg@mail.gmail.com>

you probably have to modify configure and possibly some makefiles also.

On Mon, May 14, 2012 at 2:14 PM, Tyler Mitchell
<tyler.mitchell@actian.com> wrote:
> Hi all, just looking for a tip on backporting the OGR Ingres plugin from 1.9 to 1.8. ?Anything in particular that comes to mind to watch for? ?I'm naive enough to try to just copy latest 1.9 or trunk versions of the ingres plugin in - but it's not building Ingres support in for some reason. ?No errors, but not taking advantage of latest features from 1.9 either. ?Any suggestions?
>
> Tyler
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon May 14 13:56:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon May 14 13:57:36 2012
Subject: [gdal-dev] Re: python SetCacheMax, GetCacheMax
In-Reply-To: <jorela$tar$1@dough.gmane.org>
References: <1D673F86DDA00841A1216F04D1CE70D64711A05F70@EXCH2.nws.oregonstate.edu>
	<jorela$tar$1@dough.gmane.org>
Message-ID: <201205141956.53823.even.rouault@mines-paris.org>

Le lundi 14 mai 2012 19:16:25, Matt Gregory a ?crit :
> On 5/11/2012 4:55 PM, Gregory, Matthew wrote:
> > Hi all,
> > 
> > Probably a newbie question.  I'm trying to investigate some read rates 
without the benefit of caching from Python.  When I do this:
> >    from osgeo import gdal
> >    gdal.SetCacheMax(0)
> >    print gdal.GetCacheMax()
> > 
> > I always get the environment variable value GDAL_CACHE_MAX instead of 0. 
> > Throughout my test script, I can also query gdal.GetCacheUsed() and it
> > increases toward GDAL_CACHE_MAX.  Am I totally misunderstanding their
> > use?  I'm on Windows 7 64-bit, GDAL version 1.7.
> 
> A bit more experimentation led to this:
>  >>> from osgeo import gdal
>  >>> print gdal.GetCacheMax()
> 
> 786432000
> 
>  >>> gdal.SetCacheMax(0)
>  >>> print gdal.GetCacheMax()
> 
> 0
> 
> So, for some reason a call to GetCacheMax has to occur before
> SetCacheMax can be used?  This seems to be working in my testing script.

Not a good reason actually. The workaround you've found is actually what is 
needed without the fix I've committed in trunk ( 
http://trac.osgeo.org/gdal/changeset/24412 )

> 
> matt
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon May 14 15:21:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon May 14 15:21:42 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
In-Reply-To: <BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>
References: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
	<201205132231.04777.even.rouault@mines-paris.org>
	<BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>
Message-ID: <201205142121.16674.even.rouault@mines-paris.org>

> 
> Then we ran into another problem, when we used OGRLayer.
> SetSpatialFilterRect() Our server received a filter which is deprecated in
> version 1.1.0. , so that we now need to be backwards compatible with
> version 1.0.0, or so the guy making our server says. I'll get some more
> detailed info from him when he gets back 16.05

Yes this is a known issue. Basically, the OGR WFS client is not conformant 
with the WFS 1.1 spec on this. Ultimately this should be fixed. See the thread 
initiated by the following message http://lists.osgeo.org/pipermail/gdal-
dev/2012-January/031327.html for the whole discussion.

Otherwise, when testing with your server on the gemini:VA_LINE layer, I 
discovered the GML parsing parser in OGR didn't like srsDimension="3" set at 
the LineString level. See http://trac.osgeo.org/gdal/ticket/4663

> 
> You can have a go if you like and test it:
> http://titest01.powel.no/GeminiMapServer/GeminiVADemo.wfs?service=WFS&versi
> on=1.1.0
> 
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: 13. mai 2012 22:31
> 
> Is this a server accessible from the outside so I can give a try ?
From oyvind.idland at gmail.com  Tue May 15 02:58:14 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue May 15 02:58:49 2012
Subject: [gdal-dev] WFS - OGRLayer GetNextFeature - fails
In-Reply-To: <201205142121.16674.even.rouault@mines-paris.org>
References: <BD69AB4022C5C34DAC908920605A8702D460@MAIL.powelasa.powel.com>
	<201205132231.04777.even.rouault@mines-paris.org>
	<BD69AB4022C5C34DAC908920605A8702D6C0@MAIL.powelasa.powel.com>
	<201205142121.16674.even.rouault@mines-paris.org>
Message-ID: <CAEVk4t3eV7i2yS56nN51CE90KfbDQ-GOZnZM0Qz4tDFSdTycmg@mail.gmail.com>

There is another problem with the <Filter> in OGR when dealing with WFS
1.1.0:

The wfs namespace is missing. The current implementation sends

<Filter xmlns:gml="http://www.opengis.net/gml">

but should be

<Filter xmlns="http://www.opengis.net/wfs" xmlns:gml="
http://www.opengis.net/gml">

Since I am using an XML serializer to decode the filter, I get hickups. I
have to implement
a hack to make it work.


- Oyvind


On Mon, May 14, 2012 at 9:21 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> >
> > Then we ran into another problem, when we used OGRLayer.
> > SetSpatialFilterRect() Our server received a filter which is deprecated
> in
> > version 1.1.0. , so that we now need to be backwards compatible with
> > version 1.0.0, or so the guy making our server says. I'll get some more
> > detailed info from him when he gets back 16.05
>
> Yes this is a known issue. Basically, the OGR WFS client is not conformant
> with the WFS 1.1 spec on this. Ultimately this should be fixed. See the
> thread
> initiated by the following message http://lists.osgeo.org/pipermail/gdal-
> dev/2012-January/031327.html for the whole discussion.
>
> Otherwise, when testing with your server on the gemini:VA_LINE layer, I
> discovered the GML parsing parser in OGR didn't like srsDimension="3" set
> at
> the LineString level. See http://trac.osgeo.org/gdal/ticket/4663
>
> >
> > You can have a go if you like and test it:
> >
> http://titest01.powel.no/GeminiMapServer/GeminiVADemo.wfs?service=WFS&versi
> > on=1.1.0
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: 13. mai 2012 22:31
> >
> > Is this a server accessible from the outside so I can give a try ?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120515/f7dece9e/attachment.html
From martin.martinjensen at gmail.com  Tue May 15 05:50:20 2012
From: martin.martinjensen at gmail.com (Martin Jensen)
Date: Tue May 15 05:50:32 2012
Subject: [gdal-dev] Updating a single PostgreSQL field from ogr/python
In-Reply-To: <1336990064.2356.19.camel@GOLEM>
References: <CAApmPxffpxUVBFQBKgTyYyLrB0jVgU05Zws-2eUcg=pkReX3bw@mail.gmail.com>
	<1336990064.2356.19.camel@GOLEM>
Message-ID: <CAApmPxfOv8w0-Ls8MoH3P8qDPx4T+YjKDOnoNHy7o85+uVwavQ@mail.gmail.com>

Luca,

thank you so much for your help. For a programming beginner like me, the
obvious is not alway so clear!

Now I see the light :)

I ended up using the  ExecuteSQL  method because the  SetFeature method
 deleted the content of the other fields. I'm sure there is an obvious
solution to this also but I didn' t find it :)

I also noticed the CopyLayer function dosen't write the geometry type of
the copied layer. Is this expected behaviour ?

Best regards

Martin



On 14 May 2012 12:07, Luca Sigfrido Percich <sigfrido@tiscali.it> wrote:

>
> Martin,
>
> you're updating existing features so you don't want to use the
> CreateFeature method. If you try to re-insert an existing feature you
> will get the duplicate pk error.
>
> See the docs for the SetFeature method.
>
> Moreover, your loop code is a bit confused; usually you would do:
>
> while True:
>    outFeature = dstLayer.GetNextFeature()
>    if (outFeature is None):
>        break
>    outFeature.SetField('gradient',666)
>    outLayer.SetFeature(outFeature)
>
> You may also use an SQL UPDATE instruction:
>
> dataSource.ExecuteSQL("update gwr.dstlayer set gradient = 666")
>
> Sig
>
> Il giorno sab, 12/05/2012 alle 19.43 +0200, Martin Jensen ha scritto:
> > Hi list,
> >
> >
> > I was trying to do the following with ogr python bindings
> >      1. Create  srclayer from PostGIS based on sql statement
> >      2. Copy srclayer to dstlayer (also PostGIS)
> >      3. Add new field to dstlayer
> >      4. assign value to new field
>
>
> > outFeature = dstlayer.GetNextFeature()
> >
> > ## update the new field
> >
> > for feature in dstlayer:
> >
> >     outFeature.SetField('gradient',666) ##set this field only
> >
> >     outFeature.SetFID(-1) ## tried to unset ogc_fid so not violating
> > pk column constraint
> >
> >     dstlayer.CreateFeature(outFeature)
> >
> >     outFeature = dstlayer.GetNextFeature()
> >
> >
> >
> >
> >
> >
> > I get the error:
> >
> >
> > ERROR:  duplicate key value violates unique constraint "dstlayer_pk"
> > DETAIL:  Key (ogc_fid)=(1) already exists.
> >
> >
> >
> >
> > I have a feeling i'm missing something really simple here.
> >
> >
> > Any suggestions would be much appreciated!
> >
> >
> > Software:
> > GDAL 1.9
> > PG: PostgreSQL version string : 'PostgreSQL 9.1.3 on
> > x86_64-apple-darwin11.3.0, compiled by
> > i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc.
> > build 5658) (LLVM build 2336.9.00), 64-bit'
> > PG: PostGIS version string : '2.0 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
> >
> >
> > Best regards
> >
> >
> > Martin
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>



-- 
Med venlig hilsen

Martin Bj?rge Jensen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120515/bfa6e0a9/attachment-0001.html
From mateusz at loskot.net  Tue May 15 08:48:53 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue May 15 08:50:00 2012
Subject: [gdal-dev] Building trunk with VS2010 SP1
Message-ID: <CABUeae-oTKjkh7+kS_Kbtcq6vep8mQ7ZVebtuUJ0LsCQ-O3Wpg@mail.gmail.com>

Folks,

Has anyone successfully built GDAL trunk using
Visual Studio 2010 with SP1 installed?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From warmerdam at pobox.com  Tue May 15 10:35:17 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 15 10:36:02 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
Message-ID: <4FB269A5.8010703@pobox.com>

Folks,

I have prepared a GDAL/OGR 1.9.1 Release Candidate at:

   http://download.osgeo.org/gdal/gdal-1.9.1RC1.tar.gz
   http://download.osgeo.org/gdal/gdal191RC1.zip

Please test and confirm there are no regressions since 1.9.0.  I'll send
a separate message motioning to declare this 1.9.1 final once I've done a
bit of testing myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From Tyler.Mitchell at actian.com  Tue May 15 10:39:20 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Tue May 15 10:42:57 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
References: <4FB269A5.8010703@pobox.com>
Message-ID: <ABB90CDC9A08FF49851AC42557795A1808A7CEA1@USINVMAILB01.ingres.prv>

Hi Frank, this is great to see.  I saw some commits not to long ago re: Ingres driver, but I don't see those changes reflected in this RC.  e.g. nothing in nmake.opt for Ingres.  Or maybe I just though we updated that file and we never did.. any tips? :)

________________________________

From: gdal-dev-bounces@lists.osgeo.org on behalf of Frank Warmerdam
Sent: Tue 5/15/2012 7:35 AM
To: gdal-dev
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate



Folks,

I have prepared a GDAL/OGR 1.9.1 Release Candidate at:

   http://download.osgeo.org/gdal/gdal-1.9.1RC1.tar.gz
   http://download.osgeo.org/gdal/gdal191RC1.zip

Please test and confirm there are no regressions since 1.9.0.  I'll send
a separate message motioning to declare this 1.9.1 final once I've done a
bit of testing myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120515/c00bca68/attachment.html
From warmerdam at pobox.com  Tue May 15 10:54:03 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 15 10:54:15 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
In-Reply-To: <ABB90CDC9A08FF49851AC42557795A1808A7CEA1@USINVMAILB01.ingres.prv>
References: <4FB269A5.8010703@pobox.com>
	<ABB90CDC9A08FF49851AC42557795A1808A7CEA1@USINVMAILB01.ingres.prv>
Message-ID: <4FB26E0B.8020704@pobox.com>

On 12-05-15 07:39 AM, Tyler Mitchell wrote:
> Hi Frank, this is great to see. I saw some commits not to long ago re: Ingres
> driver, but I don't see those changes reflected in this RC. e.g. nothing in
> nmake.opt for Ingres. Or maybe I just though we updated that file and we never
> did.. any tips? :)

Tyler,

I backported the code in the gdal/ogr/ogrsf_frmts/ingres directory but I
did not backport any changes outside that directory.  I presume the changes
you saw were in trunk, not 1.9 branch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From tyler.mitchell at actian.com  Tue May 15 11:47:31 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue May 15 11:48:03 2012
Subject: [gdal-dev] Building trunk with VS2010 SP1
In-Reply-To: <CABUeae-oTKjkh7+kS_Kbtcq6vep8mQ7ZVebtuUJ0LsCQ-O3Wpg@mail.gmail.com>
References: <CABUeae-oTKjkh7+kS_Kbtcq6vep8mQ7ZVebtuUJ0LsCQ-O3Wpg@mail.gmail.com>
Message-ID: <C63DDA49-AB08-4D84-8901-06728EDBFC7A@actian.com>

I'm pretty sure I did, just not sure what SP it was.  It was a version of express 2010 that I installed only a month or so ago.

On 2012-05-15, at 5:48 AM, Mateusz Loskot wrote:

> Folks,
> 
> Has anyone successfully built GDAL trunk using
> Visual Studio 2010 with SP1 installed?
> 
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120515/92b09070/attachment.html
From jmckenna at gatewaygeomatics.com  Tue May 15 12:08:36 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue May 15 12:09:21 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
In-Reply-To: <4FB269A5.8010703@pobox.com>
References: <4FB269A5.8010703@pobox.com>
Message-ID: <4FB27F84.4030201@gatewaygeomatics.com>

RC1 works well here on Windows (MSVC 2008).

Aside: I'm so old I can remember when 'ogrinfo --formats' returned only
a few vector formats....look at all of them now! :)

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 12-05-15 11:35 AM, Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a GDAL/OGR 1.9.1 Release Candidate at:
> 
>   http://download.osgeo.org/gdal/gdal-1.9.1RC1.tar.gz
>   http://download.osgeo.org/gdal/gdal191RC1.zip
> 
> Please test and confirm there are no regressions since 1.9.0.  I'll send
> a separate message motioning to declare this 1.9.1 final once I've done a
> bit of testing myself.
> 



From even.rouault at mines-paris.org  Tue May 15 16:23:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue May 15 16:24:34 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
In-Reply-To: <4FB269A5.8010703@pobox.com>
References: <4FB269A5.8010703@pobox.com>
Message-ID: <201205152223.32666.even.rouault@mines-paris.org>

Le mardi 15 mai 2012 16:35:17, Frank Warmerdam a ?crit :
> Folks,
> 
> I have prepared a GDAL/OGR 1.9.1 Release Candidate at:
> 
>    http://download.osgeo.org/gdal/gdal-1.9.1RC1.tar.gz
>    http://download.osgeo.org/gdal/gdal191RC1.zip
> 
> Please test and confirm there are no regressions since 1.9.0.  I'll send
> a separate message motioning to declare this 1.9.1 final once I've done a
> bit of testing myself.

./swig/include/perl/gdal_perl.i hasn't been updated, so the Perl bindings 
don't compile natively.

I although see that tiff_srs_epsg_2066 (gcore/tiff_srs.py) fails. Apparently it 
seems related to http://trac.osgeo.org/gdal/changeset/24390 (reverting it 
makes the test succeeds)

In GDAL 1.9.1, the SRS that we get back after the round-trip to geotiff is now 
:

PROJCS["Mount Dillon / Tobago Grid",
    GEOGCS["Mount Dillon",
        DATUM["Mount_Dillon",
            SPHEROID["Clarke 1858",6378293.645208759,294.2606763692569,
                AUTHORITY["EPSG","7007"]],
            AUTHORITY["EPSG","6157"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4157"]],
    PROJECTION["Cassini_Soldner"],
    PARAMETER["latitude_of_origin",11.25217861111111],
    PARAMETER["central_meridian",-60.68600888888889],
    PARAMETER["false_easting",37718.66159325],
    PARAMETER["false_northing",36209.91512952],
    UNIT["unknown",0.201166195164],
    AUTHORITY["EPSG","2066"]]

whereas in 1.9.0, it was 

PROJCS["Mount Dillon / Tobago Grid",
    GEOGCS["Mount Dillon",
        DATUM["Mount_Dillon",
            SPHEROID["Clarke 1858",6378293.645208759,294.2606763692569,
                AUTHORITY["EPSG","7007"]],
            AUTHORITY["EPSG","6157"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4157"]],
    PROJECTION["Cassini_Soldner"],
    PARAMETER["latitude_of_origin",11.25217861111111],
    PARAMETER["central_meridian",-60.68600888888889],
    PARAMETER["false_easting",187500],
    PARAMETER["false_northing",180000],
    UNIT["Clarke's link",0.201166195164],
    AUTHORITY["EPSG","2066"]]

Note the difference : the unit name is "unknown" instead of "Clarke's link". It 
doesn't seem very critical however. But I'm not sure why the test succeeds in 
trunk and not in 1.9 branch (tiff_srs.py is identical in trunk and 1.9). 
Perhaps another change in trunk counterbalances that.

For the record, on trunk, listgeo on "gdal_translate foo.tif 2066.tif -a_srs 
EPSG:2066" gives :
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,27): "Mount Dillon / Tobago Grid"
      GeogCitationGeoKey (Ascii,13): "Mount Dillon"
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): Unknown-2066
      ProjLinearUnitsGeoKey (Short,1): Unknown-9039
      End_Of_Keys.
   End_Of_Geotiff.

On 1.9.1 :

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,27): "Mount Dillon / Tobago Grid"
      GeogCitationGeoKey (Ascii,13): "Mount Dillon"
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): Unknown-2066
      PCSCitationGeoKey (Ascii,23): "LUnits = Clarke's link"
      ProjLinearUnitsGeoKey (Short,1): User-Defined
      ProjLinearUnitSizeGeoKey (Double,1): 0.201166195164   
      End_Of_Keys.
   End_Of_Geotiff.


> 
> Best regards,
From warmerdam at pobox.com  Tue May 15 16:27:56 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 15 16:28:47 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Release Candidate
In-Reply-To: <201205152223.32666.even.rouault@mines-paris.org>
References: <4FB269A5.8010703@pobox.com>
	<201205152223.32666.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBdaXdyuuH0+i-sL-Z1QwS7CnTUsGs_f28_XeBg1SnnLLw@mail.gmail.com>

On Tue, May 15, 2012 at 1:23 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> ./swig/include/perl/gdal_perl.i hasn't been updated, so the Perl bindings
> don't compile natively.

Even,

Gotcha - I'll regenerate.

> I although see that tiff_srs_epsg_2066 (gcore/tiff_srs.py) fails. Apparently it
> seems related to http://trac.osgeo.org/gdal/changeset/24390 (reverting it
> makes the test succeeds)

I did quite a bit of work to make this work in trunk.  I'll consider
how to handle
this best in 1.9.1 but I hesitate to apply all the trunk work back in 1.9 since
it is fairly risky.

Best regards,
Frank

> In GDAL 1.9.1, the SRS that we get back after the round-trip to geotiff is now
> :
>
> PROJCS["Mount Dillon / Tobago Grid",
> ? ?GEOGCS["Mount Dillon",
> ? ? ? ?DATUM["Mount_Dillon",
> ? ? ? ? ? ?SPHEROID["Clarke 1858",6378293.645208759,294.2606763692569,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7007"]],
> ? ? ? ? ? ?AUTHORITY["EPSG","6157"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4157"]],
> ? ?PROJECTION["Cassini_Soldner"],
> ? ?PARAMETER["latitude_of_origin",11.25217861111111],
> ? ?PARAMETER["central_meridian",-60.68600888888889],
> ? ?PARAMETER["false_easting",37718.66159325],
> ? ?PARAMETER["false_northing",36209.91512952],
> ? ?UNIT["unknown",0.201166195164],
> ? ?AUTHORITY["EPSG","2066"]]
>
> whereas in 1.9.0, it was
>
> PROJCS["Mount Dillon / Tobago Grid",
> ? ?GEOGCS["Mount Dillon",
> ? ? ? ?DATUM["Mount_Dillon",
> ? ? ? ? ? ?SPHEROID["Clarke 1858",6378293.645208759,294.2606763692569,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7007"]],
> ? ? ? ? ? ?AUTHORITY["EPSG","6157"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4157"]],
> ? ?PROJECTION["Cassini_Soldner"],
> ? ?PARAMETER["latitude_of_origin",11.25217861111111],
> ? ?PARAMETER["central_meridian",-60.68600888888889],
> ? ?PARAMETER["false_easting",187500],
> ? ?PARAMETER["false_northing",180000],
> ? ?UNIT["Clarke's link",0.201166195164],
> ? ?AUTHORITY["EPSG","2066"]]
>
> Note the difference : the unit name is "unknown" instead of "Clarke's link". It
> doesn't seem very critical however. But I'm not sure why the test succeeds in
> trunk and not in 1.9 branch (tiff_srs.py is identical in trunk and 1.9).
> Perhaps another change in trunk counterbalances that.
>
> For the record, on trunk, listgeo on "gdal_translate foo.tif 2066.tif -a_srs
> EPSG:2066" gives :
> ? Keyed_Information:
> ? ? ?GTModelTypeGeoKey (Short,1): ModelTypeProjected
> ? ? ?GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
> ? ? ?GTCitationGeoKey (Ascii,27): "Mount Dillon / Tobago Grid"
> ? ? ?GeogCitationGeoKey (Ascii,13): "Mount Dillon"
> ? ? ?GeogAngularUnitsGeoKey (Short,1): Angular_Degree
> ? ? ?ProjectedCSTypeGeoKey (Short,1): Unknown-2066
> ? ? ?ProjLinearUnitsGeoKey (Short,1): Unknown-9039
> ? ? ?End_Of_Keys.
> ? End_Of_Geotiff.
>
> On 1.9.1 :
>
> ? Keyed_Information:
> ? ? ?GTModelTypeGeoKey (Short,1): ModelTypeProjected
> ? ? ?GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
> ? ? ?GTCitationGeoKey (Ascii,27): "Mount Dillon / Tobago Grid"
> ? ? ?GeogCitationGeoKey (Ascii,13): "Mount Dillon"
> ? ? ?GeogAngularUnitsGeoKey (Short,1): Angular_Degree
> ? ? ?ProjectedCSTypeGeoKey (Short,1): Unknown-2066
> ? ? ?PCSCitationGeoKey (Ascii,23): "LUnits = Clarke's link"
> ? ? ?ProjLinearUnitsGeoKey (Short,1): User-Defined
> ? ? ?ProjLinearUnitSizeGeoKey (Double,1): 0.201166195164
> ? ? ?End_Of_Keys.
> ? End_Of_Geotiff.
>
>
>>
>> Best regards,



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue May 15 16:53:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue May 15 16:55:01 2012
Subject: [gdal-dev] Re: Scale dependent VRT for overviews
In-Reply-To: <loom.20120514T095618-243@post.gmane.org>
References: <loom.20120510T223139-789@post.gmane.org>
	<loom.20120514T095618-243@post.gmane.org>
Message-ID: <201205152253.57596.even.rouault@mines-paris.org>

Jukka,

I think you could achieve what you want by adding a <Overview> element (see 
http://www.gdal.org/gdal_vrttut.html ) inside the <VRTRasterBand> element. The 
dataset pointed by the <SourceFilename> in <Overview> can be a .vrt.

So, schematically, you would have something like 100_percent.vrt :

<VRTDataset>
   <VRTRasterBand>
       <Overview>
           <SourceFilename relativeToVRT="1">50_percent.vrt</SourceFilename>
           <SourceBand>1</SourceBand>
       </Overview>
   </VRTRasterBand>
</VRTDataset>

and in 50_percent.vrt :

<VRTDataset>
   <VRTRasterBand>
       <Overview>
           <SourceFilename relativeToVRT="1">25_percent.vrt</SourceFilename>
           <SourceBand>1</SourceBand>
       </Overview>
   </VRTRasterBand>
</VRTDataset>

and so on

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Tue May 15 19:49:02 2012
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Tue May 15 19:49:17 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
Message-ID: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>


Hi,

Sorry to come again with a building problem. Now on OSX 10.7.4
For forced updating reasons I was obliged to up start a chain of up  
updates that ended up on upgrading to Xcode 4.3.2 and now I get these  
errors linking (well, a lot more)


/System/Library/Frameworks/Carbon.framework/Carbon

is a symlink to

/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon

but than what?

Any idea how to solve this?

Thanks

Joaquim

ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon'  
following -L not a directory
Undefined symbols for architecture x86_64:
   "operator new(unsigned long)", referenced from:
       IdrisiDataset::IdrisiDataset()in IdrisiDataset.o
       _GDALRegister_IDRISI in IdrisiDataset.o
       IdrisiDataset::Open(GDALOpenInfo*)       in IdrisiDataset.o
       IdrisiRasterBand::GetDefaultRAT()       in IdrisiDataset.o
       IdrisiRasterBand::SetDefaultRAT(GDALRasterAttributeTable  
const*)   in IdrisiDataset.o
       IntergraphRasterBand::IntergraphRasterBand(IntergraphDataset*,  
int, int, GDALDataType)in IntergraphBand.o
       _GDALRegister_INGR in IntergraphDataset.o


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From belanger_david at live.ca  Tue May 15 21:37:19 2012
From: belanger_david at live.ca (=?utf-8?B?RGF2aWQgQu+/vWxhbmdlcg==?=)
Date: Tue May 15 21:38:45 2012
Subject: [gdal-dev] GDAL 1.9 and PostGis raster
Message-ID: <BLU153-W60D0A8A2FC3E1421557186F5180@phx.gbl>




Hi,

I stored DEM
raster data in  PostGIS 2.0 and I used gdal_translate (with mode=2) to
extract a mosaic of tiles. When I?m using GDAL 1.8 is working but when I?m
using GDAL 1.9 I can see the values of pixel for just one tile.

 

For example
I uploaded in the database a tile with an attribute filename=056n05_w and an
other tile with an filename=056n05_e and I executed the command with GDAL 1.8
and GDAL 1.9:

gdal_translate"
-a_nodata "-32767" -of GTIFF 
"PG:host=myhost port=14070 dbname='mybd' user='myuser' password='mypassword'
schema='myschema' table='Elevation' mode=2 where=\"filename LIKE
\'%056n05%\'\" " 056N05.tif

 

With GDAL
1.8 I obtained a mosaic of 2 tiles (the result expected) but with GDAL 1.9, I
obtained a raster with the same extent but only the values of the tile 056n05_w
are present. The pixels of the tile 056n05_w have a value 0.

 

Does anyone
know this problem and can you help me?

 

Thanks

David

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120515/1a1018f1/attachment.html
From woklist at kyngchaos.com  Tue May 15 21:50:43 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue May 15 21:51:07 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
Message-ID: <24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>

forget the directory problem - nothing should be linking the Carbon framework in the first place.  Especially on OSX 10.7, since carbon 64bit does not exist, only 32bit.  But then, that's just a warning, and may have nothing to do with the actual error.

Has this worked in the past?  Did you change any configuration options from then?  Or update any dependent libraries?

Also, the link command immediately preceding the first error would help figure out what's going on.

On May 15, 2012, at 6:49 PM, jluis@ualg.pt wrote:

> 
> Hi,
> 
> Sorry to come again with a building problem. Now on OSX 10.7.4
> For forced updating reasons I was obliged to up start a chain of up updates that ended up on upgrading to Xcode 4.3.2 and now I get these errors linking (well, a lot more)
> 
> 
> /System/Library/Frameworks/Carbon.framework/Carbon
> 
> is a symlink to
> 
> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
> 
> but than what?
> 
> Any idea how to solve this?
> 
> Thanks
> 
> Joaquim
> 
> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon' following -L not a directory
> Undefined symbols for architecture x86_64:
>  "operator new(unsigned long)", referenced from:
>      IdrisiDataset::IdrisiDataset()in IdrisiDataset.o
>      _GDALRegister_IDRISI in IdrisiDataset.o
>      IdrisiDataset::Open(GDALOpenInfo*)       in IdrisiDataset.o
>      IdrisiRasterBand::GetDefaultRAT()       in IdrisiDataset.o
>      IdrisiRasterBand::SetDefaultRAT(GDALRasterAttributeTable const*)   in IdrisiDataset.o
>      IntergraphRasterBand::IntergraphRasterBand(IntergraphDataset*, int, int, GDALDataType)in IntergraphBand.o
>      _GDALRegister_INGR in IntergraphDataset.o
> 
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed robot?

[Marvin]  You think you have problems?  What are you supposed to do if you ARE a maniacally depressed robot?  No, don't try and answer, I'm 50,000 times more intelligent than you and even I don't know the answer...

- HitchHiker's Guide to the Galaxy


From jluis at ualg.pt  Tue May 15 22:07:57 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue May 15 22:08:30 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
Message-ID: <4FB30BFD.3020302@ualg.pt>

On 16-05-2012 02:50, William Kyngesburye wrote:
> forget the directory problem - nothing should be linking the Carbon framework in the first place.  Especially on OSX 10.7, since carbon 64bit does not exist, only 32bit.  But then, that's just a warning, and may have nothing to do with the actual error.

Right thanks.

> Has this worked in the past?  Did you change any configuration options from then?  Or update any dependent libraries?

Yes, it did work several times in the past. But also yes, I updated 
dependencies using homebrew. Started by netcdf, which brought hdf5. 
Next, had to update libjpeg. All of that in top of upgrading XCode from 
4.1 to 4.3.2
Also had an error in one of the ecw headers. Not sure anymore of the 
exact terms but was something that was declared EXTERNAL wchar_t in OSX 
header and static on the NCe.../?) ecw header. I removed the 'static' 
declaration and it went well after

> Also, the link command immediately preceding the first error would help figure out what's going on.

It's a very long one. It starts with

/bin/sh /Users/j/programs/GDALtrunk/gdal/libtool --mode=link    
--tag=LD    g++     -lsqlite3 -lexpat -lNCSEcw -lNCSEcwC -lNCSCnet 
-lNCSUtil -ljasper -L/usr/local/Cellar/netcdf/4.1.3/lib -lnetcdf -lhdf5 
-lmfhdf -ldf -ltiff -L/usr/lib -lpq -lpthread -ldl    -lcurl         
-liconv  -lxml2 -lz -lpthread -licucore -lm  -o libgdal.la 
/Users/j/programs/GDALtrunk/gdal/frmts/o/*.lo 
/Users/j/programs/GDALtrunk/gdal/gcore/*.lo 
/Users/j/programs/GDALtrunk/gdal/port/*.lo 
/Users/j/programs/GDALtrunk/gdal/alg/*.lo 
/Users/j/programs/GDALtrunk/gdal/ogr/ogrsf_frmts/o/*.lo 
./ogr/ogrgeometryfactory.lo ./ogr/ogrpoint.lo ./ogr/ogrcurve.lo 
./ogr/ogrlinestring.lo ./ogr/ogrlinearring.lo ./ogr/ogrpolygon.lo 
./ogr/ogrutils.lo ./ogr/ogrgeometry.lo ./ogr/ogrgeometrycollection.lo 
./ogr/ogrmultipolygon.lo ./ogr/ogrsurface.lo ./ogr/ogrmultipoint.lo 
./ogr/ogrmultilinestring.lo ./ogr/ogr_api.lo ./ogr/ogrfeature.lo 
./ogr/ogrfeaturedefn.lo ./ogr/ogrfeaturequery.lo 
./ogr/ogrfeaturestyle.lo ./ogr/ogrfielddefn.lo 
./ogr/ogrspatialreference.lo ./ogr/ogr_srsnode.lo ./ogr/ogr_srs_proj4.lo 
./ogr/ogr_fromepsg.lo ./ogr/ogrct.lo ./ogr/ogr_opt.lo 
./ogr/ogr_srs_esri.lo ./ogr/ogr_srs_pci.lo ./ogr/ogr_srs_usgs.lo 
./ogr/ogr_srs_dict.lo ./ogr/ogr_srs_panorama.lo ./ogr/ogr_srs_ozi.lo 
./ogr/ogr_srs_erm.lo ./ogr/swq.lo ./ogr/swq_expr_node.lo 
./ogr/swq_parser.lo ./ogr/swq_select.lo ./ogr/swq_op_registrar.lo 
./ogr/swq_op_general.lo ./ogr/ogr_srs_validate.lo ./ogr/ogr_srs_xml.lo 
./ogr/ograssemblepolygon.lo ./ogr/ogr2gmlgeometry.lo 
./ogr/gml2ogrgeometry.lo ./ogr/ogr_expat.lo ./ogr/ogrpgeogeometry.lo 
./ogr/ogrgeomediageometry.lo \
         -rpath /usr/local/lib \
         -no-undefined \
         -version-info 17:0:16
libtool: link: ignoring unknown tag LD
libtool: link: gcc -dynamiclib  -o .libs/libgdal.1.dylib  
/Users/j/programs/GDALtrunk/gdal/frmts/o/.libs/EHapi.o 
/Users/j/programs/GDALtrunk/gdal/frmts/o/.libs/EnvisatFile.o 
/Users/j/programs/GDALtrunk/gdal/frmts/o/.libs/GDapi.o 
/Users/j/programs/GDALtrunk/gdal/frmt

....

and ends with

./ogr/.libs/ogr_expat.o ./ogr/.libs/ogrpgeogeometry.o 
./ogr/.libs/ogrgeomediageometry.o   -lsqlite3 -lexpat 
/usr/local/lib/libNCSEcw.dylib -L/usr/lib -L/usr/local/lib 
-L/System/Library/Frameworks/Carbon.framework/Carbon 
/usr/local/lib/libNCSEcwC.dylib /usr/local/lib/libNCSCnet.dylib 
/usr/local/lib/libNCSUtil.dylib -ljasper 
-L/usr/local/Cellar/netcdf/4.1.3/lib -lnetcdf -lhdf5 
/usr/local/lib/libmfhdf.a /usr/local/lib/libdf.a -ljpeg -ltiff -lpq -ldl 
-lcurl -liconv -lxml2 -lz -lpthread -licucore -lm    -install_name  
/usr/local/lib/libgdal.1.dylib -compatibility_version 18 
-current_version 18.0 -Wl,-single_module
ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon' 
following -L not a directory
Undefined symbols for architecture x86_64:
   "operator new(unsigned long)", referenced from:
       IdrisiDataset::IdrisiDataset()in IdrisiDataset.o
       _GDALRegister_IDRISI in IdrisiDataset.o
       IdrisiDataset::Open(GDALOpenInfo*)       in IdrisiDataset.o
...



>
> On May 15, 2012, at 6:49 PM, jluis@ualg.pt wrote:
>
>> Hi,
>>
>> Sorry to come again with a building problem. Now on OSX 10.7.4
>> For forced updating reasons I was obliged to up start a chain of up updates that ended up on upgrading to Xcode 4.3.2 and now I get these errors linking (well, a lot more)
>>
>>
>> /System/Library/Frameworks/Carbon.framework/Carbon
>>
>> is a symlink to
>>
>> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
>>
>> but than what?
>>
>> Any idea how to solve this?
>>
>> Thanks
>>
>> Joaquim
>>
>> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon' following -L not a directory
>> Undefined symbols for architecture x86_64:
>>   "operator new(unsigned long)", referenced from:
>>       IdrisiDataset::IdrisiDataset()in IdrisiDataset.o
>>       _GDALRegister_IDRISI in IdrisiDataset.o
>>       IdrisiDataset::Open(GDALOpenInfo*)       in IdrisiDataset.o
>>       IdrisiRasterBand::GetDefaultRAT()       in IdrisiDataset.o
>>       IdrisiRasterBand::SetDefaultRAT(GDALRasterAttributeTable const*)   in IdrisiDataset.o
>>       IntergraphRasterBand::IntergraphRasterBand(IntergraphDataset*, int, int, GDALDataType)in IntergraphBand.o
>>       _GDALRegister_INGR in IntergraphDataset.o
>>
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> -----
> William Kyngesburye<kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> [Trillian]  What are you supposed to do WITH a maniacally depressed robot?
>
> [Marvin]  You think you have problems?  What are you supposed to do if you ARE a maniacally depressed robot?  No, don't try and answer, I'm 50,000 times more intelligent than you and even I don't know the answer...
>
> - HitchHiker's Guide to the Galaxy
>
>
>
>

From woklist at kyngchaos.com  Tue May 15 22:54:34 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue May 15 22:55:01 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <4FB30BFD.3020302@ualg.pt>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
Message-ID: <23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>

On May 15, 2012, at 9:07 PM, Joaquim Luis wrote:

>> Has this worked in the past?  Did you change any configuration options from then?  Or update any dependent libraries?
> 
> Yes, it did work several times in the past. But also yes, I updated dependencies using homebrew. Started by netcdf, which brought hdf5. Next, had to update libjpeg. All of that in top of upgrading XCode from 4.1 to 4.3.2
> Also had an error in one of the ecw headers. Not sure anymore of the exact terms but was something that was declared EXTERNAL wchar_t in OSX header and static on the NCe.../?) ecw header. I removed the 'static' declaration and it went well after
> 
>> Also, the link command immediately preceding the first error would help figure out what's going on.
> 
> It's a very long one. It starts with
> 
> and ends with
> 
> ./ogr/.libs/ogr_expat.o ./ogr/.libs/ogrpgeogeometry.o ./ogr/.libs/ogrgeomediageometry.o   -lsqlite3 -lexpat /usr/local/lib/libNCSEcw.dylib -L/usr/lib -L/usr/local/lib -L/System/Library/Frameworks/Carbon.framework/Carbon /usr/local/lib/libNCSEcwC.dylib /usr/local/lib/libNCSCnet.dylib /usr/local/lib/libNCSUtil.dylib -ljasper -L/usr/local/Cellar/netcdf/4.1.3/lib -lnetcdf -lhdf5 /usr/local/lib/libmfhdf.a /usr/local/lib/libdf.a -ljpeg -ltiff -lpq -ldl -lcurl -liconv -lxml2 -lz -lpthread -licucore -lm    -install_name  /usr/local/lib/libgdal.1.dylib -compatibility_version 18 -current_version 18.0 -Wl,-single_module
> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon' following -L not a directory
> Undefined symbols for architecture x86_64:
>  "operator new(unsigned long)", referenced from:
>      IdrisiDataset::IdrisiDataset()in IdrisiDataset.o
>      _GDALRegister_IDRISI in IdrisiDataset.o
>      IdrisiDataset::Open(GDALOpenInfo*)       in IdrisiDataset.o
> ...

From it's placement in the above and a vague memory of the old ecw builds, I suspect the carbon part comes from ECW.  those separate libNCEcw* libraries are an old way of building ECW, the newer method builds as a single libecwj2.  ECW is a PITA to compile on OSX (my notes still leave some unsolved problems).

But for the error, it maybe because it's using the wrong command to link - this is C++, and that's where the new() op is from.  Normally, the easy way to link is use g++, which automatically links the necessary C++ library.  But your link command is using gcc, which would need the C++ library linked in manually.  This is odd because libtool is passed g++, but ends up using gcc.  Did you update libtool in your GDAL source?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From oyvind.idland at gmail.com  Wed May 16 04:10:28 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed May 16 04:10:53 2012
Subject: [gdal-dev] WFS client - missing namespace in filter
Message-ID: <CAEVk4t1hfqXhMVyyeOp6M6s6VkGauZWgNn+_Ko14MdSFT6h0MQ@mail.gmail.com>

Hello,

there is a minor bug in the filter submitted by WFS GET requests:

The wfs namespace is missing. The current implementation sends

<Filter xmlns:gml="http://www.opengis.net/gml">

but should be

<Filter xmlns="http://www.opengis.net/wfs" xmlns:gml="
http://www.opengis.net/gml">


regards,


Oyvind Idland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/53215d76/attachment.html
From oyvind.idland at gmail.com  Wed May 16 04:21:44 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed May 16 04:21:58 2012
Subject: [gdal-dev] Re: WFS client - missing namespace in filter
In-Reply-To: <CAEVk4t1hfqXhMVyyeOp6M6s6VkGauZWgNn+_Ko14MdSFT6h0MQ@mail.gmail.com>
References: <CAEVk4t1hfqXhMVyyeOp6M6s6VkGauZWgNn+_Ko14MdSFT6h0MQ@mail.gmail.com>
Message-ID: <CAEVk4t1ZO9rWNuWbfjrJaQqm5GCDS3LtdUXUbosHJeuDCi1M6A@mail.gmail.com>

Sorry, forget about that one, it seems to be fixed by now in trunk.

Thanks !

-- Oyvind

On Wed, May 16, 2012 at 10:10 AM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> Hello,
>
> there is a minor bug in the filter submitted by WFS GET requests:
>
> The wfs namespace is missing. The current implementation sends
>
> <Filter xmlns:gml="http://www.opengis.net/gml">
>
> but should be
>
> <Filter xmlns="http://www.opengis.net/wfs" xmlns:gml="
> http://www.opengis.net/gml">
>
>
> regards,
>
>
> Oyvind Idland
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/10f2815b/attachment.html
From even.rouault at mines-paris.org  Wed May 16 07:25:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May 16 07:25:25 2012
Subject: [gdal-dev] Re: WFS client - missing namespace in filter
In-Reply-To: <CAEVk4t1ZO9rWNuWbfjrJaQqm5GCDS3LtdUXUbosHJeuDCi1M6A@mail.gmail.com>
References: <CAEVk4t1hfqXhMVyyeOp6M6s6VkGauZWgNn+_Ko14MdSFT6h0MQ@mail.gmail.com>
	<CAEVk4t1ZO9rWNuWbfjrJaQqm5GCDS3LtdUXUbosHJeuDCi1M6A@mail.gmail.com>
Message-ID: <1337167505.4fb38e9144776@imp.free.fr>

Selon Oyvind Idland <oyvind.idland@gmail.com>:

> Sorry, forget about that one, it seems to be fixed by now in trunk.

Actually, this was already fixed in GDAL 1.9. And the namespace used is
xmlns="http://www.opengis.net/ogc" (not wfs) as recommanded in the WFS 1.1 spec.

>
> Thanks !
>
> -- Oyvind
>
> On Wed, May 16, 2012 at 10:10 AM, Oyvind Idland
> <oyvind.idland@gmail.com>wrote:
>
> > Hello,
> >
> > there is a minor bug in the filter submitted by WFS GET requests:
> >
> > The wfs namespace is missing. The current implementation sends
> >
> > <Filter xmlns:gml="http://www.opengis.net/gml">
> >
> > but should be
> >
> > <Filter xmlns="http://www.opengis.net/wfs" xmlns:gml="
> > http://www.opengis.net/gml">
> >
> >
> > regards,
> >
> >
> > Oyvind Idland
> >
>


From jluis at ualg.pt  Wed May 16 07:09:55 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed May 16 07:38:02 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
	<23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
Message-ID: <4FB38B03.6070403@ualg.pt>


>  From it's placement in the above and a vague memory of the old ecw builds, I suspect the carbon part comes from ECW.  those separate libNCEcw* libraries are an old way of building ECW, the newer method builds as a single libecwj2.  ECW is a PITA to compile on OSX (my notes still leave some unsolved problems).\

Yes, you are right. I built --with-ecw=no and that part disappeared. I 
use this old one because (if I remember well) its license terms are much 
liberal, and because it works as I have it.

> But for the error, it maybe because it's using the wrong command to link - this is C++, and that's where the new() op is from.  Normally, the easy way to link is use g++, which automatically links the necessary C++ library.  But your link command is using gcc, which would need the C++ library linked in manually.  This is odd because libtool is passed g++, but ends up using gcc.  Did you update libtool in your GDAL source?
I didn't mentioned explicitly but I did a svn update so the code should be very close to what's in 1.9.1rc
Anyone building the release candidate on OSX with XCode 4.3.2 successfully?

Joaquim



From oyvind.idland at gmail.com  Wed May 16 07:46:45 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed May 16 07:47:22 2012
Subject: [gdal-dev] Re: WFS client - missing namespace in filter
In-Reply-To: <1337167505.4fb38e9144776@imp.free.fr>
References: <CAEVk4t1hfqXhMVyyeOp6M6s6VkGauZWgNn+_Ko14MdSFT6h0MQ@mail.gmail.com>
	<CAEVk4t1ZO9rWNuWbfjrJaQqm5GCDS3LtdUXUbosHJeuDCi1M6A@mail.gmail.com>
	<1337167505.4fb38e9144776@imp.free.fr>
Message-ID: <CAEVk4t2dwaz0K_W5wU9ozXW5Az=RJgT-fbF_t3NPH5UOFuecvg@mail.gmail.com>

Even,

my bad, correct.. its ogc, not wfs.

-- Oyvind

On Wed, May 16, 2012 at 1:25 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Oyvind Idland <oyvind.idland@gmail.com>:
>
> > Sorry, forget about that one, it seems to be fixed by now in trunk.
>
> Actually, this was already fixed in GDAL 1.9. And the namespace used is
> xmlns="http://www.opengis.net/ogc" (not wfs) as recommanded in the WFS
> 1.1 spec.
>
> >
> > Thanks !
> >
> > -- Oyvind
> >
> > On Wed, May 16, 2012 at 10:10 AM, Oyvind Idland
> > <oyvind.idland@gmail.com>wrote:
> >
> > > Hello,
> > >
> > > there is a minor bug in the filter submitted by WFS GET requests:
> > >
> > > The wfs namespace is missing. The current implementation sends
> > >
> > > <Filter xmlns:gml="http://www.opengis.net/gml">
> > >
> > > but should be
> > >
> > > <Filter xmlns="http://www.opengis.net/wfs" xmlns:gml="
> > > http://www.opengis.net/gml">
> > >
> > >
> > > regards,
> > >
> > >
> > > Oyvind Idland
> > >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/1df8f5ff/attachment-0001.html
From sigfrido at tiscali.it  Wed May 16 08:13:12 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Wed May 16 08:13:40 2012
Subject: [gdal-dev] Updating a single PostgreSQL field from ogr/python
In-Reply-To: <CAApmPxfOv8w0-Ls8MoH3P8qDPx4T+YjKDOnoNHy7o85+uVwavQ@mail.gmail.com>
References: <CAApmPxffpxUVBFQBKgTyYyLrB0jVgU05Zws-2eUcg=pkReX3bw@mail.gmail.com>
	<1336990064.2356.19.camel@GOLEM>
	<CAApmPxfOv8w0-Ls8MoH3P8qDPx4T+YjKDOnoNHy7o85+uVwavQ@mail.gmail.com>
Message-ID: <1337170392.2467.4.camel@GOLEM>

Hi Martin,

Il giorno mar, 15/05/2012 alle 11.50 +0200, Martin Jensen ha scritto:

> I ended up using the  ExecuteSQL  method because the  SetFeature
> method  deleted the content of the other fields. I'm sure there is an
> obvious solution to this also but I didn' t find it :)

SetFeature replaces the feature (identified via the PK) with the given
one; if the latter comes from a GetNextFeature() it should already
contain all the proper field values. But if you created it with
CreateFeature() then it will be empty, so SetFeature will copy empty
values into the on-disk feature.


> I also noticed the CopyLayer function dosen't write the geometry type
> of the copied layer. Is this expected behaviour ?

Uh, I never tried this. Sounds strange anyway.

Best regards

Sig



_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From woklist at kyngchaos.com  Wed May 16 09:50:33 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 16 09:51:10 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <CAE_VgzPOkFvzXokeXb=6h0UwkEHMznSWMoeQU5aO3+6Y5wyG6w@mail.gmail.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
	<23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
	<CAE_VgzPOkFvzXokeXb=6h0UwkEHMznSWMoeQU5aO3+6Y5wyG6w@mail.gmail.com>
Message-ID: <2DD61656-C9E1-46AC-831A-623DBFD3C16B@kyngchaos.com>

On May 16, 2012, at 6:03 AM, J Luis wrote:

> 
> From it's placement in the above and a vague memory of the old ecw builds, I suspect the carbon part comes from ECW.  those separate libNCEcw* libraries are an old way of building ECW, the newer method builds as a single libecwj2.  ECW is a PITA to compile on OSX (my notes still leave some unsolved problems).
> 
> Yes, you are right. I built --with-ecw=no and that part disappeared. I use this old one because (if I remember well) its license terms are much liberal, and because it works as I have it.
> 
The same version also has the single libecwj2 build option.  See my build instructions on my site.

>  But for the error, it maybe because it's using the wrong command to link - this is C++, and that's where the new() op is from.  Normally, the easy way to link is use g++, which automatically links the necessary C++ library.  But your link command is using gcc, which would need the C++ library linked in manually.  This is odd because libtool is passed g++, but ends up using gcc.  Did you update libtool in your GDAL source?
> 
>  
> I didn't mentioned explicitly but I did a svn update so the code should be very close to what's in 1.9.1rc
> Anyone building the release candidate on OSX with XCode 4.3.2 successfully?
> 
> Joaquim

1.9.1rc compiles with no problems (quick-n-dirty, no extras).

I just noticed something else, but I don't know if it's a problem - your libtool command has a "--tag=LD" flag in it, mine doesn't not.  You also get that message about ignoring unknown tag, and I wonder if it somehow confuses libtool so that it drops the g++.  What is your configure command?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From woklist at kyngchaos.com  Wed May 16 10:08:24 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 16 10:09:13 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <2DD61656-C9E1-46AC-831A-623DBFD3C16B@kyngchaos.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
	<23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
	<CAE_VgzPOkFvzXokeXb=6h0UwkEHMznSWMoeQU5aO3+6Y5wyG6w@mail.gmail.com>
	<2DD61656-C9E1-46AC-831A-623DBFD3C16B@kyngchaos.com>
Message-ID: <C0C5AA3F-4355-4E85-BDC6-0ADC61CF00AF@kyngchaos.com>

On May 16, 2012, at 8:50 AM, William Kyngesburye wrote:

>> I didn't mentioned explicitly but I did a svn update so the code should be very close to what's in 1.9.1rc
>> Anyone building the release candidate on OSX with XCode 4.3.2 successfully?
>> 
>> Joaquim
> 
> 1.9.1rc compiles with no problems (quick-n-dirty, no extras).
> 
> I just noticed something else, but I don't know if it's a problem - your libtool command has a "--tag=LD" flag in it, mine doesn't not.  You also get that message about ignoring unknown tag, and I wonder if it somehow confuses libtool so that it drops the g++.  What is your configure command?
> 
Wait, I found the problem, nothing to do with your configure.

In trunk, --tag=LD was added to GDALMake.opt.in, but it's not in 1.9.1rc1.  When I added that flag to 1.9.1rc, it failed the same as for you.  I'll reopen the bug that prompted adding that flag.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From woklist at kyngchaos.com  Wed May 16 10:12:34 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 16 10:12:39 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <C0C5AA3F-4355-4E85-BDC6-0ADC61CF00AF@kyngchaos.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
	<23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
	<CAE_VgzPOkFvzXokeXb=6h0UwkEHMznSWMoeQU5aO3+6Y5wyG6w@mail.gmail.com>
	<2DD61656-C9E1-46AC-831A-623DBFD3C16B@kyngchaos.com>
	<C0C5AA3F-4355-4E85-BDC6-0ADC61CF00AF@kyngchaos.com>
Message-ID: <56B03925-E11B-44DB-8B04-E60268911E02@kyngchaos.com>

On May 16, 2012, at 9:08 AM, William Kyngesburye wrote:

> On May 16, 2012, at 8:50 AM, William Kyngesburye wrote:
> 
>>> I didn't mentioned explicitly but I did a svn update so the code should be very close to what's in 1.9.1rc
>>> Anyone building the release candidate on OSX with XCode 4.3.2 successfully?
>>> 
>>> Joaquim
>> 
>> 1.9.1rc compiles with no problems (quick-n-dirty, no extras).
>> 
>> I just noticed something else, but I don't know if it's a problem - your libtool command has a "--tag=LD" flag in it, mine doesn't not.  You also get that message about ignoring unknown tag, and I wonder if it somehow confuses libtool so that it drops the g++.  What is your configure command?
>> 
> Wait, I found the problem, nothing to do with your configure.
> 
> In trunk, --tag=LD was added to GDALMake.opt.in, but it's not in 1.9.1rc1.  When I added that flag to 1.9.1rc, it failed the same as for you.  I'll reopen the bug that prompted adding that flag.
> 
Too hasty, bug is still open, and it looks like unresolved, at least in trunk.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From newmanw10 at gmail.com  Wed May 16 10:13:06 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Wed May 16 10:14:00 2012
Subject: [gdal-dev] gdalwarp question
Message-ID: <CAD34qgm8Mming3bWXW=H7QV_0_84510+vLvLycnix7cmS3vDdg@mail.gmail.com>

 If I do not provide a source spatial reference to gdalwarp will the
information in the geotiff be used instead?  ie. gdalwarp -t_srs
'EPSG:4326' input.tif output.tif?

I do not have a real example because I do not have the file I am working
with on this computer.  But an example gdalinfo would be:

PROJCS["NAD27 / UTM zone 11N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.978698213901]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1]]

So would my above example work when trying to convert this projection to
EPSG:4326, or do I need to specify the source spatial reference and/or
other parameters.

Thanks
Billy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/3e8dd2d0/attachment.html
From kyle at pobox.com  Wed May 16 10:46:04 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Wed May 16 10:46:35 2012
Subject: [gdal-dev] gdalwarp question
In-Reply-To: <CAD34qgm8Mming3bWXW=H7QV_0_84510+vLvLycnix7cmS3vDdg@mail.gmail.com>
References: <CAD34qgm8Mming3bWXW=H7QV_0_84510+vLvLycnix7cmS3vDdg@mail.gmail.com>
Message-ID: <CAJ0mEz2xLPUEd92ec-0y8RdEkzTRL5pj8_bu2vdOk-iW5cv0MQ@mail.gmail.com>

Billy,
Yes, gdalwarp will use the srs from the file if one is not specified,
providing it is valid.

kss

On Wed, May 16, 2012 at 8:13 AM, Billy Newman <newmanw10@gmail.com> wrote:

> If I do not provide a source spatial reference to gdalwarp will the
> information in the geotiff be used instead?  ie. gdalwarp -t_srs
> 'EPSG:4326' input.tif output.tif?
>
> I do not have a real example because I do not have the file I am working
> with on this computer.  But an example gdalinfo would be:
>
> PROJCS["NAD27 / UTM zone 11N",
>     GEOGCS["NAD27",
>         DATUM["North_American_Datum_1927",
>             SPHEROID["Clarke 1866",6378206.4,294.978698213901]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-117],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1]]
>
> So would my above example work when trying to convert this projection to
> EPSG:4326, or do I need to specify the source spatial reference and/or
> other parameters.
>
> Thanks
> Billy
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/da2de841/attachment.html
From newmanw10 at gmail.com  Wed May 16 10:52:56 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Wed May 16 10:53:38 2012
Subject: [gdal-dev] EPSG PCS/GCS code 5171 not found
Message-ID: <CAD34qgmePDfv27xxceW2kObZJSBDXgtcVkTfW1=g0f5jN1sTBA@mail.gmail.com>

When I run gdalinfo or gdalwarp on a tiff that is a one band image
with elevation data I get the following warning:

EPSG PCS/GCS code 5171 not found in EPSG support files.

I have GDAL_DATA set to /usr/local/share/gdal which I verified has the
data.  However looking at the supporting data files in that directory
it looks like 5171 is probably a VCS.

I would like to use gdalwarp to warp to EPSG:4326 but I am not sure
what gdalwarp is going to do with that, i.e. am I going to lose
information.  Note: gdalwarp also throws the same warning message.

Has anyone had any experience with this?

Thanks,
Billy
From jluis at ualg.pt  Wed May 16 11:40:56 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed May 16 11:41:56 2012
Subject: [gdal-dev] troubles building trunk on OSX + Xcode 4.3
In-Reply-To: <56B03925-E11B-44DB-8B04-E60268911E02@kyngchaos.com>
References: <20120516014902.486446ijwlrcl38k@wmail.ualg.pt>
	<24CEF449-B17B-4680-A227-451811DCDB8F@kyngchaos.com>
	<4FB30BFD.3020302@ualg.pt>
	<23051DA4-D7EE-4A35-ADEB-7EC0BF4E8484@kyngchaos.com>
	<CAE_VgzPOkFvzXokeXb=6h0UwkEHMznSWMoeQU5aO3+6Y5wyG6w@mail.gmail.com>
	<2DD61656-C9E1-46AC-831A-623DBFD3C16B@kyngchaos.com>
	<C0C5AA3F-4355-4E85-BDC6-0ADC61CF00AF@kyngchaos.com>
	<56B03925-E11B-44DB-8B04-E60268911E02@kyngchaos.com>
Message-ID: <4FB3CA88.90603@ualg.pt>

On 16-05-2012 15:12, William Kyngesburye wrote:
> On May 16, 2012, at 9:08 AM, William Kyngesburye wrote:
>
>> On May 16, 2012, at 8:50 AM, William Kyngesburye wrote:
>>
>>>> I didn't mentioned explicitly but I did a svn update so the code should be very close to what's in 1.9.1rc
>>>> Anyone building the release candidate on OSX with XCode 4.3.2 successfully?
>>>>
>>>> Joaquim
>>> 1.9.1rc compiles with no problems (quick-n-dirty, no extras).
>>>
>>> I just noticed something else, but I don't know if it's a problem - your libtool command has a "--tag=LD" flag in it, mine doesn't not.  You also get that message about ignoring unknown tag, and I wonder if it somehow confuses libtool so that it drops the g++.  What is your configure command?
>>>
>> Wait, I found the problem, nothing to do with your configure.
>>
>> In trunk, --tag=LD was added to GDALMake.opt.in, but it's not in 1.9.1rc1.  When I added that flag to 1.9.1rc, it failed the same as for you.  I'll reopen the bug that prompted adding that flag.
>>
> Too hasty, bug is still open, and it looks like unresolved, at least in trunk.

Thanks William for digging into this.
The "--tag=LD" warning caught my eye and that was why I included it in 
the pasted text just in case, but it meant nothing to me. So now I 
removed the LD tag and all built well again.

Joaquim
From belanger_david at live.ca  Wed May 16 14:49:50 2012
From: belanger_david at live.ca (=?utf-8?B?RGF2aWQgQu+/vWxhbmdlcg==?=)
Date: Wed May 16 14:50:03 2012
Subject: [gdal-dev] GDAL 1.9 and PostGis raster
In-Reply-To: <CALT_QHD-h8n6400EL8nJceoNa2BzGDxQySN3MknZ-BAeVCxanA@mail.gmail.com>
References: <BLU153-W60D0A8A2FC3E1421557186F5180@phx.gbl>,
	<CALT_QHD-h8n6400EL8nJceoNa2BzGDxQySN3MknZ-BAeVCxanA@mail.gmail.com>
Message-ID: <BLU153-W240A95FA52F278DAA80830F5180@phx.gbl>


Hi,
I have tried the version MSVC2008 (Win32) -development available today  at  http://www.gisinternals.com/sdk/ and I have still the same problem. For your information, I'm running GDAL on windows with a PostGIS 2.0 connection on Linux server. I tried many version of GDAL 1.9 and I always have the same problem. The version 1.8 is working very well but I would like to take advantage of the improvements in the last version because I'm working on an important project in Canada where processing time is very important.

Does any developper has an idea for this problem ?
 
Thanks
 
David B?langer
 
 
 

> Date: Wed, 16 May 2012 07:38:30 -0700
> Subject: Re: [gdal-dev] GDAL 1.9 and PostGis raster
> From: bkpark@ucdavis.edu
> To: belanger_david@live.ca
> 
> David,
> 
> The PostGIS Raster driver in GDAL was and still is in a state of flux.
> GDAL 1.9 should be better than 1.8 as there were significant changes
> to PostGIS Raster before 2.0 and 2.0. You may want to try GDAL trunk.
> 
> -bborie
> 
> On Tue, May 15, 2012 at 6:37 PM, David B?langer <belanger_david@live.ca> wrote:
> > Hi,
> >
> > I stored DEM raster data in  PostGIS 2.0 and I used gdal_translate (with
> > mode=2) to extract a mosaic of tiles. When I?m using GDAL 1.8 is working but
> > when I?m using GDAL 1.9 I can see the values of pixel for just one tile.
> >
> >
> >
> > For example I uploaded in the database a tile with an attribute
> > filename=056n05_w and an other tile with an filename=056n05_e and I executed
> > the command with GDAL 1.8 and GDAL 1.9:
> >
> > gdal_translate" -a_nodata "-32767" -of GTIFF  "PG:host=myhost port=14070
> > dbname='mybd' user='myuser' password='mypassword' schema='myschema'
> > table='Elevation' mode=2 where=\"filename LIKE \'%056n05%\'\" " 056N05.tif
> >
> >
> >
> > With GDAL 1.8 I obtained a mosaic of 2 tiles (the result expected) but with
> > GDAL 1.9, I obtained a raster with the same extent but only the values of
> > the tile 056n05_w are present. The pixels of the tile 056n05_w have a value
> > 0.
> >
> >
> >
> > Does anyone know this problem and can you help me?
> >
> >
> >
> > Thanks
> >
> > David
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Bborie Park
> Programmer
> Center for Vectorborne Diseases
> UC Davis
> 530-752-8380
> bkpark@ucdavis.edu
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/38d65ee2/attachment.html
From anakintang at gmail.com  Wed May 16 17:58:29 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Wed May 16 17:58:57 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
Message-ID: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>

Hi all,

I am communicating against a WFS server which supports data (GML)
streaming, which means that once I send a GetFeature quest for a big GML
(2.0GB+), server will take only seconds to start streaming GML back to
client while at the same time it's still preparing the rest of the big GML.

Now I wonder if GDAL/OGR WFS client can take advantage of that? Will I be
able to access the first few features while the streaming is still going
on? It seems to me that it doesn't because it always waiting the whole big
GML response is loaded in memory.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/86c3fe04/attachment.html
From even.rouault at mines-paris.org  Wed May 16 18:20:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May 16 18:21:19 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
Message-ID: <201205170020.01797.even.rouault@mines-paris.org>

Le mercredi 16 mai 2012 23:58:29, Yingqi Tang a ?crit :
> Hi all,
> 
> I am communicating against a WFS server which supports data (GML)
> streaming, which means that once I send a GetFeature quest for a big GML
> (2.0GB+), server will take only seconds to start streaming GML back to
> client while at the same time it's still preparing the rest of the big GML.
> 
> Now I wonder if GDAL/OGR WFS client can take advantage of that? Will I be
> able to access the first few features while the streaming is still going
> on? It seems to me that it doesn't because it always waiting the whole big
> GML response is loaded in memory.

Yes indeed, the OGR WFS driver waits for the whole response to be downloaded 
before parsing it. It could be desirable to have on-the-fly parsing indeed, but 
we currently lack the capability of doing it with the way we use the Curl 
library.

> 
> Thanks
From anakintang at gmail.com  Wed May 16 18:25:52 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Wed May 16 18:26:12 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <201205170020.01797.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<201205170020.01797.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>

Thanks for confirming it, Even. I have two follow up questions though:

1. Does the GML driver (reading local big GML file) also load the whole GML
in memory too?
2. Does the GML driver take url pointing to a GML?

Thanks

On Wed, May 16, 2012 at 3:20 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 16 mai 2012 23:58:29, Yingqi Tang a ?crit :
> > Hi all,
> >
> > I am communicating against a WFS server which supports data (GML)
> > streaming, which means that once I send a GetFeature quest for a big GML
> > (2.0GB+), server will take only seconds to start streaming GML back to
> > client while at the same time it's still preparing the rest of the big
> GML.
> >
> > Now I wonder if GDAL/OGR WFS client can take advantage of that? Will I be
> > able to access the first few features while the streaming is still going
> > on? It seems to me that it doesn't because it always waiting the whole
> big
> > GML response is loaded in memory.
>
> Yes indeed, the OGR WFS driver waits for the whole response to be
> downloaded
> before parsing it. It could be desirable to have on-the-fly parsing
> indeed, but
> we currently lack the capability of doing it with the way we use the Curl
> library.
>
> >
> > Thanks
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120516/a084dcc5/attachment.html
From warmerdam at pobox.com  Wed May 16 23:38:21 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 16 23:39:12 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1RC2 Available to Test
Message-ID: <CA+YzLBewFKbyME7LqwurWfD9ScVO--hbHAmC2zn+1mYG_kuyqg@mail.gmail.com>

Folks,

I have corrected two issues Even identified in RC1 and produced a new
release candidate for the 1.9.1 release.  They were:

 * Perl bindings version info now updated for 1.9.1
 * tiff_srs.py - EPSG:2066 test failed.

Get the code at:

  http://download.osgeo.org/gdal/gdal-1.9.1RC2.tar.gz
  http://download.osgeo.org/gdal/gdal191RC2.zip

I'll make a motion to adopt this as 1.9.1 fairly soon if it looks
promising.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From hitweiran at sina.com  Thu May 17 03:01:32 2012
From: hitweiran at sina.com (hitweiran)
Date: Thu May 17 03:01:50 2012
Subject: [gdal-dev] Effeciency of "ReadRaster" in different storage format of
 mulit-band image
Message-ID: <1337238092949-4975285.post@n6.nabble.com>

Hello, everyone.
There are two methods to extract data from a mulit-band remote sensing image
in GDAL.
1. Dataset.ReadRatser, that can read all data in mulit-band image.
2. Band.ReadRaster, that can read only one band of mulit-band image.
Actually, there are three formats used to storage mulit-band image, BIL
(Band Interleaved by Line format),BIP(Band Interleaved by Pixel format) and
BSQ(Band Sequential format).  
Based on my test , the runtime of read whole mulit-band data is quite
sensitive to the format of mulit-band image.
For example, when I used "Band.ReadRatser" to read mulit-band image band by
band. The total runtime is 285.93s, 13.48s and 19.51s for BIL, BSQ and BIP
respectively; (the size of image: width*height*bands=501*1004*125). BSQ
formate is the most effective.  However, the actual data can be storaged in
any format, so,how can I solve this problem? 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Effeciency-of-ReadRaster-in-different-storage-format-of-mulit-band-image-tp4975285.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu May 17 03:24:49 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 17 03:25:28 2012
Subject: [gdal-dev] Effeciency of "ReadRaster" in different storage format
	of mulit-band image
In-Reply-To: <1337238092949-4975285.post@n6.nabble.com>
References: <1337238092949-4975285.post@n6.nabble.com>
Message-ID: <CA+YzLBeXJSPVOEyYEjYEsyJFh+fe+UW4Dsn-hAMz+kKeQJ_9xQ@mail.gmail.com>

On Thu, May 17, 2012 at 12:01 AM, hitweiran <hitweiran@sina.com> wrote:
> Hello, everyone.
> There are two methods to extract data from a mulit-band remote sensing image
> in GDAL.
> 1. Dataset.ReadRatser, that can read all data in mulit-band image.
> 2. Band.ReadRaster, that can read only one band of mulit-band image.
> Actually, there are three formats used to storage mulit-band image, BIL
> (Band Interleaved by Line format),BIP(Band Interleaved by Pixel format) and
> BSQ(Band Sequential format).
> Based on my test , the runtime of read whole mulit-band data is quite
> sensitive to the format of mulit-band image.
> For example, when I used "Band.ReadRatser" to read mulit-band image band by
> band. The total runtime is 285.93s, 13.48s and 19.51s for BIL, BSQ and BIP
> respectively; (the size of image: width*height*bands=501*1004*125). BSQ
> formate is the most effective. ?However, the actual data can be storaged in
> any format, so,how can I solve this problem?

Hit Wei Ran,

You haven't really made clear what the problem is.  Is the problem
that some organizations of data give per performance?  What
actual format is being used.  There may well be cases we can
optimize if you can be more specific.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From bkpark at ucdavis.edu  Wed May 16 14:52:14 2012
From: bkpark at ucdavis.edu (Bborie Park)
Date: Thu May 17 04:50:17 2012
Subject: [gdal-dev] GDAL 1.9 and PostGis raster
In-Reply-To: <BLU153-W240A95FA52F278DAA80830F5180@phx.gbl>
References: <BLU153-W60D0A8A2FC3E1421557186F5180@phx.gbl>,
	<CALT_QHD-h8n6400EL8nJceoNa2BzGDxQySN3MknZ-BAeVCxanA@mail.gmail.com>
	<BLU153-W240A95FA52F278DAA80830F5180@phx.gbl>
Message-ID: <4FB3F75E.8070203@ucdavis.edu>

You may want to post on the postgis-users list as I believe the
developers of the PostGIS Raster driver can be found there.

-bborie

On 05/16/2012 11:49 AM, David B?langer wrote:
> 
> Hi,
> I have tried the version MSVC2008 (Win32) -development available today  at  http://www.gisinternals.com/sdk/ and I have still the same problem. For your information, I'm running GDAL on windows with a PostGIS 2.0 connection on Linux server. I tried many version of GDAL 1.9 and I always have the same problem. The version 1.8 is working very well but I would like to take advantage of the improvements in the last version because I'm working on an important project in Canada where processing time is very important.
> 
> Does any developper has an idea for this problem ?
>  
> Thanks
>  
> David B?langer
>  
>  
>  
> 
>> Date: Wed, 16 May 2012 07:38:30 -0700
>> Subject: Re: [gdal-dev] GDAL 1.9 and PostGis raster
>> From: bkpark@ucdavis.edu
>> To: belanger_david@live.ca
>>
>> David,
>>
>> The PostGIS Raster driver in GDAL was and still is in a state of flux.
>> GDAL 1.9 should be better than 1.8 as there were significant changes
>> to PostGIS Raster before 2.0 and 2.0. You may want to try GDAL trunk.
>>
>> -bborie
>>
>> On Tue, May 15, 2012 at 6:37 PM, David B?langer <belanger_david@live.ca> wrote:
>>> Hi,
>>>
>>> I stored DEM raster data in  PostGIS 2.0 and I used gdal_translate (with
>>> mode=2) to extract a mosaic of tiles. When I?m using GDAL 1.8 is working but
>>> when I?m using GDAL 1.9 I can see the values of pixel for just one tile.
>>>
>>>
>>>
>>> For example I uploaded in the database a tile with an attribute
>>> filename=056n05_w and an other tile with an filename=056n05_e and I executed
>>> the command with GDAL 1.8 and GDAL 1.9:
>>>
>>> gdal_translate" -a_nodata "-32767" -of GTIFF  "PG:host=myhost port=14070
>>> dbname='mybd' user='myuser' password='mypassword' schema='myschema'
>>> table='Elevation' mode=2 where=\"filename LIKE \'%056n05%\'\" " 056N05.tif
>>>
>>>
>>>
>>> With GDAL 1.8 I obtained a mosaic of 2 tiles (the result expected) but with
>>> GDAL 1.9, I obtained a raster with the same extent but only the values of
>>> the tile 056n05_w are present. The pixels of the tile 056n05_w have a value
>>> 0.
>>>
>>>
>>>
>>> Does anyone know this problem and can you help me?
>>>
>>>
>>>
>>> Thanks
>>>
>>> David
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> -- 
>> Bborie Park
>> Programmer
>> Center for Vectorborne Diseases
>> UC Davis
>> 530-752-8380
>> bkpark@ucdavis.edu
>  		 	   		  
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Bborie Park
Programmer
Center for Vectorborne Diseases
UC Davis
530-752-8380
bkpark@ucdavis.edu
From even.rouault at mines-paris.org  Thu May 17 07:19:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 17 07:20:04 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<201205170020.01797.even.rouault@mines-paris.org>
	<CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>
Message-ID: <201205171319.08295.even.rouault@mines-paris.org>

Le jeudi 17 mai 2012 00:25:52, Yingqi Tang a ?crit :
> Thanks for confirming it, Even. I have two follow up questions though:
> 
> 1. Does the GML driver (reading local big GML file) also load the whole GML
> in memory too?

No, it will read it by small chunks. If no matching XML schema is available 
(or that the parser of the GML driver cannot manage to understand it because 
it is too complex (when the GML data is not limited to the Simple Feature 
convention)), there will be an initial full scan of the file to determine the 
schema of features.

> 2. Does the GML driver take url pointing to a GML?

It can work with /vsicurl/http://something, provided that the server allows 
partial downloading of arbitrary ranges of bytes within the file, which is 
rarely the case with GetFeature() requests.

In theory the WFS driver could be improved to use the capability of the GML 
driver to read chunk by chunk, but there is some work to make that happen. 
This would probably require a /vsicurl_streaming/ virtual file system where 
basically only Read() requests would be available, thus not requiring the 
server to have download range capabilities.

> 
> Thanks
> 
> On Wed, May 16, 2012 at 3:20 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le mercredi 16 mai 2012 23:58:29, Yingqi Tang a ?crit :
> > > Hi all,
> > > 
> > > I am communicating against a WFS server which supports data (GML)
> > > streaming, which means that once I send a GetFeature quest for a big
> > > GML (2.0GB+), server will take only seconds to start streaming GML
> > > back to client while at the same time it's still preparing the rest of
> > > the big
> > 
> > GML.
> > 
> > > Now I wonder if GDAL/OGR WFS client can take advantage of that? Will I
> > > be able to access the first few features while the streaming is still
> > > going on? It seems to me that it doesn't because it always waiting the
> > > whole
> > 
> > big
> > 
> > > GML response is loaded in memory.
> > 
> > Yes indeed, the OGR WFS driver waits for the whole response to be
> > downloaded
> > before parsing it. It could be desirable to have on-the-fly parsing
> > indeed, but
> > we currently lack the capability of doing it with the way we use the Curl
> > library.
> > 
> > > Thanks
From even.rouault at mines-paris.org  Thu May 17 12:47:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 17 12:48:30 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <201205171319.08295.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>
	<201205171319.08295.even.rouault@mines-paris.org>
Message-ID: <201205171847.45820.even.rouault@mines-paris.org>


> > 2. Does the GML driver take url pointing to a GML?
> 
> It can work with /vsicurl/http://something, provided that the server allows
> partial downloading of arbitrary ranges of bytes within the file, which is
> rarely the case with GetFeature() requests.
> 
> In theory the WFS driver could be improved to use the capability of the GML
> driver to read chunk by chunk, but there is some work to make that happen.
> This would probably require a /vsicurl_streaming/ virtual file system where
> basically only Read() requests would be available, thus not requiring the
> server to have download range capabilities.

Before considering the effort of implementing /vsicurl_streaming/ , I've 
improved a few things in the GML driver in trunk that allows to parse a GML 
stream that is a WFS GetFeature response document.

So you can now try the following command on Linux :

wget -O - "http://testing.deegree.org/deegree-
wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs" 
| ogrinfo -ro -al -q /vsistdin/

or

wget -O - "http://testing.deegree.org/deegree-
wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs" 
| ogr2ogr springs.shp /vsistdin/

(or instead of "wget -O -", you can use "curl" depending on what is installed 
on your machine)
From anakintang at gmail.com  Thu May 17 13:09:02 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu May 17 13:09:25 2012
Subject: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <201205171847.45820.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>
	<201205171319.08295.even.rouault@mines-paris.org>
	<201205171847.45820.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZC5RTeQY_0Ceu4TwoVh23=FCj8pbgq5XYyMnvzLHQXfug@mail.gmail.com>

Thanks a lot, Even. I will give it a try.

On Thu, May 17, 2012 at 9:47 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

>
> > > 2. Does the GML driver take url pointing to a GML?
> >
> > It can work with /vsicurl/http://something, provided that the server
> allows
> > partial downloading of arbitrary ranges of bytes within the file, which
> is
> > rarely the case with GetFeature() requests.
> >
> > In theory the WFS driver could be improved to use the capability of the
> GML
> > driver to read chunk by chunk, but there is some work to make that
> happen.
> > This would probably require a /vsicurl_streaming/ virtual file system
> where
> > basically only Read() requests would be available, thus not requiring the
> > server to have download range capabilities.
>
> Before considering the effort of implementing /vsicurl_streaming/ , I've
> improved a few things in the GML driver in trunk that allows to parse a GML
> stream that is a WFS GetFeature response document.
>
> So you can now try the following command on Linux :
>
> wget -O - "http://testing.deegree.org/deegree-
>
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs"
> | ogrinfo -ro -al -q /vsistdin/
>
> or
>
> wget -O - "http://testing.deegree.org/deegree-
>
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs"
> | ogr2ogr springs.shp /vsistdin/
>
> (or instead of "wget -O -", you can use "curl" depending on what is
> installed
> on your machine)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/b24af32c/attachment.html
From aashishcy at gmail.com  Thu May 17 14:04:30 2012
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Thu May 17 14:05:29 2012
Subject: [gdal-dev] JPEG 2000 layers GDAL
Message-ID: <CAGeT8ymMVUnu5GfcbdmzTv+R_4hyb67tZD0YaZ9qxYr-bnxc0g@mail.gmail.com>

Folks,

I have written a GDAl based reader and I am trying to read JPEG 2000
images. When I ran gdalinfo on one of the samples images from here:
http://www.openjpeg.org/index.php?menu=samples, it does not list subdataset
or overviews ( I was expecting overviews ).

I am wondering what I am missing.  It would be nice if someone can provide
some input on this.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/b20fe987/attachment.html
From even.rouault at mines-paris.org  Thu May 17 14:09:59 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 17 14:10:51 2012
Subject: [gdal-dev] JPEG 2000 layers GDAL
In-Reply-To: <CAGeT8ymMVUnu5GfcbdmzTv+R_4hyb67tZD0YaZ9qxYr-bnxc0g@mail.gmail.com>
References: <CAGeT8ymMVUnu5GfcbdmzTv+R_4hyb67tZD0YaZ9qxYr-bnxc0g@mail.gmail.com>
Message-ID: <201205172009.59936.even.rouault@mines-paris.org>

Le jeudi 17 mai 2012 20:04:30, Jayesh Chaudhary a ?crit :
> Folks,
> 
> I have written a GDAl based reader and I am trying to read JPEG 2000
> images. When I ran gdalinfo on one of the samples images from here:
> http://www.openjpeg.org/index.php?menu=samples, it does not list subdataset
> or overviews ( I was expecting overviews ).

There are no concept of subdataset with JPEG2000 drivers, so this is expected.

As far as overviews, it depends on the particular JPEG2000 driver that you 
uses. JP2ECW, JP2MrSID and JP2KAK should expose them. (JP2ECW exposes 
arbitrary overviews). But JP2OpenJPEG or JPEG2000 (Jasper based) drivers 
aren't sufficiently advanced to expose overviews.

From warmerdam at pobox.com  Thu May 17 14:22:35 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 17 14:22:46 2012
Subject: [gdal-dev] Propose Chen Zhen as committer
In-Reply-To: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
References: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
Message-ID: <CA+YzLBeGuuS_Q6tf_q_gXETr7e4jtf=GwtAL6qxTqoBNgPG8Mg@mail.gmail.com>

On Sat, Apr 28, 2012 at 8:22 PM, Tyler Mitchell
<tyler.mitchell@actian.com>wrote:

> Chen Zhen (zhenchen17) has been instrumental at tweaking our Ingres driver
> in OGR
> and he hopes for further contributions in the future (backporting and
> other improvements).
>
> At Frank's suggestion I'm proposing that Chen is set up to do commits to
> his area of focus directly.  Having him with commit access will really
> help streamline support and improvements over the longer term.
>
> I've sent him the reference to the RFC for committers guidelines and
> requirements and
> he is interested.
>

+1 Frank

We will need Chen to report here on the list that he
has read the RFC and is willing to abide by the guidelines.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/2b72e389/attachment.html
From tyler.mitchell at actian.com  Thu May 17 14:33:22 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Thu May 17 14:34:09 2012
Subject: Fwd: [gdal-dev] Propose Chen Zhen as committer
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAABBOfhaR2pCptzea23u788BAAAAAA==@gmail.com>
Message-ID: <1A49109B-A0ED-4DD7-9E46-2E9134F04D74@actian.com>

I just realised he had replied about this earlier, but only to me (below)..

Begin forwarded message:

> From: "chen zhen" <zhenchen17@gmail.com>
> Date: April 28, 2012 9:51:11 PM PDT
> To: "'Tyler Mitchell'" <tyler.mitchell@actian.com>
> Subject: RE: [gdal-dev] Propose Chen Zhen as committer
> 
> Hi Folks,
>  
> I am Chen Zhen who helps Tyler improving Ingres OGR driver. It will be a great honor for me to be a committer for a such great Open Source project. I promise I will follow the RFC and obey all rules when developing and committing source code and try my best to perfect the Ingres OGR driver, if I has  such an opportunity.
>  
> Regards,
>  
> Chen zhen
>  
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tyler Mitchell
> Sent: Sunday, April 29, 2012 11:23 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Propose Chen Zhen as committer
>  
> Chen Zhen (zhenchen17) has been instrumental at tweaking our Ingres driver in OGR 
> and he hopes for further contributions in the future (backporting and other improvements).
> 
> At Frank's suggestion I'm proposing that Chen is set up to do commits to
> his area of focus directly.  Having him with commit access will really
> help streamline support and improvements over the longer term.
>  
> I've sent him the reference to the RFC for committers guidelines and requirements and
> he is interested.
>  
> Thanks,
> Tyler
> 
> Tyler Mitchell
> Engineering Director 
> Actian Corporation
> tyler.mitchell@actian.com
> 
> MOBILE 250-303-1831
> SKYPE spatialguru
> www.actian.com
>  



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell@actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/09456fa8/attachment-0001.html
From anakintang at gmail.com  Thu May 17 15:13:59 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu May 17 15:14:26 2012
Subject: Fwd: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <201205172105.13701.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<201205171319.08295.even.rouault@mines-paris.org>
	<CA+DQzZBdTtmFMk=NwW6N5XhsDC3mRbWw7kvMgRsFBar4q9kWxw@mail.gmail.com>
	<201205172105.13701.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZCHXDdVQUs7NXH+_Y7UQ_ioS3MO5yPmr-K56NKJ1GJu2w@mail.gmail.com>

Resend to the mailing list.

---------- Forwarded message ----------
From: Even Rouault <even.rouault@mines-paris.org>
Date: Thu, May 17, 2012 at 12:05 PM
Subject: Re: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
streaming?
To: Yingqi Tang <anakintang@gmail.com>


Le jeudi 17 mai 2012 20:52:07, Yingqi Tang a ?crit :
> Even,
>
> Just to clarify, when you say:
>
> "...server allows partial downloading of arbitrary ranges of bytes within
> the file...", what does it really mean? If I simply put a static GML file
> in IIS and share it through HTTP, will it support partial downloading?

Yes, static pages should support partial downloading. But WFS servers that
generate response on the fly generally don't.

>
> Thanks,
> Yingqi
>
> On Thu, May 17, 2012 at 4:19 AM, Even Rouault
>
> <even.rouault@mines-paris.org>wrote:
> > Le jeudi 17 mai 2012 00:25:52, Yingqi Tang a ?crit :
> > > Thanks for confirming it, Even. I have two follow up questions though:
> > >
> > > 1. Does the GML driver (reading local big GML file) also load the
whole
> >
> > GML
> >
> > > in memory too?
> >
> > No, it will read it by small chunks. If no matching XML schema is
> > available (or that the parser of the GML driver cannot manage to
> > understand it because
> > it is too complex (when the GML data is not limited to the Simple
Feature
> > convention)), there will be an initial full scan of the file to
determine
> > the
> > schema of features.
> >
> > > 2. Does the GML driver take url pointing to a GML?
> >
> > It can work with /vsicurl/http://something, provided that the server
> > allows
> > partial downloading of arbitrary ranges of bytes within the file, which
> > is rarely the case with GetFeature() requests.
> >
> > In theory the WFS driver could be improved to use the capability of the
> > GML driver to read chunk by chunk, but there is some work to make that
> > happen. This would probably require a /vsicurl_streaming/ virtual file
> > system where basically only Read() requests would be available, thus not
> > requiring the server to have download range capabilities.
> >
> > > Thanks
> > >
> > > On Wed, May 16, 2012 at 3:20 PM, Even Rouault
> > >
> > > <even.rouault@mines-paris.org>wrote:
> > > > Le mercredi 16 mai 2012 23:58:29, Yingqi Tang a ?crit :
> > > > > Hi all,
> > > > >
> > > > > I am communicating against a WFS server which supports data (GML)
> > > > > streaming, which means that once I send a GetFeature quest for a
> > > > > big GML (2.0GB+), server will take only seconds to start streaming
> > > > > GML back to client while at the same time it's still preparing the
> > > > > rest
> >
> > of
> >
> > > > > the big
> > > >
> > > > GML.
> > > >
> > > > > Now I wonder if GDAL/OGR WFS client can take advantage of that?
> > > > > Will
> >
> > I
> >
> > > > > be able to access the first few features while the streaming is
> > > > > still going on? It seems to me that it doesn't because it always
> > > > > waiting
> >
> > the
> >
> > > > > whole
> > > >
> > > > big
> > > >
> > > > > GML response is loaded in memory.
> > > >
> > > > Yes indeed, the OGR WFS driver waits for the whole response to be
> > > > downloaded
> > > > before parsing it. It could be desirable to have on-the-fly parsing
> > > > indeed, but
> > > > we currently lack the capability of doing it with the way we use the
> >
> > Curl
> >
> > > > library.
> > > >
> > > > > Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/41d06d92/attachment.html
From anakintang at gmail.com  Thu May 17 15:14:47 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu May 17 15:15:14 2012
Subject: Fwd: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <CA+DQzZAER01gyBqGfRNJkCXPGkimPsWPdCAjnbtuxLaJDPe_RQ@mail.gmail.com>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZCqBmw0WzqEgR5HVf74b0bv8pbFWSrCPYMDZ-5xz+_00A@mail.gmail.com>
	<201205171319.08295.even.rouault@mines-paris.org>
	<201205171847.45820.even.rouault@mines-paris.org>
	<CA+DQzZAER01gyBqGfRNJkCXPGkimPsWPdCAjnbtuxLaJDPe_RQ@mail.gmail.com>
Message-ID: <CA+DQzZDdxBZSQGQ0KeO_p6m+=EMUOVb114HESG4eAxyBAqwC7A@mail.gmail.com>

Resend to the mailing list

---------- Forwarded message ----------
From: Yingqi Tang <anakintang@gmail.com>
Date: Thu, May 17, 2012 at 12:03 PM
Subject: Re: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
streaming?
To: Even Rouault <even.rouault@mines-paris.org>


How can I do below through GDAL Python API?

wget -O - "http://testing.deegree.org/deegree-
wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs"
| ogrinfo -ro -al -q /vsistdin/

On Thu, May 17, 2012 at 9:47 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

>
> > > 2. Does the GML driver take url pointing to a GML?
> >
> > It can work with /vsicurl/http://something, provided that the server
> allows
> > partial downloading of arbitrary ranges of bytes within the file, which
> is
> > rarely the case with GetFeature() requests.
> >
> > In theory the WFS driver could be improved to use the capability of the
> GML
> > driver to read chunk by chunk, but there is some work to make that
> happen.
> > This would probably require a /vsicurl_streaming/ virtual file system
> where
> > basically only Read() requests would be available, thus not requiring the
> > server to have download range capabilities.
>
> Before considering the effort of implementing /vsicurl_streaming/ , I've
> improved a few things in the GML driver in trunk that allows to parse a GML
> stream that is a WFS GetFeature response document.
>
> So you can now try the following command on Linux :
>
> wget -O - "http://testing.deegree.org/deegree-
>
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs"
> | ogrinfo -ro -al -q /vsistdin/
>
> or
>
> wget -O - "http://testing.deegree.org/deegree-
>
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs"
> | ogr2ogr springs.shp /vsistdin/
>
> (or instead of "wget -O -", you can use "curl" depending on what is
> installed
> on your machine)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/6e30c0d7/attachment.html
From even.rouault at mines-paris.org  Thu May 17 15:26:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 17 15:27:09 2012
Subject: Fwd: [gdal-dev] Can OGR WFS driver take advantage of WFS Server
	streaming?
In-Reply-To: <CA+DQzZDdxBZSQGQ0KeO_p6m+=EMUOVb114HESG4eAxyBAqwC7A@mail.gmail.com>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZAER01gyBqGfRNJkCXPGkimPsWPdCAjnbtuxLaJDPe_RQ@mail.gmail.com>
	<CA+DQzZDdxBZSQGQ0KeO_p6m+=EMUOVb114HESG4eAxyBAqwC7A@mail.gmail.com>
Message-ID: <201205172126.10293.even.rouault@mines-paris.org>

> 
> How can I do below through GDAL Python API?
> 
> wget -O - "http://testing.deegree.org/deegree-
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Spri
> ngs"
> 
> | ogrinfo -ro -al -q /vsistdin/
> 

Well, let's say that you have the following python script 
(read_streamed_gml.py) :

from osgeo import ogr
ds = ogr.Open('/vsistdin/')
lyr = ds.GetLayer(0)
feat = lyr.GetNextFeature()
while feat is not None:
    feat.DumpReadable()
    feat = lyr.GetNextFeature()

Then you can pipe the output of wget to it that way :

wget -O - "http://testing.deegree.org/deegree-
wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs" 
| python read_streamed_gml.py

I'm starting to work to a /vsicurl_stream/ implementation that should avoid 
using the standard input and external wget/curl.
From szekerest at gmail.com  Thu May 17 15:38:25 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu May 17 15:38:32 2012
Subject: [gdal-dev] Propose Chen Zhen as committer
In-Reply-To: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
References: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
Message-ID: <CACALY+SBOYUvVxt6Ttzr+M3CUaRYKHMD4CuhEkdniXs=Po1i-A@mail.gmail.com>

+1

Tamas


2012/4/29 Tyler Mitchell <tyler.mitchell@actian.com>

> Chen Zhen (zhenchen17) has been instrumental at tweaking our Ingres driver
> in OGR
> and he hopes for further contributions in the future (backporting and
> other improvements).
>
> At Frank's suggestion I'm proposing that Chen is set up to do commits to
> his area of focus directly.  Having him with commit access will really
> help streamline support and improvements over the longer term.
>
> I've sent him the reference to the RFC for committers guidelines and
> requirements and
> he is interested.
>
> Thanks,
> Tyler
>
> *Tyler Mitchell***
> Engineering Director
> Actian Corporation
> *tyler.mitchell@actian.com
> *
> MOBILE 250-303-1831
> SKYPE spatialguru
> www.actian.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/b5f370ad/attachment-0001.html
From warmerdam at pobox.com  Thu May 17 16:36:36 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 17 16:37:21 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.1RC2 to Final Release
Message-ID: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>

Motion: The GDAL/OGR 1.9.1RC2 release candidate is hearby
declared the final GDAL/OGR 1.9.1 release.

--

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From aashishcy at gmail.com  Thu May 17 16:43:55 2012
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Thu May 17 16:44:21 2012
Subject: [gdal-dev] JPEG 2000 layers GDAL
In-Reply-To: <201205172009.59936.even.rouault@mines-paris.org>
References: <CAGeT8ymMVUnu5GfcbdmzTv+R_4hyb67tZD0YaZ9qxYr-bnxc0g@mail.gmail.com>
	<201205172009.59936.even.rouault@mines-paris.org>
Message-ID: <CAGeT8ym6vwxuegbKcP0wLygzMu+S_o2wCwoq+MVT_bQiDHCD3g@mail.gmail.com>

Thanks Even.

I realised that I was using OpenJPEG driver (some old version) which does
not support overviews. I intend to use MrSID which worked as expected.

Thanks a lot.



On Thu, May 17, 2012 at 2:09 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le jeudi 17 mai 2012 20:04:30, Jayesh Chaudhary a ?crit :
> > Folks,
> >
> > I have written a GDAl based reader and I am trying to read JPEG 2000
> > images. When I ran gdalinfo on one of the samples images from here:
> > http://www.openjpeg.org/index.php?menu=samples, it does not list
> subdataset
> > or overviews ( I was expecting overviews ).
>
> There are no concept of subdataset with JPEG2000 drivers, so this is
> expected.
>
> As far as overviews, it depends on the particular JPEG2000 driver that you
> uses. JP2ECW, JP2MrSID and JP2KAK should expose them. (JP2ECW exposes
> arbitrary overviews). But JP2OpenJPEG or JPEG2000 (Jasper based) drivers
> aren't sufficiently advanced to expose overviews.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120517/f8635900/attachment.html
From even.rouault at mines-paris.org  Thu May 17 16:55:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 17 16:56:32 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.1RC2 to Final Release
In-Reply-To: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
References: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
Message-ID: <201205172255.36396.even.rouault@mines-paris.org>

Le jeudi 17 mai 2012 22:36:36, Frank Warmerdam a ?crit :
> Motion: The GDAL/OGR 1.9.1RC2 release candidate is hearby
> declared the final GDAL/OGR 1.9.1 release.

+1 Even
From dmorissette at mapgears.com  Thu May 17 18:12:55 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu May 17 18:23:02 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.1RC2 to Final Release
In-Reply-To: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
References: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
Message-ID: <4FB577E7.9010609@mapgears.com>

On 12-05-17 4:36 PM, Frank Warmerdam wrote:
> Motion: The GDAL/OGR 1.9.1RC2 release candidate is hearby
> declared the final GDAL/OGR 1.9.1 release.
>

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From hitweiran at sina.com  Thu May 17 20:39:26 2012
From: hitweiran at sina.com (hitweiran)
Date: Thu May 17 20:40:23 2012
Subject: [gdal-dev] Re: Effeciency of "ReadRaster" in different storage
 format of mulit-band image
In-Reply-To: <CA+YzLBeXJSPVOEyYEjYEsyJFh+fe+UW4Dsn-hAMz+kKeQJ_9xQ@mail.gmail.com>
References: <1337238092949-4975285.post@n6.nabble.com>
	<CA+YzLBeXJSPVOEyYEjYEsyJFh+fe+UW4Dsn-hAMz+kKeQJ_9xQ@mail.gmail.com>
Message-ID: <1337301566485-4975488.post@n6.nabble.com>

My question is when the format of data is BIL or BIP, the efficiency of
Band.ReadRaster is quite low. How should I optimize code? 
I converted one mulit-band image into all the three formats and found that
BSQ can read image in the most efficient, the other two is inefficient. So I
don't know how can I improve efficient when BIL and BIP is adopted?

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Effeciency-of-ReadRaster-in-different-storage-format-of-mulit-band-image-tp4975285p4975488.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tyler.mitchell at actian.com  Fri May 18 01:12:03 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Fri May 18 01:12:36 2012
Subject: [gdal-dev] VRT with attribute filter?
Message-ID: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>

I've done my best to comb through the code but can't see how to use an attribute filter in a (OGR) VRT definition.  Yet, I see an old ticket from Bart that was asking for it and seemed to be implemented.  Or am I reading too much into this?  Any one using it?

http://trac.osgeo.org/gdal/ticket/900

Tyler
From chaitanya.ch at gmail.com  Fri May 18 03:01:41 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri May 18 03:02:27 2012
Subject: [gdal-dev] VRT with attribute filter?
In-Reply-To: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
References: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
Message-ID: <CAMKgpOZTdTJ5NBFM9fVAg4HXe04yhgSVp+Ucd=Y6wpYkUq52FQ@mail.gmail.com>

Tyler,

The patch mentioned in #900 is just for a passthrough of the filter to the
underlying source. As of now, there is no provision for setting an
attribute filter in OGR's VRT.

On Fri, May 18, 2012 at 10:42 AM, Tyler Mitchell
<tyler.mitchell@actian.com>wrote:

> I've done my best to comb through the code but can't see how to use an
> attribute filter in a (OGR) VRT definition.  Yet, I see an old ticket from
> Bart that was asking for it and seemed to be implemented.  Or am I reading
> too much into this?  Any one using it?
>
> http://trac.osgeo.org/gdal/ticket/900
>
> Tyler_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120518/3b4cebe3/attachment.html
From szekerest at gmail.com  Fri May 18 03:37:46 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri May 18 03:38:00 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.1RC2 to Final Release
In-Reply-To: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
References: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
Message-ID: <CACALY+Su+B=n0=Fx8GdXWP4WAR4go_epxQ50Y03c5Zg+5GC5gQ@mail.gmail.com>

+1

Tamas



2012/5/17 Frank Warmerdam <warmerdam@pobox.com>

> Motion: The GDAL/OGR 1.9.1RC2 release candidate is hearby
> declared the final GDAL/OGR 1.9.1 release.
>
> --
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120518/ce693ccb/attachment.html
From oyvind.idland at gmail.com  Fri May 18 04:34:08 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Fri May 18 04:34:53 2012
Subject: [gdal-dev] Reprojecting a tiled dataset
Message-ID: <CAEVk4t2bsnH=0+zP=ZYY89HA3rSSo7307pigCX-50Osp0ROhVg@mail.gmail.com>

Hello,

i have a set of GeoTIFF tiles, that I want to reproject into a new set of
tiles.

So far I have the following strategy:
1) create a VRT from the existing tiles
2) make a script that creates new tiles, one by one using gdalwarp.


Is there a better way of doing this ?


- Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120518/b7eca558/attachment.html
From even.rouault at mines-paris.org  Fri May 18 06:10:11 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 18 06:11:05 2012
Subject: [gdal-dev] VRT with attribute filter?
In-Reply-To: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
References: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
Message-ID: <201205181210.11333.even.rouault@mines-paris.org>

Le vendredi 18 mai 2012 07:12:03, Tyler Mitchell a ?crit :
> I've done my best to comb through the code but can't see how to use an
> attribute filter in a (OGR) VRT definition.

Tyler,

You have 2 possibilities :

1) Probalby not what you want for your use case, but you can set a OGR VRT and 
set externally an attribute filter on the returned layer. The attribute filter 
should be applied directly on the underlying source layer if you set 
<attrFilterPassThrough>TRUE</attrFilterPassThrough> in the <OGRVRTLayer> (or 
if no explicit <Field> is present, or -in trunk- automatically in compatible 
cases)

2) Or you use a <SrcSQL> definition with a WHERE clause in it. In case the 
underlying datasource as a specific implementation of ExecuteSQL() , that 
should be efficient (and even if it doesn't the generic OGR SQL engine should 
extract the WHERE clause and pass it to the SetAttributeFilter() 
implementation of the underlying layer)

Even

> 
> Tyler_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From tyler.mitchell at actian.com  Fri May 18 11:33:50 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Fri May 18 11:34:05 2012
Subject: [gdal-dev] VRT with attribute filter?
In-Reply-To: <201205181210.11333.even.rouault@mines-paris.org>
References: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
	<201205181210.11333.even.rouault@mines-paris.org>
Message-ID: <F595A811-4178-44E4-B9F4-D79CCDB5AC51@actian.com>

Thanks I'll check that out.  

I'm mainly using the VRT in QGIS against Ingres database.  QGIS isn't doing filtering properly for me, (even with passthrough=true) so I'm trying to discern whether it's a deficiency of our Ingres driver or if the functionality just doesn't exist yet elsewhere :)

On 2012-05-18, at 3:10 AM, Even Rouault wrote:

> Le vendredi 18 mai 2012 07:12:03, Tyler Mitchell a ?crit :
>> I've done my best to comb through the code but can't see how to use an
>> attribute filter in a (OGR) VRT definition.
> 
> Tyler,
> 
> You have 2 possibilities :
> 
> 1) Probalby not what you want for your use case, but you can set a OGR VRT and 
> set externally an attribute filter on the returned layer. The attribute filter 
> should be applied directly on the underlying source layer if you set 
> <attrFilterPassThrough>TRUE</attrFilterPassThrough> in the <OGRVRTLayer> (or 
> if no explicit <Field> is present, or -in trunk- automatically in compatible 
> cases)
> 
> 2) Or you use a <SrcSQL> definition with a WHERE clause in it. In case the 
> underlying datasource as a specific implementation of ExecuteSQL() , that 
> should be efficient (and even if it doesn't the generic OGR SQL engine should 
> extract the WHERE clause and pass it to the SetAttributeFilter() 
> implementation of the underlying layer)
> 
> Even
> 
>> 
>> Tyler_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell@actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120518/a2c3f3b1/attachment.html
From oyvind.idland at gmail.com  Fri May 18 11:41:25 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Fri May 18 11:41:59 2012
Subject: [gdal-dev] Re: Reprojecting a tiled dataset
In-Reply-To: <CAEVk4t2bsnH=0+zP=ZYY89HA3rSSo7307pigCX-50Osp0ROhVg@mail.gmail.com>
References: <CAEVk4t2bsnH=0+zP=ZYY89HA3rSSo7307pigCX-50Osp0ROhVg@mail.gmail.com>
Message-ID: <CAEVk4t1MxwEcdfv-axqF3j5Segyb98HPWTnnhgF4r-G6Y4chAg@mail.gmail.com>

In case anybody else is trying this, my plan worked out well.

I found that doing it via a Python script was the best way, as I added some
code to
reproject the source extent to destination, calculating the new tiles etc.

-- Oyvind

On Fri, May 18, 2012 at 10:34 AM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> Hello,
>
> i have a set of GeoTIFF tiles, that I want to reproject into a new set of
> tiles.
>
> So far I have the following strategy:
> 1) create a VRT from the existing tiles
> 2) make a script that creates new tiles, one by one using gdalwarp.
>
>
> Is there a better way of doing this ?
>
>
> - Oyvind
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120518/cf947f25/attachment.html
From even.rouault at mines-paris.org  Fri May 18 11:44:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 18 11:46:05 2012
Subject: [gdal-dev] VRT with attribute filter?
In-Reply-To: <F595A811-4178-44E4-B9F4-D79CCDB5AC51@actian.com>
References: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
	<201205181210.11333.even.rouault@mines-paris.org>
	<F595A811-4178-44E4-B9F4-D79CCDB5AC51@actian.com>
Message-ID: <201205181744.32952.even.rouault@mines-paris.org>

Le vendredi 18 mai 2012 17:33:50, Tyler Mitchell a ?crit :
> Thanks I'll check that out.
> 
> I'm mainly using the VRT in QGIS against Ingres database.  QGIS isn't doing
> filtering properly for me, (even with passthrough=true) so I'm trying to
> discern whether it's a deficiency of our Ingres driver or if the
> functionality just doesn't exist yet elsewhere :)

Hum, while grepping in QGIS code, I see it doesn't use the 
OGR_L_SetAttributeFilter() API, so it must do the filtering on its side.

If you want to know if it is a QGIS or OGR issue, you can try ogrinfo your.vrt 
-where "xxxx"
From cmutel at gmail.com  Fri May 18 11:54:02 2012
From: cmutel at gmail.com (Christopher Mutel)
Date: Fri May 18 11:55:09 2012
Subject: [gdal-dev] Help with GDAL and HDF4 MODIS data
In-Reply-To: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
References: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
Message-ID: <CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>

Dear all-

I am having trouble reading a HDF4 dataset using GDAL 1.9.0. The
datasets I am want to process come from the MODIS evapotranspiration
project (http://www.ntsg.umt.edu/project/mod16), and can be understood
correctly in e.g. HDFlook
(http://www-loa.univ-lille1.fr/Hdflook/hdflook_gb.html). They look
something like this:

http://imgur.com/nw7ts

The problem is that when GDAL opens a subdataset (any of the 4
possible ones), the resulting image data

http://imgur.com/fILW2

This effect happens using gdal_translate and the python bindings to
write the raw array data directly to a file. Basically, the lower
third of the image is fine; the next half of the image is masked
(given the nodata value); and the upper fifth, more peculiarly, has a
another section of the image repeated several times.

I am using GDAL 1.9.0 installed through MacPorts. The supported
formats are listed below. The gdalinfo output is also below.

My questions are:

1. Has anyone else experienced something like this? Is this fixable by
overriding some metadata in the gdal commands, or doing some other
transform?

2. Could this be related to the fact that I have NetCDF support enabled?
See e.g.
http://trac.osgeo.org/gdal/wiki/NetCDF
http://trac.osgeo.org/gdal/ticket/3957

Any help would be greatly appreciated,
Yours,
Chris

===============
Supported Formats:
===============
?GRASS (ro): GRASS Database Rasters (5.7+)
?VRT (rw+v): Virtual Raster
?GTiff (rw+v): GeoTIFF
?NITF (rw+v): National Imagery Transmission Format
?RPFTOC (rov): Raster Product Format TOC format
?ECRGTOC (rov): ECRG TOC format
?HFA (rw+v): Erdas Imagine Images (.img)
?SAR_CEOS (rov): CEOS SAR Image
?CEOS (rov): CEOS Image
?JAXAPALSAR (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
?GFF (rov): Ground-based SAR Applications Testbed File Format (.gff)
?ELAS (rw+v): ELAS
?AIG (rov): Arc/Info Binary Grid
?AAIGrid (rwv): Arc/Info ASCII Grid
?GRASSASCIIGrid (rov): GRASS ASCII Grid
?SDTS (rov): SDTS Raster
?DTED (rwv): DTED Elevation Raster
?PNG (rwv): Portable Network Graphics
?JPEG (rwv): JPEG JFIF
?MEM (rw+): In Memory Raster
?JDEM (rov): Japanese DEM (.mem)
?GIF (rwv): Graphics Interchange Format (.gif)
?BIGGIF (rov): Graphics Interchange Format (.gif)
?ESAT (ro): Envisat Image Format
?XPM (rwv): X11 PixMap Format
?BMP (rw+v): MS Windows Device Independent Bitmap
?DIMAP (rov): SPOT DIMAP
?AirSAR (ro): AirSAR Polarimetric Image
?RS2 (ro): RadarSat 2 XML Product
?PCIDSK (rw+v): PCIDSK Database File
?ILWIS (rw+v): ILWIS Raster Map
?SGI (rw+): SGI Image File Format 1.0
?SRTMHGT (rwv): SRTMHGT File Format
?Leveller (rw+): Leveller heightfield
?Terragen (rw+): Terragen heightfield
?GMT (rw): GMT NetCDF Grid Format
?netCDF (rw+): Network Common Data Format
?HDF4 (ro): Hierarchical Data Format Release 4
?HDF4Image (rw+): HDF4 Dataset
?ISIS3 (rov): USGS Astrogeology ISIS cube (Version 3)
?ISIS2 (rw+v): USGS Astrogeology ISIS cube (Version 2)
?PDS (rov): NASA Planetary Data System
?TIL (rov): EarthWatch .TIL
?ERS (rw+v): ERMapper .ers Labelled
?L1B (rov): NOAA Polar Orbiter Level 1b Data Set
?FIT (rwv): FIT Image
?RMF (rw+v): Raster Matrix Format
?WCS (rov): OGC Web Coverage Service
?WMS (rwv): OGC Web Map Service
?MSGN (ro): EUMETSAT Archive native (.nat)
?RST (rw+v): Idrisi Raster A.1
?INGR (rw+v): Intergraph Raster
?GSAG (rwv): Golden Software ASCII Grid (.grd)
?GSBG (rw+v): Golden Software Binary Grid (.grd)
?GS7BG (rov): Golden Software 7 Binary Grid (.grd)
?COSAR (ro): COSAR Annotated Binary Matrix (TerraSAR-X)
?TSX (rov): TerraSAR-X Product
?COASP (ro): DRDC COASP SAR Processor Raster
?R (rwv): R Object Data Store
?PNM (rw+v): Portable Pixmap Format (netpbm)
?DOQ1 (rov): USGS DOQ (Old Style)
?DOQ2 (rov): USGS DOQ (New Style)
?ENVI (rw+v): ENVI .hdr Labelled
?EHdr (rw+v): ESRI .hdr Labelled
?GenBin (rov): Generic Binary (.hdr Labelled)
?PAux (rw+): PCI .aux Labelled
?MFF (rw+): Vexcel MFF Raster
?MFF2 (rw+): Vexcel MFF2 (HKV) Raster
?FujiBAS (ro): Fuji BAS Scanner Image
?GSC (rov): GSC Geogrid
?FAST (rov): EOSAT FAST Format
?BT (rw+v): VTP .bt (Binary Terrain) 1.3 Format
?LAN (rw+v): Erdas .LAN/.GIS
?CPG (ro): Convair PolGASP
?IDA (rw+): Image Data and Analysis
?NDF (rov): NLAPS Data Format
?EIR (rov): Erdas Imagine Raw
?DIPEx (rov): DIPEx
?LCP (rov): FARSITE v.4 Landscape File (.lcp)
?GTX (rw+v): NOAA Vertical Datum .GTX
?LOSLAS (rov): NADCON .los/.las Datum Grid Shift
?NTv2 (rw+v): NTv2 Datum Grid Shift
?ACE2 (rov): ACE2
?SNODAS (rov): Snow Data Assimilation System
?RIK (ro): Swedish Grid RIK (.rik)
?USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
?GXF (ro): GeoSoft Grid Exchange Format
?HTTP (ro): HTTP Fetching Wrapper
?BAG (ro): Bathymetry Attributed Grid
?HDF5 (ro): Hierarchical Data Format Release 5
?HDF5Image (ro): HDF5 Dataset
?NWT_GRD (rov): Northwood Numeric Grid Format .grd/.tab
?NWT_GRC (rov): Northwood Classified Grid Format .grc/.tab
?ADRG (rw+v): ARC Digitized Raster Graphics
?SRP (rov): Standard Raster Product (ASRP/USRP)
?BLX (rw): Magellan topo (.blx)
?PostGISRaster (ro): PostGIS Raster driver
?SAGA (rw+v): SAGA GIS Binary Grid (.sdat)
?KMLSUPEROVERLAY (rwv): Kml Super Overlay
?XYZ (rwv): ASCII Gridded XYZ
?HF2 (rwv): HF2/HFZ heightfield raster
?OZI (rov): OziExplorer Image File
?CTG (rov): USGS LULC Composite Theme Grid
?E00GRID (rov): Arc/Info Export E00 GRID
?ZMap (rwv): ZMap Plus Grid
?NGSGEOID (rov): NOAA NGS Geoid Height Grids

=======
gdalinfo
=======

Driver: HDF4Image/HDF4 Dataset
Files: none associated
Size is 1200, 1200
Coordinate System is:
PROJCS["unnamed",
? ?GEOGCS["Unknown datum based upon the custom spheroid",
? ? ? ?DATUM["Not specified (based on custom spheroid)",
? ? ? ? ? ?SPHEROID["Custom spheroid",6371007.181,0]],
? ? ? ?PRIMEM["Greenwich",0],
? ? ? ?UNIT["degree",0.0174532925199433]],
? ?PROJECTION["Sinusoidal"],
? ?PARAMETER["longitude_of_center",0],
? ?PARAMETER["false_easting",0],
? ?PARAMETER["false_northing",0],
? ?UNIT["Meter",1]]
Origin = (-6671703.117999999783933,-3335851.558999999891967)
Pixel Size = (926.625433055833014,-926.625433055833355)
Metadata:
?_FillValue=32767
?add_offset=0
?add_offset_err=0
?Affi.=NTSG, School of Forestry, U. of MT
?ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
?ALGORITHMPACKAGEMATURITYCODE=Normal
?ALGORITHMPACKAGENAME=MODPR_15A2
?ALGORITHMPACKAGEVERSION=5
?ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
?ASSOCIATEDPLATFORMSHORTNAME=Terra
?ASSOCIATEDSENSORSHORTNAME=MODIS
?AUTOMATICQUALITYFLAG=Passed
?AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
performed in the PGE
?calibrated_nt=22
?CHARACTERISTICBINANGULARSIZE=30.0
?CHARACTERISTICBINSIZE=926.625433055556
?DATACOLUMNS=1200
?DATAROWS=1200
?DAYNIGHTFLAG=Day
?DESCRREVISION=5.0
?EASTBOUNDINGCOORDINATE=-57.7254044077251
?Email=qiaozhen@ntsg.umt.edu
?EXCLUSIONGRINGFLAG=N
?GEOANYABNORMAL=False
?GEOESTMAXRMSERROR=50.0
?GLOBALGRIDCOLUMNS=43200
?GLOBALGRIDROWS=21600
?GRANULEBEGINNINGDATETIME=2006-12-11T09:38:17.000Z
?GRANULEDAYNIGHTFLAG=Day
?GRANULEENDINGDATETIME=2006-12-11T09:38:17.000Z
?GRINGPOINTLATITUDE=-39.9999999964079, -29.8506269556485,
-29.8879227550404, -40.0438107454138
?GRINGPOINTLONGITUDE=-78.3244373487826, -69.2295648918179,
-57.4987926415755, -65.0468184138665
?GRINGPOINTSEQUENCENO=1, 2, 3, 4
?HDF-EOS file name=MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
?HDFEOSVersion=HDFEOS_V2.16
?HORIZONTALTILENUMBER=12
?INPUTPOINTER=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
MOD15A1.A2001001.h12v12.005.2006345093817.hdf, MOD15A2_ANC_RI4.hdf
?LOCALGRANULEID=MOD15A2.A2001001.h12v12.005.2006351105708.hdf
?LOCALVERSIONID=5.0.3
?long_name=MOD16A2 -- MODIS Gridded 1KM monthly Composite potential
Evapotranspiration (ET)
?LONGNAME=MODIS/Terra Leaf Area Index/FPAR 8-Day L4 Global 1km SIN Grid
?Maker=Qiaozhen Mu
?MAXIMUMOBSERVATIONS=1
?MOD16 version=UM_collection5
?NADIRDATARESOLUTION=1km
?NDAYS_COMPOSITED=8
?NORTHBOUNDINGCOORDINATE=-29.9999999973059
?NUMBEROFGRANULES=1
?PARAMETERNAME=MOD15A2
?PGEVERSION=5.0.5
?PROCESSINGCENTER=MODAPS
?PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
?PRODUCTIONDATETIME=2006-12-17T10:57:08.000Z
?QAPERCENTCLOUDCOVER=5
?QAPERCENTEMPIRICALMODEL=2
?QAPERCENTGOODFPAR=98
?QAPERCENTGOODLAI=98
?QAPERCENTGOODQUALITY=98
?QAPERCENTINTERPOLATEDDATA=0
?QAPERCENTMAINMETHOD=98
?QAPERCENTMISSINGDATA=17
?QAPERCENTOTHERQUALITY=100
?QAPERCENTOUTOFBOUNDSDATA=17
?RANGEBEGINNINGDATE=2001-01-01
?RANGEBEGINNINGTIME=00:00:00
?RANGEENDINGDATE=2001-01-08
?RANGEENDINGTIME=23:59:59
?REPROCESSINGACTUAL=reprocessed
?REPROCESSINGPLANNED=further update is anticipated
?scale_factor=0.1
?scale_factor_err=0
?SCIENCEQUALITYFLAG=Not Investigated
?SCIENCEQUALITYFLAGEXPLANATION=See
http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=terra
the product Science Quality status.
?SHORTNAME=MOD15A2
?SOUTHBOUNDINGCOORDINATE=-39.9999999964079
?SPSOPARAMETERS=5367, 2680
?SYSTEMFILENAME=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
MOD15A1.A2001001.h12v12.005.2006345093817.hdf
?TileID=51012012
?units=kg/m^2/mon
?valid_range=-32767, 32700
?VERSIONID=5
?VERTICALTILENUMBER=12
?Webpage=http://www.ntsg.umt.edu
?WESTBOUNDINGCOORDINATE=-78.3244373487825
Corner Coordinates:
Upper Left ?(-6671703.118,-3335851.559) ( 69d16'55.32"W, 30d 0' 0.00"S)
Lower Left ?(-6671703.118,-4447802.079) ( 78d19'27.97"W, 40d 0' 0.00"S)
Upper Right (-5559752.598,-3335851.559) ( 57d44' 6.10"W, 30d 0' 0.00"S)
Lower Right (-5559752.598,-4447802.079) ( 65d16'13.31"W, 40d 0' 0.00"S)
Center ? ? ?(-6115727.858,-3891826.819) ( 67d 8'33.37"W, 35d 0' 0.00"S)
Band 1 Block=1200x833 Type=Int16, ColorInterp=Gray
?Description = MOD16A2 -- MODIS Gridded 1KM monthly Composite
potential Evapotranspiration (ET)
?NoData Value=32767
?Unit Type: kg/m^2/mon
?Offset: 0, ? Scale:0.1

--
############################
Chris Mutel
?kologisches Systemdesign - Ecological Systems Design
Institut f.Umweltingenieurwissenschaften - Institute for Environmental
Engineering
ETH Z?rich - HIF C 44 - Schafmattstr. 6
8093 Z?rich

Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
############################
From tyler.mitchell at actian.com  Fri May 18 12:01:23 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Fri May 18 12:01:28 2012
Subject: [gdal-dev] VRT with attribute filter?
In-Reply-To: <201205181744.32952.even.rouault@mines-paris.org>
References: <A29BDC1B-1908-404D-88A4-70DE2E781379@actian.com>
	<201205181210.11333.even.rouault@mines-paris.org>
	<F595A811-4178-44E4-B9F4-D79CCDB5AC51@actian.com>
	<201205181744.32952.even.rouault@mines-paris.org>
Message-ID: <6A491357-876F-42BA-9FF6-305AECB78BDF@actian.com>

> If you want to know if it is a QGIS or OGR issue, you can try ogrinfo your.vrt 
> -where "xxxx"

Great tip, thanks Even.  Confirmed that OGR does filter properly using ogrinfo, so that's encouraging :)
From cmutel at gmail.com  Fri May 18 12:57:10 2012
From: cmutel at gmail.com (Christopher Mutel)
Date: Fri May 18 12:58:32 2012
Subject: [gdal-dev] Help with GDAL and HDF4 MODIS data
In-Reply-To: <CA+YzLBeKi+vOLzim-G7fyoPqoAh9KfKbZxp7TcwFfSkvo-XCzQ@mail.gmail.com>
References: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
	<CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>
	<CA+YzLBeKi+vOLzim-G7fyoPqoAh9KfKbZxp7TcwFfSkvo-XCzQ@mail.gmail.com>
Message-ID: <CAOc=QnKnSCyitxQgkB2vYf+ZMp7SW3KeJ52JOA8nNHiwzc+LaA@mail.gmail.com>

Frank-

Here is the dataset in the given images:

ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/MOD16A2.A2000M01.h12v12.105.2010357170459.hdf

However, I see the same behaviour with all the files in the directory:

ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/

Yours, Chris

On Fri, May 18, 2012 at 6:34 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Christopher,
>
> Can you provide a pointer to one of the hdf4 images giving problems?
>
> I don't see how this could relate to disabling netcdf support.
>
> Best regards,
>
> On Fri, May 18, 2012 at 8:54 AM, Christopher Mutel <cmutel@gmail.com> wrote:
>> Dear all-
>>
>> I am having trouble reading a HDF4 dataset using GDAL 1.9.0. The
>> datasets I am want to process come from the MODIS evapotranspiration
>> project (http://www.ntsg.umt.edu/project/mod16), and can be understood
>> correctly in e.g. HDFlook
>> (http://www-loa.univ-lille1.fr/Hdflook/hdflook_gb.html). They look
>> something like this:
>>
>> http://imgur.com/nw7ts
>>
>> The problem is that when GDAL opens a subdataset (any of the 4
>> possible ones), the resulting image data
>>
>> http://imgur.com/fILW2
>>
>> This effect happens using gdal_translate and the python bindings to
>> write the raw array data directly to a file. Basically, the lower
>> third of the image is fine; the next half of the image is masked
>> (given the nodata value); and the upper fifth, more peculiarly, has a
>> another section of the image repeated several times.
>>
>> I am using GDAL 1.9.0 installed through MacPorts. The supported
>> formats are listed below. The gdalinfo output is also below.
>>
>> My questions are:
>>
>> 1. Has anyone else experienced something like this? Is this fixable by
>> overriding some metadata in the gdal commands, or doing some other
>> transform?
>>
>> 2. Could this be related to the fact that I have NetCDF support enabled?
>> See e.g.
>> http://trac.osgeo.org/gdal/wiki/NetCDF
>> http://trac.osgeo.org/gdal/ticket/3957
>>
>> Any help would be greatly appreciated,
>> Yours,
>> Chris
>>
>> ===============
>> Supported Formats:
>> ===============
>> ?GRASS (ro): GRASS Database Rasters (5.7+)
>> ?VRT (rw+v): Virtual Raster
>> ?GTiff (rw+v): GeoTIFF
>> ?NITF (rw+v): National Imagery Transmission Format
>> ?RPFTOC (rov): Raster Product Format TOC format
>> ?ECRGTOC (rov): ECRG TOC format
>> ?HFA (rw+v): Erdas Imagine Images (.img)
>> ?SAR_CEOS (rov): CEOS SAR Image
>> ?CEOS (rov): CEOS Image
>> ?JAXAPALSAR (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
>> ?GFF (rov): Ground-based SAR Applications Testbed File Format (.gff)
>> ?ELAS (rw+v): ELAS
>> ?AIG (rov): Arc/Info Binary Grid
>> ?AAIGrid (rwv): Arc/Info ASCII Grid
>> ?GRASSASCIIGrid (rov): GRASS ASCII Grid
>> ?SDTS (rov): SDTS Raster
>> ?DTED (rwv): DTED Elevation Raster
>> ?PNG (rwv): Portable Network Graphics
>> ?JPEG (rwv): JPEG JFIF
>> ?MEM (rw+): In Memory Raster
>> ?JDEM (rov): Japanese DEM (.mem)
>> ?GIF (rwv): Graphics Interchange Format (.gif)
>> ?BIGGIF (rov): Graphics Interchange Format (.gif)
>> ?ESAT (ro): Envisat Image Format
>> ?XPM (rwv): X11 PixMap Format
>> ?BMP (rw+v): MS Windows Device Independent Bitmap
>> ?DIMAP (rov): SPOT DIMAP
>> ?AirSAR (ro): AirSAR Polarimetric Image
>> ?RS2 (ro): RadarSat 2 XML Product
>> ?PCIDSK (rw+v): PCIDSK Database File
>> ?ILWIS (rw+v): ILWIS Raster Map
>> ?SGI (rw+): SGI Image File Format 1.0
>> ?SRTMHGT (rwv): SRTMHGT File Format
>> ?Leveller (rw+): Leveller heightfield
>> ?Terragen (rw+): Terragen heightfield
>> ?GMT (rw): GMT NetCDF Grid Format
>> ?netCDF (rw+): Network Common Data Format
>> ?HDF4 (ro): Hierarchical Data Format Release 4
>> ?HDF4Image (rw+): HDF4 Dataset
>> ?ISIS3 (rov): USGS Astrogeology ISIS cube (Version 3)
>> ?ISIS2 (rw+v): USGS Astrogeology ISIS cube (Version 2)
>> ?PDS (rov): NASA Planetary Data System
>> ?TIL (rov): EarthWatch .TIL
>> ?ERS (rw+v): ERMapper .ers Labelled
>> ?L1B (rov): NOAA Polar Orbiter Level 1b Data Set
>> ?FIT (rwv): FIT Image
>> ?RMF (rw+v): Raster Matrix Format
>> ?WCS (rov): OGC Web Coverage Service
>> ?WMS (rwv): OGC Web Map Service
>> ?MSGN (ro): EUMETSAT Archive native (.nat)
>> ?RST (rw+v): Idrisi Raster A.1
>> ?INGR (rw+v): Intergraph Raster
>> ?GSAG (rwv): Golden Software ASCII Grid (.grd)
>> ?GSBG (rw+v): Golden Software Binary Grid (.grd)
>> ?GS7BG (rov): Golden Software 7 Binary Grid (.grd)
>> ?COSAR (ro): COSAR Annotated Binary Matrix (TerraSAR-X)
>> ?TSX (rov): TerraSAR-X Product
>> ?COASP (ro): DRDC COASP SAR Processor Raster
>> ?R (rwv): R Object Data Store
>> ?PNM (rw+v): Portable Pixmap Format (netpbm)
>> ?DOQ1 (rov): USGS DOQ (Old Style)
>> ?DOQ2 (rov): USGS DOQ (New Style)
>> ?ENVI (rw+v): ENVI .hdr Labelled
>> ?EHdr (rw+v): ESRI .hdr Labelled
>> ?GenBin (rov): Generic Binary (.hdr Labelled)
>> ?PAux (rw+): PCI .aux Labelled
>> ?MFF (rw+): Vexcel MFF Raster
>> ?MFF2 (rw+): Vexcel MFF2 (HKV) Raster
>> ?FujiBAS (ro): Fuji BAS Scanner Image
>> ?GSC (rov): GSC Geogrid
>> ?FAST (rov): EOSAT FAST Format
>> ?BT (rw+v): VTP .bt (Binary Terrain) 1.3 Format
>> ?LAN (rw+v): Erdas .LAN/.GIS
>> ?CPG (ro): Convair PolGASP
>> ?IDA (rw+): Image Data and Analysis
>> ?NDF (rov): NLAPS Data Format
>> ?EIR (rov): Erdas Imagine Raw
>> ?DIPEx (rov): DIPEx
>> ?LCP (rov): FARSITE v.4 Landscape File (.lcp)
>> ?GTX (rw+v): NOAA Vertical Datum .GTX
>> ?LOSLAS (rov): NADCON .los/.las Datum Grid Shift
>> ?NTv2 (rw+v): NTv2 Datum Grid Shift
>> ?ACE2 (rov): ACE2
>> ?SNODAS (rov): Snow Data Assimilation System
>> ?RIK (ro): Swedish Grid RIK (.rik)
>> ?USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
>> ?GXF (ro): GeoSoft Grid Exchange Format
>> ?HTTP (ro): HTTP Fetching Wrapper
>> ?BAG (ro): Bathymetry Attributed Grid
>> ?HDF5 (ro): Hierarchical Data Format Release 5
>> ?HDF5Image (ro): HDF5 Dataset
>> ?NWT_GRD (rov): Northwood Numeric Grid Format .grd/.tab
>> ?NWT_GRC (rov): Northwood Classified Grid Format .grc/.tab
>> ?ADRG (rw+v): ARC Digitized Raster Graphics
>> ?SRP (rov): Standard Raster Product (ASRP/USRP)
>> ?BLX (rw): Magellan topo (.blx)
>> ?PostGISRaster (ro): PostGIS Raster driver
>> ?SAGA (rw+v): SAGA GIS Binary Grid (.sdat)
>> ?KMLSUPEROVERLAY (rwv): Kml Super Overlay
>> ?XYZ (rwv): ASCII Gridded XYZ
>> ?HF2 (rwv): HF2/HFZ heightfield raster
>> ?OZI (rov): OziExplorer Image File
>> ?CTG (rov): USGS LULC Composite Theme Grid
>> ?E00GRID (rov): Arc/Info Export E00 GRID
>> ?ZMap (rwv): ZMap Plus Grid
>> ?NGSGEOID (rov): NOAA NGS Geoid Height Grids
>>
>> =======
>> gdalinfo
>> =======
>>
>> Driver: HDF4Image/HDF4 Dataset
>> Files: none associated
>> Size is 1200, 1200
>> Coordinate System is:
>> PROJCS["unnamed",
>> ? ?GEOGCS["Unknown datum based upon the custom spheroid",
>> ? ? ? ?DATUM["Not specified (based on custom spheroid)",
>> ? ? ? ? ? ?SPHEROID["Custom spheroid",6371007.181,0]],
>> ? ? ? ?PRIMEM["Greenwich",0],
>> ? ? ? ?UNIT["degree",0.0174532925199433]],
>> ? ?PROJECTION["Sinusoidal"],
>> ? ?PARAMETER["longitude_of_center",0],
>> ? ?PARAMETER["false_easting",0],
>> ? ?PARAMETER["false_northing",0],
>> ? ?UNIT["Meter",1]]
>> Origin = (-6671703.117999999783933,-3335851.558999999891967)
>> Pixel Size = (926.625433055833014,-926.625433055833355)
>> Metadata:
>> ?_FillValue=32767
>> ?add_offset=0
>> ?add_offset_err=0
>> ?Affi.=NTSG, School of Forestry, U. of MT
>> ?ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
>> ?ALGORITHMPACKAGEMATURITYCODE=Normal
>> ?ALGORITHMPACKAGENAME=MODPR_15A2
>> ?ALGORITHMPACKAGEVERSION=5
>> ?ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
>> ?ASSOCIATEDPLATFORMSHORTNAME=Terra
>> ?ASSOCIATEDSENSORSHORTNAME=MODIS
>> ?AUTOMATICQUALITYFLAG=Passed
>> ?AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
>> performed in the PGE
>> ?calibrated_nt=22
>> ?CHARACTERISTICBINANGULARSIZE=30.0
>> ?CHARACTERISTICBINSIZE=926.625433055556
>> ?DATACOLUMNS=1200
>> ?DATAROWS=1200
>> ?DAYNIGHTFLAG=Day
>> ?DESCRREVISION=5.0
>> ?EASTBOUNDINGCOORDINATE=-57.7254044077251
>> ?Email=qiaozhen@ntsg.umt.edu
>> ?EXCLUSIONGRINGFLAG=N
>> ?GEOANYABNORMAL=False
>> ?GEOESTMAXRMSERROR=50.0
>> ?GLOBALGRIDCOLUMNS=43200
>> ?GLOBALGRIDROWS=21600
>> ?GRANULEBEGINNINGDATETIME=2006-12-11T09:38:17.000Z
>> ?GRANULEDAYNIGHTFLAG=Day
>> ?GRANULEENDINGDATETIME=2006-12-11T09:38:17.000Z
>> ?GRINGPOINTLATITUDE=-39.9999999964079, -29.8506269556485,
>> -29.8879227550404, -40.0438107454138
>> ?GRINGPOINTLONGITUDE=-78.3244373487826, -69.2295648918179,
>> -57.4987926415755, -65.0468184138665
>> ?GRINGPOINTSEQUENCENO=1, 2, 3, 4
>> ?HDF-EOS file name=MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
>> ?HDFEOSVersion=HDFEOS_V2.16
>> ?HORIZONTALTILENUMBER=12
>> ?INPUTPOINTER=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf, MOD15A2_ANC_RI4.hdf
>> ?LOCALGRANULEID=MOD15A2.A2001001.h12v12.005.2006351105708.hdf
>> ?LOCALVERSIONID=5.0.3
>> ?long_name=MOD16A2 -- MODIS Gridded 1KM monthly Composite potential
>> Evapotranspiration (ET)
>> ?LONGNAME=MODIS/Terra Leaf Area Index/FPAR 8-Day L4 Global 1km SIN Grid
>> ?Maker=Qiaozhen Mu
>> ?MAXIMUMOBSERVATIONS=1
>> ?MOD16 version=UM_collection5
>> ?NADIRDATARESOLUTION=1km
>> ?NDAYS_COMPOSITED=8
>> ?NORTHBOUNDINGCOORDINATE=-29.9999999973059
>> ?NUMBEROFGRANULES=1
>> ?PARAMETERNAME=MOD15A2
>> ?PGEVERSION=5.0.5
>> ?PROCESSINGCENTER=MODAPS
>> ?PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
>> ?PRODUCTIONDATETIME=2006-12-17T10:57:08.000Z
>> ?QAPERCENTCLOUDCOVER=5
>> ?QAPERCENTEMPIRICALMODEL=2
>> ?QAPERCENTGOODFPAR=98
>> ?QAPERCENTGOODLAI=98
>> ?QAPERCENTGOODQUALITY=98
>> ?QAPERCENTINTERPOLATEDDATA=0
>> ?QAPERCENTMAINMETHOD=98
>> ?QAPERCENTMISSINGDATA=17
>> ?QAPERCENTOTHERQUALITY=100
>> ?QAPERCENTOUTOFBOUNDSDATA=17
>> ?RANGEBEGINNINGDATE=2001-01-01
>> ?RANGEBEGINNINGTIME=00:00:00
>> ?RANGEENDINGDATE=2001-01-08
>> ?RANGEENDINGTIME=23:59:59
>> ?REPROCESSINGACTUAL=reprocessed
>> ?REPROCESSINGPLANNED=further update is anticipated
>> ?scale_factor=0.1
>> ?scale_factor_err=0
>> ?SCIENCEQUALITYFLAG=Not Investigated
>> ?SCIENCEQUALITYFLAGEXPLANATION=See
>> http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=terra
>> the product Science Quality status.
>> ?SHORTNAME=MOD15A2
>> ?SOUTHBOUNDINGCOORDINATE=-39.9999999964079
>> ?SPSOPARAMETERS=5367, 2680
>> ?SYSTEMFILENAME=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf
>> ?TileID=51012012
>> ?units=kg/m^2/mon
>> ?valid_range=-32767, 32700
>> ?VERSIONID=5
>> ?VERTICALTILENUMBER=12
>> ?Webpage=http://www.ntsg.umt.edu
>> ?WESTBOUNDINGCOORDINATE=-78.3244373487825
>> Corner Coordinates:
>> Upper Left ?(-6671703.118,-3335851.559) ( 69d16'55.32"W, 30d 0' 0.00"S)
>> Lower Left ?(-6671703.118,-4447802.079) ( 78d19'27.97"W, 40d 0' 0.00"S)
>> Upper Right (-5559752.598,-3335851.559) ( 57d44' 6.10"W, 30d 0' 0.00"S)
>> Lower Right (-5559752.598,-4447802.079) ( 65d16'13.31"W, 40d 0' 0.00"S)
>> Center ? ? ?(-6115727.858,-3891826.819) ( 67d 8'33.37"W, 35d 0' 0.00"S)
>> Band 1 Block=1200x833 Type=Int16, ColorInterp=Gray
>> ?Description = MOD16A2 -- MODIS Gridded 1KM monthly Composite
>> potential Evapotranspiration (ET)
>> ?NoData Value=32767
>> ?Unit Type: kg/m^2/mon
>> ?Offset: 0, ? Scale:0.1
>>
>> --
>> ############################
>> Chris Mutel
>> ?kologisches Systemdesign - Ecological Systems Design
>> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
>> Engineering
>> ETH Z?rich - HIF C 44 - Schafmattstr. 6
>> 8093 Z?rich
>>
>> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
>> ############################
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
############################
Chris Mutel
?kologisches Systemdesign - Ecological Systems Design
Institut f.Umweltingenieurwissenschaften - Institute for Environmental
Engineering
ETH Z?rich - HIF C 44 - Schafmattstr. 6
8093 Z?rich

Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
############################
From etourigny.dev at gmail.com  Fri May 18 13:07:36 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri May 18 13:07:57 2012
Subject: [gdal-dev] Help with GDAL and HDF4 MODIS data
In-Reply-To: <CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>
References: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
	<CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>
Message-ID: <CA+TxYvNK-fn05nQ0OcjjxtLwUtLjtDQaXt32vZ9BzTkB_GPCjw@mail.gmail.com>

I can confirm the bug on linux 64bit.  Please file a bug report and
attach a small dataset (<1MB) or whith the link you sent in your
second mail.

I suspect that the gdal hdf4 driver does not handle something spedific
in this hdf-eos dataset.

On Fri, May 18, 2012 at 12:54 PM, Christopher Mutel <cmutel@gmail.com> wrote:
> Dear all-
>
> I am having trouble reading a HDF4 dataset using GDAL 1.9.0. The
> datasets I am want to process come from the MODIS evapotranspiration
> project (http://www.ntsg.umt.edu/project/mod16), and can be understood
> correctly in e.g. HDFlook
> (http://www-loa.univ-lille1.fr/Hdflook/hdflook_gb.html). They look
> something like this:
>
> http://imgur.com/nw7ts
>
> The problem is that when GDAL opens a subdataset (any of the 4
> possible ones), the resulting image data
>
> http://imgur.com/fILW2
>
> This effect happens using gdal_translate and the python bindings to
> write the raw array data directly to a file. Basically, the lower
> third of the image is fine; the next half of the image is masked
> (given the nodata value); and the upper fifth, more peculiarly, has a
> another section of the image repeated several times.
>
> I am using GDAL 1.9.0 installed through MacPorts. The supported
> formats are listed below. The gdalinfo output is also below.
>
> My questions are:
>
> 1. Has anyone else experienced something like this? Is this fixable by
> overriding some metadata in the gdal commands, or doing some other
> transform?
>
> 2. Could this be related to the fact that I have NetCDF support enabled?
> See e.g.
> http://trac.osgeo.org/gdal/wiki/NetCDF
> http://trac.osgeo.org/gdal/ticket/3957

not at all, the hdf4 driver is opening the file and the netcdf does
not interfere:

Driver: HDF4Image/HDF4 Dataset

That bug report is about building gdal with hdf4 and netcdf (no one
else has confirmed that problem), not about using hdf4 and netcdf
drivers.

>
> Any help would be greatly appreciated,
> Yours,
> Chris
>
> ===============
> Supported Formats:
> ===============
> ?GRASS (ro): GRASS Database Rasters (5.7+)
> ?VRT (rw+v): Virtual Raster
> ?GTiff (rw+v): GeoTIFF
> ?NITF (rw+v): National Imagery Transmission Format
> ?RPFTOC (rov): Raster Product Format TOC format
> ?ECRGTOC (rov): ECRG TOC format
> ?HFA (rw+v): Erdas Imagine Images (.img)
> ?SAR_CEOS (rov): CEOS SAR Image
> ?CEOS (rov): CEOS Image
> ?JAXAPALSAR (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
> ?GFF (rov): Ground-based SAR Applications Testbed File Format (.gff)
> ?ELAS (rw+v): ELAS
> ?AIG (rov): Arc/Info Binary Grid
> ?AAIGrid (rwv): Arc/Info ASCII Grid
> ?GRASSASCIIGrid (rov): GRASS ASCII Grid
> ?SDTS (rov): SDTS Raster
> ?DTED (rwv): DTED Elevation Raster
> ?PNG (rwv): Portable Network Graphics
> ?JPEG (rwv): JPEG JFIF
> ?MEM (rw+): In Memory Raster
> ?JDEM (rov): Japanese DEM (.mem)
> ?GIF (rwv): Graphics Interchange Format (.gif)
> ?BIGGIF (rov): Graphics Interchange Format (.gif)
> ?ESAT (ro): Envisat Image Format
> ?XPM (rwv): X11 PixMap Format
> ?BMP (rw+v): MS Windows Device Independent Bitmap
> ?DIMAP (rov): SPOT DIMAP
> ?AirSAR (ro): AirSAR Polarimetric Image
> ?RS2 (ro): RadarSat 2 XML Product
> ?PCIDSK (rw+v): PCIDSK Database File
> ?ILWIS (rw+v): ILWIS Raster Map
> ?SGI (rw+): SGI Image File Format 1.0
> ?SRTMHGT (rwv): SRTMHGT File Format
> ?Leveller (rw+): Leveller heightfield
> ?Terragen (rw+): Terragen heightfield
> ?GMT (rw): GMT NetCDF Grid Format
> ?netCDF (rw+): Network Common Data Format
> ?HDF4 (ro): Hierarchical Data Format Release 4
> ?HDF4Image (rw+): HDF4 Dataset
> ?ISIS3 (rov): USGS Astrogeology ISIS cube (Version 3)
> ?ISIS2 (rw+v): USGS Astrogeology ISIS cube (Version 2)
> ?PDS (rov): NASA Planetary Data System
> ?TIL (rov): EarthWatch .TIL
> ?ERS (rw+v): ERMapper .ers Labelled
> ?L1B (rov): NOAA Polar Orbiter Level 1b Data Set
> ?FIT (rwv): FIT Image
> ?RMF (rw+v): Raster Matrix Format
> ?WCS (rov): OGC Web Coverage Service
> ?WMS (rwv): OGC Web Map Service
> ?MSGN (ro): EUMETSAT Archive native (.nat)
> ?RST (rw+v): Idrisi Raster A.1
> ?INGR (rw+v): Intergraph Raster
> ?GSAG (rwv): Golden Software ASCII Grid (.grd)
> ?GSBG (rw+v): Golden Software Binary Grid (.grd)
> ?GS7BG (rov): Golden Software 7 Binary Grid (.grd)
> ?COSAR (ro): COSAR Annotated Binary Matrix (TerraSAR-X)
> ?TSX (rov): TerraSAR-X Product
> ?COASP (ro): DRDC COASP SAR Processor Raster
> ?R (rwv): R Object Data Store
> ?PNM (rw+v): Portable Pixmap Format (netpbm)
> ?DOQ1 (rov): USGS DOQ (Old Style)
> ?DOQ2 (rov): USGS DOQ (New Style)
> ?ENVI (rw+v): ENVI .hdr Labelled
> ?EHdr (rw+v): ESRI .hdr Labelled
> ?GenBin (rov): Generic Binary (.hdr Labelled)
> ?PAux (rw+): PCI .aux Labelled
> ?MFF (rw+): Vexcel MFF Raster
> ?MFF2 (rw+): Vexcel MFF2 (HKV) Raster
> ?FujiBAS (ro): Fuji BAS Scanner Image
> ?GSC (rov): GSC Geogrid
> ?FAST (rov): EOSAT FAST Format
> ?BT (rw+v): VTP .bt (Binary Terrain) 1.3 Format
> ?LAN (rw+v): Erdas .LAN/.GIS
> ?CPG (ro): Convair PolGASP
> ?IDA (rw+): Image Data and Analysis
> ?NDF (rov): NLAPS Data Format
> ?EIR (rov): Erdas Imagine Raw
> ?DIPEx (rov): DIPEx
> ?LCP (rov): FARSITE v.4 Landscape File (.lcp)
> ?GTX (rw+v): NOAA Vertical Datum .GTX
> ?LOSLAS (rov): NADCON .los/.las Datum Grid Shift
> ?NTv2 (rw+v): NTv2 Datum Grid Shift
> ?ACE2 (rov): ACE2
> ?SNODAS (rov): Snow Data Assimilation System
> ?RIK (ro): Swedish Grid RIK (.rik)
> ?USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
> ?GXF (ro): GeoSoft Grid Exchange Format
> ?HTTP (ro): HTTP Fetching Wrapper
> ?BAG (ro): Bathymetry Attributed Grid
> ?HDF5 (ro): Hierarchical Data Format Release 5
> ?HDF5Image (ro): HDF5 Dataset
> ?NWT_GRD (rov): Northwood Numeric Grid Format .grd/.tab
> ?NWT_GRC (rov): Northwood Classified Grid Format .grc/.tab
> ?ADRG (rw+v): ARC Digitized Raster Graphics
> ?SRP (rov): Standard Raster Product (ASRP/USRP)
> ?BLX (rw): Magellan topo (.blx)
> ?PostGISRaster (ro): PostGIS Raster driver
> ?SAGA (rw+v): SAGA GIS Binary Grid (.sdat)
> ?KMLSUPEROVERLAY (rwv): Kml Super Overlay
> ?XYZ (rwv): ASCII Gridded XYZ
> ?HF2 (rwv): HF2/HFZ heightfield raster
> ?OZI (rov): OziExplorer Image File
> ?CTG (rov): USGS LULC Composite Theme Grid
> ?E00GRID (rov): Arc/Info Export E00 GRID
> ?ZMap (rwv): ZMap Plus Grid
> ?NGSGEOID (rov): NOAA NGS Geoid Height Grids
>
> =======
> gdalinfo
> =======
>
> Driver: HDF4Image/HDF4 Dataset
> Files: none associated
> Size is 1200, 1200
> Coordinate System is:
> PROJCS["unnamed",
> ? ?GEOGCS["Unknown datum based upon the custom spheroid",
> ? ? ? ?DATUM["Not specified (based on custom spheroid)",
> ? ? ? ? ? ?SPHEROID["Custom spheroid",6371007.181,0]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433]],
> ? ?PROJECTION["Sinusoidal"],
> ? ?PARAMETER["longitude_of_center",0],
> ? ?PARAMETER["false_easting",0],
> ? ?PARAMETER["false_northing",0],
> ? ?UNIT["Meter",1]]
> Origin = (-6671703.117999999783933,-3335851.558999999891967)
> Pixel Size = (926.625433055833014,-926.625433055833355)
> Metadata:
> ?_FillValue=32767
> ?add_offset=0
> ?add_offset_err=0
> ?Affi.=NTSG, School of Forestry, U. of MT
> ?ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
> ?ALGORITHMPACKAGEMATURITYCODE=Normal
> ?ALGORITHMPACKAGENAME=MODPR_15A2
> ?ALGORITHMPACKAGEVERSION=5
> ?ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
> ?ASSOCIATEDPLATFORMSHORTNAME=Terra
> ?ASSOCIATEDSENSORSHORTNAME=MODIS
> ?AUTOMATICQUALITYFLAG=Passed
> ?AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
> performed in the PGE
> ?calibrated_nt=22
> ?CHARACTERISTICBINANGULARSIZE=30.0
> ?CHARACTERISTICBINSIZE=926.625433055556
> ?DATACOLUMNS=1200
> ?DATAROWS=1200
> ?DAYNIGHTFLAG=Day
> ?DESCRREVISION=5.0
> ?EASTBOUNDINGCOORDINATE=-57.7254044077251
> ?Email=qiaozhen@ntsg.umt.edu
> ?EXCLUSIONGRINGFLAG=N
> ?GEOANYABNORMAL=False
> ?GEOESTMAXRMSERROR=50.0
> ?GLOBALGRIDCOLUMNS=43200
> ?GLOBALGRIDROWS=21600
> ?GRANULEBEGINNINGDATETIME=2006-12-11T09:38:17.000Z
> ?GRANULEDAYNIGHTFLAG=Day
> ?GRANULEENDINGDATETIME=2006-12-11T09:38:17.000Z
> ?GRINGPOINTLATITUDE=-39.9999999964079, -29.8506269556485,
> -29.8879227550404, -40.0438107454138
> ?GRINGPOINTLONGITUDE=-78.3244373487826, -69.2295648918179,
> -57.4987926415755, -65.0468184138665
> ?GRINGPOINTSEQUENCENO=1, 2, 3, 4
> ?HDF-EOS file name=MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
> ?HDFEOSVersion=HDFEOS_V2.16
> ?HORIZONTALTILENUMBER=12
> ?INPUTPOINTER=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
> MOD15A1.A2001001.h12v12.005.2006345093817.hdf, MOD15A2_ANC_RI4.hdf
> ?LOCALGRANULEID=MOD15A2.A2001001.h12v12.005.2006351105708.hdf
> ?LOCALVERSIONID=5.0.3
> ?long_name=MOD16A2 -- MODIS Gridded 1KM monthly Composite potential
> Evapotranspiration (ET)
> ?LONGNAME=MODIS/Terra Leaf Area Index/FPAR 8-Day L4 Global 1km SIN Grid
> ?Maker=Qiaozhen Mu
> ?MAXIMUMOBSERVATIONS=1
> ?MOD16 version=UM_collection5
> ?NADIRDATARESOLUTION=1km
> ?NDAYS_COMPOSITED=8
> ?NORTHBOUNDINGCOORDINATE=-29.9999999973059
> ?NUMBEROFGRANULES=1
> ?PARAMETERNAME=MOD15A2
> ?PGEVERSION=5.0.5
> ?PROCESSINGCENTER=MODAPS
> ?PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
> ?PRODUCTIONDATETIME=2006-12-17T10:57:08.000Z
> ?QAPERCENTCLOUDCOVER=5
> ?QAPERCENTEMPIRICALMODEL=2
> ?QAPERCENTGOODFPAR=98
> ?QAPERCENTGOODLAI=98
> ?QAPERCENTGOODQUALITY=98
> ?QAPERCENTINTERPOLATEDDATA=0
> ?QAPERCENTMAINMETHOD=98
> ?QAPERCENTMISSINGDATA=17
> ?QAPERCENTOTHERQUALITY=100
> ?QAPERCENTOUTOFBOUNDSDATA=17
> ?RANGEBEGINNINGDATE=2001-01-01
> ?RANGEBEGINNINGTIME=00:00:00
> ?RANGEENDINGDATE=2001-01-08
> ?RANGEENDINGTIME=23:59:59
> ?REPROCESSINGACTUAL=reprocessed
> ?REPROCESSINGPLANNED=further update is anticipated
> ?scale_factor=0.1
> ?scale_factor_err=0
> ?SCIENCEQUALITYFLAG=Not Investigated
> ?SCIENCEQUALITYFLAGEXPLANATION=See
> http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=terra
> the product Science Quality status.
> ?SHORTNAME=MOD15A2
> ?SOUTHBOUNDINGCOORDINATE=-39.9999999964079
> ?SPSOPARAMETERS=5367, 2680
> ?SYSTEMFILENAME=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
> MOD15A1.A2001001.h12v12.005.2006345093817.hdf
> ?TileID=51012012
> ?units=kg/m^2/mon
> ?valid_range=-32767, 32700
> ?VERSIONID=5
> ?VERTICALTILENUMBER=12
> ?Webpage=http://www.ntsg.umt.edu
> ?WESTBOUNDINGCOORDINATE=-78.3244373487825
> Corner Coordinates:
> Upper Left ?(-6671703.118,-3335851.559) ( 69d16'55.32"W, 30d 0' 0.00"S)
> Lower Left ?(-6671703.118,-4447802.079) ( 78d19'27.97"W, 40d 0' 0.00"S)
> Upper Right (-5559752.598,-3335851.559) ( 57d44' 6.10"W, 30d 0' 0.00"S)
> Lower Right (-5559752.598,-4447802.079) ( 65d16'13.31"W, 40d 0' 0.00"S)
> Center ? ? ?(-6115727.858,-3891826.819) ( 67d 8'33.37"W, 35d 0' 0.00"S)
> Band 1 Block=1200x833 Type=Int16, ColorInterp=Gray
> ?Description = MOD16A2 -- MODIS Gridded 1KM monthly Composite
> potential Evapotranspiration (ET)
> ?NoData Value=32767
> ?Unit Type: kg/m^2/mon
> ?Offset: 0, ? Scale:0.1
>
> --
> ############################
> Chris Mutel
> ?kologisches Systemdesign - Ecological Systems Design
> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
> Engineering
> ETH Z?rich - HIF C 44 - Schafmattstr. 6
> 8093 Z?rich
>
> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
> ############################
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri May 18 13:08:01 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 18 13:08:22 2012
Subject: [gdal-dev] Help with GDAL and HDF4 MODIS data
In-Reply-To: <CAOc=QnKnSCyitxQgkB2vYf+ZMp7SW3KeJ52JOA8nNHiwzc+LaA@mail.gmail.com>
References: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
	<CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>
	<CA+YzLBeKi+vOLzim-G7fyoPqoAh9KfKbZxp7TcwFfSkvo-XCzQ@mail.gmail.com>
	<CAOc=QnKnSCyitxQgkB2vYf+ZMp7SW3KeJ52JOA8nNHiwzc+LaA@mail.gmail.com>
Message-ID: <CA+YzLBdy6g-CGyge8vy5Pn77UG9C5QS8f4ebw=fXWMtkm2WBQw@mail.gmail.com>

Christopher,

I have no problem reproducing the problem.  Please file a ticket
referencing this particular file.  I'm going to look into it briefly
now but I don't want the issue lost track of so it is important to
have a ticket filed.

Best regards,
Frank

On Fri, May 18, 2012 at 9:57 AM, Christopher Mutel <cmutel@gmail.com> wrote:
> Frank-
>
> Here is the dataset in the given images:
>
> ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
>
> However, I see the same behaviour with all the files in the directory:
>
> ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/
>
> Yours, Chris
>
> On Fri, May 18, 2012 at 6:34 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Christopher,
>>
>> Can you provide a pointer to one of the hdf4 images giving problems?
>>
>> I don't see how this could relate to disabling netcdf support.
>>
>> Best regards,
>>
>> On Fri, May 18, 2012 at 8:54 AM, Christopher Mutel <cmutel@gmail.com> wrote:
>>> Dear all-
>>>
>>> I am having trouble reading a HDF4 dataset using GDAL 1.9.0. The
>>> datasets I am want to process come from the MODIS evapotranspiration
>>> project (http://www.ntsg.umt.edu/project/mod16), and can be understood
>>> correctly in e.g. HDFlook
>>> (http://www-loa.univ-lille1.fr/Hdflook/hdflook_gb.html). They look
>>> something like this:
>>>
>>> http://imgur.com/nw7ts
>>>
>>> The problem is that when GDAL opens a subdataset (any of the 4
>>> possible ones), the resulting image data
>>>
>>> http://imgur.com/fILW2
>>>
>>> This effect happens using gdal_translate and the python bindings to
>>> write the raw array data directly to a file. Basically, the lower
>>> third of the image is fine; the next half of the image is masked
>>> (given the nodata value); and the upper fifth, more peculiarly, has a
>>> another section of the image repeated several times.
>>>
>>> I am using GDAL 1.9.0 installed through MacPorts. The supported
>>> formats are listed below. The gdalinfo output is also below.
>>>
>>> My questions are:
>>>
>>> 1. Has anyone else experienced something like this? Is this fixable by
>>> overriding some metadata in the gdal commands, or doing some other
>>> transform?
>>>
>>> 2. Could this be related to the fact that I have NetCDF support enabled?
>>> See e.g.
>>> http://trac.osgeo.org/gdal/wiki/NetCDF
>>> http://trac.osgeo.org/gdal/ticket/3957
>>>
>>> Any help would be greatly appreciated,
>>> Yours,
>>> Chris
>>>
>>> ===============
>>> Supported Formats:
>>> ===============
>>> ?GRASS (ro): GRASS Database Rasters (5.7+)
>>> ?VRT (rw+v): Virtual Raster
>>> ?GTiff (rw+v): GeoTIFF
>>> ?NITF (rw+v): National Imagery Transmission Format
>>> ?RPFTOC (rov): Raster Product Format TOC format
>>> ?ECRGTOC (rov): ECRG TOC format
>>> ?HFA (rw+v): Erdas Imagine Images (.img)
>>> ?SAR_CEOS (rov): CEOS SAR Image
>>> ?CEOS (rov): CEOS Image
>>> ?JAXAPALSAR (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
>>> ?GFF (rov): Ground-based SAR Applications Testbed File Format (.gff)
>>> ?ELAS (rw+v): ELAS
>>> ?AIG (rov): Arc/Info Binary Grid
>>> ?AAIGrid (rwv): Arc/Info ASCII Grid
>>> ?GRASSASCIIGrid (rov): GRASS ASCII Grid
>>> ?SDTS (rov): SDTS Raster
>>> ?DTED (rwv): DTED Elevation Raster
>>> ?PNG (rwv): Portable Network Graphics
>>> ?JPEG (rwv): JPEG JFIF
>>> ?MEM (rw+): In Memory Raster
>>> ?JDEM (rov): Japanese DEM (.mem)
>>> ?GIF (rwv): Graphics Interchange Format (.gif)
>>> ?BIGGIF (rov): Graphics Interchange Format (.gif)
>>> ?ESAT (ro): Envisat Image Format
>>> ?XPM (rwv): X11 PixMap Format
>>> ?BMP (rw+v): MS Windows Device Independent Bitmap
>>> ?DIMAP (rov): SPOT DIMAP
>>> ?AirSAR (ro): AirSAR Polarimetric Image
>>> ?RS2 (ro): RadarSat 2 XML Product
>>> ?PCIDSK (rw+v): PCIDSK Database File
>>> ?ILWIS (rw+v): ILWIS Raster Map
>>> ?SGI (rw+): SGI Image File Format 1.0
>>> ?SRTMHGT (rwv): SRTMHGT File Format
>>> ?Leveller (rw+): Leveller heightfield
>>> ?Terragen (rw+): Terragen heightfield
>>> ?GMT (rw): GMT NetCDF Grid Format
>>> ?netCDF (rw+): Network Common Data Format
>>> ?HDF4 (ro): Hierarchical Data Format Release 4
>>> ?HDF4Image (rw+): HDF4 Dataset
>>> ?ISIS3 (rov): USGS Astrogeology ISIS cube (Version 3)
>>> ?ISIS2 (rw+v): USGS Astrogeology ISIS cube (Version 2)
>>> ?PDS (rov): NASA Planetary Data System
>>> ?TIL (rov): EarthWatch .TIL
>>> ?ERS (rw+v): ERMapper .ers Labelled
>>> ?L1B (rov): NOAA Polar Orbiter Level 1b Data Set
>>> ?FIT (rwv): FIT Image
>>> ?RMF (rw+v): Raster Matrix Format
>>> ?WCS (rov): OGC Web Coverage Service
>>> ?WMS (rwv): OGC Web Map Service
>>> ?MSGN (ro): EUMETSAT Archive native (.nat)
>>> ?RST (rw+v): Idrisi Raster A.1
>>> ?INGR (rw+v): Intergraph Raster
>>> ?GSAG (rwv): Golden Software ASCII Grid (.grd)
>>> ?GSBG (rw+v): Golden Software Binary Grid (.grd)
>>> ?GS7BG (rov): Golden Software 7 Binary Grid (.grd)
>>> ?COSAR (ro): COSAR Annotated Binary Matrix (TerraSAR-X)
>>> ?TSX (rov): TerraSAR-X Product
>>> ?COASP (ro): DRDC COASP SAR Processor Raster
>>> ?R (rwv): R Object Data Store
>>> ?PNM (rw+v): Portable Pixmap Format (netpbm)
>>> ?DOQ1 (rov): USGS DOQ (Old Style)
>>> ?DOQ2 (rov): USGS DOQ (New Style)
>>> ?ENVI (rw+v): ENVI .hdr Labelled
>>> ?EHdr (rw+v): ESRI .hdr Labelled
>>> ?GenBin (rov): Generic Binary (.hdr Labelled)
>>> ?PAux (rw+): PCI .aux Labelled
>>> ?MFF (rw+): Vexcel MFF Raster
>>> ?MFF2 (rw+): Vexcel MFF2 (HKV) Raster
>>> ?FujiBAS (ro): Fuji BAS Scanner Image
>>> ?GSC (rov): GSC Geogrid
>>> ?FAST (rov): EOSAT FAST Format
>>> ?BT (rw+v): VTP .bt (Binary Terrain) 1.3 Format
>>> ?LAN (rw+v): Erdas .LAN/.GIS
>>> ?CPG (ro): Convair PolGASP
>>> ?IDA (rw+): Image Data and Analysis
>>> ?NDF (rov): NLAPS Data Format
>>> ?EIR (rov): Erdas Imagine Raw
>>> ?DIPEx (rov): DIPEx
>>> ?LCP (rov): FARSITE v.4 Landscape File (.lcp)
>>> ?GTX (rw+v): NOAA Vertical Datum .GTX
>>> ?LOSLAS (rov): NADCON .los/.las Datum Grid Shift
>>> ?NTv2 (rw+v): NTv2 Datum Grid Shift
>>> ?ACE2 (rov): ACE2
>>> ?SNODAS (rov): Snow Data Assimilation System
>>> ?RIK (ro): Swedish Grid RIK (.rik)
>>> ?USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
>>> ?GXF (ro): GeoSoft Grid Exchange Format
>>> ?HTTP (ro): HTTP Fetching Wrapper
>>> ?BAG (ro): Bathymetry Attributed Grid
>>> ?HDF5 (ro): Hierarchical Data Format Release 5
>>> ?HDF5Image (ro): HDF5 Dataset
>>> ?NWT_GRD (rov): Northwood Numeric Grid Format .grd/.tab
>>> ?NWT_GRC (rov): Northwood Classified Grid Format .grc/.tab
>>> ?ADRG (rw+v): ARC Digitized Raster Graphics
>>> ?SRP (rov): Standard Raster Product (ASRP/USRP)
>>> ?BLX (rw): Magellan topo (.blx)
>>> ?PostGISRaster (ro): PostGIS Raster driver
>>> ?SAGA (rw+v): SAGA GIS Binary Grid (.sdat)
>>> ?KMLSUPEROVERLAY (rwv): Kml Super Overlay
>>> ?XYZ (rwv): ASCII Gridded XYZ
>>> ?HF2 (rwv): HF2/HFZ heightfield raster
>>> ?OZI (rov): OziExplorer Image File
>>> ?CTG (rov): USGS LULC Composite Theme Grid
>>> ?E00GRID (rov): Arc/Info Export E00 GRID
>>> ?ZMap (rwv): ZMap Plus Grid
>>> ?NGSGEOID (rov): NOAA NGS Geoid Height Grids
>>>
>>> =======
>>> gdalinfo
>>> =======
>>>
>>> Driver: HDF4Image/HDF4 Dataset
>>> Files: none associated
>>> Size is 1200, 1200
>>> Coordinate System is:
>>> PROJCS["unnamed",
>>> ? ?GEOGCS["Unknown datum based upon the custom spheroid",
>>> ? ? ? ?DATUM["Not specified (based on custom spheroid)",
>>> ? ? ? ? ? ?SPHEROID["Custom spheroid",6371007.181,0]],
>>> ? ? ? ?PRIMEM["Greenwich",0],
>>> ? ? ? ?UNIT["degree",0.0174532925199433]],
>>> ? ?PROJECTION["Sinusoidal"],
>>> ? ?PARAMETER["longitude_of_center",0],
>>> ? ?PARAMETER["false_easting",0],
>>> ? ?PARAMETER["false_northing",0],
>>> ? ?UNIT["Meter",1]]
>>> Origin = (-6671703.117999999783933,-3335851.558999999891967)
>>> Pixel Size = (926.625433055833014,-926.625433055833355)
>>> Metadata:
>>> ?_FillValue=32767
>>> ?add_offset=0
>>> ?add_offset_err=0
>>> ?Affi.=NTSG, School of Forestry, U. of MT
>>> ?ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
>>> ?ALGORITHMPACKAGEMATURITYCODE=Normal
>>> ?ALGORITHMPACKAGENAME=MODPR_15A2
>>> ?ALGORITHMPACKAGEVERSION=5
>>> ?ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
>>> ?ASSOCIATEDPLATFORMSHORTNAME=Terra
>>> ?ASSOCIATEDSENSORSHORTNAME=MODIS
>>> ?AUTOMATICQUALITYFLAG=Passed
>>> ?AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
>>> performed in the PGE
>>> ?calibrated_nt=22
>>> ?CHARACTERISTICBINANGULARSIZE=30.0
>>> ?CHARACTERISTICBINSIZE=926.625433055556
>>> ?DATACOLUMNS=1200
>>> ?DATAROWS=1200
>>> ?DAYNIGHTFLAG=Day
>>> ?DESCRREVISION=5.0
>>> ?EASTBOUNDINGCOORDINATE=-57.7254044077251
>>> ?Email=qiaozhen@ntsg.umt.edu
>>> ?EXCLUSIONGRINGFLAG=N
>>> ?GEOANYABNORMAL=False
>>> ?GEOESTMAXRMSERROR=50.0
>>> ?GLOBALGRIDCOLUMNS=43200
>>> ?GLOBALGRIDROWS=21600
>>> ?GRANULEBEGINNINGDATETIME=2006-12-11T09:38:17.000Z
>>> ?GRANULEDAYNIGHTFLAG=Day
>>> ?GRANULEENDINGDATETIME=2006-12-11T09:38:17.000Z
>>> ?GRINGPOINTLATITUDE=-39.9999999964079, -29.8506269556485,
>>> -29.8879227550404, -40.0438107454138
>>> ?GRINGPOINTLONGITUDE=-78.3244373487826, -69.2295648918179,
>>> -57.4987926415755, -65.0468184138665
>>> ?GRINGPOINTSEQUENCENO=1, 2, 3, 4
>>> ?HDF-EOS file name=MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
>>> ?HDFEOSVersion=HDFEOS_V2.16
>>> ?HORIZONTALTILENUMBER=12
>>> ?INPUTPOINTER=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf, MOD15A2_ANC_RI4.hdf
>>> ?LOCALGRANULEID=MOD15A2.A2001001.h12v12.005.2006351105708.hdf
>>> ?LOCALVERSIONID=5.0.3
>>> ?long_name=MOD16A2 -- MODIS Gridded 1KM monthly Composite potential
>>> Evapotranspiration (ET)
>>> ?LONGNAME=MODIS/Terra Leaf Area Index/FPAR 8-Day L4 Global 1km SIN Grid
>>> ?Maker=Qiaozhen Mu
>>> ?MAXIMUMOBSERVATIONS=1
>>> ?MOD16 version=UM_collection5
>>> ?NADIRDATARESOLUTION=1km
>>> ?NDAYS_COMPOSITED=8
>>> ?NORTHBOUNDINGCOORDINATE=-29.9999999973059
>>> ?NUMBEROFGRANULES=1
>>> ?PARAMETERNAME=MOD15A2
>>> ?PGEVERSION=5.0.5
>>> ?PROCESSINGCENTER=MODAPS
>>> ?PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
>>> ?PRODUCTIONDATETIME=2006-12-17T10:57:08.000Z
>>> ?QAPERCENTCLOUDCOVER=5
>>> ?QAPERCENTEMPIRICALMODEL=2
>>> ?QAPERCENTGOODFPAR=98
>>> ?QAPERCENTGOODLAI=98
>>> ?QAPERCENTGOODQUALITY=98
>>> ?QAPERCENTINTERPOLATEDDATA=0
>>> ?QAPERCENTMAINMETHOD=98
>>> ?QAPERCENTMISSINGDATA=17
>>> ?QAPERCENTOTHERQUALITY=100
>>> ?QAPERCENTOUTOFBOUNDSDATA=17
>>> ?RANGEBEGINNINGDATE=2001-01-01
>>> ?RANGEBEGINNINGTIME=00:00:00
>>> ?RANGEENDINGDATE=2001-01-08
>>> ?RANGEENDINGTIME=23:59:59
>>> ?REPROCESSINGACTUAL=reprocessed
>>> ?REPROCESSINGPLANNED=further update is anticipated
>>> ?scale_factor=0.1
>>> ?scale_factor_err=0
>>> ?SCIENCEQUALITYFLAG=Not Investigated
>>> ?SCIENCEQUALITYFLAGEXPLANATION=See
>>> http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=terra
>>> the product Science Quality status.
>>> ?SHORTNAME=MOD15A2
>>> ?SOUTHBOUNDINGCOORDINATE=-39.9999999964079
>>> ?SPSOPARAMETERS=5367, 2680
>>> ?SYSTEMFILENAME=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf
>>> ?TileID=51012012
>>> ?units=kg/m^2/mon
>>> ?valid_range=-32767, 32700
>>> ?VERSIONID=5
>>> ?VERTICALTILENUMBER=12
>>> ?Webpage=http://www.ntsg.umt.edu
>>> ?WESTBOUNDINGCOORDINATE=-78.3244373487825
>>> Corner Coordinates:
>>> Upper Left ?(-6671703.118,-3335851.559) ( 69d16'55.32"W, 30d 0' 0.00"S)
>>> Lower Left ?(-6671703.118,-4447802.079) ( 78d19'27.97"W, 40d 0' 0.00"S)
>>> Upper Right (-5559752.598,-3335851.559) ( 57d44' 6.10"W, 30d 0' 0.00"S)
>>> Lower Right (-5559752.598,-4447802.079) ( 65d16'13.31"W, 40d 0' 0.00"S)
>>> Center ? ? ?(-6115727.858,-3891826.819) ( 67d 8'33.37"W, 35d 0' 0.00"S)
>>> Band 1 Block=1200x833 Type=Int16, ColorInterp=Gray
>>> ?Description = MOD16A2 -- MODIS Gridded 1KM monthly Composite
>>> potential Evapotranspiration (ET)
>>> ?NoData Value=32767
>>> ?Unit Type: kg/m^2/mon
>>> ?Offset: 0, ? Scale:0.1
>>>
>>> --
>>> ############################
>>> Chris Mutel
>>> ?kologisches Systemdesign - Ecological Systems Design
>>> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
>>> Engineering
>>> ETH Z?rich - HIF C 44 - Schafmattstr. 6
>>> 8093 Z?rich
>>>
>>> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
>>> ############################
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> --
> ############################
> Chris Mutel
> ?kologisches Systemdesign - Ecological Systems Design
> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
> Engineering
> ETH Z?rich - HIF C 44 - Schafmattstr. 6
> 8093 Z?rich
>
> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
> ############################
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ari.jolma at gmail.com  Fri May 18 13:35:58 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri May 18 13:36:16 2012
Subject: [gdal-dev] Roadmap to 2.0?
Message-ID: <4FB6887E.30708@gmail.com>

Folks,

The deadline for 2.0 is at the end of this year: 
http://trac.osgeo.org/gdal/milestone/2.0.0

Is the RFC list the best source for what new features are planned for it?

This page is about smaller issues for 2.0: 
http://trac.osgeo.org/gdal/wiki/GDAL20Changes

I have an old wish to have full XYZM support in GDAL and it would be a 
good candidate to the plan for 2.0 - see also 
http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg13470.html
Is anybody doing a review of what it would take?

Best regards,

Ari

From warmerdam at pobox.com  Fri May 18 13:51:37 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 18 13:51:51 2012
Subject: [gdal-dev] Roadmap to 2.0?
In-Reply-To: <4FB6887E.30708@gmail.com>
References: <4FB6887E.30708@gmail.com>
Message-ID: <CA+YzLBd7-bW7umuFJcm7jOFirMeFGvyf-V=OJh8+OVAsj=gp_w@mail.gmail.com>

On Fri, May 18, 2012 at 10:35 AM, Ari Jolma <ari.jolma@gmail.com> wrote:
> Folks,
>
> The deadline for 2.0 is at the end of this year:
> http://trac.osgeo.org/gdal/milestone/2.0.0

Ari,

Lets not take this deadline too seriously.  If it takes
till summer 2013 for 2.0 that is ok (IMHO).

> Is the RFC list the best source for what new features are planned for it?
>
> This page is about smaller issues for 2.0:
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> I have an old wish to have full XYZM support in GDAL and it would be a good
> candidate to the plan for 2.0 - see also
> http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg13470.html
> Is anybody doing a review of what it would take?

I believe XYZM support would be a great feature for 2.0 and ideally
would be part of an upgrade to the more recent "simple features geometry"
model that includes various other geometry types.

I'm not sure who might want to take on this task though.  It isn't
currently a focus of mine even though I'd like to see it happen.

We aren't really a Roadmap kind of project, but I welcome discussion
of things we would like to accomplish in 2.0 which is our opportunity
for substantial changes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From cmutel at gmail.com  Fri May 18 14:20:56 2012
From: cmutel at gmail.com (Christopher Mutel)
Date: Fri May 18 14:21:46 2012
Subject: [gdal-dev] Help with GDAL and HDF4 MODIS data
In-Reply-To: <CA+YzLBdy6g-CGyge8vy5Pn77UG9C5QS8f4ebw=fXWMtkm2WBQw@mail.gmail.com>
References: <mailman.4398.1337356239.1321.gdal-dev@lists.osgeo.org>
	<CAOc=QnL=Z0_JRM_ajkrC4ZLUfash+PVX3SpAHOjNQeewB7V+7A@mail.gmail.com>
	<CA+YzLBeKi+vOLzim-G7fyoPqoAh9KfKbZxp7TcwFfSkvo-XCzQ@mail.gmail.com>
	<CAOc=QnKnSCyitxQgkB2vYf+ZMp7SW3KeJ52JOA8nNHiwzc+LaA@mail.gmail.com>
	<CA+YzLBdy6g-CGyge8vy5Pn77UG9C5QS8f4ebw=fXWMtkm2WBQw@mail.gmail.com>
Message-ID: <CAOc=Qn+=Hfxy3=xaxu60DSprs=pEhPb_mqm7jj5yH3GSXWZ9Tw@mail.gmail.com>

Thanks Frank and Etienne-

Ticket filed here: http://trac.osgeo.org/gdal/ticket/4672

Yours,
Chris

On Fri, May 18, 2012 at 7:08 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Christopher,
>
> I have no problem reproducing the problem. ?Please file a ticket
> referencing this particular file. ?I'm going to look into it briefly
> now but I don't want the issue lost track of so it is important to
> have a ticket filed.
>
> Best regards,
> Frank
>
> On Fri, May 18, 2012 at 9:57 AM, Christopher Mutel <cmutel@gmail.com> wrote:
>> Frank-
>>
>> Here is the dataset in the given images:
>>
>> ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
>>
>> However, I see the same behaviour with all the files in the directory:
>>
>> ftp://ftp.ntsg.umt.edu/pub/MODIS/Mirror/MOD16/MOD16A2_MONTHLY.MERRA_GMAO_1kmALB/Y2000/M01/
>>
>> Yours, Chris
>>
>> On Fri, May 18, 2012 at 6:34 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>>> Christopher,
>>>
>>> Can you provide a pointer to one of the hdf4 images giving problems?
>>>
>>> I don't see how this could relate to disabling netcdf support.
>>>
>>> Best regards,
>>>
>>> On Fri, May 18, 2012 at 8:54 AM, Christopher Mutel <cmutel@gmail.com> wrote:
>>>> Dear all-
>>>>
>>>> I am having trouble reading a HDF4 dataset using GDAL 1.9.0. The
>>>> datasets I am want to process come from the MODIS evapotranspiration
>>>> project (http://www.ntsg.umt.edu/project/mod16), and can be understood
>>>> correctly in e.g. HDFlook
>>>> (http://www-loa.univ-lille1.fr/Hdflook/hdflook_gb.html). They look
>>>> something like this:
>>>>
>>>> http://imgur.com/nw7ts
>>>>
>>>> The problem is that when GDAL opens a subdataset (any of the 4
>>>> possible ones), the resulting image data
>>>>
>>>> http://imgur.com/fILW2
>>>>
>>>> This effect happens using gdal_translate and the python bindings to
>>>> write the raw array data directly to a file. Basically, the lower
>>>> third of the image is fine; the next half of the image is masked
>>>> (given the nodata value); and the upper fifth, more peculiarly, has a
>>>> another section of the image repeated several times.
>>>>
>>>> I am using GDAL 1.9.0 installed through MacPorts. The supported
>>>> formats are listed below. The gdalinfo output is also below.
>>>>
>>>> My questions are:
>>>>
>>>> 1. Has anyone else experienced something like this? Is this fixable by
>>>> overriding some metadata in the gdal commands, or doing some other
>>>> transform?
>>>>
>>>> 2. Could this be related to the fact that I have NetCDF support enabled?
>>>> See e.g.
>>>> http://trac.osgeo.org/gdal/wiki/NetCDF
>>>> http://trac.osgeo.org/gdal/ticket/3957
>>>>
>>>> Any help would be greatly appreciated,
>>>> Yours,
>>>> Chris
>>>>
>>>> ===============
>>>> Supported Formats:
>>>> ===============
>>>> ?GRASS (ro): GRASS Database Rasters (5.7+)
>>>> ?VRT (rw+v): Virtual Raster
>>>> ?GTiff (rw+v): GeoTIFF
>>>> ?NITF (rw+v): National Imagery Transmission Format
>>>> ?RPFTOC (rov): Raster Product Format TOC format
>>>> ?ECRGTOC (rov): ECRG TOC format
>>>> ?HFA (rw+v): Erdas Imagine Images (.img)
>>>> ?SAR_CEOS (rov): CEOS SAR Image
>>>> ?CEOS (rov): CEOS Image
>>>> ?JAXAPALSAR (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
>>>> ?GFF (rov): Ground-based SAR Applications Testbed File Format (.gff)
>>>> ?ELAS (rw+v): ELAS
>>>> ?AIG (rov): Arc/Info Binary Grid
>>>> ?AAIGrid (rwv): Arc/Info ASCII Grid
>>>> ?GRASSASCIIGrid (rov): GRASS ASCII Grid
>>>> ?SDTS (rov): SDTS Raster
>>>> ?DTED (rwv): DTED Elevation Raster
>>>> ?PNG (rwv): Portable Network Graphics
>>>> ?JPEG (rwv): JPEG JFIF
>>>> ?MEM (rw+): In Memory Raster
>>>> ?JDEM (rov): Japanese DEM (.mem)
>>>> ?GIF (rwv): Graphics Interchange Format (.gif)
>>>> ?BIGGIF (rov): Graphics Interchange Format (.gif)
>>>> ?ESAT (ro): Envisat Image Format
>>>> ?XPM (rwv): X11 PixMap Format
>>>> ?BMP (rw+v): MS Windows Device Independent Bitmap
>>>> ?DIMAP (rov): SPOT DIMAP
>>>> ?AirSAR (ro): AirSAR Polarimetric Image
>>>> ?RS2 (ro): RadarSat 2 XML Product
>>>> ?PCIDSK (rw+v): PCIDSK Database File
>>>> ?ILWIS (rw+v): ILWIS Raster Map
>>>> ?SGI (rw+): SGI Image File Format 1.0
>>>> ?SRTMHGT (rwv): SRTMHGT File Format
>>>> ?Leveller (rw+): Leveller heightfield
>>>> ?Terragen (rw+): Terragen heightfield
>>>> ?GMT (rw): GMT NetCDF Grid Format
>>>> ?netCDF (rw+): Network Common Data Format
>>>> ?HDF4 (ro): Hierarchical Data Format Release 4
>>>> ?HDF4Image (rw+): HDF4 Dataset
>>>> ?ISIS3 (rov): USGS Astrogeology ISIS cube (Version 3)
>>>> ?ISIS2 (rw+v): USGS Astrogeology ISIS cube (Version 2)
>>>> ?PDS (rov): NASA Planetary Data System
>>>> ?TIL (rov): EarthWatch .TIL
>>>> ?ERS (rw+v): ERMapper .ers Labelled
>>>> ?L1B (rov): NOAA Polar Orbiter Level 1b Data Set
>>>> ?FIT (rwv): FIT Image
>>>> ?RMF (rw+v): Raster Matrix Format
>>>> ?WCS (rov): OGC Web Coverage Service
>>>> ?WMS (rwv): OGC Web Map Service
>>>> ?MSGN (ro): EUMETSAT Archive native (.nat)
>>>> ?RST (rw+v): Idrisi Raster A.1
>>>> ?INGR (rw+v): Intergraph Raster
>>>> ?GSAG (rwv): Golden Software ASCII Grid (.grd)
>>>> ?GSBG (rw+v): Golden Software Binary Grid (.grd)
>>>> ?GS7BG (rov): Golden Software 7 Binary Grid (.grd)
>>>> ?COSAR (ro): COSAR Annotated Binary Matrix (TerraSAR-X)
>>>> ?TSX (rov): TerraSAR-X Product
>>>> ?COASP (ro): DRDC COASP SAR Processor Raster
>>>> ?R (rwv): R Object Data Store
>>>> ?PNM (rw+v): Portable Pixmap Format (netpbm)
>>>> ?DOQ1 (rov): USGS DOQ (Old Style)
>>>> ?DOQ2 (rov): USGS DOQ (New Style)
>>>> ?ENVI (rw+v): ENVI .hdr Labelled
>>>> ?EHdr (rw+v): ESRI .hdr Labelled
>>>> ?GenBin (rov): Generic Binary (.hdr Labelled)
>>>> ?PAux (rw+): PCI .aux Labelled
>>>> ?MFF (rw+): Vexcel MFF Raster
>>>> ?MFF2 (rw+): Vexcel MFF2 (HKV) Raster
>>>> ?FujiBAS (ro): Fuji BAS Scanner Image
>>>> ?GSC (rov): GSC Geogrid
>>>> ?FAST (rov): EOSAT FAST Format
>>>> ?BT (rw+v): VTP .bt (Binary Terrain) 1.3 Format
>>>> ?LAN (rw+v): Erdas .LAN/.GIS
>>>> ?CPG (ro): Convair PolGASP
>>>> ?IDA (rw+): Image Data and Analysis
>>>> ?NDF (rov): NLAPS Data Format
>>>> ?EIR (rov): Erdas Imagine Raw
>>>> ?DIPEx (rov): DIPEx
>>>> ?LCP (rov): FARSITE v.4 Landscape File (.lcp)
>>>> ?GTX (rw+v): NOAA Vertical Datum .GTX
>>>> ?LOSLAS (rov): NADCON .los/.las Datum Grid Shift
>>>> ?NTv2 (rw+v): NTv2 Datum Grid Shift
>>>> ?ACE2 (rov): ACE2
>>>> ?SNODAS (rov): Snow Data Assimilation System
>>>> ?RIK (ro): Swedish Grid RIK (.rik)
>>>> ?USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
>>>> ?GXF (ro): GeoSoft Grid Exchange Format
>>>> ?HTTP (ro): HTTP Fetching Wrapper
>>>> ?BAG (ro): Bathymetry Attributed Grid
>>>> ?HDF5 (ro): Hierarchical Data Format Release 5
>>>> ?HDF5Image (ro): HDF5 Dataset
>>>> ?NWT_GRD (rov): Northwood Numeric Grid Format .grd/.tab
>>>> ?NWT_GRC (rov): Northwood Classified Grid Format .grc/.tab
>>>> ?ADRG (rw+v): ARC Digitized Raster Graphics
>>>> ?SRP (rov): Standard Raster Product (ASRP/USRP)
>>>> ?BLX (rw): Magellan topo (.blx)
>>>> ?PostGISRaster (ro): PostGIS Raster driver
>>>> ?SAGA (rw+v): SAGA GIS Binary Grid (.sdat)
>>>> ?KMLSUPEROVERLAY (rwv): Kml Super Overlay
>>>> ?XYZ (rwv): ASCII Gridded XYZ
>>>> ?HF2 (rwv): HF2/HFZ heightfield raster
>>>> ?OZI (rov): OziExplorer Image File
>>>> ?CTG (rov): USGS LULC Composite Theme Grid
>>>> ?E00GRID (rov): Arc/Info Export E00 GRID
>>>> ?ZMap (rwv): ZMap Plus Grid
>>>> ?NGSGEOID (rov): NOAA NGS Geoid Height Grids
>>>>
>>>> =======
>>>> gdalinfo
>>>> =======
>>>>
>>>> Driver: HDF4Image/HDF4 Dataset
>>>> Files: none associated
>>>> Size is 1200, 1200
>>>> Coordinate System is:
>>>> PROJCS["unnamed",
>>>> ? ?GEOGCS["Unknown datum based upon the custom spheroid",
>>>> ? ? ? ?DATUM["Not specified (based on custom spheroid)",
>>>> ? ? ? ? ? ?SPHEROID["Custom spheroid",6371007.181,0]],
>>>> ? ? ? ?PRIMEM["Greenwich",0],
>>>> ? ? ? ?UNIT["degree",0.0174532925199433]],
>>>> ? ?PROJECTION["Sinusoidal"],
>>>> ? ?PARAMETER["longitude_of_center",0],
>>>> ? ?PARAMETER["false_easting",0],
>>>> ? ?PARAMETER["false_northing",0],
>>>> ? ?UNIT["Meter",1]]
>>>> Origin = (-6671703.117999999783933,-3335851.558999999891967)
>>>> Pixel Size = (926.625433055833014,-926.625433055833355)
>>>> Metadata:
>>>> ?_FillValue=32767
>>>> ?add_offset=0
>>>> ?add_offset_err=0
>>>> ?Affi.=NTSG, School of Forestry, U. of MT
>>>> ?ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
>>>> ?ALGORITHMPACKAGEMATURITYCODE=Normal
>>>> ?ALGORITHMPACKAGENAME=MODPR_15A2
>>>> ?ALGORITHMPACKAGEVERSION=5
>>>> ?ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
>>>> ?ASSOCIATEDPLATFORMSHORTNAME=Terra
>>>> ?ASSOCIATEDSENSORSHORTNAME=MODIS
>>>> ?AUTOMATICQUALITYFLAG=Passed
>>>> ?AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
>>>> performed in the PGE
>>>> ?calibrated_nt=22
>>>> ?CHARACTERISTICBINANGULARSIZE=30.0
>>>> ?CHARACTERISTICBINSIZE=926.625433055556
>>>> ?DATACOLUMNS=1200
>>>> ?DATAROWS=1200
>>>> ?DAYNIGHTFLAG=Day
>>>> ?DESCRREVISION=5.0
>>>> ?EASTBOUNDINGCOORDINATE=-57.7254044077251
>>>> ?Email=qiaozhen@ntsg.umt.edu
>>>> ?EXCLUSIONGRINGFLAG=N
>>>> ?GEOANYABNORMAL=False
>>>> ?GEOESTMAXRMSERROR=50.0
>>>> ?GLOBALGRIDCOLUMNS=43200
>>>> ?GLOBALGRIDROWS=21600
>>>> ?GRANULEBEGINNINGDATETIME=2006-12-11T09:38:17.000Z
>>>> ?GRANULEDAYNIGHTFLAG=Day
>>>> ?GRANULEENDINGDATETIME=2006-12-11T09:38:17.000Z
>>>> ?GRINGPOINTLATITUDE=-39.9999999964079, -29.8506269556485,
>>>> -29.8879227550404, -40.0438107454138
>>>> ?GRINGPOINTLONGITUDE=-78.3244373487826, -69.2295648918179,
>>>> -57.4987926415755, -65.0468184138665
>>>> ?GRINGPOINTSEQUENCENO=1, 2, 3, 4
>>>> ?HDF-EOS file name=MOD16A2.A2000M01.h12v12.105.2010357170459.hdf
>>>> ?HDFEOSVersion=HDFEOS_V2.16
>>>> ?HORIZONTALTILENUMBER=12
>>>> ?INPUTPOINTER=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>>>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>>>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>>>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>>>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>>>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>>>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>>>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf, MOD15A2_ANC_RI4.hdf
>>>> ?LOCALGRANULEID=MOD15A2.A2001001.h12v12.005.2006351105708.hdf
>>>> ?LOCALVERSIONID=5.0.3
>>>> ?long_name=MOD16A2 -- MODIS Gridded 1KM monthly Composite potential
>>>> Evapotranspiration (ET)
>>>> ?LONGNAME=MODIS/Terra Leaf Area Index/FPAR 8-Day L4 Global 1km SIN Grid
>>>> ?Maker=Qiaozhen Mu
>>>> ?MAXIMUMOBSERVATIONS=1
>>>> ?MOD16 version=UM_collection5
>>>> ?NADIRDATARESOLUTION=1km
>>>> ?NDAYS_COMPOSITED=8
>>>> ?NORTHBOUNDINGCOORDINATE=-29.9999999973059
>>>> ?NUMBEROFGRANULES=1
>>>> ?PARAMETERNAME=MOD15A2
>>>> ?PGEVERSION=5.0.5
>>>> ?PROCESSINGCENTER=MODAPS
>>>> ?PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
>>>> ?PRODUCTIONDATETIME=2006-12-17T10:57:08.000Z
>>>> ?QAPERCENTCLOUDCOVER=5
>>>> ?QAPERCENTEMPIRICALMODEL=2
>>>> ?QAPERCENTGOODFPAR=98
>>>> ?QAPERCENTGOODLAI=98
>>>> ?QAPERCENTGOODQUALITY=98
>>>> ?QAPERCENTINTERPOLATEDDATA=0
>>>> ?QAPERCENTMAINMETHOD=98
>>>> ?QAPERCENTMISSINGDATA=17
>>>> ?QAPERCENTOTHERQUALITY=100
>>>> ?QAPERCENTOUTOFBOUNDSDATA=17
>>>> ?RANGEBEGINNINGDATE=2001-01-01
>>>> ?RANGEBEGINNINGTIME=00:00:00
>>>> ?RANGEENDINGDATE=2001-01-08
>>>> ?RANGEENDINGTIME=23:59:59
>>>> ?REPROCESSINGACTUAL=reprocessed
>>>> ?REPROCESSINGPLANNED=further update is anticipated
>>>> ?scale_factor=0.1
>>>> ?scale_factor_err=0
>>>> ?SCIENCEQUALITYFLAG=Not Investigated
>>>> ?SCIENCEQUALITYFLAGEXPLANATION=See
>>>> http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=terra
>>>> the product Science Quality status.
>>>> ?SHORTNAME=MOD15A2
>>>> ?SOUTHBOUNDINGCOORDINATE=-39.9999999964079
>>>> ?SPSOPARAMETERS=5367, 2680
>>>> ?SYSTEMFILENAME=MOD15A1.A2001008.h12v12.005.2006348070239.hdf,
>>>> MOD15A1.A2001007.h12v12.005.2006348001835.hdf,
>>>> MOD15A1.A2001006.h12v12.005.2006347202242.hdf,
>>>> MOD15A1.A2001005.h12v12.005.2006347152227.hdf,
>>>> MOD15A1.A2001004.h12v12.005.2006347093732.hdf,
>>>> MOD15A1.A2001003.h12v12.005.2006346135836.hdf,
>>>> MOD15A1.A2001002.h12v12.005.2006345172013.hdf,
>>>> MOD15A1.A2001001.h12v12.005.2006345093817.hdf
>>>> ?TileID=51012012
>>>> ?units=kg/m^2/mon
>>>> ?valid_range=-32767, 32700
>>>> ?VERSIONID=5
>>>> ?VERTICALTILENUMBER=12
>>>> ?Webpage=http://www.ntsg.umt.edu
>>>> ?WESTBOUNDINGCOORDINATE=-78.3244373487825
>>>> Corner Coordinates:
>>>> Upper Left ?(-6671703.118,-3335851.559) ( 69d16'55.32"W, 30d 0' 0.00"S)
>>>> Lower Left ?(-6671703.118,-4447802.079) ( 78d19'27.97"W, 40d 0' 0.00"S)
>>>> Upper Right (-5559752.598,-3335851.559) ( 57d44' 6.10"W, 30d 0' 0.00"S)
>>>> Lower Right (-5559752.598,-4447802.079) ( 65d16'13.31"W, 40d 0' 0.00"S)
>>>> Center ? ? ?(-6115727.858,-3891826.819) ( 67d 8'33.37"W, 35d 0' 0.00"S)
>>>> Band 1 Block=1200x833 Type=Int16, ColorInterp=Gray
>>>> ?Description = MOD16A2 -- MODIS Gridded 1KM monthly Composite
>>>> potential Evapotranspiration (ET)
>>>> ?NoData Value=32767
>>>> ?Unit Type: kg/m^2/mon
>>>> ?Offset: 0, ? Scale:0.1
>>>>
>>>> --
>>>> ############################
>>>> Chris Mutel
>>>> ?kologisches Systemdesign - Ecological Systems Design
>>>> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
>>>> Engineering
>>>> ETH Z?rich - HIF C 44 - Schafmattstr. 6
>>>> 8093 Z?rich
>>>>
>>>> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
>>>> ############################
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> --
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush? ? | Geospatial Software Developer
>>
>>
>>
>> --
>> ############################
>> Chris Mutel
>> ?kologisches Systemdesign - Ecological Systems Design
>> Institut f.Umweltingenieurwissenschaften - Institute for Environmental
>> Engineering
>> ETH Z?rich - HIF C 44 - Schafmattstr. 6
>> 8093 Z?rich
>>
>> Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
>> ############################
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
############################
Chris Mutel
?kologisches Systemdesign - Ecological Systems Design
Institut f.Umweltingenieurwissenschaften - Institute for Environmental
Engineering
ETH Z?rich - HIF C 44 - Schafmattstr. 6
8093 Z?rich

Telefon: +41 44 633 71 45 - Fax: +41 44 633 10 61
############################
From even.rouault at mines-paris.org  Fri May 18 15:41:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 18 15:42:50 2012
Subject: [*** YES ! ***] Re: [gdal-dev] Can OGR WFS driver take advantage of
	WFS Server streaming?
In-Reply-To: <201205172126.10293.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZDdxBZSQGQ0KeO_p6m+=EMUOVb114HESG4eAxyBAqwC7A@mail.gmail.com>
	<201205172126.10293.even.rouault@mines-paris.org>
Message-ID: <201205182141.42874.even.rouault@mines-paris.org>

OK,

I've finally implemented /vsicurl_stream/ , optimized the GML driver for it, 
and ported the WFS driver to use it transparently. It should now be possible 
to parse gigabytes of GML through WFS with very little RAM consumption.

For example,

ogrinfo -ro -al -q WFS:http://testing.deegree.org/deegree-wfs/services 
app:Springs

or you can also test it at hand, like this :

ogrinfo -ro -al -q "/vsicurl_streaming/http://testing.deegree.org/deegree-
wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs" 

Best regards,

Even
From saad.hessane at gmail.com  Sat May 19 10:58:07 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sat May 19 10:58:37 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
Message-ID: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>

Hi,

In wanting to add programmatically a LUT to a VRTComplexSource, I read the
VRT driver source code.
VRTComplexSource have three public attributes : *double
*padfLUTInputs*, *double
*padfLUTOutputs* and *int nLUTItemCount.*
*
*
To set the LUT we have to affect directly two pointers and set the number
of elements. There's no other method to set the LUT.
Maybe in other langage like Python it can be useful. But in C++, I think
it's wrong for encapsulation.

But the worst think in my opinion is the VRTComplexSource destructor :

VRTComplexSource::~VRTComplexSource()
> {
>     if (padfLUTInputs)
>         VSIFree( padfLUTInputs );
>     if (padfLUTOutputs)
>         VSIFree( padfLUTOutputs );
> }


The destructor frees the two pointer. This can be an issue if I do that :

> double padfLUTInputs[] = {0,1,2};

double padfLUTOutputs[] = {4,5,6};

complexSource->padfLUTInputs = padfLUTInputs
> ; complexSource->padfLUTOutputs = padfLUTOutputs;


And what happens if I want to change the LUT?

I suggest to add a method VRTComplexSource::setLUT (const double *, const
double *, int), and to make the public attributes protected.
The setLUT method frees the pointers, and clones the tables.

Best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120519/01ab711a/attachment.html
From even.rouault at mines-paris.org  Sat May 19 11:12:56 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 19 11:14:20 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
Message-ID: <201205191712.56463.even.rouault@mines-paris.org>

Le samedi 19 mai 2012 16:58:07, Sa?d HESSANE a ?crit :
> Hi,
> 
> In wanting to add programmatically a LUT to a VRTComplexSource, I read the
> VRT driver source code.
> VRTComplexSource have three public attributes : *double
> *padfLUTInputs*, *double
> *padfLUTOutputs* and *int nLUTItemCount.*
> *
> *

You should even not consider the VRTComplexSource class to be in the public 
API, so the visibility of its members is not significant. And playing with them 
from the outside isn't recommanded at all.

The only official way of changing the LUT is to change the XML of the VRT and 
reload it.
From saad.hessane at gmail.com  Sat May 19 12:58:05 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sat May 19 12:58:30 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <201205191712.56463.even.rouault@mines-paris.org>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205191712.56463.even.rouault@mines-paris.org>
Message-ID: <CAEcp1tA74q90QOYs=dd6mK1DAXRhTghp9S0NZNW7NNyc+O6GAQ@mail.gmail.com>

Hi Even and thank you for the quick response.

You should even not consider the VRTComplexSource class to be in the public
> API, so the visibility of its members is not significant. And playing with
> them
> from the outside isn't recommanded at all.


The fact that you don't consider the class in the public API does not
excuse the fact that this is a mistake encapsulation :)
And apart from that, nothing prevents me to use a special driver to do
specific things that are not directly provided by the public API.
Currently I need to build a VRT, and the VRT driver are fine for that. It's
dirrectly use in the gdalbuildvrt utility for example. If the VRT plugin is
not safe to use, the solution is to correct it.

The only official way of changing the LUT is to change the XML of the VRT
> and
> reload it.

To read a VRT file outside from gdal I need to parse an XML file, so I have
to use another dependency (like xerces) to do just a small think.

Another argument is the VRTKernelFiltredSource. To set a kernel filtre we
don't have to set the attributes nKernelSize, padfKernelCoefs and
bNormalized, because we can't (the attributes are protected). But the API
offers a setKernel that do exactly the same think that I hope the setLUT
method do in the VRTComplexSource.

Best regards

2012/5/19 Even Rouault <even.rouault@mines-paris.org>

> Le samedi 19 mai 2012 16:58:07, Sa?d HESSANE a ?crit :
> > Hi,
> >
> > In wanting to add programmatically a LUT to a VRTComplexSource, I read
> the
> > VRT driver source code.
> > VRTComplexSource have three public attributes : *double
> > *padfLUTInputs*, *double
> > *padfLUTOutputs* and *int nLUTItemCount.*
> > *
> > *
>
> You should even not consider the VRTComplexSource class to be in the public
> API, so the visibility of its members is not significant. And playing with
> them
> from the outside isn't recommanded at all.
>
> The only official way of changing the LUT is to change the XML of the VRT
> and
> reload it.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120519/3bf73393/attachment.html
From even.rouault at mines-paris.org  Sat May 19 14:11:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 19 14:12:08 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <CAEcp1tA74q90QOYs=dd6mK1DAXRhTghp9S0NZNW7NNyc+O6GAQ@mail.gmail.com>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205191712.56463.even.rouault@mines-paris.org>
	<CAEcp1tA74q90QOYs=dd6mK1DAXRhTghp9S0NZNW7NNyc+O6GAQ@mail.gmail.com>
Message-ID: <201205192011.01444.even.rouault@mines-paris.org>

Le samedi 19 mai 2012 18:58:05, Sa?d HESSANE a ?crit :
> Hi Even and thank you for the quick response.
> 
> You should even not consider the VRTComplexSource class to be in the public
> 
> > API, so the visibility of its members is not significant. And playing
> > with them
> > from the outside isn't recommanded at all.
> 
> The fact that you don't consider the class in the public API does not
> excuse the fact that this is a mistake encapsulation :)

I agree the encapsulation isn't ideal, but unless I'm wrong, this class is 
*not* in the public API. It is not marked as CPL_DLL exported, so on Windows, 
you should not be able to access it from the outside of the GDAL lib. On 
Unix/Linux, as, by default (unless GDAL is configured with --hide-internal-
symbols), all symbols are exported, you can technically use it however.

> And apart from that, nothing prevents me to use a special driver to do
> specific things that are not directly provided by the public API.
> Currently I need to build a VRT, and the VRT driver are fine for that. It's
> dirrectly use in the gdalbuildvrt utility for example. If the VRT plugin is
> not safe to use, the solution is to correct it.

There's always a trade off between exposing API and increasing maintenance 
burden. The more API you expose, the more difficult it is to make changes 
afterwards.

> To read a VRT file outside from gdal I need to parse an XML file, so I have
> to use another dependency (like xerces) to do just a small think.

You don't need another dependency. You can use the CPL minixml API (see 
cpl_minixml.h) that is used by the VRT driver itself for example.

> 
> Another argument is the VRTKernelFiltredSource. To set a kernel filtre we
> don't have to set the attributes nKernelSize, padfKernelCoefs and
> bNormalized, because we can't (the attributes are protected). But the API
> offers a setKernel that do exactly the same think that I hope the setLUT
> method do in the VRTComplexSource.

If you can come with a patch, I'll consider including it, but I still believe 
you should not rely on that.
From newmanw10 at gmail.com  Sat May 19 21:09:27 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sat May 19 21:10:26 2012
Subject: [gdal-dev] Java binding gdal.AutoCreateWarpedVRT question
Message-ID: <CAD34qgk9WotA6X8N2PmzhvfWFA71QzXSYdVBNo7Ek2a=sxMB3Q@mail.gmail.com>

When get a Dataset Object back from the gdal.AutoCreateWarpedVRT(dataset)
call do I need to call delete on the warped dataset and the original
dataset, or just the original when I am done using the warped dataset?
Sorry I did not understand the javadocs.

Ex

Dataset origDataset= gdal.Open("imagefile.ntf");
Dataset warpedDataset = gdal.AutoCreateWarpedVRT(origDataset, wkt);

// do some stuff with the wrapped dataset
// .....

//should i delete both?
origDataset.delete();
warpedDataset.delete();

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120519/69cc7eea/attachment.html
From mariusjigmond at hotmail.com  Sun May 20 00:32:47 2012
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sun May 20 00:33:26 2012
Subject: [gdal-dev] Upgraded to 1.9 - Python Bindings Error
In-Reply-To: <CA+bfmPsEJP5eTOV09OJVyhp3sJw4CrCcsjB+uz6JjySFFUQ8XA@mail.gmail.com>
References: <CA+bfmPsEJP5eTOV09OJVyhp3sJw4CrCcsjB+uz6JjySFFUQ8XA@mail.gmail.com>
Message-ID: <BLU0-SMTP333B9BFB7A1F039DED929FDB21C0@phx.gbl>

On 05/04/2012 08:16 PM, Jay L. wrote:
> List,
>
> Just upgraded to 1.9.0 on my windows 7 machine and I can no longer 
> access gdal via the python bindings.  Command line (ogr2ogr, gdalinfo, 
> etc. are functioning as expected).  Specifically, running 'from osgeo 
> import gdal', returns:
>
> File "C:\Python26\ArcGIS10.0\lib\site-packages\osgeo\__init.py__", 
> line 17, in
> swig_import_helper
>     _mod = imp.load_module('_gdal', fp, pathname, descritpion)
> ImportError: DLL load failed: The specified procedure could not be found.
>
> GDAL 1.8 was working wonderfully with ArcGIS.  No environmental 
> variables were altered between installations.  Path still contains 
> C:\Program Files (x86)\GDAL and GDAL_DATA is stills set to C:\Program 
> Files (x86)\GDAL\gdal-data.
>
> I did try adding the PYTHONPATH variable and setting that to 
> C:\Python26\ArcGIS10.0, but no change in the error.
>
> GDAL1.9 and the python bindings were downloaded from 
> http://www.gisinternals.com/sdk/ (the MSVC2010-32bit stable version).

Python 2.6 that comes with ArcGIS 10 was compiled with MSVC2008. That 
could be the reason why the bindings aren't working. Try uninstalling 
and then installing the matching version.

-marius
>
> Oddly, the gdal python utilities are functioning.  That is 
> gdal2tiles.py for example.
>
> Any suggestions appreciated.  I assume a PATH error that I am missing, 
> but am stumped.  The mailing list archives were sparse on this error...
>
> Thanks,
> Jay
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120519/26514ba8/attachment.html
From chaitanya.ch at gmail.com  Sun May 20 03:57:05 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun May 20 03:57:47 2012
Subject: [gdal-dev] Java binding gdal.AutoCreateWarpedVRT question
In-Reply-To: <CAD34qgk9WotA6X8N2PmzhvfWFA71QzXSYdVBNo7Ek2a=sxMB3Q@mail.gmail.com>
References: <CAD34qgk9WotA6X8N2PmzhvfWFA71QzXSYdVBNo7Ek2a=sxMB3Q@mail.gmail.com>
Message-ID: <CAMKgpOYE_hN+tZk1gKm5h=GZjmqUUVMin-=HA1GpC9h8PwFk_w@mail.gmail.com>

Billy,

The returned dataset is a virtual dataset handle that has to be closed
after it is used.
But keep in mind that the returned dataset will acquire one or more
references of the original dataset. So, unless it is opened with
GDALOpenShared(), it's not a good idea to close the original dataset before
closing the warped dataset.

http://gdal.org/java/org/gdal/gdal/gdal.html#AutoCreateWarpedVRT%28org.gdal.gdal.Dataset,%20java.lang.String,%20java.lang.String,%20int,%20double%29

On Sun, May 20, 2012 at 6:39 AM, Billy Newman <newmanw10@gmail.com> wrote:

> When get a Dataset Object back from the gdal.AutoCreateWarpedVRT(dataset)
> call do I need to call delete on the warped dataset and the original
> dataset, or just the original when I am done using the warped dataset?
> Sorry I did not understand the javadocs.
>
> Ex
>
> Dataset origDataset= gdal.Open("imagefile.ntf");
> Dataset warpedDataset = gdal.AutoCreateWarpedVRT(origDataset, wkt);
>
> // do some stuff with the wrapped dataset
> // .....
>
> //should i delete both?
> origDataset.delete();
> warpedDataset.delete();
>
> Thanks!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120520/06f9e2f7/attachment.html
From ari.jolma at gmail.com  Sun May 20 04:38:41 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun May 20 04:39:21 2012
Subject: [gdal-dev] Roadmap to 2.0?
In-Reply-To: <CA+YzLBd7-bW7umuFJcm7jOFirMeFGvyf-V=OJh8+OVAsj=gp_w@mail.gmail.com>
References: <4FB6887E.30708@gmail.com>
	<CA+YzLBd7-bW7umuFJcm7jOFirMeFGvyf-V=OJh8+OVAsj=gp_w@mail.gmail.com>
Message-ID: <4FB8AD91.6030606@gmail.com>

On 05/18/2012 08:51 PM, Frank Warmerdam wrote:
> On Fri, May 18, 2012 at 10:35 AM, Ari Jolma<ari.jolma@gmail.com>  wrote:
>> Folks,
>>
>> The deadline for 2.0 is at the end of this year:
>> http://trac.osgeo.org/gdal/milestone/2.0.0
> Ari,
>
> Lets not take this deadline too seriously.  If it takes
> till summer 2013 for 2.0 that is ok (IMHO).

Deadlines are usually good ;)

but I have no problem with this. If it takes longer then it takes longer.

>
>> Is the RFC list the best source for what new features are planned for it?
>>
>> This page is about smaller issues for 2.0:
>> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>>
>> I have an old wish to have full XYZM support in GDAL and it would be a good
>> candidate to the plan for 2.0 - see also
>> http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg13470.html
>> Is anybody doing a review of what it would take?
> I believe XYZM support would be a great feature for 2.0 and ideally
> would be part of an upgrade to the more recent "simple features geometry"
> model that includes various other geometry types.
>
> I'm not sure who might want to take on this task though.  It isn't
> currently a focus of mine even though I'd like to see it happen.
>
> We aren't really a Roadmap kind of project, but I welcome discussion
> of things we would like to accomplish in 2.0 which is our opportunity
> for substantial changes.

I could do two things:

Edit the "smaller issues" page to contain also larger issues (as the 
link to it on the main page says).

Begin a XYZM RFC.

Ari

>
> Best regards,

From saad.hessane at gmail.com  Sun May 20 10:07:07 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sun May 20 10:07:32 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <201205192011.01444.even.rouault@mines-paris.org>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205191712.56463.even.rouault@mines-paris.org>
	<CAEcp1tA74q90QOYs=dd6mK1DAXRhTghp9S0NZNW7NNyc+O6GAQ@mail.gmail.com>
	<201205192011.01444.even.rouault@mines-paris.org>
Message-ID: <CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: buildvrt_lut.patch
Type: application/octet-stream
Size: 16601 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120520/0fdb72b4/buildvrt_lut-0001.obj
From saad.hessane at gmail.com  Sun May 20 10:14:29 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sun May 20 10:15:19 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205191712.56463.even.rouault@mines-paris.org>
	<CAEcp1tA74q90QOYs=dd6mK1DAXRhTghp9S0NZNW7NNyc+O6GAQ@mail.gmail.com>
	<201205192011.01444.even.rouault@mines-paris.org>
	<CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>
Message-ID: <CAEcp1tB_qBzxeV-ePABTvAK68K+DhTiQqPV5xZvU_5zOzgrRgw@mail.gmail.com>

As I said, I also propose to have the -filter parameter that write vrt with
the VRTKernelFilteredSource class.

Best regards.



2012/5/20 Sa?d HESSANE <saad.hessane@gmail.com>

> Hi Even,
>
> The main goal of this proposal is to built using "gdalbuildvrt" VRT files
> containing LUT or filters.
>
> The patch that I send allow build VRT with LUT by specifying the -lutin
> and -lutout parameters.
> Ex :
>   gdalbuildvrt -lutin "0 1 2" -lutout "4 5 6" test.vrt test.tif
>
> We can discuss the fact that define two parameters (-lutin and -lutout) or
> just one parameter (-lut "0,4 1,5 2,6"). This is not a problem.
>
>
> 2012/5/19 Even Rouault <even.rouault@mines-paris.org>
>
>> Le samedi 19 mai 2012 18:58:05, Sa?d HESSANE a ?crit :
>> > Hi Even and thank you for the quick response.
>> >
>> > You should even not consider the VRTComplexSource class to be in the
>> public
>> >
>> > > API, so the visibility of its members is not significant. And playing
>> > > with them
>> > > from the outside isn't recommanded at all.
>> >
>> > The fact that you don't consider the class in the public API does not
>> > excuse the fact that this is a mistake encapsulation :)
>>
>> I agree the encapsulation isn't ideal, but unless I'm wrong, this class is
>> *not* in the public API. It is not marked as CPL_DLL exported, so on
>> Windows,
>> you should not be able to access it from the outside of the GDAL lib. On
>> Unix/Linux, as, by default (unless GDAL is configured with
>> --hide-internal-
>> symbols), all symbols are exported, you can technically use it however.
>>
>> > And apart from that, nothing prevents me to use a special driver to do
>> > specific things that are not directly provided by the public API.
>> > Currently I need to build a VRT, and the VRT driver are fine for that.
>> It's
>> > dirrectly use in the gdalbuildvrt utility for example. If the VRT
>> plugin is
>> > not safe to use, the solution is to correct it.
>>
>> There's always a trade off between exposing API and increasing maintenance
>> burden. The more API you expose, the more difficult it is to make changes
>> afterwards.
>>
>> > To read a VRT file outside from gdal I need to parse an XML file, so I
>> have
>> > to use another dependency (like xerces) to do just a small think.
>>
>> You don't need another dependency. You can use the CPL minixml API (see
>> cpl_minixml.h) that is used by the VRT driver itself for example.
>>
>> >
>> > Another argument is the VRTKernelFiltredSource. To set a kernel filtre
>> we
>> > don't have to set the attributes nKernelSize, padfKernelCoefs and
>> > bNormalized, because we can't (the attributes are protected). But the
>> API
>> > offers a setKernel that do exactly the same think that I hope the setLUT
>> > method do in the VRTComplexSource.
>>
>> If you can come with a patch, I'll consider including it, but I still
>> believe
>> you should not rely on that.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120520/1a3a358f/attachment.html
From even.rouault at mines-paris.org  Sun May 20 10:39:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 20 10:41:39 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205192011.01444.even.rouault@mines-paris.org>
	<CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>
Message-ID: <201205201639.58134.even.rouault@mines-paris.org>

Le dimanche 20 mai 2012 16:07:07, Sa?d HESSANE a ?crit :
> Hi Even,
> 
> The main goal of this proposal is to built using "gdalbuildvrt" VRT files
> containing LUT or filters.
> 
> The patch that I send allow build VRT with LUT by specifying the -lutin and
> -lutout parameters.
> Ex :
>   gdalbuildvrt -lutin "0 1 2" -lutout "4 5 6" test.vrt test.tif
> 
> We can discuss the fact that define two parameters (-lutin and -lutout) or
> just one parameter (-lut "0,4 1,5 2,6"). This is not a problem.

Ah, your patch is more extensive than what I thought (I imagined only the 
SetLUT() function to be in it).

I see that your patch changes the definition of a function in the C API 
(VRTAddComplexSource). Up to now, the GDAL C API has been set in stone. This 
might change in GDAL 2.0 though, but I'm going to start a specific thread on 
this to have global feedback from the GDAL community.

But even if we are OK to change the C API, I begin to think that this 
VRTAddComplexSource() function becomes ugly with so many parameters. Perhaps 
we should add a char** papszOptions to provide additional options without 
breaking it each time. Or I'm wondering if the C API is really the best option 
for doing such complex things, and using the C++ API wouldn't be just better.

> 
> 
> 2012/5/19 Even Rouault <even.rouault@mines-paris.org>
> 
> > Le samedi 19 mai 2012 18:58:05, Sa?d HESSANE a ?crit :
> > > Hi Even and thank you for the quick response.
> > > 
> > > You should even not consider the VRTComplexSource class to be in the
> > 
> > public
> > 
> > > > API, so the visibility of its members is not significant. And playing
> > > > with them
> > > > from the outside isn't recommanded at all.
> > > 
> > > The fact that you don't consider the class in the public API does not
> > > excuse the fact that this is a mistake encapsulation :)
> > 
> > I agree the encapsulation isn't ideal, but unless I'm wrong, this class
> > is *not* in the public API. It is not marked as CPL_DLL exported, so on
> > Windows,
> > you should not be able to access it from the outside of the GDAL lib. On
> > Unix/Linux, as, by default (unless GDAL is configured with
> > --hide-internal- symbols), all symbols are exported, you can technically
> > use it however.
> > 
> > > And apart from that, nothing prevents me to use a special driver to do
> > > specific things that are not directly provided by the public API.
> > > Currently I need to build a VRT, and the VRT driver are fine for that.
> > 
> > It's
> > 
> > > dirrectly use in the gdalbuildvrt utility for example. If the VRT
> > > plugin
> > 
> > is
> > 
> > > not safe to use, the solution is to correct it.
> > 
> > There's always a trade off between exposing API and increasing
> > maintenance burden. The more API you expose, the more difficult it is to
> > make changes afterwards.
> > 
> > > To read a VRT file outside from gdal I need to parse an XML file, so I
> > 
> > have
> > 
> > > to use another dependency (like xerces) to do just a small think.
> > 
> > You don't need another dependency. You can use the CPL minixml API (see
> > cpl_minixml.h) that is used by the VRT driver itself for example.
> > 
> > > Another argument is the VRTKernelFiltredSource. To set a kernel filtre
> > > we don't have to set the attributes nKernelSize, padfKernelCoefs and
> > > bNormalized, because we can't (the attributes are protected). But the
> > > API offers a setKernel that do exactly the same think that I hope the
> > > setLUT method do in the VRTComplexSource.
> > 
> > If you can come with a patch, I'll consider including it, but I still
> > believe
> > you should not rely on that.
From newmanw10 at gmail.com  Sun May 20 11:40:46 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sun May 20 11:41:23 2012
Subject: [gdal-dev] Java gdal.jar in mvn repo?
Message-ID: <8DAD01FB-F307-4C0F-8F54-C68322C0D142@gmail.com>

Is the java bindings jar and hopefully javadoc jar in a mvn repo somewhere?

Thanks 

Sent from my iPhone
From even.rouault at mines-paris.org  Sun May 20 13:23:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 20 13:24:32 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
Message-ID: <201205201923.08549.even.rouault@mines-paris.org>

Hi GDAL developers and users (actually, developers of other projects using 
GDAL ;-)),

This issue was raised incidently in the "[gdal-dev] VRTComplexSource with a 
LUT, proposal" thread at http://lists.osgeo.org/pipermail/gdal-dev/2012-
May/032872.html . 

I think it is good time to discuss now what we want to allow, or not, for GDAL 
2.0, as far as the C/C++ API is concerned.

---------
C API
---------

Up to now, the signature of functions added in the GDAL/OGR C API has never 
changed, once they have been added.

What should be the rule for GDAL 2.0 ?

1) do not change the signature of any function already present in the C API. 
If breaking changes are necessary, then introduce "FooEx", or "Foo2" versions 
of those functions as done in the past. The drawback of that approach is that 
the API becomes cluttered.

2) do not change the signature of any commonly used functions, but allow 
changes in marginally used functions. The definition of commonly functions 
w.r.t marginally used ones is a bit arbitrary. Looking at the symbols used by 
popular Open Source software using GDAL C API could give a clue in case of 
doubt (MapServer, QGIS, GRASS, PostGIS, or in-tree GDAL utilities using C API  
...). 

3) allow changes even in commonly used functions.

Options 2) or 3) would likely require other projects to have #if GDAL_VERSION 
>= 2000 in some places if they plan to support older GDAL versions. Unless 
they plan to update their dependency requirements when they release a newer 
version of their project (Project XX version < 1.Y depends on GDAL < 2.0. 
Version >= 1.Y depends on GDAL >= 2.0).

-------------
C++ API
-------------

As far as the C++ API is concerned, the policy up to now was that minor 
changes between GDAL 1.X version and GDAL 1.(X+1) were OK. Generally, the 
changes have been the addition of new optional arguments, that only required 
recompilation to solve the change of ABI, but did not require code changes.

For GDAL 2.0, I believe that most major changes could occur, especially if the 
OGR "grand unification" occurs, but for now, I don't know the impact that that 
might cause.

-------------------------------------------------
Syntax of command line utilities
-------------------------------------------------

A bit out of topic, since it is about UI and not API. But a lot of scripts in 
the wild call popular GDAL command line utilities. Changes in their syntax 
would cause potentially more headaches, given the larger number of users 
w.r.t. developers using GDAL ;-) The page at 
http://trac.osgeo.org/gdal/wiki/GDAL20Changes lists a few changes that have 
been proposed (just as a reminder : nothing listed there is officially vetted).

The same question also arise with the API of the various bindings languages.

Feedback welcome !

Best regards,

Even

From saad.hessane at gmail.com  Sun May 20 18:11:53 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sun May 20 18:12:22 2012
Subject: [gdal-dev] VRTComplexSource with a LUT, proposal
In-Reply-To: <201205201639.58134.even.rouault@mines-paris.org>
References: <CAEcp1tDWC6BB2uxPcEWgBaVX5+GCHRK3_zxwySBSu9TAgKV95g@mail.gmail.com>
	<201205192011.01444.even.rouault@mines-paris.org>
	<CAEcp1tBMj5e2_a-jeYM-Vsh7N5_QwSj9+NV9tfcmt0uj8ODmsQ@mail.gmail.com>
	<201205201639.58134.even.rouault@mines-paris.org>
Message-ID: <CAEcp1tAKom1FVwgEcLXU5f_mFfe=QopB+vB0VXk15AQ4p2jMpQ@mail.gmail.com>

Hi,

I see that your patch changes the definition of a function in the C API
> (VRTAddComplexSource). Up to now, the GDAL C API has been set in stone.
> This
> might change in GDAL 2.0 though, but I'm going to start a specific thread
> on
> this to have global feedback from the GDAL community.

Yes, I understand. I hesitated a bit before changing the public interface
but I had no choice except to add another function with another name and
the same argument ...

But even if we are OK to change the C API, I begin to think that this
> VRTAddComplexSource() function becomes ugly with so many parameters.
> Perhaps
> we should add a char** papszOptions to provide additional options without
> breaking it each time. Or I'm wondering if the C API is really the best
> option
> for doing such complex things, and using the C++ API wouldn't be just
> better.

I agree to change the VRTAddComplexSource() function to make it more
simple. If you use C++ to do it, I think a decorator pattern can be useful
to add fonctionnality to a VRT dataset.

But as I say, the main goal is to build VRT with LUT and filter. Maybe you
can envisage it for the gdal 2.0 release?

Cheers.



2012/5/20 Even Rouault <even.rouault@mines-paris.org>

> Le dimanche 20 mai 2012 16:07:07, Sa?d HESSANE a ?crit :
> > Hi Even,
> >
> > The main goal of this proposal is to built using "gdalbuildvrt" VRT files
> > containing LUT or filters.
> >
> > The patch that I send allow build VRT with LUT by specifying the -lutin
> and
> > -lutout parameters.
> > Ex :
> >   gdalbuildvrt -lutin "0 1 2" -lutout "4 5 6" test.vrt test.tif
> >
> > We can discuss the fact that define two parameters (-lutin and -lutout)
> or
> > just one parameter (-lut "0,4 1,5 2,6"). This is not a problem.
>
> Ah, your patch is more extensive than what I thought (I imagined only the
> SetLUT() function to be in it).
>
> I see that your patch changes the definition of a function in the C API
> (VRTAddComplexSource). Up to now, the GDAL C API has been set in stone.
> This
> might change in GDAL 2.0 though, but I'm going to start a specific thread
> on
> this to have global feedback from the GDAL community.
>
> But even if we are OK to change the C API, I begin to think that this
> VRTAddComplexSource() function becomes ugly with so many parameters.
> Perhaps
> we should add a char** papszOptions to provide additional options without
> breaking it each time. Or I'm wondering if the C API is really the best
> option
> for doing such complex things, and using the C++ API wouldn't be just
> better.
>
> >
> >
> > 2012/5/19 Even Rouault <even.rouault@mines-paris.org>
> >
> > > Le samedi 19 mai 2012 18:58:05, Sa?d HESSANE a ?crit :
> > > > Hi Even and thank you for the quick response.
> > > >
> > > > You should even not consider the VRTComplexSource class to be in the
> > >
> > > public
> > >
> > > > > API, so the visibility of its members is not significant. And
> playing
> > > > > with them
> > > > > from the outside isn't recommanded at all.
> > > >
> > > > The fact that you don't consider the class in the public API does not
> > > > excuse the fact that this is a mistake encapsulation :)
> > >
> > > I agree the encapsulation isn't ideal, but unless I'm wrong, this class
> > > is *not* in the public API. It is not marked as CPL_DLL exported, so on
> > > Windows,
> > > you should not be able to access it from the outside of the GDAL lib.
> On
> > > Unix/Linux, as, by default (unless GDAL is configured with
> > > --hide-internal- symbols), all symbols are exported, you can
> technically
> > > use it however.
> > >
> > > > And apart from that, nothing prevents me to use a special driver to
> do
> > > > specific things that are not directly provided by the public API.
> > > > Currently I need to build a VRT, and the VRT driver are fine for
> that.
> > >
> > > It's
> > >
> > > > dirrectly use in the gdalbuildvrt utility for example. If the VRT
> > > > plugin
> > >
> > > is
> > >
> > > > not safe to use, the solution is to correct it.
> > >
> > > There's always a trade off between exposing API and increasing
> > > maintenance burden. The more API you expose, the more difficult it is
> to
> > > make changes afterwards.
> > >
> > > > To read a VRT file outside from gdal I need to parse an XML file, so
> I
> > >
> > > have
> > >
> > > > to use another dependency (like xerces) to do just a small think.
> > >
> > > You don't need another dependency. You can use the CPL minixml API (see
> > > cpl_minixml.h) that is used by the VRT driver itself for example.
> > >
> > > > Another argument is the VRTKernelFiltredSource. To set a kernel
> filtre
> > > > we don't have to set the attributes nKernelSize, padfKernelCoefs and
> > > > bNormalized, because we can't (the attributes are protected). But the
> > > > API offers a setKernel that do exactly the same think that I hope the
> > > > setLUT method do in the VRTComplexSource.
> > >
> > > If you can come with a patch, I'll consider including it, but I still
> > > believe
> > > you should not rely on that.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120521/8f70f06d/attachment.html
From polimax at mail.ru  Mon May 21 03:06:42 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon May 21 03:07:32 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <201205201923.08549.even.rouault@mines-paris.org>
References: <201205201923.08549.even.rouault@mines-paris.org>
Message-ID: <4FB9E982.6010104@mail.ru>

Hi Even,
20.05.2012 21:23, Even Rouault ???????:
> Hi GDAL developers and users (actually, developers of other projects using
> GDAL ;-)),
>
> This issue was raised incidently in the "[gdal-dev] VRTComplexSource with a
> LUT, proposal" thread at http://lists.osgeo.org/pipermail/gdal-dev/2012-
> May/032872.html .
>
> I think it is good time to discuss now what we want to allow, or not, for GDAL
> 2.0, as far as the C/C++ API is concerned.
>
> ---------
> C API
> ---------
>
> Up to now, the signature of functions added in the GDAL/OGR C API has never
> changed, once they have been added.
>
> What should be the rule for GDAL 2.0 ?
>
> 1) do not change the signature of any function already present in the C API.
> If breaking changes are necessary, then introduce "FooEx", or "Foo2" versions
> of those functions as done in the past. The drawback of that approach is that
> the API becomes cluttered.
>
> 2) do not change the signature of any commonly used functions, but allow
> changes in marginally used functions. The definition of commonly functions
> w.r.t marginally used ones is a bit arbitrary. Looking at the symbols used by
> popular Open Source software using GDAL C API could give a clue in case of
> doubt (MapServer, QGIS, GRASS, PostGIS, or in-tree GDAL utilities using C API
> ...).
>
> 3) allow changes even in commonly used functions.
I think that the option of three is good enough, but we must try to keep 
close second option.
>
> Options 2) or 3) would likely require other projects to have #if GDAL_VERSION
>> = 2000 in some places if they plan to support older GDAL versions. Unless
> they plan to update their dependency requirements when they release a newer
> version of their project (Project XX version<  1.Y depends on GDAL<  2.0.
> Version>= 1.Y depends on GDAL>= 2.0).
>
> -------------
> C++ API
> -------------
>
> As far as the C++ API is concerned, the policy up to now was that minor
> changes between GDAL 1.X version and GDAL 1.(X+1) were OK. Generally, the
> changes have been the addition of new optional arguments, that only required
> recompilation to solve the change of ABI, but did not require code changes.
>
> For GDAL 2.0, I believe that most major changes could occur, especially if the
> OGR "grand unification" occurs, but for now, I don't know the impact that that
> might cause.
I think gdal 2.0 could provide new capabilities in prejudice of backward 
compatibility. But it should depend of new features and their costs.
>
> -------------------------------------------------
> Syntax of command line utilities
> -------------------------------------------------
>
> A bit out of topic, since it is about UI and not API. But a lot of scripts in
> the wild call popular GDAL command line utilities. Changes in their syntax
> would cause potentially more headaches, given the larger number of users
> w.r.t. developers using GDAL ;-) The page at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes lists a few changes that have
> been proposed (just as a reminder : nothing listed there is officially vetted).
>
> The same question also arise with the API of the various bindings languages.
>
> Feedback welcome !
>
> Best regards,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Best regards,
Dmitry
From p.halls at york.ac.uk  Mon May 21 03:31:33 2012
From: p.halls at york.ac.uk (Peter Halls)
Date: Mon May 21 03:32:06 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <201205201923.08549.even.rouault@mines-paris.org>
References: <201205201923.08549.even.rouault@mines-paris.org>
Message-ID: <CADEnnOOdv3z9VZVus7RHfO3DGt+t2Sd=WPDZ+DoLKcr8t6iF3A@mail.gmail.com>

As a programmer using GDAL/OGR, I do not think I mind if there are API
changes at major releases - especially, as with GDAL, where these are
infrequent - but might be annoyed during point releases.  It is reasonable
to expect major new features and rationalisation at major releases, so the
burden of having to edit code is acceptable.  Obviously, if there are no
changes, that is great ... but then it would hardly classify as a major
release.

For my part, I have an interface library to edit - rather like a language
binding for Java or Python, so I have probably only one place that will
need work.

It says a great deal for the original design of GDAL/OGR that this
discussion is only happening now, after several years and many point
releases.  Thank you, Frank.

Peter

On 20 May 2012 18:23, Even Rouault <even.rouault@mines-paris.org> wrote:

> Hi GDAL developers and users (actually, developers of other projects using
> GDAL ;-)),
>
> This issue was raised incidently in the "[gdal-dev] VRTComplexSource with a
> LUT, proposal" thread at http://lists.osgeo.org/pipermail/gdal-dev/2012-
> May/032872.html .
>
> I think it is good time to discuss now what we want to allow, or not, for
> GDAL
> 2.0, as far as the C/C++ API is concerned.
>
> ---------
> C API
> ---------
>
> Up to now, the signature of functions added in the GDAL/OGR C API has never
> changed, once they have been added.
>
> What should be the rule for GDAL 2.0 ?
>
> 1) do not change the signature of any function already present in the C
> API.
> If breaking changes are necessary, then introduce "FooEx", or "Foo2"
> versions
> of those functions as done in the past. The drawback of that approach is
> that
> the API becomes cluttered.
>
> 2) do not change the signature of any commonly used functions, but allow
> changes in marginally used functions. The definition of commonly functions
> w.r.t marginally used ones is a bit arbitrary. Looking at the symbols used
> by
> popular Open Source software using GDAL C API could give a clue in case of
> doubt (MapServer, QGIS, GRASS, PostGIS, or in-tree GDAL utilities using C
> API
> ...).
>
> 3) allow changes even in commonly used functions.
>
> Options 2) or 3) would likely require other projects to have #if
> GDAL_VERSION
> >= 2000 in some places if they plan to support older GDAL versions. Unless
> they plan to update their dependency requirements when they release a newer
> version of their project (Project XX version < 1.Y depends on GDAL < 2.0.
> Version >= 1.Y depends on GDAL >= 2.0).
>
> -------------
> C++ API
> -------------
>
> As far as the C++ API is concerned, the policy up to now was that minor
> changes between GDAL 1.X version and GDAL 1.(X+1) were OK. Generally, the
> changes have been the addition of new optional arguments, that only
> required
> recompilation to solve the change of ABI, but did not require code changes.
>
> For GDAL 2.0, I believe that most major changes could occur, especially if
> the
> OGR "grand unification" occurs, but for now, I don't know the impact that
> that
> might cause.
>
> -------------------------------------------------
> Syntax of command line utilities
> -------------------------------------------------
>
> A bit out of topic, since it is about UI and not API. But a lot of scripts
> in
> the wild call popular GDAL command line utilities. Changes in their syntax
> would cause potentially more headaches, given the larger number of users
> w.r.t. developers using GDAL ;-) The page at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes lists a few changes that
> have
> been proposed (just as a reminder : nothing listed there is officially
> vetted).
>
> The same question also arise with the API of the various bindings
> languages.
>
> Feedback welcome !
>
> Best regards,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120521/49ea8423/attachment-0001.html
From hobu.inc at gmail.com  Mon May 21 10:06:06 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon May 21 10:06:33 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <201205201923.08549.even.rouault@mines-paris.org>
References: <201205201923.08549.even.rouault@mines-paris.org>
Message-ID: <13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>


On May 20, 2012, at 12:23 PM, Even Rouault wrote:
> Up to now, the signature of functions added in the GDAL/OGR C API has never 
> changed, once they have been added.

This fact has at once been GDAL's strongest strength and its greatest weakness. GDAL's ability to innovate has been hampered by the fact that we seem to be contractually obligated to our users to never change the C API once we publish new methods. On the contrary, GDAL's ease of integration and ongoing inclusion in both proprietary and open source projects is predicated on the fact that once users implement GDAL's API, they practically never have to touch their code that interacts with GDAL ever again.

A gold-plated GDAL 2.0 exists as something for us the developers, at least as it appears right now, to marvel at rather than provide real world improvements in functionality. We want cleaner and more coherent internal APIs, cleaner abstractions, a unified GDAL/OGR driver interface, and so on. None of these would seem to impact what users of GDAL who've implemented the software in their own projects are doing Right Now. As such, our 2.0 developments should take care not to break things for these users, but the question is how to do it.

Our contract has been with the C API users, not the C++ ones, and accordingly, I think we have carte blanche permission to do whatever we want with the C++ API.  I for one hope this includes organizing our include file and installation layout. For the C API, however, I think we should "fork" the old C API from a new one, and leave the old one alone to the extent that we can. Maybe this means changing its include path and requiring some sort of version-dependent #ifdef for users to point to the new location for 2.0 support, but I hope the changes implementers would have to make would be limited to that. It's not as if GDAL/OGR's internals are going to change so much in 2.0 that the existing C API facade, imperfect as it is, is unable to be continued.  

I agree that this strategy is development burden on us, but it also provides us benefits in the form of allowing us to gradually migrate things like the command-line utilities and SWIG bindings from the old C API to a/the new C API. We eat our own dogfood and incur the implementation problems of a new API ourselves as we update utilities. As development continues, we should not add new functionality to the old C API.  Users should be required to update their codebases to use GDAL 2.0 if they want new functionality (presumably this is mostly related to OGR).

Using the analogy of a house remodel, how far are we planning to take GDAL 2.0? Strip the internals down to the studs, re-plumb and re-wire everything, and build it back up? Slap another layer of shingles on the roof and caulk the holes where it's leaking and leave it at that?  

> -------------------------------------------------
> Syntax of command line utilities
> -------------------------------------------------

I'd like to see some normalization of the arguments, arrangement, and help for the utilities. I'm also unsure how to do so without disrupting everyone.

Howard
From mateusz at loskot.net  Mon May 21 10:15:53 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon May 21 10:16:18 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
References: <201205201923.08549.even.rouault@mines-paris.org>
	<13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
Message-ID: <CABUeae8--8_tR5NJdNys0wu6xB+Q-PDwye9+w+Wq-zucymDuJw@mail.gmail.com>

On 21 May 2012 15:06, Howard Butler <hobu.inc@gmail.com> wrote:
> Our contract has been with the C API users, not the C++ ones, and accordingly, I think we have carte blanche permission to do whatever we want with the C++ API. ?I for one hope this includes organizing our include file and installation layout. For the C API, however, I think we should "fork" the old C API from a new one, and leave the old one alone to the extent that we can.

+1

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From James.Farrell at delorme.com  Mon May 21 10:41:37 2012
From: James.Farrell at delorme.com (James Farrell)
Date: Mon May 21 10:57:23 2012
Subject: SV: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
Message-ID: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>

Not sure I'm doing this correctly, I don't see how to respond to a particular thread in this forum...

I'm wrestling with the same problem as the thread in the subject line:
error LNK2019: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const "

GDAL itself builds perfectly when I build according to the instructions.  Then I attempt to build one of our projects that uses cpl_string.h and .cpp, and when I attempt to link I get the above error.

I've looked at cpl_string.h and found a class declaration for CPLStringList that was not there in the previous version we used (we skipped a few versions).  Within the class declaration is
...
  public:
    CPLStringList();
    CPLStringList( char **papszList, int bTakeOwnership=TRUE );
    CPLStringList( const CPLStringList& oOther );
    ~CPLStringList();

    CPLStringList &Clear();

    int    size() const { return Count(); }
    int    Count() const;
...

I cannot find a definition for Count() anywhere.

We are not using CPLStringList in our code, but there is other code within GDAL that uses it.  Are we supposed to make our own Count() function?  Where is this supposed to live?

Thanks
James Farrell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120521/445ea0d7/attachment.html
From mateusz at loskot.net  Mon May 21 11:09:49 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon May 21 11:10:48 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>
References: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>
Message-ID: <CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>

On 21 May 2012 15:41, James Farrell <James.Farrell@delorme.com> wrote:
> I cannot find a definition for Count() anywhere.
>
> We are not using CPLStringList in our code, but there is other code within
> GDAL that uses it.? Are we supposed to make our own Count() function?? Where
> is this supposed to live?

Look at port/cplstringlist.cpp

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mateusz at loskot.net  Mon May 21 11:30:22 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon May 21 11:31:31 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>
References: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>
	<CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>
	<00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>
Message-ID: <CABUeae8FF80z4wLdyvJ9ZeKuBHiADLXVSha9wO+MN7gzoaPmMg@mail.gmail.com>

On 21 May 2012 16:23, James Farrell <James.Farrell@delorme.com> wrote:
> Thanks, Mateusz
> I see the source code now. ?I'm linking against gdal.lib.
> Shouldn't CPLStringLists's functions be in that library?
> Did I somehow build it incorrectly?

CPLStringLists is exported function.
AFAIK, it should be visible without any extra steps.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From James.Farrell at delorme.com  Mon May 21 11:23:05 2012
From: James.Farrell at delorme.com (James Farrell)
Date: Mon May 21 11:38:51 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>
References: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>
	<CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>
Message-ID: <00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>

Thanks, Mateusz
I see the source code now.  I'm linking against gdal.lib.  Shouldn't CPLStringLists's functions be in that library?  Did I somehow build it incorrectly?

Thanks again!
James

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
Sent: Monday, May 21, 2012 11:10 AM
To: James Farrell
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

On 21 May 2012 15:41, James Farrell <James.Farrell@delorme.com> wrote:
> I cannot find a definition for Count() anywhere.
>
> We are not using CPLStringList in our code, but there is other code 
> within GDAL that uses it.? Are we supposed to make our own Count() 
> function?? Where is this supposed to live?

Look at port/cplstringlist.cpp

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From James.Farrell at delorme.com  Mon May 21 11:37:45 2012
From: James.Farrell at delorme.com (James Farrell)
Date: Mon May 21 11:53:22 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <CABUeae8FF80z4wLdyvJ9ZeKuBHiADLXVSha9wO+MN7gzoaPmMg@mail.gmail.com>
References: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>
	<CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>
	<00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>
	<CABUeae8FF80z4wLdyvJ9ZeKuBHiADLXVSha9wO+MN7gzoaPmMg@mail.gmail.com>
Message-ID: <00201378DC841F4CB6645347261580410161CBA6@POSTAL.earth.delorme.com>

Oops
This company (to which I am new) keeps multiple copies of the library in multiple folders.  I rather assumed we were linking against the ones in the gdal folder, but I was wrong.  Needed to update the library in a different folder and it worked.

Thanks for your help
James

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Monday, May 21, 2012 11:30 AM
To: James Farrell
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

On 21 May 2012 16:23, James Farrell <James.Farrell@delorme.com> wrote:
> Thanks, Mateusz
> I see the source code now. ?I'm linking against gdal.lib.
> Shouldn't CPLStringLists's functions be in that library?
> Did I somehow build it incorrectly?

CPLStringLists is exported function.
AFAIK, it should be visible without any extra steps.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From hrz at geodata.soton.ac.uk  Mon May 21 11:47:30 2012
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon May 21 12:00:54 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
References: <201205201923.08549.even.rouault@mines-paris.org>
	<13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
Message-ID: <20120521154730.GA6535@sarah.geodata.soton.ac.uk>

On Mon, May 21, 2012 at 09:06:06AM -0500, Howard Butler wrote:
> 
> On May 20, 2012, at 12:23 PM, Even Rouault wrote:
> > -------------------------------------------------
> > Syntax of command line utilities
> > -------------------------------------------------
> 
> I'd like to see some normalization of the arguments, arrangement, and help for the utilities. I'm also unsure how to do so without disrupting everyone.

I'd also love to see some normalisation of the utilities' help, naming
and calling conventions. In an ideal world (!) I think the git and svn
commands provide a great pattern of use: one 'master' executable
providing access to various 'subcommands'. For GDAL this might be
along these lines:

  /usr/bin/gdal_translate -of JPEG src.tiff dst.jpg
  -->
  /usr/bin/gdal translate -of JPEG src.tiff dst.jpg

  /usr/bin/gdalwarp -t_srs '+proj=utm +zone=11 +datum=WGS84' raw_spot.tif utm11.tif
  -->
  /usr/bin/gdal warp -t_srs '+proj=utm +zone=11 +datum=WGS84' raw_spot.tif utm11.tif

The advantage here is that there is a unified hierarchical commandline
interface to all the gdal functionality which is also extensible in
terms of adding new commands and options.

The 'gdal' master executable could also accept options that are
globally applicable to all subcommands e.g.:

  /usr/bin/gdal -quiet subcommand -options

It looks like GNU `argp_parse` could help build such an interface, or
at least provide a reference:
http://www.gnu.org/software/libc/manual/html_node/Argp.html#Argp

Using this paradigm there might need to be a separate `gdal.py` along
similar lines to a binary `/usr/bin/gdal` in order to take care of the
python based utilities. The `argparse` module could be helpful here:
http://pypi.python.org/pypi/argparse

In terms of implementing this with minimal disruption the above could
be something as simple as a wrapper to existing utilities, easing the
migration for users and developers alike.

Alternatively the existing utilities could be 'frozen' whilst new
development takes place within new utilities (whichever new naming
convention is chosen). A configure option (--disable-gdal1?) could
determine whether the gdal1 utilities are installed on the system.

Best regards,

Homme

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

From chapmanm at pixia.com  Mon May 21 14:01:09 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon May 21 14:09:09 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>
References: <00201378DC841F4CB6645347261580410161CB75@POSTAL.earth.delorme.com>	<CABUeae9+Mxy2Z-ZxNwx9SNh2fVJMG7dmbbOEcryMFOgjD5V-Ew@mail.gmail.com>
	<00201378DC841F4CB6645347261580410161CB92@POSTAL.earth.delorme.com>
Message-ID: <95ba5ae1.00000c40.0000001b@CHAPMANM7S>

You should be linking against gdal_i.lib.

Marty

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org 
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of James Farrell
Sent: Monday, May 21, 2012 9:23 AM
To: Mateusz Loskot
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

Thanks, Mateusz
I see the source code now.  I'm linking against gdal.lib.  Shouldn't 
CPLStringLists's functions be in that library?  Did I somehow build it 
incorrectly?

Thanks again!
James

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org 
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
Sent: Monday, May 21, 2012 11:10 AM
To: James Farrell
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

On 21 May 2012 15:41, James Farrell <James.Farrell@delorme.com> wrote:
> I cannot find a definition for Count() anywhere.
>
> We are not using CPLStringList in our code, but there is other code
> within GDAL that uses it.  Are we supposed to make our own Count()
> function?  Where is this supposed to live?

Look at port/cplstringlist.cpp

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net 
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon May 21 15:50:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon May 21 15:51:57 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
References: <201205201923.08549.even.rouault@mines-paris.org>
	<13EE76BE-1D9D-4FE3-903B-6CD3F72ECD29@gmail.com>
Message-ID: <201205212150.04482.even.rouault@mines-paris.org>

> 
> A gold-plated GDAL 2.0 exists as something for us the developers, at least
> as it appears right now, to marvel at rather than provide real world
> improvements in functionality.

I think that the justification of the 2.0 in GDAL 2.0 should be mostly drived 
by the need of implementing new real world functionnality that cannot be 
solved with GDAL 1.X. Personnaly, I think that the reorganization of header 
files, const-correctness changes, or other changes only justified to make things 
look cleaner internally are bonus, but should not be the main motivation.

> We want cleaner and more coherent internal
> APIs, cleaner abstractions, a unified GDAL/OGR driver interface, and so
> on. None of these would seem to impact what users of GDAL who've
> implemented the software in their own projects are doing Right Now. As
> such, our 2.0 developments should take care not to break things for these
> users, but the question is how to do it.
> 
> Our contract has been with the C API users, not the C++ ones, and
> accordingly, I think we have carte blanche permission to do whatever we
> want with the C++ API.  I for one hope this includes organizing our
> include file and installation layout. For the C API, however, I think we
> should "fork" the old C API from a new one, and leave the old one alone to
> the extent that we can. Maybe this means changing its include path and
> requiring some sort of version-dependent #ifdef for users to point to the
> new location for 2.0 support, but I hope the changes implementers would
> have to make would be limited to that. It's not as if GDAL/OGR's internals
> are going to change so much in 2.0 that the existing C API facade,
> imperfect as it is, is unable to be continued.

Yes I agree that there's no reason to ditch out the existing C API. I'm not 
sure to understand how you would see the 2 API coexisting though. Would that 
be 2 libraries (like a libgdal1capi.so with its own include files and 
libgdal2capi.so with its own include files, that would both link to a 
libgdalc++.so) ?

> 
> I agree that this strategy is development burden on us, but it also
> provides us benefits in the form of allowing us to gradually migrate
> things like the command-line utilities and SWIG bindings from the old C
> API to a/the new C API. We eat our own dogfood and incur the
> implementation problems of a new API ourselves as we update utilities. As
> development continues, we should not add new functionality to the old C
> API.  Users should be required to update their codebases to use GDAL 2.0
> if they want new functionality (presumably this is mostly related to OGR).
> 
> Using the analogy of a house remodel, how far are we planning to take GDAL
> 2.0? Strip the internals down to the studs, re-plumb and re-wire
> everything, and build it back up? Slap another layer of shingles on the
> roof and caulk the holes where it's leaking and leave it at that?

The reason for initiating this discussion was to know which constraints we 
should impose on yourselves, a priori. It does not imply that major breaking 
changes will actually occur (at that time, I have no idea of what they could 
be anyway). I'm not sure there's the manpower and/or justification to make 
breaking changes happen. Let be realistic : given the large numbers of 
existing drivers, changing even internal interfaces might have prohibitive 
costs that can refrain enthousiasm.


Thinking out loud (half-convinced myself, but oh well, I take the risk to 
share even half-baked ideas) :

Looking at http://trac.osgeo.org/gdal/wiki/GDAL20Changes , I'm also wondering 
if 2.0 should not be the time to anticipate for later possible evolutions, and 
do the change in the API that would be needed, but not actually implement them 
if time does not permit it. For example, add progress callback arguments in 
some places, or add char** papszOptions as a provision for later extensions, 
or extend OGRField structure to add sub-second accuarcy (well, a wiser 
decision might be to just hide this structure from the public API !), or 
increase to 64bit data types some parameters. Or, for example, for  
http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64, just do the API evolutions even 
if no drivers actually use them yet (but that's going to be frustrating !)

RFC31 is an interesting case actually when thinking again about the above idea 
of 2 versionso of the C API, one of them being the compatibility layer for 
GDAL 1. If we add a OFTInteger64 data type, even users of the old C API could 
have to deal with that data type as soon as drivers will use them. But not 
having any of the new API to deal with that 64bit data type, they will be 
stuck.

Best regards,

Even
From warmerdam at pobox.com  Mon May 21 22:30:47 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 21 22:30:54 2012
Subject: [gdal-dev] Policy for C/C++ API for GDAL 2.0 ?
In-Reply-To: <201205201923.08549.even.rouault@mines-paris.org>
References: <201205201923.08549.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBfGnbcrPf9xUYBYNwnYGvbzCsgUHrA6+m=idi0s=V_S5w@mail.gmail.com>

On Sun, May 20, 2012 at 10:23 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> I think it is good time to discuss now what we want to allow, or not, for GDAL
> 2.0, as far as the C/C++ API is concerned.

Even,

My brief thoughts are:

 * My objectives for GDAL/OGR 2.0 primarily revolve around
restructuring OGR to be close alignment with the GDAL API.  That means
moving to a unified driver model, and GDAL style creation option and
capabilities mechanisms.  I want to end up with a GDALDataset that can
have vector layers as well as bands.

 * To that end, I imagine non-trivial changes in the OGRDriver,
OGRDataSource and OGRLayer classes which will non-trivially their API.
 OGRFeature and OGRGeometry will hopefully not be very adversely
affected.

 * My goal then is to minimize disruption in the GDAL C++ API, and C
API with the C API hopefully being nearly entirely backward compatible
while the OGR C++ and C API will be signifcantly disrupted though I'm
hoping via some aliasing mechanisms we might be able to provide some
amount of compatability.

 * I hadn't considered big changes in the utilities myself but if ever
it was to be done now would be the time.

Best regards,
Frank

>
> ---------
> C API
> ---------
>
> Up to now, the signature of functions added in the GDAL/OGR C API has never
> changed, once they have been added.
>
> What should be the rule for GDAL 2.0 ?
>
> 1) do not change the signature of any function already present in the C API.
> If breaking changes are necessary, then introduce "FooEx", or "Foo2" versions
> of those functions as done in the past. The drawback of that approach is that
> the API becomes cluttered.
>
> 2) do not change the signature of any commonly used functions, but allow
> changes in marginally used functions. The definition of commonly functions
> w.r.t marginally used ones is a bit arbitrary. Looking at the symbols used by
> popular Open Source software using GDAL C API could give a clue in case of
> doubt (MapServer, QGIS, GRASS, PostGIS, or in-tree GDAL utilities using C API
> ...).
>
> 3) allow changes even in commonly used functions.
>
> Options 2) or 3) would likely require other projects to have #if GDAL_VERSION
>>= 2000 in some places if they plan to support older GDAL versions. Unless
> they plan to update their dependency requirements when they release a newer
> version of their project (Project XX version < 1.Y depends on GDAL < 2.0.
> Version >= 1.Y depends on GDAL >= 2.0).
>
> -------------
> C++ API
> -------------
>
> As far as the C++ API is concerned, the policy up to now was that minor
> changes between GDAL 1.X version and GDAL 1.(X+1) were OK. Generally, the
> changes have been the addition of new optional arguments, that only required
> recompilation to solve the change of ABI, but did not require code changes.
>
> For GDAL 2.0, I believe that most major changes could occur, especially if the
> OGR "grand unification" occurs, but for now, I don't know the impact that that
> might cause.
>
> -------------------------------------------------
> Syntax of command line utilities
> -------------------------------------------------
>
> A bit out of topic, since it is about UI and not API. But a lot of scripts in
> the wild call popular GDAL command line utilities. Changes in their syntax
> would cause potentially more headaches, given the larger number of users
> w.r.t. developers using GDAL ;-) The page at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes lists a few changes that have
> been proposed (just as a reminder : nothing listed there is officially vetted).
>
> The same question also arise with the API of the various bindings languages.
>
> Feedback welcome !
>
> Best regards,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ivan.lucena at princeton-ma.us  Tue May 22 06:11:47 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue May 22 06:12:10 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUG9saWN5IGZvciBDL0MrKyBBUEkgZm9yIEdEQUwgMi4wID8=?=
In-Reply-To: <CA+YzLBfGnbcrPf9xUYBYNwnYGvbzCsgUHrA6+m=idi0s=V_S5w@mail.gmail.com>
References: <201205201923.08549.even.rouault@mines-paris.org>
	<CA+YzLBfGnbcrPf9xUYBYNwnYGvbzCsgUHrA6+m=idi0s=V_S5w@mail.gmail.com>
Message-ID: <20120522101147.17325.qmail@s466.sureserver.com>

Frank,

>  My brief thoughts are:
>  
>  * My objectives for GDAL/OGR 2.0 primarily revolve around
>  restructuring OGR to be close alignment with the GDAL API.??That means
>  moving to a unified driver model, and GDAL style creation option and
>  capabilities mechanisms.??I want to end up with a GDALDataset that can
>  have vector layers as well as bands.
>  . . .
>  * I hadn't considered big changes in the utilities myself but if ever
>  it was to be done now would be the time.

By integrating GDAL/OGR drivers into GDALDataset, I would imagine that we are going to be able to do things like 
using *gdalinfo* on a shapefile, for example. That could represent some changes in command line utilities.

Regards,

Ivan


From diregola at gmail.com  Tue May 22 15:01:26 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Tue May 22 15:01:40 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
Message-ID: <CABa=8QocnTqNr9PJiF3ZqfhxYKLz4cqQ+_3bzTv2PR2V7PxSag@mail.gmail.com>

Hi folks,

looks like this bug ticket [1] finds its roots into the gdal code. From a
discussion [2] in the gfoss.it [3] ML (the italian OSGeo local chapter)
emerged that gdal 1.8.0 introduced a further option named
OVERRIDE_PROJ_DATUM_WITH_TOWGS84, allowing to replace the +datum definition
with a corresponding +towgs84.
Such option is not supposed to be the default behavior when generating the
standard EPSG file for Proj4:

epsg_tr.py --config OVERRIDE_PROJ_DATUM_WITH_TOWGS84 FALSE -proj4 -skip
-list gcs.csv > epsg

Anyway, from direct testing emerged that setting the above mentioned option
to YES, NO, TRUE or FALSE has absolutely no effect at all; the +datum
definitions are unconditionally overwritten by +towgs84 in all cases. And,
accordindgly to this, the EPSG file distributed by the most recent Proj4
4.8.0 introduces many unexpected changes (e.g. affecting the Italian Rome
1940 SRS), thus causing many troubles due to this abrupt compatibility
break.

Could anyone please verify that, and, in case, I'll open a ticket.
Thanks!

madi


[1] http://trac.osgeo.org/proj/ticket/122
[2] http://lists.gfoss.it/pipermail/gfoss/2012-May/023071.html
[3] www.gfoss.it


-- 
Ing. Margherita Di Leo, Ph.D.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120522/13a31355/attachment.html
From even.rouault at mines-paris.org  Tue May 22 15:25:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue May 22 15:27:30 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CABa=8QocnTqNr9PJiF3ZqfhxYKLz4cqQ+_3bzTv2PR2V7PxSag@mail.gmail.com>
References: <CABa=8QocnTqNr9PJiF3ZqfhxYKLz4cqQ+_3bzTv2PR2V7PxSag@mail.gmail.com>
Message-ID: <201205222125.28037.even.rouault@mines-paris.org>

Le mardi 22 mai 2012 21:01:26, Margherita Di Leo a ?crit :
> Hi folks,
> 
> looks like this bug ticket [1] finds its roots into the gdal code. From a
> discussion [2] in the gfoss.it [3] ML (the italian OSGeo local chapter)
> emerged that gdal 1.8.0 introduced a further option named
> OVERRIDE_PROJ_DATUM_WITH_TOWGS84, allowing to replace the +datum definition
> with a corresponding +towgs84.
> Such option is not supposed to be the default behavior when generating the
> standard EPSG file for Proj4:
> 
> epsg_tr.py --config OVERRIDE_PROJ_DATUM_WITH_TOWGS84 FALSE -proj4 -skip
> -list gcs.csv > epsg
> 
> Anyway, from direct testing emerged that setting the above mentioned option
> to YES, NO, TRUE or FALSE has absolutely no effect at all; the +datum
> definitions are unconditionally overwritten by +towgs84 in all cases. And,
> accordindgly to this, the EPSG file distributed by the most recent Proj4
> 4.8.0 introduces many unexpected changes (e.g. affecting the Italian Rome
> 1940 SRS), thus causing many troubles due to this abrupt compatibility
> break.

 --config OVERRIDE_PROJ_DATUM_WITH_TOWGS84 FALSE definitely works. I've just 
verified it, and I see that the epsg file delivered with proj 4.8.0 takes into 
account http://trac.osgeo.org/proj/changeset/2172 . The effect of that is just 
to avoid expanding +datum definitions.

Your issue with EPSG:3003 is of a different kind, and related to another change 
where the new logic now peaks up the EPSG preferred transformation whereas it 
didn't before. I think this is related to 
http://trac.osgeo.org/geotiff/changeset/1819/ and 
http://trac.osgeo.org/geotiff/changeset/1829/

> 
> Could anyone please verify that, and, in case, I'll open a ticket.
> Thanks!
> 
> madi
> 
> 
> [1] http://trac.osgeo.org/proj/ticket/122
> [2] http://lists.gfoss.it/pipermail/gfoss/2012-May/023071.html
> [3] www.gfoss.it
From jmckenna at gatewaygeomatics.com  Tue May 22 16:25:06 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue May 22 16:32:07 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.1RC2 to Final Release
In-Reply-To: <CACALY+Su+B=n0=Fx8GdXWP4WAR4go_epxQ50Y03c5Zg+5GC5gQ@mail.gmail.com>
References: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
	<CACALY+Su+B=n0=Fx8GdXWP4WAR4go_epxQ50Y03c5Zg+5GC5gQ@mail.gmail.com>
Message-ID: <4FBBF622.7020209@gatewaygeomatics.com>

Did this motion pass?  I notice that the 1.9.1 news page does not exist
on trac.osgeo.org/gdal/

-jeff





-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From warmerdam at pobox.com  Tue May 22 16:37:38 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 22 16:38:12 2012
Subject: [gdal-dev] Re: Motion: Promote GDAL 1.9.1RC2 to Final Release
In-Reply-To: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
References: <CA+YzLBeOSYuVD3AE8Tfmht+bOKNmmAjiCRrx7KkvfvRX0omz0A@mail.gmail.com>
Message-ID: <CA+YzLBcjkkqtvn58wgHni74whEX5+XagrpUv03icYCfT=_fBcQ@mail.gmail.com>

On Thu, May 17, 2012 at 1:36 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: The GDAL/OGR 1.9.1RC2 release candidate is hearby
> declared the final GDAL/OGR 1.9.1 release.

Folks,

I declare this motion passed with support from Frank, Daniel, Even and Tamas.
I'll rename the RC to final and update the news page.

Thanks for the prompt Jeff!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From giohappy at gmail.com  Tue May 22 16:47:56 2012
From: giohappy at gmail.com (G. Allegri)
Date: Tue May 22 16:48:19 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
Message-ID: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>

> Your issue with EPSG:3003 is of a different kind, and related to another change where the new logic now peaks up the EPSG preferred transformation whereas it didn't before

Hi Even,
I have some difficults to follow the overall flow controlling the
peaking of the preferred transformation. What is the general rational
that define a transformation considered "preferred"?
In the case reported by Maddalena, the chosen transformation
parameters are (approximately) good for central Italy, while they are
not well suited for other regions of our country. In our case they're
"preferred" only by some italians :)

Giovanni
From warmerdam at pobox.com  Tue May 22 16:58:56 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 22 16:59:06 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
Message-ID: <CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>

On Tue, May 22, 2012 at 1:47 PM, G. Allegri <giohappy@gmail.com> wrote:
>> Your issue with EPSG:3003 is of a different kind, and related to another change where the new logic now peaks up the EPSG preferred transformation whereas it didn't before
>
> Hi Even,
> I have some difficults to follow the overall flow controlling the
> peaking of the preferred transformation. What is the general rational
> that define a transformation considered "preferred"?
> In the case reported by Maddalena, the chosen transformation
> parameters are (approximately) good for central Italy, while they are
> not well suited for other regions of our country. In our case they're
> "preferred" only by some italians :)

Giovanni,

The logic for deciding which available datum shift to use as
preferred is embedded in:

  http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/build_pcs.py

The logic around setting pref_rec and preferred_op is the key.

Skimming the logic it:
 * Prefers the transformation with the largest area of use.
 * avoids deprecated transformations.
 * avoids records that have been superceeded.

I believe I discuss the topic in:

http://fwarmerdam.blogspot.com/2010/03/in-last-few-weeks-i-believe-i-have-made.html

There is the possibility of pre-setting a preferred datum transformation in:

    http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/datum_shift_pref.csv

If you feel there is a more appropriate set of shift parameters to use
for the datum in question, please file a ticket (ideally against libgeotiff)
with a justification I can reference when I add it in the file.  Hopefully
a reasonably convincing explanation.

Also, please understand that no set of shift values is ideal and I
prefer something broadly reasonable to something that is super
in one local region and very poor in another where the datum is
used.   The "largest area of use" rule of thumb is intended to
select on this basis.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Tue May 22 17:18:01 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 22 17:18:13 2012
Subject: [gdal-dev] GDAL/OGR 1.9.1 Released
Message-ID: <CA+YzLBf350uU4q2ndZDiopLkNzaiDi0zS389T6BpmJMnR-75Tw@mail.gmail.com>

On behalf of the GDAL/OGR development team, I am pleased to
announce the release of the GDAL/OGR 1.9.1 bug fix release.  This
release contains many bug fixes since the December 1.9.0 release.

The source is available at:

  http://download.osgeo.org/gdal/gdal191.zip
  http://download.osgeo.org/gdal/gdal-1.9.1.tar.gz

Details on the the fixes in this release are available at:
  http://trac.osgeo.org/gdal/wiki/Release/1.9.1-News

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From giohappy at gmail.com  Tue May 22 17:25:33 2012
From: giohappy at gmail.com (G. Allegri)
Date: Tue May 22 17:26:06 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
Message-ID: <CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>

Thanks Frank for the clear explanation. I've missed your blog post.
I think that the rational behind the sorting logic is the best that
can be done if a choice must be made. The point is IF that choice
should be made, and you give lot of reasons for it, and I suppose lot
of users agree with having a default transformation. In general I
think that transformation parameters shouldn't be provided as part of
a CRS definition, but I suppose I'm not part of the majority of the
users :)

giovanni



2012/5/22 Frank Warmerdam <warmerdam@pobox.com>:
> On Tue, May 22, 2012 at 1:47 PM, G. Allegri <giohappy@gmail.com> wrote:
>>> Your issue with EPSG:3003 is of a different kind, and related to another change where the new logic now peaks up the EPSG preferred transformation whereas it didn't before
>>
>> Hi Even,
>> I have some difficults to follow the overall flow controlling the
>> peaking of the preferred transformation. What is the general rational
>> that define a transformation considered "preferred"?
>> In the case reported by Maddalena, the chosen transformation
>> parameters are (approximately) good for central Italy, while they are
>> not well suited for other regions of our country. In our case they're
>> "preferred" only by some italians :)
>
> Giovanni,
>
> The logic for deciding which available datum shift to use as
> preferred is embedded in:
>
> ?http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/build_pcs.py
>
> The logic around setting pref_rec and preferred_op is the key.
>
> Skimming the logic it:
> ?* Prefers the transformation with the largest area of use.
> ?* avoids deprecated transformations.
> ?* avoids records that have been superceeded.
>
> I believe I discuss the topic in:
>
> http://fwarmerdam.blogspot.com/2010/03/in-last-few-weeks-i-believe-i-have-made.html
>
> There is the possibility of pre-setting a preferred datum transformation in:
>
> ? ?http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/datum_shift_pref.csv
>
> If you feel there is a more appropriate set of shift parameters to use
> for the datum in question, please file a ticket (ideally against libgeotiff)
> with a justification I can reference when I add it in the file. ?Hopefully
> a reasonably convincing explanation.
>
> Also, please understand that no set of shift values is ideal and I
> prefer something broadly reasonable to something that is super
> in one local region and very poor in another where the datum is
> used. ? The "largest area of use" rule of thumb is intended to
> select on this basis.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Tue May 22 17:38:38 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 22 17:39:04 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
	<CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
Message-ID: <CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>

On Tue, May 22, 2012 at 2:25 PM, G. Allegri <giohappy@gmail.com> wrote:
> Thanks Frank for the clear explanation. I've missed your blog post.
> I think that the rational behind the sorting logic is the best that
> can be done if a choice must be made. The point is IF that choice
> should be made, and you give lot of reasons for it, and I suppose lot
> of users agree with having a default transformation. In general I
> think that transformation parameters shouldn't be provided as part of
> a CRS definition, but I suppose I'm not part of the majority of the
> users :)

Giovanni,

It is desirable for users to be able to select or at least override
the transformation.  But for automation of interactions with a
variety of services it is not appropriate to have to do that all the
time.

One thing I'd like to do is extend gdalsrsinfo to report a list of
potential datum shift operations available for the datum of a
given SRS, and some syntax to override the datum shift
operation when doing EPSG look ups.  For instance from
gdal/data/datum_shift.csv I see EPSG:4265 (Monte Mario)
has the following datum transformations possible:

422,1088,4265,4326,,Oil exploration and
production,2882,43,47.25,12,19.5,1,0,9603,-223.7,-67.38,1.34,,,,,0
423,1089,4265,4326,,Oil exploration and
production,2883,41.75,43.75,13.25,19,1,0,9603,-225.4,-67.7,7.85,,,,,0
424,1090,4265,4326,,Oil exploration and
production,2884,39.75,42,16,20,1,0,9603,-227.1,-68.1,14.4,,,,,0
425,1091,4265,4326,,Marine
navigation,2885,39.5,41,18,20,1,0,9603,-231.61,-68.21,13.93,,,,,0
426,1092,4265,4326,,Marine
navigation,2886,37,40.5,16,21,1,0,9603,-225.06,-67.37,14.61,,,,,0
427,1093,4265,4326,,Marine
navigation,2887,36,37.5,13,16,1,0,9603,-229.08,-65.73,20.21,,,,,0
428,1094,4265,4326,,Marine
navigation,2888,36.5,38.5,10,13,1,0,9603,-230.47,-56.08,22.43,,,,,0
429,1169,4265,4326,Derived at 1 station.,For military purposes.
Accuracy 25m in each
axis.,2339,38.5,41.5,8,10,1,0,9603,-225,-65,9,,,,,0
430,1660,4265,4326,"Parameter values from Monte Mario to ETRS89 (1)
(code 1659). Assumes ETRS89 and WGS 84 can be considered the same to
within the accuracy of the transformation.","Accuracy: 4
metres",2372,37.75,47.09,6.65,18.53,1,0,9606,-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68,1
431,1662,4265,4326,"Parameter values from Monte Mario to ETRS89 (2)
(code 1661). Assumes ETRS89 and WGS 84 can be considered the same to
within the accuracy of the transformation.","Accuracy: 4
metres",2339,38.5,41.5,8,10,1,0,9606,-168.6,-34,38.6,-0.374,-0.679,-1.379,-9.48,0
432,1664,4265,4326,"Parameter values from Monte Mario to ETRS89 (3)
(code 1663). Assumes ETRS89 and WGS 84 can be considered the same to
within the accuracy of the transformation.","Accuracy: 4
metres",2340,36.5,38.5,12,16,1,0,9606,-50.2,-50.4,84.8,-0.69,-2.012,0.459,-28.08,0

It would be nice to be able to use a parameter like:

-t_srs EPSG:3003/DATUMSHIFT:1662

in order to use the 3003 coordinate system but force selection
of the 1662 datum shift operation.

Perhaps now is a reasonable time for us to pursue this...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From giohappy at gmail.com  Tue May 22 18:31:17 2012
From: giohappy at gmail.com (G. Allegri)
Date: Tue May 22 18:31:27 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
	<CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
	<CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>
Message-ID: <CAB4g1=yh+BpWrVcM0_vPJxbjR6njr_YOFzuUshYx5aVc_xicJQ@mail.gmail.com>

Frank,
I think the opposite. Maybe it's useful for users (even if I think
it's dangerous and should be avoided) to suggest an approximate
transformation, but for services the tranformation should be chosen
carefully and shouldn't assume a default one when a correct default
isn't available.

One proposals come from the GFOSS.it community is to consider a couple
of new fields to characterize the epsg code: an authority code, and
maybe an internal id for each CRS.
Having "official" EPSG codes following the EPSG Registry would keep
Proj4 consitent with a standard de facto. Then we could have other
"gdal", "gfoss.it", etc. codes derived from the offical EPSG but with
custom adjustments, like local transformations or whatelse.
Would it be technically difficult, while maintaining
retrocompatibility to let applications adopt it or not?

In the meanwhile I will ask the GFOSS.it community to consider the
opportunity to add a datum_shift_pref.csv row.

The idea of a DATUMSHIT selector would be nice ;)
giovanni

2012/5/22 Frank Warmerdam <warmerdam@pobox.com>:
> On Tue, May 22, 2012 at 2:25 PM, G. Allegri <giohappy@gmail.com> wrote:
>> Thanks Frank for the clear explanation. I've missed your blog post.
>> I think that the rational behind the sorting logic is the best that
>> can be done if a choice must be made. The point is IF that choice
>> should be made, and you give lot of reasons for it, and I suppose lot
>> of users agree with having a default transformation. In general I
>> think that transformation parameters shouldn't be provided as part of
>> a CRS definition, but I suppose I'm not part of the majority of the
>> users :)
>
> Giovanni,
>
> It is desirable for users to be able to select or at least override
> the transformation. ?But for automation of interactions with a
> variety of services it is not appropriate to have to do that all the
> time.
>
> One thing I'd like to do is extend gdalsrsinfo to report a list of
> potential datum shift operations available for the datum of a
> given SRS, and some syntax to override the datum shift
> operation when doing EPSG look ups. ?For instance from
> gdal/data/datum_shift.csv I see EPSG:4265 (Monte Mario)
> has the following datum transformations possible:
>
> 422,1088,4265,4326,,Oil exploration and
> production,2882,43,47.25,12,19.5,1,0,9603,-223.7,-67.38,1.34,,,,,0
> 423,1089,4265,4326,,Oil exploration and
> production,2883,41.75,43.75,13.25,19,1,0,9603,-225.4,-67.7,7.85,,,,,0
> 424,1090,4265,4326,,Oil exploration and
> production,2884,39.75,42,16,20,1,0,9603,-227.1,-68.1,14.4,,,,,0
> 425,1091,4265,4326,,Marine
> navigation,2885,39.5,41,18,20,1,0,9603,-231.61,-68.21,13.93,,,,,0
> 426,1092,4265,4326,,Marine
> navigation,2886,37,40.5,16,21,1,0,9603,-225.06,-67.37,14.61,,,,,0
> 427,1093,4265,4326,,Marine
> navigation,2887,36,37.5,13,16,1,0,9603,-229.08,-65.73,20.21,,,,,0
> 428,1094,4265,4326,,Marine
> navigation,2888,36.5,38.5,10,13,1,0,9603,-230.47,-56.08,22.43,,,,,0
> 429,1169,4265,4326,Derived at 1 station.,For military purposes.
> Accuracy 25m in each
> axis.,2339,38.5,41.5,8,10,1,0,9603,-225,-65,9,,,,,0
> 430,1660,4265,4326,"Parameter values from Monte Mario to ETRS89 (1)
> (code 1659). Assumes ETRS89 and WGS 84 can be considered the same to
> within the accuracy of the transformation.","Accuracy: 4
> metres",2372,37.75,47.09,6.65,18.53,1,0,9606,-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68,1
> 431,1662,4265,4326,"Parameter values from Monte Mario to ETRS89 (2)
> (code 1661). Assumes ETRS89 and WGS 84 can be considered the same to
> within the accuracy of the transformation.","Accuracy: 4
> metres",2339,38.5,41.5,8,10,1,0,9606,-168.6,-34,38.6,-0.374,-0.679,-1.379,-9.48,0
> 432,1664,4265,4326,"Parameter values from Monte Mario to ETRS89 (3)
> (code 1663). Assumes ETRS89 and WGS 84 can be considered the same to
> within the accuracy of the transformation.","Accuracy: 4
> metres",2340,36.5,38.5,12,16,1,0,9606,-50.2,-50.4,84.8,-0.69,-2.012,0.459,-28.08,0
>
> It would be nice to be able to use a parameter like:
>
> -t_srs EPSG:3003/DATUMSHIFT:1662
>
> in order to use the 3003 coordinate system but force selection
> of the 1662 datum shift operation.
>
> Perhaps now is a reasonable time for us to pursue this...
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Tue May 22 18:38:22 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 22 18:38:49 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CAB4g1=yh+BpWrVcM0_vPJxbjR6njr_YOFzuUshYx5aVc_xicJQ@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
	<CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
	<CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>
	<CAB4g1=yh+BpWrVcM0_vPJxbjR6njr_YOFzuUshYx5aVc_xicJQ@mail.gmail.com>
Message-ID: <CA+YzLBfMs=GfTPd-qUN42eMb7741PG1pOi63SikgMk3euyVW+w@mail.gmail.com>

On Tue, May 22, 2012 at 3:31 PM, G. Allegri <giohappy@gmail.com> wrote:
> One proposals come from the GFOSS.it community is to consider a couple
> of new fields to characterize the epsg code: an authority code, and
> maybe an internal id for each CRS.
> Having "official" EPSG codes following the EPSG Registry would keep
> Proj4 consitent with a standard de facto. Then we could have other
> "gdal", "gfoss.it", etc. codes derived from the offical EPSG but with
> custom adjustments, like local transformations or whatelse.
> Would it be technically difficult, while maintaining
> retrocompatibility to let applications adopt it or not?

Giovanni,

I'm afraid I don't really follow your point.  Are you wanting to
be able to do something like -t_srs GFOSSIT:3033 ?

Note that you can register coordinate systems with
spatialreference.org and then use those urls with GDAL/OGR
tools if you want something customized.

Keep in mind that some OGC web services are not going
to support such mechanisms in an interoperable way.

> In the meanwhile I will ask the GFOSS.it community to consider the
> opportunity to add a datum_shift_pref.csv row.
>
> The idea of a DATUMSHIT selector would be nice ;)

I'm not too sure if your misspelling is intentional or not,
though it captures how I often feel about datums.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From giohappy at gmail.com  Tue May 22 18:47:13 2012
From: giohappy at gmail.com (G. Allegri)
Date: Tue May 22 18:47:25 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CA+YzLBfMs=GfTPd-qUN42eMb7741PG1pOi63SikgMk3euyVW+w@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
	<CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
	<CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>
	<CAB4g1=yh+BpWrVcM0_vPJxbjR6njr_YOFzuUshYx5aVc_xicJQ@mail.gmail.com>
	<CA+YzLBfMs=GfTPd-qUN42eMb7741PG1pOi63SikgMk3euyVW+w@mail.gmail.com>
Message-ID: <CAB4g1=xxv4nvzg+Yfxs7zxANgrzJZ2tKVnXs5nefLRXdH_S37g@mail.gmail.com>

> Giovanni,
>
> I'm afraid I don't really follow your point. ?Are you wanting to
> be able to do something like -t_srs GFOSSIT:3033 ?

No Frank, that would be a hell! :)
I was just thinking about the relation that can be assumed between the
epsg strings produced by gdal and the epsg codes from the EPSG
registry. I mean, if I say that I'm using an EPSG:3003, it's different
if I assume it in its original definition (without transformation
parameters) and the one produced by gdal (with a best available
transformation).
For anything custom I would strictly use the rule of using code ranges
beyon 32767, and to avoid clashes an authority field would help.

>> The idea of a DATUMSHIT selector would be nice ;)

> I'm not too sure if your misspelling is intentional or not,
> though it captures how I often feel about datums.

I was referring to the extended -t_srs option you were suggesting...

giovanni

>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
From frankie at debian.org  Wed May 23 04:45:25 2012
From: frankie at debian.org (Francesco P. Lovergine)
Date: Wed May 23 05:07:44 2012
Subject: [gdal-dev] troubles with OVERRIDE_PROJ_DATUM_WITH_TOWGS84
In-Reply-To: <CAB4g1=xxv4nvzg+Yfxs7zxANgrzJZ2tKVnXs5nefLRXdH_S37g@mail.gmail.com>
References: <CAB4g1=xW8ctC+4WL+VbeFTRPFuYBt+UZ3tLCjwegUWus=TWMcA@mail.gmail.com>
	<CA+YzLBdw4rqe0Qv6yr1xso8AiXstjsMJ0ZVc1PW=N9r-n2D1mg@mail.gmail.com>
	<CAB4g1=wd2Obb0=PQ_-N6Yg72-hK3=onHO5bdM74XHUhyL9kM0A@mail.gmail.com>
	<CA+YzLBeeKY0s=p5A5+YixzOdJrhZ4U0oyOs3Y=RYoEXQWHFZUg@mail.gmail.com>
	<CAB4g1=yh+BpWrVcM0_vPJxbjR6njr_YOFzuUshYx5aVc_xicJQ@mail.gmail.com>
	<CA+YzLBfMs=GfTPd-qUN42eMb7741PG1pOi63SikgMk3euyVW+w@mail.gmail.com>
	<CAB4g1=xxv4nvzg+Yfxs7zxANgrzJZ2tKVnXs5nefLRXdH_S37g@mail.gmail.com>
Message-ID: <20120523084525.GA3174@blegrez.ba.issia.cnr.it>

On Wed, May 23, 2012 at 12:47:13AM +0200, G. Allegri wrote:
> > Giovanni,
> >
> > I'm afraid I don't really follow your point. ?Are you wanting to
> > be able to do something like -t_srs GFOSSIT:3033 ?
> 
> No Frank, that would be a hell! :)
> I was just thinking about the relation that can be assumed between the
> epsg strings produced by gdal and the epsg codes from the EPSG
> registry. I mean, if I say that I'm using an EPSG:3003, it's different
> if I assume it in its original definition (without transformation
> parameters) and the one produced by gdal (with a best available
> transformation).
> For anything custom I would strictly use the rule of using code ranges
> beyon 32767, and to avoid clashes an authority field would help.
> 

I would also add that changing any EPSG (non custom) code description (e.g. by assuming
a datum whenever it is not assumed for any official code) could be possibly 
seen as a license violation (point 2 of the license). At least it seems a 
bit strange assuming a datum when no datum is specified on purpose as in many codes. 
Of course IMHO and IANAL.

-- 
Francesco P. Lovergine
From frans.knibbe at geodan.nl  Thu May 24 07:05:47 2012
From: frans.knibbe at geodan.nl (Frans Knibbe | Geodan)
Date: Thu May 24 07:07:04 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
Message-ID: <4FBE160B.8010102@geodan.nl>

Hello,

I wonder if someone can help me with a nasty problem with using ogr2ogr 
to convert shapefile to Mapinfo tab format. Whatever I try, I can not 
get the output to have a correct definition of the SRS. Ogrinfo always 
reports the output having a NonEarth SRS.

The input shapefile has a *.prj file. It seems to be ignored by ogr2ogr. 
Using the -a_srs option to specify the SRS, either as an EPSG code or as 
the name of a file containing the WKT of the projection also fails.

I have tested this with several versions of ogr2ogr. I do not notice any 
difference between versions. The latest version of ogr2ogr that I could 
find is "GDAL 2.0dev, released 2011/12/29".

A web search on this subject leads to several similar problem 
descriptions, but I have not been able to find a solution or even a 
workaround.

Regards,
Frans

From chaitanya.ch at gmail.com  Thu May 24 07:31:25 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu May 24 07:32:16 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <4FBE160B.8010102@geodan.nl>
References: <4FBE160B.8010102@geodan.nl>
Message-ID: <CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>

Frans,

Add the option "-a_srs WGS84" to ogr2ogr command. It should force
geographic mode.

If that doesn't solve your issue, please go through the discussion on this
topic at ticket 481.
http://trac.osgeo.org/gdal/ticket/481

On Thu, May 24, 2012 at 4:35 PM, Frans Knibbe | Geodan <
frans.knibbe@geodan.nl> wrote:

> Hello,
>
> I wonder if someone can help me with a nasty problem with using ogr2ogr to
> convert shapefile to Mapinfo tab format. Whatever I try, I can not get the
> output to have a correct definition of the SRS. Ogrinfo always reports the
> output having a NonEarth SRS.
>
> The input shapefile has a *.prj file. It seems to be ignored by ogr2ogr.
> Using the -a_srs option to specify the SRS, either as an EPSG code or as
> the name of a file containing the WKT of the projection also fails.
>
> I have tested this with several versions of ogr2ogr. I do not notice any
> difference between versions. The latest version of ogr2ogr that I could
> find is "GDAL 2.0dev, released 2011/12/29".
>
> A web search on this subject leads to several similar problem
> descriptions, but I have not been able to find a solution or even a
> workaround.
>
> Regards,
> Frans
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/158ae4f5/attachment.html
From yehil at rafael.co.il  Thu May 24 07:28:49 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu May 24 07:39:55 2012
Subject: [gdal-dev] libKml driver in 64 bit
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>


Hi
Has anyone managed to build the libKML driver win 64 bit for windows 7?
I'm having problems getting all of the third-parties compiled.

Thanks
Yehiyam Livneh

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/41d3d55c/attachment.html
From mateusz at loskot.net  Thu May 24 08:06:02 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May 24 08:06:27 2012
Subject: [gdal-dev] libKml driver in 64 bit
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
Message-ID: <CABUeae8BZw8CGQrYEVKHJHEt7qGO+YjpUfh6T96BwdsM1k0_2g@mail.gmail.com>

On 24 May 2012 12:28, Livneh Yehiyam <yehil@rafael.co.il> wrote:

>  Hi****
>
> Has anyone managed to build the libKML driver win 64 bit for windows 7?
>

I haven't.


> ****
>
> I'm having problems getting all of the third-parties compiled.****
>
> **
>

OK.

Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/357482b3/attachment.html
From frans.knibbe at geodan.nl  Thu May 24 08:42:14 2012
From: frans.knibbe at geodan.nl (Frans Knibbe | Geodan)
Date: Thu May 24 08:42:39 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
Message-ID: <4FBE2CA6.2070702@geodan.nl>

Hi Chaitanya,

The SRS that I am using is a projection (EPSG:28992, to be precise), so 
I think geographic (unprojected) mode is not applicable. I will try to 
update ticket 481.

Regards,
Frans

On 2012-05-24 13:31, Chaitanya kumar CH wrote:
> Frans,
>
> Add the option "-a_srs WGS84" to ogr2ogr command. It should force 
> geographic mode.
>
> If that doesn't solve your issue, please go through the discussion on 
> this topic at ticket 481.
> http://trac.osgeo.org/gdal/ticket/481
>
> On Thu, May 24, 2012 at 4:35 PM, Frans Knibbe | Geodan 
> <frans.knibbe@geodan.nl <mailto:frans.knibbe@geodan.nl>> wrote:
>
>     Hello,
>
>     I wonder if someone can help me with a nasty problem with using
>     ogr2ogr to convert shapefile to Mapinfo tab format. Whatever I
>     try, I can not get the output to have a correct definition of the
>     SRS. Ogrinfo always reports the output having a NonEarth SRS.
>
>     The input shapefile has a *.prj file. It seems to be ignored by
>     ogr2ogr. Using the -a_srs option to specify the SRS, either as an
>     EPSG code or as the name of a file containing the WKT of the
>     projection also fails.
>
>     I have tested this with several versions of ogr2ogr. I do not
>     notice any difference between versions. The latest version of
>     ogr2ogr that I could find is "GDAL 2.0dev, released 2011/12/29".
>
>     A web search on this subject leads to several similar problem
>     descriptions, but I have not been able to find a solution or even
>     a workaround.
>
>     Regards,
>     Frans
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/114fe949/attachment.html
From jmckenna at gatewaygeomatics.com  Thu May 24 10:31:25 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu May 24 10:31:57 2012
Subject: [gdal-dev] libKml driver in 64 bit
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
Message-ID: <4FBE463D.4020406@gatewaygeomatics.com>

On 12-05-24 8:28 AM, Livneh Yehiyam wrote:
> Hi
> 
> Has anyone managed to build the libKML driver win 64 bit for windows 7?


I skipped over that driver when compiling x64.

-jeff





-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From piotr at cgis.pl  Thu May 24 10:29:35 2012
From: piotr at cgis.pl (Piotr Tracz)
Date: Thu May 24 10:37:06 2012
Subject: [gdal-dev] libKml driver in 64 bit
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E197CC86@MAILBOXSERVER.rf.local>
Message-ID: <4FBE45CF.1010807@cgis.pl>

W dniu 2012-05-24 13:28, Livneh Yehiyam pisze:
>
>
> Has anyone managed to build the libKML driver win 64 bit for windows 7?
>
> I'm having problems getting all of the third-parties compiled.
>
>
> //

I did. It compiles fine on VS2005 (GDAL 1.9.0 but no problem with 
previous version either)

/Piotr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/e29995f3/attachment.html
From yehil at rafael.co.il  Thu May 24 10:40:20 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu May 24 10:40:50 2012
Subject: [gdal-dev] libKml driver in 64 bit
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7E0AC3257@MAILBOXSERVER.rf.local>

Thanks everyone,
I did manage to compile everything. Now it works

Sent from my mobile


-----------------------------
From: "Piotr Tracz"
Subject: Re: [gdal-dev] libKml driver in 64 bit
Date: 24 ??? 2012 17:36

W dniu 2012-05-24 13:28, Livneh Yehiyam pisze:



Has anyone managed to build the libKML driver win 64 bit for windows 7?
I'm having problems getting all of the third-parties compiled.




I did. It compiles fine on VS2005 (GDAL 1.9.0 but no problem with previous version either)

/Piotr
u
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/52de4d6c/attachment.html
From jmckenna at gatewaygeomatics.com  Thu May 24 10:44:46 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu May 24 10:52:00 2012
Subject: [gdal-dev] libKml driver in 64 bit
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7E0AC3257@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E0AC3257@MAILBOXSERVER.rf.local>
Message-ID: <4FBE495E.8050506@gatewaygeomatics.com>

On 12-05-24 11:40 AM, Livneh Yehiyam wrote:
> Thanks everyone,
> I did manage to compile everything. Now it works

You might want to add your x64 hints to the wiki now (gives you good
karma): http://trac.osgeo.org/gdal/wiki/LibKML

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From yehil at rafael.co.il  Thu May 24 11:10:08 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu May 24 11:11:31 2012
Subject: [gdal-dev] libKml driver in 64 bit
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7E0AC3258@MAILBOXSERVER.rf.local>

I'll do that. It will have to wait till next week.

Sent from my mobile


-----------------------------
From: "Jeff McKenna"
Subject: Re: [gdal-dev] libKml driver in 64 bit
Date: 24 ??? 2012 17:51


On 12-05-24 11:40 AM, Livneh Yehiyam wrote:
> Thanks everyone,
> I did manage to compile everything. Now it works

You might want to add your x64 hints to the wiki now (gives you good
karma): http://trac.osgeo.org/gdal/wiki/LibKML

-jeff




--
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/066f695f/attachment.html
From sigfrido at tiscali.it  Thu May 24 13:19:59 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu May 24 13:25:53 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <4FBE2CA6.2070702@geodan.nl>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
	<4FBE2CA6.2070702@geodan.nl>
Message-ID: <1337879999.2343.27.camel@GOLEM>

Hi Frans,

Il giorno gio, 24/05/2012 alle 14.42 +0200, Frans Knibbe | Geodan ha
scritto:

> The SRS that I am using is a projection (EPSG:28992, to be precise),
> so I think geographic (unprojected) mode is not applicable. I will try
> to update ticket 481.

I checked in my c:\program files\Mapinfo\Professional\mapinfow.prj, and
this CRS is listed as follows:

"--- Netherlands Coordinate Systems ---"
"Netherlands National System\p28992", 20, 109, 7, 5.387638889,
52.156160556, 0.9999079, 155000, 463000

so MapInfo knows that the EPSG code 28992 is associated with it, and
this should be matched in mitab_spatialref.cpp as

Projection Type = 20 (SRS_PT_STEREOGRAPHIC)
Datum = 109 (Netherlands_Bessel)
Units = 7 (SRS_UL_METER)

SRS_PP_CENTRAL_MERIDIAN = 5.387638889
SRS_PP_LATITUDE_OF_ORIGIN = 52.156160556
SRS_PP_SCALE_FACTOR = 0.9999079
SRS_PP_FALSE_EASTING = 155000
SRS_PP_FALSE_NORTHING = 463000

Can you try to replace 
DATUM["Amersfoort",
with
DATUM["Netherlands_Bessel"
in the prj file and see if it works?

Sig
From chris.barker at noaa.gov  Thu May 24 15:55:15 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Thu May 24 16:04:06 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
Message-ID: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>

Hi folks,

I"m finding what appears to be a memory leak, using the GRIB reader,
with the python bindings.

What I'm trying to do is read the data one band at a time, then throw
it away and read the next band -- there are 1129 bands in the file at
hand, and I can't hold it all in memory (32 bit still...)

However, when I do this, memory use just keeps climbing.

Should the memory be freed? I would expect so.

I'm using RasterBand.ReadAsArray()

Is this a leak? or is supposed to keep it around in memory?

Either way, is there a way to force it to release that memory (I"m
already doing and exlicite del and gc.collect call, so I dont think
it's a python reference counting issue)

I've enclosed a simpel test script -- watch the memory climb.

The data file is to big (186MB) to enclose here, you can get it here:

http://nomads.ncep.noaa.gov/pub/data/nccf/com/cfs/prod/cfs/cfs.20120522/18/time_grib_01/ocnu5.01.2012052218.daily.grb2

If you want to give this a try.


(note -- Grib giving some pretty good compression -- this climbs to
2.3GB when I read it)

I could actually live with the 2.3GB -- but in my real use case, I'm
reading two of these at the same time, so I max out what I can do with
32 bit python...

GDAL 1.8.1
Python 2.7 (32 bit Intel)
OS-X 10.6
I think it's the Kyng Chaos build of GDAL.

Thanks,
   -Chris









-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959?? voice
7600 Sand Point Way NE ??(206) 526-6329?? fax
Seattle, WA ?98115 ? ? ??(206) 526-6317?? main reception

Chris.Barker@noaa.gov
From even.rouault at mines-paris.org  Thu May 24 17:06:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 24 17:08:20 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
In-Reply-To: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
References: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
Message-ID: <201205242306.21372.even.rouault@mines-paris.org>

Chris,

ok I reproduce your issue.

The GRIB driver actually caches all the raster data from a band the first type 
you access it, and never releases it. This is to speed-up successive RasterIO 
operations on a band, which is a nice feature generally. But if you iterate 
over all the bands, it means that GDAL will end up allocating (number_of_bands 
* x_size * y_size * sizeof(double) ) bytes. In your case : 1129 * 720 * 360 * 
8 = 2.3 GB indeed.

I'm going to try to find a fix where GDAL wouldn't cache more than XXX bytes 
from a dataset to avoid this situation.

In the meantime, you can perhaps try reworking your algorithm to iterate on a 
limited number of bands (let's say 100) at a time. "At a time" means that 
between each iteration you close and re-open the dataset. (GDAL will recover 
nicely the memory it has cached at dataset closing). Or more simply close and 
re-open each time you process a band (opening time on your dataset doesn't 
seem to be so slow).

Best regards,

Even

Le jeudi 24 mai 2012 21:55:15, Chris Barker a ?crit :
> Hi folks,
> 
> I"m finding what appears to be a memory leak, using the GRIB reader,
> with the python bindings.
> 
> What I'm trying to do is read the data one band at a time, then throw
> it away and read the next band -- there are 1129 bands in the file at
> hand, and I can't hold it all in memory (32 bit still...)
> 
> However, when I do this, memory use just keeps climbing.
> 
> Should the memory be freed? I would expect so.
> 
> I'm using RasterBand.ReadAsArray()
> 
> Is this a leak? or is supposed to keep it around in memory?
> 
> Either way, is there a way to force it to release that memory (I"m
> already doing and exlicite del and gc.collect call, so I dont think
> it's a python reference counting issue)
> 
> I've enclosed a simpel test script -- watch the memory climb.
> 
> The data file is to big (186MB) to enclose here, you can get it here:
> 
> http://nomads.ncep.noaa.gov/pub/data/nccf/com/cfs/prod/cfs/cfs.20120522/18/
> time_grib_01/ocnu5.01.2012052218.daily.grb2
> 
> If you want to give this a try.
> 
> 
> (note -- Grib giving some pretty good compression -- this climbs to
> 2.3GB when I read it)
> 
> I could actually live with the 2.3GB -- but in my real use case, I'm
> reading two of these at the same time, so I max out what I can do with
> 32 bit python...
> 
> GDAL 1.8.1
> Python 2.7 (32 bit Intel)
> OS-X 10.6
> I think it's the Kyng Chaos build of GDAL.
> 
> Thanks,
>    -Chris
From chris.barker at noaa.gov  Thu May 24 17:18:04 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Thu May 24 17:18:58 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
In-Reply-To: <201205242306.21372.even.rouault@mines-paris.org>
References: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
	<201205242306.21372.even.rouault@mines-paris.org>
Message-ID: <CALGmxELevy5_Ju5WyT8W=irF1U6sM3BkBJp0X5HWQ-hHDdmoUQ@mail.gmail.com>

Even,

Thanks so much!

> ok I reproduce your issue.
>
> The GRIB driver actually caches all the raster data from a band the first type
> you access it, and never releases it.

I just tested reading only a subset of teh band (because I don't need
the whole thing), and it used exactly the same amount of memory --
which fits this data model.

> This is to speed-up successive RasterIO
> operations on a band, which is a nice feature generally.

maybe -- but what is GDAL policy usually? It doesn't read the data
until you ask for it, and I would have expected to keep copy myself if
want to use it again.

> But if you iterate
> over all the bands, it means that GDAL will end up allocating (number_of_bands
> * x_size * y_size * sizeof(double) ) bytes. In your case : 1129 * 720 * 360 *
> 8 = 2.3 GB indeed.

yup.

> I'm going to try to find a fix where GDAL wouldn't cache more than XXX bytes
> from a dataset to avoid this situation.

That would be great -- I can see caching a full band, so you could
pull out pieces efficiently, but caching the entier thing seems like a
bad idea. Even in the single bad case, I'd expect the user to pull the
whole thing if s/he wanted that.

> In the meantime, you can perhaps try reworking your algorithm to iterate on a
> limited number of bands (let's say 100) at a time. "At a time" means that
> between each iteration you close and re-open the dataset.

actually, the code already does that (I'm using this tro translate to
another file format, and break it up into smaller chunks). I hadn't
thought to close data set in between -- that will be easy to do.

Thanks for the very fast reply!

-Chris



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959?? voice
7600 Sand Point Way NE ??(206) 526-6329?? fax
Seattle, WA ?98115 ? ? ??(206) 526-6317?? main reception

Chris.Barker@noaa.gov
From even.rouault at mines-paris.org  Thu May 24 17:40:37 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 24 17:42:49 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
In-Reply-To: <CALGmxELevy5_Ju5WyT8W=irF1U6sM3BkBJp0X5HWQ-hHDdmoUQ@mail.gmail.com>
References: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
	<201205242306.21372.even.rouault@mines-paris.org>
	<CALGmxELevy5_Ju5WyT8W=irF1U6sM3BkBJp0X5HWQ-hHDdmoUQ@mail.gmail.com>
Message-ID: <201205242340.37803.even.rouault@mines-paris.org>

Ok, see http://trac.osgeo.org/gdal/ticket/4682 for a fix. Basically, the 
current caching strategy is maintained (cache all bands that have been 
accessed), until a threshold is reached (arbitrarly set to 100 MB by default). 
When the threshold is reached, then we only cache one band at a time. That 
could be made smarter, but I think this is good enough for now.

> maybe -- but what is GDAL policy usually? It doesn't read the data
> until you ask for it, and I would have expected to keep copy myself if
> want to use it again.

I'm not a specialist of the GRIB API, but from what I see, it only returns the 
data for a full band, and not for partial reads. So for example, if you 
accessed one line at a time, and that GDAL didn't do any caching, it would 
mean that GDAL would have to decode the whole band each time. Pretty slow !

> 
> That would be great -- I can see caching a full band, so you could
> pull out pieces efficiently, but caching the entier thing seems like a
> bad idea. Even in the single bad case, I'd expect the user to pull the
> whole thing if s/he wanted that.

The previous strategy didn't cache all the bands, but each band once you have 
you read it once. Obviously, if you read all the bands, then at the end, it 
has cached all the bands ;-) The rationale behind this was that it was the 
best strategy to minimize the number of lines of codes in the GRIB driver ;-)
From chris.barker at noaa.gov  Thu May 24 17:47:14 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Thu May 24 17:48:03 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
In-Reply-To: <201205242340.37803.even.rouault@mines-paris.org>
References: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
	<201205242306.21372.even.rouault@mines-paris.org>
	<CALGmxELevy5_Ju5WyT8W=irF1U6sM3BkBJp0X5HWQ-hHDdmoUQ@mail.gmail.com>
	<201205242340.37803.even.rouault@mines-paris.org>
Message-ID: <CALGmxEL6qpHahDP96ynyNwjdpfXOcD6FGZzkw+aQ9UxpH9z9AQ@mail.gmail.com>

On Thu, May 24, 2012 at 2:40 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Ok, see http://trac.osgeo.org/gdal/ticket/4682 for a fix. Basically, the
> current caching strategy is maintained (cache all bands that have been
> accessed), until a threshold is reached (arbitrarly set to 100 MB by default).

seems reasonable -- is there an API to change that threshold at run
time? Not I think it's needed...

> When the threshold is reached, then we only cache one band at a time. That
> could be made smarter, but I think this is good enough for now.

it sounds good to me.

meanwhile, closing the dataset every once in a while (in my case,
every 28 bands read) works great -- topping out at around 180MB memory
use.

Thanks for the hint and the fix.

>> maybe -- but what is GDAL policy usually? It doesn't read the data
>> until you ask for it, and I would have expected to keep copy myself if
>> want to use it again.
>
> I'm not a specialist of the GRIB API, but from what I see, it only returns the
> data for a full band, and not for partial reads. So for example, if you
> accessed one line at a time, and that GDAL didn't do any caching, it would
> mean that GDAL would have to decode the whole band each time. Pretty slow !

IIUC, GRIB compresses, so yes, it does make sense to read a whole band at once.

> The previous strategy didn't cache all the bands, but each band once you have
> you read it once. Obviously, if you read all the bands, then at the end, it
> has cached all the bands ;-) The rationale behind this was that it was the
> best strategy to minimize the number of lines of codes in the GRIB driver ;-)

understandable, but sub-optimum!

Thanks,
  -Chris


-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959?? voice
7600 Sand Point Way NE ??(206) 526-6329?? fax
Seattle, WA ?98115 ? ? ??(206) 526-6317?? main reception

Chris.Barker@noaa.gov
From even.rouault at mines-paris.org  Thu May 24 17:52:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu May 24 17:54:33 2012
Subject: [gdal-dev] memory leak in GRIB reader (with Python bindings)
In-Reply-To: <CALGmxEL6qpHahDP96ynyNwjdpfXOcD6FGZzkw+aQ9UxpH9z9AQ@mail.gmail.com>
References: <CALGmxEJe5hzYSp7uz0hrRagKqqyJDUg8X1aKCKSFf6takjDo4A@mail.gmail.com>
	<201205242340.37803.even.rouault@mines-paris.org>
	<CALGmxEL6qpHahDP96ynyNwjdpfXOcD6FGZzkw+aQ9UxpH9z9AQ@mail.gmail.com>
Message-ID: <201205242352.35932.even.rouault@mines-paris.org>

Le jeudi 24 mai 2012 23:47:14, Chris Barker a ?crit :
> On Thu, May 24, 2012 at 2:40 PM, Even Rouault
> 
> <even.rouault@mines-paris.org> wrote:
> > Ok, see http://trac.osgeo.org/gdal/ticket/4682 for a fix. Basically, the
> > current caching strategy is maintained (cache all bands that have been
> > accessed), until a threshold is reached (arbitrarly set to 100 MB by
> > default).
> 
> seems reasonable -- is there an API to change that threshold at run
> time? Not I think it's needed...

Yes, there's a config option, GRIB_CACHEMAX, that you can set if necessary 
(value in megabytes, and applies for each dataset). I didn't advertize it in 
the doc for now, as I think there are virtually no use case where you would 
need to alter it. (unless you open at a dozains of huge grib files...)
From jdmorgan at unca.edu  Thu May 24 21:47:24 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Thu May 24 21:55:08 2012
Subject: [gdal-dev] georeference and project a jpeg
Message-ID: <4FBEE4AC.9090609@gmail.com>

Hello,

I am attempting to georeference and project a jpeg image using only gdal 
tool.I have georeferenced the jpeg using the following command:

gdal_translate -a_srs EPSG:102719-of HFA -gcp 0.0 0.0 -82.5586187839508 
35.59414007259327 -gcp 0.0 410.0 -82.55858659744263 35.5937998255945 
-gcp 520.0 0.0 -82.55741715431213 35.594340730401775 -gcp 520.0 410.0 
-82.55728840827942 35.5940266570877NCDCLogo.jpg NCDCLogo.img

The command run fine and produces a img file however it does not line up 
with similarly project layer per the gcp's.When I check the projection 
information the file shows to be unprojected. Further, when I attempt to 
project the resulting raster with gdalwarp I get the following errors:

"There is no affine transformation and no GCPs."

Any pointers here would be greatly appreciated.

Thanks,

Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120524/a48f36e8/attachment-0001.html
From chaitanya.ch at gmail.com  Fri May 25 03:00:56 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri May 25 03:01:14 2012
Subject: [gdal-dev] georeference and project a jpeg
In-Reply-To: <4FBEE4AC.9090609@gmail.com>
References: <4FBEE4AC.9090609@gmail.com>
Message-ID: <CAMKgpObbfjDbRUQCdq=nARfp8L8vRniY9G13K4t0m8K2Ldgw6A@mail.gmail.com>

Derek,

Please provide the gdalinfo output of the img file.

Also, try this:
Create a vrt file instead of a HFA using the same gdal_translate command.
See if gdalwarp works with the vrt file.

On Fri, May 25, 2012 at 7:17 AM, jdmorgan <jdmorgan@unca.edu> wrote:

>  Hello,
>
> I am attempting to georeference and project a jpeg image using only gdal
> tool.  I have georeferenced the jpeg using the following command:
>
> gdal_translate -a_srs EPSG:102719 -of HFA -gcp 0.0 0.0 -82.5586187839508
> 35.59414007259327 -gcp 0.0 410.0 -82.55858659744263 35.5937998255945 -gcp
> 520.0 0.0 -82.55741715431213 35.594340730401775 -gcp 520.0 410.0
> -82.55728840827942 35.5940266570877 NCDCLogo.jpg NCDCLogo.img  ****
>
> ** **
>
> The command run fine and produces a img file however it does not line up
> with similarly project layer per the gcp?s.  When I check the projection
> information the file shows to be unprojected. Further, when I attempt to
> project the resulting raster with gdalwarp I get the following errors:
>
> ?There is no affine transformation and no GCPs.?
>
> Any pointers here would be greatly appreciated.
>
> Thanks,
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120525/1463336c/attachment.html
From jukka.rahkonen at mmmtike.fi  Fri May 25 04:54:23 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri May 25 04:55:12 2012
Subject: [gdal-dev] Re: georeference and project a jpeg
References: <4FBEE4AC.9090609@gmail.com>
Message-ID: <loom.20120525T104355-471@post.gmane.org>

jdmorgan <jdmorgan <at> unca.edu> writes:

> Hello, 
     I am attempting to georeference and project a
       jpeg image
       using only gdal tool.  I
       have georeferenced
       the jpeg using the following command:  
     gdal_translate
       -a_srs EPSG:102719 -of HFA -gcp 0.0 0.0
       -82.5586187839508 35.59414007259327 -gcp 0.0 410.0
       -82.55858659744263
       35.5937998255945 -gcp 520.0 0.0 -82.55741715431213
       35.594340730401775 -gcp
       520.0 410.0 -82.55728840827942 35.5940266570877 
NCDCLogo.jpg NCDCLogo.img 
.....
     Derek



I made a test with some holiday picture jpeg and this way it works for me.

Step one
========
gdal_translate -of GTiff -gcp 0 0 -82.5586187839508 35.59414007259327 
-gcp 0 410
-82.55858659744263 35.5937998255945 -gcp 520 0 -82.55741715431213
35.594340730401775 -gcp 520 410 -82.55728840827942 35.5940266570877
 test.jpg
test_temp.tif

Step two
========
gdalwarp -s_srs epsg:102719 -t_srs epsg:102719 test_temp.tif test_final.tif

It seems that
1. Imagine format is not right for holding ground control points.
Use GeoTIFF instead.
2. It may be not good to give -a_srs together with -gcp for gdal_translate.
At least it is not necessary. Just add gcp's first.


-Jukka Rahkonen-

From frans.knibbe at geodan.nl  Fri May 25 05:55:30 2012
From: frans.knibbe at geodan.nl (Frans Knibbe | Geodan)
Date: Fri May 25 05:58:12 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <1337879999.2343.27.camel@GOLEM>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
	<4FBE2CA6.2070702@geodan.nl> <1337879999.2343.27.camel@GOLEM>
Message-ID: <4FBF5712.8090409@geodan.nl>

Hello Luca,

Thank you for your suggestion, but it does not seem to work. I tried in 
in different ways: editing the prj file of the shapefile and specifying 
an alternative prj file with the a_srs option. I also tried both ESRI 
WKT and OGC WKT. And I also tried 'DATUM["D_Netherlands_Bessel"' in the 
ESRI WKT case, because it was 'DATUM["D_Amersfoort"' originally. In all 
cases, the SRS in the output is still NonEarth.

Regards,
Frans


On 2012-05-24 19:19, Luca Sigfrido Percich wrote:
> Hi Frans,
>
> Il giorno gio, 24/05/2012 alle 14.42 +0200, Frans Knibbe | Geodan ha
> scritto:
>
>> The SRS that I am using is a projection (EPSG:28992, to be precise),
>> so I think geographic (unprojected) mode is not applicable. I will try
>> to update ticket 481.
> I checked in my c:\program files\Mapinfo\Professional\mapinfow.prj, and
> this CRS is listed as follows:
>
> "--- Netherlands Coordinate Systems ---"
> "Netherlands National System\p28992", 20, 109, 7, 5.387638889,
> 52.156160556, 0.9999079, 155000, 463000
>
> so MapInfo knows that the EPSG code 28992 is associated with it, and
> this should be matched in mitab_spatialref.cpp as
>
> Projection Type = 20 (SRS_PT_STEREOGRAPHIC)
> Datum = 109 (Netherlands_Bessel)
> Units = 7 (SRS_UL_METER)
>
> SRS_PP_CENTRAL_MERIDIAN = 5.387638889
> SRS_PP_LATITUDE_OF_ORIGIN = 52.156160556
> SRS_PP_SCALE_FACTOR = 0.9999079
> SRS_PP_FALSE_EASTING = 155000
> SRS_PP_FALSE_NORTHING = 463000
>
> Can you try to replace
> DATUM["Amersfoort",
> with
> DATUM["Netherlands_Bessel"
> in the prj file and see if it works?
>
> Sig


From sigfrido at tiscali.it  Fri May 25 06:23:22 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri May 25 06:23:55 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <4FBE2CA6.2070702@geodan.nl>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
	<4FBE2CA6.2070702@geodan.nl>
Message-ID: <1337941402.2490.11.camel@GOLEM>

Frans,

try to replace also 
SPHEROID["Bessel_1841" 
with 
SPHEROID["Bessel 1841" in your prj file.

I'm still following the idea that the problem lies with unmatched names
in mitab_spatialref.cpp.

Sig


Il giorno gio, 24/05/2012 alle 14.42 +0200, Frans Knibbe | Geodan ha
scritto:
> Hi Chaitanya,
> 
> The SRS that I am using is a projection (EPSG:28992, to be precise),
> so I think geographic (unprojected) mode is not applicable. I will try
> to update ticket 481.
> 
> Regards,
> Frans
> 
> On 2012-05-24 13:31, Chaitanya kumar CH wrote: 
> > Frans,
> > 
> > Add the option "-a_srs WGS84" to ogr2ogr command. It should force
> > geographic mode.
> > 
> > If that doesn't solve your issue, please go through the discussion
> > on this topic at ticket 481.
> > http://trac.osgeo.org/gdal/ticket/481
> > 
> > On Thu, May 24, 2012 at 4:35 PM, Frans Knibbe | Geodan
> > <frans.knibbe@geodan.nl> wrote:
> >         Hello,
> >         
> >         I wonder if someone can help me with a nasty problem with
> >         using ogr2ogr to convert shapefile to Mapinfo tab format.
> >         Whatever I try, I can not get the output to have a correct
> >         definition of the SRS. Ogrinfo always reports the output
> >         having a NonEarth SRS.
> >         
> >         The input shapefile has a *.prj file. It seems to be ignored
> >         by ogr2ogr. Using the -a_srs option to specify the SRS,
> >         either as an EPSG code or as the name of a file containing
> >         the WKT of the projection also fails.
> >         
> >         I have tested this with several versions of ogr2ogr. I do
> >         not notice any difference between versions. The latest
> >         version of ogr2ogr that I could find is "GDAL 2.0dev,
> >         released 2011/12/29".
> >         
> >         A web search on this subject leads to several similar
> >         problem descriptions, but I have not been able to find a
> >         solution or even a workaround.
> >         
> >         Regards,
> >         Frans
> >         
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > 
> > 
> > -- 
> > Best regards,
> > Chaitanya kumar CH.
> > 
> > +91-9494447584
> > 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From frans.knibbe at geodan.nl  Fri May 25 07:11:24 2012
From: frans.knibbe at geodan.nl (Frans Knibbe | Geodan)
Date: Fri May 25 07:12:04 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <1337941402.2490.11.camel@GOLEM>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
	<4FBE2CA6.2070702@geodan.nl> <1337941402.2490.11.camel@GOLEM>
Message-ID: <4FBF68DC.4090608@geodan.nl>

Hello Sig,

I have just tried that. Only with the ESRI WKT, because the OGC WKT 
already had the space between 'Bessel' and '1841'. This change neither 
had the desired effect.

Greetings,
Frans

On 2012-05-25 12:23, Luca Sigfrido Percich wrote:
> Frans,
>
> try to replace also
> SPHEROID["Bessel_1841"
> with
> SPHEROID["Bessel 1841" in your prj file.
>
> I'm still following the idea that the problem lies with unmatched names
> in mitab_spatialref.cpp.
>
> Sig
>
>
> Il giorno gio, 24/05/2012 alle 14.42 +0200, Frans Knibbe | Geodan ha
> scritto:
>> Hi Chaitanya,
>>
>> The SRS that I am using is a projection (EPSG:28992, to be precise),
>> so I think geographic (unprojected) mode is not applicable. I will try
>> to update ticket 481.
>>
>> Regards,
>> Frans
>>
>> On 2012-05-24 13:31, Chaitanya kumar CH wrote:
>>> Frans,
>>>
>>> Add the option "-a_srs WGS84" to ogr2ogr command. It should force
>>> geographic mode.
>>>
>>> If that doesn't solve your issue, please go through the discussion
>>> on this topic at ticket 481.
>>> http://trac.osgeo.org/gdal/ticket/481
>>>
>>> On Thu, May 24, 2012 at 4:35 PM, Frans Knibbe | Geodan
>>> <frans.knibbe@geodan.nl>  wrote:
>>>          Hello,
>>>
>>>          I wonder if someone can help me with a nasty problem with
>>>          using ogr2ogr to convert shapefile to Mapinfo tab format.
>>>          Whatever I try, I can not get the output to have a correct
>>>          definition of the SRS. Ogrinfo always reports the output
>>>          having a NonEarth SRS.
>>>
>>>          The input shapefile has a *.prj file. It seems to be ignored
>>>          by ogr2ogr. Using the -a_srs option to specify the SRS,
>>>          either as an EPSG code or as the name of a file containing
>>>          the WKT of the projection also fails.
>>>
>>>          I have tested this with several versions of ogr2ogr. I do
>>>          not notice any difference between versions. The latest
>>>          version of ogr2ogr that I could find is "GDAL 2.0dev,
>>>          released 2011/12/29".
>>>
>>>          A web search on this subject leads to several similar
>>>          problem descriptions, but I have not been able to find a
>>>          solution or even a workaround.
>>>
>>>          Regards,
>>>          Frans
>>>
>>>          _______________________________________________
>>>          gdal-dev mailing list
>>>          gdal-dev@lists.osgeo.org
>>>          http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> -- 
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).


From frans.knibbe at geodan.nl  Fri May 25 07:25:17 2012
From: frans.knibbe at geodan.nl (Frans Knibbe | Geodan)
Date: Fri May 25 07:25:45 2012
Subject: [gdal-dev] ogr2ogr shapefile to mapinfo tab: no SRS.
In-Reply-To: <1337941402.2490.11.camel@GOLEM>
References: <4FBE160B.8010102@geodan.nl>
	<CAMKgpObeOOc+gsgudE5j7_-KcTwrjaAnOAvghOp1EmUCwRZhWg@mail.gmail.com>
	<4FBE2CA6.2070702@geodan.nl> <1337941402.2490.11.camel@GOLEM>
Message-ID: <4FBF6C1D.7050406@geodan.nl>

I am trying to understand what is happing with GDAL ticket 481 
(http://trac.osgeo.org/gdal/ticket/481). If I understand correctly, the 
old way was to guess the right Mapinfo SRS definition by string 
matching. This should have been replaced by first trying to match the 
EPSG code. Assuming that all patches have been applied in the version of 
ogr2ogr that I am using, shouldn't just specifying 'a_srs EPSG:28992' be 
sufficient for finding the right Mapinfo SRS specification? In that case 
there should not be a need to try to interpret the prj file, right?

Regards,
Frans


On 2012-05-25 12:23, Luca Sigfrido Percich wrote:
> Frans,
>
> try to replace also
> SPHEROID["Bessel_1841"
> with
> SPHEROID["Bessel 1841" in your prj file.
>
> I'm still following the idea that the problem lies with unmatched names
> in mitab_spatialref.cpp.
>
> Sig
>
>
> Il giorno gio, 24/05/2012 alle 14.42 +0200, Frans Knibbe | Geodan ha
> scritto:
>> Hi Chaitanya,
>>
>> The SRS that I am using is a projection (EPSG:28992, to be precise),
>> so I think geographic (unprojected) mode is not applicable. I will try
>> to update ticket 481.
>>
>> Regards,
>> Frans
>>
>> On 2012-05-24 13:31, Chaitanya kumar CH wrote:
>>> Frans,
>>>
>>> Add the option "-a_srs WGS84" to ogr2ogr command. It should force
>>> geographic mode.
>>>
>>> If that doesn't solve your issue, please go through the discussion
>>> on this topic at ticket 481.
>>> http://trac.osgeo.org/gdal/ticket/481
>>>
>>> On Thu, May 24, 2012 at 4:35 PM, Frans Knibbe | Geodan
>>> <frans.knibbe@geodan.nl>  wrote:
>>>          Hello,
>>>
>>>          I wonder if someone can help me with a nasty problem with
>>>          using ogr2ogr to convert shapefile to Mapinfo tab format.
>>>          Whatever I try, I can not get the output to have a correct
>>>          definition of the SRS. Ogrinfo always reports the output
>>>          having a NonEarth SRS.
>>>
>>>          The input shapefile has a *.prj file. It seems to be ignored
>>>          by ogr2ogr. Using the -a_srs option to specify the SRS,
>>>          either as an EPSG code or as the name of a file containing
>>>          the WKT of the projection also fails.
>>>
>>>          I have tested this with several versions of ogr2ogr. I do
>>>          not notice any difference between versions. The latest
>>>          version of ogr2ogr that I could find is "GDAL 2.0dev,
>>>          released 2011/12/29".
>>>
>>>          A web search on this subject leads to several similar
>>>          problem descriptions, but I have not been able to find a
>>>          solution or even a workaround.
>>>
>>>          Regards,
>>>          Frans
>>>
>>>          _______________________________________________
>>>          gdal-dev mailing list
>>>          gdal-dev@lists.osgeo.org
>>>          http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> -- 
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).


From jmckenna at gatewaygeomatics.com  Fri May 25 09:40:06 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri May 25 09:47:27 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
Message-ID: <4FBF8BB6.4010902@gatewaygeomatics.com>

Hopefully this helps someone else down the road...

- the latest version of Poppler that I am able to get working with GDAL
(1.9.1 now) on MSVC (2008) is 0.16.4
- 0.20.0 or git master gives errors
- example of errors: http://pastebin.com/4YSnSJkn

So, stick with 0.16.4 and save yourself a day of testing newer versions.

Have a good weekend everyone.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From jdmorgan at unca.edu  Fri May 25 10:09:08 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Fri May 25 10:09:14 2012
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 96, Issue 55
In-Reply-To: <20120525112548.13739E00C7B@lists.osgeo.org>
References: <20120525112548.13739E00C7B@lists.osgeo.org>
Message-ID: <4FBF9284.1090405@gmail.com>

This is a great listserv!

Chaitanya using a vrt worked so thank for that tip. Also, it must be the 
case as Jukka says that img isn't holding the control points. But as 
suggested a GeoTiff (and VRT) work fine.

Thanks so much for your help.

Cheers,
Derek

On 5/25/2012 7:25 AM, gdal-dev-request@lists.osgeo.org wrote:
> Send gdal-dev mailing list submissions to
> 	gdal-dev@lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
> 	gdal-dev-request@lists.osgeo.org
>
> You can reach the person managing the list at
> 	gdal-dev-owner@lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>     1. Re: georeference and project a jpeg (Chaitanya kumar CH)
>     2. Re: georeference and project a jpeg (Jukka Rahkonen)
>     3. Re: ogr2ogr shapefile to mapinfo tab: no SRS.
>        (Frans Knibbe | Geodan)
>     4. Re: ogr2ogr shapefile to mapinfo tab: no SRS.
>        (Luca Sigfrido Percich)
>     5. Re: ogr2ogr shapefile to mapinfo tab: no SRS.
>        (Frans Knibbe | Geodan)
>     6. Re: ogr2ogr shapefile to mapinfo tab: no SRS.
>        (Frans Knibbe | Geodan)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Fri, 25 May 2012 12:30:56 +0530
> From: Chaitanya kumar CH<chaitanya.ch@gmail.com>
> Subject: Re: [gdal-dev] georeference and project a jpeg
> To: jdmorgan<jdmorgan@unca.edu>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID:
> 	<CAMKgpObbfjDbRUQCdq=nARfp8L8vRniY9G13K4t0m8K2Ldgw6A@mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Derek,
>
> Please provide the gdalinfo output of the img file.
>
> Also, try this:
> Create a vrt file instead of a HFA using the same gdal_translate command.
> See if gdalwarp works with the vrt file.
>
> On Fri, May 25, 2012 at 7:17 AM, jdmorgan<jdmorgan@unca.edu>  wrote:
>
>>   Hello,
>>
>> I am attempting to georeference and project a jpeg image using only gdal
>> tool.  I have georeferenced the jpeg using the following command:
>>
>> gdal_translate -a_srs EPSG:102719 -of HFA -gcp 0.0 0.0 -82.5586187839508
>> 35.59414007259327 -gcp 0.0 410.0 -82.55858659744263 35.5937998255945 -gcp
>> 520.0 0.0 -82.55741715431213 35.594340730401775 -gcp 520.0 410.0
>> -82.55728840827942 35.5940266570877 NCDCLogo.jpg NCDCLogo.img  ****
>>
>> ** **
>>
>> The command run fine and produces a img file however it does not line up
>> with similarly project layer per the gcp’s.  When I check the projection
>> information the file shows to be unprojected. Further, when I attempt to
>> project the resulting raster with gdalwarp I get the following errors:
>>
>> “There is no affine transformation and no GCPs.”
>>
>> Any pointers here would be greatly appreciated.
>>
>> Thanks,
>>
>> Derek
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


-- 
Derek @ NEMAC
http://nemac.unca.edu

From jluis at ualg.pt  Fri May 25 10:27:12 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri May 25 10:27:48 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <4FBF8BB6.4010902@gatewaygeomatics.com>
References: <4FBF8BB6.4010902@gatewaygeomatics.com>
Message-ID: <4FBF96C0.1040906@ualg.pt>

On 25-05-2012 14:40, Jeff McKenna wrote:
> Hopefully this helps someone else down the road...
>
> - the latest version of Poppler that I am able to get working with GDAL
> (1.9.1 now) on MSVC (2008) is 0.16.4
> - 0.20.0 or git master gives errors
> - example of errors: http://pastebin.com/4YSnSJkn
>
> So, stick with 0.16.4 and save yourself a day of testing newer versions.
>

Hmm, I have 0.19.0 (it was the SVN version) working but I have restrain 
to rebuild GDAL since I saw the commits saying that one would have to 
update to 0.20 (or so I (mis)understood the commit messages meaning).

Joaquim
From jdmorgan at unca.edu  Fri May 25 12:44:42 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Fri May 25 12:44:52 2012
Subject: [gdal-dev] georeference and project a jpeg
In-Reply-To: <CAMKgpObbfjDbRUQCdq=nARfp8L8vRniY9G13K4t0m8K2Ldgw6A@mail.gmail.com>
References: <4FBEE4AC.9090609@gmail.com>
	<CAMKgpObbfjDbRUQCdq=nARfp8L8vRniY9G13K4t0m8K2Ldgw6A@mail.gmail.com>
Message-ID: <4FBFB6FA.50007@gmail.com>

I am sending this because I just realized that I posted w/ the wrong 
subject so that it gets filed correctly in the archive:

This is a great listserv!

Chaitanya using a vrt worked so thank for that tip. Also, it must be the
case as Jukka says that img isn't holding the control points. But as
suggested a GeoTiff (and VRT) work fine.

Thanks so much for your help.

Cheers,
Derek


On 5/25/2012 3:00 AM, Chaitanya kumar CH wrote:
> Derek,
>
> Please provide the gdalinfo output of the img file.
>
> Also, try this:
> Create a vrt file instead of a HFA using the same gdal_translate 
> command. See if gdalwarp works with the vrt file.
>
> On Fri, May 25, 2012 at 7:17 AM, jdmorgan <jdmorgan@unca.edu 
> <mailto:jdmorgan@unca.edu>> wrote:
>
>     Hello,
>
>     I am attempting to georeference and project a jpeg image using
>     only gdal tool.I have georeferenced the jpeg using the following
>     command:
>
>     gdal_translate -a_srs EPSG:102719-of HFA -gcp 0.0 0.0
>     -82.5586187839508 35.59414007259327 -gcp 0.0 410.0
>     -82.55858659744263 35.5937998255945 -gcp 520.0 0.0
>     -82.55741715431213 35.594340730401775 -gcp 520.0 410.0
>     -82.55728840827942 35.5940266570877NCDCLogo.jpg NCDCLogo.img
>
>     The command run fine and produces a img file however it does not
>     line up with similarly project layer per the gcp?s.When I check
>     the projection information the file shows to be unprojected.
>     Further, when I attempt to project the resulting raster with
>     gdalwarp I get the following errors:
>
>     ?There is no affine transformation and no GCPs.?
>
>     Any pointers here would be greatly appreciated.
>
>     Thanks,
>
>     Derek
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Derek @ NEMAC
http://nemac.unca.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120525/e77b1946/attachment.html
From even.rouault at mines-paris.org  Fri May 25 17:16:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 25 17:16:47 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <4FBF8BB6.4010902@gatewaygeomatics.com>
References: <4FBF8BB6.4010902@gatewaygeomatics.com>
Message-ID: <1337980583.4fbff6a72e8e4@imp.free.fr>

Selon Jeff McKenna <jmckenna@gatewaygeomatics.com>:

> Hopefully this helps someone else down the road...
>
> - the latest version of Poppler that I am able to get working with GDAL
> (1.9.1 now) on MSVC (2008) is 0.16.4
> - 0.20.0 or git master gives errors
> - example of errors: http://pastebin.com/4YSnSJkn
>
> So, stick with 0.16.4 and save yourself a day of testing newer versions.

Hi Jeff

Or use trunk or latest state of 1.9 branch ;-) . 1.9 branch has been updated
with poppler 0.20 support just a bit after 1.9.1, but it will be in 1.9.2. See
http://trac.osgeo.org/gdal/ticket/4668 if you need to patch. For 0.20 support
you need to uncomment all the POPPLER_ lines in nmake.opt (including the new
POPPLER_0_20_OR_LATER = YES)

0.18 should work too. At least I've tested it successfully on Linux.

Best regards,

Even
From even.rouault at mines-paris.org  Fri May 25 17:33:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 25 17:33:51 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <4FBF96C0.1040906@ualg.pt>
References: <4FBF8BB6.4010902@gatewaygeomatics.com> <4FBF96C0.1040906@ualg.pt>
Message-ID: <1337981599.4fbffa9f3666e@imp.free.fr>

Selon Joaquim Luis <jluis@ualg.pt>:

> On 25-05-2012 14:40, Jeff McKenna wrote:
> > Hopefully this helps someone else down the road...
> >
> > - the latest version of Poppler that I am able to get working with GDAL
> > (1.9.1 now) on MSVC (2008) is 0.16.4
> > - 0.20.0 or git master gives errors
> > - example of errors: http://pastebin.com/4YSnSJkn
> >
> > So, stick with 0.16.4 and save yourself a day of testing newer versions.
> >
>
> Hmm, I have 0.19.0 (it was the SVN version) working but I have restrain
> to rebuild GDAL since I saw the commits saying that one would have to
> update to 0.20 (or so I (mis)understood the commit messages meaning).

0.18.X and 0.20.X are indeed supported, but 0.19.X not. Odd numbered versionss
of poppler are developement versions, whereas even ones are considered stables.
I initially supported 0.19 in the hope of being reading for 0.20 release, but
there was a API break later in the 0.19 development, and because it is
sufficiently enough difficult to autodetect the version of poppler, I decided it
was not worth the effort to go on supporting it and only support 0.20 instead.

(In case someone would want to blame poppler devs, don't. The GDAL PDF driver
uses an internal low-level API of poppler for its needs, so we are bound to
adapt to the changes that sometimes happen there)

>
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Fri May 25 17:34:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 25 17:34:57 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <4FBF96C0.1040906@ualg.pt>
References: <4FBF8BB6.4010902@gatewaygeomatics.com> <4FBF96C0.1040906@ualg.pt>
Message-ID: <1337981663.4fbffadfabc4d@imp.free.fr>

Selon Joaquim Luis <jluis@ualg.pt>:

> On 25-05-2012 14:40, Jeff McKenna wrote:
> > Hopefully this helps someone else down the road...
> >
> > - the latest version of Poppler that I am able to get working with GDAL
> > (1.9.1 now) on MSVC (2008) is 0.16.4
> > - 0.20.0 or git master gives errors
> > - example of errors: http://pastebin.com/4YSnSJkn
> >
> > So, stick with 0.16.4 and save yourself a day of testing newer versions.
> >
>
> Hmm, I have 0.19.0 (it was the SVN version) working but I have restrain
> to rebuild GDAL since I saw the commits saying that one would have to
> update to 0.20 (or so I (mis)understood the commit messages meaning).

0.18.X and 0.20.X are indeed supported, but 0.19.X not. Odd numbered versionss
of poppler are developement versions, whereas even ones are considered stables.
I initially supported 0.19 in the hope of being reading for 0.20 release, but
there was a API break later in the 0.19 development, and because it is
sufficiently enough difficult to autodetect the version of poppler, I decided it
was not worth the effort to go on supporting it and only support 0.20 instead.

(In case someone would want to blame poppler devs, don't. The GDAL PDF driver
uses an internal low-level API of poppler for its needs, so we are bound to
adapt to the changes that sometimes happen there)

>
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>






















From jluis at ualg.pt  Fri May 25 20:03:27 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri May 25 20:03:57 2012
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <1337981599.4fbffa9f3666e@imp.free.fr>
References: <4FBF8BB6.4010902@gatewaygeomatics.com> <4FBF96C0.1040906@ualg.pt>
	<1337981599.4fbffa9f3666e@imp.free.fr>
Message-ID: <4FC01DCF.5030504@ualg.pt>

> 0.18.X and 0.20.X are indeed supported, but 0.19.X not. Odd numbered versionss
> of poppler are developement versions, whereas even ones are considered stables.
> I initially supported 0.19 in the hope of being reading for 0.20 release, but
> there was a API break later in the 0.19 development, and because it is
> sufficiently enough difficult to autodetect the version of poppler, I decided it
> was not worth the effort to go on supporting it and only support 0.20 instead.
>
> (In case someone would want to blame poppler devs, don't. The GDAL PDF driver
> uses an internal low-level API of poppler for its needs, so we are bound to
> adapt to the changes that sometimes happen there)

Et bien,

0.20.0 it is but I had to apply the same trick as for 0.19.0
Rename  DllMain  in GlobalParams.cc, otherwise we get a GDAL linking 
error saying the DllMain symbol was already defined.
I renamed it to DllMain__ and it works, but don't know if later it wont 
cause any troubles.

Joaquim

From muralikrishna50 at gmail.com  Fri May 25 23:54:41 2012
From: muralikrishna50 at gmail.com (Murali Krishna)
Date: Fri May 25 23:55:09 2012
Subject: [gdal-dev] MapInfo Geometry Precision Issues
Message-ID: <CAND4YNkSchdmgWi3uF8NspTsyApYLKfJg6HWdrdwuiOsyaaR+A@mail.gmail.com>

I'm trying to create a MapInfo file using gdal ogr java bindings (version
1.9.0) with some point geometries.
However the geometries in the created MapInfo file doesn't actually match
with the values which i have used in creation.

For example, I create a MapInfo feature with a point geometry and with the
following coordinates:
X = 196153.123
Y= 272453.6789

When i read the same feature back, GDAL gives the following as coordinates
for the same feature:
X = 196153.12630125193
Y = 272453.67830354505

Any reason why MapInfo driver changes these coordinates?

Thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120526/c9664696/attachment.html
From chaitanya.ch at gmail.com  Sat May 26 08:04:49 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat May 26 08:05:30 2012
Subject: [gdal-dev] MapInfo Geometry Precision Issues
In-Reply-To: <CAND4YNkSchdmgWi3uF8NspTsyApYLKfJg6HWdrdwuiOsyaaR+A@mail.gmail.com>
References: <CAND4YNkSchdmgWi3uF8NspTsyApYLKfJg6HWdrdwuiOsyaaR+A@mail.gmail.com>
Message-ID: <CAMKgpObjpxm9WKAPwWHFHMA0zfg4BEQ66eqz3ti6Ha4d5NEoTw@mail.gmail.com>

Murali,

The mapinfo driver is not known for creating datasets with good precision.
Projected coordinates can have an error of up to 0.02

http://www.gdal.org/ogr/drv_mitab.html
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_mitab.py#L106

On Sat, May 26, 2012 at 9:24 AM, Murali Krishna
<muralikrishna50@gmail.com>wrote:

> I'm trying to create a MapInfo file using gdal ogr java bindings (version
> 1.9.0) with some point geometries.
> However the geometries in the created MapInfo file doesn't actually match
> with the values which i have used in creation.
>
> For example, I create a MapInfo feature with a point geometry and with the
> following coordinates:
> X = 196153.123
> Y= 272453.6789
>
> When i read the same feature back, GDAL gives the following as coordinates
> for the same feature:
> X = 196153.12630125193
> Y = 272453.67830354505
>
> Any reason why MapInfo driver changes these coordinates?
>
> Thanks in advance
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120526/a8632ec3/attachment-0001.html
From chaoyuejoy at gmail.com  Sun May 27 12:13:52 2012
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sun, 27 May 2012 21:13:52 +0200
Subject: [gdal-dev] __main__.gdal_config_error when trying to install gdal
Message-ID: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>

Dear all,

I am new to gdal and when I try to install it on my ubuntu computer, I have
the following error. It occurs either with pip or with manual python
setup.py build.
could anyone give me some clue on this problem? thanks in advance.

Chao

chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo python
setup.py install
[sudo] password for chaoyue:
running install
Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
/usr/bin/python -E -c pass
TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support
.pth files
running bdist_egg
running egg_info
writing GDAL.egg-info/PKG-INFO
writing top-level names to GDAL.egg-info/top_level.txt
writing dependency_links to GDAL.egg-info/dependency_links.txt
Traceback (most recent call last):
  File "setup.py", line 267, in <module>
    ext_modules = ext_modules )
  File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
line 73, in run
    self.do_egg_install()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
line 93, in do_egg_install
    self.run_command('bdist_egg')
  File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
line 172, in run
    self.run_command("egg_info")
  File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
line 179, in run
    self.find_sources()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
line 254, in find_sources
    mm.run()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
line 308, in run
    self.add_defaults()
  File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
line 332, in add_defaults
    sdist.add_defaults(self)
  File "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py", line
191, in add_defaults
    build_ext = self.get_finalized_command('build_ext')
  File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
get_finalized_command
    cmd_obj.ensure_finalized()
  File "/usr/lib/python2.7/distutils/cmd.py", line 109, in ensure_finalized
    self.finalize_options()
  File "setup.py", line 164, in finalize_options
    self.gdaldir = self.get_gdal_config('prefix')
  File "setup.py", line 144, in get_gdal_config
    return fetch_config(option)
  File "setup.py", line 97, in fetch_config
    raise gdal_config_error, e""")
  File "<string>", line 4, in <module>
__main__.gdal_config_error: [Errno 2] No such file or directory

-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120527/fda95c54/attachment.html>

From chaoyuejoy at gmail.com  Sun May 27 13:39:31 2012
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sun, 27 May 2012 22:39:31 +0200
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
Message-ID: <CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>

Finally I managed to install gdal 1.6.3 using a debien package (and I have
to install libgdal1-1.6.0 before ). But I read from
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
saying that from version 1.7.0, python 3 is needed.

thanks et cheers,

Chao

2012/5/27 Chao YUE <chaoyuejoy at gmail.com>

> Dear all,
>
> I am new to gdal and when I try to install it on my ubuntu computer, I
> have the following error. It occurs either with pip or with manual python
> setup.py build.
> could anyone give me some clue on this problem? thanks in advance.
>
> Chao
>
> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo python
> setup.py install
> [sudo] password for chaoyue:
> running install
> Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
> /usr/bin/python -E -c pass
> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support
> .pth files
> running bdist_egg
> running egg_info
> writing GDAL.egg-info/PKG-INFO
> writing top-level names to GDAL.egg-info/top_level.txt
> writing dependency_links to GDAL.egg-info/dependency_links.txt
> Traceback (most recent call last):
>   File "setup.py", line 267, in <module>
>     ext_modules = ext_modules )
>   File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
>     dist.run_commands()
>   File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
>     self.run_command(cmd)
>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>     cmd_obj.run()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> line 73, in run
>     self.do_egg_install()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> line 93, in do_egg_install
>     self.run_command('bdist_egg')
>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
>     self.distribution.run_command(command)
>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>     cmd_obj.run()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
> line 172, in run
>     self.run_command("egg_info")
>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
>     self.distribution.run_command(command)
>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>     cmd_obj.run()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> line 179, in run
>     self.find_sources()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> line 254, in find_sources
>     mm.run()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> line 308, in run
>     self.add_defaults()
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> line 332, in add_defaults
>     sdist.add_defaults(self)
>   File "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
> line 191, in add_defaults
>     build_ext = self.get_finalized_command('build_ext')
>   File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
> get_finalized_command
>     cmd_obj.ensure_finalized()
>   File "/usr/lib/python2.7/distutils/cmd.py", line 109, in ensure_finalized
>     self.finalize_options()
>   File "setup.py", line 164, in finalize_options
>     self.gdaldir = self.get_gdal_config('prefix')
>   File "setup.py", line 144, in get_gdal_config
>     return fetch_config(option)
>   File "setup.py", line 97, in fetch_config
>     raise gdal_config_error, e""")
>   File "<string>", line 4, in <module>
> __main__.gdal_config_error: [Errno 2] No such file or directory
>
> --
>
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>
> ************************************************************************************
>
>


-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120527/2b74eacc/attachment.html>

From luca.casagrande at gmail.com  Sun May 27 13:45:03 2012
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Sun, 27 May 2012 22:45:03 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
Message-ID: <4FC2924F.3010406@gmail.com>

Hello everybody,
I can't find a way to enable support for mdb on my Ubuntu 12.04.
Gdal version is 1.9.1, Java is OpenJDK 7 and this is an extract from 
configure:

--with-java=yes --with-mdb=yes 
--with-jvm-lib=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/

This is the error:
checking whether we should include Java support... yes
checking whether we should include MDB support... checking for 
JNI_CreateJavaVM in -ljvm... no
configure: error: "--with-jvm-lib must point to a directory with a libjvm."

luca at scummbar:~$ locate libjvm.so
/usr/lib/jvm/java-1.5.0-gcj-4.6/lib/libjvm.so
/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server/libjvm.so
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/libjvm.so
/usr/lib/x86_64-linux-gnu/gcj-4.6-12/libjvm.so

Any idea?

Thank you very much!
L.
-- 
Luca Casagrande
http://www.lucacasagrande.net

From etourigny.dev at gmail.com  Sun May 27 13:52:19 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 27 May 2012 17:52:19 -0300
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
	<CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
Message-ID: <CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>

Hi chao

you should install gdal using the ubuntugis (stable or unstable)
repository . 1.6.3 is really old, plus you shouldn't install the
debian packages on ubuntu.

see:
https://launchpad.net/~ubuntugis
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

If you really have to build it see:
http://trac.osgeo.org/gdal/wiki/BuildHints

Etienne

On Sun, May 27, 2012 at 5:39 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> Finally I managed to install gdal 1.6.3 using a debien package (and I have
> to install libgdal1-1.6.0 before ). But I read from
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
> saying that from version 1.7.0, python 3 is needed.
>
> thanks et cheers,
>
> Chao
>
>
> 2012/5/27 Chao YUE <chaoyuejoy at gmail.com>
>>
>> Dear all,
>>
>> I am new to gdal and when I try to install it on my ubuntu computer, I
>> have the following error. It occurs either with pip or with manual python
>> setup.py build.
>> could anyone give me some clue on this problem? thanks in advance.
>>
>> Chao
>>
>> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo python
>> setup.py install
>> [sudo] password for chaoyue:
>> running install
>> Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
>> /usr/bin/python -E -c pass
>> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support
>> .pth files
>> running bdist_egg
>> running egg_info
>> writing GDAL.egg-info/PKG-INFO
>> writing top-level names to GDAL.egg-info/top_level.txt
>> writing dependency_links to GDAL.egg-info/dependency_links.txt
>> Traceback (most recent call last):
>> ? File "setup.py", line 267, in <module>
>> ??? ext_modules = ext_modules )
>> ? File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
>> ??? dist.run_commands()
>> ? File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
>> ??? self.run_command(cmd)
>> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>> ??? cmd_obj.run()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
>> line 73, in run
>> ??? self.do_egg_install()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
>> line 93, in do_egg_install
>> ??? self.run_command('bdist_egg')
>> ? File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
>> ??? self.distribution.run_command(command)
>> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>> ??? cmd_obj.run()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
>> line 172, in run
>> ??? self.run_command("egg_info")
>> ? File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
>> ??? self.distribution.run_command(command)
>> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
>> ??? cmd_obj.run()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> line 179, in run
>> ??? self.find_sources()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> line 254, in find_sources
>> ??? mm.run()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> line 308, in run
>> ??? self.add_defaults()
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> line 332, in add_defaults
>> ??? sdist.add_defaults(self)
>> ? File "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
>> line 191, in add_defaults
>> ??? build_ext = self.get_finalized_command('build_ext')
>> ? File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
>> get_finalized_command
>> ??? cmd_obj.ensure_finalized()
>> ? File "/usr/lib/python2.7/distutils/cmd.py", line 109, in
>> ensure_finalized
>> ??? self.finalize_options()
>> ? File "setup.py", line 164, in finalize_options
>> ??? self.gdaldir = self.get_gdal_config('prefix')
>> ? File "setup.py", line 144, in get_gdal_config
>> ??? return fetch_config(option)
>> ? File "setup.py", line 97, in fetch_config
>> ??? raise gdal_config_error, e""")
>> ? File "<string>", line 4, in <module>
>> __main__.gdal_config_error: [Errno 2] No such file or directory
>>
>> --
>>
>> ***********************************************************************************
>> Chao YUE
>> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
>> UMR 1572 CEA-CNRS-UVSQ
>> Batiment 712 - Pe 119
>> 91191 GIF Sur YVETTE Cedex
>> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>>
>> ************************************************************************************
>>
>
>
>
> --
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> ************************************************************************************
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaoyuejoy at gmail.com  Sun May 27 13:58:55 2012
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sun, 27 May 2012 22:58:55 +0200
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
	<CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
	<CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>
Message-ID: <CAAN-aRFCDagfVdv0u4zAiAghnHNft_Dj6X8piSEK5uVFn5-2WA@mail.gmail.com>

Thanks Etienne, then I guess I will have the problem of python version? I
guess I will need a virtual python environment (or something) if I need
python 3 for newer versions?

best,

Chao

2012/5/27 Etienne Tourigny <etourigny.dev at gmail.com>

> Hi chao
>
> you should install gdal using the ubuntugis (stable or unstable)
> repository . 1.6.3 is really old, plus you shouldn't install the
> debian packages on ubuntu.
>
> see:
> https://launchpad.net/~ubuntugis
> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
>
> If you really have to build it see:
> http://trac.osgeo.org/gdal/wiki/BuildHints
>
> Etienne
>
> On Sun, May 27, 2012 at 5:39 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> > Finally I managed to install gdal 1.6.3 using a debien package (and I
> have
> > to install libgdal1-1.6.0 before ). But I read from
> > http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
> > saying that from version 1.7.0, python 3 is needed.
> >
> > thanks et cheers,
> >
> > Chao
> >
> >
> > 2012/5/27 Chao YUE <chaoyuejoy at gmail.com>
> >>
> >> Dear all,
> >>
> >> I am new to gdal and when I try to install it on my ubuntu computer, I
> >> have the following error. It occurs either with pip or with manual
> python
> >> setup.py build.
> >> could anyone give me some clue on this problem? thanks in advance.
> >>
> >> Chao
> >>
> >> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo python
> >> setup.py install
> >> [sudo] password for chaoyue:
> >> running install
> >> Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
> >> /usr/bin/python -E -c pass
> >> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support
> >> .pth files
> >> running bdist_egg
> >> running egg_info
> >> writing GDAL.egg-info/PKG-INFO
> >> writing top-level names to GDAL.egg-info/top_level.txt
> >> writing dependency_links to GDAL.egg-info/dependency_links.txt
> >> Traceback (most recent call last):
> >>   File "setup.py", line 267, in <module>
> >>     ext_modules = ext_modules )
> >>   File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
> >>     dist.run_commands()
> >>   File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
> >>     self.run_command(cmd)
> >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> >>     cmd_obj.run()
> >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> >> line 73, in run
> >>     self.do_egg_install()
> >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> >> line 93, in do_egg_install
> >>     self.run_command('bdist_egg')
> >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
> >>     self.distribution.run_command(command)
> >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> >>     cmd_obj.run()
> >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
> >> line 172, in run
> >>     self.run_command("egg_info")
> >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
> >>     self.distribution.run_command(command)
> >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> >>     cmd_obj.run()
> >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> >> line 179, in run
> >>     self.find_sources()
> >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> >> line 254, in find_sources
> >>     mm.run()
> >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> >> line 308, in run
> >>     self.add_defaults()
> >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> >> line 332, in add_defaults
> >>     sdist.add_defaults(self)
> >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
> >> line 191, in add_defaults
> >>     build_ext = self.get_finalized_command('build_ext')
> >>   File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
> >> get_finalized_command
> >>     cmd_obj.ensure_finalized()
> >>   File "/usr/lib/python2.7/distutils/cmd.py", line 109, in
> >> ensure_finalized
> >>     self.finalize_options()
> >>   File "setup.py", line 164, in finalize_options
> >>     self.gdaldir = self.get_gdal_config('prefix')
> >>   File "setup.py", line 144, in get_gdal_config
> >>     return fetch_config(option)
> >>   File "setup.py", line 97, in fetch_config
> >>     raise gdal_config_error, e""")
> >>   File "<string>", line 4, in <module>
> >> __main__.gdal_config_error: [Errno 2] No such file or directory
> >>
> >> --
> >>
> >>
> ***********************************************************************************
> >> Chao YUE
> >> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> >> UMR 1572 CEA-CNRS-UVSQ
> >> Batiment 712 - Pe 119
> >> 91191 GIF Sur YVETTE Cedex
> >> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> >>
> >>
> ************************************************************************************
> >>
> >
> >
> >
> > --
> >
> ***********************************************************************************
> > Chao YUE
> > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > UMR 1572 CEA-CNRS-UVSQ
> > Batiment 712 - Pe 119
> > 91191 GIF Sur YVETTE Cedex
> > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> >
> ************************************************************************************
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120527/077d665d/attachment.html>

From even.rouault at mines-paris.org  Sun May 27 14:07:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 27 May 2012 23:07:51 +0200
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <CAAN-aRFCDagfVdv0u4zAiAghnHNft_Dj6X8piSEK5uVFn5-2WA@mail.gmail.com>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
	<CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
	<CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>
	<CAAN-aRFCDagfVdv0u4zAiAghnHNft_Dj6X8piSEK5uVFn5-2WA@mail.gmail.com>
Message-ID: <1338152871.4fc297a7423d8@imp.free.fr>

Selon Chao YUE <chaoyuejoy at gmail.com>:

> Thanks Etienne, then I guess I will have the problem of python version? I
> guess I will need a virtual python environment (or something) if I need
> python 3 for newer versions?

No, the page tells that Python 3 is supported since GDAL 1.7, but not that it is
required. Python 2.X is still supported.

>
> best,
>
> Chao
>
> 2012/5/27 Etienne Tourigny <etourigny.dev at gmail.com>
>
> > Hi chao
> >
> > you should install gdal using the ubuntugis (stable or unstable)
> > repository . 1.6.3 is really old, plus you shouldn't install the
> > debian packages on ubuntu.
> >
> > see:
> > https://launchpad.net/~ubuntugis
> > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> >
> > If you really have to build it see:
> > http://trac.osgeo.org/gdal/wiki/BuildHints
> >
> > Etienne
> >
> > On Sun, May 27, 2012 at 5:39 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> > > Finally I managed to install gdal 1.6.3 using a debien package (and I
> > have
> > > to install libgdal1-1.6.0 before ). But I read from
> > > http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
> > > saying that from version 1.7.0, python 3 is needed.
> > >
> > > thanks et cheers,
> > >
> > > Chao
> > >
> > >
> > > 2012/5/27 Chao YUE <chaoyuejoy at gmail.com>
> > >>
> > >> Dear all,
> > >>
> > >> I am new to gdal and when I try to install it on my ubuntu computer, I
> > >> have the following error. It occurs either with pip or with manual
> > python
> > >> setup.py build.
> > >> could anyone give me some clue on this problem? thanks in advance.
> > >>
> > >> Chao
> > >>
> > >> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo python
> > >> setup.py install
> > >> [sudo] password for chaoyue:
> > >> running install
> > >> Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
> > >> /usr/bin/python -E -c pass
> > >> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to support
> > >> .pth files
> > >> running bdist_egg
> > >> running egg_info
> > >> writing GDAL.egg-info/PKG-INFO
> > >> writing top-level names to GDAL.egg-info/top_level.txt
> > >> writing dependency_links to GDAL.egg-info/dependency_links.txt
> > >> Traceback (most recent call last):
> > >>   File "setup.py", line 267, in <module>
> > >>     ext_modules = ext_modules )
> > >>   File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
> > >>     dist.run_commands()
> > >>   File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
> > >>     self.run_command(cmd)
> > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> > >>     cmd_obj.run()
> > >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> > >> line 73, in run
> > >>     self.do_egg_install()
> > >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> > >> line 93, in do_egg_install
> > >>     self.run_command('bdist_egg')
> > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
> > >>     self.distribution.run_command(command)
> > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> > >>     cmd_obj.run()
> > >>   File
> > "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
> > >> line 172, in run
> > >>     self.run_command("egg_info")
> > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
> > >>     self.distribution.run_command(command)
> > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
> > >>     cmd_obj.run()
> > >>   File
> > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > >> line 179, in run
> > >>     self.find_sources()
> > >>   File
> > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > >> line 254, in find_sources
> > >>     mm.run()
> > >>   File
> > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > >> line 308, in run
> > >>     self.add_defaults()
> > >>   File
> > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > >> line 332, in add_defaults
> > >>     sdist.add_defaults(self)
> > >>   File "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
> > >> line 191, in add_defaults
> > >>     build_ext = self.get_finalized_command('build_ext')
> > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
> > >> get_finalized_command
> > >>     cmd_obj.ensure_finalized()
> > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 109, in
> > >> ensure_finalized
> > >>     self.finalize_options()
> > >>   File "setup.py", line 164, in finalize_options
> > >>     self.gdaldir = self.get_gdal_config('prefix')
> > >>   File "setup.py", line 144, in get_gdal_config
> > >>     return fetch_config(option)
> > >>   File "setup.py", line 97, in fetch_config
> > >>     raise gdal_config_error, e""")
> > >>   File "<string>", line 4, in <module>
> > >> __main__.gdal_config_error: [Errno 2] No such file or directory
> > >>
> > >> --
> > >>
> > >>
> >
>
***********************************************************************************
> > >> Chao YUE
> > >> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > >> UMR 1572 CEA-CNRS-UVSQ
> > >> Batiment 712 - Pe 119
> > >> 91191 GIF Sur YVETTE Cedex
> > >> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> > >>
> > >>
> >
>
************************************************************************************
> > >>
> > >
> > >
> > >
> > > --
> > >
> >
>
***********************************************************************************
> > > Chao YUE
> > > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > > UMR 1572 CEA-CNRS-UVSQ
> > > Batiment 712 - Pe 119
> > > 91191 GIF Sur YVETTE Cedex
> > > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> > >
> >
>
************************************************************************************
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
>
***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>
************************************************************************************
>



From even.rouault at mines-paris.org  Sun May 27 14:13:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 27 May 2012 23:13:06 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <4FC2924F.3010406@gmail.com>
References: <4FC2924F.3010406@gmail.com>
Message-ID: <1338153186.4fc298e2389ff@imp.free.fr>

Selon Luca Casagrande <luca.casagrande at gmail.com>:

> Hello everybody,
> I can't find a way to enable support for mdb on my Ubuntu 12.04.
> Gdal version is 1.9.1, Java is OpenJDK 7 and this is an extract from
> configure:
>
> --with-java=yes --with-mdb=yes
> --with-jvm-lib=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/
>
> This is the error:
> checking whether we should include Java support... yes
> checking whether we should include MDB support... checking for
> JNI_CreateJavaVM in -ljvm... no
> configure: error: "--with-jvm-lib must point to a directory with a libjvm."
>
> luca at scummbar:~$ locate libjvm.so
> /usr/lib/jvm/java-1.5.0-gcj-4.6/lib/libjvm.so
> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server/libjvm.so
> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/libjvm.so
> /usr/lib/x86_64-linux-gnu/gcj-4.6-12/libjvm.so
>
> Any idea?
>

I don't see anything wrong, and sometimes ago I did test on a Ubuntu 12.04 VM to
make the necessary changes to support the new paths. I'm not sure if I tested
setting --with-jvm-lib= . You could perhaps try removing it, since ./configure
should autodetect it on that OS.

I'll test again once I have access to that VM.

> Thank you very much!
> L.
> --
> Luca Casagrande
> http://www.lucacasagrande.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From chaoyuejoy at gmail.com  Sun May 27 14:22:41 2012
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Sun, 27 May 2012 23:22:41 +0200
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <1338152871.4fc297a7423d8@imp.free.fr>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
	<CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
	<CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>
	<CAAN-aRFCDagfVdv0u4zAiAghnHNft_Dj6X8piSEK5uVFn5-2WA@mail.gmail.com>
	<1338152871.4fc297a7423d8@imp.free.fr>
Message-ID: <CAAN-aRH4oLHkiKh423HxNva0Gcro2phCdEyJa2ic4VQD4f3SYA@mail.gmail.com>

Dear Even,

Did you use ubuntugis before? I have one question, I followed the
instruction to add ppa:gwibber-daily/ppa to my repository.

Then I use sudo apt-get update to install the packages. Yet can I install
only one package (let's say gdal)?

I do a little search online and some people say I can use directly
sudo apt-get install gdal

but it reports E: Unable to locate package gdal, I cannot find the package
in my Ubuntu software center either...

thanks,

Chao


2012/5/27 Even Rouault <even.rouault at mines-paris.org>

> Selon Chao YUE <chaoyuejoy at gmail.com>:
>
> > Thanks Etienne, then I guess I will have the problem of python version? I
> > guess I will need a virtual python environment (or something) if I need
> > python 3 for newer versions?
>
> No, the page tells that Python 3 is supported since GDAL 1.7, but not that
> it is
> required. Python 2.X is still supported.
>
> >
> > best,
> >
> > Chao
> >
> > 2012/5/27 Etienne Tourigny <etourigny.dev at gmail.com>
> >
> > > Hi chao
> > >
> > > you should install gdal using the ubuntugis (stable or unstable)
> > > repository . 1.6.3 is really old, plus you shouldn't install the
> > > debian packages on ubuntu.
> > >
> > > see:
> > > https://launchpad.net/~ubuntugis
> > > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> > >
> > > If you really have to build it see:
> > > http://trac.osgeo.org/gdal/wiki/BuildHints
> > >
> > > Etienne
> > >
> > > On Sun, May 27, 2012 at 5:39 PM, Chao YUE <chaoyuejoy at gmail.com>
> wrote:
> > > > Finally I managed to install gdal 1.6.3 using a debien package (and I
> > > have
> > > > to install libgdal1-1.6.0 before ). But I read from
> > > > http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
> > > > saying that from version 1.7.0, python 3 is needed.
> > > >
> > > > thanks et cheers,
> > > >
> > > > Chao
> > > >
> > > >
> > > > 2012/5/27 Chao YUE <chaoyuejoy at gmail.com>
> > > >>
> > > >> Dear all,
> > > >>
> > > >> I am new to gdal and when I try to install it on my ubuntu
> computer, I
> > > >> have the following error. It occurs either with pip or with manual
> > > python
> > > >> setup.py build.
> > > >> could anyone give me some clue on this problem? thanks in advance.
> > > >>
> > > >> Chao
> > > >>
> > > >> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo
> python
> > > >> setup.py install
> > > >> [sudo] password for chaoyue:
> > > >> running install
> > > >> Checking .pth file support in
> /usr/local/lib/python2.7/dist-packages/
> > > >> /usr/bin/python -E -c pass
> > > >> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to
> support
> > > >> .pth files
> > > >> running bdist_egg
> > > >> running egg_info
> > > >> writing GDAL.egg-info/PKG-INFO
> > > >> writing top-level names to GDAL.egg-info/top_level.txt
> > > >> writing dependency_links to GDAL.egg-info/dependency_links.txt
> > > >> Traceback (most recent call last):
> > > >>   File "setup.py", line 267, in <module>
> > > >>     ext_modules = ext_modules )
> > > >>   File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
> > > >>     dist.run_commands()
> > > >>   File "/usr/lib/python2.7/distutils/dist.py", line 953, in
> run_commands
> > > >>     self.run_command(cmd)
> > > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in
> run_command
> > > >>     cmd_obj.run()
> > > >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> > > >> line 73, in run
> > > >>     self.do_egg_install()
> > > >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
> > > >> line 93, in do_egg_install
> > > >>     self.run_command('bdist_egg')
> > > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in
> run_command
> > > >>     self.distribution.run_command(command)
> > > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in
> run_command
> > > >>     cmd_obj.run()
> > > >>   File
> > > "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
> > > >> line 172, in run
> > > >>     self.run_command("egg_info")
> > > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 326, in
> run_command
> > > >>     self.distribution.run_command(command)
> > > >>   File "/usr/lib/python2.7/distutils/dist.py", line 972, in
> run_command
> > > >>     cmd_obj.run()
> > > >>   File
> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > > >> line 179, in run
> > > >>     self.find_sources()
> > > >>   File
> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > > >> line 254, in find_sources
> > > >>     mm.run()
> > > >>   File
> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > > >> line 308, in run
> > > >>     self.add_defaults()
> > > >>   File
> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
> > > >> line 332, in add_defaults
> > > >>     sdist.add_defaults(self)
> > > >>   File
> "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
> > > >> line 191, in add_defaults
> > > >>     build_ext = self.get_finalized_command('build_ext')
> > > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
> > > >> get_finalized_command
> > > >>     cmd_obj.ensure_finalized()
> > > >>   File "/usr/lib/python2.7/distutils/cmd.py", line 109, in
> > > >> ensure_finalized
> > > >>     self.finalize_options()
> > > >>   File "setup.py", line 164, in finalize_options
> > > >>     self.gdaldir = self.get_gdal_config('prefix')
> > > >>   File "setup.py", line 144, in get_gdal_config
> > > >>     return fetch_config(option)
> > > >>   File "setup.py", line 97, in fetch_config
> > > >>     raise gdal_config_error, e""")
> > > >>   File "<string>", line 4, in <module>
> > > >> __main__.gdal_config_error: [Errno 2] No such file or directory
> > > >>
> > > >> --
> > > >>
> > > >>
> > >
> >
>
> ***********************************************************************************
> > > >> Chao YUE
> > > >> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > > >> UMR 1572 CEA-CNRS-UVSQ
> > > >> Batiment 712 - Pe 119
> > > >> 91191 GIF Sur YVETTE Cedex
> > > >> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> > > >>
> > > >>
> > >
> >
>
> ************************************************************************************
> > > >>
> > > >
> > > >
> > > >
> > > > --
> > > >
> > >
> >
>
> ***********************************************************************************
> > > > Chao YUE
> > > > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > > > UMR 1572 CEA-CNRS-UVSQ
> > > > Batiment 712 - Pe 119
> > > > 91191 GIF Sur YVETTE Cedex
> > > > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> > > >
> > >
> >
>
> ************************************************************************************
> > > >
> > > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> >
> > --
> >
>
> ***********************************************************************************
> > Chao YUE
> > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> > UMR 1572 CEA-CNRS-UVSQ
> > Batiment 712 - Pe 119
> > 91191 GIF Sur YVETTE Cedex
> > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> >
>
> ************************************************************************************
> >
>
>
>


-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120527/ee5ed3ce/attachment-0001.html>

From luca.casagrande at gmail.com  Sun May 27 14:23:58 2012
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Sun, 27 May 2012 23:23:58 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <1338153186.4fc298e2389ff@imp.free.fr>
References: <4FC2924F.3010406@gmail.com> <1338153186.4fc298e2389ff@imp.free.fr>
Message-ID: <4FC29B6E.5050201@gmail.com>

Il 27/05/2012 23:13, Even Rouault ha scritto:
> Selon Luca Casagrande<luca.casagrande at gmail.com>:
>
>> Hello everybody,
>> I can't find a way to enable support for mdb on my Ubuntu 12.04.
>> Gdal version is 1.9.1, Java is OpenJDK 7 and this is an extract from
>> configure:
>>
>> --with-java=yes --with-mdb=yes
>> --with-jvm-lib=/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/
>>
>> This is the error:
>> checking whether we should include Java support... yes
>> checking whether we should include MDB support... checking for
>> JNI_CreateJavaVM in -ljvm... no
>> configure: error: "--with-jvm-lib must point to a directory with a libjvm."
>>
>> luca at scummbar:~$ locate libjvm.so
>> /usr/lib/jvm/java-1.5.0-gcj-4.6/lib/libjvm.so
>> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
>> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
>> /usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server/libjvm.so
>> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/cacao/libjvm.so
>> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/jamvm/libjvm.so
>> /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server/libjvm.so
>> /usr/lib/x86_64-linux-gnu/gcj-4.6-12/libjvm.so
>>
>> Any idea?
>>
>
> I don't see anything wrong, and sometimes ago I did test on a Ubuntu 12.04 VM to
> make the necessary changes to support the new paths. I'm not sure if I tested
> setting --with-jvm-lib= . You could perhaps try removing it, since ./configure
> should autodetect it on that OS.
>
> I'll test again once I have access to that VM.

If I try without it, I have got this error message:

--with-java=yes --with-mdb=yes

configure: error: "--with-jvm-lib must be specified."

Thanks for the help!

L.

From etourigny.dev at gmail.com  Sun May 27 14:35:01 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 27 May 2012 18:35:01 -0300
Subject: [gdal-dev] __main__.gdal_config_error when trying to install
	gdal
In-Reply-To: <CAAN-aRH4oLHkiKh423HxNva0Gcro2phCdEyJa2ic4VQD4f3SYA@mail.gmail.com>
References: <CAAN-aREEuivcXE8QwwzvX7Js+xJrXPb7yL3Q0y6eBUiv1qYXcw@mail.gmail.com>
	<CAAN-aRFKjC-8fxsKE=54tqY+dyc05SrpasPtnEa-_08XvGfuSA@mail.gmail.com>
	<CA+TxYvNOsqqKNuYAdG0y_bbs0gNb-7oSwN4=Zc=DXBwXf_B6pg@mail.gmail.com>
	<CAAN-aRFCDagfVdv0u4zAiAghnHNft_Dj6X8piSEK5uVFn5-2WA@mail.gmail.com>
	<1338152871.4fc297a7423d8@imp.free.fr>
	<CAAN-aRH4oLHkiKh423HxNva0Gcro2phCdEyJa2ic4VQD4f3SYA@mail.gmail.com>
Message-ID: <CA+TxYvPpiV4N+KdXoge11Bk-XUX9BhS+Up3GjezfdTJiRS0ftA@mail.gmail.com>

>From the instructions at
https://launchpad.net/~ubuntugis/+archive/ppa

Somehow the instructions are confusing as they contain instructions to
use the gwibber-daily ppa, but you should use the ubuntugis ppa

sudo add-apt-repository ppa:ubuntugis/ppa
sudo apt-get update
sudo apt-get install gdal

now  depending on your ubuntu version, you may nee to install either
ubuntugis-stable (ok for oneiric) or ubuntugis-unstable (for Precise)

By the way, this discussion should be in the ubuntugis mailing list as
it refers to installing gdal on ubuntu.

Etienne




On Sun, May 27, 2012 at 6:22 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
> Dear Even,
>
> Did you use ubuntugis before? I have one question, I followed the
> instruction to add ppa:gwibber-daily/ppa to my repository.
>
> Then I use sudo apt-get update to install the packages. Yet can I install
> only one package (let's say gdal)?
>
> I do a little search online and some people say I can use directly
> sudo apt-get install gdal
>
> but it reports E: Unable to locate package gdal, I cannot find the package
> in my Ubuntu software center either...
>
> thanks,
>
> Chao
>
>
>
> 2012/5/27 Even Rouault <even.rouault at mines-paris.org>
>>
>> Selon Chao YUE <chaoyuejoy at gmail.com>:
>>
>> > Thanks Etienne, then I guess I will have the problem of python version?
>> > I
>> > guess I will need a virtual python environment (or something) if I need
>> > python 3 for newer versions?
>>
>> No, the page tells that Python 3 is supported since GDAL 1.7, but not that
>> it is
>> required. Python 2.X is still supported.
>>
>> >
>> > best,
>> >
>> > Chao
>> >
>> > 2012/5/27 Etienne Tourigny <etourigny.dev at gmail.com>
>> >
>> > > Hi chao
>> > >
>> > > you should install gdal using the ubuntugis (stable or unstable)
>> > > repository . 1.6.3 is really old, plus you shouldn't install the
>> > > debian packages on ubuntu.
>> > >
>> > > see:
>> > > https://launchpad.net/~ubuntugis
>> > > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
>> > >
>> > > If you really have to build it see:
>> > > http://trac.osgeo.org/gdal/wiki/BuildHints
>> > >
>> > > Etienne
>> > >
>> > > On Sun, May 27, 2012 at 5:39 PM, Chao YUE <chaoyuejoy at gmail.com>
>> > > wrote:
>> > > > Finally I managed to install gdal 1.6.3 using a debien package (and
>> > > > I
>> > > have
>> > > > to install libgdal1-1.6.0 before ). But I read from
>> > > > http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>> > > > saying that from version 1.7.0, python 3 is needed.
>> > > >
>> > > > thanks et cheers,
>> > > >
>> > > > Chao
>> > > >
>> > > >
>> > > > 2012/5/27 Chao YUE <chaoyuejoy at gmail.com>
>> > > >>
>> > > >> Dear all,
>> > > >>
>> > > >> I am new to gdal and when I try to install it on my ubuntu
>> > > >> computer, I
>> > > >> have the following error. It occurs either with pip or with manual
>> > > python
>> > > >> setup.py build.
>> > > >> could anyone give me some clue on this problem? thanks in advance.
>> > > >>
>> > > >> Chao
>> > > >>
>> > > >> chaoyue at chaoyue-Aspire-4750:~/python/python_lib/build/gdal$ sudo
>> > > >> python
>> > > >> setup.py install
>> > > >> [sudo] password for chaoyue:
>> > > >> running install
>> > > >> Checking .pth file support in
>> > > >> /usr/local/lib/python2.7/dist-packages/
>> > > >> /usr/bin/python -E -c pass
>> > > >> TEST PASSED: /usr/local/lib/python2.7/dist-packages/ appears to
>> > > >> support
>> > > >> .pth files
>> > > >> running bdist_egg
>> > > >> running egg_info
>> > > >> writing GDAL.egg-info/PKG-INFO
>> > > >> writing top-level names to GDAL.egg-info/top_level.txt
>> > > >> writing dependency_links to GDAL.egg-info/dependency_links.txt
>> > > >> Traceback (most recent call last):
>> > > >> ? File "setup.py", line 267, in <module>
>> > > >> ? ? ext_modules = ext_modules )
>> > > >> ? File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
>> > > >> ? ? dist.run_commands()
>> > > >> ? File "/usr/lib/python2.7/distutils/dist.py", line 953, in
>> > > >> run_commands
>> > > >> ? ? self.run_command(cmd)
>> > > >> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in
>> > > >> run_command
>> > > >> ? ? cmd_obj.run()
>> > > >> ? File
>> > > >> "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
>> > > >> line 73, in run
>> > > >> ? ? self.do_egg_install()
>> > > >> ? File
>> > > >> "/usr/lib/python2.7/dist-packages/setuptools/command/install.py",
>> > > >> line 93, in do_egg_install
>> > > >> ? ? self.run_command('bdist_egg')
>> > > >> ? File "/usr/lib/python2.7/distutils/cmd.py", line 326, in
>> > > >> run_command
>> > > >> ? ? self.distribution.run_command(command)
>> > > >> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in
>> > > >> run_command
>> > > >> ? ? cmd_obj.run()
>> > > >> ? File
>> > > "/usr/lib/python2.7/dist-packages/setuptools/command/bdist_egg.py",
>> > > >> line 172, in run
>> > > >> ? ? self.run_command("egg_info")
>> > > >> ? File "/usr/lib/python2.7/distutils/cmd.py", line 326, in
>> > > >> run_command
>> > > >> ? ? self.distribution.run_command(command)
>> > > >> ? File "/usr/lib/python2.7/distutils/dist.py", line 972, in
>> > > >> run_command
>> > > >> ? ? cmd_obj.run()
>> > > >> ? File
>> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> > > >> line 179, in run
>> > > >> ? ? self.find_sources()
>> > > >> ? File
>> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> > > >> line 254, in find_sources
>> > > >> ? ? mm.run()
>> > > >> ? File
>> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> > > >> line 308, in run
>> > > >> ? ? self.add_defaults()
>> > > >> ? File
>> > > "/usr/lib/python2.7/dist-packages/setuptools/command/egg_info.py",
>> > > >> line 332, in add_defaults
>> > > >> ? ? sdist.add_defaults(self)
>> > > >> ? File
>> > > >> "/usr/lib/python2.7/dist-packages/setuptools/command/sdist.py",
>> > > >> line 191, in add_defaults
>> > > >> ? ? build_ext = self.get_finalized_command('build_ext')
>> > > >> ? File "/usr/lib/python2.7/distutils/cmd.py", line 312, in
>> > > >> get_finalized_command
>> > > >> ? ? cmd_obj.ensure_finalized()
>> > > >> ? File "/usr/lib/python2.7/distutils/cmd.py", line 109, in
>> > > >> ensure_finalized
>> > > >> ? ? self.finalize_options()
>> > > >> ? File "setup.py", line 164, in finalize_options
>> > > >> ? ? self.gdaldir = self.get_gdal_config('prefix')
>> > > >> ? File "setup.py", line 144, in get_gdal_config
>> > > >> ? ? return fetch_config(option)
>> > > >> ? File "setup.py", line 97, in fetch_config
>> > > >> ? ? raise gdal_config_error, e""")
>> > > >> ? File "<string>", line 4, in <module>
>> > > >> __main__.gdal_config_error: [Errno 2] No such file or directory
>> > > >>
>> > > >> --
>> > > >>
>> > > >>
>> > >
>> >
>>
>> ***********************************************************************************
>> > > >> Chao YUE
>> > > >> Laboratoire des Sciences du Climat et de l'Environnement
>> > > >> (LSCE-IPSL)
>> > > >> UMR 1572 CEA-CNRS-UVSQ
>> > > >> Batiment 712 - Pe 119
>> > > >> 91191 GIF Sur YVETTE Cedex
>> > > >> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>> > > >>
>> > > >>
>> > >
>> >
>>
>> ************************************************************************************
>> > > >>
>> > > >
>> > > >
>> > > >
>> > > > --
>> > > >
>> > >
>> >
>>
>> ***********************************************************************************
>> > > > Chao YUE
>> > > > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
>> > > > UMR 1572 CEA-CNRS-UVSQ
>> > > > Batiment 712 - Pe 119
>> > > > 91191 GIF Sur YVETTE Cedex
>> > > > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>> > > >
>> > >
>> >
>>
>> ************************************************************************************
>> > > >
>> > > >
>> > > > _______________________________________________
>> > > > gdal-dev mailing list
>> > > > gdal-dev at lists.osgeo.org
>> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> > >
>> >
>> >
>> >
>> > --
>> >
>>
>> ***********************************************************************************
>> > Chao YUE
>> > Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
>> > UMR 1572 CEA-CNRS-UVSQ
>> > Batiment 712 - Pe 119
>> > 91191 GIF Sur YVETTE Cedex
>> > Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>> >
>>
>> ************************************************************************************
>> >
>>
>>
>
>
>
> --
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> ************************************************************************************
>

From sigfrido at tiscali.it  Mon May 28 02:03:48 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Mon, 28 May 2012 11:03:48 +0200
Subject: [gdal-dev] MapInfo Geometry Precision Issues
In-Reply-To: <CAMKgpObjpxm9WKAPwWHFHMA0zfg4BEQ66eqz3ti6Ha4d5NEoTw@mail.gmail.com>
References: <CAND4YNkSchdmgWi3uF8NspTsyApYLKfJg6HWdrdwuiOsyaaR+A@mail.gmail.com>
	<CAMKgpObjpxm9WKAPwWHFHMA0zfg4BEQ66eqz3ti6Ha4d5NEoTw@mail.gmail.com>
Message-ID: <1338195828.2353.45.camel@GOLEM>

Hi all,

MapInfo stores coordinates in 32 bit integers (binary tab format), and
converts them back into floating point when loading data. The conversion
is done taking the boundary into account. The greater the boundary, the
lower the precision. That's  why lat/lon coordinates are stored with
greater precision than projected coordinates.
In MapInfo, a boundary is always associated with the projection info,
but I can use the same CRS with different boundaries. The correct
boundary should be defined prior to storing coordinates in the file.

It seems that currently OGR/mitab does not support setting the boundary.
One workaround to increase precision in MapInfo is to save data in
MIF/MID format, manually edit the MIF file where an explicit Boundary
clause can be found at the very top. Narrowing down the boundary width
from the default (OGR) 30000000 to 300000 will increase precision by two
decimal places.

There is a MITABLoadCoordSysTable mitab/mitab_vbounds.cpp which seems to
allow to averride the default bounds associated with a projection with
those read from the given text file, but it is not called from within
OGR. Maybe it is available from the Java bindings.

Sig

Il giorno sab, 26/05/2012 alle 17.34 +0530, Chaitanya kumar CH ha
scritto:
> Murali,
> 
> The mapinfo driver is not known for creating datasets with good
> precision. Projected coordinates can have an error of up to 0.02
> 
> http://www.gdal.org/ogr/drv_mitab.html
> http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_mitab.py#L106
> 
> On Sat, May 26, 2012 at 9:24 AM, Murali Krishna
> <muralikrishna50 at gmail.com> wrote:
>         I'm trying to create a MapInfo file using gdal ogr java
>         bindings (version 1.9.0) with some point geometries.
>         However the geometries in the created MapInfo file doesn't
>         actually match with the values which i have used in creation.
>         
>         For example, I create a MapInfo feature with a point geometry
>         and with the following coordinates:
>         X = 196153.123 
>         Y= 272453.6789
>         
>         When i read the same feature back, GDAL gives the following as
>         coordinates for the same feature:
>         X = 196153.12630125193 
>         Y = 272453.67830354505
>         
>         Any reason why MapInfo driver changes these coordinates?
>         
>         Thanks in advance
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

From yogesh at vizexperts.com  Mon May 28 04:00:08 2012
From: yogesh at vizexperts.com (Yogesh Dahiya)
Date: Mon, 28 May 2012 16:30:08 +0530
Subject: [gdal-dev] gdal opencl support
Message-ID: <000301cd3cc1$0d25fb00$2771f100$@vizexperts.com>

Does gdal uses opencl for different resampling algorithms.

If yes how can it be configured to use opencl?

If No how can opencl be integrated in gdal?

Thanks

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120528/20c9e519/attachment.html>

From jmckenna at gatewaygeomatics.com  Mon May 28 05:01:16 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 28 May 2012 09:01:16 -0300
Subject: [gdal-dev] Heads-up re: poppler/pdf on Windows
In-Reply-To: <1337980583.4fbff6a72e8e4@imp.free.fr>
References: <4FBF8BB6.4010902@gatewaygeomatics.com>
	<1337980583.4fbff6a72e8e4@imp.free.fr>
Message-ID: <4FC3690C.6080807@gatewaygeomatics.com>

On 12-05-25 6:16 PM, Even Rouault wrote:
> Hi Jeff
> 
> Or use trunk or latest state of 1.9 branch ;-) . 1.9 branch has been updated
> with poppler 0.20 support just a bit after 1.9.1, but it will be in 1.9.2. See
> http://trac.osgeo.org/gdal/ticket/4668 if you need to patch. For 0.20 support
> you need to uncomment all the POPPLER_ lines in nmake.opt (including the new
> POPPLER_0_20_OR_LATER = YES)
> 
> 0.18 should work too. At least I've tested it successfully on Linux.
> 
> Best regards,
> 
> Even
> 

Hi Even,

Thank you, this does explain my frustrations with 1.9.1 :)

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From getgoing555 at gmail.com  Mon May 28 05:12:24 2012
From: getgoing555 at gmail.com (N D)
Date: Mon, 28 May 2012 08:12:24 -0400
Subject: [gdal-dev] unwanted transparency of black color produced by gdalwarp
Message-ID: <CAKWFmxD2+LZLJpu54nqw5E5ox0ZMHA4diabuX=3NHXdCMWGoKw@mail.gmail.com>

Hello,

I am trying to crop and warp th**e enroute chart tif from FAA's
http://aeronav.faa.gov/Enroute/04-05-2012/ENR_H01.zip package with the
following commands:

1. gdal_translate -of vrt -srcwin  2203 204 21692 7591 ENR_H01.tif
ENR_H01.vrt

2. gdalwarp -wm 1000 -t_srs EPSG:3395 -srcnodata 0 -dstalpha -r bilinear
ENR_H01.vrt   ENR_H01_tmp.tif

and when I place the input tif ENR_H01.tif and output tif ENR_H01_tmp.tif
into ArcGIS Explorer to compare, I see that black lines on the original map
have become transparent on the final map: I can see basemap through them.
Also some of the black marks on the map have become dark-blue. So it looks
to me that black color is gone or has become transparent and I am not sure
how to deal with it since I am new to all of this.

Please advise! Thanks in advance for any tips/hints/directions on how to
fix it.

I tried to run command #1 with -expand rgb but I get the following error
message: "Error: band 1 has no color table"

Here's gdalinfo for ENR_H01.tif:

Driver: GTiff/GeoTIFF
Files: ../ENR_H01/ENR_H01.tif
Size is 24000, 7998
Coordinate System is:
PROJCS["US_IFR",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",45],
    PARAMETER["standard_parallel_2",33],
    PARAMETER["latitude_of_origin",39],
    PARAMETER["central_meridian",-95],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["meters",1]]
GeoTransform =
  -2843013.39, 91.6788695, -13.0175628
  1594997.51, -13.0227943, -91.6740178
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_DATETIME=2012:03:15 10:46:33
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
  TIFFTAG_SOFTWARE=GPL Ghostscript 8.71
  TIFFTAG_XRESOLUTION=400
  TIFFTAG_YRESOLUTION=400
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-2843013.390, 1594997.510) (133d52'54.95"W, 47d48'36.59"N)
Lower Left  (-2947127.857,  861788.716) (131d21'53.95"W, 41d23'27.77"N)
Upper Right ( -642720.522, 1282450.447) (103d53'35.10"W, 50d14'42.26"N)
Lower Right ( -746834.989,  549241.652) (104d17'24.63"W, 43d37'18.75"N)
Center      (-1794924.190, 1072119.581) (118d35'41.32"W, 46d33'40.12"N)
Band 1 Block=400x400 Type=Byte, ColorInterp=Red
Band 2 Block=400x400 Type=Byte, ColorInterp=Green
Band 3 Block=400x400 Type=Byte, ColorInterp=Blue



 and  gdalinfo for ENR_H01_tmp.tif


Driver: GTiff/GeoTIFF
Files: ENR_H01_tmp.tif
Size is 22689, 9778
Coordinate System is:
PROJCS["WGS 84 / World Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3395"]]
Origin = (-14605257.985280666500330,6436384.405730826780200)
Pixel Size = (133.273420682087647,-133.273420682087647)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-14605257.985, 6436384.406) (131d12' 4.55"W, 50d 7'55.86"N)
Lower Left  (-14605257.985, 5133236.898) (131d12' 4.55"W, 42d 0'20.66"N)
Upper Right (-11581417.343, 6436384.406) (104d 2'15.51"W, 50d 7'55.86"N)
Lower Right (-11581417.343, 5133236.898) (104d 2'15.51"W, 42d 0'20.66"N)
Center      (-13093337.664, 5784810.652) (117d37'10.03"W, 46d13'11.99"N)
Band 1 Block=22689x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=22689x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=22689x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=22689x1 Type=Byte, ColorInterp=Alpha


Thank you!!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120528/173c9821/attachment-0001.html>

From even.rouault at mines-paris.org  Mon May 28 05:55:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 May 2012 14:55:31 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <4FC29B6E.5050201@gmail.com>
References: <4FC2924F.3010406@gmail.com> <1338153186.4fc298e2389ff@imp.free.fr>
	<4FC29B6E.5050201@gmail.com>
Message-ID: <1338209731.4fc375c3548fe@imp.free.fr>


> If I try without it, I have got this error message:
>
> --with-java=yes --with-mdb=yes
>
> configure: error: "--with-jvm-lib must be specified."

Luca,

I've just installed a i386 ubuntu 12.04 VM and installed openjdk-7-jdk in it.
"./configure --with-java --with-mdb" just works out of the box, so I'm wondering
if there isn't something special (or wrong) with your setup. Does
"/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java -server -version" works for you
? If you look in the generated config.log, how do the lines with "jvm" in them
look like ?

Best regards,

Even

From luca.casagrande at gmail.com  Mon May 28 06:05:39 2012
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Mon, 28 May 2012 15:05:39 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <1338209731.4fc375c3548fe@imp.free.fr>
References: <4FC2924F.3010406@gmail.com> <1338153186.4fc298e2389ff@imp.free.fr>
	<4FC29B6E.5050201@gmail.com> <1338209731.4fc375c3548fe@imp.free.fr>
Message-ID: <4FC37823.6000404@gmail.com>

Il 28/05/2012 14:55, Even Rouault ha scritto:
>
>> If I try without it, I have got this error message:
>>
>> --with-java=yes --with-mdb=yes
>>
>> configure: error: "--with-jvm-lib must be specified."
>
> Luca,
>
> I've just installed a i386 ubuntu 12.04 VM and installed openjdk-7-jdk in it.
> "./configure --with-java --with-mdb" just works out of the box, so I'm wondering
> if there isn't something special (or wrong) with your setup. Does
> "/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java -server -version" works for you
> ? If you look in the generated config.log, how do the lines with "jvm" in them
> look like ?
>
> Best regards,
>
> Even

Hello Even,

my system is a amd64 so don't know if this can matter.
Related to you suggestions:

luca at scummbar:~$ /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java -server 
-version java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)

Hire is the full config.log:
http://ubuntuone.com/3HlRqtTs0nu4NeguX2eIG4

Thanks for you help

L.
-- 
Luca Casagrande
http://www.lucacasagrande.net

From beyhan at deprem.gov.tr  Mon May 28 05:55:14 2012
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Mon, 28 May 2012 15:55:14 +0300
Subject: [gdal-dev] ogr sql issue
Message-ID: <1338209714.11702.12.camel@localhost>

Dear All,

I would like to create a KML file using ogr2ogr with using following but
sql statement part does not filter data from csv file and draw all
points on the map, please help me what I'm doing wrong.

the code I used as follows

ogr2ogr -f "KML"  "villages.kml" "villages.csv" -dsco NameField=id


I also used -sql obtion on ogr2ogr command by deleting srcSQL line from
vrt and code as follows 


ogr2ogr -f "KML"  "villages.kml" "villages.csv" -dsco NameField=id 
-sql "SELECT * FROM villages where id > 1000"




My csv file as follows 

"id","lon","lat","acc"
1,30.5400,38.7581,27.95
2,30.5400,38.7889,28.23
3,30.6139,38.9781,26.34
.
.
.


vrt file as follows 

<OGRVRTDataSource>
    <OGRVRTLayer name="villages">
        <SrcDataSource>villages.csv</SrcDataSource>
        <SrcSQL>SELECT * from villages WHERE acc >100 </SrcSQL>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
    </OGRVRTLayer>
</OGRVRTDataSource>


kml file as follows

<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document><Folder><name>villages_pga</name>
<Schema name="villages_pga" id="villages_pga">
        <SimpleField name="Name" type="string"></SimpleField>
        <SimpleField name="Description" type="string"></SimpleField>
        <SimpleField name="id" type="string"></SimpleField>
        <SimpleField name="lon" type="string"></SimpleField>
        <SimpleField name="lat" type="string"></SimpleField>
        <SimpleField name="acc" type="string"></SimpleField>
</Schema>
  <Placemark>
        <ExtendedData><SchemaData schemaUrl="#villages_pga">
                <SimpleData name="id">2</SimpleData>
                <SimpleData name="lon">30.5400</SimpleData>
                <SimpleData name="lat">38.7889</SimpleData>
                <SimpleData name="acc">28.23</SimpleData>
        </SchemaData></ExtendedData>
  </Placemark>
  <Placemark>
        <ExtendedData><SchemaData schemaUrl="#villages_pga">
                <SimpleData name="id">3</SimpleData>
                <SimpleData name="lon">30.6139</SimpleData>
                <SimpleData name="lat">38.9781</SimpleData>
                <SimpleData name="acc">26.34</SimpleData>
        </SchemaData></ExtendedData>
  </Placemark>
  <Placemark>
        <ExtendedData><SchemaData schemaUrl="#villages_pga">
                <SimpleData name="id">4</SimpleData>
                <SimpleData name="lon">30.7461</SimpleData>
                <SimpleData name="lat">38.7719</SimpleData>
                <SimpleData name="acc">21.64</SimpleData>
        </SchemaData></ExtendedData>
  </Placemark>
. 
.
.



Murat


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From jukka.rahkonen at mmmtike.fi  Mon May 28 06:03:29 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 May 2012 13:03:29 +0000 (UTC)
Subject: [gdal-dev] How to make VRT offsite areas white?
Message-ID: <loom.20120528T144820-31@post.gmane.org>

Hi,

I thought this would be easy but it was not.

I have a mosaic of images which do not fill the whole bounding box of the area.
I made a .VRT file the images and converted the virtual raster into geotiff. Now
I have a nice mosaic but it has black boxes in the areas where I do not have
source data. An example of the result is here
http://latuviitta.org/documents/nodata_3.tif

I would rather paint nodata areas with white instead of black. But how can I
make it? I thought that gdalwarp -dstnodata would do it but areas of missing
source data remains black
gdalwarp -dstnodata "255,255,255" nodata.vrt nodata_3.tif

The following command does make the black box white but unfortunately is is also
changing everything that was black in the orininal images, including all the
texts, into white:
gdalwarp -dstnodata "255,255,255" -srcnodata "0,0,0" nodata.vrt nodata_3.tif

So what is the correct way to do this simple task?

-Jukka Rahkonen-





From jukka.rahkonen at mmmtike.fi  Mon May 28 06:15:09 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 May 2012 13:15:09 +0000 (UTC)
Subject: [gdal-dev] unwanted transparency of black color produced by
	gdalwarp
References: <CAKWFmxD2+LZLJpu54nqw5E5ox0ZMHA4diabuX=3NHXdCMWGoKw@mail.gmail.com>
Message-ID: <loom.20120528T150719-704@post.gmane.org>

N D <getgoing555 <at> gmail.com> writes:

> 
> 
> Hello,I am trying to crop and warp the enroute chart tif from FAA's
http://aeronav.faa.gov/Enroute/04-05-2012/ENR_H01.zip package with the following
commands:

1. gdal_translate -of vrt -srcwin? 2203 204 21692 7591 ENR_H01.tif ENR_H01.vrt

2. gdalwarp -wm 1000 -t_srs EPSG:3395 -srcnodata 0 -dstalpha -r bilinear?
ENR_H01.vrt?? ENR_H01_tmp.tif

Hi,

-srcnodata labels everything that is totally black in you source image as nodata
and as you noticed, black pixels in the image turn to nodata as well.

In your case I would just do "warp and crop" instead of "crop and warp".
Have a try with gdalwarp by using ENR_H01.tif as source and with -te parameter

-te xmin ymin xmax ymax:
    set georeferenced extents of output file to be created (in target SRS). 

You need to get the BBOX in target SRS which is some extra work but at the same
you should not see any black slivers in the warped image.

-Jukka Rahkonen-




From jukka.rahkonen at mmmtike.fi  Mon May 28 06:32:05 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 May 2012 13:32:05 +0000 (UTC)
Subject: [gdal-dev] ogr sql issue
References: <1338209714.11702.12.camel@localhost>
Message-ID: <loom.20120528T152613-208@post.gmane.org>

Murat Beyhan <beyhan <at> deprem.gov.tr> writes:

> 
> Dear All,
> 
> I would like to create a KML file using ogr2ogr with using following but
> sql statement part does not filter data from csv file and draw all
> points on the map, please help me what I'm doing wrong.
> 
> the code I used as follows
> 
> ogr2ogr -f "KML"  "villages.kml" "villages.csv" -dsco NameField=id
> 
> I also used -sql obtion on ogr2ogr command by deleting srcSQL line from
> vrt and code as follows 
> 
> ogr2ogr -f "KML"  "villages.kml" "villages.csv" -dsco NameField=id 
> -sql "SELECT * FROM villages where id > 1000"
> 
> My csv file as follows 
> 
> "id","lon","lat","acc"
> 1,30.5400,38.7581,27.95
> 2,30.5400,38.7889,28.23
> 3,30.6139,38.9781,26.34
.....
> <Schema name="villages_pga" id="villages_pga">
>         <SimpleField name="Name" type="string"></SimpleField>
>         <SimpleField name="Description" type="string"></SimpleField>
>         <SimpleField name="id" type="string"></SimpleField>
>         <SimpleField name="lon" type="string"></SimpleField>
>         <SimpleField name="lat" type="string"></SimpleField>
>         <SimpleField name="acc" type="string"></SimpleField>


Hi,

As you see, ogr is interpreting the id is of type "string". It cannot do greater
than comparison with strings.

I believe you must create a villages.csvt file for giving exact data types for
attributes. With this single line file stored in the same directory than
villages.csv you will perhaps have success.

"integer","real","real","real"

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon May 28 06:37:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 May 2012 15:37:27 +0200
Subject: [gdal-dev] How to make VRT offsite areas white?
In-Reply-To: <loom.20120528T144820-31@post.gmane.org>
References: <loom.20120528T144820-31@post.gmane.org>
Message-ID: <1338212247.4fc37f9722511@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> I thought this would be easy but it was not.
>
> I have a mosaic of images which do not fill the whole bounding box of the
> area.
> I made a .VRT file the images and converted the virtual raster into geotiff.
> Now
> I have a nice mosaic but it has black boxes in the areas where I do not have
> source data. An example of the result is here
> http://latuviitta.org/documents/nodata_3.tif
>
> I would rather paint nodata areas with white instead of black. But how can I
> make it? I thought that gdalwarp -dstnodata would do it but areas of missing
> source data remains black
> gdalwarp -dstnodata "255,255,255" nodata.vrt nodata_3.tif
>
> The following command does make the black box white but unfortunately is is
> also
> changing everything that was black in the orininal images, including all the
> texts, into white:
> gdalwarp -dstnodata "255,255,255" -srcnodata "0,0,0" nodata.vrt nodata_3.tif
>
> So what is the correct way to do this simple task?

Jukka,

Several options :

- use the -addalpha option of gdalbuildvrt

- use nearblack -setalpha ( http://gdal.org/nearblack.html ) ?

- cheat a bit and create a white image that you add as the first position in
your VRT.

This can be a single pixel image that you artifically expand to full VRT size,
like this :

      <SrcRect xOff="0" yOff="0" xSize="1" ySize="1"/>
      <DstRect xOff="0" yOff="0" xSize="replace_by_vrt_x_size"
ySize="replace_by_vrt_y_size"/>

Best regards,

Even

From even.rouault at mines-paris.org  Mon May 28 06:41:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 May 2012 15:41:07 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <4FC37823.6000404@gmail.com>
References: <4FC2924F.3010406@gmail.com> <1338153186.4fc298e2389ff@imp.free.fr>
	<4FC29B6E.5050201@gmail.com> <1338209731.4fc375c3548fe@imp.free.fr>
	<4FC37823.6000404@gmail.com>
Message-ID: <1338212467.4fc380735c60a@imp.free.fr>

>
> Hire is the full config.log:
> http://ubuntuone.com/3HlRqtTs0nu4NeguX2eIG4

I have had a look at this config.log and found that in the step where the
configure script tries to check the libjvm, a non-expected string "missing" is
placed on the gcc line, causing it to fail. I don't know where this comes from,
but perhaps from something that happened in a previous step. So I'd recommand
you to just "./configure --with-java --with-mdb" and drop other configure
options. If it works, you can try to reincorporate them progressively to find
the single one that cause the jvm detection step to fail.

>
> Thanks for you help
>
> L.
> --
> Luca Casagrande
> http://www.lucacasagrande.net
>



From beyhan at deprem.gov.tr  Mon May 28 06:37:59 2012
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Mon, 28 May 2012 16:37:59 +0300
Subject: [gdal-dev] ogr sql issue
In-Reply-To: <loom.20120528T152613-208@post.gmane.org>
References: <1338209714.11702.12.camel@localhost>
	<loom.20120528T152613-208@post.gmane.org>
Message-ID: <1338212279.22977.1.camel@localhost>

Dear Rahkohen,

You are right it works fine now.
Thanks for quick reply.
:)
On Mon, 2012-05-28 at 13:32 +0000, Jukka Rahkonen wrote:
> "integer","real","real","real"


Murat BEYHAN 


Jeofizik Y.M?h.
T.C. Ba?bakanl?k
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km.
Lodumlu/ANKARA
Tel: 312 2872680-1556
email:beyhan at deprem.gov.tr






-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From even.rouault at mines-paris.org  Mon May 28 06:49:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 May 2012 15:49:36 +0200
Subject: [gdal-dev] gdal opencl support
In-Reply-To: <000301cd3cc1$0d25fb00$2771f100$@vizexperts.com>
References: <000301cd3cc1$0d25fb00$2771f100$@vizexperts.com>
Message-ID: <1338212976.4fc3827051cdf@imp.free.fr>

Selon Yogesh Dahiya <yogesh at vizexperts.com>:

> Does gdal uses opencl for different resampling algorithms.
>
> If yes how can it be configured to use opencl?
>

The warping algorithms (as in gdalwarp) can use opencl acceleration provided
that you build GDAL with support for it. Currently, the build support is only
done for Unix (see the --with-opencl option of configure). For Windows, you
would have to hack in nmake.opt and alg/makefile.vc

>
> Thanks
>
>
>
>
>
>



From luca.casagrande at gmail.com  Mon May 28 06:50:51 2012
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Mon, 28 May 2012 15:50:51 +0200
Subject: [gdal-dev] GDAL with mdb support on Ubuntu 12.04
In-Reply-To: <1338212467.4fc380735c60a@imp.free.fr>
References: <4FC2924F.3010406@gmail.com> <1338153186.4fc298e2389ff@imp.free.fr>
	<4FC29B6E.5050201@gmail.com> <1338209731.4fc375c3548fe@imp.free.fr>
	<4FC37823.6000404@gmail.com> <1338212467.4fc380735c60a@imp.free.fr>
Message-ID: <4FC382BB.3030303@gmail.com>

Il 28/05/2012 15:41, Even Rouault ha scritto:
>>
>> Hire is the full config.log:
>> http://ubuntuone.com/3HlRqtTs0nu4NeguX2eIG4
>
> I have had a look at this config.log and found that in the step where the
> configure script tries to check the libjvm, a non-expected string "missing" is
> placed on the gcc line, causing it to fail. I don't know where this comes from,
> but perhaps from something that happened in a previous step. So I'd recommand
> you to just "./configure --with-java --with-mdb" and drop other configure
> options. If it works, you can try to reincorporate them progressively to find
> the single one that cause the jvm detection step to fail.
>

Bingo! :)
If I remove just --with-freexl=/usr/local all is fine and there is no 
configure error.

Thank you very much!
L.
-- 
Luca Casagrande
http://www.lucacasagrande.net

From Jukka.Rahkonen at mmmtike.fi  Mon May 28 07:03:40 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon, 28 May 2012 14:03:40 +0000
Subject: [gdal-dev] How to make VRT offsite areas white?
In-Reply-To: <1338212247.4fc37f9722511@imp.free.fr>
References: <loom.20120528T144820-31@post.gmane.org>
	<1338212247.4fc37f9722511@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A634568CB@suutari.haapa.mmm.fi>

 
Even Rouault wrote:
> 
> Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
> 
> > Hi,
> >
> > I thought this would be easy but it was not.
> >
> > I have a mosaic of images which do not fill the whole 
> bounding box of the
> > area.
> > I made a .VRT file the images and converted the virtual 
> raster into geotiff.
> > Now
> > I have a nice mosaic but it has black boxes in the areas 
> where I do not have
> > source data. An example of the result is here
> > http://latuviitta.org/documents/nodata_3.tif
> >
> > I would rather paint nodata areas with white instead of 
> black. But how can I
> > make it? I thought that gdalwarp -dstnodata would do it but 
> areas of missing
> > source data remains black
> > gdalwarp -dstnodata "255,255,255" nodata.vrt nodata_3.tif
> >
> > The following command does make the black box white but 
> unfortunately is is
> > also
> > changing everything that was black in the orininal images, 
> including all the
> > texts, into white:
> > gdalwarp -dstnodata "255,255,255" -srcnodata "0,0,0" 
> nodata.vrt nodata_3.tif
> >
> > So what is the correct way to do this simple task?
> 
> Jukka,
> 
> Several options :
> 
> - use the -addalpha option of gdalbuildvrt

Doing 
gdalbuildvrt -addalpha nodata_alpha.vrt *.tif

and then
gdalwarp -dstnodata "255,255,255" nodata_alpha.vrt white_nodata.tif

makes the desired result.


> - use nearblack -setalpha ( http://gdal.org/nearblack.html ) ?

Did not try this one.

> - cheat a bit and create a white image that you add as the 
> first position in
> your VRT.
> 
> This can be a single pixel image that you artifically expand 
> to full VRT size,
> like this :
> 
>       <SrcRect xOff="0" yOff="0" xSize="1" ySize="1"/>
>       <DstRect xOff="0" yOff="0" xSize="replace_by_vrt_x_size"
> ySize="replace_by_vrt_y_size"/>

I have nothing against cheating and I will try this with my real dataset. Dataset is pretty big and running it through gdalwarp takes several hours more time than running it through gdal_translate.


> Best regards,

Thank you once again.

-Jukka-

> 
> Even
> 

From jukka.rahkonen at mmmtike.fi  Mon May 28 07:28:15 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 May 2012 14:28:15 +0000 (UTC)
Subject: [gdal-dev] How to make VRT offsite areas white?
References: <loom.20120528T144820-31@post.gmane.org>
	<1338212247.4fc37f9722511@imp.free.fr>
Message-ID: <loom.20120528T161955-690@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> - cheat a bit and create a white image that you add as the first position in
> your VRT.
> 
> This can be a single pixel image that you artifically expand to full VRT size,
> like this :
> 
>       <SrcRect xOff="0" yOff="0" xSize="1" ySize="1"/>
>       <DstRect xOff="0" yOff="0" xSize="replace_by_vrt_x_size"
> ySize="replace_by_vrt_y_size"/>


This was the ultimate guru solution - simple, extremely fast and totally
undocumented.

I made an one pixel sized image "onepixel.tif" as you suggested and placed the
following SimpleSource as the first source for each band

<SimpleSource>
              <SourceFilename relativeToVRT="1">onepixel.tif</SourceFilename>
              <SourceBand>1</SourceBand>
              <SrcRect xOff="0" yOff="0" xSize="1" ySize="1" />
              <DstRect xOff="0" yOff="0" xSize="2000" ySize="2000" />
</SimpleSource>

Knowing tricks is fun but I could tolerate having some parameter driven way for
setting the VRT background colour.

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Mon May 28 08:53:12 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 May 2012 17:53:12 +0200
Subject: [gdal-dev] How to make VRT offsite areas white?
In-Reply-To: <loom.20120528T161955-690@post.gmane.org>
References: <loom.20120528T144820-31@post.gmane.org>
	<1338212247.4fc37f9722511@imp.free.fr>
	<loom.20120528T161955-690@post.gmane.org>
Message-ID: <1338220392.4fc39f68504dd@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
>
> > - cheat a bit and create a white image that you add as the first position
> in
> > your VRT.
> >
> > This can be a single pixel image that you artifically expand to full VRT
> size,
> > like this :
> >
> >       <SrcRect xOff="0" yOff="0" xSize="1" ySize="1"/>
> >       <DstRect xOff="0" yOff="0" xSize="replace_by_vrt_x_size"
> > ySize="replace_by_vrt_y_size"/>
>
>
> This was the ultimate guru solution - simple, extremely fast and totally
> undocumented.
>
> I made an one pixel sized image "onepixel.tif" as you suggested and placed
> the
> following SimpleSource as the first source for each band
>
> <SimpleSource>
>               <SourceFilename relativeToVRT="1">onepixel.tif</SourceFilename>
>               <SourceBand>1</SourceBand>
>               <SrcRect xOff="0" yOff="0" xSize="1" ySize="1" />
>               <DstRect xOff="0" yOff="0" xSize="2000" ySize="2000" />
> </SimpleSource>
>
> Knowing tricks is fun but I could tolerate having some parameter driven way
> for
> setting the VRT background colour.

Actually, I'm just thinking that there's another less convoluted way of doing
it. Try using "-vrtnodata 255 -hidenodata" as options of gdalbuildvrt. (This was
added in https://trac.osgeo.org/gdal/ticket/3327 )

>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From chaoyuejoy at gmail.com  Mon May 28 10:16:08 2012
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Mon, 28 May 2012 19:16:08 +0200
Subject: [gdal-dev] how to convert shapefile to netcdf?
Message-ID: <CAAN-aREZJcD=p4P_gdwyhAqv0Gm4eAE0Ao_NEDobaWcBSDxRyA@mail.gmail.com>

Dear all,

I have a shapefile of boreal foest (which further contains some ecoregion
types) in North America and I want to like convert it to a NetCDF file (or
numpy masked array) with a desired spatial resolution (let's say 0.5
degree) and then use this information to extract corresponding data from a
global NetCDF file. I spent past two days trying to find information online
but still have no clues. If anybody has done something similar, any hints
or suggestions are greatly appreciated. Thanks a lot.

best regards,

Chao
-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120528/464f7ede/attachment.html>

From chris.barker at noaa.gov  Mon May 28 11:39:02 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Mon, 28 May 2012 11:39:02 -0700
Subject: [gdal-dev] how to convert shapefile to netcdf?
In-Reply-To: <CAAN-aREZJcD=p4P_gdwyhAqv0Gm4eAE0Ao_NEDobaWcBSDxRyA@mail.gmail.com>
References: <CAAN-aREZJcD=p4P_gdwyhAqv0Gm4eAE0Ao_NEDobaWcBSDxRyA@mail.gmail.com>
Message-ID: <CALGmxEJb6nAGrc7W=KsfjqSs6fA1z0UWb-mJe-QV_3uUEEqjog@mail.gmail.com>

On Mon, May 28, 2012 at 10:16 AM, Chao YUE <chaoyuejoy at gmail.com> wrote:

> I have a shapefile of boreal foest (which further contains some ecoregion
> types) in North America and I want to like convert it to a NetCDF file (or
> numpy masked array)

Well, what's in the shape file? polygons? You'll need to know more
about what the data model is in the shapefile. try orginfo to see
what's in them.

But a few ideas:

If polygons, gdalrasterize may help -- it will create a raster "mask"
of  the polygon(s) in the shapefile.

Otherwise, you might use ogr (or pyshapefile) to read the shapefiles,
and go from there. If you need something like gdalrasterize, but it
for some reason isn't quite right, you could read the shapefiles in
python, then render them with PIL to give you a way to customize hw
it's done. You can convert a PIL image to a numpy array pretty easily
from there.

HTH,
  -Chris







 with a desired spatial resolution (let's say 0.5 degree)
> and then use this information to extract corresponding data from a global
> NetCDF file. I spent past two days trying to find information online but
> still have no clues. If anybody has done something similar, any hints or
> suggestions are greatly appreciated. Thanks a lot.
>
> best regards,
>
> Chao
> --
> ***********************************************************************************
> Chao YUE
> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
> UMR 1572 CEA-CNRS-UVSQ
> Batiment 712 - Pe 119
> 91191 GIF Sur YVETTE Cedex
> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
> ************************************************************************************
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959?? voice
7600 Sand Point Way NE ??(206) 526-6329?? fax
Seattle, WA ?98115 ? ? ??(206) 526-6317?? main reception

Chris.Barker at noaa.gov

From pcreso at pcreso.com  Mon May 28 12:31:38 2012
From: pcreso at pcreso.com (pcreso at pcreso.com)
Date: Mon, 28 May 2012 12:31:38 -0700 (PDT)
Subject: [gdal-dev] how to convert shapefile to netcdf?
In-Reply-To: <CAAN-aREZJcD=p4P_gdwyhAqv0Gm4eAE0Ao_NEDobaWcBSDxRyA@mail.gmail.com>
Message-ID: <1338233498.5861.YahooMailClassic@web160706.mail.bf1.yahoo.com>

I guess somewhat off topic for a devel list.... but my 02c

I'd use ogr2ogr to convert the shapefile to a GMT (Generic Mapping Tools) format vector file & use GMT to create the (COARDS compliant) netCDF grid file from the vector data.

GMT has several approaches possible, including triangulation, splines with tension, nearest neighbour, etc. You can use tools to convert polygons to grid values (much like gdalrasterize), or treat all the vertices as scattered point values...

If your global grid is also COARDS compliant, you can probably use GMT tools & some relatively simple scripting, to carry out the grid math/overlay operations as well.


Cheers,

?? Brent Wood

--- On Tue, 5/29/12, Chao YUE <chaoyuejoy at gmail.com> wrote:

From: Chao YUE <chaoyuejoy at gmail.com>
Subject: [gdal-dev] how to convert shapefile to netcdf?
To: gdal-dev at lists.osgeo.org
Date: Tuesday, May 29, 2012, 5:16 AM

Dear all,

I have a shapefile of boreal foest (which further contains some ecoregion types) in North America and I want to like convert it to a NetCDF file (or numpy masked array) with a desired spatial resolution (let's say 0.5 degree) and then use this information to extract corresponding data from a global NetCDF file. I spent past two days trying to find information online but still have no clues. If anybody has done something similar, any hints or suggestions are greatly appreciated. Thanks a lot.


best regards,

Chao
-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16


************************************************************************************


-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120528/1a461dad/attachment.html>

From csbruce at cubewerx.com  Mon May 28 15:06:51 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Mon, 28 May 2012 18:06:51 -0400
Subject: [gdal-dev] GDAL alpha channels
Message-ID: <201205282206.q4SM6pYk012805@tux.cubewerx.com>

I have run into a problem using GDAL to read TIFF images with a alpha
channels.  GDAL returns the source TIFF sample values verbatim regardless
of whether the alpha channel is associated (pre-multiplied) or unassociated
within the TIFF image samples.  (In each alpha model, the same pixel
value with the same alpha value will have different sample values.)

GDAL does not appear to enforce a specific alpha model in its interface
(pre-multiplied or non-pre-multiplied) and does not appear to offer any
indication of which is currently being used.  This creates a dead end as
far as the GDAL interface goes.  My system and most image formats (e.g.,
PNG) use the non-pre-multiplied alpha model.  TIFF can use either.

What is a user supposed to do about this?

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
     "How many legs does a dog have if you call the tail a leg?  Four.
      Calling a tail a leg doesn't make it a leg." -- Abraham Lincoln

From geoffrey.peter.burns at gmail.com  Tue May 29 00:19:59 2012
From: geoffrey.peter.burns at gmail.com (Geoff Burns)
Date: Tue, 29 May 2012 17:19:59 +1000
Subject: [gdal-dev] .NET and OGR writing to stream
Message-ID: <CAKR7qkXvi3rb6sHqvaXLVGipz9OvQ-PA8t3K14pMzPN9aab3qA@mail.gmail.com>

Just reading through this thread about GDAL, C# and memory streams as
I have a similar problem.

The thread seemed to end on a positive note with Maksim Sestic and
Even Rouault seeming to reach a conclusion.

However when I started using the API's Maksim & Even where discussing
I found that Gdal.VSIFWriteL took a string instead of byte[] and
Gdal.VSIFReadL did not seem to exist.

Tamas's suggestion of reading data into a byte array will not work for
me as I would have to write the GeoTiff data to disk in reorder to
read it into the byte array in order to manipulate it in memory which
seems wasteful.

I reached an impasse.

Surely other people in the .NET world want use GDAL without hitting
the disk whenever they want to generate or transform data.

Does anyone have any experience in getting the csharp GDAL API's to
talk to memory instead of disk?

Regards,
Geoff

-----Original Message-----
> 2011/8/03 Maksim Sestic
>
Hi Even,

That's exactly what I was looking for. Yes, Gdal.VSIF* managed bindings are
there. Alas, I've been looking for them under Ogr methods :-)

Regards,
Maksim Sestic


-----Original Message-----
From: Even Rouault
Subject: RE: [gdal-dev] .NET and OGR writing to stream


> Hi Tamas,
>
>
>
> I don't know how to apply the same principle onto OGR drivers (not GDAL).
> I'm trying to create GML structure in memory using OGR driver, then handle
> resulting XML string further. Don't want to write dataset to a file, then
> read the file back to a string.

With the OGR GML driver, you can write to /vsimem/some.gml for example. And
then
you should be able to read that in-memory file with gdal.VSIFOpenL() and
read
its content with gdal.VSIFReadL(). However I'm not sure that the C# bindings
have been updated to support those VSIF*L functions.

There are examples of you to use those API in Python there :
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/rfc30.py .

The C# version should be close (provided that the bindings exist for it of
course)

>
>
>
> Regards,
>
> Maksim Sestic
>
>
>
>   _____
>
> From: Tamas Szekeres
> Sent: Monday, August 01, 2011 13:05
> To: Maksim Sestic
> Subject: Re: [gdal-dev] .NET and OGR writing to stream
>
>
>
> Maksim,
>
> You can refer to the example
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
> to see how to read data into a byte array and then you can write this
array

> directly to the memory stream.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/7/31 Maksim Sestic
>
> Hi all,
>
>
>
> Is there any example of OGR driver writing to memory stream (instead of
file

> stream), in .NET?
>
>

From fjitiaux at gmail.com  Tue May 29 00:45:36 2012
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Tue, 29 May 2012 09:45:36 +0200
Subject: [gdal-dev] DDS format and World Wind layer
Message-ID: <CAL81ghA2649MYxuACiZEDO3vcoST5=BPLog-2Le8r8ADONgn4w@mail.gmail.com>

Hi all,

first I would like to know if the DDS (Direct Draw Surface) format is
planed to be integrated in Gdal. This format is used in World Wind and DDS
tiles are loaded faster than JPEG or PNG tiles.

I would like also to know if it's planed to have the possibility of making
World Wind layers. The World Wind SDK is in Java and I d'on't really know
if to make a World Wind layer in Gdal or others bindings than Java's will
be useful.
In the World Wind SDK there's some class which use Gdal but for for example
it's not possible to read all formats managed by Gdal, their list of
formats seems shorter than Gdal's. And the list of SRS is very short then
it's difficult to warp some Dataset. That's why I prefer to use Gdal to
warp, transform and get tiles.

Thanks.

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120529/f5847e6a/attachment.html>

From szekerest at gmail.com  Tue May 29 00:54:41 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 29 May 2012 09:54:41 +0200
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <201205282206.q4SM6pYk012805@tux.cubewerx.com>
References: <201205282206.q4SM6pYk012805@tux.cubewerx.com>
Message-ID: <CACALY+QdVaUGMWkkg6zOgH2BYF380DQ5nKu-Qvut3CWNbspupA@mail.gmail.com>

I have added a ticked for such an issue long ago, but I don't remember
what would be the expected solution.
http://trac.osgeo.org/gdal/ticket/2279

There should be an external config option to instruct the driver which
representation should be used.

Best regards,

Tamas



2012/5/29 Craig Bruce <csbruce at cubewerx.com>:
> I have run into a problem using GDAL to read TIFF images with a alpha
> channels. ?GDAL returns the source TIFF sample values verbatim regardless
> of whether the alpha channel is associated (pre-multiplied) or unassociated
> within the TIFF image samples. ?(In each alpha model, the same pixel
> value with the same alpha value will have different sample values.)
>
> GDAL does not appear to enforce a specific alpha model in its interface
> (pre-multiplied or non-pre-multiplied) and does not appear to offer any
> indication of which is currently being used. ?This creates a dead end as
> far as the GDAL interface goes. ?My system and most image formats (e.g.,
> PNG) use the non-pre-multiplied alpha model. ?TIFF can use either.
>
> What is a user supposed to do about this?
>
> --------------------------+----------------------+--------------------------
> Dr. Craig S. Bruce ? ? ? ?| Ph 819-771-8303 x205 | ? ? ? ? ? ? CubeWerx Inc.
> Senior Software Developer | ? Fax 819-771-8388 ? | ?Gatineau, Qu?bec, Canada
> csbruce at cubewerx.com ? ? ?| ?http://csbruce.com/ | ?http://www.cubewerx.com/
> --------------------------+----------------------+--------------------------
> ? ? "How many legs does a dog have if you call the tail a leg? ?Four.
> ? ? ?Calling a tail a leg doesn't make it a leg." -- Abraham Lincoln
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Tue May 29 01:41:18 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 29 May 2012 10:41:18 +0200
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <CAKR7qkXvi3rb6sHqvaXLVGipz9OvQ-PA8t3K14pMzPN9aab3qA@mail.gmail.com>
References: <CAKR7qkXvi3rb6sHqvaXLVGipz9OvQ-PA8t3K14pMzPN9aab3qA@mail.gmail.com>
Message-ID: <CACALY+RiP1L1v9s=81543zrpmFhArrSGOsRakYQeEffwkQWqFA@mail.gmail.com>

VSIF* functions are not properly mapped to the C# bindings, VSIFReadL
has python specific implementation only, as far as I see.
I'm not sure whether this API should officially be published or not,
since I don't remember about an RFC or a ticket about the expected
requirements and type mapping suggestions (README.typemaps) or
examples.

Best regards,

Tamas



2012/5/29 Geoff Burns <geoffrey.peter.burns at gmail.com>:
> Just reading through this thread about GDAL, C# and memory streams as
> I have a similar problem.
>
> The thread seemed to end on a positive note with Maksim Sestic and
> Even Rouault seeming to reach a conclusion.
>
> However when I started using the API's Maksim & Even where discussing
> I found that Gdal.VSIFWriteL took a string instead of byte[] and
> Gdal.VSIFReadL did not seem to exist.
>
> Tamas's suggestion of reading data into a byte array will not work for
> me as I would have to write the GeoTiff data to disk in reorder to
> read it into the byte array in order to manipulate it in memory which
> seems wasteful.
>
> I reached an impasse.
>
> Surely other people in the .NET world want use GDAL without hitting
> the disk whenever they want to generate or transform data.
>
> Does anyone have any experience in getting the csharp GDAL API's to
> talk to memory instead of disk?
>
> Regards,
> Geoff
>
> -----Original Message-----
>> 2011/8/03 Maksim Sestic
>>
> Hi Even,
>
> That's exactly what I was looking for. Yes, Gdal.VSIF* managed bindings are
> there. Alas, I've been looking for them under Ogr methods :-)
>
> Regards,
> Maksim Sestic
>
>
> -----Original Message-----
> From: Even Rouault
> Subject: RE: [gdal-dev] .NET and OGR writing to stream
>
>
>> Hi Tamas,
>>
>>
>>
>> I don't know how to apply the same principle onto OGR drivers (not GDAL).
>> I'm trying to create GML structure in memory using OGR driver, then handle
>> resulting XML string further. Don't want to write dataset to a file, then
>> read the file back to a string.
>
> With the OGR GML driver, you can write to /vsimem/some.gml for example. And
> then
> you should be able to read that in-memory file with gdal.VSIFOpenL() and
> read
> its content with gdal.VSIFReadL(). However I'm not sure that the C# bindings
> have been updated to support those VSIF*L functions.
>
> There are examples of you to use those API in Python there :
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/rfc30.py .
>
> The C# version should be close (provided that the bindings exist for it of
> course)
>
>>
>>
>>
>> Regards,
>>
>> Maksim Sestic
>>
>>
>>
>> ? _____
>>
>> From: Tamas Szekeres
>> Sent: Monday, August 01, 2011 13:05
>> To: Maksim Sestic
>> Subject: Re: [gdal-dev] .NET and OGR writing to stream
>>
>>
>>
>> Maksim,
>>
>> You can refer to the example
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
>> to see how to read data into a byte array and then you can write this
> array
>
>> directly to the memory stream.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>>
>> 2011/7/31 Maksim Sestic
>>
>> Hi all,
>>
>>
>>
>> Is there any example of OGR driver writing to memory stream (instead of
> file
>
>> stream), in .NET?
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nicolas.simon at spw.wallonie.be  Tue May 29 02:10:53 2012
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Tue, 29 May 2012 11:10:53 +0200
Subject: [gdal-dev] Multipolygon with holes from OCI becomes invalid
Message-ID: <94D09947F0049948855245E630E6FA4E0118177B@si0140.mrw.wallonie.int>

Hi,
	I had a similar problem as the one described in http://trac.osgeo.org/gdal/ticket/3753
	I found the problem, and provided a patch.
	The patch resolves my problem and the one described in the ticket.

	Can someone with commit access update the trunk with the patch ? (and close the ticket)

	Thanks

Nicolas Simon

From oki at hunes.co.jp  Tue May 29 03:26:04 2012
From: oki at hunes.co.jp (OKI Miyuki)
Date: Tue, 29 May 2012 19:26:04 +0900
Subject: [gdal-dev] GDAL/OGR patch, codepage conversion on windows
Message-ID: <20120529192603.4CE9.ED6D4690@hunes.co.jp>

Hi all,

   I made patch for OGR cpl_recode_stub.cpp,
   to enable codepage conversion on windows platform.

CODEPAGE  Somthing like this  "CP932"  to "UTF-8"
                                                  "CP1252" to "UTF-8"
                                                  ...
and
                                                  "CP932"  from "UTF-8"
                                                  "CP1252" from "UTF-8"
                                                  ...

cheers,
Miyuki OKI

----------------------------------------------------------------------------------
*** port/cpl_recode_stub.cpp	Wed Jan  4 16:03:15 2012
--- ../../gdal-1.9.0/port/cpl_recode_stub.cpp	Tue May 29 19:03:28 2012
***************
*** 46,51 ****
--- 46,56 ----
                            const char* src, unsigned srclen);
  static int utf8test(const char* src, unsigned srclen);
  
+ #ifdef _WIN32
+ char* code_to_code( const char* src,
+                            unsigned src_code_page, unsigned dst_code_page );
+ #endif
+ 
  #ifdef FUTURE_NEEDS
  static const char* utf8fwd(const char* p, const char* start, const char* end);
  static const char* utf8back(const char* p, const char* start, const char*end);
***************
*** 128,133 ****
--- 133,165 ----
          return pszResult;
      }
  
+ #ifdef _WIN32
+ /* ---------------------------------------------------------------------*/
+ /*      CPXXX to UTF8                                                   */
+ /* ---------------------------------------------------------------------*/
+    if( strncmp(pszSrcEncoding,"CP",2) == 0 
+        && strcmp(pszDstEncoding,CPL_ENC_UTF8) == 0 )
+    {
+        int nCode = atoi( pszSrcEncoding + 2 );
+        if( nCode > 0 ) {
+           return code_to_code( pszSource, nCode, 65001 );
+        }
+    }
+ 
+ /* ---------------------------------------------------------------------*/
+ /*      UTF8 to CPXXX
+ /* ---------------------------------------------------------------------*/
+    if( strcmp(pszSrcEncoding,CPL_ENC_UTF8) == 0
+        && strncmp(pszDstEncoding,"CP",2) == 0 )
+    {
+         int nCode = atoi( pszDstEncoding + 2 );
+         if( nCode > 0 ) {
+             return code_to_code( pszSource, 65001, nCode );
+         }
+    }
+ 
+ #endif
+ 
  /* -------------------------------------------------------------------- */
  /*      Anything else to UTF-8 is treated as ISO8859-1 to UTF-8 with    */
  /*      a one-time warning.                                             */
***************
*** 993,998 ****
--- 1025,1105 ----
    return count;
  }
  
+ #ifdef _WIN32
+ /************************************************************************/
+ /*                             code_to_code()                           */
+ /************************************************************************/
+ 
+ /* Convert an CODEPAGE (ie normal c-string) byte stream 
+      to another CODEPAGE (ie normal c-string) byte stream.
+ 
+     \a src is target c-string byte stream (including a null terminator).
+     \a src_code_page is target c-string byte code page.
+     \a dst_code_page is destination c-string byte code page.
+ 
+    UTF7          65000
+    UTF8          65001
+    OEM-US          437
+    OEM-ALABIC      720
+    OEM-GREEK       737
+    OEM-BALTIC      775
+    OEM-MLATIN1     850
+    OEM-LATIN2      852
+    OEM-CYRILLIC    855
+    OEM-TURKISH     857
+    OEM-MLATIN1P    858
+    OEM-HEBREW      862
+    OEM-RUSSIAN     866
+ 
+    THAI            874
+    SJIS            932
+    GBK             936
+    KOREA           949
+    BIG5            950
+ 
+    EUROPE         1250
+    CYRILLIC       1251
+    LATIN1         1252
+    GREEK          1253
+    TURKISH        1254
+    HEBREW         1255
+    ARABIC         1256
+    BALTIC         1257
+    VIETNAM        1258
+ 
+    ISO-LATIN1    28591
+    ISO-LATIN2    28592
+    ISO-LATIN3    28593
+    ISO-BALTIC    28594
+    ISO-CYRILLIC  28595
+    ISO-ARABIC    28596
+    ISO-HEBREW    28598
+    ISO-TURKISH   28599
+    ISO-LATIN9    28605
+ 
+    ISO-2022-JP   50220
+ 
+ */
+ 
+ # include <windows.h>
+ 
+ char* code_to_code( const char* src, unsigned src_code_page, unsigned dst_code_page ) {
+   if( NULL == src || src_code_page == dst_code_page )  return (char*)src;
+   int wlen = MultiByteToWideChar( src_code_page, 0, src, -1, 0, 0 );
+   wchar_t* tbuf = (wchar_t*)CPLCalloc(sizeof(wchar_t),wlen+1);
+   tbuf[wlen] = 0;
+   MultiByteToWideChar( src_code_page, 0, src, -1, tbuf, wlen+1 );
+   int len = WideCharToMultiByte( dst_code_page, 0, tbuf, -1, 0, 0, 0, 0 );
+   char* result = (char*)CPLCalloc(sizeof(char),len+1);
+   WideCharToMultiByte( dst_code_page, 0, tbuf, -1, result, len+1, 0, 0 );
+   result[len] = 0;
+   CPLFree(tbuf);
+   return result;
+ }
+ 
+ #endif
+ 
+ 
  /*
  ** For now we disable the rest which is locale() related.  We may need 
  ** parts of it later. 


From yogesh at vizexperts.com  Tue May 29 04:15:35 2012
From: yogesh at vizexperts.com (Yogesh Dahiya)
Date: Tue, 29 May 2012 16:45:35 +0530
Subject: [gdal-dev] Building gdal with opencl support on windows
Message-ID: <003201cd3d8c$603bcce0$20b366a0$@vizexperts.com>

If anyone knows how to hack nmake.opt and alg/makefile.vc to build gdal with
opencl support on windows, please do reply.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120529/a6299f7c/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue May 29 07:23:00 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 May 2012 14:23:00 +0000 (UTC)
Subject: [gdal-dev] How to make VRT offsite areas white?
References: <loom.20120528T144820-31@post.gmane.org>
	<1338212247.4fc37f9722511@imp.free.fr>
	<loom.20120528T161955-690@post.gmane.org>
	<1338220392.4fc39f68504dd@imp.free.fr>
Message-ID: <loom.20120529T155424-338@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> >
> > Knowing tricks is fun but I could tolerate having some parameter driven way
> > for
> > setting the VRT background colour.
> 
> Actually, I'm just thinking that there's another less convoluted way of doing
> it. Try using "-vrtnodata 255 -hidenodata" as options of gdalbuildvrt. 
(This was
> added in https://trac.osgeo.org/gdal/ticket/3327 )

Yes, -vrtnodata 255 -hidenodata made the desired result too. I had read about
those parameters in the buildvrt usage document but I did not realize I should
use those. Even now when I know how to do the trick I must admit that I still
don't really understand the documentation from this part. For users like me I
suggest to add a one line description into buildvrt usage examples somehow like

"Make a virtual mosaic with blue background colour (RGB: 0 0 255)"
gdalbuildvrt -hidenodata -vrtnodata "0 0 255" doq_index.vrt doq/*.tif

-Jukka Rahkonen-


From etourigny.dev at gmail.com  Tue May 29 07:38:52 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 29 May 2012 11:38:52 -0300
Subject: [gdal-dev] proj.4 +b parameter has different precision on i386 vs.
	amd64
Message-ID: <CA+TxYvMjs4i1zdG_93asq4oWp0AMO_JVR3zsGLB5r1dmK84njg@mail.gmail.com>

Hi list,

It seems that the +b parameter of Proj.4 strings generated by gdal can
have different precisions, dependent on the architecture (i386 vs.
ams64) for various linux flavors and gdal versions (1.6 - 1.9).

The CRS from EPSG:4131 can have slightly different values: (
+b=6356075.413140239 vs. +b=6356075.41314024 )

i386:
+proj=utm +zone=48 +a=6377276.345 +b=6356075.413140239
+towgs84=198,881,317,0,0,0,0 +units=m +no_defs

amd64:
+proj=utm +zone=48 +a=6377276.345 +b=6356075.41314024
+towgs84=198,881,317,0,0,0,0 +units=m +no_defs


==> Can this happen with other values?

==> Is it an artifact of the calculation of the semi-minor axis from
semi-major and inv-flattening in ogr_srs_proj4.cpp ?

==> Is this a bug?


On my system (gdal 1.9, ubuntu 11.10, amd64) here is what the WKT and
PROJ.4 look like

$ gdalsrsinfo EPSG:4131

PROJ.4 : '+proj=longlat +a=6377276.345 +b=6356075.4131402401
+towgs84=198,881,317,0,0,0,0 +no_defs '

OGC WKT :
GEOGCS["Indian 1960",
    DATUM["Indian_1960",
        SPHEROID["Everest 1830 (1937 Adjustment)",6377276.345,300.8017,
            AUTHORITY["EPSG","7015"]],
        TOWGS84[198,881,317,0,0,0,0],
        AUTHORITY["EPSG","6131"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4131"]]



More information in this qgis-dev thread:
http://lists.osgeo.org/pipermail/qgis-developer/2012-May/020357.html

From ivan.lucena at princeton-ma.us  Tue May 29 11:35:18 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue, 29 May 2012 13:35:18 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Multipolygon_with_holes_from_OCI_become?=
	=?iso-8859-1?q?s_invalid?=
In-Reply-To: <94D09947F0049948855245E630E6FA4E0118177B@si0140.mrw.wallonie.int>
References: <94D09947F0049948855245E630E6FA4E0118177B@si0140.mrw.wallonie.int>
Message-ID: <20120529183518.29062.qmail@s466.sureserver.com>

I am going to take a look and report back on the ticket. OK?


>  -------Original Message-------
>  From: Nicolas Simon <nicolas.simon at spw.wallonie.be>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] Multipolygon with holes from OCI becomes invalid
>  Sent: May 29 '12 04:10
>  
>  Hi,
>  I had a similar problem as the one described in http://trac.osgeo.org/gdal/ticket/3753
>  I found the problem, and provided a patch.
>  The patch resolves my problem and the one described in the ticket.
>  
>  Can someone with commit access update the trunk with the patch ? (and close the ticket)
>  
>  Thanks
>  
>  Nicolas Simon
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From even.rouault at mines-paris.org  Tue May 29 11:44:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 May 2012 20:44:35 +0200
Subject: [gdal-dev] How to make VRT offsite areas white?
In-Reply-To: <loom.20120529T155424-338@post.gmane.org>
References: <loom.20120528T144820-31@post.gmane.org>
	<1338220392.4fc39f68504dd@imp.free.fr>
	<loom.20120529T155424-338@post.gmane.org>
Message-ID: <201205292044.35678.even.rouault@mines-paris.org>

> 
> "Make a virtual mosaic with blue background colour (RGB: 0 0 255)"
> gdalbuildvrt -hidenodata -vrtnodata "0 0 255" doq_index.vrt doq/*.tif

Added as suggested. Generally, we'd surely welcome doc improvements from power 
users like you.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue May 29 11:58:18 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 29 May 2012 11:58:18 -0700
Subject: [gdal-dev] proj.4 +b parameter has different precision on i386
 vs. amd64
In-Reply-To: <CA+TxYvMjs4i1zdG_93asq4oWp0AMO_JVR3zsGLB5r1dmK84njg@mail.gmail.com>
References: <CA+TxYvMjs4i1zdG_93asq4oWp0AMO_JVR3zsGLB5r1dmK84njg@mail.gmail.com>
Message-ID: <CA+YzLBdji8uV8J42KbNHe7Sge20G2oPC9jH3kf1iUxnrVC8sMA@mail.gmail.com>

On Tue, May 29, 2012 at 7:38 AM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Hi list,
>
> It seems that the +b parameter of Proj.4 strings generated by gdal can
> have different precisions, dependent on the architecture (i386 vs.
> ams64) for various linux flavors and gdal versions (1.6 - 1.9).
>
> The CRS from EPSG:4131 can have slightly different values: (
> +b=6356075.413140239 vs. +b=6356075.41314024 )
>
> i386:
> +proj=utm +zone=48 +a=6377276.345 +b=6356075.413140239
> +towgs84=198,881,317,0,0,0,0 +units=m +no_defs
>
> amd64:
> +proj=utm +zone=48 +a=6377276.345 +b=6356075.41314024
> +towgs84=198,881,317,0,0,0,0 +units=m +no_defs
>
>
> ==> Can this happen with other values?

Etienne,

I imagine it can, though this value is particularly
sensitive to it since it is computed.

> ==> Is it an artifact of the calculation of the semi-minor axis from
> semi-major and inv-flattening in ogr_srs_proj4.cpp ?
> ==> Is this a bug?

In my opinion it is not a bug.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From yogesh at vizexperts.com  Tue May 29 13:54:05 2012
From: yogesh at vizexperts.com (Yogesh Dahiya)
Date: Wed, 30 May 2012 02:24:05 +0530
Subject: [gdal-dev] setting warp options to use opencl
Message-ID: <003d01cd3ddd$30db5640$929202c0$@vizexperts.com>

How to configure gdalwarpOptions to use openclkernel.

Like I did

warpOptions->papszWarpOptions=CSLSetNameValue(papszList,"USE_OPENCL","YES");

It compiled but I don't think so its using openclkernel.

 

In gdalwarpkernel they are checking WarpOptions for selecting between
GENERAL_CASE and OPENCL_CASE..

 

So what is actually required to select opencl case.

Thanks

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120530/66b15efc/attachment.html>

From csbruce at cubewerx.com  Tue May 29 14:00:53 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Tue, 29 May 2012 17:00:53 -0400
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <CACALY+QdVaUGMWkkg6zOgH2BYF380DQ5nKu-Qvut3CWNbspupA@mail.gmail.com>
Message-ID: <201205292100.q4TL0rmj026950@tux.cubewerx.com>

Tamas Szekeres <szekerest at gmail.com> wrote:

> I have added a ticked for such an issue long ago, but I don't remember
> what would be the expected solution.
> http://trac.osgeo.org/gdal/ticket/2279
>
> There should be an external config option to instruct the driver which
> representation should be used.

I think it would be better for GDAL to present a single alpha model through
its interface, as it does with the pixel-is-area vs. pixel-is-point
issue.  As far as I am aware, TIFF is the only common format that uses
a pre-multiplied alpha.  However, pre-multiplied alphas present a number
of problems, including strange or non-integration with color models other
than RGB, and throwing away useful information.  For example, if you take
a pre-multiplied RGBA TIFF and need to write it out to a nodata-valued
output format (effectively, a 1-bit alpha channel), you need to recreate
the information that pre-multiplication threw away, and this can only be
done approximately.  The better fixed model to use is non-pre-multiplied,
like PNG uses.

At the moment, all GDAL applications process alpha values incorrectly
(since it's not possible _to_ process them correctly).  I'm not sure
if many people have noticed this or if or what they've done about it,
if anything.  The problem may be obscured because for sources with
alpha values of only 0 and MAX, there really isn't a problem.  Do any
applications expect pre-multiplied alphas?  If so, they're only getting
them from some TIFF images and are processing other sources incorrectly.

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
            "All the world's a player and we are merely stages."

From warmerdam at pobox.com  Tue May 29 14:12:45 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 29 May 2012 14:12:45 -0700
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <201205292100.q4TL0rmj026950@tux.cubewerx.com>
References: <CACALY+QdVaUGMWkkg6zOgH2BYF380DQ5nKu-Qvut3CWNbspupA@mail.gmail.com>
	<201205292100.q4TL0rmj026950@tux.cubewerx.com>
Message-ID: <CA+YzLBdk+gLV7HswYyNUy8utWfBFV9gFThUXHoXoUH8r0TB4vg@mail.gmail.com>

Craig,

My opinion is that applications should assume alpha is not pre-multiplied.
I have been hesitant to "un-premultiply" premultiplied TIFF images - partly
because it is hard to hit all the appropriate code paths safely and partly
because the result will be lossy.

Going forward GDAL should do one of two things:

1) provide a metadata item so applications can know those rare
circumstances when alpha is pre-multiplied.

2) un-premultiply premultiplied alpha when encountered.

As you note it doesn't really matter when alpha is primarily used
for on/off masking so we have gotten away over the years with
only a few complaints about the topic.


On Tue, May 29, 2012 at 2:00 PM, Craig Bruce <csbruce at cubewerx.com> wrote:
> Tamas Szekeres <szekerest at gmail.com> wrote:
>
>> I have added a ticked for such an issue long ago, but I don't remember
>> what would be the expected solution.
>> http://trac.osgeo.org/gdal/ticket/2279
>>
>> There should be an external config option to instruct the driver which
>> representation should be used.
>
> I think it would be better for GDAL to present a single alpha model through
> its interface, as it does with the pixel-is-area vs. pixel-is-point
> issue. ?As far as I am aware, TIFF is the only common format that uses
> a pre-multiplied alpha. ?However, pre-multiplied alphas present a number
> of problems, including strange or non-integration with color models other
> than RGB, and throwing away useful information. ?For example, if you take
> a pre-multiplied RGBA TIFF and need to write it out to a nodata-valued
> output format (effectively, a 1-bit alpha channel), you need to recreate
> the information that pre-multiplication threw away, and this can only be
> done approximately. ?The better fixed model to use is non-pre-multiplied,
> like PNG uses.
>
> At the moment, all GDAL applications process alpha values incorrectly
> (since it's not possible _to_ process them correctly). ?I'm not sure
> if many people have noticed this or if or what they've done about it,
> if anything. ?The problem may be obscured because for sources with
> alpha values of only 0 and MAX, there really isn't a problem. ?Do any
> applications expect pre-multiplied alphas? ?If so, they're only getting
> them from some TIFF images and are processing other sources incorrectly.
>
> --------------------------+----------------------+--------------------------
> Dr. Craig S. Bruce ? ? ? ?| Ph 819-771-8303 x205 | ? ? ? ? ? ? CubeWerx Inc.
> Senior Software Developer | ? Fax 819-771-8388 ? | ?Gatineau, Qu?bec, Canada
> csbruce at cubewerx.com ? ? ?| ?http://csbruce.com/ | ?http://www.cubewerx.com/
> --------------------------+----------------------+--------------------------
> ? ? ? ? ? ?"All the world's a player and we are merely stages."
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From even.rouault at mines-paris.org  Tue May 29 14:41:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 May 2012 23:41:24 +0200
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <CA+YzLBdk+gLV7HswYyNUy8utWfBFV9gFThUXHoXoUH8r0TB4vg@mail.gmail.com>
References: <CACALY+QdVaUGMWkkg6zOgH2BYF380DQ5nKu-Qvut3CWNbspupA@mail.gmail.com>
	<201205292100.q4TL0rmj026950@tux.cubewerx.com>
	<CA+YzLBdk+gLV7HswYyNUy8utWfBFV9gFThUXHoXoUH8r0TB4vg@mail.gmail.com>
Message-ID: <201205292341.25097.even.rouault@mines-paris.org>

Le mardi 29 mai 2012 23:12:45, Frank Warmerdam a ?crit :
> Craig,
> 
> My opinion is that applications should assume alpha is not pre-multiplied.
> I have been hesitant to "un-premultiply" premultiplied TIFF images - partly
> because it is hard to hit all the appropriate code paths safely and partly
> because the result will be lossy.
> 
> Going forward GDAL should do one of two things:
> 
> 1) provide a metadata item so applications can know those rare
> circumstances when alpha is pre-multiplied.
> 
> 2) un-premultiply premultiplied alpha when encountered.
> 
> As you note it doesn't really matter when alpha is primarily used
> for on/off masking so we have gotten away over the years with
> only a few complaints about the topic.

There will be likely a compatibility problem if we do this, because GDAL up to 
now writes TIFF RGBA images with EXTRASAMPLE_ASSOCALPHA (pre-multiplied), but 
I think in most cases the data that people have feed in the GTiff driver was 
not pre-multiplied. So if we un-premultiply this would cause issues in case 
the alpha value is not 0 or 255.

And a few other software seem to also actually ignore the flag. For example, I 
gdal_translated autotest/gcore/data/stefan_full_rgba.png (that contains values 
in the alpha band that are different from 0 and 255) to a TIFF image, and 
opened it with GIMP and resaved it as a PNG. The out PNG is the same as the 
input PNG. Same with the 'convert' utility from ImageMagick.

Other interesting experiment, open the original PNG with GIMP and save it as a 
TIFF : GIMP also sets the extra sample flag to EXTRASAMPLE_ASSOCALPHA but 
writes non-associated values.
With convert from ImageMagick, PNG->TIFF gives EXTRASAMPLE_UNASSALPHA this 
time, but the data is still non-associated.

So, basically those 2 software happily ignore the value of the extra sample 
flag, write different values for it, and interpret it as unassociated.

On the other hand, I've tested with GlobalMapper, and it displays only 
correctly the TIFF converted with ImageMagick (the one where 
EXTRASAMPLE_UNASSALPHA is set). So at first sight, it seems to honour the flag 
properly.

The temporary conclusion of that is that there are likely images in the wild 
where the value of the flag does not reflect the reality of the imagery 
values... But, GDAL should likely be fixed to set EXTRASAMPLE_UNASSALPHA to 
better reflect the way it is generally used (presumably).

Best regards,

Even

From even.rouault at mines-paris.org  Tue May 29 15:03:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 May 2012 00:03:45 +0200
Subject: [gdal-dev] GDAL/OGR patch, codepage conversion on windows
In-Reply-To: <20120529192603.4CE9.ED6D4690@hunes.co.jp>
References: <20120529192603.4CE9.ED6D4690@hunes.co.jp>
Message-ID: <201205300003.45347.even.rouault@mines-paris.org>

Le mardi 29 mai 2012 12:26:04, OKI Miyuki a ?crit :
> Hi all,
> 
>    I made patch for OGR cpl_recode_stub.cpp,
>    to enable codepage conversion on windows platform.
> 

Miyuki,

Thanks for your patch. I've incorporated it with some adjustements (a few 
error checks and warnings reporting in case the conversion isn't entirely 
successfull) in http://trac.osgeo.org/gdal/changeset/24514. Note: it is best 
to also create a ticket in GDAL Trac with the proposed patch, otherwise there 
is a risk of them getting forgotten in the email traffic.

Best regards,

Even

From even.rouault at mines-paris.org  Tue May 29 15:30:03 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 May 2012 00:30:03 +0200
Subject: [gdal-dev] DDS format and World Wind layer
In-Reply-To: <CAL81ghA2649MYxuACiZEDO3vcoST5=BPLog-2Le8r8ADONgn4w@mail.gmail.com>
References: <CAL81ghA2649MYxuACiZEDO3vcoST5=BPLog-2Le8r8ADONgn4w@mail.gmail.com>
Message-ID: <201205300030.03099.even.rouault@mines-paris.org>

Le mardi 29 mai 2012 09:45:36, Florent JITIAUX a ?crit :
> Hi all,
> 
> first I would like to know if the DDS (Direct Draw Surface) format is
> planed to be integrated in Gdal.

Not to my knowledge. You would be interested in writing DDS tiles more than 
reading them, right ? To my understanding, the usual way of doing this is to 
have a graphical card and use some OpenGL or Direct3D to feed an uncompressed 
texture and get the compressed data back. Pure software implementation might 
exist, but I'm wondering if there are not software patents involved. At least, 
on the uncompression side, since it has been a long time issue in integrating 
S3TX decompression in Mesa.

http://code.google.com/p/gimp-dds/ could be a starting point for an 
integration in Open Source software.

> This format is used in World Wind and DDS
> tiles are loaded faster than JPEG or PNG tiles.
> 
> I would like also to know if it's planed to have the possibility of making
> World Wind layers.

There's a WorldWind minidriver in the GDAL WMS driver to read World Wind 
layers. See http://gdal.org/frmt_wms.html .

If you need to generate tiles for world wind, I believe that you could use 
something like the gdal2tiles.py script with a few adaptations, but I'm just 
guessing here being pretty much ignorant of WorldWind tiling particularities.

From oki at hunes.co.jp  Tue May 29 17:22:59 2012
From: oki at hunes.co.jp (OKI Miyuki)
Date: Wed, 30 May 2012 09:22:59 +0900
Subject: [gdal-dev] GDAL/OGR patch, codepage conversion on windows
In-Reply-To: <201205300003.45347.even.rouault@mines-paris.org>
References: <20120529192603.4CE9.ED6D4690@hunes.co.jp>
	<201205300003.45347.even.rouault@mines-paris.org>
Message-ID: <20120530092258.E62F.ED6D4690@hunes.co.jp>

>  Note: it is best 
> to also create a ticket in GDAL Trac with the proposed patch, otherwise there 
> is a risk of them getting forgotten in the email traffic.

Even,

Thank you for repoly.
Yes, next time, I 'll create a ticket in GDAL Trac.

I'll check
http://trac.osgeo.org/gdal/changeset/24514

cheers,

Miyuki OKI

From avtoader at gmail.com  Tue May 29 19:04:06 2012
From: avtoader at gmail.com (avtoader)
Date: Tue, 29 May 2012 19:04:06 -0700 (PDT)
Subject: [gdal-dev] Adding an alpha channel to a Virtual Dataset then
 Writing it out to a TIFF in C#
Message-ID: <1338343446440-4977894.post@n6.nabble.com>

Hello!
I've been trying to figure this out for a while and this would be my first
time asking a question here.

How do I load a 3-band tiff into a virtual dataset, add a band (alpha
layer), warp the virtual dataset, then write it out to a TIFF again
(different, path, different name)?

I'm loading a 3-band tiff into a virtual dataset using C# and then
attempting to add an alpha layer using this code:

//  Load image dataset
using (OSGeo.GDAL.Dataset imageDs = OSGeo.GDAL.Gdal.Open(devPath,
OSGeo.GDAL.Access.GA_ReadOnly))
{
     //  Copy dataset data into a virtual dataset
     virtDs = OSGeo.GDAL.Gdal.GetDriverByName("VRT").CreateCopy("", imageDs,
0, null, null, null);
     //  If addAlpha true, add an alpha layer band
     if (addAlpha)
     {
          virtDs.AddBand(OSGeo.GDAL.DataType.GDT_Byte, null);
         
virtDs.GetRasterBand(4).SetColorInterpretation(OSGeo.GDAL.ColorInterp.GCI_AlphaBand);
     }

     imageDs.Dispose();
     GC.Collect();
}

I then attempt to warp the virtual dataset and write it back out to a TIFF
again (with the option "ALPHA=YES").  I feel like I'm missing something and
I'm not sure what.  Every time I attempt to view the new TIFF, it ends up
transparent.

The only way I seem to get it to work in a viewable manner is to manually
copy each raster band to a new dataset and filling in the alpha band (band
4) with 255.

Any help is appreciated, thanks in advance!
-Alex

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Adding-an-alpha-channel-to-a-Virtual-Dataset-then-Writing-it-out-to-a-TIFF-in-C-tp4977894.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From avtoader at gmail.com  Tue May 29 19:09:56 2012
From: avtoader at gmail.com (avtoader)
Date: Tue, 29 May 2012 19:09:56 -0700 (PDT)
Subject: [gdal-dev] Adding an alpha channel to a Virtual Dataset then
 Writing it out to a TIFF in C#
Message-ID: <1338343796913-4977895.post@n6.nabble.com>

Hello! 
I've been trying to figure this out for a while and this would be my first
time asking a question here. 

How do I load a 3-band tiff into a virtual dataset, add a band (alpha
layer), warp the virtual dataset, then write it out to a TIFF again
(different, path, different name)? 

I'm loading a 3-band tiff into a virtual dataset using C# and then
attempting to add an alpha layer using this code: 

//  Load image dataset 
using (OSGeo.GDAL.Dataset imageDs = OSGeo.GDAL.Gdal.Open(devPath,
OSGeo.GDAL.Access.GA_ReadOnly)) 
{ 
     //  Copy dataset data into a virtual dataset 
     virtDs = OSGeo.GDAL.Gdal.GetDriverByName("VRT").CreateCopy("", imageDs,
0, null, null, null); 
     //  If addAlpha true, add an alpha layer band 
     if (addAlpha) 
     { 
          virtDs.AddBand(OSGeo.GDAL.DataType.GDT_Byte, null); 
         
virtDs.GetRasterBand(4).SetColorInterpretation(OSGeo.GDAL.ColorInterp.GCI_AlphaBand); 
     } 

     imageDs.Dispose(); 
     GC.Collect(); 
} 

I then attempt to warp the virtual dataset and write it back out to a TIFF
again (with the option "ALPHA=YES").  I feel like I'm missing something and
I'm not sure what.  Every time I attempt to view the new TIFF, it ends up
transparent. 

The only way I seem to get it to work in a viewable manner is to manually
copy each raster band to a new dataset and filling in the alpha band (band
4) with 255. 

Any help is appreciated, thanks in advance! 
-Alex

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Adding-an-alpha-channel-to-a-Virtual-Dataset-then-Writing-it-out-to-a-TIFF-in-C-tp4977895.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From shaun.walbridge at gmail.com  Wed May 30 02:28:55 2012
From: shaun.walbridge at gmail.com (Shaun Walbridge)
Date: Wed, 30 May 2012 02:28:55 -0700
Subject: [gdal-dev] transform options in Python?
Message-ID: <CABM2nYxUyKTikFL+KGzvredEonSbtL_=nVqXE6ud3OuX4FTr4A@mail.gmail.com>

Hi,

I'm working with a fairly straightforward Python script to produce geodesic
buffers. One step I need is to force dateline wrapping so my buffers don't
span the globe. I poked around ogr2ogr.cpp, and found that it sets
'WRAPDATELINE=YES'. Looking into ogr.py, I see that papszOptions exists,
but no papszTransformOptions. Despite a decent amount of poking around, I
couldn't figure out how to call OGRGeometryFactory::transformWithOptions()
from within Python.

Am I missing something, or is this something lacking from the OGR Python
bindings? I've tried it with 1.9.0 and trunk, and am happy enough sticking
to calls back to ogr2ogr for now, but figured I'd ask before giving up
entirely.

cheers,
Shaun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120530/4650529b/attachment.html>

From csbruce at cubewerx.com  Wed May 30 12:27:14 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Wed, 30 May 2012 15:27:14 -0400
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <CA+YzLBdk+gLV7HswYyNUy8utWfBFV9gFThUXHoXoUH8r0TB4vg@mail.gmail.com>
Message-ID: <201205301927.q4UJREUh016331@tux.cubewerx.com>

Frank Warmerdam <warmerdam at pobox.com> wrote:

> because it is hard to hit all the appropriate code paths safely and
> partly because the result will be lossy.

It depends on what you mean by "lossy".  The value returned through the
GDAL interface won't be the literal sample value that is in a TIFF file
with associated alphas, but that literal value can be recovered losslessly
if the user should care to do so.  To demonstrate, I wrote the following C
test program to verify that all 16-bit pre-multiplied sample values can be
re-created from un-pre-multiplied values without any quantization errors:

#include <stdio.h>
int main()
{
    int gray, preGray, unGray, reGray, alpha;
    double alphaMult, unAlphaMult;
    for (alpha=0x0000; alpha <= 0xFFFF; alpha++) {
        alphaMult = (double) alpha / (double) 0xFFFF;
        unAlphaMult = (alpha == 0) ? 0.0 : (double) 0xFFFF / (double) alpha;
        for (gray=0x0000; gray <= 0xFFFF; gray++) {
            preGray = (int) (gray * alphaMult + 0.5);
            unGray = (int) (preGray * unAlphaMult + 0.5);
            reGray = (int) (unGray * alphaMult + 0.5);
            if (reGray != preGray) {
                printf("alpha=0x%04X, gray=0x%04X: preGray=0x%04X, unGray="
                       "0x%04X, reGray=0x%04X\n", alpha, gray, preGray, unGray,                         reGray);
                return(0);
            }
        }
    }
    printf("there are no quantization problems\n");
}

> Going forward GDAL should do one of two things:
>
> 1) provide a metadata item so applications can know those rare
> circumstances when alpha is pre-multiplied.
>
> 2) un-premultiply premultiplied alpha when encountered.

It might be better to do both, which is what GDAL does with the
pixel-is-area vs. pixel-is-point issue.  The GDAL interface always uses
pixel-is-area (according to the documentation I read) but it also supplies
an AREA_OR_POINT metadata item so a user can re-interpret the images in
that way if they so choose.  An ALPHA_MODEL metadata item could be added
for users who are so inclined.  Does any GDAL format other than TIFF use
pre-multiplied alphas?

As Even Rouault poins out, writing TIFF alpha channels is messed up
as well.  After verifying that various viewers can handle unassociated
alpha channels properly, I switched my own TIFF generator to always write
TIFFs that way since associated alphas are so problematic.

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
         "The process was complete, utter, unadulterated bullshit."
                  -- Tim Bray, commenting on OOXML at ISO

From Steve.Toutant at inspq.qc.ca  Wed May 30 13:09:27 2012
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Wed, 30 May 2012 16:09:27 -0400
Subject: [gdal-dev] ogr ODBC problem
Message-ID: <OF377D9D90.382BF740-ON85257A0E.006DF299-85257A0E.006EBA93@isn.rtss.qc.ca>

Hi!
I use this command to get the tables from an ODBC connection
ogrinfo ODBC:User/Pwd at DNS

The connection is succesful but I get this error several times
ERROR 1: No column definitions found for table '?s???s!.???????????', 
layer not usable.

I used OGR ODBC for several months from a Windows server to a MSSQL server
Now I'm migrating to linux and accessing the same MSSQL SERVER and I get 
this error.

Note that if I connect with isql, I can connect and query the database 
without problem.
So the problem really seems to be with OGR

What can cause this No column definitions found for table error
And why the table name looks like this  '?s???s!.???????????', 

thanks
steve


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120530/1cd9fcec/attachment.html>

From csbruce at cubewerx.com  Wed May 30 13:26:18 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Wed, 30 May 2012 16:26:18 -0400
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <201205292341.25097.even.rouault@mines-paris.org>
Message-ID: <201205302026.q4UKQIeN019700@tux.cubewerx.com>

Even Rouault <even.rouault at mines-paris.org> wrote:

> There will be likely a compatibility problem if we do this, because
> GDAL up to now writes TIFF RGBA images with EXTRASAMPLE_ASSOCALPHA
> (pre-multiplied), but I think in most cases the data that people have
> feed in the GTiff driver was not pre-multiplied. So if we un-premultiply
> this would cause issues in case the alpha value is not 0 or 255.

You only need to deal with altering the raw data on reading if the GTiff
driver were changed to always write unassociated alphas.  Also, if people
have been writing non-pre-multipled samples to associated-alpha files in
the existing interface, then the TIFF data is damaged in any case.

> The temporary conclusion of that is that there are likely images in
> the wild where the value of the flag does not reflect the reality
> of the imagery values... But, GDAL should likely be fixed to set
> EXTRASAMPLE_UNASSALPHA to better reflect the way it is generally used
> (presumably).

There's not much you can do about damaged images in the wild.  However,
we can try to prevent more from being created.

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
     "I don't have to take this abuse from you -- I've got hundreds of
         people waiting to abuse me!" --Bill Murray, "Ghostbusters"

From Steve.Toutant at inspq.qc.ca  Wed May 30 13:41:44 2012
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Wed, 30 May 2012 16:41:44 -0400
Subject: [gdal-dev] RE ogr ODBC problem
In-Reply-To: <OF377D9D90.382BF740-ON85257A0E.006DF299-85257A0E.006EBA93@LocalDomain>
Message-ID: <OF2E6DCF1C.445B1F00-ON85257A0E.007194E1-85257A0E.0071AF53@isn.rtss.qc.ca>

Note that it is a non-spatial mssql database




Steve Toutant/INSPQ/SSSS 
2012-05-30 16:09

A
gdal-dev at lists.osgeo.org
cc

Objet
ogr ODBC problem







Hi!
I use this command to get the tables from an ODBC connection
ogrinfo ODBC:User/Pwd at DNS

The connection is succesful but I get this error several times
ERROR 1: No column definitions found for table '?s???s!.???????????', 
layer not usable.

I used OGR ODBC for several months from a Windows server to a MSSQL server
Now I'm migrating to linux and accessing the same MSSQL SERVER and I get 
this error.

Note that if I connect with isql, I can connect and query the database 
without problem.
So the problem really seems to be with OGR

What can cause this No column definitions found for table error
And why the table name looks like this  '?s???s!.???????????', 

thanks
steve





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120530/29f3a0a6/attachment.html>

From jmckenna at gatewaygeomatics.com  Wed May 30 14:06:51 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 30 May 2012 18:06:51 -0300
Subject: [gdal-dev] ogr ODBC problem
In-Reply-To: <OF377D9D90.382BF740-ON85257A0E.006DF299-85257A0E.006EBA93@isn.rtss.qc.ca>
References: <OF377D9D90.382BF740-ON85257A0E.006DF299-85257A0E.006EBA93@isn.rtss.qc.ca>
Message-ID: <4FC68BEB.4050400@gatewaygeomatics.com>

On 12-05-30 5:09 PM, Steve.Toutant at inspq.qc.ca wrote:
> 
> Hi!
> I use this command to get the tables from an ODBC connection
> ogrinfo ODBC:User/Pwd at DNS
> 
> The connection is succesful but I get this error several times
> ERROR 1: No column definitions found for table '?s???s!.???????????',
> layer not usable.
> 
> I used OGR ODBC for several months from a Windows server to a MSSQL server
> Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> this error.
> 
> Note that if I connect with isql, I can connect and query the database
> without problem.
> So the problem really seems to be with OGR
> 
> What can cause this No column definitions found for table error
> And why the table name looks like this  '?s???s!.???????????',

Hi Steve,

I was just debugging an ogrinfo command for MS4W/Oracle, and was
reminded of the trick to show more debug info at the commandline:

   set CPL_DEBUG=on

I'm going to keep that one in my back pocket from now on.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From tom.van.tilburg at gmail.com  Thu May 31 03:55:21 2012
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Thu, 31 May 2012 12:55:21 +0200
Subject: [gdal-dev] multiple bands in gdal2xyz.py should be comma separated
Message-ID: <4FC74E19.6020202@gmail.com>

Hi,

It seems that gdal2xyz.py currently supports the output of multiple 
raster bands using:
     gdal2xyz.py -band 1 -band 2 etc....

However, when I use this in combination with the parameter -csv I do not 
get the extected comma in between the values of my bands.
Extected:   5.604, 50.765, 3, 2
Received: 5.604, 50.765, 3  2 <== "notice the missing komma"

I briefly checked the python code and it seems to be an addition to 
'band_format' is needed.

band_format = ("%g " * len(bands)).rstrip() + '\n'

should become something like

band_format = (("%g " + delim) * len(bands)).rstrip(",") + '\n'


Cheers,
     Tom

From Steve.Toutant at inspq.qc.ca  Thu May 31 06:48:56 2012
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Thu, 31 May 2012 09:48:56 -0400
Subject: [gdal-dev] ogr ODBC problem
In-Reply-To: <4FC68BEB.4050400@gatewaygeomatics.com>
Message-ID: <OFC5433BA4.6ED20415-ON85257A0F.004B8181-85257A0F.004BE607@isn.rtss.qc.ca>

Thanks Jeff
I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column.

I found that several users had this problem but found no solution. I don't 
have write access to this MSSQL server.

I'm connecting via ODBC to a non spatial table, but it contains latitude 
and longitude information. I will use it to define a OGRVRTDataSource and 
create geometry from point.

Any clue on what I can do?
thanks
steve






Jeff McKenna <jmckenna at gatewaygeomatics.com>@lists.osgeo.org 
Envoy? par : gdal-dev-bounces at lists.osgeo.org
2012-05-30 17:06

A
gdal-dev at lists.osgeo.org
cc

Objet
Re: [gdal-dev] ogr ODBC problem








On 12-05-30 5:09 PM, Steve.Toutant at inspq.qc.ca wrote:
> 
> Hi!
> I use this command to get the tables from an ODBC connection
> ogrinfo ODBC:User/Pwd at DNS
> 
> The connection is succesful but I get this error several times
> ERROR 1: No column definitions found for table '?s???s!.???????????',
> layer not usable.
> 
> I used OGR ODBC for several months from a Windows server to a MSSQL 
server
> Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> this error.
> 
> Note that if I connect with isql, I can connect and query the database
> without problem.
> So the problem really seems to be with OGR
> 
> What can cause this No column definitions found for table error
> And why the table name looks like this  '?s???s!.???????????',

Hi Steve,

I was just debugging an ogrinfo command for MS4W/Oracle, and was
reminded of the trick to show more debug info at the commandline:

   set CPL_DEBUG=on

I'm going to keep that one in my back pocket from now on.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/ce33648b/attachment-0001.html>

From bfraser at geoanalytic.com  Thu May 31 07:49:36 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu, 31 May 2012 08:49:36 -0600
Subject: [gdal-dev] ogr ODBC problem
In-Reply-To: <OFC5433BA4.6ED20415-ON85257A0F.004B8181-85257A0F.004BE607@isn.rtss.qc.ca>
References: <OFC5433BA4.6ED20415-ON85257A0F.004B8181-85257A0F.004BE607@isn.rtss.qc.ca>
Message-ID: <4FC78500.5050101@geoanalytic.com>

Steve,

   Here's a snippet from a MapServer map file I used to access a 
non-spatial MS SQL server via OGR+VRT+ODBC:

     TYPE POINT
     CONNECTIONTYPE OGR
     CONNECTION "<OGRVRTDataSource>
<OGRVRTLayer name='v_MyPoints'>
<SrcDataSource>ODBC:username/password at WebMapDSN,v_MyPoints</SrcDataSource>
<SrcSQL>
             SELECT * FROM v_MyPoints
             WHERE  PropertyID=%PropertyID%
</SrcSQL>
*<FID>PointID</FID>*
<GeometryType>wkbPoint</GeometryType>
<GeometryField encoding='PointFromColumns' y='SurfaceLatitude'  
x='SurfaceLongitude'/>
<LayerSRS>NAD83</LayerSRS>
</OGRVRTLayer>
</OGRVRTDataSource>"

     PROCESSING "CLOSE_CONNECTION=DEFER"

     DATA "v_MyPoints"

In my case I was able to use the view's primary key as the FID.  Hope 
this helps...

Best Regards,
Brent Fraser


On 5/31/2012 7:48 AM, Steve.Toutant at inspq.qc.ca wrote:
>
> Thanks Jeff
> I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column.
>
> I found that several users had this problem but found no solution. I 
> don't have write access to this MSSQL server.
>
> I'm connecting via ODBC to a non spatial table, but it contains 
> latitude and longitude information. I will use it to define a 
> OGRVRTDataSourceand create geometry from point.
>
> Any clue on what I can do?
> thanks
> steve
>
>
>
>
> *Jeff McKenna <jmckenna at gatewaygeomatics.com>@lists.osgeo.org*
> Envoy? par : gdal-dev-bounces at lists.osgeo.org
>
> 2012-05-30 17:06
>
> 	
> A
> 	gdal-dev at lists.osgeo.org
> cc
> 	
> Objet
> 	Re: [gdal-dev] ogr ODBC problem
>
>
>
> 	
>
>
>
>
>
>
>
> On 12-05-30 5:09 PM, Steve.Toutant at inspq.qc.ca wrote:
> >
> > Hi!
> > I use this command to get the tables from an ODBC connection
> > ogrinfo ODBC:User/Pwd at DNS
> >
> > The connection is succesful but I get this error several times
> > ERROR 1: No column definitions found for table '?s???s!.???????????',
> > layer not usable.
> >
> > I used OGR ODBC for several months from a Windows server to a MSSQL 
> server
> > Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> > this error.
> >
> > Note that if I connect with isql, I can connect and query the database
> > without problem.
> > So the problem really seems to be with OGR
> >
> > What can cause this No column definitions found for table error
> > And why the table name looks like this  '?s???s!.???????????',
>
> Hi Steve,
>
> I was just debugging an ogrinfo command for MS4W/Oracle, and was
> reminded of the trick to show more debug info at the commandline:
>
>   set CPL_DEBUG=on
>
> I'm going to keep that one in my back pocket from now on.
>
> -jeff
>
>
>
>
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/0e6992c7/attachment.html>

From piotr at cgis.pl  Thu May 31 09:04:25 2012
From: piotr at cgis.pl (Piotr Tracz)
Date: Thu, 31 May 2012 18:04:25 +0200
Subject: [gdal-dev] Building gdal with opencl support on windows
In-Reply-To: <003201cd3d8c$603bcce0$20b366a0$@vizexperts.com>
References: <003201cd3d8c$603bcce0$20b366a0$@vizexperts.com>
Message-ID: <4FC79689.7070302@cgis.pl>

W dniu 2012-05-29 13:15, Yogesh Dahiya pisze:
>
> If anyone knows how to hack nmake.opt and alg/makefile.vc to build 
> gdal with opencl support on windows, please do reply.
>
>
I will post mine (just need to grab correct revision from SVN) however 
current OpenCL support is really "a technology preview" - after many 
tests I noticed it often locks card driver, usualy is slower than 
multithreading and gives unaccurate results. In my oppinion current 
OpenCL support is great starting point to dig into that technology but 
not much usable to process real data...

/Piotr

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/75106c8f/attachment.html>

From Steve.Toutant at inspq.qc.ca  Thu May 31 09:11:10 2012
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Thu, 31 May 2012 12:11:10 -0400
Subject: [gdal-dev] RE [Polluriel potentiel]  Re:  ogr ODBC problem
In-Reply-To: <4FC78500.5050101@geoanalytic.com>
Message-ID: <OF78B1C004.3B035831-ON85257A0F.0057D5DE-85257A0F.0058EB91@isn.rtss.qc.ca>

Thanks Brent for your answer.

But ....view's primary key?
I'm missing something here...What do you mean by that? Do you mean a 
column with a unique id in the view?
There is no such column in my view. Is ogr now needs a unique id in a 
view? Because it was working before I migrate to linux with a recent 
vertsion of gdal.

Also, My problem is before using CONNECTIONTYPE OGR
    CONNECTION "<OGRVRTDataSource>

A simple ogrinfo like this
ODBC:username/password at WebMapDSN,v_MyPoints

Gives me the error OGR_ODBC: Table ?s???s!.????????? has no identified FID 
column. 

Thanks in advance
Steve






Brent Fraser <bfraser at geoanalytic.com> 
2012-05-31 10:49

A
Steve.Toutant at inspq.qc.ca
cc
gdal-dev at lists.osgeo.org
Objet
[Polluriel potentiel]  Re: [gdal-dev] ogr ODBC problem








Steve,

  Here's a snippet from a MapServer map file I used to access a 
non-spatial MS SQL server via OGR+VRT+ODBC:

    TYPE POINT
    CONNECTIONTYPE OGR
    CONNECTION "<OGRVRTDataSource>
        <OGRVRTLayer name='v_MyPoints'>
 
<SrcDataSource>ODBC:username/password at WebMapDSN,v_MyPoints</SrcDataSource>
           <SrcSQL>
            SELECT * FROM  v_MyPoints 
            WHERE  PropertyID=%PropertyID%
        </SrcSQL>
        <FID>PointID</FID>
        <GeometryType>wkbPoint</GeometryType>
        <GeometryField encoding='PointFromColumns' y='SurfaceLatitude' 
x='SurfaceLongitude'/>
        <LayerSRS>NAD83</LayerSRS>
        </OGRVRTLayer>
    </OGRVRTDataSource>"

    PROCESSING "CLOSE_CONNECTION=DEFER"

    DATA "v_MyPoints"

In my case I was able to use the view's primary key as the FID.  Hope this 
helps...
Best Regards,
Brent Fraser

On 5/31/2012 7:48 AM, Steve.Toutant at inspq.qc.ca wrote: 

Thanks Jeff 
I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column. 

I found that several users had this problem but found no solution. I don't 
have write access to this MSSQL server. 

I'm connecting via ODBC to a non spatial table, but it contains latitude 
and longitude information. I will use it to define a OGRVRTDataSource and 
create geometry from point. 

Any clue on what I can do? 
thanks 
steve 




Jeff McKenna <jmckenna at gatewaygeomatics.com>@lists.osgeo.org 
Envoy? par : gdal-dev-bounces at lists.osgeo.org 
2012-05-30 17:06 


A
gdal-dev at lists.osgeo.org 
cc

Objet
Re: [gdal-dev] ogr ODBC problem










On 12-05-30 5:09 PM, Steve.Toutant at inspq.qc.ca wrote:
> 
> Hi!
> I use this command to get the tables from an ODBC connection
> ogrinfo ODBC:User/Pwd at DNS
> 
> The connection is succesful but I get this error several times
> ERROR 1: No column definitions found for table '?s???s!.???????????',
> layer not usable.
> 
> I used OGR ODBC for several months from a Windows server to a MSSQL 
server
> Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> this error.
> 
> Note that if I connect with isql, I can connect and query the database
> without problem.
> So the problem really seems to be with OGR
> 
> What can cause this No column definitions found for table error
> And why the table name looks like this  '?s???s!.???????????',

Hi Steve,

I was just debugging an ogrinfo command for MS4W/Oracle, and was
reminded of the trick to show more debug info at the commandline:

  set CPL_DEBUG=on

I'm going to keep that one in my back pocket from now on.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/3b97a519/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Thu May 31 09:26:34 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 31 May 2012 13:26:34 -0300
Subject: [gdal-dev] Building gdal with opencl support on windows
In-Reply-To: <4FC79689.7070302@cgis.pl>
References: <003201cd3d8c$603bcce0$20b366a0$@vizexperts.com>
	<4FC79689.7070302@cgis.pl>
Message-ID: <4FC79BBA.70906@gatewaygeomatics.com>

On 12-05-31 1:04 PM, Piotr Tracz wrote:
> I will post mine (just need to grab correct revision from SVN) however
> current OpenCL support is really "a technology preview" - after many
> tests I noticed it often locks card driver, usualy is slower than
> multithreading and gives unaccurate results. In my oppinion current
> OpenCL support is great starting point to dig into that technology but
> not much usable to process real data...
> 

Piotr,

Could you create a wiki page at
http://trac.osgeo.org/gdal/wiki/BuildHints in the "External Library
Issues" section for opencl?  And then point to it back here on the
mailing list.  Thanks!

-jeff





-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From bfraser at geoanalytic.com  Thu May 31 09:36:11 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu, 31 May 2012 10:36:11 -0600
Subject: [gdal-dev] RE [Polluriel potentiel]  Re:  ogr ODBC problem
In-Reply-To: <OF78B1C004.3B035831-ON85257A0F.0057D5DE-85257A0F.0058EB91@isn.rtss.qc.ca>
References: <OF78B1C004.3B035831-ON85257A0F.0057D5DE-85257A0F.0058EB91@isn.rtss.qc.ca>
Message-ID: <4FC79DFB.70309@geoanalytic.com>

Steve,

   In my case I was getting OGR to get data from a database view, but it 
could have been a table.  I think OGR needs (would like?) to know which 
column it can use for unque id.  I would expect your view (or table) 
would have a unique key column otherwise relation operations (like 
joins) can be a problem (the db admin should be able to tell you).

Perhaps the ODBC system on Linux doesn't give OGR enough info about the 
columns to automatically identify the Primary Key column.  If you are 
testing with ogrinfo you could user the "-fid" option after you've 
identified the Primary Key column?

Best Regards,
Brent Fraser


On 5/31/2012 10:11 AM, Steve.Toutant at inspq.qc.ca wrote:
>
> Thanks Brent for your answer.
>
> But ....view's primary key?
> I'm missing something here...What do you mean by that? Do you mean a 
> column with a unique id in the view?
> There is no such column in my view. Is ogr now needs a unique id in a 
> view? Because it was working before I migrate to linux with a recent 
> vertsion of gdal.
>
> Also, My problem is before using CONNECTIONTYPE OGR
>    CONNECTION "<OGRVRTDataSource>
>
> A simple ogrinfo like this
> ODBC:username/password at WebMapDSN,v_MyPoints
>
> Gives me the error OGR_ODBC: Table ?s???s!.????????? has no identified 
> FID column.
>
> Thanks in advance
> Steve
>
>
>
>
>
> *Brent Fraser <bfraser at geoanalytic.com>*
>
> 2012-05-31 10:49
>
> 	
> A
> 	Steve.Toutant at inspq.qc.ca
> cc
> 	gdal-dev at lists.osgeo.org
> Objet
> 	[Polluriel potentiel]  Re: [gdal-dev] ogr ODBC problem
>
>
>
> 	
>
>
>
>
>
>
>
> Steve,
>
>  Here's a snippet from a MapServer map file I used to access a 
> non-spatial MS SQL server via OGR+VRT+ODBC:
>
>    TYPE POINT
>    CONNECTIONTYPE OGR
>    CONNECTION "<OGRVRTDataSource>
> <OGRVRTLayer name='v_MyPoints'>
> <SrcDataSource>ODBC:username/password at WebMapDSN,v_MyPoints</SrcDataSource>
> <SrcSQL>
>            SELECT * FROM  v_MyPoints
>            WHERE  PropertyID=%PropertyID%
> </SrcSQL>
> *<FID>PointID</FID>*
> <GeometryType>wkbPoint</GeometryType>
> <GeometryField encoding='PointFromColumns' y='SurfaceLatitude' 
>  x='SurfaceLongitude'/>
> <LayerSRS>NAD83</LayerSRS>
> </OGRVRTLayer>
> </OGRVRTDataSource>"
>
>    PROCESSING "CLOSE_CONNECTION=DEFER"
>
>    DATA "v_MyPoints"
>
> In my case I was able to use the view's primary key as the FID.  Hope 
> this helps...
> Best Regards,
> Brent Fraser
>
> On 5/31/2012 7:48 AM, _Steve.Toutant at inspq.qc.ca_ 
> <mailto:Steve.Toutant at inspq.qc.ca>wrote:
>
> Thanks Jeff
> I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column.
>
> I found that several users had this problem but found no solution. I 
> don't have write access to this MSSQL server.
>
> I'm connecting via ODBC to a non spatial table, but it contains 
> latitude and longitude information. I will use it to define a 
> OGRVRTDataSourceand create geometry from point.
>
> Any clue on what I can do?
> thanks
> steve
>
>
>
> *Jeff McKenna **_<jmckenna at gatewaygeomatics.com>_* 
> <mailto:jmckenna at gatewaygeomatics.com>*@lists.osgeo.org*
> Envoy? par : _gdal-dev-bounces at lists.osgeo.org_ 
> <mailto:gdal-dev-bounces at lists.osgeo.org>
>
> 2012-05-30 17:06
>
> 	
> A
> 	_gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>
> cc
> 	
> Objet
> 	Re: [gdal-dev] ogr ODBC problem
>
>
>
>
> 	
>
>
>
>
>
>
>
>
> On 12-05-30 5:09 PM, _Steve.Toutant at inspq.qc.ca_ 
> <mailto:Steve.Toutant at inspq.qc.ca>wrote:
> >
> > Hi!
> > I use this command to get the tables from an ODBC connection
> > ogrinfo ODBC:User/Pwd at DNS
> >
> > The connection is succesful but I get this error several times
> > ERROR 1: No column definitions found for table '?s???s!.???????????',
> > layer not usable.
> >
> > I used OGR ODBC for several months from a Windows server to a MSSQL 
> server
> > Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> > this error.
> >
> > Note that if I connect with isql, I can connect and query the database
> > without problem.
> > So the problem really seems to be with OGR
> >
> > What can cause this No column definitions found for table error
> > And why the table name looks like this  '?s???s!.???????????',
>
> Hi Steve,
>
> I was just debugging an ogrinfo command for MS4W/Oracle, and was
> reminded of the trick to show more debug info at the commandline:
>
>  set CPL_DEBUG=on
>
> I'm going to keep that one in my back pocket from now on.
>
> -jeff
>
>
>
>
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services_
> __http://www.gatewaygeomatics.com/_
>
>
> _______________________________________________
> gdal-dev mailing list_
> __gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>_
> __http://lists.osgeo.org/mailman/listinfo/gdal-dev_
>
>
>
> _______________________________________________
> gdal-dev mailing list
> _gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>
> _http://lists.osgeo.org/mailman/listinfo/gdal-dev_
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/4c4e7e6e/attachment.html>

From etourigny.dev at gmail.com  Thu May 31 10:47:38 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 31 May 2012 14:47:38 -0300
Subject: [gdal-dev] CreateCopy() from gtiff file does not initialize
	AREA_OR_POINT metadata
Message-ID: <CA+TxYvPxZHxB+PK3jqEiOLpGphb3CHf3kq-qA2QpTQJGxeReag@mail.gmail.com>

When using a driver's CreateCopy function to copy a source dataset in
GTiff format, It seems that  the  AREA_OR_POINT metadata is not
initialized.

This is seemingly  for performance reasons as shown in the code below.
 However, it has the unwanted side-effect that the AREA_OR_POINT
metadata item is not copied over in most (all?) drivers.

This may be worth fixing and certainly worth being documented somewhere.
Are there other drivers which have the same behaviour?

char **GTiffDataset::GetMetadata( const char * pszDomain )
{
[...]
    /* FIXME ? Should we call LookForProjection() to load
GDALMD_AREA_OR_POINT ? */
    /* This can impact performances */

    return oGTiffMDMD.GetMetadata( pszDomain );
}

regards,
Etienne

From Steve.Toutant at inspq.qc.ca  Thu May 31 11:14:24 2012
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Thu, 31 May 2012 14:14:24 -0400
Subject: [gdal-dev] RE [Polluriel potentiel] Re: ogr ODBC problem [SOLVED]
In-Reply-To: <4FC78500.5050101@geoanalytic.com>
Message-ID: <OFFE4A6237.AFEF71DC-ON85257A0F.00631967-85257A0F.006433D4@isn.rtss.qc.ca>

for ogrinfo we were using, as explained here, 
http://mapserver.org/input/vector/VirtualSpatialData.html#steps-for-display
ogrinfo ODBC:User/Pwd at mssql__archives msStatut_station2002_2006
That was working on windows
Though, That doesn't work on our linux distro linux sles 11 sp1. It as to 
be (comma instead of space)
ogrinfo ODBC:User/Pwd at mssql__archives,msStatut_station2002_2006
But, For some reasons, this still doesn't work to get the list of tables 
on our linux distro
ogrinfo ODBC:User/Pwd at mssql__archives
But it is useless in my case.

Also, our virtual data file looks like this on windows
<OGRVRTDataSource>
    <OGRVRTLayer name="stations">
        <SrcDataSource>ODBC:User/Pwd at mssql__archives</SrcDataSource> 
                <SrcLayer>dbo.msStatut_station2002_2006</SrcLayer> 
                <GeometryType>wkbPoint</GeometryType> 
                <LayerSRS>WGS84</LayerSRS>
                <GeometryField encoding="PointFromColumns" x="Longitude" 
y="Latitude"/> 
    </OGRVRTLayer>
</OGRVRTDataSource>

That is working on windows

For our distro linux We need to add the table name
<SrcDataSource>ODBC:User/Pwd at mssql__archives,msStatut_station2002_2006</SrcDataSource> 


Perhaps it is not a windows vs linux issue but an OGR version issue.
Thanks for your help
Steve




Brent Fraser <bfraser at geoanalytic.com> 
2012-05-31 10:49

A
Steve.Toutant at inspq.qc.ca
cc
gdal-dev at lists.osgeo.org
Objet
[Polluriel potentiel]  Re: [gdal-dev] ogr ODBC problem








Steve,

  Here's a snippet from a MapServer map file I used to access a 
non-spatial MS SQL server via OGR+VRT+ODBC:

    TYPE POINT
    CONNECTIONTYPE OGR
    CONNECTION "<OGRVRTDataSource>
        <OGRVRTLayer name='v_MyPoints'>
 
<SrcDataSource>ODBC:username/password at WebMapDSN,v_MyPoints</SrcDataSource>
           <SrcSQL>
            SELECT * FROM  v_MyPoints 
            WHERE  PropertyID=%PropertyID%
        </SrcSQL>
        <FID>PointID</FID>
        <GeometryType>wkbPoint</GeometryType>
        <GeometryField encoding='PointFromColumns' y='SurfaceLatitude' 
x='SurfaceLongitude'/>
        <LayerSRS>NAD83</LayerSRS>
        </OGRVRTLayer>
    </OGRVRTDataSource>"

    PROCESSING "CLOSE_CONNECTION=DEFER"

    DATA "v_MyPoints"

In my case I was able to use the view's primary key as the FID.  Hope this 
helps...
Best Regards,
Brent Fraser

On 5/31/2012 7:48 AM, Steve.Toutant at inspq.qc.ca wrote: 

Thanks Jeff 
I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column. 

I found that several users had this problem but found no solution. I don't 
have write access to this MSSQL server. 

I'm connecting via ODBC to a non spatial table, but it contains latitude 
and longitude information. I will use it to define a OGRVRTDataSource and 
create geometry from point. 

Any clue on what I can do? 
thanks 
steve 




Jeff McKenna <jmckenna at gatewaygeomatics.com>@lists.osgeo.org 
Envoy? par : gdal-dev-bounces at lists.osgeo.org 
2012-05-30 17:06 


A
gdal-dev at lists.osgeo.org 
cc

Objet
Re: [gdal-dev] ogr ODBC problem










On 12-05-30 5:09 PM, Steve.Toutant at inspq.qc.ca wrote:
> 
> Hi!
> I use this command to get the tables from an ODBC connection
> ogrinfo ODBC:User/Pwd at DNS
> 
> The connection is succesful but I get this error several times
> ERROR 1: No column definitions found for table '?s???s!.???????????',
> layer not usable.
> 
> I used OGR ODBC for several months from a Windows server to a MSSQL 
server
> Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> this error.
> 
> Note that if I connect with isql, I can connect and query the database
> without problem.
> So the problem really seems to be with OGR
> 
> What can cause this No column definitions found for table error
> And why the table name looks like this  '?s???s!.???????????',

Hi Steve,

I was just debugging an ogrinfo command for MS4W/Oracle, and was
reminded of the trick to show more debug info at the commandline:

  set CPL_DEBUG=on

I'm going to keep that one in my back pocket from now on.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/e8e48d83/attachment-0001.html>

From bfraser at geoanalytic.com  Thu May 31 11:28:23 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu, 31 May 2012 12:28:23 -0600
Subject: [gdal-dev] RE [Polluriel potentiel] Re: ogr ODBC problem
	[SOLVED]
In-Reply-To: <OFFE4A6237.AFEF71DC-ON85257A0F.00631967-85257A0F.006433D4@isn.rtss.qc.ca>
References: <OFFE4A6237.AFEF71DC-ON85257A0F.00631967-85257A0F.006433D4@isn.rtss.qc.ca>
Message-ID: <4FC7B847.5020900@geoanalytic.com>

Steve,

That's good news.

   I did run into the "spaces" problems on Windows (I had a space 
between the comma and the table name).  It caused the connection to fail.

Best Regards,
Brent Fraser


On 5/31/2012 12:14 PM, Steve.Toutant at inspq.qc.ca wrote:
>
> for ogrinfo we were using, as explained here, 
> http://mapserver.org/input/vector/VirtualSpatialData.html#steps-for-display
> ogrinfo ODBC:User/Pwd at mssql__archives msStatut_station2002_2006
> That was working on windows
>
> Though, That doesn't work on our linux distro linux sles 11 sp1. It as 
> to be (comma instead of space)
> ogrinfo ODBC:User/Pwd at mssql__archives,msStatut_station2002_2006
>
> But, For some reasons, this still doesn't work to get the list of 
> tables on our linux distro
> ogrinfo ODBC:User/Pwd at mssql__archives
> But it is useless in my case.
>
> Also, our virtual data file looks like this on windows
> <OGRVRTDataSource>
> <OGRVRTLayer name="stations">
> <SrcDataSource>ODBC:User/Pwd at mssql__archives</SrcDataSource>
> <SrcLayer>dbo.msStatut_station2002_2006</SrcLayer>
> <GeometryType>wkbPoint</GeometryType>
> <LayerSRS>WGS84</LayerSRS>
> <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
> </OGRVRTLayer>
> </OGRVRTDataSource>
>
> That is working on windows
>
> For our distro linux We need to add the table name
> <SrcDataSource>ODBC:User/Pwd at mssql__archives,msStatut_station2002_2006</SrcDataSource> 
>
>
> Perhaps it is not a windows vs linux issue but an OGR version issue.
> Thanks for your help
> Steve
>
>
>
>
> *Brent Fraser <bfraser at geoanalytic.com>*
>
> 2012-05-31 10:49
>
> 	
> A
> 	Steve.Toutant at inspq.qc.ca
> cc
> 	gdal-dev at lists.osgeo.org
> Objet
> 	[Polluriel potentiel]  Re: [gdal-dev] ogr ODBC problem
>
>
>
> 	
>
>
>
>
>
>
>
> Steve,
>
>  Here's a snippet from a MapServer map file I used to access a 
> non-spatial MS SQL server via OGR+VRT+ODBC:
>
>    TYPE POINT
>    CONNECTIONTYPE OGR
>    CONNECTION "<OGRVRTDataSource>
> <OGRVRTLayer name='v_MyPoints'>
> <SrcDataSource>ODBC:username/password at WebMapDSN,v_MyPoints</SrcDataSource>
> <SrcSQL>
>            SELECT * FROM  v_MyPoints
>            WHERE  PropertyID=%PropertyID%
> </SrcSQL>
> *<FID>PointID</FID>*
> <GeometryType>wkbPoint</GeometryType>
> <GeometryField encoding='PointFromColumns' y='SurfaceLatitude' 
>  x='SurfaceLongitude'/>
> <LayerSRS>NAD83</LayerSRS>
> </OGRVRTLayer>
> </OGRVRTDataSource>"
>
>    PROCESSING "CLOSE_CONNECTION=DEFER"
>
>    DATA "v_MyPoints"
>
> In my case I was able to use the view's primary key as the FID.  Hope 
> this helps...
> Best Regards,
> Brent Fraser
>
> On 5/31/2012 7:48 AM, _Steve.Toutant at inspq.qc.ca_ 
> <mailto:Steve.Toutant at inspq.qc.ca>wrote:
>
> Thanks Jeff
> I got now OGR_ODBC: Table ?s???s!.????????? has no identified FID column.
>
> I found that several users had this problem but found no solution. I 
> don't have write access to this MSSQL server.
>
> I'm connecting via ODBC to a non spatial table, but it contains 
> latitude and longitude information. I will use it to define a 
> OGRVRTDataSourceand create geometry from point.
>
> Any clue on what I can do?
> thanks
> steve
>
>
>
> *Jeff McKenna **_<jmckenna at gatewaygeomatics.com>_* 
> <mailto:jmckenna at gatewaygeomatics.com>*@lists.osgeo.org*
> Envoy? par : _gdal-dev-bounces at lists.osgeo.org_ 
> <mailto:gdal-dev-bounces at lists.osgeo.org>
>
> 2012-05-30 17:06
>
> 	
> A
> 	_gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>
> cc
> 	
> Objet
> 	Re: [gdal-dev] ogr ODBC problem
>
>
>
>
> 	
>
>
>
>
>
>
>
>
> On 12-05-30 5:09 PM, _Steve.Toutant at inspq.qc.ca_ 
> <mailto:Steve.Toutant at inspq.qc.ca>wrote:
> >
> > Hi!
> > I use this command to get the tables from an ODBC connection
> > ogrinfo ODBC:User/Pwd at DNS
> >
> > The connection is succesful but I get this error several times
> > ERROR 1: No column definitions found for table '?s???s!.???????????',
> > layer not usable.
> >
> > I used OGR ODBC for several months from a Windows server to a MSSQL 
> server
> > Now I'm migrating to linux and accessing the same MSSQL SERVER and I get
> > this error.
> >
> > Note that if I connect with isql, I can connect and query the database
> > without problem.
> > So the problem really seems to be with OGR
> >
> > What can cause this No column definitions found for table error
> > And why the table name looks like this  '?s???s!.???????????',
>
> Hi Steve,
>
> I was just debugging an ogrinfo command for MS4W/Oracle, and was
> reminded of the trick to show more debug info at the commandline:
>
>  set CPL_DEBUG=on
>
> I'm going to keep that one in my back pocket from now on.
>
> -jeff
>
>
>
>
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services_
> __http://www.gatewaygeomatics.com/_
>
>
> _______________________________________________
> gdal-dev mailing list_
> __gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>_
> __http://lists.osgeo.org/mailman/listinfo/gdal-dev_
>
>
>
> _______________________________________________
> gdal-dev mailing list
> _gdal-dev at lists.osgeo.org_ <mailto:gdal-dev at lists.osgeo.org>
> _http://lists.osgeo.org/mailman/listinfo/gdal-dev_
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120531/f7d46597/attachment.html>

From csbruce at cubewerx.com  Thu May 31 11:41:14 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Thu, 31 May 2012 14:41:14 -0400
Subject: [gdal-dev] GDALGetMaskFlags() bug with GTOPO30 data
Message-ID: <201205311841.q4VIfEeX032451@tux.cubewerx.com>

I have run into a bug using GDALGetMaskFlags() with GTOPO30 data with
the GDAL 1.9.0 C API.  The test data includes a NoData value:

[dev:~] gdalinfo /cw/testdata/gtopo30/w180s60.dem
Driver: EHdr/ESRI .hdr Labelled
...
Band 1 Block=7200x1 Type=Int16, ColorInterp=Undefined
  NoData Value=-9999

When I call GDALGetMaskFlags(), I get back 0x01 which corresponds to
GMF_ALL_VALID, meaning that the image is fully opaque.  I was hoping to
discard the mask band in such a case as an optimization to avoid reading
mask samples.  However, it appears that the GDALGetMaskFlags() is returing
GMF_ALL_VALID by mistake and should be returning GMF_NODATA (0x08) instead.
If I use the mask returned from GDALGetMaskBand(), it gives me the proper,
variable mask values, so the bug is in falsely reporting the type of the
mask band.

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
     "How many legs does a dog have if you call the tail a leg?  Four.
      Calling a tail a leg doesn't make it a leg." -- Abraham Lincoln

From even.rouault at mines-paris.org  Thu May 31 12:29:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 May 2012 21:29:14 +0200
Subject: [gdal-dev] GDALGetMaskFlags() bug with GTOPO30 data
In-Reply-To: <201205311841.q4VIfEeX032451@tux.cubewerx.com>
References: <201205311841.q4VIfEeX032451@tux.cubewerx.com>
Message-ID: <201205312129.14932.even.rouault@mines-paris.org>

Le jeudi 31 mai 2012 20:41:14, Craig Bruce a ?crit :
> I have run into a bug using GDALGetMaskFlags() with GTOPO30 data with
> the GDAL 1.9.0 C API.  The test data includes a NoData value:
> 
> [dev:~] gdalinfo /cw/testdata/gtopo30/w180s60.dem
> Driver: EHdr/ESRI .hdr Labelled
> ...
> Band 1 Block=7200x1 Type=Int16, ColorInterp=Undefined
>   NoData Value=-9999
> 
> When I call GDALGetMaskFlags(), I get back 0x01 which corresponds to
> GMF_ALL_VALID, meaning that the image is fully opaque.  I was hoping to
> discard the mask band in such a case as an optimization to avoid reading
> mask samples.  However, it appears that the GDALGetMaskFlags() is returing
> GMF_ALL_VALID by mistake and should be returning GMF_NODATA (0x08) instead.
> If I use the mask returned from GDALGetMaskBand(), it gives me the proper,
> variable mask values, so the bug is in falsely reporting the type of the
> mask band.

I cannot replicate, at least with the following Python script, that displays 8 
as expected :

from osgeo import gdal
ds = gdal.GetDriverByName('EHdr').Create('test.bil', 1, 1)
ds.GetRasterBand(1).SetNoDataValue(-9999)
ds = None
ds = gdal.Open('test.bil')
print(ds.GetRasterBand(1).GetMaskFlags())

I somehow suspect you didn't write exactly what you did and/or your 
expectations are wrong because there's no other way of getting the mask flags. 
If you do GetMaskBand().GetMaskFlags(), then it will return 0x1, since the 
mask band itself has no mask.

From csbruce at cubewerx.com  Thu May 31 12:41:40 2012
From: csbruce at cubewerx.com (Craig Bruce)
Date: Thu, 31 May 2012 15:41:40 -0400
Subject: [gdal-dev] GDALGetMaskFlags() bug with GTOPO30 data
In-Reply-To: <201205312129.14932.even.rouault@mines-paris.org>
Message-ID: <201205311941.q4VJfeQW003879@tux.cubewerx.com>

Even Rouault <even.rouault at mines-paris.org> wrote:

> If you do GetMaskBand().GetMaskFlags(), then it will return 0x1, since
> the mask band itself has no mask.

Oops, that is what I did.  Thanks.

--------------------------+----------------------+--------------------------
Dr. Craig S. Bruce        | Ph 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |   Fax 819-771-8388   |  Gatineau, Qu?bec, Canada
csbruce at cubewerx.com      |  http://csbruce.com/ |  http://www.cubewerx.com/
--------------------------+----------------------+--------------------------
                 "Ogden's Law: The sooner you fall behind,
                    the more time you have to catch up."

From even.rouault at mines-paris.org  Thu May 31 13:44:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 May 2012 22:44:08 +0200
Subject: [gdal-dev] CreateCopy() from gtiff file does not initialize
	AREA_OR_POINT metadata
In-Reply-To: <CA+TxYvPxZHxB+PK3jqEiOLpGphb3CHf3kq-qA2QpTQJGxeReag@mail.gmail.com>
References: <CA+TxYvPxZHxB+PK3jqEiOLpGphb3CHf3kq-qA2QpTQJGxeReag@mail.gmail.com>
Message-ID: <201205312244.08915.even.rouault@mines-paris.org>

Le jeudi 31 mai 2012 19:47:38, Etienne Tourigny a ?crit :
> When using a driver's CreateCopy function to copy a source dataset in
> GTiff format, It seems that  the  AREA_OR_POINT metadata is not
> initialized.
> 
> This is seemingly  for performance reasons as shown in the code below.
>  However, it has the unwanted side-effect that the AREA_OR_POINT
> metadata item is not copied over in most (all?) drivers.
> 
> This may be worth fixing and certainly worth being documented somewhere.
> Are there other drivers which have the same behaviour?
> 
> char **GTiffDataset::GetMetadata( const char * pszDomain )
> {
> [...]
>     /* FIXME ? Should we call LookForProjection() to load
> GDALMD_AREA_OR_POINT ? */
>     /* This can impact performances */
> 
>     return oGTiffMDMD.GetMetadata( pszDomain );
> }

See http://trac.osgeo.org/gdal/ticket/4691 for analysis and fix. I didn't feel 
that to be critical enough to backport in 1.9 branch (the GTiff driver becoming 
so complex that mastering all code path combinations is really challenging)

> 
> regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Thu May 31 13:58:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 May 2012 22:58:05 +0200
Subject: [gdal-dev] multiple bands in gdal2xyz.py should be comma
	separated
In-Reply-To: <4FC74E19.6020202@gmail.com>
References: <4FC74E19.6020202@gmail.com>
Message-ID: <201205312258.05665.even.rouault@mines-paris.org>

Le jeudi 31 mai 2012 12:55:21, Tom van Tilburg a ?crit :
> Hi,
> 
> It seems that gdal2xyz.py currently supports the output of multiple
> raster bands using:
>      gdal2xyz.py -band 1 -band 2 etc....
> 
> However, when I use this in combination with the parameter -csv I do not
> get the extected comma in between the values of my bands.
> Extected:   5.604, 50.765, 3, 2
> Received: 5.604, 50.765, 3  2 <== "notice the missing komma"
> 
> I briefly checked the python code and it seems to be an addition to
> 'band_format' is needed.
> 
> band_format = ("%g " * len(bands)).rstrip() + '\n'
> 
> should become something like
> 
> band_format = (("%g " + delim) * len(bands)).rstrip(",") + '\n'

I've committed just a slightly different version in r24523 :

band_format = (("%g" + delim) * len(bands)).rstrip(delim) + '\n'

Thanks

> 
> 
> Cheers,
>      Tom
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From avtoader at gmail.com  Thu May 31 18:05:57 2012
From: avtoader at gmail.com (avtoader)
Date: Thu, 31 May 2012 18:05:57 -0700 (PDT)
Subject: [gdal-dev] Adding an alpha channel to a Virtual Dataset then
 Writing it out to a TIFF in C#
In-Reply-To: <1338343796913-4977895.post@n6.nabble.com>
References: <1338343796913-4977895.post@n6.nabble.com>
Message-ID: <1338512757781-4978428.post@n6.nabble.com>

I fixed the issue by using the "MEM" driver instead of the "VRT".  It was
really helpful and sped up my image output by a lot!

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Adding-an-alpha-channel-to-a-Virtual-Dataset-then-Writing-it-out-to-a-TIFF-in-C-tp4977895p4978428.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From avtoader at gmail.com  Thu May 31 18:09:16 2012
From: avtoader at gmail.com (avtoader)
Date: Thu, 31 May 2012 18:09:16 -0700 (PDT)
Subject: [gdal-dev] Reading image byte data into a dataset in C#
Message-ID: <1338512956575-4978429.post@n6.nabble.com>

How does an individual with TIFF data (byte array) load it into a GDAL
dataset?  I'm trying to eliminate writes to disk to save on time so assuming
memory is not an issue, how do I accomplish this?
Thanks in advance!
-Alex

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-image-byte-data-into-a-dataset-in-C-tp4978429.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

