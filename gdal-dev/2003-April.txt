From ben at vterrain.org  Tue Apr  1 02:14:20 2003
From: ben at vterrain.org (VTP)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Small issue with SetUTM()
In-Reply-To: <IHEAIHOJLJNLHCKGKJEDGEEOCAAA.ben@vterrain.org>
Message-ID: <IHEAIHOJLJNLHCKGKJEDKECKCCAA.ben@vterrain.org>

In the file: ogrspatialreference.cpp
In the method: OGRSpatialReference::SetUTM()

It sets the descriptive name string ("PROJCS") if it was previously set to
"unnamed".  But, it is valid (and common) to call SetUTM() on a project
which is already UTM, e.g. to change the zone from 4 to 5.  In this case,
the name is not updated (e.g. name remains "zone 4", even though the
projection is correctly set to zone 5.)

I think a simple solution would be to not do the test:
    if( EQUAL(GetAttrValue("PROJCS"),"unnamed") )
I can't think of a case where you wouldn't the name string set.

-Ben


From nhv at cape.com  Tue Apr  1 06:26:31 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E88F535.8000207@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com>

Frank Warmerdam writes:
>
> Norman Vine wrote:
> > Hi all,
> >
> > Trying to build GDAL CVS today with Cygwin I get the errors below
> >
> > On further investigation I find
> >
> > from ograssemblepolygon.cpp
> > OGRPolygon *OGRBuildPolygonFromEdges( ... )
> >
> > and from ogr_api.h:
> > OGRGeometryH CPL_DLL OGRBuildPolygonFromEdges( ... )
> >
> > Any advice appreciated
>
> Norman,
>
> I am not sure why this would have arisen recently, but I have added
> ogr/ograssemblepolygon.o to the list of files forcably included in
> the shared library.  This change is in GDALmake.opt.in so you will need
> to update it from CVS, and re-run config.status.
>
> Let me know if this doesn't resolve the problem.

Frank,

That didn't seem to help,  so working on the assumption that this was
just a function signature problem between the 'C' and the 'C++' code
I tried the following patch which seems to work :-)

Not sure if this is the cleanest way todo this but then again
adding a 'C'  Interface to a C++ library is sometimes a bit
'tricky' anyway esp with Cygwin Dlls

Cheers

Norman


Index: ograssemblepolygon.cpp
===================================================================
RCS file: /cvsroot/osrs/gdal/ogr/ograssemblepolygon.cpp,v
retrieving revision 1.6
diff -c -w -r1.6 ograssemblepolygon.cpp
*** ograssemblepolygon.cpp	31 Mar 2003 15:55:42 -0000	1.6
--- ograssemblepolygon.cpp	1 Apr 2003 11:14:46 -0000
***************
*** 178,183 ****
--- 178,199 ----
   *
   */

+ CPL_C_START
+ typedef void *OGRGeometryH;
+ OGRGeometryH CPL_DLL OGRBuildPolygonFromEdges( OGRGeometryH
hLinesAsCollection,
+                                                int bBestEffort,
+                                                int bAutoClose,
+                                                double dfTolerance,
+                                                OGRErr * peErr )
+ {
+     OGRBuildPolygonFromEdges( (OGRGeometryCollection *)hLinesAsCollection,
+                               bBestEffort,
+                               bAutoClose,
+                               dfTolerance,
+                               peErr );
+ }
+ CPL_C_END
+
  OGRPolygon *OGRBuildPolygonFromEdges( OGRGeometryCollection * poLines,
                                        int bBestEffort,
                                        int bAutoClose,



From warmerdam at pobox.com  Tue Apr  1 09:33:25 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Small issue with SetUTM()
In-Reply-To: <IHEAIHOJLJNLHCKGKJEDKECKCCAA.ben@vterrain.org>
References: <IHEAIHOJLJNLHCKGKJEDKECKCCAA.ben@vterrain.org>
Message-ID: <3E89A335.6080708@pobox.com>

VTP wrote:
> In the file: ogrspatialreference.cpp
> In the method: OGRSpatialReference::SetUTM()
> 
> It sets the descriptive name string ("PROJCS") if it was previously set to
> "unnamed".  But, it is valid (and common) to call SetUTM() on a project
> which is already UTM, e.g. to change the zone from 4 to 5.  In this case,
> the name is not updated (e.g. name remains "zone 4", even though the
> projection is correctly set to zone 5.)
> 
> I think a simple solution would be to not do the test:
>     if( EQUAL(GetAttrValue("PROJCS"),"unnamed") )
> I can't think of a case where you wouldn't the name string set.

Ben,

The SetUTM() method is intended to be roughly analygous to the other
direct projection parameter setting routines like SetTM() or SetLCC().
None of these set the descriptive string at all (except to unnamed).
The SetUTM() just sets the description as a convenience in cases where
I am convinced in can do no harm.

However, in some uses of SetUTM() the applicatioin may have already
set their preferred projection name string and based on the SetUTM()
docs they have no reason to expect SetUTM() to reset it on them.

An application wanting SetUTM() to also set a name could call
SetNode("PROJCS","unnamed") initially to ensure SetUTM() will set the name
to something nice.

I will clarify the SetUTM() documentation, but not change the behaviour.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Apr  1 09:42:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com>
Message-ID: <3E89A56C.6050206@pobox.com>

Norman Vine wrote:
> Frank Warmerdam writes:
> 
>>Norman Vine wrote:
>>
>>>Hi all,
>>>
>>>Trying to build GDAL CVS today with Cygwin I get the errors below
>>>
>>>On further investigation I find
>>>
>>>from ograssemblepolygon.cpp
>>>OGRPolygon *OGRBuildPolygonFromEdges( ... )
>>>
>>>and from ogr_api.h:
>>>OGRGeometryH CPL_DLL OGRBuildPolygonFromEdges( ... )
>>>
>>>Any advice appreciated

Norman,

My gdal/ogr/ograssemblepolygon.cpp (CVS Rev 1.5) has OGRBuildPolygonFromEdges()
defined as expected already:

/************************************************************************/
/*                      OGRBuildPolygonFromEdges()                      */
/************************************************************************/

OGRGeometryH OGRBuildPolygonFromEdges( OGRGeometryH hLines,
                                        int bBestEffort,
                                        int bAutoClose,
                                        double dfTolerance,
                                        OGRErr * peErr )

Could you check that you have ograssemblepolygon.cpp 1.5?  I don't understand
why you are seeing something so different.   This was apparently all resolved
at the beginning of January.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From morissette at dmsolutions.ca  Tue Apr  1 10:00:40 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com> <3E89A56C.6050206@pobox.com>
Message-ID: <3E89A998.DAA25F5B@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> My gdal/ogr/ograssemblepolygon.cpp (CVS Rev 1.5) has OGRBuildPolygonFromEdges()
> defined as expected already:
> 
> /************************************************************************/
> /*                      OGRBuildPolygonFromEdges()                      */
> /************************************************************************/
> 
> OGRGeometryH OGRBuildPolygonFromEdges( OGRGeometryH hLines,
>                                         int bBestEffort,
>                                         int bAutoClose,
>                                         double dfTolerance,
>                                         OGRErr * peErr )
> 
> Could you check that you have ograssemblepolygon.cpp 1.5?  I don't understand
> why you are seeing something so different.   This was apparently all resolved
> at the beginning of January.
> 


Frank,

I had already added ograssemblepolygon.o to GDALMake.opt.in locally
yesterday when I ran into this and that didn't fix it for me either.  I
had also verified that the CPL_C_START was there to enclose the function
prototype in ogr_api.h, I even tried adding an explicit #include
"ogr_api.h" in ograssemblepolygon.cpp and nothing worked.  This is
really odd and didn't make any sense to me, that's why I had come to the
conclusion that it was my build environment that was broken.

I've done another CVS update a few minutes ago and am doing a 'make
clean;make' right now.  If the problem persists I'll give you access to
the system that produces this so that you can see by yourself.  Note
that this system is using a version of egcs that's a couple of years
old, so perhaps that's related.

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From warmerdam at pobox.com  Tue Apr  1 10:06:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E89A56C.6050206@pobox.com>
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com> <3E89A56C.6050206@pobox.com>
Message-ID: <3E89AAE7.5000103@pobox.com>

Frank Warmerdam wrote:
> Norman,
> 
> My gdal/ogr/ograssemblepolygon.cpp (CVS Rev 1.5) has 
> OGRBuildPolygonFromEdges()
> defined as expected already:
> 
> /************************************************************************/
> /*                      OGRBuildPolygonFromEdges()                      */
> /************************************************************************/
> 
> OGRGeometryH OGRBuildPolygonFromEdges( OGRGeometryH hLines,
>                                        int bBestEffort,
>                                        int bAutoClose,
>                                        double dfTolerance,
>                                        OGRErr * peErr )
> 
> Could you check that you have ograssemblepolygon.cpp 1.5?  I don't 
> understand
> why you are seeing something so different.   This was apparently all 
> resolved
> at the beginning of January.
> 
> Best regards,

Norman,

Mystery solved.   I hadn't updated from CVS and when I did I see:

  * Revision 1.6  2003/03/31 15:55:42  danmo
  * Added C API function docs
  *
  * Revision 1.4  2002/03/05 15:15:07  warmerda
  * fixed zero tolerance problems

Bad bad Daniel.  Making changes and committing them without first doing a
cvs update!  I have committed a 1.7 version with the version 1.5 changes
re-introduced.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Tue Apr  1 10:11:03 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E89A56C.6050206@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAMEEGDAAA.nhv@cape.com>

Frank Warmerdam writes:
> >
> >>Norman Vine wrote:
> >>
> >>>
> >>>Trying to build GDAL CVS today with Cygwin I get the errors below
> >>>
> >>>On further investigation I find
> >>>
> >>>from ograssemblepolygon.cpp
> >>>OGRPolygon *OGRBuildPolygonFromEdges( ... )
> >>>
> >>>and from ogr_api.h:
> >>>OGRGeometryH CPL_DLL OGRBuildPolygonFromEdges( ... )
> >>>
> >>>Any advice appreciated
>
> Norman,
>
> My gdal/ogr/ograssemblepolygon.cpp (CVS Rev 1.5) has
> OGRBuildPolygonFromEdges()
> defined as expected already:
>
> /************************************************************************/
> /*                      OGRBuildPolygonFromEdges()                      */
> /************************************************************************/
>
> OGRGeometryH OGRBuildPolygonFromEdges( OGRGeometryH hLines,
>                                         int bBestEffort,
>                                         int bAutoClose,
>                                         double dfTolerance,
>                                         OGRErr * peErr )
>
> Could you check that you have ograssemblepolygon.cpp 1.5?  I
> don't understand
> why you are seeing something so different.   This was apparently
> all resolved
> at the beginning of January.

Ahhhh.... It looks as if at somepoint someone might have updated
the CVS from a not up to date source tree

This would explain things

Norman


 * $Log: ograssemblepolygon.cpp,v $
 * Revision 1.6  2003/03/31 15:55:42  danmo
 * Added C API function docs
 *
 * Revision 1.4  2002/03/05 15:15:07  warmerda
 * fixed zero tolerance problems
 *
 * Revision 1.3  2002/03/05 14:25:14  warmerda
 * expand tabs
 *



From morissette at dmsolutions.ca  Tue Apr  1 10:16:18 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com> <3E89A56C.6050206@pobox.com> <3E89AAE7.5000103@pobox.com>
Message-ID: <3E89AD42.5196FE32@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> Mystery solved.   I hadn't updated from CVS and when I did I see:
> 
>   * Revision 1.6  2003/03/31 15:55:42  danmo
>   * Added C API function docs
>   *
>   * Revision 1.4  2002/03/05 15:15:07  warmerda
>   * fixed zero tolerance problems
> 
> Bad bad Daniel.  Making changes and committing them without first doing a
> cvs update!  I have committed a 1.7 version with the version 1.5 changes
> re-introduced.
> 

Sorry... shame on me...

BTW I did do a CVS update, and did review all the changes before
committing them since they had not been done by myself, I even had to
resolve a few conflicts, I don't understand how this could have
happened.

Sorry about this again, I hate it when someone breaks things in CVS by
not being careful enough... I still need to figure out how this could
have happened though.

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From dron at ak4719.spb.edu  Tue Apr  1 11:07:30 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E89A56C.6050206@pobox.com>
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com> <3E89A56C.6050206@pobox.com>
Message-ID: <20030401160729.GA10159@ak4719.spb.edu>

On Tue, Apr 01, 2003 at 09:42:52AM -0500, Frank Warmerdam wrote:
> My gdal/ogr/ograssemblepolygon.cpp (CVS Rev 1.5) has 
> OGRBuildPolygonFromEdges()
> defined as expected already:
> 
> /************************************************************************/
> /*                      OGRBuildPolygonFromEdges()                      */
> /************************************************************************/
> 
> OGRGeometryH OGRBuildPolygonFromEdges( OGRGeometryH hLines,
>                                        int bBestEffort,
>                                        int bAutoClose,
>                                        double dfTolerance,
>                                        OGRErr * peErr )
> 
> Could you check that you have ograssemblepolygon.cpp 1.5?  I don't 
> understand
> why you are seeing something so different.   This was apparently all 
> resolved
> at the beginning of January.

Frank,

ograssemblepolygon.cpp was updated yesterday with the following log
entry:

 * Revision 1.6  2003/03/31 15:55:42  danmo
 * Added C API function docs
 *
 * Revision 1.4  2002/03/05 15:15:07  warmerda
 * fixed zero tolerance problems

1.5 version was gone somewhere... I have the same problem as Norman.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Tue Apr  1 10:25:48 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E89AAE7.5000103@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAKEEIDAAA.nhv@cape.com>

Frank Warmerdam writes:
> 
> Mystery solved.   

Yup I guess our mails crossed in the ether :-)

> I have committed a 1.7 version with the version 1.5 changes
> re-introduced.

FYI: Having ViewCVS *really* helped me finally see this one :-)

Now if I can get Python mapscript running again ....
but that is another story for another list :-)

Many Thanks

Norman



From ben at vterrain.org  Tue Apr  1 10:39:24 2003
From: ben at vterrain.org (VTP)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Small issue with SetUTM()
In-Reply-To: <3E89A335.6080708@pobox.com>
Message-ID: <IHEAIHOJLJNLHCKGKJEDKECOCCAA.ben@vterrain.org>

Thanks Frank, the workaround you indicate is perfectly good.
-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Tuesday, April 01, 2003 9:33 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] Small issue with SetUTM()
>
> [...]
>
> An application wanting SetUTM() to also set a name could call
> SetNode("PROJCS","unnamed") initially to ensure SetUTM() will set the name
> to something nice.
>
> I will clarify the SetUTM() documentation, but not change the behaviour.


From nhv at cape.com  Tue Apr  1 10:36:49 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
In-Reply-To: <3E89AD42.5196FE32@dmsolutions.ca>
Message-ID: <EKEJIKAILPONGGENMBGAGEEJDAAA.nhv@cape.com>

Daniel Morissette writes:
>  
> Sorry about this again, I hate it when someone breaks things in CVS by
> not being careful enough... I still need to figure out how this could
> have happened though.

Dan

One of the beauties of having CVS and an Interactive Interface to it
is that these sorts of things are usually fairly easy to fix.

Believe me I have seen far worse goofups by 'knowledgeable' folks
so don't beat yourself up to much over this

FWIW
What I try todo before comitting my code to a public project is

1) do a CVS update
2) check my source tree to see if my changes are still there
3) do a CVS diff to check what I am actually changing
4) finally do a cvs commit

BTW - The DOCS are *appreciated*

Cheers

Norman



From morissette at dmsolutions.ca  Tue Apr  1 10:55:16 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
References: <EKEJIKAILPONGGENMBGAAEECDAAA.nhv@cape.com> <3E89A56C.6050206@pobox.com> <3E89AAE7.5000103@pobox.com> <3E89AD42.5196FE32@dmsolutions.ca>
Message-ID: <3E89B664.8DB4B82E@dmsolutions.ca>

Daniel Morissette wrote:
> 
> Sorry about this again, I hate it when someone breaks things in CVS by
> not being careful enough... I still need to figure out how this could
> have happened though.
> 

Mystery solved at this end too... the file ograssemblepolygon.cpp had
been copied from an external source (outside of the original CVS tree)
by Normand who was doing the C API docs, and I missed this when I
reviewed his changes with cvs diff before the commit.  Case closed.

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From morissette at dmsolutions.ca  Tue Apr  1 11:06:34 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Cygwin CVS errors
References: <EKEJIKAILPONGGENMBGAGEEJDAAA.nhv@cape.com>
Message-ID: <3E89B90A.1F6E5167@dmsolutions.ca>

Norman Vine wrote:
> 
> FWIW
> What I try todo before comitting my code to a public project is
> 
> 1) do a CVS update
> 2) check my source tree to see if my changes are still there
> 3) do a CVS diff to check what I am actually changing
> 4) finally do a cvs commit
> 

Yup I know all that... that's what I always do and I keep asking others
to take the same precautions.  And I did it this time as well, but I
obviously didn't review the cvs diff carefully enough because I missed
this error in the middle of all this new text that was added (11 files
were modified).

BTW, I would add a step between 3 and 4 above: 

 3.1 - Recompile and retest the software one last time.

I didn't recompile and test this time since I didn't expect anything to
have changed in the code.  I guess I should have.

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From matt at terraEngine.com  Wed Apr  2 18:32:03 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
Message-ID: <000101c2f970$10ebd6e0$d701a8c0@matt>

Hi,

I am interested in writing or using a windows command line utility which
will reproject GeoTiffs for me.  It seems that the gdalwarp utility is
what I want.

So I have a couple of questions ...

1.  Am I correct that gdalwarp will reproject GeoTiffs for me?  (e.g.
UTM to Decimal Degrees)
2.  Are there some usage examples that I can refer to?

Thanks,

Matt

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From kalevala at myrealbox.com  Thu Apr  3 02:57:12 2003
From: kalevala at myrealbox.com (Kalev Ala)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GML with ogr2ogr
Message-ID: <1049356632.901074e0kalevala@myrealbox.com>

How to use GML driver with ogr2ogr?

% ogr2ogr -f GML this.gml OCI:usr/pwd@db my_feature -where "id = 0"

produces invalid XML with two top-level elements. There was schema and GML in one file.

Are there any format specific layer creation options?

I was playing with gdal-cvs-030318

Kalev




From warmerdam at pobox.com  Thu Apr  3 09:41:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GML with ogr2ogr
In-Reply-To: <1049356632.901074e0kalevala@myrealbox.com>
References: <1049356632.901074e0kalevala@myrealbox.com>
Message-ID: <3E8C481D.3080907@pobox.com>

Kalev Ala wrote:
> How to use GML driver with ogr2ogr?
> 
> % ogr2ogr -f GML this.gml OCI:usr/pwd@db my_feature -where "id = 0"
> 
> produces invalid XML with two top-level elements. There was schema and GML in one file.
> 
> Are there any format specific layer creation options?
> 
> I was playing with gdal-cvs-030318

Kalev,

Sorry, I will fix this.

I have been experimenting with a mechanism to include the schema with the
data but I forgot to disable this before committing.  For the time being I
will have the schema emitted into a separate .xsd file, and provide a
"creation" option to disable even writing that.

I will let you know when the fix is complete.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Apr  3 09:55:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000101c2f970$10ebd6e0$d701a8c0@matt>
References: <000101c2f970$10ebd6e0$d701a8c0@matt>
Message-ID: <3E8C4B74.9010707@pobox.com>

Matt Lynch wrote:
> Hi,
> 
> I am interested in writing or using a windows command line utility which
> will reproject GeoTiffs for me.  It seems that the gdalwarp utility is
> what I want.
> 
> So I have a couple of questions ...
> 
> 1.  Am I correct that gdalwarp will reproject GeoTiffs for me?  (e.g.
> UTM to Decimal Degrees)
> 2.  Are there some usage examples that I can refer to?

Matt,

I trust you have read the modest docs at:

   http://www.remotesensing.org/gdal/gdal_utilities.html#gdalwarp

Yes, it can reproject GeoTIFF files from UTM to decimal degrees.   The only
example is the one in the documentation.  To do what you want you might use:

  gdalwarp -t_srs '+proj=latlong +datum=WGS84' in.tif out.tif

Note, there is also a "gdalwarptest" in the CVS version of GDAL with similar
commandline options as gdalwarp, but using a much more sophisticated approach
internally.  In particular, it:
  o Supports a all pixel types, not just 8bit like gdalwarp.
  o Will work on images that cannot be held completely in memory.
  o Supports a variety of resamplig kernels.
  o Has "NODATA" support.

Gdalwarptest is the "test harnass" for this next generation warper.  Depending
on your needs I would appreciate help in testing this new implementation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Apr  3 11:26:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GML with ogr2ogr
In-Reply-To: <1049356632.901074e0kalevala@myrealbox.com>
References: <1049356632.901074e0kalevala@myrealbox.com>
Message-ID: <3E8C60B9.70405@pobox.com>

Kalev Ala wrote:
> How to use GML driver with ogr2ogr?
> 
> % ogr2ogr -f GML this.gml OCI:usr/pwd@db my_feature -where "id = 0"
> 
> produces invalid XML with two top-level elements. There was schema and GML in one file.
> 
> Are there any format specific layer creation options?
> 
> I was playing with gdal-cvs-030318

Kalev,

OK, this is fixed in CVS now.  The default action now is to write a .xsd file
with the same basename as the GML file.  The XSISCHEMAURL creation option may
be used to turn off schema writing, and force a reference to an existing
schema file.  The XSISCHEMA=INTERNAL option may be used to force schema
info to be written internally in the .gml file in the broken way you saw.
XSISCHEMA=OFF can be used to disable all reference schema files. The default
is now XSISCHEMA=EXTERNAL.

You can pick up the next nightly snapshot, or pull directly from CVS.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From assefa at dmsolutions.ca  Thu Apr  3 11:29:28 2003
From: assefa at dmsolutions.ca (Yewondwossen Assefa)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] external libs flags for PNG and JPEG on windows
Message-ID: <3E8C6168.75F628C@dmsolutions.ca>

Hi There,

 For those building gdal on windows, there are new flags in the
nmake.opt file which can be used to build gdal with external jpeg and
png libraries. These flags are :

#if using an external jpeg library uncomment the follwing lines
JPEG_EXTERNAL_LIB = 1
JPEGDIR = c:/projects/jpeg-6b
JPEG_LIB = $(JPEGDIR)/libjpeg.lib

#if using an external png library uncomment the follwing lines
PNG_EXTERNAL_LIB = 1
PNGDIR = c:/projects/libpng-1.0.8
PNG_LIB = $(PNGDIR)/libpng.lib


Note : there is a new subfolder libjpeg which was created under the jpeg

directory. All files *.c , *.h have been moved into that directory.

Later,

--
----------------------------------------------------------------
Assefa Yewondwossen
Software Analyst

Email: assefa@dmsolutions.ca
http://www.dmsolutions.ca/

Phone: (613) 565-5056 (ext 14)
Fax:   (613) 565-0925
----------------------------------------------------------------




From matt at terraEngine.com  Thu Apr  3 12:57:00 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <3E8C4B74.9010707@pobox.com>
Message-ID: <000001c2fa0a$6d7a8c40$d701a8c0@matt>

Hi Frank,

The gdalwarptest sounds interesting.  To get an orientation I have built
GDAL (the cleanest open source build on a windows box in a long time, by
the way!). 

When I try to run gdalwarp I just get a usage blurb.
------------------------------------------------------------------------
-----------------
C:\gdal>gdalwarp -t_srs '+proj=latlong +datum=WGS84' jeffpan2000_10m.tif
out.tif

Usage: gdalwarp [--version] [--formats]
    [-s_srs srs_def] [-t_srs srs_def] [-order n] [-et err_threshold]
    [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
    [-of format] [-co "NAME=VALUE"]* srcfile dstfile
------------------------------------------------------------------------
-----------------

jeffpan2000_10m.tif is in the current directory
out.tif does not exist yet.


The details of jeffpan2000_10m.tif are below
------------------------------------------------------------------------
-----------------
C:\gdal>gdalinfo jeffpan2000_10m.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is `'
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Metadata:
  TIFFTAG_DOCUMENTNAME=jeffpan2000_10m.tif
  TIFFTAG_SOFTWARE=ImageMagick 5.5.2 12/01/02 Q8
http://www.imagemagick.org
Corner Coordinates:
Upper Left  (  644995.948, 5518006.066)
Lower Left  (  644995.948, 5498006.066)
Upper Right (  664995.948, 5518006.066)
Lower Right (  664995.948, 5498006.066)
Center      (  654995.948, 5508006.066)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray
------------------------------------------------------------------------
-----------------

Have I got the syntax wrong?  Or is it because the image is in 10TM
which is not recognized?

Thanks,

Matt


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 03, 2003 7:56 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi,
> 
> I am interested in writing or using a windows command line utility 
> which will reproject GeoTiffs for me.  It seems that the gdalwarp 
> utility is what I want.
> 
> So I have a couple of questions ...
> 
> 1.  Am I correct that gdalwarp will reproject GeoTiffs for me?  (e.g. 
> UTM to Decimal Degrees) 2.  Are there some usage examples that I can 
> refer to?

Matt,

I trust you have read the modest docs at:

   http://www.remotesensing.org/gdal/gdal_utilities.html#gdalwarp

Yes, it can reproject GeoTIFF files from UTM to decimal degrees.   The
only
example is the one in the documentation.  To do what you want you might
use:

  gdalwarp -t_srs '+proj=latlong +datum=WGS84' in.tif out.tif

Note, there is also a "gdalwarptest" in the CVS version of GDAL with
similar commandline options as gdalwarp, but using a much more
sophisticated approach internally.  In particular, it:
  o Supports a all pixel types, not just 8bit like gdalwarp.
  o Will work on images that cannot be held completely in memory.
  o Supports a variety of resamplig kernels.
  o Has "NODATA" support.

Gdalwarptest is the "test harnass" for this next generation warper.
Depending on your needs I would appreciate help in testing this new
implementation.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From warmerdam at pobox.com  Thu Apr  3 13:12:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000001c2fa0a$6d7a8c40$d701a8c0@matt>
References: <000001c2fa0a$6d7a8c40$d701a8c0@matt>
Message-ID: <3E8C7991.2080206@pobox.com>

Matt Lynch wrote:
> Hi Frank,
> 
> The gdalwarptest sounds interesting.  To get an orientation I have built
> GDAL (the cleanest open source build on a windows box in a long time, by
> the way!). 
> 
> When I try to run gdalwarp I just get a usage blurb.
> ------------------------------------------------------------------------
> -----------------
> C:\gdal>gdalwarp -t_srs '+proj=latlong +datum=WGS84' jeffpan2000_10m.tif
> out.tif
> 
> Usage: gdalwarp [--version] [--formats]
>     [-s_srs srs_def] [-t_srs srs_def] [-order n] [-et err_threshold]
>     [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
>     [-of format] [-co "NAME=VALUE"]* srcfile dstfile
> ------------------------------------------------------------------------
> -----------------
> 
> jeffpan2000_10m.tif is in the current directory
> out.tif does not exist yet.

Matt,

I believe this is a commandline parsing issue.  The '+proj=latlong +datum=WGS84'
would be parsed as a single argument by a Unix shell, but the DOS shell doesn't
work the same.  I can think of three likely solutions:

  o Relink stuff with the SETARGV.OBJ file (see nmake.opt file for some
    discussion of this) to get more unix like argument parsing.  But this might
    only do wildcarding and not quoting.  I am unsure.

  o Use the Cygwin (http://www.cygwin.com) shell as your shell.  It provides
    Unix style commandline parsing as well as lots of other stuff.

  o Put the coordinate system definition into a file, and refer to that.
    Put "+proj=latlong +datum=WGS84" in a file called wgs84.proj4 (without any
    quotes) and then use the command:

     gdalwarp -t_srs .\wgs84.proj4 jeffpan2000_10m.tif out.tif

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From TMitchell at lignum.com  Thu Apr  3 13:18:25 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
Message-ID: <OFC5AB5E6C.788C41F8-ON88256CFD.00646BD3-88256CFD.0064904A@lignum.com>

Perhaps double-quoting the proj string instead of single quotes?  I know
windows will treat that as a single entity then.  I haven't used gdalwarp
but I thought I'd throw in my suggestion anyway.

Tyler


                                                                                                            
                      Frank Warmerdam                                                                       
                      <warmerdam@pobox.com>        To:       gdal-dev@remotesensing.org                     
                      Sent by:                     cc:                                                      
                      gdal-dev-admin@remote        Fax to:                                                  
                      sensing.org                  Subject:  Re: [Gdal-dev] Image Reprojection              
                                                                                                            
                                                                                                            
                      04/03/2003 10:12 AM                                                                   
                      Please respond to                                                                     
                      gdal-dev                                                                              
                                                                                                            
                                                                                                            




Matt Lynch wrote:
> Hi Frank,
>
> The gdalwarptest sounds interesting.  To get an orientation I have built
> GDAL (the cleanest open source build on a windows box in a long time, by
> the way!).
>
> When I try to run gdalwarp I just get a usage blurb.
> ------------------------------------------------------------------------
> -----------------
> C:\gdal>gdalwarp -t_srs '+proj=latlong +datum=WGS84' jeffpan2000_10m.tif
> out.tif
>
> Usage: gdalwarp [--version] [--formats]
>     [-s_srs srs_def] [-t_srs srs_def] [-order n] [-et err_threshold]
>     [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
>     [-of format] [-co "NAME=VALUE"]* srcfile dstfile
> ------------------------------------------------------------------------
> -----------------
>
> jeffpan2000_10m.tif is in the current directory
> out.tif does not exist yet.

Matt,

I believe this is a commandline parsing issue.  The '+proj=latlong
+datum=WGS84'
would be parsed as a single argument by a Unix shell, but the DOS shell
doesn't
work the same.  I can think of three likely solutions:

  o Relink stuff with the SETARGV.OBJ file (see nmake.opt file for some
    discussion of this) to get more unix like argument parsing.  But this
might
    only do wildcarding and not quoting.  I am unsure.

  o Use the Cygwin (http://www.cygwin.com) shell as your shell.  It
provides
    Unix style commandline parsing as well as lots of other stuff.

  o Put the coordinate system definition into a file, and refer to that.
    Put "+proj=latlong +datum=WGS84" in a file called wgs84.proj4 (without
any
    quotes) and then use the command:

     gdalwarp -t_srs .\wgs84.proj4 jeffpan2000_10m.tif out.tif

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev






From matt at terraEngine.com  Thu Apr  3 13:24:20 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <3E8C7991.2080206@pobox.com>
Message-ID: <000001c2fa0e$3ed52f40$d701a8c0@matt>

Hi Frank,

>I believe this is a commandline parsing issue.  The '+proj=latlong
+datum=WGS84' would be parsed as a single argument by a Unix shell, but
the DOS shell doesn't work the same.  

That makes sense.  I added a forth option and used double quotes (I can
recall using them in the past within dos to bypass the whitespace).

Now I get
------------------------------------------------------------------------
--------
C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif
out.tif

ERROR 1: Failed to import coordinate system `'.
Creating output file is that 2000P x 2000L.
ERROR 1: Failed to import coordinate system `'.
:0...10...20...30...40...50...60...70...80...90...100 - done.
------------------------------------------------------------------------
--------

The output file is created, but it doesn't look like the conversion
happens.  The line 'FAILED to import coordinate system' is probably the
source of my trouble now (image is in 10TM).

How can I specify a input coordinate system like 10TM

Thanks,

Matt

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From matt at terraEngine.com  Thu Apr  3 14:04:38 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000001c2fa0e$3ed52f40$d701a8c0@matt>
Message-ID: <000401c2fa13$dfe75e80$d701a8c0@matt>

I ran gdalinfo on out.tif and saw that I was missing gdal.dll.  I
grabbed that off the gdall5a release.  Now I get the following - again
it must be that I need to feed proj4 the specifics of a 10TM projection.

C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif
out.tif

ERROR 1: Can't find requested entry point: pj_strerrno

ERROR 1: Failed to import coordinate system `'.
:0...10...20...30...40...50...60...70...80...90...100 - done.

When I run gdalinfo on out.tif now I get ...

C:\gdal>gdalinfo out.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Corner Coordinates:
Upper Left  (  644995.948, 5518006.066) ERROR 1: Can't find requested
entry poin
t: pj_strerrno

(644995d56'4294967349.58"E,5518006d 3'21474836538.66"N)
Lower Left  (  644995.948, 5498006.066)
(644995d56'4294967349.58"E,5498006d 3'21
474836538.66"N)
Upper Right (  664995.948, 5518006.066)
(664995d56'4294967349.58"E,5518006d 3'21
474836538.66"N)
Lower Right (  664995.948, 5498006.066)
(664995d56'4294967349.58"E,5498006d 3'21
474836538.66"N)
Center      (  654995.948, 5508006.066)
(654995d56'4294967349.58"E,5508006d 3'21
474836538.66"N)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray


Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 11:24 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


Hi Frank,

>I believe this is a commandline parsing issue.  The '+proj=latlong
+datum=WGS84' would be parsed as a single argument by a Unix shell, but
the DOS shell doesn't work the same.  

That makes sense.  I added a forth option and used double quotes (I can
recall using them in the past within dos to bypass the whitespace).

Now I get
------------------------------------------------------------------------
--------
C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif
out.tif

ERROR 1: Failed to import coordinate system `'.
Creating output file is that 2000P x 2000L.
ERROR 1: Failed to import coordinate system `'.
:0...10...20...30...40...50...60...70...80...90...100 - done.
------------------------------------------------------------------------
--------

The output file is created, but it doesn't look like the conversion
happens.  The line 'FAILED to import coordinate system' is probably the
source of my trouble now (image is in 10TM).

How can I specify a input coordinate system like 10TM

Thanks,

Matt

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From warmerdam at pobox.com  Thu Apr  3 14:57:20 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000001c2fa0e$3ed52f40$d701a8c0@matt>
References: <000001c2fa0e$3ed52f40$d701a8c0@matt>
Message-ID: <3E8C9220.6050508@pobox.com>

Matt Lynch wrote:
> Hi Frank,
> 
> 
>>I believe this is a commandline parsing issue.  The '+proj=latlong
> 
> +datum=WGS84' would be parsed as a single argument by a Unix shell, but
> the DOS shell doesn't work the same.  
> 
> That makes sense.  I added a forth option and used double quotes (I can
> recall using them in the past within dos to bypass the whitespace).
> 
> Now I get
> ------------------------------------------------------------------------
> --------
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Failed to import coordinate system `'.
> Creating output file is that 2000P x 2000L.
> ERROR 1: Failed to import coordinate system `'.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> ------------------------------------------------------------------------
> --------
> 
> The output file is created, but it doesn't look like the conversion
> happens.  The line 'FAILED to import coordinate system' is probably the
> source of my trouble now (image is in 10TM).
> 
> How can I specify a input coordinate system like 10TM

Matt,

It isn't clear from the message whether the coordinate system that failed to
"import" was the target one you provided on the commandline or the one on
the source file.  What does gdalinfo report on the source file?

If it has no coordinate system set you could use the -s_srs option to set
the source coordinate system.

  gdalwarp -s_srs "+proj=utm +zone=10 +datum=WGS84" -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif

The coordinate system descriptions are from PROJ.4, so you should review the
(fragmented) PROJ.4 docs to learn how to do different coordinate systems. I
assume that "10TM" is "UTM Zone 10".  I am not familiar with "10TM" as a
coordinate system name.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Apr  3 15:02:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000401c2fa13$dfe75e80$d701a8c0@matt>
References: <000401c2fa13$dfe75e80$d701a8c0@matt>
Message-ID: <3E8C934A.3020002@pobox.com>

Matt Lynch wrote:
> I ran gdalinfo on out.tif and saw that I was missing gdal.dll.  I
> grabbed that off the gdall5a release.  Now I get the following - again
> it must be that I need to feed proj4 the specifics of a 10TM projection.

Matt,

I assume you mean you are missing "proj.dll"?  You can find more
recent versions at http://www.remotesensing.org/proj/ however, I would
have expected what is in the 1.1.5a GDAL binary release to be OK.

> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Can't find requested entry point: pj_strerrno
> 
> ERROR 1: Failed to import coordinate system `'.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> When I run gdalinfo on out.tif now I get ...

What does it report about the source file?  If it can't report the
corners in lat/long properly then the source is the issue.

Best regards.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From matt at terraEngine.com  Thu Apr  3 16:09:14 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <3E8C9220.6050508@pobox.com>
Message-ID: <000001c2fa25$48c550e0$d701a8c0@matt>

Hi Frank,

The gdalinfo report of the source file is:

C:\gdal>gdalinfo jeffpan2000_10m.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is `'
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Metadata:
  TIFFTAG_DOCUMENTNAME=jeffpan2000_10m.tif
  TIFFTAG_SOFTWARE=ImageMagick 5.5.2 12/01/02 Q8
http://www.imagemagick.org
Corner Coordinates:
Upper Left  (  644995.948, 5518006.066)
Lower Left  (  644995.948, 5498006.066)
Upper Right (  664995.948, 5518006.066)
Lower Right (  664995.948, 5498006.066)
Center      (  654995.948, 5508006.066)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray


As for 10TM, it is used for Alberta.

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


I will look into the proj4 site as you have suggested.

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 03, 2003 12:57 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi Frank,
> 
> 
>>I believe this is a commandline parsing issue.  The '+proj=latlong
> 
> +datum=WGS84' would be parsed as a single argument by a Unix shell, 
> +but
> the DOS shell doesn't work the same.
> 
> That makes sense.  I added a forth option and used double quotes (I 
> can recall using them in the past within dos to bypass the 
> whitespace).
> 
> Now I get
> ----------------------------------------------------------------------
> --
> --------
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Failed to import coordinate system `'.
> Creating output file is that 2000P x 2000L.
> ERROR 1: Failed to import coordinate system `'. 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> ----------------------------------------------------------------------
> --
> --------
> 
> The output file is created, but it doesn't look like the conversion 
> happens.  The line 'FAILED to import coordinate system' is probably 
> the source of my trouble now (image is in 10TM).
> 
> How can I specify a input coordinate system like 10TM

Matt,

It isn't clear from the message whether the coordinate system that
failed to "import" was the target one you provided on the commandline or
the one on the source file.  What does gdalinfo report on the source
file?

If it has no coordinate system set you could use the -s_srs option to
set the source coordinate system.

  gdalwarp -s_srs "+proj=utm +zone=10 +datum=WGS84" -t_srs
"+proj=latlong +datum=WGS84" jeffpan2000_10m.tif

The coordinate system descriptions are from PROJ.4, so you should review
the
(fragmented) PROJ.4 docs to learn how to do different coordinate
systems. I assume that "10TM" is "UTM Zone 10".  I am not familiar with
"10TM" as a coordinate system name.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From matt at terraEngine.com  Thu Apr  3 16:42:52 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000001c2fa25$48c550e0$d701a8c0@matt>
Message-ID: <000201c2fa29$fb0e59a0$d701a8c0@matt>

I have skimmed through the proj4 documentation and looks like I should
have something like ...

C:\gdal>gdalwarp -s_srs "+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0
+lat_0=0 -m
 0.9992" -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif out.tif
ERROR 1: Can't find requested entry point: pj_strerrno

:0.ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14, further errors will be
supressed on the
 transform object.
..10...20...30...40...50...60...70...80...90...100 - done.

As you can see it doesn't work yet.

My input source parameters are 
"+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0 +lat_0=0 -m  0.9992"

But I haven't seen how to specify the central meridian.

Any thoughts?

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 2:09 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


Hi Frank,

The gdalinfo report of the source file is:

C:\gdal>gdalinfo jeffpan2000_10m.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is `'
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Metadata:
  TIFFTAG_DOCUMENTNAME=jeffpan2000_10m.tif
  TIFFTAG_SOFTWARE=ImageMagick 5.5.2 12/01/02 Q8
http://www.imagemagick.org Corner Coordinates: Upper Left  (
644995.948, 5518006.066) Lower Left  (  644995.948, 5498006.066) Upper
Right (  664995.948, 5518006.066) Lower Right (  664995.948,
5498006.066)
Center      (  654995.948, 5508006.066)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray


As for 10TM, it is used for Alberta.

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


I will look into the proj4 site as you have suggested.

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 03, 2003 12:57 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi Frank,
> 
> 
>>I believe this is a commandline parsing issue.  The '+proj=latlong
> 
> +datum=WGS84' would be parsed as a single argument by a Unix shell,
> +but
> the DOS shell doesn't work the same.
> 
> That makes sense.  I added a forth option and used double quotes (I
> can recall using them in the past within dos to bypass the 
> whitespace).
> 
> Now I get
> ----------------------------------------------------------------------
> --
> --------
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Failed to import coordinate system `'.
> Creating output file is that 2000P x 2000L.
> ERROR 1: Failed to import coordinate system `'.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> ----------------------------------------------------------------------
> --
> --------
> 
> The output file is created, but it doesn't look like the conversion
> happens.  The line 'FAILED to import coordinate system' is probably 
> the source of my trouble now (image is in 10TM).
> 
> How can I specify a input coordinate system like 10TM

Matt,

It isn't clear from the message whether the coordinate system that
failed to "import" was the target one you provided on the commandline or
the one on the source file.  What does gdalinfo report on the source
file?

If it has no coordinate system set you could use the -s_srs option to
set the source coordinate system.

  gdalwarp -s_srs "+proj=utm +zone=10 +datum=WGS84" -t_srs
"+proj=latlong +datum=WGS84" jeffpan2000_10m.tif

The coordinate system descriptions are from PROJ.4, so you should review
the
(fragmented) PROJ.4 docs to learn how to do different coordinate
systems. I assume that "10TM" is "UTM Zone 10".  I am not familiar with
"10TM" as a coordinate system name.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From matt at terraEngine.com  Thu Apr  3 17:15:01 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000201c2fa29$fb0e59a0$d701a8c0@matt>
Message-ID: <000001c2fa2e$78763e90$d701a8c0@matt>

Hi,

I am still digging in the proj4 documentation and my best guess now is:

gdalwarp -s_srs "+proj=tmerc +ellps=GRS80 +x_0=500000 +y_0=0 +lon_0=-115
+m=0.9992 +north" -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif out.t

However, it still gives the same error.  

In the proj4 documentation the command line uses -m 0.9992, but in gdal
all the parameters appear to be preceded by a +.
I am also unsure of +north.

The parameters I am trying to match are:

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 2:43 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


I have skimmed through the proj4 documentation and looks like I should
have something like ...

C:\gdal>gdalwarp -s_srs "+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0
+lat_0=0 -m
 0.9992" -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif out.tif
ERROR 1: Can't find requested entry point: pj_strerrno

:0.ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14, further errors will be
supressed on the  transform object.
..10...20...30...40...50...60...70...80...90...100 - done.

As you can see it doesn't work yet.

My input source parameters are 
"+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0 +lat_0=0 -m  0.9992"

But I haven't seen how to specify the central meridian.

Any thoughts?

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 2:09 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


Hi Frank,

The gdalinfo report of the source file is:

C:\gdal>gdalinfo jeffpan2000_10m.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is `'
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Metadata:
  TIFFTAG_DOCUMENTNAME=jeffpan2000_10m.tif
  TIFFTAG_SOFTWARE=ImageMagick 5.5.2 12/01/02 Q8
http://www.imagemagick.org Corner Coordinates: Upper Left  ( 644995.948,
5518006.066) Lower Left  (  644995.948, 5498006.066) Upper Right (
664995.948, 5518006.066) Lower Right (  664995.948,
5498006.066)
Center      (  654995.948, 5508006.066)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray


As for 10TM, it is used for Alberta.

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


I will look into the proj4 site as you have suggested.

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 03, 2003 12:57 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi Frank,
> 
> 
>>I believe this is a commandline parsing issue.  The '+proj=latlong
> 
> +datum=WGS84' would be parsed as a single argument by a Unix shell, 
> +but
> the DOS shell doesn't work the same.
> 
> That makes sense.  I added a forth option and used double quotes (I 
> can recall using them in the past within dos to bypass the 
> whitespace).
> 
> Now I get
> ----------------------------------------------------------------------
> --
> --------
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Failed to import coordinate system `'.
> Creating output file is that 2000P x 2000L.
> ERROR 1: Failed to import coordinate system `'. 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> ----------------------------------------------------------------------
> --
> --------
> 
> The output file is created, but it doesn't look like the conversion 
> happens.  The line 'FAILED to import coordinate system' is probably 
> the source of my trouble now (image is in 10TM).
> 
> How can I specify a input coordinate system like 10TM

Matt,

It isn't clear from the message whether the coordinate system that
failed to "import" was the target one you provided on the commandline or
the one on the source file.  What does gdalinfo report on the source
file?

If it has no coordinate system set you could use the -s_srs option to
set the source coordinate system.

  gdalwarp -s_srs "+proj=utm +zone=10 +datum=WGS84" -t_srs
"+proj=latlong +datum=WGS84" jeffpan2000_10m.tif

The coordinate system descriptions are from PROJ.4, so you should review
the
(fragmented) PROJ.4 docs to learn how to do different coordinate
systems. I assume that "10TM" is "UTM Zone 10".  I am not familiar with
"10TM" as a coordinate system name.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From matt at terraEngine.com  Fri Apr  4 17:33:22 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000001c2fa2e$78763e90$d701a8c0@matt>
Message-ID: <000601c2fafa$33b827b0$d701a8c0@matt>

Hi Frank,

I have succeed in reprojecting an image that was in UTM to latlon now.
An error message still appears, however the reprojected image appears to
match up correctly.

C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
002026_0100_000703_l7_08_
utm21.tif memTest.tif
ERROR 1: Can't find requested entry point: pj_strerrno

Creating output file is that 18397P x 11549L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

I still have some questions:

1.  How do I fix the error message, and is it significant?
2.  How can I specify a 10TM (see below for spec)?
3.  What are the memory limits (the image used was 197M)? (you had
mentioned one reason to use gdalwarptest would remove memory
restrictions)


10TM spec
---------
datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 3:15 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


Hi,

I am still digging in the proj4 documentation and my best guess now is:

gdalwarp -s_srs "+proj=tmerc +ellps=GRS80 +x_0=500000 +y_0=0 +lon_0=-115
+m=0.9992 +north" -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif out.t

However, it still gives the same error.  

In the proj4 documentation the command line uses -m 0.9992, but in gdal
all the parameters appear to be preceded by a +. I am also unsure of
+north.

The parameters I am trying to match are:

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 2:43 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


I have skimmed through the proj4 documentation and looks like I should
have something like ...

C:\gdal>gdalwarp -s_srs "+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0
+lat_0=0 -m
 0.9992" -t_srs "+proj=latlong +datum=WGS84" jeffpan2000_10m.tif out.tif
ERROR 1: Can't find requested entry point: pj_strerrno

:0.ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14
ERROR 1: Reprojection failed, err = -14, further errors will be
supressed on the  transform object.
..10...20...30...40...50...60...70...80...90...100 - done.

As you can see it doesn't work yet.

My input source parameters are 
"+proj=tmerc +datum=WGS84 +x_0=500000 +y_0=0 +lat_0=0 -m  0.9992"

But I haven't seen how to specify the central meridian.

Any thoughts?

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Lynch
Sent: Thursday, April 03, 2003 2:09 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Image Reprojection


Hi Frank,

The gdalinfo report of the source file is:

C:\gdal>gdalinfo jeffpan2000_10m.tif
Driver: GTiff/GeoTIFF
Size is 2000, 2000
Coordinate System is `'
Origin = (644995.948217,5518006.066294)
Pixel Size = (10.000000,-10.000000)
Metadata:
  TIFFTAG_DOCUMENTNAME=jeffpan2000_10m.tif
  TIFFTAG_SOFTWARE=ImageMagick 5.5.2 12/01/02 Q8
http://www.imagemagick.org Corner Coordinates: Upper Left  ( 644995.948,
5518006.066) Lower Left  (  644995.948, 5498006.066) Upper Right (
664995.948, 5518006.066) Lower Right (  664995.948,
5498006.066)
Center      (  654995.948, 5508006.066)
Band 1 Block=2000x4 Type=Byte, ColorInterp=Gray


As for 10TM, it is used for Alberta.

datum = Nad27
central meridan = -115
scale factor = 0.9992
lat of origin = 0
false E = 500,000
false N = 0


I will look into the proj4 site as you have suggested.

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 03, 2003 12:57 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi Frank,
> 
> 
>>I believe this is a commandline parsing issue.  The '+proj=latlong
> 
> +datum=WGS84' would be parsed as a single argument by a Unix shell,
> +but
> the DOS shell doesn't work the same.
> 
> That makes sense.  I added a forth option and used double quotes (I
> can recall using them in the past within dos to bypass the 
> whitespace).
> 
> Now I get
> ----------------------------------------------------------------------
> --
> --------
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
jeffpan2000_10m.tif
> out.tif
> 
> ERROR 1: Failed to import coordinate system `'.
> Creating output file is that 2000P x 2000L.
> ERROR 1: Failed to import coordinate system `'.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> ----------------------------------------------------------------------
> --
> --------
> 
> The output file is created, but it doesn't look like the conversion
> happens.  The line 'FAILED to import coordinate system' is probably 
> the source of my trouble now (image is in 10TM).
> 
> How can I specify a input coordinate system like 10TM

Matt,

It isn't clear from the message whether the coordinate system that
failed to "import" was the target one you provided on the commandline or
the one on the source file.  What does gdalinfo report on the source
file?

If it has no coordinate system set you could use the -s_srs option to
set the source coordinate system.

  gdalwarp -s_srs "+proj=utm +zone=10 +datum=WGS84" -t_srs
"+proj=latlong +datum=WGS84" jeffpan2000_10m.tif

The coordinate system descriptions are from PROJ.4, so you should review
the
(fragmented) PROJ.4 docs to learn how to do different coordinate
systems. I assume that "10TM" is "UTM Zone 10".  I am not familiar with
"10TM" as a coordinate system name.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From warmerdam at pobox.com  Sat Apr  5 03:40:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <000601c2fafa$33b827b0$d701a8c0@matt>
References: <000601c2fafa$33b827b0$d701a8c0@matt>
Message-ID: <3E8E9681.9090606@pobox.com>

Matt Lynch wrote:
> Hi Frank,
> 
> I have succeed in reprojecting an image that was in UTM to latlon now.
> An error message still appears, however the reprojected image appears to
> match up correctly.
> 
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84"
> 002026_0100_000703_l7_08_
> utm21.tif memTest.tif
> ERROR 1: Can't find requested entry point: pj_strerrno
> 
> Creating output file is that 18397P x 11549L.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> I still have some questions:
> 
> 1.  How do I fix the error message, and is it significant?

Matt,

The error is not significant.  Upgrading to a very recent PROJ.4
(such as 4.4.6 or 4.4.7) should resolve the message.

> 2.  How can I specify a 10TM (see below for spec)?

I think:

+proj=tmerc +lon_0=-115 +k_0=0.9992 +x_0=500000 +datum=NAD27

(or change +datum=NAD27 to +ellps=clrk66 if you have problems.  Older
PROJ.4 libraries don't support datums).

> 3.  What are the memory limits (the image used was 197M)? (you had
> mentioned one reason to use gdalwarptest would remove memory
> restrictions)

The gdalwarp program will attempt to hold the entire source and
destination image in memory.  The gdalwarptest does the image in
chunks to limit memory use.

> 10TM spec
> ---------
> datum = Nad27
> central meridan = -115
> scale factor = 0.9992
> lat of origin = 0
> false E = 500,000
> false N = 0

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Sat Apr  5 17:47:04 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] CFITS support
Message-ID: <5.2.0.9.0.20030405173800.009e8ec0@pop.preferred.com>

Hi,

    Recently I attempted to convert an Arcinfo/Arcview binary grid file 
(GIO) to FITS
using GDAL_TRANSLATE. The first time, the program crashed. I read the online
documentation and downloaded the most recent version of the CFITS library 
and DLL.
After having placed both in the same directory, I re-tried and the program 
crashed again.
The GIO works well as I converted the same grid to PNG, PNM, and 
GTIFF(using Uint16).
The command-line I used is:

C:\temp\> gdal_translate -ot float32 -of fit carter1\hdr.adf test.fit

My version of
GDAL is from Feb-15-03.

Any ideas on this?

                                                                                      Thanks,
                                                                                    Jim 
Julian


julian@preferred.com




From warmerdam at pobox.com  Mon Apr  7 10:23:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] CFITS support
In-Reply-To: <5.2.0.9.0.20030405173800.009e8ec0@pop.preferred.com>
References: <5.2.0.9.0.20030405173800.009e8ec0@pop.preferred.com>
Message-ID: <3E9189E9.2040404@pobox.com>

Jim Julian wrote:
> 
> Hi,
> 
>    Recently I attempted to convert an Arcinfo/Arcview binary grid file 
> (GIO) to FITS
> using GDAL_TRANSLATE. The first time, the program crashed. I read the 
> online
> documentation and downloaded the most recent version of the CFITS 
> library and DLL.
> After having placed both in the same directory, I re-tried and the 
> program crashed again.
> The GIO works well as I converted the same grid to PNG, PNM, and 
> GTIFF(using Uint16).
> The command-line I used is:
> 
> C:\temp\> gdal_translate -ot float32 -of fit carter1\hdr.adf test.fit

Jim,

I don't use FITS format. The driver was written by Simon Perkins.

However, I have tried converting a grid file into FITS format on my
Linux system and it seemed to complete just fine.

I would note that your commandline is actually converting to FIT format, not
FITS.  FIT is another format (originally from SGI I think).  I would suggest
you try change "-of FIT" to "-of FITS" and see if that helps.  If not, any
tracebacks or details on reproducing the problem might be valuable.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From s.perkins at lanl.gov  Mon Apr  7 10:42:00 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] CFITS support
References: <5.2.0.9.0.20030405173800.009e8ec0@pop.preferred.com>
Message-ID: <3E918E38.3070307@lanl.gov>

I was about to reply but Frank has beaten me to it. If the format you 
want to use is FITS (a standard format used by astronomers) as opposed 
to FIT (an obscure SGI developed format), then use '-of fits'. If that 
still doesn't work, tell me where I can get an example file from and 
I'll see what I can do.

Cheers,

Sy


Jim Julian wrote:

>
> Hi,
>
>    Recently I attempted to convert an Arcinfo/Arcview binary grid file 
> (GIO) to FITS
> using GDAL_TRANSLATE. The first time, the program crashed. I read the 
> online
> documentation and downloaded the most recent version of the CFITS 
> library and DLL.
> After having placed both in the same directory, I re-tried and the 
> program crashed again.
> The GIO works well as I converted the same grid to PNG, PNM, and 
> GTIFF(using Uint16).
> The command-line I used is:
>
> C:\temp\> gdal_translate -ot float32 -of fit carter1\hdr.adf test.fit
>
> My version of
> GDAL is from Feb-15-03.
>
> Any ideas on this?
>
>                                                                                      
> Thanks,
>                                                                                    
> Jim Julian
>
>
> julian@preferred.com
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev




From carl.anderson at vadose.org  Mon Apr  7 11:13:07 2003
From: carl.anderson at vadose.org (Carl Anderson)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] AVC speedup patch
In-Reply-To: <20030405203207.GC6661@vadose.dvg>; from carl.anderson@vadose.org on Sat, Apr 05, 2003 at 15:32:07 -0500
References: <E191u2N-0008Oz-00@maynard.mail.mindspring.net> <20030405203207.GC6661@vadose.dvg>
Message-ID: <20030407151307.GA30418@vadose.dvg>

The included patch speeds up the ogr/orgsf_formats/avc backend format

The curent behavior is to try a file stat() on the upper and lower case
for each letter of the file path of the coverage.  That is a lot of
file stat()s.  In many cases the entire file is either all lower case
(Arc/Info in Solaris) or all upper case.

This patch tries these two common cases before trying all the other
permutations.

It speeds up an AvcReadOpenfile from 98 seconds to 1 second.
(Arc/Info Solaris Workspace with 1500 coverages)


I have backported to the avce00 lib if anyone desires.

cut here
------------------------------------------------------

diff -ur gdal/ogr/ogrsf_frmts/avc/avc_misc.c
gdal_new/ogr/ogrsf_frmts/avc/avc_misc.c
--- gdal/ogr/ogrsf_frmts/avc/avc_misc.c Thu Feb 14 09:37:21 2002
+++ gdal_new/ogr/ogrsf_frmts/avc/avc_misc.c     Sat Apr  5 14:27:51 2003
@@ -261,12 +261,45 @@
           return pszFname;
       }
    +    pszTmpPath = CPLStrdup(pszFname);
+    nTotalLen = strlen(pszTmpPath);
+
+    /*-----------------------------------------------------------------
+     * Try all lower case, check if the filename is OK as that.
+
*----------------------------------------------------------------*/
+    for (iTmpPtr=0; iTmpPtr< nTotalLen; iTmpPtr++)
+    {
+      if ( pszTmpPath[iTmpPtr] >= 0x41 && pszTmpPath[iTmpPtr] <= 0x5a )
+         pszTmpPath[iTmpPtr] += 32;
+    }
+
+    if (VSIStat(pszTmpPath, &sStatBuf) == 0)
+    {
+        strcpy(pszFname, pszTmpPath);
+        CPLFree(pszTmpPath);
+        return pszFname;
+    }
+
+    /*-----------------------------------------------------------------
+     * Try all upper case, check if the filename is OK as that.
+
*----------------------------------------------------------------*/
+    for (iTmpPtr=0; iTmpPtr< nTotalLen; iTmpPtr++)
+    {
+      if ( pszTmpPath[iTmpPtr] >= 0x61 && pszTmpPath[iTmpPtr] <= 0x7a )
+         pszTmpPath[iTmpPtr] -= 32;
+    }
+
+    if (VSIStat(pszTmpPath, &sStatBuf) == 0)
+    {
+        strcpy(pszFname, pszTmpPath);
+        CPLFree(pszTmpPath);
+        return pszFname;
+    }
+

/*-----------------------------------------------------------------
        * OK, file either does not exist or has the wrong cases... we'll
        * go backwards until we find a portion of the path that is 
valid.

*----------------------------------------------------------------*/
-    pszTmpPath = CPLStrdup(pszFname);
-    nTotalLen = strlen(pszTmpPath);
       iTmpPtr = nTotalLen;
       bValidPath = FALSE;

From warmerdam at pobox.com  Mon Apr  7 11:19:07 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] AVC speedup patch
In-Reply-To: <20030407151307.GA30418@vadose.dvg>
References: <E191u2N-0008Oz-00@maynard.mail.mindspring.net> <20030405203207.GC6661@vadose.dvg> <20030407151307.GA30418@vadose.dvg>
Message-ID: <3E9196EB.80007@pobox.com>

Carl Anderson wrote:
> 
> The included patch speeds up the ogr/orgsf_formats/avc backend format
> 
> The curent behavior is to try a file stat() on the upper and lower case
> for each letter of the file path of the coverage.  That is a lot of
> file stat()s.  In many cases the entire file is either all lower case
> (Arc/Info in Solaris) or all upper case.
> 
> This patch tries these two common cases before trying all the other
> permutations.
> 
> It speeds up an AvcReadOpenfile from 98 seconds to 1 second.
> (Arc/Info Solaris Workspace with 1500 coverages)
> 
> 
> I have backported to the avce00 lib if anyone desires.

Carl,

Could you submit this through bugzilla?  I will reassign to Daniel to put in
avce00 library and then updated GDAL from the latest avce00 code.   I hadn't
realized this rather expensive approach was being used!

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Mon Apr  7 12:00:44 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GDAL_translate and FIT(S) crash
Message-ID: <5.2.0.9.0.20030407113405.009e4410@pop.preferred.com>

Hi Frank, Simon,

Frank,
    The file type confusion arises from the programs. The GDAL_Translate 
DOS window output, with
no arguments supplied, lists the format as FIT as does OpenEV's Export box. 
The HTML documentation
does list the format as FITS and the extension as .fits. Confusion is 
understandable.
    And speaking of OpenEV, I downloaded the Jan-07-03 release as a check 
when I discovered the
GDAL_Translate error and got the same results.
Simon
    Thinking there may be something wrong with my gridfile, I converted a 
typical JPEG to TIFF and
attempted a conversion of that file. Same results. OpenEV as well. The jpeg 
was a simple photo image
about 300Kb in size, so the nature of the file is not relevant as far as I 
can tell.
    Since I used ,both, my compiled version of gdal and the JAN release of 
OpenEV, my compilation
is not a likely problem.
    Since the problem has to come from somewhere I am open to possibilities 
and suggestions.
Also, in passing, I will mention the nature of the crash.The crash type is 
a "page fault".
    Could the operating system be the source of the problem (Windows 98 SE)?

                                                                              Thanks,
                                                                            Jim 
Julian

julian@preferred.com



From warmerdam at pobox.com  Mon Apr  7 12:16:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GDAL_translate and FIT(S) crash
In-Reply-To: <5.2.0.9.0.20030407113405.009e4410@pop.preferred.com>
References: <5.2.0.9.0.20030407113405.009e4410@pop.preferred.com>
Message-ID: <3E91A45B.6000603@pobox.com>

Jim Julian wrote:
> 
> Hi Frank, Simon,
> 
> Frank,
>    The file type confusion arises from the programs. The GDAL_Translate 
> DOS window output, with
> no arguments supplied, lists the format as FIT as does OpenEV's Export 
> box. The HTML documentation
> does list the format as FITS and the extension as .fits. Confusion is 
> understandable.

Jim,

If you don't see a driver called "FITS" in the list of formats then it
is likely you have not successfully built in support for it.  The FIT
driver is always present, but I suspect is not documented in the supported
formats list.

>    And speaking of OpenEV, I downloaded the Jan-07-03 release as a check 
> when I discovered the
> GDAL_Translate error and got the same results.
> Simon
>    Thinking there may be something wrong with my gridfile, I converted a 
> typical JPEG to TIFF and
> attempted a conversion of that file. Same results. OpenEV as well. The 
> jpeg was a simple photo image
> about 300Kb in size, so the nature of the file is not relevant as far as 
> I can tell.
>    Since I used ,both, my compiled version of gdal and the JAN release 
> of OpenEV, my compilation
> is not a likely problem.
>    Since the problem has to come from somewhere I am open to 
> possibilities and suggestions.
> Also, in passing, I will mention the nature of the crash.The crash type 
> is a "page fault".
>    Could the operating system be the source of the problem (Windows 98 SE)?

It is possible though I would not think probable.  I think you will need
to file a bug with the the details including the pointer to the binary
release you are using, and the data file that demonstrates the problem.  I
don't think I have a Win98 system anymore, so if I can't reproduce the
problem on XP the issue will likely languish.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From matt at terraEngine.com  Mon Apr  7 12:32:12 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Image Reprojection
In-Reply-To: <3E8E9681.9090606@pobox.com>
Message-ID: <000001c2fd23$3df3dd70$d701a8c0@matt>

Hi Frank,

That did the trick!  Over the next few days I will work on a usage
tutorial for gdalwarp and submit.  That way you don't have to answer the
same questions repetively.

Thanks again,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Saturday, April 05, 2003 1:41 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Image Reprojection


Matt Lynch wrote:
> Hi Frank,
> 
> I have succeed in reprojecting an image that was in UTM to latlon now.

> An error message still appears, however the reprojected image appears 
> to match up correctly.
> 
> C:\gdal>gdalwarp -t_srs "+proj=latlong +datum=WGS84" 
> 002026_0100_000703_l7_08_ utm21.tif memTest.tif
> ERROR 1: Can't find requested entry point: pj_strerrno
> 
> Creating output file is that 18397P x 11549L. 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> I still have some questions:
> 
> 1.  How do I fix the error message, and is it significant?

Matt,

The error is not significant.  Upgrading to a very recent PROJ.4 (such
as 4.4.6 or 4.4.7) should resolve the message.

> 2.  How can I specify a 10TM (see below for spec)?

I think:

+proj=tmerc +lon_0=-115 +k_0=0.9992 +x_0=500000 +datum=NAD27

(or change +datum=NAD27 to +ellps=clrk66 if you have problems.  Older
PROJ.4 libraries don't support datums).

> 3.  What are the memory limits (the image used was 197M)? (you had 
> mentioned one reason to use gdalwarptest would remove memory
> restrictions)

The gdalwarp program will attempt to hold the entire source and
destination image in memory.  The gdalwarptest does the image in chunks
to limit memory use.

> 10TM spec
> ---------
> datum = Nad27
> central meridan = -115
> scale factor = 0.9992
> lat of origin = 0
> false E = 500,000
> false N = 0

Good luck,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From s.perkins at lanl.gov  Mon Apr  7 12:38:44 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GDAL_translate and FIT(S) crash
In-Reply-To: <3E91A45B.6000603@pobox.com>
References: <5.2.0.9.0.20030407113405.009e4410@pop.preferred.com>
	 <3E91A45B.6000603@pobox.com>
Message-ID: <1049733524.22786.8.camel@afreet.lanl.gov>

On Mon, 2003-04-07 at 10:16, Frank Warmerdam wrote:
> > Frank,
> >    The file type confusion arises from the programs. The GDAL_Translate 
> > DOS window output, with
> > no arguments supplied, lists the format as FIT as does OpenEV's Export 
> > box. The HTML documentation
> > does list the format as FITS and the extension as .fits. Confusion is 
> > understandable.

Jim,

Just to clarify, there are two different but similarly named formats
supported by GDAL: FITS and FIT. FIT is always supported, FITS support
is optional and depends upon you having the cfitsio library installed.
When I type gdal_translate, I see the following:

...

GDAL 1.1.8.0, released 2002/12/21

The following format drivers are configured and support output:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  ELAS: ELAS
  AAIGrid: Arc/Info ASCII Grid
  DTED: DTED Elevation Raster
  PNG: Portable Network Graphics
  JPEG: JPEG JFIF
  MEM: In Memory Raster
  GIF: Graphics Interchange Format (.gif)
  FITS: Flexible Image Transport System
  BSB: Maptech BSB Nautical Charts
  XPM: X11 PixMap Format
  BMP: MS Windows Device Independent Bitmap
  PNM: Portable Pixmap Format (netpbm)
  ENVI: ENVI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Atlantis MFF Raster
  MFF2: Atlantis MFF2 (HKV) Raster
  FIT: FIT Image

i.e. both FIT and FITS are supported. Is this what you see? And which
format are you after? The astronomical one (FITS) or the SGI one (FIT)?

Cheers,

Sy



From julian at preferred.com  Mon Apr  7 12:49:29 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] CFITS support
Message-ID: <5.2.0.9.0.20030407123554.00a0db80@pop.preferred.com>

Frank,

    I checked the GDAL_Translate 'DOS/no arguments' output from the JAN-03 
OpenEV and
there is no FITS format mentioned in the list. The same is true of the 
version I compiled Feb-15.
    Since both programs I am using crash with a simple photo image, I 
probably need to compile
FITS support into the GDAL library.
    For my own clarification, simply dumping the CFITS DLL/lib files into 
the same directory as
GDAL_Translate is or is not sufficient to enable FITS support? If I need to 
include FITS support
during compilation then that would explain the problem.
    Since the format is not of great importance in my work anyway, this 
will be the last I mention of it.

Thanks,
Jim Julian


From julian at preferred.com  Mon Apr  7 12:55:11 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] GDAL_translate and FIT(S) crash
In-Reply-To: <1049733524.22786.8.camel@afreet.lanl.gov>
References: <3E91A45B.6000603@pobox.com>
 <5.2.0.9.0.20030407113405.009e4410@pop.preferred.com>
 <3E91A45B.6000603@pobox.com>
Message-ID: <5.2.0.9.0.20030407125311.00a09d90@pop.preferred.com>

At 10:38 AM 4/7/03 -0600, you wrote:
>On Mon, 2003-04-07 at 10:16, Frank Warmerdam wrote:
> > > Frank,
> > >    The file type confusion arises from the programs. The GDAL_Translate
> > > DOS window output, with
> > > no arguments supplied, lists the format as FIT as does OpenEV's Export
> > > box. The HTML documentation
> > > does list the format as FITS and the extension as .fits. Confusion is
> > > understandable.
>
>Jim,
>
>Just to clarify, there are two different but similarly named formats
>supported by GDAL: FITS and FIT. FIT is always supported, FITS support
>is optional and depends upon you having the cfitsio library installed.
>When I type gdal_translate, I see the following:
>
>...
>
>GDAL 1.1.8.0, released 2002/12/21
>
>The following format drivers are configured and support output:
>
>   FITS: Flexible Image Transport System
>
>i.e. both FIT and FITS are supported. Is this what you see? And which
>format are you after? The astronomical one (FITS) or the SGI one (FIT)?
>
>Cheers,
>
>Sy

Thanks Simon, that clears everything up. I just need to include the library 
the next time I compile.

                                                                    Thanks 
again,
                                                                       Jim 
Julian


From s.perkins at lanl.gov  Mon Apr  7 13:09:31 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] CFITS support
In-Reply-To: <5.2.0.9.0.20030407123554.00a0db80@pop.preferred.com>
References: <5.2.0.9.0.20030407123554.00a0db80@pop.preferred.com>
Message-ID: <1049735370.22786.19.camel@afreet.lanl.gov>

On Mon, 2003-04-07 at 10:49, Jim Julian wrote:
>     For my own clarification, simply dumping the CFITS DLL/lib files into 
> the same directory as
> GDAL_Translate is or is not sufficient to enable FITS support? If I need to 
> include FITS support
> during compilation then that would explain the problem.

Yep,

I haven't actually compiled FITS support on windows before (I use linux
mostly), but yes, support needs to be compiled in.

Actually now I look at things, it's not obvious how to get FITS support
in windows - it doesn't seem to be referenced in the VC makefiles and
there's no makefile.vc in the frmts/fits directory.

If support for including FITS on windows is not already there. we'll
probably be adding it at some point. Alternatively I think you can
compile under cygwin using GNU make and gcc.

Cheers,

Sy



From warmerdam at pobox.com  Tue Apr  8 17:20:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Re: OGR Questions
In-Reply-To: <20030408154949.2032.qmail@web14002.mail.yahoo.com>
References: <20030408154949.2032.qmail@web14002.mail.yahoo.com>
Message-ID: <3E933D34.6080401@pobox.com>

Peter Lenson wrote:
> Hi Frank,
> 
> As usually we need this ASAP. 
> 
> To clarify what we want to do is readin the
> shapefile into memory, have the ability to add
> fields to this memory representation. Make use
> of this memory representation for drawing.
> And finally save this memory representation
> to disk.

Peter,

I have committed a bunch of changes implementing a new "Memory" type
OGR driver that supports adding fields when the layer already has features.
I also implemented an "easy copy" API for copying layers.

Included below is a simple C++ example utilizing the new capabilities.  I
have taken the liberty of cc:ing the gdal-dev list.  You might want to
introduce your project to the list at some point.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

#include <assert.h>
#include "ogrsf_frmts.h"

int main( int nArgc, char **papszArgv )

{
     OGRDataSource *poSrcDS, *poMemDS, *poDstDS;
     OGRSFDriver *poDriver;

/* -------------------------------------------------------------------- */
/*      Open the source file.                                           */
/* -------------------------------------------------------------------- */
     OGRRegisterAll();

     poSrcDS =
         OGRSFDriverRegistrar::GetRegistrar()->Open( "polygon.shp" );
     assert( poSrcDS != NULL );

/* -------------------------------------------------------------------- */
/*      Copy this to a datasource using the "Memory" driver ... all     */
/*      in memory.                                                      */
/* -------------------------------------------------------------------- */
     poDriver =
         OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( "Memory" );

     assert( poDriver != NULL );

     poMemDS = poDriver->CopyDataSource( poSrcDS, "polygon.shp", NULL );

     delete poSrcDS;

/* -------------------------------------------------------------------- */
/*      Add a new field to the first layer in the datasource.           */
/* -------------------------------------------------------------------- */
     OGRFieldDefn oNewField( "StyleInfo", OFTString );
     oNewField.SetWidth( 64 );

     poMemDS->GetLayer( 0 )->CreateField( &oNewField );

     /* we could do lots of stuff with our in-memory data here */

/* -------------------------------------------------------------------- */
/*      Save back to disk in a new file.                                */
/* -------------------------------------------------------------------- */
     poDriver =
         OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( "ESRI Shapefile" );

     assert( poDriver != NULL );

     poDstDS = poDriver->CopyDataSource( poMemDS, "polynew.shp", NULL );

     delete poMemDS;

     delete poDstDS;

     delete OGRSFDriverRegistrar::GetRegistrar();

}


From warmerdam at pobox.com  Wed Apr  9 10:45:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Re: [Mapserver-users] offtopic ADRG to TIFF
In-Reply-To: <721e01c2fea2$319c2930$72cb010a@mail2world.com>
References: <721e01c2fea2$319c2930$72cb010a@mail2world.com>
Message-ID: <3E9431FE.6090303@pobox.com>

Jorge Alberto Arocha Mu?oz wrote:
> Hi,
> 
> I need any software for convert images in ADRG format to format TIFF o 
> GeoTIFF.

Jorge,

The GDAL library can support ADRG if built with OGDI support.  If you download
the OpenEV_FW 1.5.4 release for Linux or windows from:

   ftp://ftp.remotesensing.org/gdal/openev/

you should be able to use GDAL to do something like:

   gdal_translate gltp:/adrg/usr4/mpp1/adrg/TPUS0101 out.tif

Note that the "gltp:/adrg" portion tells GDAL to use the OGDI gateway,
and for the OGDI gateway to use the adrg driver.  The rest is a real
path to the dataset.

However, most (all?) ADRG files appear to GDAL as subdatasets so you should
do something like:

warmerda@gdal[108]% gdalinfo gltp:/adrg/usr4/mpp1/adrg/TPUS0101
Driver: OGDI/OGDI Bridge
Size is 1000, 1000
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["unknown",
         SPHEROID["WGS84",6378137,298.257223563]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433]]
Origin = (-88.000183,36.000089)
Pixel Size = (0.007001,-0.004000)
Subdatasets:
   SUBDATASET_1_NAME=gltp:/adrg/usr4/mpp1/adrg/TPUS0101:"TPUS0101.IMG":Matrix
   SUBDATASET_1_DESC=TPUS0101.IMG as Matrix
   SUBDATASET_2_NAME=gltp:/adrg/usr4/mpp1/adrg/TPUS0101:"TPUS0102.IMG":Matrix
   SUBDATASET_2_DESC=TPUS0102.IMG as Matrix
   SUBDATASET_3_NAME=gltp:/adrg/usr4/mpp1/adrg/TPUS0101:"TPUS0101.IMG":Image
   SUBDATASET_3_DESC=TPUS0101.IMG as Image
   SUBDATASET_4_NAME=gltp:/adrg/usr4/mpp1/adrg/TPUS0101:"TPUS0102.IMG":Image
   SUBDATASET_4_DESC=TPUS0102.IMG as Image
Corner Coordinates:
Upper Left  ( -88.0001833,  36.0000889) ( 88d 0'0.66"W, 36d 0'0.32"N)
Lower Left  ( -88.0001833,  31.9998278) ( 88d 0'0.66"W, 31d59'59.38"N)
Upper Right ( -80.9996083,  36.0000889) ( 80d59'58.59"W, 36d 0'0.32"N)
Lower Right ( -80.9996083,  31.9998278) ( 80d59'58.59"W, 31d59'59.38"N)
Center      ( -84.4998958,  33.9999583) ( 84d29'59.63"W, 33d59'59.85"N)
Band 1 Block=1000x1 Type=Byte, ColorInterp=Red
   Overviews: arbitrary
Band 2 Block=1000x1 Type=Byte, ColorInterp=Green
   Overviews: arbitrary
Band 3 Block=1000x1 Type=Byte, ColorInterp=Blue
   Overviews: arbitrary
Band 4 Block=1000x1 Type=Byte, ColorInterp=Alpha
   Overviews: arbitrary
Band 5 Block=1000x1 Type=Byte, ColorInterp=Red
   Overviews: arbitrary
Band 6 Block=1000x1 Type=Byte, ColorInterp=Green
   Overviews: arbitrary
Band 7 Block=1000x1 Type=Byte, ColorInterp=Blue
   Overviews: arbitrary
Band 8 Block=1000x1 Type=Byte, ColorInterp=Alpha
   Overviews: arbitrary
warmerda@gdal[109]%  gdal_translate gltp:/adrg/usr4/mpp1/adrg/TPUS0101:"TPUS0102.IMG":Matrix tpus0102.tif
Input file size is 11904, 8960
0...10...20...30...40...50...60...70...80...90...100 - done.

The key here is picking out the appropriate SUBDATASET_n_NAME's from the
metadata for the overall dataset.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Martin.Daly at cadcorp.com  Thu Apr 10 08:35:22 2003
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] .cvsignore
Message-ID: <37936EEC582B394A9E1AA951991A551608577B@dev001_pdc.Dev.cadcorp.net>

Frank et al,

As mentioned on the GDAL home page, we, Cadcorp, are working on Plug-ins
for our GIS, Cadcorp SIS using GDAL.

We use Visual SourceSafe rather than CVS for our version control;
primarily for the integration into the Visual Studio IDE.  Also, for our
own purposes, we are keeping a entire copy of GDAL in VSS.  We need this
so that we have reliable, consistent and easy ways to recreate and tag
our entire source tree at significant events like public releases.  We
need to know what our version of the GDAL code was like when we made a
release on a given day, not what the CVS version was.  We are only doing
infrequent GDAL updates, so the overhead in VSS is not too bad.

When a folder is managed by VSS, a file called vssver.scc is added by
VSS to the local holding.  Having this file gives me a lot of '?'
entries, one per folder, when I do a cvs update, making it hard to spot
any other inconsistencies or problems.

So, what I am wondering, is whether it would be possible to add
vssver.scc to .cvsignore in every folder.  Frank has kindly given me
write access to CVS, but, being a dumbo user, and not wanting to mess up
- or "do a Daniel" as I understand it is known - I'd be a bit wary of
diving in, even though the consequences of making a mistake would seem
to be small.  The benefit would be that if and when I actually need to
make edits, there should be less chance of "doing a Daniel."

So, are there strong objections to a) doing this, or b) me doing this?

Regards,
Martin Daly,
Technical Director,
Cadcorp Ltd
e: mailto:martin.daly@cadcorp.com
w: http://www.cadcorp.com
t: +44 (0) 20 7383 0014
f: +44 (0) 20 7388 6313

From tbeckman at usgs.gov  Thu Apr 10 08:51:53 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] .cvsignore
Message-ID: <OFA0A16A5C.B4F8C153-ON86256D04.00466BEA-86256D04.0046ABDC@cr.usgs.gov>

Martin,

CVS can be told to ignore files in a couple of different ways.  I suggest 
you review http://www.gnu.org/manual/cvs/html_mono/cvs.html#SEC148 and pay 
special attention to the bullets:
        - The per-user list in `.cvsignore' in your home directory is 
appended to the list, if it exists. 
        - Any entries in the environment variable $CVSIGNORE is appended 
to the list. 

Tim
--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax





"Martin Daly" <Martin.Daly@cadcorp.com>
Sent by: gdal-dev-admin@remotesensing.org
04/10/2003 07:35 AM
Please respond to gdal-dev

 
        To:     <gdal-dev@remotesensing.org>
        cc: 
        Subject:        [Gdal-dev] .cvsignore


Frank et al,

As mentioned on the GDAL home page, we, Cadcorp, are working on Plug-ins
for our GIS, Cadcorp SIS using GDAL.

We use Visual SourceSafe rather than CVS for our version control;
primarily for the integration into the Visual Studio IDE.  Also, for our
own purposes, we are keeping a entire copy of GDAL in VSS.  We need this
so that we have reliable, consistent and easy ways to recreate and tag
our entire source tree at significant events like public releases.  We
need to know what our version of the GDAL code was like when we made a
release on a given day, not what the CVS version was.  We are only doing
infrequent GDAL updates, so the overhead in VSS is not too bad.

When a folder is managed by VSS, a file called vssver.scc is added by
VSS to the local holding.  Having this file gives me a lot of '?'
entries, one per folder, when I do a cvs update, making it hard to spot
any other inconsistencies or problems.

So, what I am wondering, is whether it would be possible to add
vssver.scc to .cvsignore in every folder.  Frank has kindly given me
write access to CVS, but, being a dumbo user, and not wanting to mess up
- or "do a Daniel" as I understand it is known - I'd be a bit wary of
diving in, even though the consequences of making a mistake would seem
to be small.  The benefit would be that if and when I actually need to
make edits, there should be less chance of "doing a Daniel."

So, are there strong objections to a) doing this, or b) me doing this?

Regards,
Martin Daly,
Technical Director,
Cadcorp Ltd
e: mailto:martin.daly@cadcorp.com
w: http://www.cadcorp.com
t: +44 (0) 20 7383 0014
f: +44 (0) 20 7388 6313
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From morissette at dmsolutions.ca  Thu Apr 10 09:00:49 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] .cvsignore
References: <37936EEC582B394A9E1AA951991A551608577B@dev001_pdc.Dev.cadcorp.net>
Message-ID: <3E956B01.1293A55D@dmsolutions.ca>

Martin Daly wrote:
> 
> So, what I am wondering, is whether it would be possible to add
> vssver.scc to .cvsignore in every folder.  Frank has kindly given me
> write access to CVS, but, being a dumbo user, and not wanting to mess up
> - or "do a Daniel" as I understand it is known - I'd be a bit wary of
> diving in, even though the consequences of making a mistake would seem
> to be small.  The benefit would be that if and when I actually need to
> make edits, there should be less chance of "doing a Daniel."
> 
> So, are there strong objections to a) doing this, or b) me doing this?
> 


I think you should do it since the potential for side-effects is close
to none.  And we never know, if I'm lucky enough then perhaps in the
future "doing a Daniel" will become "doing a Daly".  ;)

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From Martin.Daly at cadcorp.com  Thu Apr 10 11:38:00 2003
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] .cvsignore
Message-ID: <37936EEC582B394A9E1AA951991A5516068A74@dev001_pdc.Dev.cadcorp.net>

Tim,

> CVS can be told to ignore files in a couple of different ways.  I
suggest 
> you review http://www.gnu.org/manual/cvs/html_mono/cvs.html#SEC148 and
pay 
> special attention to the bullets:
>         - The per-user list in `.cvsignore' in your home directory is 
> appended to the list, if it exists. 
>         - Any entries in the environment variable $CVSIGNORE is
appended 
> to the list. 
> 
> Tim

That was exactly the magic that I needed.  "Doing a Daniel" lives on.

Thanks,
Martin

From k.chodak at autoguard.pl  Fri Apr 11 05:58:29 2003
From: k.chodak at autoguard.pl (Krzysztof Chodak)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] SQL
Message-ID: <003801c30010$e7588240$29bdcdc3@kodak>

Would anyone be so kind and tell me what is wrong with such query:
ogr2ogr Dolno?l?skie miasta_granice -where "Wojewodztw like %Dolno%"
It reports: ERROR 1: Syntax error, 2 extra tokens

Are "where" clauses supported for ESRI shapefiles?

Pozdrawiam,

Krzysztof Chodak
AutoGuard & Insurance
+48502477794; +48226116899
O2:krzcho; GG:9521; ICQ:3317682


From warmerdam at pobox.com  Fri Apr 11 09:00:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] SQL
In-Reply-To: <003801c30010$e7588240$29bdcdc3@kodak>
References: <003801c30010$e7588240$29bdcdc3@kodak>
Message-ID: <3E96BC52.10905@pobox.com>

Krzysztof Chodak wrote:
> Would anyone be so kind and tell me what is wrong with such query:
> ogr2ogr Dolno?l?skie miasta_granice -where "Wojewodztw like %Dolno%"
> It reports: ERROR 1: Syntax error, 2 extra tokens
> 
> Are "where" clauses supported for ESRI shapefiles?

Hi,

The string you are comparing to needs to be quoted.  Try using:

   ogr2ogr Dolno?l?skie miasta_granice -where 'Wojewodztw like "%Dolno%"'

If you are doing this on windows the escaping rules may vary.

PS. I tried a similar where clause in Oracle and found I needed to quote
the string token used in the LIKE test as well.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From mdtanxp at myrealbox.com  Fri Apr 11 17:47:04 2003
From: mdtanxp at myrealbox.com (Michael Tan)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
Message-ID: <LNBBLAMLPMKPGFDLEJIAMEJGIFAA.mdtanxp@myrealbox.com>

Hi-

I am trying to reproject a UTM GeoTIFF to an LatLon GeoTIFF. gdalwarp
seems to do it, but does not seem to produce a correct header (which I
need to determine the lat-lon coords for the corners).

Here's my output:

> gdalwarp --version
GDAL 1.1.8.0, released 2002/12/21

> gdalwarp -t_srs "+proj=latlong +datum=WGS84" p174r38_5t870814_nn2.tif
ll2.tif
Creating output file is that 8659P x 7325L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

> gdalinfo ll2.tif

Driver: GTiff/GeoTIFF
Size is 8659, 7325
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 7325.0)
Upper Right ( 8659.0,    0.0)
Lower Right ( 8659.0, 7325.0)
Center      ( 4329.5, 3662.5)
Band 1 Block=8659x1 Type=Byte, ColorInterp=Gray

>

Am I doing something wrong?

Thanks.
Michael



From warmerdam at pobox.com  Fri Apr 11 18:03:49 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
In-Reply-To: <LNBBLAMLPMKPGFDLEJIAMEJGIFAA.mdtanxp@myrealbox.com>
References: <LNBBLAMLPMKPGFDLEJIAMEJGIFAA.mdtanxp@myrealbox.com>
Message-ID: <3E973BC5.9060205@pobox.com>

Michael Tan wrote:
> Hi-
> 
> I am trying to reproject a UTM GeoTIFF to an LatLon GeoTIFF. gdalwarp
> seems to do it, but does not seem to produce a correct header (which I
> need to determine the lat-lon coords for the corners).

Michael,

I am not sure what is going wrong.  This _can_ work since I just tried it
without a problem:


warmerda@gdal2200[18]% gdalwarp -t_srs "+proj=latlong +datum=WGS84" openev/utm.tif out.tif
Creating output file is that 558P x 466L.
:0...10...20...30...40...50...60...70...80...90...100 - done.
warmerda@gdal2200[19]% gdalinfo out.tif
Driver: GTiff/GeoTIFF
Size is 558, 466
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.642054,33.903651)
Pixel Size = (0.000597,-0.000597)
Corner Coordinates:
Upper Left  (-117.6420540,  33.9036511) (117d38'31.39"W, 33d54'13.14"N)
Lower Left  (-117.6420540,  33.6252533) (117d38'31.39"W, 33d37'30.91"N)
Upper Right (-117.3086936,  33.9036511) (117d18'31.30"W, 33d54'13.14"N)
Lower Right (-117.3086936,  33.6252533) (117d18'31.30"W, 33d37'30.91"N)
Center      (-117.4753738,  33.7644522) (117d28'31.35"W, 33d45'52.03"N)
Band 1 Block=558x14 Type=Byte, ColorInterp=Gray
warmerda@gdal2200[20]%

What version of GDAL are you using?  What did the coordinate system info on
the source file look like?  The gdalinfo report on the source should
be sufficient.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From mdtanxp at myrealbox.com  Fri Apr 11 18:11:59 2003
From: mdtanxp at myrealbox.com (Michael Tan)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
In-Reply-To: <3E973BC5.9060205@pobox.com>
Message-ID: <LNBBLAMLPMKPGFDLEJIAOEJHIFAA.mdtanxp@myrealbox.com>

Hello Frank-

The files are from OpenEV_FW_154.zip

Here's the info you requested:
> proj
Rel. 4.4.5, 9 January 2002
usage: bin\proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

> gdalinfo p174r38_5t870814_nn2.tif
Driver: GTiff/GeoTIFF
Size is 7857, 7777
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    AUTHORITY["EPSG","32636"],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",33],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (621670.500000,3625029.000000)
Pixel Size = (28.500000,-28.500000)
Corner Coordinates:
Upper Left  (  621670.500, 3625029.000) ( 34d17'55.89"E, 32d45'23.07"N)
Lower Left  (  621670.500, 3403384.500) ( 34d16'16.43"E, 30d45'25.92"N)
Upper Right (  845595.000, 3625029.000) ( 36d41'11.06"E, 32d42'32.04"N)
Lower Right (  845595.000, 3403384.500) ( 36d36'29.44"E, 30d42'47.65"N)
Center      (  733632.750, 3514206.750) ( 35d27'58.26"E, 31d44'22.16"N)
Band 1 Block=7857x1 Type=Byte, ColorInterp=Gray

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: Friday, April 11, 2003 6:04 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp: bad output header?


Michael Tan wrote:
> Hi-
>
> I am trying to reproject a UTM GeoTIFF to an LatLon GeoTIFF. gdalwarp
> seems to do it, but does not seem to produce a correct header (which I
> need to determine the lat-lon coords for the corners).

Michael,

I am not sure what is going wrong.  This _can_ work since I just tried it
without a problem:


warmerda@gdal2200[18]% gdalwarp -t_srs "+proj=latlong +datum=WGS84"
openev/utm.tif out.tif
Creating output file is that 558P x 466L.
:0...10...20...30...40...50...60...70...80...90...100 - done.
warmerda@gdal2200[19]% gdalinfo out.tif
Driver: GTiff/GeoTIFF
Size is 558, 466
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.642054,33.903651)
Pixel Size = (0.000597,-0.000597)
Corner Coordinates:
Upper Left  (-117.6420540,  33.9036511) (117d38'31.39"W, 33d54'13.14"N)
Lower Left  (-117.6420540,  33.6252533) (117d38'31.39"W, 33d37'30.91"N)
Upper Right (-117.3086936,  33.9036511) (117d18'31.30"W, 33d54'13.14"N)
Lower Right (-117.3086936,  33.6252533) (117d18'31.30"W, 33d37'30.91"N)
Center      (-117.4753738,  33.7644522) (117d28'31.35"W, 33d45'52.03"N)
Band 1 Block=558x14 Type=Byte, ColorInterp=Gray
warmerda@gdal2200[20]%

What version of GDAL are you using?  What did the coordinate system info
on
the source file look like?  The gdalinfo report on the source should
be sufficient.

Best regards,

--
---------------------------------------+---------------------------------
-----
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From mdtanxp at myrealbox.com  Fri Apr 11 18:21:32 2003
From: mdtanxp at myrealbox.com (Michael Tan)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
In-Reply-To: <3E973BC5.9060205@pobox.com>
Message-ID: <LNBBLAMLPMKPGFDLEJIAEEJIIFAA.mdtanxp@myrealbox.com>

Frank, the file is freely available here:

ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p174/r038/p174r38_5t87081
4.TM-EarthSat-Orthorectified/

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: Friday, April 11, 2003 6:04 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp: bad output header?


Michael Tan wrote:
> Hi-
>
> I am trying to reproject a UTM GeoTIFF to an LatLon GeoTIFF. gdalwarp
> seems to do it, but does not seem to produce a correct header (which I
> need to determine the lat-lon coords for the corners).

Michael,

I am not sure what is going wrong.  This _can_ work since I just tried it
without a problem:


warmerda@gdal2200[18]% gdalwarp -t_srs "+proj=latlong +datum=WGS84"
openev/utm.tif out.tif
Creating output file is that 558P x 466L.
:0...10...20...30...40...50...60...70...80...90...100 - done.
warmerda@gdal2200[19]% gdalinfo out.tif
Driver: GTiff/GeoTIFF
Size is 558, 466
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.642054,33.903651)
Pixel Size = (0.000597,-0.000597)
Corner Coordinates:
Upper Left  (-117.6420540,  33.9036511) (117d38'31.39"W, 33d54'13.14"N)
Lower Left  (-117.6420540,  33.6252533) (117d38'31.39"W, 33d37'30.91"N)
Upper Right (-117.3086936,  33.9036511) (117d18'31.30"W, 33d54'13.14"N)
Lower Right (-117.3086936,  33.6252533) (117d18'31.30"W, 33d37'30.91"N)
Center      (-117.4753738,  33.7644522) (117d28'31.35"W, 33d45'52.03"N)
Band 1 Block=558x14 Type=Byte, ColorInterp=Gray
warmerda@gdal2200[20]%

What version of GDAL are you using?  What did the coordinate system info
on
the source file look like?  The gdalinfo report on the source should
be sufficient.

Best regards,

--
---------------------------------------+---------------------------------
-----
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Sat Apr 12 21:53:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
References: <LNBBLAMLPMKPGFDLEJIAOEJHIFAA.mdtanxp@myrealbox.com>
Message-ID: <3E98C321.8090607@pobox.com>

Michael Tan wrote:
> Hello Frank-
> 
> The files are from OpenEV_FW_154.zip

Michael,

OK, I am pretty sure this is related to a specific bug in the GeoTIFF
driver from around that time.  It is fixed in CVS now.  If you can easily
build from source, then grab the current source from CVS and rebuild.
Otherwise I will try to crank out a 1.5.5 release of the utilities in the
near future.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From k.chodak at autoguard.pl  Mon Apr 14 12:31:49 2003
From: k.chodak at autoguard.pl (Krzysztof Chodak)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] ogr2ogr
References: <003801c30010$e7588240$29bdcdc3@kodak> <3E96BC52.10905@pobox.com>
Message-ID: <000a01c302a3$5a5fd2e0$29bdcdc3@kodak>

Hello again,

have you encountered such issue:
I have mapinfo tab file with 50 objects (everyone of that 50 is listed by
ogrinfo).
After using ogr2ogr target shapefile reports only 44 objects.
Have you got any idea what has happened with that missing 6?

Best regards,

Krzysztof Chodak


From morissette at dmsolutions.ca  Mon Apr 14 12:57:25 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] ogr2ogr
References: <003801c30010$e7588240$29bdcdc3@kodak> <3E96BC52.10905@pobox.com> <000a01c302a3$5a5fd2e0$29bdcdc3@kodak>
Message-ID: <3E9AE875.9035F250@dmsolutions.ca>

Krzysztof Chodak wrote:
> 
> have you encountered such issue:
> I have mapinfo tab file with 50 objects (everyone of that 50 is listed by
> ogrinfo).
> After using ogr2ogr target shapefile reports only 44 objects.
> Have you got any idea what has happened with that missing 6?
> 

Is it possible that you'd have some objects with NONE geometry in your
dataset?  Since shapefile objects cannot have NONE geometry then these
objects may end up being dropped.  Another possibility would be that
your TAB file contains a mix of geometry types (e.g. points and lines),
and since shapefiles support only one geometry type per file then the
objects whose geometry doesn't match the geometry type of the created
shapefile may be dropped.  However you should receive a warning when
that happens.

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From k.chodak at autoguard.pl  Mon Apr 14 14:51:23 2003
From: k.chodak at autoguard.pl (Krzysztof Chodak)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <3E9AE875.9035F250@dmsolutions.ca>
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAAFdPnwfXKHUWR3O5aC/3u8MKAAAAQAAAA5EsaHaxwhkK3ZUUc858LQwEAAAAA@autoguard.pl>

All is strange because all features are reported (by ogrinfo) as
MULTIPOLYGONS and POLYGONS.
And I got no warnings in conversion process...
Probably I would need to debug source code to find out what it is.

BR
 
Krzysztof Chodak

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Daniel Morissette
Sent: Monday, April 14, 2003 6:57 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] ogr2ogr


Krzysztof Chodak wrote:
> 
> have you encountered such issue:
> I have mapinfo tab file with 50 objects (everyone of that 50 is listed by
> ogrinfo).
> After using ogr2ogr target shapefile reports only 44 objects.
> Have you got any idea what has happened with that missing 6?
> 

Is it possible that you'd have some objects with NONE geometry in your
dataset?  Since shapefile objects cannot have NONE geometry then these
objects may end up being dropped.  Another possibility would be that
your TAB file contains a mix of geometry types (e.g. points and lines),
and since shapefiles support only one geometry type per file then the
objects whose geometry doesn't match the geometry type of the created
shapefile may be dropped.  However you should receive a warning when
that happens.

-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From mdtanxp at myrealbox.com  Mon Apr 14 14:55:49 2003
From: mdtanxp at myrealbox.com (Michael Tan)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
In-Reply-To: <3E98C321.8090607@pobox.com>
Message-ID: <LNBBLAMLPMKPGFDLEJIAMELDIFAA.mdtanxp@myrealbox.com>

Hi Frank-

I got the latest version of Proj and the daily CVS build of gdal, and it
worked! I did find one glitch that you might want to know about. It turns
out that if the output file already exists, gdalwarp will sometimes
produces error messages and fail to do the projection.

Thanks!!

Michael

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: Saturday, April 12, 2003 9:54 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp: bad output header?


Michael Tan wrote:
> Hello Frank-
>
> The files are from OpenEV_FW_154.zip

Michael,

OK, I am pretty sure this is related to a specific bug in the GeoTIFF
driver from around that time.  It is fixed in CVS now.  If you can easily
build from source, then grab the current source from CVS and rebuild.
Otherwise I will try to crank out a 1.5.5 release of the utilities in the
near future.

Best regards,

--
---------------------------------------+---------------------------------
-----
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Mon Apr 14 15:20:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] gdalwarp: bad output header?
In-Reply-To: <LNBBLAMLPMKPGFDLEJIAMELDIFAA.mdtanxp@myrealbox.com>
References: <LNBBLAMLPMKPGFDLEJIAMELDIFAA.mdtanxp@myrealbox.com>
Message-ID: <3E9B0A12.2040407@pobox.com>

Michael Tan wrote:
> Hi Frank-
> 
> I got the latest version of Proj and the daily CVS build of gdal, and it
> worked! I did find one glitch that you might want to know about. It turns
> out that if the output file already exists, gdalwarp will sometimes
> produces error messages and fail to do the projection.

Michael,

If the output file already exists gdalwarp attempts to overlay the warp
result into the existing file.  This is intended to allow it to be used
for mosaicing.  But if the existing output file is inappropriate for some
reason results may be peculiar or generate an error.  Could you look into
this a bit more and report any cases that seem like inappropriate errors?

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From matt at terraEngine.com  Mon Apr 14 15:56:39 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] utility usage
Message-ID: <000001c302bf$f6920680$d701a8c0@matt>

Hi,

I am working on some tutorial style documentation on the gdal utilities
that I am making use of.  In the interests of being complete, I would
like to demonstrate the usage of some the parameters that I am
unfamiliar with.  For example, in gdalwarp -order sets the order of the
polynom used for warping.  I have experimented with a few images and am
unable to find a distinction in the image produced.  Are there specific
circumstances in which it will be significant?  Similarly I am
interested in cases where the error threshold (-et) would be set.
Lastly -co allows you to set name=value pairs.  Could you point me to
documentation where I can find the possible settings.  I have also
starting using gdal_translate to crop and the -mo settings might be
where I can set world file information.  If anyone has some pointers, I
can wrap the tutorials up and submit to Frank for approval.

Thanks,

Matt

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From warmerdam at pobox.com  Mon Apr 14 16:08:05 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] utility usage
In-Reply-To: <000001c302bf$f6920680$d701a8c0@matt>
References: <000001c302bf$f6920680$d701a8c0@matt>
Message-ID: <3E9B1525.4000306@pobox.com>

Matt Lynch wrote:
> Hi,
> 
> I am working on some tutorial style documentation on the gdal utilities
> that I am making use of. 

Cool!

 >  In the interests of being complete, I would
> like to demonstrate the usage of some the parameters that I am
> unfamiliar with.  For example, in gdalwarp -order sets the order of the
> polynom used for warping.  I have experimented with a few images and am
> unable to find a distinction in the image produced.  Are there specific
> circumstances in which it will be significant?  

Note that this only comes into play if the input images uses GCPs (ground
control points) for the control information instead of an affine
transformation.  Otherwise there is no need to construct polynomials.

 > Similarly I am
> interested in cases where the error threshold (-et) would be set.

The algorithm can use a linear approximation of whatever the general
underlying transformation is, over local areas.  The way this works is
that the first, middle and last point on a line are transformed using
the underlying algorithm.  The difference between the computed middle
point and what it would have been if linearly interpolated is compared
to the "error threshold".  If less the linear approximation is used for
all the points otherwise the line is subdivided and the approximation
test is applied again.

So, the error threshold is intended to be used any time you want to
short circuit the high cost underlying transformation (such as a
reprojection) and you give it the amount of error (in source pixels
I think) that you are willing to accept.  I use it often, usually
specifying a smallish value like 0.1.

> Lastly -co allows you to set name=value pairs.  Could you point me to
> documentation where I can find the possible settings.  I have also
> starting using gdal_translate to crop and the -mo settings might be
> where I can set world file information.  If anyone has some pointers, I
> can wrap the tutorials up and submit to Frank for approval.

Each format driver will list the format specific format options that
apply to that form.  For instance TIFF has options like "TILED=[YES/NO]"
in it's format info at:

   http://www.remotesensing.org/gdal/frmt_gtiff.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From matt at terraEngine.com  Mon Apr 14 16:33:28 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] utility usage
In-Reply-To: <3E9B1525.4000306@pobox.com>
Message-ID: <000001c302c5$1c7a0f00$d701a8c0@matt>

Hi Frank,

Ok, so it looks like I have what I need for most of it, except for the
-mo option on gdal_translate.  What kind of key values can be put there?
Also with gdal_translate, it limits me to one band.  I am currently
looking at batching a process where a 3 band image is translated one
band at a time, then I use ImageMagick to recombine the bands and
finally imagewarp to add the worldfile information (ImageMagick strips
the headers on tiffs). Am I missing a gdal utility within the set that
can recombine the bands for me?

Thanks,

Matt

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, April 14, 2003 2:08 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] utility usage


Matt Lynch wrote:
> Hi,
> 
> I am working on some tutorial style documentation on the gdal 
> utilities that I am making use of.

Cool!

 >  In the interests of being complete, I would
> like to demonstrate the usage of some the parameters that I am 
> unfamiliar with.  For example, in gdalwarp -order sets the order of 
> the polynom used for warping.  I have experimented with a few images 
> and am unable to find a distinction in the image produced.  Are there 
> specific circumstances in which it will be significant?

Note that this only comes into play if the input images uses GCPs
(ground control points) for the control information instead of an affine
transformation.  Otherwise there is no need to construct polynomials.

 > Similarly I am
> interested in cases where the error threshold (-et) would be set.

The algorithm can use a linear approximation of whatever the general
underlying transformation is, over local areas.  The way this works is
that the first, middle and last point on a line are transformed using
the underlying algorithm.  The difference between the computed middle
point and what it would have been if linearly interpolated is compared
to the "error threshold".  If less the linear approximation is used for
all the points otherwise the line is subdivided and the approximation
test is applied again.

So, the error threshold is intended to be used any time you want to
short circuit the high cost underlying transformation (such as a
reprojection) and you give it the amount of error (in source pixels I
think) that you are willing to accept.  I use it often, usually
specifying a smallish value like 0.1.

> Lastly -co allows you to set name=value pairs.  Could you point me to 
> documentation where I can find the possible settings.  I have also 
> starting using gdal_translate to crop and the -mo settings might be 
> where I can set world file information.  If anyone has some pointers, 
> I can wrap the tutorials up and submit to Frank for approval.

Each format driver will list the format specific format options that
apply to that form.  For instance TIFF has options like "TILED=[YES/NO]"
in it's format info at:

   http://www.remotesensing.org/gdal/frmt_gtiff.html

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.467 / Virus Database: 266 - Release Date: 4/1/2003
 



From warmerdam at pobox.com  Mon Apr 14 17:11:39 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] utility usage
In-Reply-To: <000001c302c5$1c7a0f00$d701a8c0@matt>
References: <000001c302c5$1c7a0f00$d701a8c0@matt>
Message-ID: <3E9B240B.5080505@pobox.com>

Matt Lynch wrote:
> Hi Frank,
> 
> Ok, so it looks like I have what I need for most of it, except for the
> -mo option on gdal_translate.  What kind of key values can be put there?

Matt,

What you can use for the -mo flag depends somewhat on the format.  For
formats that support arbitrary user supplied metadata it could be anything
as long as the tag name is a well behaved token (no spaces or special
characters).  Some drivers only support very specific tags, and many
drivers that support writing images don't support writing any metadata
at all.

> Also with gdal_translate, it limits me to one band.  I am currently
> looking at batching a process where a 3 band image is translated one
> band at a time, then I use ImageMagick to recombine the bands and
> finally imagewarp to add the worldfile information (ImageMagick strips
> the headers on tiffs). Am I missing a gdal utility within the set that
> can recombine the bands for me?

There isn't currently a handy way of combining images.  For a process
like this I would encourage you to build a Python script which gives you
a more intimate level of access.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From k.chodak at autoguard.pl  Tue Apr 15 03:37:50 2003
From: k.chodak at autoguard.pl (Krzysztof Chodak)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] Please help...
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAAFdPnwfXKHUWR3O5aC/3u8MKAAAAQAAAA9BVvWtrsd0il1C401LE9LQEAAAAA@autoguard.pl>

As I have written before I got problems with transfering all 50 features
from TAB file into SHP file (ogrinfo reports 50 fetures, ogr2ogr transfers
only 44 without any warning message).
I'm not able to locate the reason of such behavior.
Any hints available?

BR
 
Krzysztof Chodak


From ben at vterrain.org  Wed Apr 16 22:12:30 2003
From: ben at vterrain.org (VTP)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum
In-Reply-To: <3E933D34.6080401@pobox.com>
Message-ID: <IHEAIHOJLJNLHCKGKJEDMECECDAA.ben@vterrain.org>

I would have sent this to the PROJ mailing list, but it pertains to OGR as
well.

When trying to convert coordinates from NAD27 to WGS84, i found that OGR was
giving me wildly incorrect results.  The first thing i managed to do was to
duplicate the results with the latest PROJ.4:

>cs2cs +proj=utm +zone=17 +datum=WGS84 +to +proj=latlong +datum=WGS84
400000 800000
81d54'20.901"W  7d14'11.633"N 0.000
(Works)

>cs2cs +proj=utm +zone=17 +datum=NAD27 +to +proj=latlong +datum=WGS84
400000 800000
*       * 0.000
(Fails, the only difference is that it attempts a Datum conversion)

This is an island off Panama; quite reasonable i believe to be covered by
NAD27.  Turning on debug information with PROJ, we find:

>cs2cs +proj=utm +zone=17 +datum=NAD27 +to +proj=latlong +datum=WGS84
pj_open_lib(proj_def.dat): call fopen(C:\proj\nad/proj_def.dat) - succeeded
pj_open_lib(proj_def.dat): call fopen(C:\proj\nad/proj_def.dat) - succeeded
400000 800000
pj_open_lib(conus): call fopen(C:\proj\nad/conus) - succeeded
Ctable Conterminous United States 273x121: LL=(-131,20) UR=(-62.75,50.25)
pj_open_lib(alaska): call fopen(C:\proj\nad/alaska) - succeeded
Ctable Alaska 529x249: LL=(-194,46) UR=(-127.875,77.125)
pj_open_lib(ntv2_0.gsb): call fopen(C:\proj\nad/ntv2_0.gsb) - failed
pj_open_lib(ntv1_can.dat): call fopen(C:\proj\nad/ntv1_can.dat) - failed
pj_apply_gridshift(): failed to find a grid shift table for
                      location (-81.9057962dW,7.2370229dN)
   tried: @conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat
*       * 0.000

Question #1: What is this ntv2_0.gsb file?  If PROJ looks for it, why is it
not included with the standard PROJ distribution data?

Now, on to OGR.  When i use OGRCreateCoordinateTransformation() for the same
transformation as above, it cheerfully gives me an
OGRCoordinateTransformation object which proceeds to perform totally bogus
conversions.

Question #2: Since PROJ is clearly failing in this case, shouldn't
OGRCreateCoordinateTransformation fail, i.e. return NULL?  Is this a lack of
error-checking in OGR, PROJ, or both?

Thanks,
Ben



From ben at vterrain.org  Wed Apr 16 22:24:59 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum
In-Reply-To: <IHEAIHOJLJNLHCKGKJEDMECECDAA.ben@vterrain.org>
Message-ID: <IHEAIHOJLJNLHCKGKJEDGECFCDAA.ben@vterrain.org>

(Replying to myself..)

> Question #1: What is this ntv2_0.gsb file?  If PROJ looks for it,
> why is it not included with the standard PROJ distribution data?

Sorry about that question, i was able to answer it with a Google search for
"ntv2_0.gsb".  Apparently is a large (14MB) proprietary Datum shift file
specifically for Canada.  So, it is quite unrelated to why my data point in
Panama is failing.

So, the more important question is #2.  The gist of this is, how can i as a
user of OGR find out when OGR/PROJ has failed to produce a viable
transformation.

> Now, on to OGR.  When i use OGRCreateCoordinateTransformation()
> for the same transformation as above, it cheerfully gives me an
> OGRCoordinateTransformation object which proceeds to perform
> totally bogus conversions.
>
> Question #2: Since PROJ is clearly failing in this case, shouldn't
> OGRCreateCoordinateTransformation fail, i.e. return NULL?  Is
> this a lack of error-checking in OGR, PROJ, or both?
>
> Thanks,
> Ben


From ed at topozone.com  Wed Apr 16 22:33:45 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum
Message-ID: <13858AA1A74F30419F319ACB66A9D122019695@mercator.topozone.com>

While it might seem "quite reasonable" to think 7 degrees North, 81
degrees West is covered by NAD27, it's not there.  So the first issue is
that your datum shift effort should not ever succeed, because the input
value is undefined (outside valid domain).

You didn't describe exactly what OGR does, other than give "bogus"
results.  Can you give us a bit more detail?  Thanks!

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: VTP [mailto:ben@vterrain.org] 
Sent: Wednesday, April 16, 2003 10:13 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum


I would have sent this to the PROJ mailing list, but it pertains to OGR
as
well.

When trying to convert coordinates from NAD27 to WGS84, i found that OGR
was
giving me wildly incorrect results.  The first thing i managed to do was
to
duplicate the results with the latest PROJ.4:

>cs2cs +proj=utm +zone=17 +datum=WGS84 +to +proj=latlong +datum=WGS84
400000 800000
81d54'20.901"W  7d14'11.633"N 0.000
(Works)

>cs2cs +proj=utm +zone=17 +datum=NAD27 +to +proj=latlong +datum=WGS84
400000 800000
*       * 0.000
(Fails, the only difference is that it attempts a Datum conversion)

This is an island off Panama; quite reasonable i believe to be covered
by
NAD27.  Turning on debug information with PROJ, we find:

>cs2cs +proj=utm +zone=17 +datum=NAD27 +to +proj=latlong +datum=WGS84
pj_open_lib(proj_def.dat): call fopen(C:\proj\nad/proj_def.dat) -
succeeded
pj_open_lib(proj_def.dat): call fopen(C:\proj\nad/proj_def.dat) -
succeeded
400000 800000
pj_open_lib(conus): call fopen(C:\proj\nad/conus) - succeeded
Ctable Conterminous United States 273x121: LL=(-131,20)
UR=(-62.75,50.25)
pj_open_lib(alaska): call fopen(C:\proj\nad/alaska) - succeeded
Ctable Alaska 529x249: LL=(-194,46) UR=(-127.875,77.125)
pj_open_lib(ntv2_0.gsb): call fopen(C:\proj\nad/ntv2_0.gsb) - failed
pj_open_lib(ntv1_can.dat): call fopen(C:\proj\nad/ntv1_can.dat) - failed
pj_apply_gridshift(): failed to find a grid shift table for
                      location (-81.9057962dW,7.2370229dN)
   tried: @conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat
*       * 0.000

Question #1: What is this ntv2_0.gsb file?  If PROJ looks for it, why is
it
not included with the standard PROJ distribution data?

Now, on to OGR.  When i use OGRCreateCoordinateTransformation() for the
same
transformation as above, it cheerfully gives me an
OGRCoordinateTransformation object which proceeds to perform totally
bogus
conversions.

Question #2: Since PROJ is clearly failing in this case, shouldn't
OGRCreateCoordinateTransformation fail, i.e. return NULL?  Is this a
lack of
error-checking in OGR, PROJ, or both?

Thanks,
Ben


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From ben at vterrain.org  Wed Apr 16 22:57:27 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum
In-Reply-To: <13858AA1A74F30419F319ACB66A9D122019695@mercator.topozone.com>
Message-ID: <IHEAIHOJLJNLHCKGKJEDGECGCDAA.ben@vterrain.org>

> -----Original Message-----
> From: Ed McNierney
>
> While it might seem "quite reasonable" to think 7 degrees North, 81
> degrees West is covered by NAD27, it's not there.  So the first issue is
> that your datum shift effort should not ever succeed, because the input
> value is undefined (outside valid domain).

Hmmmmm...  i have this message from the person who provided the Panama data:
"I have two sources of data..  The basemaps down there are 1960's vintage US
Army, and are clearly labeled NAD27 / Clark 1866 spheroid, UTM Zone 17."

So perhaps there is such as a thing as NAD27 for Panama, and we (users of
PROJ) simply lack a Datum shift file for it.

> You didn't describe exactly what OGR does, other than give "bogus"
> results.  Can you give us a bit more detail?  Thanks!

Correct output for the UTM point is around: (-81.8, 7.7)
The resulting OGRCoordinateTransformation is producing: (-1.42, 0.13)

Eeek, i just realized that it's incorrect to point the finger at OGR's
successful creation of a transformation - the failure isn't until the
Transform, and Transform is indeed return 0 to indicate an error for the
point lying outside its known Datum conversion space.  What was throwing me
off is that although it returns 0 to indicate error, it *also* modifies the
values passed in by pointer, as if it was succeeding :)

-Ben


From ed at topozone.com  Thu Apr 17 08:17:14 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:49 2007
Subject: [Gdal-dev] OGR, PROJ.4, and handling of Datum
Message-ID: <13858AA1A74F30419F319ACB66A9D122019696@mercator.topozone.com>

Ben -

Well, you could be right about this being a missing grid shift file.
Before I wrote I checked the National Geodetic Survey converters, and
they use the same grid shifts.  Then I tried the current version of
Corpscon (Nadcon) just to be sure - no luck.  So it appears the Army
Corps of Engineers won't convert those old Army coordinates <g>.

When you report the "correct output", are you saying you have some other
tool that DOES do the conversion, or are you just estimating the
expected value?

I presume that the Army (or whoever) created a local NAD27-derived
Panama datum for doing their work.  Unfortunately, if you want to get
the conversions right you're going to need to research what that datum
really is and get documentation for it.  I know that work in Central
America used a few datums derived from NAD27 with varying degrees of
rigor - you might trying hunting in NIMA / DMA documents for it.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Ben Discoe [mailto:ben@vterrain.org] 
Sent: Wednesday, April 16, 2003 10:57 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] OGR, PROJ.4, and handling of Datum

> -----Original Message-----
> From: Ed McNierney
>
> While it might seem "quite reasonable" to think 7 degrees North, 81
> degrees West is covered by NAD27, it's not there.  So the first issue
is
> that your datum shift effort should not ever succeed, because the
input
> value is undefined (outside valid domain).

Hmmmmm...  i have this message from the person who provided the Panama
data:
"I have two sources of data..  The basemaps down there are 1960's
vintage US
Army, and are clearly labeled NAD27 / Clark 1866 spheroid, UTM Zone 17."

So perhaps there is such as a thing as NAD27 for Panama, and we (users
of
PROJ) simply lack a Datum shift file for it.

> You didn't describe exactly what OGR does, other than give "bogus"
> results.  Can you give us a bit more detail?  Thanks!

Correct output for the UTM point is around: (-81.8, 7.7)
The resulting OGRCoordinateTransformation is producing: (-1.42, 0.13)

Eeek, i just realized that it's incorrect to point the finger at OGR's
successful creation of a transformation - the failure isn't until the
Transform, and Transform is indeed return 0 to indicate an error for the
point lying outside its known Datum conversion space.  What was throwing
me
off is that although it returns 0 to indicate error, it *also* modifies
the
values passed in by pointer, as if it was succeeding :)

-Ben

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From dlowther at ou.edu  Fri Apr 18 11:33:10 2003
From: dlowther at ou.edu (Lowther, David W)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] GDALWARP / GDAL_TRANSLATE / ECW Questions
Message-ID: <ACFEE944B85ED611AEC800B0D0FCEB4B06D28FB2@mail3.oulan.ou.edu>

Howdy,

Since I may be approaching my task in the wrong way, let me let you all know
what I am trying to do...

My desired result is a set of ECW formatted image files for use in mapserver
in the following projection:

	proj=aea
	lat_1=29.500000000 #SP1
	lat_2=45.500000000 #SP2
	lat_0=23.000000000 #REF LAT
	lon_0=-96.000000000 #CENTRAL MERIDIAN
	x_0=0.000 #FALSE EAST
	y_0=0.000 # FALSE NORTH
	datum=NAD83
	ellps=GRS80
	no_defs

I have 2 options for input files. 

The first option is .bil files with .hdr's in the following projection:
	proj=utm
	ellps=GRS80
	zone=14 (or 13 or 15)
  	north
	no_defs

The second option is .tif files with .tfw's already projected like my
desired output.

I have no trouble using gdal_translate to convert from either .tif or .bil
to .ecw.

The problem that I have is that the images projected in Albers have black
around parts of the edges. As I intend to display them side by side in
Mapserver I need to use the OFFSITE argument to hide this black. When the
images are in .tif format this works fine, but once they are .ecw only part
of the outside is masked - I'm guessing because the black is not all
completely black after conversion to .ecw.

Is there a way to handle this?


Also, when I use gdalwarp to project to Gtiff with the -co "TFW=YES" option
no TFW is created.

Example:
E:\IMAGES\DataIn>gdalwarp -s_srs .\utm14.proj4 -t_srs .\albok.proj4 -of
GTiff -co "TFW=YES" 34097h21.bil e:\images\dataout\34097h21.tif
Creating output file is that 6626P x 7890L.
:0...10...20...30...40...50...60...70...80...90...100 - done.


I am using the gdal_translate and gdalwarp on Win2K - build 1.1.8.


Thanks for all your help and sorry if this is rambling or confusing...

David Lowther
Software Engineer
GEO Information Systems
University of Oklahoma
dlowther@ou.edu
(405) 325-3131
http://www.geo.ou.edu <http://www.geo.ou.edu> 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030418/093b0e1f/attachment.html
From dron at ak4719.spb.edu  Tue Apr 22 12:38:38 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] New options for gdalinfo
Message-ID: <20030422163837.GA2927@ak4719.spb.edu>

Hi folks,

I have added two new options to `gdalinfo' utility: -nogcp and -nomd.
The first one suppresses list of GCPs printing, the second one supresses
printing of metadata. Both options intended to work with some datasets
which contain thousands of GCPs and kilobytes of metadata strings.

				Regards,
				Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From ianm at itee.uq.edu.au  Tue Apr 22 17:45:08 2003
From: ianm at itee.uq.edu.au (Ian MacColl)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] solaris run-time linkage
Message-ID: <AFF3DB56-750B-11D7-9F4E-0003935819D0@itee.uq.edu.au>

Hello:

Is there a way to compile and link gdal and ogr under solaris to 
specify search directories for the runtime linker?

I'm compiling mapserv for CGI. I don't control the CGI host so I can't 
define LD_LIBRARY_PATH. I can compile and link on an identical solaris 
2.8 host using gcc 2.95. Libraries gdal depends on seem to assimilate 
LDFLAGS from the environment, with a -R option to pass runtime search 
directories. However, gdal uses c++ rather than ld for linkage, and 
it's not immediately obvious how to pass the search list through to the 
linker (I've tried both -R... and -Wl,-R... in both LD_SHARED and LIBS 
in GDALmake.opt). It looks as though the configure scripts sees the 
LDFLAGS value, and puts it in config.status, but it doesn't end up in 
the gdal make files.

The error that I'm getting, for example when I run ogr2ogr, is failure 
to find libproj. I think this means ogr2ogr is finding libgdal, but 
libgdal can't find libproj. Setting LD_LIBRARY_PATH makes the error 
disappear.

So, is there a way to specify the search directories in libgdal and 
friends?

If not, I guess I'm stuck with either the default search directories, 
or trying to wrap mapserv in a script that sets LD_LIBRARY_PATH. Any 
other ideas?

thanks

Ian 


From sylvain.rioux at softmaptech.com  Thu Apr 24 17:09:19 2003
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] E00 format
Message-ID: <NEBBJBLMOMCEDMBAMIFACEEMCGAA.sylvain.rioux@softmaptech.com>

Hi,

Is there any work in progress regarding e00 format support in OGR? If not,
is there a translator that exist (Open Source) from this format to one in
OGR? I know that Daniel Morissette worked on an Import/Export library
(AVCE00) but I can't figure out exactly why it is not in OGR (I'm pretty
sure it must be related to $$$) or why it does not export to shp.

Thanks.
Sylvain Rioux

Les technologies SoftMap (2002) inc.
400, boul. Jean-Lesage, bureau 540
Qu?bec (Qu?bec)
Canada G1K 8W1

T?l. : (418) 523-2929, poste 304
T?l?c. : (418) 523-7979
sylvain.rioux@softmaptech.com
www.softmaptech.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030424/6dcf7865/attachment.html
From morissette at dmsolutions.ca  Thu Apr 24 18:26:15 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] E00 format
References: <NEBBJBLMOMCEDMBAMIFACEEMCGAA.sylvain.rioux@softmaptech.com>
Message-ID: <3EA86487.4ABABF88@dmsolutions.ca>

> Sylvain Rioux wrote:
> 
> Is there any work in progress regarding e00 format support in OGR? If
> not, is there a translator that exist (Open Source) from this format
> to one in OGR? I know that Daniel Morissette worked on an
> Import/Export library (AVCE00) but I can't figure out exactly why it
> is not in OGR (I'm pretty sure it must be related to $$$) or why it
> does not export to shp.
> 

Bonjour Sylviain,

OGR supports reading binary coverages via the AVCE00 library, but it
doesn't support E00.  The reasons AFAIK are a combination of $$$,
priorities, and usefulness... E00s are text files and would be too slow
to be usable in webmapping apps (which is where the $$$ were coming
from), so the priority was set on supporting binary coverages which can
be accessed a bit faster.  Of course if someone has the $$$ then I'm
sure Frank would be happy to add E00 support.

Finally, if you have E00 files you can convert them to binary coverages
using the AVCIMPORT utility that comes with the AVCE00 library, and then
use the binary coverages via OGR.

Oh, and with respect to your last question: AVCE00 doesn't export to shp
because it's not really a data conversion library, it's only smart
enough to read binary coverage files and turn them to ASCII E00 and
vice-versa.  (Actually the internal structure of binary coverage files
is extremely similar ot the structure of E00 files, so it's for the most
part a mapping of ASCII to binary data structures and vice-versa without
trying to make sense of what is being converted.)

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From morissette at dmsolutions.ca  Thu Apr 24 18:49:33 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] E00 format
References: <NEBBJBLMOMCEDMBAMIFACEEMCGAA.sylvain.rioux@softmaptech.com>
Message-ID: <3EA869FD.D1BDE71C@dmsolutions.ca>

> Sylvain Rioux wrote:
> 
> Is there any work in progress regarding e00 format support in OGR? If
> not, is there a translator that exist (Open Source) from this format
> to one in OGR? I know that Daniel Morissette worked on an
> Import/Export library (AVCE00) but I can't figure out exactly why it
> is not in OGR (I'm pretty sure it must be related to $$$) or why it
> does not export to shp.
> 

Bonjour Sylviain,

OGR supports reading binary coverages via the AVCE00 library, but it
doesn't support E00.  The reasons AFAIK are a combination of $$$,
priorities, and usefulness... E00s are text files and would be too slow
to be usable in webmapping apps (which is where the $$$ were coming
from), so the priority was set on supporting binary coverages which can
be accessed a bit faster.  Of course if someone has the $$$ then I'm
sure Frank would be happy to add E00 support.

Finally, if you have E00 files you can convert them to binary coverages
using the AVCIMPORT utility that comes with the AVCE00 library, and then
use the binary coverages via OGR.

Oh, and with respect to your last question: AVCE00 doesn't export to shp
because it's not really a data conversion library, it's only smart
enough to read binary coverage files and turn them to ASCII E00 and
vice-versa.  (Actually the internal structure of binary coverage files
is extremely similar ot the structure of E00 files, so it's for the most
part a mapping of ASCII to binary data structures and vice-versa without
trying to make sense of what is being converted.)

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From sylvain.rioux at softmaptech.com  Fri Apr 25 11:46:11 2003
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] E00 format
In-Reply-To: <3EA869FD.D1BDE71C@dmsolutions.ca>
Message-ID: <NEBBJBLMOMCEDMBAMIFACEEPCGAA.sylvain.rioux@softmaptech.com>

Merci pour la r?ponse, Daniel.

Is there a similar path to read VMAP0 (formerly DCW) with OGR?

Sylvain

-----Message d'origine-----
De : gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]De la part de Daniel Morissette
Envoy? : April 24, 2003 06:50 pm
? : gdal-dev@remotesensing.org
Objet : Re: [Gdal-dev] E00 format


> Sylvain Rioux wrote:
>
> Is there any work in progress regarding e00 format support in OGR? If
> not, is there a translator that exist (Open Source) from this format
> to one in OGR? I know that Daniel Morissette worked on an
> Import/Export library (AVCE00) but I can't figure out exactly why it
> is not in OGR (I'm pretty sure it must be related to $$$) or why it
> does not export to shp.
>

Bonjour Sylviain,

OGR supports reading binary coverages via the AVCE00 library, but it
doesn't support E00.  The reasons AFAIK are a combination of $$$,
priorities, and usefulness... E00s are text files and would be too slow
to be usable in webmapping apps (which is where the $$$ were coming
from), so the priority was set on supporting binary coverages which can
be accessed a bit faster.  Of course if someone has the $$$ then I'm
sure Frank would be happy to add E00 support.

Finally, if you have E00 files you can convert them to binary coverages
using the AVCIMPORT utility that comes with the AVCE00 library, and then
use the binary coverages via OGR.

Oh, and with respect to your last question: AVCE00 doesn't export to shp
because it's not really a data conversion library, it's only smart
enough to read binary coverage files and turn them to ASCII E00 and
vice-versa.  (Actually the internal structure of binary coverage files
is extremely similar ot the structure of E00 files, so it's for the most
part a mapping of ASCII to binary data structures and vice-versa without
trying to make sense of what is being converted.)

Daniel
--
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Apr 25 12:35:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] E00 format
In-Reply-To: <NEBBJBLMOMCEDMBAMIFACEEPCGAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFACEEPCGAA.sylvain.rioux@softmaptech.com>
Message-ID: <3EA963C3.5070706@pobox.com>

Sylvain Rioux wrote:
> Merci pour la r?ponse, Daniel.
> 
> Is there a similar path to read VMAP0 (formerly DCW) with OGR?

Sylvain,

Currently the only route to VPF (including DCW and the modern equivelent
VMAP0) is via the OGDI support in OGR.  You need to build OGDI (ogdi.sf.net)
first, and then build OGR with OGDI support enabled.  Then use a string like
this as the datasource name to open the VPF dataset:

   gltp:/vrf/usr4/mpp1/v0noa/vmaplv0/noamer

The OpenEV_FW 1.5.4 builds for linux and windows include OGDI support, and
could be used for preliminary tests of VPF support.  Some more info on the
OGDI driver is available at:

   http://gdal.velocet.ca/projects/opengis/ogrhtml/drv_ogdi.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




From pond_bear at hotmail.com  Fri Apr 25 14:18:39 2003
From: pond_bear at hotmail.com (pond bear)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] gdal_translate cutting image error?
Message-ID: <BAY8-F67SNY5DURMBnT0000eebe@hotmail.com>

I use gdal_translate to cut geotiff file. But the output file can't be 
viewed by ERDAS IMAGE 8.5. The ERDAS says "LayerRasterRead failed" and 
"etif_BlockRead failed".
Does anybody meet the same error?

Jing
University of North Dakota


_________________________________________________________________
Add photos to your e-mail with MSN 8. Get 2 months FREE*.  
http://join.msn.com/?page=features/featuredemail


From warmerdam at pobox.com  Fri Apr 25 15:01:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] gdal_translate cutting image error?
In-Reply-To: <BAY8-F67SNY5DURMBnT0000eebe@hotmail.com>
References: <BAY8-F67SNY5DURMBnT0000eebe@hotmail.com>
Message-ID: <3EA9861C.9020002@pobox.com>

pond bear wrote:
> I use gdal_translate to cut geotiff file. But the output file can't be 
> viewed by ERDAS IMAGE 8.5. The ERDAS says "LayerRasterRead failed" and 
> "etif_BlockRead failed".
> Does anybody meet the same error?

Jing,

Can you provide a small file that Imagine has trouble reading?  I will test it
with 8.6 and if it doesn't work I will either fix GDAL, fix Imagine (I do some
work for them on the geotiff support), or submit a bug report to them.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Apr 25 15:54:09 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Raster IO Performance Tweaking
Message-ID: <3EA99261.6020205@pobox.com>

Folks,

In an effort to accelerate GDAL IO speeds for various cases, I have
implemented a RasterIO() interface on the GDALDataset that allows multiple
bands to be loaded or written in a single call.  The default implementation
is to just make calls to the RasterIO() method for each of the bands, but
we now have the potential to implement format specific dataset RasterIO()
methods that take operate on all bands in one pass when the data is
effectively pixel interleaved.

I mention this now (even before there is much advantage being taken from it)
because these changes mean anyone updating from CVS must do a clean rebuild,
and because there is a fair likelyhood that bugs will be introduced while this
is being work on.

I have also done some tweaking for pixel interleaved buffers in rasterio.cpp
that should help in some fairly common cases right now.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jbaird at ku.edu  Fri Apr 25 19:02:11 2003
From: jbaird at ku.edu (Jay Baird)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] OS X  and GDAL
In-Reply-To: <3EA99261.6020205@pobox.com>
Message-ID: <BACF28A3.E%jbaird@ku.edu>

Hi all,

    I?m interested in doing a geospatial app with Cocoa under OS X and would
like to use GDAL for a lot of the raster work being done. Since Frank?s post
on CVS being broken might have caused my problems, but does anyone have any
success with compiling static GDAL under OS X? I know the GRASS people have
done it, but I?m trying not to use the whole of GRASS which is too complex
for my project.

Any advice or ideas would be greatly appreciated.

Jayson
jbaird@ku.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030425/39906259/attachment.html
From ianm at itee.uq.edu.au  Sat Apr 26 19:06:55 2003
From: ianm at itee.uq.edu.au (Ian MacColl)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: Gdal-dev digest, Vol 1 #127 - 5 msgs
In-Reply-To: <20030426160001.15544.35771.Mailman@yoda.imagelinks.com>
Message-ID: <C62170A8-783B-11D7-97AA-0003935819D0@itee.uq.edu.au>

On Sunday, April 27, 2003, at 02:00 AM, Jay Baird wrote:

>     I'm interested in doing a geospatial app with Cocoa under OS X and 
> would
> like to use GDAL for a lot of the raster work being done. Since 
> Frank's post
> on CVS being broken might have caused my problems, but does anyone 
> have any
> success with compiling static GDAL under OS X? I know the GRASS people 
> have
> done it, but I'm trying not to use the whole of GRASS which is too 
> complex
> for my project.
>
> Any advice or ideas would be greatly appreciated.

Possibly a dumb question, but why does it have to be static?

I use the GDAL OGR utilities, dynamically linked, from the command-line 
in OSX.

thanks

Ian


From jbaird at ku.edu  Sun Apr 27 21:06:34 2003
From: jbaird at ku.edu (Jay Baird)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: Gdal-dev digest, Vol 1 #127 - 5 msgs
In-Reply-To: <C62170A8-783B-11D7-97AA-0003935819D0@itee.uq.edu.au>
Message-ID: <BAD1E8CA.14%jbaird@ku.edu>

I?d like to be able to deploy the completed code in a way that I wouldn?t
have to install on every machine, most of the machines I?d be working with
would be nice to just have it in the bundle, ready to go, without having to
install it on every machine the code would be running on.

Thanks for the interest though. I?ve attempted to compile the CVS code with
?DPROJ_STATIC as a C_OPT and CXX_OPT, and added ?dl to the linking flags,
but it fails trying to find a file called proj_api.h.

Jay

On 4/26/03 6:06 PM, "Ian MacColl" <ianm@itee.uq.edu.au> wrote:

> On Sunday, April 27, 2003, at 02:00 AM, Jay Baird wrote:
> 
>> >     I'm interested in doing a geospatial app with Cocoa under OS X and
>> > would 
>> > like to use GDAL for a lot of the raster work being done. Since
>> > Frank's post 
>> > on CVS being broken might have caused my problems, but does anyone
>> > have any 
>> > success with compiling static GDAL under OS X? I know the GRASS people
>> > have 
>> > done it, but I'm trying not to use the whole of GRASS which is too
>> > complex 
>> > for my project.
>> > 
>> > Any advice or ideas would be greatly appreciated.
> 
> Possibly a dumb question, but why does it have to be static?
> 
> I use the GDAL OGR utilities, dynamically linked, from the command-line
> in OSX. 
> 
> thanks 
> 
> Ian 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030427/a115bdcd/attachment.html
From ianm at itee.uq.edu.au  Sun Apr 27 21:18:01 2003
From: ianm at itee.uq.edu.au (Ian MacColl)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: Gdal-dev digest, Vol 1 #127 - 5 msgs
In-Reply-To: <BAD1E8CA.14%jbaird@ku.edu>
Message-ID: <40EAB40B-7917-11D7-97AA-0003935819D0@itee.uq.edu.au>

On Monday, April 28, 2003, at 11:06 AM, Jay Baird wrote:

...

> Thanks for the interest though. I?ve attempted to compile the CVS code 
> with ?DPROJ_STATIC as a C_OPT and CXX_OPT, and added ?dl to the 
> linking flags, but it fails trying to find a file called proj_api.h.

That's a proj file - I have it in proj-4.4.5/src and (via 'make 
install') in /usr/local/include. You might need a -I path to it in one 
of your OPTs.

I'm interested in hearing how you get on - part of my curiousity was 
that I recently wanted to compile GDAL static on Solaris but had some 
name conflicts and didn't have time to mess with it.

thanks

Ian


From jbaird at ku.edu  Sun Apr 27 22:20:33 2003
From: jbaird at ku.edu (Jay Baird)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Compile error on OS X
In-Reply-To: <40EAB40B-7917-11D7-97AA-0003935819D0@itee.uq.edu.au>
Message-ID: <BAD1FA21.1A%jbaird@ku.edu>

> After installing Proj, I?ve passed most of my previous errors, but now I?m
> getting things like the following when building the latest and greatest our of
> CVS:
> 
> 
ar: creating archive ogr.a
ranlib ogr.a
ranlib: file: ogr.a(ogrsurface.o) has no symbols
make ./gdal.a
ar r ./gdal.a ./frmts/o/*.o ./core/*.o ./port/*.o ./alg/*.o ./ogr/ogrct.o
./ogr/ogr_opt.o ./ogr/ogr_fromepsg.o ./ogr/ogr_srs_validate.o
./ogr/ogrutils.o ./ogr/ogr_srs_proj4.o ./ogr/ograssemblepolygon.o
./ogr/ogr_api.o ./ogr/ogrsf_frmts/generic/ogrregisterall.o
./ogr/ogrfeaturestyle.o
ar: creating archive ./gdal.a
ranlib ./gdal.a
ranlib: file: ./gdal.a(pnggccrd.o) has no symbols
ranlib: file: ./gdal.a(pngvcrd.o) has no symbols
ranlib: file: ./gdal.a(tif_pixarlog.o) has no symbols
ranlib: file: ./gdal.a(cpl_vsil_unix_stdio_64.o) has no symbols
make ./libgdal.1.1.dylib
gcc -dynamiclib ./frmts/o/*.o ./core/*.o ./port/*.o ./alg/*.o ./ogr/ogrct.o
./ogr/ogr_opt.o ./ogr/ogr_fromepsg.o ./ogr/ogr_srs_validate.o
./ogr/ogrutils.o ./ogr/ogr_srs_proj4.o ./ogr/ograssemblepolygon.o
./ogr/ogr_api.o ./ogr/ogrsf_frmts/generic/ogrregisterall.o
./ogr/ogrfeaturestyle.o ./ogr/ogrsf_frmts/ogrsf_frmts.a   ./gdal.a
./ogr/ogr.a ./gdal.a ./port/cpl.a -lz -lm -lm -dl -o ./libgdal.1.1.dylib
ld: Undefined symbols:
/usr/bin/libtool: internal link edit command failed
vtable for __cxxabiv1::__class_type_info
vtable for __cxxabiv1::__si_class_type_info
operator delete(void*)
operator new(unsigned long)
___gxx_personality_v0
operator delete[](void*)
operator new[](unsigned long)
___cxa_pure_virtual
_pj_dalloc
_pj_free
_pj_fwd
_pj_get_def
_pj_get_errno_ref
_pj_init
_pj_inv
_pj_strerrno
_pj_transform
vtable for __cxxabiv1::__vmi_class_type_info
make[1]: *** [libgdal.1.1.dylib] Error 1
make: *** [check-lib] Error 2

I know this can?t be good, but then again I?m having trouble tracking down
what?s going on. Any ideas?

Jay

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030427/de6e1161/attachment.html
From ianm at itee.uq.edu.au  Mon Apr 28 13:44:39 2003
From: ianm at itee.uq.edu.au (Ian MacColl)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: Compile error on OS X
In-Reply-To: <20030428160001.20632.66418.Mailman@yoda.imagelinks.com>
Message-ID: <15B01AF2-79A1-11D7-A5D1-0003935819D0@itee.uq.edu.au>

On Tuesday, April 29, 2003, at 02:00 AM, 
gdal-dev-request@remotesensing.org wrote:

>> After installing Proj, I've passed most of my previous errors, but 
>> now I'm
>> getting things like the following when building the latest and 
>> greatest our of
>> CVS:

[...making gdal.a...]

I think you can ignore the "has no symbols" messages.

> make ./libgdal.1.1.dylib
> gcc -dynamiclib ./frmts/o/*.o ./core/*.o ./port/*.o ./alg/*.o 
> ./ogr/ogrct.o
> ./ogr/ogr_opt.o ./ogr/ogr_fromepsg.o ./ogr/ogr_srs_validate.o
> ./ogr/ogrutils.o ./ogr/ogr_srs_proj4.o ./ogr/ograssemblepolygon.o
> ./ogr/ogr_api.o ./ogr/ogrsf_frmts/generic/ogrregisterall.o
> ./ogr/ogrfeaturestyle.o ./ogr/ogrsf_frmts/ogrsf_frmts.a   ./gdal.a
> ./ogr/ogr.a ./gdal.a ./port/cpl.a -lz -lm -lm -dl -o 
> ./libgdal.1.1.dylib
> ld: Undefined symbols:

...

Stuff like delete and new comes from -lSystem and/or -lstdc++

I've also got -lcrypto and -lssl and I've got -ldl instead of -dl

I think the pj_ stuff is from proj, but I'm not sure how it's linked.

Ian


From matt at terraEngine.com  Mon Apr 28 18:24:25 2003
From: matt at terraEngine.com (Matt Lynch)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Gdalwarp and streaming
Message-ID: <000001c30dd4$ee2fe550$d701a8c0@matt>

Hi,

I am trying to figure out how I can stream files in and out of gdalwarp
(in a DOS environment).  Any suggestions would be appreciated.

Thanks,

Matt

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.473 / Virus Database: 271 - Release Date: 4/17/2003
 



From jmt at twilley.org  Mon Apr 28 20:15:01 2003
From: jmt at twilley.org (Jack Twilley)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] jpeglib.h not found
Message-ID: <86of2q9n22.fsf@duchess.twilley.org>

I would like to take advantage of features in GDAL that were
implemented after 1.1.8 was released so I downloaded a copy of the
repository and attempted to build it.

./configure ran, but there were errors on the build.

Here is the source file that failed:

gcc -c -I../../../port -Wall -fPIC -O2    -DZIP_SUPPORT -I../../zlib
-DJPEG_SUPPORT -I../../jpeg tif_jpeg.c -o tif_jpeg.o
tif_jpeg.c:67: jpeglib.h: No such file or directory
tif_jpeg.c:68: jerror.h: No such file or directory

These two headers are actually in ../../jpeg/libjpeg/, not
../../jpeg/, which is why the compiler can't find them.  I'm not sure
whether it's better to change the #include statement or the include
path, since this is my first day with the project.

Jack.
-- 
Jack Twilley
jmt at twilley dot org
http colon slash slash www dot twilley dot org slash tilde jmt slash
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030428/86092329/attachment.bin
From warmerdam at pobox.com  Tue Apr 29 08:52:19 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] jpeglib.h not found
In-Reply-To: <86of2q9n22.fsf@duchess.twilley.org>
References: <86of2q9n22.fsf@duchess.twilley.org>
Message-ID: <3EAE7583.6040107@pobox.com>

Jack Twilley wrote:
> I would like to take advantage of features in GDAL that were
> implemented after 1.1.8 was released so I downloaded a copy of the
> repository and attempted to build it.
> 
> ./configure ran, but there were errors on the build.
> 
> Here is the source file that failed:
> 
> gcc -c -I../../../port -Wall -fPIC -O2    -DZIP_SUPPORT -I../../zlib
> -DJPEG_SUPPORT -I../../jpeg tif_jpeg.c -o tif_jpeg.o
> tif_jpeg.c:67: jpeglib.h: No such file or directory
> tif_jpeg.c:68: jerror.h: No such file or directory
> 
> These two headers are actually in ../../jpeg/libjpeg/, not
> ../../jpeg/, which is why the compiler can't find them.  I'm not sure
> whether it's better to change the #include statement or the include
> path, since this is my first day with the project.

Jack,

I have committed a fix to frmts/gtiff/libtiff/GNUmakefile to look like this:

ifeq ($(JPEG_SETTING),internal)
ALL_C_FLAGS     :=      $(ALL_C_FLAGS) -I../../jpeg/libjpeg
endif

Instead of:

ifeq ($(JPEG_SETTING),internal)
ALL_C_FLAGS     :=      $(ALL_C_FLAGS) -I../../jpeg
endif

I hadn't encountered this problem before because I have jpeg include files
littered through my system.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jmt at twilley.org  Tue Apr 29 11:53:04 2003
From: jmt at twilley.org (Jack Twilley)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] jpeglib.h not found
In-Reply-To: <3EAE7583.6040107@pobox.com> (Frank Warmerdam's message of
 "Tue, 29 Apr 2003 08:52:19 -0400")
References: <86of2q9n22.fsf@duchess.twilley.org> <3EAE7583.6040107@pobox.com>
Message-ID: <868ytt9u73.fsf@duchess.twilley.org>

>>>>> "Frank" == Frank Warmerdam <warmerdam@pobox.com> writes:

Frank> Jack,

Frank> I have committed a fix to frmts/gtiff/libtiff/GNUmakefile to
Frank> look like this:

Frank> ifeq ($(JPEG_SETTING),internal) ALL_C_FLAGS := $(ALL_C_FLAGS)
Frank> -I../../jpeg/libjpeg endif

Frank> Instead of:

Frank> ifeq ($(JPEG_SETTING),internal) ALL_C_FLAGS := $(ALL_C_FLAGS)
Frank> -I../../jpeg endif

Frank> I hadn't encountered this problem before because I have jpeg
Frank> include files littered through my system.

The file frmts/jpeg/jpgdataset.cpp also has the same issue, so you'll
probably want to fix frmts/jpeg/GNUmakefile the same way.

Frank> Best regards,

Jack.
-- 
Jack Twilley
jmt at twilley dot org
http colon slash slash www dot twilley dot org slash tilde jmt slash
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030429/c7a5d771/attachment.bin
From warmerdam at pobox.com  Tue Apr 29 15:22:06 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] jpeglib.h not found
In-Reply-To: <868ytt9u73.fsf@duchess.twilley.org>
References: <86of2q9n22.fsf@duchess.twilley.org> <3EAE7583.6040107@pobox.com> <868ytt9u73.fsf@duchess.twilley.org>
Message-ID: <3EAED0DE.7020306@pobox.com>

Jack Twilley wrote:
> The file frmts/jpeg/jpgdataset.cpp also has the same issue, so you'll
> probably want to fix frmts/jpeg/GNUmakefile the same way.

Jack,

Thanks ... I have fixed this too.  I could have sworn I fixed this when
Assefa reorganized the libjpeg a bit, but apparently I didn't.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jbaird at ku.edu  Tue Apr 29 21:34:27 2003
From: jbaird at ku.edu (Jay Baird)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Static gdal
Message-ID: <BAD49253.1A%jbaird@ku.edu>

when including gdal as a static lib, what all needs to be included in the
compilation? 

I have libgdal.a, libogr.a, cpl.a, and libproj.a, and the headers:
gdal.h 
gdal_priv.h 
gdal_frmts.h 

an when compiling I get the following:
ld: Undefined symbols:
_GDALAllRegister 
_GDALClose 
_GDALOpen 
GDALDataset::GetRasterCount()
GDALDataset::GetRasterXSize()
GDALDataset::GetRasterYSize()

so is there anything specific i'm missing in my includes and libraries?

Thanks in advance, 

Jay


From warmerdam at pobox.com  Wed Apr 30 00:47:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Static gdal
In-Reply-To: <BAD49253.1A%jbaird@ku.edu>
References: <BAD49253.1A%jbaird@ku.edu>
Message-ID: <3EAF5576.10605@pobox.com>

Jay Baird wrote:
> when including gdal as a static lib, what all needs to be included in the
> compilation? 
> 
> I have libgdal.a, libogr.a, cpl.a, and libproj.a, and the headers:
> gdal.h 
> gdal_priv.h 
> gdal_frmts.h 
> 
> an when compiling I get the following:
> ld: Undefined symbols:
> _GDALAllRegister 
> _GDALClose 
> _GDALOpen 
> GDALDataset::GetRasterCount()
> GDALDataset::GetRasterXSize()
> GDALDataset::GetRasterYSize()
> 
> so is there anything specific i'm missing in my includes and libraries?

Jay,

For whatever reason it would appear that nothing is working right.  If
you are including libgdal.a you should be getting all of these.
Depending on how you build you will also like need
gdal/ogr/ogrsf_frmts/ogrsf_frmts.a, but that doesn't explain the problem.

However, in my opinion it is a bad idea to try and statically link GDAL.
Any particular reason you are trying to?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Wed Apr 30 06:07:20 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: image data flushing (clean rebuild needed)
In-Reply-To: <3E76B88B.7020605@pobox.com>
References: <3E75F7A9.DC0331CA@atlantis-scientific.com> <3E76437C.9060203@pobox.com> <3E765839.8C8C0586@atlantis-scientific.com> <3E76B88B.7020605@pobox.com>
Message-ID: <20030430100720.GA17319@ak4719.spb.edu>

Frank,

On Tue, Mar 18, 2003 at 01:11:23AM -0500, Frank Warmerdam wrote:
> Gillian was encountering a problem where some formats implemented on top the
> RawRasterBand and related classes were not properly fflushing data to disk
> when the GDALRasterBand::FlushCache() method was called.
> 
> To correct this I made the GDALRasterBand::FlushCache() method virtual and
> implemented it (to call VSIFFlussh()) for the RawRasterBand class.   As
> a result of changing the method to be virtual anyone updating GDAL from CVS
> should do a clean build (make clean; make).  Any change to the virtual
> function table requires a complete recompile.

I have found a problem with this method. Many raw datasets close image
file in dataset destructors and RawRasterBand::FlushCache() called for the
already closed file. Probably VSIFFlush() call should be moved to
IWriteBlock() method for those datasets which cause problems?



-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Wed Apr 30 09:10:35 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: image data flushing (clean rebuild needed)
In-Reply-To: <20030430100720.GA17319@ak4719.spb.edu>
References: <3E75F7A9.DC0331CA@atlantis-scientific.com> <3E76437C.9060203@pobox.com> <3E765839.8C8C0586@atlantis-scientific.com> <3E76B88B.7020605@pobox.com> <20030430100720.GA17319@ak4719.spb.edu>
Message-ID: <3EAFCB4B.5040209@pobox.com>

Andrey Kiselev wrote:
> Frank,
> 
> On Tue, Mar 18, 2003 at 01:11:23AM -0500, Frank Warmerdam wrote:
> 
>>Gillian was encountering a problem where some formats implemented on top the
>>RawRasterBand and related classes were not properly fflushing data to disk
>>when the GDALRasterBand::FlushCache() method was called.
>>
>>To correct this I made the GDALRasterBand::FlushCache() method virtual and
>>implemented it (to call VSIFFlussh()) for the RawRasterBand class.   As
>>a result of changing the method to be virtual anyone updating GDAL from CVS
>>should do a clean build (make clean; make).  Any change to the virtual
>>function table requires a complete recompile.
> 
> 
> I have found a problem with this method. Many raw datasets close image
> file in dataset destructors and RawRasterBand::FlushCache() called for the
> already closed file. Probably VSIFFlush() call should be moved to
> IWriteBlock() method for those datasets which cause problems?

Andrey,

Good point.  I don't think moving VSIFFlush() to IWriteBlock() is a good
idea because fflush() can potentially cause a substantial pause as data
is written to physical disk, thus screwing up the benefits of write buffering
on the stream.

Instead, I would like you to change things so that RawRasterBand keeps a
"dirty" flag indicating there is unflushed output written, this flag should
be set true in IWriteBlock() but initialized to false.  In
RawRasterBand::FlushCache() only do the VSIFFlush() call if the flag is true,
and then clear it of course.

This will ensure that file level flushing is only done when there is something
pending.  Dataset classes derived from RawDataset (or otherwise using
RawRasterBand) just need to call FlushCache() in their destructors before
closing the file.

Thanks for taking care of this.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sylvain.rioux at softmaptech.com  Wed Apr 30 10:49:07 2003
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] 1 and 4 bits image
Message-ID: <NEBBJBLMOMCEDMBAMIFAMEFHCGAA.sylvain.rioux@softmaptech.com>

Hi,

I am having trouble with 16-colors bitmaps (4 bits) and i was wondering at
how GDAL manages this format. I get a bitmap where the pixels values seem to
have been slighly shifted and the result is far from what i expected. This
problem does also occur with monochrome bitmaps. So far i successfully read
256 colors bitmaps and, gifs, jpegs, and the other raster formats supported
by GDAL.It seems clear to me that the fact that the pixels are defined on 1
or 4 bits rather than a byte causes this misalignment.

I'm using Windows and my current procedure is to use a BITMAPINFO structure,
and fill the pixel values buffer with GDALDataset::RasterIO(...). This works
for all the raster images i tried. So, to get to the point, i want to know
how RasterIO actually fills the buffer when reading 4 bits bitmap.

Thanks.
Sylvain Rioux

Les technologies SoftMap (2002) inc.
400, boul. Jean-Lesage, bureau 540
Qu?bec (Qu?bec)
Canada G1K 8W1

T?l. : (418) 523-2929, poste 304
T?l?c. : (418) 523-7979
sylvain.rioux@softmaptech.com
www.softmaptech.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030430/cf42304c/attachment.html
From warmerdam at pobox.com  Wed Apr 30 11:07:51 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] 1 and 4 bits image
In-Reply-To: <NEBBJBLMOMCEDMBAMIFAMEFHCGAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFAMEFHCGAA.sylvain.rioux@softmaptech.com>
Message-ID: <3EAFE6C7.90501@pobox.com>

Sylvain Rioux wrote:
> Hi,
>  
> I am having trouble with 16-colors bitmaps (4 bits) and i was wondering 
> at how GDAL manages this format. I get a bitmap where the pixels values 
> seem to have been slighly shifted and the result is far from what i 
> expected. This problem does also occur with monochrome bitmaps. So far i 
> successfully read 256 colors bitmaps and, gifs, jpegs, and the other 
> raster formats supported by GDAL.It seems clear to me that the fact that 
> the pixels are defined on 1 or 4 bits rather than a byte causes this 
> misalignment.
>  
> I'm using Windows and my current procedure is to use a BITMAPINFO 
> structure, and fill the pixel values buffer with 
> GDALDataset::RasterIO(...). This works for all the raster images i 
> tried. So, to get to the point, i want to know how RasterIO actually 
> fills the buffer when reading 4 bits bitmap.

Sylvain,

Currently it looks as though GDAL will translate TIFF files with less than
8 bits per pixel, and more than 1 via the libtiff RGBA interface. That is
expand it to four 8bit bands.  There is a special case for 1 bit data which
just expands it to 8bit data.  I don't find alot of 2, or 4 bit TIFF files,
but if necessary the tiff driver could be modified to expand 2 and 4 bit
files to 8 bit, like the 1 bit case.

Note that 1 bit files are expanded to an 8bit band that happens to only
have the values 0 and 1.

Best reards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Apr 30 13:22:43 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Re: datum shift with PROJ4 in GDAL
In-Reply-To: <B3CB5AFD4126584AB4CF3DD45B267A530A7F9A@user06-machine.sed.ara.com>
References: <B3CB5AFD4126584AB4CF3DD45B267A530A7F9A@user06-machine.sed.ara.com>
Message-ID: <3EB00663.7060204@pobox.com>

Brian Marchand wrote:
> Frank,
> 
> Thanks for the reply. I had performed the steps you mentioned when
> testing the command line versions. However, I use GDAL and therefore
> PROJ.4 in an application that is delivered to multiple users. I didn't
> want to set an environment variable on the user's (windows) machine so I
> was looking for a programmatic way to tell PROJ.4 where to look for
> these files. 
> 
> When I was poking around in the PROJ4 code I found the pj_set_finder
> function that allows you to pass in a pointer to a function that
> performs this task.  I was wondering if there was an interface in GDAL
> that passed this capability on.  I didn't see one.
> 
> What I ended up doing was copy some of your code that loads PROJ4
> function symbols from the DLL so I can get a pointer to the
> pj_set_finder function.
> 
> It looks something like this;
> 
> static void (*my_pj_set_finder)( const char *(*)(const char *) ); 
> my_pj_set_finder = (void (*)( const char* (*)(const char*)) )
> 	CPLGetSymbol("proj.dll", "pj_set_finder" );
> if( my_pj_set_finder )
> {
> 	// call the function
> }
> 
> Anyways, it seems to work fine. If there is a better way to do this I
> would definitely appreciate hearing about it.

Brian,

I understand your point.  Currently GDAL doesn't necessarily know where
the PROJ.4 data files were installed so it is hard for it to point the
finder appropriately.  Could you file this request in bugzilla against
GDAL?  I will look into a smoother method of integration.

This might includes having GDAL force PROJ.4 to use CPLFindFile() with a
particular domain (ie. "proj") so that applications can use the CPL finder
logic to control where to look.  Furthermore, I might make it so that GDAL
looks in the main GDAL data directory for PROJ.4 support files, so when
preparing a distribution people can dump all the GDAL support data files, and
PROJ.4 support data files all in one place and have them be found.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Apr 30 13:31:51 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Call for FAQ Entries, other docs developments
Message-ID: <3EB00887.3090506@pobox.com>

Folks,

This is a request to the user community for contributions to the GDAL FAQ.
The ideal submission would not directly duplicate information already on the
main GDAL web page, would actually be an issue lots of people run into, and
would include an answer to the question.

If you email them directly to me mailto:warmerdam@pobox.com I will integrate
them into the document if I feel they are appropriate.  The current FAQ is at:

   http://www.remotesensing.org/gdal/faq.html

I would also note that I have added simple "see also" topics for most of the
GDAL C API today, that now point to the related C++ API methods so it is
much easier to use the GDAL C API.  The C API is available at:

   http://www.remotesensing.org/gdal/gdal_h.html

I am also working on docs for the new warp api, and would like to return and
flesh out the CPL level functions.  DM Solutions has also implemented C API
documentation for OGR:

   http://gdal.velocet.ca/projects/opengis/ogrhtml/ogr__api_8h.html

I would like to have an OGR API tutorial similar to the GDAL one.  If anyone
is interested in writing one up in a similar style to the GDAL one
(http://www.remotesensing.org/gdal/gdal_tutorial.html) I would appreciate it.

Good developer documentation is intended to be one of the things that
differentiates GDAL from more casual geospatial data API efforts.  Hopefully
we can also make more progress in the end-user utility documentation at some
point.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jmt at twilley.org  Wed Apr 30 15:06:35 2003
From: jmt at twilley.org (Jack Twilley)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Call for FAQ Entries, other docs developments
In-Reply-To: <3EB00887.3090506@pobox.com> (Frank Warmerdam's message of
 "Wed, 30 Apr 2003 13:31:51 -0400")
References: <3EB00887.3090506@pobox.com>
Message-ID: <8665ovhkjo.fsf@duchess.twilley.org>

The only FAQ entries I would need would be example read and write
programs for each of the dataset types, to see how they're different
and to avoid trial-and-error.  The general example helps, but it'd be
nice to have some discussion of the specifics.

Other than that, it's nice.

Jack.
-- 
Jack Twilley
jmt at twilley dot org
http colon slash slash www dot twilley dot org slash tilde jmt slash
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030430/8e263353/attachment.bin
From zhang at aero.und.edu  Wed Apr 30 16:01:52 2003
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] proj4
Message-ID: <3EB02BB0.5010402@aero.und.edu>

Hi,

I just found out that the gdal I'm using is not linked to Proj4 and I 
can not find any definition in the GDAL configure file. How can I link 
them together? Thanks.

Xiaodong


From dron at ak4719.spb.edu  Wed Apr 30 14:13:53 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] 1 and 4 bits image
In-Reply-To: <NEBBJBLMOMCEDMBAMIFAMEFHCGAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFAMEFHCGAA.sylvain.rioux@softmaptech.com>
Message-ID: <20030430181352.GA9645@ak4719.spb.edu>

Silvain,

On Wed, Apr 30, 2003 at 10:49:07AM -0400, Sylvain Rioux wrote:
> I am having trouble with 16-colors bitmaps (4 bits) and i was wondering at
> how GDAL manages this format. I get a bitmap where the pixels values seem to
> have been slighly shifted and the result is far from what i expected. This
> problem does also occur with monochrome bitmaps. So far i successfully read
> 256 colors bitmaps and, gifs, jpegs, and the other raster formats supported
> by GDAL.It seems clear to me that the fact that the pixels are defined on 1
> or 4 bits rather than a byte causes this misalignment.

What file format do you mean as a ``bitmap''? MS Windows BMP?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jbaird at ku.edu  Wed Apr 30 17:07:52 2003
From: jbaird at ku.edu (Jay Baird)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] Static gdal
In-Reply-To: <3EAF5576.10605@pobox.com>
Message-ID: <BAD5A558.3D%jbaird@ku.edu>



> 
>> >However, in my opinion it is a bad idea to try and statically link GDAL.
>> >Any particular reason you are trying to?
> 
> I?m trying to build a program in OS X that uses GDAL and most people that use
> OS X don?t like compiling, so I?d like to just compile everything in (at the
> risk of the binary being huge), that way everyone is happy and it just works.
> 
> OS X does have this nifty feature called Frameworks that allows you to put the
> headers and lib into a package that you can link to at run time that can
> travel with the binary, but I?m not sure where to begin turning GDAL into a
> framework for OS X. I?ll look into it and possibly maintain it once I get the
> details of how it works on the OS X side of things.
> 
> Cheers,
> 
> Jay

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030430/d19b450f/attachment.html
From zhang at aero.und.edu  Wed Apr 30 18:50:29 2003
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:48:50 2007
Subject: [Gdal-dev] proj4
References: <3EB02BB0.5010402@aero.und.edu> <3EB17B09.7080106@pobox.com>
Message-ID: <3EB05335.8080908@aero.und.edu>

Hi Frank,

The Proj.4 has been installed and its library libproj.so is in the 
searching path defined by LD_LIBRARY_PATH. What else could be wrong.

Xiaodong

Frank Warmerdam wrote:

> Xiaodong Zhang wrote:
>
>> Hi,
>>
>> I just found out that the gdal I'm using is not linked to Proj4 and I 
>> can not find any definition in the GDAL configure file. How can I 
>> link them together? Thanks.
>
>
> Xiaodong,
>
> Normally GDAL isn't directly linked to PROJ.4, it loads the PROJ.4
> DLL/.so at runtime.  Just build and install PROJ.4 on your system and
> hopefully it should just work.
>
> This might be a good one for the FAQ!
>
> Best regards,
>



