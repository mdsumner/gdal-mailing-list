From hsumanto at vpac.org  Thu Sep  1 01:21:57 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Thu Sep  1 12:40:38 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1314821111.88515.YahooMailNeo@web36903.mail.mud.yahoo.com>
Message-ID: <1180082310.77792.1314854517697.JavaMail.root@mail.vpac.org>

>>2) 
>>I assume your file is in a projected CRS?

Yes, it projected CRS.

>>In any case, the current implementation is not 100% CF compliant.? GDAL can read them (through custom tags), but other software cannot.?? 
>>I have submitted a patch to fix geographic CRS only.
?
I have tried your patch for fixing geographic CRS, it does add back the coordinate variables: lat and lon in the epsg4326-patch.nc

>>Please add this information to existing bug #2893 (which I have renamed tonetcdf driver does not read and write CF-1.0 coordinate system properly for projected CRS), 
>>along with your file (which was stripped by the mailing list)

I have added this information to ticket #2893, so that the projection coordinate variables: x and y will be added into netcdf file.

>>BTW, there is a nifty CF compliance checker (python script and online checker) which I have added to the wiki. Please test your file with it. It's possible that lambert_conformal_conic:standard_parallel_1 is valid >>CF, it needs to be tested.

I have tested both files with the CF compliance checker, both files pass the checking 
but as soon I tried to view the grid dataset (the GDAL netCDF) in Gridviewer in NetCDF Tools (4.2), it won't be recognized as grid because 
the Gridviewer having problem finding projection coordinate variables: x and y (we don't have them) and i suspect it is also having problem with standard_parallel_1 and standard_parallel_2 attributes,
but as soon as I added the projection coordinate variables: x and y and also fix
lambert_conformal_conic:standard_parallel_1 = -18.f ;
lambert_conformal_conic:standard_parallel_2 = -36.f ;
to
lambert_conformal_conic:standard_parallel = -18.f,-36.f ; 
the grid dataset is viewable and recognized as gridded dataset by Gridviewer in NetCDF Tools (4.2).


Regards,

Hendy

===========================
BEFORE geographic CRS PATCH
===========================
netcdf epsg4326 {
dimensions:
        x = 8990 ;
        y = 6284 ;
variables:
        char GDAL_Geographics ;
                GDAL_Geographics:Northernmost_Northing = -36.4865439284304 ;
                GDAL_Geographics:Southernmost_Northing = -38.4371430324099 ;
                GDAL_Geographics:Easternmost_Easting = 147.286731249335 ;
                GDAL_Geographics:Westernmost_Easting = 144.496170150548 ;
                GDAL_Geographics:spatial_ref = "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4326\"]]" ;
                GDAL_Geographics:GeoTransform = "144.4961701505481 0.0003104072412443472 0 -36.48654392843041 0 -0.0003104072412443472 " ;
                GDAL_Geographics:grid_mapping_name = "Geographics Coordinate System" ;
                GDAL_Geographics:long_name = "Grid_latitude" ;
        byte Band1(y, x) ;
                Band1:grid_mapping = "GDAL_Geographics" ;
                Band1:long_name = "GDAL Band Number 1" ;

// global attributes:
                :Conventions = "CF-1.0" ;
}

===========================
AFTER geographic CRS PATCH
===========================
netcdf epsg4326-patch {
dimensions:
        lon = 8990 ;
        lat = 6284 ;
variables:
        char crs ;
                crs:grid_mapping_name = "latitude_longitude" ;
                crs:longitude_of_prime_meridian = 0. ;
                crs:semi_major_axis = 6378137. ;
                crs:inverse_flattening = 298.257223563 ;
        double lat(lat) ;
                lat:standard_name = "latitude" ;
                lat:long_name = "latitude" ;
                lat:units = "degrees_north" ;
        double lon(lon) ;
                lon:standard_name = "longitude" ;
                lon:long_name = "longitude" ;
                lon:units = "degrees_east" ;
        byte Band1(lat, lon) ;
                Band1:grid_mapping = "crs" ;
                Band1:long_name = "GDAL Band Number 1" ;

// global attributes:
                :Conventions = "CF-1.0" ;
                :AREA_OR_POINT = "Area" ;
}






----- Original Message -----
From: Hendy Sumanto <hsumanto@vpac.org>
To: gdal-dev@lists.osgeo.org
Cc: 
Sent: Wednesday, August 31, 2011 1:23:54 AM
Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention

Hi Etienne,

I have a few items which I would like to put as new topics in the wiki entry but I think I better describe them here first before putting any entry or creating tickets.

1. As part of the improvement to the NetCDF driver, is it possible to make request to implement the Create method for the driver so that tool such as gdalwarp can output as NetCDF output.

2. Recently I was trying to serve the NetCDF dataset (which were created by gdal_translate geotiff LANDSAT dataset into NetCDF)
using THREDDS data server. When I try to access it via WMS using viewer such as Godiva2, I was not able to view the dataset correctly.

When I used the netCDF toolsUI to check the NetCDF dataset, it is not recognized as a grid by NetCDF Tools (4.2).? 

Looking at this documentation (http://www.unidata.ucar.edu/software/netcdf-java/reference/StandardCoordinateTransforms.html),
in order for grid data to be viewable, the NetCDF dataset must:
a) define x and y projection coordinate variables, using the correct projection units, typically km on the projection plane.
b) define your projection dummy variable which has an attribute "grid_mapping_name"
c) refer to the projection in your data variables with the "grid_mapping" attribute.

Checking on the GDAL netCDF, it only define x and y dimensions but not x and y projection coordinate variables (point a is not followed).

Thus, I wondering whether other people have experienced the same issue as what I am having.

Then I just tried to: 
-generate its CDL by ncdump the GDAL netCDF file into CDL
-and the define x and y projection coordinate variables (as shown below) into the CDL
? ? double y(y) ;
? ? ? ? y:units = "m" ;
? ? ? ? y:standard_name = "projection_y_coordinate" ;
? ? ? ? y:long_name = "y coordinate of projection" ;
? ? double x(x) ;
? ? ? ? x:units = "m" ;
? ? ? ? x:standard_name = "projection_x_coordinate" ;
? ? ? ? x:long_name = "x coordinate of projection" ;
-regenerate the netCDF file from the modified CDL using ncgen
-populate the y coordinate variable in the NetCDF file with
? ? ? ? ymin, ymin+resolution, ymin+2*resolution, ...
-populate the x coordinate variable with
? ? ? ? xmin, xmin+resolution, xmin+2*resolution, ...
-if I then serve the modified NetCDF dataset again using THREDDS data server, now it can be viewed correctly.

Note: xmin, ymin are the lower left corner and resolution is the raster pixel size.

Thus, my questions:
i)Is there a specific reason why the current driver do not define the x and y projection coordinate variables but only defining x and y dimensions. 
For the dataset to be viewable using tools such as netCDF toolsUI or when the dataset are served via THREDDS dataset, we might have to add projection coordinate variables and the correct values
into the netCDF file.
ii)For lambert conformal conic projection with more than one standard parallel values, GDAL netCDF file is showing 
lambert_conformal_conic:standard_parallel_1 = -18.f ;
lambert_conformal_conic:standard_parallel_2 = -36.f ;
but the correct one (for the dataset to be viewable using toolsUI or THREDDS) should be
lambert_conformal_conic:standard_parallel = -18.f,-36.f ; 

Could you please please comment on 1, 2(i) and 2(ii)? 

The attached files:
tile.nc - GDAL netCDF file
tile-fixed-new.nc - the one I just tried to fix and can be viewed in netCDF toolsUI or served in THREDDS

Regards,

Hendy

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Hendy Sumanto
Software Developer

Victorian Partnership for Advanced Computing (VPAC)
Innovation Powered by Advanced Computing
http://www.vpac.org
t: +61 3 9020 0191 (TC)
t: +61 3 9647 5437 (FB)
f: +61 3 9646 7787
From heng.feng at aircominternational.com  Thu Sep  1 02:16:19 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Sep  1 13:38:19 2011
Subject: [gdal-dev] GDALWARP Chunk Problem (Tiling Effect)
Message-ID: <1314857779465-6749055.post@n2.nabble.com>

Hi,

I have used the (OSGeo4W) GDALWARP command to warp some height data image
files (NTv2 transformation). When displaying one warped height data in our
own application, there appear to be visible tiles on the image and some
misalignments exist between those square tiles (chunks). 

After warping, I did make some conversion on the height data from the
original format (ERDAS Imagine) to another format, which can be accepted by
our own application. However, I think this tiling effect is not caused by
the format conversion, but most likely by something in the GDALWARP command.
The reason for saying this is that I have done the same format conversion on
the original height data without warping and there are no tiling effects at
all for the converted height data when shown in our application. As
attached, please see the two screenshots for the same area of the height
data being displayed in our application. One is with warping while the other
is without warping.

I seem to remember that the GDALWAP command does the chunk warping. Could
this be the reason why? 

The GDALWARP command I have been using is something like this:

gdalwarp --config GDAL_CACHEMAX 250 -wm 250 -co COMPRESS=LZW -co BIGTIFF=YES
-co TILED=YES -multi -overwrite -s_srs "+proj=tmerc +lat_0=0 +lon_0=12
+k=1.000000 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam
+nadgrids=c:\height \BETA2007.gsb,null +units=m +wktext" -t_srs "+proj=utm
+datum=WGS84 +zone=32" "c:\height\test.img" "c:\height\test.tif"

I have tried the GDALWARP command on the same height data by taking away all
the above command options and got the same tiling effect. Also I have
managed to open the warped height map data (tif format) in another GIS
application and could see the tiling effects as well although the effect is
not as visible as seen in our own application. I think this is because the
color interpretation type is gray in that warped height tif file. 

The other thing worth mentioning is: with the same warping and conversion
process, lower resolution height data (or much smaller height data) do not
seem to have such visible tiling effects.

Anyway, does anyone here have any clue about this? And is there any way to
get rid of the tiling effects in the warped height data?

Many thanks & BR,
Chris Feng





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6749055.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From heng.feng at aircominternational.com  Thu Sep  1 02:19:15 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Sep  1 13:41:25 2011
Subject: [gdal-dev] Re: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314857779465-6749055.post@n2.nabble.com>
References: <1314857779465-6749055.post@n2.nabble.com>
Message-ID: <1314857955159-6749062.post@n2.nabble.com>

http://osgeo-org.1803224.n2.nabble.com/file/n6749062/gdalwarp_chunk_problem.doc
gdalwarp_chunk_problem.doc 
The attached file did not seem to be uploaded, so here it is.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6749062.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Thu Sep  1 02:27:28 2011
From: rush at winkey.org (Brian Case)
Date: Thu Sep  1 13:50:14 2011
Subject: [gdal-dev] GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314857779465-6749055.post@n2.nabble.com>
References: <1314857779465-6749055.post@n2.nabble.com>
Message-ID: <1314858448.8205.20.camel@octopi>

Chris,

Try passing gdalwarp -et 0.0

I am also suspicious of doing compression with the warp. you might want
to do that as a second step

Brian

On Wed, 2011-08-31 at 23:16 -0700, heng.feng wrote:
> Hi,
> 
> I have used the (OSGeo4W) GDALWARP command to warp some height data image
> files (NTv2 transformation). When displaying one warped height data in our
> own application, there appear to be visible tiles on the image and some
> misalignments exist between those square tiles (chunks). 
> 
> After warping, I did make some conversion on the height data from the
> original format (ERDAS Imagine) to another format, which can be accepted by
> our own application. However, I think this tiling effect is not caused by
> the format conversion, but most likely by something in the GDALWARP command.
> The reason for saying this is that I have done the same format conversion on
> the original height data without warping and there are no tiling effects at
> all for the converted height data when shown in our application. As
> attached, please see the two screenshots for the same area of the height
> data being displayed in our application. One is with warping while the other
> is without warping.
> 
> I seem to remember that the GDALWAP command does the chunk warping. Could
> this be the reason why? 
> 
> The GDALWARP command I have been using is something like this:
> 
> gdalwarp --config GDAL_CACHEMAX 250 -wm 250 -co COMPRESS=LZW -co BIGTIFF=YES
> -co TILED=YES -multi -overwrite -s_srs "+proj=tmerc +lat_0=0 +lon_0=12
> +k=1.000000 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam
> +nadgrids=c:\height \BETA2007.gsb,null +units=m +wktext" -t_srs "+proj=utm
> +datum=WGS84 +zone=32" "c:\height\test.img" "c:\height\test.tif"
> 
> I have tried the GDALWARP command on the same height data by taking away all
> the above command options and got the same tiling effect. Also I have
> managed to open the warped height map data (tif format) in another GIS
> application and could see the tiling effects as well although the effect is
> not as visible as seen in our own application. I think this is because the
> color interpretation type is gray in that warped height tif file. 
> 
> The other thing worth mentioning is: with the same warping and conversion
> process, lower resolution height data (or much smaller height data) do not
> seem to have such visible tiling effects.
> 
> Anyway, does anyone here have any clue about this? And is there any way to
> get rid of the tiling effects in the warped height data?
> 
> Many thanks & BR,
> Chris Feng
> 
> 
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6749055.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Heng.Feng at AIRCOMINTERNATIONAL.COM  Thu Sep  1 02:36:53 2011
From: Heng.Feng at AIRCOMINTERNATIONAL.COM (Heng Feng)
Date: Thu Sep  1 14:00:15 2011
Subject: [gdal-dev] GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314858448.8205.20.camel@octopi>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
Message-ID: <91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>

?Thanks for your prompt reply, Brian.

I did try GDALWARP command on the same height data without the compression option and the tiling effect still exists, but I will try the option "-et 0.0" and let you know it goes. 

BR,
Chris


Home: www.aircominternational.com/Home-v2 
About Us: www.aircominternational.com/About-Us-v2 
Consultancy: www.aircominternational.com/Consultancy-v2 
Products: www.aircominternational.com/Products-v2 
I-View: www.aircominternational.com/I-VIEW-v2 

Disclaimer: 
This 
e-mail message is confidential and should not be used by, or disclosed to, 
anyone except the addressee. If you receive this message in error, please advise 
us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure 
or error free, we do not accept responsibility for changes to any e-mail which 
occur after it has been sent. Attachments to this e-mail may contain software 
viruses which could damage your systems. You should therefore virus-check all 
attachments before opening. AIRCOM may monitor incoming and outgoing emails 
through its networks and by responding to this email, you consent to such 
monitoring. The views and opinions expressed in this e-mail are those of the 
author only and not of AIRCOM. We do not intend to enter into any legal 
commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls 
Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in 
England No. 3052022. VAT number 811 5323 68.
 
Save a tree. Don't print this e-mail unless it's really 
necessary

-----Original Message-----
From: Brian Case [mailto:rush@winkey.org] 
Sent: 01 September 2011 07:27
To: Heng Feng
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDALWARP Chunk Problem (Tiling Effect)

Chris,

Try passing gdalwarp -et 0.0

I am also suspicious of doing compression with the warp. you might want to do that as a second step

Brian

On Wed, 2011-08-31 at 23:16 -0700, heng.feng wrote:
> Hi,
> 
> I have used the (OSGeo4W) GDALWARP command to warp some height data 
> image files (NTv2 transformation). When displaying one warped height 
> data in our own application, there appear to be visible tiles on the 
> image and some misalignments exist between those square tiles (chunks).
> 
> After warping, I did make some conversion on the height data from the 
> original format (ERDAS Imagine) to another format, which can be 
> accepted by our own application. However, I think this tiling effect 
> is not caused by the format conversion, but most likely by something in the GDALWARP command.
> The reason for saying this is that I have done the same format 
> conversion on the original height data without warping and there are 
> no tiling effects at all for the converted height data when shown in 
> our application. As attached, please see the two screenshots for the 
> same area of the height data being displayed in our application. One 
> is with warping while the other is without warping.
> 
> I seem to remember that the GDALWAP command does the chunk warping. 
> Could this be the reason why?
> 
> The GDALWARP command I have been using is something like this:
> 
> gdalwarp --config GDAL_CACHEMAX 250 -wm 250 -co COMPRESS=LZW -co 
> BIGTIFF=YES -co TILED=YES -multi -overwrite -s_srs "+proj=tmerc 
> +lat_0=0 +lon_0=12
> +k=1.000000 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam 
> +nadgrids=c:\height \BETA2007.gsb,null +units=m +wktext" -t_srs 
> +"+proj=utm
> +datum=WGS84 +zone=32" "c:\height\test.img" "c:\height\test.tif"
> 
> I have tried the GDALWARP command on the same height data by taking 
> away all the above command options and got the same tiling effect. 
> Also I have managed to open the warped height map data (tif format) in 
> another GIS application and could see the tiling effects as well 
> although the effect is not as visible as seen in our own application. 
> I think this is because the color interpretation type is gray in that warped height tif file.
> 
> The other thing worth mentioning is: with the same warping and 
> conversion process, lower resolution height data (or much smaller 
> height data) do not seem to have such visible tiling effects.
> 
> Anyway, does anyone here have any clue about this? And is there any 
> way to get rid of the tiling effects in the warped height data?
> 
> Many thanks & BR,
> Chris Feng
> 
> 
> 
> 
> 
> --
> View this message in context: 
> http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-E
> ffect-tp6749055p6749055.html Sent from the GDAL - Dev mailing list 
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


 

From heng.feng at aircominternational.com  Thu Sep  1 02:58:32 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Sep  1 14:23:05 2011
Subject: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
Message-ID: <1314860312662-6749118.post@n2.nabble.com>

Tried the "-et 0.0" option with no luck :(

Any other idea about how to get rid of this tiling effect?

Thanks,
Chris


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6749118.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Thu Sep  1 03:05:33 2011
From: rush at winkey.org (Brian Case)
Date: Thu Sep  1 14:30:32 2011
Subject: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314860312662-6749118.post@n2.nabble.com>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
	<1314860312662-6749118.post@n2.nabble.com>
Message-ID: <1314860733.8205.24.camel@octopi>

Chris

have you tryed other kernels? cubic, etc..

read this too
http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08

perhaps someone else may have other ideas.

Brian


On Wed, 2011-08-31 at 23:58 -0700, heng.feng wrote:
> Tried the "-et 0.0" option with no luck :(
> 
> Any other idea about how to get rid of this tiling effect?
> 
> Thanks,
> Chris
> 
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6749118.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Heng.Feng at AIRCOMINTERNATIONAL.COM  Thu Sep  1 03:19:18 2011
From: Heng.Feng at AIRCOMINTERNATIONAL.COM (Heng Feng)
Date: Thu Sep  1 14:52:27 2011
Subject: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314860733.8205.24.camel@octopi>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
	<1314860312662-6749118.post@n2.nabble.com>
	<1314860733.8205.24.camel@octopi>
Message-ID: <91F3636CDE7F30469B93B2DBFA6E72091905C0DC@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>

?Thanks for the link, Brian. I will take a look at it.



Home: www.aircominternational.com/Home-v2 
About Us: www.aircominternational.com/About-Us-v2 
Consultancy: www.aircominternational.com/Consultancy-v2 
Products: www.aircominternational.com/Products-v2 
I-View: www.aircominternational.com/I-VIEW-v2 

Disclaimer: 
This 
e-mail message is confidential and should not be used by, or disclosed to, 
anyone except the addressee. If you receive this message in error, please advise 
us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure 
or error free, we do not accept responsibility for changes to any e-mail which 
occur after it has been sent. Attachments to this e-mail may contain software 
viruses which could damage your systems. You should therefore virus-check all 
attachments before opening. AIRCOM may monitor incoming and outgoing emails 
through its networks and by responding to this email, you consent to such 
monitoring. The views and opinions expressed in this e-mail are those of the 
author only and not of AIRCOM. We do not intend to enter into any legal 
commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls 
Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in 
England No. 3052022. VAT number 811 5323 68.
 
Save a tree. Don't print this e-mail unless it's really 
necessary

-----Original Message-----
From: Brian Case [mailto:rush@winkey.org] 
Sent: 01 September 2011 08:06
To: Heng Feng
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)

Chris

have you tryed other kernels? cubic, etc..

read this too
http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08

perhaps someone else may have other ideas.

Brian


On Wed, 2011-08-31 at 23:58 -0700, heng.feng wrote:
> Tried the "-et 0.0" option with no luck :(
> 
> Any other idea about how to get rid of this tiling effect?
> 
> Thanks,
> Chris
> 
> 
> --
> View this message in context: 
> http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-E
> ffect-tp6749055p6749118.html Sent from the GDAL - Dev mailing list 
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


 

From peifer at gmx.eu  Thu Sep  1 03:38:43 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep  1 15:05:24 2011
Subject: [gdal-dev] Re: ogr2ogr - output WKT to console?
In-Reply-To: <201108312328.03774.even.rouault@mines-paris.org>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EA2D4.30803@gmx.eu>
	<201108312328.03774.even.rouault@mines-paris.org>
Message-ID: <4E5F3683.1020308@gmx.eu>

On 31/08/2011 23:28, Even Rouault wrote:
> ... But it was easy to also support
> /dev/stdout as an alias for /vsistdout/. Added in r23016.
>

Works as expected. Thanks for your time. Hermann
From yjacolin at free.fr  Thu Sep  1 03:30:27 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu Sep  1 15:38:51 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation) [SEC=UNCLASSIFIED]
In-Reply-To: <5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>
References: <201108301322.46312.yjacolin@free.fr>
	<201109010138.11748.even.rouault@mines-paris.org>
	<5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>
Message-ID: <201109010930.27348.yjacolin@free.fr>

Hello,

Thanks Even! I did not test it yet, I will see between ecwhed and the python 
script you wrote.

Le jeudi 01 septembre 2011 01:56:04, Pinner, Luke a ?crit :
> Does this apply to the 4.x read-only version of the ERDAS ECW/JP2 SDK as
> well as the old 3.3 SDK?
good question :)

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From ole.moller.nielsen at gmail.com  Thu Sep  1 05:04:45 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Thu Sep  1 16:36:02 2011
Subject: [gdal-dev] NotImplementedError: Wrong number of arguments for
 overloaded function 'Feature_SetField'.
Message-ID: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>

Developing on a code which relies on ogr.py and that has been running for a
while on Ubuntu 10.04, 10.10 and 11.04 I saw for the first time today the
error

....
ERROR 1: No such field: 'CONTENTS_DAMAGE_fraction'
ERROR 1: No such field: 'STRUCT_INUNDATED'
ERROR 1: No such field: 'STRUCT_LOSS_AUD'
ERROR 1: No such field: 'CONTENTS_LOSS_AUD'
ERROR 1: No such field: 'PEOPLE_AFFECTED'
.....
  File "/home/nielso/dev/riab/impact/storage/vector.py", line 426, in
write_to_file
    feature.SetField(name, data[i][name])
  File "/usr/lib/python2.7/dist-packages/osgeo/ogr.py", line 2184, in
SetField
    return _ogr.Feature_SetField(self, *args)
NotImplementedError: Wrong number of arguments for overloaded function
'Feature_SetField'.
  Possible C/C++ prototypes are:
    SetField(OGRFeatureShadow *,int,char const *)
    SetField(OGRFeatureShadow *,char const *,char const *)
    SetField(OGRFeatureShadow *,int,int)
    SetField(OGRFeatureShadow *,char const *,int)
    SetField(OGRFeatureShadow *,int,double)
    SetField(OGRFeatureShadow *,char const *,double)
    SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
    SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)



This happened after I (as an unrelated act) installed qgis 1.7 so I am
guessing GDAL got upgraded as well.
The arguments to SetField in this case are: SetField('MMI', nan)
Types are
'MMI' <type 'str'>
nan <type 'float'>

So does this mean that nan used to be supported and no longer is?
Or is it me doing something wrong.



I have seen references to this issue at

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Proposed-UTF-8-SWIG-Changes-td5575272.html
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html

but they seem to be more concerned with defining typemaps in the C
libraries. What I need to know is how to modify my
Python code so that this runs again on all relevant gdal versions.

Can anyone help, please?

Many thanks
Ole Nielsen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/1a7befb7/attachment.html
From yjacolin at free.fr  Thu Sep  1 04:39:50 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu Sep  1 16:52:37 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <4E5E48F5.7020106@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<201108311413.53186.yjacolin@free.fr> <4E5E48F5.7020106@free.fr>
Message-ID: <201109011039.51239.yjacolin@free.fr>

Le mercredi 31 ao?t 2011 16:45:09, Jean-Claude Repetto a ?crit :
> Le 31/08/2011 14:13, Yves Jacolin a ?crit :
> > Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1 Go
> > each) and 2 ECW files (2 Go each). I worked first on 2 Go ECW file, it
> > takes around 1 day to assign the projection information in the files.
> > 
> > Do you think this is normal? How can I improve this?
> 
> Since you are using Linux, you may be interested in a tool I wrote a few
> years ago :
> http://jrepetto.free.fr/ecwhed/
> 
> You can compile it manually by a command such as :
> g++ -o ecwhed -l pthread  ecwhed.cpp /usr/lib64/libecwj2.a
> 
> ( The standard procedure ./configure; make; make install is not working
> anymore. If you know the autotools, may be you can fix it).
> 
> Jean-Claude
Thanks Jean-Claude for your reply as I could build your app. Here some 
feedback:

* original data show correct header with projection information
* data made from gdal show "raw" as DATUM and PROJ using ecwhed utilities:
>Datum = RAW
>Projection = RAW

What I don't understand is that QGIS or GDAL don't find it from the original 
data. Is it possible that there is some ECW specific projection information as 
ESRI one? I saw an ecw_cs.wkt file in the gdal data dir.

Any idea?

Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From yjacolin at free.fr  Thu Sep  1 05:29:07 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu Sep  1 17:08:37 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201109011039.51239.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr> <4E5E48F5.7020106@free.fr>
	<201109011039.51239.yjacolin@free.fr>
Message-ID: <201109011129.07417.yjacolin@free.fr>

Le jeudi 01 septembre 2011 10:39:50, Yves Jacolin a ?crit :
> Le mercredi 31 ao?t 2011 16:45:09, Jean-Claude Repetto a ?crit :
> > Le 31/08/2011 14:13, Yves Jacolin a ?crit :
> > > Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1
> > > Go each) and 2 ECW files (2 Go each). I worked first on 2 Go ECW file,
> > > it takes around 1 day to assign the projection information in the
> > > files.
> > > 
> > > Do you think this is normal? How can I improve this?
> > 
> > Since you are using Linux, you may be interested in a tool I wrote a few
> > years ago :
> > http://jrepetto.free.fr/ecwhed/
> > 
> > You can compile it manually by a command such as :
> > g++ -o ecwhed -l pthread  ecwhed.cpp /usr/lib64/libecwj2.a
> > 
> > ( The standard procedure ./configure; make; make install is not working
> > anymore. If you know the autotools, may be you can fix it).
> > 
> > Jean-Claude
> 
> Thanks Jean-Claude for your reply as I could build your app. Here some
> feedback:
> 
> * original data show correct header with projection information
> 
> * data made from gdal show "raw" as DATUM and PROJ using ecwhed utilities:
> >Datum = RAW
> >Projection = RAW
> 
> What I don't understand is that QGIS or GDAL don't find it from the
> original data. Is it possible that there is some ECW specific projection
> information as ESRI one? I saw an ecw_cs.wkt file in the gdal data dir.
> 
> Any idea?
> 
> Thanks,
> 
> Y.
I know why raster data made by GDAL show "RAW" string as projection 
information, documentation explain it:
> When writing coordinate system information to ECW files, many less common 
> coordinate systems are not mapped properly. If you know the ECW name for the 
> coordinate system you can force it to be set at creation time with the PROJ 
> and DATUM creation options.

As I did not use DATUM and PROJ creation option GDAL don't add it!

Finally I saw that gdal create only an aux.xml file to store his own proj 
information and don't use the projection information from the header file. If I 
create this aux.xml file for all of my raster data it could work.

Thanks again for your help.

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From andval at hotbox.ru  Thu Sep  1 05:45:53 2011
From: andval at hotbox.ru (andval)
Date: Thu Sep  1 17:19:36 2011
Subject: [gdal-dev] read S57 files from OGR
Message-ID: <1314870353353-6749462.post@n2.nabble.com>

Hi! Sorry for my English. I trying read s-57 files by OGR. But its parsing
into geometry layers (points, lines e.t.c.) instead objects (DEPARE, COALNE
e.t.c.). CSV files drop into *.exe directory.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/read-S57-files-from-OGR-tp6749462p6749462.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Thu Sep  1 06:10:40 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep  1 17:45:46 2011
Subject: [gdal-dev] OGR GML and other drivers producing text output: stdout,
 /dev/stdout and /vsistdout/ (was: ogr2ogr - output WKT to console?)
In-Reply-To: <201109010028.56685.even.rouault@mines-paris.org>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EB388.4090202@villagis.com>
	<201109010028.56685.even.rouault@mines-paris.org>
Message-ID: <4E5F5A20.4080505@gmx.eu>

On 01/09/2011 00:28, Even Rouault wrote:
> Le jeudi 01 septembre 2011 00:19:52, Elijah Robison a ?crit :
>>
>> ogr2ogr -f "GML" "/vsistdout/"
>> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
>> feb16_polygons where objectid= 2126"
>>
>> ogr2ogr -f "KML" "/vsistdout/"
>> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
>> feb16_polygons where objectid= 2126"
>>
>> ogr2ogr -f "GeoJSON" "/vsistdout/"
>> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
>> feb16_polygons where objectid= 2126"
>
> You can also add the BNA, PGDump, GeoRSS and GPX drivers to the list
>

About the GML driver:

I was just wondering where the .xsd file is written to when using: 
ogr2ogr -f gml /vsistdout/. According to the gml file's 
xsi:schemaLocation attribute, the schema file is `.xsd', see [1]. I 
can't find `.xsd' locally.

When using /dev/stdout rather than /vsistdout/, I receive an error, 
which tells me that the schema file can't be created, see [2].

Another observation with the gml driver: stdout is defined as an alias 
for /vsistdout/ (rather than /dev/stdout). When using the alias, 
xsi:schemaLocation tells me that the schema file is `stdout.xsd', see 
[3]. I can't find `stdout.xsd' locally.


About other drivers producing text output:

There seem to be several options about how to alias (/dev/)stdout and 
/vsistdout/. The current practice is perhaps somewhat inconsistent, see 
[4]. IMO, Even's recently added /dev/stdout -> /vsistdout/ alias looks 
most appropriate, I am however not so sure about non-Unix OSs.

Finally, only drv_pgdump.html seems to mention /vsistdout/ as an option 
for writing to standard output, see [5]. Perhaps other relevant driver 
pages should also mention this option ?


Would it be worth creating a ticket (or two) related to the above 
observations?


Hermann


[1]

$ ogr2ogr -f gml /vsistdout/ test.shp
<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://ogr.maptools.org/ .xsd"
      xmlns:ogr="http://ogr.maptools.org/"
      xmlns:gml="http://www.opengis.net/gml">
   <gml:featureMember>
     <ogr:test fid="F0">
     (...)


[2]

ERROR 4: Failed to open file /dev/stdout.xsd for schema output.


[3]

$ ogr2ogr -f gml stdout test.shp
<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://ogr.maptools.org/ stdout.xsd"
      xmlns:ogr="http://ogr.maptools.org/"
      xmlns:gml="http://www.opengis.net/gml">
   <gml:featureMember>
     <ogr:test fid="F0">
     (...)


[4]

./gpx/ogrgpxdatasource.cpp:    if( EQUAL(pszFilename,"stdout") || 
EQUAL(pszFilename,"/vsistdout/"))
./gml/ogrgmldatasource.cpp:    if( EQUAL(pszFilename,"stdout") || 
EQUAL(pszFilename,"/vsistdout/"))
./kml/ogrkmldatasource.cpp:    if( EQUAL(pszName, "stdout") || 
EQUAL(pszName, "/vsistdout/") )
./csv/ogrcsvdriver.cpp:    if (strcmp(pszName, "/dev/stdout") == 0)
./bna/ogrbnadatasource.cpp:    if( EQUAL(pszFilename,"stdout") )
./georss/ogrgeorssdatasource.cpp:    if( EQUAL(pszFilename,"stdout") )
./geojson/ogrgeojsondatasource.cpp:    if( EQUAL( pszName, "stdout" ) )


[5]

$ find ogr/ -name '*.html' | xargs grep "/vsistdout/"
ogr/ogrsf_frmts/pgdump/drv_pgdump.html:to specify /vsistdout/ as output 
file to output on the standard output.<p>
ogr/ogrsf_frmts/pgdump/drv_pgdump.html:% ogr2ogr --config PG_USE_COPY 
YES -f PGDump /vsistdout/ abc.shp | psql -d my_dbname -f -
From ole.moller.nielsen at gmail.com  Thu Sep  1 06:25:17 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Thu Sep  1 18:01:09 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments for
 overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
Message-ID: <CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>

Sorry for the addition, but regarding the issue with SetField, I just had
the same error with the inputs
SetField('STRUCT_DAMAGE_fraction', 0.346734256639)

To repeat, this works on every standard Ubuntu installation I have used
(10.04, 10.10, 11.04). However, after installing qgis 1.7 on Ubuntu 11.04
this error keeps happening in our code. I don't know how to find out what
version of org we are using.

Please let me know how to work around this or if there is a patch you can
apply.

Cheers and thanks
Ole



---------- Forwarded message ----------
From: Ole Nielsen <ole.moller.nielsen@gmail.com>
Date: Thu, Sep 1, 2011 at 4:04 PM
Subject: NotImplementedError: Wrong number of arguments for overloaded
function 'Feature_SetField'.
To: gdal-dev@lists.osgeo.org
Cc: Ariel Nunez <ingenieroariel@gmail.com>, Ted Dunstone <ted@biometix.com>


Developing on a code which relies on ogr.py and that has been running for a
while on Ubuntu 10.04, 10.10 and 11.04 I saw for the first time today the
error

....
ERROR 1: No such field: 'CONTENTS_DAMAGE_fraction'
ERROR 1: No such field: 'STRUCT_INUNDATED'
ERROR 1: No such field: 'STRUCT_LOSS_AUD'
ERROR 1: No such field: 'CONTENTS_LOSS_AUD'
ERROR 1: No such field: 'PEOPLE_AFFECTED'
.....
  File "/home/nielso/dev/riab/impact/storage/vector.py", line 426, in
write_to_file
    feature.SetField(name, data[i][name])
  File "/usr/lib/python2.7/dist-packages/osgeo/ogr.py", line 2184, in
SetField
    return _ogr.Feature_SetField(self, *args)
NotImplementedError: Wrong number of arguments for overloaded function
'Feature_SetField'.
  Possible C/C++ prototypes are:
    SetField(OGRFeatureShadow *,int,char const *)
    SetField(OGRFeatureShadow *,char const *,char const *)
    SetField(OGRFeatureShadow *,int,int)
    SetField(OGRFeatureShadow *,char const *,int)
    SetField(OGRFeatureShadow *,int,double)
    SetField(OGRFeatureShadow *,char const *,double)
    SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
    SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)



This happened after I (as an unrelated act) installed qgis 1.7 so I am
guessing GDAL got upgraded as well.
The arguments to SetField in this case are: SetField('MMI', nan)
Types are
'MMI' <type 'str'>
nan <type 'float'>

So does this mean that nan used to be supported and no longer is?
Or is it me doing something wrong.



I have seen references to this issue at

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Proposed-UTF-8-SWIG-Changes-td5575272.html
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html

but they seem to be more concerned with defining typemaps in the C
libraries. What I need to know is how to modify my
Python code so that this runs again on all relevant gdal versions.

Can anyone help, please?

Many thanks
Ole Nielsen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/1c232c6f/attachment.html
From mail at marco-scheuble.de  Thu Sep  1 06:32:27 2011
From: mail at marco-scheuble.de (Marco Scheuble)
Date: Thu Sep  1 18:08:46 2011
Subject: [gdal-dev] Failed to initialize PROJ.4 with ...
Message-ID: <1314873147016-6749580.post@n2.nabble.com>

Hi all,

I got following error-message while using gdalwarp:
ERROR 6: Failed to initialize PROJ.4 with `+proj=merc+a=6378137 +b=6378137
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m+nadgri...@null
+wktext  +no_defs'.

Situation:
I've installed GDAL 1.4.4, because the CentOS on the server wouldn't take
any later version.
GDAL 1.4.4 doesn't support EPSG:900913, so I added the following lines to
'cubewerx_extra.wkt':
----------------------------
#
# EPSG:900913
#
900913,PROJCS["Google Maps Global
Mercator",GEOGCS["WGS84",DATUM["WGS_1984",SPHEROID["WGS84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_2SP"],PARAMETER["standard_parallel_1",0],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1],EXTENSION["PROJ4","+proj=merc+a=6378137
+b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0
+units=m+nadgri...@null +wktext  +no_defs"]]
-----------------------------

Maybe anyone can help me or can tell me another strategy?
thanks in advance,
Marco






--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Failed-to-initialize-PROJ-4-with-tp6749580p6749580.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Ralf.Suhr at itc-halle.de  Thu Sep  1 06:46:58 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Sep  1 18:25:11 2011
Subject: [gdal-dev] Failed to initialize PROJ.4 with ...
In-Reply-To: <1314873147016-6749580.post@n2.nabble.com>
References: <1314873147016-6749580.post@n2.nabble.com>
Message-ID: <201109011246.58526.Ralf.Suhr@itc-halle.de>

Hi Marco,

it's look like only a typo. Put a space between +proj=merc +a=6378137

Gr
Ralf

On Donnerstag 01 September 2011 12:32:27 Marco Scheuble wrote:
> Hi all,
> 
> I got following error-message while using gdalwarp:
> ERROR 6: Failed to initialize PROJ.4 with `+proj=merc+a=6378137 +b=6378137
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m+nadgri...@null
> +wktext  +no_defs'.
> 
> Situation:
> I've installed GDAL 1.4.4, because the CentOS on the server wouldn't take
> any later version.
> GDAL 1.4.4 doesn't support EPSG:900913, so I added the following lines to
> 'cubewerx_extra.wkt':
> ----------------------------
> #
> # EPSG:900913
> #
> 900913,PROJCS["Google Maps Global
> Mercator",GEOGCS["WGS84",DATUM["WGS_1984",SPHEROID["WGS84",6378137,298.2572
> 23563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich
> ",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["
> EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_2SP"],PARAMET
> ER["standard_parallel_1",0],PARAMETER["latitude_of_origin",0],PARAMETER["ce
> ntral_meridian",0],PARAMETER["false_easting",0],PARAMETER["false_northing",
> 0],UNIT["Meter",1],EXTENSION["PROJ4","+proj=merc+a=6378137 +b=6378137
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0
> +units=m+nadgri...@null +wktext  +no_defs"]]
> -----------------------------
> 
> Maybe anyone can help me or can tell me another strategy?
> thanks in advance,
> Marco
> 
> 
> 
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Failed-to-initialize-PROJ-4-with-tp
> 6749580p6749580.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mail at marco-scheuble.de  Thu Sep  1 07:31:05 2011
From: mail at marco-scheuble.de (Marco Scheuble)
Date: Thu Sep  1 19:10:33 2011
Subject: [gdal-dev] Re: Failed to initialize PROJ.4 with ...
In-Reply-To: <201109011246.58526.Ralf.Suhr@itc-halle.de>
References: <1314873147016-6749580.post@n2.nabble.com>
	<201109011246.58526.Ralf.Suhr@itc-halle.de>
Message-ID: <1314876665963-6749716.post@n2.nabble.com>

hi Ralf,

thanks for your answer, but unfortunately I got the same error-message. 
--------------------
Failed to initialize PROJ.4 with `+proj=merc +a=6378137 +b=6378137
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m+nadgri...@null
+wktext  +no_defs'
--------------------

Marco


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Failed-to-initialize-PROJ-4-with-tp6749580p6749716.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Sep  1 07:33:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 19:13:31 2011
Subject: [gdal-dev] Re: OGR GML and other drivers producing text output:
	stdout,
	/dev/stdout and /vsistdout/ (was: ogr2ogr - output WKT to console?)
In-Reply-To: <4E5F5A20.4080505@gmx.eu>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EB388.4090202@villagis.com>
	<201109010028.56685.even.rouault@mines-paris.org>
	<4E5F5A20.4080505@gmx.eu>
Message-ID: <1314876831.4e5f6d9f6072e@webmail.free.fr>

> About the GML driver:
>
> I was just wondering where the .xsd file is written to when using:
> ogr2ogr -f gml /vsistdout/. According to the gml file's
> xsi:schemaLocation attribute, the schema file is `.xsd', see [1]. I
> can't find `.xsd' locally.
>
> When using /dev/stdout rather than /vsistdout/, I receive an error,
> which tells me that the schema file can't be created, see [2].
>
> Another observation with the gml driver: stdout is defined as an alias
> for /vsistdout/ (rather than /dev/stdout). When using the alias,
> xsi:schemaLocation tells me that the schema file is `stdout.xsd', see
> [3]. I can't find `stdout.xsd' locally.

stdout output for GML is a bit particular. No schema file is written in that
case (people using stdout want likely to use it for pipeling, so there's nothing
we can do with the schema). The value of the xsi:schemaLocation attribute is
more or less garbage in that case. There are also limitations. For example the
global <boundedBy> element cannot be written in that case (would need to seek
backward...).

But yes, it lacks the special case to recognize /dev/stdout as a particular
value where you must not try to write a file, which would avoid error [2].

>
>
> About other drivers producing text output:
>
> There seem to be several options about how to alias (/dev/)stdout and
> /vsistdout/. The current practice is perhaps somewhat inconsistent, see
> [4]. IMO, Even's recently added /dev/stdout -> /vsistdout/ alias looks
> most appropriate, I am however not so sure about non-Unix OSs.
>
> Finally, only drv_pgdump.html seems to mention /vsistdout/ as an option
> for writing to standard output, see [5]. Perhaps other relevant driver
> pages should also mention this option ?
>
>
> Would it be worth creating a ticket (or two) related to the above
> observations?

Yes we probably lack consistency in that area. I think the stdout case should be
removed (should not affect many people as it was unadvertized feature), and only
accept /dev/stdout and /vsistdout/ which are less hacky solutions.

>
>
> Hermann
>
>
> [1]
>
> $ ogr2ogr -f gml /vsistdout/ test.shp
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>       xsi:schemaLocation="http://ogr.maptools.org/ .xsd"
>       xmlns:ogr="http://ogr.maptools.org/"
>       xmlns:gml="http://www.opengis.net/gml">
>    <gml:featureMember>
>      <ogr:test fid="F0">
>      (...)
>
>
> [2]
>
> ERROR 4: Failed to open file /dev/stdout.xsd for schema output.
>
>
> [3]
>
> $ ogr2ogr -f gml stdout test.shp
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>       xsi:schemaLocation="http://ogr.maptools.org/ stdout.xsd"
>       xmlns:ogr="http://ogr.maptools.org/"
>       xmlns:gml="http://www.opengis.net/gml">
>    <gml:featureMember>
>      <ogr:test fid="F0">
>      (...)
>
>
> [4]
>
> ./gpx/ogrgpxdatasource.cpp:    if( EQUAL(pszFilename,"stdout") ||
> EQUAL(pszFilename,"/vsistdout/"))
> ./gml/ogrgmldatasource.cpp:    if( EQUAL(pszFilename,"stdout") ||
> EQUAL(pszFilename,"/vsistdout/"))
> ./kml/ogrkmldatasource.cpp:    if( EQUAL(pszName, "stdout") ||
> EQUAL(pszName, "/vsistdout/") )
> ./csv/ogrcsvdriver.cpp:    if (strcmp(pszName, "/dev/stdout") == 0)
> ./bna/ogrbnadatasource.cpp:    if( EQUAL(pszFilename,"stdout") )
> ./georss/ogrgeorssdatasource.cpp:    if( EQUAL(pszFilename,"stdout") )
> ./geojson/ogrgeojsondatasource.cpp:    if( EQUAL( pszName, "stdout" ) )
>
>
> [5]
>
> $ find ogr/ -name '*.html' | xargs grep "/vsistdout/"
> ogr/ogrsf_frmts/pgdump/drv_pgdump.html:to specify /vsistdout/ as output
> file to output on the standard output.<p>
> ogr/ogrsf_frmts/pgdump/drv_pgdump.html:% ogr2ogr --config PG_USE_COPY
> YES -f PGDump /vsistdout/ abc.shp | psql -d my_dbname -f -
>


From jukka.rahkonen at mmmtike.fi  Thu Sep  1 07:38:06 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Sep  1 19:18:06 2011
Subject: [gdal-dev] Re: Failed to initialize PROJ.4 with ...
References: <1314873147016-6749580.post@n2.nabble.com>
	<201109011246.58526.Ralf.Suhr@itc-halle.de>
	<1314876665963-6749716.post@n2.nabble.com>
Message-ID: <loom.20110901T133706-31@post.gmane.org>

Marco Scheuble <mail <at> marco-scheuble.de> writes:

> 
> hi Ralf,
> 
> thanks for your answer, but unfortunately I got the same error-message. 
> --------------------
> Failed to initialize PROJ.4 with `+proj=merc +a=6378137 +b=6378137
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m+nadgri...@null
> +wktext  +no_defs'

How about adding space also here? +units=m+nadgri...

-Jukka Rahkonen-

From mail at marco-scheuble.de  Thu Sep  1 08:01:57 2011
From: mail at marco-scheuble.de (Marco Scheuble)
Date: Thu Sep  1 19:43:06 2011
Subject: [gdal-dev] Re: Failed to initialize PROJ.4 with ...
In-Reply-To: <loom.20110901T133706-31@post.gmane.org>
References: <1314873147016-6749580.post@n2.nabble.com>
	<201109011246.58526.Ralf.Suhr@itc-halle.de>
	<1314876665963-6749716.post@n2.nabble.com>
	<loom.20110901T133706-31@post.gmane.org>
Message-ID: <1314878517630-6749805.post@n2.nabble.com>

hey Jukka an Ralf,
great work, that solved my problem :-)

thanks a lot, cheers, Marco



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Failed-to-initialize-PROJ-4-with-tp6749580p6749805.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Sep  1 08:12:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 19:54:48 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation) [SEC=UNCLASSIFIED]
In-Reply-To: <201109010930.27348.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<201109010138.11748.even.rouault@mines-paris.org>
	<5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>
	<201109010930.27348.yjacolin@free.fr>
Message-ID: <1314879172.4e5f76c4adb8f@webmail.free.fr>

> Le jeudi 01 septembre 2011 01:56:04, Pinner, Luke a ?crit :
> > Does this apply to the 4.x read-only version of the ERDAS ECW/JP2 SDK as
> > well as the old 3.3 SDK?

I've just commited a new changeset. Now the support for updating the header info
has been successfully tested on Linux 64bit with 3.3 SDK, Windows 32bit with 3.3
SDK and Windows 32bit with 4.2 Read-Only SDK.

At first, I had an issue with 4.2 Read-only SDK because the new functions used
were not in the header file where they used to be in the 3.3 SDK. But they are
luckily located in a new header file. So the Read-only SDK is a bit more than
read-only...

From even.rouault at mines-paris.org  Thu Sep  1 08:23:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 20:06:26 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201109011129.07417.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr> <4E5E48F5.7020106@free.fr>
	<201109011039.51239.yjacolin@free.fr>
	<201109011129.07417.yjacolin@free.fr>
Message-ID: <1314879838.4e5f795e71b48@imp.free.fr>

> I know why raster data made by GDAL show "RAW" string as projection
> information, documentation explain it:
> > When writing coordinate system information to ECW files, many less common
> > coordinate systems are not mapped properly. If you know the ECW name for
> the
> > coordinate system you can force it to be set at creation time with the PROJ
> > and DATUM creation options.
>
> As I did not use DATUM and PROJ creation option GDAL don't add it!

Yes, the mapping between WKT representation and ECW DATUM/PROJ is not perfect,
especially in the WKT -> DATUM/PROJ direction (the other direction is simpler).
You could perhaps try the updated ecw_cs.wkt file attached to ticket
http://trac.osgeo.org/gdal/ticket/4127

>
> Finally I saw that gdal create only an aux.xml file to store his own proj
> information and don't use the projection information from the header file. If
> I
> create this aux.xml file for all of my raster data it could work.

Yes, .aux.xml is a solution that works for most GDAL drivers. But of course, it
will only work in the GDAL-based software world.
From even.rouault at mines-paris.org  Thu Sep  1 08:33:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 20:16:15 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
Message-ID: <1314880393.4e5f7b8998383@imp.free.fr>

Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:

> Sorry for the addition, but regarding the issue with SetField, I just had
> the same error with the inputs
> SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
>
> To repeat, this works on every standard Ubuntu installation I have used
> (10.04, 10.10, 11.04). However, after installing qgis 1.7 on Ubuntu 11.04
> this error keeps happening in our code. I don't know how to find out what
> version of org we are using.

My feeling is that there must be something broken in your installation. This
should work. Check that both your gdal lib and gdal python packages are updated
at the same version. dpkg -l|grep gdal should give you some hints.

>
> Please let me know how to work around this or if there is a patch you can
> apply.
>
> Cheers and thanks
> Ole
>
>
>
> ---------- Forwarded message ----------
> From: Ole Nielsen <ole.moller.nielsen@gmail.com>
> Date: Thu, Sep 1, 2011 at 4:04 PM
> Subject: NotImplementedError: Wrong number of arguments for overloaded
> function 'Feature_SetField'.
> To: gdal-dev@lists.osgeo.org
> Cc: Ariel Nunez <ingenieroariel@gmail.com>, Ted Dunstone <ted@biometix.com>
>
>
> Developing on a code which relies on ogr.py and that has been running for a
> while on Ubuntu 10.04, 10.10 and 11.04 I saw for the first time today the
> error
>
> ....
> ERROR 1: No such field: 'CONTENTS_DAMAGE_fraction'
> ERROR 1: No such field: 'STRUCT_INUNDATED'
> ERROR 1: No such field: 'STRUCT_LOSS_AUD'
> ERROR 1: No such field: 'CONTENTS_LOSS_AUD'
> ERROR 1: No such field: 'PEOPLE_AFFECTED'
> .....
>   File "/home/nielso/dev/riab/impact/storage/vector.py", line 426, in
> write_to_file
>     feature.SetField(name, data[i][name])
>   File "/usr/lib/python2.7/dist-packages/osgeo/ogr.py", line 2184, in
> SetField
>     return _ogr.Feature_SetField(self, *args)
> NotImplementedError: Wrong number of arguments for overloaded function
> 'Feature_SetField'.
>   Possible C/C++ prototypes are:
>     SetField(OGRFeatureShadow *,int,char const *)
>     SetField(OGRFeatureShadow *,char const *,char const *)
>     SetField(OGRFeatureShadow *,int,int)
>     SetField(OGRFeatureShadow *,char const *,int)
>     SetField(OGRFeatureShadow *,int,double)
>     SetField(OGRFeatureShadow *,char const *,double)
>     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
>     SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)
>
>
>
> This happened after I (as an unrelated act) installed qgis 1.7 so I am
> guessing GDAL got upgraded as well.
> The arguments to SetField in this case are: SetField('MMI', nan)
> Types are
> 'MMI' <type 'str'>
> nan <type 'float'>
>
> So does this mean that nan used to be supported and no longer is?
> Or is it me doing something wrong.
>
>
>
> I have seen references to this issue at
>
>
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Proposed-UTF-8-SWIG-Changes-td5575272.html
> http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html
>
> but they seem to be more concerned with defining typemaps in the C
> libraries. What I need to know is how to modify my
> Python code so that this runs again on all relevant gdal versions.
>
> Can anyone help, please?
>
> Many thanks
> Ole Nielsen
>


From jrepetto at free.fr  Thu Sep  1 09:02:41 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Sep  1 09:03:15 2011
Subject: [gdal-dev] Failed to initialize PROJ.4 with ...
In-Reply-To: <1314873147016-6749580.post@n2.nabble.com>
References: <1314873147016-6749580.post@n2.nabble.com>
Message-ID: <4E5F8271.7090908@free.fr>

Le 01/09/2011 12:32, Marco Scheuble a ?crit :

> GDAL 1.4.4 doesn't support EPSG:900913, so I added the following lines to
> 'cubewerx_extra.wkt':
> ----------------------------
> #
> # EPSG:900913
> #
> 900913,PROJCS["Google Maps Global
> Mercator",GEOGCS["WGS84",DATUM["WGS_1984",SPHEROID["WGS84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_2SP"],PARAMETER["standard_parallel_1",0],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1],EXTENSION["PROJ4","+proj=merc+a=6378137
> +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0
> +units=m+nadgri...@null +wktext  +no_defs"]]

Hi,

EPSG:900913 is deprecated since many years, use EPSG:3857 instead.

Jean-Claude
From heng.feng at aircominternational.com  Thu Sep  1 09:26:53 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Sep  1 09:28:33 2011
Subject: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <91F3636CDE7F30469B93B2DBFA6E72091905C0DC@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
	<1314860312662-6749118.post@n2.nabble.com>
	<1314860733.8205.24.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0DC@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
Message-ID: <1314883613610-6750029.post@n2.nabble.com>

I am still stuck. Any more ideas? Thanks.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6750029.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Thu Sep  1 11:11:37 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep  1 11:19:06 2011
Subject: [gdal-dev] Re: OGR GML and other drivers producing text output:
 stdout, /dev/stdout and /vsistdout/
In-Reply-To: <1314876831.4e5f6d9f6072e@webmail.free.fr>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EB388.4090202@villagis.com>
	<201109010028.56685.even.rouault@mines-paris.org>
	<4E5F5A20.4080505@gmx.eu>
	<1314876831.4e5f6d9f6072e@webmail.free.fr>
Message-ID: <4E5FA0A9.3000207@gmx.eu>

On 01/09/2011 13:33, Even Rouault wrote:
>
> But yes, it lacks the special case to recognize /dev/stdout as a particular
> value where you must not try to write a file, which would avoid error [2].
>

Ticket created at http://trac.osgeo.org/gdal/ticket/4225

>
> Yes we probably lack consistency in that area. I think the stdout case should be
> removed (should not affect many people as it was unadvertized feature), and only
> accept /dev/stdout and /vsistdout/ which are less hacky solutions.
>

Ticket created: http://trac.osgeo.org/gdal/ticket/4226


Hermann
From warmerdam at pobox.com  Thu Sep  1 11:42:40 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  1 11:51:53 2011
Subject: [gdal-dev] read S57 files from OGR
In-Reply-To: <1314870353353-6749462.post@n2.nabble.com>
References: <1314870353353-6749462.post@n2.nabble.com>
Message-ID: <4E5FA7F0.7010906@pobox.com>

On 11-09-01 02:45 AM, andval wrote:
> Hi! Sorry for my English. I trying read s-57 files by OGR. But its parsing
> into geometry layers (points, lines e.t.c.) instead objects (DEPARE, COALNE
> e.t.c.). CSV files drop into *.exe directory.

Andval,

This indicates that the S57 CSV files with the object catalog are not being
found.  They are normally in the "GDAL Data" directory, often
/usr/local/share/gdal/ on linux, and at the gdal/data directory within the
source distribution.  You can set the GDAL_DATA or perhaps S57_CSV environment
variables to point to the directory containing the files before running.

If you are writing your own program or script you might instead use the
CPLSetConfigOption() function.  Some more details on setting configuration
options is available at:

   http://trac.osgeo.org/gdal/wiki/ConfigOptions

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From matze999 at gmail.com  Thu Sep  1 12:10:07 2011
From: matze999 at gmail.com (Matt Funk)
Date: Thu Sep  1 12:21:08 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <201108302304.57258.even.rouault@mines-paris.org>
References: <4E5D39CB.2070106@gmail.com>
	<201108302139.50194.even.rouault@mines-paris.org>
	<4E5D4EBE.9060603@gmail.com>
	<201108302304.57258.even.rouault@mines-paris.org>
Message-ID: <4E5FAE5F.1040209@gmail.com>

Hi,
i got a question on using the gdal_grid utility:
My input file looks like:

lat,lon,data
24.007521,-114.111420,-0.078077
24.003864,-114.064293,-0.017523
24.000221,-114.017540,-0.069692
23.996593,-113.971153,-0.014572
23.992981,-113.925117,-0.032931
23.989380,-113.879440,-0.068089
23.985794,-113.834114,-0.027493
23.982224,-113.789124,-0.046154
23.978666,-113.744476,-0.073945
23.975121,-113.700165,-0.072757
23.971590,-113.656174,-0.048775
...
3.034852,-96.767853,0.459120
3.028167,-96.727135,0.649308
3.021430,-96.686111,0.994770
3.014640,-96.644768,1.085215
3.007797,-96.603119,1.350796
3.000899,-96.561142,1.879670
2.993942,-96.518822,1.470742

I use gdal_grid:
"C:\software\gdal\gdalwin32-1.6\bin\gdal_grid.exe" -a
invdist:power=2.0:smoothing=1.0 -txe 2 24 -tye -117 -92 -outsize 50 50
-of GTiff -ot Float64 -l dust_t1735 dust_t1735.vrt dust_t1735.tiff

The tiff file is generated, but when i try to open it, but i cannot open
it and the file is somehow corrupted. For the experts on this utility,
am i doing something obviously wrong?

thanks
matt


On 8/30/2011 3:04 PM, Even Rouault wrote:
> Le mardi 30 ao?t 2011 22:57:34, Matt Funk a ?crit :
>> On 8/30/2011 1:39 PM, Even Rouault wrote:
>>> Le mardi 30 ao?t 2011 21:28:11, Matt Funk a ?crit :
>>>> Hi,
>>>> i have several satellite scenes which basically give me 3 vectors:
>>>> lat/lon/data which is on an irregular. I would like to interpolate those
>>>> onto a regular grid. I found that GDALGridCreate would meet my need
>>>> except that i am developing in python, but it appears the bindings for
>>>> it don't exist (unless i am mistaken).
>>>> So my question is whether someone knows of an alternative route to
>>>> accomplish this or whether i am possible wrong in that i cannot use
>>>> GDALGridCreate in python?
>>> Yes, you cannot use GDALGridCreate() in python. It has only been mapped
>>> to Java bindings for now. You can as a workaround for a process with the
>>> gdal_grid utility.
>> I have never used the gdal_grid utility. Outside of its manpage
>> (http://www.gdal.org/gdal_grid.html) i haven't found any usage examples.
> That's already a beginning ;-)
>
>> As far as inputs are concerned it talks about csv file. Are there other
>> input formats.
> All OGR supported formats : http://gdal.org/ogr/ogr_formats.html
>
>> Also, this might be a dumb question, but would it be of any value to
>> call the compiled c-gdal library directly from my python code?
> Possibly, but someone has to code the missing python swig typemaps however.
>
>> matt
>>
>>>> thanks
>>>> matt
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Matt Funk
Research Associate
Plant and Environmental Scienc. Dept.
New Mexico State University

From georgec_511 at yahoo.com  Thu Sep  1 12:40:06 2011
From: georgec_511 at yahoo.com (George C)
Date: Thu Sep  1 12:54:12 2011
Subject: [gdal-dev] getting 3x3 minute box of coords with gdal
Message-ID: <1314895206.78743.YahooMailNeo@web162016.mail.bf1.yahoo.com>

Hello,
?
Does anyone know how I would get a 3x3 minute box of coords with gdal given the south west corner coord?
?
Preferably using either C or Java.
?
Thanks,
George
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/72a35879/attachment.html
From armin.burger at gmx.net  Thu Sep  1 12:53:31 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Sep  1 13:06:29 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <1314879838.4e5f795e71b48@imp.free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<4E5E48F5.7020106@free.fr>	<201109011039.51239.yjacolin@free.fr>	<201109011129.07417.yjacolin@free.fr>
	<1314879838.4e5f795e71b48@imp.free.fr>
Message-ID: <4E5FB88B.8020304@gmx.net>

On 01/09/2011 14:23, Even Rouault wrote:
>> As I did not use DATUM and PROJ creation option GDAL don't add it!
>
> Yes, the mapping between WKT representation and ECW DATUM/PROJ is not perfect,
> especially in the WKT ->  DATUM/PROJ direction (the other direction is simpler).
> You could perhaps try the updated ecw_cs.wkt file attached to ticket
> http://trac.osgeo.org/gdal/ticket/4127
>
>>
>> Finally I saw that gdal create only an aux.xml file to store his own proj
>> information and don't use the projection information from the header file. If
>> I
>> create this aux.xml file for all of my raster data it could work.
>
> Yes, .aux.xml is a solution that works for most GDAL drivers. But of course, it
> will only work in the GDAL-based software world.

I made the experience that ECW files do not work too well with the 
*.aux.xml file and less common projections. Often gdalinfo cannot 
convert the projected coordinates into lat/lon in it's output. And 
especially in combination with Mapserver reprojection does often not 
work correctly with ECW files that should read the projection info from 
the *.aux.xml file.

But as soon as you apply the ECW specific DATUM and PROJ definitions and 
add the corresponding projections/datums to the ecw_cs.wkt file (if 
missing there) everything works like a charm. Also desktop clients like 
ArcGIS 10 and QGIS work well with those ECW's if you add the missing 
projections and datums to their own copy of the ecw_cs.wkt file.

Armin



From vasile.cotovanu at webgis.ro  Thu Sep  1 13:29:58 2011
From: vasile.cotovanu at webgis.ro (vasile)
Date: Thu Sep  1 13:44:47 2011
Subject: [gdal-dev] Using GDAL to update DBFs of an ESRI Shapefile ?
Message-ID: <1314898198755-6750885.post@n2.nabble.com>

I failed in finding a programatic way of updating the attributes of an ESRI
Shapefile feature (using Ruby 1.9.x on OSX Lion) therefore I wonder if I can
use GDAL to accomplish this task. 

Let's say I have a CSV file containing the fields/rows that I want to update
and an ESRI shapefile with the associated .dbf. Basically I want to update
only the DB with the content from CSV. Is it possible ?

Thanks,

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-to-update-DBFs-of-an-ESRI-Shapefile-tp6750885p6750885.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Sep  1 13:49:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 14:05:40 2011
Subject: [gdal-dev] Using GDAL to update DBFs of an ESRI Shapefile ?
In-Reply-To: <1314898198755-6750885.post@n2.nabble.com>
References: <1314898198755-6750885.post@n2.nabble.com>
Message-ID: <201109011949.52271.even.rouault@mines-paris.org>

Le jeudi 01 septembre 2011 19:29:58, vasile a ?crit :
> I failed in finding a programatic way of updating the attributes of an ESRI
> Shapefile feature (using Ruby 1.9.x on OSX Lion) therefore I wonder if I
> can use GDAL to accomplish this task.
> 
> Let's say I have a CSV file containing the fields/rows that I want to
> update and an ESRI shapefile with the associated .dbf. Basically I want to
> update only the DB with the content from CSV. Is it possible ?

Yes, the shapefile driver supports editing both the geometry and attributes of 
an existing datasource. Not sure about the state of Ruby bindings to do that 
(they lack a dedicated maintainer), but you could certainly accompish that 
with C, C++, Java, C#, Perl or Python.

Your friends are the Feature.SetField() and Layer.SetFeature() methods.

> 
> Thanks,
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-to-update-DBFs-of-an-ESR
> I-Shapefile-tp6750885p6750885.html Sent from the GDAL - Dev mailing list
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matze999 at gmail.com  Thu Sep  1 14:15:16 2011
From: matze999 at gmail.com (Matt Funk)
Date: Thu Sep  1 14:32:48 2011
Subject: [gdal-dev] help with getting started for writing swig typemaps for
	GDALGridCreate()
Message-ID: <4E5FCBB4.2060805@gmail.com>

Hi,
i would like be able to make use of GDALGridCreate() in my python code.
Since it has not been mapped to python i'd like to do that myself. I
don't have experience with this though, so i am looking for some
direction on how to get started. I read up a little on it and i think i
understand the general procedure.

However, to get started i need some more specifics.  Basically, how do i
get started regenerating?
I downloaded GDAL-1.7.1.tar.gz
<http://pypi.python.org/packages/source/G/GDAL/GDAL-1.7.1.tar.gz#md5=38b838d528b309a28a3aa24d4fcef3cd>.
from http://pypi.python.org/pypi/GDAL/. On the website it says that in
order to regenerate i nned to:
make generate (which i see as a target in the GNUMakefile) from the
./swig/python directory:
However, there is no swig/python directory.

I realize that these question are probably very basic, but a push in the
right direction would be appreciated.

thanks
matt


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/69bebc92/attachment.html
From matze999 at gmail.com  Thu Sep  1 14:28:45 2011
From: matze999 at gmail.com (Matt Funk)
Date: Thu Sep  1 14:47:04 2011
Subject: [gdal-dev] Re: help with getting started for writing swig typemaps
	for GDALGridCreate()
In-Reply-To: <4E5FCBB4.2060805@gmail.com>
References: <4E5FCBB4.2060805@gmail.com>
Message-ID: <4E5FCEDD.4020606@gmail.com>

Nevermind, i got confused. Downloaded the wrong code.
Sorry about that.

matt

On 9/1/2011 12:15 PM, Matt Funk wrote:
> Hi,
> i would like be able to make use of GDALGridCreate() in my python
> code. Since it has not been mapped to python i'd like to do that
> myself. I don't have experience with this though, so i am looking for
> some direction on how to get started. I read up a little on it and i
> think i understand the general procedure.
>
> However, to get started i need some more specifics.  Basically, how do
> i get started regenerating?
> I downloaded GDAL-1.7.1.tar.gz
> <http://pypi.python.org/packages/source/G/GDAL/GDAL-1.7.1.tar.gz#md5=38b838d528b309a28a3aa24d4fcef3cd>.
> from http://pypi.python.org/pypi/GDAL/. On the website it says that in
> order to regenerate i nned to:
> make generate (which i see as a target in the GNUMakefile) from the
> ./swig/python directory:
> However, there is no swig/python directory.
>
> I realize that these question are probably very basic, but a push in
> the right direction would be appreciated.
>
> thanks
> matt
>
>


-- 
Matt Funk
Research Associate
Plant and Environmental Scienc. Dept.
New Mexico State University

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/f7f7eee9/attachment-0001.html
From matt.wilkie at gov.yk.ca  Thu Sep  1 14:37:38 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Sep  1 14:56:48 2011
Subject: [gdal-dev] spatialreference.org down
Message-ID: <4E5FD0F2.1010302@gov.yk.ca>

Hey All,

www.spatialreference.org is down right now (/The server is temporarily 
unable to service your request due to maintenance downtime or capacity 
problems. Please try again later./) . Anyone know if this a glitch or 
something more permanent?

thanks,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From leidy.garzon at datuming.com  Thu Sep  1 20:29:35 2011
From: leidy.garzon at datuming.com (Leidy Garzon)
Date: Thu Sep  1 21:07:43 2011
Subject: [gdal-dev] Java Erdas Image
Message-ID: <CANxi1vTkbgCBYtbpmQWSa8oDSALoqT-c_n7BRz5McYQfCpij9g@mail.gmail.com>

Hello
I am working in a project using Erdas Apollo Server, I have to build a excel
report from a .img file but I dont know how to get the pixel data from the
image.
I was trying using GDALImageReader class from
imageio-ext-gdalerdasimg-1.1.1.jar but I dont know how use it, I would
appreciate if somebody could give me a example or help.

Thankyou so much

Leidy Patricia Garz?n Rodriguez

Soporte T?cnico ERDAS Enterprise

Datum Ingenier?a Ltda.

Tel?fono:  57-1  7431989 Ext: 4006

Fax:  57-1  2228992

Direcci?n: Calle 43 67A-36 Piso 2

Bogot? - Colombia

www.datuming.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/40dac801/attachment.html
From etiennesky at yahoo.com  Thu Sep  1 20:42:10 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Thu Sep  1 21:21:03 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
Message-ID: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>

Hi all,

Can someone point me to the correct emacs configuration (in .emacs file) that follows GDAL c++ coding standards?? 


It would be a nice addition to the Developer standards at http://trac.osgeo.org/gdal/wiki/rfc8_devguide .

The following seems to work, setting the spacing to 4, using spaces instead of tabs and also indenting "case" statements.
Am I missing anything?


(setq-default c-basic-offset 4
?? ?????? tab-width 4
?? ?????? indent-tabs-mode nil)
(c-set-offset 'case-label '+)

Thanks,
Etienne
From ole.moller.nielsen at gmail.com  Thu Sep  1 20:56:58 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Thu Sep  1 21:36:41 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <1314880393.4e5f7b8998383@imp.free.fr>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
Message-ID: <CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>

Thank you very much for replying.
The output I got from you suggestion is

nielso@shakti:~$ dpkg -l|grep gdal
ii  gdal-bin
1.8.0-2~natty2                             Geospatial Data Abstraction
Library - Utility programs
ii  libgdal1-1.6.0
1.6.3-4build3                              Geospatial Data Abstraction
Library
ii  libgdal1-1.6.0-grass
1.6.3-3                                    GRASS extension for the GDAL
library
ii  libgdal1-1.8.0
1.8.0-2~natty2                             Geospatial Data Abstraction
Library
ii  python-gdal
1.8.0-2~natty2                             Python bindings to the Geospatial
Data Abstraction Library


I think the versions 1.6 would be those coming natively with Ubuntu Natty
while the 1.8 stream may have been installed by qgis 1.7
Is there a way of telling which one I am using (both when running
commandline org2org and when importing the ogr module in python)?

Cheers and thanks
Ole


On Thu, Sep 1, 2011 at 7:33 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
>
> > Sorry for the addition, but regarding the issue with SetField, I just had
> > the same error with the inputs
> > SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
> >
> > To repeat, this works on every standard Ubuntu installation I have used
> > (10.04, 10.10, 11.04). However, after installing qgis 1.7 on Ubuntu 11.04
> > this error keeps happening in our code. I don't know how to find out what
> > version of org we are using.
>
> My feeling is that there must be something broken in your installation.
> This
> should work. Check that both your gdal lib and gdal python packages are
> updated
> at the same version. dpkg -l|grep gdal should give you some hints.
>
> >
> > Please let me know how to work around this or if there is a patch you can
> > apply.
> >
> > Cheers and thanks
> > Ole
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: Ole Nielsen <ole.moller.nielsen@gmail.com>
> > Date: Thu, Sep 1, 2011 at 4:04 PM
> > Subject: NotImplementedError: Wrong number of arguments for overloaded
> > function 'Feature_SetField'.
> > To: gdal-dev@lists.osgeo.org
> > Cc: Ariel Nunez <ingenieroariel@gmail.com>, Ted Dunstone <
> ted@biometix.com>
> >
> >
> > Developing on a code which relies on ogr.py and that has been running for
> a
> > while on Ubuntu 10.04, 10.10 and 11.04 I saw for the first time today the
> > error
> >
> > ....
> > ERROR 1: No such field: 'CONTENTS_DAMAGE_fraction'
> > ERROR 1: No such field: 'STRUCT_INUNDATED'
> > ERROR 1: No such field: 'STRUCT_LOSS_AUD'
> > ERROR 1: No such field: 'CONTENTS_LOSS_AUD'
> > ERROR 1: No such field: 'PEOPLE_AFFECTED'
> > .....
> >   File "/home/nielso/dev/riab/impact/storage/vector.py", line 426, in
> > write_to_file
> >     feature.SetField(name, data[i][name])
> >   File "/usr/lib/python2.7/dist-packages/osgeo/ogr.py", line 2184, in
> > SetField
> >     return _ogr.Feature_SetField(self, *args)
> > NotImplementedError: Wrong number of arguments for overloaded function
> > 'Feature_SetField'.
> >   Possible C/C++ prototypes are:
> >     SetField(OGRFeatureShadow *,int,char const *)
> >     SetField(OGRFeatureShadow *,char const *,char const *)
> >     SetField(OGRFeatureShadow *,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int)
> >     SetField(OGRFeatureShadow *,int,double)
> >     SetField(OGRFeatureShadow *,char const *,double)
> >     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)
> >
> >
> >
> > This happened after I (as an unrelated act) installed qgis 1.7 so I am
> > guessing GDAL got upgraded as well.
> > The arguments to SetField in this case are: SetField('MMI', nan)
> > Types are
> > 'MMI' <type 'str'>
> > nan <type 'float'>
> >
> > So does this mean that nan used to be supported and no longer is?
> > Or is it me doing something wrong.
> >
> >
> >
> > I have seen references to this issue at
> >
> >
>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Proposed-UTF-8-SWIG-Changes-td5575272.html
> > http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html
> >
> > but they seem to be more concerned with defining typemaps in the C
> > libraries. What I need to know is how to modify my
> > Python code so that this runs again on all relevant gdal versions.
> >
> > Can anyone help, please?
> >
> > Many thanks
> > Ole Nielsen
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/dde4f2ea/attachment.html
From EAdam at co.lincoln.or.us  Thu Sep  1 21:15:37 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Sep  1 21:57:06 2011
Subject: [gdal-dev] gdal/ogr version (was NotImplementedError:
	Wrong number...)
In-Reply-To: <CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
Message-ID: <4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>

Ole,

> Is there a way of telling which one I am using (both when running
> commandline org2org and when importing the ogr module in python)?

ogr2ogr --version will work on the command line for at least the major version number.  I'm not sure about in python.

HTH, Eli

> 
> Cheers and thanks
> Ole


From ole.moller.nielsen at gmail.com  Thu Sep  1 21:23:29 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Thu Sep  1 22:04:39 2011
Subject: [gdal-dev] gdal/ogr version (was NotImplementedError: Wrong
	number...)
In-Reply-To: <4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
	<4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <CALcLSfoS_736oaseuYOQpsT84wrwD1uob+O4BGua7=1M62Qxyw@mail.gmail.com>

Many thanks for the reply, but I need the Python bindings as we are using
ogr deeply embedded in an application and creating of new layers using the
SetField command (amongst others) is critical. Hence my worry when we get
the error

NotImplementedError: Wrong number of arguments for overloaded function
'Feature_SetField'.

I am sure it is something simple that changed in more recent versions - such
as an extra required argument perhaps - and I'd be grateful if someone who
knows the codebase could tell me what this error means and what I must do to
make the call succeed.

Many thanks
Ole Nielsen


On Fri, Sep 2, 2011 at 8:15 AM, Eli Adam <EAdam@co.lincoln.or.us> wrote:

> Ole,
>
> > Is there a way of telling which one I am using (both when running
> > commandline org2org and when importing the ogr module in python)?
>
> ogr2ogr --version will work on the command line for at least the major
> version number.  I'm not sure about in python.
>
> HTH, Eli
>
> >
> > Cheers and thanks
> > Ole
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/b482f503/attachment-0001.html
From mariusjigmond at hotmail.com  Thu Sep  1 21:52:30 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu Sep  1 22:36:20 2011
Subject: [gdal-dev] gdal/ogr version (was NotImplementedError: Wrong
	number...)
In-Reply-To: <CALcLSfoS_736oaseuYOQpsT84wrwD1uob+O4BGua7=1M62Qxyw@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
	<4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>
	<CALcLSfoS_736oaseuYOQpsT84wrwD1uob+O4BGua7=1M62Qxyw@mail.gmail.com>
Message-ID: <BLU0-SMTP2874EA6041E2F9F1846A387B2180@phx.gbl>

On 09/01/2011 08:23 PM, Ole Nielsen wrote:
> Many thanks for the reply, but I need the Python bindings as we are 
> using ogr deeply embedded in an application and creating of new layers 
> using the SetField command (amongst others) is critical. Hence my 
> worry when we get the error
>
> NotImplementedError: Wrong number of arguments for overloaded function 
> 'Feature_SetField'.
>
> I am sure it is something simple that changed in more recent versions 
> - such as an extra required argument perhaps - and I'd be grateful if 
> someone who knows the codebase could tell me what this error means and 
> what I must do to make the call succeed.
>
> Many thanks
> Ole Nielsen
>
>
> On Fri, Sep 2, 2011 at 8:15 AM, Eli Adam <EAdam@co.lincoln.or.us 
> <mailto:EAdam@co.lincoln.or.us>> wrote:
>
>     Ole,
>
>     > Is there a way of telling which one I am using (both when running
>     > commandline org2org and when importing the ogr module in python)?
>
>     ogr2ogr --version will work on the command line for at least the
>     major version number.  I'm not sure about in python.
>
This should give you the bindings version picked up by Python:
 >>>from osgeo import gdal
 >>>gdal.__version__

You can also check the PYTHONPATH with
 >>>import sys
 >>>sys.path

to see which location gets picked up first when you import osgeo modules
likely locations you'll find the modules: 
/usr/(local)/lib/python2.x/dist-packages

-marius
>
>     HTH, Eli
>
>     >
>     > Cheers and thanks
>     > Ole
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/79d18f3c/attachment.html
From ole.moller.nielsen at gmail.com  Thu Sep  1 22:08:37 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Thu Sep  1 22:52:22 2011
Subject: [gdal-dev] gdal/ogr version (was NotImplementedError: Wrong
	number...)
In-Reply-To: <CALh6R-Ses3JWEhQPzTDK1hKEV2y=5nMzzK9Yi4Ru5UpxzU5hCQ@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
	<4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>
	<CALcLSfoS_736oaseuYOQpsT84wrwD1uob+O4BGua7=1M62Qxyw@mail.gmail.com>
	<CALh6R-Ses3JWEhQPzTDK1hKEV2y=5nMzzK9Yi4Ru5UpxzU5hCQ@mail.gmail.com>
Message-ID: <CALcLSfpmu_EgN3GFSCaaMo+MSYVyRgHZJRmOYJC78Ub4A0tkng@mail.gmail.com>

good idea, thanks. However, it appears that qgis 1.7 is the one that depends
on gdal 1.6. I am confused.

(riab_env)nielso@shakti:~/dev$ sudo dpkg --purge libgdal1-1.6.0
dpkg: dependency problems prevent removal of libgdal1-1.6.0:
 libqgis1.7.0 depends on libgdal1-1.6.0.
 qgis-providers depends on libgdal1-1.6.0.
 qgis depends on libgdal1-1.6.0.
 python-qgis depends on libgdal1-1.6.0.


In any case, we should be able to work with either, so I am hoping someone
will shed some light on what the error message really means.

Many thanks
Ole



On Fri, Sep 2, 2011 at 8:28 AM, Ariel Nunez <ingenieroariel@gmail.com>wrote:

> Ole, why don't you uninstall  libgdal1-1.6.0 and the grass one and run
> ldconfig to make sure everything is using 1.8?
>
> Ariel.
>
> On Thu, Sep 1, 2011 at 9:23 PM, Ole Nielsen
> <ole.moller.nielsen@gmail.com> wrote:
> > Many thanks for the reply, but I need the Python bindings as we are using
> > ogr deeply embedded in an application and creating of new layers using
> the
> > SetField command (amongst others) is critical. Hence my worry when we get
> > the error
> >
> > NotImplementedError: Wrong number of arguments for overloaded function
> > 'Feature_SetField'.
> >
> > I am sure it is something simple that changed in more recent versions -
> such
> > as an extra required argument perhaps - and I'd be grateful if someone
> who
> > knows the codebase could tell me what this error means and what I must do
> to
> > make the call succeed.
> >
> > Many thanks
> > Ole Nielsen
> >
> >
> > On Fri, Sep 2, 2011 at 8:15 AM, Eli Adam <EAdam@co.lincoln.or.us> wrote:
> >>
> >> Ole,
> >>
> >> > Is there a way of telling which one I am using (both when running
> >> > commandline org2org and when importing the ogr module in python)?
> >>
> >> ogr2ogr --version will work on the command line for at least the major
> >> version number.  I'm not sure about in python.
> >>
> >> HTH, Eli
> >>
> >> >
> >> > Cheers and thanks
> >> > Ole
> >>
> >>
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/30d24f2a/attachment.html
From etiennesky.dev at gmail.com  Thu Sep  1 22:58:39 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Thu Sep  1 23:45:08 2011
Subject: [gdal-dev] best way to make a branch for a subset of gdal?
Message-ID: <CAPMKADVi_pHkHUjkrHFLwxg6JNJQidrnr_mFpAhpr95h4Ec1Vg@mail.gmail.com>

Hi all,

I would like to setup a git repository of a subset of gdal (the netcdf
driver) and I would like to know the best solution.

1) the full git-svn sync as explained in
http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow

It works, but overkill for my needs.

2) just setup a small repository with a copy of the files in current svn

3) a git-svn sync of just the necessary files

It looks like the pull from svn worked using the following

git svn init --trunk https://svn.osgeo.org/gdal/trunk/gdal/frmts/netcdf
git svn --authors-file=../gdal/gdal-git-authors.txt fetch
git svn --authors-file=../gdal/gdal-git-authors.txt rebase


thanks!
Etienne - using a new email adress
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/00b0d26b/attachment.html
From christopher.schmidt at nokia.com  Thu Sep  1 23:21:34 2011
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Fri Sep  2 00:09:27 2011
Subject: [gdal-dev] spatialreference.org down
In-Reply-To: <4E5FD0F2.1010302@gov.yk.ca>
References: <4E5FD0F2.1010302@gov.yk.ca>
Message-ID: <420D16BB-6491-487B-8793-ED724F993FED@nokia.com>


On Sep 1, 2011, at 2:37 PM, ext Matt Wilkie wrote:

> Hey All,
> 
> www.spatialreference.org is down right now (/The server is temporarily unable to service your request due to maintenance downtime or capacity problems. Please try again later./) . Anyone know if this a glitch or something more permanent?

Slight administrative oversight during unplanned 
maintenance earlier this week. Site should be back up 
now.

-- Chris

> thanks,
> 
> -- 
> matt wilkie
> --------------------------------------------
> Geomatics Analyst
> Information Management and Technology
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mariusjigmond at hotmail.com  Thu Sep  1 23:36:40 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Sep  2 00:25:21 2011
Subject: [gdal-dev] gdal/ogr version (was NotImplementedError: Wrong
	number...)
In-Reply-To: <CALcLSfpmu_EgN3GFSCaaMo+MSYVyRgHZJRmOYJC78Ub4A0tkng@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfqPDmhnPbFKpNstLQhBhb2hWDRiET3P=KJJH0S1G30KdA@mail.gmail.com>
	<4E5FCBC3.4F75.00CE.0@co.lincoln.or.us>
	<CALcLSfoS_736oaseuYOQpsT84wrwD1uob+O4BGua7=1M62Qxyw@mail.gmail.com>
	<CALh6R-Ses3JWEhQPzTDK1hKEV2y=5nMzzK9Yi4Ru5UpxzU5hCQ@mail.gmail.com>
	<CALcLSfpmu_EgN3GFSCaaMo+MSYVyRgHZJRmOYJC78Ub4A0tkng@mail.gmail.com>
Message-ID: <BLU0-SMTP1122DF12F48966AEFC1F6C3B2180@phx.gbl>

 From personal experience (and others') you get some odd error messages 
when you start mixing different versions of libgdal. I would expect the 
error to go away if you stick to one version of libgdal. Ubuntu-GIS 
should have all the packages you need without having to mix GDAL versions.

-marius

On 09/01/2011 09:08 PM, Ole Nielsen wrote:
> good idea, thanks. However, it appears that qgis 1.7 is the one that 
> depends on gdal 1.6. I am confused.
>
> (riab_env)nielso@shakti:~/dev$ sudo dpkg --purge libgdal1-1.6.0
> dpkg: dependency problems prevent removal of libgdal1-1.6.0:
>  libqgis1.7.0 depends on libgdal1-1.6.0.
>  qgis-providers depends on libgdal1-1.6.0.
>  qgis depends on libgdal1-1.6.0.
>  python-qgis depends on libgdal1-1.6.0.
>
>
> In any case, we should be able to work with either, so I am hoping 
> someone will shed some light on what the error message really means.
>
> Many thanks
> Ole
>
>
>
> On Fri, Sep 2, 2011 at 8:28 AM, Ariel Nunez <ingenieroariel@gmail.com 
> <mailto:ingenieroariel@gmail.com>> wrote:
>
>     Ole, why don't you uninstall  libgdal1-1.6.0 and the grass one and run
>     ldconfig to make sure everything is using 1.8?
>
>     Ariel.
>
>     On Thu, Sep 1, 2011 at 9:23 PM, Ole Nielsen
>     <ole.moller.nielsen@gmail.com
>     <mailto:ole.moller.nielsen@gmail.com>> wrote:
>     > Many thanks for the reply, but I need the Python bindings as we
>     are using
>     > ogr deeply embedded in an application and creating of new layers
>     using the
>     > SetField command (amongst others) is critical. Hence my worry
>     when we get
>     > the error
>     >
>     > NotImplementedError: Wrong number of arguments for overloaded
>     function
>     > 'Feature_SetField'.
>     >
>     > I am sure it is something simple that changed in more recent
>     versions - such
>     > as an extra required argument perhaps - and I'd be grateful if
>     someone who
>     > knows the codebase could tell me what this error means and what
>     I must do to
>     > make the call succeed.
>     >
>     > Many thanks
>     > Ole Nielsen
>     >
>     >
>     > On Fri, Sep 2, 2011 at 8:15 AM, Eli Adam <EAdam@co.lincoln.or.us
>     <mailto:EAdam@co.lincoln.or.us>> wrote:
>     >>
>     >> Ole,
>     >>
>     >> > Is there a way of telling which one I am using (both when running
>     >> > commandline org2org and when importing the ogr module in python)?
>     >>
>     >> ogr2ogr --version will work on the command line for at least
>     the major
>     >> version number.  I'm not sure about in python.
>     >>
>     >> HTH, Eli
>     >>
>     >> >
>     >> > Cheers and thanks
>     >> > Ole
>     >>
>     >>
>     >
>     >
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110901/32d5cd4d/attachment-0001.html
From andval at hotbox.ru  Fri Sep  2 01:28:59 2011
From: andval at hotbox.ru (Andrey Shafranyuk)
Date: Fri Sep  2 02:23:39 2011
Subject: [gdal-dev] Re: read S57 files from OGR
In-Reply-To: <4E5FA7F0.7010906@pobox.com>
References: <1314870353353-6749462.post@n2.nabble.com>
	<4E5FA7F0.7010906@pobox.com>
Message-ID: <1314941339689-6752768.post@n2.nabble.com>

Thank you for your help, Frank. Then i acquire object-layer oriented model i
can`t define geometry type for feature, becouse some objects have several of
geometry types. But ogrinfo defined geom type for feture and write POLYGON,
LINESTRING, e.t.c. I find, that for each geom type correspond one value of
GROUP field on my S-57 maps and don`t know other methods for geom defined
for each feature in layer, based on S-57 object with several geom types.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/read-S57-files-from-OGR-tp6749462p6752768.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From heng.feng at aircominternational.com  Fri Sep  2 03:20:21 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Fri Sep  2 04:21:19 2011
Subject: [gdal-dev] RE: GDALWARP Chunk Problem (Tiling Effect)
In-Reply-To: <1314883613610-6750029.post@n2.nabble.com>
References: <1314857779465-6749055.post@n2.nabble.com>
	<1314858448.8205.20.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0AA@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
	<1314860312662-6749118.post@n2.nabble.com>
	<1314860733.8205.24.camel@octopi>
	<91F3636CDE7F30469B93B2DBFA6E72091905C0DC@SVRUKVNOD01.AIRCOMINTERNATIONAL.com>
	<1314883613610-6750029.post@n2.nabble.com>
Message-ID: <1314948021565-6752965.post@n2.nabble.com>

The -r cubic option seems to be working like a charm. Thanks a lot for your
suggestion, Brian.

However, I am still not quite sure why this tiling effect occurred when
using the default resampling method (i.e. nearest neighbour ) on this map
data. And how can we tell what kind of resampling method should be used on a
particular map data?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALWARP-Chunk-Problem-Tiling-Effect-tp6749055p6752965.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Martin.Spott at mgras.net  Fri Sep  2 03:50:48 2011
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Sep  2 04:53:31 2011
Subject: [gdal-dev] VPF support
References: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
	<201108312130.17808.even.rouault@mines-paris.org>
Message-ID: <j3q1so$c822$1@osprey.mgras.de>

Even Rouault wrote:

> So perhaps the issue you saw was specifically a 64bit issue.

Indeed, this appears to be obvious.  BTW, just to make sure we're
talking about the same symptoms: May I assume that the voids as shown
in this shot:

  http://foxtrot.mgras.net/bitmap/VMap0-voids.png

....  (colours are just random ) are pretty 'standard' in VMap0 !?

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From etiennesky.dev at gmail.com  Fri Sep  2 09:57:32 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  2 11:25:33 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1314710318.42499.YahooMailNeo@web36907.mail.mud.yahoo.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201108262120.07119.even.rouault@mines-paris.org>
	<1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>
	<1314572053.8205.15.camel@octopi>
	<1314710318.42499.YahooMailNeo@web36907.mail.mud.yahoo.com>
Message-ID: <CAPMKADVpD0b7zp9i32bOy6s0BD3GF2cHsQmfAhQ3SB4Tszdz_A@mail.gmail.com>

There has been recent work on incorporating netcdf support for point and
trajectory data with Talend, maybe that can help?

http://www.neogeo-online.net/blog/archives/1350/
http://talendforge.org/svn/sdi/trunk/org.talend.sdi.designer.components.sandbox/components/sNetCDFInput/

Etienne

On Tue, Aug 30, 2011 at 10:18 AM, Etienne Tourigny <etiennesky@yahoo.com>wrote:

> Brian,
>
> I am not familiar with madis data.  I assume that it is point-data for
> meteorological stations?
>
> If you like, please post your ideas and a short description in a new topic
> in the wiki entry at
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements .
>
> Etienne
>
>
>
> ----- Original Message -----
> From: Brian Case <rush@winkey.org>
> To: Etienne Tourigny <etiennesky@yahoo.com>
> Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
> Sent: Sunday, August 28, 2011 7:54:13 PM
> Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF driver
> and CF-1 convention
>
> any thoughts on a ogr netcdf driver? I have a simple one for madis data
> that needs work in my sandbox
>
> Brian
>
>
>
> On Sun, 2011-08-28 at 14:56 -0700, Etienne Tourigny wrote:
> > I have created a new wiki page at
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements , following Even's
> suggestion (Thanks Even).
> >
> > The following topics have been included:
> >
> >
> > Topics:
> >
> > 1 - UNIDATA NetCDF Conventions
> >
> > 2 - Metadata
> > 3 - Datum issues
> > 4 - Dimension issues
> > 5 - Compatibility with other software
> > 6 - Test files
> > 7 - Contribution
> > Discussion
> >
> > I encourage interested parties in participating in this discussion in the
> wiki and in the mailing list.
> >
> >
> > In particular, it would be useful to collect information on contributors
> and obtain test files with issues and the expected outcome.
> >
> > regards, Etienne
> >
> >
> > ----- Original Message -----
> > From: Even Rouault <even.rouault@mines-paris.org>
> > To: gdal-dev@lists.osgeo.org; Etienne Tourigny <etiennesky@yahoo.com>
> > Cc:
> > Sent: Friday, August 26, 2011 4:20:06 PM
> > Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF
> driver and CF-1 convention
> >
> > Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a ?crit :
> >
> > My thoughts, just from a process point of view, not being myself deeply
> > involved in the NetCDF format :
> >
> > * A wiki page (I'd suggest either a new page -
> > http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at least a
> clearly
> > identified section in the current page, to avoid confusion for outsiders
> about
> > what is currently implemented and what is not) can be a convenient way of
> > structuring and editing the content by anyone with a osgeo id. But
> discussions
> > on the mailing list are also OK, at least to notify new content has been
> added
> > (provided that it doesn't cause flooding on the mailing list ;-))
> >
> > * A http://download.osgeo.org/gdal/data/netcdf directory would be the
> right
> > place to store NetCDF sample files, provided they are free under the
> terms of
> > http://download.osgeo.org/gdal/data/COPYING . As write access to it is
> > restricted to people with appropriate rights, having those rights, I can
> help
> > uploading files over there. Having small (typically < or ~ 10 KB ) sample
> files
> > is also good so they can be directly included in SVN under the
> > autotest/gdrivers/data directory and thus easily used by regression
> tests.
> >
> > * Tickets can be used to track the implementation of specific items and
> > bugfixes. But I've found they are not generally suitable for
> brainstorming when
> > the discussion is lasting, as you cannot edit already posted content.
> Wiki is
> > clearly better for this.
> >
> > * Looking at past history, I see we haven't yet used the RFC formalism
> for
> > work specific to one driver, while it doesn't require changes or
> extensions to
> > the GDAL API. But it wouldn't hurt to create one if the need arises.
> Anyway, a
> > point that might require care and some consensus among the interested
> parties
> > is about how backward compatibility issues, in particular with respect to
> files
> > produced by older GDAL versions, are adressed.
> > http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote is
> required.
> >
> > Best regards,
> >
> > Even
> >
> > > Hi all,
> > >
> > > Since a few people have shown an interest in helping out, I would
> suggest
> > > to set up space where we can post ideas, goals and test files.  This
> could
> > > take the form of one of the following:
> > >
> > > - a new wiki entry in trac, or the existing one at
> > > http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository at
> > > http://download.osgeo.org/gdal/data/netcdf as suggested some time ago
> by
> > > warmerdam
> > >
> > > and/or
> > >
> > > - a new ticket in trac (which allows to post files)
> > >
> > > What are you thoughts about this?  Would it make sense to eventually
> > > prepare an RFC?
> > >
> > >
> > >
> > > I would suggest that each group identify the problems with the current
> > > driver in terms of importing and exporting, post the files that they
> would
> > > like to be supported, which other software they use with the netcdf
> files,
> > > and their proposed contribution (code, test, ideas, etc.).
> > >
> > > Those that cannot participate in code development can help out in
> testing
> > > and discussion. Personally, I can write and test code, given example
> files
> > > and expected outcome.
> > >
> > >
> > > Now to your specific comments, Knut-Frode:
> > >
> > > 1) Yes CF-1.5 should be the goal, although I'm not sure we need to
> support
> > > upgrading/downgrading.
> > >
> > > 5) The WGS84 issue needs further research. Weather and ocean data are
> in
> > > lat/lon, but what is the sphere radius assumed by the various data
> > > providers and  the models which output/import netcdf files? I agree
> that a
> > > small error does not make a difference with low-resolution dataset, but
> > > I'd like to be sure in any case. We also need a means to translate the
> > > CF-1.x datum information into EPSG/Proj.4 values.
> > >
> > >
> > > 7) There is some support of a z-axis right now, in fact they driver
> assumes
> > > that a third dimension is vertical if I understand correctly. However,
> I
> > > have not tested nor looked into that.  This issue definitely needs come
> > > planning and an RFC, IMHO.
> > >
> > >
> > > Kyle, thanks for you help and interest!
> > >
> > >
> > > cheers,
> > > Etienne
> > >
> > >
> > > ________________________________
> > > From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
> > > To: gdal-dev@lists.osgeo.org
> > > Sent: Friday, August 26, 2011 4:41:02 AM
> > > Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
> and
> > > CF-1 convention
> > >
> > > Etienne,
> > >
> > > My group is also very much in support of the suggested improvements, as
> > > NetCDF/CF is becoming the most important standard for data
> > > storage/exchange in our community (climate, meteorology, oceanography).
> My
> > > group is not much into GDAL driver development (at least not yet), but
> we
> > > are now building our future very much around GDAL, so we are interested
> to
> > > join the discussion around improved support for NetCDF/CF reading and
> > > writing.
> > >
> > > About some of the mentioned issues:
> > >
> > > 1) The latest version of CF is 1.5, so it would be better to target 1.5
> (or
> > > 1.x) than 1.0. Ideally the driver could be made generic for smooth
> upgrade
> > > to newer (or downgrade to older) versions of the CF conventions.
> > >
> > > 5) It sounds meaningful to assume WGS84 datum if not specified. I
> believe
> > > at least 99% of data typically stored in NetCDF/CF will have this
> datum,
> > > and even when that is not the case, positioning errors less than 100 m
> > > should normally have little impact for the types of data. Precision on
> > > datum level is probably more relevant for more typical GIS-data with
> > > roads, borders etc. A warning could however be issued each time the
> driver
> > > has to assume WGS84.
> > >
> > > 7) We agree in particular that proper handling of time axis is of high
> > > value. This is one of the issues which is highly relevant for
> climate-data
> > > (often 4-dimensional), but not well supported by typical GIS-software
> or
> > > standards designed with 2-dimensional data in mind. A general
> > > representation of a time-axis (or even vertical axis) in GDAL would be
> > > ideal, but that would probably be too much an effort for anyone to
> > > develop.
> > >
> > >
> > > Knut-Frode
> > > Nansen Environmental and Remote Sensing Center
> > >
> > > On 24/08/2011 22:37, Etienne Tourigny wrote:
> > > > Hi all,
> > > >
> > > > I would like to start a discussion with those interested about fixing
> > > > various issues in the NetCDF driver.
> > > >
> > > > As it stands, it is not fully CF-1.0 compliant, and produces
> > > > geographical grids that are not valid for other software.
> > > > Also, the infamous "up-side down" problem has been addressed for
> > > > importing netcdfs, but needs to be addressed for exporting.
> > > >
> > > > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > > > I have been submitting patches for some time to fix the related
> issues.
> > > >
> > > > I have identified a number of issues, of which the following have
> been
> > > > fixed partially in my proposed patch.
> > > >
> > > > 1- conform to the cf-1.0 standard for geographical grids (creating
> lat
> > > > and lon dimensions and variables)
> > > > 2- make netcdf grids "bottom-up" by default, as all software out
> there
> > > > uses that convention
> > > > 3- fix problems related to floating-point / string conversions (also
> > > > reported in issue #4200 )
> > > > 4- fix metadata handling and duplication (as reported in issue
> #4204),
> > > > and keep band (variable) metadata outside of the global metadata
> > > >
> > > > Pending issues:
> > > >
> > > > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> > > > These files are extremely common, and CF-1.0 has provisions for
> > > > identifying the key variables, but no Proj/Wkt codes.
> > > > 6- fix proper export of projected CRS (this is not fully necessary
> > > > though) with lat/lon values respecting CF-1.0
> > > > 7- handle time axis properly (at least when creating a netcdf) - that
> > > > would be great for import/export of netcdf
> > > >
> > > > Regards,
> > > > Etienne
> > > >
> > > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/a47771de/attachment-0001.html
From rush at winkey.org  Fri Sep  2 11:49:03 2011
From: rush at winkey.org (Brian Case)
Date: Fri Sep  2 13:17:51 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <CAPMKADVpD0b7zp9i32bOy6s0BD3GF2cHsQmfAhQ3SB4Tszdz_A@mail.gmail.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201108262120.07119.even.rouault@mines-paris.org>
	<1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>
	<1314572053.8205.15.camel@octopi>
	<1314710318.42499.YahooMailNeo@web36907.mail.mud.yahoo.com>
	<CAPMKADVpD0b7zp9i32bOy6s0BD3GF2cHsQmfAhQ3SB4Tszdz_A@mail.gmail.com>
Message-ID: <1314978543.8205.28.camel@octopi>

Etienne

I can read it with ogr. I am wondering if others have interest too

http://svn.osgeo.org/gdal/sandbox/winkey/ogr-netcdf/ogrsf_frmts/netcdf/


Brian

On Fri, 2011-09-02 at 10:57 -0300, Etienne Tourigny wrote:
> There has been recent work on incorporating netcdf support for point
> and trajectory data with Talend, maybe that can help?
> 
> 
> http://www.neogeo-online.net/blog/archives/1350/
> http://talendforge.org/svn/sdi/trunk/org.talend.sdi.designer.components.sandbox/components/sNetCDFInput/
> 
> 
> Etienne
> 
> On Tue, Aug 30, 2011 at 10:18 AM, Etienne Tourigny
> <etiennesky@yahoo.com> wrote:
>         Brian,
>         
>         I am not familiar with madis data.  I assume that it is
>         point-data for meteorological stations?
>         
>         If you like, please post your ideas and a short description in
>         a new topic in the wiki entry at
>         http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements .
>         
>         Etienne
>         
>         
>         
>         
>         ----- Original Message -----
>         From: Brian Case <rush@winkey.org>
>         To: Etienne Tourigny <etiennesky@yahoo.com>
>         Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
>         Sent: Sunday, August 28, 2011 7:54:13 PM
>         Subject: Re: [gdal-dev] Re: discussion on improvements to the
>         NetCDF driver and CF-1 convention
>         
>         any thoughts on a ogr netcdf driver? I have a simple one for
>         madis data
>         that needs work in my sandbox
>         
>         Brian
>         
>         
>         
>         On Sun, 2011-08-28 at 14:56 -0700, Etienne Tourigny wrote:
>         > I have created a new wiki page at
>         http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements ,
>         following Even's suggestion (Thanks Even).
>         >
>         > The following topics have been included:
>         >
>         >
>         > Topics:
>         >
>         > 1 - UNIDATA NetCDF Conventions
>         >
>         > 2 - Metadata
>         > 3 - Datum issues
>         > 4 - Dimension issues
>         > 5 - Compatibility with other software
>         > 6 - Test files
>         > 7 - Contribution
>         > Discussion
>         >
>         > I encourage interested parties in participating in this
>         discussion in the wiki and in the mailing list.
>         >
>         >
>         > In particular, it would be useful to collect information on
>         contributors and obtain test files with issues and the
>         expected outcome.
>         >
>         > regards, Etienne
>         >
>         >
>         > ----- Original Message -----
>         > From: Even Rouault <even.rouault@mines-paris.org>
>         > To: gdal-dev@lists.osgeo.org; Etienne Tourigny
>         <etiennesky@yahoo.com>
>         > Cc:
>         > Sent: Friday, August 26, 2011 4:20:06 PM
>         > Subject: Re: [gdal-dev] Re: discussion on improvements to
>         the NetCDF driver and CF-1 convention
>         >
>         > Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a
>         ?crit :
>         >
>         > My thoughts, just from a process point of view, not being
>         myself deeply
>         > involved in the NetCDF format :
>         >
>         > * A wiki page (I'd suggest either a new page -
>         > http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at
>         least a clearly
>         > identified section in the current page, to avoid confusion
>         for outsiders about
>         > what is currently implemented and what is not) can be a
>         convenient way of
>         > structuring and editing the content by anyone with a osgeo
>         id. But discussions
>         > on the mailing list are also OK, at least to notify new
>         content has been added
>         > (provided that it doesn't cause flooding on the mailing
>         list ;-))
>         >
>         > * A http://download.osgeo.org/gdal/data/netcdf directory
>         would be the right
>         > place to store NetCDF sample files, provided they are free
>         under the terms of
>         > http://download.osgeo.org/gdal/data/COPYING . As write
>         access to it is
>         > restricted to people with appropriate rights, having those
>         rights, I can help
>         > uploading files over there. Having small (typically < or ~
>         10 KB ) sample files
>         > is also good so they can be directly included in SVN under
>         the
>         > autotest/gdrivers/data directory and thus easily used by
>         regression tests.
>         >
>         > * Tickets can be used to track the implementation of
>         specific items and
>         > bugfixes. But I've found they are not generally suitable for
>         brainstorming when
>         > the discussion is lasting, as you cannot edit already posted
>         content. Wiki is
>         > clearly better for this.
>         >
>         > * Looking at past history, I see we haven't yet used the RFC
>         formalism for
>         > work specific to one driver, while it doesn't require
>         changes or extensions to
>         > the GDAL API. But it wouldn't hurt to create one if the need
>         arises. Anyway, a
>         > point that might require care and some consensus among the
>         interested parties
>         > is about how backward compatibility issues, in particular
>         with respect to files
>         > produced by older GDAL versions, are adressed.
>         > http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote
>         is required.
>         >
>         > Best regards,
>         >
>         > Even
>         >
>         > > Hi all,
>         > >
>         > > Since a few people have shown an interest in helping out,
>         I would suggest
>         > > to set up space where we can post ideas, goals and test
>         files.  This could
>         > > take the form of one of the following:
>         > >
>         > > - a new wiki entry in trac, or the existing one at
>         > > http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository
>         at
>         > > http://download.osgeo.org/gdal/data/netcdf as suggested
>         some time ago by
>         > > warmerdam
>         > >
>         > > and/or
>         > >
>         > > - a new ticket in trac (which allows to post files)
>         > >
>         > > What are you thoughts about this?  Would it make sense to
>         eventually
>         > > prepare an RFC?
>         > >
>         > >
>         > >
>         > > I would suggest that each group identify the problems with
>         the current
>         > > driver in terms of importing and exporting, post the files
>         that they would
>         > > like to be supported, which other software they use with
>         the netcdf files,
>         > > and their proposed contribution (code, test, ideas, etc.).
>         > >
>         > > Those that cannot participate in code development can help
>         out in testing
>         > > and discussion. Personally, I can write and test code,
>         given example files
>         > > and expected outcome.
>         > >
>         > >
>         > > Now to your specific comments, Knut-Frode:
>         > >
>         > > 1) Yes CF-1.5 should be the goal, although I'm not sure we
>         need to support
>         > > upgrading/downgrading.
>         > >
>         > > 5) The WGS84 issue needs further research. Weather and
>         ocean data are in
>         > > lat/lon, but what is the sphere radius assumed by the
>         various data
>         > > providers and  the models which output/import netcdf
>         files? I agree that a
>         > > small error does not make a difference with low-resolution
>         dataset, but
>         > > I'd like to be sure in any case. We also need a means to
>         translate the
>         > > CF-1.x datum information into EPSG/Proj.4 values.
>         > >
>         > >
>         > > 7) There is some support of a z-axis right now, in fact
>         they driver assumes
>         > > that a third dimension is vertical if I understand
>         correctly. However, I
>         > > have not tested nor looked into that.  This issue
>         definitely needs come
>         > > planning and an RFC, IMHO.
>         > >
>         > >
>         > > Kyle, thanks for you help and interest!
>         > >
>         > >
>         > > cheers,
>         > > Etienne
>         > >
>         > >
>         > > ________________________________
>         > > From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
>         > > To: gdal-dev@lists.osgeo.org
>         > > Sent: Friday, August 26, 2011 4:41:02 AM
>         > > Subject: [gdal-dev] Re: discussion on improvements to the
>         NetCDF driver and
>         > > CF-1 convention
>         > >
>         > > Etienne,
>         > >
>         > > My group is also very much in support of the suggested
>         improvements, as
>         > > NetCDF/CF is becoming the most important standard for data
>         > > storage/exchange in our community (climate, meteorology,
>         oceanography). My
>         > > group is not much into GDAL driver development (at least
>         not yet), but we
>         > > are now building our future very much around GDAL, so we
>         are interested to
>         > > join the discussion around improved support for NetCDF/CF
>         reading and
>         > > writing.
>         > >
>         > > About some of the mentioned issues:
>         > >
>         > > 1) The latest version of CF is 1.5, so it would be better
>         to target 1.5 (or
>         > > 1.x) than 1.0. Ideally the driver could be made generic
>         for smooth upgrade
>         > > to newer (or downgrade to older) versions of the CF
>         conventions.
>         > >
>         > > 5) It sounds meaningful to assume WGS84 datum if not
>         specified. I believe
>         > > at least 99% of data typically stored in NetCDF/CF will
>         have this datum,
>         > > and even when that is not the case, positioning errors
>         less than 100 m
>         > > should normally have little impact for the types of data.
>         Precision on
>         > > datum level is probably more relevant for more typical
>         GIS-data with
>         > > roads, borders etc. A warning could however be issued each
>         time the driver
>         > > has to assume WGS84.
>         > >
>         > > 7) We agree in particular that proper handling of time
>         axis is of high
>         > > value. This is one of the issues which is highly relevant
>         for climate-data
>         > > (often 4-dimensional), but not well supported by typical
>         GIS-software or
>         > > standards designed with 2-dimensional data in mind. A
>         general
>         > > representation of a time-axis (or even vertical axis) in
>         GDAL would be
>         > > ideal, but that would probably be too much an effort for
>         anyone to
>         > > develop.
>         > >
>         > >
>         > > Knut-Frode
>         > > Nansen Environmental and Remote Sensing Center
>         > >
>         > > On 24/08/2011 22:37, Etienne Tourigny wrote:
>         > > > Hi all,
>         > > >
>         > > > I would like to start a discussion with those interested
>         about fixing
>         > > > various issues in the NetCDF driver.
>         > > >
>         > > > As it stands, it is not fully CF-1.0 compliant, and
>         produces
>         > > > geographical grids that are not valid for other
>         software.
>         > > > Also, the infamous "up-side down" problem has been
>         addressed for
>         > > > importing netcdfs, but needs to be addressed for
>         exporting.
>         > > >
>         > > > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
>         > > > I have been submitting patches for some time to fix the
>         related issues.
>         > > >
>         > > > I have identified a number of issues, of which the
>         following have been
>         > > > fixed partially in my proposed patch.
>         > > >
>         > > > 1- conform to the cf-1.0 standard for geographical grids
>         (creating lat
>         > > > and lon dimensions and variables)
>         > > > 2- make netcdf grids "bottom-up" by default, as all
>         software out there
>         > > > uses that convention
>         > > > 3- fix problems related to floating-point / string
>         conversions (also
>         > > > reported in issue #4200 )
>         > > > 4- fix metadata handling and duplication (as reported in
>         issue #4204),
>         > > > and keep band (variable) metadata outside of the global
>         metadata
>         > > >
>         > > > Pending issues:
>         > > >
>         > > > 5- how to deal with netcdfs which have no datum? Can we
>         assume WGS84?
>         > > > These files are extremely common, and CF-1.0 has
>         provisions for
>         > > > identifying the key variables, but no Proj/Wkt codes.
>         > > > 6- fix proper export of projected CRS (this is not fully
>         necessary
>         > > > though) with lat/lon values respecting CF-1.0
>         > > > 7- handle time axis properly (at least when creating a
>         netcdf) - that
>         > > > would be great for import/export of netcdf
>         > > >
>         > > > Regards,
>         > > > Etienne
>         > > >
>         > > >
>         > > > _______________________________________________
>         > > > gdal-dev mailing list
>         > > > gdal-dev@lists.osgeo.org
>         > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         > >
>         > > _______________________________________________
>         > > gdal-dev mailing list
>         > > gdal-dev@lists.osgeo.org
>         > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         > > _______________________________________________
>         > > gdal-dev mailing list
>         > > gdal-dev@lists.osgeo.org
>         > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev@lists.osgeo.org
>         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 
> 


From even.rouault at mines-paris.org  Fri Sep  2 13:42:27 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  2 15:17:47 2011
Subject: [gdal-dev] Java Erdas Image
In-Reply-To: <CANxi1vTkbgCBYtbpmQWSa8oDSALoqT-c_n7BRz5McYQfCpij9g@mail.gmail.com>
References: <CANxi1vTkbgCBYtbpmQWSa8oDSALoqT-c_n7BRz5McYQfCpij9g@mail.gmail.com>
Message-ID: <201109021942.27572.even.rouault@mines-paris.org>

Le vendredi 02 septembre 2011 02:29:35, Leidy Garzon a ?crit :
> Hello
> I am working in a project using Erdas Apollo Server, I have to build a
> excel report from a .img file but I dont know how to get the pixel data
> from the image.
> I was trying using GDALImageReader class from
> imageio-ext-gdalerdasimg-1.1.1.jar but I dont know how use it, I would
> appreciate if somebody could give me a example or help.

The imageio-ext project is an independant project that makes use of GDAL, but 
which is not affiliated with the GDAL project. You might have better support by 
directly asking to them :

http://java.net/projects/imageio-ext/lists/users/archive
From jorge.arevalo at deimos-space.com  Fri Sep  2 14:13:07 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Sep  2 15:50:20 2011
Subject: [gdal-dev] Question about rotated rasters
Message-ID: <CAK29iX9faFUx_4j8iYmiMuAVbyckwS=xxdr-bC73VGy+_f40BQ@mail.gmail.com>

Hello,

In gdal_translate source code I can read that the projwin option is
not valid if the raster is rotated. And related with this (I think),
in WCS driver, in GetCoverage function, you can see these lines

dfMinX = adfGeoTransform[0] +
        (nXOff) * adfGeoTransform[1];
dfMaxX = adfGeoTransform[0] +
        (nXOff + nXSize) * adfGeoTransform[1];
dfMaxY = adfGeoTransform[3] +
        (nYOff) * adfGeoTransform[5];
dfMinY = adfGeoTransform[3] +
        (nYOff + nYSize) * adfGeoTransform[5];

So, the georeferenced window is calculated from the source window (in
pixels) without using the rotation about axes (fields 2 and 4 from
geotransform array)

My question is: why? Why can't I calculate the projected window from a
source window in pixels in case of rotated rasters? I guess this is a
newbie question...

Thanks in advance, and best regards

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From even.rouault at mines-paris.org  Fri Sep  2 14:29:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  2 16:07:44 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
In-Reply-To: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
References: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
Message-ID: <201109022029.52624.even.rouault@mines-paris.org>

Le vendredi 02 septembre 2011 02:42:10, Etienne Tourigny a ?crit :
> Hi all,
> 
> Can someone point me to the correct emacs configuration (in .emacs file)
> that follows GDAL c++ coding standards? 
> 

Sorry, I don't use emacs...

> 
> It would be a nice addition to the Developer standards at
> http://trac.osgeo.org/gdal/wiki/rfc8_devguide .


> 
> The following seems to work, setting the spacing to 4, using spaces instead
> of tabs and also indenting "case" statements. Am I missing anything?
> 
> 
> (setq-default c-basic-offset 4
>           tab-width 4
>           indent-tabs-mode nil)
> (c-set-offset 'case-label '+)

Not sure if it is RFC material, but you can definitely share it in 
http://trac.osgeo.org/gdal/wiki/HowToContribute 

You have summed up perfectly the most important coding conventions.

You have also probably noticed the nice visual ascii art that is generally 
prepended before each function/method :

/************************************************************************/
/*                               foo()                                  */
/************************************************************************/

And if you really want to confuse FrankW and make him believe he has written 
the code himself, you'd write if( foo ) rather than if (foo) ;-)


> 
> Thanks,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri Sep  2 14:45:40 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  2 16:24:20 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
In-Reply-To: <201109022029.52624.even.rouault@mines-paris.org>
References: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201109022029.52624.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBfRM91855dV4jaHMxk2eE3waoXwZka5EmioG9BWwkk4Sw@mail.gmail.com>

On Fri, Sep 2, 2011 at 11:29 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> (setq-default c-basic-offset 4
>> ? ? ? ? ? tab-width 4
>> ? ? ? ? ? indent-tabs-mode nil)
>> (c-set-offset 'case-label '+)
>
> Not sure if it is RFC material, but you can definitely share it in
> http://trac.osgeo.org/gdal/wiki/HowToContribute
>
> You have summed up perfectly the most important coding conventions.

Etienne,

Agreed, 4 character indent using spaces not
tabs is the key thing to avoid messiness for others.

> You have also probably noticed the nice visual ascii art that is generally
> prepended before each function/method :
>
> /************************************************************************/
> /* ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? foo() ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?*/
> /************************************************************************/

I actually have emacs macros for editing these header blocks.
I could share them if you are interested, but they are not that
critical.

I deliberately have avoided trying to be really strict about code
formatting in GDAL/OGR.  I think over-strictness can be offputting
to new contributors and lead to disputes over details.  But do
make an effort to fit into the modules you work on and feel
free to take more liberties on drivers that you are writing from
scratch.

> And if you really want to confuse FrankW and make him believe he has written
> the code himself, you'd write if( foo ) rather than if (foo) ;-)

This is one of the details that seems fairly idiosyncratic
to me, but it is contrary to Google code style so perhaps
I will adapt to "if (foo)" now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etiennesky.dev at gmail.com  Fri Sep  2 15:06:16 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  2 16:46:01 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
In-Reply-To: <CA+YzLBfRM91855dV4jaHMxk2eE3waoXwZka5EmioG9BWwkk4Sw@mail.gmail.com>
References: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201109022029.52624.even.rouault@mines-paris.org>
	<CA+YzLBfRM91855dV4jaHMxk2eE3waoXwZka5EmioG9BWwkk4Sw@mail.gmail.com>
Message-ID: <CAPMKADXOKiX5KrN0k5j0B+p3EYquLLYgWKih77syDQbu4wwyqQ@mail.gmail.com>

Frank, please do send me your emacs macros.   With your permission I will
add that information to the wiki as suggested by Even.

I agree with your policy of not being too strict, but a minimal set of
standards is a good thing IMHO.
It could help in elaborating a suggested standard in the wiki page (just my
2 cents).

Two issues that come to mind are

1) where to put opening braces in if/else/for blocks  It can get a little
messy, as different flavors are used by different people

if ( 1 ) {
...
}
vs
if ( 1 )
{
...
}

2) one-liner if/else statements without braces.  Some projects like qgis
discourage their use, but personally I like it more compact


thanks, Etienne

On Fri, Sep 2, 2011 at 3:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On Fri, Sep 2, 2011 at 11:29 AM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
> >> (setq-default c-basic-offset 4
> >>           tab-width 4
> >>           indent-tabs-mode nil)
> >> (c-set-offset 'case-label '+)
> >
> > Not sure if it is RFC material, but you can definitely share it in
> > http://trac.osgeo.org/gdal/wiki/HowToContribute
> >
> > You have summed up perfectly the most important coding conventions.
>
> Etienne,
>
> Agreed, 4 character indent using spaces not
> tabs is the key thing to avoid messiness for others.
>
> > You have also probably noticed the nice visual ascii art that is
> generally
> > prepended before each function/method :
> >
> >
> /************************************************************************/
> > /*                               foo()
>  */
> >
> /************************************************************************/
>
> I actually have emacs macros for editing these header blocks.
> I could share them if you are interested, but they are not that
> critical.
>
> I deliberately have avoided trying to be really strict about code
> formatting in GDAL/OGR.  I think over-strictness can be offputting
> to new contributors and lead to disputes over details.  But do
> make an effort to fit into the modules you work on and feel
> free to take more liberties on drivers that you are writing from
> scratch.
>
> > And if you really want to confuse FrankW and make him believe he has
> written
> > the code himself, you'd write if( foo ) rather than if (foo) ;-)
>
> This is one of the details that seems fairly idiosyncratic
> to me, but it is contrary to Google code style so perhaps
> I will adapt to "if (foo)" now.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/af74ad51/attachment-0001.html
From even.rouault at mines-paris.org  Fri Sep  2 15:25:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  2 17:06:15 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
In-Reply-To: <CAPMKADXOKiX5KrN0k5j0B+p3EYquLLYgWKih77syDQbu4wwyqQ@mail.gmail.com>
References: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<CA+YzLBfRM91855dV4jaHMxk2eE3waoXwZka5EmioG9BWwkk4Sw@mail.gmail.com>
	<CAPMKADXOKiX5KrN0k5j0B+p3EYquLLYgWKih77syDQbu4wwyqQ@mail.gmail.com>
Message-ID: <201109022125.16740.even.rouault@mines-paris.org>

Le vendredi 02 septembre 2011 21:06:16, Etienne Tourigny a ?crit :
> Frank, please do send me your emacs macros.   With your permission I will
> add that information to the wiki as suggested by Even.
> 
> I agree with your policy of not being too strict, but a minimal set of
> standards is a good thing IMHO.
> It could help in elaborating a suggested standard in the wiki page (just my
> 2 cents).
> 
> Two issues that come to mind are
> 
> 1) where to put opening braces in if/else/for blocks  It can get a little
> messy, as different flavors are used by different people
> 
> if ( 1 ) {
> ...
> }
> vs
> if ( 1 )
> {
> ...
> }


if ( 1 )
{
    ...
}

seems to be the most used convention in GDAL source code

> 
> 2) one-liner if/else statements without braces.  Some projects like qgis
> discourage their use, but personally I like it more compact

I'm just looking at a file where I can see

    if( pszSrcEncoding[0] == '\0' )
        pszSrcEncoding = CPL_ENC_ISO8859_1;

    if( pszDstEncoding[0] == '\0' )
        pszDstEncoding = CPL_ENC_ISO8859_1;

So their use isn't discouraged. But in the case of a "if() {} else if() ..."  
where some of the if or else if already use braces, braces are generally used. 
For example :

    else if( chNext == '<' && !psContext->bInElement )
    {
        psContext->eTokenType = TOpen;
        psContext->bInElement = TRUE;
    }
    else if( chNext == '>' && psContext->bInElement )
    {
        psContext->eTokenType = TClose;
        psContext->bInElement = FALSE;
    }
    else if( chNext == '=' && psContext->bInElement )
    {
        psContext->eTokenType = TEqual;
    }
    else if( chNext == '\0' )
    {
        psContext->eTokenType = TNone;
    }

That seems to be "natural" in that case.

As Frank said, we tend not to engage in style wars, provided that the code is  
readable.

> 
> 
> thanks, Etienne
> 
> On Fri, Sep 2, 2011 at 3:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > On Fri, Sep 2, 2011 at 11:29 AM, Even Rouault
> > 
> > <even.rouault@mines-paris.org> wrote:
> > >> (setq-default c-basic-offset 4
> > >> 
> > >>           tab-width 4
> > >>           indent-tabs-mode nil)
> > >> 
> > >> (c-set-offset 'case-label '+)
> > > 
> > > Not sure if it is RFC material, but you can definitely share it in
> > > http://trac.osgeo.org/gdal/wiki/HowToContribute
> > > 
> > > You have summed up perfectly the most important coding conventions.
> > 
> > Etienne,
> > 
> > Agreed, 4 character indent using spaces not
> > tabs is the key thing to avoid messiness for others.
> > 
> > > You have also probably noticed the nice visual ascii art that is
> > 
> > generally
> > 
> > > prepended before each function/method :
> > /************************************************************************
> > /
> > 
> > > /*                               foo()
> >  
> >  */
> > 
> > /************************************************************************
> > /
> > 
> > I actually have emacs macros for editing these header blocks.
> > I could share them if you are interested, but they are not that
> > critical.
> > 
> > I deliberately have avoided trying to be really strict about code
> > formatting in GDAL/OGR.  I think over-strictness can be offputting
> > to new contributors and lead to disputes over details.  But do
> > make an effort to fit into the modules you work on and feel
> > free to take more liberties on drivers that you are writing from
> > scratch.
> > 
> > > And if you really want to confuse FrankW and make him believe he has
> > 
> > written
> > 
> > > the code himself, you'd write if( foo ) rather than if (foo) ;-)
> > 
> > This is one of the details that seems fairly idiosyncratic
> > to me, but it is contrary to Google code style so perhaps
> > I will adapt to "if (foo)" now.
> > 
> > Best regards,
> > --
> > 
> > ---------------------------------------+---------------------------------
> > ----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Software Developer
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri Sep  2 15:26:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  2 17:07:58 2011
Subject: [gdal-dev] emacs configuration for correct code indentation?
In-Reply-To: <CAPMKADXOKiX5KrN0k5j0B+p3EYquLLYgWKih77syDQbu4wwyqQ@mail.gmail.com>
References: <1314924130.25183.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201109022029.52624.even.rouault@mines-paris.org>
	<CA+YzLBfRM91855dV4jaHMxk2eE3waoXwZka5EmioG9BWwkk4Sw@mail.gmail.com>
	<CAPMKADXOKiX5KrN0k5j0B+p3EYquLLYgWKih77syDQbu4wwyqQ@mail.gmail.com>
Message-ID: <CA+YzLBdm7A7Xcfo3JhySC3k44iC6tS6B-q8GND=HbL=J5ypQVg@mail.gmail.com>

On Fri, Sep 2, 2011 at 12:06 PM, Etienne Tourigny
<etiennesky.dev@gmail.com> wrote:
> Frank, please do send me your emacs macros. ? With your permission I will
> add that information to the wiki as suggested by Even.

Etienne,

I have added a note to myself to collect the header macro
tonight.  It is a bit involved, and written by someone else
when I was at PCI so it is not trivial.

> I agree with your policy of not being too strict, but a minimal set of
> standards is a good thing IMHO.
> It could help in elaborating a suggested standard in the wiki page (just my
> 2 cents).
> Two issues that come to mind are
> 1) where to put opening braces in if/else/for blocks ?It can get a little
> messy, as different flavors are used by different people
> if ( 1 ) {
> ...
> }
> vs
> if ( 1 )
> {
> ...
> }
> 2) one-liner if/else statements without braces. ?Some projects like qgis
> discourage their use, but personally I like it more compact

These are both examples of style issues I would not choose to
take a position on.  They don't materially affect readability
of code (IMHO) and a mixture of approaches to the above is
not harmful.  So I'd rather just say nothing.

Indentation issues on the other hand can render code
very hard to read (ie. using tabs with a mixture of 4
or 8 indent assumptions).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Fri Sep  2 16:42:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  2 18:27:34 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
Message-ID: <201109022242.16846.even.rouault@mines-paris.org>

Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
---

Hi,

Kyle Shannon and I would like to propose Etienne Tourigny for commit access to 
GDAL subversion repository.

Etienne has recently contributed in the developement of the netCDF driver. He 
has submitted many ideas for fixes and improvements in the driver ( see this 
thread http://lists.osgeo.org/pipermail/gdal-dev/2011-August/029865.html ), 
that he has organized in this wiki page :

http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements

He has also proposed various patches to tickets in Trac, or engaged discussion 
with their reporters :

http://trac.osgeo.org/gdal/ticket/2129
http://trac.osgeo.org/gdal/ticket/2893
http://trac.osgeo.org/gdal/ticket/3957

Etienne has graduated in Computer Science at Universit? de Montr?al and 
Master's in Atmospheric Science at UQAM. He's currently working on his PhD in 
Meteorology at INPE/CPTEC/CCST in Brazil. His interest in GDAL has arisen 
because he's working with burned area and land cover maps at high (Landsat) 
and medium (MODIS) resolutions and he has a need for fixing and improving the 
driver so as to be able to produce files in netcdf format. He has also been 
involved in the CDO operators, and started a discussion with the devs on 
incorporating geotiff and full Proj.4 support. He has also submitted minor bug 
reports and enhancements for QGIS.

Etienne, could you reply to this message indicating your agreement to the
guidelines listed in:

    http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start voting with my support:

+1

Best regards,

Even
From warmerdam at pobox.com  Fri Sep  2 16:43:18 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  2 18:28:31 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBdFvU909iHavvHQT4bpq2sVaprvzU20rz1ZKkbhBndcuQ@mail.gmail.com>

On Fri, Sep 2, 2011 at 1:42 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etiennesky.dev at gmail.com  Fri Sep  2 16:48:31 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  2 18:34:07 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <CAPMKADUeVk-Zd_UeD0q4=gTQZgJ6dkcxxMaNr+F=MRBQ+TqBZw@mail.gmail.com>

I agree with the RFC3 guidelines.

thanks for the support,
Etienne

On Fri, Sep 2, 2011 at 5:42 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
> ---
>
> Hi,
>
> Kyle Shannon and I would like to propose Etienne Tourigny for commit access
> to
> GDAL subversion repository.
>
> Etienne has recently contributed in the developement of the netCDF driver.
> He
> has submitted many ideas for fixes and improvements in the driver ( see
> this
> thread http://lists.osgeo.org/pipermail/gdal-dev/2011-August/029865.html),
> that he has organized in this wiki page :
>
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
>
> He has also proposed various patches to tickets in Trac, or engaged
> discussion
> with their reporters :
>
> http://trac.osgeo.org/gdal/ticket/2129
> http://trac.osgeo.org/gdal/ticket/2893
> http://trac.osgeo.org/gdal/ticket/3957
>
> Etienne has graduated in Computer Science at Universit? de Montr?al and
> Master's in Atmospheric Science at UQAM. He's currently working on his PhD
> in
> Meteorology at INPE/CPTEC/CCST in Brazil. His interest in GDAL has arisen
> because he's working with burned area and land cover maps at high (Landsat)
> and medium (MODIS) resolutions and he has a need for fixing and improving
> the
> driver so as to be able to produce files in netcdf format. He has also been
> involved in the CDO operators, and started a discussion with the devs on
> incorporating geotiff and full Proj.4 support. He has also submitted minor
> bug
> reports and enhancements for QGIS.
>
> Etienne, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with my support:
>
> +1
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/f5e983bb/attachment.html
From ksshannon at gmail.com  Fri Sep  2 17:04:53 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Sep  2 18:51:31 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Etienne Tourigny
In-Reply-To: <CAPMKADUeVk-Zd_UeD0q4=gTQZgJ6dkcxxMaNr+F=MRBQ+TqBZw@mail.gmail.com>
References: <201109022242.16846.even.rouault@mines-paris.org>
	<CAPMKADUeVk-Zd_UeD0q4=gTQZgJ6dkcxxMaNr+F=MRBQ+TqBZw@mail.gmail.com>
Message-ID: <CAJ0mEz1wFL1jc1u83yiAsnyzcSoMjjFg1SZX4dy=-DNihVx2jg@mail.gmail.com>

+1

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */




On Fri, Sep 2, 2011 at 14:48, Etienne Tourigny <etiennesky.dev@gmail.com>wrote:

> I agree with the RFC3 guidelines.
>
> thanks for the support,
> Etienne
>
> On Fri, Sep 2, 2011 at 5:42 PM, Even Rouault <even.rouault@mines-paris.org
> > wrote:
>
>> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
>> ---
>>
>> Hi,
>>
>> Kyle Shannon and I would like to propose Etienne Tourigny for commit
>> access to
>> GDAL subversion repository.
>>
>> Etienne has recently contributed in the developement of the netCDF driver.
>> He
>> has submitted many ideas for fixes and improvements in the driver ( see
>> this
>> thread http://lists.osgeo.org/pipermail/gdal-dev/2011-August/029865.html),
>> that he has organized in this wiki page :
>>
>> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
>>
>> He has also proposed various patches to tickets in Trac, or engaged
>> discussion
>> with their reporters :
>>
>> http://trac.osgeo.org/gdal/ticket/2129
>> http://trac.osgeo.org/gdal/ticket/2893
>> http://trac.osgeo.org/gdal/ticket/3957
>>
>> Etienne has graduated in Computer Science at Universit? de Montr?al and
>> Master's in Atmospheric Science at UQAM. He's currently working on his PhD
>> in
>> Meteorology at INPE/CPTEC/CCST in Brazil. His interest in GDAL has arisen
>> because he's working with burned area and land cover maps at high
>> (Landsat)
>> and medium (MODIS) resolutions and he has a need for fixing and improving
>> the
>> driver so as to be able to produce files in netcdf format. He has also
>> been
>> involved in the CDO operators, and started a discussion with the devs on
>> incorporating geotiff and full Proj.4 support. He has also submitted minor
>> bug
>> reports and enhancements for QGIS.
>>
>> Etienne, could you reply to this message indicating your agreement to the
>> guidelines listed in:
>>
>>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>>
>> I'll start voting with my support:
>>
>> +1
>>
>> Best regards,
>>
>> Even
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/61f8fdb0/attachment-0001.html
From aperi2007 at gmail.com  Fri Sep  2 17:40:22 2011
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri Sep  2 19:28:41 2011
Subject: [gdal-dev] Merging tiff4 files
Message-ID: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>

Hi,
I need to merge some Tiff4 (bw) raster and obtain 1 only more big tiff4
raster.

I'm try-ing this with gdal_merge.py
and using a comand like this:

python gdal_merge.py -o ../raster/216.tif -n 1 -ot Byte
../raster/10k/216*.tif

Unfortunately the resulted raster is intellegible (the input raster was all
clearly visible).
It is an all black image :(

I tried also with option "-n 0" but the result is the same.

I analyze the input raster using gdalinfo, and the result is this.

------------------
>gdalinfo.exe ../raster/10k/216100.tif
Driver: GTiff/GeoTIFF
Files: ../raster/10k/216100.tif
       ../raster/10k/216100.tfw
Size is 10065, 10049
Coordinate System is:
LOCAL_CS["unnamed",
    UNIT["unknown",1]]
Origin = (1561222.860009765700000,4927094.449960937700000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  TIFFTAG_SOFTWARE=Arc/Info
  TIFFTAG_XRESOLUTION=2
  TIFFTAG_YRESOLUTION=2
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
  MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 1561222.860, 4927094.450)
Lower Left  ( 1561222.860, 4922069.950)
Upper Right ( 1566255.360, 4927094.450)
Lower Right ( 1566255.360, 4922069.950)
Center      ( 1563739.110, 4924582.200)
Band 1 Block=10065x32 Type=Byte, ColorInterp=Palette
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255
-----------------

What am I wrong ?

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/c13985b6/attachment.html
From aperi2007 at gmail.com  Fri Sep  2 17:42:47 2011
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri Sep  2 19:31:15 2011
Subject: [gdal-dev] Re: Merging tiff4 files
Message-ID: <CABqTJk_ptfJoh-DmMS2p=t0icBAMP4LP9k1nY5zOwWovYmJm3A@mail.gmail.com>

>Unfortunately the resulted raster is intellegible (the input raster was all
>clearly visible).
>It is an all black image :(

oops sorry for my english.

I would say "unintellegible"


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110902/937fc3a4/attachment.html
From warmerdam at pobox.com  Fri Sep  2 17:43:04 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  2 19:34:49 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
Message-ID: <CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>

Andrea,

I think the problem is that these are one bit files with
a black/white color table and by default gdal_merge.py
does not copy the color table.  If you add the -pct
switch it should do so.

I imagine the result file does have pixels with values of
zero and one, but you won't see them as different in
most viewers.

Best regards,

On Fri, Sep 2, 2011 at 2:40 PM, Andrea Peri <aperi2007@gmail.com> wrote:
> Hi,
> I need to merge some Tiff4 (bw) raster and obtain 1 only more big tiff4
> raster.
>
> I'm try-ing this with gdal_merge.py
> and using a comand like this:
>
> python gdal_merge.py -o ../raster/216.tif -n 1 -ot Byte
> ../raster/10k/216*.tif
>
> Unfortunately the resulted raster is intellegible (the input raster was all
> clearly visible).
> It is an all black image :(
>
> I tried also with option "-n 0" but the result is the same.
>
> I analyze the input raster using gdalinfo, and the result is this.
>
> ------------------
>>gdalinfo.exe ../raster/10k/216100.tif
> Driver: GTiff/GeoTIFF
> Files: ../raster/10k/216100.tif
> ?????? ../raster/10k/216100.tfw
> Size is 10065, 10049
> Coordinate System is:
> LOCAL_CS["unnamed",
> ??? UNIT["unknown",1]]
> Origin = (1561222.860009765700000,4927094.449960937700000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Metadata:
> ? AREA_OR_POINT=Point
> ? TIFFTAG_RESOLUTIONUNIT=1 (unitless)
> ? TIFFTAG_SOFTWARE=Arc/Info
> ? TIFFTAG_XRESOLUTION=2
> ? TIFFTAG_YRESOLUTION=2
> Image Structure Metadata:
> ? COMPRESSION=CCITTFAX4
> ? INTERLEAVE=BAND
> ? MINISWHITE=YES
> Corner Coordinates:
> Upper Left? ( 1561222.860, 4927094.450)
> Lower Left? ( 1561222.860, 4922069.950)
> Upper Right ( 1566255.360, 4927094.450)
> Lower Right ( 1566255.360, 4922069.950)
> Center????? ( 1563739.110, 4924582.200)
> Band 1 Block=10065x32 Type=Byte, ColorInterp=Palette
> ? Image Structure Metadata:
> ??? NBITS=1
> ? Color Table (RGB with 2 entries)
> ??? 0: 255,255,255,255
> ??? 1: 0,0,0,255
> -----------------
>
> What am I wrong ?
>
> Thx,
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From aperi2007 at gmail.com  Fri Sep  2 18:15:50 2011
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri Sep  2 20:06:03 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>
Message-ID: <CABqTJk-=e_8F9uypD2z=BF0zkJeoUVJoHuFXiMp36CoT62kSbw@mail.gmail.com>

Hi Frank,
thx for very rapid response.

gdal_merge.py now work and the result is intellegible.

testing the result ,
I notice the result is a 256 color image.

Instead the starting image was true CCITTFax4 raster.
This mean a huge dimension of files.

Is possible to have a real Tiff4 (1 bit color) image as result ?

Thx,

Andrea.

2011/9/2 Frank Warmerdam <warmerdam@pobox.com>

> Andrea,
>
> I think the problem is that these are one bit files with
> a black/white color table and by default gdal_merge.py
> does not copy the color table.  If you add the -pct
> switch it should do so.
>
> I imagine the result file does have pixels with values of
> zero and one, but you won't see them as different in
> most viewers.
>
> Best regards,
>
> On Fri, Sep 2, 2011 at 2:40 PM, Andrea Peri <aperi2007@gmail.com> wrote:
> > Hi,
> > I need to merge some Tiff4 (bw) raster and obtain 1 only more big tiff4
> > raster.
> >
> > I'm try-ing this with gdal_merge.py
> > and using a comand like this:
> >
> > python gdal_merge.py -o ../raster/216.tif -n 1 -ot Byte
> > ../raster/10k/216*.tif
> >
> > Unfortunately the resulted raster is intellegible (the input raster was
> all
> > clearly visible).
> > It is an all black image :(
> >
> > I tried also with option "-n 0" but the result is the same.
> >
> > I analyze the input raster using gdalinfo, and the result is this.
> >
> > ------------------
> >>gdalinfo.exe ../raster/10k/216100.tif
> > Driver: GTiff/GeoTIFF
> > Files: ../raster/10k/216100.tif
> >        ../raster/10k/216100.tfw
> > Size is 10065, 10049
> > Coordinate System is:
> > LOCAL_CS["unnamed",
> >     UNIT["unknown",1]]
> > Origin = (1561222.860009765700000,4927094.449960937700000)
> > Pixel Size = (0.500000000000000,-0.500000000000000)
> > Metadata:
> >   AREA_OR_POINT=Point
> >   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
> >   TIFFTAG_SOFTWARE=Arc/Info
> >   TIFFTAG_XRESOLUTION=2
> >   TIFFTAG_YRESOLUTION=2
> > Image Structure Metadata:
> >   COMPRESSION=CCITTFAX4
> >   INTERLEAVE=BAND
> >   MINISWHITE=YES
> > Corner Coordinates:
> > Upper Left  ( 1561222.860, 4927094.450)
> > Lower Left  ( 1561222.860, 4922069.950)
> > Upper Right ( 1566255.360, 4927094.450)
> > Lower Right ( 1566255.360, 4922069.950)
> > Center      ( 1563739.110, 4924582.200)
> > Band 1 Block=10065x32 Type=Byte, ColorInterp=Palette
> >   Image Structure Metadata:
> >     NBITS=1
> >   Color Table (RGB with 2 entries)
> >     0: 255,255,255,255
> >     1: 0,0,0,255
> > -----------------
> >
> > What am I wrong ?
> >
> > Thx,
> >
> > --
> > -----------------
> > Andrea Peri
> > . . . . . . . . .
> > qwerty ?????
> > -----------------
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110903/37102228/attachment.html
From etiennesky.dev at gmail.com  Fri Sep  2 18:23:35 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  2 20:14:09 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <CABqTJk-=e_8F9uypD2z=BF0zkJeoUVJoHuFXiMp36CoT62kSbw@mail.gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>
	<CABqTJk-=e_8F9uypD2z=BF0zkJeoUVJoHuFXiMp36CoT62kSbw@mail.gmail.com>
Message-ID: <CAPMKADXynciC+gsPZ71jcNjVHV0575RrrmBk6pscjZxiH2POfg@mail.gmail.com>

Andrea,

please read the gtiff driver page at?http://www.gdal.org/frmt_gtiff.html

you need to add a few options, such as -co COMPRESS=CCITTFAX4 -co?NBITS=1

Etienne

On Fri, Sep 2, 2011 at 7:15 PM, Andrea Peri <aperi2007@gmail.com> wrote:
>
> Hi Frank,
> thx for very rapid response.
>
> gdal_merge.py now work and the result is intellegible.
>
> testing the result ,
> I notice the result is a 256 color image.
>
> Instead the starting image was true CCITTFax4 raster.
> This mean a huge dimension of files.
>
> Is possible to have a real Tiff4 (1 bit color) image as result ?
>
> Thx,
>
> Andrea.
>
> 2011/9/2 Frank Warmerdam <warmerdam@pobox.com>
>>
>> Andrea,
>>
>> I think the problem is that these are one bit files with
>> a black/white color table and by default gdal_merge.py
>> does not copy the color table. ?If you add the -pct
>> switch it should do so.
>>
>> I imagine the result file does have pixels with values of
>> zero and one, but you won't see them as different in
>> most viewers.
>>
>> Best regards,
>>
>> On Fri, Sep 2, 2011 at 2:40 PM, Andrea Peri <aperi2007@gmail.com> wrote:
>> > Hi,
>> > I need to merge some Tiff4 (bw) raster and obtain 1 only more big tiff4
>> > raster.
>> >
>> > I'm try-ing this with gdal_merge.py
>> > and using a comand like this:
>> >
>> > python gdal_merge.py -o ../raster/216.tif -n 1 -ot Byte
>> > ../raster/10k/216*.tif
>> >
>> > Unfortunately the resulted raster is intellegible (the input raster was all
>> > clearly visible).
>> > It is an all black image :(
>> >
>> > I tried also with option "-n 0" but the result is the same.
>> >
>> > I analyze the input raster using gdalinfo, and the result is this.
>> >
>> > ------------------
>> >>gdalinfo.exe ../raster/10k/216100.tif
>> > Driver: GTiff/GeoTIFF
>> > Files: ../raster/10k/216100.tif
>> > ?????? ../raster/10k/216100.tfw
>> > Size is 10065, 10049
>> > Coordinate System is:
>> > LOCAL_CS["unnamed",
>> > ??? UNIT["unknown",1]]
>> > Origin = (1561222.860009765700000,4927094.449960937700000)
>> > Pixel Size = (0.500000000000000,-0.500000000000000)
>> > Metadata:
>> > ? AREA_OR_POINT=Point
>> > ? TIFFTAG_RESOLUTIONUNIT=1 (unitless)
>> > ? TIFFTAG_SOFTWARE=Arc/Info
>> > ? TIFFTAG_XRESOLUTION=2
>> > ? TIFFTAG_YRESOLUTION=2
>> > Image Structure Metadata:
>> > ? COMPRESSION=CCITTFAX4
>> > ? INTERLEAVE=BAND
>> > ? MINISWHITE=YES
>> > Corner Coordinates:
>> > Upper Left? ( 1561222.860, 4927094.450)
>> > Lower Left? ( 1561222.860, 4922069.950)
>> > Upper Right ( 1566255.360, 4927094.450)
>> > Lower Right ( 1566255.360, 4922069.950)
>> > Center????? ( 1563739.110, 4924582.200)
>> > Band 1 Block=10065x32 Type=Byte, ColorInterp=Palette
>> > ? Image Structure Metadata:
>> > ??? NBITS=1
>> > ? Color Table (RGB with 2 entries)
>> > ??? 0: 255,255,255,255
>> > ??? 1: 0,0,0,255
>> > -----------------
>> >
>> > What am I wrong ?
>> >
>> > Thx,
>> >
>> > --
>> > -----------------
>> > Andrea Peri
>> > . . . . . . . . .
>> > qwerty ?????
>> > -----------------
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From aperi2007 at gmail.com  Fri Sep  2 18:46:27 2011
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri Sep  2 20:38:24 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <CAPMKADXynciC+gsPZ71jcNjVHV0575RrrmBk6pscjZxiH2POfg@mail.gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>
	<CABqTJk-=e_8F9uypD2z=BF0zkJeoUVJoHuFXiMp36CoT62kSbw@mail.gmail.com>
	<CAPMKADXynciC+gsPZ71jcNjVHV0575RrrmBk6pscjZxiH2POfg@mail.gmail.com>
Message-ID: <CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>

Etienne,
you are really reason.

I often forgot the great powerful of the tiff driver and so forgot also to
read the tiff driver page.

Thx to remenber me this.

Regards,

2011/9/3 Etienne Tourigny <etiennesky.dev@gmail.com>

> Andrea,
>
> please read the gtiff driver page at http://www.gdal.org/frmt_gtiff.html
>
> you need to add a few options, such as -co COMPRESS=CCITTFAX4 -co NBITS=1
>
> Etienne
>
> On Fri, Sep 2, 2011 at 7:15 PM, Andrea Peri <aperi2007@gmail.com> wrote:
> >
> > Hi Frank,
> > thx for very rapid response.
> >
> > gdal_merge.py now work and the result is intellegible.
> >
> > testing the result ,
> > I notice the result is a 256 color image.
> >
> > Instead the starting image was true CCITTFax4 raster.
> > This mean a huge dimension of files.
> >
> > Is possible to have a real Tiff4 (1 bit color) image as result ?
> >
> > Thx,
> >
> > Andrea.
> >
> > 2011/9/2 Frank Warmerdam <warmerdam@pobox.com>
> >>
> >> Andrea,
> >>
> >> I think the problem is that these are one bit files with
> >> a black/white color table and by default gdal_merge.py
> >> does not copy the color table.  If you add the -pct
> >> switch it should do so.
> >>
> >> I imagine the result file does have pixels with values of
> >> zero and one, but you won't see them as different in
> >> most viewers.
> >>
> >> Best regards,
> >>
> >> On Fri, Sep 2, 2011 at 2:40 PM, Andrea Peri <aperi2007@gmail.com>
> wrote:
> >> > Hi,
> >> > I need to merge some Tiff4 (bw) raster and obtain 1 only more big
> tiff4
> >> > raster.
> >> >
> >> > I'm try-ing this with gdal_merge.py
> >> > and using a comand like this:
> >> >
> >> > python gdal_merge.py -o ../raster/216.tif -n 1 -ot Byte
> >> > ../raster/10k/216*.tif
> >> >
> >> > Unfortunately the resulted raster is intellegible (the input raster
> was all
> >> > clearly visible).
> >> > It is an all black image :(
> >> >
> >> > I tried also with option "-n 0" but the result is the same.
> >> >
> >> > I analyze the input raster using gdalinfo, and the result is this.
> >> >
> >> > ------------------
> >> >>gdalinfo.exe ../raster/10k/216100.tif
> >> > Driver: GTiff/GeoTIFF
> >> > Files: ../raster/10k/216100.tif
> >> >        ../raster/10k/216100.tfw
> >> > Size is 10065, 10049
> >> > Coordinate System is:
> >> > LOCAL_CS["unnamed",
> >> >     UNIT["unknown",1]]
> >> > Origin = (1561222.860009765700000,4927094.449960937700000)
> >> > Pixel Size = (0.500000000000000,-0.500000000000000)
> >> > Metadata:
> >> >   AREA_OR_POINT=Point
> >> >   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
> >> >   TIFFTAG_SOFTWARE=Arc/Info
> >> >   TIFFTAG_XRESOLUTION=2
> >> >   TIFFTAG_YRESOLUTION=2
> >> > Image Structure Metadata:
> >> >   COMPRESSION=CCITTFAX4
> >> >   INTERLEAVE=BAND
> >> >   MINISWHITE=YES
> >> > Corner Coordinates:
> >> > Upper Left  ( 1561222.860, 4927094.450)
> >> > Lower Left  ( 1561222.860, 4922069.950)
> >> > Upper Right ( 1566255.360, 4927094.450)
> >> > Lower Right ( 1566255.360, 4922069.950)
> >> > Center      ( 1563739.110, 4924582.200)
> >> > Band 1 Block=10065x32 Type=Byte, ColorInterp=Palette
> >> >   Image Structure Metadata:
> >> >     NBITS=1
> >> >   Color Table (RGB with 2 entries)
> >> >     0: 255,255,255,255
> >> >     1: 0,0,0,255
> >> > -----------------
> >> >
> >> > What am I wrong ?
> >> >
> >> > Thx,
> >> >
> >> > --
> >> > -----------------
> >> > Andrea Peri
> >> > . . . . . . . . .
> >> > qwerty ?????
> >> > -----------------
> >> >
> >> >
> >> > _______________________________________________
> >> > gdal-dev mailing list
> >> > gdal-dev@lists.osgeo.org
> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >
> >>
> >>
> >>
> >> --
> >>
> ---------------------------------------+--------------------------------------
> >> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> >> light and sound - activate the windows | http://pobox.com/~warmerdam
> >> and watch the world go round - Rush    | Geospatial Software Developer
> >
> >
> >
> > --
> > -----------------
> > Andrea Peri
> > . . . . . . . . .
> > qwerty ?????
> > -----------------
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110903/03705374/attachment-0001.html
From vasile.cotovanu at webgis.ro  Fri Sep  2 19:03:05 2011
From: vasile.cotovanu at webgis.ro (vasile)
Date: Fri Sep  2 20:55:56 2011
Subject: [gdal-dev] Re: Using GDAL to update DBFs of an ESRI Shapefile ?
In-Reply-To: <201109011949.52271.even.rouault@mines-paris.org>
References: <1314898198755-6750885.post@n2.nabble.com>
	<201109011949.52271.even.rouault@mines-paris.org>
Message-ID: <1315004585449-6755587.post@n2.nabble.com>


Even Rouault wrote:
> 
> Your friends are the Feature.SetField() and Layer.SetFeature() methods.
> 

Thanks Even, I am now exploring Python bindings, the results are promising !


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-to-update-DBFs-of-an-ESRI-Shapefile-tp6750885p6755587.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ole.moller.nielsen at gmail.com  Sat Sep  3 06:23:55 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Sat Sep  3 08:55:27 2011
Subject: [gdal-dev] Fwd: Bounding box change in recent versions of gdal?
In-Reply-To: <CALcLSfpGhFafFvzwHS=-YC3UKjKF0e7dYpbiGfSSwrdO_ttjdg@mail.gmail.com>
References: <CALcLSfpGhFafFvzwHS=-YC3UKjKF0e7dYpbiGfSSwrdO_ttjdg@mail.gmail.com>
Message-ID: <CALcLSfogRcwPyv6LJucA8xKGbMOXhE+_UQQ8RQr8jV8Tj4hK-w@mail.gmail.com>

Dear all!

This may be related to my recent posting about SetField behaving differently
in different gdal versions.
In any case I find that the bounding box of this test geotif
file<http://www.keepandshare.com/doc/3116689/population-2010-clip-tif-september-3-2011-5-20-pm-162k?da=y>
is
different on the two installations (details below).

In brief, the bounding box using gdal 1.6 is

Upper Left  (  99.3641696,  -0.0041806) ( 99d21'51.01"E,  0d 0'15.05"S)
Lower Left  (  99.3641696,  -2.2031806) ( 99d21'51.01"E,  2d12'11.45"S)
Upper Right ( 102.2411696,  -0.0041806) (102d14'28.21"E,  0d 0'15.05"S)
Lower Right ( 102.2411696,  -2.2031806) (102d14'28.21"E,  2d12'11.45"S)
Center      ( 100.8026696,  -1.1036806) (100d48'9.61"E,  1d 6'13.25"S)


whereas using gdal 1.8 it is

Upper Left  (  99.3600000,   0.0000000) ( 99d21'36.00"E,  0d 0' 0.01"N)
Lower Left  (  99.3600000,  -2.1990000) ( 99d21'36.00"E,  2d11'56.40"S)
Upper Right ( 102.2370000,   0.0000000) (102d14'13.20"E,  0d 0' 0.01"N)
Lower Right ( 102.2370000,  -2.1990000) (102d14'13.20"E,  2d11'56.40"S)
Center      ( 100.7985000,  -1.0995000) (100d47'54.60"E,  1d 5'58.20"S)

It'd be great if someone can

   1. Reproduce this using the test file (download using link above)
   2. Let us know which bounding box is correct
   3. Raise this as a ticket if it is a genuine bug


Cheers and thanks
Ole Nielsen




--------------------------------------------
DETAILED OUTPUTS
--------------------------------------------

---------------------------------------------
On Maverick 10.10, GDAL 1.6
---------------------------------------------
nielso@shiva:~/dev/risiko_test_data$ dpkg -l | grep gdal
ii  gdal-bin
1.6.3-4build1                                   Geospatial Data Abstraction
Library - Utility programs
ii  libgdal1-1.6.0
1.6.3-4build1                                   Geospatial Data Abstraction
Library
ii  libgdal1-1.6.0-grass
1.6.3-3                                         GRASS extension for the GDAL
library
ii  libgdal1-dev
1.6.3-4build1                                   Geospatial Data Abstraction
Library - Development files
ii  python-gdal
1.6.3-4build1                                   Python bindings to the
Geospatial Data Abstraction Library

nielso@shiva:~/dev/risiko_test_data$ gdalinfo --version
GDAL 1.6.3, released 2009/11/19

nielso@shiva:~/dev/risiko_test_data$ gdalinfo
Earthquake_Ground_Shaking_clip.tif
Driver: GTiff/GeoTIFF
Files: Earthquake_Ground_Shaking_clip.tif
Size is 345, 263
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (99.364169565217395,-0.004180608365019)
Pixel Size = (0.008339130434783,-0.008361216730038)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  99.3641696,  -0.0041806) ( 99d21'51.01"E,  0d 0'15.05"S)
Lower Left  (  99.3641696,  -2.2031806) ( 99d21'51.01"E,  2d12'11.45"S)
Upper Right ( 102.2411696,  -0.0041806) (102d14'28.21"E,  0d 0'15.05"S)
Lower Right ( 102.2411696,  -2.2031806) (102d14'28.21"E,  2d12'11.45"S)
Center      ( 100.8026696,  -1.1036806) (100d48'9.61"E,  1d 6'13.25"S)
Band 1 Block=256x256 Type=Float64, ColorInterp=Gray


-----------------------------------------
On Natty 11.04, GDAL 1.8.0
-----------------------------------------
nielso@shakti:~/dev/risiko_test_data$ dpkg -l | grep gdal
ii  gdal-bin
1.8.0-2~natty2                             Geospatial Data Abstraction
Library - Utility programs
pi  libgdal1-1.6.0
1.6.3-4build4                              Geospatial Data Abstraction
Library
pi  libgdal1-1.8.0
1.8.0-2~natty2                             Geospatial Data Abstraction
Library
ii  python-gdal
1.8.0-2~natty2                             Python bindings to the Geospatial
Data Abstraction Library

nielso@shakti:~/dev/risiko_test_data$ gdalinfo --version
GDAL 1.8.0, released 2011/01/12

nielso@shakti:~/dev/risiko_test_data$ gdalinfo
Earthquake_Ground_Shaking_clip.tif
Driver: GTiff/GeoTIFF
Files: Earthquake_Ground_Shaking_clip.tif
Size is 345, 263
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (99.359999999999999,0.000000000000000)
Pixel Size = (0.008339130434783,-0.008361216730038)
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  AREA_OR_POINT=Point
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  99.3600000,   0.0000000) ( 99d21'36.00"E,  0d 0' 0.01"N)
Lower Left  (  99.3600000,  -2.1990000) ( 99d21'36.00"E,  2d11'56.40"S)
Upper Right ( 102.2370000,   0.0000000) (102d14'13.20"E,  0d 0' 0.01"N)
Lower Right ( 102.2370000,  -2.1990000) (102d14'13.20"E,  2d11'56.40"S)
Center      ( 100.7985000,  -1.0995000) (100d47'54.60"E,  1d 5'58.20"S)
Band 1 Block=256x256 Type=Float64, ColorInterp=Gray
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110903/38eb3456/attachment.html
From even.rouault at mines-paris.org  Sat Sep  3 06:30:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep  3 09:02:05 2011
Subject: [gdal-dev] Fwd: Bounding box change in recent versions of gdal?
In-Reply-To: <CALcLSfogRcwPyv6LJucA8xKGbMOXhE+_UQQ8RQr8jV8Tj4hK-w@mail.gmail.com>
References: <CALcLSfpGhFafFvzwHS=-YC3UKjKF0e7dYpbiGfSSwrdO_ttjdg@mail.gmail.com>
	<CALcLSfogRcwPyv6LJucA8xKGbMOXhE+_UQQ8RQr8jV8Tj4hK-w@mail.gmail.com>
Message-ID: <201109031230.08813.even.rouault@mines-paris.org>

Le samedi 03 septembre 2011 12:23:55, Ole Nielsen a ?crit :
> Dear all!
> 
> This may be related to my recent posting about SetField behaving
> differently in different gdal versions.
> In any case I find that the bounding box of this test geotif
> file<http://www.keepandshare.com/doc/3116689/population-2010-clip-tif-septe
> mber-3-2011-5-20-pm-162k?da=y> is
> different on the two installations (details below).
> 
> In brief, the bounding box using gdal 1.6 is
> 
> Upper Left  (  99.3641696,  -0.0041806) ( 99d21'51.01"E,  0d 0'15.05"S)
> Lower Left  (  99.3641696,  -2.2031806) ( 99d21'51.01"E,  2d12'11.45"S)
> Upper Right ( 102.2411696,  -0.0041806) (102d14'28.21"E,  0d 0'15.05"S)
> Lower Right ( 102.2411696,  -2.2031806) (102d14'28.21"E,  2d12'11.45"S)
> Center      ( 100.8026696,  -1.1036806) (100d48'9.61"E,  1d 6'13.25"S)
> 
> 
> whereas using gdal 1.8 it is
> 
> Upper Left  (  99.3600000,   0.0000000) ( 99d21'36.00"E,  0d 0' 0.01"N)
> Lower Left  (  99.3600000,  -2.1990000) ( 99d21'36.00"E,  2d11'56.40"S)
> Upper Right ( 102.2370000,   0.0000000) (102d14'13.20"E,  0d 0' 0.01"N)
> Lower Right ( 102.2370000,  -2.1990000) (102d14'13.20"E,  2d11'56.40"S)
> Center      ( 100.7985000,  -1.0995000) (100d47'54.60"E,  1d 5'58.20"S)
> 
> It'd be great if someone can
> 
>    1. Reproduce this using the test file (download using link above)
>    2. Let us know which bounding box is correct
>    3. Raise this as a ticket if it is a genuine bug

Ole,

I've not tried with your file but the output of gdalinfo is sufficient to explain 
the difference you see.

It is due to a fix done in GDAL 1.8.0 that changes the way the 
AREA_OR_POINT=Point metadata is interpreted w.r.t geotransform.

It is mentionned in the GDAL 1.8.0 NEWS :

== Backward compatibility issues ==
[...]
* RFC 33 changes the way PixelIsPoint is handled for GeoTIFF (#3838,#3837)

You will find more information here : 

http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint

Best regards,

Even
From ole.moller.nielsen at gmail.com  Sat Sep  3 06:44:25 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Sat Sep  3 09:17:07 2011
Subject: [gdal-dev] Fwd: Bounding box change in recent versions of gdal?
In-Reply-To: <201109031230.08813.even.rouault@mines-paris.org>
References: <CALcLSfpGhFafFvzwHS=-YC3UKjKF0e7dYpbiGfSSwrdO_ttjdg@mail.gmail.com>
	<CALcLSfogRcwPyv6LJucA8xKGbMOXhE+_UQQ8RQr8jV8Tj4hK-w@mail.gmail.com>
	<201109031230.08813.even.rouault@mines-paris.org>
Message-ID: <CALcLSfqb_B5aBBh29Yw290iW3Jw2bi1OMwRRN5KP5UDGdBYrJw@mail.gmail.com>

Thanks heaps for the reply and for clarifying - This is really about the
notorious pixel vs grid line registration issue i.e. interpretation of
pixels and great that it has been addressed.

Just one point of clarification, the new bounding box seems to have all
corner values rounded to three decimal places. Do you think that is
significant?

Anyway, I'll update our unit tests to take this into account.

Cheers and thanks
Ole

On Sat, Sep 3, 2011 at 5:30 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le samedi 03 septembre 2011 12:23:55, Ole Nielsen a ?crit :
> > Dear all!
> >
> > This may be related to my recent posting about SetField behaving
> > differently in different gdal versions.
> > In any case I find that the bounding box of this test geotif
> > file<
> http://www.keepandshare.com/doc/3116689/population-2010-clip-tif-septe
> > mber-3-2011-5-20-pm-162k?da=y> is
> > different on the two installations (details below).
> >
> > In brief, the bounding box using gdal 1.6 is
> >
> > Upper Left  (  99.3641696,  -0.0041806) ( 99d21'51.01"E,  0d 0'15.05"S)
> > Lower Left  (  99.3641696,  -2.2031806) ( 99d21'51.01"E,  2d12'11.45"S)
> > Upper Right ( 102.2411696,  -0.0041806) (102d14'28.21"E,  0d 0'15.05"S)
> > Lower Right ( 102.2411696,  -2.2031806) (102d14'28.21"E,  2d12'11.45"S)
> > Center      ( 100.8026696,  -1.1036806) (100d48'9.61"E,  1d 6'13.25"S)
> >
> >
> > whereas using gdal 1.8 it is
> >
> > Upper Left  (  99.3600000,   0.0000000) ( 99d21'36.00"E,  0d 0' 0.01"N)
> > Lower Left  (  99.3600000,  -2.1990000) ( 99d21'36.00"E,  2d11'56.40"S)
> > Upper Right ( 102.2370000,   0.0000000) (102d14'13.20"E,  0d 0' 0.01"N)
> > Lower Right ( 102.2370000,  -2.1990000) (102d14'13.20"E,  2d11'56.40"S)
> > Center      ( 100.7985000,  -1.0995000) (100d47'54.60"E,  1d 5'58.20"S)
> >
> > It'd be great if someone can
> >
> >    1. Reproduce this using the test file (download using link above)
> >    2. Let us know which bounding box is correct
> >    3. Raise this as a ticket if it is a genuine bug
>
> Ole,
>
> I've not tried with your file but the output of gdalinfo is sufficient to
> explain
> the difference you see.
>
> It is due to a fix done in GDAL 1.8.0 that changes the way the
> AREA_OR_POINT=Point metadata is interpreted w.r.t geotransform.
>
> It is mentionned in the GDAL 1.8.0 NEWS :
>
> == Backward compatibility issues ==
> [...]
> * RFC 33 changes the way PixelIsPoint is handled for GeoTIFF (#3838,#3837)
>
> You will find more information here :
>
> http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110903/4b412df5/attachment-0001.html
From szekerest at gmail.com  Sat Sep  3 12:08:22 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Sep  3 14:59:15 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <CACALY+Qv3RbkGgHzaQF8nTq8=TRn+7SjY-OFwgVOr_78M=cWDQ@mail.gmail.com>

+1

Tamas




2011/9/2 Even Rouault <even.rouault@mines-paris.org>

> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
> ---
>
> Hi,
>
> Kyle Shannon and I would like to propose Etienne Tourigny for commit access
> to
> GDAL subversion repository.
>
> Etienne has recently contributed in the developement of the netCDF driver.
> He
> has submitted many ideas for fixes and improvements in the driver ( see
> this
> thread http://lists.osgeo.org/pipermail/gdal-dev/2011-August/029865.html),
> that he has organized in this wiki page :
>
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
>
> He has also proposed various patches to tickets in Trac, or engaged
> discussion
> with their reporters :
>
> http://trac.osgeo.org/gdal/ticket/2129
> http://trac.osgeo.org/gdal/ticket/2893
> http://trac.osgeo.org/gdal/ticket/3957
>
> Etienne has graduated in Computer Science at Universit? de Montr?al and
> Master's in Atmospheric Science at UQAM. He's currently working on his PhD
> in
> Meteorology at INPE/CPTEC/CCST in Brazil. His interest in GDAL has arisen
> because he's working with burned area and land cover maps at high (Landsat)
> and medium (MODIS) resolutions and he has a need for fixing and improving
> the
> driver so as to be able to produce files in netcdf format. He has also been
> involved in the CDO operators, and started a discussion with the devs on
> incorporating geotiff and full Proj.4 support. He has also submitted minor
> bug
> reports and enhancements for QGIS.
>
> Etienne, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with my support:
>
> +1
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110903/d998cb38/attachment.html
From ole.moller.nielsen at gmail.com  Sat Sep  3 23:54:34 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Sun Sep  4 03:24:25 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <1314880393.4e5f7b8998383@imp.free.fr>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<CALcLSfqhv281Nt2kZL7qruK=C8GMzRpJKtixXG32N3FqdMy=uA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
Message-ID: <CALcLSfpEEgu2DR4QzCaPS=z-xPYTiSLbjbO7UavAmAJgyf1Dqw@mail.gmail.com>

Hi again and sorry for nagging, but do you have any hints as to what this
error means

>    return _ogr.Feature_SetField(self, *args)
> NotImplementedError: Wrong number of arguments for overloaded function
> 'Feature_SetField'.
>   Possible C/C++ prototypes are:
>     SetField(OGRFeatureShadow *,int,char const *)
>     SetField(OGRFeatureShadow *,char const *,char const *)
>     SetField(OGRFeatureShadow *,int,int)
>     SetField(OGRFeatureShadow *,char const *,int)
>     SetField(OGRFeatureShadow *,int,double)
>     SetField(OGRFeatureShadow *,char const *,double)
>     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
>     SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)

The input to the Python bindings is of the form
SetField('STRUCT_DAMAGE_fraction', 0.346734256639)

i.e. one string argument (char*) followed by a float (double) which I
thought would be matched by the third last header above. It works fine on
version 1.6 but not version 1.8.

Can anyone tell me what has changed, what it means and how to work around it
- please?

Many thanks
Ole


On Thu, Sep 1, 2011 at 7:33 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
>
> > Sorry for the addition, but regarding the issue with SetField, I just had
> > the same error with the inputs
> > SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
> >
> > To repeat, this works on every standard Ubuntu installation I have used
> > (10.04, 10.10, 11.04). However, after installing qgis 1.7 on Ubuntu 11.04
> > this error keeps happening in our code. I don't know how to find out what
> > version of org we are using.
>
> My feeling is that there must be something broken in your installation.
> This
> should work. Check that both your gdal lib and gdal python packages are
> updated
> at the same version. dpkg -l|grep gdal should give you some hints.
>
> >
> > Please let me know how to work around this or if there is a patch you can
> > apply.
> >
> > Cheers and thanks
> > Ole
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: Ole Nielsen <ole.moller.nielsen@gmail.com>
> > Date: Thu, Sep 1, 2011 at 4:04 PM
> > Subject: NotImplementedError: Wrong number of arguments for overloaded
> > function 'Feature_SetField'.
> > To: gdal-dev@lists.osgeo.org
> > Cc: Ariel Nunez <ingenieroariel@gmail.com>, Ted Dunstone <
> ted@biometix.com>
> >
> >
> > Developing on a code which relies on ogr.py and that has been running for
> a
> > while on Ubuntu 10.04, 10.10 and 11.04 I saw for the first time today the
> > error
> >
> > ....
> > ERROR 1: No such field: 'CONTENTS_DAMAGE_fraction'
> > ERROR 1: No such field: 'STRUCT_INUNDATED'
> > ERROR 1: No such field: 'STRUCT_LOSS_AUD'
> > ERROR 1: No such field: 'CONTENTS_LOSS_AUD'
> > ERROR 1: No such field: 'PEOPLE_AFFECTED'
> > .....
> >   File "/home/nielso/dev/riab/impact/storage/vector.py", line 426, in
> > write_to_file
> >     feature.SetField(name, data[i][name])
> >   File "/usr/lib/python2.7/dist-packages/osgeo/ogr.py", line 2184, in
> > SetField
> >     return _ogr.Feature_SetField(self, *args)
> > NotImplementedError: Wrong number of arguments for overloaded function
> > 'Feature_SetField'.
> >   Possible C/C++ prototypes are:
> >     SetField(OGRFeatureShadow *,int,char const *)
> >     SetField(OGRFeatureShadow *,char const *,char const *)
> >     SetField(OGRFeatureShadow *,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int)
> >     SetField(OGRFeatureShadow *,int,double)
> >     SetField(OGRFeatureShadow *,char const *,double)
> >     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)
> >
> >
> >
> > This happened after I (as an unrelated act) installed qgis 1.7 so I am
> > guessing GDAL got upgraded as well.
> > The arguments to SetField in this case are: SetField('MMI', nan)
> > Types are
> > 'MMI' <type 'str'>
> > nan <type 'float'>
> >
> > So does this mean that nan used to be supported and no longer is?
> > Or is it me doing something wrong.
> >
> >
> >
> > I have seen references to this issue at
> >
> >
>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Proposed-UTF-8-SWIG-Changes-td5575272.html
> > http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html
> >
> > but they seem to be more concerned with defining typemaps in the C
> > libraries. What I need to know is how to modify my
> > Python code so that this runs again on all relevant gdal versions.
> >
> > Can anyone help, please?
> >
> > Many thanks
> > Ole Nielsen
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110904/c0f43ddb/attachment.html
From even.rouault at mines-paris.org  Sun Sep  4 05:16:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Sep  4 09:03:25 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfpEEgu2DR4QzCaPS=z-xPYTiSLbjbO7UavAmAJgyf1Dqw@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfpEEgu2DR4QzCaPS=z-xPYTiSLbjbO7UavAmAJgyf1Dqw@mail.gmail.com>
Message-ID: <201109041116.09789.even.rouault@mines-paris.org>

Le dimanche 04 septembre 2011 05:54:34, Ole Nielsen a ?crit :
> Hi again and sorry for nagging, but do you have any hints as to what this
> error means
> 
> >    return _ogr.Feature_SetField(self, *args)
> > 
> > NotImplementedError: Wrong number of arguments for overloaded function
> > 'Feature_SetField'.
> > 
> >   Possible C/C++ prototypes are:
> >     SetField(OGRFeatureShadow *,int,char const *)
> >     SetField(OGRFeatureShadow *,char const *,char const *)
> >     SetField(OGRFeatureShadow *,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int)
> >     SetField(OGRFeatureShadow *,int,double)
> >     SetField(OGRFeatureShadow *,char const *,double)
> >     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
> >     SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)
> 
> The input to the Python bindings is of the form
> SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
> 
> i.e. one string argument (char*) followed by a float (double) which I
> thought would be matched by the third last header above. It works fine on
> version 1.6 but not version 1.8.
> 
> Can anyone tell me what has changed, what it means and how to work around
> it - please?
> 
Ole,

Unfortunately, I cannot explain your error, but I'm convinced it must be 
something particular with your installation. So I'd advise you to test on a 
fresh machine and/or clean a bit the packages you've installed on the one 
where you have problems.

Below a test I've just done to show you that SetField(string, double) 
definitely works with GDAL 1.8.0 under normal conditions. I've installed Ubuntu 
11.04 amd64 in a virtual machine, installed first python-gdal (1.6), then added 
ubuntugis-unstable PPA, installed qgis (1.7) :

even@even-virtual-machine:~$ dpkg -l | grep gdal
ii  gdal-bin                              1.8.0-2~natty2                             
Geospatial Data Abstraction Library - Utility programs
ii  libgdal1-1.6.0                        1.6.3-4build4                              
Geospatial Data Abstraction Library
ii  libgdal1-1.8.0                        1.8.0-2~natty2                             
Geospatial Data Abstraction Library
ii  python-gdal                           1.8.0-2~natty2                             
Python bindings to the Geospatial Data Abstraction Library

even@even-virtual-machine:~$ python
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
>>> from osgeo import ogr
>>> gdal.VersionInfo('')
'GDAL 1.8.0, released 2011/01/12'
>>> fielddefn = ogr.FieldDefn('STRUCT_DAMAGE_fraction', ogr.OFTReal)
>>> featuredefn = ogr.FeatureDefn()
>>> featuredefn.AddFieldDefn(fielddefn)
>>> feat = ogr.Feature(featuredefn)
>>> feat.SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
>>> feat.DumpReadable()
OGRFeature():-1
  STRUCT_DAMAGE_fraction (Real) = 0.346734256639


From aperi2007 at gmail.com  Mon Sep  5 03:55:52 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Mon Sep  5 08:58:23 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CA+YzLBd_mDh=Ftep76tXF822-xxccXf24UfQNEezgkoHm4F04w@mail.gmail.com>
	<CABqTJk-=e_8F9uypD2z=BF0zkJeoUVJoHuFXiMp36CoT62kSbw@mail.gmail.com>
	<CAPMKADXynciC+gsPZ71jcNjVHV0575RrrmBk6pscjZxiH2POfg@mail.gmail.com>
	<CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>
Message-ID: <4E648088.803@gmail.com>

Hi,
I'm try-ing to merge some tiff4 raster.

The call I'm using (thx Frank and Etienne) is these:

python gdal_merge.py -o ../raster/raster_1.tif -n 0 -ot Byte -pct 
../raster/raster_1/*.tif
gdal_translate -co NBITS=1 -co COMPRESS=CCITTFAX4 -co TFW=YES 
../raster/raster_1.tif ../raster/raster_2.tif

I firstly merge they with gdal_merge.py and after I translate they in a 
CTTIFF4 1 bit color.

On a little test it work very well.

But when I apply it to all set of raster it give me this memory error.

------

D:\_fusion_raster_bw\gdal64bit>python gdal_merge.py -o 
../raster/livorno0.tif -n
  0 -ot Byte -pct ../raster/livorno/*.tif
0...10Traceback (most recent call last):
   File "gdal_merge.py", line 513, in <module>
     sys.exit(main())
   File "gdal_merge.py", line 499, in main
     fi.copy_into( t_fh, band, band, nodata )
   File "gdal_merge.py", line 242, in copy_into
     nodata_arg )
   File "gdal_merge.py", line 62, in raster_copy
     nodata )
   File "gdal_merge.py", line 102, in raster_copy_with_nodata
     to_write = Numeric.choose( nodata_test, (data_src, data_dst) )
   File 
"C:\OSGeo4W\apps\Python25\lib\site-packages\numpy\core\fromnumeric.py", l
ine 170, in choose
     return choose(choices, out=out, mode=mode)
MemoryError

------

I don't know if this is a know issue or a problem of python configuration.

I'm working on a windows7 64 bit, and I'm using a gdal 64bit version.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------


From patdevelop at gmail.com  Mon Sep  5 05:40:15 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Mon Sep  5 10:48:47 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
Message-ID: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>

Hi Etienne and others interested in NetCDF driver,

I did some work on WMS display of NetCDF files generated by GDAL
today, and it gave me a chance to play around with & think about how
to handle the Datum issue as described at
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements#Datumissues .

Here's a first cut suggestion of how GDAL should behave when writing a
new NetCDF file using gdal_translate:
 * Keep saving the current datum info, with names e.g. WGS84, as part
of the WKT that GDAL saves in it's special "spatial_ref" attribute.
 * But _also_ save the actual spheroid parameters for the datum in use
in attributes CF-1 can read, e.g. semi_major_axis, semi_minor_axis,
and inverse_flattening.

Then on import, GDAL would look for its "spatial_ref" by default as
authoritative for datum info, but could use the CF-1 as a backup.

This would parallel the way projection parameters are handled in the
NetCDF driver, i.e. writing WKT in the 'spatial_ref' attribute, but
also writes duplicate CF-1 convention ones if possible to help with
display of the file in NetCDF tools and things like THREDDS.

Perhaps this could be a passable option to the driver whether you
write the duplicate CF-1 datum info or not, with default to on.

(That is, unless the CF conventions have plan to support named datums
coming up imminently?)

cheers, Patrick.
From etiennesky.dev at gmail.com  Mon Sep  5 09:23:59 2011
From: etiennesky.dev at gmail.com (Etienne Tourigny)
Date: Mon Sep  5 14:44:33 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
Message-ID: <CAPMKADXJA0aFhf=hp_6g43a6qS=+6RmTDsbivhSw-x_9KqS6UA@mail.gmail.com>

Patrick,

A)
your suggestion does make sense, it is imperial that basic datum
information be saved as to adhere to CF-x standard.   Are those CF
variables (radius, flattening etc) really sufficient for software such
as THREDDS?

B)
The other aspect (to save projection_ref so that GDAL can import it)
also makes sense, however I have the following concern:

If another software changes the datum and or projection information of
a netcdf file created by GDAL, but keeps the GDAL 'spatial_ref' tag
intact, then GDAL would import the wrong projection.  I don't think
that this should happen, as a program would be expected to write a new
grid_mapping variable, without the GDAL tags.

Can you think of possible software which does this and make a test?  I
can only think of CDO, and I do know that it discards anything from a
previous projection definition.

C)
With that concern in mind,I was wondering if we can do one of the
following instead:

1) import the standard CF variables and guess the WKT from that
2) just be content with the basic DATUM values from the CF variables

for example, here is what a wkt looks like when importing a CF netcdf
file wich a WGS84 datum:

GEOGCS["unknown",
    DATUM["unknown",
        SPHEROID["Spheroid",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]

and here is the full WGS84 WKT generated by GDAL

GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]


As you can see, the important values are there, but there are no
descriptive names and EPSG authority.  This is not strictly identified
as WGS84 EPSG datum, but the important stuff is there.


D)
I doubt that the CF conventions have plans to support PROJ.4/WKT in
the near future.  Have a look at the draft for CF-1.6, nothing new
about PROJ.4 or WKT :
http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#grid-mappings-and-projections

However, I would suggest to discuss this on the CF mailing list. They
might be receptive, as they already make references to PROJ.4 in their
projection definitions. BUT it would be better in this case to use
PROJ.4 strings instead of WKT, as (I think) that PROJ.4 strings are
better supported than WKT (including Proj.4 itself).  For example, the
folks that work on CDO have plans to support PROJ.4 strings, but now
WKT.

Am I correct in thinking that GDAL could output a PROJ.4 string and
import it in the same manner that it currently does with WKT?

BTW, there is a "CF-NetCDF 1.0 Standards Working Group" part of OGC,
perhaps we can discuss with someone from that group?
http://www.opengeospatial.org/projects/groups/cf-netcdf1.0swg

Regards,
Etienne



On Mon, Sep 5, 2011 at 6:40 AM, Patrick Sunter <patdevelop@gmail.com> wrote:
> Hi Etienne and others interested in NetCDF driver,
>
> I did some work on WMS display of NetCDF files generated by GDAL
> today, and it gave me a chance to play around with & think about how
> to handle the Datum issue as described at
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements#Datumissues .
>
> Here's a first cut suggestion of how GDAL should behave when writing a
> new NetCDF file using gdal_translate:
> ?* Keep saving the current datum info, with names e.g. WGS84, as part
> of the WKT that GDAL saves in it's special "spatial_ref" attribute.
> ?* But _also_ save the actual spheroid parameters for the datum in use
> in attributes CF-1 can read, e.g. semi_major_axis, semi_minor_axis,
> and inverse_flattening.
>
> Then on import, GDAL would look for its "spatial_ref" by default as
> authoritative for datum info, but could use the CF-1 as a backup.
>
> This would parallel the way projection parameters are handled in the
> NetCDF driver, i.e. writing WKT in the 'spatial_ref' attribute, but
> also writes duplicate CF-1 convention ones if possible to help with
> display of the file in NetCDF tools and things like THREDDS.
>
> Perhaps this could be a passable option to the driver whether you
> write the duplicate CF-1 datum info or not, with default to on.
>
> (That is, unless the CF conventions have plan to support named datums
> coming up imminently?)
>
> cheers, Patrick.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jrepetto at free.fr  Mon Sep  5 09:51:05 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Sep  5 15:13:09 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <1314879172.4e5f76c4adb8f@webmail.free.fr>
References: <201108301322.46312.yjacolin@free.fr>	<201109010138.11748.even.rouault@mines-paris.org>	<5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>	<201109010930.27348.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
Message-ID: <4E64D3C9.1050307@free.fr>

Le 01/09/2011 14:12, Even Rouault a ?crit :
>> Le jeudi 01 septembre 2011 01:56:04, Pinner, Luke a ?crit :
>>> Does this apply to the 4.x read-only version of the ERDAS ECW/JP2 SDK as
>>> well as the old 3.3 SDK?
>
> I've just commited a new changeset. Now the support for updating the header info
> has been successfully tested on Linux 64bit with 3.3 SDK, Windows 32bit with 3.3
> SDK and Windows 32bit with 4.2 Read-Only SDK.

Hi,

I have a problem related to this change.

I have downloaded the SVN version of GDAL, and tried to compile it. But 
it fails:

/bin/sh /home/jcr/gdal/libtool --mode=link	g++  gdalinfo.lo 
/home/jcr/gdal/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo 
/home/jcr/gdal/.libs/libgdal.so -L/usr/lib64 
-L/usr/lib64/postgresql-9.0/lib64 -lgeos_c /usr/lib64/libsqlite3.so 
/usr/lib64/libexpat.so /usr/lib64/libNCSEcw.so /usr/lib64/libNCSCnet.so 
/usr/lib64/libNCSUtil.so -lgif /usr/lib64/libgeotiff.so 
/usr/lib64/libproj.so -lm -ljpeg -ltiff -lpng -lpq -lpthread -lcurl -lrt 
-lssl -lcrypto /usr/lib64/libgmp.so -ldl -lz
/home/jcr/gdal/.libs/libgdal.so: undefined reference to `NCSEcwEditReadInfo'
/home/jcr/gdal/.libs/libgdal.so: undefined reference to 
`NCSEcwEditWriteInfo'
/home/jcr/gdal/.libs/libgdal.so: undefined reference to `NCSEcwEditFreeInfo'
collect2: ld returned 1 exit status

If I add the libNCSEcwC.so library, it works:

g++ .libs/gdalinfo.o -o .libs/gdalinfo  /home/jcr/gdal/.libs/libgdal.so 
-L/usr/lib64 -L/usr/lib64/postgresql-9.0/lib64 -lgeos_c 
/usr/lib64/libsqlite3.so /usr/lib64/libexpat.so /usr/lib64/libNCSEcw.so 
/usr/lib64/libNCSEcwC.so /usr/lib64/libNCSCnet.so 
/usr/lib64/libNCSUtil.so -lgif /usr/lib64/libgeotiff.so 
/usr/lib64/libproj.so -lm -ljpeg -ltiff -lpng -lpq -lpthread -lcurl -lrt 
-lssl -lcrypto /usr/lib64/libgmp.so -ldl -lz

I am using libecwj2-3.3 on Linux 64 bits (Gentoo).

Jean-Claude
From uwe.schmitz at bezreg-koeln.nrw.de  Mon Sep  5 10:03:43 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Mon Sep  5 15:33:16 2011
Subject: [gdal-dev] ESRI products have problems reading gdal
	spatialreference entry
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBCAE@sebulba.bezreg-koeln.nrw.de>

Hi all,

some of our customers are complaining that ESRI 
products, eg. ArcMap, can't recognize the 
spatialreference system of GeoTIFF files written 
with gdal_translate.

First I must admit that I don't have ArcMap at
hand and can't test intensly. But I verified the
statement with a colleagues instance of ArcMap (V9.3).

To be precise, if I do the following:

gdal_translate -a_srs epsg:25832 in.tif out.tif

ArcMap isn't able to identify the reference system
of out.tif correctly. Especially if I try to
reproject the data on-the-fly into another system,
the right transformation methods are not shown.

If I look into the header data, I see that gdal
has written "ETRS89 / UTM zone 32N" as the name
of the crs. Files that ArcMap can identify correctly
have "ETRS_1989_UTM_Zone_32N" as crs. May be this
is a reason for misinterpretation?

I wonder, if anyone else has experienced this or
similar behaviour. And how can I achieve that 
ESRI- *and* gdal-Tools can identify the correct
reference system.

Thanks in advance!
Uwe
From yjacolin at free.fr  Mon Sep  5 10:22:22 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Mon Sep  5 16:27:30 2011
Subject: [gdal-dev] ESRI products have problems reading gdal
	spatialreference entry
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBCAE@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBCAE@sebulba.bezreg-koeln.nrw.de>
Message-ID: <201109051622.23308.yjacolin@free.fr>

Hello,

I may be wrong but here an answer anyway.

You have in your gdal data dir (/usr/share/gdal17/) a file named 
esri_extra.wkt, find the correct code for your projection and try again:
gdal_translate -a_srs esri:<newCode>in.tif out.tif

And test again with ArcMap.

Esri code and EPSG code are slighty different :/

Y.
Le lundi 05 septembre 2011 16:03:43, Schmitz, Uwe a ?crit :
> Hi all,
> 
> some of our customers are complaining that ESRI
> products, eg. ArcMap, can't recognize the
> spatialreference system of GeoTIFF files written
> with gdal_translate.
> 
> First I must admit that I don't have ArcMap at
> hand and can't test intensly. But I verified the
> statement with a colleagues instance of ArcMap (V9.3).
> 
> To be precise, if I do the following:
> 
> gdal_translate -a_srs epsg:25832 in.tif out.tif
> 
> ArcMap isn't able to identify the reference system
> of out.tif correctly. Especially if I try to
> reproject the data on-the-fly into another system,
> the right transformation methods are not shown.
> 
> If I look into the header data, I see that gdal
> has written "ETRS89 / UTM zone 32N" as the name
> of the crs. Files that ArcMap can identify correctly
> have "ETRS_1989_UTM_Zone_32N" as crs. May be this
> is a reason for misinterpretation?
> 
> I wonder, if anyone else has experienced this or
> similar behaviour. And how can I achieve that
> ESRI- *and* gdal-Tools can identify the correct
> reference system.
> 
> Thanks in advance!
> Uwe
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From j.l.h.hartmann at uva.nl  Mon Sep  5 10:46:36 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Sep  5 16:43:28 2011
Subject: [gdal-dev] adding georeferencing information
Message-ID: <4E64E0CC.1070000@uva.nl>

Hi all,

Is there a quick way to add back georeferencing information to a geotif 
file that has been processed by Imagemagick? I have lots of 
georeferenced images that I want to sharpen up a bit, but ImageMagick 
throws the georeference headers away. Is there a way to transport them 
from the original file to the derived one?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110905/f24e1cb4/attachment.html
From bfraser at geoanalytic.com  Mon Sep  5 11:53:26 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Sep  5 17:22:27 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E64E0CC.1070000@uva.nl>
References: <4E64E0CC.1070000@uva.nl>
Message-ID: <4E64F076.4010908@geoanalytic.com>

Jan,

   I use:
listgeo mygeotiff.tif > mygeotiff.gtt
geotifcp  -g mygeotiff.gtt nogeotags.tif mynewgeotiff.tif


FYI, I've been experimenting with GDAL's vrt format to sharpen my tiffs:

<VRTDataset rasterXSize="2890" rasterYSize="3451">
     :
     :
<VRTRasterBand dataType="Byte" band="1">
<Metadata />
<ColorInterp>Red</ColorInterp>
<KernelFilteredSource>
<SourceFilename relativeToVRT="1">NRT_123.tif</SourceFilename>
<SourceBand>1</SourceBand>
<SourceProperties RasterXSize="2890" RasterYSize="3451" DataType="Byte" 
BlockXSize="2890" BlockYSize="1" />
<SrcRect xOff="0" yOff="0" xSize="2890" ySize="3451" />
<DstRect xOff="0" yOff="0" xSize="2890" ySize="3451" />
<Kernel>
<Size>3</Size>
<Coefs>-0.111 -0.111 -0.111 -0.111 2 -0.111 -0.111 -0.111 -0.111</Coefs>
</Kernel>
</KernelFilteredSource>
</VRTRasterBand>
   :
   :
</VRTDataset>

My kernel tends to brighten the image a little (note the "2" in the 
kernel) as well as sharpen.  To try it on your file, create a VRT file 
with gdal_translate -of VRT, then use a text editor to change the 
SimpleSource tags to KernelFilteredSource and add the Kernel.  You can 
then create a sharpened tif by using the VRT as input to gdal_translate, 
os simply open the VRT in Quantum GIS to view the results.

Best Regards,
Brent Fraser


On 9/5/2011 8:46 AM, Jan Hartmann wrote:
> Hi all,
>
> Is there a quick way to add back georeferencing information to a 
> geotif file that has been processed by Imagemagick? I have lots of 
> georeferenced images that I want to sharpen up a bit, but ImageMagick 
> throws the georeference headers away. Is there a way to transport them 
> from the original file to the derived one?
>
> Jan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110905/49b254b3/attachment.html
From even.rouault at mines-paris.org  Mon Sep  5 13:24:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep  5 18:57:46 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <4E648088.803@gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>
	<4E648088.803@gmail.com>
Message-ID: <201109051924.08212.even.rouault@mines-paris.org>

Le lundi 05 septembre 2011 09:55:52, aperi2007 a ?crit :
> Hi,
> I'm try-ing to merge some tiff4 raster.
> 
> The call I'm using (thx Frank and Etienne) is these:
> 
> python gdal_merge.py -o ../raster/raster_1.tif -n 0 -ot Byte -pct
> ../raster/raster_1/*.tif
> gdal_translate -co NBITS=1 -co COMPRESS=CCITTFAX4 -co TFW=YES
> ../raster/raster_1.tif ../raster/raster_2.tif
> 
> I firstly merge they with gdal_merge.py and after I translate they in a
> CTTIFF4 1 bit color.
> 
> On a little test it work very well.
> 
> But when I apply it to all set of raster it give me this memory error.
> 
> ------
> 
> D:\_fusion_raster_bw\gdal64bit>python gdal_merge.py -o
> ../raster/livorno0.tif -n
>   0 -ot Byte -pct ../raster/livorno/*.tif
> 0...10Traceback (most recent call last):
>    File "gdal_merge.py", line 513, in <module>
>      sys.exit(main())
>    File "gdal_merge.py", line 499, in main
>      fi.copy_into( t_fh, band, band, nodata )
>    File "gdal_merge.py", line 242, in copy_into
>      nodata_arg )
>    File "gdal_merge.py", line 62, in raster_copy
>      nodata )
>    File "gdal_merge.py", line 102, in raster_copy_with_nodata
>      to_write = Numeric.choose( nodata_test, (data_src, data_dst) )
>    File
> "C:\OSGeo4W\apps\Python25\lib\site-packages\numpy\core\fromnumeric.py", l
> ine 170, in choose
>      return choose(choices, out=out, mode=mode)
> MemoryError
> 
> ------
> 
> I don't know if this is a know issue or a problem of python configuration.
> 
> I'm working on a windows7 64 bit, and I'm using a gdal 64bit version.

Are you sure you are using a 64bit GDAL ? AFAIR, OSGeo4W is 32bit only.

Anyway, it is known that gdal_merge.py is limited by memory in the way it 
operates. You might want to use gdalwarp or gdalbuildvrt in that case.

From even.rouault at mines-paris.org  Mon Sep  5 13:24:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep  5 18:58:31 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <4E64D3C9.1050307@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E64D3C9.1050307@free.fr>
Message-ID: <201109051924.53768.even.rouault@mines-paris.org>


> If I add the libNCSEcwC.so library, it works:
> 
I had updated configure.in and configure to include that new dependency. So try 
./configure again.
From peifer at gmx.eu  Mon Sep  5 13:46:31 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Sep  5 19:21:55 2011
Subject: [gdal-dev] Re: ESRI products have problems reading gdal
	spatialreference entry
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBCAE@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBCAE@sebulba.bezreg-koeln.nrw.de>
Message-ID: <4E650AF7.90304@gmx.eu>

On 05/09/2011 16:03, Schmitz, Uwe wrote:
>
> I wonder, if anyone else has experienced this or
> similar behaviour. And how can I achieve that
> ESRI- *and* gdal-Tools can identify the correct
> reference system.
>

What I asked on this list some weeks ago:

--- snip ---
  From experience, I know that ESRI users have trouble with some
projection and parameter names generated by GDAL and vice versa. Is it
possible to convince GDAL to store coordinate system information in a
way that would be "ESRI-friendly" and "GDAL-friendly" at the same time?

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-translate-eats-projection-parameter-values-td6680528.html#d1313170021000-317 

--- snip ---

My understanding of Frank's answer is that this is basically not possible.

Hermann
From aperi2007 at gmail.com  Mon Sep  5 14:08:03 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Mon Sep  5 19:44:54 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <201109051924.08212.even.rouault@mines-paris.org>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>
	<CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>
	<4E648088.803@gmail.com>
	<201109051924.08212.even.rouault@mines-paris.org>
Message-ID: <4E651003.9070204@gmail.com>

 > Are you sure you are using a 64bit GDAL ? AFAIR, OSGeo4W is 32bit only.
 >

Thx for response.

I download the gdal 64bit version.
explode it on a single folder.
I use osgeo shell only as environment for python and go in the folder 
gdal64 to call its gdal_merge.py.
I guess the libraries used was from gdal64,
but effectively the memory issue is on numpy, a python element

 > Anyway, it is known that gdal_merge.py is limited by memory in the
 >way it
 > operates. You might want to use gdalwarp or gdalbuildvrt in that case.
 >

Unfortunately gdalbuildvrt is not useful for my need.
I need to produce 1 really physical raster.

But gdalwarp is a tool I never will think to use for this.
Is gdalwarp capable to merge raster ?

Thx,


Il 05/09/2011 19:24, Even Rouault ha scritto:
> Le lundi 05 septembre 2011 09:55:52, aperi2007 a ?crit :
>> Hi,
>> I'm try-ing to merge some tiff4 raster.
>>
>> The call I'm using (thx Frank and Etienne) is these:
>>
>> python gdal_merge.py -o ../raster/raster_1.tif -n 0 -ot Byte -pct
>> ../raster/raster_1/*.tif
>> gdal_translate -co NBITS=1 -co COMPRESS=CCITTFAX4 -co TFW=YES
>> ../raster/raster_1.tif ../raster/raster_2.tif
>>
>> I firstly merge they with gdal_merge.py and after I translate they in a
>> CTTIFF4 1 bit color.
>>
>> On a little test it work very well.
>>
>> But when I apply it to all set of raster it give me this memory error.
>>
>> ------
>>
>> D:\_fusion_raster_bw\gdal64bit>python gdal_merge.py -o
>> ../raster/livorno0.tif -n
>>    0 -ot Byte -pct ../raster/livorno/*.tif
>> 0...10Traceback (most recent call last):
>>     File "gdal_merge.py", line 513, in<module>
>>       sys.exit(main())
>>     File "gdal_merge.py", line 499, in main
>>       fi.copy_into( t_fh, band, band, nodata )
>>     File "gdal_merge.py", line 242, in copy_into
>>       nodata_arg )
>>     File "gdal_merge.py", line 62, in raster_copy
>>       nodata )
>>     File "gdal_merge.py", line 102, in raster_copy_with_nodata
>>       to_write = Numeric.choose( nodata_test, (data_src, data_dst) )
>>     File
>> "C:\OSGeo4W\apps\Python25\lib\site-packages\numpy\core\fromnumeric.py", l
>> ine 170, in choose
>>       return choose(choices, out=out, mode=mode)
>> MemoryError
>>
>> ------
>>
>> I don't know if this is a know issue or a problem of python configuration.
>>
>> I'm working on a windows7 64 bit, and I'm using a gdal 64bit version.
>
> Are you sure you are using a 64bit GDAL ? AFAIR, OSGeo4W is 32bit only.
>
> Anyway, it is known that gdal_merge.py is limited by memory in the way it
> operates. You might want to use gdalwarp or gdalbuildvrt in that case.
>
>

From jrepetto at free.fr  Mon Sep  5 16:12:40 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Sep  5 21:56:00 2011
Subject: [gdal-dev] Merging tiff4 files
In-Reply-To: <4E651003.9070204@gmail.com>
References: <CABqTJk_UqRCSq90Kr+dbTSmHTcUoijmJ0fho3QXk-z+nNAR6tQ@mail.gmail.com>	<CABqTJk9c2LPHLtP6D8dHU0FUSoCN0dH57xzibpCBmywb0EpQqQ@mail.gmail.com>	<4E648088.803@gmail.com>	<201109051924.08212.even.rouault@mines-paris.org>
	<4E651003.9070204@gmail.com>
Message-ID: <4E652D38.5090704@free.fr>

On 09/05/11 20:08, aperi2007 wrote:
>
> But gdalwarp is a tool I never will think to use for this.
> Is gdalwarp capable to merge raster ?
>

According to previous messages posted on this list, gdalwarp is THE tool 
you must use to merge rasters. gdal_merge.py is only a demo script that 
has been written as an example of how to use the Python bindings.

Jean-Claude
From ole.moller.nielsen at gmail.com  Mon Sep  5 23:34:54 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Tue Sep  6 05:42:22 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <201109041116.09789.even.rouault@mines-paris.org>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<1314880393.4e5f7b8998383@imp.free.fr>
	<CALcLSfpEEgu2DR4QzCaPS=z-xPYTiSLbjbO7UavAmAJgyf1Dqw@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
Message-ID: <CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>

Dear Even

Thank you so much for going through the trouble of reproducing this issue.
You have help a lot, but I need one more hint regarding the apparent change
in how field names get truncated (Normalized/laundered).

To summarise:

   - I followed your suggestions and rebuilt from scratch.
   - Your Python example worked perfectly
   - However my code still produced the error in SetField
   (NotImplementedError: Wrong number of arguments for overloaded function)
   - It turned out the reason was that I was passing a singleton
   numpy.ndarray element into it. Casting that to a float fixed the problem in
   ogr 1.8
   - However, I still get the following warning and associated errors of the
   form
   - Warning 6: Normalized/laundered field name: 'CONTENTS_LOSS_AUD' to
      'CONTENTS_L'
      - ERROR 1: No such field: 'CONTENTS_LOSS_AUD'    (not surprisingly, if
      it was truncated :-))


The warning comes from a call to lyr.CreateField(fd) and the error happens
when calling SetField with the full length string.
I have included the routine I wrote to store our layers as reference below,
but my questions are


   - What are the official ogr steps required to store a vector layer
   (represented as e.g. a list of x, y values and associated feature attributes
   (name, value))? In particular, is CreateField perhaps obsoleted by something
   else?
   - Is the truncation to 10 characters hard and fast or driver dependent -
   and how should one deal with this truncation? Your example (which does not
   use CreateField) would suggest names can be longer than 10 characters.
   - Where can i find some documentation of the OGR Python bindings?


I am sorry that my questions are so fundamental, but I am still new to this
library.
Cheers and many thanks
Ole Nielsen




------------ The code that works for version 1.6 but not 1.8
--------------------------------

    def write_to_file(self, filename):
        """Save vector data to file

        Input
            filename: filename with extension .shp or .gml
        """

        # Check file format
        basename, extension = os.path.splitext(filename)

        msg = ('Invalid file type for file %s. Only extensions '
               'shp or gml allowed.' % filename)
        assert extension == '.shp' or extension == '.gml', msg
        driver = DRIVER_MAP[extension]

        # FIXME (Ole): Tempory flagging of GML issue (ticket #18)
        if extension == '.gml':
            msg = ('OGR GML driver does not store geospatial reference.'
                   'This format is disabled for the time being. See '
                   'https://github.com/AIFDR/riab/issues/18')
            raise Exception(msg)

        # Derive layername from filename (excluding preceding dirs)
        layername = os.path.split(basename)[-1]

        # Get vector data
        geometry = self.get_geometry()
        data = self.get_data()
        N = len(geometry)

        # Clear any previous file of this name (ogr does not overwrite)
        try:
            os.remove(filename)
        except:
            pass

        # Create new file with one layer
        drv = ogr.GetDriverByName(driver)
        if drv is None:
            msg = 'OGR driver %s not available' % driver
            raise Exception(msg)

        ds = drv.CreateDataSource(filename)
        if ds is None:
            msg = 'Creation of output file %s failed' % filename
            raise Exception(msg)

        lyr = ds.CreateLayer(layername,
                             self.projection.spatial_reference,
                             self.geometry_type)
        if lyr is None:
            msg = 'Could not create layer %s' % layername
            raise Exception(msg)

        # Define attributes if any
        store_attributes = False
        if data is not None:
            if len(data) > 0:
                try:
                    fields = data[0].keys()
                except:
                    msg = ('Input parameter "attributes" was specified '
                           'but it does not contain dictionaries with '
                           'field information as expected. The first'
                           'element is %s' % data[0])
                    raise Exception(msg)
                else:
                    # Establish OGR types for each element
                    ogrtypes = {}
                    for name in fields:
                        att = data[0][name]
                        py_type = type(att)
                        msg = ('Unknown type for storing vector '
                               'data: %s, %s' % (name, str(py_type)[1:-1]))
                        assert py_type in TYPE_MAP, msg
                        ogrtypes[name] = TYPE_MAP[py_type]

            else:
                msg = ('Input parameter "data" was specified '
                       'but appears to be empty')
                raise Exception(msg)

            # Create attribute fields in layer
            store_attributes = True
            for name in fields:
                print 'Creating', name
                fd = ogr.FieldDefn(name, ogrtypes[name])
                # FIXME (Ole): Trying to address issue #16
                #              But it doesn't work and
                #              somehow changes the values of MMI in test
                #width = max(128, len(name))
                #print name, width
                #fd.SetWidth(width)

                if lyr.CreateField(fd) != 0:
                    msg = 'Could not create field %s' % name
                    raise Exception(msg)

        # Store geometry
        geom = ogr.Geometry(self.geometry_type)
        layer_def = lyr.GetLayerDefn()
        for i in range(N):
            # Create new feature instance
            feature = ogr.Feature(layer_def)

            # Store geometry and check
            if self.geometry_type == ogr.wkbPoint:
                x = float(geometry[i][0])
                y = float(geometry[i][1])
                geom.SetPoint_2D(0, x, y)
            elif self.geometry_type == ogr.wkbPolygon:
                wkt = array2wkt(geometry[i])
                geom = ogr.CreateGeometryFromWkt(wkt)
            else:
                msg = 'Geometry %s not implemented' % self.geometry_type
                raise Exception(msg)

            feature.SetGeometry(geom)

            G = feature.GetGeometryRef()
            if G is None:
                msg = 'Could not create GeometryRef for file %s' % filename
                raise Exception(msg)

            # Store attributes
            if store_attributes:
                for name in fields:
                    val = data[i][name]
                    if type(val) == numpy.ndarray:
                        # A singleton of type <type 'numpy.ndarray'> works
for gdal version 1.6
                        # but fails for version 1.8 in SetField with error:
                        # NotImplementedError: Wrong number of arguments for
overloaded function
                        val = float(val)

                    feature.SetField(name, val)

            # Save this feature
            if lyr.CreateFeature(feature) != 0:
                msg = 'Failed to create feature %i in file %s' % (i,
filename)
                raise Exception(msg)

            feature.Destroy()

        # Write keywords if any
        write_keywords(self.keywords, basename + '.keywords')




On Sun, Sep 4, 2011 at 4:16 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le dimanche 04 septembre 2011 05:54:34, Ole Nielsen a ?crit :
> > Hi again and sorry for nagging, but do you have any hints as to what this
> > error means
> >
> > >    return _ogr.Feature_SetField(self, *args)
> > >
> > > NotImplementedError: Wrong number of arguments for overloaded function
> > > 'Feature_SetField'.
> > >
> > >   Possible C/C++ prototypes are:
> > >     SetField(OGRFeatureShadow *,int,char const *)
> > >     SetField(OGRFeatureShadow *,char const *,char const *)
> > >     SetField(OGRFeatureShadow *,int,int)
> > >     SetField(OGRFeatureShadow *,char const *,int)
> > >     SetField(OGRFeatureShadow *,int,double)
> > >     SetField(OGRFeatureShadow *,char const *,double)
> > >     SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
> > >     SetField(OGRFeatureShadow *,char const
> *,int,int,int,int,int,int,int)
> >
> > The input to the Python bindings is of the form
> > SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
> >
> > i.e. one string argument (char*) followed by a float (double) which I
> > thought would be matched by the third last header above. It works fine on
> > version 1.6 but not version 1.8.
> >
> > Can anyone tell me what has changed, what it means and how to work around
> > it - please?
> >
> Ole,
>
> Unfortunately, I cannot explain your error, but I'm convinced it must be
> something particular with your installation. So I'd advise you to test on a
> fresh machine and/or clean a bit the packages you've installed on the one
> where you have problems.
>
> Below a test I've just done to show you that SetField(string, double)
> definitely works with GDAL 1.8.0 under normal conditions. I've installed
> Ubuntu
> 11.04 amd64 in a virtual machine, installed first python-gdal (1.6), then
> added
> ubuntugis-unstable PPA, installed qgis (1.7) :
>
> even@even-virtual-machine:~$ dpkg -l | grep gdal
> ii  gdal-bin                              1.8.0-2~natty2
> Geospatial Data Abstraction Library - Utility programs
> ii  libgdal1-1.6.0                        1.6.3-4build4
> Geospatial Data Abstraction Library
> ii  libgdal1-1.8.0                        1.8.0-2~natty2
> Geospatial Data Abstraction Library
> ii  python-gdal                           1.8.0-2~natty2
> Python bindings to the Geospatial Data Abstraction Library
>
> even@even-virtual-machine:~$ python
> Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53)
> [GCC 4.5.2] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> from osgeo import gdal
> >>> from osgeo import ogr
> >>> gdal.VersionInfo('')
> 'GDAL 1.8.0, released 2011/01/12'
> >>> fielddefn = ogr.FieldDefn('STRUCT_DAMAGE_fraction', ogr.OFTReal)
> >>> featuredefn = ogr.FeatureDefn()
> >>> featuredefn.AddFieldDefn(fielddefn)
> >>> feat = ogr.Feature(featuredefn)
> >>> feat.SetField('STRUCT_DAMAGE_fraction', 0.346734256639)
> >>> feat.DumpReadable()
> OGRFeature():-1
>  STRUCT_DAMAGE_fraction (Real) = 0.346734256639
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/9aaf248d/attachment-0001.html
From even.rouault at mines-paris.org  Tue Sep  6 02:05:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 02:06:56 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
Message-ID: <201109060805.38673.even.rouault@mines-paris.org>

>    - What are the official ogr steps required to store a vector layer
>    (represented as e.g. a list of x, y values and associated feature
> attributes (name, value))? In particular, is CreateField perhaps obsoleted
> by something else?

Nothing obsoleted here. CreateField() and CreateFeature() are the way to go

>    - Is the truncation to 10 characters hard and fast or driver dependent -
>    and how should one deal with this truncation? Your example (which does
> not use CreateField) would suggest names can be longer than 10 characters.

Yes, it is specific to the shapefile driver. This is a in fact a limitation of 
the DBF format itself : http://www.gdal.org/ogr/drv_shapefile.html

And the implementation of the truncation has indeed changed in recent 
versions. I somehow remember that in previous versions CreateField() only 
truncated in the field name in the DBF file but not in the feature definition 
just after calling it. Now its behaviour is more consistant, but can indeed be 
a bit strange where one is not aware of it.

> - Where can i find some documentation of the OGR Python bindings?

You'll find a lot of ressources here :
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

Best regards,

Even
From uwe.schmitz at bezreg-koeln.nrw.de  Tue Sep  6 03:54:16 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Tue Sep  6 04:02:12 2011
Subject: [gdal-dev] AW: ESRI products have problems reading gdal
	spatialreference entry
In-Reply-To: <4E650AF7.90304@gmx.eu>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBCB3@sebulba.bezreg-koeln.nrw.de>

Hermann,
> 
> 
> On 05/09/2011 16:03, Schmitz, Uwe wrote:
> >
> > I wonder, if anyone else has experienced this or
> > similar behaviour. And how can I achieve that
> > ESRI- *and* gdal-Tools can identify the correct
> > reference system.
> >
> 
> What I asked on this list some weeks ago:
> 
> --- snip ---
>   From experience, I know that ESRI users have trouble with some
> projection and parameter names generated by GDAL and vice versa. Is it
> possible to convince GDAL to store coordinate system information in a
> way that would be "ESRI-friendly" and "GDAL-friendly" at the 
> same time?
> 
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-translate
> -eats-projection-parameter-values-td6680528.html#d1313170021000-317 
> 
> --- snip ---
> 
> My understanding of Frank's answer is that this is basically 
> not possible.
> 
thanks for the link. It clarifies the problem but is 
unsatisfactory. I must have missed this thread beforehand,
maybe due to the subject ;-)

So if I conclude:
ESRI and GDAL have different WKT formats. It is not
possible to write GeoTIFF files which are fully 
ESRI *and* GDAL compatible.

A workaround may be to use ArcGIS's GDAL support
for GeoTIFF.

So I will give this hint to our ESRI users.

Thanks for the aswers and your time
Uwe
From jrepetto at free.fr  Tue Sep  6 06:20:33 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Sep  6 06:36:11 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <201109051924.53768.even.rouault@mines-paris.org>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E64D3C9.1050307@free.fr>
	<201109051924.53768.even.rouault@mines-paris.org>
Message-ID: <4E65F3F1.2010601@free.fr>

Le 05/09/2011 19:24, Even Rouault a ?crit :
>
>> If I add the libNCSEcwC.so library, it works:
>>
> I had updated configure.in and configure to include that new dependency. So try
> ./configure again.

I had run ./configure, so your changes are not sufficient, or there is 
another problem.

I have noticed that libgdal.la contains :

dependency_libs=' -R/usr/local/lib  -L/usr/lib64 -lgeos_c 
/usr/lib64/libsqlite3.la /usr/lib64/libexpat.la /usr/lib64/libNCSEcw.la 
/usr/lib64/libNCSCnet.la /usr/lib64/libNCSUtil.la -lgif 
/usr/lib64/libgeotiff.la -lproj /usr/lib64/libproj.la -ljpeg -ltiff 
-lpng -L/usr/lib64/postgresql-9.0/lib64 -lpq -lpthread -lcurl -lrt -lssl 
-lcrypto /usr/lib64/libgmp.la -ldl -lz'

If I add /usr/lib64/libNCSEcwC.la to this list, it works.
Sorry, but I don't know the autotools enough well to solve the problem 
myself.

Jean-Claude
From aperi2007 at gmail.com  Tue Sep  6 06:57:28 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Tue Sep  6 07:15:23 2011
Subject: [gdal-dev] Re: Merging tiff4 files
Message-ID: <4E65FC98.8060905@gmail.com>

Hi,
thx to Jean-Claude and Even,

I definitively resolve my troubles. :)

gdalwarp is the right tool to merge.It don't break with no-one raster 
and after I use gdaltranslate to produce a tiff4 raster.

To help any-one that has same need. I put the call I'm using.

The call take all the raster tiff4 available in a folder and merge all 
in 1 only raster. The SRS is the same (for me EPSG:3003) for source and 
target. Also I put the level "0" (white" to -srcnodata to avoid that the 
overlapping of borders covers the raster near.
As show from the image sample here attach.

gdalwarp.exe -s_srs EPSG:3003 -t_srs EPSG:3003 -r near -ot Byte 
-srcnodata "0" -of GTiff -co TFW=YES ../raster/list/*.tif 
../raster/raster_result.tif

gdal_translate -co NBITS=1 -co COMPRESS=CCITTFAX4 -co TFW=YES 
../raster/raster_result.tif ../raster/raster_result_as_tiff4.tif

Regards,

Andrea Peri.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalwarp_merge_sample.gif
Type: image/gif
Size: 15112 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/e488de92/gdalwarp_merge_sample-0001.gif
From even.rouault at mines-paris.org  Tue Sep  6 08:12:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 08:34:18 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <4E65F3F1.2010601@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E64D3C9.1050307@free.fr>
	<201109051924.53768.even.rouault@mines-paris.org>
	<4E65F3F1.2010601@free.fr>
Message-ID: <1315311153.4e660e31487dc@webmail.free.fr>

Selon Jean-Claude Repetto <jrepetto@free.fr>:

> Le 05/09/2011 19:24, Even Rouault a ?crit :
> >
> >> If I add the libNCSEcwC.so library, it works:
> >>
> > I had updated configure.in and configure to include that new dependency. So
> try
> > ./configure again.
>
> I had run ./configure, so your changes are not sufficient, or there is
> another problem.
>
> I have noticed that libgdal.la contains :
>
> dependency_libs=' -R/usr/local/lib  -L/usr/lib64 -lgeos_c
> /usr/lib64/libsqlite3.la /usr/lib64/libexpat.la /usr/lib64/libNCSEcw.la
> /usr/lib64/libNCSCnet.la /usr/lib64/libNCSUtil.la -lgif
> /usr/lib64/libgeotiff.la -lproj /usr/lib64/libproj.la -ljpeg -ltiff
> -lpng -L/usr/lib64/postgresql-9.0/lib64 -lpq -lpthread -lcurl -lrt -lssl
> -lcrypto /usr/lib64/libgmp.la -ldl -lz'
>
> If I add /usr/lib64/libNCSEcwC.la to this list, it works.
> Sorry, but I don't know the autotools enough well to solve the problem
> myself.

Jean-Claude,

Thanks for reporting.

I believe this should be fixed now by http://trac.osgeo.org/gdal/changeset/23067
.

The case that was dealt with before was when using ./configure
--with-ecw=/the/path/to/install/dir , but not ./configure --with-ecw[=yes]
which, I presume, is your use case.

Please confirm if it works for you.

Even
From jrepetto at free.fr  Tue Sep  6 08:40:07 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Sep  6 09:03:21 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <1315311153.4e660e31487dc@webmail.free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E64D3C9.1050307@free.fr>
	<201109051924.53768.even.rouault@mines-paris.org>
	<4E65F3F1.2010601@free.fr>
	<1315311153.4e660e31487dc@webmail.free.fr>
Message-ID: <4E6614A7.5030609@free.fr>

Le 06/09/2011 14:12, Even Rouault a ?crit :
>
> I believe this should be fixed now by http://trac.osgeo.org/gdal/changeset/23067
> .
>
> The case that was dealt with before was when using ./configure
> --with-ecw=/the/path/to/install/dir , but not ./configure --with-ecw[=yes]
> which, I presume, is your use case.
>
> Please confirm if it works for you.


It works now, thanks.
For your information, I have used ./configure without any parameter, 
because the script is able to detect if the libecwj2 library is 
installed or not.

Now I am going to test gdal_edit.py .

Jean-Claude

From ole.moller.nielsen at gmail.com  Tue Sep  6 10:07:56 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Tue Sep  6 10:36:01 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <201109060805.38673.even.rouault@mines-paris.org>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
	<201109060805.38673.even.rouault@mines-paris.org>
Message-ID: <CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>

Hi Even

Thanks again for all your help - all tests now pass using either gdal 1.6 or
1.8. Just to summarise, there were three issues as I see them:


   1. Bounding boxes for raster data are computed differently (but better)
   in newer versions
   2. While v1.6 of ogre would allow an single number of type numpy.ndarray
   this is no longer allow. Casting it to a float solves the problem.
   3. New versions of ogre will not allow attribute names of length longer
   than 10 (at least when using the ESRI driver). Formerly, I think it silently
   truncated, now it is up to the user. That's at least what I did.

For those interested, the updated class dealing with vector data for our
risk modelling application is available on github at
https://github.com/AIFDR/riab/blob/develop/impact/storage/vector.py

Thanks again for a great piece of software
Ole Nielsen

On Tue, Sep 6, 2011 at 1:05 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> >    - What are the official ogr steps required to store a vector layer
> >    (represented as e.g. a list of x, y values and associated feature
> > attributes (name, value))? In particular, is CreateField perhaps
> obsoleted
> > by something else?
>
> Nothing obsoleted here. CreateField() and CreateFeature() are the way to go
>
> >    - Is the truncation to 10 characters hard and fast or driver dependent
> -
> >    and how should one deal with this truncation? Your example (which does
> > not use CreateField) would suggest names can be longer than 10
> characters.
>
> Yes, it is specific to the shapefile driver. This is a in fact a limitation
> of
> the DBF format itself : http://www.gdal.org/ogr/drv_shapefile.html
>
> And the implementation of the truncation has indeed changed in recent
> versions. I somehow remember that in previous versions CreateField() only
> truncated in the field name in the DBF file but not in the feature
> definition
> just after calling it. Now its behaviour is more consistant, but can indeed
> be
> a bit strange where one is not aware of it.
>
> > - Where can i find some documentation of the OGR Python bindings?
>
> You'll find a lot of ressources here :
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/49f247f2/attachment.html
From dmorissette at mapgears.com  Tue Sep  6 10:09:25 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Sep  6 10:37:32 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <4E662995.1000008@mapgears.com>

On 11-09-02 04:42 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
> ---
>

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at mines-paris.org  Tue Sep  6 10:26:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 10:56:01 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
	<201109060805.38673.even.rouault@mines-paris.org>
	<CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>
Message-ID: <1315319209.4e662da9a1cf3@webmail.free.fr>

Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:

> Hi Even
>
> Thanks again for all your help - all tests now pass using either gdal 1.6 or
> 1.8. Just to summarise, there were three issues as I see them:
>
>
>    1. Bounding boxes for raster data are computed differently (but better)
>    in newer versions

Specific to PixelIsPoint in the GTiff driver.

>    2. While v1.6 of ogre would allow an single number of type numpy.ndarray
>    this is no longer allow. Casting it to a float solves the problem.

I wasn't aware it could work before. There's perhaps now an ambiguity on which
method to use, due to the addition of new possibilities for SetField() (just a
bling guess).

>    3. New versions of ogre will not allow attribute names of length longer
>    than 10 (at least when using the ESRI driver). Formerly, I think it
> silently
>    truncated, now it is up to the user. That's at least what I did.

I've a looked quickly a bit at your code and I've the feeling that you truncate
yourself, instead of relying on OGR. The Shapefile driver does more than
truncating. It also ensures uniqueness of the truncated names. For example, if
you try creating "a_very_long_name" and "a_very_long_name_again", they will be
respectively truncated to "a_very_lon" and "a_very_l_1". A safer solution to get
the field name that got to the file would be to :

field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
lyr.CreateField(field_defn)
layer_defn = lyr.GetLayerDefn()
last_field_idx = layer_defn.GetFieldCount() - 1
real_field_name = layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
From ole.moller.nielsen at gmail.com  Tue Sep  6 10:51:55 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Tue Sep  6 11:22:21 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <1315319209.4e662da9a1cf3@webmail.free.fr>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
	<201109060805.38673.even.rouault@mines-paris.org>
	<CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>
	<1315319209.4e662da9a1cf3@webmail.free.fr>
Message-ID: <CALcLSfoXNumKFzKNisa0hc6P_QQdc+fbU6fFZ6C_AxXsTd8j=A@mail.gmail.com>

Thanks - I was hoping I could rely on the library to do the intelligent
truncation, but couldn't work it out.
Can I just clarify that the name to use with SetField would then be what is
provided by your last line?

 layer_defn.GetFieldDefn(last_field_idx).GetNameRef()

Cheers and thanks
Ole

On Tue, Sep 6, 2011 at 9:26 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
>
> > Hi Even
> >
> > Thanks again for all your help - all tests now pass using either gdal 1.6
> or
> > 1.8. Just to summarise, there were three issues as I see them:
> >
> >
> >    1. Bounding boxes for raster data are computed differently (but
> better)
> >    in newer versions
>
> Specific to PixelIsPoint in the GTiff driver.
>
> >    2. While v1.6 of ogre would allow an single number of type
> numpy.ndarray
> >    this is no longer allow. Casting it to a float solves the problem.
>
> I wasn't aware it could work before. There's perhaps now an ambiguity on
> which
> method to use, due to the addition of new possibilities for SetField()
> (just a
> bling guess).
>
> >    3. New versions of ogre will not allow attribute names of length
> longer
> >    than 10 (at least when using the ESRI driver). Formerly, I think it
> > silently
> >    truncated, now it is up to the user. That's at least what I did.
>
> I've a looked quickly a bit at your code and I've the feeling that you
> truncate
> yourself, instead of relying on OGR. The Shapefile driver does more than
> truncating. It also ensures uniqueness of the truncated names. For example,
> if
> you try creating "a_very_long_name" and "a_very_long_name_again", they will
> be
> respectively truncated to "a_very_lon" and "a_very_l_1". A safer solution
> to get
> the field name that got to the file would be to :
>
> field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
> lyr.CreateField(field_defn)
> layer_defn = lyr.GetLayerDefn()
> last_field_idx = layer_defn.GetFieldCount() - 1
> real_field_name = layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/898c5104/attachment.html
From jluis at ualg.pt  Tue Sep  6 11:10:49 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Sep  6 11:42:20 2011
Subject: [gdal-dev] OGR_G_ExportToWkt make MEX crash
Message-ID: <4E6637F9.7080705@ualg.pt>

Hi,

I wrote a OGR C MEX wrapper to use in Matlab which already works in many 
cases.
However, I had a situation when trying to fetch the reference info. The 
chunk of code below now works, but if I use the commented line that calls
OGR_G_ExportToWkt
than Matlab crashes at that line. However, using the OSRExportTo... 
functions works fine.
I'm I doing something forbidden or ...

heers

Joaquim

     hSRS = OGR_L_GetSpatialRef(hLayer);    /* Do not free it later */
         if (hSRS) {
             char    *pszWKT = NULL, *pszProj4 = NULL;
             mxArray    *mxPrjRef;

             /*OGR_G_ExportToWkt (hSRS, &pszWKT); */ <======     THIS 
CALL MAKE THE MEX CRASH

             if (OSRExportToProj4(hSRS, &pszProj4) == OGRERR_NONE) {
                 mxPrjRef = mxCreateString (pszProj4);
                 mxSetField (out_struct, 0, "SRSProj4", mxPrjRef);
             }
             if (OSRExportToPrettyWkt(hSRS, &pszWKT, 1) == OGRERR_NONE) {
                 mxPrjRef = mxCreateString (pszWKT);
                 mxSetField (out_struct, 0, "SRSWkt", mxPrjRef);
             }
         }

From even.rouault at mines-paris.org  Tue Sep  6 11:10:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 11:42:25 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfoXNumKFzKNisa0hc6P_QQdc+fbU6fFZ6C_AxXsTd8j=A@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
	<201109060805.38673.even.rouault@mines-paris.org>
	<CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>
	<1315319209.4e662da9a1cf3@webmail.free.fr>
	<CALcLSfoXNumKFzKNisa0hc6P_QQdc+fbU6fFZ6C_AxXsTd8j=A@mail.gmail.com>
Message-ID: <1315321850.4e6637fab150e@webmail.free.fr>

Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:

> Thanks - I was hoping I could rely on the library to do the intelligent
> truncation, but couldn't work it out.
> Can I just clarify that the name to use with SetField would then be what is
> provided by your last line?
>
>  layer_defn.GetFieldDefn(last_field_idx).GetNameRef()

Yes

>
> Cheers and thanks
> Ole
>
> On Tue, Sep 6, 2011 at 9:26 PM, Even Rouault
> <even.rouault@mines-paris.org>wrote:
>
> > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> >
> > > Hi Even
> > >
> > > Thanks again for all your help - all tests now pass using either gdal 1.6
> > or
> > > 1.8. Just to summarise, there were three issues as I see them:
> > >
> > >
> > >    1. Bounding boxes for raster data are computed differently (but
> > better)
> > >    in newer versions
> >
> > Specific to PixelIsPoint in the GTiff driver.
> >
> > >    2. While v1.6 of ogre would allow an single number of type
> > numpy.ndarray
> > >    this is no longer allow. Casting it to a float solves the problem.
> >
> > I wasn't aware it could work before. There's perhaps now an ambiguity on
> > which
> > method to use, due to the addition of new possibilities for SetField()
> > (just a
> > bling guess).
> >
> > >    3. New versions of ogre will not allow attribute names of length
> > longer
> > >    than 10 (at least when using the ESRI driver). Formerly, I think it
> > > silently
> > >    truncated, now it is up to the user. That's at least what I did.
> >
> > I've a looked quickly a bit at your code and I've the feeling that you
> > truncate
> > yourself, instead of relying on OGR. The Shapefile driver does more than
> > truncating. It also ensures uniqueness of the truncated names. For example,
> > if
> > you try creating "a_very_long_name" and "a_very_long_name_again", they will
> > be
> > respectively truncated to "a_very_lon" and "a_very_l_1". A safer solution
> > to get
> > the field name that got to the file would be to :
> >
> > field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
> > lyr.CreateField(field_defn)
> > layer_defn = lyr.GetLayerDefn()
> > last_field_idx = layer_defn.GetFieldCount() - 1
> > real_field_name = layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
> >
>


From warmerdam at pobox.com  Tue Sep  6 11:25:09 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  6 11:57:23 2011
Subject: [gdal-dev] OGR_G_ExportToWkt make MEX crash
In-Reply-To: <4E6637F9.7080705@ualg.pt>
References: <4E6637F9.7080705@ualg.pt>
Message-ID: <4E663B55.7090209@pobox.com>

On 11-09-06 08:10 AM, Joaquim Luis wrote:
> Hi,
>
> I wrote a OGR C MEX wrapper to use in Matlab which already works in many cases.
> However, I had a situation when trying to fetch the reference info. The chunk
> of code below now works, but if I use the commented line that calls
> OGR_G_ExportToWkt
> than Matlab crashes at that line. However, using the OSRExportTo... functions
> works fine.
> I'm I doing something forbidden or ...
...
> hSRS = OGR_L_GetSpatialRef(hLayer); /* Do not free it later */
> if (hSRS) {
> char *pszWKT = NULL, *pszProj4 = NULL;
> mxArray *mxPrjRef;
>
> /*OGR_G_ExportToWkt (hSRS, &pszWKT); */ <====== THIS CALL MAKE THE MEX CRASH
>
> if (OSRExportToProj4(hSRS, &pszProj4) == OGRERR_NONE) {

Joaquim,

OGR_G_* functions are intended to operate on OGRGeometry objects while
OSR* functions operate on OGRSpatialReferences.  Your hSRS object is an
OGRSpatialReference and not suitable to pass to OGR_G_ExportToWkt().

You should use OSRExportToWkt() to translate an OGRSpatialReference into it's
WKT representation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From warmerdam at pobox.com  Tue Sep  6 11:39:54 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  6 12:12:53 2011
Subject: [gdal-dev] AW: ESRI products have problems reading gdal
	spatialreference entry
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBCB3@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBCB3@sebulba.bezreg-koeln.nrw.de>
Message-ID: <4E663ECA.9080704@pobox.com>

On 11-09-06 12:54 AM, Schmitz, Uwe wrote:
>> On 05/09/2011 16:03, Schmitz, Uwe wrote:
>> My understanding of Frank's answer is that this is basically
>> not possible.
>>
> thanks for the link. It clarifies the problem but is
> unsatisfactory. I must have missed this thread beforehand,
> maybe due to the subject ;-)
>
> So if I conclude:
> ESRI and GDAL have different WKT formats. It is not
> possible to write GeoTIFF files which are fully
> ESRI *and* GDAL compatible.

Uwe,

I do not agree with this conclusion!  However, it is
difficult to produce a GeoTIFF file that will exactly
preserve and ESRI Project Engine string (ie. ESRI WKT)
while at the same time being fully compatible with all
other software.  The issues are primarily around limits
of the GeoTIFF format, and to some extend somewhat
incomplete code implementations in GDAL / ArcGIS.

> A workaround may be to use ArcGIS's GDAL support
> for GeoTIFF.

I am not sure what this means exactly.  ArcGIS now always
uses GDAL for reading and writing GeoTIFF.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jluis at ualg.pt  Tue Sep  6 11:48:57 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Sep  6 12:22:33 2011
Subject: [gdal-dev] OGR_G_ExportToWkt make MEX crash
In-Reply-To: <4E663B55.7090209@pobox.com>
References: <4E6637F9.7080705@ualg.pt> <4E663B55.7090209@pobox.com>
Message-ID: <4E6640E9.4000103@ualg.pt>


> OGR_G_* functions are intended to operate on OGRGeometry objects while
> OSR* functions operate on OGRSpatialReferences.  Your hSRS object is an
> OGRSpatialReference and not suitable to pass to OGR_G_ExportToWkt().
>
> You should use OSRExportToWkt() to translate an OGRSpatialReference 
> into it's
> WKT representation.
>
> Best regards,

Thanks Frank.

This is also a result of my attempt to understand all the OGR model plus 
inventing a way of wrapping it all inside a single StructureArray (the 
C-MEX API). So let me ask one further question about the model. Is is 
possible to have the case

Dataset --> SRS
                --> Feature1 --> Geom1 --> SRS1
                --> Feature2 --> Geom2 --> SRS2
                --> ...

that is, different SpatialReferences inside the same Dataset?

Thanks

Joaquim
From matze999 at gmail.com  Tue Sep  6 12:25:04 2011
From: matze999 at gmail.com (Matt Funk)
Date: Tue Sep  6 13:01:23 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <4E5FAE5F.1040209@gmail.com>
References: <4E5D39CB.2070106@gmail.com>
	<201108302139.50194.even.rouault@mines-paris.org>
	<4E5D4EBE.9060603@gmail.com>
	<201108302304.57258.even.rouault@mines-paris.org>
	<4E5FAE5F.1040209@gmail.com>
Message-ID: <4E664960.1080601@gmail.com>

Hi Even,
you mentioned in your previous email that the GDALGridCreate() fcn has
only been mapped to Java bindings (I am assuming this is already the
case for the the latest stable (1.8.1) release)? If so, can you point me
to the interface file in which this is implemented? Doing a find/grep i
could not find it.

thanks
matt




On 9/1/2011 10:10 AM, Matt Funk wrote:
> Hi,
> i got a question on using the gdal_grid utility:
> My input file looks like:
>
> lat,lon,data
> 24.007521,-114.111420,-0.078077
> 24.003864,-114.064293,-0.017523
> 24.000221,-114.017540,-0.069692
> 23.996593,-113.971153,-0.014572
> 23.992981,-113.925117,-0.032931
> 23.989380,-113.879440,-0.068089
> 23.985794,-113.834114,-0.027493
> 23.982224,-113.789124,-0.046154
> 23.978666,-113.744476,-0.073945
> 23.975121,-113.700165,-0.072757
> 23.971590,-113.656174,-0.048775
> ...
> 3.034852,-96.767853,0.459120
> 3.028167,-96.727135,0.649308
> 3.021430,-96.686111,0.994770
> 3.014640,-96.644768,1.085215
> 3.007797,-96.603119,1.350796
> 3.000899,-96.561142,1.879670
> 2.993942,-96.518822,1.470742
>
> I use gdal_grid:
> "C:\software\gdal\gdalwin32-1.6\bin\gdal_grid.exe" -a
> invdist:power=2.0:smoothing=1.0 -txe 2 24 -tye -117 -92 -outsize 50 50
> -of GTiff -ot Float64 -l dust_t1735 dust_t1735.vrt dust_t1735.tiff
>
> The tiff file is generated, but when i try to open it, but i cannot open
> it and the file is somehow corrupted. For the experts on this utility,
> am i doing something obviously wrong?
>
> thanks
> matt
>
>
> On 8/30/2011 3:04 PM, Even Rouault wrote:
>> Le mardi 30 ao?t 2011 22:57:34, Matt Funk a ?crit :
>>> On 8/30/2011 1:39 PM, Even Rouault wrote:
>>>> Le mardi 30 ao?t 2011 21:28:11, Matt Funk a ?crit :
>>>>> Hi,
>>>>> i have several satellite scenes which basically give me 3 vectors:
>>>>> lat/lon/data which is on an irregular. I would like to interpolate those
>>>>> onto a regular grid. I found that GDALGridCreate would meet my need
>>>>> except that i am developing in python, but it appears the bindings for
>>>>> it don't exist (unless i am mistaken).
>>>>> So my question is whether someone knows of an alternative route to
>>>>> accomplish this or whether i am possible wrong in that i cannot use
>>>>> GDALGridCreate in python?
>>>> Yes, you cannot use GDALGridCreate() in python. It has only been mapped
>>>> to Java bindings for now. You can as a workaround for a process with the
>>>> gdal_grid utility.
>>> I have never used the gdal_grid utility. Outside of its manpage
>>> (http://www.gdal.org/gdal_grid.html) i haven't found any usage examples.
>> That's already a beginning ;-)
>>
>>> As far as inputs are concerned it talks about csv file. Are there other
>>> input formats.
>> All OGR supported formats : http://gdal.org/ogr/ogr_formats.html
>>
>>> Also, this might be a dumb question, but would it be of any value to
>>> call the compiled c-gdal library directly from my python code?
>> Possibly, but someone has to code the missing python swig typemaps however.
>>
>>> matt
>>>
>>>>> thanks
>>>>> matt
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Matt Funk
Research Associate
Plant and Environmental Scienc. Dept.
New Mexico State University

From warmerdam at pobox.com  Tue Sep  6 12:48:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  6 13:24:55 2011
Subject: [gdal-dev] OGR_G_ExportToWkt make MEX crash
In-Reply-To: <4E6640E9.4000103@ualg.pt>
References: <4E6637F9.7080705@ualg.pt> <4E663B55.7090209@pobox.com>
	<4E6640E9.4000103@ualg.pt>
Message-ID: <CA+YzLBdF6Kyu9adpVGC5i4M2PYUG-Ow74ebtrtpe63aG67-YhA@mail.gmail.com>

On Tue, Sep 6, 2011 at 8:48 AM, Joaquim Luis <jluis@ualg.pt> wrote:
>
>> OGR_G_* functions are intended to operate on OGRGeometry objects while
>> OSR* functions operate on OGRSpatialReferences. ?Your hSRS object is an
>> OGRSpatialReference and not suitable to pass to OGR_G_ExportToWkt().
>>
>> You should use OSRExportToWkt() to translate an OGRSpatialReference into
>> it's
>> WKT representation.
>>
>> Best regards,
>
> Thanks Frank.
>
> This is also a result of my attempt to understand all the OGR model plus
> inventing a way of wrapping it all inside a single StructureArray (the C-MEX
> API). So let me ask one further question about the model. Is is possible to
> have the case
>
> Dataset --> SRS
> ? ? ? ? ? ? ? --> Feature1 --> Geom1 --> SRS1
> ? ? ? ? ? ? ? --> Feature2 --> Geom2 --> SRS2
> ? ? ? ? ? ? ? --> ...
>
> that is, different SpatialReferences inside the same Dataset?

Joaquim,

While not nailed down strictly, it is expected that
all geometries in a layer will share the same coordinate
system.  It is however common for the geometries
to be lacking the spatial reference object even though it
is set on the layer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Sep  6 13:31:21 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 14:09:42 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <4E664960.1080601@gmail.com>
References: <4E5D39CB.2070106@gmail.com> <4E5FAE5F.1040209@gmail.com>
	<4E664960.1080601@gmail.com>
Message-ID: <201109061931.21983.even.rouault@mines-paris.org>

Le mardi 06 septembre 2011 18:25:04, Matt Funk a ?crit :
> Hi Even,
> you mentioned in your previous email that the GDALGridCreate() fcn has
> only been mapped to Java bindings (I am assuming this is already the
> case for the the latest stable (1.8.1) release)? If so, can you point me
> to the interface file in which this is implemented? Doing a find/grep i
> could not find it.

Yes, it is included in 1.8.1. You'll find it in swig/include/Operations.i
From jluis at ualg.pt  Tue Sep  6 13:41:44 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Sep  6 14:21:25 2011
Subject: [gdal-dev] OGR_G_ExportToWkt make MEX crash
In-Reply-To: <CA+YzLBdF6Kyu9adpVGC5i4M2PYUG-Ow74ebtrtpe63aG67-YhA@mail.gmail.com>
References: <4E6637F9.7080705@ualg.pt>	<4E663B55.7090209@pobox.com>	<4E6640E9.4000103@ualg.pt>
	<CA+YzLBdF6Kyu9adpVGC5i4M2PYUG-Ow74ebtrtpe63aG67-YhA@mail.gmail.com>
Message-ID: <4E665B58.6080603@ualg.pt>

On 06-09-2011 17:48, Frank Warmerdam wrote:
> On Tue, Sep 6, 2011 at 8:48 AM, Joaquim Luis<jluis@ualg.pt>  wrote:
>>> OGR_G_* functions are intended to operate on OGRGeometry objects while
>>> OSR* functions operate on OGRSpatialReferences.  Your hSRS object is an
>>> OGRSpatialReference and not suitable to pass to OGR_G_ExportToWkt().
>>>
>>> You should use OSRExportToWkt() to translate an OGRSpatialReference into
>>> it's
>>> WKT representation.
>>>
>>> Best regards,
>> Thanks Frank.
>>
>> This is also a result of my attempt to understand all the OGR model plus
>> inventing a way of wrapping it all inside a single StructureArray (the C-MEX
>> API). So let me ask one further question about the model. Is is possible to
>> have the case
>>
>> Dataset -->  SRS
>>                -->  Feature1 -->  Geom1 -->  SRS1
>>                -->  Feature2 -->  Geom2 -->  SRS2
>>                -->  ...
>>
>> that is, different SpatialReferences inside the same Dataset?
> Joaquim,
>
> While not nailed down strictly, it is expected that
> all geometries in a layer will share the same coordinate
> system.  It is however common for the geometries
> to be lacking the spatial reference object even though it
> is set on the layer.
>
> Best regards,ject

OK, that's what I assumed too and the root of my error when tried to 
call OGR_G_ExportToWkt on a spatial reference object.

Thanks again

Joaquim
From hilda.villegas at navico.com  Tue Sep  6 13:42:18 2011
From: hilda.villegas at navico.com (Hilda Villegas)
Date: Tue Sep  6 14:34:13 2011
Subject: [gdal-dev] Unicode support in OGR Shape/DBF
Message-ID: <D84A62FA1ABE914C9E4F33788DBF50C901889353@exch02-ensmx.MARINE.NET.INT>

Hi,

 

I'm trying to use the preliminary encoding support for shapefile/dbf as
you said in the Ticket #882, SHAPE_ENCODING configuration variable can
be used to override the interpretation, but I cannot find the valid
values for this SHAPE_ENCODING anywhere, What value should I use if I
want to write Unicode characters (UTF-8) in the DBF? 

 

Regards,

 

Hilda Villegas | r&D design engineer | NAVICO ENSENADA

 

Av. Reforma 1648 Fracc. Valle Verde | Ensenada, B.C. 22839 MX |  Web:
www.navico.com <http://www.navico.com> 
Tel: +52 646/175.1100 | Fax: +52 646/175.1196 | Mob: +52 1 646/197.0637


Confidentiality Notice | This message may contain confidential and/or
privileged information. If you are not the addressee or authorized to
receive this for the addressee, you must not use, copy, disclose or take
any action based on this message or any information herein. If you have
received this message in error, please advise the sender immediately by
reply e-mail and delete this message. Thank you for your cooperation.

 

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/a4f8b73c/attachment-0001.html
From arb at sat.dundee.ac.uk  Tue Sep  6 15:12:33 2011
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Tue Sep  6 15:57:20 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E64E0CC.1070000@uva.nl>
References: <4E64E0CC.1070000@uva.nl>
Message-ID: <CAHOfOo1y=vcmQUpRjbs-wdAabmcnqdz2pcMGMjhLX37SZDq-xg@mail.gmail.com>

On 5 September 2011 15:46, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
> Is there a quick way to add back georeferencing information to a geotif file
> that has been processed by Imagemagick?

There should be an "applygeo" utility distributed with the geotiff
library which can do this.

Andrew
From dron at ak4719.spb.edu  Tue Sep  6 15:52:53 2011
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Sep  6 17:01:58 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <20110906195253.GA16043@ak4719.spb.edu>

On Fri, Sep 02, 2011 at 10:42:16PM +0200, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny

+1

-- 
Andrey V. Kiselev
From matt.wilkie at gov.yk.ca  Tue Sep  6 16:20:16 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Sep  6 17:09:01 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <CAHOfOo1y=vcmQUpRjbs-wdAabmcnqdz2pcMGMjhLX37SZDq-xg@mail.gmail.com>
References: <4E64E0CC.1070000@uva.nl>
	<CAHOfOo1y=vcmQUpRjbs-wdAabmcnqdz2pcMGMjhLX37SZDq-xg@mail.gmail.com>
Message-ID: <4E668080.7070907@gov.yk.ca>

> Is there a quick way to add back georeferencing information to a geotif file that has been processed by Imagemagick?

also see 
http://code.google.com/p/maphew/source/browse/gis/gdal_extras/bin/gdalcopyproj.py

cheers,

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From even.rouault at mines-paris.org  Tue Sep  6 17:08:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  6 17:59:02 2011
Subject: [gdal-dev] Unicode support in OGR Shape/DBF
In-Reply-To: <D84A62FA1ABE914C9E4F33788DBF50C901889353@exch02-ensmx.MARINE.NET.INT>
References: <D84A62FA1ABE914C9E4F33788DBF50C901889353@exch02-ensmx.MARINE.NET.INT>
Message-ID: <201109062308.05416.even.rouault@mines-paris.org>

Le mardi 06 septembre 2011 19:42:18, Hilda Villegas a ?crit :
> Hi,
> 
> 
> 
> I'm trying to use the preliminary encoding support for shapefile/dbf as
> you said in the Ticket #882, SHAPE_ENCODING configuration variable can
> be used to override the interpretation, but I cannot find the valid
> values for this SHAPE_ENCODING anywhere, What value should I use if I
> want to write Unicode characters (UTF-8) in the DBF?
> 

To overrite the encoding when *writing*, you should the ENCODING layer 
creation option :

ogr2ogr out.shp indatasource -lco ENCODING=UTF-8

Note: in that case, the encoding of the input datasource must be already 
encoded in UTF-8, which is the pivot encoding for OGR. The effect of  -lco 
ENCODING=UTF-8 will be essentially to write a .cpg file with UTF-8 as its 
content. Apart from using a value of the form LDID/a_numeric_value where 
a_numeric_value is a value in the first column of table 9 of 
http://www.autopark.ru/ASBProgrammerGuide/DBFSTRUC.HTM (from 1 to 204), it is 
not entirely clear which other values are valid for the ENCODING parameter to 
have interoperability with other systems.

The SHAPE_ENCODING configuration option/environment variable is to be used when 
you want to override the encoding indicated in the .dbf/.cpg file when reading 
a shapefile. It can be set to any valid value recognized by the iconv library, 
whose list you can get with iconv -l on a system with iconv binaries 
installed. In that case, OGR will recode from SHAPE_ENCODING to UTF-8. If you 
want no recoding to happen, you can set SHAPE_ENCODING="".
From jf at geonef.fr  Tue Sep  6 17:22:03 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Tue Sep  6 18:13:55 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <CALEAJzw1YgnCSqyBLCZ=Q5veR0YBv_+6RYR47LZa=xCi7yz0pA@mail.gmail.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
	<CACALY+S2UOfAy+maqE6fnQ5s=+ofHduvnKmf6vN1gPeL+wp4-g@mail.gmail.com>
	<CALEAJzw1YgnCSqyBLCZ=Q5veR0YBv_+6RYR47LZa=xCi7yz0pA@mail.gmail.com>
Message-ID: <CALEAJzz7gusT_jD8gR7H3G9443Q58uFrAUdCzdbZAGzF5QF4yA@mail.gmail.com>

Hi,

I have update the license of php5-gdal to the same as GDAL (I copied
the license block).
The project website is: http://projects.geonef.fr/projects/php5-gdal/wiki

If you want to add a link to
http://trac.osgeo.org/gdal/#GDALOGRInOtherLanguages, the project is
ready for it.

Regards,

Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/



2011/8/9 Jean-Fran?ois Gigand <jf@geonef.fr>:
> Hi Thomas,
>
> I actually noticed that initiative 2 days ago by searching the ML,
> posts dated from around March.
> If I had seen them on that time, I would have shared my code earlier.
>
> I never used SWIG. When I wondered in last December if I should
> leverage SWIG or write a C++ PHP extension, I chose the latter when I
> noticed that the PHP SWIG bindings in GDAL were very old. I was also
> encouraged when I noticed that for MapServer, the PHP MapScript
> extension is written in core C, although they use SWIG for some other
> languages like Python.
>
> Mike Leahy, have you got anything working with the SWIG bindings?
> Since you know SWIG, what do you think about this choice?
>
>
> Jean-Fran?ois Gigand - Geonef
> Paris, France - http://geonef.fr/
>
>
>
> 2011/8/9 Tamas Szekeres <szekerest@gmail.com>:
>>
>>
>> 2011/8/9 Jean-Fran?ois Gigand <jf@geonef.fr>
>>>
>>> I decided to write this library when I got limited at using OGR/PHP
>>> (segfault crash) and noticed the latter has not been maintained for
>>> years.
>>> After trying to compile the SWIG bindings with no success, I thought a
>>> good robust C++ code would be the best deal for providing OOP
>>> interfaces to PHP.
>>>
>>
>>
>> Hi Jean,
>>
>> I just wanted to mention, there have been some efforts recently by Mike
>> Leahy to resurrect the php bindings, the corresponding ticket can be found
>> here:
>> http://trac.osgeo.org/gdal/ticket/3984
>>
>> However I'm not sure about the current status of this work and how the
>> bindings work with the attached patches. Do you have experiences?
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>
From patdevelop at gmail.com  Tue Sep  6 19:31:07 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Tue Sep  6 20:29:58 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CAPMKADXJA0aFhf=hp_6g43a6qS=+6RmTDsbivhSw-x_9KqS6UA@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<CAPMKADXJA0aFhf=hp_6g43a6qS=+6RmTDsbivhSw-x_9KqS6UA@mail.gmail.com>
Message-ID: <CALOKYXUkp1tz04p=EahPrn5CObPJU06HW5KvOjaA6jJ0f214Dg@mail.gmail.com>

On Mon, Sep 5, 2011 at 11:23 PM, Etienne Tourigny
<etiennesky.dev@gmail.com> wrote:
> Patrick,
>
> A)
> your suggestion does make sense, it is imperial that basic datum
> information be saved as to adhere to CF-x standard. ? Are those CF
> variables (radius, flattening etc) really sufficient for software such
> as THREDDS?

Yes, tests I did showed it was able to project correctly after adding
these (whereas beforehand the WMS layers were "off" - presumably TDS
assumes a spherical earth by default).

The datum attributes are highlighted in color at CF conventions
website, in the table at the end of the page:
http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.5/apf.html

>
> B)
> The other aspect (to save projection_ref so that GDAL can import it)
> also makes sense, however I have the following concern:
>
> If another software changes the datum and or projection information of
> a netcdf file created by GDAL, but keeps the GDAL 'spatial_ref' tag
> intact, then GDAL would import the wrong projection. ?I don't think
> that this should happen, as a program would be expected to write a new
> grid_mapping variable, without the GDAL tags.
>
> Can you think of possible software which does this and make a test? ?I
> can only think of CDO, and I do know that it discards anything from a
> previous projection definition.

I can't think of any software that does this off the top of my head
either ... though we've been looking into a NetCDF driver for the
Geotoolkit project, which may be able to reproject existing NetCDF
datasets.

In any case GDAL should probably print a warning if the 2 get 'out of
sync' when it imports?

>
> C)
> With that concern in mind,I was wondering if we can do one of the
> following instead:
>
> 1) import the standard CF variables and guess the WKT from that
> 2) just be content with the basic DATUM values from the CF variables
>
> for example, here is what a wkt looks like when importing a CF netcdf
> file wich a WGS84 datum:
>
> GEOGCS["unknown",
> ? ?DATUM["unknown",
> ? ? ? ?SPHEROID["Spheroid",6378137,298.257223563]],
> ? ?PRIMEM["Greenwich",0],
> ? ?UNIT["degree",0.0174532925199433]]
>
> and here is the full WGS84 WKT generated by GDAL
>
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0],
> ? ?UNIT["degree",0.0174532925199433],
> ? ?AUTHORITY["EPSG","4326"]]
>
>
> As you can see, the important values are there, but there are no
> descriptive names and EPSG authority. ?This is not strictly identified
> as WGS84 EPSG datum, but the important stuff is there.
>

I thought about this too ... it does seem a bit concerning though to
try and recognise the named datums from the values - possibly you'd
have issues of the accuracy they are stored at determining whether
GDAL could recognise them correctly or not?

I've heard there may be a 'dynamic datum' in development that has its
values adjusted more frequently - in this case referencing a standard
name would likely be necessary.

Having checked the GDAL NetCDF format page though, it does check the
CF encoded projection before it's own WKT, so it'd be good if we could
consistently use CF as first reference for the datum too.

>
> D)
> I doubt that the CF conventions have plans to support PROJ.4/WKT in
> the near future. ?Have a look at the draft for CF-1.6, nothing new
> about PROJ.4 or WKT :
> http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#grid-mappings-and-projections
>
> However, I would suggest to discuss this on the CF mailing list. They
> might be receptive, as they already make references to PROJ.4 in their
> projection definitions. BUT it would be better in this case to use
> PROJ.4 strings instead of WKT, as (I think) that PROJ.4 strings are
> better supported than WKT (including Proj.4 itself). ?For example, the
> folks that work on CDO have plans to support PROJ.4 strings, but now
> WKT.

Thanks, I'll need to read up a bit more on Proj.4 strings but sounds
like it could be a good way to go.

I just had a bit more of a look around the CF webpages and they did
consider putting more CRS information in the specs, e.g. a "crs_id"
attribute that could contain an EPSG code, but it didn't make it
through as yet:
https://cf-pcmdi.llnl.gov/trac/wiki/GridMappingAndCrs
https://cf-pcmdi.llnl.gov/trac/ticket/18

So yes discussing this on their mailing list again sounds like a good idea.

>
> Am I correct in thinking that GDAL could output a PROJ.4 string and
> import it in the same manner that it currently does with WKT?

Not sure - clearly you can specify Proj4 from the command line to
commands, but not sure you can ask it to store this, will do some
checking.

>
> BTW, there is a "CF-NetCDF 1.0 Standards Working Group" part of OGC,
> perhaps we can discuss with someone from that group?
> http://www.opengeospatial.org/projects/groups/cf-netcdf1.0swg

Yes, sounds like a good idea.

We actually read through the OGC standards on NetCDF recently, the
basic standard already accepted really just in a nutshell states that
'netCDF is a valid file format for use in OGC services'.  They are
aiming to define 'extensions' to cover things like recommended use of
CF, so this could be good.

cheers, Patrick.

>
> Regards,
> Etienne
>
>
>
> On Mon, Sep 5, 2011 at 6:40 AM, Patrick Sunter <patdevelop@gmail.com> wrote:
>> Hi Etienne and others interested in NetCDF driver,
>>
>> I did some work on WMS display of NetCDF files generated by GDAL
>> today, and it gave me a chance to play around with & think about how
>> to handle the Datum issue as described at
>> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements#Datumissues .
>>
>> Here's a first cut suggestion of how GDAL should behave when writing a
>> new NetCDF file using gdal_translate:
>> ?* Keep saving the current datum info, with names e.g. WGS84, as part
>> of the WKT that GDAL saves in it's special "spatial_ref" attribute.
>> ?* But _also_ save the actual spheroid parameters for the datum in use
>> in attributes CF-1 can read, e.g. semi_major_axis, semi_minor_axis,
>> and inverse_flattening.
>>
>> Then on import, GDAL would look for its "spatial_ref" by default as
>> authoritative for datum info, but could use the CF-1 as a backup.
>>
>> This would parallel the way projection parameters are handled in the
>> NetCDF driver, i.e. writing WKT in the 'spatial_ref' attribute, but
>> also writes duplicate CF-1 convention ones if possible to help with
>> display of the file in NetCDF tools and things like THREDDS.
>>
>> Perhaps this could be a passable option to the driver whether you
>> write the duplicate CF-1 datum info or not, with default to on.
>>
>> (That is, unless the CF conventions have plan to support named datums
>> coming up imminently?)
>>
>> cheers, Patrick.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From jluis at ualg.pt  Tue Sep  6 19:48:09 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Sep  6 20:47:44 2011
Subject: [gdal-dev] Small issue at OGR_G_GetCoordinateDimension doc
Message-ID: <4E66B139.4050804@ualg.pt>

Hi

The doc of OGR_G_GetCoordinateDimension states at

http://www.gdal.org/ogr/ogr__api_8h.html#8a5e78b0753339d1cdd282b0e151d28f

that

...
Returns:
         in practice this always returns 2 indicating that coordinates 
are specified within a two dimensional space.

but that's not true as I just confirmed with the autotest multipatch.shp 
example file, where it returns 3 as it should because vectors are 3D.


Joaquim
From etourigny.dev at gmail.com  Tue Sep  6 20:10:08 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Sep  6 21:18:53 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CALOKYXUkp1tz04p=EahPrn5CObPJU06HW5KvOjaA6jJ0f214Dg@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<CAPMKADXJA0aFhf=hp_6g43a6qS=+6RmTDsbivhSw-x_9KqS6UA@mail.gmail.com>
	<CALOKYXUkp1tz04p=EahPrn5CObPJU06HW5KvOjaA6jJ0f214Dg@mail.gmail.com>
Message-ID: <CA+TxYvNLxWDDUCH8DQ75siho5OuT1iWWGB9cNWD7-zxFGiNVWw@mail.gmail.com>

On Tue, Sep 6, 2011 at 8:31 PM, Patrick Sunter <patdevelop@gmail.com> wrote:

> On Mon, Sep 5, 2011 at 11:23 PM, Etienne Tourigny
> <etiennesky.dev@gmail.com> wrote:
> > Patrick,
> >
> > A)
> > your suggestion does make sense, it is imperial that basic datum
> > information be saved as to adhere to CF-x standard.   Are those CF
> > variables (radius, flattening etc) really sufficient for software such
> > as THREDDS?
>
> Yes, tests I did showed it was able to project correctly after adding
> these (whereas beforehand the WMS layers were "off" - presumably TDS
> assumes a spherical earth by default).
>

good


>
> The datum attributes are highlighted in color at CF conventions
> website, in the table at the end of the page:
> http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.5/apf.html
>
> >
> > B)
> > The other aspect (to save projection_ref so that GDAL can import it)
> > also makes sense, however I have the following concern:
> >
> > If another software changes the datum and or projection information of
> > a netcdf file created by GDAL, but keeps the GDAL 'spatial_ref' tag
> > intact, then GDAL would import the wrong projection.  I don't think
> > that this should happen, as a program would be expected to write a new
> > grid_mapping variable, without the GDAL tags.
> >
> > Can you think of possible software which does this and make a test?  I
> > can only think of CDO, and I do know that it discards anything from a
> > previous projection definition.
>
> I can't think of any software that does this off the top of my head
> either ... though we've been looking into a NetCDF driver for the
> Geotoolkit project, which may be able to reproject existing NetCDF
> datasets.
>
> In any case GDAL should probably print a warning if the 2 get 'out of
> sync' when it imports?
>

How could we know if it is 'out of sync'?  My feeling is that it's ok to
assume that any software that messes with the projection info will delete
any custom tags, but still safer to use as much standard information as
possible, and stay away from GDAL tags when possible.


> >
> > C)
> > With that concern in mind,I was wondering if we can do one of the
> > following instead:
> >
> > 1) import the standard CF variables and guess the WKT from that
> > 2) just be content with the basic DATUM values from the CF variables
> >
> > for example, here is what a wkt looks like when importing a CF netcdf
> > file wich a WGS84 datum:
> >
> > GEOGCS["unknown",
> >    DATUM["unknown",
> >        SPHEROID["Spheroid",6378137,298.257223563]],
> >    PRIMEM["Greenwich",0],
> >    UNIT["degree",0.0174532925199433]]
> >
> > and here is the full WGS84 WKT generated by GDAL
> >
> > GEOGCS["WGS 84",
> >    DATUM["WGS_1984",
> >        SPHEROID["WGS 84",6378137,298.257223563,
> >            AUTHORITY["EPSG","7030"]],
> >        AUTHORITY["EPSG","6326"]],
> >    PRIMEM["Greenwich",0],
> >    UNIT["degree",0.0174532925199433],
> >    AUTHORITY["EPSG","4326"]]
> >
> >
> > As you can see, the important values are there, but there are no
> > descriptive names and EPSG authority.  This is not strictly identified
> > as WGS84 EPSG datum, but the important stuff is there.
> >
>
> I thought about this too ... it does seem a bit concerning though to
> try and recognise the named datums from the values - possibly you'd
> have issues of the accuracy they are stored at determining whether
> GDAL could recognise them correctly or not?
>
> I've heard there may be a 'dynamic datum' in development that has its
> values adjusted more frequently - in this case referencing a standard
> name would likely be necessary.
>
> Having checked the GDAL NetCDF format page though, it does check the
> CF encoded projection before it's own WKT, so it'd be good if we could
> consistently use CF as first reference for the datum too.
>
>
agreed, I propose we stay away from WKT/PROJ.4  when a suitable CF
representation exists, and if not fall back to WKT / PROJ.4 - unless it
becomes a standard in later CF conventions, which could take time IMHO.

>
> > D)
> > I doubt that the CF conventions have plans to support PROJ.4/WKT in
> > the near future.  Have a look at the draft for CF-1.6, nothing new
> > about PROJ.4 or WKT :
> >
> http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#grid-mappings-and-projections
> >
> > However, I would suggest to discuss this on the CF mailing list. They
> > might be receptive, as they already make references to PROJ.4 in their
> > projection definitions. BUT it would be better in this case to use
> > PROJ.4 strings instead of WKT, as (I think) that PROJ.4 strings are
> > better supported than WKT (including Proj.4 itself).  For example, the
> > folks that work on CDO have plans to support PROJ.4 strings, but now
> > WKT.
>
> Thanks, I'll need to read up a bit more on Proj.4 strings but sounds
> like it could be a good way to go.
>
> I just had a bit more of a look around the CF webpages and they did
> consider putting more CRS information in the specs, e.g. a "crs_id"
> attribute that could contain an EPSG code, but it didn't make it
> through as yet:
> https://cf-pcmdi.llnl.gov/trac/wiki/GridMappingAndCrs
> https://cf-pcmdi.llnl.gov/trac/ticket/18
>
> So yes discussing this on their mailing list again sounds like a good idea.
>


It would be nice to revive the discussion, as it seems to have stalled a few
years ago.

I am honestly a little too busy to devote time to initiate this discussion
in a concise manner, could you take care of that? I also feel your knowledge
of the different projections is better than mine. I would like to take part,
though.


> >
> > Am I correct in thinking that GDAL could output a PROJ.4 string and
> > import it in the same manner that it currently does with WKT?
>
> Not sure - clearly you can specify Proj4 from the command line to
> commands, but not sure you can ask it to store this, will do some
> checking.
>

In case you feel like testing it, the functions needed are
 OGRSpatialReference::importFromProj4() and exportToProj4(), the later which
is not documented.

Perhaps others can comment on the suitability of exporttoProj4() ???

Regards, Etiene


>
> >
> > BTW, there is a "CF-NetCDF 1.0 Standards Working Group" part of OGC,
> > perhaps we can discuss with someone from that group?
> > http://www.opengeospatial.org/projects/groups/cf-netcdf1.0swg
>
> Yes, sounds like a good idea.
>
> We actually read through the OGC standards on NetCDF recently, the
> basic standard already accepted really just in a nutshell states that
> 'netCDF is a valid file format for use in OGC services'.  They are
> aiming to define 'extensions' to cover things like recommended use of
> CF, so this could be good.
>
> cheers, Patrick.
>
> >
> > Regards,
> > Etienne
> >
> >
> >
> > On Mon, Sep 5, 2011 at 6:40 AM, Patrick Sunter <patdevelop@gmail.com>
> wrote:
> >> Hi Etienne and others interested in NetCDF driver,
> >>
> >> I did some work on WMS display of NetCDF files generated by GDAL
> >> today, and it gave me a chance to play around with & think about how
> >> to handle the Datum issue as described at
> >> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements#Datumissues .
> >>
> >> Here's a first cut suggestion of how GDAL should behave when writing a
> >> new NetCDF file using gdal_translate:
> >>  * Keep saving the current datum info, with names e.g. WGS84, as part
> >> of the WKT that GDAL saves in it's special "spatial_ref" attribute.
> >>  * But _also_ save the actual spheroid parameters for the datum in use
> >> in attributes CF-1 can read, e.g. semi_major_axis, semi_minor_axis,
> >> and inverse_flattening.
> >>
> >> Then on import, GDAL would look for its "spatial_ref" by default as
> >> authoritative for datum info, but could use the CF-1 as a backup.
> >>
> >> This would parallel the way projection parameters are handled in the
> >> NetCDF driver, i.e. writing WKT in the 'spatial_ref' attribute, but
> >> also writes duplicate CF-1 convention ones if possible to help with
> >> display of the file in NetCDF tools and things like THREDDS.
> >>
> >> Perhaps this could be a passable option to the driver whether you
> >> write the duplicate CF-1 datum info or not, with default to on.
> >>
> >> (That is, unless the CF conventions have plan to support named datums
> >> coming up imminently?)
> >>
> >> cheers, Patrick.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/030eeb0e/attachment-0001.html
From ole.moller.nielsen at gmail.com  Tue Sep  6 20:36:35 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Tue Sep  6 21:38:31 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <1315321850.4e6637fab150e@webmail.free.fr>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<201109041116.09789.even.rouault@mines-paris.org>
	<CALcLSfq4zLowv2zgRGSvnrD5B0MREicTf27t4qQtu2R8-eFXCQ@mail.gmail.com>
	<201109060805.38673.even.rouault@mines-paris.org>
	<CALcLSfrU2zh-L0HguzXcMBzH__p1NV2TSvTPdge-tbe5hL7dqw@mail.gmail.com>
	<1315319209.4e662da9a1cf3@webmail.free.fr>
	<CALcLSfoXNumKFzKNisa0hc6P_QQdc+fbU6fFZ6C_AxXsTd8j=A@mail.gmail.com>
	<1315321850.4e6637fab150e@webmail.free.fr>
Message-ID: <CALcLSfqwfUCr5jS_+sPbtWb6TbP4A79cs_+GLb7upARHccZxZw@mail.gmail.com>

Yes this seems to work. However, I get a huge amounts of warnings of the
form
>>> lyr.CreateField(fd)
Warning 6: Normalized/laundered field name: 'A slightly long name' to 'A
slightly'
0

They obviously tell what name has been derived, but I don't want this output
to clutter, and since that name is already available through your procedure
they really should be suppressed. Can that be done?
Many thanks
Ole

On Tue, Sep 6, 2011 at 10:10 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
>
> > Thanks - I was hoping I could rely on the library to do the intelligent
> > truncation, but couldn't work it out.
> > Can I just clarify that the name to use with SetField would then be what
> is
> > provided by your last line?
> >
> >  layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
>
> Yes
>
> >
> > Cheers and thanks
> > Ole
> >
> > On Tue, Sep 6, 2011 at 9:26 PM, Even Rouault
> > <even.rouault@mines-paris.org>wrote:
> >
> > > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> > >
> > > > Hi Even
> > > >
> > > > Thanks again for all your help - all tests now pass using either gdal
> 1.6
> > > or
> > > > 1.8. Just to summarise, there were three issues as I see them:
> > > >
> > > >
> > > >    1. Bounding boxes for raster data are computed differently (but
> > > better)
> > > >    in newer versions
> > >
> > > Specific to PixelIsPoint in the GTiff driver.
> > >
> > > >    2. While v1.6 of ogre would allow an single number of type
> > > numpy.ndarray
> > > >    this is no longer allow. Casting it to a float solves the problem.
> > >
> > > I wasn't aware it could work before. There's perhaps now an ambiguity
> on
> > > which
> > > method to use, due to the addition of new possibilities for SetField()
> > > (just a
> > > bling guess).
> > >
> > > >    3. New versions of ogre will not allow attribute names of length
> > > longer
> > > >    than 10 (at least when using the ESRI driver). Formerly, I think
> it
> > > > silently
> > > >    truncated, now it is up to the user. That's at least what I did.
> > >
> > > I've a looked quickly a bit at your code and I've the feeling that you
> > > truncate
> > > yourself, instead of relying on OGR. The Shapefile driver does more
> than
> > > truncating. It also ensures uniqueness of the truncated names. For
> example,
> > > if
> > > you try creating "a_very_long_name" and "a_very_long_name_again", they
> will
> > > be
> > > respectively truncated to "a_very_lon" and "a_very_l_1". A safer
> solution
> > > to get
> > > the field name that got to the file would be to :
> > >
> > > field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
> > > lyr.CreateField(field_defn)
> > > layer_defn = lyr.GetLayerDefn()
> > > last_field_idx = layer_defn.GetFieldCount() - 1
> > > real_field_name = layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
> > >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110907/3901c0cd/attachment.html
From etourigny.dev at gmail.com  Tue Sep  6 21:05:40 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Sep  6 22:09:05 2011
Subject: [gdal-dev] merging of files with gdalwarp causses a slight shift
Message-ID: <CA+TxYvM1rWs=yoCiOE9JDPj5W6AseSO2CJeRTop=dho3qSdTmA@mail.gmail.com>

Hi All,

Merging 2 files with a geographical CRS results in the output being shifted
a quarter-pixel to the east and south.  The datum is WGS84 (altough not
explicitly named), I get the same result if I explicitly set it to WGS84.
SImilar data in modis sinusoidal projection gets merged fine with the same
command.

I am using the following command:
gdalwarp -srcnodata 0 -dstnodata 0 -co COMPRESS=LZW
MCD45monthly.burndate.Win06.2010-byte.tif
MCD45monthly.burndate.Win05.2010-byte.tif
MCD45monthly.burndate.sam.2010-Byte.tif

Files can be found at:
http://www.openclimgeo.org/pub/


Any help would be appreciated! Here is the gdalinfo for the 3 files.

Etienne

tourigny@supernova: /data/research/work/modis/mcd45/gtiff/out/upload $
gdalinfo MCD45monthly.burndate.Win05.2010-byte.tif
Driver: GTiff/GeoTIFF
Files: MCD45monthly.burndate.Win05.2010-byte.tif
Size is 10923, 5234
Coordinate System is:
GEOGCS[,
    DATUM["unknown",
        SPHEROID["unnamed",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-81.997802734374957,12.997802734374995)
Pixel Size = (0.004394531250000,-0.004394531250000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -81.9978027,  12.9978027) ( 81d59'52.09"W, 12d59'52.09"N)
Lower Left  ( -81.9978027, -10.0031738) ( 81d59'52.09"W, 10d 0'11.43"S)
Upper Right ( -33.9963379,  12.9978027) ( 33d59'46.82"W, 12d59'52.09"N)
Lower Right ( -33.9963379, -10.0031738) ( 33d59'46.82"W, 10d 0'11.43"S)
Center      ( -57.9970703,   1.4973145) ( 57d59'49.45"W,  1d29'50.33"N)
Band 1 Block=10923x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
tourigny@supernova: /data/research/work/modis/mcd45/gtiff/out/upload $
gdalinfo MCD45monthly.burndate.Win06.2010-byte.tif
Driver: GTiff/GeoTIFF
Files: MCD45monthly.burndate.Win06.2010-byte.tif
Size is 10240, 5689
Coordinate System is:
GEOGCS[,
    DATUM["unknown",
        SPHEROID["unnamed",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-78.997802734374972,-10.002197265624996)
Pixel Size = (0.004394531250000,-0.004394531250000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -78.9978027, -10.0021973) ( 78d59'52.09"W, 10d 0' 7.91"S)
Lower Left  ( -78.9978027, -35.0026855) ( 78d59'52.09"W, 35d 0' 9.67"S)
Upper Right ( -33.9978027, -10.0021973) ( 33d59'52.09"W, 10d 0' 7.91"S)
Lower Right ( -33.9978027, -35.0026855) ( 33d59'52.09"W, 35d 0' 9.67"S)
Center      ( -56.4978027, -22.5024414) ( 56d29'52.09"W, 22d30' 8.79"S)
Band 1 Block=10240x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
tourigny@supernova: /data/research/work/modis/mcd45/gtiff/out/upload $
gdalinfo MCD45monthly.burndate.sam.2010-Byte.tif
Driver: GTiff/GeoTIFF
Files: MCD45monthly.burndate.sam.2010-Byte.tif
Size is 10923, 10923
Coordinate System is:
GEOGCS[,
    DATUM["unknown",
        SPHEROID["unnamed",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-81.997802734374957,12.997802734374995)
Pixel Size = (0.004394531250000,-0.004394531250000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -81.9978027,  12.9978027) ( 81d59'52.09"W, 12d59'52.09"N)
Lower Left  ( -81.9978027, -35.0036621) ( 81d59'52.09"W, 35d 0'13.18"S)
Upper Right ( -33.9963379,  12.9978027) ( 33d59'46.82"W, 12d59'52.09"N)
Lower Right ( -33.9963379, -35.0036621) ( 33d59'46.82"W, 35d 0'13.18"S)
Center      ( -57.9970703, -11.0029297) ( 57d59'49.45"W, 11d 0'10.55"S)
Band 1 Block=10923x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110906/187ecf4a/attachment.html
From warmerdam at pobox.com  Tue Sep  6 23:23:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep  7 00:34:04 2011
Subject: [gdal-dev] merging of files with gdalwarp causses a slight shift
In-Reply-To: <CA+TxYvM1rWs=yoCiOE9JDPj5W6AseSO2CJeRTop=dho3qSdTmA@mail.gmail.com>
References: <CA+TxYvM1rWs=yoCiOE9JDPj5W6AseSO2CJeRTop=dho3qSdTmA@mail.gmail.com>
Message-ID: <4E66E39C.2040605@pobox.com>

On 11-09-06 06:05 PM, Etienne Tourigny wrote:
> Hi All,
>
> Merging 2 files with a geographical CRS results in the output being shifted a
> quarter-pixel to the east and south.  The datum is WGS84 (altough not
> explicitly named), I get the same result if I explicitly set it to WGS84.
> SImilar data in modis sinusoidal projection gets merged fine with the same command.
>
> I am using the following command:
> gdalwarp -srcnodata 0 -dstnodata 0 -co COMPRESS=LZW
> MCD45monthly.burndate.Win06.2010-byte.tif
> MCD45monthly.burndate.Win05.2010-byte.tif MCD45monthly.burndate.sam.2010-Byte.tif
>
> Files can be found at:
> http://www.openclimgeo.org/pub/
>
>
> Any help would be appreciated! Here is the gdalinfo for the 3 files.

Etienne,

As far as I can see the two input files (Win05 and Win06) are not sampled
on the same grid even though they have the same pixel size.  For instance
comparing the offsets of the top left X positions we see they are not an
even number of pixels apart:

 >>> (-81.997802734374957 - -78.997802734374972) / 0.004394531250000
-682.66666666666345

When gdalwarp creates the output file it picks an extent and pixel size
to capture all the input files and preserve essentially the same pixel
size.  In this case the pixel size seems to be preserved but by definition
the sampling grid can't match both files so one ends up being resampled.

So, things are "working as intended".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From even.rouault at mines-paris.org  Wed Sep  7 01:14:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 02:31:24 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109022242.16846.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
Message-ID: <201109070714.16043.even.rouault@mines-paris.org>

> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny

I declare this motion passed with support from PSC members AndreyK, DanielM,
EvenR, FrankW and TamasS and with non-PSC member Kyle Shannon.

Etienne, I'll let Frank deal with the practical details to enable you as a
committer.

Welcome aboard !

Best regards,

Even
From even.rouault at mines-paris.org  Wed Sep  7 01:16:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 02:33:33 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <CALcLSfqwfUCr5jS_+sPbtWb6TbP4A79cs_+GLb7upARHccZxZw@mail.gmail.com>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<1315321850.4e6637fab150e@webmail.free.fr>
	<CALcLSfqwfUCr5jS_+sPbtWb6TbP4A79cs_+GLb7upARHccZxZw@mail.gmail.com>
Message-ID: <201109070716.20920.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 02:36:35, Ole Nielsen a ?crit :
> Yes this seems to work. However, I get a huge amounts of warnings of the
> form
> 
> >>> lyr.CreateField(fd)
> 
> Warning 6: Normalized/laundered field name: 'A slightly long name' to 'A
> slightly'
> 0
> 
> They obviously tell what name has been derived, but I don't want this
> output to clutter, and since that name is already available through your
> procedure they really should be suppressed. Can that be done?

Yes, you can surround the CreateField() call with :

gdal.PushErrorHandler('CPLQuietErrorHandler')
...
gdal.PopErrorHandler()

> Many thanks
> Ole
> 
> On Tue, Sep 6, 2011 at 10:10 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> > > Thanks - I was hoping I could rely on the library to do the intelligent
> > > truncation, but couldn't work it out.
> > > Can I just clarify that the name to use with SetField would then be
> > > what
> > 
> > is
> > 
> > > provided by your last line?
> > > 
> > >  layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
> > 
> > Yes
> > 
> > > Cheers and thanks
> > > Ole
> > > 
> > > On Tue, Sep 6, 2011 at 9:26 PM, Even Rouault
> > > 
> > > <even.rouault@mines-paris.org>wrote:
> > > > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> > > > > Hi Even
> > > > > 
> > > > > Thanks again for all your help - all tests now pass using either
> > > > > gdal
> > 
> > 1.6
> > 
> > > > or
> > > > 
> > > > > 1.8. Just to summarise, there were three issues as I see them:
> > > > >    1. Bounding boxes for raster data are computed differently (but
> > > > 
> > > > better)
> > > > 
> > > > >    in newer versions
> > > > 
> > > > Specific to PixelIsPoint in the GTiff driver.
> > > > 
> > > > >    2. While v1.6 of ogre would allow an single number of type
> > > > 
> > > > numpy.ndarray
> > > > 
> > > > >    this is no longer allow. Casting it to a float solves the
> > > > >    problem.
> > > > 
> > > > I wasn't aware it could work before. There's perhaps now an ambiguity
> > 
> > on
> > 
> > > > which
> > > > method to use, due to the addition of new possibilities for
> > > > SetField() (just a
> > > > bling guess).
> > > > 
> > > > >    3. New versions of ogre will not allow attribute names of length
> > > > 
> > > > longer
> > > > 
> > > > >    than 10 (at least when using the ESRI driver). Formerly, I think
> > 
> > it
> > 
> > > > > silently
> > > > > 
> > > > >    truncated, now it is up to the user. That's at least what I did.
> > > > 
> > > > I've a looked quickly a bit at your code and I've the feeling that
> > > > you truncate
> > > > yourself, instead of relying on OGR. The Shapefile driver does more
> > 
> > than
> > 
> > > > truncating. It also ensures uniqueness of the truncated names. For
> > 
> > example,
> > 
> > > > if
> > > > you try creating "a_very_long_name" and "a_very_long_name_again",
> > > > they
> > 
> > will
> > 
> > > > be
> > > > respectively truncated to "a_very_lon" and "a_very_l_1". A safer
> > 
> > solution
> > 
> > > > to get
> > > > the field name that got to the file would be to :
> > > > 
> > > > field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
> > > > lyr.CreateField(field_defn)
> > > > layer_defn = lyr.GetLayerDefn()
> > > > last_field_idx = layer_defn.GetFieldCount() - 1
> > > > real_field_name =
> > > > layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
From even.rouault at mines-paris.org  Wed Sep  7 01:24:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 02:42:29 2011
Subject: [gdal-dev] Small issue at OGR_G_GetCoordinateDimension doc
In-Reply-To: <4E66B139.4050804@ualg.pt>
References: <4E66B139.4050804@ualg.pt>
Message-ID: <201109070724.47824.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 01:48:09, Joaquim Luis a ?crit :
> Hi
> 
> The doc of OGR_G_GetCoordinateDimension states at
> 
> http://www.gdal.org/ogr/ogr__api_8h.html#8a5e78b0753339d1cdd282b0e151d28f
> 
> that
> 
> ...
> Returns:
>          in practice this always returns 2 indicating that coordinates
> are specified within a two dimensional space.
> 
> but that's not true as I just confirmed with the autotest multipatch.shp
> example file, where it returns 3 as it should because vectors are 3D.

Fixed. Thanks.

> 
> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Sep  7 01:33:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 02:52:12 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CA+TxYvNLxWDDUCH8DQ75siho5OuT1iWWGB9cNWD7-zxFGiNVWw@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<CALOKYXUkp1tz04p=EahPrn5CObPJU06HW5KvOjaA6jJ0f214Dg@mail.gmail.com>
	<CA+TxYvNLxWDDUCH8DQ75siho5OuT1iWWGB9cNWD7-zxFGiNVWw@mail.gmail.com>
Message-ID: <201109070733.59308.even.rouault@mines-paris.org>


> In case you feel like testing it, the functions needed are
>  OGRSpatialReference::importFromProj4() and exportToProj4(), the later
> which is not documented.
> 
> Perhaps others can comment on the suitability of exporttoProj4() ???
> 

It is documented but doxygen didn't like a macro that was inserted between the 
comment and the function. Should be fixed by r23070

I'd note that proj4 strings have not all the expressivity of WKT. In 
particular they cannot capture citation strings, or authority name and code. 
So the suitability of using them depends on what you want to do with them.
From uwe.schmitz at bezreg-koeln.nrw.de  Wed Sep  7 06:13:49 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Wed Sep  7 07:47:35 2011
Subject: AW: [gdal-dev] AW: ESRI products have problems reading
	gdalspatialreference entry
In-Reply-To: <4E663ECA.9080704@pobox.com>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBCB8@sebulba.bezreg-koeln.nrw.de>

Frank,

> >
> > So if I conclude:
> > ESRI and GDAL have different WKT formats. It is not
> > possible to write GeoTIFF files which are fully
> > ESRI *and* GDAL compatible.
> 
> Uwe,
> 
> I do not agree with this conclusion!  However, it is
> difficult to produce a GeoTIFF file that will exactly
> preserve and ESRI Project Engine string (ie. ESRI WKT)
> while at the same time being fully compatible with all
> other software.  The issues are primarily around limits
> of the GeoTIFF format, and to some extend somewhat
> incomplete code implementations in GDAL / ArcGIS.
> 
what means difficult? I'm willing to invest in this,
if it's possible at all.

> > A workaround may be to use ArcGIS's GDAL support
> > for GeoTIFF.
> 
> I am not sure what this means exactly.  ArcGIS now always
> uses GDAL for reading and writing GeoTIFF.
> 
Ok, as I said, I'm not an ArcGIS expert. Some years ago, as
I looked deeper into it, gdal was an option for
reading rasters. Nice to hear that this has changed.
I had the illusion that this could solve the spatialreference
problem, but this doesn't seem to be the case.

Uwe
From peifer at gmx.eu  Wed Sep  7 06:31:36 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Sep  7 08:06:07 2011
Subject: [gdal-dev] Re: AW: ESRI products have problems reading gdal
 spatialreference entry
In-Reply-To: <4E663ECA.9080704@pobox.com>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBCB3@sebulba.bezreg-koeln.nrw.de>
	<4E663ECA.9080704@pobox.com>
Message-ID: <4E674808.6090002@gmx.eu>

On 06/09/2011 17:39, Frank Warmerdam wrote:
> On 11-09-06 12:54 AM, Schmitz, Uwe wrote:
>> So if I conclude:
>> ESRI and GDAL have different WKT formats. It is not
>> possible to write GeoTIFF files which are fully
>> ESRI *and* GDAL compatible.
>
> Uwe,
>
> I do not agree with this conclusion! However, it is
> difficult to produce a GeoTIFF file that will exactly
> preserve and ESRI Project Engine string (ie. ESRI WKT)
> while at the same time being fully compatible with all
> other software. The issues are primarily around limits
> of the GeoTIFF format, and to some extend somewhat
> incomplete code implementations in GDAL / ArcGIS.
>

I would really be interested in such an "ESRI-friendly" GeoTIFF file.

Could it be that in theory it is just difficult to produce such a 
GeoTIFF (as Frank writes above) whereas in practice and as of today, it 
is actually impossible (as Uwe wrote)?

;-) Hermann
From paul.malm at saabgroup.com  Wed Sep  7 07:14:55 2011
From: paul.malm at saabgroup.com (Malm Paul)
Date: Wed Sep  7 09:25:31 2011
Subject: [gdal-dev] GDAL together with PostgreSQL 9.0
Message-ID: <F9444836447D054A829AD85D954D0933030B60@corpappl747.corp.saab.se>

Hi,
I would lige to update PostgreSQL from 8.3.7  to 9.0.
Is GDAL, including ogr2ogr, compatible with that version (postgres driver)? I'm Using  Linux redhat 5.
Kind regards,
Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110907/debc4da7/attachment.html
From a.neumann at carto.net  Wed Sep  7 10:16:28 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Sep  7 12:03:18 2011
Subject: [gdal-dev] Problem converting certain postgis tables to spatialite
Message-ID: <30eaee62e97da48076ef1f9a3337e965@carto.net>

 Hi,

 I am converting several tables from Postgis to SpatiaLite using 
 ogr2ogr.

 Here is my command:

 -----------
 ogr2ogr -append -lco LAUNDER=yes -lco SPATIAL_INDEX=yes -nln 
 av_grenzpunkte -f SQLite uster.sqlite PG:"dbname='mydb' host='myserver' 
 port='5432' user='username' password='pw' schemas=av_user 
 tables=grenzpunkte(the_geom)"
 ----------

 The problem is that about 50% of the tables convert fine, while the 
 other half ends with a segmentation fault. I don't see a pattern yet why 
 some convert fine, while others do not.

 I am using Ubuntu 64bit, latest trunk and libspatialite 2.3.1

 Do you have any idea how I can find out what the problem is with the 
 tables that do not convert? Any experiences with similar behavior and 
 how to solve it?

 Thanks,
 Andreas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From jukka.rahkonen at mmmtike.fi  Wed Sep  7 10:52:31 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Sep  7 12:41:19 2011
Subject: [gdal-dev] Re: Problem converting certain postgis tables to
	spatialite
References: <30eaee62e97da48076ef1f9a3337e965@carto.net>
Message-ID: <loom.20110907T164351-367@post.gmane.org>

Andreas Neumann <a.neumann <at> carto.net> writes:

> 
>  Hi,
> 
>  I am converting several tables from Postgis to SpatiaLite using 
>  ogr2ogr.
> 
>  Here is my command:
> 
>  -----------
>  ogr2ogr -append -lco LAUNDER=yes -lco SPATIAL_INDEX=yes -nln 
>  av_grenzpunkte -f SQLite uster.sqlite PG:"dbname='mydb' host='myserver' 
>  port='5432' user='username' password='pw' schemas=av_user 
>  tables=grenzpunkte(the_geom)"
>  ----------

Hi,

I have used these options:

-dsco SPATIALITE=yes
-lco SPATIAL_INDEX=no
and for polygon layers
-nlt MULTIPOLYGON (Spatialite do not want polygons and multipolygons on the same
layer, so let them be all multipolygons). Same with mixed lines/multilines if
you may have those.

-update is needed when adding new layers. Are you adding to an existing table
because you have -append?

Ogr2ogr does not create totally valid Spatialite databases. Therefore I skip the
SPATIAL_INDEX because conversion is faster without. After ogr2ogr process I am
cleaning the resulting database by copying the tables into a fresh Spatialite
database with OpenLite tool http://www.gaia-gis.it/OpenLite/

-Jukka Rahkonen-

From a.neumann at carto.net  Wed Sep  7 11:05:50 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Sep  7 12:55:29 2011
Subject: [gdal-dev] Re: Problem converting certain postgis tables to
	spatialite
In-Reply-To: <loom.20110907T164351-367@post.gmane.org>
References: <30eaee62e97da48076ef1f9a3337e965@carto.net>
	<loom.20110907T164351-367@post.gmane.org>
Message-ID: <9df1e03bd27d2efacb02f4e1ba882df9@carto.net>

 HI Jukka,

 Thank you for your thoughts. Yes, perhaps I should use update instead 
 of append.

 I actually found out what the problem is:

 Tables or views that do not have an entry in public.geometry_columns 
 (the postgis metadata table) cause the segmentation fault. Once the 
 entry is there, it converts fine.

 Perhaps ogr2ogr could issue a warning or error message in this case 
 instead of segfaulting. It would be nicer.

 Thanks again,
 Andreas

 On Wed, 7 Sep 2011 14:52:31 +0000 (UTC), Jukka Rahkonen wrote:
> Andreas Neumann <a.neumann <at> carto.net> writes:
>
>>
>>  Hi,
>>
>>  I am converting several tables from Postgis to SpatiaLite using
>>  ogr2ogr.
>>
>>  Here is my command:
>>
>>  -----------
>>  ogr2ogr -append -lco LAUNDER=yes -lco SPATIAL_INDEX=yes -nln
>>  av_grenzpunkte -f SQLite uster.sqlite PG:"dbname='mydb' 
>> host='myserver'
>>  port='5432' user='username' password='pw' schemas=av_user
>>  tables=grenzpunkte(the_geom)"
>>  ----------
>
> Hi,
>
> I have used these options:
>
> -dsco SPATIALITE=yes
> -lco SPATIAL_INDEX=no
> and for polygon layers
> -nlt MULTIPOLYGON (Spatialite do not want polygons and multipolygons
> on the same
> layer, so let them be all multipolygons). Same with mixed 
> lines/multilines if
> you may have those.
>
> -update is needed when adding new layers. Are you adding to an 
> existing table
> because you have -append?
>
> Ogr2ogr does not create totally valid Spatialite databases. Therefore
> I skip the
> SPATIAL_INDEX because conversion is faster without. After ogr2ogr
> process I am
> cleaning the resulting database by copying the tables into a fresh 
> Spatialite
> database with OpenLite tool http://www.gaia-gis.it/OpenLite/
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From jukka.rahkonen at mmmtike.fi  Wed Sep  7 12:34:14 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Sep  7 14:28:32 2011
Subject: [gdal-dev] Codepage trouble with ogr2ogr from csv into Spatialite
Message-ID: <loom.20110907T182228-216@post.gmane.org>

I tried to convert data from text file into Spatialite through VRT file.
Everything goes otherwise OK but the non-ASCII characters in the original text
do not convert correctly. I am on Windows and the text file is using Windows
Latin 1 encoding. I haven't found a place to give codepage in any of the VTR,
CSV, or SQLite drivers. Is there any other way to get the characters right than
convert CSV first into shapefiles  and use Spatialite tools for importing them
finally into Spatialite?

From etourigny.dev at gmail.com  Wed Sep  7 12:53:00 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Sep  7 14:48:00 2011
Subject: [gdal-dev] merging of files with gdalwarp causses a slight shift
In-Reply-To: <4E66E39C.2040605@pobox.com>
References: <CA+TxYvM1rWs=yoCiOE9JDPj5W6AseSO2CJeRTop=dho3qSdTmA@mail.gmail.com>
	<4E66E39C.2040605@pobox.com>
Message-ID: <CA+TxYvPYvBm_6fthXNHy4gz+ubRAWX25GmJcJx__jra9vYH56w@mail.gmail.com>

Thanks Frank!

I just noticed that in the resulting file, the contents of the first
file are not shifted, whereas the contents of the second file only are
shifted. Not what I would like but certainly correct, considering the
input files.

regards,
Etienne
From vasile.cotovanu at webgis.ro  Wed Sep  7 12:59:37 2011
From: vasile.cotovanu at webgis.ro (vasile)
Date: Wed Sep  7 14:54:58 2011
Subject: [gdal-dev] Python bindings: How to merge two geometries
Message-ID: <1315414777914-6768614.post@n2.nabble.com>

Hello all,

I have a Shapefile layer and try to merge some features from it using OGR
Python bindings. Basically there are simple polylines that are connected
each-other, so the result should be a simple polyline as well (and not a
collection)

I am using this snippet of code(warning: that's my beginner's Python code)
to accomplish the merge but I get a 'Segmentation Fault 11' error:
http://pastie.org/2498129

Here is more from the crashlog: http://pastie.org/pastes/new

Anyone can help, put me on the right click with another example ?

Thanks,
Vasile

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Python-bindings-How-to-merge-two-geometries-tp6768614p6768614.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Sep  7 13:07:24 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep  7 15:03:15 2011
Subject: [gdal-dev] Python bindings: How to merge two geometries
In-Reply-To: <1315414777914-6768614.post@n2.nabble.com>
References: <1315414777914-6768614.post@n2.nabble.com>
Message-ID: <CA+YzLBesd67km2ZcZVo7sSm8C5hQ77WyL0_Bi-Ja8BXYpeDN_g@mail.gmail.com>

On Wed, Sep 7, 2011 at 9:59 AM, vasile <vasile.cotovanu@webgis.ro> wrote:
> Hello all,
>
> I have a Shapefile layer and try to merge some features from it using OGR
> Python bindings. Basically there are simple polylines that are connected
> each-other, so the result should be a simple polyline as well (and not a
> collection)
>
> I am using this snippet of code(warning: that's my beginner's Python code)
> to accomplish the merge but I get a 'Segmentation Fault 11' error:
> http://pastie.org/2498129
...

Vasile,

The problem, I believe, relates to object lifetimes with the Python
OGR bindings.  In particular GetGeometryRef() returns a reference
to the geometry owned by the feature which is destored when
the feature falls out of scope even if it is still referenced in Python.

The fix then is to clone it when you want it to live for a while.
Also, I believe that the Union method returns the unioned
geometry - it does not modify the geometry on which it is invoked.
Lastly, please try to avoid assuming feature id's are consecutive.
So an improved script might look a bit like:

  newGeometry = None
  for feature in Layer:
      geometry = feature.GetGeometryRef()
      if newGeometry is None:
        newGeometry = geometry.Clone()
      else:
        newGeometry = newGeometry.Union(geometry)

  print newGeometry

I am thinking we ought to include a GetGeometry() method on
ogr.Feature that returns a clone immediately, and promote it
as the primary method to use to get geometries in Python.
GetGeometryRef() could be kept around for compatability
and for optimizing performance in cases where care is taken
about lifetimes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From vasile.cotovanu at webgis.ro  Wed Sep  7 13:36:54 2011
From: vasile.cotovanu at webgis.ro (vasile)
Date: Wed Sep  7 15:34:26 2011
Subject: [gdal-dev] Re: Python bindings: How to merge two geometries
In-Reply-To: <CA+YzLBesd67km2ZcZVo7sSm8C5hQ77WyL0_Bi-Ja8BXYpeDN_g@mail.gmail.com>
References: <1315414777914-6768614.post@n2.nabble.com>
	<CA+YzLBesd67km2ZcZVo7sSm8C5hQ77WyL0_Bi-Ja8BXYpeDN_g@mail.gmail.com>
Message-ID: <1315417014279-6768777.post@n2.nabble.com>


Frank Warmerdam wrote:
> 
> The fix then is to clone it when you want it to live for a while.
> Also, I believe that the Union method returns the unioned
> geometry - it does not modify the geometry on which it is invoked.
> 
That did the trick, it works just fine, thanks !


Frank Warmerdam wrote:
> 
> Lastly, please try to avoid assuming feature id's are consecutive.
> So an improved script might look a bit like:
> 

Acknowledged, it's much nicer now.

Thanks again,
Vasile

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Python-bindings-How-to-merge-two-geometries-tp6768614p6768777.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etourigny.dev at gmail.com  Wed Sep  7 13:42:36 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Sep  7 15:40:24 2011
Subject: [gdal-dev] Motion: Commit Access for Etienne Tourigny
In-Reply-To: <201109070714.16043.even.rouault@mines-paris.org>
References: <201109022242.16846.even.rouault@mines-paris.org>
	<201109070714.16043.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvP=Q6oG22csexw1wZNAswBbcp7LnZzEVLL5xKxsJ0Y4Ow@mail.gmail.com>

I would like to thank Frank, Even and Kyle for their support as well
as other PSC members for their trust.

Also big thanks to all the developers and users which help make GDAL
the great software it is.

regards,
Etienne



On Wed, Sep 7, 2011 at 2:14 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
>
> I declare this motion passed with support from PSC members AndreyK, DanielM,
> EvenR, FrankW and TamasS and with non-PSC member Kyle Shannon.
>
> Etienne, I'll let Frank deal with the practical details to enable you as a
> committer.
>
> Welcome aboard !
>
> Best regards,
>
> Even
>
From even.rouault at mines-paris.org  Wed Sep  7 13:52:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 15:50:28 2011
Subject: [gdal-dev] GDAL together with PostgreSQL 9.0
In-Reply-To: <F9444836447D054A829AD85D954D0933030B60@corpappl747.corp.saab.se>
References: <F9444836447D054A829AD85D954D0933030B60@corpappl747.corp.saab.se>
Message-ID: <201109071952.17424.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 13:14:55, Malm Paul a ?crit :
> Hi,
> I would lige to update PostgreSQL from 8.3.7  to 9.0.
> Is GDAL, including ogr2ogr, compatible with that version (postgres driver)?
> I'm Using  Linux redhat 5. Kind regards,
> Paul

A fix has been done during GDAL 1.8.0 developement to fully support PostgreSQL 
9.0 (*). Previous versions could probably work in most cases that did not 
involved retrieving binary data (such as ST_AsBinary() requests), which was 
the only source of incompatibility due to a change of the default format in 
PostgreSQL 9.0. But upgrading to 1.8.x might be safer if not already done.

(*) The relevant changeset is 
http://trac.osgeo.org/gdal/changeset/20687/trunk/gdal/ogr/ogrsf_frmts/pg
From even.rouault at mines-paris.org  Wed Sep  7 14:02:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 16:01:36 2011
Subject: [gdal-dev] Codepage trouble with ogr2ogr from csv into Spatialite
In-Reply-To: <loom.20110907T182228-216@post.gmane.org>
References: <loom.20110907T182228-216@post.gmane.org>
Message-ID: <201109072002.49392.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 18:34:14, Jukka Rahkonen a ?crit :
> I tried to convert data from text file into Spatialite through VRT file.
> Everything goes otherwise OK but the non-ASCII characters in the original
> text do not convert correctly. I am on Windows and the text file is using
> Windows Latin 1 encoding. I haven't found a place to give codepage in any
> of the VTR, CSV, or SQLite drivers. Is there any other way to get the
> characters right than convert CSV first into shapefiles  and use
> Spatialite tools for importing them finally into Spatialite?

UTF-8 is considered as being the pivot encoding, so I don't see any choice 
than using shapefiles for doing recoding. Perhaps we could have an option in 
ogr2ogr to do user-specified recoding on the fly, for example -s_encoding -
t_encoding parameters ...

If you use GDAL trunk, you could set the SHAPE_ENCODING configuration option of 
the shapefile driver to an empty string, so as no recoding occurs. 

ogr2ogr out.shp in.vrt --config SHAPE_ENCODING ""

When reading out.shp, OGR will transcode from the default shapefile encoding, 
which it interprets as being Latin1, to the OGR pivot encoding which is UTF-8, 
which is probably what expects Spatialite.

> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Sep  7 14:10:35 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Sep  7 16:09:51 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <201109070733.59308.even.rouault@mines-paris.org>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<CALOKYXUkp1tz04p=EahPrn5CObPJU06HW5KvOjaA6jJ0f214Dg@mail.gmail.com>
	<CA+TxYvNLxWDDUCH8DQ75siho5OuT1iWWGB9cNWD7-zxFGiNVWw@mail.gmail.com>
	<201109070733.59308.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvO5soxUNJ40a-yoaQDmpevLuvPib=_S8S+33zcLsG-Mjg@mail.gmail.com>

On Wed, Sep 7, 2011 at 2:33 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>
>> In case you feel like testing it, the functions needed are
>> ?OGRSpatialReference::importFromProj4() and exportToProj4(), the later
>> which is not documented.
>>
>> Perhaps others can comment on the suitability of exporttoProj4() ???
>>
>
> It is documented but doxygen didn't like a macro that was inserted between the
> comment and the function. Should be fixed by r23070

thanks!

>
> I'd note that proj4 strings have not all the expressivity of WKT. In
> particular they cannot capture citation strings, or authority name and code.
> So the suitability of using them depends on what you want to do with them.
>

How important is this information?  Assuming we drop all the citation
strings, or authority names and codes, but retain the important
parameters of each projection (in CF and proj format), are we missing
anything important numerically?

In other words, are there any show-stopper issues that would keep us
from using proj4 instead of wkt?
From chaitanya.ch at gmail.com  Wed Sep  7 14:15:52 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep  7 16:15:31 2011
Subject: [gdal-dev] Re: Problem converting certain postgis tables to
	spatialite
In-Reply-To: <9df1e03bd27d2efacb02f4e1ba882df9@carto.net>
References: <30eaee62e97da48076ef1f9a3337e965@carto.net>
	<loom.20110907T164351-367@post.gmane.org>
	<9df1e03bd27d2efacb02f4e1ba882df9@carto.net>
Message-ID: <CAMKgpOax45YcoT3MA06Fh=AKM4wjR-xLsFeHtvC7+4qbT0-pMA@mail.gmail.com>

Andreas,

Segfaulting is a serious issue. Can you tell the version of GDAL you used?

On Wed, Sep 7, 2011 at 8:35 PM, Andreas Neumann <a.neumann@carto.net> wrote:

> HI Jukka,
>
> Thank you for your thoughts. Yes, perhaps I should use update instead of
> append.
>
> I actually found out what the problem is:
>
> Tables or views that do not have an entry in public.geometry_columns (the
> postgis metadata table) cause the segmentation fault. Once the entry is
> there, it converts fine.
>
> Perhaps ogr2ogr could issue a warning or error message in this case instead
> of segfaulting. It would be nicer.
>
> Thanks again,
> Andreas
>
>
> On Wed, 7 Sep 2011 14:52:31 +0000 (UTC), Jukka Rahkonen wrote:
>
>> Andreas Neumann <a.neumann <at> carto.net> writes:
>>
>>
>>>  Hi,
>>>
>>>  I am converting several tables from Postgis to SpatiaLite using
>>>  ogr2ogr.
>>>
>>>  Here is my command:
>>>
>>>  -----------
>>>  ogr2ogr -append -lco LAUNDER=yes -lco SPATIAL_INDEX=yes -nln
>>>  av_grenzpunkte -f SQLite uster.sqlite PG:"dbname='mydb' host='myserver'
>>>  port='5432' user='username' password='pw' schemas=av_user
>>>  tables=grenzpunkte(the_geom)"
>>>  ----------
>>>
>>
>> Hi,
>>
>> I have used these options:
>>
>> -dsco SPATIALITE=yes
>> -lco SPATIAL_INDEX=no
>> and for polygon layers
>> -nlt MULTIPOLYGON (Spatialite do not want polygons and multipolygons
>> on the same
>> layer, so let them be all multipolygons). Same with mixed lines/multilines
>> if
>> you may have those.
>>
>> -update is needed when adding new layers. Are you adding to an existing
>> table
>> because you have -append?
>>
>> Ogr2ogr does not create totally valid Spatialite databases. Therefore
>> I skip the
>> SPATIAL_INDEX because conversion is faster without. After ogr2ogr
>> process I am
>> cleaning the resulting database by copying the tables into a fresh
>> Spatialite
>> database with OpenLite tool http://www.gaia-gis.it/**OpenLite/<http://www.gaia-gis.it/OpenLite/>
>>
>> -Jukka Rahkonen-
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
> --
> --
> Andreas Neumann
> B?schacherstrasse 10A
> 8624 Gr?t (Gossau ZH)
> Switzerland
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110907/a88e740e/attachment.html
From ivan.lucena at pmldnet.com  Wed Sep  7 14:13:43 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Sep  7 16:20:15 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gTW90aW9uOiBDb21taXQgQWNjZXNzIGZvciBFdGllbm5lIFRvdXJpZ255?=
In-Reply-To: <CA+TxYvP=Q6oG22csexw1wZNAswBbcp7LnZzEVLL5xKxsJ0Y4Ow@mail.gmail.com>
References: <201109022242.16846.even.rouault@mines-paris.org>
	<201109070714.16043.even.rouault@mines-paris.org>
	<CA+TxYvP=Q6oG22csexw1wZNAswBbcp7LnZzEVLL5xKxsJ0Y4Ow@mail.gmail.com>
Message-ID: <20110907181343.29997.qmail@s466.sureserver.com>

Welcome aboard Etienne!

"De um ex-aluno do INPE" (From an INPE's alumnus) and fellow commiter.


>  -------Original Message-------
>  From: Etienne Tourigny <etourigny.dev@gmail.com>
>  To:
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Motion: Commit Access for Etienne Tourigny
>  Sent: Sep 07 '11 12:42
>  
>  I would like to thank Frank, Even and Kyle for their support as well
>  as other PSC members for their trust.
>  
>  Also big thanks to all the developers and users which help make GDAL
>  the great software it is.
>  
>  regards,
>  Etienne
>  
>  
>  
>  On Wed, Sep 7, 2011 at 2:14 AM, Even Rouault
>  <even.rouault@mines-paris.org> wrote:
>  >> Motion: Extend GDAL/OGR Commit Access to Etienne Tourigny
>  >
>  > I declare this motion passed with support from PSC members AndreyK, DanielM,
>  > EvenR, FrankW and TamasS and with non-PSC member Kyle Shannon.
>  >
>  > Etienne, I'll let Frank deal with the practical details to enable you as a
>  > committer.
>  >
>  > Welcome aboard !
>  >
>  > Best regards,
>  >
>  > Even
>  >
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From even.rouault at mines-paris.org  Wed Sep  7 14:24:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 16:24:13 2011
Subject: [gdal-dev] Re: Problem converting certain postgis tables to
	spatialite
In-Reply-To: <9df1e03bd27d2efacb02f4e1ba882df9@carto.net>
References: <30eaee62e97da48076ef1f9a3337e965@carto.net>
	<loom.20110907T164351-367@post.gmane.org>
	<9df1e03bd27d2efacb02f4e1ba882df9@carto.net>
Message-ID: <201109072024.15058.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 17:05:50, Andreas Neumann a ?crit :
>  HI Jukka,
> 
>  Thank you for your thoughts. Yes, perhaps I should use update instead
>  of append.
> 
>  I actually found out what the problem is:
> 
>  Tables or views that do not have an entry in public.geometry_columns
>  (the postgis metadata table) cause the segmentation fault. Once the
>  entry is there, it converts fine.
> 
>  Perhaps ogr2ogr could issue a warning or error message in this case
>  instead of segfaulting. It would be nicer.

sounds like you hit http://trac.osgeo.org/gdal/ticket/3502 .

I've never applied the patch because it is not really correct, and upgrading 
to spatialite 2.4 should avoid the crash (the crash occured in spatialite 
2.3.1 code).

There are also other issues in the way we create spatialite databases that 
might lead to inconsistencies. Hopefully Sandro has indicated that it should 
be able to help us soon to improve that : 
http://groups.google.com/group/spatialite-
users/browse_thread/thread/ef72de558e3c2553#
From even.rouault at mines-paris.org  Wed Sep  7 14:43:21 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 16:44:26 2011
Subject: [gdal-dev] Re: Python bindings: How to merge two geometries
In-Reply-To: <1315417014279-6768777.post@n2.nabble.com>
References: <1315414777914-6768614.post@n2.nabble.com>
	<CA+YzLBesd67km2ZcZVo7sSm8C5hQ77WyL0_Bi-Ja8BXYpeDN_g@mail.gmail.com>
	<1315417014279-6768777.post@n2.nabble.com>
Message-ID: <201109072043.21639.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 19:36:54, vasile a ?crit :
> Frank Warmerdam wrote:
> > The fix then is to clone it when you want it to live for a while.
> > Also, I believe that the Union method returns the unioned
> > geometry - it does not modify the geometry on which it is invoked.
> 
> That did the trick, it works just fine, thanks !
> 
> Frank Warmerdam wrote:
> > Lastly, please try to avoid assuming feature id's are consecutive.
> 
> > So an improved script might look a bit like:
> Acknowledged, it's much nicer now.

You will find other tips&tricks related to life-time management in
http://trac.osgeo.org/gdal/wiki/PythonGotchas

You're welcome to expand it with your use case.

> 
> Thanks again,
> Vasile
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Python-bindings-How-to-merge-two-ge
> ometries-tp6768614p6768777.html Sent from the GDAL - Dev mailing list
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Sep  7 15:54:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 18:00:05 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CA+TxYvO5soxUNJ40a-yoaQDmpevLuvPib=_S8S+33zcLsG-Mjg@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<201109070733.59308.even.rouault@mines-paris.org>
	<CA+TxYvO5soxUNJ40a-yoaQDmpevLuvPib=_S8S+33zcLsG-Mjg@mail.gmail.com>
Message-ID: <201109072154.59400.even.rouault@mines-paris.org>

> How important is this information?  Assuming we drop all the citation
> strings, or authority names and codes, but retain the important
> parameters of each projection (in CF and proj format), are we missing
> anything important numerically?
> 
> In other words, are there any show-stopper issues that would keep us
> from using proj4 instead of wkt?

Generally not. You indeed mentionned a significant word, "numerically", which 
indicates that you are interested more in the information for reprojection 
purposes, than strict (not to say pedantic ;-)) identification of the SRS. If 
the software that process the dataset all use proj4 and the proj4 string is an 
adequate representation of the SRS, then it is a perfect fit.

There are situations where 2 distincts SRS from the EPSG database will 
translate into identical proj4 string. For example, just looking at the very 
beginning of the epsg file provided with proj4, I can see :

# TWD97
<3824> +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs  <>

# IGRS
<3889> +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs  <>

The corresponding WKT (given by using gdal utility 'testepsg EPSG:XXXX') are :

GEOGCS["TWD97",
    DATUM["Taiwan_Datum_1997",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1026"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3824"]]

GEOGCS["IGRS",
    DATUM["Iraqi_Geospatial_Reference_System",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1029"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3889"]]

Are the Taiwan_Datum_1997 and Iraqi_Geospatial_Reference_System really the 
same, or is it because we haven't captured the difference, or it is too subtle 
to be modelled with proj4, or it would require some grids that are not 
available, etc... I have no idea.

Also you should be aware that some SRS have no translation into proj4 strings 
due to unsupported projection methods for example.

Using proj4 strings is not a total heresy however. Postgis is a famous and 
widespread example of the use of proj4 strings. Although in the Postgis case, 
the spatial_ref_sys table includes authority names and code columns, and the 
SRID is used as a key in the geometry_columns table. So you can fix proj4 
strings in a centralized way if needed.

Another point to have in mind is that the proj4 strings (at least the ones 
provided in the epsg file that comes with proj4) are generally derived from the 
EPSG database, and there can be imperfections in the way they are translated, 
or later improvements. A recent proj4 change has added for example TOWGS84 
statements in a lot of cases where they were missing before.

You can look at the following page which gives details on how GDAL, proj4, 
libtiff and postgis SRS databases are built from the EPSG database :

http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

Some could also say that proj4 strings are not a very formal definition, and 
that WKT has a better potential to act as a standard. However, reading 
http://home.gdal.org/projects/opengis/wktproblems.html might be enlightning. 
(Note : apparently the page has been written quite some time ago, and some 
statements do no longer apply, for example the one about PostGIS. PostGIS has 
used proj4 strings and not WKT for a long time. But most of the rest still 
apply however.)

Not sure to really have helped you. There are issues with either using WKT or 
proj4 strings.


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dshean at uw.edu  Wed Sep  7 16:22:06 2011
From: dshean at uw.edu (David Shean)
Date: Wed Sep  7 18:39:33 2011
Subject: [gdal-dev] Percent stretch 16 to 8-bit geotiff conversion
Message-ID: <23C68DC1-2678-4A5F-A591-FB7388098A99@uw.edu>

Forgive me if this is not the proper forum (no gdal-users list?) or if this question has been answered in the past - I've been using GDAL for a while now, but just joined the mailing list and I'm relatively new to python.

I have large (>2GB uncompressed) UInt16 geotiffs that I need to convert to 8-bit geotiffs.  I'd like to use a percent range (e.g. 0.5-99.5%) to determine the new min/max for the linear stretch in gdal_translate.  I haven't found any simple way of doing this with the existing GDAL utilities, although it looks like gdalenhance was at least initially designed to do something along these lines. 

If there is no simple way to do this with existing tools, is there any sample code floating around that might help?  If not, I know it will be possible with the histogram/stats functions in gdal, numpy, or PIL - I just want to make sure that I'm not reinventing a slower, clunkier wheel.

Thanks.
-David

---
David Shean
Polar Science Center
Applied Physics Lab
University of Washington


From etourigny.dev at gmail.com  Wed Sep  7 16:49:58 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Sep  7 18:58:12 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <201109072154.59400.even.rouault@mines-paris.org>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<201109070733.59308.even.rouault@mines-paris.org>
	<CA+TxYvO5soxUNJ40a-yoaQDmpevLuvPib=_S8S+33zcLsG-Mjg@mail.gmail.com>
	<201109072154.59400.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvNLSiHx3aVkUHdEM_xuimDMYgFk669+J92foDVFMPrvWg@mail.gmail.com>

Thanks for the info Even

I can see that there is not yet "One standard to rule them all"...
Correct me if I am wrong: is WKT the preferred way GDAL stores the
information?

There was a proposal some time ago in the CF trac to add descriptive
variables such as crs_id (EPSG code),  crs_name and crs_wkt.
https://cf-pcmdi.llnl.gov/trac/ticket/18 (pointed out by Patrick)
https://cf-pcmdi.llnl.gov/trac/ticket/9
https://cf-pcmdi.llnl.gov/trac/ticket/27

However, these were dropped because of disagreement between the
participants and the simpler and current approach was adopted (specify
the numeric values of the projection and datum).
Unfortunately, the issue has not been discussed since.


I think our solution should address the following

1) Storing projection and datum in the netcdf file with 100% CF compliance.
2) Storing complete information so that it can be retrieved later by
GDAL, This is already done by writing and reading the WKT.
3) Making sure that the CF and WKT are not contradictory, in the case
that the projection was modified by another program, but left the WKT
intact.
4) Reading CF-compliant projection information and translating that
into WKT (this could eliminate the need for 2 and 3)

Perhaps 4 can be achieved with another tool external to GDAL (as
suggested in the CF discussions).


Is there anyone who would be inclined to engage in a discussion within
the CF community so that any or all of proj4, epsg and wkt be included
as a CF standard?

Regards, Etienne

On Wed, Sep 7, 2011 at 4:54 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> How important is this information? ?Assuming we drop all the citation
>> strings, or authority names and codes, but retain the important
>> parameters of each projection (in CF and proj format), are we missing
>> anything important numerically?
>>
>> In other words, are there any show-stopper issues that would keep us
>> from using proj4 instead of wkt?
>
> Generally not. You indeed mentionned a significant word, "numerically", which
> indicates that you are interested more in the information for reprojection
> purposes, than strict (not to say pedantic ;-)) identification of the SRS. If
> the software that process the dataset all use proj4 and the proj4 string is an
> adequate representation of the SRS, then it is a perfect fit.
>
> There are situations where 2 distincts SRS from the EPSG database will
> translate into identical proj4 string. For example, just looking at the very
> beginning of the epsg file provided with proj4, I can see :
>
> # TWD97
> <3824> +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ?<>
>
> # IGRS
> <3889> +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ?<>
>
> The corresponding WKT (given by using gdal utility 'testepsg EPSG:XXXX') are :
>
> GEOGCS["TWD97",
> ? ?DATUM["Taiwan_Datum_1997",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1026"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","3824"]]
>
> GEOGCS["IGRS",
> ? ?DATUM["Iraqi_Geospatial_Reference_System",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1029"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","3889"]]
>
> Are the Taiwan_Datum_1997 and Iraqi_Geospatial_Reference_System really the
> same, or is it because we haven't captured the difference, or it is too subtle
> to be modelled with proj4, or it would require some grids that are not
> available, etc... I have no idea.
>
> Also you should be aware that some SRS have no translation into proj4 strings
> due to unsupported projection methods for example.
>
> Using proj4 strings is not a total heresy however. Postgis is a famous and
> widespread example of the use of proj4 strings. Although in the Postgis case,
> the spatial_ref_sys table includes authority names and code columns, and the
> SRID is used as a key in the geometry_columns table. So you can fix proj4
> strings in a centralized way if needed.
>
> Another point to have in mind is that the proj4 strings (at least the ones
> provided in the epsg file that comes with proj4) are generally derived from the
> EPSG database, and there can be imperfections in the way they are translated,
> or later improvements. A recent proj4 change has added for example TOWGS84
> statements in a lot of cases where they were missing before.
>
> You can look at the following page which gives details on how GDAL, proj4,
> libtiff and postgis SRS databases are built from the EPSG database :
>
> http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>
> Some could also say that proj4 strings are not a very formal definition, and
> that WKT has a better potential to act as a standard. However, reading
> http://home.gdal.org/projects/opengis/wktproblems.html might be enlightning.
> (Note : apparently the page has been written quite some time ago, and some
> statements do no longer apply, for example the one about PostGIS. PostGIS has
> used proj4 strings and not WKT for a long time. But most of the rest still
> apply however.)
>
> Not sure to really have helped you. There are issues with either using WKT or
> proj4 strings.
>
>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Wed Sep  7 17:08:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 19:17:22 2011
Subject: [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <CA+TxYvNLSiHx3aVkUHdEM_xuimDMYgFk669+J92foDVFMPrvWg@mail.gmail.com>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<201109072154.59400.even.rouault@mines-paris.org>
	<CA+TxYvNLSiHx3aVkUHdEM_xuimDMYgFk669+J92foDVFMPrvWg@mail.gmail.com>
Message-ID: <201109072308.11708.even.rouault@mines-paris.org>

Le mercredi 07 septembre 2011 22:49:58, Etienne Tourigny a ?crit :
> Thanks for the info Even
> 
> I can see that there is not yet "One standard to rule them all"...
> Correct me if I am wrong: is WKT the preferred way GDAL stores the
> information?

I'd say that WKT serves as a pivot representation of SRS within GDAL/OGR. An 
OGRSpatialReference object can be bijectively represented as a WKT string 
(because the OGRSpatialReference object is really a tree representation build 
from the parsing of the WKT string).

But behind that apparent simplicity, there are often a lot of transformations 
implied because few formats natively "speak" WKT. You have the Geotiff way, the 
MapInfo way, the PCIDSK way, the USGS way (used HDF4, NDF and FAST drivers for 
example), the ERMapper way, etc etc. You have also the ESRI WKT that must be 
morphed from/to GDAL WKT... And the netCDF CF way ;-)
From bfraser at geoanalytic.com  Wed Sep  7 17:36:24 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Sep  7 19:47:18 2011
Subject: [gdal-dev] Percent stretch 16 to 8-bit geotiff conversion
In-Reply-To: <23C68DC1-2678-4A5F-A591-FB7388098A99@uw.edu>
References: <23C68DC1-2678-4A5F-A591-FB7388098A99@uw.edu>
Message-ID: <4E67E3D8.4070506@geoanalytic.com>

Have a look at

http://www.gina.alaska.edu/projects/gina-tools/

Best Regards,
Brent Fraser


On 9/7/2011 2:22 PM, David Shean wrote:
> Forgive me if this is not the proper forum (no gdal-users list?) or if this question has been answered in the past - I've been using GDAL for a while now, but just joined the mailing list and I'm relatively new to python.
>
> I have large (>2GB uncompressed) UInt16 geotiffs that I need to convert to 8-bit geotiffs.  I'd like to use a percent range (e.g. 0.5-99.5%) to determine the new min/max for the linear stretch in gdal_translate.  I haven't found any simple way of doing this with the existing GDAL utilities, although it looks like gdalenhance was at least initially designed to do something along these lines.
>
> If there is no simple way to do this with existing tools, is there any sample code floating around that might help?  If not, I know it will be possible with the histogram/stats functions in gdal, numpy, or PIL - I just want to make sure that I'm not reinventing a slower, clunkier wheel.
>
> Thanks.
> -David
>
> ---
> David Shean
> Polar Science Center
> Applied Physics Lab
> University of Washington
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Wed Sep  7 18:06:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  7 20:18:20 2011
Subject: [gdal-dev] New way of reporting of errors related to GDAL datasets
	and bands.
Message-ID: <201109080006.04187.even.rouault@mines-paris.org>

Hi,

This will interest mostly GDAL driver authors.

I've just added ( http://trac.osgeo.org/gdal/changeset/23077 ) 2 new methods, 
GDALRasterBand::ReportError() and GDALDataset::ReportError(), that prepend the 
dataset name (and band) before the actual error message.

The use case that lead to their introduction is when processing a larger 
number of datasets and an error suddenly occurs in the middle of the 
processing, without any convenient way of identifying which dataset triggered 
the error. See http://trac.osgeo.org/gdal/ticket/4242 .

Those ReportError() methods have the same arguments as CPLError(), so it is 
easy to switch on them. The main advantage is that it is a way of providing 
consistant formatting to report dataset/rasterband related errors, while 
reducing the footprint at each place where we emit the errors. 

For now, only gdaldataset.cpp and gdalrasterband.cpp have been converted to 
use them.

Best regards,

Even
From sebastian.schutte at icr.gess.ethz.ch  Thu Sep  8 08:18:56 2011
From: sebastian.schutte at icr.gess.ethz.ch (Sebastian Schutte)
Date: Thu Sep  8 11:17:46 2011
Subject: [gdal-dev] raster2pgsql: AddRasterColumn / No function matches the
 given name and argument types
Message-ID: <4E68B2B0.6060905@icr.gess.ethz.ch>

Dear gdal-dev list,

I followed Jorge Arevalo's tutorial at
http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html in order to test
the postgis 2.0 raster support on our RHEL Linux machine. The entire
postgresql, postgis 2.0, gdal, proj, and geos collection is compiled
from source. I have raster support working in the DB and I can see the
addrastercolumn function in pgadmin, but I still get errors following
the tutorial:

LINE 1: SELECT AddRasterColumn('public','katrina','rast',4326, ARRAY...
^
HINT: No function matches the given name and argument types. You might
need to add explicit type casts.
psql:./katrina.sql:4: ERROR: current transaction is aborted, commands
ignored until end of transaction block
...

The Postgis Installation seems to be working:
SELECT postgis_full_version();
                                          postgis_full_version
       ---------------------------------------------------------------------
 POSTGIS="2.0.0SVN" GEOS="3.3.0-CAPI-1.7.0" PROJ="Rel. 4.7.1, 23
September 2009" LIBXML="2.7.6" USE_STATS
(1 row)

I also compiled GDAL with python bindings and Postgis with raster support...
Does anyone have a solution for this problem? What am I missing?

Thanks so much for your help!

Best wishes,
Sebastian
From j.l.h.hartmann at uva.nl  Thu Sep  8 08:23:51 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Sep  8 11:23:25 2011
Subject: [gdal-dev] Numerical instability with thin plate spline transform
In-Reply-To: <4E64E0CC.1070000@uva.nl>
References: <4E64E0CC.1070000@uva.nl>
Message-ID: <4E68B3D7.9090906@uva.nl>

Not sure whether this can be considered a bug, so I give it for what it 
is worth.

I'm doing thin plate spline transformation from one set of projected 
coordinates to another. Both sets have values between -600000 and 600000 
(meters). A typical set of gcps looks like:

  -gcp 62402 -74383 181915 315371 \
  -gcp -100169 -24213 19685 366661 \
  -gcp 118323 233822 239994 623190 \
...

When transforming the the first two columns of this list with 
gdaltransform -tps, using the same gcp-list, the results should be 
exactly equal to the last two columns:

  (from gdal_tps.cpp:)
* The thin plate spline transformer produces exact transformation
  * at all control points and smoothly varying transformations between
  * control points with greatest influence from local control points.
  * It is suitable for for many applications not well modelled by polynomial
  * transformations.
  *


However, they aren't. With a few control points the differences are only 
in millimeters, but with a few hundred gcps the differences become 
meters, and above thousand points the error can get to fifty meters. The 
problem gets worse when some control points are very near to other ones. 
I was happy to discover that dividing all numbers by 1000 solves the 
problem, but there certainly is a numerical instability in the algorithm.

Of course, thin plate spline transformations normally use scan 
coordinates as input, and these are almost always small numbers. Even 
so, I can imagine problems with very large rasters and the rubber 
sheeting applications I am working with.

Jan


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110908/dd55132c/attachment.html
From jorge.arevalo at deimos-space.com  Thu Sep  8 09:04:35 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu Sep  8 12:06:19 2011
Subject: [gdal-dev] raster2pgsql: AddRasterColumn / No function matches
	the given name and argument types
In-Reply-To: <4E68B2B0.6060905@icr.gess.ethz.ch>
References: <4E68B2B0.6060905@icr.gess.ethz.ch>
Message-ID: <CAK29iX9FbnJEdXL4C1nxVERZMCyzE_m-zN2s2tmCKsn4JEOMAg@mail.gmail.com>

On Thu, Sep 8, 2011 at 2:18 PM, Sebastian Schutte
<sebastian.schutte@icr.gess.ethz.ch> wrote:
> Dear gdal-dev list,
>
> I followed Jorge Arevalo's tutorial at
> http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html in order to test
> the postgis 2.0 raster support on our RHEL Linux machine. The entire
> postgresql, postgis 2.0, gdal, proj, and geos collection is compiled
> from source. I have raster support working in the DB and I can see the
> addrastercolumn function in pgadmin, but I still get errors following
> the tutorial:
>
> LINE 1: SELECT AddRasterColumn('public','katrina','rast',4326, ARRAY...
> ^
> HINT: No function matches the given name and argument types. You might
> need to add explicit type casts.
> psql:./katrina.sql:4: ERROR: current transaction is aborted, commands
> ignored until end of transaction block
> ...
>
> The Postgis Installation seems to be working:
> SELECT postgis_full_version();
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?postgis_full_version
> ? ? ? ---------------------------------------------------------------------
> ?POSTGIS="2.0.0SVN" GEOS="3.3.0-CAPI-1.7.0" PROJ="Rel. 4.7.1, 23
> September 2009" LIBXML="2.7.6" USE_STATS
> (1 row)
>
> I also compiled GDAL with python bindings and Postgis with raster support...
> Does anyone have a solution for this problem? What am I missing?
>
> Thanks so much for your help!
>
> Best wishes,
> Sebastian
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Sebastian,

Seems that the PostGIS Raster support isn't correctly installed. How
did you enable your database with PostGIS and PostGIS Raster? which
version of GDAL and PostGIS are you using?

Please, do these tests:

- Check if your database has "raster_columns" and "raster_overviews" tables
- Execute this query, and get the result: "select
postgis_raster_lib_version(), postgis_raster_lib_build_date()"

Anyway, I think the best way to answer these questions is the
postgis-users list (I put it in copy), not the gdal-dev list.

Best regards,

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From p.baumann at jacobs-university.de  Thu Sep  8 09:36:57 2011
From: p.baumann at jacobs-university.de (Baumann, Peter)
Date: Thu Sep  8 12:40:18 2011
Subject: [WCS.swg] [gdal-dev] NetCDF and datum handling suggestion
In-Reply-To: <4E68C135.5070808@noaa.gov>
References: <CALOKYXUXp_SG=JtxDCdzAG1sxd1FvAZ74XgO-UGi8XRU9i2Lzw@mail.gmail.com>
	<201109070733.59308.even.rouault@mines-paris.org>
	<CA+TxYvO5soxUNJ40a-yoaQDmpevLuvPib=_S8S+33zcLsG-Mjg@mail.gmail.com>
	<201109072154.59400.even.rouault@mines-paris.org>
	<CA+TxYvNLSiHx3aVkUHdEM_xuimDMYgFk669+J92foDVFMPrvWg@mail.gmail.com>
	<4E685E12.1030602@jacobs-university.de>,<4E68C135.5070808@noaa.gov>
Message-ID: <ABC99FE09544C04ABD549BE2D57400101E4E0EDB@SXCHMB01.jacobs.jacobs-university.de>

Matt,

interesting discussions going on indeed. My perspective, having to model CRS request parameters for transformation etc and to establish a CRS URL resolver, is to understand a sufficiently general slate of concepts. Some of the issues of representation do not directly apply for my task (my - possibly wrong - understanding is that it also addresses redundant short-hand information), however this still is interesting for me in the sense that I can get the gist of CRS handling in the communities' practice.

-Peter

________________________________________
From: wcs.swg-bounces+p.baumann=jacobs-university.de@lists.opengeospatial.org [wcs.swg-bounces+p.baumann=jacobs-university.de@lists.opengeospatial.org] on behalf of Matthew Austin [Matthew.Austin@noaa.gov]
Sent: Thursday, September 08, 2011 3:20 PM
To: wcs.swg@lists.opengeospatial.org; cf-metadata@cgd.ucar.edu; gdal-dev@lists.osgeo.org
Subject: Re: [WCS.swg] [gdal-dev] NetCDF and datum handling suggestion

Peter,

There has been much discussion about projections in the CF-Community
recently.  I'm following up with Etienne's recommendation to engage the
CF-Community in this discussion of how to handle projection information
in CF.

Matt

On 9/8/2011 2:17 AM, Peter Baumann wrote:
> Hi WCSers,
>
> this is to inform you about some interesting discussion going on in
> the GDAL community. It directly relates to our current work on
> redesigning OGC's CRS handling for coverages (and beyond).
>
> cheers,
> Peter
>
>
> On 09/07/2011 10:49 PM, Etienne Tourigny wrote:
>> Thanks for the info Even
>>
>> I can see that there is not yet "One standard to rule them all"...
>> Correct me if I am wrong: is WKT the preferred way GDAL stores the
>> information?
>>
>> There was a proposal some time ago in the CF trac to add descriptive
>> variables such as crs_id (EPSG code),  crs_name and crs_wkt.
>> https://cf-pcmdi.llnl.gov/trac/ticket/18 (pointed out by Patrick)
>> https://cf-pcmdi.llnl.gov/trac/ticket/9
>> https://cf-pcmdi.llnl.gov/trac/ticket/27
>>
>> However, these were dropped because of disagreement between the
>> participants and the simpler and current approach was adopted (specify
>> the numeric values of the projection and datum).
>> Unfortunately, the issue has not been discussed since.
>>
>>
>> I think our solution should address the following
>>
>> 1) Storing projection and datum in the netcdf file with 100% CF
>> compliance.
>> 2) Storing complete information so that it can be retrieved later by
>> GDAL, This is already done by writing and reading the WKT.
>> 3) Making sure that the CF and WKT are not contradictory, in the case
>> that the projection was modified by another program, but left the WKT
>> intact.
>> 4) Reading CF-compliant projection information and translating that
>> into WKT (this could eliminate the need for 2 and 3)
>>
>> Perhaps 4 can be achieved with another tool external to GDAL (as
>> suggested in the CF discussions).
>>
>>
>> Is there anyone who would be inclined to engage in a discussion within
>> the CF community so that any or all of proj4, epsg and wkt be included
>> as a CF standard?
>>
>> Regards, Etienne
>>
>> On Wed, Sep 7, 2011 at 4:54 PM, Even Rouault
>> <even.rouault@mines-paris.org>  wrote:
>>>> How important is this information?  Assuming we drop all the citation
>>>> strings, or authority names and codes, but retain the important
>>>> parameters of each projection (in CF and proj format), are we missing
>>>> anything important numerically?
>>>>
>>>> In other words, are there any show-stopper issues that would keep us
>>>> from using proj4 instead of wkt?
>>> Generally not. You indeed mentionned a significant word,
>>> "numerically", which
>>> indicates that you are interested more in the information for
>>> reprojection
>>> purposes, than strict (not to say pedantic ;-)) identification of
>>> the SRS. If
>>> the software that process the dataset all use proj4 and the proj4
>>> string is an
>>> adequate representation of the SRS, then it is a perfect fit.
>>>
>>> There are situations where 2 distincts SRS from the EPSG database will
>>> translate into identical proj4 string. For example, just looking at
>>> the very
>>> beginning of the epsg file provided with proj4, I can see :
>>>
>>> # TWD97
>>> <3824>  +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs<>
>>>
>>> # IGRS
>>> <3889>  +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs<>
>>>
>>> The corresponding WKT (given by using gdal utility 'testepsg
>>> EPSG:XXXX') are :
>>>
>>> GEOGCS["TWD97",
>>>     DATUM["Taiwan_Datum_1997",
>>>         SPHEROID["GRS 1980",6378137,298.257222101,
>>>             AUTHORITY["EPSG","7019"]],
>>>         TOWGS84[0,0,0,0,0,0,0],
>>>         AUTHORITY["EPSG","1026"]],
>>>     PRIMEM["Greenwich",0,
>>>         AUTHORITY["EPSG","8901"]],
>>>     UNIT["degree",0.0174532925199433,
>>>         AUTHORITY["EPSG","9122"]],
>>>     AUTHORITY["EPSG","3824"]]
>>>
>>> GEOGCS["IGRS",
>>>     DATUM["Iraqi_Geospatial_Reference_System",
>>>         SPHEROID["GRS 1980",6378137,298.257222101,
>>>             AUTHORITY["EPSG","7019"]],
>>>         TOWGS84[0,0,0,0,0,0,0],
>>>         AUTHORITY["EPSG","1029"]],
>>>     PRIMEM["Greenwich",0,
>>>         AUTHORITY["EPSG","8901"]],
>>>     UNIT["degree",0.0174532925199433,
>>>         AUTHORITY["EPSG","9122"]],
>>>     AUTHORITY["EPSG","3889"]]
>>>
>>> Are the Taiwan_Datum_1997 and Iraqi_Geospatial_Reference_System
>>> really the
>>> same, or is it because we haven't captured the difference, or it is
>>> too subtle
>>> to be modelled with proj4, or it would require some grids that are not
>>> available, etc... I have no idea.
>>>
>>> Also you should be aware that some SRS have no translation into
>>> proj4 strings
>>> due to unsupported projection methods for example.
>>>
>>> Using proj4 strings is not a total heresy however. Postgis is a
>>> famous and
>>> widespread example of the use of proj4 strings. Although in the
>>> Postgis case,
>>> the spatial_ref_sys table includes authority names and code columns,
>>> and the
>>> SRID is used as a key in the geometry_columns table. So you can fix
>>> proj4
>>> strings in a centralized way if needed.
>>>
>>> Another point to have in mind is that the proj4 strings (at least
>>> the ones
>>> provided in the epsg file that comes with proj4) are generally
>>> derived from the
>>> EPSG database, and there can be imperfections in the way they are
>>> translated,
>>> or later improvements. A recent proj4 change has added for example
>>> TOWGS84
>>> statements in a lot of cases where they were missing before.
>>>
>>> You can look at the following page which gives details on how GDAL,
>>> proj4,
>>> libtiff and postgis SRS databases are built from the EPSG database :
>>>
>>> http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>>>
>>> Some could also say that proj4 strings are not a very formal
>>> definition, and
>>> that WKT has a better potential to act as a standard. However, reading
>>> http://home.gdal.org/projects/opengis/wktproblems.html might be
>>> enlightning.
>>> (Note : apparently the page has been written quite some time ago,
>>> and some
>>> statements do no longer apply, for example the one about PostGIS.
>>> PostGIS has
>>> used proj4 strings and not WKT for a long time. But most of the rest
>>> still
>>> apply however.)
>>>
>>> Not sure to really have helped you. There are issues with either
>>> using WKT or
>>> proj4 strings.
>>>
>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
_______________________________________________
WCS.swg mailing list
WCS.swg@lists.opengeospatial.org
https://lists.opengeospatial.org/mailman/listinfo/wcs.swg
From jimp at ittvis.com  Thu Sep  8 10:48:22 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Thu Sep  8 13:56:43 2011
Subject: [gdal-dev] Redirect CPLDebug output?
Message-ID: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com>

Is there any model for redirecting CPLDebug output from stdout to an
alternative path?

 

Since I have no command line or stdout in my Android activity where I
call GDAL as a library, "|" and ">" are not available.  

 

I'd like the option to send the output of CPLDebug to Android's LogCat
or even to an output file, if required.

 

I confess to being a C++ lightweight, in addition to having a lack of
expertise in GDAL, so port/cpl_port.h's syntax for CPL_PRINT_FUNC_FORMAT
at the root of the definition of CPLDebug has me flummoxed:

 

#define CPL_PRINT_FUNC_FORMAT( format_idx, arg_idx )
__attribute__((__format__ (__printf__, format_idx, arg_idx)))

 

The __android_log_print() function for sending output to the LogCat
stream is similar to printf(), but with two extra initial arguments that
I could in theory hardwire for my own purposes in an ifdef so existing
calls to CPL_DEBUG throughout GDAL would not need to be modified.

 

Conceptually, but not syntactically, in cpl_port.h I would like an
overriding definition something like this:

 

#if defined(__GNUC__) && __GNUC__ >= 3 && !defined(DOXYGEN_SKIP)

#ifdef ANDROID

#include <android/log.h>

#define CPL_PRINT_FUNC_FORMAT( format_idx, arg_idx )
__attribute__((__format__ (__android_log_print, ANDROID_LOG_DEBUG,
"GDAL", format_idx, arg_idx)))

#else

#define CPL_PRINT_FUNC_FORMAT( format_idx, arg_idx )
__attribute__((__format__ (__printf__, format_idx, arg_idx)))

...

 

As always, thanks for any assistance.

Jim P.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110908/d5369db1/attachment.html
From warmerdam at pobox.com  Thu Sep  8 11:09:12 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  8 14:17:35 2011
Subject: [gdal-dev] Redirect CPLDebug output?
In-Reply-To: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com>
References: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com>
Message-ID: <4E68DA98.408@pobox.com>

On 11-09-08 07:48 AM, Jim Pendleton wrote:
> Is there any model for redirecting CPLDebug output from stdout to an
> alternative path?
>
> Since I have no command line or stdout in my Android activity where I call GDAL
> as a library, ?|? and ?>? are not available.
>
> I?d like the option to send the output of CPLDebug to Android?s LogCat or even
> to an output file, if required.
>
> I confess to being a C++ lightweight, in addition to having a lack of expertise
> in GDAL, so port/cpl_port.h?s syntax for CPL_PRINT_FUNC_FORMAT at the root of
> the definition of CPLDebug has me flummoxed:
>
> #define CPL_PRINT_FUNC_FORMAT( format_idx, arg_idx ) __attribute__((__format__
> (__printf__, format_idx, arg_idx)))
>
> The __android_log_print() function for sending output to the LogCat stream is
> similar to printf(), but with two extra initial arguments that I could in
> theory hardwire for my own purposes in an ifdef so existing calls to CPL_DEBUG
> throughout GDAL would not need to be modified.
>
> Conceptually, but not syntactically, in cpl_port.h I would like an overriding
> definition something like this:

Jim,

There is no need to overwrite the high level CPLError and CPLDebug functions.
Instead install a handler for the messages with CPLSetErrorHandler().  If
you look in gdal/port/cpl_error.cpp you can see two error handlers - the
CPLDefaultErrorHandler() and the CPLLoggingErrorHandler() as examples.  The
error handler declaration should look like:

void CPL_STDCALL CPLAndroidErrorHandler( CPLErr eErrClass, int nError,
                                          const char * pszErrorMsg )

{
	
}

Note that the error message comes in preformatted for you with the exception
that it is up to you to report the error type (one of which is CE_Debug) and
the error number if you want.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jimp at ittvis.com  Thu Sep  8 14:37:31 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Thu Sep  8 18:00:00 2011
Subject: [gdal-dev] Redirect CPLDebug output?
In-Reply-To: <4E68DA98.408@pobox.com>
References: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com>
	<4E68DA98.408@pobox.com>
Message-ID: <0A35EA74E38BA04787179D409AF0CB3F212617@coexch01.rsinc.com>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> On 11-09-08 07:48 AM, Jim Pendleton wrote:
> > Is there any model for redirecting CPLDebug output from stdout to an
> > alternative path?
> 
> There is no need to overwrite the high level CPLError and CPLDebug
functions.
> Instead install a handler for the messages with CPLSetErrorHandler().

That was the information I needed.

For the sake of expediency, I've ifdef'ed __android_log_print() calls
adjacent to the printf() statements in the existing
CPLDefaultErrorHandler rather than duplicating the code and adding
another source file to the build.

If I eventually proceed the approved GDAL development way is there a
standard place to call CPLSetErrorHandler() when loading GDAL as a
library?  Since I'm running in Java, I wouldn't necessarily have a
pointer to my C++ function at runtime without some extra hackery (and
there's no SWIG binding presently for that routine, regardless.)

I would like to perturb as little of the original GDAL source as
possible.

If only there existed a gdal.SetConfigOption interface for
CPLSetErrorHandler() that would allow me to pass an entry point name
instead of a function pointer...

Thanks for your help,
Jim P.
From warmerdam at pobox.com  Thu Sep  8 16:07:47 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  8 19:32:14 2011
Subject: [gdal-dev] Redirect CPLDebug output?
In-Reply-To: <0A35EA74E38BA04787179D409AF0CB3F212617@coexch01.rsinc.com>
References: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com>
	<4E68DA98.408@pobox.com>
	<0A35EA74E38BA04787179D409AF0CB3F212617@coexch01.rsinc.com>
Message-ID: <CA+YzLBeB_jUwwRQUq0GPLNmFGxvw6xDGooEW16OrteSo5x-=Fg@mail.gmail.com>

On Thu, Sep 8, 2011 at 11:37 AM, Jim Pendleton <jimp@ittvis.com> wrote:
> Frank Warmerdam <warmerdam <at> pobox.com> writes:
>
>> On 11-09-08 07:48 AM, Jim Pendleton wrote:
>> > Is there any model for redirecting CPLDebug output from stdout to an
>> > alternative path?
>>
>> There is no need to overwrite the high level CPLError and CPLDebug
> functions.
>> Instead install a handler for the messages with CPLSetErrorHandler().
>
> That was the information I needed.
>
> For the sake of expediency, I've ifdef'ed __android_log_print() calls
> adjacent to the printf() statements in the existing
> CPLDefaultErrorHandler rather than duplicating the code and adding
> another source file to the build.

Jim,

In fact this might even be the long term solution with an android
#ifdef.

> If I eventually proceed the approved GDAL development way is there a
> standard place to call CPLSetErrorHandler() when loading GDAL as a
> library? ?Since I'm running in Java, I wouldn't necessarily have a
> pointer to my C++ function at runtime without some extra hackery (and
> there's no SWIG binding presently for that routine, regardless.)

Ah yes, that does make it more complicated.  I'm not sure of a good
way to have something done automatically at library load time.

I see the gdal_python.i file has an init section for registering drivers.
Something similar might possible in Java.

> I would like to perturb as little of the original GDAL source as
> possible.
>
> If only there existed a gdal.SetConfigOption interface for
> CPLSetErrorHandler() that would allow me to pass an entry point name
> instead of a function pointer...

I see that CPLPushErrorHandler() already does this through
the swig bindings for "well known" error handlers.

I think for now an android ifdef right in CPLDefaultErrorHandler
is appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jimp at ittvis.com  Thu Sep  8 17:46:23 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Thu Sep  8 21:16:36 2011
Subject: [gdal-dev] Redirect CPLDebug output?
In-Reply-To: <CA+YzLBeB_jUwwRQUq0GPLNmFGxvw6xDGooEW16OrteSo5x-=Fg@mail.gmail.com>
References: <0A35EA74E38BA04787179D409AF0CB3F212615@coexch01.rsinc.com><4E68DA98.408@pobox.com><0A35EA74E38BA04787179D409AF0CB3F212617@coexch01.rsinc.com>
	<CA+YzLBeB_jUwwRQUq0GPLNmFGxvw6xDGooEW16OrteSo5x-=Fg@mail.gmail.com>
Message-ID: <0A35EA74E38BA04787179D409AF0CB3F21261D@coexch01.rsinc.com>

> Frank Warmerdam <warmerdam <at> pobox.com> writes:
> Ah yes, that does make it more complicated.  I'm not sure of a good
> way to have something done automatically at library load time.

There's a JNI_OnLoad function that Java attempts to locate and execute
when it loads a new .so file.  

I've seen the messages for this in LogCat, but I've not used it.  It
seems a likely a candidate for GDAL-as-library initialization calls.

Thanks again for your help,
Jim P.
From jgrn at illinois.edu  Thu Sep  8 18:20:03 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu Sep  8 21:51:40 2011
Subject: [gdal-dev] gdal2tiles.py zoom levels -- how to display "raw" pixels?
Message-ID: <CABG0rftt_QE7snE2vOxYQ+DRkm67Ei3XiR+41RjU+zWnfp26hw@mail.gmail.com>

GDALers:

I'm trying to get gdal2tiles to give me a zoom level that displays the
raw, full resolution, un-resampled pixels at a certain zoom level.
What zoom (-z) setting should I use?  I am very confused what,
precisely, the zoom levels refer to in terms of pixels/unit area.  My
input data is a 50cm Worldview-2 image.  Thanks!

--j
From upperoso at gmail.com  Thu Sep  8 21:23:29 2011
From: upperoso at gmail.com (Big Bear)
Date: Fri Sep  9 01:04:56 2011
Subject: [gdal-dev] Numerical instability with thin plate spline transform
In-Reply-To: <4E68B3D7.9090906@uva.nl>
References: <4E64E0CC.1070000@uva.nl>
	<4E68B3D7.9090906@uva.nl>
Message-ID: <CAOJmFz-YwcObBi95Rbig8-Z1rj4FLTx2eGt3CDyadaHfUi0HKA@mail.gmail.com>

The linear solver in the TPS routine is naive for any number of
reasons.1,2,3,...  At the same time, one is going to suffer
considerably when the number of control points is in the thousands.
Slow to evaluate so many coefficients for each point.

It is not such a task to improve the routine.  Best to work with
someone who is cognizant per the implementation.  Likely to be
straightforward.  ( Been there, done that. )

Important to know how the implementation is integrated into gdalwarp
before getting too enthusiastic :-/

Thoughts?

1 Looks to be Gauss-Jordan w/o pivoting
2 Never invert a matrix unless required
3 No scaling of the coordinates

On Thu, Sep 8, 2011 at 5:23 AM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
> Not sure whether this can be considered a bug, so I give it for what it is
> worth.
>
> I'm doing thin plate spline transformation from one set of projected
> coordinates to another. Both sets have values between -600000 and 600000
> (meters). A typical set of gcps looks like:
>
> ?-gcp 62402 -74383 181915 315371 \
> ?-gcp -100169 -24213 19685 366661 \
> ?-gcp 118323 233822 239994 623190 \
> ...
>
> When transforming the the first two columns of this list with gdaltransform
> -tps, using the same gcp-list, the results should be exactly equal to the
> last two columns:
>
> ?(from gdal_tps.cpp:)
> ?* The thin plate spline transformer produces exact transformation
> ?* at all control points and smoothly varying transformations between
> ?* control points with greatest influence from local control points.
> ?* It is suitable for for many applications not well modelled by polynomial
> ?* transformations.
> ?*
>
>
> However, they aren't. With a few control points the differences are only in
> millimeters, but with a few hundred gcps the differences become meters, and
> above thousand points the error can get to fifty meters. The problem gets
> worse when some control points are very near to other ones. I was happy to
> discover that dividing all numbers by 1000 solves the problem, but there
> certainly is a numerical instability in the algorithm.
>
> Of course, thin plate spline transformations normally use scan coordinates
> as input, and these are almost always small numbers. Even so, I can imagine
> problems with very large rasters and the rubber sheeting applications I am
> working with.
>
> Jan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Fri Sep  9 02:11:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  9 06:07:46 2011
Subject: [gdal-dev] Numerical instability with thin plate spline transform
In-Reply-To: <CAOJmFz-YwcObBi95Rbig8-Z1rj4FLTx2eGt3CDyadaHfUi0HKA@mail.gmail.com>
References: <4E64E0CC.1070000@uva.nl> <4E68B3D7.9090906@uva.nl>
	<CAOJmFz-YwcObBi95Rbig8-Z1rj4FLTx2eGt3CDyadaHfUi0HKA@mail.gmail.com>
Message-ID: <201109090811.06465.even.rouault@mines-paris.org>

Le vendredi 09 septembre 2011 03:23:29, Big Bear a ?crit :
> The linear solver in the TPS routine is naive for any number of
> reasons.1,2,3,...  At the same time, one is going to suffer
> considerably when the number of control points is in the thousands.
> Slow to evaluate so many coefficients for each point.
> 
> It is not such a task to improve the routine.  Best to work with
> someone who is cognizant per the implementation.  Likely to be
> straightforward.  ( Been there, done that. )
> 
> Important to know how the implementation is integrated into gdalwarp
> before getting too enthusiastic :-/
> 
> Thoughts?
> 
> 1 Looks to be Gauss-Jordan w/o pivoting
> 2 Never invert a matrix unless required
> 3 No scaling of the coordinates

You might try latest GDAL trunk, in particular 
http://trac.osgeo.org/gdal/changeset/22876 .

It offers the option to use libarmadillo to speed-up matrix inversion in 
thinplatespline.cpp (speed-up when TPS are in the thousands), but perhaps as a 
side effect, you'd get also more numerical stability.

> 
> On Thu, Sep 8, 2011 at 5:23 AM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
> > Not sure whether this can be considered a bug, so I give it for what it
> > is worth.
> > 
> > I'm doing thin plate spline transformation from one set of projected
> > coordinates to another. Both sets have values between -600000 and 600000
> > (meters). A typical set of gcps looks like:
> > 
> >  -gcp 62402 -74383 181915 315371 \
> >  -gcp -100169 -24213 19685 366661 \
> >  -gcp 118323 233822 239994 623190 \
> > ...
> > 
> > When transforming the the first two columns of this list with
> > gdaltransform -tps, using the same gcp-list, the results should be
> > exactly equal to the last two columns:
> > 
> >  (from gdal_tps.cpp:)
> >  * The thin plate spline transformer produces exact transformation
> >  * at all control points and smoothly varying transformations between
> >  * control points with greatest influence from local control points.
> >  * It is suitable for for many applications not well modelled by
> > polynomial * transformations.
> >  *
> > 
> > 
> > However, they aren't. With a few control points the differences are only
> > in millimeters, but with a few hundred gcps the differences become
> > meters, and above thousand points the error can get to fifty meters. The
> > problem gets worse when some control points are very near to other ones.
> > I was happy to discover that dividing all numbers by 1000 solves the
> > problem, but there certainly is a numerical instability in the
> > algorithm.
> > 
> > Of course, thin plate spline transformations normally use scan
> > coordinates as input, and these are almost always small numbers. Even
> > so, I can imagine problems with very large rasters and the rubber
> > sheeting applications I am working with.
> > 
> > Jan
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From lists at hilboll.de  Fri Sep  9 10:20:44 2011
From: lists at hilboll.de (Andreas H.)
Date: Fri Sep  9 14:50:46 2011
Subject: [gdal-dev] HDF-Problems when compiling
Message-ID: <83fb5f97d5a667d1e49cb1159d33cb91.squirrel@srv2.s4y.tournesol-consulting.eu>

Hi everyone,

I'm trying to compile GDAL 1.8.1 from source on a x86_64 machine, compiling
against the libraries which come shipped with Enthought's Python
distribution.

So, what I'm doing is this:

$ export CFLAGS="-I/hb/USER/lib/epd-7.1-1-x86_64/include -fPIC"
$ export CXXFLAGS="-I/hb/USER/lib/epd-7.1-1-x86_64/include -fPIC"
$ export LDFLAGS="-L/hb/USER/lib/epd-7.1-1-x86_64/lib"
$ ./configure --prefix=/hb/USER/.virtualenvs/pydoas
--with-hdf5=/hb/USER/lib/epd-7.1-1-x86_64
--with-netcdf=/hb/USER/lib/epd-7.1-1-x86_64
--with-hdf4=/hb/USER/lib/epd-7.1-1-x86_64
$ make

I get the following error:

relocation R_X86_64_32 against `a local symbol' can not be used when
making a shared object; recompile with -fPIC
/usr/local/lib/libmfhdf.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/gpfs/hb/USER/.virtualenvs/pydoas/tmp/gdal-1.8.1'
make: *** [check-lib] Error 2

I don't understand the error message, as -fPIC is part of my CFLAGS and
CXXFLAGS?!

When I instead just disable hdf4

$ ./configure --prefix=/hb/USER/.virtualenvs/pydoas
--with-hdf5=/hb/USER/lib/epd-7.1-1-x86_64
--with-netcdf=/hb/USER/lib/epd-7.1-1-x86_64 --without-hdf4
$ make

I get the following:

libtool: link: ranlib .libs/libgdal.a
/usr/bin/sed: can't read /usr/lib/libhdf5_hl.la: No such file or directory
libtool: link: `/usr/lib/libhdf5_hl.la' is not a valid libtool archive
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/gpfs/hb/USER/.virtualenvs/pydoas/tmp/gdal-1.8.1'
make: *** [check-lib] Error 2

Why does the system try to access /usr/lib/libhdf5_hl.la even though I
specified a different path to ./configure?

Any help is more than welcome ...

Cheers,
Andreas.


PS:

$  gcc -v
Using built-in specs.
Target: x86_64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info
--mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64
--enable-languages=c,c++,objc,fortran,obj-c++,java,ada
--enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3
--enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/
--with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap
--with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit
--enable-libstdcxx-allocator=new --disable-libstdcxx-pch
--enable-version-specific-runtime-libs --program-suffix=-4.3
--enable-linux-futex --without-system-libunwind --with-cpu=generic
--build=x86_64-suse-linux
Thread model: posix
gcc version 4.3.2 [gcc-4_3-branch revision 141291] (SUSE Linux)


From etourigny.dev at gmail.com  Fri Sep  9 10:51:19 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  9 15:16:53 2011
Subject: [gdal-dev] HDF-Problems when compiling
In-Reply-To: <83fb5f97d5a667d1e49cb1159d33cb91.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <83fb5f97d5a667d1e49cb1159d33cb91.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <CA+TxYvNXmy2Rc1z1e2xMhOAZMyz4FRA+Y_OKQ40kesHEn0fOOA@mail.gmail.com>

the following error:
relocation R_X86_64_32 against `a local symbol' can not be used when
making a shared object; recompile with -fPIC

Means that the library you are linking to has not been compiled for
64-bit architecture.

I can see that it is trying to link to /usr/local/lib/libmfhdf.a
instead of your specified /hb/USER/lib/epd-7.1-1-x86_64, and something
similar for hdf5

Sometimes it's easier to use the default system libraries, or remove
them if you are using more recent ones  avoid conflicts like these.

Have a look at config.log to see what is happening.
You might also have something bad in you LD_LIBRARY_PATH configuration,
try:
export LD_LIBRARY_PATH="/hb/USER/lib/epd-7.1-1-x86_64"

If still no luck you can post it here as an attachment (I think), or
at least the parts relevant to hdf4 and hdf5, also the output of
'export' to see you env variables.

Etienne

On Fri, Sep 9, 2011 at 11:20 AM, Andreas H. <lists@hilboll.de> wrote:
> Hi everyone,
>
> I'm trying to compile GDAL 1.8.1 from source on a x86_64 machine, compiling
> against the libraries which come shipped with Enthought's Python
> distribution.
>
> So, what I'm doing is this:
>
> $ export CFLAGS="-I/hb/USER/lib/epd-7.1-1-x86_64/include -fPIC"
> $ export CXXFLAGS="-I/hb/USER/lib/epd-7.1-1-x86_64/include -fPIC"
> $ export LDFLAGS="-L/hb/USER/lib/epd-7.1-1-x86_64/lib"
> $ ./configure --prefix=/hb/USER/.virtualenvs/pydoas
> --with-hdf5=/hb/USER/lib/epd-7.1-1-x86_64
> --with-netcdf=/hb/USER/lib/epd-7.1-1-x86_64
> --with-hdf4=/hb/USER/lib/epd-7.1-1-x86_64
> $ make
>
> I get the following error:
>
> relocation R_X86_64_32 against `a local symbol' can not be used when
> making a shared object; recompile with -fPIC
> /usr/local/lib/libmfhdf.a: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/gpfs/hb/USER/.virtualenvs/pydoas/tmp/gdal-1.8.1'
> make: *** [check-lib] Error 2
>
> I don't understand the error message, as -fPIC is part of my CFLAGS and
> CXXFLAGS?!
>
> When I instead just disable hdf4
>
> $ ./configure --prefix=/hb/USER/.virtualenvs/pydoas
> --with-hdf5=/hb/USER/lib/epd-7.1-1-x86_64
> --with-netcdf=/hb/USER/lib/epd-7.1-1-x86_64 --without-hdf4
> $ make
>
> I get the following:
>
> libtool: link: ranlib .libs/libgdal.a
> /usr/bin/sed: can't read /usr/lib/libhdf5_hl.la: No such file or directory
> libtool: link: `/usr/lib/libhdf5_hl.la' is not a valid libtool archive
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/gpfs/hb/USER/.virtualenvs/pydoas/tmp/gdal-1.8.1'
> make: *** [check-lib] Error 2
>
> Why does the system try to access /usr/lib/libhdf5_hl.la even though I
> specified a different path to ./configure?
>
> Any help is more than welcome ...
>
> Cheers,
> Andreas.
>
>
> PS:
>
> $ ?gcc -v
> Using built-in specs.
> Target: x86_64-suse-linux
> Configured with: ../configure --prefix=/usr --infodir=/usr/share/info
> --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64
> --enable-languages=c,c++,objc,fortran,obj-c++,java,ada
> --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3
> --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/
> --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap
> --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit
> --enable-libstdcxx-allocator=new --disable-libstdcxx-pch
> --enable-version-specific-runtime-libs --program-suffix=-4.3
> --enable-linux-futex --without-system-libunwind --with-cpu=generic
> --build=x86_64-suse-linux
> Thread model: posix
> gcc version 4.3.2 [gcc-4_3-branch revision 141291] (SUSE Linux)
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From etourigny.dev at gmail.com  Fri Sep  9 10:52:15 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  9 15:17:50 2011
Subject: [gdal-dev] netcdf - use of UNIDATA libcf for input/output ?
Message-ID: <CA+TxYvO7nR5RMfmue-9-Mo-aQvt+XVy73AYXHpcE7_N9sE6Dmw@mail.gmail.com>

Hi netcdf folks

It just occurred to me that input and output of the netcdf driver
could use libcf, which is an optional part of netcdf. This would
potentially ease development of complete CF compatibility.
We could also perhaps build datum and CRS support around libcf.

http://www.unidata.ucar.edu/software/libcf/

Does anyone have experience with libcf, or comment on this?

thanks, Etienne
From matze999 at gmail.com  Fri Sep  9 11:31:09 2011
From: matze999 at gmail.com (Matt Funk)
Date: Fri Sep  9 16:05:45 2011
Subject: [gdal-dev] question about transform from geo to proj reference
	system
Message-ID: <4E6A313D.7090806@gmail.com>

Hi,
I have a satellite scene specified in geographic coordinates (i.e.
WSG84, lat/lon). For the purpose of interpolating onto a
distance-regular grid i want to transform that data to a projected
systems (UTM). I am using gdal in python. To go from projected to
geographic (the inverse of i what i want to do here) i do:

1) ds = gdal.Open(filename)
2) srs = osr.SpatialReference(ds.GetProjection()); #print "srs:"; print srs
3) targetSRS = srs.CloneGeogCS(); #print "\ntargetSRS:"; print
targetSRS.ExportToPrettyWkt()
4) transform_FileCS_To_RefCS = osr.CoordinateTransformation(srs,targetSRS)
5) gt = ds.GetGeoTransform()

So basically in step 3) is where i "get" the geographic coordinate
system. I had been thinking that there would be a similar CloneProjCS()
of some sort. Since there isn't i am not quite sure how to go about it.
At first i thought i define my own coordinate system (see:
http://www.osgeo.org/pipermail/gdal-dev/2011-June/029070.html) like :
srs = osr.SpatialReference()
srs.SetUTM(18,1)
srs.SetWellKnownGeogCS('WGS84')
dst_ds.SetProjection( srs.ExportToWkt())

The problem with that is that i have to specify the UTM zone. However,
my data can span multiple zones, and i'd really like the zone to be a
return argument back to me from the transform.
I guess i am a little confused about this. I really appreciate anyone
pointing out what i am missing here.

thanks
matt
From yjacolin at free.fr  Fri Sep  9 14:40:56 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Fri Sep  9 19:19:10 2011
Subject: [gdal-dev] New release of french documentation of GDAL
Message-ID: <201109092040.56201.yjacolin@free.fr>

Hello,

I have just published a new release of the French documentation of GDAL. A new 
website, a new url [1] and a new langage (restructured text) used for this 
release.

This release is more than a translation of the gdal documentation, I added 
some documentation for the Python binding of GDAL and the futur will see more 
and more new documentation. Other new chapter added is the "utilities" (which 
will be renamed soon) present some utilites not part of the GDAL utilities but 
usefule to know.

The code file of the documentation will be put in github soon in order to 
accept contribution.

Thanks to Even and all gdal contributor!

Y.
[1] http://gdal.gloobe.org
-- 
Yves Jacolin
From etourigny.dev at gmail.com  Fri Sep  9 15:19:54 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Sep  9 20:00:12 2011
Subject: [gdal-dev] New release of french documentation of GDAL
In-Reply-To: <201109092040.56201.yjacolin@free.fr>
References: <201109092040.56201.yjacolin@free.fr>
Message-ID: <CA+TxYvOxt=U=_ugjS2qArQ036tj1r9m9p-o=U2YVu4PtsA+6LQ@mail.gmail.com>

Tr?s beau travail! (Nice work)!

You might want to update the links on the main gdal page, which point
to georezo.net, or update georezo.net

salutations cordiales,
Etienne

On Fri, Sep 9, 2011 at 3:40 PM, Yves Jacolin (free) <yjacolin@free.fr> wrote:
> Hello,
>
> I have just published a new release of the French documentation of GDAL. A new
> website, a new url [1] and a new langage (restructured text) used for this
> release.
>
> This release is more than a translation of the gdal documentation, I added
> some documentation for the Python binding of GDAL and the futur will see more
> and more new documentation. Other new chapter added is the "utilities" (which
> will be renamed soon) present some utilites not part of the GDAL utilities but
> usefule to know.
>
> The code file of the documentation will be put in github soon in order to
> accept contribution.
>
> Thanks to Even and all gdal contributor!
>
> Y.
> [1] http://gdal.gloobe.org
> --
> Yves Jacolin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Fri Sep  9 16:05:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  9 20:48:33 2011
Subject: [gdal-dev] New release of french documentation of GDAL
In-Reply-To: <CA+TxYvOxt=U=_ugjS2qArQ036tj1r9m9p-o=U2YVu4PtsA+6LQ@mail.gmail.com>
References: <201109092040.56201.yjacolin@free.fr>
	<CA+TxYvOxt=U=_ugjS2qArQ036tj1r9m9p-o=U2YVu4PtsA+6LQ@mail.gmail.com>
Message-ID: <CA+YzLBfjCb146NiF0p=ieSaWkbVN_yDKQ8kaQU+nCyjwo6EcOQ@mail.gmail.com>

Yves,

I have updated the GDAL index page to point to your new site and
regenerated www.gdal.org's pages.

Congratulations!

On Fri, Sep 9, 2011 at 12:19 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Tr?s beau travail! (Nice work)!
>
> You might want to update the links on the main gdal page, which point
> to georezo.net, or update georezo.net
>
> salutations cordiales,
> Etienne
>
> On Fri, Sep 9, 2011 at 3:40 PM, Yves Jacolin (free) <yjacolin@free.fr> wrote:
>> Hello,
>>
>> I have just published a new release of the French documentation of GDAL. A new
>> website, a new url [1] and a new langage (restructured text) used for this
>> release.
>>
>> This release is more than a translation of the gdal documentation, I added
>> some documentation for the Python binding of GDAL and the futur will see more
>> and more new documentation. Other new chapter added is the "utilities" (which
>> will be renamed soon) present some utilites not part of the GDAL utilities but
>> usefule to know.
>>
>> The code file of the documentation will be put in github soon in order to
>> accept contribution.
>>
>> Thanks to Even and all gdal contributor!
>>
>> Y.
>> [1] http://gdal.gloobe.org
>> --
>> Yves Jacolin
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From sksupak at ncsu.edu  Sat Sep 10 18:27:24 2011
From: sksupak at ncsu.edu (Stacy Supak)
Date: Sun Sep 11 00:41:13 2011
Subject: [gdal-dev] Ogr2ogr projection problem- features are shifted 12
 miles to the north??? How do I fix it?
Message-ID: <CA+Md3jvN_00RhJovAwHEo_j1gGJDdw0xq_VZtg084UiKP5axMw@mail.gmail.com>

Hi Community,



I have discovered a problem relate to the output of an ogr2ogr command line
call. My resulting polygon features are 12 miles (.18 degrees) due north of
where they should be, but the longitude is correct. The polygon dimensions
are also preserved.



The desired output is a shape file that has been projected using EPSG 4326.
The input comes from a postgres database with postgis where the polygon were
digitized in EPSG 900913 (the google mercator prj).



Below is the command line call that I am using:

ogr2ogr -where " gid = 3 " -f "ESRI Shapefile"
E:\Web_Data_Storage\dfr_map_shapes\DFRmap_Tract_3_4326.shp -t_srs EPSG:4326
PG:"user=dfr_webmap dbname=denr host=ipaddress password=xxx port=5433"
Tracts2

If I convert the coordinates of a corner of a polygon using gdaltransform I
get the correct coordinates.

gdaltransform -s_srs EPSG:900913 -t_srs EPSG:4326 -8853154 4197094.5





Why is this happening and how do I fix it?



Thanks,

Stacy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110910/7e5ef6ca/attachment.html
From peifer at gmx.eu  Sun Sep 11 04:10:14 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun Sep 11 10:49:30 2011
Subject: [gdal-dev] Re: Ogr2ogr projection problem- features are shifted 12
 miles to the north??? How do I fix it?
In-Reply-To: <CA+Md3jvN_00RhJovAwHEo_j1gGJDdw0xq_VZtg084UiKP5axMw@mail.gmail.com>
References: <CA+Md3jvN_00RhJovAwHEo_j1gGJDdw0xq_VZtg084UiKP5axMw@mail.gmail.com>
Message-ID: <4E6C6CE6.8010701@gmx.eu>

On 11/09/2011 00:27, Stacy Supak wrote:
> Hi Community,
>
> I have discovered a problem relate to the output of an ogr2ogr command
> line call. My resulting polygon features are 12 miles (.18 degrees) due
> north of where they should be, but the longitude is correct. The polygon
> dimensions are also preserved.
>
> The desired output is a shape file that has been projected using EPSG
> 4326.The input comes from a postgres database with postgis where the
> polygon were digitized in EPSG 900913 (the google mercator prj).
>

A latitude-only shift of several miles/kilometres usually occurs when 
projecting from a sphere to an ellpsoid or vice-versa. See Melita 
Kennedy's explanation at [1] and the FAQ at [2].

What does proj --version say ?

I am asking as proj.4's more recent behaviour is to avoid this shift, as 
stated in the 4.6.0 Release Notes, from December 2007:

--- snip ---
  o Avoid applying "change of ellipsoid" during datum shifting based on
    ellipsoids getting changed to spheres for spherical projections.

    ... from the NEWS file at [3]
--- snip ---

Hope this helps, Hermann


[1] 
http://osgeo-org.1803224.n2.nabble.com/Re-mercator-projection-to-spherical-ellipsoid-from-WGS84-td2063385.html

[2] 
http://trac.osgeo.org/proj/wiki/FAQ#ChangingEllipsoidWhycantIconvertfromWGS84toGoogleEarthVirtualGlobeMercator

[3] http://trac.osgeo.org/proj/browser/trunk/proj/NEWS
From dev4cx4m9z at snkmail.com  Sun Sep 11 06:23:08 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Sun Sep 11 13:09:53 2011
Subject: [gdal-dev] RE: OziExplorer driver & VB.NET support
Message-ID: <000f01cc706c$ce0b07b0$6a211710$@snkmail.com>

1. I am attempting to build GDAL with the OziExplorer file format
(ozf2/ozxf3) driver. I have downloaded the source from
http://download.osgeo.org/gdal/gdal181.zip and successfully built GDAL using
VC Express 2010. I cannot see the source files for the ozf2/ozxf3 files
driver. Where would I find them, and how do I enable it? (New to VC)

2. I have built my own VB.NET wrapper heavily based on the VB6 wrapper by
Frank Warmerdam. It's 98% converted, and so far I've been able to access
GDAL without issue with my modest program. Has someone already done a VB.NET
wrapper, or is mine of use?

_______________________________________
Marc Hillman, Melbourne, Australia
http://users.tpg.com.au/users/mhillman/
marc .hillman @ t p g . c o m . a u
Eagles may soar, but weasels don't get sucked into jet engines.
Early bird gets the worm, but the second mouse gets the cheese.
If Barbie is so popular, why do you have to buy her friends?
All those who believe in psychokinesis, raise my hand.


From jormarfe at gmail.com  Mon Sep 12 06:46:04 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Mon Sep 12 15:01:01 2011
Subject: [gdal-dev] RPC computation
Message-ID: <CADH5xWoezGKgqrUuxEN72wtHzK3kUuhwCfOLW-r1TDyR_3ewvw@mail.gmail.com>

Hello,

    I have developed a program that compute the RPC of an input tif image.
Now I want to validate this computation. Could you tell me how I can compute
the RPCs of an input image using gdal?


Best Regards,

Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110912/6209a77c/attachment.html
From danielet at toonz.com  Mon Sep 12 13:24:15 2011
From: danielet at toonz.com (Daniele Tessaro)
Date: Mon Sep 12 22:25:19 2011
Subject: [gdal-dev] Can't find a way of properly warping into a buffer
Message-ID: <CAFAwF2KoXBCUZu3oGcUq9LSTn7AcxLyb9AhuT71Xt3xnHsaD-g@mail.gmail.com>

Hello everybody,
I'm really sorry if this post will be very long, but I swear I've
spent a lot of time (days!)
in trying to exactly understand this, also reading the sourcecode, but
I'm a little bit stuck!

In my application I need to read data from a srtm90 tif file
of extension 5 lat * 5 lon put in a raster of 6000x6000
pixels, 2 bytes per pixel. This data will then be used as a heightmap
texture for terrain rendering.

I have no problems in reading data using RasterIO function, I can also
keep 72mb of raster data in system memory performing only
one IO operation (so that I don't have to mess with async operations) but:

1. I can't keep a 72MB texture in video memory (but the whole terrain
extension should be
rendered if the viewer is high enough), so I have to read a resampled
lower resolution versions of the full terrain.
(Actually more than one depending on the height of the viewpoint),
and a full resolution version of a small piece of terrain that must be
updated fast(only for small rectangular chunks)
almost every time the user moves on the terrain.

2. I'll map my terrain on a plane. This means that I need to transform
data to some
projected coordinate system. Suppose UTM, with the proper zone (I don't mind the
deformations at the borders...).

Calling RasterIO in the proper way would solve problem 1, as it is
exposing exactly the interface I need.
The big issue is that it would be performing IO operations all the
time, while I want to perform
1 single IO operation and then resample on that data.
So first question: Is there a way of telling RasterIO to completely
cache data and never access disk?

RasterIO would not solve problem 2, as I would get unprojected data as result,
unless I get unprojected data and then I execute the projection.
I don't think it's the correct approach, also because RasterIO only
allows me only to read unprojected rectangular data,
while I want to read projected rectangular data that would become
trapezoidal if unprojected.


I've also spent time with the Warping functions, but I can't figure
out how to perform what I need.
For what I've seen I should initialize a GDALWarpOperation with
GDALWarpOptions so that:
- hSrcDS is my source dataset
- hDstDS is NULL, cause I want to warp to a buffer
- pfnTransformer must be set so that it can map from pixel / line
unprojected to pixel / line projected. I can use
 GDALCreateGenImgProjTransformer but I have no destination dataset so
I can't figure out how to set it up.

Then I can't exactly understand the WarpRegionToBuffer API.
Suppose I need to sample in an output buffer of size W x H a region
that in the projected coordinate system (so after the transform)
is of size A x B. How should I set nDstXSize and nDstYSize? I would
expect being able to specify both those couples of params because
I should be able to get any region and to put it in any buffer
performing the appropriate resampling. But that function is a little
bit confusing
me.

can anyone help me?:-)

thanks

From rush at winkey.org  Mon Sep 12 14:44:30 2011
From: rush at winkey.org (Brian Case)
Date: Mon Sep 12 23:18:02 2011
Subject: [gdal-dev] Can't find a way of properly warping into a buffer
In-Reply-To: <CAFAwF2KoXBCUZu3oGcUq9LSTn7AcxLyb9AhuT71Xt3xnHsaD-g@mail.gmail.com>
References: <CAFAwF2KoXBCUZu3oGcUq9LSTn7AcxLyb9AhuT71Xt3xnHsaD-g@mail.gmail.com>
Message-ID: <1315853070.12434.17.camel@octopi>

Daniele

a simple solution could be warp your image to an in memory raster
http://www.gdal.org/frmt_mem.html

Brian


On Mon, 2011-09-12 at 19:24 +0200, Daniele Tessaro wrote:
> Hello everybody,
> I'm really sorry if this post will be very long, but I swear I've
> spent a lot of time (days!)
> in trying to exactly understand this, also reading the sourcecode, but
> I'm a little bit stuck!
> 
> In my application I need to read data from a srtm90 tif file
> of extension 5 lat * 5 lon put in a raster of 6000x6000
> pixels, 2 bytes per pixel. This data will then be used as a heightmap
> texture for terrain rendering.
> 
> I have no problems in reading data using RasterIO function, I can also
> keep 72mb of raster data in system memory performing only
> one IO operation (so that I don't have to mess with async operations) but:
> 
> 1. I can't keep a 72MB texture in video memory (but the whole terrain
> extension should be
> rendered if the viewer is high enough), so I have to read a resampled
> lower resolution versions of the full terrain.
> (Actually more than one depending on the height of the viewpoint),
> and a full resolution version of a small piece of terrain that must be
> updated fast(only for small rectangular chunks)
> almost every time the user moves on the terrain.
> 
> 2. I'll map my terrain on a plane. This means that I need to transform
> data to some
> projected coordinate system. Suppose UTM, with the proper zone (I don't mind the
> deformations at the borders...).
> 
> Calling RasterIO in the proper way would solve problem 1, as it is
> exposing exactly the interface I need.
> The big issue is that it would be performing IO operations all the
> time, while I want to perform
> 1 single IO operation and then resample on that data.
> So first question: Is there a way of telling RasterIO to completely
> cache data and never access disk?
> 
> RasterIO would not solve problem 2, as I would get unprojected data as result,
> unless I get unprojected data and then I execute the projection.
> I don't think it's the correct approach, also because RasterIO only
> allows me only to read unprojected rectangular data,
> while I want to read projected rectangular data that would become
> trapezoidal if unprojected.
> 
> 
> I've also spent time with the Warping functions, but I can't figure
> out how to perform what I need.
> For what I've seen I should initialize a GDALWarpOperation with
> GDALWarpOptions so that:
> - hSrcDS is my source dataset
> - hDstDS is NULL, cause I want to warp to a buffer
> - pfnTransformer must be set so that it can map from pixel / line
> unprojected to pixel / line projected. I can use
>  GDALCreateGenImgProjTransformer but I have no destination dataset so
> I can't figure out how to set it up.
> 
> Then I can't exactly understand the WarpRegionToBuffer API.
> Suppose I need to sample in an output buffer of size W x H a region
> that in the projected coordinate system (so after the transform)
> is of size A x B. How should I set nDstXSize and nDstYSize? I would
> expect being able to specify both those couples of params because
> I should be able to get any region and to put it in any buffer
> performing the appropriate resampling. But that function is a little
> bit confusing
> me.
> 
> can anyone help me?:-)
> 
> thanks
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matze999 at gmail.com  Mon Sep 12 17:35:49 2011
From: matze999 at gmail.com (Matt Funk)
Date: Tue Sep 13 02:18:32 2011
Subject: [gdal-dev] Do we have to know UTM zone a priori to convert to UTM
	from lat/lon
Message-ID: <4E6E7B35.7090402@gmail.com>

Hi,
if i want to convert from lat/lon to UTM (both based on WGS84). Do i
have to know the UTM zone a priori? If so, why?
Can anyone provide some insight on this? I'd greatly appreciate it.

thanks
matt

From matze999 at gmail.com  Mon Sep 12 17:52:17 2011
From: matze999 at gmail.com (Matt Funk)
Date: Tue Sep 13 02:35:57 2011
Subject: [gdal-dev] Do we have to know UTM zone a priori to convert to
	UTM from lat/lon
In-Reply-To: <4E6E7DC4.6080400@alphapixel.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7DC4.6080400@alphapixel.com>
Message-ID: <4E6E7F11.4050708@gmail.com>

On 9/12/2011 3:46 PM, Chris 'Xenon' Hanson wrote:
> On 9/12/2011 3:35 PM, Matt Funk wrote:
>> Hi,
>> if i want to convert from lat/lon to UTM (both based on WGS84). Do i
>> have to know the UTM zone a priori? If so, why?
>> Can anyone provide some insight on this? I'd greatly appreciate it.
>   Yes, because UTM uses a series of Zones around the world. So a given X,Y coordinate maps
> to dozens of different places in the world depending on what Zone you're in. So, to go
> from UTM to a unique lat/lon you have to know which Zone the UTM was in.
Thanks for the reply. However, what i am actually after is the reverse.
I want to go from lat/lon=>UTM. And i cannot, for the life of me, find
how, when providing a lat/lon pair, to get the UTM zone that this
lat/lon pair maps to. At this point i am assuming that i am missing
something fundamental.
Any insight into what that is is greatly welcome.

matt


>
> http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system
> http://upload.wikimedia.org/wikipedia/commons/e/ed/Utm-zones.jpg
>
>

From tosborn at sbcglobal.net  Mon Sep 12 17:58:09 2011
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Tue Sep 13 02:42:13 2011
Subject: [gdal-dev] Re: Do we have to know UTM zone a priori to convert to
 UTM from lat/lon
In-Reply-To: <4E6E7F11.4050708@gmail.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7F11.4050708@gmail.com>
Message-ID: <1315864689736-6785420.post@n2.nabble.com>

UTM Zone = int(1+([Longitude]+180.0)/6.0)

Using this equation a point exactly on a West UTM boundary would be
considered in that Zone. A point exactly on an East UTM boundary would be
considered to be in the UTM Zone to the immediate East.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Do-we-have-to-know-UTM-zone-a-priori-to-convert-to-UTM-from-lat-lon-tp6785362p6785420.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tosborn at sbcglobal.net  Mon Sep 12 18:07:16 2011
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Tue Sep 13 02:51:52 2011
Subject: [gdal-dev] Re: Do we have to know UTM zone a priori to convert to
 UTM from lat/lon
In-Reply-To: <1315864689736-6785420.post@n2.nabble.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7F11.4050708@gmail.com>
	<1315864689736-6785420.post@n2.nabble.com>
Message-ID: <1315865236701-6785446.post@n2.nabble.com>

I should have said that the above equation is valid for longitudes greater
than or equal to -180.0 and less than +180.0.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Do-we-have-to-know-UTM-zone-a-priori-to-convert-to-UTM-from-lat-lon-tp6785362p6785446.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From matze999 at gmail.com  Mon Sep 12 18:55:22 2011
From: matze999 at gmail.com (Matt Funk)
Date: Tue Sep 13 03:42:43 2011
Subject: [gdal-dev] Re: Do we have to know UTM zone a priori to convert
	to UTM from lat/lon
In-Reply-To: <1315865236701-6785446.post@n2.nabble.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7F11.4050708@gmail.com>
	<1315864689736-6785420.post@n2.nabble.com>
	<1315865236701-6785446.post@n2.nabble.com>
Message-ID: <4E6E8DDA.6040304@gmail.com>

On 9/12/2011 4:07 PM, Tim Osborn wrote:
> I should have said that the above equation is valid for longitudes greater
> than or equal to -180.0 and less than +180.0.
I assume it is the same to determine the latitude zone (using 8
degrees). The one thing though are the exceptions (even though I don't
intend to do any computations in those zones) ... . Is it correct then
to assume that gdal has no capabilities to return the zone based on a
given lat/lon pair? As easy as the code you provided is, it seems that
this capability (and the zone exception handling) would be included in
gdal ... .

either way, thanks
matt

> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Do-we-have-to-know-UTM-zone-a-priori-to-convert-to-UTM-from-lat-lon-tp6785362p6785446.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Mon Sep 12 20:28:22 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Sep 13 05:21:21 2011
Subject: [gdal-dev] python script to generate world files
Message-ID: <4E6EA3A6.6090307@gov.yk.ca>

Hi Folks,

I've built a small gdal python script which builds world files for any 
supported georeferenced raster (I think). The full code is here: 
|gdal-makeworld.py| 
<http://code.google.com/p/maphew/source/browse/gis/o4w_extras/bin/gdal-makeworld.py>. 
The essential bits are:

|geotransform = dataset.GetGeoTransform()

if geotransform is not None:
     x, x_size, x_rot, y, y_rot, y_size = geotransform
     world_file.write('%s\n' % x_size)
     world_file.write('%s\n' % x_rot)
     world_file.write('%s\n' % y_rot)
     world_file.write('%s\n' % y_size)
     world_file.write('%s\n' % x)
     world_file.write('%s\n' % y)
     world_file.close()

''' geotransform tuple key:
     [0] /* top left x */
     [1] /* w-e pixel resolution */
     [2] /* rotation, 0 if image is "north up" */
     [3] /* top left y */
     [4] /* rotation, 0 if image is "north up" */
     [5] /* n-s pixel resolution */
'''

|

Any feedback on the program's (in)correctness is appreciated. ||(I love 
python. It makes me feel so empowered to be able to accomplish stuff 
like this, even though I only have a blurred glimpses of understanding 
of programming and the like. :-)
||
Thank you Mike Toews for pointing me 
<http://gis.stackexchange.com/questions/14545/how-to-generate-world-files-for-raster-x> 
in the right direction, and additional thanks to Schuyler Erle for 
writing gdalcopyproj.py which I used as a starting point.

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From dshean at uw.edu  Mon Sep 12 20:24:33 2011
From: dshean at uw.edu (David Shean)
Date: Tue Sep 13 05:21:55 2011
Subject: [gdal-dev] gdalwarp artifacts when using RPC_DEM
Message-ID: <2F05805A-3F36-44DC-9BB5-AED590A00F9E@uw.edu>

Hi all,
I'm having some trouble with artifacts in the output from gdalwarp when using RPCs and a DEM for orthorectification.  The artifacts appear as rows or blocks of rows that repeat swaths of pixels from nearby rows, with variable horizontal extent (often spanning >1000 samples).  They are not coincident with the DEM pixel edges.  Using a different, lower-resolution DEM reduces the number of these artifacts, but they are still present.  I think it is safe to assume that issues with the input DEM are not responsible for the artifacts.  I'm running GDAL 1.8.1 (fink port) on OS X Lion.

Here is a sample command:
gdalwarp -of GTiff -ot UInt16 -t_srs EPSG:3413 -multi -r bilinear -rpc -to "RPC_DEM=dem.tif" infile.ntf outfile.tif

These artifacts are NOT present when mapping with RPCs to a constant height (using the RPC_HEIGHT transformer option).  I have eliminated potential causes related to output projection (both stereographic and sinusoidal are afflicted), interpolation method (tested nn, bilinear and cubic), and various other options (gtiff compression, gtiff tiling, multithreading, etc).  The problem is repeatable, and doesn't appear to be related to hardware limitations or network read/write issues.  Basically, I've spent a full day troubleshooting and I'm running out of ideas.  

I didn't see anything in the GDAL Trac about this - have these artifacts been documented in the past?  

I can provide a screenshot if desired.  On the whole, the image appears properly orthorectified, which is fantastic, but these artifacts are problematic for my application.  Thanks for any advice/assistance.
-David

---
David Shean
Polar Science Center
Applied Physics Lab
University of Washington


From etourigny.dev at gmail.com  Tue Sep 13 09:54:04 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Sep 13 19:39:13 2011
Subject: [gdal-dev] Re: Do we have to know UTM zone a priori to convert to
	UTM from lat/lon
In-Reply-To: <4E6E8DDA.6040304@gmail.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7F11.4050708@gmail.com>
	<1315864689736-6785420.post@n2.nabble.com>
	<1315865236701-6785446.post@n2.nabble.com>
	<4E6E8DDA.6040304@gmail.com>
Message-ID: <CA+TxYvPwaF5jSS1f_3Y+d7v=GTd6-G9mHFUXs01ZbH39xaYgog@mail.gmail.com>

Well GDAL has the necessary infrastructure for (almost) anyone to do
it themselves.
This type of application is typically handled by python scripts, feel
free to submit your own when it is ready. It would make a nice
addition to the python samples in my opinion.

EPSG zones are defined for longitude zones, both north and south (not
in 8-degree zones), so in GDAL you only need to find the longitudinal
zone and define if it is north or south.

e.g. from spatialreference.org
EPSG:32718 -> WGS 84 / UTM zone 18S
EPSG:32618 -> WGS 84 / UTM zone 18N

Etienne

On Mon, Sep 12, 2011 at 7:55 PM, Matt Funk <matze999@gmail.com> wrote:
> On 9/12/2011 4:07 PM, Tim Osborn wrote:
>> I should have said that the above equation is valid for longitudes greater
>> than or equal to -180.0 and less than +180.0.
> I assume it is the same to determine the latitude zone (using 8
> degrees). The one thing though are the exceptions (even though I don't
> intend to do any computations in those zones) ... . Is it correct then
> to assume that gdal has no capabilities to return the zone based on a
> given lat/lon pair? As easy as the code you provided is, it seems that
> this capability (and the zone exception handling) would be included in
> gdal ... .
>
> either way, thanks
> matt
>
>> --
>> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Do-we-have-to-know-UTM-zone-a-priori-to-convert-to-UTM-from-lat-lon-tp6785362p6785446.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Tue Sep 13 10:26:28 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Sep 13 20:05:59 2011
Subject: [gdal-dev] Re: python script to generate world files
References: <4E6EA3A6.6090307@gov.yk.ca>
Message-ID: <loom.20110913T162050-511@post.gmane.org>

Matt Wilkie <matt.wilkie <at> gov.yk.ca> writes:

> 
> Hi Folks,
> 
> I've built a small gdal python script which builds world files for any 
> supported georeferenced raster (I think). The full code is here: 

I don't program but if something goes wrong with ESRI world files it is the half
a pixel shift sometimes needed because the anchor point in the world file is in
the middle of the top-left pixel and some other systems have anchor point in the
top-left corner of the top-left pixel. And the next error is that the half a
pixel shift is increasing the easting value but decreasing the northing value.

-Jukka Rahkonen-

From cjanssen at iavo-rs.com  Tue Sep 13 11:12:21 2011
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Tue Sep 13 20:54:33 2011
Subject: [gdal-dev] Thread Safety question
Message-ID: <CACDUkw+Kgc=Cg=7R2ZRSK-8Y6S-PPJ95H6yBDksizNNKE3eyvw@mail.gmail.com>

I know this has probably been asked before in some form or another but I'm
having trouble finding the answer so I'll ask it anyway. Could anyone give
me a status update on the thread safety of the various parts of GDAL, OGR,
and Projection Systems. I'm specifically interested in the projection
functions (ie OCTTransform) that are based on Proj.4. I have a project that
intends to perform a very large number of projections and any means to
improve performance in this area is critical. Any information that you could
provide would be greatly appreciated. Thanks.

Christiaan Janssen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110913/2fa35a87/attachment.html
From warmerdam at pobox.com  Tue Sep 13 11:20:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 13 21:03:03 2011
Subject: [gdal-dev] Thread Safety question
In-Reply-To: <CACDUkw+Kgc=Cg=7R2ZRSK-8Y6S-PPJ95H6yBDksizNNKE3eyvw@mail.gmail.com>
References: <CACDUkw+Kgc=Cg=7R2ZRSK-8Y6S-PPJ95H6yBDksizNNKE3eyvw@mail.gmail.com>
Message-ID: <CA+YzLBfo3VRQ16GOpUoSCk3Z-XDAnHByzpY+i6Prh_wckgHqLQ@mail.gmail.com>

On Tue, Sep 13, 2011 at 8:12 AM, Christiaan Janssen
<cjanssen@iavo-rs.com> wrote:
> I know this has probably been asked before in some form or another but I'm
> having trouble finding the answer so I'll ask it anyway. Could anyone give
> me a status update on the thread safety of the various parts of GDAL, OGR,
> and Projection Systems. I'm specifically interested in the projection
> functions (ie OCTTransform) that are based on Proj.4. I have a project that
> intends to perform a very large number of projections and any means to
> improve performance in this area is critical. Any information that you could
> provide would be greatly appreciated. Thanks.

Christian,

I haven't reviewed the OCTTransform side for thread safety closely,
but there has been recent work in PROJ.4 on this so getting trunk
of PROJ.4 can be helpful.

I believe if you use a distinct instance of the
OGRCoordinateTransformation for each thread and if
you use PROJ.4 trunk it should be safe to run OCTTransform
operations in different threads at the same time and there
should be very little lock contention.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From matt.wilkie at gov.yk.ca  Tue Sep 13 12:51:14 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Sep 13 22:38:53 2011
Subject: [gdal-dev] Re: python script to generate world files
In-Reply-To: <loom.20110913T162050-511@post.gmane.org>
References: <4E6EA3A6.6090307@gov.yk.ca>
	<loom.20110913T162050-511@post.gmane.org>
Message-ID: <4E6F8A02.9000701@gov.yk.ca>

 > I don't program but if something goes wrong with ESRI world files it 
is the half
 > a pixel shift sometimes needed because the anchor point in the world 
file is in
 > the middle of the top-left pixel and some other systems have anchor 
point in the
 > top-left corner of the top-left pixel. And the next error is that the 
half a
 > pixel shift is increasing the easting value but decreasing the 
northing value.

thanks for this extra note Jukka.

R Thiede pointed out there is a qgis gdal-tools plugin which tackles the 
same problem. From scanning the commit code it appears to also to some 
things with regard to morphing the projection info from WKT to ESRI 
format. I don't know if that would take into account this possible pixel 
shift or not.
http://linfiniti.com/2011/08/extract-projection-tool-for-qgis/



matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
From marco.lechner at fossgis.de  Tue Sep 13 15:45:30 2011
From: marco.lechner at fossgis.de (Marco Lechner - FOSSGIS e.V.)
Date: Wed Sep 14 01:42:17 2011
Subject: [gdal-dev] GDAL unable to open PostGIS Raster table
Message-ID: <4E6FB2DA.7080005@fossgis.de>

Hi,

I'm trying to access a PostGIS Rastertable using gdalinfo.
While
$ gdalinfo "PG:host=localhost dbname=foo user=postgres mode=2"
returns all the available rasters including 'bar' of foo-DB
$ gdalinfo "PG:host=localhost dbname=foo user=postgres table=bar mode=2"
returns
"ERROR 1: Error browsing database for PostGIS Raster properties
gdalinfo failed - unable to open 'PG:host=localhost dbname=foo
user=postgres table=bar mode=2"

What could be the reason?

Marco

P.S. GDAL 1.8.0, released 2011/01/12 on Ubuntu Lucid with PostGISRaster
(ro): PostGIS Raster driver
From marco.lechner at fossgis.de  Tue Sep 13 15:56:22 2011
From: marco.lechner at fossgis.de (Marco Lechner - FOSSGIS e.V.)
Date: Wed Sep 14 01:53:47 2011
Subject: [gdal-dev] GDAL unable to open PostGIS Raster table
In-Reply-To: <4E6FB2DA.7080005@fossgis.de>
References: <4E6FB2DA.7080005@fossgis.de>
Message-ID: <4E6FB566.40609@fossgis.de>

fixed. I used Bar instead of bar for table names and therefore had to
put the table name in ""

Marco

Am 13.09.2011 21:45, schrieb Marco Lechner - FOSSGIS e.V.:
> Hi,
>
> I'm trying to access a PostGIS Rastertable using gdalinfo.
> While
> $ gdalinfo "PG:host=localhost dbname=foo user=postgres mode=2"
> returns all the available rasters including 'bar' of foo-DB
> $ gdalinfo "PG:host=localhost dbname=foo user=postgres table=bar mode=2"
> returns
> "ERROR 1: Error browsing database for PostGIS Raster properties
> gdalinfo failed - unable to open 'PG:host=localhost dbname=foo
> user=postgres table=bar mode=2"
>
> What could be the reason?
>
> Marco
>
> P.S. GDAL 1.8.0, released 2011/01/12 on Ubuntu Lucid with PostGISRaster
> (ro): PostGIS Raster driver
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matze999 at gmail.com  Tue Sep 13 16:14:45 2011
From: matze999 at gmail.com (Matt Funk)
Date: Wed Sep 14 02:13:22 2011
Subject: [gdal-dev] Re: Do we have to know UTM zone a priori to convert
	to UTM from lat/lon
In-Reply-To: <CA+TxYvPwaF5jSS1f_3Y+d7v=GTd6-G9mHFUXs01ZbH39xaYgog@mail.gmail.com>
References: <4E6E7B35.7090402@gmail.com> <4E6E7F11.4050708@gmail.com>
	<1315864689736-6785420.post@n2.nabble.com>
	<1315865236701-6785446.post@n2.nabble.com>
	<4E6E8DDA.6040304@gmail.com>
	<CA+TxYvPwaF5jSS1f_3Y+d7v=GTd6-G9mHFUXs01ZbH39xaYgog@mail.gmail.com>
Message-ID: <4E6FB9B5.3090601@gmail.com>

Hi,
just to finish this out. The snippet below is basically the core of what
i was looking for (in the end it turned out to be relatively simple, but
all things are once done).
All it does it convert a point (specified in WSG84 (lat/lon)) to UTM and
back to WGS84 lat/lon. If someone spots an issue please let me know.

-----------------------------
import osr

def utm_getZone(longitude):
    return (int(1+(longitude+180.0)/6.0))

def utm_isNorthern(latitude):
    if (latitude < 0.0):
        return 0;
    else:
        return 1;


## Fcn:        __main__
#  Purpose:
#  Inputs:    
#  Returns:
#
if __name__ == '__main__':
   
    lat = 38.0; lon  = -50.0
    utm_zone = utm_getZone(lon); #print "utm_zone: "; print utm_zone
    is_northern = utm_isNorthern(lat); #print "is_northern: "; print
is_northern

   
    ## set utm coordinate system
    utm_cs = osr.SpatialReference()
    utm_cs.SetWellKnownGeogCS('WGS84')
    utm_cs.SetUTM(utm_zone,is_northern);
   
    ## set wgs84 coordinate system
    wgs84_cs = utm_cs.CloneGeogCS(); #print "\nwgs84_cs:"; print
wgs84_cs.ExportToPrettyWkt()
   
    ## set the transform wgs84_to_utm and do the transform
    transform_WGS84_To_UTM = osr.CoordinateTransformation(wgs84_cs,utm_cs)
    utm_points = list(transform_WGS84_To_UTM.TransformPoint(lon,lat));
    print "utm_points: "; print utm_points
   
    ## set the transform utm_to_wgs84 and do the transform
    transform_UTM_To_WGS84 = osr.CoordinateTransformation(utm_cs,wgs84_cs)
    latlon_points =
list(transform_UTM_To_WGS84.TransformPoint(utm_points[0],utm_points[1]))
    print "latlon_points: "; print latlon_points
-----------------------------


matt




On 9/13/2011 7:54 AM, Etienne Tourigny wrote:
> Well GDAL has the necessary infrastructure for (almost) anyone to do
> it themselves.
> This type of application is typically handled by python scripts, feel
> free to submit your own when it is ready. It would make a nice
> addition to the python samples in my opinion.
>
> EPSG zones are defined for longitude zones, both north and south (not
> in 8-degree zones), so in GDAL you only need to find the longitudinal
> zone and define if it is north or south.
>
> e.g. from spatialreference.org
> EPSG:32718 -> WGS 84 / UTM zone 18S
> EPSG:32618 -> WGS 84 / UTM zone 18N
>
> Etienne
>
> On Mon, Sep 12, 2011 at 7:55 PM, Matt Funk <matze999@gmail.com> wrote:
>> On 9/12/2011 4:07 PM, Tim Osborn wrote:
>>> I should have said that the above equation is valid for longitudes greater
>>> than or equal to -180.0 and less than +180.0.
>> I assume it is the same to determine the latitude zone (using 8
>> degrees). The one thing though are the exceptions (even though I don't
>> intend to do any computations in those zones) ... . Is it correct then
>> to assume that gdal has no capabilities to return the zone based on a
>> given lat/lon pair? As easy as the code you provided is, it seems that
>> this capability (and the zone exception handling) would be included in
>> gdal ... .
>>
>> either way, thanks
>> matt
>>
>>> --
>>> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Do-we-have-to-know-UTM-zone-a-priori-to-convert-to-UTM-from-lat-lon-tp6785362p6785446.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>


-- 
Matt Funk
Research Associate
Plant and Environmental Scienc. Dept.
New Mexico State University

From jorge.arevalo at deimos-space.com  Tue Sep 13 18:00:06 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed Sep 14 04:04:41 2011
Subject: [gdal-dev] GDAL unable to open PostGIS Raster table
In-Reply-To: <4E6FB566.40609@fossgis.de>
References: <4E6FB2DA.7080005@fossgis.de> <4E6FB566.40609@fossgis.de>
Message-ID: <CAK29iX9sM+jtS5A+oddOQrcNZABi_SKevA_TQ5ETraraGZhpKQ@mail.gmail.com>

Hi Marco,

I'm working on GDAL PostGIS Raster driver, so, don't hesitate to
report any error found.

Best regards,
Jorge

On Tue, Sep 13, 2011 at 9:56 PM, Marco Lechner - FOSSGIS e.V.
<marco.lechner@fossgis.de> wrote:
> fixed. I used Bar instead of bar for table names and therefore had to
> put the table name in ""
>
> Marco
>
> Am 13.09.2011 21:45, schrieb Marco Lechner - FOSSGIS e.V.:
>> Hi,
>>
>> I'm trying to access a PostGIS Rastertable using gdalinfo.
>> While
>> $ gdalinfo "PG:host=localhost dbname=foo user=postgres mode=2"
>> returns all the available rasters including 'bar' of foo-DB
>> $ gdalinfo "PG:host=localhost dbname=foo user=postgres table=bar mode=2"
>> returns
>> "ERROR 1: Error browsing database for PostGIS Raster properties
>> gdalinfo failed - unable to open 'PG:host=localhost dbname=foo
>> user=postgres table=bar mode=2"
>>
>> What could be the reason?
>>
>> Marco
>>
>> P.S. GDAL 1.8.0, released 2011/01/12 on Ubuntu Lucid with PostGISRaster
>> (ro): PostGIS Raster driver
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From jhayes at lizardtech.com  Tue Sep 13 19:37:41 2011
From: jhayes at lizardtech.com (John Hayes)
Date: Wed Sep 14 05:48:36 2011
Subject: [gdal-dev] How do you remove the root AUTHORITY node from a
 OGRSpatialReferenceH?
Message-ID: <93889649-A557-4F7D-8EBF-56D3B8D33736@lizardtech.com>

Hi,
   I need to remove the root AUTHORITY from a OGRSpatialReferenceH object.  I could not find away to do it with the C API.  Am I missing something?

I ended up doing the following:
   OGR_SRSNode *root = static_cast<OGRSpatialReference *>(ref)->GetRoot();
   root->DestroyChild(root->FindChild("AUTHORITY"));

I would prefer to use the C API.  I was hoping something like OSRSetAuthority(ref, targetKey, NULL, 0) could be used.

Thanks,
-john

John Hayes
Senior Software Engineer
LizardTech
p: 206-652-5211
f: 206-652-0880
jhayes@lizardtech.com
www.lizardtech.com
  
Serve up your image data FAST with Express Server 7 now with support for MrSID Generation 4 (MG4?), the latest version of LizardTech?s MrSID format, which enables you to serve out specified bands from multi- and hyperspectral imagery and uses alpha-band transparency for better looking mosaics.



From dshean at uw.edu  Tue Sep 13 21:27:57 2011
From: dshean at uw.edu (David Shean)
Date: Wed Sep 14 07:44:00 2011
Subject: [gdal-dev] gdalwarp artifacts when using RPC_DEM
In-Reply-To: <2F05805A-3F36-44DC-9BB5-AED590A00F9E@uw.edu>
References: <2F05805A-3F36-44DC-9BB5-AED590A00F9E@uw.edu>
Message-ID: <0A03A40E-417B-40E3-B0E5-496E77AC2BF5@uw.edu>

So after reviewing gdal_rpc.cpp, I set my transformation error threshold to 0 (gdalwarp -et option), which certainly slows things down, but eliminates all of the mapping errors I described in my post.  Not sure how I missed that option in the first place, but I'm glad that it was a simple fix.  Lesson learned - always consult the source code before asking for help.  
-David

On Sep 12, 2011, at 5:24 PM, David Shean wrote:

> Hi all,
> I'm having some trouble with artifacts in the output from gdalwarp when using RPCs and a DEM for orthorectification.  The artifacts appear as rows or blocks of rows that repeat swaths of pixels from nearby rows, with variable horizontal extent (often spanning >1000 samples).  They are not coincident with the DEM pixel edges.  Using a different, lower-resolution DEM reduces the number of these artifacts, but they are still present.  I think it is safe to assume that issues with the input DEM are not responsible for the artifacts.  I'm running GDAL 1.8.1 (fink port) on OS X Lion.
> 
> Here is a sample command:
> gdalwarp -of GTiff -ot UInt16 -t_srs EPSG:3413 -multi -r bilinear -rpc -to "RPC_DEM=dem.tif" infile.ntf outfile.tif
> 
> These artifacts are NOT present when mapping with RPCs to a constant height (using the RPC_HEIGHT transformer option).  I have eliminated potential causes related to output projection (both stereographic and sinusoidal are afflicted), interpolation method (tested nn, bilinear and cubic), and various other options (gtiff compression, gtiff tiling, multithreading, etc).  The problem is repeatable, and doesn't appear to be related to hardware limitations or network read/write issues.  Basically, I've spent a full day troubleshooting and I'm running out of ideas.  
> 
> I didn't see anything in the GDAL Trac about this - have these artifacts been documented in the past?  
> 
> I can provide a screenshot if desired.  On the whole, the image appears properly orthorectified, which is fantastic, but these artifacts are problematic for my application.  Thanks for any advice/assistance.
> -David
> 
> ---
> David Shean
> Polar Science Center
> Applied Physics Lab
> University of Washington
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ole.moller.nielsen at gmail.com  Wed Sep 14 06:29:27 2011
From: ole.moller.nielsen at gmail.com (Ole Nielsen)
Date: Wed Sep 14 17:15:15 2011
Subject: [gdal-dev] Fwd: NotImplementedError: Wrong number of arguments
	for overloaded function 'Feature_SetField'.
In-Reply-To: <201109070716.20920.even.rouault@mines-paris.org>
References: <CALcLSfqWm=LmgXSX1SOR7A_bgrC7gO7HUXLxChpNDcnW+m1-DA@mail.gmail.com>
	<1315321850.4e6637fab150e@webmail.free.fr>
	<CALcLSfqwfUCr5jS_+sPbtWb6TbP4A79cs_+GLb7upARHccZxZw@mail.gmail.com>
	<201109070716.20920.even.rouault@mines-paris.org>
Message-ID: <CALcLSfqYybw6sYMyircum-tWs1R+zjWXMtyyt8P7_N621aPs7g@mail.gmail.com>

Thanks muchly.

I implemented the fieldname launderer and the warning suppression - and all
tests pass:
https://github.com/AIFDR/riab/commit/ced28719d4878d4dfc3a70a08aebbd5f98bca744
https://github.com/AIFDR/riab/commit/a1e3632fc452af58d6288771b8528432403b8d0c


Thanks heaps for all your help
Ole


On Wed, Sep 7, 2011 at 12:16 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 07 septembre 2011 02:36:35, Ole Nielsen a ?crit :
> > Yes this seems to work. However, I get a huge amounts of warnings of the
> > form
> >
> > >>> lyr.CreateField(fd)
> >
> > Warning 6: Normalized/laundered field name: 'A slightly long name' to 'A
> > slightly'
> > 0
> >
> > They obviously tell what name has been derived, but I don't want this
> > output to clutter, and since that name is already available through your
> > procedure they really should be suppressed. Can that be done?
>
> Yes, you can surround the CreateField() call with :
>
> gdal.PushErrorHandler('CPLQuietErrorHandler')
> ...
> gdal.PopErrorHandler()
>
> > Many thanks
> > Ole
> >
> > On Tue, Sep 6, 2011 at 10:10 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> > > > Thanks - I was hoping I could rely on the library to do the
> intelligent
> > > > truncation, but couldn't work it out.
> > > > Can I just clarify that the name to use with SetField would then be
> > > > what
> > >
> > > is
> > >
> > > > provided by your last line?
> > > >
> > > >  layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
> > >
> > > Yes
> > >
> > > > Cheers and thanks
> > > > Ole
> > > >
> > > > On Tue, Sep 6, 2011 at 9:26 PM, Even Rouault
> > > >
> > > > <even.rouault@mines-paris.org>wrote:
> > > > > Selon Ole Nielsen <ole.moller.nielsen@gmail.com>:
> > > > > > Hi Even
> > > > > >
> > > > > > Thanks again for all your help - all tests now pass using either
> > > > > > gdal
> > >
> > > 1.6
> > >
> > > > > or
> > > > >
> > > > > > 1.8. Just to summarise, there were three issues as I see them:
> > > > > >    1. Bounding boxes for raster data are computed differently
> (but
> > > > >
> > > > > better)
> > > > >
> > > > > >    in newer versions
> > > > >
> > > > > Specific to PixelIsPoint in the GTiff driver.
> > > > >
> > > > > >    2. While v1.6 of ogre would allow an single number of type
> > > > >
> > > > > numpy.ndarray
> > > > >
> > > > > >    this is no longer allow. Casting it to a float solves the
> > > > > >    problem.
> > > > >
> > > > > I wasn't aware it could work before. There's perhaps now an
> ambiguity
> > >
> > > on
> > >
> > > > > which
> > > > > method to use, due to the addition of new possibilities for
> > > > > SetField() (just a
> > > > > bling guess).
> > > > >
> > > > > >    3. New versions of ogre will not allow attribute names of
> length
> > > > >
> > > > > longer
> > > > >
> > > > > >    than 10 (at least when using the ESRI driver). Formerly, I
> think
> > >
> > > it
> > >
> > > > > > silently
> > > > > >
> > > > > >    truncated, now it is up to the user. That's at least what I
> did.
> > > > >
> > > > > I've a looked quickly a bit at your code and I've the feeling that
> > > > > you truncate
> > > > > yourself, instead of relying on OGR. The Shapefile driver does more
> > >
> > > than
> > >
> > > > > truncating. It also ensures uniqueness of the truncated names. For
> > >
> > > example,
> > >
> > > > > if
> > > > > you try creating "a_very_long_name" and "a_very_long_name_again",
> > > > > they
> > >
> > > will
> > >
> > > > > be
> > > > > respectively truncated to "a_very_lon" and "a_very_l_1". A safer
> > >
> > > solution
> > >
> > > > > to get
> > > > > the field name that got to the file would be to :
> > > > >
> > > > > field_defn = ogr.FieldDefn("a_very_long_name", ogr.OFTString)
> > > > > lyr.CreateField(field_defn)
> > > > > layer_defn = lyr.GetLayerDefn()
> > > > > last_field_idx = layer_defn.GetFieldCount() - 1
> > > > > real_field_name =
> > > > > layer_defn.GetFieldDefn(last_field_idx).GetNameRef()
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110914/3533e8f9/attachment.html
From peifer at gmx.eu  Wed Sep 14 09:18:38 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Sep 14 20:13:59 2011
Subject: [gdal-dev] OGR FileGDB driver: ERROR 1: 'OBJECTID' not recognised
 as an available field.
Message-ID: <4E70A9AE.6060203@gmx.eu>


Hi All,

I am not quite sure if this is a feature or rather a bug, but OGR's 
-where switch seems to be aware of the OBJECTID field in a FileGDB, 
whereas the -sql option reports: 'OBJECTID' not recognised as an 
available field, see below.

Would it be worth filing a ticket?

Hermann


$ ogrinfo -al -so out.gdb
INFO: Open of `out.gdb'
       using driver `FileGDB' successful.

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 9
Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
FID Column = OBJECTID
Geometry Column = SHAPE
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
$
$ ogrinfo -q -geom=no out.gdb eea_1Kgrid -where OBJECTID=1

Layer name: eea_1Kgrid
OGRFeature(eea_1Kgrid):1
   CELLCODE (String) = E1647N1038
   Shape_Length (Real) = 0.0383874724895616
   Shape_Area (Real) = 9.18055152110593e-05

$ ogrinfo -q -geom=no out.gdb -sql "select * from eea_1Kgrid where 
OBJECTID=1"
ERROR 1: 'OBJECTID' not recognised as an available field.
$

From peifer at gmx.eu  Wed Sep 14 10:01:47 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Sep 14 20:59:28 2011
Subject: [gdal-dev] OGR FileGDB driver: Failed at creating table ...
 (General function failure.)
Message-ID: <4E70B3CB.4090002@gmx.eu>

Hi again,

Once I am at it, I could also report another issue with the FileGDB driver.

The driver re-projects my test geodatabase from WGS84 to NAD83 without 
any problems, but when trying to re-project to EPSG:3035 (ETRS89/LAEA 
Europe), I end up with a "General function failure", see more details below.

I am not sure what the actual issue is, but a quick Internet search 
suggests that the FileGDB API's "General function failure" might be 
related to problems with understanding the SRS. Maybe OGR's SRS 
definition is not "ESRI-friendly" enough when trying to create the 
geodatabase(?). According to my experience, the classic problem with the 
LAEA projection is the parameter name: "Central_Meridian"(ESRI) versus 
"longitude_of_center" (GDAL/OGR).

Would it be worth filing a ticket?

Hermann



$ ogrinfo -al -so out.gdb
INFO: Open of `out.gdb'
       using driver `FileGDB' successful.

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 9
Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
FID Column = OBJECTID
Geometry Column = SHAPE
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
$
$
$ ogr2ogr -f filegdb out_4269.gdb out.gdb -t_srs epsg:4269
$ ogrinfo -al -so out_4269.gdb
INFO: Open of `out_4269.gdb'
       using driver `FileGDB' successful.

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 9
Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
Layer SRS WKT:
GEOGCS["NAD83",
     DATUM["North_American_Datum_1983",
         SPHEROID["GRS 1980",6378137,298.257222101,
             AUTHORITY["EPSG","7019"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6269"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4269"]]
FID Column = OBJECTID
Geometry Column = SHAPE
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
$
$ ogr2ogr -f filegdb out_3035.gdb out.gdb -t_srs epsg:3035
ERROR 1: Error: Failed at creating table for \eea_1Kgrid (General 
function failure.)
ERROR 1: Terminating translation prematurely after failed
translation of layer eea_1Kgrid (use -skipfailures to skip errors)

From pramsey at opengeo.org  Thu Sep 15 00:17:00 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Sep 15 12:09:29 2011
Subject: [gdal-dev] OGR FileGDB driver: ERROR 1: 'OBJECTID' not recognised
	as an available field.
In-Reply-To: <4E70A9AE.6060203@gmx.eu>
References: <4E70A9AE.6060203@gmx.eu>
Message-ID: <CACowWR3dVb1Pn1x4zQLMhfanhcRSHLM93e_Gvxmsg7eAGFFVLA@mail.gmail.com>

Interesting. I wonder if this is a mismatch between FGDB considering
the fid to be a column and ogr considering it to be something more
intrinsic... I think it warrants a ticket unless other layer types
misbehave in a similar way.

P.

On Wed, Sep 14, 2011 at 7:18 AM, Hermann Peifer <peifer@gmx.eu> wrote:
>
> Hi All,
>
> I am not quite sure if this is a feature or rather a bug, but OGR's -where
> switch seems to be aware of the OBJECTID field in a FileGDB, whereas the
> -sql option reports: 'OBJECTID' not recognised as an available field, see
> below.
>
> Would it be worth filing a ticket?
>
> Hermann
>
>
> $ ogrinfo -al -so out.gdb
> INFO: Open of `out.gdb'
> ? ? ?using driver `FileGDB' successful.
>
> Layer name: eea_1Kgrid
> Geometry: Multi Polygon
> Feature Count: 9
> Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
> Layer SRS WKT:
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4326"]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> CELLCODE: String (0.0)
> Shape_Length: Real (0.0)
> Shape_Area: Real (0.0)
> $
> $ ogrinfo -q -geom=no out.gdb eea_1Kgrid -where OBJECTID=1
>
> Layer name: eea_1Kgrid
> OGRFeature(eea_1Kgrid):1
> ?CELLCODE (String) = E1647N1038
> ?Shape_Length (Real) = 0.0383874724895616
> ?Shape_Area (Real) = 9.18055152110593e-05
>
> $ ogrinfo -q -geom=no out.gdb -sql "select * from eea_1Kgrid where
> OBJECTID=1"
> ERROR 1: 'OBJECTID' not recognised as an available field.
> $
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From sksupak at ncsu.edu  Thu Sep 15 01:11:54 2011
From: sksupak at ncsu.edu (Stacy Supak)
Date: Thu Sep 15 12:59:36 2011
Subject: [gdal-dev] Ogr2ogr datum shift
Message-ID: <B55F665E-31EA-4254-A46C-3550D9FFBED1@ncsu.edu>

Hi community,

Is there a way to add a datum shift parameter to a reprojected shp in an ogr2ogr call? 

I am using ogr2ogr to extract a shp from a postgis database and within the command I am reprojecting features from google Mercator to EPSG 4326. In the process of going from a spherical coordinate system to an elliptical one, the latitude of the  shp is shifted north by .18 degrees. I was informed by a knowledgable member of the listserve that cs2cs could solve this problem, but can this command work on vector data or just coordinates? If it is possible to use cs2cs on a shp, do I simply run the command immediately after the ogr2ogr command?

Thanks,
Stacy

> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110914/7f72d2c7/attachment.html
From peifer at gmx.eu  Thu Sep 15 03:06:22 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep 15 15:00:24 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: ERROR 1: 'OBJECTID' not
 recognised as an available field.
In-Reply-To: <CACowWR3dVb1Pn1x4zQLMhfanhcRSHLM93e_Gvxmsg7eAGFFVLA@mail.gmail.com>
References: <4E70A9AE.6060203@gmx.eu>
	<CACowWR3dVb1Pn1x4zQLMhfanhcRSHLM93e_Gvxmsg7eAGFFVLA@mail.gmail.com>
Message-ID: <4E71A3EE.1060808@gmx.eu>

On 15/09/2011 06:17, Paul Ramsey wrote:
> Interesting. I wonder if this is a mismatch between FGDB considering
> the fid to be a column and ogr considering it to be something more
> intrinsic... I think it warrants a ticket unless other layer types
> misbehave in a similar way.
>
> P.
>

Being an (innocent) GDAL user, I wouldn't know where the (mis-)behaviour 
comes from. I will file a ticket. I just noted another issue related to 
column OBJECTID:

In another FileGDB, I have 2 layers: a simple table without geometry 
(FSTA2009_grid) and a FeatureClass with polygon geometry (eea_1Kgrid).

Table FSTA2009_grid seems to have a FID column which has 2 names at the 
same time: OBJECTID_1 and OBJECTID, see [1]

ogrinfo -where understands both: OBJECTID_1 and OBJECTID, see [2]

ogrinfo -sql only understands OBJECTID, see [3]

Hermann


[1]

$ ogrinfo -al -so FSTA2009_grid.gdb
INFO: Open of `FSTA2009_grid.gdb'
       using driver `FileGDB' successful.

Layer name: FSTA2009_grid
Geometry: None
Feature Count: 4735968
Layer SRS WKT:
(unknown)
FID Column = OBJECTID_1
OBJECTID: Integer (0.0)
CELLCODE: String (0.0)
FGA1_M: Real (0.0)
FGA1_S: Real (0.0)
FGA2_M: Real (0.0)
FGA2_S: Real (0.0)
FGB2_M: Real (0.0)
FGB2_S: Real (0.0)

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 4948506
Extent: (1547000.000100, 940999.999400) - (6525999.999900, 5416162.796700)
Layer SRS WKT:
PROJCS["ETRS89 / LAEA Europe",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AXIS["Y",NORTH],
     AXIS["X",EAST],
     AUTHORITY["EPSG","3035"]]
FID Column = OBJECTID
Geometry Column = Shape
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
$


[2]

$ ogrinfo -q FSTA2009_grid.gdb FSTA2009_grid -where OBJECTID_1=1

Layer name: FSTA2009_grid
OGRFeature(FSTA2009_grid):1
   OBJECTID (Integer) = 1
   CELLCODE (String) = E1647N1038
   FGA1_M (Real) = 365.10730848
   FGA1_S (Real) = 2.73892079609
   FGA2_M (Real) = 71.7346430224
   FGA2_S (Real) = 13.9402659282
   FGB2_M (Real) = 71.7751336583
   FGB2_S (Real) = 13.9324017808

$ ogrinfo -q FSTA2009_grid.gdb FSTA2009_grid -where OBJECTID=1

Layer name: FSTA2009_grid
OGRFeature(FSTA2009_grid):1
   OBJECTID (Integer) = 1
   CELLCODE (String) = E1647N1038
   FGA1_M (Real) = 365.10730848
   FGA1_S (Real) = 2.73892079609
   FGA2_M (Real) = 71.7346430224
   FGA2_S (Real) = 13.9402659282
   FGB2_M (Real) = 71.7751336583
   FGB2_S (Real) = 13.9324017808


[3]

$ ogrinfo -q FSTA2009_grid.gdb -sql "select * from FSTA2009_grid where 
OBJECTID_1=1"
ERROR 1: 'OBJECTID_1' not recognised as an available field.

$ ogrinfo -q FSTA2009_grid.gdb -sql "select * from FSTA2009_grid where 
OBJECTID=1"

Layer name: FSTA2009_grid
OGRFeature(FSTA2009_grid):1
   OBJECTID (Integer) = 1
   CELLCODE (String) = E1647N1038
   FGA1_M (Real) = 365.10730848
   FGA1_S (Real) = 2.73892079609
   FGA2_M (Real) = 71.7346430224
   FGA2_S (Real) = 13.9402659282
   FGB2_M (Real) = 71.7751336583
   FGB2_S (Real) = 13.9324017808
From Michael.Smith at usace.army.mil  Thu Sep 15 07:28:23 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Sep 15 19:37:56 2011
Subject: [gdal-dev] OGR FileGDB driver: Failed at creating table ...
	(General function failure.)
In-Reply-To: <4E70B3CB.4090002@gmx.eu>
Message-ID: <CA973CCA.13D09%michael.smith@usace.army.mil>

I've run into this. It seems to be that there are only certain projections
that are supported in FileGDB. I tried to convert data in to the Spherical
Mercator projection and none of the projections I used (either epsg, esri
epsg, or esri wkt) would work. I believe that Even R. determined that it
was a limitation of the FileGDB API currently.

A ticket should be filed so that this can be documented.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 9/14/11 8:01 AM, "Hermann Peifer" <peifer@gmx.eu> wrote:

>Hi again,
>
>Once I am at it, I could also report another issue with the FileGDB
>driver.
>
>The driver re-projects my test geodatabase from WGS84 to NAD83 without
>any problems, but when trying to re-project to EPSG:3035 (ETRS89/LAEA
>Europe), I end up with a "General function failure", see more details
>below.
>
>I am not sure what the actual issue is, but a quick Internet search
>suggests that the FileGDB API's "General function failure" might be
>related to problems with understanding the SRS. Maybe OGR's SRS
>definition is not "ESRI-friendly" enough when trying to create the
>geodatabase(?). According to my experience, the classic problem with the
>LAEA projection is the parameter name: "Central_Meridian"(ESRI) versus
>"longitude_of_center" (GDAL/OGR).
>
>Would it be worth filing a ticket?
>
>Hermann
>
>
>
>$ ogrinfo -al -so out.gdb
>INFO: Open of `out.gdb'
>       using driver `FileGDB' successful.
>
>Layer name: eea_1Kgrid
>Geometry: Multi Polygon
>Feature Count: 9
>Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
>Layer SRS WKT:
>GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
>FID Column = OBJECTID
>Geometry Column = SHAPE
>CELLCODE: String (0.0)
>Shape_Length: Real (0.0)
>Shape_Area: Real (0.0)
>$
>$
>$ ogr2ogr -f filegdb out_4269.gdb out.gdb -t_srs epsg:4269
>$ ogrinfo -al -so out_4269.gdb
>INFO: Open of `out_4269.gdb'
>       using driver `FileGDB' successful.
>
>Layer name: eea_1Kgrid
>Geometry: Multi Polygon
>Feature Count: 9
>Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
>Layer SRS WKT:
>GEOGCS["NAD83",
>     DATUM["North_American_Datum_1983",
>         SPHEROID["GRS 1980",6378137,298.257222101,
>             AUTHORITY["EPSG","7019"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6269"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4269"]]
>FID Column = OBJECTID
>Geometry Column = SHAPE
>CELLCODE: String (0.0)
>Shape_Length: Real (0.0)
>Shape_Area: Real (0.0)
>$
>$ ogr2ogr -f filegdb out_3035.gdb out.gdb -t_srs epsg:3035
>ERROR 1: Error: Failed at creating table for \eea_1Kgrid (General
>function failure.)
>ERROR 1: Terminating translation prematurely after failed
>translation of layer eea_1Kgrid (use -skipfailures to skip errors)
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

From wouter.schaubroeck at gmail.com  Thu Sep 15 10:08:18 2011
From: wouter.schaubroeck at gmail.com (Wouter Schaubroeck)
Date: Thu Sep 15 22:32:29 2011
Subject: [gdal-dev] error compiling gdal with ArcSDE support
Message-ID: <CAMV_oz3XtKVd3-90UQ4geRyK7pdkvGeoq9bxp3XQw3CJB874kQ@mail.gmail.com>

Hi list,

I'm trying to compile gdal from source with added ArcSDE support, but it
doesn't compile. I get this error:

libsde.so: undefined reference to `pthread_atfork'

My configure command looks like this:
./configure --with-sde=/home/sde/bin/sde100/sdeexe100/
--with-sde-version=100 --prefix=/home/tux/bin/gdal/app/

I'm compile on a fully patched and up to date OpenSuSE:
Linux ospgsql 2.6.37.6-0.7-default #1 SMP 2011-07-21 02:17:24 +0200 x86_64
x86_64 x86_64 GNU/Linux

Do any of you guys know what the problem is? I've already tried the
following:
- disabling the multi threads: --with-threads=no
- specifically included the libpthread.so.0 in the LD_LIBRARY_PATH

Thanks in advance,

Wouter
--
Wouter
http://blog.giswhat.be
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110915/d0ddb675/attachment.html
From warmerdam at pobox.com  Thu Sep 15 10:27:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 15 22:45:46 2011
Subject: [gdal-dev] Ogr2ogr datum shift
In-Reply-To: <B55F665E-31EA-4254-A46C-3550D9FFBED1@ncsu.edu>
References: <B55F665E-31EA-4254-A46C-3550D9FFBED1@ncsu.edu>
Message-ID: <CA+YzLBd9Q7dqN2giEA1dhC1SN9wBbrVGJ7FPC+RC9ATbMkQb+g@mail.gmail.com>

Stacey,

You should not need to use cs2cs - pretty much the same capabilities
are available from the ogr2ogr command line.  What command are you
using now?  And what version of GDAL/OGR?   With modern versions the
following command should work well:

 ogr2ogr -s_srs EPSG:3857 -t_srs EPSG:4326 out.shp in.shp

EPSG:3857 should evaluate to the following PROJ.4 string.

 +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0
        +x_0=0.0 +y_0=0 +k=1.0 +units=m
        +nadgrids=@null +wktext  +no_defs

Adding " --debug on " to the commandline may be helpful to
confirm the coordinate system strings being used internally.

Best regards,

On Wed, Sep 14, 2011 at 11:11 PM, Stacy Supak <sksupak@ncsu.edu> wrote:
> Hi community,
>
> Is there a way to add a datum shift parameter to a reprojected shp in an
> ogr2ogr call?
> I am using ogr2ogr to extract a shp from a postgis database and within the
> command I am reprojecting features from google Mercator to EPSG 4326. In the
> process of going from a spherical coordinate system to an elliptical one,
> the latitude of the  shp is shifted north by .18 degrees. I was informed by
> a knowledgable member of the listserve that cs2cs could solve this problem,
> but can this command work on vector data or just coordinates? If it is
> possible to use cs2cs on a shp, do I simply run the command immediately
> after the ogr2ogr command?
> Thanks,
> Stacy

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From peifer at gmx.eu  Thu Sep 15 10:46:11 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep 15 23:05:24 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
 (General function failure.)
In-Reply-To: <CA973CCA.13D09%michael.smith@usace.army.mil>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
Message-ID: <4E720FB3.7030409@gmx.eu>

AFAICT, the issue is not so much that the FileGDB only supports certain 
projections, but that it only accepts a very specific WKT string for a 
given SRS. A single character of difference can cause the FileGDB API to 
not recognise the SRS, then fall back to a "General function failure".

GDAL/OGR has its own WKT definition of a given SRS, which is slightly 
different to ESRI's WKT of the same SRS. I noted that when creating a 
FileGDB, GDAL/OGR tries to ESRI'ify its WKT through the morphToESRI() 
function. For EPSG:3035, the result is obviously not "ESRI-friendly" 
enough. In fact, it is not what I first thought: an issue with the 
parameter name (Central_Meridian versus longitude_of_center) but simply 
the SRS's string identifier which causes the problem.

My quick-fix:
I edited ../local/share/gdal/pcs.csv and changed "ETRS89 / LAEA Europe" 
into "ETRS 1989 / LAEA", ..et voil?: the error is gone. "ETRS 1989 / 
LAEA" is ESRI'ified into "ETRS_1989_LAEA", which is exactly the expected 
string for this SRS.

I am not sure if it is worth filing a ticket for this specific case, as 
it is part of a wider ESRI-WKT-versus-GDAL/OGR-WKT dilemma, which in 
return is known already, see e.g. Uwe's post from some days ago.

Hermann


On 15/09/2011 13:28, Smith, Michael ERDC-CRREL-NH wrote:
> I've run into this. It seems to be that there are only certain projections
> that are supported in FileGDB. I tried to convert data in to the Spherical
> Mercator projection and none of the projections I used (either epsg, esri
> epsg, or esri wkt) would work. I believe that Even R. determined that it
> was a limitation of the FileGDB API currently.
>
> A ticket should be filed so that this can be documented.
>
> Mike
>
From peifer at gmx.eu  Fri Sep 16 05:16:54 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Sep 16 18:37:30 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
 (General function failure.)
In-Reply-To: <4E720FB3.7030409@gmx.eu>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu>
Message-ID: <4E731406.4050401@gmx.eu>

On 15/09/2011 16:46, Hermann Peifer wrote:
>
> My quick-fix:
> I edited ../local/share/gdal/pcs.csv and changed "ETRS89 / LAEA Europe"
> into "ETRS 1989 / LAEA", ..et voil?: the error is gone. "ETRS 1989 /
> LAEA" is ESRI'ified into "ETRS_1989_LAEA", which is exactly the expected
> string for this SRS.
>
> I am not sure if it is worth filing a ticket for this specific case, as
> it is part of a wider ESRI-WKT-versus-GDAL/OGR-WKT dilemma, which in
> return is known already, see e.g. Uwe's post from some days ago.
>

I am not sure if people are still interested but for the sake of the 
exercise I just created a new FileGDB by assigning a "spatial reference" 
which only contains ESRI's string identifier of EPSG:3035, see [1]. This 
works fine and does not generate any error. However, any minor change in 
the string "ETRS_1989_LAEA" leads to the FileGDB API's "General function 
failure".

Frank, Even, Paul, et al.:
Could it perhaps make sense if the morphToESRI() function paid more 
attention to these string identifiers in order to produce even more 
"ESRI-friendly" WKT?

Hermann



[1]

$ ogr2ogr -f filegdb out.gdb in.gdb -a_srs nonsense.wkt

$ cat nonsense.wkt
PROJCS["ETRS_1989_LAEA"]

$ ogrinfo -al -so out.gdb
OGR: OGROpen(out.gdb/0x7a2240) succeeded as FileGDB.
INFO: Open of `out.gdb'
       using driver `FileGDB' successful.

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 9
Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
Layer SRS WKT:
PROJCS["ETRS_1989_LAEA",
     UNIT["Meter",1]]
FID Column = OBJECTID
Geometry Column = SHAPE
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)

From pramsey at opengeo.org  Fri Sep 16 10:49:08 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sat Sep 17 00:27:58 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
	(General function failure.)
In-Reply-To: <4E731406.4050401@gmx.eu>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu> <4E731406.4050401@gmx.eu>
Message-ID: <CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>

On Fri, Sep 16, 2011 at 3:16 AM, Hermann Peifer <peifer@gmx.eu> wrote:
> Frank, Even, Paul, et al.:
> Could it perhaps make sense if the morphToESRI() function paid more
> attention to these string identifiers in order to produce even more
> "ESRI-friendly" WKT?

Yes, probably we will have to. I wonder how we would go about figuring
out the relevant differences...? In the meanwhile, since you've found
that using the WKID works perhaps in the FGDB driver we can try and
avoid using the WKT at all when we have a WKID available.

P
From peifer at gmx.eu  Fri Sep 16 11:51:11 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Sep 17 01:33:36 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
	(General function failure.)
In-Reply-To: <CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu> <4E731406.4050401@gmx.eu>
	<CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
Message-ID: <4E73706F.60503@gmx.eu>

On 16/09/2011 16:49, Paul Ramsey wrote:
> On Fri, Sep 16, 2011 at 3:16 AM, Hermann Peifer<peifer@gmx.eu>  wrote:
>> Frank, Even, Paul, et al.:
>> Could it perhaps make sense if the morphToESRI() function paid more
>> attention to these string identifiers in order to produce even more
>> "ESRI-friendly" WKT?
>
> Yes, probably we will have to. I wonder how we would go about figuring
> out the relevant differences...? In the meanwhile, since you've found
> that using the WKID works perhaps in the FGDB driver we can try and
> avoid using the WKT at all when we have a WKID available.
>
> P


Isn't the WKID a numeric identifier, and not the string identifier I was 
mentioning in my previous mail (?)

My little exercise only showed that with an appropriate string in the 
WKT (here: "ETRS_1989_LAEA"), the "General function failure" can be 
avoided when creating out.gdb through the FileGDB driver. It doesn't 
mean that the string value "ETRS_1989_LAEA" is enough to define a valid 
spatial reference.

When opening the generated out.gdb in ArcCatalog, I get a "General 
function failure", "Cannot read SRS..." failure. AFAICT: in order to 
create a meaningful spatial reference, the complete WKT has to be passed 
over: morphed string identifiers, morphed projection and parameter 
names. etc.

Hermann

From thasero at gmail.com  Fri Sep 16 11:57:35 2011
From: thasero at gmail.com (Evan James)
Date: Sat Sep 17 01:40:17 2011
Subject: [gdal-dev] Installing GDAL Python on OS X, "flat namespace" error
Message-ID: <CACF678LL-RYbuzUcP65kG9XmBh71OhdiOoJ6+hCNE_BGPSSQVA@mail.gmail.com>

Hi folks,

I'm trying to use the GDAL library as part of a Python application I need to
run.  Specifically, there's an open source project that no longer runs on
Lion, and I've been updating a few settings to try and re-build the
standalone application for OS X users.  The application depends on GDAL
Python.

The problem I run into is the "flat namespace" error:

File
"/Library/Python/2.7/site-packages/GDAL-1.7.1-py2.7-macosx-10.7-intel.egg/osgeo/__init__.py",
line 21, in <module>
    _gdal = swig_import_helper()
  File
"/Library/Python/2.7/site-packages/GDAL-1.7.1-py2.7-macosx-10.7-intel.egg/osgeo/__init__.py",
line 17, in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError:
dlopen(/Library/Python/2.7/site-packages/GDAL-1.7.1-py2.7-macosx-10.7-intel.egg/osgeo/_gdal.so,
2): Symbol not found: _CPLDefaultErrorHandler
  Referenced from:
/Library/Python/2.7/site-packages/GDAL-1.7.1-py2.7-macosx-10.7-intel.egg/osgeo/_gdal.so
  Expected in: flat namespace
 in
/Library/Python/2.7/site-packages/GDAL-1.7.1-py2.7-macosx-10.7-intel.egg/osgeo/_gdal.so

Some research tells me that this is a common issue with Python package
management on OS X.  I've found a previous message about this on the list -
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026051.html - but
it's an explanation for the issue rather than a way to resolve it.

Unfortunately, all I know about Python package management is what I've
learned trying to run setup.py to build the OS X standalone, so I don't have
a clue how to resolve the import error.

The version of GDAL listed in the error message above is the only one I have
installed on my machine; I suspected a MacPorts problem and cleaned out my
library paths.  If I delete the GDAL library from the path listed in the
error message, Python no longer finds any GDAL at all.  Doing a clean
reinstall from the GDAL 1.7.1 release recreates the same library, flat
namespace error and all.  So it's not an issue with conflicting libraries.

Because I'm trying to use the GDAL library as part of Python code written by
someone else and which is only somewhat maintained for OS X, it's possible
that the way it imports GDAL is the problem - if the code worked on the
original author's machine but not mine.  But all I have there is the line
"from osgeo import gdal", which should work as far as I can tell from the
documentation.

Any suggestions?

Thanks,
Evan James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110916/bc6c4cc4/attachment.html
From jgrn at illinois.edu  Fri Sep 16 17:27:17 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Sat Sep 17 08:29:34 2011
Subject: [gdal-dev] GIS Lecturer position at the University of Illinois at
	Urbana-Champaign
Message-ID: <CABG0rfu7=odtc_u2Xc8Pk_ymm9npf_75pmPu5po58OExOi0vtA@mail.gmail.com>

[Colleagues: Please forward this to any interested parties. Thanks!]

The Department of Geography in the School of Earth, Society and
Environment at the University of Illinois at Urbana-Champaign is
looking for a Lecturer to fill a key teaching position in our
Geographic Information Science curriculum. We seek a dynamic, highly
motivated individual who will contribute substantively to the growth
and development of our GIS programs at the undergraduate and graduate
levels. Primary responsibilities will include teaching classroom-based
and online courses in GIS at introductory and advanced levels and
developing and teaching new online courses for an undergraduate GIS
certificate program. The opportunity to teach non-GIS courses also
exists based on the Lecturer's expertise. Experience with curriculum
development and current GIS technologies will be an asset.

This position requires a PhD degree in Geography or a closely related
field: Applicants with a demonstrated track record of high quality
college- or university-level teaching experience, including online
instruction, are favored. Excellent communication skills and a strong
desire to create new and innovative course materials will enhance an
application.

This position is a 9-month full-time academic appointment (non-tenure
track). Salary is competitive and based on experience. The desired
start date is January 1, 2012, but the timing is negotiable. The
appointment will initially be for three years, reviewable each year,
and renewable thereafter contingent on funding and strong performance
reviews.

To apply, create your candidate profile through
http://jobs.illinois.edu and upload your application materials: a
letter of application, including a concise statement of curriculum
development and teaching experience; CV (including phone number);
contact information for three professional references; and teaching
evaluations, if available. Referees will be contacted electronically
upon submission of the application. In order to ensure full
consideration, applications must be received by October 15, 2011. The
department highly recommends that complete applications be submitted
early to ensure that letter of recommendation writers have enough time
to submit their letters by the letter of reference deadline of October
22, 2011. Only electronic applications will be accepted. Applicants
may be interviewed before the closing date; however, no hiring
decision will be made until after that date.

Please contact Susan Etter, etter1@illinois.edu or 217-333-1880 if you
have questions.

Illinois is an Affirmative Action /Equal Opportunity Employer and
welcomes individuals with diverse backgrounds, experiences, and ideas
who embrace and value diversity and inclusivity.
(www.inclusiveillinois.illinois.edu)
From j.l.h.hartmann at uva.nl  Sat Sep 17 07:10:48 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Sep 17 21:56:55 2011
Subject: [gdal-dev] Numerical instability with thin plate spline transform
In-Reply-To: <201109090811.06465.even.rouault@mines-paris.org>
References: <4E64E0CC.1070000@uva.nl> <4E68B3D7.9090906@uva.nl>
	<CAOJmFz-YwcObBi95Rbig8-Z1rj4FLTx2eGt3CDyadaHfUi0HKA@mail.gmail.com>
	<201109090811.06465.even.rouault@mines-paris.org>
Message-ID: <4E748038.2090706@uva.nl>



On 09/09/2011 08:11 AM, Even Rouault wrote:
> You might try latest GDAL trunk, in particular 
> http://trac.osgeo.org/gdal/changeset/22876 . It offers the option to 
> use libarmadillo to speed-up matrix inversion in thinplatespline.cpp 
> (speed-up when TPS are in the thousands), but perhaps as a side 
> effect, you'd get also more numerical stability.

I tried to compile the SVN version a few times the last couple of days, 
but it always broke down: Can someone do a "make clean" in their sandbox 
and repair the error?

  g++ -fPIC -L/home/a907hart/local/lib -L/usr/lib  gdaldem.o 
commonutils.o  -L/home/a907hart/src/gdal -lgdal  -larmadillo 
-L/home/a907hart/local/lib -lgeos_c -L/home/a907hart/local/pgsql/lib 
-lpq -lpthread -lm -lrt -ldl  -L/home/a907hart/local/lib   
-lcurl            -o gdaldem
gdaldem.o:(.data.rel.ro._ZTV21GDALGeneric3x3Dataset[vtable for 
GDALGeneric3x3Dataset]+0x30): undefined reference to 
`GDALDataset::CloseDependentDatasets()'
gdaldem.o:(.data.rel.ro._ZTV22GDALColorReliefDataset[vtable for 
GDALColorReliefDataset]+0x30): undefined reference to 
`GDALDataset::CloseDependentDatasets()'


Jan

>> On Thu, Sep 8, 2011 at 5:23 AM, Jan Hartmann<j.l.h.hartmann@uva.nl>  wrote:
>>> Not sure whether this can be considered a bug, so I give it for what it
>>> is worth.
>>>
>>> I'm doing thin plate spline transformation from one set of projected
>>> coordinates to another. Both sets have values between -600000 and 600000
>>> (meters). A typical set of gcps looks like:
>>>
>>>   -gcp 62402 -74383 181915 315371 \
>>>   -gcp -100169 -24213 19685 366661 \
>>>   -gcp 118323 233822 239994 623190 \
>>> ...
>>>
>>> When transforming the the first two columns of this list with
>>> gdaltransform -tps, using the same gcp-list, the results should be
>>> exactly equal to the last two columns:
>>>
>>>   (from gdal_tps.cpp:)
>>>   * The thin plate spline transformer produces exact transformation
>>>   * at all control points and smoothly varying transformations between
>>>   * control points with greatest influence from local control points.
>>>   * It is suitable for for many applications not well modelled by
>>> polynomial * transformations.
>>>   *
>>>
>>>
>>> However, they aren't. With a few control points the differences are only
>>> in millimeters, but with a few hundred gcps the differences become
>>> meters, and above thousand points the error can get to fifty meters. The
>>> problem gets worse when some control points are very near to other ones.
>>> I was happy to discover that dividing all numbers by 1000 solves the
>>> problem, but there certainly is a numerical instability in the
>>> algorithm.
>>>
>>> Of course, thin plate spline transformations normally use scan
>>> coordinates as input, and these are almost always small numbers. Even
>>> so, I can imagine problems with very large rasters and the rubber
>>> sheeting applications I am working with.
>>>
>>> Jan
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110917/58a68ce7/attachment.html
From multiquadric at gmail.com  Mon Sep 19 01:27:41 2011
From: multiquadric at gmail.com (David Fogel)
Date: Mon Sep 19 18:33:21 2011
Subject: [gdal-dev] Numerical instability with thin plate spline transform
In-Reply-To: <4E748038.2090706@uva.nl>
References: <4E64E0CC.1070000@uva.nl> <4E68B3D7.9090906@uva.nl>
	<CAOJmFz-YwcObBi95Rbig8-Z1rj4FLTx2eGt3CDyadaHfUi0HKA@mail.gmail.com>
	<201109090811.06465.even.rouault@mines-paris.org>
	<4E748038.2090706@uva.nl>
Message-ID: <CAJ5OYxDr_69WPSNCJZ181py9ijKNewemX02ryP-2DqzUWHPJOA@mail.gmail.com>

As I have indicated previously, a change in method beyond a more
robust linear solver is required.  I have taken the time to fool with
Armadillo.  At the very least I can pass along a trick to improve the
numerical accuracy.. some.

It would help me if you would share the data because I could actually
generate code and an example with real data.  At the same time, I have
never used the TPS option with gdalwarp so it would speed the learning
curve for me (though it looks simple enough).

If you are uncomfortable sharing all the data, the considering sending
the points.  Even as an attachment.  I can do a check to see if you
have a chance with Armadillo w/o additional work.

Please understand that I am not trying to be difficult, but rather
efficient.  I will share comment with Even R. and Frank W. later
Monday or Tuesday with enough information for some triage.  A more
robust solution will follow.  I have the code for this problem that
merely needs some additional notes so that we can all move ahead in a
productive manner.

Best
= David

On Sat, Sep 17, 2011 at 4:10 AM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
>
>
> On 09/09/2011 08:11 AM, Even Rouault wrote:
>
> You might try latest GDAL trunk, in particular
> http://trac.osgeo.org/gdal/changeset/22876 . It offers the option to use
> libarmadillo to speed-up matrix inversion in thinplatespline.cpp (speed-up
> when TPS are in the thousands), but perhaps as a side effect, you'd get also
> more numerical stability.
>
> I tried to compile the SVN version a few times the last couple of days, but
> it always broke down: Can someone do a "make clean" in their sandbox and
> repair the error?
>
> ?g++ -fPIC -L/home/a907hart/local/lib -L/usr/lib? gdaldem.o commonutils.o
> -L/home/a907hart/src/gdal -lgdal? -larmadillo -L/home/a907hart/local/lib
> -lgeos_c -L/home/a907hart/local/pgsql/lib -lpq -lpthread -lm -lrt -ldl
> -L/home/a907hart/local/lib?? -lcurl??????????? -o gdaldem
> gdaldem.o:(.data.rel.ro._ZTV21GDALGeneric3x3Dataset[vtable for
> GDALGeneric3x3Dataset]+0x30): undefined reference to
> `GDALDataset::CloseDependentDatasets()'
> gdaldem.o:(.data.rel.ro._ZTV22GDALColorReliefDataset[vtable for
> GDALColorReliefDataset]+0x30): undefined reference to
> `GDALDataset::CloseDependentDatasets()'
>
>
> Jan
>
> On Thu, Sep 8, 2011 at 5:23 AM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
>
> Not sure whether this can be considered a bug, so I give it for what it
> is worth.
>
> I'm doing thin plate spline transformation from one set of projected
> coordinates to another. Both sets have values between -600000 and 600000
> (meters). A typical set of gcps looks like:
>
>  -gcp 62402 -74383 181915 315371 \
>  -gcp -100169 -24213 19685 366661 \
>  -gcp 118323 233822 239994 623190 \
> ...
>
> When transforming the the first two columns of this list with
> gdaltransform -tps, using the same gcp-list, the results should be
> exactly equal to the last two columns:
>
>  (from gdal_tps.cpp:)
>  * The thin plate spline transformer produces exact transformation
>  * at all control points and smoothly varying transformations between
>  * control points with greatest influence from local control points.
>  * It is suitable for for many applications not well modelled by
> polynomial * transformations.
>  *
>
>
> However, they aren't. With a few control points the differences are only
> in millimeters, but with a few hundred gcps the differences become
> meters, and above thousand points the error can get to fifty meters. The
> problem gets worse when some control points are very near to other ones.
> I was happy to discover that dividing all numbers by 1000 solves the
> problem, but there certainly is a numerical instability in the
> algorithm.
>
> Of course, thin plate spline transformations normally use scan
> coordinates as input, and these are almost always small numbers. Even
> so, I can imagine problems with very large rasters and the rubber
> sheeting applications I am working with.
>
> Jan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From peifer at gmx.eu  Mon Sep 19 03:14:08 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Sep 19 20:25:19 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
 (General function failure.)
In-Reply-To: <CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu> <4E731406.4050401@gmx.eu>
	<CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
Message-ID: <4E76EBC0.6030107@gmx.eu>

On 16/09/2011 16:49, Paul Ramsey wrote:
> ...perhaps in the FGDB driver we can try and
> avoid using the WKT at all when we have a WKID available.

I just disabled the generation of the WKT element in my local copy of 
FGdbLayer.cpp [0]:   /* CPLCreateXMLElementAndValue(srs_xml,"WKT", wkt); */

If I now run: ogr2ogr -f filegdb out.gdb in.gdb -a_srs epsg:3035, the 
generated XML looks like [1], i.e. the only meaningful information about 
the ProjectedCoordinateSystem is: <WKID>3035</WKID>.

out.gdb is created without any error message and ogrinfo tells me that 
its SRS is EPSG:3035, see [2]. However, ArcCatalog 10 considers the same 
out.gdb to have an unknown spatial reference :-(

Hermann



[0]

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/filegdb/FGdbLayer.cpp#L371

[1]

$ ogr2ogr -f filegdb out.gdb in.gdb -a_srs epsg:3035

   ...
   <SpatialReference xsi:type="esri:ProjectedCoordinateSystem">
     <XOrigin>-2147483647</XOrigin>
     <YOrigin>-2147483647</YOrigin>
     <XYScale>1000000000</XYScale>
     <ZOrigin>-2147483647</ZOrigin>
     <ZScale>1000000000</ZScale>
     <XYTolerance>0.0001</XYTolerance>
     <ZTolerance>0.0001</ZTolerance>
     <HighPrecision>true</HighPrecision>
     <WKID>3035</WKID>
   </SpatialReference>
   ...

[2]

$ ogrinfo -al -so out.gdb

OGR: OGROpen(out.gdb/0x10d7140) succeeded as FileGDB.
INFO: Open of `out.gdb'
       using driver `FileGDB' successful.

Layer name: eea_1Kgrid
Geometry: Multi Polygon
Feature Count: 9
Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
Layer SRS WKT:
PROJCS["ETRS 1989 / LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AXIS["Y",NORTH],
     AXIS["X",EAST],
     AUTHORITY["EPSG","3035"]]
FID Column = OBJECTID
Geometry Column = SHAPE
CELLCODE: String (0.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
From pramsey at cleverelephant.ca  Mon Sep 19 12:41:48 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Sep 20 06:31:57 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
	(General function failure.)
In-Reply-To: <4E76EBC0.6030107@gmx.eu>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu> <4E731406.4050401@gmx.eu>
	<CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
	<4E76EBC0.6030107@gmx.eu>
Message-ID: <CACowWR3LNDUo_tVr4b26Xg54Gx68vCVR9HuzvGZOsf+sppqGGQ@mail.gmail.com>

On Mon, Sep 19, 2011 at 12:14 AM, Hermann Peifer <peifer@gmx.eu> wrote:
> On 16/09/2011 16:49, Paul Ramsey wrote:
>>
>> ...perhaps in the FGDB driver we can try and
>> avoid using the WKT at all when we have a WKID available.
>
> I just disabled the generation of the WKT element in my local copy of
> FGdbLayer.cpp [0]: ? /* CPLCreateXMLElementAndValue(srs_xml,"WKT", wkt); */
>
> If I now run: ogr2ogr -f filegdb out.gdb in.gdb -a_srs epsg:3035, the
> generated XML looks like [1], i.e. the only meaningful information about the
> ProjectedCoordinateSystem is: <WKID>3035</WKID>.
>
> out.gdb is created without any error message and ogrinfo tells me that its
> SRS is EPSG:3035, see [2]. However, ArcCatalog 10 considers the same out.gdb
> to have an unknown spatial reference :-(

Wow, we just can't win can we? So the only way forward is to get
morphToEsri to produce the extract literal string representation
expected by the API? What fun.

P.


>
> Hermann
>
>
>
> [0]
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/filegdb/FGdbLayer.cpp#L371
>
> [1]
>
> $ ogr2ogr -f filegdb out.gdb in.gdb -a_srs epsg:3035
>
> ?...
> ?<SpatialReference xsi:type="esri:ProjectedCoordinateSystem">
> ? ?<XOrigin>-2147483647</XOrigin>
> ? ?<YOrigin>-2147483647</YOrigin>
> ? ?<XYScale>1000000000</XYScale>
> ? ?<ZOrigin>-2147483647</ZOrigin>
> ? ?<ZScale>1000000000</ZScale>
> ? ?<XYTolerance>0.0001</XYTolerance>
> ? ?<ZTolerance>0.0001</ZTolerance>
> ? ?<HighPrecision>true</HighPrecision>
> ? ?<WKID>3035</WKID>
> ?</SpatialReference>
> ?...
>
> [2]
>
> $ ogrinfo -al -so out.gdb
>
> OGR: OGROpen(out.gdb/0x10d7140) succeeded as FileGDB.
> INFO: Open of `out.gdb'
> ? ? ?using driver `FileGDB' successful.
>
> Layer name: eea_1Kgrid
> Geometry: Multi Polygon
> Feature Count: 9
> Extent: (-17.000000, 28.000000) - (-17.000000, 28.000000)
> Layer SRS WKT:
> PROJCS["ETRS 1989 / LAEA",
> ? ?GEOGCS["ETRS89",
> ? ? ? ?DATUM["European_Terrestrial_Reference_System_1989",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ? ? ?AUTHORITY["EPSG","6258"]],
> ? ? ? ?PRIMEM["Greenwich",0,
> ? ? ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ? ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ? ? ?AUTHORITY["EPSG","4258"]],
> ? ?PROJECTION["Lambert_Azimuthal_Equal_Area"],
> ? ?PARAMETER["latitude_of_center",52],
> ? ?PARAMETER["longitude_of_center",10],
> ? ?PARAMETER["false_easting",4321000],
> ? ?PARAMETER["false_northing",3210000],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AXIS["Y",NORTH],
> ? ?AXIS["X",EAST],
> ? ?AUTHORITY["EPSG","3035"]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> CELLCODE: String (0.0)
> Shape_Length: Real (0.0)
> Shape_Area: Real (0.0)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From peifer at gmx.eu  Mon Sep 19 13:55:42 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Sep 20 07:41:48 2011
Subject: [gdal-dev] Re: OGR FileGDB driver: Failed at creating table ...
	(General function failure.)
In-Reply-To: <CACowWR3LNDUo_tVr4b26Xg54Gx68vCVR9HuzvGZOsf+sppqGGQ@mail.gmail.com>
References: <4E70B3CB.4090002@gmx.eu>
	<CA973CCA.13D09%michael.smith@usace.army.mil>
	<4E720FB3.7030409@gmx.eu> <4E731406.4050401@gmx.eu>
	<CACowWR11jWd_Z9uoMiXdrzom1yh1oPrD5D2PafVcST3=5wE4Kw@mail.gmail.com>
	<4E76EBC0.6030107@gmx.eu>
	<CACowWR3LNDUo_tVr4b26Xg54Gx68vCVR9HuzvGZOsf+sppqGGQ@mail.gmail.com>
Message-ID: <4E77821E.9030001@gmx.eu>

On 19/09/2011 18:41, Paul Ramsey wrote:
>
> Wow, we just can't win can we? So the only way forward is to get
> morphToEsri to produce the extract literal string representation
> expected by the API? What fun.
>

It is really a pity: over some 500 lines of code, OGR's morphToESRI() 
function tries its best to generate an "ESRI-friendly" WKT 
representation of EPSG:3035 and comes pretty close.. but eventually, the 
API aborts layer creation because the generated WKT string starts with 
"ETRS89_LAEA_Europe", whereas "ETRS_1989_LAEA" is expected.

OTOH: I can imagine that amending the code so that an exact string match 
will be achieved for most SRSs would really be a nightmare.

Hermann
From traviskirstine at gmail.com  Tue Sep 20 08:47:29 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Sep 21 03:35:31 2011
Subject: [gdal-dev] mapfile config options - scan directory
Message-ID: <CALtm4h1v6m0GyU2J=pyn8Z8VeTGbi+N8zq7BCMGmLYzwhYLeWA@mail.gmail.com>

Hi All,

I saw Frank's GDAL performance tips presentation at FOSS4G and he
mentioned that a config option in a MS mapfile could be set to stop
GDAL from scanning for auxiliary files when using external tiling.  I
have looked around in the MS documentation and GDAL and cannot find
the option.  If this option was set would it stop GDAL from using
external worldfiles / overviews?

Regards
From thomas.andres at bsap.ch  Tue Sep 20 09:35:09 2011
From: thomas.andres at bsap.ch (BSAP ( Andres Thomas ))
Date: Wed Sep 21 04:36:06 2011
Subject: [gdal-dev] Ogr2Ogr Interlis1 Export
Message-ID: <801E4A8E07822C4496C96AA03FFEE9634283E3@exchbrig.BSAPAG.local>

Dear List,

 

i have exported data from postgres to an itf with the following command:

 

ogr2ogr -f "Interlis 1" mynew.itf,myili1.ili PG:"dbname='mydatabase'
host='localhost' port='123' user='postgres' password='mypassword'"

 

The ITF was created, but the attributes of one table i.e. are not in the
same order like in the ILI-File... and also not in the same order like
in the Postgres Database...

Why that?

 

Thx for your help,

Thomas Andres

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/7c5861db/attachment.html
From thomas.andres at bsap.ch  Tue Sep 20 09:53:44 2011
From: thomas.andres at bsap.ch (BSAP ( Andres Thomas ))
Date: Wed Sep 21 04:45:04 2011
Subject: [gdal-dev] Ogr2Ogr Interlis1 Export
Message-ID: <801E4A8E07822C4496C96AA03FFEE9634283E7@exchbrig.BSAPAG.local>

Dear List,

 

i have exported data from postgres to an itf with the following command:

 

ogr2ogr -f "Interlis 1" mynew.itf,myili1.ili PG:"dbname='mydatabase'
host='localhost' port='123' user='postgres' password='mypassword'"

 

The ITF was created, but the attributes of one table i.e. are not in the
same order like in the ILI-File... and also not in the same order like
in the Postgres Database...

Why that?

 

Thx for your help,

Thomas Andres

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/7e190507/attachment.html
From chaitanya.ch at gmail.com  Tue Sep 20 10:10:51 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep 21 05:10:51 2011
Subject: [gdal-dev] Ogr2Ogr Interlis1 Export
In-Reply-To: <801E4A8E07822C4496C96AA03FFEE9634283E3@exchbrig.BSAPAG.local>
References: <801E4A8E07822C4496C96AA03FFEE9634283E3@exchbrig.BSAPAG.local>
Message-ID: <CAMKgpOZxNodessp8Sk+i3BLi6incrrr3=2ZrsbjOvvjjhMq2YA@mail.gmail.com>

Thomas,

OGR doesn't promise the same field order. Individual drivers can reorder the
fields when they save the data.
You may be able to reorder the fields using the -select option in ogr2ogr.

On Tue, Sep 20, 2011 at 7:05 PM, BSAP ( Andres Thomas ) <
thomas.andres@bsap.ch> wrote:

>  Dear List,****
>
> ** **
>
> i have exported data from postgres to an itf with the following command:**
> **
>
> ** **
>
> ogr2ogr -f "Interlis 1" mynew.itf,myili1.ili PG:"dbname='mydatabase'
> host='localhost' port='123' user='postgres' password='mypassword'"****
>
> ** **
>
> The ITF was created, but the attributes of one table i.e. are not in the
> same order like in the ILI-File? and also not in the same order like in the
> Postgres Database?****
>
> Why that?****
>
> ** **
>
> Thx for your help,****
>
> Thomas Andres****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/a749a3f0/attachment.html
From warmerdam at pobox.com  Tue Sep 20 10:41:45 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 21 05:36:07 2011
Subject: [gdal-dev] mapfile config options - scan directory
In-Reply-To: <CALtm4h1v6m0GyU2J=pyn8Z8VeTGbi+N8zq7BCMGmLYzwhYLeWA@mail.gmail.com>
References: <CALtm4h1v6m0GyU2J=pyn8Z8VeTGbi+N8zq7BCMGmLYzwhYLeWA@mail.gmail.com>
Message-ID: <4E78A629.1080903@pobox.com>

On 11-09-20 05:47 AM, Travis Kirstine wrote:
> Hi All,
>
> I saw Frank's GDAL performance tips presentation at FOSS4G and he
> mentioned that a config option in a MS mapfile could be set to stop
> GDAL from scanning for auxiliary files when using external tiling.  I
> have looked around in the MS documentation and GDAL and cannot find
> the option.  If this option was set would it stop GDAL from using
> external worldfiles / overviews?

Travis,

The config option is documented at:

http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_DISABLE_READDIR_ON_OPEN

In MapServer you could add a line in the MAP object with:

   CONFIG "GDAL_DISABLE_READDIR_ON_OPEN" "ON"

This will not prevent finding world files and overviews.  It just means that
searching for them will require an active probe of the file system instead
of just consulting a loaded file list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From thomas.andres at bsap.ch  Tue Sep 20 11:13:28 2011
From: thomas.andres at bsap.ch (BSAP ( Andres Thomas ))
Date: Wed Sep 21 06:09:18 2011
Subject: [gdal-dev] Ogr2Ogr Interlis1 Export
Message-ID: <801E4A8E07822C4496C96AA03FFEE9634283F7@exchbrig.BSAPAG.local>

--- Anyway, it's better to not rely on field order.

ITF and ILI go always together? when I give them to someone else, the attribute order has to correspond, because they using programs who looks to the ILI attribute order to import the ITF data

 

 

Anyway, it's better to not rely on field order.

On Tue, Sep 20, 2011 at 8:16 PM, BSAP ( Andres Thomas ) <thomas.andres@bsap.ch> wrote:

? i?ve tried, but there are several tables to be exported?. I can?t write ?select table1.fid,table1.color,table2.fid,table2.mysize,etc?

 

When I query one table with ogrinfo I see, that the attributes are listed in the same order like in the created ITF? if I only could change this?

 

Von: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Gesendet: Dienstag, 20. September 2011 16:11
An: BSAP ( Andres Thomas )
Cc: gdal-dev@lists.osgeo.org
Betreff: Re: [gdal-dev] Ogr2Ogr Interlis1 Export

 

Thomas,

 

OGR doesn't promise the same field order. Individual drivers can reorder the fields when they save the data.

You may be able to reorder the fields using the -select option in ogr2ogr.

On Tue, Sep 20, 2011 at 7:05 PM, BSAP ( Andres Thomas ) <thomas.andres@bsap.ch> wrote:

Dear List,

 

i have exported data from postgres to an itf with the following command:

 

ogr2ogr -f "Interlis 1" mynew.itf,myili1.ili PG:"dbname='mydatabase' host='localhost' port='123' user='postgres' password='mypassword'"

 

The ITF was created, but the attributes of one table i.e. are not in the same order like in the ILI-File? and also not in the same order like in the Postgres Database?

Why that?

 

Thx for your help,

Thomas Andres

 

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





 

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584 <tel:%2B91-9494447584> 
17.2416N 80.1426E





 

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/1586cc18/attachment-0001.html
From Asim.Ahmad at rmsi.com  Tue Sep 20 11:29:18 2011
From: Asim.Ahmad at rmsi.com (Asim Ahmad)
Date: Wed Sep 21 06:25:54 2011
Subject: [gdal-dev] OGR C Sharp
Message-ID: <OF38CA9B7A.8570B19E-ON65257911.0054AF4F-65257911.005514CC@rmsi.com>


Hi All,

I have Few question -

   I want to OGR c sharp wrap to read/update ESRI personal geo database. Is
   it possible.
   I am not able to use it from autocad. It give me the type initializer
   for threw an exception error. Why? I have copied all the dlls to my
   project's bin directory..

What is the other way toread/update ESRI personal geo database or File
geodatabase

Thanks & Regards,
Asim ...

Disclaimer: This message and any attachments contain information that may be RMSI Private Limited. confidential and/or privileged. If you are not the intended recipient (or authorized to receive for the intended recipient), and have received this message in error, any use, disclosure or distribution is strictly prohibited. If you have received this message in error, please notify the sender immediately by replying to the e-mail and permanently deleting the message from your computer and/or storage system.   
From thomas.andres at bsap.ch  Tue Sep 20 11:37:55 2011
From: thomas.andres at bsap.ch (BSAP ( Andres Thomas ))
Date: Wed Sep 21 06:35:01 2011
Subject: WG: [gdal-dev] Ogr2Ogr Interlis1 Export
Message-ID: <801E4A8E07822C4496C96AA03FFEE9634283F8@exchbrig.BSAPAG.local>

? the query in Postgres:

SELECT attrelid, attname, attnum FROM pg_attribute WHERE attrelid=369857;

 

gives me the field names with their correct order number? so I shouldn?t to have to rely the attributes?

witch logic OGR is following?

 

Von: BSAP ( Andres Thomas ) 
Gesendet: Dienstag, 20. September 2011 17:13
An: 'gdal-dev@lists.osgeo.org'
Betreff: Re: [gdal-dev] Ogr2Ogr Interlis1 Export

 

--- Anyway, it's better to not rely on field order.

ITF and ILI go always together? when I give them to someone else, the attribute order has to correspond, because they using programs who looks to the ILI attribute order to import the ITF data

 

 

Anyway, it's better to not rely on field order.

On Tue, Sep 20, 2011 at 8:16 PM, BSAP ( Andres Thomas ) <thomas.andres@bsap.ch> wrote:

? i?ve tried, but there are several tables to be exported?. I can?t write ?select table1.fid,table1.color,table2.fid,table2.mysize,etc?

 

When I query one table with ogrinfo I see, that the attributes are listed in the same order like in the created ITF? if I only could change this?

 

Von: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Gesendet: Dienstag, 20. September 2011 16:11
An: BSAP ( Andres Thomas )
Cc: gdal-dev@lists.osgeo.org
Betreff: Re: [gdal-dev] Ogr2Ogr Interlis1 Export

 

Thomas,

 

OGR doesn't promise the same field order. Individual drivers can reorder the fields when they save the data.

You may be able to reorder the fields using the -select option in ogr2ogr.

On Tue, Sep 20, 2011 at 7:05 PM, BSAP ( Andres Thomas ) <thomas.andres@bsap.ch> wrote:

Dear List,

 

i have exported data from postgres to an itf with the following command:

 

ogr2ogr -f "Interlis 1" mynew.itf,myili1.ili PG:"dbname='mydatabase' host='localhost' port='123' user='postgres' password='mypassword'"

 

The ITF was created, but the attributes of one table i.e. are not in the same order like in the ILI-File? and also not in the same order like in the Postgres Database?

Why that?

 

Thx for your help,

Thomas Andres

 

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





 

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584 <tel:%2B91-9494447584> 
17.2416N 80.1426E





 

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/929a0f73/attachment.html
From dcole at integrity-apps.com  Tue Sep 20 11:45:52 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Sep 21 06:43:38 2011
Subject: [gdal-dev] Build GDAL - visual studio version
Message-ID: <8406B84EA8899042A8508D858843972903CD4AF8@CHUNEX01.integrity-apps.com>

I built GDAL using nmake following the instructions here:

http://trac.osgeo.org/gdal/wiki/BuildingOnWindows and building from Source

Does this build require any of the MSvc* dlls or any other external DLLS?

I am trying to use the GDAL library in a very simple Visual Studio 2010 project, and I have turned off the "Multi-threaded DLL" option, but my program is still asking for msvcp100.dll when I move it to a machine that does not have Visual studio installed on it (which is the ultimate destination)

Do I need to recompile GDAL in some other way so that it is 100% self contained and portable to another windows box without any of the MSVS libraries on it?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/ac9049bc/attachment.html
From mateusz at loskot.net  Tue Sep 20 11:51:59 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Sep 21 06:49:54 2011
Subject: [gdal-dev] Build GDAL - visual studio version
In-Reply-To: <8406B84EA8899042A8508D858843972903CD4AF8@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903CD4AF8@CHUNEX01.integrity-apps.com>
Message-ID: <4E78B69F.7020902@loskot.net>

On 20/09/11 16:45, Cole, Derek wrote:
> Does this build require any of the MSvc* dlls or any other external DLLS?

Yes, Web-search for Microsoft Visual C++ Redistributable Package
and choose appropriate version of the package.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From j.l.h.hartmann at uva.nl  Tue Sep 20 12:53:52 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Sep 21 07:55:49 2011
Subject: [gdal-dev] mapfile config options - scan directory
In-Reply-To: <CALtm4h1v6m0GyU2J=pyn8Z8VeTGbi+N8zq7BCMGmLYzwhYLeWA@mail.gmail.com>
References: <CALtm4h1v6m0GyU2J=pyn8Z8VeTGbi+N8zq7BCMGmLYzwhYLeWA@mail.gmail.com>
Message-ID: <4E78C520.5040300@uva.nl>

Hi all,

What is the relationship between the "PER_DATASET_ALPHA" mask of the RGB 
bands in a raster dataset, and the Alpha Channel? I created a four-band 
tiff file with gdalwarp from an RGB original. On creation, the fourth 
band has all values set to 255, and the whole picture is visible. 
However, when setting parts of the fourth band to zero with 
gdal_rasterize, everything remains visible. Could that be caused by the 
Mask Flags of the first three channels, and, if so, what can I do about it?

Band 1 Block=4016x1 Type=Byte, ColorInterp=Red
   Mask Flags: PER_DATASET ALPHA
Band 2 Block=4016x1 Type=Byte, ColorInterp=Green
   Mask Flags: PER_DATASET ALPHA
Band 3 Block=4016x1 Type=Byte, ColorInterp=Blue
   Mask Flags: PER_DATASET ALPHA
Band 4 Block=4016x1 Type=Byte, ColorInterp=Alpha

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/f4c10ffe/attachment-0001.html
From dcole at integrity-apps.com  Tue Sep 20 13:14:11 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Sep 21 08:17:01 2011
Subject: [gdal-dev] Build GDAL - visual studio version
In-Reply-To: <4E78B69F.7020902@loskot.net>
References: <8406B84EA8899042A8508D858843972903CD4AF8@CHUNEX01.integrity-apps.com>,
	<4E78B69F.7020902@loskot.net>
Message-ID: <8406B84EA8899042A8508D858843972903CD4B6C@CHUNEX01.integrity-apps.com>

If GDAL is linked statically, and I recompile my library, will this still be the case? Can I recompile GDAL with MT instead of with the DLLs?
________________________________________
From: Mateusz Loskot [mateusz@loskot.net]
Sent: Tuesday, September 20, 2011 11:51 AM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Build GDAL - visual studio version

On 20/09/11 16:45, Cole, Derek wrote:
> Does this build require any of the MSvc* dlls or any other external DLLS?

Yes, Web-search for Microsoft Visual C++ Redistributable Package
and choose appropriate version of the package.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From thomas.andres at bsap.ch  Tue Sep 20 13:34:58 2011
From: thomas.andres at bsap.ch (BSAP ( Andres Thomas ))
Date: Wed Sep 21 08:38:45 2011
Subject: [gdal-dev] Export multiples postgres-tables with an order of fields
Message-ID: <801E4A8E07822C4496C96AA03FFEE9634283FE@exchbrig.BSAPAG.local>

>>? i?ve tried, but there are several tables to be exported?. I can?t write ?select table1.fid,table1.color,table2.fid,table2.mysize,etc?

Now I create mutliples itf?s:

 

ogr2ogr -f "Interlis 1" /itf/table1.itf,myili.ili PG:"dbname='mydb' host='localhost' port='5432' user='postgres' password='pwd'" topic1__table1 -select attr1,attr3,attr2

ogr2ogr -f "Interlis 1" /itf/table2.itf,myili.ili PG:"dbname='mydb' host='localhost' port='5432' user='postgres' password='pwd'" topic1__table2 -select attr3,attr5,attr2

ogr2ogr -f "Interlis 1" /itf/table3.itf,myili.ili PG:"dbname='mydb' host='localhost' port='5432' user='postgres' password='pwd'" topic1__table3 -select attr2,attr3,attr1

 

? then I append them to one itf manually? because the ?append option seems not to work with the interlis-driver

 

Is there a better way to do? Couldn?t I use multiples ?select options for the different tables into one pg-export?

Greetz, Thomas

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110920/d9e21d68/attachment.html
From jormarfe at gmail.com  Tue Sep 20 15:33:51 2011
From: jormarfe at gmail.com (Jorge)
Date: Wed Sep 21 10:44:44 2011
Subject: [gdal-dev] Re: RPC computation
In-Reply-To: <CADH5xWoezGKgqrUuxEN72wtHzK3kUuhwCfOLW-r1TDyR_3ewvw@mail.gmail.com>
References: <CADH5xWoezGKgqrUuxEN72wtHzK3kUuhwCfOLW-r1TDyR_3ewvw@mail.gmail.com>
Message-ID: <B4F48DFA-5ED3-4ADC-B60B-577BB76C2687@gmail.com>

Hello 

        I tried to use gdaltransform executable ( with option -rpc) but it returns an error: Unable to compue the rpc of the input. I need to validate my rpc algorithm but I do not find the way that gdal generates the rpc of an input geoTIFF.


Best Regards

Jorge

El 12/09/2011, a las 12:46, Jorge Martin <jormarfe@gmail.com> escribi?:

> Hello,
> 
>     I have developed a program that compute the RPC of an input tif image. Now I want to validate this computation. Could you tell me how I can compute the RPCs of an input image using gdal? 
> 
> 
> Best Regards,
> 
> Jorge
From mateusz at loskot.net  Tue Sep 20 18:41:18 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Sep 21 14:02:11 2011
Subject: [gdal-dev] Build GDAL - visual studio version
In-Reply-To: <8406B84EA8899042A8508D858843972903CD4B6C@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903CD4AF8@CHUNEX01.integrity-apps.com>,
	<4E78B69F.7020902@loskot.net>
	<8406B84EA8899042A8508D858843972903CD4B6C@CHUNEX01.integrity-apps.com>
Message-ID: <4E79168E.4040004@loskot.net>

On 20/09/11 18:14, Cole, Derek wrote:
> If GDAL is linked statically, and I recompile my library, will this 
> still be the case?

If you link GDAL against static C/C++ libs, you don't need to
deploy the C/C++ run-time re-distributable DLLs.

http://msdn.microsoft.com/en-us/library/abx4dbyh.aspx
http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx

> Can I recompile GDAL with MT instead of with the DLLs?

In theory, you can but in practice...you need to try to find out -
that's the safest answer I can give myself.
Microsoft does not recommend to link statically to the C/C++ run-time in
DLL. It is easy to mismatch different types of C/C++ run-times
especially if a DLL has a lot of third-party dependencies.
See questions 9 and 10 for clarification http://zlib.net/DLL_FAQ.txt

You can tweak the flags in nmake.opt file

http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L107

In nutshell, linking against C/C++ run-time dynamically and
deploying the C/C++ run-time on a client. It's highly possible your
client will need those run-time DLLs anyway, required by GDAL
dependencies or other software.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From wouter.schaubroeck at gmail.com  Wed Sep 21 08:30:16 2011
From: wouter.schaubroeck at gmail.com (Wouter Schaubroeck)
Date: Thu Sep 22 04:37:34 2011
Subject: [gdal-dev] Re: error compiling gdal with ArcSDE support
In-Reply-To: <CAMV_oz3XtKVd3-90UQ4geRyK7pdkvGeoq9bxp3XQw3CJB874kQ@mail.gmail.com>
References: <CAMV_oz3XtKVd3-90UQ4geRyK7pdkvGeoq9bxp3XQw3CJB874kQ@mail.gmail.com>
Message-ID: <CAMV_oz138p8pSRr1s2C0z=SsTWdgEjDL9tuJUHhZvW6P568Xgw@mail.gmail.com>

Hi list,

Good news, I've fixed this issue by removing the libsde.so file from the
ArcSDE libraries.

But now I have another issue, this is the error I get:

/home/sde/bin/sde100/sdeexe100//lib/libsde.a(jcapimin.o): In function
`jpeg_CreateCompress':
jcapimin.c:(.text+0x0): multiple definition of `jpeg_CreateCompress'
/home/tux/bin/gdal/gdal-1.8.1/frmts/o/.libs/jcapimin.o:/home/tux/bin/gdal/gdal-1.8.1/frmts/jpeg/libjpeg/jcapimin.c:31:
first defined here

Have any of you encountered this issue before? I'm already compiling with
the --with-jpeg=internal option, but this didn't help. It looks like the
libsde.a file contains these methods already, and want to join the
jpeg-creation-game... Btw, this is not the only method that causes errors,
but the other errors are similar.

Thanks in advance,

Wouter


--
Wouter
http://blog.giswhat.be


On 15 September 2011 16:08, Wouter Schaubroeck <wouter.schaubroeck@gmail.com
> wrote:

> Hi list,
>
> I'm trying to compile gdal from source with added ArcSDE support, but it
> doesn't compile. I get this error:
>
> libsde.so: undefined reference to `pthread_atfork'
>
> My configure command looks like this:
> ./configure --with-sde=/home/sde/bin/sde100/sdeexe100/
> --with-sde-version=100 --prefix=/home/tux/bin/gdal/app/
>
> I'm compile on a fully patched and up to date OpenSuSE:
> Linux ospgsql 2.6.37.6-0.7-default #1 SMP 2011-07-21 02:17:24 +0200 x86_64
> x86_64 x86_64 GNU/Linux
>
> Do any of you guys know what the problem is? I've already tried the
> following:
> - disabling the multi threads: --with-threads=no
> - specifically included the libpthread.so.0 in the LD_LIBRARY_PATH
>
> Thanks in advance,
>
> Wouter
> --
> Wouter
> http://blog.giswhat.be
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/c742084a/attachment.html
From hobu.inc at gmail.com  Wed Sep 21 09:50:51 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Sep 22 06:08:34 2011
Subject: [gdal-dev] Re: error compiling gdal with ArcSDE support
In-Reply-To: <CAMV_oz138p8pSRr1s2C0z=SsTWdgEjDL9tuJUHhZvW6P568Xgw@mail.gmail.com>
References: <CAMV_oz3XtKVd3-90UQ4geRyK7pdkvGeoq9bxp3XQw3CJB874kQ@mail.gmail.com>
	<CAMV_oz138p8pSRr1s2C0z=SsTWdgEjDL9tuJUHhZvW6P568Xgw@mail.gmail.com>
Message-ID: <C88C9E54-FBB2-4BFE-8592-C257A0CA7D60@gmail.com>


On Sep 21, 2011, at 7:30 AM, Wouter Schaubroeck wrote:

> Hi list,
> 
> Good news, I've fixed this issue by removing the libsde.so file from the ArcSDE libraries.
> 
> But now I have another issue, this is the error I get:
> 
> /home/sde/bin/sde100/sdeexe100//lib/libsde.a(jcapimin.o): In function `jpeg_CreateCompress':
> jcapimin.c:(.text+0x0): multiple definition of `jpeg_CreateCompress'
> /home/tux/bin/gdal/gdal-1.8.1/frmts/o/.libs/jcapimin.o:/home/tux/bin/gdal/gdal-1.8.1/frmts/jpeg/libjpeg/jcapimin.c:31: first defined here
> 
> Have any of you encountered this issue before? I'm already compiling with the --with-jpeg=internal option, but this didn't help. It looks like the libsde.a file contains these methods already, and want to join the jpeg-creation-game... Btw, this is not the only method that causes errors, but the other errors are similar.

You'll have to link to an external jpeg library and then make sure that SDE SDK is first in the link line so its internal JPEG library symbols get used first. It is unfortunate that SDE is embedding JPEG (they used to embed an ancient and crackable zlib too)


> Do any of you guys know what the problem is? I've already tried the following:
> - disabling the multi threads: --with-threads=no
> - specifically included the libpthread.so.0 in the LD_LIBRARY_PATH

libsde.so wants pthread, so you'll probably have to have --with-threads=yes  Additionally, you might try adding -pthread to the GDALMake.opt line that adds -lpthread.  Sometimes compilers treat this special.

I don't know that removing libsde.so fixed the issue. This file has symbols that are definitely needed for things to run.

Good luck,

Howard


From bfraser at geoanalytic.com  Wed Sep 21 11:09:12 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Sep 22 07:25:03 2011
Subject: [gdal-dev] 2D KML to 3D KML
Message-ID: <4E79FE18.8010304@geoanalytic.com>

Hi all,

   I've got some 2D KML generated by gdal_polygonize I'd like to turn 
into 3D KML.  Do you have any ogr2ogr techniques to do this?

A snip of my 2D KML:
------------------------------

<Placemark>
<name>1</name>
<Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
<ExtendedData><SchemaData schemaUrl="#out">
<SimpleData name="Name">1</SimpleData>
</SchemaData></ExtendedData>
<Polygon><outerBoundaryIs><LinearRing><coordinates>106.2125,-6.0 
106.2125,-6.01 106.225,-6.01 106.225,-6.02 106.2375,-6.02 106.2375,-6.03 
106.25,-6.03 106.25,-6.0 
106.2125,-6.0</coordinates></LinearRing></outerBoundaryIs></Polygon>
</Placemark
------------------------------
And the desired 3D KML:

<Placemark>
<name>1</name>
<Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>1</fill><color>ff0000ff</color></PolyStyle></Style>
<ExtendedData><SchemaData schemaUrl="#out">
<SimpleData name="Name">1</SimpleData>
</SchemaData></ExtendedData>
<Polygon>
<outerBoundaryIs><LinearRing><coordinates>106.2125,-6.0,101 
106.2125,-6.01,101 106.225,-6.01,101 106.225,-6.02,101 
106.2375,-6.02,101 106.2375,-6.03,101 106.25,-6.03,101 106.25,-6.0,101 
106.2125,-6.0,101 </coordinates></LinearRing></outerBoundaryIs></Polygon>
</Placemark>
------------------------------

I've added a "z" to the coordinates (100 plus the "name" value, to boost 
it above the terrain), plus a little bit of PolyStyle info to set the 
fill color.

The long term solution may be to enhance gdal_polygonize to output 3D 
vectors, but right now I'm just experimenting with visualizing KML in 
Google Earth....

-- 
Best Regards,
Brent Fraser


From szekerest at gmail.com  Wed Sep 21 13:20:17 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep 22 09:43:22 2011
Subject: [gdal-dev] OGR SQL implicit conversions
Message-ID: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>

Hi Devs,

We have some problems due to the recent changes in the SQL expression parser
which is related to the change in the implicit type conversion behaviour.

Formerly we could safely use the following statement:

select * from mytable where ogr_fid in ('1100','1101','1102')

If the data type of ogr_fid is an integer or float then the expression
evaluator has converted the string constants to numeric values implicitly.

As of 1.8 the parser reports an error due to the incompatible types in the
expression.

I've added a ticket #4259 <http://trac.osgeo.org/gdal/ticket/4259> related
to this problem including a patch to handle these string to numeric
conversions.

However I'm a bit uncertain whether some other conversions should also be
supported or not. Having a larger number of conversion rules we might
probably think about rewriting the current approach by using a more generic
implementation.

Any ideas?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/8fdbeebe/attachment.html
From ealpert at digitalglobe.com  Wed Sep 21 14:48:56 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Thu Sep 22 11:21:41 2011
Subject: [gdal-dev] Problems with OGROpen,
	OCI Driver (OGROCITableLayer::ReadTableDefinition) and
	Oracle Views in GDAL 1.8.1
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23307A277BC@COMAIL01.digitalglobe.com>

All,

 

I've run into some very serious problems (for me) with changes made to
the OCI driver for 1.8.1. Specifically lines the following lines
(270-274).

 

        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

 

 

Our schema has many large  tables and several views which use these
tables. The views are referenced in all_sdo_geom_metadata. When the
query "select a.geometry.get_dims() dim from <the_view> a  where rownum
= 1" is run it results in FULL Table accesses. This has result in
running sorted queries on very large tables and I managed to blow out
the temp table space on our oracle instance just calling OGROpen. To say
the least our DBA's are not happy with me.

 

 

I'm considering changing :

 

        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

to:

 

 

        oDimCmd.Append( "SELECT COUNT(t.SDO_DIMNAME) DIM FROM
ALL_SDO_GEOM_METADATA A, TABLE(A.DIMINFO) T WHERE a.TABLE_HAME='" );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( "'" );

 

 

The following code was not in 1.7.2.

 

"ogrocitablelayer.cpp" Lines 259-316

   /*
-------------------------------------------------------------------- */

    /*      Identify Geometry dimension
*/

    /*
-------------------------------------------------------------------- */

 

    if( pszGeomName != NULL && strlen(pszGeomName) > 0 )

    {

        OGROCIStringBuf oDimCmd;

        OGROCIStatement oDimStatement( poSession );

        char **papszResult;

        int iDim = -1;

 

        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

        oDimStatement.Execute( oDimCmd.GetString() );

 

        papszResult = oDimStatement.SimpleFetchRow();

 

        if( CSLCount(papszResult) < 1 )

        {

            OGROCIStringBuf oDimCmd2;

            OGROCIStatement oDimStatement2( poSession );

            char **papszResult2;

 

            oDimCmd2.Appendf( 1024,

                "select m.sdo_index_dims\n"

                "from   all_sdo_index_metadata m, all_sdo_index_info
i\n"

                "where  i.index_name = m.sdo_index_name\n"

                "   and i.sdo_index_owner = m.sdo_index_owner\n"

                "   and i.table_name = upper('%s')",

                pszTableName );

 

            oDimStatement2.Execute( oDimCmd2.GetString() );

 

            papszResult2 = oDimStatement2.SimpleFetchRow();

 

            if( CSLCount( papszResult2 ) > 0 )

            {

                iDim = atoi( papszResult2[0] );

            }

        }

        else

        {

            iDim = atoi( papszResult[0] );

        }

 

        if( iDim > 0 )

        {

            SetDimension( iDim );

        }

        else

        {

            CPLDebug( "OCI", "get dim based of existing data or index
failed." );

        }

    }


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/9865a2d0/attachment-0001.html
From ivan.lucena at pmldnet.com  Wed Sep 21 16:27:37 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Sep 22 13:00:36 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbXMgd2l0aCBPR1JPcGVuLCBPQ0kgRHJpdmVyIChPR1JPQ0lUYWJsZUxheWVyOjpSZWFkVGFibGVEZWZpbml0aW9uKSBhbmQgT3JhY2xlIFZpZXdzIGluIEdEQUwgMS44LjE=?=
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23307A277BC@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23307A277BC@COMAIL01.digitalglobe.com>
Message-ID: <20110921202737.6825.qmail@s466.sureserver.com>

Ethan,


That code has changed a little bit since last time I saw it on
http://trac.osgeo.org/gdal/ticket/3025 but I can take a look on that for
you and commit with your suggestion if that works well.


Regards,


Ivan


	-------Original Message-------
  From: Ethan Alpert
  To: gdal-dev@lists.osgeo.org
  Subject: [gdal-dev] Problems with OGROpen, OCI Driver
(OGROCITableLayer::ReadTableDefinition) and Oracle Views in GDAL 1.8.1
  Sent: Sep 21 '11 13:48


All,


I?ve run into some very serious problems (for me) with changes made to the
OCI driver for 1.8.1. Specifically lines the following lines (270-274).


        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );


Our schema has many large  tables and several views which use these tables.
The views are referenced in all_sdo_geom_metadata. When the query ?select
a.geometry.get_dims() dim from a  where rownum = 1? is run it results in
FULL Table accesses. This has result in running sorted queries on very
large tables and I managed to blow out the temp table space on our oracle
instance just calling OGROpen. To say the least our DBA?s are not happy
with me.


I?m considering changing :


        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );


to:


        oDimCmd.Append( "SELECT COUNT(t.SDO_DIMNAME) DIM FROM
ALL_SDO_GEOM_METADATA A, TABLE(A.DIMINFO) T WHERE a.TABLE_HAME=?" );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( "?" );


The following code was not in 1.7.2.


"ogrocitablelayer.cpp" Lines 259-316

   /* --------------------------------------------------------------------
*/

    /*      Identify Geometry dimension
*/

    /* --------------------------------------------------------------------
*/


    if( pszGeomName != NULL && strlen(pszGeomName) > 0 )

    {

        OGROCIStringBuf oDimCmd;

        OGROCIStatement oDimStatement( poSession );

        char **papszResult;

        int iDim = -1;


        ODIMCMD.APPEND( &QUOT;SELECT A.&QUOT; );

        ODIMCMD.APPEND( PSZGEOMNAME  );

        ODIMCMD.APPEND( &QUOT;.GET_DIMS() DIM FROM &QUOT; );

        ODIMCMD.APPEND( PSZTABLENAME );

        ODIMCMD.APPEND( &QUOT; A WHERE ROWNUM = 1&QUOT; );


        oDimStatement.Execute( oDimCmd.GetString() );


        papszResult = oDimStatement.SimpleFetchRow();


        if( CSLCount(papszResult) < 1 )

        {

            OGROCIStringBuf oDimCmd2;

            OGROCIStatement oDimStatement2( poSession );

            char **papszResult2;


            oDimCmd2.Appendf( 1024,

                "select m.sdo_index_dims\n"

                "from   all_sdo_index_metadata m, all_sdo_index_info i\n"

                "where  i.index_name = m.sdo_index_name\n"

                "   and i.sdo_index_owner = m.sdo_index_owner\n"

                "   and i.table_name = upper('%s')",

                pszTableName );


            oDimStatement2.Execute( oDimCmd2.GetString() );


            papszResult2 = oDimStatement2.SimpleFetchRow();


            if( CSLCount( papszResult2 ) > 0 )

            {

                iDim = atoi( papszResult2[0] );

            }

        }

        else

        {

            iDim = atoi( papszResult[0] );

        }


        if( iDim > 0 )

        {

            SetDimension( iDim );

        }

        else

        {

            CPLDebug( "OCI", "get dim based of existing data or index
failed." );

        }

    }

This electronic communication and any attachments may contain confidential
and proprietary   information of DigitalGlobe, Inc. If you are not the
intended recipient, or an agent or employee   responsible for delivering
this communication to the intended recipient, or if you have received
this communication in error, please do not print, copy, retransmit,
disseminate or   otherwise use the information. Please indicate to the
sender that you have received this   communication in error, and delete the
copy you received. DigitalGlobe reserves the   right to monitor any
electronic communication sent or received by its employees, agents   or
representatives.
          --------------------
_______________________________________________
  gdal-dev mailing list
  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/51cb4db1/attachment.html
From ealpert at digitalglobe.com  Wed Sep 21 16:47:43 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Thu Sep 22 13:21:53 2011
Subject: [gdal-dev] Problems with OGROpen,
	OCI Driver (OGROCITableLayer::ReadTableDefinition) and Oracle Views
	in GDAL 1.8.1
In-Reply-To: <20110921202737.6825.qmail@s466.sureserver.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23307A277BC@COMAIL01.digitalglobe.com>
	<20110921202737.6825.qmail@s466.sureserver.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23307A27849@COMAIL01.digitalglobe.com>

Ivan,

 

Thanks for your reply. I took at look at the ogrocitablelayer.cpp code
on this ticket. The way the dims where queried in this
ogrocitablelayer.cpp attachment is very similar to what I proposed.

 

However it does not look like ogrocitablelayer.cpp was committed as a
result of this ticket.

 

-e

 

From: Ivan Lucena [mailto:ivan.lucena@pmldnet.com] 
Sent: Wednesday, September 21, 2011 2:28 PM
To: Ethan Alpert; ""
Subject: Re: [gdal-dev] Problems with OGROpen, OCI Driver
(OGROCITableLayer::ReadTableDefinition) and Oracle Views in GDAL 1.8.1

 

Ethan,

 

That code has changed a little bit since last time I saw it on
http://trac.osgeo.org/gdal/ticket/3025 but I can take a look on that for
you and commit with your suggestion if that works well.

 

Regards,

 

Ivan

 

	-------Original Message-------
From: Ethan Alpert 
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Problems with OGROpen, OCI Driver
(OGROCITableLayer::ReadTableDefinition) and Oracle Views in GDAL 1.8.1
Sent: Sep 21 '11 13:48

All,

 

I've run into some very serious problems (for me) with changes made to
the OCI driver for 1.8.1. Specifically lines the following lines
(270-274).

 

        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

 

 

Our schema has many large  tables and several views which use these
tables. The views are referenced in all_sdo_geom_metadata. When the
query "select a.geometry.get_dims() dim from a  where rownum = 1" is run
it results in FULL Table accesses. This has result in running sorted
queries on very large tables and I managed to blow out the temp table
space on our oracle instance just calling OGROpen. To say the least our
DBA's are not happy with me.

 

 

I'm considering changing :

 

        oDimCmd.Append( "SELECT a." );

    ;     oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

to:

 

 

        oDimCmd.Append( "SELECT COUNT(t.SDO_DIMNAME) DIM FROM
ALL_SDO_GEOM_METADATA A, TABLE(A.DIMINFO) T WHERE a.TABLE_HAME='" );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( "'" );

  ;

 

The following code was not in 1.7.2.

 

"ogrocitablelayer.cpp" Lines 259-316

   /*
-------------------------------------------------------------------- */

    /*      Identify Geometry dimension                &nb sp;
*/

    /*
-------------------------------------------------------------------- */

 

    if( pszGeomName != NULL && strlen(pszGeomName) > 0 )

    {

        OGROCIStringBuf oDimCmd;

        OGROCIStatement oDimStatement( poSession );

        char **papszResult;

        int iDim = -1;

 

        oDimCmd.Append( "SELECT a." );

        oDimCmd.Append( pszGeomName  );

        oDimCmd.Append( ".GET_DIMS() DIM FROM " );

        oDimCmd.Append( pszTableName );

        oDimCmd.Append( " a WHERE ROWNUM = 1" );

 

        oDimStatement.Execute( oDimCmd.GetString() );

 

        papszResult = oDimStatement.SimpleFetchRow();

 

        if( CSLCount(papszResult) < 1 )

        {

            OGROCIStringBuf oDimCmd2;

            OGROCIStatement oDimStatement2( poSession );

            char **papszResult2;

 

            oDimCmd2.Appendf( 1024,

                "select m.sdo_index_dims\n"

                "from   all_sdo_index_metadata m, all_sdo_index_info
i\n"

                "where  i.index_name = m.sdo_index_name\n"

                "   and i.sdo_index_owner = m.sdo_index_owner\n"

                "   and i.table_name = upper('%s')",

                pszTableName );

 

            oDimStatement2.Execute( oDimCmd2.GetString() );

 

            papszResult2 = oDimStatement2.SimpleFetchRow();

 

            if( CSLCount( papszResult2 ) > 0 )

            {

                iDim = atoi( papszResult2 [0] );

            }

        }

        else

        {< /span>

            iDim = atoi( papszResult[0] );

        }

 

        if( iDim > 0 )

        {

            SetDimension( iDim );

        }

        else

        {

            CPLDebug( "OCI", "get dim based of existing data or index
failed." );

        }

    }< o:p>

This electronic communication and any attachments may contain
confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient,
or an agent or employee 
responsible for delivering this communication to the intended recipient,
or if you have received 
this communication in error, please do not print, copy, retransmit,
disseminate or 
otherwise use the information. Please indicate to the sender that you
have received this 
communication in error, and delete the copy you received. DigitalGlobe
reserves the 
right to monitor any electronic communication sent or received by its
employees, agents 
or representatives.
________________________________


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/d50e7f96/attachment-0001.html
From Doug_Newcomb at fws.gov  Wed Sep 21 16:46:11 2011
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Thu Sep 22 13:45:58 2011
Subject: [gdal-dev] libjpeg-turbo for gdal?
Message-ID: <OF44F4475D.6A342DD1-ON85257912.0071C645-85257912.00720C99@fws.gov>

Hi Folks,
        I had seen libjpeg-turbo , 
http://www.libjpeg-turbo.org/Main/HomePage, in the announcement for Fedora 
14 bu had forgotten about it until Franks' FOSS4G talk last week.  Has 
anyone tried using it in GDAL?

Doug
Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/caff4996/attachment.html
From mateusz at loskot.net  Wed Sep 21 18:08:19 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Sep 22 14:47:03 2011
Subject: [gdal-dev] libjpeg-turbo for gdal?
In-Reply-To: <OF44F4475D.6A342DD1-ON85257912.0071C645-85257912.00720C99@fws.gov>
References: <OF44F4475D.6A342DD1-ON85257912.0071C645-85257912.00720C99@fws.gov>
Message-ID: <4E7A6053.5060204@loskot.net>

On 21/09/11 21:46, Doug_Newcomb@fws.gov wrote:
>I had seen libjpeg-turbo ,
>  Has anyone tried using it in GDAL?

http://www.gdal.org/frmt_jpeg.html

Best regards,

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From dcole at integrity-apps.com  Wed Sep 21 18:28:05 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Sep 22 15:08:03 2011
Subject: [gdal-dev] Set color table in NITF
In-Reply-To: <201108300029.30765.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903CB0E9C@CHUNEX01.integrity-apps.com>,
	<201108300029.30765.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903CD4F42@CHUNEX01.integrity-apps.com>

I am revisiting this because I discovered some of my code that I thought was correct is not actually setting a colortable in my NITF.

        dataBand =  sicdDS->GetRasterBand(1);
        GDALColorTable colorTable(GPI_RGB);


        int index;
        for (int red = 0 ; red < 256; red += 51)
        {
                for (int green = 0 ; green < 256 ; green += 51)
                {
                        for (int blue = 0 ; blue < 256 ; blue += 51)
                        {
                                    GDALColorEntry gce;
                                gce.c1 = red;
                                gce.c2 = green;
                                gce.c3 = blue;
                                colorTable.SetColorEntry(index, &gce);
                                index++;
                        }
                }
        }

        while (index < 256)
        {

                    GDALColorEntry gce;
                gce.c1 = 255;
                gce.c2 = 255;
                gce.c3 = 255;
                colorTable.SetColorEntry(index, &gce);
                index++;
        }
        dataBand->SetColorTable(&colorTable)

The above does NOT set the colortable of the image as expected, and when I do a gdalinfo on the image, the lookup table values look like defaults (256 colors, 1..256 sequentially)

Can you see somethign wrong with the code above as to why it is not setting it? 

Further down in that code I use "dataBand" to do some RasterIO operations that seem to be taking, but its just not letting me modify the lookup table.

Thanks
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Monday, August 29, 2011 6:29 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Set color table in NITF

Le mardi 30 ao?t 2011 00:14:12, Cole, Derek a ?crit :
> Hello,
>
> I am trying to create a NITF that uses a color lookup table.
>
> I found the option to add an RGB/LUT to the image, which didnt complain,
> however, when I had my LUT data to the image, it all seems to be kind of
> black and white.
>
> I know when I was displaying the images in my viewer (which I wrote in Qt),
> I had a function to create a 256 element color table, that changed some of
> the values. How would I modify the color table in the NITF?

Use SetColorTable() on the raster band object.

Python example :

from osgeo import gdal
ds = gdal.GetDriverByName('NITF').Create('test.ntf', 1, 1, options =
['IREP=RGB/LUT', 'LUT_SIZE=3'])
ct = gdal.ColorTable()
ct.SetColorEntry( 0, (0,0,0) )
ct.SetColorEntry( 1, (10,10,10) )
ct.SetColorEntry( 2, (20, 20, 20))
ds.GetRasterBand(1).SetColorTable(ct)
ds = None


$ gdalinfo test.ntf
Driver: NITF/National Imagery Transmission Format
Files: test.ntf
Size is 1, 1
[...]
Band 1 Block=1x1 Type=Byte, ColorInterp=Palette
  NoData Value=3
  Color Table (RGB with 4 entries)
    0: 0,0,0,255
    1: 10,10,10,255
    2: 20,20,20,255
    3: 0,0,0,0


>
> Thanks
From nhatzop at gmail.com  Wed Sep 21 23:05:59 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Sep 22 20:01:02 2011
Subject: [gdal-dev] libjpeg-turbo for gdal?
In-Reply-To: <4E7A6053.5060204@loskot.net>
References: <OF44F4475D.6A342DD1-ON85257912.0071C645-85257912.00720C99@fws.gov>
	<4E7A6053.5060204@loskot.net>
Message-ID: <CALDJGKB3hxEXPwcSG0uSfh2Waq_K4Jk=0z6_aoP3Jaz3zfj0Mw@mail.gmail.com>

I am curios to see the supercharged version :)

--Nikos

On Wed, Sep 21, 2011 at 3:08 PM, Mateusz Loskot <mateusz@loskot.net> wrote:

> On 21/09/11 21:46, Doug_Newcomb@fws.gov wrote:
> >I had seen libjpeg-turbo ,
> >  Has anyone tried using it in GDAL?
>
> http://www.gdal.org/frmt_jpeg.html
>
> Best regards,
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/acebb1cd/attachment.html
From Doug_Newcomb at fws.gov  Wed Sep 21 23:31:33 2011
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Thu Sep 22 20:47:45 2011
Subject: [gdal-dev] libjpeg-turbo for gdal?
In-Reply-To: <4E7A6053.5060204@loskot.net>
References: <OF44F4475D.6A342DD1-ON85257912.0071C645-85257912.00720C99@fws.gov>,
	<4E7A6053.5060204@loskot.net>
Message-ID: <OFBC6FDC6A.C1CD85A9-ON87257913.00135E43-87257913.00135E46@fws.gov>


Thanks!  Sorry for the noise.

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.???Life is too short for undocumented, proprietary data formats.

-----gdal-dev-bounces@lists.osgeo.org wrote: -----

To: Doug_Newcomb@fws.gov
From: Mateusz Loskot <mateusz@loskot.net>
Sent by: gdal-dev-bounces@lists.osgeo.org
Date: 09/21/2011 06:08PM
cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] libjpeg-turbo for gdal?

On 21/09/11 21:46, Doug_Newcomb@fws.gov wrote:
>I had seen libjpeg-turbo ,
> ?Has anyone tried using it in GDAL?

http://www.gdal.org/frmt_jpeg.html

Best regards,

--
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110921/835d0714/attachment.html
From wouter.schaubroeck at gmail.com  Thu Sep 22 03:35:21 2011
From: wouter.schaubroeck at gmail.com (Wouter Schaubroeck)
Date: Fri Sep 23 00:45:55 2011
Subject: [gdal-dev] Re: error compiling gdal with ArcSDE support
In-Reply-To: <C88C9E54-FBB2-4BFE-8592-C257A0CA7D60@gmail.com>
References: <CAMV_oz3XtKVd3-90UQ4geRyK7pdkvGeoq9bxp3XQw3CJB874kQ@mail.gmail.com>
	<CAMV_oz138p8pSRr1s2C0z=SsTWdgEjDL9tuJUHhZvW6P568Xgw@mail.gmail.com>
	<C88C9E54-FBB2-4BFE-8592-C257A0CA7D60@gmail.com>
Message-ID: <CAMV_oz3dnFvxgd871WQzKu4QSFPZYHJu0B0PZ0b_Ov8GfZNXmg@mail.gmail.com>

Hi Howard,

This did the trick! Thanks, you made my day...

grtz, w
--
Wouter
http://blog.giswhat.be


On 21 September 2011 15:50, Howard Butler <hobu.inc@gmail.com> wrote:

>
> On Sep 21, 2011, at 7:30 AM, Wouter Schaubroeck wrote:
>
> > Hi list,
> >
> > Good news, I've fixed this issue by removing the libsde.so file from the
> ArcSDE libraries.
> >
> > But now I have another issue, this is the error I get:
> >
> > /home/sde/bin/sde100/sdeexe100//lib/libsde.a(jcapimin.o): In function
> `jpeg_CreateCompress':
> > jcapimin.c:(.text+0x0): multiple definition of `jpeg_CreateCompress'
> >
> /home/tux/bin/gdal/gdal-1.8.1/frmts/o/.libs/jcapimin.o:/home/tux/bin/gdal/gdal-1.8.1/frmts/jpeg/libjpeg/jcapimin.c:31:
> first defined here
> >
> > Have any of you encountered this issue before? I'm already compiling with
> the --with-jpeg=internal option, but this didn't help. It looks like the
> libsde.a file contains these methods already, and want to join the
> jpeg-creation-game... Btw, this is not the only method that causes errors,
> but the other errors are similar.
>
> You'll have to link to an external jpeg library and then make sure that SDE
> SDK is first in the link line so its internal JPEG library symbols get used
> first. It is unfortunate that SDE is embedding JPEG (they used to embed an
> ancient and crackable zlib too)
>
>
> > Do any of you guys know what the problem is? I've already tried the
> following:
> > - disabling the multi threads: --with-threads=no
> > - specifically included the libpthread.so.0 in the LD_LIBRARY_PATH
>
> libsde.so wants pthread, so you'll probably have to have --with-threads=yes
>  Additionally, you might try adding -pthread to the GDALMake.opt line that
> adds -lpthread.  Sometimes compilers treat this special.
>
> I don't know that removing libsde.so fixed the issue. This file has symbols
> that are definitely needed for things to run.
>
> Good luck,
>
> Howard
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/8643c2d4/attachment.html
From jukka.rahkonen at mmmtike.fi  Thu Sep 22 05:45:30 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Sep 23 03:03:07 2011
Subject: [gdal-dev] Re: Export multiples postgres-tables with an order of
	fields
References: <801E4A8E07822C4496C96AA03FFEE9634283FE@exchbrig.BSAPAG.local>
Message-ID: <loom.20110922T113804-898@post.gmane.org>

BSAP ( Andres Thomas  <thomas.andres <at> bsap.ch> writes:


> ? then I append them to one itf manually? because the ?append option
> seems not to work with the interlis-driver

I have a feeling that at least with some drivers both -update and -append are
needed. 
 
> Is there a better way to do? Couldn?t I use multiples ?select options
> for the different tables into one pg-export?

You may think if you could build a query that gives you the result you want in
PostgreSQL and create a view there. Alternatively you can insert the query into
-sql parameter in ogr2ogr.

-Jukka Rahkonen-


From j.l.h.hartmann at uva.nl  Thu Sep 22 07:37:50 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Sep 23 05:01:38 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E64E0CC.1070000@uva.nl>
References: <4E64E0CC.1070000@uva.nl>
Message-ID: <4E7B1E0E.10506@uva.nl>

Found the answer to this one: use the "listgeo" and "geotifcp" utilities 
from the Geotiff library (http://trac.osgeo.org/geotiff/). They are not 
included in the gdal utilities, so you need them install them yourself. 
There is a debian package for it (geotiff-bin), and I guess there are 
binary versions for other distributions. Alternatively, you could use 
fwtools or osgeo4w.

Jan

On 09/05/2011 04:46 PM, Jan Hartmann wrote:
> Hi all,
>
> Is there a quick way to add back georeferencing information to a 
> geotif file that has been processed by Imagemagick? I have lots of 
> georeferenced images that I want to sharpen up a bit, but ImageMagick 
> throws the georeference headers away. Is there a way to transport them 
> from the original file to the derived one?
>
> Jan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/45850311/attachment.html
From j.l.h.hartmann at uva.nl  Thu Sep 22 08:00:03 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Sep 23 05:24:55 2011
Subject: [gdal-dev] Using the alpha channel to mask parts of an image
In-Reply-To: <4E7B22EA.4080801@uva.nl>
References: <4E7B22EA.4080801@uva.nl>
Message-ID: <4E7B2343.7020202@uva.nl>


Hi,

I have a set of unreferenced RGB images with black borders I want to cut 
off. I do this by adding a fourth alpha band to the image when warping 
it, and filling this with 255 within the data rectangle, and 0 outside, 
using gdal_rasterize ( I have the exact georeferenced boundaries of the 
image as vector data). Nothing happens. When I do the same thing for the 
first three bands, results are as expected, but whatever I do with the 
fourth band has no effect at all.

Theoretically, this should work, but is there a problem with gdal's 
implementation of alpha transparency? The following post seems to 
suggest it:

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Need-help-generating-output-with-alpha-channels-using-Python-API-td6169886.html

I didn't try out the suggested solution yet, as I would prefer the 
simpler method above. Is there really a problem with gdal's handling of 
alpha transparency, or is there another workaround?

Jan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/ee4677a4/attachment.html
From jrepetto at free.fr  Thu Sep 22 08:26:34 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Sep 23 05:52:26 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E7B1E0E.10506@uva.nl>
References: <4E64E0CC.1070000@uva.nl> <4E7B1E0E.10506@uva.nl>
Message-ID: <4E7B297A.2070508@free.fr>

Le 22/09/2011 13:37, Jan Hartmann a ?crit :
> Found the answer to this one: use the "listgeo" and "geotifcp" utilities
> from the Geotiff library (http://trac.osgeo.org/geotiff/). They are not
> included in the gdal utilities, so you need them install them yourself.
>
> Jan

There is a new GDAL utility program, that has been added recently into 
trunk by Even, for that purpose.
It works for ECW files, but I don't know if it works with Tiff files.
Its name is gdal_edit.py :

Usage: gdal_edit [--help-general] [-a_srs srs_def] [-a_ullr ulx uly lrx lry]
                  [-tr xres yres] [-unsetgt] [-a_nodata value]
                  [-mo "META-TAG=VALUE"]*  datasetname

Edit in place various information of an existing GDAL dataset.



Jean-Claude
From j.l.h.hartmann at uva.nl  Thu Sep 22 09:06:18 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Sep 23 06:34:52 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E7B297A.2070508@free.fr>
References: <4E64E0CC.1070000@uva.nl> <4E7B1E0E.10506@uva.nl>
	<4E7B297A.2070508@free.fr>
Message-ID: <4E7B32CA.1010109@uva.nl>

Thanks Jean-Claude, I'll try it out as soon as I manage to compile GDAL 
trunk. It's still broken at the moment ...

Jan

On 09/22/2011 02:26 PM, Jean-Claude Repetto wrote:
> Le 22/09/2011 13:37, Jan Hartmann a ?crit :
>> Found the answer to this one: use the "listgeo" and "geotifcp" utilities
>> from the Geotiff library (http://trac.osgeo.org/geotiff/). They are not
>> included in the gdal utilities, so you need them install them yourself.
>>
>> Jan
>
> There is a new GDAL utility program, that has been added recently into 
> trunk by Even, for that purpose.
> It works for ECW files, but I don't know if it works with Tiff files.
> Its name is gdal_edit.py :
>
> Usage: gdal_edit [--help-general] [-a_srs srs_def] [-a_ullr ulx uly 
> lrx lry]
>                  [-tr xres yres] [-unsetgt] [-a_nodata value]
>                  [-mo "META-TAG=VALUE"]*  datasetname
>
> Edit in place various information of an existing GDAL dataset.
>
>
>
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/d0dccd73/attachment.html
From hobu.inc at gmail.com  Thu Sep 22 09:17:59 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Sep 23 06:46:44 2011
Subject: [gdal-dev] Re: Compiling GDAL with Python bindings - some help
	required
In-Reply-To: <20110921221751.94pqa2fpussk0s48@www.sms.ed.ac.uk>
References: <20110921221751.94pqa2fpussk0s48@www.sms.ed.ac.uk>
Message-ID: <04944A30-A609-4987-A23D-0675AFC1E61C@gmail.com>


On Sep 21, 2011, at 4:17 PM, NJ Duncan wrote:

> Dear Howard,
> 
> I'm trying to install GDAL with Python bindings on a university machine - no root access.  I can specify an installation directory using ./configure --prefix=/home/gdal and I assume one for python using --with-pymoddir=/home/gdalpy
> 
> This works ok, I then make and make install then get hit with the following:
> 
> make[2]: Entering directory `/home/s0091681/gdal-1.8.1/swig/python'
> python setup.py install
> running install
> error: can't create or remove files in install directory
> 
> The following error occurred while trying to add or remove files in the
> installation directory:
> 
>    [Errno 13] Permission denied: '/usr/lib64/python2.6/site-packages/test-easy-install-2736.write-test'
> 
> I've taken a look at setup.py and can't really see what I can change to specify the correct installation directory.
> 
> Any help would be really appreciated.
> 
> Best regards
> 
> Niall
> 

Niall,

$ ./configure --without-python --prefix=/path/to/my/home {other config options}
$ make 
$ make install

After doing that,

$ cd swig/python
$ python setup.py bdist_egg

Copy the .egg file in dist/ and to the location you wish, and then reference that in either your PYTHONPATH or easy_install .pth file (search web for details on this).  The --with-python of ./configure, which is the default, assumes it is able to install the GDAL python bindings globally.  This is often not the case, and they must be manually installed by building the .egg file and placing it where required and using PYTHONPATH to activate it in scenarios that do not have root access.

These types of questions are best asked on the email list, and I have taken the liberty of cc'ing this email there to the benefit of others in the future.

Howard

From j.l.h.hartmann at uva.nl  Thu Sep 22 11:06:58 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Sep 23 08:41:55 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <CAHOfOo2-S5BGEEtE_dDSHcZf6p5fjc41FYXt68MwDSwXv+OnRw@mail.gmail.com>
References: <4E64E0CC.1070000@uva.nl> <4E7B1E0E.10506@uva.nl>
	<CAHOfOo2-S5BGEEtE_dDSHcZf6p5fjc41FYXt68MwDSwXv+OnRw@mail.gmail.com>
Message-ID: <4E7B4F12.5070404@uva.nl>

Hi Andrew, I must have overlooked your mail. Applygeo is not mentioned 
on the libgeotiff page, but I found the following posting:

http://osgeo-org.1803224.n2.nabble.com/Copy-projection-between-GeoTIFFs-td2065142.html

Thanks,

Jan

On 09/22/2011 04:24 PM, Andrew Brooks wrote:
> On 22 September 2011 12:37, Jan Hartmann <j.l.h.hartmann@uva.nl 
> <mailto:j.l.h.hartmann@uva.nl>> wrote:
>
>     Found the answer to this one: use the "listgeo" and "geotifcp"
>     utilities from the Geotiff library (http://trac.osgeo.org/geotiff/).
>
>
> Did you not receive the email I sent to the list on 6 September?
>
> I said you should use the applygeo" utility from the libgeotiff 
> distribution, it is better than the listgeo/geotifcp combination.
>
> Andrew
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/590a6ac2/attachment.html
From warmerdam at pobox.com  Thu Sep 22 11:11:05 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 23 08:45:48 2011
Subject: [gdal-dev] Using the alpha channel to mask parts of an image
In-Reply-To: <4E7B2343.7020202@uva.nl>
References: <4E7B22EA.4080801@uva.nl> <4E7B2343.7020202@uva.nl>
Message-ID: <4E7B5009.6010403@pobox.com>

On 11-09-22 05:00 AM, Jan Hartmann wrote:
>
> Hi,
>
> I have a set of unreferenced RGB images with black borders I want to cut off. I
> do this by adding a fourth alpha band to the image when warping it, and filling
> this with 255 within the data rectangle, and 0 outside, using gdal_rasterize (
> I have the exact georeferenced boundaries of the image as vector data). Nothing
> happens. When I do the same thing for the first three bands, results are as
> expected, but whatever I do with the fourth band has no effect at all.
>
> Theoretically, this should work, but is there a problem with gdal's
> implementation of alpha transparency? The following post seems to suggest it:
>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Need-help-generating-output-with-alpha-channels-using-Python-API-td6169886.html
>
> I didn't try out the suggested solution yet, as I would prefer the simpler
> method above. Is there really a problem with gdal's handling of alpha
> transparency, or is there another workaround?

Jan,

I don't think the referenced post is related to your problem.  If you can
bundle up your situation I might be able to investigate tonight.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jrepetto at free.fr  Thu Sep 22 11:52:46 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Sep 23 09:29:51 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <1314879172.4e5f76c4adb8f@webmail.free.fr>
References: <201108301322.46312.yjacolin@free.fr>	<201109010138.11748.even.rouault@mines-paris.org>	<5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>	<201109010930.27348.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
Message-ID: <4E7B59CE.6020006@free.fr>

Le 01/09/2011 14:12, Even Rouault a ?crit :

> I've just commited a new changeset. Now the support for updating the header info
> has been successfully tested on Linux 64bit with 3.3 SDK, Windows 32bit with 3.3
> SDK and Windows 32bit with 4.2 Read-Only SDK.
>
> At first, I had an issue with 4.2 Read-only SDK because the new functions used
> were not in the header file where they used to be in the 3.3 SDK. But they are
> luckily located in a new header file. So the Read-only SDK is a bit more than
> read-only...

Hi Even,

I have tested gdal_edit, here are a few comments :

- The -tr option doesn't work, or I don't understand how to use it :
$ gdal_edit.py -tr 10 10 France.ecw
Traceback (most recent call last):
   File "/usr/share/gdal/samples/gdal_edit.py", line 152, in <module>
     sys.exit(gdal_edit(sys.argv))
   File "/usr/share/gdal/samples/gdal_edit.py", line 132, in gdal_edit
     gt = ds.GetGeoTransform(gt)
UnboundLocalError: local variable 'gt' referenced before assignment

- gdal_edit reports no error when the parameters are wrong :
$ gdal_edit.py -mo KJHJKHJKHJ=GKFLLLMM France.ecw

- It would be nice if gdal_edit could display the current parameters 
when called without options.
Example :
$ gdal_edit.py France.ecw
Datum = NTFPARIS
Projection = LM1FRA2D
Origin = (35000.000000, 2700000.000000)
Pixel Size = (50.000000, -50.000000)
Corner Coordinates:
Upper Left = (35000.000000, 2700000.000000)
Upper Right = (1085000.000000, 2700000.000000)
Lower Left = (35000.000000, 1650000.000000)
Lower Right = (1085000.000000, 1650000.000000)

- Does gdal_edit work for other file formats, such as GeoTiff ?

Jean-Claude
From andy at squeakycode.net  Thu Sep 22 11:48:29 2011
From: andy at squeakycode.net (Andy Colson)
Date: Fri Sep 23 09:30:47 2011
Subject: [gdal-dev] PostgreSQL
Message-ID: <4E7B58CD.9070303@squeakycode.net>

Hi List,

I'm using ogr2ogr to convert (and reproject) data from shapefile to PG, 
if I use insert statements the null dates are not a problem, but if I 
set PG_USE_COPY=YES, then I get errors:

ERROR 1: COPY statement failed.
ERROR:  date/time field value out of range: "0000/00/00"
CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"

Inserts are really slow, so I'd love to use copy instead.

On another layer, regardless of insert/copy, I'm getting:

ERROR:  numeric field overflow
DETAIL:  A field with precision 19, scale 11 must round to an absolute 
value less than 10^8.
CONTEXT:  COPY poltwppoly, line 1, column shape_area: 
"1005965403.24000000954"

I'm using: GDAL 1.9dev, released 2011/01/18

I can make the shapefiles available if it would be of help.  Is there 
anything else I can do/try/offer?

Thanks,

-Andy
From even.rouault at mines-paris.org  Thu Sep 22 13:03:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 23 10:44:53 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <4E7B59CE.6020006@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E7B59CE.6020006@free.fr>
Message-ID: <201109221903.49634.even.rouault@mines-paris.org>

> - The -tr option doesn't work, or I don't understand how to use it :
> $ gdal_edit.py -tr 10 10 France.ecw
> Traceback (most recent call last):
>    File "/usr/share/gdal/samples/gdal_edit.py", line 152, in <module>
>      sys.exit(gdal_edit(sys.argv))
>    File "/usr/share/gdal/samples/gdal_edit.py", line 132, in gdal_edit
>      gt = ds.GetGeoTransform(gt)
> UnboundLocalError: local variable 'gt' referenced before assignment

Thanks for reporting. It should work with r23103

> 
> - gdal_edit reports no error when the parameters are wrong :
> $ gdal_edit.py -mo KJHJKHJKHJ=GKFLLLMM France.ecw

I see nothing wrong here. It is perfectly valid to assign GKFLLLMM to 
KJHJKHJKHJ metadata item. gdal_edit.py is meant as being generic, so if the 
driver doesn't understand natively the metadata item, this will generally 
fallback to storage in .aux.xml file if the driver supports the PAM mechanism.

> 
> - It would be nice if gdal_edit could display the current parameters
> when called without options.

Well, gdalinfo does already do that, so I don't think this is really 
necessary.

> 
> - Does gdal_edit work for other file formats, such as GeoTiff ?

Yes, it is driver agnostic. It will work with file formats that support 
updating of existing files, so formats that support the Create() method 
(advertised by '+' when issuing gdalinfo --formats) , and a few others like 
ECW.

> 
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Thu Sep 22 13:48:00 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Sep 23 11:31:31 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E7B58CD.9070303@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
Message-ID: <CAMKgpOZ8Zxp34f5LCZCrpcBqUk3dT6YHJyLc_VwREi+7ZShJng@mail.gmail.com>

Andy,

Send me the problematic shapefiles and explain what conversions you are
trying to perform.

On Thu, Sep 22, 2011 at 9:18 PM, Andy Colson <andy@squeakycode.net> wrote:

> Hi List,
>
> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG, if
> I use insert statements the null dates are not a problem, but if I set
> PG_USE_COPY=YES, then I get errors:
>
> ERROR 1: COPY statement failed.
> ERROR:  date/time field value out of range: "0000/00/00"
> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
>
> Inserts are really slow, so I'd love to use copy instead.
>
> On another layer, regardless of insert/copy, I'm getting:
>
> ERROR:  numeric field overflow
> DETAIL:  A field with precision 19, scale 11 must round to an absolute
> value less than 10^8.
> CONTEXT:  COPY poltwppoly, line 1, column shape_area:
> "1005965403.24000000954"
>
> I'm using: GDAL 1.9dev, released 2011/01/18
>
> I can make the shapefiles available if it would be of help.  Is there
> anything else I can do/try/offer?
>
> Thanks,
>
> -Andy
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110922/ab4d0880/attachment.html
From jamesfinkle at gmail.com  Thu Sep 22 14:20:06 2011
From: jamesfinkle at gmail.com (JamesFinkle)
Date: Fri Sep 23 12:05:16 2011
Subject: [gdal-dev] Affine Transforming an OGR Shape
Message-ID: <1316715606743-6821393.post@n2.nabble.com>

Hello,

Hopefully someone can help me with the issue I'm trying to solve here. I was
given a non-georeferenced scanned map as a raster and told to make
shapefiles for certain features of the map. It was not until I had finished
doing so that I realized that it was not georeferenced. I was able to
georeference the map raster itself through setting an affine transformation
with GDALDataset::SetGeoTransform(...). However, after searching fairly
exhaustively, I cannot find a way to do the same to the shapefiles.
GDALDataset::GetProjectionRef() is supposed to give a wkt that corresponds
to this affine transformation, which I would be able to create a
SpatialReference with to transform the shapefiles, but when invoked, it
gives me an empty string.

Thanks,
James

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Affine-Transforming-an-OGR-Shape-tp6821393p6821393.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Sep 22 14:31:37 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 23 12:17:25 2011
Subject: [gdal-dev] Affine Transforming an OGR Shape
In-Reply-To: <1316715606743-6821393.post@n2.nabble.com>
References: <1316715606743-6821393.post@n2.nabble.com>
Message-ID: <CA+YzLBcO1TsRhxkZYEhHSMA4EHbpSUe4M++5OdgVDbwLGj5Hfw@mail.gmail.com>

James,

On clumsy alternative is to modify and use the
"spatial transformer" script which allows you to
apply an arbitrary spatial transformation expressed
in Python:

  http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/vec_tr.py

There is no trivial mechanism for this in GDAL/OGR that
I am aware of.

Best regards,

On Thu, Sep 22, 2011 at 11:20 AM, JamesFinkle <jamesfinkle@gmail.com> wrote:
> Hello,
>
> Hopefully someone can help me with the issue I'm trying to solve here. I was
> given a non-georeferenced scanned map as a raster and told to make
> shapefiles for certain features of the map. It was not until I had finished
> doing so that I realized that it was not georeferenced. I was able to
> georeference the map raster itself through setting an affine transformation
> with GDALDataset::SetGeoTransform(...). However, after searching fairly
> exhaustively, I cannot find a way to do the same to the shapefiles.
> GDALDataset::GetProjectionRef() is supposed to give a wkt that corresponds
> to this affine transformation, which I would be able to create a
> SpatialReference with to transform the shapefiles, but when invoked, it
> gives me an empty string.
>
> Thanks,
> James
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Affine-Transforming-an-OGR-Shape-tp6821393p6821393.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From dmorissette at mapgears.com  Thu Sep 22 15:07:38 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Sep 23 12:55:33 2011
Subject: [gdal-dev] OGR SQL implicit conversions
In-Reply-To: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
References: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
Message-ID: <4E7B877A.9090106@mapgears.com>

No strong opinion/preference for me...


On 11-09-21 01:20 PM, Tamas Szekeres wrote:
> Hi Devs,
>
> We have some problems due to the recent changes in the SQL expression
> parser which is related to the change in the implicit type conversion
> behaviour.
>
> Formerly we could safely use the following statement:
>
> select * from mytable where ogr_fid in ('1100','1101','1102')
>
> If the data type of ogr_fid is an integer or float then the expression
> evaluator has converted the string constants to numeric values implicitly.
>
> As of 1.8 the parser reports an error due to the incompatible types in
> the expression.
>
> I've added a ticket #4259 <http://trac.osgeo.org/gdal/ticket/4259>
> related to this problem including a patch to handle these string to
> numeric conversions.
>
> However I'm a bit uncertain whether some other conversions should also
> be supported or not. Having a larger number of conversion rules we might
> probably think about rewriting the current approach by using a more
> generic implementation.
>
> Any ideas?
>
>
> Best regards,
>
> Tamas
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From jrepetto at free.fr  Thu Sep 22 16:14:40 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Sep 23 14:06:11 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <201109221903.49634.even.rouault@mines-paris.org>
References: <201108301322.46312.yjacolin@free.fr>
	<1314879172.4e5f76c4adb8f@webmail.free.fr>
	<4E7B59CE.6020006@free.fr>
	<201109221903.49634.even.rouault@mines-paris.org>
Message-ID: <4E7B9730.7010602@free.fr>

On 09/22/11 19:03, Even Rouault wrote:
>>
>> - gdal_edit reports no error when the parameters are wrong :
>> $ gdal_edit.py -mo KJHJKHJKHJ=GKFLLLMM France.ecw
>
> I see nothing wrong here. It is perfectly valid to assign GKFLLLMM to
> KJHJKHJKHJ metadata item. gdal_edit.py is meant as being generic, so if the
> driver doesn't understand natively the metadata item, this will generally
> fallback to storage in .aux.xml file if the driver supports the PAM mechanism.

At least, gdal_translate displays a warning :

$ gdal_translate -of ECW -co "KJHJ=KJKJ" -a_srs epsg:27572 test.jpg test.ecw
Input file size is 480, 272
Warning 6: Driver ECW does not support KJHJ creation option
0...10...20...30...40...50...60...70...80...90...100 - done.

>
>>
>> - It would be nice if gdal_edit could display the current parameters
>> when called without options.
>
> Well, gdalinfo does already do that, so I don't think this is really
> necessary.

I don't agree, gdalinfo gives some informations, but not the name of the 
datum and the name of the projection. And a lot of ECW projections or 
datums are not supported in GDAL.

Example :

$ gdal_translate -of ECW -co "DATUM=BELG72" -co "PROJ=LM2BELG72" -a_ullr 
100000 5000000 800000 4000000 test.jpg test.ecw
Input file size is 480, 272
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo test.ecw
Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: test.ecw
Size is 480, 272
Coordinate System is `'

When gdalinfo displays "Coordinate System is `'", how do you know if 
this is because the file is not georeferenced, or because GDAL does not 
know the projection ?


Jean-Claude
From even.rouault at mines-paris.org  Thu Sep 22 16:21:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 23 14:12:53 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <4E7B9730.7010602@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<201109221903.49634.even.rouault@mines-paris.org>
	<4E7B9730.7010602@free.fr>
Message-ID: <201109222221.02776.even.rouault@mines-paris.org>

Le jeudi 22 septembre 2011 22:14:40, Jean-Claude Repetto a ?crit :
> On 09/22/11 19:03, Even Rouault wrote:
> >> - gdal_edit reports no error when the parameters are wrong :
> >> $ gdal_edit.py -mo KJHJKHJKHJ=GKFLLLMM France.ecw
> > 
> > I see nothing wrong here. It is perfectly valid to assign GKFLLLMM to
> > KJHJKHJKHJ metadata item. gdal_edit.py is meant as being generic, so if
> > the driver doesn't understand natively the metadata item, this will
> > generally fallback to storage in .aux.xml file if the driver supports
> > the PAM mechanism.
> 
> At least, gdal_translate displays a warning :
> 
> $ gdal_translate -of ECW -co "KJHJ=KJKJ" -a_srs epsg:27572 test.jpg
> test.ecw Input file size is 480, 272
> Warning 6: Driver ECW does not support KJHJ creation option
> 0...10...20...30...40...50...60...70...80...90...100 - done.

Ah ok, I see your point, but we're talking about 2 different notions : creation 
options and metadata. Creation options are generally listed under a XML form 
within the driver code, which can used to validate user entry. Metadata items 
can be freely set by the user and there's no way (currently, and that I can 
think of for now), of distinguishing which ones are recognized specifically by 
the driver from the ones that are just user free metadata.

> 
> >> - It would be nice if gdal_edit could display the current parameters
> >> when called without options.
> > 
> > Well, gdalinfo does already do that, so I don't think this is really
> > necessary.
> 
> I don't agree, gdalinfo gives some informations, but not the name of the
> datum and the name of the projection. And a lot of ECW projections or
> datums are not supported in GDAL.

Try gdalinfo your.ecw -mdd ECW and you should see the DATUM, PROJ and UNITS 
displayed as they are recorded in the ECW header. This is the way of 
requesting the display of the ECW metadata domain mentionned in 
http://gdal.org/frmt_ecw.html (new in 1.9.0dev)
From arb at sat.dundee.ac.uk  Thu Sep 22 19:12:23 2011
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Sep 23 17:13:39 2011
Subject: [gdal-dev] adding georeferencing information
In-Reply-To: <4E7B4F12.5070404@uva.nl>
References: <4E64E0CC.1070000@uva.nl> <4E7B1E0E.10506@uva.nl>
	<CAHOfOo2-S5BGEEtE_dDSHcZf6p5fjc41FYXt68MwDSwXv+OnRw@mail.gmail.com>
	<4E7B4F12.5070404@uva.nl>
Message-ID: <CAHOfOo1_XSB_Y_LyTR+NO3KkefkC+x-SbzdmrR5V4NTS7M=LaA@mail.gmail.com>

On 22 September 2011 16:06, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:

>  Hi Andrew, I must have overlooked your mail. Applygeo is not mentioned on
> the libgeotiff page, but I found the following posting:
>
>
> http://osgeo-org.1803224.n2.nabble.com/Copy-projection-between-GeoTIFFs-td2065142.html
>

It is in the bin directory of the libgeotiff distribution:

https://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/bin/applygeo.c

No idea why it's not documented or mentioned on the libgeotiff web page! It
writes the geo information into the TIFF without having to re-write (copy)
the TIFF itself.

Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110923/ee20b428/attachment.html
From ankit.champaneriya at rolta.com  Fri Sep 23 05:34:14 2011
From: ankit.champaneriya at rolta.com (ankit.champaneriya@rolta.com)
Date: Sat Sep 24 04:09:41 2011
Subject: [gdal-dev] Re: angle information required
In-Reply-To: <1316770310053-6823564.post@n2.nabble.com>
References: <1316770310053-6823564.post@n2.nabble.com>
Message-ID: <1316770454478-6823574.post@n2.nabble.com>

HI, 
I want angle(rotation) information from dgn. 
I am using ogr2ogr tool 

regards, 
Ankit champaneriya  



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/angle-information-required-tp6823564p6823574.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ankit.champaneriya at rolta.com  Fri Sep 23 05:43:17 2011
From: ankit.champaneriya at rolta.com (ankit.champaneriya@rolta.com)
Date: Sat Sep 24 04:19:16 2011
Subject: [gdal-dev] DXF Writer and labels: encoding, angle and anchor
	position?
In-Reply-To: <31327.193.246.86.39.1288621162.squirrel@webmail.carto.net>
References: <31327.193.246.86.39.1288621162.squirrel@webmail.carto.net>
Message-ID: <1316770997191-6823598.post@n2.nabble.com>

HI, 
I want angle(rotation) information from dgn. 
I am using ogr2ogr tool .
I AM GETTING LEVEL,COLOR ,WEIGHT,STYLE BUT I M NOT GETTING ANGLE COLUMN..
source is .dgn file and destinatation kml or postgres.
tool is ogr2ogr.
Help me to solve this problem..


regards, 
Ankit champaneriya  



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-DXF-Writer-and-labels-encoding-angle-and-anchor-position-tp5693853p6823598.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From candini at meeo.it  Fri Sep 23 09:24:54 2011
From: candini at meeo.it (canduc17)
Date: Sat Sep 24 08:13:19 2011
Subject: [gdal-dev] GDAL link problem on MS Visual Express 2010
Message-ID: <1316784294105-6824209.post@n2.nabble.com>

I've followed instruction here
http://trac.osgeo.org/gdal/wiki/BuildingOnWindows to build gdal on Windows.

Now I have my installation under C:\ with this directory tree:


I'm using Microsoft Visual C++ 2010, but with this small example, linking
fails:




But I think to have set correctly include and lib paths into my project;  in
window Property Pages --> Configuration Properties --> VC++ Directories I
have set:


So, where am I wrong?

-- 
Alessandro Candini



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-link-problem-on-MS-Visual-Express-2010-tp6824209p6824209.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Sep 23 17:43:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 24 16:58:54 2011
Subject: [gdal-dev] OGR SQL implicit conversions
In-Reply-To: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
References: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
Message-ID: <201109232343.13693.even.rouault@mines-paris.org>

Le mercredi 21 septembre 2011 19:20:17, Tamas Szekeres a ?crit :
> Hi Devs,
> 
> We have some problems due to the recent changes in the SQL expression
> parser which is related to the change in the implicit type conversion
> behaviour.
> 
> Formerly we could safely use the following statement:
> 
> select * from mytable where ogr_fid in ('1100','1101','1102')
> 
> If the data type of ogr_fid is an integer or float then the expression
> evaluator has converted the string constants to numeric values implicitly.
> 
> As of 1.8 the parser reports an error due to the incompatible types in the
> expression.
> 
> I've added a ticket #4259 <http://trac.osgeo.org/gdal/ticket/4259> related
> to this problem including a patch to handle these string to numeric
> conversions.

You didn't mention that the patch only applies to the comparison operators ( 
>, >=, <, <=, =, <>, IN and BETWEEN ), which I think is an appropriate 
restriction. I was a bit skeptical at the beginning if it would also apply to 
+, - operators for example where it is not obvious in which way the conversion 
should be done.

I have done a bit of testing with PostgreSQL, MySQL and SQLite and, and they 
indeed do the conversions you suggest.

I've noticed that PostgreSQL issues an error when the conversion fails because 
the string constant isn't a numeric value.

$ ogrinfo pg:dbname=autotest -sql "select * from poly where eas_id = 'a'"
INFO: Open of `pg:dbname=autotest'
      using driver `PostgreSQL' successful.
ERROR 1: ERROR: invalid input syntax for double precision type : ? a ?
LINE 1: ...cuteSQLCursor CURSOR for select * from poly where eas_id = 'a'...

MySQL is much more silent about failed conversions however. With the MySQL OGR 
driver, nothing is emitted, but in the mysql console client, I could see a 
difference :

mysql> select * from poly where eas_id = 'a';
Empty set, 10 warnings (0.00 sec)

sqlite is completely silent in similar situations.

Personnaly, I think it would be appropriate for the OGR SQL engine to also 
emit an error/warning for failed conversions (or perhaps just a CPLDebug() if 
we feel that there's no reason to be too verbose in such situations), but 
obviously there doesn't seem to be a consensus on that among SQL vendors.

I believe this can be detected with something like :

val = strtod(pszVal, &endptr);
if (endptr != pszVal + strlen(pszVal))
{
	CPLError(...)
}


As far as the proposed patch is concerned, a bit of comment in the new 
function to explain shortly that it converts string constants to float 
constants when there is a mix of arguments of type numeric and string. In 
which case, integer constants will also be promoted to float. But that last 
part happens to be what SWQAutoPromoteIntegerToFloat() does already, so 
perhaps you could drop that part and just call SWQAutoConvertStringToNumeric() 
before SWQAutoPromoteIntegerToFloat(), so that 
SWQAutoConvertStringToNumeric() only does what its name suggests (perhaps 
renaming it to SWQAutoConvertStringToFloat() would be more consistant by the 
way) ? I have tested that quickly and it seems to work, but more extensive 
testing would be welcome.

On a stylistic note, I've had a hard time figuring out the operator precedence 
when reading the test :

        if( (eArgType == SWQ_STRING
            && (poSubNode->field_type == SWQ_INTEGER
                || poSubNode->field_type == SWQ_FLOAT)) || 
            (eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
            && (poSubNode->field_type == SWQ_STRING) )

So, I'd suggest to move the ( parenthesis of the last line on the line before 
(please check that it was indeed your intent) :

        if( (eArgType == SWQ_STRING
            && (poSubNode->field_type == SWQ_INTEGER
                || poSubNode->field_type == SWQ_FLOAT)) || 
            ((eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
            && poSubNode->field_type == SWQ_STRING) )

Extending ogr_sql_rfc28.py with a new test for the new behaviour would also be 
great.

So, all in all, I'm in favor of your approach and I'd suggest you should go 
ahead with it

> 
> However I'm a bit uncertain whether some other conversions should also be
> supported or not. Having a larger number of conversion rules we might
> probably think about rewriting the current approach by using a more generic
> implementation.
> 
> Any ideas?

Not really...

> 
> 
> Best regards,
> 
> Tamas
From nacnudus at gmail.com  Fri Sep 23 22:17:22 2011
From: nacnudus at gmail.com (Duncan Garmonsway)
Date: Sat Sep 24 21:48:24 2011
Subject: [gdal-dev] Installing GDAL with GEOS and Python Bindings on Ubuntu
 Linux Natty Narwhal 11.04
Message-ID: <CAARqVQOFgcv2jjp02JiUyEia_SOA6UsN3q0+kebrPH8Xz742Vg@mail.gmail.com>

Hi

How do you install GDAL with GEOS and the Python Bindings on Ubuntu Linux
Natty Narwhal 11.04?

I've Googled an awful lot and tried heaps of suggestions most of which I'm
afraid I can't remember.  Presumably my system is now in a horrible mess.  I
remember installing umpteen different versions of Python, for example.

Somehow I managed to get enough of GDAL and Python to work to use
gdalbuildvrt and gdal2tiles.py.  But now I want to do something like:

ogr2ogr -s_srs EPSG:2193 -t_srs EPSG:2193 -f "GeoJSON" -clipdst
18785164.071364913 -5009377.0856973119 20037508.342789244 -3757032.814272983
doc-campsites-clipped.json doc-campsites.shp

which responds with hundreds of lines of "ERROR 6: GEOS support not
enabled."  Leaving out "-clip dst", as below, works though.

ogr2ogr -s_srs EPSG:2193 -t_srs EPSG:2193 -f "GeoJSON"
doc-campsites-clipped.json doc-campsites.shp

I probably tried using the Ubuntu Software Centre.  I remember doing
something with FWTools, reluctantly, because it's out of date.  I remember
building lots of stuff from source.  I added the ubuntugis-unstable
repositry and did "apt-get update".  My hopes were raised when "apt-get
install gdal-bin" didn't fail, but then "apt-get install python-gdal"
responded with

The following packages have unmet dependencies:
 python-gdal : Depends: python (< 2.7) but 2.7.1-0ubuntu5 is to be installed
E: Broken packages

Which is how I ended up installing (maybe even building) earlier versions of
Python.

Many thanks,
Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110924/36c4507f/attachment.html
From alexander.bruy at gmail.com  Sat Sep 24 08:01:35 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Sep 25 08:05:13 2011
Subject: [gdal-dev] Problems with building GDAL 1.9 on Windows with MS VC
	2008 and OSGeo4W
Message-ID: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>

Hi all,

I'm trying to build GDAL trunk on Windows XP SP3 using dependencies
from OSGeo4W with
MS VS Express 2008 SP1 (MS Platform SDK for Windows Server 2003 R2
installed too).
I install all necessary packages from OSGeo4W, checkout latest GDAL
sources (r23115) then
edit nmake.opt file and specify paths for dependensies libs.

When I run nmake /f makefile.vc in Visual Studio command prompt I get
next errors:

D:\devel\gdal\trunk>nmake /f makefile.vc

Microsoft (R) Program Maintenance Utility   Version 7.00.8882
Copyright (C) Microsoft Corp 1988-2000. All rights reserved.

        cd port
        nmake /nologo /f makefile.vc
        cl  /nologo /MD /EHsc /Ox /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_D
EPRECATE /DNDEBUG /W4 /wd4127 /wd4251 /wd4275 /wd4786 /wd4100 /wd4245 /wd4206 /w
d4018 /wd4389 -I..\port -I..\ogr -I..\gcore  -I..\alg -I..\ogr\ogrsf_frmts -I..\
frmts\zlib -DHAVE_LIBZ -DHAVE_CURL  -IC:\OSGeo4W/include/curl -DOGR_ENABLED  /c
cpl_conv.cpp
cpl_conv.cpp
d:\devel\gdal\trunk\port\cpl_port.h(189) : warning C4005: 'VSI_LARGE_API_SUPPORT
ED' : macro redefinition
        d:\devel\gdal\trunk\port\cpl_config.h(185) : see previous definition of
'VSI_LARGE_API_SUPPORTED'
cpl_conv.cpp(1271) : error C3861: 'snprintf': identifier not found
cpl_conv.cpp(2377) : error C2079: 'sStatBuf' uses undefined struct 'stat64'
cpl_conv.cpp(2379) : error C2664: 'VSIStatL' : cannot convert parameter 2 from '
int *' to 'VSIStatBufL *'
        Types pointed to are unrelated; conversion requires reinterpret_cast, C-
style cast or function-style cast
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Platform SDK for Windows
 Server 2003 R2\Bin\nmake.exe"' : return code '0x2'
Stop.

In same time I can compile GDAL 1.8.1 using same paths in nmake.opt
file without any
errors. Any ideas?

Thanks
-- 
Alexander Bruy
From even.rouault at mines-paris.org  Sat Sep 24 08:11:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Sep 25 08:15:47 2011
Subject: [gdal-dev] Problems with building GDAL 1.9 on Windows with MS VC
	2008 and OSGeo4W
In-Reply-To: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>
References: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>
Message-ID: <201109241411.26161.even.rouault@mines-paris.org>

Le samedi 24 septembre 2011 14:01:35, Alexander Bruy a ?crit :

The line numbers in the error message makes me believe that, for some reason, 
the cpl_config.h that gets used is the Unix one and not the one coming from 
cpl_config.h.vc. So I'd suggest you delete port/cpl_config.h and start building 
again.
From dev4cx4m9z at snkmail.com  Sat Sep 24 08:31:16 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Sun Sep 25 08:36:47 2011
Subject: [gdal-dev] How do I convert LL to UTM?
Message-ID: <000001cc7ab5$dbb456c0$931d0440$@snkmail.com>

Can anybody see what I'm doing wrong (and don't say writing it in VB.NET) in
my logic of converting a Lat/Long to UTM?

 

   Dim MapSRS As New OGRSpatialReference       ' Coordinate system of map

   Dim UTMSRS As New OGRSpatialReference       ' Coordinate system for UTM

   Dim CT As OGRCoordinateTransformation       ' Coordinate transform from
map to UTM

   Dim GDALError As NCSError

 

   GDALError = WGS84SRS.SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system

   GDALError = UTMSRS.SetWellKnownGeogCS("WGS84")              ' Define a
UTM coordinate system

   

   GDALError = UTMSRS.SetUTM(55, false)

   CT = CreateCoordinateTransformation(MapSRS, UTMSRS)        ' Create a
coordinate transformation

 

   UTMeast = cursor.X : UTMnorth = cursor.Y            ' cursor.X = Lon;
cursor.Y = Lat

   Success = CT.TransformPoint(UTMeast, UTMnorth, 0)           ' Transform
the point

 

Success returns false, and UTMeast = -505516.60123597935 and UTMnorth =
9999959.7180830985

 

_______________________________________

Marc Hillman, Melbourne, Australia

 <http://users.tpg.com.au/users/mhillman/>
http://users.tpg.com.au/users/mhillman/

marc .hillman @ t p g . c o m . a u

Eagles may soar, but weasels don't get sucked into jet engines.

Early bird gets the worm, but the second mouse gets the cheese.

If Barbie is so popular, why do you have to buy her friends?

All those who believe in psychokinesis, raise my hand.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110924/d838629a/attachment.html
From dev4cx4m9z at snkmail.com  Sat Sep 24 08:45:43 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Sun Sep 25 08:51:59 2011
Subject: [gdal-dev] How do I convert LL to UTM?
In-Reply-To: <000001cc7ab5$dbb456c0$931d0440$@snkmail.com>
References: <000001cc7ab5$dbb456c0$931d0440$@snkmail.com>
Message-ID: <000b01cc7ab7$e0a89450$a1f9bcf0$@snkmail.com>

Sorry - left critical line out of previous post. Is there a web based
version of this mailing list? It's a bit tedious with mailman.

 

Can anybody see what I'm doing wrong (and don't say writing it in VB.NET) in
my logic of converting a Lat/Long to UTM? All the assignments, except the
lat one, are successful

 

   Dim MapSRS As New OGRSpatialReference       ' Coordinate system of map

   Dim UTMSRS As New OGRSpatialReference       ' Coordinate system for UTM

   Dim CT As OGRCoordinateTransformation       ' Coordinate transform from
map to UTM

   Dim GDALError As NCSError

 

   GDALError = WGS84SRS.SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system

   GDALError = UTMSRS.SetWellKnownGeogCS("WGS84")              ' Define a
UTM coordinate system

   GDALError = MapSRS.ImportFromEPSG(3517)

   

   GDALError = UTMSRS.SetUTM(55, false)

   CT = CreateCoordinateTransformation(MapSRS, UTMSRS)        ' Create a
coordinate transformation

 

   UTMeast = cursor.X : UTMnorth = cursor.Y            ' cursor.X = Lon;
cursor.Y = Lat

   Success = CT.TransformPoint(UTMeast, UTMnorth, 0)           ' Transform
the point

 

Success returns false, and UTMeast = -505516.60123597935 and UTMnorth =
9999959.7180830985

 

_______________________________________

Marc Hillman, Melbourne, Australia

http://users.tpg.com.au/users/mhillman/

marc .hillman @ t p g . c o m . a u

Eagles may soar, but weasels don't get sucked into jet engines.

Early bird gets the worm, but the second mouse gets the cheese.

If Barbie is so popular, why do you have to buy her friends?

All those who believe in psychokinesis, raise my hand.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110924/9fe008e9/attachment-0001.html
From jrepetto at free.fr  Sat Sep 24 09:15:25 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sun Sep 25 09:23:17 2011
Subject: [gdal-dev] How do I convert LL to UTM?
In-Reply-To: <000b01cc7ab7$e0a89450$a1f9bcf0$@snkmail.com>
References: <000001cc7ab5$dbb456c0$931d0440$@snkmail.com>
	<000b01cc7ab7$e0a89450$a1f9bcf0$@snkmail.com>
Message-ID: <4E7DD7ED.1080306@free.fr>

On 09/24/11 14:45, dev4cx4m9z@snkmail.com wrote:
>
> Success returns false, and UTMeast = -505516.60123597935 and UTMnorth =
> 9999959.7180830985
>

And the expected result was ...
From alexander.bruy at gmail.com  Sat Sep 24 09:43:57 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Sep 25 09:53:08 2011
Subject: [gdal-dev] Problems with building GDAL 1.9 on Windows with MS VC
	2008 and OSGeo4W
In-Reply-To: <201109241411.26161.even.rouault@mines-paris.org>
References: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>
	<201109241411.26161.even.rouault@mines-paris.org>
Message-ID: <CALuHMPBJjw4P2-GpU2_r3E=kqjP5NbURL5m2b7PWYDERXTGVyA@mail.gmail.com>

Thanks, renaming cpl_config.h.vc to cpl_config.h solves the problem.
Now GDAL compiles.

Unfortunatelly, I can't build Python bindigns because Python in OSGeo4W
was built with VS 2003 and seems there are no downloads for this VC version.
Bad...

2011/9/24 Even Rouault <even.rouault@mines-paris.org>:
> Le samedi 24 septembre 2011 14:01:35, Alexander Bruy a ?crit :
>
> The line numbers in the error message makes me believe that, for some reason,
> the cpl_config.h that gets used is the Unix one and not the one coming from
> cpl_config.h.vc. So I'd suggest you delete port/cpl_config.h and start building
> again.
>


Thanks
-- 
Alexander Bruy
From dev4cx4m9z at snkmail.com  Sat Sep 24 10:04:20 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Sun Sep 25 10:14:37 2011
Subject: [gdal-dev] How do I convert LL to UTM?
Message-ID: <001b01cc7ac2$dc4f4b50$94ede1f0$@snkmail.com>

Expected result was a UTMeast >0 . I always receive the same result no
matter the input.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jean-Claude Repetto
jrepetto-at-free.fr |GDAL|
Sent: Saturday, September 24, 2011 11:15 PM
To: marc.hillman@tpg.com.au; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How do I convert LL to UTM?

On 09/24/11 14:45, dev4cx4m9z@snkmail.com wrote:
>
> Success returns false, and UTMeast = -505516.60123597935 and UTMnorth 
> =
> 9999959.7180830985
>

And the expected result was ...
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Sat Sep 24 10:30:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Sep 25 10:42:08 2011
Subject: [gdal-dev] Problems with building GDAL 1.9 on Windows with MS VC
	2008 and OSGeo4W
In-Reply-To: <CALuHMPBJjw4P2-GpU2_r3E=kqjP5NbURL5m2b7PWYDERXTGVyA@mail.gmail.com>
References: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>
	<201109241411.26161.even.rouault@mines-paris.org>
	<CALuHMPBJjw4P2-GpU2_r3E=kqjP5NbURL5m2b7PWYDERXTGVyA@mail.gmail.com>
Message-ID: <201109241630.29387.even.rouault@mines-paris.org>

Le samedi 24 septembre 2011 15:43:57, Alexander Bruy a ?crit :
> Thanks, renaming cpl_config.h.vc to cpl_config.h solves the problem.
> Now GDAL compiles.
> 
> Unfortunatelly, I can't build Python bindigns because Python in OSGeo4W
> was built with VS 2003 and seems there are no downloads for this VC
> version. Bad...

http://svn.osgeo.org/gdal/trunk/gdal/swig/python/fallback_build.bat could 
perhaps be usefull. Credit must be given to Frank, because I just read that 
suggestion in the following thread :

http://lists.osgeo.org/pipermail/osgeo4w-dev/2011-September/001430.html

Or you could use a more modern version of python, that would like VC 2008, 
instead of the one bundled with OSGeo4W. 

Otherwise you might consider using http://www.gisinternals.com/sdk/ that has 
binary builds with a lot of dependencies and that support various python 
versions (>=2.6), and also the -sdk to redo/customize the build yourself if 
needed.

> 
> 2011/9/24 Even Rouault <even.rouault@mines-paris.org>:
> > Le samedi 24 septembre 2011 14:01:35, Alexander Bruy a ?crit :
> > 
> > The line numbers in the error message makes me believe that, for some
> > reason, the cpl_config.h that gets used is the Unix one and not the one
> > coming from cpl_config.h.vc. So I'd suggest you delete port/cpl_config.h
> > and start building again.
> 
> Thanks
From alexander.bruy at gmail.com  Sat Sep 24 11:52:04 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Sep 25 12:08:01 2011
Subject: [gdal-dev] Problems with building GDAL 1.9 on Windows with MS VC
	2008 and OSGeo4W
In-Reply-To: <201109241630.29387.even.rouault@mines-paris.org>
References: <CALuHMPD9BQKycYbRJY6rYc1b-zoRh=zancQMFrAhnt_B5vTJ6Q@mail.gmail.com>
	<201109241411.26161.even.rouault@mines-paris.org>
	<CALuHMPBJjw4P2-GpU2_r3E=kqjP5NbURL5m2b7PWYDERXTGVyA@mail.gmail.com>
	<201109241630.29387.even.rouault@mines-paris.org>
Message-ID: <CALuHMPAJTB+rgpaJmhFMKAwZxd0pEpO_WVr1PVr_gTQc4H=cdg@mail.gmail.com>

Thanks for this links. I'll try to build bindings using this information.

2011/9/24 Even Rouault <even.rouault@mines-paris.org>:
> Le samedi 24 septembre 2011 15:43:57, Alexander Bruy a ?crit :
>> Thanks, renaming cpl_config.h.vc to cpl_config.h solves the problem.
>> Now GDAL compiles.
>>
>> Unfortunatelly, I can't build Python bindigns because Python in OSGeo4W
>> was built with VS 2003 and seems there are no downloads for this VC
>> version. Bad...
>
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/fallback_build.bat could
> perhaps be usefull. Credit must be given to Frank, because I just read that
> suggestion in the following thread :
>
> http://lists.osgeo.org/pipermail/osgeo4w-dev/2011-September/001430.html
>
> Or you could use a more modern version of python, that would like VC 2008,
> instead of the one bundled with OSGeo4W.
>
> Otherwise you might consider using http://www.gisinternals.com/sdk/ that has
> binary builds with a lot of dependencies and that support various python
> versions (>=2.6), and also the -sdk to redo/customize the build yourself if
> needed.
>
>>
>> 2011/9/24 Even Rouault <even.rouault@mines-paris.org>:
>> > Le samedi 24 septembre 2011 14:01:35, Alexander Bruy a ?crit :
>> >
>> > The line numbers in the error message makes me believe that, for some
>> > reason, the cpl_config.h that gets used is the Unix one and not the one
>> > coming from cpl_config.h.vc. So I'd suggest you delete port/cpl_config.h
>> > and start building again.
>>
>> Thanks
>



-- 
Alexander Bruy
From szekerest at gmail.com  Sun Sep 25 17:49:00 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep 26 19:43:26 2011
Subject: [gdal-dev] OGR SQL expression parser overflow
Message-ID: <CACALY+SRT5gp10psgr+E2mn-TKEo52uO5y6iwnAHV4zoTraKdg@mail.gmail.com>

Hi Devs,

I've run into a "memory exhausted" error in the OGR SQL parser when the
token count exceeds 200. This is related to the YYINITDEPTH setting in
swq_parser.cpp
Does anyone know how to enable the built in stack extension mechanism which
can automatically extend the stack size up to YYMAXDEPTH (10000)?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110925/2be2fb95/attachment.html
From cold134 at hotmail.com  Mon Sep 26 02:37:04 2011
From: cold134 at hotmail.com (WangQin)
Date: Tue Sep 27 04:59:59 2011
Subject: [gdal-dev] Problems about saving/archiving restart files when
	running AM2.1
Message-ID: <SNT137-W161FDF268471684229FFABFDF30@phx.gbl>


Hi, there,
I am a new AM2.1 user on Linux platform (with MPI compiler).After successfully installation(compilation) recently, I always have one problem when running the fms_runscript. 
I couldn't get the restartfiles files," error: no restart files exist, run 1, loop1", in the directory of ascii, fms.out and logfile.0000.out are included, but no diag_integral.out or xgrid.out file exist.
The most strange thing is that there is someone on the same server run AM2.1 successfully, and I get the copy of code from her , but I can't run, I don't konw where should I check, and what is the possilble reason?
 

Looking forward to your reply!
Best regards,
Coraline
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/d91d128e/attachment.html
From candini at meeo.it  Mon Sep 26 02:37:11 2011
From: candini at meeo.it (canduc17)
Date: Tue Sep 27 05:00:05 2011
Subject: [gdal-dev] Re: GDAL link problem on MS Visual Express 2010
In-Reply-To: <1316784294105-6824209.post@n2.nabble.com>
References: <1316784294105-6824209.post@n2.nabble.com>
Message-ID: <1317019031844-6830879.post@n2.nabble.com>

I repost it because in the previous version, raw text has disappeared from
this message mail.

-------------------------------------------------------------------------------------------------------

I've followed instruction here
http://trac.osgeo.org/gdal/wiki/BuildingOnWindows to build gdal on Windows.

Now I have my installation under C:\ with this directory tree:

C:\
    GDAL-1.8.1
        bin
        lib
        data
        include
        html


I'm using Microsoft Visual C++ 2010, but with this small example, linking
fails:

#include <stdio.h>
#include <gdal.h>

int main() { GDALAllRegister(); return 0; }


------ Build started: Project: gdal_test, Configuration: Debug Win32 ------
  gdal_test.c
gdal_test.obj : error LNK2019: unresolved external symbol _GDALAllRegister@0
referenced in function _main
C:\Documents and Settings\utente\documenti\visual studio
2010\Projects\gdal_test\Debug\gdal_test.exe : fatal error LNK1120: 1
unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========


But I think to have set correctly include and lib paths into my project;  in
window Property Pages --> Configuration Properties --> VC++ Directories I
have set:

Executable Directories --> C:\GDAL-1.8.1\bin;$(ExecutablePath)
Include Directories --> C:\GDAL-1.8.1\include;$(IncludePath)
Library Directories --> C:\GDAL-1.8.1\lib;$(LibraryPath)


So, where am I wrong?


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-link-problem-on-MS-Visual-Express-2010-tp6824209p6830879.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From anton.korosov at nersc.no  Mon Sep 26 03:15:33 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Tue Sep 27 05:50:09 2011
Subject: [gdal-dev] Installing GDAL with GEOS and Python Bindings on Ubuntu
	Linux Natty Narwhal 11.04
In-Reply-To: <CAARqVQOFgcv2jjp02JiUyEia_SOA6UsN3q0+kebrPH8Xz742Vg@mail.gmail.com>
References: <CAARqVQOFgcv2jjp02JiUyEia_SOA6UsN3q0+kebrPH8Xz742Vg@mail.gmail.com>
Message-ID: <4E802695.4010503@nersc.no>

Hi
first install geos library using Ubuntu software center (libgeos, 
libgeos-dev)
then download gdal source and configure it:
./configure --with-python -with-geos=yes
then
make
sudo make install

If that doesn't work give me a sign, I'll publish more detailed 
instructions.

Good luck!
Anton

ps. I have Natty, Python 2.7 and GDAL with support of HDF4 and  GEOS. 
Everything works perfect.


On 09/24/2011 04:17 AM, Duncan Garmonsway wrote:
> Hi
>
> How do you install GDAL with GEOS and the Python Bindings on Ubuntu
> Linux Natty Narwhal 11.04?
>
> I've Googled an awful lot and tried heaps of suggestions most of which
> I'm afraid I can't remember.  Presumably my system is now in a horrible
> mess.  I remember installing umpteen different versions of Python, for
> example.
>
> Somehow I managed to get enough of GDAL and Python to work to use
> gdalbuildvrt and gdal2tiles.py.  But now I want to do something like:
>
> ogr2ogr -s_srs EPSG:2193 -t_srs EPSG:2193 -f "GeoJSON" -clipdst
> 18785164.071364913 -5009377.0856973119 20037508.342789244
> -3757032.814272983 doc-campsites-clipped.json doc-campsites.shp
>
> which responds with hundreds of lines of "ERROR 6: GEOS support not
> enabled."  Leaving out "-clip dst", as below, works though.
>
> ogr2ogr -s_srs EPSG:2193 -t_srs EPSG:2193 -f "GeoJSON"
> doc-campsites-clipped.json doc-campsites.shp
>
> I probably tried using the Ubuntu Software Centre.  I remember doing
> something with FWTools, reluctantly, because it's out of date.  I
> remember building lots of stuff from source.  I added the
> ubuntugis-unstable repositry and did "apt-get update".  My hopes were
> raised when "apt-get install gdal-bin" didn't fail, but then "apt-get
> install python-gdal" responded with
>
> The following packages have unmet dependencies:
>   python-gdal : Depends: python (< 2.7) but 2.7.1-0ubuntu5 is to be
> installed
> E: Broken packages
>
> Which is how I ended up installing (maybe even building) earlier
> versions of Python.
>
> Many thanks,
> Duncan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From candini at meeo.it  Mon Sep 26 05:44:18 2011
From: candini at meeo.it (canduc17)
Date: Tue Sep 27 08:17:27 2011
Subject: [gdal-dev] Re: GDAL link problem on MS Visual Express 2010
In-Reply-To: <1317019031844-6830879.post@n2.nabble.com>
References: <1316784294105-6824209.post@n2.nabble.com>
	<1317019031844-6830879.post@n2.nabble.com>
Message-ID: <1317030258491-6831304.post@n2.nabble.com>

I solved with the following steps:

1 - right click on project name in "Property Manager" window;
2 - click on properties;
3 - go to Configuration Properties --> Linker --> Input --> Additional
Dependencies;
4 - Add gdal_i.lib (which should be installed by nmake into $GDAL_HOME\lib)

Now the linking process works to me.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-link-problem-on-MS-Visual-Express-2010-tp6824209p6831304.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Mon Sep 26 11:23:12 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Sep 27 14:15:14 2011
Subject: [gdal-dev] Re: OGR SQL expression parser overflow
In-Reply-To: <CACALY+SRT5gp10psgr+E2mn-TKEo52uO5y6iwnAHV4zoTraKdg@mail.gmail.com>
References: <CACALY+SRT5gp10psgr+E2mn-TKEo52uO5y6iwnAHV4zoTraKdg@mail.gmail.com>
Message-ID: <CACALY+RFV=v7_VY=cqNh-SC1SZbe5p0gU=ytWxBpbWD0+CYVNw@mail.gmail.com>

Just an update to this, I've created a ticket for this problem, and attached
a patch which seems to be working in my local set-up.
http://trac.osgeo.org/gdal/ticket/4262

Due to the lack of my knowledge about bison let me know if one have a more
appropriate solution to this problem.

Any objection to update such change in the stable branch?

Best regards,

Tamas



2011/9/25 Tamas Szekeres <szekerest@gmail.com>

> Hi Devs,
>
> I've run into a "memory exhausted" error in the OGR SQL parser when the
> token count exceeds 200. This is related to the YYINITDEPTH setting in
> swq_parser.cpp
> Does anyone know how to enable the built in stack extension mechanism which
> can automatically extend the stack size up to YYMAXDEPTH (10000)?
>
> Best regards,
>
> Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/b084d45a/attachment.html
From szekerest at gmail.com  Mon Sep 26 11:33:53 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Sep 27 14:26:22 2011
Subject: [gdal-dev] OGR SQL implicit conversions
In-Reply-To: <201109232343.13693.even.rouault@mines-paris.org>
References: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
	<201109232343.13693.even.rouault@mines-paris.org>
Message-ID: <CACALY+Q9ikf8YcB5R9-aECG2p_mG2BZ7kDRpWCW8nt0e+Bg7Fg@mail.gmail.com>

Hi Even,

Thanks for the valuable comments, I've modified the patch in accordance with
your suggestions.
http://trac.osgeo.org/gdal/attachment/ticket/4259/swq_op_general.cpp.patch

Let me know if you find something else that can be changed. I've just added
a warning if the conversion fails, but I'm not quite sure if we can easily
generate errors at this state of the processing.

Best regards,

Tamas



2011/9/23 Even Rouault <even.rouault@mines-paris.org>

> Le mercredi 21 septembre 2011 19:20:17, Tamas Szekeres a ?crit :
> > Hi Devs,
> >
> > We have some problems due to the recent changes in the SQL expression
> > parser which is related to the change in the implicit type conversion
> > behaviour.
> >
> > Formerly we could safely use the following statement:
> >
> > select * from mytable where ogr_fid in ('1100','1101','1102')
> >
> > If the data type of ogr_fid is an integer or float then the expression
> > evaluator has converted the string constants to numeric values
> implicitly.
> >
> > As of 1.8 the parser reports an error due to the incompatible types in
> the
> > expression.
> >
> > I've added a ticket #4259 <http://trac.osgeo.org/gdal/ticket/4259>
> related
> > to this problem including a patch to handle these string to numeric
> > conversions.
>
> You didn't mention that the patch only applies to the comparison operators
> (
> >, >=, <, <=, =, <>, IN and BETWEEN ), which I think is an appropriate
> restriction. I was a bit skeptical at the beginning if it would also apply
> to
> +, - operators for example where it is not obvious in which way the
> conversion
> should be done.
>
> I have done a bit of testing with PostgreSQL, MySQL and SQLite and, and
> they
> indeed do the conversions you suggest.
>
> I've noticed that PostgreSQL issues an error when the conversion fails
> because
> the string constant isn't a numeric value.
>
> $ ogrinfo pg:dbname=autotest -sql "select * from poly where eas_id = 'a'"
> INFO: Open of `pg:dbname=autotest'
>      using driver `PostgreSQL' successful.
> ERROR 1: ERROR: invalid input syntax for double precision type : ? a ?
> LINE 1: ...cuteSQLCursor CURSOR for select * from poly where eas_id =
> 'a'...
>
> MySQL is much more silent about failed conversions however. With the MySQL
> OGR
> driver, nothing is emitted, but in the mysql console client, I could see a
> difference :
>
> mysql> select * from poly where eas_id = 'a';
> Empty set, 10 warnings (0.00 sec)
>
> sqlite is completely silent in similar situations.
>
> Personnaly, I think it would be appropriate for the OGR SQL engine to also
> emit an error/warning for failed conversions (or perhaps just a CPLDebug()
> if
> we feel that there's no reason to be too verbose in such situations), but
> obviously there doesn't seem to be a consensus on that among SQL vendors.
>
> I believe this can be detected with something like :
>
> val = strtod(pszVal, &endptr);
> if (endptr != pszVal + strlen(pszVal))
> {
>        CPLError(...)
> }
>
>
> As far as the proposed patch is concerned, a bit of comment in the new
> function to explain shortly that it converts string constants to float
> constants when there is a mix of arguments of type numeric and string. In
> which case, integer constants will also be promoted to float. But that last
> part happens to be what SWQAutoPromoteIntegerToFloat() does already, so
> perhaps you could drop that part and just call
> SWQAutoConvertStringToNumeric()
> before SWQAutoPromoteIntegerToFloat(), so that
> SWQAutoConvertStringToNumeric() only does what its name suggests (perhaps
> renaming it to SWQAutoConvertStringToFloat() would be more consistant by
> the
> way) ? I have tested that quickly and it seems to work, but more extensive
> testing would be welcome.
>
> On a stylistic note, I've had a hard time figuring out the operator
> precedence
> when reading the test :
>
>        if( (eArgType == SWQ_STRING
>            && (poSubNode->field_type == SWQ_INTEGER
>                || poSubNode->field_type == SWQ_FLOAT)) ||
>            (eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
>            && (poSubNode->field_type == SWQ_STRING) )
>
> So, I'd suggest to move the ( parenthesis of the last line on the line
> before
> (please check that it was indeed your intent) :
>
>        if( (eArgType == SWQ_STRING
>            && (poSubNode->field_type == SWQ_INTEGER
>                || poSubNode->field_type == SWQ_FLOAT)) ||
>            ((eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
>            && poSubNode->field_type == SWQ_STRING) )
>
> Extending ogr_sql_rfc28.py with a new test for the new behaviour would also
> be
> great.
>
> So, all in all, I'm in favor of your approach and I'd suggest you should go
> ahead with it
>
> >
> > However I'm a bit uncertain whether some other conversions should also be
> > supported or not. Having a larger number of conversion rules we might
> > probably think about rewriting the current approach by using a more
> generic
> > implementation.
> >
> > Any ideas?
>
> Not really...
>
> >
> >
> > Best regards,
> >
> > Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/bd57257d/attachment.html
From g.averlant at gmail.com  Mon Sep 26 11:59:31 2011
From: g.averlant at gmail.com (Guilhain Averlant)
Date: Tue Sep 27 14:53:46 2011
Subject: [gdal-dev] Problem with type of data in ESRI SHAPEFILE
Message-ID: <CAFYtvVzH847RbX0jq1O7aSe8kfF75_dtVbZXiYiVtPeJbgs7NA@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: OGR_GDAL_Letter.zip
Type: application/zip
Size: 6254 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/4137f45a/OGR_GDAL_Letter-0001.zip
From g.averlant at gmail.com  Mon Sep 26 12:09:49 2011
From: g.averlant at gmail.com (Guilhain Averlant)
Date: Tue Sep 27 15:04:37 2011
Subject: [gdal-dev] Problem with type of data in ESRI SHAPEFILE
Message-ID: <CAFYtvVyjnAL49e3u7CxDJxGJHKUC3fAV_imCvSfS03339qUFKw@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: OGR_GDAL_Letter.zip
Type: application/zip
Size: 6254 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/d89be178/OGR_GDAL_Letter.zip
From warmerdam at pobox.com  Mon Sep 26 12:22:03 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 27 15:17:13 2011
Subject: [gdal-dev] Problem with type of data in ESRI SHAPEFILE
In-Reply-To: <CAFYtvVyjnAL49e3u7CxDJxGJHKUC3fAV_imCvSfS03339qUFKw@mail.gmail.com>
References: <CAFYtvVyjnAL49e3u7CxDJxGJHKUC3fAV_imCvSfS03339qUFKw@mail.gmail.com>
Message-ID: <CA+YzLBdi8bW56GvQz9d376zixxgXmwFx3L=ymVBnF7GUzExj6g@mail.gmail.com>

Guilhain,

The problem is that you aren't setting the precison when you create
the new fields, so it is defaulting to precision zero (integer).

You will need a call something like:
    newField.SetPrecision( 11 )

Best regards,

On Mon, Sep 26, 2011 at 9:09 AM, Guilhain Averlant <g.averlant@gmail.com> wrote:
> Hi Everyone
>
> I'm writting a litte script that order points coordinates.
>
> But I don't know why but I have a problem when my script rebuild data
> associated to geometries.
>
> In fact I have a field in REAL who is in my new shapefile well-respected in
> Real too, but data are writting in integer...
>
> Do you have a solution ?
>
> Configuration :
> Python 2.6
> GDAL 1.8.0
> I try whit python 2.7 and GDAL 1.8.1 but the problem is still here.
>
> Guilhain
>
> PS : Script and data are attached to this email.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jzl5325 at psu.edu  Mon Sep 26 12:48:03 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Tue Sep 27 17:39:44 2011
Subject: [gdal-dev] Problem with type of data in ESRI SHAPEFILE
In-Reply-To: <CA+YzLBdi8bW56GvQz9d376zixxgXmwFx3L=ymVBnF7GUzExj6g@mail.gmail.com>
References: <CAFYtvVyjnAL49e3u7CxDJxGJHKUC3fAV_imCvSfS03339qUFKw@mail.gmail.com>
	<CA+YzLBdi8bW56GvQz9d376zixxgXmwFx3L=ymVBnF7GUzExj6g@mail.gmail.com>
Message-ID: <CA+bfmPsj-UKX+9NoYc_f2J_3JKZbZPeJpM8dUnSuNqOBrD2pOQ@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: example.py
Type: application/octet-stream
Size: 2839 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/3ac2949d/example.obj
From g.averlant at gmail.com  Mon Sep 26 15:05:59 2011
From: g.averlant at gmail.com (Guilhain Averlant)
Date: Tue Sep 27 18:10:01 2011
Subject: [gdal-dev] Problem with type of data in ESRI SHAPEFILE
In-Reply-To: <CA+bfmPsj-UKX+9NoYc_f2J_3JKZbZPeJpM8dUnSuNqOBrD2pOQ@mail.gmail.com>
References: <CAFYtvVyjnAL49e3u7CxDJxGJHKUC3fAV_imCvSfS03339qUFKw@mail.gmail.com>
	<CA+YzLBdi8bW56GvQz9d376zixxgXmwFx3L=ymVBnF7GUzExj6g@mail.gmail.com>
	<CA+bfmPsj-UKX+9NoYc_f2J_3JKZbZPeJpM8dUnSuNqOBrD2pOQ@mail.gmail.com>
Message-ID: <CAFYtvVyx6FWVGk0hn_aNj5K7RbGhG727w3+9St0OqPHy=m-RvA@mail.gmail.com>

It Works !

Thanks !

Guilhain

2011/9/26 Jay L. <jzl5325@psu.edu>

> What about something like this?  The block in the middle copies your fields
> and field definitions.  The def statement handles copying the individual
> fields for each feature.  Your script then goes in an modifies the geometry.
>
>
> This does roughly the same thing that Frank suggested, but is more script
> agnostic.  The field defs. are not manually set.
>
> J
>
>
> On Mon, Sep 26, 2011 at 9:22 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:
>
>> Guilhain,
>>
>> The problem is that you aren't setting the precison when you create
>> the new fields, so it is defaulting to precision zero (integer).
>>
>> You will need a call something like:
>>    newField.SetPrecision( 11 )
>>
>> Best regards,
>>
>> On Mon, Sep 26, 2011 at 9:09 AM, Guilhain Averlant <g.averlant@gmail.com>
>> wrote:
>> > Hi Everyone
>> >
>> > I'm writting a litte script that order points coordinates.
>> >
>> > But I don't know why but I have a problem when my script rebuild data
>> > associated to geometries.
>> >
>> > In fact I have a field in REAL who is in my new shapefile well-respected
>> in
>> > Real too, but data are writting in integer...
>> >
>> > Do you have a solution ?
>> >
>> > Configuration :
>> > Python 2.6
>> > GDAL 1.8.0
>> > I try whit python 2.7 and GDAL 1.8.1 but the problem is still here.
>> >
>> > Guilhain
>> >
>> > PS : Script and data are attached to this email.
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>>
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Guilhain AVERLANT
03 rue Germaine Tailleferre
75019 PARIS
06 28 22 83 05
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110926/0b2a14e8/attachment-0001.html
From even.rouault at mines-paris.org  Mon Sep 26 16:09:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep 27 19:17:30 2011
Subject: [gdal-dev] OGR SQL implicit conversions
In-Reply-To: <CACALY+Q9ikf8YcB5R9-aECG2p_mG2BZ7kDRpWCW8nt0e+Bg7Fg@mail.gmail.com>
References: <CACALY+R0b1H-qc+oqDv6FGupYm=OfpPMQrX9WVekCD5ohinV3g@mail.gmail.com>
	<201109232343.13693.even.rouault@mines-paris.org>
	<CACALY+Q9ikf8YcB5R9-aECG2p_mG2BZ7kDRpWCW8nt0e+Bg7Fg@mail.gmail.com>
Message-ID: <1317067796.4e80dc1491a05@webmail.free.fr>

Selon Tamas Szekeres <szekerest@gmail.com>:

> Hi Even,
>
> Thanks for the valuable comments, I've modified the patch in accordance with
> your suggestions.
> http://trac.osgeo.org/gdal/attachment/ticket/4259/swq_op_general.cpp.patch
>

Looks good to me.

> Best regards,
>
> Tamas
>
>
>
> 2011/9/23 Even Rouault <even.rouault@mines-paris.org>
>
> > Le mercredi 21 septembre 2011 19:20:17, Tamas Szekeres a ??crit :
> > > Hi Devs,
> > >
> > > We have some problems due to the recent changes in the SQL expression
> > > parser which is related to the change in the implicit type conversion
> > > behaviour.
> > >
> > > Formerly we could safely use the following statement:
> > >
> > > select * from mytable where ogr_fid in ('1100','1101','1102')
> > >
> > > If the data type of ogr_fid is an integer or float then the expression
> > > evaluator has converted the string constants to numeric values
> > implicitly.
> > >
> > > As of 1.8 the parser reports an error due to the incompatible types in
> > the
> > > expression.
> > >
> > > I've added a ticket #4259 <http://trac.osgeo.org/gdal/ticket/4259>
> > related
> > > to this problem including a patch to handle these string to numeric
> > > conversions.
> >
> > You didn't mention that the patch only applies to the comparison operators
> > (
> > >, >=, <, <=, =, <>, IN and BETWEEN ), which I think is an appropriate
> > restriction. I was a bit skeptical at the beginning if it would also apply
> > to
> > +, - operators for example where it is not obvious in which way the
> > conversion
> > should be done.
> >
> > I have done a bit of testing with PostgreSQL, MySQL and SQLite and, and
> > they
> > indeed do the conversions you suggest.
> >
> > I've noticed that PostgreSQL issues an error when the conversion fails
> > because
> > the string constant isn't a numeric value.
> >
> > $ ogrinfo pg:dbname=autotest -sql "select * from poly where eas_id = 'a'"
> > INFO: Open of `pg:dbname=autotest'
> >      using driver `PostgreSQL' successful.
> > ERROR 1: ERROR: invalid input syntax for double precision type : ?? a ??
> > LINE 1: ...cuteSQLCursor CURSOR for select * from poly where eas_id =
> > 'a'...
> >
> > MySQL is much more silent about failed conversions however. With the MySQL
> > OGR
> > driver, nothing is emitted, but in the mysql console client, I could see a
> > difference :
> >
> > mysql> select * from poly where eas_id = 'a';
> > Empty set, 10 warnings (0.00 sec)
> >
> > sqlite is completely silent in similar situations.
> >
> > Personnaly, I think it would be appropriate for the OGR SQL engine to also
> > emit an error/warning for failed conversions (or perhaps just a CPLDebug()
> > if
> > we feel that there's no reason to be too verbose in such situations), but
> > obviously there doesn't seem to be a consensus on that among SQL vendors.
> >
> > I believe this can be detected with something like :
> >
> > val = strtod(pszVal, &endptr);
> > if (endptr != pszVal + strlen(pszVal))
> > {
> >        CPLError(...)
> > }
> >
> >
> > As far as the proposed patch is concerned, a bit of comment in the new
> > function to explain shortly that it converts string constants to float
> > constants when there is a mix of arguments of type numeric and string. In
> > which case, integer constants will also be promoted to float. But that last
> > part happens to be what SWQAutoPromoteIntegerToFloat() does already, so
> > perhaps you could drop that part and just call
> > SWQAutoConvertStringToNumeric()
> > before SWQAutoPromoteIntegerToFloat(), so that
> > SWQAutoConvertStringToNumeric() only does what its name suggests (perhaps
> > renaming it to SWQAutoConvertStringToFloat() would be more consistant by
> > the
> > way) ? I have tested that quickly and it seems to work, but more extensive
> > testing would be welcome.
> >
> > On a stylistic note, I've had a hard time figuring out the operator
> > precedence
> > when reading the test :
> >
> >        if( (eArgType == SWQ_STRING
> >            && (poSubNode->field_type == SWQ_INTEGER
> >                || poSubNode->field_type == SWQ_FLOAT)) ||
> >            (eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
> >            && (poSubNode->field_type == SWQ_STRING) )
> >
> > So, I'd suggest to move the ( parenthesis of the last line on the line
> > before
> > (please check that it was indeed your intent) :
> >
> >        if( (eArgType == SWQ_STRING
> >            && (poSubNode->field_type == SWQ_INTEGER
> >                || poSubNode->field_type == SWQ_FLOAT)) ||
> >            ((eArgType == SWQ_INTEGER || eArgType == SWQ_FLOAT)
> >            && poSubNode->field_type == SWQ_STRING) )
> >
> > Extending ogr_sql_rfc28.py with a new test for the new behaviour would also
> > be
> > great.
> >
> > So, all in all, I'm in favor of your approach and I'd suggest you should go
> > ahead with it
> >
> > >
> > > However I'm a bit uncertain whether some other conversions should also be
> > > supported or not. Having a larger number of conversion rules we might
> > > probably think about rewriting the current approach by using a more
> > generic
> > > implementation.
> > >
> > > Any ideas?
> >
> > Not really...
> >
> > >
> > >
> > > Best regards,
> > >
> > > Tamas
> >
>


From lorenzo.moretti at enea.it  Mon Sep 26 15:25:25 2011
From: lorenzo.moretti at enea.it (Lorenzo Moretti)
Date: Tue Sep 27 19:33:40 2011
Subject: [gdal-dev] DXF export and text label
Message-ID: <1302CDFE-C7DA-4493-94D8-A27784A3C904@enea.it>

Hi Everyone

ogr2ogr is a great tool for converting any format.
Now there is DXF format and ogr2ogr works very well with polygons, lines and points.

There is a problem if I want to export a DXF file with the text from a field.
When I have a point shape file with text field ogr2ogr only export a DXF with points without text label.

How I can export a DXF file with text?

Thanks in advance
Lorenzo


From andy at squeakycode.net  Mon Sep 26 19:17:58 2011
From: andy at squeakycode.net (Andy Colson)
Date: Tue Sep 27 22:35:44 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <CAMKgpOZ8Zxp34f5LCZCrpcBqUk3dT6YHJyLc_VwREi+7ZShJng@mail.gmail.com>
References: <4E7B58CD.9070303@squeakycode.net>
	<CAMKgpOZ8Zxp34f5LCZCrpcBqUk3dT6YHJyLc_VwREi+7ZShJng@mail.gmail.com>
Message-ID: <4E810826.7080700@squeakycode.net>

> On Thu, Sep 22, 2011 at 9:18 PM, Andy Colson <andy@squeakycode.net <mailto:andy@squeakycode.net>> wrote:
>
>     Hi List,
>
>     I'm using ogr2ogr to convert (and reproject) data from shapefile to PG, if I use insert statements the null dates are not a problem, but if I set PG_USE_COPY=YES, then I get errors:
>
>     ERROR 1: COPY statement failed.
>     ERROR:  date/time field value out of range: "0000/00/00"
>     CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
>
>     Inserts are really slow, so I'd love to use copy instead.
>
>     On another layer, regardless of insert/copy, I'm getting:
>
>     ERROR:  numeric field overflow
>     DETAIL:  A field with precision 19, scale 11 must round to an absolute value less than 10^8.
>     CONTEXT:  COPY poltwppoly, line 1, column shape_area: "1005965403.24000000954"
>
>     I'm using: GDAL 1.9dev, released 2011/01/18
>
>     I can make the shapefiles available if it would be of help.  Is there anything else I can do/try/offer?
>
>     Thanks,
>
>     -Andy
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
On 09/22/2011 12:48 PM, Chaitanya kumar CH wrote:
> Andy,
>
> Send me the problematic shapefiles and explain what conversions you are trying to perform.
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


Were you able to get the files?  Did you find anything out?

-Andy
From nacnudus at gmail.com  Tue Sep 27 09:19:51 2011
From: nacnudus at gmail.com (Duncan Garmonsway)
Date: Wed Sep 28 13:24:03 2011
Subject: [gdal-dev] Installing GDAL with GEOS and Python Bindings on
	Ubuntu Linux Natty Narwhal 11.04
Message-ID: <CAARqVQMYhzsmuODNtD_OATr6+xRjCiXkYU8oKWQBDB9PEA3ReA@mail.gmail.com>

Oh dear, as simple as that!  It worked.  Thanks.

Duncan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110928/4bfcc449/attachment.html
From Ivan.Price at noveltis.fr  Tue Sep 27 09:53:15 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Wed Sep 28 14:07:42 2011
Subject: [gdal-dev] gdal_fillnodata smoothing water for a DEM
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC0393A@GLORFINDEL.noveltis.loc>


Hi there,

I am currently investigating a way to 'smooth out' water bodies in a DEM, where the water bodies are initially marked as NODATA, and are then interpolated from the surrounding ground pixels. Currently the water varies in height as a result in slighy variations in the shore height, ideally I'd like to average that to a single value, specific for each water body.

I have tried using the python script gdal_fillnodata, this works fine but if I try to use the -si option the NODATA (water) regions are never filled.. as per the bug ticket:

http://trac.osgeo.org/gdal/ticket/3988

.. so the water remains textured / sloping.

short of this working I am proposing to define a mask / polygon for each water body in a scene and calculate the average, replacing the target pixels.

anyone have any suggestions why gdal_fillnodata is broken, or an efficient method of forcing water bodies to be the same height ?

cheers and kudos as always to the GDAL community

-i

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110927/df1574ce/attachment.html
From matt.wilkie at gov.yk.ca  Tue Sep 27 12:50:39 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Sep 28 17:06:31 2011
Subject: [gdal-dev] gdal_fillnodata smoothing water for a DEM
In-Reply-To: <4E81FD09.1060202@gov.yk.ca>
References: <605C20E40C3B7D4E93E0E804EECE898E0BC0393A@GLORFINDEL.noveltis.loc>
	<4E81FD09.1060202@gov.yk.ca>
Message-ID: <4E81FEDF.2020801@gov.yk.ca>

Here is an excellent article on editing elevation models using photo 
tools by Tom Patterson of the US National Park Service:  
http://www.shadedrelief.com/dem/dem.html

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Tue Sep 27 13:48:03 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Sep 28 18:07:00 2011
Subject: [gdal-dev] gdal_fillnodata smoothing water for a DEM
In-Reply-To: <4E81FEDF.2020801@gov.yk.ca>
References: <605C20E40C3B7D4E93E0E804EECE898E0BC0393A@GLORFINDEL.noveltis.loc>
	<4E81FD09.1060202@gov.yk.ca> <4E81FEDF.2020801@gov.yk.ca>
Message-ID: <4E820C53.1030409@gov.yk.ca>

On September-27-11 9:50:39 AM, Matt Wilkie wrote:
> Here is an excellent article on editing elevation models using photo
> tools by Tom Patterson of the US National Park Service:
> http://www.shadedrelief.com/dem/dem.html

If this appears to be out of context, that's because it is. ;-) It's an 
addendum to a longer message with some attached images which is still 
waiting in the moderation queue.

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
-------------------------------------------- 
From rawcofe at gmail.com  Wed Sep 28 05:03:49 2011
From: rawcofe at gmail.com (rawcofe)
Date: Thu Sep 29 10:13:06 2011
Subject: [gdal-dev] Re: Using GDAL OGR DXF driver to export complex DXF
 Blocks from Kosmo (OpenJUMP)
In-Reply-To: <1971f2dd959fafc73e6c9d540fd9acee@carto.net>
References: <1313585887679-6695304.post@n2.nabble.com>
	<1971f2dd959fafc73e6c9d540fd9acee@carto.net>
Message-ID: <1317200629570-6839461.post@n2.nabble.com>

Hi, I'm re-posting my colleague post because it was not accepted by the
mailing list yet, and it's a kind of urgent. So here it is:

Hi,


I'm working with rawcofe and thank you all for your answers.  

We've temporary stoped working on that issue, but it is now again active and
would need some extra explanations.

Andreas; you've mentioned separate template drawing with block definitions.
Is this some special kind of dxf, or just a simple dxf file containing one
instance of that block?

Regarding "blockname", "blockscale", "blockangle" attribute; they should be
part of source schema?

Let's say that this works. Is it possible in this manner to create dxf that
has multiple layers, some of them containing different block types?


Thanks in advance.

Tomislav 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6839461.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tomislav.obad at gmail.com  Wed Sep 28 06:11:24 2011
From: tomislav.obad at gmail.com (tomislav.obad)
Date: Thu Sep 29 11:24:16 2011
Subject: [gdal-dev] Re: Using GDAL OGR DXF driver to export complex DXF
 Blocks from Kosmo (OpenJUMP)
In-Reply-To: <1313585887679-6695304.post@n2.nabble.com>
References: <1313585887679-6695304.post@n2.nabble.com>
Message-ID: <1317204684013-6839625.post@n2.nabble.com>

Hi all again,

I've forgot to ask one thing;
Is there possible to set values of attributes in block?

I've googled a little bit, and some are saying that it works, other ones
that it doesn't.
I've tried to make it work with attribute in layer (same name as the one in
block) but I'm recieving the followin error:

ERROR 1: DXF layer does not support arbitrary field creation.

Btw. that seems to me like a very important part of block writing feature.

Tomislav

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6839625.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From matt at wildwalks.com  Wed Sep 28 06:31:31 2011
From: matt at wildwalks.com (Matt McClelland)
Date: Thu Sep 29 11:45:31 2011
Subject: [gdal-dev] removing nodata voids from Geotiff
Message-ID: <CAGbhREm89WTDzo3_QyUehS1xAEcD86d67Wk7JKUZtPm+ZNd6_g@mail.gmail.com>

Hi

I am wanting to fill (interpolate) nodata values in a Geotiff.  (derived
from SRTM data).  They are small holes, usually just one pixel.

I tried variations on this
gdal_grid -a invdist -of GTiff S34E151.tif S34E151_grid.tif

But it did not work, no error message - just returned the help page.

I know this is not the main purpose of gdal_grid, but reading through the
documentation I was hoping it would do the job.
Any ideas on filling these gaps would be greatly appreciated. (pref using
linux)

Thanks

Matt  :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110928/88178b60/attachment.html
From Ivan.Price at noveltis.fr  Wed Sep 28 07:15:22 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Thu Sep 29 12:32:05 2011
Subject: [gdal-dev] removing nodata voids from Geotiff
In-Reply-To: <CAGbhREm89WTDzo3_QyUehS1xAEcD86d67Wk7JKUZtPm+ZNd6_g@mail.gmail.com>
References: <CAGbhREm89WTDzo3_QyUehS1xAEcD86d67Wk7JKUZtPm+ZNd6_g@mail.gmail.com>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC039BB@GLORFINDEL.noveltis.loc>

Hi Matt,

in a bizare coincidence of the world i just asked this yesterday.  The tool you want is gdal_fillnodata, you need gdal with python bindings.

as long as you don't try to use the -si option it works great.. for one pixel holes it'l be perfect.

-i



De : gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Matt McClelland
Envoy? : Wednesday, 28 September 2011 12:32 PM
? : gdal-dev@lists.osgeo.org
Objet : [gdal-dev] removing nodata voids from Geotiff

Hi

I am wanting to fill (interpolate) nodata values in a Geotiff.  (derived from SRTM data).  They are small holes, usually just one pixel.

I tried variations on this
gdal_grid -a invdist -of GTiff S34E151.tif S34E151_grid.tif

But it did not work, no error message - just returned the help page.

I know this is not the main purpose of gdal_grid, but reading through the documentation I was hoping it would do the job.
Any ideas on filling these gaps would be greatly appreciated. (pref using linux)

Thanks

Matt  :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110928/6c78a230/attachment.html
From Ivan.Price at noveltis.fr  Wed Sep 28 07:31:53 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Thu Sep 29 12:49:32 2011
Subject: [gdal-dev] gdal_fillnodata smoothing water for a DEM
In-Reply-To: <4E820C53.1030409@gov.yk.ca>
References: <605C20E40C3B7D4E93E0E804EECE898E0BC0393A@GLORFINDEL.noveltis.loc>
	<4E81FD09.1060202@gov.yk.ca> <4E81FEDF.2020801@gov.yk.ca>
	<4E820C53.1030409@gov.yk.ca>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC039E1@GLORFINDEL.noveltis.loc>

Thanks Matt

my problem is that this operation needs to be performed over a very wide area, comprised of many images with many water bodies, so it needs to be automatic.

My plan is to write something in python that:

- generates vector polys from original NODATA pixel areas (greater than a given area)
- performs the raster interpolation using fillnodata (fills lakes)
- then loops through each vector (water) feature:
  - creates a raster mask of this feature
  - calculates the average elevation for the water feature
  - writes that value back over the same data, 
  - loops next vector feature

our data is fairly good in that the water/shoreline doesn't vary much, so i'm expecting ther'l be no cliff effects as you experienced.

cheers for your input!

-i


-----Message d'origine-----
De?: Matt Wilkie [mailto:matt.wilkie@gov.yk.ca] 
Envoy??: Tuesday, 27 September 2011 7:48 PM
??: Ivan Price
Cc?: gdal-dev@lists.osgeo.org
Objet?: Re: [gdal-dev] gdal_fillnodata smoothing water for a DEM

On September-27-11 9:50:39 AM, Matt Wilkie wrote:
> Here is an excellent article on editing elevation models using photo 
> tools by Tom Patterson of the US National Park Service:
> http://www.shadedrelief.com/dem/dem.html

If this appears to be out of context, that's because it is. ;-) It's an addendum to a longer message with some attached images which is still waiting in the moderation queue.

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
-------------------------------------------- 
From andy at squeakycode.net  Wed Sep 28 10:49:47 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Sep 29 16:18:00 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E7B58CD.9070303@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
Message-ID: <4E83340B.8060004@squeakycode.net>

Sorry to keep pestering.  Is there a better place I should be seeking 
help?  Would a $bounty$ help?

-Andy

On 9/22/2011 10:48 AM, Andy Colson wrote:
> Hi List,
>
> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
> if I use insert statements the null dates are not a problem, but if I
> set PG_USE_COPY=YES, then I get errors:
>
> ERROR 1: COPY statement failed.
> ERROR: date/time field value out of range: "0000/00/00"
> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>
> Inserts are really slow, so I'd love to use copy instead.
>
> On another layer, regardless of insert/copy, I'm getting:
>
> ERROR: numeric field overflow
> DETAIL: A field with precision 19, scale 11 must round to an absolute
> value less than 10^8.
> CONTEXT: COPY poltwppoly, line 1, column shape_area:
> "1005965403.24000000954"
>
> I'm using: GDAL 1.9dev, released 2011/01/18
>
> I can make the shapefiles available if it would be of help. Is there
> anything else I can do/try/offer?
>
> Thanks,
>
> -Andy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Ivan.Price at noveltis.fr  Wed Sep 28 10:53:18 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Thu Sep 29 16:22:07 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E83340B.8060004@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<4E83340B.8060004@squeakycode.net>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>

is there a reason you don't want to use shp2pgsql ?

not sure if its better for everything but i've used it on occasion when i had a prob in ogr2ogr

-i



-----Message d'origine-----
De?: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Andy Colson
Envoy??: Wednesday, 28 September 2011 4:50 PM
??: gdal-dev@lists.osgeo.org
Objet?: Re: [gdal-dev] PostgreSQL

Sorry to keep pestering.  Is there a better place I should be seeking help?  Would a $bounty$ help?

-Andy

On 9/22/2011 10:48 AM, Andy Colson wrote:
> Hi List,
>
> I'm using ogr2ogr to convert (and reproject) data from shapefile to 
> PG, if I use insert statements the null dates are not a problem, but 
> if I set PG_USE_COPY=YES, then I get errors:
>
> ERROR 1: COPY statement failed.
> ERROR: date/time field value out of range: "0000/00/00"
> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>
> Inserts are really slow, so I'd love to use copy instead.
>
> On another layer, regardless of insert/copy, I'm getting:
>
> ERROR: numeric field overflow
> DETAIL: A field with precision 19, scale 11 must round to an absolute 
> value less than 10^8.
> CONTEXT: COPY poltwppoly, line 1, column shape_area:
> "1005965403.24000000954"
>
> I'm using: GDAL 1.9dev, released 2011/01/18
>
> I can make the shapefiles available if it would be of help. Is there 
> anything else I can do/try/offer?
>
> Thanks,
>
> -Andy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From andy at squeakycode.net  Wed Sep 28 11:09:00 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Sep 29 16:38:16 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>
References: <4E7B58CD.9070303@squeakycode.net>
	<4E83340B.8060004@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>
Message-ID: <4E83388C.8030604@squeakycode.net>

They use a slightly older version of shapelib that doesnt quite work 
with null's.  If I ogr2ogr shapefile -> shapefile (to get it in the 
projection I want), then shp2pgsql will fail with fields that are null.

Which, I could to ask them to update, yes.  It was a 50/50.  Ask gdal or 
ask postgis.

-Andy

On 9/28/2011 9:53 AM, Ivan Price wrote:
> is there a reason you don't want to use shp2pgsql ?
>
> not sure if its better for everything but i've used it on occasion when i had a prob in ogr2ogr
>
> -i
>
>
>
> -----Message d'origine-----
> De : gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Andy Colson
> Envoy? : Wednesday, 28 September 2011 4:50 PM
> ? : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] PostgreSQL
>
> Sorry to keep pestering.  Is there a better place I should be seeking help?  Would a $bounty$ help?
>
> -Andy
>
> On 9/22/2011 10:48 AM, Andy Colson wrote:
>> Hi List,
>>
>> I'm using ogr2ogr to convert (and reproject) data from shapefile to
>> PG, if I use insert statements the null dates are not a problem, but
>> if I set PG_USE_COPY=YES, then I get errors:
>>
>> ERROR 1: COPY statement failed.
>> ERROR: date/time field value out of range: "0000/00/00"
>> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>
>> Inserts are really slow, so I'd love to use copy instead.
>>
>> On another layer, regardless of insert/copy, I'm getting:
>>
>> ERROR: numeric field overflow
>> DETAIL: A field with precision 19, scale 11 must round to an absolute
>> value less than 10^8.
>> CONTEXT: COPY poltwppoly, line 1, column shape_area:
>> "1005965403.24000000954"
>>
>> I'm using: GDAL 1.9dev, released 2011/01/18
>>
>> I can make the shapefiles available if it would be of help. Is there
>> anything else I can do/try/offer?
>>
>> Thanks,
>>
>> -Andy
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Ivan.Price at noveltis.fr  Wed Sep 28 11:13:15 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Thu Sep 29 16:43:08 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E83388C.8030604@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<4E83340B.8060004@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>
	<4E83388C.8030604@squeakycode.net>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC03AA3@GLORFINDEL.noveltis.loc>

and you don't want to set the nulls to blank text before uploading ? (you could set them back once they'r up there, as well as perform the reprojection). i've never tried to use nulls in shapes before. can sqllite be used as an intermediatry instead ?

-i


-----Message d'origine-----
De?: Andy Colson [mailto:andy@squeakycode.net] 
Envoy??: Wednesday, 28 September 2011 5:09 PM
??: Ivan Price
Cc?: gdal-dev@lists.osgeo.org
Objet?: Re: [gdal-dev] PostgreSQL

They use a slightly older version of shapelib that doesnt quite work with null's.  If I ogr2ogr shapefile -> shapefile (to get it in the projection I want), then shp2pgsql will fail with fields that are null.

Which, I could to ask them to update, yes.  It was a 50/50.  Ask gdal or ask postgis.

-Andy

On 9/28/2011 9:53 AM, Ivan Price wrote:
> is there a reason you don't want to use shp2pgsql ?
>
> not sure if its better for everything but i've used it on occasion 
> when i had a prob in ogr2ogr
>
> -i
>
>
>
> -----Message d'origine-----
> De : gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Andy Colson 
> Envoy? : Wednesday, 28 September 2011 4:50 PM ? : 
> gdal-dev@lists.osgeo.org Objet : Re: [gdal-dev] PostgreSQL
>
> Sorry to keep pestering.  Is there a better place I should be seeking help?  Would a $bounty$ help?
>
> -Andy
>
> On 9/22/2011 10:48 AM, Andy Colson wrote:
>> Hi List,
>>
>> I'm using ogr2ogr to convert (and reproject) data from shapefile to 
>> PG, if I use insert statements the null dates are not a problem, but 
>> if I set PG_USE_COPY=YES, then I get errors:
>>
>> ERROR 1: COPY statement failed.
>> ERROR: date/time field value out of range: "0000/00/00"
>> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>
>> Inserts are really slow, so I'd love to use copy instead.
>>
>> On another layer, regardless of insert/copy, I'm getting:
>>
>> ERROR: numeric field overflow
>> DETAIL: A field with precision 19, scale 11 must round to an absolute 
>> value less than 10^8.
>> CONTEXT: COPY poltwppoly, line 1, column shape_area:
>> "1005965403.24000000954"
>>
>> I'm using: GDAL 1.9dev, released 2011/01/18
>>
>> I can make the shapefiles available if it would be of help. Is there 
>> anything else I can do/try/offer?
>>
>> Thanks,
>>
>> -Andy
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From andy at squeakycode.net  Wed Sep 28 11:22:38 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Sep 29 16:52:31 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E0BC03AA3@GLORFINDEL.noveltis.loc>
References: <4E7B58CD.9070303@squeakycode.net>
	<4E83340B.8060004@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>
	<4E83388C.8030604@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03AA3@GLORFINDEL.noveltis.loc>
Message-ID: <4E833BBE.6070104@squeakycode.net>

Not simply.  I am receiving data from many different places, some places 
send nice clean data, other's, not so much (all in different projections 
which is why I'm trying to find a common ground).  I have hundreds of 
shapefiles, with many times that of columns, any one of which may have 
nulls in it.

I could write something but I was hoping I could just get ogr2ogr fixed 
so my life would be simpler.  (I have other things at work I need to be 
spending my time on, ya know?)

-Andy

On 9/28/2011 10:13 AM, Ivan Price wrote:
> and you don't want to set the nulls to blank text before uploading ? (you could set them back once they'r up there, as well as perform the reprojection). i've never tried to use nulls in shapes before. can sqllite be used as an intermediatry instead ?
>
> -i
>
>
> -----Message d'origine-----
> De : Andy Colson [mailto:andy@squeakycode.net]
> Envoy? : Wednesday, 28 September 2011 5:09 PM
> ? : Ivan Price
> Cc : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] PostgreSQL
>
> They use a slightly older version of shapelib that doesnt quite work with null's.  If I ogr2ogr shapefile ->  shapefile (to get it in the projection I want), then shp2pgsql will fail with fields that are null.
>
> Which, I could to ask them to update, yes.  It was a 50/50.  Ask gdal or ask postgis.
>
> -Andy
>
> On 9/28/2011 9:53 AM, Ivan Price wrote:
>> is there a reason you don't want to use shp2pgsql ?
>>
>> not sure if its better for everything but i've used it on occasion
>> when i had a prob in ogr2ogr
>>
>> -i
>>
>>
>>
>> -----Message d'origine-----
>> De : gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Andy Colson
>> Envoy? : Wednesday, 28 September 2011 4:50 PM ? :
>> gdal-dev@lists.osgeo.org Objet : Re: [gdal-dev] PostgreSQL
>>
>> Sorry to keep pestering.  Is there a better place I should be seeking help?  Would a $bounty$ help?
>>
>> -Andy
>>
>> On 9/22/2011 10:48 AM, Andy Colson wrote:
>>> Hi List,
>>>
>>> I'm using ogr2ogr to convert (and reproject) data from shapefile to
>>> PG, if I use insert statements the null dates are not a problem, but
>>> if I set PG_USE_COPY=YES, then I get errors:
>>>
>>> ERROR 1: COPY statement failed.
>>> ERROR: date/time field value out of range: "0000/00/00"
>>> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>>
>>> Inserts are really slow, so I'd love to use copy instead.
>>>
>>> On another layer, regardless of insert/copy, I'm getting:
>>>
>>> ERROR: numeric field overflow
>>> DETAIL: A field with precision 19, scale 11 must round to an absolute
>>> value less than 10^8.
>>> CONTEXT: COPY poltwppoly, line 1, column shape_area:
>>> "1005965403.24000000954"
>>>
>>> I'm using: GDAL 1.9dev, released 2011/01/18
>>>
>>> I can make the shapefiles available if it would be of help. Is there
>>> anything else I can do/try/offer?
>>>
>>> Thanks,
>>>
>>> -Andy
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Ivan.Price at noveltis.fr  Wed Sep 28 11:29:48 2011
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Thu Sep 29 17:00:28 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E833BBE.6070104@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<4E83340B.8060004@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03A75@GLORFINDEL.noveltis.loc>
	<4E83388C.8030604@squeakycode.net>
	<605C20E40C3B7D4E93E0E804EECE898E0BC03AA3@GLORFINDEL.noveltis.loc>
	<4E833BBE.6070104@squeakycode.net>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E0BC03AC8@GLORFINDEL.noveltis.loc>

ah ok. well i reckon if the data's a bit unpredictable its gonna be better to write something that steps through the possible gotchyas.. once its in place you'l be glad for it.. and it'l likely be quicker than code fixes in gdal. good luck

-i


-----Message d'origine-----
De?: Andy Colson [mailto:andy@squeakycode.net] 
Envoy??: Wednesday, 28 September 2011 5:23 PM
??: Ivan Price
Cc?: gdal-dev@lists.osgeo.org
Objet?: Re: [gdal-dev] PostgreSQL

Not simply.  I am receiving data from many different places, some places send nice clean data, other's, not so much (all in different projections which is why I'm trying to find a common ground).  I have hundreds of shapefiles, with many times that of columns, any one of which may have nulls in it.

I could write something but I was hoping I could just get ogr2ogr fixed so my life would be simpler.  (I have other things at work I need to be spending my time on, ya know?)

-Andy

On 9/28/2011 10:13 AM, Ivan Price wrote:
> and you don't want to set the nulls to blank text before uploading ? (you could set them back once they'r up there, as well as perform the reprojection). i've never tried to use nulls in shapes before. can sqllite be used as an intermediatry instead ?
>
> -i
>
>
> -----Message d'origine-----
> De : Andy Colson [mailto:andy@squeakycode.net] Envoy? : Wednesday, 28 
> September 2011 5:09 PM ? : Ivan Price Cc : gdal-dev@lists.osgeo.org 
> Objet : Re: [gdal-dev] PostgreSQL
>
> They use a slightly older version of shapelib that doesnt quite work with null's.  If I ogr2ogr shapefile ->  shapefile (to get it in the projection I want), then shp2pgsql will fail with fields that are null.
>
> Which, I could to ask them to update, yes.  It was a 50/50.  Ask gdal or ask postgis.
>
> -Andy
>
> On 9/28/2011 9:53 AM, Ivan Price wrote:
>> is there a reason you don't want to use shp2pgsql ?
>>
>> not sure if its better for everything but i've used it on occasion 
>> when i had a prob in ogr2ogr
>>
>> -i
>>
>>
>>
>> -----Message d'origine-----
>> De : gdal-dev-bounces@lists.osgeo.org 
>> [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Andy Colson 
>> Envoy? : Wednesday, 28 September 2011 4:50 PM ? :
>> gdal-dev@lists.osgeo.org Objet : Re: [gdal-dev] PostgreSQL
>>
>> Sorry to keep pestering.  Is there a better place I should be seeking help?  Would a $bounty$ help?
>>
>> -Andy
>>
>> On 9/22/2011 10:48 AM, Andy Colson wrote:
>>> Hi List,
>>>
>>> I'm using ogr2ogr to convert (and reproject) data from shapefile to 
>>> PG, if I use insert statements the null dates are not a problem, but 
>>> if I set PG_USE_COPY=YES, then I get errors:
>>>
>>> ERROR 1: COPY statement failed.
>>> ERROR: date/time field value out of range: "0000/00/00"
>>> CONTEXT: COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>>
>>> Inserts are really slow, so I'd love to use copy instead.
>>>
>>> On another layer, regardless of insert/copy, I'm getting:
>>>
>>> ERROR: numeric field overflow
>>> DETAIL: A field with precision 19, scale 11 must round to an 
>>> absolute value less than 10^8.
>>> CONTEXT: COPY poltwppoly, line 1, column shape_area:
>>> "1005965403.24000000954"
>>>
>>> I'm using: GDAL 1.9dev, released 2011/01/18
>>>
>>> I can make the shapefiles available if it would be of help. Is there 
>>> anything else I can do/try/offer?
>>>
>>> Thanks,
>>>
>>> -Andy
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Sep 28 15:28:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 29 21:12:22 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E7B58CD.9070303@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
Message-ID: <201109282128.26359.even.rouault@mines-paris.org>

Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
> Hi List,
> 
> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
> if I use insert statements the null dates are not a problem, but if I
> set PG_USE_COPY=YES, then I get errors:
> 
> ERROR 1: COPY statement failed.
> ERROR:  date/time field value out of range: "0000/00/00"
> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
> 
> Inserts are really slow, so I'd love to use copy instead.

I didn't manage to get 0000/00/00 from a shapefile. I have done a few tests but 
I got null values as expected and they are correctly written as null values in 
the PG COPY statement. Perhaps you should file a Trac ticket with the shapefile 
attached and your exact ogr2ogr command line.

> 
> On another layer, regardless of insert/copy, I'm getting:
> 
> ERROR:  numeric field overflow
> DETAIL:  A field with precision 19, scale 11 must round to an absolute
> value less than 10^8.
> CONTEXT:  COPY poltwppoly, line 1, column shape_area:
> "1005965403.24000000954"

adding -lco PRECISION=NO might perhaps help

> 
> I'm using: GDAL 1.9dev, released 2011/01/18
> 
> I can make the shapefiles available if it would be of help.  Is there
> anything else I can do/try/offer?
> 
> Thanks,
> 
> -Andy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From andy at squeakycode.net  Wed Sep 28 17:09:01 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Sep 29 22:58:09 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <201109282128.26359.even.rouault@mines-paris.org>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
Message-ID: <4E838CED.8020809@squeakycode.net>

Would a 16Meg .zip file, that extracts to 157Meg, be acceptable in Trac? 
  I attempted to copy some records out, but it created the new shapefile 
with a type of ftString instead of ftDate.

-Andy

On 9/28/2011 2:28 PM, Even Rouault wrote:
> Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
>> Hi List,
>>
>> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
>> if I use insert statements the null dates are not a problem, but if I
>> set PG_USE_COPY=YES, then I get errors:
>>
>> ERROR 1: COPY statement failed.
>> ERROR:  date/time field value out of range: "0000/00/00"
>> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>
>> Inserts are really slow, so I'd love to use copy instead.
>
> I didn't manage to get 0000/00/00 from a shapefile. I have done a few tests but
> I got null values as expected and they are correctly written as null values in
> the PG COPY statement. Perhaps you should file a Trac ticket with the shapefile
> attached and your exact ogr2ogr command line.
>
>>
>> On another layer, regardless of insert/copy, I'm getting:
>>
>> ERROR:  numeric field overflow
>> DETAIL:  A field with precision 19, scale 11 must round to an absolute
>> value less than 10^8.
>> CONTEXT:  COPY poltwppoly, line 1, column shape_area:
>> "1005965403.24000000954"
>
> adding -lco PRECISION=NO might perhaps help
>
>>
>> I'm using: GDAL 1.9dev, released 2011/01/18
>>
>> I can make the shapefiles available if it would be of help.  Is there
>> anything else I can do/try/offer?
>>
>> Thanks,
>>
>> -Andy
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Sep 28 17:11:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 29 23:00:45 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E838CED.8020809@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
	<4E838CED.8020809@squeakycode.net>
Message-ID: <201109282311.17485.even.rouault@mines-paris.org>

Le mercredi 28 septembre 2011 23:09:01, Andy Colson a ?crit :
> Would a 16Meg .zip file, that extracts to 157Meg, be acceptable in Trac?
>   I attempted to copy some records out, but it created the new shapefile
> with a type of ftString instead of ftDate.

I'm afraid 16 MB will be too big. Perhaps uploading to some of those upload 
sites ?
From andy at squeakycode.net  Wed Sep 28 17:28:52 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Sep 29 23:19:08 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <201109282128.26359.even.rouault@mines-paris.org>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
Message-ID: <4E839194.4030907@squeakycode.net>

On 9/28/2011 2:28 PM, Even Rouault wrote:
>> >
>> >  On another layer, regardless of insert/copy, I'm getting:
>> >
>> >  ERROR:  numeric field overflow
>> >  DETAIL:  A field with precision 19, scale 11 must round to an absolute
>> >  value less than 10^8.
>> >  CONTEXT:  COPY poltwppoly, line 1, column shape_area:
>> >  "1005965403.24000000954"
> adding -lco PRECISION=NO might perhaps help
>

That does indeed fix it, thank you!

-Andy
From patdevelop at gmail.com  Wed Sep 28 21:38:46 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Fri Sep 30 03:43:08 2011
Subject: [gdal-dev] Can't get gdalwarp to create a raster in Mercator-2SP
	projection?
Message-ID: <CALOKYXVp5TUg4PW-74HcY6e8=WY=03+hncfDf0TeF7rB5LcJuQ@mail.gmail.com>

Hi,

As part of testing GDAL's NetCDF drivers projections, I've been trying
to gdalwarp a Geotiff file from a UTM projection to Mercator-2SP
(http://geotiff.maptools.org/proj_list/mercator_2sp.html).

Thinking I should file this as a ticket? But thought I'd post here first.

I've tried 2 approaches to specifying the target SRS as Mercator-2SP,
and in both cases the resulting files comes out as Mercator-1SP:

1) Specifying using Proj4 (the 'lat_ts' paramater specifies a std
parallel and differentiates from Mercator-1SP
gdalwarp -t_srs '+proj=merc +lat_ts=-45 +lon_0=145 +x_0=0 +y_0=0
+ellps=WGS84 +datum=WGS84 +units=m +no_defs' melb-small.tif
savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif

Resulting gdalinfo projection section:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",146],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

2) Specifying the full requested OGC WKT:
gdalwarp -t_srs 'PROJCS["unnamed", GEOGCS["WGS 84", DATUM["WGS_1984",
SPHEROID["WGS 84",6378137,298.257223563, AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]], PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433], AUTHORITY["EPSG","4326"]],
PROJECTION["Mercator_2SP"], PARAMETER["central_meridian",146],
PARAMETER["standard_parallel_1",-45],
PARAMETER["latitude_of_origin",0], PARAMETER["false_easting",0],
PARAMETER["false_northing",0], UNIT["metre",1,
AUTHORITY["EPSG","9001"]]]' melb-small.tif
savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif

Resulting gdalinfo projection section:
From patdevelop at gmail.com  Wed Sep 28 21:42:18 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Fri Sep 30 03:46:52 2011
Subject: [gdal-dev] Re: Can't get gdalwarp to create a raster in
	Mercator-2SP projection?
In-Reply-To: <CALOKYXVp5TUg4PW-74HcY6e8=WY=03+hncfDf0TeF7rB5LcJuQ@mail.gmail.com>
References: <CALOKYXVp5TUg4PW-74HcY6e8=WY=03+hncfDf0TeF7rB5LcJuQ@mail.gmail.com>
Message-ID: <CALOKYXV3mY3HkPt+Z9Hs0KwZt-aQX_yH_0EDAzzTJZzRB3SU7Q@mail.gmail.com>

Oops, sorry sent message accidentally without last bit of text output,
pls see below ...

On Thu, Sep 29, 2011 at 11:38 AM, Patrick Sunter <patdevelop@gmail.com> wrote:
> Hi,
>
> As part of testing GDAL's NetCDF drivers projections, I've been trying
> to gdalwarp a Geotiff file from a UTM projection to Mercator-2SP
> (http://geotiff.maptools.org/proj_list/mercator_2sp.html).
>
> Thinking I should file this as a ticket? But thought I'd post here first.
>
> I've tried 2 approaches to specifying the target SRS as Mercator-2SP,
> and in both cases the resulting files comes out as Mercator-1SP:
>
> 1) Specifying using Proj4 (the 'lat_ts' paramater specifies a std
> parallel and differentiates from Mercator-1SP
> gdalwarp -t_srs '+proj=merc +lat_ts=-45 +lon_0=145 +x_0=0 +y_0=0
> +ellps=WGS84 +datum=WGS84 +units=m +no_defs' melb-small.tif
> savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif
>
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",145],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]


>
> 2) Specifying the full requested OGC WKT:
> gdalwarp -t_srs 'PROJCS["unnamed", GEOGCS["WGS 84", DATUM["WGS_1984",
> SPHEROID["WGS 84",6378137,298.257223563, AUTHORITY["EPSG","7030"]],
> AUTHORITY["EPSG","6326"]], PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433], AUTHORITY["EPSG","4326"]],
> PROJECTION["Mercator_2SP"], PARAMETER["central_meridian",146],
> PARAMETER["standard_parallel_1",-45],
> PARAMETER["latitude_of_origin",0], PARAMETER["false_easting",0],
> PARAMETER["false_northing",0], UNIT["metre",1,
> AUTHORITY["EPSG","9001"]]]' melb-small.tif
> savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif
>
> Resulting gdalinfo projection section:
>
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",146],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

So it seems GDAL is falsely converting both requested translates to
Mercator-1SP?

thanks, Patrick.
From even.rouault at mines-paris.org  Thu Sep 29 02:36:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 08:57:14 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <201109282128.26359.even.rouault@mines-paris.org>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
Message-ID: <201109290836.37828.even.rouault@mines-paris.org>

Le mercredi 28 septembre 2011 21:28:26, Even Rouault a ?crit :
> Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
> > Hi List,
> > 
> > I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
> > if I use insert statements the null dates are not a problem, but if I
> > set PG_USE_COPY=YES, then I get errors:
> > 
> > ERROR 1: COPY statement failed.
> > ERROR:  date/time field value out of range: "0000/00/00"
> > CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
> > 
> > Inserts are really slow, so I'd love to use copy instead.
> 
> I didn't manage to get 0000/00/00 from a shapefile. I have done a few tests
> but I got null values as expected and they are correctly written as null
> values in the PG COPY statement. Perhaps you should file a Trac ticket
> with the shapefile attached and your exact ogr2ogr command line.
> 

On inspection, the null values for Date in this dbf file were indicated by a 
string filled with spaces. The fix is now in the shapefile driver in r23127.
From warmerdam at pobox.com  Thu Sep 29 03:03:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 30 09:26:01 2011
Subject: [gdal-dev] EPSG 7.9 Upgrade in Trunk
Message-ID: <4E84185D.3040301@pobox.com>

Folks,

I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG definitions regenerated
from the EPSG 7.9 database.  New "preferred datum shift selection" rules are
also in place which will give preference to 7 parameter datum shifts over
3 parameter datum shifts are also in place causing a fair amount of churn
in the definitions.

The updates are in "trunk" for each of the projects.  I plan to produce
libgeotiff and PROJ.4 release candidates soon with the new definitions
so if you think you might have objections please investigate and speak
up promptly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From even.rouault at mines-paris.org  Thu Sep 29 03:54:32 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 10:19:25 2011
Subject: [gdal-dev] EPSG 7.9 Upgrade in Trunk
In-Reply-To: <4E84185D.3040301@pobox.com>
References: <4E84185D.3040301@pobox.com>
Message-ID: <1317282872.4e842438d4527@webmail.free.fr>

Selon Frank Warmerdam <warmerdam@pobox.com>:

Frank,

There might be further actions needed as far as GDAL (and libgeotiff perhaps ?)
is concerned according to ticket http://trac.osgeo.org/gdal/ticket/4223 : "Next
time the EPSG database is updated, note that a Krovak parameter has been renamed
(and renumbered)."

Best regards,

Even

> Folks,
>
> I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG definitions regenerated
> from the EPSG 7.9 database.  New "preferred datum shift selection" rules are
> also in place which will give preference to 7 parameter datum shifts over
> 3 parameter datum shifts are also in place causing a fair amount of churn
> in the definitions.
>
> The updates are in "trunk" for each of the projects.  I plan to produce
> libgeotiff and PROJ.4 release candidates soon with the new definitions
> so if you think you might have objections please investigate and speak
> up promptly.


From ari.jolma at gmail.com  Thu Sep 29 04:36:24 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Sep 30 11:08:32 2011
Subject: [gdal-dev] EPSG 7.9 Upgrade in Trunk
In-Reply-To: <1317282872.4e842438d4527@webmail.free.fr>
References: <4E84185D.3040301@pobox.com>
	<1317282872.4e842438d4527@webmail.free.fr>
Message-ID: <4E842E08.1010703@gmail.com>

On 09/29/2011 10:54 AM, Even Rouault wrote:
> Selon Frank Warmerdam<warmerdam@pobox.com>:
>
> Frank,
>
> There might be further actions needed as far as GDAL (and libgeotiff perhaps ?)
> is concerned according to ticket http://trac.osgeo.org/gdal/ticket/4223 : "Next
> time the EPSG database is updated, note that a Krovak parameter has been renamed
> (and renumbered)."

I'm also concerned/worried. I haven't checked the latest update 
mentioned below yet but in general I've had a hard time lately with 
transformations involving datum changes. That is because some software 
(proj4 I think) requires nowadays explicit towgs zeros in some cases and 
many projection definitions don't have them. I'm not sure this is the 
same issue than the new rules Frank mentions. In general I've had to 
tinker with QGIS EPSG databases, PostGIS installation files etc, and the 
strings spatialreference.org has given hasn't been good in this respect. 
I don't have a very clear picture of the issue, sorry, I've dealt with 
it as I've hit problems.

Best regards,

Ari

> Best regards,
>
> Even
>
>> Folks,
>>
>> I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG definitions regenerated
>> from the EPSG 7.9 database.  New "preferred datum shift selection" rules are
>> also in place which will give preference to 7 parameter datum shifts over
>> 3 parameter datum shifts are also in place causing a fair amount of churn
>> in the definitions.
>>
>> The updates are in "trunk" for each of the projects.  I plan to produce
>> libgeotiff and PROJ.4 release candidates soon with the new definitions
>> so if you think you might have objections please investigate and speak
>> up promptly.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hamish_b at yahoo.com  Thu Sep 29 04:51:32 2011
From: hamish_b at yahoo.com (Hamish)
Date: Fri Sep 30 11:22:00 2011
Subject: [gdal-dev] Re: [Proj] EPSG 7.9 Upgrade in Trunk
In-Reply-To: <4E84185D.3040301@pobox.com>
Message-ID: <1317286292.34890.YahooMailClassic@web110003.mail.gq1.yahoo.com>

Frank wrote:
> I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG
> definitions regenerated from the EPSG 7.9 database.  New
> "preferred datum shift selection" rules are also in place which
> will give preference to 7 parameter datum shifts over
> 3 parameter datum shifts are also in place causing a fair
> amount of churn in the definitions.
> 
> The updates are in "trunk" for each of the projects. 
> I plan to produce libgeotiff and PROJ.4 release candidates
> soon with the new definitions so if you think you might have
> objections please investigate and speak up promptly.

Hi,

as per
  https://trac.osgeo.org/proj/ticket/122
and 
  https://trac.osgeo.org/grass/ticket/1452  [*]

pre-selecting datum transform terms on our behalf, while at the
same time removing all indication of what the +datum originally
was, really fouls things up for GRASS, and more locally for all
us EPSG file users in New Zealand, where tectonic shear from
the west coast to the east is on the order of about 4cm/year
over a distance of hundred km or so & the choice in the matter
has a rather big impact on our results / it's good to be forced
to specify which flavor your dealing with.

Ideally, for datums known to the osgeo stack I'd beg for the
+datum term be reinstated and that datum transform terms not be
decided on our behalf, with no way to back out of the pre-
selected choice.

More generally it means we can't really use the epsg file as a
semi-authoritative source of what some given epsg code refers
to anymore. :-(


--
ignoring my argument that it isn't really possible/a good idea,
and just assuming that it is possible to choose between 7-term
vs. 3-term vs. grid file as the sensible default, it is my
understanding that the 7-term solutions are in general only
valid (respected?) in a much smaller geographic area than the
3-term ones. aka 7-term does not necessarily mean more correct,
and if the epsg code covers a wide area, in much of the region
a locale-specific 7-term solution would be the worse choice
than a less precise 3-term solution. ISTR that Cliff(??) had
published an article about this paradox some time ago.
 


thanks,
Hamish


*see also
 https://trac.osgeo.org/grass/browser/grass/trunk/lib/proj/datum.c#L59

From yrrman at gmail.com  Thu Sep 29 07:00:14 2011
From: yrrman at gmail.com (christian yrrman)
Date: Fri Sep 30 13:35:04 2011
Subject: [gdal-dev] 
	gdal_calc.py, calculating the mean value of masked arrays
Message-ID: <CAJ79dQrNK93GaxpAckijevq0sSnXi8243r7i37Zb-ZjxvGxE=g@mail.gmail.com>

Dear All,


I'm trying to use gdal_calc.py to solve the following problem:

I have a time series of NDVI data as 8bit tiff files with different
BadData pixels (>50 and <250; this is the same for all layers) from
which I would like to calculate the mean.
(i.e. the same pixel might not be valid in all members of the time
series, and accordingly: Only sum up valid values and divide by the
number of valid layers, not all).

There exists a numpy array function that does exactly this:
[0] ma.masked_outside(d, 0.1, 0.9).mean()  # calculating the mean only
within the interval [0.1 - 0.9]

As far as I understand it, gdal_calc.py can also use numpy array
funtions for calculations, but I'm not sure how this should look like;
something like this:

Pseudo-code:
gdal_calc.py -A layer1.tif  -B layer2.tif -C layer3.tif
--outfile=test.tif --calc="masked_outside((A,B,C), 50,250).mean" ?


Do you think this is possible? Thanks in advance, and help highly appreciated!
:-)


Greetings, Chris



[0] http://docs.scipy.org/doc/numpy/reference/maskedarray.generic.html#data-with-a-given-value-representing-missing-data
From woodbri at swoodbridge.com  Thu Sep 29 09:54:22 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep 30 16:38:48 2011
Subject: [gdal-dev] EPSG 7.9 Upgrade in Trunk
In-Reply-To: <4E84185D.3040301@pobox.com>
References: <4E84185D.3040301@pobox.com>
Message-ID: <4E84788E.9090607@swoodbridge.com>

On 9/29/2011 3:03 AM, Frank Warmerdam wrote:
> Folks,
>
> I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG definitions
> regenerated
> from the EPSG 7.9 database. New "preferred datum shift selection" rules are
> also in place which will give preference to 7 parameter datum shifts over
> 3 parameter datum shifts are also in place causing a fair amount of churn
> in the definitions.
>
> The updates are in "trunk" for each of the projects. I plan to produce
> libgeotiff and PROJ.4 release candidates soon with the new definitions
> so if you think you might have objections please investigate and speak
> up promptly.
>
> Best regards,

Hi Frank,

It seems to me that there needs to be an easy way to get PROJ4 epsg 
behavior if this is not going to be the default behavior. Maybe this 
could be something like having an epsg file with the parameters tweaked 
so the new code acts like the old code, and then having an epsg7 file 
that allows access to the new definitions. I can see a lot of chaos and 
hand wringing as various software packages get upgraded asynchronously 
and projections fail to overlay correctly. Maybe I'm not understanding 
the potential problem, but if this is a possible scenario, then having 
an easy migration path would make a lot of sense.

Thanks,
   -Steve
From andy at squeakycode.net  Thu Sep 29 09:55:07 2011
From: andy at squeakycode.net (Andy Colson)
Date: Fri Sep 30 16:39:26 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <201109290836.37828.even.rouault@mines-paris.org>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
	<201109290836.37828.even.rouault@mines-paris.org>
Message-ID: <4E8478BB.601@squeakycode.net>

On 9/29/2011 1:36 AM, Even Rouault wrote:
> Le mercredi 28 septembre 2011 21:28:26, Even Rouault a ?crit :
>> Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
>>> Hi List,
>>>
>>> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
>>> if I use insert statements the null dates are not a problem, but if I
>>> set PG_USE_COPY=YES, then I get errors:
>>>
>>> ERROR 1: COPY statement failed.
>>> ERROR:  date/time field value out of range: "0000/00/00"
>>> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>>
>>> Inserts are really slow, so I'd love to use copy instead.
>>
>> I didn't manage to get 0000/00/00 from a shapefile. I have done a few tests
>> but I got null values as expected and they are correctly written as null
>> values in the PG COPY statement. Perhaps you should file a Trac ticket
>> with the shapefile attached and your exact ogr2ogr command line.
>>
>
> On inspection, the null values for Date in this dbf file were indicated by a
> string filled with spaces. The fix is now in the shapefile driver in r23127.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Really?  Weird.  I have a little program you can write sql and hit .dbf 
files, I can run:

select count(*) from ParcelAnnoV2 where recorded is null

and it returns 34490 rows.  But, it makes a lot more sense if they were 
spaced and not nulled.  So this was a shapefile fix not a PG driver fix? 
  How did the PG as insert statements work, but PG as COPY didn't?

Thank you very much for the help.  I'll check this out and run it.

-Andy
From rush at winkey.org  Thu Sep 29 10:40:38 2011
From: rush at winkey.org (Brian Case)
Date: Fri Sep 30 17:27:47 2011
Subject: [gdal-dev] Re: Can't get gdalwarp to create a raster in
	Mercator-2SP projection?
In-Reply-To: <CALOKYXV3mY3HkPt+Z9Hs0KwZt-aQX_yH_0EDAzzTJZzRB3SU7Q@mail.gmail.com>
References: <CALOKYXVp5TUg4PW-74HcY6e8=WY=03+hncfDf0TeF7rB5LcJuQ@mail.gmail.com>
	<CALOKYXV3mY3HkPt+Z9Hs0KwZt-aQX_yH_0EDAzzTJZzRB3SU7Q@mail.gmail.com>
Message-ID: <1317307238.30287.3.camel@octopi>

Patrick

from http://remotesensing.org/geotiff/proj_list/mercator_2sp.html

"The difference between 1SP and 2SP formulations is that the initial
parameters are different: in 1SP you start from the longitude of natural
origin and the scale factor, while in 2SP you start from the longitude
of natural origin and the latitude of one of the standard parallels (the
other is symmetrical in relation to the equator). So, the formulas of
2SP are just those for 1SP after calculating the scale factor from the
absolute value of the latitude of the standard parallels and the "e"
parameter of the datum."


I noticed your scale factor is 1 so isn't that the same thing?

"The Mercator projection is a special case of the Lambert Conic
Conformal projection with the equator as the single standard parallel.
All other parallels of latitude are straight lines and the meridians are
also straight lines at right angles to the equator, equally spaced. It
is little used for land mapping purposes but is in universal use for
navigation charts and is the basis for the transverse and oblique forms
of the Mercator. As well as being conformal, it has the particular
property that straight lines drawn on it are lines of constant bearing.
Thus navigators may derive their course from the angle the straight
course line makes with the meridians.

In the few cases in which the Mercator projection is used for
terrestrial applications or land mapping, such as in Indonesia prior to
the introduction of the Universal Transverse Mercator, a scale factor
may be applied to the projection. This has the same effect as choosing
two standard parallels on which the true scale is maintained at equal
north and south latitudes either side of the equator."

from http://remotesensing.org/geotiff/proj_list/mercator_1sp.html

"I believe the formula (EPSG) notes are exactly the same for Mercator
(1SP) and Mercator (2SP). There is only one projection in GeoTIFF for
straight Mercator."



hope this helps

Brian



On Thu, 2011-09-29 at 11:42 +1000, Patrick Sunter wrote:
> Oops, sorry sent message accidentally without last bit of text output,
> pls see below ...
> 
> On Thu, Sep 29, 2011 at 11:38 AM, Patrick Sunter <patdevelop@gmail.com> wrote:
> > Hi,
> >
> > As part of testing GDAL's NetCDF drivers projections, I've been trying
> > to gdalwarp a Geotiff file from a UTM projection to Mercator-2SP
> > (http://geotiff.maptools.org/proj_list/mercator_2sp.html).
> >
> > Thinking I should file this as a ticket? But thought I'd post here first.
> >
> > I've tried 2 approaches to specifying the target SRS as Mercator-2SP,
> > and in both cases the resulting files comes out as Mercator-1SP:
> >
> > 1) Specifying using Proj4 (the 'lat_ts' paramater specifies a std
> > parallel and differentiates from Mercator-1SP
> > gdalwarp -t_srs '+proj=merc +lat_ts=-45 +lon_0=145 +x_0=0 +y_0=0
> > +ellps=WGS84 +datum=WGS84 +units=m +no_defs' melb-small.tif
> > savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif
> >
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",145],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> 
> 
> >
> > 2) Specifying the full requested OGC WKT:
> > gdalwarp -t_srs 'PROJCS["unnamed", GEOGCS["WGS 84", DATUM["WGS_1984",
> > SPHEROID["WGS 84",6378137,298.257223563, AUTHORITY["EPSG","7030"]],
> > AUTHORITY["EPSG","6326"]], PRIMEM["Greenwich",0],
> > UNIT["degree",0.0174532925199433], AUTHORITY["EPSG","4326"]],
> > PROJECTION["Mercator_2SP"], PARAMETER["central_meridian",146],
> > PARAMETER["standard_parallel_1",-45],
> > PARAMETER["latitude_of_origin",0], PARAMETER["false_easting",0],
> > PARAMETER["false_northing",0], UNIT["metre",1,
> > AUTHORITY["EPSG","9001"]]]' melb-small.tif
> > savedResults/Melb_USGS/refactored_gdal/melb-small_M-2SP.tif
> >
> > Resulting gdalinfo projection section:
> >
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",146],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> 
> So it seems GDAL is falsely converting both requested translates to
> Mercator-1SP?
> 
> thanks, Patrick.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Dave.DeHaan at sybase.com  Thu Sep 29 11:07:43 2011
From: Dave.DeHaan at sybase.com (Dave.DeHaan@sybase.com)
Date: Fri Sep 30 17:59:19 2011
Subject: [gdal-dev] FYI: SQL Anywhere OGR driver under development
Message-ID: <OFF7E0D663.6643B463-ON8525791A.00515D5C-8525791A.00531ADC@sybase.com>


Hello GDAL/OGR devs,

I'm a developer at Sybase, working with the SQL Anywhere product.  SQL
Anywhere (SA) is a light-weight but fully-featured RDBMS with particular
strengths in the mobility and embedded markets.  SA version 12 (release in
2010) added spatial support modelled on the OGC/SQLMM standards.

I currently have a University of Waterloo coop student working for me who
is developing an OGR driver for SA 12+, with the intention of contributing
it to the project.  The driver code will be completely self-contained (SA
will not need to be installed in order to compile), so we hope that
packagers will add it to the set of default drivers they compile.

I hope to report back within a few months with a SA driver ready to be
contributed.  In the meantime, thanks in advance for any help you can offer
my coop should he post questions to this list.

Best regards
David E. DeHaan
SQL Anywhere Query Processing team
Sybase, an SAP Company

From bfoust at ittvis.com  Thu Sep 29 11:25:02 2011
From: bfoust at ittvis.com (barryfx)
Date: Fri Sep 30 18:14:31 2011
Subject: [gdal-dev] GDALPolygonize() Duplicate Geometry
Message-ID: <1317309902301-6844289.post@n2.nabble.com>

I'm using the GDAL 1.6.2  GDALPolygonize() function to convert a raster image
to vector format.  I'm then saving that off to an ESRI Shapefile.  The
resulting shapefile has a polygon with an inner ring (a hole).  The
shapefile also has an additional polygon with an exterior ring the size and
shape of the hole.  When viewed in ArcMAP it looks like the hole is filled
in, but if you delete the extra hole sized plolygon, the hole in the larger
polygon displays as expected.  I tried this with GDAL 1.8.1 with the same
result, so it is not a version issue.  Any help would be appreciated.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALPolygonize-Duplicate-Geometry-tp6844289p6844289.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From a.furieri at lqt.it  Thu Sep 29 11:59:05 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Fri Sep 30 19:19:49 2011
Subject: [gdal-dev] SpatiaLite patch-set
Message-ID: <20110929154825.M2119@lqt.it>

Hi all,

just a quick social introduction: I'm the main developer
and maintainer of the SpatiaLite DBMS.

I'm glad to submit to your attention the attached
patch-set, intended to add full and robust support 
for SpatiaLite [OGR/SQLite driver].

some months ago I've already contributed a patch-set
for OGR effectively supporting 2.5D geometries [recent 
versions of SpatiaLite]: and thanks to Even Rouault's 
kind cooperation that patch-set was duly accepted and 
committed to SVN-trunk.

Anyway, my previous patch-set was simply focused on 
"read" modes: the present patch-set is focused instead 
on effectively supporting "write" modes as well, thus 
allowing ogr2ogr to create fully valid SpatiaLite own 
DB-files.

just a short technical reminder: supporting "read" ops
doesn't strictly require OGR to be linked against libspatialite.
But any attempt to perform "write" ops skipping at all the 
expected libspatialite support will simply create a corrupted 
(i.e. broken, useless) DB-file, not a genuine SpatiaLite own.


ogr2ogr options:
================
the current implementation already supported several SpatiaLite 
specific options:

-dsco SPATIALITE=YES (enabling SpatiaLite DB creation)
-lco SPATIAL_INDEX=YES/NO (creating or not a Spatial Index)
I left both options completely unaffected.

-INIT_WITH_EPSG=YES/NO (populating or not the "spatial_ref_sys" 
 table)
I've changed the behaviour of this option:
* if libspatialite 2.3.1 (or any previous) is linked to ogr2ogr, 
  then the option behaviour is unaffected
* if libspatialite 2.4.0 (or any subsequent) is linked to ogr2ogr, this 
  option will be always ignored because any recent version automatically 
  loads the whole EPSG dataset into "spatial_ref_sys" while creating a 
  new DB.

I've introduced a further SpatiaLite specific option:
-lco FORCE_2D=YES/NO
interpretations is the following one:
* if libspatialite 2.3.1 is linked to ogr2ogr, then this option is 
  completely ignored, because v.2.3.1 simply supports 2D. 
  so, forcing any geometry to 2D is silently implied anyway.
* if libspatialite 2.4.0 (or any subsequent) is linked to ogr2ogr, 
  this option will be honoured as specified by the user.


about technical implementation:
===============================

ogr_sqlite.h
------------
I've introduced (several classes and methods affected) a new boolean 
variable: bSpatialite2D
this is intended to implement the FORCE_2D option

ogrsqlitetablelayer.cpp
-----------------------
I've simply added support to bSpatialite2D 

ogrsqlitedatasource.cpp
-----------------------
OGRSQLiteDataSource::CreateLayer()
I've completely replaced the code implementing creation of any 
SpatiaLite table and geometry.
Now the appropriate SpatiaLite's own SQL method AddGeometryColumn() 
is correctly invoked, avoiding at all any direct access to 
"geometry_columns".
(any such attempt will easily produce an inconsistent DB)

ogrsqlitedriver.cpp
-------------------
OGRSQLiteDriver::CreateDataSource()
I've completely changed the implementation of DB creation: 
now the appropriate SpatiaLite's own SQL method InitSpatialMetadata() 
is correctly invoked. 
(this too avoids generating broken and inconsistent DB-files).
And I've consistently handled INIT_WITH_EPSG as explained before.

ogrsqlitelayer.cpp
------------------
OGRSQLiteLayer::ComputeSpatiaLiteGeometrySize()
OGRSQLiteLayer::ExportSpatiaLiteGeometryInternal()
OGRSQLiteLayer::ExportSpatiaLiteGeometry()
Code arranged as appropriate, so to consistently honour the FORCE_2D
option accordingly to the library version linked to OGR.

drv_sqlite.html
---------------
updated documentation.

misc
----
I've added some 'contributing' disclaimer here and there,
acknowledging the financial support offered by Tuscany Region Govt.

other infos
-----------
the proposed patch-set doesn't impacts at all with the existing 
sqlite/FDO implementation.
any libspatialite version (from the nowadays obsolete 2.3.1 to 
the latest 3.0.0) is fully supported.
and finally OGR could be used to create fully valid SpatiaLite's
own DB-files without any inconsistency: surely a big improvement
for interoperability.
============================================

Glad to hear any comment from you about all this.

Sincerly your,
Sandro Furieri
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatialite_patch.zip
Type: application/zip
Size: 6801 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110929/7db0915f/spatialite_patch-0001.zip
From even.rouault at mines-paris.org  Thu Sep 29 12:28:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 19:21:54 2011
Subject: [gdal-dev] PostgreSQL
In-Reply-To: <4E8478BB.601@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
	<201109290836.37828.even.rouault@mines-paris.org>
	<4E8478BB.601@squeakycode.net>
Message-ID: <1317313716.4e849cb499b2c@webmail.free.fr>

Selon Andy Colson <andy@squeakycode.net>:

> On 9/29/2011 1:36 AM, Even Rouault wrote:
> > Le mercredi 28 septembre 2011 21:28:26, Even Rouault a ?crit :
> >> Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
> >>> Hi List,
> >>>
> >>> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
> >>> if I use insert statements the null dates are not a problem, but if I
> >>> set PG_USE_COPY=YES, then I get errors:
> >>>
> >>> ERROR 1: COPY statement failed.
> >>> ERROR:  date/time field value out of range: "0000/00/00"
> >>> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
> >>>
> >>> Inserts are really slow, so I'd love to use copy instead.
> >>
> >> I didn't manage to get 0000/00/00 from a shapefile. I have done a few
> tests
> >> but I got null values as expected and they are correctly written as null
> >> values in the PG COPY statement. Perhaps you should file a Trac ticket
> >> with the shapefile attached and your exact ogr2ogr command line.
> >>
> >
> > On inspection, the null values for Date in this dbf file were indicated by
> a
> > string filled with spaces. The fix is now in the shapefile driver in
> r23127.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Really?  Weird.  I have a little program you can write sql and hit .dbf
> files, I can run:
>
> select count(*) from ParcelAnnoV2 where recorded is null
>
> and it returns 34490 rows.  But, it makes a lot more sense if they were
> spaced and not nulled.

Apparently, the "conventional" way of writing a null data in the DBF is
"00000000", not spaces.

So this was a shapefile fix not a PG driver fix?
>   How did the PG as insert statements work, but PG as COPY didn't?

Yes that was a bit surprising. I looked, and there is a historical test in the
INSERT code path that tests for if the year is "0000" and if found, consider
that the date is null. This test did not exist in the COPY code path. Hence the
difference in behaviour.

But the right place to fix was the shapefile driver, not adding a hack in the PG
driver.

>
> Thank you very much for the help.  I'll check this out and run it.
>
> -Andy
>


From andy at squeakycode.net  Thu Sep 29 13:01:41 2011
From: andy at squeakycode.net (Andy Colson)
Date: Fri Sep 30 19:56:17 2011
Subject: [gdal-dev] PostgreSQL [RESOLVED]
In-Reply-To: <1317313716.4e849cb499b2c@webmail.free.fr>
References: <4E7B58CD.9070303@squeakycode.net>
	<201109282128.26359.even.rouault@mines-paris.org>
	<201109290836.37828.even.rouault@mines-paris.org>
	<4E8478BB.601@squeakycode.net>
	<1317313716.4e849cb499b2c@webmail.free.fr>
Message-ID: <4E84A475.6090400@squeakycode.net>

On 9/29/2011 11:28 AM, Even Rouault wrote:
> Selon Andy Colson<andy@squeakycode.net>:
>
>> On 9/29/2011 1:36 AM, Even Rouault wrote:
>>> Le mercredi 28 septembre 2011 21:28:26, Even Rouault a ?crit :
>>>> Le jeudi 22 septembre 2011 17:48:29, Andy Colson a ?crit :
>>>>> Hi List,
>>>>>
>>>>> I'm using ogr2ogr to convert (and reproject) data from shapefile to PG,
>>>>> if I use insert statements the null dates are not a problem, but if I
>>>>> set PG_USE_COPY=YES, then I get errors:
>>>>>
>>>>> ERROR 1: COPY statement failed.
>>>>> ERROR:  date/time field value out of range: "0000/00/00"
>>>>> CONTEXT:  COPY parcelannov2, line 18, column recorded: "0000/00/00"
>>>>>
>>>>> Inserts are really slow, so I'd love to use copy instead.
>>>>
>>>> I didn't manage to get 0000/00/00 from a shapefile. I have done a few
>> tests
>>>> but I got null values as expected and they are correctly written as null
>>>> values in the PG COPY statement. Perhaps you should file a Trac ticket
>>>> with the shapefile attached and your exact ogr2ogr command line.
>>>>
>>>
>>> On inspection, the null values for Date in this dbf file were indicated by
>> a
>>> string filled with spaces. The fix is now in the shapefile driver in
>> r23127.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> Really?  Weird.  I have a little program you can write sql and hit .dbf
>> files, I can run:
>>
>> select count(*) from ParcelAnnoV2 where recorded is null
>>
>> and it returns 34490 rows.  But, it makes a lot more sense if they were
>> spaced and not nulled.
>
> Apparently, the "conventional" way of writing a null data in the DBF is
> "00000000", not spaces.
>
> So this was a shapefile fix not a PG driver fix?
>>    How did the PG as insert statements work, but PG as COPY didn't?
>
> Yes that was a bit surprising. I looked, and there is a historical test in the
> INSERT code path that tests for if the year is "0000" and if found, consider
> that the date is null. This test did not exist in the COPY code path. Hence the
> difference in behaviour.
>
> But the right place to fix was the shapefile driver, not adding a hack in the PG
> driver.
>
>>
>> Thank you very much for the help.  I'll check this out and run it.
>>
>> -Andy
>>
>
>

I can confirm this fixed my problem.  I mentioned $bounty$ before, and I 
meant it.  $50 sound ok?  Let me know (off list if you like) an address, 
and I'll get you a check.  (although its u.s. dollars, looks like you 
are from France?)  Got a wish list someplace?

Thank you again for the help.

-Andy
From Tony.Na at sybase.com  Thu Sep 29 13:21:15 2011
From: Tony.Na at sybase.com (Tony.Na@sybase.com)
Date: Fri Sep 30 20:17:14 2011
Subject: [gdal-dev] Identify EPSG SRS_ID from Shapefile SRS Definition
Message-ID: <OF94574754.3BC9D7C3-ON8525791A.005F44CD-8525791A.005F53B0@sybase.com>


Hi fellow GDAL/OGR developers,
I'm currently developing an OGR data provider module for Sybase SQLAnywhere
database, which recently supports spatial features in it's version 12
release. I have a question regarding the best way to evaluate the
equivalence between two Spatial Reference Systems.  It seems to me that
when I use ogr2ogr to translate a SQLAnywhere Layer to a shapefile, the
shapefile data provider calls the morphToESRI() and morphFromESRI
functions, which strips out all Authority nodes from my original SRS WKT.
For example, for the SRS ?NAD27 / Alaska Albers?, the WKT representation
before and after the morph follows:


Before morph:


PROJCS["Albers Equal Area",
      GEOGCS["NAD27",
            DATUM["North_American_Datum_1927",
                  SPHEROID["Clarke 1866", 6378206.4, 294.978698213898,
                        AUTHORITY["EPSG","7008"]],
                  TOWGS84[-3,142,183,0,0,0,0],
                  AUTHORITY["EPSG","6267"]],
            PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
            UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],
            AUTHORITY["EPSG","4267"]],
      PROJECTION["Albers_Conic_Equal_Area"],
      PARAMETER["standard_parallel_1",55],
      PARAMETER["standard_parallel_2",65],
      PARAMETER["latitude_of_center",50],
      PARAMETER["longitude_of_center",-154],
      PARAMETER["false_easting",0],
      PARAMETER["false_northing",0],
      UNIT["us_survey_feet",0.3048006096012192],
      AUTHORITY["EPSG","2964"]]

After morph:
PROJCS["Albers_Equal_Area",
      GEOGCS["GCS_North_American_1927",
            DATUM["D_North_American_1927",
                  SPHEROID["Clarke_1866",6378206.4,294.9786982]],
            PRIMEM["Greenwich",0],
            UNIT["Degree",0.017453292519943295]],
      PROJECTION["Albers"],
      PARAMETER["standard_parallel_1",55],
      PARAMETER["standard_parallel_2",65],
      PARAMETER["latitude_of_origin",50],
      PARAMETER["central_meridian",-154],
      PARAMETER["false_easting",0],
      PARAMETER["false_northing",0]
      ,UNIT["Foot_US",0.30480060960121924]]

The problem arises when I try to use this exported shapefile as a source to
Ogr2ogr when creating a new SQLAnywhere layer, where I have to find the SRS
in our database. However, when I call the AutoIdentifyEPSG() function of
OGRSpatialReference system, I don?t get all the authority name and code
restored, here?s the resulting WKT for the above example:

After restore:

PROJCS["Albers_Equal_Area",
      GEOGCS["GCS_North_American_1927",
            DATUM["D_North_American_1927",
                  SPHEROID["Clarke_1866",6378206.4,294.9786982]],
            PRIMEM["Greenwich",0],
            UNIT["Degree",0.017453292519943295],
            AUTHORITY["EPSG","4267"]],
      PROJECTION["Albers"],
      PARAMETER["standard_parallel_1",55],
      PARAMETER["standard_parallel_2",65],
      PARAMETER["latitude_of_origin",50],
      PARAMETER["central_meridian",-154],
      PARAMETER["false_easting",0],
      PARAMETER["false_northing",0]
      ,UNIT["Foot_US",0.30480060960121924]]

My question is, what is the best way to test this WKT as the same SRS as my
original WKT, since the key identification AUTHORITY["EPSG","2964"]]  is
missing from the root node.  Thanks for your time.

Thanks,
- Tony Na
From even.rouault at mines-paris.org  Thu Sep 29 13:59:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 20:57:59 2011
Subject: [gdal-dev] PostgreSQL [RESOLVED]
In-Reply-To: <4E84A475.6090400@squeakycode.net>
References: <4E7B58CD.9070303@squeakycode.net>
	<1317313716.4e849cb499b2c@webmail.free.fr>
	<4E84A475.6090400@squeakycode.net>
Message-ID: <201109291959.59201.even.rouault@mines-paris.org>

> I can confirm this fixed my problem.  I mentioned $bounty$ before, and I
> meant it.  $50 sound ok?  Let me know (off list if you like) an address,
> and I'll get you a check.  (although its u.s. dollars, looks like you
> are from France?)  Got a wish list someplace?

Thanks for the offer, but I cannot accept money for GDAL work due to my 
contract with my employer. But you could consider a donation to OSGeo paypal ( 
look for "Support OSGEO" at the right of http://www.osgeo.org/ ). Note that 
modest amounts are not normally kept track of as project specific, due to the 
overhead it would cause to OSGeo accounting.
From even.rouault at mines-paris.org  Thu Sep 29 14:11:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 21:10:40 2011
Subject: [gdal-dev] Identify EPSG SRS_ID from Shapefile SRS Definition
In-Reply-To: <OF94574754.3BC9D7C3-ON8525791A.005F44CD-8525791A.005F53B0@sybase.com>
References: <OF94574754.3BC9D7C3-ON8525791A.005F44CD-8525791A.005F53B0@sybase.com>
Message-ID: <201109292011.56594.even.rouault@mines-paris.org>

Le jeudi 29 septembre 2011 19:21:15, Tony.Na@sybase.com a ?crit :
> Hi fellow GDAL/OGR developers,
> I'm currently developing an OGR data provider module for Sybase SQLAnywhere
> database, which recently supports spatial features in it's version 12
> release. I have a question regarding the best way to evaluate the
> equivalence between two Spatial Reference Systems.  It seems to me that
> when I use ogr2ogr to translate a SQLAnywhere Layer to a shapefile, the
> shapefile data provider calls the morphToESRI() and morphFromESRI
> functions, which strips out all Authority nodes from my original SRS WKT.
> For example, for the SRS ?NAD27 / Alaska Albers?, the WKT representation
> before and after the morph follows:

Tony,

Yes, there is a kind of "standard" form of WKT used by GDAL, and ESRI WKT 
which has various variations, including the stripping of authority nodes, but 
also different PROJCS, DATUM or GEOGCS names, or different name for projection 
and projection parameters... This is really complex magic ( just have a look 
at ogr/ogr_srs_esri.cpp )

> 
> The problem arises when I try to use this exported shapefile as a source to
> Ogr2ogr when creating a new SQLAnywhere layer, where I have to find the SRS
> in our database. However, when I call the AutoIdentifyEPSG() function of
> OGRSpatialReference system, I don?t get all the authority name and code
> restored, here?s the resulting WKT for the above example:
> 
> My question is, what is the best way to test this WKT as the same SRS as my
> original WKT, since the key identification AUTHORITY["EPSG","2964"]]  is
> missing from the root node.  Thanks for your time.

I'm afraid it is not possible in the general case and there's no obvious 
solution to fix it. AutoIdentifyEPSG() only works for just a few SRS, as 
documented.

I believe that you're not alone to run into this issue : other drivers might 
need to know the EPSG code as a key to identify the SRS. So I would advise you 
to consider it as something not in the scope of your driver (or if you want to 
improve that area, please improve AutoIdentifyEPSG() but not add hacks in your 
new driver to workaround ti). You would not run into this issue with other 
drivers than shapefile that keep the full WKT. In the meantime, users can 
override the SRS on the ogr2ogr command line with -s_srs EPSG:xxx ...

Best regards,

Even

> 
> Thanks,
> - Tony Na
From even.rouault at mines-paris.org  Thu Sep 29 15:14:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 30 22:16:11 2011
Subject: [gdal-dev] SpatiaLite patch-set
In-Reply-To: <20110929154825.M2119@lqt.it>
References: <20110929154825.M2119@lqt.it>
Message-ID: <201109292114.04839.even.rouault@mines-paris.org>

> Glad to hear any comment from you about all this.

Commited as per http://trac.osgeo.org/gdal/ticket/4269

Thanks !

> 
> Sincerly your,
> Sandro Furieri
From Tony.Na at sybase.com  Thu Sep 29 16:01:05 2011
From: Tony.Na at sybase.com (Tony Na)
Date: Fri Sep 30 23:05:47 2011
Subject: [gdal-dev] Re: Identify EPSG SRS_ID from Shapefile SRS Definition
In-Reply-To: <201109292011.56594.even.rouault@mines-paris.org>
References: <OF94574754.3BC9D7C3-ON8525791A.005F44CD-8525791A.005F53B0@sybase.com>
	<201109292011.56594.even.rouault@mines-paris.org>
Message-ID: <1317326465976-6845215.post@n2.nabble.com>

Thanks Even,

Your answer has been a lot of help for me. I think I'll go with the command
line option for now, and take note of the AutoIdentifyEPSG() enhancement for
future references.

Thanks,
-Tony Na

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Identify-EPSG-SRS-ID-from-Shapefile-SRS-Definition-tp6844736p6845215.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
