From achpta at tuks.co.za  Mon Dec  1 08:12:36 2008
From: achpta at tuks.co.za (Andre)
Date: Mon Dec  1 08:12:39 2008
Subject: [gdal-dev] Re: GDAL Python Tutorial Create GeoTiff Issue
In-Reply-To: <1ee3a1100812010249y22700598r6c43031b8941e012@mail.gmail.com>
References: <1ee3a1100812010249y22700598r6c43031b8941e012@mail.gmail.com>
Message-ID: <1ee3a1100812010512q5e02e5ceq81628f019109f72c@mail.gmail.com>

Managed to get it working with the following
raster = numpy.zeros( (n_rows, n_cols), dtype = numpy.uint8)



On Mon, Dec 1, 2008 at 12:49 PM, Andre <achpta@tuks.co.za> wrote:
> Good day,
>
> I implemented Python the tutorial
> (http://www.gdal.org/gdal_tutorial.html) that explains how to create a
> new GeoTiff. Unfortunately I receive the following error:
>
> ===============================================================
> Traceback (most recent call last):
>  File "asc2geotiff.py", line 131, in <module>
>    gw.save_file(options.output_file)
>  File "asc2geotiff.py", line 117, in save_file
>    dst_ds.GetRasterBand(1).WriteArray( raster )
>  File "/usr/lib/python2.5/site-packages/gdal.py", line 796, in WriteArray
>
>  File "usr/lib/python2.5/site-packages/osgeo/gdal_array.py", line
> 154, in BandWriteArray
> AttributeError: dtype
> ===============================================================
>
> I would guess it should rather look something like:
>    raster =  Numeric.zeros( (512, 512), numpy.uint8)
> or
>    raster =  Numeric.zeros( (512, 512), dtype='d')
>
> I tried to assign a type to the raster data, but without success. Any
> help would be appreciated.
>
> Regards,
> Andre
>
From benjamin.r.welton at wmich.edu  Mon Dec  1 10:38:06 2008
From: benjamin.r.welton at wmich.edu (Benjamin R Welton)
Date: Mon Dec  1 10:38:16 2008
Subject: [gdal-dev] Need help converting a geotiff file to jpg/tiff/bmp
Message-ID: <df6241ef1750e.4933be8e@wmich.edu>

Thanks for your quick response.

The geotiff files that i am trying to convert are single band. I am not looking to create a false three color tiff from these images i only need to have a gray scale representation of the images.

Iv had a little bit of time to look over the documentation on the VRT Driver. It looks like i could essentially use the same template for all of the images with only the filename and xsize/ysize altered for each file. Ill make an attempt to do the conversion using the VRT files and see if i can get the image i want by using that process. One quick question though, is there any file size or area limits on how large the VRT could do a conversion for? The files that i am doing this conversion on are not really large (2000x4500 pixels max) so i am assuming that it will be fine.

Thanks for your help,
Ben 

----- Original Message -----
From: Frank Warmerdam <warmerdam@pobox.com>
Date: Wednesday, November 26, 2008 9:31 pm
Subject: Re: [gdal-dev] Need help converting a geotiff file to jpg/tiff/bmp

> Benjamin Welton wrote:
> > Hello everyone,
> > 
> > Im quite new to using GDAL and what i would like to do is convert 
> a 
> > geotiff file to a standard jpeg/tiff/bmp image file so that it 
> can be 
> > viewed by any standard image reading software (ideally i would 
> like to 
> > be able to display said image using wxPython) . Every time i try 
> to 
> > convert an image it creates ether an image that is not compatible 
> with 
> > some basic image viewing/editing tools or it creates and image 
> that is 
> > monochrome and all detail of the image is lost. What would be the 
> best 
> > way to go about creating a standard jpeg/tiff/bmp so that it can 
> be 
> > viewed in basic image editing/viewing tools? The geotiff is a 
> int16 
> > datatype file and i do not really need to keep any of the actual 
> > georeferencing information contained in the geotiff file.
> > 
> > Here is the python code that i am using to convert the image to a 
> > standard tiff file:
> > dataset = gdal.Open( "C:\\Geotiff.tif", GA_ReadOnly )
> > format = "GTiff"
> > driver = gdal.GetDriverByName( format )
> > metadata = driver.GetMetadata()
> > dst_ds = driver.CreateCopy("C:\\Example.tiff",dataset,0, 
> > ["PROFILE=BASELINE"] )
> > 
> > Any help anyone could provide to me would be great.
> 
> Ben,
> 
> How many bands does the int16 geotiff file have?
> 
> Generally, the hard part here is converting the int16 image pixels to
> Byte to produce a fairly universal output file.  The proper way to do
> this would likely be to create an intermediate virtual file that 
> appliesscaling and a conversion of data type; however, this may be 
> fairlyinvolved.
> 
> I'm also concerned that you have a one band file and that you are 
> hopingfor colorization based on some undefined scheme, but I'll 
> need to know
> more about the source file to know the answer to that.
> 
> The following VRT file demonstrates using a ComplexSource to rescale
> an image from 16bit to 8bit.  You could construct something similar
> to use in your Python (substituting in appropriate sizes, extra bands,
> etc).
> 
> <VRTDataset rasterXSize="512" rasterYSize="512">
>   <VRTRasterBand dataType="Byte" band="1">
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>       <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>       <ScaleOffset>0</ScaleOffset>
>       <ScaleRatio>0.085</ScaleRatio>
>     </ComplexSource>
>   </VRTRasterBand>
> </VRTDataset>
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------------
> ----------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.comlight and sound - activate the windows | 
> http://pobox.com/~warmerdamand watch the world go round - Rush    | 
> Geospatial Programmer for Rent
> 
> 

From warmerdam at pobox.com  Mon Dec  1 11:04:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 11:05:10 2008
Subject: [gdal-dev] Need help converting a geotiff file to jpg/tiff/bmp
In-Reply-To: <df6241ef1750e.4933be8e@wmich.edu>
References: <df6241ef1750e.4933be8e@wmich.edu>
Message-ID: <49340AF7.3070408@pobox.com>

Benjamin R Welton wrote:
> Thanks for your quick response.
> 
> The geotiff files that i am trying to convert are single band. I am not
> looking to create a false three color tiff from these images i only need to
> have a gray scale representation of the images.
> 
> Iv had a little bit of time to look over the documentation on the VRT
> Driver. It looks like i could essentially use the same template for all of
> the images with only the filename and xsize/ysize altered for each file. Ill
> make an attempt to do the conversion using the VRT files and see if i can
> get the image i want by using that process. One quick question though, is
> there any file size or area limits on how large the VRT could do a
> conversion for? The files that i am doing this conversion on are not really
> large (2000x4500 pixels max) so i am assuming that it will be fine.

Ben,

There is no apparent limit on the VRT size, though there can be performance
impacts to going through a VRT.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Dec  1 12:25:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 12:26:51 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <C664E893-A3C2-4146-B806-F71262BC97E1@kyngchaos.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<C664E893-A3C2-4146-B806-F71262BC97E1@kyngchaos.com>
Message-ID: <49341E10.2060304@pobox.com>

William Kyngesburye wrote:
> On Nov 30, 2008, at 4:03 PM, William Kyngesburye wrote:
> 
>> - tiff_write
>>
>>  TEST: tiff_write_55 ... PROJCS["Equirectangular 
>> Mars",GEOGCS["GCS_Mars",DATUM["unknown",SPHEROID["unnamed",3394813.857975945,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Equirectangular"],PARAMETER["latitude_of_origin",-2],PARAMETER["central_meridian",184.4129943847656],PARAMETER["standard_parallel_1",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]] 
>>
>> fail
>>    failed to preserve Equirectangular projection as expected, old 
>> libgeotiff?
>>
>> Well, I'm using geotiff 1.2.5, and I notice that GDAL includes 1.2.4.
>>
>> It's not saying what the difference is.
> 
> 
> Tried with internal geotiff, no change.
> 
> Also note: I'm using a CVS trunk libtiff from Mar 2008.

William,

This is a problem in the autotest suite.  I have not yet uploaded the
corrected version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Dec  1 12:30:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 12:31:05 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
Message-ID: <49341F2D.2020606@pobox.com>

William Kyngesburye wrote:
> I'm working on some autotest errors for 1.6, and I need some help to 
> figure out how to fix them.
> 
> - ogr_gml
> 
>   TEST: ogr_gml_1 ... ERROR 1: <coordinates> element missing value.
> fail (blowup)
> Traceback (most recent call last):
>   File "pymod/gdaltest.py", line 89, in run_tests
>     result = func()
>   File "./ogr_gml_read.py", line 72, in ogr_gml_1
>     if feat.GetField('Name') != 'Aartselaar':
> AttributeError: 'NoneType' object has no attribute 'GetField'
> 
> and similar errors for tests 2-4
> 
> strangely, there is a similar error for test 5 but it succeeds:
> 
>  TEST: ogr_gml_5 ... ERROR 1: <coordinates> element missing value.
> success
> 
> Could it have something to do with Xerces 3?  I can try recompiling with 
> Xerces 2.8.

William,

I'm not sure.  There has been recent work to support Xerces 3.0,
so I'm surprised.

> - gdrivers/grass
> 
>   TEST: grass_2 ...
> old =  PROJCS["UTM Zone 18, Northern Hemisphere",
>     GEOGCS["grs80",
>         DATUM["North_American_Datum_1983",
>             
> SPHEROID["Geodetic_Reference_System_1980",6378137,298.257222101],
>             TOWGS84[0.000,0.000,0.000]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-75],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["meter",1]]
> new =
> fail
>     Projections differ
> 
> It seems to have completely dropped the projection.  Note that I'm using 
> a trimmed down library-only GRASS and may have missed something in the 
> dummy grass/etc/ folder.

I didn't even know we had a grass test suite entry.  I don't
know what is happening here.

> - mrsid - I've been getting this for a while, even in 1.5.
...
> fail
>     Projections differ
 >
> It's losing most of the parameters or their values.

Yes, I've seen this sort of problem from time to time.  There
seems to be problems extracting the pseudo-geotiff-tags from
some mrsid files, though repeated efforts to resolve this
issue have failed.  What version of the mrsid sdk are you using?
I haven't run into this for a while myself.

> Then:
> 
>   TEST: mrsid_4 ...
> old =  (0.0, 255.0, 102.684, 51.613999999999997)
> new =  [0.0, 255.0, 103.11236497314, 52.476991490286998]
> fail
>     Approximate statistics differs.
> 
> I think this used to be OK, though I sorta remember seeing it before.

I have also seen the image results come back with such modest,
but statistically significant differences.  I have no way to
address this though.

> - osr_esri
> 
>   TEST: osr_esri_10 ...
> Got:       
> PROJCS["Sphere_Plate_Carree",GEOGCS["GCS_Sphere",DATUM["D_Sphere",SPHEROID["Sphere",6371000.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Equidistant_Cylindrical"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],UNIT["Meter",1.0]] 
> 
> Expected:  
> PROJCS["Sphere_Plate_Carree",GEOGCS["GCS_Sphere",DATUM["D_Sphere",SPHEROID["Sphere",6371000.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],UNIT["Meter",1.0]] 
> 
> fail
>     Did not get expected Plate_Caree SRS after morphToESRI

This is an autotest problem, and will be resolved when I upload
the fixed autotest.  It may be disregarded for now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woklist at kyngchaos.com  Mon Dec  1 12:43:52 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 12:43:56 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <49341F2D.2020606@pobox.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
Message-ID: <6CD6B857-6977-4F13-9F83-3052D759C429@kyngchaos.com>

On Dec 1, 2008, at 11:30 AM, Frank Warmerdam wrote:

> William Kyngesburye wrote:
>> I'm working on some autotest errors for 1.6, and I need some help  
>> to figure out how to fix them.
>> - ogr_gml
>>  TEST: ogr_gml_1 ... ERROR 1: <coordinates> element missing value.
>> fail (blowup)
>> Traceback (most recent call last):
>>  File "pymod/gdaltest.py", line 89, in run_tests
>>    result = func()
>>  File "./ogr_gml_read.py", line 72, in ogr_gml_1
>>    if feat.GetField('Name') != 'Aartselaar':
>> AttributeError: 'NoneType' object has no attribute 'GetField'
>> and similar errors for tests 2-4
>> strangely, there is a similar error for test 5 but it succeeds:
>> TEST: ogr_gml_5 ... ERROR 1: <coordinates> element missing value.
>> success
>> Could it have something to do with Xerces 3?  I can try recompiling  
>> with Xerces 2.8.
>
> William,
>
> I'm not sure.  There has been recent work to support Xerces 3.0,
> so I'm surprised.
>
I think all that addressed was setting some macro so that ILI/IOM  
would compile.

>> - mrsid - I've been getting this for a while, even in 1.5.
> ...
>> fail
>>    Projections differ
> >
>> It's losing most of the parameters or their values.
>
> Yes, I've seen this sort of problem from time to time.  There
> seems to be problems extracting the pseudo-geotiff-tags from
> some mrsid files, though repeated efforts to resolve this
> issue have failed.  What version of the mrsid sdk are you using?
> I haven't run into this for a while myself.
>
7.0.0.2167

I could try the old v6 DSDK for a 32bit build just to see, but I need  
v7 for 64bit OSX.

>> Then:
>>  TEST: mrsid_4 ...
>> old =  (0.0, 255.0, 102.684, 51.613999999999997)
>> new =  [0.0, 255.0, 103.11236497314, 52.476991490286998]
>> fail
>>    Approximate statistics differs.
>> I think this used to be OK, though I sorta remember seeing it before.
>
> I have also seen the image results come back with such modest,
> but statistically significant differences.  I have no way to
> address this though.
>
Ah, I see the test is expecting more rounded values (to 3 decimals),  
but they're essentially the same.

>
-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From even.rouault at mines-paris.org  Mon Dec  1 13:20:14 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  1 13:21:22 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <6CD6B857-6977-4F13-9F83-3052D759C429@kyngchaos.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
	<6CD6B857-6977-4F13-9F83-3052D759C429@kyngchaos.com>
Message-ID: <200812011920.15094.even.rouault@mines-paris.org>

Le Monday 01 December 2008 18:43:52 William Kyngesburye, vous avez ?crit?:
> On Dec 1, 2008, at 11:30 AM, Frank Warmerdam wrote:
> > William Kyngesburye wrote:
> >> I'm working on some autotest errors for 1.6, and I need some help
> >> to figure out how to fix them.
> >> - ogr_gml
> >>  TEST: ogr_gml_1 ... ERROR 1: <coordinates> element missing value.
> >> fail (blowup)
> >> Traceback (most recent call last):
> >>  File "pymod/gdaltest.py", line 89, in run_tests
> >>    result = func()
> >>  File "./ogr_gml_read.py", line 72, in ogr_gml_1
> >>    if feat.GetField('Name') != 'Aartselaar':
> >> AttributeError: 'NoneType' object has no attribute 'GetField'
> >> and similar errors for tests 2-4
> >> strangely, there is a similar error for test 5 but it succeeds:
> >> TEST: ogr_gml_5 ... ERROR 1: <coordinates> element missing value.
> >> success
> >> Could it have something to do with Xerces 3?  I can try recompiling
> >> with Xerces 2.8.
> >
> > William,
> >
> > I'm not sure.  There has been recent work to support Xerces 3.0,
> > so I'm surprised.
>
> I think all that addressed was setting some macro so that ILI/IOM
> would compile.

Yes, ILI/IOM has been fixed, but the GML driver has also been changed so that 
it behaves correctly with Xerces 3.0. I can confirm that GDAL 1.6.0RC2 passes 
the GML autotest when compiled and run against xerces-3.0.0 (x86 Linux).
Are you sure you running a very recent GDAL ? The fix was commited in r15773, 
on 2008/11/20, between beta2 and RC1.

From warmerdam at pobox.com  Mon Dec  1 13:48:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 13:48:55 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <49342931.7030404@sieczka.org>
References: <4932CE7B.2010801@pobox.com> <49342931.7030404@sieczka.org>
Message-ID: <49343172.1050304@pobox.com>

Maciej Sieczka wrote:
> Frank Warmerdam pisze:
>> Folks,
>>
>> There have been a few noteworthy errors identified and corrected
>> since RC1 was issued.  So I've decided to retract it and prepare an
>> RC2.  RC2 is available at:
>>
>> http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip 
>> http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source as
>> .tar.gz
>>
>> On behalf of the GDAL project, I request everyone interested in a
>> high quality final release do some quick verification of this
>> candidate release.
> 
> There's a bug outstanding for 4 years now - INT DBF columns treated as
> REAL (DOUBLE) [1]. There's been a related talk on PostGIS ML [2] and
> QGIS dev ML [3] recently.
> 
> Is this bug planned to be fixed any time soon?
> 
> [1]http://trac.osgeo.org/gdal/ticket/809
> [2]http://postgis.refractions.net/pipermail/postgis-users/2008-November/022030.html 
> 
> [3]http://lists.osgeo.org/pipermail/qgis-user/2008-November/004042.html

Maciek,

I believe a correct solution to this problem requires extending the OGR
data model to support 64bit integers for feature attributes.  This is a
significant change, and will require an RFC.

I have not had any client interest in this issue and I have no particular
plans to address it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From msieczka at sieczka.org  Mon Dec  1 14:38:39 2008
From: msieczka at sieczka.org (Maciej Sieczka)
Date: Mon Dec  1 14:38:46 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932CE7B.2010801@pobox.com>
References: <4932CE7B.2010801@pobox.com>
Message-ID: <49343D3F.5090006@sieczka.org>

Frank Warmerdam pisze:
> Folks,
> 
> There have been a few noteworthy errors identified and corrected
> since RC1 was issued.  So I've decided to retract it and prepare an
> RC2.  RC2 is available at:
> 
> http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip 
> http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source as
> .tar.gz
> 
> On behalf of the GDAL project, I request everyone interested in a
> high quality final release do some quick verification of this
> candidate release.

There's a bug outstanding for 4 years now - INT DBF columns treated as
REAL (DOUBLE) [1]. There's been a related talk on PostGIS ML [2] and
QGIS dev ML [3] recently.

Is this bug planned to be fixed any time soon?

[1]http://trac.osgeo.org/gdal/ticket/809
[2]http://postgis.refractions.net/pipermail/postgis-users/2008-November/022030.html
[3]http://lists.osgeo.org/pipermail/qgis-user/2008-November/004042.html


Maciek

-- 
Maciej Sieczka
www.sieczka.org

From woklist at kyngchaos.com  Mon Dec  1 14:50:49 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 14:50:53 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <200812011920.15094.even.rouault@mines-paris.org>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
	<6CD6B857-6977-4F13-9F83-3052D759C429@kyngchaos.com>
	<200812011920.15094.even.rouault@mines-paris.org>
Message-ID: <D7D4E791-EA90-44E4-922D-0C456105E7CB@kyngchaos.com>

On Dec 1, 2008, at 12:20 PM, Even Rouault wrote:

>> I think all that addressed was setting some macro so that ILI/IOM
>> would compile.
>
> Yes, ILI/IOM has been fixed, but the GML driver has also been  
> changed so that
> it behaves correctly with Xerces 3.0. I can confirm that GDAL  
> 1.6.0RC2 passes
> the GML autotest when compiled and run against xerces-3.0.0 (x86  
> Linux).
> Are you sure you running a very recent GDAL ? The fix was commited  
> in r15773,
> on 2008/11/20, between beta2 and RC1.
>

I'm testing 1.6RC2.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From woodbri at swoodbridge.com  Mon Dec  1 16:00:38 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Dec  1 15:59:42 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932CE7B.2010801@pobox.com>
References: <4932CE7B.2010801@pobox.com>
Message-ID: <49345076.8070507@swoodbridge.com>

Frank Warmerdam wrote:
> Folks,
> 
> There have been a few noteworthy errors identified and corrected since
> RC1 was issued.  So I've decided to retract it and prepare an RC2.  RC2
> is available at:
> 
>  http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip
>  http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source as .tar.gz
> 
> On behalf of the GDAL project, I request everyone interested in a high
> quality final release do some quick verification of this candidate release.
> Depending on immediate feedback, I will call for a PSC vote promoting 
> this as
> a final release on Monday (which would take till Wednesday to complete).
> 
> Very detailed release news is available at:
> 
>  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News
> 
> Best regards,

Frank,

I just checked RC2 this against the jp2 problem we have been struggling 
with. I believe the patch you made or this is in RC1 and RC2. See below.

When I added your patch, I also added some additional CPLDebug(...) 
statements, but what was interesting is that they did NOT appear in the 
output. This made me concerned that the patched code was NOT getting 
executed. So for this build we cleaned off all the old versions and 
build and installed RC2 from scratch. You never commented on my 
questions/concerns on this point in earlier email, but I'm wondering if 
my issues below could be a case where it is executing a different path 
through the code that does not hit your patch and might also need to be 
patched.

Regardless, I thought I should report against RC2 so you have that 
information.

Thanks,
   -Steve

[swoodbridge@booboo tif-test]$ cat test-it
rm -f out.tif
GDAL_SKIP=JPEG2000 gdalwarp -srcnodata 0 -dstnodata 0 -s_srs 
+init=epsg:26915 -t_srs EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb 
-wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" --debug on tmp.vrt 
out.tif


[swoodbridge@booboo tif-test]$ ls -al /usr/local/bin/gdalwarp
-rwxr-xr-x  1 root root 96458 Dec  1 18:42 /usr/local/bin/gdalwarp
[swoodbridge@booboo tif-test]$ ./test-it
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux, 
this=0x9bf4190) succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux, 
this=0x9bf4190)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2, 
this=0x9b414c8) succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt, this=0x9b40ff0) succeeds as VRT.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
GDAL: GDALClose(tmp.vrt, this=0x9b40ff0)
GDAL: GDALClose(, this=0x9be6608)
GDAL: GDALClose(, this=0x9ba51a0)
GDAL: GDALClose(, this=0x9be6c58)
GDAL: GDALClose(, this=0x9be74d0)
GDAL: GDALClose(, this=0x9be7d48)
GDAL: GDALClose(, this=0x9be85c0)
GDAL: GDALClose(, this=0x9be8e38)
GDAL: GDALClose(, this=0x9be96b0)
GDAL: GDALClose(, this=0x9be9f28)
GDAL: GDALClose(, this=0x9bea7a0)
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2, 
this=0x9b414c8)
Creating output file that is 6029P x 6029L.
GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x9b39560)
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux, 
this=0x9bf4d68) succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux, 
this=0x9bf4d68)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2, 
this=0x9b9d350) succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt, this=0x9b9cfd8) succeeds as VRT.
Processing input file tmp.vrt.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
MrSID: RasterIO() - using optimized dataset level IO.
MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
5066x6973, zoom=1)
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
./test-it: line 12: 25032 Aborted                 GDAL_SKIP=JPEG2000 
gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" --debug on tmp.vrt out.tif
[swoodbridge@booboo tif-test]$ ls -lh 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2
-rw-rw-r--  1 dallen users 342M Oct 20 16:49 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2
From warmerdam at pobox.com  Mon Dec  1 16:11:49 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 16:12:32 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <49345076.8070507@swoodbridge.com>
References: <4932CE7B.2010801@pobox.com> <49345076.8070507@swoodbridge.com>
Message-ID: <49345315.3060007@pobox.com>

Stephen Woodbridge wrote:
> I just checked RC2 this against the jp2 problem we have been struggling 
> with. I believe the patch you made or this is in RC1 and RC2. See below.
...
> MrSID: RasterIO() - using optimized dataset level IO.
> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
> 5066x6973, zoom=1)
> gdalwarp: ../compressed/compressed.cpp:1724: bool 
> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
> failed.

Steve,

I have come to the conclusion you are not encountering the 32bit window
overflow problem that I fixed - though it was striking another client of
mine.   I don't seem to have a way of reproducing your problem, so there
isn't much else I can do to dig into it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Dec  1 16:27:03 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 16:27:32 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <22809FE6-1C05-4F34-B67D-AA11CA5AE1EA@kyngchaos.com>
References: <4932CE7B.2010801@pobox.com>
	<47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>
	<4932E6B3.9050805@pobox.com>
	<22809FE6-1C05-4F34-B67D-AA11CA5AE1EA@kyngchaos.com>
Message-ID: <493456A7.5080305@pobox.com>

William Kyngesburye wrote:
> On Nov 30, 2008, at 1:17 PM, Frank Warmerdam wrote:
> 
>> William Kyngesburye wrote:
>>> Ahh, I was just running thru the autotests with RC1.
>>> Any chance of getting http://trac.osgeo.org/gdal/ticket/2661 into 
>>> 1.6?  Tested on RC1, no problems.
>>
>> William,
>>
>> I am not in favor of apply the change for 2661 in the 1.6 branch.  I'm 
>> not
>> opposed to it going into trunk now that 1.6 is settling.
>>
> Rats.  So, 1.6.1?
> 
> At least I can apply it to my own binary release, to keep 1.5 and 1.6 
> plugins separate.

William,

I am suggesting this would (if done) be a 1.7 change.  Generally speaking
I've found setting GDAL_DRIVER_PATH sufficient for my multiple-build
situations so to me the issue does not seem pressing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Mon Dec  1 17:19:45 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Dec  1 17:18:47 2008
Subject: [gdal-dev] is MrSid SDK (7.0.0.2167) supported by GDAL
Message-ID: <49346301.2060201@swoodbridge.com>

Hi all,

Quick question, Is MrSid SDK (7.0.0.2167) supported by GDAL?

As indicated by the release notes 4. there are fixes to the JP2 readers 
and I'm wondering if that might resolve my JP2 issue since I'm currently 
on: MrSid SDK 6.0.7.1407

Thanks,
   -Steve

Release Notes for SDK (7.0.0.2167)

5/28/2008

1. *** API CHANGE *** As described in the Porting Guide
    section of the User Manual, breaking changes have been
    introduced to the API, in order to address the needs of
    more flexible workflows and pipelines in applications.
    This will require small changes to existing code.

2. The LTIOFileStream class now support +2GB files. The
    LTIOFileStream64 class has been removed.

3. The mix of supported platforms has been updated. See
    platforms.txt for details.

4. A number of bugs have been fixed in the JP2 and NITF
    readers and writers.

5. Small performance improvements have been made in many
    areas of the code.

6. Member functions that are not documented (or are
    explicitly marked as LizardTech-only) should in general
    not be used by third-party developers.


From a_luthfi at yahoo.ie  Mon Dec  1 18:45:41 2008
From: a_luthfi at yahoo.ie (Luthfi)
Date: Mon Dec  1 18:47:31 2008
Subject: [gdal-dev] Help VC++: Unresolved external symbol _GTIFNew using
	gdal 1.5.3
Message-ID: <004101c9540e$ed19b4d0$ca08a8c0@luthfi>

Hi All,

I'm new in this mail-list.
I have a problem when trying to use gdal.
I use VC++ 6. After creating a project, I add some header files, C/C++ source files and inc files to my project, not all files included in gdal zip file.

They are :
[..]               [.]                geo_normalize.c    tif_ovrcache.c

cpl_minixml.cpp    cpl_csv.cpp        cpl_string.cpp     geotiff.cpp

cpl_string.h       tif_ovrcache.h     cpl_port.h         cpl_minixml.h

tif_config.h       tiffvers.h         tiffio.h           tiffconf.h

tiff.h             geo_normalize.h    xtiffio.h          geokeys.h

cpl_config.h       cpl_csv.h          geotiff.h          geotiffio.h

geovalues.h        geo_config.h       geo_ctrans.inc     geokeys.inc

epsg_units.inc     epsg_proj.inc      epsg_pm.inc        epsg_pcs.inc

epsg_gcs.inc       epsg_ellipse.inc   epsg_datum.inc     epsg_vertcs.inc



Then I include header files in my project and add some code :

 

  TIFF *tif=(TIFF*)0;  /* TIFF-level descriptor */
  GTIF *gtif=(GTIF*)0; /* GeoKey-level descriptor */
  
  /* Open TIFF descriptor to read GeoTIFF tags */
  tif=XTIFFOpen("d:/IMAGERY.TIF","r");
  gtif = GTIFNew(tif);


When I build the project, it result in linking error :

readGeoTiffDlg.obj : error LNK2001: unresolved external symbol _GTIFNew
readGeoTiffDlg.obj : error LNK2001: unresolved external symbol _XTIFFOpen
Debug/readGeoTiff.exe : fatal error LNK1120: 2 unresolved externals

 

I search in some forum, one say that it relate to library which can not be found. I look back to my gdal files, there are some lib but I'm not sure they are what I need, because their file name is different with the name of header files I use. 

 

Please anyone knows about this?

Thank you



Luthfi

Indonesian Remote Sensing Ground Station
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081202/068e9a66/attachment.html
From warmerdam at pobox.com  Mon Dec  1 19:05:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 19:06:33 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
Message-ID: <49347BE7.5030903@pobox.com>

Folks,

There have been a few noteworthy errors identified and corrected since
RC2 was issued.  So I've decided to retract it and prepare an RC3.  RC3
is available at:

  http://download.osgeo.org/gdal/gdal160RC3.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.6.0RC3.tar.gz - source as .tar.gz

Very detailed release news is available at:

  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

I have also re-snapped the autotest suite, and produced a docs package:

   http://download.osgeo.org/gdal/gdal160doc.zip
   http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Dec  1 19:12:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 19:13:32 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 3
Message-ID: <49347D88.4020909@pobox.com>

Folks,

There have been a few noteworthy errors identified and corrected since
RC2 was issued.  So I've decided to retract it and prepare an RC3.  RC3
is available at:

  http://download.osgeo.org/gdal/gdal160RC3.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.6.0RC3.tar.gz - source as .tar.gz

Very detailed release news is available at:

  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

I have also re-snapped the autotest suite, and produced a docs package:

   http://download.osgeo.org/gdal/gdal160doc.zip
   http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




From woklist at kyngchaos.com  Mon Dec  1 19:59:52 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 19:59:57 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <49347BE7.5030903@pobox.com>
References: <49347BE7.5030903@pobox.com>
Message-ID: <15C98FF6-F1AD-42BD-88D3-4AC71F6A395C@kyngchaos.com>

Sorry to keep digging up stuff - this one keeps bugging me (I'm  
patching it out of habit now):

http://trac.osgeo.org/gdal/ticket/1242

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Mon Dec  1 20:14:05 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 20:14:10 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <493456A7.5080305@pobox.com>
References: <4932CE7B.2010801@pobox.com>
	<47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>
	<4932E6B3.9050805@pobox.com>
	<22809FE6-1C05-4F34-B67D-AA11CA5AE1EA@kyngchaos.com>
	<493456A7.5080305@pobox.com>
Message-ID: <F4952E4F-7F49-495B-B484-1EE9327D96C2@kyngchaos.com>

On Dec 1, 2008, at 3:27 PM, Frank Warmerdam wrote:

>>> I am not in favor of apply the change for 2661 in the 1.6 branch.   
>>> I'm not
>>> opposed to it going into trunk now that 1.6 is settling.
>>>
>> Rats.  So, 1.6.1?
>> At least I can apply it to my own binary release, to keep 1.5 and  
>> 1.6 plugins separate.
>
> William,
>
> I am suggesting this would (if done) be a 1.7 change.  Generally  
> speaking
> I've found setting GDAL_DRIVER_PATH sufficient for my multiple-build
> situations so to me the issue does not seem pressing.
>

I suppose.  Though this is the first major version change with the  
driver versioning, so it's a good time to start separating the plugins  
by version.  Maybe it could be expanded to other platforms?  Makes  
sense - /usr/local/lib/gdalplugins/[version].  I'd be OK with waiting  
then.

I'm thinking of your average Mac user - the less fiddling with shell  
options the better.

Also, applications using GDAL (GRASS, Qgis, Mapserver, ...) may not  
consider this.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Mon Dec  1 22:00:22 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 22:00:25 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <200811302021.23120.even.rouault@mines-paris.org>
References: <4932CE7B.2010801@pobox.com>
	<249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
	<200811302021.23120.even.rouault@mines-paris.org>
Message-ID: <F22FC99A-8240-404D-890B-E4A657567D01@kyngchaos.com>

On Nov 30, 2008, at 1:21 PM, Even Rouault wrote:

>> The gdalhttp test is trying to use the DODS driver.
>
> Yes, this is known : see http://trac.osgeo.org/gdal/ticket/2696
> There's little we can do to solve that, except maybe change the  
> syntax of the
> connection string for the GDAL DODS driver, to something similar to  
> the OGR
> DODS driver. That's to say something like "DODS:http://...." ?


How about (for the autotests) something similar to what the ecw test  
does for ecwjp2 - disable DODS format during the http tests?

This would at least let us test DODS and HTTP without having to  
disable DODS manually (GDAL_SKIP) to have the HTTP test work,  
requiring a 2nd run of the autotests.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From woklist at kyngchaos.com  Mon Dec  1 22:13:03 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 22:13:06 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <200812011920.15094.even.rouault@mines-paris.org>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
	<6CD6B857-6977-4F13-9F83-3052D759C429@kyngchaos.com>
	<200812011920.15094.even.rouault@mines-paris.org>
Message-ID: <44C90163-589D-4A56-B77E-42AE889DCB9F@kyngchaos.com>

On Dec 1, 2008, at 12:20 PM, Even Rouault wrote:

> Yes, ILI/IOM has been fixed, but the GML driver has also been  
> changed so that
> it behaves correctly with Xerces 3.0. I can confirm that GDAL  
> 1.6.0RC2 passes
> the GML autotest when compiled and run against xerces-3.0.0 (x86  
> Linux).
> Are you sure you running a very recent GDAL ? The fix was commited  
> in r15773,
> on 2008/11/20, between beta2 and RC1.
>

Ah, something wrong with Xerces 3, at least with mine.  GDAL 1.6RC3  
now, same errors.  Rebuilt GDAL with Xerces 2.8 and all I get is:

   TEST: ogr_gml_4 ... fail
     Wrong featureCode field value

ILI still succeeds.

The full set of errors with Xerces 3 is:

   TEST: ogr_gml_1 ... ERROR 1: <coordinates> element missing value.
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 89, in run_tests
     result = func()
   File "./ogr_gml_read.py", line 72, in ogr_gml_1
     if feat.GetField('Name') != 'Aartselaar':
AttributeError: 'NoneType' object has no attribute 'GetField'
   TEST: ogr_gml_2 ... ERROR 1: <coordinates> element missing value.
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 89, in run_tests
     result = func()
   File "./ogr_gml_read.py", line 100, in ogr_gml_2
     if gml_ds.GetLayerCount() != 1:
AttributeError: 'NoneType' object has no attribute 'GetLayerCount'
   TEST: ogr_gml_3 ... ERROR 1: <coordinates> element missing value.
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 89, in run_tests
     result = func()
   File "./ogr_gml_read.py", line 139, in ogr_gml_3
     if feat.GetField('ngd_id') != 817792:
AttributeError: 'NoneType' object has no attribute 'GetField'
   TEST: ogr_gml_4 ... ERROR 1: <coordinates> element missing value.
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 89, in run_tests
     result = func()
   File "./ogr_gml_read.py", line 181, in ogr_gml_4
     if feat.GetField('featureCode') != 10198:
AttributeError: 'NoneType' object has no attribute 'GetField'
   TEST: ogr_gml_5 ... ERROR 1: <coordinates> element missing value.
success


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a  
bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Mon Dec  1 22:25:38 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 22:25:41 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <F22FC99A-8240-404D-890B-E4A657567D01@kyngchaos.com>
References: <4932CE7B.2010801@pobox.com>
	<249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
	<200811302021.23120.even.rouault@mines-paris.org>
	<F22FC99A-8240-404D-890B-E4A657567D01@kyngchaos.com>
Message-ID: <5CC70E70-22DF-4676-B683-F43646B9789B@kyngchaos.com>

On Dec 1, 2008, at 9:00 PM, William Kyngesburye wrote:

> On Nov 30, 2008, at 1:21 PM, Even Rouault wrote:
>
>>> The gdalhttp test is trying to use the DODS driver.
>>
>> Yes, this is known : see http://trac.osgeo.org/gdal/ticket/2696
>> There's little we can do to solve that, except maybe change the  
>> syntax of the
>> connection string for the GDAL DODS driver, to something similar to  
>> the OGR
>> DODS driver. That's to say something like "DODS:http://...." ?
>
>
> How about (for the autotests) something similar to what the ecw test  
> does for ecwjp2 - disable DODS format during the http tests?
>
> This would at least let us test DODS and HTTP without having to  
> disable DODS manually (GDAL_SKIP) to have the HTTP test work,  
> requiring a 2nd run of the autotests.
>
This worked in gdalhttp.py:

def http_1():

     try:
         drv = gdal.GetDriverByName( 'HTTP' )
     except:
	return 'skip'

     try:
         gdaltest.dods = None
         if gdal.GetDriverByName( 'DODS' ):
             gdaltest.dods = gdal.GetDriverByName('DODS')
             gdaltest.dods.Deregister()
     except:
         pass


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Mon Dec  1 22:27:42 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 22:27:45 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <200811302021.23120.even.rouault@mines-paris.org>
References: <4932CE7B.2010801@pobox.com>
	<249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
	<200811302021.23120.even.rouault@mines-paris.org>
Message-ID: <7C8CEDAB-E256-4FA1-9261-FFA6CFDA5FFE@kyngchaos.com>

On Nov 30, 2008, at 1:21 PM, Even Rouault wrote:

>> ECW tests 14 and 15 check for the wrong driver - they are jp2ecw  
>> tests
>> but check for ecw. (I disabled JP2 in my ECW library build for some
>> reason I can't remember.)
>
> Hum, you're right. Fixed in trunk in r15864
>
Hm, doesn't look like it made it to the new autotest snapshot.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From woklist at kyngchaos.com  Mon Dec  1 22:47:39 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec  1 22:47:43 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <49347BE7.5030903@pobox.com>
References: <49347BE7.5030903@pobox.com>
Message-ID: <351C5A68-44D9-4FDF-AF98-55351C69553F@kyngchaos.com>

On Dec 1, 2008, at 6:05 PM, Frank Warmerdam wrote:

> I have also re-snapped the autotest suite, and produced a docs  
> package:
>
>  http://download.osgeo.org/gdal/gdal160doc.zip
>  http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip
>
Cool, tiff_write_55 now works, osr_esri_10 now works.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the  
past isn't a fiction designed to account for the discrepancy between  
my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From warmerdam at pobox.com  Mon Dec  1 22:56:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  1 22:56:55 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <7C8CEDAB-E256-4FA1-9261-FFA6CFDA5FFE@kyngchaos.com>
References: <4932CE7B.2010801@pobox.com>
	<249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
	<200811302021.23120.even.rouault@mines-paris.org>
	<7C8CEDAB-E256-4FA1-9261-FFA6CFDA5FFE@kyngchaos.com>
Message-ID: <4934B1D5.5090505@pobox.com>

William Kyngesburye wrote:
> On Nov 30, 2008, at 1:21 PM, Even Rouault wrote:
> 
>>> ECW tests 14 and 15 check for the wrong driver - they are jp2ecw tests
>>> but check for ecw. (I disabled JP2 in my ECW library build for some
>>> reason I can't remember.)
>>
>> Hum, you're right. Fixed in trunk in r15864
>>
> Hm, doesn't look like it made it to the new autotest snapshot.

William,

The snapshot was from the 1.6 autotest branch.   Even mentioned his change
was only in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kenn at wifi-bourgogne.com  Tue Dec  2 10:15:16 2008
From: kenn at wifi-bourgogne.com (Kenn Sebesta)
Date: Tue Dec  2 10:15:19 2008
Subject: [gdal-dev] Looking for advice on finding neighboring features
Message-ID: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>

I've got a project at the University of Luxembourg where I need to calculate
elevation profiles of arbitrary trajectories that are contained on a finite
list of paths. I will use this in a custom application for a controls
experiment I'm working on. I've got a shapefile that contains all the
possible paths as lines (with altitude information) from the local mapping
administration.

I'm terribly new to GIS, but so far I've managed to get GDAL working on my
machine and extract the XY coordinates of the features. What I'm trying to
do now is find the best way to identify what features, i.e. path segments,
are in an immediate neighborhood of the current location. This is especially
critical when in areas where lines cross, but paths do not, e.g. bridges and
tunnels.

Is there any way to do this with a shapefile and GDAL? I've looked through
the API so far, but it's a little confusing since I'm new to all the
terminology. If not, what should I be using? I had thought a raster map
might do it, but that seems like a lot of extra work if I can do it quickly
and efficiently with a shapefile.

Cheers,
Kenn Sebesta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081202/a82f003f/attachment.html
From collinsb at mitre.org  Tue Dec  2 09:35:12 2008
From: collinsb at mitre.org (Collins, Benjamin)
Date: Tue Dec  2 12:02:56 2008
Subject: [gdal-dev] is MrSid SDK (7.0.0.2167) supported by GDAL
In-Reply-To: <49346301.2060201@swoodbridge.com>
References: <49346301.2060201@swoodbridge.com>
Message-ID: <77F7C5B5FC691E438C577AEDAC9D6D560A969FDBC8@IMCMBX4.MITRE.ORG>

Steve,

My initial tests on win32 indicate that yes, MrSID DSDK v7 does work with GDAL (1.5) with no source mods.  My test image was RGB 3-band unsigned short.

The locations of the header files has changed, though, so a windows build should now have this more simple option in the nmake.opt:
MRSID_INCLUDE = -I$(MRSID_DIR)\include

--
Ben

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Stephen Woodbridge
> Sent: Monday, December 01, 2008 5:20 PM
> To: Gdal-Dev
> Subject: [gdal-dev] is MrSid SDK (7.0.0.2167) supported by GDAL
> 
> Hi all,
> 
> Quick question, Is MrSid SDK (7.0.0.2167) supported by GDAL?
> 
> As indicated by the release notes 4. there are fixes to the JP2 readers
> and I'm wondering if that might resolve my JP2 issue since I'm
> currently
> on: MrSid SDK 6.0.7.1407
> 
> Thanks,
>    -Steve
> 
> Release Notes for SDK (7.0.0.2167)
> 
> 5/28/2008
> 
> 1. *** API CHANGE *** As described in the Porting Guide
>     section of the User Manual, breaking changes have been
>     introduced to the API, in order to address the needs of
>     more flexible workflows and pipelines in applications.
>     This will require small changes to existing code.
> 
> 2. The LTIOFileStream class now support +2GB files. The
>     LTIOFileStream64 class has been removed.
> 
> 3. The mix of supported platforms has been updated. See
>     platforms.txt for details.
> 
> 4. A number of bugs have been fixed in the JP2 and NITF
>     readers and writers.
> 
> 5. Small performance improvements have been made in many
>     areas of the code.
> 
> 6. Member functions that are not documented (or are
>     explicitly marked as LizardTech-only) should in general
>     not be used by third-party developers.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Dec  2 15:00:33 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  2 15:00:54 2008
Subject: [gdal-dev] Motion: Adopt RC3 as the 1.6.0 release
Message-ID: <493593E1.3090609@pobox.com>

Motion: That the GDAL 1.6.0 RC3 release candidate be promoted to being our
official 1.6.0 release.

--

I'd encourage PSC members to test with RC3 before voting.  Voting will close
at end of day on Thursday.  Non-PSC members are also encouraged to provide
feedback on the release candidate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From debeaudette at ucdavis.edu  Tue Dec  2 17:16:59 2008
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Tue Dec  2 17:14:37 2008
Subject: [gdal-dev] ArcGIS 9.3 does not recognize .prj file made with GDAL
	tools
Message-ID: <200812021416.59516.dylan.beaudette@gmail.com>

Hi,

Any idea on why Arc GIS can understand [1] version of a file, and not another 
made by GDAL [2]. This projection file used to work with ArcGIS, and now 
seems not to with version 9.3. Could I be generating the file incorrectly?

Here is the code (python) I used to generate the file [2] with GDAL.


#!/usr/bin/env python
# generate a PRJ file

import osgeo.osr as osr

# Set up spatial reference systems
proj_object = osr.SpatialReference()
proj_object.ImportFromProj4('+proj=aea +x_0=0.0 +y_0=0 +lon_0=-96 +lat_0=40.0 
+lat_1=20 +lat_2=60.0 ellps=GRS80 +datum=NAD83 +units=m +no_defs')

print proj_object.ExportToWkt()


Attachments:
1. ca_geo_new-arcmap.prj 
2. ca_geo_new.prj


Thanks in advance for any ideas.

Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
-------------- next part --------------
PROJCS["Albers_online_ss_version",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Albers"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-96.0],PARAMETER["Standard_Parallel_1",20.0],PARAMETER["Standard_Parallel_2",60.0],PARAMETER["Latitude_Of_Origin",40.0],UNIT["Meter",1.0]]
-------------- next part --------------
PROJCS["unnamed",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4269"]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["standard_parallel_1",20],PARAMETER["standard_parallel_2",60],PARAMETER["latitude_of_center",40],PARAMETER["longitude_of_center",-96],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]
From hobu.inc at gmail.com  Tue Dec  2 17:21:23 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec  2 17:23:20 2008
Subject: [gdal-dev] ArcGIS 9.3 does not recognize .prj file made with GDAL
	tools
In-Reply-To: <200812021416.59516.dylan.beaudette@gmail.com>
References: <200812021416.59516.dylan.beaudette@gmail.com>
Message-ID: <131C18B1-D81C-41C1-9937-AC7349FA736D@gmail.com>


On Dec 2, 2008, at 4:16 PM, Dylan Beaudette wrote:

> Hi,
>
> Any idea on why Arc GIS can understand [1] version of a file, and  
> not another
> made by GDAL [2]. This projection file used to work with ArcGIS, and  
> now
> seems not to with version 9.3. Could I be generating the file  
> incorrectly?
>
> Here is the code (python) I used to generate the file [2] with GDAL.
>
>
> #!/usr/bin/env python
> # generate a PRJ file
>
> import osgeo.osr as osr
>
> # Set up spatial reference systems
> proj_object = osr.SpatialReference()
> proj_object.ImportFromProj4('+proj=aea +x_0=0.0 +y_0=0 +lon_0=-96  
> +lat_0=40.0
> +lat_1=20 +lat_2=60.0 ellps=GRS80 +datum=NAD83 +units=m +no_defs')
>
> print proj_object.ExportToWkt()
>
>
> Attachments:
> 1. ca_geo_new-arcmap.prj
> 2. ca_geo_new.prj
>

Might you need to MorphToESRI?

 >>> p = osr.SpatialReference()
 >>> p.ImportFromProj4("""+proj=aea +x_0=0.0 +y_0=0 +lon_0=-96  
+lat_0=40.0
... +lat_1=20 +lat_2=60.0 ellps=GRS80 +datum=NAD83 +units=m +no_defs""")
0
 >>> p.MorphToESRI()
0
 >>> p.ExportToWkt()
'PROJCS["Albers",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Albers"],PARAMETER["standard_parallel_1",20],PARAMETER["standard_parallel_2",60],PARAMETER["latitude_of_origin",40],PARAMETER["central_meridian",-96],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]'
 >>>



From debeaudette at ucdavis.edu  Tue Dec  2 17:37:59 2008
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Tue Dec  2 17:35:36 2008
Subject: [gdal-dev] ArcGIS 9.3 does not recognize .prj file made with GDAL
	tools
In-Reply-To: <131C18B1-D81C-41C1-9937-AC7349FA736D@gmail.com>
References: <200812021416.59516.dylan.beaudette@gmail.com>
	<131C18B1-D81C-41C1-9937-AC7349FA736D@gmail.com>
Message-ID: <200812021437.59679.dylan.beaudette@gmail.com>

On Tuesday 02 December 2008, Howard Butler wrote:
> On Dec 2, 2008, at 4:16 PM, Dylan Beaudette wrote:
> > Hi,
> >
> > Any idea on why Arc GIS can understand [1] version of a file, and
> > not another
> > made by GDAL [2]. This projection file used to work with ArcGIS, and
> > now
> > seems not to with version 9.3. Could I be generating the file
> > incorrectly?
> >
> > Here is the code (python) I used to generate the file [2] with GDAL.
> >
> >
> > #!/usr/bin/env python
> > # generate a PRJ file
> >
> > import osgeo.osr as osr
> >
> > # Set up spatial reference systems
> > proj_object = osr.SpatialReference()
> > proj_object.ImportFromProj4('+proj=aea +x_0=0.0 +y_0=0 +lon_0=-96
> > +lat_0=40.0
> > +lat_1=20 +lat_2=60.0 ellps=GRS80 +datum=NAD83 +units=m +no_defs')
> >
> > print proj_object.ExportToWkt()
> >
> >
> > Attachments:
> > 1. ca_geo_new-arcmap.prj
> > 2. ca_geo_new.prj
>
> Might you need to MorphToESRI?
>
>  >>> p = osr.SpatialReference()
>  >>> p.ImportFromProj4("""+proj=aea +x_0=0.0 +y_0=0 +lon_0=-96
>
> +lat_0=40.0
> ... +lat_1=20 +lat_2=60.0 ellps=GRS80 +datum=NAD83 +units=m +no_defs""")
> 0
>
>  >>> p.MorphToESRI()
>
> 0
>
>  >>> p.ExportToWkt()
>
> 'PROJCS["Albers",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1
>983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT[
>"Degree",0.017453292519943295]],PROJECTION["Albers"],PARAMETER["standard_par
>allel_1",20],PARAMETER["standard_parallel_2",60],PARAMETER["latitude_of_orig
>in",40],PARAMETER["central_meridian",-96],PARAMETER["false_easting",0],PARAM
>ETER["false_northing",0],UNIT["Meter",1]]'

Thanks Howard!

Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From woklist at kyngchaos.com  Wed Dec  3 00:15:20 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Dec  3 00:15:23 2008
Subject: [gdal-dev] Motion: Adopt RC3 as the 1.6.0 release
In-Reply-To: <493593E1.3090609@pobox.com>
References: <493593E1.3090609@pobox.com>
Message-ID: <1FFA21CC-1963-4CC7-A128-48FD4D96B4DF@kyngchaos.com>

Looks good to me, considering the 2 autotest issues I'm having.

On Dec 2, 2008, at 2:00 PM, Frank Warmerdam wrote:

> Motion: That the GDAL 1.6.0 RC3 release candidate be promoted to  
> being our
> official 1.6.0 release.
>
> --
>
> I'd encourage PSC members to test with RC3 before voting.  Voting  
> will close
> at end of day on Thursday.  Non-PSC members are also encouraged to  
> provide
> feedback on the release candidate.
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From woklist at kyngchaos.com  Wed Dec  3 00:19:57 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Dec  3 00:20:01 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <49341F2D.2020606@pobox.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
Message-ID: <B05919D9-73FF-4E4E-9AF8-B26AE9A8D432@kyngchaos.com>

On Dec 1, 2008, at 11:30 AM, Frank Warmerdam wrote:

>> - gdrivers/grass
>>  TEST: grass_2 ...
>> old =  PROJCS["UTM Zone 18, Northern Hemisphere",
>>    GEOGCS["grs80",
>>        DATUM["North_American_Datum_1983",
>>            SPHEROID["Geodetic_Reference_System_1980", 
>> 6378137,298.257222101],
>>            TOWGS84[0.000,0.000,0.000]],
>>        PRIMEM["Greenwich",0],
>>        UNIT["degree",0.0174532925199433]],
>>    PROJECTION["Transverse_Mercator"],
>>    PARAMETER["latitude_of_origin",0],
>>    PARAMETER["central_meridian",-75],
>>    PARAMETER["scale_factor",0.9996],
>>    PARAMETER["false_easting",500000],
>>    PARAMETER["false_northing",0],
>>    UNIT["meter",1]]
>> new =
>> fail
>>    Projections differ
>> It seems to have completely dropped the projection.  Note that I'm  
>> using a trimmed down library-only GRASS and may have missed  
>> something in the dummy grass/etc/ folder.
>
> I didn't even know we had a grass test suite entry.  I don't
> know what is happening here.

Just tested with a full GRASS install, same problem, so it's not  
missing any necessary etc/ files.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Wed Dec  3 00:28:44 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Dec  3 00:28:48 2008
Subject: [gdal-dev] Motion: Adopt RC3 as the 1.6.0 release
In-Reply-To: <1FFA21CC-1963-4CC7-A128-48FD4D96B4DF@kyngchaos.com>
References: <493593E1.3090609@pobox.com>
	<1FFA21CC-1963-4CC7-A128-48FD4D96B4DF@kyngchaos.com>
Message-ID: <3D9380F4-8030-49EC-856F-6C98727A7755@kyngchaos.com>

On Dec 2, 2008, at 11:15 PM, William Kyngesburye wrote:

> Looks good to me, considering the 2 autotest issues I'm having.
>
grass_2 and ogr_gml, that is.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From kenn at wifi-bourgogne.com  Wed Dec  3 05:25:58 2008
From: kenn at wifi-bourgogne.com (Kenn Sebesta)
Date: Wed Dec  3 05:26:00 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
Message-ID: <8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>

Based on some conversations of the list, I've come to understand a
little better what I'm looking for, so I'll update my original
question here so it's a bit clearer.

I need to write a program that automatically determines elevation
profiles based on a predetermined path/route. This data needs to come
be in some form that it automatically can be read by further functions
in my controls package. I plan to do everything in C, but any other
processing language would be acceptable.

In order to get this profile, I want to do a spatial query on DEM
shapefiles in order to find nearest neighbors, without spending mass
amounts of computing power doing it. I really don't have a good sense
of the nitty-gritty of how shapefiles are made and organized, so if
someone gives me a large shapefile, e.g. that of a whole country, I
don't know if computationally it's reasonable to perform a proximity
check on every single feature in the shapefile. I suppose this would
be O(2), which could get quite expensive/long for a microprocessor or
some kind of embedded platform.

What I was hoping to discover is whether shapefiles have some field in
a feature that says what other features share common points. Looking
at the data I can extract with GDAL, and then being pointed to
OpenJump and getting a good look at the fields in the feature table,
it doesn't seem this is the case. Can someone confirm this?

I suppose I can just go feature by feature and check, based on its
coordinates, how far away from a given feature the other features are.
I could then save into a database all other features within a certain
epsilon, say 10m. This would work, but it seems to me that there are
far more efficient ways of doing this. Moreover, it seems that this
method is a little naive and could wind up being far from robust,
which would imply redoing the algorithm every time I change map
editions/distributors/companies/etc.

I would like to avoid reinventing the wheel, so I'm asking your advice
to what way is the best to program this. Perhaps there's already an
algorithm/library to do this?

If not, are there any pitfalls I should know of? Could I do it with a
simple raster, knowing that it is absolutely necessary that I can
differentiate between a path that passes above another path without
physically crossing, such as a tunnel or bridge?

Cheers,
Kenn Sebesta
From warmerdam at pobox.com  Wed Dec  3 07:47:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  3 07:47:06 2008
Subject: [gdal-dev] Motion: Adopt RC3 as the 1.6.0 release
In-Reply-To: <3D9380F4-8030-49EC-856F-6C98727A7755@kyngchaos.com>
References: <493593E1.3090609@pobox.com>
	<1FFA21CC-1963-4CC7-A128-48FD4D96B4DF@kyngchaos.com>
	<3D9380F4-8030-49EC-856F-6C98727A7755@kyngchaos.com>
Message-ID: <931f8ea90812030447k34a82d61i74324a3a2387fdce@mail.gmail.com>

Folks,

I'm afraid I'm -1 on RC3 being promoted.  Ivan noticed that
the default windows build produces gdal16dev.dll instead of
gdal16.dll.  I'll package a 1.4 soon, perhaps tonight.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From Tom.Kralidis at ec.gc.ca  Wed Dec  3 08:15:17 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Wed Dec  3 08:15:19 2008
Subject: [gdal-dev] build error in trunk
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA7E3@dowexch2.ontario.int.ec.gc.ca>


On fc9, with:

./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no --with-pg=/usr/bin/pg_config
--with-mysql=/usr/bin/mysql_config -
-with-sqlite --with-curl=/usr/bin/curl-config --with-python --with-expat

/gdal/gcore -I/home/tkralidi/foss4g/gdal/trunk/gdal/alg
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port  -c -o gdalsievefilter.lo
gdalsievefilter.cpp
libtool: compile:  g++ -g -O2 -Wall
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port
-I/home/tkralidi/foss4g/gdal/trunk/gdal/gcore
-I/home/tkralidi/foss4g/gdal/trunk/gdal/alg
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port -c gdalsievefilter.cpp
-fPIC -DPIC -o .libs/gdalsievefilter.o
libtool: compile:  g++ -g -O2 -Wall
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port
-I/home/tkralidi/foss4g/gdal/trunk/gdal/gcore
-I/home/tkralidi/foss4g/gdal/trunk/gdal/alg
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port -c gdalsievefilter.cpp -o
gdalsievefilter.o >/dev/null 2>&1
make[1]: *** No rule to make target `gdalprofile.lo', needed by
`default'.  Stop.
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/alg'
make: *** [core-target] Error 2
From Chris.Barker at noaa.gov  Wed Dec  3 12:29:35 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Dec  3 12:29:21 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
	<8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
Message-ID: <4936C1FF.90507@noaa.gov>

I'm no expert, but I have some thoughts.

A) this really isn't a GDAL issue -- GDAL is about reading ant writing 
the data -- you're interested in processing. you might want to look at 
the geos lib.

> In order to get this profile, I want to do a spatial query on DEM
> shapefiles

DEMs are usually gridded data -- a shapefile is odd for this. Is it gridded?

> someone gives me a large shapefile, e.g. that of a whole country, I
> don't know if computationally it's reasonable to perform a proximity
> check on every single feature in the shapefile. I suppose this would
> be O(2), which could get quite expensive/long for a microprocessor or
> some kind of embedded platform.

yup.

What you need is a spatial index. I think shapelib has one built in -- 
you load the shapefile, index it, and then these sorts of neighbor 
queries are fast. (order logN, I think).

You could also use:

http://trac.gispython.org/spatialindex/wiki/

and there are python bindings for geos and rtree:

http://pypi.python.org/pypi/Rtree
http://pypi.python.org/pypi/Shapely/1.0.11

which may be helpful for prototyping.

> What I was hoping to discover is whether shapefiles have some field in
> a feature that says what other features share common points.

nope -- they are pretty simple, really.


-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From dron at ak4719.spb.edu  Wed Dec  3 12:52:28 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Dec  3 13:08:47 2008
Subject: [gdal-dev] build error in trunk
In-Reply-To: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA7E3@dowexch2.ontario.int.ec.gc.ca>
References: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA7E3@dowexch2.ontario.int.ec.gc.ca>
Message-ID: <20081203175228.GA24125@ak4719.spb.edu>

On Wed, Dec 03, 2008 at 08:15:17AM -0500, Kralidis,Tom [Ontario] wrote:
> make[1]: *** No rule to make target `gdalprofile.lo', needed by
> `default'.  Stop.
> make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/alg'
> make: *** [core-target] Error 2

Tom,

That was my mistake when applying a fix for

 http://trac.osgeo.org/gdal/ticket/1878

Should be corrected now.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From Tom.Kralidis at ec.gc.ca  Wed Dec  3 13:40:04 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Wed Dec  3 13:40:07 2008
Subject: [gdal-dev] build error in trunk
In-Reply-To: <20081203175228.GA24125@ak4719.spb.edu>
References: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA7E3@dowexch2.ontario.int.ec.gc.ca>
	<20081203175228.GA24125@ak4719.spb.edu>
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA7F3@dowexch2.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andrey Kiselev
> Sent: Wednesday, 03 December 2008 12:52
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] build error in trunk
> 
> On Wed, Dec 03, 2008 at 08:15:17AM -0500, Kralidis,Tom 
> [Ontario] wrote:
> > make[1]: *** No rule to make target `gdalprofile.lo', needed by 
> > `default'.  Stop.
> > make[1]: Leaving directory 
> `/home/tkralidi/foss4g/gdal/trunk/gdal/alg'
> > make: *** [core-target] Error 2
> 
> Tom,
> 
> That was my mistake when applying a fix for
> 
>  http://trac.osgeo.org/gdal/ticket/1878
> 
> Should be corrected now.
> 

Tested.  Works fine now.  Thanks for the quick turnaround Andrey!

..Tom
From jluis at ualg.pt  Wed Dec  3 14:00:11 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Dec  3 14:00:14 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
	<8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
Message-ID: <4936D73B.30009@ualg.pt>

Kenn Sebesta wrote:
> Based on some conversations of the list, I've come to understand a
> little better what I'm looking for, so I'll update my original
> question here so it's a bit clearer.
> 
> I need to write a program that automatically determines elevation
> profiles based on a predetermined path/route. This data needs to come
> be in some form that it automatically can be read by further functions
> in my controls package. I plan to do everything in C, but any other
> processing language would be acceptable.

Ken,
If you release the shapefile constraint, GMT's grdtrack program is lightning fast
in interpolating a grid into a series of x,y positions.

Joaquim Luis
From cpadwick at digitalglobe.com  Wed Dec  3 14:12:11 2008
From: cpadwick at digitalglobe.com (Chris Padwick)
Date: Wed Dec  3 14:39:52 2008
Subject: [gdal-dev] Deleting files associated with GDALDataset
Message-ID: <61695F5D53E0A74AA5A70E93BC9C256A04EDCD99@COMAIL01.digitalglobe.com>

Hi,

 

Does anybody know the right way to delete the files associated with a
GDALDataset from disk?  It looks like I can call
GDALDataset->GetFileList() and get a char** with the list of files
comprising the dataset.  But I don't know how many files there are in
the list so I'm not sure how to loop over it and delete each file.

 

Thanks!

 

Chris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081203/055e5a28/attachment.html
From even.rouault at mines-paris.org  Wed Dec  3 14:44:12 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  3 14:44:21 2008
Subject: [gdal-dev] Deleting files associated with GDALDataset
In-Reply-To: <61695F5D53E0A74AA5A70E93BC9C256A04EDCD99@COMAIL01.digitalglobe.com>
References: <61695F5D53E0A74AA5A70E93BC9C256A04EDCD99@COMAIL01.digitalglobe.com>
Message-ID: <200812032044.14145.even.rouault@mines-paris.org>

Generally (Always?) in GDAL, char** arrays are terminated by a NULL pointer.
You can also use CSLCount()... to get the size of the array, and it actually 
loops until it finds the terminating NULL pointer.

But the simplest solution is to use GDALDeleteDateset() which is the exact 
implementation of your idea.

Le Wednesday 03 December 2008 20:12:11 Chris Padwick, vous avez ?crit?:
> Hi,
>
>
>
> Does anybody know the right way to delete the files associated with a
> GDALDataset from disk?  It looks like I can call
> GDALDataset->GetFileList() and get a char** with the list of files
> comprising the dataset.  But I don't know how many files there are in
> the list so I'm not sure how to loop over it and delete each file.
>
>
>
> Thanks!
>
>
>
> Chris


From kenn at wifi-bourgogne.com  Wed Dec  3 15:26:53 2008
From: kenn at wifi-bourgogne.com (Kenn Sebesta)
Date: Wed Dec  3 15:26:55 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <4936D73B.30009@ualg.pt>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
	<8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
	<4936D73B.30009@ualg.pt>
Message-ID: <8293c01c0812031226s55296951p1707a7f6704314d9@mail.gmail.com>

> If you release the shapefile constraint, GMT's grdtrack program is lightning
> fast
> in interpolating a grid into a series of x,y positions.

Well, the only reason I'm using shapefiles is because that's what the
mapping department gave me. If a shapefile can be converted into a
grdtrack, using some sort of automatic process, then I'm completely
ready to switch. Since I don't need much from the data, and won't
ever, it doesn't hurt right now to change directions.

Kenn

P.S. Since it's now clear to me that my my request is outside the
scope of GDAL/OGR, if someone wants to steer me to a better forum I'd
be happy to repost there.
From sgillies at frii.com  Wed Dec  3 15:39:12 2008
From: sgillies at frii.com (sgillies@frii.com)
Date: Wed Dec  3 15:54:58 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <4936C1FF.90507@noaa.gov>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>
	<8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>
	<4936C1FF.90507@noaa.gov>
Message-ID: <61168.216.17.228.50.1228336752.squirrel@users.frii.com>

> I'm no expert, but I have some thoughts.
>
> A) this really isn't a GDAL issue -- GDAL is about reading ant writing
> the data -- you're interested in processing. you might want to look at
> the geos lib.
>
>> In order to get this profile, I want to do a spatial query on DEM
>> shapefiles
>
> DEMs are usually gridded data -- a shapefile is odd for this. Is it
> gridded?
>
>> someone gives me a large shapefile, e.g. that of a whole country, I
>> don't know if computationally it's reasonable to perform a proximity
>> check on every single feature in the shapefile. I suppose this would
>> be O(2), which could get quite expensive/long for a microprocessor or
>> some kind of embedded platform.
>
> yup.
>
> What you need is a spatial index. I think shapelib has one built in --
> you load the shapefile, index it, and then these sorts of neighbor
> queries are fast. (order logN, I think).
>
> You could also use:
>
> http://trac.gispython.org/spatialindex/wiki/
>
> and there are python bindings for geos and rtree:
>
> http://pypi.python.org/pypi/Rtree
> http://pypi.python.org/pypi/Shapely/1.0.11
>
> which may be helpful for prototyping.
>
>> What I was hoping to discover is whether shapefiles have some field in
>> a feature that says what other features share common points.
>
> nope -- they are pretty simple, really.
>
>
> -Chris

Spatialindex/Rtree also support efficient queries for the N nearest
neighbors.

FWTools includes a program called shptree, which makes quad trees for
shapefiles. Once you have one of those, you could find all neighbors
fairly efficiently using nothing other than ogr.py.

Cheers,
Sean


From jluis at ualg.pt  Wed Dec  3 16:19:40 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Dec  3 16:19:44 2008
Subject: [gdal-dev] Re: Looking for advice on finding neighboring features
In-Reply-To: <8293c01c0812031226s55296951p1707a7f6704314d9@mail.gmail.com>
References: <8293c01c0812020715w3d43d90fu34ab95c1455fd47b@mail.gmail.com>	<8293c01c0812030225s600f4912ybd9b618b6b30e765@mail.gmail.com>	<4936D73B.30009@ualg.pt>
	<8293c01c0812031226s55296951p1707a7f6704314d9@mail.gmail.com>
Message-ID: <4936F7EC.6010206@ualg.pt>

Kenn Sebesta wrote:
>> If you release the shapefile constraint, GMT's grdtrack program is lightning
>> fast
>> in interpolating a grid into a series of x,y positions.
> 
> Well, the only reason I'm using shapefiles is because that's what the
> mapping department gave me. If a shapefile can be converted into a
> grdtrack, using some sort of automatic process, then I'm completely
> ready to switch. Since I don't need much from the data, and won't
> ever, it doesn't hurt right now to change directions.

grdtrack takes plain ascii x,y coordinates. You can get them by converting
your shapefiles to gmt formats using ogr2ogr.

Joaquim
From even.rouault at mines-paris.org  Wed Dec  3 13:47:14 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  3 20:49:01 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <B05919D9-73FF-4E4E-9AF8-B26AE9A8D432@kyngchaos.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
	<B05919D9-73FF-4E4E-9AF8-B26AE9A8D432@kyngchaos.com>
Message-ID: <200812031947.15220.even.rouault@mines-paris.org>

William,

thanks for your testing and reporting!

I reproduced the issue myself and finally figured out the solution... that I 
had myself forgotten after adding this test a few months ago.

You have to define the GISBASE environment variable so that it points to the 
root of your GRASS install. For example, in my case :
GISBASE=/usr/local/grass-6.4.svn

The related code in grass57dataset.cpp is :

    if ( !getenv( "GISBASE" ) ) {
        // we are outside a GRASS session
        // TODO: use function instead of hardcoded path
        sprintf(fake_gisbase, "GISBASE=/usr/local/share/gdal/grass/" ); 
        putenv( fake_gisbase );
        hasGisbase = false;
    } else {
        hasGisbase = true;
    }

The TODO comment would suggest that there's some way to get that path... 

Anyway, I've added the above advice in case of the test fails in trunk in 
r15894 and in branches/1.6 in r15896

Best regards

Le Wednesday 03 December 2008 06:19:57 William Kyngesburye, vous avez ?crit?:
> On Dec 1, 2008, at 11:30 AM, Frank Warmerdam wrote:
> >> - gdrivers/grass
> >>  TEST: grass_2 ...
> >> old =  PROJCS["UTM Zone 18, Northern Hemisphere",
> >>    GEOGCS["grs80",
> >>        DATUM["North_American_Datum_1983",
> >>            SPHEROID["Geodetic_Reference_System_1980",
> >> 6378137,298.257222101],
> >>            TOWGS84[0.000,0.000,0.000]],
> >>        PRIMEM["Greenwich",0],
> >>        UNIT["degree",0.0174532925199433]],
> >>    PROJECTION["Transverse_Mercator"],
> >>    PARAMETER["latitude_of_origin",0],
> >>    PARAMETER["central_meridian",-75],
> >>    PARAMETER["scale_factor",0.9996],
> >>    PARAMETER["false_easting",500000],
> >>    PARAMETER["false_northing",0],
> >>    UNIT["meter",1]]
> >> new =
> >> fail
> >>    Projections differ
> >> It seems to have completely dropped the projection.  Note that I'm
> >> using a trimmed down library-only GRASS and may have missed
> >> something in the dummy grass/etc/ folder.
> >
> > I didn't even know we had a grass test suite entry.  I don't
> > know what is happening here.
>
> Just tested with a full GRASS install, same problem, so it's not
> missing any necessary etc/ files.
>
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Earth: "Mostly harmless"
>
> - revised entry in the HitchHiker's Guide to the Galaxy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Wed Dec  3 21:09:16 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Dec  3 21:09:20 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <200812031947.15220.even.rouault@mines-paris.org>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
	<49341F2D.2020606@pobox.com>
	<B05919D9-73FF-4E4E-9AF8-B26AE9A8D432@kyngchaos.com>
	<200812031947.15220.even.rouault@mines-paris.org>
Message-ID: <455AB39D-F9D0-4355-A3B5-87F83C7D7B61@kyngchaos.com>

The configured GRASS prefix is already compiled into the OGR GRASS  
driver as GRASS_GISBASE, why not do the same for the GDAL GRASS  
driver?  (I thought it was, but GRASS_GISBASE only turns up in  
ogrgrassdatasource.cpp).

On Dec 3, 2008, at 12:47 PM, Even Rouault wrote:

> William,
>
> thanks for your testing and reporting!
>
> I reproduced the issue myself and finally figured out the  
> solution... that I
> had myself forgotten after adding this test a few months ago.
>
> You have to define the GISBASE environment variable so that it  
> points to the
> root of your GRASS install. For example, in my case :
> GISBASE=/usr/local/grass-6.4.svn
>
> The related code in grass57dataset.cpp is :
>
>    if ( !getenv( "GISBASE" ) ) {
>        // we are outside a GRASS session
>        // TODO: use function instead of hardcoded path
>        sprintf(fake_gisbase, "GISBASE=/usr/local/share/gdal/grass/" );
>        putenv( fake_gisbase );
>        hasGisbase = false;
>    } else {
>        hasGisbase = true;
>    }
>
> The TODO comment would suggest that there's some way to get that  
> path...
>
> Anyway, I've added the above advice in case of the test fails in  
> trunk in
> r15894 and in branches/1.6 in r15896

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


From oueslati.cherif at gmail.com  Thu Dec  4 05:24:46 2008
From: oueslati.cherif at gmail.com (Cherif Oueslati)
Date: Thu Dec  4 05:24:49 2008
Subject: [GDAL-Dev]: Adding the new driver dynamically
Message-ID: <d94dd9d00812040224p373976b9q8bceeb54177bad42@mail.gmail.com>

Hello,

I have created anew format and added it to the GDAL tree successfully using
the procedures indicated in the "GDAL Driver Implementation Tutorial".

I would like to know if there is another solution to add my driver
dynamically without following these procedures every time that I would like
to add it in another GDAL project.

Can I create a dll file to avoid the static practice indicated in the
tutorial?



Best Regards.

Cherif OUESLATI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081204/55a7ec08/attachment.html
From warmerdam at pobox.com  Thu Dec  4 07:45:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec  4 07:45:19 2008
Subject: [GDAL-Dev]: Adding the new driver dynamically
In-Reply-To: <d94dd9d00812040224p373976b9q8bceeb54177bad42@mail.gmail.com>
References: <d94dd9d00812040224p373976b9q8bceeb54177bad42@mail.gmail.com>
Message-ID: <931f8ea90812040445y1cc9256es76d8c94305d8f283@mail.gmail.com>

On Thu, Dec 4, 2008 at 5:24 AM, Cherif Oueslati
<oueslati.cherif@gmail.com> wrote:
> Hello,
>
> I have created anew format and added it to the GDAL tree successfully using
> the procedures indicated in the "GDAL Driver Implementation Tutorial".
>
> I would like to know if there is another solution to add my driver
> dynamically without following these procedures every time that I would like
> to add it in another GDAL project.
>
> Can I create a dll file to avoid the static practice indicated in the
> tutorial?

Cherif,

Yes, you can build your driver as a standalone DLL
as described in :

http://www.gdal.org/classGDALDriverManager.html#77417ede570b33695e5b318fbbdb1968

In this case you do not need to modify gdalallregister.cpp,
but you do need to place the resulting DLL in some
appropriate place.  On Windows it is usually sufficient
to place the DLL in a subdirectory called gdalplugins
under the directory containing the .exe file run.  But
you can also use the GDAL_DRIVER_PATH configuration variable
to control this.

It is imperative that your driver be linkd against an ABI
compatible version of GDAL.

Best regards,

>
>
>
> Best Regards.
>
> Cherif OUESLATI
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Thu Dec  4 08:10:19 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec  4 08:10:21 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 4
Message-ID: <931f8ea90812040510l6d64b10ds79a4ec46c072b519@mail.gmail.com>

Folks,

There have been a few noteworthy errors identified and corrected since
RC3 was issued.  So I've decided to retract it and prepare an RC4.  RC4
is available at:

  http://download.osgeo.org/gdal/gdal160RC4.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.6.0RC4.tar.gz - source as .tar.gz

Very detailed release news is available at:

  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Please let me know of any problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From joelodom at gmail.com  Thu Dec  4 08:35:57 2008
From: joelodom at gmail.com (Joel Odom)
Date: Thu Dec  4 08:35:59 2008
Subject: [gdal-dev] Support for Feature Style Specification
Message-ID: <d422b4500812040535n769f1a3dqc7d5759d51880b2a@mail.gmail.com>

I've been using OGR for a couple months now and have gotten to like it a
lot.  We're to the point where we want to start considering ways to save and
draw style information along with our feature data.  I've read the OGR
Feature Style Specification draft and it looks like a good start.  Can
anybody point me to any data that OGR can read that includes style data
(sample data) or any other resources that would be helpful in getting
started?  Thanks!

-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081204/4ba49b2a/attachment.html
From olly.smith at gmail.com  Thu Dec  4 15:11:07 2008
From: olly.smith at gmail.com (Oliver Smith)
Date: Thu Dec  4 15:11:10 2008
Subject: [gdal-dev] Help: problem reprojecting a raster from British
	National Grid to Google Maps
Message-ID: <d873dc700812041211t7be50620y9a60296ba9c18c02@mail.gmail.com>

Hi,

I've got a data set consisting of a bunch of tiled rasters, in a
British National Grid (EPSG:27700) projection.  I'm trying to
re-project them to the Google Maps projection (see below for the
proj.4 string I'm using to describe the projection).  The commands I'm
using have previously worked fine for images from the Blue Marble data
set, and from a Portuguese street map data set (in a Lambert Conic
projection), but the British images are being offset to the south-east
by about 200m when I re-project.

The same British source data re-projects fine into EPSG:4326 for
overlaying on Google Earth, so I'm somewhat confused about where my
errors are creeping in!

I'm using GDAL 1.5.2, my Google Maps projection string is:
+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
+y_0=0 +k=1.0 +units=m +nadgrids=null +no_defs

If anyone can offer any tips, it'd be most appreciated.

Oliver
From nicholas.g.lawrence at mainroads.qld.gov.au  Thu Dec  4 23:35:17 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Thu Dec  4 23:35:25 2008
Subject: [gdal-dev] OGR shapefile to MapInfo
Message-ID: <OF254CD1C0.58676524-ON4A257516.0018ADD6-4A257516.001932B2@transport.qld.gov.au>


GDAL list,

I have a shapefile "C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp"
that I want to convert into a mapinfo file
"C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB"

The command I used was;

ogr2ogr -f "MapInfo File" C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB
C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp

The resulting error is;

ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 9.
Note that MapInfo files don't support list field types.

I don't know what has gone wrong.

All the fields in the shapefile are text and numeric (double)

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From dharris at regisresources.com  Thu Dec  4 23:41:49 2008
From: dharris at regisresources.com (Dale Harris)
Date: Thu Dec  4 23:41:55 2008
Subject: [gdal-dev] OGR shapefile to MapInfo [Scanned]
In-Reply-To: <OF254CD1C0.58676524-ON4A257516.0018ADD6-4A257516.001932B2@transport.qld.gov.au>
References: <OF254CD1C0.58676524-ON4A257516.0018ADD6-4A257516.001932B2@transport.qld.gov.au>
Message-ID: <B1C193A9DE5B6D41833793DE100B5AB3276EDA@regisdc01.perth.regis.local>

I believe Field Type 9 is a date field. Pre v1.6 (soon to be released)
there was no support for Date or Time fields when creating mapinfo files
in gdal / ogr. 

Cheers
Dale Harris

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
nicholas.g.lawrence@mainroads.qld.gov.au
Sent: Friday, 5 December 2008 1:35 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] OGR shapefile to MapInfo [Scanned]


GDAL list,

I have a shapefile "C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp"
that I want to convert into a mapinfo file
"C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB"

The command I used was;

ogr2ogr -f "MapInfo File" C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB
C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp

The resulting error is;

ERROR 1: IMapInfoFile::CreateField() called with unsupported field type
9.
Note that MapInfo files don't support list field types.

I don't know what has gone wrong.

All the fields in the shapefile are text and numeric (double)

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
This message may contain privileged and confidential information.  If you are not the intended recipient of this message, you are notified that any use, dissemination, distribution or reproduction of this message is strictly prohibited.  If you receive this message in error, please notify Regis Resources Limited immediately.

From warmerdam at pobox.com  Thu Dec  4 23:51:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec  4 23:51:38 2008
Subject: [gdal-dev] Support for Feature Style Specification
In-Reply-To: <d422b4500812040535n769f1a3dqc7d5759d51880b2a@mail.gmail.com>
References: <d422b4500812040535n769f1a3dqc7d5759d51880b2a@mail.gmail.com>
Message-ID: <931f8ea90812042051i69d99694hf0bd35f451750fe@mail.gmail.com>

On Thu, Dec 4, 2008 at 8:35 AM, Joel Odom <joelodom@gmail.com> wrote:
> I've been using OGR for a couple months now and have gotten to like it a
> lot.  We're to the point where we want to start considering ways to save and
> draw style information along with our feature data.  I've read the OGR
> Feature Style Specification draft and it looks like a good start.  Can
> anybody point me to any data that OGR can read that includes style data
> (sample data) or any other resources that would be helpful in getting
> started?  Thanks!

Joel,

The two formats that currently support style information (that
I'm aware of) are the Microstation DGN format (pre-v8) and the
mapinfo format (mid/mif and tab).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From nicholas.g.lawrence at mainroads.qld.gov.au  Fri Dec  5 00:14:55 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Fri Dec  5 00:15:03 2008
Subject: [gdal-dev] OGR shapefile to MapInfo [Scanned]
In-Reply-To: <B1C193A9DE5B6D41833793DE100B5AB3276EDA@regisdc01.perth.regis.local>
Message-ID: <OFABD0E1E3.9441DF1E-ON4A257516.001C79ED-4A257516.001CD398@transport.qld.gov.au>

>> GDAL list,

>> I have a shapefile "C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp"
>> that I want to convert into a mapinfo file
>> "C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB"

>> The command I used was;

>> ogr2ogr -f "MapInfo File" C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB
>> C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp

>> The resulting error is;

>> ERROR 1: IMapInfoFile::CreateField() called with unsupported field type
>> 9.
>> Note that MapInfo files don't support list field types.

>> I don't know what has gone wrong.

>> All the fields in the shapefile are text and numeric (double)

>> Regards,
>> nick


> "Dale Harris" <dharris@regisresources.com> wrote on 05/12/2008 02:41:49
PM:

> I believe Field Type 9 is a date field. Pre v1.6 (soon to be released)
> there was no support for Date or Time fields when creating mapinfo files
> in gdal / ogr.

> Cheers
> Dale Harris

Dale,

I checked and yes, there is a date field.

Maybe I should convert the date field to a text field first?

nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From aloboaleu at gmail.com  Fri Dec  5 03:04:37 2008
From: aloboaleu at gmail.com (Agustin Lobo)
Date: Fri Dec  5 03:04:42 2008
Subject: [gdal-dev] File too large?
Message-ID: <4938E095.2060305@gmail.com>

I have a file in envi format
(PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)

 From gdalinfo I get:

 > gdalinfo PIR_MVC_EUROM_0112_2000.bsq
ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported 
file format

I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
to PIR_MVC_EUROM_0112_2000

The size of the file is 6005188800 bytes, could this be the problem?
I do not have this problem with other, smaller files.
(I'm using ubuntu 8.04 and the file is on a NTFS partition)

Thanks

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster
From warmerdam at pobox.com  Fri Dec  5 09:23:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  5 09:23:20 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <4938E095.2060305@gmail.com>
References: <4938E095.2060305@gmail.com>
Message-ID: <931f8ea90812050623v778c122ap9d5326068ec0eab1@mail.gmail.com>

On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> wrote:
> I have a file in envi format
> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
>
> From gdalinfo I get:
>
>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported file
> format
>
> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
> to PIR_MVC_EUROM_0112_2000
>
> The size of the file is 6005188800 bytes, could this be the problem?
> I do not have this problem with other, smaller files.
> (I'm using ubuntu 8.04 and the file is on a NTFS partition)


Dr. Lobo,

I looked at the current code and it appears that large files should
work fine.  However, there has been significant work on the ENVI
driver over the last couple years. What version of GDAL are you using?
This can be determined with the "gdalinfo --version" command.

It may be that you need to upgrade.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From Agustin.Lobo at ija.csic.es  Fri Dec  5 09:36:13 2008
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Fri Dec  5 09:36:17 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <931f8ea90812050623v778c122ap9d5326068ec0eab1@mail.gmail.com>
References: <4938E095.2060305@gmail.com>
	<931f8ea90812050623v778c122ap9d5326068ec0eab1@mail.gmail.com>
Message-ID: <49393C5D.9040302@ija.csic.es>

Thanks for your fast answer.
I'm using a quite new version:
alobo@alobo-laptop:~$ gdalinfo --version
GDAL 1.5.1, released 2008/03/14

I'm going to get the newest, and will let you know.
Is there a particular binary for ubuntu with
support for MrSid and ECW? or do you advice me to
compile?

Agus

Frank Warmerdam wrote:
> On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> wrote:
>> I have a file in envi format
>> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
>>
>> From gdalinfo I get:
>>
>>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
>> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported file
>> format
>>
>> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
>> to PIR_MVC_EUROM_0112_2000
>>
>> The size of the file is 6005188800 bytes, could this be the problem?
>> I do not have this problem with other, smaller files.
>> (I'm using ubuntu 8.04 and the file is on a NTFS partition)
> 
> 
> Dr. Lobo,
> 
> I looked at the current code and it appears that large files should
> work fine.  However, there has been significant work on the ENVI
> driver over the last couple years. What version of GDAL are you using?
> This can be determined with the "gdalinfo --version" command.
> 
> It may be that you need to upgrade.
> 
> Best regards,

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster
From aloboaleu at gmail.com  Fri Dec  5 11:09:09 2008
From: aloboaleu at gmail.com (Agustin Lobo)
Date: Fri Dec  5 11:09:14 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <49393C5D.9040302@ija.csic.es>
References: <4938E095.2060305@gmail.com>
	<931f8ea90812050623v778c122ap9d5326068ec0eab1@mail.gmail.com>
	<49393C5D.9040302@ija.csic.es>
Message-ID: <49395225.7000205@gmail.com>

I'm actually using the version
from  FWTools-linux-2.0.6.tar
do I have to upgrade?

Agus

Agustin Lobo wrote:
> Thanks for your fast answer.
> I'm using a quite new version:
> alobo@alobo-laptop:~$ gdalinfo --version
> GDAL 1.5.1, released 2008/03/14
> 
> I'm going to get the newest, and will let you know.
> Is there a particular binary for ubuntu with
> support for MrSid and ECW? or do you advice me to
> compile?
> 
> Agus
> 
> Frank Warmerdam wrote:
>> On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> wrote:
>>> I have a file in envi format
>>> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
>>>
>>> From gdalinfo I get:
>>>
>>>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
>>> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported 
>>> file
>>> format
>>>
>>> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
>>> to PIR_MVC_EUROM_0112_2000
>>>
>>> The size of the file is 6005188800 bytes, could this be the problem?
>>> I do not have this problem with other, smaller files.
>>> (I'm using ubuntu 8.04 and the file is on a NTFS partition)
>>
>>
>> Dr. Lobo,
>>
>> I looked at the current code and it appears that large files should
>> work fine.  However, there has been significant work on the ENVI
>> driver over the last couple years. What version of GDAL are you using?
>> This can be determined with the "gdalinfo --version" command.
>>
>> It may be that you need to upgrade.
>>
>> Best regards,
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster
From even.rouault at mines-paris.org  Fri Dec  5 14:26:38 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  5 14:26:45 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <49395225.7000205@gmail.com>
References: <4938E095.2060305@gmail.com> <49393C5D.9040302@ija.csic.es>
	<49395225.7000205@gmail.com>
Message-ID: <200812052026.40381.even.rouault@mines-paris.org>

Agustin,

I think you need to upgrade to GDAL 1.5.3 because you're probably hitting the 
following issue : http://trac.osgeo.org/gdal/ticket/2437

As FWTools Linux 2.0.6 was released in February 2008 and the ticket solved in 
June, it is not recent enough. The relatively bad news for you is that the 
production of newer releases of FWTools Linux is currently discontinued. So 
for the moment, you have to compile GDAL from source by yourself.

I don't think that Ubuntu or most Linux distributions will provide some day 
support out of the box for MrSID and ECW because of the licencing issues. 

Another way is to use FWTools for Windows under Wine. Download the installer, 
execute wine on it. Once installed, cd to ~/.wine/drive_c/Program 
Files/FWTools2.2.8 for example.
Due to a imperfect simulation of DOS shell by wine, you just have to make a 
minor modification to bin/setfwenv.bat to add "set " at the beginning of the 
line PATH=%FWTOOLS_DIR%\bin;%FWTOOLS_DIR%\python;%PATH%.
Then launch "wine cmd.exe" and then type "setfw.bat", and GDAL command line 
utilities should work. That way you get MrSID and ECW support...

Best regards,
Even

Le Friday 05 December 2008 17:09:09 Agustin Lobo, vous avez ?crit?:
> I'm actually using the version
> from  FWTools-linux-2.0.6.tar
> do I have to upgrade?
>
> Agus
>
> Agustin Lobo wrote:
> > Thanks for your fast answer.
> > I'm using a quite new version:
> > alobo@alobo-laptop:~$ gdalinfo --version
> > GDAL 1.5.1, released 2008/03/14
> >
> > I'm going to get the newest, and will let you know.
> > Is there a particular binary for ubuntu with
> > support for MrSid and ECW? or do you advice me to
> > compile?
> >
> > Agus
> >
> > Frank Warmerdam wrote:
> >> On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> wrote:
> >>> I have a file in envi format
> >>> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
> >>>
> >>> From gdalinfo I get:
> >>>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
> >>>
> >>> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported
> >>> file
> >>> format
> >>>
> >>> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
> >>> to PIR_MVC_EUROM_0112_2000
> >>>
> >>> The size of the file is 6005188800 bytes, could this be the problem?
> >>> I do not have this problem with other, smaller files.
> >>> (I'm using ubuntu 8.04 and the file is on a NTFS partition)
> >>
> >> Dr. Lobo,
> >>
> >> I looked at the current code and it appears that large files should
> >> work fine.  However, there has been significant work on the ENVI
> >> driver over the last couple years. What version of GDAL are you using?
> >> This can be determined with the "gdalinfo --version" command.
> >>
> >> It may be that you need to upgrade.
> >>
> >> Best regards,


From Agustin.Lobo at ija.csic.es  Sat Dec  6 05:03:52 2008
From: Agustin.Lobo at ija.csic.es (Agustin Lobo)
Date: Sat Dec  6 05:04:02 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <200812052026.40381.even.rouault@mines-paris.org>
References: <4938E095.2060305@gmail.com> <49393C5D.9040302@ija.csic.es>
	<49395225.7000205@gmail.com>
	<200812052026.40381.even.rouault@mines-paris.org>
Message-ID: <493A4E08.10101@ija.csic.es>

Even,

Thanks a lot for your answer. It's unfortunate that binaries of FWTools 
Linux had been discontinued. I actually thought that compiling for
win was much harder.
The wine alternative is a solution, but would like to consider compiling
myself. If I compile GDAL, would the rest of components in my current 
FWTools make use of the newer version or should I compile every component?

Agus

Even Rouault wrote:
> Agustin,
> 
> I think you need to upgrade to GDAL 1.5.3 because you're probably hitting the 
> following issue : http://trac.osgeo.org/gdal/ticket/2437
> 
> As FWTools Linux 2.0.6 was released in February 2008 and the ticket solved in 
> June, it is not recent enough. The relatively bad news for you is that the 
> production of newer releases of FWTools Linux is currently discontinued. So 
> for the moment, you have to compile GDAL from source by yourself.
> 
> I don't think that Ubuntu or most Linux distributions will provide some day 
> support out of the box for MrSID and ECW because of the licencing issues. 
> 
> Another way is to use FWTools for Windows under Wine. Download the installer, 
> execute wine on it. Once installed, cd to ~/.wine/drive_c/Program 
> Files/FWTools2.2.8 for example.
> Due to a imperfect simulation of DOS shell by wine, you just have to make a 
> minor modification to bin/setfwenv.bat to add "set " at the beginning of the 
> line PATH=%FWTOOLS_DIR%\bin;%FWTOOLS_DIR%\python;%PATH%.
> Then launch "wine cmd.exe" and then type "setfw.bat", and GDAL command line 
> utilities should work. That way you get MrSID and ECW support...
> 
> Best regards,
> Even
> 
> Le Friday 05 December 2008 17:09:09 Agustin Lobo, vous avez ?crit :
>> I'm actually using the version
>> from  FWTools-linux-2.0.6.tar
>> do I have to upgrade?
>>
>> Agus
>>
>> Agustin Lobo wrote:
>>> Thanks for your fast answer.
>>> I'm using a quite new version:
>>> alobo@alobo-laptop:~$ gdalinfo --version
>>> GDAL 1.5.1, released 2008/03/14
>>>
>>> I'm going to get the newest, and will let you know.
>>> Is there a particular binary for ubuntu with
>>> support for MrSid and ECW? or do you advice me to
>>> compile?
>>>
>>> Agus
>>>
>>> Frank Warmerdam wrote:
>>>> On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> wrote:
>>>>> I have a file in envi format
>>>>> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
>>>>>
>>>>> From gdalinfo I get:
>>>>>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
>>>>> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported
>>>>> file
>>>>> format
>>>>>
>>>>> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
>>>>> to PIR_MVC_EUROM_0112_2000
>>>>>
>>>>> The size of the file is 6005188800 bytes, could this be the problem?
>>>>> I do not have this problem with other, smaller files.
>>>>> (I'm using ubuntu 8.04 and the file is on a NTFS partition)
>>>> Dr. Lobo,
>>>>
>>>> I looked at the current code and it appears that large files should
>>>> work fine.  However, there has been significant work on the ENVI
>>>> driver over the last couple years. What version of GDAL are you using?
>>>> This can be determined with the "gdalinfo --version" command.
>>>>
>>>> It may be that you need to upgrade.
>>>>
>>>> Best regards,
> 
> 
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster
From even.rouault at mines-paris.org  Sat Dec  6 05:39:33 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec  6 05:39:39 2008
Subject: [gdal-dev] File too large?
In-Reply-To: <493A4E08.10101@ija.csic.es>
References: <4938E095.2060305@gmail.com>
	<200812052026.40381.even.rouault@mines-paris.org>
	<493A4E08.10101@ija.csic.es>
Message-ID: <200812061139.34516.even.rouault@mines-paris.org>

Agustin,

It's unlikely you are able to mix a fresh build of GDAL on a modern Linux 
distribution with the rest of libraries & binaries contained in FWTools 
2.0.6. I see for example that FWTools 2.0.6 uses libstdc++.so.5 whereas your 
Ubuntu 8.04 will use libstdc++.so.6 when compiling GDAL. So it may work to 
some extent, but that may also likely result in crashes from time to time.

Quoting Frank Warmerdam, that's one of the reasons for the discontinuation of 
FWTools Linux :
"I am currently unable to rebuild fwtools on linux due to the death of my
old server, and the differences in various versions of things on the new
one. ?So, for the time being, FWTools builds for linux have ceased."

Hum, on my ubuntu 8.04, I see that if you try to install g++-3.3, it requires 
libstdc++5-3.3-dev to be installed, so you could try compiling GDAL with 
it...

But the safest way is certainly to rebuilt every component you need.

Even

Le Saturday 06 December 2008 11:03:52 Agustin Lobo, vous avez ?crit?:
> Even,
>
> Thanks a lot for your answer. It's unfortunate that binaries of FWTools
> Linux had been discontinued. I actually thought that compiling for
> win was much harder.
> The wine alternative is a solution, but would like to consider compiling
> myself. If I compile GDAL, would the rest of components in my current
> FWTools make use of the newer version or should I compile every component?
>
> Agus
>
> Even Rouault wrote:
> > Agustin,
> >
> > I think you need to upgrade to GDAL 1.5.3 because you're probably hitting
> > the following issue : http://trac.osgeo.org/gdal/ticket/2437
> >
> > As FWTools Linux 2.0.6 was released in February 2008 and the ticket
> > solved in June, it is not recent enough. The relatively bad news for you
> > is that the production of newer releases of FWTools Linux is currently
> > discontinued. So for the moment, you have to compile GDAL from source by
> > yourself.
> >
> > I don't think that Ubuntu or most Linux distributions will provide some
> > day support out of the box for MrSID and ECW because of the licencing
> > issues.
> >
> > Another way is to use FWTools for Windows under Wine. Download the
> > installer, execute wine on it. Once installed, cd to
> > ~/.wine/drive_c/Program Files/FWTools2.2.8 for example.
> > Due to a imperfect simulation of DOS shell by wine, you just have to make
> > a minor modification to bin/setfwenv.bat to add "set " at the beginning
> > of the line PATH=%FWTOOLS_DIR%\bin;%FWTOOLS_DIR%\python;%PATH%.
> > Then launch "wine cmd.exe" and then type "setfw.bat", and GDAL command
> > line utilities should work. That way you get MrSID and ECW support...
> >
> > Best regards,
> > Even
> >
> > Le Friday 05 December 2008 17:09:09 Agustin Lobo, vous avez ?crit :
> >> I'm actually using the version
> >> from  FWTools-linux-2.0.6.tar
> >> do I have to upgrade?
> >>
> >> Agus
> >>
> >> Agustin Lobo wrote:
> >>> Thanks for your fast answer.
> >>> I'm using a quite new version:
> >>> alobo@alobo-laptop:~$ gdalinfo --version
> >>> GDAL 1.5.1, released 2008/03/14
> >>>
> >>> I'm going to get the newest, and will let you know.
> >>> Is there a particular binary for ubuntu with
> >>> support for MrSid and ECW? or do you advice me to
> >>> compile?
> >>>
> >>> Agus
> >>>
> >>> Frank Warmerdam wrote:
> >>>> On Fri, Dec 5, 2008 at 3:04 AM, Agustin Lobo <aloboaleu@gmail.com> 
wrote:
> >>>>> I have a file in envi format
> >>>>> (PIR_MVC_EUROM_0112_2000.bsq and PIR_MVC_EUROM_0112_2000.hdr)
> >>>>>
> >>>>> From gdalinfo I get:
> >>>>>> gdalinfo PIR_MVC_EUROM_0112_2000.bsq
> >>>>>
> >>>>> ERROR 4: `PIR_MVC_EUROM_0112_2000.bsq' not recognised as a supported
> >>>>> file
> >>>>> format
> >>>>>
> >>>>> I've also tried renaming PIR_MVC_EUROM_0112_2000.bsq
> >>>>> to PIR_MVC_EUROM_0112_2000
> >>>>>
> >>>>> The size of the file is 6005188800 bytes, could this be the problem?
> >>>>> I do not have this problem with other, smaller files.
> >>>>> (I'm using ubuntu 8.04 and the file is on a NTFS partition)
> >>>>
> >>>> Dr. Lobo,
> >>>>
> >>>> I looked at the current code and it appears that large files should
> >>>> work fine.  However, there has been significant work on the ENVI
> >>>> driver over the last couple years. What version of GDAL are you using?
> >>>> This can be determined with the "gdalinfo --version" command.
> >>>>
> >>>> It may be that you need to upgrade.
> >>>>
> >>>> Best regards,


From warmerdam at pobox.com  Sat Dec  6 08:12:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec  6 08:12:17 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
Message-ID: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>

Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
official 1.6.0 release.

--

Voting will close Tuesday evening.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Sat Dec  6 08:24:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec  6 08:24:43 2008
Subject: [gdal-dev] OGR shapefile to MapInfo
In-Reply-To: <OF254CD1C0.58676524-ON4A257516.0018ADD6-4A257516.001932B2@transport.qld.gov.au>
References: <OF254CD1C0.58676524-ON4A257516.0018ADD6-4A257516.001932B2@transport.qld.gov.au>
Message-ID: <931f8ea90812060524s7bda3326te61d52718c4cedbb@mail.gmail.com>

Nicolas,

Despite the hint provided in the error message, field type
9 is actually OFTDate.  So the problem is that your shapefile
has a date field, but the mapinfo code does not know how to
create this field type.

I am under the impression this has actually been fixed
very recently.  So if you are using a version other than
GDAL/OGR 1.6.0 (beta or RC) then consider upgrading.

If that still does not help, consider using the facilities
provided by RFC 21 to use SQL to cast the field to
a string (also only in GDAL 1.6 I believe).

  http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

Best regards,

On 12/4/08, nicholas.g.lawrence@mainroads.qld.gov.au
<nicholas.g.lawrence@mainroads.qld.gov.au> wrote:
>
> GDAL list,
>
> I have a shapefile "C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp"
> that I want to convert into a mapinfo file
> "C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB"
>
> The command I used was;
>
> ogr2ogr -f "MapInfo File" C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB
> C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp
>
> The resulting error is;
>
> ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 9.
> Note that MapInfo files don't support list field types.
>
> I don't know what has gone wrong.
>
> All the fields in the shapefile are text and numeric (double)
>
> Regards,
> nick
>
>
> ***********************************************************************
> WARNING: This e-mail (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was intended
> to be sent to and if you use it in an authorised way.  No one is
> allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this e-mail without appropriate authority.
>
> If this e-mail was not intended for you and was sent to you by mistake,
> please telephone or e-mail me immediately, destroy any hardcopies of
> this e-mail and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this e-mail is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this e-mail does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this e-mail do not necessarily reflect the
> opinions of the Queensland Department of Main Roads, Queensland
> Transport or Maritime Safety Queensland, or endorsed organisations
> utilising the same infrastructure.
> ***********************************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From szekerest at gmail.com  Sat Dec  6 16:21:12 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Dec  6 16:21:15 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
Message-ID: <f3b73b7d0812061321n5ad700fet4214bf9b7a2f6c30@mail.gmail.com>

Frank,

I've just noticed that ImportFromMICoordSys/ExportToMICoordSys haven't been
exposed to the SWIG interface yet, which I'd need pretty much to utilize. Is
this somewhat eligible to have there in the upcoming release or I should
target this change in 1.7.0 or 1.6.1 to be exposed?

http://trac.osgeo.org/gdal/ticket/2722

Best regards,

Tamas



2008/12/6 Frank Warmerdam <warmerdam@pobox.com>

> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
> official 1.6.0 release.
>
> --
>
> Voting will close Tuesday evening.
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081206/46cf575b/attachment.html
From a_luthfi at yahoo.ie  Sat Dec  6 18:25:19 2008
From: a_luthfi at yahoo.ie (Luthfi)
Date: Sat Dec  6 18:25:23 2008
Subject: [gdal-dev] Help accessing geotiff file
Message-ID: <002f01c957f9$e8a12d40$ca08a8c0@luthfi>

Hi all gdal member

I'm new using gdal.
I have difficulty when implement the library in VC++.
I have add all *.h, *.c, *.cpp, *.inc in my include directory
when I build the project, there come an error in linking process

Linking...
readGeoTiffDlg.obj : error LNK2001: unresolved external symbol _GTIFNew
readGeoTiffDlg.obj : error LNK2001: unresolved external symbol _XTIFFOpen
Debug/readGeoTiff.exe : fatal error LNK1120: 2 unresolved externals
Error executing link.exe.

my code is below

  TIFF *tif=(TIFF*)0;  /* TIFF-level descriptor */
  GTIF *gtif=(GTIF*)0; /* GeoKey-level descriptor */
  
  /* Open TIFF descriptor to read GeoTIFF tags */
  tif=XTIFFOpen("d:/IMAGERY.TIF","r");
  gtif = GTIFNew(tif);

Anybody have suggestion about this? 
Thank you

Best Regards,
Luthfi
Indonesia

From lists at fuchsschwanzdomain.de  Sun Dec  7 09:42:43 2008
From: lists at fuchsschwanzdomain.de (Sven Geggus)
Date: Sun Dec  7 09:47:04 2008
Subject: [gdal-dev] gdal2tiles.py crashes
Message-ID: <ghgnd3$st2$1@ultimate100.geggus.net>

I try to generate Google compatible tiles from one big rasterimage (EPSG:4326).

This does however not work:

Input (out-4326.img):
================================================================================
  Driver: HFA / Erdas Imagine Images (.img)
  Size: 87231 x 57321 x 3
  Projection: GEOGCS["WGS_1984",DATUM["WGS_1984",SPHEROID["WGS
  84",6378137,298.2572235630016],TOWGS84[0,0,0,0,0,0,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]
  NSEW:  (50.068567784495805, 48.740330987425509, 13.196098581605034,
  11.174790090035813)
Projection detected as EPSG:4326
Generating of KML is possible
Output (../lvg-by-slippymap/):
================================================================================
  Format of tiles: PNG / Portable Network Graphics
  Size of a tile: 256 x 256 pixels
  Count of tiles: 101974
  Zoom levels of the pyramid: 9
  Pixel resolution by zoomlevels: [0.011864015633013961,
  0.0059320078165069805, 0.0029660039082534903,
  0.0014830019541267451, 0.00074150097706337256,
  0.00037075048853168628, 0.00018537524426584314,
  9.268762213292157e-05, 4.6343811066460785e-05,
  2.3171905533230393e-05]
--------------------------------------------------------------------------------
Zoom 9 - pixel 0.00002317190553323039 131072
--------------------------------------------------------------------------------
1/101974 ../lvg-by-slippymap/9/0/0.png [0, 0] [0, 57065] [256, 256]
[256, 256]
Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 875, in ?
    writetile( filename, data, dxsize, dysize, bands)
  File "/usr/bin/gdal2tiles.py", line 75, in writetile
    alpha.WriteArray( alphaarray, 0, tilesize-dysize )
  File "/usr/lib/python2.4/site-packages/osgeo/gdal.py", line 782, in WriteArray
    return gdalnumeric.BandWriteArray( self, array, xoff, yoff )
  File "/usr/lib/python2.4/site-packages/osgeo/gdal_array.py", line 157, in BandWriteArray
    raise ValueError, "array does not have corresponding GDAL data type"
ValueError: array does not have corresponding GDAL data type

Regards

Sven

-- 
"In my opinion MS is a lot better at making money than it is at making good
operating systems" (Linus Torvalds, August 1997)

/me is giggls@ircnet, http://sven.gegg.us/ on the Web
From jluis at ualg.pt  Sun Dec  7 15:30:17 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Dec  7 15:30:21 2008
Subject: [gdal-dev] GCPs in MEM driver, can we?
In-Reply-To: <ghgnd3$st2$1@ultimate100.geggus.net>
References: <ghgnd3$st2$1@ultimate100.geggus.net>
Message-ID: <493C3259.9060504@ualg.pt>

Hi,

I have my gdalwarp MEX that works reasonably into converting between projection systems.
And now I would like to have it working to do warping with GPS, but after hours of struggling
with it, I don't advance a bit. The GCPs are alway ignored.


I do create the GCPs like this

	pasGCPs = (GDAL_GCP *) CPLRealloc( pasGCPs, sizeof(GDAL_GCP) * nGCPCount );
	GDALInitGCPs( 1, pasGCPs + nGCPCount - 1 );
	for (i = 0; i < nGCPCount; i++) {
		pasGCPs[i].dfGCPPixel = ptr_d[i];		
		pasGCPs[i].dfGCPLine = ptr_d[i+nGCPCount];
		pasGCPs[i].dfGCPX = ptr_d[i+2*nGCPCount];
		pasGCPs[i].dfGCPY = ptr_d[i+3*nGCPCount];
		pasGCPs[i].dfGCPZ = 0;
	}


Than I set them

	GDALSetGCPs( hSrcDS, nGCPCount, pasGCPs, "" )

and create a transformer

	hTransformArg =
     		GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT,
						 nGCPCount == 0 ? FALSE : TRUE, 0, 1 );

but this bloody thing always returns me what I set in

	eErr = GDALSuggestedWarpOutput2( hSrcDS, GDALGenImgProjTransform, hTransformArg,
                                 adfDstGeoTransform, &nPixels, &nLines, adfExtent, 0 );

and the warping fails (the output is equal to input)


Is this a MEM driver issue, or an error of mine?

Thanks

Joaquim Luis

From even.rouault at mines-paris.org  Sun Dec  7 16:50:51 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec  7 16:51:11 2008
Subject: [gdal-dev] GCPs in MEM driver, can we?
In-Reply-To: <493C3259.9060504@ualg.pt>
References: <ghgnd3$st2$1@ultimate100.geggus.net> <493C3259.9060504@ualg.pt>
Message-ID: <200812072250.51949.even.rouault@mines-paris.org>

Le Sunday 07 December 2008 21:30:17 Joaquim Luis, vous avez ?crit?:
> Hi,
>
> I have my gdalwarp MEX that works reasonably into converting between
> projection systems. And now I would like to have it working to do warping
> with GPS, but after hours of struggling with it, I don't advance a bit. The
> GCPs are alway ignored.
>
>
> I do create the GCPs like this
>
> 	pasGCPs = (GDAL_GCP *) CPLRealloc( pasGCPs, sizeof(GDAL_GCP) * nGCPCount
> ); GDALInitGCPs( 1, pasGCPs + nGCPCount - 1 );
> 	for (i = 0; i < nGCPCount; i++) {
> 		pasGCPs[i].dfGCPPixel = ptr_d[i];
> 		pasGCPs[i].dfGCPLine = ptr_d[i+nGCPCount];
> 		pasGCPs[i].dfGCPX = ptr_d[i+2*nGCPCount];
> 		pasGCPs[i].dfGCPY = ptr_d[i+3*nGCPCount];
> 		pasGCPs[i].dfGCPZ = 0;
> 	}
>
>
> Than I set them
>
> 	GDALSetGCPs( hSrcDS, nGCPCount, pasGCPs, "" )

Why don't you pass pszSrcWKT instead of "" ? But I'm not sure that it's really 
your issue as you specify it below.

>
> and create a transformer
>
> 	hTransformArg =
>      		GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT,
> 						 nGCPCount == 0 ? FALSE : TRUE, 0, 1 );
>

I think your way of creating hTransformArg is correct when being used by  
GDALSuggestedWarpOutput2, but when doing the really warp, you should pass 
hDstDS instead of NULL as the third argument. See apps/gdalwarp.cpp

> but this bloody thing always returns me what I set in
>
> 	eErr = GDALSuggestedWarpOutput2( hSrcDS, GDALGenImgProjTransform,
> hTransformArg, adfDstGeoTransform, &nPixels, &nLines, adfExtent, 0 );
>
> and the warping fails (the output is equal to input)
>
>
> Is this a MEM driver issue, or an error of mine?

I think the MEM driver should work. 

>
> Thanks
>
> Joaquim Luis
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nicholas.g.lawrence at mainroads.qld.gov.au  Sun Dec  7 17:11:45 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Sun Dec  7 17:11:50 2008
Subject: [gdal-dev] OGR shapefile to MapInfo
In-Reply-To: <931f8ea90812060524s7bda3326te61d52718c4cedbb@mail.gmail.com>
Message-ID: <OFEF9925E6.8EA414F5-ON4A257518.0079BBE8-4A257518.0079E933@transport.qld.gov.au>

> > GDAL list,
> >
> > I have a shapefile "C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp"
> > that I want to convert into a mapinfo file
> > "C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB"
> >
> > The command I used was;
> >
> > ogr2ogr -f "MapInfo File" C:\DATA\asris_mi\QLD_COMBINEDSOILS_lyr.TAB
> > C:\DATA\asris_shp\QLD_COMBINEDSOILS_lyr.shp
> >
> > The resulting error is;
> >
> > ERROR 1: IMapInfoFile::CreateField() called with unsupported field type
9.
> > Note that MapInfo files don't support list field types.
> >
> > I don't know what has gone wrong.
> >
> > All the fields in the shapefile are text and numeric (double)
> >
> > Regards,
> > nick

> Nicolas,

> Despite the hint provided in the error message, field type
> 9 is actually OFTDate.  So the problem is that your shapefile
> has a date field, but the mapinfo code does not know how to
> create this field type.

> I am under the impression this has actually been fixed
> very recently.  So if you are using a version other than
> GDAL/OGR 1.6.0 (beta or RC) then consider upgrading.

> If that still does not help, consider using the facilities
> provided by RFC 21 to use SQL to cast the field to
> a string (also only in GDAL 1.6 I believe).

> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

> Best regards, Frank

Frank,

I downloaded FWTools only a few days ago. I thought
that it would have the latest OGR.

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From jluis at ualg.pt  Sun Dec  7 17:15:51 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Dec  7 17:15:58 2008
Subject: [gdal-dev] GCPs in MEM driver, can we?
In-Reply-To: <200812072250.51949.even.rouault@mines-paris.org>
References: <ghgnd3$st2$1@ultimate100.geggus.net> <493C3259.9060504@ualg.pt>
	<200812072250.51949.even.rouault@mines-paris.org>
Message-ID: <493C4B17.6020209@ualg.pt>

Even Rouault wrote:
> Le Sunday 07 December 2008 21:30:17 Joaquim Luis, vous avez ?crit :
>> Hi,
>>
>> I have my gdalwarp MEX that works reasonably into converting between
>> projection systems. And now I would like to have it working to do warping
>> with GPS, but after hours of struggling with it, I don't advance a bit. The
>> GCPs are alway ignored.
>>
>>
>> I do create the GCPs like this
>>
>> 	pasGCPs = (GDAL_GCP *) CPLRealloc( pasGCPs, sizeof(GDAL_GCP) * nGCPCount
>> ); GDALInitGCPs( 1, pasGCPs + nGCPCount - 1 );
>> 	for (i = 0; i < nGCPCount; i++) {
>> 		pasGCPs[i].dfGCPPixel = ptr_d[i];
>> 		pasGCPs[i].dfGCPLine = ptr_d[i+nGCPCount];
>> 		pasGCPs[i].dfGCPX = ptr_d[i+2*nGCPCount];
>> 		pasGCPs[i].dfGCPY = ptr_d[i+3*nGCPCount];
>> 		pasGCPs[i].dfGCPZ = 0;
>> 	}
>>
>>
>> Than I set them
>>
>> 	GDALSetGCPs( hSrcDS, nGCPCount, pasGCPs, "" )
> 
> Why don't you pass pszSrcWKT instead of "" ? But I'm not sure that it's really 
> your issue as you specify it below.

Rouault,

It makes no difference. I tried everything

>> and create a transformer
>>
>> 	hTransformArg =
>>      		GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT,
>> 						 nGCPCount == 0 ? FALSE : TRUE, 0, 1 );
>>
> 
> I think your way of creating hTransformArg is correct when being used by  
> GDALSuggestedWarpOutput2, but when doing the really warp, you should pass 
> hDstDS instead of NULL as the third argument. See apps/gdalwarp.cpp


Again, it makes no difference if use NULL or hDstDS. Besides, I use null because
on an older version of gdalwarp upon which my MEX is based there was this comment


	/* Create a transformer that maps from source pixel/line coordinates
	   to destination georeferenced coordinates (not destination pixel line)
	   We do that by omitting the destination dataset handle (setting it to NULL). */


From even.rouault at mines-paris.org  Sun Dec  7 17:26:23 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec  7 17:26:27 2008
Subject: [gdal-dev] OGR shapefile to MapInfo
In-Reply-To: <OFEF9925E6.8EA414F5-ON4A257518.0079BBE8-4A257518.0079E933@transport.qld.gov.au>
References: <OFEF9925E6.8EA414F5-ON4A257518.0079BBE8-4A257518.0079E933@transport.qld.gov.au>
Message-ID: <200812072326.24274.even.rouault@mines-paris.org>

Le Sunday 07 December 2008 23:11:45 nicholas.g.lawrence@mainroads.qld.gov.au, 
vous avez ?crit?:

> Frank,
>
> I downloaded FWTools only a few days ago. I thought
> that it would have the latest OGR.
>

FWTools 2.2.8 was produced on October the 29th and ticket #2585 that solves 
the issue with datetime in MIF/MID was fixed in the middle of november.

You can try the gdal16 package in OSGeo4W that should include the fix.

> Regards,
> nick
>
From nicholas.g.lawrence at mainroads.qld.gov.au  Sun Dec  7 17:37:37 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Sun Dec  7 17:37:43 2008
Subject: [gdal-dev] OGR shapefile to MapInfo
In-Reply-To: <200812072326.24274.even.rouault@mines-paris.org>
Message-ID: <OF1BD82103.9D9379B4-ON4A257518.007BEE75-4A257518.007C475F@transport.qld.gov.au>



Even Rouault <even.rouault@mines-paris.org> wrote on 08/12/2008 08:26:23
AM:

> Le Sunday 07 December 2008 23:11:45
nicholas.g.lawrence@mainroads.qld.gov.au,
> vous avez ?crit?:

> > Frank,
> >
> > I downloaded FWTools only a few days ago. I thought
> > that it would have the latest OGR.
> >

> FWTools 2.2.8 was produced on October the 29th and ticket #2585 that
solves
> the issue with datetime in MIF/MID was fixed in the middle of november.

> You can try the gdal16 package in OSGeo4W that should include the fix.

OSGeo4W cannot reach out past my office's proxy server to download
the packages. The attempt to connect to the internet is blocked.

I visited http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries,

but it appears that the available GDAL is version 1.5, ie
http://download.osgeo.org/gdal/win32/1.5/gdalwin32exe150.zip

Is there another location where I can download GDAL 1.6 for
Windows XP?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From warmerdam at pobox.com  Mon Dec  8 00:28:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  8 00:28:43 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <f3b73b7d0812061321n5ad700fet4214bf9b7a2f6c30@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
	<f3b73b7d0812061321n5ad700fet4214bf9b7a2f6c30@mail.gmail.com>
Message-ID: <493CB07A.8050902@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> I've just noticed that ImportFromMICoordSys/ExportToMICoordSys haven't 
> been exposed to the SWIG interface yet, which I'd need pretty much to 
> utilize. Is this somewhat eligible to have there in the upcoming release 
> or I should target this change in 1.7.0 or 1.6.1 to be exposed?
> 
> http://trac.osgeo.org/gdal/ticket/2722

Tamas,

I am not opposed to exposing additional methods to swig supported languages
at a point release (like 1.6.1).  If you think it is important to have it
in 1.6.0 you could veto the RC4 promotion and add we could have an RC5 with
the support.  In any event, if it is important to you I'd suggest adding
it in trunk and 1.6 branch immediately so it can get into RC5 if there is one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From lists at fuchsschwanzdomain.de  Mon Dec  8 05:59:20 2008
From: lists at fuchsschwanzdomain.de (Sven Geggus)
Date: Mon Dec  8 05:59:23 2008
Subject: [gdal-dev] Re: GCPs in MEM driver, can we?
References: <ghgnd3$st2$1@ultimate100.geggus.net> <493C3259.9060504@ualg.pt>
Message-ID: <ghium8$upo$1@ultimate100.geggus.net>

Joaquim Luis <jluis@ualg.pt> wrote:

> I have my gdalwarp MEX that works reasonably into converting between
> projection systems.

Why do you post this a a reply to my Question?

There is zero relation between my gdal2tiles Question and your stuff :(

Sven

-- 
The main thing to note is that when you choose open source you don't
get a Windows operating system.
                                  (from http://www.dell.com/ubuntu)
/me is giggls@ircnet, http://sven.gegg.us/ on the Web
From szekerest at gmail.com  Mon Dec  8 06:12:42 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Dec  8 06:12:46 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <493CB07A.8050902@pobox.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
	<f3b73b7d0812061321n5ad700fet4214bf9b7a2f6c30@mail.gmail.com>
	<493CB07A.8050902@pobox.com>
Message-ID: <f3b73b7d0812080312r7c630009v3bb1748aa2fc0f55@mail.gmail.com>

2008/12/8 Frank Warmerdam <warmerdam@pobox.com>

> I am not opposed to exposing additional methods to swig supported languages
> at a point release (like 1.6.1).  If you think it is important to have it
> in 1.6.0 you could veto the RC4 promotion and add we could have an RC5 with
> the support.  In any event, if it is important to you I'd suggest adding
> it in trunk and 1.6 branch immediately so it can get into RC5 if there is
> one.
>

Frank,

I've added this in trunk and 1.6, however I'm not keen to block the release
process solely because of this. It will be ok to have it included in the
1.6.1 release.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081208/5edf00ac/attachment-0001.html
From dmorissette at mapgears.com  Mon Dec  8 07:44:55 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Dec  8 07:45:00 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
Message-ID: <493D16C7.1080204@mapgears.com>

Frank Warmerdam wrote:
> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
> official 1.6.0 release.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From bclay at ball.com  Mon Dec  8 08:21:30 2008
From: bclay at ball.com (Clay, Bruce)
Date: Mon Dec  8 08:21:34 2008
Subject: [gdal-dev] probelms with 1.6.0  on Vista 64 bit
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402A0E928@daytonmsg2k3.AERO.BALL.COM>

I am having problems getting GDAL 1.6.0 to work on Vista 64 bit.  It
fails on OgrRegisterAll.  It dose not through an exception it just lets
the program return to the GUI without any error message.  I put a break
point in the error handler call back and it does not hit that either.

 

It appears to be related to zlib.  I don't have the exact line number
but I was wondering if anyone else has been able to get GDAL 1.6.0 up on
a Vista 64 bit system.

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081208/9670d517/attachment.html
From szekerest at gmail.com  Mon Dec  8 08:40:48 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Dec  8 08:40:53 2008
Subject: [gdal-dev] probelms with 1.6.0 on Vista 64 bit
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402A0E928@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402A0E928@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <f3b73b7d0812080540s1458e67es8e7490e21495dc6f@mail.gmail.com>

Bruce,

Could you describe your test case in more detail? Are you using one of the
console apps of GDAL? Did you compile for x86 or x64?

Best regards,

Tamas


2008/12/8 Clay, Bruce <bclay@ball.com>

>  I am having problems getting GDAL 1.6.0 to work on Vista 64 bit.  It
> fails on OgrRegisterAll.  It dose not through an exception it just lets the
> program return to the GUI without any error message.  I put a break point in
> the error handler call back and it does not hit that either.
>
>
>
> It appears to be related to zlib.  I don't have the exact line number but I
> was wondering if anyone else has been able to get GDAL 1.6.0 up on a Vista
> 64 bit system.
>
>
>
> Bruce
>
>
>
> This message and any enclosures are intended only for the addressee.  Please
> notify the sender by email if you are not the intended recipient.  If you are
> not the intended recipient, you may not use, copy, disclose, or distribute this
> message or its contents or enclosures to any other person and any such actions
> may be unlawful.  Ball reserves the right to monitor and review all messages
> and enclosures sent to or from this email address.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081208/7abcd794/attachment.html
From jluis at ualg.pt  Mon Dec  8 09:07:14 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Dec  8 09:07:19 2008
Subject: [gdal-dev] Re: GCPs in MEM driver, can we?
In-Reply-To: <ghium8$upo$1@ultimate100.geggus.net>
References: <ghgnd3$st2$1@ultimate100.geggus.net> <493C3259.9060504@ualg.pt>
	<ghium8$upo$1@ultimate100.geggus.net>
Message-ID: <493D2A12.5030608@ualg.pt>

Sven Geggus wrote:
> Joaquim Luis <jluis@ualg.pt> wrote:
> 
>> I have my gdalwarp MEX that works reasonably into converting between
>> projection systems.
> 
> Why do you post this a a reply to my Question?
> 
> There is zero relation between my gdal2tiles Question and your stuff :(
> 
> Sven

Sorry,

You must be confusing something.
My post was a new tread as you can see in the mail's subject and not a reply to your's.

Joaquim
From klokan at klokan.cz  Mon Dec  8 09:30:38 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Mon Dec  8 09:30:40 2008
Subject: [gdal-dev] gdal2tiles.py crashes
In-Reply-To: <ghgnd3$st2$1@ultimate100.geggus.net>
References: <ghgnd3$st2$1@ultimate100.geggus.net>
Message-ID: <6e41d95b0812080630j4c978137g5c0992995390f5ae@mail.gmail.com>

Hi Sven,

It seems you are using old version of GDAL2Tiles, from GDAL 1.5, there
is a new version available in GDAL 1.6, which supports Google Maps
tiles.

It is not clear how your data look-like, I guess the Erdas image you
are trying to tile is using 16-bit values in the raster.
(Seeing gdalinfo on your input would help me to be sure.)

The solution in such case is to preprocess your input raster by calling:

gdal_translate -ot Byte -of vrt input.img temp.vrt

and run gdal2tiles on the temp.vrt.

Best regards

Klokan Petr Pridal

On Sun, Dec 7, 2008 at 3:42 PM, Sven Geggus <lists@fuchsschwanzdomain.de> wrote:
> I try to generate Google compatible tiles from one big rasterimage (EPSG:4326).
>
> This does however not work:
>
> Input (out-4326.img):
> ================================================================================
>  Driver: HFA / Erdas Imagine Images (.img)
>  Size: 87231 x 57321 x 3
>  Projection: GEOGCS["WGS_1984",DATUM["WGS_1984",SPHEROID["WGS
>  84",6378137,298.2572235630016],TOWGS84[0,0,0,0,0,0,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]
>  NSEW:  (50.068567784495805, 48.740330987425509, 13.196098581605034,
>  11.174790090035813)
> Projection detected as EPSG:4326
> Generating of KML is possible
> Output (../lvg-by-slippymap/):
> ================================================================================
>  Format of tiles: PNG / Portable Network Graphics
>  Size of a tile: 256 x 256 pixels
>  Count of tiles: 101974
>  Zoom levels of the pyramid: 9
>  Pixel resolution by zoomlevels: [0.011864015633013961,
>  0.0059320078165069805, 0.0029660039082534903,
>  0.0014830019541267451, 0.00074150097706337256,
>  0.00037075048853168628, 0.00018537524426584314,
>  9.268762213292157e-05, 4.6343811066460785e-05,
>  2.3171905533230393e-05]
> --------------------------------------------------------------------------------
> Zoom 9 - pixel 0.00002317190553323039 131072
> --------------------------------------------------------------------------------
> 1/101974 ../lvg-by-slippymap/9/0/0.png [0, 0] [0, 57065] [256, 256]
> [256, 256]
> Traceback (most recent call last):
>  File "/usr/bin/gdal2tiles.py", line 875, in ?
>    writetile( filename, data, dxsize, dysize, bands)
>  File "/usr/bin/gdal2tiles.py", line 75, in writetile
>    alpha.WriteArray( alphaarray, 0, tilesize-dysize )
>  File "/usr/lib/python2.4/site-packages/osgeo/gdal.py", line 782, in WriteArray
>    return gdalnumeric.BandWriteArray( self, array, xoff, yoff )
>  File "/usr/lib/python2.4/site-packages/osgeo/gdal_array.py", line 157, in BandWriteArray
>    raise ValueError, "array does not have corresponding GDAL data type"
> ValueError: array does not have corresponding GDAL data type
>
> Regards
>
> Sven
>
> --
> "In my opinion MS is a lot better at making money than it is at making good
> operating systems" (Linus Torvalds, August 1997)
>
> /me is giggls@ircnet, http://sven.gegg.us/ on the Web
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jrepetto at free.fr  Mon Dec  8 10:02:00 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Dec  8 10:31:51 2008
Subject: [gdal-dev] Re: GCPs in MEM driver, can we?
In-Reply-To: <493D2A12.5030608@ualg.pt>
References: <ghgnd3$st2$1@ultimate100.geggus.net>
	<493C3259.9060504@ualg.pt>	<ghium8$upo$1@ultimate100.geggus.net>
	<493D2A12.5030608@ualg.pt>
Message-ID: <493D36E8.2010002@free.fr>

Joaquim Luis wrote :
> 
> You must be confusing something.
> My post was a new tread as you can see in the mail's subject and not a 
> reply to your's.
> 
> Joaquim

No, it is a reply to Sven's question. Please look at your header :
In-Reply-To: <ghgnd3$st2$1@ultimate100.geggus.net>

I suppose that you have clicked on the "Reply" button, then you have 
changed the subject. That doesn't start a new thread. Next time, use the 
"New message" button !

Jean-Claude
From even.rouault at mines-paris.org  Mon Dec  8 13:52:58 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  8 15:39:16 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
Message-ID: <200812081952.59777.even.rouault@mines-paris.org>

Le Saturday 06 December 2008 14:12:15 Frank Warmerdam, vous avez ?crit?:
> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
> official 1.6.0 release.

+1

Even

>
> --
>
> Voting will close Tuesday evening.


From even.rouault at mines-paris.org  Mon Dec  8 16:45:05 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  8 16:45:10 2008
Subject: [gdal-dev] New OGR driver for GeoRSS
Message-ID: <200812082245.06525.even.rouault@mines-paris.org>

Folks,

for those interested, a new OGR driver for reading and writing (Geo)RSS feeds 
has just landed in subversion trunk (= 1.7.0dev ...).

See http://trac.osgeo.org/gdal/ticket/2726 and 
http://gdal.org/ogr/drv_georss.html for details.

Even
From warmerdam at pobox.com  Mon Dec  8 17:55:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  8 17:55:36 2008
Subject: [gdal-dev] Toronto Code Sprint 2009, March 7-10
Message-ID: <493DA5D9.1030508@pobox.com>

Folks,

I think it was mentioned here before, but I'd like to encourage
participation in the Toronto Code Sprint planned for March 7-10th.

 From the perspective of the GDAL developers I am particularly interested
in a focus on GDAL performance - with a emphasis on it's use from MapServer.

If there are folks interested in tuning GDAL performance in the MapServer
context, or for other applications it would be helpful to have you there
in attendance to help create and run performance tests, and help us tune
GDAL internals.

   http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at cleverelephant.ca  Mon Dec  8 18:35:38 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Dec  8 18:35:42 2008
Subject: [gdal-dev] Toronto Code Sprint
Message-ID: <30fe546d0812081535q217453ey63e3c2c78197744d@mail.gmail.com>

The 2009 Toronto Code Sprint is now set for March 7-10 at the Bond
Place Hotel in Toronto, Canada.

  http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

We hope you will consider joining us for a worthy weekend of sprinting
and getting connected.

We are now looking for sponsors to cover venue and lunches during the
sprint. If your organization wants to curry favor with a couple dozen
influential geospatial programmers, this is a great chance. We are
looking for just four sponsors at $500 each, please get in touch with
me if you are interested in sponsoring this event.

Thanks!

Paul
From jluis at ualg.pt  Mon Dec  8 20:15:19 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Dec  8 20:15:26 2008
Subject: [gdal-dev] trunk build is broken under windows with MSVC7.1
Message-ID: <493DC6A7.8080306@ualg.pt>


Hi,

I just updated but the build (MSVC7.1) hangs with


         cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port -I..\..\..\ogr
  -I..\..\..\gcore  -I..\..\..\alg -I..\..\..\ogr\ogrsf_frmts -I.. -I..\.. -DOGR
-DMITAB_USE_OFTDATETIME  /c mitab_utils.cpp
mitab_utils.cpp
         cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port -I..\..\..\ogr
  -I..\..\..\gcore  -I..\..\..\alg -I..\..\..\ogr\ogrsf_frmts -I.. -I..\.. -DOGR
-DMITAB_USE_OFTDATETIME  /c mitab_imapinfofile.cpp
mitab_imapinfofile.cpp
mitab_imapinfofile.cpp(391) : error C2601: 'IMapInfoFile::SetCharset' : local fu
nction definitions are illegal
mitab_imapinfofile.cpp(400) : fatal error C1075: end of file found before the le
ft brace '{' at 'mitab_imapinfofile.cpp(310)' was matched
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

C:\programs\GDALtrunk\gdal\ogr\ogrsf_frmts\mitab>cd gml   && nmake /NOLOGO /f ma
kefile.vc   && cd ..
The system cannot find the path specified.
...


Joaquim Luis

From a.neumann at carto.net  Tue Dec  9 03:24:49 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue Dec  9 03:46:32 2008
Subject: [gdal-dev] resampling a raster data set on the commandline
Message-ID: <38234.193.246.86.39.1228811089.squirrel@webmail.customers.iirc.at>

Hi all,

I need to resample raster files on the command line.

First I thought that resampling would be an option of gdal_translate, but
it seems like it isn't implemented and there is a patch pending:
http://trac.osgeo.org/gdal/ticket/1724 - but this patch is against an old
version.

gdal_warp allows to specify the resampling method and resolution change
when reprojecting, but I don't want to reproject my data, I just want
resampling. Is gdal_warp the tool to use for resampling by specifying the
same input and output projection?

Thanks,
Andreas

-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From daniele.romagnoli at geo-solutions.it  Tue Dec  9 05:59:23 2008
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue Dec  9 05:59:26 2008
Subject: [gdal-dev] Question about ENVI Hdr format. Where to find file
	sample data? Which file extension?
Message-ID: <7221db410812090259q46f452dcg240f97005b182b8b@mail.gmail.com>

Hi list,
I'm extending the ImageIO-Ext's supported formats. Now I'm adding ENVI Hdr
format support.

1) Where could I find some sample data available in that format?
I have already taken a look at http://download.osgeo.org/gdal/data/...
(In case data samples are unavailable I will use "gdal_translate -OF ENVI"
from a sample GeoTIFF.)

2) Are the file extensions for that format .bil .bip .bsq?

Thank you very much.

Best Regards,
Daniele

-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/1dc5d3d4/attachment.html
From jluis at ualg.pt  Tue Dec  9 08:58:46 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Dec  9 08:59:02 2008
Subject: [gdal-dev] Question about ENVI Hdr format. Where to find file
	sample data? Which file extension?
In-Reply-To: <7221db410812090259q46f452dcg240f97005b182b8b@mail.gmail.com>
References: <7221db410812090259q46f452dcg240f97005b182b8b@mail.gmail.com>
Message-ID: <493E7996.8090608@ualg.pt>

Daniele Romagnoli wrote:
> Hi list,
> I'm extending the ImageIO-Ext's supported formats. Now I'm adding ENVI 
> Hdr format support.
> 
> 1) Where could I find some sample data available in that format?
> I have already taken a look at http://download.osgeo.org/gdal/data/...
> (In case data samples are unavailable I will use "gdal_translate -OF 
> ENVI" from a sample GeoTIFF.)


Daniele,

The tutorials here have example files
http://www.ittvis.com/ProductServices/ENVI/Tutorials.aspx

> 2) Are the file extensions for that format .bil .bip .bsq?

Traditionally they are .img, but I think it doesn't matter

Joaquim Luis
From jluis at ualg.pt  Tue Dec  9 09:53:36 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Dec  9 09:53:40 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption when warping
	with GCPs
Message-ID: <493E8670.2090006@ualg.pt>

Hi,

I managed to solve my problem with the GCPs in MEM driver (and sorry if I bothered some with
that thread), which turned up to be due to a bad initialization of the dataset geotransform.

After that I wrote a MEX version of gdaltransform to be able to reproject points using GCPs.
This MEX works but it revealed serious problems. At least under Matlab.
Matlab requires not only LOTS of memory but also that the available memory is continuous.
For example, if one needs a variable of 100 Mb the system needs to have a chunk of free memory
not less than 100 Mb. Two chunks of 99 and 1 Mb are not enough as we'll have an out memory error.

Now, I just realize that when I call a MEX that links against gdal.dll the memory immediately becomes
highly fragmented. As an example of my current case, I had the largest chunk of free memory
of 1070 Mb and after loading gdal.dll the largest chunk become 540 Mb
Eventually due to this memory fragmentation, I could not reproject a file having a large number of
GCPs (> 5000 GCPs). By decreasing the number of GCPs to half I was able to perform the operation.

So one question is, why warping with GCPs takes such large amount of memory (apparently a chunk
of 500 Mb was not enough to process 5000 GCPs)?

I also tried with the command line GDAL gdaltransform and here I had no problems. So I'm a bit
puzzled.
Do all programs depend on the memory fragmentation issue, or is it just a Matlab limitation?
(Ah, Windows XP here)

As a side note, I also have MEXs that link with the OpenCV library, but those do not sensibly
fragment the memory.

Thanks

Joaquim Luis

From warmerdam at pobox.com  Tue Dec  9 09:59:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 09:59:41 2008
Subject: [gdal-dev] resampling a raster data set on the commandline
In-Reply-To: <38234.193.246.86.39.1228811089.squirrel@webmail.customers.iirc.at>
References: <38234.193.246.86.39.1228811089.squirrel@webmail.customers.iirc.at>
Message-ID: <493E87CD.1090300@pobox.com>

Andreas Neumann wrote:
> Hi all,
> 
> I need to resample raster files on the command line.
> 
> First I thought that resampling would be an option of gdal_translate, but
> it seems like it isn't implemented and there is a patch pending:
> http://trac.osgeo.org/gdal/ticket/1724 - but this patch is against an old
> version.
> 
> gdal_warp allows to specify the resampling method and resolution change
> when reprojecting, but I don't want to reproject my data, I just want
> resampling. Is gdal_warp the tool to use for resampling by specifying the
> same input and output projection?

Andreas,

Yes, gdalwarp would be the appropriate tool to use.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From daniele.romagnoli at geo-solutions.it  Tue Dec  9 10:11:14 2008
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue Dec  9 10:11:17 2008
Subject: [gdal-dev] Question about ENVI Hdr format. Where to find file
	sample data? Which file extension?
In-Reply-To: <493E7996.8090608@ualg.pt>
References: <7221db410812090259q46f452dcg240f97005b182b8b@mail.gmail.com>
	<493E7996.8090608@ualg.pt>
Message-ID: <7221db410812090711kc054dccje5ec09b2b1aae916@mail.gmail.com>

Joaquim,
thank you for the info.
I will take a look on that link.

Regards,
Daniele

On Tue, Dec 9, 2008 at 2:58 PM, Joaquim Luis <jluis@ualg.pt> wrote:

> Daniele Romagnoli wrote:
>
>> Hi list,
>> I'm extending the ImageIO-Ext's supported formats. Now I'm adding ENVI Hdr
>> format support.
>>
>> 1) Where could I find some sample data available in that format?
>> I have already taken a look at http://download.osgeo.org/gdal/data/...
>> (In case data samples are unavailable I will use "gdal_translate -OF ENVI"
>> from a sample GeoTIFF.)
>>
>
>
> Daniele,
>
> The tutorials here have example files
> http://www.ittvis.com/ProductServices/ENVI/Tutorials.aspx
>
>  2) Are the file extensions for that format .bil .bip .bsq?
>>
>
> Traditionally they are .img, but I think it doesn't matter
>
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/3c7cf157/attachment-0001.html
From warmerdam at pobox.com  Tue Dec  9 10:31:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 10:31:51 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption when
	warping with GCPs
In-Reply-To: <493E8670.2090006@ualg.pt>
References: <493E8670.2090006@ualg.pt>
Message-ID: <493E8F51.8080406@pobox.com>

Joaquim Luis wrote:
> So one question is, why warping with GCPs takes such large amount of 
> memory (apparently a chunk
> of 500 Mb was not enough to process 5000 GCPs)?

Joaquim,

Is the memory fragmentation really related to the use of many GCPs?  Does
the same problem occur with 4 GCPs?

> I also tried with the command line GDAL gdaltransform and here I had no 
> problems. So I'm a bit puzzled.
> Do all programs depend on the memory fragmentation issue, or is it just 
> a Matlab limitation?
> (Ah, Windows XP here)
> 
> As a side note, I also have MEXs that link with the OpenCV library, but 
> those do not sensibly
> fragment the memory.

It is possible that OpenCV uses a private heap thereby minimising the
amount of fragmentation in the "master heap".  It might also be that OpenEV
just doesn't use that much memory.

I suspect you are seeing some heap fragmentation and consumption due to
GDAL's block caching mechanism but it is really hard to know.  You can
influence the amount of memory available for the block cache using
GDALSetCacheMax(). I'm not in the habit of monitoring heap fragmentation
on Win32.  I will say that GDAL normally uses malloc() and free() for
memory allocation so that may have some implications for heap effects.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hans-ole.orka at umb.no  Tue Dec  9 10:14:52 2008
From: hans-ole.orka at umb.no (=?iso-8859-1?Q?Hans_Ole_=D8rka?=)
Date: Tue Dec  9 10:42:09 2008
Subject: [gdal-dev] GDALGridCreate() in python?
Message-ID: <79A4337FAC9B9745AC67F907304190C02B5F17B98B@exch01.ans.umb.no>

I like to use the gdal_grid/GDALGridCreate() command from python. Are the function wrapped for use in python now? See: http://trac.osgeo.org/gdal/ticket/2023.

If not,are there a posible workaround?

Hans
From jluis at ualg.pt  Tue Dec  9 11:15:57 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Dec  9 11:16:06 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption when
	warping with GCPs
In-Reply-To: <493E8F51.8080406@pobox.com>
References: <493E8670.2090006@ualg.pt> <493E8F51.8080406@pobox.com>
Message-ID: <493E99BD.5020507@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> So one question is, why warping with GCPs takes such large amount of 
>> memory (apparently a chunk
>> of 500 Mb was not enough to process 5000 GCPs)?
> 
> Joaquim,
> 
> Is the memory fragmentation really related to the use of many GCPs?  Does
> the same problem occur with 4 GCPs?

Frank,

Maybe I was not clear enough, but the memory segmentation has nothing to do
with the GCP warping. It results from loading the gdal.dll

For example, on a fresh start if I call (one other MEX for reading) gdalread
without arguments, it prints the usage on screen. After this, which did not
perform any calculus, the memory is already fragmented.

The issue with the GCPs is that with a largest chunk of ~500 Mb I'm not able
to warp with 5000 GCPs.


Joaquim


> 
>> I also tried with the command line GDAL gdaltransform and here I had 
>> no problems. So I'm a bit puzzled.
>> Do all programs depend on the memory fragmentation issue, or is it 
>> just a Matlab limitation?
>> (Ah, Windows XP here)
>>
>> As a side note, I also have MEXs that link with the OpenCV library, 
>> but those do not sensibly
>> fragment the memory.
> 
> It is possible that OpenCV uses a private heap thereby minimising the
> amount of fragmentation in the "master heap".  It might also be that OpenEV
> just doesn't use that much memory.
> 
> I suspect you are seeing some heap fragmentation and consumption due to
> GDAL's block caching mechanism but it is really hard to know.  You can
> influence the amount of memory available for the block cache using
> GDALSetCacheMax(). I'm not in the habit of monitoring heap fragmentation
> on Win32.  I will say that GDAL normally uses malloc() and free() for
> memory allocation so that may have some implications for heap effects.
> 
> Best regards,

From warmerdam at pobox.com  Tue Dec  9 11:22:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 11:22:51 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption when
	warping with GCPs
In-Reply-To: <493E99BD.5020507@ualg.pt>
References: <493E8670.2090006@ualg.pt> <493E8F51.8080406@pobox.com>
	<493E99BD.5020507@ualg.pt>
Message-ID: <493E9B42.8010004@pobox.com>

Joaquim Luis wrote:
> Frank,
> 
> Maybe I was not clear enough, but the memory segmentation has nothing to do
> with the GCP warping. It results from loading the gdal.dll
> 
> For example, on a fresh start if I call (one other MEX for reading) 
> gdalread
> without arguments, it prints the usage on screen. After this, which did not
> perform any calculus, the memory is already fragmented.

Joaquim,

OK.  Well, generally speaking GDAL should allocate relatively little
memory just on loading the DLL (and perhaps calling GDALAllRegister()).
So I don't know why you are seeing the problem you see.

> The issue with the GCPs is that with a largest chunk of ~500 Mb I'm not 
> able to warp with 5000 GCPs.

Does this aspect really have anything to do with the number of GCPs?
Are you using the GDAL warp algorithm?  There are things you can control
about the amount of memory it tries to use that might be relavent.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jluis at ualg.pt  Tue Dec  9 11:52:13 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Dec  9 11:52:23 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption when
	warping with GCPs
In-Reply-To: <493E9B42.8010004@pobox.com>
References: <493E8670.2090006@ualg.pt> <493E8F51.8080406@pobox.com>
	<493E99BD.5020507@ualg.pt> <493E9B42.8010004@pobox.com>
Message-ID: <493EA23D.3040302@ualg.pt>


> Joaquim,
> 
> OK.  Well, generally speaking GDAL should allocate relatively little
> memory just on loading the DLL (and perhaps calling GDALAllRegister()).

> So I don't know why you are seeing the problem you see.

Frank,
It's ok. I was not expecting an easy answer but I think this issue worth reporting.
Anyway, the fragmentation (note that there is not a total free memory reduction) is probably
originated by all the gdal.dll dependencies that one can see with the Dependency Walker being
loaded by the gdal.dll


> Does this aspect really have anything to do with the number of GCPs?
> Are you using the GDAL warp algorithm?

Oh yes, with 2500 GCPs I can do the warping. And yes I'm using the
GDAL warp algorithm (the mex is more or less a copy of gdaltransform)

Thanks

Joaquim
From scott.lewis at nsidc.org  Tue Dec  9 11:30:18 2008
From: scott.lewis at nsidc.org (Scott Lewis)
Date: Tue Dec  9 11:58:41 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
Message-ID: <493E9D1A.8010002@nsidc.org>

Hi,

I'm fairly new with GDAL, and have been working with a coworker who is a 
little more familiar with GDAL and gdalwarp, but we are both stumped by 
this particular issue.

I have a GeoTiff image that is in a north polar Lamber Azimuthal Equal 
Area (laea) projection.  I am trying to reproject it using gdalwarp to a 
cylindrical projection (like EPSG:4326).  I am using the following command:

gdalwarp -t_srs EPSG:4326 input.gtiff.tif output.gtiff.tif

The tool runs OK, but when I open output.gtiff.tif, the projection is 
"incomplete".  The parts that are there look correct, but it seems 
everything above about 50 degrees is cut off, like the input.gtiff.tif 
had a big circle around 50 degrees cut out before the reprojection was made.

I've tried looking at the options for gdalwarp, but can't seem to find 
anything that would help.

Is there a way to force gdalwarp to reproject the entire image?

Thanks!

Scott Lewis
NSIDC
From warmerdam at pobox.com  Tue Dec  9 12:07:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 12:08:10 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493E9D1A.8010002@nsidc.org>
References: <493E9D1A.8010002@nsidc.org>
Message-ID: <493EA5E7.9040405@pobox.com>

Scott Lewis wrote:
> Hi,
> 
> I'm fairly new with GDAL, and have been working with a coworker who is a 
> little more familiar with GDAL and gdalwarp, but we are both stumped by 
> this particular issue.
> 
> I have a GeoTiff image that is in a north polar Lamber Azimuthal Equal 
> Area (laea) projection.  I am trying to reproject it using gdalwarp to a 
> cylindrical projection (like EPSG:4326).  I am using the following command:
> 
> gdalwarp -t_srs EPSG:4326 input.gtiff.tif output.gtiff.tif
> 
> The tool runs OK, but when I open output.gtiff.tif, the projection is 
> "incomplete".  The parts that are there look correct, but it seems 
> everything above about 50 degrees is cut off, like the input.gtiff.tif 
> had a big circle around 50 degrees cut out before the reprojection was 
> made.
> 
> I've tried looking at the options for gdalwarp, but can't seem to find 
> anything that would help.

Scott,

There are various challenges in pole (or even dateline) spanning
reprojection operations.  The options at:

http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08

may be helpful.

In particular, you might try specifying -wo SOURCE_EXTRA=1000 or some similar
large value on the gdalwarp commandline.  It is also possible that the
SAMPLE_GRID=YES and SAMPLE_STEPS=100 options might help but generally if
you have lots of RAM and a not-too-big input image specifying a large
SOURCE_EXTRA value will resolve the issues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dany.geotools at gmail.com  Tue Dec  9 12:37:45 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Dec  9 12:44:05 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
Message-ID: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>

Hi again list,
I'm back to work on setting ECW format as a GDAL external plugin on windows
XP with visual studio 7.1 (nmake command line).

I have some issues...
My main steps are:
- building GDAL without ECW
- building ECW driver on frmts/ecw separately.
- configuring an ENV variable GDAL_DRIVER_PATH linking to the location where
the gdal_ECW_JP2ECW.DLL have been built.
- running gdalinfo to test things.

When running gdalinfo I get this error:
 ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW

Indeed, putting the generated DLL in the "depends/dependency walker" tool, I
have only noticed the presence of the following two functions:
- GDALRegister_ECW
- GDALRegister_JP2ECW

whilst the GDALDriverManager:autoLoadDrivers function does:
1) looks for a DLL in the specified GDAL_DRIVER_PATH --->
gdal_ECW_JP2ECW.DLL
2) tries to call GDALRegister_ECW_JP2ECW function (missing).

The weird thing is that "ecwdataset.cpp" contains that function but the
generated DLL doesn't contain it.
I have also noticed that the ECW plugin available here (
http://download.osgeo.org/gdal/win32/1.5/) doesn't contain that registration
function.

Does anyone already successfully used the ECW as a separated plugin on
windows?
Am I doing something wrong?
Any tips/suggestion would be really appreciated.


Best Regards,
Daniele

-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/8be73714/attachment.html
From daniele.romagnoli at geo-solutions.it  Tue Dec  9 12:39:39 2008
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue Dec  9 12:45:05 2008
Subject: [gdal-dev] Supporting ECW as GDAL plugin
Message-ID: <7221db410812090939p746b8b20v501b2f610188b960@mail.gmail.com>

Hi again list,
I'm back to work on setting ECW format as a GDAL external plugin on windows
XP with visual studio 7.1 (nmake command line).

I have some issues...
My main steps are:
- building GDAL without ECW
- building ECW driver on frmts/ecw separately.
- configuring an ENV variable GDAL_DRIVER_PATH linking to the location where
the gdal_ECW_JP2ECW.DLL have been built.
- running gdalinfo to test things.

When running gdalinfo I get this error:
 ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW

Indeed, putting the generated DLL in the "depends/dependency walker" tool, I
have only noticed the presence of the following two functions:
- GDALRegister_ECW
- GDALRegister_JP2ECW

whilst the GDALDriverManager:autoLoadDrivers function does:
1) looks for a DLL in the specified GDAL_DRIVER_PATH --->
gdal_ECW_JP2ECW.DLL
2) tries to call GDALRegister_ECW_JP2ECW function (missing).

The weird thing is that "ecwdataset.cpp" contains that function but the
generated DLL doesn't contain it.
I have also noticed that the ECW plugin available here (
http://download.osgeo.org/gdal/win32/1.5/) doesn't contain that registration
function.

Does anyone already successfully used the ECW as a separated plugin on
windows?
Am I doing something wrong?
Any tips/suggestion would be really appreciated.


Best Regards,
Daniele


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/bb62ae11/attachment.html
From scott.lewis at nsidc.org  Tue Dec  9 12:51:59 2008
From: scott.lewis at nsidc.org (Scott Lewis)
Date: Tue Dec  9 12:52:01 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493EA5E7.9040405@pobox.com>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
Message-ID: <493EB03F.9000103@nsidc.org>

Frank,

Thanks for the help.  I tried doing this, and ended up with the same 
image (even diff found them to be the same).  Here are the various 
commands I tried.  Maybe I'm just using the -wo option wrong.

gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 input.gtiff.tif 
output1.gtiff.tif
gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000" input.gtiff.tif 
output2.gtiff.tif
gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000 SAMPLE_GRID=YES 
SAMPLE_STEP=100" input.gtiff.tif output3.gtiff.tif

I'll continue to play with those options, though.  gdalwarp seems to not 
act any different (IE, it takes the same amount of time to process) with 
or without the -wo option, so I'm thinking I'm just not using the option 
correctly somehow.

Again, I appreciate your help!

Scott

Frank Warmerdam wrote:
> Scott Lewis wrote:
>> Hi,
>>
>> I'm fairly new with GDAL, and have been working with a coworker who 
>> is a little more familiar with GDAL and gdalwarp, but we are both 
>> stumped by this particular issue.
>>
>> I have a GeoTiff image that is in a north polar Lamber Azimuthal 
>> Equal Area (laea) projection.  I am trying to reproject it using 
>> gdalwarp to a cylindrical projection (like EPSG:4326).  I am using 
>> the following command:
>>
>> gdalwarp -t_srs EPSG:4326 input.gtiff.tif output.gtiff.tif
>>
>> The tool runs OK, but when I open output.gtiff.tif, the projection is 
>> "incomplete".  The parts that are there look correct, but it seems 
>> everything above about 50 degrees is cut off, like the 
>> input.gtiff.tif had a big circle around 50 degrees cut out before the 
>> reprojection was made.
>>
>> I've tried looking at the options for gdalwarp, but can't seem to 
>> find anything that would help.
>
> Scott,
>
> There are various challenges in pole (or even dateline) spanning
> reprojection operations.  The options at:
>
> http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08 
>
>
> may be helpful.
>
> In particular, you might try specifying -wo SOURCE_EXTRA=1000 or some 
> similar
> large value on the gdalwarp commandline.  It is also possible that the
> SAMPLE_GRID=YES and SAMPLE_STEPS=100 options might help but generally if
> you have lots of RAM and a not-too-big input image specifying a large
> SOURCE_EXTRA value will resolve the issues.
>
> Best regards,
From woklist at kyngchaos.com  Tue Dec  9 13:16:34 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Dec  9 13:16:41 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
In-Reply-To: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
References: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
Message-ID: <8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>

On Dec 9, 2008, at 11:37 AM, Daniele Romagnoli wrote:

> When running gdalinfo I get this error:
>  ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW
>
> Indeed, putting the generated DLL in the "depends/dependency walker"  
> tool, I have only noticed the presence of the following two functions:
> - GDALRegister_ECW
> - GDALRegister_JP2ECW
>
> whilst the GDALDriverManager:autoLoadDrivers function does:
> 1) looks for a DLL in the specified GDAL_DRIVER_PATH --->  
> gdal_ECW_JP2ECW.DLL
> 2) tries to call GDALRegister_ECW_JP2ECW function (missing).
>
> The weird thing is that "ecwdataset.cpp" contains that function but  
> the generated DLL doesn't contain it.
> I have also noticed that the ECW plugin available here (http://download.osgeo.org/gdal/win32/1.5/ 
> ) doesn't contain that registration function.
>
> Does anyone already successfully used the ECW as a separated plugin  
> on windows?
> Am I doing something wrong?
> Any tips/suggestion would be really appreciated.
>

Strange coincidence, or it points to some GDAL bug: I was messing  
around with ECW on OSX as a plugin this weekend.  When I compiled the  
plugin for GDAL 1.6, it loaded.  When I compiled the plugin for GDAL  
1.5, I got the equivalent error:

ERROR 1: dlsym(0x10160bd50, _GDALRegister_ECW_JP2ECW): symbol not found
ERROR 1: dlsym(0x10160bd50, _GDALRegisterMe): symbol not found

Simply renaming the plugin either gdal_ECW or gdal_JP2ECW works to  
load the driver for the named format.

Having one as gdal_ECW, then symlinking that to gdal_JP2ECW works to  
load both.  I don't know what the equivalent to symlink is on Windows,  
but duplicating the binary should also work.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From even.rouault at mines-paris.org  Tue Dec  9 13:39:36 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  9 13:39:46 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493EB03F.9000103@nsidc.org>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
	<493EB03F.9000103@nsidc.org>
Message-ID: <200812091939.37630.even.rouault@mines-paris.org>

Le Tuesday 09 December 2008 18:51:59 Scott Lewis, vous avez ?crit?:
> Frank,
>
> Thanks for the help.  I tried doing this, and ended up with the same
> image (even diff found them to be the same).  Here are the various
> commands I tried.  Maybe I'm just using the -wo option wrong.
>
> gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 input.gtiff.tif
> output1.gtiff.tif
> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000" input.gtiff.tif
> output2.gtiff.tif

> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000 SAMPLE_GRID=YES
> SAMPLE_STEP=100" input.gtiff.tif output3.gtiff.tif

This last one won't work as you expect. You should repeat -wo in front of each 
option :
gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 -wo SAMPLE_GRID=YES -wo 
SAMPLE_STEP=100 input.gtiff.tif output3.gtiff.tif

>
> I'll continue to play with those options, though.  gdalwarp seems to not
> act any different (IE, it takes the same amount of time to process) with
> or without the -wo option, so I'm thinking I'm just not using the option
> correctly somehow.
>
> Again, I appreciate your help!
>
> Scott
>
> Frank Warmerdam wrote:
> > Scott Lewis wrote:
> >> Hi,
> >>
> >> I'm fairly new with GDAL, and have been working with a coworker who
> >> is a little more familiar with GDAL and gdalwarp, but we are both
> >> stumped by this particular issue.
> >>
> >> I have a GeoTiff image that is in a north polar Lamber Azimuthal
> >> Equal Area (laea) projection.  I am trying to reproject it using
> >> gdalwarp to a cylindrical projection (like EPSG:4326).  I am using
> >> the following command:
> >>
> >> gdalwarp -t_srs EPSG:4326 input.gtiff.tif output.gtiff.tif
> >>
> >> The tool runs OK, but when I open output.gtiff.tif, the projection is
> >> "incomplete".  The parts that are there look correct, but it seems
> >> everything above about 50 degrees is cut off, like the
> >> input.gtiff.tif had a big circle around 50 degrees cut out before the
> >> reprojection was made.
> >>
> >> I've tried looking at the options for gdalwarp, but can't seem to
> >> find anything that would help.
> >
> > Scott,
> >
> > There are various challenges in pole (or even dateline) spanning
> > reprojection operations.  The options at:
> >
> > http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4
> >d06e08
> >
> >
> > may be helpful.
> >
> > In particular, you might try specifying -wo SOURCE_EXTRA=1000 or some
> > similar
> > large value on the gdalwarp commandline.  It is also possible that the
> > SAMPLE_GRID=YES and SAMPLE_STEPS=100 options might help but generally if
> > you have lots of RAM and a not-too-big input image specifying a large
> > SOURCE_EXTRA value will resolve the issues.
> >
> > Best regards,
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Tue Dec  9 13:41:32 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue Dec  9 13:42:48 2008
Subject: [gdal-dev] GDALGridCreate() in python?
In-Reply-To: <79A4337FAC9B9745AC67F907304190C02B5F17B98B@exch01.ans.umb.no>
References: <79A4337FAC9B9745AC67F907304190C02B5F17B98B@exch01.ans.umb.no>
Message-ID: <493EBBDC.1000703@tkk.fi>

Hans Ole ?rka kirjoitti:
> I like to use the gdal_grid/GDALGridCreate() command from python. Are the function wrapped for use in python now? See: http://trac.osgeo.org/gdal/ticket/2023.
>
> If not,are there a posible workaround?
>   

It's not been added to the swig interface and there's no workaround. I 
guess you need to use the command line program. Adding it to the swig 
interface needs some thought as the function does not create a GDAL 
object- in fact it interpolates onto an in-memory raster.

Best regards,

Ari

> Hans
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From even.rouault at mines-paris.org  Tue Dec  9 13:52:29 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  9 13:52:33 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
In-Reply-To: <8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
References: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
	<8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
Message-ID: <200812091952.29885.even.rouault@mines-paris.org>

Just a pointer : http://trac.osgeo.org/gdal/ticket/2320

The GDALRegister_ECW_JP2ECW function is only available in GDAL 1.5.3 or later, 
so when using the plugin in http://download.osgeo.org/gdal/win32/1.5/, it's 
normal that you don't find the GDALRegister_ECW_JP2ECW entry point.

And, as a reminder, you shouldn't mix plugins between GDAL 1.5.X and GDAL 
1.6.0. You should always recompile a plugin version that lies in the GDAL 
tree with which you want to use it.

Le Tuesday 09 December 2008 19:16:34 William Kyngesburye, vous avez ?crit?:
> On Dec 9, 2008, at 11:37 AM, Daniele Romagnoli wrote:
> > When running gdalinfo I get this error:
> >  ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW
> >
> > Indeed, putting the generated DLL in the "depends/dependency walker"
> > tool, I have only noticed the presence of the following two functions:
> > - GDALRegister_ECW
> > - GDALRegister_JP2ECW
> >
> > whilst the GDALDriverManager:autoLoadDrivers function does:
> > 1) looks for a DLL in the specified GDAL_DRIVER_PATH --->
> > gdal_ECW_JP2ECW.DLL
> > 2) tries to call GDALRegister_ECW_JP2ECW function (missing).
> >
> > The weird thing is that "ecwdataset.cpp" contains that function but
> > the generated DLL doesn't contain it.
> > I have also noticed that the ECW plugin available here
> > (http://download.osgeo.org/gdal/win32/1.5/ ) doesn't contain that
> > registration function.
> >
> > Does anyone already successfully used the ECW as a separated plugin
> > on windows?
> > Am I doing something wrong?
> > Any tips/suggestion would be really appreciated.
>
> Strange coincidence, or it points to some GDAL bug: I was messing
> around with ECW on OSX as a plugin this weekend.  When I compiled the
> plugin for GDAL 1.6, it loaded.  When I compiled the plugin for GDAL
> 1.5, I got the equivalent error:
>
> ERROR 1: dlsym(0x10160bd50, _GDALRegister_ECW_JP2ECW): symbol not found
> ERROR 1: dlsym(0x10160bd50, _GDALRegisterMe): symbol not found
>
> Simply renaming the plugin either gdal_ECW or gdal_JP2ECW works to
> load the driver for the named format.
>
> Having one as gdal_ECW, then symlinking that to gdal_JP2ECW works to
> load both.  I don't know what the equivalent to symlink is on Windows,
> but duplicating the binary should also work.
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Theory of the Universe
>
> There is a theory which states that if ever anyone discovers exactly
> what the universe is for and why it is here, it will instantly
> disappear and be replaced by something even more bizarrely
> inexplicable.  There is another theory which states that this has
> already happened.
>
> -Hitchhiker's Guide to the Galaxy 2nd season intro
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dron at ak4719.spb.edu  Tue Dec  9 13:55:30 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Dec  9 14:04:43 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
Message-ID: <20081209185530.GB8980@ak4719.spb.edu>

On Sat, Dec 06, 2008 at 08:12:15AM -0500, Frank Warmerdam wrote:
> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
> official 1.6.0 release.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From dron at ak4719.spb.edu  Tue Dec  9 13:55:00 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Dec  9 14:04:45 2008
Subject: [gdal-dev] GDALGridCreate() in python?
In-Reply-To: <493EBBDC.1000703@tkk.fi>
References: <79A4337FAC9B9745AC67F907304190C02B5F17B98B@exch01.ans.umb.no>
	<493EBBDC.1000703@tkk.fi>
Message-ID: <20081209185500.GA8980@ak4719.spb.edu>

On Tue, Dec 09, 2008 at 08:41:32PM +0200, Ari Jolma wrote:
>> I like to use the gdal_grid/GDALGridCreate() command from python. Are the
>> function wrapped for use in python now? See:
>> http://trac.osgeo.org/gdal/ticket/2023.
>>
>> If not,are there a posible workaround?
>
> It's not been added to the swig interface and there's no workaround. I  guess
> you need to use the command line program. Adding it to the swig  interface
> needs some thought as the function does not create a GDAL  object- in fact it
> interpolates onto an in-memory raster.

I am thinking on idea to create the native NumPy bindings for GDAL (using the
NumPy typemaps). That should greatly help to create practical bindings for Grid
functions and some other.

Also it is possible to create the higher level wrapper for gridding hiding the
arrays inside.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From hobu.inc at gmail.com  Tue Dec  9 14:08:30 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec  9 14:08:36 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <20081209185530.GB8980@ak4719.spb.edu>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
	<20081209185530.GB8980@ak4719.spb.edu>
Message-ID: <553BDD9A-B60C-4393-BA9D-9F33372EE174@gmail.com>


On Dec 9, 2008, at 12:55 PM, Andrey Kiselev wrote:

> On Sat, Dec 06, 2008 at 08:12:15AM -0500, Frank Warmerdam wrote:
>> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to  
>> being our
>> official 1.6.0 release.
>
> +1
>

+1

Howard

From warmerdam at pobox.com  Tue Dec  9 14:08:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 14:08:38 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493EB03F.9000103@nsidc.org>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
	<493EB03F.9000103@nsidc.org>
Message-ID: <493EC21F.6080906@pobox.com>

Scott Lewis wrote:
> Frank,
> 
> Thanks for the help.  I tried doing this, and ended up with the same 
> image (even diff found them to be the same).  Here are the various 
> commands I tried.  Maybe I'm just using the -wo option wrong.
> 
> gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 input.gtiff.tif 
> output1.gtiff.tif
> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000" input.gtiff.tif 
> output2.gtiff.tif
> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000 SAMPLE_GRID=YES 
> SAMPLE_STEP=100" input.gtiff.tif output3.gtiff.tif
> 
> I'll continue to play with those options, though.  gdalwarp seems to not 
> act any different (IE, it takes the same amount of time to process) with 
> or without the -wo option, so I'm thinking I'm just not using the option 
> correctly somehow.
> 
> Again, I appreciate your help!

Scott,

I suspect I've misconstrued what is going wrong.  If you can stage
the input file somewhere, and if it isn't too terribly huge, I would
be interested in trying it myself.  Ideally this could be filed as a
Trac ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woklist at kyngchaos.com  Tue Dec  9 14:54:33 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Dec  9 14:54:37 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
In-Reply-To: <200812091952.29885.even.rouault@mines-paris.org>
References: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
	<8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
	<200812091952.29885.even.rouault@mines-paris.org>
Message-ID: <450A9C72-EA4D-4500-B7A9-D2930579E87D@kyngchaos.com>

On Dec 9, 2008, at 12:52 PM, Even Rouault wrote:

> Just a pointer : http://trac.osgeo.org/gdal/ticket/2320
>
> The GDALRegister_ECW_JP2ECW function is only available in GDAL 1.5.3  
> or later,
> so when using the plugin in http://download.osgeo.org/gdal/ 
> win32/1.5/, it's
> normal that you don't find the GDALRegister_ECW_JP2ECW entry point.
>
> And, as a reminder, you shouldn't mix plugins between GDAL 1.5.X and  
> GDAL
> 1.6.0. You should always recompile a plugin version that lies in the  
> GDAL
> tree with which you want to use it.
>
I figured that a driver's prototypes would be in the driver's source,  
but there I see it in gdal_frmts.h.  So yeah,  
GDALRegister_ECW_JP2ECW() really is not going to work in GDAL 1.5.2.   
(checking the library symbols, GDALRegister_ECW_JP2ECW() ends up as a C 
++ symbol, instead of a C symbol)

I need to update ;)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

The equator is so long, it could encircle the earth completely once.

From szekerest at gmail.com  Tue Dec  9 14:49:34 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Dec  9 14:57:34 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
Message-ID: <f3b73b7d0812091149q6bf401f3y5130cfbc8f669678@mail.gmail.com>

+1

Tamas



2008/12/6 Frank Warmerdam <warmerdam@pobox.com>

> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to being our
> official 1.6.0 release.
>
> --
>
> Voting will close Tuesday evening.
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/d2c1a6b7/attachment.html
From guanqf at gmail.com  Tue Dec  9 15:46:58 2008
From: guanqf at gmail.com (Qingfeng (Gene) Guan)
Date: Tue Dec  9 15:47:12 2008
Subject: [gdal-dev] How to CreateCopy a dataset from an empty virtual
 dataset (no source dataset is linked)?
Message-ID: <493ED942.1070209@gmail.com>

I am trying to write a program which is able to create a raster dataset 
of any supported format. To do so, I first created a virtual dataset in 
memory using the Create() function, then set the projection and add the 
bands to the virtual dataset (no links to source datasets), and then 
used the CreateCopy() function to create a non-virtual dataset from the 
virtual dataset I just created. However, the CreateCopy() always 
returned a NULL pointer. I also tried creating a temporary vrt file 
using the Create() function before using CreateCopy(). Still, the 
CreateCopy() returned a NULL pointer.
Has anyone done this before or have any idea how to do this? Do I have 
to link a source dataset to the virtual dataset before using 
CreateCopy() to create a non-virtual dataset from the virtual dataset? I 
just want to create an empty dataset in which all the pixels are set to 
some initial value (for example, zero).

I am using GDAL 1.5.3. The following is the code I wrote:

...
GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
GDALDataset *poVRTDS;
poVRTDS = poVRTDriver->Create("", xSize, ySize,
                              3, GDT_Byte,
                              NULL);
if(poVRTDS == NULL) {
  cerr << "Error: unable to create virtual GDAL dataset " \
       << endl;
  return false;
}
 
if(poVRTDS->SetProjection(pProjRef) == CE_Failure ||
   poVRTDS->SetGeoTransform(adfGeoTransform) == CE_Failure) {
  cerr << "Error: unable to set projection for the virtual dataset" \
       << endl;
  return false;
}

GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "Gtiff" );
GDALDataset *poDesDS;
poDesDS= poDriver->CreateCopy("myGTIFF.tif",
                              poVRTDS,
                              FALSE, NULL,
                              NULL, NULL);
  if(poDesDS== NULL) {
    cerr << "Error: unable to create GDAL dataset" << endl;
    GDALClose(poVRTDS);
    return false;
  }
  GDALClose(poVRTDS);
...

-- 
---=== Qingfeng (Gene) Guan ===---
From guanqf at gmail.com  Tue Dec  9 16:43:22 2008
From: guanqf at gmail.com (Qingfeng (Gene) Guan)
Date: Tue Dec  9 16:43:25 2008
Subject: [gdal-dev] How to CreateCopy a dataset from an empty virtual
	dataset (no source dataset is linked)?
Message-ID: <560deae10812091343l64861b13x4e2e6517c8be7a29@mail.gmail.com>

I am trying to write a program which is able to create a raster dataset of
any supported format. To do so, I first created a virtual dataset in memory
using the Create() function, then set the projection and add the bands to
the virtual dataset (no links to source datasets), and then used the
CreateCopy() function to create a non-virtual dataset from the virtual
dataset I just created. However, the CreateCopy() always returned a NULL
pointer. I also tried creating a temporary vrt file using the Create()
function before using CreateCopy(). Still, the CreateCopy() returned a NULL
pointer.
Has anyone done this before or have any idea how to do this? Do I have to
link a source dataset to the virtual dataset before using CreateCopy() to
create a non-virtual dataset from the virtual dataset? I just want to create
an empty dataset in which all the pixels are set to some initial value (for
example, zero).

I am using GDAL 1.5.3. The following is the code I wrote:

...
GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
GDALDataset *poVRTDS;
poVRTDS = poVRTDriver->Create("", xSize, ySize,
                            3, GDT_Byte,
                            NULL);
if(poVRTDS == NULL) {
 cerr << "Error: unable to create virtual GDAL dataset " \
     << endl;
 return false;
}

if(poVRTDS->SetProjection(pProjRef) == CE_Failure ||
 poVRTDS->SetGeoTransform(adfGeoTransform) == CE_Failure) {
 cerr << "Error: unable to set projection for the virtual dataset" \
     << endl;
 return false;
}

GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "Gtiff" );
GDALDataset *poDesDS;
poDesDS= poDriver->CreateCopy("myGTIFF.tif",
                            poVRTDS,
                            FALSE, NULL,
                            NULL, NULL);
 if(poDesDS== NULL) {
  cerr << "Error: unable to create GDAL dataset" << endl;
  GDALClose(poVRTDS);
  return false;
 }
 GDALClose(poVRTDS);
...


-- 

--== Qingfeng (Gene) Guan ==--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/eeaf68c1/attachment-0001.html
From dany.geotools at gmail.com  Tue Dec  9 17:01:15 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Dec  9 17:01:27 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
In-Reply-To: <200812091952.29885.even.rouault@mines-paris.org>
References: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
	<8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
	<200812091952.29885.even.rouault@mines-paris.org>
Message-ID: <7221db410812091401q6a3be0d1j13c332774d05328@mail.gmail.com>

On Tue, Dec 9, 2008 at 7:52 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Just a pointer : http://trac.osgeo.org/gdal/ticket/2320
>
> The GDALRegister_ECW_JP2ECW function is only available in GDAL 1.5.3 or
> later,
> so when using the plugin in http://download.osgeo.org/gdal/win32/1.5/,
> it's
> normal that you don't find the GDALRegister_ECW_JP2ECW entry point.


Ok. Thank you for the info. I didn't know that. I have simply quickly
checked that set of DLL to see if that entry was present somewhere.


>
>
> And, as a reminder, you shouldn't mix plugins between GDAL 1.5.X and GDAL
> 1.6.0. You should always recompile a plugin version that lies in the GDAL
> tree with which you want to use it.


Sure. I have made my experiments only with version 1.5.3.

Regards,
Daniele


>
>
> Le Tuesday 09 December 2008 19:16:34 William Kyngesburye, vous avez ?crit :
> > On Dec 9, 2008, at 11:37 AM, Daniele Romagnoli wrote:
> > > When running gdalinfo I get this error:
> > >  ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW
> > >
> > > Indeed, putting the generated DLL in the "depends/dependency walker"
> > > tool, I have only noticed the presence of the following two functions:
> > > - GDALRegister_ECW
> > > - GDALRegister_JP2ECW
> > >
> > > whilst the GDALDriverManager:autoLoadDrivers function does:
> > > 1) looks for a DLL in the specified GDAL_DRIVER_PATH --->
> > > gdal_ECW_JP2ECW.DLL
> > > 2) tries to call GDALRegister_ECW_JP2ECW function (missing).
> > >
> > > The weird thing is that "ecwdataset.cpp" contains that function but
> > > the generated DLL doesn't contain it.
> > > I have also noticed that the ECW plugin available here
> > > (http://download.osgeo.org/gdal/win32/1.5/ ) doesn't contain that
> > > registration function.
> > >
> > > Does anyone already successfully used the ECW as a separated plugin
> > > on windows?
> > > Am I doing something wrong?
> > > Any tips/suggestion would be really appreciated.
> >
> > Strange coincidence, or it points to some GDAL bug: I was messing
> > around with ECW on OSX as a plugin this weekend.  When I compiled the
> > plugin for GDAL 1.6, it loaded.  When I compiled the plugin for GDAL
> > 1.5, I got the equivalent error:
> >
> > ERROR 1: dlsym(0x10160bd50, _GDALRegister_ECW_JP2ECW): symbol not found
> > ERROR 1: dlsym(0x10160bd50, _GDALRegisterMe): symbol not found
> >
> > Simply renaming the plugin either gdal_ECW or gdal_JP2ECW works to
> > load the driver for the named format.
> >
> > Having one as gdal_ECW, then symlinking that to gdal_JP2ECW works to
> > load both.  I don't know what the equivalent to symlink is on Windows,
> > but duplicating the binary should also work.
> >
> > -----
> > William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> > http://www.kyngchaos.com/
> >
> > Theory of the Universe
> >
> > There is a theory which states that if ever anyone discovers exactly
> > what the universe is for and why it is here, it will instantly
> > disappear and be replaced by something even more bizarrely
> > inexplicable.  There is another theory which states that this has
> > already happened.
> >
> > -Hitchhiker's Guide to the Galaxy 2nd season intro
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/1ede342f/attachment.html
From dany.geotools at gmail.com  Tue Dec  9 16:56:37 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Dec  9 17:04:25 2008
Subject: [gdal-dev] Supporting ECW as a plugin. (Windows)
In-Reply-To: <8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
References: <7221db410812090937o186ee9e8w7b166a91c8204542@mail.gmail.com>
	<8DE84976-F344-4606-86E0-883DEDB637C9@kyngchaos.com>
Message-ID: <7221db410812091356n6014a3f8s728babc1f69f802c@mail.gmail.com>

On Tue, Dec 9, 2008 at 7:16 PM, William Kyngesburye
<woklist@kyngchaos.com>wrote:

> On Dec 9, 2008, at 11:37 AM, Daniele Romagnoli wrote:
>
>  When running gdalinfo I get this error:
>>  ERROR 1: Can't find requested entry point: GDALRegister_ECW_JP2ECW
>>
>> Indeed, putting the generated DLL in the "depends/dependency walker" tool,
>> I have only noticed the presence of the following two functions:
>> - GDALRegister_ECW
>> - GDALRegister_JP2ECW
>>
>> whilst the GDALDriverManager:autoLoadDrivers function does:
>> 1) looks for a DLL in the specified GDAL_DRIVER_PATH --->
>> gdal_ECW_JP2ECW.DLL
>> 2) tries to call GDALRegister_ECW_JP2ECW function (missing).
>>
>> The weird thing is that "ecwdataset.cpp" contains that function but the
>> generated DLL doesn't contain it.
>> I have also noticed that the ECW plugin available here (
>> http://download.osgeo.org/gdal/win32/1.5/) doesn't contain that
>> registration function.
>>
>> Does anyone already successfully used the ECW as a separated plugin on
>> windows?
>> Am I doing something wrong?
>> Any tips/suggestion would be really appreciated.
>>
>>
> Strange coincidence, or it points to some GDAL bug: I was messing around
> with ECW on OSX as a plugin this weekend.  When I compiled the plugin for
> GDAL 1.6, it loaded.  When I compiled the plugin for GDAL 1.5, I got the
> equivalent error:
>
> ERROR 1: dlsym(0x10160bd50, _GDALRegister_ECW_JP2ECW): symbol not found
> ERROR 1: dlsym(0x10160bd50, _GDALRegisterMe): symbol not found
>
> Simply renaming the plugin either gdal_ECW or gdal_JP2ECW works to load the
> driver for the named format.


This also worked for me before sending the email. I would just like to know
if someone have noticed this before.

Having one as gdal_ECW, then symlinking that to gdal_JP2ECW works to load
> both.  I don't know what the equivalent to symlink is on Windows, but
> duplicating the binary should also work.


Regards,
Daniele


>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Theory of the Universe
>
> There is a theory which states that if ever anyone discovers exactly what
> the universe is for and why it is here, it will instantly disappear and be
> replaced by something even more bizarrely inexplicable.  There is another
> theory which states that this has already happened.
>
> -Hitchhiker's Guide to the Galaxy 2nd season intro
>
>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/8243ec09/attachment.html
From warmerdam at pobox.com  Tue Dec  9 18:09:19 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 18:09:33 2008
Subject: [gdal-dev] How to CreateCopy a dataset from an empty virtual
	dataset (no source dataset is linked)?
In-Reply-To: <560deae10812091343l64861b13x4e2e6517c8be7a29@mail.gmail.com>
References: <560deae10812091343l64861b13x4e2e6517c8be7a29@mail.gmail.com>
Message-ID: <493EFA9F.5040501@pobox.com>

Qingfeng (Gene) Guan wrote:
> I am trying to write a program which is able to create a raster dataset 
> of any supported format. To do so, I first created a virtual dataset in 
> memory using the Create() function, then set the projection and add the 
> bands to the virtual dataset (no links to source datasets), and then 
> used the CreateCopy() function to create a non-virtual dataset from the 
> virtual dataset I just created. However, the CreateCopy() always 
> returned a NULL pointer. I also tried creating a temporary vrt file 
> using the Create() function before using CreateCopy(). Still, the 
> CreateCopy() returned a NULL pointer.
> Has anyone done this before or have any idea how to do this? Do I have 
> to link a source dataset to the virtual dataset before using 
> CreateCopy() to create a non-virtual dataset from the virtual dataset? I 
> just want to create an empty dataset in which all the pixels are set to 
> some initial value (for example, zero).
> 
> I am using GDAL 1.5.3. <http://1.5.3./> The following is the code I wrote:
> 
> ...
> GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
> GDALDataset *poVRTDS;
> poVRTDS = poVRTDriver->Create("", xSize, ySize,
>                             3, GDT_Byte,
>                             NULL);

Gene,

It turns out that VRTSourcedRasterBand::IRasterIO() returns CE_Failure if
there are no sources for the band.  I believe this is an inappropriate
behavior, and unnecessarily interferes in situations like yours.

I would appreciate your filing a trac ticket on the issue, and I'll look
into applying a fix.  Tentatively I'm considering this change
in gdal/frmts/vrt/vrtsourcedrasterband.cpp:

Index: vrtsourcedrasterband.cpp
===================================================================
--- vrtsourcedrasterband.cpp    (revision 15924)
+++ vrtsourcedrasterband.cpp    (working copy)
@@ -122,7 +122,7 @@

  {
      int         iSource;
-    CPLErr      eErr = CE_Failure;
+    CPLErr      eErr = CE_None;

      if( eRWFlag == GF_Write )
      {
@@ -171,7 +171,7 @@
  /* -------------------------------------------------------------------- */
  /*      Overlay each source in turn over top this.                      */
  /* -------------------------------------------------------------------- */
-    for( iSource = 0; iSource < nSources; iSource++ )
+    for( iSource = 0; eErr == CE_None && iSource < nSources; iSource++ )
      {
          eErr =
              papoSources[iSource]->RasterIO( nXOff, nYOff, nXSize, nYSize,

You might want to try it yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From scott.lewis at nsidc.org  Tue Dec  9 18:10:20 2008
From: scott.lewis at nsidc.org (Scott Lewis)
Date: Tue Dec  9 18:10:26 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493EC21F.6080906@pobox.com>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
	<493EB03F.9000103@nsidc.org> <493EC21F.6080906@pobox.com>
Message-ID: <493EFADC.7090202@nsidc.org>

I've been having problems getting it staged.  As soon as I'm able to 
I'll send the URL.  Maybe the source geotiff file doesn't have the 
information necessary to convert correctly, perhaps.

Again, thanks for your help.  Hopefully I'll have the URL soon.

Scott

Frank Warmerdam wrote:
> Scott Lewis wrote:
>> Frank,
>>
>> Thanks for the help.  I tried doing this, and ended up with the same 
>> image (even diff found them to be the same).  Here are the various 
>> commands I tried.  Maybe I'm just using the -wo option wrong.
>>
>> gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 input.gtiff.tif 
>> output1.gtiff.tif
>> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000" input.gtiff.tif 
>> output2.gtiff.tif
>> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000 SAMPLE_GRID=YES 
>> SAMPLE_STEP=100" input.gtiff.tif output3.gtiff.tif
>>
>> I'll continue to play with those options, though.  gdalwarp seems to 
>> not act any different (IE, it takes the same amount of time to 
>> process) with or without the -wo option, so I'm thinking I'm just not 
>> using the option correctly somehow.
>>
>> Again, I appreciate your help!
>
> Scott,
>
> I suspect I've misconstrued what is going wrong.  If you can stage
> the input file somewhere, and if it isn't too terribly huge, I would
> be interested in trying it myself.  Ideally this could be filed as a
> Trac ticket.
>
> Best regards,
From scott.lewis at nsidc.org  Tue Dec  9 18:33:13 2008
From: scott.lewis at nsidc.org (Scott Lewis)
Date: Tue Dec  9 18:33:14 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493EFADC.7090202@nsidc.org>
References: <493E9D1A.8010002@nsidc.org>
	<493EA5E7.9040405@pobox.com>	<493EB03F.9000103@nsidc.org>
	<493EC21F.6080906@pobox.com> <493EFADC.7090202@nsidc.org>
Message-ID: <493F0039.5030901@nsidc.org>

Frank,

The image I've been trying to convert is at this URL.  It's about 6MB, 
hopefully that's not too big.

ftp://sidads.colorado.edu/pub/incoming/glewis/polar.gtiff.tif

Basically, I'm trying to convert it to a plain-old EPGS:4326 (latlong 
projection).

I appreciate you taking a look.

Scott

PS - I'm still new to the GDAL list; when you say file a Trac ticket, 
where would I do this?

Scott Lewis wrote:
> I've been having problems getting it staged.  As soon as I'm able to 
> I'll send the URL.  Maybe the source geotiff file doesn't have the 
> information necessary to convert correctly, perhaps.
>
> Again, thanks for your help.  Hopefully I'll have the URL soon.
>
> Scott
>
> Frank Warmerdam wrote:
>> Scott Lewis wrote:
>>> Frank,
>>>
>>> Thanks for the help.  I tried doing this, and ended up with the same 
>>> image (even diff found them to be the same).  Here are the various 
>>> commands I tried.  Maybe I'm just using the -wo option wrong.
>>>
>>> gdalwarp -t_srs EPSG:4326 -wo SOURCE_EXTRA=1000 input.gtiff.tif 
>>> output1.gtiff.tif
>>> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000" input.gtiff.tif 
>>> output2.gtiff.tif
>>> gdalwarp -t_srs EPSG:4326 -wo "SOURCE_EXTRA=1000 SAMPLE_GRID=YES 
>>> SAMPLE_STEP=100" input.gtiff.tif output3.gtiff.tif
>>>
>>> I'll continue to play with those options, though.  gdalwarp seems to 
>>> not act any different (IE, it takes the same amount of time to 
>>> process) with or without the -wo option, so I'm thinking I'm just 
>>> not using the option correctly somehow.
>>>
>>> Again, I appreciate your help!
>>
>> Scott,
>>
>> I suspect I've misconstrued what is going wrong.  If you can stage
>> the input file somewhere, and if it isn't too terribly huge, I would
>> be interested in trying it myself.  Ideally this could be filed as a
>> Trac ticket.
>>
>> Best regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From randre at gmail.com  Tue Dec  9 20:17:56 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Dec  9 20:17:58 2008
Subject: [gdal-dev] Working between GeoTIFF's and Arc/Info ASCII Grid
	formats with NAN values
Message-ID: <9c2015090812091717u70651d6dx58e1c30d36dbaf59@mail.gmail.com>

Hi All,

Just had an email from a client complaining about the "nan" values that I
included in some Arc/Info ASCII Grid files that I sent them.  The files were
created by converting GeoTIFF's into ASCII Grid format via gdal_translate.
I personally like that the "nan's" were carried through, but I would like to
know if there is a way that I can map the "nan" into a "-9999" value via the
gdal utilities?

Thanks,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/c749cb24/attachment.html
From warmerdam at pobox.com  Tue Dec  9 20:24:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 20:25:06 2008
Subject: [gdal-dev] Working between GeoTIFF's and Arc/Info ASCII Grid
	formats with NAN values
In-Reply-To: <9c2015090812091717u70651d6dx58e1c30d36dbaf59@mail.gmail.com>
References: <9c2015090812091717u70651d6dx58e1c30d36dbaf59@mail.gmail.com>
Message-ID: <493F1A66.1010600@pobox.com>

Roger Andr? wrote:
> Hi All,
> 
> Just had an email from a client complaining about the "nan" values that 
> I included in some Arc/Info ASCII Grid files that I sent them.  The 
> files were created by converting GeoTIFF's into ASCII Grid format via 
> gdal_translate.  I personally like that the "nan's" were carried 
> through, but I would like to know if there is a way that I can map the 
> "nan" into a "-9999" value via the gdal utilities?

Roger,

I'm not aware of a way to convert NaN values to an actual value with the
GDAL command line utilities.  You could accomplish this with a program,
or a python script.  You could also potentially do it with by ascii
search and replace in the resulting grid file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Tue Dec  9 20:34:36 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Dec  9 20:34:38 2008
Subject: [gdal-dev] Working between GeoTIFF's and Arc/Info ASCII Grid
	formats with NAN values
In-Reply-To: <493F1A66.1010600@pobox.com>
References: <9c2015090812091717u70651d6dx58e1c30d36dbaf59@mail.gmail.com>
	<493F1A66.1010600@pobox.com>
Message-ID: <9c2015090812091734s7a8bc97am4867107be9b15f17@mail.gmail.com>

ROTFL  "You could also potentially do it with by ascii search and replace in
the resulting grid file"

You are SO right!  I had totally forgotten that this was ASCII output.  Doh!

Thanks Frank.
--



On Tue, Dec 9, 2008 at 5:24 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Roger Andr? wrote:
>
>> Hi All,
>>
>> Just had an email from a client complaining about the "nan" values that I
>> included in some Arc/Info ASCII Grid files that I sent them.  The files were
>> created by converting GeoTIFF's into ASCII Grid format via gdal_translate.
>>  I personally like that the "nan's" were carried through, but I would like
>> to know if there is a way that I can map the "nan" into a "-9999" value via
>> the gdal utilities?
>>
>
> Roger,
>
> I'm not aware of a way to convert NaN values to an actual value with the
> GDAL command line utilities.  You could accomplish this with a program,
> or a python script.  You could also potentially do it with by ascii
> search and replace in the resulting grid file.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081209/2770cd48/attachment.html
From jluis at ualg.pt  Tue Dec  9 21:13:45 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Dec  9 21:13:51 2008
Subject: [gdal-dev] Memory fragmentation and memory consumption
	when	warping with GCPs
In-Reply-To: <493EA23D.3040302@ualg.pt>
References: <493E8670.2090006@ualg.pt>
	<493E8F51.8080406@pobox.com>	<493E99BD.5020507@ualg.pt>
	<493E9B42.8010004@pobox.com> <493EA23D.3040302@ualg.pt>
Message-ID: <493F25D9.7040205@ualg.pt>


> 
>> Does this aspect really have anything to do with the number of GCPs?
>> Are you using the GDAL warp algorithm?
> 
> Oh yes, with 2500 GCPs I can do the warping. And yes I'm using the
> GDAL warp algorithm (the mex is more or less a copy of gdaltransform)


Sorry for being so dumb. The GCP warping memory problem was due to a
stupid error of over allocation - nGCPCount*nGCPCount instead of the needed nGCPCount
It works fine now.

But the memory fragmentation issue is another story, and that still remains.


Joaquim Luis

From warmerdam at pobox.com  Tue Dec  9 21:41:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  9 21:41:40 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493F0039.5030901@nsidc.org>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
	<493EB03F.9000103@nsidc.org> <493EC21F.6080906@pobox.com>
	<493EFADC.7090202@nsidc.org> <493F0039.5030901@nsidc.org>
Message-ID: <493F2C55.6010102@pobox.com>

Scott Lewis wrote:
> Frank,
> 
> The image I've been trying to convert is at this URL.  It's about 6MB, 
> hopefully that's not too big.
> 
> ftp://sidads.colorado.edu/pub/incoming/glewis/polar.gtiff.tif
> 
> Basically, I'm trying to convert it to a plain-old EPGS:4326 (latlong 
> projection).
> 
> I appreciate you taking a look.

Scott,

I have established the problem is the logic that computes the desired
extent of the output file.  It walks the edges of the input file,
transforming to WGS84 and ends up with incomplete extents because there
is no recognition that there is a topological discontinuity in the
transformation (the pole issue).

Normally my advice would be to use the SAMPLE_GRID=YES warp option to
force internal sampling of the region when computing the bounds, but
I have discovered that only applies to deciding what source region
to read during warping - not to the computation of the original warp
region.

So, in the meantime you can just force selection of output extents.
Something like:

gdalwarp -t_srs EPSG:4326 polar.gtiff.tif out.tif -te -180 28 180 90

When I have the ticket in hand, I'll plan to modify the
GDALSuggestedWarpOutput() function to allow forcing of internal gridding.
It would also be nice if I could automatically recognise this sort of
case to trigger it automatically, but I'm not sure how to do that
without quite a bit of extra work.

> PS - I'm still new to the GDAL list; when you say file a Trac ticket, 
> where would I do this?

Visit:

  http://trac.osgeo.org/gdal

There should be brief instructions on getting an OSGeo Userid which you
can use to login to the site, and then hit "New Ticket" to file a bug
report.  If you find this path isn't deducable from the main GDAL web
page, please email me suggestions on how to improve things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gaffigan at sfos.uaf.edu  Wed Dec 10 00:37:35 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Wed Dec 10 01:05:42 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
Message-ID: <50980.206.174.27.241.1228887455.squirrel@ssl.sfos.uaf.edu>

> I have established the problem is the logic that computes the desired
> extent of the output file.  It walks the edges of the input file,
> transforming to WGS84 and ends up with incomplete extents because there
> is no recognition that there is a topological discontinuity in the
> transformation (the pole issue).

Frank,

I wonder if a solution to this problem of detecting the vertical
discontinuity is solved using the following logic:

"Walk the edges of the the input file, reprojecting to get the extents for
the output, as usual.  Then repeat the process along the edges of an
interior rectangle.  If the output extent corresponding to the interior
source rectangle has a more extreme northing extent than that from the
original rectangle, then extend the output extent to the
southernmost/northernmost extreme and the entire easting extent."

I make extensive use of the below patch to Mapserver, which is based on
this logic, and which works well for combinations of source and
destination projections in geographic, Albers, polar stereographic, and
equidistant cylindrical.

http://trac.osgeo.org/mapserver/ticket/2765

If there are limitations/errors in this assumption which are obvious to
you on anyone on the list, I'd appreciate your expertise on the issue.

Steve Gaffigan


From Tom.Kralidis at ec.gc.ca  Wed Dec 10 07:54:04 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Wed Dec 10 07:54:06 2008
Subject: [gdal-dev] python build error on svn trunk
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA828@dowexch2.ontario.int.ec.gc.ca>


On make install (OS = fc10):

$./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no --with-pg=/usr/bin/pg_config
--with-mysql=/usr/bin/mysql_config -
-with-sqlite --with-curl=/usr/bin/curl-config --with-python --with-expat


....

$ make

...

$ make install

...

/bin/sh /home/tkralidi/foss4g/gdal/trunk/gdal/libtool --mode=install
/home/tkralidi/foss4g/gdal/trunk/gdal/install-sh -c gdal-config-inst
/usr/local/bin/gdal-config
libtool: install: /home/tkralidi/foss4g/gdal/trunk/gdal/install-sh -c
gdal-config-inst /usr/local/bin/gdal-config
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/apps'
(cd swig; make install)
make[1]: Entering directory `/home/tkralidi/foss4g/gdal/trunk/gdal/swig'
for dir in python ; do (cd $dir; make install) || exit; done
make[2]: Entering directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/swig/python'
python setup.py install 
running install
running bdist_egg
running egg_info
creating GDAL.egg-info
writing GDAL.egg-info/PKG-INFO
writing top-level names to GDAL.egg-info/top_level.txt
writing dependency_links to GDAL.egg-info/dependency_links.txt
writing manifest file 'GDAL.egg-info/SOURCES.txt'
Traceback (most recent call last):
  File "setup.py", line 239, in <module>
    ext_modules = ext_modules )
  File "/usr/lib/python2.5/distutils/core.py", line 151, in setup
    dist.run_commands()
  File "/usr/lib/python2.5/distutils/dist.py", line 974, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.5/site-packages/setuptools/command/install.py",
line 76, in run
    self.do_egg_install()
  File "/usr/lib/python2.5/site-packages/setuptools/command/install.py",
line 96, in do_egg_install
    self.run_command('bdist_egg')
  File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File
"/usr/lib/python2.5/site-packages/setuptools/command/bdist_egg.py", line
167, in run
    self.run_command("egg_info")
  File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File
"/usr/lib/python2.5/site-packages/setuptools/command/egg_info.py", line
171, in run
    self.find_sources()
  File
"/usr/lib/python2.5/site-packages/setuptools/command/egg_info.py", line
252, in find_sources
    mm.run()
  File
"/usr/lib/python2.5/site-packages/setuptools/command/egg_info.py", line
306, in run
    self.add_defaults()
  File
"/usr/lib/python2.5/site-packages/setuptools/command/egg_info.py", line
333, in add_defaults
    rcfiles = list(walk_revctrl())
  File "/usr/lib/python2.5/site-packages/setuptools/command/sdist.py",
line 45, in walk_revctrl
    for item in ep.load()(dirname):
  File "/usr/lib/python2.5/site-packages/setuptools/command/sdist.py",
line 52, in _default_revctrl
    for path in finder(dirname,path):
  File "/usr/lib/python2.5/site-packages/setuptools/command/sdist.py",
line 98, in entries_finder
    log.warn("unrecognized .svn/entries format in %s", dirname)
NameError: global name 'log' is not defined
make[2]: *** [install] Error 1
make[2]: Leaving directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/swig/python'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/swig'
make: *** [install-actions] Error 2


From bea at ixsea.com  Wed Dec 10 08:02:15 2008
From: bea at ixsea.com (=?iso-8859-1?Q?Beno=EEt_Andrieu?=)
Date: Wed Dec 10 08:02:22 2008
Subject: [gdal-dev] Overview building broken
Message-ID: <375382FAC6AC47AB81F0B8BA4BE473BB@ixsea.local>

Hi all !

I am using FWTools 2.2.6 and have some problems with the overview 
building...
I just tried the 2.2.8 release, same result !

My software tries to build a x level overview pyramid on a GTiff.
I am using the following code :

CPLErr statut_generation_pyramidage = 
gdal_dataset_copie->BuildOverviews("average", nb_pyramidage, anOverviewList, 
0, NULL, NULL, NULL);

The function is returning CE_Failure and the console has a lot of messages 
which appears on the call of the BuildOverviews' method.

ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "Compression" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "ImageWidth" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "PlanarConfiguration" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "BitsPerSample" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "SamplesPerPixel" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "Compression" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "PhotometricInterpretation" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "SampleFormat" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "TileWidth" while writing
ERROR 1: TIFFSetField:f:\test_isdas\PIC_CONT_SS_F_4_8bit.TIF: Cannot modify 
tag "TileLength" while writing
ERROR 1: GTIFFWriteDirectory:Can not write tiles to a stripped image

The complete call sequence is (without some instanciations) :

  GDALDataset* gdal_dataset_copie = poDriver->CreateCopy(string_fileOut, 
gdal_dataset, TRUE, options_, NULL, NULL);
  char **options = 0;
  GDALDriver *gdal_driver = GetGDALDriverManager()->GetDriverByName("MEM");
  GDALDataset* gdal_dataset = gdal_driver->Create("", image->Get_Largeur(), 
image->Get_Hauteur(), nbCanaux, depth, options);
  gdal_dataset->FlushCache();
  gdal_dataset->GetRasterBand(1)->SetColorInterpretation(GCI_GrayIndex);
  //
  // Filling the dataset with data
  //
  gdal_dataset->FlushCache();
  GDALDriver *poDriver = GetGDALDriverManager()->GetDriverByName("GTIFF");
  char **options_ = 0;
  options_ = CSLSetNameValue( options, "INTERLEAVE", "PIXEL" );
  gdal_dataset->SetProjection( string_WKT );
  gdal_dataset->SetGeoTransform( m_P_D_TFW );
  GDALDataset* gdal_dataset_copie = poDriver->CreateCopy(string_fileOut,
gdal_dataset, TRUE, options_, NULL, NULL);
  gdal_dataset_copie->FlushCache();
  CPLErr statut_generation_pyramidage = 
gdal_dataset_copie->BuildOverviews("average", nb_pyramidage, anOverviewList, 
0, NULL, NULL, NULL);
  gdal_dataset_copie->GetRasterBand(index_band)->SetColorInterpretation(poBand->GetColorInterpretation());
  gdal_dataset_copie->FlushCache();
  delete gdal_dataset_copie;
  delete gdal_dataset;

This code was working with FWTools 1.3.2. I don't know what to do now... I 
don't want to close the dataset, reopen it, build overview, close the 
dataset because of the loss of performance (which is really important).

Any idea ?

Thanks in advance !

Best regards,

Beno?t Andrieu
+33.(0)1.30.08.95.21
bea@ixsea.com

From yjacolin at free.fr  Wed Dec 10 08:59:22 2008
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Dec 10 09:08:44 2008
Subject: [gdal-dev] Python documentation API
Message-ID: <200812101459.23074.yjacolin@free.fr>

Hello,

Some persons from OSGeo-fr began to work on a (french) python documentation. I 
created an API documentation using doxygen available here [1].

If some of you are interesting to work with us (take care that some of us are 
not python nor gdal-ogr guru) you can join us in this effort and we will work 
on an english documentation. Just contact me.

I hope the Python API documentation will help you ;) This is a first and quick 
test about this, but I have no way to automatize this and will be happy to 
find it in the GDAL-OGR website :)

thanks,

Y.
[1] http://wiki.gloobe.org/gdal/index.html
-- 
Yves Jacolin
---
http://softlibre.gloobe.org
From hobu.inc at gmail.com  Wed Dec 10 10:56:17 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Dec 10 10:56:22 2008
Subject: [gdal-dev] python build error on svn trunk
In-Reply-To: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA828@dowexch2.ontario.int.ec.gc.ca>
References: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA828@dowexch2.ontario.int.ec.gc.ca>
Message-ID: <9604CC1B-C6BA-4539-94E3-532D2BE00007@gmail.com>


On Dec 10, 2008, at 6:54 AM, Kralidis,Tom [Ontario] wrote:
>
>  File "/usr/lib/python2.5/site-packages/setuptools/command/sdist.py",
> line 98, in entries_finder
>    log.warn("unrecognized .svn/entries format in %s", dirname)
> NameError: global name 'log' is not defined

Tom,

I think your setuptools is out of date or has a bug in it. Try running http://peak.telecommunity.com/dist/ez_setup.py 
  as root and then attempting again.

Hope this helps,

Howard
From warmerdam at pobox.com  Wed Dec 10 11:06:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 10 11:06:17 2008
Subject: [gdal-dev] Motion: Promote RC4 as official 1.6.0 Release
In-Reply-To: <553BDD9A-B60C-4393-BA9D-9F33372EE174@gmail.com>
References: <931f8ea90812060512g77f27faanba91f57cabe6b0cf@mail.gmail.com>
	<20081209185530.GB8980@ak4719.spb.edu>
	<553BDD9A-B60C-4393-BA9D-9F33372EE174@gmail.com>
Message-ID: <493FE8E8.8060206@pobox.com>


>> On Sat, Dec 06, 2008 at 08:12:15AM -0500, Frank Warmerdam wrote:
>>> Motion: That the GDAL 1.6.0 RC4 release candidate be promoted to 
>>> being our official 1.6.0 release.

Folks,

I declare this motion passed with support from DanielM, EvenR, AndreyK,
HowardB, TamasS and FrankW.

I have updated the download site and will issue a public announcement in
various relevant locations.

Good work team!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Tom.Kralidis at ec.gc.ca  Wed Dec 10 11:26:27 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Wed Dec 10 11:26:30 2008
Subject: [gdal-dev] python build error on svn trunk
In-Reply-To: <9604CC1B-C6BA-4539-94E3-532D2BE00007@gmail.com>
References: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA828@dowexch2.ontario.int.ec.gc.ca>
	<9604CC1B-C6BA-4539-94E3-532D2BE00007@gmail.com>
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A6180DA82F@dowexch2.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: Howard Butler [mailto:hobu.inc@gmail.com] 
> Sent: Wednesday, 10 December 2008 10:56
> To: Kralidis,Tom [Ontario]
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] python build error on svn trunk
> 
> 
> On Dec 10, 2008, at 6:54 AM, Kralidis,Tom [Ontario] wrote:
> >
> >  File 
> "/usr/lib/python2.5/site-packages/setuptools/command/sdist.py",
> > line 98, in entries_finder
> >    log.warn("unrecognized .svn/entries format in %s", dirname)
> > NameError: global name 'log' is not defined
> 
> Tom,
> 
> I think your setuptools is out of date or has a bug in it. 
> Try running http://peak.telecommunity.com/dist/ez_setup.py
>   as root and then attempting again.
> 

Worked.  Thx hobu

..Tom
From scott.lewis at nsidc.org  Wed Dec 10 11:27:04 2008
From: scott.lewis at nsidc.org (Scott Lewis)
Date: Wed Dec 10 11:27:07 2008
Subject: [gdal-dev] gdalwarp cutting off projected image
In-Reply-To: <493F2C55.6010102@pobox.com>
References: <493E9D1A.8010002@nsidc.org> <493EA5E7.9040405@pobox.com>
	<493EB03F.9000103@nsidc.org> <493EC21F.6080906@pobox.com>
	<493EFADC.7090202@nsidc.org> <493F0039.5030901@nsidc.org>
	<493F2C55.6010102@pobox.com>
Message-ID: <493FEDD8.3020109@nsidc.org>

Frank Warmerdam wrote:
> Scott Lewis wrote:
>> Frank,
>>
>> The image I've been trying to convert is at this URL.  It's about 
>> 6MB, hopefully that's not too big.
>>
>> ftp://sidads.colorado.edu/pub/incoming/glewis/polar.gtiff.tif
>>
>> Basically, I'm trying to convert it to a plain-old EPGS:4326 (latlong 
>> projection).
>>
>> I appreciate you taking a look.
>
> Scott,
>
> I have established the problem is the logic that computes the desired
> extent of the output file.  It walks the edges of the input file,
> transforming to WGS84 and ends up with incomplete extents because there
> is no recognition that there is a topological discontinuity in the
> transformation (the pole issue).
>
> Normally my advice would be to use the SAMPLE_GRID=YES warp option to
> force internal sampling of the region when computing the bounds, but
> I have discovered that only applies to deciding what source region
> to read during warping - not to the computation of the original warp
> region.
>
> So, in the meantime you can just force selection of output extents.
> Something like:
>
> gdalwarp -t_srs EPSG:4326 polar.gtiff.tif out.tif -te -180 28 180 90
>
> When I have the ticket in hand, I'll plan to modify the
> GDALSuggestedWarpOutput() function to allow forcing of internal gridding.
> It would also be nice if I could automatically recognise this sort of
> case to trigger it automatically, but I'm not sure how to do that
> without quite a bit of extra work.
>
>> PS - I'm still new to the GDAL list; when you say file a Trac ticket, 
>> where would I do this?
>
> Visit:
>
>  http://trac.osgeo.org/gdal
>
> There should be brief instructions on getting an OSGeo Userid which you
> can use to login to the site, and then hit "New Ticket" to file a bug
> report.  If you find this path isn't deducable from the main GDAL web
> page, please email me suggestions on how to improve things.
>
> Best regards,
Frank,

Thanks a lot for your help, that gdalwarp string worked great.  I'll 
submit a ticket today as well!

Scott
From warmerdam at pobox.com  Wed Dec 10 12:42:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 10 12:42:42 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Released
Message-ID: <493FFF77.7090508@pobox.com>

The GDAL/OGR project team is pleased to announce the release of
GDAL/OGR 1.6.0.  This release represents 11 months of new feature
development since the GDAL/OGR 1.5.0 release, as well as many bug
fixes.  The release source code is available as described at:

   http://trac.osgeo.org/gdal/wiki/DownloadSource

The new release includes the following feature highlights, with detailed
information on changes at:

   http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

New Raster Drivers:
  * BLX Magellan Topo Driver (New)
  * EIR Erdas Imagine Raw Driver (New)
  * Oracle GeoRaster Driver (New)
  * GRIB Driver (now part of standard distribution)
  * LCP (FARSITE) Driver (New)
  * Terralib driver (New)

New Vector Drivers:
  * Geoconcept Export Driver (New)
  * INGRES RDBMS Driver (New)
  * XPlane/Flightgear Driver (New)

General:
  * RFC 20: Preliminary support for alternate axis orientations in SRS.
  * On the fly access to data in .zip and .gz compressed files.
  * RFC 22: Support for reading from, and warping with RPC (Rational Polynomial
    Coefficients) from various formats.
  * Gaussian and Mode resampling added for overview generation.
  * Added raster to vector (polygon) conversion utility.
  * Added raster proximity utility.
  * Added raster sieve filtering utility.
  * Added -expand rgb/rgba ability to gdal_translate
  * Added cutline / blend support to gdalwarp.
  * Added -segmentize option to ogr2ogr to break long line segments.
  * RFC 23: Preliminary support for character set transcoding (in OGR for now).
  * RFC 21: OGR SQL supports type casting and field name aliasing

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Wed Dec 10 13:36:00 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Wed Dec 10 13:36:02 2008
Subject: [gdal-dev] Intructions to build GDAL for Java
Message-ID: <20081210183600.16717.qmail@s466.sureserver.com>

Hi there,

I build the Java wrapper a couple of days ago following the instructions on [1] but now I need to help someone to 
build for Windows based on [2] but it looks like there was some changes that are not reflected on neither one of 
those instructions. For example, there is no more java.opt on the trunk [3].

I tried to run "nmake -f makefile.vc java" on "\swig" anyway but it fails and I don't want to expend much time 
debugging since the instructions are outdated.

Does anybody have an idea if there are new instructions for building the Java wrapper or if it's coming up shortly?

[1] http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
[2] http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructions
[3] http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java

Regards,

Ivan

From jason.roberts at duke.edu  Wed Dec 10 18:50:56 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Dec 10 18:51:00 2008
Subject: [gdal-dev] Python bindings for 1.6.0
Message-ID: <001e01c95b22$25e637b0$71b2a710$@roberts@duke.edu>

First of all, many thanks and congratulations to the GDAL team for getting
the 1.6.0 release out the door. A special thanks to those of you who fixed
the OGR bugs I opened recently.

 

I am eager to try out the final release Python bindings for win32 for Python
2.4, 2.5, and 2.6. Do you know when these might be released? Currently, they
are available through pypi.python.org and easy_install for GDAL 1.5.2. Will
you be updating pypi with 1.6.0 anytime soon? Or is there a better way to
obtain them?

 

I would like to avoid building them myself, if possible. I know I can get
them from one of the GDAL build servers, but it appeared that the server
only built them for Python 2.5. I need them for both Python 2.4 and 2.5,
and, soon, Python 2.6.

 

Thanks,

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081210/1c3c77c3/attachment.html
From ASP at blominfo.dk  Thu Dec 11 06:01:26 2008
From: ASP at blominfo.dk (Asger Sigurd Skovbo Petersen)
Date: Thu Dec 11 06:02:28 2008
Subject: [gdal-dev] Force output color interpretation
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A8D71F9@posthus.blominfo.dk>

Hi all,

 

I'm having problems with the color interpretation of the output from
GDAL utilities. I have some 4 band (Red, Green, Blue, Near infrared)
rasters. The fourth band is interpreted as "Undefined" by GDAL, but GDAL
insists on marking the fourth band as ALPHA in the output. Having the
fourth band marked as ALPHA causes a bunch of problems with other
software, so I would really like the GDAL tools to leave it as
"Undefined". Is this possible?

 

Please find a simple example below where gdal_translate marks fourth
band as ALPHA.

 

Best regards

Asger

 

Example:

c:\>gdalinfo --version

GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22

c:\>gdalinfo 2km.tif

Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; tag
ignored

Driver: GTiff/GeoTIFF

Files: 2km.tif

Size is 10000, 10000

Coordinate System is `'

Origin = (580000.000000000000000,6330000.000000000000000)

Pixel Size = (0.200000000000000,-0.200000000000000)

Metadata:

  TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows

  TIFFTAG_DATETIME=2008:12:09 17:27:10

  TIFFTAG_XRESOLUTION=72

  TIFFTAG_YRESOLUTION=72

  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

Image Structure Metadata:

  INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  (  580000.000, 6330000.000)

Lower Left  (  580000.000, 6328000.000)

Upper Right (  582000.000, 6330000.000)

Lower Right (  582000.000, 6328000.000)

Center      (  581000.000, 6329000.000)

Band 1 Block=10000x1 Type=Byte, ColorInterp=Red

Band 2 Block=10000x1 Type=Byte, ColorInterp=Green

Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

Band 4 Block=10000x1 Type=Byte, ColorInterp=Undefined

 

c:\>gdal_translate 2km.tif out.tif

Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; tag
ignored

Input file size is 10000, 10000

0...10...20...30...40...50...60...70...80...90...100 - done.

 

c:\>gdalinfo out.tif

Driver: GTiff/GeoTIFF

Files: out.tif

Size is 10000, 10000

Coordinate System is `'

Origin = (580000.000000000000000,6330000.000000000000000)

Pixel Size = (0.200000000000000,-0.200000000000000)

Metadata:

  TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows

  TIFFTAG_DATETIME=2008:12:09 17:27:10

  TIFFTAG_XRESOLUTION=72

  TIFFTAG_YRESOLUTION=72

  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

Image Structure Metadata:

  INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  (  580000.000, 6330000.000)

Lower Left  (  580000.000, 6328000.000)

Upper Right (  582000.000, 6330000.000)

Lower Right (  582000.000, 6328000.000)

Center      (  581000.000, 6329000.000)

Band 1 Block=10000x1 Type=Byte, ColorInterp=Red

  Mask Flags: PER_DATASET ALPHA

Band 2 Block=10000x1 Type=Byte, ColorInterp=Green

  Mask Flags: PER_DATASET ALPHA

Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

  Mask Flags: PER_DATASET ALPHA

Band 4 Block=10000x1 Type=Byte, ColorInterp=Alpha

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/1c91235d/attachment.html
From jasonbeverage at gmail.com  Thu Dec 11 10:35:27 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Thu Dec 11 10:35:30 2008
Subject: [gdal-dev] TMS BoundingBox/Origin coordinates always in lat/lon
	using gdal2tiles.py?
Message-ID: <2c4bbbeb0812110735r12747762q409685cce4f3c352@mail.gmail.com>

Hi all,

I've been playing around with gdal2tiles in the OSG4W distribution and
noticed that the BoundingBox and Origin elements of the generated
tilemapresource.xml file that is generated always seems to be in lat/lon
coordinates, even when the output map is in Mercator.  Other TMS resources
I've seen keep the coordinates in meters if its mercator and lat/lon if it
is geodetic.

Is this a "bug" or a "feature"?:)

Thanks!

Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/c786f2b9/attachment-0001.html
From dany.geotools at gmail.com  Thu Dec 11 11:52:32 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Thu Dec 11 12:01:59 2008
Subject: [gdal-dev] Intructions to build GDAL for Java
In-Reply-To: <20081210183600.16717.qmail@s466.sureserver.com>
References: <20081210183600.16717.qmail@s466.sureserver.com>
Message-ID: <7221db410812110852i251f34a1s7751a71d01c30cd1@mail.gmail.com>

Hi,

On Wed, Dec 10, 2008 at 7:36 PM, Lucena, Ivan <ivan.lucena@pmldnet.com>wrote:

> Hi there,
>
> I build the Java wrapper a couple of days ago following the instructions on
> [1] but now I need to help someone to
> build for Windows based on [2] but it looks like there was some changes
> that are not reflected on neither one of
> those instructions. For example, there is no more java.opt on the trunk
> [3].


I guess some definitions previously contained on java.opt have been actually
moved on NMAKE.opt in the main gdal folder.


>
>
> I tried to run "nmake -f makefile.vc java" on "\swig" anyway but it fails
> and I don't want to expend much time
> debugging since the instructions are outdated.


Can you give me some more detail on the error you have encountered?
Is this error somehow related to ColorTable objects?

In case you can give me the output of your command I can try giving you
better help.

Cheers,
Daniele



>
>
> Does anybody have an idea if there are new instructions for building the
> Java wrapper or if it's coming up shortly?
>
> [1] http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
> [2] http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructions
> [3] http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java
>
> Regards,
>
> Ivan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/110a5daf/attachment.html
From jasonbeverage at gmail.com  Thu Dec 11 12:24:49 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Thu Dec 11 12:33:05 2008
Subject: [gdal-dev] Re: TMS BoundingBox/Origin coordinates always in lat/lon
	using gdal2tiles.py?
In-Reply-To: <2c4bbbeb0812110735r12747762q409685cce4f3c352@mail.gmail.com>
References: <2c4bbbeb0812110735r12747762q409685cce4f3c352@mail.gmail.com>
Message-ID: <2c4bbbeb0812110924s1e79931n76cc1a4b65058b7b@mail.gmail.com>

I also just noticed that the lat and lon are reversed for the Origin and
BoundingBox.  x should correspond to longitude and y should correspond to
latitude, but they are switched.

Thanks!

Jason

On Thu, Dec 11, 2008 at 10:35 AM, Jason Beverage <jasonbeverage@gmail.com>wrote:

> Hi all,
>
> I've been playing around with gdal2tiles in the OSG4W distribution and
> noticed that the BoundingBox and Origin elements of the generated
> tilemapresource.xml file that is generated always seems to be in lat/lon
> coordinates, even when the output map is in Mercator.  Other TMS resources
> I've seen keep the coordinates in meters if its mercator and lat/lon if it
> is geodetic.
>
> Is this a "bug" or a "feature"?:)
>
> Thanks!
>
> Jason
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/c98a2322/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Thu Dec 11 13:11:41 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Dec 11 13:10:13 2008
Subject: [gdal-dev] gdal 1.6 on Windows XP build error (tif_ojpeg.c)
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I used MS VC++ 6.0 to build gdal. Here is the error for file: 
C:\build19\gdal-1.6.0\frmts\gtiff\libtiff\tif_ojpeg.c

tif_ojpeg.c(599) : error C2632: 'long' followed by 'long' is illegal
tif_ojpeg.c(601) : error C2632: 'long' followed by 'long' is illegal
tif_ojpeg.c(606) : error C2632: 'long' followed by 'long' is illegal
tif_ojpeg.c(613) : error C2632: 'long' followed by 'long' is illegal
tif_ojpeg.c(620) : error C2632: 'long' followed by 'long' is illegal

Should I change "unsigned long long" to "unsigned long" ?

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/cb8780d7/attachment.html
From warmerdam at pobox.com  Thu Dec 11 14:05:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 11 14:05:48 2008
Subject: [gdal-dev] gdal 1.6 on Windows XP build error (tif_ojpeg.c)
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4941647C.8000708@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I used MS VC++ 6.0 to build gdal. Here is the error for file:
> 
> C:\build19\gdal-1.6.0\frmts\gtiff\libtiff\tif_ojpeg.c
> 
> tif_ojpeg.c(599) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(601) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(606) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(613) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(620) : error C2632: 'long' followed by 'long' is illegal
> 
> Should I change ?unsigned long long? to ?unsigned long? ?

Shawn,

I think vc6 uses __int64 instead of long long.

You might want to file a ticket against libtiff about this though VC6
compatability is less and less a priority for me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Thu Dec 11 14:12:58 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Dec 11 14:11:30 2008
Subject: [gdal-dev] gdal 1.6 on Windows XP build error (tif_ojpeg.c)
In-Reply-To: <4941647C.8000708@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4941647C.8000708@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120311@ottawaex02.Ottawa.drdc-rddc.gc.ca>

thanks Frank.
I will give vc6 one more try, then migrate to VC 2005.

Shawn



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Thursday, December 11, 2008 2:06 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.6 on Windows XP build error (tif_ojpeg.c)

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I used MS VC++ 6.0 to build gdal. Here is the error for file:
> 
> C:\build19\gdal-1.6.0\frmts\gtiff\libtiff\tif_ojpeg.c
> 
> tif_ojpeg.c(599) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(601) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(606) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(613) : error C2632: 'long' followed by 'long' is illegal
> 
> tif_ojpeg.c(620) : error C2632: 'long' followed by 'long' is illegal
> 
> Should I change "unsigned long long" to "unsigned long" ?

Shawn,

I think vc6 uses __int64 instead of long long.

You might want to file a ticket against libtiff about this though VC6
compatability is less and less a priority for me.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Dec 11 14:23:05 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 11 14:23:11 2008
Subject: [gdal-dev] Force output color interpretation
In-Reply-To: <25BE68A4D83DD4438F701DF0311F3F4A8D71F9@posthus.blominfo.dk>
References: <25BE68A4D83DD4438F701DF0311F3F4A8D71F9@posthus.blominfo.dk>
Message-ID: <200812112023.06525.even.rouault@mines-paris.org>

Asger

it appears that when translating to GeoTIFF and that the photometric 
interpretation creation option is not set, the GeoTIFF driver will try to 
make a best guess and write the interpretation as RGBA.

You can achieve what you want by specifying the photometric interpretation 
creation option with :

gdal_translate 2km.tif out.tif -co PHOTOMETRIC=RGB

Best regards,
Even

Le Thursday 11 December 2008 12:01:26 Asger Sigurd Skovbo Petersen, vous avez 
?crit?:
> Hi all,
>
>
>
> I'm having problems with the color interpretation of the output from
> GDAL utilities. I have some 4 band (Red, Green, Blue, Near infrared)
> rasters. The fourth band is interpreted as "Undefined" by GDAL, but GDAL
> insists on marking the fourth band as ALPHA in the output. Having the
> fourth band marked as ALPHA causes a bunch of problems with other
> software, so I would really like the GDAL tools to leave it as
> "Undefined". Is this possible?
>
>
>
> Please find a simple example below where gdal_translate marks fourth
> band as ALPHA.
>
>
>
> Best regards
>
> Asger
>
>
>
> Example:
>
> c:\>gdalinfo --version
>
> GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22
>
> c:\>gdalinfo 2km.tif
>
> Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; tag
> ignored
>
> Driver: GTiff/GeoTIFF
>
> Files: 2km.tif
>
> Size is 10000, 10000
>
> Coordinate System is `'
>
> Origin = (580000.000000000000000,6330000.000000000000000)
>
> Pixel Size = (0.200000000000000,-0.200000000000000)
>
> Metadata:
>
>   TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows
>
>   TIFFTAG_DATETIME=2008:12:09 17:27:10
>
>   TIFFTAG_XRESOLUTION=72
>
>   TIFFTAG_YRESOLUTION=72
>
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>
> Image Structure Metadata:
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (  580000.000, 6330000.000)
>
> Lower Left  (  580000.000, 6328000.000)
>
> Upper Right (  582000.000, 6330000.000)
>
> Lower Right (  582000.000, 6328000.000)
>
> Center      (  581000.000, 6329000.000)
>
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
> Band 4 Block=10000x1 Type=Byte, ColorInterp=Undefined
>
>
>
> c:\>gdal_translate 2km.tif out.tif
>
> Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; tag
> ignored
>
> Input file size is 10000, 10000
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
>
> c:\>gdalinfo out.tif
>
> Driver: GTiff/GeoTIFF
>
> Files: out.tif
>
> Size is 10000, 10000
>
> Coordinate System is `'
>
> Origin = (580000.000000000000000,6330000.000000000000000)
>
> Pixel Size = (0.200000000000000,-0.200000000000000)
>
> Metadata:
>
>   TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows
>
>   TIFFTAG_DATETIME=2008:12:09 17:27:10
>
>   TIFFTAG_XRESOLUTION=72
>
>   TIFFTAG_YRESOLUTION=72
>
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>
> Image Structure Metadata:
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (  580000.000, 6330000.000)
>
> Lower Left  (  580000.000, 6328000.000)
>
> Upper Right (  582000.000, 6330000.000)
>
> Lower Right (  582000.000, 6328000.000)
>
> Center      (  581000.000, 6329000.000)
>
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 4 Block=10000x1 Type=Byte, ColorInterp=Alpha


From ivan.lucena at pmldnet.com  Thu Dec 11 14:40:36 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Thu Dec 11 14:40:38 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gSW50cnVjdGlvbnMgdG8gYnVpbGQgR0RBTCBmb3IgSmF2YQ==?=
Message-ID: <20081211194036.2563.qmail@s466.sureserver.com>

Hi Daniele,

>  I guess some definitions previously contained on java.opt have been
>  actually moved on NMAKE.opt in the main gdal folder.

That was all I need to know. Grazie!

{{{
compile:
    [mkdir] Created dir: C:\Dev\gdal\swig\java\build\classes
    [javac] Compiling 49 source files to C:\Dev\gdal\swig\java\build\classes
     [echo] compilation complete

archive:
      [jar] Building jar: C:\Dev\gdal\swig\java\gdal.jar

BUILD SUCCESSFUL
Total time: 32 seconds
}}}

From Shawn.Gong at drdc-rddc.gc.ca  Thu Dec 11 14:47:16 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Dec 11 14:45:50 2008
Subject: [gdal-dev] gdal 1.6 on Windows XP build error
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120311@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca><4941647C.8000708@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120311@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120312@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi Frank and list,

Here is another error that I got:
C:\PROGRA~1\MICROS~3\VC__6~1\INCLUDE\math.h(514) : error C2894:
templates cannot be declared to have 'C' linkage

I searched the web and the suggested solution was moving the #include
<math.h> outside of the extern "C" thing.  But I cannon find #include
<math.h> in fileendian.cpp


thanks,
Shawn


============================
        cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\..\port
-I..\..\..\
..\ogr -I..\..\..\..\gcore  -I..\..\..\..\alg
-I..\..\..\..\ogr\ogrsf_frmts -I .
./g2clib-1.0.4  /c myassert.c
myassert.c
        cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\..\port
-I..\..\..\
..\ogr -I..\..\..\..\gcore  -I..\..\..\..\alg
-I..\..\..\..\ogr\ogrsf_frmts -I .
./g2clib-1.0.4  /c scan.c
scan.c
        cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\..\port
-I..\..\..\
..\ogr -I..\..\..\..\gcore  -I..\..\..\..\alg
-I..\..\..\..\ogr\ogrsf_frmts -I .
./g2clib-1.0.4  /c memendian.c
memendian.c
        cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\..\port
-I..\..\..\
..\ogr -I..\..\..\..\gcore  -I..\..\..\..\alg
-I..\..\..\..\ogr\ogrsf_frmts -I .
./g2clib-1.0.4  /c fileendian.cpp
fileendian.cpp
C:\PROGRA~1\MICROS~3\VC__6~1\INCLUDE\math.h(514) : error C2894:
templates cannot
 be declared to have 'C' linkage
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
        cd ..
        cd vb6
        nmake /nologo /f makefile.vc
        cl /nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG -I..\port -I..\ogr
-I..\gcore
 -I..\alg -I..\ogr\ogrsf_frmts   /c vb6_support.cpp
vb6_support.cpp
        cd ..
        if exist gdal.lib del gdal.lib


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/c9ee82aa/attachment.html
From pbrosson2006 at free.fr  Thu Dec 11 16:15:18 2008
From: pbrosson2006 at free.fr (pbrosson)
Date: Thu Dec 11 16:15:20 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger (10.4)
Message-ID: <20893241.post@talk.nabble.com>


PowerMac G4, Mac OSX 10.4.11, tiger
powerpc-apple-darwin8.11.0

My objective is to  convert maps into ECW format (for personal use).

i have build and install  ECW SDK , and then built and install sucessfully
GDAL 1.6.0. Many thanks to the developers of GDAL and ECW.
However gdal_translate  to ECW format gives an error. (i get "Trace/BPT
trap" error  message).

To build GDAL with ECW writing, which arguments are required for configure?

Details of the build and test:

Hardware and system (PPC Mac OSX Tiger):
pmg4:~ pb$ uname -a
Darwin pmg4.local 8.11.0 Darwin Kernel Version 8.11.0: Wed Oct 10 18:26:00
PDT 2007; root:xnu-792.24.17~1/RELEASE_PPC Power Macintosh powerpc
pmg4:~ pb$ 
-------------------------------------------------
configure phase:
./configure --prefix=/usr/pkg --with-gnu-ld  \
--with-python=/usr/pkg/bin/python2.5 \
--with-sqlite3=/usr/pkg  \
--with-mysql  \
--with-pg=/usr/pkg/bin/pg_config  \
--without-grass  \
--without-libgrass  \
--with-ecw=/usr/pkg  \
--with-xerces=/usr/pkg \
--without-grib

?

GDAL is now configured for powerpc-apple-darwin8.11.0

 Installation directory:    /usr/pkg
 C compiler:                gcc -g -O2
 C++ compiler:              g++ -g -O2
 LIBTOOL support:           yes
LIBZ support:              external
GRASS support:             no
CFITSIO support:           no
PCRaster support:          internal
NetCDF support:            yes
LIBPNG support:            internal
LIBTIFF support:           external (BigTIFF=no)
LIBGEOTIFF support:        external
LIBJPEG support:           internal
LIBGIF support:            external
OGDI support:              no
HDF4 support:              no
HDF5 support:              no
Kakadu support:            no
JasPer support:            yes (GeoJP2=no)
ECW support:               yes
MrSID support:             no
MSG support:               no
GRIB support:              no
cURL support (wms/wcs/...):yes
PostgreSQL support:        yes
MySQL support:             yes
Ingres support:            no
Xerces-C support:          yes
NAS support:               no
Expat support:             no
ODBC support:              yes
PGeo support:              yes
OCI support:               no
GEORASTER support:         no
SDE support:               no
DODS support:              no
SQLite support:            yes
DWGdirect support          no
INFORMIX DataBlade support:no
GEOS support:              yes
Mac OS X Framework :       no
Old-gen python          no
SWIG Bindings:          no
Statically link PROJ.4:    no
enable OGR building:       yes
enable pthread support:    no
hide internal symbols:     no
-------------------------------------------------
GDAL version:
pmg4:~ pb$ gdal_translate --version
GDAL 1.6.0, released 2008/12/04
pmg4:~ pb$
-------------------------------------------------
ECW format should be supported:
pmg4:~ pb$ gdal_translate --formats | grep ECW
ECW (rw): ERMapper Compressed Wavelets
JP2ECW (rw+): ERMapper JPEG2000
pmg4:~ pb$

which input formats are supported for conversion to ECW?
-------------------------------------------------
runing gdal_translate from GTiff to ECW:
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
gdal_translate --debug ON   -of ECW -co "DATUM=WGS84" -co "PROJ=NUTM10" 
sampleGTiff.GTiff    sample.ECW
GDAL: GDALOpen(sampleGTiff.GTiff, this=0x710a4f0) succeeds as GTiff.
Input file size is 655, 655
0ECW: Writing with PROJ=NUTM10, DATUM=WGS84
Trace/BPT trap
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ 

same behaviour with Tiff or JPEG conversion to ECW
-------------------------------------------------
However, gdal_translate from ECW to JPEG is OK:

pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
gdal_translate -of JPEG COR.ecw COR_ecw.JPEG
Input file size is 980, 1930
0...10...20...30...40...50...60...70...80...90...100 - done.
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$
-------------------------------------------------
gdalinfo on the GTiff file:

pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
gdalinfo sampleGTiff.GTiff
Driver: GTiff/GeoTIFF
Files: sampleGTiff.GTiff
Size is 655, 655
Coordinate System is:
PROJCS["WGS 84 / UTM zone 10N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32610"]]
Origin = (563460.782789624412544,4180651.692221448291093)
Pixel Size = (14.250000000000000,-14.250000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  563460.783, 4180651.692) 
Lower Left  (  563460.783, 4171317.942) 
Upper Right (  572794.533, 4180651.692) 
Lower Right (  572794.533, 4171317.942) 
Center      (  568127.658, 4175984.817) 
Band 1 Block=655x4 Type=Byte, ColorInterp=Red
Band 2 Block=655x4 Type=Byte, ColorInterp=Green
Band 3 Block=655x4 Type=Byte, ColorInterp=Blue
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ 

-------------------------------------------------
version of the used dependencies for the buiding of GDAL:
libtool-base-1.5.24nb6
p5-Compress-Zlib-2.015nb1 
libgrass5-1.0.0  
netcdf-3.6.0p1nb1 
tiff-3.8.2nb4
libgeotiff-1.2.2
libungif-4.1.4nb1
jasper-1.900.1nb2
libecwj2-3.3
curl-7.18.0nb3
postgresql82-client-8.2.10 
mysql  Ver 14.14 Distrib 5.1.30, for apple-darwin8.11.0 (powerpc)
xerces-c-2.7.0nb2 
unixodbc-2.2.12nb1 
sqlite3-3.6.4 
geos-3.0.2
-------------------------------------------------
Is it a big/little endian problem? (PowerMacintosh CPU is big-endian)
Any help would be highly appreciated.

Thanks
philippe brosson


-- 
View this message in context: http://www.nabble.com/GDAL-%2B-ECW-writing-doesn%27t-work-on-PPC-Mac-OSX-tiger-%2810.4%29-tp20893241p20893241.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woklist at kyngchaos.com  Thu Dec 11 16:32:42 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Dec 11 16:32:45 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger
	(10.4)
In-Reply-To: <20893241.post@talk.nabble.com>
References: <20893241.post@talk.nabble.com>
Message-ID: <65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>

On Dec 11, 2008, at 3:15 PM, pbrosson wrote:

> PowerMac G4, Mac OSX 10.4.11, tiger
> powerpc-apple-darwin8.11.0
>
> My objective is to  convert maps into ECW format (for personal use).
>
> i have build and install  ECW SDK , and then built and install  
> sucessfully
> GDAL 1.6.0. Many thanks to the developers of GDAL and ECW.
> However gdal_translate  to ECW format gives an error. (i get "Trace/ 
> BPT
> trap" error  message).
>
> To build GDAL with ECW writing, which arguments are required for  
> configure?
>
> Details of the build and test:
>
> Hardware and system (PPC Mac OSX Tiger):

> runing gdal_translate from GTiff to ECW:
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
> gdal_translate --debug ON   -of ECW -co "DATUM=WGS84" -co  
> "PROJ=NUTM10"
> sampleGTiff.GTiff    sample.ECW
> GDAL: GDALOpen(sampleGTiff.GTiff, this=0x710a4f0) succeeds as GTiff.
> Input file size is 655, 655
> 0ECW: Writing with PROJ=NUTM10, DATUM=WGS84
> Trace/BPT trap
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$
>
> same behaviour with Tiff or JPEG conversion to ECW
> -------------------------------------------------
> However, gdal_translate from ECW to JPEG is OK:
>
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
> gdal_translate -of JPEG COR.ecw COR_ecw.JPEG
> Input file size is 980, 1930
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$
> -------------------------------------------------

ECW has problems with OSX.  Read works.  Write does not.  Though  
ECWJP2 does work both read/write (a recent development).  To get that  
far with either ECW or JP2 I had to do a bit of hacking.  Find all the  
details on my site.  or...

My current ECW plugin for my GDAL framework only supports ECW read.   
ECWJP2 r/w is coming very soon, when I get GDAL 1.6 packaged.

I'm not enough of a C++ programmer to figure out ECW write in an  
efficient way.  But once I get GDAL 1.6 out, I'll look into it with my  
brute strength, hack-n-slash debugging (that's how I eventually got  
ECWJP2 working).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From ari.jolma at tkk.fi  Thu Dec 11 16:37:36 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Dec 11 16:37:45 2008
Subject: [gdal-dev] gdal 1.6 on Windows XP build error (tif_ojpeg.c)
In-Reply-To: <4941647C.8000708@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E120310@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4941647C.8000708@pobox.com>
Message-ID: <49418820.5060607@tkk.fi>

Frank Warmerdam kirjoitti:
> Gong, Shawn (Contractor) wrote:
>>
>> I used MS VC++ 6.0 to build gdal. Here is the error for file:
>>
>> C:\build19\gdal-1.6.0\frmts\gtiff\libtiff\tif_ojpeg.c
>>
>> tif_ojpeg.c(620) : error C2632: 'long' followed by 'long' is illegal
>>
>
> Shawn,
>
> I think vc6 uses __int64 instead of long long.
>
> You might want to file a ticket against libtiff about this though VC6
> compatability is less and less a priority for me.

libtiff could use GIntBig from the portability code, where it is defined 
according to the compiler that's used. There's a lot of #ifdef's in 
libtiff sources, which could be simplified this way.

See also bug #2649: http://trac.osgeo.org/gdal/ticket/2649

Best regards,

Ari


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From jgomezdans at gmail.com  Thu Dec 11 17:52:46 2008
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Dec 11 17:52:48 2008
Subject: [gdal-dev] Speeding up OGR in python
Message-ID: <91d218430812111452u47ee507coebed4fa23294ff55@mail.gmail.com>

Hi,
I am using the Python OGR bindings to create a shapefile with a regularly
spaced grid over some multipolygons. I only want to have grid cells when the
centroid of the cell falls within one of my multipolygons. My code is simple
and rustic, but seems to be working. However, it is taking a long time to
run, I suspect due to the large number of nested loops. I am attaching the
code. The polygons in world.shp are fairly complex, but I was just wondering
whether there might be something really obvious here. As for versions,
OGR/GDAL is 1.5.3 and it is compiled with GEOS 2.2.3.

#!/usr/bin/python
from osgeo import ogr
from osgeo import osr

g_world = ogr.Open("world.shp")
Lworld = g_world.GetLayer(0)
feat_world = Lworld.GetFeature(0)
geom_world = feat_world.GetGeometryRef()

t_srs = osr.SpatialReference()
t_srs.SetFromUserInput('WGS84')
drv = ogr.GetDriverByName('ESRI Shapefile')
ds = drv.CreateDataSource('/tmp/output_grid.shp')
layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPolygon, srs =
t_srs)
layer.CreateField(ogr.FieldDefn('id', ogr.OFTInteger))

x_res = 0.5
y_res = 0.5
gid = 0
geom_coll = []
for xc in xrange(-18, 52, 1):
    for yc in xrange(-36,36,1):
        wkt = "POLYGON((%f %f,%f %f,%f %f,%f %f,%f %f))"% \
                    ( xc-x_res, yc-y_res, xc+x_res, yc-y_res, xc+x_res,
yc+y_res,\
                    xc-x_res,yc+y_res,xc-x_res, yc-y_res)

        geom = ogr.Geometry(type=ogr.wkbPolygon)
        geom = ogr.CreateGeometryFromWkt(wkt)
        geom.AssignSpatialReference ( t_srs )
        geom_coll.append ( geom )

for iw in xrange ( geom_world.GetGeometryCount() ):
    gw = geom_world.GetGeometryRef ( iw)
    for geom in geom_coll:
        if gw.Contains ( geom.Centroid()):
            gid += 1
            feat = ogr.Feature(feature_def=layer.GetLayerDefn())
            feat.SetGeometryDirectly(geom)
            feat.SetFID( 1 )
            feat.SetField('id', gid)
            layer.CreateFeature(feat)
            feat.Destroy()

ds.Destroy()


-- 
Department of Geography, University College London
Gower Street, London WC1E 6BT, UK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081211/1aff833a/attachment-0001.html
From klokan at klokan.cz  Thu Dec 11 19:19:12 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Thu Dec 11 19:19:15 2008
Subject: [gdal-dev] Re: TMS BoundingBox/Origin coordinates always in
	lat/lon using gdal2tiles.py?
In-Reply-To: <2c4bbbeb0812110924s1e79931n76cc1a4b65058b7b@mail.gmail.com>
References: <2c4bbbeb0812110735r12747762q409685cce4f3c352@mail.gmail.com>
	<2c4bbbeb0812110924s1e79931n76cc1a4b65058b7b@mail.gmail.com>
Message-ID: <6e41d95b0812111619x1b98b863i262bcf62f0f47daf@mail.gmail.com>

Hi Jason,

I used a lot of the old code from old version of GDAL2Tiles when
implementing tilemapresource.xml generation, so it is possible there
are those bugs in it.
There is practically no software reading this xml file yet, so I did
not paid enough attention probably.

But it should be correct for sure once it is generated.. so I will patch it.

Can you please create a ticket for this issue in the GDAL trac? We can
continue with solution under that ticket.

Best regards

Klokan Petr Pridal

On Thu, Dec 11, 2008 at 6:24 PM, Jason Beverage <jasonbeverage@gmail.com> wrote:
> I also just noticed that the lat and lon are reversed for the Origin and
> BoundingBox.  x should correspond to longitude and y should correspond to
> latitude, but they are switched.
>
> Thanks!
>
> Jason
>
> On Thu, Dec 11, 2008 at 10:35 AM, Jason Beverage <jasonbeverage@gmail.com>
> wrote:
>>
>> Hi all,
>>
>> I've been playing around with gdal2tiles in the OSG4W distribution and
>> noticed that the BoundingBox and Origin elements of the generated
>> tilemapresource.xml file that is generated always seems to be in lat/lon
>> coordinates, even when the output map is in Mercator.  Other TMS resources
>> I've seen keep the coordinates in meters if its mercator and lat/lon if it
>> is geodetic.
>>
>> Is this a "bug" or a "feature"?:)
>>
>> Thanks!
>>
>> Jason
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From nicholas.g.lawrence at mainroads.qld.gov.au  Thu Dec 11 19:42:49 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Thu Dec 11 19:42:56 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Released
In-Reply-To: <493FFF77.7090508@pobox.com>
Message-ID: <OF04D14B32.7817D72E-ON4A25751D.0003C4A9-4A25751D.0003EA96@transport.qld.gov.au>

Is there a web page where I can download GDAL/OGR 1.6?

I want to download the whole thing, the osgeo installer doesn't work past
my
office's firewall.

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From pbrosson2006 at free.fr  Thu Dec 11 21:43:27 2008
From: pbrosson2006 at free.fr (philippe brosson)
Date: Thu Dec 11 21:43:29 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger
	(10.4)
In-Reply-To: <65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>
References: <20893241.post@talk.nabble.com>
	<65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>
Message-ID: <20969024.post@talk.nabble.com>



William Kyngesburye wrote:
> 
> On Dec 11, 2008, at 3:15 PM, pbrosson wrote:
> 
> 
> 
> ECW has problems with OSX.  Read works.  Write does not.  Though  
> ECWJP2 does work both read/write (a recent development).  To get that  
> far with either ECW or JP2 I had to do a bit of hacking.  Find all the  
> details on my site.  or...
> 
> My current ECW plugin for my GDAL framework only supports ECW read.   
> ECWJP2 r/w is coming very soon, when I get GDAL 1.6 packaged.
> 
> I'm not enough of a C++ programmer to figure out ECW write in an  
> efficient way.  But once I get GDAL 1.6 out, I'll look into it with my  
> brute strength, hack-n-slash debugging (that's how I eventually got  
> ECWJP2 working).
> 
> -----
> 
> 
> 
when i configure GDAL like this:
./configure  --prefix=/usr/pkg  
--with-libgrass=/usr/pkg  \
--with-tiff=internal  \ 
--with-gif=internal  \
--with-png=internal  \
--with-jpeg=internal  \
--with-libz=internal  \
--without-netcdf  \ 
--without-jasper  \
--without-python \
--with-ecw=/usr/pkg 

building GDAL+ECW is OK  but i obtain this:

pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
gdal_translate --debug ON   -of ECW -co "TARGET=90" -co "DATUM=WGS84" -co
"PROJ=NUTM10"  sample_geotiff_bigEndian.tif   sample.ECW
GDAL: GDALOpen(sample_geotiff_bigEndian.tif, this=0x5a09de0) succeeds as
GTiff.
Input file size is 655, 655
ERROR 1: libgrass: MAPSET is not set
Abort trap
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ 



-- 
View this message in context: http://www.nabble.com/GDAL-%2B-ECW-writing-doesn%27t-work-on-PPC-Mac-OSX-tiger-%2810.4%29-tp20893241p20969024.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woklist at kyngchaos.com  Thu Dec 11 22:31:34 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Dec 11 22:31:37 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger
	(10.4)
In-Reply-To: <20969024.post@talk.nabble.com>
References: <20893241.post@talk.nabble.com>
	<65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>
	<20969024.post@talk.nabble.com>
Message-ID: <F8ACBD62-3EDE-466A-B81A-E79D9365535A@kyngchaos.com>

On Dec 11, 2008, at 8:43 PM, philippe brosson wrote:

> when i configure GDAL like this:
> ./configure  --prefix=/usr/pkg
> --with-libgrass=/usr/pkg  \
> --with-tiff=internal  \
> --with-gif=internal  \
> --with-png=internal  \
> --with-jpeg=internal  \
> --with-libz=internal  \
> --without-netcdf  \
> --without-jasper  \
> --without-python \
> --with-ecw=/usr/pkg
>
> building GDAL+ECW is OK  but i obtain this:
>
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
> gdal_translate --debug ON   -of ECW -co "TARGET=90" -co  
> "DATUM=WGS84" -co
> "PROJ=NUTM10"  sample_geotiff_bigEndian.tif   sample.ECW
> GDAL: GDALOpen(sample_geotiff_bigEndian.tif, this=0x5a09de0)  
> succeeds as
> GTiff.
> Input file size is 655, 655
> ERROR 1: libgrass: MAPSET is not set
> Abort trap
> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$
>
That libgrass option is really old.  The more common way to include  
GRASS support is to build it as a plugin, otherwise you either have to  
deal with the old libgrass (only supports old GRASS rasters, no  
vectors) or with a circular dependency (which is simple, but still a  
hassle).

For a minimal GDAL just to try ECW support, you can skip GRASS  
completely.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of  
the allied nations devoted an entire year exclusively to hating the  
____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From ASP at blominfo.dk  Fri Dec 12 04:32:41 2008
From: ASP at blominfo.dk (Asger Sigurd Skovbo Petersen)
Date: Fri Dec 12 04:32:43 2008
Subject: [gdal-dev] Force output color interpretation
In-Reply-To: <200812112023.06525.even.rouault@mines-paris.org>
References: <25BE68A4D83DD4438F701DF0311F3F4A8D71F9@posthus.blominfo.dk>
	<200812112023.06525.even.rouault@mines-paris.org>
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A90CB4E@posthus.blominfo.dk>

Hi Even,

Thank you very much, it works exactly as wanted. I have looked at that option before but thought that it only applied to 3 band rasters.

Thanks again.

Best regards
Asger

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: 11. december 2008 20:23
To: gdal-dev@lists.osgeo.org
Cc: Asger Sigurd Skovbo Petersen
Subject: Re: [gdal-dev] Force output color interpretation

Asger

it appears that when translating to GeoTIFF and that the photometric interpretation creation option is not set, the GeoTIFF driver will try to make a best guess and write the interpretation as RGBA.

You can achieve what you want by specifying the photometric interpretation creation option with :

gdal_translate 2km.tif out.tif -co PHOTOMETRIC=RGB

Best regards,
Even

Le Thursday 11 December 2008 12:01:26 Asger Sigurd Skovbo Petersen, vous avez ?crit?:
> Hi all,
>
>
>
> I'm having problems with the color interpretation of the output from 
> GDAL utilities. I have some 4 band (Red, Green, Blue, Near infrared) 
> rasters. The fourth band is interpreted as "Undefined" by GDAL, but 
> GDAL insists on marking the fourth band as ALPHA in the output. Having 
> the fourth band marked as ALPHA causes a bunch of problems with other 
> software, so I would really like the GDAL tools to leave it as 
> "Undefined". Is this possible?
>
>
>
> Please find a simple example below where gdal_translate marks fourth 
> band as ALPHA.
>
>
>
> Best regards
>
> Asger
>
>
>
> Example:
>
> c:\>gdalinfo --version
>
> GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22
>
> c:\>gdalinfo 2km.tif
>
> Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; 
> tag ignored
>
> Driver: GTiff/GeoTIFF
>
> Files: 2km.tif
>
> Size is 10000, 10000
>
> Coordinate System is `'
>
> Origin = (580000.000000000000000,6330000.000000000000000)
>
> Pixel Size = (0.200000000000000,-0.200000000000000)
>
> Metadata:
>
>   TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows
>
>   TIFFTAG_DATETIME=2008:12:09 17:27:10
>
>   TIFFTAG_XRESOLUTION=72
>
>   TIFFTAG_YRESOLUTION=72
>
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>
> Image Structure Metadata:
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (  580000.000, 6330000.000)
>
> Lower Left  (  580000.000, 6328000.000)
>
> Upper Right (  582000.000, 6330000.000)
>
> Lower Right (  582000.000, 6328000.000)
>
> Center      (  581000.000, 6329000.000)
>
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
> Band 4 Block=10000x1 Type=Byte, ColorInterp=Undefined
>
>
>
> c:\>gdal_translate 2km.tif out.tif
>
> Warning 1: TIFFFetchNormalTag:Incompatible type for "RichTIFFIPTC"; 
> tag ignored
>
> Input file size is 10000, 10000
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
>
> c:\>gdalinfo out.tif
>
> Driver: GTiff/GeoTIFF
>
> Files: out.tif
>
> Size is 10000, 10000
>
> Coordinate System is `'
>
> Origin = (580000.000000000000000,6330000.000000000000000)
>
> Pixel Size = (0.200000000000000,-0.200000000000000)
>
> Metadata:
>
>   TIFFTAG_SOFTWARE=Adobe Photoshop CS4 Windows
>
>   TIFFTAG_DATETIME=2008:12:09 17:27:10
>
>   TIFFTAG_XRESOLUTION=72
>
>   TIFFTAG_YRESOLUTION=72
>
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>
> Image Structure Metadata:
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (  580000.000, 6330000.000)
>
> Lower Left  (  580000.000, 6328000.000)
>
> Upper Right (  582000.000, 6330000.000)
>
> Lower Right (  582000.000, 6328000.000)
>
> Center      (  581000.000, 6329000.000)
>
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
>   Mask Flags: PER_DATASET ALPHA
>
> Band 4 Block=10000x1 Type=Byte, ColorInterp=Alpha



From woklist at kyngchaos.com  Fri Dec 12 13:12:38 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Dec 12 13:12:47 2008
Subject: [gdal-dev] shapefile->mysql join problem
Message-ID: <9A58D976-ECD1-4C95-973C-6A499CEC7C02@kyngchaos.com>

I trying to do a shapefile to mysql join:

ogrinfo -al -so -sql "SELECT * FROM st99_d00 LEFT JOIN  
'MYSQL:mydb 
,host=localhost,user=me,password=,tables=state_sum'.state_sum ON  
st99_d00.state = state_sum.stfips" st99_d00.shp

This works if the state_sum.stfips field is not indexed at all, or has  
a non-unique index.  But when I use a primary key or unique index (the  
stfips field IS unique), I get an error:

ERROR 1: SQL: Unrecognised secondary field st99_d00.state in JOIN  
clause..


Intended behavior?  Bug?  Or I'm doing it wrong?  I suppose if some  
form of index works, though not unique, the lookup won't be slow.

Note that this is really for a mapserver mapfile, but since it doesn't  
work directly in OGR I'm asking here.

DATA "SELECT * FROM st99_d00 LEFT JOIN  
'MYSQL:mydb 
,host=localhost,user=me,password=,tables=state_sum'.state_sum ON  
st99_d00.state = state_sum.stfips"

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From even.rouault at mines-paris.org  Fri Dec 12 14:06:38 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 12 14:06:43 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Released
In-Reply-To: <OF04D14B32.7817D72E-ON4A25751D.0003C4A9-4A25751D.0003EA96@transport.qld.gov.au>
References: <OF04D14B32.7817D72E-ON4A25751D.0003C4A9-4A25751D.0003EA96@transport.qld.gov.au>
Message-ID: <200812122006.39782.even.rouault@mines-paris.org>

http://download.osgeo.org/gdal/

There's a win32 subdirectory with compiled versions.

Le Friday 12 December 2008 01:42:49 nicholas.g.lawrence@mainroads.qld.gov.au, 
vous avez ?crit?:
> Is there a web page where I can download GDAL/OGR 1.6?
>
> I want to download the whole thing, the osgeo installer doesn't work past
> my
> office's firewall.
>
> Regards,
> nick
>
>
> ***********************************************************************
> WARNING: This e-mail (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was intended
> to be sent to and if you use it in an authorised way.  No one is
> allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this e-mail without appropriate authority.
>
> If this e-mail was not intended for you and was sent to you by mistake,
> please telephone or e-mail me immediately, destroy any hardcopies of
> this e-mail and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this e-mail is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this e-mail does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this e-mail do not necessarily reflect the
> opinions of the Queensland Department of Main Roads, Queensland
> Transport or Maritime Safety Queensland, or endorsed organisations
> utilising the same infrastructure.
> ***********************************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pbrosson2006 at free.fr  Sat Dec 13 09:50:44 2008
From: pbrosson2006 at free.fr (philippe brosson)
Date: Sat Dec 13 09:50:46 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger
	(10.4)
In-Reply-To: <F8ACBD62-3EDE-466A-B81A-E79D9365535A@kyngchaos.com>
References: <20893241.post@talk.nabble.com>
	<65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>
	<20969024.post@talk.nabble.com>
	<F8ACBD62-3EDE-466A-B81A-E79D9365535A@kyngchaos.com>
Message-ID: <20990866.post@talk.nabble.com>



William Kyngesburye wrote:
> 
> On Dec 11, 2008, at 8:43 PM, philippe brosson wrote:
> 
>> when i configure GDAL like this:
>> ./configure  --prefix=/usr/pkg
>> --with-libgrass=/usr/pkg  \
>> --with-tiff=internal  \
>> --with-gif=internal  \
>> --with-png=internal  \
>> --with-jpeg=internal  \
>> --with-libz=internal  \
>> --without-netcdf  \
>> --without-jasper  \
>> --without-python \
>> --with-ecw=/usr/pkg
>>
>> building GDAL+ECW is OK  but i obtain this:
>>
>> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
>> gdal_translate --debug ON   -of ECW -co "TARGET=90" -co  
>> "DATUM=WGS84" -co
>> "PROJ=NUTM10"  sample_geotiff_bigEndian.tif   sample.ECW
>> GDAL: GDALOpen(sample_geotiff_bigEndian.tif, this=0x5a09de0)  
>> succeeds as
>> GTiff.
>> Input file size is 655, 655
>> ERROR 1: libgrass: MAPSET is not set
>> Abort trap
>> pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$
>>
> That libgrass option is really old.  The more common way to include  
> GRASS support is to build it as a plugin, otherwise you either have to  
> deal with the old libgrass (only supports old GRASS rasters, no  
> vectors) or with a circular dependency (which is simple, but still a  
> hassle).
> 
> For a minimal GDAL just to try ECW support, you can skip GRASS  
> completely.
> 
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "We are at war with them. Neither in hatred nor revenge and with no  
> particular pleasure I shall kill every ___ I can until the war is  
> over. That is my duty."
> 
> "Don't you even hate 'em?"
> 
> "What good would it do if I did? If all the many millions of people of  
> the allied nations devoted an entire year exclusively to hating the  
> ____ it wouldn't kill one ___ nor shorten the war one day."
> 
> <Ha, ha> "And it might give 'em all stomach ulcers."
> 
> - Tarzan, on war
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
if i skip GRASS and LIBGRASS, gdal_translate from Tiff format to ECW format
still gives an error "Trace/BPT trap":
./configure --prefix=/usr/pkg  \
--without-grib \
--without-libgrass  \
--without-grass \
--with-tiff=internal \
--with-gif=internal \
--with-png=internal  \
--with-jpeg=internal  \
--with-libz=internal \
--without-netcdf \
--without-jasper \
--without-python \
--with-ecw=/usr/pkg
?
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ \
gdal_translate --debug ON   -of ECW -co "TARGET=90" -co "DATUM=WGS84" -co
"PROJ=NUTM10"  sample_geotiff_bigEndian.tif   sample.ECW
GDAL: GDALOpen(sample_geotiff_bigEndian.tif, this=0x5a09cc0) succeeds as
GTiff.
Input file size is 655, 655
0ECW: Writing with PROJ=NUTM10, DATUM=WGS84
Trace/BPT trap
pmg4:~/Desktop/GDAL_conversion_folder/sample_geotiff pb$ 

Does any body know if  conversion to ECW requires more dependencies than the
ones i am using?
Does the error comes from ECW SDK or GDAL?
If some one has succeeded ECW writing with Linux or any Unix, which
arguments did he used for configure?
thanks,
philippe

-- 
View this message in context: http://www.nabble.com/GDAL-%2B-ECW-writing-doesn%27t-work-on-PPC-Mac-OSX-tiger-%2810.4%29-tp20893241p20990866.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woklist at kyngchaos.com  Sat Dec 13 11:41:52 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Dec 13 11:41:57 2008
Subject: [Gdal-dev] GDAL + ECW writing doesn't work on PPC Mac OSX tiger
	(10.4)
In-Reply-To: <20990866.post@talk.nabble.com>
References: <20893241.post@talk.nabble.com>
	<65F1B836-59CD-4B9F-A95B-C10FBFE83C99@kyngchaos.com>
	<20969024.post@talk.nabble.com>
	<F8ACBD62-3EDE-466A-B81A-E79D9365535A@kyngchaos.com>
	<20990866.post@talk.nabble.com>
Message-ID: <476A75A6-9A94-407B-BD48-538ED098494D@kyngchaos.com>

On Dec 13, 2008, at 8:50 AM, philippe brosson wrote:

> if i skip GRASS and LIBGRASS, gdal_translate from Tiff format to ECW  
> format
> still gives an error "Trace/BPT trap":

Exactly what I was saying the first time - ECW write is broken on  
OSX.  It's known and it needs work.  I've pestered the ECW developers,  
but they only had access to older OSX 10.3 development tools (where  
they supposedly had it working).
>
> Does any body know if  conversion to ECW requires more dependencies  
> than the
> ones i am using?
> Does the error comes from ECW SDK or GDAL?
> If some one has succeeded ECW writing with Linux or any Unix, which
> arguments did he used for configure?
> thanks,
> philippe
>
ECW just depends on the ECWJ2 SDK and JPEG.

There should be a crashlog for gdal_translate that shows you that it  
is in the ecw library when it crashes.  I don't think it has anything  
to do with GDAL.

I think the problem is specific to OSX, so Linux configuration won't  
help.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Sat Dec 13 14:37:21 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Dec 13 14:37:24 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Released
In-Reply-To: <493FFF77.7090508@pobox.com>
References: <493FFF77.7090508@pobox.com>
Message-ID: <AD3E65EC-3F7C-4F2E-A4D9-49EF1E4361B8@kyngchaos.com>

My OSX GDAL 1.6 framework is now ready.  And a little late, so is  
1.5.3 -- I wanted to synchronize some OSX fixes in 1.6 with 1.5, and  
make sure the 2 versions work together.  More than just a new version,  
here are some OSX fixes and changes:

* [1.5/1.6] HDF4 64bit OSX now works.

* [1.5/1.6] DODS OSX issues worked out.

* [1.5/1.6] ECW-JP2 support works again. It was there, it just wasn't  
loading, only ECW. I also fixed a 64bit issue with ECW-JP2. This gives  
OSX users a good working JP2 format driver. Note: ECW still only works  
for read-only, I'll see if I can figure out write support, but don't  
hold your breath.

* [1.5/1.6] Python binaries have been moved to be inside the framework  
bundle. A ''gdal.pth'' file is now installed in the Python site- 
packages folder to point to the framework. This lets the next change  
easily work:

* [1.5/1.6] Python support on Leopard can now be used with the  
python.org Python 2.5, if installed. This is in addition to the system  
Python on Leopard. The ''gdal.pth'' file avoids unnecessary  
duplication of the binaries.

* [1.6] The plugins folder is now versioned. For GDAL 1.6, that is ''/ 
Library/Application Support/GDAL/1.6/PlugIns''. GDAL 1.5 plugins will  
be left in ''/Library/Application Support/GDAL/PlugIns''.

* [1.6] Internal GRASS libraries updated to GRASS 6.4.svn. (GRASS left  
at 6.3 for GDAL 1.5)

Both GDAL 1.5.3 and 1.6 can be installed, but the most recent  
version //installed// will be the active one for Python and developer  
use.  Notes are included to switch this.  Current application builds  
will still use GDAL 1.5, until I rebuild them for 1.6.

A full set of plugins for ECW and MrSID for both 1.5 and 1.6, and a  
new rgdal for R 2.8, are also available.

On Dec 10, 2008, at 11:42 AM, Frank Warmerdam wrote:

> The GDAL/OGR project team is pleased to announce the release of
> GDAL/OGR 1.6.0.  This release represents 11 months of new feature
> development since the GDAL/OGR 1.5.0 release, as well as many bug
> fixes.  The release source code is available as described at:

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of  
the allied nations devoted an entire year exclusively to hating the  
____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From warmerdam at pobox.com  Sun Dec 14 13:47:03 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec 14 13:47:16 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release
Message-ID: <494554A7.2030606@pobox.com>

Folks,

As I mentioned a couple weeks ago, I am proceeding with producing stable
releases.  I have produced a release candidate for a GDAL 1.4.5 release.
Once released I anticipate this will be the last GDAL 1.4.x release.

The source is available at:
   http://download.osgeo.org/gdal/gdal-1.4.5RC1.tar.gz
   http://download.osgeo.org/gdal/gdal145RC1.zip

The release news is at:
   http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News

Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release.

Voting will close Tuesday evening.  Please try out the release before voting.
Feedback from any users/developers welcome.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wickleyl at gmail.com  Sun Dec 14 21:21:39 2008
From: wickleyl at gmail.com (wickley)
Date: Sun Dec 14 21:21:41 2008
Subject: [Gdal-dev] Supporting ECW as a plugin on window,
Message-ID: <20997632.post@talk.nabble.com>


Hello , I  have some question about supporting ECW in gdal.but I can not
solve  it. My step is following: 

1.I download gdal-1.6.0 and
ImageCompressionSDKSourceCode3.3Setup_20070509.zip from ERMaper webset and
Windows Server 2003 R2 Platform SDK from microsoft website.
2. I set up Windows Server 2003 R2 Platform SDK on my computer in D:\Program
Files2.
3. I unzip the ImageCompressionSDKSourceCode3.3Setup_20070509.zip,and select
E:\libecwj2-3.3      
   \Source\NCSBuildQmake\libecwj2_win32_net_shared.vcproj,using visual
studio 2005.When open the file,
   it needs translate, and it translates well with no error and just two
warnings.
4. I set visual studio 2005 project->c/c++->general ->include directory,and
add D:\Program Files2\Microsoft Platform SDK for  Windows Server 2003
R2\Include
5. I select debug,win32 ,and build libecwj2.dll successfully,and it is
included in E:\libecwj2-3.3\Source\NCSBuildQmake\Debug
6. I unzip gdal-1.6.0 to E:\gdal-1.6.0. change MSVC_VER=1400 .
7. for ECW support, I Uncomment the following and update to enable ECW
support.
    # Uncomment the following and update to enable ECW support.
    ECW_PLUGIN = YES
    ECWDIR  = 	E:\libecwj2-3.3
    ECWLIB  = 	$(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
8.   open E:\gdal-1.6.0\frmts\leveller\levellerdataset.cpp,and change { "?,
kPI / 180.0, UNITLABEL_DEGREE } to
   { "?", kPI / 180.0, UNITLABEL_DEGREE }
9. I start visual studio 2005 commandline , and change the path to
E:\gdal-1.6.0, then ,I inputs command nmake /f makefile.vc,nmake /f
makefile.vc install and nmake /f makefile.vc devinstall.
10. I copy gdal16.dll to C:\WINDOWS\system32.
11. I set tools->options->projec and solution -> vc++ direction
->includingfile->C:\warmerda\bld\include
                                                            
->libraries->C:\warmerda\bld\lib
12.I build a new project,and code following:
   #include "gdal_priv.h"
   #include "stdio.h"
   #include "gdal.h"
   #pragma comment(lib, "gdal_i.lib")
   int main()
   {
	const char *p=NULL;
	GDALDataset  *poDataset=NULL;
	GDALDriver *pDriver=NULL;
	GDALAllRegister();
	int t =GDALGetDriverCount();
	printf("%d\n",t);
	for(int k=0;k<t;k++)
	{
		const char *pt=NULL;
		pDriver=(GDALDriver *)GDALGetDriver(k);
		pt=pDriver->GetDescription();
		printf("%s\n",pt);
	}
  }
result:
75
VRT
GTiff
NITF
RPFTOC
HFA
SAR_CEOS
CEOS
JAXAPALSAR
GFF
ELAS
AIG
AAIGrid
SDTS
DTED
PNG
JPEG
MEM
JDEM
GIF
ESAT
BSB
XPM
BMP
DIMAP
AirSAR
RS2
PCIDSK
PCRaster
ILWIS
SGI
SRTMHGT
Leveller
Terragen
ISIS3
ISIS2
PDS
ERS
L1B
FIT
GRIB
RMF
MSGN
RST
INGR
GSAG
GSBG
GS7BG
COSAR
TSX
COASP
PNM
DOQ1
DOQ2
ENVI
EHdr
GenBin
PAux
MFF
MFF2
FujiBAS
GSC
FAST
BT
LAN
CPG
IDA
NDF
EIR
DIPEx
LCP
RIK
USGSDEM
GXF
ADRG
BLX

there is no ECW,why?can anyone help me?
-- 
View this message in context: http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632p20997632.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Dec 15 08:15:02 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Dec 15 08:15:19 2008
Subject: [gdal-dev] Gdaltindex 
Message-ID: <loom.20081215T124623-222@post.gmane.org>

Hi,

I was creating tileindexes with gdaltindex from FWTools 2.2.6 on Windows
and I received strange looking error messages if I had external overviews in 
directories. So far it looks like the resulting shapefile is OK and it has
polygons for all image files. However, while it is somehow understandable
to get error messages about external overviews (named .tif.ovr) gdaltindex 
gives also errors about some .tif files. As I said, tileindex shapefiles
seem to be OK despite of all the error messages. 

My command line was like:
gdaltindex M105_WMS.shp	G:\Data\Shares\Ilmakuva2\Ilmakuvat\M105_WMS\*.tif

A few examples of the error messages follow with couple of my comments
marked with *** 

  Unable to open
G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114107D.tif, skipping.

*** This file exists, it is OK for gdalinfo, and it is included in the
resulting tileindex so it was not skipped really.

  ERROR 4:
`G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114111C.tif.ovr'
not recognised as a supported
file format.

*** Perhaps external overview mechanism for tiff files have made it 
necessary to make program to understand that *.tif should not include
*.tif.ovr files?

ERROR 1:
TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
105_WMS\FMI_2007_M105_TM35_114302D.tif.ovr:
Can not read TIFF directory count
ERROR 1: TIFFReadDirectory:
Failed to read directory at offset 123088580
ERROR 1:
TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114303D.tif.ovr:
Can not read  TIFF directory count
ERROR 1: TIFFReadDirectory:
Failed to read directory at offset 123088580
ERROR 4:
`G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114305B.tif'
 not recognised as a supported file
 format.

Unable to open
G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114305B.tif,
skipping.
ERROR 4:
`G:\Data\Shares\Ilmakuva2\Ilmakuvat\
M105_WMS\FMI_2007_M105_TM35_114306A.tif'
not recognised as a supported file
 format.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Mon Dec 15 13:06:42 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 15 13:11:50 2008
Subject: [gdal-dev] Gdaltindex
In-Reply-To: <loom.20081215T124623-222@post.gmane.org>
References: <loom.20081215T124623-222@post.gmane.org>
Message-ID: <200812151906.43159.even.rouault@mines-paris.org>

Hi,

the behaviour you describe is a bit weird. When you get the error 
message "Unable to open 'foo', skipping", there's no way in the source code 
of gdaltindex.c that 'foo' is added to the tile index (or I should reopen my 
C books ;-)). Are you sure the file was not already in the tile index before 
running this command ? That's the only explanation I have for such a 
behaviour. But I don't understand though why gdaltindex wouldn't manage to 
open it, but gdalinfo would succeed.

Then, the warnings about .tif.ovr being not recognized can probably explained 
by the fact that when you GDALOpen a .tif file, it will also try to open the 
related overview file. It looks like those overviews are corrupted. 

Best regards,
Even

Le Monday 15 December 2008 14:15:02, vous avez ?crit?:
> Hi,
>
> I was creating tileindexes with gdaltindex from FWTools 2.2.6 on Windows
> and I received strange looking error messages if I had external overviews
> in directories. So far it looks like the resulting shapefile is OK and it
> has polygons for all image files. However, while it is somehow
> understandable to get error messages about external overviews (named
> .tif.ovr) gdaltindex gives also errors about some .tif files. As I said,
> tileindex shapefiles seem to be OK despite of all the error messages.
>
> My command line was like:
> gdaltindex M105_WMS.shp	G:\Data\Shares\Ilmakuva2\Ilmakuvat\M105_WMS\*.tif
>
> A few examples of the error messages follow with couple of my comments
> marked with ***
>
>   Unable to open
> G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114107D.tif, skipping.
>
> *** This file exists, it is OK for gdalinfo, and it is included in the
> resulting tileindex so it was not skipped really.
>
>   ERROR 4:
> `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114111C.tif.ovr'
> not recognised as a supported
> file format.
>
> *** Perhaps external overview mechanism for tiff files have made it
> necessary to make program to understand that *.tif should not include
> *.tif.ovr files?
>
> ERROR 1:
> TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> 105_WMS\FMI_2007_M105_TM35_114302D.tif.ovr:
> Can not read TIFF directory count
> ERROR 1: TIFFReadDirectory:
> Failed to read directory at offset 123088580
> ERROR 1:
> TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114303D.tif.ovr:
> Can not read  TIFF directory count
> ERROR 1: TIFFReadDirectory:
> Failed to read directory at offset 123088580
> ERROR 4:
> `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114305B.tif'
>  not recognised as a supported file
>  format.
>
> Unable to open
> G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114305B.tif,
> skipping.
> ERROR 4:
> `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> M105_WMS\FMI_2007_M105_TM35_114306A.tif'
> not recognised as a supported file
>  format.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pbrosson2006 at free.fr  Mon Dec 15 13:23:37 2008
From: pbrosson2006 at free.fr (philippe brosson)
Date: Mon Dec 15 13:23:39 2008
Subject: [Gdal-dev] GDAL/OGR 1.6.0 Released
In-Reply-To: <AD3E65EC-3F7C-4F2E-A4D9-49EF1E4361B8@kyngchaos.com>
References: <493FFF77.7090508@pobox.com>
	<AD3E65EC-3F7C-4F2E-A4D9-49EF1E4361B8@kyngchaos.com>
Message-ID: <21019038.post@talk.nabble.com>



William Kyngesburye wrote:
> 
> My OSX GDAL 1.6 framework is now ready.  And a little late, so is  
> 1.5.3 -- I wanted to synchronize some OSX fixes in 1.6 with 1.5, and  
> make sure the 2 versions work together.  More than just a new version,  
> here are some OSX fixes and changes:
> 
> * [1.5/1.6] HDF4 64bit OSX now works.
> 
> * [1.5/1.6] DODS OSX issues worked out.
> 
> * [1.5/1.6] ECW-JP2 support works again. It was there, it just wasn't  
> loading, only ECW. I also fixed a 64bit issue with ECW-JP2. This gives  
> OSX users a good working JP2 format driver. Note: ECW still only works  
> for read-only, I'll see if I can figure out write support, but don't  
> hold your breath.
> 
> * [1.5/1.6] Python binaries have been moved to be inside the framework  
> bundle. A ''gdal.pth'' file is now installed in the Python site- 
> packages folder to point to the framework. This lets the next change  
> easily work:
> 
> * [1.5/1.6] Python support on Leopard can now be used with the  
> python.org Python 2.5, if installed. This is in addition to the system  
> Python on Leopard. The ''gdal.pth'' file avoids unnecessary  
> duplication of the binaries.
> 
> * [1.6] The plugins folder is now versioned. For GDAL 1.6, that is ''/ 
> Library/Application Support/GDAL/1.6/PlugIns''. GDAL 1.5 plugins will  
> be left in ''/Library/Application Support/GDAL/PlugIns''.
> 
> * [1.6] Internal GRASS libraries updated to GRASS 6.4.svn. (GRASS left  
> at 6.3 for GDAL 1.5)
> 
> Both GDAL 1.5.3 and 1.6 can be installed, but the most recent  
> version //installed// will be the active one for Python and developer  
> use.  Notes are included to switch this.  Current application builds  
> will still use GDAL 1.5, until I rebuild them for 1.6.
> 
> A full set of plugins for ECW and MrSID for both 1.5 and 1.6, and a  
> new rgdal for R 2.8, are also available.
> 
> On Dec 10, 2008, at 11:42 AM, Frank Warmerdam wrote:
> 
>> The GDAL/OGR project team is pleased to announce the release of
>> GDAL/OGR 1.6.0.  This release represents 11 months of new feature
>> development since the GDAL/OGR 1.5.0 release, as well as many bug
>> fixes.  The release source code is available as described at:
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "We are at war with them. Neither in hatred nor revenge and with no  
> particular pleasure I shall kill every ___ I can until the war is  
> over. That is my duty."
> 
> "Don't you even hate 'em?"
> 
> "What good would it do if I did? If all the many millions of people of  
> the allied nations devoted an entire year exclusively to hating the  
> ____ it wouldn't kill one ___ nor shorten the war one day."
> 
> <Ha, ha> "And it might give 'em all stomach ulcers."
> 
> - Tarzan, on war
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
William,
Does your OSX GDAL 1.6 framework allow ECW writing?

philippe
-- 
View this message in context: http://www.nabble.com/GDAL-OGR-1.6.0-Released-tp20940265p21019038.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woklist at kyngchaos.com  Mon Dec 15 14:46:28 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec 15 14:46:32 2008
Subject: [Gdal-dev] GDAL/OGR 1.6.0 Released
In-Reply-To: <21019038.post@talk.nabble.com>
References: <493FFF77.7090508@pobox.com>
	<AD3E65EC-3F7C-4F2E-A4D9-49EF1E4361B8@kyngchaos.com>
	<21019038.post@talk.nabble.com>
Message-ID: <27945765-82D2-4FAF-8F70-E2611668F5E0@kyngchaos.com>

On Dec 15, 2008, at 12:23 PM, philippe brosson wrote:

> William,
> Does your OSX GDAL 1.6 framework allow ECW writing?


No.  I haven't figured out the problem yet.  Don't get your hopes up,  
I was lucky to fix a ECWJP2 issue for OSX.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From jason.roberts at duke.edu  Mon Dec 15 17:12:02 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec 15 17:12:13 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
Message-ID: <003f01c95f02$28a8bc50$79fa34f0$@roberts@duke.edu>

Greetings GDAL developers,

 

I cannot get GDAL 1.6.0 to work on Windows Vista SP1. It appears that there
is a DLL Hell problem that does not appear on XP SP3, at least with my
machines.

 

Repro steps on Vista SP1:

 

1.    Download
ftp://ftp.remotesensing.org/gdal/win32/1.6/gdalwin32exe160.zip and
decompress to C:\gdalwin32-1.6

2.    From cmd.exe shell:

a.    SET PATH=C:\gdalwin32-1.6\bin;%PATH%

b.    SET GDAL_DATA=C:\gdalwin32-1.6\data

c.    C:\gdalwin32-1.6\bin\gdalinfo.exe

3.    Receive the following dialog box:

 

---------------------------

gdalinfo.exe - Application Error

---------------------------

The application failed to initialize properly (0xc0150002). Click OK to
terminate the application. 

---------------------------

OK   

---------------------------

 

The event log contains a new event: Source = SideBySide, Event ID = 33,
Description = Activation context generation failed for
"C:\gdalwin32-1.6\bin\geos_c.dll". Dependent Assembly
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8" could not be found. Please use
sxstrace.exe for detailed diagnosis.

 

Running depends.exe on C:\gdalwin32-1.6\bin\geos_c.dll gives the error "
Error: The Side-by-Side configuration information for
"c:\gdalwin32-1.6\bin\GEOS_C.DLL" contains errors. The application has
failed to start because its side-by-side configuration is incorrect. Please
see the application event log for more detail (14001)." Looking in the event
log again, we have another instance of the event above.

 

This looks like a classic DLL Hell problem, with Vista thrown in just to
make it more confusing. Please let me know if I've somehow messed up the
install or am missing something obvious. Apologies if I am.

 

I will investigate a bit further, but not being a GDAL developer, I do not
know which compilers you use, how you intend to link to MSVCRT, etc. If the
GDAL "build guy" could look at this, I'd really appreciate it. If you send
private builds, I can try them out with quick turnaround.

 

Thanks for your help,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081215/6e8de1b7/attachment.html
From jason.roberts at duke.edu  Mon Dec 15 17:20:40 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec 15 17:20:51 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <003f01c95f02$28a8bc50$79fa34f0$%roberts@duke.edu>
References: <003f01c95f02$28a8bc50$79fa34f0$%roberts@duke.edu>
Message-ID: <005001c95f03$5d35fe50$17a1faf0$@roberts@duke.edu>

FYI, here is the output from running sxstrace.exe and attempting to execute
gdalinfo.exe. I haven't tried to determine what this means yet. (At first
glance, I am wondering why Windows is trying to probe for .NET assemblies in
the first place, since I expected that GDAL would not contain any. But then
this is Vista, so all bets are off.)

 

=================

Begin Activation Context Generation.

Input Parameter:

      Flags = 0

      ProcessorArchitecture = x86

      CultureFallBacks = en-US;en

      ManifestPath = C:\gdalwin32-1.6\bin\geos_c.dll

      AssemblyDirectory = C:\gdalwin32-1.6\bin\

      Application Config File = 

-----------------

INFO: Parsing Manifest File C:\gdalwin32-1.6\bin\geos_c.dll.

      INFO: Manifest Definition Identity is (null).

      INFO: Reference:
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8"

INFO: Resolving reference
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8".

      INFO: Resolving reference for ProcessorArchitecture x86.

            INFO: Resolving reference for culture Neutral.

                  INFO: Applying Binding Policy.

                        INFO: No publisher policy found.

                        INFO: No binding policy redirect found.

                  INFO: Begin assembly probing.

                        INFO: Did not find the assembly in WinSxS.

                        INFO: Attempt to probe manifest at
C:\Windows\assembly\GAC_32\Microsoft.VC90.CRT\9.0.21022.8__1fc8b3b9a1e18e3b\
Microsoft.VC90.CRT.DLL.

                        INFO: Attempt to probe manifest at
C:\gdalwin32-1.6\bin\Microsoft.VC90.CRT.DLL.

                        INFO: Attempt to probe manifest at
C:\gdalwin32-1.6\bin\Microsoft.VC90.CRT.MANIFEST.

                        INFO: Attempt to probe manifest at
C:\gdalwin32-1.6\bin\Microsoft.VC90.CRT\Microsoft.VC90.CRT.DLL.

                        INFO: Attempt to probe manifest at
C:\gdalwin32-1.6\bin\Microsoft.VC90.CRT\Microsoft.VC90.CRT.MANIFEST.

                        INFO: Did not find manifest for culture Neutral.

                  INFO: End assembly probing.

      ERROR: Cannot resolve reference
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8".

ERROR: Activation Context generation failed.

End Activation Context Generation.

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jason Roberts
Sent: Monday, December 15, 2008 5:12 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

 

Greetings GDAL developers,

 

I cannot get GDAL 1.6.0 to work on Windows Vista SP1. It appears that there
is a DLL Hell problem that does not appear on XP SP3, at least with my
machines.

 

Repro steps on Vista SP1:

 

1.    Download
ftp://ftp.remotesensing.org/gdal/win32/1.6/gdalwin32exe160.zip and
decompress to C:\gdalwin32-1.6

2.    From cmd.exe shell:

a.    SET PATH=C:\gdalwin32-1.6\bin;%PATH%

b.    SET GDAL_DATA=C:\gdalwin32-1.6\data

c.    C:\gdalwin32-1.6\bin\gdalinfo.exe

3.    Receive the following dialog box:

 

---------------------------

gdalinfo.exe - Application Error

---------------------------

The application failed to initialize properly (0xc0150002). Click OK to
terminate the application. 

---------------------------

OK   

---------------------------

 

The event log contains a new event: Source = SideBySide, Event ID = 33,
Description = Activation context generation failed for
"C:\gdalwin32-1.6\bin\geos_c.dll". Dependent Assembly
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8" could not be found. Please use
sxstrace.exe for detailed diagnosis.

 

Running depends.exe on C:\gdalwin32-1.6\bin\geos_c.dll gives the error "
Error: The Side-by-Side configuration information for
"c:\gdalwin32-1.6\bin\GEOS_C.DLL" contains errors. The application has
failed to start because its side-by-side configuration is incorrect. Please
see the application event log for more detail (14001)." Looking in the event
log again, we have another instance of the event above.

 

This looks like a classic DLL Hell problem, with Vista thrown in just to
make it more confusing. Please let me know if I've somehow messed up the
install or am missing something obvious. Apologies if I am.

 

I will investigate a bit further, but not being a GDAL developer, I do not
know which compilers you use, how you intend to link to MSVCRT, etc. If the
GDAL "build guy" could look at this, I'd really appreciate it. If you send
private builds, I can try them out with quick turnaround.

 

Thanks for your help,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081215/2709481a/attachment-0001.html
From Michael.Smith at maine.gov  Mon Dec 15 17:03:49 2008
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Mon Dec 15 17:21:09 2008
Subject: [gdal-dev] Border slivers and JPEG2000 compression
Message-ID: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>

I have several orthophotos which are TIFFs, and they align with the USGS
quadrangle corners, which means they are rotated slightly, leaving small
uneven slivers along the edges where pixel value is 0 (the data for
these are available from adjacent tiles).  All the pixels inside the
'real' area of the photo are value > 0.

This is no problem with TIFFs, as the 0 can be turned off in
applications such as ArcGIS or serving them out via MapServer WMS.  But
when I convert to JPEG2000 (using Kakadu), the edge pixels are
interpolated to different values, typically something like 0, 1, 2, or
3.  Thus I can't just filter them out. Also inside the photo, sometimes
very dark pixels (which should really be value 2, 3, etc) are converted
to value 0.  Thus they show up as 'holes' in applications when pixel
value 0 is filtered out.

What I want to do is simply show a bunch of JP2 tiles, with the border
pixels staying as value 0, and no other pixels having value 0.

I have tried a couple approaches, including 

gdal_translate -a_nodata 0   (the border pixels still have values > 0)

gdal_rasterize -i -burn 0    (won't write JP2KAK)

Surely I'm not the first to try this, but I can't find the right steps
on the web.  Any suggestions would be appreciated.

**********
Michael Smith
State GIS Manager
Maine Office of GIS 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081215/496ba2a7/attachment.html
From philippe at cowpig.ca  Mon Dec 15 17:40:37 2008
From: philippe at cowpig.ca (Philippe Vachon)
Date: Mon Dec 15 17:40:44 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
Message-ID: <20081215224037.GA9040@cowpig.ca>

Hi Jason,

I just tried to reproduce this, but wasn't able to; perhaps you don't
have the latest version of the C Runtimes installed. It looks as though
GEOS_C.DLL has correct manifest data embedded for the VC90 runtime
(Visual Studio 2008) so as long as you have the correct assembly
installed for MSVC it should run.

I believe installing the redistributable components
(http://www.microsoft.com/downloads/details.aspx?familyid=A5C84275-3B97-4AB7-A40D-3802B2AF5FC2&displaylang=en)
should be sufficient to get the proper versions of the assemblies
installed.

Cheers,
Phil

On Mon, Dec 15, 2008 at 05:12:02PM -0500, Jason Roberts wrote:
>    Greetings GDAL developers,
> 
>     
> 
>    I cannot get GDAL 1.6.0 to work on Windows Vista SP1. It appears that
>    there is a DLL Hell problem that does not appear on XP SP3, at least with
>    my machines.
> 
>     
> 
>    Repro steps on Vista SP1:
> 
>     
> 
>    1.    Download
>    ftp://ftp.remotesensing.org/gdal/win32/1.6/gdalwin32exe160.zip and
>    decompress to C:\gdalwin32-1.6
> 
>    2.    From cmd.exe shell:
> 
>    a.    SET PATH=C:\gdalwin32-1.6\bin;%PATH%
> 
>    b.    SET GDAL_DATA=C:\gdalwin32-1.6\data
> 
>    c.    C:\gdalwin32-1.6\bin\gdalinfo.exe
> 
>    3.    Receive the following dialog box:
> 
>     
> 
>    ---------------------------
> 
>    gdalinfo.exe - Application Error
> 
>    ---------------------------
> 
>    The application failed to initialize properly (0xc0150002). Click OK to
>    terminate the application.
> 
>    ---------------------------
> 
>    OK  
> 
>    ---------------------------
> 
>     
> 
>    The event log contains a new event: Source = SideBySide, Event ID = 33,
>    Description = Activation context generation failed for
>    "C:\gdalwin32-1.6\bin\geos_c.dll". Dependent Assembly
>    Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8"
>    could not be found. Please use sxstrace.exe for detailed diagnosis.
> 
>     
> 
>    Running depends.exe on C:\gdalwin32-1.6\bin\geos_c.dll gives the error "
>    Error: The Side-by-Side configuration information for
>    "c:\gdalwin32-1.6\bin\GEOS_C.DLL" contains errors. The application has
>    failed to start because its side-by-side configuration is incorrect.
>    Please see the application event log for more detail (14001)." Looking in
>    the event log again, we have another instance of the event above.
> 
>     
> 
>    This looks like a classic DLL Hell problem, with Vista thrown in just to
>    make it more confusing. Please let me know if I've somehow messed up the
>    install or am missing something obvious. Apologies if I am...
> 
>     
> 
>    I will investigate a bit further, but not being a GDAL developer, I do not
>    know which compilers you use, how you intend to link to MSVCRT, etc. If
>    the GDAL "build guy" could look at this, I'd really appreciate it. If you
>    send private builds, I can try them out with quick turnaround.
> 
>     
> 
>    Thanks for your help,
> 
>     
> 
>    Jason
> 
>     

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jason.roberts at duke.edu  Mon Dec 15 17:49:17 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec 15 17:49:27 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <20081215224037.GA9040@cowpig.ca>
References: <20081215224037.GA9040@cowpig.ca>
Message-ID: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>

Phil,

Thanks for the suggestion. I suspect it will work. My XP SP3 machine has
VC90 entries in C:\Windows\WinSxS, while my Vista SP1 machine does not.

But if GDAL requires the user to install the VC++ redistributable first, why
is GDAL redisting the DLLs (e.g. msvcr90.dll) in the GDAL\bin directory? I
suspect the intent was to override sxs in the build process, or specify a
publisher policy, or something, so that the user does not have to install
the redistributable themselves. The idea being that GDAL would work like
old-school, pre-sxs applications, where you just have to have the right DLL
versions in the same directory as your .exe.

Was that not the intent? Are users indeed expected to install that
redistributable first?

Thanks,

Jason

-----Original Message-----
From: Philippe Vachon [mailto:philippe@cowpig.ca] 
Sent: Monday, December 15, 2008 5:41 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

Hi Jason,

I just tried to reproduce this, but wasn't able to; perhaps you don't
have the latest version of the C Runtimes installed. It looks as though
GEOS_C.DLL has correct manifest data embedded for the VC90 runtime
(Visual Studio 2008) so as long as you have the correct assembly
installed for MSVC it should run.

I believe installing the redistributable components
(http://www.microsoft.com/downloads/details.aspx?familyid=A5C84275-3B97-4AB7
-A40D-3802B2AF5FC2&displaylang=en)
should be sufficient to get the proper versions of the assemblies
installed.

Cheers,
Phil

On Mon, Dec 15, 2008 at 05:12:02PM -0500, Jason Roberts wrote:
>    Greetings GDAL developers,
> 
>     
> 
>    I cannot get GDAL 1.6.0 to work on Windows Vista SP1. It appears that
>    there is a DLL Hell problem that does not appear on XP SP3, at least
with
>    my machines.
> 
>     
> 
>    Repro steps on Vista SP1:
> 
>     
> 
>    1.    Download
>    ftp://ftp.remotesensing.org/gdal/win32/1.6/gdalwin32exe160.zip and
>    decompress to C:\gdalwin32-1.6
> 
>    2.    From cmd.exe shell:
> 
>    a.    SET PATH=C:\gdalwin32-1.6\bin;%PATH%
> 
>    b.    SET GDAL_DATA=C:\gdalwin32-1.6\data
> 
>    c.    C:\gdalwin32-1.6\bin\gdalinfo.exe
> 
>    3.    Receive the following dialog box:
> 
>     
> 
>    ---------------------------
> 
>    gdalinfo.exe - Application Error
> 
>    ---------------------------
> 
>    The application failed to initialize properly (0xc0150002). Click OK to
>    terminate the application.
> 
>    ---------------------------
> 
>    OK  
> 
>    ---------------------------
> 
>     
> 
>    The event log contains a new event: Source = SideBySide, Event ID = 33,
>    Description = Activation context generation failed for
>    "C:\gdalwin32-1.6\bin\geos_c.dll". Dependent Assembly
>
Microsoft.VC90.CRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18
e3b",type="win32",version="9.0.21022.8"
>    could not be found. Please use sxstrace.exe for detailed diagnosis.
> 
>     
> 
>    Running depends.exe on C:\gdalwin32-1.6\bin\geos_c.dll gives the error
"
>    Error: The Side-by-Side configuration information for
>    "c:\gdalwin32-1.6\bin\GEOS_C.DLL" contains errors. The application has
>    failed to start because its side-by-side configuration is incorrect.
>    Please see the application event log for more detail (14001)." Looking
in
>    the event log again, we have another instance of the event above.
> 
>     
> 
>    This looks like a classic DLL Hell problem, with Vista thrown in just
to
>    make it more confusing. Please let me know if I've somehow messed up
the
>    install or am missing something obvious. Apologies if I am...
> 
>     
> 
>    I will investigate a bit further, but not being a GDAL developer, I do
not
>    know which compilers you use, how you intend to link to MSVCRT, etc. If
>    the GDAL "build guy" could look at this, I'd really appreciate it. If
you
>    send private builds, I can try them out with quick turnaround.
> 
>     
> 
>    Thanks for your help,
> 
>     
> 
>    Jason
> 
>     

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Mon Dec 15 19:42:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 15 19:42:33 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
References: <20081215224037.GA9040@cowpig.ca>
	<006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
Message-ID: <4946F968.1010009@pobox.com>

Jason Roberts wrote:
> Phil,
> 
> Thanks for the suggestion. I suspect it will work. My XP SP3 machine has
> VC90 entries in C:\Windows\WinSxS, while my Vista SP1 machine does not.
> 
> But if GDAL requires the user to install the VC++ redistributable first, why
> is GDAL redisting the DLLs (e.g. msvcr90.dll) in the GDAL\bin directory? I
> suspect the intent was to override sxs in the build process, or specify a
> publisher policy, or something, so that the user does not have to install
> the redistributable themselves. The idea being that GDAL would work like
> old-school, pre-sxs applications, where you just have to have the right DLL
> versions in the same directory as your .exe.
> 
> Was that not the intent? Are users indeed expected to install that
> redistributable first?

Jason,

My fault.  The package includes the required VC9 DLLs, but I neglected
to include the manifest for them (Microsoft.VC90.CRT.manifest).  I
have repackaged the kit with that manifest, and I'd appreciate your testing
it.

   http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Mon Dec 15 21:18:28 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec 15 21:18:39 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <4946F968.1010009@pobox.com>
References: <20081215224037.GA9040@cowpig.ca>
	<006701c95f07$5cddcf60$16996e20$%roberts@duke.edu>
	<4946F968.1010009@pobox.com>
Message-ID: <007b01c95f24$95f829e0$c1e87da0$@roberts@duke.edu>

No worries. The ZIP you provided appears to work fine. I uninstalled the VC
redistributable and verified that the old package failed again, and then
tried the new one, which worked. I'll let you know if I notice anything
else.

Thanks for the quick action, guys!

Jason

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, December 15, 2008 7:42 PM
To: Jason Roberts
Cc: 'Philippe Vachon'; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

Jason Roberts wrote:
> Phil,
> 
> Thanks for the suggestion. I suspect it will work. My XP SP3 machine has
> VC90 entries in C:\Windows\WinSxS, while my Vista SP1 machine does not.
> 
> But if GDAL requires the user to install the VC++ redistributable first,
why
> is GDAL redisting the DLLs (e.g. msvcr90.dll) in the GDAL\bin directory? I
> suspect the intent was to override sxs in the build process, or specify a
> publisher policy, or something, so that the user does not have to install
> the redistributable themselves. The idea being that GDAL would work like
> old-school, pre-sxs applications, where you just have to have the right
DLL
> versions in the same directory as your .exe.
> 
> Was that not the intent? Are users indeed expected to install that
> redistributable first?

Jason,

My fault.  The package includes the required VC9 DLLs, but I neglected
to include the manifest for them (Microsoft.VC90.CRT.manifest).  I
have repackaged the kit with that manifest, and I'd appreciate your testing
it.

   http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From chapmanm at pixia.com  Tue Dec 16 01:56:30 2008
From: chapmanm at pixia.com (Martin Chapman)
Date: Tue Dec 16 02:33:00 2008
Subject: [gdal-dev] WINCE / MD redefinition; different linkage problem
Message-ID: <000001c95f4b$733dddb0$59b99910$@com>

All,

 

I'm using GDAL on windows mobile 6.0 and when I set the runtime switch to be
/MD I get the following errors.  /MT works fine:

 

1>ogrfeaturequery.cpp

1>C:\Program Files\Windows Mobile 6 SDK\PocketPC\include\ARMV4I\time.h(200)
: error C2375: 'wceex_ctime' : redefinition; different linkage

1>        C:\dev\wcelibcex-1.0\src\wce_time.h(130) : see declaration of
'wceex_ctime'

1>C:\Program Files\Windows Mobile 6 SDK\PocketPC\include\ARMV4I\time.h(201)
: error C2375: 'wce_clock' : redefinition; different linkage

1>        C:\dev\wcelibcex-1.0\src\wce_time.h(155) : see declaration of
'wce_clock'

1>C:\Program Files\Windows Mobile 6 SDK\PocketPC\include\ARMV4I\time.h(207)
: error C2375: 'wceex_gmtime' : redefinition; different linkage

1>        C:\dev\wcelibcex-1.0\src\wce_time.h(128) : see declaration of
'wceex_gmtime'

1>C:\Program Files\Windows Mobile 6 SDK\PocketPC\include\ARMV4I\time.h(208)
: error C2375: 'wceex_localtime' : redefinition; different linkage

1>        C:\dev\wcelibcex-1.0\src\wce_time.h(127) : see declaration of
'wceex_localtime'

1>C:\Program Files\Windows Mobile 6 SDK\PocketPC\include\ARMV4I\time.h(214)
: error C2375: 'wceex_time' : redefinition; different linkage

1>            C:\dev\wcelibcex-1.0\src\wce_time.h(123) : see declaration of
'wceex_time'

 

Can anyone help me out with this problem?

 

Best regards,

Martin

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081215/a2ee3079/attachment-0001.html
From Jukka.Rahkonen at mmmtike.fi  Tue Dec 16 06:14:02 2008
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Dec 16 06:14:05 2008
Subject: [gdal-dev] Gdaltindex
In-Reply-To: <200812151906.43159.even.rouault@mines-paris.org>
Message-ID: <CC197224AC75CE4DB23F739B16891B86F7318C@tikka.haapa.mmm.fi>

Hi,

You are right, images that are told to be skipped are really skipped and I have
nasty holes in tileindex in that place. Behaviour relates somehow to where I run 
the command. If I run gdalindex from the same directory where the images are it
goes through OK.  Even if I still give the full path to images, e.g.

G:\Data\Shares\Ilmakuva2\Ilmakuvat\M059_WMS>gdaltindex test.shp
G:\Data\Shares\Ilmakuva2\Ilmakuvat\M059_WMS\*.tif

That one works, but if I run the same command from some directory on D: disk
it fails with some images.  This is server machine and D: is a partion on 
system disk. G: is some SCSI or PATA disk unit, I am not sure. Perhaps that is
part of the problem. I can repeat the error and it happens with just downloaded
FWTools 2.2.8 as well.

-Jukka Rahkonen- 

> -----Alkuper?inen viesti-----
> L?hett?j?: Even Rouault [mailto:even.rouault@mines-paris.org] 
> L?hetetty: 15. joulukuuta 2008 20:07
> Vastaanottaja: Rahkonen Jukka
> Kopio: gdal-dev@lists.osgeo.org
> Aihe: Re: [gdal-dev] Gdaltindex
> 
> Hi,
> 
> the behaviour you describe is a bit weird. When you get the 
> error message "Unable to open 'foo', skipping", there's no 
> way in the source code of gdaltindex.c that 'foo' is added to 
> the tile index (or I should reopen my C books ;-)). Are you 
> sure the file was not already in the tile index before 
> running this command ? That's the only explanation I have for 
> such a behaviour. But I don't understand though why 
> gdaltindex wouldn't manage to open it, but gdalinfo would succeed.
> 
> Then, the warnings about .tif.ovr being not recognized can 
> probably explained by the fact that when you GDALOpen a .tif 
> file, it will also try to open the related overview file. It 
> looks like those overviews are corrupted. 
> 
> Best regards,
> Even
> 
> Le Monday 15 December 2008 14:15:02, vous avez ?crit?:
> > Hi,
> >
> > I was creating tileindexes with gdaltindex from FWTools 2.2.6 on 
> > Windows and I received strange looking error messages if I had 
> > external overviews in directories. So far it looks like the 
> resulting 
> > shapefile is OK and it has polygons for all image files. However, 
> > while it is somehow understandable to get error messages about 
> > external overviews (named
> > .tif.ovr) gdaltindex gives also errors about some .tif files. As I 
> > said, tileindex shapefiles seem to be OK despite of all the 
> error messages.
> >
> > My command line was like:
> > gdaltindex M105_WMS.shp	
> G:\Data\Shares\Ilmakuva2\Ilmakuvat\M105_WMS\*.tif
> >
> > A few examples of the error messages follow with couple of 
> my comments 
> > marked with ***
> >
> >   Unable to open
> > G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114107D.tif, skipping.
> >
> > *** This file exists, it is OK for gdalinfo, and it is 
> included in the 
> > resulting tileindex so it was not skipped really.
> >
> >   ERROR 4:
> > `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114111C.tif.ovr'
> > not recognised as a supported
> > file format.
> >
> > *** Perhaps external overview mechanism for tiff files have made it 
> > necessary to make program to understand that *.tif should 
> not include 
> > *.tif.ovr files?
> >
> > ERROR 1:
> > TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > 105_WMS\FMI_2007_M105_TM35_114302D.tif.ovr:
> > Can not read TIFF directory count
> > ERROR 1: TIFFReadDirectory:
> > Failed to read directory at offset 123088580 ERROR 1:
> > TIFFFetchDirectory:G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114303D.tif.ovr:
> > Can not read  TIFF directory count
> > ERROR 1: TIFFReadDirectory:
> > Failed to read directory at offset 123088580 ERROR 4:
> > `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114305B.tif'
> >  not recognised as a supported file
> >  format.
> >
> > Unable to open
> > G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114305B.tif,
> > skipping.
> > ERROR 4:
> > `G:\Data\Shares\Ilmakuva2\Ilmakuvat\
> > M105_WMS\FMI_2007_M105_TM35_114306A.tif'
> > not recognised as a supported file
> >  format.
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
From mo at discoveraai.com  Tue Dec 16 10:00:38 2008
From: mo at discoveraai.com (Mo Wang)
Date: Tue Dec 16 10:01:42 2008
Subject: [gdal-dev] What is the meaning of the message from gdalinfo 
Message-ID: <9E8339A1A958CA43851FF336135F43ADD2508B@admin.discover-aai.office>

Hi all,

 

I ran gdalinfo (both gdal 1.5.2 and gdal 1.6.0) on a nitf image and got
the following message:

 

gdalinfo caf_08mar12.ntf

ERROR 4: 'J2K_SUBFILE:3935,115450995,caf_08mar12.ntf' does not exist in
the file system, and is not recognised as a supported dataset name.

ERROR 1: Unable to open JPEG2000 image within NITF file.

Is the JP2KAK driver available?

gdalinfo failed - unable to open 'caf_08mar12.ntf'.

 

What is the meaning of the message (especially ERROR 4)? Thank you in
advance for taking time to answer.

 

 

Mo Wang

 

Applied Analysis Inc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081216/e30b9614/attachment.html
From warmerdam at pobox.com  Tue Dec 16 11:20:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 11:20:33 2008
Subject: [gdal-dev] What is the meaning of the message from gdalinfo
In-Reply-To: <9E8339A1A958CA43851FF336135F43ADD2508B@admin.discover-aai.office>
References: <9E8339A1A958CA43851FF336135F43ADD2508B@admin.discover-aai.office>
Message-ID: <4947D53C.2040009@pobox.com>

Mo Wang wrote:
> Hi all,
> 
>  
> 
> I ran gdalinfo (both gdal 1.5.2 and gdal 1.6.0) on a nitf image and got 
> the following message:
> 
>  
> 
> gdalinfo caf_08mar12.ntf
> 
> ERROR 4: ?J2K_SUBFILE:3935,115450995,caf_08mar12.ntf? does not exist in 
> the file system, and is not recognised as a supported dataset name.
> 
> ERROR 1: Unable to open JPEG2000 image within NITF file.
> 
> Is the JP2KAK driver available?
> 
> gdalinfo failed ? unable to open ?caf_08mar12.ntf?.
> 
>  
> 
> What is the meaning of the message (especially ERROR 4)? Thank you in 
> advance for taking time to answer.

Mo,

ERROR 4 maps to "CPLE_OpenFailed" as defined in gdal/port/cpl_error.h.

The error basically means that your NITF file contains a JPEG2000 compressed
image so the NITF driver attempted to open that as a subdataset using the
specal J2K_SUBFILE mechanism but this failed.  Mostly likely it failed
because you do not have JPEG2000 support built into your GDAL library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mo at discoveraai.com  Tue Dec 16 11:34:06 2008
From: mo at discoveraai.com (Mo Wang)
Date: Tue Dec 16 11:34:09 2008
Subject: [gdal-dev] What is the meaning of the message from gdalinfo
In-Reply-To: <4947D53C.2040009@pobox.com>
References: <9E8339A1A958CA43851FF336135F43ADD2508B@admin.discover-aai.office>
	<4947D53C.2040009@pobox.com>
Message-ID: <9E8339A1A958CA43851FF336135F43ADD2509D@admin.discover-aai.office>

Frank,

I have built Jasper JPEG2000. And my question was what
'J2K_SUBFILE:3935,115450995,caf_08mar12.ntf' is. My input file name was
caf_08mar12.ntf. It seems wants to tell me something: why J2K_SUBFILE?
And what are those two numbers (3935 and 115450995) for? Thanks.

Mo

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, December 16, 2008 11:20 AM
To: Mo Wang
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] What is the meaning of the message from gdalinfo

Mo Wang wrote:
> Hi all,
> 
>  
> 
> I ran gdalinfo (both gdal 1.5.2 and gdal 1.6.0) on a nitf image and
got 
> the following message:
> 
>  
> 
> gdalinfo caf_08mar12.ntf
> 
> ERROR 4: 'J2K_SUBFILE:3935,115450995,caf_08mar12.ntf' does not exist
in 
> the file system, and is not recognised as a supported dataset name.
> 
> ERROR 1: Unable to open JPEG2000 image within NITF file.
> 
> Is the JP2KAK driver available?
> 
> gdalinfo failed - unable to open 'caf_08mar12.ntf'.
> 
>  
> 
> What is the meaning of the message (especially ERROR 4)? Thank you in 
> advance for taking time to answer.

Mo,

ERROR 4 maps to "CPLE_OpenFailed" as defined in gdal/port/cpl_error.h.

The error basically means that your NITF file contains a JPEG2000
compressed
image so the NITF driver attempted to open that as a subdataset using
the
specal J2K_SUBFILE mechanism but this failed.  Mostly likely it failed
because you do not have JPEG2000 support built into your GDAL library.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Dec 16 11:47:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 11:47:51 2008
Subject: [gdal-dev] What is the meaning of the message from gdalinfo
In-Reply-To: <9E8339A1A958CA43851FF336135F43ADD2509D@admin.discover-aai.office>
References: <9E8339A1A958CA43851FF336135F43ADD2508B@admin.discover-aai.office>
	<4947D53C.2040009@pobox.com>
	<9E8339A1A958CA43851FF336135F43ADD2509D@admin.discover-aai.office>
Message-ID: <4947DBA6.6030903@pobox.com>

Mo Wang wrote:
> Frank,
> 
> I have built Jasper JPEG2000. And my question was what
> 'J2K_SUBFILE:3935,115450995,caf_08mar12.ntf' is. My input file name was
> caf_08mar12.ntf. It seems wants to tell me something: why J2K_SUBFILE?
> And what are those two numbers (3935 and 115450995) for? Thanks.

Mo,

The Jasper JPEG2000 driver does not provide support for J2K_SUBFILE
access.  I believe it is provided by the JP2ECW, JP2MRSID and JP2KAK
driver (well I'm positive at least about the JP2KAK driver).

The 3935 is the byte offset to the jpeg2000 data stream within the
caf_08mar12.ntf file.  115450995 is the size of the jpeg2000 data
stream in bytes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From cjanssen at iavo-rs.com  Tue Dec 16 11:18:18 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Tue Dec 16 11:48:21 2008
Subject: [gdal-dev] NITF Header data
Message-ID: <1B52213F-C054-4E85-BF48-68B069E24844@iavo-rs.com>

Does anyone know if it is possible to access any more of the NITF header data than what is currently listed in the GDAL dataset metadata? There are a number of fields that I have noticed missing, namely ICORDS & IGEOLO that I could really use. I realize that these are image subheader components but it would seem to make sense that a GDAL dataset represents a single NITF subimage and that it would contain the subimage specific metadata. Any help is greatly appreciated, thanks.

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081216/df74018d/attachment.html
From warmerdam at pobox.com  Tue Dec 16 12:01:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 12:01:24 2008
Subject: [gdal-dev] NITF Header data
In-Reply-To: <1B52213F-C054-4E85-BF48-68B069E24844@iavo-rs.com>
References: <1B52213F-C054-4E85-BF48-68B069E24844@iavo-rs.com>
Message-ID: <4947DED1.6090304@pobox.com>

Christiaan Janssen wrote:
> Does anyone know if it is possible to access any more of the NITF 
> header data than what is currently listed in the GDAL dataset metadata? 
> There are a number of fields that I have noticed missing, namely ICORDS 
> & IGEOLO that I could really use. I realize that these are image 
> subheader components but it would seem to make sense that a GDAL dataset 
> represents a single NITF subimage and that it would contain the subimage 
> specific metadata. Any help is greatly appreciated, thanks.

Christiaan,

The IGEOLO and ICORDS data are not normally returned as NITF specific
metadata because they are transformed into a generic geotransform and
coordinate system definition.

If it is particularly useful, they could also be returned in raw form as
metadata items.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Tue Dec 16 13:50:01 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Dec 16 13:50:06 2008
Subject: [gdal-dev] Border slivers and JPEG2000 compression
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <4947F859.40605@gov.yk.ca>

Hi Micheal, try the nearblack utility (which is a relatively new 
addition): http://www.gdal.org/nearblack.html

"This utility will scan an image and try to set all pixels that are 
nearly black (or nearly white) around the collar to exactly black (or 
white). This is often used to "fix up" lossy compressed airphotos so 
that color pixels can be treated as transparent when mosaicing."

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Smith, Michael wrote:
> I have several orthophotos which are TIFFs, and they align with the USGS 
> quadrangle corners, which means they are rotated slightly, leaving small 
> uneven slivers along the edges where pixel value is 0 (the data for 
> these are available from adjacent tiles).  All the pixels inside the 
> 'real' area of the photo are value > 0.
> 
> This is no problem with TIFFs, as the 0 can be turned off in 
> applications such as ArcGIS or serving them out via MapServer WMS.  But 
> when I convert to JPEG2000 (using Kakadu), the edge pixels are 
> interpolated to different values, typically something like 0, 1, 2, or 
> 3.  Thus I can't just filter them out. Also inside the photo, sometimes 
> very dark pixels (which should really be value 2, 3, etc) are converted 
> to value 0.  Thus they show up as 'holes' in applications when pixel 
> value 0 is filtered out.
> 
> What I want to do is simply show a bunch of JP2 tiles, with the border 
> pixels staying as value 0, and no other pixels having value 0.
> 
> I have tried a couple approaches, including
> 
> gdal_translate -a_nodata 0   (the border pixels still have values > 0)
> 
> gdal_rasterize -i -burn 0    (won't write JP2KAK)
> 
> Surely I'm not the first to try this, but I can't find the right steps 
> on the web.  Any suggestions would be appreciated.
> 
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From bclay at ball.com  Tue Dec 16 14:39:50 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Dec 16 14:40:17 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <4946F968.1010009@pobox.com>
References: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
	<4946F968.1010009@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>


Frank:
  What is the secret to getting GDAL to build this way?  I have Visual
Studio 2005 and have not been able to get it to run.  The zip file you
posted works fine on my system (Vista 64 Bit) but it does not include
the csharp files so I have to build.

I have tried building with the makefile.vc file and with the solution
file.
In both cases it compiles fine but won't run.  I get an error popup when
I try to run ogrinfo that says

 "An application has made an attempt to load the C runtime library
without using a manifest.  This is an unsupported way to load Visual
Studio C++ libraries" etc.


Bruce


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, December 15, 2008 7:42 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

Jason Roberts wrote:
> Phil,
> 
> Thanks for the suggestion. I suspect it will work. My XP SP3 machine
has
> VC90 entries in C:\Windows\WinSxS, while my Vista SP1 machine does
not.
> 
> But if GDAL requires the user to install the VC++ redistributable
first, why
> is GDAL redisting the DLLs (e.g. msvcr90.dll) in the GDAL\bin
directory? I
> suspect the intent was to override sxs in the build process, or
specify a
> publisher policy, or something, so that the user does not have to
install
> the redistributable themselves. The idea being that GDAL would work
like
> old-school, pre-sxs applications, where you just have to have the
right DLL
> versions in the same directory as your .exe.
> 
> Was that not the intent? Are users indeed expected to install that
> redistributable first?

Jason,

My fault.  The package includes the required VC9 DLLs, but I neglected
to include the manifest for them (Microsoft.VC90.CRT.manifest).  I
have repackaged the kit with that manifest, and I'd appreciate your
testing
it.

   http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From joelodom at gmail.com  Tue Dec 16 14:49:44 2008
From: joelodom at gmail.com (Joel Odom)
Date: Tue Dec 16 14:49:47 2008
Subject: [gdal-dev] Coordinate Transformation Question
Message-ID: <d422b4500812161149i4136459w73875b2121210da2@mail.gmail.com>

Is it possible to transform between a Lambert projection (NAD83 datum)
and WGS84 geographic?  I'm trying the following, but poCT is null:

OGRSpatialReference oSRS;
if (oSRS.importFromWkt((char**)&projectionRef) != OGRERR_NONE)
  //...
OGRSpatialReference wgs84;
wgs84.SetWellKnownGeogCS("WGS84");
OGRCoordinateTransformation *poCT =
OGRCreateCoordinateTransformation(&oSRS, &wgs84);


In this case oSRS is the Lambert Conformal / NAD83.  Thanks for any help.


-- 
http://giscoder.blogspot.com/
From warmerdam at pobox.com  Tue Dec 16 14:56:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 14:56:43 2008
Subject: [gdal-dev] Coordinate Transformation Question
In-Reply-To: <d422b4500812161149i4136459w73875b2121210da2@mail.gmail.com>
References: <d422b4500812161149i4136459w73875b2121210da2@mail.gmail.com>
Message-ID: <494807E7.2020407@pobox.com>

Joel Odom wrote:
> Is it possible to transform between a Lambert projection (NAD83 datum)
> and WGS84 geographic?  I'm trying the following, but poCT is null:
> 
> OGRSpatialReference oSRS;
> if (oSRS.importFromWkt((char**)&projectionRef) != OGRERR_NONE)
>   //...
> OGRSpatialReference wgs84;
> wgs84.SetWellKnownGeogCS("WGS84");
> OGRCoordinateTransformation *poCT =
> OGRCreateCoordinateTransformation(&oSRS, &wgs84);
> 
> 
> In this case oSRS is the Lambert Conformal / NAD83.  Thanks for any help.

Joel,

Yes, this should work fine assuming thereis nothing funky about your
LCC projection definition.  Note that OGR/PROJ.4 consider NAD83 and WGS84
to be equivelent datums for transformation purposes.

If you post your projection string for the LCC I could try it here for
comparison.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Dec 16 15:13:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 15:13:35 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>
References: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
	<4946F968.1010009@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <49480BDA.3030204@pobox.com>

Clay, Bruce wrote:
> Frank:
>   What is the secret to getting GDAL to build this way?  I have Visual
> Studio 2005 and have not been able to get it to run.  The zip file you
> posted works fine on my system (Vista 64 Bit) but it does not include
> the csharp files so I have to build.
> 
> I have tried building with the makefile.vc file and with the solution
> file.
> In both cases it compiles fine but won't run.  I get an error popup when
> I try to run ogrinfo that says
> 
>  "An application has made an attempt to load the C runtime library
> without using a manifest.  This is an unsupported way to load Visual
> Studio C++ libraries" etc.

Bruce,

I'm not sure what issue(s) you are running into exactly.  Is this just
running something like gdalinfo that you build against the GDAL16.DLL
that you built?

The only "special" thing I do for the GEOS part of the build which I
build with visual studio 9 (aka 2008 express I think) was to ensure
I distributed the msvcp90.dll and msvcr90.dll along with the corresponding
Microsoft.VC90.CRS.manifest.

I think that Visual Studio 2005 is VC8, so there should be a corresponding
msvc{r,p}80.dll you would need with it, and perhaps a corresponding
manifest.  I haven't been using VS2005 much though so I'm not so sure.

These issues (needing a manifest) don't exist with older visual studio
versions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Tue Dec 16 15:36:11 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Dec 16 15:36:15 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <49480BDA.3030204@pobox.com>
References: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
	<4946F968.1010009@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>
	<49480BDA.3030204@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402ABE872@daytonmsg2k3.AERO.BALL.COM>

Frank:
  I am trying to run ogrinfo from the GDAL build app directory.  I did
not have a problem with this until my computer died and I had to get a
new one with you guessed it Vista.  It is a 64 bit system running 64 bit
Vista so that may be part of the problem.  

Did you build with the manifest as part of the build process or just add
it to the runtime directory?

Did you build the whole package with VS 2008 nor just the GEOS portion?

I have run into other problems on this computer mainly with drivers.  My
Microsoft finger print reader is not supported on 64 bit.  It makes me
wonder just what MS is thing some times, actually most of the time.
They keep changing things that don't help at all.

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, December 16, 2008 3:13 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

Clay, Bruce wrote:
> Frank:
>   What is the secret to getting GDAL to build this way?  I have Visual
> Studio 2005 and have not been able to get it to run.  The zip file you
> posted works fine on my system (Vista 64 Bit) but it does not include
> the csharp files so I have to build.
> 
> I have tried building with the makefile.vc file and with the solution
> file.
> In both cases it compiles fine but won't run.  I get an error popup
when
> I try to run ogrinfo that says
> 
>  "An application has made an attempt to load the C runtime library
> without using a manifest.  This is an unsupported way to load Visual
> Studio C++ libraries" etc.

Bruce,

I'm not sure what issue(s) you are running into exactly.  Is this just
running something like gdalinfo that you build against the GDAL16.DLL
that you built?

The only "special" thing I do for the GEOS part of the build which I
build with visual studio 9 (aka 2008 express I think) was to ensure
I distributed the msvcp90.dll and msvcr90.dll along with the
corresponding
Microsoft.VC90.CRS.manifest.

I think that Visual Studio 2005 is VC8, so there should be a
corresponding
msvc{r,p}80.dll you would need with it, and perhaps a corresponding
manifest.  I haven't been using VS2005 much though so I'm not so sure.

These issues (needing a manifest) don't exist with older visual studio
versions.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From warmerdam at pobox.com  Tue Dec 16 16:41:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 16 16:41:30 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402ABE872@daytonmsg2k3.AERO.BALL.COM>
References: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
	<4946F968.1010009@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>
	<49480BDA.3030204@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE872@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4948207A.3050002@pobox.com>

Clay, Bruce wrote:
> Frank:
>   I am trying to run ogrinfo from the GDAL build app directory.  I did
> not have a problem with this until my computer died and I had to get a
> new one with you guessed it Vista.  It is a 64 bit system running 64 bit
> Vista so that may be part of the problem.  
> 
> Did you build with the manifest as part of the build process or just add
> it to the runtime directory?

Bruce,

The Microsoft.VC90.CRS.manifest is part of the runtime, and I copy it from
the runtime directory (as well as the runtime DLLs).

The GDAL16.DLL and executables also all have manifests generated automatically
by VC, and the makefiles have an explicit step to embed the manifests into
the DLL and executables using the "mt" command.

eg.

ogrinfo.exe:	ogrinfo.cpp $(GDALLIB) $(XTRAOBJ)
	$(CC) $(CFLAGS) $(XTRAFLAGS) ogrinfo.cpp $(XTRAOBJ) $(LIBS) \
		/link $(LINKER_FLAGS)
	if exist $@.manifest mt -manifest $@.manifest -outputresource:$@;1
	

> Did you build the whole package with VS 2008 nor just the GEOS portion?

Only GEOS was built with VS2008.  The rest was built with VS2003.

> I have run into other problems on this computer mainly with drivers.  My
> Microsoft finger print reader is not supported on 64 bit.  It makes me
> wonder just what MS is thing some times, actually most of the time.
> They keep changing things that don't help at all.

I am sure they have good reasons for the things they do, but MS
improvements often just feel like churn to me.  All this manifest stuff
has certainly been a big hassle, breaking a reasonably understandable
model of how DLLs work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Tue Dec 16 18:53:05 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Dec 16 18:53:09 2008
Subject: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?
In-Reply-To: <4948207A.3050002@pobox.com>
References: <006701c95f07$5cddcf60$16996e20$@roberts@duke.edu>
	<4946F968.1010009@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE858@daytonmsg2k3.AERO.BALL.COM>
	<49480BDA.3030204@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABE872@daytonmsg2k3.AERO.BALL.COM>
	<4948207A.3050002@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402ABE8A0@daytonmsg2k3.AERO.BALL.COM>

Frank:
  Part of the problem seems to be in the debug version of GEOS.  I don't
know exactly where at this point.

When I use the geos_c.dll you posted ogrinfo works ok.  If I make a
release version of GEOS then it works but if I make a debug version I
get the error message.  I don't need the debug version of GEOS at this
point so I will continue with the release version.

That takes care of the C++ issues but the C# programs don't work on the
64 bit Vista system.  Everything works fine on our older systems running
XP

Thanks for your help

Bruce

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, December 16, 2008 4:41 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.6.0 DLL Hell problem on Windows Vista?

Clay, Bruce wrote:
> Frank:
>   I am trying to run ogrinfo from the GDAL build app directory.  I did
> not have a problem with this until my computer died and I had to get a
> new one with you guessed it Vista.  It is a 64 bit system running 64
bit

> Vista so that may be part of the problem.  
> 
> Did you build with the manifest as part of the build process or just
add
> it to the runtime directory?

Bruce,

The Microsoft.VC90.CRS.manifest is part of the runtime, and I copy it
from
the runtime directory (as well as the runtime DLLs).

The GDAL16.DLL and executables also all have manifests generated
automatically
by VC, and the makefiles have an explicit step to embed the manifests
into
the DLL and executables using the "mt" command.

eg.

ogrinfo.exe:	ogrinfo.cpp $(GDALLIB) $(XTRAOBJ)
	$(CC) $(CFLAGS) $(XTRAFLAGS) ogrinfo.cpp $(XTRAOBJ) $(LIBS) \
		/link $(LINKER_FLAGS)
	if exist $@.manifest mt -manifest $@.manifest
-outputresource:$@;1
	

> Did you build the whole package with VS 2008 nor just the GEOS
portion?

Only GEOS was built with VS2008.  The rest was built with VS2003.

> I have run into other problems on this computer mainly with drivers.
My
> Microsoft finger print reader is not supported on 64 bit.  It makes me
> wonder just what MS is thing some times, actually most of the time.
> They keep changing things that don't help at all.

I am sure they have good reasons for the things they do, but MS
improvements often just feel like churn to me.  All this manifest stuff
has certainly been a big hassle, breaking a reasonably understandable
model of how DLLs work.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From prairie99 at gmail.com  Wed Dec 17 02:23:10 2008
From: prairie99 at gmail.com (prairie Last)
Date: Wed Dec 17 02:23:14 2008
Subject: [gdal-dev] transform point problem using gdal 1.5 with osr
Message-ID: <f0c176350812162323l2b47772dudb95af85829f6e61@mail.gmail.com>

I am trying to tranform one coordinate system to another (wgs84 to utm).
Found one example on the internet (adapted a little). It got an error when I
try to run the program. Since I am new to GDAL, I cannot figure out how to
correct this. Please see the following program. I also tried to add one more
value to "res.ct.TransformPoint(lon, lat)", but it did not solve the
problem.  Any help or hint appreciated. I also attach the error to the end.

from osgeo import osr
import math
import pyproj

def UTMZone(lon, lat):
    return int((lon + 180) / 6) + 1
if __name__ == '__main__':
    lat = 41.395304
    lon = 73.310067

    wgs84 = osr.SpatialReference()
    utm = osr.SpatialReference()
    wgs84.ImportFromProj4("+proj=latlong +datum=WGS84")
    utm.ImportFromProj4("+proj=utm +zone="+str(UTMZone(lon,lat))+"
+datum=WGS84")
    ct = osr.CoordinateTransformation(wgs84,utm)
    res= ct.TransformPoint(lon, lat)
    print res





 Error Message:

Traceback (most recent call last):
  File "C:\Python25\trans.py", line 28, in <module>
    res= ct.TransformPoint(lon, lat)
  File "C:\Python25\lib\site-packages\osgeo\osr.py", line 602, in
TransformPoint
    return _osr.CoordinateTransformation_TransformPoint(*args)
NotImplementedError: Wrong number of arguments for overloaded function
'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    TransformPoint(double [3])
    TransformPoint(double [3],double,double,double)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/cf5859be/attachment.html
From joelodom at gmail.com  Wed Dec 17 08:10:11 2008
From: joelodom at gmail.com (Joel Odom)
Date: Wed Dec 17 08:10:14 2008
Subject: [gdal-dev] Coordinate Transformation Question
In-Reply-To: <49481043.5050803@pobox.com>
References: <d422b4500812161149i4136459w73875b2121210da2@mail.gmail.com>
	<494807E7.2020407@pobox.com>
	<d422b4500812161215k74e6b6f2xd3342dd23c834b5@mail.gmail.com>
	<49481043.5050803@pobox.com>
Message-ID: <d422b4500812170510h58047825h1610990ed5060523@mail.gmail.com>

Hi, Frank.  Sometimes I have to admit to idiocy.  Being new to OGR, I
didn't realize that the projection code was dependent on the proj
library.  Maybe I should have looked at my output where it said,
"ERROR 6: Unable to load PROJ.4 library (proj.dll), creation of
OGRCoordinateTransformation failed."

At any rate, it's working beautifully now that I've got the dll
installed.  Again, thanks for your help.





On Tue, Dec 16, 2008 at 3:32 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Joel Odom wrote:
>>
>> Thanks for checking it out, Frank.  Here is my full projection string:
>>
>> PROJCS[" Projection Name = Lambert Conformal Conic Units = meters
>> GeoTIFF Units =
>> meters",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
>>
>> 1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",38.66666666666667],PARAMETER["standard_parallel_2",33.33333333333336],PARAMETER["latitude_of_origin",34.10833333333333],PARAMETER["central_meridian",-84.50000000000003],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
>
> Joel,
>
> This works fine for me with the testepsg utility:
>
> WKT[test.wkt] =
> PROJCS[" Projection Name = Lambert Conformal Conic Units = meters GeoTIFF
> Units =meters",
>    GEOGCS["NAD83",
>        DATUM["North_American_Datum_1983",
>            SPHEROID["GRS1980",6378137,298.2572221010002,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6269"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433],
>        AUTHORITY["EPSG","4269"]],
>    PROJECTION["Lambert_Conformal_Conic_2SP"],
>    PARAMETER["standard_parallel_1",38.66666666666667],
>    PARAMETER["standard_parallel_2",33.33333333333336],
>    PARAMETER["latitude_of_origin",34.10833333333333],
>    PARAMETER["central_meridian",-84.50000000000003],
>    PARAMETER["false_easting",0],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]]]
>
> warmerda@gdal64[75]% testepsg -t test.wkt WGS84 100000 200000
> OGRCT: Source: +proj=lcc +lat_1=38.66666666666667 +lat_2=33.33333333333336
> +lat_0=34.10833333333333 +lon_0=-84.50000000000003 +x_0=0 +y_0=0
> +ellps=GRS80 +datum=NAD83 +units=m +no_defs
> OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
> (100000.000000,200000.000000,0.000000) -> (-83.390980,35.907560,0.000000)
>
> Actually, I neglected to ask before if you were confident you had
> PROJ.4 properly installed and findable by OGRCoordinateTransformation.
> If coordinate transformation *never* works then it is likely the PROJ
> DLL/sharedlib is not being found at runtime.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>



-- 
http://giscoder.blogspot.com/
From Shawn.Gong at drdc-rddc.gc.ca  Wed Dec 17 10:22:29 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Dec 17 10:20:59 2008
Subject: [gdal-dev] gdal 1.6 build on Windows problem
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E65C@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I tried to build gdal 1.6 on Windows XP using MS VC++ 6 and Python
2.5.2.
I had to make two changes for it to pass VC6 compiler:
(1) Replace "long long" with "__int64" in
gdal-1.6.0\frmts\gtiff\libtiff\tif_ojpeg.c
(2) edit gdal-1.6.0\frmts\grib\degrib18\degrib\fileendian.h so that 4
#include are outside of the extern "C"
(3) and HDF4.2r2 has many compiling errors. I had to use older version
HDF41r5

I then edited nmake.opt to change: GDAL_HOME, PYDIR, HDF4/5, PROJ,
HAVE_NUMPY.

gdal 1.6 seems to make ok. However when I use python "import gdal" It
said: "ImportError: No module named _gdal". But there is _gdal.dll in
local_install\pymod\

Is this gdal python binding problem?  

same import error occurred to others like _gtk.dll, _gv.dll,
_gtkmissing.dll.

thanks,
Shawn


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/258b0f37/attachment.html
From guanxiaoyu at gmail.com  Wed Dec 17 10:40:57 2008
From: guanxiaoyu at gmail.com (Xiaoyu Guan)
Date: Wed Dec 17 10:41:05 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
Message-ID: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>

Dear All:
I would like to use GDAL/OGR library for converting GML files to Shp files.
I have look around on internet. there are a lot of people use OGR2OGR
convert them. I have already try use ogr2ogr , convert gml to shp.
unfornately, the result is not what I expected. for example. I convert one
ploygon file, there are few attributes lost. So I would like to know how to
write a python script to done the job.
Is possbile that somebody give me some hints? for example how many steps to
slove the problems? what is the data flow?



Thanks in advance
All the best


Xiaoyu
ps. If you don't understand my poor english, I am sorry that, please, do not
hesitate to send me a email, I will try my best to explain again.
-- 
Xiaoyu Guan (Sam)
http://guanxiaoyu.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/bb05c41f/attachment-0001.html
From grevedan at hotmail.com  Wed Dec 17 10:50:56 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Wed Dec 17 10:50:58 2008
Subject: [gdal-dev] NITF Header data
In-Reply-To: <4947DED1.6090304@pobox.com>
References: <1B52213F-C054-4E85-BF48-68B069E24844@iavo-rs.com>
	<4947DED1.6090304@pobox.com>
Message-ID: <COL107-W83A7D74B9EC618FE9DE41FC7F20@phx.gbl>


I would think it makes sense to return these two fields as metadata, specifically IGEOLO, since IGEOLO might not be returned as a geotransform (such as in the case when BlockA or other higher precision georeferencing is available).

-- Dan Greve

> Date: Tue, 16 Dec 2008 12:01:05 -0500
> From: warmerdam@pobox.com
> To: cjanssen@iavo-rs.com
> Subject: Re: [gdal-dev] NITF Header data
> CC: gdal-dev@lists.osgeo.org
> 
> Christiaan Janssen wrote:
> > Does anyone know if it is possible to access any more of the NITF 
> > header data than what is currently listed in the GDAL dataset metadata? 
> > There are a number of fields that I have noticed missing, namely ICORDS 
> > & IGEOLO that I could really use. I realize that these are image 
> > subheader components but it would seem to make sense that a GDAL dataset 
> > represents a single NITF subimage and that it would contain the subimage 
> > specific metadata. Any help is greatly appreciated, thanks.
> 
> Christiaan,
> 
> The IGEOLO and ICORDS data are not normally returned as NITF specific
> metadata because they are transformed into a generic geotransform and
> coordinate system definition.
> 
> If it is particularly useful, they could also be returned in raw form as
> metadata items.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

_________________________________________________________________
Send e-mail faster without improving your typing skills.
http://windowslive.com/Explore/hotmail?ocid=TXT_TAGLM_WL_hotmail_acq_speed_122008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/518da816/attachment.html
From warmerdam at pobox.com  Wed Dec 17 12:38:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 17 12:39:16 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
Message-ID: <49493931.7040004@pobox.com>

Xiaoyu Guan wrote:
> Dear All:
> I would like to use GDAL/OGR library for converting GML files to Shp 
> files. I have look around on internet. there are a lot of people use 
> OGR2OGR convert them. I have already try use ogr2ogr , convert gml to 
> shp. unfornately, the result is not what I expected. for example. I 
> convert one ploygon file, there are few attributes lost. So I would like 
> to know how to write a python script to done the job.
> Is possbile that somebody give me some hints? for example how many steps 
> to slove the problems? what is the data flow?

Xiaoyu,

It might be helpful if you provided a sample GML file you would like to
translate and explained the problem you encountered using ogr2ogr.

If you use the Python bindings for OGR to read the GML file it is
possible you will see similar problems to ogr2ogr since the data
access mechanism is the same.  The OGR GML driver certainly has many
problems with sophisticated GML.

I think the following script should give an idea how to read data
from one OGR datasource, and write it to another.  The script is
also intended to provide a hook function to apply transformations to
the coordinates though I don't think you will need this aspect.

   http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/vec_tr.py

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From john.isaac.clark at gmail.com  Wed Dec 17 15:49:53 2008
From: john.isaac.clark at gmail.com (John-Isaac Clark)
Date: Wed Dec 17 15:49:55 2008
Subject: [gdal-dev] MrSID & December 2008 GDAL/OGR 1.6.0 Release - gdal2tiles
Message-ID: <a90d504a0812171249h381a3f74ifb5e0b1f9929b345@mail.gmail.com>

 I'd seen some previous posts about the gdal2tiles win32 command line
utility
not supporting MrSID (and other proprietary formats) until the Dec 2008 GDAL
release. Granted this was primarily on the maptiler.org site, but I've been
unable to dig up confirmation browsing the gdal dev sites.

I have used the gdal2tiles built from the gdal-dev libs and works great but
not w/MrSID as documented.

My question is, does the Dec 2008 GDAL release support MrSID format
conversion with gdal2tiles and more
specifically, does the gdal2tiles command line util support MySID format
now?

My hope would be to have access to a gdal2tiles win32 command line util but
I
am also open to integrating the gdal libs into a java app I'm developing as
well. My delivery time is very short however so I was hoping to use
gdal2tiles
in a win32 command line fashion on a large collection of MrSID files until I
can specifically integrate the gdal libs.

Thanks in advance for any assistance.

V/r,

jC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/58e59941/attachment.html
From jukka.rahkonen at mmmtike.fi  Wed Dec 17 16:18:07 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Dec 17 16:18:18 2008
Subject: [gdal-dev] Re: Border slivers and JPEG2000 compression
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4947F859.40605@gov.yk.ca>
Message-ID: <loom.20081217T210142-189@post.gmane.org>

Matt Wilkie <matt.wilkie <at> gov.yk.ca> writes:

> 
> Hi Micheal, try the nearblack utility (which is a relatively new 
> addition): http://www.gdal.org/nearblack.html
> 
> "This utility will scan an image and try to set all pixels that are 
> nearly black (or nearly white) around the collar to exactly black (or 
> white). This is often used to "fix up" lossy compressed airphotos so 
> that color pixels can be treated as transparent when mosaicing."
> 
> cheers,
> 
> matt wilkie


Michael had already the original tiffs so nearblack does not help in his case.
 Or is it possible to give some PROCESSING NEARBLACK=YES keyword for MapServer?
 That would be about perfect solution for Michael. Another one that works for
sure is to make lossless JPEG2000 images.  Lossless mode keeps black as black
but compression ratio is lossless mode is just about 1:2. Third possibility is
perhaps to contruct an alfa channel to lossy JPEG2000 images for showing the
real image area but unfortunately I cannot say how it should be done.

-Jukka Rahkonen-

> Smith, Michael wrote:
> > I have several orthophotos which are TIFFs, and they align with the USGS 
> > quadrangle corners, which means they are rotated slightly, leaving small 
> > uneven slivers along the edges where pixel value is 0 (the data for 
> > these are available from adjacent tiles).  All the pixels inside the 
> > 'real' area of the photo are value > 0.
> > 


From even.rouault at mines-paris.org  Wed Dec 17 16:51:16 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 17 16:51:22 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release
In-Reply-To: <494554A7.2030606@pobox.com>
References: <494554A7.2030606@pobox.com>
Message-ID: <200812172251.17665.even.rouault@mines-paris.org>

Le Sunday 14 December 2008 19:47:03 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> As I mentioned a couple weeks ago, I am proceeding with producing stable
> releases.  I have produced a release candidate for a GDAL 1.4.5 release.
> Once released I anticipate this will be the last GDAL 1.4.x release.
>
> The source is available at:
>    http://download.osgeo.org/gdal/gdal-1.4.5RC1.tar.gz
>    http://download.osgeo.org/gdal/gdal145RC1.zip
>
> The release news is at:
>    http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News
>
> Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release.

+1

>
> Voting will close Tuesday evening.  Please try out the release before
> voting. Feedback from any users/developers welcome.

Apparently, I'm late for voting, but not the last one either ;-)

>
> Best regards,


From greg at ergonosis.com  Wed Dec 17 19:12:26 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Wed Dec 17 19:45:02 2008
Subject: [gdal-dev] GDAL/StarSpan Mac OS X
Message-ID: <4949956A.2060807@ergonosis.com>

Hi,

I've been trying to compile StarSpan under Mac OS X 10.5.6.  There 
doesn't seem to be a StarSpan community/forum/list.  Unfortunately, 
StarSpan does not know where to find GDAL.  I tried adding:

 -I/Library/Frameworks/GDAL.framework/Versions/1.6/Headers

to Makefile.in and now make can find gdal.h.  But, now it dies with:

Undefined symbols:
"GDALDataset::RasterIO(GDALRWFlag, int, int, int, int, void*, int, int, 
GDALDataType, int, int*, int, int, int)", referenced from:
    RasterizeObserver::addPixel(TraversalEvent&)       in 
starspan_rasterize.o

...
(many more lines)

Any suggestions?

Thanks!

Greg

-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From crschmidt at metacarta.com  Wed Dec 17 19:48:00 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Wed Dec 17 19:48:03 2008
Subject: [gdal-dev] GDAL/StarSpan Mac OS X
In-Reply-To: <4949956A.2060807@ergonosis.com>
References: <4949956A.2060807@ergonosis.com>
Message-ID: <20081218004800.GS32207@metacarta.com>

On Wed, Dec 17, 2008 at 04:12:26PM -0800, Greg Ederer wrote:
> Hi,
> 
> I've been trying to compile StarSpan under Mac OS X 10.5.6.  There 
> doesn't seem to be a StarSpan community/forum/list.  Unfortunately, 
> StarSpan does not know where to find GDAL.  I tried adding:
> 
> -I/Library/Frameworks/GDAL.framework/Versions/1.6/Headers
> 
> to Makefile.in and now make can find gdal.h.  But, now it dies with:
> 
> Undefined symbols:
> "GDALDataset::RasterIO(GDALRWFlag, int, int, int, int, void*, int, int, 
> GDALDataType, int, int*, int, int, int)", referenced from:
>    RasterizeObserver::addPixel(TraversalEvent&)       in 
> starspan_rasterize.o
> 
> ...
> (many more lines)

Sounds like you need to add:

-L/Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib -lgdal

to your linker line, perhaps? (That string comes from gdal-config
--libs).

-- Chris

> Any suggestions?
> 
> Thanks!
> 
> Greg
> 
> -- 
> | E R G O N O S I S
> | Greg Ederer
> | Lead Developer
> | greg@ergonosis.com
> | 360.774.6848
> |
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Christopher Schmidt
MetaCarta
From greg at ergonosis.com  Wed Dec 17 20:06:33 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Wed Dec 17 20:06:37 2008
Subject: [gdal-dev] GDAL/StarSpan Mac OS X
In-Reply-To: <20081218004800.GS32207@metacarta.com>
References: <4949956A.2060807@ergonosis.com>
	<20081218004800.GS32207@metacarta.com>
Message-ID: <4949A219.4050901@ergonosis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081217/57227180/attachment.html
From burstain at gmail.com  Thu Dec 18 01:22:26 2008
From: burstain at gmail.com (Eran Burstain)
Date: Thu Dec 18 01:22:28 2008
Subject: [gdal-dev] Using topocentric coordinate system
Message-ID: <817db2970812172222q24054b90oc9f39a6f205596f6@mail.gmail.com>

Hi !
Lately, the EPSG has added topocentric coordinate system, with codes :
System : 6512
Methods : 9836,9837
Parameters : 8834..8839

Can I or how can I Convert/Create a raster band (of image or of elevation)
to that system ?

Is there a way to describe the system without the epsg code (importing WKT
or proj4 format ?)

Can I describe rotation and translation from geocentric system in other way
(after all topocentric is only rotation and translation).

tnx.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081218/402a344a/attachment.html
From guanxiaoyu at gmail.com  Thu Dec 18 03:30:34 2008
From: guanxiaoyu at gmail.com (Xiaoyu Guan)
Date: Thu Dec 18 03:30:37 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <49493931.7040004@pobox.com>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
Message-ID: <552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>

Hi Frank:
Thanks very much for your reply.
About GML files, actually, I grab The GML files from OpenLayers.org.
as you know OpenLayers can read GML files directly.
The GML which i used is located at
http://www.openlayers.org/dev/examples/gml/multipolygon.xml
You have to change xml to gml by yourself.
The commend which I used for converting is that
> ogr2ogr -f "ESRI Shapefile" polygon.shp multipolygon.gml
the above commend will create few shp files, so I have also tried another
one
> ogr2ogr -f "ESRI Shapefile" polygon.shp multipolygon.gml multipolygon
this one will create one shapefile.
but the polygon.shp file does not contain the first feature's and the third
feature's attribute

I think the vec_tr.py is very helpful to me, espeically, WalkandTransform
function.
I would contact you when I have some results.

All the best

Xiaoyu



On Wed, Dec 17, 2008 at 6:38 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Xiaoyu Guan wrote:
>
>> Dear All:
>> I would like to use GDAL/OGR library for converting GML files to Shp
>> files. I have look around on internet. there are a lot of people use OGR2OGR
>> convert them. I have already try use ogr2ogr , convert gml to shp.
>> unfornately, the result is not what I expected. for example. I convert one
>> ploygon file, there are few attributes lost. So I would like to know how to
>> write a python script to done the job.
>> Is possbile that somebody give me some hints? for example how many steps
>> to slove the problems? what is the data flow?
>>
>
> Xiaoyu,
>
> It might be helpful if you provided a sample GML file you would like to
> translate and explained the problem you encountered using ogr2ogr.
>
> If you use the Python bindings for OGR to read the GML file it is
> possible you will see similar problems to ogr2ogr since the data
> access mechanism is the same.  The OGR GML driver certainly has many
> problems with sophisticated GML.
>
> I think the following script should give an idea how to read data
> from one OGR datasource, and write it to another.  The script is
> also intended to provide a hook function to apply transformations to
> the coordinates though I don't think you will need this aspect.
>
>  http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/vec_tr.py
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Xiaoyu Guan (Sam)
http://guanxiaoyu.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081218/95c891a2/attachment-0001.html
From klokan at klokan.cz  Thu Dec 18 04:45:29 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Thu Dec 18 04:45:32 2008
Subject: [gdal-dev] MrSID & December 2008 GDAL/OGR 1.6.0 Release -
	gdal2tiles
In-Reply-To: <a90d504a0812171249h381a3f74ifb5e0b1f9929b345@mail.gmail.com>
References: <a90d504a0812171249h381a3f74ifb5e0b1f9929b345@mail.gmail.com>
Message-ID: <6e41d95b0812180145u767dff9fpfe35fb5dc30a6a09@mail.gmail.com>

Hi,

You can try OSGeo4W package "gdal16" together with binaries for MrSID
plugin ("gdal16-mrsid" package).

Unfortunately there are now some troubles with EPSG:900913 (Spherical
Mercator a la Google Maps) so I did not recommend yet the switch from
gdal-dev to gdal16 package for OSGeo4W users.

The workaround for that right know is to run (or add into the gdal16.bat):

set GDAL_DATA=C:\OSGeo4W\apps\gdal-16\share\gdal

FrankW:
Do you plan to publish updated version of gdal16 (best with #2724 fixed ;-))?
Is there a time frame for having ECW plugin for gdal16 in OSGeo4W?

Best regards

Klokan Petr Pridal


On Wed, Dec 17, 2008 at 9:49 PM, John-Isaac Clark
<john.isaac.clark@gmail.com> wrote:
> I'd seen some previous posts about the gdal2tiles win32 command line utility
> not supporting MrSID (and other proprietary formats) until the Dec 2008 GDAL
> release. Granted this was primarily on the maptiler.org site, but I've been
> unable to dig up confirmation browsing the gdal dev sites.
>
> I have used the gdal2tiles built from the gdal-dev libs and works great but
> not w/MrSID as documented.
>
> My question is, does the Dec 2008 GDAL release support MrSID format
> conversion with gdal2tiles and more
> specifically, does the gdal2tiles command line util support MySID format
> now?
>
> My hope would be to have access to a gdal2tiles win32 command line util but
> I
> am also open to integrating the gdal libs into a java app I'm developing as
> well. My delivery time is very short however so I was hoping to use
> gdal2tiles
> in a win32 command line fashion on a large collection of MrSID files until I
> can specifically integrate the gdal libs.
>
> Thanks in advance for any assistance.
>
> V/r,
>
> jC
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Michael.Smith at maine.gov  Thu Dec 18 10:19:47 2008
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Thu Dec 18 10:19:54 2008
Subject: [gdal-dev] Border slivers and JPEG2000 compression
In-Reply-To: <4947F859.40605@gov.yk.ca>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4947F859.40605@gov.yk.ca>
Message-ID: <4EFF8BB964547748A07CA32961810C041362A6D8@SOM-TEAQASMAIL1.som.w2k.state.me.us>

I tried that but it doesn't seem to write to JP2KAK.  If I do this:

nearblack mosaic_jp2.jp2

I get this error:
0...10..ERROR 6: WriteBlock() not supported for this dataset.
ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 19
ERROR 6: WriteBlock() not supported for this dataset.
ERROR 6: WriteBlock() not supported for this dataset.
ERROR 6: WriteBlock() not supported for this dataset.
ERROR 6: WriteBlock() not supported for this dataset.

I have also tried creating an alpha channel with this:
gdalwarp -srcnodata 0 -dstalpha *.tif mosaic.tif
gdal_translate -ot Byte -of JP2KAK mosaic.tif mosaic_jp2.jp2

That works, but provides a JP2 that is twice the size since it has a
second band (these are black-and-white images, so one 8-bit band).  I
tried converting that to a single-band image, hoping it would interpret
the alpha channel correctly, with this:

gdal_translate -ot Byte -of JP2KAK -b 1 -a_nodata 0 mosaic_jp2.jp2
mosaic2_jp2.jp2

But the output again has a bunch of pixels on the edge which are now not
value 0.

I cannot gdal_rasterize -burn the JP2 because gdal_rasterize does not
write JP2KAK (why is that?  gdal_translate will but not gdal_rasterize)?

It seems like all the functions I need to work only do so on TIFFs, but
it's the JP2s I need it to work on.

Any other suggestions?  Some trick involving alpha channels I don't
know?  A way to get gdal_rasterize to write JP2KAK?

**********
Michael Smith
State GIS Manager
Maine Office of GIS 
-----Original Message-----
From: Matt Wilkie [mailto:matt.wilkie@gov.yk.ca] 
Sent: Tuesday, December 16, 2008 1:50 PM
To: Smith, Michael
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Border slivers and JPEG2000 compression

Hi Micheal, try the nearblack utility (which is a relatively new 
addition): http://www.gdal.org/nearblack.html

"This utility will scan an image and try to set all pixels that are 
nearly black (or nearly white) around the collar to exactly black (or 
white). This is often used to "fix up" lossy compressed airphotos so 
that color pixels can be treated as transparent when mosaicing."

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Smith, Michael wrote:
> I have several orthophotos which are TIFFs, and they align with the
USGS 
> quadrangle corners, which means they are rotated slightly, leaving
small 
> uneven slivers along the edges where pixel value is 0 (the data for 
> these are available from adjacent tiles).  All the pixels inside the 
> 'real' area of the photo are value > 0.
> 
> This is no problem with TIFFs, as the 0 can be turned off in 
> applications such as ArcGIS or serving them out via MapServer WMS.
But 
> when I convert to JPEG2000 (using Kakadu), the edge pixels are 
> interpolated to different values, typically something like 0, 1, 2, or

> 3.  Thus I can't just filter them out. Also inside the photo,
sometimes 
> very dark pixels (which should really be value 2, 3, etc) are
converted 
> to value 0.  Thus they show up as 'holes' in applications when pixel 
> value 0 is filtered out.
> 
> What I want to do is simply show a bunch of JP2 tiles, with the border

> pixels staying as value 0, and no other pixels having value 0.
> 
> I have tried a couple approaches, including
> 
> gdal_translate -a_nodata 0   (the border pixels still have values > 0)
> 
> gdal_rasterize -i -burn 0    (won't write JP2KAK)
> 
> Surely I'm not the first to try this, but I can't find the right steps

> on the web.  Any suggestions would be appreciated.
> 
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS
> 
> 
>
------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Thu Dec 18 11:52:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 11:52:45 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
	<552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
Message-ID: <494A7FD0.8000805@pobox.com>

Xiaoyu Guan wrote:
> Hi Frank:
> Thanks very much for your reply.
> About GML files, actually, I grab The GML files from OpenLayers.org.
> as you know OpenLayers can read GML files directly.
> The GML which i used is located at 
> http://www.openlayers.org/dev/examples/gml/multipolygon.xml
> You have to change xml to gml by yourself.
> The commend which I used for converting is that
>  > ogr2ogr -f "ESRI Shapefile" polygon.shp multipolygon.gml
> the above commend will create few shp files, so I have also tried 
> another one
>  > ogr2ogr -f "ESRI Shapefile" polygon.shp multipolygon.gml multipolygon
> this one will create one shapefile.
> but the polygon.shp file does not contain the first feature's and the 
> third feature's attribute

Xiaoyu,

I tried a translation like:

  ogr2ogr out.shp multipolygon.xml

and this seemed to produce a shapefile with all three features, and all
their attributes (ogc_fid, name, id).  I did this with GDAL/OGR trunk -
essentially identical to 1.6.0.

I observe that this gml file is produced by MapServer, and there should
be no need to rename it with a .gml extension.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Thu Dec 18 12:06:45 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Dec 18 12:06:53 2008
Subject: [gdal-dev] Border slivers and JPEG2000 compression
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A6D8@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4947F859.40605@gov.yk.ca>
	<4EFF8BB964547748A07CA32961810C041362A6D8@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <494A8325.4090807@gov.yk.ca>

Hi Micheal,

I'm afraid I misadvised you. Nearblack and gdal_rasterize can't write to 
file formats which don't allow updating in place. Is using jp2 a hard 
requirement? Have you tried the available geotiff compressions 
(http://www.gdal.org/frmt_gtiff.html look at Creation Options)? Black 
and white images should compress pretty well.


matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Smith, Michael wrote:
> I tried that but it doesn't seem to write to JP2KAK.  If I do this:
> 
> nearblack mosaic_jp2.jp2
> 
> I get this error:
> 0...10..ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 19
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> 
> I have also tried creating an alpha channel with this:
> gdalwarp -srcnodata 0 -dstalpha *.tif mosaic.tif
> gdal_translate -ot Byte -of JP2KAK mosaic.tif mosaic_jp2.jp2
> 
> That works, but provides a JP2 that is twice the size since it has a
> second band (these are black-and-white images, so one 8-bit band).  I
> tried converting that to a single-band image, hoping it would interpret
> the alpha channel correctly, with this:
> 
> gdal_translate -ot Byte -of JP2KAK -b 1 -a_nodata 0 mosaic_jp2.jp2
> mosaic2_jp2.jp2
> 
> But the output again has a bunch of pixels on the edge which are now not
> value 0.
> 
> I cannot gdal_rasterize -burn the JP2 because gdal_rasterize does not
> write JP2KAK (why is that?  gdal_translate will but not gdal_rasterize)?
> 
> It seems like all the functions I need to work only do so on TIFFs, but
> it's the JP2s I need it to work on.
> 
> Any other suggestions?  Some trick involving alpha channels I don't
> know?  A way to get gdal_rasterize to write JP2KAK?
> 
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS 
> -----Original Message-----
> From: Matt Wilkie [mailto:matt.wilkie@gov.yk.ca] 
> Sent: Tuesday, December 16, 2008 1:50 PM
> To: Smith, Michael
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Border slivers and JPEG2000 compression
> 
> Hi Micheal, try the nearblack utility (which is a relatively new 
> addition): http://www.gdal.org/nearblack.html
> 
> "This utility will scan an image and try to set all pixels that are 
> nearly black (or nearly white) around the collar to exactly black (or 
> white). This is often used to "fix up" lossy compressed airphotos so 
> that color pixels can be treated as transparent when mosaicing."
> 
> cheers,
> 
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
> 
> 
> Smith, Michael wrote:
>> I have several orthophotos which are TIFFs, and they align with the
> USGS 
>> quadrangle corners, which means they are rotated slightly, leaving
> small 
>> uneven slivers along the edges where pixel value is 0 (the data for 
>> these are available from adjacent tiles).  All the pixels inside the 
>> 'real' area of the photo are value > 0.
>>
>> This is no problem with TIFFs, as the 0 can be turned off in 
>> applications such as ArcGIS or serving them out via MapServer WMS.
> But 
>> when I convert to JPEG2000 (using Kakadu), the edge pixels are 
>> interpolated to different values, typically something like 0, 1, 2, or
> 
>> 3.  Thus I can't just filter them out. Also inside the photo,
> sometimes 
>> very dark pixels (which should really be value 2, 3, etc) are
> converted 
>> to value 0.  Thus they show up as 'holes' in applications when pixel 
>> value 0 is filtered out.
>>
>> What I want to do is simply show a bunch of JP2 tiles, with the border
> 
>> pixels staying as value 0, and no other pixels having value 0.
>>
>> I have tried a couple approaches, including
>>
>> gdal_translate -a_nodata 0   (the border pixels still have values > 0)
>>
>> gdal_rasterize -i -burn 0    (won't write JP2KAK)
>>
>> Surely I'm not the first to try this, but I can't find the right steps
> 
>> on the web.  Any suggestions would be appreciated.
>>
>> **********
>> Michael Smith
>> State GIS Manager
>> Maine Office of GIS
>>
>>
>>
> ------------------------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From warmerdam at pobox.com  Thu Dec 18 12:36:43 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 12:36:59 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release
In-Reply-To: <200812172251.17665.even.rouault@mines-paris.org>
References: <494554A7.2030606@pobox.com>
	<200812172251.17665.even.rouault@mines-paris.org>
Message-ID: <494A8A2B.1070505@pobox.com>

Even Rouault wrote:
> Le Sunday 14 December 2008 19:47:03 Frank Warmerdam, vous avez ?crit :
>> Folks,
>>
>> As I mentioned a couple weeks ago, I am proceeding with producing stable
>> releases.  I have produced a release candidate for a GDAL 1.4.5 release.
>> Once released I anticipate this will be the last GDAL 1.4.x release.
>>
>> The source is available at:
>>    http://download.osgeo.org/gdal/gdal-1.4.5RC1.tar.gz
>>    http://download.osgeo.org/gdal/gdal145RC1.zip
>>
>> The release news is at:
>>    http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News
>>
>> Motion: Approve GDAL/OGR 1.4.5RC1 as 1.4.5 Release.
> 
> +1

Folks,

I'm -1.  It turns out (as Daniel identified) the "make install" target on
unix didn't work right because the install of man pages was broken.  This
was due to my using a modern mkgdaldist.sh script which assumes that the
whole man tree should be generated and thus man/GNUmakefile was lost.  I've
worked around this in r15974.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Dec 18 12:38:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 12:38:15 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release
Message-ID: <494A8A7C.8010302@pobox.com>

Folks,

As I mentioned a couple weeks ago, I am proceeding with producing stable
releases.  I have produced a release candidate for a GDAL 1.4.5 release.
Once released I anticipate this will be the last GDAL 1.4.x release.  The
RC2 release includes the "make install - man" problem fix and is otherwise
unchanged from RC1.

The source is available at:
   http://download.osgeo.org/gdal/gdal-1.4.5RC2.tar.gz
   http://download.osgeo.org/gdal/gdal145RC2.zip

The release news is at:
   http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News

Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release.

I'll start by voting +1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From greg at ergonosis.com  Thu Dec 18 13:14:45 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Dec 18 13:14:47 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
Message-ID: <494A9315.6000604@ergonosis.com>

Hello all,

I'm a GDAL newbie.  I have a shape file containing subnational 
boundaries for Africa.  I have a raster containing rainfall for Africa.  
I need to pull out the spatial average of rainfall for each of the 
subnational units.

I think that I might be able to pull this off using StarSpan.  But, the 
docs on the StarSpan wiki do not line up with the current version of the 
program (the changelog mentions that certain command line switches have 
been eliminated, and others added; but it doesn't say what the new 
switches do, or how to use them).  I am digging through the StarSpan 
sources to try to figure out how to use it.

Does anyone have any suggestions as to how I might get the needed data 
using GDAL (with, or without StarSpan)?

Thanks!

Greg

-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From warmerdam at pobox.com  Thu Dec 18 13:25:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 13:25:18 2008
Subject: [gdal-dev] Using topocentric coordinate system
In-Reply-To: <817db2970812172222q24054b90oc9f39a6f205596f6@mail.gmail.com>
References: <817db2970812172222q24054b90oc9f39a6f205596f6@mail.gmail.com>
Message-ID: <494A9584.2010700@pobox.com>

Eran Burstain wrote:
> Hi !
> Lately, the EPSG has added topocentric coordinate system, with codes :
> System : 6512
> Methods : 9836,9837
> Parameters : 8834..8839
> 
> Can I or how can I Convert/Create a raster band (of image or of 
> elevation) to that system ?
> 
> Is there a way to describe the system without the epsg code (importing 
> WKT or proj4 format ?)
> 
> Can I describe rotation and translation from geocentric system in other 
> way (after all topocentric is only rotation and translation).

Eran,

I am not familiar with topocentric coordinates and don't know any way to
support them in GDAL/OGR or PROJ.4.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bfraser at geoanalytic.com  Thu Dec 18 13:59:48 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Dec 18 14:00:03 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494A9315.6000604@ergonosis.com>
References: <494A9315.6000604@ergonosis.com>
Message-ID: <494A9DA4.4010809@geoanalytic.com>

Greg,

  I've used StarSpan to do similar things; in my case I wanted "mode" not "avg".  Using v1.2.01 (I don't think I made major mods to the source):

	starspan2.exe --progress --RID none --vector boundaries.shp  --raster big.tif --stats  results.txt mode

I edited the resulting results.txt text (csv) file and used GDAL's ogr2ogr to do a join on the shapefile's DBF file based on the FID.

Brent Fraser


Greg Ederer wrote:
> Hello all,
> 
> I'm a GDAL newbie.  I have a shape file containing subnational 
> boundaries for Africa.  I have a raster containing rainfall for Africa.  
> I need to pull out the spatial average of rainfall for each of the 
> subnational units.
> 
> I think that I might be able to pull this off using StarSpan.  But, the 
> docs on the StarSpan wiki do not line up with the current version of the 
> program (the changelog mentions that certain command line switches have 
> been eliminated, and others added; but it doesn't say what the new 
> switches do, or how to use them).  I am digging through the StarSpan 
> sources to try to figure out how to use it.
> 
> Does anyone have any suggestions as to how I might get the needed data 
> using GDAL (with, or without StarSpan)?
> 
> Thanks!
> 
> Greg
> 
From greg at ergonosis.com  Thu Dec 18 14:32:30 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Dec 18 14:32:35 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494A9DA4.4010809@geoanalytic.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
Message-ID: <494AA54E.4040200@ergonosis.com>

Hi Brent,

Thanks for the example.  Here's what I got:

Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
--vector 
/Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
--raster rfe_2006_04_pct.tif --stats  results.txt avg
starspan: --out-prefix: ?
Type `starspan --help' for help

I then added a --out-prefix, like so:

Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
--vector 
/Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
--raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
starspan: --out-type: ?
Type `starspan --help' for help

I then added '--out-type table' (I found in the source that valid 
--out-types are: table, mini_raster_strip, mini_rasters, rasterization):

Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
--vector 
/Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
--raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar 
--out-type table
Number of features: 550
starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
        0% terminate called after throwing an instance of 
'geos::util::TopologyException'
  what():  TopologyException: side location conflict -8.25 23.1536
Abort trap

Any idea what the TopologyException indicates?

Thanks!

Greg

Brent Fraser wrote:
> Greg,
>
>  I've used StarSpan to do similar things; in my case I wanted "mode" 
> not "avg".  Using v1.2.01 (I don't think I made major mods to the 
> source):
>
>     starspan2.exe --progress --RID none --vector boundaries.shp  
> --raster big.tif --stats  results.txt mode
>
> I edited the resulting results.txt text (csv) file and used GDAL's 
> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>
> Brent Fraser
>
>
> Greg Ederer wrote:
>> Hello all,
>>
>> I'm a GDAL newbie.  I have a shape file containing subnational 
>> boundaries for Africa.  I have a raster containing rainfall for 
>> Africa.  I need to pull out the spatial average of rainfall for each 
>> of the subnational units.
>>
>> I think that I might be able to pull this off using StarSpan.  But, 
>> the docs on the StarSpan wiki do not line up with the current version 
>> of the program (the changelog mentions that certain command line 
>> switches have been eliminated, and others added; but it doesn't say 
>> what the new switches do, or how to use them).  I am digging through 
>> the StarSpan sources to try to figure out how to use it.
>>
>> Does anyone have any suggestions as to how I might get the needed 
>> data using GDAL (with, or without StarSpan)?
>>
>> Thanks!
>>
>> Greg
>>


-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From bfraser at geoanalytic.com  Thu Dec 18 14:57:28 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Dec 18 14:57:58 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494AA54E.4040200@ergonosis.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com>
Message-ID: <494AAB28.6080506@geoanalytic.com>

Greg,

  It means the GEOS topology library is having problems with geometry of your input shapefile.  Most likely related to duplicate vertices (or near-duplicate) in a polygon.  Do a Google for "side location conflict".   It would be nice if it spat out the FID of the offending polygon...

Brent 

Greg Ederer wrote:
> Hi Brent,
> 
> Thanks for the example.  Here's what I got:
> 
> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
> --vector 
> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
> --raster rfe_2006_04_pct.tif --stats  results.txt avg
> starspan: --out-prefix: ?
> Type `starspan --help' for help
> 
> I then added a --out-prefix, like so:
> 
> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
> --vector 
> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
> starspan: --out-type: ?
> Type `starspan --help' for help
> 
> I then added '--out-type table' (I found in the source that valid 
> --out-types are: table, mini_raster_strip, mini_rasters, rasterization):
> 
> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
> --vector 
> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar 
> --out-type table
> Number of features: 550
> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>        0% terminate called after throwing an instance of 
> 'geos::util::TopologyException'
>  what():  TopologyException: side location conflict -8.25 23.1536
> Abort trap
> 
> Any idea what the TopologyException indicates?
> 
> Thanks!
> 
> Greg
> 
> Brent Fraser wrote:
>> Greg,
>>
>>  I've used StarSpan to do similar things; in my case I wanted "mode" 
>> not "avg".  Using v1.2.01 (I don't think I made major mods to the 
>> source):
>>
>>     starspan2.exe --progress --RID none --vector boundaries.shp  
>> --raster big.tif --stats  results.txt mode
>>
>> I edited the resulting results.txt text (csv) file and used GDAL's 
>> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>>
>> Brent Fraser
>>
>>
>> Greg Ederer wrote:
>>> Hello all,
>>>
>>> I'm a GDAL newbie.  I have a shape file containing subnational 
>>> boundaries for Africa.  I have a raster containing rainfall for 
>>> Africa.  I need to pull out the spatial average of rainfall for each 
>>> of the subnational units.
>>>
>>> I think that I might be able to pull this off using StarSpan.  But, 
>>> the docs on the StarSpan wiki do not line up with the current version 
>>> of the program (the changelog mentions that certain command line 
>>> switches have been eliminated, and others added; but it doesn't say 
>>> what the new switches do, or how to use them).  I am digging through 
>>> the StarSpan sources to try to figure out how to use it.
>>>
>>> Does anyone have any suggestions as to how I might get the needed 
>>> data using GDAL (with, or without StarSpan)?
>>>
>>> Thanks!
>>>
>>> Greg
>>>
> 
> 
From greg at ergonosis.com  Thu Dec 18 15:11:49 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Dec 18 15:11:55 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494AAB28.6080506@geoanalytic.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
Message-ID: <494AAE85.6020400@ergonosis.com>

Brent,

My Google search didn't turn up much of use (most of the results were 
PostGIS-specific).  Do you know of a tool that would tell me which 
feature(s) have problems?  Do you know of a tool that might be able to 
fix these polygons?

Thanks!

Greg

Brent Fraser wrote:
> Greg,
>
>  It means the GEOS topology library is having problems with geometry 
> of your input shapefile.  Most likely related to duplicate vertices 
> (or near-duplicate) in a polygon.  Do a Google for "side location 
> conflict".   It would be nice if it spat out the FID of the offending 
> polygon...
>
> Brent
> Greg Ederer wrote:
>> Hi Brent,
>>
>> Thanks for the example.  Here's what I got:
>>
>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>> none --vector 
>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>> --raster rfe_2006_04_pct.tif --stats  results.txt avg
>> starspan: --out-prefix: ?
>> Type `starspan --help' for help
>>
>> I then added a --out-prefix, like so:
>>
>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>> none --vector 
>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
>> starspan: --out-type: ?
>> Type `starspan --help' for help
>>
>> I then added '--out-type table' (I found in the source that valid 
>> --out-types are: table, mini_raster_strip, mini_rasters, rasterization):
>>
>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>> none --vector 
>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix 
>> bar --out-type table
>> Number of features: 550
>> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>>        0% terminate called after throwing an instance of 
>> 'geos::util::TopologyException'
>>  what():  TopologyException: side location conflict -8.25 23.1536
>> Abort trap
>>
>> Any idea what the TopologyException indicates?
>>
>> Thanks!
>>
>> Greg
>>
>> Brent Fraser wrote:
>>> Greg,
>>>
>>>  I've used StarSpan to do similar things; in my case I wanted "mode" 
>>> not "avg".  Using v1.2.01 (I don't think I made major mods to the 
>>> source):
>>>
>>>     starspan2.exe --progress --RID none --vector boundaries.shp  
>>> --raster big.tif --stats  results.txt mode
>>>
>>> I edited the resulting results.txt text (csv) file and used GDAL's 
>>> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>>>
>>> Brent Fraser
>>>
>>>
>>> Greg Ederer wrote:
>>>> Hello all,
>>>>
>>>> I'm a GDAL newbie.  I have a shape file containing subnational 
>>>> boundaries for Africa.  I have a raster containing rainfall for 
>>>> Africa.  I need to pull out the spatial average of rainfall for 
>>>> each of the subnational units.
>>>>
>>>> I think that I might be able to pull this off using StarSpan.  But, 
>>>> the docs on the StarSpan wiki do not line up with the current 
>>>> version of the program (the changelog mentions that certain command 
>>>> line switches have been eliminated, and others added; but it 
>>>> doesn't say what the new switches do, or how to use them).  I am 
>>>> digging through the StarSpan sources to try to figure out how to 
>>>> use it.
>>>>
>>>> Does anyone have any suggestions as to how I might get the needed 
>>>> data using GDAL (with, or without StarSpan)?
>>>>
>>>> Thanks!
>>>>
>>>> Greg
>>>>
>>
>>


-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From joelodom at gmail.com  Thu Dec 18 15:15:20 2008
From: joelodom at gmail.com (Joel Odom)
Date: Thu Dec 18 15:15:23 2008
Subject: [gdal-dev] Compile GDAL With WMS Support (Win32)
Message-ID: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>

I'm trying to use GDAL to pull down WMS images.  I installed curl and
built with it.  (I can see that libcurl.dll is being loaded.)  When I
pass in my XML service descriptor file to GDALOpen, I get, "ERROR 4:
`C:\Documents and Settings\jo44\Desktop\ogr_data\wms.xml' not
recognised as a supported file format."  I ran "gdalinfo --formats"
and found that WMS is *not* listed among the supported formats, so I
assume that I have left something out of my build.  Does anyone have
any hints as to where to go from here?  Thanks!


-- 
http://giscoder.blogspot.com/
From ari.jolma at tkk.fi  Thu Dec 18 15:19:51 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Dec 18 15:19:53 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <494A7FD0.8000805@pobox.com>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
	<552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
	<494A7FD0.8000805@pobox.com>
Message-ID: <494AB067.5000705@tkk.fi>

Frank Warmerdam kirjoitti:
> Xiaoyu Guan wrote:
>> The GML which i used is located at 
>> http://www.openlayers.org/dev/examples/gml/multipolygon.xml
>> but the polygon.shp file does not contain the first feature's and the 
>> third feature's attribute
>
>
> and this seemed to produce a shapefile with all three features, and all
> their attributes (ogc_fid, name, id).  I did this with GDAL/OGR trunk -
> essentially identical to 1.6.0.

I'm observing a similar thing as Xiaoyu reports. This is with 1.6.0 or 
very near to it (revision 15975). Here's the output from ogrinfo:

c:\>ogrinfo  multipolygon.xml
Had to open data source read-only.
INFO: Open of `multipolygon.xml'
      using driver `GML' successful.
1: multipolygon
2: ogc_fid
3: name
4: id

and

c:\>ogrinfo  multipolygon.xml multipolygon
Had to open data source read-only.
INFO: Open of `multipolygon.xml'
      using driver `GML' successful.

Layer name: multipolygon
Geometry: Unknown (any)
Feature Count: 3
Extent: (-1.738290, 46.307560) - (3.754420, 47.244300)
Layer SRS WKT:
(unknown)
ogc_fid: Integer (0.0)
name: String (22.0)
id: Integer (0.0)
OGRFeature(multipolygon):1
  ogc_fid (Integer) = (null)
  name (String) = (null)
  id (Integer) = (null)
  MULTIPOLYGON (((1.313216 46.69077,1.000968 46.861086999999998,0.887424 
47.0597
9,1.142899 47.244300000000003,1.355795 47.244300000000003,1.554498 
47.0172110000
00003,1.710622 47.05979,1.767394 46.747542000000003,1.313216 
46.69077,1.313216 4
6.69077)),((0.7313 46.605612,-0.19125 46.704962999999999,-0.19125 
46.84689399999
9999,0.17777 46.988824,0.447438 46.960438000000003,0.589369 
46.804315000000003,0
.688721 46.832701,0.7313 46.605612,0.7313 46.605612)),((-1.610557 
46.73334899999
9997,-1.184765 46.704962999999999,-1.198958 46.704962999999999,-0.943483 
46.6198
04999999999,-0.915096 46.818508,-0.659621 46.775928,-0.688007 
47.017211000000003
,-0.943483 47.003017999999997,-1.127992 47.088175999999997,-1.397661 
47.10236900
0000003,-1.62475 47.073982999999998,-1.738295 46.917859,-1.610557 
46.73334899999
9997)))

OGRFeature(multipolygon):2
  ogc_fid (Integer) = 2
  name (String) = My second Multipolygon
  id (Integer) = 0
  POLYGON ((2.959612 46.392716,2.789295 46.775928,3.172508 
46.903666,3.498949 46
.903666,3.498949 46.662384000000003,3.754424 46.563032,2.959612 46.392716))

OGRFeature(multipolygon):3
  ogc_fid (Integer) = (null)
  name (String) = (null)
  id (Integer) = (null)
  MULTIPOLYGON (((2.292538 46.804315000000003,2.207379 
47.017211000000003,2.3918
89 47.045597,2.562206 46.832701,2.292538 46.804315000000003)),((2.789295 
46.3075
57000000003,2.789295 46.307557000000003,2.803488 
46.506259999999997,2.618978 46.
676577000000002,2.34931 46.633997999999998,2.448661 46.392716,2.789295 
46.307557
000000003)))

note the attributes are null. I'll look more into the issue.

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From bfraser at geoanalytic.com  Thu Dec 18 15:21:16 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Dec 18 15:21:41 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494AAE85.6020400@ergonosis.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com>
Message-ID: <494AB0BC.2050502@geoanalytic.com>

Greg,

  OpenJump is a good topology/geometry fixing tool.  Load your shapefile and do Tools->Generate->Buffer, set the Buffer distance to 0 to clean up the polygon vertices.  I seem to recall it may have a problem preserving attributes when the results are saved as a shapefile, but you may be able to just use the new .shp portion with the old .dbf and .shx if the resulting geometry records are not re-ordered.

Brent



Greg Ederer wrote:
> Brent,
> 
> My Google search didn't turn up much of use (most of the results were 
> PostGIS-specific).  Do you know of a tool that would tell me which 
> feature(s) have problems?  Do you know of a tool that might be able to 
> fix these polygons?
> 
> Thanks!
> 
> Greg
> 
> Brent Fraser wrote:
>> Greg,
>>
>>  It means the GEOS topology library is having problems with geometry 
>> of your input shapefile.  Most likely related to duplicate vertices 
>> (or near-duplicate) in a polygon.  Do a Google for "side location 
>> conflict".   It would be nice if it spat out the FID of the offending 
>> polygon...
>>
>> Brent
>> Greg Ederer wrote:
>>> Hi Brent,
>>>
>>> Thanks for the example.  Here's what I got:
>>>
>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>> none --vector 
>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg
>>> starspan: --out-prefix: ?
>>> Type `starspan --help' for help
>>>
>>> I then added a --out-prefix, like so:
>>>
>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>> none --vector 
>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
>>> starspan: --out-type: ?
>>> Type `starspan --help' for help
>>>
>>> I then added '--out-type table' (I found in the source that valid 
>>> --out-types are: table, mini_raster_strip, mini_rasters, rasterization):
>>>
>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>> none --vector 
>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix 
>>> bar --out-type table
>>> Number of features: 550
>>> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>>>        0% terminate called after throwing an instance of 
>>> 'geos::util::TopologyException'
>>>  what():  TopologyException: side location conflict -8.25 23.1536
>>> Abort trap
>>>
>>> Any idea what the TopologyException indicates?
>>>
>>> Thanks!
>>>
>>> Greg
>>>
>>> Brent Fraser wrote:
>>>> Greg,
>>>>
>>>>  I've used StarSpan to do similar things; in my case I wanted "mode" 
>>>> not "avg".  Using v1.2.01 (I don't think I made major mods to the 
>>>> source):
>>>>
>>>>     starspan2.exe --progress --RID none --vector boundaries.shp  
>>>> --raster big.tif --stats  results.txt mode
>>>>
>>>> I edited the resulting results.txt text (csv) file and used GDAL's 
>>>> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>>>>
>>>> Brent Fraser
>>>>
>>>>
>>>> Greg Ederer wrote:
>>>>> Hello all,
>>>>>
>>>>> I'm a GDAL newbie.  I have a shape file containing subnational 
>>>>> boundaries for Africa.  I have a raster containing rainfall for 
>>>>> Africa.  I need to pull out the spatial average of rainfall for 
>>>>> each of the subnational units.
>>>>>
>>>>> I think that I might be able to pull this off using StarSpan.  But, 
>>>>> the docs on the StarSpan wiki do not line up with the current 
>>>>> version of the program (the changelog mentions that certain command 
>>>>> line switches have been eliminated, and others added; but it 
>>>>> doesn't say what the new switches do, or how to use them).  I am 
>>>>> digging through the StarSpan sources to try to figure out how to 
>>>>> use it.
>>>>>
>>>>> Does anyone have any suggestions as to how I might get the needed 
>>>>> data using GDAL (with, or without StarSpan)?
>>>>>
>>>>> Thanks!
>>>>>
>>>>> Greg
>>>>>
>>>
>>>
> 
> 
From greg at ergonosis.com  Thu Dec 18 15:26:25 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Dec 18 15:26:29 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494AB0BC.2050502@geoanalytic.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com> <494AB0BC.2050502@geoanalytic.com>
Message-ID: <494AB1F1.8070107@ergonosis.com>

Thanks, Brent.  I'll give this a whirl.

Cheers,

Greg

Brent Fraser wrote:
> Greg,
>
>  OpenJump is a good topology/geometry fixing tool.  Load your 
> shapefile and do Tools->Generate->Buffer, set the Buffer distance to 0 
> to clean up the polygon vertices.  I seem to recall it may have a 
> problem preserving attributes when the results are saved as a 
> shapefile, but you may be able to just use the new .shp portion with 
> the old .dbf and .shx if the resulting geometry records are not 
> re-ordered.
>
> Brent
>
>
>
> Greg Ederer wrote:
>> Brent,
>>
>> My Google search didn't turn up much of use (most of the results were 
>> PostGIS-specific).  Do you know of a tool that would tell me which 
>> feature(s) have problems?  Do you know of a tool that might be able 
>> to fix these polygons?
>>
>> Thanks!
>>
>> Greg
>>
>> Brent Fraser wrote:
>>> Greg,
>>>
>>>  It means the GEOS topology library is having problems with geometry 
>>> of your input shapefile.  Most likely related to duplicate vertices 
>>> (or near-duplicate) in a polygon.  Do a Google for "side location 
>>> conflict".   It would be nice if it spat out the FID of the 
>>> offending polygon...
>>>
>>> Brent
>>> Greg Ederer wrote:
>>>> Hi Brent,
>>>>
>>>> Thanks for the example.  Here's what I got:
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg
>>>> starspan: --out-prefix: ?
>>>> Type `starspan --help' for help
>>>>
>>>> I then added a --out-prefix, like so:
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
>>>> starspan: --out-type: ?
>>>> Type `starspan --help' for help
>>>>
>>>> I then added '--out-type table' (I found in the source that valid 
>>>> --out-types are: table, mini_raster_strip, mini_rasters, 
>>>> rasterization):
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix 
>>>> bar --out-type table
>>>> Number of features: 550
>>>> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>>>>        0% terminate called after throwing an instance of 
>>>> 'geos::util::TopologyException'
>>>>  what():  TopologyException: side location conflict -8.25 23.1536
>>>> Abort trap
>>>>
>>>> Any idea what the TopologyException indicates?
>>>>
>>>> Thanks!
>>>>
>>>> Greg
>>>>
>>>> Brent Fraser wrote:
>>>>> Greg,
>>>>>
>>>>>  I've used StarSpan to do similar things; in my case I wanted 
>>>>> "mode" not "avg".  Using v1.2.01 (I don't think I made major mods 
>>>>> to the source):
>>>>>
>>>>>     starspan2.exe --progress --RID none --vector boundaries.shp  
>>>>> --raster big.tif --stats  results.txt mode
>>>>>
>>>>> I edited the resulting results.txt text (csv) file and used GDAL's 
>>>>> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>>>>>
>>>>> Brent Fraser
>>>>>
>>>>>
>>>>> Greg Ederer wrote:
>>>>>> Hello all,
>>>>>>
>>>>>> I'm a GDAL newbie.  I have a shape file containing subnational 
>>>>>> boundaries for Africa.  I have a raster containing rainfall for 
>>>>>> Africa.  I need to pull out the spatial average of rainfall for 
>>>>>> each of the subnational units.
>>>>>>
>>>>>> I think that I might be able to pull this off using StarSpan.  
>>>>>> But, the docs on the StarSpan wiki do not line up with the 
>>>>>> current version of the program (the changelog mentions that 
>>>>>> certain command line switches have been eliminated, and others 
>>>>>> added; but it doesn't say what the new switches do, or how to use 
>>>>>> them).  I am digging through the StarSpan sources to try to 
>>>>>> figure out how to use it.
>>>>>>
>>>>>> Does anyone have any suggestions as to how I might get the needed 
>>>>>> data using GDAL (with, or without StarSpan)?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Greg
>>>>>>
>>>>
>>>>
>>
>>


-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From warmerdam at pobox.com  Thu Dec 18 15:29:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 15:29:42 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <494AB067.5000705@tkk.fi>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
	<552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
	<494A7FD0.8000805@pobox.com> <494AB067.5000705@tkk.fi>
Message-ID: <494AB2A9.90907@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>> Xiaoyu Guan wrote:
>>> The GML which i used is located at 
>>> http://www.openlayers.org/dev/examples/gml/multipolygon.xml
>>> but the polygon.shp file does not contain the first feature's and the 
>>> third feature's attribute
>>
>>
>> and this seemed to produce a shapefile with all three features, and all
>> their attributes (ogc_fid, name, id).  I did this with GDAL/OGR trunk -
>> essentially identical to 1.6.0.
> 
> I'm observing a similar thing as Xiaoyu reports. This is with 1.6.0 or 
> very near to it (revision 15975). Here's the output from ogrinfo:
> 
> c:\>ogrinfo  multipolygon.xml
> Had to open data source read-only.
> INFO: Open of `multipolygon.xml'
>      using driver `GML' successful.
> 1: multipolygon
> 2: ogc_fid
> 3: name
> 4: id
...
> note the attributes are null. I'll look more into the issue.

Ari,

Interesting. On my 64bit ubuntu system I can access this file without
problems back as far as 1.5 branch.  I'd suggest filing a ticket once
you narrow things down.  Items to keep an eye on include the Xerces
version.  I appear to be building against Xerces 2.7.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at tkk.fi  Thu Dec 18 16:05:22 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Dec 18 16:05:31 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <494AB2A9.90907@pobox.com>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
	<552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
	<494A7FD0.8000805@pobox.com> <494AB067.5000705@tkk.fi>
	<494AB2A9.90907@pobox.com>
Message-ID: <494ABB12.8060503@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> Frank Warmerdam kirjoitti:
>>> Xiaoyu Guan wrote:
>>>> The GML which i used is located at 
>>>> http://www.openlayers.org/dev/examples/gml/multipolygon.xml
>>>> but the polygon.shp file does not contain the first feature's and 
>>>> the third feature's attribute
> Interesting. On my 64bit ubuntu system I can access this file without
> problems back as far as 1.5 branch.  I'd suggest filing a ticket once
> you narrow things down.  Items to keep an eye on include the Xerces
> version.  I appear to be building against Xerces 2.7.0.

It works when updated to the latest in trunk. I reported wrongly the 
revision I had, I did not have the latest (for example 12/13/08) changes 
to gml*.cpp. I'm using Xerces 3.0 in Windows with MinGW (couldn't 
compile Xerces 2.7 if I remember correctly). The ogrinfo output is now:

OGRFeature(multipolygon):1
  ogc_fid (Integer) = 1
  name (String) = My first Multipolygon
  id (Integer) = 0
  MULTIPOLYGON (((1.313216 46.69077,1.000968 46.861086999999998,0.887424 
47.0597
9,1.142899 47.244300000000003,1.355795 47.244300000000003,1.554498 
47.0172110000
00003,1.710622 47.05979,1.767394 46.747542000000003,1.313216 
46.69077,1.313216 4
6.69077)),((0.7313 46.605612,-0.19125 46.704962999999999,-0.19125 
46.84689399999
9999,0.17777 46.988824,0.447438 46.960438000000003,0.589369 
46.804315000000003,0
.688721 46.832701,0.7313 46.605612,0.7313 46.605612)),((-1.610557 
46.73334899999
9997,-1.184765 46.704962999999999,-1.198958 46.704962999999999,-0.943483 
46.6198
04999999999,-0.915096 46.818508,-0.659621 46.775928,-0.688007 
47.017211000000003
,-0.943483 47.003017999999997,-1.127992 47.088175999999997,-1.397661 
47.10236900
0000003,-1.62475 47.073982999999998,-1.738295 46.917859,-1.610557 
46.73334899999
9997)))

OGRFeature(multipolygon):2
  ogc_fid (Integer) = 2
  name (String) = My second Multipolygon
  id (Integer) = 0
  POLYGON ((2.959612 46.392716,2.789295 46.775928,3.172508 
46.903666,3.498949 46
.903666,3.498949 46.662384000000003,3.754424 46.563032,2.959612 46.392716))

OGRFeature(multipolygon):3
  ogc_fid (Integer) = 3
  name (String) = My third Multipolygon
  id (Integer) = 0
  MULTIPOLYGON (((2.292538 46.804315000000003,2.207379 
47.017211000000003,2.3918
89 47.045597,2.562206 46.832701,2.292538 46.804315000000003)),((2.789295 
46.3075
57000000003,2.789295 46.307557000000003,2.803488 
46.506259999999997,2.618978 46.
676577000000002,2.34931 46.633997999999998,2.448661 46.392716,2.789295 
46.307557
000000003)))

thus it seems that with Xerces 3.0 the latest from trunk is needed

Ari


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From Shawn.Gong at drdc-rddc.gc.ca  Thu Dec 18 16:11:56 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Dec 18 16:10:22 2008
Subject: [gdal-dev] gdal 1.6 build on redhat Linux,
	missing gdal.py _gdalmodule.so
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E66B@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I just finished building gdal 1.6 on redhat Linux (using gcc 4.2.2,
python 2.5.2).
After taking Even Rouault and Frank's suggestion, I used the minimized
driver approach. It seemed to work.

  ./configure --prefix=/home/sgong/dev181/dist --with-png=internal
--with-libtiff=internal --with-gif=internal --with-geotiff=internal
--with-libz=/home/sgong/dev181/dist --with-jpeg=/home/sgong/dev181/dist
--with-hdf4=/home/sgong/dev181/dist --with-hdf5=/home/sgong/dev181/dist
--without-ogdi --without-jasper --without-ecw --without-curl
--without-expat --without-dwgdirect --without-mrsid --without-jp2mrsid
--without-mysql --without-odbc --without-grib --without-pg

One question: 
After gdal build, the python files: gdal.py, ogr.py, osr.py,
gdalconst.py, gdalnumeric.py did not get copied to
[local_install]/lib/python2.5/site-packages/.  Nor did the
_gdalmodule.a, _gdalmodule.la, _gdalmodule.so,

Did I miss something in config?


thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081218/9a854bcc/attachment.html
From warmerdam at pobox.com  Thu Dec 18 16:20:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 18 16:20:27 2008
Subject: [gdal-dev] Compile GDAL With WMS Support (Win32)
In-Reply-To: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>
References: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>
Message-ID: <494ABE91.3010401@pobox.com>

Joel Odom wrote:
> I'm trying to use GDAL to pull down WMS images.  I installed curl and
> built with it.  (I can see that libcurl.dll is being loaded.)  When I
> pass in my XML service descriptor file to GDALOpen, I get, "ERROR 4:
> `C:\Documents and Settings\jo44\Desktop\ogr_data\wms.xml' not
> recognised as a supported file format."  I ran "gdalinfo --formats"
> and found that WMS is *not* listed among the supported formats, so I
> assume that I have left something out of my build.  Does anyone have
> any hints as to where to go from here?  Thanks!

Joel,

I don't see any obvious problem in building on windows with WMS support
if you enable curl.  I did discover that the frmts/makefile.vc depends
on CURL_DIR being defined in the nmake.opt file even though it is otherwise
just used to define CURL_INCLUDE and CURL_LIB.  For this reason it turned
out none of the curl based raster formats was actually getting built into
OSGeo4W (fixed in the OSGeo4W pkg-gdal60 now).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Thu Dec 18 17:04:38 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Dec 18 17:04:41 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release
In-Reply-To: <494A8A7C.8010302@pobox.com>
References: <494A8A7C.8010302@pobox.com>
Message-ID: <494AC8F6.5070201@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From guanxiaoyu at gmail.com  Thu Dec 18 17:18:36 2008
From: guanxiaoyu at gmail.com (Xiaoyu Guan)
Date: Thu Dec 18 17:18:38 2008
Subject: [gdal-dev] help! convert GML to Shp by using python
In-Reply-To: <494ABB12.8060503@tkk.fi>
References: <552b56070812170740g1dd5443ds79c98e8bb72fd5f2@mail.gmail.com>
	<49493931.7040004@pobox.com>
	<552b56070812180030h1f979c14lc918a5920d700dae@mail.gmail.com>
	<494A7FD0.8000805@pobox.com> <494AB067.5000705@tkk.fi>
	<494AB2A9.90907@pobox.com> <494ABB12.8060503@tkk.fi>
Message-ID: <552b56070812181418h308c289cta700929b2bfb078@mail.gmail.com>

Dear Ari and Frank:
Thanks very much for helping figure out the problem.
Yes, I have checked. I am using Xerces 2.7+ GDAL 1.6 win32.
 but I download the lastest one from
http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip
It is would be nice to replace Xerces 2.7 with 3.0 in that packages. I don't
know whether possbile just replace dll files.
or do I need to install Visual studio to compile it by myself?
or some people want to share their Xerces 3.0 +GDAL 1.6
or I can reinstall GDAL 1.5 + Xerces 2.7

Could you give me some suggestions?
Thanks in advance

All the best

Xiaoyu


On Thu, Dec 18, 2008 at 10:05 PM, Ari Jolma <ari.jolma@tkk.fi> wrote:

> Frank Warmerdam kirjoitti:
>
>> Ari Jolma wrote:
>>
>>> Frank Warmerdam kirjoitti:
>>>
>>>> Xiaoyu Guan wrote:
>>>>
>>>>> The GML which i used is located at
>>>>> http://www.openlayers.org/dev/examples/gml/multipolygon.xml
>>>>> but the polygon.shp file does not contain the first feature's and the
>>>>> third feature's attribute
>>>>>
>>>> Interesting. On my 64bit ubuntu system I can access this file without
>> problems back as far as 1.5 branch.  I'd suggest filing a ticket once
>> you narrow things down.  Items to keep an eye on include the Xerces
>> version.  I appear to be building against Xerces 2.7.0.
>>
>
> It works when updated to the latest in trunk. I reported wrongly the
> revision I had, I did not have the latest (for example 12/13/08) changes to
> gml*.cpp. I'm using Xerces 3.0 in Windows with MinGW (couldn't compile
> Xerces 2.7 if I remember correctly). The ogrinfo output is now:
>
> OGRFeature(multipolygon):1
>  ogc_fid (Integer) = 1
>  name (String) = My first Multipolygon
>  id (Integer) = 0
>  MULTIPOLYGON (((1.313216 46.69077,1.000968 46.861086999999998,0.887424
> 47.0597
> 9,1.142899 47.244300000000003,1.355795 47.244300000000003,1.554498
> 47.0172110000
> 00003,1.710622 47.05979,1.767394 46.747542000000003,1.313216
> 46.69077,1.313216 4
> 6.69077)),((0.7313 46.605612,-0.19125 46.704962999999999,-0.19125
> 46.84689399999
> 9999,0.17777 46.988824,0.447438 46.960438000000003,0.589369
> 46.804315000000003,0
> .688721 46.832701,0.7313 46.605612,0.7313 46.605612)),((-1.610557
> 46.73334899999
> 9997,-1.184765 46.704962999999999,-1.198958 46.704962999999999,-0.943483
> 46.6198
> 04999999999,-0.915096 46.818508,-0.659621 46.775928,-0.688007
> 47.017211000000003
> ,-0.943483 47.003017999999997,-1.127992 47.088175999999997,-1.397661
> 47.10236900
> 0000003,-1.62475 47.073982999999998,-1.738295 46.917859,-1.610557
> 46.73334899999
> 9997)))
>
> OGRFeature(multipolygon):2
>  ogc_fid (Integer) = 2
>  name (String) = My second Multipolygon
>  id (Integer) = 0
>  POLYGON ((2.959612 46.392716,2.789295 46.775928,3.172508
> 46.903666,3.498949 46
> .903666,3.498949 46.662384000000003,3.754424 46.563032,2.959612 46.392716))
>
> OGRFeature(multipolygon):3
>  ogc_fid (Integer) = 3
>  name (String) = My third Multipolygon
>  id (Integer) = 0
>  MULTIPOLYGON (((2.292538 46.804315000000003,2.207379
> 47.017211000000003,2.3918
> 89 47.045597,2.562206 46.832701,2.292538 46.804315000000003)),((2.789295
> 46.3075
> 57000000003,2.789295 46.307557000000003,2.803488
> 46.506259999999997,2.618978 46.
> 676577000000002,2.34931 46.633997999999998,2.448661 46.392716,2.789295
> 46.307557
> 000000003)))
>
> thus it seems that with Xerces 3.0 the latest from trunk is needed
>
>
> Ari
>
>
> --
> Prof. Ari Jolma
> Environmental Management Information Technology
> Teknillinen Korkeakoulu / Helsinki University of Technology
> tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
> Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi
>
>
>


-- 
Xiaoyu Guan (Sam)
http://guanxiaoyu.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081218/685de180/attachment.html
From joelodom at gmail.com  Thu Dec 18 17:29:24 2008
From: joelodom at gmail.com (Joel Odom)
Date: Thu Dec 18 17:29:26 2008
Subject: [gdal-dev] Compile GDAL With WMS Support (Win32)
In-Reply-To: <494ABE91.3010401@pobox.com>
References: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>
	<494ABE91.3010401@pobox.com>
Message-ID: <d422b4500812181429p215dcae0r17df1dbac5803ea0@mail.gmail.com>

Frank, thanks (again) for your help.  I'm in business.  I stepped into
the code and found that WMS support was being built in (after I
installed curl and changed the nmake.opt file).  For some reason,
though, WMS doesn't show up on gdalinfo --formats.  The reason my open
was failing was because I had three bytes of white space before my
<GDAL_WMS> tag that were invisible in my text editor.



On Thu, Dec 18, 2008 at 4:20 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Joel Odom wrote:
>>
>> I'm trying to use GDAL to pull down WMS images.  I installed curl and
>> built with it.  (I can see that libcurl.dll is being loaded.)  When I
>> pass in my XML service descriptor file to GDALOpen, I get, "ERROR 4:
>> `C:\Documents and Settings\jo44\Desktop\ogr_data\wms.xml' not
>> recognised as a supported file format."  I ran "gdalinfo --formats"
>> and found that WMS is *not* listed among the supported formats, so I
>> assume that I have left something out of my build.  Does anyone have
>> any hints as to where to go from here?  Thanks!
>
> Joel,
>
> I don't see any obvious problem in building on windows with WMS support
> if you enable curl.  I did discover that the frmts/makefile.vc depends
> on CURL_DIR being defined in the nmake.opt file even though it is otherwise
> just used to define CURL_INCLUDE and CURL_LIB.  For this reason it turned
> out none of the curl based raster formats was actually getting built into
> OSGeo4W (fixed in the OSGeo4W pkg-gdal60 now).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>



-- 
http://giscoder.blogspot.com/
From jackkirk at bigpond.net.au  Thu Dec 18 20:03:40 2008
From: jackkirk at bigpond.net.au (Jack Kirkpatrick)
Date: Thu Dec 18 22:52:33 2008
Subject: [gdal-dev] gdaltransform user problems
Message-ID: <B8094383D0754CB79C6B59EFE0272093@DELL8300>

Greetings,

My apologies in advance if the following is stupid but I am not a GIS expert (probably not even a GIS novice).

Some time ago I had call to transform corner coordinates from "Australian Geodetic Datum 1966" to WGS84 so that I could accurately drape some nautical charts in GeoTiff format onto Google Earth. I used a utility called GEOTRANS2 which produced excellent mathematical results but is decidely clunky to integrate.

I recently discovered the GDAL utilities and have been trying to replicate this transformation without success.

----------------------------

I have netted down my efforts as follows:

(1) Environment is Windows XP SP3 and I have installed FWTools 2.2.9.

(2) I have a file [C:\fwtest\agd66.wkt] containing:

GEOGCS["AGD66",
DATUM["Australian_Geodetic_Datum_1966",
SPHEROID["Australian National Spheroid",6378160,298.249999999996,
AUTHORITY["EPSG","7003"]],
AUTHORITY["EPSG","6202"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],
AUTHORITY["EPSG","4202"]]
 
(3) I have a file [C:\fwtest\wgs84.wkt] containing:

GEOGCS["WGS 84",
DATUM["WGS_1984",
SPHEROID["WGS 84",6378137,298.2572235630016,
AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],
AUTHORITY["EPSG","4326"]]

(4) I have a file [C:\fwtest\agd66 point.txt] containing a point in AGD66

-151.1025110 -33.7738883

(5) I have a file [C:\Program Files\FWTools2.2.9\fwtest.bat] containing a single line:

gdaltransform -s_srs "c:\fwtest\agd66.wkt" -t_srs "c:\fwtest\wgs84.wkt" < "c:\fwtest\agd66 point.txt" > "c:\fwtest\wgs84 point.txt"

(6) I launch the FWTools shell via the [FWTools Shell] shortcut on the desktop and within the FWTools shell I key:

fwtest

(7) I inspect the resulting file [C:\fwtest\wgs84 point.txt] which shows:

-151.102511 -33.7738883 0

i.e. no transformation has occurred, with GEOTRANS2 I would have expected a result like:

-151.103659 -33.7723069 0

----------------------------

I have tried numerous permutations, including using [-s_srs EPSG:4202 -t_srs EPSG:4326] instead of the *.wkt files (same result) and inserting garbage into the *.wkt files to see if gdaltransform is actually reading them (which it seems to be doing).

I have spent some considerable number of hours on this to no avail so time to run up the white flag - any and all comments appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/e39aefa8/attachment.html
From warmerdam at pobox.com  Fri Dec 19 00:41:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 00:41:32 2008
Subject: [gdal-dev] gdaltransform user problems
In-Reply-To: <B8094383D0754CB79C6B59EFE0272093@DELL8300>
References: <B8094383D0754CB79C6B59EFE0272093@DELL8300>
Message-ID: <494B3409.6010104@pobox.com>

Jack Kirkpatrick wrote:
> Greetings,
> 
> My apologies in advance if the following is stupid but I am not a GIS 
> expert (probably not even a GIS novice).
> 
> Some time ago I had call to transform corner coordinates from 
> "Australian Geodetic Datum 1966" to WGS84 so that I could accurately 
> drape some nautical charts in GeoTiff format onto Google Earth. I used a 
> utility called GEOTRANS2 which produced excellent mathematical results 
> but is decidely clunky to integrate.
> 
> I recently discovered the GDAL utilities and have been trying to 
> replicate this transformation without success.
> ----------------------------
> 
> I have netted down my efforts as follows:
> 
> (1) Environment is Windows XP SP3 and I have installed FWTools 2.2.9.
> 
> (2) I have a file [C:\fwtest\agd66.wkt] containing:
> 
> GEOGCS["AGD66",
> DATUM["Australian_Geodetic_Datum_1966",
> SPHEROID["Australian National Spheroid",6378160,298.249999999996,
> AUTHORITY["EPSG","7003"]],
> AUTHORITY["EPSG","6202"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433],
> AUTHORITY["EPSG","4202"]]

Jack,

Your WKT file does not have any information on how to transform
from AGD66 to WGS84.  Try using:

GEOGCS["AGD66",
DATUM["Australian_Geodetic_Datum_1966",
SPHEROID["Australian National Spheroid",6378160,298.249999999996,
AUTHORITY["EPSG","7003"],
TOWGS84[-133,-48,148]],
AUTHORITY["EPSG","6202"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],
AUTHORITY["EPSG","4202"]]

I got the TOWGS84 values for AGD66 from the geotrans datum list which
is distributed in GDAL as gdal/data/gt_datum.csv.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From cryan at csse.com.au  Fri Dec 19 02:34:19 2008
From: cryan at csse.com.au (Fodder)
Date: Fri Dec 19 02:34:21 2008
Subject: [Gdal-dev] GDAL affine transform Non-North-Up
Message-ID: <21087047.post@talk.nabble.com>


Hi All,

If I know the co-ordinates for all 4 corners of a non-north-up image, how
can I calculate the 6 GDAL affine transform parameters?

Cheers,
Fodder
-- 
View this message in context: http://www.nabble.com/GDAL-affine-transform-Non-North-Up-tp21087047p21087047.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From klokan at klokan.cz  Fri Dec 19 03:02:50 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Fri Dec 19 03:02:53 2008
Subject: [Gdal-dev] GDAL affine transform Non-North-Up
In-Reply-To: <21087047.post@talk.nabble.com>
References: <21087047.post@talk.nabble.com>
Message-ID: <6e41d95b0812190002td778fa1j8f9427cf87d7fff@mail.gmail.com>

Hi,


> If I know the co-ordinates for all 4 corners of a non-north-up image, how
> can I calculate the 6 GDAL affine transform parameters?
>

There is a script gcps2wld.py in GDAL:

You should assign the corners (ground control points) to a raster by:

gdal_translate -of vrt -gcp 0 0 19.3 50.5 ... input.tif temp.vrt

and then

gcps2wld.py temp.vrt

will return a world file.

Best regards

Klokan

P.S.
Direct calculation in pure python is possible for example with:
http://code.google.com/p/oldmapsonline/source/browse/trunk/gcps2wld/python-no-dep/gcps2wld.py

with documetation and a Java version at:
http://blog.oldmapsonline.org/2008/06/georeferencing-images-by-control-points.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/5efc0d8d/attachment.html
From klokan at klokan.cz  Fri Dec 19 03:08:14 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Fri Dec 19 03:08:18 2008
Subject: [gdal-dev] gdal 1.6 build on redhat Linux,
	missing gdal.py _gdalmodule.so
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E66B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E66B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <6e41d95b0812190008i2a3850edy1bc195e2b85dd681@mail.gmail.com>

Hi,

> I just finished building gdal 1.6 on redhat Linux (using gcc 4.2.2, python
> 2.5.2).
>
> After taking Even Rouault and Frank's suggestion, I used the minimized
> driver approach. It seemed to work.
>
>   ./configure --prefix=/home/sgong/dev181/dist --with-png=internal
> --with-libtiff=internal --with-gif=internal --with-geotiff=internal
> --with-libz=/home/sgong/dev181/dist --with-jpeg=/home/sgong/dev181/dist
> --with-hdf4=/home/sgong/dev181/dist --with-hdf5=/home/sgong/dev181/dist
> --without-ogdi --without-jasper --without-ecw --without-curl --without-expat
> --without-dwgdirect --without-mrsid --without-jp2mrsid --without-mysql
> --without-odbc --without-grib --without-pg
>
> One question:
>
> After gdal build, the python files: gdal.py, ogr.py, osr.py, gdalconst.py,
> gdalnumeric.py did not get copied to [local_install]/lib/python
> 2.5/site-packages/.  Nor did the _gdalmodule.a, _gdalmodule.la, _gdalmodu
> le.so,
>
> Did I miss something in config?
>

I am afraid you missed --with-python ...

Best regards

Klokan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/76162051/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Fri Dec 19 04:53:57 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Dec 19 04:54:15 2008
Subject: [gdal-dev] Re: Border slivers and JPEG2000 compression
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4947F859.40605@gov.yk.ca>
	<4EFF8BB964547748A07CA32961810C041362A6D8@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <loom.20081219T092402-67@post.gmane.org>

Smith, Michael <Michael.Smith <at> maine.gov> writes:

> 
> I tried that but it doesn't seem to write to JP2KAK.  If I do this:
> 
> nearblack mosaic_jp2.jp2
> 
> I get this error:
> 0...10..ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 19
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> ERROR 6: WriteBlock() not supported for this dataset.
> 
> I have also tried creating an alpha channel with this:
> gdalwarp -srcnodata 0 -dstalpha *.tif mosaic.tif
> gdal_translate -ot Byte -of JP2KAK mosaic.tif mosaic_jp2.jp2
> 
> That works, but provides a JP2 that is twice the size since it has a
> second band (these are black-and-white images, so one 8-bit band).  I
> tried converting that to a single-band image, hoping it would interpret
> the alpha channel correctly, with this:
> 
> gdal_translate -ot Byte -of JP2KAK -b 1 -a_nodata 0 mosaic_jp2.jp2
> mosaic2_jp2.jp2
> 
> But the output again has a bunch of pixels on the edge which are now not
> value 0.
> 
> I cannot gdal_rasterize -burn the JP2 because gdal_rasterize does not
> write JP2KAK (why is that?  gdal_translate will but not gdal_rasterize)?
> 
> It seems like all the functions I need to work only do so on TIFFs, but
> it's the JP2s I need it to work on.
> 
> Any other suggestions?  Some trick involving alpha channels I don't
> know?  A way to get gdal_rasterize to write JP2KAK?

Hi,

I fear that wavelet compression like in JPEG2000, MrSID and ECW can't keep
black areas totally black.  It theory you could save in file size by 
adding a 1-bit alpha channel to JPEG2000 image, but I do not know how 
to create it and if any program would support using it. If the aim is 
to use JPEG2000 without the disturbing slivers then it might be best 
to get rid of those. Steps to do this are:

1. Make a virtual mosaic from the original tiff files.  There is an
utility for doing that, and perhaps it is this one:
http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py

(By the way, I wonder why standard gdal_merge.py can't have .vrt 
output as an option.)
Creating a virtual mosaic takes only seconds because it does not 
touch the images but it creates only a .vrt file telling how to read 
the originals.

2. Create new rectangular mosaiced images without any black slivers 
by using the .vrt file as an input for gdalwarp program.  That can be 
done with gdalwarp by giving the target extents with -te switch. Gdalwarp
should be able to write out JPEG2000 directly.

I do know that the system works but my instructions may be inaccurate 
because I could not find a working installation from my computer any 
more.

-Jukka Rahkonen-



From m_p_wilcox at yahoo.co.uk  Fri Dec 19 06:43:13 2008
From: m_p_wilcox at yahoo.co.uk (Mark Wilcox)
Date: Fri Dec 19 06:49:56 2008
Subject: [gdal-dev] Porting GDAL to Symbian OS
Message-ID: <851526.98259.qm@web25007.mail.ukl.yahoo.com>

Hi,

I'm leading a project to port the Bluemapia mobile client to Symbian OS.  Bluemapia uses GDAL, so as part of the project we will also be porting GDAL.

In case you didn't already know, you can (mostly) use standard C/C++ on Symbian OS these days and Qt is also being ported (which we will use for the Bluemapia UI).  With an increasingly Linux/Unix like user-space environment and new devices like the recently announced Nokia N97 on the way, I think that Symbian is an ideal platform for open source mobile GIS applications.

Any advice on porting GDAL would be very much appreciated.

Initially we'll only port a small subset of the GDAL drivers, but if anyone is interested in using this port and needs support for specific drivers then please get in touch.

If anyone would like to get involved then you'd be very, very welcome!  I'm also planning a "code camp" or mini-sprint to get the project started in London on Saturday 17th January.  If you would like to attend then please email me before 6th January.

Links for the interested:
Project announcement blog post (with many further links):
http://blogs.forum.nokia.com/blog/mark-wilcoxs-forum-nokia-blog/2008/12/17/qt-on-s60-open-source-project-bluemapia
Bluemapia:
http://www.bluemapia.com
Nokia N97:
http://www.nokia.com/A4136001?newsid=1274500
Symbian OS being moved to open source:
http://www.symbianfoundation.org/

Best regards,
Mark Wilcox


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/396c6fcd/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Fri Dec 19 09:29:42 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Dec 19 09:28:07 2008
Subject: [gdal-dev] gdal 1.6 build on redhat Linux,
	missing gdal.py _gdalmodule.so
In-Reply-To: <6e41d95b0812190008i2a3850edy1bc195e2b85dd681@mail.gmail.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E66B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<6e41d95b0812190008i2a3850edy1bc195e2b85dd681@mail.gmail.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E66D@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thanks Klokan,

I added --with-python 
	  ./configure --prefix=/home/sgong/dev181/dist --with-png=internal --with-libtiff=internal --with-gif=internal --with-geotiff=internal --with-libz=/home/sgong/dev181/dist --with-jpeg=/home/sgong/dev181/dist --with-hdf4=/home/sgong/dev181/dist --with-hdf5=/home/sgong/dev181/dist --without-ogdi --without-jasper --without-ecw --without-curl --without-expat --without-dwgdirect --without-mrsid --without-jp2mrsid --without-mysql --without-odbc --without-grib --without-pg --with-python 

And got error:  /bin/sh: -d: invalid option
	libtool: compile:  gcc -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/home/sgong/dev181/dist/include/python2.5 -I/home/sgong/dev181/dist/lib/python2.5/site-packages/numpy/core/include -I/home/sgong/dev181/gdal-1.6.0/include -c extensions/gdal_wrap.cpp  -fPIC -DPIC -o build/temp.linux-i686-2.5/extensions/.libs/gdal_wrap.o
	extensions/gdal_wrap.cpp: In function `PyObject*
	   _wrap_RegenerateOverviews(PyObject*, PyObject*, PyObject*)':
	extensions/gdal_wrap.cpp:13663: warning: unused variable `int v'
	extensions/gdal_wrap.cpp:13606: warning: `int arg2' might be used uninitialized
	   in this function
	libtool: compile:  gcc -fno-strict-aliasing -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/home/sgong/dev181/dist/include/python2.5 -I/home/sgong/dev181/dist/lib/python2.5/site-packages/numpy/core/include -I/home/sgong/dev181/gdal-1.6.0/include -c extensions/gdal_wrap.cpp -o build/temp.linux-i686-2.5/extensions/gdal_wrap.o >/dev/null 2>&1/bin/sh -pthread -shared build/temp.linux-i686-2.5/extensions/gdal_wrap.o -L../../.libs -L../../ -L/home/sgong/dev181/gdal-1.6.0/lib -lgdal -o build/lib.linux-i686-2.5/osgeo/_gdal.so
	/bin/sh: -d: invalid option
	error: command '/bin/sh' failed with exit status 1
	make[2]: *** [build] Error 1
	make[2]: Leaving directory `/home/sgong/dev181/gdal-1.6.0/swig/python'
	make[1]: *** [build] Error 2
	make[1]: Leaving directory `/home/sgong/dev181/gdal-1.6.0/swig'
	make: *** [swig-modules] Error 2


Would someone help? Thanks, 

Shawn 

________________________________________
From: klokan@gmail.com [mailto:klokan@gmail.com] On Behalf Of Klokan Petr Pridal
Sent: Friday, December 19, 2008 3:08 AM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.6 build on redhat Linux, missing gdal.py _gdalmodule.so

Hi,
I just finished building gdal 1.6 on redhat Linux (using gcc 4.2.2, python 2.5.2).
After taking Even Rouault and Frank's suggestion, I used the minimized driver approach. It seemed to work.
  ./configure --prefix=/home/sgong/dev181/dist --with-png=internal --with-libtiff=internal --with-gif=internal --with-geotiff=internal --with-libz=/home/sgong/dev181/dist --with-jpeg=/home/sgong/dev181/dist --with-hdf4=/home/sgong/dev181/dist --with-hdf5=/home/sgong/dev181/dist --without-ogdi --without-jasper --without-ecw --without-curl --without-expat --without-dwgdirect --without-mrsid --without-jp2mrsid --without-mysql --without-odbc --without-grib --without-pg
One question: 
After gdal build, the python files: gdal.py, ogr.py, osr.py, gdalconst.py, gdalnumeric.py did not get copied to [local_install]/lib/python2.5/site-packages/.  Nor did the _gdalmodule.a, _gdalmodule.la, _gdalmodule.so,
Did I miss something in config?

I am afraid you missed --with-python ...
 
Best regards

Klokan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/c4d0bafc/attachment.html
From joelodom at gmail.com  Fri Dec 19 10:46:30 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Dec 19 10:46:32 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
Message-ID: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>

Has anyone had any experience troubleshooting debugging issues with
Visual Studio?  I can't step in to any GDAL methods from my project,
even though I have debug symbols in the .dll and a debug database file
(.pdb).  Any experiences working this out would be appreciated.
Thanks.


-- 
http://giscoder.blogspot.com/
From matthew.bowen.ctr at nrl.navy.mil  Fri Dec 19 10:47:41 2008
From: matthew.bowen.ctr at nrl.navy.mil (Alex Bowen, Contractor, Code 5774)
Date: Fri Dec 19 10:47:43 2008
Subject: [gdal-dev] GDAL 1.6.0 Java Bindings - Linux
Message-ID: <58e83726e1ed105e9c44bd91b70d7383494bc238@enews.nrl.navy.mil>

I'm having some issues building the GDAL 1.6.0 Java bindings for Linux.
I have built them successfully on Win32 VC8 (x86 and x64) and they seem
to work well.  It sounds like I'm running into a library conflict
problem - but I can't seem to figure it out.

 

I'm building a standard GDAL release, no extra third-party plugins, and
not statically linking PROJ4.

 

GCC: 4.3.2, Libtool: 2.2.4

 

Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu
4.3.2-1ubuntu11' --with-bugurl=file:///usr/share/doc/gcc-4.3/README.Bugs
--enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr
--enable-shared --with-system-zlib --libexecdir=/usr/lib
--without-included-gettext --enable-threads=posix --enable-nls
--with-gxx-include-dir=/usr/include/c++/4.3 --program-suffix=-4.3
--enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc
--enable-mpfr --enable-targets=all --enable-checking=release
--build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.3.2 (Ubuntu 4.3.2-1ubuntu11)

 

The build error:

 

libtool: compile:  g++ -fPIC -g -O2 -Wall -Wdeclaration-after-statement
-I/home/bowen/dev/gdal/gdal-1.6.0/port
-I/home/bowen/dev/gdal/gdal-1.6.0/gcore
-I/home/bowen/dev/gdal/gdal-1.6.0/alg
-I/home/bowen/dev/gdal/gdal-1.6.0/ogr
-I/home/bowen/dev/gdal/gdal-1.6.0/ogr/ogrsf_frmts
-I/home/bowen/dev/jdk1.6.0_11/include
-I/home/bowen/dev/jdk1.6.0_11/include/linux -c gdal_wrap.cpp -o
gdal_wrap.o >/dev/null 2>&1
/bin/sh /home/bowen/dev/gdal/gdal-1.6.0/libtool --mode=link    g++
-shared  /home/bowen/dev/gdal/gdal-1.6.0/libgdal.la gdal_wrap.o -o
libgdaljni.so
libtool: link: g++ gdal_wrap.o -o .libs/libgdaljni.so
/home/bowen/dev/gdal/gdal-1.6.0/.libs/libgdal.so -lz -lrt -ldl
/usr/lib/gcc/i486-linux-gnu/4.3.2/../../../../lib/crt1.o: In function
`_start':
(.text+0x18): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [libgdaljni.so] Error 1

 

Any thoughts?  Am I missing something?

 

Thanks,

 

Alex Bowen

 

alex.bowen@itt.com

bowen@enews.nrl.navy.mil

[id] 301387

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/2bf6a6e7/attachment-0001.html
From bclay at ball.com  Fri Dec 19 10:50:12 2008
From: bclay at ball.com (Clay, Bruce)
Date: Fri Dec 19 10:51:54 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>

Joel:

Is this in C# or C++?  Which version of the compiler?

Bruce

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
Sent: Friday, December 19, 2008 10:47 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Debugging on Windows Using Visual Studio

Has anyone had any experience troubleshooting debugging issues with
Visual Studio?  I can't step in to any GDAL methods from my project,
even though I have debug symbols in the .dll and a debug database file
(.pdb).  Any experiences working this out would be appreciated.
Thanks.


-- 
http://giscoder.blogspot.com/
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From joelodom at gmail.com  Fri Dec 19 10:56:15 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Dec 19 10:56:17 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>

Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
on Visual Studio 2005.  I've tried for an hour or two to step into
gdal, running debug sessions both from the project file from which I
build gdal and from the app that calls into GDAL, but even when I run
from the gdal solution itself, it still doesn't let me step through
source code, even though the modules window says gdal15.dll is loaded
with symbols from the same location as my .pdb file.

Thanks.



On Fri, Dec 19, 2008 at 10:50 AM, Clay, Bruce <bclay@ball.com> wrote:
> Joel:
>
> Is this in C# or C++?  Which version of the compiler?
>
> Bruce
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
> Sent: Friday, December 19, 2008 10:47 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Debugging on Windows Using Visual Studio
>
> Has anyone had any experience troubleshooting debugging issues with
> Visual Studio?  I can't step in to any GDAL methods from my project,
> even though I have debug symbols in the .dll and a debug database file
> (.pdb).  Any experiences working this out would be appreciated.
> Thanks.
>
>
> --
> http://giscoder.blogspot.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> This message and any enclosures are intended only for the addressee.  Please
> notify the sender by email if you are not the intended recipient.  If you are
> not the intended recipient, you may not use, copy, disclose, or distribute this
> message or its contents or enclosures to any other person and any such actions
> may be unlawful.  Ball reserves the right to monitor and review all messages
> and enclosures sent to or from this email address.
>



-- 
http://giscoder.blogspot.com/
From warmerdam at pobox.com  Fri Dec 19 11:06:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 11:06:41 2008
Subject: [gdal-dev] Porting GDAL to Symbian OS
In-Reply-To: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
References: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
Message-ID: <494BC687.5050207@pobox.com>

Mark Wilcox wrote:
> Hi,
> 
> I'm leading a project to port the Bluemapia mobile client to Symbian 
> OS.  Bluemapia uses GDAL, so as part of the project we will also be 
> porting GDAL.

Mark,

I would encourage you to establish a wiki page about your port activities
off:
   http://trac.osgeo.org/gdal/wiki/BuildHints

Don't hesitate to give us an update on your status here on the list after
your code sprint.

Mateusz - I'm looking around for WinCE related docs, and can't seem to
find any in Trac.  Any status and hint info on WinCE builds should also
be linked off the BuildHints page.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Dec 19 11:10:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 11:10:36 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>
Message-ID: <494BC772.5020101@pobox.com>

Joel Odom wrote:
> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
> on Visual Studio 2005.  I've tried for an hour or two to step into
> gdal, running debug sessions both from the project file from which I
> build gdal and from the app that calls into GDAL, but even when I run
> from the gdal solution itself, it still doesn't let me step through
> source code, even though the modules window says gdal15.dll is loaded
> with symbols from the same location as my .pdb file.

Joel,

I have generally not had problems with this.  Did you build GDAL using
the nmake files or the solution?  I've had good luck debugging the
utilities and into GDAL itself with visual studio. I normally run things
from the commandline and pop into visual studio when things crash (even
triggering crashes at select points).

This is usually with visual studio 2003.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Dec 19 11:22:13 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Dec 19 11:22:17 2008
Subject: Fwd: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>
	<494BC772.5020101@pobox.com>
	<d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>
Message-ID: <d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>

More notes on the issue below.


---------- Forwarded message ----------
From: Joel Odom <joelodom@gmail.com>
Date: Fri, Dec 19, 2008 at 11:21 AM
Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
To: Frank Warmerdam <warmerdam@pobox.com>


I'm building from makegdal80.sln.  I'm also starting my debug sessions
from this same solution.  I'm getting symbols in gdal15.dll and the
.pdb file, but I still can't set a break point anywhere.  It's like
the debug symbols don't map correctly to the source code.

I'm wondering if there is some flag in the makefile options that is
not being set, so the program debug information is incomplete?  I am
able to set a break point in my dll that calls gdal, but not anywhere
in the gdal methods.  Again, this is all in VS 2005.  I'll post an
answer here if I figure out the problem before I give up, but if
anyone has any ideas, I'd appreciate it.



On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Joel Odom wrote:
>>
>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>> on Visual Studio 2005.  I've tried for an hour or two to step into
>> gdal, running debug sessions both from the project file from which I
>> build gdal and from the app that calls into GDAL, but even when I run
>> from the gdal solution itself, it still doesn't let me step through
>> source code, even though the modules window says gdal15.dll is loaded
>> with symbols from the same location as my .pdb file.
>
> Joel,
>
> I have generally not had problems with this.  Did you build GDAL using
> the nmake files or the solution?  I've had good luck debugging the
> utilities and into GDAL itself with visual studio. I normally run things
> from the commandline and pop into visual studio when things crash (even
> triggering crashes at select points).
>
> This is usually with visual studio 2003.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>



--
http://giscoder.blogspot.com/



-- 
http://giscoder.blogspot.com/
From dany.geotools at gmail.com  Fri Dec 19 11:59:38 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Dec 19 11:59:41 2008
Subject: [Gdal-dev] Supporting ECW as a plugin on window,
In-Reply-To: <20997632.post@talk.nabble.com>
References: <20997632.post@talk.nabble.com>
Message-ID: <7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>

Hi,
I did a similar thing on 1.4.4 and 1.5.3.
Basically, you are building ECW driver as a plugin as stated by the flag
ECW_PLUGIN = YES
Therefore, you need to do a separate build of the ECW GDAL Driver.
Go in gdal/frmts/ecw and run "nmake /f makefile.vc plugin"
This command should produce a gdal_ECW_JP2ECW.DLL.

Finally you need to define a GDAL_DRIVER_PATH environment variable linking
to the location where you have built gdal_ECW_JP2ECW.DLL.
After this, gdalinfo should find the ECW driver.

Let me know if you have additional issues, since I did these steps on 1.4.4
which needed some fixes that I have copied from 1.6.0 code. (I guess 1.6.0
already contains all the proper declarations)

Regards,
Daniele


On Mon, Dec 15, 2008 at 3:21 AM, wickley <wickleyl@gmail.com> wrote:

>
> Hello , I  have some question about supporting ECW in gdal.but I can not
> solve  it. My step is following:
>
> 1.I download gdal-1.6.0 and
> ImageCompressionSDKSourceCode3.3Setup_20070509.zip from ERMaper webset and
> Windows Server 2003 R2 Platform SDK from microsoft website.
> 2. I set up Windows Server 2003 R2 Platform SDK on my computer in
> D:\Program
> Files2.
> 3. I unzip the ImageCompressionSDKSourceCode3.3Setup_20070509.zip,and
> select
> E:\libecwj2-3.3
>   \Source\NCSBuildQmake\libecwj2_win32_net_shared.vcproj,using visual
> studio 2005.When open the file,
>   it needs translate, and it translates well with no error and just two
> warnings.
> 4. I set visual studio 2005 project->c/c++->general ->include directory,and
> add D:\Program Files2\Microsoft Platform SDK for  Windows Server 2003
> R2\Include
> 5. I select debug,win32 ,and build libecwj2.dll successfully,and it is
> included in E:\libecwj2-3.3\Source\NCSBuildQmake\Debug
> 6. I unzip gdal-1.6.0 to E:\gdal-1.6.0. change MSVC_VER=1400 .
> 7. for ECW support, I Uncomment the following and update to enable ECW
> support.
>    # Uncomment the following and update to enable ECW support.
>    ECW_PLUGIN = YES
>    ECWDIR  =   E:\libecwj2-3.3
>    ECWLIB  =   $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
> 8.   open E:\gdal-1.6.0\frmts\leveller\levellerdataset.cpp,and change { "?,
> kPI / 180.0, UNITLABEL_DEGREE } to
>   { "?", kPI / 180.0, UNITLABEL_DEGREE }
> 9. I start visual studio 2005 commandline , and change the path to
> E:\gdal-1.6.0, then ,I inputs command nmake /f makefile.vc,nmake /f
> makefile.vc install and nmake /f makefile.vc devinstall.
> 10. I copy gdal16.dll to C:\WINDOWS\system32.
> 11. I set tools->options->projec and solution -> vc++ direction
> ->includingfile->C:\warmerda\bld\include
>
> ->libraries->C:\warmerda\bld\lib
> 12.I build a new project,and code following:
>   #include "gdal_priv.h"
>   #include "stdio.h"
>   #include "gdal.h"
>   #pragma comment(lib, "gdal_i.lib")
>   int main()
>   {
>        const char *p=NULL;
>        GDALDataset  *poDataset=NULL;
>        GDALDriver *pDriver=NULL;
>        GDALAllRegister();
>        int t =GDALGetDriverCount();
>        printf("%d\n",t);
>        for(int k=0;k<t;k++)
>        {
>                const char *pt=NULL;
>                pDriver=(GDALDriver *)GDALGetDriver(k);
>                pt=pDriver->GetDescription();
>                printf("%s\n",pt);
>        }
>  }
> result:
> 75
> VRT
> GTiff
> NITF
> RPFTOC
> HFA
> SAR_CEOS
> CEOS
> JAXAPALSAR
> GFF
> ELAS
> AIG
> AAIGrid
> SDTS
> DTED
> PNG
> JPEG
> MEM
> JDEM
> GIF
> ESAT
> BSB
> XPM
> BMP
> DIMAP
> AirSAR
> RS2
> PCIDSK
> PCRaster
> ILWIS
> SGI
> SRTMHGT
> Leveller
> Terragen
> ISIS3
> ISIS2
> PDS
> ERS
> L1B
> FIT
> GRIB
> RMF
> MSGN
> RST
> INGR
> GSAG
> GSBG
> GS7BG
> COSAR
> TSX
> COASP
> PNM
> DOQ1
> DOQ2
> ENVI
> EHdr
> GenBin
> PAux
> MFF
> MFF2
> FujiBAS
> GSC
> FAST
> BT
> LAN
> CPG
> IDA
> NDF
> EIR
> DIPEx
> LCP
> RIK
> USGSDEM
> GXF
> ADRG
> BLX
>
> there is no ECW,why?can anyone help me?
> --
> View this message in context:
> http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632p20997632.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/3e92385f/attachment-0001.html
From dany.geotools at gmail.com  Fri Dec 19 12:09:00 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Dec 19 12:09:04 2008
Subject: [Gdal-dev] Supporting ECW as a plugin on window,
In-Reply-To: <7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>
References: <20997632.post@talk.nabble.com>
	<7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>
Message-ID: <7221db410812190909g7956c940kfe7223706a05e413@mail.gmail.com>

Hi again,
a side note:
in the subject of your email, you are asking for "supporting ECW as a
plugin" whilst in the body of your email you are generally asking for
supporting ECW in GDAL.
The steps I have suggested in the previous email, are needed only if you
need to add ECW support as a separate plugin.
In case your aim is simply adding ECW in GDAL (without leveraging on the
"Plugin way") you can simply rebuild GDAL after having removed the
"ECW_PLUGIN = YES" line from NMAKE.opt.

Hope this help.
Regards,
Daniele

On Fri, Dec 19, 2008 at 5:59 PM, Daniele Romagnoli
<dany.geotools@gmail.com>wrote:

> Hi,
> I did a similar thing on 1.4.4 and 1.5.3.
> Basically, you are building ECW driver as a plugin as stated by the flag
> ECW_PLUGIN = YES
> Therefore, you need to do a separate build of the ECW GDAL Driver.
> Go in gdal/frmts/ecw and run "nmake /f makefile.vc plugin"
> This command should produce a gdal_ECW_JP2ECW.DLL.
>
> Finally you need to define a GDAL_DRIVER_PATH environment variable linking
> to the location where you have built gdal_ECW_JP2ECW.DLL.
> After this, gdalinfo should find the ECW driver.
>
> Let me know if you have additional issues, since I did these steps on 1.4.4
> which needed some fixes that I have copied from 1.6.0 code. (I guess 1.6.0
> already contains all the proper declarations)
>
> Regards,
> Daniele
>
>
>
> On Mon, Dec 15, 2008 at 3:21 AM, wickley <wickleyl@gmail.com> wrote:
>
>>
>> Hello , I  have some question about supporting ECW in gdal.but I can not
>> solve  it. My step is following:
>>
>> 1.I download gdal-1.6.0 and
>> ImageCompressionSDKSourceCode3.3Setup_20070509.zip from ERMaper webset and
>> Windows Server 2003 R2 Platform SDK from microsoft website.
>> 2. I set up Windows Server 2003 R2 Platform SDK on my computer in
>> D:\Program
>> Files2.
>> 3. I unzip the ImageCompressionSDKSourceCode3.3Setup_20070509.zip,and
>> select
>> E:\libecwj2-3.3
>>   \Source\NCSBuildQmake\libecwj2_win32_net_shared.vcproj,using visual
>> studio 2005.When open the file,
>>   it needs translate, and it translates well with no error and just two
>> warnings.
>> 4. I set visual studio 2005 project->c/c++->general ->include
>> directory,and
>> add D:\Program Files2\Microsoft Platform SDK for  Windows Server 2003
>> R2\Include
>> 5. I select debug,win32 ,and build libecwj2.dll successfully,and it is
>> included in E:\libecwj2-3.3\Source\NCSBuildQmake\Debug
>> 6. I unzip gdal-1.6.0 to E:\gdal-1.6.0. change MSVC_VER=1400 .
>> 7. for ECW support, I Uncomment the following and update to enable ECW
>> support.
>>    # Uncomment the following and update to enable ECW support.
>>    ECW_PLUGIN = YES
>>    ECWDIR  =   E:\libecwj2-3.3
>>    ECWLIB  =   $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
>> 8.   open E:\gdal-1.6.0\frmts\leveller\levellerdataset.cpp,and change {
>> "?,
>> kPI / 180.0, UNITLABEL_DEGREE } to
>>   { "?", kPI / 180.0, UNITLABEL_DEGREE }
>> 9. I start visual studio 2005 commandline , and change the path to
>> E:\gdal-1.6.0, then ,I inputs command nmake /f makefile.vc,nmake /f
>> makefile.vc install and nmake /f makefile.vc devinstall.
>> 10. I copy gdal16.dll to C:\WINDOWS\system32.
>> 11. I set tools->options->projec and solution -> vc++ direction
>> ->includingfile->C:\warmerda\bld\include
>>
>> ->libraries->C:\warmerda\bld\lib
>> 12.I build a new project,and code following:
>>   #include "gdal_priv.h"
>>   #include "stdio.h"
>>   #include "gdal.h"
>>   #pragma comment(lib, "gdal_i.lib")
>>   int main()
>>   {
>>        const char *p=NULL;
>>        GDALDataset  *poDataset=NULL;
>>        GDALDriver *pDriver=NULL;
>>        GDALAllRegister();
>>        int t =GDALGetDriverCount();
>>        printf("%d\n",t);
>>        for(int k=0;k<t;k++)
>>        {
>>                const char *pt=NULL;
>>                pDriver=(GDALDriver *)GDALGetDriver(k);
>>                pt=pDriver->GetDescription();
>>                printf("%s\n",pt);
>>        }
>>  }
>> result:
>> 75
>> VRT
>> GTiff
>> NITF
>> RPFTOC
>> HFA
>> SAR_CEOS
>> CEOS
>> JAXAPALSAR
>> GFF
>> ELAS
>> AIG
>> AAIGrid
>> SDTS
>> DTED
>> PNG
>> JPEG
>> MEM
>> JDEM
>> GIF
>> ESAT
>> BSB
>> XPM
>> BMP
>> DIMAP
>> AirSAR
>> RS2
>> PCIDSK
>> PCRaster
>> ILWIS
>> SGI
>> SRTMHGT
>> Leveller
>> Terragen
>> ISIS3
>> ISIS2
>> PDS
>> ERS
>> L1B
>> FIT
>> GRIB
>> RMF
>> MSGN
>> RST
>> INGR
>> GSAG
>> GSBG
>> GS7BG
>> COSAR
>> TSX
>> COASP
>> PNM
>> DOQ1
>> DOQ2
>> ENVI
>> EHdr
>> GenBin
>> PAux
>> MFF
>> MFF2
>> FujiBAS
>> GSC
>> FAST
>> BT
>> LAN
>> CPG
>> IDA
>> NDF
>> EIR
>> DIPEx
>> LCP
>> RIK
>> USGSDEM
>> GXF
>> ADRG
>> BLX
>>
>> there is no ECW,why?can anyone help me?
>> --
>> View this message in context:
>> http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632p20997632.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
>
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/8f06fdef/attachment.html
From mo at discoveraai.com  Fri Dec 19 12:57:08 2008
From: mo at discoveraai.com (Mo Wang)
Date: Fri Dec 19 12:57:10 2008
Subject: [Gdal-dev] Supporting ECW as a plugin on window,
In-Reply-To: <7221db410812190909g7956c940kfe7223706a05e413@mail.gmail.com>
References: <20997632.post@talk.nabble.com><7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>
	<7221db410812190909g7956c940kfe7223706a05e413@mail.gmail.com>
Message-ID: <9E8339A1A958CA43851FF336135F43ADD25191@admin.discover-aai.office>

Wickley,

 

When I typed www.ermapper.com <http://www.ermapper.com/>  I was led to
www.erdas.com <http://www.erdas.com/>  instead. Did the same occur to
you? If so, how did you get
ImageCompressionSDKSourceCode3.3Setup_20070509.zip from www.erdas.com
<http://www.erdas.com/> ? All I got from www.erdas.com
<http://www.erdas.com/>  was ecw_jpeg_2000_sdk_3_3.zip which I don't
think is the same as ImageCompressionSDKSourceCode3.3Setup_20070509.zip.
If not, how did you get to ER Mapper website?

 

Thanks.

 

Mo Wang

 

Applied Analysis Inc.

 

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Daniele Romagnoli
Sent: Friday, December 19, 2008 12:09 PM
To: wickley
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [Gdal-dev] Supporting ECW as a plugin on window,

 

Hi again,
a side note:
in the subject of your email, you are asking for "supporting ECW as a
plugin" whilst in the body of your email you are generally asking for
supporting ECW in GDAL.
The steps I have suggested in the previous email, are needed only if you
need to add ECW support as a separate plugin.
In case your aim is simply adding ECW in GDAL (without leveraging on the
"Plugin way") you can simply rebuild GDAL after having removed the
"ECW_PLUGIN = YES" line from NMAKE.opt. 

Hope this help.
Regards,
Daniele

On Fri, Dec 19, 2008 at 5:59 PM, Daniele Romagnoli
<dany.geotools@gmail.com> wrote:

Hi, 
I did a similar thing on 1.4.4 and 1.5.3.
Basically, you are building ECW driver as a plugin as stated by the flag
ECW_PLUGIN = YES
Therefore, you need to do a separate build of the ECW GDAL Driver. 
Go in gdal/frmts/ecw and run "nmake /f makefile.vc plugin"
This command should produce a gdal_ECW_JP2ECW.DLL.

Finally you need to define a GDAL_DRIVER_PATH environment variable
linking to the location where you have built gdal_ECW_JP2ECW.DLL.
After this, gdalinfo should find the ECW driver.

Let me know if you have additional issues, since I did these steps on
1.4.4 which needed some fixes that I have copied from 1.6.0 code. (I
guess 1.6.0 already contains all the proper declarations)

Regards,
Daniele





On Mon, Dec 15, 2008 at 3:21 AM, wickley <wickleyl@gmail.com> wrote:


Hello , I  have some question about supporting ECW in gdal.but I can not
solve  it. My step is following:

1.I download gdal-1.6.0 and
ImageCompressionSDKSourceCode3.3Setup_20070509.zip from ERMaper webset
and
Windows Server 2003 R2 Platform SDK from microsoft website.
2. I set up Windows Server 2003 R2 Platform SDK on my computer in
D:\Program
Files2.
3. I unzip the ImageCompressionSDKSourceCode3.3Setup_20070509.zip,and
select
E:\libecwj2-3.3
  \Source\NCSBuildQmake\libecwj2_win32_net_shared.vcproj,using visual
studio 2005.When open the file,
  it needs translate, and it translates well with no error and just two
warnings.
4. I set visual studio 2005 project->c/c++->general ->include
directory,and
add D:\Program Files2\Microsoft Platform SDK for  Windows Server 2003
R2\Include
5. I select debug,win32 ,and build libecwj2.dll successfully,and it is
included in E:\libecwj2-3.3\Source\NCSBuildQmake\Debug
6. I unzip gdal-1.6.0 to E:\gdal-1.6.0. change MSVC_VER=1400 .
7. for ECW support, I Uncomment the following and update to enable ECW
support.
   # Uncomment the following and update to enable ECW support.
   ECW_PLUGIN = YES
   ECWDIR  =   E:\libecwj2-3.3
   ECWLIB  =   $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
8.   open E:\gdal-1.6.0\frmts\leveller\levellerdataset.cpp,and change {
"?,
kPI / 180.0, UNITLABEL_DEGREE } to
  { "?", kPI / 180.0, UNITLABEL_DEGREE }
9. I start visual studio 2005 commandline , and change the path to
E:\gdal-1.6.0, then ,I inputs command nmake /f makefile.vc,nmake /f
makefile.vc install and nmake /f makefile.vc devinstall.
10. I copy gdal16.dll to C:\WINDOWS\system32.
11. I set tools->options->projec and solution -> vc++ direction
->includingfile->C:\warmerda\bld\include

->libraries->C:\warmerda\bld\lib
12.I build a new project,and code following:
  #include "gdal_priv.h"
  #include "stdio.h"
  #include "gdal.h"
  #pragma comment(lib, "gdal_i.lib")
  int main()
  {
       const char *p=NULL;
       GDALDataset  *poDataset=NULL;
       GDALDriver *pDriver=NULL;
       GDALAllRegister();
       int t =GDALGetDriverCount();
       printf("%d\n",t);
       for(int k=0;k<t;k++)
       {
               const char *pt=NULL;
               pDriver=(GDALDriver *)GDALGetDriver(k);
               pt=pDriver->GetDescription();
               printf("%s\n",pt);
       }
 }
result:
75
VRT
GTiff
NITF
RPFTOC
HFA
SAR_CEOS
CEOS
JAXAPALSAR
GFF
ELAS
AIG
AAIGrid
SDTS
DTED
PNG
JPEG
MEM
JDEM
GIF
ESAT
BSB
XPM
BMP
DIMAP
AirSAR
RS2
PCIDSK
PCRaster
ILWIS
SGI
SRTMHGT
Leveller
Terragen
ISIS3
ISIS2
PDS
ERS
L1B
FIT
GRIB
RMF
MSGN
RST
INGR
GSAG
GSBG
GS7BG
COSAR
TSX
COASP
PNM
DOQ1
DOQ2
ENVI
EHdr
GenBin
PAux
MFF
MFF2
FujiBAS
GSC
FAST
BT
LAN
CPG
IDA
NDF
EIR
DIPEx
LCP
RIK
USGSDEM
GXF
ADRG
BLX

there is no ECW,why?can anyone help me?
--
View this message in context:
http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632
p20997632.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





-- 
-------------------------------------------------------
Eng. Daniele Romagnoli 
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------




-- 
-------------------------------------------------------
Eng. Daniele Romagnoli 
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/8d255a9c/attachment-0001.html
From Michael.Smith at maine.gov  Fri Dec 19 13:56:33 2008
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Fri Dec 19 13:56:42 2008
Subject: [gdal-dev] JPEG compression in TIF doesn't work
In-Reply-To: <20081219175712.9685FE014FE@lists.osgeo.org>
References: <20081219175712.9685FE014FE@lists.osgeo.org>
Message-ID: <4EFF8BB964547748A07CA32961810C041362A6F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>

I have an 8-bit tif aerial photo, when I try to compress it with JPEG
compression in any of the following examples:

gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
"JPEG_QUALITY=100" allagash-lake.tif test_jpeg100_tif.tif
gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
"JPEG_QUALITY=20" allagash-lake.tif test_jpeg20_tif.tif
gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" allagash-lake.tif
test_jpeg_tif.tif

I get the error message:

Warning 1: JPEGLib:Application transferred too many scanlines

And there is a small part at the bottom where the rows are all value 0
(and they shouldn't be).  Looks like it skips the last 11 rows and sets
them all to 0 (in an image that is 9728c x 13963r)

**********
Michael Smith
State GIS Manager
Maine Office of GIS 
From randre at gmail.com  Fri Dec 19 14:13:24 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri Dec 19 14:13:26 2008
Subject: [gdal-dev] Unexpected behavior with gdal_merge.py
Message-ID: <9c2015090812191113s432680ai171c8ba5876aaec2@mail.gmail.com>

Just a quick question to ask for an explanation regarding something I've
just seen in gdal_merge.py.  I have 6 tiles arranged in 2 columns, and which
I've mosaic'd together.  I was asked to re-register the tiles in the 1st
column by 1/2 a pixel SW.  I've done this, and in openev I can see that the
individual tiles are shifted SW, thereby causing a gap to appear between the
2 columns.  All good, and what I expected.  However, when I mosaic the tiles
together with gdal_merge.py, there is no gap, and it actually appears as
though the tiles in the 2nd column have been shifted to fill the gap.  Is
this to be expected?  I've read that it is possible to mosaic tiles together
using gdalwarp, but I'm not sure how to do this.  If I used gdalwarp
instead, would I have the expected gap?

Thanks,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/286315c2/attachment.html
From even.rouault at mines-paris.org  Fri Dec 19 14:21:22 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 19 14:21:28 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release
In-Reply-To: <494A8A7C.8010302@pobox.com>
References: <494A8A7C.8010302@pobox.com>
Message-ID: <200812192021.23003.even.rouault@mines-paris.org>

Le Thursday 18 December 2008 18:38:04 Frank Warmerdam, vous avez ?crit?:
> Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release.
>

+1

>
> Best regards,


From warmerdam at pobox.com  Fri Dec 19 14:21:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 14:21:48 2008
Subject: [gdal-dev] Unexpected behavior with gdal_merge.py
In-Reply-To: <9c2015090812191113s432680ai171c8ba5876aaec2@mail.gmail.com>
References: <9c2015090812191113s432680ai171c8ba5876aaec2@mail.gmail.com>
Message-ID: <494BF444.3020102@pobox.com>

Roger Andr? wrote:
> Just a quick question to ask for an explanation regarding something I've 
> just seen in gdal_merge.py.  I have 6 tiles arranged in 2 columns, and 
> which I've mosaic'd together.  I was asked to re-register the tiles in 
> the 1st column by 1/2 a pixel SW.  I've done this, and in openev I can 
> see that the individual tiles are shifted SW, thereby causing a gap to 
> appear between the 2 columns.  All good, and what I expected.  However, 
> when I mosaic the tiles together with gdal_merge.py, there is no gap, 
> and it actually appears as though the tiles in the 2nd column have been 
> shifted to fill the gap.  Is this to be expected?  I've read that it is 
> possible to mosaic tiles together using gdalwarp, but I'm not sure how 
> to do this.  If I used gdalwarp instead, would I have the expected gap?

Roger,

I don't have a precise answer to your question (lacking all sorts of
details).  I will note that gdal_merge is not savvy about subpixel
location issues.  It basically takes the top left and bottom right
corner of the input image and tries to map it to a pixel region on the
mosaic. In doing this is somewhat careless about subpixel rounding issues.

If you need precision, gdalwarp may be more appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Dec 19 14:22:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 14:23:05 2008
Subject: [gdal-dev] JPEG compression in TIF doesn't work
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A6F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <20081219175712.9685FE014FE@lists.osgeo.org>
	<4EFF8BB964547748A07CA32961810C041362A6F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <494BF490.3020603@pobox.com>

Smith, Michael wrote:
> I have an 8-bit tif aerial photo, when I try to compress it with JPEG
> compression in any of the following examples:
> 
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
> "JPEG_QUALITY=100" allagash-lake.tif test_jpeg100_tif.tif
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
> "JPEG_QUALITY=20" allagash-lake.tif test_jpeg20_tif.tif
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" allagash-lake.tif
> test_jpeg_tif.tif
> 
> I get the error message:
> 
> Warning 1: JPEGLib:Application transferred too many scanlines
> 
> And there is a small part at the bottom where the rows are all value 0
> (and they shouldn't be).  Looks like it skips the last 11 rows and sets
> them all to 0 (in an image that is 9728c x 13963r)

Michael,

What is the size of your input image in pixels and lines?

What does the gdalinfo report on the output file look like?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Dec 19 14:35:47 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Dec 19 14:35:49 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>
	<494BC772.5020101@pobox.com>
	<d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>
	<d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>
Message-ID: <d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>

Problem solved.  For the benefit of the group and the searchable list
archives, I'll describe here what was going on.

My build on Windows, using makegdal80.sln, was generating a gdal15.dll
with symbols and gdal15.pdb file.  For whatever reason, these files
did not contain sufficient information for me to step in to the code
in a debug session.  After poking around for some time, I found that
the OPTFLAGS in nmake.opt were set to the optimized build.  I'm not
sure why I was seeing the debug symbols loading, but changing OPTFLAGS
to generate a gdal.pdb (along with the gdal15.pdb) gave me the debug
information I needed.  (In 1.6.0, the OPTFLAGS is set for debug when
DEBUG is defined, which seems to make more sense.)



On Fri, Dec 19, 2008 at 11:22 AM, Joel Odom <joelodom@gmail.com> wrote:
> More notes on the issue below.
>
>
> ---------- Forwarded message ----------
> From: Joel Odom <joelodom@gmail.com>
> Date: Fri, Dec 19, 2008 at 11:21 AM
> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
> To: Frank Warmerdam <warmerdam@pobox.com>
>
>
> I'm building from makegdal80.sln.  I'm also starting my debug sessions
> from this same solution.  I'm getting symbols in gdal15.dll and the
> .pdb file, but I still can't set a break point anywhere.  It's like
> the debug symbols don't map correctly to the source code.
>
> I'm wondering if there is some flag in the makefile options that is
> not being set, so the program debug information is incomplete?  I am
> able to set a break point in my dll that calls gdal, but not anywhere
> in the gdal methods.  Again, this is all in VS 2005.  I'll post an
> answer here if I figure out the problem before I give up, but if
> anyone has any ideas, I'd appreciate it.
>
>
>
> On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Joel Odom wrote:
>>>
>>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>>> on Visual Studio 2005.  I've tried for an hour or two to step into
>>> gdal, running debug sessions both from the project file from which I
>>> build gdal and from the app that calls into GDAL, but even when I run
>>> from the gdal solution itself, it still doesn't let me step through
>>> source code, even though the modules window says gdal15.dll is loaded
>>> with symbols from the same location as my .pdb file.
>>
>> Joel,
>>
>> I have generally not had problems with this.  Did you build GDAL using
>> the nmake files or the solution?  I've had good luck debugging the
>> utilities and into GDAL itself with visual studio. I normally run things
>> from the commandline and pop into visual studio when things crash (even
>> triggering crashes at select points).
>>
>> This is usually with visual studio 2003.
>>
>> Best regards,
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>
>>
>
>
>
> --
> http://giscoder.blogspot.com/
>
>
>
> --
> http://giscoder.blogspot.com/
>



-- 
http://giscoder.blogspot.com/
From Michael.Smith at maine.gov  Fri Dec 19 15:14:54 2008
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Fri Dec 19 15:14:58 2008
Subject: [gdal-dev] JPEG compression in TIF doesn't work
In-Reply-To: <494BF490.3020603@pobox.com>
References: <20081219175712.9685FE014FE@lists.osgeo.org>
	<4EFF8BB964547748A07CA32961810C041362A6F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<494BF490.3020603@pobox.com>
Message-ID: <4EFF8BB964547748A07CA32961810C041362A6F5@SOM-TEAQASMAIL1.som.w2k.state.me.us>

C:\nwdoqs>gdalinfo test_jpeg100_tif.tif

Driver: GTiff/GeoTIFF
Files: test_jpeg100_tif.tif
       test_jpeg100_tif.aux
Size is 9728, 13963
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-69],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26919"]]
Origin = (451821.274973547090000,5135906.297448008300000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_SOFTWARE=Arc/Info
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  451821.275, 5135906.297) ( 69d37'35.22"W, 46d22'30.06"N)
Lower Left  (  451821.275, 5121943.297) ( 69d37'30.07"W, 46d14'57.69"N)
Upper Right (  461549.275, 5135906.297) ( 69d29'59.88"W, 46d22'32.30"N)
Lower Right (  461549.275, 5121943.297) ( 69d29'55.76"W, 46d14'59.92"N)
Center      (  456685.275, 5128924.797) ( 69d33'45.23"W, 46d18'45.05"N)
Band 1 Block=9728x16 Type=Byte, ColorInterp=Gray
  Metadata:
    LAYER_TYPE=athematic


**********
Michael Smith
State GIS Manager
Maine Office of GIS 
-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Friday, December 19, 2008 2:23 PM
To: Smith, Michael
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] JPEG compression in TIF doesn't work

Smith, Michael wrote:
> I have an 8-bit tif aerial photo, when I try to compress it with JPEG
> compression in any of the following examples:
> 
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
> "JPEG_QUALITY=100" allagash-lake.tif test_jpeg100_tif.tif
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG" -co
> "JPEG_QUALITY=20" allagash-lake.tif test_jpeg20_tif.tif
> gdal_translate -ot Byte -of GTiff -co "COMPRESS=JPEG"
allagash-lake.tif
> test_jpeg_tif.tif
> 
> I get the error message:
> 
> Warning 1: JPEGLib:Application transferred too many scanlines
> 
> And there is a small part at the bottom where the rows are all value 0
> (and they shouldn't be).  Looks like it skips the last 11 rows and
sets
> them all to 0 (in an image that is 9728c x 13963r)

Michael,

What is the size of your input image in pixels and lines?

What does the gdalinfo report on the output file look like?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt at klaric.com  Fri Dec 19 15:16:53 2008
From: matt at klaric.com (Matt Klaric)
Date: Fri Dec 19 15:16:56 2008
Subject: [gdal-dev] 1-bit TIFF Images
Message-ID: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>

Does anyone have any experience using 1-bit TIFF images with GDAL?  The
GeoTIFF file format page (http://www.gdal.org/frmt_gtiff.html) indicates
that they can be read, but is silent on the issue of writing them.  I'm
interested in writing them using GDAL, but it appears that the 1-bit data
type is not valid in GDAL(
http://gdal.org/gdal_8h.html#22e22ce0a55036a96f652765793fb7a4).  Does anyone
have any experience with this?  How difficult would it be to modify the TIFF
driver to handle these?

Thanks,
Matt Klaric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/014c6b38/attachment-0001.html
From even.rouault at mines-paris.org  Fri Dec 19 15:26:14 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 19 15:26:18 2008
Subject: [gdal-dev] 1-bit TIFF Images
In-Reply-To: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>
References: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>
Message-ID: <200812192126.15335.even.rouault@mines-paris.org>

Matt,

The TIFF driver also supports writing 1-bit TIFF images. See NBITS in the 
Creation Options section.

For example: gdal_translate source.tif output_1bit.tif -co NBITS=1

When reading a 1-bit TIFF image, GDAL will expand each bit as a byte.
When writting a 1-bit TIFF image, GDAL will write 1 as the bit value if the 
pixel value is non-zero, or 0 as the bit value if the pixel value is zero.

Le Friday 19 December 2008 21:16:53 Matt Klaric, vous avez ?crit?:
> Does anyone have any experience using 1-bit TIFF images with GDAL?  The
> GeoTIFF file format page (http://www.gdal.org/frmt_gtiff.html) indicates
> that they can be read, but is silent on the issue of writing them.  I'm
> interested in writing them using GDAL, but it appears that the 1-bit data
> type is not valid in GDAL(
> http://gdal.org/gdal_8h.html#22e22ce0a55036a96f652765793fb7a4).  Does
> anyone have any experience with this?  How difficult would it be to modify
> the TIFF driver to handle these?
>
> Thanks,
> Matt Klaric


From matt at klaric.com  Fri Dec 19 15:33:30 2008
From: matt at klaric.com (Matt Klaric)
Date: Fri Dec 19 15:33:32 2008
Subject: [gdal-dev] 1-bit TIFF Images
In-Reply-To: <200812192126.15335.even.rouault@mines-paris.org>
References: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>
	<200812192126.15335.even.rouault@mines-paris.org>
Message-ID: <eba00f2b0812191233k5b70f30o3cf23f924686d070@mail.gmail.com>

On Fri, Dec 19, 2008 at 2:26 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> The TIFF driver also supports writing 1-bit TIFF images. See NBITS in the
> Creation Options section.
>
>
Thanks.  This was exactly what I was looking for.  I wasn't expecting it as
a creation option.

--Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/5204df17/attachment.html
From neteler at osgeo.org  Fri Dec 19 15:33:38 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Fri Dec 19 15:33:40 2008
Subject: [gdal-dev] 1-bit TIFF Images
In-Reply-To: <200812192126.15335.even.rouault@mines-paris.org>
References: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>
	<200812192126.15335.even.rouault@mines-paris.org>
Message-ID: <86782b610812191233m7a3cba3die7c3d5859d6e3d58@mail.gmail.com>

Even,

On Fri, Dec 19, 2008 at 9:26 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Matt,
>
> The TIFF driver also supports writing 1-bit TIFF images. See NBITS in the
> Creation Options section.
>
> For example: gdal_translate source.tif output_1bit.tif -co NBITS=1
>
> When reading a 1-bit TIFF image, GDAL will expand each bit as a byte.
> When writting a 1-bit TIFF image, GDAL will write 1 as the bit value if the
> pixel value is non-zero, or 0 as the bit value if the pixel value is zero.

Just to understand: is a 1-bit TIFF written or a 1-byte TIFF with only
1 bit used?

Markus
From warmerdam at pobox.com  Fri Dec 19 15:42:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 15:42:55 2008
Subject: [gdal-dev] 1-bit TIFF Images
In-Reply-To: <86782b610812191233m7a3cba3die7c3d5859d6e3d58@mail.gmail.com>
References: <eba00f2b0812191216k73e1f33bk4391a7376c356c85@mail.gmail.com>
	<200812192126.15335.even.rouault@mines-paris.org>
	<86782b610812191233m7a3cba3die7c3d5859d6e3d58@mail.gmail.com>
Message-ID: <494C074B.5040701@pobox.com>

Markus Neteler wrote:
> Even,
> 
> On Fri, Dec 19, 2008 at 9:26 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Matt,
>>
>> The TIFF driver also supports writing 1-bit TIFF images. See NBITS in the
>> Creation Options section.
>>
>> For example: gdal_translate source.tif output_1bit.tif -co NBITS=1
>>
>> When reading a 1-bit TIFF image, GDAL will expand each bit as a byte.
>> When writting a 1-bit TIFF image, GDAL will write 1 as the bit value if the
>> pixel value is non-zero, or 0 as the bit value if the pixel value is zero.
> 
> Just to understand: is a 1-bit TIFF written or a 1-byte TIFF with only
> 1 bit used?

Markus,

It is written as a true one bit file.  You can even use the special 1bit
compression types (fax3 and fax4).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Dec 19 15:51:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 19 15:51:48 2008
Subject: [gdal-dev] JPEG compression in TIF doesn't work
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A6F5@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <20081219175712.9685FE014FE@lists.osgeo.org>
	<4EFF8BB964547748A07CA32961810C041362A6F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<494BF490.3020603@pobox.com>
	<4EFF8BB964547748A07CA32961810C041362A6F5@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <494C0958.7090802@pobox.com>

Smith, Michael wrote:
>> I get the error message:
>>
>> Warning 1: JPEGLib:Application transferred too many scanlines

Michael,

I have confirmed a similar problem.  Could you file a ticket in the GDAL
Trac on this topic?  The problem (apparently) only occurs when the image
height is not a multiple of the strip/block size (16 in this case).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From greg at ergonosis.com  Fri Dec 19 17:04:19 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Dec 19 17:04:26 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494AB0BC.2050502@geoanalytic.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com> <494AB0BC.2050502@geoanalytic.com>
Message-ID: <494C1A63.8010908@ergonosis.com>

Hi,

I performed the OpenJump procedure.  But, I still get:

Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none 
--vector afadmn2n.shp --fid 3  --raster rfe_2006_04_pct.tif --stats  
results.txt avg --out-prefix bar --out-type table
Number of features: 550
starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
        0% terminate called after throwing an instance of 
'geos::util::TopologyException'
  what():  TopologyException: side location conflict -8.25 23.1536
Abort trap

I noticed running the above does create a file called bar_table.csv.  
Here are the first few lines of this file:

FID,AREA,PERIMETER,AFADMN2N_,AFADMN2N_I,CNT_ABB,ADMIN2,FEWSID,CNTRY_NAME,VALUE,DEK_,SEAS_START,col,row,x,y,Band1
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,81,142,-12.050,25.950,99.041527
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,82,142,-11.950,25.950,99.358971
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,83,142,-11.850,25.950,99.358971
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,84,142,-11.750,25.950,99.358971
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,85,142,-11.650,25.950,98.070740
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,86,142,-11.550,25.950,98.705505
0,              23.2300000000000004,              
24.2429999999999986,               2,               2,MR,TIRIS 
ZEMMOUR,MR2TIRIS ZEMMOUR,Mauritania,               
2,,1,87,142,-11.450,25.950,99.999992

I happen to know that TIRIS ZEMMOUR, Mauritania shares a boundary with 
ADRAR, Mauritania.  The point, (-8.25, 23.1536), which appears in the 
TopologyException, lies on this boundary.  Maybe it got through Tiris 
Zemmour OK, then hung on Adrar for some reason.  Apparently, Tiris 
Zemmour has FID 0.  Maybe Adrar has FID 1, and starspan is iterating 
over the FIDs sequentially.  If these assumptions are correct, this 
would suggest a problem with the Adrar geometry.

So:

a) Is there some way to get a dump of FIDs with their corresponding 
country/province names?
b) What other steps might I take to detect/fix any side location conflict(s)
c) The docs on the starspan wiki are out of sync with the current 
version (1.2.03).  Are there updated docs for starspan?  Should I fall 
back to a previous version?

I greatly appreciate your help on this.

Best,

Greg

Brent Fraser wrote:
> Greg,
>
>  OpenJump is a good topology/geometry fixing tool.  Load your 
> shapefile and do Tools->Generate->Buffer, set the Buffer distance to 0 
> to clean up the polygon vertices.  I seem to recall it may have a 
> problem preserving attributes when the results are saved as a 
> shapefile, but you may be able to just use the new .shp portion with 
> the old .dbf and .shx if the resulting geometry records are not 
> re-ordered.
>
> Brent
>
>
>
> Greg Ederer wrote:
>> Brent,
>>
>> My Google search didn't turn up much of use (most of the results were 
>> PostGIS-specific).  Do you know of a tool that would tell me which 
>> feature(s) have problems?  Do you know of a tool that might be able 
>> to fix these polygons?
>>
>> Thanks!
>>
>> Greg
>>
>> Brent Fraser wrote:
>>> Greg,
>>>
>>>  It means the GEOS topology library is having problems with geometry 
>>> of your input shapefile.  Most likely related to duplicate vertices 
>>> (or near-duplicate) in a polygon.  Do a Google for "side location 
>>> conflict".   It would be nice if it spat out the FID of the 
>>> offending polygon...
>>>
>>> Brent
>>> Greg Ederer wrote:
>>>> Hi Brent,
>>>>
>>>> Thanks for the example.  Here's what I got:
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg
>>>> starspan: --out-prefix: ?
>>>> Type `starspan --help' for help
>>>>
>>>> I then added a --out-prefix, like so:
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix bar
>>>> starspan: --out-type: ?
>>>> Type `starspan --help' for help
>>>>
>>>> I then added '--out-type table' (I found in the source that valid 
>>>> --out-types are: table, mini_raster_strip, mini_rasters, 
>>>> rasterization):
>>>>
>>>> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID 
>>>> none --vector 
>>>> /Users/gregederer/servers/geoserver_data/data/shapefiles/Admin/afadmn2n.shp  
>>>> --raster rfe_2006_04_pct.tif --stats  results.txt avg --out-prefix 
>>>> bar --out-type table
>>>> Number of features: 550
>>>> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>>>>        0% terminate called after throwing an instance of 
>>>> 'geos::util::TopologyException'
>>>>  what():  TopologyException: side location conflict -8.25 23.1536
>>>> Abort trap
>>>>
>>>> Any idea what the TopologyException indicates?
>>>>
>>>> Thanks!
>>>>
>>>> Greg
>>>>
>>>> Brent Fraser wrote:
>>>>> Greg,
>>>>>
>>>>>  I've used StarSpan to do similar things; in my case I wanted 
>>>>> "mode" not "avg".  Using v1.2.01 (I don't think I made major mods 
>>>>> to the source):
>>>>>
>>>>>     starspan2.exe --progress --RID none --vector boundaries.shp  
>>>>> --raster big.tif --stats  results.txt mode
>>>>>
>>>>> I edited the resulting results.txt text (csv) file and used GDAL's 
>>>>> ogr2ogr to do a join on the shapefile's DBF file based on the FID.
>>>>>
>>>>> Brent Fraser
>>>>>
>>>>>
>>>>> Greg Ederer wrote:
>>>>>> Hello all,
>>>>>>
>>>>>> I'm a GDAL newbie.  I have a shape file containing subnational 
>>>>>> boundaries for Africa.  I have a raster containing rainfall for 
>>>>>> Africa.  I need to pull out the spatial average of rainfall for 
>>>>>> each of the subnational units.
>>>>>>
>>>>>> I think that I might be able to pull this off using StarSpan.  
>>>>>> But, the docs on the StarSpan wiki do not line up with the 
>>>>>> current version of the program (the changelog mentions that 
>>>>>> certain command line switches have been eliminated, and others 
>>>>>> added; but it doesn't say what the new switches do, or how to use 
>>>>>> them).  I am digging through the StarSpan sources to try to 
>>>>>> figure out how to use it.
>>>>>>
>>>>>> Does anyone have any suggestions as to how I might get the needed 
>>>>>> data using GDAL (with, or without StarSpan)?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Greg
>>>>>>
>>>>
>>>>
>>
>>


-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From bfraser at geoanalytic.com  Fri Dec 19 18:13:11 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Dec 19 18:14:09 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494C1A63.8010908@ergonosis.com>
References: <494A9315.6000604@ergonosis.com>
	<494A9DA4.4010809@geoanalytic.com> <494AA54E.4040200@ergonosis.com>
	<494AAB28.6080506@geoanalytic.com> <494AAE85.6020400@ergonosis.com>
	<494AB0BC.2050502@geoanalytic.com> <494C1A63.8010908@ergonosis.com>
Message-ID: <.68.144.5.189.1229728391.squirrel@68.144.5.189>

> Hi,
>
> I performed the OpenJump procedure.  But, I still get:
>
> Macintosh-4:starspan_tests gregederer$ starspan2 --progress --RID none
> --vector afadmn2n.shp --fid 3  --raster rfe_2006_04_pct.tif --stats
> results.txt avg --out-prefix bar --out-type table
> Number of features: 550
> starspan_csv:   1: Extracting from rfe_2006_04_pct.tif
>         0% terminate called after throwing an instance of
> 'geos::util::TopologyException'
>   what():  TopologyException: side location conflict -8.25 23.1536
> Abort trap
> So:
>
> a) Is there some way to get a dump of FIDs with their corresponding
> country/province names?

You could use dbfdump.  I think it is delivered with FWTools.


> b) What other steps might I take to detect/fix any side location
> conflict(s)

I've attached the source to a GDAL application I wrote (it simply accesses
the GDAL/Geos buffer function) to repair geometry of polygons.  Use the -r
option (the -c option doesn't work).  You'll need to link with a version
of GDAL that uses GEOS.


> c) The docs on the starspan wiki are out of sync with the current
> version (1.2.03).  Are there updated docs for starspan?  Should I fall
> back to a previous version?
>

I used version 1.2.01, but I don't recall why...

Brent
-------------- next part --------------
/*  ***************** SOURCE HEADER: **********************

Name:

Purpose:

Invocation:

Arguments:

Data Files Accessed:

Program History:
		v1.0	19 Jun	2007	BWF	initial coding
		
Note:

Algorithm Description:

Future Enhancements:

***************   End of SOURCE HEADER  ************** */

#include <assert.h>

#include "GDAL.h"
#include "cpl_string.h"
#include "ogrsf_frmts.h"

/************************************************************************/



/************************************************************************/
/************************************************************************/
static void Usage()
{
    printf( 
		"ogrClean v1.0\n"
		"Create clean planar polygon layer from overlapping polygons.\n"
        "Usage: ogrClean -a <input>            Assigned unique integer to FID attribute\n"
        "       ogrClean -r <input>            Repair topology\n"
        "       ogrClean -c <input>            Create non-overlapping topology\n"
		"       ogrClean -d <input> <output>   Delete records with NULL geometry.\n"
		);
    exit( 1 );
}

/************************************************************************/
/************************************************************************/
void notice(const char *fmt, ...)
{
    va_list ap;

        fprintf( stdout, "NOTICE: ");

    va_start (ap, fmt);
        vfprintf( stdout, fmt, ap);
        va_end(ap);
        fprintf( stdout, "\n" );
}

void log_and_exit(const char *fmt, ...)
{
    va_list ap;

        fprintf( stdout, "ERROR: ");

    va_start (ap, fmt);
        vfprintf( stdout, fmt, ap);
        va_end(ap);
        fprintf( stdout, "\n" );
    exit(1);
}
/************************************************************************/
/************************************************************************/
int repairPolygons(const char *pszSrcFilename, bool bOpAssignFID, bool bOpRepairTopo )
{
    OGRDataSource	*poDS;
    OGRLayer		*poLayer;
	OGRFeature		*poFeature;
	OGRGeometry		*poGeometry;
	OGRwkbGeometryType poGeomType;
	char *pszGeom=NULL;

	OGRErr oErr;

	long nLayers=0;
	long nFeatures=0;
	bool bFoundFID;
    int iField;
	long i=0, id=0;

	long iCountFixed=0;
	bool bGeomUpdated = false;

	/*-----------------------------------------------------------------------*/
	/*  Open input:                                                          */
	/*-----------------------------------------------------------------------*/
	OGRRegisterAll();
    poDS = OGRSFDriverRegistrar::Open( pszSrcFilename, TRUE );	// we will be updating the dataset
    if( poDS == NULL )
    {
		return(1);	//can't open dataset
    }
    nLayers = poDS->GetLayerCount();
	if (nLayers == 0)
	{
		return(2);	//no layers in dataset
	}

	// TBD: allow mult layers:
    poLayer = poDS->GetLayer( 0 );
    poLayer->ResetReading();

	nFeatures = poLayer->GetFeatureCount();

    if ( (poFeature = poLayer->GetNextFeature()) != NULL )
	{
		//--- Check Geometry type: ---//
        poGeometry = poFeature->GetGeometryRef();
        if( poGeometry != NULL )
		{
			poGeomType = poGeometry->getGeometryType();	// TBD: check if polgon
			if ( poGeomType != wkbMultiPolygon && poGeomType != wkbPolygon )
			{
				printf("Data must be polygons.\n");
			}
		}else
		{
			return(4);	//no geometry in feature
		}

		//--- Get Field of unique ID: ---//
		bFoundFID = false;
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
			if ( EQUAL(poFieldDefn->GetNameRef(),"FID") )
			{
				bFoundFID =  true;
				break;
			}
		}
		if (!bFoundFID)
		{
			printf("Data must have a unique ID field called FID.\n");
			return(5);
		}

	}else
	{
		printf("No features in dataset.\n");
		return(3);	//no features in dataset
	}

	/*-----------------------------------------------------------------------*/
	/*  Process Features:                                                    */
	/*-----------------------------------------------------------------------*/
    poLayer->ResetReading();

	i=0;
	while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
		GDALTermProgress( ((double)i)/nFeatures, "", NULL);
		if ( bOpAssignFID )
		{
			id = i;
		}else
		{
			id = poFeature->GetFieldAsInteger(iField);
		}
//		printf("%d. FID %d\n", i, id);

		if ( bOpRepairTopo && poFeature->GetGeometryRef() )  //not null
		{
			bGeomUpdated = false;
	        OGRGeometry *poGeometry;
			poGeometry = poFeature->GetGeometryRef()->clone();	// make a copy of geometry, otherwise there's a problem re-assigning it later.
			poGeomType = poGeometry->getGeometryType();
			if ( poGeomType != wkbMultiPolygon && poGeomType != wkbPolygon )	// not a polygon!
			{
				printf("** Warning. FID %d has geometry type of %s.\n", id, poGeometry->getGeometryName() );
				poGeometry->exportToWkt(&pszGeom);
				printf("%s\n",pszGeom );
			}

			if ( !poGeometry->IsValid() )	// need to fix, so...
			{
//				printf("Warning. FID %d has invalid topology.\n", id);
				OGRGeometry *poTempGeometry = poGeometry->Buffer(0.0);  // Let Geos fix the problem.
				if (poTempGeometry)	// not sure how it could be null...
				{
					if ( poTempGeometry->IsValid() )
					{
//						printf("  Can correct by buffering.\n");
						poGeometry = poTempGeometry->clone();	//replace with this new geom (need to destroy old?)
						oErr = poFeature->SetGeometry(poGeometry);
						bGeomUpdated = true;
						iCountFixed++;
					}else
					{
						printf("** Warning. FID %d still has invalid topology after buffering (so not updated).\n", id);
					}
				}else
				{
						printf("** Warning. FID %d has NULL geometry after buffering (so not updated).\n", id);
				}
				if (poTempGeometry != NULL)
				{
					OGRGeometryFactory::destroyGeometry( poTempGeometry);
					poTempGeometry = NULL;
				}
		
			}else // valid
			{
				if ( poGeometry->IsEmpty() )
				{
//					printf("Warning. FID %d has empty geometry.\n", id);
				}
			}

			if (poGeometry != NULL)	// can delete since SetGeometry makes a copy
			{
				OGRGeometryFactory::destroyGeometry( poGeometry);
				poGeometry = NULL;
			}

		}else
		{
//			printf("Warning. FID %d has NULL geometry.\n", id);
		}

		if ( bOpAssignFID )
		{
			poFeature->SetField( iField, id );
		}

		if ( bGeomUpdated || bOpAssignFID )
		{
			oErr = poLayer->SetFeature(poFeature);
//			poDS->SyncToDisk();
		}
		OGRFeature::DestroyFeature( poFeature );

		i++;	//first record is 0

	}
	GDALTermProgress( ((double)nFeatures)/nFeatures, "", NULL);

	if ( bOpRepairTopo )
		printf("\n-- Info: Fixed %d polygons.\n", iCountFixed );

	OGRDataSource::DestroyDataSource( poDS );

	return(0);
}

/************************************************************************/
/************************************************************************/
int cleanPolygons(const char *pszSrcFilename, const char *pszAdjFilename ) //, const char *pszDstFilename, const char *pzsDstFormat)
{
    OGRDataSource	*poDS;
    OGRLayer		*poLayer;
	OGRFeature		*poFeature;

	OGRDataSource	*poDSadjacent;
	OGRLayer		*poLayerAdjacent;
	OGRFeature		*poFeatureAdjacent;

	long nLayers;

	OGRwkbGeometryType poGeomType;
	OGRGeometry *poGeometry;
	char *pszGeom=NULL;

	OGRErr oErr;

	long i=0;
	long nFeatures=0;
	unsigned int nCoords=0;
//	double x, y;
    int iField;
	int id, idAdjacent;
	bool bFoundFID;

	bool bDone=false;
	bool bGeomUpdated = false;

	/*-----------------------------------------------------------------------*/
	/*  Open input:                                                          */
	/*-----------------------------------------------------------------------*/
	OGRRegisterAll();
    poDS = OGRSFDriverRegistrar::Open( pszSrcFilename, TRUE );	// we will be updating the dataset
    if( poDS == NULL )
    {
		return(1);	//can't open dataset
    }
    nLayers = poDS->GetLayerCount();
	if (nLayers == 0)
	{
		return(2);	//no layers in dataset
	}

	// TBD: allow mult layers:
    poLayer = poDS->GetLayer( 0 );
    poLayer->ResetReading();

	nFeatures = poLayer->GetFeatureCount();

    if ( (poFeature = poLayer->GetNextFeature()) != NULL )
	{
		//--- Check Geometry type: ---//
        poGeometry = poFeature->GetGeometryRef();
        if( poGeometry != NULL )
		{
			poGeomType = poGeometry->getGeometryType();	// TBD: check if polgon
			if ( poGeomType != wkbMultiPolygon && poGeomType != wkbPolygon )
			{
				printf("Data must be polygons.\n");
			}
		}else
		{
			return(4);	//no geometry in feature
		}

		//--- Get Field of unique ID: ---//
		bFoundFID = false;
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
			if ( EQUAL(poFieldDefn->GetNameRef(),"FID") )
			{
				bFoundFID =  true;
				break;
			}
		}
		if (!bFoundFID)
		{
			printf("Data must have a unique ID field called FID.\n");
			return(5);
		}

	}else
	{
		printf("No features in dataset.\n");
		return(3);	//no features in dataset
	}

    poLayer->ResetReading();

//    poDSadjacent = OGRSFDriverRegistrar::Open( pszSrcFilename, FALSE );	// read only
//	if( poDSadjacent == NULL ) return(1);	//can't open dataset
//    poLayerAdjacent = poDSadjacent->GetLayer( 0 );

	/*-----------------------------------------------------------------------*/
	/*  Process Features:                                                    */
	/*-----------------------------------------------------------------------*/
	i=0;
	while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
		i++;
		GDALTermProgress( ((double)i)/nFeatures, "", NULL);
        OGRGeometry *poGeometry;
		id = poFeature->GetFieldAsInteger(iField);
//		printf("%d. FID %d\n", i, id);
		bGeomUpdated = false;

		if ( poFeature->GetGeometryRef() )  //not null
		{
			poGeometry = poFeature->GetGeometryRef()->clone();	// make a copy of geometry, otherwise there's a problem re-assigning it later.
			if (!poGeometry->IsValid() )
			{
				printf("Warning. FID %d has invalid geometry, buffering to fix.\n", id);
				poGeometry = poGeometry->Buffer(0.0);
			}

			//---- Set Spatial Filter to only this Poly-of-interest ---//
			if ( pszAdjFilename )
			{
				poDSadjacent = OGRSFDriverRegistrar::Open( pszAdjFilename, FALSE );	// read only
			}else
			{
				poDSadjacent = OGRSFDriverRegistrar::Open( pszSrcFilename, FALSE );	// read only
			}
			if( poDSadjacent == NULL ) return(1);	//can't open dataset
			poLayerAdjacent = poDSadjacent->GetLayer( 0 );

			poLayerAdjacent->SetSpatialFilter(poGeometry);
			poLayerAdjacent->ResetReading();

			//--- Get Adjacent Polys: ---//
			bDone = false;
			while( ((poFeatureAdjacent = poLayerAdjacent->GetNextFeature()) != NULL) && ! bDone ) // more polys nearby and some poly geom left
			{
				OGRGeometry *poGeometryAdjacent = poFeatureAdjacent->GetGeometryRef();  // no need to clone since need read only
				idAdjacent = poFeatureAdjacent->GetFieldAsInteger(iField);

				if ( poGeometryAdjacent )  //might have null geom? YES (due to this processing)
				{
					if (!poGeometryAdjacent->IsValid() )
					{
						poGeometryAdjacent = poGeometryAdjacent->Buffer(0.0);
					}

					if ( ( id!=idAdjacent || pszAdjFilename ) && (
						!poGeometryAdjacent->IsEmpty() &&  
						poGeometryAdjacent->IsValid() &&
						poGeometryAdjacent->Intersects(poGeometry)) )	//has some geom and not the same poly
					{
						OGRGeometry *poTempGeometry = poGeometry->Difference(poGeometryAdjacent);  // subtract the adj poly
						if (poTempGeometry)	// not sure how it could be null...
						{
							poGeomType = poTempGeometry->getGeometryType();	// make sure a poly is the result (will be linestring for shared boundary)
							if ( poGeomType == wkbMultiPolygon || poGeomType == wkbPolygon )
							{
								if (!poTempGeometry->IsValid() )
								{
									poTempGeometry = poTempGeometry->Buffer(0.0);
									if (!poTempGeometry->IsValid() )
									{
										printf("Warning. FID %d - FID %d resulted in invalid geometry, even after buffering.\n", id, idAdjacent);
									}
								}else
								{
									poGeometry = poTempGeometry->clone();	//replace with this new geom (need to destroy old?)
									//poGeometry->exportToWkt(&pszGeom);
									//printf("%d - %d: %s\n", id, idAdjacent, pszGeom);
									bGeomUpdated = true;
								}
							}else	// not a polygon
							{
								if ( !poTempGeometry->IsEmpty())
								{
									printf("Warning. FID %d now has geometry type of %s.\n", id, poTempGeometry->getGeometryName() );
									poTempGeometry->exportToWkt(&pszGeom);
									printf("%s\n",pszGeom );
								}else	// empty "other" (GEOMETERYCOLLECTION) geometry
								{
//									printf("Warning. FID %d now has empty geometry.\n", id );
									poGeometry = poTempGeometry->clone();	//replace with this new geom (need to destroy old?)
									bGeomUpdated = true;
									bDone = true;
								}

							}
						}else  // null polygon geom
						{
							poGeometry = poTempGeometry;
							printf("Warning. FID %d now has NULL geometry.\n", id );
							bGeomUpdated = true;
							bDone = true;
						}
					}else
					{
						if (poGeometryAdjacent->IsEmpty())
						{
								printf("  Warning. Adjacent FID %d has empty geometry.\n", idAdjacent);
						}
						if (!poGeometryAdjacent->IsValid())  // attempted to buffer above, so don't bother again
						{
								printf("  Warning. Adjacent FID %d has invalid geometry.\n", idAdjacent);
						}
					}
					OGRGeometryFactory::destroyGeometry( poGeometryAdjacent );	// done with this nearby poly
					poGeometryAdjacent = NULL;
				}else	// null geom
				{
					//printf("  Warning. Adjacent FID %d has NULL geometry.\n", idAdjacent);
				}
				//OGRFeature::DestroyFeature( poFeatureAdjacent );

			}  //no more nearby polys

			OGRDataSource::DestroyDataSource( poDSadjacent );


			if ( bGeomUpdated )
			{
				if ( poGeometry )
				{
					//--- Set the new clipped geometry: ---//
					if (poGeometry->getGeometryType() == wkbMultiPolygon || poGeometry->getGeometryType() == wkbPolygon )
					{
						if (!poGeometry->IsValid() )
						{
							printf("Warning. FID %d has invalid geometry, buffering to fix.\n", id);
							poGeometry = poGeometry->Buffer(0.0);
						}
						oErr = poFeature->SetGeometry(poGeometry);
					}else
					{
						oErr = poFeature->SetGeometry(NULL);	//tbd: delete feature?
					}
					if (poGeometry->IsEmpty())
					{
						oErr = poFeature->SetGeometry(NULL);	//tbd: delete feature?
					}
				} else
				{
					oErr = poFeature->SetGeometry(NULL);	//tbd: delete feature?
				}
				oErr = poLayer->SetFeature(poFeature);
				poDS->SyncToDisk();
			}
			if (poGeometry != NULL)
			{
				OGRGeometryFactory::destroyGeometry( poGeometry);
				poGeometry = NULL;
			}
		}else	 // null geom
		{
//			printf("Warning. FID %d has NULL geometry.\n", id );
		}

		OGRFeature::DestroyFeature( poFeature );

    }	// end of polys


	/*-----------------------------------------------------------------------*/
	/*  close Datasources:                                                   */
	/*-----------------------------------------------------------------------*/
//	OGRDataSource::DestroyDataSource( poDSadjacent );
    OGRDataSource::DestroyDataSource( poDS );

	return(0);
}


/************************************************************************/
/************************************************************************/
int deleteNullPolygons(const char *pszSrcFilename, const char *pszDstFilename, const char *pzsDstFormat)
{
    OGRDataSource	*poDS;
    OGRLayer		*poLayer;
	OGRFeature		*poFeature;
	OGRFeatureDefn  *poFDefn;
	OGRwkbGeometryType poGeomType;
	OGRGeometry *poGeometry;

	OGRDataSource	*poDSout;
	OGRLayer		*poLayerOut;
	OGRFeature		*poFeatureOut;

	long nLayers, nFeatures;
	int i;
	int iFiltered=0;
	bool bFoundFID=false;
	bool bAssignFID=false;
	int iField=0;

	/*-----------------------------------------------------------------------*/
	/*  Open input:                                                          */
	/*-----------------------------------------------------------------------*/
	OGRRegisterAll();
    poDS = OGRSFDriverRegistrar::Open( pszSrcFilename, FALSE );	// we will NOT be updating the dataset
    if( poDS == NULL )
    {
		printf("Failed to open dataset: %s\n",pszSrcFilename);
		return(1);	//can't open dataset
    }
    nLayers = poDS->GetLayerCount();
	if (nLayers == 0)
	{
		return(2);	//no layers in dataset
	}

	// TBD: allow mult layers:
    poLayer = poDS->GetLayer( 0 );
    poLayer->ResetReading();

	nFeatures = poLayer->GetFeatureCount();

    if ( (poFeature = poLayer->GetNextFeature()) != NULL )
	{
        poGeometry = poFeature->GetGeometryRef();
        if( poGeometry != NULL )
		{
			poGeomType = poGeometry->getGeometryType();
		}else
		{
			return(4);	//no geometry in feature
		}
	}else
	{
		return(3);	//no features in dataset
	}

	//--- Get Field of unique ID: ---//
	bFoundFID = false;
    poFDefn = poLayer->GetLayerDefn();
	for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
	{
		OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
		if ( EQUAL(poFieldDefn->GetNameRef(),"FID") )
		{
			bFoundFID =  true;
			break;
		}
	}


	/*-----------------------------------------------------------------------*/
	/*  Create output:                                                       */
	/*-----------------------------------------------------------------------*/
	OGRSFDriver *poDriver;
    poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( pzsDstFormat );
    if( poDriver == NULL )
    {
//        printf( "%s driver not available.\n", pszDriverName );
        return(101);
    }

	poDSout = poDriver->CreateDataSource( pszDstFilename, NULL );
    if( poDSout == NULL )
    {
//        printf( "Creation of output file failed.\n" );
        return(102);
    }

	poLayerOut = poDSout->CreateLayer( "new_layer", NULL, poGeomType, NULL );
    if( poLayerOut == NULL )
    {
//        printf( "Layer creation failed.\n" );
        return(103);
    }

	poFDefn = poLayer->GetLayerDefn();
    for(iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
    {
        OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

		if( poLayerOut->CreateField( poFieldDefn ) != OGRERR_NONE )
		{
	//        printf( "Creation of field failed.\n" );
			return(104);
		}
    }

	if (!bFoundFID)
	{
		OGRFieldDefn oField( "FID", OFTInteger );
		bAssignFID = true;
		if( poLayerOut->CreateField( &oField ) != OGRERR_NONE )
		{
			printf( "Creating FID field failed.\n" );
			return(5);
		}
	}
	bFoundFID = false;
    poFDefn = poLayerOut->GetLayerDefn();
	for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
	{
		OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
		if ( EQUAL(poFieldDefn->GetNameRef(),"FID") )
		{
			bFoundFID =  true;
			break;
		}
	}


	/*-----------------------------------------------------------------------*/
	/*  Process Features:                                                    */
	/*-----------------------------------------------------------------------*/
    poLayer->ResetReading();
    poFDefn = poLayer->GetLayerDefn();
	i = 0;
    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
		i++;
		GDALTermProgress( ((double)i)/nFeatures, "", NULL);
//        OGRGeometry *poGeometry;
        poGeometry = poFeature->GetGeometryRef();

		if( poGeometry != NULL && !poGeometry->IsEmpty() )
        {
			poFeatureOut = OGRFeature::CreateFeature( poLayerOut->GetLayerDefn() );
			poFeatureOut->SetFrom(poFeature);

			if (bAssignFID)
			{
				poFeatureOut->SetField( iField, i );
			}

			if( poLayerOut->CreateFeature( poFeatureOut ) != OGRERR_NONE )
			{
				printf( "Failed to create feature.\n" );
				return( 200 );
			}

		}else
		{
			iFiltered++;
		}
        OGRFeature::DestroyFeature( poFeature );
    }

	GDALTermProgress( ((double)nFeatures)/nFeatures, "", NULL);
	printf("\n-- Info: Filtered %d NULL or Empty polygons from a total of %d polygons.\n", iFiltered,i );

	OGRDataSource::DestroyDataSource( poDS );
	OGRDataSource::DestroyDataSource( poDSout );

	return(0);
}



/************************************************************************/
/*                                Main()                                */
/************************************************************************/
int main( int argc, char *argv[] )
{

    bool bOpAssignFID    = false;
	bool bOpRepairTopo   = false;
	bool bOpCleanPolys   = false;
	bool bOpDelNullPolys = false;

	int i;
	int rc=0;

	const char *pszSrcFilename = NULL;
	const char *pszAdjFilename = NULL;

    const char *pszDstFilename = NULL;

    char *pzsDstFormat = NULL;
    char *pzsDstFormatDefault = "ESRI Shapefile";


/* -------------------------------------------------------------------- */
/*      Parse arguments.                                                */
/* -------------------------------------------------------------------- */
    argc = GDALGeneralCmdLineProcessor( argc, &argv, 0 );
    if( argc < 1 )
        return( -argc );

    if( argc == 1 )
        Usage();

    for( i = 1; i < argc; i++ )
    {
        if( EQUAL(argv[i],"-a") )
            bOpAssignFID = true;

        else if( EQUAL(argv[i],"-r") )
            bOpRepairTopo = true;

        else if( EQUAL(argv[i],"-c") )
            bOpCleanPolys = true;

        else if( EQUAL(argv[i],"-d") )
            bOpDelNullPolys = true;

		else if( EQUAL(argv[i],"-o") && i < argc-1 )
            pszAdjFilename = argv[++i];

		else if( EQUAL(argv[i],"-of") && i < argc-1 )
            pzsDstFormat = argv[++i];

        else if( pszSrcFilename == NULL )
        {
            pszSrcFilename = argv[i];
        }
        else if( pszDstFilename == NULL )
        {
            pszDstFilename = argv[i];
        }
        else
            Usage();
    }

	if( pszSrcFilename == NULL )
	{
        CPLError( CE_Failure, CPLE_AppDefined, "An input file is required." );
        return(1);
	}


	if( pszDstFilename == NULL && bOpDelNullPolys )
	{
        CPLError( CE_Failure, CPLE_AppDefined, "An output file is required when deleting null geometry records." );
        return(1);
	}
	if ( pzsDstFormat == NULL )
	{
		pzsDstFormat = pzsDstFormatDefault;
	}

/* -------------------------------------------------------------------- */
/*  Do requested Operations:                                            */
/* -------------------------------------------------------------------- */

	if ( bOpAssignFID || bOpRepairTopo )
		rc = repairPolygons(pszSrcFilename, bOpAssignFID, bOpRepairTopo );

	if ( bOpCleanPolys )
		rc = cleanPolygons(pszSrcFilename, pszAdjFilename);

	if ( bOpDelNullPolys )
		rc = deleteNullPolygons(pszSrcFilename, pszDstFilename, pzsDstFormat);

/* -------------------------------------------------------------------- */
/*  Exit:                                                               */
/* -------------------------------------------------------------------- */
	return(0);

}
From szekerest at gmail.com  Fri Dec 19 18:44:04 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Dec 19 18:44:07 2008
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release
In-Reply-To: <494A8A7C.8010302@pobox.com>
References: <494A8A7C.8010302@pobox.com>
Message-ID: <f3b73b7d0812191544m3b93210eqbba06d69641c0c43@mail.gmail.com>

+1

Tamas


2008/12/18 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> As I mentioned a couple weeks ago, I am proceeding with producing stable
> releases.  I have produced a release candidate for a GDAL 1.4.5 release.
> Once released I anticipate this will be the last GDAL 1.4.x release.  The
> RC2 release includes the "make install - man" problem fix and is otherwise
> unchanged from RC1.
>
> The source is available at:
>  http://download.osgeo.org/gdal/gdal-1.4.5RC2.tar.gz
>  http://download.osgeo.org/gdal/gdal145RC2.zip
>
> The release news is at:
>  http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News
>
> Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release.
>
> I'll start by voting +1.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081220/15c2ee22/attachment.html
From greg at ergonosis.com  Fri Dec 19 18:45:20 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Dec 19 18:45:29 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <.68.144.5.189.1229728391.squirrel@68.144.5.189>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com> <494AB0BC.2050502@geoanalytic.com>
	<494C1A63.8010908@ergonosis.com>
	<.68.144.5.189.1229728391.squirrel@68.144.5.189>
Message-ID: <494C3210.9040300@ergonosis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/e9f7dbfb/attachment.html
From greg at ergonosis.com  Fri Dec 19 18:47:41 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Dec 19 18:47:43 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <50014.67.116.240.113.1229724840.squirrel@webmail.light42.com>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com> <494AB0BC.2050502@geoanalytic.com>
	<494C1A63.8010908@ergonosis.com>
	<50014.67.116.240.113.1229724840.squirrel@webmail.light42.com>
Message-ID: <494C329D.30008@ergonosis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/457ea48e/attachment.html
From bfraser at geoanalytic.com  Fri Dec 19 19:24:58 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Dec 19 19:25:52 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <494C3210.9040300@ergonosis.com>
References: <494A9315.6000604@ergonosis.com>   
	<494A9DA4.4010809@geoanalytic.com> <494AA54E.4040200@ergonosis.com> 
	<494AAB28.6080506@geoanalytic.com> <494AAE85.6020400@ergonosis.com> 
	<494AB0BC.2050502@geoanalytic.com> <494C1A63.8010908@ergonosis.com>
	<.68.144.5.189.1229728391.squirrel@68.144.5.189>
	<494C3210.9040300@ergonosis.com>
Message-ID: <.68.144.5.189.1229732698.squirrel@68.144.5.189>


     Is the FID
> supposed to be in the .dbf file that accompanies the .shp file?
> I have examined this file, and I don't see an FID column (column
> names are in the first row).  In particular, since starspan2
> reports an FID of 0 for Zemmour, Mauritania, I would expect to
> see a column with the value 0 in the Zemmour row of the .dbf
> file.  But, there isn't one.  I was assuming that FIDs were in
> one of the other files in the set (.dbf, .fix, .qix, .shp, .shx).

I think StarSpan will "assign" a Feature ID (FID), likely sequentially
with the first one being 0, to the records as it reads them.  I'm not sure
if it would use an FID field in the DBF file (where are the attributes
are) if it found one.

Brent

From greg at ergonosis.com  Fri Dec 19 19:33:40 2008
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Dec 19 19:33:47 2008
Subject: [gdal-dev] Zonal statistics with GDAL/StarSpan
In-Reply-To: <.68.144.5.189.1229732698.squirrel@68.144.5.189>
References: <494A9315.6000604@ergonosis.com> <494A9DA4.4010809@geoanalytic.com>
	<494AA54E.4040200@ergonosis.com> <494AAB28.6080506@geoanalytic.com>
	<494AAE85.6020400@ergonosis.com> <494AB0BC.2050502@geoanalytic.com>
	<494C1A63.8010908@ergonosis.com>
	<.68.144.5.189.1229728391.squirrel@68.144.5.189>
	<494C3210.9040300@ergonosis.com>
	<.68.144.5.189.1229732698.squirrel@68.144.5.189>
Message-ID: <494C3D64.6000102@ergonosis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081219/6727a286/attachment.html
From ivan.lucena at pmldnet.com  Sat Dec 20 18:31:33 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Sat Dec 20 18:31:35 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gRGVidWdnaW5nIG9uIFdpbmRvd3MgVXNpbmcgVmlzdWFsIFN0dWRpbw==?=
Message-ID: <20081220233133.12655.qmail@s466.sureserver.com>

Hi Joel,

If you use of the .vcproj files provided by the GDAL distribution you should be able to create breakpoints and run in debugging mode. It is not perfect, some times I have problems with that too. I like the way that Netbeans C++ handle makefiles on Linux better than VS but I never tried it on Windows. Try something simple first like debugging gdalinfo first. It should work.

Regards,

Ivan



>  -------Original Message-------
>  From: Joel Odom <joelodom@gmail.com>
>  Subject: [gdal-dev] Debugging on Windows Using Visual Studio
>  Sent: Dec 19 '08 15:46
>  
>  Has anyone had any experience troubleshooting debugging issues with
>  Visual Studio???I can't step in to any GDAL methods from my project,
>  even though I have debug symbols in the .dll and a debug database file
>  (.pdb).??Any experiences working this out would be appreciated.
>  Thanks.
>  
>  
>  --
>  http://giscoder.blogspot.com/
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From chapmanm at pixia.com  Sun Dec 21 00:16:00 2008
From: chapmanm at pixia.com (Martin Chapman)
Date: Sun Dec 21 00:16:52 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>	<494BC772.5020101@pobox.com>	<d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>	<d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>
	<d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>
Message-ID: <000601c9632b$3cd90950$b68b1bf0$@com>

Joel,

I debug into gdal source from visual studio all the time.  Here is what I
do:

1. Use nmake to build gdal from the command line with the nmake.opt file set
to build gdal in the debug configuration.
2. Copy the gdalxxx.dll, gdalxxx_i.lib and gdalxxx.pdb to the same directory
as my application exe or dll.
3. Run my application in debug mode with a break point in my code on the
line I want to debug.
4. When the code breaks in my code then I press F11 to step into the gdal
code.

If it doesn't work then something is out of sync between your code and the
gdal files your are linked against.  Most likely your code can't find the
gdal pdb or the files are out of date.  Make sure you do a full rebuild on
both projects so all files are up to date with the debug symbols. Sometimes
I make that mistake and my code won't step into gdal so I do a full rebuild
and then it works.

Martin



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
Sent: Friday, December 19, 2008 12:36 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio

Problem solved.  For the benefit of the group and the searchable list
archives, I'll describe here what was going on.

My build on Windows, using makegdal80.sln, was generating a gdal15.dll
with symbols and gdal15.pdb file.  For whatever reason, these files
did not contain sufficient information for me to step in to the code
in a debug session.  After poking around for some time, I found that
the OPTFLAGS in nmake.opt were set to the optimized build.  I'm not
sure why I was seeing the debug symbols loading, but changing OPTFLAGS
to generate a gdal.pdb (along with the gdal15.pdb) gave me the debug
information I needed.  (In 1.6.0, the OPTFLAGS is set for debug when
DEBUG is defined, which seems to make more sense.)



On Fri, Dec 19, 2008 at 11:22 AM, Joel Odom <joelodom@gmail.com> wrote:
> More notes on the issue below.
>
>
> ---------- Forwarded message ----------
> From: Joel Odom <joelodom@gmail.com>
> Date: Fri, Dec 19, 2008 at 11:21 AM
> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
> To: Frank Warmerdam <warmerdam@pobox.com>
>
>
> I'm building from makegdal80.sln.  I'm also starting my debug sessions
> from this same solution.  I'm getting symbols in gdal15.dll and the
> .pdb file, but I still can't set a break point anywhere.  It's like
> the debug symbols don't map correctly to the source code.
>
> I'm wondering if there is some flag in the makefile options that is
> not being set, so the program debug information is incomplete?  I am
> able to set a break point in my dll that calls gdal, but not anywhere
> in the gdal methods.  Again, this is all in VS 2005.  I'll post an
> answer here if I figure out the problem before I give up, but if
> anyone has any ideas, I'd appreciate it.
>
>
>
> On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com>
wrote:
>> Joel Odom wrote:
>>>
>>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>>> on Visual Studio 2005.  I've tried for an hour or two to step into
>>> gdal, running debug sessions both from the project file from which I
>>> build gdal and from the app that calls into GDAL, but even when I run
>>> from the gdal solution itself, it still doesn't let me step through
>>> source code, even though the modules window says gdal15.dll is loaded
>>> with symbols from the same location as my .pdb file.
>>
>> Joel,
>>
>> I have generally not had problems with this.  Did you build GDAL using
>> the nmake files or the solution?  I've had good luck debugging the
>> utilities and into GDAL itself with visual studio. I normally run things
>> from the commandline and pop into visual studio when things crash (even
>> triggering crashes at select points).
>>
>> This is usually with visual studio 2003.
>>
>> Best regards,
>> --
>>
---------------------------------------+------------------------------------
--
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>
>>
>
>
>
> --
> http://giscoder.blogspot.com/
>
>
>
> --
> http://giscoder.blogspot.com/
>



-- 
http://giscoder.blogspot.com/
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From joelodom at gmail.com  Sun Dec 21 13:08:07 2008
From: joelodom at gmail.com (Joel Odom)
Date: Sun Dec 21 13:08:10 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <000601c9632b$3cd90950$b68b1bf0$@com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>
	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>
	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>
	<494BC772.5020101@pobox.com>
	<d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>
	<d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>
	<d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>
	<000601c9632b$3cd90950$b68b1bf0$@com>
Message-ID: <d422b4500812211008x38fc9bd1vf9801305f973bbd2@mail.gmail.com>

Thanks so much, folks, for writing back.  I did get the problem
solved.  I hadn't changed the nmake.opt file to generate the debug
database.  (One was being output for some reason, but it was
incomplete.  For the archives, I documented this more fully a few
e-mails back.)

Thanks again!



On Sun, Dec 21, 2008 at 12:16 AM, Martin Chapman <chapmanm@pixia.com> wrote:
> Joel,
>
> I debug into gdal source from visual studio all the time.  Here is what I
> do:
>
> 1. Use nmake to build gdal from the command line with the nmake.opt file set
> to build gdal in the debug configuration.
> 2. Copy the gdalxxx.dll, gdalxxx_i.lib and gdalxxx.pdb to the same directory
> as my application exe or dll.
> 3. Run my application in debug mode with a break point in my code on the
> line I want to debug.
> 4. When the code breaks in my code then I press F11 to step into the gdal
> code.
>
> If it doesn't work then something is out of sync between your code and the
> gdal files your are linked against.  Most likely your code can't find the
> gdal pdb or the files are out of date.  Make sure you do a full rebuild on
> both projects so all files are up to date with the debug symbols. Sometimes
> I make that mistake and my code won't step into gdal so I do a full rebuild
> and then it works.
>
> Martin
>
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
> Sent: Friday, December 19, 2008 12:36 PM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
>
> Problem solved.  For the benefit of the group and the searchable list
> archives, I'll describe here what was going on.
>
> My build on Windows, using makegdal80.sln, was generating a gdal15.dll
> with symbols and gdal15.pdb file.  For whatever reason, these files
> did not contain sufficient information for me to step in to the code
> in a debug session.  After poking around for some time, I found that
> the OPTFLAGS in nmake.opt were set to the optimized build.  I'm not
> sure why I was seeing the debug symbols loading, but changing OPTFLAGS
> to generate a gdal.pdb (along with the gdal15.pdb) gave me the debug
> information I needed.  (In 1.6.0, the OPTFLAGS is set for debug when
> DEBUG is defined, which seems to make more sense.)
>
>
>
> On Fri, Dec 19, 2008 at 11:22 AM, Joel Odom <joelodom@gmail.com> wrote:
>> More notes on the issue below.
>>
>>
>> ---------- Forwarded message ----------
>> From: Joel Odom <joelodom@gmail.com>
>> Date: Fri, Dec 19, 2008 at 11:21 AM
>> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
>> To: Frank Warmerdam <warmerdam@pobox.com>
>>
>>
>> I'm building from makegdal80.sln.  I'm also starting my debug sessions
>> from this same solution.  I'm getting symbols in gdal15.dll and the
>> .pdb file, but I still can't set a break point anywhere.  It's like
>> the debug symbols don't map correctly to the source code.
>>
>> I'm wondering if there is some flag in the makefile options that is
>> not being set, so the program debug information is incomplete?  I am
>> able to set a break point in my dll that calls gdal, but not anywhere
>> in the gdal methods.  Again, this is all in VS 2005.  I'll post an
>> answer here if I figure out the problem before I give up, but if
>> anyone has any ideas, I'd appreciate it.
>>
>>
>>
>> On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>>> Joel Odom wrote:
>>>>
>>>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>>>> on Visual Studio 2005.  I've tried for an hour or two to step into
>>>> gdal, running debug sessions both from the project file from which I
>>>> build gdal and from the app that calls into GDAL, but even when I run
>>>> from the gdal solution itself, it still doesn't let me step through
>>>> source code, even though the modules window says gdal15.dll is loaded
>>>> with symbols from the same location as my .pdb file.
>>>
>>> Joel,
>>>
>>> I have generally not had problems with this.  Did you build GDAL using
>>> the nmake files or the solution?  I've had good luck debugging the
>>> utilities and into GDAL itself with visual studio. I normally run things
>>> from the commandline and pop into visual studio when things crash (even
>>> triggering crashes at select points).
>>>
>>> This is usually with visual studio 2003.
>>>
>>> Best regards,
>>> --
>>>
> ---------------------------------------+------------------------------------
> --
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>>
>>>
>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
>
>
>
> --
> http://giscoder.blogspot.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



-- 
http://giscoder.blogspot.com/
From chapmanm at pixia.com  Sun Dec 21 13:45:30 2008
From: chapmanm at pixia.com (chapmanm@pixia.com)
Date: Sun Dec 21 13:31:52 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812211008x38fc9bd1vf9801305f973bbd2@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com><C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM><d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com><494BC772.5020101@pobox.com><d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com><d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com><d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com><000601c9632b$3cd90950$b68b1bf0$@com><d422b4500812211008x38fc9bd1vf9801305f973bbd2@mail.gmail.com>
Message-ID: <731323592-1229884247-cardhu_decombobulator_blackberry.rim.net-1908241761-@bxe139.bisx.prod.on.blackberry>

Good to hear!  Now you can fix bugs too. :)

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: "Joel Odom" <joelodom@gmail.com>

Date: Sun, 21 Dec 2008 13:08:07 
To: <gdal-dev@lists.osgeo.org>
Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio


Thanks so much, folks, for writing back.  I did get the problem
solved.  I hadn't changed the nmake.opt file to generate the debug
database.  (One was being output for some reason, but it was
incomplete.  For the archives, I documented this more fully a few
e-mails back.)

Thanks again!



On Sun, Dec 21, 2008 at 12:16 AM, Martin Chapman <chapmanm@pixia.com> wrote:
> Joel,
>
> I debug into gdal source from visual studio all the time.  Here is what I
> do:
>
> 1. Use nmake to build gdal from the command line with the nmake.opt file set
> to build gdal in the debug configuration.
> 2. Copy the gdalxxx.dll, gdalxxx_i.lib and gdalxxx.pdb to the same directory
> as my application exe or dll.
> 3. Run my application in debug mode with a break point in my code on the
> line I want to debug.
> 4. When the code breaks in my code then I press F11 to step into the gdal
> code.
>
> If it doesn't work then something is out of sync between your code and the
> gdal files your are linked against.  Most likely your code can't find the
> gdal pdb or the files are out of date.  Make sure you do a full rebuild on
> both projects so all files are up to date with the debug symbols. Sometimes
> I make that mistake and my code won't step into gdal so I do a full rebuild
> and then it works.
>
> Martin
>
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
> Sent: Friday, December 19, 2008 12:36 PM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
>
> Problem solved.  For the benefit of the group and the searchable list
> archives, I'll describe here what was going on.
>
> My build on Windows, using makegdal80.sln, was generating a gdal15.dll
> with symbols and gdal15.pdb file.  For whatever reason, these files
> did not contain sufficient information for me to step in to the code
> in a debug session.  After poking around for some time, I found that
> the OPTFLAGS in nmake.opt were set to the optimized build.  I'm not
> sure why I was seeing the debug symbols loading, but changing OPTFLAGS
> to generate a gdal.pdb (along with the gdal15.pdb) gave me the debug
> information I needed.  (In 1.6.0, the OPTFLAGS is set for debug when
> DEBUG is defined, which seems to make more sense.)
>
>
>
> On Fri, Dec 19, 2008 at 11:22 AM, Joel Odom <joelodom@gmail.com> wrote:
>> More notes on the issue below.
>>
>>
>> ---------- Forwarded message ----------
>> From: Joel Odom <joelodom@gmail.com>
>> Date: Fri, Dec 19, 2008 at 11:21 AM
>> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
>> To: Frank Warmerdam <warmerdam@pobox.com>
>>
>>
>> I'm building from makegdal80.sln.  I'm also starting my debug sessions
>> from this same solution.  I'm getting symbols in gdal15.dll and the
>> .pdb file, but I still can't set a break point anywhere.  It's like
>> the debug symbols don't map correctly to the source code.
>>
>> I'm wondering if there is some flag in the makefile options that is
>> not being set, so the program debug information is incomplete?  I am
>> able to set a break point in my dll that calls gdal, but not anywhere
>> in the gdal methods.  Again, this is all in VS 2005.  I'll post an
>> answer here if I figure out the problem before I give up, but if
>> anyone has any ideas, I'd appreciate it.
>>
>>
>>
>> On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>>> Joel Odom wrote:
>>>>
>>>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>>>> on Visual Studio 2005.  I've tried for an hour or two to step into
>>>> gdal, running debug sessions both from the project file from which I
>>>> build gdal and from the app that calls into GDAL, but even when I run
>>>> from the gdal solution itself, it still doesn't let me step through
>>>> source code, even though the modules window says gdal15.dll is loaded
>>>> with symbols from the same location as my .pdb file.
>>>
>>> Joel,
>>>
>>> I have generally not had problems with this.  Did you build GDAL using
>>> the nmake files or the solution?  I've had good luck debugging the
>>> utilities and into GDAL itself with visual studio. I normally run things
>>> from the commandline and pop into visual studio when things crash (even
>>> triggering crashes at select points).
>>>
>>> This is usually with visual studio 2003.
>>>
>>> Best regards,
>>> --
>>>
> ---------------------------------------+------------------------------------
> --
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>>
>>>
>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
>
>
>
> --
> http://giscoder.blogspot.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



-- 
http://giscoder.blogspot.com/
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From wickleyl at gmail.com  Sun Dec 21 22:27:54 2008
From: wickleyl at gmail.com (wickley)
Date: Sun Dec 21 22:27:56 2008
Subject: [Gdal-dev] Supporting ECW as a plugin on window,
In-Reply-To: <7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>
References: <20997632.post@talk.nabble.com>
	<7221db410812190859h417688ffv7abc6acfcd089edc@mail.gmail.com>
Message-ID: <21122329.post@talk.nabble.com>


 thank you very much.
 I missed the GDAL_DRIVER_PATH ,thanks again.


Daniele Romagnoli-2 wrote:
> 
> Hi,
> I did a similar thing on 1.4.4 and 1.5.3.
> Basically, you are building ECW driver as a plugin as stated by the flag
> ECW_PLUGIN = YES
> Therefore, you need to do a separate build of the ECW GDAL Driver.
> Go in gdal/frmts/ecw and run "nmake /f makefile.vc plugin"
> This command should produce a gdal_ECW_JP2ECW.DLL.
> 
> Finally you need to define a GDAL_DRIVER_PATH environment variable linking
> to the location where you have built gdal_ECW_JP2ECW.DLL.
> After this, gdalinfo should find the ECW driver.
> 
> Let me know if you have additional issues, since I did these steps on
> 1.4.4
> which needed some fixes that I have copied from 1.6.0 code. (I guess 1.6.0
> already contains all the proper declarations)
> 
> Regards,
> Daniele
> 
> 
> On Mon, Dec 15, 2008 at 3:21 AM, wickley <wickleyl@gmail.com> wrote:
> 
>>
>> Hello , I  have some question about supporting ECW in gdal.but I can not
>> solve  it. My step is following:
>>
>> 1.I download gdal-1.6.0 and
>> ImageCompressionSDKSourceCode3.3Setup_20070509.zip from ERMaper webset
>> and
>> Windows Server 2003 R2 Platform SDK from microsoft website.
>> 2. I set up Windows Server 2003 R2 Platform SDK on my computer in
>> D:\Program
>> Files2.
>> 3. I unzip the ImageCompressionSDKSourceCode3.3Setup_20070509.zip,and
>> select
>> E:\libecwj2-3.3
>>   \Source\NCSBuildQmake\libecwj2_win32_net_shared.vcproj,using visual
>> studio 2005.When open the file,
>>   it needs translate, and it translates well with no error and just two
>> warnings.
>> 4. I set visual studio 2005 project->c/c++->general ->include
>> directory,and
>> add D:\Program Files2\Microsoft Platform SDK for  Windows Server 2003
>> R2\Include
>> 5. I select debug,win32 ,and build libecwj2.dll successfully,and it is
>> included in E:\libecwj2-3.3\Source\NCSBuildQmake\Debug
>> 6. I unzip gdal-1.6.0 to E:\gdal-1.6.0. change MSVC_VER=1400 .
>> 7. for ECW support, I Uncomment the following and update to enable ECW
>> support.
>>    # Uncomment the following and update to enable ECW support.
>>    ECW_PLUGIN = YES
>>    ECWDIR  =   E:\libecwj2-3.3
>>    ECWLIB  =   $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
>> 8.   open E:\gdal-1.6.0\frmts\leveller\levellerdataset.cpp,and change {
>> "?,
>> kPI / 180.0, UNITLABEL_DEGREE } to
>>   { "?", kPI / 180.0, UNITLABEL_DEGREE }
>> 9. I start visual studio 2005 commandline , and change the path to
>> E:\gdal-1.6.0, then ,I inputs command nmake /f makefile.vc,nmake /f
>> makefile.vc install and nmake /f makefile.vc devinstall.
>> 10. I copy gdal16.dll to C:\WINDOWS\system32.
>> 11. I set tools->options->projec and solution -> vc++ direction
>> ->includingfile->C:\warmerda\bld\include
>>
>> ->libraries->C:\warmerda\bld\lib
>> 12.I build a new project,and code following:
>>   #include "gdal_priv.h"
>>   #include "stdio.h"
>>   #include "gdal.h"
>>   #pragma comment(lib, "gdal_i.lib")
>>   int main()
>>   {
>>        const char *p=NULL;
>>        GDALDataset  *poDataset=NULL;
>>        GDALDriver *pDriver=NULL;
>>        GDALAllRegister();
>>        int t =GDALGetDriverCount();
>>        printf("%d\n",t);
>>        for(int k=0;k<t;k++)
>>        {
>>                const char *pt=NULL;
>>                pDriver=(GDALDriver *)GDALGetDriver(k);
>>                pt=pDriver->GetDescription();
>>                printf("%s\n",pt);
>>        }
>>  }
>> result:
>> 75
>> VRT
>> GTiff
>> NITF
>> RPFTOC
>> HFA
>> SAR_CEOS
>> CEOS
>> JAXAPALSAR
>> GFF
>> ELAS
>> AIG
>> AAIGrid
>> SDTS
>> DTED
>> PNG
>> JPEG
>> MEM
>> JDEM
>> GIF
>> ESAT
>> BSB
>> XPM
>> BMP
>> DIMAP
>> AirSAR
>> RS2
>> PCIDSK
>> PCRaster
>> ILWIS
>> SGI
>> SRTMHGT
>> Leveller
>> Terragen
>> ISIS3
>> ISIS2
>> PDS
>> ERS
>> L1B
>> FIT
>> GRIB
>> RMF
>> MSGN
>> RST
>> INGR
>> GSAG
>> GSBG
>> GS7BG
>> COSAR
>> TSX
>> COASP
>> PNM
>> DOQ1
>> DOQ2
>> ENVI
>> EHdr
>> GenBin
>> PAux
>> MFF
>> MFF2
>> FujiBAS
>> GSC
>> FAST
>> BT
>> LAN
>> CPG
>> IDA
>> NDF
>> EIR
>> DIPEx
>> LCP
>> RIK
>> USGSDEM
>> GXF
>> ADRG
>> BLX
>>
>> there is no ECW,why?can anyone help me?
>> --
>> View this message in context:
>> http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632p20997632.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> -- 
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
> 
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
> 
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
> 
> 
> http://www.geo-solutions.it
> 
> -------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
View this message in context: http://www.nabble.com/Supporting-ECW-as-a-plugin-on-window%2C-tp20997632p21122329.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jean-charles.quillet at alyotech.fr  Mon Dec 22 04:45:32 2008
From: jean-charles.quillet at alyotech.fr (QUILLET Jean-Charles)
Date: Mon Dec 22 04:46:38 2008
Subject: [gdal-dev] Getting vmap coverage description from OGDI driver
Message-ID: <06A7AD4E92172446ADDEB44F8A5D5C1009AAD11775@ARE01.alyotech.fr>

Hi,

I'm using gdal to read vector vmap layers and it works great. I'm trying to get easier layer names than the ones returned from gdal, like "watrcrsl@hydro(*)_line" which are not very explicit for a end user point of view.

The software VPFView is able somehow to get more explicit names of vmap coverages. I've no idea if these are actually read from the vmap files. But it might be interesting for me to get it as well.

Is there any way, it can be done using gdal ? If not, is there a one to one link between gdal layer names and descriptions from VPFView ? like the layer "watrcrsl@hydro(*)_line" corresponding to coverage: "hydrography", feature class: "water courses"

Any help or information greatly appreciated,

Jean-Charles
From kfw4 at cornell.edu  Mon Dec 22 09:37:15 2008
From: kfw4 at cornell.edu (Kevin Webb)
Date: Mon Dec 22 10:10:27 2008
Subject: [gdal-dev] OGR and GEOS
Message-ID: <6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>

Greetings!

The documentation for the OGRGeometry class mentions the GEOS library in a 
few of the
method definitions, but I wonder if there is a "stronger" OGR dependency on 
the GEOS
library than the documentation suggests. Perhaps GEOS should be a required 
library.

I had done some processing using OGRGeometry::Intersects() without the GEOS 
library
installed, I then installed GEOS to run the same tests using 
OGRGeometry::Distance().
After installing GEOS, but before running the OGRGeometry::Distance() 
tests, I re-ran the
code using OGRGeometry::Intersects() and noticed different intersection 
results.

Before-GEOS, the Intersects() method indicated intersection with 2 layer 
polygons. After-GEOS,
the Intersects() method indicated intersection with 1 layer polygon. Note: 
After-GEOS results
for both Intersects() and Distance() == 0 were the same.

Should the GEOS library be a requirement for deterministic OGR processing?


Thank you.


KFW




From warmerdam at pobox.com  Mon Dec 22 11:07:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 22 11:08:00 2008
Subject: [gdal-dev] OGR and GEOS
In-Reply-To: <6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>
References: <6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>
Message-ID: <494FBB49.7040003@pobox.com>

Kevin Webb wrote:
> Greetings!
> 
> The documentation for the OGRGeometry class mentions the GEOS library in 
> a few of the
> method definitions, but I wonder if there is a "stronger" OGR dependency 
> on the GEOS
> library than the documentation suggests. Perhaps GEOS should be a 
> required library.
> 
> I had done some processing using OGRGeometry::Intersects() without the 
> GEOS library
> installed, I then installed GEOS to run the same tests using 
> OGRGeometry::Distance().
> After installing GEOS, but before running the OGRGeometry::Distance() 
> tests, I re-ran the
> code using OGRGeometry::Intersects() and noticed different intersection 
> results.
> 
> Before-GEOS, the Intersects() method indicated intersection with 2 layer 
> polygons. After-GEOS,
> the Intersects() method indicated intersection with 1 layer polygon. 
> Note: After-GEOS results
> for both Intersects() and Distance() == 0 were the same.
> 
> Should the GEOS library be a requirement for deterministic OGR processing?

Kevin,

The Intersects() is bounding box based without GEOS, and based on
actual geometry intersection if it is available.  That is presumably
why your results differ.

For a large number of people OGR is just fine without GEOS, so I see
no reason to make it a fixed dependency.  It might be prudent to better
document the caveats of operating without it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Mon Dec 22 12:46:03 2008
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Mon Dec 22 12:46:10 2008
Subject: [gdal-dev] OGR and GEOS
Message-ID: <738927440812220946q5b68a314o38b818bda2ba1bd0@mail.gmail.com>

>
> Date: Mon, 22 Dec 2008 09:37:15 -0500
> From: Kevin Webb <kfw4@cornell.edu>
> Subject: [gdal-dev] OGR and GEOS
> To: gdal-dev@lists.osgeo.org
> Message-ID:
>        <6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>
> Content-Type: text/plain; charset="us-ascii"; format=flowed
>
> Greetings!
>
> The documentation for the OGRGeometry class mentions the GEOS library in a
> few of the
> method definitions, but I wonder if there is a "stronger" OGR dependency on
> the GEOS
> library than the documentation suggests. Perhaps GEOS should be a required
> library.
>
> I had done some processing using OGRGeometry::Intersects() without the GEOS
> library
> installed, I then installed GEOS to run the same tests using
> OGRGeometry::Distance().
> After installing GEOS, but before running the OGRGeometry::Distance()
> tests, I re-ran the
> code using OGRGeometry::Intersects() and noticed different intersection
> results.
>
> Before-GEOS, the Intersects() method indicated intersection with 2 layer
> polygons. After-GEOS,
> the Intersects() method indicated intersection with 1 layer polygon. Note:
> After-GEOS results
> for both Intersects() and Distance() == 0 were the same.
>
> Should the GEOS library be a requirement for deterministic OGR processing?
>
>
> Thank you.
>
>
> KFW
>
> With GEOS and without GEOS you will get "deterministic" results. The
difference is that the algorithm to calculate intersections without GEOS is
simpler - just bounding box intersections. You want GEOS installed.

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081222/42fde623/attachment.html
From kfw4 at cornell.edu  Mon Dec 22 14:10:55 2008
From: kfw4 at cornell.edu (Kevin Webb)
Date: Mon Dec 22 14:12:05 2008
Subject: [gdal-dev] OGR and GEOS
In-Reply-To: <494FBB49.7040003@pobox.com>
References: <6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>
	<494FBB49.7040003@pobox.com>
Message-ID: <6.2.1.2.2.20081222140050.040a50b8@postoffice7.mail.cornell.edu>

At 11:07 AM 12/22/2008, Frank Warmerdam wrote:
>Kevin Webb wrote:
>>Greetings!
>>The documentation for the OGRGeometry class mentions the GEOS library in 
>>a few of the
>>method definitions, but I wonder if there is a "stronger" OGR dependency 
>>on the GEOS
>>library than the documentation suggests. Perhaps GEOS should be a 
>>required library.
>>I had done some processing using OGRGeometry::Intersects() without the 
>>GEOS library
>>installed, I then installed GEOS to run the same tests using 
>>OGRGeometry::Distance().
>>After installing GEOS, but before running the OGRGeometry::Distance() 
>>tests, I re-ran the
>>code using OGRGeometry::Intersects() and noticed different intersection 
>>results.
>>Before-GEOS, the Intersects() method indicated intersection with 2 layer 
>>polygons. After-GEOS,
>>the Intersects() method indicated intersection with 1 layer polygon. 
>>Note: After-GEOS results
>>for both Intersects() and Distance() == 0 were the same.
>>Should the GEOS library be a requirement for deterministic OGR processing?
>
>Kevin,
>
>The Intersects() is bounding box based without GEOS, and based on
>actual geometry intersection if it is available.  That is presumably
>why your results differ.
>
>For a large number of people OGR is just fine without GEOS, so I see
>no reason to make it a fixed dependency.  It might be prudent to better
>document the caveats of operating without it.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent


Thank you for your reply Frank.

Giving the documentation a boost should provide some relief.




KFW



-----------------------------------------
Kevin Webb
Programmer/Analyst
Cornell Lab of Ornithology
159 Sapsucker Woods Rd.
Ithaca, NY 14850
Tel: 607.254.2103
Fax: 607.254.2415
kfw4@cornell.edu
-------------------------------------------

From kfw4 at cornell.edu  Mon Dec 22 14:26:24 2008
From: kfw4 at cornell.edu (Kevin Webb)
Date: Mon Dec 22 14:27:12 2008
Subject: [gdal-dev] OGR and GEOS
In-Reply-To: <738927440812220946q5b68a314o38b818bda2ba1bd0@mail.gmail.co
 m>
References: <738927440812220946q5b68a314o38b818bda2ba1bd0@mail.gmail.com>
Message-ID: <6.2.1.2.2.20081222141137.040e7d50@postoffice7.mail.cornell.edu>

At 12:46 PM 12/22/2008, Ragi Y. Burhum wrote:
>Date: Mon, 22 Dec 2008 09:37:15 -0500
>From: Kevin Webb <<mailto:kfw4@cornell.edu>kfw4@cornell.edu>
>Subject: [gdal-dev] OGR and GEOS
>To: <mailto:gdal-dev@lists.osgeo.org>gdal-dev@lists.osgeo.org
>Message-ID:
> 
><<mailto:6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>6.2.1.2.2.20081222085228.03fe8f40@postoffice7.mail.cornell.edu>
>Content-Type: text/plain; charset="us-ascii"; format=flowed
>
>Greetings!
>
>The documentation for the OGRGeometry class mentions the GEOS library in a
>few of the
>method definitions, but I wonder if there is a "stronger" OGR dependency on
>the GEOS
>library than the documentation suggests. Perhaps GEOS should be a required
>library.
>
>I had done some processing using OGRGeometry::Intersects() without the GEOS
>library
>installed, I then installed GEOS to run the same tests using
>OGRGeometry::Distance().
>After installing GEOS, but before running the OGRGeometry::Distance()
>tests, I re-ran the
>code using OGRGeometry::Intersects() and noticed different intersection
>results.
>
>Before-GEOS, the Intersects() method indicated intersection with 2 layer
>polygons. After-GEOS,
>the Intersects() method indicated intersection with 1 layer polygon. Note:
>After-GEOS results
>for both Intersects() and Distance() == 0 were the same.
>
>Should the GEOS library be a requirement for deterministic OGR processing?
>
>
>Thank you.
>
>
>KFW
>
>With GEOS and without GEOS you will get "deterministic" results. The 
>difference is that the algorithm to calculate intersections without GEOS 
>is simpler - just bounding box intersections. You want GEOS installed.
>
>- Ragi

Thank you for your reply Ragi.

You are correct, I should not have used to word "deterministic;" with-GEOS 
or without-GEOS I produced the same output
result for each processing run.

As Frank suggested in his post, I think more clarity is needed in the 
write-ups for the methods that use alternate
processing logic with-GEOS installed when compared to a similar operation 
without-GEOS installed.



KFW


>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----------------------------------------
Kevin Webb
Programmer/Analyst
Cornell Lab of Ornithology
159 Sapsucker Woods Rd.
Ithaca, NY 14850
Tel: 607.254.2103
Fax: 607.254.2415
kfw4@cornell.edu
-------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081222/de0d3eaa/attachment.html
From warmerdam at pobox.com  Mon Dec 22 14:30:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 22 14:30:16 2008
Subject: [gdal-dev] Re: Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release
In-Reply-To: <494A8A7C.8010302@pobox.com>
References: <494A8A7C.8010302@pobox.com>
Message-ID: <494FEAB8.5040803@pobox.com>

Frank Warmerdam wrote:
> Motion: Approve GDAL/OGR 1.4.5RC2 as 1.4.5 Release.

Folks,

I declare this motion passed with support from FrankW, DanielM, EvenR,
and TamasS.

I'll update the site and send out an announcement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Dec 22 14:44:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 22 14:44:23 2008
Subject: [gdal-dev] GDAL/OGR 1.4.5 Released
Message-ID: <494FEE00.8060702@pobox.com>

Folks,

The GDAL/OGR project is pleased to announce the release of GDAL/OGR 1.4.5.
This is anticipated to be the last release on the 1.4 branch.  The current
stable branch is 1.6, and the 1.5 stable branch will continued to be
maintained for a while.  However, this should be treated as the "end of
support" for the 1.4 branch.

The source can be downloaded from:

   http://download.osgeo.org/gdal/gdal-1.4.5.tar.gz
   http://download.osgeo.org/gdal/gdal145.zip

The release contains only bug reports described at:

   http://trac.osgeo.org/gdal/wiki/Release/1.4.5-News

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Mon Dec 22 22:00:27 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec 22 22:00:35 2008
Subject: [gdal-dev] Can I manually LoadLibrary(gdal16.dll) instead of
	putting GDAL's bin dir in the PATH?
Message-ID: <012801c964aa$9c5f50c0$d51df240$@roberts@duke.edu>

My Python application uses GDAL and OGR internally. I install a private copy
of GDAL with my app. I do not want to require the user to add GDAL's bin
directory to the PATH. To work around this, I have been manually adding the
directory to the PATH, importing the needed Python modules (e.g. osgeo.ogr),
and removing the directory from the PATH.

 

This strategy has worked fine until I discovered a compatibility problem
with ArcGIS, which my application also uses. Due to an apparent bug in Arc
9.3 SP1, when my application sets the PATH, a certain geoprocessing tool
will crash if I call it later, even if I reset the PATH to what it was
before. It does not matter what I set the PATH to-I can set it to its
current value, theoretically leaving it unchanged-the Arc tool will always
crash. So now I'm seeking an alternative, because getting ESRI to fix bugs
like this is generally a lost cause.

 

My alternative strategy is:

 

1.    Do not mess with the PATH environment variable at all.

2.    Explicitly LoadLibrary gdal16.dll by calling Python
win32api.LoadLibrary (must call SetDllDirectory first, as well)

3.    Import the Python modules

 

So, in essence, I am wondering: to have the GDAL and OGR classes work
properly, can I just load gdal16.dll explicitly before trying the Python
bindings, rather than adding the GDAL bin directory to the PATH?

 

>From testing, it looks like it works, but I wanted to check with you to be
sure. I know this is kludgy but I am sadly accustomed to developing such
workarounds when dealing with ArcGIS...

 

Thanks for your help,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081222/07131471/attachment-0001.html
From woodbri at swoodbridge.com  Tue Dec 23 00:48:22 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue Dec 23 00:47:07 2008
Subject: [gdal-dev] gdal-1.6.0 fails to build with
 Geo_DSDK-7.0.0.2167.linux.x86.gcc41.tar.gz on Centos 5.2
Message-ID: <49507BA6.8050704@swoodbridge.com>

Hi all,

I have run into a problem that gdal-1.6.0 fails to build with 
Geo_DSDK-7.0.0.2167.linux.x86.gcc41.tar.gz on Centos 5.2

I think this may be the same issue in http://trac.osgeo.org/gdal/ticket/2410

I you think it is and my additional info would be helpful, I can update 
the bug.

$ uname -a
Linux centos 2.6.18-92.1.18.el5 #1 SMP Wed Nov 12 09:30:27 EST 2008 i686 
i686 i386 GNU/Linux

$ gcc --version
gcc (GCC) 4.1.2 20071124 (Red Hat 4.1.2-42)


./configure --without-ld-shared --with-libtiff=internal 
--with-geotiff=internal 
--with-mrsid=/home/woodbri/work/mrsid/Geo_DSDK-7.0.0.2167 
--with-jp2mrsid=yes

the problem(s) I ran into are:


1) if you use a relative path to the SDK it will fail build when it 
traverses into gdal sub dirs. Using a command like:

--with-mrsid=../Geo_DSDK-7.0.0.2167


2) The SDK does is not laid out in the directory tree gdal is expecting. 
This might be an issue with how the SDK is packaged that you need to 
talk to LizardTech about. I was about to work around this by adding some 
additional symlinks like this:

[woodbri@centos Geo_DSDK-7.0.0.2167]$ ls -l include | grep -v .h
total 668
lrwxrwxrwx 1 woodbri woodbri     1 Dec 22 12:13 base -> .
lrwxrwxrwx 1 woodbri woodbri     1 Dec 22 12:14 j2k_readers -> .
lrwxrwxrwx 1 woodbri woodbri     1 Dec 22 12:14 metadata -> .
lrwxrwxrwx 1 woodbri woodbri     1 Dec 22 10:31 mrsid_writers -> .
lrwxrwxrwx 1 woodbri woodbri     1 Dec 22 10:28 support -> .

[woodbri@centos Geo_DSDK-7.0.0.2167]$ ls -l lib
total 4
lrwxrwxrwx 1 woodbri woodbri   20 Dec 22 10:32 libltidsdk.a -> 
Release/libltidsdk.a
lrwxrwxrwx 1 woodbri woodbri   39 Dec 22 14:58 liblt_kakadu.a -> 
../3rd-party/lib/Release/liblt_kakadu.a
drwxr-xr-x 2 woodbri woodbri 4096 May  9  2008 Release

With these additions I was about to get through a configure, compile, 
and link. Unfortunately, I can't test anything yet, because I get an 
illegal instruction when I try to execute anything in the 
Geo_DSDK-7.0.0.2167, which I have reported to the LizardTech SDK forum.

Let me know if you want this added to the ticket above or I shold open a 
new ticket or whatever.

Thanks,
   -Steve
From ivan.lucena at pmldnet.com  Tue Dec 23 02:41:10 2008
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Tue Dec 23 02:41:11 2008
Subject: [gdal-dev] Debugging on Windows Using Visual Studio
In-Reply-To: <d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>
References: <d422b4500812190746t72e7370fwdfb6633f3319b25@mail.gmail.com>	<C482FF98AE985A47B8C982FD429C9E3402ABEB05@daytonmsg2k3.AERO.BALL.COM>	<d422b4500812190756uf363abem49c17c0f2ca75d6e@mail.gmail.com>	<494BC772.5020101@pobox.com>	<d422b4500812190821o133ab0b3r4d34fd80cdaedc02@mail.gmail.com>	<d422b4500812190822h374667d5j5288febc1bf12e78@mail.gmail.com>
	<d422b4500812191135y1dfc7362qc8fe4bc1a92182ff@mail.gmail.com>
Message-ID: <49509616.9060501@pmldnet.com>

Joel,

You could try to update the source code tree in your makegdal80.vcproj 
file by running makegdal_gen.bat. Be aware that it will overwrite your 
project's debugging and nmake options. The OPTFLAGS and the .pdb 
generation will not be affect by that but I think that by updating the 
source code tree VS will be able to perform step-into (F11) better. Not 
sure.

Regards,

Ivan


Joel Odom wrote:
> Problem solved.  For the benefit of the group and the searchable list
> archives, I'll describe here what was going on.
> 
> My build on Windows, using makegdal80.sln, was generating a gdal15.dll
> with symbols and gdal15.pdb file.  For whatever reason, these files
> did not contain sufficient information for me to step in to the code
> in a debug session.  After poking around for some time, I found that
> the OPTFLAGS in nmake.opt were set to the optimized build.  I'm not
> sure why I was seeing the debug symbols loading, but changing OPTFLAGS
> to generate a gdal.pdb (along with the gdal15.pdb) gave me the debug
> information I needed.  (In 1.6.0, the OPTFLAGS is set for debug when
> DEBUG is defined, which seems to make more sense.)
> 
> 
> 
> On Fri, Dec 19, 2008 at 11:22 AM, Joel Odom <joelodom@gmail.com> wrote:
>> More notes on the issue below.
>>
>>
>> ---------- Forwarded message ----------
>> From: Joel Odom <joelodom@gmail.com>
>> Date: Fri, Dec 19, 2008 at 11:21 AM
>> Subject: Re: [gdal-dev] Debugging on Windows Using Visual Studio
>> To: Frank Warmerdam <warmerdam@pobox.com>
>>
>>
>> I'm building from makegdal80.sln.  I'm also starting my debug sessions
>> from this same solution.  I'm getting symbols in gdal15.dll and the
>> .pdb file, but I still can't set a break point anywhere.  It's like
>> the debug symbols don't map correctly to the source code.
>>
>> I'm wondering if there is some flag in the makefile options that is
>> not being set, so the program debug information is incomplete?  I am
>> able to set a break point in my dll that calls gdal, but not anywhere
>> in the gdal methods.  Again, this is all in VS 2005.  I'll post an
>> answer here if I figure out the problem before I give up, but if
>> anyone has any ideas, I'd appreciate it.
>>
>>
>>
>> On Fri, Dec 19, 2008 at 11:10 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>>> Joel Odom wrote:
>>>> Bruce.  I'm trying to debug an app that uses GDAL from unmanaged C++
>>>> on Visual Studio 2005.  I've tried for an hour or two to step into
>>>> gdal, running debug sessions both from the project file from which I
>>>> build gdal and from the app that calls into GDAL, but even when I run
>>>> from the gdal solution itself, it still doesn't let me step through
>>>> source code, even though the modules window says gdal15.dll is loaded
>>>> with symbols from the same location as my .pdb file.
>>> Joel,
>>>
>>> I have generally not had problems with this.  Did you build GDAL using
>>> the nmake files or the solution?  I've had good luck debugging the
>>> utilities and into GDAL itself with visual studio. I normally run things
>>> from the commandline and pop into visual studio when things crash (even
>>> triggering crashes at select points).
>>>
>>> This is usually with visual studio 2003.
>>>
>>> Best regards,
>>> --
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>>
>>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
>>
>>
>> --
>> http://giscoder.blogspot.com/
>>
> 
> 
> 

From warmerdam at pobox.com  Tue Dec 23 09:46:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 23 09:46:41 2008
Subject: [gdal-dev] Can I manually LoadLibrary(gdal16.dll) instead of
	putting GDAL's bin dir in the PATH?
In-Reply-To: <012801c964aa$9c5f50c0$d51df240$@roberts@duke.edu>
References: <012801c964aa$9c5f50c0$d51df240$@roberts@duke.edu>
Message-ID: <4950F9BA.9030405@pobox.com>

Jason Roberts wrote:
> So, in essence, I am wondering: to have the GDAL and OGR classes work 
> properly, can I just load gdal16.dll explicitly before trying the Python 
> bindings, rather than adding the GDAL bin directory to the PATH?
> 
>  
> 
>  From testing, it looks like it works, but I wanted to check with you to 
> be sure. I know this is kludgy but I am sadly accustomed to developing 
> such workarounds when dealing with ArcGIS...

Jason,

I do not know of any reason the LoadLibrary() approach would not work, and
based on your experiments it seems to be.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Tue Dec 23 11:43:20 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Dec 23 11:41:39 2008
Subject: [gdal-dev] gdal 1.6.0 envi driver
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E67C@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I built gdal 1.6.0 on Linux with minimized-drivers option. Now I cannot
read ENVI's img files (my gdal 1.4.0 can read the envi img files). 
How do I add envi driver?
should I use "configure --with-envi=internal" ?

============ GDALmake.opt:
GDAL_FORMATS = 	gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm \
		sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b
\
		nitf bmp pcidsk airsar rs2 ilwis rmf leveller sgi
srtmhgt \
		idrisi gsg ingr ers jaxapalsar dimap gff cosar pds adrg
\
		coasp tsx terragen blx msgn \
		bsb hdf5 hdf4 gif jpeg png pcraster 


thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081223/ceaab0b3/attachment.html
From warmerdam at pobox.com  Tue Dec 23 12:05:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 23 12:05:28 2008
Subject: [gdal-dev] gdal 1.6.0 envi driver
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E67C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E67C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <49511A41.7050503@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I built gdal 1.6.0 on Linux with minimized-drivers option. Now I cannot 
> read ENVI?s img files (my gdal 1.4.0 can read the envi img files).
> 
> How do I add envi driver?
> 
> should I use ?configure ?-with-envi=internal? ?
> 
> ============ GDALmake.opt:
> 
> GDAL_FORMATS =  gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm \
> 
>                 sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b \
> 
>                 nitf bmp pcidsk airsar rs2 ilwis rmf leveller sgi srtmhgt \
> 
>                 idrisi gsg ingr ers jaxapalsar dimap gff cosar pds adrg \
> 
>                 coasp tsx terragen blx msgn \
> 
>                 bsb hdf5 hdf4 gif jpeg png pcraster

Shawn,

Including "raw" in the GDAL_FORMATS should result in the ENVI driver being
included.   Try "gdalinfo --format envi" to check if the driver is built in.
If it is built in, but your file isn't working then we can dig into that
particular file in more detail, perhaps via a ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Wed Dec 24 08:27:42 2008
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Dec 24 08:27:48 2008
Subject: [gdal-dev] Error compiling GDAL with ECW support on VS9
Message-ID: <495238CE.7010001@pmldnet.com>

Does anybody has a clue of what is going on with this compilation error
in the ECW driver. It looks like it finds the libecwj2-3.3 files but it
get stuck with a template definition.

Regards.

D:\238844\TEMP\OpenSource\GDAL\COMPILE_ON_WINDOWS\gdal-svn-trunk-2008.12.17\frmt
s>cd ecw   && nmake /nologo /f makefile.vc   && cd ..
         cl /nologo /MD /EHsc /Ox /W3 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_N
O_DEPRECATE /DNDEBUG  -DCPL_DISABLE_STDCALL -I..\..\port -I..\..\ogr
-I..\..\gco
re  -I..\..\alg -I..\..\ogr\ogrsf_frmts
-ID:\238844\TEMP\OpenSource\GDAL\COMPILE
_ON_WINDOWS\ECW\libecwj2-3.3\include
-ID:\238844\TEMP\OpenSource\GDAL\COMPILE_ON
_WINDOWS\ECW\libecwj2-3.3/Source/include  /D_MBCS /D_UNICODE /DUNICODE
/D_WINDOW
S  /DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI  /c ecwdataset.cpp
ecwdataset.cpp
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(51) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(51) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(53) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(53) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(55) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(55) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(64) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(64) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(66) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(66) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(68) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(68) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(70) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(70) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(72) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(72) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(74) : error C2059: syntax error : '<L_TYPE_raw>'
d:\238844\temp\opensource\gdal\compile_on_windows\ecw\libecwj2-3.3\source\includ
e\NCSJPCBuffer.h(74) : error C2238: unexpected token(s) preceding ';'
d:\238844\temp\opensource\gdal\compile_on_windows\gdal-svn-trunk-2008.12.17\frmt
s\ecw\vsiiostream.h(114) : warning C4800: 'BOOLEAN' : forcing value to
bool 'tru
e' or 'false' (performance warning)
ecwdataset.cpp(734) : warning C4244: 'initializing' : conversion from
'double' t
o 'float', possible loss of data
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\BIN
\cl.EXE"' : return code '0x2'
Stop.


From battisti at actgate.com  Mon Dec 29 08:24:28 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Mon Dec 29 08:24:29 2008
Subject: [Gdal-dev] OGR Multiple features to Shapefile
Message-ID: <1210173042.20867.1.camel@piuma>

Hi all,

are the OGRMulti{ LineString | Point | Polygon } geometries supported by
the ESRI Shapefile driver (in creation mode?); if so I am probably
missing something in they way they should be used.

I am asking this because when I try to write such features (i.e. an
OGRMultiPoint) to a shapefile I get a crash when calling the
addGeometry() method.
I was looking for a working example of OGRMulti* features creation, but
couldn't find one.


Example code:

  const char *pszDriverName = "ESRI Shapefile";
  OGRSFDriver *poDriver;	

  OGRRegisterAll();

  poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( pszDriverName );

// ...

    OGRDataSource *poDS;
poDS = poDriver->CreateDataSource( "multi_out.shp", NULL );
  
// ...

    OGRLayer *poLayer;
    poLayer = poDS->CreateLayer( "poly_out", NULL, wkbMultiPoint,
NULL );

// ...
   
	OGRFeature *poFeature;
	OGRGeometry * the_geom = NULL;

	poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
	

	OGRMultiPoint * dpoly = new OGRMultiPoint();


	OGRPoint * point = new OGRPoint();
	point->setX( 42.0 );
	point->setY( 42.0 );

	dpoly->addGeometryDirectly( point );
	// delete point;
	

	the_geom = dpoly;
	poFeature->SetGeometry( the_geom );
	delete the_geom;

	
	if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
	{
		printf( "Failed to create feature in shapefile.\n" );
		exit( 1 );
	}

	OGRFeature::DestroyFeature( poFeature );

	OGRDataSource::DestroyDataSource( poDS );


Thanks in advance!
Best Regards,

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From ivan.lucena at pmldnet.com  Mon Dec 29 12:03:18 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Mon Dec 29 12:03:22 2008
Subject: [gdal-dev] HDF4 reading MISR Level 3 with incorrect dimension
Message-ID: <20081229170318.18303.qmail@s466.sureserver.com>

Hi there,

I don't know if that is a case for a ticket or if I missed the latest discussion on HDF dimensions.

I've got this HDF4 file, a MISR Level 3 product [1]:

---
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Absorbing optical depth
  SUBDATASET_1_DESC=[360x720x9x4] Absorbing optical depth AerosolParameterAverag
e (32-bit floating-point)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Algorithm type count
  SUBDATASET_2_DESC=[360x720x10x2] Algorithm type count AerosolParameterAverage
(32-bit integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Angstrom exponent
  SUBDATASET_3_DESC=[360x720x9] Angstrom exponent AerosolParameterAverage (32-bi
t floating-point)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Average fill flag
  SUBDATASET_4_DESC=[360x720] Average fill flag AerosolParameterAverage (8-bit i
nteger)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Optical depth average
  SUBDATASET_5_DESC=[360x720x9x4x6] Optical depth average AerosolParameterAverag
e (32-bit floating-point)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Optical depth average count
  SUBDATASET_6_DESC=[360x720x9x4x6] Optical depth average count AerosolParameter
Average (32-bit integer)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Optical depth standard deviation
  SUBDATASET_7_DESC=[360x720x9x4x6] Optical depth standard deviation AerosolPara
meterAverage (32-bit floating-point)
  SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Single-scatter albedo
  SUBDATASET_8_DESC=[360x720x9x4] Single-scatter albedo AerosolParameterAverage
(32-bit floating-point)
  SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
solParameterAverage:Single-scatter albedo count
  SUBDATASET_9_DESC=[360x720x9x4] Single-scatter albedo count AerosolParameterAv
erage (32-bit integer)
---

If I gdal_translate (with -sds) the first dataset [360x720x9x4] to GTIFF I've got a 9 bands of 720x360. That sounds 
good but doesn't looks good unfortunately. The images looks like a sliced book as you would see it by the side, a 
typical effect of dimension order error.

Any help with that?

Regards,

Ivan

---
[1] http://eosweb.larc.nasa.gov/PRODOCS/misr/DPS/DPS_v50_RevR.pdf






From warmerdam at pobox.com  Mon Dec 29 13:08:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 29 13:08:34 2008
Subject: [gdal-dev] HDF4 reading MISR Level 3 with incorrect dimension
In-Reply-To: <20081229170318.18303.qmail@s466.sureserver.com>
References: <20081229170318.18303.qmail@s466.sureserver.com>
Message-ID: <4959120B.40403@pobox.com>

Lucena, Ivan wrote:
> Hi there,
> 
> I don't know if that is a case for a ticket or if I missed the latest discussion on HDF dimensions.
> 
> I've got this HDF4 file, a MISR Level 3 product [1]:
> 
> ---
> Subdatasets:
>   SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
> solParameterAverage:Absorbing optical depth
>   SUBDATASET_1_DESC=[360x720x9x4] Absorbing optical depth AerosolParameterAverag
> e (32-bit floating-point)
...
> 
> If I gdal_translate (with -sds) the first dataset [360x720x9x4] to GTIFF I've got a 9 bands of 720x360. That sounds 
> good but doesn't looks good unfortunately. The images looks like a sliced book as you would see it by the side, a 
> typical effect of dimension order error.
> 
> Any help with that?

Ivan,

This looks like it would be worth filing a ticket, assuming you can provide
a pointer to the dataset in question.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Mon Dec 29 14:04:48 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Mon Dec 29 14:04:51 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gSERGNCByZWFkaW5nIE1JU1IgTGV2ZWwgMyB3aXRoIGluY29ycmVjdCBkaW1lbnNpb24=?=
Message-ID: <20081229190448.2254.qmail@s466.sureserver.com>

Ok Frank,

I create the ticket [1] with links to the site [2] where the images came from.

Best regards,

Ivan

[1] http://trac.osgeo.org/gdal/ticket/2758
[2] http://eosweb.larc.nasa.gov/PRODOCS/misr/level3/level3_CGAS_small.html

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  Subject: Re: [gdal-dev] HDF4 reading MISR Level 3 with incorrect dimension
>  Sent: Dec 29 '08 18:08
>  
>  Lucena, Ivan wrote:
>  > Hi there,
>  >
>  > I don't know if that is a case for a ticket or if I missed the latest discussion on HDF dimensions.
>  >
>  > I've got this HDF4 file, a MISR Level 3 product [1]:
>  >
>  > ---
>  > Subdatasets:
>  >?? SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_CGAS_APR_2000_F15_0031.hdf":Aero
>  > solParameterAverage:Absorbing optical depth
>  >?? SUBDATASET_1_DESC=[360x720x9x4] Absorbing optical depth AerosolParameterAverag
>  > e (32-bit floating-point)
>  ...
>  >
>  > If I gdal_translate (with -sds) the first dataset [360x720x9x4] to GTIFF I've got a 9 bands of 720x360. That 
sounds
>  > good but doesn't looks good unfortunately. The images looks like a sliced book as you would see it by the side, 
a
>  > typical effect of dimension order error.
>  >
>  > Any help with that?
>  
>  Ivan,
>  
>  This looks like it would be worth filing a ticket, assuming you can provide
>  a pointer to the dataset in question.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush????| Geospatial Programmer for Rent
>  
>  

From woklist at kyngchaos.com  Mon Dec 29 17:39:32 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Dec 29 17:39:36 2008
Subject: [gdal-dev] Docs zips out of sync
Message-ID: <3055BCDB-C027-430F-9A90-92B4AAC15278@kyngchaos.com>

Ack!

gdal150doc.zip contains the GDAL 1.4.4 documentation.

gdal160doc.zip contains the GDAL 1.5.3 documentation.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From seth at pricepages.org  Mon Dec 29 17:55:26 2008
From: seth at pricepages.org (Seth Price)
Date: Mon Dec 29 17:55:29 2008
Subject: [gdal-dev] Removing nodata values
Message-ID: <52236.70.226.134.115.1230591326.squirrel@pricepages.org>

How can one remove the nodata values from a GeoTIFF? I'm working with a 3
band RGB image.

I find many instructions on how to add the values, but none on how to
remove them.
Thanks,
Seth

From warmerdam at pobox.com  Mon Dec 29 23:38:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 29 23:38:23 2008
Subject: [gdal-dev] Removing nodata values
In-Reply-To: <52236.70.226.134.115.1230591326.squirrel@pricepages.org>
References: <52236.70.226.134.115.1230591326.squirrel@pricepages.org>
Message-ID: <4959A5AF.8020908@pobox.com>

Seth Price wrote:
> How can one remove the nodata values from a GeoTIFF? I'm working with a 3
> band RGB image.
> 
> I find many instructions on how to add the values, but none on how to
> remove them.

Seth,

Unfortunately there isn't a particularly direct way of accomplishing this.
You could do:

   gdal_translate -of VRT your.tif work.vrt

Then manually edit work.vrt and remove the line(s) with the NoDataValue
tags.   Then convert back to geotiff.

   gdal_translate work.vrt fixed_your.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.kirkpatrick at bigpond.com  Mon Dec 29 23:53:10 2008
From: j.kirkpatrick at bigpond.com (Jack Kirkpatrick)
Date: Tue Dec 30 01:32:48 2008
Subject: [gdal-dev] Puzzling results from gdalinfo with BSB nautical charts
Message-ID: <2ACAFE66051448078E8162DA3FDC9850@DELL8300>

Greetings,

I have been exploring the GDAL utilities with a view to creating a general BSB to RLE bitmap converter that also generates a separate WGS84 worldfile, appropriately transformed for the datum etc of the original BSB file.

I believe I am getting some puzzling results from the gdalinfo utility that I will try to explain as follows:

--------------------------------------

(1) Environment is Windows XP SP3 and I have installed FWTools 2.2.9.


--------------------------------------

(2) I have obtained NOAA BSB chart no 11006 (KEY WEST TO THE MISSISSIPPI RIVER) from:

http://www.nauticalcharts.noaa.gov/mcd/Raster/download_agreement.htm

scroll to the bottom then click [Proceed to NOAA RNC(R) (BSB) Downloads] then click [Textual], the rest is pretty obvious.


--------------------------------------

(3) After downloading and unzipping to [C:\NOAA BSB\11006], I inspect the file [C:\NOAA BSB\11006\11006_1.KAP] with the Windows Wordpad applet, the first several lines read as follows:

!
CRR/
VER/3.0
BSB/NA=KEY WEST TO THE MISSISSIPPI RIVER,NU=44,RA=10967,9389,DU=254
KNP/SC=875000,GD=NAD83,PR=MERCATOR,PP=26.127,PI=60.000,SP=,SK=0.0000000
TA=90.0000000,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=87.50,DY=87.50
...

I'm guessing "GD=NAD83,PR=MERCATOR" means the file contents are to NAD83 datum in a Mercator projection.

This file also contains 92 ground control points of the form:

REF/1,275,8522,24.1668694444,-90.0831111111
REF/2,275,300,30.5834527778,-90.0831111111
REF/3,2427,300,30.5834527778,-88.1999805556
...
REF/92,275,1069,30.0000583333,-90.0831111111

--------------------------------------

(4) I launch the FWTools shell via the [FWTools Shell] shortcut on the desktop and within the FWTools shell I key:

gdalinfo -nomd -noct "C:\NOAA BSB\11006\11006_1.kap" > "C:\NOAA BSB\11006\11006_1.txt"


--------------------------------------

(5) I inspect the resulting file [C:\NOAA BSB\11006\11006_1.txt] which shows:

Driver: BSB/Maptech BSB Nautical Charts
Files: C:\NOAA BSB\11006\11006_1.kap
Size is 10967, 9389
Coordinate System is `'
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
GCP[ 0]: Id=GCP_1, Info=
(275,8522) -> (-90.0831111111,24.1668694444,0)
GCP[ 1]: Id=GCP_2, Info=
(275,300) -> (-90.0831111111,30.5834527778,0)
GCP[ 2]: Id=GCP_3, Info=
(2427,300) -> (-88.1999805556,30.5834527778,0)
...
GCP[ 91]: Id=GCP_92, Info=
(275,1069) -> (-90.0831111111,30.0000583333,0)
Corner Coordinates:
Upper Left ( 0.0, 0.0)
Lower Left ( 0.0, 9389.0)
Upper Right (10967.0, 0.0)
Lower Right (10967.0, 9389.0)
Center ( 5483.5, 4694.5)
Band 1 Block=10967x1 Type=Byte, ColorInterp=Palette
Color Table (RGB with 12 entries)

<<<<< i.e. somehow gdalinfo has decided that the files contents are to WGS84 datum >>>>>

--------------------------------------

(6) I rummaged through the gdal source and found [C:\gdal-1.5.3\frmts\bsb\...] which appears to contain the source files for the GDAL BSB driver(?). 

Of particular interest is the file [C:\gdal-1.5.3\frmts\bsb\bsbdataset.cpp] which contains the line:

pszGCPProjection = "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",6326]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",8901]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",9108]],AXIS[\"Lat\",NORTH],AXIS[\"Long\",EAST],AUTHORITY[\"EPSG\",4326]]";

which is a dead ringer for the [GSP Projection =...] produced by gdalinfo.

I am not a C programmer but reading [C:\gdal-1.5.3\frmts\bsb\bsbdataset.cpp] and [C:\gdal-1.5.3\frmts\bsb\bsb_read.c] it looks to me suspiciously like the GDAL BSB driver forces the gdalinfo datum to WGS84 regardless of what it truly is.

--------------------------------------

(7) I am led to believe that NAD83 is to all intents and purposes WGS84 so I guess there is no harm done if all BSB charts were NAD83 or similarly "WGS84 compatible". 

However if you go to:

http://www.digitalocean.ca/digitaloceane-store/bsbraster.asp

you can obtain BSB charts for areas totally divorced from NOAA (and therefor presumably NAD83 and similar).

My concern is that I could be in the situation of trying to use the GDAL utilities to convert (say) some New Zealand BSB charts that use a datum that is not "WGS84 compatible" but the GDAL utilities force the datum to WGS84 without any appropriate transformation.

--------------------------------------

Any and all comments welcomed - I do hope I haven't missed something embarrassingly simple in this great monologue...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081230/9063a53f/attachment-0001.html
From jason.roberts at duke.edu  Tue Dec 30 11:51:59 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Dec 30 11:52:09 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
Message-ID: <002c01c96a9e$efaa9240$ceffb6c0$@roberts@duke.edu>

With the 1.6 release, GDAL for win32 appears to have taken a new dependency
on xerces-c_2_7.dll. Unfortunately this causes compatibility problems with
other applications.

An increasing number of apps and programming environments rely on xerces-c,
including MATLAB and ArcGIS. The windows releases of MATLAB 2007b, 2008a,
and 2008b and ArcGIS 9.3 all compile their own copies of xerces-c_2_7.dll.
Because they used a different compiler and/or build options than GDAL, their
copies of xerces-c_2_7.dll are incompatible with GDAL (and each other). I am
writing programs that need to load both MATLAB and GDAL into the same
process. Somehow I have to get the MATLAB DLLs to load and link to the
MATLAB version of xerces-c_2_7.dll, and gdal16.dll to load and link to
GDAL's version of xerces-c_2_7.dll. How can I do this?

One attempt looks like this:

1. As recommended by MATLAB, add MATLAB directories to the PATH.
2. As recommended by MATLAB, use load-time dynamic linking to link to MATLAB
DLLs. When my program runs it loads MATLAB's xerces-c_2_7.dll.
3. Try to explicitly load GDAL by calling
LoadLibrary("C:\\gdalwin32-1.6\\bin\gdal16.dll"). This fails with
0xC0000139: Entry Point Not Found.

I have tried setting the PATH by calling SetEnvironmentVariable prior to
step 3. It appears that LoadLibrary checks "do I already have a DLL named
xerces-c_2_7.dll loaded?" and uses it without caring about where it is
located or rechecking the PATH.

Any idea how to get this done?

Ideally, every app that compiles its own xerces-c_2_7.dll should either give
it a private name or leverage the Windows side-by-side (sxs) infrastructure.
Because everybody is using it, you could say xerces-c_2_7.dll now has
equivalent status to libraries such as MSVCRT. Any chance that GDAL could
employ one of these solutions so that it may be called from programs that
also load ArcGIS 9.3 or MATLAB DLLs?

Thanks for looking at this,

Jason


From warmerdam at pobox.com  Tue Dec 30 12:16:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 30 12:17:00 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <002c01c96a9e$efaa9240$ceffb6c0$@roberts@duke.edu>
References: <002c01c96a9e$efaa9240$ceffb6c0$@roberts@duke.edu>
Message-ID: <495A5776.8070906@pobox.com>

Jason Roberts wrote:
> With the 1.6 release, GDAL for win32 appears to have taken a new dependency
> on xerces-c_2_7.dll. Unfortunately this causes compatibility problems with
> other applications.

Jason,

This is not a new dependency.  GDAL has optionally used xerces for some time.
Perhaps the issue is just that the standard binaries now link against this
library?

> Any idea how to get this done?

I would suggest just recompiling a GDAL binary without use of Xerces-c
assuming you have no pressing need for GML support.

> Ideally, every app that compiles its own xerces-c_2_7.dll should either give
> it a private name or leverage the Windows side-by-side (sxs) infrastructure.
> Because everybody is using it, you could say xerces-c_2_7.dll now has
> equivalent status to libraries such as MSVCRT. Any chance that GDAL could
> employ one of these solutions so that it may be called from programs that
> also load ArcGIS 9.3 or MATLAB DLLs?

I was under the impression I used the "stock" xerces 2.7 binaries distributed
by the xerces project so I'm somewhat suprised at the degree of compatability
problems.  But I could be wrong about having done that.

I'm afraid I don't understand the "side-by-side" stuff, and I'm concerned
about adding any dependencies on stuff that won't work on older systems.
I'd also note that GDAL's standard binaries are still built with
VC7.1 (aka Visual Studio 2003) which doesn't seem to produce manifests which
I assume are part of the sxs stuff.

If the xerces dependency is too much of a problem, I could regenerate stock
GDAL binaries without the xerces dependency.  I could also potentially build
a renamed xerces to avoid conflicts, though I kind of hate doing that when
the project provides stock binaries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Tue Dec 30 13:42:00 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Dec 30 13:42:11 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <495A5776.8070906@pobox.com>
References: <002c01c96a9e$efaa9240$ceffb6c0$%roberts@duke.edu>
	<495A5776.8070906@pobox.com>
Message-ID: <003301c96aae$4e0d0660$ea271320$@roberts@duke.edu>

Hi Frank,

Thanks for the quick reply. 

> This is not a new dependency.  GDAL has optionally used xerces for some
time.
> Perhaps the issue is just that the standard binaries now link against this
> library?

Ok, that is probably what I meant. The standard GDAL 1.6.0 win32 binary
release (http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip)
includes the xerces DLL and gdal16.dll links to it, whereas the standard
1.5.0 release (http://download.osgeo.org/gdal/win32/1.5/gdalwin32exe150.zip)
does not include xerces and gdal15.dll does not link to it. Because of this,
I did not encounter the compatibility problem with 1.5, and now encounter it
with 1.6, using the standard binaries. 

> I was under the impression I used the "stock" xerces 2.7 binaries
distributed
> by the xerces project so I'm somewhat suprised at the degree of
compatability
> problems.  But I could be wrong about having done that.

I attempted to find the stock xerces 2.7 binaries. Because xerces has moved
on to 2.8, the 2.7 binaries are not available at the main xerces download
site http://xerces.apache.org/xerces-c/download.cgi. The most official
fall-back site appears to be
http://archive.apache.org/dist/xml/xerces-c/Xerces-C_2_7_0/binaries/. That
contains only one windows release, xerces-c_2_7_0-windows_2000-msvc_60.zip.
The xerces-c_2_7.dll within it has a different size (2,367,488 bytes) than
the GDAL 1.6 one (1,757,184 bytes). Can you point me to the one you
downloaded and included in GDAL?

Regardless of whether you are using the stock binary or not, it is evident
that either MATLAB or ArcGIS or both are not using it: MATLAB's size:
1,839,104, ArcGIS's size: 1,687,552. My guess is that they compiled their
own copies (probably using a newer version of VC) or there is some Apache
archive that I have not located that includes stock binaries built with
newer compilers.

> If the xerces dependency is too much of a problem, I could regenerate
stock
> GDAL binaries without the xerces dependency.  I could also potentially
build
> a renamed xerces to avoid conflicts, though I kind of hate doing that when
> the project provides stock binaries.

If everyone used the same single stock binary, this problem would not occur.
But if people compile their own copies, or there are multiple incompatible
stock binaries with the same name, there will likely be problems.

Given that you are trying to do the right thing and use the stock binary, I
hesitate to urge you to regenerate your binaries without the xerces
dependency or with a renamed DLL. But the fact is, if you do not, the GDAL
DLL you have released cannot be used in a process that also loads MATLAB or
ArcGIS DLLs (at least until we can get MathWorks and ESRI to recognize the
problem and start using stock DLLs). That writes off a potentially large
group of users, including me. So if it is not too much trouble to begin
releasing parallel GDAL builds that do not link to xerces, it could benefit
many people. If you think the cost/benefit is not there, I can probably
start compiling my own copy of GDAL.

Thanks,

Jason

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, December 30, 2008 12:17 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How can you use GDAL from a process that has already
loaded some other app's xerces-c_2_7.dll?

Jason Roberts wrote:
> With the 1.6 release, GDAL for win32 appears to have taken a new
dependency
> on xerces-c_2_7.dll. Unfortunately this causes compatibility problems with
> other applications.

Jason,

This is not a new dependency.  GDAL has optionally used xerces for some
time.
Perhaps the issue is just that the standard binaries now link against this
library?

> Any idea how to get this done?

I would suggest just recompiling a GDAL binary without use of Xerces-c
assuming you have no pressing need for GML support.

> Ideally, every app that compiles its own xerces-c_2_7.dll should either
give
> it a private name or leverage the Windows side-by-side (sxs)
infrastructure.
> Because everybody is using it, you could say xerces-c_2_7.dll now has
> equivalent status to libraries such as MSVCRT. Any chance that GDAL could
> employ one of these solutions so that it may be called from programs that
> also load ArcGIS 9.3 or MATLAB DLLs?

I was under the impression I used the "stock" xerces 2.7 binaries
distributed
by the xerces project so I'm somewhat suprised at the degree of
compatability
problems.  But I could be wrong about having done that.

I'm afraid I don't understand the "side-by-side" stuff, and I'm concerned
about adding any dependencies on stuff that won't work on older systems.
I'd also note that GDAL's standard binaries are still built with
VC7.1 (aka Visual Studio 2003) which doesn't seem to produce manifests which
I assume are part of the sxs stuff.

If the xerces dependency is too much of a problem, I could regenerate stock
GDAL binaries without the xerces dependency.  I could also potentially build
a renamed xerces to avoid conflicts, though I kind of hate doing that when
the project provides stock binaries.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Dec 30 14:09:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 30 14:09:34 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <003301c96aae$4e0d0660$ea271320$@roberts@duke.edu>
References: <002c01c96a9e$efaa9240$ceffb6c0$%roberts@duke.edu>
	<495A5776.8070906@pobox.com>
	<003301c96aae$4e0d0660$ea271320$@roberts@duke.edu>
Message-ID: <495A71D9.2020504@pobox.com>

Jason Roberts wrote:
> Given that you are trying to do the right thing and use the stock binary, I
> hesitate to urge you to regenerate your binaries without the xerces
> dependency or with a renamed DLL. But the fact is, if you do not, the GDAL
> DLL you have released cannot be used in a process that also loads MATLAB or
> ArcGIS DLLs (at least until we can get MathWorks and ESRI to recognize the
> problem and start using stock DLLs). That writes off a potentially large
> group of users, including me. So if it is not too much trouble to begin
> releasing parallel GDAL builds that do not link to xerces, it could benefit
> many people. If you think the cost/benefit is not there, I can probably
> start compiling my own copy of GDAL.

Jason,

It seems clear that I did not use a stock binary and have in fact compiled
this Xerces myself (actually I presume I inherited from Howard's buildkit).

I'm going to start by rebuilding the stock binary without xerces, and we
can think about where to go from there.  Potentially the GML driver could
be offered as a plugin.  I will note that the xerces I used was from OSGeo4W
which is likely to run into similar issues in the future.  So if we do a
renaming it would likely be "xercesc-2.7-osgeo4w.dll" or something similar.

I have filed a ticket for OSGeo4W on the issue:

   http://trac.osgeo.org/osgeo4w/ticket/31

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Dec 30 14:41:22 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 30 14:41:27 2008
Subject: [Gdal-dev] OGR Multiple features to Shapefile
In-Reply-To: <1210173042.20867.1.camel@piuma>
References: <1210173042.20867.1.camel@piuma>
Message-ID: <200812302041.23679.even.rouault@mines-paris.org>

Hi,

I've tested your code snippet under Linux and it works perfectly.

If you are under Windows, I'd suspect you hit a known issue about incompatible 
new/delete procedures of the C runtime from your module with the ones used by 
GDAL's C runtime. See 
http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#HowshouldIdeallocateresourcesacquaintedfromGDALonWindows

So, you should try :
OGRMultiPoint * dpoly = (OGRMultiPoint *)
		 OGRGeometryFactory::createGeometry(wkbMultiPoint);
OGRPoint * point = (OGRPoint *)
                 OGRGeometryFactory::createGeometry(wkbPoint);
OGRGeometryFactory::destroyGeometry(the_geom);

Best regards,

Even

Le Wednesday 07 May 2008 17:10:42 Andrea Battisti, vous avez ?crit?:
> Hi all,
>
> are the OGRMulti{ LineString | Point | Polygon } geometries supported by
> the ESRI Shapefile driver (in creation mode?); if so I am probably
> missing something in they way they should be used.
>
> I am asking this because when I try to write such features (i.e. an
> OGRMultiPoint) to a shapefile I get a crash when calling the
> addGeometry() method.
> I was looking for a working example of OGRMulti* features creation, but
> couldn't find one.
>
>
> Example code:
>
>   const char *pszDriverName = "ESRI Shapefile";
>   OGRSFDriver *poDriver;
>
>   OGRRegisterAll();
>
>   poDriver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( pszDriverName );
>
> // ...
>
>     OGRDataSource *poDS;
> poDS = poDriver->CreateDataSource( "multi_out.shp", NULL );
>
> // ...
>
>     OGRLayer *poLayer;
>     poLayer = poDS->CreateLayer( "poly_out", NULL, wkbMultiPoint,
> NULL );
>
> // ...
>
> 	OGRFeature *poFeature;
> 	OGRGeometry * the_geom = NULL;
>
> 	poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
>
>
> 	OGRMultiPoint * dpoly = new OGRMultiPoint();
>
>
> 	OGRPoint * point = new OGRPoint();
> 	point->setX( 42.0 );
> 	point->setY( 42.0 );
>
> 	dpoly->addGeometryDirectly( point );
> 	// delete point;
>
>
> 	the_geom = dpoly;
> 	poFeature->SetGeometry( the_geom );
> 	delete the_geom;
>
>
> 	if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
> 	{
> 		printf( "Failed to create feature in shapefile.\n" );
> 		exit( 1 );
> 	}
>
> 	OGRFeature::DestroyFeature( poFeature );
>
> 	OGRDataSource::DestroyDataSource( poDS );
>
>
> Thanks in advance!
> Best Regards,


From Michael.Smith at maine.gov  Tue Dec 30 14:49:01 2008
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Tue Dec 30 14:49:06 2008
Subject: [gdal-dev] RE: Border slivers and JPEG2000 compression
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <4EFF8BB964547748A07CA32961810C041362A754@SOM-TEAQASMAIL1.som.w2k.state.me.us>

I never found a good solution to this - one thing I am doing is taking
the TIFFs and mosaicking them with their neighbors to fill these slivers
with data from the adjacent tile, so there are no slivers.  That is a
brute-force and inelegant solution though.

Any suggestions on how to keep border pixels with value 0 in a TIFF to
stay 0 in a resulting JP2 (with Kakadu) in GDAL?

**********
Michael Smith
State GIS Manager
Maine Office of GIS 


> _____________________________________________ 
> From: 	Smith, Michael  
> Sent:	Monday, December 15, 2008 5:04 PM
> To:	'gdal-dev@lists.osgeo.org'
> Subject:	Border slivers and JPEG2000 compression
> 
> I have several orthophotos which are TIFFs, and they align with the
> USGS quadrangle corners, which means they are rotated slightly,
> leaving small uneven slivers along the edges where pixel value is 0
> (the data for these are available from adjacent tiles).  All the
> pixels inside the 'real' area of the photo are value > 0.
> 
> This is no problem with TIFFs, as the 0 can be turned off in
> applications such as ArcGIS or serving them out via MapServer WMS.
> But when I convert to JPEG2000 (using Kakadu), the edge pixels are
> interpolated to different values, typically something like 0, 1, 2, or
> 3.  Thus I can't just filter them out. Also inside the photo,
> sometimes very dark pixels (which should really be value 2, 3, etc)
> are converted to value 0.  Thus they show up as 'holes' in
> applications when pixel value 0 is filtered out.
> 
> What I want to do is simply show a bunch of JP2 tiles, with the border
> pixels staying as value 0, and no other pixels having value 0.
> 
> I have tried a couple approaches, including 
> 
> gdal_translate -a_nodata 0   (the border pixels still have values > 0)
> 
> gdal_rasterize -i -burn 0    (won't write JP2KAK)
> 
> Surely I'm not the first to try this, but I can't find the right steps
> on the web.  Any suggestions would be appreciated.
> 
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081230/084bbaee/attachment.html
From even.rouault at mines-paris.org  Tue Dec 30 14:57:09 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 30 14:57:21 2008
Subject: [gdal-dev] Puzzling results from gdalinfo with BSB nautical charts
In-Reply-To: <2ACAFE66051448078E8162DA3FDC9850@DELL8300>
References: <2ACAFE66051448078E8162DA3FDC9850@DELL8300>
Message-ID: <200812302057.10042.even.rouault@mines-paris.org>

Jack,

your understanding of the BSB driver source code is correct. It will always 
return WGS84 as the GCP projection.
NAD83 and WGS84 are generally considered as equivalent/compatible, so this 
should be OK for your use case.

But I've no idea if there are BSB datasets that are not NAD83 or WGS84. In 
which case, the BSB driver would have to be improved to parse the appropriate 
line.

Best regards,
Even

Le Tuesday 30 December 2008 05:53:10 Jack Kirkpatrick, vous avez ?crit?:
> Greetings,
>
> I have been exploring the GDAL utilities with a view to creating a general
> BSB to RLE bitmap converter that also generates a separate WGS84 worldfile,
> appropriately transformed for the datum etc of the original BSB file.
>
> I believe I am getting some puzzling results from the gdalinfo utility that
> I will try to explain as follows:
>
> --------------------------------------
>
> (1) Environment is Windows XP SP3 and I have installed FWTools 2.2.9.
>
>
> --------------------------------------
>
> (2) I have obtained NOAA BSB chart no 11006 (KEY WEST TO THE MISSISSIPPI
> RIVER) from:
>
> http://www.nauticalcharts.noaa.gov/mcd/Raster/download_agreement.htm
>
> scroll to the bottom then click [Proceed to NOAA RNC(R) (BSB) Downloads]
> then click [Textual], the rest is pretty obvious.
>
>
> --------------------------------------
>
> (3) After downloading and unzipping to [C:\NOAA BSB\11006], I inspect the
> file [C:\NOAA BSB\11006\11006_1.KAP] with the Windows Wordpad applet, the
> first several lines read as follows:
>
> !
> CRR/
> VER/3.0
> BSB/NA=KEY WEST TO THE MISSISSIPPI RIVER,NU=44,RA=10967,9389,DU=254
> KNP/SC=875000,GD=NAD83,PR=MERCATOR,PP=26.127,PI=60.000,SP=,SK=0.0000000
> TA=90.0000000,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=87.50,DY=87.50
> ...
>
> I'm guessing "GD=NAD83,PR=MERCATOR" means the file contents are to NAD83
> datum in a Mercator projection.
>
> This file also contains 92 ground control points of the form:
>
> REF/1,275,8522,24.1668694444,-90.0831111111
> REF/2,275,300,30.5834527778,-90.0831111111
> REF/3,2427,300,30.5834527778,-88.1999805556
> ...
> REF/92,275,1069,30.0000583333,-90.0831111111
>
> --------------------------------------
>
> (4) I launch the FWTools shell via the [FWTools Shell] shortcut on the
> desktop and within the FWTools shell I key:
>
> gdalinfo -nomd -noct "C:\NOAA BSB\11006\11006_1.kap" > "C:\NOAA
> BSB\11006\11006_1.txt"
>
>
> --------------------------------------
>
> (5) I inspect the resulting file [C:\NOAA BSB\11006\11006_1.txt] which
> shows:
>
> Driver: BSB/Maptech BSB Nautical Charts
> Files: C:\NOAA BSB\11006\11006_1.kap
> Size is 10967, 9389
> Coordinate System is `'
> GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AU
>THORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["deg
>ree",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long
>",EAST],AUTHORITY["EPSG",4326]] GCP[ 0]: Id=GCP_1, Info=
> (275,8522) -> (-90.0831111111,24.1668694444,0)
> GCP[ 1]: Id=GCP_2, Info=
> (275,300) -> (-90.0831111111,30.5834527778,0)
> GCP[ 2]: Id=GCP_3, Info=
> (2427,300) -> (-88.1999805556,30.5834527778,0)
> ...
> GCP[ 91]: Id=GCP_92, Info=
> (275,1069) -> (-90.0831111111,30.0000583333,0)
> Corner Coordinates:
> Upper Left ( 0.0, 0.0)
> Lower Left ( 0.0, 9389.0)
> Upper Right (10967.0, 0.0)
> Lower Right (10967.0, 9389.0)
> Center ( 5483.5, 4694.5)
> Band 1 Block=10967x1 Type=Byte, ColorInterp=Palette
> Color Table (RGB with 12 entries)
>
> <<<<< i.e. somehow gdalinfo has decided that the files contents are to
> WGS84 datum >>>>>
>
> --------------------------------------
>
> (6) I rummaged through the gdal source and found
> [C:\gdal-1.5.3\frmts\bsb\...] which appears to contain the source files for
> the GDAL BSB driver(?).
>
> Of particular interest is the file [C:\gdal-1.5.3\frmts\bsb\bsbdataset.cpp]
> which contains the line:
>
> pszGCPProjection = "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS
> 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",7030]],TOWGS84[0,0,0,0,0,0,0]
>,AUTHORITY[\"EPSG\",6326]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",8901]],
>UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",9108]],AXIS[\"Lat\",NO
>RTH],AXIS[\"Long\",EAST],AUTHORITY[\"EPSG\",4326]]";
>
> which is a dead ringer for the [GSP Projection =...] produced by gdalinfo.
>
> I am not a C programmer but reading
> [C:\gdal-1.5.3\frmts\bsb\bsbdataset.cpp] and
> [C:\gdal-1.5.3\frmts\bsb\bsb_read.c] it looks to me suspiciously like the
> GDAL BSB driver forces the gdalinfo datum to WGS84 regardless of what it
> truly is.
>
> --------------------------------------
>
> (7) I am led to believe that NAD83 is to all intents and purposes WGS84 so
> I guess there is no harm done if all BSB charts were NAD83 or similarly
> "WGS84 compatible".
>
> However if you go to:
>
> http://www.digitalocean.ca/digitaloceane-store/bsbraster.asp
>
> you can obtain BSB charts for areas totally divorced from NOAA (and
> therefor presumably NAD83 and similar).
>
> My concern is that I could be in the situation of trying to use the GDAL
> utilities to convert (say) some New Zealand BSB charts that use a datum
> that is not "WGS84 compatible" but the GDAL utilities force the datum to
> WGS84 without any appropriate transformation.
>
> --------------------------------------
>
> Any and all comments welcomed - I do hope I haven't missed something
> embarrassingly simple in this great monologue...


From even.rouault at mines-paris.org  Tue Dec 30 15:10:08 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 30 15:10:11 2008
Subject: [gdal-dev] RE: Border slivers and JPEG2000 compression
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A754@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4EFF8BB964547748A07CA32961810C041362A754@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <200812302110.08619.even.rouault@mines-paris.org>

Michael,

As Jukka Rahkonen has already suggested, I think that there's no possibility 
of doing what you want, with GDAL or any other tool. It is the nature 
of the lossy compression to return something close to 0, but not 0 (or the 
other way round), when you decompress the data. You can observe the same 
effect with traditionnal JPEG too.

Your current solution is probably the best one. Or use lossless JPEG2000.

Best regards,
Even

Le Tuesday 30 December 2008 20:49:01 Smith, Michael, vous avez ?crit?:
> I never found a good solution to this - one thing I am doing is taking
> the TIFFs and mosaicking them with their neighbors to fill these slivers
> with data from the adjacent tile, so there are no slivers.  That is a
> brute-force and inelegant solution though.
>
> Any suggestions on how to keep border pixels with value 0 in a TIFF to
> stay 0 in a resulting JP2 (with Kakadu) in GDAL?
>
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS
>
> > _____________________________________________
> > From: 	Smith, Michael
> > Sent:	Monday, December 15, 2008 5:04 PM
> > To:	'gdal-dev@lists.osgeo.org'
> > Subject:	Border slivers and JPEG2000 compression
> >
> > I have several orthophotos which are TIFFs, and they align with the
> > USGS quadrangle corners, which means they are rotated slightly,
> > leaving small uneven slivers along the edges where pixel value is 0
> > (the data for these are available from adjacent tiles).  All the
> > pixels inside the 'real' area of the photo are value > 0.
> >
> > This is no problem with TIFFs, as the 0 can be turned off in
> > applications such as ArcGIS or serving them out via MapServer WMS.
> > But when I convert to JPEG2000 (using Kakadu), the edge pixels are
> > interpolated to different values, typically something like 0, 1, 2, or
> > 3.  Thus I can't just filter them out. Also inside the photo,
> > sometimes very dark pixels (which should really be value 2, 3, etc)
> > are converted to value 0.  Thus they show up as 'holes' in
> > applications when pixel value 0 is filtered out.
> >
> > What I want to do is simply show a bunch of JP2 tiles, with the border
> > pixels staying as value 0, and no other pixels having value 0.
> >
> > I have tried a couple approaches, including
> >
> > gdal_translate -a_nodata 0   (the border pixels still have values > 0)
> >
> > gdal_rasterize -i -burn 0    (won't write JP2KAK)
> >
> > Surely I'm not the first to try this, but I can't find the right steps
> > on the web.  Any suggestions would be appreciated.
> >
> > **********
> > Michael Smith
> > State GIS Manager
> > Maine Office of GIS


From warmerdam at pobox.com  Tue Dec 30 15:36:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 30 15:36:40 2008
Subject: [gdal-dev] RE: Border slivers and JPEG2000 compression
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A754@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A6B1@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4EFF8BB964547748A07CA32961810C041362A754@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <495A863E.3070306@pobox.com>

Smith, Michael wrote:
> I never found a good solution to this - one thing I am doing is taking 
> the TIFFs and mosaicking them with their neighbors to fill these slivers 
> with data from the adjacent tile, so there are no slivers.  That is a 
> brute-force and inelegant solution though.
> 
> Any suggestions on how to keep border pixels with value 0 in a TIFF to 
> stay 0 in a resulting JP2 (with Kakadu) in GDAL?

Michael,

I apologize for not having responded before.

One approach to this I have seen in other contexts, is to keep a distinct
alpha layer in a separate file and used to mask the nodata areas.  Then
represent the jpeg2000 RGB image + the nodata/alpha band from another file
as a complete RGBA dataset using a VRT file.

So we have:

RGB JPEG2000 file  (eg. rgb.jp2)
Alpha-Mask File    (eg. mask.tif)
a VRT XML file     (eg. rgba.vrt)

The VRT will refer to the RGB file for the first three bands, and the
mask file for the forth alpha band.  The alpha band can be compressed
using something like Deflate compression which will work very well for
a band that is all values of 0 and 255.

This sort of approach is complicated, and their is some access overhead
but it does allow jpeg2000 lossy compression with unambigious masking
for use in MapServer or other RGBA aware GDAL applications.

The alpha mask file needs to be generated from the original files before
compression.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Dec 30 16:00:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 30 16:00:56 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <495A71D9.2020504@pobox.com>
References: <002c01c96a9e$efaa9240$ceffb6c0$%roberts@duke.edu>
	<495A5776.8070906@pobox.com>
	<003301c96aae$4e0d0660$ea271320$@roberts@duke.edu>
	<495A71D9.2020504@pobox.com>
Message-ID: <495A8BF4.3010709@pobox.com>

Frank Warmerdam wrote:
> I'm going to start by rebuilding the stock binary without xerces, and we
> can think about where to go from there. 

Folks,

I have replaced

   http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

with a new build that does not include xerces-c.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craig.miller at spatialminds.com  Tue Dec 30 16:44:53 2008
From: craig.miller at spatialminds.com (craig.miller@spatialminds.com)
Date: Tue Dec 30 16:45:56 2008
Subject: [gdal-dev] GeoTIFF tag editing
Message-ID: <BAY120-W14D54650B8C03345CDEAF6F9E70@phx.gbl>


Does anyone know of a command line utility that could be used to set TIFF tags w/o affecting any of the other image attributes such as geo tags and image storage method (tiled/compressed tiff)?

I need to set attributes on several hundred thousand images and the only tool I've found for editing the geotiff tags so far has been a GUI tool.

Thanks for the help,
Craig


--
Craig Miller, MS
Owner, Geospatial Software Architect

Spatial Minds, LLC
Geospatial Software Engineering

(206) 962-7754



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081230/84464fec/attachment.html
From woklist at kyngchaos.com  Tue Dec 30 16:48:22 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Dec 30 16:48:30 2008
Subject: [gdal-dev] projection rejected by GDAL?
Message-ID: <AE45DE8B-B8F6-4806-9A26-EEDAFF9544A7@kyngchaos.com>

I have a geotiff in State Plane 83, Michigan Central, *Feet*.  It was  
originally generated from Photoshop, then georeferenced in Arc, years  
ago.

The projection in the geotiff is specified as EPSG:26989 + units:feet.

PROJCS["NAD83 / Michigan Central",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",45.7],
     PARAMETER["standard_parallel_2",44.18333333333333],
     PARAMETER["latitude_of_origin",43.31666666666667],
     PARAMETER["central_meridian",-84.36666666666666],
     PARAMETER["false_easting",19685000],
     PARAMETER["false_northing",0],
     UNIT["US survey foot",0.3048006096012192,
         AUTHORITY["EPSG","9003"]],
     AUTHORITY["EPSG","26989"]]

This image projects fine with gdalwarp.

I had to do some processing on it in Photoshop, which detroys the  
projection data.  So I decided to assign it EPSG:2252 - Michigan is  
one of the few states that has an NAD83/feet EPSG code.  So:

   gdal_translate -a_srs EPSG:2252 myimage.tif georefimage.tif

ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for myimage.tif.
There is no affine transformation and no GCPs.

same with gdalwarp -s_srs EPSG:2252 -t-srs ....

Maybe I'm missing something?  proj and cs2cs handle the EPSG code fine.

Maybe it's a bug?  If I simply convert the original image to the same  
format:

   gdal_translate srcimage.tif newimage.tif

then try to warp that:

   gdalwarp -t_srs EPSG:26917 newimage.tif projimage.tif

same error (for newimage.tif).  gdalinfo reports the same projection  
info (ie EPSG:26989 + units:feet) in newimage.tif as the original,  
minus the comments added by Arc.  So it doesn't seem to be the EPSG: 
2252 code...


This happens in all 1.5.x, and 1.6.0 (I dug up old 1.5.x versions to  
try it).  It worked in 1.5.0 back in Feb.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always  
now and always shall be, there is an eternity of time for the  
accomplishment of objects."

- the wisdom of Tarzan





From jason.roberts at duke.edu  Tue Dec 30 17:05:25 2008
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Dec 30 17:05:37 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <495A8BF4.3010709@pobox.com>
References: <002c01c96a9e$efaa9240$ceffb6c0$%roberts@duke.edu>
	<495A5776.8070906@pobox.com>
	<003301c96aae$4e0d0660$ea271320$%roberts@duke.edu>
	<495A71D9.2020504@pobox.com> <495A8BF4.3010709@pobox.com>
Message-ID: <005801c96aca$b96371d0$2c2a5570$@roberts@duke.edu>

Frank,

Thank you very much for this! I will test it out now.

One thing I immediately noticed is that the new zip is missing the MSVCRT
manifest that you put in to correct the other DLL hell problem I noticed.

Regarding the ticket you opened: would it help you if I attached the xerces
DLLs from ArcGIS and MATLAB? So far, you are operating purely on what I've
said. Having them yourself might allow a better understanding of this mess.
Since those libraries are supposed to be open source, it is probably legal
for me to provide them to you.

Best,
Jason

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, December 30, 2008 4:01 PM
To: Frank Warmerdam
Cc: Jason Roberts; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How can you use GDAL from a process that has already
loaded some other app's xerces-c_2_7.dll?

Frank Warmerdam wrote:
> I'm going to start by rebuilding the stock binary without xerces, and we
> can think about where to go from there. 

Folks,

I have replaced

   http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

with a new build that does not include xerces-c.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From even.rouault at mines-paris.org  Tue Dec 30 17:08:06 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 30 17:08:19 2008
Subject: [gdal-dev] projection rejected by GDAL?
In-Reply-To: <AE45DE8B-B8F6-4806-9A26-EEDAFF9544A7@kyngchaos.com>
References: <AE45DE8B-B8F6-4806-9A26-EEDAFF9544A7@kyngchaos.com>
Message-ID: <200812302308.07232.even.rouault@mines-paris.org>

William,

I'm a bit in your report, but my feeling is that when editing with Photoshop 
you also loose the GeoTransform. 

"gdal_translate -a_srs EPSG:2252 myimage.tif georefimage.tif" should work 
however. I just tried it successfully with gdal-trunk.

You should also add -a_ullr ulx uly lrx lry to the gdal_translate command 
line.

The "ERROR 1: Unable to compute a transformation between pixel/line..." 
message should only come with gdalwarp, not gdal_translate.

Even
From creta.kano at gmail.com  Tue Dec 30 17:21:33 2008
From: creta.kano at gmail.com (sophia parafina)
Date: Tue Dec 30 17:21:36 2008
Subject: [gdal-dev] GeoTIFF tag editing
In-Reply-To: <BAY120-W14D54650B8C03345CDEAF6F9E70@phx.gbl>
References: <BAY120-W14D54650B8C03345CDEAF6F9E70@phx.gbl>
Message-ID: <3fbc61530812301421v3a05afaaieb2b9722cd3a98d9@mail.gmail.com>

use tiffset, which is part of LibTIFF: http://www.remotesensing.org/libtiff/

sophia



On Tue, Dec 30, 2008 at 4:44 PM, <craig.miller@spatialminds.com> wrote:

>  Does anyone know of a command line utility that could be used to set TIFF
> tags w/o affecting any of the other image attributes such as geo tags and
> image storage method (tiled/compressed tiff)?
>
> I need to set attributes on several hundred thousand images and the only
> tool I've found for editing the geotiff tags so far has been a GUI tool.
>
> Thanks for the help,
> Craig
>
>
> --
> Craig Miller, MS
> Owner, Geospatial Software Architect
> Spatial Minds, LLC <http://www.spatialminds.com/>
> Geospatial Software Engineering
> (206) 962-7754
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081230/c00483ea/attachment.html
From woklist at kyngchaos.com  Tue Dec 30 17:27:07 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Dec 30 17:27:09 2008
Subject: [gdal-dev] projection rejected by GDAL?
In-Reply-To: <200812302308.07232.even.rouault@mines-paris.org>
References: <AE45DE8B-B8F6-4806-9A26-EEDAFF9544A7@kyngchaos.com>
	<200812302308.07232.even.rouault@mines-paris.org>
Message-ID: <D9C55D57-2D01-4EFF-9F96-39B494356B24@kyngchaos.com>

On Dec 30, 2008, at 4:08 PM, Even Rouault wrote:

> William,
>
> I'm a bit in your report, but my feeling is that when editing with  
> Photoshop
> you also loose the GeoTransform.
>
> "gdal_translate -a_srs EPSG:2252 myimage.tif georefimage.tif" should  
> work
> however. I just tried it successfully with gdal-trunk.
>
> You should also add -a_ullr ulx uly lrx lry to the gdal_translate  
> command
> line.

Ah, that's probably what I'm missing.  Even better, all I have to do  
is duplicate the existing tfw file from the original image (the client  
likes tfw files) with the Photoshopped file name.  tfw+EPSG = warped  
joy!

> The "ERROR 1: Unable to compute a transformation between pixel/ 
> line..."
> message should only come with gdalwarp, not gdal_translate.
>
Right.  My brain is a bit scrambled right now, with all this.   
gdal_translate doesn't generate the error, gdalwarp does, after I've  
used gdal_translate to assign the srs OR after simply converting the  
original image.

> Even


Thanks for all the timely bug squashing and help today.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From warmerdam at pobox.com  Tue Dec 30 17:38:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 30 17:39:06 2008
Subject: [gdal-dev] How can you use GDAL from a process that has already
	loaded some other app's xerces-c_2_7.dll?
In-Reply-To: <005801c96aca$b96371d0$2c2a5570$@roberts@duke.edu>
References: <002c01c96a9e$efaa9240$ceffb6c0$%roberts@duke.edu>
	<495A5776.8070906@pobox.com>
	<003301c96aae$4e0d0660$ea271320$%roberts@duke.edu>
	<495A71D9.2020504@pobox.com> <495A8BF4.3010709@pobox.com>
	<005801c96aca$b96371d0$2c2a5570$@roberts@duke.edu>
Message-ID: <495AA2FB.4080807@pobox.com>

Jason Roberts wrote:
> Frank,
> 
> Thank you very much for this! I will test it out now.
> 
> One thing I immediately noticed is that the new zip is missing the MSVCRT
> manifest that you put in to correct the other DLL hell problem I noticed.

Jason,

Doh!  /me kicks self.

I have uploaded a fixed version with the manifest.

> Regarding the ticket you opened: would it help you if I attached the xerces
> DLLs from ArcGIS and MATLAB? So far, you are operating purely on what I've
> said. Having them yourself might allow a better understanding of this mess.
> Since those libraries are supposed to be open source, it is probably legal
> for me to provide them to you.

I do not believe that would be helpful.  I'm pretty much convinced that I
was not actually distributing standard DLLs from the package maintainers
so there isn't much to be learned from other builds of the DLL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

