From jr.morreale at enoreth.net  Tue Oct  1 05:06:20 2013
From: jr.morreale at enoreth.net (Jean-Roc Morreale)
Date: Tue, 01 Oct 2013 14:06:20 +0200
Subject: [gdal-dev] unable to make a valid TMS xml file
Message-ID: <de93d62f6ffcaf74c269ab7b1e31be95@enoreth.net>

Hi,

I'm trying to use the TMS minidriver, my xml file is based on the OSM's 
example and the data is an output of gdal2tiles. I've not been able to 
use it with gdal 1.10 :

# gdalinfo "D:\MyFolder\My_File.xml"
ERROR 4 : 'D:\MyFolder\My_File.xml' not recognized as a supported file 
format.
gdalinfo failed - unable to open 'D:\MyFolder\My_File.xml'.

Here is the content of the file :

<GDAL_WMS>
     <Service name="TMS">
         
<ServerUrl>file://d:/MyFolder/tiles/${z}/${x}/${y}.png</ServerUrl>
     </Service>
     <DataWindow>
         <UpperLeftX>156542.969</UpperLeftX>
         <UpperLeftY>6653076.172</UpperLeftY>
         <LowerRightX>469628.906</LowerRightX>
         <LowerRightY>6457397.461</LowerRightY>
         <TileLevel>17</TileLevel>
         <TileCountX>1</TileCountX>
         <TileCountY>1</TileCountY>
         <YOrigin>top</YOrigin>
     </DataWindow>
     <Projection>EPSG:3857</Projection>
     <BlockSizeX>256</BlockSizeX>
     <BlockSizeY>256</BlockSizeY>
     <BandsCount>4</BandsCount>
     <Cache />
</GDAL_WMS>

Could you please tell me where the error ?

Regards,

Jean-Roc

From no-reply at neogeo-online.net  Tue Oct  1 07:21:38 2013
From: no-reply at neogeo-online.net (Guillaume Sueur)
Date: Tue, 01 Oct 2013 16:21:38 +0200
Subject: [gdal-dev] Write dataset to web output
In-Reply-To: <201309260119.20574.even.rouault@mines-paris.org>
References: <5242A340.5080804@neogeo-online.net>
	<201309260119.20574.even.rouault@mines-paris.org>
Message-ID: <524ADA72.4040008@neogeo-online.net>

Hi Even,

Sorry, I'm only noticing your reply now.
My use case is weird as I am using GDAL to reproject a WMS source which 
doesn't offer web mercator (French Cadastral Parcels WMS) and needs some 
computation on the URL (city code, CRS depending on location).
If I understand your solution, I can't directly output my datasource to 
the webserver, I need to write it on disk first ?

All the best

Guillaume

Le 26/09/13 01:19, Even Rouault a ?crit :
> Le mercredi 25 septembre 2013 10:48:00, Guillaume Sueur a ?crit :
>> Hi list,
>>
>> I've build a python gdal script which retrieves WMS images from a remote
>> layer. I'd like to send the image back to the browser, but I can't
>> figure out how to do that...
>> Once I've got a correct gdal dataset, how to read it into the server
>> response ?
>
> Guillaume,
>
> Not sure to completely understand your use case, but why not just using
> OpenLayers to display images from a WMS source ?
>
> If you want to stick with your script, a solution could be to create a PNG file
> from the GDAL dataset ( gdal.GetDriverByName('PNG').CreateCopy('the.png',
> src_ds) ) and then dump it to the standard output of your webserver after
> having written a "ContentType: image/png\n\n" header.
>
> Note : you can do that without having to create a file on the regular
> filesystem, but by CreateCopy'ing() instead to /vsimem/the.png and using
> gdal.VSIFOpenL() / gdal.VSIFReadL() / gdal.VSIFCloseL() to get the content
> into a Python buffer object ( see autotest/gcore/vsifile.py in GDAL source tree
> )
>
> Even
>

From jrepetto at free.fr  Tue Oct  1 09:01:15 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 01 Oct 2013 18:01:15 +0200
Subject: [gdal-dev] Write dataset to web output
In-Reply-To: <524ADA72.4040008@neogeo-online.net>
References: <5242A340.5080804@neogeo-online.net>
	<201309260119.20574.even.rouault@mines-paris.org>
	<524ADA72.4040008@neogeo-online.net>
Message-ID: <524AF1CB.7060206@free.fr>

Le 01/10/2013 16:21, Guillaume Sueur a ?crit :

> My use case is weird as I am using GDAL to reproject a WMS source which
> doesn't offer web mercator (French Cadastral Parcels WMS) and needs some
> computation on the URL (city code, CRS depending on location).
> If I understand your solution, I can't directly output my datasource to
> the webserver, I need to write it on disk first ?

Hello,

May be you should have a look at MapProxy, which is able to reproject 
on-the-fly a WMS service.

Jean-Claude


From even.rouault at mines-paris.org  Tue Oct  1 11:29:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 20:29:14 +0200
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <loom.20131001T082832-999@post.gmane.org>
References: <1380538657804-5080909.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
Message-ID: <201310012029.14852.even.rouault@mines-paris.org>

Le mardi 01 octobre 2013 08:58:22, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > I've just pushed in trunk a change to make SQLITE dialect available to
> > all
> 
> OGR
> 
> > drivers that have a specialized ExecuteSQL() implementation.
> 
> Hi,
> 
> Is this a correct interpretation:
> 
> - The default SQL dialect is "OGR SQL", except for databases when the
> default is to use the native SQL dialect of the RDBMS
> - The default dialect can be overridden by the -dialect parameter, which
> can take values "OGR SQL" or "SQLITE" and after your change this works for
> all drivers in a similar way.

Yes. Just to crrect : the string is OGRSQL (no space)

> 
> If this is right I will have a look at the documentation and see if there
> is something to improve. At least I would make a little addition into
> http://www.gdal.org/ogr2ogr.html
> Now there reads
> 
> -dialect dialect:
>     SQL dialect. In some cases can be used to use (unoptimized) OGR SQL
> instead of the native SQL of an RDBMS by passing OGRSQL. Starting with GDAL
> 1.10, the "SQLITE" dialect can also be used with any datasource.
> 
> It would be good to give the alternatives and a hint about how to give OGR
> SQL so that the space character will not cause trouble as
> 
> -dialect dialect:
>     SQL dialect. Can take values "OGR SQL" or "SQLITE".

Adding quote would be indeed good to avoid the confusion with space/nospace. 
Want to give a crack at it ?

> 
> Should we do something also for the statement "Starting with GDAL 1.10, the
> "SQLITE" dialect can also be used with any datasource" which is totally
> true with databases only after your commit
> http://trac.osgeo.org/gdal/changeset/26506

Not sure how to render the dynamics of before and after r26506. I would 
perhaps just keep it as it is currently to avoid confusion. Using SQLITE 
dialect with a RDBMS driver is kind of unusual use case (which was the thing 
that was finxed with r26506).

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Oct  1 11:49:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 20:49:43 +0200
Subject: [gdal-dev] unable to make a valid TMS xml file
In-Reply-To: <de93d62f6ffcaf74c269ab7b1e31be95@enoreth.net>
References: <de93d62f6ffcaf74c269ab7b1e31be95@enoreth.net>
Message-ID: <201310012049.43597.even.rouault@mines-paris.org>

Le mardi 01 octobre 2013 14:06:20, Jean-Roc Morreale a ?crit :
> Hi,
> 
> I'm trying to use the TMS minidriver, my xml file is based on the OSM's
> example and the data is an output of gdal2tiles. I've not been able to
> use it with gdal 1.10 :
> 
> # gdalinfo "D:\MyFolder\My_File.xml"
> ERROR 4 : 'D:\MyFolder\My_File.xml' not recognized as a supported file
> format.
> gdalinfo failed - unable to open 'D:\MyFolder\My_File.xml'.
> 
> Here is the content of the file :
> 
> <GDAL_WMS>
>      <Service name="TMS">
> 
> <ServerUrl>file://d:/MyFolder/tiles/${z}/${x}/${y}.png</ServerUrl>
>      </Service>
>      <DataWindow>
>          <UpperLeftX>156542.969</UpperLeftX>
>          <UpperLeftY>6653076.172</UpperLeftY>
>          <LowerRightX>469628.906</LowerRightX>
>          <LowerRightY>6457397.461</LowerRightY>
>          <TileLevel>17</TileLevel>
>          <TileCountX>1</TileCountX>
>          <TileCountY>1</TileCountY>
>          <YOrigin>top</YOrigin>
>      </DataWindow>
>      <Projection>EPSG:3857</Projection>
>      <BlockSizeX>256</BlockSizeX>
>      <BlockSizeY>256</BlockSizeY>
>      <BandsCount>4</BandsCount>
>      <Cache />
> </GDAL_WMS>
> 
> Could you please tell me where the error ?

Jean-Roc,

This works for me (at least gdalinfo reports a valid dataset). Make sure that 
<GDAL_WMS> is found at the very beginning of the file. No space, newline or any 
character before.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Oct  1 12:02:12 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 21:02:12 +0200
Subject: [gdal-dev] Buffering geometries
In-Reply-To: <1380575550573-5081031.post@n6.nabble.com>
References: <1380575550573-5081031.post@n6.nabble.com>
Message-ID: <201310012102.12905.even.rouault@mines-paris.org>

Le lundi 30 septembre 2013 23:12:30, federico a ?crit :
> Dear all, i'm trying buffer some geometries with GDAL. I have success with
> poligons and lines but i can't create the buffer when i try to do the same
> procedure with an OGRPoint.
> 
> Here is a screenshot with the buffer http://i.imgur.com/rRQuooc.jpg
> 
> I'm using the Buffer function from OGRGeometry Class in a map with WGS 84
> coordinates reference system.
> 
> Anyone know what could be wrong?

This should work. Make sure your target layer can contain polygons. Your code 
sample isn't sufficient to detect what might go wrong in your case.

Just a few remarks : you are going to suffer from 3 memory leaks in your code 
sample (if it isn't an extract of your real code) :
* Buffer() returns a new geometry object. So use SetGeometryDirectly() so that 
it is owned by pnewfeature
* you should delete pnewfeature after having passed it to CreateFeature()
* you should delete pfeature when it is no longer used

> 
> Code example
> 
>    OGRFeature *pfeature = player->GetNextFeature(); // Apunta al primer
> feature
>    while (pfeature) {
>       OGRFeature* pnewfeature = pfeature->Clone();
> 
> pnewfeature->SetGeometry(pnewfeature->GetGeometryRef()->Buffer(bufferdist))
> ; pdestlayer->CreateFeature(pnewfeature);
>       pfeature = player->GetNextFeature();
>    }
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Buffering-geometries-tp5081031.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Oct  1 12:08:44 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 21:08:44 +0200
Subject: [gdal-dev] Kernel resource leak -- Windows
In-Reply-To: <5248B0D5.4020702@ualg.pt>
References: <5248B0D5.4020702@ualg.pt>
Message-ID: <201310012108.44489.even.rouault@mines-paris.org>

Le lundi 30 septembre 2013 00:59:33, Joaquim Luis a ?crit :
> Hi,
> 
> I can make a ticket with this but before, let me just report it here.
> 
> - Win 64 bits GDAL build
> 
> While playing with an Intel analysis tool to chase GMT memory leaks I
> got two complains respecting GDAL.
> 
> P1: Error: Kernel resource leak
>   P1.55: Kernel resource leak: New
>    c:\programs\gdaltrunk\gdal\port\cpl_multiproc.cpp(626): Error X63:
> Critical section creation site: Function CPLCreateMutex: Module
> C:\progs_cygw\GMTdev\gmt5\trunk\WIN64\bin\gdal_w64.dll
>    Code snippet:
>     624      if( pcs )
>     625      {
> 
>  >626        InitializeCriticalSectionAndSpinCount(pcs, 4000);
> 
>     627        EnterCriticalSection(pcs);
>     628      }
> 
> The MS Help says that this can be solved with a call
> to'FindCloseChangeNotification'

MSDN doesn't mention FindCloseChangeNotification as a valid function to call 
related to the use of InitializeCriticalSectionAndSpinCount.

Is it really a repeated memory leak (something that will be leaked each time 
you call CPLCreateMutex() - with correctly paired CPLDestroyMutex() - and that 
will end up exhausting memory / kernel ressources ) or just a one time memory 
leak (something that a tool like valgrind would report as 'still reachable' at 
the end of the process) due to one of the main "static" GDAL mutex not being 
freed ?

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Tue Oct  1 13:01:51 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 1 Oct 2013 20:01:51 +0000 (UTC)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
References: <1380538657804-5080909.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
Message-ID: <loom.20131001T215213-277@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le mardi 01 octobre 2013 08:58:22, Jukka Rahkonen a ?crit :

> > 
> > - The default SQL dialect is "OGR SQL", except for databases when the
> > default is to use the native SQL dialect of the RDBMS
> > - The default dialect can be overridden by the -dialect parameter, which
> > can take values "OGR SQL" or "SQLITE" and after your change this works for
> > all drivers in a similar way.
> 
> Yes. Just to crrect : the string is OGRSQL (no space)

...Snip...


> > It would be good to give the alternatives and a hint about how to give OGR
> > SQL so that the space character will not cause trouble as
> > 
> > -dialect dialect:
> >     SQL dialect. Can take values "OGR SQL" or "SQLITE".
> 
> Adding quote would be indeed good to avoid the confusion with space/nospace. 
> Want to give a crack at it ?

Not really if the string to use is "OGRSQL" and not "OGR SQL" as I thought.
I noticed that ogr2ogr accepts "OGR SQL" but also -dialect "FOO" with
pleasure. Want to give a crack ? 

Alternatively I can try to improve documentation a bit?

-Jukka-



From federicojurio at suremptec.com.ar  Tue Oct  1 13:05:55 2013
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Tue, 1 Oct 2013 17:05:55 -0300
Subject: [gdal-dev] Buffering geometries
In-Reply-To: <201310012102.12905.even.rouault@mines-paris.org>
References: <1380575550573-5081031.post@n6.nabble.com>
	<201310012102.12905.even.rouault@mines-paris.org>
Message-ID: <CADmC3axAJ=OXmVEXf5K7SzK7Bd943czObMx1VOeJpaivO4s9CQ@mail.gmail.com>

Thank you for your advice Even, it works perfectly!
i have another issue, what is the unit of dfDist from
Buffer<http://www.gdal.org/ogr/classOGRGeometry.html#ab34b27e2c8812a0fc1dccf055b11d1a2>
?


On Tue, Oct 1, 2013 at 4:02 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le lundi 30 septembre 2013 23:12:30, federico a ?crit :
> > Dear all, i'm trying buffer some geometries with GDAL. I have success
> with
> > poligons and lines but i can't create the buffer when i try to do the
> same
> > procedure with an OGRPoint.
> >
> > Here is a screenshot with the buffer http://i.imgur.com/rRQuooc.jpg
> >
> > I'm using the Buffer function from OGRGeometry Class in a map with WGS 84
> > coordinates reference system.
> >
> > Anyone know what could be wrong?
>
> This should work. Make sure your target layer can contain polygons. Your
> code
> sample isn't sufficient to detect what might go wrong in your case.
>
> Just a few remarks : you are going to suffer from 3 memory leaks in your
> code
> sample (if it isn't an extract of your real code) :
> * Buffer() returns a new geometry object. So use SetGeometryDirectly() so
> that
> it is owned by pnewfeature
> * you should delete pnewfeature after having passed it to CreateFeature()
> * you should delete pfeature when it is no longer used
>
> >
> > Code example
> >
> >    OGRFeature *pfeature = player->GetNextFeature(); // Apunta al primer
> > feature
> >    while (pfeature) {
> >       OGRFeature* pnewfeature = pfeature->Clone();
> >
> >
> pnewfeature->SetGeometry(pnewfeature->GetGeometryRef()->Buffer(bufferdist))
> > ; pdestlayer->CreateFeature(pnewfeature);
> >       pfeature = player->GetNextFeature();
> >    }
> >
> >
> >
> > --
> > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/Buffering-geometries-tp5081031.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Federico Jurio
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
federicojurio at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131001/362b9e62/attachment.html>

From even.rouault at mines-paris.org  Tue Oct  1 13:16:01 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 22:16:01 +0200
Subject: [gdal-dev] Buffering geometries
In-Reply-To: <CADmC3axAJ=OXmVEXf5K7SzK7Bd943czObMx1VOeJpaivO4s9CQ@mail.gmail.com>
References: <1380575550573-5081031.post@n6.nabble.com>
	<201310012102.12905.even.rouault@mines-paris.org>
	<CADmC3axAJ=OXmVEXf5K7SzK7Bd943czObMx1VOeJpaivO4s9CQ@mail.gmail.com>
Message-ID: <201310012216.01961.even.rouault@mines-paris.org>

Le mardi 01 octobre 2013 22:05:55, Federico Jurio a ?crit :
> Thank you for your advice Even, it works perfectly!
> i have another issue, what is the unit of dfDist from
> Buffer<http://www.gdal.org/ogr/classOGRGeometry.html#ab34b27e2c8812a0fc1dcc
> f055b11d1a2> ?

The same unit as the coordinates of your geometries : degrees if your 
coordinates are in degrees, meters if they are in meters, etc...

> 
> 
> On Tue, Oct 1, 2013 at 4:02 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Le lundi 30 septembre 2013 23:12:30, federico a ?crit :
> > > Dear all, i'm trying buffer some geometries with GDAL. I have success
> > 
> > with
> > 
> > > poligons and lines but i can't create the buffer when i try to do the
> > 
> > same
> > 
> > > procedure with an OGRPoint.
> > > 
> > > Here is a screenshot with the buffer http://i.imgur.com/rRQuooc.jpg
> > > 
> > > I'm using the Buffer function from OGRGeometry Class in a map with WGS
> > > 84 coordinates reference system.
> > > 
> > > Anyone know what could be wrong?
> > 
> > This should work. Make sure your target layer can contain polygons. Your
> > code
> > sample isn't sufficient to detect what might go wrong in your case.
> > 
> > Just a few remarks : you are going to suffer from 3 memory leaks in your
> > code
> > sample (if it isn't an extract of your real code) :
> > * Buffer() returns a new geometry object. So use SetGeometryDirectly() so
> > that
> > it is owned by pnewfeature
> > * you should delete pnewfeature after having passed it to CreateFeature()
> > * you should delete pfeature when it is no longer used
> > 
> > > Code example
> > > 
> > >    OGRFeature *pfeature = player->GetNextFeature(); // Apunta al primer
> > > 
> > > feature
> > > 
> > >    while (pfeature) {
> > >    
> > >       OGRFeature* pnewfeature = pfeature->Clone();
> > 
> > pnewfeature->SetGeometry(pnewfeature->GetGeometryRef()->Buffer(bufferdist
> > ))
> > 
> > > ; pdestlayer->CreateFeature(pnewfeature);
> > > 
> > >       pfeature = player->GetNextFeature();
> > >    
> > >    }
> > > 
> > > --
> > > View this message in context:
> > > http://osgeo-org.1560.x6.nabble.com/Buffering-geometries-tp5081031.html
> > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From federicojurio at suremptec.com.ar  Tue Oct  1 13:18:52 2013
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Tue, 1 Oct 2013 17:18:52 -0300
Subject: [gdal-dev] Buffering geometries
In-Reply-To: <201310012216.01961.even.rouault@mines-paris.org>
References: <1380575550573-5081031.post@n6.nabble.com>
	<201310012102.12905.even.rouault@mines-paris.org>
	<CADmC3axAJ=OXmVEXf5K7SzK7Bd943czObMx1VOeJpaivO4s9CQ@mail.gmail.com>
	<201310012216.01961.even.rouault@mines-paris.org>
Message-ID: <CADmC3awf8totKfG_NsPik4Ks6hBOCpn1e5AZ6NXqKeUCUkeBEQ@mail.gmail.com>

Thank you again, regards!


On Tue, Oct 1, 2013 at 5:16 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 01 octobre 2013 22:05:55, Federico Jurio a ?crit :
> > Thank you for your advice Even, it works perfectly!
> > i have another issue, what is the unit of dfDist from
> > Buffer<
> http://www.gdal.org/ogr/classOGRGeometry.html#ab34b27e2c8812a0fc1dcc
> > f055b11d1a2> ?
>
> The same unit as the coordinates of your geometries : degrees if your
> coordinates are in degrees, meters if they are in meters, etc...
>
> >
> >
> > On Tue, Oct 1, 2013 at 4:02 PM, Even Rouault
> >
> > <even.rouault at mines-paris.org>wrote:
> > > Le lundi 30 septembre 2013 23:12:30, federico a ?crit :
> > > > Dear all, i'm trying buffer some geometries with GDAL. I have success
> > >
> > > with
> > >
> > > > poligons and lines but i can't create the buffer when i try to do the
> > >
> > > same
> > >
> > > > procedure with an OGRPoint.
> > > >
> > > > Here is a screenshot with the buffer http://i.imgur.com/rRQuooc.jpg
> > > >
> > > > I'm using the Buffer function from OGRGeometry Class in a map with
> WGS
> > > > 84 coordinates reference system.
> > > >
> > > > Anyone know what could be wrong?
> > >
> > > This should work. Make sure your target layer can contain polygons.
> Your
> > > code
> > > sample isn't sufficient to detect what might go wrong in your case.
> > >
> > > Just a few remarks : you are going to suffer from 3 memory leaks in
> your
> > > code
> > > sample (if it isn't an extract of your real code) :
> > > * Buffer() returns a new geometry object. So use SetGeometryDirectly()
> so
> > > that
> > > it is owned by pnewfeature
> > > * you should delete pnewfeature after having passed it to
> CreateFeature()
> > > * you should delete pfeature when it is no longer used
> > >
> > > > Code example
> > > >
> > > >    OGRFeature *pfeature = player->GetNextFeature(); // Apunta al
> primer
> > > >
> > > > feature
> > > >
> > > >    while (pfeature) {
> > > >
> > > >       OGRFeature* pnewfeature = pfeature->Clone();
> > >
> > >
> pnewfeature->SetGeometry(pnewfeature->GetGeometryRef()->Buffer(bufferdist
> > > ))
> > >
> > > > ; pdestlayer->CreateFeature(pnewfeature);
> > > >
> > > >       pfeature = player->GetNextFeature();
> > > >
> > > >    }
> > > >
> > > > --
> > > > View this message in context:
> > > >
> http://osgeo-org.1560.x6.nabble.com/Buffering-geometries-tp5081031.html
> > > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Federico Jurio
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
federicojurio at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131001/99c68c6d/attachment-0001.html>

From even.rouault at mines-paris.org  Tue Oct  1 13:26:15 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Oct 2013 22:26:15 +0200
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <loom.20131001T215213-277@post.gmane.org>
References: <1380538657804-5080909.post@n6.nabble.com>
	<201310012029.14852.even.rouault@mines-paris.org>
	<loom.20131001T215213-277@post.gmane.org>
Message-ID: <201310012226.15913.even.rouault@mines-paris.org>

Le mardi 01 octobre 2013 22:01:51, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Le mardi 01 octobre 2013 08:58:22, Jukka Rahkonen a ?crit :
> > > - The default SQL dialect is "OGR SQL", except for databases when the
> > > default is to use the native SQL dialect of the RDBMS
> > > - The default dialect can be overridden by the -dialect parameter,
> > > which can take values "OGR SQL" or "SQLITE" and after your change this
> > > works for all drivers in a similar way.
> > 
> > Yes. Just to crrect : the string is OGRSQL (no space)
> 
> ...Snip...
> 
> > > It would be good to give the alternatives and a hint about how to give
> > > OGR SQL so that the space character will not cause trouble as
> > > 
> > > -dialect dialect:
> > >     SQL dialect. Can take values "OGR SQL" or "SQLITE".
> > 
> > Adding quote would be indeed good to avoid the confusion with
> > space/nospace. Want to give a crack at it ?
> 
> Not really if the string to use is "OGRSQL" and not "OGR SQL" as I thought.
> I noticed that ogr2ogr accepts "OGR SQL" but also -dialect "FOO" with
> pleasure. Want to give a crack ?

Hum, not sure if that's really worth and it would not be very convenient to do 
the validation.
For drivers such as shapefile this could be detected in the generic 
implementation.
For other drivers with a specialized implementation, the logic is "if it is 
'OGRSQL' or 'SQLITE', use the OGRSQL or SQLITE implementation, otherwise 
whatever the string is, use the specialized implementation". Perhaps some 
people for the PG driver use dialect = PG ?

> 
> Alternatively I can try to improve documentation a bit?

I'm a bit lost at what you want to improve now, but if you feel to do it, 
please do so.

> 
> -Jukka-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Tue Oct  1 13:42:40 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 1 Oct 2013 20:42:40 +0000 (UTC)
Subject: [gdal-dev] Minimum user rights needed for Oracle driver
Message-ID: <loom.20131001T220953-793@post.gmane.org>

Hi,

PostGIS manual page has a useful chapter about what rights GDAL user needs

" You must have permissions on all tables you want to read and
geometry_columns and spatial_ref_sys.
Misleading behavior may follow without an error message if you do not have
permissions to these tables. Permission issues on geometry_columns and/or
spatial_ref_sys tables can be generally confirmed if you can see the tables
by setting the configuration option PG_LIST_ALL_TABLES to YES. (e.g. ogrinfo
--config PG_LIST_ALL_TABLES YES PG:xxxxx) "

Oracle Spatial manual page http://www.gdal.org/ogr/drv_oci.html is missing
this information. I have also a feeling that with Oracle there are more
tables and views and Oracle system stuff involved. Is here anybody who could
tell what rights GDAL user must have for a) read access b) read and write
access? It would be ideal to have a comprehensive list that could be given
for the ever friendly DB admins

GRANT [privileges] ON [object_1] TO [user]
GRANT [privileges] ON [object_2] TO [user]
...


-Jukka Rahkonen-


From Michael.Smith at erdc.dren.mil  Tue Oct  1 13:58:14 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 1 Oct 2013 20:58:14 +0000
Subject: [gdal-dev] [EXTERNAL] Minimum user rights needed for Oracle
 driver
In-Reply-To: <loom.20131001T220953-793@post.gmane.org>
Message-ID: <CE70AE47.90FE4%michael.smith@erdc.dren.mil>

Jukka,

Basically, you need read access to the schema.table in question. The
spatial views are automatically available if a user has read access to the
table. So the minimum access is

GRANT SELECT on SCHEMA.TABLENAME to USERNAME;


ALL_SDO_GEOM_METADATA is a view that contains metadata information for all
spatial tables on which the user has SELECT permission. It is this view
that OGR uses to access Oracle Spatial data.


Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center




On 10/1/13 4:42 PM, "Jukka Rahkonen" <jukka.rahkonen at mmmtike.fi> wrote:

>Hi,
>
>PostGIS manual page has a useful chapter about what rights GDAL user needs
>
>" You must have permissions on all tables you want to read and
>geometry_columns and spatial_ref_sys.
>Misleading behavior may follow without an error message if you do not have
>permissions to these tables. Permission issues on geometry_columns and/or
>spatial_ref_sys tables can be generally confirmed if you can see the
>tables
>by setting the configuration option PG_LIST_ALL_TABLES to YES. (e.g.
>ogrinfo
>--config PG_LIST_ALL_TABLES YES PG:xxxxx) "
>
>Oracle Spatial manual page http://www.gdal.org/ogr/drv_oci.html is missing
>this information. I have also a feeling that with Oracle there are more
>tables and views and Oracle system stuff involved. Is here anybody who
>could
>tell what rights GDAL user must have for a) read access b) read and write
>access? It would be ideal to have a comprehensive list that could be given
>for the ever friendly DB admins
>
>GRANT [privileges] ON [object_1] TO [user]
>GRANT [privileges] ON [object_2] TO [user]
>...
>
>
>-Jukka Rahkonen-
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Michael.Smith at erdc.dren.mil  Tue Oct  1 14:05:06 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 1 Oct 2013 21:05:06 +0000
Subject: [gdal-dev] [EXTERNAL] Minimum user rights needed for Oracle
 driver
In-Reply-To: <CE70AE47.90FE4%michael.smith@erdc.dren.mil>
Message-ID: <CE70B03D.90FF3%michael.smith@erdc.dren.mil>

For write access, one needs INSERT and/or UPDATE on an existing table. For
a new table, a user needs CREATE TABLE and CREATE SEQUENCE access to a
Schema and some tablespace allocation for the schema, ALTER USER USERNAME
QUOTA <SIZE> on TABLESPACE Y,   or GRANT UNLIMITED TABLESPACE to USERNAME.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 10/1/13 4:58 PM, "Smith, Michael ERDC-RDE-CRREL-NH"
<Michael.Smith at erdc.dren.mil> wrote:

>Jukka,
>
>Basically, you need read access to the schema.table in question. The
>spatial views are automatically available if a user has read access to the
>table. So the minimum access is
>
>GRANT SELECT on SCHEMA.TABLENAME to USERNAME;
>
>
>ALL_SDO_GEOM_METADATA is a view that contains metadata information for all
>spatial tables on which the user has SELECT permission. It is this view
>that OGR uses to access Oracle Spatial data.
>
>
>Mike
>
>-- 
>Michael Smith
>
>US Army Corps
>Remote Sensing GIS/Center
>
>
>
>
>On 10/1/13 4:42 PM, "Jukka Rahkonen" <jukka.rahkonen at mmmtike.fi> wrote:
>
>>Hi,
>>
>>PostGIS manual page has a useful chapter about what rights GDAL user
>>needs
>>
>>" You must have permissions on all tables you want to read and
>>geometry_columns and spatial_ref_sys.
>>Misleading behavior may follow without an error message if you do not
>>have
>>permissions to these tables. Permission issues on geometry_columns and/or
>>spatial_ref_sys tables can be generally confirmed if you can see the
>>tables
>>by setting the configuration option PG_LIST_ALL_TABLES to YES. (e.g.
>>ogrinfo
>>--config PG_LIST_ALL_TABLES YES PG:xxxxx) "
>>
>>Oracle Spatial manual page http://www.gdal.org/ogr/drv_oci.html is
>>missing
>>this information. I have also a feeling that with Oracle there are more
>>tables and views and Oracle system stuff involved. Is here anybody who
>>could
>>tell what rights GDAL user must have for a) read access b) read and write
>>access? It would be ideal to have a comprehensive list that could be
>>given
>>for the ever friendly DB admins
>>
>>GRANT [privileges] ON [object_1] TO [user]
>>GRANT [privileges] ON [object_2] TO [user]
>>...
>>
>>
>>-Jukka Rahkonen-
>>
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev at lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at mmmtike.fi  Tue Oct  1 14:28:11 2013
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue, 1 Oct 2013 21:28:11 +0000
Subject: [gdal-dev] [EXTERNAL] Minimum user rights needed for Oracle
 driver
In-Reply-To: <CE70B03D.90FF3%michael.smith@erdc.dren.mil>
References: <CE70AE47.90FE4%michael.smith@erdc.dren.mil>,
	<CE70B03D.90FF3%michael.smith@erdc.dren.mil>
Message-ID: <84446DEF76453C439E9E97E438E13A63022FB2DC@suutari.haapa.mmm.fi>

Hi,

What about if GDAL and Oracle can't find common understandment about SRID? I have seen that GDAL tries then  to insert something into MDSYS.CS_SRS and with our user rights that fails always. I have not studied that further because that comes always from my error and adding -lco SRID helps which is lucky because our db admins tend to be jealous about the MDSYS area.

Nothing to worry about USER/ALL_SDO_INDEX_METADATA, is it handled automatically together with read/write rights to tables and views?

-Jukka-
________________________________________
Smith, Michael wrote:

> For write access, one needs INSERT and/or UPDATE on an existing table. For
> a new table, a user needs CREATE TABLE and CREATE SEQUENCE access to a
> Schema and some tablespace allocation for the schema, ALTER USER USERNAME
> QUOTA <SIZE> on TABLESPACE Y,   or GRANT UNLIMITED TABLESPACE to USERNAME.

Mike

--
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 10/1/13 4:58 PM, "Smith, Michael ERDC-RDE-CRREL-NH"
<Michael.Smith at erdc.dren.mil> wrote:

>Jukka,
>
>Basically, you need read access to the schema.table in question. The
>spatial views are automatically available if a user has read access to the
>table. So the minimum access is
>
>GRANT SELECT on SCHEMA.TABLENAME to USERNAME;
>
>
>ALL_SDO_GEOM_METADATA is a view that contains metadata information for all
>spatial tables on which the user has SELECT permission. It is this view
>that OGR uses to access Oracle Spatial data.
>
>
>Mike
>
>--
>Michael Smith
>
>US Army Corps
>Remote Sensing GIS/Center
>
>
>
>
>On 10/1/13 4:42 PM, "Jukka Rahkonen" <jukka.rahkonen at mmmtike.fi> wrote:
>
>>Hi,
>>
>>PostGIS manual page has a useful chapter about what rights GDAL user
>>needs
>>
>>" You must have permissions on all tables you want to read and
>>geometry_columns and spatial_ref_sys.
>>Misleading behavior may follow without an error message if you do not
>>have
>>permissions to these tables. Permission issues on geometry_columns and/or
>>spatial_ref_sys tables can be generally confirmed if you can see the
>>tables
>>by setting the configuration option PG_LIST_ALL_TABLES to YES. (e.g.
>>ogrinfo
>>--config PG_LIST_ALL_TABLES YES PG:xxxxx) "
>>
>>Oracle Spatial manual page http://www.gdal.org/ogr/drv_oci.html is
>>missing
>>this information. I have also a feeling that with Oracle there are more
>>tables and views and Oracle system stuff involved. Is here anybody who
>>could
>>tell what rights GDAL user must have for a) read access b) read and write
>>access? It would be ideal to have a comprehensive list that could be
>>given
>>for the ever friendly DB admins
>>
>>GRANT [privileges] ON [object_1] TO [user]
>>GRANT [privileges] ON [object_2] TO [user]
>>...
>>
>>
>>-Jukka Rahkonen-
>>
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev at lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Michael.Smith at erdc.dren.mil  Tue Oct  1 14:49:00 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 1 Oct 2013 21:49:00 +0000
Subject: [gdal-dev] [EXTERNAL] Minimum user rights needed for Oracle
 driver
In-Reply-To: <84446DEF76453C439E9E97E438E13A63022FB2DC@suutari.haapa.mmm.fi>
Message-ID: <CE70BAC0.91002%michael.smith@erdc.dren.mil>

The MDSYS.CR_SRS table has been deprecated. Its now a view and there are
whole set of tables that are used for handling new spatial reference
systems. User defined SRIDs should all be above 1000000 now. Specific info
is at 
http://docs.oracle.com/cd/E16655_01/appdev.121/e17896/sdo_cs_concepts.htm#i
894537

Frankly, I think GDAL/OGR should never add an SRID to Oracle. There is a
lot more to add than just the WKT specifications.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 10/1/13 5:28 PM, "Rahkonen Jukka" <jukka.rahkonen at mmmtike.fi> wrote:

>Hi,
>
>What about if GDAL and Oracle can't find common understandment about
>SRID? I have seen that GDAL tries then  to insert something into
>MDSYS.CS_SRS and with our user rights that fails always. I have not
>studied that further because that comes always from my error and adding
>-lco SRID helps which is lucky because our db admins tend to be jealous
>about the MDSYS area.
>
>Nothing to worry about USER/ALL_SDO_INDEX_METADATA, is it handled
>automatically together with read/write rights to tables and views?
>
>-Jukka-
>________________________________________
>Smith, Michael wrote:
>
>> For write access, one needs INSERT and/or UPDATE on an existing table.
>>For
>> a new table, a user needs CREATE TABLE and CREATE SEQUENCE access to a
>> Schema and some tablespace allocation for the schema, ALTER USER
>>USERNAME
>> QUOTA <SIZE> on TABLESPACE Y,   or GRANT UNLIMITED TABLESPACE to
>>USERNAME.
>
>Mike
>
>--
>Michael Smith
>
>US Army Corps
>Remote Sensing GIS/Center
>
>
>
>On 10/1/13 4:58 PM, "Smith, Michael ERDC-RDE-CRREL-NH"
><Michael.Smith at erdc.dren.mil> wrote:
>
>>Jukka,
>>
>>Basically, you need read access to the schema.table in question. The
>>spatial views are automatically available if a user has read access to
>>the
>>table. So the minimum access is
>>
>>GRANT SELECT on SCHEMA.TABLENAME to USERNAME;
>>
>>
>>ALL_SDO_GEOM_METADATA is a view that contains metadata information for
>>all
>>spatial tables on which the user has SELECT permission. It is this view
>>that OGR uses to access Oracle Spatial data.
>>
>>
>>Mike
>>
>>--
>>Michael Smith
>>
>>US Army Corps
>>Remote Sensing GIS/Center
>>
>>
>>
>>
>>On 10/1/13 4:42 PM, "Jukka Rahkonen" <jukka.rahkonen at mmmtike.fi> wrote:
>>
>>>Hi,
>>>
>>>PostGIS manual page has a useful chapter about what rights GDAL user
>>>needs
>>>
>>>" You must have permissions on all tables you want to read and
>>>geometry_columns and spatial_ref_sys.
>>>Misleading behavior may follow without an error message if you do not
>>>have
>>>permissions to these tables. Permission issues on geometry_columns
>>>and/or
>>>spatial_ref_sys tables can be generally confirmed if you can see the
>>>tables
>>>by setting the configuration option PG_LIST_ALL_TABLES to YES. (e.g.
>>>ogrinfo
>>>--config PG_LIST_ALL_TABLES YES PG:xxxxx) "
>>>
>>>Oracle Spatial manual page http://www.gdal.org/ogr/drv_oci.html is
>>>missing
>>>this information. I have also a feeling that with Oracle there are more
>>>tables and views and Oracle system stuff involved. Is here anybody who
>>>could
>>>tell what rights GDAL user must have for a) read access b) read and
>>>write
>>>access? It would be ideal to have a comprehensive list that could be
>>>given
>>>for the ever friendly DB admins
>>>
>>>GRANT [privileges] ON [object_1] TO [user]
>>>GRANT [privileges] ON [object_2] TO [user]
>>>...
>>>
>>>
>>>-Jukka Rahkonen-
>>>
>>>_______________________________________________
>>>gdal-dev mailing list
>>>gdal-dev at lists.osgeo.org
>>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev at lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Oct  1 22:46:36 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 1 Oct 2013 22:46:36 -0700
Subject: [gdal-dev] EPSG 8.2 Upgrade
Message-ID: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>

Folks,

I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
the EPSG 8.2 database definitions.   I have come to the
conclusion that the EPSG Postgresql .sql files are distributed
in WIN1252 encoding, not LATIN1, and so some special
characters - mostly in comments - should be translated better.

Let me know if you see problems or have questions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From aborruso at gmail.com  Wed Oct  2 01:13:23 2013
From: aborruso at gmail.com (aborruso)
Date: Wed, 2 Oct 2013 01:13:23 -0700 (PDT)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <201310012029.14852.even.rouault@mines-paris.org>
References: <1380538657804-5080909.post@n6.nabble.com>
	<1380539403838-5080911.post@n6.nabble.com>
	<loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
Message-ID: <1380701603286-5081365.post@n6.nabble.com>

Hi,
firts of all thank you for your work. It is always very nice to see how a
great open source community works.


Even Rouault wrote
> Using SQLITE dialect with a RDBMS driver is kind of unusual use case
> (which was the thing that was finxed with r26506).

I want to add a detail, but I do not know whether it is useful. I have
discovered this over-override 
trick, because I needed to use real spatial SQL functions, not the limited
MBR functions of MySQL spatial.
With this trick I have solved.

Best regards,

Andrea



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/sqlite-dialect-and-MySQL-spatial-input-tp5080909p5081365.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Oct  2 01:22:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Oct 2013 10:22:40 +0200
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <1380701603286-5081365.post@n6.nabble.com>
References: <1380538657804-5080909.post@n6.nabble.com>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
Message-ID: <201310021022.41287.even.rouault@mines-paris.org>

Le mercredi 02 octobre 2013 10:13:23, aborruso a ?crit :
> Hi,
> firts of all thank you for your work. It is always very nice to see how a
> great open source community works.
> 
> 
> Even Rouault wrote
> 
> > Using SQLITE dialect with a RDBMS driver is kind of unusual use case
> > (which was the thing that was finxed with r26506).
> 
> I want to add a detail, but I do not know whether it is useful. I have
> discovered this over-override
> trick, because I needed to use real spatial SQL functions, not the limited
> MBR functions of MySQL spatial.

Wouldn't Area() as described in 
http://dev.mysql.com/doc/refman/5.0/en/geometry-property-
functions.html#function_area do the job ?

$ ogrinfo mysql:autotest -sql "SELECT Area(GeomFromText('Polygon((0 0,0 3,3 
0,0 0),(1 1,1 2,2 1,1 1))'))"
INFO: Open of `mysql:autotest'
      using driver `MySQL' successful.

Layer name: sql_statement
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
Area(GeomFromText('Polygon((0 0,0 3,3 0,0 0),(1 1,1 2,2 1,1 1))')): Real 
(23.0)
OGRFeature(sql_statement):0
  Area(GeomFromText('Polygon((0 0,0 3,3 0,0 0),(1 1,1 2,2 1,1 1))')) (Real) = 
4


> With this trick I have solved.
> 
> Best regards,
> 
> Andrea
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/sqlite-dialect-and-MySQL-spatial-input
> -tp5080909p5081365.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aborruso at gmail.com  Wed Oct  2 01:30:26 2013
From: aborruso at gmail.com (aborruso)
Date: Wed, 2 Oct 2013 01:30:26 -0700 (PDT)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <201310021022.41287.even.rouault@mines-paris.org>
References: <1380538657804-5080909.post@n6.nabble.com>
	<1380539403838-5080911.post@n6.nabble.com>
	<loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
Message-ID: <1380702626890-5081369.post@n6.nabble.com>

Hi Even,


Even Rouault wrote
> Wouldn't Area() as described in 
> http://dev.mysql.com/doc/refman/5.0/en/geometry-property-
> functions.html#function_area do the job ?

you are right, but I have used Area() in my post to make a simple example.

I'm talking about functions like "Contains". In MySQL documentation you
read:
"Currently, MySQL does not implement these functions according to the
specification. Those that are implemented return the same result as the
corresponding MBR-based functions."

Then I have used something like "ogrinfo test.vrt -dialect sqlite -sql
?SELECT *FROM polygons as g1, points as g2 WHERE
Contains(g1.geometry,g2.geometry) = 1"

Thank you



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/sqlite-dialect-and-MySQL-spatial-input-tp5080909p5081369.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Wed Oct  2 07:49:05 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 02 Oct 2013 16:49:05 +0200
Subject: [gdal-dev] EPSG 8.2 Upgrade
In-Reply-To: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
References: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
Message-ID: <l2hbqe$vfh$1@ger.gmane.org>

Am 02.10.2013 07:46, schrieb Frank Warmerdam:
> Folks,
>
> I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
> the EPSG 8.2 database definitions.
>
> Let me know if you see problems or have questions.

Not to you, but from:
http://info.ogp.org.uk/geodesy/CurrentDB.html

> EPSG Geodetic Parameter Dataset
> Version 8.2 - 29 November 2013

I assume EPSG is ahead of the time ;-)

SCNR,
Andr? Joost





From jluis at ualg.pt  Wed Oct  2 09:06:09 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 02 Oct 2013 17:06:09 +0100
Subject: [gdal-dev] Kernel resource leak -- Windows
In-Reply-To: <201310012108.44489.even.rouault@mines-paris.org>
References: <5248B0D5.4020702@ualg.pt>
	<201310012108.44489.even.rouault@mines-paris.org>
Message-ID: <524C4471.7020104@ualg.pt>

On 01-10-2013 20:08, Even Rouault wrote:
> Le lundi 30 septembre 2013 00:59:33, Joaquim Luis a ?crit :
>> Hi,
>>
>> I can make a ticket with this but before, let me just report it here.
>>
>> - Win 64 bits GDAL build
>>
>> While playing with an Intel analysis tool to chase GMT memory leaks I
>> got two complains respecting GDAL.
>>
>> P1: Error: Kernel resource leak
>>    P1.55: Kernel resource leak: New
>>     c:\programs\gdaltrunk\gdal\port\cpl_multiproc.cpp(626): Error X63:
>> Critical section creation site: Function CPLCreateMutex: Module
>> C:\progs_cygw\GMTdev\gmt5\trunk\WIN64\bin\gdal_w64.dll
>>     Code snippet:
>>      624      if( pcs )
>>      625      {
>>
>>   >626        InitializeCriticalSectionAndSpinCount(pcs, 4000);
>>
>>      627        EnterCriticalSection(pcs);
>>      628      }
>>
>> The MS Help says that this can be solved with a call
>> to'FindCloseChangeNotification'
> MSDN doesn't mention FindCloseChangeNotification as a valid function to call
> related to the use of InitializeCriticalSectionAndSpinCount.
>
> Is it really a repeated memory leak (something that will be leaked each time
> you call CPLCreateMutex() - with correctly paired CPLDestroyMutex() - and that
> will end up exhausting memory / kernel ressources ) or just a one time memory
> leak (something that a tool like valgrind would report as 'still reachable' at
> the end of the process) due to one of the main "static" GDAL mutex not being
> freed ?
>

I don't think it is a memory leak but it's the first time I see this. 
The description I get from something called "Microsoft Help Viewer 1.1 
'' Catalog VS_100_EN-US" is:

"Kernel Resource Leak
Occurs when a kernel object handle is created but never closed"

and it has a table with possible solutions to solve the leak. First 
column says "Create Function" and second "Close function"

InitializeCriticalSection, InitializeCriticalSectionAndSpinCount

	

DeleteCriticalSection


Sorry if I can't be more useful but as i said this is completely new to me.

Joaquim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131002/03d5c929/attachment.html>

From even.rouault at mines-paris.org  Wed Oct  2 11:36:34 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Oct 2013 20:36:34 +0200
Subject: [gdal-dev] Motion: Add Jukka Rahkonen to GDAL PSC
In-Reply-To: <201309281042.55492.even.rouault@mines-paris.org>
References: <201309281042.55492.even.rouault@mines-paris.org>
Message-ID: <201310022036.35118.even.rouault@mines-paris.org>

> 
> Motion: To add Jukka Rahkonen to the GDAL PSC.
> 

Hi,

I declare this motion passed with support of myself, Howard, Tamas, Frank and 
Daniel. Welcome to the PSC Jukka !

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From danieltesta at suremptec.com.ar  Wed Oct  2 14:29:05 2013
From: danieltesta at suremptec.com.ar (Daniel Testa)
Date: Wed, 2 Oct 2013 18:29:05 -0300
Subject: [gdal-dev]  can't fetch the projection definition string on Linux
Message-ID: <CAHy2iFfs1QqEYMyApkU=Q2ndG2EPqEpa962=QaUdQS4J+BMdgA@mail.gmail.com>

Hello everyone, I?m experiencing a weird behavior when reading a raster
image (GTiff/GeoTIFF)

I'm using GDAL 1.9.1 for Linux (Ubuntu 12.04 LTS) and Windows (Win 7
Ultimate SP1) to open a raster image with EPSG:22194

Sample output from gdalinfo for that image on Windows (WKT):
[...]
PROJCS["Campo Inchauspe / Argentina 4",
    GEOGCS["Campo Inchauspe",
        DATUM["Campo_Inchauspe",
            SPHEROID["International 1924",6378388,297.000000000005,
                AUTHORITY["EPSG","7022"]],
            AUTHORITY["EPSG","6221"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4221"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",-90],
    PARAMETER["central_meridian",-63],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",4500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","22194"]]
[...]

Now the output from gdalinfo for the same image on Linux (WKT):
[...]
LOCAL_CS["Campo Inchauspe / Argentina 4",
    GEOGCS["Campo Inchauspe",
        DATUM["unknown",
            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
        AUTHORITY["EPSG","22194"],
    UNIT["metre",1]]
[...]

Any idea of why this might be happening? it also happens with EPSG:22184

Any idea, suggestion or comment is very welcome :)

Thanks in advance.

Regards,
Daniel.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131002/d64218ba/attachment.html>

From warmerdam at pobox.com  Wed Oct  2 18:15:42 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 2 Oct 2013 18:15:42 -0700
Subject: [gdal-dev] can't fetch the projection definition string on Linux
In-Reply-To: <CAHy2iFfs1QqEYMyApkU=Q2ndG2EPqEpa962=QaUdQS4J+BMdgA@mail.gmail.com>
References: <CAHy2iFfs1QqEYMyApkU=Q2ndG2EPqEpa962=QaUdQS4J+BMdgA@mail.gmail.com>
Message-ID: <CA+YzLBfnFZPwqz1Fwb2JjKJhiPk3_TRPjgLQKYPsp9_+aQ=-XA@mail.gmail.com>

Daniel,

This is likely due to problems looking up the coordinate system.  If
you built and installed GDAL yourself it will likely be looking in
/usr/local/share/gdal/data for the file pcs.csv.  If you installed it
via apt-get then it should be looking in /usr/share/gdal/data (or
perhaps /usr/share/gdal/data/1.10) for the file.

So, step one is to confirm that the pcs.csv file exists in one of
those locations.  If GDAL is looking in the wrong place for the file,
setting the GDAL_DATA environment variable may help.

ie.
export GDAL_DATA=/usr/local/share/gdal/data
gdalinfo abc.tif

It is also possible that the GDAL GeoTIFF driver actually needs the
libgeotiff support csv files which would normally live somewhere like
/usr/share/epsg_csv and key files would have names like
coordinate_reference_system.csv.

Best regards,
Frank


On Wed, Oct 2, 2013 at 2:29 PM, Daniel Testa
<danieltesta at suremptec.com.ar> wrote:
> Hello everyone, I?m experiencing a weird behavior when reading a raster
> image (GTiff/GeoTIFF)
>
> I'm using GDAL 1.9.1 for Linux (Ubuntu 12.04 LTS) and Windows (Win 7
> Ultimate SP1) to open a raster image with EPSG:22194
>
> Sample output from gdalinfo for that image on Windows (WKT):
> [...]
> PROJCS["Campo Inchauspe / Argentina 4",
>     GEOGCS["Campo Inchauspe",
>         DATUM["Campo_Inchauspe",
>             SPHEROID["International 1924",6378388,297.000000000005,
>                 AUTHORITY["EPSG","7022"]],
>             AUTHORITY["EPSG","6221"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4221"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",-90],
>     PARAMETER["central_meridian",-63],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",4500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","22194"]]
> [...]
>
> Now the output from gdalinfo for the same image on Linux (WKT):
> [...]
> LOCAL_CS["Campo Inchauspe / Argentina 4",
>     GEOGCS["Campo Inchauspe",
>         DATUM["unknown",
>             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>         AUTHORITY["EPSG","22194"],
>     UNIT["metre",1]]
> [...]
>
> Any idea of why this might be happening? it also happens with EPSG:22184
>
> Any idea, suggestion or comment is very welcome :)
>
> Thanks in advance.
>
> Regards,
> Daniel.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From aborruso at gmail.com  Wed Oct  2 23:45:37 2013
From: aborruso at gmail.com (aborruso)
Date: Wed, 2 Oct 2013 23:45:37 -0700 (PDT)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <1380702626890-5081369.post@n6.nabble.com>
References: <1380538657804-5080909.post@n6.nabble.com>
	<1380539403838-5080911.post@n6.nabble.com>
	<loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
	<1380702626890-5081369.post@n6.nabble.com>
Message-ID: <1380782737025-5081548.post@n6.nabble.com>

Hi Even, Jukka, GDAL developers,
I have written a blog post (in Italian), about this MySQL/GDAL/Sqlite
experience: http://goo.gl/YvRqo2

It is another way to say thank you.

Best regards,

a



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/sqlite-dialect-and-MySQL-spatial-input-tp5080909p5081548.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Thu Oct  3 00:23:59 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 3 Oct 2013 07:23:59 +0000 (UTC)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
References: <1380538657804-5080909.post@n6.nabble.com>
	<1380539403838-5080911.post@n6.nabble.com>
	<loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
	<1380702626890-5081369.post@n6.nabble.com>
	<1380782737025-5081548.post@n6.nabble.com>
Message-ID: <loom.20131003T091612-47@post.gmane.org>

aborruso <aborruso <at> gmail.com> writes:

> 
> Hi Even, Jukka, GDAL developers,
> I have written a blog post (in Italian), about this MySQL/GDAL/Sqlite
> experience: http://goo.gl/YvRqo2
> 
> It is another way to say thank you.

Ciao, 

It could be good to mention that since GDAL version r26506 in trunk and with
the future GDAL releases beginning from 1.11 (or 2.0) users do not need to
do this in a tricky way with VRT but it is enough to just use -dialect
SQLITE. People will find your blog with search engines also in the future.

-Jukka Rahkonen-



From aborruso at gmail.com  Thu Oct  3 02:55:09 2013
From: aborruso at gmail.com (aborruso)
Date: Thu, 3 Oct 2013 02:55:09 -0700 (PDT)
Subject: [gdal-dev] sqlite dialect and MySQL spatial input
In-Reply-To: <loom.20131003T091612-47@post.gmane.org>
References: <loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
	<1380702626890-5081369.post@n6.nabble.com>
	<1380782737025-5081548.post@n6.nabble.com>
	<loom.20131003T091612-47@post.gmane.org>
Message-ID: <1380794109639-5081575.post@n6.nabble.com>

Ciao Jukka,


Rahkonen Jukka wrote
> It could be good to mention that since GDAL version r26506 in trunk and
> with
> the future GDAL releases beginning from 1.11 (or 2.0) users do not need to
> do this in a tricky way with VRT but it is enough to just use -dialect
> SQLITE. People will find your blog with search engines also in the future.

you are right. I made it.

Thank you again




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/sqlite-dialect-and-MySQL-spatial-input-tp5080909p5081575.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bontepaarden at gmail.com  Thu Oct  3 03:53:28 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 3 Oct 2013 12:53:28 +0200
Subject: [gdal-dev] EPSG 8.2 Upgrade
In-Reply-To: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
References: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
Message-ID: <CAHNf2YSGkS6iUKg6-b_Wtgtq+kz7U6jX9Oor13k7-6oEwFigDQ@mail.gmail.com>

I'm not sure if this is the correct place to report this. If not please let
me know.

I'm having trouble compiling the trunk version of PROJ.4 with the updated
EPSG 8.2 database definitions.
I'm running Win7 and use VS2008.
I'm getting these errors and warnings:
Warning  1    Command line warning D9002 : ignoring unknown option '/Op'
cl
Warning  2    warning C4129: 'P' : unrecognized character escape
sequence    pj_open_lib.c
Warning  3    warning C4129: 'S' : unrecognized character escape
sequence    pj_open_lib.c
Error    4    error C2143: syntax error : missing ';' before 'type'
PJ_healpix.c
Error    5    error C2143: syntax error : missing ';' before 'type'
PJ_healpix.c
Error    6    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
Error    7    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
Error    8    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
Error    9    error C2065: 'tau' : undeclared identifier    PJ_healpix.c

When I use the zipped source code for v4.8.0 I don't have these problems.

Can anybody assist?

Thanks,

Paul


2013/10/2 Frank Warmerdam <warmerdam at pobox.com>

> Folks,
>
> I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
> the EPSG 8.2 database definitions.   I have come to the
> conclusion that the EPSG Postgresql .sql files are distributed
> in WIN1252 encoding, not LATIN1, and so some special
> characters - mostly in comments - should be translated better.
>
> Let me know if you see problems or have questions.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131003/2ac7186f/attachment.html>

From even.rouault at mines-paris.org  Thu Oct  3 04:03:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 03 Oct 2013 13:03:00 +0200
Subject: [gdal-dev] EPSG 8.2 Upgrade
In-Reply-To: <CAHNf2YSGkS6iUKg6-b_Wtgtq+kz7U6jX9Oor13k7-6oEwFigDQ@mail.gmail.com>
References: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
	<CAHNf2YSGkS6iUKg6-b_Wtgtq+kz7U6jX9Oor13k7-6oEwFigDQ@mail.gmail.com>
Message-ID: <1380798180.524d4ee4a2acb@imp.free.fr>

Selon Paul Meems <bontepaarden at gmail.com>:

> I'm not sure if this is the correct place to report this. If not please let
> me know.
>
> I'm having trouble compiling the trunk version of PROJ.4 with the updated
> EPSG 8.2 database definitions.
> I'm running Win7 and use VS2008.
> I'm getting these errors and warnings:
> Warning  1    Command line warning D9002 : ignoring unknown option '/Op'
> cl
> Warning  2    warning C4129: 'P' : unrecognized character escape
> sequence    pj_open_lib.c
> Warning  3    warning C4129: 'S' : unrecognized character escape
> sequence    pj_open_lib.c
> Error    4    error C2143: syntax error : missing ';' before 'type'
> PJ_healpix.c
> Error    5    error C2143: syntax error : missing ';' before 'type'
> PJ_healpix.c
> Error    6    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
> Error    7    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
> Error    8    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
> Error    9    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
>
> When I use the zipped source code for v4.8.0 I don't have these problems.
>
> Can anybody assist?

There's a patch pending in Trac for the MSVC compilation issues :
http://trac.osgeo.org/proj/ticket/223

>
> Thanks,
>
> Paul
>
>
> 2013/10/2 Frank Warmerdam <warmerdam at pobox.com>
>
> > Folks,
> >
> > I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
> > the EPSG 8.2 database definitions.   I have come to the
> > conclusion that the EPSG Postgresql .sql files are distributed
> > in WIN1252 encoding, not LATIN1, and so some special
> > characters - mostly in comments - should be translated better.
> >
> > Let me know if you see problems or have questions.
> >
> > Best regards,
> > --
> >
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam at pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Software Developer
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>







From jaak at nutiteq.com  Thu Oct  3 07:11:23 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Thu, 3 Oct 2013 17:11:23 +0300
Subject: [gdal-dev] OGR datasources
In-Reply-To: <1380794109639-5081575.post@n6.nabble.com>
References: <loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
	<1380702626890-5081369.post@n6.nabble.com>
	<1380782737025-5081548.post@n6.nabble.com>
	<loom.20131003T091612-47@post.gmane.org>
	<1380794109639-5081575.post@n6.nabble.com>
Message-ID: <57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>


Does anyone has a list of OGR datasources which support update ?

The tables and test methods have "create" capability, but not update. And it turns out that there are datasources (e.g. MapInfo) which allow create, but does not allow editing of existing data (opening in write mode). Actually the only datasource what I found where it works fine was Shapefile, but I did not try many

I'm using it in Android context, so "big" datasources with libraries (PostGIS, ESRI etc) where it probably works are not really usable there. Built-in simple file datasources are more interesting, but a general way to have a list would be best.

Jaak

From danieltesta at suremptec.com.ar  Thu Oct  3 08:24:53 2013
From: danieltesta at suremptec.com.ar (Daniel Testa)
Date: Thu, 3 Oct 2013 12:24:53 -0300
Subject: [gdal-dev] can't fetch the projection definition string on Linux
In-Reply-To: <CA+YzLBfnFZPwqz1Fwb2JjKJhiPk3_TRPjgLQKYPsp9_+aQ=-XA@mail.gmail.com>
References: <CAHy2iFfs1QqEYMyApkU=Q2ndG2EPqEpa962=QaUdQS4J+BMdgA@mail.gmail.com>
	<CA+YzLBfnFZPwqz1Fwb2JjKJhiPk3_TRPjgLQKYPsp9_+aQ=-XA@mail.gmail.com>
Message-ID: <CAHy2iFfi-d-LK1DvdLyxOf9rrEmSduJQ1hEXXbZ2bNrZqsh0Gw@mail.gmail.com>

The problem was solved installing libgeotiff-epsg. I did the following:

sudo apt-get install libgeotiff-epsg

After doing that everything worked as expected.

Thanks Carl and Frank for your help.

Best regards,
Daniel.


On Wed, Oct 2, 2013 at 10:15 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Daniel,
>
> This is likely due to problems looking up the coordinate system.  If
> you built and installed GDAL yourself it will likely be looking in
> /usr/local/share/gdal/data for the file pcs.csv.  If you installed it
> via apt-get then it should be looking in /usr/share/gdal/data (or
> perhaps /usr/share/gdal/data/1.10) for the file.
>
> So, step one is to confirm that the pcs.csv file exists in one of
> those locations.  If GDAL is looking in the wrong place for the file,
> setting the GDAL_DATA environment variable may help.
>
> ie.
> export GDAL_DATA=/usr/local/share/gdal/data
> gdalinfo abc.tif
>
> It is also possible that the GDAL GeoTIFF driver actually needs the
> libgeotiff support csv files which would normally live somewhere like
> /usr/share/epsg_csv and key files would have names like
> coordinate_reference_system.csv.
>
> Best regards,
> Frank
>
>
> On Wed, Oct 2, 2013 at 2:29 PM, Daniel Testa
> <danieltesta at suremptec.com.ar> wrote:
> > Hello everyone, I?m experiencing a weird behavior when reading a raster
> > image (GTiff/GeoTIFF)
> >
> > I'm using GDAL 1.9.1 for Linux (Ubuntu 12.04 LTS) and Windows (Win 7
> > Ultimate SP1) to open a raster image with EPSG:22194
> >
> > Sample output from gdalinfo for that image on Windows (WKT):
> > [...]
> > PROJCS["Campo Inchauspe / Argentina 4",
> >     GEOGCS["Campo Inchauspe",
> >         DATUM["Campo_Inchauspe",
> >             SPHEROID["International 1924",6378388,297.000000000005,
> >                 AUTHORITY["EPSG","7022"]],
> >             AUTHORITY["EPSG","6221"]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433],
> >         AUTHORITY["EPSG","4221"]],
> >     PROJECTION["Transverse_Mercator"],
> >     PARAMETER["latitude_of_origin",-90],
> >     PARAMETER["central_meridian",-63],
> >     PARAMETER["scale_factor",1],
> >     PARAMETER["false_easting",4500000],
> >     PARAMETER["false_northing",0],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]],
> >     AUTHORITY["EPSG","22194"]]
> > [...]
> >
> > Now the output from gdalinfo for the same image on Linux (WKT):
> > [...]
> > LOCAL_CS["Campo Inchauspe / Argentina 4",
> >     GEOGCS["Campo Inchauspe",
> >         DATUM["unknown",
> >             SPHEROID["unretrievable - using
> WGS84",6378137,298.257223563]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433]],
> >         AUTHORITY["EPSG","22194"],
> >     UNIT["metre",1]]
> > [...]
> >
> > Any idea of why this might be happening? it also happens with EPSG:22184
> >
> > Any idea, suggestion or comment is very welcome :)
> >
> > Thanks in advance.
> >
> > Regards,
> > Daniel.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131003/adaa0d7f/attachment.html>

From barthelemy at geovariances.com  Thu Oct  3 09:03:48 2013
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Thu, 3 Oct 2013 18:03:48 +0200
Subject: [gdal-dev] OGR datasources
In-Reply-To: <57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>
References: <loom.20130930T162826-375@post.gmane.org>
	<1380561741316-5080997.post@n6.nabble.com>
	<201309302019.45001.even.rouault@mines-paris.org>
	<loom.20131001T082832-999@post.gmane.org>
	<201310012029.14852.even.rouault@mines-paris.org>
	<1380701603286-5081365.post@n6.nabble.com>
	<201310021022.41287.even.rouault@mines-paris.org>
	<1380702626890-5081369.post@n6.nabble.com>
	<1380782737025-5081548.post@n6.nabble.com>
	<loom.20131003T091612-47@post.gmane.org>
	<1380794109639-5081575.post@n6.nabble.com>
	<57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>
Message-ID: <CAK9jXVU=+cSJcEXwGVJnPG_=kokD1FTWuUqAF7c2ydqYZ1nfFQ@mail.gmail.com>

Can't you get that by looking at the lines of `gdalinfo --formats`that
contain rw+ access?


2013/10/3 Jaak Laineste (Nutiteq) <jaak at nutiteq.com>

>
> Does anyone has a list of OGR datasources which support update ?
>
> The tables and test methods have "create" capability, but not update. And
> it turns out that there are datasources (e.g. MapInfo) which allow create,
> but does not allow editing of existing data (opening in write mode).
> Actually the only datasource what I found where it works fine was
> Shapefile, but I did not try many
>
> I'm using it in Android context, so "big" datasources with libraries
> (PostGIS, ESRI etc) where it probably works are not really usable there.
> Built-in simple file datasources are more interesting, but a general way to
> have a list would be best.
>
> Jaak
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Olivier BARTHELEMY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131003/d01e0b17/attachment.html>

From bontepaarden at gmail.com  Thu Oct  3 09:06:12 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 3 Oct 2013 18:06:12 +0200
Subject: [gdal-dev] EPSG 8.2 Upgrade
In-Reply-To: <1380798180.524d4ee4a2acb@imp.free.fr>
References: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
	<CAHNf2YSGkS6iUKg6-b_Wtgtq+kz7U6jX9Oor13k7-6oEwFigDQ@mail.gmail.com>
	<1380798180.524d4ee4a2acb@imp.free.fr>
Message-ID: <CAHNf2YT8zp-wjuz0Fmwqn1k2QyB59Uy5RebZq-WFwtRhppd4Ew@mail.gmail.com>

Thanks Even,

That patch works great.
Hopefully it will get implemented soon.



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/10/3 Even Rouault <even.rouault at mines-paris.org>

> Selon Paul Meems <bontepaarden at gmail.com>:
>
> > I'm not sure if this is the correct place to report this. If not please
> let
> > me know.
> >
> > I'm having trouble compiling the trunk version of PROJ.4 with the updated
> > EPSG 8.2 database definitions.
> > I'm running Win7 and use VS2008.
> > I'm getting these errors and warnings:
> > Warning  1    Command line warning D9002 : ignoring unknown option '/Op'
> > cl
> > Warning  2    warning C4129: 'P' : unrecognized character escape
> > sequence    pj_open_lib.c
> > Warning  3    warning C4129: 'S' : unrecognized character escape
> > sequence    pj_open_lib.c
> > Error    4    error C2143: syntax error : missing ';' before 'type'
> > PJ_healpix.c
> > Error    5    error C2143: syntax error : missing ';' before 'type'
> > PJ_healpix.c
> > Error    6    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
> > Error    7    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
> > Error    8    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
> > Error    9    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
> >
> > When I use the zipped source code for v4.8.0 I don't have these problems.
> >
> > Can anybody assist?
>
> There's a patch pending in Trac for the MSVC compilation issues :
> http://trac.osgeo.org/proj/ticket/223
>
> >
> > Thanks,
> >
> > Paul
> >
> >
> > 2013/10/2 Frank Warmerdam <warmerdam at pobox.com>
> >
> > > Folks,
> > >
> > > I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
> > > the EPSG 8.2 database definitions.   I have come to the
> > > conclusion that the EPSG Postgresql .sql files are distributed
> > > in WIN1252 encoding, not LATIN1, and so some special
> > > characters - mostly in comments - should be translated better.
> > >
> > > Let me know if you see problems or have questions.
> > >
> > > Best regards,
> > > --
> > >
> > >
> >
> ---------------------------------------+--------------------------------------
> > > I set the clouds in motion - turn up   | Frank Warmerdam,
> > > warmerdam at pobox.com
> > > light and sound - activate the windows | http://pobox.com/~warmerdam
> > > and watch the world go round - Rush    | Geospatial Software Developer
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131003/a8a0b003/attachment-0001.html>

From warmerdam at pobox.com  Thu Oct  3 09:19:13 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 3 Oct 2013 09:19:13 -0700
Subject: [gdal-dev] EPSG 8.2 Upgrade
In-Reply-To: <CAHNf2YT8zp-wjuz0Fmwqn1k2QyB59Uy5RebZq-WFwtRhppd4Ew@mail.gmail.com>
References: <CA+YzLBci4sJ+=n5qm=409VtvEL1UKneeePMmiAk4Ke-Q4w3bGw@mail.gmail.com>
	<CAHNf2YSGkS6iUKg6-b_Wtgtq+kz7U6jX9Oor13k7-6oEwFigDQ@mail.gmail.com>
	<1380798180.524d4ee4a2acb@imp.free.fr>
	<CAHNf2YT8zp-wjuz0Fmwqn1k2QyB59Uy5RebZq-WFwtRhppd4Ew@mail.gmail.com>
Message-ID: <CA+YzLBepFMUB2fJiL3+ryzML=NCOMhbqVUwdGNu9TwQ6oETSKg@mail.gmail.com>

Patch applied in trunk...



On Thu, Oct 3, 2013 at 9:06 AM, Paul Meems <bontepaarden at gmail.com> wrote:

> Thanks Even,
>
> That patch works great.
> Hopefully it will get implemented soon.
>
>
>
> Paul
>
>  *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
> *
> *
>
>
> 2013/10/3 Even Rouault <even.rouault at mines-paris.org>
>
>> Selon Paul Meems <bontepaarden at gmail.com>:
>>
>> > I'm not sure if this is the correct place to report this. If not please
>> let
>> > me know.
>> >
>> > I'm having trouble compiling the trunk version of PROJ.4 with the
>> updated
>> > EPSG 8.2 database definitions.
>> > I'm running Win7 and use VS2008.
>> > I'm getting these errors and warnings:
>> > Warning  1    Command line warning D9002 : ignoring unknown option '/Op'
>> > cl
>> > Warning  2    warning C4129: 'P' : unrecognized character escape
>> > sequence    pj_open_lib.c
>> > Warning  3    warning C4129: 'S' : unrecognized character escape
>> > sequence    pj_open_lib.c
>> > Error    4    error C2143: syntax error : missing ';' before 'type'
>> > PJ_healpix.c
>> > Error    5    error C2143: syntax error : missing ';' before 'type'
>> > PJ_healpix.c
>> > Error    6    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
>> > Error    7    error C2065: 'xc' : undeclared identifier    PJ_healpix.c
>> > Error    8    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
>> > Error    9    error C2065: 'tau' : undeclared identifier    PJ_healpix.c
>> >
>> > When I use the zipped source code for v4.8.0 I don't have these
>> problems.
>> >
>> > Can anybody assist?
>>
>> There's a patch pending in Trac for the MSVC compilation issues :
>> http://trac.osgeo.org/proj/ticket/223
>>
>> >
>> > Thanks,
>> >
>> > Paul
>> >
>> >
>> > 2013/10/2 Frank Warmerdam <warmerdam at pobox.com>
>> >
>> > > Folks,
>> > >
>> > > I have upgraded libgeotiff, GDAL and PROJ.4 trunk's with
>> > > the EPSG 8.2 database definitions.   I have come to the
>> > > conclusion that the EPSG Postgresql .sql files are distributed
>> > > in WIN1252 encoding, not LATIN1, and so some special
>> > > characters - mostly in comments - should be translated better.
>> > >
>> > > Let me know if you see problems or have questions.
>> > >
>> > > Best regards,
>> > > --
>> > >
>> > >
>> >
>> ---------------------------------------+--------------------------------------
>> > > I set the clouds in motion - turn up   | Frank Warmerdam,
>> > > warmerdam at pobox.com
>> > > light and sound - activate the windows | http://pobox.com/~warmerdam
>> > > and watch the world go round - Rush    | Geospatial Software Developer
>> > > _______________________________________________
>> > > gdal-dev mailing list
>> > > gdal-dev at lists.osgeo.org
>> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> > >
>> >
>>
>>
>>
>>
>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131003/7f869b94/attachment.html>

From even.rouault at mines-paris.org  Thu Oct  3 10:57:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Oct 2013 19:57:48 +0200
Subject: [gdal-dev] OGR datasources
In-Reply-To: <57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>
References: <loom.20130930T162826-375@post.gmane.org>
	<1380794109639-5081575.post@n6.nabble.com>
	<57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>
Message-ID: <201310031957.49095.even.rouault@mines-paris.org>

Le jeudi 03 octobre 2013 16:11:23, Jaak Laineste (Nutiteq) a ?crit :
> Does anyone has a list of OGR datasources which support update ?
> 
> The tables and test methods have "create" capability, but not update. And
> it turns out that there are datasources (e.g. MapInfo) which allow create,
> but does not allow editing of existing data (opening in write mode).
> Actually the only datasource what I found where it works fine was
> Shapefile, but I did not try many
> 
> I'm using it in Android context, so "big" datasources with libraries
> (PostGIS, ESRI etc) where it probably works are not really usable there.
> Built-in simple file datasources are more interesting, but a general way
> to have a list would be best.

Jaak,

There's no driver metadata that can tell you if update is supported or not by 
just calling TestCapabability() at the driver level.

If you have an existing datasource, you can for example test the 
OLCRandomWrite capability at the layer level.

But if I understand well your need is not to have a list that would be 
generated dynamically but rather pick up a format that support update ? If so, 
SQLite / Spatialite should be a good choice .

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bontepaarden at gmail.com  Fri Oct  4 01:21:13 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 4 Oct 2013 10:21:13 +0200
Subject: [gdal-dev] Compile GDAL with GEOS, strange GEOS_CFLAGS
Message-ID: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>

Hi all,

As mentioned before I'm trying to upgrade all supporting libraries we are
using with MapWinGIS.
I'm also documenting all steps so others can do this as well.

The build seems to be OK but I'm wondering about this part:
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
I have no $(GEOS_DIR)/source folder. I'm using GEOS v3.4.2.

I noticed in the past we used the same flags and the folder didn't exists
either, so most likely it is nothing to worry about ;)
But I want to make sure. Should I change it, delete it or leave it?

I'm running Win7 and compile using nmake in a VS2008 command prompt.

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131004/bca31ca3/attachment.html>

From userofgdal at gmail.com  Fri Oct  4 03:46:10 2013
From: userofgdal at gmail.com (user gdal)
Date: Fri, 4 Oct 2013 16:16:10 +0530
Subject: [gdal-dev] How to use MFC Visual C++ and GDAL together
Message-ID: <CAJnZZaLoabmKhQeC+7DsYXJrsot-umgcpPBtMHhduyJjDPkmug@mail.gmail.com>

Friends,
I wish to use MFC which is part of Visual C++ 2008 and GDAL.

1. I downloaded GDAL 'latest stable release'  as a zip file from
http://trac.osgeo.org/gdal/wiki/DownloadSource

2. Extracted the zip file. Compiled the project to get gdal110.dll + many
.lib files + many .h files

3. Created a folder in my project ('ref'). Copied gdal110.dll into the ref
folder

4. Likewise created two folders 'header' and 'lib'. Copied lib files from
the download to lib and h files
    to header folders

5. In Tools|Options in Visual Studio in my project: accessed Projects and
Solutions: VC++      directories and mentioned header (Include Files), ref
(Reference Files) and lib (library files)

6. In CMyProjectdoc.h, included gdal_priv.h and cpl_conv.h just below #
pragma once

7. Declared a variable in the same file GDALDataset *indataset;

8. Compiled (without writing anything further) and got error(s): Unexpected
values...

Can anyone teach me where I went wrong and how to proceed correctly.


                       Thanking you,


                          B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131004/ed37a1a4/attachment.html>

From jaak at nutiteq.com  Fri Oct  4 04:09:30 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Fri, 4 Oct 2013 14:09:30 +0300
Subject: [gdal-dev] OGR datasources
In-Reply-To: <201310031957.49095.even.rouault@mines-paris.org>
References: <loom.20130930T162826-375@post.gmane.org>
	<1380794109639-5081575.post@n6.nabble.com>
	<57830EC9-7A97-444F-A89D-9810EBD626BD@nutiteq.com>
	<201310031957.49095.even.rouault@mines-paris.org>
Message-ID: <D96F3007-D55D-4488-A86C-E0732971BCD9@nutiteq.com>


On 03.10.2013, at 20:57, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le jeudi 03 octobre 2013 16:11:23, Jaak Laineste (Nutiteq) a ?crit :
>> Does anyone has a list of OGR datasources which support update ?
>> 
>> I'm using it in Android context, so "big" datasources with libraries
>> (PostGIS, ESRI etc) where it probably works are not really usable there.
>> Built-in simple file datasources are more interesting, but a general way
>> to have a list would be best.
> 
> Jaak,
> 
> There's no driver metadata that can tell you if update is supported or not by 
> just calling TestCapabability() at the driver level.
> 
> If you have an existing datasource, you can for example test the 
> OLCRandomWrite capability at the layer level.
> 
> But if I understand well your need is not to have a list that would be 
> generated dynamically but rather pick up a format that support update ? If so, 
> SQLite / Spatialite should be a good choice .

Ok, thanks, this clarifies it. My idea was to have generic mobile OGR editor with a function "open file" which would enable to open only files which can be actually edited, or at least informs user that "this works for ShapeFile, SQLite etc", but it seems this is not really possible with current APIs. 

Just a note:
ogrinfo --formats
Supported Formats:
  -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
?

So it reports "read/write" if there is ODrCCreateDataSource, and otherwise "readonly", without checking editing (random write)

For example, as it turns out from documentation and real testing, Shapefile supports editing, but MapInfo does not, but this utility tests basic capability which is not revealed by driver API and therefore also for this tool.

Jaak


From nicolas.simon at spw.wallonie.be  Fri Oct  4 04:52:46 2013
From: nicolas.simon at spw.wallonie.be (SIMON Nicolas)
Date: Fri, 4 Oct 2013 11:52:46 +0000
Subject: [gdal-dev] Compile GDAL with GEOS, strange GEOS_CFLAGS
In-Reply-To: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>
References: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>
Message-ID: <F02D54DF5576D84C86C23A39A792DC7E056C09FC@se0008v.wallonie.intra>

Hi Paul,
  If it can help, here is my config

GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include -DHAVE_GEOS
GEOS_LIB     = $(GEOS_DIR)/src/geos_c_i.lib

Regards,
Nicolas

De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Paul Meems
Envoy? : vendredi 4 octobre 2013 10:21
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] Compile GDAL with GEOS, strange GEOS_CFLAGS

Hi all,
As mentioned before I'm trying to upgrade all supporting libraries we are using with MapWinGIS.
I'm also documenting all steps so others can do this as well.
The build seems to be OK but I'm wondering about this part:
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
I have no $(GEOS_DIR)/source folder. I'm using GEOS v3.4.2.

I noticed in the past we used the same flags and the folder didn't exists either, so most likely it is nothing to worry about ;)
But I want to make sure. Should I change it, delete it or leave it?

I'm running Win7 and compile using nmake in a VS2008 command prompt.

Thanks,

Paul

[http://www.bontepaarden.nl/bontepaarden/images/newButton.png]Paul Meems
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org<http://www.mapwindow.org/>

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl<http://www.mapwindow.nl/>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131004/9c0f28e3/attachment.html>

From piotr at cgis.pl  Fri Oct  4 08:57:49 2013
From: piotr at cgis.pl (Piotr Tracz)
Date: Fri, 04 Oct 2013 17:57:49 +0200
Subject: [gdal-dev] How to use MFC Visual C++ and GDAL together
In-Reply-To: <CAJnZZaLoabmKhQeC+7DsYXJrsot-umgcpPBtMHhduyJjDPkmug@mail.gmail.com>
References: <CAJnZZaLoabmKhQeC+7DsYXJrsot-umgcpPBtMHhduyJjDPkmug@mail.gmail.com>
Message-ID: <524EE57D.4080309@cgis.pl>

W dniu 2013-10-04 12:46, user gdal pisze:
> Friends,
> I wish to use MFC which is part of Visual C++ 2008 and GDAL.
>
> 8. Compiled (without writing anything further) and got error(s): 
> Unexpected values...

Paste exact error log.

/Piotr




From even.rouault at mines-paris.org  Fri Oct  4 14:08:35 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 4 Oct 2013 23:08:35 +0200
Subject: [gdal-dev] Compile GDAL with GEOS, strange GEOS_CFLAGS
In-Reply-To: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>
References: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>
Message-ID: <201310042308.35474.even.rouault@mines-paris.org>

Le vendredi 04 octobre 2013 10:21:13, Paul Meems a ?crit :
> Hi all,
> 
> As mentioned before I'm trying to upgrade all supporting libraries we are
> using with MapWinGIS.
> I'm also documenting all steps so others can do this as well.
> 
> The build seems to be OK but I'm wondering about this part:
> GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
> I have no $(GEOS_DIR)/source folder. I'm using GEOS v3.4.2.
> 
> I noticed in the past we used the same flags and the folder didn't exists
> either, so most likely it is nothing to worry about ;)
> But I want to make sure. Should I change it, delete it or leave it?

If that compiles, no reason to worry. The suggested flags in the nmake.opt just 
reflect the directory organization of a (now) ancient GEOS version.

> 
> I'm running Win7 and compile using nmake in a VS2008 command prompt.
> 
> Thanks,
> 
> Paul
> 
>  *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
> 
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
> 
> *
> *

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mateusz at loskot.net  Fri Oct  4 14:15:43 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 4 Oct 2013 22:15:43 +0100
Subject: [gdal-dev] Compile GDAL with GEOS, strange GEOS_CFLAGS
In-Reply-To: <201310042308.35474.even.rouault@mines-paris.org>
References: <CAHNf2YQRQdb64XVtS7u9YhrcnkvxYu-nRmXyk7BhonH-rOhGxA@mail.gmail.com>
	<201310042308.35474.even.rouault@mines-paris.org>
Message-ID: <CABUeae9TbwWB9ri7_oz_CLVhn4GsiNx8SMizrMn6kGuf5JBP6A@mail.gmail.com>

On 4 October 2013 22:08, Even Rouault <even.rouault at mines-paris.org> wrote:
> Le vendredi 04 octobre 2013 10:21:13, Paul Meems a ?crit :
>> As mentioned before I'm trying to upgrade all supporting libraries we are
>> using with MapWinGIS.
>> I'm also documenting all steps so others can do this as well.
>>
>> The build seems to be OK but I'm wondering about this part:
>> GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
>> I have no $(GEOS_DIR)/source folder. I'm using GEOS v3.4.2.
>>
>> I noticed in the past we used the same flags and the folder didn't exists
>> either, so most likely it is nothing to worry about ;)
>> But I want to make sure. Should I change it, delete it or leave it?
>
> If that compiles, no reason to worry. The suggested flags in the nmake.opt just
> reflect the directory organization of a (now) ancient GEOS version.

Yes, it's worth to note, GEOS changed the source layout a while ago:

http://trac.osgeo.org/geos/ticket/315

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From aperi2007 at gmail.com  Fri Oct  4 23:11:15 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sat, 5 Oct 2013 08:11:15 +0200
Subject: [gdal-dev] ogrinfo: how retrieve the extent of a single geometry
Message-ID: <CABqTJk-3Jhp-0T7KtoWY1pTHt302A11hn8T_ADm+z3=1exNrfw@mail.gmail.com>

Hi all,

I need to retrieve the extent of a single geometry using ogrinfo.

I try to use this sintax:

ogrinfo -al -so filename.shp -where "field1='value1'"

But ogrinfo return always the extent of all the shapefile not only the
extent of filtered one.

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131005/314448bc/attachment.html>

From andre+joost at nurfuerspam.de  Fri Oct  4 23:56:04 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sat, 05 Oct 2013 08:56:04 +0200
Subject: [gdal-dev] ogrinfo: how retrieve the extent of a single geometry
In-Reply-To: <CABqTJk-3Jhp-0T7KtoWY1pTHt302A11hn8T_ADm+z3=1exNrfw@mail.gmail.com>
References: <CABqTJk-3Jhp-0T7KtoWY1pTHt302A11hn8T_ADm+z3=1exNrfw@mail.gmail.com>
Message-ID: <l2od80$aqi$1@ger.gmane.org>

Am 05.10.2013 08:11, schrieb Andrea Peri:
> Hi all,
>
> I need to retrieve the extent of a single geometry using ogrinfo.
>
> I try to use this sintax:
>
> ogrinfo -al -so filename.shp -where "field1='value1'"
>
> But ogrinfo return always the extent of all the shapefile not only the
> extent of filtered one.
>

This will not work. See:
<http://osgeo-org.1560.x6.nabble.com/Re-Selecting-features-using-ogrinfo-td4538045.html>

last answer.

HTH,
Andr? Joost



From dost_4_ever at yahoo.com  Sat Oct  5 03:44:42 2013
From: dost_4_ever at yahoo.com (Sumit Kumar)
Date: Sat, 5 Oct 2013 03:44:42 -0700 (PDT)
Subject: [gdal-dev] GDal with CMake
Message-ID: <1380969882.87842.YahooMailNeo@web160201.mail.bf1.yahoo.com>

Dear All
I was searching for a clean implementation to build GDal using CMake. Barring a project started by Aashish a couple of years ago, and a trac page listing the need for building such an implementation (http://trac.osgeo.org/gdal/wiki/CMake), I could not find anything. 
I have placed a first version of a cleaner way to build GDal with CMake on github
https://github.com/skn123/-gdal_cmake
Currently, I have the following issues with this build structure and would solicit help from other developers in modularizing it:
a.) The use of global if-def's makes the project highly non-modular; More so if we want to add support for other formats (e.g., in the frmts folder), we will trigger a rebuild of the entire library
b.) Currently, this build has been tested on Visual Studio 2010 and 2012 64Bit. It would be nice if users can report their build experiences on Linux and OsX.
c.) For now, OpenCL and Hdf5 are supported as 3rd party libraries.

?
Thanks and Regards
Sumit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131005/cbd78d2a/attachment.html>

From even.rouault at mines-paris.org  Sat Oct  5 03:57:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Oct 2013 12:57:47 +0200
Subject: [gdal-dev] Testers with Kakadu needed
Message-ID: <201310051257.47589.even.rouault@mines-paris.org>

Hi,

A ticket ( http://trac.osgeo.org/gdal/ticket/5257 ) has been opened about a 
potential issue that would affect the JPEG2000 files that are created with the 
JP2KAK driver in GDAL 1.9.0 or above.

This issue, if confirmed, would result in a corruption of the GMLJP2 box. This 
could easily get unnoticed since GDAL writes by default both a GMLJP2 and 
GeoJP2 box, and, when reading, uses the GeoJP2 box if both are found (and if 
GMLJP2 is corrupted, it will only see the GeoJP2 box)

The way to reliably confirm the problem is to generate a JPEG2000 with only a 
GMLJP2 box, by explictly disabling GeoJP2 box creation.

1) Download http://svn.osgeo.org/gdal/trunk/autotest/gcore/data/byte.tif
2) gdal_translate byte.tif byte.jp2 -of JP2KAK -co GEOJP2=NO
3) check if there's a byte.jp2.aux.xml file. If there's one, delete it (if it 
exists, that's an early sign of the problem)
4) gdalinfo byte.jp2

If gdalinfo reports a PROJCS["NAD27 / UTM zone 11N"...] and Origin = 
(440720.000000000000000,3751320.000000000000000, then it's fine. Otherwise 
there's a problem.

The reported problem was with Kakadu 6.3. It couldn't be reproduced with 
Kakadu 5.2 however. If people with a variety of Kakadu versions could make the 
above test and report their findings (Kakadu version, OS, 32/64 bit, little-
endian/big-endian machine, result of the test), that would be helpful.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Sat Oct  5 12:20:03 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 5 Oct 2013 19:20:03 +0000 (UTC)
Subject: [gdal-dev] ogrinfo: how retrieve the extent of a single geometry
References: <CABqTJk-3Jhp-0T7KtoWY1pTHt302A11hn8T_ADm+z3=1exNrfw@mail.gmail.com>
	<l2od80$aqi$1@ger.gmane.org>
Message-ID: <loom.20131005T211335-727@post.gmane.org>

Andre Joost <andre+joost <at> nurfuerspam.de> writes:

> 
> Am 05.10.2013 08:11, schrieb Andrea Peri:
> > Hi all,
> >
> > I need to retrieve the extent of a single geometry using ogrinfo.
> >
> > I try to use this sintax:
> >
> > ogrinfo -al -so filename.shp -where "field1='value1'"
> >
> > But ogrinfo return always the extent of all the shapefile not only the
> > extent of filtered one.
> >
> 
> This will not work. See:
>
<http://osgeo-org.1560.x6.nabble.com/Re-Selecting-features-using-ogrinfo-td4538045.html>
> 
> last answer.

Use -dialect SQLITE and play a bit with the -sql parameter and I believe you
can construct a field that suits your needs. Here is a coarse example

ogrinfo -dialect sqlite -sql "select GEOMETRY,
MbrMinX(GEOMETRY),MbrMinY(GEOMETRY),MbrMaxX(GEOMETRY),MbrMaxY(GEOMETRY)from
test limit 1" test.shp

-Jukka Rahkonen-

> HTH,
> Andr? Joost
> 





From bishop.dev at gmail.com  Sat Oct  5 13:08:48 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 06 Oct 2013 00:08:48 +0400
Subject: [gdal-dev] GDal with CMake
In-Reply-To: <1380969882.87842.YahooMailNeo@web160201.mail.bf1.yahoo.com>
References: <1380969882.87842.YahooMailNeo@web160201.mail.bf1.yahoo.com>
Message-ID: <525071D0.8040407@gmail.com>

Hi,

I'm working on CMake for GDAL. Not all drivers implemented yet, but work 
is going on.
See https://github.com/aashish24/gdal-svn
Cmake4gdal branch,
why duplicate the work? I don't understand.

Best regards,
     Dmitriy

05.10.2013 14:44, Sumit Kumar ?????:
> Dear All
> I was searching for a clean implementation to build GDal using CMake. 
> Barring a project started by Aashish a couple of years ago, and a trac 
> page listing the need for building such an implementation 
> (http://trac.osgeo.org/gdal/wiki/CMake), I could not find anything.
> I have placed a first version of a cleaner way to build GDal with 
> CMake on github
> https://github.com/skn123/-gdal_cmake
> Currently, I have the following issues with this build structure and 
> would solicit help from other developers in modularizing it:
> a.) The use of global if-def's makes the project highly non-modular; 
> More so if we want to add support for other formats (e.g., in the 
> frmts folder), we will trigger a rebuild of the entire library
> b.) Currently, this build has been tested on Visual Studio 2010 and 
> 2012 64Bit. It would be nice if users can report their build 
> experiences on Linux and OsX.
> c.) For now, OpenCL and Hdf5 are supported as 3rd party libraries.
> Thanks and Regards
> Sumit
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131006/8977e071/attachment.html>

From jef at norbit.de  Sun Oct  6 10:06:08 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sun, 6 Oct 2013 19:06:08 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
	field lookup"
Message-ID: <20131006170608.GA9063@norbit.de>

Hi,

This is a call for discussion for "RFC 42: OGR Layer laundered field lookup": 

http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields

It proposes a new method in the OGR layer class (and a C API) to lookup indexes
of fields, whose names have been altered by drivers (eg. by LAUNDER in OCI or
Pg).


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)                                   IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From szekerest at gmail.com  Sun Oct  6 11:05:18 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 6 Oct 2013 20:05:18 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
 field lookup"
Message-ID: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>

J?rgen,

Looks like a good proposal.
The only thing I'm uncertain about whether the driver should do something
different when calling OGRLayer::FindFieldIndex with bExactMatch = TRUE
than when calling OGRLayer::GetFieldIndex? I don't see the driver
implementation in the pull request which would probably make that thing
more trivial to understand.

Best regards,

Tamas




2013/10/6 J?rgen E. <jef at norbit.de>

> Hi,
>
> This is a call for discussion for "RFC 42: OGR Layer laundered field
> lookup":
>
> http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields
>
> It proposes a new method in the OGR layer class (and a C API) to lookup
> indexes
> of fields, whose names have been altered by drivers (eg. by LAUNDER in OCI
> or
> Pg).
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
> QGIS PSC member (RM)                                   IRC: jef on FreeNode
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131006/bd15586b/attachment.html>

From jef at norbit.de  Sun Oct  6 12:39:06 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sun, 6 Oct 2013 21:39:06 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer	laundered
	field lookup"
In-Reply-To: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
References: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
Message-ID: <20131006193906.GA29089@norbit.de>

Hi Tamas,

On Sun, 06. Oct 2013 at 20:05:18 +0200, Tamas Szekeres wrote:
>    Looks like a good proposal.
>    The only thing I'm uncertain about whether the driver should do something
>    different when calling OGRLayer::FindFieldIndex with bExactMatch = TRUE
>    than when calling OGRLayer::GetFieldIndex? I don't see the driver
>    implementation in the pull request which would probably make that thing
>    more trivial to understand.

The pull request only has an implementation for the OCI driver:
https://github.com/jef-n/gdal/commit/66723a4bb75c5aa1afd309420bc563e1a48b074b#diff-156f2c76948ed9a6134f385f35e83165R495


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)                                   IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From szekerest at gmail.com  Sun Oct  6 13:21:52 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 6 Oct 2013 22:21:52 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
 field lookup"
In-Reply-To: <20131006193906.GA29089@norbit.de>
References: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
	<20131006193906.GA29089@norbit.de>
Message-ID: <CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>

Hi J?rgen,

The commit you're referring to, doesn't seem contain the handling of the
bExactMatch parameter at the driver. At the moment I consider this a bit
redundant if calling OGRLayer::FindFieldIndex with bExactMatch = TRUE does
the same as OGRLayer::GetFieldIndex. In this regard I'd be in favour of
using the same signature for both functions. In ogr2ogr we could then do
something like:

int iDstField = bExactFieldNameMatch?
poDstLayer->GetFieldIndex(poSrcFieldDefn->GetNameRef()) :
poDstLayer->FindFieldIndex(poSrcFieldDefn->GetNameRef());


Best regards,

Tamas



2013/10/6 J?rgen E. <jef at norbit.de>

> Hi Tamas,
>
> On Sun, 06. Oct 2013 at 20:05:18 +0200, Tamas Szekeres wrote:
> >    Looks like a good proposal.
> >    The only thing I'm uncertain about whether the driver should do
> something
> >    different when calling OGRLayer::FindFieldIndex with bExactMatch =
> TRUE
> >    than when calling OGRLayer::GetFieldIndex? I don't see the driver
> >    implementation in the pull request which would probably make that
> thing
> >    more trivial to understand.
>
> The pull request only has an implementation for the OCI driver:
>
> https://github.com/jef-n/gdal/commit/66723a4bb75c5aa1afd309420bc563e1a48b074b#diff-156f2c76948ed9a6134f385f35e83165R495
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
> QGIS PSC member (RM)                                   IRC: jef on FreeNode
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131006/265e67e6/attachment.html>

From jef at norbit.de  Sun Oct  6 13:46:31 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sun, 6 Oct 2013 22:46:31 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer	laundered
	field lookup"
In-Reply-To: <CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>
References: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
	<20131006193906.GA29089@norbit.de>
	<CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>
Message-ID: <20131006204631.GA5957@norbit.de>

Hi Tamas,

On Sun, 06. Oct 2013 at 22:21:52 +0200, Tamas Szekeres wrote:
> The commit you're referring to, doesn't seem contain the handling of the?
> bExactMatch parameter at the driver. At the moment I consider this a bit
> redundant if calling OGRLayer::FindFieldIndex with bExactMatch = TRUE does
> the same as OGRLayer::GetFieldIndex. In this regard I'd be in favour of using
> the same signature for both functions. In ogr2ogr we could then do something
> like:

Ah, sorry.  Evan suggested to introduce something like bExactMatch after I made
the initial PR.

So it was added in an incremental change here:
https://github.com/jef-n/gdal/commit/a12311e56cf09d9deb15a18e93704377d1627c12#diff-156f2c76948ed9a6134f385f35e83165R499

Or the result of the merged changes:
https://github.com/OSGeo/gdal/pull/23/files#diff-156f2c76948ed9a6134f385f35e83165R495


>    int iDstField = bExactFieldNameMatch?
>    poDstLayer->GetFieldIndex(poSrcFieldDefn->GetNameRef()) :
>    poDstLayer->FindFieldIndex(poSrcFieldDefn->GetNameRef());

Do you prefer a second new OGRLayer method or did you mean:

    int iDstField = bExactFieldNameMatch?
    poDstFDefn->GetFieldIndex(poSrcFieldDefn->GetNameRef()) :
    poDstLayer->FindFieldIndex(poSrcFieldDefn->GetNameRef());


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From even.rouault at mines-paris.org  Sun Oct  6 13:57:56 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Oct 2013 22:57:56 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
	field lookup"
In-Reply-To: <CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>
References: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
	<20131006193906.GA29089@norbit.de>
	<CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>
Message-ID: <201310062257.56986.even.rouault@mines-paris.org>

Le dimanche 06 octobre 2013 22:21:52, Tamas Szekeres a ?crit :
> Hi J?rgen,
> 
> The commit you're referring to, doesn't seem contain the handling of the
> bExactMatch parameter at the driver. At the moment I consider this a bit
> redundant if calling OGRLayer::FindFieldIndex with bExactMatch = TRUE does
> the same as OGRLayer::GetFieldIndex. In this regard I'd be in favour of
> using the same signature for both functions. In ogr2ogr we could then do
> something like:
> 
> int iDstField = bExactFieldNameMatch?
> poDstLayer->GetFieldIndex(poSrcFieldDefn->GetNameRef()) :
> poDstLayer->FindFieldIndex(poSrcFieldDefn->GetNameRef());

Tamas,

Actually, it was committed in https://github.com/jef-
n/gdal/commit/a12311e56cf09d9deb15a18e93704377d1627c12 following a suggestion 
from mine in the discussion of the pull request.

My rationale was that we have already a few methods that take an approx flag 
(e.g. GetFeatureCount(), CreateField() ), but I don't feel very strongly for 
one way or the other one.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From szekerest at gmail.com  Sun Oct  6 13:57:45 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 6 Oct 2013 22:57:45 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
 field lookup"
In-Reply-To: <20131006204631.GA5957@norbit.de>
References: <CACALY+S53qiF6E5Zj8rA5V_uHbqX=R584JEGKCxiLV_K6u=gxg@mail.gmail.com>
	<20131006193906.GA29089@norbit.de>
	<CACALY+T0s26U+uVUfT35eQtiHv2J5dE-G4Bd7Ye6zGYOGnq1jw@mail.gmail.com>
	<20131006204631.GA5957@norbit.de>
Message-ID: <CACALY+QyxWQCgv0pOv-rZ=2M++wEF9juwhL9rmoyPYsA7kck3Q@mail.gmail.com>

2013/10/6 J?rgen E. <jef at norbit.de>

>
>     int iDstField = bExactFieldNameMatch?
>     poDstFDefn->GetFieldIndex(poSrcFieldDefn->GetNameRef()) :
>     poDstLayer->FindFieldIndex(poSrcFieldDefn->GetNameRef());
>
>
Ah yes, this is what I wanted to say. No additional method would be
required.

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131006/63ed4486/attachment.html>

From szekerest at gmail.com  Sun Oct  6 14:22:59 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 6 Oct 2013 23:22:59 +0200
Subject: [gdal-dev] Call for discussion for "RFC 42: OGR Layer laundered
 field lookup"
Message-ID: <CACALY+ReRL=osKMZPRdNB-7ifYDEMgXsgeYW0+eRQqPyUQ_e6g@mail.gmail.com>

2013/10/6 Even Rouault <even.rouault at mines-paris.org>

>
> My rationale was that we have already a few methods that take an approx
> flag
> (e.g. GetFeatureCount(), CreateField() ), but I don't feel very strongly
> for
> one way or the other one.
>
>
Even,

Yes it's not a significant question indeed. I like J?rgen's original
version somewhat better. Using FindFieldIndex with one parameter is more
straightforward at the moment, since falling back to GetFieldIndex  (when
bExactMatch = TRUE) would provide bit redundant API.


Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131006/f920228c/attachment.html>

From userofgdal at gmail.com  Sun Oct  6 21:32:03 2013
From: userofgdal at gmail.com (user gdal)
Date: Mon, 7 Oct 2013 10:02:03 +0530
Subject: [gdal-dev] (no subject)
Message-ID: <CAJnZZaJBPnTits9Tdv=WmquO55e3JqcmkSDZji-n=gOj-nmtvQ@mail.gmail.com>

Friends,
I sent this mail on Friday. Request for a remedy. If someone can send a
built-in project (needn't be with a high end code) using MFC in VC++ 2008
in a Win Zip or RAR, it will be even better.

The error  (pl. see No. 8) I got is
f:\sw\GDALexperiment\GDALexperiment\header\cpl_port.h: fatal error C1189:
#error :  "Unexpected value for SIZEOF_UNSIGNED_LONG" GDALexperiment.cpp

I wish to use MFC which is part of Visual C++ 2008 and GDAL.


1. I downloaded GDAL 'latest stable release'  as a zip file from
http://trac.osgeo.org/gdal/wiki/DownloadSource


2. Extracted the zip file. Compiled the project to get gdal110.dll + many
.lib files + many .h files


3. Created a folder in my project ('ref'). Copied gdal110.dll into the ref
folder


4. Likewise created two folders 'header' and 'lib'. Copied lib files from
the download to lib and h files
    to header folders


5. In Tools|Options in Visual Studio in my project: accessed Projects and
Solutions: VC++      directories and mentioned header (Include Files), ref
(Reference Files) and lib (library files)


6. In CMyProjectdoc.h, included gdal_priv.h and cpl_conv.h just below #
pragma once


7. Declared a variable in the same file GDALDataset *indataset;


8. Compiled (without writing anything further) and got error(s): Unexpected
values...


Can anyone teach me where I went wrong and how to proceed correctly.



Thanking you,



B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131007/eb6a29d8/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Oct  7 10:59:24 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 7 Oct 2013 19:59:24 +0200
Subject: [gdal-dev] Testers with Kakadu needed
In-Reply-To: <201310051257.47589.even.rouault@mines-paris.org>
References: <201310051257.47589.even.rouault@mines-paris.org>
Message-ID: <201310071959.24781.even.rouault@mines-paris.org>

Le samedi 05 octobre 2013 12:57:47, Even Rouault a ?crit :
> Hi,
> 
> A ticket ( http://trac.osgeo.org/gdal/ticket/5257 ) has been opened about a
> potential issue that would affect the JPEG2000 files that are created with
> the JP2KAK driver in GDAL 1.9.0 or above.
> 

The ticket has been closed since there was actually no problem within GDAL. It 
was related to the use of an internal method of GDAL by third-party code. So 
no need for testers.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From refriguy68 at yahoo.com  Mon Oct  7 15:26:45 2013
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Mon, 7 Oct 2013 15:26:45 -0700 (PDT)
Subject: [gdal-dev] GDAL and GeoPDF with Poppler (Couple issues)
Message-ID: <1381184805.84698.YahooMailNeo@web164702.mail.gq1.yahoo.com>

Ladies/Gents,

I have been using GeoPDF capability with 0.16.3 for a while and enjoy the capabilities GDAL provides.? I have wanted to add the capability to turn Layers On/Off using the features provided.? Lets assume I have a file called world.pdf that contains more than 5 Layers with sub-layers.

Project Configuration:

GDAL_repos:? 9-28-2013
Poppler:??? ???? version 0.16.3
OS: ??? ?????? ? Windows XP SP3
Build:???????? ??MSVC 2008


Once built with the configuration above, I used the technique provided in the frmt_pdf.html page using gdal_translate.exe to turn off 1 Layer:

$ gdal_translate.exe c:\world.pdf out.tif --config GDAL_PDF_LAYERS_OFF "Grids"

I assume I used the proper request to only turn off "Grids" and allow all other LAYERS "On". The problem I get is when it executes more layers are turned "off" than the single layer specified.

Here are my issues:

1. How do I request to output a file that turns off one or more Layers and keeps the others on?

2. According to the frmt_pdf.html, under the Configuration Options, GDAL_PDF_LAYERS and GDAL_PDF_LAYERS_OFF both state "When this option is specified, layers not explicitly listed will be turned off".? 

? I hope a quick copy & paste was performed... Which one should explicitly default? to turned On?? I would think GDAL_PDF_LAYERS_OFF.

3. When I executed gdal_translate.exefrom the request above, I got the following Error:

ERROR 1: Could not find a OCG with Ref (13:0)
ERROR 1: Could not find a OCG with Ref (30:0)
...repeats with different Ref() numbers

ERROR 1: Could not find a OCG with Ref (153:0)

This is a known Poppler issue as you can see here:
https://bugs.freedesktop.org/show_bug.cgi?id=39637

It states that the fix was added to Poppler version 0.17.2 >=
If that is true, the documentation (frmt_pdf.html) should indicate that.? I do not know if that is why my generated file is not correct as I do not know what is effect by this recoverable error mentioned above.


I have not added a ticket for GDAL before, where is the location I can add future bugs if they arise?

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131007/077759cf/attachment.html>

From even.rouault at mines-paris.org  Mon Oct  7 15:50:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 8 Oct 2013 00:50:47 +0200
Subject: [gdal-dev] GDAL and GeoPDF with Poppler (Couple issues)
In-Reply-To: <1381184805.84698.YahooMailNeo@web164702.mail.gq1.yahoo.com>
References: <1381184805.84698.YahooMailNeo@web164702.mail.gq1.yahoo.com>
Message-ID: <201310080050.47846.even.rouault@mines-paris.org>

Le mardi 08 octobre 2013 00:26:45, Robert Zermeno a ?crit :
> Ladies/Gents,
> 
> I have been using GeoPDF capability with 0.16.3 for a while and enjoy the
> capabilities GDAL provides.  I have wanted to add the capability to turn
> Layers On/Off using the features provided.  Lets assume I have a file
> called world.pdf that contains more than 5 Layers with sub-layers.
> 
> Project Configuration:
> 
> GDAL_repos:  9-28-2013
> Poppler:         version 0.16.3
> OS:              Windows XP SP3
> Build:           MSVC 2008
> 
> 
> Once built with the configuration above, I used the technique provided in
> the frmt_pdf.html page using gdal_translate.exe to turn off 1 Layer:
> 
> $ gdal_translate.exe c:\world.pdf out.tif --config GDAL_PDF_LAYERS_OFF
> "Grids"
> 
> I assume I used the proper request to only turn off "Grids" and allow all
> other LAYERS "On". The problem I get is when it executes more layers are
> turned "off" than the single layer specified.
> 
> Here are my issues:
> 
> 1. How do I request to output a file that turns off one or more Layers and
> keeps the others on?
> 2. According to the frmt_pdf.html, under the Configuration Options,
> GDAL_PDF_LAYERS and GDAL_PDF_LAYERS_OFF both state "When this option is
> specified, layers not explicitly listed will be turned off". 
> 
>   I hope a quick copy & paste was performed... 

Yes copy & paste error. The comment "When this option is specified, layers not 
explicitly listed will be turned off" only applies to GDAL_PDF_LAYERS

One thing to remind is that some layers are turned off by default in PDF. So 
defining GDAL_PDF_LAYERS_OFF "Grids" will turn off "grids", but will let layers 
that defaulted to OFF as OFF. So if you want all layers but "Grids", you need 
to specify --config GDAL_PDF_LAYERS "ALL" as well. When both are defined, 
GDAL_PDF_LAYERS_OFF will override GDAL_PDF_LAYERS.

> 
> 3. When I executed gdal_translate.exefrom the request above, I got the
> following Error:
> 
> ERROR 1: Could not find a OCG with Ref (13:0)
> ERROR 1: Could not find a OCG with Ref (30:0)
> ...repeats with different Ref() numbers
> 
> ERROR 1: Could not find a OCG with Ref (153:0)
> 
> This is a known Poppler issue as you can see here:
> https://bugs.freedesktop.org/show_bug.cgi?id=39637
> 
> It states that the fix was added to Poppler version 0.17.2 >=
> If that is true, the documentation (frmt_pdf.html) should indicate that.  I
> do not know if that is why my generated file is not correct as I do not
> know what is effect by this recoverable error mentioned above.

This is likely but impossible to be sure without verifying.

> 
> 
> I have not added a ticket for GDAL before, where is the location I can add
> future bugs if they arise?

http://trac.osgeo.org/gdal/newticket

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bontepaarden at gmail.com  Tue Oct  8 00:39:08 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 8 Oct 2013 09:39:08 +0200
Subject: [gdal-dev] Changed API for exportToGEOS
Message-ID: <CAHNf2YQfp-5M3m72Dyaw0s=zVg8FC2dQ3-xsTy=GTJqRUEUYpw@mail.gmail.com>

Hi List,

I'm upgrading GDAL and GEOS to the latest stable versions for MapWinGIS and
while compiling the project I noticed the signature for exportToGEOS and
createFromGEOS have been changed.
They now require a GEOSContextHandle_t parameter.

I've been using Google to search for some documentation about this but
can't find it.

I've looked at the code used in GDAL and it looks like I just have to call
GEOSContextHandle_t hGEOSCtxt = createGEOSContext();
first and pass hGEOSCtxt.

Am I correct?

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131008/4d9acff1/attachment.html>

From even.rouault at mines-paris.org  Tue Oct  8 00:54:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 08 Oct 2013 09:54:00 +0200
Subject: [gdal-dev] Changed API for exportToGEOS
In-Reply-To: <CAHNf2YQfp-5M3m72Dyaw0s=zVg8FC2dQ3-xsTy=GTJqRUEUYpw@mail.gmail.com>
References: <CAHNf2YQfp-5M3m72Dyaw0s=zVg8FC2dQ3-xsTy=GTJqRUEUYpw@mail.gmail.com>
Message-ID: <1381218840.5253ba181fc98@imp.free.fr>

Selon Paul Meems <bontepaarden at gmail.com>:

> Hi List,
>
> I'm upgrading GDAL and GEOS to the latest stable versions for MapWinGIS and
> while compiling the project I noticed the signature for exportToGEOS and
> createFromGEOS have been changed.
> They now require a GEOSContextHandle_t parameter.
>
> I've been using Google to search for some documentation about this but
> can't find it.
>
> I've looked at the code used in GDAL and it looks like I just have to call
> GEOSContextHandle_t hGEOSCtxt = createGEOSContext();
> first and pass hGEOSCtxt.
>
> Am I correct?

Yes,

actually it is a change in trunk ( "stable" would be 1.10.X ). See
http://lists.osgeo.org/pipermail/gdal-dev/2013-August/036877.html and
http://trac.osgeo.org/gdal/changeset/26326

Even

From bontepaarden at gmail.com  Tue Oct  8 01:07:21 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 8 Oct 2013 10:07:21 +0200
Subject: [gdal-dev] Changed API for exportToGEOS
In-Reply-To: <1381218840.5253ba181fc98@imp.free.fr>
References: <CAHNf2YQfp-5M3m72Dyaw0s=zVg8FC2dQ3-xsTy=GTJqRUEUYpw@mail.gmail.com>
	<1381218840.5253ba181fc98@imp.free.fr>
Message-ID: <CAHNf2YSBJUcid1Q7ibAFHCR23G=8aqOxEBV=hjxTYjxhD74=rg@mail.gmail.com>

Thanks Even,

I'll change our code.
I assume I need to call
freeGEOSContext( hGEOSCtxt );
afterwards as well.

And you are right. I'm using the trunk version of GDAL because I want the
update EPSG database.
But I'm using GEOS v3.4.2 (Stable)




Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/10/8 Even Rouault <even.rouault at mines-paris.org>

> Selon Paul Meems <bontepaarden at gmail.com>:
>
> > Hi List,
> >
> > I'm upgrading GDAL and GEOS to the latest stable versions for MapWinGIS
> and
> > while compiling the project I noticed the signature for exportToGEOS and
> > createFromGEOS have been changed.
> > They now require a GEOSContextHandle_t parameter.
> >
> > I've been using Google to search for some documentation about this but
> > can't find it.
> >
> > I've looked at the code used in GDAL and it looks like I just have to
> call
> > GEOSContextHandle_t hGEOSCtxt = createGEOSContext();
> > first and pass hGEOSCtxt.
> >
> > Am I correct?
>
> Yes,
>
> actually it is a change in trunk ( "stable" would be 1.10.X ). See
> http://lists.osgeo.org/pipermail/gdal-dev/2013-August/036877.html and
> http://trac.osgeo.org/gdal/changeset/26326
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131008/2ca8135d/attachment-0001.html>

From gdal at stripfamily.net  Tue Oct  8 07:06:52 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 08 Oct 2013 08:06:52 -0600
Subject: [gdal-dev] Does 64 bit gdal support deflate compression in geotiffs?
Message-ID: <5254117C.9070508@stripfamily.net>

The new 64 bit release of qgis (2.0.1 Dufur) fails when trying to load
deflate compressed geotiffs. Further testing reveals that the bundled
gdal utilities suffer the same problem. The version lists as 1.10.0,
released 2013/04/24. No idea how it was built - this is a download of
the pre-compiled Win7 qgis release. Before digging any deeper, I thought
I'd ask if the 64bit version of gdal is supposed to support deflate. The
32 bit version does (that's how I compressed the files in the first place).

From gdal at stripfamily.net  Tue Oct  8 07:24:20 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 08 Oct 2013 08:24:20 -0600
Subject: [gdal-dev] Does 64 bit gdal support deflate compression in
	geotiffs?
In-Reply-To: <5254117C.9070508@stripfamily.net>
References: <5254117C.9070508@stripfamily.net>
Message-ID: <52541594.80009@stripfamily.net>

sorry for wasting everyone's time. I just realized I could download the
pre-built version from gisinternals and test against that. And the
answer is yes, deflate is supported in the latest release build.


From even.rouault at mines-paris.org  Tue Oct  8 07:26:04 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 08 Oct 2013 16:26:04 +0200
Subject: [gdal-dev] Does 64 bit gdal support deflate compression in
	geotiffs?
In-Reply-To: <5254117C.9070508@stripfamily.net>
References: <5254117C.9070508@stripfamily.net>
Message-ID: <1381242364.525415fcc2eb9@imp.free.fr>

Selon David Strip <gdal at stripfamily.net>:

> The new 64 bit release of qgis (2.0.1 Dufur) fails when trying to load
> deflate compressed geotiffs. Further testing reveals that the bundled
> gdal utilities suffer the same problem. The version lists as 1.10.0,
> released 2013/04/24. No idea how it was built - this is a download of
> the pre-compiled Win7 qgis release. Before digging any deeper, I thought
> I'd ask if the 64bit version of gdal is supposed to support deflate. The
> 32 bit version does (that's how I compressed the files in the first place).

David,

http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py has a test
"tiff_write_6" that generates a deflate compressed geotiff and reads it, and it
passes on the gisinternals binaries, including 64 bit builds ( e.g.
http://gisinternals.com/sdk/BuildLog.aspx?id=vc8x64-dev ), and I'm pretty sure
that there are quite a lof of places elsewhere in the autotest suite where
deflate compression is used, so it might indeed be an issue with the particular
build (OSGeo4W-64 ?) used by QGIS. Or perhaps you are triggering a particular
issue not triggered by the autotest suite...

You could try downloading
http://download.osgeo.org/gdal/1.10.0/gdalautotest-1.10.0.zip and check it
gcore/tiff_write.py and gcore/tiff_read.py pass.

Even




From refriguy68 at yahoo.com  Tue Oct  8 10:09:05 2013
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Tue, 8 Oct 2013 10:09:05 -0700 (PDT)
Subject: [gdal-dev] GDAL and GeoPDF with Poppler (Couple issues)
In-Reply-To: <201310080050.47846.even.rouault@mines-paris.org>
References: <1381184805.84698.YahooMailNeo@web164702.mail.gq1.yahoo.com>
	<201310080050.47846.even.rouault@mines-paris.org>
Message-ID: <1381252145.87483.YahooMailNeo@web164705.mail.gq1.yahoo.com>

Thanks Even,

>One thing to remind is that some layers are turned off by default in PDF. So 
>defining GDAL_PDF_LAYERS_OFF "Grids" will turn off "grids", but will let layers 
>that defaulted to OFF as OFF. So if you want all layers but "Grids", you need 
>to specify --config GDAL_PDF_LAYERS "ALL" as well. When both are defined, 
>GDAL_PDF_LAYERS_OFF will override GDAL_PDF_LAYERS.


That logic makes sense to me...I will have to say as I integrated to the newer version of Poppler I noticed that for the command:

> $ gdal_translate.exe c:\world.pdf out.tif --config GDAL_PDF_LAYERS "ALL" --config GDAL_PDF_LAYERS_OFF "Grids"
I had success generating the proper image for Poppler v0.24.2 (latest release), but when I used "KDE for Windows" poppler build v0.22.3 I am not able to reproduce the same output.? Rather, many layers were missing.? Nothing was changed to the PDF file used on both execution.

Has anyone else experienced this issue?? I would like to assist in verifying functionality of this feature.? What can I do to help out?

Robert




________________________________
 From: Even Rouault <even.rouault at mines-paris.org>
To: gdal-dev at lists.osgeo.org; Robert Zermeno <refriguy68 at yahoo.com> 
Sent: Monday, October 7, 2013 3:50 PM
Subject: Re: [gdal-dev] GDAL and GeoPDF with Poppler (Couple issues)
 

Le mardi 08 octobre 2013 00:26:45, Robert Zermeno a ?crit :
> Ladies/Gents,
> 
> I have been using GeoPDF capability with 0.16.3 for a while and enjoy the
> capabilities GDAL provides.? I have wanted to add the capability to turn
> Layers On/Off using the features provided.? Lets assume I have a file
> called world.pdf that contains more than 5 Layers with sub-layers.
> 
> Project Configuration:
> 
> GDAL_repos:? 9-28-2013
> Poppler:? ? ? ?  version 0.16.3
> OS:? ? ? ? ? ? ? Windows XP SP3
> Build:? ? ? ? ?  MSVC 2008
> 
> 
> Once built with the configuration above, I used the technique provided in
> the frmt_pdf.html page using gdal_translate.exe to turn off 1 Layer:
> 
> $ gdal_translate.exe c:\world.pdf out.tif --config GDAL_PDF_LAYERS_OFF
> "Grids"
> 
> I assume I used the proper request to only turn off "Grids" and allow all
> other LAYERS "On". The problem I get is when it executes more layers are
> turned "off" than the single layer specified.
> 
> Here are my issues:
> 
> 1. How do I request to output a file that turns off one or more Layers and
> keeps the others on?
> 2. According to the frmt_pdf.html, under the Configuration Options,
> GDAL_PDF_LAYERS and GDAL_PDF_LAYERS_OFF both state "When this option is
> specified, layers not explicitly listed will be turned off". 
> 
>?  I hope a quick copy & paste was performed... 

Yes copy & paste error. The comment "When this option is specified, layers not 
explicitly listed will be turned off" only applies to GDAL_PDF_LAYERS

One thing to remind is that some layers are turned off by default in PDF. So 
defining GDAL_PDF_LAYERS_OFF "Grids" will turn off "grids", but will let layers 
that defaulted to OFF as OFF. So if you want all layers but "Grids", you need 
to specify --config GDAL_PDF_LAYERS "ALL" as well. When both are defined, 
GDAL_PDF_LAYERS_OFF will override GDAL_PDF_LAYERS.

> 
> 3. When I executed gdal_translate.exefrom the request above, I got the
> following Error:
> 
> ERROR 1: Could not find a OCG with Ref (13:0)
> ERROR 1: Could not find a OCG with Ref (30:0)
> ...repeats with different Ref() numbers
> 
> ERROR 1: Could not find a OCG with Ref (153:0)
> 
> This is a known Poppler issue as you can see here:
> https://bugs.freedesktop.org/show_bug.cgi?id=39637
> 
> It states that the fix was added to Poppler version 0.17.2 >=
> If that is true, the documentation (frmt_pdf.html) should indicate that.? I
> do not know if that is why my generated file is not correct as I do not
> know what is effect by this recoverable error mentioned above.

This is likely but impossible to be sure without verifying.


> 
> 
> I have not added a ticket for GDAL before, where is the location I can add
> future bugs if they arise?

http://trac.osgeo.org/gdal/newticket

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131008/f99ed74d/attachment.html>

From gdal at geoworld.de  Tue Oct  8 12:04:15 2013
From: gdal at geoworld.de (Nicol Hermann)
Date: Tue, 08 Oct 2013 21:04:15 +0200
Subject: [gdal-dev] ogr2ogr overwrite parameter
Message-ID: <1381259055.3247.4.camel@travel>

Hello list,

I am trying to batch load GPX files from a directory into a mysql
database.
In order to avoid duplicates I am using the '-overwrite' layer create
option.
The following line throw the error message

ogr2ogr -overwrite -f MYSQL
'MYSQL:dbname,host=localhost,user=me,password=' ${file} -lco
GEOMETRY=AS_XYZ -lco engine=MYSIAM  -sql "SELECT name FROM tracks"

MySQL error message:The used table type doesn't support SPATIAL indexes
Description: ALTER TABLE `tracks` ADD SPATIAL INDEX(`SHAPE`)

although I have also specified the   
-lco engine=MYSIAM

parameter.
Any idea how to change the line to avoid this error?

If I am changing the parameter to '-append' the import works with the
downside to have duplicates in if I rerun the script.

Thanks 
Best regards
Nicol


From jukka.rahkonen at mmmtike.fi  Tue Oct  8 12:37:54 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 8 Oct 2013 19:37:54 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr overwrite parameter
References: <1381259055.3247.4.camel@travel>
Message-ID: <loom.20131008T213514-920@post.gmane.org>

Nicol Hermann <gdal <at> geoworld.de> writes:

> 
> Hello list,
> 
> I am trying to batch load GPX files from a directory into a mysql
> database.
> In order to avoid duplicates I am using the '-overwrite' layer create
> option.
> The following line throw the error message
> 
> ogr2ogr -overwrite -f MYSQL
> 'MYSQL:dbname,host=localhost,user=me,password=' ${file} -lco
> GEOMETRY=AS_XYZ -lco engine=MYSIAM  -sql "SELECT name FROM tracks"
> 
> MySQL error message:The used table type doesn't support SPATIAL indexes
> Description: ALTER TABLE `tracks` ADD SPATIAL INDEX(`SHAPE`)
> 
> although I have also specified the   
> -lco engine=MYSIAM
> 
> parameter.
> Any idea how to change the line to avoid this error?
> 
> If I am changing the parameter to '-append' the import works with the
> downside to have duplicates in if I rerun the script.

This is not exactly an answer to your question, but you -overwrite option
does not overwrite features on the layer but it overwrites the whole layer.
So if you manage you command to work otherwise, in the end you will have
only your last GPX file in the database. Use append instead and delete the
dublicates with SQL afterwards.

-Jukka Rahkonen-

> Thanks 
> Best regards
> Nicol
> 





From even.rouault at mines-paris.org  Tue Oct  8 13:05:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 8 Oct 2013 22:05:22 +0200
Subject: [gdal-dev] ogr2ogr overwrite parameter
In-Reply-To: <loom.20131008T213514-920@post.gmane.org>
References: <1381259055.3247.4.camel@travel>
	<loom.20131008T213514-920@post.gmane.org>
Message-ID: <201310082205.23365.even.rouault@mines-paris.org>

Le mardi 08 octobre 2013 21:37:54, Jukka Rahkonen a ?crit :
> Nicol Hermann <gdal <at> geoworld.de> writes:
> > Hello list,
> > 
> > I am trying to batch load GPX files from a directory into a mysql
> > database.
> > In order to avoid duplicates I am using the '-overwrite' layer create
> > option.
> > The following line throw the error message
> > 
> > ogr2ogr -overwrite -f MYSQL
> > 'MYSQL:dbname,host=localhost,user=me,password=' ${file} -lco
> > GEOMETRY=AS_XYZ -lco engine=MYSIAM  -sql "SELECT name FROM tracks"
> > 
> > MySQL error message:The used table type doesn't support SPATIAL indexes
> > Description: ALTER TABLE `tracks` ADD SPATIAL INDEX(`SHAPE`)
> > 
> > although I have also specified the
> > -lco engine=MYSIAM

This is a typo. Should be : -lco ENGINE=MyISAM

> > 
> > parameter.
> > Any idea how to change the line to avoid this error?
> > 
> > If I am changing the parameter to '-append' the import works with the
> > downside to have duplicates in if I rerun the script.
> 
> This is not exactly an answer to your question, but you -overwrite option
> does not overwrite features on the layer but it overwrites the whole layer.
> So if you manage you command to work otherwise, in the end you will have
> only your last GPX file in the database. Use append instead and delete the
> dublicates with SQL afterwards.

For append/update without creating duplicates into an existing target layer, 
you can try the 
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogrupdate.py script.

> 
> -Jukka Rahkonen-
> 
> > Thanks
> > Best regards
> > Nicol
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From gdal at geoworld.de  Tue Oct  8 13:10:10 2013
From: gdal at geoworld.de (Nicol Hermann)
Date: Tue, 08 Oct 2013 22:10:10 +0200
Subject: [gdal-dev] ogr2ogr overwrite parameter
In-Reply-To: <201310082205.23365.even.rouault@mines-paris.org>
References: <1381259055.3247.4.camel@travel>
	<loom.20131008T213514-920@post.gmane.org>
	<201310082205.23365.even.rouault@mines-paris.org>
Message-ID: <1381263010.3247.9.camel@travel>

Hi Even,

thanks a lot! That did the trick.

Best Nicol


Am Dienstag, den 08.10.2013, 22:05 +0200 schrieb Even Rouault:
> Le mardi 08 octobre 2013 21:37:54, Jukka Rahkonen a ?crit :
> > Nicol Hermann <gdal <at> geoworld.de> writes:
> > > Hello list,
> > > 
> > > I am trying to batch load GPX files from a directory into a mysql
> > > database.
> > > In order to avoid duplicates I am using the '-overwrite' layer create
> > > option.
> > > The following line throw the error message
> > > 
> > > ogr2ogr -overwrite -f MYSQL
> > > 'MYSQL:dbname,host=localhost,user=me,password=' ${file} -lco
> > > GEOMETRY=AS_XYZ -lco engine=MYSIAM  -sql "SELECT name FROM tracks"
> > > 
> > > MySQL error message:The used table type doesn't support SPATIAL indexes
> > > Description: ALTER TABLE `tracks` ADD SPATIAL INDEX(`SHAPE`)
> > > 
> > > although I have also specified the
> > > -lco engine=MYSIAM
> 
> This is a typo. Should be : -lco ENGINE=MyISAM
> 
> > > 
> > > parameter.
> > > Any idea how to change the line to avoid this error?
> > > 
> > > If I am changing the parameter to '-append' the import works with the
> > > downside to have duplicates in if I rerun the script.
> > 
> > This is not exactly an answer to your question, but you -overwrite option
> > does not overwrite features on the layer but it overwrites the whole layer.
> > So if you manage you command to work otherwise, in the end you will have
> > only your last GPX file in the database. Use append instead and delete the
> > dublicates with SQL afterwards.
> 
> For append/update without creating duplicates into an existing target layer, 
> you can try the 
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogrupdate.py script.
> 
> > 
> > -Jukka Rahkonen-
> > 
> > > Thanks
> > > Best regards
> > > Nicol
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 



From wparrott at nltinc.com.au  Tue Oct  8 19:44:58 2013
From: wparrott at nltinc.com.au (Wayne Parrott)
Date: Wed, 9 Oct 2013 12:44:58 +1000
Subject: [gdal-dev] Transformation of style data
Message-ID: <5B707CAD-5B83-4130-8DC0-08316AA675F9@nltinc.com.au>

Hi There,
I have been using GDAL/OGR in a project and it is going quite well.
I have been reprojecting data from various source formats into a single CRS (using the C# bindings), but one issue I have come across is with the associated OGR style information.

Most of the font sizes in the source documents are stored in "map ground units", so if I just copy the OGR style directly the text size will be scaled up or down depending on the differences in the map units.

So my question is, what is the best way of converting the map ground units in the style specification from one CRS to another?

Many thanks for any help you can provide,
Wayne

From victor.fomin.1 at gmail.com  Wed Oct  9 00:42:26 2013
From: victor.fomin.1 at gmail.com (victor fomin)
Date: Wed, 9 Oct 2013 09:42:26 +0200
Subject: [gdal-dev] Problem with 4 bands Jpeg2000 files using GDAL + Erdas
	ECW4.3 Read-only
Message-ID: <CA+ynR03kPBv5ZzQxffdRbhZ5m9KzzWLx=EW=-p6i0G_Ct=VArQ@mail.gmail.com>

Dear gdal-developers,

I noticed a strange behaviour while reading Pleaides Jpeg2000 4 bands EO
products using overviews. I use GDAL 1.10.1 with Erdas ECW4.3 to support
jpeg2000 files. The following code

GDALDataset * dataset = static_cast<GDALDataset *>(GDALOpen(inputFilename,
GA_ReadOnly));

< Image has : 4 bands, and WxH : 10296, 6573>
< Image DataType : GDT_UInt16>
<define parameters : offset={0,0}, desiredNbOfSamples=167424,
data.width=500, data.height=400>

// Just get and show twice the same data :
for (int index = 0; index < 2; index++)
{
int pixelSizeInBytes = nbBands * 8;
int rowSizeInBytes = pixelSizeInBytes * data.width;
for (int band=1;band<=nbBands;band++)

{

     GDALRasterBand* rasterBand = dataset->GetRasterBand(band)->
GetRasterSampleOverview(desiredNbOfSamples);
     rasterBand->RasterIO( GF_Read, offset[0], offset[1], data.width, data.
height,
                              data.buffer + 8*(band - 1), data.width, data.
height, GDT_Float64, pixelSizeInBytes, rowSizeInBytes );
}
showData(data);

}
GDALClose(dataset);

The result of the code is intended to show twice the same data, however the
result is that the first shown image is correct and the second image is
horizontally distorted (compressed) as 1/4 of the good width.
Could anyone, please explain me whether I missed something ?

Cheers,
Victor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131009/16559470/attachment.html>

From magi.forums at gmail.com  Wed Oct  9 03:59:03 2013
From: magi.forums at gmail.com (fargalaxy1)
Date: Wed, 9 Oct 2013 03:59:03 -0700 (PDT)
Subject: [gdal-dev] Create a vrt accounting for multiple raster bands
Message-ID: <1381316343621-5082573.post@n6.nabble.com>

Hi,

if i do

/gdal_translate -of VRT -gcp 447.0 419.0 764294.728 905306.256 -gcp 447.0
931.0 764294.728 904999.056 -gcp 447.0 1442.0 764294.728 904691.856 -gcp
448.0 1952.0 764294.728 904384.656 -gcp 448.0 2463.0 764294.728 904077.456 
input_rgb.tif input_rgb.vrt
/
the output  /input_rgb.vrt/ will have just one VRTRasterBand block, even if
the input tif is in rgb.

/ <VRTRasterBand dataType="Byte" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="0">input_rgb.tif</SourceFilename>
      <SourceBand>*1*</SourceBand>
      [....]
    </SimpleSource>
  </VRTRasterBand>
/
but I need to have this block repeated for each band:

/ <VRTRasterBand dataType="Byte" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="0">input_rgb.tif</SourceFilename>
      <SourceBand>*1*</SourceBand>
      [....]
    </SimpleSource>
  </VRTRasterBand>

 <VRTRasterBand dataType="Byte" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="0">input_rgb.tif</SourceFilename>
      <SourceBand>*2*</SourceBand>
      [....]
    </SimpleSource>
  </VRTRasterBand>
 <VRTRasterBand dataType="Byte" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename relativeToVRT="0">input_rgb.tif</SourceFilename>
      <SourceBand>*3*</SourceBand>
      [....]
    </SimpleSource>
  </VRTRasterBand>
/
How can I modify the /gdal_translate -of VRT/ [...]  command line to add in
the vrt a VRTRasterBand block for each band?

thank you for your help,

M.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Create-a-vrt-accounting-for-multiple-raster-bands-tp5082573.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Wed Oct  9 04:16:13 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 9 Oct 2013 11:16:13 +0000 (UTC)
Subject: [gdal-dev] Create a vrt accounting for multiple raster bands
References: <1381316343621-5082573.post@n6.nabble.com>
Message-ID: <loom.20131009T131109-318@post.gmane.org>

fargalaxy1 <magi.forums <at> gmail.com> writes:

> How can I modify the /gdal_translate -of VRT/ [...]  command line to add in
> the vrt a VRTRasterBand block for each band?
> 

Hi,

Works for me with GDAL 1.10 on Windows.
Are you sure that your input file is RGB and not for for example with a
palette? What do you see if you do

gdalinfo input_rgb.tif

-Jukka Rahkonen-






From even.rouault at mines-paris.org  Wed Oct  9 06:19:26 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Oct 2013 15:19:26 +0200
Subject: [gdal-dev] FileGDB format reverse-engineered
Message-ID: <201310091519.26191.even.rouault@mines-paris.org>

Hi,

If you are interested in FileGDB (ESRI File Geodatabase format), you might 
want to read my latest blog post :

http://erouault.blogspot.fr/2013/10/filegdb-format-reverse-engineered.html

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Oct  9 06:41:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Oct 2013 15:41:55 +0200
Subject: [gdal-dev] Problem with 4 bands Jpeg2000 files using GDAL +
	Erdas ECW4.3 Read-only
In-Reply-To: <CA+ynR03kPBv5ZzQxffdRbhZ5m9KzzWLx=EW=-p6i0G_Ct=VArQ@mail.gmail.com>
References: <CA+ynR03kPBv5ZzQxffdRbhZ5m9KzzWLx=EW=-p6i0G_Ct=VArQ@mail.gmail.com>
Message-ID: <201310091541.56413.even.rouault@mines-paris.org>

Le mercredi 09 octobre 2013 09:42:26, victor fomin a ?crit :
> Dear gdal-developers,
> 
> I noticed a strange behaviour while reading Pleaides Jpeg2000 4 bands EO
> products using overviews. I use GDAL 1.10.1 with Erdas ECW4.3 to support
> jpeg2000 files. The following code
> 
> GDALDataset * dataset = static_cast<GDALDataset *>(GDALOpen(inputFilename,
> GA_ReadOnly));
> 
> < Image has : 4 bands, and WxH : 10296, 6573>
> < Image DataType : GDT_UInt16>
> <define parameters : offset={0,0}, desiredNbOfSamples=167424,
> data.width=500, data.height=400>
> 
> // Just get and show twice the same data :
> for (int index = 0; index < 2; index++)
> {
> int pixelSizeInBytes = nbBands * 8;
> int rowSizeInBytes = pixelSizeInBytes * data.width;
> for (int band=1;band<=nbBands;band++)
> 
> {
> 
>      GDALRasterBand* rasterBand = dataset->GetRasterBand(band)->
> GetRasterSampleOverview(desiredNbOfSamples);
>      rasterBand->RasterIO( GF_Read, offset[0], offset[1], data.width, data.
> height,
>                               data.buffer + 8*(band - 1), data.width, data.
> height, GDT_Float64, pixelSizeInBytes, rowSizeInBytes );
> }
> showData(data);
> 
> }
> GDALClose(dataset);
> 
> The result of the code is intended to show twice the same data, however the
> result is that the first shown image is correct and the second image is
> horizontally distorted (compressed) as 1/4 of the good width.
> Could anyone, please explain me whether I missed something ?

Victor,

I don't see at first anything obviously wrong in your code snippet, but there's 
still an odd thing, the fact that you use GetRasterSampleOverview(). If you do 
so, it is a bit difficult to guess the correct source window. Using RasterIO() 
on the base band and expressing the source window and output buffer size might 
be more natural, and RasterIO() will select the appropriate overview level. 
But that shouldn't really explain the phenomenon you see.

If you believe there's an issue in GDAL, I'd encourage you reducing your test 
case to an antonomous and minimal code snippet (i.e. that can be compiled 
standalone), and that doesn't use showData() but just compares with memcmp() 
the content of the buffers from the 2 loops.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Oct  9 06:45:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Oct 2013 15:45:16 +0200
Subject: [gdal-dev] Transformation of style data
In-Reply-To: <5B707CAD-5B83-4130-8DC0-08316AA675F9@nltinc.com.au>
References: <5B707CAD-5B83-4130-8DC0-08316AA675F9@nltinc.com.au>
Message-ID: <201310091545.16472.even.rouault@mines-paris.org>

Le mercredi 09 octobre 2013 04:44:58, Wayne Parrott a ?crit :
> Hi There,
> I have been using GDAL/OGR in a project and it is going quite well.
> I have been reprojecting data from various source formats into a single CRS
> (using the C# bindings), but one issue I have come across is with the
> associated OGR style information.
> 
> Most of the font sizes in the source documents are stored in "map ground
> units", so if I just copy the OGR style directly the text size will be
> scaled up or down depending on the differences in the map units.
> 
> So my question is, what is the best way of converting the map ground units
> in the style specification from one CRS to another?

There's indeed no such mechanism in OGR itself.

I guess this must be necessarily only if the units of the CRS are different, 
e.g. when converting from a geodetic (long/lat in degrees) CRS to a projected 
(most of the time in meters) CRS.

You can use 1 deegree ~= 111 120 meters

> 
> Many thanks for any help you can provide,
> Wayne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From victor.fomin.1 at gmail.com  Wed Oct  9 07:17:11 2013
From: victor.fomin.1 at gmail.com (victor fomin)
Date: Wed, 9 Oct 2013 16:17:11 +0200
Subject: [gdal-dev] Fwd: Problem with 4 bands Jpeg2000 files using GDAL +
 Erdas ECW4.3 Read-only
In-Reply-To: <CA+ynR02xwOSmDdox9xx9cvi7cyspb-5Gm0zDvoWeEKbMupD28A@mail.gmail.com>
References: <CA+ynR03kPBv5ZzQxffdRbhZ5m9KzzWLx=EW=-p6i0G_Ct=VArQ@mail.gmail.com>
	<201310091541.56413.even.rouault@mines-paris.org>
	<CA+ynR02xwOSmDdox9xx9cvi7cyspb-5Gm0zDvoWeEKbMupD28A@mail.gmail.com>
Message-ID: <CA+ynR019qT1pJicuv-nmKxV_NBHL8VashS-=eoX4pH1Lhd3vPg@mail.gmail.com>

Hello Even,

thank you for the reply. I attached a minimal test that compares as you
suggested to buffers.
When I use CPLSetConfigOption("ECW_CLEVER", "NO"); two buffers are equal.
When
CPLSetConfigOption("ECW_CLEVER", "YES"); two buffers are different. A 4
bands image can be donwloaded from this link :
http://www.astrium-geo.com/en/23-sample-imagery

I do not know if it is an issue in GDAL, however there is something strange
with the usage of sCachedMultiBandIO from ECWDataset.

Cheers,
Victor

PS : sorry for duplicate
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131009/98904192/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: min_test_main.cpp
Type: text/x-c++src
Size: 3477 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131009/98904192/attachment.cpp>

From federicojurio at suremptec.com.ar  Wed Oct  9 07:33:43 2013
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Wed, 9 Oct 2013 07:33:43 -0700 (PDT)
Subject: [gdal-dev] Buffer unit
Message-ID: <1381329223105-5082635.post@n6.nabble.com>

Dear all, I am using WGS84 (4326) and would like to buffer based on meters
and not degrees. I have two possible solutions

1) One minute of Latitude = 1852 Meters
So one degree = 60 * 1852 meters = 111,120 meters
2) Project the center to something in meters or feet. Buffer that point.
Project the resulting polygon in to WGS84.

The first one is the easy way and i'm sure that the accuracy isn't the best.
The second probable doesn't have the best performance.

Can someone please point me in the right direction?

Thanks in advance

Regards



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Buffer-unit-tp5082635.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ivan at sanchezortega.es  Wed Oct  9 07:51:12 2013
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez?= Ortega)
Date: Wed, 09 Oct 2013 16:51:12 +0200
Subject: [gdal-dev] Buffer unit
In-Reply-To: <1381329223105-5082635.post@n6.nabble.com>
References: <1381329223105-5082635.post@n6.nabble.com>
Message-ID: <2246271.nxarnULjCA@hiigara>

El Mi?rcoles, 9 de octubre de 2013 07:33:43 Federico Jurio escribi?:
> Dear all, I am using WGS84 (4326) and would like to buffer based on meters
> and not degrees. [...]
> Can someone please point me in the right direction?

If you have a working PostGIS instance, you can get your geometries as PostGIS 
geographies, then run st_buffer on them. PostGIS will take care of the dirty 
work of finding a more-or-less appropiate projection for buffering the 
geography.


> [buffering in degrees] is the easy way and i'm sure that the accuracy isn't 
> the best.
> [reprojecting] probably doesn't have the best performance.

This begs the question: What do you want to achieve? Accuracy, or performance?


Personally, if PostGIS geographies aren't available, I'd rather reproject 
whole geometries into WGS84 UTM (EPSG:326xx) depending on the centroid's 
longitude, then buffer, then project back into WGS84 lat-lon (EPSG:4326).


Best,
-- 
Iv?n S?nchez Ortega <ivan at sanchezortega.es>


From even.rouault at mines-paris.org  Wed Oct  9 08:33:52 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Oct 2013 17:33:52 +0200
Subject: [gdal-dev] Fwd: Problem with 4 bands Jpeg2000 files using GDAL
	+ Erdas ECW4.3 Read-only
In-Reply-To: <CA+ynR019qT1pJicuv-nmKxV_NBHL8VashS-=eoX4pH1Lhd3vPg@mail.gmail.com>
References: <CA+ynR03kPBv5ZzQxffdRbhZ5m9KzzWLx=EW=-p6i0G_Ct=VArQ@mail.gmail.com>
	<CA+ynR02xwOSmDdox9xx9cvi7cyspb-5Gm0zDvoWeEKbMupD28A@mail.gmail.com>
	<CA+ynR019qT1pJicuv-nmKxV_NBHL8VashS-=eoX4pH1Lhd3vPg@mail.gmail.com>
Message-ID: <201310091733.53109.even.rouault@mines-paris.org>

Le mercredi 09 octobre 2013 16:17:11, victor fomin a ?crit :
> Hello Even,
> 
> thank you for the reply. I attached a minimal test that compares as you
> suggested to buffers.
> When I use CPLSetConfigOption("ECW_CLEVER", "NO"); two buffers are equal.
> When
> CPLSetConfigOption("ECW_CLEVER", "YES"); two buffers are different. A 4
> bands image can be donwloaded from this link :
> http://www.astrium-geo.com/en/23-sample-imagery
> 
> I do not know if it is an issue in GDAL, however there is something strange
> with the usage of sCachedMultiBandIO from ECWDataset.

Problem confirmed and now fixed : see http://trac.osgeo.org/gdal/ticket/5262

In the meantime, ECW_CLEVER=NO can be used as a workaround.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Oct  9 12:57:29 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 9 Oct 2013 19:57:29 +0000 (UTC)
Subject: [gdal-dev] Buffer unit
References: <1381329223105-5082635.post@n6.nabble.com>
	<2246271.nxarnULjCA@hiigara>
Message-ID: <loom.20131009T213401-235@post.gmane.org>

Iv?n S?nchez Ortega <ivan <at> sanchezortega.es> writes:

> 
> El Mi?rcoles, 9 de octubre de 2013 07:33:43 Federico Jurio escribi?:
> > Dear all, I am using WGS84 (4326) and would like to buffer based on meters
> > and not degrees. [...]
> > Can someone please point me in the right direction?
> 
> If you have a working PostGIS instance, you can get your geometries as
PostGIS 
> geographies, then run st_buffer on them. PostGIS will take care of the dirty 
> work of finding a more-or-less appropiate projection for buffering the 
> geography.
> 
> > [buffering in degrees] is the easy way and i'm sure that the accuracy isn't 
> > the best.
> > [reprojecting] probably doesn't have the best performance.
> 
> This begs the question: What do you want to achieve? Accuracy, or performance?
> 
> Personally, if PostGIS geographies aren't available, I'd rather reproject 
> whole geometries into WGS84 UTM (EPSG:326xx) depending on the centroid's 
> longitude, then buffer, then project back into WGS84 lat-lon (EPSG:4326).
> 
> Best,

Hi,

How about using all that on-the-fly with the amazing OGR Spatialite dialect?
 
ogrinfo -dialect sqlite 
-sql "select  
transform(buffer(transform(geometry,26915),10000),4326) as geometry2
from states limit 4" states.shp

So, transform 4 features from the Geoserver demo shapefile "states.shp" from
EPSG:4326 into 26915, create 10000 metre buffer while in 26915 and transform
the buffered features back to EPSG:4326.

Try it, it's fast. If you think that there are too many vertices in the
result, add "SimplifyPreserveTopology" into SQL. Buffer can sometimes make
self-intersections into the resulting polygon but that's no problem either
because you can correct them in-th-fly by adding "MakeValid" into SQL. The
hardest part is to keep trac of all the paranthesis :)))))

-Jukka Rahkonen-

-Jukka Rahkonen-




From jaak at nutiteq.com  Thu Oct 10 03:16:42 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Thu, 10 Oct 2013 13:16:42 +0300
Subject: [gdal-dev] Buffer unit
In-Reply-To: <loom.20131009T213401-235@post.gmane.org>
References: <1381329223105-5082635.post@n6.nabble.com>
	<2246271.nxarnULjCA@hiigara>
	<loom.20131009T213401-235@post.gmane.org>
Message-ID: <519F89A6-6B88-43EE-B6D2-5381B4F4F5A1@nutiteq.com>


On 09.10.2013, at 22:57, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:

> Iv?n S?nchez Ortega <ivan <at> sanchezortega.es> writes:
> 
>> 
>> El Mi?rcoles, 9 de octubre de 2013 07:33:43 Federico Jurio escribi?:
>>> Dear all, I am using WGS84 (4326) and would like to buffer based on meters
>>> and not degrees. [...]
>>> Can someone please point me in the right direction?
>> 
>> If you have a working PostGIS instance, you can get your geometries as
> PostGIS 
>> geographies, then run st_buffer on them. PostGIS will take care of the dirty 
>> work of finding a more-or-less appropiate projection for buffering the 
>> geography.
>> 
>>> [buffering in degrees] is the easy way and i'm sure that the accuracy isn't 
>>> the best.
>>> [reprojecting] probably doesn't have the best performance.
>> 
>> This begs the question: What do you want to achieve? Accuracy, or performance?
>> 
>> Personally, if PostGIS geographies aren't available, I'd rather reproject 
>> whole geometries into WGS84 UTM (EPSG:326xx) depending on the centroid's 
>> longitude, then buffer, then project back into WGS84 lat-lon (EPSG:4326).
>> 
>> Best,
> 
> Hi,
> 
> How about using all that on-the-fly with the amazing OGR Spatialite dialect?
> 
> ogrinfo -dialect sqlite 
> -sql "select  
> transform(buffer(transform(geometry,26915),10000),4326) as geometry2
> from states limit 4" states.shp
> 
> So, transform 4 features from the Geoserver demo shapefile "states.shp" from
> EPSG:4326 into 26915, create 10000 metre buffer while in 26915 and transform
> the buffered features back to EPSG:4326.
> 
> Try it, it's fast. If you think that there are too many vertices in the
> result, add "SimplifyPreserveTopology" into SQL. Buffer can sometimes make
> self-intersections into the resulting polygon but that's no problem either
> because you can correct them in-th-fly by adding "MakeValid" into SQL. The
> hardest part is to keep trac of all the paranthesis :)))))

Isn't there really better solution than dual-transformation? The problem with this is that you need pick a projection wisely, and there is no global projection what you can use without having big distortions nearer to poles (in the case of Mercator for example. You need to use projection depending on particular location, and even then you would have transformation errors.

Root problem is that most JTS/GEOS, including buffer() implementations can do cartesian math only. Good solution would be to implement buffer function from latitude/longitude directly, say buffer(lat,lon,buffer_meters).  Any takers?

Jaak



From jukka.rahkonen at mmmtike.fi  Thu Oct 10 03:56:02 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 10 Oct 2013 10:56:02 +0000 (UTC)
Subject: [gdal-dev] Buffer unit
References: <1381329223105-5082635.post@n6.nabble.com>
	<2246271.nxarnULjCA@hiigara>
	<loom.20131009T213401-235@post.gmane.org>
	<519F89A6-6B88-43EE-B6D2-5381B4F4F5A1@nutiteq.com>
Message-ID: <loom.20131010T123153-928@post.gmane.org>

Jaak Laineste (Nutiteq <jaak <at> nutiteq.com> writes:

 
> Isn't there really better solution than dual-transformation? The problem
with this is that you need pick a
> projection wisely, and there is no global projection what you can use
without having big distortions
> nearer to poles (in the case of Mercator for example. You need to use
projection depending on particular
> location, and even then you would have transformation errors.
> 
> Root problem is that most JTS/GEOS, including buffer() implementations can
do cartesian math only. Good
> solution would be to implement buffer function from latitude/longitude
directly, say
> buffer(lat,lon,buffer_meters).  Any takers?

I do not understand much about these things and I mainly wanted to
demonstrate that what can be done in PostGIS is ofter possible to do without
PostGIS by using GDAL and the SQLite/Spatialite dialect.

I feel that first steps towards what Jaak wil have has been taken in PostGIS
with the LWGEOM function ST_Project 
http://postgis.net/docs/manual-2.1/ST_Project.html
The same function is also available in Spatialite 4.1
http://www.gaia-gis.it/gaia-sins/spatialite-sql-4.1.0.html and in GDAL
through OGR SQLite dialect.

What seems to be is missing is calculating the right azimuths for offsetting
vertices and smuggling the code inside the buffer function.

-Jukka Rahkonen-

> 
> Jaak
> 





From ivan at sanchezortega.es  Thu Oct 10 04:06:42 2013
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez?= Ortega)
Date: Thu, 10 Oct 2013 13:06:42 +0200
Subject: [gdal-dev] Buffer unit
In-Reply-To: <519F89A6-6B88-43EE-B6D2-5381B4F4F5A1@nutiteq.com>
References: <1381329223105-5082635.post@n6.nabble.com>
	<loom.20131009T213401-235@post.gmane.org>
	<519F89A6-6B88-43EE-B6D2-5381B4F4F5A1@nutiteq.com>
Message-ID: <4254490.SgRS4VPWVO@hiigara>

El Jueves, 10 de octubre de 2013 13:16:42 Jaak Laineste escribi?:
> Isn't there really better solution than dual-transformation? [...] Good 
> solution would be to implement buffer function from latitude/longitude 
> directly, say buffer(lat,lon,buffer_meters).  Any takers?

Actually, what you want is a buffer(lat, lon, degrees) algorithm that works on 
polar coordinates on a topological sphere/geoid (as opposed to cartesian 
coords on a plane).


But if PostGIS geography hasn't implemented that, my bet is that no one has. 
Yet.


Best,
-- 
Iv?n S?nchez Ortega <ivan at sanchezortega.es>


From jaak at nutiteq.com  Thu Oct 10 06:23:56 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Thu, 10 Oct 2013 16:23:56 +0300
Subject: [gdal-dev] Buffer unit
In-Reply-To: <4254490.SgRS4VPWVO@hiigara>
References: <1381329223105-5082635.post@n6.nabble.com>
	<loom.20131009T213401-235@post.gmane.org>
	<519F89A6-6B88-43EE-B6D2-5381B4F4F5A1@nutiteq.com>
	<4254490.SgRS4VPWVO@hiigara>
Message-ID: <424A659D-39AD-4308-BB2D-0AC62D14C182@nutiteq.com>


On 10.10.2013, at 14:06, Iv?n S?nchez Ortega <ivan at sanchezortega.es> wrote:

> El Jueves, 10 de octubre de 2013 13:16:42 Jaak Laineste escribi?:
>> Isn't there really better solution than dual-transformation? [...] Good 
>> solution would be to implement buffer function from latitude/longitude 
>> directly, say buffer(lat,lon,buffer_meters).  Any takers?
> 
> Actually, what you want is a buffer(lat, lon, degrees) algorithm that works on 
> polar coordinates on a topological sphere/geoid (as opposed to cartesian 
> coords on a plane).
> 
> 
> But if PostGIS geography hasn't implemented that, my bet is that no one has. 
> Yet.


You can calculate buffer around point quite easily with algorithm like http://williams.best.vwh.net/avform.htm#LL , but generic buffer implementation, for lines/polygons would be bigger tasks for sure. Spherical JTS would be nice :)

Jaak
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/ecfff126/attachment.html>

From drmamidi at rothwellgroup.com  Thu Oct 10 09:24:50 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Thu, 10 Oct 2013 10:24:50 -0600
Subject: [gdal-dev] OGRLayer.Intersection() question
Message-ID: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>

Hi list,

I have troubles with C# bindings of OGR. I was trying to perform
intersection on two feature classes (shape file formats) using
OSGeo.OGR.Layer.Intersection(), but have problems making it work. I keep
getting an error saying "AccessViolationException was unhandled. Attempted
to read or write protected memory. This is often an indication that other
memory is corrupt.

Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I tried
passing those parameters null as suggested by some in the forums but I keep
getting the error "Attempt to dereference null GDALProgressFunc". I am not
sure what that means.

And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc() and
new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
to dereference
null GDALProgressFunc, but still have error saying AccessViolationException
was unhandled. Attempted to read or write protected memory. This is often
an indication that other memory is corrupt.

Can someone please help me figure this out and let me know how to make use
of OSGeo.OGR.Layer.Intersection() in the right way with c# bindings. Thank
you.

Thanks,
Dheeraj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/009eea72/attachment.html>

From jgomezdans at gmail.com  Thu Oct 10 11:33:49 2013
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu, 10 Oct 2013 19:33:49 +0100
Subject: [gdal-dev] /vsicurl/ and gz files
Message-ID: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>

Hi,

I was wondering if it's possible to use /vsitar/ to have a peek in .gz
files, such as this one:
http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz

The file is a NetCDF, with 20 different layers. I was hoping to be able to
read the file in using /vsitar/ (actually, combining /vsicurl/ and
/vsitar/), but using e.g. /vsitar/GlobAlbedo.2004001.h17v04.nc.gz I get:

$ gdalinfo /vsitar/GlobAlbedo.2004129.h17v04.nc.gz
ERROR 4: `/vsitar/GlobAlbedo.2004129.h17v04.nc.gz' does not exist in the
file system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open '/vsitar/GlobAlbedo.2004129.h17v04.nc.gz'.
GDAL: In GDALDestroy - unloading GDAL shared library.

I also get failures when I try to open remote sample netcdf files using
/vsicurl/:

$ gdalinfo /vsicurl/
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc
VSICURL: GetFileSize(
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)=2949152
response_code=200
VSICURL: GetFileList(/vsicurl/
http://www.unidata.ucar.edu/software/netcdf/examples)
VSICURL: Downloading 0-16383 (
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)...
VSICURL: Got reponse_code=206
GDAL_netCDF:
=====
calling nc_open( /vsicurl/
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc )
ERROR 1: netcdf error #-33 : NetCDF: Not a valid ID .
at (netcdfdataset.cpp,~netCDFDataset,1446)

GDAL: GDALClose(/vsicurl/
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc,
this=0x1e2ca40)
gdalinfo failed - unable to open '/vsicurl/
http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc'.
GDAL: In GDALDestroy - unloading GDAL shared library.

Questions:
1.- Do gzipped files work with /vsitar/?
2.- Are remote/compressed netcdf files useable with GDAL?
3.- How do you select a particular layer if the answer to (2) is yes?

Thanks for your time!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/774f4805/attachment-0001.html>

From szekerest at gmail.com  Thu Oct 10 11:33:55 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 10 Oct 2013 20:33:55 +0200
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
Message-ID: <CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>

Dheeraj,

I don't think the OSGeo.OGR.Layer.Intersection supports progress
notification. You might probably have encountered a bug which should be
fixed. Do you have a sample code to reproduce this issue? I would
specifically interested in the actual geometries have been passed to the
function.

Best regards,

Tamas



2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>

> Hi list,
>
> I have troubles with C# bindings of OGR. I was trying to perform
> intersection on two feature classes (shape file formats) using
> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I keep
> getting an error saying "AccessViolationException was unhandled.
> Attempted to read or write protected memory. This is often an indication
> that other memory is corrupt.
>
> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I tried
> passing those parameters null as suggested by some in the forums but I
> keep getting the error "Attempt to dereference null GDALProgressFunc". I
> am not sure what that means.
>
> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc() and
> new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt to dereference
> null GDALProgressFunc, but still have error saying AccessViolationException
> was unhandled. Attempted to read or write protected memory. This is often
> an indication that other memory is corrupt.
>
> Can someone please help me figure this out and let me know how to make use
> of OSGeo.OGR.Layer.Intersection() in the right way with c# bindings.
> Thank you.
>
> Thanks,
> Dheeraj
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/bec53b5f/attachment.html>

From even.rouault at mines-paris.org  Thu Oct 10 11:58:25 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Oct 2013 20:58:25 +0200
Subject: [gdal-dev] /vsicurl/ and gz files
In-Reply-To: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
References: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
Message-ID: <201310102058.25853.even.rouault@mines-paris.org>

Le jeudi 10 octobre 2013 20:33:49, Jose Gomez-Dans a ?crit :
> Hi,
> 
> I was wondering if it's possible to use /vsitar/ to have a peek in .gz
> files, such as this one:
> http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001
> .h17v04.nc.gz

This is a gzip file, not a .tar.gz file, so you would have to use /vsigzip , and 
as it is a gzip file over http, you have to combine it with /vsicurl

The syntax would be :

gdalinfo 
/vsigzip//vsicurl/http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz

But... as netCDF library doesn't use GDAL I/O natively, you would also to use 
the vsipreload mechanism, available on Linux for the development version of 
GDAL. See http://lists.osgeo.org/pipermail/gdal-dev/2013-May/036324.html

export LD_PRELOAD=vsipreload.so
gdalinfo 
/vsigzip//vsicurl/http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz

Technically, this works, but as I've just tested, it will be very inefficient 
since the netCDF library asks, just after having detecting the netCDF 
signature from the first bytes, for the size of the netcdf file, and the only 
way to know the size of a gzipped file is to decompress it until its end, which 
means that /vsicurl will have to download it entirely...

All in all, in that case, you have no choice but downloading the whole file 
locally. The experience would perhaps be better (but I've not verified) if the 
file was in a zip archive, that contains the uncompressed size in the metadata.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Michael.Smith at erdc.dren.mil  Thu Oct 10 11:56:52 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 10 Oct 2013 18:56:52 +0000
Subject: [gdal-dev] [EXTERNAL]  /vsicurl/ and gz files
In-Reply-To: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
Message-ID: <CE7C7068.5F0B5%michael.smith@erdc.dren.mil>

Jose,

You can use /vsigzip/ with /vsicurl

Try

gdalinfo /vsigzip/vsicurl/http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz

Mike

--
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers

From: Jose Gomez-Dans <jgomezdans at gmail.com<mailto:jgomezdans at gmail.com>>
Date: Thursday, October 10, 2013 2:33 PM
To: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: [EXTERNAL] [gdal-dev] /vsicurl/ and gz files
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Hi,

I was wondering if it's possible to use /vsitar/ to have a peek in .gz files, such as this one: http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz

The file is a NetCDF, with 20 different layers. I was hoping to be able to read the file in using /vsitar/ (actually, combining /vsicurl/ and /vsitar/), but using e.g. /vsitar/GlobAlbedo.2004001.h17v04.nc.gz I get:

$ gdalinfo /vsitar/GlobAlbedo.2004129.h17v04.nc.gz
ERROR 4: `/vsitar/GlobAlbedo.2004129.h17v04.nc.gz' does not exist in the file system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open '/vsitar/GlobAlbedo.2004129.h17v04.nc.gz'.
GDAL: In GDALDestroy - unloading GDAL shared library.

I also get failures when I try to open remote sample netcdf files using /vsicurl/:

$ gdalinfo /vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc
VSICURL: GetFileSize(http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)=2949152  response_code=200
VSICURL: GetFileList(/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples)
VSICURL: Downloading 0-16383 (http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)...
VSICURL: Got reponse_code=206
GDAL_netCDF:
=====
calling nc_open( /vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc )
ERROR 1: netcdf error #-33 : NetCDF: Not a valid ID .
at (netcdfdataset.cpp,~netCDFDataset,1446)

GDAL: GDALClose(/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc, this=0x1e2ca40)
gdalinfo failed - unable to open '/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc'.
GDAL: In GDALDestroy - unloading GDAL shared library.

Questions:
1.- Do gzipped files work with /vsitar/?
2.- Are remote/compressed netcdf files useable with GDAL?
3.- How do you select a particular layer if the answer to (2) is yes?

Thanks for your time!
Jose

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/e7676fc7/attachment.html>

From drmamidi at rothwellgroup.com  Thu Oct 10 12:16:22 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Thu, 10 Oct 2013 13:16:22 -0600
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
	<CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
Message-ID: <CAAU4rM9eDiW-cXO3w26xUvy_KcihY4AA1AarivPrKM1TzmkhpQ@mail.gmail.com>

Hi Tamas,

Thanks for your response. In fact I don't require progress notification,
but I am not able to ignore those arguments (pass them as null). If I pass
them as null I get error "Attempt to dereference null GDALProgressFunc". If
I just pass those arguments initializing them they way I am doing below in
the sample code, I get  "Attempted to read or write protected memory. This
is often an indication that other memory is corrupt." error.

I am using Gdal 1.10 library.

Here is the sample code..

var spatialReference = new OSGeo.OSR.SpatialReference("");
spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84 +datum=WGS84
+no_defs");

var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");

DataSource dataSourceToIntersectOn =
driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
Layer layerToIntersectOn = dataSourceCookieCutter.GetLayerByIndex(0);

DataSource dataSourceToIntersect =
driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);

var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32", new
string[] { });
wkbGeometryType wkbGeometryType =
layerOriginal.GetLayerDefn().GetGeomType();
Layer intersectedLayer = intersectedShapeData.CreateLayer("intersection",
spatialReference, wkbGeometryType, new string[] { });

OSGeo.OGR.SWIGTYPE_p_void callback_data = new OSGeo.OGR.SWIGTYPE_p_void(new
IntPtr(5), false, layerToIntersect);

OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);

layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
it fails


The data that I am trying to intersect (shapefiles are attached).


Thanks,
Dheeraj





On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <szekerest at gmail.com>wrote:

> Dheeraj,
>
> I don't think the OSGeo.OGR.Layer.Intersection supports progress
> notification. You might probably have encountered a bug which should be
> fixed. Do you have a sample code to reproduce this issue? I would
> specifically interested in the actual geometries have been passed to the
> function.
>
> Best regards,
>
> Tamas
>
>
>
> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>
>> Hi list,
>>
>> I have troubles with C# bindings of OGR. I was trying to perform
>> intersection on two feature classes (shape file formats) using
>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I keep
>> getting an error saying "AccessViolationException was unhandled.
>> Attempted to read or write protected memory. This is often an indication
>> that other memory is corrupt.
>>
>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I tried
>> passing those parameters null as suggested by some in the forums but I
>> keep getting the error "Attempt to dereference null GDALProgressFunc". I
>> am not sure what that means.
>>
>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc() and
>> new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt to dereference
>> null GDALProgressFunc, but still have error saying AccessViolationException
>> was unhandled. Attempted to read or write protected memory. This is often
>> an indication that other memory is corrupt.
>>
>> Can someone please help me figure this out and let me know how to make
>> use of OSGeo.OGR.Layer.Intersection() in the right way with c# bindings.
>> Thank you.
>>
>> Thanks,
>> Dheeraj
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/c49d7178/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Shapefiles.zip
Type: application/zip
Size: 18268 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/c49d7178/attachment-0001.zip>

From drmamidi at rothwellgroup.com  Thu Oct 10 12:26:30 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Thu, 10 Oct 2013 13:26:30 -0600
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CAAU4rM9eDiW-cXO3w26xUvy_KcihY4AA1AarivPrKM1TzmkhpQ@mail.gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
	<CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
	<CAAU4rM9eDiW-cXO3w26xUvy_KcihY4AA1AarivPrKM1TzmkhpQ@mail.gmail.com>
Message-ID: <CAAU4rM-Nh47hfVjRo7S4HpNreSbouGqGjkixVqh-Gh-LTDozJw@mail.gmail.com>

Tamas,

Sorry the sample code had wrong data source names. Here is the corrected
sample code..


var spatialReference = new OSGeo.OSR.SpatialReference("");
spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84 +datum=WGS84
+no_defs");

var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");

DataSource dataSourceToIntersectOn =
driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
Layer layerToIntersectOn = dataSourceToIntersectOn.GetLayerByIndex(0);

DataSource dataSourceToIntersect =
driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
Layer layerToIntersect = dataSourceToIntersect.GetLayerByIndex(0);

var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32", new
string[] { });
wkbGeometryType wkbGeometryType =
layerOriginal.GetLayerDefn().GetGeomType();
Layer intersectedLayer = intersectedShapeData.CreateLayer("intersection",
spatialReference, wkbGeometryType, new string[] { });

OSGeo.OGR.SWIGTYPE_p_void callback_data = new OSGeo.OGR.SWIGTYPE_p_void(new
IntPtr(5), false, layerToIntersect);

OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);

layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
it fails


Thanks,
Dheeraj


On Thu, Oct 10, 2013 at 1:16 PM, Dheeraj Reddy Mamidi <
drmamidi at rothwellgroup.com> wrote:

> Hi Tamas,
>
> Thanks for your response. In fact I don't require progress notification,
> but I am not able to ignore those arguments (pass them as null). If I pass
> them as null I get error "Attempt to dereference null GDALProgressFunc". If
> I just pass those arguments initializing them they way I am doing below in
> the sample code, I get  "Attempted to read or write protected memory.
> This is often an indication that other memory is corrupt." error.
>
> I am using Gdal 1.10 library.
>
> Here is the sample code..
>
> var spatialReference = new OSGeo.OSR.SpatialReference("");
> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs");
>
> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>
> DataSource dataSourceToIntersectOn =
> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
> Layer layerToIntersectOn = dataSourceCookieCutter.GetLayerByIndex(0);
>
> DataSource dataSourceToIntersect =
> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
> Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);
>
> var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32", new
> string[] { });
> wkbGeometryType wkbGeometryType =
> layerOriginal.GetLayerDefn().GetGeomType();
> Layer intersectedLayer = intersectedShapeData.CreateLayer("intersection",
> spatialReference, wkbGeometryType, new string[] { });
>
> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>
> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>
> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
> string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
> it fails
>
>
> The data that I am trying to intersect (shapefiles are attached).
>
>
> Thanks,
> Dheeraj
>
>
>
>
>
> On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>
>> Dheeraj,
>>
>> I don't think the OSGeo.OGR.Layer.Intersection supports progress
>> notification. You might probably have encountered a bug which should be
>> fixed. Do you have a sample code to reproduce this issue? I would
>> specifically interested in the actual geometries have been passed to the
>> function.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>
>>> Hi list,
>>>
>>>  I have troubles with C# bindings of OGR. I was trying to perform
>>> intersection on two feature classes (shape file formats) using
>>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I
>>> keep getting an error saying "AccessViolationException was unhandled.
>>> Attempted to read or write protected memory. This is often an indication
>>> that other memory is corrupt.
>>>
>>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I tried
>>> passing those parameters null as suggested by some in the forums but I
>>> keep getting the error "Attempt to dereference null GDALProgressFunc".
>>> I am not sure what that means.
>>>
>>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc()
>>> and new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
>>> to dereference null GDALProgressFunc, but still have error saying AccessViolationException
>>> was unhandled. Attempted to read or write protected memory. This is often
>>> an indication that other memory is corrupt.
>>>
>>> Can someone please help me figure this out and let me know how to make
>>> use of OSGeo.OGR.Layer.Intersection() in the right way with c#
>>> bindings. Thank you.
>>>
>>> Thanks,
>>> Dheeraj
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>
> --
>
>


-- 
Dheeraj Reddy Mamidi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/d5099612/attachment.html>

From eadam at co.lincoln.or.us  Thu Oct 10 13:02:51 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu, 10 Oct 2013 13:02:51 -0700
Subject: [gdal-dev] [EXTERNAL] /vsicurl/ and gz files
In-Reply-To: <CE7C7068.5F0B5%michael.smith@erdc.dren.mil>
References: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
	<CE7C7068.5F0B5%michael.smith@erdc.dren.mil>
Message-ID: <CACqBkM8rZKmadc4BaO2w+__wrdUJtjEsoQeuLYRjRi+oxAKjMQ@mail.gmail.com>

There is also more info on the wiki,
http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip

Best Regards, Eli

On Thu, Oct 10, 2013 at 11:56 AM, Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil> wrote:
> Jose,
>
> You can use /vsigzip/ with /vsicurl
>
> Try
>
> gdalinfo
> /vsigzip/vsicurl/http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz
>
> Mike
>
> --
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
> From: Jose Gomez-Dans <jgomezdans at gmail.com>
> Date: Thursday, October 10, 2013 2:33 PM
> To: gdal-dev <gdal-dev at lists.osgeo.org>
> Subject: [EXTERNAL] [gdal-dev] /vsicurl/ and gz files
> Resent-From: Michael Smith <michael.smith at usace.army.mil>
>
> Hi,
>
> I was wondering if it's possible to use /vsitar/ to have a peek in .gz
> files, such as this one:
> http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001.h17v04.nc.gz
>
> The file is a NetCDF, with 20 different layers. I was hoping to be able to
> read the file in using /vsitar/ (actually, combining /vsicurl/ and
> /vsitar/), but using e.g. /vsitar/GlobAlbedo.2004001.h17v04.nc.gz I get:
>
> $ gdalinfo /vsitar/GlobAlbedo.2004129.h17v04.nc.gz
> ERROR 4: `/vsitar/GlobAlbedo.2004129.h17v04.nc.gz' does not exist in the
> file system,
> and is not recognised as a supported dataset name.
>
> gdalinfo failed - unable to open '/vsitar/GlobAlbedo.2004129.h17v04.nc.gz'.
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> I also get failures when I try to open remote sample netcdf files using
> /vsicurl/:
>
> $ gdalinfo
> /vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc
> VSICURL:
> GetFileSize(http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)=2949152
> response_code=200
> VSICURL:
> GetFileList(/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples)
> VSICURL: Downloading 0-16383
> (http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc)...
> VSICURL: Got reponse_code=206
> GDAL_netCDF:
> =====
> calling nc_open(
> /vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc
> )
> ERROR 1: netcdf error #-33 : NetCDF: Not a valid ID .
> at (netcdfdataset.cpp,~netCDFDataset,1446)
>
> GDAL:
> GDALClose(/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc,
> this=0x1e2ca40)
> gdalinfo failed - unable to open
> '/vsicurl/http://www.unidata.ucar.edu/software/netcdf/examples/tos_O1_2001-2002.nc'.
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> Questions:
> 1.- Do gzipped files work with /vsitar/?
> 2.- Are remote/compressed netcdf files useable with GDAL?
> 3.- How do you select a particular layer if the answer to (2) is yes?
>
> Thanks for your time!
> Jose
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Thu Oct 10 13:21:44 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 10 Oct 2013 22:21:44 +0200
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CAAU4rM-Nh47hfVjRo7S4HpNreSbouGqGjkixVqh-Gh-LTDozJw@mail.gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
	<CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
	<CAAU4rM9eDiW-cXO3w26xUvy_KcihY4AA1AarivPrKM1TzmkhpQ@mail.gmail.com>
	<CAAU4rM-Nh47hfVjRo7S4HpNreSbouGqGjkixVqh-Gh-LTDozJw@mail.gmail.com>
Message-ID: <CACALY+RKg-sJjH-G=cJR20mZkZdSJhe3bgSuYffkHwP8ztD+eg@mail.gmail.com>

Dheeraj,

I noticed you are talking about the layer level geometry functions, which
hasn't been updated in the C# bindings yet. I'll add the necessary
implementation shorly. Also added a ticket to track the changes:
http://trac.osgeo.org/gdal/ticket/5264

Best regards,

Tamas




2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>

> Tamas,
>
> Sorry the sample code had wrong data source names. Here is the corrected
> sample code..
>
>
> var spatialReference = new OSGeo.OSR.SpatialReference("");
> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs");
>
> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>
> DataSource dataSourceToIntersectOn =
> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
> Layer layerToIntersectOn = dataSourceToIntersectOn.GetLayerByIndex(0);
>
> DataSource dataSourceToIntersect =
> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
> Layer layerToIntersect = dataSourceToIntersect.GetLayerByIndex(0);
>
> var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32", new
> string[] { });
> wkbGeometryType wkbGeometryType =
> layerOriginal.GetLayerDefn().GetGeomType();
> Layer intersectedLayer = intersectedShapeData.CreateLayer("intersection",
> spatialReference, wkbGeometryType, new string[] { });
>
> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>
> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>
> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
> string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
> it fails
>
>
> Thanks,
> Dheeraj
>
>
> On Thu, Oct 10, 2013 at 1:16 PM, Dheeraj Reddy Mamidi <
> drmamidi at rothwellgroup.com> wrote:
>
>> Hi Tamas,
>>
>> Thanks for your response. In fact I don't require progress notification,
>> but I am not able to ignore those arguments (pass them as null). If I pass
>> them as null I get error "Attempt to dereference null GDALProgressFunc". If
>> I just pass those arguments initializing them they way I am doing below in
>> the sample code, I get  "Attempted to read or write protected memory.
>> This is often an indication that other memory is corrupt." error.
>>
>> I am using Gdal 1.10 library.
>>
>> Here is the sample code..
>>
>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84 +datum=WGS84
>> +no_defs");
>>
>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>
>> DataSource dataSourceToIntersectOn =
>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>> Layer layerToIntersectOn = dataSourceCookieCutter.GetLayerByIndex(0);
>>
>> DataSource dataSourceToIntersect =
>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>> Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);
>>
>> var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32",
>> new string[] { });
>> wkbGeometryType wkbGeometryType =
>> layerOriginal.GetLayerDefn().GetGeomType();
>> Layer intersectedLayer = intersectedShapeData.CreateLayer("intersection",
>> spatialReference, wkbGeometryType, new string[] { });
>>
>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>
>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>
>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
>> string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
>> it fails
>>
>>
>> The data that I am trying to intersect (shapefiles are attached).
>>
>>
>> Thanks,
>> Dheeraj
>>
>>
>>
>>
>>
>> On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>
>>> Dheeraj,
>>>
>>> I don't think the OSGeo.OGR.Layer.Intersection supports progress
>>> notification. You might probably have encountered a bug which should be
>>> fixed. Do you have a sample code to reproduce this issue? I would
>>> specifically interested in the actual geometries have been passed to the
>>> function.
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>>
>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>
>>>> Hi list,
>>>>
>>>>  I have troubles with C# bindings of OGR. I was trying to perform
>>>> intersection on two feature classes (shape file formats) using
>>>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I
>>>> keep getting an error saying "AccessViolationException was unhandled.
>>>> Attempted to read or write protected memory. This is often an indication
>>>> that other memory is corrupt.
>>>>
>>>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>>>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I
>>>> tried passing those parameters null as suggested by some in the forums butI keep getting the error "Attempt to dereference
>>>> null GDALProgressFunc". I am not sure what that means.
>>>>
>>>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc()
>>>> and new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
>>>> to dereference null GDALProgressFunc, but still have error saying AccessViolationException
>>>> was unhandled. Attempted to read or write protected memory. This is often
>>>> an indication that other memory is corrupt.
>>>>
>>>> Can someone please help me figure this out and let me know how to make
>>>> use of OSGeo.OGR.Layer.Intersection() in the right way with c#
>>>> bindings. Thank you.
>>>>
>>>> Thanks,
>>>> Dheeraj
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>>
>> --
>>
>>
>
>
> --
> Dheeraj Reddy Mamidi
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/965e8def/attachment-0001.html>

From markus.u.mueller at zoho.com  Thu Oct 10 17:25:07 2013
From: markus.u.mueller at zoho.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Thu, 10 Oct 2013 17:25:07 -0700
Subject: [gdal-dev] RAT for VRT
Message-ID: <141a4e70c41.-1570103426894934754.-7347767291030936609@zoho.com>

Dear listers,

I need support for Raster Attribute Tables (RAT) when using the GDAL virtual format (VRT). It seems that the current VRT driver does not support RATs. I would like to know if:
- I am correct on the above assumption?
- If I am, are there any plans to extend the VRT driver to support RATs?
- other people have the same problem and are interested in solving it.


I am aware that RAT support for VRT poses some challenges as VRT files only reference other files and don't include data itself. A virtual RAT is only easy to implement if all referenced tiles use the same RAT. In case the RATs were different, i.e. reduced to the rows that are needed for a specific tile, then a virtual RAT would have to be created out of all referenced RATs or (somehow like a cache) the virtual RAT would have to be created at the time of the creation of the VRT file and then stored alongside it.


Comments, feedbacks etc very much appreciated.




Cheers,


Markus



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131010/83504707/attachment.html>

From ari.jolma at gmail.com  Thu Oct 10 23:09:35 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri, 11 Oct 2013 09:09:35 +0300
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
	<CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
Message-ID: <5257961F.5010304@gmail.com>

On 10/10/2013 09:33 PM, Tamas Szekeres wrote:
> Dheeraj,
>
> I don't think the OSGeo.OGR.Layer.Intersection supports progress 
> notification. You might probably have encountered a bug which should 
> be fixed. Do you have a sample code to reproduce this issue? I would 
> specifically interested in the actual geometries have been passed to 
> the function.

Layer::Intersection supports progress notification but support in the 
Swig layer may not be complete. There is of course a possibility of a 
bug in the Layer::Intersection code too.

Ari

>
> Best regards,
>
> Tamas
>
>
>
> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com 
> <mailto:drmamidi at rothwellgroup.com>>
>
>     Hi list,
>
>     I have troubles with C# bindings of OGR. I was trying to perform
>     intersection on two feature classes (shape file formats) using
>     OSGeo.OGR.Layer.Intersection(), but have problems making it work.
>     I keep getting an error saying "AccessViolationException was
>     unhandled. Attempted to read or write protected memory. This is
>     often an indication that other memory is corrupt.
>
>     Is the above error something to do with
>     SWIGTYPE_p_GDALProgressFunc callback and OSGeo.OGR.SWIGTYPE_p_void
>     callback_data arguments? I tried passing those parameters null as
>     suggested by some in the forums butI keep getting the error
>     "Attempt to dereference null GDALProgressFunc". I am not sure what
>     that means.
>
>     And when I instantiate callback as new
>     SWIGTYPE_p_GDALProgressFunc() and new callback_data as new
>     SWIGTYPE_p_void(), I don't get error Attempt to dereference null
>     GDALProgressFunc, but still have error saying
>     AccessViolationException was unhandled. Attempted to read or write
>     protected memory. This is often an indication that other memory is
>     corrupt.
>
>     Can someone please help me figure this out and let me know how to
>     make use of OSGeo.OGR.Layer.Intersection() in the right way with
>     c# bindings. Thank you.
>
>     Thanks,
>     Dheeraj
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/15c79edb/attachment.html>

From szekerest at gmail.com  Thu Oct 10 23:32:15 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 11 Oct 2013 08:32:15 +0200
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <5257961F.5010304@gmail.com>
References: <CAAU4rM9k=VSdTO0E8JVuK11tdpEzGQXtHLJpf6Csg3jiQiWAXg@mail.gmail.com>
	<CACALY+RbbU4x3DKhy3UG_JLneZG9S=tjKAVVuU-RansoHEfa4w@mail.gmail.com>
	<5257961F.5010304@gmail.com>
Message-ID: <CACALY+SpY0b-aCd56C+o3yNg-5Pu410HdMFGU0CPqfwSZZNitw@mail.gmail.com>

2013/10/11 Ari Jolma <ari.jolma at gmail.com>

>
> Layer::Intersection supports progress notification but support in the Swig
> layer may not be complete. There is of course a possibility of a bug in the
> Layer::Intersection code too.
>
>

Already figured out :-) But it still also requires additional changes in
the C# bindings to make it working.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/d1b565ef/attachment.html>

From even.rouault at mines-paris.org  Fri Oct 11 01:51:34 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Oct 2013 10:51:34 +0200
Subject: [gdal-dev] RAT for VRT
In-Reply-To: <141a4e70c41.-1570103426894934754.-7347767291030936609@zoho.com>
References: <141a4e70c41.-1570103426894934754.-7347767291030936609@zoho.com>
Message-ID: <1381481494.5257bc16b55eb@imp.free.fr>

Markus,

>
> I need support for Raster Attribute Tables (RAT) when using the GDAL virtual
> format (VRT). It seems that the current VRT driver does not support RATs. I
> would like to know if:
> - I am correct on the above assumption?

Yes.

> - If I am, are there any plans to extend the VRT driver to support RATs?

There have been some related discussions in
http://trac.osgeo.org/gdal/ticket/4903 . But for large RAT, which was the
rationale for RFC 40, serializing RAT as XML in the VRT would be inappropriate.

> - other people have the same problem and are interested in solving it.
>
>
> I am aware that RAT support for VRT poses some challenges as VRT files only
> reference other files and don't include data itself.

PAM .aux.xml files already support serialized RAT, so technically RAT in VRT
would be possible for RAT of reasonnable sizes


> A virtual RAT is only
> easy to implement if all referenced tiles use the same RAT. In case the RATs
> were different, i.e. reduced to the rows that are needed for a specific tile,
> then a virtual RAT would have to be created out of all referenced RATs or
> (somehow like a cache) the virtual RAT would have to be created at the time
> of the creation of the VRT file and then stored alongside it.

RAT in the context of a mosaic of tiles is another story. For reference, for
color tables, gdalbuildvrt takes the color table of the first tile, and then
strictly checks that all the tiles have the same number of entries, and softly
warn if the entries are different (but this will likely result in ugly visual
result most of the time). Managing non identical RATs in the context of an
assembly of tiles is not going to be easier...

Best regards,

Even



From szekerest at gmail.com  Fri Oct 11 02:19:22 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 11 Oct 2013 11:19:22 +0200
Subject: [gdal-dev] OGRLayer.Intersection() question
Message-ID: <CACALY+Rb+nm7MD9a10hJwPHhrGsv6WJB-DTOOHVExwbQan+D7A@mail.gmail.com>

Dheeraj,

The issue is now fixed in trunk and branch-1-10 (check out the latest
sources)
I've also added a sample application for these methods:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs

Best regards,

Tamas



2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>

> Tamas,
>
> I appreciate you adding a ticket for this issue. Thanks. Is there any
> other option for me to use OGRLayer intersection with out C# bindings for
> now ?
>
>
> Thanks,
> Dheeraj
>
>
>
> On Thu, Oct 10, 2013 at 2:21 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>
>> Dheeraj,
>>
>> I noticed you are talking about the layer level geometry functions, which
>> hasn't been updated in the C# bindings yet. I'll add the necessary
>> implementation shorly. Also added a ticket to track the changes:
>> http://trac.osgeo.org/gdal/ticket/5264
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>>
>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>
>>> Tamas,
>>>
>>> Sorry the sample code had wrong data source names. Here is the corrected
>>> sample code..
>>>
>>>
>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>> +datum=WGS84 +no_defs");
>>>
>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>
>>> DataSource dataSourceToIntersectOn =
>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>> Layer layerToIntersectOn = dataSourceToIntersectOn.GetLayerByIndex(0);
>>>
>>> DataSource dataSourceToIntersect =
>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>> Layer layerToIntersect = dataSourceToIntersect.GetLayerByIndex(0);
>>>
>>> var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32",
>>> new string[] { });
>>> wkbGeometryType wkbGeometryType =
>>> layerOriginal.GetLayerDefn().GetGeomType();
>>> Layer intersectedLayer =
>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>> wkbGeometryType, new string[] { });
>>>
>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>
>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>
>>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
>>> string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
>>> it fails
>>>
>>>
>>> Thanks,
>>> Dheeraj
>>>
>>>
>>> On Thu, Oct 10, 2013 at 1:16 PM, Dheeraj Reddy Mamidi <
>>> drmamidi at rothwellgroup.com> wrote:
>>>
>>>> Hi Tamas,
>>>>
>>>> Thanks for your response. In fact I don't require progress
>>>> notification, but I am not able to ignore those arguments (pass them as
>>>> null). If I pass them as null I get error "Attempt to dereference null
>>>> GDALProgressFunc". If I just pass those arguments initializing them
>>>> they way I am doing below in the sample code, I get  "Attempted to
>>>> read or write protected memory. This is often an indication that other
>>>> memory is corrupt." error.
>>>>
>>>> I am using Gdal 1.10 library.
>>>>
>>>> Here is the sample code..
>>>>
>>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>>> +datum=WGS84 +no_defs");
>>>>
>>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>>
>>>> DataSource dataSourceToIntersectOn =
>>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>>> Layer layerToIntersectOn = dataSourceCookieCutter.GetLayerByIndex(0);
>>>>
>>>> DataSource dataSourceToIntersect =
>>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>>> Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);
>>>>
>>>> var intersectedShapeData = driver.CreateDataSource(@"C:\Temp\gdal_32",
>>>> new string[] { });
>>>> wkbGeometryType wkbGeometryType =
>>>> layerOriginal.GetLayerDefn().GetGeomType();
>>>> Layer intersectedLayer =
>>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>>> wkbGeometryType, new string[] { });
>>>>
>>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>>
>>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>>
>>>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer, new
>>>> string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line where
>>>> it fails
>>>>
>>>>
>>>> The data that I am trying to intersect (shapefiles are attached).
>>>>
>>>>
>>>> Thanks,
>>>> Dheeraj
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>>>
>>>>> Dheeraj,
>>>>>
>>>>> I don't think the OSGeo.OGR.Layer.Intersection supports progress
>>>>> notification. You might probably have encountered a bug which should be
>>>>> fixed. Do you have a sample code to reproduce this issue? I would
>>>>> specifically interested in the actual geometries have been passed to the
>>>>> function.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Tamas
>>>>>
>>>>>
>>>>>
>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>
>>>>>> Hi list,
>>>>>>
>>>>>>  I have troubles with C# bindings of OGR. I was trying to perform
>>>>>> intersection on two feature classes (shape file formats) using
>>>>>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I
>>>>>> keep getting an error saying "AccessViolationException was
>>>>>> unhandled. Attempted to read or write protected memory. This is often an
>>>>>> indication that other memory is corrupt.
>>>>>>
>>>>>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>>>>>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I
>>>>>> tried passing those parameters null as suggested by some in the forums butI keep getting the error "Attempt to dereference
>>>>>> null GDALProgressFunc". I am not sure what that means.
>>>>>>
>>>>>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc()
>>>>>> and new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
>>>>>> to dereference null GDALProgressFunc, but still have error saying AccessViolationException
>>>>>> was unhandled. Attempted to read or write protected memory. This is often
>>>>>> an indication that other memory is corrupt.
>>>>>>
>>>>>> Can someone please help me figure this out and let me know how to
>>>>>> make use of OSGeo.OGR.Layer.Intersection() in the right way with c#
>>>>>> bindings. Thank you.
>>>>>>
>>>>>> Thanks,
>>>>>> Dheeraj
>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>>
>>>>
>>>
>>>
>>> --
>>> Dheeraj Reddy Mamidi
>>>
>>>
>>
>
>
> --
> Dheeraj Reddy Mamidi
>
> Software Developer
> The Rothwell Group, L.P.
> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
> Phone: 713-952-5355 ext.30
> Web: www.rothwellgroup.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/5c56fad5/attachment-0001.html>

From jgomezdans at gmail.com  Fri Oct 11 06:13:48 2013
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Fri, 11 Oct 2013 14:13:48 +0100
Subject: [gdal-dev] /vsicurl/ and gz files
In-Reply-To: <201310102058.25853.even.rouault@mines-paris.org>
References: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
	<201310102058.25853.even.rouault@mines-paris.org>
Message-ID: <CAMWde5qWFym+fFJZtaTr6BCHkEhkD=0i+hj+0rboZ86=cE1wFw@mail.gmail.com>

Hello everyone,

On 10 October 2013 19:58, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le jeudi 10 octobre 2013 20:33:49, Jose Gomez-Dans a ?crit :
> > Hi,
> >
> > I was wondering if it's possible to use /vsitar/ to have a peek in .gz
> > files, such as this one:
> >
> http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001
> > .h17v04.nc.gz
>
> This is a gzip file, not a .tar.gz file, so you would have to use /vsigzip
> , and
> as it is a gzip file over http, you have to combine it with /vsicurl
>

I hadn't seen the /vsigzip/ option, but it's quite obvious! The /vsicurl/
limitation isn't important, I just thought it'd be a nice way to brag about
GDAL ;-) However, one problem still persists. While I can prod into the
decompressed file (e.g. after I have gunzipped it), the following command
still reports a problem, e.g:

$ gdalinfo /vsigzip/GlobAlbedo.2004001.h17v04.nc.gz
ERROR 1: netcdf error #-33 : NetCDF: Not a valid ID .
at (netcdfdataset.cpp,~netCDFDataset,1446)

gdalinfo failed - unable to open '/vsigzip/GlobAlbedo.2004001.h17v04.nc.gz'.

gdalinfo --version
GDAL 1.10.0, released 2013/04/24

$ gunzip GlobAlbedo.2004001.h17v04.nc.gz

$ gdalinfo GlobAlbedo.2004001.h17v04.nc.gz
ERROR 4: `GlobAlbedo.2004001.h17v04.nc.gz' does not exist in the file
system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open 'GlobAlbedo.2004001.h17v04.nc.gz'.

$ gdalinfo GlobAlbedo.2004001.h17v04.nc
Driver: netCDF/Network Common Data Format
Files: GlobAlbedo.2004001.h17v04.nc
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=CF-1.4
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"GlobAlbedo.2004001.h17v04.nc":DHR_VIS
  SUBDATASET_1_DESC=[1200x1200] DHR_VIS (32-bit floating-point)
[....]

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/ca4b71b3/attachment.html>

From kyle at pobox.com  Fri Oct 11 07:57:59 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 11 Oct 2013 08:57:59 -0600
Subject: [gdal-dev] /vsicurl/ and gz files
In-Reply-To: <CAMWde5qWFym+fFJZtaTr6BCHkEhkD=0i+hj+0rboZ86=cE1wFw@mail.gmail.com>
References: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
	<201310102058.25853.even.rouault@mines-paris.org>
	<CAMWde5qWFym+fFJZtaTr6BCHkEhkD=0i+hj+0rboZ86=cE1wFw@mail.gmail.com>
Message-ID: <CAJ0mEz1BGDkje=79FP8m5VpCOkMKDGxORweHCESzyLvAG3xd5g@mail.gmail.com>

On Fri, Oct 11, 2013 at 7:13 AM, Jose Gomez-Dans <jgomezdans at gmail.com> wrote:
> Hello everyone,
>
> On 10 October 2013 19:58, Even Rouault <even.rouault at mines-paris.org> wrote:
>
>> Le jeudi 10 octobre 2013 20:33:49, Jose Gomez-Dans a ?crit :
>> > Hi,
>> >
>> > I was wondering if it's possible to use /vsitar/ to have a peek in .gz
>> > files, such as this one:
>> >
>> > http://www.globalbedo.org/GlobAlbedo29/tiles/2004/h17v04/GlobAlbedo.2004001
>> > .h17v04.nc.gz
>>
>> This is a gzip file, not a .tar.gz file, so you would have to use /vsigzip
>> , and
>> as it is a gzip file over http, you have to combine it with /vsicurl
>
>
> I hadn't seen the /vsigzip/ option, but it's quite obvious! The /vsicurl/
> limitation isn't important, I just thought it'd be a nice way to brag about
> GDAL ;-) However, one problem still persists. While I can prod into the
> decompressed file (e.g. after I have gunzipped it), the following command
> still reports a problem, e.g:
>
> $ gdalinfo /vsigzip/GlobAlbedo.2004001.h17v04.nc.gz
> ERROR 1: netcdf error #-33 : NetCDF: Not a valid ID .
> at (netcdfdataset.cpp,~netCDFDataset,1446)
>
> gdalinfo failed - unable to open '/vsigzip/GlobAlbedo.2004001.h17v04.nc.gz'.
>
> gdalinfo --version
> GDAL 1.10.0, released 2013/04/24
>
> $ gunzip GlobAlbedo.2004001.h17v04.nc.gz
>
> $ gdalinfo GlobAlbedo.2004001.h17v04.nc.gz
> ERROR 4: `GlobAlbedo.2004001.h17v04.nc.gz' does not exist in the file
> system,
> and is not recognised as a supported dataset name.
>
> gdalinfo failed - unable to open 'GlobAlbedo.2004001.h17v04.nc.gz'.
>
> $ gdalinfo GlobAlbedo.2004001.h17v04.nc
> Driver: netCDF/Network Common Data Format
> Files: GlobAlbedo.2004001.h17v04.nc
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>   NC_GLOBAL#Conventions=CF-1.4
> Subdatasets:
>   SUBDATASET_1_NAME=NETCDF:"GlobAlbedo.2004001.h17v04.nc":DHR_VIS
>   SUBDATASET_1_DESC=[1200x1200] DHR_VIS (32-bit floating-point)
> [....]
>
> Thanks!
> Jose
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

As Even mentioned, the NetCDF driver doesn't use the VSI*L mechanism,
so you can't use /vsi*/ stuff with it unless you use
LD_PRELOAD=vsipreload.so, see above.

kss

-- 
Kyle

From xwh19910215 at 163.com  Fri Oct 11 07:53:42 2013
From: xwh19910215 at 163.com (=?GBK?B?0PvOsLrG?=)
Date: Fri, 11 Oct 2013 22:53:42 +0800 (CST)
Subject: [gdal-dev] how can I read new CEOS data if the origion GDAL api
 doesn't support
Message-ID: <21cacb9b.fc2e.141a802422e.Coremail.xwh19910215@163.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/d2225b13/attachment.html>

From jgomezdans at gmail.com  Fri Oct 11 08:54:51 2013
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Fri, 11 Oct 2013 16:54:51 +0100
Subject: [gdal-dev] /vsicurl/ and gz files
In-Reply-To: <CAJ0mEz1BGDkje=79FP8m5VpCOkMKDGxORweHCESzyLvAG3xd5g@mail.gmail.com>
References: <CAMWde5p601NPdewkFCdVuCA1cEDQ6Qvas9POJsDfzh6+3krLHg@mail.gmail.com>
	<201310102058.25853.even.rouault@mines-paris.org>
	<CAMWde5qWFym+fFJZtaTr6BCHkEhkD=0i+hj+0rboZ86=cE1wFw@mail.gmail.com>
	<CAJ0mEz1BGDkje=79FP8m5VpCOkMKDGxORweHCESzyLvAG3xd5g@mail.gmail.com>
Message-ID: <CAMWde5oCH3pi22isqPd5TuDN5eOLtfP_eAGcoHSYA3tY3fE8aA@mail.gmail.com>

On 11 October 2013 15:57, Kyle Shannon <kyle at pobox.com> wrote:
>
> As Even mentioned, the NetCDF driver doesn't use the VSI*L mechanism,
> so you can't use /vsi*/ stuff with it unless you use
> LD_PRELOAD=vsipreload.so, see above.
>


OK, sorry, I thought that only applied to the /vsicurl/ method. Thanks for
the explanation.

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/82011071/attachment.html>

From drmamidi at rothwellgroup.com  Fri Oct 11 14:24:33 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Fri, 11 Oct 2013 15:24:33 -0600
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CAAU4rM99gwE3JBvG4nN+P5RSXb-7wuTHg2UjNkD92SE=5x32cg@mail.gmail.com>
References: <CACALY+Rb+nm7MD9a10hJwPHhrGsv6WJB-DTOOHVExwbQan+D7A@mail.gmail.com>
	<CAAU4rM9P41BQY7NgpFO9J1VLxU=iGMaSqvpWpDh6rerLRWtqCA@mail.gmail.com>
	<CACALY+SYE8w6Lf+-3CJ1qd76BYP2BtY=tTYp9rHNDRaxqyRujw@mail.gmail.com>
	<CAAU4rM99gwE3JBvG4nN+P5RSXb-7wuTHg2UjNkD92SE=5x32cg@mail.gmail.com>
Message-ID: <CAAU4rM8W7sRrJv6jXbjNT3H-k87HO3ZrLHtxPfV8PxerKg+sgQ@mail.gmail.com>

Hi Tamas,

I was working with OsGeo.OGR.Layer.Intersection c# bindings and have
problems with setting string[] of options. The intersection of layers are
creating some invalid geometries to write in to intersected layer (Error is
thrown -  ApplicationException was unhandled - Attempt to write non-polygon
(GEOMETRYCOLLECTION) geometry to POLYGON type shapefile). I read the
documentation and saw options can be enabled like SKIP_FAILURES=YES  to
skip and continue if feature cannot be inserted, but setting option the way
I did below to skip still throws the above error.

string[] options = new string[] {"SKIP_FAILURES=YES"};
layerOriginal.Intersection(layerToIntersect, intersectedLayer, options,
 new Ogr.GDALProgressFuncDelegate(ProgressFunc), "Intersection");

Can you help me figure out how to set the options parameter to Intersection
method ? Thank you.


Thanks,
Dheeraj






On Fri, Oct 11, 2013 at 11:25 AM, Dheeraj Reddy Mamidi <
drmamidi at rothwellgroup.com> wrote:

> Tamas,
>
> You are right. Output shapefile cannot have mixed geometries in the same
> file. But two input shapefiles (layers) can be of different geometries
> types to perform operations like intersection.
>
>
> Thanks,
> Dhheraj
>
>
> On Fri, Oct 11, 2013 at 11:19 AM, Tamas Szekeres <szekerest at gmail.com>wrote:
>
>> You may probably leave this checking out, I 'm not sure about all aspects
>> of these functions. Actually the output file is a shapefile which doesn't
>> support mixed geometries in the same file.
>>
>> Tamas
>>
>>
>>
>>
>> 2013/10/11 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>
>>> Tamas,
>>>
>>> Thank you very much for fixing the issue so quickly! I really appreciate
>>> it. That really saved lot of time for me to figure out what was wrong.
>>>
>>> One thing that I would like to discuss is with regards to
>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs (sample
>>> application).
>>>
>>> Line 108:
>>>
>>> if (layer1.GetLayerDefn().GetGeomType() !=
>>> layer2.GetLayerDefn().GetGeomType())
>>>     {
>>>           Console.WriteLine("FAILURE: Geometry type doesn't match");
>>>           System.Environment.Exit(-1);
>>>     }
>>>
>>> In the above line where you check if geometry type of layer1 and layer2
>>> are equal, If not equal you say Geometry type do not match. I was wondering
>>> layer geometry types can be different (eg a polygon shapefile and polyline
>>> shapefile etc) to do intersection right ?
>>>
>>>
>>> Thanks,
>>> Dheeraj
>>>
>>>
>>>
>>>
>>>
>>> On Fri, Oct 11, 2013 at 3:19 AM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>>
>>>> Dheeraj,
>>>>
>>>> The issue is now fixed in trunk and branch-1-10 (check out the latest
>>>> sources)
>>>> I've also added a sample application for these methods:
>>>>
>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs
>>>>
>>>> Best regards,
>>>>
>>>> Tamas
>>>>
>>>>
>>>>
>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>
>>>>> Tamas,
>>>>>
>>>>> I appreciate you adding a ticket for this issue. Thanks. Is there any
>>>>> other option for me to use OGRLayer intersection with out C# bindings for
>>>>> now ?
>>>>>
>>>>>
>>>>> Thanks,
>>>>> Dheeraj
>>>>>
>>>>>
>>>>>
>>>>> On Thu, Oct 10, 2013 at 2:21 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>>>>
>>>>>> Dheeraj,
>>>>>>
>>>>>> I noticed you are talking about the layer level geometry functions,
>>>>>> which hasn't been updated in the C# bindings yet. I'll add the necessary
>>>>>> implementation shorly. Also added a ticket to track the changes:
>>>>>> http://trac.osgeo.org/gdal/ticket/5264
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Tamas
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>>
>>>>>>> Tamas,
>>>>>>>
>>>>>>> Sorry the sample code had wrong data source names. Here is the
>>>>>>> corrected sample code..
>>>>>>>
>>>>>>>
>>>>>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>>>>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>>>>>> +datum=WGS84 +no_defs");
>>>>>>>
>>>>>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>>>>>
>>>>>>> DataSource dataSourceToIntersectOn =
>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>>>>>> Layer
>>>>>>> layerToIntersectOn = dataSourceToIntersectOn.GetLayerByIndex(0);
>>>>>>>
>>>>>>> DataSource dataSourceToIntersect =
>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>>>>>> Layer layerToIntersect = dataSourceToIntersect.GetLayerByIndex(0);
>>>>>>>
>>>>>>> var intersectedShapeData =
>>>>>>> driver.CreateDataSource(@"C:\Temp\gdal_32", new string[] { });
>>>>>>> wkbGeometryType wkbGeometryType =
>>>>>>> layerOriginal.GetLayerDefn().GetGeomType();
>>>>>>> Layer intersectedLayer =
>>>>>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>>>>>> wkbGeometryType, new string[] { });
>>>>>>>
>>>>>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>>>>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>>>>>
>>>>>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>>>>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>>>>>
>>>>>>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer,
>>>>>>> new string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line
>>>>>>> where it fails
>>>>>>>
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Dheeraj
>>>>>>>
>>>>>>>
>>>>>>> On Thu, Oct 10, 2013 at 1:16 PM, Dheeraj Reddy Mamidi <
>>>>>>> drmamidi at rothwellgroup.com> wrote:
>>>>>>>
>>>>>>>> Hi Tamas,
>>>>>>>>
>>>>>>>> Thanks for your response. In fact I don't require progress
>>>>>>>> notification, but I am not able to ignore those arguments (pass them as
>>>>>>>> null). If I pass them as null I get error "Attempt to dereference
>>>>>>>> null GDALProgressFunc". If I just pass those arguments
>>>>>>>> initializing them they way I am doing below in the sample code, I get  "Attempted
>>>>>>>> to read or write protected memory. This is often an indication that other
>>>>>>>> memory is corrupt." error.
>>>>>>>>
>>>>>>>> I am using Gdal 1.10 library.
>>>>>>>>
>>>>>>>> Here is the sample code..
>>>>>>>>
>>>>>>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>>>>>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>>>>>>> +datum=WGS84 +no_defs");
>>>>>>>>
>>>>>>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>>>>>>
>>>>>>>> DataSource dataSourceToIntersectOn =
>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>>>>>>> Layer layerToIntersectOn =
>>>>>>>> dataSourceCookieCutter.GetLayerByIndex(0);
>>>>>>>>
>>>>>>>> DataSource dataSourceToIntersect =
>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>>>>>>> Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);
>>>>>>>>
>>>>>>>> var intersectedShapeData =
>>>>>>>> driver.CreateDataSource(@"C:\Temp\gdal_32", new string[] { });
>>>>>>>> wkbGeometryType wkbGeometryType =
>>>>>>>> layerOriginal.GetLayerDefn().GetGeomType();
>>>>>>>> Layer intersectedLayer =
>>>>>>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>>>>>>> wkbGeometryType, new string[] { });
>>>>>>>>
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>>>>>>
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>>>>>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>>>>>>
>>>>>>>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer,
>>>>>>>> new string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line
>>>>>>>> where it fails
>>>>>>>>
>>>>>>>>
>>>>>>>> The data that I am trying to intersect (shapefiles are attached).
>>>>>>>>
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> Dheeraj
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <
>>>>>>>> szekerest at gmail.com> wrote:
>>>>>>>>
>>>>>>>>> Dheeraj,
>>>>>>>>>
>>>>>>>>> I don't think the OSGeo.OGR.Layer.Intersection supports progress
>>>>>>>>> notification. You might probably have encountered a bug which should be
>>>>>>>>> fixed. Do you have a sample code to reproduce this issue? I would
>>>>>>>>> specifically interested in the actual geometries have been passed to the
>>>>>>>>> function.
>>>>>>>>>
>>>>>>>>> Best regards,
>>>>>>>>>
>>>>>>>>> Tamas
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>>>>>
>>>>>>>>>> Hi list,
>>>>>>>>>>
>>>>>>>>>>  I have troubles with C# bindings of OGR. I was trying to
>>>>>>>>>> perform intersection on two feature classes (shape file formats) using
>>>>>>>>>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I
>>>>>>>>>> keep getting an error saying "AccessViolationException was
>>>>>>>>>> unhandled. Attempted to read or write protected memory. This is often an
>>>>>>>>>> indication that other memory is corrupt.
>>>>>>>>>>
>>>>>>>>>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>>>>>>>>>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I
>>>>>>>>>> tried passing those parameters null as suggested by some in the forums butI keep getting the error "Attempt to dereference
>>>>>>>>>> null GDALProgressFunc". I am not sure what that means.
>>>>>>>>>>
>>>>>>>>>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc()
>>>>>>>>>> and new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
>>>>>>>>>> to dereference null GDALProgressFunc, but still have error
>>>>>>>>>> saying AccessViolationException was unhandled. Attempted to read
>>>>>>>>>> or write protected memory. This is often an indication that other memory is
>>>>>>>>>> corrupt.
>>>>>>>>>>
>>>>>>>>>> Can someone please help me figure this out and let me know how to
>>>>>>>>>> make use of OSGeo.OGR.Layer.Intersection() in the right way with
>>>>>>>>>> c# bindings. Thank you.
>>>>>>>>>>
>>>>>>>>>> Thanks,
>>>>>>>>>> Dheeraj
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> gdal-dev mailing list
>>>>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Dheeraj Reddy Mamidi
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Dheeraj Reddy Mamidi
>>>>>
>>>>> Software Developer
>>>>> The Rothwell Group, L.P.
>>>>> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
>>>>> Phone: 713-952-5355 ext.30
>>>>> Web: www.rothwellgroup.com
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Dheeraj Reddy Mamidi
>>>
>>> Software Developer
>>> The Rothwell Group, L.P.
>>> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
>>> Phone: 713-952-5355 ext.30
>>> Web: www.rothwellgroup.com
>>>
>>
>>
>
>
> --
> Dheeraj Reddy Mamidi
>
> Software Developer
> The Rothwell Group, L.P.
> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
> Phone: 713-952-5355 ext.30
> Web: www.rothwellgroup.com
>



-- 
Dheeraj Reddy Mamidi

Software Developer
The Rothwell Group, L.P.
Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
Phone: 713-952-5355 ext.30
Web: www.rothwellgroup.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131011/d5641191/attachment-0001.html>

From szekerest at gmail.com  Sat Oct 12 09:47:09 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 12 Oct 2013 18:47:09 +0200
Subject: [gdal-dev] OGRLayer.Intersection() question
In-Reply-To: <CAAU4rM8W7sRrJv6jXbjNT3H-k87HO3ZrLHtxPfV8PxerKg+sgQ@mail.gmail.com>
References: <CACALY+Rb+nm7MD9a10hJwPHhrGsv6WJB-DTOOHVExwbQan+D7A@mail.gmail.com>
	<CAAU4rM9P41BQY7NgpFO9J1VLxU=iGMaSqvpWpDh6rerLRWtqCA@mail.gmail.com>
	<CACALY+SYE8w6Lf+-3CJ1qd76BYP2BtY=tTYp9rHNDRaxqyRujw@mail.gmail.com>
	<CAAU4rM99gwE3JBvG4nN+P5RSXb-7wuTHg2UjNkD92SE=5x32cg@mail.gmail.com>
	<CAAU4rM8W7sRrJv6jXbjNT3H-k87HO3ZrLHtxPfV8PxerKg+sgQ@mail.gmail.com>
Message-ID: <CACALY+Rom7ZbrKrSR3f+WLHMXYhtO9f2LuNpU5YHpEMM8qKrtw@mail.gmail.com>

Setting the options parameter seems to be working for me (modified the sample
app<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs>to
allow this).
The issue you mentioned might be dedicated to the implementation of
Layer.Intersection
itself (I'm not too familiar in) and not to the c# interface. If you can
share sample source files to reproduce this, I might be able to provide
more specific details.

Tamas


2013/10/11 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>

> Hi Tamas,
>
> I was working with OsGeo.OGR.Layer.Intersection c# bindings and have
> problems with setting string[] of options. The intersection of layers are
> creating some invalid geometries to write in to intersected layer (Error is
> thrown -  ApplicationException was unhandled - Attempt to write non-polygon
> (GEOMETRYCOLLECTION) geometry to POLYGON type shapefile). I read the
> documentation and saw options can be enabled like SKIP_FAILURES=YES  to
> skip and continue if feature cannot be inserted, but setting option the
> way I did below to skip still throws the above error.
>
> string[] options = new string[] {"SKIP_FAILURES=YES"};
> layerOriginal.Intersection(layerToIntersect, intersectedLayer, options,
>  new Ogr.GDALProgressFuncDelegate(ProgressFunc), "Intersection");
>
> Can you help me figure out how to set the options parameter to
> Intersection method ? Thank you.
>
>
> Thanks,
> Dheeraj
>
>
>
>
>
>
> On Fri, Oct 11, 2013 at 11:25 AM, Dheeraj Reddy Mamidi <
> drmamidi at rothwellgroup.com> wrote:
>
>> Tamas,
>>
>> You are right. Output shapefile cannot have mixed geometries in the same
>> file. But two input shapefiles (layers) can be of different geometries
>> types to perform operations like intersection.
>>
>>
>> Thanks,
>> Dhheraj
>>
>>
>> On Fri, Oct 11, 2013 at 11:19 AM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>
>>> You may probably leave this checking out, I 'm not sure about all
>>> aspects of these functions. Actually the output file is a shapefile which
>>> doesn't support mixed geometries in the same file.
>>>
>>> Tamas
>>>
>>>
>>>
>>>
>>> 2013/10/11 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>
>>>> Tamas,
>>>>
>>>> Thank you very much for fixing the issue so quickly! I really
>>>> appreciate it. That really saved lot of time for me to figure out what was
>>>> wrong.
>>>>
>>>> One thing that I would like to discuss is with regards to
>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs (sample
>>>> application).
>>>>
>>>> Line 108:
>>>>
>>>> if (layer1.GetLayerDefn().GetGeomType() !=
>>>> layer2.GetLayerDefn().GetGeomType())
>>>>     {
>>>>           Console.WriteLine("FAILURE: Geometry type doesn't match");
>>>>           System.Environment.Exit(-1);
>>>>     }
>>>>
>>>> In the above line where you check if geometry type of layer1 and layer2
>>>> are equal, If not equal you say Geometry type do not match. I was wondering
>>>> layer geometry types can be different (eg a polygon shapefile and polyline
>>>> shapefile etc) to do intersection right ?
>>>>
>>>>
>>>> Thanks,
>>>> Dheeraj
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On Fri, Oct 11, 2013 at 3:19 AM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>>>
>>>>> Dheeraj,
>>>>>
>>>>> The issue is now fixed in trunk and branch-1-10 (check out the latest
>>>>> sources)
>>>>> I've also added a sample application for these methods:
>>>>>
>>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OGRLayerAlg.cs
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Tamas
>>>>>
>>>>>
>>>>>
>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>
>>>>>> Tamas,
>>>>>>
>>>>>> I appreciate you adding a ticket for this issue. Thanks. Is there any
>>>>>> other option for me to use OGRLayer intersection with out C# bindings for
>>>>>> now ?
>>>>>>
>>>>>>
>>>>>> Thanks,
>>>>>> Dheeraj
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Thu, Oct 10, 2013 at 2:21 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>>>>>>
>>>>>>> Dheeraj,
>>>>>>>
>>>>>>> I noticed you are talking about the layer level geometry functions,
>>>>>>> which hasn't been updated in the C# bindings yet. I'll add the necessary
>>>>>>> implementation shorly. Also added a ticket to track the changes:
>>>>>>> http://trac.osgeo.org/gdal/ticket/5264
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Tamas
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>>>
>>>>>>>> Tamas,
>>>>>>>>
>>>>>>>> Sorry the sample code had wrong data source names. Here is the
>>>>>>>> corrected sample code..
>>>>>>>>
>>>>>>>>
>>>>>>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>>>>>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>>>>>>> +datum=WGS84 +no_defs");
>>>>>>>>
>>>>>>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>>>>>>
>>>>>>>> DataSource dataSourceToIntersectOn =
>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>>>>>>> Layer
>>>>>>>> layerToIntersectOn = dataSourceToIntersectOn.GetLayerByIndex(0);
>>>>>>>>
>>>>>>>> DataSource dataSourceToIntersect =
>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>>>>>>> Layer layerToIntersect = dataSourceToIntersect.GetLayerByIndex(0);
>>>>>>>>
>>>>>>>> var intersectedShapeData =
>>>>>>>> driver.CreateDataSource(@"C:\Temp\gdal_32", new string[] { });
>>>>>>>> wkbGeometryType wkbGeometryType =
>>>>>>>> layerOriginal.GetLayerDefn().GetGeomType();
>>>>>>>> Layer intersectedLayer =
>>>>>>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>>>>>>> wkbGeometryType, new string[] { });
>>>>>>>>
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>>>>>>
>>>>>>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>>>>>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>>>>>>
>>>>>>>> layerToIntersect.Intersection(layerToIntersectOn, intersectedLayer,
>>>>>>>> new string[] { "SKIP_FAILURES=YES" }, callback, callback_data); // Line
>>>>>>>> where it fails
>>>>>>>>
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> Dheeraj
>>>>>>>>
>>>>>>>>
>>>>>>>> On Thu, Oct 10, 2013 at 1:16 PM, Dheeraj Reddy Mamidi <
>>>>>>>> drmamidi at rothwellgroup.com> wrote:
>>>>>>>>
>>>>>>>>> Hi Tamas,
>>>>>>>>>
>>>>>>>>> Thanks for your response. In fact I don't require progress
>>>>>>>>> notification, but I am not able to ignore those arguments (pass them as
>>>>>>>>> null). If I pass them as null I get error "Attempt to dereference
>>>>>>>>> null GDALProgressFunc". If I just pass those arguments
>>>>>>>>> initializing them they way I am doing below in the sample code, I get  "Attempted
>>>>>>>>> to read or write protected memory. This is often an indication that other
>>>>>>>>> memory is corrupt." error.
>>>>>>>>>
>>>>>>>>> I am using Gdal 1.10 library.
>>>>>>>>>
>>>>>>>>> Here is the sample code..
>>>>>>>>>
>>>>>>>>> var spatialReference = new OSGeo.OSR.SpatialReference("");
>>>>>>>>> spatialReference.ImportFromProj4("+proj=longlat +ellps=WGS84
>>>>>>>>> +datum=WGS84 +no_defs");
>>>>>>>>>
>>>>>>>>> var driver = OSGeo.OGR.Ogr.GetDriverByName("ESRI Shapefile");
>>>>>>>>>
>>>>>>>>> DataSource dataSourceToIntersectOn =
>>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polygon.shp", 0);
>>>>>>>>> Layer layerToIntersectOn =
>>>>>>>>> dataSourceCookieCutter.GetLayerByIndex(0);
>>>>>>>>>
>>>>>>>>> DataSource dataSourceToIntersect =
>>>>>>>>> driver.Open(@"C:\Temp\gdal_32\Polyline.shp", 0);
>>>>>>>>> Layer layerToIntersect = dataSourceOriginal.GetLayerByIndex(0);
>>>>>>>>>
>>>>>>>>> var intersectedShapeData =
>>>>>>>>> driver.CreateDataSource(@"C:\Temp\gdal_32", new string[] { });
>>>>>>>>> wkbGeometryType wkbGeometryType =
>>>>>>>>> layerOriginal.GetLayerDefn().GetGeomType();
>>>>>>>>> Layer intersectedLayer =
>>>>>>>>> intersectedShapeData.CreateLayer("intersection", spatialReference,
>>>>>>>>> wkbGeometryType, new string[] { });
>>>>>>>>>
>>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void callback_data = new
>>>>>>>>> OSGeo.OGR.SWIGTYPE_p_void(new IntPtr(5), false, layerToIntersect);
>>>>>>>>>
>>>>>>>>> OSGeo.OGR.SWIGTYPE_p_GDALProgressFunc callback = new
>>>>>>>>> SWIGTYPE_p_GDALProgressFunc(new IntPtr(5), false, layerToIntersect);
>>>>>>>>>
>>>>>>>>> layerToIntersect.Intersection(layerToIntersectOn,
>>>>>>>>> intersectedLayer, new string[] { "SKIP_FAILURES=YES" }, callback,
>>>>>>>>> callback_data); // Line where it fails
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> The data that I am trying to intersect (shapefiles are attached).
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> Dheeraj
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On Thu, Oct 10, 2013 at 12:33 PM, Tamas Szekeres <
>>>>>>>>> szekerest at gmail.com> wrote:
>>>>>>>>>
>>>>>>>>>> Dheeraj,
>>>>>>>>>>
>>>>>>>>>> I don't think the OSGeo.OGR.Layer.Intersection supports progress
>>>>>>>>>> notification. You might probably have encountered a bug which should be
>>>>>>>>>> fixed. Do you have a sample code to reproduce this issue? I would
>>>>>>>>>> specifically interested in the actual geometries have been passed to the
>>>>>>>>>> function.
>>>>>>>>>>
>>>>>>>>>> Best regards,
>>>>>>>>>>
>>>>>>>>>> Tamas
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> 2013/10/10 Dheeraj Reddy Mamidi <drmamidi at rothwellgroup.com>
>>>>>>>>>>
>>>>>>>>>>> Hi list,
>>>>>>>>>>>
>>>>>>>>>>>  I have troubles with C# bindings of OGR. I was trying to
>>>>>>>>>>> perform intersection on two feature classes (shape file formats) using
>>>>>>>>>>> OSGeo.OGR.Layer.Intersection(), but have problems making it work. I
>>>>>>>>>>> keep getting an error saying "AccessViolationException was
>>>>>>>>>>> unhandled. Attempted to read or write protected memory. This is often an
>>>>>>>>>>> indication that other memory is corrupt.
>>>>>>>>>>>
>>>>>>>>>>> Is the above error something to do with SWIGTYPE_p_GDALProgressFunc
>>>>>>>>>>> callback and OSGeo.OGR.SWIGTYPE_p_void callback_data arguments? I
>>>>>>>>>>> tried passing those parameters null as suggested by some in the forums butI keep getting the error "Attempt to dereference
>>>>>>>>>>> null GDALProgressFunc". I am not sure what that means.
>>>>>>>>>>>
>>>>>>>>>>> And when I instantiate callback as new SWIGTYPE_p_GDALProgressFunc()
>>>>>>>>>>> and new callback_data as new SWIGTYPE_p_void(), I don't get error Attempt
>>>>>>>>>>> to dereference null GDALProgressFunc, but still have error
>>>>>>>>>>> saying AccessViolationException was unhandled. Attempted to
>>>>>>>>>>> read or write protected memory. This is often an indication that other
>>>>>>>>>>> memory is corrupt.
>>>>>>>>>>>
>>>>>>>>>>> Can someone please help me figure this out and let me know how
>>>>>>>>>>> to make use of OSGeo.OGR.Layer.Intersection() in the right way
>>>>>>>>>>> with c# bindings. Thank you.
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> Dheeraj
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> _______________________________________________
>>>>>>>>>>> gdal-dev mailing list
>>>>>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> --
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Dheeraj Reddy Mamidi
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Dheeraj Reddy Mamidi
>>>>>>
>>>>>> Software Developer
>>>>>> The Rothwell Group, L.P.
>>>>>> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
>>>>>> Phone: 713-952-5355 ext.30
>>>>>> Web: www.rothwellgroup.com
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Dheeraj Reddy Mamidi
>>>>
>>>> Software Developer
>>>> The Rothwell Group, L.P.
>>>> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
>>>> Phone: 713-952-5355 ext.30
>>>> Web: www.rothwellgroup.com
>>>>
>>>
>>>
>>
>>
>> --
>> Dheeraj Reddy Mamidi
>>
>> Software Developer
>> The Rothwell Group, L.P.
>> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
>> Phone: 713-952-5355 ext.30
>> Web: www.rothwellgroup.com
>>
>
>
>
> --
> Dheeraj Reddy Mamidi
>
> Software Developer
> The Rothwell Group, L.P.
> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
> Phone: 713-952-5355 ext.30
> Web: www.rothwellgroup.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131012/7e4e1982/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Sun Oct 13 11:57:16 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 13 Oct 2013 18:57:16 +0000 (UTC)
Subject: [gdal-dev] Spatialite 4 and InitSpatialMetaData
Message-ID: <loom.20131013T204049-472@post.gmane.org>

Hi,

I noticed a huge difference in running either InitSpatialMetaData() or
InitSpatialMetaData(1) on a rather weak Windows 32-bit computer with
Spatialite version 4.1.1. The first variant took 18 minutes vs. 3 seconds
for the latter.

This must have to do with making either one big or thousands of small
transactions when populating the spatial_ref_sys table.
https://www.gaia-gis.it/gaia-sins/xmlBlob/spatialite-sql-latest.html.

I am not sure from which Spatialite version this setting is supported but it
might be worth checking how GDAL behaves. I think it should use
"InitSpatialMetaData(1)" if it is supported. Option is said to be less safe
than the default setting "transaction=false" but function is used when an
new database is created so there is no risk for corrupting data.

The speed of the function with default value is so awfully slow that it
feels like a bug in Spatialite.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sun Oct 13 12:44:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 13 Oct 2013 21:44:05 +0200
Subject: [gdal-dev] Spatialite 4 and InitSpatialMetaData
In-Reply-To: <loom.20131013T204049-472@post.gmane.org>
References: <loom.20131013T204049-472@post.gmane.org>
Message-ID: <201310132144.05309.even.rouault@mines-paris.org>

Le dimanche 13 octobre 2013 20:57:16, Jukka Rahkonen a ?crit :
> Hi,
> 
> I noticed a huge difference in running either InitSpatialMetaData() or
> InitSpatialMetaData(1) on a rather weak Windows 32-bit computer with
> Spatialite version 4.1.1. The first variant took 18 minutes vs. 3 seconds
> for the latter.
> 
> This must have to do with making either one big or thousands of small
> transactions when populating the spatial_ref_sys table.
> https://www.gaia-gis.it/gaia-sins/xmlBlob/spatialite-sql-latest.html.
> 
> I am not sure from which Spatialite version this setting is supported but
> it might be worth checking how GDAL behaves. I think it should use
> "InitSpatialMetaData(1)" if it is supported. Option is said to be less safe
> than the default setting "transaction=false" but function is used when an
> new database is created so there is no risk for corrupting data.
> 
> The speed of the function with default value is so awfully slow that it
> feels like a bug in Spatialite.

Jukka,

Yes, indeed this is very slow and I didn't have the patience to wait on my 
Linux PC too...

InitSpatialMetaData() in spatialite < 4.1 ran always inside a transaction, 
which could prevent it to be used in a context where the user would have 
wanted a transaction that cover more than that. So the default in spatialite 
>= 4.1 is NOT to run inside a transaction.

InitSpatialMetataData(1) in spatialite >= 4.1 is equivalent to 
InitSpatialMetaData() in older releases.

Fixed in trunk and branches/1.10 by http://trac.osgeo.org/gdal/ticket/5270

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Moses.Gone at t-systems.com  Mon Oct 14 02:00:18 2013
From: Moses.Gone at t-systems.com (Moses.Gone at t-systems.com)
Date: Mon, 14 Oct 2013 11:00:18 +0200
Subject: [gdal-dev] How to attach color tables to Tifs
Message-ID: <2D55B4FBCD59D045AC382D3F65435B79038423373CF6@HE101453.emea1.cds.t-internal.com>

Hallo List,
In my tiling application am generating tiles with Gtiff as an output format. One of my inputs is of AIG format, however these inputs types comes with specific color tables, see sample below:

   0 255 255 255  # No-Data
   1   0   0 210  # Gew?sser
   5   0   0 200  # Kl?rschlammbecken >> Wasser
  16 102 102 125  # Versiegelte Fl?che
  20 102 102 125  # Br?cken
  32 191 191   0  # Sand, Abbau
  33 191 191   0  # >> Sand, Abbau
  48 125  51   0  # Fels
  64 255 255   0  # Heide >> LaWi
  68 255 255   0  # Moor >> LaWi
  72 255 255   0  # Feuchtgebiete  >> LaWi
  80 255 255   0  # Landwirtschaft genutzte Fl?che
  96 224 255   0  # Mischung Wald/Feld, Park
 100 255 180   0  # Weinbau
 101   0   0   0  # Gew?chshaus
 102 140 255   0  # Obstbau
 112   0 125   0  # Wald, undifferenziert
 116  35 214   0  # Laubwald
 120   0 214  65  # Nadelwald
 176 255 100   0  # Vorstadt
 208 255  50   0  # Stadt, locker bebaut
 212 153 0  153   # Stadt, gro?e Einzelgeb?ude
 224 255   0   0  # Stadt, dicht bebaut
 240 153  0    0  # Stadt, extrem dicht bebaut, Innenst?dte
 241 153  0    0  # Stadt, extrem dicht bebaut, Industriefl?chen >> 240


Now, what is the best way to attach this color table to my output tifs? BTW, my tifs are 8-bit(1-band) I read somewhere that I have to first convert my tif to vrt, then manually update the <ColorTable> section with entries for each color, like this:

  <ColorTable>
      <Entry c1="238" c2="238" c3="238" />
      <Entry c1="237" c2="237" c3="237" />
      <Entry c1="236" c2="236" c3="236" />
      <Entry c1="229" c2="229" c3="229" />
    </ColorTable>

Is this the right approach? Besides, I would like to automate the whole workflow. Is there a script that I can use to automate this workflow?


Thanks and regards

Moses

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/db555ddc/attachment.html>

From even.rouault at mines-paris.org  Mon Oct 14 02:14:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 11:14:16 +0200
Subject: [gdal-dev] How to attach color tables to Tifs
In-Reply-To: <2D55B4FBCD59D045AC382D3F65435B79038423373CF6@HE101453.emea1.cds.t-internal.com>
References: <2D55B4FBCD59D045AC382D3F65435B79038423373CF6@HE101453.emea1.cds.t-internal.com>
Message-ID: <1381742056.525bb5e8ca53b@imp.free.fr>

Selon Moses.Gone at t-systems.com:

> Hallo List,
> In my tiling application am generating tiles with Gtiff as an output format.
> One of my inputs is of AIG format, however these inputs types comes with
> specific color tables, see sample below:
>
>    0 255 255 255  # No-Data
>    1   0   0 210  # Gew?sser
>    5   0   0 200  # Kl?rschlammbecken >> Wasser
>   16 102 102 125  # Versiegelte Fl?che
>   20 102 102 125  # Br?cken
>   32 191 191   0  # Sand, Abbau
>   33 191 191   0  # >> Sand, Abbau
>   48 125  51   0  # Fels
>   64 255 255   0  # Heide >> LaWi
>   68 255 255   0  # Moor >> LaWi
>   72 255 255   0  # Feuchtgebiete  >> LaWi
>   80 255 255   0  # Landwirtschaft genutzte Fl?che
>   96 224 255   0  # Mischung Wald/Feld, Park
>  100 255 180   0  # Weinbau
>  101   0   0   0  # Gew?chshaus
>  102 140 255   0  # Obstbau
>  112   0 125   0  # Wald, undifferenziert
>  116  35 214   0  # Laubwald
>  120   0 214  65  # Nadelwald
>  176 255 100   0  # Vorstadt
>  208 255  50   0  # Stadt, locker bebaut
>  212 153 0  153   # Stadt, gro?e Einzelgeb?ude
>  224 255   0   0  # Stadt, dicht bebaut
>  240 153  0    0  # Stadt, extrem dicht bebaut, Innenst?dte
>  241 153  0    0  # Stadt, extrem dicht bebaut, Industriefl?chen >> 240
>
>
> Now, what is the best way to attach this color table to my output tifs? BTW,
> my tifs are 8-bit(1-band) I read somewhere that I have to first convert my
> tif to vrt, then manually update the <ColorTable> section with entries for
> each color, like this:
>
>   <ColorTable>
>       <Entry c1="238" c2="238" c3="238" />
>       <Entry c1="237" c2="237" c3="237" />
>       <Entry c1="236" c2="236" c3="236" />
>       <Entry c1="229" c2="229" c3="229" />
>     </ColorTable>
>
> Is this the right approach? Besides, I would like to automate the whole
> workflow. Is there a script that I can use to automate this workflow?

That's an approach, but uou likely want to use the following script :

http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/attachpct.py

Even

From lauramail at iol.it  Mon Oct 14 01:54:59 2013
From: lauramail at iol.it (laura0)
Date: Mon, 14 Oct 2013 01:54:59 -0700 (PDT)
Subject: [gdal-dev] GDAL 1.10.1 requirements
Message-ID: <1381740899536-5083369.post@n6.nabble.com>

Hi all,
I would like to know which versions of netcdf, hdf4, hdf5 libraries are
supported by the new release of GDAL.
I tried for instance 4.1.1 netcdf library but, after ./configure, I see
"netcdf supported NO" .  So I think that version is too old. With the latest
versions (netcdf 4.3.0, hdf5 1.8.11 , hdf4 4.2.9 ) everything looks going
fine but processing an hdf5 dataset I got the following error:
HDF5-DIAG: Error detected in HDF5 (1.8.11) thread 0:
  #000: H5A.c line 557 in H5Aopen(): unable to load attribute info from
object header for attribute: 'PRODUCT_NAME'
    major: Attribute

I was able to open the same dataset instead with gdal 1.9 and library
versions: hdf5 1.8.9 , hdf4 4.2.8 , netcdf 4.2.1.1
Is it a problem of versions or something else?

Many thanks,
regards
Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-10-1-requirements-tp5083369.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schneider at occamlabs.de  Mon Oct 14 03:53:13 2013
From: schneider at occamlabs.de (Markus Schneider)
Date: Mon, 14 Oct 2013 12:53:13 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
Message-ID: <525BCD19.8090501@occamlabs.de>

Hi,

I am using GDAL (1.10.1) in a Java Servlet environment via JNI. I
observed that Dataset objects cannot be shared between threads, even if
they are not used in parallel, but strictly consecutively. For me, the
VM crashes if a thread uses a Dataset that it didn't create.

So somehow Dataset objects (on the Java or on the C side) seem to be
using ThreadLocal information.

Is this correct? Would it be hard to eliminate this behaviour (as it
would make pooling Dataset objects much easier and more efficient)?

Thanks for any pointers or remarks,
Markus

-- 
Markus Schneider
CEO

Occam Labs UG (haftungsbeschr?nkt)
Godesberger Allee 139
53175 Bonn, Germany

+49 228 93798874

http://www.occamlabs.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 263 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/4a405c5c/attachment.pgp>

From even.rouault at mines-paris.org  Mon Oct 14 04:10:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 13:10:13 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <525BCD19.8090501@occamlabs.de>
References: <525BCD19.8090501@occamlabs.de>
Message-ID: <1381749013.525bd1151ed04@imp.free.fr>

Hi Markus,

>
> I am using GDAL (1.10.1) in a Java Servlet environment via JNI. I
> observed that Dataset objects cannot be shared between threads, even if
> they are not used in parallel, but strictly consecutively. For me, the
> VM crashes if a thread uses a Dataset that it didn't create.
>
> So somehow Dataset objects (on the Java or on the C side) seem to be
> using ThreadLocal information.
>
> Is this correct?

This is surprising. Are you seeing that with a particular driver or all drivers
?

I don't see any use of TLS on the Java side. There might be some use of TLS
objects on the C side, for functions in cpl_path.cpp for example, but their use
should be limited to the lifetime of the execution of a particular function, so
that shouldn't cause problems in the scenario you describe.


> Would it be hard to eliminate this behaviour (as it
> would make pooling Dataset objects much easier and more efficient)?

Difficult to tell until we have understood what really happens...

Do you manage to reproduce that by running under Valgrind ? If so, that might
help understanding what is going wrong.

Even


From schneider at occamlabs.de  Mon Oct 14 04:16:49 2013
From: schneider at occamlabs.de (Markus Schneider)
Date: Mon, 14 Oct 2013 13:16:49 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <1381749013.525bd1151ed04@imp.free.fr>
References: <525BCD19.8090501@occamlabs.de>
	<1381749013.525bd1151ed04@imp.free.fr>
Message-ID: <525BD2A1.6030103@occamlabs.de>

Hi Even,

Am 14.10.2013 13:10, schrieb Even Rouault:
> This is surprising. Are you seeing that with a particular driver or all drivers
> ?

I am experiencing this with ECW driver.

> I don't see any use of TLS on the Java side. There might be some use of TLS
> objects on the C side, for functions in cpl_path.cpp for example, but their use
> should be limited to the lifetime of the execution of a particular function, so
> that shouldn't cause problems in the scenario you describe.

I will try to prepare a minimal example to reproduce the issue. I will
also check if it occurs with a GeoTIFF.

>> Would it be hard to eliminate this behaviour (as it
>> would make pooling Dataset objects much easier and more efficient)?
> 
> Difficult to tell until we have understood what really happens...
> 
> Do you manage to reproduce that by running under Valgrind ? If so, that might
> help understanding what is going wrong.

I never used Valgrind, but with some help, I may be able to check
behaviour and report.

Best regards,
Markus

-- 
Markus Schneider
CEO

Occam Labs UG (haftungsbeschr?nkt)
Godesberger Allee 139
53175 Bonn, Germany

+49 228 93798874

http://www.occamlabs.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 263 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/17730348/attachment.pgp>

From even.rouault at mines-paris.org  Mon Oct 14 04:26:17 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 13:26:17 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <525BD2A1.6030103@occamlabs.de>
References: <525BCD19.8090501@occamlabs.de>
	<1381749013.525bd1151ed04@imp.free.fr>
	<525BD2A1.6030103@occamlabs.de>
Message-ID: <1381749977.525bd4d9a60f7@imp.free.fr>

Selon Markus Schneider <schneider at occamlabs.de>:

> Hi Even,
>
> Am 14.10.2013 13:10, schrieb Even Rouault:
> > This is surprising. Are you seeing that with a particular driver or all
> drivers
> > ?
>
> I am experiencing this with ECW driver.

Ah, well, anything can happen within the beast then... Which SDK version : 3.3
or 5 ?

>
> > I don't see any use of TLS on the Java side. There might be some use of TLS
> > objects on the C side, for functions in cpl_path.cpp for example, but their
> use
> > should be limited to the lifetime of the execution of a particular
> function, so
> > that shouldn't cause problems in the scenario you describe.
>
> I will try to prepare a minimal example to reproduce the issue. I will
> also check if it occurs with a GeoTIFF.

Yes that's definnitely something to check.

>
> >> Would it be hard to eliminate this behaviour (as it
> >> would make pooling Dataset objects much easier and more efficient)?
> >
> > Difficult to tell until we have understood what really happens...
> >
> > Do you manage to reproduce that by running under Valgrind ? If so, that
> might
> > help understanding what is going wrong.
>
> I never used Valgrind, but with some help, I may be able to check
> behaviour and report.

$ apt-get/yum install valgrind
$ valgrind [valgrind_options] the_binary [the_binary_options] 2>valgrind_log.txt

where the_binary will be your servlet server. Not sure how well it run within
Valgrind. You need to use a recent enough version of Valgrind to run the JVM
with it (at least for 64 bit builds). And things will run at the minimum 10x
slower

Running Java with Valgrind tends to generate a lot of warnings. You'll probably
have to check the Valgrind option that increases the maximum number of warning
messages.

>
> Best regards,
> Markus
>
> --
> Markus Schneider
> CEO
>
> Occam Labs UG (haftungsbeschr?nkt)
> Godesberger Allee 139
> 53175 Bonn, Germany
>
> +49 228 93798874
>
> http://www.occamlabs.de
>
>

From even.rouault at mines-paris.org  Mon Oct 14 04:36:20 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 13:36:20 +0200
Subject: [gdal-dev] GDAL 1.10.1 requirements
In-Reply-To: <1381740899536-5083369.post@n6.nabble.com>
References: <1381740899536-5083369.post@n6.nabble.com>
Message-ID: <1381750580.525bd73427b79@imp.free.fr>

Selon laura0 <lauramail at iol.it>:

> Hi all,
> I would like to know which versions of netcdf, hdf4, hdf5 libraries are
> supported by the new release of GDAL.
> I tried for instance 4.1.1 netcdf library but, after ./configure, I see
> "netcdf supported NO" .  So I think that version is too old. With the latest
> versions (netcdf 4.3.0, hdf5 1.8.11 , hdf4 4.2.9 ) everything looks going
> fine but processing an hdf5 dataset I got the following error:
> HDF5-DIAG: Error detected in HDF5 (1.8.11) thread 0:
>   #000: H5A.c line 557 in H5Aopen(): unable to load attribute info from
> object header for attribute: 'PRODUCT_NAME'
>     major: Attribute
>
> I was able to open the same dataset instead with gdal 1.9 and library
> versions: hdf5 1.8.9 , hdf4 4.2.8 , netcdf 4.2.1.1
> Is it a problem of versions or something else?

Laura,

I would have expected any netCDF version >= 3.6 or something like that to be OK.
But perhaps there are with particuler netCDF versions...

On my dev system I have HDF5 1.8.4 I believe and things seem to work fine. Are
you encountering this error with all HDF5 datasets or just one particular one ?
Did you try with HDF5 1.8.9 that worked with your GDAL 1.9 ?

Even


From lauramail at iol.it  Mon Oct 14 06:32:47 2013
From: lauramail at iol.it (lauramail at iol.it)
Date: Mon, 14 Oct 2013 15:32:47 +0200 (CEST)
Subject: [gdal-dev] R: Re:  GDAL 1.10.1 requirements
Message-ID: <30775598.1332291381757567839.JavaMail.defaultUser@defaultHost>

Hi Even,
I had this error with a particular HDF5, it is strange because with the 
previous version everything works (but I did not try with HDF5 1.8.9 and GDAL 
1.9) .
Do you know that error message? 
First of all I would like to understand if it is a library version problem or 
not. I mean, I do not think the latest version is able to read less file than 
the previous one but maybe there is something to set or different. Do you try 
this new one?
Thanks
Laura



>----Messaggio originale----
>Da: even.rouault at mines-paris.org
>Data: 14/10/2013 13.36
>A: "laura0"<lauramail at iol.it>
>Cc: <gdal-dev at lists.osgeo.org>
>Ogg: Re: [gdal-dev] GDAL 1.10.1 requirements
>
>Selon laura0 <lauramail at iol.it>:
>
>> Hi all,
>> I would like to know which versions of netcdf, hdf4, hdf5 libraries are
>> supported by the new release of GDAL.
>> I tried for instance 4.1.1 netcdf library but, after ./configure, I see
>> "netcdf supported NO" .  So I think that version is too old. With the 
latest
>> versions (netcdf 4.3.0, hdf5 1.8.11 , hdf4 4.2.9 ) everything looks going
>> fine but processing an hdf5 dataset I got the following error:
>> HDF5-DIAG: Error detected in HDF5 (1.8.11) thread 0:
>>   #000: H5A.c line 557 in H5Aopen(): unable to load attribute info from
>> object header for attribute: 'PRODUCT_NAME'
>>     major: Attribute
>>
>> I was able to open the same dataset instead with gdal 1.9 and library
>> versions: hdf5 1.8.9 , hdf4 4.2.8 , netcdf 4.2.1.1
>> Is it a problem of versions or something else?
>
>Laura,
>
>I would have expected any netCDF version >= 3.6 or something like that to be 
OK.
>But perhaps there are with particuler netCDF versions...
>
>On my dev system I have HDF5 1.8.4 I believe and things seem to work fine. 
Are
>you encountering this error with all HDF5 datasets or just one particular one 
?
>Did you try with HDF5 1.8.9 that worked with your GDAL 1.9 ?
>
>Even
>
>


From even.rouault at mines-paris.org  Mon Oct 14 07:22:30 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 16:22:30 +0200
Subject: [gdal-dev] R: Re:  GDAL 1.10.1 requirements
In-Reply-To: <30775598.1332291381757567839.JavaMail.defaultUser@defaultHost>
References: <30775598.1332291381757567839.JavaMail.defaultUser@defaultHost>
Message-ID: <1381760550.525bfe26a6860@imp.free.fr>

Selon "lauramail at iol.it" <lauramail at iol.it>:

> Hi Even,
> I had this error with a particular HDF5, it is strange because with the
> previous version everything works (but I did not try with HDF5 1.8.9 and GDAL
> 1.9) .
> Do you know that error message?
> First of all I would like to understand if it is a library version problem or
> not. I mean, I do not think the latest version is able to read less file than
> the previous one but maybe there is something to set or different. Do you try
> this new one?

No, I didn't try. No way to test right now, and if that happens on a particular
fine, unless I'm particularly lucky, that will not be really usefull. As far as
why it doesn't work, it could be a bug in the version of the HDF5 library. Did
you try the hdf5-tools of the same version ?

From bontepaarden at gmail.com  Mon Oct 14 09:33:05 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 14 Oct 2013 18:33:05 +0200
Subject: [gdal-dev] Compile errors when including gdal.lib (trunk version)
Message-ID: <CAHNf2YTw2WK7SS0XmT2-UowbppCfkd=oknQiVAPjdOmfCzZSJQ@mail.gmail.com>

Hi all,

We're using GDAL in our Open Source GIS application called MapWinGIS (
https://mapwingis.codeplex.com).
MapWinGIS is build using Visual Studio 2008 Pro and its language is VC++.
We've been using GDAL for years now.
I'm currently in the process of update the external libraries, like GDAL,
GEOS, etc.

I have compiled the trunk version of GDAL (v1.10.1), with the trunk version
of Proj4, GEOS v3.4.2, ERDAS SDK v5 and the latest LizardTech SDK.
This process seems to be working OK, like it has been for the last several
years.
When I test with gdalinfo.exe I can open tiff-files, ECW-files and
MrSid-files.

But when I want to include the gdal.lib into MapWinGIS I get two strange
errors which I don't get if I use GDAL v1.9.

#1: error LNK2005: _DllMain at 12 already defined in
mfcs90.lib(dllmodul.obj)    gdal.lib
#2: fatal error LNK1194: cannot delay-load 'NCSEcw.dll' due to import of
data symbol '"__declspec(dllimport) const NCS::CMutex::`vftable'"
(__imp_??_7CMutex at NCS@@6B@)'; link without /DELAYLOAD:NCSEcw.dll

The second error is about the ERDAS SDK and can be solved by removing
'NCSEcw.dll' from the delay load binaries. But I'm not sure if we can still
show ecw-files.

#1 seems to be the biggest problem and we've tried several different
configurations and searched a lot using Google but we can solve this.

Does anybody understands what is going on and how we can fix this so we can
use the latest GDAL library?


Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/d18e2736/attachment.html>

From etourigny.dev at gmail.com  Mon Oct 14 10:24:01 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 14 Oct 2013 14:24:01 -0300
Subject: [gdal-dev] GDAL 1.10.1 requirements
In-Reply-To: <1381740899536-5083369.post@n6.nabble.com>
References: <1381740899536-5083369.post@n6.nabble.com>
Message-ID: <CA+TxYvOy4NGyRoj-8zSTAFaxos_fSDb1-cGMfg_GBuGp4rytbQ@mail.gmail.com>

gdal-1.10.1 makes use of the 'ncconfig' utility which is available since
netcdf-4.1.3 (if I remember correctly).

In any case, it works with older versions (e.g. 4,1,1, 3.6.x) but cannot
detect netcdf-4 support as it falls back to the previous method for netcdf
detection.
As Even mentioned, building with netcdf-3.6.x still works.In some case, it
requires the use of the --with-netcdf-<some_dir> command switch to
configure.

Are you sure you have the netcdf-dev package (or equivalent) installed?

Etienne

On Mon, Oct 14, 2013 at 5:54 AM, laura0 <lauramail at iol.it> wrote:

> Hi all,
> I would like to know which versions of netcdf, hdf4, hdf5 libraries are
> supported by the new release of GDAL.
> I tried for instance 4.1.1 netcdf library but, after ./configure, I see
> "netcdf supported NO" .  So I think that version is too old. With the
> latest
> versions (netcdf 4.3.0, hdf5 1.8.11 , hdf4 4.2.9 ) everything looks going
> fine but processing an hdf5 dataset I got the following error:
> HDF5-DIAG: Error detected in HDF5 (1.8.11) thread 0:
>   #000: H5A.c line 557 in H5Aopen(): unable to load attribute info from
> object header for attribute: 'PRODUCT_NAME'
>     major: Attribute
>
> I was able to open the same dataset instead with gdal 1.9 and library
> versions: hdf5 1.8.9 , hdf4 4.2.8 , netcdf 4.2.1.1
> Is it a problem of versions or something else?
>
> Many thanks,
> regards
> Laura
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/GDAL-1-10-1-requirements-tp5083369.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/c1844963/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Oct 14 10:41:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Oct 2013 19:41:22 +0200
Subject: [gdal-dev] Compile errors when including gdal.lib (trunk
	version)
In-Reply-To: <CAHNf2YTw2WK7SS0XmT2-UowbppCfkd=oknQiVAPjdOmfCzZSJQ@mail.gmail.com>
References: <CAHNf2YTw2WK7SS0XmT2-UowbppCfkd=oknQiVAPjdOmfCzZSJQ@mail.gmail.com>
Message-ID: <201310141941.22663.even.rouault@mines-paris.org>

Le lundi 14 octobre 2013 18:33:05, Paul Meems a ?crit :
> Hi all,
> 
> We're using GDAL in our Open Source GIS application called MapWinGIS (
> https://mapwingis.codeplex.com).
> MapWinGIS is build using Visual Studio 2008 Pro and its language is VC++.
> We've been using GDAL for years now.
> I'm currently in the process of update the external libraries, like GDAL,
> GEOS, etc.
> 
> I have compiled the trunk version of GDAL (v1.10.1), with the trunk version
> of Proj4, GEOS v3.4.2, ERDAS SDK v5 and the latest LizardTech SDK.
> This process seems to be working OK, like it has been for the last several
> years.
> When I test with gdalinfo.exe I can open tiff-files, ECW-files and
> MrSid-files.
> 
> But when I want to include the gdal.lib into MapWinGIS I get two strange
> errors which I don't get if I use GDAL v1.9.
> 
> #1: error LNK2005: _DllMain at 12 already defined in
> mfcs90.lib(dllmodul.obj)    gdal.lib
> #2: fatal error LNK1194: cannot delay-load 'NCSEcw.dll' due to import of
> data symbol '"__declspec(dllimport) const NCS::CMutex::`vftable'"
> (__imp_??_7CMutex at NCS@@6B@)'; link without /DELAYLOAD:NCSEcw.dll
> 
> The second error is about the ERDAS SDK and can be solved by removing
> 'NCSEcw.dll' from the delay load binaries. But I'm not sure if we can still
> show ecw-files.
> 
> #1 seems to be the biggest problem and we've tried several different
> configurations and searched a lot using Google but we can solve this.
> 
> Does anybody understands what is going on and how we can fix this so we can
> use the latest GDAL library?

It seems that you are statically linking to GDAL ? Then try commenting the 
DllMain() implementation in gcore/gdaldllmain.cpp. If this is the root of the 
problem, it probably means that we shouldn't link that file in the static lib. 
Patches welcome !

> 
> 
> Thanks,
> 
> Paul
> 
>  *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
> 
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
> 
> *
> *

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bontepaarden at gmail.com  Mon Oct 14 12:45:22 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 14 Oct 2013 21:45:22 +0200
Subject: [gdal-dev] Compile errors when including gdal.lib (trunk
	version)
In-Reply-To: <201310141941.22663.even.rouault@mines-paris.org>
References: <CAHNf2YTw2WK7SS0XmT2-UowbppCfkd=oknQiVAPjdOmfCzZSJQ@mail.gmail.com>
	<201310141941.22663.even.rouault@mines-paris.org>
Message-ID: <CAHNf2YS2K+jPFS-8Wp-OM_ersLeqZKbsbdRBEXMCiaz9+OixDw@mail.gmail.com>

Thanks Even,

I commented the DllMain() implementation and now my project compiles again.
I would love to send a patch but I'm not a C++ developer and don't know how
to fix this.

I will now look into the ECW error.

Thanks,




Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/10/14 Even Rouault <even.rouault at mines-paris.org>

> Le lundi 14 octobre 2013 18:33:05, Paul Meems a ?crit :
> > Hi all,
> >
> > We're using GDAL in our Open Source GIS application called MapWinGIS (
> > https://mapwingis.codeplex.com).
> > MapWinGIS is build using Visual Studio 2008 Pro and its language is VC++.
> > We've been using GDAL for years now.
> > I'm currently in the process of update the external libraries, like GDAL,
> > GEOS, etc.
> >
> > I have compiled the trunk version of GDAL (v1.10.1), with the trunk
> version
> > of Proj4, GEOS v3.4.2, ERDAS SDK v5 and the latest LizardTech SDK.
> > This process seems to be working OK, like it has been for the last
> several
> > years.
> > When I test with gdalinfo.exe I can open tiff-files, ECW-files and
> > MrSid-files.
> >
> > But when I want to include the gdal.lib into MapWinGIS I get two strange
> > errors which I don't get if I use GDAL v1.9.
> >
> > #1: error LNK2005: _DllMain at 12 already defined in
> > mfcs90.lib(dllmodul.obj)    gdal.lib
> > #2: fatal error LNK1194: cannot delay-load 'NCSEcw.dll' due to import of
> > data symbol '"__declspec(dllimport) const NCS::CMutex::`vftable'"
> > (__imp_??_7CMutex at NCS@@6B@)'; link without /DELAYLOAD:NCSEcw.dll
> >
> > The second error is about the ERDAS SDK and can be solved by removing
> > 'NCSEcw.dll' from the delay load binaries. But I'm not sure if we can
> still
> > show ecw-files.
> >
> > #1 seems to be the biggest problem and we've tried several different
> > configurations and searched a lot using Google but we can solve this.
> >
> > Does anybody understands what is going on and how we can fix this so we
> can
> > use the latest GDAL library?
>
> It seems that you are statically linking to GDAL ? Then try commenting the
> DllMain() implementation in gcore/gdaldllmain.cpp. If this is the root of
> the
> problem, it probably means that we shouldn't link that file in the static
> lib.
> Patches welcome !
>
> >
> >
> > Thanks,
> >
> > Paul
> >
> >  *Paul Meems *
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> > *
> > *
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131014/da391cbf/attachment.html>

From landa.martin at gmail.com  Tue Oct 15 03:36:08 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Oct 2013 12:36:08 +0200
Subject: [gdal-dev] how to implement user specified events and handlers
Message-ID: <CA+Ei1OfmVNGpk_a82Drw4zWOAcYepQAtv9h7f4VEazAGBNscnw@mail.gmail.com>

Hi all,

I wonder if there is a way how to implement mechanism for
user-specified events and handlers in GDAL/OGR.

I am implementing a Python script which checks VFK file using OGR
driver [1]. This script reads VFK data and stores them in SQLite
database which is created by the OGR driver.

Beside some geometry checks the script should do some extra
user-defined checks on the original VFK file. To avoid double reading
of the file (first by the script and then by the OGR driver) I would
like to use mechanism of events and handlers. In other words, event
for reading a new line from the VFK file [2] and the handler (callback
subroutine in Python script) which would do some extra checks on the
line [3].

Any idea how it should be correctly implemented in VFK driver and the
Python script? Thanks a lot for any hits in advance!

Martin

[1] http://gdal.org/ogr/drv_vfk.html
[2] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/vfk/vfkreader.cpp#L125
[3] https://github.com/landam/ogr-vfk-testing/blob/master/read-vfk-test/read-vfk.py#L52

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From even.rouault at mines-paris.org  Tue Oct 15 11:10:08 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Oct 2013 20:10:08 +0200
Subject: [gdal-dev] how to implement user specified events and handlers
In-Reply-To: <CA+Ei1OfmVNGpk_a82Drw4zWOAcYepQAtv9h7f4VEazAGBNscnw@mail.gmail.com>
References: <CA+Ei1OfmVNGpk_a82Drw4zWOAcYepQAtv9h7f4VEazAGBNscnw@mail.gmail.com>
Message-ID: <201310152010.09055.even.rouault@mines-paris.org>

Martin,

The closest equivalent in the GDAL/OGR code base I could think of is the 
possibility of defining a custom error handler from the Python bindings.

Basically you would need to have a C API to register a C callback, 
"VFKLineCallbackRegister", and you would have a Python C module that would 
define such a C callback "PyVFKCallbackWrapper" (or extend the existing GDAL 
Python bindings), that would be a wrapper that would take a Python callable 
object as argument and call it. And you would have a C function, exposed as 
Python, "RegisterVFKCallback" that would pass PyVFKCallbackWrapper to 
VFKLineCallbackRegister with the Python function as a userdata.

The relevant existing code is in :

* swig/include/port.i :

/* Equivalent of PyVFKCallbackWrapper */
%{
void CPL_STDCALL PyCPLErrorHandler(CPLErr eErrClass, int err_no, const char* 
pszErrorMsg)
{
    void* user_data = CPLGetErrorHandlerUserData();
    PyObject *psArgs;

    psArgs = Py_BuildValue("(iis)", eErrClass, err_no, pszErrorMsg );
    PyEval_CallObject( (PyObject*)user_data, psArgs);
    Py_XDECREF(psArgs);
}
%}

/* Equivalent of RegisterVFKCallback */
%inline %{
  CPLErr PushErrorHandler( CPLErrorHandler pfnErrorHandler = NULL, void* 
user_data = NULL )
  {
[...]
        CPLPushErrorHandlerEx(pfnErrorHandler, user_data);  /* equivalent of 
VFKLineCallbackRegister */
    return CE_None;
  }
%}

* swig/include/python/typemaps_python.i :

%typemap(in) ( CPLErrorHandler pfnErrorHandler = NULL, void* user_data = NULL 
) 
{
    /* %typemap(in) (CPLErrorHandler pfnErrorHandler = NULL, void* user_data = 
NULL) */
    [...]
     if (!PyCallable_Check($input))
    {
        PyErr_SetString( PyExc_RuntimeError, 
                         "Object given is not a String or a Python function" 
);
        SWIG_fail;
    }
    else
    {
        Py_INCREF($input);
        $1 = PyCPLErrorHandler;
        $2 = $input;
    }
}

Best regards,

Even

> Hi all,
> 
> I wonder if there is a way how to implement mechanism for
> user-specified events and handlers in GDAL/OGR.
> 
> I am implementing a Python script which checks VFK file using OGR
> driver [1]. This script reads VFK data and stores them in SQLite
> database which is created by the OGR driver.
> 
> Beside some geometry checks the script should do some extra
> user-defined checks on the original VFK file. To avoid double reading
> of the file (first by the script and then by the OGR driver) I would
> like to use mechanism of events and handlers. In other words, event
> for reading a new line from the VFK file [2] and the handler (callback
> subroutine in Python script) which would do some extra checks on the
> line [3].
> 
> Any idea how it should be correctly implemented in VFK driver and the
> Python script? Thanks a lot for any hits in advance!
> 
> Martin
> 
> [1] http://gdal.org/ogr/drv_vfk.html
> [2]
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/vfk/vfkreade
> r.cpp#L125 [3]
> https://github.com/landam/ogr-vfk-testing/blob/master/read-vfk-test/read-v
> fk.py#L52

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From multiquadric at gmail.com  Tue Oct 15 16:25:47 2013
From: multiquadric at gmail.com (David Fogel)
Date: Tue, 15 Oct 2013 16:25:47 -0700
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <C55473998E248B4DAEC5342D698DFE85012C2E0A4F@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
	<CA+YzLBfWBRT6__3jGQ1me6g7_GDv8ubCtwgaJFoZenkxf1H6OA@mail.gmail.com>
	<C55473998E248B4DAEC5342D698DFE85012C2E0A4F@sea-srv-mail.lizardtech.com>
Message-ID: <CAJ5OYxCjKNp_vkNpcn1VuXxekigupkrW9sXE58dtccyoVsk5MQ@mail.gmail.com>

I have updated the trac ticket after fooling with GDAL and ESRI (ArcGIS)
the past two weeks.   It would appear that nothing fancy is required.
Referencing the name in the EPSG registry in addition to the minimum
specifications or this ProjCRS should work.   Hacks would be required for
software that is not GDAL (or PROJ4, etc.) or ESRI.  Really, this means
that the name , which is in a standard, ought to be the identifier.

= David


On Thu, Aug 29, 2013 at 2:44 PM, Michael Rosen <mrosen at lizardtech.com>wrote:

> I concur that it is desirable to be able to recognize this projection in
> which ever ?Well Known? Text is appears.  To paraphrase Douglas Adams, ?this
> is obviously some strange use of the term *well-known* that I wasn't
> previously aware of.****
>
> ** **
>
> msr****
>
> ** **
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Frank Warmerdam
> *Sent:* Thursday, August 29, 2013 2:32 PM
> *To:* Stefano Iacovella
>
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962***
> *
>
> ** **
>
> Folks,****
>
> ** **
>
> I have no problem with EPSG code 3857 as a PCS in GeoTIFF files.  It is
> widely accepted that any EPSG PCS is acceptable there.****
>
> ** **
>
> What is less clear to me is the most appropriate formulation of Web
> Mercator in WKT.  Potentially, we could move to encoding semi_major and
> semi_minor in the projection parameters as overrides, and then translate to
> the ESRI format and back in our morphing code.****
>
> ** **
>
> Mike, if we do incorporate your patch, I think we should also consider
> ways of recognising some of the other variations. ****
>
> ** **
>
> Best regards,****
>
> Frank****
>
> ** **
>
> ** **
>
> On Thu, Aug 29, 2013 at 2:05 PM, Stefano Iacovella <
> stefano.iacovella at gmail.com> wrote:****
>
> ** **
>
> 2013/8/29 Even Rouault <even.rouault at mines-paris.org>****
>
> My main question is : how sure are we about the projection name
> "Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT ?
> Is
> there some reference from that ? The fact that ESRI uses it doesn't make it
> necesserarily a standard (although it can serve as a base if there's no
> alternative).****
>
> ** **
>
> According to http://epsg-registry.org/, not an ISO standard but quite a
> de facto standard, EPSG:3857 is "WGS 84 / Pseudo-Mercator "****
>
> ** **
>
> Kind Regards,****
>
> Stefano
> ****
>
> ---------------------------------------------------
> 41.95581N 12.52854E
>
>
> http://www.linkedin.com/in/stefanoiacovella
>
> http://twitter.com/#!/Iacovellas****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
> ****
>
> ** **
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131015/36584589/attachment.html>

From ari.jolma at gmail.com  Tue Oct 15 23:28:24 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 16 Oct 2013 09:28:24 +0300
Subject: [gdal-dev] how to implement user specified events and handlers
In-Reply-To: <201310152010.09055.even.rouault@mines-paris.org>
References: <CA+Ei1OfmVNGpk_a82Drw4zWOAcYepQAtv9h7f4VEazAGBNscnw@mail.gmail.com>
	<201310152010.09055.even.rouault@mines-paris.org>
Message-ID: <525E3208.9000206@gmail.com>

On 10/15/2013 09:10 PM, Even Rouault wrote:
> Martin,
>
> The closest equivalent in the GDAL/OGR code base I could think of is the
> possibility of defining a custom error handler from the Python bindings.

For the Perl bindings I wrote a mechanism to call a Perl function via 
the GDALProgressFunc mechanism, which is used quite a lot - it was a bit 
like dark art, but seems to work. Is similar implemented for Python?

Ari

>
> Basically you would need to have a C API to register a C callback,
> "VFKLineCallbackRegister", and you would have a Python C module that would
> define such a C callback "PyVFKCallbackWrapper" (or extend the existing GDAL
> Python bindings), that would be a wrapper that would take a Python callable
> object as argument and call it. And you would have a C function, exposed as
> Python, "RegisterVFKCallback" that would pass PyVFKCallbackWrapper to
> VFKLineCallbackRegister with the Python function as a userdata.
>
> The relevant existing code is in :
>
> * swig/include/port.i :
>
> /* Equivalent of PyVFKCallbackWrapper */
> %{
> void CPL_STDCALL PyCPLErrorHandler(CPLErr eErrClass, int err_no, const char*
> pszErrorMsg)
> {
>      void* user_data = CPLGetErrorHandlerUserData();
>      PyObject *psArgs;
>
>      psArgs = Py_BuildValue("(iis)", eErrClass, err_no, pszErrorMsg );
>      PyEval_CallObject( (PyObject*)user_data, psArgs);
>      Py_XDECREF(psArgs);
> }
> %}
>
> /* Equivalent of RegisterVFKCallback */
> %inline %{
>    CPLErr PushErrorHandler( CPLErrorHandler pfnErrorHandler = NULL, void*
> user_data = NULL )
>    {
> [...]
>          CPLPushErrorHandlerEx(pfnErrorHandler, user_data);  /* equivalent of
> VFKLineCallbackRegister */
>      return CE_None;
>    }
> %}
>
> * swig/include/python/typemaps_python.i :
>
> %typemap(in) ( CPLErrorHandler pfnErrorHandler = NULL, void* user_data = NULL
> )
> {
>      /* %typemap(in) (CPLErrorHandler pfnErrorHandler = NULL, void* user_data =
> NULL) */
>      [...]
>       if (!PyCallable_Check($input))
>      {
>          PyErr_SetString( PyExc_RuntimeError,
>                           "Object given is not a String or a Python function"
> );
>          SWIG_fail;
>      }
>      else
>      {
>          Py_INCREF($input);
>          $1 = PyCPLErrorHandler;
>          $2 = $input;
>      }
> }
>
> Best regards,
>
> Even
>
>> Hi all,
>>
>> I wonder if there is a way how to implement mechanism for
>> user-specified events and handlers in GDAL/OGR.
>>
>> I am implementing a Python script which checks VFK file using OGR
>> driver [1]. This script reads VFK data and stores them in SQLite
>> database which is created by the OGR driver.
>>
>> Beside some geometry checks the script should do some extra
>> user-defined checks on the original VFK file. To avoid double reading
>> of the file (first by the script and then by the OGR driver) I would
>> like to use mechanism of events and handlers. In other words, event
>> for reading a new line from the VFK file [2] and the handler (callback
>> subroutine in Python script) which would do some extra checks on the
>> line [3].
>>
>> Any idea how it should be correctly implemented in VFK driver and the
>> Python script? Thanks a lot for any hits in advance!
>>
>> Martin
>>
>> [1] http://gdal.org/ogr/drv_vfk.html
>> [2]
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/vfk/vfkreade
>> r.cpp#L125 [3]
>> https://github.com/landam/ogr-vfk-testing/blob/master/read-vfk-test/read-v
>> fk.py#L52


From t-h at t-h.cc  Wed Oct 16 00:49:35 2013
From: t-h at t-h.cc (lightxx)
Date: Wed, 16 Oct 2013 00:49:35 -0700 (PDT)
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
Message-ID: <1381909774989-5083834.post@n6.nabble.com>

I'm using the NuGet GDAL C# bindings (1.9.2). When I try to convert from an
jp2 file (using the GDALDriver.CreateCopy method) the process bombs with an
uncatchable Heap Corruption Exception. The exception thrown is "Unhandled
exception at 0x77B9AA3C (ntdll.dll) in RASTER.exe: 0xC0000374: A heap has
been corrupted (parameters: 0x77BAFE38)."

Interestingly enough, if I try that with the pre-built binaries
(gdal_translate.exe) everything works as supposed, although terribly slow.

Now I'd like to know if this is a known problem, or if there are any
workarounds to mitigate that problem. After all Windows terminates the
running process when this exception occurs, so there is no way of handling -
not even catching - this exception from managed code.

For your convenience, I've attached a minimum working example. You can find
it here: http://pastebin.com/2ri0X4Lt



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From t-h at t-h.cc  Wed Oct 16 01:13:01 2013
From: t-h at t-h.cc (lightxx)
Date: Wed, 16 Oct 2013 01:13:01 -0700 (PDT)
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <1381909774989-5083834.post@n6.nabble.com>
References: <1381909774989-5083834.post@n6.nabble.com>
Message-ID: <1381911181174-5083837.post@n6.nabble.com>

I would be very glad if somebody would like to try to reproduce the behavior
I'm seeing. I've uploaded a minimum working Visual Studio 2012 solution to
http://kraxn.t-h.cc/GDALBug.zip . The archive is rather large (200MB)
because it includes the source file I'm trying to convert .... 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083837.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Wed Oct 16 02:49:19 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 16 Oct 2013 11:49:19 +0200
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <1381911181174-5083837.post@n6.nabble.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
Message-ID: <CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>

I've tried your project with my compilation of gdal and it did not crash
(created a tif file with ~1.5GB in size). There might be an issue with your
binary set. You might want to try one of the prebuilt binary packages from
http://www.gisinternals.com/sdk/

Best regards,

Tamas




2013/10/16 lightxx <t-h at t-h.cc>

> I would be very glad if somebody would like to try to reproduce the
> behavior
> I'm seeing. I've uploaded a minimum working Visual Studio 2012 solution to
> http://kraxn.t-h.cc/GDALBug.zip . The archive is rather large (200MB)
> because it includes the source file I'm trying to convert ....
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083837.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131016/1a2e88af/attachment.html>

From t-h at t-h.cc  Wed Oct 16 03:06:51 2013
From: t-h at t-h.cc (lightxx)
Date: Wed, 16 Oct 2013 03:06:51 -0700 (PDT)
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
	<CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
Message-ID: <1381918011395-5083862.post@n6.nabble.com>

Ok ... this is pretty weird now. I just tried starting from scratch using
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-10-1-mapserver-6-4-0.zip
and I'm getting exactly the same results as before.

I tried it with 3 different VMs running Win8 x64 ...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From t-h at t-h.cc  Wed Oct 16 03:19:10 2013
From: t-h at t-h.cc (lightxx)
Date: Wed, 16 Oct 2013 03:19:10 -0700 (PDT)
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <1381918011395-5083862.post@n6.nabble.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
	<CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
	<1381918011395-5083862.post@n6.nabble.com>
Message-ID: <1381918750393-5083868.post@n6.nabble.com>

never mind. I still had that NuGet Post-build event hook in place which
replaced the dlls from the download with the NuGet ones that caused the
exception. Everything's working now, although I'd VERY MUCH prefer to use
the NuGet version.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083868.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Wed Oct 16 07:02:20 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 16 Oct 2013 16:02:20 +0200
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <1381918750393-5083868.post@n6.nabble.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
	<CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
	<1381918011395-5083862.post@n6.nabble.com>
	<1381918750393-5083868.post@n6.nabble.com>
Message-ID: <CACALY+Qv5Az2i6zXn1HpzdeAv62ZTzjP2OEEF=F_hEB__S2oJw@mail.gmail.com>

It's already in my TODO list (
https://github.com/gisinternals/buildsystem/issues/9), but I still didn't
have enough free time to work that out.

Best regards,

Tamas


2013/10/16 lightxx <t-h at t-h.cc>

> never mind. I still had that NuGet Post-build event hook in place which
> replaced the dlls from the download with the NuGet ones that caused the
> exception. Everything's working now, although I'd VERY MUCH prefer to use
> the NuGet version.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083868.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131016/03de500d/attachment.html>

From t-h at t-h.cc  Wed Oct 16 08:40:27 2013
From: t-h at t-h.cc (Thomas Heuberger)
Date: Wed, 16 Oct 2013 17:40:27 +0200
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <CACALY+Qv5Az2i6zXn1HpzdeAv62ZTzjP2OEEF=F_hEB__S2oJw@mail.gmail.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
	<CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
	<1381918011395-5083862.post@n6.nabble.com>
	<1381918750393-5083868.post@n6.nabble.com>
	<CACALY+Qv5Az2i6zXn1HpzdeAv62ZTzjP2OEEF=F_hEB__S2oJw@mail.gmail.com>
Message-ID: <CAGPkozSVY4qx70xFbO2Xr-5xEPXLKnP+hM3crETPG7qugG2ODQ@mail.gmail.com>

just out of curiosity, why are there versions compiled with VC2k3 / 2k5 /
2k8 /  2k10? Why not just say 2k10?


On Wed, Oct 16, 2013 at 4:02 PM, Tamas Szekeres <szekerest at gmail.com> wrote:

> It's already in my TODO list (
> https://github.com/gisinternals/buildsystem/issues/9), but I still didn't
> have enough free time to work that out.
>
> Best regards,
>
> Tamas
>
>
> 2013/10/16 lightxx <t-h at t-h.cc>
>
>> never mind. I still had that NuGet Post-build event hook in place which
>> replaced the dlls from the download with the NuGet ones that caused the
>> exception. Everything's working now, although I'd VERY MUCH prefer to use
>> the NuGet version.
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083868.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131016/99b5eecb/attachment.html>

From szekerest at gmail.com  Wed Oct 16 12:56:02 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 16 Oct 2013 21:56:02 +0200
Subject: [gdal-dev] Heap corruption when using GDALDriver.CreateCopy (C#
 Bindings, 1.9.2)
In-Reply-To: <CAGPkozSVY4qx70xFbO2Xr-5xEPXLKnP+hM3crETPG7qugG2ODQ@mail.gmail.com>
References: <1381909774989-5083834.post@n6.nabble.com>
	<1381911181174-5083837.post@n6.nabble.com>
	<CACALY+QFAE8SWx03VtCw_Y7z3A_=s0iNbmn8DieOwrsPKKys-Q@mail.gmail.com>
	<1381918011395-5083862.post@n6.nabble.com>
	<1381918750393-5083868.post@n6.nabble.com>
	<CACALY+Qv5Az2i6zXn1HpzdeAv62ZTzjP2OEEF=F_hEB__S2oJw@mail.gmail.com>
	<CAGPkozSVY4qx70xFbO2Xr-5xEPXLKnP+hM3crETPG7qugG2ODQ@mail.gmail.com>
Message-ID: <CACALY+Qgr-S_hGkMtsu+tV2V0Z1SV5EXbFhM4Sycz8+4V44L+w@mail.gmail.com>

In order to avoid mixed CRT dependencies the developers should select the
packages to match with their favourite compiler they are using actually.
Another reason is to provide test environments for gdal and mapserver to
make sure the projects can build equally well in the various compiler
versions / architectures. At the time when
gisinternals<http://www.gisinternals.com/sdk/>have been set up (in
2009) we didn't have any other alternatives to obtain
x64 builds for these OSGeo projects, and this is also the case at the
moment since osgeo4w-x64 is still experimental.

Tamas


2013/10/16 Thomas Heuberger <t-h at t-h.cc>

> just out of curiosity, why are there versions compiled with VC2k3 / 2k5 /
> 2k8 /  2k10? Why not just say 2k10?
>
>
> On Wed, Oct 16, 2013 at 4:02 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>
>> It's already in my TODO list (
>> https://github.com/gisinternals/buildsystem/issues/9), but I still
>> didn't have enough free time to work that out.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> 2013/10/16 lightxx <t-h at t-h.cc>
>>
>>> never mind. I still had that NuGet Post-build event hook in place which
>>> replaced the dlls from the download with the NuGet ones that caused the
>>> exception. Everything's working now, although I'd VERY MUCH prefer to use
>>> the NuGet version.
>>>
>>>
>>>
>>> --
>>> View this message in context:
>>> http://osgeo-org.1560.x6.nabble.com/Heap-corruption-when-using-GDALDriver-CreateCopy-C-Bindings-1-9-2-tp5083834p5083868.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131016/39d8e01d/attachment.html>

From bontepaarden at gmail.com  Thu Oct 17 02:30:27 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 17 Oct 2013 11:30:27 +0200
Subject: [gdal-dev] Statically link ECW v5 with GDAL
Message-ID: <CAHNf2YQq9Vm3VQ3Yad65XZ9ZiZh8MDF8YNDnvEf=1pA4Yx5UaQ@mail.gmail.com>

Hi list,

As mentioned before I'm having trouble getting the new ECW SDK working in
MapWinGIS which is using GDAL.
I'm now trying to statically link ECW v5 with GDAL.
I've found this documentation:
When linking against the static libraries on Windows, you must define
NCSECW_EXPORTS as a pre-processor definition. Both the dynamic and
static libraries on Windows are linked against the dynamic msvc run-time
library (/MD and /MDd).
When linking on Windows platforms, for dynamic libraries link against
NCSEcw.lib and NCSEcwd.lib for release and debug modes respectively. For
static libraries, link against NCSEcwS.lib and NCSEcwSd.lib for release and
debug modes respectively.

I'm compiling GDAL using nmake in a Visual Studio 2008 command prompt.

And I've changed my nmake.local to
ECWDIR   = $(GDAL_HOME)\..\ERDAS-ECW-JPEG-2000-SDK-5.0
ECWFLAGS = -DECWSDK_VERSION=50 *-DNCSECW_EXPORTS* \
           -I$(ECWDIR)\include \
           -I$(ECWDIR)\include/NCSECW/API \
           -I$(ECWDIR)\include/NCSECW/JP2 \
           -I$(ECWDIR)\include/NCSECW/ECW
ECWLIB   = $(ECWDIR)\lib\vc90\$(PLATFORM_NAME)\*NCSEcwS.lib*


I'm not sure about the NCSECW_EXPORTS pre-processor definition. I've added
it to the ECWFLAGS. Is that the correct location and the correct syntax?

We used to compile MapWinGIS with the ECW dll as a delay loaded dll, but
that is now giving me this error:
*fatal error LNK1194: cannot delay-load 'NCSEcw.dll' due to import of data
symbol '"__declspec(dllimport) const NCS::CMutex::`vftable'"
(__imp_??_7CMutex at NCS@@6B@)'; link without /DELAYLOAD:NCSEcw.dll*
I've posted this on the Intergraph forum (
http://geospatial.intergraph.com/Community/forums/p/1620/5299.aspx#5299)
but don't have received any reply.

When compiling gdal with the new nmake.local I can successfully open an ecw
file with gdalinfo.exe, so that part is working.
But when compiling MapWinGIS (using VS2008), which is statically linking
gdal.lib I get these errors:
error LNK2019: unresolved external symbol "__declspec(dllimport) public:
__thiscall NCS::CString::~CString(void)" (__imp_??1CString at NCS@@QAE at XZ)
referenced in function "public: virtual enum CPLErr __thiscall
ECWDataset::SetMetadataItem(char const *,char const *,char const *)"
(?SetMetadataItem at ECWDataset@@UAE?AW4CPLErr@@PBD00 at Z)    gdal.lib
MapWinGIS

Any help is much appreciated.

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131017/19a2c233/attachment.html>

From schneider at occamlabs.de  Thu Oct 17 02:44:43 2013
From: schneider at occamlabs.de (Markus Schneider)
Date: Thu, 17 Oct 2013 11:44:43 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <1381749977.525bd4d9a60f7@imp.free.fr>
References: <525BCD19.8090501@occamlabs.de>
	<1381749013.525bd1151ed04@imp.free.fr>
	<525BD2A1.6030103@occamlabs.de>
	<1381749977.525bd4d9a60f7@imp.free.fr>
Message-ID: <525FB18B.1070605@occamlabs.de>

Hi Even,

thanks for you help so far.

I now observed that handing around a (ECW) Dataset between threads works
fine, as long as I open it using:

- gdal.Open(String name)

However, when I open it using:

- gdal.OpenShared(String name)

I see strange effects and VM crashes.

Does this make sense? What do you believe is preferrable with regard to
performance and memory consumption:

1. Using a ThreadPool and obtain a Dataset using gdal.OpenShared for
each thread
2. Using gdal.Open and simply pool the obtained Dataset objects (and
hand them around between threads)

Best regards,
Markus

Am 14.10.2013 13:26, schrieb Even Rouault:
> Selon Markus Schneider <schneider at occamlabs.de>:
> 
>> Hi Even,
>>
>> Am 14.10.2013 13:10, schrieb Even Rouault:
>>> This is surprising. Are you seeing that with a particular driver or all
>> drivers
>>> ?
>>
>> I am experiencing this with ECW driver.
> 
> Ah, well, anything can happen within the beast then... Which SDK version : 3.3
> or 5 ?
> 
>>
>>> I don't see any use of TLS on the Java side. There might be some use of TLS
>>> objects on the C side, for functions in cpl_path.cpp for example, but their
>> use
>>> should be limited to the lifetime of the execution of a particular
>> function, so
>>> that shouldn't cause problems in the scenario you describe.
>>
>> I will try to prepare a minimal example to reproduce the issue. I will
>> also check if it occurs with a GeoTIFF.
> 
> Yes that's definnitely something to check.
> 
>>
>>>> Would it be hard to eliminate this behaviour (as it
>>>> would make pooling Dataset objects much easier and more efficient)?
>>>
>>> Difficult to tell until we have understood what really happens...
>>>
>>> Do you manage to reproduce that by running under Valgrind ? If so, that
>> might
>>> help understanding what is going wrong.
>>
>> I never used Valgrind, but with some help, I may be able to check
>> behaviour and report.
> 
> $ apt-get/yum install valgrind
> $ valgrind [valgrind_options] the_binary [the_binary_options] 2>valgrind_log.txt
> 
> where the_binary will be your servlet server. Not sure how well it run within
> Valgrind. You need to use a recent enough version of Valgrind to run the JVM
> with it (at least for 64 bit builds). And things will run at the minimum 10x
> slower
> 
> Running Java with Valgrind tends to generate a lot of warnings. You'll probably
> have to check the Valgrind option that increases the maximum number of warning
> messages.
> 
>>
>> Best regards,
>> Markus
>>
>> --
>> Markus Schneider
>> CEO
>>
>> Occam Labs UG (haftungsbeschr?nkt)
>> Godesberger Allee 139
>> 53175 Bonn, Germany
>>
>> +49 228 93798874
>>
>> http://www.occamlabs.de
>>
>>


-- 
Markus Schneider
CEO

Occam Labs UG (haftungsbeschr?nkt)
Godesberger Allee 139
53175 Bonn, Germany

+49 228 93798874

http://www.occamlabs.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 263 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131017/401e3b12/attachment.pgp>

From even.rouault at mines-paris.org  Thu Oct 17 04:27:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Oct 2013 13:27:09 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <525FB18B.1070605@occamlabs.de>
References: <525BCD19.8090501@occamlabs.de>
	<1381749013.525bd1151ed04@imp.free.fr>
	<525BD2A1.6030103@occamlabs.de>
	<1381749977.525bd4d9a60f7@imp.free.fr>
	<525FB18B.1070605@occamlabs.de>
Message-ID: <1382009229.525fc98da32b9@imp.free.fr>

Selon Markus Schneider <schneider at occamlabs.de>:

> Hi Even,
>
> thanks for you help so far.
>
> I now observed that handing around a (ECW) Dataset between threads works
> fine, as long as I open it using:
>
> - gdal.Open(String name)
>
> However, when I open it using:
>
> - gdal.OpenShared(String name)
>
> I see strange effects and VM crashes.
>
> Does this make sense?

Yes, GDALOpenShared() ( see the doc of the C function ) must be used with great
caution in a multi-threaded scenario. As long as the thread that has called
GDALOpenShared() continues to use it until it closes it, it is OK. But if that
thread handles the dataset to another one, then chaos might happen.

For example in the following scenario :

         Thread 1                                  Thread 2
ds1 = OpenShared("foo")
                           -- handle it to -->
ds2 = OpenShared("foo") ( == ds1)
  do_things(ds2)                                do_things(ds1)
ds2.Close()
                                                ds1.Close()

At a point, you can call methods on the same dataset object from different
threads...

By the way, the issue you've observed with ECW would also be true with other
drivers. It is just by chance that you didn't notice it.

> What do you believe is preferrable with regard to
> performance and memory consumption:
>
> 1. Using a ThreadPool and obtain a Dataset using gdal.OpenShared for
> each thread
> 2. Using gdal.Open and simply pool the obtained Dataset objects (and
> hand them around between threads)

I'm not sure to completely understand what you've in mind, but I would rather
recommand option 2.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html



From bontepaarden at gmail.com  Thu Oct 17 12:41:27 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 17 Oct 2013 21:41:27 +0200
Subject: [gdal-dev] How to enable NetCDF?
Message-ID: <CAHNf2YTdWRqQQ_CzwShp7CuPXDaohhxtFrgQQT8OOEfF9UGK5w@mail.gmail.com>

I'm still working on configuring GDAL and MapWinGIS to open several raster
formats.

I've got several problems with some file formats.
The most blocking is when I enable NetCDF GDALAllRegister() generates an
exception.

I'm using the trunk version (R.26534) of GDAL v1.10. I compile using nmake
with Visual Studio 2008.

This is my nmake.local:
!IFDEF WIN64
PLATFORM_NAME = x64
!ELSE
PLATFORM_NAME = Win32
!ENDIF

!IFNDEF GDAL_HOME
GDAL_HOME = C:\dev\SupportingLibraries\GDAL\gdal-trunk
!ENDIF
!IFNDEF BINDIR
BINDIR = $(GDAL_HOME)\..\..\bin\$(PLATFORM_NAME)
!ENDIF
!IFNDEF LIBDIR
LIBDIR = $(GDAL_HOME)\..\..\lib\$(PLATFORM_NAME)
!ENDIF
!IFNDEF INCDIR
INCDIR = $(GDAL_HOME)\..\..\include
!ENDIF

# ECW Support
ECWDIR   =  $(GDAL_HOME)\..\ERDAS-ECW-JPEG-2000-SDK-5.0
ECWFLAGS =  -DECWSDK_VERSION=50 /DNCSECW_EXPORTS \
            -I$(ECWDIR)\include \
            -I$(ECWDIR)\include/NCSECW/API \
            -I$(ECWDIR)\include/NCSECW/JP2 \
            -I$(ECWDIR)\include/NCSECW/ECW
ECWLIB   =  $(ECWDIR)\lib\vc90\$(PLATFORM_NAME)\NCSEcwS.lib

# LizardTech SDK Support
MRSID_DIR =  $(GDAL_HOME)\..\LizardTech-SDK\$(PLATFORM_NAME)

# Proj4 support
PROJ_FLAGS   = -DPROJ_STATIC
PROJ_INCLUDE = -I$(GDAL_HOME)\..\proj-trunk\src
PROJ_LIBRARY = $(LIBDIR)\proj.lib

# GEOS Support
GEOS_DIR    = $(GDAL_HOME)\..\geos-3.4.2
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include -DHAVE_GEOS
GEOS_LIB    = $(LIBDIR)\geos_c_i.lib

# Enabled big tiff support
TIFF_OPTS = -DBIGTIFF_SUPPORT

#NetCDF support
#NETCDF_PLUGIN   = NO
#NETCDF_SETTING  = yes
#NETCDF_LIB      = $(LIBDIR)\netcdf.lib
#NETCDF_INC_DIR  = $(INCDIR)
##NETCDF_HAS_NC4  = yes
##NETCDF_HAS_HDF4 = yes

As you can see I've disabled NetCDF support.
The main question is what settings should I use and which version of
netcdf.lib and netcdf.dll?
In MapWinGIS we set netcdf.dll as delay loaded dll.

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131017/d7a09159/attachment.html>

From schneider at occamlabs.de  Fri Oct 18 07:31:58 2013
From: schneider at occamlabs.de (Markus Schneider)
Date: Fri, 18 Oct 2013 16:31:58 +0200
Subject: [gdal-dev] Sharing GDAL Dataset objects between threads (JNI)
In-Reply-To: <1382009229.525fc98da32b9@imp.free.fr>
References: <525BCD19.8090501@occamlabs.de>
	<1381749013.525bd1151ed04@imp.free.fr>
	<525BD2A1.6030103@occamlabs.de>
	<1381749977.525bd4d9a60f7@imp.free.fr>
	<525FB18B.1070605@occamlabs.de>
	<1382009229.525fc98da32b9@imp.free.fr>
Message-ID: <5261465E.8040506@occamlabs.de>

Thanks again.

I found the comments in gdaldataset.cpp, and understand now that there's
no gain in using GDALOpenShared over GDALOpen in a multi-threaded
environment, as GDALOpenShared will create multiple GDALDataset objects
anyway in such a scenario.

Best regards,
Markus

Am 17.10.2013 13:27, schrieb Even Rouault:
> Selon Markus Schneider <schneider at occamlabs.de>:
> 
>> Hi Even,
>>
>> thanks for you help so far.
>>
>> I now observed that handing around a (ECW) Dataset between threads works
>> fine, as long as I open it using:
>>
>> - gdal.Open(String name)
>>
>> However, when I open it using:
>>
>> - gdal.OpenShared(String name)
>>
>> I see strange effects and VM crashes.
>>
>> Does this make sense?
> 
> Yes, GDALOpenShared() ( see the doc of the C function ) must be used with great
> caution in a multi-threaded scenario. As long as the thread that has called
> GDALOpenShared() continues to use it until it closes it, it is OK. But if that
> thread handles the dataset to another one, then chaos might happen.
> 
> For example in the following scenario :
> 
>          Thread 1                                  Thread 2
> ds1 = OpenShared("foo")
>                            -- handle it to -->
> ds2 = OpenShared("foo") ( == ds1)
>   do_things(ds2)                                do_things(ds1)
> ds2.Close()
>                                                 ds1.Close()
> 
> At a point, you can call methods on the same dataset object from different
> threads...
> 
> By the way, the issue you've observed with ECW would also be true with other
> drivers. It is just by chance that you didn't notice it.
> 
>> What do you believe is preferrable with regard to
>> performance and memory consumption:
>>
>> 1. Using a ThreadPool and obtain a Dataset using gdal.OpenShared for
>> each thread
>> 2. Using gdal.Open and simply pool the obtained Dataset objects (and
>> hand them around between threads)
> 
> I'm not sure to completely understand what you've in mind, but I would rather
> recommand option 2.
> 
> Best regards,
> 
> Even
> 


-- 
Markus Schneider
CEO

Occam Labs UG (haftungsbeschr?nkt)
Godesberger Allee 139
53175 Bonn, Germany

+49 228 93798874

http://www.occamlabs.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 263 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131018/89f96766/attachment.pgp>

From andre.vautour at caris.com  Fri Oct 18 07:29:10 2013
From: andre.vautour at caris.com (Andre Vautour)
Date: Fri, 18 Oct 2013 11:29:10 -0300
Subject: [gdal-dev] Using VRTDataSource/UnionLayer for S57 thematic layers
Message-ID: <526145B6.8050607@caris.com>

Hi all,

I recently updated to GDAL 1.10.1 and I am looking into possibly using 
the VRT data source to have a data source with S57 thematic layers (e.g. 
skin of the earth, obstructions, etc.) instead of one layer per object 
acronym (feature). I have a collection of ENC files, so my current .vrt 
file looks something like:

<OGRVRTDataSource>
   <OGRVRTUnionLayer name="SkinOfTheEarth">
     <OGRVRTLayer name="SOMEENC_DEPARE">
       <SrcDataSource relativeToVRT="1" 
shared="1">someEnc.000</SrcDataSource>
       <SrcLayer>DEPARE</SrcLayer>
     </OGRVRTLayer>
     <OGRVRTLayer name="SOMEENC_LNDARE">
       <SrcDataSource relativeToVRT="1" 
shared="1">someEnc.000</SrcDataSource>
       <SrcLayer>LNDARE</SrcLayer>
     </OGRVRTLayer>
     <OGRVRTLayer name="SOMEOTHERENC_DEPARE">
       <SrcDataSource relativeToVRT="1" 
shared="1">someOtherEnc.000</SrcDataSource>
       <SrcLayer>DEPARE</SrcLayer>
     </OGRVRTLayer>
     <OGRVRTLayer name="SOMEOTHERENC_LNDARE">
       <SrcDataSource relativeToVRT="1" 
shared="1">someOtherEnc.000</SrcDataSource>
       <SrcLayer>LNDARE</SrcLayer>
     </OGRVRTLayer>
     <!-- ... -->
   </OGRVRTUnionLayer>
   <OGRVRTUnionLayer name="Obstructions">
     <OGRVRTLayer name="SOMEENC_WRECKS">
       <SrcDataSource relativeToVRT="1" 
shared="1">someEnc.000</SrcDataSource>
       <SrcLayer>WRECKS</SrcLayer>
     </OGRVRTLayer>
     <!-- ... -->
   </OGRVRTUnionLayer>
   <!-- ... -->
</OGRVRTDataSource>

Each thematic layer has several object acronyms. Each thematic layer has 
several S57 sources from which to retrieve those acronyms (layers).

Having to specify each individual contributing layer with its source 
separately, while very flexible, is fairly verbose and error-prone in my 
particular case. Is there a way to specify wildcards/rules for the 
sources/layers to load? If not, has such an approach been considered?

Also, is there a way to create a union layer without going through the 
VRT file format? That is, through the OGR API, is there a way for a 
client application to union layers that it already opened?

Thanks,
Andr?



From lucena_ivan at hotmail.com  Fri Oct 18 11:59:38 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 18 Oct 2013 14:59:38 -0400
Subject: [gdal-dev] Building HDF5 driver against the binary distribution
Message-ID: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>

Hi there,
   
I built the GDAL HDF plugin against the binary distribution of the HDF5-1-8-11 library downloaded from http://www.hdfgroup.org/HDF5/release/obtain5.html both on Windows 64 and Linux 64 but it doesn't work. It can list the SUBDATASETS but it cannot recognize each one individually.

If I compare the GDAL distribution from Tamas Szekeres (gisinternals.com/sdk/) with my built I can see that his works perfectly fine for the same file samples and same gdalinfo command. I also noticed that his installation  uses  "hdf5dll.dll" not the "hdf5.dll" that comes with the binary distribution (HDF5-1.8.11_win64_vs10_shared.zip).

Again, if I build GDAL HDF plugin (gdal_hdf5.dll) against the binary distribution from HDF Group gdalinfo can list the SUBDATASET but it *cannot* access each subdataset individually. I am sure that it is not a command line mistake because I can run the exact same command with Tamas's GDAL environment. Is it just because Tamas used the HDF5 1.8.2 and the driver is not compatible with newer versions like this 1.8.11?

Does anybody know what would be the procedure to build the HDF5 driver using the HDF_Group's binary packages? The instructions on http://trac.osgeo.org/gdal/wiki/HDF assumes that you are willing to build the HDF(s) library yourself but users should be able download/install and use the HDF_Group's binary package and we should be able to make the GDAL HDF5 plugin compatible with that.

Thanks in advance for any clue.

Best regards,

Ivan




 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131018/d0dfac1f/attachment.html>

From even.rouault at mines-paris.org  Fri Oct 18 12:16:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 18 Oct 2013 21:16:31 +0200
Subject: [gdal-dev] Building HDF5 driver against the binary distribution
In-Reply-To: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>
References: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>
Message-ID: <201310182116.31540.even.rouault@mines-paris.org>

Le vendredi 18 octobre 2013 20:59:38, Ivan Lucena a ?crit :
> Hi there,
> 
> I built the GDAL HDF plugin against the binary distribution of the
> HDF5-1-8-11 library downloaded from
> http://www.hdfgroup.org/HDF5/release/obtain5.html both on Windows 64 and
> Linux 64 but it doesn't work. It can list the SUBDATASETS but it cannot
> recognize each one individually.
> 
> If I compare the GDAL distribution from Tamas Szekeres
> (gisinternals.com/sdk/) with my built I can see that his works perfectly
> fine for the same file samples and same gdalinfo command. I also noticed
> that his installation  uses  "hdf5dll.dll" not the "hdf5.dll" that comes
> with the binary distribution (HDF5-1.8.11_win64_vs10_shared.zip).
> 
> Again, if I build GDAL HDF plugin (gdal_hdf5.dll) against the binary
> distribution from HDF Group gdalinfo can list the SUBDATASET but it
> *cannot* access each subdataset individually. I am sure that it is not a
> command line mistake because I can run the exact same command with Tamas's
> GDAL environment. Is it just because Tamas used the HDF5 1.8.2 and the
> driver is not compatible with newer versions like this 1.8.11?
> 
> Does anybody know what would be the procedure to build the HDF5 driver
> using the HDF_Group's binary packages? The instructions on
> http://trac.osgeo.org/gdal/wiki/HDF assumes that you are willing to build
> the HDF(s) library yourself but users should be able download/install and
> use the HDF_Group's binary package and we should be able to make the GDAL
> HDF5 plugin compatible with that.

Hum, this reminds me very much of the very recent thread : 
http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037257.html . So there 
might indeed be an issue with HDF5 1.8.11, and not specifically related to 
Windows. I didn't try myself.

Did you try with an older Windows build provided by the HDF_Group ? (provided 
that you can download older builds...)

> 
> Thanks in advance for any clue.
> 
> Best regards,
> 
> Ivan

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Oct 18 12:24:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 18 Oct 2013 21:24:03 +0200
Subject: [gdal-dev] Using VRTDataSource/UnionLayer for S57 thematic
	layers
In-Reply-To: <526145B6.8050607@caris.com>
References: <526145B6.8050607@caris.com>
Message-ID: <201310182124.03264.even.rouault@mines-paris.org>

Andre,

> Having to specify each individual contributing layer with its source
> separately, while very flexible, is fairly verbose and error-prone in my
> particular case. Is there a way to specify wildcards/rules for the
> sources/layers to load?

No, no wildcard are possible.

> If not, has such an approach been considered?

Not that I'm aware of : layer unioning is a quite new feature. I guess people 
who have that need would use their favorite scripting language to generate the 
VRT. Perhaps a "ogrbuildvrt" script ala gdalbuildvrt could be done for that 
purpose.

> 
> Also, is there a way to create a union layer without going through the
> VRT file format? That is, through the OGR API, is there a way for a
> client application to union layers that it already opened?

You can use the UNION ALL keyword in a OGR SQL statement. See 
http://gdal.org/ogr/ogr_sql.html . 

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Fri Oct 18 15:31:58 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri, 18 Oct 2013 23:31:58 +0100
Subject: [gdal-dev] Building HDF5 driver against the binary distribution
In-Reply-To: <201310182116.31540.even.rouault@mines-paris.org>
References: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>
	<201310182116.31540.even.rouault@mines-paris.org>
Message-ID: <5261B6DE.7050508@ualg.pt>


> Hum, this reminds me very much of the very recent thread :
> http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037257.html . So there
> might indeed be an issue with HDF5 1.8.11, and not specifically related to
> Windows. I didn't try myself.
>
> Did you try with an older Windows build provided by the HDF_Group ? (provided
> that you can download older builds...)

Hi,

I have build 1.8.11 myself and use it both in Mirone and GMT and had no 
problems so far. It's linked as dll, not a  plugin but it should not matter.

Joaquim

From jgrn at illinois.edu  Fri Oct 18 18:13:01 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri, 18 Oct 2013 20:13:01 -0500
Subject: [gdal-dev] Using/citing GDAL documentation
Message-ID: <CABG0rfunvEu=yUvXjf39ZsBvrOZnky50KVUMhOaPvtvT=MRsGw@mail.gmail.com>

GDALers:

I'm working with a colleague on a new set of R wrappers for GDAL, and
we are at the point where we are starting to document the functions.
Our R interface is designed to be VERY close to the GDAL command line
utilities (we use the same parameter names, for instance), so I was
wondering if it would be ok to use almost word-for-word the GDAL
documentation of each of the parameters in our package's man files
(this would save us an inordinate amount of time paraphrasing the docs
for all of those functions).  If this is ok, how should I cite the
documentation properly?

Cheers!  Incidentally, the package is up on R-forge:
https://r-forge.r-project.org/projects/gdalutils/

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
259 Computing Applications Building, MC-150
605 East Springfield Avenue
Champaign, IL  61820-6371
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From even.rouault at mines-paris.org  Sat Oct 19 11:59:52 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Oct 2013 20:59:52 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
Message-ID: <201310192059.52677.even.rouault@mines-paris.org>

Hi,

This is a call for discussion for "RFC 43 
GDALMajorObject::GetMetadataDomainList()" :

http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist

Beginning of the RFC inline :
"""

== Summary ==

This (mini)RFC proposes a new virtual method, GetMetadataDomainList(), in the 
GDALMajorObject class (and a C API) to return the list of all available 
metadata domains.

== Background ==

GDALMajorObject currently offers the GetMetadata() and GetMetadataItem() 
methods that both accept a metadata domain argument. But there is no way to 
auto-discover which metadata domains are valid for a given GDALMajorObject 
(i.e. a dataset or raster band). This make it impossible to have generic code 
that can exhaustively discover all metadata in a dataset/raster band.

[...]

"""

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lhomme.xavier at gmail.com  Sun Oct 20 02:38:24 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Sun, 20 Oct 2013 11:38:24 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310192059.52677.even.rouault@mines-paris.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
Message-ID: <CACqzBMxAhA+U_m+Epdtn9-mz5=ZBeUwQ=Z7KxwGhpm83ohPZAg@mail.gmail.com>

Hi
  Is there a way to export Metadata in a XML form (ISO 19139 XML
implementation of ISO 19115 ) ?

xav


2013/10/19 Even Rouault <even.rouault at mines-paris.org>

> Hi,
>
> This is a call for discussion for "RFC 43
> GDALMajorObject::GetMetadataDomainList()" :
>
> http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
>
> Beginning of the RFC inline :
> """
>
> == Summary ==
>
> This (mini)RFC proposes a new virtual method, GetMetadataDomainList(), in
> the
> GDALMajorObject class (and a C API) to return the list of all available
> metadata domains.
>
> == Background ==
>
> GDALMajorObject currently offers the GetMetadata() and GetMetadataItem()
> methods that both accept a metadata domain argument. But there is no way to
> auto-discover which metadata domains are valid for a given GDALMajorObject
> (i.e. a dataset or raster band). This make it impossible to have generic
> code
> that can exhaustively discover all metadata in a dataset/raster band.
>
> [...]
>
> """
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131020/b9132e1d/attachment.html>

From even.rouault at mines-paris.org  Sun Oct 20 05:21:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Oct 2013 14:21:03 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <CACqzBMxAhA+U_m+Epdtn9-mz5=ZBeUwQ=Z7KxwGhpm83ohPZAg@mail.gmail.com>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<CACqzBMxAhA+U_m+Epdtn9-mz5=ZBeUwQ=Z7KxwGhpm83ohPZAg@mail.gmail.com>
Message-ID: <201310201421.03905.even.rouault@mines-paris.org>

Le dimanche 20 octobre 2013 11:38:24, xavier lhomme a ?crit :
> Hi
>   Is there a way to export Metadata in a XML form (ISO 19139 XML
> implementation of ISO 19115 ) ?

Xavier,

This is clearly out of the scope of this RFC.

Apart from a few basic items ( raster dimensions, tiling, geotransform/GCP, 
SRS ), GDAL drivers currently expose metadata as close as possible as the way 
they are encoded in the format they deal with (and GDAL probably predates the 
current metadata standards). By searching a bit, I've found a few projects 
(but I haven't actually tried them) that would expose GDAL metadata in 
standard ways :
  * a QGIS plugin : MetaTools . https://github.com/nextgis/metatools 
  * MetaGETA : Python scripts  . https://code.google.com/p/metageta/
  * Metadata crawler of Geonetwork . 
http://trac.osgeo.org/geonetwork/wiki/crawler
  * ...

MetaGETA seems interesting since it has specialized code for different GDAL 
drivers to extract particular metadata items, in addition to the standard 
metadata.

As far as if this would be interesting to have in GDAL itself, this is an open 
question. I'm not very well versed in metadata standards, but my impression is 
that there are many of them (ISO 19139, that seems to have had several 
versions, and that can have custom profiles apparently, FGDC, ...), and we 
probably wouldn't want to have to implement all of them in each driver.

(Annectodicaly GDAL is a consumer of ISO 19115 in the BAG driver, to extract 
georeferencing.)

I'm also wondering to which extent it is possible to generate valid XML 
metadata documents in an automated way, from the information found in the 
dataset. I'm thinking particularly to mandatory metadata items whose content 
couldn't be found in the dataset.

Even

> 
> xav
> 
> 
> 2013/10/19 Even Rouault <even.rouault at mines-paris.org>
> 
> > Hi,
> > 
> > This is a call for discussion for "RFC 43
> > GDALMajorObject::GetMetadataDomainList()" :
> > 
> > http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
> > 
> > Beginning of the RFC inline :
> > """
> > 
> > == Summary ==
> > 
> > This (mini)RFC proposes a new virtual method, GetMetadataDomainList(), in
> > the
> > GDALMajorObject class (and a C API) to return the list of all available
> > metadata domains.
> > 
> > == Background ==
> > 
> > GDALMajorObject currently offers the GetMetadata() and GetMetadataItem()
> > methods that both accept a metadata domain argument. But there is no way
> > to auto-discover which metadata domains are valid for a given
> > GDALMajorObject (i.e. a dataset or raster band). This make it impossible
> > to have generic code
> > that can exhaustively discover all metadata in a dataset/raster band.
> > 
> > [...]
> > 
> > """
> > 
> > Best regards,
> > 
> > Even
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Sun Oct 20 09:21:23 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 20 Oct 2013 09:21:23 -0700
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310192059.52677.even.rouault@mines-paris.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBf73_4X+N_2O0aZK51+KkZjgCBqp53E0ZjKq=C72jYzQA@mail.gmail.com>

Even,

I'm happy with this RFC.  It's a bit sad that the list of domains is
duplicated and has to be freed again by the caller, but it certainly
avoids any doubts about the lifetime of the returned list.

I have an internal driver here at Planet Labs where I tree any subnode
in our JSON metadata format as a GDAL metadata domain.  It will be
interested to write an implementation of GetMetadataDomainList() for
that.

Best regards,
Frank

On Sat, Oct 19, 2013 at 11:59 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Hi,
>
> This is a call for discussion for "RFC 43
> GDALMajorObject::GetMetadataDomainList()" :
>
> http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
>
> Beginning of the RFC inline :
> """
>
> == Summary ==
>
> This (mini)RFC proposes a new virtual method, GetMetadataDomainList(), in the
> GDALMajorObject class (and a C API) to return the list of all available
> metadata domains.
>
> == Background ==
>
> GDALMajorObject currently offers the GetMetadata() and GetMetadataItem()
> methods that both accept a metadata domain argument. But there is no way to
> auto-discover which metadata domains are valid for a given GDALMajorObject
> (i.e. a dataset or raster band). This make it impossible to have generic code
> that can exhaustively discover all metadata in a dataset/raster band.
>
> [...]
>
> """
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From bontepaarden at gmail.com  Mon Oct 21 05:46:50 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 21 Oct 2013 14:46:50 +0200
Subject: [gdal-dev] Understanding gdal_rasterize
Message-ID: <CAHNf2YQ-1PhH5AdRmg0hncxQ25JxxFsmWxuCm2EJvYk27F4DXg@mail.gmail.com>

I'm trying to understand how gdal_rasterize works.
As a test I'm trying to convert a shapefile with all counties of the USA to
a GeoTiff.
I've added a field to the shapefile called myID which is equal to the shape
number.
The goal is to create a tiff with each county its own value.

This is my command:
gdal_rasterize -a myID -l counties -of GTiff -a_nodata -999 -ts 800 800
counties.shp GDALRasterizeTest.tif

I'm having trouble understanding the -ts or -tr parameters.
Using the above command I get an 800*800 tiff which shows the USA, but it
looks like all pixels are the same color.
I would have expected I could set the cell size and the dimensions of the
resulting tiff file would be equal to the input shapefile.

I also tried creating an ASCII file so I could 'read' the values, but I
can't figure out how to create an ASCII file.

Any help will be much appreciated.

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131021/7b9bb50e/attachment.html>

From peifer at gmx.eu  Mon Oct 21 09:27:50 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon, 21 Oct 2013 18:27:50 +0200
Subject: [gdal-dev] Understanding gdal_rasterize
In-Reply-To: <CAHNf2YQ-1PhH5AdRmg0hncxQ25JxxFsmWxuCm2EJvYk27F4DXg@mail.gmail.com>
References: <CAHNf2YQ-1PhH5AdRmg0hncxQ25JxxFsmWxuCm2EJvYk27F4DXg@mail.gmail.com>
Message-ID: <52655606.1000409@gmx.eu>

On 2013-10-21 14:46, Paul Meems wrote:
> I'm trying to understand how gdal_rasterize works.
> As a test I'm trying to convert a shapefile with all counties of the USA
> to a GeoTiff.
> I've added a field to the shapefile called myID which is equal to the
> shape number.
> The goal is to create a tiff with each county its own value.
>
> This is my command:
> gdal_rasterize -a myID -l counties -of GTiff -a_nodata -999 -ts 800 800
> counties.shp GDALRasterizeTest.tif
>

You could drop "-of GTiff" as GTiff is anyway the default format. 
"-a_nodata -999" makes most sense in combination with "-init -999". 
Anything else looks fine to me.

> I'm having trouble understanding the -ts or -tr parameters.
> Using the above command I get an 800*800 tiff which shows the USA, but
> it looks like all pixels are the same color.

-ts obviously sets the output file size, to 800x800 pixels, as you noted 
yourself. Do all pixels also have the same *value* ?

Hermann

From owntheweb at gmail.com  Mon Oct 21 12:49:16 2013
From: owntheweb at gmail.com (Christopher Stevens)
Date: Mon, 21 Oct 2013 13:49:16 -0600
Subject: [gdal-dev] Creative project for parade float: seeking a good
 projection to match beach ball print template
Message-ID: <CAFHRK0cSJsSNAZ0YyM=4ugc2i6HScxwGOtNpDmXBnSa+AOESdQ@mail.gmail.com>

Hello GDAL Gurus,
I know this request is different, but I send many thanks in advance for
taking a look.

My non-profit organization is creating a small parade float containing
several planets (beach balls), printed by a company asking to fit artwork
in a template that looks like this:

http://www.flickr.com/photos/8139783 at N08/10409243763/

I have all the equirectangular projections I need, but need to figure out
how to break it up and distort it to fit the template. Since this isn't a
fine science, I could probably get away with slicing, bloating and pinching
in Photoshop. I was wondering if there was a good projection however that I
could use in gdalwarp to break an equirectangular projection into eight 45
degree "peels" that make up the beach balls to be printed (it would sure
make my day).

Any thoughts? I truly appreciate the feedback.

Best regards,

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131021/8785cec0/attachment.html>

From owntheweb at gmail.com  Mon Oct 21 13:18:29 2013
From: owntheweb at gmail.com (Christopher Stevens)
Date: Mon, 21 Oct 2013 14:18:29 -0600
Subject: [gdal-dev] Creative project for parade float: seeking a good
 projection to match beach ball print template
In-Reply-To: <CAFHRK0cSJsSNAZ0YyM=4ugc2i6HScxwGOtNpDmXBnSa+AOESdQ@mail.gmail.com>
References: <CAFHRK0cSJsSNAZ0YyM=4ugc2i6HScxwGOtNpDmXBnSa+AOESdQ@mail.gmail.com>
Message-ID: <CAFHRK0esu5vCsu1rPYBU8OYGCY0GgoquhD6Oyr0K9OR687awoQ@mail.gmail.com>

"Sinusoidal Interrupted" may be the appropriate name of the projection I'm
looking for. So far I'm finding examples of twelve and nine segment maps,
but not eight segments at 45 degrees each so far...

Thanks again,

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131021/0224f2e8/attachment.html>

From ahuarte47 at yahoo.es  Tue Oct 22 03:13:29 2013
From: ahuarte47 at yahoo.es (A Huarte)
Date: Tue, 22 Oct 2013 11:13:29 +0100 (BST)
Subject: [gdal-dev]  Support of filemapping for fast rendering in QGIS...
Message-ID: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>

Hi, I want improve the rendering of vector features in QGIS.?

I have opened a new branch?of code in the repository of QGIS(https://github.com/qgis/QGIS/pull/927?//?https://github.com/ahuarte47/QGIS/tree/Issue_8725-OGR)?and the drawing tests give me ~3x faster that original code :-)

I am testing with huge shapefiles (>500.000 records) and I have detect that the OGR-shapefile provider would be optimized using filemapping (boost <http://www.boost.org/>, or others...)

I wonder if there is any support for FileMapping in gdal or planned. My intention would be to redefine the access to the files in this provider with a new function with "SAHooks" using FileMapping. I provide, as explanation, an unfinished implementation using boost with which greatly speeds up the read of files for critical, massive and repetitive processes such as the painting in a map.


On the other hand, this provider may also accelerate with some small changes that are pending of review in the ticket (http://trac.osgeo.org/gdal/ticket/5272) that I hope will be evaluated.


thank you very much!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/dc5d3ee8/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: boost+SAHooks.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/dc5d3ee8/attachment.txt>

From even.rouault at mines-paris.org  Tue Oct 22 05:17:35 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Oct 2013 14:17:35 +0200
Subject: [gdal-dev] Support of filemapping for fast rendering in QGIS...
In-Reply-To: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
References: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
Message-ID: <1382444255.52666cdf9f2aa@imp.free.fr>

Selon A Huarte <ahuarte47 at yahoo.es>:

> Hi, I want improve the rendering of vector features in QGIS.?
>
> I have opened a new branch?of code in the repository of
>
QGIS(https://github.com/qgis/QGIS/pull/927?//?https://github.com/ahuarte47/QGIS/tree/Issue_8725-OGR)?and
> the drawing tests give me ~3x faster that original code :-)

On which OS ?
Is it the performance gain of QGIS + OGR changes combined ?
What is the speed-up in OGR side only ? You could for example use the test_ogrsf
utility as a potential benchmark. You have to build explicitely  with "make
test_ogrsf" / "nmake /f makefile.vc test_ogrsf.exe", in the apps directory of
GDAL.

>
> I am testing with huge shapefiles (>500.000 records) and I have detect that
> the OGR-shapefile provider would be optimized using filemapping (boost
> <http://www.boost.org/>, or others...)
>
> I wonder if there is any support for FileMapping in gdal or planned.

There is none currently. This is something that has been talked about by a few
people, but never implemented yet. I actually had a local experiment on Linux
but I couldn't observe any real performance gain by using mmap() rather than
fread(). Things are maybe different on the Windows side.

> My
> intention would be to redefine the access to the files in this provider with
> a new function with "SAHooks" using FileMapping. I provide, as explanation,
> an unfinished implementation using boost with which greatly speeds up the
> read of files for critical, massive and repetitive processes such as the
> painting in a map.

A more general approach that could benefit to other drivers than shapefile
(potentially most GDAL and OGR drivers actually) would be to implement a
/vsimemmapped/ virtual file system driver. You have many examples of such
drivers in the port subdirectory. And like it is done currently with /vsicache/,
the default virtual file system in cpl_vsil_unix_stdio_64.cpp or
cpl_vsil_win32.cpp could be instructed to use /vsicache/ if an env. variable is
toggled.

>
>
> On the other hand, this provider may also accelerate with some small changes
> that are pending of review in the ticket
> (http://trac.osgeo.org/gdal/ticket/5272) that I hope will be evaluated.

I had skimmed through that one too :

* Did you evaluate the precision loss of using OGRFastAtof() rather than
CPLAtof() ?

* Are you sure that the performance improvement of replacing memcpy() by *dest =
*src is significant ? A decent compiler (GCC ;-)) should optimize that on most
platforms anyway. The thing is that there are still people using odd platforms
where a non-aligned pointer assingment will cause a SIGBUS, hence the need for
memcpy(). If the performance gain is significant enough we could perhaps have a
MEMCPY_DOUBLE macro that on X86 would evaluate to *dest = *ptr and on other
platforms would default to memcpy().

Best regards,

Even


From ahuarte47 at yahoo.es  Tue Oct 22 05:57:54 2013
From: ahuarte47 at yahoo.es (A Huarte)
Date: Tue, 22 Oct 2013 13:57:54 +0100 (BST)
Subject: [gdal-dev] Rv: Support of filemapping for fast rendering in QGIS...
In-Reply-To: <1382446501.51115.YahooMailNeo@web28906.mail.ir2.yahoo.com>
References: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
	<1382446501.51115.YahooMailNeo@web28906.mail.ir2.yahoo.com>
Message-ID: <1382446674.35596.YahooMailNeo@web28904.mail.ir2.yahoo.com>

Hi, I am testing in Windows XP compiling with Visual Studio 2010.



I have a console test application using directly the "shapefil" library.
I will use?test_ogrsf utility for a complete benchmark

I this environment and my test application, using?OGRFastAtof(), the full read of a?huge shape around 500.000 records (500mb of shp file, 150mb of dbf file) with eight double fields goes from 5.6sg to 3.06sg. I don't evaluate that the precision loss, it is a task for check.

In addition, using filemapping with boost library, the full process goes from 3.06sg to 1.45sg.

These values ?as you see ?are approximate, but they give an idea of ??optimization is possible at least for this OS.

It is why I wanted to check this behavior


thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/45f9dd9c/attachment-0001.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: boost+SAHooks.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/45f9dd9c/attachment-0001.txt>

From ahuarte47 at yahoo.es  Tue Oct 22 06:21:44 2013
From: ahuarte47 at yahoo.es (A Huarte)
Date: Tue, 22 Oct 2013 14:21:44 +0100 (BST)
Subject: [gdal-dev] Support of filemapping for fast rendering in QGIS...
In-Reply-To: <1382446501.51115.YahooMailNeo@web28906.mail.ir2.yahoo.com>
References: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
	<1382446501.51115.YahooMailNeo@web28906.mail.ir2.yahoo.com>
Message-ID: <1382448104.55294.YahooMailNeo@web28904.mail.ir2.yahoo.com>

Hi, I am testing in Windows XP compiling with Visual Studio 2010.



I have a console test application using directly the "shapefil" library.
I will use?test_ogrsf utility for a complete benchmark

I this environment and my test application, using?OGRFastAtof(), the full read of a?huge shape around 500.000 records (500mb of shp file, 150mb of dbf file) with eight double fields goes from 5.6sg to 3.06sg. I don't evaluate that the precision loss, it is a task for check.

In addition, using filemapping with boost library, the full process goes from 3.06sg to 1.45sg.

These values ?as you see ?are approximate, but they give an idea of ??optimization is possible at least for this OS.

It is why I wanted to check this behavior


thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/06454533/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: boost+SAHooks.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/06454533/attachment.txt>

From gabrielfusca at suremptec.com.ar  Tue Oct 22 06:27:18 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Tue, 22 Oct 2013 11:27:18 -0200
Subject: [gdal-dev]  Open BIL, BIP, and BSQ raster files without header
Message-ID: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>

Dear all,

I'm using GDAL 1.9.1 and I would like to load binary raster files
especifying manually header information such number of lines, number of
pixels, pixel data type, byte order, bits per pixel.

Also I would like to specify file offset, band offset and line offset for
the file.

Can someone please help me figure this out.

Thanks in advance,

Regards
-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/29709102/attachment.html>

From kyle at pobox.com  Tue Oct 22 09:20:14 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 22 Oct 2013 10:20:14 -0600
Subject: [gdal-dev] Open BIL, BIP, and BSQ raster files without header
In-Reply-To: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>
References: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>
Message-ID: <CAJ0mEz3kme1+nCi6G5fOs6P+TVfcAWzDiYfD5-Oz5EwyOgFYGg@mail.gmail.com>

Gabriel,
Did you look at the VRT dataset?

http://www.gdal.org/gdal_vrttut.html

I suspect that is what you are looking for.

kss

On Tue, Oct 22, 2013 at 7:27 AM, Gabriel Fusca
<gabrielfusca at suremptec.com.ar> wrote:
> Dear all,
>
> I'm using GDAL 1.9.1 and I would like to load binary raster files
> especifying manually header information such number of lines, number of
> pixels, pixel data type, byte order, bits per pixel.
>
> Also I would like to specify file offset, band offset and line offset for
> the file.
>
> Can someone please help me figure this out.
>
> Thanks in advance,
>
> Regards
> --
> Gabriel Fusca
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> gabrielfusca at suremptec.com.ar
> http://www.suremptec.com/
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From yjacolin at free.fr  Tue Oct 22 08:53:27 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Tue, 22 Oct 2013 17:53:27 +0200
Subject: [gdal-dev] Postgis Raster issue
Message-ID: <4282957.krmerpiJts@tatras>

Hello,

I am playing with QGIS and raster date in postgis. I get somme error which get 
me going to frmts/postgisraster/postgisrasterrasterband.cpp:469.

>From QGIS I get "Warning: RasterIO error: Error retrieving raster data from 
database" error message which come from GDAL.

If I read the postgresql log I get:

2013-10-22 17:38:47 CEST STATEMENT:  SELECT st_band(rast, 1), st_width(rast), 
st_height(rast), st_bandpixeltype(rast, 1), st_bandnodatavalue(rast, 1), 
st_scalex(rast), st_scaley(rast), st_upperleftx(rast), st_upperlefty(rast) 
FROM raster.mnt250 WHERE st_intersects(rast, 
st_polygonfromtext('POLYGON((89875,00000000000000000 
7120125,00000000000000000, 4789875,00000000000000000 
7120125,00000000000000000, 4789875,00000000000000000 
2720125,00000000000000000, 89875,00000000000000000 2720125,00000000000000000, 
89875,00000000000000000 7120125,00000000000000000))', 2154))


Which is incorrect (check the decimal caracter) and is create on l.469 in the 
cpp file.

My gdal is quiet old and is a 1.10dev (not 1.10 stable). As I can't build 
again 1.10 stable or trunk, I wondering if it was something known.

Thanks,

Y.
PS : I tried to build gdal 1.10 and master and get this issue:
make[2]: entrant dans le r?pertoire ? 
/home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts/ogdi ?
/bin/bash /home/yjacolin/Documents/Dev/gdal/1.10/gdal/libtool --mode=compile 
--tag=CXX g++ -g -O2 -msse -DHAVE_SSE_AT_COMPILE_TIME  -Wall  -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/gcore -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/alg -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr/ogrsf_frmts -
I/usr/include/ogdi  -DOGR_ENABLED -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port  -c -o ../o/ogdidataset.lo 
ogdidataset.cpp
libtool: compile:  g++ -g -O2 -msse -DHAVE_SSE_AT_COMPILE_TIME -Wall -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/gcore -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/alg -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr/ogrsf_frmts -
I/usr/include/ogdi -DOGR_ENABLED -
I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -c ogdidataset.cpp  -fPIC -
DPIC -o ../o/.libs/ogdidataset.o
In file included from /usr/include/ogdi/ecs.h:353:0,
                 from ogdidataset.cpp:32:
/usr/include/ogdi/ecs_util.h:108:22: fatal error: projects.h: No such file or 
directory
compilation terminated.
make[2]: *** [../o/ogdidataset.lo] Erreur 1
make[2]: quittant le r?pertoire ? 
/home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts/ogdi ?
make[1]: *** [ogdi-install-obj] Erreur 2
make[1]: quittant le r?pertoire ? 
/home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts ?
make: *** [frmts-target] Erreur 2


From lucena_ivan at hotmail.com  Tue Oct 22 10:37:11 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 22 Oct 2013 13:37:11 -0400
Subject: [gdal-dev] Building HDF5 driver against the binary distribution
In-Reply-To: <5261B6DE.7050508@ualg.pt>
References: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>,
	<201310182116.31540.even.rouault@mines-paris.org>,
	<5261B6DE.7050508@ualg.pt>
Message-ID: <BLU173-W495020C4FAE4C2E2E83B7890020@phx.gbl>

Hi Joaquim,

Here it says: 

"The SZIP and ZLIB external libraries are optional for use
with HDF5. The HDF5 pre-compiled binary distributions  include the 
SZIP (Encoder Enabled) and ZLIB libraries that they are compiled with. " [http://www.hdfgroup.org/HDF5/release/obtain5.html]

When they say "include" it means that the szip.dll and zlib.dll are there on the \HDF5\1.8.11\bin when you install the package.

Did you compiled HDF5 1.8.11 with static szip and zlib?

I build GDAL with the internal zlib. What about you?

Thanks a lot,

Ivan

> Date: Fri, 18 Oct 2013 23:31:58 +0100
> From: jluis at ualg.pt
> To: even.rouault at mines-paris.org
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Building HDF5 driver against the binary distribution
> 
> 
> > Hum, this reminds me very much of the very recent thread :
> > http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037257.html . So there
> > might indeed be an issue with HDF5 1.8.11, and not specifically related to
> > Windows. I didn't try myself.
> >
> > Did you try with an older Windows build provided by the HDF_Group ? (provided
> > that you can download older builds...)
> 
> Hi,
> 
> I have build 1.8.11 myself and use it both in Mirone and GMT and had no 
> problems so far. It's linked as dll, not a  plugin but it should not matter.
> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/6836b736/attachment-0001.html>

From gabrielfusca at suremptec.com.ar  Tue Oct 22 10:43:50 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Tue, 22 Oct 2013 15:43:50 -0200
Subject: [gdal-dev] Open BIL, BIP, and BSQ raster files without header
In-Reply-To: <CAJ0mEz3kme1+nCi6G5fOs6P+TVfcAWzDiYfD5-Oz5EwyOgFYGg@mail.gmail.com>
References: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>
	<CAJ0mEz3kme1+nCi6G5fOs6P+TVfcAWzDiYfD5-Oz5EwyOgFYGg@mail.gmail.com>
Message-ID: <CAJ1ZnRWr+QWqqSiOFx+v1ds8kYQ+F7+rtEAwOwZbK-wwNvbLhg@mail.gmail.com>

I'm thinking to configure the header file (.hdr) following the
especification of the header (
http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=BIL,_BIP,_and_BSQ_raster_files
)

skipbytes: file offset
bandrowbytes: band offset
totalrowbytes: row offset

I don't know if GDAL can handle this configuration.


2013/10/22 Kyle Shannon <kyle at pobox.com>

> Gabriel,
> Did you look at the VRT dataset?
>
> http://www.gdal.org/gdal_vrttut.html
>
> I suspect that is what you are looking for.
>
> kss
>
> On Tue, Oct 22, 2013 at 7:27 AM, Gabriel Fusca
> <gabrielfusca at suremptec.com.ar> wrote:
> > Dear all,
> >
> > I'm using GDAL 1.9.1 and I would like to load binary raster files
> > especifying manually header information such number of lines, number of
> > pixels, pixel data type, byte order, bits per pixel.
> >
> > Also I would like to specify file offset, band offset and line offset for
> > the file.
> >
> > Can someone please help me figure this out.
> >
> > Thanks in advance,
> >
> > Regards
> > --
> > Gabriel Fusca
> > SUR Emprendimientos Tecnol?gicos
> >
> > Per? 345  Piso 5to Oficina "B" (C1067AAG)
> > Ciudad de Buenos Aires, Argentina
> > Tel. +54 (11) 4342-2976/84
> > gabrielfusca at suremptec.com.ar
> > http://www.suremptec.com/
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Kyle
>



-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/a6549aa2/attachment.html>

From even.rouault at mines-paris.org  Tue Oct 22 11:00:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Oct 2013 20:00:16 +0200
Subject: [gdal-dev] Postgis Raster issue
In-Reply-To: <4282957.krmerpiJts@tatras>
References: <4282957.krmerpiJts@tatras>
Message-ID: <201310222000.16673.even.rouault@mines-paris.org>

Le mardi 22 octobre 2013 17:53:27, Yves Jacolin (Free) a ?crit :
> Hello,
> 
> I am playing with QGIS and raster date in postgis. I get somme error which
> get me going to frmts/postgisraster/postgisrasterrasterband.cpp:469.
> 
> From QGIS I get "Warning: RasterIO error: Error retrieving raster data from
> database" error message which come from GDAL.
> 
> If I read the postgresql log I get:
> 
> 2013-10-22 17:38:47 CEST STATEMENT:  SELECT st_band(rast, 1),
> st_width(rast), st_height(rast), st_bandpixeltype(rast, 1),
> st_bandnodatavalue(rast, 1), st_scalex(rast), st_scaley(rast),
> st_upperleftx(rast), st_upperlefty(rast) FROM raster.mnt250 WHERE
> st_intersects(rast,
> st_polygonfromtext('POLYGON((89875,00000000000000000
> 7120125,00000000000000000, 4789875,00000000000000000
> 7120125,00000000000000000, 4789875,00000000000000000
> 2720125,00000000000000000, 89875,00000000000000000
> 2720125,00000000000000000, 89875,00000000000000000
> 7120125,00000000000000000))', 2154))
> 
> 
> Which is incorrect (check the decimal caracter) and is create on l.469 in
> the cpp file.

Salut Yves,

Yes this is a known issue that has been fixed in trunk. This is due to the fact 
that the locale within QGIS switches from the C locale to the locale of your 
language that has comma as decimal separator. This would not be terribly 
difficult to fix in 1.10 branch if needed. As a workaround, you can launch qgis 
with "LC_ALL=C qgis" (but that will be in English)

> 
> My gdal is quiet old and is a 1.10dev (not 1.10 stable). As I can't build
> again 1.10 stable or trunk, I wondering if it was something known.
> 
> Thanks,
> 
> Y.
> PS : I tried to build gdal 1.10 and master and get this issue:
> make[2]: entrant dans le r?pertoire ?
> /home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts/ogdi ?
> /bin/bash /home/yjacolin/Documents/Dev/gdal/1.10/gdal/libtool
> --mode=compile --tag=CXX g++ -g -O2 -msse -DHAVE_SSE_AT_COMPILE_TIME 
> -Wall  -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/gcore -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/alg -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr/ogrsf_frmts -
> I/usr/include/ogdi  -DOGR_ENABLED -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port  -c -o
> ../o/ogdidataset.lo ogdidataset.cpp
> libtool: compile:  g++ -g -O2 -msse -DHAVE_SSE_AT_COMPILE_TIME -Wall -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/gcore -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/alg -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/ogr/ogrsf_frmts -
> I/usr/include/ogdi -DOGR_ENABLED -
> I/home/yjacolin/Documents/Dev/gdal/1.10/gdal/port -c ogdidataset.cpp  -fPIC
> - DPIC -o ../o/.libs/ogdidataset.o
> In file included from /usr/include/ogdi/ecs.h:353:0,
>                  from ogdidataset.cpp:32:
> /usr/include/ogdi/ecs_util.h:108:22: fatal error: projects.h: No such file
> or directory
> compilation terminated.
> make[2]: *** [../o/ogdidataset.lo] Erreur 1
> make[2]: quittant le r?pertoire ?
> /home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts/ogdi ?
> make[1]: *** [ogdi-install-obj] Erreur 2
> make[1]: quittant le r?pertoire ?
> /home/yjacolin/Documents/Dev/gdal/1.10/gdal/frmts ?
> make: *** [frmts-target] Erreur 2

Yes, known issue: latest Proj.4 version doesn't install projects.h any longer, 
which was supposed to be a private header file, but is still needed by OGDI. If 
you don't need OGDI, ./configure --without-ogdi . It should also be possible to 
manually install projects.h in /usr/include;

Even

> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Oct 22 11:09:42 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Oct 2013 20:09:42 +0200
Subject: [gdal-dev] Support of filemapping for fast rendering in QGIS...
In-Reply-To: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
References: <1382436809.97952.YahooMailNeo@web28903.mail.ir2.yahoo.com>
Message-ID: <201310222009.42534.even.rouault@mines-paris.org>


> On the other hand, this provider may also accelerate with some small
> changes that are pending of review in the ticket
> (http://trac.osgeo.org/gdal/ticket/5272) that I hope will be evaluated.

Actually when thinking about the atof() optimization, a far better idea would 
be to make sure that QGIS uses OGR_L_SetIgnoredFields() with all the regular 
field names as parameter (except the fields it might use for styling), when it 
just needs the geometry. So no slow or fast atof() at all will be needed. In 
my old copy of QGis git, I see a QgsOgrProvider::setRelevantFields() method 
that is supposed to do something in that area. Something that you should be 
investigated more. You don't need to read 8 double fields just for rendering.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Oct 22 11:17:39 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Oct 2013 20:17:39 +0200
Subject: [gdal-dev] Open BIL, BIP, and BSQ raster files without header
In-Reply-To: <CAJ1ZnRWr+QWqqSiOFx+v1ds8kYQ+F7+rtEAwOwZbK-wwNvbLhg@mail.gmail.com>
References: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>
	<CAJ0mEz3kme1+nCi6G5fOs6P+TVfcAWzDiYfD5-Oz5EwyOgFYGg@mail.gmail.com>
	<CAJ1ZnRWr+QWqqSiOFx+v1ds8kYQ+F7+rtEAwOwZbK-wwNvbLhg@mail.gmail.com>
Message-ID: <201310222017.39466.even.rouault@mines-paris.org>

Le mardi 22 octobre 2013 19:43:50, Gabriel Fusca a ?crit :
> I'm thinking to configure the header file (.hdr) following the
> especification of the header (
> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=BIL,_BIP,_and
> _BSQ_raster_files )
> 
> skipbytes: file offset
> bandrowbytes: band offset
> totalrowbytes: row offset
> 
> I don't know if GDAL can handle this configuration.

This is handled by the GDAL EHdr driver.

Looking at the code :
* skipbytes: yes, taken into account
* bandrowbytes: only taken into account if nbits < 8
* totalrowbytes : only taken into account if nbits < 8

Not sure why the last 2 fields are only taken into account conditionnaly.

If that doesn't work for you, as suggested by Kyle, you could use 
VRTRawRasterBand specification.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From gabrielfusca at suremptec.com.ar  Tue Oct 22 11:16:07 2013
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Tue, 22 Oct 2013 16:16:07 -0200
Subject: [gdal-dev] Open BIL, BIP, and BSQ raster files without header
In-Reply-To: <201310222017.39466.even.rouault@mines-paris.org>
References: <CAJ1ZnRXs2cNe_PAOSuhgHoykDGpifxQ5tDO+Fmv7=xSJMqjSkA@mail.gmail.com>
	<CAJ0mEz3kme1+nCi6G5fOs6P+TVfcAWzDiYfD5-Oz5EwyOgFYGg@mail.gmail.com>
	<CAJ1ZnRWr+QWqqSiOFx+v1ds8kYQ+F7+rtEAwOwZbK-wwNvbLhg@mail.gmail.com>
	<201310222017.39466.even.rouault@mines-paris.org>
Message-ID: <CAJ1ZnRXsxXrm0-i5WCZ=ZGOWvR9pa-CL7ZxudwP=AwsASwGcVg@mail.gmail.com>

I will try first the EHdr driver option.

Thanks a lot Even and Kyle,




2013/10/22 Even Rouault <even.rouault at mines-paris.org>

> Le mardi 22 octobre 2013 19:43:50, Gabriel Fusca a ?crit :
> > I'm thinking to configure the header file (.hdr) following the
> > especification of the header (
> >
> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=BIL,_BIP,_and
> > _BSQ_raster_files )
> >
> > skipbytes: file offset
> > bandrowbytes: band offset
> > totalrowbytes: row offset
> >
> > I don't know if GDAL can handle this configuration.
>
> This is handled by the GDAL EHdr driver.
>
> Looking at the code :
> * skipbytes: yes, taken into account
> * bandrowbytes: only taken into account if nbits < 8
> * totalrowbytes : only taken into account if nbits < 8
>
> Not sure why the last 2 fields are only taken into account conditionnaly.
>
> If that doesn't work for you, as suggested by Kyle, you could use
> VRTRawRasterBand specification.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/c1c78f48/attachment.html>

From jluis at ualg.pt  Tue Oct 22 11:22:03 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue, 22 Oct 2013 19:22:03 +0100
Subject: [gdal-dev] Building HDF5 driver against the binary distribution
In-Reply-To: <BLU173-W495020C4FAE4C2E2E83B7890020@phx.gbl>
References: <BLU173-W42A1128FF17AED38F825490060@phx.gbl>,
	<201310182116.31540.even.rouault@mines-paris.org>,
	<5261B6DE.7050508@ualg.pt>
	<BLU173-W495020C4FAE4C2E2E83B7890020@phx.gbl>
Message-ID: <5266C24B.4080600@ualg.pt>

Hi Ivan

I build HDF with zlib only (no szip) and dynamically but I don't 
understand your question about zlib and GDAL. I don't link GDAL with zlib

Joaquim

> Hi Joaquim,
>
> Here it says:
>
> "The SZIP and ZLIB external libraries are optional for use with HDF5. 
> The HDF5 pre-compiled binary distributions include the SZIP (Encoder 
> Enabled) and ZLIB libraries that they are compiled with. " 
> [http://www.hdfgroup.org/HDF5/release/obtain5.html]
>
> When they say "include" it means that the szip.dll and zlib.dll are 
> there on the \HDF5\1.8.11\bin when you install the package.
>
> Did you compiled HDF5 1.8.11 with static szip and zlib?
>
> I build GDAL with the internal zlib. What about you?
>
> Thanks a lot,
>
> Ivan
>
> > Date: Fri, 18 Oct 2013 23:31:58 +0100
> > From: jluis at ualg.pt
> > To: even.rouault at mines-paris.org
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Building HDF5 driver against the binary 
> distribution
> >
> >
> > > Hum, this reminds me very much of the very recent thread :
> > > http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037257.html 
> . So there
> > > might indeed be an issue with HDF5 1.8.11, and not specifically 
> related to
> > > Windows. I didn't try myself.
> > >
> > > Did you try with an older Windows build provided by the HDF_Group 
> ? (provided
> > > that you can download older builds...)
> >
> > Hi,
> >
> > I have build 1.8.11 myself and use it both in Mirone and GMT and had no
> > problems so far. It's linked as dll, not a plugin but it should not 
> matter.
> >
> > Joaquim
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/d8fe15eb/attachment-0001.html>

From xenon at alphapixel.com  Tue Oct 22 12:48:36 2013
From: xenon at alphapixel.com (Chris Hanson)
Date: Tue, 22 Oct 2013 13:48:36 -0600
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
Message-ID: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>

  I'm trying to access a web mapping service (MapQuest in this case) using
the GDAL WMS driver.

  Inspired by this page:
http://www.3liz.com/blog/rldhont/index.php?post/2012/07/17/OpenStreetMap-Tiles-in-QGIS

  and this
http://developer.mapquest.com/web/products/open/map

 I formulate an XML string such as this:

<GDAL_WMS><Service name="TMS"><ServerUrl>
http://otile1.mqcdn.com/tiles/1.0.0/sat/${z}/${x}/${y}.png</ServerUrl></Service><DataWindow><UpperLeftX>-1.035240e+007</UpperLeftX><UpperLeftY>5.297933e+006</UpperLeftY><LowerRightX>-1.035144e+007</LowerRightX><LowerRightY>5.297055e+006</LowerRightY><TileLevel>1</TileLevel><TileCountX>1</TileCountX><TileCountY>1</TileCountY><YOrigin>top</YOrigin></DataWindow><Projection>EPSG:3857</Projection><BlockSizeX>256</BlockSizeX><BlockSizeY>256</BlockSizeY><BandsCount>3</BandsCount><Cache
/></GDAL_WMS>

  I was hoping this was going to return a georeferenced raster of just the
area I'm interested in (defined by the DataWindow) but instead it seem to
return a virtual image comprising the whole world. However, it comes
bearing georeferencing info

Corner Coordinates:
Upper Left    (-10352400.000, 5297933.000)
Lower Left    (-10352400.000, 5297055.000)
Upper Right   (-10351440.000, 5297933.000)
Lower Right   (-10351440.000, 5297055.000)
Center        (-10351920.000, 5297494.000)

That indicates it IS the area I requested. But when you look at it, it's
the whole world image.

  Is the DataWindow just ignored here?

  What is the proper process for requesting a DataWindow region and getting
a proper reoreferenced raster subset back?

  And yes, we are within the license term for MapQuest. They've been
helping us, but it looks like this issue isn't really them, it's how I'm
using GDAL.

  Google, VirtualEarth and OSM all react the same way -- ignoring the
DataWindow.


-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
http://www.alphapixel.com/
Training ? Consulting ? Contracting
3D ? Scene Graphs (Open Scene Graph/OSG) ? OpenGL 2 ? OpenGL 3 ? OpenGL 4 ?
GLSL ? OpenGL ES 1 ? OpenGL ES 2 ? OpenCL
Digital Imaging ? GIS ? GPS ? osgEarth ? Terrain ? Telemetry ? Cryptography
? Digital Audio ? LIDAR ? Kinect ? Embedded ? Mobile ? iPhone/iPad/iOS ?
Android
@alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131022/91e2986c/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Oct 22 13:21:41 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 22 Oct 2013 20:21:41 +0000 (UTC)
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
References: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>
Message-ID: <loom.20131022T221252-3@post.gmane.org>

Chris Hanson <xenon <at> alphapixel.com> writes:


> What is the proper process for requesting a DataWindow region 
> and getting a proper reoreferenced raster subset back?

I am not sure about how changing the DataWindow size in the XML
configuration file should work but anyway, it is not so good place to play.
Instead, define the TMS source to cover the whole world as in
http://www.gdal.org/frmt_wms_openstreetmap_tms.xml and control the area you
want with the gdal_translate parameters http://www.gdal.org/gdal_translate.html

I believe you want to use -projwin.

-Jukka Rahkonen-



From andre.vautour at caris.com  Tue Oct 22 13:39:12 2013
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 22 Oct 2013 17:39:12 -0300
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
In-Reply-To: <loom.20131022T221252-3@post.gmane.org>
References: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>
	<loom.20131022T221252-3@post.gmane.org>
Message-ID: <5266E270.8030007@caris.com>

> Is the DataWindow just ignored here?
I am pretty sure the data window is actually interpreted as the tile 
extents of the service for the TMS mini driver. You'll notice that 
nothing else in the parameters could be used to georeference the tiles. 
I agree that "window" in this case is misleading and it has caused me 
confusion as well.

I assume it was done that way so that the raster's pyramid/quad-tree is 
aligned with the service's zoom levels. For non-tiled services (e.g. 
WMS), the data window is probably what you expect it to be.

I agree that warping/translating the data to the desired window is 
probably your best option,
Andr?

On 2013-10-22 17:21, Jukka Rahkonen wrote:
> Chris Hanson <xenon <at> alphapixel.com> writes:
>
>
>> What is the proper process for requesting a DataWindow region
>> and getting a proper reoreferenced raster subset back?
> I am not sure about how changing the DataWindow size in the XML
> configuration file should work but anyway, it is not so good place to play.
> Instead, define the TMS source to cover the whole world as in
> http://www.gdal.org/frmt_wms_openstreetmap_tms.xml and control the area you
> want with the gdal_translate parameters http://www.gdal.org/gdal_translate.html
>
> I believe you want to use -projwin.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Oct 23 00:21:34 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 09:21:34 +0200
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
In-Reply-To: <loom.20131022T221252-3@post.gmane.org>
References: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>
	<loom.20131022T221252-3@post.gmane.org>
Message-ID: <201310230921.34350.even.rouault@mines-paris.org>

Le mardi 22 octobre 2013 22:21:41, Jukka Rahkonen a ?crit :
> Chris Hanson <xenon <at> alphapixel.com> writes:
> > What is the proper process for requesting a DataWindow region
> > and getting a proper reoreferenced raster subset back?
> 
> I am not sure about how changing the DataWindow size in the XML
> configuration file should work but anyway, it is not so good place to play.

Yes playing with DataWindow is not appropriate. It defines the the bounding box 
of the source layer, in the tile scheme of the source. in particular at which 
coordinates http://otile1.mqcdn.com/tiles/1.0.0/sat/0/0/0.png will be.

What you would want is the capability to define a window of interest, but that 
doesn't exist in the WMS XML format.

> Instead, define the TMS source to cover the whole world as in
> http://www.gdal.org/frmt_wms_openstreetmap_tms.xml and control the area you
> want with the gdal_translate parameters
> http://www.gdal.org/gdal_translate.html
> 
> I believe you want to use -projwin.

+1

You can also create a virtual dataset file with gdal_translate -of VRT -projwin 

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Wed Oct 23 00:58:01 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Wed, 23 Oct 2013 09:58:01 +0200
Subject: [gdal-dev] Postgis Raster issue
In-Reply-To: <201310222000.16673.even.rouault@mines-paris.org>
References: <4282957.krmerpiJts@tatras>
	<201310222000.16673.even.rouault@mines-paris.org>
Message-ID: <1499085.FN6LecpQK6@tatras>

Hello,

Le mardi 22 octobre 2013 20:00:16 Even Rouault a ?crit :
> Le mardi 22 octobre 2013 17:53:27, Yves Jacolin (Free) a ?crit :
> [..]
> > 
> > 
> > Which is incorrect (check the decimal caracter) and is create on l.469 in
> > the cpp file.
> 
> Salut Yves,
> 
> Yes this is a known issue that has been fixed in trunk. This is due to the
> fact that the locale within QGIS switches from the C locale to the locale
> of your language that has comma as decimal separator. This would not be
> terribly difficult to fix in 1.10 branch if needed. As a workaround, you
> can launch qgis with "LC_ALL=C qgis" (but that will be in English)

I am going to test this as 1st approach and am going to build trunk gdal  to 
test.

> [..]
> 
> Yes, known issue: latest Proj.4 version doesn't install projects.h any
> longer, which was supposed to be a private header file, but is still needed
> by OGDI. If you don't need OGDI, ./configure --without-ogdi . It should
> also be possible to manually install projects.h in /usr/include;

thanks, I tried this yesterday but I get another issue:

/home/yjacolin/Documents/Dev/gdal/gdal/frmts/wms/wmsutils.cpp:136: multiple 
definition of `URLSearchAndReplace(CPLString*, char const*, char const*, ...)'
/home/yjacolin/Documents/Dev/gdal/gdal/frmts/o/.libs/stuff.o:/home/yjacolin/Documents/Dev/gdal/gdal/frmts/wms/stuff.cpp:137: 
first defined here
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Erreur 1
make[1]: quittant le r?pertoire ? /home/yjacolin/Documents/Dev/gdal/gdal ?
make: *** [check-lib] Erreur 2

As I am using ubuntu 12.04 (LTS), may be one of my lib is too old?

Thanks Even,

Y.


From even.rouault at mines-paris.org  Wed Oct 23 01:09:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 10:09:31 +0200
Subject: [gdal-dev] Postgis Raster issue
In-Reply-To: <1499085.FN6LecpQK6@tatras>
References: <4282957.krmerpiJts@tatras>
	<201310222000.16673.even.rouault@mines-paris.org>
	<1499085.FN6LecpQK6@tatras>
Message-ID: <201310231009.31783.even.rouault@mines-paris.org>

> thanks, I tried this yesterday but I get another issue:
> 
> /home/yjacolin/Documents/Dev/gdal/gdal/frmts/wms/wmsutils.cpp:136: multiple
> definition of `URLSearchAndReplace(CPLString*, char const*, char const*,
> ...)'
> /home/yjacolin/Documents/Dev/gdal/gdal/frmts/o/.libs/stuff.o:/home/yjacoli
> n/Documents/Dev/gdal/gdal/frmts/wms/stuff.cpp:137: first defined here
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Erreur 1
> make[1]: quittant le r?pertoire ? /home/yjacolin/Documents/Dev/gdal/gdal ?
> make: *** [check-lib] Erreur 2
> 
> As I am using ubuntu 12.04 (LTS), may be one of my lib is too old?

No, I don't think so. Some files have been renamed in the past few weeks in the 
WMS driver. A "make clean" before rebuilding GDAL should fix that.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bontepaarden at gmail.com  Wed Oct 23 01:59:51 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 23 Oct 2013 10:59:51 +0200
Subject: [gdal-dev] Understanding gdal_rasterize
In-Reply-To: <52655606.1000409@gmx.eu>
References: <CAHNf2YQ-1PhH5AdRmg0hncxQ25JxxFsmWxuCm2EJvYk27F4DXg@mail.gmail.com>
	<52655606.1000409@gmx.eu>
Message-ID: <CAHNf2YQr1eBgWSoDyYV6H-x4BubPM9uUZUqWpRvut7tzTnO-5A@mail.gmail.com>

Thanks Hermann for your explaination.

I probably made a typo because now the pixels have different colors/values
as I would expect.

Thanks,


Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/10/21 Hermann Peifer <peifer at gmx.eu>

> On 2013-10-21 14:46, Paul Meems wrote:
>
>> I'm trying to understand how gdal_rasterize works.
>> As a test I'm trying to convert a shapefile with all counties of the USA
>> to a GeoTiff.
>> I've added a field to the shapefile called myID which is equal to the
>> shape number.
>> The goal is to create a tiff with each county its own value.
>>
>> This is my command:
>> gdal_rasterize -a myID -l counties -of GTiff -a_nodata -999 -ts 800 800
>> counties.shp GDALRasterizeTest.tif
>>
>>
> You could drop "-of GTiff" as GTiff is anyway the default format.
> "-a_nodata -999" makes most sense in combination with "-init -999".
> Anything else looks fine to me.
>
>
>  I'm having trouble understanding the -ts or -tr parameters.
>> Using the above command I get an 800*800 tiff which shows the USA, but
>> it looks like all pixels are the same color.
>>
>
> -ts obviously sets the output file size, to 800x800 pixels, as you noted
> yourself. Do all pixels also have the same *value* ?
>
> Hermann
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131023/74913a42/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Oct 23 05:23:56 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 14:23:56 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <CA+YzLBf73_4X+N_2O0aZK51+KkZjgCBqp53E0ZjKq=C72jYzQA@mail.gmail.com>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<CA+YzLBf73_4X+N_2O0aZK51+KkZjgCBqp53E0ZjKq=C72jYzQA@mail.gmail.com>
Message-ID: <201310231423.56844.even.rouault@mines-paris.org>

Le dimanche 20 octobre 2013 18:21:23, Frank Warmerdam a ?crit :
> Even,
> 
> I'm happy with this RFC.  It's a bit sad that the list of domains is
> duplicated and has to be freed again by the caller, but it certainly
> avoids any doubts about the lifetime of the returned list.

Hi Frank,

Indeed, for the default implementation it would have been doable to return 
oMDMD.GetDomainList() directly, but for specialized implementations this 
wasn't possible and would oblige them to have a member variable to hold the 
return value. So returning a list to free with CSLDestroy() seemed to be a 
simpler approach.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From thorntonmm at ornl.gov  Wed Oct 23 06:00:46 2013
From: thorntonmm at ornl.gov (Thornton, Michele M.)
Date: Wed, 23 Oct 2013 09:00:46 -0400
Subject: [gdal-dev] keep metadata tags when creating multiband file
Message-ID: <9E6B0CE58F7CC24294FAB8EF9902362A879F9F5DBC@EXCHMBB.ornl.gov>

Hello List,

Apologies if this is a repeat post.  Not sure that I was subscribed properly.

I have a number of individual Landsat bands that I'm converting to GeoTiff and would then like to merge to a multiband file using either gdal_merge.py or another gdal utility (gdalbuildvrt, gdal_translate).  In the individually derived geotif files, I am able to internally "label" the corresponding Landsat band by creating a metadata tag.  For example, in using the following gdal_translate command from a file that is Landsat data for Band 1 called landsat.b1.dat:

gdal_translate -of GTiff -strict -stats -mo "Band = LandsatBand ${f: -5:1}" -co "COMPRESS=LZW"  -co "PROFILE=GeoTIFF" $f $f.tif

This creates a metadata tag in the tif file:
-------------------------------------------------
Metadata:
  AREA_OR_POINT=Area
  Band =LandsatBand 1

And there is a separate .aux.xml for each of the tif files:
-------------------------------------------------------------------
<PAMDataset>
  <Metadata>
    <MDI key="Band ">LandsatBand 1</MDI>
  </Metadata>
  <PAMRasterBand band="1">
    <Metadata>
      <MDI key="STATISTICS_MAXIMUM">255</MDI>
      <MDI key="STATISTICS_MEAN">40.826976974681</MDI>
      <MDI key="STATISTICS_MINIMUM">0</MDI>
      <MDI key="STATISTICS_STDDEV">31.471508896152</MDI>
    </Metadata>
  </PAMRasterBand>


Now, I have for example 6 such separate files with Landsat bands labeled 1-5 and 7 respectively.  I would like to keep these metadata tags (Band =LandsatBand #) when I derive a single multiband file to ensure that legacy in the file metadata.  In other words, more internal metadata information than Band_1 - Band_6 when in fact the bands are Landsat bands 1-5, and 7.

So far, gdal_merge.py and the other gdal utilities drop the metadata tags. I've tried the flag -co "PROFILE=GeoTIFF" in gdal_merge.py with no luck.    Is it possible to create a multiband file and retain the metadata band information?

Thanks in advance,
Michele

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131023/1285dd74/attachment.html>

From schwehr at gmail.com  Wed Oct 23 06:32:04 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 23 Oct 2013 06:32:04 -0700
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310201421.03905.even.rouault@mines-paris.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<CACqzBMxAhA+U_m+Epdtn9-mz5=ZBeUwQ=Z7KxwGhpm83ohPZAg@mail.gmail.com>
	<201310201421.03905.even.rouault@mines-paris.org>
Message-ID: <41312190-07F7-4191-BCF9-BCAAEABA2AF8@gmail.com>

Even,

I have been trying to think through how an OGR driver for ISO19115 /  19139 would work.  I'm going to work on a band aid to the new BAG tweak to their ISO metadata, but we definitely could use a bare driver for read / write.  The quest boils down to what is the minimal set of things that we should aim for and how tolerant of craziness should we cope with.  I've seen some "interesting" things passed off as ISO metadata.  As a start to this, I'm going to start trying to collect a range of sample files.  The timing is pretty good in that there is a discussion of FGDC to ISO conversion on the IOOS Data Management and Communications (DMAC) steering committee mailing list.

-kurt

On Oct 20, 2013, at 5:21 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le dimanche 20 octobre 2013 11:38:24, xavier lhomme a ?crit :
>> Hi
>>  Is there a way to export Metadata in a XML form (ISO 19139 XML
>> implementation of ISO 19115 ) ?
> 
> Xavier,
> 
> This is clearly out of the scope of this RFC.
> 
> Apart from a few basic items ( raster dimensions, tiling, geotransform/GCP, 
> SRS ), GDAL drivers currently expose metadata as close as possible as the way 
> they are encoded in the format they deal with (and GDAL probably predates the 
> current metadata standards). By searching a bit, I've found a few projects 
> (but I haven't actually tried them) that would expose GDAL metadata in 
> standard ways :
>  * a QGIS plugin : MetaTools . https://github.com/nextgis/metatools 
>  * MetaGETA : Python scripts  . https://code.google.com/p/metageta/
>  * Metadata crawler of Geonetwork . 
> http://trac.osgeo.org/geonetwork/wiki/crawler
>  * ...
> 
> MetaGETA seems interesting since it has specialized code for different GDAL 
> drivers to extract particular metadata items, in addition to the standard 
> metadata.
> 
> As far as if this would be interesting to have in GDAL itself, this is an open 
> question. I'm not very well versed in metadata standards, but my impression is 
> that there are many of them (ISO 19139, that seems to have had several 
> versions, and that can have custom profiles apparently, FGDC, ...), and we 
> probably wouldn't want to have to implement all of them in each driver.
> 
> (Annectodicaly GDAL is a consumer of ISO 19115 in the BAG driver, to extract 
> georeferencing.)
> 
> I'm also wondering to which extent it is possible to generate valid XML 
> metadata documents in an automated way, from the information found in the 
> dataset. I'm thinking particularly to mandatory metadata items whose content 
> couldn't be found in the dataset.
> 
> Even
> 
>> 
>> xav
>> 
>> 
>> 2013/10/19 Even Rouault <even.rouault at mines-paris.org>
>> 
>>> Hi,
>>> 
>>> This is a call for discussion for "RFC 43
>>> GDALMajorObject::GetMetadataDomainList()" :
>>> 
>>> http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
>>> 
>>> Beginning of the RFC inline :
>>> """
>>> 
>>> == Summary ==
>>> 
>>> This (mini)RFC proposes a new virtual method, GetMetadataDomainList(), in
>>> the
>>> GDALMajorObject class (and a C API) to return the list of all available
>>> metadata domains.
>>> 
>>> == Background ==
>>> 
>>> GDALMajorObject currently offers the GetMetadata() and GetMetadataItem()
>>> methods that both accept a metadata domain argument. But there is no way
>>> to auto-discover which metadata domains are valid for a given
>>> GDALMajorObject (i.e. a dataset or raster band). This make it impossible
>>> to have generic code
>>> that can exhaustively discover all metadata in a dataset/raster band.
>>> 
>>> [...]
>>> 
>>> """
>>> 
>>> Best regards,
>>> 
>>> Even
>>> 
>>> --
>>> Geospatial professional services
>>> http://even.rouault.free.fr/services.html
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Oct 23 07:29:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 16:29:14 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <41312190-07F7-4191-BCF9-BCAAEABA2AF8@gmail.com>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<201310201421.03905.even.rouault@mines-paris.org>
	<41312190-07F7-4191-BCF9-BCAAEABA2AF8@gmail.com>
Message-ID: <201310231629.14300.even.rouault@mines-paris.org>

Kurt,
> 
> I have been trying to think through how an OGR driver for ISO19115 /  19139
> would work. 

Do you mean a driver that would read (and/or write) ISO 19139 XML files ? Do 
such documents fit (enough) well with the OGR data model ? Is there a concept 
of record/feature ? I'm unfortunately not familiar with what those documents 
look like.

> I'm going to work on a band aid to the new BAG tweak to their
> ISO metadata, but we definitely could use a bare driver for read / write. 

Not sure to understand your need about BAG. There is already a "xml:BAG" 
metadata domain into which the ISO19115 stuff is dumped. So your need would be 
an API to parse the XML ? There are perhaps good ideas in the various projects 
that revolve around CSW.

> The quest boils down to what is the minimal set of things that we should
> aim for and how tolerant of craziness should we cope with.  I've seen some
> "interesting" things passed off as ISO metadata.  As a start to this, I'm
> going to start trying to collect a range of sample files.  The timing is
> pretty good in that there is a discussion of FGDC to ISO conversion on the
> IOOS Data Management and Communications (DMAC) steering committee mailing
> list.
> 

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Wed Oct 23 07:31:01 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 23 Oct 2013 07:31:01 -0700
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310231629.14300.even.rouault@mines-paris.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<201310201421.03905.even.rouault@mines-paris.org>
	<41312190-07F7-4191-BCF9-BCAAEABA2AF8@gmail.com>
	<201310231629.14300.even.rouault@mines-paris.org>
Message-ID: <257D97AC-E756-47AB-ABB3-4F9FA597B432@gmail.com>

Still just trying to think it through, but, on the read side, really all I would expect from such a driver would be that it would get the bounding box and perhaps pull a few key fields for the GDAL metadata records.  So I was thinking just a single feature.

On Oct 23, 2013, at 7:29 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Kurt,
>> 
>> I have been trying to think through how an OGR driver for ISO19115 /  19139
>> would work. 
> 
> Do you mean a driver that would read (and/or write) ISO 19139 XML files ? Do 
> such documents fit (enough) well with the OGR data model ? Is there a concept 
> of record/feature ? I'm unfortunately not familiar with what those documents 
> look like.
> 

I'm working to create a collection of examples and I'm pretty much in the same boat.  Just because I've sat through a bunch of training sessions on ISO  metadata doesn't mean I really get it.  They seemed overly stress about capturing a person, address and phone number and going nuts with ontologies? things that are not very high on my priority lists.  Especially when the addresses and phone numbers are long out of date.

>> I'm going to work on a band aid to the new BAG tweak to their
>> ISO metadata, but we definitely could use a bare driver for read / write. 
> 
> Not sure to understand your need about BAG. There is already a "xml:BAG" 
> metadata domain into which the ISO19115 stuff is dumped. So your need would be 
> an API to parse the XML ? There are perhaps good ideas in the various projects 
> that revolve around CSW.

The reader in the BAG directory is a bare minimum implementation.  Out side of BAGs there is definitely a need.  Pardon my ignorance, but what is CSW?

> 
>> The quest boils down to what is the minimal set of things that we should
>> aim for and how tolerant of craziness should we cope with.  I've seen some
>> "interesting" things passed off as ISO metadata.  As a start to this, I'm
>> going to start trying to collect a range of sample files.  The timing is
>> pretty good in that there is a discussion of FGDC to ISO conversion on the
>> IOOS Data Management and Communications (DMAC) steering committee mailing
>> list.
>> 
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html


From doug_newcomb at fws.gov  Wed Oct 23 07:26:08 2013
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 23 Oct 2013 10:26:08 -0400
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310231629.14300.even.rouault@mines-paris.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<201310201421.03905.even.rouault@mines-paris.org>
	<41312190-07F7-4191-BCF9-BCAAEABA2AF8@gmail.com>
	<201310231629.14300.even.rouault@mines-paris.org>
Message-ID: <CALQGVr39n_Ua66PSZ1XJjzU9ZGn=f17fdfnKWzHy6aB3VgM2ig@mail.gmail.com>

Does that include the upcoming ISO19115-1 ?

Doug


On Wed, Oct 23, 2013 at 10:29 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Kurt,
> >
> > I have been trying to think through how an OGR driver for ISO19115 /
>  19139
> > would work.
>
> Do you mean a driver that would read (and/or write) ISO 19139 XML files ?
> Do
> such documents fit (enough) well with the OGR data model ? Is there a
> concept
> of record/feature ? I'm unfortunately not familiar with what those
> documents
> look like.
>
> > I'm going to work on a band aid to the new BAG tweak to their
> > ISO metadata, but we definitely could use a bare driver for read / write.
>
> Not sure to understand your need about BAG. There is already a "xml:BAG"
> metadata domain into which the ISO19115 stuff is dumped. So your need
> would be
> an API to parse the XML ? There are perhaps good ideas in the various
> projects
> that revolve around CSW.
>
> > The quest boils down to what is the minimal set of things that we should
> > aim for and how tolerant of craziness should we cope with.  I've seen
> some
> > "interesting" things passed off as ISO metadata.  As a start to this, I'm
> > going to start trying to collect a range of sample files.  The timing is
> > pretty good in that there is a discussion of FGDC to ISO conversion on
> the
> > IOOS Data Management and Communications (DMAC) steering committee mailing
> > list.
> >
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131023/028b49f5/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Oct 23 07:40:39 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 16:40:39 +0200
Subject: [gdal-dev] keep metadata tags when creating multiband file
In-Reply-To: <9E6B0CE58F7CC24294FAB8EF9902362A879F9F5DBC@EXCHMBB.ornl.gov>
References: <9E6B0CE58F7CC24294FAB8EF9902362A879F9F5DBC@EXCHMBB.ornl.gov>
Message-ID: <201310231640.39112.even.rouault@mines-paris.org>

Michele,

> 
> I have a number of individual Landsat bands that I'm converting to GeoTiff
> and would then like to merge to a multiband file using either
> gdal_merge.py or another gdal utility (gdalbuildvrt, gdal_translate).  In
> the individually derived geotif files, I am able to internally "label" the
> corresponding Landsat band by creating a metadata tag.  For example, in
> using the following gdal_translate command from a file that is Landsat
> data for Band 1 called landsat.b1.dat:
> 
> gdal_translate -of GTiff -strict -stats -mo "Band = LandsatBand ${f: -5:1}"
> -co "COMPRESS=LZW"  -co "PROFILE=GeoTIFF" $f $f.tif
> 
> This creates a metadata tag in the tif file:
> -------------------------------------------------
> Metadata:
>   AREA_OR_POINT=Area
>   Band =LandsatBand 1
> 
> And there is a separate .aux.xml for each of the tif files:
> -------------------------------------------------------------------
> <PAMDataset>
>   <Metadata>
>     <MDI key="Band ">LandsatBand 1</MDI>
>   </Metadata>
>   <PAMRasterBand band="1">
>     <Metadata>
>       <MDI key="STATISTICS_MAXIMUM">255</MDI>
>       <MDI key="STATISTICS_MEAN">40.826976974681</MDI>
>       <MDI key="STATISTICS_MINIMUM">0</MDI>
>       <MDI key="STATISTICS_STDDEV">31.471508896152</MDI>
>     </Metadata>
>   </PAMRasterBand>
> 

Instead of setting the band name at the dataset level, you should set it at 
the band level instead. There's currently no way to do that with 
gdal_translate. You have to edit the .aux.xml file manually :

For example let's consider band1.tif with band1.tif.aux.xml :

<PAMDataset>
  <PAMRasterBand band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 1</MDI>
    </Metadata>
  </PAMRasterBand>
</PAMDataset>

and band2.tif with band2.tif.aux.xml :

<PAMDataset>
  <PAMRasterBand band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 2</MDI>
    </Metadata>
  </PAMRasterBand>
</PAMDataset>

and then you would want to run "gdalbuildvrt -separate merged.vrt band1.tif 
band2.tif". Unfortunately I see that it also loses band metadata. I don't 
think there's a fundamental reason to explain that they are lost, except that 
it hasn't been coded yet.

You can still put then again by editing the merged.vrt and adding the     
<Metadata>      <MDI key="Band">LandsatBand X</MDI>     </Metadata> at 
appropriate place.

See below :

<VRTDataset rasterXSize="20" rasterYSize="20">
  <SRS>PROJCS["NAD27 / UTM zone 
11N",GEOGCS["NAD27",DATUM["North_American_Datum_1927",SPHEROID["Clarke 
1866",6378206.4,294.9786982139006,AUTHORITY["EPSG","7008"]],AUTHORITY["EPSG","6267"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4267"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-117],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","26711"]]</SRS>
  <GeoTransform>  4.4072000000000000e+05,  6.0000000000000000e+01,  
0.0000000000000000e+00,  3.7513200000000000e+06,  0.0000000000000000e+00, 
-6.0000000000000000e+01</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 1</MDI>
    </Metadata>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte1.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="10" DataType="Byte" 
BlockXSize="20" BlockYSize="10" />
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="10" />
      <DstRect xOff="0" yOff="0" xSize="20" ySize="10" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <Metadata>
      <MDI key="Band">LandsatBand 2</MDI>
    </Metadata>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte2.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="20" DataType="Byte" 
BlockXSize="20" BlockYSize="20" />
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="20" />
      <DstRect xOff="0" yOff="0" xSize="20" ySize="20" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>


And then

$ gdal_translate merged.vrt merged.tif 

$ gdalinfo merged.tif 
Driver: VRT/Virtual Raster
Files: merged.tif 
Size is 20, 20
Coordinate System is:
PROJCS["NAD27 / UTM zone 11N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26711"]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
Lower Left  (  440720.000, 3750120.000) (117d38'27.92"W, 33d53'29.51"N)
Upper Right (  441920.000, 3751320.000) (117d37'41.48"W, 33d54' 8.71"N)
Lower Right (  441920.000, 3750120.000) (117d37'41.20"W, 33d53'29.75"N)
Center      (  441320.000, 3750720.000) (117d38' 4.70"W, 33d53'49.11"N)
Band 1 Block=20x20 Type=Byte, ColorInterp=Gray
  Metadata:
    Band=LandsatBand 1
Band 2 Block=20x20 Type=Byte, ColorInterp=Undefined
  Metadata:
    Band=LandsatBand 2

Best rergards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Oct 23 07:45:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 16:45:55 +0200
Subject: [gdal-dev] Call for discussion for "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <257D97AC-E756-47AB-ABB3-4F9FA597B432@gmail.com>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<201310231629.14300.even.rouault@mines-paris.org>
	<257D97AC-E756-47AB-ABB3-4F9FA597B432@gmail.com>
Message-ID: <201310231645.56043.even.rouault@mines-paris.org>


> The reader in the BAG directory is a bare minimum implementation.  Out side
> of BAGs there is definitely a need.  Pardon my ignorance, but what is CSW?

OGC CSW (Catalog Service Webservice) : 
http://www.opengeospatial.org/standards/cat

And there are a few OSGeo related projects around this :
- http://pycsw.org/
- http://geopython.github.io/OWSLib/
- ... ?


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From thorntonmm at ornl.gov  Wed Oct 23 08:27:06 2013
From: thorntonmm at ornl.gov (Thornton, Michele M.)
Date: Wed, 23 Oct 2013 11:27:06 -0400
Subject: [gdal-dev] keep metadata tags when creating multiband file
In-Reply-To: <201310231640.39112.even.rouault@mines-paris.org>
References: <9E6B0CE58F7CC24294FAB8EF9902362A879F9F5DBC@EXCHMBB.ornl.gov>
	<201310231640.39112.even.rouault@mines-paris.org>
Message-ID: <9E6B0CE58F7CC24294FAB8EF9902362A879F9F5E19@EXCHMBB.ornl.gov>

Thank you Even,

Very useful information.  

Kind regards,
Michele

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Wednesday, October 23, 2013 10:41 AM
To: gdal-dev at lists.osgeo.org
Cc: Thornton, Michele M.
Subject: Re: [gdal-dev] keep metadata tags when creating multiband file

Michele,

> 
> I have a number of individual Landsat bands that I'm converting to 
> GeoTiff and would then like to merge to a multiband file using either 
> gdal_merge.py or another gdal utility (gdalbuildvrt, gdal_translate).  
> In the individually derived geotif files, I am able to internally 
> "label" the corresponding Landsat band by creating a metadata tag.  
> For example, in using the following gdal_translate command from a file 
> that is Landsat data for Band 1 called landsat.b1.dat:
> 
> gdal_translate -of GTiff -strict -stats -mo "Band = LandsatBand ${f: -5:1}"
> -co "COMPRESS=LZW"  -co "PROFILE=GeoTIFF" $f $f.tif
> 
> This creates a metadata tag in the tif file:
> -------------------------------------------------
> Metadata:
>   AREA_OR_POINT=Area
>   Band =LandsatBand 1
> 
> And there is a separate .aux.xml for each of the tif files:
> -------------------------------------------------------------------
> <PAMDataset>
>   <Metadata>
>     <MDI key="Band ">LandsatBand 1</MDI>
>   </Metadata>
>   <PAMRasterBand band="1">
>     <Metadata>
>       <MDI key="STATISTICS_MAXIMUM">255</MDI>
>       <MDI key="STATISTICS_MEAN">40.826976974681</MDI>
>       <MDI key="STATISTICS_MINIMUM">0</MDI>
>       <MDI key="STATISTICS_STDDEV">31.471508896152</MDI>
>     </Metadata>
>   </PAMRasterBand>
> 

Instead of setting the band name at the dataset level, you should set it at the band level instead. There's currently no way to do that with gdal_translate. You have to edit the .aux.xml file manually :

For example let's consider band1.tif with band1.tif.aux.xml :

<PAMDataset>
  <PAMRasterBand band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 1</MDI>
    </Metadata>
  </PAMRasterBand>
</PAMDataset>

and band2.tif with band2.tif.aux.xml :

<PAMDataset>
  <PAMRasterBand band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 2</MDI>
    </Metadata>
  </PAMRasterBand>
</PAMDataset>

and then you would want to run "gdalbuildvrt -separate merged.vrt band1.tif band2.tif". Unfortunately I see that it also loses band metadata. I don't think there's a fundamental reason to explain that they are lost, except that it hasn't been coded yet.

You can still put then again by editing the merged.vrt and adding the     
<Metadata>      <MDI key="Band">LandsatBand X</MDI>     </Metadata> at 
appropriate place.

See below :

<VRTDataset rasterXSize="20" rasterYSize="20">
  <SRS>PROJCS["NAD27 / UTM zone
11N",GEOGCS["NAD27",DATUM["North_American_Datum_1927",SPHEROID["Clarke
1866",6378206.4,294.9786982139006,AUTHORITY["EPSG","7008"]],AUTHORITY["EPSG","6267"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4267"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-117],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","26711"]]</SRS>
  <GeoTransform>  4.4072000000000000e+05,  6.0000000000000000e+01, 0.0000000000000000e+00,  3.7513200000000000e+06,  0.0000000000000000e+00, -6.0000000000000000e+01</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
    <Metadata>
      <MDI key="Band">LandsatBand 1</MDI>
    </Metadata>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte1.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="10" DataType="Byte" 
BlockXSize="20" BlockYSize="10" />
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="10" />
      <DstRect xOff="0" yOff="0" xSize="20" ySize="10" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <Metadata>
      <MDI key="Band">LandsatBand 2</MDI>
    </Metadata>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte2.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="20" DataType="Byte" 
BlockXSize="20" BlockYSize="20" />
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="20" />
      <DstRect xOff="0" yOff="0" xSize="20" ySize="20" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>


And then

$ gdal_translate merged.vrt merged.tif 

$ gdalinfo merged.tif
Driver: VRT/Virtual Raster
Files: merged.tif
Size is 20, 20
Coordinate System is:
PROJCS["NAD27 / UTM zone 11N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26711"]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N) Lower Left  (  440720.000, 3750120.000) (117d38'27.92"W, 33d53'29.51"N) Upper Right (  441920.000, 3751320.000) (117d37'41.48"W, 33d54' 8.71"N) Lower Right (  441920.000, 3750120.000) (117d37'41.20"W, 33d53'29.75"N)
Center      (  441320.000, 3750720.000) (117d38' 4.70"W, 33d53'49.11"N)
Band 1 Block=20x20 Type=Byte, ColorInterp=Gray
  Metadata:
    Band=LandsatBand 1
Band 2 Block=20x20 Type=Byte, ColorInterp=Undefined
  Metadata:
    Band=LandsatBand 2

Best rergards,

Even

--
Geospatial professional services
http://even.rouault.free.fr/services.html

From Elke.Ochs at erdc.dren.mil  Wed Oct 23 10:05:18 2013
From: Elke.Ochs at erdc.dren.mil (Ochs, Elke ERDC-RDE-CRREL-NH)
Date: Wed, 23 Oct 2013 17:05:18 +0000
Subject: [gdal-dev] ReprojectImage and nodata
Message-ID: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>

ReprojectImage does not maintain areas of nodata as I would expect it should.  Small areas of nodata are getting erased and larger areas are reduced in size.  I'm reprojecting from geographic to Albers, using approximately the same  cell size (converted from dd to meters).  I'm using GDAL 1.9.2 in Python.

Gdalwarp does a better job of maintaining nodata cells.  Is there a way to get ReprojectImage to handle nodata in a similar way?  I'd like to avoid subprocessing out to use gdalwarp.

Regards,
Elke


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131023/635a92f0/attachment.html>

From even.rouault at mines-paris.org  Wed Oct 23 10:25:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 19:25:47 +0200
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>
References: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>
Message-ID: <201310231925.47440.even.rouault@mines-paris.org>

Le mercredi 23 octobre 2013 19:05:18, Ochs, Elke ERDC-RDE-CRREL-NH a ?crit :
> ReprojectImage does not maintain areas of nodata as I would expect it
> should.  Small areas of nodata are getting erased and larger areas are
> reduced in size.  I'm reprojecting from geographic to Albers, using
> approximately the same  cell size (converted from dd to meters).  I'm
> using GDAL 1.9.2 in Python.
> 
> Gdalwarp does a better job of maintaining nodata cells.  Is there a way to
> get ReprojectImage to handle nodata in a similar way?  

Elke,

Always difficult to diagnose those problems as there are a few variables to 
consider.
Looking at the code of GDALReprojectImage(), I see it should take into account 
the source nodata value, but it will ignore the nodata value that you may have 
set on the target dataset, contrary to gdalwarp. That might be your issue. 
Your source nodata values are likely to become 0 in the target datasource.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Elke.Ochs at erdc.dren.mil  Wed Oct 23 10:31:34 2013
From: Elke.Ochs at erdc.dren.mil (Ochs, Elke ERDC-RDE-CRREL-NH)
Date: Wed, 23 Oct 2013 17:31:34 +0000
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <201310231925.47440.even.rouault@mines-paris.org>
References: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>
	<201310231925.47440.even.rouault@mines-paris.org>
Message-ID: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D54E@MS-EX2VKS.erdc.dren.mil>

Thank-you Even,

The source nodata values that are erased in the target data source aren't 0, but interpolated values based on surrounding non-nodata values.

I am using bilinear resampling in both my ReprojectImage and gdalwarp tests.  I don't know if that makes any difference (sorry I didn't include that in my 1st post).

Elke

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Wednesday, October 23, 2013 1:26 PM
To: gdal-dev at lists.osgeo.org
Cc: Ochs, Elke ERDC-RDE-CRREL-NH
Subject: Re: [gdal-dev] ReprojectImage and nodata

Le mercredi 23 octobre 2013 19:05:18, Ochs, Elke ERDC-RDE-CRREL-NH a ?crit :
> ReprojectImage does not maintain areas of nodata as I would expect it 
> should.  Small areas of nodata are getting erased and larger areas are 
> reduced in size.  I'm reprojecting from geographic to Albers, using 
> approximately the same  cell size (converted from dd to meters).  I'm 
> using GDAL 1.9.2 in Python.
> 
> Gdalwarp does a better job of maintaining nodata cells.  Is there a 
> way to get ReprojectImage to handle nodata in a similar way?

Elke,

Always difficult to diagnose those problems as there are a few variables to consider.
Looking at the code of GDALReprojectImage(), I see it should take into account the source nodata value, but it will ignore the nodata value that you may have set on the target dataset, contrary to gdalwarp. That might be your issue. 
Your source nodata values are likely to become 0 in the target datasource.

Even

--
Geospatial professional services
http://even.rouault.free.fr/services.html

From dshean at gmail.com  Wed Oct 23 12:19:48 2013
From: dshean at gmail.com (David Shean)
Date: Wed, 23 Oct 2013 12:19:48 -0700
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <201310231925.47440.even.rouault@mines-paris.org>
References: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>
	<201310231925.47440.even.rouault@mines-paris.org>
Message-ID: <0D278A75-A67A-4BCC-945A-A4448EA4D00F@gmail.com>

Even, 
I encountered the issue you mention back in May:

http://osgeo-org.1560.x6.nabble.com/gdal-dev-ReprojectImage-and-nodata-td5057270.html

The current ReprojectImage nodata handling is a bit confusing.  Do you see a relatively simple fix to mirror the behavior of gdalwarp?  

Thanks.
-David

On Oct 23, 2013, at 10:25 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le mercredi 23 octobre 2013 19:05:18, Ochs, Elke ERDC-RDE-CRREL-NH a ?crit :
>> ReprojectImage does not maintain areas of nodata as I would expect it
>> should.  Small areas of nodata are getting erased and larger areas are
>> reduced in size.  I'm reprojecting from geographic to Albers, using
>> approximately the same  cell size (converted from dd to meters).  I'm
>> using GDAL 1.9.2 in Python.
>> 
>> Gdalwarp does a better job of maintaining nodata cells.  Is there a way to
>> get ReprojectImage to handle nodata in a similar way?  
> 
> Elke,
> 
> Always difficult to diagnose those problems as there are a few variables to 
> consider.
> Looking at the code of GDALReprojectImage(), I see it should take into account 
> the source nodata value, but it will ignore the nodata value that you may have 
> set on the target dataset, contrary to gdalwarp. That might be your issue. 
> Your source nodata values are likely to become 0 in the target datasource.
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jef at norbit.de  Wed Oct 23 12:16:22 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 23 Oct 2013 21:16:22 +0200
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field lookup
Message-ID: <20131023191622.GA2991@norbit.de>

Hi,

I propose a motion to formally adopt RFC 42 : OGR Layer laundered field lookup

    http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields

There was only a short discussion following the call for discussion:

    http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037188.html

So I think the RFC (and it's pull request) can be adopted as is.

I'll start with:

+1 jef


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)                                   IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From even.rouault at mines-paris.org  Wed Oct 23 12:49:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Oct 2013 21:49:55 +0200
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <0D278A75-A67A-4BCC-945A-A4448EA4D00F@gmail.com>
References: <49A547E4CC0E624EB0B69B7A9B7C0A4007B3D52E@MS-EX2VKS.erdc.dren.mil>
	<201310231925.47440.even.rouault@mines-paris.org>
	<0D278A75-A67A-4BCC-945A-A4448EA4D00F@gmail.com>
Message-ID: <201310232149.55459.even.rouault@mines-paris.org>

Le mercredi 23 octobre 2013 21:19:48, David Shean a ?crit :
> Even,
> I encountered the issue you mention back in May:
> 
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-ReprojectImage-and-nodata-td50
> 57270.html
> 
> The current ReprojectImage nodata handling is a bit confusing.  Do you see
> a relatively simple fix to mirror the behavior of gdalwarp?

Probably a matter of setting the padfDstNoData array to the target dataset 
nodata value, if that's the issue. There's also the INIT_DEST warping option 
that can play a role on this.

> 
> Thanks.
> -David
> 
> On Oct 23, 2013, at 10:25 AM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> > Le mercredi 23 octobre 2013 19:05:18, Ochs, Elke ERDC-RDE-CRREL-NH a ?crit 
:
> >> ReprojectImage does not maintain areas of nodata as I would expect it
> >> should.  Small areas of nodata are getting erased and larger areas are
> >> reduced in size.  I'm reprojecting from geographic to Albers, using
> >> approximately the same  cell size (converted from dd to meters).  I'm
> >> using GDAL 1.9.2 in Python.
> >> 
> >> Gdalwarp does a better job of maintaining nodata cells.  Is there a way
> >> to get ReprojectImage to handle nodata in a similar way?
> > 
> > Elke,
> > 
> > Always difficult to diagnose those problems as there are a few variables
> > to consider.
> > Looking at the code of GDALReprojectImage(), I see it should take into
> > account the source nodata value, but it will ignore the nodata value
> > that you may have set on the target dataset, contrary to gdalwarp. That
> > might be your issue. Your source nodata values are likely to become 0 in
> > the target datasource.
> > 
> > Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Oct 23 21:35:37 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 24 Oct 2013 04:35:37 +0000 (UTC)
Subject: [gdal-dev] Call for discussion for
References: <201310192059.52677.even.rouault@mines-paris.org>
Message-ID: <loom.20131024T062148-614@post.gmane.org>

My first vote as PSC member:

+1

No doubt the feature will be useful and I trust that RFC is technically sound.

I wonder why the list of affected drivers does not include any of the
JPEG2000 drivers. Don't they need changes or is metadata handling in
JPEG2000 special in some way? I guess that the format itself (JPX) can store
metadata from whatever domains.

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Thu Oct 24 02:01:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Oct 2013 11:01:43 +0200
Subject: [gdal-dev] Call for discussion for
In-Reply-To: <loom.20131024T062148-614@post.gmane.org>
References: <201310192059.52677.even.rouault@mines-paris.org>
	<loom.20131024T062148-614@post.gmane.org>
Message-ID: <1382605303.5268e1f73635a@imp.free.fr>

Hi Jukka,

> My first vote as PSC member:
>
> +1

I didn't call yet for the formal vote, but thanks for your support.

>
> No doubt the feature will be useful and I trust that RFC is technically
> sound.
>
> I wonder why the list of affected drivers does not include any of the
> JPEG2000 drivers. Don't they need changes or is metadata handling in
> JPEG2000 special in some way? I guess that the format itself (JPX) can store
> metadata from whatever domains.

The JPEG2000 drivers don't need to implement the new virtual method since they
actively set their metadata with SetMetadata() (that goes to the oMDMD member of
GDALMajorObject) instead of lazying loading them through a specialized
GetMetadata()/GetMetadataItem(). A specialized implementation of the new virtual
method is only needed in the case of lazy loading. In other cases such as the
JPEG2000 driver the base implementation in
GDALMajorObject::GetMetadataDomainList() will do the job.

Regarding the JPEG2000 drivers, they can potentially expose the xml:XMP metadata
domain. From the code, I see that JP2KAK can also expose GML metadata in
xml:XXXX metadata domains (probably the GML geo-registration where
XXXX="gml.root-instance", as well as other XML JP2 boxes where XXXX will be
BOX_YYYY and YYYY a sequential number).

Even



From lhomme.xavier at gmail.com  Thu Oct 24 02:43:46 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Thu, 24 Oct 2013 11:43:46 +0200
Subject: [gdal-dev] Retrieve metadata from vector product
Message-ID: <CACqzBMwTPLuedcLJxeP+_YFb0jGsD0TwizLpRySJ9TSx1rRRcw@mail.gmail.com>

Hi

How to obtain metadta from vector product ?

xav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131024/531d02dd/attachment.html>

From even.rouault at mines-paris.org  Thu Oct 24 11:21:04 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Oct 2013 20:21:04 +0200
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
In-Reply-To: <20131023191622.GA2991@norbit.de>
References: <20131023191622.GA2991@norbit.de>
Message-ID: <201310242021.04175.even.rouault@mines-paris.org>

Le mercredi 23 octobre 2013 21:16:22, J?rgen E. Fischer a ?crit :
> Hi,
> 
> I propose a motion to formally adopt RFC 42 : OGR Layer laundered field
> lookup
> 
>     http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields

+1 Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Thu Oct 24 11:17:12 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 24 Oct 2013 11:17:12 -0700
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
In-Reply-To: <201310242021.04175.even.rouault@mines-paris.org>
References: <20131023191622.GA2991@norbit.de>
	<201310242021.04175.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBc-LHbm+8=en3nC6E3vbJNemqfdzvu-=4Hi0f7wDu88FQ@mail.gmail.com>

Looks good to me!

+1 Frank


On Thu, Oct 24, 2013 at 11:21 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le mercredi 23 octobre 2013 21:16:22, J?rgen E. Fischer a ?crit :
> > Hi,
> >
> > I propose a motion to formally adopt RFC 42 : OGR Layer laundered field
> > lookup
> >
> >     http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields
>
> +1 Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131024/f116ae15/attachment.html>

From dmorissette at mapgears.com  Thu Oct 24 11:21:33 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 24 Oct 2013 14:21:33 -0400
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
In-Reply-To: <20131023191622.GA2991@norbit.de>
References: <20131023191622.GA2991@norbit.de>
Message-ID: <5269652D.70805@mapgears.com>

+1

Daniel


On 13-10-23 3:16 PM, J?rgen E. Fischer wrote:
> Hi,
>
> I propose a motion to formally adopt RFC 42 : OGR Layer laundered field lookup
>
>      http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields
>
> There was only a short discussion following the call for discussion:
>
>      http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037188.html
>
> So I think the RFC (and it's pull request) can be adopted as is.
>
> I'll start with:
>
> +1 jef
>
>
> J?rgen
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From szekerest at gmail.com  Thu Oct 24 14:29:50 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 24 Oct 2013 23:29:50 +0200
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
In-Reply-To: <20131023191622.GA2991@norbit.de>
References: <20131023191622.GA2991@norbit.de>
Message-ID: <CACALY+To03qLsb+YreguPFurGJaw83G0of-q3XuLNhKnyrn1dA@mail.gmail.com>

+1

Tamas


2013/10/23 J?rgen E. <jef at norbit.de>

> Hi,
>
> I propose a motion to formally adopt RFC 42 : OGR Layer laundered field
> lookup
>
>     http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields
>
> There was only a short discussion following the call for discussion:
>
>     http://lists.osgeo.org/pipermail/gdal-dev/2013-October/037188.html
>
> So I think the RFC (and it's pull request) can be adopted as is.
>
> I'll start with:
>
> +1 jef
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
> QGIS PSC member (RM)                                   IRC: jef on FreeNode
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131024/694dd4ca/attachment.html>

From even.rouault at mines-paris.org  Thu Oct 24 15:22:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Oct 2013 00:22:32 +0200
Subject: [gdal-dev] (Another) Motion: Adopt "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
Message-ID: <201310250022.32347.even.rouault@mines-paris.org>

Hi,

Apart from a few interesting side discussions related to ISO metadata, the 
proposal doesn't seem to be controversial.

Since the first version, I've added a section to the RFC to mention 2 
extensions to gdalinfo that make use of the new API :
 * a "-listmdd" option that will print the metadata domains available
 * "-mdd all" will display the content of all metadata domains. 

So:

Motion : I move to adopt RFC 43 GDALMajorObject::GetMetadataDomainList()

    http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist

Starting with my +1

Best regards,

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Thu Oct 24 21:10:19 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 25 Oct 2013 04:10:19 +0000 (UTC)
Subject: [gdal-dev] (Another) Motion: Adopt
References: <201310250022.32347.even.rouault@mines-paris.org>
Message-ID: <loom.20131025T004247-920@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> Motion : I move to adopt RFC 43 GDALMajorObject::GetMetadataDomainList()
> 
>     http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
> 
> Starting with my +1
> 
> Best regards,
> 
> Even


+1

-Jukka Rahkonen- 





From dmorissette at mapgears.com  Fri Oct 25 06:47:57 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 25 Oct 2013 09:47:57 -0400
Subject: [gdal-dev] (Another) Motion: Adopt "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310250022.32347.even.rouault@mines-paris.org>
References: <201310250022.32347.even.rouault@mines-paris.org>
Message-ID: <526A768D.5000703@mapgears.com>

+1

Daniel

On 13-10-24 6:22 PM, Even Rouault wrote:
> Hi,
>
> Apart from a few interesting side discussions related to ISO metadata, the
> proposal doesn't seem to be controversial.
>
> Since the first version, I've added a section to the RFC to mention 2
> extensions to gdalinfo that make use of the new API :
>   * a "-listmdd" option that will print the metadata domains available
>   * "-mdd all" will display the content of all metadata domains.
>
> So:
>
> Motion : I move to adopt RFC 43 GDALMajorObject::GetMetadataDomainList()
>
>      http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
>
> Starting with my +1
>
> Best regards,
>
> Even
>
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From jukka.rahkonen at mmmtike.fi  Sun Oct 27 09:02:40 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 27 Oct 2013 16:02:40 +0000 (UTC)
Subject: [gdal-dev] Setting the georeferencing priority for GDAL
Message-ID: <loom.20131027T161438-77@post.gmane.org>

Hi,

Sometimes an image can have several and ambiguous metadata for
georeferencing. Mapserver has a method to deal with ambiguous internal
geotiff metadata and world files and user can override the internal metadata
by using PROCESSING "EXTENT_PRIORITY=WORLD" in the mapfile.
http://www.mapserver.org/input/raster.html#special-processing-directives.
I thought it was PROCESSING "EXTENT_PRIORITY=WORLDFILE" but perhaps both
keywords are supported.

I wonder if GDAL supports this same worldfile override with some secret
config option. At least it is not listed on page
http://trac.osgeo.org/gdal/wiki/ConfigOptions.

I can also see that GDAL does have a config option GMLJP2OVERRIDE but I
could not easily find what is is doing.

And finally when I was playing with a "gdal_edit.py" utility I discovered
that there are at least 4 ways to georeference a JPEG2000 file:
- use worldfile .wld or .j2w
- use internal GeoJP2 (GeoTIFF) georeferencing
- use internal GML georeferencing
- use an external .aux.xlm file

I noticed that command 
 python gdal_edit.py -a_srs epsg:3067 metajp2test.jp2
was creating a file names "metajp2test.jp2.aux" which does contain the right
georeferencing data.  However, if I run gdalinfo it is looking for the
internal GeoJP2 metadata and it reports that my JPEG2000 file is still using
an unknown projection.

This feels a bit messy. Perhaps there is a need to have a GDAL wide config
option for what metadata to search and use for georeferencing. In my case I
would like to set it to use "external GDAL aux.xml". In addition, I think
that this setting should be made safe so that if aux.xml file is not found
then the image is considered to be without georeferencing. Or perhaps the
config option could take a list like "auxiliary_xml,GeoJP2" with all the
acceptable alternatives in priority order.

-Jukka Rahkonen-




From warmerdam at pobox.com  Sun Oct 27 09:32:59 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 27 Oct 2013 16:32:59 +0000
Subject: [gdal-dev] Setting the georeferencing priority for GDAL
In-Reply-To: <loom.20131027T161438-77@post.gmane.org>
References: <loom.20131027T161438-77@post.gmane.org>
Message-ID: <CA+YzLBccRutBFZwGDL57zE3yfM291k-yBcof7zzgHQPxWpXaMQ@mail.gmail.com>

Jukka,

Part of why behavior is inconsistent now is that the logic is in each
driver.  Some might give precidence to a world file over something
internal, or to .aux.xml.

I think it would be *desirable* for .aux.xml to take precedence over
internal information
 when it is available as it is normally only in the .aux.xml file because
it was updated or accurate information could not be written within the file
itself.

I'm not sure how we would go about updating all drivers to have consistent
behavior.  I do like the idea that drivers can control this.  I just think
it would be good to have a suggested behavior we aim for.

I'm not too keen on a configuration option as those are always a sort of
hack, though it is possible.

I will note you can always "gdal_translate" to VRT and then hand edit or
alter it with gdal_edit.py to get a wrapped dataset with the desired
georeferencing and other metadata.

Best regards,
Frank


On Sun, Oct 27, 2013 at 4:02 PM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Hi,
>
> Sometimes an image can have several and ambiguous metadata for
> georeferencing. Mapserver has a method to deal with ambiguous internal
> geotiff metadata and world files and user can override the internal
> metadata
> by using PROCESSING "EXTENT_PRIORITY=WORLD" in the mapfile.
> http://www.mapserver.org/input/raster.html#special-processing-directives.
> I thought it was PROCESSING "EXTENT_PRIORITY=WORLDFILE" but perhaps both
> keywords are supported.
>
> I wonder if GDAL supports this same worldfile override with some secret
> config option. At least it is not listed on page
> http://trac.osgeo.org/gdal/wiki/ConfigOptions.
>
> I can also see that GDAL does have a config option GMLJP2OVERRIDE but I
> could not easily find what is is doing.
>
> And finally when I was playing with a "gdal_edit.py" utility I discovered
> that there are at least 4 ways to georeference a JPEG2000 file:
> - use worldfile .wld or .j2w
> - use internal GeoJP2 (GeoTIFF) georeferencing
> - use internal GML georeferencing
> - use an external .aux.xlm file
>
> I noticed that command
>  python gdal_edit.py -a_srs epsg:3067 metajp2test.jp2
> was creating a file names "metajp2test.jp2.aux" which does contain the
> right
> georeferencing data.  However, if I run gdalinfo it is looking for the
> internal GeoJP2 metadata and it reports that my JPEG2000 file is still
> using
> an unknown projection.
>
> This feels a bit messy. Perhaps there is a need to have a GDAL wide config
> option for what metadata to search and use for georeferencing. In my case I
> would like to set it to use "external GDAL aux.xml". In addition, I think
> that this setting should be made safe so that if aux.xml file is not found
> then the image is considered to be without georeferencing. Or perhaps the
> config option could take a list like "auxiliary_xml,GeoJP2" with all the
> acceptable alternatives in priority order.
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131027/f3b7e46b/attachment.html>

From pramsey at cleverelephant.ca  Sun Oct 27 14:10:08 2013
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sun, 27 Oct 2013 14:10:08 -0700
Subject: [gdal-dev] GPKG Driver
Message-ID: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>

Hey all,

I'm preparing to do up a GeoPkg driver. In searching the mail history
and the web, the only references I see so far are suggestions as a
summer of code project (which weren't taken up?) which included the
recommendation of wrapping it into the existing sqlite driver.

Couple questions:

- Did anything happen on the summer of code suggestion, or any other
independent development front?

- On the "wrap it into the existing driver" recommendation, how strong
is that? If am doing the driver, I'm loath to try and wrap it in,
particularly since the current SQLite driver already includes so much
optionality and different behaviour. My last experience trying that
kind of thing, on a much simpler driver in PDAL (trying to add
pgpointcloud support into a generic soci oracle/pg driver) resulted in
a lot of time spent and eventually writing a new native driver that
was vastly easier to write and understand. Which is a long, whiny way
of saying: I'd like to implement GPKG as a separate driver, not as
part of SQLite, if that's acceptable (or, not completely
unacceptable).

Thanks!

Paul

From even.rouault at mines-paris.org  Sun Oct 27 16:09:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Oct 2013 00:09:28 +0100
Subject: [gdal-dev] GPKG Driver
In-Reply-To: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
Message-ID: <201310280009.28875.even.rouault@mines-paris.org>

Paul,

> Couple questions:
> 
> - Did anything happen on the summer of code suggestion, or any other
> independent development front?

No related activity on SoC side, and no public activity on it that I'm aware 
of (apart from some interest in doing so mentionned)

> 
> - On the "wrap it into the existing driver" recommendation, how strong
> is that? If am doing the driver, I'm loath to try and wrap it in,
> particularly since the current SQLite driver already includes so much
> optionality and different behaviour. 

Yes, I can understand that. The current state of SQLite driver is that it is 
crowded with various features specific to (different versions of) Spatialite. 
/me being largely culprit about the resulting messy appearance of it.

> Which is a long, whiny way
> of saying: I'd like to implement GPKG as a separate driver, not as
> part of SQLite, if that's acceptable (or, not completely
> unacceptable).

Actually, if I were to develop it, my idea would to take that as an 
opportunity to try to refactor a bit some classes (mainly OGRSQLiteTableLayer) 
to separate the generic SQLite stuff ( that would go in 
OGRSQLiteAbstractTableLayer : CreateFeature(), SetFeature(), DeleteFeature(), 
GetFeature(), ... ) from the specific Spatialite stuff ( OGRSPLiteTableLayer : 
spatial index, statistics, etc... ). 

The GPKG support could be a driver on its own ( it has its specific .gpkg 
extension, so we can quickly distinguish between sqlite/spatialite and gpkg), 
with dedicated OGRDriver and OGRDataSource, but it could benefit from the base 
SQLite classes.

But it would be certainly acceptable to start GPKG driver as separate code, 
with some copy & pasting of usefull existing SQLite driver code. And with 
hindsight, some refactoring could perhaps be done.

Now my turn for questions :
- From your questions, I suppose you only consider the vector side of GPKG ?
- Do you intend in writing everything from scratch, or did you consider using 
https://bitbucket.org/luciad/libgpkg ?  Which is, AFAIK, the equivalent of 
libspatialite for GPKG. Contains the SQL functions mandated by the spec, the 
triggers etc. 

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From 2284168009 at qq.com  Sun Oct 27 22:35:20 2013
From: 2284168009 at qq.com (=?gb18030?B?wbrM7LO9?=)
Date: Mon, 28 Oct 2013 13:35:20 +0800
Subject: [gdal-dev] how to union(merge) polygons using ogr?
Message-ID: <tencent_41A05F3355DAF4690D4C0C3D@qq.com>

Hi all,
I need to union(make OGRGeometry wkbPolygon and that has no interiorRings) polygons in the following 2 situations:
1. OGRFeature::getGeometryType() returns wkbPolygon and OGRPolygon::getNumInteriorRings() returns an int that is bigger than 0.
2.  OGRFeature::getGeometryType() returns wkbMultiPolygon. 
Neither OGRGeometry::Union nor UnionCascaded returns what I need.
Union just removes the interiorRing ;UnionCascaded returns nullptr.
Am I using these functions the right way or Do I have to use other member functions?
Thanks.
Regards,
???
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/f98fab86/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Oct 28 00:36:15 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 Oct 2013 07:36:15 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
References: <20131023191622.GA2991@norbit.de>
Message-ID: <loom.20131028T083544-613@post.gmane.org>

J?rgen E. Fischer <jef <at> norbit.de> writes:

> 
> Hi,
> 
> I propose a motion to formally adopt RFC 42 : OGR Layer laundered field lookup
> 
>     http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields

+1 

-Jukka Rahkonen-


From lauramail at iol.it  Mon Oct 28 06:57:42 2013
From: lauramail at iol.it (laura0)
Date: Mon, 28 Oct 2013 06:57:42 -0700 (PDT)
Subject: [gdal-dev] gdalwarp multiple nodata
Message-ID: <1382968662835-5086084.post@n6.nabble.com>

Hi all,
I have discovered gdalwarp options -srcnodata -dstnodata support just 1 no
data value per band. Is there a way to set multiple values to NoData?

Thanks much,
Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-multiple-nodata-tp5086084.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ivan.marchesini at gmail.com  Mon Oct 28 07:55:53 2013
From: ivan.marchesini at gmail.com (Ivan Marchesini)
Date: Mon, 28 Oct 2013 15:55:53 +0100
Subject: [gdal-dev] understanding gdalwarp default output resolution
Message-ID: <1382972153.4006.6.camel@ivan-N56VZ>

Dear all,
I'm using gdalwarp to reproject a wgs84 srtm (3 arcseconds) tile to a
projected utm zone. I do not set "-tr" or "-ts" options, hence the final
output resolution is estimated by the gdalwarp module itself.

For my tile I obtained an output resolution of 81.19 meters and I'm
wondering if one could explain which is the rationale behind this value.

Many thanks

Ivan



From jsimpson at wxtrends.com  Mon Oct 28 08:17:06 2013
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Mon, 28 Oct 2013 10:17:06 -0500
Subject: [gdal-dev] Satellite projections
Message-ID: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>

Hi guys:

I have a few data sets that come from the GOES satellites (Full Disk) and a
couple others.  I can use one of the SSEC's programs to convert from their
format to a netCDF.  No useful SRS info comes along in the conversion.

I've applied an SRS to them using gdal_translate and PROJ.4 that looks like:

"+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of
the satellites)

(I've also tried):
+proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208

I'm wanting to get them into EPSG:4326.  When I do this, I end up with
corner coordinates of a very small area just below the satellites position.


Does anyone have an suggestions that might help me warp this into
position?  I'm sure there's something obvious that I'm missing.
I found this page, and the copied/pasted bit about the projection, but my
attempts have not been successful.

http://www.gdal.org/frmt_msg.html
*Georeference and Projection*
*
*
*The images are using the Geostationary Satellite View projection. Most GIS
packages don't recognize this projection (we only know of ILWIS that does
have this projection), but gdalwarp.exe can be used to re-project the
images.*
*
*
Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/f4079012/attachment.html>

From srp at geo.ku.dk  Mon Oct 28 08:33:15 2013
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Mon, 28 Oct 2013 15:33:15 +0000
Subject: [gdal-dev] Satellite projections
In-Reply-To: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>

Hi Jerl,
We work with Meteosat data in full disk projection and it's a bit of a headache! Try these commands in GDAL and see if they work for you:

gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49 +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE $TEMPFILE
gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE $OUTFILE

Just remember to change the +lon_0 to whatever you need for GOES. Also change the -tr and -te for gdal :-) You can also add +lat_0 but to be honest I never found it made a difference (perhaps it is ignored?)

Cheers,
Simon

________________________________
Fra: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] p? vegne af Jerl Simpson [jsimpson at wxtrends.com]
Sendt: 28. oktober 2013 16:17
Til: gdal-dev at lists.osgeo.org
Emne: [gdal-dev] Satellite projections

Hi guys:

I have a few data sets that come from the GOES satellites (Full Disk) and a couple others.  I can use one of the SSEC's programs to convert from their format to a netCDF.  No useful SRS info comes along in the conversion.

I've applied an SRS to them using gdal_translate and PROJ.4 that looks like:

"+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of the satellites)

(I've also tried):
+proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208

I'm wanting to get them into EPSG:4326.  When I do this, I end up with corner coordinates of a very small area just below the satellites position.

Does anyone have an suggestions that might help me warp this into position?  I'm sure there's something obvious that I'm missing.
I found this page, and the copied/pasted bit about the projection, but my attempts have not been successful.

http://www.gdal.org/frmt_msg.html
Georeference and Projection

The images are using the Geostationary Satellite View projection. Most GIS packages don't recognize this projection (we only know of ILWIS that does have this projection), but gdalwarp.exe can be used to re-project the images.

Thanks!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/c87fb31a/attachment-0001.html>

From jsimpson at wxtrends.com  Mon Oct 28 08:41:22 2013
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Mon, 28 Oct 2013 10:41:22 -0500
Subject: [gdal-dev] Satellite projections
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
Message-ID: <CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>

Thanks Simon!

I'll give it a shot.  Meteosat is definitely a pain, and it's one of the
satellites I'm working with.

If you don't mind me asking, what do you typically have in your -a_ullr
designation for gdal_translate?  Or are you pulling out sections and it
varies?  I'd like to get the full image, if possible.

Thanks again!

Jerl


On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk> wrote:

>  Hi Jerl,
> We work with Meteosat data in full disk projection and it's a bit of a
> headache! Try these commands in GDAL and see if they work for you:
>
>  gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49
> +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE
> $TEMPFILE
> gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs
> '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE
> $OUTFILE
>
>  Just remember to change the +lon_0 to whatever you need for GOES. Also
> change the -tr and -te for gdal :-) You can also add +lat_0 but to be
> honest I never found it made a difference (perhaps it is ignored?)
>
>  Cheers,
> Simon
>
>  ------------------------------
> *Fra:* gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
> p? vegne af Jerl Simpson [jsimpson at wxtrends.com]
> *Sendt:* 28. oktober 2013 16:17
> *Til:* gdal-dev at lists.osgeo.org
> *Emne:* [gdal-dev] Satellite projections
>
>   Hi guys:
>
>  I have a few data sets that come from the GOES satellites (Full Disk)
> and a couple others.  I can use one of the SSEC's programs to convert from
> their format to a netCDF.  No useful SRS info comes along in the conversion.
>
>  I've applied an SRS to them using gdal_translate and PROJ.4 that looks
> like:
>
> "+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of
> the satellites)
>
>  (I've also tried):
> +proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208
>
>  I'm wanting to get them into EPSG:4326.  When I do this, I end up with
> corner coordinates of a very small area just below the satellites position.
>
>
>  Does anyone have an suggestions that might help me warp this into
> position?  I'm sure there's something obvious that I'm missing.
> I found this page, and the copied/pasted bit about the projection, but my
> attempts have not been successful.
>
>  http://www.gdal.org/frmt_msg.html
>  *Georeference and Projection*
> *
> *
> *The images are using the Geostationary Satellite View projection. Most
> GIS packages don't recognize this projection (we only know of ILWIS that
> does have this projection), but gdalwarp.exe can be used to re-project the
> images.*
>  *
> *
> Thanks!
>
>


-- 

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com

Corporate ? http://www.wxtrends.com****

B2B ? http://www.wt360business.com****

B2C ? http://www.wt360.com****

**

This communication is privileged and may contain confidential information.
It's intended only for the use of the person or entity named above. If you
are not the intended recipient, do not distribute or copy this
communication. If you have received this communication in error, please
notify the sender immediately and return the original to the email address
above. ? Copyright 2013 Weather Trends International, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/6bf43d2b/attachment.html>

From jsimpson at wxtrends.com  Mon Oct 28 08:50:43 2013
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Mon, 28 Oct 2013 10:50:43 -0500
Subject: [gdal-dev] Satellite projections
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB366E63ADA0@P1KITMBX05WC03.unicph.domain>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63ADA0@P1KITMBX05WC03.unicph.domain>
Message-ID: <CACC0xJLXh0K0=fJJXbFUdSOraM3pz30U5BZLTbS2HbiJjq1dMg@mail.gmail.com>

Thanks again Simon.

Your information helped me find this:
http://www.remotesensing.org/geotiff/proj_list/geos.html

Jerl




On Mon, Oct 28, 2013 at 10:46 AM, Simon Richard Proud <srp at geo.ku.dk> wrote:

>  Oops, sorry! I forgot to include the -a_ullr variables. I have:
> up_left_x=-5570248.832537
> up_left_y=5570244.832537
> low_rig_x=5567248.429179
> low_rig_y=-5567252.429179
>
>  That should cover the full disk and seems to work with all satellites -
> you just need to vary the longitude to change between GOES/MSG/MTSAT etc.
> Cheers,
> Simon
>
>  ------------------------------
> *Fra:* Jerl Simpson [jsimpson at wxtrends.com]
> *Sendt:* 28. oktober 2013 16:41
> *Til:* Simon Richard Proud
> *Cc:* gdal-dev at lists.osgeo.org
> *Emne:* Re: [gdal-dev] Satellite projections
>
>   Thanks Simon!
>
>  I'll give it a shot.  Meteosat is definitely a pain, and it's one of the
> satellites I'm working with.
>
>  If you don't mind me asking, what do you typically have in your -a_ullr
> designation for gdal_translate?  Or are you pulling out sections and it
> varies?  I'd like to get the full image, if possible.
>
>  Thanks again!
>
>  Jerl
>
>
> On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk>wrote:
>
>>  Hi Jerl,
>> We work with Meteosat data in full disk projection and it's a bit of a
>> headache! Try these commands in GDAL and see if they work for you:
>>
>>  gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49
>> +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE
>> $TEMPFILE
>> gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs
>> '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE
>> $OUTFILE
>>
>>  Just remember to change the +lon_0 to whatever you need for GOES. Also
>> change the -tr and -te for gdal :-) You can also add +lat_0 but to be
>> honest I never found it made a difference (perhaps it is ignored?)
>>
>>  Cheers,
>> Simon
>>
>>  ------------------------------
>> *Fra:* gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
>> p? vegne af Jerl Simpson [jsimpson at wxtrends.com]
>> *Sendt:* 28. oktober 2013 16:17
>> *Til:* gdal-dev at lists.osgeo.org
>> *Emne:* [gdal-dev] Satellite projections
>>
>>    Hi guys:
>>
>>  I have a few data sets that come from the GOES satellites (Full Disk)
>> and a couple others.  I can use one of the SSEC's programs to convert from
>> their format to a netCDF.  No useful SRS info comes along in the conversion.
>>
>>  I've applied an SRS to them using gdal_translate and PROJ.4 that looks
>> like:
>>
>> "+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one
>> of the satellites)
>>
>>  (I've also tried):
>> +proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208
>>
>>  I'm wanting to get them into EPSG:4326.  When I do this, I end up with
>> corner coordinates of a very small area just below the satellites position.
>>
>>
>>  Does anyone have an suggestions that might help me warp this into
>> position?  I'm sure there's something obvious that I'm missing.
>> I found this page, and the copied/pasted bit about the projection, but my
>> attempts have not been successful.
>>
>>  http://www.gdal.org/frmt_msg.html
>>  *Georeference and Projection*
>> *
>> *
>> *The images are using the Geostationary Satellite View projection. Most
>> GIS packages don't recognize this projection (we only know of ILWIS that
>> does have this projection), but gdalwarp.exe can be used to re-project the
>> images.*
>>  *
>> *
>> Thanks!
>>
>>
>
>
>  --
>
> Jerl Simpson
>
> Sr. Systems Engineer
>
> Weather Trends International
>
> jsimpson at wxtrends.com
>
> Corporate ? http://www.wxtrends.com****
>
> B2B ? http://www.wt360business.com****
>
> B2C ? http://www.wt360.com****
>
> **
>
>  This communication is privileged and may contain confidential
> information. It's intended only for the use of the person or entity named
> above. If you are not the intended recipient, do not distribute or copy
> this communication. If you have received this communication in error,
> please notify the sender immediately and return the original to the email
> address above. ? Copyright 2013 Weather Trends International, Inc.
>
>


-- 

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com

Corporate ? http://www.wxtrends.com****

B2B ? http://www.wt360business.com****

B2C ? http://www.wt360.com****

**

This communication is privileged and may contain confidential information.
It's intended only for the use of the person or entity named above. If you
are not the intended recipient, do not distribute or copy this
communication. If you have received this communication in error, please
notify the sender immediately and return the original to the email address
above. ? Copyright 2013 Weather Trends International, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/fd06f4b5/attachment-0001.html>

From kyle at pobox.com  Mon Oct 28 08:57:32 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 28 Oct 2013 09:57:32 -0600
Subject: [gdal-dev] understanding gdalwarp default output resolution
In-Reply-To: <1382972153.4006.6.camel@ivan-N56VZ>
References: <1382972153.4006.6.camel@ivan-N56VZ>
Message-ID: <CAJ0mEz1NG7Jdn7C3HoMJt-jQEf_Cu-BatzOrG==4rytxN=pPHg@mail.gmail.com>

On Mon, Oct 28, 2013 at 8:55 AM, Ivan Marchesini
<ivan.marchesini at gmail.com> wrote:
> Dear all,
> I'm using gdalwarp to reproject a wgs84 srtm (3 arcseconds) tile to a
> projected utm zone. I do not set "-tr" or "-ts" options, hence the final
> output resolution is estimated by the gdalwarp module itself.
>
> For my tile I obtained an output resolution of 81.19 meters and I'm
> wondering if one could explain which is the rationale behind this value.
>
> Many thanks
>
> Ivan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Forgot the list...

Ivan,
gdalwarp uses GDALSuggestedWarpOutput:
http://gdal.org/gdal__alg_8h.html#a816819e7495bfce06dbd110f7c57af65

The docs state:

"""
...
Then a resolution is computed with the intent that the length of the
distance from the top left corner of the output imagery to the bottom
right corner would represent the same number of pixels as in the
source image. Note that if the image is somewhat rotated the diagonal
taken isn't of the whole output bounding rectangle, but instead of the
locations where the top/left and bottom/right corners transform. The
output pixel size is always square. This is intended to approximately
preserve the resolution of the input data in the output file.
...
"""

Essentially it tries to match the size of the source image in x size and y size.

kss

-- 
Kyle

From jsimpson at wxtrends.com  Mon Oct 28 09:01:07 2013
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Mon, 28 Oct 2013 11:01:07 -0500
Subject: [gdal-dev] Satellite projections
In-Reply-To: <526E88EF.3040603@bmtargoss.com>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
	<526E88EF.3040603@bmtargoss.com>
Message-ID: <CACC0xJJ9QR_Z4HywF-JwFkfyd_c_9gjQFCuXXPK+SRCY5GotCg@mail.gmail.com>

Hi Reinoud:

I've had moderate success using the info and JAR file found here:
http://www.ssec.wisc.edu/visit/netcdf/

It converts the GOES East/West, MTSTAT, and METEOSAT data to netCDF.
I can then use gdaldem to get an image.  I'm working on assigning the SRS
info now, thanks to Simon's suggestions.

Jerl


On Mon, Oct 28, 2013 at 10:55 AM, Reinoud Bokhorst <
reinoud.bokhorst at bmtargoss.com> wrote:

>  Dear Jerl, Simon,
> Apologize for mixing into this thread but I am currently investigating how
> to process EUMETCAST data to more usuable formats like NetCDF and GeoTIFF.
> The data stream contains MSG HRIT data and GOES15/17 + MTSAT2 LRIT data.
> I'll also need to reproject like you do so this post already proves useful!
>
> I can read the MSG data trough gdal/meteosatlib but I can't read the GOES
> and MTSAT2 LRIT data yet. Do you perhaps have some useful pointers to
> software to use? Online documentation is rather scarce...
>
> Thanks Reinoud
>
>
>
>
> On 10/28/2013 04:41 PM, Jerl Simpson wrote:
>
> Thanks Simon!
>
>  I'll give it a shot.  Meteosat is definitely a pain, and it's one of the
> satellites I'm working with.
>
>  If you don't mind me asking, what do you typically have in your -a_ullr
> designation for gdal_translate?  Or are you pulling out sections and it
> varies?  I'd like to get the full image, if possible.
>
>  Thanks again!
>
>  Jerl
>
>
> On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk>wrote:
>
>>  Hi Jerl,
>> We work with Meteosat data in full disk projection and it's a bit of a
>> headache! Try these commands in GDAL and see if they work for you:
>>
>>  gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49
>> +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE
>> $TEMPFILE
>> gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs
>> '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE
>> $OUTFILE
>>
>>  Just remember to change the +lon_0 to whatever you need for GOES. Also
>> change the -tr and -te for gdal :-) You can also add +lat_0 but to be
>> honest I never found it made a difference (perhaps it is ignored?)
>>
>>  Cheers,
>> Simon
>>
>>  ------------------------------
>> *Fra:* gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
>> p? vegne af Jerl Simpson [jsimpson at wxtrends.com]
>> *Sendt:* 28. oktober 2013 16:17
>> *Til:* gdal-dev at lists.osgeo.org
>> *Emne:* [gdal-dev] Satellite projections
>>
>>   Hi guys:
>>
>>  I have a few data sets that come from the GOES satellites (Full Disk)
>> and a couple others.  I can use one of the SSEC's programs to convert from
>> their format to a netCDF.  No useful SRS info comes along in the conversion.
>>
>>  I've applied an SRS to them using gdal_translate and PROJ.4 that looks
>> like:
>>
>> "+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one
>> of the satellites)
>>
>>  (I've also tried):
>> +proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208
>>
>>  I'm wanting to get them into EPSG:4326.  When I do this, I end up with
>> corner coordinates of a very small area just below the satellites position.
>>
>>
>>  Does anyone have an suggestions that might help me warp this into
>> position?  I'm sure there's something obvious that I'm missing.
>> I found this page, and the copied/pasted bit about the projection, but my
>> attempts have not been successful.
>>
>>  http://www.gdal.org/frmt_msg.html
>>  *Georeference and Projection*
>> *
>> *
>> *The images are using the Geostationary Satellite View projection. Most
>> GIS packages don't recognize this projection (we only know of ILWIS that
>> does have this projection), but gdalwarp.exe can be used to re-project the
>> images.*
>>  *
>> *
>> Thanks!
>>
>>
>
>
>  --
>
> Jerl Simpson
>
> Sr. Systems Engineer
>
> Weather Trends International
>
> jsimpson at wxtrends.com
>
> Corporate ? http://www.wxtrends.com
>
> B2B ? http://www.wt360business.com
>
> B2C ? http://www.wt360.com
>
>
>
>  This communication is privileged and may contain confidential
> information. It's intended only for the use of the person or entity named
> above. If you are not the intended recipient, do not distribute or copy
> this communication. If you have received this communication in error,
> please notify the sender immediately and return the original to the email
> address above. ? Copyright 2013 Weather Trends International, Inc.
>
> ______________________________________________________________________
> This email has been scanned by the Symantec Email Security.cloud service.
> For more information please visit http://www.symanteccloud.com
> ______________________________________________________________________
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Reinoud Bokhorst
> Advisor Oceanography & ICT
> BMT ARGOSS
>
> Tel.:         +31 527-242299
> Direct:     +31 527-656421
> Mobile:    +31 6-54714427
> www.bmt.org/linkedin | www.twitter.com/bmtgroup | www.facebook.com/bmtgroup | www.youtube.com/bmtgroupltd
>
> BMT ARGOSS b.v., Voorsterweg 28, 8316 PT, Marknesse, The Netherlands
>
> (Postal address : PO Box 61, 8325 ZH, Vollenhove, The Netherlands)
>
> Registered in The Netherlands, Registered no. 39060160.
>
> Unless otherwise agreed by BMT ARGOSS in writing, all  work, services, goods or products supplied by BMT ARGOSS shall be subject to and governed by BMT ARGOSS?s own terms and conditions which are available for inspection from BMT ARGOSS on request.
>
> E-mail confidentiality notice and disclaimer:
>
> The contents of this e-mail and any attachments are intended for the use of the mail addressee(s) shown. If you are not that person, you are not allowed to read it, to take any action based upon it or to copy it, forward, distribute or disclose the contents of it and you should please delete it from your system. BMT ARGOSS does not accept liability for any errors or omissions in the context of this e-mail or its attachments which arise as a result of internet transmission, nor accept liability for statements which are those of the author and clearly not made on behalf of BMT ARGOSS.
>
> Please consider the environmental impacts of printing this email, and only do so if really necessary
>
>


-- 

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com

Corporate ? http://www.wxtrends.com****

B2B ? http://www.wt360business.com****

B2C ? http://www.wt360.com****

**

This communication is privileged and may contain confidential information.
It's intended only for the use of the person or entity named above. If you
are not the intended recipient, do not distribute or copy this
communication. If you have received this communication in error, please
notify the sender immediately and return the original to the email address
above. ? Copyright 2013 Weather Trends International, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/cefa9b46/attachment-0001.html>

From reinoud.bokhorst at bmtargoss.com  Mon Oct 28 08:55:27 2013
From: reinoud.bokhorst at bmtargoss.com (Reinoud Bokhorst)
Date: Mon, 28 Oct 2013 16:55:27 +0100
Subject: [gdal-dev] Satellite projections
In-Reply-To: <CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
Message-ID: <526E88EF.3040603@bmtargoss.com>

Dear Jerl, Simon,
Apologize for mixing into this thread but I am currently investigating 
how to process EUMETCAST data to more usuable formats like NetCDF and 
GeoTIFF.  The data stream contains MSG HRIT data and GOES15/17 + MTSAT2 
LRIT data. I'll also need to reproject like you do so this post already 
proves useful!

I can read the MSG data trough gdal/meteosatlib but I can't read the 
GOES and MTSAT2 LRIT data yet. Do you perhaps have some useful pointers 
to software to use? Online documentation is rather scarce...

Thanks Reinoud



On 10/28/2013 04:41 PM, Jerl Simpson wrote:
> Thanks Simon!
>
> I'll give it a shot.  Meteosat is definitely a pain, and it's one of 
> the satellites I'm working with.
>
> If you don't mind me asking, what do you typically have in your 
> -a_ullr designation for gdal_translate?  Or are you pulling out 
> sections and it varies?  I'd like to get the full image, if possible.
>
> Thanks again!
>
> Jerl
>
>
> On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk 
> <mailto:srp at geo.ku.dk>> wrote:
>
>     Hi Jerl,
>     We work with Meteosat data in full disk projection and it's a bit
>     of a headache! Try these commands in GDAL and see if they work for
>     you:
>
>     gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8
>     +lon_0=9.49 +h=35785831" -a_ullr
>     $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE $TEMPFILE
>     gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0'
>     -t_srs '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70
>     -order 3 $TEMPFILE $OUTFILE
>
>     Just remember to change the +lon_0 to whatever you need for GOES.
>     Also change the -tr and -te for gdal :-) You can also add +lat_0
>     but to be honest I never found it made a difference (perhaps it is
>     ignored?)
>
>     Cheers,
>     Simon
>
>     ------------------------------------------------------------------------
>     *Fra:* gdal-dev-bounces at lists.osgeo.org
>     <mailto:gdal-dev-bounces at lists.osgeo.org>
>     [gdal-dev-bounces at lists.osgeo.org
>     <mailto:gdal-dev-bounces at lists.osgeo.org>] p? vegne af Jerl
>     Simpson [jsimpson at wxtrends.com <mailto:jsimpson at wxtrends.com>]
>     *Sendt:* 28. oktober 2013 16:17
>     *Til:* gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     *Emne:* [gdal-dev] Satellite projections
>
>     Hi guys:
>
>     I have a few data sets that come from the GOES satellites (Full
>     Disk) and a couple others.  I can use one of the SSEC's programs
>     to convert from their format to a netCDF.  No useful SRS info
>     comes along in the conversion.
>
>     I've applied an SRS to them using gdal_translate and PROJ.4 that
>     looks like:
>
>     "+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position
>     of one of the satellites)
>
>     (I've also tried):
>     +proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208
>
>     I'm wanting to get them into EPSG:4326.  When I do this, I end up
>     with corner coordinates of a very small area just below the
>     satellites position.
>
>     Does anyone have an suggestions that might help me warp this into
>     position?  I'm sure there's something obvious that I'm missing.
>     I found this page, and the copied/pasted bit about the projection,
>     but my attempts have not been successful.
>
>     http://www.gdal.org/frmt_msg.html
>     /Georeference and Projection/
>     /
>     /
>     /The images are using the Geostationary Satellite View projection.
>     Most GIS packages don't recognize this projection (we only know of
>     ILWIS that does have this projection), but gdalwarp.exe can be
>     used to re-project the images./
>     /
>     /
>     Thanks!
>
>
>
>
> -- 
>
> Jerl Simpson
>
> Sr. Systems Engineer
>
> Weather Trends International
>
> jsimpson at wxtrends.com <mailto:jsimpson at wxtrends.com>
>
> Corporate -- http://www.wxtrends.com <http://www.wxtrends.com/>
>
> B2B -- http://www.wt360business.com <http://www.wt360business.com/>
>
> B2C -- http://www.wt360.com <http://www.wt360.com/>
>
>
> This communication is privileged and may contain confidential 
> information. It's intended only for the use of the person or entity 
> named above. If you are not the intended recipient, do not distribute 
> or copy this communication. If you have received this communication in 
> error, please notify the sender immediately and return the original to 
> the email address above. ? Copyright 2013 Weather Trends 
> International, Inc.
>
> ______________________________________________________________________
> This email has been scanned by the Symantec Email Security.cloud service.
> For more information please visit http://www.symanteccloud.com
> ______________________________________________________________________
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Reinoud Bokhorst
Advisor Oceanography & ICT
BMT ARGOSS

Tel.:         +31 527-242299
Direct:     +31 527-656421
Mobile:    +31 6-54714427

www.bmt.org/linkedin | www.twitter.com/bmtgroup | www.facebook.com/bmtgroup | www.youtube.com/bmtgroupltd

BMT ARGOSS b.v., Voorsterweg 28, 8316 PT, Marknesse, The Netherlands

(Postal address : PO Box 61, 8325 ZH, Vollenhove, The Netherlands)

Registered in The Netherlands, Registered no. 39060160.

Unless otherwise agreed by BMT ARGOSS in writing, all  work, services, goods or products supplied by BMT ARGOSS shall be subject to and governed by BMT ARGOSS's own terms and conditions which are available for inspection from BMT ARGOSS on request.

E-mail confidentiality notice and disclaimer:

The contents of this e-mail and any attachments are intended for the use of the mail addressee(s) shown. If you are not that person, you are not allowed to read it, to take any action based upon it or to copy it, forward, distribute or disclose the contents of it and you should please delete it from your system. BMT ARGOSS does not accept liability for any errors or omissions in the context of this e-mail or its attachments which arise as a result of internet transmission, nor accept liability for statements which are those of the author and clearly not made on behalf of BMT ARGOSS.

Please consider the environmental impacts of printing this email, and only do so if really necessary

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/39d2021b/attachment.html>

From srp at geo.ku.dk  Mon Oct 28 08:46:30 2013
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Mon, 28 Oct 2013 15:46:30 +0000
Subject: [gdal-dev] Satellite projections
In-Reply-To: <CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>,
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB366E63ADA0@P1KITMBX05WC03.unicph.domain>

Oops, sorry! I forgot to include the -a_ullr variables. I have:
up_left_x=-5570248.832537
up_left_y=5570244.832537
low_rig_x=5567248.429179
low_rig_y=-5567252.429179

That should cover the full disk and seems to work with all satellites - you just need to vary the longitude to change between GOES/MSG/MTSAT etc.
Cheers,
Simon

________________________________
Fra: Jerl Simpson [jsimpson at wxtrends.com]
Sendt: 28. oktober 2013 16:41
Til: Simon Richard Proud
Cc: gdal-dev at lists.osgeo.org
Emne: Re: [gdal-dev] Satellite projections

Thanks Simon!

I'll give it a shot.  Meteosat is definitely a pain, and it's one of the satellites I'm working with.

If you don't mind me asking, what do you typically have in your -a_ullr designation for gdal_translate?  Or are you pulling out sections and it varies?  I'd like to get the full image, if possible.

Thanks again!

Jerl


On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk<mailto:srp at geo.ku.dk>> wrote:
Hi Jerl,
We work with Meteosat data in full disk projection and it's a bit of a headache! Try these commands in GDAL and see if they work for you:

gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49 +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE $TEMPFILE
gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE $OUTFILE

Just remember to change the +lon_0 to whatever you need for GOES. Also change the -tr and -te for gdal :-) You can also add +lat_0 but to be honest I never found it made a difference (perhaps it is ignored?)

Cheers,
Simon

________________________________
Fra: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] p? vegne af Jerl Simpson [jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>]
Sendt: 28. oktober 2013 16:17
Til: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Emne: [gdal-dev] Satellite projections

Hi guys:

I have a few data sets that come from the GOES satellites (Full Disk) and a couple others.  I can use one of the SSEC's programs to convert from their format to a netCDF.  No useful SRS info comes along in the conversion.

I've applied an SRS to them using gdal_translate and PROJ.4 that looks like:

"+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of the satellites)

(I've also tried):
+proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208

I'm wanting to get them into EPSG:4326.  When I do this, I end up with corner coordinates of a very small area just below the satellites position.

Does anyone have an suggestions that might help me warp this into position?  I'm sure there's something obvious that I'm missing.
I found this page, and the copied/pasted bit about the projection, but my attempts have not been successful.

http://www.gdal.org/frmt_msg.html
Georeference and Projection

The images are using the Geostationary Satellite View projection. Most GIS packages don't recognize this projection (we only know of ILWIS that does have this projection), but gdalwarp.exe can be used to re-project the images.

Thanks!




--

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>

Corporate ? http://www.wxtrends.com<http://www.wxtrends.com/>

B2B ? http://www.wt360business.com<http://www.wt360business.com/>

B2C ? http://www.wt360.com<http://www.wt360.com/>



This communication is privileged and may contain confidential information. It's intended only for the use of the person or entity named above. If you are not the intended recipient, do not distribute or copy this communication. If you have received this communication in error, please notify the sender immediately and return the original to the email address above. ? Copyright 2013 Weather Trends International, Inc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/548015dc/attachment-0001.html>

From srp at geo.ku.dk  Mon Oct 28 09:05:40 2013
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Mon, 28 Oct 2013 16:05:40 +0000
Subject: [gdal-dev] Satellite projections
In-Reply-To: <526E88EF.3040603@bmtargoss.com>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>,
	<526E88EF.3040603@bmtargoss.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB366E63ADE7@P1KITMBX05WC03.unicph.domain>

Hi Reinoud,
To be honest I've never had success in using GDAL for GOES in LRIT format (only for reprojecting when it is already in Geotiff). In that case I would recommend using PyTroll instead. It works well for all geostationary data: http://pytroll.org/

Cheers,
Simon

________________________________
Fra: Reinoud Bokhorst [reinoud.bokhorst at bmtargoss.com]
Sendt: 28. oktober 2013 16:55
Til: Jerl Simpson
Cc: Simon Richard Proud; gdal-dev at lists.osgeo.org
Emne: Re: [gdal-dev] Satellite projections

Dear Jerl, Simon,
Apologize for mixing into this thread but I am currently investigating how to process EUMETCAST data to more usuable formats like NetCDF and GeoTIFF.  The data stream contains MSG HRIT data and GOES15/17 + MTSAT2 LRIT data. I'll also need to reproject like you do so this post already proves useful!

I can read the MSG data trough gdal/meteosatlib but I can't read the GOES and MTSAT2 LRIT data yet. Do you perhaps have some useful pointers to software to use? Online documentation is rather scarce...

Thanks Reinoud



On 10/28/2013 04:41 PM, Jerl Simpson wrote:
Thanks Simon!

I'll give it a shot.  Meteosat is definitely a pain, and it's one of the satellites I'm working with.

If you don't mind me asking, what do you typically have in your -a_ullr designation for gdal_translate?  Or are you pulling out sections and it varies?  I'd like to get the full image, if possible.

Thanks again!

Jerl


On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk<mailto:srp at geo.ku.dk>> wrote:
Hi Jerl,
We work with Meteosat data in full disk projection and it's a bit of a headache! Try these commands in GDAL and see if they work for you:

gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49 +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE $TEMPFILE
gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE $OUTFILE

Just remember to change the +lon_0 to whatever you need for GOES. Also change the -tr and -te for gdal :-) You can also add +lat_0 but to be honest I never found it made a difference (perhaps it is ignored?)

Cheers,
Simon

________________________________
Fra: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] p? vegne af Jerl Simpson [jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>]
Sendt: 28. oktober 2013 16:17
Til: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Emne: [gdal-dev] Satellite projections

Hi guys:

I have a few data sets that come from the GOES satellites (Full Disk) and a couple others.  I can use one of the SSEC's programs to convert from their format to a netCDF.  No useful SRS info comes along in the conversion.

I've applied an SRS to them using gdal_translate and PROJ.4 that looks like:

"+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of the satellites)

(I've also tried):
+proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208

I'm wanting to get them into EPSG:4326.  When I do this, I end up with corner coordinates of a very small area just below the satellites position.

Does anyone have an suggestions that might help me warp this into position?  I'm sure there's something obvious that I'm missing.
I found this page, and the copied/pasted bit about the projection, but my attempts have not been successful.

http://www.gdal.org/frmt_msg.html
Georeference and Projection

The images are using the Geostationary Satellite View projection. Most GIS packages don't recognize this projection (we only know of ILWIS that does have this projection), but gdalwarp.exe can be used to re-project the images.

Thanks!




--

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>

Corporate ? http://www.wxtrends.com<http://www.wxtrends.com/>

B2B ? http://www.wt360business.com<http://www.wt360business.com/>

B2C ? http://www.wt360.com<http://www.wt360.com/>



This communication is privileged and may contain confidential information. It's intended only for the use of the person or entity named above. If you are not the intended recipient, do not distribute or copy this communication. If you have received this communication in error, please notify the sender immediately and return the original to the email address above. ? Copyright 2013 Weather Trends International, Inc.

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Reinoud Bokhorst
Advisor Oceanography & ICT
BMT ARGOSS

Tel.:         +31 527-242299
Direct:     +31 527-656421
Mobile:    +31 6-54714427

www.bmt.org/linkedin<http://www.bmt.org/linkedin> | www.twitter.com/bmtgroup<http://www.twitter.com/bmtgroup> | www.facebook.com/bmtgroup<http://www.facebook.com/bmtgroup> | www.youtube.com/bmtgroupltd<http://www.youtube.com/bmtgroupltd>

BMT ARGOSS b.v., Voorsterweg 28, 8316 PT, Marknesse, The Netherlands

(Postal address : PO Box 61, 8325 ZH, Vollenhove, The Netherlands)

Registered in The Netherlands, Registered no. 39060160.

Unless otherwise agreed by BMT ARGOSS in writing, all  work, services, goods or products supplied by BMT ARGOSS shall be subject to and governed by BMT ARGOSS?s own terms and conditions which are available for inspection from BMT ARGOSS on request.

E-mail confidentiality notice and disclaimer:

The contents of this e-mail and any attachments are intended for the use of the mail addressee(s) shown. If you are not that person, you are not allowed to read it, to take any action based upon it or to copy it, forward, distribute or disclose the contents of it and you should please delete it from your system. BMT ARGOSS does not accept liability for any errors or omissions in the context of this e-mail or its attachments which arise as a result of internet transmission, nor accept liability for statements which are those of the author and clearly not made on behalf of BMT ARGOSS.

Please consider the environmental impacts of printing this email, and only do so if really necessary

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/0fc193cc/attachment.html>

From thare at usgs.gov  Mon Oct 28 10:32:38 2013
From: thare at usgs.gov (Hare, Trent)
Date: Mon, 28 Oct 2013 10:32:38 -0700
Subject: [gdal-dev] gdalwarp multiple nodata
In-Reply-To: <1382968662835-5086084.post@n6.nabble.com>
References: <1382968662835-5086084.post@n6.nabble.com>
Message-ID: <CAB6t5t_MEgejSUX+SNKeR09c131K5WdiEyA9mgR4bZyPYu7=ag@mail.gmail.com>

Laura,
  This might be one method for your multiple NoDATA issue.

There is in the python example in the *samples *directory called
val_repl.py (value replace). It allows you to change one value to another
but by switching the line below you can make it greater or less than a
certain value. This might allow to first map all you NoDATA values to a
single NoDATA before running gdalwarp.

original val_repl.py:
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples

"val_repl_greater.py" is simply the sample "val_repl.py" (from link above)
with one line changed

replace
    scanline =
numpy.choose(numpy.equal(scanline,inNoData),(scanline,outNoData))
with
    scanline =
numpy.choose(numpy.greater(scanline,inNoData),(scanline,outNoData))

good luck,
Trent


On Mon, Oct 28, 2013 at 6:57 AM, laura0 <lauramail at iol.it> wrote:

> Hi all,
> I have discovered gdalwarp options -srcnodata -dstnodata support just 1 no
> data value per band. Is there a way to set multiple values to NoData?
>
> Thanks much,
> Laura
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdalwarp-multiple-nodata-tp5086084.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/82f199c3/attachment-0001.html>

From sfkeller at gmail.com  Mon Oct 28 11:50:08 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 28 Oct 2013 19:50:08 +0100
Subject: [gdal-dev] Compiling PDAL
Message-ID: <CAFcOn2-f_J5BLHhBdmYU+aZfLQ+xxhN+X-esrqCr1ta6GohteQ@mail.gmail.com>

Hi Paul and Howard

We still have issues with compiling PDAL with LAS reader and pointcloud
writer support.
We're usng PostgreSQL 9.1 which is the newest version under Ubuntu.

Then LAS reader worked but pdal does'nt find pointcloud writer.

We compiled PDAL from github with default cmake and wondered
=> why there is a mandatory dependency on Oracle libraries?

Then I saw in PDAL the pramsey-config.sh file and this blog entry with
ccmake instructions [1].
=> What's the difference between the to (I fear the blog installs PDAL in
another directory)?
=> Why is pointcloud not part of the default config (like Oracle)?

-Stefan

[1]
http://gijs.github.io/blog/2013/08/01/getting-started-with-pointclouds-in-postgresql/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131028/f35439ec/attachment.html>

From pramsey at cleverelephant.ca  Mon Oct 28 12:05:59 2013
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 28 Oct 2013 12:05:59 -0700
Subject: [gdal-dev] Fwd:  GPKG Driver
In-Reply-To: <CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
	<201310280009.28875.even.rouault@mines-paris.org>
	<CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>
Message-ID: <CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>

On Sun, Oct 27, 2013 at 4:09 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:

> Now my turn for questions :
> - From your questions, I suppose you only consider the vector side of GPKG ?

Yes, that's my initial target.  Any comments/ideas on how to share
functionality between GDAL and OGR drivers, since presumably
eventually the gpkg support will end up with one of each.

> - Do you intend in writing everything from scratch, or did you consider using
> https://bitbucket.org/luciad/libgpkg ?  Which is, AFAIK, the equivalent of
> libspatialite for GPKG. Contains the SQL functions mandated by the spec, the
> triggers etc.

I think most of the storage/retrieval stuff is going to be from
scratch. The more operational stuff, like rtree index bindings and so
on, could/should lean on the luciad code (though I don't actually see
those mentioned). I'm loath to add a build dependency, but perhaps
copying the tree into the driver would be acceptable? (Except it's a
cmake project, and gdal is not, hm)

What was your thought?

P

> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

From pepijn at vaneeckhoudt.net  Mon Oct 28 12:50:55 2013
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Mon, 28 Oct 2013 20:50:55 +0100
Subject: [gdal-dev] GPKG Driver
In-Reply-To: <CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
	<201310280009.28875.even.rouault@mines-paris.org>
	<CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>
	<CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>
Message-ID: <86E308EE-B95E-441A-A316-9969BF7B26BE@vaneeckhoudt.net>

Hi Paul,

Great news that you?re planning on working on this. I had intended to do this and had discussed this a bit with Even already, but I haven?t had time to do any real work yet. Too busy getting geopackage support ready in Luciad?s own products first.

On 28 Oct 2013, at 20:05, Paul Ramsey <pramsey at cleverelephant.ca> wrote:

> I think most of the storage/retrieval stuff is going to be from
> scratch. The more operational stuff, like rtree index bindings and so
> on, could/should lean on the luciad code (though I don't actually see
> those mentioned). I'm loath to add a build dependency, but perhaps
> copying the tree into the driver would be acceptable? (Except it's a
> cmake project, and gdal is not, hm)

Even,

I've had a quick look at the OGR code in the meantime and at first glance it doesn?t seem to make much sense to use libgpkg for ogr/gdal integration. The bulk of the code in libgpkg is similar to what CPL provides in ogr. It wouldn?t make sense imo to duplicate that type of code. The actual geopackage specific code consists of WKT, WKB and GPB header (un)marshalling code, table creation statements and GEOS integration. I?m sure you guys already have code for all that lying around somewhere :)

Regarding the rtree implementation this is not part of libgpkg itself. We?re using the rtree implementation that ships with sqlite (http://www.sqlite.org/cgi/src/dir?ci=10f125f5da55eca1&name=ext/rtree). libgpkg only contains code to create the rtree tables and set up the necessary triggers. The SQL code for that is all part of the geopackage spec, so I don?t think there?s any need to use libgpkg for that either.

Regards,

Pepijn

From even.rouault at mines-paris.org  Mon Oct 28 13:18:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Oct 2013 21:18:07 +0100
Subject: [gdal-dev] Fwd:  GPKG Driver
In-Reply-To: <CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
	<CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>
	<CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>
Message-ID: <201310282118.07793.even.rouault@mines-paris.org>

Paul,

> <even.rouault at mines-paris.org> wrote:
> > Now my turn for questions :
> > - From your questions, I suppose you only consider the vector side of
> > GPKG ?
> 
> Yes, that's my initial target.  Any comments/ideas on how to share
> functionality between GDAL and OGR drivers, since presumably
> eventually the gpkg support will end up with one of each.

We have a few precedents of formats having a GDAL and OGR side : PCIDSK, SDTS, 
PDF, ...
As OGR can be disabled at build time ( OGR_ENABLED=NO , not sure who relies on 
that apart from ESRI maybe), but not the other way round, the OGR driver 
includes header files from the related GDAL driver. Usually not the GDAL driver 
code itself, but some code that forms an embedded library that deals with the 
format internals.
Here you could have a frmts/gpkg directory with a few common shared methods to 
deal with spatial_ref_sys, gpkg_contents, etc ?

To give you the full picture with the risk of making things confusing, I 
should mention that in the case of SQLite, the GDAL Rasterlite and MBTiles 
drivers actually depend on OGR (they are not compiled if OGR_ENABLED = NO). 
They do not actually depend on sqlite3.h, but they use the OGR API to trigger 
indirectly the OGR SQLite driver and let him process the SQL requests they 
need. So dynamic dependency rather than a static one.

> 
> > - Do you intend in writing everything from scratch, or did you consider
> > using https://bitbucket.org/luciad/libgpkg ?  Which is, AFAIK, the
> > equivalent of libspatialite for GPKG. Contains the SQL functions
> > mandated by the spec, the triggers etc.
> 
> I think most of the storage/retrieval stuff is going to be from
> scratch.

Yes, reading or writing GPKG geometry blobs can easily be done from scratch 
(as opposed to using ST_AsBinary() / ST_GeomFromWKB() ). 

> The more operational stuff, like rtree index bindings and so
> on, could/should lean on the luciad code (though I don't actually see
> those mentioned). 

https://bitbucket.org/luciad/libgpkg/overview mentions a CreateSpatialIndex()

> I'm loath to add a build dependency, but perhaps
> copying the tree into the driver would be acceptable? (Except it's a
> cmake project, and gdal is not, hm)
> 
> What was your thought?

That was an open question. There are clearly pros and cons in using or not 
using it. My experience with spatialite integration is that I initially f**ked 
up write support when I tried to do it myself without using spatialite support 
functions, since I omitted creating triggers that were essential for database 
integrity. The main issue of course was that there was/is no spatialite spec 
to follow. With GPKG, all the triggers are mentionned in the spec, so that 
should be doable at hand.

About adding a build dependency, yes it is annoying. But if we copy the 
libgpkg tree in GDAL, we should still make sure that it can also be built 
against external libgpkg ( a bit like we have libtiff in frmts/gtiff/libtiff but 
we can build against esternal libtiff ), which is something demanded by 
packagers of Linux distro (to ease updates, particularly security related). I 
see that the libgpkg also ships with an internal sqlite source tree. So 
dependency inside a dependency ... ?
SQLite is not a build requirement of GDAL, but it is still extensively used in 
quite a few drivers (MBTiles, Rasterlite, OGR SQLite, an advanced module in 
the GML, OGR VFK, OGR OSM).
At first, I though that it would be odd to internalize libgpkg and not SQLite, 
but in practice SQLite is a dependency available to all packagers (on Linux of 
course, as well as on OSGeo4W), so there's not a really interest in 
internalizing it.
On the contrary libgpkg will likely stay for some time a niche library, not 
easily found already packaged.
A drawback of internal copies of libraries is the risk of ABI incompatibility 
when a code links against GDAL and the external version of the internal 
library. Something that has given us a few headaches in the past, with GDAL 
internal libtiff 4.X vs external libtiff 3.X, particularly on Linux where symbol 
visibility is quite hard to control. I ended up generating all necessary 
"#define gdal_TIFFxxxxx TIFFxxxxx" for the internal copy. Not elegant, but this 
works. For libgpkg this is not something we will have to worry about for some 
time, unless someone decides to write a standalone QGIS data provider that 
doesn't use OGR.

Regarding cmake, I guess that adding the names of the .c files in a GNUmakefile 
/ makefile.vc should do it. One worry I have is the minimum MSVC version to 
build it. In libgpkg history I see a mention of Visual Studio Express 2012. 
Don't know if it works with older versions but I can see some use of C99 
(int64_t) extensions that will likely not please older compiler versions.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Oct 28 14:26:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Oct 2013 22:26:31 +0100
Subject: [gdal-dev] Setting the georeferencing priority for GDAL
In-Reply-To: <loom.20131027T161438-77@post.gmane.org>
References: <loom.20131027T161438-77@post.gmane.org>
Message-ID: <201310282226.32037.even.rouault@mines-paris.org>

Hi Jukka,

> 
> Sometimes an image can have several and ambiguous metadata for
> georeferencing. Mapserver has a method to deal with ambiguous internal
> geotiff metadata and world files and user can override the internal
> metadata by using PROCESSING "EXTENT_PRIORITY=WORLD" in the mapfile.
> http://www.mapserver.org/input/raster.html#special-processing-directives.
> I thought it was PROCESSING "EXTENT_PRIORITY=WORLDFILE" but perhaps both
> keywords are supported.
> 
> I wonder if GDAL supports this same worldfile override with some secret
> config option. At least it is not listed on page
> http://trac.osgeo.org/gdal/wiki/ConfigOptions.
> 
> I can also see that GDAL does have a config option GMLJP2OVERRIDE but I
> could not easily find what is is doing.

/* -------------------------------------------------------------------- */
/*      This is a backdoor to let us embed a literal gmljp2 chunk       */
/*      supplied by the user as an external file.  This is mostly       */
/*      for preparing test files with exotic contents.                  */
/* -------------------------------------------------------------------- */

> 
> And finally when I was playing with a "gdal_edit.py" utility I discovered
> that there are at least 4 ways to georeference a JPEG2000 file:
> - use worldfile .wld or .j2w
> - use internal GeoJP2 (GeoTIFF) georeferencing
> - use internal GML georeferencing
> - use an external .aux.xlm file
> 
> I noticed that command
>  python gdal_edit.py -a_srs epsg:3067 metajp2test.jp2
> was creating a file names "metajp2test.jp2.aux" which does contain the
> right georeferencing data.

> However, if I run gdalinfo it is looking for
> the internal GeoJP2 metadata and it reports that my JPEG2000 file is still
> using an unknown projection.

Was it with the JP2OPENJPEG driver ? JP2KAK and JP2ECW should return what is 
found in .aux.xml.

I also agree with Frank that PAM information should override internal 
information.

In the case of JPEG2000, I think it might be possible, pending some work, to 
edit the JP2 boxes to rewrite the GeoJP2 and/or GMLJP2 boxes in place. Well, 
maybe not in all cases if the size of the new boxes is larger than the old 
boxes. In which case a utility could rewrite a slightly larger file by shifting 
the compressed imagery off a few bytes, but without modifying it at all.

> 
> This feels a bit messy. Perhaps there is a need to have a GDAL wide config
> option for what metadata to search and use for georeferencing. In my case I
> would like to set it to use "external GDAL aux.xml". In addition, I think
> that this setting should be made safe so that if aux.xml file is not found
> then the image is considered to be without georeferencing. Or perhaps the
> config option could take a list like "auxiliary_xml,GeoJP2" with all the
> acceptable alternatives in priority order.
> 

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Mon Oct 28 15:11:50 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 Oct 2013 22:11:50 +0000 (UTC)
Subject: [gdal-dev] Setting the georeferencing priority for GDAL
References: <loom.20131027T161438-77@post.gmane.org>
	<201310282226.32037.even.rouault@mines-paris.org>
Message-ID: <loom.20131028T225909-773@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Hi Jukka,
> 
> > I can also see that GDAL does have a config option GMLJP2OVERRIDE but I
> > could not easily find what is is doing.
> 
> /* -------------------------------------------------------------------- */
> /*      This is a backdoor to let us embed a literal gmljp2 chunk       */
> /*      supplied by the user as an external file.  This is mostly       */
> /*      for preparing test files with exotic contents.                  */
> /* -------------------------------------------------------------------- */

Ok, not for mortals.

> > 
> > And finally when I was playing with a "gdal_edit.py" utility I discovered
> > that there are at least 4 ways to georeference a JPEG2000 file:
> > - use worldfile .wld or .j2w
> > - use internal GeoJP2 (GeoTIFF) georeferencing
> > - use internal GML georeferencing
> > - use an external .aux.xlm file
> > 
> > I noticed that command
> >  python gdal_edit.py -a_srs epsg:3067 metajp2test.jp2
> > was creating a file names "metajp2test.jp2.aux" which does contain the
> > right georeferencing data.
> 
> > However, if I run gdalinfo it is looking for
> > the internal GeoJP2 metadata and it reports that my JPEG2000 file is still
> > using an unknown projection.
> 
> Was it with the JP2OPENJPEG driver ? JP2KAK and JP2ECW should return what is 
> found in .aux.xml.

Yes, it was JP2OPENJPEG. I was testing in the average user mode and did not
bother to search Windows binaries with other JPEG2000 drivers and playing
with GDAL_SKIP config option. They are not for mortals either. It would be
good if all the JPEG2000 drivers would behave in a similar way with
georeferencing.
 
> I also agree with Frank that PAM information should override internal 
> information.
> 
> In the case of JPEG2000, I think it might be possible, pending some work, to 
> edit the JP2 boxes to rewrite the GeoJP2 and/or GMLJP2 boxes in place. Well, 
> maybe not in all cases if the size of the new boxes is larger than the old 
> boxes. In which case a utility could rewrite a slightly larger file by
shifting 
> the compressed imagery off a few bytes, but without modifying it at all.

I am remembering that for the JPEG2000 standard it is OK to write the boxes
also after the codestream. I am also remembering that you wrote a script
that did that with GML box about one and a half year ago. I bet that some
JPEG2000 libraries would not find the boxes at the end of the file, though. 

-Jukka-


From even.rouault at mines-paris.org  Mon Oct 28 15:32:18 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Oct 2013 23:32:18 +0100
Subject: [gdal-dev] Setting the georeferencing priority for GDAL
In-Reply-To: <loom.20131028T225909-773@post.gmane.org>
References: <loom.20131027T161438-77@post.gmane.org>
	<201310282226.32037.even.rouault@mines-paris.org>
	<loom.20131028T225909-773@post.gmane.org>
Message-ID: <201310282332.18674.even.rouault@mines-paris.org>


> > Was it with the JP2OPENJPEG driver ? JP2KAK and JP2ECW should return what
> > is found in .aux.xml.
> 
> Yes, it was JP2OPENJPEG. I was testing in the average user mode and did not
> bother to search Windows binaries with other JPEG2000 drivers and playing
> with GDAL_SKIP config option. They are not for mortals either. It would be
> good if all the JPEG2000 drivers would behave in a similar way with
> georeferencing.

Would you mind opening a ticket about that ?

> I am remembering that for the JPEG2000 standard it is OK to write the boxes
> also after the codestream. I am also remembering that you wrote a script
> that did that with GML box about one and a half year ago. I bet that some
> JPEG2000 libraries would not find the boxes at the end of the file, though.

Yes, you are right. I had an impression of "d?j? vu" when writing about that. 
Actually the archives reveal that we had an extensive discussion on that topic 
in http://lists.osgeo.org/pipermail/gdal-dev/2012-April/thread.html#32441 and 
the script you mention is on my home page... : 
http://even.rouault.free.fr/append_gmljp2_box.py

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From wolf+grass at bergenheim.net  Mon Oct 28 16:24:37 2013
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Tue, 29 Oct 2013 00:24:37 +0100
Subject: [gdal-dev] GME driver for OGR
Message-ID: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>

Hi all,

I'm working on the GDAL Google Maps Engine (GME) driver over then next few
months for a school project. I've set up a wiki page for it where you can
track my progress. It's here:

http://trac.osgeo.org/gdal/wiki/GMEDriver

I'm picking up from where Frank and I left off a few months ago.

For now we have a mapping that mimics the Fusion Tables setup, which is
that each OGRGMEDataSource corresponds to a single session, and each
OGRGMELayer corresponds to a table. This works fine, but GME can do more! :)

GME has a concept of a map which contains layers, each layer has a 1:1
relationship with a vector table. Now my proposal is to extend the previous
model so that if the user of the library specifies a map instead of a
table, we change the mapping so that the OGRGMEDatasource maps to the map
and contains several OGRGMELayers which each correspond to each table. Then
I would move the connection logic out of OGRGMEDatasource to OGRGMEDriver,
which is currently basically only boilerplate code. Is there a precedence
for this type of configuration in any other driver?

What do you think would this kind of added mapping be worth the extra
effort? I'm trying to make the classes as lean as possible, because I might
have a need to pull out all the map/layer handling code so that I can
re-use it later for another driver. Also I think that the connection
management / request throttling code could be usable elsewhere.

That's it for now. Let me know if you have any specific wishes regarding
the GME driver.

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/c31c0ce7/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Oct 28 16:56:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Oct 2013 00:56:55 +0100
Subject: [gdal-dev] GME driver for OGR
In-Reply-To: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>
References: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>
Message-ID: <201310290056.56166.even.rouault@mines-paris.org>

Le mardi 29 octobre 2013 00:24:37, Wolf Bergenheim a ?crit :
> Hi all,
> 
> I'm working on the GDAL Google Maps Engine (GME) driver over then next few
> months for a school project. I've set up a wiki page for it where you can
> track my progress. It's here:
> 
> http://trac.osgeo.org/gdal/wiki/GMEDriver
> 
> I'm picking up from where Frank and I left off a few months ago.
> 
> For now we have a mapping that mimics the Fusion Tables setup, which is
> that each OGRGMEDataSource corresponds to a single session, and each
> OGRGMELayer corresponds to a table. This works fine, but GME can do more!
> :)
> 
> GME has a concept of a map which contains layers, each layer has a 1:1
> relationship with a vector table. Now my proposal is to extend the previous
> model so that if the user of the library specifies a map instead of a
> table, we change the mapping so that the OGRGMEDatasource maps to the map
> and contains several OGRGMELayers which each correspond to each table. Then
> I would move the connection logic out of OGRGMEDatasource to OGRGMEDriver,
> which is currently basically only boilerplate code.

Wolf,

I don't know the GME API, so the following might be non relevant, but I'm 
wondering why you couldn't keep the current connection logic. You would "just" 
need to establish the list of vector tables from a "GetMapContent" request (or 
whatever it is called) and you would instanciate the layers just as you do 
currently by parsing the "tables" option. I'm probably missing something ?


> Is there a precedence
> for this type of configuration in any other driver?

The boilerplate code is quite typical of the standard OGR driver. You would 
need/want a shared connection among different OGRGMEDataSource ? That would be 
the point of moving it at the driver level. Actually I've coded something like 
that in the FGDB driver since there's a bug in the underlying SDK and you 
cannot open simultaneously several connections to the same datasource.

> 
> What do you think would this kind of added mapping be worth the extra
> effort? I'm trying to make the classes as lean as possible, because I might
> have a need to pull out all the map/layer handling code so that I can
> re-use it later for another driver. Also I think that the connection
> management / request throttling code could be usable elsewhere.

Another driver using OAuth2 or those GME concepts in a brother driver ? I have 
some troubles imagining what you have in mind, not having dug myself into the 
topic.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From wolf+grass at bergenheim.net  Mon Oct 28 17:26:00 2013
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Tue, 29 Oct 2013 01:26:00 +0100
Subject: [gdal-dev] GME driver for OGR
In-Reply-To: <201310290056.56166.even.rouault@mines-paris.org>
References: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>
	<201310290056.56166.even.rouault@mines-paris.org>
Message-ID: <CAJhTkW75swsAbgD=vPkR90a5F_dMXvN_aKqJn5zUT+pEn1r0vw@mail.gmail.com>

Even,

>
> I don't know the GME API, so the following might be non relevant, but I'm
> wondering why you couldn't keep the current connection logic. You would "just"
> need to establish the list of vector tables from a "GetMapContent" request (or
> whatever it is called) and you would instanciate the layers just as you do
> currently by parsing the "tables" option. I'm probably missing something ?

That's actually a nice and elegant solution! :) I like it, it will
keep things simpler and should result in less shuffling of code
around.

> > Is there a precedence
> > for this type of configuration in any other driver?
>
> The boilerplate code is quite typical of the standard OGR driver. You would
> need/want a shared connection among different OGRGMEDataSource ? That would be
> the point of moving it at the driver level. Actually I've coded something like
> that in the FGDB driver since there's a bug in the underlying SDK and you
> cannot open simultaneously several connections to the same datasource.

I'm thinking that there is rarely any reason to separate the
connections, except if, maybe we'd like to support multiple accounts,
so that you can get table A using account A, and table B with account
B. But then again why don't you simply give access to A for both
tables? The way I see it we only need a single connection since the
API is RESTful.
So yeah basically trying to see if I could make the code more
re-usable, and possibly optimizing. I'm not there yet, still
implementing basic functionality, but I like to be one step ahead in
my designs.

>
> Another driver using OAuth2 or those GME concepts in a brother driver ? I have
> some troubles imagining what you have in mind, not having dug myself into the
> topic.
>

Yeah, something like that, can't get into specifics at this point. I
hope we'll announce it soon, though. Again I want to prepare for
what's coming,and looking for some advice on best practices. I hope to
avoid realizing in 2 months that I need to refactor the
OGRGMEDatasource fully, but otoh that's not going to be the end of the
world, if I have to do it that way.

--Wolf

From woklist at kyngchaos.com  Mon Oct 28 18:26:18 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 28 Oct 2013 20:26:18 -0500
Subject: [gdal-dev] Join problem
Message-ID: <A601409A-7CAC-4571-B241-356B87D9FF11@kyngchaos.com>

I'm having a problem with with a join.  I suspect it has something to do with the field names.

The shapefile DBF and the lookup DBF have a field name in SJIS: "?????".  The lookup table also has a field "class".  ogrinfo gives me the correct SJIS->UTF8 conversion of the field name in the terminal.

ogr2ogr -sql 'SELECT b.class FROM "L03-b-09_5133" a LEFT JOIN "/path/to/class.dbf".class b ON a."?????" = b."?????"' . L03-b-09_5133.shp

This just gives me a SQL syntax error.

I've successfully run other OGR SQL with the SJIS field, like casting it.  Maybe that's what I should do - cast it to rename it, then do the join (and rename the lookup dbf field also)?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From woklist at kyngchaos.com  Mon Oct 28 19:35:18 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 28 Oct 2013 21:35:18 -0500
Subject: [gdal-dev] Join problem
In-Reply-To: <A601409A-7CAC-4571-B241-356B87D9FF11@kyngchaos.com>
References: <A601409A-7CAC-4571-B241-356B87D9FF11@kyngchaos.com>
Message-ID: <053DE48F-0B69-4487-B23E-696A2FEB2C6F@kyngchaos.com>

After renaming the field with alter table the join now works.

On Oct 28, 2013, at 8:26 PM, William Kyngesburye wrote:

> I'm having a problem with with a join.  I suspect it has something to do with the field names.
> 
> The shapefile DBF and the lookup DBF have a field name in SJIS: "?????".  The lookup table also has a field "class".  ogrinfo gives me the correct SJIS->UTF8 conversion of the field name in the terminal.
> 
> ogr2ogr -sql 'SELECT b.class FROM "L03-b-09_5133" a LEFT JOIN "/path/to/class.dbf".class b ON a."?????" = b."?????"' . L03-b-09_5133.shp
> 
> This just gives me a SQL syntax error.
> 
> I've successfully run other OGR SQL with the SJIS field, like casting it.  Maybe that's what I should do - cast it to rename it, then do the join (and rename the lookup dbf field also)?
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed robot?

[Marvin]  You think you have problems?  What are you supposed to do if you ARE a maniacally depressed robot?  No, don't try and answer, I'm 50,000 times more intelligent than you and even I don't know the answer...

- HitchHiker's Guide to the Galaxy



From lauramail at iol.it  Tue Oct 29 01:20:19 2013
From: lauramail at iol.it (laura0)
Date: Tue, 29 Oct 2013 01:20:19 -0700 (PDT)
Subject: [gdal-dev] gdalwarp multiple nodata
In-Reply-To: <CAB6t5t_MEgejSUX+SNKeR09c131K5WdiEyA9mgR4bZyPYu7=ag@mail.gmail.com>
References: <1382968662835-5086084.post@n6.nabble.com>
	<CAB6t5t_MEgejSUX+SNKeR09c131K5WdiEyA9mgR4bZyPYu7=ag@mail.gmail.com>
Message-ID: <1383034819760-5086278.post@n6.nabble.com>

Thanks I will try.

Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-multiple-nodata-tp5086084p5086278.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Tue Oct 29 01:55:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Oct 2013 09:55:28 +0100
Subject: [gdal-dev] Fwd:  GPKG Driver
In-Reply-To: <736FBB33-A75E-493F-8C73-62D9D0F07FB6@vaneeckhoudt.net>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>
	<CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>
	<CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>
	<201310282118.07793.even.rouault@mines-paris.org>
	<736FBB33-A75E-493F-8C73-62D9D0F07FB6@vaneeckhoudt.net>
Message-ID: <1383036928.526f7800bf3ab@imp.free.fr>

Selon Pepijn Van Eeckhoudt <pepijn at vaneeckhoudt.net>:

> > Regarding cmake, I guess that adding the names of the .c files in a
> GNUmakefile
> > / makefile.vc should do it. One worry I have is the minimum MSVC version to
> > build it. In libgpkg history I see a mention of Visual Studio Express 2012.
> > Don't know if it works with older versions but I can see some use of C99
> > (int64_t) extensions that will likely not please older compiler versions.
> It's indeed a C99 library. Seems silly to still not be able to use a language
> revision from more than a decade ago.
>
> For msvc I'm using the 'compile as c++' flag to work around lack of c99
> support. From the 2013 release notes it looks like there's now sufficient
> support for c99 that this will no longer be necessary, but I haven't tested
> that yet. 2012 is what I tested with so far. Might work on older versions but
> never tried.

> Are people still using old msvc compilers these days ?

Yes, people are sometimes a few versions behind the latest one. There are
sometimes good (or bad) reasons to do that. For example for a software
distribution like OSGeo4W, you want to make sure as much as possible that all
components are built with the same compiler version to avoid issues with
different and incompatible C runtime. And migrating a full stack of software can
take some time. You may also have to deal with binary SDKs (FileGDB, ECW SDK,
etc...) that are provided only for a few versions of the compiler, and not
necessarily the latest one.

As an example of how antique compilers can be used, Tamas Szekeres maintains
builds of GDAL and MapServer from MSVC 1310 (VS 2003) to MSVC 1600 :
http://gisinternals.com/sdk/ . VS 2003 and 2005 is admitedly a bit extreme now.

> Why would you if the recent ones are available for free?

This has maybe changed in latest releases, but the Express editions in the past
didn't include Win64 support for example. I also believe they didn't have OpenMP
support, but I don't think it is widely used in OSGeo4W stack.

Even





From even.rouault at mines-paris.org  Tue Oct 29 02:04:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Oct 2013 10:04:07 +0100
Subject: [gdal-dev] GME driver for OGR
In-Reply-To: <CAJhTkW75swsAbgD=vPkR90a5F_dMXvN_aKqJn5zUT+pEn1r0vw@mail.gmail.com>
References: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>
	<201310290056.56166.even.rouault@mines-paris.org>
	<CAJhTkW75swsAbgD=vPkR90a5F_dMXvN_aKqJn5zUT+pEn1r0vw@mail.gmail.com>
Message-ID: <1383037447.526f7a07a0cf8@imp.free.fr>

Wolf,

> >
> > The boilerplate code is quite typical of the standard OGR driver. You would
> > need/want a shared connection among different OGRGMEDataSource ? That would
> be
> > the point of moving it at the driver level. Actually I've coded something
> like
> > that in the FGDB driver since there's a bug in the underlying SDK and you
> > cannot open simultaneously several connections to the same datasource.
>
> I'm thinking that there is rarely any reason to separate the
> connections, except if, maybe we'd like to support multiple accounts,
> so that you can get table A using account A, and table B with account
> B. But then again why don't you simply give access to A for both
> tables? The way I see it we only need a single connection since the
> API is RESTful.

That makes sense. I don't think that there is a real use case with connecting 2
different accounts within the same OGR process. But if you share connection
between data sources, you should make sure that the sharing at the driver level
is thread-safe (mutex, etc...) since it is valid for 2 OGRDataSource of the same
driver to be used in parallel in different threads.

> >
> > Another driver using OAuth2 or those GME concepts in a brother driver ? I
> have
> > some troubles imagining what you have in mind, not having dug myself into
> the
> > topic.
> >
>
> Yeah, something like that, can't get into specifics at this point. I
> hope we'll announce it soon, though. Again I want to prepare for
> what's coming,and looking for some advice on best practices. I hope to
> avoid realizing in 2 months that I need to refactor the
> OGRGMEDatasource fully, but otoh that's not going to be the end of the
> world, if I have to do it that way.

OK. Well you're probably the one with the best vision of what can be shared ;-)

Even

From bishop.dev at gmail.com  Tue Oct 29 02:15:37 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 29 Oct 2013 13:15:37 +0400
Subject: [gdal-dev] Fwd:  GPKG Driver
In-Reply-To: <1383036928.526f7800bf3ab@imp.free.fr>
References: <CACowWR1AZjBBmcp+Wp7os6t37KuNvhsiRy2-fHoTFaA=qZ5Pjg@mail.gmail.com>	<CACowWR3vwoeLBVntyCnJreg1fHToJhPaERVjpc=i+OuiWx_dAw@mail.gmail.com>	<CACowWR3u5gQnYXJmCtkqOoD4EV9VxeBYGjpD9w-oN+uQo60y1w@mail.gmail.com>	<201310282118.07793.even.rouault@mines-paris.org>	<736FBB33-A75E-493F-8C73-62D9D0F07FB6@vaneeckhoudt.net>
	<1383036928.526f7800bf3ab@imp.free.fr>
Message-ID: <526F7CB9.8090909@gmail.com>

Hi,

I would like mention that VS Express from 2011 to 2013 have x64 compiler 
(may be earlier have to, but I didn't check). And I have compiled x64 
version GDAL using CMake 
(https://github.com/aashish24/gdal-svn/tree/cmake4gdal). The OpenMP is 
absent :(

Best regards,
     Dmitry

29.10.2013 12:55, Even Rouault ?????:
> Selon Pepijn Van Eeckhoudt <pepijn at vaneeckhoudt.net>:
>
>>> Regarding cmake, I guess that adding the names of the .c files in a
>> GNUmakefile
>>> / makefile.vc should do it. One worry I have is the minimum MSVC version to
>>> build it. In libgpkg history I see a mention of Visual Studio Express 2012.
>>> Don't know if it works with older versions but I can see some use of C99
>>> (int64_t) extensions that will likely not please older compiler versions.
>> It's indeed a C99 library. Seems silly to still not be able to use a language
>> revision from more than a decade ago.
>>
>> For msvc I'm using the 'compile as c++' flag to work around lack of c99
>> support. From the 2013 release notes it looks like there's now sufficient
>> support for c99 that this will no longer be necessary, but I haven't tested
>> that yet. 2012 is what I tested with so far. Might work on older versions but
>> never tried.
>> Are people still using old msvc compilers these days ?
> Yes, people are sometimes a few versions behind the latest one. There are
> sometimes good (or bad) reasons to do that. For example for a software
> distribution like OSGeo4W, you want to make sure as much as possible that all
> components are built with the same compiler version to avoid issues with
> different and incompatible C runtime. And migrating a full stack of software can
> take some time. You may also have to deal with binary SDKs (FileGDB, ECW SDK,
> etc...) that are provided only for a few versions of the compiler, and not
> necessarily the latest one.
>
> As an example of how antique compilers can be used, Tamas Szekeres maintains
> builds of GDAL and MapServer from MSVC 1310 (VS 2003) to MSVC 1600 :
> http://gisinternals.com/sdk/ . VS 2003 and 2005 is admitedly a bit extreme now.
>
>> Why would you if the recent ones are available for free?
> This has maybe changed in latest releases, but the Express editions in the past
> didn't include Win64 support for example. I also believe they didn't have OpenMP
> support, but I don't think it is widely used in OSGeo4W stack.
>
> Even
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From acsantome at gmail.com  Tue Oct 29 02:22:33 2013
From: acsantome at gmail.com (Adri CS)
Date: Tue, 29 Oct 2013 10:22:33 +0100
Subject: [gdal-dev] Trying to get a WMS image with GDAL
Message-ID: <CAF2KE_n_5cZsFd4UPLutz1f2Wz=1sXhhEbrFPYkO25f193bUbg@mail.gmail.com>

Hello everybody,
I'm basically a noob with GDAL and I'm tasked to get a WMS using GDAL.
The only experience I have  with GDAL is opening a raster and getting the
metainfo from it. I did it following the GDAL API Tutorial.

Okay, for the WMS, I'm reading http://www.gdal.org/frmt_wms.html but I'm
having a really difficult time to start in C++.
Is there a tutorial like the GDAL API Tutorial where I can start from? Or
the process of fetching the WMS is the same as for a raster?


Best regards!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/b9f1b5c6/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Oct 29 04:21:09 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 Oct 2013 11:21:09 +0000 (UTC)
Subject: [gdal-dev] Trying to get a WMS image with GDAL
References: <CAF2KE_n_5cZsFd4UPLutz1f2Wz=1sXhhEbrFPYkO25f193bUbg@mail.gmail.com>
Message-ID: <loom.20131029T120644-592@post.gmane.org>

Adri CS <acsantome <at> gmail.com> writes:

> 
> 
> 
> 
> 
> Hello everybody,
> I'm basically a noob with GDAL and I'm tasked to get a WMS using GDAL.
> The only experience I have? with GDAL is opening a raster and getting the
metainfo from it. I did it following the GDAL API Tutorial.
> Okay, for the WMS, I'm reading http://www.gdal.org/frmt_wms.html but I'm
having a really difficult time to start in C++.
> 
> Is there a tutorial like the GDAL API Tutorial where I can start from? Or
the process of fetching the WMS is the same as for a raster?

Hi,

You are reading the right document. Take the onearth_global_mosaic example
and modify the xml file to use server
http://vmap0.tiles.osgeo.org/wms/vmap0 and layer "basic" 
and then you will soon get an image like this 

http://vmap0.tiles.osgeo.org/wms/vmap0?REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&WIDTH=459&HEIGHT=351&LAYERS=basic&TRANSPARENT=TRUE&FORMAT=image%2Fjpeg&BBOX=-180.0,-137.64705882352942,180.0,137.64705882352942&SRS=EPSG:4326&STYLES=
with gdal_translate as in the example.

By the way, OSGeo is running a misconfigured ancient MapServer 5.6.5 with a
wrong OnlineResource as can be seen 

http://vmap0.tiles.osgeo.org/wms/vmap0?REQUEST=GetCapabilities&SERVICE=WMS&VERSION=1.3.0

Using the advertised URL gives an error msLoadMap(): Unable to access file.
(/var/www/tiles/vmap0/.map)

-Jukka Rahkonen-






From janmartin at diy-streetview.org  Tue Oct 29 04:37:08 2013
From: janmartin at diy-streetview.org (Jan Martin)
Date: Tue, 29 Oct 2013 12:37:08 +0100
Subject: [gdal-dev] gdal_translate failing with Corner Coordinates for
	geotiff
Message-ID: <CAOgyrB4p0FoEfe0oKj6mvj=pPEFuJPNJxZAbJfFCXG-jh+5pFA@mail.gmail.com>

Hello all,

I am trying to create a geotiff from a .png (screenshot for testing), but
gdal_translate gets the corner coordinates wrong.

My steps:
Works with Chrome Browser only:
http://overlay-tiler.googlecode.com/svn/trunk/upload.html
with screenshot:
http://www.diy-streetview.com/data/geotiff/Neurott.png
and
Amp?restra?e 63225, Langen, Hessen, Germany

gives:

gdal_translate \
 -gcp 0 0 8.648622773788475 50.00162255942198 \
 -gcp 644 0 8.655532144210838 50.00162255942198 \
 -gcp 644 899 8.655532144210838 49.99542253867455 \
 Neurott.png out.png

gdal2tiles.py -s EPSG:4326 -z 16-19 out.png out

Entering the local file names:
gdal_translate \
 -gcp 0 0 8.648585222862266 50.001663936185025 \
 -gcp 644 0 8.65549459328463 50.001663936185025 \
 -gcp 644 899 8.65549459328463 49.995463920773624 \
 /home/me/geotiff/Neurott.png /home/me/geotiff/Neurott.tiff

seems to work, but

gdalinfo /home/me/geotiff/Neurott.tiff

shows that the Corner Coordinates are the pixel values, and not the lat/lon
coordinates:

Size is 644, 899
Coordinate System is `'
GCP Projection =
GCP[  0]: Id=1, Info=
          (0,0) -> (8.64858522286227,50.001663936185,0)
GCP[  1]: Id=2, Info=
          (644,0) -> (8.65549459328463,50.001663936185,0)
GCP[  2]: Id=3, Info=
          (644,899) -> (8.65549459328463,49.9954639207736,0)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  899.0)
Upper Right (  644.0,    0.0)
Lower Right (  644.0,  899.0)
Center      (  322.0,  449.5)
Band 1 Block=644x4 Type=Byte, ColorInterp=Red
Band 2 Block=644x4 Type=Byte, ColorInterp=Green
Band 3 Block=644x4 Type=Byte, ColorInterp=Blue

How to fix this?

I tried with
GDAL 1.11dev, released 2013/04/13
installed on ubuntu via sudo apt-get install gdal-bin
and
GDAL 1.10.1, released 2013/08/26
compiled locally on Ubuntu 64 bit, 12.04.3 precise.
Both get this wrong.

Any ideas?

Thanks,
Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/968ae0e5/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Oct 29 05:06:59 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 Oct 2013 12:06:59 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?gdal=5Ftranslate_failing_with_Corner_Coordin?=
	=?utf-8?q?ates_for_geotiff?=
References: <CAOgyrB4p0FoEfe0oKj6mvj=pPEFuJPNJxZAbJfFCXG-jh+5pFA@mail.gmail.com>
Message-ID: <loom.20131029T125942-944@post.gmane.org>

Jan Martin <janmartin <at> diy-streetview.org> writes:


> gdal_translate \?
-gcp 0 0 8.648585222862266 50.001663936185025 \?
-gcp 644 0 8.65549459328463 50.001663936185025 \
-gcp 644 899 8.65549459328463 49.995463920773624 \?
/home/me/geotiff/Neurott.png /home/me/geotiff/Neurott.tiff 
> seems to work, but
> gdalinfo /home/me/geotiff/Neurott.tiff shows that the Corner Coordinates >
are the pixel values, and not the lat/lon coordinates

Try what happens if you run next gdalwarp with something like

gdalwarp -rc -s_srs epsg:4326 -t_srs epsg:4326 -of GTiff -co tiled=yes
Neurott.tiff final.tiff

-Jukka Rahkonen-





From Moses.Gone at t-systems.com  Tue Oct 29 05:46:32 2013
From: Moses.Gone at t-systems.com (Moses.Gone at t-systems.com)
Date: Tue, 29 Oct 2013 13:46:32 +0100
Subject: [gdal-dev] gdal_translate ignores my -projwin param
Message-ID: <2D55B4FBCD59D045AC382D3F65435B7903843AA9BDFC@HE101453.emea1.cds.t-internal.com>

Hello list,
Something strange is happen to my GDAL. I have before executed the command below successfully. However, today I introduced a -projwin params where I specify  my AOI, since I don't want the entire raster being pulled from the DB. So what is strange, GDAL ignores my window and tries to pull the entire dataset:

Command:
gdal_translate --debug on -projwin 619711 5813265 625334 5809349 -a_srs EPSG:25832 -a_nodata none -of vrt SDE:server,5153,ngds1,pw,user, DE_DTK25_E32,image image.vrt

Debug Output:
SDERASTER: Open("SDE:server,5153,ngds1,pw,user, DE_DTK25_E32,image ") revealed 7 tokens.
SDERASTER: SDE Column name is 'image'
SDERASTER: 'DE_DTK25_E32' raster layer specified... using it directly with 'image' as the raster column name.
SDERASTER: minx: 275000.62500, miny: 5220000.62500, maxx: 924999.37500, maxy: 6109999.37500
SDERASTER: Tile origin: 275000.62500, 6109999.37500

I have checked to confirm that the window coord array is specified as minX, maxY, maxX, minY.

Can someone help me figure out what is happening here?

Thanks,
Moses

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/1bf35adb/attachment.html>

From even.rouault at mines-paris.org  Tue Oct 29 06:11:45 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Oct 2013 14:11:45 +0100
Subject: [gdal-dev] gdal_translate ignores my -projwin param
In-Reply-To: <2D55B4FBCD59D045AC382D3F65435B7903843AA9BDFC@HE101453.emea1.cds.t-internal.com>
References: <2D55B4FBCD59D045AC382D3F65435B7903843AA9BDFC@HE101453.emea1.cds.t-internal.com>
Message-ID: <1383052305.526fb4116e190@imp.free.fr>

Selon Moses.Gone at t-systems.com:

> Hello list,
> Something strange is happen to my GDAL. I have before executed the command
> below successfully. However, today I introduced a -projwin params where I
> specify  my AOI, since I don't want the entire raster being pulled from the
> DB. So what is strange, GDAL ignores my window and tries to pull the entire
> dataset:
>
> Command:
> gdal_translate --debug on -projwin 619711 5813265 625334 5809349 -a_srs
> EPSG:25832 -a_nodata none -of vrt SDE:server,5153,ngds1,pw,user,
> DE_DTK25_E32,image image.vrt
>
> Debug Output:
> SDERASTER: Open("SDE:server,5153,ngds1,pw,user, DE_DTK25_E32,image ")
> revealed 7 tokens.
> SDERASTER: SDE Column name is 'image'
> SDERASTER: 'DE_DTK25_E32' raster layer specified... using it directly with
> 'image' as the raster column name.
> SDERASTER: minx: 275000.62500, miny: 5220000.62500, maxx: 924999.37500, maxy:
> 6109999.37500
> SDERASTER: Tile origin: 275000.62500, 6109999.37500
>
> I have checked to confirm that the window coord array is specified as minX,
> maxY, maxX, minY.
>
> Can someone help me figure out what is happening here?

Moses,

This is probably OK, at least this should be OK for most drivers. What you see
if the debug output of the SDE driver when it opens the source dataset. At that
point, it doesn't take into account the AOI specified with -projwin, which is
someting specific to how gdal_translate operates. What you specify in
gdal_translate has no influence on dataset opening. It just controls which part
of the raster will be extracted in the conversion process.
I don't know SDE, but I would imagine (hopefully) that your AOI will be properly
taken into account when extracting tiles from your SDE raster layer.

Even




From reinoud.bokhorst at bmtargoss.com  Tue Oct 29 06:50:00 2013
From: reinoud.bokhorst at bmtargoss.com (Reinoud Bokhorst)
Date: Tue, 29 Oct 2013 13:50:00 +0000
Subject: [gdal-dev] Satellite projections
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB366E63ADE7@P1KITMBX05WC03.unicph.domain>
References: <CACC0xJKg1X_L+JwS16CAb4nH5C6VCQnJANp0=+V4M+BX3g7ZsA@mail.gmail.com>
	<6C59A8A933C9B6409067456EC20EAB366E63AD81@P1KITMBX05WC03.unicph.domain>
	<CACC0xJLJCt66mCLQ8c70fAGTZL-e=ALECMfi3e=V9pkcUgnpyw@mail.gmail.com>,
	<526E88EF.3040603@bmtargoss.com>,
	<6C59A8A933C9B6409067456EC20EAB366E63ADE7@P1KITMBX05WC03.unicph.domain>
Message-ID: <99CE3215E779FF49A3C1098F4084809A665D350D@BMTEX3.bmt.org>

Thanks for both your tips, I'll give it a try.

Reinoud

________________________________
From: Simon Richard Proud [srp at geo.ku.dk]
Sent: Monday, October 28, 2013 5:05 PM
To: Reinoud Bokhorst; Jerl Simpson
Cc: gdal-dev at lists.osgeo.org
Subject: SV: [gdal-dev] Satellite projections

Hi Reinoud,
To be honest I've never had success in using GDAL for GOES in LRIT format (only for reprojecting when it is already in Geotiff). In that case I would recommend using PyTroll instead. It works well for all geostationary data: http://pytroll.org/

Cheers,
Simon

________________________________
Fra: Reinoud Bokhorst [reinoud.bokhorst at bmtargoss.com]
Sendt: 28. oktober 2013 16:55
Til: Jerl Simpson
Cc: Simon Richard Proud; gdal-dev at lists.osgeo.org
Emne: Re: [gdal-dev] Satellite projections

Dear Jerl, Simon,
Apologize for mixing into this thread but I am currently investigating how to process EUMETCAST data to more usuable formats like NetCDF and GeoTIFF.  The data stream contains MSG HRIT data and GOES15/17 + MTSAT2 LRIT data. I'll also need to reproject like you do so this post already proves useful!

I can read the MSG data trough gdal/meteosatlib but I can't read the GOES and MTSAT2 LRIT data yet. Do you perhaps have some useful pointers to software to use? Online documentation is rather scarce...

Thanks Reinoud



On 10/28/2013 04:41 PM, Jerl Simpson wrote:
Thanks Simon!

I'll give it a shot.  Meteosat is definitely a pain, and it's one of the satellites I'm working with.

If you don't mind me asking, what do you typically have in your -a_ullr designation for gdal_translate?  Or are you pulling out sections and it varies?  I'd like to get the full image, if possible.

Thanks again!

Jerl


On Mon, Oct 28, 2013 at 10:33 AM, Simon Richard Proud <srp at geo.ku.dk<mailto:srp at geo.ku.dk>> wrote:
Hi Jerl,
We work with Meteosat data in full disk projection and it's a bit of a headache! Try these commands in GDAL and see if they work for you:

gdal_translate -a_srs  "+proj=geos +a=6378169 +b=6356583.8 +lon_0=9.49 +h=35785831" -a_ullr $up_left_x $up_left_y $low_rig_x $low_rig_y $INFILE $TEMPFILE
gdalwarp -s_srs '+proj=geos +lon_0=9.49 +h=35785831 +x_0=0.0' -t_srs '+proj=latlong +datum=WGS84' -tr 0.01 0.01 -te 0 20  70 70 -order 3 $TEMPFILE $OUTFILE

Just remember to change the +lon_0 to whatever you need for GOES. Also change the -tr and -te for gdal :-) You can also add +lat_0 but to be honest I never found it made a difference (perhaps it is ignored?)

Cheers,
Simon

________________________________
Fra: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] p? vegne af Jerl Simpson [jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>]
Sendt: 28. oktober 2013 16:17
Til: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Emne: [gdal-dev] Satellite projections

Hi guys:

I have a few data sets that come from the GOES satellites (Full Disk) and a couple others.  I can use one of the SSEC's programs to convert from their format to a netCDF.  No useful SRS info comes along in the conversion.

I've applied an SRS to them using gdal_translate and PROJ.4 that looks like:

"+proj=ortho +lon_0=-79.8 +lat_0=.208"  (lon/lat is the position of one of the satellites)

(I've also tried):
+proj=ortho +datum=WGS84 +ellps=WGS84 +lon_0=-79.8 +lat_0=.208

I'm wanting to get them into EPSG:4326.  When I do this, I end up with corner coordinates of a very small area just below the satellites position.

Does anyone have an suggestions that might help me warp this into position?  I'm sure there's something obvious that I'm missing.
I found this page, and the copied/pasted bit about the projection, but my attempts have not been successful.

http://www.gdal.org/frmt_msg.html
Georeference and Projection

The images are using the Geostationary Satellite View projection. Most GIS packages don't recognize this projection (we only know of ILWIS that does have this projection), but gdalwarp.exe can be used to re-project the images.

Thanks!




--

Jerl Simpson

Sr. Systems Engineer

Weather Trends International

jsimpson at wxtrends.com<mailto:jsimpson at wxtrends.com>

Corporate ? http://www.wxtrends.com<http://www.wxtrends.com/>

B2B ? http://www.wt360business.com<http://www.wt360business.com/>

B2C ? http://www.wt360.com<http://www.wt360.com/>



This communication is privileged and may contain confidential information. It's intended only for the use of the person or entity named above. If you are not the intended recipient, do not distribute or copy this communication. If you have received this communication in error, please notify the sender immediately and return the original to the email address above. ? Copyright 2013 Weather Trends International, Inc.

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Reinoud Bokhorst
Advisor Oceanography & ICT
BMT ARGOSS

Tel.:         +31 527-242299
Direct:     +31 527-656421
Mobile:    +31 6-54714427

www.bmt.org/linkedin<http://www.bmt.org/linkedin> | www.twitter.com/bmtgroup<http://www.twitter.com/bmtgroup> | www.facebook.com/bmtgroup<http://www.facebook.com/bmtgroup> | www.youtube.com/bmtgroupltd<http://www.youtube.com/bmtgroupltd>

BMT ARGOSS b.v., Voorsterweg 28, 8316 PT, Marknesse, The Netherlands

(Postal address : PO Box 61, 8325 ZH, Vollenhove, The Netherlands)

Registered in The Netherlands, Registered no. 39060160.

Unless otherwise agreed by BMT ARGOSS in writing, all  work, services, goods or products supplied by BMT ARGOSS shall be subject to and governed by BMT ARGOSS?s own terms and conditions which are available for inspection from BMT ARGOSS on request.

E-mail confidentiality notice and disclaimer:

The contents of this e-mail and any attachments are intended for the use of the mail addressee(s) shown. If you are not that person, you are not allowed to read it, to take any action based upon it or to copy it, forward, distribute or disclose the contents of it and you should please delete it from your system. BMT ARGOSS does not accept liability for any errors or omissions in the context of this e-mail or its attachments which arise as a result of internet transmission, nor accept liability for statements which are those of the author and clearly not made on behalf of BMT ARGOSS.

Please consider the environmental impacts of printing this email, and only do so if really necessary


______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________

______________________________________________________________________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit http://www.symanteccloud.com
______________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/8ef6df04/attachment-0001.html>

From gdal at stripfamily.net  Tue Oct 29 07:13:31 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 29 Oct 2013 08:13:31 -0600
Subject: [gdal-dev] gdalwarp multiple nodata
In-Reply-To: <1383034819760-5086278.post@n6.nabble.com>
References: <1382968662835-5086084.post@n6.nabble.com>	<CAB6t5t_MEgejSUX+SNKeR09c131K5WdiEyA9mgR4bZyPYu7=ag@mail.gmail.com>
	<1383034819760-5086278.post@n6.nabble.com>
Message-ID: <526FC28B.5010803@stripfamily.net>

Just a word of caution about val-repl.py -
I recently tried to use this script and be warned that it doesn't
preserve all the properties of the input file. In my case, the input
file was a paletted geotiff and the output is grayscale, a very
different beast for my purpose. It shouldn't be too hard to fix this, as
long as you're aware of the problem.



From xenon at alphapixel.com  Tue Oct 29 09:23:22 2013
From: xenon at alphapixel.com (Chris Hanson)
Date: Tue, 29 Oct 2013 10:23:22 -0600
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
In-Reply-To: <201310230921.34350.even.rouault@mines-paris.org>
References: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>
	<loom.20131022T221252-3@post.gmane.org>
	<201310230921.34350.even.rouault@mines-paris.org>
Message-ID: <CAGoufma3bxnLTTzZxXtfE=y=HLBm7nsPSkg3ZwEuap_SaHVhYQ@mail.gmail.com>

Followup with one additional question.

MapQuest apparently now requires an API key be specified:
http://developer.mapquest.com/web/products/open/forums/-/message_boards/view_message/459733

I didn't at a glance see any way to specify this via the GDAL WMS XML. Am I
missing something?


On Wed, Oct 23, 2013 at 1:21 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 22 octobre 2013 22:21:41, Jukka Rahkonen a ?crit :
> > Chris Hanson <xenon <at> alphapixel.com> writes:
> > > What is the proper process for requesting a DataWindow region
> > > and getting a proper reoreferenced raster subset back?
> >
> > I am not sure about how changing the DataWindow size in the XML
> > configuration file should work but anyway, it is not so good place to
> play.
>
> Yes playing with DataWindow is not appropriate. It defines the the
> bounding box
> of the source layer, in the tile scheme of the source. in particular at
> which
> coordinates http://otile1.mqcdn.com/tiles/1.0.0/sat/0/0/0.png will be.
>
> What you would want is the capability to define a window of interest, but
> that
> doesn't exist in the WMS XML format.
>
> > Instead, define the TMS source to cover the whole world as in
> > http://www.gdal.org/frmt_wms_openstreetmap_tms.xml and control the area
> you
> > want with the gdal_translate parameters
> > http://www.gdal.org/gdal_translate.html
> >
> > I believe you want to use -projwin.
>
> +1
>
> You can also create a virtual dataset file with gdal_translate -of VRT
> -projwin
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
http://www.alphapixel.com/
Training ? Consulting ? Contracting
3D ? Scene Graphs (Open Scene Graph/OSG) ? OpenGL 2 ? OpenGL 3 ? OpenGL 4 ?
GLSL ? OpenGL ES 1 ? OpenGL ES 2 ? OpenCL
Digital Imaging ? GIS ? GPS ? osgEarth ? Terrain ? Telemetry ? Cryptography
? Digital Audio ? LIDAR ? Kinect ? Embedded ? Mobile ? iPhone/iPad/iOS ?
Android
@alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/a4c1f5d0/attachment.html>

From even.rouault at mines-paris.org  Tue Oct 29 14:09:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Oct 2013 22:09:46 +0100
Subject: [gdal-dev] (Another) Motion: Adopt "RFC 43
	GDALMajorObject::GetMetadataDomainList()"
In-Reply-To: <201310250022.32347.even.rouault@mines-paris.org>
References: <201310250022.32347.even.rouault@mines-paris.org>
Message-ID: <201310292209.46922.even.rouault@mines-paris.org>

> 
> Motion : I move to adopt RFC 43 GDALMajorObject::GetMetadataDomainList()
> 
>     http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist
> 
> Starting with my +1

I declare this motion passed with support from myself, Daniel and Jukka.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From wolf+grass at bergenheim.net  Tue Oct 29 14:25:31 2013
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Tue, 29 Oct 2013 22:25:31 +0100
Subject: [gdal-dev] GME driver for OGR
In-Reply-To: <1383037447.526f7a07a0cf8@imp.free.fr>
References: <CAJhTkW5taejKPsBQax5jjs9PoqYcA84vcFdU+6oMRThpDdPQ9g@mail.gmail.com>
	<201310290056.56166.even.rouault@mines-paris.org>
	<CAJhTkW75swsAbgD=vPkR90a5F_dMXvN_aKqJn5zUT+pEn1r0vw@mail.gmail.com>
	<1383037447.526f7a07a0cf8@imp.free.fr>
Message-ID: <CAJhTkW54qB9oWY7cjfgg7EEwVTw80HWGn+9OrPQZB5VBgS80Vg@mail.gmail.com>

Even,

On Tue, Oct 29, 2013 at 10:04 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>> I'm thinking that there is rarely any reason to separate the
>> connections, except if, maybe we'd like to support multiple accounts,
>> so that you can get table A using account A, and table B with account
>> B. But then again why don't you simply give access to A for both
>> tables? The way I see it we only need a single connection since the
>> API is RESTful.
>
> That makes sense. I don't think that there is a real use case with connecting 2
> different accounts within the same OGR process. But if you share connection
> between data sources, you should make sure that the sharing at the driver level
> is thread-safe (mutex, etc...) since it is valid for 2 OGRDataSource of the same
> driver to be used in parallel in different threads.
>

Aha! Thanks for the warning. :) This makes me think that it's not
worth it. Debugging multithreadded apps is a pain XD
I might make it into a separate OGRGMEHttp class or similar instead.
I'm mainly interested in code encapsulation and re-use, but at some
point it might be interesting to have the ability to query multiple
layers in GME in parallel. But I'll leave that as a backlog item for
the future.

>> Yeah, something like that, can't get into specifics at this point. I
>> hope we'll announce it soon, though. Again I want to prepare for
>> what's coming,and looking for some advice on best practices. I hope to
>> avoid realizing in 2 months that I need to refactor the
>> OGRGMEDatasource fully, but otoh that's not going to be the end of the
>> world, if I have to do it that way.
>
> OK. Well you're probably the one with the best vision of what can be shared ;-)

XD ;) yeah. I'll bring it up when I can. Thanks for the feedback on this so far!

--Wolf

From tkeitt at utexas.edu  Tue Oct 29 14:33:43 2013
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 29 Oct 2013 16:33:43 -0500
Subject: [gdal-dev] Colors and KML output
Message-ID: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>

I'd like to set the color of line segments individually according to a
field in KML output. Is that possible? Seem it only outputs red. I can
change that globally, but not easily for many line segments.

Looking at the driver code, there is some code there to handle colors. I
have no idea how to attach a color table to an ogr layer. Any hints on how
this works?

THK

-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/9e125b3e/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Oct 29 15:10:57 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 Oct 2013 22:10:57 +0000 (UTC)
Subject: [gdal-dev] Colors and KML output
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
Message-ID: <loom.20131029T230920-199@post.gmane.org>

Tim Keitt <tkeitt <at> utexas.edu> writes:

> 
> I'd like to set the color of line segments individually according to a
field in KML output. Is that possible? Seem it only outputs red. I can
change that globally, but not easily for many line segments.
> 
> 
> 
> Looking at the driver code, there is some code there to handle colors. I
have no idea how to attach a color table to an ogr layer. Any hints on how
this works?

Have a try by adding an OGR_STYLE column and fill the colours for the
features as described in 
http://www.gdal.org/ogr/ogr_feature_style.html

I have never tried that myself but perhaps it works.

-Jukka Rahkonen-


From tkeitt at utexas.edu  Tue Oct 29 18:57:08 2013
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 29 Oct 2013 20:57:08 -0500
Subject: [gdal-dev] Colors and KML output
In-Reply-To: <loom.20131029T230920-199@post.gmane.org>
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
	<loom.20131029T230920-199@post.gmane.org>
Message-ID: <CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>

Thanks. I had seen that, but did not realize it was saying to write these
string into a column in the database.

THK


On Tue, Oct 29, 2013 at 5:10 PM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Tim Keitt <tkeitt <at> utexas.edu> writes:
>
> >
> > I'd like to set the color of line segments individually according to a
> field in KML output. Is that possible? Seem it only outputs red. I can
> change that globally, but not easily for many line segments.
> >
> >
> >
> > Looking at the driver code, there is some code there to handle colors. I
> have no idea how to attach a color table to an ogr layer. Any hints on how
> this works?
>
> Have a try by adding an OGR_STYLE column and fill the colours for the
> features as described in
> http://www.gdal.org/ogr/ogr_feature_style.html
>
> I have never tried that myself but perhaps it works.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/82a6dc3b/attachment.html>

From tkeitt at utexas.edu  Tue Oct 29 19:36:29 2013
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 29 Oct 2013 21:36:29 -0500
Subject: [gdal-dev] Colors and KML output
In-Reply-To: <CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
	<loom.20131029T230920-199@post.gmane.org>
	<CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>
Message-ID: <CANnL8gruLAU-WES1oJAP-SkFS3PJsPur8ocNYSph3AKpcAELcA@mail.gmail.com>

OK. Now I have my PEN styles loaded in the table. The KML driver is still
writing only red. Anyone how to get KML to use the OGR_STYLE column?

THK


On Tue, Oct 29, 2013 at 8:57 PM, Tim Keitt <tkeitt at utexas.edu> wrote:

> Thanks. I had seen that, but did not realize it was saying to write these
> string into a column in the database.
>
> THK
>
>
> On Tue, Oct 29, 2013 at 5:10 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi
> > wrote:
>
>> Tim Keitt <tkeitt <at> utexas.edu> writes:
>>
>> >
>> > I'd like to set the color of line segments individually according to a
>> field in KML output. Is that possible? Seem it only outputs red. I can
>> change that globally, but not easily for many line segments.
>> >
>> >
>> >
>> > Looking at the driver code, there is some code there to handle colors. I
>> have no idea how to attach a color table to an ogr layer. Any hints on how
>> this works?
>>
>> Have a try by adding an OGR_STYLE column and fill the colours for the
>> features as described in
>> http://www.gdal.org/ogr/ogr_feature_style.html
>>
>> I have never tried that myself but perhaps it works.
>>
>> -Jukka Rahkonen-
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> http://www.keittlab.org/
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131029/c19d546c/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Oct 29 22:54:58 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Oct 2013 05:54:58 +0000 (UTC)
Subject: [gdal-dev] Colors and KML output
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
	<loom.20131029T230920-199@post.gmane.org>
	<CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>
	<CANnL8gruLAU-WES1oJAP-SkFS3PJsPur8ocNYSph3AKpcAELcA@mail.gmail.com>
Message-ID: <loom.20131030T062815-64@post.gmane.org>

Tim Keitt <tkeitt <at> utexas.edu> writes:

> 
> 
> OK. Now I have my PEN styles loaded in the table. The KML driver is still
writing only red. Anyone how to get KML to use the OGR_STYLE column?

Have another try. I digitized some lines and set OGR_STYLE to something like
PEN(c:#0000FF,w:8px). Saved into shapefile and checked with ogrinfo
ogrinfo kml.shp kml

OGRFeature(kml):2
  OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
  Style = PEN(c:#0000FF,w:8px)

OGR_STYLE attribute has been converted into feature style. Data are OK to
play with.

Then convert into kml with both "KML" and "LIBKML" drivers and check with
ogrinfo

KML driver
==========
OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
Style = PEN(c:#0000FFFF,w:8.000000px)

LIBKML driver
=============
 OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
 Style = PEN(c:#0000FFFF,w:2.822228px)

Conclusion: Both drivers take the pen color. LIBKML is changing the line
width for some reason at least in this test. My features were reprojected
from EPSG:3067 into EPSG:4326 in my little test but I did not make further
tests to see if this is the reason. Anyway, I can change colors with GDAL
1.10 so I believe you will do the same soon.

I checked also with GE and colours do show.

-Jukka-



From lauramail at iol.it  Wed Oct 30 01:38:50 2013
From: lauramail at iol.it (laura0)
Date: Wed, 30 Oct 2013 01:38:50 -0700 (PDT)
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
Message-ID: <1383122330151-5086505.post@n6.nabble.com>

Hi all,
I would like to know I can I read with gdal the geolocation array stored
inside an O3MSAF HDF5 data.
With GDALGetMetadata( dataset, "" ); I get the list of metadata (es. Fill
Value, Title, Unit but not the array with the latitude and longitude
values), with GDALGetMetadata( dataset, "SUBDATASETS" ); just the list of 
SUBDATASETS: all the DATA variable, GEOLOCATION are excluded.
Suggestions?
Thanks,

Laura




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Wed Oct 30 02:12:27 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Oct 2013 09:12:27 +0000 (UTC)
Subject: [gdal-dev] Using a MapQuest TMS via GDAL
References: <CAGoufma7q2wH0Hs9YzaFwnyHgrVW2pDLAQViVdvXj9jvtX0t3Q@mail.gmail.com>
	<loom.20131022T221252-3@post.gmane.org>
	<201310230921.34350.even.rouault@mines-paris.org>
	<CAGoufma3bxnLTTzZxXtfE=y=HLBm7nsPSkg3ZwEuap_SaHVhYQ@mail.gmail.com>
Message-ID: <loom.20131030T100847-550@post.gmane.org>

Chris Hanson <xenon <at> alphapixel.com> writes:

> 
> 
> Followup with one additional question.
> MapQuest apparently now requires an API key be specified:
> 
>
http://developer.mapquest.com/web/products/open/forums/-/message_boards/view_message/459733
> 
> 
> I didn't at a glance see any way to specify this via the GDAL WMS XML. Am
I missing something?

Hi,

They speak about the static map API but I suppose you do not use that. In
the last message Brian Coacley writes "The tiles do not require a key at
this time. " Is this changed?

-Jukka Rahkonen-


From acsantome at gmail.com  Wed Oct 30 04:28:53 2013
From: acsantome at gmail.com (Adri CS)
Date: Wed, 30 Oct 2013 12:28:53 +0100
Subject: [gdal-dev] Trying to get a WMS image with GDAL
Message-ID: <CAF2KE_k3Wrj1SxHogVLKNvTTVBdzOgROS=M3zXhnE0tk6mDz8w@mail.gmail.com>

Hi,

I tried just to register the driver but got some nasty compilation errors:

#include "gdal.h"

#include "gdal_priv.h"

#include "cpl_conv.h"

#include "wms/wmsdriver.h"

#include "wms/wmsmetadataset.h"

int main() {

  GDALRegister_WMS();
  return 0;

}

The errors:


*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h:196:46: error: expected
class-name before '{' token*

* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h: In member function 'void
GDALWMSDataset::mSetBand(int, GDALRasterBand*)':*
* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h:219:64: error: 'SetBand' was
not declared in this scope*
* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h: In member function
'GDALWMSRasterBand* GDALWMSDataset::mGetBand(int)':*
* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h:220:102: error:
'GetRasterBand' was not declared in this scope*
* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h: At global scope:*
* *

*..\..\..\..\gdal-1.9.2\frmts/wms/wmsdriver.h:273:52: error: expected
class-name before '{' token*


**
And, is this the way to "read" the xml and fetch the wms?

GDALWMSDataset* wms_dataset = wms_dataset = GDALOpen("../test.xml",
GA_READONLY);

    if(wms_dataset) {

      qDebug() << "DRIVER:" << wms_dataset->GetDriver()->GetDescription();

      qDebug() << "RASTER COUNT:" << wms_dataset->GetRasterCount();

      qDebug() << "DATASET Description:" << wms_dataset->GetDescription();

    }

I'm literally clueless with the wms module.

Best regards!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131030/49b4e557/attachment.html>

From jef at norbit.de  Wed Oct 30 05:33:22 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 30 Oct 2013 13:33:22 +0100
Subject: [gdal-dev] Motion: Adopt RFC 42 : OGR Layer laundered field
	lookup
In-Reply-To: <20131023191622.GA2991@norbit.de>
References: <20131023191622.GA2991@norbit.de>
Message-ID: <20131030123322.GA24829@norbit.de>

Hi,

On Wed, 23. Oct 2013 at 21:16:22 +0200, J?rgen E. Fischer wrote:
> I propose a motion to formally adopt RFC 42 : OGR Layer laundered field
> lookup

I declare this motion passed with support from Daniel, Even, Frank, Tamas,
Jukka and myself.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From tkeitt at utexas.edu  Wed Oct 30 06:07:24 2013
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 30 Oct 2013 08:07:24 -0500
Subject: [gdal-dev] Colors and KML output
In-Reply-To: <loom.20131030T062815-64@post.gmane.org>
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
	<loom.20131029T230920-199@post.gmane.org>
	<CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>
	<CANnL8gruLAU-WES1oJAP-SkFS3PJsPur8ocNYSph3AKpcAELcA@mail.gmail.com>
	<loom.20131030T062815-64@post.gmane.org>
Message-ID: <CANnL8gpivrtEbJNcSbbOo9dBT-JPJrGfOdusfYhDuRJV-cFjEQ@mail.gmail.com>

Brilliant. That works. The problem was that I was using the -sql switch to
query from postgis directly into KML. Apparently that does not work at lest
with my query string. Dumping with psql2shape and then ogr2ogr to convert
to KML did the trick. Thanks.

Now to figure out how to switch the drawing order...

THK


On Wed, Oct 30, 2013 at 12:54 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Tim Keitt <tkeitt <at> utexas.edu> writes:
>
> >
> >
> > OK. Now I have my PEN styles loaded in the table. The KML driver is still
> writing only red. Anyone how to get KML to use the OGR_STYLE column?
>
> Have another try. I digitized some lines and set OGR_STYLE to something
> like
> PEN(c:#0000FF,w:8px). Saved into shapefile and checked with ogrinfo
> ogrinfo kml.shp kml
>
> OGRFeature(kml):2
>   OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
>   Style = PEN(c:#0000FF,w:8px)
>
> OGR_STYLE attribute has been converted into feature style. Data are OK to
> play with.
>
> Then convert into kml with both "KML" and "LIBKML" drivers and check with
> ogrinfo
>
> KML driver
> ==========
> OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
> Style = PEN(c:#0000FFFF,w:8.000000px)
>
> LIBKML driver
> =============
>  OGR_STYLE (String) = PEN(c:#0000FF,w:8px)
>  Style = PEN(c:#0000FFFF,w:2.822228px)
>
> Conclusion: Both drivers take the pen color. LIBKML is changing the line
> width for some reason at least in this test. My features were reprojected
> from EPSG:3067 into EPSG:4326 in my little test but I did not make further
> tests to see if this is the reason. Anyway, I can change colors with GDAL
> 1.10 so I believe you will do the same soon.
>
> I checked also with GE and colours do show.
>
> -Jukka-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131030/3d9635dc/attachment.html>

From etourigny.dev at gmail.com  Wed Oct 30 06:31:51 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 30 Oct 2013 11:31:51 -0200
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
In-Reply-To: <1383122330151-5086505.post@n6.nabble.com>
References: <1383122330151-5086505.post@n6.nabble.com>
Message-ID: <CA+TxYvM=HAhjzxYG15jKdDR1ZHXzXM=zV3B0v6Ja2aHzceCFoQ@mail.gmail.com>

geolocation is stored in the GEOLOCATION metadata domain, so this should
probably work:

GDALGetMetadata( dataset, "GEOLOCATION" )

see http://trac.osgeo.org/gdal/wiki/rfc4_geolocate


On Wed, Oct 30, 2013 at 6:38 AM, laura0 <lauramail at iol.it> wrote:

> Hi all,
> I would like to know I can I read with gdal the geolocation array stored
> inside an O3MSAF HDF5 data.
> With GDALGetMetadata( dataset, "" ); I get the list of metadata (es. Fill
> Value, Title, Unit but not the array with the latitude and longitude
> values), with GDALGetMetadata( dataset, "SUBDATASETS" ); just the list of
> SUBDATASETS: all the DATA variable, GEOLOCATION are excluded.
> Suggestions?
> Thanks,
>
> Laura
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131030/23ca2e8a/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Oct 30 06:36:43 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Oct 2013 13:36:43 +0000 (UTC)
Subject: [gdal-dev] Colors and KML output
References: <CANnL8grGMwum2O3KQ35VaoibfiZfYQwSvc0Q-d62+koWuKU86A@mail.gmail.com>
	<loom.20131029T230920-199@post.gmane.org>
	<CANnL8gpONOWmY2gZRyb62qp82XN0adrDC+=9AMGU8ywiF1CQRA@mail.gmail.com>
	<CANnL8gruLAU-WES1oJAP-SkFS3PJsPur8ocNYSph3AKpcAELcA@mail.gmail.com>
	<loom.20131030T062815-64@post.gmane.org>
	<CANnL8gpivrtEbJNcSbbOo9dBT-JPJrGfOdusfYhDuRJV-cFjEQ@mail.gmail.com>
Message-ID: <loom.20131030T143354-321@post.gmane.org>

Tim Keitt <tkeitt <at> utexas.edu> writes:

> 
> 
> Brilliant. That works. The problem was that I was using the -sql switch to
query from postgis directly into KML. Apparently that does not work at lest
with my query string. Dumping with psql2shape and then ogr2ogr to convert to
KML did the trick. Thanks.
> 
> 
> 
> Now to figure out how to switch the drawing order...

Hi,

That's a good start but it may be better to learn how to play with VRT files
with some -sql inside. This document is somehow related
http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf

-Jukka-




From lauramail at iol.it  Wed Oct 30 07:56:14 2013
From: lauramail at iol.it (laura0)
Date: Wed, 30 Oct 2013 07:56:14 -0700 (PDT)
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
In-Reply-To: <CA+TxYvM=HAhjzxYG15jKdDR1ZHXzXM=zV3B0v6Ja2aHzceCFoQ@mail.gmail.com>
References: <1383122330151-5086505.post@n6.nabble.com>
	<CA+TxYvM=HAhjzxYG15jKdDR1ZHXzXM=zV3B0v6Ja2aHzceCFoQ@mail.gmail.com>
Message-ID: <1383144974993-5086612.post@n6.nabble.com>

Unfortunately it does not.
GDALGetMetadata( dataset, "GEOLOCATION" ) return NULL




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505p5086612.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Wed Oct 30 08:23:34 2013
From: gdal at stripfamily.net (David Strip)
Date: Wed, 30 Oct 2013 09:23:34 -0600
Subject: [gdal-dev] GDALColorTable - can't delete it
Message-ID: <52712476.30608@stripfamily.net>

I'm having trouble with the GDALColorTable in C++ on WIn7 using Visual
Studio 2010
With a function as simple as
    void foo()
    {
        GDALColorTable * ct = new GDALColorTable;
        delete ct;
      }

I've also tried
    void foo()
    {
        GDALColorTable ct;
    }

and

    void foo()
    {
        GDALColorTable * ct = new GDALColorTable;
        GDALDestroyColorTable((GDALColorTableH) ct);
    }

I get either unhandled exception or stack corruption errors.

I expect there's something simple I'm missing, but it's eluding me at
the moment.

From lucena_ivan at hotmail.com  Wed Oct 30 08:33:16 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 30 Oct 2013 11:33:16 -0400
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
In-Reply-To: <1383122330151-5086505.post@n6.nabble.com>
References: <1383122330151-5086505.post@n6.nabble.com>
Message-ID: <BLU173-W2137ACA8CA55A1EC2F42C1900A0@phx.gbl>

Hi Laura,

In that particular product the geolocation is not a metadata item but a field (two images with latitude values in one image and longitude values in the other).

"The swath structure consists of Data Fields and
Geolocation Fields, but we start with StructMetadata.0, since this holds information on the
size of the Data Fields and Geolocation Fields, that is being read in before the Data Fields and
Geolocation Fields are read in." [http://www.temis.nl/airpollution/no2.html] Product Specification Document(pdf).

GDALWARP is able to use those two geolocation field to transform the Data Fieds images into an output image in the SRS of your choice.

Regards,

Ivan

> Date: Wed, 30 Oct 2013 01:38:50 -0700
> From: lauramail at iol.it
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
> 
> Hi all,
> I would like to know I can I read with gdal the geolocation array stored
> inside an O3MSAF HDF5 data.
> With GDALGetMetadata( dataset, "" ); I get the list of metadata (es. Fill
> Value, Title, Unit but not the array with the latitude and longitude
> values), with GDALGetMetadata( dataset, "SUBDATASETS" ); just the list of 
> SUBDATASETS: all the DATA variable, GEOLOCATION are excluded.
> Suggestions?
> Thanks,
> 
> Laura
> 
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131030/dbe68e72/attachment.html>

From even.rouault at mines-paris.org  Wed Oct 30 08:48:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Oct 2013 16:48:27 +0100
Subject: [gdal-dev] GDALColorTable - can't delete it
In-Reply-To: <52712476.30608@stripfamily.net>
References: <52712476.30608@stripfamily.net>
Message-ID: <201310301648.27861.even.rouault@mines-paris.org>

Le mercredi 30 octobre 2013 16:23:34, David Strip a ?crit :
> I'm having trouble with the GDALColorTable in C++ on WIn7 using Visual
> Studio 2010
> With a function as simple as
>     void foo()
>     {
>         GDALColorTable * ct = new GDALColorTable;
>         delete ct;
>       }
> 
> I've also tried
>     void foo()
>     {
>         GDALColorTable ct;
>     }
> 
> and
> 
>     void foo()
>     {
>         GDALColorTable * ct = new GDALColorTable;
>         GDALDestroyColorTable((GDALColorTableH) ct);
>     }
> 
> I get either unhandled exception or stack corruption errors.
> 
> I expect there's something simple I'm missing, but it's eluding me at
> the moment.

Check that your compilation / linking flags match the ones used for the GDAL 
library itself. The debug version of a GDAL build is known to use kind of 
unusual flags. See what is used in nmake.opt

Otherwise a pure C solution should work :

GDALColorTableH hCT = GDALCreateColorTable ( eColorInterp );
GDALDestroyColorTable(hCT);


> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lauramail at iol.it  Thu Oct 31 01:55:25 2013
From: lauramail at iol.it (laura0)
Date: Thu, 31 Oct 2013 01:55:25 -0700 (PDT)
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
In-Reply-To: <BLU173-W2137ACA8CA55A1EC2F42C1900A0@phx.gbl>
References: <1383122330151-5086505.post@n6.nabble.com>
	<BLU173-W2137ACA8CA55A1EC2F42C1900A0@phx.gbl>
Message-ID: <1383209725624-5086790.post@n6.nabble.com>

Thanks Ivan,
can you be more specific with your suggestion to use GDALWARP to transform
the Data Fields images into an output image? 

Many thanks for the help,
Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505p5086790.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From barthelemy at geovariances.com  Thu Oct 31 03:39:44 2013
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Thu, 31 Oct 2013 11:39:44 +0100
Subject: [gdal-dev] Linking GDAL to HDF5 static
Message-ID: <CAK9jXVU57K6jmkaSpo7amqVXZJNAJTnOG72AaFDt8i4H1Vo_cA@mail.gmail.com>

Hi,
I'd like to link GDAL to the static versions of NetCDF and HDF5 to reduce
the numbers of files i have to install with my application.
As NetCDF also depends on HDF5, and HDF5 is not linked directly in
GDAL.dll, but in the HDF5 plugin DLL, do you know if i'll end up having
HDF5 linked twice, once in HDF5 because of netcdf, and once in HDF5 plugin
dll? Or does the build detect that HDF5 will already be in GDAL dll, so
doesn't try to link it in the HDF5 pugin DLL?

-- 
Olivier BARTHELEMY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20131031/b2a9a943/attachment.html>

From schut at sarvision.nl  Thu Oct 31 04:29:58 2013
From: schut at sarvision.nl (Vincent Schut)
Date: Thu, 31 Oct 2013 12:29:58 +0100
Subject: [gdal-dev] severe memory leak when opening corrupt modis hdf
	(python bindings)
Message-ID: <52723F36.2080106@sarvision.nl>

Hi,

when opening a corrupt hdf4 modis product (I've put an example here: 
http://sarvision.nl/~schut/gdal_corrupt_hdf/MYD09GQ.A2010007.h11v09.005.2010010052202.hdf) 
with python, there is a severe memory leak (multiple GB!)

it is a dataset that gives "ERROR 4: 
`/data/modis/MOLA/MYD09GQ.005/2010.01.07/MYD09GQ.A2010007.h11v09.005.2010010052202.hdf' 
not recognised as a supported file format." when running gdalinfo on it. 
When opening it with python (gdal.Open('...'), the result is None, but 
there is a significant grow in memory usage that is only freed after 
exiting python.

Can someone confirm? Just repeatedly running ds = 
gdal.Open('MYD09GQ.A2010007.h11v09.005.2010010052202.hdf') should do it. 
Well, maybe not repeatedly. Running it once already gets my memory usage 
more than 2GB higher...

This is on gentoo linux, gdal from svn (updated yesterday), python 
2.7.5, hdf 4.2.9, and also tested on Arch Linux.

Can someone confirm?


Best regards,
Vincent.

From schut at sarvision.nl  Thu Oct 31 05:08:12 2013
From: schut at sarvision.nl (Vincent Schut)
Date: Thu, 31 Oct 2013 13:08:12 +0100
Subject: [gdal-dev] severe memory leak when opening corrupt modis hdf
 (python bindings)
In-Reply-To: <52723F36.2080106@sarvision.nl>
References: <52723F36.2080106@sarvision.nl>
Message-ID: <5272482C.6040409@sarvision.nl>

On 10/31/2013 12:29 PM, Vincent Schut wrote:
> Hi,
>
> when opening a corrupt hdf4 modis product (I've put an example here: 
> http://sarvision.nl/~schut/gdal_corrupt_hdf/MYD09GQ.A2010007.h11v09.005.2010010052202.hdf) 
> with python, there is a severe memory leak (multiple GB!)
>
> it is a dataset that gives "ERROR 4: 
> `/data/modis/MOLA/MYD09GQ.005/2010.01.07/MYD09GQ.A2010007.h11v09.005.2010010052202.hdf' 
> not recognised as a supported file format." when running gdalinfo on 
> it. When opening it with python (gdal.Open('...'), the result is None, 
> but there is a significant grow in memory usage that is only freed 
> after exiting python.
>
> Can someone confirm? Just repeatedly running ds = 
> gdal.Open('MYD09GQ.A2010007.h11v09.005.2010010052202.hdf') should do 
> it. Well, maybe not repeatedly. Running it once already gets my memory 
> usage more than 2GB higher...
>
> This is on gentoo linux, gdal from svn (updated yesterday), python 
> 2.7.5, hdf 4.2.9, and also tested on Arch Linux.
>
> Can someone confirm?
>
Update: it seems to be a hdf library problem, when I run hdfls on the 
file, it also grows my memory with several GB. I also tried other 
versions of libhdf (4.2.6, 4.2.8) but no difference...

>
> Best regards,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


