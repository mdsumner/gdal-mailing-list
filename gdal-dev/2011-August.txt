From max at geoinova.com  Mon Aug  1 03:49:58 2011
From: max at geoinova.com (Maksim Sestic)
Date: Mon Aug  1 15:05:12 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <CAMKgpObudvH7YEhLQoA0sYcmSU=i0+b4bkcCS-JwqBKjbJHh=g@mail.gmail.com>
References: <572E582730494988A495984D965C3AE4@max6><CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com><D72A935F93F1408F82C9F45CB95A5856@max6>
	<CAMKgpObudvH7YEhLQoA0sYcmSU=i0+b4bkcCS-JwqBKjbJHh=g@mail.gmail.com>
Message-ID: <8841C09A420946358F91C50B43C01C77@max6>

Hi Chaitanya,

 

Is there a managed wrapper for this (I mean, VSI* methods)?

 

Regards,

Maksim Sestic

 

  _____  

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Sent: Sunday, July 31, 2011 19:33
To: Maksim Sestic
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] .NET and OGR writing to stream

 

Maksim,

You can use the memory file system handler in the GDAL library.
The documentation of VSIInstallMemFileHandler() includes a C++ example.

http://www.gdal.org/ogr/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e

On Sun, Jul 31, 2011 at 9:47 PM, Maksim Sestic <max@geoinova.com> wrote:

Hi Chaitanya,

 

Actually, what I need is writing GML (using GML driver) to string, not a
file. Current managed wrapper looks like:

 

Public Function CreateDataSource(utf8_path As String, options() As String)
As OSGeo.OGR.DataSource

 

...while I need something like:

 

Public Function CreateDataSource(myStream As Stream, options() As String) As
OSGeo.OGR.DataSource

 

Regards,

Maksim Sestic

 

  _____  

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Sent: Sunday, July 31, 2011 18:06
To: Maksim Sestic
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] .NET and OGR writing to stream

 

Maksim,

You can use the Memory driver.

http://www.gdal.org/ogr/drv_memory.html
http://www.gdal.org/ogr/ogr_formats.html

On Sun, Jul 31, 2011 at 8:45 PM, Maksim Sestic <max@geoinova.com> wrote:

Hi all,

 

Is there any example of OGR driver writing to memory stream (instead of file
stream), in .NET?

 

Regards,

Maksim Sestic

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110801/11682d73/attachment.html
From chaitanya.ch at gmail.com  Mon Aug  1 06:47:50 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Aug  1 18:12:22 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <8841C09A420946358F91C50B43C01C77@max6>
References: <572E582730494988A495984D965C3AE4@max6>
	<CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com>
	<D72A935F93F1408F82C9F45CB95A5856@max6>
	<CAMKgpObudvH7YEhLQoA0sYcmSU=i0+b4bkcCS-JwqBKjbJHh=g@mail.gmail.com>
	<8841C09A420946358F91C50B43C01C77@max6>
Message-ID: <CAMKgpOZHu=XwTiG=HUOu5Y=yA=cUVuHBxjAtPTZyKzNrvp=YVQ@mail.gmail.com>

Maksim,

Refer to the C#.NET bindings page. I can't help you further.

http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

On Mon, Aug 1, 2011 at 1:19 PM, Maksim Sestic <max@geoinova.com> wrote:

>  Hi Chaitanya,****
>
> ** **
>
> Is there a managed wrapper for this (I mean, VSI* methods)?****
>
> ** **
>
> Regards,****
>
> Maksim Sestic****
>
> ** **
>  ------------------------------
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Sunday, July 31, 2011 19:33
>
> *To:* Maksim Sestic
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] .NET and OGR writing to stream
> ****
>
> ** **
>
> Maksim,
>
> You can use the memory file system handler in the GDAL library.
> The documentation of VSIInstallMemFileHandler() includes a C++ example.
>
> http://www.gdal.org/ogr/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e*
> ***
>
> On Sun, Jul 31, 2011 at 9:47 PM, Maksim Sestic <max@geoinova.com> wrote:**
> **
>
> Hi Chaitanya,****
>
>  ****
>
> Actually, what I need is writing GML (using GML driver) to string, not a
> file. Current managed wrapper looks like:****
>
>  ****
>
> Public Function *CreateDataSource*(*utf8_path* As *String**, **options*()
> As *String*) As *OSGeo*.*OGR*.*DataSource*****
>
>  ****
>
> ...while I need something like:****
>
>  ****
>
> Public Function *CreateDataSource*(*myStream* As *Stream**, **options*()
> As *String*) As *OSGeo*.*OGR*.*DataSource*****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>  ****
>  ------------------------------
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Sunday, July 31, 2011 18:06
> *To:* Maksim Sestic
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] .NET and OGR writing to stream****
>
>  ****
>
> Maksim,
>
> You can use the Memory driver.
>
> http://www.gdal.org/ogr/drv_memory.html
> http://www.gdal.org/ogr/ogr_formats.html****
>
> On Sun, Jul 31, 2011 at 8:45 PM, Maksim Sestic <max@geoinova.com> wrote:**
> **
>
> Hi all,****
>
>  ****
>
> Is there any example of OGR driver writing to memory stream (instead of
> file stream), in .NET?****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6339 (20110731) __________
>
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110801/731b3d77/attachment-0001.html
From szekerest at gmail.com  Mon Aug  1 07:05:23 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Aug  1 18:30:59 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <572E582730494988A495984D965C3AE4@max6>
References: <572E582730494988A495984D965C3AE4@max6>
Message-ID: <CACALY+RTKN0UxLQekuF6ZCddT3qH7aHXTaYF5kGAs2G=BtZp9A@mail.gmail.com>

Maksim,

You can refer to the example
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.csto
see how to read data into a byte array and then you can write this
array
directly to the memory stream.

Best regards,

Tamas



2011/7/31 Maksim Sestic <max@geoinova.com>

>  Hi all,****
>
> ** **
>
> Is there any example of OGR driver writing to memory stream (instead of
> file stream), in .NET?****
>
> ** **
>
> Regards,****
>
> Maksim Sestic****
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110801/06df21f4/attachment.html
From dassau at gbd-consult.de  Mon Aug  1 09:40:56 2011
From: dassau at gbd-consult.de (Otto Dassau)
Date: Mon Aug  1 21:14:41 2011
Subject: [gdal-dev] [GRASS-user] r.out.gdal export with color table for
 floating-point values
Message-ID: <20110801154056.19bae46c@nature.speedport.ip>

Hi,

fowarded from grass list, because it is probably better here with some
additional notes:

I used Float32 as data type for the export to ERDAS Img, so the data a
floating point and there is a color table but the colortable does not reflect
the floating point data.

Color Table (RGB with 174 entries)
    0: 0,191,191,255
    1: 58,151,105,255
    2: 59,152,105,255
    3: 60,153,105,255
    4: 61,154,105,255
    5: 62,155,104,255
    6: 64,156,104,255

Is it possible somehow to adjust the colortable after the GRASS export to get
a color table that distinguishes floating point values as it does in GRASS? 

thanks a lot
  Otto

Am Fri, 22 Jul 2011 09:18:53 +0200
schrieb Otto Dassau <dassau@gbd-consult.de>:

> Hi,
> 
> I have an elevation map in GRASS with a color table that distinguishes
> decimal values based on the srtm color table, see below. I only want to
> have the value 0 in aqua, and all values <> 0 shall reflect land below or
> above sea level. 
> 
> -10  57 151 105
> -0.000001 57 151 105
> 0 aqua
> 0.000001  57 151 105
> 50   117 194 93
> 100  230 230 128
> 200  202 158 75
> 
> When I export the raster with r.out.gdal (nor now I used GeoTiff and ERDAS
> Img) the color table seems to be changed to reflect "only" integer values.
> so all 0 floating point values are displayed as aqua.
> 
> Is there a solution for this? 
> 
> Thanks a lot
>  Otto 




From even.rouault at mines-paris.org  Mon Aug  1 10:24:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug  1 22:00:32 2011
Subject: [gdal-dev] [GRASS-user] r.out.gdal export with color table for
	floating-point values
In-Reply-To: <20110801154056.19bae46c@nature.speedport.ip>
References: <20110801154056.19bae46c@nature.speedport.ip>
Message-ID: <1312208663.4e36b717c7b21@webmail.free.fr>

Selon Otto Dassau <dassau@gbd-consult.de>:

> Hi,
>
> fowarded from grass list, because it is probably better here with some
> additional notes:
>
> I used Float32 as data type for the export to ERDAS Img, so the data a
> floating point and there is a color table but the colortable does not reflect
> the floating point data.
>
> Color Table (RGB with 174 entries)
>     0: 0,191,191,255
>     1: 58,151,105,255
>     2: 59,152,105,255
>     3: 60,153,105,255
>     4: 61,154,105,255
>     5: 62,155,104,255
>     6: 64,156,104,255
>
> Is it possible somehow to adjust the colortable after the GRASS export to get
> a color table that distinguishes floating point values as it does in GRASS?

Otto,

In the GDAL data model, the index of a color table is necessary a (positive)
integer. So there's no direct way to translate the GRASS color table of a
floating point band into a matching GDAL object.

There are several workarounds you could try :
* put your color table in a text file that can be used for example by "gdaldem
color-relief" . See http://gdal.org/gdaldem.html
* build a Raster Attribute Table from the color table and set it to the IMG
dataset. But be aware that R.A.T. are rarely exploited by GDAL utilities.


Best regards,

Even

>
> thanks a lot
>   Otto
>
> Am Fri, 22 Jul 2011 09:18:53 +0200
> schrieb Otto Dassau <dassau@gbd-consult.de>:
>
> > Hi,
> >
> > I have an elevation map in GRASS with a color table that distinguishes
> > decimal values based on the srtm color table, see below. I only want to
> > have the value 0 in aqua, and all values <> 0 shall reflect land below or
> > above sea level.
> >
> > -10  57 151 105
> > -0.000001 57 151 105
> > 0 aqua
> > 0.000001  57 151 105
> > 50   117 194 93
> > 100  230 230 128
> > 200  202 158 75
> >
> > When I export the raster with r.out.gdal (nor now I used GeoTiff and ERDAS
> > Img) the color table seems to be changed to reflect "only" integer values.
> > so all 0 floating point values are displayed as aqua.
> >
> > Is there a solution for this?
> >
> > Thanks a lot
> >  Otto
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From dassau at gbd-consult.de  Tue Aug  2 06:02:05 2011
From: dassau at gbd-consult.de (Otto Dassau)
Date: Tue Aug  2 18:43:02 2011
Subject: [gdal-dev] [GRASS-user] r.out.gdal export with color table for
	floating-point values
In-Reply-To: <1312208663.4e36b717c7b21@webmail.free.fr>
References: <20110801154056.19bae46c@nature.speedport.ip>
	<1312208663.4e36b717c7b21@webmail.free.fr>
Message-ID: <20110802120205.1cee1225@nature.speedport.ip>

Am Mon, 01 Aug 2011 16:24:23 +0200
schrieb Even Rouault <even.rouault@mines-paris.org>:

> > > Hi,
> > >
> > > I have an elevation map in GRASS with a color table that distinguishes
> > > decimal values based on the srtm color table, see below. I only want to
> > > have the value 0 in aqua, and all values <> 0 shall reflect land below
> > > or above sea level.
> > >
> > > -10  57 151 105
> > > -0.000001 57 151 105
> > > 0 aqua
> > > 0.000001  57 151 105
> > > 50   117 194 93
> > > 100  230 230 128
> > > 200  202 158 75
> > >
> > > When I export the raster with r.out.gdal (nor now I used GeoTiff and
> > > ERDAS Img) the color table seems to be changed to reflect "only"
> > > integer values. so all 0 floating point values are displayed as aqua.
> > >
> > > Is there a solution for this?
> > >
> > > Thanks a lot
> > >  Otto
> > 
> > Hi,
> >
> > fowarded from grass list, because it is probably better here with some
> > additional notes:
> >
> > I used Float32 as data type for the export to ERDAS Img, so the data a
> > floating point and there is a color table but the colortable does not
> > reflect the floating point data.
> >
> > Color Table (RGB with 174 entries)
> >     0: 0,191,191,255
> >     1: 58,151,105,255
> >     2: 59,152,105,255
> >     3: 60,153,105,255
> >     4: 61,154,105,255
> >     5: 62,155,104,255
> >     6: 64,156,104,255
> >
> > Is it possible somehow to adjust the colortable after the GRASS export
> > to get a color table that distinguishes floating point values as it does
> > in GRASS?
> 
> Otto,
> 
> In the GDAL data model, the index of a color table is necessary a
> (positive) integer. So there's no direct way to translate the GRASS color
> table of a floating point band into a matching GDAL object.
> 
> There are several workarounds you could try :
> * put your color table in a text file that can be used for example by
> "gdaldem color-relief" . See http://gdal.org/gdaldem.html
> * build a Raster Attribute Table from the color table and set it to the IMG
> dataset. But be aware that R.A.T. are rarely exploited by GDAL utilities.
> 
> 
> Best regards,
> 
> Even

Thanks a lot Even for your help,

the workaround with gdaldem worked fine for me. I can use the integer output
for nice looking visualisation in the background and the floating ERDAS Img
for further processing.

Are there any plans to be able to translate GRASS color tables of a floating
point band into a matching GDAL object? Would it make sense to write an
enhancement report to the GDAL bug tracker?

Regards,
 Otto

 



From even.rouault at mines-paris.org  Tue Aug  2 07:21:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug  2 20:07:07 2011
Subject: [gdal-dev] [GRASS-user] r.out.gdal export with color table for
	floating-point values
In-Reply-To: <20110802120205.1cee1225@nature.speedport.ip>
References: <20110801154056.19bae46c@nature.speedport.ip>
	<1312208663.4e36b717c7b21@webmail.free.fr>
	<20110802120205.1cee1225@nature.speedport.ip>
Message-ID: <1312284096.4e37ddc0c6d39@webmail.free.fr>


> Thanks a lot Even for your help,
>
> the workaround with gdaldem worked fine for me. I can use the integer output
> for nice looking visualisation in the background and the floating ERDAS Img
> for further processing.
>
> Are there any plans to be able to translate GRASS color tables of a floating
> point band into a matching GDAL object? Would it make sense to write an
> enhancement report to the GDAL bug tracker?

One big question is : who (=which drivers) would make use of this new enhanced
"color table" object ? Apparently GRASS, but the only other driver I have in
mind would be the EHdr driver for which negative values for the entries are also
possible. See http://trac.osgeo.org/gdal/ticket/3253 . Perhaps I am missing
other use cases, but that seems to be a quite uncommon notion to justify
extending the abstraction GDAL model to accomodate for it.

The notion of "color table" does not even seem to be appropriate when talking
about floating point values. Floating point values are by essence continuous
(*), in contrary to integer values which are discrete. So why put an entry in
the table for 11.1, but not for 11.11, 11.111... ? The values that you would put
in such a table would be similar to the text file used by gdaldem, that is to
say thresholds used by the linear interpolation for a float->RGB conversion.

The use case for Byte raster bands is different. For a paletted Byte raster
band, the value of the byte has generally no meaning by itself : it is just an
arbitrary index that is mapped to a RGB triplet in the table. The color table
acts in fact as a compression method and you can generally not use other values
for the table(**).

For a Float32 raster band, the value of the pixel means something (physical
phenomenon). The table can be used as an additionnal way of displaying the
value. But you could use different tables depending on how you want to display
the data (for a DEM, you have different DEM color tables depending on the nature
of the terrain, its global elevation, etc...). So such a color table is used for
styling, and you can imagine having different styles for the same raster band,
contrary to byte raster band where the palette is generally unique.

Even

(*) Not completely though. For a 32bit float, you have at maximum 2^32 values,
and even a bit less considering that several byte combinations map to NaN.
(**) Of course, for each principle, you can find its exception. The BSB driver
enables the user to select an alternate color table to use. See
http://gdal.org/frmt_various.html#BSB

>
> Regards,
>  Otto
>
>
>
>
>
>


From dassau at gbd-consult.de  Tue Aug  2 08:06:48 2011
From: dassau at gbd-consult.de (Otto Dassau)
Date: Tue Aug  2 20:54:43 2011
Subject: [gdal-dev] [GRASS-user] r.out.gdal export with color table for
	floating-point values
In-Reply-To: <CAG+h=FFnLosaaYjjbvC2LEzxjSeaAFATnSLf44u9VUzEDXDM9Q@mail.gmail.com>
References: <20110801154056.19bae46c@nature.speedport.ip>
	<1312208663.4e36b717c7b21@webmail.free.fr>
	<20110802120205.1cee1225@nature.speedport.ip>
	<CAG+h=FFnLosaaYjjbvC2LEzxjSeaAFATnSLf44u9VUzEDXDM9Q@mail.gmail.com>
Message-ID: <20110802140648.4a4085de@nature.speedport.ip>

Am Tue, 2 Aug 2011 12:33:20 +0200
schrieb Markus Metz <markus.metz.giswork@googlemail.com>:

> Otto Dassau:
> > Am Mon, 01 Aug 2011 16:24:23 +0200
> > schrieb Even Rouault <even.rouault@mines-paris.org>:
> >
> >> > > Hi,
> >> > >
> >> > > I have an elevation map in GRASS with a color table that
> >> > > distinguishes decimal values based on the srtm color table, see
> >> > > below. I only want to have the value 0 in aqua, and all values <> 0
> >> > > shall reflect land below or above sea level.
> >> > >
> >> > > -10 ?57 151 105
> >> > > -0.000001 57 151 105
> >> > > 0 aqua
> >> > > 0.000001 ?57 151 105
> >> > > 50 ? 117 194 93
> >> > > 100 ?230 230 128
> >> > > 200 ?202 158 75
> >> > >
> >> > > When I export the raster with r.out.gdal (nor now I used GeoTiff and
> >> > > ERDAS Img) the color table seems to be changed to reflect "only"
> >> > > integer values. so all 0 floating point values are displayed as
> >> > > aqua.
> >> > >
> >> > > Is there a solution for this?
> >> > >
> >> > > Thanks a lot
> >> > > ?Otto
> >> >
> >> > Hi,
> >> >
> >> > fowarded from grass list, because it is probably better here with some
> >> > additional notes:
> >> >
> >> > I used Float32 as data type for the export to ERDAS Img, so the data a
> >> > floating point and there is a color table but the colortable does not
> >> > reflect the floating point data.
> >> >
> >> > Color Table (RGB with 174 entries)
> >> > ? ? 0: 0,191,191,255
> >> > ? ? 1: 58,151,105,255
> >> > ? ? 2: 59,152,105,255
> >> > ? ? 3: 60,153,105,255
> >> > ? ? 4: 61,154,105,255
> >> > ? ? 5: 62,155,104,255
> >> > ? ? 6: 64,156,104,255
> >> >
> >> > Is it possible somehow to adjust the colortable after the GRASS export
> >> > to get a color table that distinguishes floating point values as it
> >> > does in GRASS?
> >>
> >> Otto,
> >>
> >> In the GDAL data model, the index of a color table is necessary a
> >> (positive) integer. So there's no direct way to translate the GRASS
> >> color table of a floating point band into a matching GDAL object.
> >>
> >> There are several workarounds you could try :
> >> * put your color table in a text file that can be used for example by
> >> "gdaldem color-relief" . See http://gdal.org/gdaldem.html
> >> * build a Raster Attribute Table from the color table and set it to the
> >> IMG dataset. But be aware that R.A.T. are rarely exploited by GDAL
> >> utilities.
> >>
> >>
> >> Best regards,
> >>
> >> Even
> >
> > Thanks a lot Even for your help,
> >
> > the workaround with gdaldem worked fine for me. I can use the integer
> > output for nice looking visualisation in the background and the floating
> > ERDAS Img for further processing.
> >
> > Are there any plans to be able to translate GRASS color tables of a
> > floating point band into a matching GDAL object? Would it make sense to
> > write an enhancement report to the GDAL bug tracker?
> >
> AFAIK, color table support depends on the file format and datatype,
> nothing that GRASS or GDAL can change. For nice looking visualization,
> r.out.tiff or r.out.png would do the job. Otherwise it is probably
> safest to export the color rules and supply them as separate text file
> together with the exported raster map.
> 
> Markus M

Hi Markus,

yes, for nice looking visualization r.out.png would be an option, too. I
didn't have that in mind - thanks. But r.out.tiff also changes the colors
when it changes the values from floating to integer so that's not really an
option and I need to come back to some sort of gdaldem workaround. 

Regards,
 Otto

From pedrojoseruiz at gmail.com  Tue Aug  2 09:44:47 2011
From: pedrojoseruiz at gmail.com (Pedro Jose Ruiz)
Date: Tue Aug  2 22:38:54 2011
Subject: [gdal-dev] Invitation to connect on LinkedIn
Message-ID: <163192580.1260627.1312292687300.JavaMail.app@ela4-bed78.prod>

LinkedIn
------------



   
I'd like to add you to my professional network on LinkedIn.

- Pedro Jose

Pedro Jose Ruiz
Especialista Gis administrador de Petrovision at ReMASA 
Argentina

Confirm that you know Pedro Jose Ruiz
https://www.linkedin.com/e/-irq4iu-gqux6lz6-6n/isd/3731100915/4KGe0moF/


 
-- 
(c) 2011, LinkedIn Corporation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110802/c2444c4d/attachment.html
From max at geoinova.com  Wed Aug  3 06:52:17 2011
From: max at geoinova.com (Maksim Sestic)
Date: Wed Aug  3 20:54:16 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <CACALY+RTKN0UxLQekuF6ZCddT3qH7aHXTaYF5kGAs2G=BtZp9A@mail.gmail.com>
References: <572E582730494988A495984D965C3AE4@max6>
	<CACALY+RTKN0UxLQekuF6ZCddT3qH7aHXTaYF5kGAs2G=BtZp9A@mail.gmail.com>
Message-ID: <27575CCD831A483EA6EE541E5E63670E@max6>

Hi Tamas,

 

I don't know how to apply the same principle onto OGR drivers (not GDAL).
I'm trying to create GML structure in memory using OGR driver, then handle
resulting XML string further. Don't want to write dataset to a file, then
read the file back to a string.

 

Regards,

Maksim Sestic

 

  _____  

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, August 01, 2011 13:05
To: Maksim Sestic
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] .NET and OGR writing to stream

 

Maksim,

You can refer to the example
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
to see how to read data into a byte array and then you can write this array
directly to the memory stream.

Best regards,

Tamas




2011/7/31 Maksim Sestic <max@geoinova.com>

Hi all,

 

Is there any example of OGR driver writing to memory stream (instead of file
stream), in .NET?

 

Regards,

Maksim Sestic



__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6338 (20110731) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/60c91ea0/attachment.html
From even.rouault at mines-paris.org  Wed Aug  3 08:38:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug  3 22:46:01 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <27575CCD831A483EA6EE541E5E63670E@max6>
References: <572E582730494988A495984D965C3AE4@max6>
	<CACALY+RTKN0UxLQekuF6ZCddT3qH7aHXTaYF5kGAs2G=BtZp9A@mail.gmail.com>
	<27575CCD831A483EA6EE541E5E63670E@max6>
Message-ID: <1312375093.4e3941358b1e2@webmail.free.fr>

Selon Maksim Sestic <max@geoinova.com>:

> Hi Tamas,
>
>
>
> I don't know how to apply the same principle onto OGR drivers (not GDAL).
> I'm trying to create GML structure in memory using OGR driver, then handle
> resulting XML string further. Don't want to write dataset to a file, then
> read the file back to a string.

With the OGR GML driver, you can write to /vsimem/some.gml for example. And then
you should be able to read that in-memory file with gdal.VSIFOpenL() and read
its content with gdal.VSIFReadL(). However I'm not sure that the C# bindings
have been updated to support those VSIF*L functions.

There are examples of you to use those API in Python there :
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/rfc30.py .

The C# version should be close (provided that the bindings exist for it of
course)

>
>
>
> Regards,
>
> Maksim Sestic
>
>
>
>   _____
>
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Monday, August 01, 2011 13:05
> To: Maksim Sestic
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] .NET and OGR writing to stream
>
>
>
> Maksim,
>
> You can refer to the example
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
> to see how to read data into a byte array and then you can write this array
> directly to the memory stream.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/7/31 Maksim Sestic <max@geoinova.com>
>
> Hi all,
>
>
>
> Is there any example of OGR driver writing to memory stream (instead of file
> stream), in .NET?
>
>
>
> Regards,
>
> Maksim Sestic
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus signature
> database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>


From max at geoinova.com  Wed Aug  3 09:25:45 2011
From: max at geoinova.com (Maksim Sestic)
Date: Wed Aug  3 23:36:19 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <1312375093.4e3941358b1e2@webmail.free.fr>
References: <572E582730494988A495984D965C3AE4@max6>
	<CACALY+RTKN0UxLQekuF6ZCddT3qH7aHXTaYF5kGAs2G=BtZp9A@mail.gmail.com>
	<27575CCD831A483EA6EE541E5E63670E@max6>
	<1312375093.4e3941358b1e2@webmail.free.fr>
Message-ID: <E2CB0292AEF54B508EDF42744FDC131F@max6>

Hi Even,

That's exactly what I was looking for. Yes, Gdal.VSIF* managed bindings are
there. Alas, I've been looking for them under Ogr methods :-)

Regards,
Maksim Sestic



-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, August 03, 2011 14:38
To: Maksim Sestic
Cc: 'Tamas Szekeres'; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] .NET and OGR writing to stream

Selon Maksim Sestic <max@geoinova.com>:

> Hi Tamas,
>
>
>
> I don't know how to apply the same principle onto OGR drivers (not GDAL).
> I'm trying to create GML structure in memory using OGR driver, then handle
> resulting XML string further. Don't want to write dataset to a file, then
> read the file back to a string.

With the OGR GML driver, you can write to /vsimem/some.gml for example. And
then
you should be able to read that in-memory file with gdal.VSIFOpenL() and
read
its content with gdal.VSIFReadL(). However I'm not sure that the C# bindings
have been updated to support those VSIF*L functions.

There are examples of you to use those API in Python there :
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/rfc30.py .

The C# version should be close (provided that the bindings exist for it of
course)

>
>
>
> Regards,
>
> Maksim Sestic
>
>
>
>   _____
>
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Monday, August 01, 2011 13:05
> To: Maksim Sestic
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] .NET and OGR writing to stream
>
>
>
> Maksim,
>
> You can refer to the example
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
> to see how to read data into a byte array and then you can write this
array
> directly to the memory stream.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/7/31 Maksim Sestic <max@geoinova.com>
>
> Hi all,
>
>
>
> Is there any example of OGR driver writing to memory stream (instead of
file
> stream), in .NET?
>
>
>
> Regards,
>
> Maksim Sestic
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
signature
> database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>



__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6346 (20110803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


 

__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6347 (20110803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com
 


From alexander.bruy at gmail.com  Wed Aug  3 09:35:22 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Aug  3 23:46:21 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
Message-ID: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>

Hi,

There is a well-know "problem": reading really large rasters or bands
into memory with DataSource.ReadAsArray() method impossible due
memory limitations. For example, when I try to read one band with
size 53109x29049 I get error:

File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal.py", line
727, in ReadAsArray
    return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize,
ysize, buf_obj )
File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal_array.py",
line 162, in DatasetReadAsArray
    return BandReadAsArray( ds.GetRasterBand(1), xoff, yoff, xsize,
ysize, buf_obj = buf_obj)
File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal_array.py",
line 228, in BandReadAsArray
    ar = numpy.empty([buf_ysize,buf_xsize], dtype = typecode)
ValueError: dimensions too large.

I want to know is it possible to get maximum raster size that can be handled
using ReadAsArray() without errors because I want to implement a fallback
algorithm for large rasters in my tool.

Currently I try to implement it with try-except statement but maybe
there is more
elegant solution?


Thanks
-- 
Alexander Bruy
From antonio.valentino at tiscali.it  Wed Aug  3 10:39:25 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Aug  4 00:53:56 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
Message-ID: <4E395D9D.9040105@tiscali.it>

Hi Alexander,

Il 03/08/2011 15:35, Alexander Bruy ha scritto:
> Hi,
> 
> There is a well-know "problem": reading really large rasters or bands
> into memory with DataSource.ReadAsArray() method impossible due
> memory limitations. For example, when I try to read one band with
> size 53109x29049 I get error:

[CUT]

> I want to know is it possible to get maximum raster size that can be handled
> using ReadAsArray() without errors because I want to implement a fallback
> algorithm for large rasters in my tool.

In my experience using too large chunks of memory can cause,
paradoxically, slowdowns.
My suggestion is to define a reasonable maximum size for arrays in your
application/library and switch to the "fallback algorithm for large
rasters" every time that MAX_SIZE is exceeded, even if using ReadAsArray
still works.

> Currently I try to implement it with try-except statement but maybe
> there is more
> elegant solution?
> 
> 
> Thanks

IMHO using try-except *is* elegant and perfectly in line with python's
philosophy.

best regards

-- 
Antonio Valentino
From jzl5325 at psu.edu  Wed Aug  3 11:04:18 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Aug  4 01:20:14 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <4E395D9D.9040105@tiscali.it>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
	<4E395D9D.9040105@tiscali.it>
Message-ID: <CA+bfmPt3_TgrEYpgP6voMNn9+hLeAD2wrMbgWifqm0ZU8RUk5A@mail.gmail.com>

I have been working on this problem as well.  Initially, the attempt was to
ReadAsArray small chunks.  Unfortunately this is quite inefficient.  Someone
more knowledgeable will know why, but I suspect it has to do with either
thrashing or the fact that full blocks are not being read in (as is the case
when a 5000x5000 pixel block is read in on a 12567, 12764 GTiff).

My intention this morning is to try to implement an if statement which
checks total file size and breaks it down into manageable (500MB maybe)
chunks.  Then using numpy slices, I can read, slice, mask, and manipulate as
needed.

Again, the biggest issue I have had with this issue is performance.
 Profiling shows that _gdal.IORaster is utilizing a ton of CPU time.

Hope that helps,
Jay

On Wed, Aug 3, 2011 at 7:39 AM, Antonio Valentino <
antonio.valentino@tiscali.it> wrote:

> Hi Alexander,
>
> Il 03/08/2011 15:35, Alexander Bruy ha scritto:
> > Hi,
> >
> > There is a well-know "problem": reading really large rasters or bands
> > into memory with DataSource.ReadAsArray() method impossible due
> > memory limitations. For example, when I try to read one band with
> > size 53109x29049 I get error:
>
> [CUT]
>
> > I want to know is it possible to get maximum raster size that can be
> handled
> > using ReadAsArray() without errors because I want to implement a fallback
> > algorithm for large rasters in my tool.
>
> In my experience using too large chunks of memory can cause,
> paradoxically, slowdowns.
> My suggestion is to define a reasonable maximum size for arrays in your
> application/library and switch to the "fallback algorithm for large
> rasters" every time that MAX_SIZE is exceeded, even if using ReadAsArray
> still works.
>
> > Currently I try to implement it with try-except statement but maybe
> > there is more
> > elegant solution?
> >
> >
> > Thanks
>
> IMHO using try-except *is* elegant and perfectly in line with python's
> philosophy.
>
> best regards
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/7133c4a0/attachment-0001.html
From antonio.valentino at tiscali.it  Wed Aug  3 11:32:53 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Aug  4 01:50:33 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <CA+bfmPvjfwjctYMwGYZSsV-+FEMs0eDZqLHG1Sx=kMXRsYOm_w@mail.gmail.com>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>	<4E395D9D.9040105@tiscali.it>
	<CA+bfmPvjfwjctYMwGYZSsV-+FEMs0eDZqLHG1Sx=kMXRsYOm_w@mail.gmail.com>
Message-ID: <4E396A25.1020603@tiscali.it>

Hi Jay,

Il 03/08/2011 16:53, Jay L. ha scritto:
> I have been working on this problem as well.  Initially, the attempt was to
> ReadAsArray small chunks.  Unfortunately this is quite inefficient.  Someone
> more knowledgeable will know why, but I suspect it has to do with either
> thrashing or the fact that full blocks are not being read in (as is the case
> when a 5000x5000 pixel block is read in on a 12567, 12764 GTiff).

Yes, using chunks that are too small can cause inefficiency, and yes
using blocks as that are aligned (exact size of multiple size) to I/O
blocks is a good idea whenever it is possible.

> My intention this morning is to try to implement an if statement which
> checks total file size and breaks it down into manageable (500MB maybe)
> chunks.  Then using numpy slices, I can read, slice, mask, and manipulate as
> needed.

This is the point I would like to stress.

Depending on your HW characteristics and depending on the size of the
memory chunk you use performing a trivial 2D boxcar filtering can cause
a lot of cache miss and become a very slow operation.

Please note that using numpy slicing does not fix the issue.

The same operation performed on the same total amount of data spit is
blocks with reasonable size can be significantly faster.

Nowadays even a medium PS has a lot of memory, fast data buses and large
processor caches so the issue I'm talking about is not alway triggered.

But also data flels are getting larger so the bottleneck pops up again.

The problem is the memory locality in CPU bound operations

> Again, the biggest issue I have had with this issue is performance.
>  Profiling shows that _gdal.IORaster is utilizing a ton of CPU time.
> 
> Hope that helps,
> Jay
> 

I don't know very well internals of the python binding implementation.
Looking at the release notes it seems that some important change in this
are as been don in release 1.8.0

http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News#SWIGLanguageBindings


regards

> 
> On Wed, Aug 3, 2011 at 7:39 AM, Antonio Valentino <
> antonio.valentino@tiscali.it> wrote:
> 
>> Hi Alexander,
>>
>> Il 03/08/2011 15:35, Alexander Bruy ha scritto:
>>> Hi,
>>>
>>> There is a well-know "problem": reading really large rasters or bands
>>> into memory with DataSource.ReadAsArray() method impossible due
>>> memory limitations. For example, when I try to read one band with
>>> size 53109x29049 I get error:
>>
>> [CUT]
>>
>>> I want to know is it possible to get maximum raster size that can be
>> handled
>>> using ReadAsArray() without errors because I want to implement a fallback
>>> algorithm for large rasters in my tool.
>>
>> In my experience using too large chunks of memory can cause,
>> paradoxically, slowdowns.
>> My suggestion is to define a reasonable maximum size for arrays in your
>> application/library and switch to the "fallback algorithm for large
>> rasters" every time that MAX_SIZE is exceeded, even if using ReadAsArray
>> still works.
>>
>>> Currently I try to implement it with try-except statement but maybe
>>> there is more
>>> elegant solution?
>>>
>>>
>>> Thanks
>>
>> IMHO using try-except *is* elegant and perfectly in line with python's
>> philosophy.
>>
>> best regards
>>
>> --
>> Antonio Valentino


-- 
Antonio Valentino
From spectre at posteo.de  Wed Aug  3 11:54:12 2011
From: spectre at posteo.de (firetry)
Date: Thu Aug  4 02:12:53 2011
Subject: [gdal-dev] Compilation of gdal for reading hdf4 with python
Message-ID: <1312386852470-6649238.post@n2.nabble.com>

Hi everybody

I am trying to get python reading some hdf scenes from the fengyun
satellites. I hope gdal can do this task, but so far I never worked with
gdal nor ever compiled a library on my own.
Maybe there is someone to whom it would be not much of an afford to post (or
point me to) a step by step instruction? The instructions I found on the web
are rather confusing.

En bref:
I am using Win7 x64, Pyton 2.6 with spyder, VisualStudio2008... I want to
compile gdal so it can be used by python for reading hdf4 files.

That would be a great thing and probably many other newbies could benefit.



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Compilation-of-gdal-for-reading-hdf4-with-python-tp6649238p6649238.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etiennesky at yahoo.com  Wed Aug  3 12:50:35 2011
From: etiennesky at yahoo.com (Etienne)
Date: Thu Aug  4 03:14:47 2011
Subject: [gdal-dev] Compilation of gdal for reading hdf4 with python
In-Reply-To: <1312386852470-6649238.post@n2.nabble.com>
References: <1312386852470-6649238.post@n2.nabble.com>
Message-ID: <1312390235.75311.YahooMailNeo@web36901.mail.mud.yahoo.com>

You probably want to install FWTOOLS, which include gdal and support for python and hdf4 - no need to compile anything.


http://fwtools.maptools.org/

http://fwtools.maptools.org/windows-package-notes.html



________________________________
From: firetry <spectre@posteo.de>
To: gdal-dev@lists.osgeo.org
Sent: Wednesday, August 3, 2011 12:54:12 PM
Subject: [gdal-dev] Compilation of gdal for reading hdf4 with python

Hi everybody

I am trying to get python reading some hdf scenes from the fengyun
satellites. I hope gdal can do this task, but so far I never worked with
gdal nor ever compiled a library on my own.
Maybe there is someone to whom it would be not much of an afford to post (or
point me to) a step by step instruction? The instructions I found on the web
are rather confusing.

En bref:
I am using Win7 x64, Pyton 2.6 with spyder, VisualStudio2008... I want to
compile gdal so it can be used by python for reading hdf4 files.

That would be a great thing and probably many other newbies could benefit.



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Compilation-of-gdal-for-reading-hdf4-with-python-tp6649238p6649238.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/d7c7b462/attachment.html
From even.rouault at mines-paris.org  Wed Aug  3 13:32:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug  4 03:56:36 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
Message-ID: <201108031932.29408.even.rouault@mines-paris.org>

Le mercredi 03 ao?t 2011 15:35:22, Alexander Bruy a ?crit :
> Hi,
> 
> There is a well-know "problem": reading really large rasters or bands
> into memory with DataSource.ReadAsArray() method impossible due
> memory limitations. For example, when I try to read one band with
> size 53109x29049 I get error:
> 
> File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal.py", line
> 727, in ReadAsArray
>     return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize,
> ysize, buf_obj )
> File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal_array.py",
> line 162, in DatasetReadAsArray
>     return BandReadAsArray( ds.GetRasterBand(1), xoff, yoff, xsize,
> ysize, buf_obj = buf_obj)
> File "C:\OSGeo4W\apps\Python25\lib\site-packages\osgeo\gdal_array.py",
> line 228, in BandReadAsArray
>     ar = numpy.empty([buf_ysize,buf_xsize], dtype = typecode)
> ValueError: dimensions too large.
> 
> I want to know is it possible to get maximum raster size that can be
> handled using ReadAsArray() without errors because I want to implement a
> fallback algorithm for large rasters in my tool.

It is difficult to predict in all cases. But there are a few things to keep in 
mind. Do you use a 32 bit build of GDAL or a 64 bit one ? If it is a 32 bit, 
then your memory allocations are generally limited to 2 GB by process, and 
much of the time even less because it is difficult to get reliably a continuous 
area of virtual memory of such a size. 53109 x 29049 = 1.5 GB if your data is 
of type Byte and if your dataset has only one band (multiply by the number of 
bands and the size in byte of the band data type). With a 64 bit build of GDAL 
and enough RAM, that should work more reliably.

> 
> Currently I try to implement it with try-except statement but maybe
> there is more
> elegant solution?

Yes, work with smaller buffers...

> 
> 
> Thanks
From alexander.bruy at gmail.com  Wed Aug  3 13:45:44 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Aug  4 04:10:35 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <201108031932.29408.even.rouault@mines-paris.org>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
	<201108031932.29408.even.rouault@mines-paris.org>
Message-ID: <CALuHMPCLbN_bSkpcd4sgKT8QRuEMffjawscXWxBxAC=rqHdafQ@mail.gmail.com>

Hi

2011/8/3 Antonio Valentino <antonio.valentino@tiscali.it>:
> In my experience using too large chunks of memory can cause,
> paradoxically, slowdowns.
> My suggestion is to define a reasonable maximum size for arrays in your
> application/library and switch to the "fallback algorithm for large
> rasters" every time that MAX_SIZE is exceeded, even if using ReadAsArray
> still works.

Thanks for suggestion, I already think about this.

2011/8/3 Even Rouault <even.rouault@mines-paris.org>:
> It is difficult to predict in all cases. But there are a few things to keep in
> mind. Do you use a 32 bit build of GDAL or a 64 bit one ? If it is a 32 bit,
> then your memory allocations are generally limited to 2 GB by process, and
> much of the time even less because it is difficult to get reliably a continuous
> area of virtual memory of such a size. 53109 x 29049 = 1.5 GB if your data is
> of type Byte and if your dataset has only one band (multiply by the number of
> bands and the size in byte of the band data type). With a 64 bit build of GDAL
> and enough RAM, that should work more reliably.

Personally I use 32-bit system and 32-bit GDAL, but I want to make my tool
flexible as much as possible. This is why I look for method to get maximum
raster size that fits into memory limits.

>> Currently I try to implement it with try-except statement but maybe
>> there is more
>> elegant solution?
>
> Yes, work with smaller buffers...

Thanks again for all yours suggestions guys. Will try to implement this.

Bye
-- 
Alexander Bruy
From even.rouault at mines-paris.org  Wed Aug  3 14:19:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug  4 04:46:03 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <4E396A25.1020603@tiscali.it>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
	<CA+bfmPvjfwjctYMwGYZSsV-+FEMs0eDZqLHG1Sx=kMXRsYOm_w@mail.gmail.com>
	<4E396A25.1020603@tiscali.it>
Message-ID: <201108032019.13426.even.rouault@mines-paris.org>

Le mercredi 03 ao?t 2011 17:32:53, Antonio Valentino a ?crit :
> Hi Jay,
> 
> Il 03/08/2011 16:53, Jay L. ha scritto:
> > I have been working on this problem as well.  Initially, the attempt was
> > to ReadAsArray small chunks.  Unfortunately this is quite inefficient. 
> > Someone more knowledgeable will know why, but I suspect it has to do
> > with either thrashing or the fact that full blocks are not being read in
> > (as is the case when a 5000x5000 pixel block is read in on a 12567,
> > 12764 GTiff).
> 
> Yes, using chunks that are too small can cause inefficiency, and yes
> using blocks as that are aligned (exact size of multiple size) to I/O
> blocks is a good idea whenever it is possible.

Yes I strongly concurr with that. Reading 5000x5000 in a 12567x12764 raster is 
likely to be inefficient if the raster is scanline oriented, that is to if the 
say the dimension of a bock reported by gdalinfo or GetBlockSize() is 12567x Y 
rows. In such as situation you should try to read chunks of Y (or a multiple 
of Y) whole lines.

Another point to take into consideration is when you read a multiband dataset. 
If the data in the dataset is pixel interleaved, then you should try to read 
all the bands at a time with DatasetRasterIO() so that GDAL avoids re-reading 
from disk the same blocks for each band. On the contrary, if the data is band 
interleaved, reading band by band is OK (using DatasetRasterIO() too because 
it will detect and adapt itself to the data organization to select the best 
algorithm).

There are other possible caveats depending on the file format itself. For 
example if you read a JPEG, PNG or GIF image, you must know that you cannot 
read back lines without causing decompression to be restarted from the top 
line. But such formats are rarely used for that big images. I somehow remember 
that it is also the case for some formulations of HDF4 ( 
http://trac.osgeo.org/gdal/ticket/3386 ).

You can check if your way of reading is efficient or not by defining CPL_DEBUG=ON 
and look at the warnings. If you see something about "Potential thrashing on 
band XXX of YYY", it is a hint that you didn't employ the most efficient reading 
scheme.

> 
> I don't know very well internals of the python binding implementation.
> Looking at the release notes it seems that some important change in this
> are as been don in release 1.8.0
> 
> http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News#SWIGLanguageBindings

Yes there have been a few optimizations to save some useless temporary buffer 
copies, and a few fixes as well. One of them allow to read more than 2GB for 64 
bit builds of GDAL.

Regards,

Even
From jzl5325 at psu.edu  Wed Aug  3 14:28:35 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Aug  4 04:55:59 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <201108032019.13426.even.rouault@mines-paris.org>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
	<CA+bfmPvjfwjctYMwGYZSsV-+FEMs0eDZqLHG1Sx=kMXRsYOm_w@mail.gmail.com>
	<4E396A25.1020603@tiscali.it>
	<201108032019.13426.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPtjPJ_TBbXwykWNtJ2jM8RxRGbaqp5_NATggT-YtzQ6hw@mail.gmail.com>

Evan,

To ensure that i understand here is an example:

If I have a GTiff, where the block size is one row by all of the columns  (a
single scanline), I should try to read in either one scanline at a time, or
multiple entire scanlines.  It is inefficient to take say 10 rows and only
half of the columns.

What if my application requires that I read one entire column by an
arbitrary number of scanlines?  Essentially reading at a 90 degree angle to
the block size.  Other an increasing the cache size and flushing the cache,
are their other techniques to reduce thrashing (and therefore processing
time)?

J

On Wed, Aug 3, 2011 at 11:19 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 03 ao?t 2011 17:32:53, Antonio Valentino a ?crit :
> > Hi Jay,
> >
> > Il 03/08/2011 16:53, Jay L. ha scritto:
> > > I have been working on this problem as well.  Initially, the attempt
> was
> > > to ReadAsArray small chunks.  Unfortunately this is quite inefficient.
> > > Someone more knowledgeable will know why, but I suspect it has to do
> > > with either thrashing or the fact that full blocks are not being read
> in
> > > (as is the case when a 5000x5000 pixel block is read in on a 12567,
> > > 12764 GTiff).
> >
> > Yes, using chunks that are too small can cause inefficiency, and yes
> > using blocks as that are aligned (exact size of multiple size) to I/O
> > blocks is a good idea whenever it is possible.
>
> Yes I strongly concurr with that. Reading 5000x5000 in a 12567x12764 raster
> is
> likely to be inefficient if the raster is scanline oriented, that is to if
> the
> say the dimension of a bock reported by gdalinfo or GetBlockSize() is
> 12567x Y
> rows. In such as situation you should try to read chunks of Y (or a
> multiple
> of Y) whole lines.
>
> Another point to take into consideration is when you read a multiband
> dataset.
> If the data in the dataset is pixel interleaved, then you should try to
> read
> all the bands at a time with DatasetRasterIO() so that GDAL avoids
> re-reading
> from disk the same blocks for each band. On the contrary, if the data is
> band
> interleaved, reading band by band is OK (using DatasetRasterIO() too
> because
> it will detect and adapt itself to the data organization to select the best
> algorithm).
>
> There are other possible caveats depending on the file format itself. For
> example if you read a JPEG, PNG or GIF image, you must know that you cannot
> read back lines without causing decompression to be restarted from the top
> line. But such formats are rarely used for that big images. I somehow
> remember
> that it is also the case for some formulations of HDF4 (
> http://trac.osgeo.org/gdal/ticket/3386 ).
>
> You can check if your way of reading is efficient or not by defining
> CPL_DEBUG=ON
> and look at the warnings. If you see something about "Potential thrashing
> on
> band XXX of YYY", it is a hint that you didn't employ the most efficient
> reading
> scheme.
>
> >
> > I don't know very well internals of the python binding implementation.
> > Looking at the release notes it seems that some important change in this
> > are as been don in release 1.8.0
> >
> > http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News#SWIGLanguageBindings
>
> Yes there have been a few optimizations to save some useless temporary
> buffer
> copies, and a few fixes as well. One of them allow to read more than 2GB
> for 64
> bit builds of GDAL.
>
> Regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/90973e2f/attachment-0001.html
From pmlpml001 at yahoo.com  Wed Aug  3 14:56:04 2011
From: pmlpml001 at yahoo.com (Paul Lohr)
Date: Thu Aug  4 05:25:04 2011
Subject: [gdal-dev] Replacing carbon.h in libecwj
Message-ID: <45B6487A-88F5-43F7-89B8-E879AE4D0020@yahoo.com>

I tried to configure / make / make install libecwj for the iPhone OS using a mac with gcc 4.2. Carbon.h came up as one of the missing files. I could go find carbon and install it but I think it would be better to migrate the libecwj sdk to components that exist on iOS. If I were to build a useful application, I don't think it would get through app review with a dependency on carbon. Does anyone know how to rework the libecwj sdk so dependencies on carbon are transferred to existing iOS resources? 

Thanks for any help, Paul Lohr.
From even.rouault at mines-paris.org  Wed Aug  3 15:02:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug  4 05:32:01 2011
Subject: [gdal-dev] Raster size and ReadAsArray()
In-Reply-To: <CA+bfmPtjPJ_TBbXwykWNtJ2jM8RxRGbaqp5_NATggT-YtzQ6hw@mail.gmail.com>
References: <CALuHMPDajaqO57rNANjWof0-3vqQV8y2ZLTv1d7A8i-v4-sO+A@mail.gmail.com>
	<201108032019.13426.even.rouault@mines-paris.org>
	<CA+bfmPtjPJ_TBbXwykWNtJ2jM8RxRGbaqp5_NATggT-YtzQ6hw@mail.gmail.com>
Message-ID: <201108032102.42269.even.rouault@mines-paris.org>

Le mercredi 03 ao?t 2011 20:28:35, Jay L. a ?crit :
> Evan,
> 
> To ensure that i understand here is an example:
> 
> If I have a GTiff, where the block size is one row by all of the columns 
> (a single scanline), I should try to read in either one scanline at a
> time, or multiple entire scanlines. 

Yes

> It is inefficient to take say 10 rows
> and only half of the columns.

Yes. You will end up reading the data twice from disk if the file size is 
bigger than the block cache size you are using (the default is 40 MB and it is 
shared for all I/O, reading and writing and all datasets).

> 
> What if my application requires that I read one entire column by an
> arbitrary number of scanlines?  Essentially reading at a 90 degree angle to
> the block size.

That's the worse situation you can imagine. Essentially for each column you 
read, you will end up reading the entire image. It might be reasonable to 
consider rewriting your algorithm to fit with the file data organization. Or if 
you can't afford doing that, then try to read as much columns as you can, in 
order to minimize the number of passes where the entire image will be read 
again.

> Other an increasing the cache size and flushing the cache,
> are their other techniques to reduce thrashing (and therefore processing
> time)?

Not really apart the above suggestion. Or translate first your dataset to 
another one with a block size compatible of your algorithm, or at least to 
make it square tiled (128x128 for example). That might be the easiest solution 
if you know you will process the data several times. If it is just once, then 
it won't give much benefice of course...

Well, I have another idea but it is definitely an involved one and I'm not sure 
at all of the result (performance wise). If your geotiff is not compressed, 
then you could hack into the GTiff driver ( not the one I would advertize to a 
new-comer to hack into... ) to report a block dimension compatible of your 
reading scheme and short-circuit libtiff to just read the bytes you need 
instead of the whole strip. However chances are that the performance will not 
increase substantially because you will loose a lot of time in disk seeking. I 
repeat that it would only be doable for uncompressed geotiffs.

> 
> J
> 
> On Wed, Aug 3, 2011 at 11:19 AM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le mercredi 03 ao?t 2011 17:32:53, Antonio Valentino a ?crit :
> > > Hi Jay,
> > > 
> > > Il 03/08/2011 16:53, Jay L. ha scritto:
> > > > I have been working on this problem as well.  Initially, the attempt
> > 
> > was
> > 
> > > > to ReadAsArray small chunks.  Unfortunately this is quite
> > > > inefficient. Someone more knowledgeable will know why, but I suspect
> > > > it has to do with either thrashing or the fact that full blocks are
> > > > not being read
> > 
> > in
> > 
> > > > (as is the case when a 5000x5000 pixel block is read in on a 12567,
> > > > 12764 GTiff).
> > > 
> > > Yes, using chunks that are too small can cause inefficiency, and yes
> > > using blocks as that are aligned (exact size of multiple size) to I/O
> > > blocks is a good idea whenever it is possible.
> > 
> > Yes I strongly concurr with that. Reading 5000x5000 in a 12567x12764
> > raster is
> > likely to be inefficient if the raster is scanline oriented, that is to
> > if the
> > say the dimension of a bock reported by gdalinfo or GetBlockSize() is
> > 12567x Y
> > rows. In such as situation you should try to read chunks of Y (or a
> > multiple
> > of Y) whole lines.
> > 
> > Another point to take into consideration is when you read a multiband
> > dataset.
> > If the data in the dataset is pixel interleaved, then you should try to
> > read
> > all the bands at a time with DatasetRasterIO() so that GDAL avoids
> > re-reading
> > from disk the same blocks for each band. On the contrary, if the data is
> > band
> > interleaved, reading band by band is OK (using DatasetRasterIO() too
> > because
> > it will detect and adapt itself to the data organization to select the
> > best algorithm).
> > 
> > There are other possible caveats depending on the file format itself. For
> > example if you read a JPEG, PNG or GIF image, you must know that you
> > cannot read back lines without causing decompression to be restarted
> > from the top line. But such formats are rarely used for that big images.
> > I somehow remember
> > that it is also the case for some formulations of HDF4 (
> > http://trac.osgeo.org/gdal/ticket/3386 ).
> > 
> > You can check if your way of reading is efficient or not by defining
> > CPL_DEBUG=ON
> > and look at the warnings. If you see something about "Potential thrashing
> > on
> > band XXX of YYY", it is a hint that you didn't employ the most efficient
> > reading
> > scheme.
> > 
> > > I don't know very well internals of the python binding implementation.
> > > Looking at the release notes it seems that some important change in
> > > this are as been don in release 1.8.0
> > > 
> > > http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News#SWIGLanguageBindings
> > 
> > Yes there have been a few optimizations to save some useless temporary
> > buffer
> > copies, and a few fixes as well. One of them allow to read more than 2GB
> > for 64
> > bit builds of GDAL.
> > 
> > Regards,
> > 
> > Even
From jimp at ittvis.com  Wed Aug  3 15:45:47 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Thu Aug  4 06:18:02 2011
Subject: [gdal-dev] Including curl in the context of an Android build?
Message-ID: <B1B624F7C110834B96594065A74F3A54130092BA@gemini.rsinc.com>

In order to support the GDAL (1.8.1) jpipkak driver on Android, I also
need to include libcurl (7.21.7) support.

 

The inclusion of the curl library into the GDAL build is my current
stumbling block.

 

That is, I'm able to build and execute an Android app that can load my
driver and will run to the point of calling gdal.Open() which fails with
a 0 status return because of a lack of curl.

 

I don't fully understand the checking that's being performed in the
configure utility of GDAL for the -with-curl switch.  This apperas to be
responsible for overriding the curl_global_init function in a header
file and including libcurl.so in the LIBS list.  I'm afraid I'm not a
makefile guru so I'm probably missing something obvious.

 

Regardless of how I set this, the build process for GDAL wants to parse
files *installed* on the build platform, in this case
/usr/bin/curl-config under RedHat 5.  The result is that "checking for
curl_global_init in -lcurl" always returns "no".  It also appears to
want to reference a dynamic libcurl.so (LIBS="-lcurl $LIBS"), rather
than allowing a static library as a part of the build.  

 

Separate from GDAL, I'm able to build a static libcurl.a for Android.

 

I would really like to link this static library into my final Android
.so file, along with the rest of GDAL, the required kakadu modules, and
the JNI layer and avoid the need for a separate libcurl.so file.

 

Does GDAL's architecture require a separate libcurl.so to be loaded at
runtime?  And if so, has anyone had any experience with this in the
Android environment?

 

If anyone could help me out with this, I would very much appreciate it.

 

Thanks,

Jim P.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/8fb1325e/attachment.html
From even.rouault at mines-paris.org  Wed Aug  3 15:52:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug  4 06:24:10 2011
Subject: [gdal-dev] Including curl in the context of an Android build?
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092BA@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092BA@gemini.rsinc.com>
Message-ID: <201108032152.04313.even.rouault@mines-paris.org>

Le mercredi 03 ao?t 2011 21:45:47, Jim Pendleton a ?crit :
> I don't fully understand the checking that's being performed in the
> configure utility of GDAL for the -with-curl switch.  This apperas to be
> responsible for overriding the curl_global_init function in a header
> file and including libcurl.so in the LIBS list.  I'm afraid I'm not a
> makefile guru so I'm probably missing something obvious.
> 
> 
> 
> Regardless of how I set this, the build process for GDAL wants to parse
> files *installed* on the build platform, in this case
> /usr/bin/curl-config under RedHat 5.  The result is that "checking for
> curl_global_init in -lcurl" always returns "no".  It also appears to
> want to reference a dynamic libcurl.so (LIBS="-lcurl $LIBS"), rather
> than allowing a static library as a part of the build.
> 

You might be interested by this fix : http://trac.osgeo.org/gdal/ticket/4110

> 
> Does GDAL's architecture require a separate libcurl.so to be loaded at
> runtime?  

No, a static build should work fine but might require some configure tweaking.

> And if so, has anyone had any experience with this in the
> Android environment?
> 
> 
> 
> If anyone could help me out with this, I would very much appreciate it.
> 
> 
> 
> Thanks,
> 
> Jim P.
From nhatzop at gmail.com  Wed Aug  3 22:53:00 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Aug  4 13:48:06 2011
Subject: [gdal-dev] Including curl in the context of an Android build?
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092BA@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092BA@gemini.rsinc.com>
Message-ID: <CALDJGKAHhxGw2D6mkMRg6u6yMCn+zwnz0R+HwAVG7MNAwj2gMw@mail.gmail.com>

try istead of:
LIBS=?-lcurl $LIBS?

LIBS="/absolute/path/libcurl.a $LIBS"

be aware that even the order on how you define static libraries may confused
the
compile process.


--Nikos Hatzopoulos

On Wed, Aug 3, 2011 at 12:45 PM, Jim Pendleton <jimp@ittvis.com> wrote:

>  In order to support the GDAL (1.8.1) jpipkak driver on Android, I also
> need to include libcurl (7.21.7) support.****
>
> ** **
>
> The inclusion of the curl library into the GDAL build is my current
> stumbling block.****
>
> ** **
>
> That is, I?m able to build and execute an Android app that can load my
> driver and will run to the point of calling gdal.Open() which fails with a 0
> status return because of a lack of curl.****
>
> ** **
>
> I don?t fully understand the checking that?s being performed in the
> configure utility of GDAL for the ?with-curl switch.  This apperas to be
> responsible for overriding the curl_global_init function in a header file
> and including libcurl.so in the LIBS list.  I?m afraid I?m not a makefile
> guru so I?m probably missing something obvious.****
>
> ** **
>
> Regardless of how I set this, the build process for GDAL wants to parse
> files **installed** on the build platform, in this case
> /usr/bin/curl-config under RedHat 5.  The result is that ?checking for
> curl_global_init in ?lcurl? always returns ?no?.  It also appears to want to
> reference a dynamic libcurl.so (LIBS=?-lcurl $LIBS?), rather than allowing a
> static library as a part of the build.  ****
>
> ** **
>
> Separate from GDAL, I?m able to build a static libcurl.a for Android.****
>
> ** **
>
> I would really like to link this static library into my final Android .so
> file, along with the rest of GDAL, the required kakadu modules, and the JNI
> layer and avoid the need for a separate libcurl.so file.****
>
> ** **
>
> Does GDAL?s architecture require a separate libcurl.so to be loaded at
> runtime?  And if so, has anyone had any experience with this in the Android
> environment?****
>
> ** **
>
> If anyone could help me out with this, I would very much appreciate it.***
> *
>
> ** **
>
> Thanks,****
>
> Jim P.****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110803/b21488a1/attachment.html
From antonio.rocha at deimos.com.pt  Thu Aug  4 04:10:37 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Thu Aug  4 19:23:37 2011
Subject: [gdal-dev] Checking if a label exists in a HDF file
Message-ID: <4E3A53FD.20606@deimos.com.pt>

Greetings

I have a Python Script where I call gdalwarp binary (in Windows) to warp 
an image. But, before I run the gdalwarp I need to check if the file 
exists (DONE) and if a defined HDF layer exists. How can  I check, using 
gdal, in a Script if a certain layer exists?
THanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 6348 (20110803) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From anton.korosov at nersc.no  Thu Aug  4 05:24:06 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Thu Aug  4 20:47:34 2011
Subject: [gdal-dev] Checking if a label exists in a HDF file
In-Reply-To: <4E3A53FD.20606@deimos.com.pt>
References: <4E3A53FD.20606@deimos.com.pt>
Message-ID: <4E3A6536.2080505@nersc.no>

Hi, Antonio!
You can do that with the gdalinfo command prior to running a python script:

gdalinfo MODIS_FILE.hdf | grep EV_1KM_RefSB | wc -l

returns a number if subdataset EV_1KM_RefSB exist
return 0 if not.

triton:gdaltest>gdalinfo MYD02QKM.A2010217.1335.005.2010218190207.hdf | 
grep EV_1KM_RefSB | wc -l
0

triton:gdaltest>gdalinfo MOD021KM.A2010105.2120.005.2010106075131.hdf | 
grep EV_1KM_RefSB | wc -l
7

Anton
On 08/04/2011 10:10 AM, Ant?nio Rocha wrote:
> Greetings
>
> I have a Python Script where I call gdalwarp binary (in Windows) to warp
> an image. But, before I run the gdalwarp I need to check if the file
> exists (DONE) and if a defined HDF layer exists. How can I check, using
> gdal, in a Script if a certain layer exists?
> THanks
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6348 (20110803) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From anton.korosov at nersc.no  Thu Aug  4 06:50:25 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Thu Aug  4 22:12:03 2011
Subject: [gdal-dev] Compilation of gdal for reading hdf4 with python
In-Reply-To: <1312386852470-6649238.post@n2.nabble.com>
References: <1312386852470-6649238.post@n2.nabble.com>
Message-ID: <4E3A7971.30706@nersc.no>

Hi!

Please read these pages of docs written by our programmer who have 
installed GDAL with HDF4 support on Windows. They were fastly developed 
rather for internal use but you might find them helpful.

https://docs.google.com/document/pub?id=1cRaLQXoWh-Q6bRvkLq1t6ZUxk9Wae5eXd4_KpTeBbBw

Don't hesitate to ask for clarification!

Anton

On 08/03/2011 05:54 PM, firetry wrote:
 > Hi everybody
 >
 > I am trying to get python reading some hdf scenes from the fengyun
 > satellites. I hope gdal can do this task, but so far I never worked with
 > gdal nor ever compiled a library on my own.
 > Maybe there is someone to whom it would be not much of an afford to 
post (or
 > point me to) a step by step instruction? The instructions I found on 
the web
 > are rather confusing.
 >
 > En bref:
 > I am using Win7 x64, Pyton 2.6 with spyder, VisualStudio2008... I want to
 > compile gdal so it can be used by python for reading hdf4 files.
 >
 > That would be a great thing and probably many other newbies could 
benefit.
 >
 >
 >
 > --
 > View this message in context: 
http://osgeo-org.1803224.n2.nabble.com/Compilation-of-gdal-for-reading-hdf4-with-python-tp6649238p6649238.html
 > Sent from the GDAL - Dev mailing list archive at Nabble.com.
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev@lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From szabobaa at gmail.com  Thu Aug  4 07:56:23 2011
From: szabobaa at gmail.com (=?ISO-8859-1?Q?Balazs_Szab=F3?=)
Date: Thu Aug  4 23:21:40 2011
Subject: [gdal-dev] gdalwarp under python
Message-ID: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>

Dear list!

How can I use this two bash command with gdal-python bindings?

gdal_translate -of GTiff  -a_srs EPSG:xxxx -gcp 775 560 20.58329 48.12650
-gcp 9518 539 20.8329 48.12650  -gcp 9525 7136 20.83329 48.00150  -gcp 758
7134 20.58329 48.00150  o.tif s.tif
gdalwarp -tps s.tif t.tif

[I can done this task by os.popen('gdalwarp -tps s.tif t.tif') ]
I found some code here:
http://svn.osgeo.org/gdal/trunk/autotest/gcore/transformer.py
But after this line ( tr = gdal.Transformer( ds, None, [ 'METHOD=GCP_TPS' ]
)) I dont know how can I warping my hole raster.

Here is my python code:

import osgeo.gdal
import osgeo.osr
import os

osgeo.gdal.AllRegister()
driver=osgeo.gdal.GetDriverByName('GTiff')

src='path/to/orig/o.tif'
dst='path/to/t.tif'
gcps=give_me_gcps() # I got a list like [gcp1,gcp2...]

t_srs=osgeo.osr.SpatialReference()
t_srs.ImportFromEPSG(xxxx)

s_img=osgeo.gdal.Open(src)
s_img_cols=s_img.RasterXSize
s_img_rows=s_img.RasterYSize


t_img=driver.Create(dst,s_img_cols,s_img_rows,3,osgeo.gdal.GDT_Byte) #
Create a new image
t_img.SetGCPs(gcps,t_srs.ExportToWkt())

for band_num in range(s_img.RasterCount):
        # copying the original tif bands
        band=s_img.GetRasterBand(band_num+1)
        inData=band.ReadAsArray(0,0,cols,rows)
        outBand=t_img.GetRasterBand(band_num+1)
        outBand.WriteArray(inData,0,0)
        outBand.FlushCache()


# ????

s_img=None
t_img=None


Thanks in advance
Best regards,

Balazs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110804/91afad14/attachment.html
From chaitanya.ch at gmail.com  Thu Aug  4 08:36:02 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  5 00:03:38 2011
Subject: [gdal-dev] gdalwarp under python
In-Reply-To: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
Message-ID: <CAMKgpOYwNurEwb3T01JbqA5VEPJ7Sp3C6Ucd-P66OVtj1_J=ug@mail.gmail.com>

Balazs,

If you want to programatically perform the actions of gdalwarp, it's best to
go through the code of grapwarp.cpp
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalwarp.cpp

There are some more test scripts you can refer, if you want to do this
through command line.
http://trac.osgeo.org/gdal/browser/trunk/autotest/warp/warp.py
http://trac.osgeo.org/gdal/browser/trunk/autotest/utilities/test_gdalwarp.py

On Thu, Aug 4, 2011 at 5:26 PM, Balazs Szab? <szabobaa@gmail.com> wrote:

> Dear list!
>
> How can I use this two bash command with gdal-python bindings?
>
> gdal_translate -of GTiff  -a_srs EPSG:xxxx -gcp 775 560 20.58329 48.12650
> -gcp 9518 539 20.8329 48.12650  -gcp 9525 7136 20.83329 48.00150  -gcp 758
> 7134 20.58329 48.00150  o.tif s.tif
> gdalwarp -tps s.tif t.tif
>
> [I can done this task by os.popen('gdalwarp -tps s.tif t.tif') ]
> I found some code here:
> http://svn.osgeo.org/gdal/trunk/autotest/gcore/transformer.py
> But after this line ( tr = gdal.Transformer( ds, None, [ 'METHOD=GCP_TPS' ]
> )) I dont know how can I warping my hole raster.
>
> Here is my python code:
>
> import osgeo.gdal
> import osgeo.osr
> import os
>
> osgeo.gdal.AllRegister()
> driver=osgeo.gdal.GetDriverByName('GTiff')
>
> src='path/to/orig/o.tif'
> dst='path/to/t.tif'
> gcps=give_me_gcps() # I got a list like [gcp1,gcp2...]
>
> t_srs=osgeo.osr.SpatialReference()
> t_srs.ImportFromEPSG(xxxx)
>
> s_img=osgeo.gdal.Open(src)
> s_img_cols=s_img.RasterXSize
> s_img_rows=s_img.RasterYSize
>
>
> t_img=driver.Create(dst,s_img_cols,s_img_rows,3,osgeo.gdal.GDT_Byte) #
> Create a new image
> t_img.SetGCPs(gcps,t_srs.ExportToWkt())
>
> for band_num in range(s_img.RasterCount):
>         # copying the original tif bands
>         band=s_img.GetRasterBand(band_num+1)
>         inData=band.ReadAsArray(0,0,cols,rows)
>         outBand=t_img.GetRasterBand(band_num+1)
>         outBand.WriteArray(inData,0,0)
>         outBand.FlushCache()
>
>
> # ????
>
> s_img=None
> t_img=None
>
>
> Thanks in advance
> Best regards,
>
> Balazs
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110804/00213c94/attachment-0001.html
From mithdrann at gmail.com  Thu Aug  4 14:13:35 2011
From: mithdrann at gmail.com (Sebastian Villarroya)
Date: Fri Aug  5 05:59:54 2011
Subject: [gdal-dev] Error linking GDAL library in Eclipse C/C++ for Ubuntu
Message-ID: <1312481615483-6653712.post@n2.nabble.com>

I am trying to build a C++ project that uses GDAL in Eclipse IDE C/C++ for
Ubuntu.
I have installed libgdal 1.7.3 provided by Ubuntugis using Synaptics Package
Manager.

I wrote a dummy code to test this installation

      #include <iostream>
      #include "gdal_priv.h"
      #include "cpl_conv.h" // for CPLMalloc()

      using namespace std;

      int main() {
	   GDALAllRegister();

	   cout << "!!!Do Nothing!!!" << endl;
	   return 0;
      }

I configured Project>properties>C/C++ Build>settings in order to have:
  
  GCC C++ Compiler > Includes: 
        /usr/include
        /usr/include/gdal

  GCC C Compiler > Includes:
        /usr/include
        /usr/include/gdal

  GCC C++ Linker > Libraries:
       -l/usr/lib/libgdal1.7.0.so

But when I build the code I get the next error:

make all 
Building target: prueba3
Invoking: GCC C++ Linker
g++  -o "prueba3"  ./src/prueba3.o   -l/usr/lib/libgdal1.7.0.so
/usr/bin/ld: cannot find -l/usr/lib/libgdal1.7.0.so
collect2: ld returned 1 exit status
make: *** [prueba3] Error 1

You can see that I have properly installed the libgdal1.7.0.so file:

sebas@sebas-ubuntu:/usr/lib$ ls -l  libgdal1.7.0.so
lrwxrwxrwx 1 root root 22 2011-08-04 15:02 libgdal1.7.0.so ->
libgdal1.7.0.so.1.14.3

I would be very grateful if someone could help me to fix this error.
Sebastian.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Error-linking-GDAL-library-in-Eclipse-C-C-for-Ubuntu-tp6653712p6653712.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etiennesky at yahoo.com  Thu Aug  4 21:57:18 2011
From: etiennesky at yahoo.com (Etienne)
Date: Fri Aug  5 14:11:58 2011
Subject: [gdal-dev] help resampling raster to coarser scale
Message-ID: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>

Hi all,


I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution. ??

I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map. ?
It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).

I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).

Any idea on how to accomplish what I want using gdal? ?I am not familiar with GRASS, and would prefer to stick with GDAL if I can. ?However, I am open to any suggestions.

Many Thanks
Etienne
From etiennesky at yahoo.com  Thu Aug  4 22:10:21 2011
From: etiennesky at yahoo.com (Etienne)
Date: Fri Aug  5 14:23:20 2011
Subject: [gdal-dev] problem rasterizing categorical data from shapefile - 0
	values at some intersections 
Message-ID: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>

Hi all,

I am trying to create a raster file with categorical data (land vegetation/cover positive indices) from a shapefile containing 1 layer of polygons. ?

I use the following command:?
gdal_rasterize ?-tr 0.0005 0.0005 ?-a_nodata -1 -of GTiff ?-a_srs EPSG:4618 -a "CLASSE_ID" -ot Byte -init -1 -l region1 region1.shp region1-3.tif

This creates a ?map which looks good, but there are some holes in the data, (individual pixels with a value of 0) at the intersection of 2 polygons. It looks like the
intersections pass through the exact center of these pixels. These pixels are not set to missing(-1). Depending on the output resolution, different pixels get set to a value of 0.

Has anyone ran into this problem? ?Any idea how to fix this? ?
Those interested will find 2 small shapefiles here:?http://db.tt/3X4hI45 and http://db.tt/phqnGci


I tried using gdal_grid, but it doesn't seem to support a shapefile with POLYGONs.

many thanks!
Etienne

From anton.korosov at nersc.no  Fri Aug  5 02:27:41 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri Aug  5 18:55:05 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
Message-ID: <4E3B8D5D.6010400@nersc.no>

Hi Etienne!

What if you first process the original fine resolution image with a 
filter (low-pass, median, or manually created pixel function). Then the 
result, which is a fine resolution image but smoothed, could be 
resampled with the nearest neighbor.

Anton

On 08/05/2011 03:57 AM, Etienne wrote:
> Hi all,
>
>
> I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution.
>
> I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map.
> It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).
>
> I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).
>
> Any idea on how to accomplish what I want using gdal?  I am not familiar with GRASS, and would prefer to stick with GDAL if I can.  However, I am open to any suggestions.
>
> Many Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Fri Aug  5 03:22:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  5 19:52:40 2011
Subject: [gdal-dev] problem rasterizing categorical data from shapefile -
	0 values at some intersections
In-Reply-To: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>
References: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>
Message-ID: <CAMKgpOYRTmdKXxLiGXNN8X_YiMP3VGF3r8x2URA2tai2EXMRig@mail.gmail.com>

Etienne,

Rasters of type Byte cannot hold values below 0. So, the nodata value of -1
is not practical. It's better to choose 0 or 255 depending on your data or
choose a different data type.

Your problem arises because the two geometries in the shapefile overlap in
some places and leave some gaps between them in other places.
Consider selecting only one feature using the -where option in
gdal_rasterize. You can also use the -at option but it may not work at all
resolutions.

On Fri, Aug 5, 2011 at 7:40 AM, Etienne <etiennesky@yahoo.com> wrote:

> Hi all,
>
> I am trying to create a raster file with categorical data (land
> vegetation/cover positive indices) from a shapefile containing 1 layer of
> polygons.
>
> I use the following command:
> gdal_rasterize  -tr 0.0005 0.0005  -a_nodata -1 -of GTiff  -a_srs EPSG:4618
> -a "CLASSE_ID" -ot Byte -init -1 -l region1 region1.shp region1-3.tif
>
> This creates a  map which looks good, but there are some holes in the data,
> (individual pixels with a value of 0) at the intersection of 2 polygons. It
> looks like the
> intersections pass through the exact center of these pixels. These pixels
> are not set to missing(-1). Depending on the output resolution, different
> pixels get set to a value of 0.
>
> Has anyone ran into this problem?  Any idea how to fix this?
> Those interested will find 2 small shapefiles here: http://db.tt/3X4hI45and
> http://db.tt/phqnGci
>
>
> I tried using gdal_grid, but it doesn't seem to support a shapefile with
> POLYGONs.
>
> many thanks!
> Etienne
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110805/02e4a96e/attachment.html
From antonio.rocha at deimos.com.pt  Fri Aug  5 03:33:53 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Fri Aug  5 20:04:55 2011
Subject: [gdal-dev] Checking if a label exists in a HDF file
Message-ID: <4E3B9CE1.4050307@deimos.com.pt>

Hi Anton
Thanks for the feedbvack. Unfortunely I'm not much familiar with bash 
Script. I'm running this in Python (without Gdalpy). Is there a way for 
Python?


__________ Information from ESET NOD32 Antivirus, version of virus signature database 6351 (20110804) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From schut at sarvision.nl  Fri Aug  5 03:37:42 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Aug  5 20:25:30 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
Message-ID: <4E3B9DC6.9070107@sarvision.nl>

On 08/05/2011 03:57 AM, Etienne wrote:
> Hi all,
>
>
> I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution.   
>
> I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map.  
> It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).
>
> I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).
>
> Any idea on how to accomplish what I want using gdal?  I am not familiar with GRASS, and would prefer to stick with GDAL if I can.  However, I am open to any suggestions.

Etienne,

there is a workaround for this: gdaladdo, the tool to add overviews 
('pyramids') to a file, does support the mode operator. So what you 
could do is add overviews to your file such that the overviews cover the 
output resolution you want, and then you can resample with 
gdal_translate (when no projection change is necessary, just give it 
your desired output resolution, see the gdal_translate docs), or with 
gdalwarp (and use nearest). They should use the overview level that is 
closest to your output resolution for resampling.

Best,
Vincent.
>
> Many Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From anton.korosov at nersc.no  Fri Aug  5 04:08:09 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri Aug  5 20:41:06 2011
Subject: [gdal-dev] Checking if a label exists in a HDF file
In-Reply-To: <4E3B9CE1.4050307@deimos.com.pt>
References: <4E3B9CE1.4050307@deimos.com.pt>
Message-ID: <4E3BA4E9.60008@nersc.no>

Hi Antonio!

In python you'll probably have to open the dataset, loop through all 
bands, fetch description (or metadata) from each band and then decide if 
the required band exists.

f = 
gdal.Open('HDF4_EOS:EOS_SWATH:"MOD021KM.A2010105.2120.005.2010106075131.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
b = f.GetRasterBand(1)
b.GetDescription()
print b
...
'Earth View 1KM Reflective Solar Bands Scaled Integers'


On 08/05/2011 09:33 AM, Ant?nio Rocha wrote:
 > Hi Anton
 > Thanks for the feedbvack. Unfortunely I'm not much familiar with bash
 > Script. I'm running this in Python (without Gdalpy). Is there a way for
 > Python?
 >
 >
 > __________ Information from ESET NOD32 Antivirus, version of virus
 > signature database 6351 (20110804) __________
 >
 > The message was checked by ESET NOD32 Antivirus.
 >
 > http://www.eset.com
 >
 >
From luisapena1979 at gmail.com  Fri Aug  5 06:32:47 2011
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Fri Aug  5 23:13:53 2011
Subject: [gdal-dev] How to use gdalinfo for HDF
Message-ID: <CAH+a18_e-H=_04b6gp7N9QF12osEiCE9Zf_1+7oao0Zd7isadg@mail.gmail.com>

Greetings
I have read This webpage: http://www.gdal.org/frmt_hdf4.html
But I'm having one difficulty

If I have my HDF in my current folder I'm able to do gdalinfo over my file
and then over my layer

gdalinfo HDF4_EOS:EOS_GRID"filename.hdf":POSTEL:data1
and I get all the information
But, if I have my data in other folder (like C:\data)
I do:
gdalinfo C:\data\filename.hdf
and I get a list of layers
and then:
gdalinfo HDF4_EOS:EOS_GRID"C:\filename.hdf":POSTEL:data1
I get:
Open GDAL datasets:
1 N DriverIsNull 512x512x0

How can I apply gdalinfo (or gdalwarp) for cases like this?
THanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110805/ea53c59d/attachment-0001.html
From etiennesky at yahoo.com  Fri Aug  5 08:10:06 2011
From: etiennesky at yahoo.com (Etienne)
Date: Sat Aug  6 00:58:53 2011
Subject: [gdal-dev] problem rasterizing categorical data from shapefile -
	0 values at some intersections
In-Reply-To: <CAMKgpOYRTmdKXxLiGXNN8X_YiMP3VGF3r8x2URA2tai2EXMRig@mail.gmail.com>
References: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>
	<CAMKgpOYRTmdKXxLiGXNN8X_YiMP3VGF3r8x2URA2tai2EXMRig@mail.gmail.com>
Message-ID: <1312546206.4302.YahooMailNeo@web36903.mail.mud.yahoo.com>

Hi and thanks!

I set the init value to 255, and the overlapping pixels are set to that value (instead of the default of 0).? 


Unfortunately, using -where resulted in the same gaps not being filled, and a combination of -where and -at selects too many pixels (the borders all overlap).

Looking more closely, it seems that the problem is almost exclusively where there are tiny gaps between the polygons.

It seems that -at doesn't leave any gaps, although it favors the higher-index values (as they are processed later, presumably).
I would prefer to have the most representative value, any hints?


many thanks, Etienne



________________________________
From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
To: Etienne <etiennesky@yahoo.com>
Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
Sent: Friday, August 5, 2011 4:22:10 AM
Subject: Re: [gdal-dev] problem rasterizing categorical data from shapefile - 0 values at some intersections


Etienne,

Rasters of type Byte cannot hold values below 0. So, the nodata value of -1 is not practical. It's better to choose 0 or 255 depending on your data or choose a different data type.

Your problem arises because the two geometries in the shapefile overlap in some places and leave some gaps between them in other places.
Consider selecting only one feature using the -where option in gdal_rasterize. You can also use the -at option but it may not work at all resolutions.


On Fri, Aug 5, 2011 at 7:40 AM, Etienne <etiennesky@yahoo.com> wrote:

Hi all,
>
>I am trying to create a raster file with categorical data (land vegetation/cover positive indices) from a shapefile containing 1 layer of polygons. ?
>
>I use the following command:?
>gdal_rasterize ?-tr 0.0005 0.0005 ?-a_nodata -1 -of GTiff ?-a_srs EPSG:4618 -a "CLASSE_ID" -ot Byte -init -1 -l region1 region1.shp region1-3.tif
>
>This creates a ?map which looks good, but there are some holes in the data, (individual pixels with a value of 0) at the intersection of 2 polygons. It looks like the
>intersections pass through the exact center of these pixels. These pixels are not set to missing(-1). Depending on the output resolution, different pixels get set to a value of 0.
>
>Has anyone ran into this problem? ?Any idea how to fix this? ?
>Those interested will find 2 small shapefiles here:?http://db.tt/3X4hI45 and http://db.tt/phqnGci
>
>
>I tried using gdal_grid, but it doesn't seem to support a shapefile with POLYGONs.
>
>many thanks!
>Etienne
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110805/658f7749/attachment.html
From anton.korosov at nersc.no  Fri Aug  5 08:38:07 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Sat Aug  6 01:26:28 2011
Subject: [gdal-dev] How to use gdalinfo for HDF
In-Reply-To: <CAH+a18_e-H=_04b6gp7N9QF12osEiCE9Zf_1+7oao0Zd7isadg@mail.gmail.com>
References: <CAH+a18_e-H=_04b6gp7N9QF12osEiCE9Zf_1+7oao0Zd7isadg@mail.gmail.com>
Message-ID: <4E3BE42F.8050309@nersc.no>

Hi!
Looks like a syntax error. There should be a colon after EOS_GRID
Try
gdalinfo HDF4_EOS:EOS_GRID:"C:\filename.hdf":POSTEL:data1

At least that works at my Linux:
gdalinfo 
HDF4_EOS:EOS_SWATH:"/host/gdaltest/MOD021KM.A2010105.2120.005.2010106075131.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB



On 08/05/2011 12:32 PM, Luisa Pe?a wrote:
> Greetings
> I have read This webpage: http://www.gdal.org/frmt_hdf4.html
> But I'm having one difficulty
>
> If I have my HDF in my current folder I'm able to do gdalinfo over my
> file and then over my layer
>
> gdalinfo HDF4_EOS:EOS_GRID"filename.hdf":POSTEL:data1
> and I get all the information
> But, if I have my data in other folder (like C:\data)
> I do:
> gdalinfo C:\data\filename.hdf
> and I get a list of layers
> and then:
> gdalinfo HDF4_EOS:EOS_GRID"C:\filename.hdf":POSTEL:data1
> I get:
> Open GDAL datasets:
> 1 N DriverIsNull 512x512x0
>
> How can I apply gdalinfo (or gdalwarp) for cases like this?
> THanks
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Fri Aug  5 08:46:03 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug  6 01:34:43 2011
Subject: [gdal-dev] problem rasterizing categorical data from shapefile -
	0 values at some intersections
In-Reply-To: <1312546206.4302.YahooMailNeo@web36903.mail.mud.yahoo.com>
References: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>
	<CAMKgpOYRTmdKXxLiGXNN8X_YiMP3VGF3r8x2URA2tai2EXMRig@mail.gmail.com>
	<1312546206.4302.YahooMailNeo@web36903.mail.mud.yahoo.com>
Message-ID: <CAMKgpOZ3bcxjOrV5QcwYKgkyTW2=Q+GYQzE0Ft6yTo9Lbxv-Ew@mail.gmail.com>

I suggested the -where option because your shapefile had only two features
that are (almost)inverse of each other. You can select only one of them. You
might want to use the -at option with this.

What do you mean by 'most representative value'?

On Fri, Aug 5, 2011 at 5:40 PM, Etienne <etiennesky@yahoo.com> wrote:

> Hi and thanks!
>
> I set the init value to 255, and the overlapping pixels are set to that
> value (instead of the default of 0).
>
> Unfortunately, using -where resulted in the same gaps not being filled, and
> a combination of -where and -at selects too many pixels (the borders all
> overlap).
>
> Looking more closely, it seems that the problem is almost exclusively where
> there are tiny gaps between the polygons.
>
> It seems that -at doesn't leave any gaps, although it favors the
> higher-index values (as they are processed later, presumably).
> I would prefer to have the most representative value, any hints?
>
> many thanks, Etienne
>
> ------------------------------
> *From:* Chaitanya kumar CH <chaitanya.ch@gmail.com>
> *To:* Etienne <etiennesky@yahoo.com>
> *Cc:* "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
> *Sent:* Friday, August 5, 2011 4:22:10 AM
> *Subject:* Re: [gdal-dev] problem rasterizing categorical data from
> shapefile - 0 values at some intersections
>
> Etienne,
>
> Rasters of type Byte cannot hold values below 0. So, the nodata value of -1
> is not practical. It's better to choose 0 or 255 depending on your data or
> choose a different data type.
>
> Your problem arises because the two geometries in the shapefile overlap in
> some places and leave some gaps between them in other places.
> Consider selecting only one feature using the -where option in
> gdal_rasterize. You can also use the -at option but it may not work at all
> resolutions.
>
> On Fri, Aug 5, 2011 at 7:40 AM, Etienne <etiennesky@yahoo.com> wrote:
>
> Hi all,
>
> I am trying to create a raster file with categorical data (land
> vegetation/cover positive indices) from a shapefile containing 1 layer of
> polygons.
>
> I use the following command:
> gdal_rasterize  -tr 0.0005 0.0005  -a_nodata -1 -of GTiff  -a_srs EPSG:4618
> -a "CLASSE_ID" -ot Byte -init -1 -l region1 region1.shp region1-3.tif
>
> This creates a  map which looks good, but there are some holes in the data,
> (individual pixels with a value of 0) at the intersection of 2 polygons. It
> looks like the
> intersections pass through the exact center of these pixels. These pixels
> are not set to missing(-1). Depending on the output resolution, different
> pixels get set to a value of 0.
>
> Has anyone ran into this problem?  Any idea how to fix this?
> Those interested will find 2 small shapefiles here: http://db.tt/3X4hI45and
> http://db.tt/phqnGci
>
>
> I tried using gdal_grid, but it doesn't seem to support a shapefile with
> POLYGONs.
>
> many thanks!
> Etienne
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110805/bab36239/attachment.html
From etiennesky at yahoo.com  Fri Aug  5 11:37:54 2011
From: etiennesky at yahoo.com (Etienne)
Date: Sat Aug  6 04:39:10 2011
Subject: [gdal-dev] problem rasterizing categorical data from shapefile -
	0 values at some intersections
References: <1312510221.7248.YahooMailNeo@web36907.mail.mud.yahoo.com>
	<CAMKgpOYRTmdKXxLiGXNN8X_YiMP3VGF3r8x2URA2tai2EXMRig@mail.gmail.com>
	<1312546206.4302.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<CAMKgpOZ3bcxjOrV5QcwYKgkyTW2=Q+GYQzE0Ft6yTo9Lbxv-Ew@mail.gmail.com>
Message-ID: <1312558674.4585.YahooMailNeo@web36907.mail.mud.yahoo.com>

Chaitanya,


I forgot to mention that the entire shapefile (much bigger) has many more polygons with 32 possible values (land cover type), so -with isn't practical in this case.

What I meant by??'most representative value' was, to have the value which represents the dominant land cover type in the pixel, not the one which happens to be at the center of the pixel, or the last one processed in the case of an overlap.



-> I think I found a solution: ?use the -at option?(to eliminate the missing data problem), sampling at a?higher resolution (to minimize the overlap effect), and then re-sample to the desired lower resolution.
It's not optimal but meets my needs and fixes the problem with the gaps/overlaps in the shapefile


gdal_rasterize ?-tr 0.00005 0.00005 ?-a_nodata 255 -of GTiff ?-a_srs EPSG:4618 -a "CLASSE_ID" -ot Byte -init 255 -at -l region1 region1.shp region1-2h.tif
gdalwarp ?-tr 0.0005 0.0005 ? region1-2h.tif region1-2hl.tif


many thanks! Etienne


BTW original files are found at
http://mapas.mma.gov.br/geodados/brasil/vegetacao/vegetacao2002/cerrado/dados/shape_file/mosaicos/
link cerrado->dados->shapefiles



________________________________
From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
To: Etienne <etiennesky@yahoo.com>
Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
Sent: Friday, August 5, 2011 9:46:03 AM
Subject: Re: [gdal-dev] problem rasterizing categorical data from shapefile - 0 values at some intersections


I suggested the -where option because your shapefile had only two features that are (almost)inverse of each other. You can select only one of them. You might want to use the -at option with this.

What do you mean by 'most representative value'?


On Fri, Aug 5, 2011 at 5:40 PM, Etienne <etiennesky@yahoo.com> wrote:

Hi and thanks!
>
>
>I set the init value to 255, and the overlapping pixels are set to that value (instead of the default of 0).? 
>
>
>
>Unfortunately, using -where resulted in the same gaps not being filled, and a combination of -where and -at selects too many pixels (the borders all overlap).
>
>
>Looking more closely, it seems that the problem is almost exclusively where there are tiny gaps between the polygons.
>
>
>It seems that -at doesn't leave any gaps, although it favors the higher-index values (as they are processed later, presumably).
>I would prefer to have the most representative value, any hints?
>
>
>
>many thanks, Etienne
>
>
>
>________________________________
>From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
>To: Etienne <etiennesky@yahoo.com>
>Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
>Sent: Friday, August 5, 2011 4:22:10 AM
>Subject: Re: [gdal-dev] problem rasterizing categorical data from shapefile - 0 values at some intersections
>
>
>
>Etienne,
>
>Rasters of type Byte cannot hold
values below 0. So, the nodata value of -1 is not practical. It's better to choose 0 or 255 depending on your data or choose a different data type.
>
>Your problem arises because the two geometries in the shapefile overlap in some places and leave some gaps between them in other places.
>Consider selecting only one feature using the -where option in gdal_rasterize. You can also use the -at option but it may not work at all resolutions.
>
>
>On Fri, Aug 5, 2011 at 7:40 AM, Etienne <etiennesky@yahoo.com> wrote:
>
>Hi all,
>>
>>I am trying to create a raster file with categorical data (land vegetation/cover positive indices) from a shapefile containing 1 layer of polygons. ?
>>
>>I use the following command:?
>>gdal_rasterize ?-tr 0.0005 0.0005 ?-a_nodata -1 -of GTiff ?-a_srs EPSG:4618 -a "CLASSE_ID" -ot Byte -init -1 -l region1 region1.shp region1-3.tif
>>
>>This creates a ?map which looks good, but there are some holes in the data, (individual pixels with a value of 0) at the intersection of 2 polygons. It looks like the
>>intersections pass through the exact center of these pixels. These pixels are not set to missing(-1). Depending on the output resolution, different pixels get set to a value of 0.
>>
>>Has anyone ran into this problem? ?Any idea how to fix this? ?
>>Those interested will find 2 small shapefiles here:?http://db.tt/3X4hI45andhttp://db.tt/phqnGci
>>
>>
>>I tried using gdal_grid, but it doesn't seem to support a shapefile with POLYGONs.
>>
>>many thanks!
>>Etienne
>>
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev@lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>-- 
>Best regards,
>Chaitanya kumar CH.
>
>+91-9494447584
>17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

From etiennesky at yahoo.com  Fri Aug  5 18:42:44 2011
From: etiennesky at yahoo.com (Etienne)
Date: Sat Aug  6 12:06:57 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <4E3B9DC6.9070107@sarvision.nl>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
	<4E3B9DC6.9070107@sarvision.nl>
Message-ID: <1312584164.2887.YahooMailNeo@web36906.mail.mud.yahoo.com>

That's an interesting idea, thanks!

I looked around the code and found that the overviews are created in the?GDALRegenerateOverviews() function in file?gcore/overview.cpp . ?It reads:

[...]?it?can also be used to generate downsampled images in one file from another?outside the overview architecture. [...]

I get the feeling that I can use that function directly with a properly initiated raster band. ?Am I wrong? I was wondering if anyone has code that can do this or can point me to an example?

regards, Etienne


----- Original Message -----
From: Vincent Schut <schut@sarvision.nl>
To: gdal-dev@lists.osgeo.org
Cc: 
Sent: Friday, August 5, 2011 4:37:42 AM
Subject: Re: [gdal-dev] help resampling raster to coarser scale

On 08/05/2011 03:57 AM, Etienne wrote:
> Hi all,
> 
> 
> I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution.? 
> I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map.? It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).
> 
> I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).
> 
> Any idea on how to accomplish what I want using gdal?? I am not familiar with GRASS, and would prefer to stick with GDAL if I can.? However, I am open to any suggestions.

Etienne,

there is a workaround for this: gdaladdo, the tool to add overviews ('pyramids') to a file, does support the mode operator. So what you could do is add overviews to your file such that the overviews cover the output resolution you want, and then you can resample with gdal_translate (when no projection change is necessary, just give it your desired output resolution, see the gdal_translate docs), or with gdalwarp (and use nearest). They should use the overview level that is closest to your output resolution for resampling.

Best,
Vincent.
> 
> Many Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etiennesky at yahoo.com  Fri Aug  5 19:45:31 2011
From: etiennesky at yahoo.com (Etienne)
Date: Sat Aug  6 13:12:09 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <4E3B8D5D.6010400@nersc.no>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
	<4E3B8D5D.6010400@nersc.no>
Message-ID: <1312587931.60139.YahooMailNeo@web36908.mail.mud.yahoo.com>

Thanks Anton

This might seem obvious to many of you, but how could I go about applying a filter using the gdal utilities/functions/python code?

Etienne


----- Original Message -----
From: Anton Korosov <anton.korosov@nersc.no>
To: gdal-dev@lists.osgeo.org
Cc: 
Sent: Friday, August 5, 2011 3:27:41 AM
Subject: Re: [gdal-dev] help resampling raster to coarser scale

Hi Etienne!

What if you first process the original fine resolution image with a 
filter (low-pass, median, or manually created pixel function). Then the 
result, which is a fine resolution image but smoothed, could be 
resampled with the nearest neighbor.

Anton

On 08/05/2011 03:57 AM, Etienne wrote:
> Hi all,
>
>
> I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution.
>
> I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map.
> It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).
>
> I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).
>
> Any idea on how to accomplish what I want using gdal?? I am not familiar with GRASS, and would prefer to stick with GDAL if I can.? However, I am open to any suggestions.
>
> Many Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Fri Aug  5 23:06:26 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug  6 16:42:31 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <1312587931.60139.YahooMailNeo@web36908.mail.mud.yahoo.com>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
	<4E3B8D5D.6010400@nersc.no>
	<1312587931.60139.YahooMailNeo@web36908.mail.mud.yahoo.com>
Message-ID: <CAMKgpOaKErao6TLp3UxrhPgqMV-d+MZ6gy5yTiMByB4LgTK4Ag@mail.gmail.com>

Etienne,

You can find a lot of sample code in the gdal test scripts[1]. There is a
test script for regenerating overviews in gcore/tiff_ovr.py [2].

You can apply a filter using a VRT file[3]. It supports filters of various
sizes.

[1]: http://trac.osgeo.org/gdal/browser/trunk/autotest/
[2]:
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_ovr.py#L1046
[3]: http://www.gdal.org/gdal_vrttut.html

On Sat, Aug 6, 2011 at 5:15 AM, Etienne <etiennesky@yahoo.com> wrote:

> Thanks Anton
>
> This might seem obvious to many of you, but how could I go about applying a
> filter using the gdal utilities/functions/python code?
>
> Etienne
>
>
> ----- Original Message -----
> From: Anton Korosov <anton.korosov@nersc.no>
> To: gdal-dev@lists.osgeo.org
> Cc:
> Sent: Friday, August 5, 2011 3:27:41 AM
> Subject: Re: [gdal-dev] help resampling raster to coarser scale
>
> Hi Etienne!
>
> What if you first process the original fine resolution image with a
> filter (low-pass, median, or manually created pixel function). Then the
> result, which is a fine resolution image but smoothed, could be
> resampled with the nearest neighbor.
>
> Anton
>
> On 08/05/2011 03:57 AM, Etienne wrote:
> > Hi all,
> >
> >
> > I am trying to resample a raster with categorical data (land surface
> vegetation/cover) from a high resolution (500m) to a coarser resolution.
> >
> > I would like to do something similar to what the GRASS operator
> r.resamp.stats does, using the modal category present in the higher
> resolution dataset to pick the value in the lower-resolution map.
> > It seems that my only option using gdal_warp is nearest neighbor, which
> will pick the value nearest to the coarser pixel center (regardless of the
> most present category within the region).
> >
> > I would also like have a low-resolution map with the proportions of all
> land types (from the high resolution map).
> >
> > Any idea on how to accomplish what I want using gdal?  I am not familiar
> with GRASS, and would prefer to stick with GDAL if I can.  However, I am
> open to any suggestions.
> >
> > Many Thanks
> > Etienne
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110806/cf57bd04/attachment.html
From vinod.bholla at gmail.com  Sat Aug  6 04:33:16 2011
From: vinod.bholla at gmail.com (Vinod Bholla)
Date: Sat Aug  6 22:28:40 2011
Subject: [gdal-dev] Invitation to connect on LinkedIn
Message-ID: <1355499090.459724.1312619596761.JavaMail.app@ela4-app0135.prod>

LinkedIn
------------



   
I'd like to add you to my professional network on LinkedIn.

- Vinod

Vinod Bholla
senior software engineer at Samsung India Software Operations 
Bengaluru Area, India

Confirm that you know Vinod Bholla
https://www.linkedin.com/e/-irq4iu-gr0btexj-3i/isd/3775521794/F0ozfCH6/


 
-- 
(c) 2011, LinkedIn Corporation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110806/c3c68873/attachment.html
From vadp.devl at gmail.com  Mon Aug  8 05:36:16 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Tue Aug  9 02:10:37 2011
Subject: [gdal-dev] gdalwarp under python
In-Reply-To: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
Message-ID: <CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>

Hi Balazs,

On Thu, Aug 4, 2011 at 3:56 PM, Balazs Szab? <szabobaa@gmail.com> wrote:
> Dear list!
>
> How can I use this two bash command with gdal-python bindings?
>
> gdal_translate -of GTiff? -a_srs EPSG:xxxx -gcp 775 560 20.58329 48.12650
> -gcp 9518 539 20.8329 48.12650? -gcp 9525 7136 20.83329 48.00150? -gcp 758
> 7134 20.58329 48.00150? o.tif s.tif

for  gdal_translate you could do something like this:

            out_format='VRT'
            ext='.'+out_format.lower()
            dst_file= os.path.basename(base+ext).encode('utf-8') # output file
            img_path=os.path.relpath(self.img_file,dst_dir).encode('utf-8')

            src_ds = gdal.Open(img_path,GA_ReadOnly)
            dst_drv = gdal.GetDriverByName(out_format)
            dst_ds = dst_drv.CreateCopy(dst_file,src_ds,0)
            dst_ds.SetProjection(self.srs)

            #double x = 0.0, double y = 0.0, double z = 0.0, double
pixel = 0.0,
            #double line = 0.0, char info = "", char id = ""
            gcps=[gdal.GCP(c[0],c[1],0,p[0],p[1],'',i) for i,p,c in self.refs]
            dst_ds.SetGCPs(gcps,self.refs.srs())
            dst_geotr=gdal.GCPsToGeoTransform(gcps)
            dst_ds.SetGeoTransform(dst_geotr)

            del dst_ds # close dataset

> gdalwarp -tps s.tif t.tif

For this I was just using a few templates to assemble VRT description
"manually" then feed it into drv.CreateCopy().

Perhaps this is not the most elegant solution, but if you need a
sample you may have a look at my gdal_tiler.py script (function
make_base_raster). You can find it here:
http://tilers-tools.googlecode.com/files/tilers_tools-2.2.tar.gz. Just
to note: for SRSes the script internally uses proj4 notation, but this
wouldn't obligatory in your case.

Ironically this was also evolved from some bash script some time ago.

Hope this helps.
VS
From szabobaa at gmail.com  Mon Aug  8 10:42:46 2011
From: szabobaa at gmail.com (=?ISO-8859-1?Q?Balazs_Szab=F3?=)
Date: Tue Aug  9 07:33:44 2011
Subject: [gdal-dev] gdalwarp under python
In-Reply-To: <CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
	<CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>
Message-ID: <CAOfwSLctVbyFXWiB1++-i-G5viJYb4MQY-kYEjmDUF7gsq9SrA@mail.gmail.com>

Thank you Vadim!

I tried the .GCPsToGeoTransform() method, and it is ok, but in the
geotransform tuple (geotransform[0],geotransform[3] ) gave me fake starting
point.

Anyway, your python programs are very useful! ( I am a self made programmer,
so those py files are very helpful for me!).

Best regards,
Balazs



011/8/8 Vadim Shlyakhov <vadp.devl@gmail.com>

> Hi Balazs,
>
> On Thu, Aug 4, 2011 at 3:56 PM, Balazs Szab? <szabobaa@gmail.com> wrote:
> > Dear list!
> >
> > How can I use this two bash command with gdal-python bindings?
> >
> > gdal_translate -of GTiff  -a_srs EPSG:xxxx -gcp 775 560 20.58329 48.12650
> > -gcp 9518 539 20.8329 48.12650  -gcp 9525 7136 20.83329 48.00150  -gcp
> 758
> > 7134 20.58329 48.00150  o.tif s.tif
>
> for  gdal_translate you could do something like this:
>
>            out_format='VRT'
>            ext='.'+out_format.lower()
>            dst_file= os.path.basename(base+ext).encode('utf-8') # output
> file
>            img_path=os.path.relpath(self.img_file,dst_dir).encode('utf-8')
>
>            src_ds = gdal.Open(img_path,GA_ReadOnly)
>            dst_drv = gdal.GetDriverByName(out_format)
>            dst_ds = dst_drv.CreateCopy(dst_file,src_ds,0)
>            dst_ds.SetProjection(self.srs)
>
>            #double x = 0.0, double y = 0.0, double z = 0.0, double
> pixel = 0.0,
>            #double line = 0.0, char info = "", char id = ""
>            gcps=[gdal.GCP(c[0],c[1],0,p[0],p[1],'',i) for i,p,c in
> self.refs]
>            dst_ds.SetGCPs(gcps,self.refs.srs())
>            dst_geotr=gdal.GCPsToGeoTransform(gcps)
>            dst_ds.SetGeoTransform(dst_geotr)
>
>            del dst_ds # close dataset
>
> > gdalwarp -tps s.tif t.tif
>
> For this I was just using a few templates to assemble VRT description
> "manually" then feed it into drv.CreateCopy().
>
> Perhaps this is not the most elegant solution, but if you need a
> sample you may have a look at my gdal_tiler.py script (function
> make_base_raster). You can find it here:
> http://tilers-tools.googlecode.com/files/tilers_tools-2.2.tar.gz. Just
> to note: for SRSes the script internally uses proj4 notation, but this
> wouldn't obligatory in your case.
>
> Ironically this was also evolved from some bash script some time ago.
>
> Hope this helps.
> VS
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110808/670a123f/attachment.html
From etiennesky at yahoo.com  Mon Aug  8 17:40:13 2011
From: etiennesky at yahoo.com (Etienne)
Date: Tue Aug  9 14:54:12 2011
Subject: [gdal-dev] help resampling raster to coarser scale
In-Reply-To: <4E3B9DC6.9070107@sarvision.nl>
References: <1312509438.79315.YahooMailNeo@web36906.mail.mud.yahoo.com>
	<4E3B9DC6.9070107@sarvision.nl>
Message-ID: <1312839613.80390.YahooMailNeo@web36901.mail.mud.yahoo.com>

Vincent, I have tried your workaround, and it works with gdal_translate, with the following restriction:

1)?
with gdal_translate -outsize option, the dimensions of the input raster MUST be a multiple of the desired resolution (or modified with srcwin), ?or else the output resolution will be ?modified

for example:
input clip2.tif :Size is 125, 144,?Pixel Size = (30.000000000000000,-30.000000000000000)

> gdal_translate -outsize 50% 50% clip2.tif clip2-tr-50-mode.tif

output??clip2-tr-50-mode.tif :??Size is 62, 72,?Pixel Size = (60.483870967741936,-60.000000000000000)

Could I use gdal_translate without having to calculate dimensions which are a multiple of desired resolution?

2)
one could use gdalwarp -tr 60 60 (as per your suggestion), except that it doesn't use the overlays, as per bug 2076:
?http://trac.osgeo.org/gdal/ticket/2076


many thanks,
Etienne

----- Original Message -----
From: Vincent Schut <schut@sarvision.nl>
To: gdal-dev@lists.osgeo.org
Cc: 
Sent: Friday, August 5, 2011 4:37:42 AM
Subject: Re: [gdal-dev] help resampling raster to coarser scale

On 08/05/2011 03:57 AM, Etienne wrote:
> Hi all,
> 
> 
> I am trying to resample a raster with categorical data (land surface vegetation/cover) from a high resolution (500m) to a coarser resolution.? 
> I would like to do something similar to what the GRASS operator r.resamp.stats does, using the modal category present in the higher resolution dataset to pick the value in the lower-resolution map.? It seems that my only option using gdal_warp is nearest neighbor, which will pick the value nearest to the coarser pixel center (regardless of the most present category within the region).
> 
> I would also like have a low-resolution map with the proportions of all land types (from the high resolution map).
> 
> Any idea on how to accomplish what I want using gdal?? I am not familiar with GRASS, and would prefer to stick with GDAL if I can.? However, I am open to any suggestions.

Etienne,

there is a workaround for this: gdaladdo, the tool to add overviews ('pyramids') to a file, does support the mode operator. So what you could do is add overviews to your file such that the overviews cover the output resolution you want, and then you can resample with gdal_translate (when no projection change is necessary, just give it your desired output resolution, see the gdal_translate docs), or with gdalwarp (and use nearest). They should use the overview level that is closest to your output resolution for resampling.

Best,
Vincent.
> 
> Many Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jf at geonef.fr  Mon Aug  8 18:32:33 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Tue Aug  9 15:49:42 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
Message-ID: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>

Hi,

I am writing a PHP 5 module providing bindings for GDAL and OGR.

It is GPL3-licensed and available here:
http://projects.geonef.fr/projects/php5-gdal/wiki

It is far from complete, bindings are available for about a third of
the C++ interfaces.
I have been working on/with it for 8 months yet, and recently using it
on a production website as well.
I actually wrote the bindings I needed so far, the rest will follow
little by little, and any contribution is welcome.

php5-gdal provides PHP classes for the equivalent C++ class, same for
the methods. The C macro constants of GDAL/OGR are brought to PHP as
global constants.


I decided to write this library when I got limited at using OGR/PHP
(segfault crash) and noticed the latter has not been maintained for
years.
After trying to compile the SWIG bindings with no success, I thought a
good robust C++ code would be the best deal for providing OOP
interfaces to PHP.

As the GPL summary says, I hope that this library will be useful!
There is a dedicated ML, info on
http://ml.geonef.fr/mailman/listinfo/php5-gdal-dev

Best regards,

Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/
From david.m.baker at chk.com  Mon Aug  8 19:44:28 2011
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Tue Aug  9 17:05:17 2011
Subject: [gdal-dev] C# OGR Modify Shapefile
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AFD05A57F@OKCEXHPRD007.chkenergy.net>

All,

Using the C# dll's that come in Frank's FWTools, is it possible to add, delete and modify records in a Shapefile, or do I need to create a new Shapefile with the changes?

Thanks,
David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com<mailto:david.m.baker@chk.com>


________________________________
This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110808/6c0e0acf/attachment.html
From warmerdam at pobox.com  Mon Aug  8 20:07:21 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug  9 17:29:17 2011
Subject: [gdal-dev] C# OGR Modify Shapefile
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AFD05A57F@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AFD05A57F@OKCEXHPRD007.chkenergy.net>
Message-ID: <CA+YzLBfFXVaGxQgdbYhgTitX6PcUu7xOjU2pYswYe-k_O-t2dA@mail.gmail.com>

David,

With the latest GDAL/OGR you can add fields to an
existing shapefile, add records and delete records.  I'm
not certain if all those capabilities were available in the
last FWTools build or not.

I will note that deleted shapes aren't completely deleted
until you repack the file.  There should be some details
on repacking on the driver page.

Best regards,


On Mon, Aug 8, 2011 at 4:44 PM, David Baker (Geoscience)
<david.m.baker@chk.com> wrote:
> All,
>
>
>
> Using the C# dll?s that come in Frank?s FWTools, is it possible to add,
> delete and modify records in a Shapefile, or do I need to create a new
> Shapefile with the changes?
>
>
>
> Thanks,
>
> David
>
>
>
> David M. Baker
>
> Senior Geologist - Chief Technology Advisor
>
> Chesapeake Energy Corporation
>
> 405-935-3715 office
>
> 405-496-5373 cell
>
> david.m.baker@chk.com
>
>
>
> ________________________________
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is privileged, confidential and exempt from disclosure under applicable
> law. If the reader of this email is not the intended recipient, or the
> employee or agent responsible for delivering this message to the intended
> recipient, you are hereby notified that any dissemination, distribution or
> copying of this communication is strictly prohibited. If you have received
> this communication in error, please notify the sender immediately by return
> email and destroy all copies of the email (and attachments if any).
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From nhatzop at gmail.com  Mon Aug  8 20:09:55 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Aug  9 17:32:01 2011
Subject: [gdal-dev] GML elevation
Message-ID: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>

Hi Community,

we have this gml data:
http://nvclwebservices.vm.csiro.au/geoserverBH/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=1.1.0&maxFeatures=1&typeName=gsml:Borehole

System.out.println("Layer Count: "+poDS.GetLayerCount());
System.out.println("Layer Name: "+poDS.GetLayerByIndex(0).GetName());
System.out.println("Feature Count:
"+poDS.GetLayerByIndex(0).GetFeatureCount());
System.out.println("1st Feature X:
"+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetX()));
System.out.println("1st Feature Y:
"+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetY()));


Output:

Layer Count: 1
Layer Name: Borehole
Feature Count: 1
1st Feature X: -28.4139
1st Feature Y: 121.142


who I can read the gsml:elevation field?

the gdal version I am using is 1.7.2

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110808/370265a3/attachment.html
From warmerdam at pobox.com  Mon Aug  8 21:18:29 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug  9 18:44:24 2011
Subject: [gdal-dev] GML elevation
In-Reply-To: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
References: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
Message-ID: <CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>

On Mon, Aug 8, 2011 at 5:09 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com> wrote:
> Hi Community,
>
> we have this gml data:
> http://nvclwebservices.vm.csiro.au/geoserverBH/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=1.1.0&maxFeatures=1&typeName=gsml:Borehole
>
> System.out.println("Layer Count: "+poDS.GetLayerCount());
> System.out.println("Layer Name: "+poDS.GetLayerByIndex(0).GetName());
> System.out.println("Feature Count:
> "+poDS.GetLayerByIndex(0).GetFeatureCount());
> System.out.println("1st Feature X:
> "+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetX()));
> System.out.println("1st Feature Y:
> "+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetY()));
>

I imagine something like:

System.out.println(poDS.GetLayerByIndex(0).GetFeature(0).GetFieldAsString("elevation"));

BTW, refetching the feature each time may be quite expensive!

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From nhatzop at gmail.com  Mon Aug  8 21:39:50 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Aug  9 19:07:00 2011
Subject: [gdal-dev] GML elevation
In-Reply-To: <CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>
References: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
	<CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>
Message-ID: <CALDJGKCxb041ZBdaRVhjPeWPWJYGtOtqbGA14bo=e4oYv8BYUA@mail.gmail.com>

System.out.println("Elevation"+poDS.GetLayerByIndex(0).GetFeature(0).GetFieldAsString("elevation"));

ERROR 1: No such a field 'elevation'

I am refetching to find where in the tree is the elevation :) yes I know is
expensive

does it has to do with the version I am using? I am using 1.7.2

--Nikos

On Mon, Aug 8, 2011 at 6:18 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On Mon, Aug 8, 2011 at 5:09 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>
> wrote:
> > Hi Community,
> >
> > we have this gml data:
> >
> http://nvclwebservices.vm.csiro.au/geoserverBH/wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=1.1.0&maxFeatures=1&typeName=gsml:Borehole
> >
> > System.out.println("Layer Count: "+poDS.GetLayerCount());
> > System.out.println("Layer Name: "+poDS.GetLayerByIndex(0).GetName());
> > System.out.println("Feature Count:
> > "+poDS.GetLayerByIndex(0).GetFeatureCount());
> > System.out.println("1st Feature X:
> >
> "+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetX()));
> > System.out.println("1st Feature Y:
> >
> "+Double.toString(poDS.GetLayerByIndex(0).GetFeature(0).GetGeometryRef().GetY()));
> >
>
> I imagine something like:
>
>
> System.out.println(poDS.GetLayerByIndex(0).GetFeature(0).GetFieldAsString("elevation"));
>
> BTW, refetching the feature each time may be quite expensive!
>
> Best regards,
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110808/0396e193/attachment-0001.html
From warmerdam at pobox.com  Mon Aug  8 21:45:29 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug  9 19:12:55 2011
Subject: [gdal-dev] GML elevation
In-Reply-To: <CALDJGKCxb041ZBdaRVhjPeWPWJYGtOtqbGA14bo=e4oYv8BYUA@mail.gmail.com>
References: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
	<CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>
	<CALDJGKCxb041ZBdaRVhjPeWPWJYGtOtqbGA14bo=e4oYv8BYUA@mail.gmail.com>
Message-ID: <CA+YzLBf-TQ3e48+V2-tSJ3bzqAFSxfY4rda7D0Aytb+WxgROnQ@mail.gmail.com>

On Mon, Aug 8, 2011 at 6:39 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com> wrote:
> System.out.println("Elevation"+poDS.GetLayerByIndex(0).GetFeature(0).GetFieldAsString("elevation"));
>
> ERROR 1: No such a field 'elevation'


Niko,

Odd, for me ogrinfo reports:

...
gml_id: String (0.0)
name: StringList (0.0)
sampledFeature: String (0.0)
elevation: Real (0.0)
driller: String (0.0)
dateOfDrilling: String (10.0)
drillingMethod: String (12.0)
startPoint: String (22.0)
inclinationType: String (8.0)
lowerCorner: Real (0.0)
upperCorner: Real (0.0)
coreCustodian: String (0.0)
OGRFeature(Borehole):5
  gml_id (String) = gsml.borehole.WTB5
  name (StringList) = (2:,...)
  sampledFeature (String) =
  elevation (Real) = 45
  driller (String) =
...

Fetching with a field name of "elevation" should have worked.
Check your ogrinfo report on the file and see if you see something
different.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From nhatzop at gmail.com  Mon Aug  8 23:14:25 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Aug  9 20:46:37 2011
Subject: [gdal-dev] GML elevation
In-Reply-To: <CA+YzLBf-TQ3e48+V2-tSJ3bzqAFSxfY4rda7D0Aytb+WxgROnQ@mail.gmail.com>
References: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
	<CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>
	<CALDJGKCxb041ZBdaRVhjPeWPWJYGtOtqbGA14bo=e4oYv8BYUA@mail.gmail.com>
	<CA+YzLBf-TQ3e48+V2-tSJ3bzqAFSxfY4rda7D0Aytb+WxgROnQ@mail.gmail.com>
Message-ID: <CALDJGKBtVqCmaBc5RdbQycCvP-wp2tcyzRbmBkCoTHX=0zUjwg@mail.gmail.com>

GDAL 1.7.2

ogrinfo my.gml Borehole
Had to open data source read-only.
INFO: Open of `my.gml'
      using driver `GML' successful.

Layer name: Borehole
Geometry: Unknown (any)
Feature Count: 1
Extent: (-28.413900, 121.142000) - (-28.413900, 121.142000)
Layer SRS WKT:
(unknown)
name: String (71.0)
sampledFeature: String (0.0)
OGRFeature(Borehole):0
  name (String) = WTB5
  sampledFeature (String) =
  POINT (-28.413900000000002 121.141999999999996)


GDAL 1.8.1
java -Djava.library.path=. -cp gdal.jar:build/apps ogrinfo
/home/nickhatz/my.gml  Borehole

INFO: Open of `/home/nickhatz/my.gml'
      using driver `GML' successful.

Layer name: Borehole
Geometry: Point
Feature Count: 1
Extent: (121.142, -28.4139) - (121.142, -28.4139)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"],
    AXIS["Latitude",NORTH],
    AXIS["Longitude",EAST]]
gml_id: String (0.0)
name: StringList (0.0)
sampledFeature: String (0.0)
elevation: Real (0.0)
driller: String (0.0)
dateOfDrilling: String (10.0)
drillingMethod: String (12.0)
startPoint: String (22.0)
inclinationType: String (8.0)
lowerCorner: Real (0.0)
upperCorner: Real (0.0)
coreCustodian: String (0.0)
OGRFeature(Borehole):5
  gml_id (String) = gsml.borehole.WTB5
  name (StringList) = (2:,...)
  sampledFeature (String) =
  elevation (Real) = 45
  driller (String) =
  dateOfDrilling (String) = 2004-09-17
  drillingMethod (String) = diamond core
  startPoint (String) = natural ground surface
  inclinationType (String) = vertical
  lowerCorner (Real) = 106
  upperCorner (Real) = 249
  coreCustodian (String) =
  POINT (121.142 -28.4139)


What version are you running?

--Nikos



On Mon, Aug 8, 2011 at 6:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On Mon, Aug 8, 2011 at 6:39 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>
> wrote:
> >
> System.out.println("Elevation"+poDS.GetLayerByIndex(0).GetFeature(0).GetFieldAsString("elevation"));
> >
> > ERROR 1: No such a field 'elevation'
>
>
> Niko,
>
> Odd, for me ogrinfo reports:
>
> ...
> gml_id: String (0.0)
> name: StringList (0.0)
> sampledFeature: String (0.0)
> elevation: Real (0.0)
> driller: String (0.0)
> dateOfDrilling: String (10.0)
> drillingMethod: String (12.0)
> startPoint: String (22.0)
> inclinationType: String (8.0)
> lowerCorner: Real (0.0)
> upperCorner: Real (0.0)
> coreCustodian: String (0.0)
> OGRFeature(Borehole):5
>  gml_id (String) = gsml.borehole.WTB5
>  name (StringList) = (2:,...)
>  sampledFeature (String) =
>  elevation (Real) = 45
>  driller (String) =
> ...
>
> Fetching with a field name of "elevation" should have worked.
> Check your ogrinfo report on the file and see if you see something
> different.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110808/fff6b93d/attachment.html
From warmerdam at pobox.com  Mon Aug  8 23:20:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug  9 20:53:09 2011
Subject: [gdal-dev] GML elevation
In-Reply-To: <CALDJGKBtVqCmaBc5RdbQycCvP-wp2tcyzRbmBkCoTHX=0zUjwg@mail.gmail.com>
References: <CALDJGKAvt9MTAc8CoKED+pab2k8qvNqPQUNjx4suiVGSKuGfbg@mail.gmail.com>
	<CA+YzLBd80SVX+8zch2VT0zPTbD+BbxYG7aqKZ3iMa9meX1BBnA@mail.gmail.com>
	<CALDJGKCxb041ZBdaRVhjPeWPWJYGtOtqbGA14bo=e4oYv8BYUA@mail.gmail.com>
	<CA+YzLBf-TQ3e48+V2-tSJ3bzqAFSxfY4rda7D0Aytb+WxgROnQ@mail.gmail.com>
	<CALDJGKBtVqCmaBc5RdbQycCvP-wp2tcyzRbmBkCoTHX=0zUjwg@mail.gmail.com>
Message-ID: <CA+YzLBdeeSOUfTkG2E1TrvEj6+WPgtJNz=-==AkZOcRMWFkyVA@mail.gmail.com>

On Mon, Aug 8, 2011 at 8:14 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com> wrote:
> GDAL 1.8.1
> java -Djava.library.path=. -cp gdal.jar:build/apps ogrinfo
> /home/nickhatz/my.gml? Borehole
>
> INFO: Open of `/home/nickhatz/my.gml'
> ????? using driver `GML' successful.
>...
> elevation: Real (0.0)
> driller: String (0.0)
> dateOfDrilling: String (10.0)
> drillingMethod: String (12.0)
> startPoint: String (22.0)
> inclinationType: String (8.0)
> lowerCorner: Real (0.0)
> upperCorner: Real (0.0)
> coreCustodian: String (0.0)
> OGRFeature(Borehole):5
> ? gml_id (String) = gsml.borehole.WTB5
> ? name (StringList) = (2:,...)
> ? sampledFeature (String) =
>
...
>   elevation (Real) = 45
> ? driller (String) =
...
>
> What version are you running?


Nikos,

I am running trunk which is likely fairly similar to 1.8.1.
So clearly you need a newish version to properly support
this GML variant.  There has certainly been a lot of work
on the GML driver since 1.7.x.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From peter.hopfgartner at r3-gis.com  Tue Aug  9 04:04:51 2011
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Aug 10 02:02:41 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
Message-ID: <4E40EA23.2060609@r3-gis.com>

On 08/09/2011 12:32 AM, Jean-Fran?ois Gigand wrote:
> Hi,
>
> I am writing a PHP 5 module providing bindings for GDAL and OGR.
>
This would be a very usefull addition to GDAL.
> It is GPL3-licensed and available here:
> http://projects.geonef.fr/projects/php5-gdal/wiki
>
I'm wondering if it would'nt be more apprioprato to  use the same 
license as GDAL itself, see http://www.gdal.org.

BTW: I'm not able to access to the above mentioned address.
> It is far from complete, bindings are available for about a third of
> the C++ interfaces.
> I have been working on/with it for 8 months yet, and recently using it
> on a production website as well.
> I actually wrote the bindings I needed so far, the rest will follow
> little by little, and any contribution is welcome.
>
> php5-gdal provides PHP classes for the equivalent C++ class, same for
> the methods. The C macro constants of GDAL/OGR are brought to PHP as
> global constants.
>
>
> I decided to write this library when I got limited at using OGR/PHP
> (segfault crash) and noticed the latter has not been maintained for
> years.
> After trying to compile the SWIG bindings with no success, I thought a
> good robust C++ code would be the best deal for providing OOP
> interfaces to PHP.
>
> As the GPL summary says, I hope that this library will be useful!
> There is a dedicated ML, info on
> http://ml.geonef.fr/mailman/listinfo/php5-gdal-dev
>
> Best regards,
>
> Jean-Fran?ois Gigand - Geonef
> Paris, France - http://geonef.fr/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Peter
From matandked at gmail.com  Tue Aug  9 06:25:49 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Wed Aug 10 04:22:05 2011
Subject: [gdal-dev] save raster as point-vector file
Message-ID: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>

Hello,

I would like to show value of each raster cell as label. My idea (I don't
know any plugin or any functionality in GDAL/OGR which allow to do it
easier) is to export raster using gdal2xyz.py into coordinates-value format
and then save it as vector (GML or shapefile). For this second task, I try
to use
=================================================================================================================================================
gdal_polygonize.py:
gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
=================================================================================================================================================
unfortunately I am unable to load created file (even if I change the
extension to .gml)
ogr2ogr tool don't even recognize this format.

=========================
Thank You in advance,
Mateusz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/9dead6f3/attachment.html
From chaitanya.ch at gmail.com  Tue Aug  9 07:38:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 10 05:38:53 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
Message-ID: <CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>

Mateusz,

gdal2xyz.py creates space delimited fields. Consider running it with the
-csv option to delimit it with comma.
Now you can almost use it as a csv format vector file. You just need to add
a header row and define a small VRT file as described in OGR's CSV driver
page[1].
Run ogrinfo and ogr2ogr on the .vrt file to check the file.

[1]: http://www.gdal.org/ogr/drv_csv.html

2011/8/9 Mateusz K?dzior <matandked@gmail.com>

> Hello,
>
> I would like to show value of each raster cell as label. My idea (I don't
> know any plugin or any functionality in GDAL/OGR which allow to do it
> easier) is to export raster using gdal2xyz.py into coordinates-value format
> and then save it as vector (GML or shapefile). For this second task, I try
> to use
>
> =================================================================================================================================================
> gdal_polygonize.py:
> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> =================================================================================================================================================
> unfortunately I am unable to load created file (even if I change the
> extension to .gml)
> ogr2ogr tool don't even recognize this format.
>
> =========================
> Thank You in advance,
> Mateusz
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/1af5303a/attachment-0001.html
From szabobaa at gmail.com  Tue Aug  9 08:19:54 2011
From: szabobaa at gmail.com (=?ISO-8859-1?Q?Balazs_Szab=F3?=)
Date: Wed Aug 10 06:22:25 2011
Subject: Fwd: [gdal-dev] gdalwarp under python
In-Reply-To: <CAOfwSLeSUvpbVLXDxiXoTdTx=7C4BJptDtdZYo489BwPph1gQQ@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
	<CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>
	<CAOfwSLctVbyFXWiB1++-i-G5viJYb4MQY-kYEjmDUF7gsq9SrA@mail.gmail.com>
	<CABJAaDcF92WVy3vcxVUAN1Ftx0QZSO4u2HwjS_J6Tyb7z64tPQ@mail.gmail.com>
	<CAOfwSLeSUvpbVLXDxiXoTdTx=7C4BJptDtdZYo489BwPph1gQQ@mail.gmail.com>
Message-ID: <CAOfwSLdox8vDFei_XnQGjKA2cS24RW+pyayjgdHM-kQ5tEe-Pg@mail.gmail.com>

Probably my SRS was wrong, my historical maps are in EPSG:3819, but I needed
to convert this coordinates to EPSG:23700, wich has wrong parameters in open
source softwares (I have to add to the proj.4 format of EPSG:23700 the
following towgs parameter:
'+towgs84=52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191')
and my maps longitude counts from El-Hierro (not from Greenwich).

After the transforming process, I had to cut off the frame of the maps. When
I tried to figure out how to do this, I released the geotransform starting
point is far away from the real starting point (in qgis).

Now I am on holyday, but the next week I think, I can reproduce this error.

Best regards,
Balazs


2011/8/9 Vadim Shlyakhov <vadp.devl@gmail.com>

> On Mon, Aug 8, 2011 at 6:42 PM, Balazs Szab? <szabobaa@gmail.com> wrote:
>
> > I tried the .GCPsToGeoTransform() method, and it is ok, but in the
> > geotransform tuple (geotransform[0],geotransform[3] ) gave me fake
> starting
> > point.
>
> Frankly speaking, this is a bit strange if your raster is linear and
> you have a proper set of GCPs and SRS. But it shouldn't matter if you
> are going to use GCP-based warp, so you could drop
> .GCPsToGeoTransform() altogether.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/37946dba/attachment.html
From luisapena1979 at gmail.com  Tue Aug  9 10:24:34 2011
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Wed Aug 10 08:34:24 2011
Subject: [gdal-dev] Re: How to use gdalinfo for HDF- Windows
Message-ID: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>

Greetings

This seems odd but it does not work with
HDF4_EOS:EOS_GRID:C:/filepath
only
HDF4_EOS:EOS_GRID:filepath

And if my MERIS data is not placed in my main hard disk (C:) it does not
work.
Anyone with some experience on this in WINDOWS?

Thanks
Luisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/d21e9f04/attachment.html
From bfraser at geoanalytic.com  Tue Aug  9 10:49:03 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Aug 10 09:05:48 2011
Subject: [gdal-dev] Re: How to use gdalinfo for HDF- Windows
In-Reply-To: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>
References: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>
Message-ID: <4E4148DF.1080606@geoanalytic.com>

Luisa,

   I use GDAL to access MODIS data in HDF4 on Windows like this:

gdalinfo 
HDF4_EOS:EOS_SWATH:"G:\Projects\temp\image3\MOD02HKM.A2011186.1640.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB

So I'd suggest using double quotes around your path.

Best Regards,
Brent Fraser


On 8/9/2011 8:24 AM, Luisa Pe?a wrote:
> Greetings
>
> This seems odd but it does not work with
> HDF4_EOS:EOS_GRID:C:/filepath
> only
> HDF4_EOS:EOS_GRID:filepath
>
> And if my MERIS data is not placed in my main hard disk (C:) it does 
> not work.
> Anyone with some experience on this in WINDOWS?
>
> Thanks
> Luisa
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/5b4ffa5e/attachment.html
From konglongbt at gmail.com  Tue Aug  9 11:03:03 2011
From: konglongbt at gmail.com (L.M Tan)
Date: Wed Aug 10 09:15:17 2011
Subject: [gdal-dev] How to register ArcSDE driver
Message-ID: <CAGWBVj4o80Rb1zVVXf15DcpN_LMik9OPyA9JvxSe53Mxc8qLHA@mail.gmail.com>

hi,

I am interested in using *OGR *to read data from an ArcSDE (9.2-9.3)
database. I have built ogr_SDE.dll,but i can not open the SDE database.

This is the csharp code :

            Ogr.RegisterAll();
            Driver sdedr = Ogr.GetDriverByName("SDE");       //   sdedr =
null
            /*
-------------------------------------------------------------------- */
            /*      Open data source.
        */
            /*
-------------------------------------------------------------------- */
            DataSource ds = Ogr.Open("SDE:192.168.1.123,5151,sde,sde,sde",
0);     //   ds=null

I want to know how to register ArcSDE driver.

TIA for any advice you might give and have a great day!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/25da0b6e/attachment.html
From dmorissette at mapgears.com  Tue Aug  9 11:20:48 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Aug 10 09:33:36 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <4E40EA23.2060609@r3-gis.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
	<4E40EA23.2060609@r3-gis.com>
Message-ID: <4E415050.9060406@mapgears.com>

On 11-08-09 04:04 AM, Peter Hopfgartner wrote:
> On 08/09/2011 12:32 AM, Jean-Fran?ois Gigand wrote:
>> Hi,
>>
>> I am writing a PHP 5 module providing bindings for GDAL and OGR.
>>
> This would be a very usefull addition to GDAL.

We should add a link to it from the GDAL Wiki once the php5-gdal webpage 
is publicly available:

http://trac.osgeo.org/gdal/#GDALOGRInOtherLanguages

>> It is GPL3-licensed and available here:
>> http://projects.geonef.fr/projects/php5-gdal/wiki
>>
> I'm wondering if it would'nt be more apprioprato to use the same license
> as GDAL itself, see http://www.gdal.org.
>

Ideally BSD (in my mind), or at the minimum LGPL to make it clear that 
PHP code using it will not be bound by the GPL.

(It is not clear to me whether scripting function calls to a CPL module 
makes the calling code bound to GPL as well. BSD or LGPL would avoid the 
question.)

> BTW: I'm not able to access to the above mentioned address.

There seems to be a password protection.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From david.m.baker at chk.com  Tue Aug  9 13:04:58 2011
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Wed Aug 10 11:23:45 2011
Subject: [gdal-dev] C# OGR Modify Shapefile
In-Reply-To: <CA+YzLBfFXVaGxQgdbYhgTitX6PcUu7xOjU2pYswYe-k_O-t2dA@mail.gmail.com>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AFD05A57F@OKCEXHPRD007.chkenergy.net>
	<CA+YzLBfFXVaGxQgdbYhgTitX6PcUu7xOjU2pYswYe-k_O-t2dA@mail.gmail.com>
Message-ID: <45F67FCA-E302-44C0-B10B-28657F9AF8F1@chk.com>

Frank. Thanks for the info.

David Baker
Sent from my iPhone

On Aug 8, 2011, at 7:07 PM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> David,
>
> With the latest GDAL/OGR you can add fields to an
> existing shapefile, add records and delete records.  I'm
> not certain if all those capabilities were available in the
> last FWTools build or not.
>
> I will note that deleted shapes aren't completely deleted
> until you repack the file.  There should be some details
> on repacking on the driver page.
>
> Best regards,
>
>
> On Mon, Aug 8, 2011 at 4:44 PM, David Baker (Geoscience)
> <david.m.baker@chk.com> wrote:
>> All,
>>
>>
>>
>> Using the C# dll?s that come in Frank?s FWTools, is it possible to add,
>> delete and modify records in a Shapefile, or do I need to create a new
>> Shapefile with the changes?
>>
>>
>>
>> Thanks,
>>
>> David
>>
>>
>>
>> David M. Baker
>>
>> Senior Geologist - Chief Technology Advisor
>>
>> Chesapeake Energy Corporation
>>
>> 405-935-3715 office
>>
>> 405-496-5373 cell
>>
>> david.m.baker@chk.com
>>
>>
>>
>> ________________________________
>> This email (and attachments if any) is intended only for the use of the
>> individual or entity to which it is addressed, and may contain information
>> that is privileged, confidential and exempt from disclosure under applicable
>> law. If the reader of this email is not the intended recipient, or the
>> employee or agent responsible for delivering this message to the intended
>> recipient, you are hereby notified that any dissemination, distribution or
>> copying of this communication is strictly prohibited. If you have received
>> this communication in error, please notify the sender immediately by return
>> email and destroy all copies of the email (and attachments if any).
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From matandked at gmail.com  Tue Aug  9 13:35:03 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Wed Aug 10 11:55:08 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
Message-ID: <CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>

Chaitanya,

if I understand properly, I need to add one line to each of processed files.
How I can do it quickly? Is there any option in gdal2xyz.py script?

If no - what would You recommend?
I think about sed utility, but it's general difficult in use.

When I am thinking about Python I see only one possibility - load each file
to variable and then assign to another first line plus variable and at last
- save it.

==============
Best Regards,
Mateusz

W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
chaitanya.ch@gmail.com> napisa?:

> Mateusz,
>
> gdal2xyz.py creates space delimited fields. Consider running it with the
> -csv option to delimit it with comma.
> Now you can almost use it as a csv format vector file. You just need to add
> a header row and define a small VRT file as described in OGR's CSV driver
> page[1].
> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>
> [1]: http://www.gdal.org/ogr/drv_csv.html
>
> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>
>> Hello,
>>
>> I would like to show value of each raster cell as label. My idea (I don't
>> know any plugin or any functionality in GDAL/OGR which allow to do it
>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>> and then save it as vector (GML or shapefile). For this second task, I try
>> to use
>>
>> =================================================================================================================================================
>> gdal_polygonize.py:
>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
>> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> =================================================================================================================================================
>> unfortunately I am unable to load created file (even if I change the
>> extension to .gml)
>> ogr2ogr tool don't even recognize this format.
>>
>> =========================
>> Thank You in advance,
>> Mateusz
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/c8133c98/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Aug  9 14:13:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 10 12:35:19 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
Message-ID: <CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>

Create a text file with just the header. Use the cat command to join this
file and the xyz file.
$ cat HeaderFile.csv file1.csv > file1.csv
You can repeat this on all files in a shell script.

Otherwise add the following line in the gdal2xyz.py script at line 144 [1].

dst_fh.write( 'Longitude,Latitude,Name' )

You will also have to create a separate vrt file for each csv file. The
SrcDataSource element value changes for each file.

[1]:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145

2011/8/9 Mateusz K?dzior <matandked@gmail.com>

> Chaitanya,
>
> if I understand properly, I need to add one line to each of processed
> files.
> How I can do it quickly? Is there any option in gdal2xyz.py script?
>
> If no - what would You recommend?
> I think about sed utility, but it's general difficult in use.
>
> When I am thinking about Python I see only one possibility - load each file
> to variable and then assign to another first line plus variable and at last
> - save it.
>
> ==============
> Best Regards,
> Mateusz
>
> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
> Mateusz,
>>
>> gdal2xyz.py creates space delimited fields. Consider running it with the
>> -csv option to delimit it with comma.
>> Now you can almost use it as a csv format vector file. You just need to
>> add a header row and define a small VRT file as described in OGR's CSV
>> driver page[1].
>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>
>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>
>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>
>>> Hello,
>>>
>>> I would like to show value of each raster cell as label. My idea (I don't
>>> know any plugin or any functionality in GDAL/OGR which allow to do it
>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>> and then save it as vector (GML or shapefile). For this second task, I try
>>> to use
>>>
>>> =================================================================================================================================================
>>> gdal_polygonize.py:
>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
>>> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>
>>> =================================================================================================================================================
>>> unfortunately I am unable to load created file (even if I change the
>>> extension to .gml)
>>> ogr2ogr tool don't even recognize this format.
>>>
>>> =========================
>>> Thank You in advance,
>>> Mateusz
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/9f686184/attachment.html
From szekerest at gmail.com  Tue Aug  9 15:32:31 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Aug 10 13:59:16 2011
Subject: [gdal-dev] How to register ArcSDE driver
In-Reply-To: <CAGWBVj4o80Rb1zVVXf15DcpN_LMik9OPyA9JvxSe53Mxc8qLHA@mail.gmail.com>
References: <CAGWBVj4o80Rb1zVVXf15DcpN_LMik9OPyA9JvxSe53Mxc8qLHA@mail.gmail.com>
Message-ID: <CACALY+RHFoQJpSH49LR_g=jJg1kQSz1MJaB_XKL+7-0EYx1gow@mail.gmail.com>

Hi,

Make sure to place the ogr_SDE.dll into the /gdalplugins subdirectory from
where your application is running. Alternatively you can set the
GDAL_DRIVER_PATH environment setting to point to the directory of the plugin
dll-s

Best regards,

Tamas



2011/8/9 L.M Tan <konglongbt@gmail.com>

> hi,
>
> I am interested in using *OGR *to read data from an ArcSDE (9.2-9.3)
> database. I have built ogr_SDE.dll,but i can not open the SDE database.
>
> This is the csharp code :
>
>             Ogr.RegisterAll();
>             Driver sdedr = Ogr.GetDriverByName("SDE");       //   sdedr =
> null
>             /*
> -------------------------------------------------------------------- */
>             /*      Open data source.
>         */
>             /*
> -------------------------------------------------------------------- */
>             DataSource ds = Ogr.Open("SDE:192.168.1.123,5151,sde,sde,sde",
> 0);     //   ds=null
>
> I want to know how to register ArcSDE driver.
>
> TIA for any advice you might give and have a great day!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/4380ebbb/attachment.html
From matandked at gmail.com  Tue Aug  9 16:04:42 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Wed Aug 10 14:33:02 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
Message-ID: <CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>

Hi again,

is it mandatory to create such file?
Regarding to information on GDAL/OGR page should I create simple text file
which contains only other OGRVRTLayer name property :

<OGRVRTDataSource>
    <OGRVRTLayer name="test">
        <SrcDataSource>test.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

==============
Best regards,
Mateusz

W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
chaitanya.ch@gmail.com> napisa?:

> Create a text file with just the header. Use the cat command to join this
> file and the xyz file.
> $ cat HeaderFile.csv file1.csv > file1.cHi sv
> You can repeat this on all files in a shell script.
>
> Otherwise add the following line in the gdal2xyz.py script at line 144 [1].
>
> dst_fh.write( 'Longitude,Latitude,Name' )
>
> You will also have to create a separate vrt file for each csv file. The
> SrcDataSource element value changes for each file.
>
> [1]:
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>
>
> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>
>> Chaitanya,
>>
>> if I understand properly, I need to add one line to each of processed
>> files.
>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>
>> If no - what would You recommend?
>> I think about sed utility, but it's general difficult in use.
>>
>> When I am thinking about Python I see only one possibility - load each
>> file to variable and then assign to another first line plus variable and at
>> last - save it.
>>
>> ==============
>> Best Regards,
>> Mateusz
>>
>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> napisa?:
>>
>> Mateusz,
>>>
>>> gdal2xyz.py creates space delimited fields. Consider running it with the
>>> -csv option to delimit it with comma.
>>> Now you can almost use it as a csv format vector file. You just need to
>>> add a header row and define a small VRT file as described in OGR's CSV
>>> driver page[1].
>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>
>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>
>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>
>>>> Hello,
>>>>
>>>> I would like to show value of each raster cell as label. My idea (I
>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>> to use
>>>>
>>>> =================================================================================================================================================
>>>> gdal_polygonize.py:
>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
>>>> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>
>>>> =================================================================================================================================================
>>>> unfortunately I am unable to load created file (even if I change the
>>>> extension to .gml)
>>>> ogr2ogr tool don't even recognize this format.
>>>>
>>>> =========================
>>>> Thank You in advance,
>>>> Mateusz
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/40616117/attachment-0001.html
From jf at geonef.fr  Tue Aug  9 16:20:40 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Wed Aug 10 14:50:13 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <4E415050.9060406@mapgears.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
	<4E40EA23.2060609@r3-gis.com> <4E415050.9060406@mapgears.com>
Message-ID: <CALEAJzzTZ7L4B58-og0+P6KoasKY_w25Rr52zNOOJwZycrHiXg@mail.gmail.com>

Hi,

2011/8/9 Daniel Morissette <dmorissette@mapgears.com>:
> On 11-08-09 04:04 AM, Peter Hopfgartner wrote:
>>
>> On 08/09/2011 12:32 AM, Jean-Fran?ois Gigand wrote:
>>>
>>> Hi,
>>>
>>> I am writing a PHP 5 module providing bindings for GDAL and OGR.
>>>
>> This would be a very usefull addition to GDAL.
>
> We should add a link to it from the GDAL Wiki once the php5-gdal webpage is
> publicly available:
>
> http://trac.osgeo.org/gdal/#GDALOGRInOtherLanguages

Great!
With a notice that these bindings are yet incomplete.
I will soon update the wiki to list all available classes, methods,
functions and constants.

Would be good to have an API doc in php.net-style, if that's easy to do.

I have a few questions about prototype guidelines and how the
php5-gdal API should conform to. Closer to the GDAL/OGR C++ API or
closer to PHP's best practices? For example, should the constants be
kept in the global space, or should they move to class constants?

I also have questions about error management (use exceptions?) and
whether values returned through reference args should be returned
instead (such as arrays).
So far, I have stayed as close as possible to the GDAL/OGR API.

Is there anyone experienced with this type of issues, a foot in PHP
and another in C++ or GDAL, that I could discuss with?

>
>>> It is GPL3-licensed and available here:
>>> http://projects.geonef.fr/projects/php5-gdal/wiki
>>>
>> I'm wondering if it would'nt be more apprioprato to use the same license
>> as GDAL itself, see http://www.gdal.org.
>>
>
> Ideally BSD (in my mind), or at the minimum LGPL to make it clear that PHP
> code using it will not be bound by the GPL.
>
> (It is not clear to me whether scripting function calls to a CPL module
> makes the calling code bound to GPL as well. BSD or LGPL would avoid the
> question.)

I should have asked prior advise about what license suits best.
I'm not a specialist, but I agree that GPL is too restrictive for such
a library.
Since this work is nothing compared to the (amazing) set a features
provided by GDAL, it would be coherent that it inherit from the same
license. Moreover, PHP frameworks like Zend's or Symfony have a
BSD-style license.

I checked the PECL repository and most packages appear to be released
under the PHP license (http://www.php.net/license/3_01.txt), which
seems to suits PHP itself better than third-party extension modules.

So, I'm ok with choosing X11/MIT, unless any other strong advise is expressed.

>
>> BTW: I'm not able to access to the above mentioned address.
>
> There seems to be a password protection.
>

So sorry, there were per-IP rules that mislead my verification. Fixed now.


Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/


> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From szekerest at gmail.com  Tue Aug  9 16:54:29 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Aug 10 15:25:39 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
Message-ID: <CACALY+S2UOfAy+maqE6fnQ5s=+ofHduvnKmf6vN1gPeL+wp4-g@mail.gmail.com>

2011/8/9 Jean-Fran?ois Gigand <jf@geonef.fr>

>
> I decided to write this library when I got limited at using OGR/PHP
> (segfault crash) and noticed the latter has not been maintained for
> years.
> After trying to compile the SWIG bindings with no success, I thought a
> good robust C++ code would be the best deal for providing OOP
> interfaces to PHP.
>
>

Hi Jean,

I just wanted to mention, there have been some efforts recently by Mike
Leahy to resurrect the php bindings, the corresponding ticket can be found
here:
http://trac.osgeo.org/gdal/ticket/3984

However I'm not sure about the current status of this work and how the
bindings work with the attached patches. Do you have experiences?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/3f3e643c/attachment.html
From nhatzop at gmail.com  Tue Aug  9 17:11:17 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Aug 10 15:43:20 2011
Subject: [gdal-dev] GDAL_DATA
Message-ID: <CALDJGKBSzWNMt=897w2yRon_cXmBkZjPXGB8K1JSL3Ao-SH5ig@mail.gmail.com>

Hi,

Is there any way you can define GDAL_DATA using code and not environmental
variable?

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/f8f2a9ad/attachment.html
From ksshannon at gmail.com  Tue Aug  9 17:13:40 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Aug 10 15:46:06 2011
Subject: [gdal-dev] GDAL_DATA
In-Reply-To: <CALDJGKBSzWNMt=897w2yRon_cXmBkZjPXGB8K1JSL3Ao-SH5ig@mail.gmail.com>
References: <CALDJGKBSzWNMt=897w2yRon_cXmBkZjPXGB8K1JSL3Ao-SH5ig@mail.gmail.com>
Message-ID: <CAJ0mEz1CbONfwzQ8XbFv4QBsUd9ejAm5HB-9GLWLTnrtGxMqbQ@mail.gmail.com>

I believe you can use CPLSetConfigOptions() docs are here:

http://trac.osgeo.org/gdal/wiki/ConfigOptions

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */




On Tue, Aug 9, 2011 at 15:11, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> Hi,
>
> Is there any way you can define GDAL_DATA using code and not environmental
> variable?
>
> --Nikos Hatzopoulos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/978b1a27/attachment.html
From jf at geonef.fr  Tue Aug  9 17:25:07 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Wed Aug 10 15:58:14 2011
Subject: [gdal-dev] New PHP bindings - php5-gdal
In-Reply-To: <CACALY+S2UOfAy+maqE6fnQ5s=+ofHduvnKmf6vN1gPeL+wp4-g@mail.gmail.com>
References: <CALEAJzxZoh3u=b8a92ssVzOoXECOiB44KBmdde9M-1X5dmmVgg@mail.gmail.com>
	<CACALY+S2UOfAy+maqE6fnQ5s=+ofHduvnKmf6vN1gPeL+wp4-g@mail.gmail.com>
Message-ID: <CALEAJzw1YgnCSqyBLCZ=Q5veR0YBv_+6RYR47LZa=xCi7yz0pA@mail.gmail.com>

Hi Thomas,

I actually noticed that initiative 2 days ago by searching the ML,
posts dated from around March.
If I had seen them on that time, I would have shared my code earlier.

I never used SWIG. When I wondered in last December if I should
leverage SWIG or write a C++ PHP extension, I chose the latter when I
noticed that the PHP SWIG bindings in GDAL were very old. I was also
encouraged when I noticed that for MapServer, the PHP MapScript
extension is written in core C, although they use SWIG for some other
languages like Python.

Mike Leahy, have you got anything working with the SWIG bindings?
Since you know SWIG, what do you think about this choice?


Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/



2011/8/9 Tamas Szekeres <szekerest@gmail.com>:
>
>
> 2011/8/9 Jean-Fran?ois Gigand <jf@geonef.fr>
>>
>> I decided to write this library when I got limited at using OGR/PHP
>> (segfault crash) and noticed the latter has not been maintained for
>> years.
>> After trying to compile the SWIG bindings with no success, I thought a
>> good robust C++ code would be the best deal for providing OOP
>> interfaces to PHP.
>>
>
>
> Hi Jean,
>
> I just wanted to mention, there have been some efforts recently by Mike
> Leahy to resurrect the php bindings, the corresponding ticket can be found
> here:
> http://trac.osgeo.org/gdal/ticket/3984
>
> However I'm not sure about the current status of this work and how the
> bindings work with the attached patches. Do you have experiences?
>
> Best regards,
>
> Tamas
>
>
>
From nhatzop at gmail.com  Tue Aug  9 18:08:22 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Aug 10 16:43:31 2011
Subject: [gdal-dev] GDAL_DATA
In-Reply-To: <CAJ0mEz1CbONfwzQ8XbFv4QBsUd9ejAm5HB-9GLWLTnrtGxMqbQ@mail.gmail.com>
References: <CALDJGKBSzWNMt=897w2yRon_cXmBkZjPXGB8K1JSL3Ao-SH5ig@mail.gmail.com>
	<CAJ0mEz1CbONfwzQ8XbFv4QBsUd9ejAm5HB-9GLWLTnrtGxMqbQ@mail.gmail.com>
Message-ID: <CALDJGKBcC065i4NcNcuy88yT-jM1Zeb=PQcNWw=sfj2bDAwORw@mail.gmail.com>

Because I was looking for java is this:

gdal.SetConfigOption("GDAL_DATA", "/home/nikos/mygdal/data");

and it is working :)

thanks,
--Nikos

On Tue, Aug 9, 2011 at 2:13 PM, Kyle Shannon <ksshannon@gmail.com> wrote:

> I believe you can use CPLSetConfigOptions() docs are here:
>
> http://trac.osgeo.org/gdal/wiki/ConfigOptions
>
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com
>  *
>  */
>
>
>
>
> On Tue, Aug 9, 2011 at 15:11, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:
>
>> Hi,
>>
>> Is there any way you can define GDAL_DATA using code and not environmental
>> variable?
>>
>> --Nikos Hatzopoulos
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110809/7c84eea4/attachment.html
From chaitanya.ch at gmail.com  Tue Aug  9 23:58:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 10 22:53:30 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
Message-ID: <CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>

Mateusz,

You have to change the OGRVRTLayer name property to point to the file name
without the extension.  Also change the SrcDataSource element.

FYI, this process creates a vector file with points. gdal_polygonize
produces polygons.

2011/8/10 Mateusz K?dzior <matandked@gmail.com>

> Hi again,
>
> is it mandatory to create such file?
> Regarding to information on GDAL/OGR page should I create simple text file
> which contains only other OGRVRTLayer name property :
>
> <OGRVRTDataSource>
>     <OGRVRTLayer name="test">
>         <SrcDataSource>test.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
>
> ==============
> Best regards,
> Mateusz
>
> W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
>> Create a text file with just the header. Use the cat command to join this
>> file and the xyz file.
>> $ cat HeaderFile.csv file1.csv > file1.cHi sv
>>
>> You can repeat this on all files in a shell script.
>>
>> Otherwise add the following line in the gdal2xyz.py script at line 144
>> [1].
>>
>> dst_fh.write( 'Longitude,Latitude,Name' )
>>
>> You will also have to create a separate vrt file for each csv file. The
>> SrcDataSource element value changes for each file.
>>
>> [1]:
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>>
>>
>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>
>>> Chaitanya,
>>>
>>> if I understand properly, I need to add one line to each of processed
>>> files.
>>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>>
>>> If no - what would You recommend?
>>> I think about sed utility, but it's general difficult in use.
>>>
>>> When I am thinking about Python I see only one possibility - load each
>>> file to variable and then assign to another first line plus variable and at
>>> last - save it.
>>>
>>> ==============
>>> Best Regards,
>>> Mateusz
>>>
>>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> napisa?:
>>>
>>> Mateusz,
>>>>
>>>> gdal2xyz.py creates space delimited fields. Consider running it with the
>>>> -csv option to delimit it with comma.
>>>> Now you can almost use it as a csv format vector file. You just need to
>>>> add a header row and define a small VRT file as described in OGR's CSV
>>>> driver page[1].
>>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>>
>>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>>
>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>
>>>>> Hello,
>>>>>
>>>>> I would like to show value of each raster cell as label. My idea (I
>>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>>> to use
>>>>>
>>>>> =================================================================================================================================================
>>>>> gdal_polygonize.py:
>>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
>>>>> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>>
>>>>> =================================================================================================================================================
>>>>> unfortunately I am unable to load created file (even if I change the
>>>>> extension to .gml)
>>>>> ogr2ogr tool don't even recognize this format.
>>>>>
>>>>> =========================
>>>>> Thank You in advance,
>>>>> Mateusz
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/111be4fe/attachment-0001.html
From vadp.devl at gmail.com  Wed Aug 10 03:16:08 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Thu Aug 11 02:21:53 2011
Subject: [gdal-dev] gdalwarp under python
In-Reply-To: <CAOfwSLdox8vDFei_XnQGjKA2cS24RW+pyayjgdHM-kQ5tEe-Pg@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
	<CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>
	<CAOfwSLctVbyFXWiB1++-i-G5viJYb4MQY-kYEjmDUF7gsq9SrA@mail.gmail.com>
	<CABJAaDcF92WVy3vcxVUAN1Ftx0QZSO4u2HwjS_J6Tyb7z64tPQ@mail.gmail.com>
	<CAOfwSLeSUvpbVLXDxiXoTdTx=7C4BJptDtdZYo489BwPph1gQQ@mail.gmail.com>
	<CAOfwSLdox8vDFei_XnQGjKA2cS24RW+pyayjgdHM-kQ5tEe-Pg@mail.gmail.com>
Message-ID: <CABJAaDfm4tt4QuTXbrZMVR2O_gKWPLBXNvgt6mTiagsBxCb59A@mail.gmail.com>

On Tue, Aug 9, 2011 at 4:19 PM, Balazs Szab? <szabobaa@gmail.com> wrote:
> Probably my SRS was wrong, my historical maps are in EPSG:3819, but I needed
> to convert this coordinates to EPSG:23700, wich has wrong parameters in open
> source softwares (I have to add to the proj.4 format of EPSG:23700 the
> following towgs parameter:
> '+towgs84=52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191') and my maps

Perhaps you could have a look at this thread:
http://osgeo-org.1803224.n2.nabble.com/Problems-with-EOV-for-Hungary-1972-Egyseges-Orszagos-Vetuleti-td3691381.html
From zoltans at geograph.co.za  Wed Aug 10 04:08:11 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Aug 11 03:16:00 2011
Subject: [gdal-dev] ogrinfo and DGN files
Message-ID: <4E423C6B.3030906@geograph.co.za>

Hi,
Bentley Microstation DGN files hold info regarding the number of hours 
the DGN file has been worked on.
I was hoping that I could get this (& other) figures using ogrinfo, but 
it fails totally.

Am I misusing or misintepretting what ogrinfo should return?

TIA,
Zoltan

root@gs0:/mnt/gw0_w/jobs/3126D_185/dgn# uname -a
Linux gs0 2.6.32-33-generic #71-Ubuntu SMP Wed Jul 20 17:27:30 UTC 2011 
x86_64 GNU/Linux

root@gs0:/mnt/gw0_w/jobs/3126D_185/dgn# ogrinfo --version
GDAL 1.8.0, released 2011/01/12

root@gs0:/mnt/gw0_w/jobs/3126D_185/dgn# ogrinfo 3126db_d_bZ.DGN
FAILURE:
Unable to open datasource `3126db_d_bZ.DGN' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> NAS
   -> GML
   -> GPX
   -> KML
   -> GeoJSON
   -> Interlis 1
   -> Interlis 2
   -> GMT
   -> SQLite
   -> ODBC
   -> PGeo
   -> MSSQLSpatial
   -> PostgreSQL
   -> PCIDSK
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> DXF
   -> Geoconcept
   -> GeoRSS
   -> GPSTrackMaker
   -> VFK
   -> PGDump
   -> GPSBabel
   -> SUA
   -> OpenAir
   -> PDS
   -> WFS
   -> HTF
   -> AeronavFAA





-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From luisapena1979 at gmail.com  Wed Aug 10 04:55:24 2011
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Thu Aug 11 04:06:43 2011
Subject: [gdal-dev] Re: How to use gdalinfo for HDF- Windows
In-Reply-To: <4E4148DF.1080606@geoanalytic.com>
References: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>
	<4E4148DF.1080606@geoanalytic.com>
Message-ID: <CAH+a18-wHrQ-aJ-pDwKauGSfJaHUHHoV+gnbJuc5ogN0M8yRkQ@mail.gmail.com>

Hey Brent
I'm using ESA's GLOBCOVER data.In this case I'm trying to set a GRASS script
to run gdal directly.
I do:
gdalinfo C:\data\GL.hdf and I retrieve all basic information plus HDF's
layers

Driver: HDF4/Hierarchical Data Format Release 4
Files: c:\data\GL.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.12
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_1
  SUBDATASET_1_DESC=[1800x1800] MEAN_1 POSTEL (16-bit integer)
 SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_2
  SUBDATASET_2_DESC=[1800x1800] MEAN_2 POSTEL (16-bit integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_3
  SUBDATASET_3_DESC=[1800x1800] MEAN_3 POSTEL (16-bit integer)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_4
  SUBDATASET_4_DESC=[1800x1800] MEAN_4 POSTEL (16-bit integer)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_5
(...)

then:
gdalinfo HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_1

I get:
ERROR 4: 'HDF4_EOS:EOS_GRID:c:\data\GL.hdf:POSTEL:MEAN_1'
does not exist in fyle system, and is not recognised as a supported dataset
name.
gdalinfo failed- unable to open
'HDF4_EOS:EOS_GRID:c:\data\GL.hdf:POSTEL:MEAN_1''
open GDAL Datasets:
1 N DriverIsNULL 512x512x0

But if I do:
 gdalinfo HDF4_EOS:EOS_GRID:":\data\GL.hdf":POSTEL:MEAN_1
it works (without the C from the driver)

The problem is that if I'm trying to to use data in D it does not work.
Any suggestions?



2011/8/9 Brent Fraser <bfraser@geoanalytic.com>

> Luisa,
>
>   I use GDAL to access MODIS data in HDF4 on Windows like this:
>
> gdalinfo
> HDF4_EOS:EOS_SWATH:"G:\Projects\temp\image3\MOD02HKM.A2011186.1640.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
>
> So I'd suggest using double quotes around your path.
>
> Best Regards,
> Brent Fraser
>
>
> On 8/9/2011 8:24 AM, Luisa Pe?a wrote:
>
>  Greetings
>
> This seems odd but it does not work with
> HDF4_EOS:EOS_GRID:C:/filepath
> only
> HDF4_EOS:EOS_GRID:filepath
>
> And if my MERIS data is not placed in my main hard disk (C:) it does not
> work.
> Anyone with some experience on this in WINDOWS?
>
> Thanks
> Luisa
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/d9065108/attachment.html
From szabobaa at gmail.com  Wed Aug 10 06:35:49 2011
From: szabobaa at gmail.com (=?ISO-8859-1?Q?Balazs_Szab=F3?=)
Date: Thu Aug 11 05:52:37 2011
Subject: [gdal-dev] gdalwarp under python
In-Reply-To: <CABJAaDfm4tt4QuTXbrZMVR2O_gKWPLBXNvgt6mTiagsBxCb59A@mail.gmail.com>
References: <CAOfwSLcBvf8paPBwc=1pGg3B=UwWoe+Nu6LY4LkLh+SNh3H29g@mail.gmail.com>
	<CABJAaDfeRsSCvK2jNiwwm7ZYe7zpgp4bdCD5C+Uw99Do3p3B0Q@mail.gmail.com>
	<CAOfwSLctVbyFXWiB1++-i-G5viJYb4MQY-kYEjmDUF7gsq9SrA@mail.gmail.com>
	<CABJAaDcF92WVy3vcxVUAN1Ftx0QZSO4u2HwjS_J6Tyb7z64tPQ@mail.gmail.com>
	<CAOfwSLeSUvpbVLXDxiXoTdTx=7C4BJptDtdZYo489BwPph1gQQ@mail.gmail.com>
	<CAOfwSLdox8vDFei_XnQGjKA2cS24RW+pyayjgdHM-kQ5tEe-Pg@mail.gmail.com>
	<CABJAaDfm4tt4QuTXbrZMVR2O_gKWPLBXNvgt6mTiagsBxCb59A@mail.gmail.com>
Message-ID: <CAOfwSLdwMVvstc+nJ7rSvn_e=jDk3E8q3E5A3DBG-xC7gMFjrQ@mail.gmail.com>

I found this conversation, and it is ok!
Thanks,
Balazs

2011/8/10 Vadim Shlyakhov <vadp.devl@gmail.com>

> On Tue, Aug 9, 2011 at 4:19 PM, Balazs Szab? <szabobaa@gmail.com> wrote:
> > Probably my SRS was wrong, my historical maps are in EPSG:3819, but I
> needed
> > to convert this coordinates to EPSG:23700, wich has wrong parameters in
> open
> > source softwares (I have to add to the proj.4 format of EPSG:23700 the
> > following towgs parameter:
> > '+towgs84=52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191') and my
> maps
>
> Perhaps you could have a look at this thread:
>
> http://osgeo-org.1803224.n2.nabble.com/Problems-with-EOV-for-Hungary-1972-Egyseges-Orszagos-Vetuleti-td3691381.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/7988f949/attachment.html
From edikaradumi at gmail.com  Wed Aug 10 09:40:33 2011
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug 11 09:07:15 2011
Subject: [gdal-dev] C# Bindings warp image using gcp
Message-ID: <1312983633964-6672396.post@n2.nabble.com>

Hello im trying to warp an image using 4 or more gcp points. I have already
done it in c++, but my project is in c# so im trying to convert it. I got
the following example from the GDAL warp API tutorial and adjusted it for my
needs. I have done most of the other parts but i cant convert the following
part

// Establish reprojection transformer. 

    psWarpOptions->pTransformerArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, 
                                         GDALGetProjectionRef(hSrcDS), 
                                         hDstDS,
                                         GDALGetProjectionRef(hDstDS), 
                                         TRUE, 0.0, 1 );
    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

I cant find GDALCreateGenImgProjTransformer to create the transformer. How
can i adapt it i C#?

Best Regards
Edi Karadumi






This is the official Example

#include "gdalwarper.h"

int main()
{
    GDALDatasetH  hSrcDS, hDstDS;

    // Open input and output files. 

    GDALAllRegister();

    hSrcDS = GDALOpen( "in.tif", GA_ReadOnly );
    hDstDS = GDALOpen( "out.tif", GA_Update );

    // Setup warp options. 
    
    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;

    psWarpOptions->nBandCount = 1;
    psWarpOptions->panSrcBands = 
        (int *) CPLMalloc(sizeof(int) * psWarpOptions->nBandCount );
    psWarpOptions->panSrcBands[0] = 1;
    psWarpOptions->panDstBands = 
        (int *) CPLMalloc(sizeof(int) * psWarpOptions->nBandCount );
    psWarpOptions->panDstBands[0] = 1;

    psWarpOptions->pfnProgress = GDALTermProgress;   

    // Establish reprojection transformer. 

    psWarpOptions->pTransformerArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, 
                                         GDALGetProjectionRef(hSrcDS), 
                                         hDstDS,
                                         GDALGetProjectionRef(hDstDS), 
                                         FALSE, 0.0, 1 );
    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation. 

    GDALWarpOperation oOperation;

    oOperation.Initialize( psWarpOptions );
    oOperation.ChunkAndWarpImage( 0, 0, 
                                  GDALGetRasterXSize( hDstDS ), 
                                  GDALGetRasterYSize( hDstDS ) );

    GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
    GDALDestroyWarpOptions( psWarpOptions );

    GDALClose( hDstDS );
    GDALClose( hSrcDS );

    return 0;
}

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-Bindings-warp-image-using-gcp-tp6672396p6672396.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From bfraser at geoanalytic.com  Wed Aug 10 10:16:27 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Aug 11 09:45:14 2011
Subject: [gdal-dev] Re: How to use gdalinfo for HDF- Windows
In-Reply-To: <CAH+a18-wHrQ-aJ-pDwKauGSfJaHUHHoV+gnbJuc5ogN0M8yRkQ@mail.gmail.com>
References: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>
	<4E4148DF.1080606@geoanalytic.com>
	<CAH+a18-wHrQ-aJ-pDwKauGSfJaHUHHoV+gnbJuc5ogN0M8yRkQ@mail.gmail.com>
Message-ID: <4E4292BB.7050507@geoanalytic.com>

Luisa,

   That sounds like a bug.  A possible work-around might be to set your 
current working directory to D and don't put the drive letter in the 
filepath:

         cd D:
         gdalinfo \data\GL.hdf

But this may not work with your desire to use a GRASS script...

Best Regards,
Brent Fraser


On 8/10/2011 2:55 AM, Luisa Pe?a wrote:
> Hey Brent
> I'm using ESA's GLOBCOVER data.In this case I'm trying to set a GRASS 
> script to run gdal directly.
> I do:
> gdalinfo C:\data\GL.hdf and I retrieve all basic information plus 
> HDF's layers
> Driver: HDF4/Hierarchical Data Format Release 4
> Files: c:\data\GL.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>   HDFEOSVersion=HDFEOS_V2.12
> Subdatasets:
>   SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_1
>   SUBDATASET_1_DESC=[1800x1800] MEAN_1 POSTEL (16-bit integer)
>  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_2
>   SUBDATASET_2_DESC=[1800x1800] MEAN_2 POSTEL (16-bit integer)
>   SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_3
>   SUBDATASET_3_DESC=[1800x1800] MEAN_3 POSTEL (16-bit integer)
>   SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_4
>   SUBDATASET_4_DESC=[1800x1800] MEAN_4 POSTEL (16-bit integer)
>   SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_5
> (...)
> then:
> gdalinfo HDF4_EOS:EOS_GRID:"c:\data\GL.hdf":POSTEL:MEAN_1
> I get:
> ERROR 4: 'HDF4_EOS:EOS_GRID:c:\data\GL.hdf:POSTEL:MEAN_1'
> does not exist in fyle system, and is not recognised as a supported 
> dataset name.
> gdalinfo failed- unable to open 
> 'HDF4_EOS:EOS_GRID:c:\data\GL.hdf:POSTEL:MEAN_1''
> open GDAL Datasets:
> 1 N DriverIsNULL 512x512x0
> But if I do:
> gdalinfo HDF4_EOS:EOS_GRID:":\data\GL.hdf":POSTEL:MEAN_1
> it works (without the C from the driver)
> The problem is that if I'm trying to to use data in D it does not work.
> Any suggestions?
>
>
> 2011/8/9 Brent Fraser <bfraser@geoanalytic.com 
> <mailto:bfraser@geoanalytic.com>>
>
>     Luisa,
>
>       I use GDAL to access MODIS data in HDF4 on Windows like this:
>
>     gdalinfo
>     HDF4_EOS:EOS_SWATH:"G:\Projects\temp\image3\MOD02HKM.A2011186.1640.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
>
>     So I'd suggest using double quotes around your path.
>
>     Best Regards,
>     Brent Fraser
>
>
>     On 8/9/2011 8:24 AM, Luisa Pe?a wrote:
>>     Greetings
>>
>>     This seems odd but it does not work with
>>     HDF4_EOS:EOS_GRID:C:/filepath
>>     only
>>     HDF4_EOS:EOS_GRID:filepath
>>
>>     And if my MERIS data is not placed in my main hard disk (C:) it
>>     does not work.
>>     Anyone with some experience on this in WINDOWS?
>>
>>     Thanks
>>     Luisa
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/c40da4d4/attachment-0001.html
From warmerdam at pobox.com  Wed Aug 10 10:49:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug 11 10:23:09 2011
Subject: [gdal-dev] ogrinfo and DGN files
In-Reply-To: <4E423C6B.3030906@geograph.co.za>
References: <4E423C6B.3030906@geograph.co.za>
Message-ID: <4E429A87.8020407@pobox.com>

On 11-08-10 01:08 AM, Zoltan Szecsei wrote:
> Hi,
> Bentley Microstation DGN files hold info regarding the number of hours the DGN
> file has been worked on.
> I was hoping that I could get this (& other) figures using ogrinfo, but it
> fails totally.
>
> Am I misusing or misintepretting what ogrinfo should return?

Zoltan,

OGR does not support V8.x DGN files.  Perhaps that is what you have?

In any event, it would not report any header information about things
like hours worked on.  I am not even aware of the underlying dgndump
utility (part of dgnlib) doing this though it could likely be extended
to do so.

   http://dgnlib.maptools.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mohammedrashadkm at gmail.com  Wed Aug 10 11:26:22 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Aug 11 10:59:33 2011
Subject: [gdal-dev] tiled vector rendering
Message-ID: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>

Is there any library which provide tiled vector rendering using GDAL/OGR ?
how to build a tiled vector renderer.?? (big question expect any answer)

Anyone please throw some light....



-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/fcbd717b/attachment.html
From jf at geonef.fr  Wed Aug 10 11:33:58 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Thu Aug 11 11:07:14 2011
Subject: [gdal-dev] tiled vector rendering
In-Reply-To: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>
References: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>
Message-ID: <CALEAJzxvVoYobbV0vMeXj_OZq+mSDj6ggmimamBggUTQZ3Xirw@mail.gmail.com>

Hi Rashad,

There is MapServer, http://mapserver.org/
It supports GDAL and OGR sources as input.

It's not the only one but one of the most famous.

Best regards,

Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/



2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
> Is there any library which provide tiled vector rendering using GDAL/OGR ?
> how to build a tiled vector renderer.?? (big question expect any answer)
> Anyone please throw some light....
>
>
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jzl5325 at psu.edu  Wed Aug 10 11:46:28 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Aug 11 11:20:03 2011
Subject: [gdal-dev] tiled vector rendering
In-Reply-To: <CALEAJzxvVoYobbV0vMeXj_OZq+mSDj6ggmimamBggUTQZ3Xirw@mail.gmail.com>
References: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>
	<CALEAJzxvVoYobbV0vMeXj_OZq+mSDj6ggmimamBggUTQZ3Xirw@mail.gmail.com>
Message-ID: <CA+bfmPvc7n7Y4+kMNnEbbG7NAR+bxgOe+HUZfu_rYYfaEWty9A@mail.gmail.com>

I believe that geoserver's geowebcache will perform similar functionality.
 Here is a URL to geowebcahce documentation:

http://docs.geoserver.org/stable/en/user/geowebcache/index.html

Best of luck!

On Wed, Aug 10, 2011 at 8:33 AM, Jean-Fran?ois Gigand <jf@geonef.fr> wrote:

> Hi Rashad,
>
> There is MapServer, http://mapserver.org/
> It supports GDAL and OGR sources as input.
>
> It's not the only one but one of the most famous.
>
> Best regards,
>
> Jean-Fran?ois Gigand - Geonef
> Paris, France - http://geonef.fr/
>
>
>
> 2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
> > Is there any library which provide tiled vector rendering using GDAL/OGR
> ?
> > how to build a tiled vector renderer.?? (big question expect any answer)
> > Anyone please throw some light....
> >
> >
> > --
> > Thanks && Regards
> > Rashad
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/bb9fd2be/attachment.html
From jf at geonef.fr  Wed Aug 10 11:50:50 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Thu Aug 11 11:24:59 2011
Subject: [gdal-dev] tiled vector rendering
In-Reply-To: <CANNqv9fo4zY06kpZyqimdfTck8kT7=swhED+E5ssC3NqodnPgw@mail.gmail.com>
References: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>
	<CALEAJzxvVoYobbV0vMeXj_OZq+mSDj6ggmimamBggUTQZ3Xirw@mail.gmail.com>
	<CANNqv9fo4zY06kpZyqimdfTck8kT7=swhED+E5ssC3NqodnPgw@mail.gmail.com>
Message-ID: <CALEAJzyUYNosDM9P7RF0shJNKg1nMGxEoaqtEQeGhCbgR4LuDw@mail.gmail.com>

There is QuantumGIS : http://www.qgis.org/

Again, not the only one. GRASS can also read GDAL/OGR datasources.

Not sure if gvSIG uses the GDAL library, but it supports many formats.

Bets regards;

Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/



2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
> Thanks, I need a desktop library. can you point me to one
>
> On Wed, Aug 10, 2011 at 9:03 PM, Jean-Fran?ois Gigand <jf@geonef.fr> wrote:
>>
>> Hi Rashad,
>>
>> There is MapServer, http://mapserver.org/
>> It supports GDAL and OGR sources as input.
>>
>> It's not the only one but one of the most famous.
>>
>> Best regards,
>>
>> Jean-Fran?ois Gigand - Geonef
>> Paris, France - http://geonef.fr/
>>
>>
>>
>> 2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
>> > Is there any library which provide tiled vector rendering using GDAL/OGR
>> > ?
>> > how to build a tiled vector renderer.?? (big question expect any answer)
>> > Anyone please throw some light....
>> >
>> >
>> > --
>> > Thanks && Regards
>> > Rashad
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>
>
>
> --
> Thanks && Regards
> Rashad
>
From dassau at gbd-consult.de  Mon Aug  8 10:09:18 2011
From: dassau at gbd-consult.de (Otto Dassau)
Date: Thu Aug 11 11:40:44 2011
Subject: [gdal-dev] License: Creating GDAL package with ECW support
In-Reply-To: <4E3FE4BD.8080906@faunalia.it>
References: <20110808150730.656d63a2@laptop.speedport.ip>
	<4E3FE4BD.8080906@faunalia.it>
Message-ID: <20110808160918.3ca1aadf@laptop.speedport.ip>

Am Mon, 08 Aug 2011 15:29:33 +0200
schrieb Paolo Cavallini <cavallini@faunalia.it>:

> Il 08/08/2011 15:07, Otto Dassau ha scritto:
> > I would like to add ECW support for GDAL in OpenSUSE packages and in
> > the internet, from what I found so far, it seems to be ok without any
> > license problems - is that correct? Can you help me here?
> 
> Hi Otto,
> a few years ago I had confirmation that the licence of ECW allowed
> redistribution, but I think in the meanwhile things have changed. Giovanni
> (cc:) has followed the question recently, better ask him. Also, I think we
> should discuss about this in the public ML.
> All the best.
From geoff at tritonimaginginc.com  Wed Aug 10 14:21:46 2011
From: geoff at tritonimaginginc.com (Geoff Shipton)
Date: Thu Aug 11 14:04:49 2011
Subject: [gdal-dev] GDALwarp Mercator to UTMs
Message-ID: <006a01cc578a$5e241c70$1a6c5550$@com>

Good day, almost a complete newbie here but making progress!

I have followed all the examples of GDALwarp with some success and also 
been able to use GDAL_translate to take an image with no geoferenced 
info and generate a UTM GeoTIFF (including screens from Google Earth)

However my ultimate aim is to take a Mercator chart and generate a
background image as a UTM GeoTIFF, this so far has eluded me!

I have a Mercator Chart with the known corners in Lat/Long coordinates 
degrees, but I can't find a suitable EPSG/Proj4 projection that allows 
the use of Lat/Long degrees to designate -a_ullr for GDAL_translate.  
The following almost works:

GDAL_translate -a_srs WGS84 -a_ullr -45 78.5 45 53.5 <source tif> <merc 
geotiff)
then:
GDALwarp -t_srs EPSG:32631 <merc geotiff> <UTM geotiff>

But of course the result still has unequally-spaced lines of Latitude 
because the WGS84 input to GDAL_translate assumes the "google earth" 
type projection...not Mercator

Any ideas are very welcome - I have been circling this problem for 
several days.

Geoff



From warmerdam at pobox.com  Wed Aug 10 14:30:40 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug 11 14:13:35 2011
Subject: [gdal-dev] GDALwarp Mercator to UTMs
In-Reply-To: <006a01cc578a$5e241c70$1a6c5550$@com>
References: <006a01cc578a$5e241c70$1a6c5550$@com>
Message-ID: <CA+YzLBcU+1_VtLUKjJh+H0bVH-aeiMsVFTh7spPOoqhqM5VQ6Q@mail.gmail.com>

On Wed, Aug 10, 2011 at 11:21 AM, Geoff Shipton
<geoff@tritonimaginginc.com> wrote:
> Good day, almost a complete newbie here but making progress!
>
> I have followed all the examples of GDALwarp with some success and also
> been able to use GDAL_translate to take an image with no geoferenced
> info and generate a UTM GeoTIFF (including screens from Google Earth)
>
> However my ultimate aim is to take a Mercator chart and generate a
> background image as a UTM GeoTIFF, this so far has eluded me!
>
> I have a Mercator Chart with the known corners in Lat/Long coordinates
> degrees, but I can't find a suitable EPSG/Proj4 projection that allows
> the use of Lat/Long degrees to designate -a_ullr for GDAL_translate.
> The following almost works:
>
> GDAL_translate -a_srs WGS84 -a_ullr -45 78.5 45 53.5 <source tif> <merc
> geotiff)
> then:
> GDALwarp -t_srs EPSG:32631 <merc geotiff> <UTM geotiff>

Geoff,

I believe what you need to do is transform the corner
coordinates into Mercator projection values and then
attach them to the file.

Something roughly like:

gdaltransform -s_srs WGS84 -t_srs EPSG:3857
-45 78.5
-5009377.08569731 14642047.1291333 0
45 53.5
5009377.08569731 7076025.27618058 0

gdal_translate -a_srs EPSG:3857 \
   -a_ullr -5009377 14642047 5009377 7076025 \
  source.tif merc_with_georef.tif

gdalwarp -t_srs EPSG:32631 merc_with_georef.tif utm.tif

The important thing to keep in mind is that while the
chart (or metadata) will often show the corners in WGS84
you need to specify the corners in the projected coordinate
system when assigning them to the file with gdal_translate.
The gdaltransform command can be used to reproject
locations, or you could use the PROJ.4 cs2cs command.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Wed Aug 10 14:34:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 11 14:18:22 2011
Subject: [gdal-dev] License: Creating GDAL package with ECW support
In-Reply-To: <20110808160918.3ca1aadf@laptop.speedport.ip>
References: <20110808150730.656d63a2@laptop.speedport.ip>
	<4E3FE4BD.8080906@faunalia.it>
	<20110808160918.3ca1aadf@laptop.speedport.ip>
Message-ID: <201108102034.58985.even.rouault@mines-paris.org>

Le lundi 08 ao?t 2011 16:09:18, Otto Dassau a ?crit :
> Am Mon, 08 Aug 2011 15:29:33 +0200
> 
> schrieb Paolo Cavallini <cavallini@faunalia.it>:
> > Il 08/08/2011 15:07, Otto Dassau ha scritto:
> > > I would like to add ECW support for GDAL in OpenSUSE packages and in
> > > the internet, from what I found so far, it seems to be ok without any
> > > license problems - is that correct? Can you help me here?

You might find it interesting to read this old thread : http://osgeo-
org.1803224.n2.nabble.com/ECW-Licence-td2047065.html

that particularly points to :
http://lists.alioth.debian.org/pipermail/pkg-grass-general/2005-
August/001083.html

In summary what I've understood is that none of the 3 options of the (old) 
licence that came with libecwj 3.3 can be considered as a free licence. For 
example the 1st one, the "ECW JPEG 2000 SDK PUBLIC USE LICENSE AGREEMENT" 
restricts what you can do with the source code : "You are not permitted to 
change the ECW file format.", which is incompatible with the principles of all 
free licences.

You could perhaps build ECW support for GDAL as a GDAL plugin and put it in a 
"non-free" repository, if that notion exists for OpenSUSE. That's what the 
UbuntuGIS team has done for example.


> > 
> > Hi Otto,
> > a few years ago I had confirmation that the licence of ECW allowed
> > redistribution, but I think in the meanwhile things have changed.
> > Giovanni (cc:) has followed the question recently, better ask him. Also,
> > I think we should discuss about this in the public ML.
> > All the best.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Aug 10 14:40:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 11 14:23:57 2011
Subject: [gdal-dev] C# Bindings warp image using gcp
In-Reply-To: <1312983633964-6672396.post@n2.nabble.com>
References: <1312983633964-6672396.post@n2.nabble.com>
Message-ID: <201108102040.14679.even.rouault@mines-paris.org>

Le mercredi 10 ao?t 2011 15:40:33, Edi.Karadumi a ?crit :
> Hello im trying to warp an image using 4 or more gcp points. I have already
> done it in c++, but my project is in c# so im trying to convert it. I got
> the following example from the GDAL warp API tutorial and adjusted it for
> my needs. I have done most of the other parts but i cant convert the
> following part
> 
> // Establish reprojection transformer.
> 
>     psWarpOptions->pTransformerArg =
>         GDALCreateGenImgProjTransformer( hSrcDS,
>                                          GDALGetProjectionRef(hSrcDS),
>                                          hDstDS,
>                                          GDALGetProjectionRef(hDstDS),
>                                          TRUE, 0.0, 1 );
>     psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
> 
> I cant find GDALCreateGenImgProjTransformer to create the transformer. How
> can i adapt it i C#?

There's no SWIG bindings for using those low level warp API. The closes match 
I see is the gdal.ReprojectImage() API that will establish a 
GenImgProjTransform and proceed to the warping itself. You can see its C++ 
implementation here :

http://trac.osgeo.org/gdal/browser/trunk/gdal/alg/gdalwarper.cpp

> 
> Best Regards
> Edi Karadumi
> 
> 
> 
> 
> 
> 
> This is the official Example
> 
> #include "gdalwarper.h"
> 
> int main()
> {
>     GDALDatasetH  hSrcDS, hDstDS;
> 
>     // Open input and output files.
> 
>     GDALAllRegister();
> 
>     hSrcDS = GDALOpen( "in.tif", GA_ReadOnly );
>     hDstDS = GDALOpen( "out.tif", GA_Update );
> 
>     // Setup warp options.
> 
>     GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();
> 
>     psWarpOptions->hSrcDS = hSrcDS;
>     psWarpOptions->hDstDS = hDstDS;
> 
>     psWarpOptions->nBandCount = 1;
>     psWarpOptions->panSrcBands =
>         (int *) CPLMalloc(sizeof(int) * psWarpOptions->nBandCount );
>     psWarpOptions->panSrcBands[0] = 1;
>     psWarpOptions->panDstBands =
>         (int *) CPLMalloc(sizeof(int) * psWarpOptions->nBandCount );
>     psWarpOptions->panDstBands[0] = 1;
> 
>     psWarpOptions->pfnProgress = GDALTermProgress;
> 
>     // Establish reprojection transformer.
> 
>     psWarpOptions->pTransformerArg =
>         GDALCreateGenImgProjTransformer( hSrcDS,
>                                          GDALGetProjectionRef(hSrcDS),
>                                          hDstDS,
>                                          GDALGetProjectionRef(hDstDS),
>                                          FALSE, 0.0, 1 );
>     psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
> 
>     // Initialize and execute the warp operation.
> 
>     GDALWarpOperation oOperation;
> 
>     oOperation.Initialize( psWarpOptions );
>     oOperation.ChunkAndWarpImage( 0, 0,
>                                   GDALGetRasterXSize( hDstDS ),
>                                   GDALGetRasterYSize( hDstDS ) );
> 
>     GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
>     GDALDestroyWarpOptions( psWarpOptions );
> 
>     GDALClose( hDstDS );
>     GDALClose( hSrcDS );
> 
>     return 0;
> }
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/C-Bindings-warp-image-using-gcp-tp6
> 672396p6672396.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Aug 10 14:49:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 11 14:33:14 2011
Subject: [gdal-dev] Re: How to use gdalinfo for HDF- Windows
In-Reply-To: <CAH+a18-wHrQ-aJ-pDwKauGSfJaHUHHoV+gnbJuc5ogN0M8yRkQ@mail.gmail.com>
References: <CAH+a189PfH9SD8uo0XVqCGQSSMdRnvgRFW6O+B3qW5NPmBAmPA@mail.gmail.com>
	<4E4148DF.1080606@geoanalytic.com>
	<CAH+a18-wHrQ-aJ-pDwKauGSfJaHUHHoV+gnbJuc5ogN0M8yRkQ@mail.gmail.com>
Message-ID: <201108102049.03647.even.rouault@mines-paris.org>

Luisa,

you didn't mention which GDAL version you are using. Since Brent manages to 
make it work with a very similar command line that the one that fails for you, 
I highly suspect you are using an old version. There was indeed a bug very 
similar to your issue ( http://trac.osgeo.org/gdal/ticket/2823 ) that has been 
fixed in GDAL 1.6.1.

Best regards,

Even
From james_e_taber at raytheon.com  Wed Aug 10 16:50:56 2011
From: james_e_taber at raytheon.com (James Taber)
Date: Thu Aug 11 16:44:55 2011
Subject: [gdal-dev] tiling mrsid images, wrong y coordinate?
Message-ID: <4E42EF30.8010204@raytheon.com>

I am trying to tile a mrsid image (utm,nad83).  The incoming   Upon 
completion of tiling process my tile info is as follows:

<?xml version="1.0" encoding="utf-8"?>
<TileMap version="1.0.0" tilemapservice="http://tms.osgeo.org/1.0.0">
<Title>Hawthorne_West.sid</Title>
<Abstract></Abstract>
<SRS>EPSG:900913</SRS>
<BoundingBox minx="38.49658176985584" miny="-118.75542077890545" 
maxx="38.62802871616970" maxy="-118.62063944476994"/>
<Origin x="38.49658176985584" y="-118.75542077890545"/>
<TileFormat width="256" height="256" mime-type="image/png" extension="png"/>
<TileSets profile="mercator">
<TileSet href="0" units-per-pixel="156543.03390000000945" order="0"/>
<TileSet href="1" units-per-pixel="78271.51695000000473" order="1"/>
<TileSet href="2" units-per-pixel="39135.75847500000236" order="2"/>
<TileSet href="3" units-per-pixel="19567.87923750000118" order="3"/>
<TileSet href="4" units-per-pixel="9783.93961875000059" order="4"/>
<TileSet href="5" units-per-pixel="4891.96980937500030" order="5"/>
<TileSet href="6" units-per-pixel="2445.98490468750015" order="6"/>
<TileSet href="7" units-per-pixel="1222.99245234375007" order="7"/>
<TileSet href="8" units-per-pixel="611.49622617187504" order="8"/>
<TileSet href="9" units-per-pixel="305.74811308593752" order="9"/>
<TileSet href="10" units-per-pixel="152.87405654296876" order="10"/>
<TileSet href="11" units-per-pixel="76.43702827148438" order="11"/>
<TileSet href="12" units-per-pixel="38.21851413574219" order="12"/>
<TileSet href="13" units-per-pixel="19.10925706787109" order="13"/>
<TileSet href="14" units-per-pixel="9.55462853393555" order="14"/>
<TileSet href="15" units-per-pixel="4.77731426696777" order="15"/>
<TileSet href="16" units-per-pixel="2.38865713348389" order="16"/>
<TileSet href="17" units-per-pixel="1.19432856674194" order="17"/>
</TileSets>
</TileMap>

The min/max bounding box has the correct coordinates, but the y-value 
file names are in the 20k range.  I have checked what the y value should 
be here: 
http://facstaff.unca.edu/mcmcclur/GoogleMaps/Projections/GoogleCoords.html 
and it indicates that the y-coord should be in the 12k range (as 
expected).  Any idea as to what I am doing wrong?  I tried warping to 
ESPG:900913 and that did not help.

From james_e_taber at raytheon.com  Wed Aug 10 17:05:01 2011
From: james_e_taber at raytheon.com (James Taber)
Date: Thu Aug 11 16:59:13 2011
Subject: [gdal-dev] follow on to tiling question
Message-ID: <4E42F27D.5040306@raytheon.com>

I looks like the y coord is being derived as if the latitude is -36 as 
opposed to 36.  Now the question is, how do I fix this?

From jf at geonef.fr  Wed Aug 10 19:12:55 2011
From: jf at geonef.fr (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Gigand?=)
Date: Thu Aug 11 19:12:04 2011
Subject: [gdal-dev] tiled vector rendering
In-Reply-To: <CANNqv9fOu+Ke-UtryXh3ReTGO852327=tymLmFkVdSO-KeLd=w@mail.gmail.com>
References: <CANNqv9eo7Pz5CwgVCrkZMg5jJav+D6QrUK4KfzTvHSv1TcYj_Q@mail.gmail.com>
	<CALEAJzxvVoYobbV0vMeXj_OZq+mSDj6ggmimamBggUTQZ3Xirw@mail.gmail.com>
	<CANNqv9fo4zY06kpZyqimdfTck8kT7=swhED+E5ssC3NqodnPgw@mail.gmail.com>
	<CALEAJzyUYNosDM9P7RF0shJNKg1nMGxEoaqtEQeGhCbgR4LuDw@mail.gmail.com>
	<CANNqv9fOu+Ke-UtryXh3ReTGO852327=tymLmFkVdSO-KeLd=w@mail.gmail.com>
Message-ID: <CALEAJzxC8CTiqQhDryUA1UQh24DLkvs8reSU_QGWYNyNMD26Pg@mail.gmail.com>

I don't know OSSIM, and I don't understand what you really need to do.
You should understand the concepts first, then express what component
you need, for given inputs and outputs.

"tiled vector rendering engine": does that mean rendering vectors to
an image given style rules, or split large vectors into geographical
square tiles of vectors ?


Jean-Fran?ois Gigand - Geonef
Paris, France - http://geonef.fr/




2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
> now i will tell my requirement for more results from you
> I need a library based on OGR for OSSIM it should be a tiled vector
> rendering engine
> is there any library that I can get to inegrate with OSSIM + GDAL/OGR
>
> On Wed, Aug 10, 2011 at 9:20 PM, Jean-Fran?ois Gigand <jf@geonef.fr> wrote:
>>
>> There is QuantumGIS : http://www.qgis.org/
>>
>> Again, not the only one. GRASS can also read GDAL/OGR datasources.
>>
>> Not sure if gvSIG uses the GDAL library, but it supports many formats.
>>
>> Bets regards;
>>
>> Jean-Fran?ois Gigand - Geonef
>> Paris, France - http://geonef.fr/
>>
>>
>>
>> 2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
>> > Thanks, I need a desktop library. can you point me to one
>> >
>> > On Wed, Aug 10, 2011 at 9:03 PM, Jean-Fran?ois Gigand <jf@geonef.fr>
>> > wrote:
>> >>
>> >> Hi Rashad,
>> >>
>> >> There is MapServer, http://mapserver.org/
>> >> It supports GDAL and OGR sources as input.
>> >>
>> >> It's not the only one but one of the most famous.
>> >>
>> >> Best regards,
>> >>
>> >> Jean-Fran?ois Gigand - Geonef
>> >> Paris, France - http://geonef.fr/
>> >>
>> >>
>> >>
>> >> 2011/8/10 Mohammed Rashad <mohammedrashadkm@gmail.com>:
>> >> > Is there any library which provide tiled vector rendering using
>> >> > GDAL/OGR
>> >> > ?
>> >> > how to build a tiled vector renderer.?? (big question expect any
>> >> > answer)
>> >> > Anyone please throw some light....
>> >> >
>> >> >
>> >> > --
>> >> > Thanks && Regards
>> >> > Rashad
>> >> >
>> >> > _______________________________________________
>> >> > gdal-dev mailing list
>> >> > gdal-dev@lists.osgeo.org
>> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >> >
>> >
>> >
>> >
>> > --
>> > Thanks && Regards
>> > Rashad
>> >
>
>
>
> --
> Thanks && Regards
> Rashad
>
From jimp at ittvis.com  Wed Aug 10 19:34:53 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Thu Aug 11 19:41:30 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
Message-ID: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>

In GDAL 1.8.1 I'm attempting to call GetMetadataItem() within the
context of an Android 2.2 Java app, but I'm getting an error,
specifically

 

08-10 22:13:41.750: WARN/dalvikvm(546): JNI WARNING: jstring 0x40569100
points to non-string object (Check_GetStringUTFChars)

 

An access violation error follows this.

 

I've successfully opened the image and have a valid Dataset object.
I've debugged my way through the JPIPKAKDataset initialization method so
I'm pretty confident that much is working properly.

 

I don't know if this is a problem with the swig bindings or something
else.  I hope someone's run into this one before.

 

My Java code is really straightforward:

      public int getDecompositionLevels() {

            if (gdalDataset != null)

            {

                  String key = "JPIP_NRESOLUTIONLEVELS";

                  String domain = "JPIP";

                  return
Integer.parseInt(gdalDataset.GetMetadataItem(key, domain));

            } else {

                  return -1;

            }

      }

This corresponds to the API definition found here:

 

http://gdal.org/java/org/gdal/gdal/MajorObject.html#GetMetadataItem(java
.lang.String, java.lang.String)

 

I've also tried the variant that uses a default domain string with the
same error as a result.

 

I'm using the gdal_wrap.cpp generated in the swig/java directory along
with corresponding gdal.jar file.

 

The org.gdal.gdal.MajorObject.java class defines the interface as

 

  public String GetMetadataItem(String pszName, String pszDomain) {

    return gdalJNI.MajorObject_GetMetadataItem__SWIG_0(swigCPtr, this,
pszName, pszDomain);

  }

 

The swig interface file MajorObject.i defines this as

 

/*

 * GetMetadataItem

 */

  %apply Pointer NONNULL {const char * pszName};

  const char *GetMetadataItem( const char *pszName, const char
*pszDomain = "" ) {

    return GDALGetMetadataItem( self, pszName, pszDomain);

  }

 

While the generated gdal_wrap.cpp is

 

SWIGINTERN char const
*GDALMajorObjectShadow_GetMetadataItem__SWIG_0(GDALMajorObjectShadow
*self,char const *pszName,char const *pszDomain=""){

    return GDALGetMetadataItem( self, pszName, pszDomain);

}

 

I've found a thread discussing a similar issue under the android-ndk
group, but without the swig component:

 

http://groups.google.com/group/android-ndk/browse_thread/thread/27e83cdf
168bc0bb/db151ea4c15362c5?show_docid=db151ea4c15362c5

 

I infer from that discussion that either the GDAL interface definition
file needs to be tweaked or I need to use javah instead of swig.

 

I'm still new to all of this (including GDAL) so assume I'm missing
something blatantly obvious.

 

Thanks for any help,

Jim P.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110810/35f4292e/attachment.html
From matandked at gmail.com  Thu Aug 11 03:45:31 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Fri Aug 12 04:12:44 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
Message-ID: <CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>

Hi Chaitanya,

I say that I don't need to create VRT file, but I was wrong. When I try to
run ogr2ogr utility:
*
ogr2ogr -f GML output_file.gml input_file.csv*

I discover that created file contain only table - if I choose ESRI shapefile
as output, I get only dbf file.

So i try to generate such file:

================================================================================
<OGRVRTDataSource>
    <OGRVRTLayer name="evap_OBC_OBCXYZn">
        <SrcDataSource>evap_OBC_OBCXYZn.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="Longitude"
y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>
=================================================================================

but:

   - if I type .vrt file as input I get an empty GML file
   - if I I type .csv file as input I get an output which contain only table
   (without geometry)

How I can run it properly?
Which values are allowed in <GeometryField encoding> property?
===================
Best regards,
Mateusz

W dniu 10 sierpnia 2011 05:58 u?ytkownik Chaitanya kumar CH <
chaitanya.ch@gmail.com> napisa?:

> Mateusz,
>
> You have to change the OGRVRTLayer name property to point to the file name
> without the extension.  Also change the SrcDataSource element.
>
> FYI, this process creates a vector file with points. gdal_polygonize
> produces polygons.
>
>
> 2011/8/10 Mateusz K?dzior <matandked@gmail.com>
>
>> Hi again,
>>
>> is it mandatory to create such file?
>> Regarding to information on GDAL/OGR page should I create simple text file
>> which contains only other OGRVRTLayer name property :
>>
>> <OGRVRTDataSource>
>>     <OGRVRTLayer name="test">
>>         <SrcDataSource>test.csv</SrcDataSource>
>>         <GeometryType>wkbPoint</GeometryType>
>>         <LayerSRS>WGS84</LayerSRS>
>>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>>     </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> ==============
>> Best regards,
>> Mateusz
>>
>> W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> napisa?:
>>
>>> Create a text file with just the header. Use the cat command to join this
>>> file and the xyz file.
>>> $ cat HeaderFile.csv file1.csv > file1.cHi sv
>>>
>>> You can repeat this on all files in a shell script.
>>>
>>> Otherwise add the following line in the gdal2xyz.py script at line 144
>>> [1].
>>>
>>> dst_fh.write( 'Longitude,Latitude,Name' )
>>>
>>> You will also have to create a separate vrt file for each csv file. The
>>> SrcDataSource element value changes for each file.
>>>
>>> [1]:
>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>>>
>>>
>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>
>>>> Chaitanya,
>>>>
>>>> if I understand properly, I need to add one line to each of processed
>>>> files.
>>>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>>>
>>>> If no - what would You recommend?
>>>> I think about sed utility, but it's general difficult in use.
>>>>
>>>> When I am thinking about Python I see only one possibility - load each
>>>> file to variable and then assign to another first line plus variable and at
>>>> last - save it.
>>>>
>>>> ==============
>>>> Best Regards,
>>>> Mateusz
>>>>
>>>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>>>> chaitanya.ch@gmail.com> napisa?:
>>>>
>>>> Mateusz,
>>>>>
>>>>> gdal2xyz.py creates space delimited fields. Consider running it with
>>>>> the -csv option to delimit it with comma.
>>>>> Now you can almost use it as a csv format vector file. You just need to
>>>>> add a header row and define a small VRT file as described in OGR's CSV
>>>>> driver page[1].
>>>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>>>
>>>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>>>
>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> I would like to show value of each raster cell as label. My idea (I
>>>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>>>> to use
>>>>>>
>>>>>> =================================================================================================================================================
>>>>>> gdal_polygonize.py:
>>>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp of
>>>>>> format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>>>
>>>>>> =================================================================================================================================================
>>>>>> unfortunately I am unable to load created file (even if I change the
>>>>>> extension to .gml)
>>>>>> ogr2ogr tool don't even recognize this format.
>>>>>>
>>>>>> =========================
>>>>>> Thank You in advance,
>>>>>> Mateusz
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/75a20b80/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Aug 11 04:04:32 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 12 04:32:47 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
Message-ID: <CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>

What is the output of ogrinfo on the .vrt file?

2011/8/11 Mateusz K?dzior <matandked@gmail.com>

> Hi Chaitanya,
>
> I say that I don't need to create VRT file, but I was wrong. When I try to
> run ogr2ogr utility:
> *
> ogr2ogr -f GML output_file.gml input_file.csv*
>
> I discover that created file contain only table - if I choose ESRI
> shapefile as output, I get only dbf file.
>
> So i try to generate such file:
>
>
> ================================================================================
> <OGRVRTDataSource>
>     <OGRVRTLayer name="evap_OBC_OBCXYZn">
>         <SrcDataSource>evap_OBC_OBCXYZn.csv</SrcDataSource>
>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude"
> y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
>
> =================================================================================
>
> but:
>
>    - if I type .vrt file as input I get an empty GML file
>    - if I I type .csv file as input I get an output which contain only
>    table (without geometry)
>
> How I can run it properly?
> Which values are allowed in <GeometryField encoding> property?
> ===================
> Best regards,
> Mateusz
>
> W dniu 10 sierpnia 2011 05:58 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
> Mateusz,
>>
>> You have to change the OGRVRTLayer name property to point to the file name
>> without the extension.  Also change the SrcDataSource element.
>>
>> FYI, this process creates a vector file with points. gdal_polygonize
>> produces polygons.
>>
>>
>> 2011/8/10 Mateusz K?dzior <matandked@gmail.com>
>>
>>> Hi again,
>>>
>>> is it mandatory to create such file?
>>> Regarding to information on GDAL/OGR page should I create simple text
>>> file which contains only other OGRVRTLayer name property :
>>>
>>> <OGRVRTDataSource>
>>>     <OGRVRTLayer name="test">
>>>         <SrcDataSource>test.csv</SrcDataSource>
>>>         <GeometryType>wkbPoint</GeometryType>
>>>         <LayerSRS>WGS84</LayerSRS>
>>>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>>>     </OGRVRTLayer>
>>> </OGRVRTDataSource>
>>>
>>> ==============
>>> Best regards,
>>> Mateusz
>>>
>>> W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> napisa?:
>>>
>>>> Create a text file with just the header. Use the cat command to join
>>>> this file and the xyz file.
>>>> $ cat HeaderFile.csv file1.csv > file1.cHi sv
>>>>
>>>> You can repeat this on all files in a shell script.
>>>>
>>>> Otherwise add the following line in the gdal2xyz.py script at line 144
>>>> [1].
>>>>
>>>> dst_fh.write( 'Longitude,Latitude,Name' )
>>>>
>>>> You will also have to create a separate vrt file for each csv file. The
>>>> SrcDataSource element value changes for each file.
>>>>
>>>> [1]:
>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>>>>
>>>>
>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>
>>>>> Chaitanya,
>>>>>
>>>>> if I understand properly, I need to add one line to each of processed
>>>>> files.
>>>>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>>>>
>>>>> If no - what would You recommend?
>>>>> I think about sed utility, but it's general difficult in use.
>>>>>
>>>>> When I am thinking about Python I see only one possibility - load each
>>>>> file to variable and then assign to another first line plus variable and at
>>>>> last - save it.
>>>>>
>>>>> ==============
>>>>> Best Regards,
>>>>> Mateusz
>>>>>
>>>>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>>>>> chaitanya.ch@gmail.com> napisa?:
>>>>>
>>>>> Mateusz,
>>>>>>
>>>>>> gdal2xyz.py creates space delimited fields. Consider running it with
>>>>>> the -csv option to delimit it with comma.
>>>>>> Now you can almost use it as a csv format vector file. You just need
>>>>>> to add a header row and define a small VRT file as described in OGR's CSV
>>>>>> driver page[1].
>>>>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>>>>
>>>>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>>>>
>>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> I would like to show value of each raster cell as label. My idea (I
>>>>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>>>>> to use
>>>>>>>
>>>>>>> =================================================================================================================================================
>>>>>>> gdal_polygonize.py:
>>>>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp
>>>>>>> of format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>>>>
>>>>>>> =================================================================================================================================================
>>>>>>> unfortunately I am unable to load created file (even if I change the
>>>>>>> extension to .gml)
>>>>>>> ogr2ogr tool don't even recognize this format.
>>>>>>>
>>>>>>> =========================
>>>>>>> Thank You in advance,
>>>>>>> Mateusz
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Best regards,
>>>>>> Chaitanya kumar CH.
>>>>>>
>>>>>> +91-9494447584
>>>>>> 17.2416N 80.1426E
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/e0774aaf/attachment.html
From mika at digikartta.net  Thu Aug 11 11:56:33 2011
From: mika at digikartta.net (Lehtonen, Mika)
Date: Fri Aug 12 12:57:35 2011
Subject: [gdal-dev] Own Geotiff overviews(internal)
Message-ID: <4E43FBB1.7060900@digikartta.net>

Hi,
sorry for asking something without googling it more beforehands, but I 
believe my questions are so trivial that someone can answer to them 
right away.

I believe, with latest gdal versions you can "swap" GeoTiff internal 
overviews or by other words, use for example your own tiffs as internal 
overviews. Am I right?

 From which version has this been possible?

Syntax for the proper option (gdal_translate or/and gdalwarp?)


reg. mika
From even.rouault at mines-paris.org  Thu Aug 11 13:55:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 12 14:56:45 2011
Subject: [gdal-dev] Own Geotiff overviews(internal)
In-Reply-To: <4E43FBB1.7060900@digikartta.net>
References: <4E43FBB1.7060900@digikartta.net>
Message-ID: <201108111955.51051.even.rouault@mines-paris.org>

Le jeudi 11 ao?t 2011 17:56:33, Lehtonen, Mika a ?crit :
> Hi,
> sorry for asking something without googling it more beforehands, but I
> believe my questions are so trivial that someone can answer to them
> right away.
> 
> I believe, with latest gdal versions you can "swap" GeoTiff internal
> overviews or by other words, use for example your own tiffs as internal
> overviews. Am I right?

I'm not 100% sure to understand your question/need, but here's my 
understanding anyway

Let's suppose you have a TIFF, foo.tif
You want to use a custom overview (perhaps not based directly from foo.tif, 
could be a scan of another map at the same extent but at another scale). You 
call it foo.tif.ovr

Then GDAL will see foo.tif.ovr as an overview of foo.tif

You want to package a new file with the main image containing the imagery of 
foo.tif and the overview containing the imagery of foo.tif.ovr 

You will use GDAL >= 1.8.0 and do :

gdal_translate foo.tif bar.tif -co COPY_SRC_OVERVIEWS=YES

See http://gdal.org/frmt_gtiff.html

> 
>  From which version has this been possible?
> 
> Syntax for the proper option (gdal_translate or/and gdalwarp?)
> 
> 
> reg. mika
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Aug 11 14:08:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 12 15:09:56 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
Message-ID: <201108112008.17631.even.rouault@mines-paris.org>

> I've found a thread discussing a similar issue under the android-ndk
> group, but without the swig component:
> 
> 
> 
> http://groups.google.com/group/android-ndk/browse_thread/thread/27e83cdf
> 168bc0bb/db151ea4c15362c5?show_docid=db151ea4c15362c5
> 
> 
> 
> I infer from that discussion that either the GDAL interface definition
> file needs to be tweaked or I need to use javah instead of swig.

No, I don't think you need to tweak anything in the swig generated files. If 
there was an error, it would not work in the standard (non-Android) case too. 
And I verified it works just fine.

I'm not sure how you've compiled the gdal_warp.cpp, but if you didn't use the 
provided swig/java/GNUmakefile, there's one point you must be very careful that 
is mentionned at the bottom of that makefile :

# Do not remove -fno-strict-aliasing while SWIG generates weird code in upcast 
methods
# See http://trac.osgeo.org/gdal/changeset/16006

That would be a plausible cause for the crash, since in your particular case  
the GetMetadataItem() method is in the MajorObject class, so the Dataset 
object needs to call the SWIGDatasetUpcast() method...

> 
> 
> 
> I'm still new to all of this (including GDAL) so assume I'm missing
> something blatantly obvious.
> 
> 
> 
> Thanks for any help,
> 
> Jim P.
From mika at digikartta.net  Thu Aug 11 14:14:02 2011
From: mika at digikartta.net (Mika Lehtonen)
Date: Fri Aug 12 15:15:43 2011
Subject: [gdal-dev] Own Geotiff overviews(internal)
In-Reply-To: <201108111955.51051.even.rouault@mines-paris.org>
References: <4E43FBB1.7060900@digikartta.net>
	<201108111955.51051.even.rouault@mines-paris.org>
Message-ID: <4E441BEA.3080403@digikartta.net>

100% correct answer, thanks!
That's exactly what I was looking for.
Gdal has great resampling algoritms, but with certain files, it's better 
to 'photoshop' the overviews in order to get maximum quality. And with 
certain server software, like Geoserver, you can't use external 
overviews. I could also imagine that some one would want to use 
different overviews than those derived from the original. I know there 
are several technichs for achieving the same effect, but this is one 
way, especially if you want to separate it from the code.

thank you very much,
- mika -

11.8.2011 20:55, Even Rouault kirjoitti:
> Le jeudi 11 ao?t 2011 17:56:33, Lehtonen, Mika a ?crit :
>> Hi,
>> sorry for asking something without googling it more beforehands, but I
>> believe my questions are so trivial that someone can answer to them
>> right away.
>>
>> I believe, with latest gdal versions you can "swap" GeoTiff internal
>> overviews or by other words, use for example your own tiffs as internal
>> overviews. Am I right?
> I'm not 100% sure to understand your question/need, but here's my
> understanding anyway
>
> Let's suppose you have a TIFF, foo.tif
> You want to use a custom overview (perhaps not based directly from foo.tif,
> could be a scan of another map at the same extent but at another scale). You
> call it foo.tif.ovr
>
> Then GDAL will see foo.tif.ovr as an overview of foo.tif
>
> You want to package a new file with the main image containing the imagery of
> foo.tif and the overview containing the imagery of foo.tif.ovr
>
> You will use GDAL>= 1.8.0 and do :
>
> gdal_translate foo.tif bar.tif -co COPY_SRC_OVERVIEWS=YES
>
> See http://gdal.org/frmt_gtiff.html
>
>>    From which version has this been possible?
>>
>> Syntax for the proper option (gdal_translate or/and gdalwarp?)
>>
>>
>> reg. mika
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matandked at gmail.com  Thu Aug 11 14:17:31 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Fri Aug 12 15:19:32 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
Message-ID: <CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>

Hi Chaitanya,

I try to add full path to csv file - is it correct?

===================================================NEW VRT
FILE====================================
<OGRVRTDataSource>
    <OGRVRTLayer name="evap_OBCXYZn">

<SrcDataSource>"/media/windows/studia/2_sem_mgr/mgr/prof_Zawadzki/dods/gldas/00Z07Apr2009_00Z15Apr2009/evap_OBCXYZn.csv"</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="Longitude"
y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>
================================================================================================

When I try use ogrinfor I get an error message:

FAILURE:
Unable to open datasource `evap_OBCXYZn.vrt' with the following drivers.

When I use the same tool at csv file I get:

=================================

INFO: Open of `evap_OBCXYZn.csv'
      using driver `CSV' successful.
1: evap_OBCXYZn (None)

================================

The CSV file contain such information:

============================
Longitude,Latitude,Name
20.132145,52.4227439,1.78132e-05
20.382145,52.4227439,1.89083e-05
...
and so on..
============================

How I can change it to get vector-point layer? As I wrote I can only get a
layer without geometry if I point to csv file.

============
Best regards,
Mateusz



W dniu 11 sierpnia 2011 10:04 u?ytkownik Chaitanya kumar CH <
chaitanya.ch@gmail.com> napisa?:

> What is the output of ogrinfo on the .vrt file?
>
>
> 2011/8/11 Mateusz K?dzior <matandked@gmail.com>
>
>> Hi Chaitanya,
>>
>> I say that I don't need to create VRT file, but I was wrong. When I try to
>> run ogr2ogr utility:
>> *
>> ogr2ogr -f GML output_file.gml input_file.csv*
>>
>> I discover that created file contain only table - if I choose ESRI
>> shapefile as output, I get only dbf file.
>>
>> So i try to generate such file:
>>
>>
>> ================================================================================
>> <OGRVRTDataSource>
>>     <OGRVRTLayer name="evap_OBC_OBCXYZn">
>>         <SrcDataSource>evap_OBC_OBCXYZn.csv</SrcDataSource>
>>
>>         <GeometryType>wkbPoint</GeometryType>
>>         <LayerSRS>WGS84</LayerSRS>
>>         <GeometryField encoding="PointFromColumns" x="Longitude"
>> y="Latitude"/>
>>     </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> =================================================================================
>>
>> but:
>>
>>    - if I type .vrt file as input I get an empty GML file
>>    - if I I type .csv file as input I get an output which contain only
>>    table (without geometry)
>>
>> How I can run it properly?
>> Which values are allowed in <GeometryField encoding> property?
>> ===================
>> Best regards,
>> Mateusz
>>
>> W dniu 10 sierpnia 2011 05:58 u?ytkownik Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> napisa?:
>>
>> Mateusz,
>>>
>>> You have to change the OGRVRTLayer name property to point to the file
>>> name without the extension.  Also change the SrcDataSource element.
>>>
>>> FYI, this process creates a vector file with points. gdal_polygonize
>>> produces polygons.
>>>
>>>
>>> 2011/8/10 Mateusz K?dzior <matandked@gmail.com>
>>>
>>>> Hi again,
>>>>
>>>> is it mandatory to create such file?
>>>> Regarding to information on GDAL/OGR page should I create simple text
>>>> file which contains only other OGRVRTLayer name property :
>>>>
>>>> <OGRVRTDataSource>
>>>>     <OGRVRTLayer name="test">
>>>>         <SrcDataSource>test.csv</SrcDataSource>
>>>>         <GeometryType>wkbPoint</GeometryType>
>>>>         <LayerSRS>WGS84</LayerSRS>
>>>>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>>>>     </OGRVRTLayer>
>>>> </OGRVRTDataSource>
>>>>
>>>> ==============
>>>> Best regards,
>>>> Mateusz
>>>>
>>>> W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
>>>> chaitanya.ch@gmail.com> napisa?:
>>>>
>>>>> Create a text file with just the header. Use the cat command to join
>>>>> this file and the xyz file.
>>>>> $ cat HeaderFile.csv file1.csv > file1.cHi sv
>>>>>
>>>>> You can repeat this on all files in a shell script.
>>>>>
>>>>> Otherwise add the following line in the gdal2xyz.py script at line 144
>>>>> [1].
>>>>>
>>>>> dst_fh.write( 'Longitude,Latitude,Name' )
>>>>>
>>>>> You will also have to create a separate vrt file for each csv file. The
>>>>> SrcDataSource element value changes for each file.
>>>>>
>>>>> [1]:
>>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>>>>>
>>>>>
>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>
>>>>>> Chaitanya,
>>>>>>
>>>>>> if I understand properly, I need to add one line to each of processed
>>>>>> files.
>>>>>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>>>>>
>>>>>> If no - what would You recommend?
>>>>>> I think about sed utility, but it's general difficult in use.
>>>>>>
>>>>>> When I am thinking about Python I see only one possibility - load each
>>>>>> file to variable and then assign to another first line plus variable and at
>>>>>> last - save it.
>>>>>>
>>>>>> ==============
>>>>>> Best Regards,
>>>>>> Mateusz
>>>>>>
>>>>>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>>>>>> chaitanya.ch@gmail.com> napisa?:
>>>>>>
>>>>>> Mateusz,
>>>>>>>
>>>>>>> gdal2xyz.py creates space delimited fields. Consider running it with
>>>>>>> the -csv option to delimit it with comma.
>>>>>>> Now you can almost use it as a csv format vector file. You just need
>>>>>>> to add a header row and define a small VRT file as described in OGR's CSV
>>>>>>> driver page[1].
>>>>>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>>>>>
>>>>>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>>>>>
>>>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>>>
>>>>>>>> Hello,
>>>>>>>>
>>>>>>>> I would like to show value of each raster cell as label. My idea (I
>>>>>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>>>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>>>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>>>>>> to use
>>>>>>>>
>>>>>>>> =================================================================================================================================================
>>>>>>>> gdal_polygonize.py:
>>>>>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp
>>>>>>>> of format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>>>>>
>>>>>>>> =================================================================================================================================================
>>>>>>>> unfortunately I am unable to load created file (even if I change the
>>>>>>>> extension to .gml)
>>>>>>>> ogr2ogr tool don't even recognize this format.
>>>>>>>>
>>>>>>>> =========================
>>>>>>>> Thank You in advance,
>>>>>>>> Mateusz
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> gdal-dev mailing list
>>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Best regards,
>>>>>>> Chaitanya kumar CH.
>>>>>>>
>>>>>>> +91-9494447584
>>>>>>> 17.2416N 80.1426E
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/31f3a93a/attachment-0001.html
From jimp at ittvis.com  Thu Aug 11 18:21:27 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Fri Aug 12 20:03:25 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <201108112008.17631.even.rouault@mines-paris.org>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
Message-ID: <B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>


Even,

Thanks for the suggestion, but if I've implemented your
suggestion properly, it has not solved the underlying problem.

>I'm not sure how you've compiled the gdal_warp.cpp, but if you didn't
>use the provided swig/java/GNUmakefile, there's one point you must be
>very careful that is mentionned at the bottom of that makefile :

To create a .so file from source in Android, you generally use the
ndk-build utility along with one or more Android.mk and Application.mk
files.  I execute the standard make/make install from 
within the swig/java directory, then I compile and link gdal_wrap.cpp 
within the context of a separate ndk-build process.

Android NDK Release 6 uses GNU Make 3.81 as its build utility.

The compiler in my case is arm-linux-androideabi-g++ (GCC) 4.4.3.

The loader is GNU ld (GNU Binutils) 2.19.

># Do not remove -fno-strict-aliasing while SWIG generates weird code
>in upcast methods
># See http://trac.osgeo.org/gdal/changeset/16006

>That would be a plausible cause for the crash, since in your
>particular case the GetMetadataItem() method is in the MajorObject
>class, so the Dataset object needs to call the SWIGDatasetUpcast()
>method...

Indeed I was lacking the -fno-strict-aliasing switch in the C++ flags in
my 
Android.mk file.

However, I've added this switch to both LOCAL_CFLAGS and LOCAL_CPPFLAGS 
for the libgdaljni.so build and I continue to get the error during 
execution.

To add some more info to my original message, the actual error comes
from 
within Java_org_gdal_gdal_gdalJNI_MajorObject_1GetMetadataItem_1_1SWIG10
in 
gdal_wrap.cpp on the call to jenv->GetStringUTFChars(jarg2, 0).  First a
JNI 
warning is issued, then the access violation appears to occur before
that
function can return, or at least before a debug statement I've added
after
the call can send its output to the Android LogCat output. 

The error that's issued is related to jarg2 which is supposed to be a
jstring, versus the jarg1 argument you mentioned which requires the
upcast to GDALMajorObjectShadow.

I think I'll need to further debug the pointers that are being passed
down to the *GetMetadataItem*1SWIG10* function.  None of them look 
outrageous at first glance.

Again, there's every reason to believe I'm missing something that's
otherwise obvious to the experts so please feel free to continue
sending ideas my way!

Jim P.
From nhatzop at gmail.com  Thu Aug 11 19:56:22 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Aug 12 21:16:52 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
Message-ID: <CALDJGKArcOB-2_tJiiOjA8i+NXqURE1xkZbYD_uwT+VeYExQOw@mail.gmail.com>

Did you follow these instructions?

http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix

this command must work:

java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/build/apps gdalinfo

as the instruction are saying:
*With luck you will see the gdalinfo usage message. *

and try to see a gdalinfo of a file

--Nikos Hatzopoulos

On Thu, Aug 11, 2011 at 3:21 PM, Jim Pendleton <jimp@ittvis.com> wrote:

>
> Even,
>
> Thanks for the suggestion, but if I've implemented your
> suggestion properly, it has not solved the underlying problem.
>
> >I'm not sure how you've compiled the gdal_warp.cpp, but if you didn't
> >use the provided swig/java/GNUmakefile, there's one point you must be
> >very careful that is mentionned at the bottom of that makefile :
>
> To create a .so file from source in Android, you generally use the
> ndk-build utility along with one or more Android.mk and Application.mk
> files.  I execute the standard make/make install from
> within the swig/java directory, then I compile and link gdal_wrap.cpp
> within the context of a separate ndk-build process.
>
> Android NDK Release 6 uses GNU Make 3.81 as its build utility.
>
> The compiler in my case is arm-linux-androideabi-g++ (GCC) 4.4.3.
>
> The loader is GNU ld (GNU Binutils) 2.19.
>
> ># Do not remove -fno-strict-aliasing while SWIG generates weird code
> >in upcast methods
> ># See http://trac.osgeo.org/gdal/changeset/16006
>
> >That would be a plausible cause for the crash, since in your
> >particular case the GetMetadataItem() method is in the MajorObject
> >class, so the Dataset object needs to call the SWIGDatasetUpcast()
> >method...
>
> Indeed I was lacking the -fno-strict-aliasing switch in the C++ flags in
> my
> Android.mk file.
>
> However, I've added this switch to both LOCAL_CFLAGS and LOCAL_CPPFLAGS
> for the libgdaljni.so build and I continue to get the error during
> execution.
>
> To add some more info to my original message, the actual error comes
> from
> within Java_org_gdal_gdal_gdalJNI_MajorObject_1GetMetadataItem_1_1SWIG10
> in
> gdal_wrap.cpp on the call to jenv->GetStringUTFChars(jarg2, 0).  First a
> JNI
> warning is issued, then the access violation appears to occur before
> that
> function can return, or at least before a debug statement I've added
> after
> the call can send its output to the Android LogCat output.
>
> The error that's issued is related to jarg2 which is supposed to be a
> jstring, versus the jarg1 argument you mentioned which requires the
> upcast to GDALMajorObjectShadow.
>
> I think I'll need to further debug the pointers that are being passed
> down to the *GetMetadataItem*1SWIG10* function.  None of them look
> outrageous at first glance.
>
> Again, there's every reason to believe I'm missing something that's
> otherwise obvious to the experts so please feel free to continue
> sending ideas my way!
>
> Jim P.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/6fa74adf/attachment.html
From jimp at ittvis.com  Thu Aug 11 20:08:07 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Fri Aug 12 21:31:14 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <CALDJGKArcOB-2_tJiiOjA8i+NXqURE1xkZbYD_uwT+VeYExQOw@mail.gmail.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com><201108112008.17631.even.rouault@mines-paris.org><B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
	<CALDJGKArcOB-2_tJiiOjA8i+NXqURE1xkZbYD_uwT+VeYExQOw@mail.gmail.com>
Message-ID: <B1B624F7C110834B96594065A74F3A54130092D9@gemini.rsinc.com>

Nikos,

 

Building for Java in a standard Linux environment is a little different
from building in the

Android environment.  We've used as a starting point these instructions:

 

http://trac.osgeo.org/gdal/wiki/BuildingForAndroid

 

Though in theory they could be buillt, the individual stand-alone apps
such as gdalinfo

must be run from a command line (I believe) which is lacking in the
Android environment, without

rooting.  Rooting is not presently an option for me for various
administrative reasons.

 

I'm actually commenting out the builds for the stand-alone applications.

 

What I'm really building in this case is the libgdaljni.so file (along
with libjdalconst.so) that can

be loaded and executed from an Android activity.  Our libgdaljni.so
contains the link results of

from libgdal.a, gdal_wrap.o and some kakadu library routines.

 

If there's an entry point within the libgdaljni.so that will perform the
equivalent functionality as

the stand-alone gdalinfo executable, I could try that.

 

Jim P.

 

________________________________

From: Nikolaos Hatzopoulos [mailto:nhatzop@gmail.com] 
Sent: Thursday, August 11, 2011 5:56 PM
To: Jim Pendleton
Cc: Even Rouault; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] SWIG JNI binding question with GetMetadataItem
function

 

Did you follow these instructions?

http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix

this command must work:

java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/build/apps gdalinfo

as the instruction are saying:
With luck you will see the gdalinfo usage message. 

and try to see a gdalinfo of a file

--Nikos Hatzopoulos

On Thu, Aug 11, 2011 at 3:21 PM, Jim Pendleton <jimp@ittvis.com> wrote:


Even,

Thanks for the suggestion, but if I've implemented your
suggestion properly, it has not solved the underlying problem.


>I'm not sure how you've compiled the gdal_warp.cpp, but if you didn't
>use the provided swig/java/GNUmakefile, there's one point you must be
>very careful that is mentionned at the bottom of that makefile :

To create a .so file from source in Android, you generally use the
ndk-build utility along with one or more Android.mk and Application.mk
files.  I execute the standard make/make install from
within the swig/java directory, then I compile and link gdal_wrap.cpp
within the context of a separate ndk-build process.

Android NDK Release 6 uses GNU Make 3.81 as its build utility.

The compiler in my case is arm-linux-androideabi-g++ (GCC) 4.4.3.

The loader is GNU ld (GNU Binutils) 2.19.


># Do not remove -fno-strict-aliasing while SWIG generates weird code
>in upcast methods
># See http://trac.osgeo.org/gdal/changeset/16006

>That would be a plausible cause for the crash, since in your
>particular case the GetMetadataItem() method is in the MajorObject
>class, so the Dataset object needs to call the SWIGDatasetUpcast()
>method...

Indeed I was lacking the -fno-strict-aliasing switch in the C++ flags in
my
Android.mk file.

However, I've added this switch to both LOCAL_CFLAGS and LOCAL_CPPFLAGS
for the libgdaljni.so build and I continue to get the error during
execution.

To add some more info to my original message, the actual error comes
from
within Java_org_gdal_gdal_gdalJNI_MajorObject_1GetMetadataItem_1_1SWIG10
in
gdal_wrap.cpp on the call to jenv->GetStringUTFChars(jarg2, 0).  First a
JNI
warning is issued, then the access violation appears to occur before
that
function can return, or at least before a debug statement I've added
after
the call can send its output to the Android LogCat output.

The error that's issued is related to jarg2 which is supposed to be a
jstring, versus the jarg1 argument you mentioned which requires the
upcast to GDALMajorObjectShadow.

I think I'll need to further debug the pointers that are being passed
down to the *GetMetadataItem*1SWIG10* function.  None of them look
outrageous at first glance.

Again, there's every reason to believe I'm missing something that's
otherwise obvious to the experts so please feel free to continue
sending ideas my way!


Jim P.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/9adf7af4/attachment-0001.html
From nhatzop at gmail.com  Thu Aug 11 21:36:50 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Aug 12 23:02:46 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092D9@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
	<CALDJGKArcOB-2_tJiiOjA8i+NXqURE1xkZbYD_uwT+VeYExQOw@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A54130092D9@gemini.rsinc.com>
Message-ID: <CALDJGKDc+32chv8Nw86z0kKCN3=rRfs2z5GqmMbKm=4zBi=HpA@mail.gmail.com>

how you can build a vm in android platform?
Because I know android is running on linux but again it
depends on the device. If they start building cellphone based
on atom processor you must follow the same instruction as a 386 processor.

--Nikos Hatzopoulos

On Thu, Aug 11, 2011 at 5:08 PM, Jim Pendleton <jimp@ittvis.com> wrote:

>  Nikos,****
>
> ** **
>
> Building for Java in a standard Linux environment is a little different
> from building in the****
>
> Android environment.  We?ve used as a starting point these instructions:**
> **
>
> ** **
>
> http://trac.osgeo.org/gdal/wiki/BuildingForAndroid****
>
> ** **
>
> Though in theory they could be buillt, the individual stand-alone apps such
> as gdalinfo****
>
> must be run from a command line (I believe) which is lacking in the Android
> environment, without****
>
> rooting.  Rooting is not presently an option for me for various
> administrative reasons.****
>
> ** **
>
> I?m actually commenting out the builds for the stand-alone applications.**
> **
>
> ** **
>
> What I?m really building in this case is the libgdaljni.so file (along with
> libjdalconst.so) that can****
>
> be loaded and executed from an Android activity.  Our libgdaljni.so
> contains the link results of****
>
> from libgdal.a, gdal_wrap.o and some kakadu library routines.****
>
> ** **
>
> If there?s an entry point within the libgdaljni.so that will perform the
> equivalent functionality as****
>
> the stand-alone gdalinfo executable, I could try that.****
>
> ** **
>
> Jim P.****
>
> ** **
>  ------------------------------
>
> *From:* Nikolaos Hatzopoulos [mailto:nhatzop@gmail.com]
> *Sent:* Thursday, August 11, 2011 5:56 PM
> *To:* Jim Pendleton
> *Cc:* Even Rouault; gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] SWIG JNI binding question with GetMetadataItem
> function****
>
> ** **
>
> Did you follow these instructions?
>
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
>
> this command must work:****
>
> java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/build/apps gdalinfo****
>
> as the instruction are saying:
> *With luck you will see the gdalinfo usage message. *
>
> and try to see a gdalinfo of a file
>
> --Nikos Hatzopoulos****
>
> On Thu, Aug 11, 2011 at 3:21 PM, Jim Pendleton <jimp@ittvis.com> wrote:***
> *
>
>
> Even,
>
> Thanks for the suggestion, but if I've implemented your
> suggestion properly, it has not solved the underlying problem.****
>
>
> >I'm not sure how you've compiled the gdal_warp.cpp, but if you didn't
> >use the provided swig/java/GNUmakefile, there's one point you must be
> >very careful that is mentionned at the bottom of that makefile :****
>
> To create a .so file from source in Android, you generally use the
> ndk-build utility along with one or more Android.mk and Application.mk
> files.  I execute the standard make/make install from
> within the swig/java directory, then I compile and link gdal_wrap.cpp
> within the context of a separate ndk-build process.
>
> Android NDK Release 6 uses GNU Make 3.81 as its build utility.
>
> The compiler in my case is arm-linux-androideabi-g++ (GCC) 4.4.3.
>
> The loader is GNU ld (GNU Binutils) 2.19.****
>
>
> ># Do not remove -fno-strict-aliasing while SWIG generates weird code
> >in upcast methods
> ># See http://trac.osgeo.org/gdal/changeset/16006
>
> >That would be a plausible cause for the crash, since in your
> >particular case the GetMetadataItem() method is in the MajorObject
> >class, so the Dataset object needs to call the SWIGDatasetUpcast()
> >method...****
>
> Indeed I was lacking the -fno-strict-aliasing switch in the C++ flags in
> my
> Android.mk file.
>
> However, I've added this switch to both LOCAL_CFLAGS and LOCAL_CPPFLAGS
> for the libgdaljni.so build and I continue to get the error during
> execution.
>
> To add some more info to my original message, the actual error comes
> from
> within Java_org_gdal_gdal_gdalJNI_MajorObject_1GetMetadataItem_1_1SWIG10
> in
> gdal_wrap.cpp on the call to jenv->GetStringUTFChars(jarg2, 0).  First a
> JNI
> warning is issued, then the access violation appears to occur before
> that
> function can return, or at least before a debug statement I've added
> after
> the call can send its output to the Android LogCat output.
>
> The error that's issued is related to jarg2 which is supposed to be a
> jstring, versus the jarg1 argument you mentioned which requires the
> upcast to GDALMajorObjectShadow.
>
> I think I'll need to further debug the pointers that are being passed
> down to the *GetMetadataItem*1SWIG10* function.  None of them look
> outrageous at first glance.
>
> Again, there's every reason to believe I'm missing something that's
> otherwise obvious to the experts so please feel free to continue
> sending ideas my way!****
>
>
> Jim P.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
> ** **
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110811/c2e5e8df/attachment.html
From chaitanya.ch at gmail.com  Fri Aug 12 09:15:02 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug 13 11:24:59 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
	<CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
Message-ID: <CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>

Mateusz,

Refer to OGR's VRT format driver page.
http://www.gdal.org/ogr/drv_vrt.html

2011/8/11 Mateusz K?dzior <matandked@gmail.com>

> Hi Chaitanya,
>
> I try to add full path to csv file - is it correct?
>
> ===================================================NEW VRT
> FILE====================================
> <OGRVRTDataSource>
>     <OGRVRTLayer name="evap_OBCXYZn">
>
> <SrcDataSource>"/media/windows/studia/2_sem_mgr/mgr/prof_Zawadzki/dods/gldas/00Z07Apr2009_00Z15Apr2009/evap_OBCXYZn.csv"</SrcDataSource>
>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude"
> y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
>
> ================================================================================================
>
> When I try use ogrinfor I get an error message:
>
> FAILURE:
> Unable to open datasource `evap_OBCXYZn.vrt' with the following drivers.
>
> When I use the same tool at csv file I get:
>
> =================================
>
> INFO: Open of `evap_OBCXYZn.csv'
>       using driver `CSV' successful.
> 1: evap_OBCXYZn (None)
>
> ================================
>
> The CSV file contain such information:
>
> ============================
> Longitude,Latitude,Name
> 20.132145,52.4227439,1.78132e-05
> 20.382145,52.4227439,1.89083e-05
> ...
> and so on..
> ============================
>
> How I can change it to get vector-point layer? As I wrote I can only get a
> layer without geometry if I point to csv file.
>
> ============
> Best regards,
> Mateusz
>
>
>
> W dniu 11 sierpnia 2011 10:04 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
> What is the output of ogrinfo on the .vrt file?
>>
>>
>> 2011/8/11 Mateusz K?dzior <matandked@gmail.com>
>>
>>> Hi Chaitanya,
>>>
>>> I say that I don't need to create VRT file, but I was wrong. When I try
>>> to run ogr2ogr utility:
>>> *
>>> ogr2ogr -f GML output_file.gml input_file.csv*
>>>
>>> I discover that created file contain only table - if I choose ESRI
>>> shapefile as output, I get only dbf file.
>>>
>>> So i try to generate such file:
>>>
>>>
>>> ================================================================================
>>> <OGRVRTDataSource>
>>>     <OGRVRTLayer name="evap_OBC_OBCXYZn">
>>>         <SrcDataSource>evap_OBC_OBCXYZn.csv</SrcDataSource>
>>>
>>>         <GeometryType>wkbPoint</GeometryType>
>>>         <LayerSRS>WGS84</LayerSRS>
>>>         <GeometryField encoding="PointFromColumns" x="Longitude"
>>> y="Latitude"/>
>>>     </OGRVRTLayer>
>>> </OGRVRTDataSource>
>>>
>>> =================================================================================
>>>
>>> but:
>>>
>>>    - if I type .vrt file as input I get an empty GML file
>>>    - if I I type .csv file as input I get an output which contain only
>>>    table (without geometry)
>>>
>>> How I can run it properly?
>>> Which values are allowed in <GeometryField encoding> property?
>>> ===================
>>> Best regards,
>>> Mateusz
>>>
>>> W dniu 10 sierpnia 2011 05:58 u?ytkownik Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> napisa?:
>>>
>>> Mateusz,
>>>>
>>>> You have to change the OGRVRTLayer name property to point to the file
>>>> name without the extension.  Also change the SrcDataSource element.
>>>>
>>>> FYI, this process creates a vector file with points. gdal_polygonize
>>>> produces polygons.
>>>>
>>>>
>>>> 2011/8/10 Mateusz K?dzior <matandked@gmail.com>
>>>>
>>>>> Hi again,
>>>>>
>>>>> is it mandatory to create such file?
>>>>> Regarding to information on GDAL/OGR page should I create simple text
>>>>> file which contains only other OGRVRTLayer name property :
>>>>>
>>>>> <OGRVRTDataSource>
>>>>>     <OGRVRTLayer name="test">
>>>>>         <SrcDataSource>test.csv</SrcDataSource>
>>>>>         <GeometryType>wkbPoint</GeometryType>
>>>>>         <LayerSRS>WGS84</LayerSRS>
>>>>>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>>>>>     </OGRVRTLayer>
>>>>> </OGRVRTDataSource>
>>>>>
>>>>> ==============
>>>>> Best regards,
>>>>> Mateusz
>>>>>
>>>>> W dniu 9 sierpnia 2011 20:13 u?ytkownik Chaitanya kumar CH <
>>>>> chaitanya.ch@gmail.com> napisa?:
>>>>>
>>>>>> Create a text file with just the header. Use the cat command to join
>>>>>> this file and the xyz file.
>>>>>> $ cat HeaderFile.csv file1.csv > file1.cHi sv
>>>>>>
>>>>>> You can repeat this on all files in a shell script.
>>>>>>
>>>>>> Otherwise add the following line in the gdal2xyz.py script at line 144
>>>>>> [1].
>>>>>>
>>>>>> dst_fh.write( 'Longitude,Latitude,Name' )
>>>>>>
>>>>>> You will also have to create a separate vrt file for each csv file.
>>>>>> The SrcDataSource element value changes for each file.
>>>>>>
>>>>>> [1]:
>>>>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal2xyz.py?rev=21127#L145
>>>>>>
>>>>>>
>>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>>
>>>>>>> Chaitanya,
>>>>>>>
>>>>>>> if I understand properly, I need to add one line to each of processed
>>>>>>> files.
>>>>>>> How I can do it quickly? Is there any option in gdal2xyz.py script?
>>>>>>>
>>>>>>> If no - what would You recommend?
>>>>>>> I think about sed utility, but it's general difficult in use.
>>>>>>>
>>>>>>> When I am thinking about Python I see only one possibility - load
>>>>>>> each file to variable and then assign to another first line plus variable
>>>>>>> and at last - save it.
>>>>>>>
>>>>>>> ==============
>>>>>>> Best Regards,
>>>>>>> Mateusz
>>>>>>>
>>>>>>> W dniu 9 sierpnia 2011 13:38 u?ytkownik Chaitanya kumar CH <
>>>>>>> chaitanya.ch@gmail.com> napisa?:
>>>>>>>
>>>>>>> Mateusz,
>>>>>>>>
>>>>>>>> gdal2xyz.py creates space delimited fields. Consider running it with
>>>>>>>> the -csv option to delimit it with comma.
>>>>>>>> Now you can almost use it as a csv format vector file. You just need
>>>>>>>> to add a header row and define a small VRT file as described in OGR's CSV
>>>>>>>> driver page[1].
>>>>>>>> Run ogrinfo and ogr2ogr on the .vrt file to check the file.
>>>>>>>>
>>>>>>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>>>>>>
>>>>>>>> 2011/8/9 Mateusz K?dzior <matandked@gmail.com>
>>>>>>>>
>>>>>>>>> Hello,
>>>>>>>>>
>>>>>>>>> I would like to show value of each raster cell as label. My idea (I
>>>>>>>>> don't know any plugin or any functionality in GDAL/OGR which allow to do it
>>>>>>>>> easier) is to export raster using gdal2xyz.py into coordinates-value format
>>>>>>>>> and then save it as vector (GML or shapefile). For this second task, I try
>>>>>>>>> to use
>>>>>>>>>
>>>>>>>>> =================================================================================================================================================
>>>>>>>>> gdal_polygonize.py:
>>>>>>>>> gdal_polygonize.py rainfXYZ.txt rainf.shp Creating output rainf.shp
>>>>>>>>> of format GML. 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>>>>>>>
>>>>>>>>> =================================================================================================================================================
>>>>>>>>> unfortunately I am unable to load created file (even if I change
>>>>>>>>> the extension to .gml)
>>>>>>>>> ogr2ogr tool don't even recognize this format.
>>>>>>>>>
>>>>>>>>> =========================
>>>>>>>>> Thank You in advance,
>>>>>>>>> Mateusz
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> gdal-dev mailing list
>>>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Best regards,
>>>>>>>> Chaitanya kumar CH.
>>>>>>>>
>>>>>>>> +91-9494447584
>>>>>>>> 17.2416N 80.1426E
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Best regards,
>>>>>> Chaitanya kumar CH.
>>>>>>
>>>>>> +91-9494447584
>>>>>> 17.2416N 80.1426E
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110812/bc2d2349/attachment-0001.html
From matandked at gmail.com  Fri Aug 12 09:55:09 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Sat Aug 13 12:00:41 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
	<CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
	<CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>
Message-ID: <CANcjKS+XTJmB08R-7PrEVKWpey=xjhC0HxDJPsCaJFJj+Mhf6A@mail.gmail.com>

Hi Chaitanya,

but there is no example with CSV file stored in local hard disc.
I see an example with shp file - there is no full path to it...
but as I tell, when I leave only filename of CSV and use ogrinfo tool on
such VRT file, I get information about empty file without any geometry or
tables on it.

==========
Best regards,
Mateusz



> Mateusz,
>
> Refer to OGR's VRT format driver page.
> http://www.gdal.org/ogr/drv_vrt.html
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110812/270cca4c/attachment.html
From peifer at gmx.eu  Fri Aug 12 10:24:58 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Aug 13 12:32:11 2011
Subject: [gdal-dev] gdal_translate eats projection parameter values
Message-ID: <4E4537BA.5040004@gmx.eu>


Hi,

PARAMETER["Central_Meridian",10.0] from the projection file comes out 
as: PARAMETER["longitude_of_center",0]

PARAMETER["Latitude_Of_Origin",52.0] is changed to 
PARAMETER["latitude_of_center",0]

See the details below. Is there something wrong with my projection file 
or rather with GDAL?

Wondering, Hermann

PS: I am using gdal from trunk, revision 22757 from 
2011-07-19T18:57:35.878941Z

PPS: I reported a somewhat similar (?) issue 2 years ago, see 
http://trac.osgeo.org/gdal/ticket/3016


-----------------------

$ cat dummy.asc
ncols        1
nrows        1
xllcorner    0.0
yllcorner    0.0
cellsize     50.0
NODATA_value -9999
-9999
$
$ cat ETRS_1989_LAEA_L52_M10.prj
PROJCS["ETRS_1989_LAEA_L52_M10",GEOGCS["GCS_ETRS_1989",DATUM["D_ETRS_1989",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",4321000.0],PARAMETER["False_Northing",3210000.0],PARAMETER["Central_Meridian",10.0],PARAMETER["Latitude_Of_Origin",52.0],UNIT["Meter",1.0]]$
$
$ gdal_translate dummy.asc dummy.tif -a_srs ETRS_1989_LAEA_L52_M10.prj
Input file size is 1, 1
0...10...20...30...40...50...60...70...80...90...100 - done.
$
$ gdalinfo dummy.tif
Driver: GTiff/GeoTIFF
Files: dummy.tif
Size is 1, 1
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
     GEOGCS["GCS_ETRS_1989",
         DATUM["D_ETRS_1989",
             SPHEROID["GRS_1980",6378137,298.257222101]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",0],
     PARAMETER["longitude_of_center",0],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (0.000000000000000,50.000000000000000)
Pixel Size = (50.000000000000000,-50.000000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   0.0000000,  50.0000000) ( 43d40' 8.77"W, 27d18'43.27"S)
Lower Left  (   0.0000000,   0.0000000) ( 43d40' 9.28"W, 27d18'44.80"S)
Upper Right (  50.0000000,  50.0000000) ( 43d40' 6.89"W, 27d18'43.45"S)
Lower Right (  50.0000000,   0.0000000) ( 43d40' 7.41"W, 27d18'44.97"S)
Center      (  25.0000000,  25.0000000) ( 43d40' 8.09"W, 27d18'44.12"S)
Band 1 Block=1x1 Type=Int32, ColorInterp=Gray
   NoData Value=-9999

From even.rouault at mines-paris.org  Fri Aug 12 11:37:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Aug 13 13:48:41 2011
Subject: [gdal-dev] gdal_translate eats projection parameter values
In-Reply-To: <4E4537BA.5040004@gmx.eu>
References: <4E4537BA.5040004@gmx.eu>
Message-ID: <1313163439.4e4548afe30c6@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

In fact, it is not a bug, but just one of those annoying subtelties you
encounter when playing with projections.

Your .prj file (as most files with .prj extension) doesn't contain the
"standard" OGC WKT formulation that GDAL/OGR uses internally, but a WKT in its
ESRI formulation. You can note the differences in the naming of the parameter :
latitude_of_center(OGC WKT) vs Latitude_Of_Origin (ESRI WKT),
longitude_of_center (OGC WKT) vs Central_Meridian (ESRI WKT)

So you have to specify the formulation to use to GDAL by adding the ESRI::
prefix before the filename, so that GDAL can "morphFromESRI". This is documented
here :

http://gdal.org/ogr/classOGRSpatialReference.html#ec3c6a49533fe457ddc763d699ff8796
.

The SetFromUserInput() is the method used to parse the value of the -a_srs
option.

So :
gdal_translate dummy.asc dummy.tif -a_srs ESRI::ETRS_1989_LAEA_L52_M10.prj

Or you could just copy ETRS_1989_LAEA_L52_M10.prj as dummy.prj, because the
AAIGRID driver will automatically consider that a .prj file is a ESRI one.

Best regards,

Even

>
> Hi,
>
> PARAMETER["Central_Meridian",10.0] from the projection file comes out
> as: PARAMETER["longitude_of_center",0]
>
> PARAMETER["Latitude_Of_Origin",52.0] is changed to
> PARAMETER["latitude_of_center",0]
>
> See the details below. Is there something wrong with my projection file
> or rather with GDAL?
>
> Wondering, Hermann
>
> PS: I am using gdal from trunk, revision 22757 from
> 2011-07-19T18:57:35.878941Z
>
> PPS: I reported a somewhat similar (?) issue 2 years ago, see
> http://trac.osgeo.org/gdal/ticket/3016
>
>
> -----------------------
>
> $ cat dummy.asc
> ncols        1
> nrows        1
> xllcorner    0.0
> yllcorner    0.0
> cellsize     50.0
> NODATA_value -9999
> -9999
> $
> $ cat ETRS_1989_LAEA_L52_M10.prj
>
PROJCS["ETRS_1989_LAEA_L52_M10",GEOGCS["GCS_ETRS_1989",DATUM["D_ETRS_1989",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",4321000.0],PARAMETER["False_Northing",3210000.0],PARAMETER["Central_Meridian",10.0],PARAMETER["Latitude_Of_Origin",52.0],UNIT["Meter",1.0]]$
> $
> $ gdal_translate dummy.asc dummy.tif -a_srs ETRS_1989_LAEA_L52_M10.prj
> Input file size is 1, 1
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> $
> $ gdalinfo dummy.tif
> Driver: GTiff/GeoTIFF
> Files: dummy.tif
> Size is 1, 1
> Coordinate System is:
> PROJCS["ETRS_1989_LAEA_L52_M10",
>      GEOGCS["GCS_ETRS_1989",
>          DATUM["D_ETRS_1989",
>              SPHEROID["GRS_1980",6378137,298.257222101]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433]],
>      PROJECTION["Lambert_Azimuthal_Equal_Area"],
>      PARAMETER["latitude_of_center",0],
>      PARAMETER["longitude_of_center",0],
>      PARAMETER["false_easting",4321000],
>      PARAMETER["false_northing",3210000],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]]]
> Origin = (0.000000000000000,50.000000000000000)
> Pixel Size = (50.000000000000000,-50.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (   0.0000000,  50.0000000) ( 43d40' 8.77"W, 27d18'43.27"S)
> Lower Left  (   0.0000000,   0.0000000) ( 43d40' 9.28"W, 27d18'44.80"S)
> Upper Right (  50.0000000,  50.0000000) ( 43d40' 6.89"W, 27d18'43.45"S)
> Lower Right (  50.0000000,   0.0000000) ( 43d40' 7.41"W, 27d18'44.97"S)
> Center      (  25.0000000,  25.0000000) ( 43d40' 8.09"W, 27d18'44.12"S)
> Band 1 Block=1x1 Type=Int32, ColorInterp=Gray
>    NoData Value=-9999
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From peifer at gmx.eu  Fri Aug 12 13:27:01 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Aug 13 15:43:58 2011
Subject: [gdal-dev] gdal_translate eats projection parameter values
In-Reply-To: <1313163439.4e4548afe30c6@webmail.free.fr>
References: <4E4537BA.5040004@gmx.eu>
	<1313163439.4e4548afe30c6@webmail.free.fr>
Message-ID: <4E456265.9020402@gmx.eu>

On 12/08/2011 17:37, Even Rouault wrote:
> Selon Hermann Peifer<peifer@gmx.eu>:
>
> In fact, it is not a bug, but just one of those annoying subtelties you
> encounter when playing with projections.
>
(...)
>
> So :
> gdal_translate dummy.asc dummy.tif -a_srs ESRI::ETRS_1989_LAEA_L52_M10.prj
>
> Or you could just copy ETRS_1989_LAEA_L52_M10.prj as dummy.prj, because the
> AAIGRID driver will automatically consider that a .prj file is a ESRI one.
>
> Best regards,
>
> Even
>

Frank, Even,

Thanks for the quick response, I will do as you suggested. I wasn't 
aware of the ESRI:: prefix and wrongly assumed that GDAL would always 
auto-detect ESRI-isms in the projection files and morph them.

The background of the issue is that we disseminate a series of 
GDAL-generated GeoTIFFs (all in EPSG:3035) via a public website, 
http://www.eea.europa.eu/data-and-maps/data#c17=raster+data

 From experience, I know that ESRI users have trouble with some 
projection and parameter names generated by GDAL and vice versa. Is it 
possible to convince GDAL to store coordinate system information in a 
way that would be "ESRI-friendly" and "GDAL-friendly" at the same time 
(and follow the OGC-WKT "standard", as far as it exists ... I can't find 
it at http://www.opengeospatial.org/standards) ?

Thanks again for your time, Hermann
From warmerdam at pobox.com  Fri Aug 12 13:49:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug 13 16:07:27 2011
Subject: [gdal-dev] gdal_translate eats projection parameter values
In-Reply-To: <4E456265.9020402@gmx.eu>
References: <4E4537BA.5040004@gmx.eu>
	<1313163439.4e4548afe30c6@webmail.free.fr>
	<4E456265.9020402@gmx.eu>
Message-ID: <CA+YzLBc1q0Layefp9Du5Sfz1wzrF7xggQS1qypa4-pA+ecHy_Q@mail.gmail.com>

On Fri, Aug 12, 2011 at 10:27 AM, Hermann Peifer <peifer@gmx.eu> wrote:
> Thanks for the quick response, I will do as you suggested. I wasn't aware of
> the ESRI:: prefix and wrongly assumed that GDAL would always auto-detect
> ESRI-isms in the projection files and morph them.
>
> The background of the issue is that we disseminate a series of
> GDAL-generated GeoTIFFs (all in EPSG:3035) via a public website,
> http://www.eea.europa.eu/data-and-maps/data#c17=raster+data
>
> From experience, I know that ESRI users have trouble with some projection
> and parameter names generated by GDAL and vice versa. Is it possible to
> convince GDAL to store coordinate system information in a way that would be
> "ESRI-friendly" and "GDAL-friendly" at the same time (and follow the OGC-WKT
> "standard", as far as it exists ... I can't find it at
> http://www.opengeospatial.org/standards) ?
>
> Thanks again for your time, Hermann

Hermann,

In some cases the GeoTIFF driver will write a specially formatted
PSC Citation geokey in the form "ESRI PE String = PROJ[...]"
with the ESRI PE string for the coordinate system.  It does this
if the code feels we are unable to represent the coordinate system
accurately via GeoTIFF tags.

You could likely mess around in a way to force a particular PE
string to get written by changing the corresponding code in
gdal/frmts/gtiff/gt_wkt_srs.cpp (search for ESRI PE String
and the section that *writes* it).

In the case discussed in this thread the problem was really
that GDAL never properly understood the coordinate system.

Keep in mind that ArcGIS's support for GDAL GeoTIFFs
is pretty good and getting better as it uses GDAL for GeoTIFF
access.  I'd rather discourage doing anything to hacky in this
area.  (It's already pretty messy).

Best regards,




-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Fri Aug 12 17:02:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Aug 13 19:31:43 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
Message-ID: <201108122302.16113.even.rouault@mines-paris.org>

> 
> Indeed I was lacking the -fno-strict-aliasing switch in the C++ flags in
> my
> Android.mk file.
> 
> However, I've added this switch to both LOCAL_CFLAGS and LOCAL_CPPFLAGS
> for the libgdaljni.so build and I continue to get the error during
> execution.

At least now you have eliminated one potential source for issues ;-)

> 
> To add some more info to my original message, the actual error comes
> from
> within Java_org_gdal_gdal_gdalJNI_MajorObject_1GetMetadataItem_1_1SWIG10
> in
> gdal_wrap.cpp on the call to jenv->GetStringUTFChars(jarg2, 0).  First a
> JNI
> warning is issued, then the access violation appears to occur before
> that
> function can return, or at least before a debug statement I've added
> after
> the call can send its output to the Android LogCat output.

This is really weird. Did you test that in a Linux environement that the same 
code, with the same GDAL driver queried, works fine (hopefully yes...) ?

> 
> The error that's issued is related to jarg2 which is supposed to be a
> jstring, versus the jarg1 argument you mentioned which requires the
> upcast to GDALMajorObjectShadow.
> 
> I think I'll need to further debug the pointers that are being passed
> down to the *GetMetadataItem*1SWIG10* function.  None of them look
> outrageous at first glance.
> 
> Again, there's every reason to believe I'm missing something that's
> otherwise obvious to the experts so please feel free to continue
> sending ideas my way!

My only suggestion at that point is to use GetMetadata() instead to see if it 
works better. You'd be able to extract the item you are looking for in the 
list of strings it returns.

But I'm afraid that you'll encounter similar issues to one sooner or later 
with other JNI calls. There must be some memory corruption at some point. 
Obviously, there's no Valgrind like tool for Android... ?

> 
> Jim P.
From chaitanya.ch at gmail.com  Sat Aug 13 02:05:57 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Aug 14 05:05:17 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSJ_WJcbinGL4Y10Mkycry8ujvcprg6d7=PjMVCBHJpPQw@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
	<CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
	<CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>
	<CANcjKS+XTJmB08R-7PrEVKWpey=xjhC0HxDJPsCaJFJj+Mhf6A@mail.gmail.com>
	<CAMKgpOYQyW+6U+bo1UBKvPdZgDapdBtJ0qE5t+g72s6rdT_aXw@mail.gmail.com>
	<CANcjKSJ_WJcbinGL4Y10Mkycry8ujvcprg6d7=PjMVCBHJpPQw@mail.gmail.com>
Message-ID: <CAMKgpOaUNpDXmh_k8S+x=-XsHsBe8y-bu=rb0GWgcm1=OZyhZQ@mail.gmail.com>

Mateusz,

This is what I did to process evap_OBC.asc ...

1. Run the command "gdal2xyz.py -csv evap_OBC.asc evap_OBC.csv". I got a csv
file.
2. Edited the file evap_OBC.csv to add the line "Longitude,Latitude,Value"
(without the quotes) at the beginning.
3. Created a file named evap_OBC.vrt with the following content...
<OGRVRTDataSource>
    <OGRVRTLayer name="evap_OBC">
        <SrcDataSource>evap_OBC.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <GeometryField encoding="PointFromColumns" x="Longitude"
y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>
4. Run the command "ogr2ogr -select Value evap_OBC.shp evap_OBC.vrt". I got
the file evap_OBC.shp and two other associated files.

In step 3, if I wanted to mention the absolute path instead of the relative
path of the file 'evap_OBC.csv', I would have added the attribute
'relativeToVRT=0' to the SrcDataSource element like so.
<SrcDataSource relativeToVRT="0">evap_OBC.csv</SrcDataSource>

2011/8/13 Mateusz K?dzior <matandked@gmail.com>

> Hi Chaitanya,
>
> I send only raster (without XYZ data).
>
> =========
> Best regards,
> Mateusz
>
> W dniu 12 sierpnia 2011 16:02 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
> Mateusz,
>>
>> Send me a couple of your raster files. I'll process them and create a
>> step-by-step instructions including all the scripts I used.
>>
>>
>> 2011/8/12 Mateusz K?dzior <matandked@gmail.com>
>>
>>> Hi Chaitanya,
>>>
>>> but there is no example with CSV file stored in local hard disc.
>>> I see an example with shp file - there is no full path to it...
>>> but as I tell, when I leave only filename of CSV and use ogrinfo tool on
>>> such VRT file, I get information about empty file without any geometry or
>>> tables on it.
>>>
>>> ==========
>>> Best regards,
>>> Mateusz
>>>
>>>
>>>
>>>> Mateusz,
>>>>
>>>> Refer to OGR's VRT format driver page.
>>>> http://www.gdal.org/ogr/drv_vrt.html
>>>>
>>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110813/fbf48294/attachment-0001.html
From matandked at gmail.com  Sat Aug 13 04:20:22 2011
From: matandked at gmail.com (=?ISO-8859-2?Q?Mateusz_K=EAdzior?=)
Date: Sun Aug 14 07:26:59 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CAMKgpOaUNpDXmh_k8S+x=-XsHsBe8y-bu=rb0GWgcm1=OZyhZQ@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
	<CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
	<CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>
	<CANcjKS+XTJmB08R-7PrEVKWpey=xjhC0HxDJPsCaJFJj+Mhf6A@mail.gmail.com>
	<CAMKgpOYQyW+6U+bo1UBKvPdZgDapdBtJ0qE5t+g72s6rdT_aXw@mail.gmail.com>
	<CANcjKSJ_WJcbinGL4Y10Mkycry8ujvcprg6d7=PjMVCBHJpPQw@mail.gmail.com>
	<CAMKgpOaUNpDXmh_k8S+x=-XsHsBe8y-bu=rb0GWgcm1=OZyhZQ@mail.gmail.com>
Message-ID: <CANcjKSKD8rEEA61RJGT66xZ4xxnGbDwT6wgKhmZD16RFmPQ-Bw@mail.gmail.com>

W dniu 13 sierpnia 2011 08:05 u?ytkownik Chaitanya kumar CH <
chaitanya.ch@gmail.com> napisa?:

> Mateusz,
>
> This is what I did to process evap_OBC.asc ...
>
> 1. Run the command "gdal2xyz.py -csv evap_OBC.asc evap_OBC.csv". I got a
> csv file.
> 2. Edited the file evap_OBC.csv to add the line "Longitude,Latitude,Value"
> (without the quotes) at the beginning.
>

This may be a source of problem...
I add in every CSV heading

Longitude,Latitude,Name

(Name instead of Value)



> 3. Created a file named evap_OBC.vrt with the following content...
>
> <OGRVRTDataSource>
>     <OGRVRTLayer name="evap_OBC">
>         <SrcDataSource>evap_OBC.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>
>         <GeometryField encoding="PointFromColumns" x="Longitude"
> y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 4. Run the command "ogr2ogr -select Value evap_OBC.shp evap_OBC.vrt". I got
> the file evap_OBC.shp and two other associated files.
>
> In step 3, if I wanted to mention the absolute path instead of the relative
> path of the file 'evap_OBC.csv', I would have added the attribute
> 'relativeToVRT=0' to the SrcDataSource element like so.
> <SrcDataSource relativeToVRT="0">evap_OBC.csv</SrcDataSource>


So if I would like to insert absolute path I should add:
 <SrcDataSource relativeToVRT="1">"/home/mateuszk/folder/evap_OBC.
>
> csv"</SrcDataSource>




Thank You for support and patient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110813/6c3c1274/attachment.html
From chaitanya.ch at gmail.com  Sat Aug 13 05:42:22 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Aug 14 08:53:45 2011
Subject: [gdal-dev] save raster as point-vector file
In-Reply-To: <CANcjKSKD8rEEA61RJGT66xZ4xxnGbDwT6wgKhmZD16RFmPQ-Bw@mail.gmail.com>
References: <CANcjKSJqypeKA3YBxpvRCP+u2n5zm9VC7SYj8XAQK8Jstk7-=g@mail.gmail.com>
	<CAMKgpOa8WAjLXKNeg4=_idYo=V0s4hj8-4Srau=XMcCXu9qSmw@mail.gmail.com>
	<CANcjKS+ox+D0_29z6NDNZh1E9mrpDB=fxq4osF-gVitHRkYgbg@mail.gmail.com>
	<CAMKgpOZGjkWSYLMZLunOmKzobodBZm+hXnPoJ_5hKBbDJLGz4w@mail.gmail.com>
	<CANcjKSLM5j66R8FEQq7nnfG1s09f0XtqOL376u8DuY3ysqqdXw@mail.gmail.com>
	<CAMKgpOYaw8WSg1yKL5aapj0u84b9KTFSncsUvdE_qqDXGZG5Qw@mail.gmail.com>
	<CANcjKSJYnUDn7oLTSFc86VmW0XmASw3f-rnKErR8y0Oc8rBVjg@mail.gmail.com>
	<CAMKgpObfyRj0xv-6kwxM-BU5X=uOqjpAxsdOX3Cw1Gnn7DPpWg@mail.gmail.com>
	<CANcjKSKj70gZG2my-JDydsr07k4JS5e8zYnzHnKYfBX015fLkQ@mail.gmail.com>
	<CAMKgpOawM1BbwGJHtSKNi+NYAj92BZaqDZjf77kGKXuqUC-qbQ@mail.gmail.com>
	<CANcjKS+XTJmB08R-7PrEVKWpey=xjhC0HxDJPsCaJFJj+Mhf6A@mail.gmail.com>
	<CAMKgpOYQyW+6U+bo1UBKvPdZgDapdBtJ0qE5t+g72s6rdT_aXw@mail.gmail.com>
	<CANcjKSJ_WJcbinGL4Y10Mkycry8ujvcprg6d7=PjMVCBHJpPQw@mail.gmail.com>
	<CAMKgpOaUNpDXmh_k8S+x=-XsHsBe8y-bu=rb0GWgcm1=OZyhZQ@mail.gmail.com>
	<CANcjKSKD8rEEA61RJGT66xZ4xxnGbDwT6wgKhmZD16RFmPQ-Bw@mail.gmail.com>
Message-ID: <CAMKgpObJhqxQn4yR=TgaJAVCvaCNt6wBdYB+=nw9gw9Zj6gATA@mail.gmail.com>

Mateusz,

You have to set relativeToVRT to 0 if you want to use absolute path.

2011/8/13 Mateusz K?dzior <matandked@gmail.com>

>
>
> W dniu 13 sierpnia 2011 08:05 u?ytkownik Chaitanya kumar CH <
> chaitanya.ch@gmail.com> napisa?:
>
>> Mateusz,
>>
>> This is what I did to process evap_OBC.asc ...
>>
>> 1. Run the command "gdal2xyz.py -csv evap_OBC.asc evap_OBC.csv". I got a
>> csv file.
>> 2. Edited the file evap_OBC.csv to add the line "Longitude,Latitude,Value"
>> (without the quotes) at the beginning.
>>
>
> This may be a source of problem...
> I add in every CSV heading
>
> Longitude,Latitude,Name
>
> (Name instead of Value)
>
>
>
>> 3. Created a file named evap_OBC.vrt with the following content...
>>
>> <OGRVRTDataSource>
>>     <OGRVRTLayer name="evap_OBC">
>>         <SrcDataSource>evap_OBC.csv</SrcDataSource>
>>         <GeometryType>wkbPoint</GeometryType>
>>
>>         <GeometryField encoding="PointFromColumns" x="Longitude"
>> y="Latitude"/>
>>     </OGRVRTLayer>
>> </OGRVRTDataSource>
>> 4. Run the command "ogr2ogr -select Value evap_OBC.shp evap_OBC.vrt". I
>> got the file evap_OBC.shp and two other associated files.
>>
>> In step 3, if I wanted to mention the absolute path instead of the
>> relative path of the file 'evap_OBC.csv', I would have added the attribute
>> 'relativeToVRT=0' to the SrcDataSource element like so.
>> <SrcDataSource relativeToVRT="0">evap_OBC.csv</SrcDataSource>
>
>
> So if I would like to insert absolute path I should add:
>  <SrcDataSource relativeToVRT="1">"/home/mateuszk/folder/evap_OBC.
>>
>> csv"</SrcDataSource>
>
>
>
>
> Thank You for support and patient.
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110813/cc132eac/attachment.html
From feverzsj at hotmail.com  Mon Aug 15 04:14:38 2011
From: feverzsj at hotmail.com (zzsj)
Date: Tue Aug 16 09:59:32 2011
Subject: [gdal-dev] Is wince project under trunk still available?
Message-ID: <SNT143-ds14115F9B90AEE8F6A505C0CE260@phx.gbl>

hi,
I'm trying building the wince port of gdal. I've followed the instruction to add the wcelibcex lib. But there are some missing symbols from "port/cpl_vsil_win32.cpp"(_wstat64, _wunlink, _wrename, _wmkdir, _wfindfirst, _wfinddata_t). The "ogr/ogr_geos_convert.cpp" is also missing.

regards, zsj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/7f785687/attachment.html
From even.rouault at mines-paris.org  Mon Aug 15 14:25:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 16 20:43:25 2011
Subject: [gdal-dev] Major performance improvement when reading large
	multi-layer GML files
Message-ID: <201108152025.37264.even.rouault@mines-paris.org>

Hi,

I've just commited in trunk an improvement that will interest people that 
process GML files that are hundreds of megabytes large or more.

The commit is http://trac.osgeo.org/gdal/changeset/22939

Below the inlined text of the new section that has been added to the GML help 
page (will be refreshed in the online version in a few hours) :

"""
*Performance issues with large multi-layer GML files.*

There is only one GML parser per GML datasource shared among the various 
layers. By default, the GML driver will restart reading from the beginning of 
the file, each time a layer is accessed for the first time, which can lead to 
poor performance with large GML files.

Starting with OGR 1.9.0, the GML_READ_MODE configuration option can be set to 
SEQUENTIAL_LAYERS if all features belonging to the same layer are written 
sequentially in the file. The reader will then avoid unnecessary resets when 
layers are read completely one after the other. To get the best performance, 
the layers must be read in the order they appear in the file.

If no .xsd and .gfs files are found, the parser will detect the layout of 
layers when building the .gfs file. If the layers are found to be sequential, a 
<SequentialLayers>true</SequentialLayers> element will be written in the .gfs 
file, so that the GML_READ_MODE will be automatically initialized to 
MONOBLOCK_LAYERS if not explicitely set by the user.

Starting with OGR 1.9.0, the GML_READ_MODE configuration option can be set to 
INTERLEAVED_LAYERS to be able to read a GML file whose features from different 
layers are interleaved. In the case, the semantics of the GetNextFeature() 
will be slightly altered, in a way where a NULL return does not necessarily 
mean that all features from the current layer have been read, but it could 
also mean that there is still a feature to read, but that belongs to another 
layer. In that case, the file should be read with code similar to the following 
one :

    int nLayerCount = poDS->GetLayerCount();
    int bFoundFeature;
    do
    {
        bFoundFeature = FALSE;
        for( int iLayer = 0; iLayer < nLayerCount; iLayer++ )
        {
            OGRLayer   *poLayer = poDS->GetLayer(iLayer);
            OGRFeature *poFeature;
            while((poFeature = poLayer->GetNextFeature()) != NULL)
            {
                bFoundFeature = TRUE;
                poFeature->DumpReadable(stdout, NULL);
                OGRFeature::DestroyFeature(poFeature);
            }
        }
    } while (bInterleaved && bFoundFeature);
"""

Testing appreciated,

Best regards,

Even

From even.rouault at mines-paris.org  Mon Aug 15 14:34:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 16 20:53:06 2011
Subject: [gdal-dev] Is wince project under trunk still available?
In-Reply-To: <SNT143-ds14115F9B90AEE8F6A505C0CE260@phx.gbl>
References: <SNT143-ds14115F9B90AEE8F6A505C0CE260@phx.gbl>
Message-ID: <201108152034.51502.even.rouault@mines-paris.org>

Le lundi 15 ao?t 2011 10:14:38, zzsj a ?crit :
> hi,
> I'm trying building the wince port of gdal. I've followed the instruction
> to add the wcelibcex lib. But there are some missing symbols from
> "port/cpl_vsil_win32.cpp"(_wstat64, _wunlink, _wrename, _wmkdir,
> _wfindfirst, _wfinddata_t). The "ogr/ogr_geos_convert.cpp" is also
> missing.

The WinCE port has no longer an active maintainer unfortunatelly. 

For the issues in cpl_vsil_win32.cpp, I think you should just replace the 
various occurences of the following line :

#if (defined(WIN32) && _MSC_VER >= 1310) || __MSVCRT_VERSION__ >= 0x0601

by something like:

#if (defined(WIN32) && !defined(WIN32CE) && _MSC_VER >= 1310) || 
__MSVCRT_VERSION__ >= 0x0601

The wince/msvc80/gdalce_dll/gdalce_dll.vcproj file is no longer up-to-date, so 
you likely need to tweak it a bit. In particular, you can safely remove the 
reference to ogr_geos_convert.cpp in it, as this file no longer exists in 
trunk. But you might need to add and/or remove other files too.

If you manage to build it, you could create a ticket with a patch with your 
findings.

> 
> regards, zsj
From sulzman at casco.net  Mon Aug 15 15:09:19 2011
From: sulzman at casco.net (James Sulzman)
Date: Tue Aug 16 21:33:22 2011
Subject: [gdal-dev] Help with GDAL & Visual Studio 2010 & netCDF
Message-ID: <000901cc5b7e$d5ed3000$81c79000$@casco.net>

Hi All,

 

I could use a little help, and it would be greatly appreciated.

 

Goal:  Write a c++ program in MS Visual Studio 2010 (on win7 x64 machine)
that reads in a netCDF file.  Compile/build program in Visual Studio 2010
Release or Debug x64.  Execute the program.

The netCDF file I am trying to read in, has one variable in it.  That
variable is a 3d raster 76x40x93 of float32 type.

 

Steps I have taken:

1.       Download binaries from
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-
1-8-mapserver-6-0.zip

2.       Create .lib files from .dll(s)

3.       Follow instruction from download binary site, paths/linkers to
library and gdalplugins etc..

4.       Use code from API tutorial for c++
http://www.gdal.org/gdal_tutorial.html, also pasted below

5.       Compile the program (everything compiles fine).

6.       Run the program, does not bomb, but offers bad results.

7.       If you look at the c++ code tutorial in step 4 it has various print
statements. Here are the results from those print statements

 

Driver: netCDF/Network Common Data Format

Size is 76x40x93

Projection is ' '

Block=76x1 Type=Float32, ColorInterp=Undefinded

Min=72.905d Max 115.625d

Data=100.216d

 

Problem:

 

When I get a "band" and get the block size, the block size  is reported as
76x1 (as in the snips below).  I expected the block size to be 76x40

 

poBand = poDataset->GetRasterBand( 1 );

poBand->GetBlockSize( &nBlockXSize, &nBlockYSize );

 

When I read the block (putting the snip below in a nested loop for column
and row) I get the proper data in that 76x1 (76 values) block, but I can't
move onto the next row (ie row > 0). Which makes sense because the block is
only 76x1.  Also, if I get band "2" the same thing, good data, but only one
column to work with.  What am I missing?  How do I retrieve the full band of
76x40?  I even tried a JPEG file and got similar results? 

 

 

poBand->RasterIO( GF_Read, column, row, nXSize, 1, 

                          pafScanline, nXSize, 1, GDT_Float32, 

                          0, 0 );

 

 

Thanks in advance for any help or advice,

 

James

 

 

My program

 

 

typedef __int64 _OFF_T;

#include "gdal.h"

#include "gdal_priv.h"

#include "netcdf.h"

#include "gdal_frmts.h"

#include "netcdfdataset.h"

#include "cpl_config.h"

#include "cpl_conv.h"

#include "cpl_error.h"

#include "cpl_hash_set.h"

#include "cpl_port.h"

#include "cpl_string.h"

#include "cpl_vsi.h"

#include "cpl_minixml.h"

#include "gdal_pam.h"

#include "gdal_version.h"

#include "gdal_vrt.h"

#include "ogr_core.h"

#include "ogr_spatialref.h"

#include "ogr_srs_api.h"

 

#include <iostream>

using namespace std;

//const char *pszFilename = "\\IMG_3527.jpg";

//const char *pszFilename = "\\hada2eugsi.nc";

const char *pszFilename = "\\james_test.nc";

 

//const char *pszFilename = "\\CRUTEM3.nc";

const char *netcdfmeta ("");

char ** ppinfo;

int * pncid; 

int main()

{

        

              

    GDALAllRegister();

       

       

       

       GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );

       

       poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );

    

       

 

       GDALGetMetadata(poDataset,netcdfmeta);

       

       //poDataset->GetPamInfo();

       poDataset->GetMetadata(netcdfmeta);

       GDALOpenInfo(pszFilename, GA_ReadOnly ,ppinfo);

       //GDALGetGeoTransform( GDALDatasetH, double * );

       

       if( poDataset == NULL )

    {

       printf( "did not open file");

    }

       double        adfGeoTransform[6];

 

    printf( "Driver: %s/%s\n",

            poDataset->GetDriver()->GetDescription(), 

            poDataset->GetDriver()->GetMetadataItem( GDAL_DMD_LONGNAME ) );

 

    printf( "Size is %dx%dx%d\n", 

            poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),

            poDataset->GetRasterCount() );

 

    if( poDataset->GetProjectionRef()  != NULL )

        printf( "Projection is `%s'\n", poDataset->GetProjectionRef() );

 

    if( poDataset->GetGeoTransform( adfGeoTransform ) == CE_None )

    {

        printf( "Origin = (%.6f,%.6f)\n",

                adfGeoTransform[0], adfGeoTransform[3] );

 

        printf( "Pixel Size = (%.6f,%.6f)\n",

                adfGeoTransform[1], adfGeoTransform[5] );

    }

       GDALRasterBand  *poBand;

        int             nBlockXSize, nBlockYSize;

        int             bGotMin, bGotMax;

        double          adfMinMax[2];

        

        poBand = poDataset->GetRasterBand( 1 );

        

              

              poBand->GetBlockSize( &nBlockXSize, &nBlockYSize );

        printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",

                nBlockXSize, nBlockYSize,

                GDALGetDataTypeName(poBand->GetRasterDataType()),

                GDALGetColorInterpretationName(

                    poBand->GetColorInterpretation()) );

 

        adfMinMax[0] = poBand->GetMinimum( &bGotMin );

        adfMinMax[1] = poBand->GetMaximum( &bGotMax );

        if( ! (bGotMin && bGotMax) )

            GDALComputeRasterMinMax((GDALRasterBandH)poBand, TRUE,
adfMinMax);

 

        printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );

        

        if( poBand->GetOverviewCount() > 0 )

            printf( "Band has %d overviews.\n", poBand->GetOverviewCount()
);

 

        if( poBand->GetColorTable() != NULL )

            printf( "Band has a color table with %d entries.\n", 

                     poBand->GetColorTable()->GetColorEntryCount() );

              float *pafScanline;

        int   nXSize = poBand->GetXSize();

 

        pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);

        poBand->RasterIO( GF_Read, 0, 0, nXSize, 1, 

                          pafScanline, nXSize, 1, GDT_Float32, 

                          0, 0 );

              printf( "data=%.3fd", *pafScanline );

              

              GDALClose(poDataset);

}

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/b4fe8225/attachment-0001.html
From ksshannon at gmail.com  Mon Aug 15 15:40:17 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Aug 16 22:02:43 2011
Subject: [gdal-dev] Help with GDAL & Visual Studio 2010 & netCDF
In-Reply-To: <000901cc5b7e$d5ed3000$81c79000$@casco.net>
References: <000901cc5b7e$d5ed3000$81c79000$@casco.net>
Message-ID: <CAJ0mEz1f1Ny_NMdV7NTzOCWZT0ft2+w94FgXuW_q5Kgdf7k9wA@mail.gmail.com>

James,

I don't have a lot of time, but I can address some things quickly.
Blocksize and raster size are not necessarily the same thing.  In some
datasets, a block is represented as a tile, in scanline oriented data, it is
represented as one scanline, or a row.  To obtain the x and y size of the
data set, use poDataset->GetRaster[XY]Size().  This should report the values
you are looking for.  To access all of the data, loop over the scanlines and
read in one at a time, or read in the entire raster into one buffer.  Hope
that helps.

kss

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */




On Mon, Aug 15, 2011 at 13:09, James Sulzman <sulzman@casco.net> wrote:

> Hi All,****
>
> ** **
>
> I could use a little help, and it would be greatly appreciated.****
>
> ** **
>
> Goal:  Write a c++ program in MS Visual Studio 2010 (on win7 x64 machine)
> that reads in a netCDF file.  Compile/build program in Visual Studio 2010
> Release or Debug x64.  Execute the program.****
>
> The netCDF file I am trying to read in, has one variable in it.  That
> variable is a 3d raster 76x40x93 of float32 type.****
>
> ** **
>
> Steps I have taken:****
>
> **1.       **Download binaries from
> http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-8-mapserver-6-0.zip
> ****
>
> **2.       **Create .lib files from .dll(s)****
>
> **3.       **Follow instruction from download binary site, paths/linkers
> to library and gdalplugins etc..****
>
> **4.       **Use code from API tutorial for c++
> http://www.gdal.org/gdal_tutorial.html, also pasted below****
>
> **5.       **Compile the program (everything compiles fine).****
>
> **6.       **Run the program, does not bomb, but offers bad results.****
>
> **7.       **If you look at the c++ code tutorial in step 4 it has various
> print statements. Here are the results from those print statements****
>
> ** **
>
> Driver: netCDF/Network Common Data Format****
>
> Size is 76x40x93****
>
> Projection is ? ?****
>
> Block=76x1 Type=Float32, ColorInterp=Undefinded****
>
> Min=72.905d Max 115.625d****
>
> Data=100.216d****
>
> ** **
>
> Problem:****
>
> ** **
>
> When I get a ?band? and get the block size, the block size  is reported as
> 76x1 (as in the snips below).  I expected the block size to be 76x40****
>
> ** **
>
> poBand = poDataset->GetRasterBand( 1 );****
>
> poBand->GetBlockSize( &nBlockXSize, &nBlockYSize );****
>
> ** **
>
> When I read the block (putting the snip below in a nested loop for column
> and row) I get the proper data in that 76x1 (76 values) block, but I can?t
> move onto the next row (ie row > 0). Which makes sense because the block is
> only 76x1.  Also, if I get band ?2? the same thing, good data, but only one
> column to work with.  What am I missing?  How do I retrieve the full band of
> 76x40?  I even tried a JPEG file and got similar results? ****
>
> ** **
>
> ** **
>
> poBand->RasterIO( GF_Read, column, row, nXSize, 1, ****
>
>                           pafScanline, nXSize, 1, GDT_Float32, ****
>
>                           0, 0 );****
>
> ** **
>
> ** **
>
> Thanks in advance for any help or advice,****
>
> ** **
>
> James****
>
> ** **
>
> ** **
>
> My program****
>
> ** **
>
> ** **
>
> typedef __int64 _OFF_T;****
>
> #include "gdal.h"****
>
> #include "gdal_priv.h"****
>
> #include "netcdf.h"****
>
> #include "gdal_frmts.h"****
>
> #include "netcdfdataset.h"****
>
> #include "cpl_config.h"****
>
> #include "cpl_conv.h"****
>
> #include "cpl_error.h"****
>
> #include "cpl_hash_set.h"****
>
> #include "cpl_port.h"****
>
> #include "cpl_string.h"****
>
> #include "cpl_vsi.h"****
>
> #include "cpl_minixml.h"****
>
> #include "gdal_pam.h"****
>
> #include "gdal_version.h"****
>
> #include "gdal_vrt.h"****
>
> #include "ogr_core.h"****
>
> #include "ogr_spatialref.h"****
>
> #include "ogr_srs_api.h"****
>
> ** **
>
> #include <iostream>****
>
> using namespace std;****
>
> //const char *pszFilename = "\\IMG_3527.jpg";****
>
> //const char *pszFilename = "\\hada2eugsi.nc";****
>
> const char *pszFilename = "\\james_test.nc";****
>
> ** **
>
> //const char *pszFilename = "\\CRUTEM3.nc";****
>
> const char *netcdfmeta ("");****
>
> char ** ppinfo;****
>
> int * pncid; ****
>
> int main()****
>
> {****
>
>         ****
>
>               ****
>
>     GDALAllRegister();****
>
>        ****
>
>        ****
>
>        ****
>
>        GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
> ****
>
>        ****
>
>        poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );**
> **
>
>     ****
>
>        ****
>
> ** **
>
>        GDALGetMetadata(poDataset,netcdfmeta);****
>
>        ****
>
>        //poDataset->GetPamInfo();****
>
>        poDataset->GetMetadata(netcdfmeta);****
>
>        GDALOpenInfo(pszFilename, GA_ReadOnly ,ppinfo);****
>
>        //GDALGetGeoTransform( GDALDatasetH, double * );****
>
>        ****
>
>        if( poDataset == NULL )****
>
>     {****
>
>        printf( "did not open file");****
>
>     }****
>
>        double        adfGeoTransform[6];****
>
> ** **
>
>     printf( "Driver: %s/%s\n",****
>
>             poDataset->GetDriver()->GetDescription(), ****
>
>             poDataset->GetDriver()->GetMetadataItem( GDAL_DMD_LONGNAME ) );
> ****
>
> ** **
>
>     printf( "Size is %dx%dx%d\n", ****
>
>             poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),****
>
>             poDataset->GetRasterCount() );****
>
> ** **
>
>     if( poDataset->GetProjectionRef()  != NULL )****
>
>         printf( "Projection is `%s'\n", poDataset->GetProjectionRef() );**
> **
>
> ** **
>
>     if( poDataset->GetGeoTransform( adfGeoTransform ) == CE_None )****
>
>     {****
>
>         printf( "Origin = (%.6f,%.6f)\n",****
>
>                 adfGeoTransform[0], adfGeoTransform[3] );****
>
> ** **
>
>         printf( "Pixel Size = (%.6f,%.6f)\n",****
>
>                 adfGeoTransform[1], adfGeoTransform[5] );****
>
>     }****
>
>        GDALRasterBand  *poBand;****
>
>         int             nBlockXSize, nBlockYSize;****
>
>         int             bGotMin, bGotMax;****
>
>         double          adfMinMax[2];****
>
>         ****
>
>         poBand = poDataset->GetRasterBand( 1 );****
>
>         ****
>
>               ****
>
>               poBand->GetBlockSize( &nBlockXSize, &nBlockYSize );****
>
>         printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",****
>
>                 nBlockXSize, nBlockYSize,****
>
>                 GDALGetDataTypeName(poBand->GetRasterDataType()),****
>
>                 GDALGetColorInterpretationName(****
>
>                     poBand->GetColorInterpretation()) );****
>
> ** **
>
>         adfMinMax[0] = poBand->GetMinimum( &bGotMin );****
>
>         adfMinMax[1] = poBand->GetMaximum( &bGotMax );****
>
>         if( ! (bGotMin && bGotMax) )****
>
>             GDALComputeRasterMinMax((GDALRasterBandH)poBand, TRUE,
> adfMinMax);****
>
> ** **
>
>         printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );****
>
>         ****
>
>         if( poBand->GetOverviewCount() > 0 )****
>
>             printf( "Band has %d overviews.\n", poBand->GetOverviewCount()
> );****
>
> ** **
>
>         if( poBand->GetColorTable() != NULL )****
>
>             printf( "Band has a color table with %d entries.\n", ****
>
>                      poBand->GetColorTable()->GetColorEntryCount() );****
>
>               float *pafScanline;****
>
>         int   nXSize = poBand->GetXSize();****
>
> ** **
>
>         pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);****
>
>         poBand->RasterIO( GF_Read, 0, 0, nXSize, 1, ****
>
>                           pafScanline, nXSize, 1, GDT_Float32, ****
>
>                           0, 0 );****
>
>               printf( "data=%.3fd", *pafScanline );****
>
>               ****
>
>               GDALClose(poDataset);****
>
> }****
>
> ** **
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/972a2549/attachment-0001.html
From georgec_511 at yahoo.com  Mon Aug 15 22:00:20 2011
From: georgec_511 at yahoo.com (George C)
Date: Wed Aug 17 04:46:13 2011
Subject: [gdal-dev] gdal GeoTiff parsing gml
Message-ID: <1313460020.98376.YahooMailNeo@web162002.mail.bf1.yahoo.com>

Does anyone know if gdal can parse a GeoTiff file into gml with?pixel data?? I need to take a GeoTiff and plot it on a map using gml, is that even possible?
?
Thanks,
George
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/61198505/attachment.html
From jzl5325 at psu.edu  Mon Aug 15 22:54:39 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Wed Aug 17 05:40:24 2011
Subject: [gdal-dev] gdal GeoTiff parsing gml
In-Reply-To: <1313460020.98376.YahooMailNeo@web162002.mail.bf1.yahoo.com>
References: <1313460020.98376.YahooMailNeo@web162002.mail.bf1.yahoo.com>
Message-ID: <CA+bfmPvyABKgvyQ-LkLh5o5+cOZcTRVjzDjCdFRCCxTZYyw0Fg@mail.gmail.com>

How about turning the GTiff into a point and adding z either into the
geometry or into the attribute table?  That functionality would be
accessible through any of the APIs.

Another idea would be to use polygonize to create polygons of your raster.
 Here is a script<http://www.personal.psu.edu/jzl5325/python/ogrGdal/OGR_Converter.zip>I
wrote to convert from vector to a few different text representations.
It
is zipped to avoid simply displaying in your browser.  Written with 1.6,
python API.

J

On Mon, Aug 15, 2011 at 7:00 PM, George C <georgec_511@yahoo.com> wrote:

> Does anyone know if gdal can parse a GeoTiff file into gml with pixel
> data?  I need to take a GeoTiff and plot it on a map using gml, is that even
> possible?
>
> Thanks,
> George
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/8beb9dec/attachment.html
From mszaller at AerialFireTech.org  Tue Aug 16 00:35:07 2011
From: mszaller at AerialFireTech.org (Mark Zaller (AerialFireTech))
Date: Wed Aug 17 07:26:26 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>
Message-ID: <CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>

Hello, I'm pursuing a project to automatically map wildfires, and am looking
for people who could contribute to this.

I volunteer as an Air Attack pilot over wildfires, and have developed an in
cockpit Augmented Reality system that allows us to work at night and over
smoke. It combines 3D visualization of GIS (Geographic Information System)
data along with live Infrared. I'd like to consider porting to Open
Source/Linux and include auto-mapping of spotfires. Here is a proposal
presentation about what NASA might fund:
http://www.slideshare.net/mszaller/wildfire-ir-and-mapping

Please write if you have experience with how GRASS, OSGeo, GDAL, or point me
to where can find Open Source people who could help.

thanks,
-Mark Zaller - TriGeo <http://www.trigeocorp.com/> - (408) 623-4303,
www.AerialFireTech.org <http://www.aerialfiretech.org/>
 Linkedin Profile <http://www.linkedin.com/in/markzaller> - Business
Development, Product Management, Hi-tech Hardware & Software Team Leader
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110815/fec748dc/attachment.html
From xenon at alphapixel.com  Tue Aug 16 09:25:49 2011
From: xenon at alphapixel.com (Chris 'Xenon' Hanson)
Date: Wed Aug 17 16:53:11 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>
	<CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
Message-ID: <4E4A6FDD.9010504@alphapixel.com>

On 8/15/2011 10:35 PM, Mark Zaller (AerialFireTech) wrote:
> Hello, I'm pursuing a project to automatically map wildfires, and am looking for people
> who could contribute to this.
> I volunteer as an Air Attack pilot over wildfires, and have developed an in cockpit
> Augmented Reality system that allows us to work at night and over smoke. It combines 3D
> visualization of GIS (Geographic Information System) data along with live Infrared. I'd
> like to consider porting to Open Source/Linux and include auto-mapping of spotfires. Here
> is a proposal presentation about what NASA might
> fund: http://www.slideshare.net/mszaller/wildfire-ir-and-mapping
> Please write if you have experience with how GRASS, OSGeo, GDAL, or point me to where can
> find Open Source people who could help.

  I worked on a project like this for Churchill Navigation using their ARS Augmented
Reality GIS display:
http://churchillnavigation.com/

  We hunted for artificial concealed hotspots using a FLIR infrared gimbal system in
Alberta last summer with good success.

  ARS is more aimed at law enforcement type usage, and I don't think they're pursuing the
wildfire mapping angle.

  I can answer any questions you might have.

> -Mark Zaller - TriGeo <http://www.trigeocorp.com/> - (408) 623-4303

-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon@AlphaPixel.com http://www.alphapixel.com/
  Digital Imaging. OpenGL. Scene Graphs. GIS. GPS. Training. Consulting. Contracting.
    "There is no Truth. There is only Perception. To Perceive is to Exist." - Xen
From bfraser at geoanalytic.com  Tue Aug 16 10:35:51 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Aug 17 18:00:12 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>
	<CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
Message-ID: <4E4A8047.30605@geoanalytic.com>

Mark,

   There are a few Open Source projects you could look into

3D visualization environment:
     VTP
     WorldWind
     OssimPlanet

Orthorectification of Video:
     OSSIM OMAR?

Image Processing / Feature Extraction
     OTB
     GRASS

And I'm sure there are others.

The system you describe would be a lot of work, but it does sound 
interesting!

Best Regards,
Brent Fraser


On 8/15/2011 10:35 PM, Mark Zaller (AerialFireTech) wrote:
> Hello, I'm pursuing a project to automatically map wildfires, and 
> am looking for people who could contribute to this.
>
> I volunteer as an Air Attack pilot over wildfires, and have developed 
> an in cockpit Augmented Reality system that allows us to work at night 
> and over smoke. It combines 3D visualization of GIS (Geographic 
> Information System) data along with live Infrared. I'd like to 
> consider porting to Open Source/Linux and include auto-mapping of 
> spotfires. Here is a proposal presentation about what NASA might fund: 
> http://www.slideshare.net/mszaller/wildfire-ir-and-mapping
>
> Please write if you have experience with how GRASS, OSGeo, GDAL, or 
> point me to where can find Open Source people who could help.
>
> thanks,
> -Mark Zaller - TriGeo <http://www.trigeocorp.com/> - (408) 623-4303 
> <tel:%28408%29%20623-4303>, www.AerialFireTech.org 
> <http://www.aerialfiretech.org/>
> Linkedin Profile <http://www.linkedin.com/in/markzaller> - Business 
> Development, Product Management, Hi-tech Hardware & Software Team Leader
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/51369c3e/attachment.html
From p.baumann at jacobs-university.de  Tue Aug 16 11:33:53 2011
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Wed Aug 17 19:01:26 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <4E4A8047.30605@geoanalytic.com>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>	<CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
	<4E4A8047.30605@geoanalytic.com>
Message-ID: <4E4A8DE1.7030507@jacobs-university.de>

Mark,

For data management and ad-hoc analytics of (multi-dimensional) raster data let 
me add
     rasdaman (www.rasdaman.org)
to the list.

regards,
Peter


On 08/16/2011 04:35 PM, Brent Fraser wrote:
> Mark,
>
>   There are a few Open Source projects you could look into
>
> 3D visualization environment:
>     VTP
>     WorldWind
>     OssimPlanet
>
> Orthorectification of Video:
>     OSSIM OMAR?
>
> Image Processing / Feature Extraction
>     OTB
>     GRASS
>
> And I'm sure there are others.
>
> The system you describe would be a lot of work, but it does sound interesting!
> Best Regards,
> Brent Fraser
>
> On 8/15/2011 10:35 PM, Mark Zaller (AerialFireTech) wrote:
>> Hello, I'm pursuing a project to automatically map wildfires, and am looking 
>> for people who could contribute to this.
>>
>> I volunteer as an Air Attack pilot over wildfires, and have developed an in 
>> cockpit Augmented Reality system that allows us to work at night and over 
>> smoke. It combines 3D visualization of GIS (Geographic Information System) 
>> data along with live Infrared. I'd like to consider porting to Open 
>> Source/Linux and include auto-mapping of spotfires. Here is a proposal 
>> presentation about what NASA might fund: 
>> http://www.slideshare.net/mszaller/wildfire-ir-and-mapping
>>
>> Please write if you have experience with how GRASS, OSGeo, GDAL, or point me 
>> to where can find Open Source people who could help.
>>
>> thanks,
>> -Mark Zaller - TriGeo <http://www.trigeocorp.com/> - (408) 623-4303 
>> <tel:%28408%29%20623-4303>, www.AerialFireTech.org 
>> <http://www.aerialfiretech.org/>
>> Linkedin Profile <http://www.linkedin.com/in/markzaller> - Business 
>> Development, Product Management, Hi-tech Hardware & Software Team Leader
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/fa4e0e98/attachment.html
From mszaller at aerialfiretech.org  Tue Aug 16 13:40:32 2011
From: mszaller at aerialfiretech.org (Mark Zaller (AerialFireTech))
Date: Wed Aug 17 21:14:49 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <4E4A8DE1.7030507@jacobs-university.de>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>
	<CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>
	<4E4A8047.30605@geoanalytic.com>
	<4E4A8DE1.7030507@jacobs-university.de>
Message-ID: <CAN5P6KbeuyySePorQTXED0mMqK7CAT7DKy5BbO24eWKzrg-mjA@mail.gmail.com>

Peter & Brent,
Thanks. Some of those are new to me & very interesting.

I'm currently preparing the proposal to NASA. It's due in a few weeks with
phase 1 project planning to be awarded by end of year, and hard
development (phase 2) starting next summer.

Automating what the current system already does well, will be tough as you
say. Hopefully some of the existing projects you point to will
help.  Several military contractors (2D3 & ENVI) have good capabilities, but
I want to evaluate an open-source approach so it could be available to more
firefighters (and other disaster management, environmental monitoring, etc.)
in other countries without onerous licensing, costs & export processes.

If anyone would like more info please call or write. Conducting an
online presentation could be interesting if desired, and someone knows how
to make that happen.

-Mark Zaller - (408) 623-4303,
www.AerialFireTech.<http://www.aerialfiretech.org/>
org <http://www.aerialfiretech.org/>




On Tue, Aug 16, 2011 at 8:33 AM, Peter Baumann <
p.baumann@jacobs-university.de> wrote:

> **
> Mark,
>
> For data management and ad-hoc analytics of (multi-dimensional) raster data
> let me add
>     rasdaman (www.rasdaman.org)
> to the list.
>
> regards,
> Peter
>
>
> On 08/16/2011 04:35 PM, Brent Fraser wrote:
>
> Mark,
>
>   There are a few Open Source projects you could look into
>
> 3D visualization environment:
>     VTP
>     WorldWind
>     OssimPlanet
>
> Orthorectification of Video:
>     OSSIM OMAR?
>
> Image Processing / Feature Extraction
>     OTB
>     GRASS
>
> And I'm sure there are others.
>
> The system you describe would be a lot of work, but it does sound
> interesting!
>
> Best Regards,
> Brent Fraser
>
>
> On 8/15/2011 10:35 PM, Mark Zaller (AerialFireTech) wrote:
>
> Hello, I'm pursuing a project to automatically map wildfires, and
> am looking for people who could contribute to this.
>
>  I volunteer as an Air Attack pilot over wildfires, and have developed an
> in cockpit Augmented Reality system that allows us to work at night and over
> smoke. It combines 3D visualization of GIS (Geographic Information System)
> data along with live Infrared. I'd like to consider porting to Open
> Source/Linux and include auto-mapping of spotfires. Here is a proposal
> presentation about what NASA might fund:
> http://www.slideshare.net/mszaller/wildfire-ir-and-mapping
>
>  Please write if you have experience with how GRASS, OSGeo, GDAL, or point
> me to where can find Open Source people who could help.
>
>  thanks,
>     -Mark Zaller - TriGeo <http://www.trigeocorp.com/> - (408) 623-4303<%28408%29%20623-4303>
> ,  www.AerialFireTech.org <http://www.aerialfiretech.org/>
>   Linkedin Profile <http://www.linkedin.com/in/markzaller> - Business
> Development, Product Management, Hi-tech Hardware & Software Team Leader
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Dr. Peter Baumann
>  - Professor of Computer Science, Jacobs University Bremen
>    www.faculty.jacobs-university.de/pbaumann
>    mail: p.baumann@jacobs-university.de
>    tel: +49-421-200-3178, fax: +49-421-200-493178
>  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>    www.rasdaman.com, mail: baumann@rasdaman.com
>    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
> "Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/009de441/attachment-0001.html
From randre at gmail.com  Tue Aug 16 19:51:36 2011
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Aug 18 03:46:31 2011
Subject: [gdal-dev] Changing precision of coordinates in Python OGR API
Message-ID: <CAOL+ROG6vSZ6OknKdCoz4B1QegjnRc8OBFCOFio6cL78=USAoA@mail.gmail.com>

Hi All,

I have an assignment that requires me to truncate the precision of all my
polygon coordinates to 6 decimal places.  Is there an easy way to do this
while I have the feature opened with OGR and can access its ogr.Geometry
directly?  If not, can someone recommend a good way to iterate through each
coordinate in a feature in such a way that I can treat it as a string and
format it?

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/d3143d79/attachment.html
From ben at vterrain.org  Tue Aug 16 21:24:58 2011
From: ben at vterrain.org (Ben Discoe)
Date: Thu Aug 18 05:26:23 2011
Subject: [gdal-dev] OGR/PROJ with +geoidgrids
Message-ID: <08ce01cc5c7c$7a54ce20$6efe6a60$@org>

It is true that geocentric XYZ coordinates are not very useful, without being able to convert them to coordinate with orthometric ("geoid") ("sea level") height.

Frank implemented 'preliminary' support for this, which i am preparing to test now.  Before expecting it to work in GDAL/OGR, i thought i should try it down in PROJ.4 first, following the description on http://trac.osgeo.org/proj/wiki/VerticalDatums

If i try a point near me in California, it works regularly:

cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +zone=10 +datum=WGS84
-122.272778 37.871667 10
563959.68       4191825.55 10.00

But if i try to provide a geoid file (from http://download.osgeo.org/proj/vdatum/usa_geoid2009.zip) then it seems to not work:

cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +zone=10 +datum=WGS84 +geoidgrids=g2009conus.gtx
-122.272778 37.871667 10
Rel. 4.7.1, 23 September 2009
<cs2cs>: while processing file: <stdin>, line 1
pj_transform(): Unknown error
*       * 10.00

The goal is to transform the input elevation (10 meters, ellipsoidal height, i presume) to an orthometric height (which will use the geoid, i presume).

Maybe i'm doing it wrong?

Thanks,
Ben


From chaitanya.ch at gmail.com  Wed Aug 17 01:36:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug 18 09:49:55 2011
Subject: [gdal-dev] Changing precision of coordinates in Python OGR API
In-Reply-To: <CAOL+ROG6vSZ6OknKdCoz4B1QegjnRc8OBFCOFio6cL78=USAoA@mail.gmail.com>
References: <CAOL+ROG6vSZ6OknKdCoz4B1QegjnRc8OBFCOFio6cL78=USAoA@mail.gmail.com>
Message-ID: <CAMKgpOaFGfvjXDd9_YLURD+XKc84MUp1jVZamhRXoWR4Y4rBAA@mail.gmail.com>

Roger,

OGR doesn't support control of coordinate precision. You need to do this
yourselves.
You can get the WKT of the geometry and and edit the string. If you are
willing to recompile GDAL/OGR, you can modify the code that creates the WKT.
Even wrote how to do this in this mailing list [1].

[1]: http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028306.html

On Wed, Aug 17, 2011 at 5:21 AM, Roger Andr? <randre@gmail.com> wrote:

> Hi All,
>
> I have an assignment that requires me to truncate the precision of all my
> polygon coordinates to 6 decimal places.  Is there an easy way to do this
> while I have the feature opened with OGR and can access its ogr.Geometry
> directly?  If not, can someone recommend a good way to iterate through each
> coordinate in a feature in such a way that I can treat it as a string and
> format it?
>
> Thanks,
>
> Roger
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110817/10150968/attachment.html
From randre at gmail.com  Wed Aug 17 01:53:36 2011
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Aug 18 10:08:09 2011
Subject: [gdal-dev] Changing precision of coordinates in Python OGR API
In-Reply-To: <CAMKgpOaFGfvjXDd9_YLURD+XKc84MUp1jVZamhRXoWR4Y4rBAA@mail.gmail.com>
References: <CAOL+ROG6vSZ6OknKdCoz4B1QegjnRc8OBFCOFio6cL78=USAoA@mail.gmail.com>
	<CAMKgpOaFGfvjXDd9_YLURD+XKc84MUp1jVZamhRXoWR4Y4rBAA@mail.gmail.com>
Message-ID: <CAOL+ROGii8GRZcwg-s07cf2+GTiJYP35s-hJSfoQDOFFJAWrqg@mail.gmail.com>

Thanks Chaitanya,

I like the look of that second option.  If I understand correctly what Even
says, I should then be able to call the *ExportToWKT() *method with a
precision parameter?

Roger
--

On Tue, Aug 16, 2011 at 10:36 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Roger,
>
> OGR doesn't support control of coordinate precision. You need to do this
> yourselves.
> You can get the WKT of the geometry and and edit the string. If you are
> willing to recompile GDAL/OGR, you can modify the code that creates the WKT.
> Even wrote how to do this in this mailing list [1].
>
> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028306.html
>
> On Wed, Aug 17, 2011 at 5:21 AM, Roger Andr? <randre@gmail.com> wrote:
>
>> Hi All,
>>
>> I have an assignment that requires me to truncate the precision of all my
>> polygon coordinates to 6 decimal places.  Is there an easy way to do this
>> while I have the feature opened with OGR and can access its ogr.Geometry
>> directly?  If not, can someone recommend a good way to iterate through each
>> coordinate in a feature in such a way that I can treat it as a string and
>> format it?
>>
>> Thanks,
>>
>> Roger
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/c1983904/attachment.html
From randre at gmail.com  Wed Aug 17 02:49:38 2011
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Aug 18 11:07:16 2011
Subject: [gdal-dev] Changing precision of coordinates in Python OGR API
In-Reply-To: <CAOL+ROGii8GRZcwg-s07cf2+GTiJYP35s-hJSfoQDOFFJAWrqg@mail.gmail.com>
References: <CAOL+ROG6vSZ6OknKdCoz4B1QegjnRc8OBFCOFio6cL78=USAoA@mail.gmail.com>
	<CAMKgpOaFGfvjXDd9_YLURD+XKc84MUp1jVZamhRXoWR4Y4rBAA@mail.gmail.com>
	<CAOL+ROGii8GRZcwg-s07cf2+GTiJYP35s-hJSfoQDOFFJAWrqg@mail.gmail.com>
Message-ID: <CAOL+ROF-XVHATDb4v6CbdV=ghguU=C+whdo0qwCvSTi0DskwtA@mail.gmail.com>

Works brilliantly, thanks again.

- Set env var:
export OGR_WKT_PRECISION=4

- In Python interpreter:
from osgeo import ogr
datasource = ogr.Open('World_Admin_2.shp')
layer = datasource.GetLayer(0)
feat = layer.GetNextFeature()
geom = feat.geometry()
wkt = geom.ExportToWkt()

was:
151.857685024000034 -32.613605699642989,151.857672992 -32.613692002142983))
now:
151.8577 -32.6136,151.8577 -32.6137))

Roger
---

On Tue, Aug 16, 2011 at 10:53 PM, Roger Andr? <randre@gmail.com> wrote:

> Thanks Chaitanya,
>
> I like the look of that second option.  If I understand correctly what Even
> says, I should then be able to call the *ExportToWKT() *method with a
> precision parameter?
>
> Roger
> --
>
> On Tue, Aug 16, 2011 at 10:36 PM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Roger,
>>
>> OGR doesn't support control of coordinate precision. You need to do this
>> yourselves.
>> You can get the WKT of the geometry and and edit the string. If you are
>> willing to recompile GDAL/OGR, you can modify the code that creates the WKT.
>> Even wrote how to do this in this mailing list [1].
>>
>> [1]: http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028306.html
>>
>> On Wed, Aug 17, 2011 at 5:21 AM, Roger Andr? <randre@gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I have an assignment that requires me to truncate the precision of all my
>>> polygon coordinates to 6 decimal places.  Is there an easy way to do this
>>> while I have the feature opened with OGR and can access its ogr.Geometry
>>> directly?  If not, can someone recommend a good way to iterate through each
>>> coordinate in a feature in such a way that I can treat it as a string and
>>> format it?
>>>
>>> Thanks,
>>>
>>> Roger
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110816/b30b38a0/attachment.html
From cavyzyvokawosadu at tempomail.fr  Wed Aug 17 03:36:44 2011
From: cavyzyvokawosadu at tempomail.fr (symbian11)
Date: Thu Aug 18 11:56:40 2011
Subject: [gdal-dev] gdal_translate wms error
Message-ID: <1313566604911-6694505.post@n2.nabble.com>

Hi, I am trying to download some image data from a private WMS.

When I try to use gdal_translate I receive the following error (I had to
remove the server address):

ERROR 1: GDALWMS: Unable to download block 337235, 219173.
  URL:
http://SERVERADDRESS&request=GetMap&version=1.1.0&layers=Orthophoto%2CLuftbild_25cm%2CLuftbild_1m%2CLuftbild_4m%2CSatellitenbild_30m
&styles=&srs=EPSG:3857&transparent=TRUE&format=image/png&width=256&height=256&bbox=1545531.75694187,6010372.27699605,1545595.75694216,6010436.27699633
  HTTP status code: 0, error: Recv failure: Connection was reset.
ERROR 1: IReadBlock failed at X offset 337235, Y offset 219173

But when I copy the URL from the error message and use it in my browser it
works fine.

Here is the XML (I was not sure which parameters to use for the DataWindow.
I just chose SizeX/Y to be four times the extent because the resolution is
25cm.)

<GDAL_WMS>
    <Service name="WMS">
<ServerUrl>SERVERADRESS</ServerUrl>
<Layers>Orthophoto%2CLuftbild_25cm%2CLuftbild_1m%2CLuftbild_4m%2CSatellitenbild_30m
</Layers>
<SRS>EPSG:3857</SRS>
<Transparent>TRUE</Transparent>
<ImageFormat>image/png</ImageFormat>
    </Service>

    <DataWindow>
        <UpperLeftX>-20037508.34</UpperLeftX>
        <UpperLeftY>20037508.34</UpperLeftY>
        <LowerRightX>20037508.34</LowerRightX>
        <LowerRightY>-20037508.34</LowerRightY>
        <SizeX>160300066.72</SizeX>
        <SizeY>160300066.72</SizeY>
        <YOrigin>top</YOrigin>
    </DataWindow>

    <Projection>EPSG:3857</Projection>
    <BlockSizeX>256</BlockSizeX>
    <BlockSizeY>256</BlockSizeY>
    <BandsCount>3</BandsCount>
    <MaxConnections>5</MaxConnections>
</GDAL_WMS>

Here are the WMS Capabilities:

<?xml version='1.0' encoding="ISO-8859-1" standalone="no" ?>
&lt;!DOCTYPE WMT_MS_Capabilities SYSTEM
&quot;http://schemas.opengis.net/wms/1.1.1/WMS_MS_Capabilities.dtd&quot;
[
&lt;!ELEMENT VendorSpecificCapabilities EMPTY&gt;
]>  

<WMT_MS_Capabilities version="1.1.1">



<Service>
<Name>OGC:WMS</Name>
<Title>Orthofoto-Revital</Title>
<OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/>
<ContactInformation>
</ContactInformation>
</Service>

<Capability>
<Request>
<GetCapabilities>
<Format>application/vnd.ogc.wms_xml</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</GetCapabilities>
<GetMap>
<Format>image/png</Format>
<Format>image/jpg</Format>
<Format>image/gif</Format>
<Format>image/png; mode=24bit</Format>
<Format>image/wbmp</Format>
<Format>image/tiff</Format>
<Format>image/svg+xml</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</GetMap>
<GetFeatureInfo>
<Format>text/plain</Format>
<Format>application/vnd.ogc.gml</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</GetFeatureInfo>
<DescribeLayer>
<Format>text/xml</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</DescribeLayer>
<GetLegendGraphic>
<Format>image/png</Format>
<Format>image/jpg</Format>
<Format>image/gif</Format>
<Format>image/png; mode=24bit</Format>
<Format>image/wbmp</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</GetLegendGraphic>
<GetStyles>
<Format>text/xml</Format>
<DCPType>
<HTTP>
<Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Get>
<Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
xlink:href="SERVERADDRESS;"/></Post>
</HTTP>
</DCPType>
</GetStyles>
</Request>
<Exception>
<Format>application/vnd.ogc.se_xml</Format>
<Format>application/vnd.ogc.se_inimage</Format>
<Format>application/vnd.ogc.se_blank</Format>
</Exception>
<VendorSpecificCapabilities />
<UserDefinedSymbolization SupportSLD="1" UserLayer="0" UserStyle="1"
RemoteWFS="0"/>
<Layer>
<Name>Orthofoto-Revital</Name>
<Title>Orthofoto-Revital</Title>
<SRS>EPSG:31287</SRS>
<SRS>EPSG:4326</SRS>
<SRS>EPSG:3857</SRS>
<SRS>EPSG:900913</SRS>
<LatLonBoundingBox minx="9.35676" miny="46.0872" maxx="17.3099"
maxy="49.2092" />
<BoundingBox SRS="EPSG:31287"
minx="110000" miny="250000" maxx="690000" maxy="590000" />
<Layer>
<Name>Orthophoto</Name>
<Title>Orthophoto</Title>
<Abstract>Orthophoto</Abstract>
<Layer queryable="0" opaque="0" cascaded="0">
<Name>Luftbild_25cm</Name>
<Title>Luftbild_25cm_LB</Title>
<SRS>EPSG:31287</SRS>
<SRS>EPSG:4326</SRS>
<SRS>EPSG:3857</SRS>
<SRS>EPSG:900913</SRS>
<ScaleHint min="0" max="1.99561139371855" />
</Layer>
<Layer queryable="0" opaque="0" cascaded="0">
<Name>Luftbild_1m</Name>
<Title>Luftbild_1m_LB</Title>
<SRS>EPSG:31287</SRS>
<SRS>EPSG:4326</SRS>
<SRS>EPSG:3857</SRS>
<SRS>EPSG:900913</SRS>
<ScaleHint min="1.74665887235216" max="7.73299415065938" />
</Layer>
<Layer queryable="0" opaque="0" cascaded="0">
<Name>Luftbild_4m</Name>
<Title>Luftbild_4m_LB</Title>
<SRS>EPSG:31287</SRS>
<SRS>EPSG:4326</SRS>
<SRS>EPSG:3857</SRS>
<SRS>EPSG:900913</SRS>
<ScaleHint min="7.48404162929299" max="75.0848786886604" />
</Layer>
<Layer queryable="0" opaque="0" cascaded="0">
<Name>Satellitenbild_30m</Name>
<Title>Satellitenbild_30m</Title>
<SRS>EPSG:31287</SRS>
<SRS>EPSG:4326</SRS>
<SRS>EPSG:3857</SRS>
<SRS>EPSG:900913</SRS>
<ScaleHint min="74.835926167294" max="4989.02848429637" />
</Layer>
</Layer>
</Layer>
</Capability>
</WMT_MS_Capabilities>

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-wms-error-tp6694505p6694505.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rawcofe at gmail.com  Wed Aug 17 08:58:07 2011
From: rawcofe at gmail.com (rawcofe)
Date: Thu Aug 18 17:35:16 2011
Subject: [gdal-dev] Using GDAL OGR DXF driver to export complex DXF Blocks
 from Kosmo (OpenJUMP)
Message-ID: <1313585887679-6695304.post@n2.nabble.com>

Hello,

I'm wondering is it possible to use ogr dxf driver for exporting features as
blocks in DXF format from Kosmo which is built on OpenJUMP framework? I have
read (http://www.gdal.org/ogr/drv_dxf.html) that ogr dxf driver supports
reading and writing of DXF blocks. Is the DXF driver completely functional
considering block export and can be used with OpenJUMP as is or it requires
a considerable amount of development effort to implement? Where can I
download this driver and does it have some licensing issues if I try to
integrate it with Kosmo? 

Thank you for your help,
rawcofe

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6695304.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From a.neumann at carto.net  Wed Aug 17 09:24:37 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu Aug 18 18:03:23 2011
Subject: [gdal-dev] Using GDAL OGR DXF driver to export complex DXF
	Blocks from Kosmo (OpenJUMP)
In-Reply-To: <1313585887679-6695304.post@n2.nabble.com>
References: <1313585887679-6695304.post@n2.nabble.com>
Message-ID: <1971f2dd959fafc73e6c9d540fd9acee@carto.net>

 Hi,

 I don't know about Kosmo or OpenJump, but OGR supports export of 
 blocks. You would have to specify a separate template drawing containing 
 the block definitions.

 Your input data would have to contain a column named "blockname", and 
 optionally columns "blockscale" and "blockangle".

 blockname is a string corresponding to the block definitions in the 
 separate dxf template containing the block definitions, blockscale is in 
 syntax "(1,1,1)" for scaling in all three dimensions - "(1,1,1)" 
 actually does not scale as you would assume. block angle is in degrees I 
 think - I don't know which direction (clock-wise or anticlockwise and 
 starting point).

 I successfully use OGR to convert a Postgis View to DXF on the command 
 line. This is for a waste-water network where we use blocks to symbolize 
 different manhole types. Here is the command I use:

 ogr2ogr -f DXF test_ogr.dxf -dsco 
 header=header_export_werkplan_abwasser.dxf -spat 695700 245900 696000 
 246100 PG:"dbname='dbname' host='hostname' port='5432' user='www' 
 password='xxx' schemas=abwasser 
 tables=abwasser.export_dxf_geo405(the_geom)"

 Hope this helps,

 Andreas

 On Wed, 17 Aug 2011 05:58:07 -0700 (PDT), rawcofe wrote:
> Hello,
>
> I'm wondering is it possible to use ogr dxf driver for exporting 
> features as
> blocks in DXF format from Kosmo which is built on OpenJUMP framework? 
> I have
> read (http://www.gdal.org/ogr/drv_dxf.html) that ogr dxf driver 
> supports
> reading and writing of DXF blocks. Is the DXF driver completely 
> functional
> considering block export and can be used with OpenJUMP as is or it 
> requires
> a considerable amount of development effort to implement? Where can I
> download this driver and does it have some licensing issues if I try 
> to
> integrate it with Kosmo?
>
> Thank you for your help,
> rawcofe
>
> --
> View this message in context:
> 
> http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6695304.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From chaitanya.ch at gmail.com  Wed Aug 17 09:26:15 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug 18 18:04:55 2011
Subject: [gdal-dev] Using GDAL OGR DXF driver to export complex DXF Blocks
	from Kosmo (OpenJUMP)
In-Reply-To: <1313585887679-6695304.post@n2.nabble.com>
References: <1313585887679-6695304.post@n2.nabble.com>
Message-ID: <CAMKgpOagjF2sHCFbh7Oa7Y-rkwT_Eb2uYN3h0MBbmp78Yy5HNg@mail.gmail.com>

rawcofe,

This DXF driver is a part of the OGR library which comes with the GDAL
library.
To use it you have to import the whole OGR library. When you create code for
import/export of data from a different format using OGR, it can
import/export from all the formats supported by OGR [1].

OpenJUMP doesn't use GDAL. However, a plugin to use GDAL/OGR for
import/export of data could be very helpful. GDAL/OGR has java interface
[2].

First, checkout the ogr utilities [3].

[1]: http://www.gdal.org/ogr/ogr_formats.html
[2]: http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
[3]: http://www.gdal.org/ogr_utilities.html

On Wed, Aug 17, 2011 at 6:28 PM, rawcofe <rawcofe@gmail.com> wrote:

> Hello,
>
> I'm wondering is it possible to use ogr dxf driver for exporting features
> as
> blocks in DXF format from Kosmo which is built on OpenJUMP framework? I
> have
> read (http://www.gdal.org/ogr/drv_dxf.html) that ogr dxf driver supports
> reading and writing of DXF blocks. Is the DXF driver completely functional
> considering block export and can be used with OpenJUMP as is or it requires
> a considerable amount of development effort to implement? Where can I
> download this driver and does it have some licensing issues if I try to
> integrate it with Kosmo?
>
> Thank you for your help,
> rawcofe
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6695304.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110817/9e06d1e9/attachment.html
From rawcofe at gmail.com  Wed Aug 17 09:42:09 2011
From: rawcofe at gmail.com (rawcofe)
Date: Thu Aug 18 18:21:47 2011
Subject: [gdal-dev] Re: Using GDAL OGR DXF driver to export complex DXF
 Blocks from Kosmo (OpenJUMP)
In-Reply-To: <CAMKgpOagjF2sHCFbh7Oa7Y-rkwT_Eb2uYN3h0MBbmp78Yy5HNg@mail.gmail.com>
References: <1313585887679-6695304.post@n2.nabble.com>
	<CAMKgpOagjF2sHCFbh7Oa7Y-rkwT_Eb2uYN3h0MBbmp78Yy5HNg@mail.gmail.com>
Message-ID: <1313588529492-6695462.post@n2.nabble.com>

Thank you very much for the quick answer guys, I will certainly try to go
deeply into the matter and come back with more questions if I run into some
problems. 

Thanks once again, 
rawcofe

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-GDAL-OGR-DXF-driver-to-export-complex-DXF-Blocks-from-Kosmo-OpenJUMP-tp6695304p6695462.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jsimpson at wxtrends.com  Wed Aug 17 12:19:20 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Aug 18 21:15:21 2011
Subject: [gdal-dev] compiling GDAL with GEOS support.
Message-ID: <CACC0xJ+8D5UU3RDAC_uOM8kLHuj1MOMST2_PeU1UGvTGM=OgMw@mail.gmail.com>

Hi:

I'm having a strange issue when compiling GDAL with GEOS support.

I wonder if someone can help.

When I enable GEOS support using "--with-geos=/usr/local/bin/geos-config" I
get the following errors:

gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_create'
gdal/.libs/libgdal.so: undefined reference to `GEOSSimplify'
gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_write'
gdal/.libs/libgdal.so: undefined reference to
`GEOSWKBWriter_setOutputDimension'
gdal/.libs/libgdal.so: undefined reference to `GEOSUnionCascaded'
gdal/.libs/libgdal.so: undefined reference to `GEOSFree'
gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_destroy'
gdal/.libs/libgdal.so: undefined reference to
`GEOSGeom_getCoordinateDimension'

This happens when I use GEOS from the stable tarball download, the svn dev
trunk, and with svn  3.3branch checkout.

Does anyone have any ideas what might be causing this and how to fix it??

Thanks,

Jerl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110817/2c5ca9e7/attachment.html
From ben at vterrain.org  Wed Aug 17 12:48:54 2011
From: ben at vterrain.org (Ben Discoe)
Date: Thu Aug 18 21:38:58 2011
Subject: [gdal-dev] Re: Wildfire mapping
In-Reply-To: <CAN5P6KbeuyySePorQTXED0mMqK7CAT7DKy5BbO24eWKzrg-mjA@mail.gmail.com>
References: <CAN5P6KYZ85ajQ49Ciubmd3huodEabMmD5PYbHioL-81Jog3vEQ@mail.gmail.com>	<CAN5P6Kands-2Agsn4QsN4ChtF2+dO8Qa6OAmLM78WnTrSJ-8aw@mail.gmail.com>	<4E4A8047.30605@geoanalytic.com>	<4E4A8DE1.7030507@jacobs-university.de>
	<CAN5P6KbeuyySePorQTXED0mMqK7CAT7DKy5BbO24eWKzrg-mjA@mail.gmail.com>
Message-ID: <097301cc5cfd$8cc0d230$a6427690$@org>

I'd add that wildfire simulation and visualization has been done on a Open
stack, such as:

"Application for planning assistance suppression forest fires based on free
software."
2008, in Spanish.
http://dugi-doc.udg.edu/bitstream/10256/1182/1/VicedoLinares_Art.pdf
gvSIG, PostGIS, VTP (GDAL, OpenSceneGraph) etc.

-Ben

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Mark Zaller (AerialFireTech)
> Sent: Tuesday, August 16, 2011 10:41 AM
> To: Brent Fraser; Peter Baumann
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Re: Wildfire mapping
> 
> Peter & Brent,
> Thanks.?Some of those are new to me & very interesting. [..]
> 
> On 08/16/2011 04:35 PM, Brent Fraser wrote:
> Mark,
> 
> ? There are a few Open Source projects you could look into
> 
> 3D visualization environment:
> ??? VTP
> ??? WorldWind
> ??? OssimPlanet
> 
> Orthorectification of Video:
> ??? OSSIM OMAR?
> 
> Image Processing / Feature Extraction
> ??? OTB
> ??? GRASS
> 
> And I'm sure there are others.
> 
> The system you describe would be a lot of work, but it does sound
> interesting!
> 
> Best Regards,
> Brent Fraser
> 
> On 8/15/2011 10:35 PM, Mark Zaller (AerialFireTech) wrote:
> Hello, I'm pursuing a project to automatically map wildfires, and
am?looking
> for people who could contribute to this.
> 
> I volunteer as an Air Attack pilot over wildfires, and have developed an
in
> cockpit Augmented Reality system that allows us to work at night and over
> smoke. 


From ben at vterrain.org  Wed Aug 17 12:53:14 2011
From: ben at vterrain.org (Ben Discoe)
Date: Thu Aug 18 21:43:38 2011
Subject: [gdal-dev] Help with GDAL & Visual Studio 2010 & netCDF
In-Reply-To: <000901cc5b7e$d5ed3000$81c79000$@casco.net>
References: <000901cc5b7e$d5ed3000$81c79000$@casco.net>
Message-ID: <097401cc5cfe$27d3eaf0$777bc0d0$@org>

James,

In this case, it may be simpler, easier and more efficient to simply call
the NetCDF library directly, rather than going through GDAL.  Your
particular file sounds like a 3D dataset, which is stretching the bounds of
what GDAL is designed to handle, namely rasters.

The NetCDF API is relatively straightforward.  There is documentation and
examples.

-Ben

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of James Sulzman
> Sent: Monday, August 15, 2011 12:09 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Help with GDAL & Visual Studio 2010 & netCDF
> 
> Hi All,
> 
> I could use a little help, and it would be greatly appreciated.
> 
> Goal:? Write a c++ program in MS Visual Studio 2010 (on win7 x64 machine)
> that reads in a netCDF file.? Compile/build program in Visual Studio 2010
> Release or Debug x64.? Execute the program.
> The netCDF file I am trying to read in, has one variable in it.? That
> variable is a 3d raster 76x40x93 of float32 type.
> 
> [..]


From even.rouault at mines-paris.org  Wed Aug 17 14:00:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 18 22:54:53 2011
Subject: [gdal-dev] compiling GDAL with GEOS support.
In-Reply-To: <CACC0xJ+8D5UU3RDAC_uOM8kLHuj1MOMST2_PeU1UGvTGM=OgMw@mail.gmail.com>
References: <CACC0xJ+8D5UU3RDAC_uOM8kLHuj1MOMST2_PeU1UGvTGM=OgMw@mail.gmail.com>
Message-ID: <201108172000.44826.even.rouault@mines-paris.org>

Le mercredi 17 ao?t 2011 18:19:20, Jerl Simpson a ?crit :
> Hi:
> 
> I'm having a strange issue when compiling GDAL with GEOS support.
> 
> I wonder if someone can help.
> 
> When I enable GEOS support using "--with-geos=/usr/local/bin/geos-config" I
> get the following errors:
> 
> gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_create'
> gdal/.libs/libgdal.so: undefined reference to `GEOSSimplify'
> gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_write'
> gdal/.libs/libgdal.so: undefined reference to
> `GEOSWKBWriter_setOutputDimension'
> gdal/.libs/libgdal.so: undefined reference to `GEOSUnionCascaded'
> gdal/.libs/libgdal.so: undefined reference to `GEOSFree'
> gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_destroy'
> gdal/.libs/libgdal.so: undefined reference to
> `GEOSGeom_getCoordinateDimension'

Hum, what is interesting here is that all those symbols are conditionnaly used 
when GEOS >= 3.1 is detected. So my guess is that GDAL builds against the 
include files of the newer GEOS version you specify, but at the linking stage, 
there's an older libgeos that must be somewhere in the linking path, probably 
in /usr/lib that gets linked before the one you would liked too. So you might 
want to uninstall your older geos version, or to alter the linking order of 
the LIBS variable in GDALmake.opt and/or remove the mentions to -L/usr/lib 
that might be found in it
From even.rouault at mines-paris.org  Wed Aug 17 14:05:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 18 23:00:06 2011
Subject: [gdal-dev] gdal_translate wms error
In-Reply-To: <1313566604911-6694505.post@n2.nabble.com>
References: <1313566604911-6694505.post@n2.nabble.com>
Message-ID: <201108172005.49915.even.rouault@mines-paris.org>

Le mercredi 17 ao?t 2011 09:36:44, symbian11 a ?crit :
> Hi, I am trying to download some image data from a private WMS.
> 
> When I try to use gdal_translate I receive the following error (I had to
> remove the server address):
> 
> ERROR 1: GDALWMS: Unable to download block 337235, 219173.
>   URL:
> http://SERVERADDRESS&request=GetMap&version=1.1.0&layers=Orthophoto%2CLuftb
> ild_25cm%2CLuftbild_1m%2CLuftbild_4m%2CSatellitenbild_30m
> &styles=&srs=EPSG:3857&transparent=TRUE&format=image/png&width=256&height=
> 256&bbox=1545531.75694187,6010372.27699605,1545595.75694216,6010436.2769963
> 3 HTTP status code: 0, error: Recv failure: Connection was reset.
> ERROR 1: IReadBlock failed at X offset 337235, Y offset 219173
> 
> But when I copy the URL from the error message and use it in my browser it
> works fine.

That might be a sign that your WMS server doesn't support well the load of 
requests sent by the client and sometimes return an error (the "Connection was 
reset" is a likely sign that the server has given up at some point). Whereas 
when you try in your browser, it is not overloaded.

You could perhaps try to decrease the value of the <MaxConnections> parameter.

Ideally, we would perhaps need a parameter to specify a number of retries and 
a delay between them to workaround that behaviour of servers.

> 
> Here is the XML (I was not sure which parameters to use for the DataWindow.
> I just chose SizeX/Y to be four times the extent because the resolution is
> 25cm.)
> 
> <GDAL_WMS>
>     <Service name="WMS">
> <ServerUrl>SERVERADRESS</ServerUrl>
> <Layers>Orthophoto%2CLuftbild_25cm%2CLuftbild_1m%2CLuftbild_4m%2CSatelliten
> bild_30m </Layers>
> <SRS>EPSG:3857</SRS>
> <Transparent>TRUE</Transparent>
> <ImageFormat>image/png</ImageFormat>
>     </Service>
> 
>     <DataWindow>
>         <UpperLeftX>-20037508.34</UpperLeftX>
>         <UpperLeftY>20037508.34</UpperLeftY>
>         <LowerRightX>20037508.34</LowerRightX>
>         <LowerRightY>-20037508.34</LowerRightY>
>         <SizeX>160300066.72</SizeX>
>         <SizeY>160300066.72</SizeY>
>         <YOrigin>top</YOrigin>
>     </DataWindow>
> 
>     <Projection>EPSG:3857</Projection>
>     <BlockSizeX>256</BlockSizeX>
>     <BlockSizeY>256</BlockSizeY>
>     <BandsCount>3</BandsCount>
>     <MaxConnections>5</MaxConnections>
> </GDAL_WMS>
> 
> Here are the WMS Capabilities:
> 
> <?xml version='1.0' encoding="ISO-8859-1" standalone="no" ?>
> &lt;!DOCTYPE WMT_MS_Capabilities SYSTEM
> &quot;http://schemas.opengis.net/wms/1.1.1/WMS_MS_Capabilities.dtd&quot;
> [
> &lt;!ELEMENT VendorSpecificCapabilities EMPTY&gt;
> ]>
> 
> <WMT_MS_Capabilities version="1.1.1">
> 
> 
> 
> <Service>
> <Name>OGC:WMS</Name>
> <Title>Orthofoto-Revital</Title>
> <OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/>
> <ContactInformation>
> </ContactInformation>
> </Service>
> 
> <Capability>
> <Request>
> <GetCapabilities>
> <Format>application/vnd.ogc.wms_xml</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </GetCapabilities>
> <GetMap>
> <Format>image/png</Format>
> <Format>image/jpg</Format>
> <Format>image/gif</Format>
> <Format>image/png; mode=24bit</Format>
> <Format>image/wbmp</Format>
> <Format>image/tiff</Format>
> <Format>image/svg+xml</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </GetMap>
> <GetFeatureInfo>
> <Format>text/plain</Format>
> <Format>application/vnd.ogc.gml</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </GetFeatureInfo>
> <DescribeLayer>
> <Format>text/xml</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </DescribeLayer>
> <GetLegendGraphic>
> <Format>image/png</Format>
> <Format>image/jpg</Format>
> <Format>image/gif</Format>
> <Format>image/png; mode=24bit</Format>
> <Format>image/wbmp</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </GetLegendGraphic>
> <GetStyles>
> <Format>text/xml</Format>
> <DCPType>
> <HTTP>
> <Get><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Get>
> <Post><OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
> xlink:href="SERVERADDRESS;"/></Post>
> </HTTP>
> </DCPType>
> </GetStyles>
> </Request>
> <Exception>
> <Format>application/vnd.ogc.se_xml</Format>
> <Format>application/vnd.ogc.se_inimage</Format>
> <Format>application/vnd.ogc.se_blank</Format>
> </Exception>
> <VendorSpecificCapabilities />
> <UserDefinedSymbolization SupportSLD="1" UserLayer="0" UserStyle="1"
> RemoteWFS="0"/>
> <Layer>
> <Name>Orthofoto-Revital</Name>
> <Title>Orthofoto-Revital</Title>
> <SRS>EPSG:31287</SRS>
> <SRS>EPSG:4326</SRS>
> <SRS>EPSG:3857</SRS>
> <SRS>EPSG:900913</SRS>
> <LatLonBoundingBox minx="9.35676" miny="46.0872" maxx="17.3099"
> maxy="49.2092" />
> <BoundingBox SRS="EPSG:31287"
> minx="110000" miny="250000" maxx="690000" maxy="590000" />
> <Layer>
> <Name>Orthophoto</Name>
> <Title>Orthophoto</Title>
> <Abstract>Orthophoto</Abstract>
> <Layer queryable="0" opaque="0" cascaded="0">
> <Name>Luftbild_25cm</Name>
> <Title>Luftbild_25cm_LB</Title>
> <SRS>EPSG:31287</SRS>
> <SRS>EPSG:4326</SRS>
> <SRS>EPSG:3857</SRS>
> <SRS>EPSG:900913</SRS>
> <ScaleHint min="0" max="1.99561139371855" />
> </Layer>
> <Layer queryable="0" opaque="0" cascaded="0">
> <Name>Luftbild_1m</Name>
> <Title>Luftbild_1m_LB</Title>
> <SRS>EPSG:31287</SRS>
> <SRS>EPSG:4326</SRS>
> <SRS>EPSG:3857</SRS>
> <SRS>EPSG:900913</SRS>
> <ScaleHint min="1.74665887235216" max="7.73299415065938" />
> </Layer>
> <Layer queryable="0" opaque="0" cascaded="0">
> <Name>Luftbild_4m</Name>
> <Title>Luftbild_4m_LB</Title>
> <SRS>EPSG:31287</SRS>
> <SRS>EPSG:4326</SRS>
> <SRS>EPSG:3857</SRS>
> <SRS>EPSG:900913</SRS>
> <ScaleHint min="7.48404162929299" max="75.0848786886604" />
> </Layer>
> <Layer queryable="0" opaque="0" cascaded="0">
> <Name>Satellitenbild_30m</Name>
> <Title>Satellitenbild_30m</Title>
> <SRS>EPSG:31287</SRS>
> <SRS>EPSG:4326</SRS>
> <SRS>EPSG:3857</SRS>
> <SRS>EPSG:900913</SRS>
> <ScaleHint min="74.835926167294" max="4989.02848429637" />
> </Layer>
> </Layer>
> </Layer>
> </Capability>
> </WMT_MS_Capabilities>
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-translate-wms-error-tp6694505p
> 6694505.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Aug 17 14:12:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 18 23:07:32 2011
Subject: [gdal-dev] OGR/PROJ with +geoidgrids
In-Reply-To: <08ce01cc5c7c$7a54ce20$6efe6a60$@org>
References: <08ce01cc5c7c$7a54ce20$6efe6a60$@org>
Message-ID: <201108172012.49523.even.rouault@mines-paris.org>

Le mercredi 17 ao?t 2011 03:24:58, Ben Discoe a ?crit :
> It is true that geocentric XYZ coordinates are not very useful, without
> being able to convert them to coordinate with orthometric ("geoid") ("sea
> level") height.
> 
> Frank implemented 'preliminary' support for this, which i am preparing to
> test now.  Before expecting it to work in GDAL/OGR, i thought i should try
> it down in PROJ.4 first, following the description on
> http://trac.osgeo.org/proj/wiki/VerticalDatums
> 
> If i try a point near me in California, it works regularly:
> 
> cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +zone=10 +datum=WGS84
> -122.272778 37.871667 10
> 563959.68       4191825.55 10.00
> 
> But if i try to provide a geoid file (from
> http://download.osgeo.org/proj/vdatum/usa_geoid2009.zip) then it seems to
> not work:
> 
> cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +zone=10 +datum=WGS84
> +geoidgrids=g2009conus.gtx -122.272778 37.871667 10
> Rel. 4.7.1, 23 September 2009
> <cs2cs>: while processing file: <stdin>, line 1
> pj_transform(): Unknown error
> *       * 10.00
> 
> The goal is to transform the input elevation (10 meters, ellipsoidal
> height, i presume) to an orthometric height (which will use the geoid, i
> presume).
> 
> Maybe i'm doing it wrong?

Not sure what you would be doing wrong, but works for me :

$ PROJ_DEBUG=ON ~/gdal/proj/install-proj/bin/cs2cs  +proj=latlong +datum=WGS84 
+to +proj=utm +zone=10 +datum=WGS84 +geoidgrids=g2009conus.gtx
pj_open_lib(proj_def.dat): call fopen(/home/even/gdal/proj/install-
proj/share/proj/proj_def.dat) - succeeded

pj_open_lib(proj_def.dat): call fopen(/home/even/gdal/proj/install-
proj/share/proj/proj_def.dat) - succeeded

-122.272778 37.871667 10
pj_open_lib(g2009conus.gtx): call fopen(/home/even/gdal/proj/install-
proj/share/proj/g2009conus.gtx) - succeeded

GTX 4201x2041: LL=(-130,24) UR=(-60,58)
pj_open_lib(g2009conus.gtx): call fopen(/home/even/gdal/proj/install-
proj/share/proj/g2009conus.gtx) - succeeded

pj_apply_gridshift(): used GTX Vertical Grid Shift File
563959.68	4191825.55 42.27

Do you use latest SVN version of proj ? Do you get interesting info with 
PROJ_DEBUG set ?

> 
> Thanks,
> Ben
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jsimpson at wxtrends.com  Wed Aug 17 14:20:13 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Aug 18 23:15:15 2011
Subject: [gdal-dev] compiling GDAL with GEOS support.
In-Reply-To: <201108172000.44826.even.rouault@mines-paris.org>
References: <CACC0xJ+8D5UU3RDAC_uOM8kLHuj1MOMST2_PeU1UGvTGM=OgMw@mail.gmail.com>
	<201108172000.44826.even.rouault@mines-paris.org>
Message-ID: <CACC0xJLdY=w0ezsnQm9SPRzWwHocE7d3iO=kSz2UyuuvDgcktw@mail.gmail.com>

That was the problem.  I thought specifying the GEOS install directly would
overcome that.

Thanks for the help.

Jerl

On Wed, Aug 17, 2011 at 1:00 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 17 ao?t 2011 18:19:20, Jerl Simpson a ?crit :
> > Hi:
> >
> > I'm having a strange issue when compiling GDAL with GEOS support.
> >
> > I wonder if someone can help.
> >
> > When I enable GEOS support using "--with-geos=/usr/local/bin/geos-config"
> I
> > get the following errors:
> >
> > gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_create'
> > gdal/.libs/libgdal.so: undefined reference to `GEOSSimplify'
> > gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_write'
> > gdal/.libs/libgdal.so: undefined reference to
> > `GEOSWKBWriter_setOutputDimension'
> > gdal/.libs/libgdal.so: undefined reference to `GEOSUnionCascaded'
> > gdal/.libs/libgdal.so: undefined reference to `GEOSFree'
> > gdal/.libs/libgdal.so: undefined reference to `GEOSWKBWriter_destroy'
> > gdal/.libs/libgdal.so: undefined reference to
> > `GEOSGeom_getCoordinateDimension'
>
> Hum, what is interesting here is that all those symbols are conditionnaly
> used
> when GEOS >= 3.1 is detected. So my guess is that GDAL builds against the
> include files of the newer GEOS version you specify, but at the linking
> stage,
> there's an older libgeos that must be somewhere in the linking path,
> probably
> in /usr/lib that gets linked before the one you would liked too. So you
> might
> want to uninstall your older geos version, or to alter the linking order of
> the LIBS variable in GDALmake.opt and/or remove the mentions to -L/usr/lib
> that might be found in it
>



-- 
This communication is privileged and may contain confidential information.
 It's intended only for the use of the person or entity named above. If you
are not the intended recipient, do not distribute or copy this
communication. If you have received this communication in error, please
notify the sender immediately and return the original to the email address
above. ? Copyright 2011 Weather Trends International, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110817/9e802582/attachment.html
From ben at vterrain.org  Wed Aug 17 19:50:58 2011
From: ben at vterrain.org (Ben Discoe)
Date: Fri Aug 19 05:04:29 2011
Subject: [gdal-dev] OGR/PROJ with +geoidgrids
In-Reply-To: <201108172012.49523.even.rouault@mines-paris.org>
References: <08ce01cc5c7c$7a54ce20$6efe6a60$@org>
	<201108172012.49523.even.rouault@mines-paris.org>
Message-ID: <09ac01cc5d38$833370c0$899a5240$@org>

Aha!  Thanks Even, setting PROJ_DEBUG=ON showed the problem.

I had assumed when giving +geoidgrids=g2009conus.gtx, it would find the gtx in the current directory.  But, now i see it looks in only one place, in the PROJ_LIB location.  That's OK.  I copied my .gtx files there, and now it works.

Yes, i'm using the SVN version of PROJ4.

BTW, it would be really good to have a new release of PROJ4. The last was in 2009.  And it is confusing, because the executables built from SVN report "4.7.1" when run, and Frank's page on http://trac.osgeo.org/proj/wiki/VerticalDatums says "from version 4.8.0 on there is support.." when we haven't reached that version yet.

-Ben

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Wednesday, August 17, 2011 11:13 AM
> To: gdal-dev@lists.osgeo.org
> 
> Le mercredi 17 aot 2011 03:24:58, Ben Discoe a crit :
> > It is true that geocentric XYZ coordinates are not very useful, without
> > being able to convert them to coordinate with orthometric ("geoid") ("sea
> > level") height.
> >
> > Frank implemented 'preliminary' support for this, which i am preparing to
> > test now.  Before expecting it to work in GDAL/OGR, i thought i should try
> > it down in PROJ.4 first, following the description on
> > http://trac.osgeo.org/proj/wiki/VerticalDatums
> 
> Not sure what you would be doing wrong, but works for me :
> 
> $ PROJ_DEBUG=ON ~/gdal/proj/install-proj/bin/cs2cs  +proj=latlong
> +datum=WGS84
> +to +proj=utm +zone=10 +datum=WGS84 +geoidgrids=g2009conus.gtx
> pj_open_lib(proj_def.dat): call fopen(/home/even/gdal/proj/install-
> proj/share/proj/proj_def.dat) - succeeded
> 
> -122.272778 37.871667 10
> pj_open_lib(g2009conus.gtx): call fopen(/home/even/gdal/proj/install-
> proj/share/proj/g2009conus.gtx) - succeeded

From jukka.rahkonen at mmmtike.fi  Thu Aug 18 02:38:28 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Aug 19 12:14:18 2011
Subject: [gdal-dev] Re: Using GDAL OGR DXF driver to export complex DXF
	Blocks	from Kosmo (OpenJUMP)
References: <1313585887679-6695304.post@n2.nabble.com>
	<CAMKgpOagjF2sHCFbh7Oa7Y-rkwT_Eb2uYN3h0MBbmp78Yy5HNg@mail.gmail.com>
Message-ID: <loom.20110818T082530-593@post.gmane.org>

Chaitanya kumar CH <chaitanya.ch <at> gmail.com> writes:

> OpenJUMP doesn't use GDAL. However, a plugin to use GDAL/OGR for import/export
of data could be very helpful. GDAL/OGR has java interface [2].

There is an OpenJUMP derivative SkyJUMP http://sourceforge.net/projects/skyjump/
which is using an OGR based conversion utility iGOR 
http://sourceforge.net/projects/ogr-igor/

Perhaps this information could be of some help. SkyJUMP is worth having a look
in any case for OpenJUMP users. It has nice features developed for real world
needs and every now and then Larry Becker has added some SkyJUMP tools to
OpenJUMP. I suppose that Larry is the one to contact for more info about iGOR as
well.

-Jukka Rahkonen


From cavyzyvokawosadu at tempomail.fr  Thu Aug 18 04:16:33 2011
From: cavyzyvokawosadu at tempomail.fr (symbian11)
Date: Fri Aug 19 13:57:27 2011
Subject: [gdal-dev] Re: gdal_translate wms error
In-Reply-To: <201108172005.49915.even.rouault@mines-paris.org>
References: <1313566604911-6694505.post@n2.nabble.com>
	<201108172005.49915.even.rouault@mines-paris.org>
Message-ID: <1313655393769-6698521.post@n2.nabble.com>

Hi,

Now I tried it with a tiny area (10x10m), so it should be able to get the
whole area with one call.
I also reduced the MaxConnections to 1. 
I still get the same error. So it's probably not due to a server overload...

regards, Chris

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-wms-error-tp6694505p6698521.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ingo.weinzierl at intevation.de  Thu Aug 18 06:23:06 2011
From: ingo.weinzierl at intevation.de (Ingo Weinzierl)
Date: Fri Aug 19 16:10:55 2011
Subject: [gdal-dev] Dump Shapefile into DB using ogr2ogr
Message-ID: <20110818102306.GC22454@intevation.de>

Hello GDAL community,

I have already used GDAL to get information about shapefiles or to
insert a shapefile into a database. So, many thanks to all of you!

Now, I've just tried to dump a shapefile into an existing table of a
spatial database (PostGIS / Oracle) using ogr2ogr. Therefore, I need
some help:

The only thing of the shapefile I need is the geometry column, but
the database schema requires a further Integer column (NOT NULL
constraint). In my use-case, I would like to define this Integer
value manually while calling ogr2ogr. Therefore, I've already
searched for some VRT examples, with no success.

In simple words: I want to insert the geometry column (shapefile)
and an Integer value (manually defined) into a pre-defined spatial
database (PostGIS / Oracle).

I would be glad if someone could give me some hints how to realize
such a ogr2ogr call.

Regards, Ingo
-- 
Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B 18998
Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
From chaitanya.ch at gmail.com  Thu Aug 18 07:30:58 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 19 17:22:26 2011
Subject: [gdal-dev] Dump Shapefile into DB using ogr2ogr
In-Reply-To: <20110818102306.GC22454@intevation.de>
References: <20110818102306.GC22454@intevation.de>
Message-ID: <CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>

Ingo,

Use the -select option with an empty string in ogr2ogr [1].
ogr2ogr -select "" dest.shp src.shp

[1]: http://www.gdal.org/ogr2ogr.html

On Thu, Aug 18, 2011 at 3:53 PM, Ingo Weinzierl <
ingo.weinzierl@intevation.de> wrote:

> Hello GDAL community,
>
> I have already used GDAL to get information about shapefiles or to
> insert a shapefile into a database. So, many thanks to all of you!
>
> Now, I've just tried to dump a shapefile into an existing table of a
> spatial database (PostGIS / Oracle) using ogr2ogr. Therefore, I need
> some help:
>
> The only thing of the shapefile I need is the geometry column, but
> the database schema requires a further Integer column (NOT NULL
> constraint). In my use-case, I would like to define this Integer
> value manually while calling ogr2ogr. Therefore, I've already
> searched for some VRT examples, with no success.
>
> In simple words: I want to insert the geometry column (shapefile)
> and an Integer value (manually defined) into a pre-defined spatial
> database (PostGIS / Oracle).
>
> I would be glad if someone could give me some hints how to realize
> such a ogr2ogr call.
>
> Regards, Ingo
> --
> Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
> Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B
> 18998
> Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110818/2640ed8c/attachment.html
From christianhelring at gmail.com  Thu Aug 18 07:37:54 2011
From: christianhelring at gmail.com (Chrishelring)
Date: Fri Aug 19 17:29:41 2011
Subject: [gdal-dev] Mapinfo --> postgis db using ogr2ogr,
	failing to overwrite
Message-ID: <1313667474609-6699039.post@n2.nabble.com>

Hi list,

I?m trying to upload a Mapinfo table (grundejerforeninger.tab) to our
postgis db using ogr2ogr. The tabel should be located in the schema
"rk_test" and could exist (e.g. the table should be replaced with the new
one). I?m using ogr2ogr with the following:

ogr2ogr.exe -overwrite -f "PostgreSQL" -s_srs EPSG:25832 -lco PRECISION=NO
-lco DIM=2 -lco LAUNDER=YES -lco SCHEMA=rk_test -nlt GEOMETRY -t_srs
EPSG:25832 "PG:user=k175_test password=k175_test dbname=k175_test
host=webgis.roedovre.local port=5432" grundejerforeninger.tab 

Resulting in,

ERROR 1: CREATE TABLE "rk_test"."grundejerforeninger" ( OGC_FID SERIAL,
CONSTRAI
NT "grundejerforeninger_pk" PRIMARY KEY (OGC_FID) )
ERROR:  relation "grundejerforeninger" already exists

ERROR 1: Terminating translation prematurely after failed
translation of layer grundejerforeninger (use -skipfailures to skip errors)

What am I doing wrong?

Christian


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mapinfo-postgis-db-using-ogr2ogr-failing-to-overwrite-tp6699039p6699039.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Aug 18 08:59:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 19 18:55:36 2011
Subject: [gdal-dev] Mapinfo --> postgis db using ogr2ogr,
	failing to overwrite
In-Reply-To: <1313667474609-6699039.post@n2.nabble.com>
References: <1313667474609-6699039.post@n2.nabble.com>
Message-ID: <CAMKgpOYFgNtftKN1OMobtd33RhtDn8k_2WEkx4TcORWSuNtvzw@mail.gmail.com>

Christian,

Using the -overwrite option and -lco SCHEMA will not work in ogr2ogr.
Refer to http://www.gdal.org/ogr/drv_pg.html for details.

On Thu, Aug 18, 2011 at 5:07 PM, Chrishelring <christianhelring@gmail.com>wrote:

> Hi list,
>
> I?m trying to upload a Mapinfo table (grundejerforeninger.tab) to our
> postgis db using ogr2ogr. The tabel should be located in the schema
> "rk_test" and could exist (e.g. the table should be replaced with the new
> one). I?m using ogr2ogr with the following:
>
> ogr2ogr.exe -overwrite -f "PostgreSQL" -s_srs EPSG:25832 -lco PRECISION=NO
> -lco DIM=2 -lco LAUNDER=YES -lco SCHEMA=rk_test -nlt GEOMETRY -t_srs
> EPSG:25832 "PG:user=k175_test password=k175_test dbname=k175_test
> host=webgis.roedovre.local port=5432" grundejerforeninger.tab
>
> Resulting in,
>
> ERROR 1: CREATE TABLE "rk_test"."grundejerforeninger" ( OGC_FID SERIAL,
> CONSTRAI
> NT "grundejerforeninger_pk" PRIMARY KEY (OGC_FID) )
> ERROR:  relation "grundejerforeninger" already exists
>
> ERROR 1: Terminating translation prematurely after failed
> translation of layer grundejerforeninger (use -skipfailures to skip errors)
>
> What am I doing wrong?
>
> Christian
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Mapinfo-postgis-db-using-ogr2ogr-failing-to-overwrite-tp6699039p6699039.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110818/b797ab21/attachment.html
From cavyzyvokawosadu at tempomail.fr  Thu Aug 18 11:46:14 2011
From: cavyzyvokawosadu at tempomail.fr (symbian11)
Date: Fri Aug 19 21:51:13 2011
Subject: [gdal-dev] Re: gdal_translate wms error
In-Reply-To: <1313566604911-6694505.post@n2.nabble.com>
References: <1313566604911-6694505.post@n2.nabble.com>
Message-ID: <1313682374074-6699890.post@n2.nabble.com>

HI,

I just managed to get a public access key enabled for one week. (The data is
watermarked)
So you may now try it with the following WMS address:

http://gis.lebensministerium.at/wmsgw/?key=891667a3d78028e816d30d3c3fd2298a

The desired layer is "Luftbild_1m"

I am still not able to download anything with gdal_translate. But the
computed URL from the error message 
will create the correct result in the browser.

I would be very grateful if you could have a look at it.

Thanks, Chris





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-wms-error-tp6694505p6699890.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Aug 18 12:05:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 19 22:11:15 2011
Subject: [gdal-dev] Re: gdal_translate wms error
In-Reply-To: <1313682374074-6699890.post@n2.nabble.com>
References: <1313566604911-6694505.post@n2.nabble.com>
	<1313682374074-6699890.post@n2.nabble.com>
Message-ID: <201108181805.19216.even.rouault@mines-paris.org>

Works perfectly for me with GDAL 1.8.0 and GDAL trunk if I try

gdal_translate test_wms.xml out.tif -projwin 400000.000 420000 401000 419000

with the following test_wms.xml :

<GDAL_WMS>
  <Service name="WMS">
    <Version>1.1.1</Version>
    <ServerUrl>http://gis.lebensministerium.at/wmsgw/?key=891667a3d78028e816d30d3c3fd2298a&amp;SERVICE=WMS</ServerUrl>
    <Layers>Luftbild_1m</Layers>
    <SRS>EPSG:31287</SRS>
    <ImageFormat>image/jpeg</ImageFormat>
    <Transparent>FALSE</Transparent>
  </Service>
  <DataWindow>
    <UpperLeftX>110000</UpperLeftX>
    <UpperLeftY>590000</UpperLeftY>
    <LowerRightX>690000</LowerRightX>
    <LowerRightY>250000</LowerRightY>
    <SizeX>580000</SizeX>
    <SizeY>340000</SizeY>
  </DataWindow>
  <BandsCount>3</BandsCount>
  <BlockSizeX>1024</BlockSizeX>
  <BlockSizeY>1024</BlockSizeY>
</GDAL_WMS>

From cavyzyvokawosadu at tempomail.fr  Thu Aug 18 15:57:17 2011
From: cavyzyvokawosadu at tempomail.fr (symbian11)
Date: Sat Aug 20 02:16:17 2011
Subject: [gdal-dev] Re: gdal_translate wms error
In-Reply-To: <201108181805.19216.even.rouault@mines-paris.org>
References: <1313566604911-6694505.post@n2.nabble.com>
	<1313682374074-6699890.post@n2.nabble.com>
	<201108181805.19216.even.rouault@mines-paris.org>
Message-ID: <1313697437805-6700635.post@n2.nabble.com>

Thanks a lot,

I guess something in my xml was probably wrong. It works now with yours.
This was really quick help. I very much appreciate it.

regards, Chris

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-wms-error-tp6694505p6700635.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hsumanto at vpac.org  Fri Aug 19 01:52:14 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Sat Aug 20 12:43:31 2011
Subject: [gdal-dev] gdalwarp capability to output as netCDF format
Message-ID: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>

Hi Everyone,

Just wondering if there is work currently being done to add the capability to output as netCDF format
into gdalwarp.

Regards,

Hendy


-- 
Hendy Sumanto
Software Developer

Victorian Partnership for Advanced Computing (VPAC)
Innovation Powered by Advanced Computing
http://www.vpac.org
t: +61 3 9020 0191 (TC)
t: +61 3 9647 5437 (FB)
f: +61 3 9646 7787
m: +61 4 1258 0874
From chaitanya.ch at gmail.com  Fri Aug 19 02:11:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug 20 13:03:26 2011
Subject: [gdal-dev] gdalwarp capability to output as netCDF format
In-Reply-To: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>
References: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>
Message-ID: <CAMKgpOaYo2i7JFLbh55wgEjB3uQTUFFVRqSYQJQ-NoM_-BvSVQ@mail.gmail.com>

Hendy,

gdalwarp is a utility that uses the gdal library. It can read/write in
netCDF format if the library is built with netCDF capability[1]. To check if
your installation has that capability, use the command "gdalwarp --formats".

[1]: http://www.gdal.org/formats_list.html

On Fri, Aug 19, 2011 at 11:22 AM, Hendy Sumanto <hsumanto@vpac.org> wrote:

> Hi Everyone,
>
> Just wondering if there is work currently being done to add the capability
> to output as netCDF format
> into gdalwarp.
>
> Regards,
>
> Hendy
>
>
> --
> Hendy Sumanto
> Software Developer
>
> Victorian Partnership for Advanced Computing (VPAC)
> Innovation Powered by Advanced Computing
> http://www.vpac.org
> t: +61 3 9020 0191 (TC)
> t: +61 3 9647 5437 (FB)
> f: +61 3 9646 7787
> m: +61 4 1258 0874
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110819/92143604/attachment.html
From hsumanto at vpac.org  Fri Aug 19 02:44:15 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Sat Aug 20 13:38:27 2011
Subject: [gdal-dev] gdalwarp capability to output as netCDF format
In-Reply-To: <CAMKgpOaYo2i7JFLbh55wgEjB3uQTUFFVRqSYQJQ-NoM_-BvSVQ@mail.gmail.com>
Message-ID: <420727696.63151.1313736255459.JavaMail.root@mail.vpac.org>

Hi Chaitanya,

Thanks for your quick response.
I am actually referring to whether there is any work to solve this issue
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026153.html

where gdalwarp cannot directly output to netcdf for e.g. if I am doing

gdalwarp -of netCDF -t_srs 'epsg:3112' input.nc output.nc

Output driver `netCDF' not recognised or does not support
direct output file creation.  The following format drivers are configured
and support direct output:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  ...
  ...
  
gdalwarp --formats
  GTiff (rw+v): GeoTIFF
  netCDF (rw): Network Common Data Format

'rw+' is read, write and update (ie. supports Create)
'rw' is read or write (ie. supports CreateCopy)

So probably I should have phrased my question as if there is work currently being done to add the capability to direct output as netCDF format 
into gdalwarp so that its netCDF support is rw+ (read, write and update supports Create). 

Regards,

Hendy
From landa.martin at gmail.com  Fri Aug 19 08:10:02 2011
From: landa.martin at gmail.com (Martin Landa)
Date: Fri Aug 19 08:20:13 2011
Subject: [gdal-dev] transactions and ExecuteSQL
Message-ID: <CA+Ei1OfTRCj+Ru5nqe62CKWXqLK9mrGdc2Cf4m75G_+6CKL+Jw@mail.gmail.com>

Hi,

how to deal with transactions when calling ExecuteSQL()? Example for
PostGIS layer

"""
    poDS = OGRSFDriverRegistrar::Open("PG:dbname=pgis_nc", FALSE);

    poLayer = poDS->GetLayerByName("b_1");
    poLayer->StartTransaction();

    poDS->ExecuteSQL("update b_1 set objectid = 5 where cat = 4", NULL, NULL);

    poLayer->CommitTransaction();
"""

Calling StartTransaction() and CommitTransaction() has no effect since
ExecuteSQL() calls FlushSoftTransaction(). How to deal with that?

Thanks in advance, Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
From ingo.weinzierl at intevation.de  Fri Aug 19 09:05:43 2011
From: ingo.weinzierl at intevation.de (Ingo Weinzierl)
Date: Fri Aug 19 09:18:53 2011
Subject: [gdal-dev] Dump Shapefile into DB using ogr2ogr
In-Reply-To: <CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
References: <20110818102306.GC22454@intevation.de>
	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
Message-ID: <20110819130543.GA32098@intevation.de>

Thanks for the quick reply, but the "-select" option only solves one
of the two parts of my problem. I still need to append a further
column that does not exist in the shapefile and which should be
defined manually.
I already played a while with VRT files. I tried to define a <Field>
node for each column I want to insert into my database - without any
success...

Regards, Ingo

On Thu, Aug 18, 2011 at 05:00:58PM +0530, Chaitanya kumar CH wrote:
> Ingo,
> 
> Use the -select option with an empty string in ogr2ogr [1].
> ogr2ogr -select "" dest.shp src.shp
> 
> [1]: http://www.gdal.org/ogr2ogr.html
> 
> On Thu, Aug 18, 2011 at 3:53 PM, Ingo Weinzierl <
> ingo.weinzierl@intevation.de> wrote:
> 
> > Hello GDAL community,
> >
> > I have already used GDAL to get information about shapefiles or to
> > insert a shapefile into a database. So, many thanks to all of you!
> >
> > Now, I've just tried to dump a shapefile into an existing table of a
> > spatial database (PostGIS / Oracle) using ogr2ogr. Therefore, I need
> > some help:
> >
> > The only thing of the shapefile I need is the geometry column, but
> > the database schema requires a further Integer column (NOT NULL
> > constraint). In my use-case, I would like to define this Integer
> > value manually while calling ogr2ogr. Therefore, I've already
> > searched for some VRT examples, with no success.
> >
> > In simple words: I want to insert the geometry column (shapefile)
> > and an Integer value (manually defined) into a pre-defined spatial
> > database (PostGIS / Oracle).
> >
> > I would be glad if someone could give me some hints how to realize
> > such a ogr2ogr call.
> >
> > Regards, Ingo
> > --
> > Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
> > Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B
> > 18998
> > Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E

-- 
Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B 18998
Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
From chaitanya.ch at gmail.com  Fri Aug 19 09:16:36 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 19 09:30:19 2011
Subject: [gdal-dev] Dump Shapefile into DB using ogr2ogr
In-Reply-To: <20110819130543.GA32098@intevation.de>
References: <20110818102306.GC22454@intevation.de>
	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
	<20110819130543.GA32098@intevation.de>
Message-ID: <CAMKgpObr_QsnEYmTqFXpH5EGObsw7b2Uu2PHG-Y4fy7OrmsVhg@mail.gmail.com>

Ingo,

By default a Feature ID column is entered into the database regardless of
the fields. No duplicates or null values.
Perhaps you might want to modify this column.

On Fri, Aug 19, 2011 at 6:35 PM, Ingo Weinzierl <
ingo.weinzierl@intevation.de> wrote:

> Thanks for the quick reply, but the "-select" option only solves one
> of the two parts of my problem. I still need to append a further
> column that does not exist in the shapefile and which should be
> defined manually.
> I already played a while with VRT files. I tried to define a <Field>
> node for each column I want to insert into my database - without any
> success...
>
> Regards, Ingo
>
> On Thu, Aug 18, 2011 at 05:00:58PM +0530, Chaitanya kumar CH wrote:
> > Ingo,
> >
> > Use the -select option with an empty string in ogr2ogr [1].
> > ogr2ogr -select "" dest.shp src.shp
> >
> > [1]: http://www.gdal.org/ogr2ogr.html
> >
> > On Thu, Aug 18, 2011 at 3:53 PM, Ingo Weinzierl <
> > ingo.weinzierl@intevation.de> wrote:
> >
> > > Hello GDAL community,
> > >
> > > I have already used GDAL to get information about shapefiles or to
> > > insert a shapefile into a database. So, many thanks to all of you!
> > >
> > > Now, I've just tried to dump a shapefile into an existing table of a
> > > spatial database (PostGIS / Oracle) using ogr2ogr. Therefore, I need
> > > some help:
> > >
> > > The only thing of the shapefile I need is the geometry column, but
> > > the database schema requires a further Integer column (NOT NULL
> > > constraint). In my use-case, I would like to define this Integer
> > > value manually while calling ogr2ogr. Therefore, I've already
> > > searched for some VRT examples, with no success.
> > >
> > > In simple words: I want to insert the geometry column (shapefile)
> > > and an Integer value (manually defined) into a pre-defined spatial
> > > database (PostGIS / Oracle).
> > >
> > > I would be glad if someone could give me some hints how to realize
> > > such a ogr2ogr call.
> > >
> > > Regards, Ingo
> > > --
> > > Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
> > > Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B
> > > 18998
> > > Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
>
> --
> Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
> Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B
> 18998
> Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110819/450cb3d1/attachment.html
From even.rouault at mines-paris.org  Fri Aug 19 11:23:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 19 11:43:46 2011
Subject: [gdal-dev] transactions and ExecuteSQL
In-Reply-To: <CA+Ei1OfTRCj+Ru5nqe62CKWXqLK9mrGdc2Cf4m75G_+6CKL+Jw@mail.gmail.com>
References: <CA+Ei1OfTRCj+Ru5nqe62CKWXqLK9mrGdc2Cf4m75G_+6CKL+Jw@mail.gmail.com>
Message-ID: <1313767386.4e4e7fda153c3@webmail.free.fr>

Selon Martin Landa <landa.martin@gmail.com>:

> Hi,
>
> how to deal with transactions when calling ExecuteSQL()? Example for
> PostGIS layer
>
> """
>     poDS = OGRSFDriverRegistrar::Open("PG:dbname=pgis_nc", FALSE);
>
>     poLayer = poDS->GetLayerByName("b_1");
>     poLayer->StartTransaction();
>
>     poDS->ExecuteSQL("update b_1 set objectid = 5 where cat = 4", NULL,
> NULL);
>
>     poLayer->CommitTransaction();
> """
>
> Calling StartTransaction() and CommitTransaction() has no effect since
> ExecuteSQL() calls FlushSoftTransaction(). How to deal with that?

The transaction mechanism is currently only designed to operate when doing
operation on a same layer, so I guess it's the reason that COMMIT is forced when
you call ExecuteSQL() that can have potentially effects on things unrelated.
With the current implementation, I don't see any way of having ExecuteSQL()
doing things in an already existing transaction. You will have to modify the
code for that. AFAIR, there's a patch in Trac that tried to bring per-datasource
transactions. But that would need extending the OGR API and analysing the
impacts of how interleaved operations on different layers would work.

>
> Thanks in advance, Martin
>
> --
> Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From peifer at gmx.eu  Fri Aug 19 11:53:00 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Aug 19 12:15:12 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <20110819130543.GA32098@intevation.de>
References: <20110818102306.GC22454@intevation.de>	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
	<20110819130543.GA32098@intevation.de>
Message-ID: <4E4E86DC.7080207@gmx.eu>

On 19/08/2011 15:05, Ingo Weinzierl wrote:
> Thanks for the quick reply, but the "-select" option only solves one
> of the two parts of my problem. I still need to append a further
> column that does not exist in the shapefile and which should be
> defined manually.

I am not sure if I fully understood the issue, but... what about:

... -sql "select cast(999 as integer(3)) as field from ..."

(If you want an additional integer column with name `field', where all 
values are defined to be 999)

Hermann

From chaitanya.ch at gmail.com  Fri Aug 19 11:59:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 19 12:21:52 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <4E4E86DC.7080207@gmx.eu>
References: <20110818102306.GC22454@intevation.de>
	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
	<20110819130543.GA32098@intevation.de> <4E4E86DC.7080207@gmx.eu>
Message-ID: <CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>

That should work just fine.

On Fri, Aug 19, 2011 at 9:23 PM, Hermann Peifer <peifer@gmx.eu> wrote:

> On 19/08/2011 15:05, Ingo Weinzierl wrote:
>
>> Thanks for the quick reply, but the "-select" option only solves one
>> of the two parts of my problem. I still need to append a further
>> column that does not exist in the shapefile and which should be
>> defined manually.
>>
>
> I am not sure if I fully understood the issue, but... what about:
>
> ... -sql "select cast(999 as integer(3)) as field from ..."
>
> (If you want an additional integer column with name `field', where all
> values are defined to be 999)
>
> Hermann
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110819/2324d4c8/attachment.html
From scalliwag69 at hotmail.com  Fri Aug 19 15:55:55 2011
From: scalliwag69 at hotmail.com (dealaskan)
Date: Fri Aug 19 16:31:24 2011
Subject: [gdal-dev] NITF reading with GDAL on Android
Message-ID: <1313783755381-6704751.post@n2.nabble.com>

I've been able to build and install GDAL onto my Android.  Took a little bit
of trying, but it appears to be working on some, but not all files.  When I
try to open some of my NITF files, I get an error stating "Invalid values
for block dimension/number" - this occurs when I call GDALOpen.  The image
is opened because I can read the image dimensions, but that's about it.  I
ran gdalinfo on the same image from my PC and everything looks fine
including the geo data, so I'm guessing the image is fine and its the
android library that's has the error.
Is there anyone out there working on the GDAL port that might have any idea
as to why my GDAL isn't working?

Development box is XP, and the Android is Nexus One.
Thanks.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-reading-with-GDAL-on-Android-tp6704751p6704751.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ben at vterrain.org  Fri Aug 19 16:49:45 2011
From: ben at vterrain.org (Ben Discoe)
Date: Fri Aug 19 17:28:27 2011
Subject: [gdal-dev] Geocentric Coordinate System Support
In-Reply-To: <4D77AD8E.7070006@pobox.com>
References: <4D77AD8E.7070006@pobox.com>
Message-ID: <00f101cc5eb1$8780f6a0$9682e3e0$@org>

Frank et al.,

I am testing the Geocentric support; in particular, the ability to transform
from Geocentric to a SRS with a vertical datum.

Since Geocentric was committed in March, and GDAL 1.8.1 was released in
July, i thought that 1.8.1 might contain the Geocentric support.  But, it
does not seem to be there.  The ogr_fromepsg.cpp in 1.8.1 dates from last
December.  So, for testing, i have built GDAL from today's SVN.

Basic geocentric support seems to work fine:

    OGRSpatialReference srs1, srs2;
    srs1.SetWellKnownGeogCS("WGS84");
    srs2.importFromEPSG(4978);	// geocentric (ECEF)
    OGRCoordinateTransformation *oct =
OGRCreateCoordinateTransformation(&srs1, &srs2);

    double x, y, z;
    x = -122.272778;
    y = 37.871667;
    z = 0;
    oct->Transform(1, &x, &y, &z);

This gives (-2691744, -4262401, 3894209) which is a reasonable-looking
geocentric value.  However, the first question is:

1. How is the input z (i.e. elevation) being interpreted?  The input is only
a 2D coordinate system, with no definition of what Z is.  Is it assuming
that z is an ellipsoidal height, i.e. in this case relative to the WGS84
ellipsoid?

Ellipsoidal elevation is not very useful.  To be useful, we must be able to
specify the vertical coordinates of the input, e.g. in order to interpret is
as orthometric height, i.e. relative to a geoid.

I know that the underlying support for Vertical Datums in PROJ.4 works,
using an SRS like:
	+proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx

However, how to do this from OGR is not clear.  It might involve
OGRSpatialReference::SetVertCS, but i could not find any example anywhere
(even googling) of how to call SetVertCS.  I tried to guess, by working
backwards:

    srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs
+geoidgrids=g2009conus.gtx");
    srs.exportToPrettyWkt(...);

Which produces:
  COMPD_CS["WGS 84 + Unnamed Vertical Datum",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    VERT_CS["Unnamed",
        VERT_DATUM["Unnamed",2005,
            EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
        AXIS["Up",UP]]]

2. How to specify the vertical with OGR (using SetVertCS, or any other way)
such that it will result in PROJ.4 using the necessary GTX file?

Thanks,
Ben

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: Wednesday, March 09, 2011 8:41 AM
> To: gdal-dev
> Subject: [gdal-dev] Geocentric Coordinate System Support
> 
> Folks,
> 
> Yesterday I introduced Geocentric coordinate system support in
> GDAL/OGR.  This includes OGRSpatialReference support for geocentric
> coordinate systems, the ability to looking them up from EPSG, and
> the ability to translate them to/from PROJ.4 format so they can be
> used for transformation.  This is an example of a geocentric coordinate
> system looked up from EPSG.  (Note the root is "GEOCCS")
> 
> GEOCCS["WGS 84 (geocentric)",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AXIS["Geocentric X",OTHER],
>      AXIS["Geocentric Y",OTHER],
>      AXIS["Geocentric Z",NORTH],
>      AUTHORITY["EPSG","4328"]]
> 
> I think there will be relatively little need for this coordinate system,
> but I would appreciate feedback from anyone using it.
> 
>    http://trac.osgeo.org/gdal/changeset/21916
> 
> Best regards,
> --
>
---------------------------------------+------------------------------------
-
> -
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jachym.cepicky at gmail.com  Fri Aug 19 17:46:16 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Fri Aug 19 18:27:49 2011
Subject: [gdal-dev] wcs driver not cooperating
Message-ID: <CAAZUH4G-qW_p9JXsKr3dFdfR+yVqa4+EN6=vs0rcg7NwujAGbw@mail.gmail.com>

Hi,

using gdal 1.9 (trunk)

I try to read data from this service (with following configuration):

<WCS_GDAL>
  <ServiceURL>http://motherlode.ucar.edu:8080/thredds/wcs/fmrc/NCEP/DGEX/Alaska_12km/NCEP-DGEX-Alaska_12km_best.ncd?</ServiceURL>
  <CoverageName>Geopotential_height</CoverageName>
</WCS_GDAL>

gdalinfo says:


ERROR 1: HTTP error code : 400
ERROR 1: BBOX [-2382.54740463738,-4406.77080800545,-2358.65740463738,-4430.66080800545]
minimum point larger than maximum point.
gdalinfo failed - unable to open 'wcs.xml'.

That seems logical

The request, which is send to the server (by gdal, while calling gdalinfo) is

/thredds/wcs/fmrc/NCEP/DGEX/Alaska_12km/NCEP-DGEX-Alaska_12km_best.ncd?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=Geopotential_height&FORMAT=GeoTIFF&BBOX=-2382.54740463738,-4406.77080800545,-2358.65740463738,-4430.66080800545&WIDTH=2&HEIGHT=2&CRS=OGC:CRS84&time=2011-08-27T12:00:00

The bbox seems all right to me (minx,miny, maxx, maxy)

So the question of mine would be:

is the server configured wrong, or is that s gdal issue?

Thanks for help

Jachym

NOTE: I have absolutely no relation to the server and I do not have
single idea, what are the data about.

-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
From even.rouault at mines-paris.org  Fri Aug 19 18:02:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 19 18:45:10 2011
Subject: [gdal-dev] wcs driver not cooperating
In-Reply-To: <CAAZUH4G-qW_p9JXsKr3dFdfR+yVqa4+EN6=vs0rcg7NwujAGbw@mail.gmail.com>
References: <CAAZUH4G-qW_p9JXsKr3dFdfR+yVqa4+EN6=vs0rcg7NwujAGbw@mail.gmail.com>
Message-ID: <201108200002.42150.even.rouault@mines-paris.org>

Le vendredi 19 ao?t 2011 23:46:16, Jachym Cepicky a ?crit :

Looks like you are running into http://trac.osgeo.org/gdal/ticket/4118
From alexander.bruy at gmail.com  Sat Aug 20 12:54:30 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sat Aug 20 14:40:04 2011
Subject: [gdal-dev] GDAL Pascal bindings
Message-ID: <CALuHMPDe9VVPL6VMnYQwJ7tgC7-H02Fmp5gyAbZKrXdbaJMSWA@mail.gmail.com>

Hi all,

some time ago I start to write Pascal bindings for GDAL library.
Here is current results, maybe anyone find them useful
http://gis-lab.info/share/alexbruy/gdal_pascal.tar.bz2

Currently only OGR part tested (see examples in demo directory).
I continue to work on it, but there are also several projects I'm
involved, so any help is welcome.

Thanks
-- 
Alexander Bruy
From matthew.burton.kelly at my.und.edu  Sat Aug 20 14:06:00 2011
From: matthew.burton.kelly at my.und.edu (Burton-Kelly, Matthew)
Date: Sat Aug 20 15:55:47 2011
Subject: [gdal-dev] gdal_rasterize output off by one pixel/cell
Message-ID: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>

Hello,

I'm attempting to create a raster from a shapefile of point data, with grid cells 1 degree square.  Although the area I have defined matches up with the origin coordinates I want, and the grid cells match up with a vector 1-degree grid I produced in QGIS, the squares supposedly containing the point data are shifted, it looks like down and to the right.  Has anyone encountered this issue before?

Here is the command I used:
gdal_rasterize -a <column name> -ts 360 180 -te -180 -90 180 90 -l <source layer name in source file> <source file> <destination file>

I have uploaded a screenshot of the output I am describing here: http://www.flickr.com/photos/matthewbk/6059112633

Thanks for any insight,
Matt




-----------------------------

Matthew Burton-Kelly, M.S.

Graduate Student

Department of Geology and Geological Engineering

University of North Dakota

Mobile: (802) 922-3696

matthew.burton.kelly@my.und.edu<mailto:matthew.burton.kelly@my.und.edu>

matthew.burtonkelly@gmail.com<mailto:matthew.burtonkelly@gmail.com>

http://www.protichnoctem.com

http://und.academia.edu/MatthewBurtonKelly

--------------------------------------------

"About thirty years ago there was much talk that geologists ought only to observe and not theorize; and I well remember someone saying that at this rate a man might as well go into a gravelpit and count the pebbles and describe the colors.  How odd it is that anyone should not see that all observation must be for or against some view if it is to be of any service!"

-Charles Darwin, in an 1861 letter to Henry Fawcett.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110820/1918ff12/attachment.html
From aca at ngi.be  Mon Aug 22 07:05:04 2011
From: aca at ngi.be (Alain Camus)
Date: Mon Aug 22 11:11:53 2011
Subject: [gdal-dev] How would I build a custom pyramid ?
In-Reply-To: <20821351.26659.1314006750305.JavaMail.root@morpheus>
Message-ID: <31279048.26770.1314011104759.JavaMail.root@morpheus>


Hello list, 

I have a set of tiles at resolution 0.5 m/pxl. Based on this data, I'd like to create a pyramid that has zoom levels 0.166667, 0.333333, 0.666667 and 1.66667 (the data will only be viewed in geoserver at these levels, so I guess it will be faster if I prepare the data at these levels). 

I think gdal_retile only allows multiplying the zoom levels by 2. Thus I think I will need those steps : 


    1. gdal_translate to get the lowest zoom level (0.5 --> 0.166667) 
    2. gdal_retile to give these tiles the good size in pixels, mosaic them and to create the next two levels (0.333333 and 0.666667 ) 
    3. gdal_translate again to get the highest zoom level (1.66667 , which is not the double of the previous one) starting from the 0.666667 tiles . 
    4. gdal_retile again to give these tiles the good size in pixels and mosaic them 
    5. manually adapt the pyramid config files 

At 0.5 m/pxl, I have 8000 geotiffs each 4000 x 4000 pxls, so I think it'll take a lot of time, especially steps 1 and 2. 

Would you have an advice to speed up the process or decrease the number of steps ? 

Alain 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110822/298b4ac7/attachment.html
From ingo.weinzierl at intevation.de  Mon Aug 22 07:13:43 2011
From: ingo.weinzierl at intevation.de (Ingo Weinzierl)
Date: Mon Aug 22 11:19:51 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>
References: <20110818102306.GC22454@intevation.de>
	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
	<20110819130543.GA32098@intevation.de> <4E4E86DC.7080207@gmx.eu>
	<CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>
Message-ID: <20110822111343.GA27771@intevation.de>

Hi *,

I already tried the approach below - without success. The result of
my operation is:

The command:
------------
    ogr2ogr -f "ESRI Shapefile" -sql "SELECT cast(999 as integer(3)) as
      river_id from SRCShape" DESTShape.shp SRCShape.shp

The command's result:
---------------------
    ERROR 1: SQL: Unrecognised field name 999


On Fri, Aug 19, 2011 at 09:29:23PM +0530, Chaitanya kumar CH wrote:
> That should work just fine.
> 
> On Fri, Aug 19, 2011 at 9:23 PM, Hermann Peifer <peifer@gmx.eu> wrote:
> 
> > On 19/08/2011 15:05, Ingo Weinzierl wrote:
> >
> >> Thanks for the quick reply, but the "-select" option only solves one
> >> of the two parts of my problem. I still need to append a further
> >> column that does not exist in the shapefile and which should be
> >> defined manually.
> >>
> >
> > I am not sure if I fully understood the issue, but... what about:
> >
> > ... -sql "select cast(999 as integer(3)) as field from ..."
> >
> > (If you want an additional integer column with name `field', where all
> > values are defined to be 999)
> >
> > Hermann


Regards, Ingo
-- 
Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B 18998
Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
From peifer at gmx.eu  Mon Aug 22 07:30:00 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Aug 22 11:36:55 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <20110822111343.GA27771@intevation.de>
References: <20110818102306.GC22454@intevation.de>	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>	<20110819130543.GA32098@intevation.de>
	<4E4E86DC.7080207@gmx.eu>	<CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>
	<20110822111343.GA27771@intevation.de>
Message-ID: <4E523DB8.3010602@gmx.eu>

On 22/08/2011 13:13, Ingo Weinzierl wrote:
> Hi *,
>
> I already tried the approach below - without success. The result of
> my operation is:
>
> The command:
> ------------
>      ogr2ogr -f "ESRI Shapefile" -sql "SELECT cast(999 as integer(3)) as
>        river_id from SRCShape" DESTShape.shp SRCShape.shp
>
> The command's result:
> ---------------------
>      ERROR 1: SQL: Unrecognised field name 999
>
>

What does ogr2ogr --version say? On my side, it says:
GDAL 1.9dev, released 2011/01/18

BTW: you could drop `-f "ESRI Shapefile"', as it is the default.

Hermann
From ingo.weinzierl at intevation.de  Mon Aug 22 08:08:29 2011
From: ingo.weinzierl at intevation.de (Ingo Weinzierl)
Date: Mon Aug 22 12:17:38 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <4E523DB8.3010602@gmx.eu>
References: <20110818102306.GC22454@intevation.de>
	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>
	<20110819130543.GA32098@intevation.de> <4E4E86DC.7080207@gmx.eu>
	<CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>
	<20110822111343.GA27771@intevation.de> <4E523DB8.3010602@gmx.eu>
Message-ID: <20110822120829.GB27771@intevation.de>

Hi Hermann,

On Mon, Aug 22, 2011 at 01:30:00PM +0200, Hermann Peifer wrote:
> On 22/08/2011 13:13, Ingo Weinzierl wrote:
> >Hi *,
> >
> >I already tried the approach below - without success. The result of
> >my operation is:
> >
> >The command:
> >------------
> >     ogr2ogr -f "ESRI Shapefile" -sql "SELECT cast(999 as integer(3)) as
> >       river_id from SRCShape" DESTShape.shp SRCShape.shp
> >
> >The command's result:
> >---------------------
> >     ERROR 1: SQL: Unrecognised field name 999
> >
> >
> 
> What does ogr2ogr --version say? On my side, it says:
> GDAL 1.9dev, released 2011/01/18
> 
> BTW: you could drop `-f "ESRI Shapefile"', as it is the default.

It says "GDAL 1.6.3, released 2009/11/19". This version comes along
with Debian Squeeze.

Ingo
-- 
Ingo Weinzierl | ++49-541-335083-0 | OpenPGP key: 0x2D2E2573
Intevation GmbH, Neuer Graben 17, 49074 Osnabr?ck | AG Osnabr?ck, HR B 18998
Gesch?ftsf?hrer: Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
From aca at ngi.be  Mon Aug 22 08:16:41 2011
From: aca at ngi.be (Alain Camus)
Date: Mon Aug 22 12:26:21 2011
Subject: [gdal-dev] How would I build a custom pyramid ?
In-Reply-To: <20110822140403.66738fsam4yvdc4z@webmail.nvoe.at>
Message-ID: <23516017.26977.1314015401063.JavaMail.root@morpheus>

Hi Christian,

Thanks for your reply. OK, so I don't need my custom zoom levels.

But I have one question remaining : two of the zoom levels that will be requested are smaller than the resolution of the original data (0.166667 and 0.333333 are smaller than the original 0.5). So I would need to increase (instead of decrease) the number of pixels to create the lowest pyramid level. Or is it useless considering the way geoserver handles pyramid data ?

Alain

----- Mail original -----
De: "christian mueller" <christian.mueller@nvoe.at>
?: "Alain Camus" <aca@ngi.be>
Cc: gdal-dev@lists.osgeo.org
Envoy?: Lundi 22 Ao?t 2011 14:04:03
Objet: Re: [gdal-dev] How would I build a custom pyramid ?

Zitat von Alain Camus <aca@ngi.be>:

>
> Hello list,
>
> I have a set of tiles at resolution 0.5 m/pxl. Based on this data,   
> I'd like to create a pyramid that has zoom levels 0.166667,   
> 0.333333, 0.666667 and 1.66667 (the data will only be viewed in   
> geoserver at these levels, so I guess it will be faster if I prepare  
>  the data at these levels).

Geoserver will rescale your raster data depending on the envelope in  
world coordinates and the pixel dimensions. It es very unlikely that a  
request needs one of your precalculated resolutions. Pyramids lower  
the amount of calculations giving you a better response time. Within  
geoserver, pyramids are hidden. you see only one layer, the logic  
chooses the best fitting pyramid level and does the required  
calculations.

I would try a gdal_retile job with 10 pyramids and look at the result  
in geoserver. A zoom level of 2 means that 4 pixels are reduced to 1  
pixel. The 10th pyramid reduces a 1024x1024 pixel area to one pixel.

Cheers
Christian


>
> I think gdal_retile only allows multiplying the zoom levels by 2.   
> Thus I think I will need those steps :
>
>
>     1. gdal_translate to get the lowest zoom level (0.5 --> 0.166667)
>     2. gdal_retile to give these tiles the good size in pixels,   
> mosaic them and to create the next two levels (0.333333 and 0.666667 )
>     3. gdal_translate again to get the highest zoom level (1.66667 ,  
>  which is not the double of the previous one) starting from the   
> 0.666667 tiles .
>     4. gdal_retile again to give these tiles the good size in pixels  
>  and mosaic them
>     5. manually adapt the pyramid config files
>
> At 0.5 m/pxl, I have 8000 geotiffs each 4000 x 4000 pxls, so I think  
>  it'll take a lot of time, especially steps 1 and 2.
>
> Would you have an advice to speed up the process or decrease the   
> number of steps ?
>
> Alain
>
>
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From christian.mueller at nvoe.at  Mon Aug 22 08:04:03 2011
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Mon Aug 22 12:33:47 2011
Subject: [gdal-dev] How would I build a custom pyramid ?
In-Reply-To: <31279048.26770.1314011104759.JavaMail.root@morpheus>
References: <31279048.26770.1314011104759.JavaMail.root@morpheus>
Message-ID: <20110822140403.66738fsam4yvdc4z@webmail.nvoe.at>

Zitat von Alain Camus <aca@ngi.be>:

>
> Hello list,
>
> I have a set of tiles at resolution 0.5 m/pxl. Based on this data,   
> I'd like to create a pyramid that has zoom levels 0.166667,   
> 0.333333, 0.666667 and 1.66667 (the data will only be viewed in   
> geoserver at these levels, so I guess it will be faster if I prepare  
>  the data at these levels).

Geoserver will rescale your raster data depending on the envelope in  
world coordinates and the pixel dimensions. It es very unlikely that a  
request needs one of your precalculated resolutions. Pyramids lower  
the amount of calculations giving you a better response time. Within  
geoserver, pyramids are hidden. you see only one layer, the logic  
chooses the best fitting pyramid level and does the required  
calculations.

I would try a gdal_retile job with 10 pyramids and look at the result  
in geoserver. A zoom level of 2 means that 4 pixels are reduced to 1  
pixel. The 10th pyramid reduces a 1024x1024 pixel area to one pixel.

Cheers
Christian


>
> I think gdal_retile only allows multiplying the zoom levels by 2.   
> Thus I think I will need those steps :
>
>
>     1. gdal_translate to get the lowest zoom level (0.5 --> 0.166667)
>     2. gdal_retile to give these tiles the good size in pixels,   
> mosaic them and to create the next two levels (0.333333 and 0.666667 )
>     3. gdal_translate again to get the highest zoom level (1.66667 ,  
>  which is not the double of the previous one) starting from the   
> 0.666667 tiles .
>     4. gdal_retile again to give these tiles the good size in pixels  
>  and mosaic them
>     5. manually adapt the pyramid config files
>
> At 0.5 m/pxl, I have 8000 geotiffs each 4000 x 4000 pxls, so I think  
>  it'll take a lot of time, especially steps 1 and 2.
>
> Would you have an advice to speed up the process or decrease the   
> number of steps ?
>
> Alain
>
>
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From christian.mueller at nvoe.at  Mon Aug 22 08:45:59 2011
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Mon Aug 22 12:57:25 2011
Subject: [gdal-dev] How would I build a custom pyramid ?
In-Reply-To: <23516017.26977.1314015401063.JavaMail.root@morpheus>
References: <23516017.26977.1314015401063.JavaMail.root@morpheus>
Message-ID: <20110822144559.28442ktb1yotpnd3@webmail.nvoe.at>

Again, geoserver will rescale to your zoom levels < 0.5 m/pxl. I would  
take a small subset of your tiles (neighbors, of course) and make a test

Another important hint. What is your target platform ?. If your  
platform supports native JAI  as described here

http://docs.geoserver.org/latest/en/user/webadmin/server/JAI.html

you are lucky. AFIAK, this is the case for Windows/Linux.


Another idea. If you use gdal_merge to create on big geotiff picture  
with inner tiling, you can use
http://www.gdal.org/gdaladdo.html to add your pyramids to the geotiff.  
  The prepared geotiff should work out of the box with geoserver.

Cheers




Zitat von Alain Camus <aca@ngi.be>:

> Hi Christian,
>
> Thanks for your reply. OK, so I don't need my custom zoom levels.
>
> But I have one question remaining : two of the zoom levels that will  
>  be requested are smaller than the resolution of the original data   
> (0.166667 and 0.333333 are smaller than the original 0.5). So I   
> would need to increase (instead of decrease) the number of pixels to  
>  create the lowest pyramid level. Or is it useless considering the   
> way geoserver handles pyramid data ?
>
> Alain
>
> ----- Mail original -----
> De: "christian mueller" <christian.mueller@nvoe.at>
> ?: "Alain Camus" <aca@ngi.be>
> Cc: gdal-dev@lists.osgeo.org
> Envoy?: Lundi 22 Ao?t 2011 14:04:03
> Objet: Re: [gdal-dev] How would I build a custom pyramid ?
>
> Zitat von Alain Camus <aca@ngi.be>:
>
>>
>> Hello list,
>>
>> I have a set of tiles at resolution 0.5 m/pxl. Based on this data,
>> I'd like to create a pyramid that has zoom levels 0.166667,
>> 0.333333, 0.666667 and 1.66667 (the data will only be viewed in
>> geoserver at these levels, so I guess it will be faster if I prepare
>>  the data at these levels).
>
> Geoserver will rescale your raster data depending on the envelope in
> world coordinates and the pixel dimensions. It es very unlikely that a
> request needs one of your precalculated resolutions. Pyramids lower
> the amount of calculations giving you a better response time. Within
> geoserver, pyramids are hidden. you see only one layer, the logic
> chooses the best fitting pyramid level and does the required
> calculations.
>
> I would try a gdal_retile job with 10 pyramids and look at the result
> in geoserver. A zoom level of 2 means that 4 pixels are reduced to 1
> pixel. The 10th pyramid reduces a 1024x1024 pixel area to one pixel.
>
> Cheers
> Christian
>
>
>>
>> I think gdal_retile only allows multiplying the zoom levels by 2.
>> Thus I think I will need those steps :
>>
>>
>>     1. gdal_translate to get the lowest zoom level (0.5 --> 0.166667)
>>     2. gdal_retile to give these tiles the good size in pixels,
>> mosaic them and to create the next two levels (0.333333 and 0.666667 )
>>     3. gdal_translate again to get the highest zoom level (1.66667 ,
>>  which is not the double of the previous one) starting from the
>> 0.666667 tiles .
>>     4. gdal_retile again to give these tiles the good size in pixels
>>  and mosaic them
>>     5. manually adapt the pyramid config files
>>
>> At 0.5 m/pxl, I have 8000 geotiffs each 4000 x 4000 pxls, so I think
>>  it'll take a lot of time, especially steps 1 and 2.
>>
>> Would you have an advice to speed up the process or decrease the
>> number of steps ?
>>
>> Alain
>>
>>
>>
>>
>>
>
>
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From peifer at gmx.eu  Mon Aug 22 11:08:57 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Aug 22 15:28:05 2011
Subject: [gdal-dev] Re: Dump Shapefile into DB using ogr2ogr
In-Reply-To: <20110822120829.GB27771@intevation.de>
References: <20110818102306.GC22454@intevation.de>	<CAMKgpObaBP2=Py8ECAtpNVuyszA6-1YUooN0utF6shE5R7MKYA@mail.gmail.com>	<20110819130543.GA32098@intevation.de>
	<4E4E86DC.7080207@gmx.eu>	<CAMKgpOagH=wjE3XJQm538BCGVvXjqVKQVirSe_efpXOtMQWayA@mail.gmail.com>	<20110822111343.GA27771@intevation.de>
	<4E523DB8.3010602@gmx.eu> <20110822120829.GB27771@intevation.de>
Message-ID: <j2tre8$oei$1@dough.gmane.org>

On 22/08/2011 14:08, Ingo Weinzierl wrote:
>
> It says "GDAL 1.6.3, released 2009/11/19". This version comes along
> with Debian Squeeze.
>

You have to upgrade to GDAL/OGR >= 1.8.0 in order to make use of the new 
OGR SQL functionality, http://www.gdal.org/ogr/ogr_sql.html

Hermann

From EAdam at co.lincoln.or.us  Mon Aug 22 12:50:15 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Mon Aug 22 17:15:32 2011
Subject: [gdal-dev] gdal_rasterize output off by one pixel/cell
In-Reply-To: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
Message-ID: <4E522628.4F75.00CE.0@co.lincoln.or.us>

Matt,

     You may want to look at this ticket and see if it is the same thing. If so, you can add yourself to the cc list and you will get emails when there are updates to the ticket.  You can also add any additional relevant information to the ticket.

http://trac.osgeo.org/gdal/ticket/3774 

Regards, Eli



>>> On 8/20/2011 at 11:06 AM, in message
<AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>, "Burton-Kelly, Matthew"
<matthew.burton.kelly@my.und.edu> wrote:
> Hello,
> 
> I'm attempting to create a raster from a shapefile of point data, with grid 
> cells 1 degree square.  Although the area I have defined matches up with the 
> origin coordinates I want, and the grid cells match up with a vector 1-degree 
> grid I produced in QGIS, the squares supposedly containing the point data are 
> shifted, it looks like down and to the right.  Has anyone encountered this 
> issue before?
> 
> Here is the command I used:
> gdal_rasterize -a <column name> -ts 360 180 -te -180 -90 180 90 -l <source layer name 
> in source file> <source file> <destination file>
> 
> I have uploaded a screenshot of the output I am describing here: 
> http://www.flickr.com/photos/matthewbk/6059112633 
> 
> Thanks for any insight,
> Matt
> 
> 
> 
> 
> -----------------------------
> 
> Matthew Burton-Kelly, M.S.
> 
> Graduate Student
> 
> Department of Geology and Geological Engineering
> 
> University of North Dakota
> 
> Mobile: (802) 922-3696
> 
> matthew.burton.kelly@my.und.edu<mailto:matthew.burton.kelly@my.und.edu>
> 
> matthew.burtonkelly@gmail.com<mailto:matthew.burtonkelly@gmail.com>
> 
> http://www.protichnoctem.com 
> 
> http://und.academia.edu/MatthewBurtonKelly 
> 
> --------------------------------------------
> 
> "About thirty years ago there was much talk that geologists ought only to 
> observe and not theorize; and I well remember someone saying that at this 
> rate a man might as well go into a gravelpit and count the pebbles and 
> describe the colors.  How odd it is that anyone should not see that all 
> observation must be for or against some view if it is to be of any service!"
> 
> -Charles Darwin, in an 1861 letter to Henry Fawcett.

From izzybitsie at gmail.com  Mon Aug 22 14:23:18 2011
From: izzybitsie at gmail.com (Dori)
Date: Mon Aug 22 18:52:57 2011
Subject: [gdal-dev] gdal_translate gif->gtiff conversion
Message-ID: <CALjPR3dH9MWc__4doyCqGdVr4TOLjxTm7ZgAhiNqRQV2Zqc=AA@mail.gmail.com>

Hi,
I am trying to convert a GIF image into a GeoTiff image.
Input GIF image information:
Projection: Polar Stereographic from North Pole, Cente meridian=97W,
Height=0
Corners' Lower Left 19.9N 119.6W, Upper Right: 44.5N 59.5W

FWTools_2.0.6 commands used.
I used these commands to convert the map from GIF -> GeoTiff
# Convert lat/lon corner points to X/Y points
cs2cs +proj=latlon +to +proj=stere +lat_0=90 +lon_0=-97 -r <<EOF
>./pts_stere_xy.dat
+46.4  -140.0
+21.4 -79.0
EOF
# Following points created by previous command cs2cs
ulx=-3484887.50
uly=-3737084.31
lrx=2686546.21
lry=-8268339.04

ifn=my_image.gif
ofn=US_SIGWX_LOWLVL_SFC-400_PIXEL.tif
gdal_translate -of GTiff -co PROFILE=GeoTIFF -co INTERLEAVE=PIXEL -a_srs '
+proj=stere +lat_0=90 +lon_0=-97' -a_ullr $ulx $uly $lrx $lry $ifn $ofn

ISSUES:
The GeoTiff image obtained can be viewed using Openev but  the lat/lon
points don't look right(Used geodetic lat/lon preference to read lat/lon).
I was not able to view the image using Udig.

Images uploaded:

GIF map: http://dl.dropbox.com/u/31095936/my_image.gif

GeoTiff map:
http://dl.dropbox.com/u/31095936/US_SIGWX_LOWLVL_SFC-400_PIXEL.tif


Q1: Could somebody let me know what I am doing wrong when creating the
geotiff with wrong lat/lon points?
Q2: Does anyone know why I am not able to see it using Udig?

Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110822/9846de54/attachment-0001.html
From daniela.czibener at gmail.com  Mon Aug 22 19:57:17 2011
From: daniela.czibener at gmail.com (Daniela Czibener)
Date: Tue Aug 23 00:46:15 2011
Subject: [gdal-dev] gdalwarp: max, min, avg of the overlapping image area
Message-ID: <CANXAvLny8kym6j61A=Ut+bGo_cBDcRcs4pO07aTaGk4nsK3gjA@mail.gmail.com>

I'm using gdalwarp with two images that are not in the same location, but
have a common area.
In the common area, I'd like the resulting pixels values will be the maximum
or average value, not the value of the last image in the source image list.
Is there any option within the gdalwarp or I should use another GDAL tool?

Thanks in advance,

Daniela.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110822/5904fd80/attachment.html
From warmerdam at pobox.com  Mon Aug 22 21:56:02 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 23 02:51:18 2011
Subject: [gdal-dev] gdalwarp: max, min, avg of the overlapping image area
In-Reply-To: <CANXAvLny8kym6j61A=Ut+bGo_cBDcRcs4pO07aTaGk4nsK3gjA@mail.gmail.com>
References: <CANXAvLny8kym6j61A=Ut+bGo_cBDcRcs4pO07aTaGk4nsK3gjA@mail.gmail.com>
Message-ID: <4E5308B2.3030108@pobox.com>

On 11-08-22 04:57 PM, Daniela Czibener wrote:
> I'm using gdalwarp with two images that are not in the same location, but have
> a common area.
> In the common area, I'd like the resulting pixels values will be the maximum or
> average value, not the value of the last image in the source image list.
> Is there any option within the gdalwarp or I should use another GDAL tool?

Daniela,

I can't think of any way this could be accomplished with gdalwarp.  But if you
were to warp both images to a common grid system you could do averaging with
a numpy - python script or a small GDAL based program.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Tue Aug 23 06:55:51 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Aug 23 12:21:24 2011
Subject: [gdal-dev] 
	Re: gdalwarp: max, min, avg of the overlapping image area
References: <CANXAvLny8kym6j61A=Ut+bGo_cBDcRcs4pO07aTaGk4nsK3gjA@mail.gmail.com>
Message-ID: <loom.20110823T125530-204@post.gmane.org>

Daniela Czibener <daniela.czibener <at> gmail.com> writes:

> In the common area, I'd like the resulting pixels values will be the maximum
or average value, not the value of the last image in the source image list.Is
there any option within the gdalwarp or I should use another GDAL tool?Thanks in
advance,Daniela.

Hi,

I have used OSSIM for building histogram matched mosaics and I am sure you can
do what you want with OSSIM but it may take some time to learn how. Have a look
at document http://download.osgeo.org/ossim/docs/pdfs/ImageLinker_Tutorial.pdf
and see if it is interesting.

-Jukka Rahkonen-


From peifer at gmx.eu  Tue Aug 23 07:27:34 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Aug 23 12:54:53 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <4E522628.4F75.00CE.0@co.lincoln.or.us>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<4E522628.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <4E538EA6.3020308@gmx.eu>

Eli, Matt,

I just rasterised some point data with GDAL 1.9dev from svn and can 
confirm both observations:

a) points are lost at the edges
b) points and pixels do not line up correctly in qgis

I can align points and pixels by shifting the corner coordinates of the 
resulting GeoTIFF by 0.5 pixel, but this is hardly a "fix":

gdal_translate test.tif test_shifted.tif -a_ullr -180.5 90.5 179.5 -89.5

I was able to reproduce the same results with GDAL 1.6.3, so I am 
wondering for how long the issue is already lurking around -- or are we 
just doing something terribly wrong? Hopefully not.

Hermann



On 22/08/2011 18:50, Eli Adam wrote:
> Matt,
>
>       You may want to look at this ticket and see if it is the same thing. If so, you can add yourself to the cc list and you will get emails when there are updates to the ticket.  You can also add any additional relevant information to the ticket.
>
> http://trac.osgeo.org/gdal/ticket/3774
>
> Regards, Eli
>
>
>
>>>> On 8/20/2011 at 11:06 AM, in message
> <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>, "Burton-Kelly, Matthew"
> <matthew.burton.kelly@my.und.edu>  wrote:
>> Hello,
>>
>> I'm attempting to create a raster from a shapefile of point data, with grid
>> cells 1 degree square.  Although the area I have defined matches up with the
>> origin coordinates I want, and the grid cells match up with a vector 1-degree
>> grid I produced in QGIS, the squares supposedly containing the point data are
>> shifted, it looks like down and to the right.  Has anyone encountered this
>> issue before?
>>
>> Here is the command I used:
>> gdal_rasterize -a<column name>  -ts 360 180 -te -180 -90 180 90 -l<source layer name
>> in source file>  <source file>  <destination file>
>>
>> I have uploaded a screenshot of the output I am describing here:
>> http://www.flickr.com/photos/matthewbk/6059112633
>>
>> Thanks for any insight,
>> Matt
>>
From landa.martin at gmail.com  Tue Aug 23 07:57:38 2011
From: landa.martin at gmail.com (Martin Landa)
Date: Tue Aug 23 13:26:22 2011
Subject: [gdal-dev] ogr-pg: GetFeature() speed
Message-ID: <CA+Ei1Od_UypLCYah5Stj_hFUEgqSj-yo1UwWbGLE5XobbBDNew@mail.gmail.com>

Hi,

I have tested speed of random access to PostGIS features with simple
testing application.

    // about 1e4 points
    poLayer = poDS->GetLayerByName("bridges");

    nfeatures = poLayer->GetFeatureCount();

    for (int fid = 1; fid < nfeatures; fid++)
	poFeature = poLayer->GetFeature(fid);

and sequential access

    while(1) {
	poFeature = poLayer->GetNextFeature();
	if (!poFeature)
	    break;
    }

I would expect that random access will be slower, anyway not so much.

random access

real    0m5.612s
user    0m1.432s
sys     0m0.512s

sequential access

real    0m0.248s
user    0m0.116s
sys     0m0.012s

Are there any possibilities how to speed up random access (not
speaking about sample application where should be used seq access).

Thanks in advance, Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
From even.rouault at mines-paris.org  Tue Aug 23 10:15:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 23 15:52:09 2011
Subject: [gdal-dev] ogr-pg: GetFeature() speed
In-Reply-To: <CA+Ei1Od_UypLCYah5Stj_hFUEgqSj-yo1UwWbGLE5XobbBDNew@mail.gmail.com>
References: <CA+Ei1Od_UypLCYah5Stj_hFUEgqSj-yo1UwWbGLE5XobbBDNew@mail.gmail.com>
Message-ID: <1314108945.4e53b6119af62@webmail.free.fr>

Selon Martin Landa <landa.martin@gmail.com>:

I'm not shoked at all by the performance you see. I would have even expected it
to be worse. Fetching 10 000 features in 5.6s, means 0.56 millisecond per
feature. Not so bad. You have to pay the cost for a client/server dialog for
each GetFeature() call whereas GetNextFeature() fetches 500 features at a time.

Looking at OGRPGTableLayer::GetFeature() implementation, I see we use a cursor
to wrap the SELECT. I'm not sure why this is necessary when the result should be
just one feature. You could experiment and try removing it, but I'm not sure it
would really improve the performance.

Another idea would be to issue one query for several features, if you can afford
doing grouped queries. You would do a ExecuteSQL("SELECT * FROM your_layer WHERE
ogc_fid IN (fid1, fid2, ... fidn)"

> Hi,
>
> I have tested speed of random access to PostGIS features with simple
> testing application.
>
>     // about 1e4 points
>     poLayer = poDS->GetLayerByName("bridges");
>
>     nfeatures = poLayer->GetFeatureCount();
>
>     for (int fid = 1; fid < nfeatures; fid++)
> 	poFeature = poLayer->GetFeature(fid);
>
> and sequential access
>
>     while(1) {
> 	poFeature = poLayer->GetNextFeature();
> 	if (!poFeature)
> 	    break;
>     }
>
> I would expect that random access will be slower, anyway not so much.
>
> random access
>
> real    0m5.612s
> user    0m1.432s
> sys     0m0.512s
>
> sequential access
>
> real    0m0.248s
> user    0m0.116s
> sys     0m0.012s
>
> Are there any possibilities how to speed up random access (not
> speaking about sample application where should be used seq access).
>
> Thanks in advance, Martin
>
> --
> Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Tue Aug 23 10:40:52 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 23 10:41:16 2011
Subject: [gdal-dev] ogr-pg: GetFeature() speed
In-Reply-To: <CA+Ei1Od_UypLCYah5Stj_hFUEgqSj-yo1UwWbGLE5XobbBDNew@mail.gmail.com>
References: <CA+Ei1Od_UypLCYah5Stj_hFUEgqSj-yo1UwWbGLE5XobbBDNew@mail.gmail.com>
Message-ID: <4E53BBF4.5040300@pobox.com>

On 11-08-23 04:57 AM, Martin Landa wrote:
> Hi,
>
> I have tested speed of random access to PostGIS features with simple
> testing application.
>
>      // about 1e4 points
>      poLayer = poDS->GetLayerByName("bridges");
>
>      nfeatures = poLayer->GetFeatureCount();
>
>      for (int fid = 1; fid<  nfeatures; fid++)
> 	poFeature = poLayer->GetFeature(fid);

Martin,

I agree with Even's comments about the speed.  I would just add that you
cannot generally assume that features id's are contiguous as is done above.
Also, you are missing feature "0" due to the bounds of your for loop.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jimp at ittvis.com  Tue Aug 23 11:53:35 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Tue Aug 23 11:58:04 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <201108122302.16113.even.rouault@mines-paris.org>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
	<201108122302.16113.even.rouault@mines-paris.org>
Message-ID: <0A35EA74E38BA04787179D409AF0CB3F2125D4@coexch01.rsinc.com>


Just to finalize this thread, the underlying problem was that the
version of SWIG I was using was outdated.  Installing version 2.0.5
corrected the issue.

Jim P.
From nhatzop at gmail.com  Tue Aug 23 12:19:35 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Aug 23 12:25:11 2011
Subject: [gdal-dev] SWIG JNI binding question with GetMetadataItem function
In-Reply-To: <0A35EA74E38BA04787179D409AF0CB3F2125D4@coexch01.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092D3@gemini.rsinc.com>
	<201108112008.17631.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A54130092D7@gemini.rsinc.com>
	<201108122302.16113.even.rouault@mines-paris.org>
	<0A35EA74E38BA04787179D409AF0CB3F2125D4@coexch01.rsinc.com>
Message-ID: <CALDJGKBi0d4n+sL9oter-bAg9f5N5_Bpsfo=2pbnYhOY64CHMQ@mail.gmail.com>

yes watch that because they also added test so you can do:

make test

and see if the swing is working

--Nikos Hatzopoulos

On Tue, Aug 23, 2011 at 8:53 AM, Jim Pendleton <jimp@ittvis.com> wrote:

>
> Just to finalize this thread, the underlying problem was that the
> version of SWIG I was using was outdated.  Installing version 2.0.5
> corrected the issue.
>
> Jim P.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110823/43c21a55/attachment.html
From ben at vterrain.org  Tue Aug 23 13:28:49 2011
From: ben at vterrain.org (Ben Discoe)
Date: Tue Aug 23 13:38:27 2011
Subject: [gdal-dev] Geocentric Coordinate System Support
In-Reply-To: <CACMBy_HBrgj3Md6_AwNA_hmALDyWODAtOFapBhPTuaZuPsegMw@mail.gmail.com>
References: <4D77AD8E.7070006@pobox.com>	<00f101cc5eb1$8780f6a0$9682e3e0$@org>
	<CACMBy_HBrgj3Md6_AwNA_hmALDyWODAtOFapBhPTuaZuPsegMw@mail.gmail.com>
Message-ID: <017f01cc61ba$1f3f5f80$5dbe1e80$@org>

Rodolfo,

I don't understand.  I am building from a checkout of trunk from GDAL SVN,
which certainly appears to have the Geocentric support in it.  Is this not
the latest code?  Is there some separate 1.9 branch?  My question is how the
geocentric support and vertical datums are supposed to work, e.g. what are
valid arguments to SetVertCS which can produce a valid result when
transforming from geocentric?

-Ben

> -----Original Message-----
> From: Rodolfo Bonnin [mailto:rodolfobonnin@suremptec.com.ar]
> Sent: Tuesday, August 23, 2011 6:12 AM
> To: Ben Discoe
> Subject: Re: [gdal-dev] Geocentric Coordinate System Support
> 
> Hello Ben,
> 
> >From a previous question I asked, I inferred that geocentric will not
> be backported to 1.8 branch,  I think you should jump to version 1.9
> to get that feature. I hope it helps.
> 
> Regards,
> 
> 
> 
> 2011/8/19 Ben Discoe <ben@vterrain.org>:
> > Frank et al.,
> >
> > I am testing the Geocentric support; in particular, the ability to
> transform
> > from Geocentric to a SRS with a vertical datum.
> >
> > Since Geocentric was committed in March, and GDAL 1.8.1 was released in
> > July, i thought that 1.8.1 might contain the Geocentric support. ?But,
it
> > does not seem to be there. ?The ogr_fromepsg.cpp in 1.8.1 dates from
last
> > December. ?So, for testing, i have built GDAL from today's SVN.
> >
> > Basic geocentric support seems to work fine:
> >
> > ? ?OGRSpatialReference srs1, srs2;
> > ? ?srs1.SetWellKnownGeogCS("WGS84");
> > ? ?srs2.importFromEPSG(4978); ?// geocentric (ECEF)
> > ? ?OGRCoordinateTransformation *oct =
> > OGRCreateCoordinateTransformation(&srs1, &srs2);
> >
> > ? ?double x, y, z;
> > ? ?x = -122.272778;
> > ? ?y = 37.871667;
> > ? ?z = 0;
> > ? ?oct->Transform(1, &x, &y, &z);
> >
> > This gives (-2691744, -4262401, 3894209) which is a reasonable-looking
> > geocentric value. ?However, the first question is:
> >
> > 1. How is the input z (i.e. elevation) being interpreted? ?The input is
> only
> > a 2D coordinate system, with no definition of what Z is. ?Is it assuming
> > that z is an ellipsoidal height, i.e. in this case relative to the WGS84
> > ellipsoid?
> >
> > Ellipsoidal elevation is not very useful. ?To be useful, we must be able
to
> > specify the vertical coordinates of the input, e.g. in order to
interpret
> is
> > as orthometric height, i.e. relative to a geoid.
> >
> > I know that the underlying support for Vertical Datums in PROJ.4 works,
> > using an SRS like:
> > ? ? ? ?+proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx
> >
> > However, how to do this from OGR is not clear. ?It might involve
> > OGRSpatialReference::SetVertCS, but i could not find any example
anywhere
> > (even googling) of how to call SetVertCS. ?I tried to guess, by working
> > backwards:
> >
> > ? ?srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs
> > +geoidgrids=g2009conus.gtx");
> > ? ?srs.exportToPrettyWkt(...);
> >
> > Which produces:
> > ?COMPD_CS["WGS 84 + Unnamed Vertical Datum",
> > ? ?GEOGCS["WGS 84",
> > ? ? ? ?DATUM["WGS_1984",
> > ? ? ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> > ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> > ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> > ? ? ? ? ? ?AUTHORITY["EPSG","6326"]],
> > ? ? ? ?PRIMEM["Greenwich",0,
> > ? ? ? ? ? ?AUTHORITY["EPSG","8901"]],
> > ? ? ? ?UNIT["degree",0.0174532925199433,
> > ? ? ? ? ? ?AUTHORITY["EPSG","9108"]],
> > ? ? ? ?AUTHORITY["EPSG","4326"]],
> > ? ?VERT_CS["Unnamed",
> > ? ? ? ?VERT_DATUM["Unnamed",2005,
> > ? ? ? ? ? ?EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
> > ? ? ? ?AXIS["Up",UP]]]
> >
> > 2. How to specify the vertical with OGR (using SetVertCS, or any other
way)
> > such that it will result in PROJ.4 using the necessary GTX file?
> >
> > Thanks,
> > Ben
> >
> >> -----Original Message-----
> >> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> >> bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> >> Sent: Wednesday, March 09, 2011 8:41 AM
> >> To: gdal-dev
> >> Subject: [gdal-dev] Geocentric Coordinate System Support
> >>
> >> Folks,
> >>
> >> Yesterday I introduced Geocentric coordinate system support in
> >> GDAL/OGR. ?This includes OGRSpatialReference support for geocentric
> >> coordinate systems, the ability to looking them up from EPSG, and
> >> the ability to translate them to/from PROJ.4 format so they can be
> >> used for transformation. ?This is an example of a geocentric coordinate
> >> system looked up from EPSG. ?(Note the root is "GEOCCS")
> >>
> >> GEOCCS["WGS 84 (geocentric)",
> >> ? ? ?DATUM["WGS_1984",
> >> ? ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> >> ? ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> >> ? ? ? ? ?AUTHORITY["EPSG","6326"]],
> >> ? ? ?PRIMEM["Greenwich",0,
> >> ? ? ? ? ?AUTHORITY["EPSG","8901"]],
> >> ? ? ?UNIT["metre",1,
> >> ? ? ? ? ?AUTHORITY["EPSG","9001"]],
> >> ? ? ?AXIS["Geocentric X",OTHER],
> >> ? ? ?AXIS["Geocentric Y",OTHER],
> >> ? ? ?AXIS["Geocentric Z",NORTH],
> >> ? ? ?AUTHORITY["EPSG","4328"]]
> >>
> >> I think there will be relatively little need for this coordinate
system,
> >> but I would appreciate feedback from anyone using it.
> >>
> >> ? ?http://trac.osgeo.org/gdal/changeset/21916
> >>
> >> Best regards,


From even.rouault at mines-paris.org  Tue Aug 23 14:33:25 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 23 14:46:31 2011
Subject: [gdal-dev] Geocentric Coordinate System Support
In-Reply-To: <017f01cc61ba$1f3f5f80$5dbe1e80$@org>
References: <4D77AD8E.7070006@pobox.com>
	<CACMBy_HBrgj3Md6_AwNA_hmALDyWODAtOFapBhPTuaZuPsegMw@mail.gmail.com>
	<017f01cc61ba$1f3f5f80$5dbe1e80$@org>
Message-ID: <201108232033.25357.even.rouault@mines-paris.org>

Le mardi 23 ao?t 2011 19:28:49, Ben Discoe a ?crit :
> Rodolfo,
> 
> I don't understand.  I am building from a checkout of trunk from GDAL SVN,
> which certainly appears to have the Geocentric support in it.  Is this not
> the latest code?  Is there some separate 1.9 branch?

There's no 1.9 branch (it will be created when 1.9.0 will be released). For 
now, it is just trunk. And you definitely need it for Geocentric support.

> My question is how
> the geocentric support and vertical datums are supposed to work, e.g. what
> are valid arguments to SetVertCS which can produce a valid result when
> transforming from geocentric?

Several links that may help you :

http://gdal.org/ogr/classOGRSpatialReference.html#1c8d3eaf2751d9912797c75f477549fe
http://gdal.org/ogr/classOGRSpatialReference.html#4764cca1641b045a63afa95d01922add
http://gdal.org/ogr/classOGRSpatialReference.html#6cb94a55501d2444b9f93eacd8ff0411
http://trac.osgeo.org/gdal/browser/trunk/autotest/osr/osr_basic.py
http://trac.osgeo.org/gdal/browser/trunk/autotest/osr/osr_compd.py

> 
> -Ben
> 
> > -----Original Message-----
> > From: Rodolfo Bonnin [mailto:rodolfobonnin@suremptec.com.ar]
> > Sent: Tuesday, August 23, 2011 6:12 AM
> > To: Ben Discoe
> > Subject: Re: [gdal-dev] Geocentric Coordinate System Support
> > 
> > Hello Ben,
> > 
> > >From a previous question I asked, I inferred that geocentric will not
> > 
> > be backported to 1.8 branch,  I think you should jump to version 1.9
> > to get that feature. I hope it helps.
> > 
> > Regards,
> > 
> > 2011/8/19 Ben Discoe <ben@vterrain.org>:
> > > Frank et al.,
> > > 
> > > I am testing the Geocentric support; in particular, the ability to
> > 
> > transform
> > 
> > > from Geocentric to a SRS with a vertical datum.
> > > 
> > > Since Geocentric was committed in March, and GDAL 1.8.1 was released in
> > > July, i thought that 1.8.1 might contain the Geocentric support.  But,
> 
> it
> 
> > > does not seem to be there.  The ogr_fromepsg.cpp in 1.8.1 dates from
> 
> last
> 
> > > December.  So, for testing, i have built GDAL from today's SVN.
> > > 
> > > Basic geocentric support seems to work fine:
> > > 
> > >    OGRSpatialReference srs1, srs2;
> > >    srs1.SetWellKnownGeogCS("WGS84");
> > >    srs2.importFromEPSG(4978);  // geocentric (ECEF)
> > >    OGRCoordinateTransformation *oct =
> > > OGRCreateCoordinateTransformation(&srs1, &srs2);
> > > 
> > >    double x, y, z;
> > >    x = -122.272778;
> > >    y = 37.871667;
> > >    z = 0;
> > >    oct->Transform(1, &x, &y, &z);
> > > 
> > > This gives (-2691744, -4262401, 3894209) which is a reasonable-looking
> > > geocentric value.  However, the first question is:
> > > 
> > > 1. How is the input z (i.e. elevation) being interpreted?  The input is
> > 
> > only
> > 
> > > a 2D coordinate system, with no definition of what Z is.  Is it
> > > assuming that z is an ellipsoidal height, i.e. in this case relative
> > > to the WGS84 ellipsoid?
> > > 
> > > Ellipsoidal elevation is not very useful.  To be useful, we must be
> > > able
> 
> to
> 
> > > specify the vertical coordinates of the input, e.g. in order to
> 
> interpret
> 
> > is
> > 
> > > as orthometric height, i.e. relative to a geoid.
> > > 
> > > I know that the underlying support for Vertical Datums in PROJ.4 works,
> > > using an SRS like:
> > >        +proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx
> > > 
> > > However, how to do this from OGR is not clear.  It might involve
> > > OGRSpatialReference::SetVertCS, but i could not find any example
> 
> anywhere
> 
> > > (even googling) of how to call SetVertCS.  I tried to guess, by working
> > > backwards:
> > > 
> > >    srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs
> > > +geoidgrids=g2009conus.gtx");
> > >    srs.exportToPrettyWkt(...);
> > > 
> > > Which produces:
> > >  COMPD_CS["WGS 84 + Unnamed Vertical Datum",
> > >    GEOGCS["WGS 84",
> > >        DATUM["WGS_1984",
> > >            SPHEROID["WGS 84",6378137,298.257223563,
> > >                AUTHORITY["EPSG","7030"]],
> > >            TOWGS84[0,0,0,0,0,0,0],
> > >            AUTHORITY["EPSG","6326"]],
> > >        PRIMEM["Greenwich",0,
> > >            AUTHORITY["EPSG","8901"]],
> > >        UNIT["degree",0.0174532925199433,
> > >            AUTHORITY["EPSG","9108"]],
> > >        AUTHORITY["EPSG","4326"]],
> > >    VERT_CS["Unnamed",
> > >        VERT_DATUM["Unnamed",2005,
> > >            EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
> > >        AXIS["Up",UP]]]
> > > 
> > > 2. How to specify the vertical with OGR (using SetVertCS, or any other
> 
> way)
> 
> > > such that it will result in PROJ.4 using the necessary GTX file?
> > > 
> > > Thanks,
> > > Ben
> > > 
> > >> -----Original Message-----
> > >> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> > >> bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> > >> Sent: Wednesday, March 09, 2011 8:41 AM
> > >> To: gdal-dev
> > >> Subject: [gdal-dev] Geocentric Coordinate System Support
> > >> 
> > >> Folks,
> > >> 
> > >> Yesterday I introduced Geocentric coordinate system support in
> > >> GDAL/OGR.  This includes OGRSpatialReference support for geocentric
> > >> coordinate systems, the ability to looking them up from EPSG, and
> > >> the ability to translate them to/from PROJ.4 format so they can be
> > >> used for transformation.  This is an example of a geocentric
> > >> coordinate system looked up from EPSG.  (Note the root is "GEOCCS")
> > >> 
> > >> GEOCCS["WGS 84 (geocentric)",
> > >>      DATUM["WGS_1984",
> > >>          SPHEROID["WGS 84",6378137,298.257223563,
> > >>              AUTHORITY["EPSG","7030"]],
> > >>          AUTHORITY["EPSG","6326"]],
> > >>      PRIMEM["Greenwich",0,
> > >>          AUTHORITY["EPSG","8901"]],
> > >>      UNIT["metre",1,
> > >>          AUTHORITY["EPSG","9001"]],
> > >>      AXIS["Geocentric X",OTHER],
> > >>      AXIS["Geocentric Y",OTHER],
> > >>      AXIS["Geocentric Z",NORTH],
> > >>      AUTHORITY["EPSG","4328"]]
> > >> 
> > >> I think there will be relatively little need for this coordinate
> 
> system,
> 
> > >> but I would appreciate feedback from anyone using it.
> > >> 
> > >>    http://trac.osgeo.org/gdal/changeset/21916
> > >> 
> > >> Best regards,
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hammack at GotSlack.org  Tue Aug 23 15:58:24 2011
From: hammack at GotSlack.org (Jim Hammack)
Date: Tue Aug 23 16:16:57 2011
Subject: [gdal-dev] problems serving DTED data via WCS
Message-ID: <4E540660.2090501@GotSlack.org>

I am trying to serve DTED data in its native format using WCS with 
mapserver 6.0.0 on Slackware 13.1.   If I serve the data as a 16-bit 
GeoTIFF or do a WCS 2.0.0 GetCoverage with a PNG output, the images look 
good.  But when I serve the same data using the GDAL/DTED driver the 
.dt1 file contains only 0 values for the data when using GetCoverage.  
Interestingly, shp2img gives me a file with nothing but 21074 (0x5252) 
for the data values.  In both cases the output of gdalinfo looks okay.

So it seems like mapserver is finding the data okay, but gdal (1.8.0) is 
not writing the dt1 file properly.

Am I missing something in the WCS configuration or is gdal confused?

                                                                 Thanks,
                                                                     Jim


------------------------
# this works
OUTPUTFORMAT
   NAME "GEOTIFFINT16"
   DRIVER "GDAL/GTiff"
   MIMETYPE "image/tiff"
   IMAGEMODE "INT16"
   EXTENSION "tif"
END

shp2img -m dted1.map -i PNG -l "elevation" -o fred.dt1 -e -90.0 30.0 
-89.0 31.0  # works

http://localhost/cgi-bin/mapserv?map=/mapserver/dted1.map&SERVICE=WCS&VERSION=2.0.0&REQUEST=GetCoverage&coverageid=elevation&format=png&subset=lon_axis,http://www.opengis.net/def/crs/EPSG/0/4326(-90.0,-89.0)&subset=lat_axis,http://www.opengis.net/def/crs/EPSG/0/4326(30.0,31.0)

---------------------------
# this does not
OUTPUTFORMAT
     NAME "DTED"
     DRIVER "GDAL/DTED"
    IMAGEMODE "INT16"
     EXTENSION "dt1"
END

shp2img -m dted1.map -i DTED -l "elevation" -o fred.dt1 -e -90.0 30.0 
-89.0 31.0  # contains 0x5252 values only

http://localhost/cgi-bin/mapserv?map=/mapserver/dted1.map&SERVICE=WCS&VERSION=2.0.0&REQUEST=GetCoverage&coverageid=elevation&format=DTED&subset=lon_axis,http://www.opengis.net/def/crs/EPSG/0/4326(-90.0,-89.0)&subset=lat_axis,http://www.opengis.net/def/crs/EPSG/0/4326(30.0,31.0)  
# contains zero values only

---------------------------

mojo:/mapserver> gdalinfo fred.dt1
Driver: DTED/DTED Elevation Raster
Files: fred.dt1
        fred.dt1.aux.xml
Size is 1201, 1201
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-90.000416666666666,31.000416666666666)
Pixel Size = (0.000833333333333,-0.000833333333333)
Metadata:
   DTED_VerticalAccuracy_UHL=NA
   DTED_VerticalAccuracy_ACC=NA
   DTED_SecurityCode_UHL=U
   DTED_SecurityCode_DSI=U
   DTED_UniqueRef_UHL=
   DTED_UniqueRef_DSI=000000000000000
   DTED_DataEdition=01
   DTED_MatchMergeVersion=A
   DTED_MaintenanceDate=0000
   DTED_MatchMergeDate=0000
   DTED_MaintenanceDescription=0000
   DTED_Producer=
   DTED_VerticalDatum=MSL
   DTED_HorizontalDatum=WGS84
   DTED_DigitizingSystem=
   DTED_CompilationDate=
   DTED_HorizontalAccuracy=NA
   DTED_RelHorizontalAccuracy=NA
   DTED_RelVerticalAccuracy=NA
   DTED_OriginLatitude=0300000N
   DTED_OriginLongitude=0900000W
   DTED_NimaDesignator=DTED1
   AREA_OR_POINT=Point
   TIFFTAG_XRESOLUTION=72.000000
   TIFFTAG_YRESOLUTION=72.000000
   TIFFTAG_RESOLUTIONUNIT=2
Corner Coordinates:
Upper Left  ( -90.0004167,  31.0004167) ( 90d 0' 1.50"W, 31d 0' 1.50"N)
Lower Left  ( -90.0004167,  29.9995833) ( 90d 0' 1.50"W, 29d59'58.50"N)
Upper Right ( -88.9995833,  31.0004167) ( 88d59'58.50"W, 31d 0' 1.50"N)
Lower Right ( -88.9995833,  29.9995833) ( 88d59'58.50"W, 29d59'58.50"N)
Center      ( -89.5000000,  30.5000000) ( 89d30' 0.00"W, 30d30' 0.00"N)
Band 1 Block=1x1201 Type=Int16, ColorInterp=Undefined
   NoData Value=-32767
   Unit Type: m





From warmerdam at pobox.com  Tue Aug 23 16:06:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 23 16:24:25 2011
Subject: [gdal-dev] Re: [mapserver-dev] problems serving DTED data via WCS
In-Reply-To: <4E540660.2090501@GotSlack.org>
References: <4E540660.2090501@GotSlack.org>
Message-ID: <CA+YzLBcwg-yxFsbS4oPyi0DzE9ZRgNeSmUoNxq4GFH4f4VnWVg@mail.gmail.com>

Jim,

The GDAL DTED driver is rather peculiar and only works for certain
very specific products.  This is briefly addressed in the document at:

  http://www.gdal.org/frmt_dted.html

But in brief, you should not depend on this driver for producing
files with arbitrary bounds, resolution and coordinate system.

Best regards,
Frank

On Tue, Aug 23, 2011 at 12:58 PM, Jim Hammack <hammack@gotslack.org> wrote:
> I am trying to serve DTED data in its native format using WCS with mapserver
> 6.0.0 on Slackware 13.1. ? If I serve the data as a 16-bit GeoTIFF or do a
> WCS 2.0.0 GetCoverage with a PNG output, the images look good. ?But when I
> serve the same data using the GDAL/DTED driver the .dt1 file contains only 0
> values for the data when using GetCoverage. ?Interestingly, shp2img gives me
> a file with nothing but 21074 (0x5252) for the data values. ?In both cases
> the output of gdalinfo looks okay.
>
> So it seems like mapserver is finding the data okay, but gdal (1.8.0) is not
> writing the dt1 file properly.
>
> Am I missing something in the WCS configuration or is gdal confused?
>
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?Thanks,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?Jim
>
>
> ------------------------
> # this works
> OUTPUTFORMAT
> ?NAME "GEOTIFFINT16"
> ?DRIVER "GDAL/GTiff"
> ?MIMETYPE "image/tiff"
> ?IMAGEMODE "INT16"
> ?EXTENSION "tif"
> END
>
> shp2img -m dted1.map -i PNG -l "elevation" -o fred.dt1 -e -90.0 30.0 -89.0
> 31.0 ?# works
>
> http://localhost/cgi-bin/mapserv?map=/mapserver/dted1.map&SERVICE=WCS&VERSION=2.0.0&REQUEST=GetCoverage&coverageid=elevation&format=png&subset=lon_axis,http://www.opengis.net/def/crs/EPSG/0/4326(-90.0,-89.0)&subset=lat_axis,http://www.opengis.net/def/crs/EPSG/0/4326(30.0,31.0)
>
> ---------------------------
> # this does not
> OUTPUTFORMAT
> ? ?NAME "DTED"
> ? ?DRIVER "GDAL/DTED"
> ? IMAGEMODE "INT16"
> ? ?EXTENSION "dt1"
> END
>
> shp2img -m dted1.map -i DTED -l "elevation" -o fred.dt1 -e -90.0 30.0 -89.0
> 31.0 ?# contains 0x5252 values only
>
> http://localhost/cgi-bin/mapserv?map=/mapserver/dted1.map&SERVICE=WCS&VERSION=2.0.0&REQUEST=GetCoverage&coverageid=elevation&format=DTED&subset=lon_axis,http://www.opengis.net/def/crs/EPSG/0/4326(-90.0,-89.0)&subset=lat_axis,http://www.opengis.net/def/crs/EPSG/0/4326(30.0,31.0)
> ?# contains zero values only
>
> ---------------------------
>
> mojo:/mapserver> gdalinfo fred.dt1
> Driver: DTED/DTED Elevation Raster
> Files: fred.dt1
> ? ? ? fred.dt1.aux.xml
> Size is 1201, 1201
> Coordinate System is:
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563]],
> ? ?PRIMEM["Greenwich",0],
> ? ?UNIT["degree",0.0174532925199433],
> ? ?AUTHORITY["EPSG","4326"]]
> Origin = (-90.000416666666666,31.000416666666666)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Metadata:
> ?DTED_VerticalAccuracy_UHL=NA
> ?DTED_VerticalAccuracy_ACC=NA
> ?DTED_SecurityCode_UHL=U
> ?DTED_SecurityCode_DSI=U
> ?DTED_UniqueRef_UHL=
> ?DTED_UniqueRef_DSI=000000000000000
> ?DTED_DataEdition=01
> ?DTED_MatchMergeVersion=A
> ?DTED_MaintenanceDate=0000
> ?DTED_MatchMergeDate=0000
> ?DTED_MaintenanceDescription=0000
> ?DTED_Producer=
> ?DTED_VerticalDatum=MSL
> ?DTED_HorizontalDatum=WGS84
> ?DTED_DigitizingSystem=
> ?DTED_CompilationDate=
> ?DTED_HorizontalAccuracy=NA
> ?DTED_RelHorizontalAccuracy=NA
> ?DTED_RelVerticalAccuracy=NA
> ?DTED_OriginLatitude=0300000N
> ?DTED_OriginLongitude=0900000W
> ?DTED_NimaDesignator=DTED1
> ?AREA_OR_POINT=Point
> ?TIFFTAG_XRESOLUTION=72.000000
> ?TIFFTAG_YRESOLUTION=72.000000
> ?TIFFTAG_RESOLUTIONUNIT=2
> Corner Coordinates:
> Upper Left ?( -90.0004167, ?31.0004167) ( 90d 0' 1.50"W, 31d 0' 1.50"N)
> Lower Left ?( -90.0004167, ?29.9995833) ( 90d 0' 1.50"W, 29d59'58.50"N)
> Upper Right ( -88.9995833, ?31.0004167) ( 88d59'58.50"W, 31d 0' 1.50"N)
> Lower Right ( -88.9995833, ?29.9995833) ( 88d59'58.50"W, 29d59'58.50"N)
> Center ? ? ?( -89.5000000, ?30.5000000) ( 89d30' 0.00"W, 30d30' 0.00"N)
> Band 1 Block=1x1201 Type=Int16, ColorInterp=Undefined
> ?NoData Value=-32767
> ?Unit Type: m
>
>
>
>
>
> _______________________________________________
> mapserver-dev mailing list
> mapserver-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/mapserver-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jgrn at illinois.edu  Tue Aug 23 16:47:04 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue Aug 23 17:07:01 2011
Subject: [gdal-dev] Using GDAL to tile an image *with* overlapping?
Message-ID: <CABG0rfv+UbDC4VFVY29isBFS10LwwCO4cFb8LWwUkJqjiSaqzA@mail.gmail.com>

GDALers:

I really like gdal.retile.py, but I'm now facing an issue where I want
to tile a file but have *overlap* between each tile.  Is there a way
to do this using existing GDAL utilities?  I want the outputs to be
geotiffs, and (ideally, but not required) I'd like a shapefile
generated of the results.  Thanks!

--j
From ben at vterrain.org  Tue Aug 23 18:38:22 2011
From: ben at vterrain.org (Ben Discoe)
Date: Tue Aug 23 19:04:36 2011
Subject: [gdal-dev] Geocentric Coordinate System Support
In-Reply-To: <201108232033.25357.even.rouault@mines-paris.org>
References: <4D77AD8E.7070006@pobox.com>
	<CACMBy_HBrgj3Md6_AwNA_hmALDyWODAtOFapBhPTuaZuPsegMw@mail.gmail.com>
	<017f01cc61ba$1f3f5f80$5dbe1e80$@org>
	<201108232033.25357.even.rouault@mines-paris.org>
Message-ID: <019301cc61e5$5d51f8c0$17f5ea40$@org>

Even,

Thanks for pointing me to the API documentation (which i had seen) and the
python unit tests (which i had not - very interesting!)  Unfortunately,
neither shows the SetVertCS method actually being called.

Thanksfully, this is the open source world :), so i am able to step through
OGR's internal methods (like SetEPSGVertCS) with a debugger to guess how
they actually work / should be called.  I have now done a fair bit of study
of the source, and GDAL's .csv data files, and have some idea of the state
of things.  I'll describe my findings in a new thread.

-Ben

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, August 23, 2011 11:33 AM
> To: gdal-dev@lists.osgeo.org
> Cc: Ben Discoe; 'Rodolfo Bonnin'
> Subject: Re: [gdal-dev] Geocentric Coordinate System Support
> 
> Le mardi 23 ao?t 2011 19:28:49, Ben Discoe a ?crit :
> 
> > My question is how
> > the geocentric support and vertical datums are supposed to work, e.g.
what
> > are valid arguments to SetVertCS which can produce a valid result when
> > transforming from geocentric?
> 
> Several links that may help you :
> 
>
http://gdal.org/ogr/classOGRSpatialReference.html#1c8d3eaf2751d9912797c75f47
7549fe
>
http://gdal.org/ogr/classOGRSpatialReference.html#4764cca1641b045a63afa95d01
922add
>
http://gdal.org/ogr/classOGRSpatialReference.html#6cb94a55501d2444b9f93eacd8
ff0411
> http://trac.osgeo.org/gdal/browser/trunk/autotest/osr/osr_basic.py
> http://trac.osgeo.org/gdal/browser/trunk/autotest/osr/osr_compd.py


From ben at vterrain.org  Tue Aug 23 20:48:44 2011
From: ben at vterrain.org (Ben Discoe)
Date: Tue Aug 23 21:22:09 2011
Subject: [gdal-dev] Vertical and geocentric coordinate support in OGR/PROJ4
Message-ID: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>

Hi folks,

The issues of geocentric CS and vertical CS are distinct, but they are related in an important way: Geocentric coordinates are not very useful to the GIS world unless they can be converted to orthometric ("sea level") heights, which involves a vertical CS.

Currently, the GDAL/OGR/PROJ4 stack has limited support for geocentric & vertical CS, but the limitation of what works and what doesn't is difficult to guess from the documentation.  I'd like to contribute my understanding to date.

GDAL is actually doing quite a lot right, despite some major historical issues it has to deal with.  As far as i can tell:

1. PROJ4 was never meant to handle vertical CS; as described on http://trac.osgeo.org/proj/wiki/VerticalDatums it's a late addition.

2. The EPSG codes are a messy, incomplete patchwork of 2D and 3D coordinate systems, in which vertical CS also seems to be an awkward, late addition.

3. OGC's WKT encoding (and hence OGR's) also wasn't quite designed to handle vertical CS; it can store a VERT_CS node, but that apparently isn't sufficient to actually define the transformation.

Understandably, as a result of the above history, the OGRSpatialReference implementation of VERT_DATUM nodes is somewhat awkward and ad-hoc.

The simplest way to create an OGRSpatialReference with a vertical CS is to use an import function, for example:

A. Working backwards from PROJ4:
  srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx");

or

B. Example of a compound, Paris-based CS from EPSG:
  srs.importFromEPSG(7400);

The first example produces an SRS that works (assuming you have g2009conus.gtx installed on your PROJ_LIB folder).  The WKT has a section that looks like:
    VERT_CS["NAVD88 height",
        VERT_DATUM["North American Vertical Datum 1988",2005,
            EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
        AXIS["Up",UP]]	

The PROJ4_GRIDS EXTENSION is what makes PROJ4 work.

The second example will not actually function.  It creates WKT like this:
COMPD_CS["NTF (Paris) + NGF IGN69 height",
    GEOGCS[...],
    VERT_CS["NGF IGN69 height",
        VERT_DATUM["Nivellement General de la France - IGN69",2005,
            AUTHORITY["EPSG","5119"]],
        AXIS["Up",UP],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AUTHORITY["EPSG","5720"]],
    AUTHORITY["EPSG","7400"]]

It lacks a PROJ4_GRIDS, because in the GDAL data file for composite CS, compdcs.csv, the entry is:
   7400,"NTF (Paris) + NGF IGN69 height",4807,5720,1,0

This means the vertical CS is 5720, which appears in vertcs.csv as:
   5720,NGF IGN69 height,5119,Nivellement General de la France - IGN69,9001,1,0,6499,,

Note there is no .gtx file present for 5720.  There are in fact only 3 entries in vertcs.csv which contain a .gtx file, and hence only 3 that will produce valid results:

  3855,EGM2008 geoid height,1027,EGM2008 geoid,9001,1,0,6499,9665,"egm08_25.gtx"
  5703,NAVD88 height,5103,North American Vertical Datum 1988,9001,1,0,6499,9665,"g2003conus.gtx,g2003alaska.gtx,g2003h01.gtx,g2003p01.gtx"
  5773,EGM96 geoid height,5171,EGM96 geoid,9001,1,0,6499,9665,"egm96_15.gtx"

Of those three (3855, 5703, 5773), there is not a single entry in compdcs.csv which uses them.  Hence, no compound CS set by EPSG code will actually work.

The third way to create an OGRSpatialReference with a vertical CS is like this:

  srs4.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
  srs4.SetExtension("VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");

AFAICT, the arguments to SetVertCS() are not a matter of functionality; they can be anything, but it seems good practice to put human-readable descriptions in there, ideally taken from a standard text like vertcs.csv.  (This example is a bit confusing, because the vertical datum is named 1988, but the latest version of it is 2009).  The main purpose of calling SetVertCS is to promote the CS to a compound CS with a VERT_DATUM node.  The next call (SetExtension) can then decorate the VERT_DATUM with the 'extension' to make the SRS actually work, i.e. allow it to exportToProj4 correctly so that OGRCreateCoordinateTransformation will work correctly.

Here is a complete, functional example of converting a geocentric value to a geographic coordinate with orthometric height:	

  OGRSpatialReference srs1, srs2;
  srs1.importFromEPSG(4978);		// 4978 is the EPSG code for geocentric (ECEF)
  srs2.SetWellKnownGeogCS("WGS84");
  srs2.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
  srs2.SetExtension( "VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");

  double x, y, z;
  x = -2691744.9992481042;	// A point on the ellipsoid
  y = -4262401.8609118778;
  z =  3894209.4515372305;

  // ecef -> geoid
  OGRCoordinateTransformation *oct = OGRCreateCoordinateTransformation(&srs1, &srs2);
  oct->Transform(1, &x, &y, &z);
  printf(" lon,lat,height %lf,%lf,%lf\n", x, y, z);

If it works, it prints the correct value:
lon,lat,height -122.272778,37.871667,32.269611

If the VertCS/Extension is omitted, or if PROJ cannot find the .gtx file, or anything else goes wrong, you simply get the ellipsoidal height (close to 0.0).

In conclusion, although the vertical CS support in OGR/PROJ4 is a bit limited (and neither the limitations nor supported cases are documented), it can be made to work.  Hopefully, this email will prove useful as documentation for anyone else needing to do this transformation.

As an aside, this whole discussion is purely about what works in the Open stack; i have absolutely no idea what sort of WKT (COMPD_CS / VERT_CS / VERT_DATUM) would work in the e.g. ESRI universe.

-Ben

From hsumanto at vpac.org  Wed Aug 24 04:50:40 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Wed Aug 24 05:49:48 2011
Subject: [gdal-dev] Re: gdalwarp capability to output as netCDF format
In-Reply-To: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>
Message-ID: <1798381570.68141.1314175840433.JavaMail.root@mail.vpac.org>

I probably should change the question to this to make it clearer.
Does anyone know whether there is plan to implement Create method for netCDF driver as currently it is only support only CreateCopy method?
If no, could someone please describe what steps would be involved to add this method to the netCDF driver as I am pretty new to GDAL.

Thanks.

Regards,

Hendy
From chaitanya.ch at gmail.com  Wed Aug 24 05:09:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 24 06:09:21 2011
Subject: [gdal-dev] Re: gdalwarp capability to output as netCDF format
In-Reply-To: <1798381570.68141.1314175840433.JavaMail.root@mail.vpac.org>
References: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>
	<1798381570.68141.1314175840433.JavaMail.root@mail.vpac.org>
Message-ID: <CAMKgpObUxP43DzGUs=cciNhYddNJ19VZc=ZGR042O2Wa==MdQA@mail.gmail.com>

Hendy,

Currently, there are no plans to implement the Create method for the netCDF
driver. You can formally request for it by creating a ticket in the gdal
trac page [1].

To implement the method yourselves, you have to look at the current driver
page[2] and the driver implementation tutorial page[3].

[1]: http://trac.osgeo.org/gdal/
[2]: http://www.gdal.org/frmt_netcdf.html
[3]: http://www.gdal.org/gdal_drivertut.html

On Wed, Aug 24, 2011 at 2:20 PM, Hendy Sumanto <hsumanto@vpac.org> wrote:

> I probably should change the question to this to make it clearer.
> Does anyone know whether there is plan to implement Create method for
> netCDF driver as currently it is only support only CreateCopy method?
> If no, could someone please describe what steps would be involved to add
> this method to the netCDF driver as I am pretty new to GDAL.
>
> Thanks.
>
> Regards,
>
> Hendy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110824/3681fcf4/attachment.html
From chaitanya.ch at gmail.com  Wed Aug 24 05:20:36 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 24 06:21:24 2011
Subject: [gdal-dev] Using GDAL to tile an image *with* overlapping?
In-Reply-To: <CABG0rfv+UbDC4VFVY29isBFS10LwwCO4cFb8LWwUkJqjiSaqzA@mail.gmail.com>
References: <CABG0rfv+UbDC4VFVY29isBFS10LwwCO4cFb8LWwUkJqjiSaqzA@mail.gmail.com>
Message-ID: <CAMKgpObHSSU+f1FepM6qDkDLHZuh_VrnM1Mw_D3zR1ZdAKMRWA@mail.gmail.com>

Jonathan,

I think you will have to modify the gdal_retile.py script[1] yourselves.
Can you explain what you mean by the shapefile of the results?

[1]:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal_retile.py

On Wed, Aug 24, 2011 at 2:17 AM, Jonathan Greenberg <jgrn@illinois.edu>wrote:

> GDALers:
>
> I really like gdal.retile.py, but I'm now facing an issue where I want
> to tile a file but have *overlap* between each tile.  Is there a way
> to do this using existing GDAL utilities?  I want the outputs to be
> geotiffs, and (ideally, but not required) I'd like a shapefile
> generated of the results.  Thanks!
>
> --j
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110824/8193c429/attachment.html
From even.rouault at mines-paris.org  Wed Aug 24 07:49:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 24 08:59:06 2011
Subject: [gdal-dev] Re: gdalwarp capability to output as netCDF format
In-Reply-To: <CAMKgpObUxP43DzGUs=cciNhYddNJ19VZc=ZGR042O2Wa==MdQA@mail.gmail.com>
References: <1507953215.62776.1313733134023.JavaMail.root@mail.vpac.org>
	<1798381570.68141.1314175840433.JavaMail.root@mail.vpac.org>
	<CAMKgpObUxP43DzGUs=cciNhYddNJ19VZc=ZGR042O2Wa==MdQA@mail.gmail.com>
Message-ID: <1314186595.4e54e56356adc@webmail.free.fr>

Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:

I'd note that implementing Create() is not always possible, depending on the
caracteristics of the format iself and/or the library that enables the access to
it. For netCDF, I can't say, being not versed into the format. There's perhaps
hope that it is doable since I see that the nc_put_vara_double() API that is
called in CreateCopy() takes as argument the offset where to write the buffer,
but it is not a guarantee that random access is possible.

Without changing the code, you still have the possibility to warp into a format
that supports Create() and translate into netCDF afterwards. The intermediate
format could be VRT if you want to save disk space. Of course, in that case, the
translate step will be a bit longer since it will do the warping on the fly.

> Hendy,
>
> Currently, there are no plans to implement the Create method for the netCDF
> driver. You can formally request for it by creating a ticket in the gdal
> trac page [1].
>
> To implement the method yourselves, you have to look at the current driver
> page[2] and the driver implementation tutorial page[3].
>
> [1]: http://trac.osgeo.org/gdal/
> [2]: http://www.gdal.org/frmt_netcdf.html
> [3]: http://www.gdal.org/gdal_drivertut.html
>
> On Wed, Aug 24, 2011 at 2:20 PM, Hendy Sumanto <hsumanto@vpac.org> wrote:
>
> > I probably should change the question to this to make it clearer.
> > Does anyone know whether there is plan to implement Create method for
> > netCDF driver as currently it is only support only CreateCopy method?
> > If no, could someone please describe what steps would be involved to add
> > this method to the netCDF driver as I am pretty new to GDAL.
> >
> > Thanks.
> >
> > Regards,
> >
> > Hendy
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>


From hobu.inc at gmail.com  Wed Aug 24 09:50:09 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Aug 24 11:05:42 2011
Subject: [gdal-dev] Vertical and geocentric coordinate support in OGR/PROJ4
In-Reply-To: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>
References: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>
Message-ID: <C1BA32F0-7CFA-43E6-85E5-B327826E364E@gmail.com>

Ben,

I appreciate this attempt to elucidate the current status of vertical and geocentric coordinate support for OGR/proj.4. Indeed it was work that Frank had been doing the past year or so before being snatched up by the Google. As you've found out, it's not quite complete or thoroughly documented, but the basics are there.

Here's some more information that Frank has produced about the subject:

- http://lists.osgeo.org/pipermail/liblas-devel/2010-October/001023.html <-- grid file mechanism for vertical datums
- http://trac.osgeo.org/geotiff/wiki/VerticalCS <-- the vertical situation with respect to GeoTIFF

One limitation I've run into is there's no easy way to set different vertical and horizontal units for a COMP_CS. This is something I hope can get fixed soon, although I'll admit to being a neophyte when it comes to vertical stuff and how all three things (GeoTIFF, proj.4, GDAL) interact with respect to it.

Howard

From ricardo.garcia.silva at gmail.com  Wed Aug 24 13:07:55 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Wed Aug 24 14:34:23 2011
Subject: [gdal-dev] reading postgis raster in mode 2 error
Message-ID: <CAFcNcQbY+MCiVRunU3VC0THxaAM0v1arvHNrQKax4wO5E_aLzQ@mail.gmail.com>

Hi list

I am trying out the postgis raster driver.

I'm running Ubuntu 11.04 with gdal 1.8 from the ubuntugis repository.
As for postgis I've compiled a snapshot of postgis 2.0 from svn, as
offered on the postgis website.

Following the directions in the driver info page[1], I've been trying
to get a gdalinfo on the katrina.tif file. When I run it using
mode='1' everything goes as expected and I get info on each of the
tiles.

but when using mode='2' I am getting this error:

gdalinfo -mm -stats -checksum "PG:host='localhost' dbname='gis_testes'
user='gisuser' password='resusig' table='katrina' mode='2'"


ERROR 1: Error, the                     ONE_RASTER_PER_TABLE mode
can't be applied if the raster                     rows don't have the
same metadata for band 1
gdalinfo failed - unable to open 'PG:host='localhost'
dbname='gis_testes' user='test_user' password='test_pass'
table='katrina' mode='2''.


When importing the file into postgis I ran the following command:

/usr/lib/postgresql/8.4/bin/raster2pgsql.py -r ~/Downloads/katrina.tif
-t katrina -k 64x64 -o katrina.sql -s 4326 -I


Thanks for your help

[1] - http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html

-- 
___________________________ ___ __
Ricardo Garcia Silva
From rjholloway at gmail.com  Wed Aug 24 13:40:12 2011
From: rjholloway at gmail.com (Richard Holloway)
Date: Wed Aug 24 15:08:04 2011
Subject: [gdal-dev] how to use gdal and c# to add metadata tag with guid
Message-ID: <CAB8DYfU+oH3BJ=v2_U2iivZTPGtQ225PBD=76x0WnvmYVB1UFQ@mail.gmail.com>

I was wondering if any one could give me steps on how to do this?  I can't
find a clear explanation on how.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110824/9473f42e/attachment.html
From even.rouault at mines-paris.org  Wed Aug 24 14:38:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 24 16:09:21 2011
Subject: [gdal-dev] Vertical and geocentric coordinate support in OGR/PROJ4
In-Reply-To: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>
References: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>
Message-ID: <201108242038.05141.even.rouault@mines-paris.org>

Le mercredi 24 ao?t 2011 02:48:44, Ben Discoe a ?crit :
> Hi folks,
> 
> The issues of geocentric CS and vertical CS are distinct, but they are
> related in an important way: Geocentric coordinates are not very useful to
> the GIS world unless they can be converted to orthometric ("sea level")
> heights, which involves a vertical CS.
> 
> Currently, the GDAL/OGR/PROJ4 stack has limited support for geocentric &
> vertical CS, but the limitation of what works and what doesn't is
> difficult to guess from the documentation.  I'd like to contribute my
> understanding to date.
> 
> GDAL is actually doing quite a lot right, despite some major historical
> issues it has to deal with.  As far as i can tell:
> 
> 1. PROJ4 was never meant to handle vertical CS; as described on
> http://trac.osgeo.org/proj/wiki/VerticalDatums it's a late addition.
> 
> 2. The EPSG codes are a messy, incomplete patchwork of 2D and 3D coordinate
> systems, in which vertical CS also seems to be an awkward, late addition.
> 
> 3. OGC's WKT encoding (and hence OGR's) also wasn't quite designed to
> handle vertical CS; it can store a VERT_CS node, but that apparently isn't
> sufficient to actually define the transformation.
> 
> Understandably, as a result of the above history, the OGRSpatialReference
> implementation of VERT_DATUM nodes is somewhat awkward and ad-hoc.
> 
> The simplest way to create an OGRSpatialReference with a vertical CS is to
> use an import function, for example:
> 
> A. Working backwards from PROJ4:
>   srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs
> +geoidgrids=g2009conus.gtx");
> 
> or
> 
> B. Example of a compound, Paris-based CS from EPSG:
>   srs.importFromEPSG(7400);
> 
> The first example produces an SRS that works (assuming you have
> g2009conus.gtx installed on your PROJ_LIB folder).  The WKT has a section
> that looks like: VERT_CS["NAVD88 height",
>         VERT_DATUM["North American Vertical Datum 1988",2005,
>             EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
>         AXIS["Up",UP]]
> 
> The PROJ4_GRIDS EXTENSION is what makes PROJ4 work.
> 
> The second example will not actually function.  It creates WKT like this:
> COMPD_CS["NTF (Paris) + NGF IGN69 height",
>     GEOGCS[...],
>     VERT_CS["NGF IGN69 height",
>         VERT_DATUM["Nivellement General de la France - IGN69",2005,
>             AUTHORITY["EPSG","5119"]],
>         AXIS["Up",UP],
>         UNIT["metre",1,
>             AUTHORITY["EPSG","9001"]],
>         AUTHORITY["EPSG","5720"]],
>     AUTHORITY["EPSG","7400"]]
> 
> It lacks a PROJ4_GRIDS, because in the GDAL data file for composite CS,
> compdcs.csv, the entry is: 7400,"NTF (Paris) + NGF IGN69
> height",4807,5720,1,0
> 
> This means the vertical CS is 5720, which appears in vertcs.csv as:
>    5720,NGF IGN69 height,5119,Nivellement General de la France -
> IGN69,9001,1,0,6499,,
> 
> Note there is no .gtx file present for 5720.  There are in fact only 3
> entries in vertcs.csv which contain a .gtx file, and hence only 3 that
> will produce valid results:
> 
>   3855,EGM2008 geoid height,1027,EGM2008
> geoid,9001,1,0,6499,9665,"egm08_25.gtx" 5703,NAVD88 height,5103,North
> American Vertical Datum
> 1988,9001,1,0,6499,9665,"g2003conus.gtx,g2003alaska.gtx,g2003h01.gtx,g2003
> p01.gtx" 5773,EGM96 geoid height,5171,EGM96
> geoid,9001,1,0,6499,9665,"egm96_15.gtx"

My understanding (based on http://trac.osgeo.org/geotiff/changeset/1893 ) is 
that the GTX files are hand-added in a vertcs.override.csv file and merged with 
the data that come from the original EPSG database. So it is "just" a matter 
of finding the appropriate grid, adding new entries in vertcs.override.csv and 
then running the script that regenerates the CSV files ...

> 
> Of those three (3855, 5703, 5773), there is not a single entry in
> compdcs.csv which uses them.  Hence, no compound CS set by EPSG code will
> actually work.

Actually, there's another way of building a compound CS from EPSG codes you 
probably didn't notice. You can use a string like 
"EPSG:horizontal_code+vertical_code" as a valid input to SetFromUserInput().

For example if you want EPSG 4326 with the EGM 96 geoid, you would do 
"EPSG:4326+5773".

Here's the output of testepsg utility :

$ testepsg "EPSG:4326+5773"
Validate Succeeds.
WKT[EPSG:4326+5773] =
COMPD_CS["WGS 84 + VERT_CS",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    VERT_CS["EGM96 geoid height",
        VERT_DATUM["EGM96 geoid",2005,
            AUTHORITY["EPSG","5171"],
            EXTENSION["PROJ4_GRIDS","egm96_15.gtx"]],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AXIS["Up",UP],
        AUTHORITY["EPSG","5773"]]]

[...]

PROJ.4 rendering of [EPSG:4326+5773] = +proj=longlat +datum=WGS84 
+geoidgrids=egm96_15.gtx +no_defs 


> 
> The third way to create an OGRSpatialReference with a vertical CS is like
> this:
> 
>   srs4.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
>   srs4.SetExtension("VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");
> 
> AFAICT, the arguments to SetVertCS() are not a matter of functionality;
> they can be anything, but it seems good practice to put human-readable
> descriptions in there, ideally taken from a standard text like vertcs.csv.
>  (This example is a bit confusing, because the vertical datum is named
> 1988, but the latest version of it is 2009).  The main purpose of calling
> SetVertCS is to promote the CS to a compound CS with a VERT_DATUM node. 

Yes, that's syntaxic sugar. Technically SetCompoundCS() would be the most 
"straightforward" way of building a compound CS from an horizontal and a 
vertical CS. SetVertCS() has indeed that extra magic to save a step :

" * This method will ensure a VERT_CS node is created if needed.  If the
 * existing coordinate system is GEOGCS or PROJCS rooted, then it will be
 * turned into a COMPD_CS."

> The next call (SetExtension) can then decorate the VERT_DATUM with the
> 'extension' to make the SRS actually work, i.e. allow it to exportToProj4
> correctly so that OGRCreateCoordinateTransformation will work correctly.

Yes, the extension is needed if you want to make use of the vertical CS with 
proj4. The text descriptions attached to the COMPD_CS, VERT_CS and VERT_DATUM 
nodes are ignored in the proj4 world.

> 
> Here is a complete, functional example of converting a geocentric value to
> a geographic coordinate with orthometric height:
> 
>   OGRSpatialReference srs1, srs2;
>   srs1.importFromEPSG(4978);		// 4978 is the EPSG code for geocentric
> (ECEF) srs2.SetWellKnownGeogCS("WGS84");
>   srs2.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
>   srs2.SetExtension( "VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");
> 
>   double x, y, z;
>   x = -2691744.9992481042;	// A point on the ellipsoid
>   y = -4262401.8609118778;
>   z =  3894209.4515372305;
> 
>   // ecef -> geoid
>   OGRCoordinateTransformation *oct =
> OGRCreateCoordinateTransformation(&srs1, &srs2); oct->Transform(1, &x, &y,
> &z);
>   printf(" lon,lat,height %lf,%lf,%lf\n", x, y, z);
> 
> If it works, it prints the correct value:
> lon,lat,height -122.272778,37.871667,32.269611
> 
> If the VertCS/Extension is omitted, or if PROJ cannot find the .gtx file,
> or anything else goes wrong, you simply get the ellipsoidal height (close
> to 0.0).
> 
> In conclusion, although the vertical CS support in OGR/PROJ4 is a bit
> limited (and neither the limitations nor supported cases are documented),
> it can be made to work.  Hopefully, this email will prove useful as
> documentation for anyone else needing to do this transformation.

Perhaps you would be willing to initiate a Trac wiki page with your findings ?

> 
> As an aside, this whole discussion is purely about what works in the Open
> stack; i have absolutely no idea what sort of WKT (COMPD_CS / VERT_CS /
> VERT_DATUM) would work in the e.g. ESRI universe.

There seems indeed to have differences on how this is handled in the ESRI 
world. I see this comment in OGRSpatialReference::importFromWkt() 
implementation :

/* -------------------------------------------------------------------- */
/*      The following seems to try and detect and unconsumed            */
/*      VERTCS[] coordinate system definition (ESRI style) and to       */
/*      import and attach it to the existing root.  Likely we will      */
/*      need to extend this somewhat to bring it into an acceptable     */
/*      OGRSpatialReference organization at some point.                 */
/* -------------------------------------------------------------------- */

> 
> -Ben
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etiennesky at yahoo.com  Wed Aug 24 16:37:19 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Wed Aug 24 18:15:04 2011
Subject: [gdal-dev] discussion on improvements to the NetCDF driver and CF-1
	convention
Message-ID: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>

Hi all,
I would like to start a discussion with those interested about fixing various issues in the NetCDF driver.

As it stands, it is not fully CF-1.0 compliant, and produces geographical grids that are not valid for other software.
Also, the infamous "up-side down" problem has been addressed for importing netcdfs, but needs to be addressed for exporting.

Related ticket: http://trac.osgeo.org/gdal/ticket/2129
I have been submitting patches for some time to fix the related issues.

I have identified a number of issues, of which the following have been fixed partially in my proposed patch.

1- conform to the cf-1.0 standard for geographical grids (creating lat and lon dimensions and variables)
2- make netcdf grids "bottom-up" by default, as all software out there uses that convention
3- fix problems related to floating-point / string conversions (also reported in issue #4200 )
4- fix metadata handling and duplication (as reported in issue #4204), and keep band (variable) metadata outside of the global metadata

Pending issues:

5- how to deal with netcdfs which have no datum? Can we assume WGS84?
????
These files are extremely common, and CF-1.0 has provisions for identifying the key variables, but no Proj/Wkt codes. 
6- fix proper export of projected CRS (this is not fully necessary though) with lat/lon values respecting CF-1.0
7- handle time axis properly (at least when creating a netcdf) - that would be great for import/export of netcdf

Regards,
Etienne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110824/23adfe6f/attachment.html
From jgrn at illinois.edu  Wed Aug 24 21:09:28 2011
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed Aug 24 23:02:26 2011
Subject: [gdal-dev] Using GDAL to tile an image *with* overlapping?
In-Reply-To: <CAMKgpObHSSU+f1FepM6qDkDLHZuh_VrnM1Mw_D3zR1ZdAKMRWA@mail.gmail.com>
References: <CABG0rfv+UbDC4VFVY29isBFS10LwwCO4cFb8LWwUkJqjiSaqzA@mail.gmail.com>
	<CAMKgpObHSSU+f1FepM6qDkDLHZuh_VrnM1Mw_D3zR1ZdAKMRWA@mail.gmail.com>
Message-ID: <CABG0rfuoFG-TenjRaOomwDbR-2nd=bMn7tw0udkUThVD645tPQ@mail.gmail.com>

Re: the shapefile: I'm just referring to this flag:

-tileIndex tileIndexName:
The name of shape file containing the result tile(s) index

I don't know python, so I'll probably go ahead and code this
functionality up in R via rgdal/raster, but perhaps this can be listed
as a feature request?  The reason I want to tile the data is to
perform some spatial processing -- I need an overlap between tiles to
deal with the fact that I'm using local windows to process the image
subsets.

--j

On Wed, Aug 24, 2011 at 2:20 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Jonathan,
>
> I think you will have to modify the gdal_retile.py script[1] yourselves.
> Can you explain what you mean by the shapefile of the results?
>
> [1]:
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal_retile.py
>
> On Wed, Aug 24, 2011 at 2:17 AM, Jonathan Greenberg <jgrn@illinois.edu>
> wrote:
>>
>> GDALers:
>>
>> I really like gdal.retile.py, but I'm now facing an issue where I want
>> to tile a file but have *overlap* between each tile. ?Is there a way
>> to do this using existing GDAL utilities? ?I want the outputs to be
>> geotiffs, and (ideally, but not required) I'd like a shapefile
>> generated of the results. ?Thanks!
>>
>> --j
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
From chaitanya.ch at gmail.com  Thu Aug 25 03:39:00 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug 25 05:53:15 2011
Subject: [gdal-dev] how to use gdal and c# to add metadata tag with guid
In-Reply-To: <CAB8DYfU+oH3BJ=v2_U2iivZTPGtQ225PBD=76x0WnvmYVB1UFQ@mail.gmail.com>
References: <CAB8DYfU+oH3BJ=v2_U2iivZTPGtQ225PBD=76x0WnvmYVB1UFQ@mail.gmail.com>
Message-ID: <CAMKgpOaMkFd+KUmad3r6nDg7ha2DospKeybqdFFBYO2LbHAY9w@mail.gmail.com>

Richard,

I assume you already opened the raster dataset using C#.

Checkout the AttachMetadata() function in gdal_translate.cpp utility[1]. The
C function GDALSetMetadataItem() is used instead of
GDALPamDataset::SetMetadataItem() here.

[1]:
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L1284

On Wed, Aug 24, 2011 at 11:10 PM, Richard Holloway <rjholloway@gmail.com>wrote:

> I was wondering if any one could give me steps on how to do this?  I can't
> find a clear explanation on how.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110825/6d14d394/attachment-0001.html
From dmbaker at cox.net  Thu Aug 25 10:35:46 2011
From: dmbaker at cox.net (David M. Baker)
Date: Thu Aug 25 13:32:34 2011
Subject: [gdal-dev] Vertical and geocentric coordinate support in OGR/PROJ4
In-Reply-To: <201108242038.05141.even.rouault@mines-paris.org>
References: <019d01cc61f7$93ee5bf0$bbcb13d0$@org>
	<201108242038.05141.even.rouault@mines-paris.org>
Message-ID: <F5B10393-94EA-4C50-91FD-2B3078A43FF2@cox.net>

All,

I see reference to the NAVD88 grids. Are there any of the other vertical grids available? If not, can and or how would one add, say, the hybrid GEOID09 grids? 

David Baker
Sent from my iPhone

On Aug 24, 2011, at 1:38 PM, Even Rouault <even.rouault@mines-paris.org> wrote:

> Le mercredi 24 ao?t 2011 02:48:44, Ben Discoe a ?crit :
>> Hi folks,
>> 
>> The issues of geocentric CS and vertical CS are distinct, but they are
>> related in an important way: Geocentric coordinates are not very useful to
>> the GIS world unless they can be converted to orthometric ("sea level")
>> heights, which involves a vertical CS.
>> 
>> Currently, the GDAL/OGR/PROJ4 stack has limited support for geocentric &
>> vertical CS, but the limitation of what works and what doesn't is
>> difficult to guess from the documentation.  I'd like to contribute my
>> understanding to date.
>> 
>> GDAL is actually doing quite a lot right, despite some major historical
>> issues it has to deal with.  As far as i can tell:
>> 
>> 1. PROJ4 was never meant to handle vertical CS; as described on
>> http://trac.osgeo.org/proj/wiki/VerticalDatums it's a late addition.
>> 
>> 2. The EPSG codes are a messy, incomplete patchwork of 2D and 3D coordinate
>> systems, in which vertical CS also seems to be an awkward, late addition.
>> 
>> 3. OGC's WKT encoding (and hence OGR's) also wasn't quite designed to
>> handle vertical CS; it can store a VERT_CS node, but that apparently isn't
>> sufficient to actually define the transformation.
>> 
>> Understandably, as a result of the above history, the OGRSpatialReference
>> implementation of VERT_DATUM nodes is somewhat awkward and ad-hoc.
>> 
>> The simplest way to create an OGRSpatialReference with a vertical CS is to
>> use an import function, for example:
>> 
>> A. Working backwards from PROJ4:
>>  srs.importFromProj4("+proj=longlat +datum=WGS84 +no_defs
>> +geoidgrids=g2009conus.gtx");
>> 
>> or
>> 
>> B. Example of a compound, Paris-based CS from EPSG:
>>  srs.importFromEPSG(7400);
>> 
>> The first example produces an SRS that works (assuming you have
>> g2009conus.gtx installed on your PROJ_LIB folder).  The WKT has a section
>> that looks like: VERT_CS["NAVD88 height",
>>        VERT_DATUM["North American Vertical Datum 1988",2005,
>>            EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
>>        AXIS["Up",UP]]
>> 
>> The PROJ4_GRIDS EXTENSION is what makes PROJ4 work.
>> 
>> The second example will not actually function.  It creates WKT like this:
>> COMPD_CS["NTF (Paris) + NGF IGN69 height",
>>    GEOGCS[...],
>>    VERT_CS["NGF IGN69 height",
>>        VERT_DATUM["Nivellement General de la France - IGN69",2005,
>>            AUTHORITY["EPSG","5119"]],
>>        AXIS["Up",UP],
>>        UNIT["metre",1,
>>            AUTHORITY["EPSG","9001"]],
>>        AUTHORITY["EPSG","5720"]],
>>    AUTHORITY["EPSG","7400"]]
>> 
>> It lacks a PROJ4_GRIDS, because in the GDAL data file for composite CS,
>> compdcs.csv, the entry is: 7400,"NTF (Paris) + NGF IGN69
>> height",4807,5720,1,0
>> 
>> This means the vertical CS is 5720, which appears in vertcs.csv as:
>>   5720,NGF IGN69 height,5119,Nivellement General de la France -
>> IGN69,9001,1,0,6499,,
>> 
>> Note there is no .gtx file present for 5720.  There are in fact only 3
>> entries in vertcs.csv which contain a .gtx file, and hence only 3 that
>> will produce valid results:
>> 
>>  3855,EGM2008 geoid height,1027,EGM2008
>> geoid,9001,1,0,6499,9665,"egm08_25.gtx" 5703,NAVD88 height,5103,North
>> American Vertical Datum
>> 1988,9001,1,0,6499,9665,"g2003conus.gtx,g2003alaska.gtx,g2003h01.gtx,g2003
>> p01.gtx" 5773,EGM96 geoid height,5171,EGM96
>> geoid,9001,1,0,6499,9665,"egm96_15.gtx"
> 
> My understanding (based on http://trac.osgeo.org/geotiff/changeset/1893 ) is 
> that the GTX files are hand-added in a vertcs.override.csv file and merged with 
> the data that come from the original EPSG database. So it is "just" a matter 
> of finding the appropriate grid, adding new entries in vertcs.override.csv and 
> then running the script that regenerates the CSV files ...
> 
>> 
>> Of those three (3855, 5703, 5773), there is not a single entry in
>> compdcs.csv which uses them.  Hence, no compound CS set by EPSG code will
>> actually work.
> 
> Actually, there's another way of building a compound CS from EPSG codes you 
> probably didn't notice. You can use a string like 
> "EPSG:horizontal_code+vertical_code" as a valid input to SetFromUserInput().
> 
> For example if you want EPSG 4326 with the EGM 96 geoid, you would do 
> "EPSG:4326+5773".
> 
> Here's the output of testepsg utility :
> 
> $ testepsg "EPSG:4326+5773"
> Validate Succeeds.
> WKT[EPSG:4326+5773] =
> COMPD_CS["WGS 84 + VERT_CS",
>    GEOGCS["WGS 84",
>        DATUM["WGS_1984",
>            SPHEROID["WGS 84",6378137,298.257223563,
>                AUTHORITY["EPSG","7030"]],
>            AUTHORITY["EPSG","6326"]],
>        PRIMEM["Greenwich",0,
>            AUTHORITY["EPSG","8901"]],
>        UNIT["degree",0.0174532925199433,
>            AUTHORITY["EPSG","9122"]],
>        AUTHORITY["EPSG","4326"]],
>    VERT_CS["EGM96 geoid height",
>        VERT_DATUM["EGM96 geoid",2005,
>            AUTHORITY["EPSG","5171"],
>            EXTENSION["PROJ4_GRIDS","egm96_15.gtx"]],
>        UNIT["metre",1,
>            AUTHORITY["EPSG","9001"]],
>        AXIS["Up",UP],
>        AUTHORITY["EPSG","5773"]]]
> 
> [...]
> 
> PROJ.4 rendering of [EPSG:4326+5773] = +proj=longlat +datum=WGS84 
> +geoidgrids=egm96_15.gtx +no_defs 
> 
> 
>> 
>> The third way to create an OGRSpatialReference with a vertical CS is like
>> this:
>> 
>>  srs4.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
>>  srs4.SetExtension("VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");
>> 
>> AFAICT, the arguments to SetVertCS() are not a matter of functionality;
>> they can be anything, but it seems good practice to put human-readable
>> descriptions in there, ideally taken from a standard text like vertcs.csv.
>> (This example is a bit confusing, because the vertical datum is named
>> 1988, but the latest version of it is 2009).  The main purpose of calling
>> SetVertCS is to promote the CS to a compound CS with a VERT_DATUM node. 
> 
> Yes, that's syntaxic sugar. Technically SetCompoundCS() would be the most 
> "straightforward" way of building a compound CS from an horizontal and a 
> vertical CS. SetVertCS() has indeed that extra magic to save a step :
> 
> " * This method will ensure a VERT_CS node is created if needed.  If the
> * existing coordinate system is GEOGCS or PROJCS rooted, then it will be
> * turned into a COMPD_CS."
> 
>> The next call (SetExtension) can then decorate the VERT_DATUM with the
>> 'extension' to make the SRS actually work, i.e. allow it to exportToProj4
>> correctly so that OGRCreateCoordinateTransformation will work correctly.
> 
> Yes, the extension is needed if you want to make use of the vertical CS with 
> proj4. The text descriptions attached to the COMPD_CS, VERT_CS and VERT_DATUM 
> nodes are ignored in the proj4 world.
> 
>> 
>> Here is a complete, functional example of converting a geocentric value to
>> a geographic coordinate with orthometric height:
>> 
>>  OGRSpatialReference srs1, srs2;
>>  srs1.importFromEPSG(4978);        // 4978 is the EPSG code for geocentric
>> (ECEF) srs2.SetWellKnownGeogCS("WGS84");
>>  srs2.SetVertCS("NAVD88 height", "North American Vertical Datum 1988");
>>  srs2.SetExtension( "VERT_DATUM", "PROJ4_GRIDS", "g2009conus.gtx");
>> 
>>  double x, y, z;
>>  x = -2691744.9992481042;    // A point on the ellipsoid
>>  y = -4262401.8609118778;
>>  z =  3894209.4515372305;
>> 
>>  // ecef -> geoid
>>  OGRCoordinateTransformation *oct =
>> OGRCreateCoordinateTransformation(&srs1, &srs2); oct->Transform(1, &x, &y,
>> &z);
>>  printf(" lon,lat,height %lf,%lf,%lf\n", x, y, z);
>> 
>> If it works, it prints the correct value:
>> lon,lat,height -122.272778,37.871667,32.269611
>> 
>> If the VertCS/Extension is omitted, or if PROJ cannot find the .gtx file,
>> or anything else goes wrong, you simply get the ellipsoidal height (close
>> to 0.0).
>> 
>> In conclusion, although the vertical CS support in OGR/PROJ4 is a bit
>> limited (and neither the limitations nor supported cases are documented),
>> it can be made to work.  Hopefully, this email will prove useful as
>> documentation for anyone else needing to do this transformation.
> 
> Perhaps you would be willing to initiate a Trac wiki page with your findings ?
> 
>> 
>> As an aside, this whole discussion is purely about what works in the Open
>> stack; i have absolutely no idea what sort of WKT (COMPD_CS / VERT_CS /
>> VERT_DATUM) would work in the e.g. ESRI universe.
> 
> There seems indeed to have differences on how this is handled in the ESRI 
> world. I see this comment in OGRSpatialReference::importFromWkt() 
> implementation :
> 
> /* -------------------------------------------------------------------- */
> /*      The following seems to try and detect and unconsumed            */
> /*      VERTCS[] coordinate system definition (ESRI style) and to       */
> /*      import and attach it to the existing root.  Likely we will      */
> /*      need to extend this somewhat to bring it into an acceptable     */
> /*      OGRSpatialReference organization at some point.                 */
> /* -------------------------------------------------------------------- */
> 
>> 
>> -Ben
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ksshannon at gmail.com  Thu Aug 25 12:26:09 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Aug 25 15:09:31 2011
Subject: [gdal-dev] discussion on improvements to the NetCDF driver and
	CF-1 convention
In-Reply-To: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
Message-ID: <CAJ0mEz0eM2wYnTpa1S6Bvr7VyPV9+f2xfvB+Tum=DzyFuF+CXQ@mail.gmail.com>

Etienne,
I am all for the improvements.  I am a little short on time for the next 2-4
weeks, but I would like to spend some time on this.  I think that the closer
we get to a CF-1.x compliant file the better.  That also gives us a little
better specification to work towards.  I hope to have some more time soon to
work on this.  There does seem to be more interest in the driver and the
file format recently.

kss

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */




On Wed, Aug 24, 2011 at 14:37, Etienne Tourigny <etiennesky@yahoo.com>wrote:

> Hi all,
>
> I would like to start a discussion with those interested about fixing
> various issues in the NetCDF driver.
>
> As it stands, it is not fully CF-1.0 compliant, and produces geographical
> grids that are not valid for other software.
> Also, the infamous "up-side down" problem has been addressed for importing
> netcdfs, but needs to be addressed for exporting.
>
> Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> I have been submitting patches for some time to fix the related issues.
>
> I have identified a number of issues, of which the following have been
> fixed partially in my proposed patch.
>
> 1- conform to the cf-1.0 standard for geographical grids (creating lat and
> lon dimensions and variables)
> 2- make netcdf grids "bottom-up" by default, as all software out there uses
> that convention
> 3- fix problems related to floating-point / string conversions (also
> reported in issue #4200 )
> 4- fix metadata handling and duplication (as reported in issue #4204), and
> keep band (variable) metadata outside of the global metadata
>
> Pending issues:
>
> 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
>      These files are extremely common, and CF-1.0 has provisions for
> identifying the key variables, but no Proj/Wkt codes.
> 6- fix proper export of projected CRS (this is not fully necessary though)
> with lat/lon values respecting CF-1.0
> 7- handle time axis properly (at least when creating a netcdf) - that would
> be great for import/export of netcdf
>
> Regards,
> Etienne
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110825/dca2a279/attachment.html
From hiebert at uvic.ca  Thu Aug 25 13:50:09 2011
From: hiebert at uvic.ca (James Hiebert)
Date: Thu Aug 25 16:40:24 2011
Subject: [gdal-dev] discussion on improvements to the NetCDF driver and
	CF-1 convention
In-Reply-To: <CAJ0mEz0eM2wYnTpa1S6Bvr7VyPV9+f2xfvB+Tum=DzyFuF+CXQ@mail.gmail.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<CAJ0mEz0eM2wYnTpa1S6Bvr7VyPV9+f2xfvB+Tum=DzyFuF+CXQ@mail.gmail.com>
Message-ID: <20110825175005.GC14922@basalt.uvic.ca>

FWIW my organization is a heavy user of both GDAL and geographic netcdfs (usually disparately since GDAL can't always handle the CF-1.x compliant files that we have/use/create).  So if you're assessing need in the community, I'll add a +1.  Not sure how much I can help; I'm not an expert in either CF or GDAL, but have used them enough to be able to attest that the support could be improved.
Cheers,

~James

On Thu, Aug 25, 2011 at 10:26:09AM -0600, Kyle Shannon wrote:
> Etienne,
> I am all for the improvements.  I am a little short on time for the next 2-4
> weeks, but I would like to spend some time on this.  I think that the closer
> we get to a CF-1.x compliant file the better.  That also gives us a little
> better specification to work towards.  I hope to have some more time soon to
> work on this.  There does seem to be more interest in the driver and the
> file format recently.
> 
> kss
> 
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com
>  *
>  */
> 
> 
> 
> 
> On Wed, Aug 24, 2011 at 14:37, Etienne Tourigny <etiennesky@yahoo.com>wrote:
> 
> > Hi all,
> >
> > I would like to start a discussion with those interested about fixing
> > various issues in the NetCDF driver.
> >
> > As it stands, it is not fully CF-1.0 compliant, and produces geographical
> > grids that are not valid for other software.
> > Also, the infamous "up-side down" problem has been addressed for importing
> > netcdfs, but needs to be addressed for exporting.
> >
> > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > I have been submitting patches for some time to fix the related issues.
> >
> > I have identified a number of issues, of which the following have been
> > fixed partially in my proposed patch.
> >
> > 1- conform to the cf-1.0 standard for geographical grids (creating lat and
> > lon dimensions and variables)
> > 2- make netcdf grids "bottom-up" by default, as all software out there uses
> > that convention
> > 3- fix problems related to floating-point / string conversions (also
> > reported in issue #4200 )
> > 4- fix metadata handling and duplication (as reported in issue #4204), and
> > keep band (variable) metadata outside of the global metadata
> >
> > Pending issues:
> >
> > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> >      These files are extremely common, and CF-1.0 has provisions for
> > identifying the key variables, but no Proj/Wkt codes.
> > 6- fix proper export of projected CRS (this is not fully necessary though)
> > with lat/lon values respecting CF-1.0
> > 7- handle time axis properly (at least when creating a netcdf) - that would
> > be great for import/export of netcdf
> >
> > Regards,
> > Etienne
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
James Hiebert
Lead, Computational Support
Pacific Climate Impacts Consortium
http://www.pacificclimate.org
Room 113, University House 1, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
E-mail: hiebert@uvic.ca
Tel: (250) 472-4521
Fax: (250) 472-4830
From hsumanto at vpac.org  Thu Aug 25 22:05:27 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Fri Aug 26 01:21:10 2011
Subject: [gdal-dev] discussion on improvements to the NetCDF driver and
	CF-1 convention
In-Reply-To: <20110825175005.GC14922@basalt.uvic.ca>
Message-ID: <999632518.70344.1314324327110.JavaMail.root@mail.vpac.org>

The same for our organisation. We have used GDAL to perform various operation on mostly geotiff format dataset.
At the moment we are trying to see whether we could support NetCDF format too as this format is now widely used in the community thus
it would be very beneficial to the communicty if the current NetCDF driver and its CF-1 convention could be improved.

Hendy

----- Original Message -----
From: "James Hiebert" <hiebert@uvic.ca>
To: gdal-dev@lists.osgeo.org
Sent: Friday, 26 August, 2011 3:50:09 AM
Subject: Re: [gdal-dev] discussion on improvements to the NetCDF driver and	CF-1 convention

FWIW my organization is a heavy user of both GDAL and geographic netcdfs (usually disparately since GDAL can't always handle the CF-1.x compliant files that we have/use/create).  So if you're assessing need in the community, I'll add a +1.  Not sure how much I can help; I'm not an expert in either CF or GDAL, but have used them enough to be able to attest that the support could be improved.
Cheers,

~James

On Thu, Aug 25, 2011 at 10:26:09AM -0600, Kyle Shannon wrote:
> Etienne,
> I am all for the improvements.  I am a little short on time for the next 2-4
> weeks, but I would like to spend some time on this.  I think that the closer
> we get to a CF-1.x compliant file the better.  That also gives us a little
> better specification to work towards.  I hope to have some more time soon to
> work on this.  There does seem to be more interest in the driver and the
> file format recently.
> 
> kss
> 
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com
>  *
>  */
> 
> 
> 
> 
> On Wed, Aug 24, 2011 at 14:37, Etienne Tourigny <etiennesky@yahoo.com>wrote:
> 
> > Hi all,
> >
> > I would like to start a discussion with those interested about fixing
> > various issues in the NetCDF driver.
> >
> > As it stands, it is not fully CF-1.0 compliant, and produces geographical
> > grids that are not valid for other software.
> > Also, the infamous "up-side down" problem has been addressed for importing
> > netcdfs, but needs to be addressed for exporting.
> >
> > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > I have been submitting patches for some time to fix the related issues.
> >
> > I have identified a number of issues, of which the following have been
> > fixed partially in my proposed patch.
> >
> > 1- conform to the cf-1.0 standard for geographical grids (creating lat and
> > lon dimensions and variables)
> > 2- make netcdf grids "bottom-up" by default, as all software out there uses
> > that convention
> > 3- fix problems related to floating-point / string conversions (also
> > reported in issue #4200 )
> > 4- fix metadata handling and duplication (as reported in issue #4204), and
> > keep band (variable) metadata outside of the global metadata
> >
> > Pending issues:
> >
> > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> >      These files are extremely common, and CF-1.0 has provisions for
> > identifying the key variables, but no Proj/Wkt codes.
> > 6- fix proper export of projected CRS (this is not fully necessary though)
> > with lat/lon values respecting CF-1.0
> > 7- handle time axis properly (at least when creating a netcdf) - that would
> > be great for import/export of netcdf
> >
> > Regards,
> > Etienne
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From knutfrodesoppel at hotmail.com  Fri Aug 26 03:41:02 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Fri Aug 26 07:15:31 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and
	CF-1 convention
In-Reply-To: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
Message-ID: <j37ime$g8k$1@dough.gmane.org>

Etienne,

My group is also very much in support of the suggested improvements, as 
NetCDF/CF is becoming the most important standard for data 
storage/exchange in our community (climate, meteorology, oceanography). 
My group is not much into GDAL driver development (at least not yet), 
but we are now building our future very much around GDAL, so we are 
interested to join the discussion around improved support for NetCDF/CF 
reading and writing.

About some of the mentioned issues:

1) The latest version of CF is 1.5, so it would be better to target 1.5 
(or 1.x) than 1.0. Ideally the driver could be made generic for smooth 
upgrade to newer (or downgrade to older) versions of the CF conventions.

5) It sounds meaningful to assume WGS84 datum if not specified. I 
believe at least 99% of data typically stored in NetCDF/CF will have 
this datum, and even when that is not the case, positioning errors less 
than 100 m should normally have little impact for the types of data. 
Precision on datum level is probably more relevant for more typical 
GIS-data with roads, borders etc.
A warning could however be issued each time the driver has to assume WGS84.

7) We agree in particular that proper handling of time axis is of high 
value. This is one of the issues which is highly relevant for 
climate-data (often 4-dimensional), but not well supported by typical 
GIS-software or standards designed with 2-dimensional data in mind.
A general representation of a time-axis (or even vertical axis) in GDAL 
would be ideal, but that would probably be too much an effort for anyone 
to develop.


Knut-Frode
Nansen Environmental and Remote Sensing Center



On 24/08/2011 22:37, Etienne Tourigny wrote:
> Hi all,
>
> I would like to start a discussion with those interested about fixing
> various issues in the NetCDF driver.
>
> As it stands, it is not fully CF-1.0 compliant, and produces
> geographical grids that are not valid for other software.
> Also, the infamous "up-side down" problem has been addressed for
> importing netcdfs, but needs to be addressed for exporting.
>
> Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> I have been submitting patches for some time to fix the related issues.
>
> I have identified a number of issues, of which the following have been
> fixed partially in my proposed patch.
>
> 1- conform to the cf-1.0 standard for geographical grids (creating lat
> and lon dimensions and variables)
> 2- make netcdf grids "bottom-up" by default, as all software out there
> uses that convention
> 3- fix problems related to floating-point / string conversions (also
> reported in issue #4200 )
> 4- fix metadata handling and duplication (as reported in issue #4204),
> and keep band (variable) metadata outside of the global metadata
>
> Pending issues:
>
> 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> These files are extremely common, and CF-1.0 has provisions for
> identifying the key variables, but no Proj/Wkt codes.
> 6- fix proper export of projected CRS (this is not fully necessary
> though) with lat/lon values respecting CF-1.0
> 7- handle time axis properly (at least when creating a netcdf) - that
> would be great for import/export of netcdf
>
> Regards,
> Etienne
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From tappenbeck at widemann.de  Fri Aug 26 09:01:45 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Aug 26 13:02:04 2011
Subject: [gdal-dev] Problem to merge 2 images
Message-ID: <4E579939.10402@widemann.de>



  hi !

i have got two images to merge and convert into ecw - but i only get a 
error-message and a black image.

i send following command:


gdal_merge.bat -of GTiff -o 
D:/GDAL_Projekte/xxxxxxxxxx/xxxxxxxxxx_gesamt.tif 
D:/GDAL_Projekte/xxxxxxxxxx/xxxxxxxxxx_300_nord_geo.tif 
D:/GDAL_Projekte/xxxxxxxxxx/xxxxxxxxxx_300_sued_geo.tif

gdal_translate -of ECW -co LARGE_OK=YES 
D:/GDAL_Projekte/xxxxxxxxxx/xxxxxxxxxx_gesamt.tif 
D:/GDAL_Projekte/xxxxxxxxxx/xxxxxxxxxx_gesamt.ecw

and here are the image-infos and the message - can anybody help me?

reagards Jan :-)

C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
D:/GDAL_Projekte/XXXXXXX/XXXXXXX_
300_nord_geo.tif
Driver: GTiff/GeoTIFF
Files: D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_nord_geo.tif
        D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_nord_geo.tfw
Size is 25848, 19395
Coordinate System is:
PROJCS["unnamed",
     GEOGCS[,
         DATUM["unknown",
             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT[,0.0174532925199433]],
     UNIT["unknown",1]]
Origin = (3551283.342142190800000,5917001.142321675100000)
Pixel Size = (0.423322208955370,-0.423342973054873)
Metadata:
   TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
   TIFFTAG_XRESOLUTION=300
   TIFFTAG_YRESOLUTION=300
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=PACKBITS
   INTERLEAVE=BAND
   MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 3551283.342, 5917001.142)
Lower Left  ( 3551283.342, 5908790.405)
Upper Right ( 3562225.375, 5917001.142)
Lower Right ( 3562225.375, 5908790.405)
Center      ( 3556754.358, 5912895.774)
Band 1 Block=25848x19393 Type=Byte, ColorInterp=Palette
   Image Structure Metadata:
     NBITS=1
   Color Table (RGB with 2 entries)
     0: 255,255,255,255
     1: 0,0,0,255

C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
D:/GDAL_Projekte/XXXXXXX/XXXXXXX_
300_sued_geo.tif
Driver: GTiff/GeoTIFF
Files: D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_sued_geo.tif
        D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_sued_geo.tfw
Size is 25849, 19394
Coordinate System is:
PROJCS["unnamed",
     GEOGCS[,
         DATUM["unknown",
             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT[,0.0174532925199433]],
     UNIT["unknown",1]]
Origin = (3551215.913367207200000,5909585.856755478300000)
Pixel Size = (0.423327969973589,-0.423338937597159)
Metadata:
   TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
   TIFFTAG_XRESOLUTION=300
   TIFFTAG_YRESOLUTION=300
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=PACKBITS
   INTERLEAVE=BAND
   MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 3551215.913, 5909585.857)
Lower Left  ( 3551215.913, 5901375.621)
Upper Right ( 3562158.518, 5909585.857)
Lower Right ( 3562158.518, 5901375.621)
Center      ( 3556687.216, 5905480.739)
Band 1 Block=25849x19393 Type=Byte, ColorInterp=Palette
   Image Structure Metadata:
     NBITS=1
   Color Table (RGB with 2 entries)
     0: 255,255,255,255
     1: 0,0,0,255

C:\Program Files (x86)\FWTools2.4.7>D:\GDAL_Projekte\XXXXXXX\XXXXXXX.bat

C:\Program Files (x86)\FWTools2.4.7>gdal_merge.bat -of GTiff -o 
D:/GDAL_Projekte
/XXXXXXX/XXXXXXX_gesamt.tif D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_nord_geo.ti
f D:/GDAL_Projekte/XXXXXXX/XXXXXXX_300_sued_geo.tif
ERROR 4: `D:/GDAL_Projekte/XXXXXXX/XXXXXXX_gesamt.tif' not recognised as 
a sup
ported file format.

0ERROR 2: GDALRasterBlock::Internalize : Out of memory allocating 
501270264 byte
s.
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
Traceback (most recent call last):
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 472, in ?
     sys.exit(main())
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 459, in main
     fi.copy_into( t_fh, band, band, nodata )
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 231, in copy_into
     nodata_arg )
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 62, in raster_copy
     t_xsize, t_ysize, t_band.DataType )
   File "C:\PROGRA~2\FWTOOL~1.7\pymod\gdal.py", line 851, in ReadRaster
     buf_xsize, buf_ysize,buf_type)
TypeError: GetBlockRef failed at X block offset 0, Y block offset 1

From tappenbeck at widemann.de  Fri Aug 26 09:17:50 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Aug 26 13:11:51 2011
Subject: [gdal-dev] pruge images
Message-ID: <4E579CFE.8060109@widemann.de>



  hi!

i have following problem. openstreetmap could be download images by 
aerowest for drawing elementes. the download had to taken manuell and so 
it is not possible to create leaf cut off images.

know i want to clean my gallery in hope to get more performance in my 
local wms-service.

did anybody had a idea to merge all the images (georef!) distributed 
over the hole town and cut then regualar without overlap?!?!?

regards Jan :-)

From peifer at gmx.eu  Fri Aug 26 09:38:19 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Aug 26 13:32:06 2011
Subject: [gdal-dev] ERROR 4: `test.asc' not recognised as a supported file
	format.
Message-ID: <j387ka$o1v$1@dough.gmane.org>

Hi,

Occasionally I use a small .asc file, which I then gdal_translate into a 
bigger blank GeoTIFF. I tried to make the smallest possible test.asc 
file with 1 col x 1 row and 1 cell value only, but I ended up with ERROR 
4: file not recognised as a supported file format.

The error message seems to go away after adding (useless) values to the 
file, see below.

I am wondering if this is a feature or rather a bug?

Thanks for your time, Hermann

----------

$ gdalinfo --debug on test.asc
ERROR 4: `test.asc' not recognised as a supported file format.

gdalinfo failed - unable to open 'test.asc'.


$ gdalinfo --debug on test2.asc
GDAL: GDALOpen(test2.asc, this=0xab0610) succeeds as AAIGrid.
Driver: AAIGrid/Arc/Info ASCII Grid
Files: test2.asc
Size is 1, 1
Coordinate System is `'
Origin = (0.000000000000000,1.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  (   0.0000000,   1.0000000)
Lower Left  (   0.0000000,   0.0000000)
Upper Right (   1.0000000,   1.0000000)
Lower Right (   1.0000000,   0.0000000)
Center      (   0.5000000,   0.5000000)
Band 1 Block=1x1 Type=Int32, ColorInterp=Undefined
GDAL: GDALClose(test2.asc, this=0xab0610)


$ gdalinfo --debug on test3.asc
GDAL: GDALOpen(test3.asc, this=0x16c5610) succeeds as AAIGrid.
Driver: AAIGrid/Arc/Info ASCII Grid
Files: test3.asc
Size is 1, 1
Coordinate System is `'
Origin = (0.000000000000000,1.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  (   0.0000000,   1.0000000)
Lower Left  (   0.0000000,   0.0000000)
Upper Right (   1.0000000,   1.0000000)
Lower Right (   1.0000000,   0.0000000)
Center      (   0.5000000,   0.5000000)
Band 1 Block=1x1 Type=Int32, ColorInterp=Undefined
GDAL: GDALClose(test3.asc, this=0x16c5610)


$ cat test.asc
ncols         1
nrows         1
xllcorner     0
yllcorner     0
cellsize      1
0
$ cat test2.asc
ncols         1
nrows         1
xllcorner     0
yllcorner     0
cellsize      1
0 0 0 0 0 0 0 0 0 0
$ cat test3.asc
ncols         1
nrows         1
xllcorner     0
yllcorner     0
cellsize      1
123456789 987654321
$


From rush at winkey.org  Fri Aug 26 09:48:49 2011
From: rush at winkey.org (Brian Case)
Date: Fri Aug 26 13:43:06 2011
Subject: [gdal-dev] pruge images
In-Reply-To: <4E579CFE.8060109@widemann.de>
References: <4E579CFE.8060109@widemann.de>
Message-ID: <1314366529.8205.5.camel@octopi>

Jan

if you already have a wms setup with your data you could use the wms
driver to read it. gdal_translate to a bigtiff. then cut it up into
tiles with gdal_translate -srcwin

Brian


On Fri, 2011-08-26 at 15:17 +0200, Jan Tappenbeck wrote:
> 
>   hi!
> 
> i have following problem. openstreetmap could be download images by 
> aerowest for drawing elementes. the download had to taken manuell and so 
> it is not possible to create leaf cut off images.
> 
> know i want to clean my gallery in hope to get more performance in my 
> local wms-service.
> 
> did anybody had a idea to merge all the images (georef!) distributed 
> over the hole town and cut then regualar without overlap?!?!?
> 
> regards Jan :-)
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From rush at winkey.org  Fri Aug 26 10:05:47 2011
From: rush at winkey.org (Brian Case)
Date: Fri Aug 26 14:01:04 2011
Subject: [gdal-dev] pruge images
In-Reply-To: <4E57A557.2080201@widemann.de>
References: <4E579CFE.8060109@widemann.de> <1314366529.8205.5.camel@octopi>
	<4E57A557.2080201@widemann.de>
Message-ID: <1314367547.8205.12.camel@octopi>

Jan

you can skip that step and cut it up directly but it will take quite a
bit longer. the wms driver will download the entire area each time you
run gdal_translate -scrwin n n n n mywms.xml myouttile.tif

also if your running into wms performance issues have you built
overviews on your images? http://www.gdal.org/gdaladdo.html

Brian




On Fri, 2011-08-26 at 15:53 +0200, Jan Tappenbeck wrote:
> 
>   Am 26.08.2011 15:48, schrieb Brian Case:
> > Jan
> >
> > if you already have a wms setup with your data you could use the wms
> > driver to read it. gdal_translate to a bigtiff.
> hi !
> 
> thanks for response - but merge the image first into a large image will 
> be kill the maschine ! win7 64 bit - 4 gb workspace.
> 
> 1500 files with total 1 gb !
> 
> regards Jan :-)
> 
> 
> > then cut it up into
> > tiles with gdal_translate -srcwin
> >
> > Brian
> >
> >
> > On Fri, 2011-08-26 at 15:17 +0200, Jan Tappenbeck wrote:
> >>    hi!
> >>
> >> i have following problem. openstreetmap could be download images by
> >> aerowest for drawing elementes. the download had to taken manuell and so
> >> it is not possible to create leaf cut off images.
> >>
> >> know i want to clean my gallery in hope to get more performance in my
> >> local wms-service.
> >>
> >> did anybody had a idea to merge all the images (georef!) distributed
> >> over the hole town and cut then regualar without overlap?!?!?
> >>
> >> regards Jan :-)
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> 
> 


From chaitanya.ch at gmail.com  Fri Aug 26 10:12:32 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug 26 14:08:06 2011
Subject: [gdal-dev] Problem to merge 2 images
In-Reply-To: <4E579939.10402@widemann.de>
References: <4E579939.10402@widemann.de>
Message-ID: <CAMKgpObYm-tvsyPj84932PHz+4JyjrnciexKhh1xF=KnxFBRig@mail.gmail.com>

Jan,

The first error message is because of the block size. The entire image is
taken as a block; not good for large rasters. When copying, GDAL tries to
load the entire block into the memory.

It's very likely that the problem will be resolved if we create copies of
the gtiffs with smaller blocks. Use gdal_translate with the -co option[1] to
set the BLOCKXSIZE and BLOCKYSIZE [2] of the output image. Since the
datatype of the gtiffs is byte set them both to 1024. Decrease it to 512 or
256 if the problem persists.

[1]: http://www.gdal.org/gdal_translate.html
[2]: http://www.gdal.org/frmt_gtiff.html

On Fri, Aug 26, 2011 at 6:31 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  hi !
>
> i have got two images to merge and convert into ecw - but i only get a
> error-message and a black image.
>
> i send following command:
>
>
> gdal_merge.bat -of GTiff -o D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.tif
> D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_300_nord_geo.tif
> D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_300_sued_geo.tif
>
> gdal_translate -of ECW -co LARGE_OK=YES D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.tif
> D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.ecw
>
> and here are the image-infos and the message - can anybody help me?
>
> reagards Jan :-)
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:/GDAL_Projekte/XXXXXXX/**
> XXXXXXX_
> 300_nord_geo.tif
> Driver: GTiff/GeoTIFF
> Files: D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_nord_geo.tif
>       D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_nord_geo.tfw
> Size is 25848, 19395
> Coordinate System is:
> PROJCS["unnamed",
>    GEOGCS[,
>        DATUM["unknown",
>            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]]*
> *,
>        PRIMEM["Greenwich",0],
>        UNIT[,0.0174532925199433]],
>    UNIT["unknown",1]]
> Origin = (3551283.342142190800000,**5917001.142321675100000)
> Pixel Size = (0.423322208955370,-0.**423342973054873)
> Metadata:
>  TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
>  TIFFTAG_XRESOLUTION=300
>  TIFFTAG_YRESOLUTION=300
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  COMPRESSION=PACKBITS
>  INTERLEAVE=BAND
>  MINISWHITE=YES
> Corner Coordinates:
> Upper Left  ( 3551283.342, 5917001.142)
> Lower Left  ( 3551283.342, 5908790.405)
> Upper Right ( 3562225.375, 5917001.142)
> Lower Right ( 3562225.375, 5908790.405)
> Center      ( 3556754.358, 5912895.774)
> Band 1 Block=25848x19393 Type=Byte, ColorInterp=Palette
>  Image Structure Metadata:
>    NBITS=1
>  Color Table (RGB with 2 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:/GDAL_Projekte/XXXXXXX/**
> XXXXXXX_
> 300_sued_geo.tif
> Driver: GTiff/GeoTIFF
> Files: D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tif
>       D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tfw
> Size is 25849, 19394
> Coordinate System is:
> PROJCS["unnamed",
>    GEOGCS[,
>        DATUM["unknown",
>            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]]*
> *,
>        PRIMEM["Greenwich",0],
>        UNIT[,0.0174532925199433]],
>    UNIT["unknown",1]]
> Origin = (3551215.913367207200000,**5909585.856755478300000)
> Pixel Size = (0.423327969973589,-0.**423338937597159)
> Metadata:
>  TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
>  TIFFTAG_XRESOLUTION=300
>  TIFFTAG_YRESOLUTION=300
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  COMPRESSION=PACKBITS
>  INTERLEAVE=BAND
>  MINISWHITE=YES
> Corner Coordinates:
> Upper Left  ( 3551215.913, 5909585.857)
> Lower Left  ( 3551215.913, 5901375.621)
> Upper Right ( 3562158.518, 5909585.857)
> Lower Right ( 3562158.518, 5901375.621)
> Center      ( 3556687.216, 5905480.739)
> Band 1 Block=25849x19393 Type=Byte, ColorInterp=Palette
>  Image Structure Metadata:
>    NBITS=1
>  Color Table (RGB with 2 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
>
> C:\Program Files (x86)\FWTools2.4.7>D:\GDAL_**Projekte\XXXXXXX\XXXXXXX.bat
>
> C:\Program Files (x86)\FWTools2.4.7>gdal_merge.**bat -of GTiff -o
> D:/GDAL_Projekte
> /XXXXXXX/XXXXXXX_gesamt.tif D:/GDAL_Projekte/XXXXXXX/**
> XXXXXXX_300_nord_geo.ti
> f D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tif
> ERROR 4: `D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_gesamt.tif' not recognised as
> a sup
> ported file format.
>
> 0ERROR 2: GDALRasterBlock::Internalize : Out of memory allocating 501270264
> byte
> s.
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
> Traceback (most recent call last):
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 472, in ?
>    sys.exit(main())
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 459, in main
>    fi.copy_into( t_fh, band, band, nodata )
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 231, in copy_into
>    nodata_arg )
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 62, in
> raster_copy
>    t_xsize, t_ysize, t_band.DataType )
>  File "C:\PROGRA~2\FWTOOL~1.7\pymod\**gdal.py", line 851, in ReadRaster
>    buf_xsize, buf_ysize,buf_type)
> TypeError: GetBlockRef failed at X block offset 0, Y block offset 1
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110826/19af569d/attachment-0001.html
From even.rouault at mines-paris.org  Fri Aug 26 10:33:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 26 14:29:50 2011
Subject: [gdal-dev] ERROR 4: `test.asc' not recognised as a supported file
	format.
In-Reply-To: <j387ka$o1v$1@dough.gmane.org>
References: <j387ka$o1v$1@dough.gmane.org>
Message-ID: <1314369185.4e57aea1a11a9@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

> Hi,
>
> Occasionally I use a small .asc file, which I then gdal_translate into a
> bigger blank GeoTIFF. I tried to make the smallest possible test.asc
> file with 1 col x 1 row and 1 cell value only, but I ended up with ERROR
> 4: file not recognised as a supported file format.
>
> The error message seems to go away after adding (useless) values to the
> file, see below.
>
> I am wondering if this is a feature or rather a bug?

Feature/bug/hazard... who knows ;-) The test that identifies if a file is
AAIGRID first checks if there are at least 100 bytes in the file, which looks
like a rough estimate of the size taken by the minimum header lines and should
be fine for any sensible raster. I guess this test could be just killed since
the Identify() also checks the presence of one of the keywords. But you have
found the workaround, just add enough spaces at the end of your files and it
should be OK. Anyway you can create a ticket if you wish

>
> Thanks for your time, Hermann
>
> ----------
>
> $ gdalinfo --debug on test.asc
> ERROR 4: `test.asc' not recognised as a supported file format.
>
> gdalinfo failed - unable to open 'test.asc'.
>
>
> $ gdalinfo --debug on test2.asc
> GDAL: GDALOpen(test2.asc, this=0xab0610) succeeds as AAIGrid.
> Driver: AAIGrid/Arc/Info ASCII Grid
> Files: test2.asc
> Size is 1, 1
> Coordinate System is `'
> Origin = (0.000000000000000,1.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Corner Coordinates:
> Upper Left  (   0.0000000,   1.0000000)
> Lower Left  (   0.0000000,   0.0000000)
> Upper Right (   1.0000000,   1.0000000)
> Lower Right (   1.0000000,   0.0000000)
> Center      (   0.5000000,   0.5000000)
> Band 1 Block=1x1 Type=Int32, ColorInterp=Undefined
> GDAL: GDALClose(test2.asc, this=0xab0610)
>
>
> $ gdalinfo --debug on test3.asc
> GDAL: GDALOpen(test3.asc, this=0x16c5610) succeeds as AAIGrid.
> Driver: AAIGrid/Arc/Info ASCII Grid
> Files: test3.asc
> Size is 1, 1
> Coordinate System is `'
> Origin = (0.000000000000000,1.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Corner Coordinates:
> Upper Left  (   0.0000000,   1.0000000)
> Lower Left  (   0.0000000,   0.0000000)
> Upper Right (   1.0000000,   1.0000000)
> Lower Right (   1.0000000,   0.0000000)
> Center      (   0.5000000,   0.5000000)
> Band 1 Block=1x1 Type=Int32, ColorInterp=Undefined
> GDAL: GDALClose(test3.asc, this=0x16c5610)
>
>
> $ cat test.asc
> ncols         1
> nrows         1
> xllcorner     0
> yllcorner     0
> cellsize      1
> 0
> $ cat test2.asc
> ncols         1
> nrows         1
> xllcorner     0
> yllcorner     0
> cellsize      1
> 0 0 0 0 0 0 0 0 0 0
> $ cat test3.asc
> ncols         1
> nrows         1
> xllcorner     0
> yllcorner     0
> cellsize      1
> 123456789 987654321
> $
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Fri Aug 26 10:42:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 26 14:40:00 2011
Subject: [gdal-dev] Problem to merge 2 images
In-Reply-To: <CAMKgpObYm-tvsyPj84932PHz+4JyjrnciexKhh1xF=KnxFBRig@mail.gmail.com>
References: <4E579939.10402@widemann.de>
	<CAMKgpObYm-tvsyPj84932PHz+4JyjrnciexKhh1xF=KnxFBRig@mail.gmail.com>
Message-ID: <1314369767.4e57b0e71b2e1@webmail.free.fr>

Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:

> Jan,
>
> The first error message is because of the block size. The entire image is
> taken as a block; not good for large rasters. When copying, GDAL tries to
> load the entire block into the memory.
>
> It's very likely that the problem will be resolved if we create copies of
> the gtiffs with smaller blocks. Use gdal_translate with the -co option[1] to
> set the BLOCKXSIZE and BLOCKYSIZE [2] of the output image. Since the
> datatype of the gtiffs is byte set them both to 1024. Decrease it to 512 or
> 256 if the problem persists.

Yes, I share your analysis, but it might be impossible to use gdal_translate of
FWTools to do that since the limitation will be the same : you must have enough
RAM to load the single block into memory.

There have been improvements in the GTiff driver in versions more recent that
the one shipped with FWTools, which, when used with the internal libtiff, make
those one-single-strip compressed files viewed as standard stripped file. As
FWTools 2.4.7 corresponds to a pre-1.6 version and its production is now
discontinued, you might want to explore the alternatives presented in the
Windows section of http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries that
ship with updated versions.

>
> [1]: http://www.gdal.org/gdal_translate.html
> [2]: http://www.gdal.org/frmt_gtiff.html
>
> On Fri, Aug 26, 2011 at 6:31 PM, Jan Tappenbeck
> <tappenbeck@widemann.de>wrote:
>
> >
> >
> >  hi !
> >
> > i have got two images to merge and convert into ecw - but i only get a
> > error-message and a black image.
> >
> > i send following command:
> >
> >
> > gdal_merge.bat -of GTiff -o
> D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.tif
> > D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_300_nord_geo.tif
> > D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_300_sued_geo.tif
> >
> > gdal_translate -of ECW -co LARGE_OK=YES
> D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.tif
> > D:/GDAL_Projekte/xxxxxxxxxx/**xxxxxxxxxx_gesamt.ecw
> >
> > and here are the image-infos and the message - can anybody help me?
> >
> > reagards Jan :-)
> >
> > C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:/GDAL_Projekte/XXXXXXX/**
> > XXXXXXX_
> > 300_nord_geo.tif
> > Driver: GTiff/GeoTIFF
> > Files: D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_nord_geo.tif
> >       D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_nord_geo.tfw
> > Size is 25848, 19395
> > Coordinate System is:
> > PROJCS["unnamed",
> >    GEOGCS[,
> >        DATUM["unknown",
> >            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]]*
> > *,
> >        PRIMEM["Greenwich",0],
> >        UNIT[,0.0174532925199433]],
> >    UNIT["unknown",1]]
> > Origin = (3551283.342142190800000,**5917001.142321675100000)
> > Pixel Size = (0.423322208955370,-0.**423342973054873)
> > Metadata:
> >  TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
> >  TIFFTAG_XRESOLUTION=300
> >  TIFFTAG_YRESOLUTION=300
> >  AREA_OR_POINT=Area
> > Image Structure Metadata:
> >  COMPRESSION=PACKBITS
> >  INTERLEAVE=BAND
> >  MINISWHITE=YES
> > Corner Coordinates:
> > Upper Left  ( 3551283.342, 5917001.142)
> > Lower Left  ( 3551283.342, 5908790.405)
> > Upper Right ( 3562225.375, 5917001.142)
> > Lower Right ( 3562225.375, 5908790.405)
> > Center      ( 3556754.358, 5912895.774)
> > Band 1 Block=25848x19393 Type=Byte, ColorInterp=Palette
> >  Image Structure Metadata:
> >    NBITS=1
> >  Color Table (RGB with 2 entries)
> >    0: 255,255,255,255
> >    1: 0,0,0,255
> >
> > C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:/GDAL_Projekte/XXXXXXX/**
> > XXXXXXX_
> > 300_sued_geo.tif
> > Driver: GTiff/GeoTIFF
> > Files: D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tif
> >       D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tfw
> > Size is 25849, 19394
> > Coordinate System is:
> > PROJCS["unnamed",
> >    GEOGCS[,
> >        DATUM["unknown",
> >            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]]*
> > *,
> >        PRIMEM["Greenwich",0],
> >        UNIT[,0.0174532925199433]],
> >    UNIT["unknown",1]]
> > Origin = (3551215.913367207200000,**5909585.856755478300000)
> > Pixel Size = (0.423327969973589,-0.**423338937597159)
> > Metadata:
> >  TIFFTAG_SOFTWARE=WGEO 3.0.0.69 VKB KAWinsen2
> >  TIFFTAG_XRESOLUTION=300
> >  TIFFTAG_YRESOLUTION=300
> >  AREA_OR_POINT=Area
> > Image Structure Metadata:
> >  COMPRESSION=PACKBITS
> >  INTERLEAVE=BAND
> >  MINISWHITE=YES
> > Corner Coordinates:
> > Upper Left  ( 3551215.913, 5909585.857)
> > Lower Left  ( 3551215.913, 5901375.621)
> > Upper Right ( 3562158.518, 5909585.857)
> > Lower Right ( 3562158.518, 5901375.621)
> > Center      ( 3556687.216, 5905480.739)
> > Band 1 Block=25849x19393 Type=Byte, ColorInterp=Palette
> >  Image Structure Metadata:
> >    NBITS=1
> >  Color Table (RGB with 2 entries)
> >    0: 255,255,255,255
> >    1: 0,0,0,255
> >
> > C:\Program Files (x86)\FWTools2.4.7>D:\GDAL_**Projekte\XXXXXXX\XXXXXXX.bat
> >
> > C:\Program Files (x86)\FWTools2.4.7>gdal_merge.**bat -of GTiff -o
> > D:/GDAL_Projekte
> > /XXXXXXX/XXXXXXX_gesamt.tif D:/GDAL_Projekte/XXXXXXX/**
> > XXXXXXX_300_nord_geo.ti
> > f D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_300_sued_geo.tif
> > ERROR 4: `D:/GDAL_Projekte/XXXXXXX/**XXXXXXX_gesamt.tif' not recognised as
> > a sup
> > ported file format.
> >
> > 0ERROR 2: GDALRasterBlock::Internalize : Out of memory allocating 501270264
> > byte
> > s.
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
> > Traceback (most recent call last):
> >  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 472, in ?
> >    sys.exit(main())
> >  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 459, in main
> >    fi.copy_into( t_fh, band, band, nodata )
> >  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 231, in copy_into
> >    nodata_arg )
> >  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 62, in
> > raster_copy
> >    t_xsize, t_ysize, t_band.DataType )
> >  File "C:\PROGRA~2\FWTOOL~1.7\pymod\**gdal.py", line 851, in ReadRaster
> >    buf_xsize, buf_ysize,buf_type)
> > TypeError: GetBlockRef failed at X block offset 0, Y block offset 1
> >
> > ______________________________**_________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> >
>
http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>


From etiennesky at yahoo.com  Fri Aug 26 11:15:47 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Fri Aug 26 15:14:50 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <j37ime$g8k$1@dough.gmane.org>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
Message-ID: <1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>



Hi all,

Since a few people have shown an interest in helping out, I would suggest to set up space where we can post ideas, goals and test files.? This could take the form of one of the following:

- a new wiki entry in trac, or the existing one at http://trac.osgeo.org/gdal/wiki/NetCDF
- a file repository at http://download.osgeo.org/gdal/data/netcdf as suggested some time ago by warmerdam

and/or

- a new ticket in trac (which allows to post files)

What are you thoughts about this?? Would it make sense to eventually prepare an RFC?



I would suggest that each group identify the problems with the current driver in terms of importing and exporting, post the files that they would like to be supported, which other software they use with the netcdf files, and their proposed contribution (code, test, ideas, etc.).

Those that cannot participate in code development can help out in testing and discussion. Personally, I can write and test code, given example files and expected outcome.?


Now to your specific comments, Knut-Frode:

1) Yes CF-1.5 should be the goal, although I'm not sure we need to support upgrading/downgrading.

5) The WGS84 issue needs further research. Weather and ocean data are in lat/lon, but what is the sphere radius assumed by the various data providers and? the models which output/import netcdf files? I agree that a small error does not make a difference with low-resolution dataset, but I'd like to be sure in any case. We also need a means to translate the CF-1.x datum information into EPSG/Proj.4 values.


7) There is some support of a z-axis right now, in fact they driver assumes that a third dimension is vertical if I understand correctly. However, I have not tested nor looked into that.? This issue definitely needs come planning and an RFC, IMHO.


Kyle, thanks for you help and interest!


cheers,
Etienne


________________________________
From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
To: gdal-dev@lists.osgeo.org
Sent: Friday, August 26, 2011 4:41:02 AM
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention

Etienne,

My group is also very much in support of the suggested improvements, as NetCDF/CF is becoming the most important standard for data storage/exchange in our community (climate, meteorology, oceanography). My group is not much into GDAL driver development (at least not yet), but we are now building our future very much around GDAL, so we are interested to join the discussion around improved support for NetCDF/CF reading and writing.

About some of the mentioned issues:

1) The latest version of CF is 1.5, so it would be better to target 1.5 (or 1.x) than 1.0. Ideally the driver could be made generic for smooth upgrade to newer (or downgrade to older) versions of the CF conventions.

5) It sounds meaningful to assume WGS84 datum if not specified. I believe at least 99% of data typically stored in NetCDF/CF will have this datum, and even when that is not the case, positioning errors less than 100 m should normally have little impact for the types of data. Precision on datum level is probably more relevant for more typical GIS-data with roads, borders etc.
A warning could however be issued each time the driver has to assume WGS84.

7) We agree in particular that proper handling of time axis is of high value. This is one of the issues which is highly relevant for climate-data (often 4-dimensional), but not well supported by typical GIS-software or standards designed with 2-dimensional data in mind.
A general representation of a time-axis (or even vertical axis) in GDAL would be ideal, but that would probably be too much an effort for anyone to develop.


Knut-Frode
Nansen Environmental and Remote Sensing Center



On 24/08/2011 22:37, Etienne Tourigny wrote:
> Hi all,
> 
> I would like to start a discussion with those interested about fixing
> various issues in the NetCDF driver.
> 
> As it stands, it is not fully CF-1.0 compliant, and produces
> geographical grids that are not valid for other software.
> Also, the infamous "up-side down" problem has been addressed for
> importing netcdfs, but needs to be addressed for exporting.
> 
> Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> I have been submitting patches for some time to fix the related issues.
> 
> I have identified a number of issues, of which the following have been
> fixed partially in my proposed patch.
> 
> 1- conform to the cf-1.0 standard for geographical grids (creating lat
> and lon dimensions and variables)
> 2- make netcdf grids "bottom-up" by default, as all software out there
> uses that convention
> 3- fix problems related to floating-point / string conversions (also
> reported in issue #4200 )
> 4- fix metadata handling and duplication (as reported in issue #4204),
> and keep band (variable) metadata outside of the global metadata
> 
> Pending issues:
> 
> 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> These files are extremely common, and CF-1.0 has provisions for
> identifying the key variables, but no Proj/Wkt codes.
> 6- fix proper export of projected CRS (this is not fully necessary
> though) with lat/lon values respecting CF-1.0
> 7- handle time axis properly (at least when creating a netcdf) - that
> would be great for import/export of netcdf
> 
> Regards,
> Etienne
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From peifer at gmx.eu  Fri Aug 26 13:28:32 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Aug 26 17:34:15 2011
Subject: [gdal-dev] ERROR 4: `test.asc' not recognised as a supported
	file format.
In-Reply-To: <1314369185.4e57aea1a11a9@webmail.free.fr>
References: <j387ka$o1v$1@dough.gmane.org>
	<1314369185.4e57aea1a11a9@webmail.free.fr>
Message-ID: <4E57D7C0.7050205@gmx.eu>

On 26/08/2011 16:33, Even Rouault wrote:
> Selon Hermann Peifer<peifer@gmx.eu>:
>
>> Hi,
>>
>> Occasionally I use a small .asc file, which I then gdal_translate into a
>> bigger blank GeoTIFF. I tried to make the smallest possible test.asc
>> file with 1 col x 1 row and 1 cell value only, but I ended up with ERROR
>> 4: file not recognised as a supported file format.
>>
>> The error message seems to go away after adding (useless) values to the
>> file, see below.
>>
>> I am wondering if this is a feature or rather a bug?
>
> Feature/bug/hazard... who knows ;-) The test that identifies if a file is
> AAIGRID first checks if there are at least 100 bytes in the file, which looks
> like a rough estimate of the size taken by the minimum header lines and should
> be fine for any sensible raster. I guess this test could be just killed since
> the Identify() also checks the presence of one of the keywords. But you have
> found the workaround, just add enough spaces at the end of your files and it
> should be OK. Anyway you can create a ticket if you wish
>

Even,

Thanks for the explanation. Ticket created at 
http://trac.osgeo.org/gdal/ticket/4209.

For the time being, I just add more spaces into the header lines, like 
this example, which has just about enough bytes to get through the test:

ncols             1
nrows             1
xllcorner         0
yllcorner         0
cellsize          1
0


Hermann
From even.rouault at mines-paris.org  Fri Aug 26 15:20:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug 26 19:31:59 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
Message-ID: <201108262120.07119.even.rouault@mines-paris.org>

Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a ?crit :

My thoughts, just from a process point of view, not being myself deeply 
involved in the NetCDF format :

* A wiki page (I'd suggest either a new page - 
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at least a clearly 
identified section in the current page, to avoid confusion for outsiders about 
what is currently implemented and what is not) can be a convenient way of 
structuring and editing the content by anyone with a osgeo id. But discussions 
on the mailing list are also OK, at least to notify new content has been added 
(provided that it doesn't cause flooding on the mailing list ;-))

* A http://download.osgeo.org/gdal/data/netcdf directory would be the right 
place to store NetCDF sample files, provided they are free under the terms of 
http://download.osgeo.org/gdal/data/COPYING . As write access to it is 
restricted to people with appropriate rights, having those rights, I can help 
uploading files over there. Having small (typically < or ~ 10 KB ) sample files 
is also good so they can be directly included in SVN under the 
autotest/gdrivers/data directory and thus easily used by regression tests.

* Tickets can be used to track the implementation of specific items and 
bugfixes. But I've found they are not generally suitable for brainstorming when 
the discussion is lasting, as you cannot edit already posted content. Wiki is 
clearly better for this.

* Looking at past history, I see we haven't yet used the RFC formalism for 
work specific to one driver, while it doesn't require changes or extensions to 
the GDAL API. But it wouldn't hurt to create one if the need arises. Anyway, a 
point that might require care and some consensus among the interested parties 
is about how backward compatibility issues, in particular with respect to files 
produced by older GDAL versions, are adressed. 
http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote is required.

Best regards,

Even

> Hi all,
> 
> Since a few people have shown an interest in helping out, I would suggest
> to set up space where we can post ideas, goals and test files.  This could
> take the form of one of the following:
> 
> - a new wiki entry in trac, or the existing one at
> http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository at
> http://download.osgeo.org/gdal/data/netcdf as suggested some time ago by
> warmerdam
> 
> and/or
> 
> - a new ticket in trac (which allows to post files)
> 
> What are you thoughts about this?  Would it make sense to eventually
> prepare an RFC?
> 
> 
> 
> I would suggest that each group identify the problems with the current
> driver in terms of importing and exporting, post the files that they would
> like to be supported, which other software they use with the netcdf files,
> and their proposed contribution (code, test, ideas, etc.).
> 
> Those that cannot participate in code development can help out in testing
> and discussion. Personally, I can write and test code, given example files
> and expected outcome. 
> 
> 
> Now to your specific comments, Knut-Frode:
> 
> 1) Yes CF-1.5 should be the goal, although I'm not sure we need to support
> upgrading/downgrading.
> 
> 5) The WGS84 issue needs further research. Weather and ocean data are in
> lat/lon, but what is the sphere radius assumed by the various data
> providers and  the models which output/import netcdf files? I agree that a
> small error does not make a difference with low-resolution dataset, but
> I'd like to be sure in any case. We also need a means to translate the
> CF-1.x datum information into EPSG/Proj.4 values.
> 
> 
> 7) There is some support of a z-axis right now, in fact they driver assumes
> that a third dimension is vertical if I understand correctly. However, I
> have not tested nor looked into that.  This issue definitely needs come
> planning and an RFC, IMHO.
> 
> 
> Kyle, thanks for you help and interest!
> 
> 
> cheers,
> Etienne
> 
> 
> ________________________________
> From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
> To: gdal-dev@lists.osgeo.org
> Sent: Friday, August 26, 2011 4:41:02 AM
> Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and
> CF-1 convention
> 
> Etienne,
> 
> My group is also very much in support of the suggested improvements, as
> NetCDF/CF is becoming the most important standard for data
> storage/exchange in our community (climate, meteorology, oceanography). My
> group is not much into GDAL driver development (at least not yet), but we
> are now building our future very much around GDAL, so we are interested to
> join the discussion around improved support for NetCDF/CF reading and
> writing.
> 
> About some of the mentioned issues:
> 
> 1) The latest version of CF is 1.5, so it would be better to target 1.5 (or
> 1.x) than 1.0. Ideally the driver could be made generic for smooth upgrade
> to newer (or downgrade to older) versions of the CF conventions.
> 
> 5) It sounds meaningful to assume WGS84 datum if not specified. I believe
> at least 99% of data typically stored in NetCDF/CF will have this datum,
> and even when that is not the case, positioning errors less than 100 m
> should normally have little impact for the types of data. Precision on
> datum level is probably more relevant for more typical GIS-data with
> roads, borders etc. A warning could however be issued each time the driver
> has to assume WGS84.
> 
> 7) We agree in particular that proper handling of time axis is of high
> value. This is one of the issues which is highly relevant for climate-data
> (often 4-dimensional), but not well supported by typical GIS-software or
> standards designed with 2-dimensional data in mind. A general
> representation of a time-axis (or even vertical axis) in GDAL would be
> ideal, but that would probably be too much an effort for anyone to
> develop.
> 
> 
> Knut-Frode
> Nansen Environmental and Remote Sensing Center
> 
> On 24/08/2011 22:37, Etienne Tourigny wrote:
> > Hi all,
> > 
> > I would like to start a discussion with those interested about fixing
> > various issues in the NetCDF driver.
> > 
> > As it stands, it is not fully CF-1.0 compliant, and produces
> > geographical grids that are not valid for other software.
> > Also, the infamous "up-side down" problem has been addressed for
> > importing netcdfs, but needs to be addressed for exporting.
> > 
> > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > I have been submitting patches for some time to fix the related issues.
> > 
> > I have identified a number of issues, of which the following have been
> > fixed partially in my proposed patch.
> > 
> > 1- conform to the cf-1.0 standard for geographical grids (creating lat
> > and lon dimensions and variables)
> > 2- make netcdf grids "bottom-up" by default, as all software out there
> > uses that convention
> > 3- fix problems related to floating-point / string conversions (also
> > reported in issue #4200 )
> > 4- fix metadata handling and duplication (as reported in issue #4204),
> > and keep band (variable) metadata outside of the global metadata
> > 
> > Pending issues:
> > 
> > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> > These files are extremely common, and CF-1.0 has provisions for
> > identifying the key variables, but no Proj/Wkt codes.
> > 6- fix proper export of projected CRS (this is not fully necessary
> > though) with lat/lon values respecting CF-1.0
> > 7- handle time axis properly (at least when creating a netcdf) - that
> > would be great for import/export of netcdf
> > 
> > Regards,
> > Etienne
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matthew.burton.kelly at my.und.edu  Fri Aug 26 16:07:15 2011
From: matthew.burton.kelly at my.und.edu (Burton-Kelly, Matthew)
Date: Fri Aug 26 20:21:55 2011
Subject: [gdal-dev] gdal_rasterize output off by one pixel/cell
In-Reply-To: <4E522628.4F75.00CE.0@co.lincoln.or.us>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<4E522628.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>

Eli,

I finally got around to looking at the example shapefile and running the same operation on my machine, and it does indeed seem like the same bug.  Thanks for the good eye, this almost seems like two separate issues; first being the missing edge points and second being the weird offset.  I only say this because the offset persists even when I set the extents of the output raster as larger than the input layer.

Matt


On 22 Aug, 2011, at 11:50 AM, Eli Adam wrote:

> Matt,
> 
>     You may want to look at this ticket and see if it is the same thing. If so, you can add yourself to the cc list and you will get emails when there are updates to the ticket.  You can also add any additional relevant information to the ticket.
> 
> http://trac.osgeo.org/gdal/ticket/3774 
> 
> Regards, Eli
> 
> 
> 
>>>> On 8/20/2011 at 11:06 AM, in message
> <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>, "Burton-Kelly, Matthew"
> <matthew.burton.kelly@my.und.edu> wrote:
>> Hello,
>> 
>> I'm attempting to create a raster from a shapefile of point data, with grid 
>> cells 1 degree square.  Although the area I have defined matches up with the 
>> origin coordinates I want, and the grid cells match up with a vector 1-degree 
>> grid I produced in QGIS, the squares supposedly containing the point data are 
>> shifted, it looks like down and to the right.  Has anyone encountered this 
>> issue before?
>> 
>> Here is the command I used:
>> gdal_rasterize -a <column name> -ts 360 180 -te -180 -90 180 90 -l <source layer name 
>> in source file> <source file> <destination file>
>> 
>> I have uploaded a screenshot of the output I am describing here: 
>> http://www.flickr.com/photos/matthewbk/6059112633 
>> 
>> Thanks for any insight,
>> Matt
>> 
>> 
>> 
>> 
>> -----------------------------
>> 
>> Matthew Burton-Kelly, M.S.
>> 
>> Graduate Student
>> 
>> Department of Geology and Geological Engineering
>> 
>> University of North Dakota
>> 
>> Mobile: (802) 922-3696
>> 
>> matthew.burton.kelly@my.und.edu<mailto:matthew.burton.kelly@my.und.edu>
>> 
>> matthew.burtonkelly@gmail.com<mailto:matthew.burtonkelly@gmail.com>
>> 
>> http://www.protichnoctem.com 
>> 
>> http://und.academia.edu/MatthewBurtonKelly 
>> 
>> --------------------------------------------
>> 
>> "About thirty years ago there was much talk that geologists ought only to 
>> observe and not theorize; and I well remember someone saying that at this 
>> rate a man might as well go into a gravelpit and count the pebbles and 
>> describe the colors.  How odd it is that anyone should not see that all 
>> observation must be for or against some view if it is to be of any service!"
>> 
>> -Charles Darwin, in an 1861 letter to Henry Fawcett.
> 
> 




-----------------------------
Matthew Burton-Kelly, M.S.
Graduate Student
Department of Geology and Geological Engineering
University of North Dakota
Mobile: (802) 922-3696
matthew.burton.kelly@my.und.edu
matthew.burtonkelly@gmail.com
http://www.protichnoctem.com
http://und.academia.edu/MatthewBurtonKelly
--------------------------------------------
"About thirty years ago there was much talk that geologists ought only to observe and not theorize; and I well remember someone saying that at this rate a man might as well go into a gravelpit and count the pebbles and describe the colors.  How odd it is that anyone should not see that all observation must be for or against some view if it is to be of any service!"
-Charles Darwin, in an 1861 letter to Henry Fawcett.


From jorge.arevalo at deimos-space.com  Fri Aug 26 16:57:22 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Aug 26 21:21:43 2011
Subject: [gdal-dev] reading postgis raster in mode 2 error
In-Reply-To: <CAFcNcQY06vLznnaPNnCmrMwb3eqVMLwQ91DHrSsG_Fq0=jAy0Q@mail.gmail.com>
References: <CAFcNcQbY+MCiVRunU3VC0THxaAM0v1arvHNrQKax4wO5E_aLzQ@mail.gmail.com>
	<CAFcNcQY06vLznnaPNnCmrMwb3eqVMLwQ91DHrSsG_Fq0=jAy0Q@mail.gmail.com>
Message-ID: <CAK29iX9hLVabpC=Z70=-pKoC+nNDqRk1FUH7WXmC16XY04zuTA@mail.gmail.com>

---------- Forwarded message ----------
From: Ricardo Filipe Soares Garcia da <ricardo.garcia.silva@gmail.com>
Date: Wed, Aug 24, 2011 at 6:07 PM
Subject: reading postgis raster in mode 2 error
To: gdal-dev@lists.osgeo.org


Hi list

I am trying out the postgis raster driver.

I'm running Ubuntu 11.04 with gdal 1.8 from the ubuntugis repository.
As for postgis I've compiled a snapshot of postgis 2.0 from svn, as
offered on the postgis website.

Following the directions in the driver info page[1], I've been trying
to get a gdalinfo on the katrina.tif file. When I run it using
mode='1' everything goes as expected and I get info on each of the
tiles.

but when using mode='2' I am getting this error:

gdalinfo -mm -stats -checksum "PG:host='localhost' dbname='gis_testes'
user='gisuser' password='resusig' table='katrina' mode='2'"


ERROR 1: Error, the                     ONE_RASTER_PER_TABLE mode
can't be applied if the raster                     rows don't have the
same metadata for band 1
gdalinfo failed - unable to open 'PG:host='localhost'
dbname='gis_testes' user='test_user' password='test_pass'
table='katrina' mode='2''.


When importing the file into postgis I ran the following command:

/usr/lib/postgresql/8.4/bin/raster2pgsql.py -r ~/Downloads/katrina.tif
-t katrina -k 64x64 -o katrina.sql -s 4326 -I


Thanks for your help

[1] - http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html

--
___________________________ ___ __
Ricardo Garcia Silva


Hi Ricardo,

That error is caused because this query

select (foo.md).* from (select distinct st_bandmetadata(rast, n) as md
from katrina) as foo

(being 'n' the band number).

returns more than one result, and it shouldn't. Could you please
execute that query in a client and send me back the results?

Best regards, and sorry for the inconvenience

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From zoltans at geograph.co.za  Sat Aug 27 05:10:19 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Aug 27 10:06:07 2011
Subject: [gdal-dev] converting lines to linestrings
Message-ID: <4E58B47B.7040209@geograph.co.za>

Hi,
I'm not sure if this is the correct list to address this on, but ....

I have lots of files, each with a bunch of lines that start & stop on 
each others ends and I need to convert them into line strings, file by file.

Is there a command-line (batch) way I can do this?

They are currently in DGN (v8) format but I can convert them to SHP, 
MID/MIF or whatever.

What I'm looking to do is to create a batch pipeline that, file by 
file,  will take each line, and if either of its ends are within 0.5m of 
another line-end, then join them together to form one line string, then 
output that "snapped up" data to disk. (any format)

TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From peifer at gmx.eu  Sat Aug 27 05:14:00 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Aug 27 10:10:55 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<4E522628.4F75.00CE.0@co.lincoln.or.us>
	<98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>
Message-ID: <4E58B558.6020600@gmx.eu>


Matthew,

An absolute kludge-type of "solution" would be a) to make sure that the 
GeoTIFF is larger than the shapefile when rasterising (in order to not 
loose points at the edges) and b) to shift the GeoTIFF NW by 0.5 pixel 
after rasterising, as I already wrote in my previous mail.

There has been no traffic on Eli's ticket 
http://trac.osgeo.org/gdal/ticket/3774 during the last 11 months, so my 
guess is that the bug will remain for a while. It's strange that there 
aren't more people stumbling across the issue.

Hermann


On 26/08/2011 22:07, Burton-Kelly, Matthew wrote:
> Eli,
>
> I finally got around to looking at the example shapefile and running the same operation on my machine, and it does indeed seem like the same bug.  Thanks for the good eye, this almost seems like two separate issues; first being the missing edge points and second being the weird offset.  I only say this because the offset persists even when I set the extents of the output raster as larger than the input layer.
>
> Matt
>
>
> On 22 Aug, 2011, at 11:50 AM, Eli Adam wrote:
>
>> Matt,
>>
>>      You may want to look at this ticket and see if it is the same thing. If so, you can add yourself to the cc list and you will get emails when there are updates to the ticket.  You can also add any additional relevant information to the ticket.
>>
>> http://trac.osgeo.org/gdal/ticket/3774
>>
>> Regards, Eli
>>
>>
>>
>>>>> On 8/20/2011 at 11:06 AM, in message
>> <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>, "Burton-Kelly, Matthew"
>> <matthew.burton.kelly@my.und.edu>  wrote:
>>> Hello,
>>>
>>> I'm attempting to create a raster from a shapefile of point data, with grid
>>> cells 1 degree square.  Although the area I have defined matches up with the
>>> origin coordinates I want, and the grid cells match up with a vector 1-degree
>>> grid I produced in QGIS, the squares supposedly containing the point data are
>>> shifted, it looks like down and to the right.  Has anyone encountered this
>>> issue before?
>>>
>>> Here is the command I used:
>>> gdal_rasterize -a<column name>  -ts 360 180 -te -180 -90 180 90 -l<source layer name
>>> in source file>  <source file>  <destination file>
>>>
>>> I have uploaded a screenshot of the output I am describing here:
>>> http://www.flickr.com/photos/matthewbk/6059112633
>>>
>>> Thanks for any insight,
>>> Matt
>>>
>>>
>>>
From peifer at gmx.eu  Sat Aug 27 06:07:12 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Aug 27 11:07:16 2011
Subject: [gdal-dev] OGR csv driver: feature numbering
Message-ID: <j3afkc$cta$1@dough.gmane.org>

Hi,

I am just wondering why the csv driver starts numbering at 1, rather 
than at 0, see e.g. the "First point" in the test.csv example at [1], 
which ends up as OGRFeature(test):1.

However, if I take the test.vrt/test.csv example and convert it to 
shapefile format, I end up with features 0, 1 and 2, see [2].

Is this how it should be?

Hermann


[1] http://www.gdal.org/ogr/drv_csv.html

[2]

$ ogr2ogr test.shp test.vrt

$ ogrinfo -al test.shp
INFO: Open of `test.shp'
       using driver `ESRI Shapefile' successful.

Layer name: test
Geometry: Point
Feature Count: 3
Extent: (0.250000, 47.500000) - (1.100000, 49.200000)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
     DATUM["WGS_1984",
         SPHEROID["WGS_84",6378137,298.257223563]],
     PRIMEM["Greenwich",0],
     UNIT["Degree",0.017453292519943295]]
Latitude: String (80.0)
Longitude: String (80.0)
Name: String (80.0)
OGRFeature(test):0
   Latitude (String) = 48.1
   Longitude (String) = 0.25
   Name (String) = First point
   POINT (0.25 48.1)

OGRFeature(test):1
   Latitude (String) = 49.2
   Longitude (String) = 1.1
   Name (String) = Second point
   POINT (1.1 49.2)

OGRFeature(test):2
   Latitude (String) = 47.5
   Longitude (String) = 0.75
   Name (String) = Third point
   POINT (0.75 47.5)

From even.rouault at mines-paris.org  Sat Aug 27 06:25:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Aug 27 11:26:22 2011
Subject: [gdal-dev] OGR csv driver: feature numbering
In-Reply-To: <j3afkc$cta$1@dough.gmane.org>
References: <j3afkc$cta$1@dough.gmane.org>
Message-ID: <201108271225.19617.even.rouault@mines-paris.org>

Le samedi 27 ao?t 2011 12:07:12, Hermann Peifer a ?crit :
> Hi,
> 
> I am just wondering why the csv driver starts numbering at 1, rather
> than at 0, see e.g. the "First point" in the test.csv example at [1],
> which ends up as OGRFeature(test):1.
> 
> However, if I take the test.vrt/test.csv example and convert it to
> shapefile format, I end up with features 0, 1 and 2, see [2].
> 
> Is this how it should be?

AFAIK, there is no convention imposed by the OGR model on how numbering should 
be done and the current situation depends much of the mood of the driver 
authors when they coded it.

I want to draw your attention that, pedantically speaking, this number is not 
a sequence number, but a feature ID, with no guarantee that it is sequential 
when iterating over the features. For shapefiles or database drivers, you can 
have holes in the numbering due to deleted features. For database drivers when 
issuing a SQL request, the features can also even be returned in random order 
w.r.t to their feature ids.

But I agree it would have been good to behave consistently in the case of no 
holes. Not sure if it is worth changing that now and potentially causing 
issues to people (wrongly) relying on how the numbering is currently done.
From peifer at gmx.eu  Sat Aug 27 07:08:58 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Aug 27 12:12:16 2011
Subject: [gdal-dev] OGR csv driver: feature numbering
In-Reply-To: <201108271225.19617.even.rouault@mines-paris.org>
References: <j3afkc$cta$1@dough.gmane.org>
	<201108271225.19617.even.rouault@mines-paris.org>
Message-ID: <4E58D04A.5020607@gmx.eu>

On 27/08/2011 12:25, Even Rouault wrote:
> Le samedi 27 ao?t 2011 12:07:12, Hermann Peifer a ?crit :
>> Hi,
>>
>> I am just wondering why the csv driver starts numbering at 1, rather
>> than at 0, see e.g. the "First point" in the test.csv example at [1],
>> which ends up as OGRFeature(test):1.
>>
>> However, if I take the test.vrt/test.csv example and convert it to
>> shapefile format, I end up with features 0, 1 and 2, see [2].
>>
>> Is this how it should be?
>
> AFAIK, there is no convention imposed by the OGR model on how numbering should
> be done and the current situation depends much of the mood of the driver
> authors when they coded it.
>
> I want to draw your attention that, pedantically speaking, this number is not
> a sequence number, but a feature ID, with no guarantee that it is sequential
> when iterating over the features. For shapefiles or database drivers, you can
> have holes in the numbering due to deleted features. For database drivers when
> issuing a SQL request, the features can also even be returned in random order
> w.r.t to their feature ids.
>
> But I agree it would have been good to behave consistently in the case of no
> holes. Not sure if it is worth changing that now and potentially causing
> issues to people (wrongly) relying on how the numbering is currently done.

Even,

Thanks once again for your quick reply. I just came across when trying 
to get the first point from a csv file into a shapefile, using something 
like:

$ ogr2ogr test.shp test.vrt -where fid=0

The resulting shapefile was empty, to my surprise. I see that the kml 
driver also starts numbering at 1. I do agree that it might not be worth 
changing the current, somewhat inconsistent behaviour.

Hermann
From warmerdam at pobox.com  Sat Aug 27 12:27:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug 27 17:47:47 2011
Subject: [gdal-dev] converting lines to linestrings
In-Reply-To: <4E58B47B.7040209@geograph.co.za>
References: <4E58B47B.7040209@geograph.co.za>
Message-ID: <4E591AD5.3040607@pobox.com>

On 11-08-27 02:10 AM, Zoltan Szecsei wrote:
> Hi,
> I'm not sure if this is the correct list to address this on, but ....
>
> I have lots of files, each with a bunch of lines that start & stop on each
> others ends and I need to convert them into line strings, file by file.
>
> Is there a command-line (batch) way I can do this?
>
> They are currently in DGN (v8) format but I can convert them to SHP, MID/MIF or
> whatever.
>
> What I'm looking to do is to create a batch pipeline that, file by file, will
> take each line, and if either of its ends are within 0.5m of another line-end,
> then join them together to form one line string, then output that "snapped up"
> data to disk. (any format)

Zoltan,

I do not believe you can accomplish this with ogr2ogr.  But it is certainly
possible to write a script, for instance in python, that would accomplish
this in combination with the OGR API.  That is the approach I would take.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From patrickwild at gmail.com  Sat Aug 27 13:02:03 2011
From: patrickwild at gmail.com (patrickwild)
Date: Sat Aug 27 18:24:38 2011
Subject: [gdal-dev] converting lines to linestrings
Message-ID: <4e592302.06e88e0a.1d58.5548@mx.google.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110827/e0bcd26d/attachment.html
From jluis at ualg.pt  Sat Aug 27 12:52:49 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Aug 27 18:35:54 2011
Subject: [gdal-dev] converting lines to linestrings
In-Reply-To: <4E591AD5.3040607@pobox.com>
References: <4E58B47B.7040209@geograph.co.za> <4E591AD5.3040607@pobox.com>
Message-ID: <4E5920E1.5020203@ualg.pt>

On 27-08-2011 17:27, Frank Warmerdam wrote:
> On 11-08-27 02:10 AM, Zoltan Szecsei wrote:
>> Hi,
>> I'm not sure if this is the correct list to address this on, but ....
>>
>> I have lots of files, each with a bunch of lines that start & stop on 
>> each
>> others ends and I need to convert them into line strings, file by file.
>>
>> Is there a command-line (batch) way I can do this?
>>
>> They are currently in DGN (v8) format but I can convert them to SHP, 
>> MID/MIF or
>> whatever.
>>
>> What I'm looking to do is to create a batch pipeline that, file by 
>> file, will
>> take each line, and if either of its ends are within 0.5m of another 
>> line-end,
>> then join them together to form one line string, then output that 
>> "snapped up"
>> data to disk. (any format)
>
> Zoltan,
>
> I do not believe you can accomplish this with ogr2ogr.  But it is 
> certainly
> possible to write a script, for instance in python, that would accomplish
> this in combination with the OGR API.  That is the approach I would take.
>

Hi,

The GMT program 'gmtstitch' will do just that but you will have to 
convert the DGN files to gmt with ogr2ogr

Joaquim
From even.rouault at mines-paris.org  Sun Aug 28 08:25:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug 28 14:52:17 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <4E58B558.6020600@gmx.eu>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>
	<4E58B558.6020600@gmx.eu>
Message-ID: <201108281425.05328.even.rouault@mines-paris.org>

Le samedi 27 ao?t 2011 11:14:00, Hermann Peifer a ?crit :
> Matthew,
> 
> An absolute kludge-type of "solution" would be a) to make sure that the
> GeoTIFF is larger than the shapefile when rasterising (in order to not
> loose points at the edges) and b) to shift the GeoTIFF NW by 0.5 pixel
> after rasterising, as I already wrote in my previous mail.
> 
> There has been no traffic on Eli's ticket
> http://trac.osgeo.org/gdal/ticket/3774 during the last 11 months, so my
> guess is that the bug will remain for a while. It's strange that there
> aren't more people stumbling across the issue.
> 

I've applied a fix in trunk in http://trac.osgeo.org/gdal/changeset/22998 . 
Please test and confirm if it works for you.
From etiennesky at yahoo.com  Sun Aug 28 12:23:52 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Sun Aug 28 19:03:58 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <201108281425.05328.even.rouault@mines-paris.org>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>
	<4E58B558.6020600@gmx.eu>
	<201108281425.05328.even.rouault@mines-paris.org>
Message-ID: <1314548632.61138.YahooMailNeo@web36904.mail.mud.yahoo.com>

I can confirm that the offset fix works for me, using geographic CRS with SAD69 and WGS84 datums. I can't comment on the edge problem.

great job! Etienne



----- Original Message -----
From: Even Rouault <even.rouault@mines-paris.org>
To: gdal-dev@lists.osgeo.org
Cc: Hermann Peifer <peifer@gmx.eu>; Eli Adam <EAdam@co.lincoln.or.us>
Sent: Sunday, August 28, 2011 9:25:05 AM
Subject: Re: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell

Le samedi 27 ao?t 2011 11:14:00, Hermann Peifer a ?crit :
> Matthew,
> 
> An absolute kludge-type of "solution" would be a) to make sure that the
> GeoTIFF is larger than the shapefile when rasterising (in order to not
> loose points at the edges) and b) to shift the GeoTIFF NW by 0.5 pixel
> after rasterising, as I already wrote in my previous mail.
> 
> There has been no traffic on Eli's ticket
> http://trac.osgeo.org/gdal/ticket/3774 during the last 11 months, so my
> guess is that the bug will remain for a while. It's strange that there
> aren't more people stumbling across the issue.
> 

I've applied a fix in trunk in http://trac.osgeo.org/gdal/changeset/22998 . 
Please test and confirm if it works for you.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From peifer at gmx.eu  Sun Aug 28 15:37:44 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun Aug 28 22:28:54 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <201108281425.05328.even.rouault@mines-paris.org>
References: <AA52F8AC-89DC-4543-A210-0DD0BA9E58FD@my.und.edu>
	<98197803-461F-4B3D-874F-E73980DEAFD9@my.und.edu>
	<4E58B558.6020600@gmx.eu>
	<201108281425.05328.even.rouault@mines-paris.org>
Message-ID: <4E5A9908.8050300@gmx.eu>

On 28/08/2011 14:25, Even Rouault wrote:
> Le samedi 27 ao?t 2011 11:14:00, Hermann Peifer a ?crit :
>> Matthew,
>>
>> An absolute kludge-type of "solution" would be a) to make sure that the
>> GeoTIFF is larger than the shapefile when rasterising (in order to not
>> loose points at the edges) and b) to shift the GeoTIFF NW by 0.5 pixel
>> after rasterising, as I already wrote in my previous mail.
>>
>> There has been no traffic on Eli's ticket
>> http://trac.osgeo.org/gdal/ticket/3774 during the last 11 months, so my
>> guess is that the bug will remain for a while. It's strange that there
>> aren't more people stumbling across the issue.
>>
>
> I've applied a fix in trunk in http://trac.osgeo.org/gdal/changeset/22998 .
> Please test and confirm if it works for you.

Even,

After some testing, I can confirm that both issues (half-pixel shift and 
lost point at edges) are gone. This is great.

Thanks for spending your time fixing this issue, on a sunny Sunday 
afternoon.

Hermann
From etiennesky at yahoo.com  Sun Aug 28 17:56:03 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Mon Aug 29 00:54:51 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201108262120.07119.even.rouault@mines-paris.org> 
Message-ID: <1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>

I have created a new wiki page at http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements , following Even's suggestion (Thanks Even).

The following topics have been included:


Topics:

1 - UNIDATA NetCDF Conventions

2 - Metadata
3 - Datum issues
4 - Dimension issues
5 - Compatibility with other software
6 - Test files
7 - Contribution
Discussion

I encourage interested parties in participating in this discussion in the wiki and in the mailing list. 


In particular, it would be useful to collect information on contributors and obtain test files with issues and the expected outcome.?

regards, Etienne


----- Original Message -----
From: Even Rouault <even.rouault@mines-paris.org>
To: gdal-dev@lists.osgeo.org; Etienne Tourigny <etiennesky@yahoo.com>
Cc: 
Sent: Friday, August 26, 2011 4:20:06 PM
Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention

Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a ?crit :

My thoughts, just from a process point of view, not being myself deeply 
involved in the NetCDF format :

* A wiki page (I'd suggest either a new page - 
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at least a clearly 
identified section in the current page, to avoid confusion for outsiders about 
what is currently implemented and what is not) can be a convenient way of 
structuring and editing the content by anyone with a osgeo id. But discussions 
on the mailing list are also OK, at least to notify new content has been added 
(provided that it doesn't cause flooding on the mailing list ;-))

* A http://download.osgeo.org/gdal/data/netcdf directory would be the right 
place to store NetCDF sample files, provided they are free under the terms of 
http://download.osgeo.org/gdal/data/COPYING . As write access to it is 
restricted to people with appropriate rights, having those rights, I can help 
uploading files over there. Having small (typically < or ~ 10 KB ) sample files 
is also good so they can be directly included in SVN under the 
autotest/gdrivers/data directory and thus easily used by regression tests.

* Tickets can be used to track the implementation of specific items and 
bugfixes. But I've found they are not generally suitable for brainstorming when 
the discussion is lasting, as you cannot edit already posted content. Wiki is 
clearly better for this.

* Looking at past history, I see we haven't yet used the RFC formalism for 
work specific to one driver, while it doesn't require changes or extensions to 
the GDAL API. But it wouldn't hurt to create one if the need arises. Anyway, a 
point that might require care and some consensus among the interested parties 
is about how backward compatibility issues, in particular with respect to files 
produced by older GDAL versions, are adressed. 
http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote is required.

Best regards,

Even

> Hi all,
> 
> Since a few people have shown an interest in helping out, I would suggest
> to set up space where we can post ideas, goals and test files.? This could
> take the form of one of the following:
> 
> - a new wiki entry in trac, or the existing one at
> http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository at
> http://download.osgeo.org/gdal/data/netcdf as suggested some time ago by
> warmerdam
> 
> and/or
> 
> - a new ticket in trac (which allows to post files)
> 
> What are you thoughts about this?? Would it make sense to eventually
> prepare an RFC?
> 
> 
> 
> I would suggest that each group identify the problems with the current
> driver in terms of importing and exporting, post the files that they would
> like to be supported, which other software they use with the netcdf files,
> and their proposed contribution (code, test, ideas, etc.).
> 
> Those that cannot participate in code development can help out in testing
> and discussion. Personally, I can write and test code, given example files
> and expected outcome. 
> 
> 
> Now to your specific comments, Knut-Frode:
> 
> 1) Yes CF-1.5 should be the goal, although I'm not sure we need to support
> upgrading/downgrading.
> 
> 5) The WGS84 issue needs further research. Weather and ocean data are in
> lat/lon, but what is the sphere radius assumed by the various data
> providers and? the models which output/import netcdf files? I agree that a
> small error does not make a difference with low-resolution dataset, but
> I'd like to be sure in any case. We also need a means to translate the
> CF-1.x datum information into EPSG/Proj.4 values.
> 
> 
> 7) There is some support of a z-axis right now, in fact they driver assumes
> that a third dimension is vertical if I understand correctly. However, I
> have not tested nor looked into that.? This issue definitely needs come
> planning and an RFC, IMHO.
> 
> 
> Kyle, thanks for you help and interest!
> 
> 
> cheers,
> Etienne
> 
> 
> ________________________________
> From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
> To: gdal-dev@lists.osgeo.org
> Sent: Friday, August 26, 2011 4:41:02 AM
> Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and
> CF-1 convention
> 
> Etienne,
> 
> My group is also very much in support of the suggested improvements, as
> NetCDF/CF is becoming the most important standard for data
> storage/exchange in our community (climate, meteorology, oceanography). My
> group is not much into GDAL driver development (at least not yet), but we
> are now building our future very much around GDAL, so we are interested to
> join the discussion around improved support for NetCDF/CF reading and
> writing.
> 
> About some of the mentioned issues:
> 
> 1) The latest version of CF is 1.5, so it would be better to target 1.5 (or
> 1.x) than 1.0. Ideally the driver could be made generic for smooth upgrade
> to newer (or downgrade to older) versions of the CF conventions.
> 
> 5) It sounds meaningful to assume WGS84 datum if not specified. I believe
> at least 99% of data typically stored in NetCDF/CF will have this datum,
> and even when that is not the case, positioning errors less than 100 m
> should normally have little impact for the types of data. Precision on
> datum level is probably more relevant for more typical GIS-data with
> roads, borders etc. A warning could however be issued each time the driver
> has to assume WGS84.
> 
> 7) We agree in particular that proper handling of time axis is of high
> value. This is one of the issues which is highly relevant for climate-data
> (often 4-dimensional), but not well supported by typical GIS-software or
> standards designed with 2-dimensional data in mind. A general
> representation of a time-axis (or even vertical axis) in GDAL would be
> ideal, but that would probably be too much an effort for anyone to
> develop.
> 
> 
> Knut-Frode
> Nansen Environmental and Remote Sensing Center
> 
> On 24/08/2011 22:37, Etienne Tourigny wrote:
> > Hi all,
> > 
> > I would like to start a discussion with those interested about fixing
> > various issues in the NetCDF driver.
> > 
> > As it stands, it is not fully CF-1.0 compliant, and produces
> > geographical grids that are not valid for other software.
> > Also, the infamous "up-side down" problem has been addressed for
> > importing netcdfs, but needs to be addressed for exporting.
> > 
> > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > I have been submitting patches for some time to fix the related issues.
> > 
> > I have identified a number of issues, of which the following have been
> > fixed partially in my proposed patch.
> > 
> > 1- conform to the cf-1.0 standard for geographical grids (creating lat
> > and lon dimensions and variables)
> > 2- make netcdf grids "bottom-up" by default, as all software out there
> > uses that convention
> > 3- fix problems related to floating-point / string conversions (also
> > reported in issue #4200 )
> > 4- fix metadata handling and duplication (as reported in issue #4204),
> > and keep band (variable) metadata outside of the global metadata
> > 
> > Pending issues:
> > 
> > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> > These files are extremely common, and CF-1.0 has provisions for
> > identifying the key variables, but no Proj/Wkt codes.
> > 6- fix proper export of projected CRS (this is not fully necessary
> > though) with lat/lon values respecting CF-1.0
> > 7- handle time axis properly (at least when creating a netcdf) - that
> > would be great for import/export of netcdf
> > 
> > Regards,
> > Etienne
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From rush at winkey.org  Sun Aug 28 18:54:13 2011
From: rush at winkey.org (Brian Case)
Date: Mon Aug 29 01:56:01 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201108262120.07119.even.rouault@mines-paris.org>
	<1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>
Message-ID: <1314572053.8205.15.camel@octopi>

any thoughts on a ogr netcdf driver? I have a simple one for madis data
that needs work in my sandbox

Brian



On Sun, 2011-08-28 at 14:56 -0700, Etienne Tourigny wrote:
> I have created a new wiki page at http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements , following Even's suggestion (Thanks Even).
> 
> The following topics have been included:
> 
> 
> Topics:
> 
> 1 - UNIDATA NetCDF Conventions
> 
> 2 - Metadata
> 3 - Datum issues
> 4 - Dimension issues
> 5 - Compatibility with other software
> 6 - Test files
> 7 - Contribution
> Discussion
> 
> I encourage interested parties in participating in this discussion in the wiki and in the mailing list. 
> 
> 
> In particular, it would be useful to collect information on contributors and obtain test files with issues and the expected outcome. 
> 
> regards, Etienne
> 
> 
> ----- Original Message -----
> From: Even Rouault <even.rouault@mines-paris.org>
> To: gdal-dev@lists.osgeo.org; Etienne Tourigny <etiennesky@yahoo.com>
> Cc: 
> Sent: Friday, August 26, 2011 4:20:06 PM
> Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention
> 
> Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a ?crit :
> 
> My thoughts, just from a process point of view, not being myself deeply 
> involved in the NetCDF format :
> 
> * A wiki page (I'd suggest either a new page - 
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at least a clearly 
> identified section in the current page, to avoid confusion for outsiders about 
> what is currently implemented and what is not) can be a convenient way of 
> structuring and editing the content by anyone with a osgeo id. But discussions 
> on the mailing list are also OK, at least to notify new content has been added 
> (provided that it doesn't cause flooding on the mailing list ;-))
> 
> * A http://download.osgeo.org/gdal/data/netcdf directory would be the right 
> place to store NetCDF sample files, provided they are free under the terms of 
> http://download.osgeo.org/gdal/data/COPYING . As write access to it is 
> restricted to people with appropriate rights, having those rights, I can help 
> uploading files over there. Having small (typically < or ~ 10 KB ) sample files 
> is also good so they can be directly included in SVN under the 
> autotest/gdrivers/data directory and thus easily used by regression tests.
> 
> * Tickets can be used to track the implementation of specific items and 
> bugfixes. But I've found they are not generally suitable for brainstorming when 
> the discussion is lasting, as you cannot edit already posted content. Wiki is 
> clearly better for this.
> 
> * Looking at past history, I see we haven't yet used the RFC formalism for 
> work specific to one driver, while it doesn't require changes or extensions to 
> the GDAL API. But it wouldn't hurt to create one if the need arises. Anyway, a 
> point that might require care and some consensus among the interested parties 
> is about how backward compatibility issues, in particular with respect to files 
> produced by older GDAL versions, are adressed. 
> http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote is required.
> 
> Best regards,
> 
> Even
> 
> > Hi all,
> > 
> > Since a few people have shown an interest in helping out, I would suggest
> > to set up space where we can post ideas, goals and test files.  This could
> > take the form of one of the following:
> > 
> > - a new wiki entry in trac, or the existing one at
> > http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository at
> > http://download.osgeo.org/gdal/data/netcdf as suggested some time ago by
> > warmerdam
> > 
> > and/or
> > 
> > - a new ticket in trac (which allows to post files)
> > 
> > What are you thoughts about this?  Would it make sense to eventually
> > prepare an RFC?
> > 
> > 
> > 
> > I would suggest that each group identify the problems with the current
> > driver in terms of importing and exporting, post the files that they would
> > like to be supported, which other software they use with the netcdf files,
> > and their proposed contribution (code, test, ideas, etc.).
> > 
> > Those that cannot participate in code development can help out in testing
> > and discussion. Personally, I can write and test code, given example files
> > and expected outcome. 
> > 
> > 
> > Now to your specific comments, Knut-Frode:
> > 
> > 1) Yes CF-1.5 should be the goal, although I'm not sure we need to support
> > upgrading/downgrading.
> > 
> > 5) The WGS84 issue needs further research. Weather and ocean data are in
> > lat/lon, but what is the sphere radius assumed by the various data
> > providers and  the models which output/import netcdf files? I agree that a
> > small error does not make a difference with low-resolution dataset, but
> > I'd like to be sure in any case. We also need a means to translate the
> > CF-1.x datum information into EPSG/Proj.4 values.
> > 
> > 
> > 7) There is some support of a z-axis right now, in fact they driver assumes
> > that a third dimension is vertical if I understand correctly. However, I
> > have not tested nor looked into that.  This issue definitely needs come
> > planning and an RFC, IMHO.
> > 
> > 
> > Kyle, thanks for you help and interest!
> > 
> > 
> > cheers,
> > Etienne
> > 
> > 
> > ________________________________
> > From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
> > To: gdal-dev@lists.osgeo.org
> > Sent: Friday, August 26, 2011 4:41:02 AM
> > Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and
> > CF-1 convention
> > 
> > Etienne,
> > 
> > My group is also very much in support of the suggested improvements, as
> > NetCDF/CF is becoming the most important standard for data
> > storage/exchange in our community (climate, meteorology, oceanography). My
> > group is not much into GDAL driver development (at least not yet), but we
> > are now building our future very much around GDAL, so we are interested to
> > join the discussion around improved support for NetCDF/CF reading and
> > writing.
> > 
> > About some of the mentioned issues:
> > 
> > 1) The latest version of CF is 1.5, so it would be better to target 1.5 (or
> > 1.x) than 1.0. Ideally the driver could be made generic for smooth upgrade
> > to newer (or downgrade to older) versions of the CF conventions.
> > 
> > 5) It sounds meaningful to assume WGS84 datum if not specified. I believe
> > at least 99% of data typically stored in NetCDF/CF will have this datum,
> > and even when that is not the case, positioning errors less than 100 m
> > should normally have little impact for the types of data. Precision on
> > datum level is probably more relevant for more typical GIS-data with
> > roads, borders etc. A warning could however be issued each time the driver
> > has to assume WGS84.
> > 
> > 7) We agree in particular that proper handling of time axis is of high
> > value. This is one of the issues which is highly relevant for climate-data
> > (often 4-dimensional), but not well supported by typical GIS-software or
> > standards designed with 2-dimensional data in mind. A general
> > representation of a time-axis (or even vertical axis) in GDAL would be
> > ideal, but that would probably be too much an effort for anyone to
> > develop.
> > 
> > 
> > Knut-Frode
> > Nansen Environmental and Remote Sensing Center
> > 
> > On 24/08/2011 22:37, Etienne Tourigny wrote:
> > > Hi all,
> > > 
> > > I would like to start a discussion with those interested about fixing
> > > various issues in the NetCDF driver.
> > > 
> > > As it stands, it is not fully CF-1.0 compliant, and produces
> > > geographical grids that are not valid for other software.
> > > Also, the infamous "up-side down" problem has been addressed for
> > > importing netcdfs, but needs to be addressed for exporting.
> > > 
> > > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > > I have been submitting patches for some time to fix the related issues.
> > > 
> > > I have identified a number of issues, of which the following have been
> > > fixed partially in my proposed patch.
> > > 
> > > 1- conform to the cf-1.0 standard for geographical grids (creating lat
> > > and lon dimensions and variables)
> > > 2- make netcdf grids "bottom-up" by default, as all software out there
> > > uses that convention
> > > 3- fix problems related to floating-point / string conversions (also
> > > reported in issue #4200 )
> > > 4- fix metadata handling and duplication (as reported in issue #4204),
> > > and keep band (variable) metadata outside of the global metadata
> > > 
> > > Pending issues:
> > > 
> > > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> > > These files are extremely common, and CF-1.0 has provisions for
> > > identifying the key variables, but no Proj/Wkt codes.
> > > 6- fix proper export of projected CRS (this is not fully necessary
> > > though) with lat/lon values respecting CF-1.0
> > > 7- handle time axis properly (at least when creating a netcdf) - that
> > > would be great for import/export of netcdf
> > > 
> > > Regards,
> > > Etienne
> > > 
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From eadam at co.lincoln.or.us  Mon Aug 29 00:20:37 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon Aug 29 07:40:50 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
Message-ID: <4E5AB127020000CE00049701@mail.co.lincoln.or.us>

Even,
     
       This works for me and the test case included with the initial report.  

Thank you very much, Eli

>>> Even Rouault <even.rouault@mines-paris.org> 08/28/11 5:25 AM >>>
> 
I've applied a fix in trunk in http://trac.osgeo.org/gdal/changeset/22998 . 
Please test and confirm if it works for you.

From jukka.rahkonen at mmmtike.fi  Mon Aug 29 03:39:45 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Aug 29 11:10:20 2011
Subject: [gdal-dev] OGR Spatialite driver and spatial index
Message-ID: <loom.20110829T090719-393@post.gmane.org>

Hi,

Does the OGR SQLite/Spatialite driver really utilise the spatial
index if such exists in the Spatialite database? The documentation
suggests so http://gdal.org/ogr/drv_sqlite.html.  However, I haven't
been able to see any difference in my speed tests with ogr yet.

I made a set of tests with ogrinfo against a Spatialite database
with and without spatial index. These two tests took the same 30 
seconds to run both with and without spatial index. 

ogrinfo OSM_Finland.sqlite -sql "select geometry, osm_id ,highway,ref, 
name, tunnel from osm_line where highway is not null" 
-spat  389116 6677305 389579 6677661

ogrinfo OSM_Finland.sqlite -sql "select geometry, osm_id ,highway,ref, 
name, tunnel from osm_line where highway is not null 
AND MBRIntersects(geometry, BuildMBR(389116,6677305,389579,6677661))"

This one takes only 2 seconds if spatial index table is available.

ogrinfo OSM_Finland.sqlite -sql "SELECT geometry, osm_id, highway,ref, 
name, tunnel FROM osm_line WHERE highway IS NOT NULL AND ROWID IN 
(SELECT pkid FROM idx_osm_line_GEOMETRY WHERE xmax > 389116 
AND xmin < 389579 AND ymax > 6677305 AND ymin < 6677661)" 

The Spatialite man Alessandro Furieri wrote this information:

"SpatiaLite isn't PostGIS: you *must* explicitly write 
your SQL Queries in such a way to access the corresponding 
Spatial Index table as appropriate.

Please note well: in SQLite/SpatiaLite the R*Tree 
Spatial Index simply is another table between many 
others. 
The SQL engine has absolutely no idea that a strict 
correlation exists between the "geometry" table and 
the corresponding R*Tree.
So you are explicitly required to define an explicit 
sub-query in order to inquiry the R*Tree."

Is the OGR Spatialite driver clever enough for making a conclusion 
"If exists spatial index table 'idx_table_GEOMETRY' for layer 'table' 
do use if when building bounding box filter"?

I found a blog posting about this thing and the author tells how 
he could make SharpMap to render blisteringly fast from Spatialite 
http://epsg27700.blogspot.com/2009/08/adventures-with-spatialite.html

I would not call my OpenStreetMap rendering from Spatialite with 
Mapserver 6.0 (MS4W 3.0.3) blistering at the moment. The highway 
layer takes more than 5 minutes to render even when zoomed very 
close. The corresponding SQL query which is utilising the 
idx_osm_line_GEOMETRY takes less than a second to run directly 
through Spatialite-GUI so there is absolutely something to improve.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon Aug 29 05:50:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 29 13:27:50 2011
Subject: [gdal-dev] OGR Spatialite driver and spatial index
In-Reply-To: <loom.20110829T090719-393@post.gmane.org>
References: <loom.20110829T090719-393@post.gmane.org>
Message-ID: <1314611430.4e5b60e695360@webmail.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
>
> ogrinfo OSM_Finland.sqlite -sql "select geometry, osm_id ,highway,ref,
> name, tunnel from osm_line where highway is not null
> AND MBRIntersects(geometry, BuildMBR(389116,6677305,389579,6677661))"

The MBRIntersects() stuff is exactly what the OGR driver does, when you specify
-spat, so it is not surprising that they have the same runtime.

>
> This one takes only 2 seconds if spatial index table is available.
>
> ogrinfo OSM_Finland.sqlite -sql "SELECT geometry, osm_id, highway,ref,
> name, tunnel FROM osm_line WHERE highway IS NOT NULL AND ROWID IN
> (SELECT pkid FROM idx_osm_line_GEOMETRY WHERE xmax > 389116
> AND xmin < 389579 AND ymax > 6677305 AND ymin < 6677661)"
>
> The Spatialite man Alessandro Furieri wrote this information:
>
> "SpatiaLite isn't PostGIS: you *must* explicitly write
> your SQL Queries in such a way to access the corresponding
> Spatial Index table as appropriate.
>
> Please note well: in SQLite/SpatiaLite the R*Tree
> Spatial Index simply is another table between many
> others.
> The SQL engine has absolutely no idea that a strict
> correlation exists between the "geometry" table and
> the corresponding R*Tree.
> So you are explicitly required to define an explicit
> sub-query in order to inquiry the R*Tree."
>
> Is the OGR Spatialite driver clever enough for making a conclusion
> "If exists spatial index table 'idx_table_GEOMETRY' for layer 'table'
> do use if when building bounding box filter"?

Hum, the OGR driver was indeed written a bit too naively, assuming that
MBRIntersects() would be similar to the && operator in PostGIS. Apparently not.
Strange that this hasn't been reported before, but I assume you can only see the
difference with big amount of data, like your OSM database (and the
MBRIntersects() test must be faster than evaluating the spatial filter on OGR
side, so that's perhaps why it wasn't seen at implementation time). Anyway,
would you mind opening a Trac ticket about this ? Changing the request to use
the spatial index table should not be too difficult.

Thanks,

Even
From ricardo.garcia.silva at gmail.com  Mon Aug 29 06:15:22 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Mon Aug 29 13:54:16 2011
Subject: [gdal-dev] reading postgis raster in mode 2 error
In-Reply-To: <CAK29iX9hLVabpC=Z70=-pKoC+nNDqRk1FUH7WXmC16XY04zuTA@mail.gmail.com>
References: <CAFcNcQbY+MCiVRunU3VC0THxaAM0v1arvHNrQKax4wO5E_aLzQ@mail.gmail.com>
	<CAFcNcQY06vLznnaPNnCmrMwb3eqVMLwQ91DHrSsG_Fq0=jAy0Q@mail.gmail.com>
	<CAK29iX9hLVabpC=Z70=-pKoC+nNDqRk1FUH7WXmC16XY04zuTA@mail.gmail.com>
Message-ID: <CAFcNcQYj7siER+enkx+yMOip6fGjyqmsabdsGJXw6HZgn4MZOQ@mail.gmail.com>

2011/8/26 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
> ---------- Forwarded message ----------
> From: Ricardo Filipe Soares Garcia da <ricardo.garcia.silva@gmail.com>
> Date: Wed, Aug 24, 2011 at 6:07 PM
> Subject: reading postgis raster in mode 2 error
> To: gdal-dev@lists.osgeo.org
>
>
> Hi list
>
> I am trying out the postgis raster driver.
>
> I'm running Ubuntu 11.04 with gdal 1.8 from the ubuntugis repository.
> As for postgis I've compiled a snapshot of postgis 2.0 from svn, as
> offered on the postgis website.
>
> Following the directions in the driver info page[1], I've been trying
> to get a gdalinfo on the katrina.tif file. When I run it using
> mode='1' everything goes as expected and I get info on each of the
> tiles.
>
> but when using mode='2' I am getting this error:
>
> gdalinfo -mm -stats -checksum "PG:host='localhost' dbname='gis_testes'
> user='gisuser' password='resusig' table='katrina' mode='2'"
>
>
> ERROR 1: Error, the ? ? ? ? ? ? ? ? ? ? ONE_RASTER_PER_TABLE mode
> can't be applied if the raster ? ? ? ? ? ? ? ? ? ? rows don't have the
> same metadata for band 1
> gdalinfo failed - unable to open 'PG:host='localhost'
> dbname='gis_testes' user='test_user' password='test_pass'
> table='katrina' mode='2''.
>
>
> When importing the file into postgis I ran the following command:
>
> /usr/lib/postgresql/8.4/bin/raster2pgsql.py -r ~/Downloads/katrina.tif
> -t katrina -k 64x64 -o katrina.sql -s 4326 -I
>
>
> Thanks for your help
>
> [1] - http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
>
>
> Hi Ricardo,
>
> That error is caused because this query
>
> select (foo.md).* from (select distinct st_bandmetadata(rast, n) as md
> from katrina) as foo
>
> (being 'n' the band number).
>
> returns more than one result, and it shouldn't. Could you please
> execute that query in a client and send me back the results?
>
> Best regards, and sorry for the inconvenience
>
> --
> Jorge Ar?valo
> Internet & Mobility Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://es.linkedin.com/in/jorgearevalo80
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
> http://geohash.org/ezjqgrgzz0g
>

Hi Jorge, list

Running the query you suggest I get this output:

gis_testes=> select (foo.md).* from (select distinct
st_bandmetadata(rast, 1) as md from katrina) as foo;
 pixeltype | hasnodatavalue | nodatavalue  | isoutdb | path
-----------+----------------+--------------+---------+------
 8BUI      | f              | -1.82132e-05 | f       |
 8BUI      | f              | -1.81834e-05 | f       |
 8BUI      | f              | -1.80478e-05 | f       |
 8BUI      | f              | -1.80471e-05 | f       |
(4 rows)

Can it be that the nodatavalue is messing things up, since it is not
the same for all the blocks?

Thanks for your help


-- 
___________________________ ___ __
Ricardo Garcia Silva
From jukka.rahkonen at mmmtike.fi  Mon Aug 29 06:19:26 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Aug 29 13:58:25 2011
Subject: [gdal-dev] Re: OGR Spatialite driver and spatial index
References: <loom.20110829T090719-393@post.gmane.org>
	<1314611430.4e5b60e695360@webmail.free.fr>
Message-ID: <loom.20110829T121543-611@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> Hum, the OGR driver was indeed written a bit too naively, assuming that
> MBRIntersects() would be similar to the && operator in PostGIS. Apparently not.
> Strange that this hasn't been reported before, but I assume you can only 
> see the
> difference with big amount of data, like your OSM database (and the
> MBRIntersects() test must be faster than evaluating the spatial filter on OGR
> side, so that's perhaps why it wasn't seen at implementation time). Anyway,
> would you mind opening a Trac ticket about this ? Changing the request to use
> the spatial index table should not be too difficult.

Ticket [GDAL] #4212 done with sample requests which should show the speed
difference and a download link to a test database which is created with ogr2ogr
v. 1.8.1.

-Jukka Rahkonen-

From jorge.arevalo at deimos-space.com  Mon Aug 29 11:55:14 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Mon Aug 29 19:52:38 2011
Subject: [gdal-dev] reading postgis raster in mode 2 error
In-Reply-To: <CAFcNcQYj7siER+enkx+yMOip6fGjyqmsabdsGJXw6HZgn4MZOQ@mail.gmail.com>
References: <CAFcNcQbY+MCiVRunU3VC0THxaAM0v1arvHNrQKax4wO5E_aLzQ@mail.gmail.com>
	<CAFcNcQY06vLznnaPNnCmrMwb3eqVMLwQ91DHrSsG_Fq0=jAy0Q@mail.gmail.com>
	<CAK29iX9hLVabpC=Z70=-pKoC+nNDqRk1FUH7WXmC16XY04zuTA@mail.gmail.com>
	<CAFcNcQYj7siER+enkx+yMOip6fGjyqmsabdsGJXw6HZgn4MZOQ@mail.gmail.com>
Message-ID: <CAK29iX928rEc3z6T5YG20XBTg+N9Rw9bQe8xn=wEM6wsWoe4Ow@mail.gmail.com>

On Mon, Aug 29, 2011 at 12:15 PM, Ricardo Filipe Soares Garcia da
<ricardo.garcia.silva@gmail.com> wrote:
> 2011/8/26 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
>> ---------- Forwarded message ----------
>> From: Ricardo Filipe Soares Garcia da <ricardo.garcia.silva@gmail.com>
>> Date: Wed, Aug 24, 2011 at 6:07 PM
>> Subject: reading postgis raster in mode 2 error
>> To: gdal-dev@lists.osgeo.org
>>
>>
>> Hi list
>>
>> I am trying out the postgis raster driver.
>>
>> I'm running Ubuntu 11.04 with gdal 1.8 from the ubuntugis repository.
>> As for postgis I've compiled a snapshot of postgis 2.0 from svn, as
>> offered on the postgis website.
>>
>> Following the directions in the driver info page[1], I've been trying
>> to get a gdalinfo on the katrina.tif file. When I run it using
>> mode='1' everything goes as expected and I get info on each of the
>> tiles.
>>
>> but when using mode='2' I am getting this error:
>>
>> gdalinfo -mm -stats -checksum "PG:host='localhost' dbname='gis_testes'
>> user='gisuser' password='resusig' table='katrina' mode='2'"
>>
>>
>> ERROR 1: Error, the ? ? ? ? ? ? ? ? ? ? ONE_RASTER_PER_TABLE mode
>> can't be applied if the raster ? ? ? ? ? ? ? ? ? ? rows don't have the
>> same metadata for band 1
>> gdalinfo failed - unable to open 'PG:host='localhost'
>> dbname='gis_testes' user='test_user' password='test_pass'
>> table='katrina' mode='2''.
>>
>>
>> When importing the file into postgis I ran the following command:
>>
>> /usr/lib/postgresql/8.4/bin/raster2pgsql.py -r ~/Downloads/katrina.tif
>> -t katrina -k 64x64 -o katrina.sql -s 4326 -I
>>
>>
>> Thanks for your help
>>
>> [1] - http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html
>>
>> --
>> ___________________________ ___ __
>> Ricardo Garcia Silva
>>
>>
>> Hi Ricardo,
>>
>> That error is caused because this query
>>
>> select (foo.md).* from (select distinct st_bandmetadata(rast, n) as md
>> from katrina) as foo
>>
>> (being 'n' the band number).
>>
>> returns more than one result, and it shouldn't. Could you please
>> execute that query in a client and send me back the results?
>>
>> Best regards, and sorry for the inconvenience
>>
>> --
>> Jorge Ar?valo
>> Internet & Mobility Division, DEIMOS
>> jorge.arevalo@deimos-space.com
>> http://es.linkedin.com/in/jorgearevalo80
>> http://mobility.grupodeimos.com/
>> http://gis4free.wordpress.com
>> http://geohash.org/ezjqgrgzz0g
>>
>
> Hi Jorge, list
>
> Running the query you suggest I get this output:
>
> gis_testes=> select (foo.md).* from (select distinct
> st_bandmetadata(rast, 1) as md from katrina) as foo;
> ?pixeltype | hasnodatavalue | nodatavalue ?| isoutdb | path
> -----------+----------------+--------------+---------+------
> ?8BUI ? ? ?| f ? ? ? ? ? ? ?| -1.82132e-05 | f ? ? ? |
> ?8BUI ? ? ?| f ? ? ? ? ? ? ?| -1.81834e-05 | f ? ? ? |
> ?8BUI ? ? ?| f ? ? ? ? ? ? ?| -1.80478e-05 | f ? ? ? |
> ?8BUI ? ? ?| f ? ? ? ? ? ? ?| -1.80471e-05 | f ? ? ? |
> (4 rows)
>
> Can it be that the nodatavalue is messing things up, since it is not
> the same for all the blocks?
>
> Thanks for your help
>
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi,

Yes, it's a problem with metadata precission. I found this error in a
different part of the code. I'm not sure if is caused because changes
in PostGIS Raster code, but I'm aware of it. I applied a temporal
patch in r23006. Could you please update your GDAL copy?

Best regards,

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From yjacolin at free.fr  Mon Aug 29 07:34:22 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Mon Aug 29 21:36:13 2011
Subject: [gdal-dev] Projection definition issue with Mapinfo files
Message-ID: <201108291334.22540.yjacolin@free.fr>

Hello,

One of QGIS user report an issue with mapInfo file (TAB file). If you understand 
french you can see the thread here:
http://georezo.net/forum/viewtopic.php?pid=197022

I try to sum up the issue in english in this email. The process is basicly as 
follow:
1. check projection information with ogrinfo 

> DATUM["GRS_80",
>             SPHEROID["GRS 80",6378137,298.257222101],

2. update projection information file with ogr2ogr:
> ogr2ogr -f "MapInfo file" -s_srs "EPSG:2154" -t_srs "EPSG:2154" new.tab 
origin.tab

3. check projection information with ogrinfo

> DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563],

1 and 3 show differents projection information! If I try to change file format 
to shp, it seems that projection information are correct.

I can share tab files if needed.

Any idea? Thanks.

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From even.rouault at mines-paris.org  Mon Aug 29 15:09:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 29 23:11:04 2011
Subject: [gdal-dev] Re: OGR Spatialite driver and spatial index
In-Reply-To: <loom.20110829T121543-611@post.gmane.org>
References: <loom.20110829T090719-393@post.gmane.org>
	<1314611430.4e5b60e695360@webmail.free.fr>
	<loom.20110829T121543-611@post.gmane.org>
Message-ID: <201108292109.47788.even.rouault@mines-paris.org>

Le lundi 29 ao?t 2011 12:19:26, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Hum, the OGR driver was indeed written a bit too naively, assuming that
> > MBRIntersects() would be similar to the && operator in PostGIS.
> > Apparently not. Strange that this hasn't been reported before, but I
> > assume you can only see the
> > difference with big amount of data, like your OSM database (and the
> > MBRIntersects() test must be faster than evaluating the spatial filter on
> > OGR side, so that's perhaps why it wasn't seen at implementation time).
> > Anyway, would you mind opening a Trac ticket about this ? Changing the
> > request to use the spatial index table should not be too difficult.
> 
> Ticket [GDAL] #4212 done with sample requests which should show the speed
> difference and a download link to a test database which is created with
> ogr2ogr v. 1.8.1.

Improvement commited in r23008.

Before : 
$ time ogrinfo berlin.sqlite osm_polygon -spat 1489000 6899000 1490000 6900000 
-al -so
real	0m0.619s
user	0m0.580s
sys	0m0.040s

After :
$ time ogrinfo berlin.sqlite osm_polygon -spat 1489000 6899000 1490000 6900000 
-al -so
real	0m0.053s
user	0m0.020s
sys	0m0.040s

And for comparison, the same for a postgis instance :
$ time ogrinfo pg:dbname=autotest osm_polygon -spat 1489000 6899000 1490000 
6900000 -al -so
real	0m0.168s
user	0m0.050s
sys	0m0.000s

However, there is no gain to expect from the above change for a request such 
as :
ogrinfo OSM_Finland.sqlite -sql "select geometry, osm_id ,highway,ref, 
name, tunnel from osm_line where highway is not null" 
-spat  389116 6677305 389579 6677661

Indeed, when you specify -sql, the driver (and to my knowlegde, this is true 
for all other OGR drivers) makes no attempt to merge the spatial filter, so the 
spatial filter is evaluated on OGR side, which will be rather slow. So, you 
have 2 possibilities, either use the "-where highway is not null" on a layer 
so that OGR can merge the attribute and spatial filters, or incorporate at hand 
the spatial filter inside the SQL query specified with -sql.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Mon Aug 29 16:18:10 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Aug 30 00:30:16 2011
Subject: [gdal-dev] Re: OGR Spatialite driver and spatial index
References: <loom.20110829T090719-393@post.gmane.org>
	<1314611430.4e5b60e695360@webmail.free.fr>
	<loom.20110829T121543-611@post.gmane.org>
	<201108292109.47788.even.rouault@mines-paris.org>
Message-ID: <loom.20110829T221423-693@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> Improvement commited in r23008.
> 
> Before : 
> $ time ogrinfo berlin.sqlite osm_polygon -spat 1489000 6899000 1490000 6900000 
> -al -so
> real	0m0.619s
> user	0m0.580s
> sys	0m0.040s
> 
> After :
> $ time ogrinfo berlin.sqlite osm_polygon -spat 1489000 6899000 1490000 6900000 
> -al -so
> real	0m0.053s
> user	0m0.020s
> sys	0m0.040s

So eleven times faster than it used to be and now three times faster than
PostGIS? I would also call it improvement.

-Jukka Rahkonen-

From matthew.burton.kelly at my.und.edu  Mon Aug 29 17:10:21 2011
From: matthew.burton.kelly at my.und.edu (Burton-Kelly, Matthew)
Date: Tue Aug 30 01:25:31 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <4E5AB127020000CE00049701@mail.co.lincoln.or.us>
References: <4E5AB127020000CE00049701@mail.co.lincoln.or.us>
Message-ID: <5798F3A8-C4FC-4663-B546-87AE78EBA3EC@my.und.edu>

Thanks Even for making the fix!

Is there documentation anywhere for how to apply changes like this?  I apologize but I am just getting into this type of development.  I thought I was able to install the latest nightly build today, but I'm not sure.  Running Mac OS X.  If anyone has any pointers I would really appreciate them off-list.

Thanks,
Matt


On 28 Aug, 2011, at 11:20 PM, Eli Adam wrote:

> Even,
> 
>       This works for me and the test case included with the initial report.  
> 
> Thank you very much, Eli
> 
>>>> Even Rouault <even.rouault@mines-paris.org> 08/28/11 5:25 AM >>>
>> 
> I've applied a fix in trunk in http://trac.osgeo.org/gdal/changeset/22998 . 
> Please test and confirm if it works for you.
> 
> 




-----------------------------
Matthew Burton-Kelly, M.S.
Graduate Student
Department of Geology and Geological Engineering
University of North Dakota
Mobile: (802) 922-3696
matthew.burton.kelly@my.und.edu
matthew.burtonkelly@gmail.com
http://www.protichnoctem.com
http://und.academia.edu/MatthewBurtonKelly
--------------------------------------------
"About thirty years ago there was much talk that geologists ought only to observe and not theorize; and I well remember someone saying that at this rate a man might as well go into a gravelpit and count the pebbles and describe the colors.  How odd it is that anyone should not see that all observation must be for or against some view if it is to be of any service!"
-Charles Darwin, in an 1861 letter to Henry Fawcett.


From jluis at ualg.pt  Mon Aug 29 17:17:42 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Aug 30 01:32:54 2011
Subject: [gdal-dev] Re: gdal_rasterize output off by one pixel/cell
In-Reply-To: <5798F3A8-C4FC-4663-B546-87AE78EBA3EC@my.und.edu>
References: <4E5AB127020000CE00049701@mail.co.lincoln.or.us>
	<5798F3A8-C4FC-4663-B546-87AE78EBA3EC@my.und.edu>
Message-ID: <4E5C01F6.8080901@ualg.pt>

On 29-08-2011 22:10, Burton-Kelly, Matthew wrote:
> Thanks Even for making the fix!
>
> Is there documentation anywhere for how to apply changes like this?  I apologize but I am just getting into this type of development.  I thought I was able to install the latest nightly build today, but I'm not sure.  Running Mac OS X.  If anyone has any pointers I would really appreciate them off-list.
>
> Thanks,
> Matt
>

Matt,

I never tried it as I always (re)build from SVN but that implies having 
previously built the dependencies, but homebrew (no Fink, no MacPorts, 
HOMEBREW) has a GDAL formula that contemplates svn build. Maybe it's 
worth to give it a try.

Joaquim


From dcole at integrity-apps.com  Mon Aug 29 18:14:12 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Aug 30 02:37:03 2011
Subject: [gdal-dev] Set color table in NITF
Message-ID: <8406B84EA8899042A8508D858843972903CB0E9C@CHUNEX01.integrity-apps.com>

Hello,

I am trying to create a NITF that uses a color lookup table.

I found the option to add an RGB/LUT to the image, which didnt complain, however, when I had my LUT data to the image, it all seems to be kind of black and white.

I know when I was displaying the images in my viewer (which I wrote in Qt), I had a function to create a 256 element color table, that changed some of the values. How would I modify the color table in the NITF?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110829/8df988eb/attachment.html
From even.rouault at mines-paris.org  Mon Aug 29 18:29:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 30 02:48:38 2011
Subject: [gdal-dev] Set color table in NITF
In-Reply-To: <8406B84EA8899042A8508D858843972903CB0E9C@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903CB0E9C@CHUNEX01.integrity-apps.com>
Message-ID: <201108300029.30765.even.rouault@mines-paris.org>

Le mardi 30 ao?t 2011 00:14:12, Cole, Derek a ?crit :
> Hello,
> 
> I am trying to create a NITF that uses a color lookup table.
> 
> I found the option to add an RGB/LUT to the image, which didnt complain,
> however, when I had my LUT data to the image, it all seems to be kind of
> black and white.
> 
> I know when I was displaying the images in my viewer (which I wrote in Qt),
> I had a function to create a 256 element color table, that changed some of
> the values. How would I modify the color table in the NITF?

Use SetColorTable() on the raster band object.

Python example :

from osgeo import gdal
ds = gdal.GetDriverByName('NITF').Create('test.ntf', 1, 1, options = 
['IREP=RGB/LUT', 'LUT_SIZE=3'])
ct = gdal.ColorTable()
ct.SetColorEntry( 0, (0,0,0) )
ct.SetColorEntry( 1, (10,10,10) )
ct.SetColorEntry( 2, (20, 20, 20))
ds.GetRasterBand(1).SetColorTable(ct)
ds = None


$ gdalinfo test.ntf
Driver: NITF/National Imagery Transmission Format
Files: test.ntf
Size is 1, 1
[...]
Band 1 Block=1x1 Type=Byte, ColorInterp=Palette
  NoData Value=3
  Color Table (RGB with 4 entries)
    0: 0,0,0,255
    1: 10,10,10,255
    2: 20,20,20,255
    3: 0,0,0,0


> 
> Thanks
From even.rouault at mines-paris.org  Mon Aug 29 18:35:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 30 02:55:20 2011
Subject: [gdal-dev] Projection definition issue with Mapinfo files
In-Reply-To: <201108291334.22540.yjacolin@free.fr>
References: <201108291334.22540.yjacolin@free.fr>
Message-ID: <201108300035.54646.even.rouault@mines-paris.org>

Le lundi 29 ao?t 2011 13:34:22, Yves Jacolin a ?crit :
> Hello,
> 
> One of QGIS user report an issue with mapInfo file (TAB file). If you
> understand french you can see the thread here:
> http://georezo.net/forum/viewtopic.php?pid=197022

This looks really similar to the issue raised in ticket 
http://trac.osgeo.org/gdal/ticket/3292 that you reported almost 2 years ago 
;-) but that did not see any progress unfortunately :-(

Although not a specialist of the mapinfo format, I think the fix for EPSG:2154 
should be straightforward (adding an entry in a table) once we know the 
mapinfo code that matches to the Reseau_Geodesique_Francais_1993 datum. One 
way to get it would be to attach the COMMUNEL93.TAB (and the other related 
files that make dataset) mentionned in 
http://georezo.net/forum/viewtopic.php?pid=197022 to the ticket.

> 
> I try to sum up the issue in english in this email. The process is basicly
> as follow:
> 1. check projection information with ogrinfo
> 
> > DATUM["GRS_80",
> > 
> >             SPHEROID["GRS 80",6378137,298.257222101],
> 
> 2. update projection information file with ogr2ogr:
> > ogr2ogr -f "MapInfo file" -s_srs "EPSG:2154" -t_srs "EPSG:2154" new.tab
> 
> origin.tab
> 
> 3. check projection information with ogrinfo
> 
> > DATUM["WGS_1984",
> > 
> >             SPHEROID["WGS 84",6378137,298.257223563],
> 
> 1 and 3 show differents projection information! If I try to change file
> format to shp, it seems that projection information are correct.
> 
> I can share tab files if needed.
> 
> Any idea? Thanks.
> 
> Y.
From misha at mail.geometrics.com  Mon Aug 29 20:29:12 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue Aug 30 05:11:13 2011
Subject: [gdal-dev] Exporting functions under Windows
Message-ID: <4E5C2ED8.3060601@mail.geometrics.com>

  Hi,

I came across this problem before, and I don't remember id I solved. The 
problem is then
gdal18.dll  is not exporting many functions. I use default build using 
VC 2010 express edition.
For instance instead of function "GDALAllRegister" library exports 
"_GDALAllRegister@0"
GetProcAddress() fails in first case, but works for second.

I am using C interface.

Am I missing something very basic?

Thank you
Mikhail

From misha at mail.geometrics.com  Mon Aug 29 21:05:07 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue Aug 30 05:48:54 2011
Subject: [gdal-dev] Exporting functions under Windows
In-Reply-To: <4E5C2ED8.3060601@mail.geometrics.com>
References: <4E5C2ED8.3060601@mail.geometrics.com>
Message-ID: <4E5C3743.2000102@mail.geometrics.com>

  I think I figured it out.  I added -DCPL_DISABLE_STDCALL
to the  OPTFLAGS and commented out STDCALL=YES

After this it all worked.

Thank you
Mikhail

On 8/29/2011 5:29 PM, Mikhail Tchernychev wrote:
>  Hi,
>
> I came across this problem before, and I don't remember id I solved. 
> The problem is then
> gdal18.dll  is not exporting many functions. I use default build using 
> VC 2010 express edition.
> For instance instead of function "GDALAllRegister" library exports 
> "_GDALAllRegister@0"
> GetProcAddress() fails in first case, but works for second.
>
> I am using C interface.
>
> Am I missing something very basic?
>
> Thank you
> Mikhail
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From tang312 at gmail.com  Tue Aug 30 04:12:55 2011
From: tang312 at gmail.com (tang qingyuan)
Date: Tue Aug 30 13:03:31 2011
Subject: [gdal-dev] question about build static gdal with visual studio
Message-ID: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>

HI !

    gdal is default build to dynamic lib with visual studio.How can I build
it to static lib ? Maybe a stupid question,But I cannot get the answer on
mail list.  Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110830/3832b946/attachment.html
From yjacolin at free.fr  Tue Aug 30 03:32:47 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Aug 30 13:44:09 2011
Subject: [gdal-dev] Projection definition issue with Mapinfo files
In-Reply-To: <201108300035.54646.even.rouault@mines-paris.org>
References: <201108291334.22540.yjacolin@free.fr>
	<201108300035.54646.even.rouault@mines-paris.org>
Message-ID: <201108300932.47310.yjacolin@free.fr>

Thanks Even! I did not remember this ticket :)

I attached the zip file and add a comment which I hope clarify things about the 
zip file content.

Y.
Le mardi 30 ao?t 2011 00:35:54, Even Rouault a ?crit :
> Le lundi 29 ao?t 2011 13:34:22, Yves Jacolin a ?crit :
> > Hello,
> > 
> > One of QGIS user report an issue with mapInfo file (TAB file). If you
> > understand french you can see the thread here:
> > http://georezo.net/forum/viewtopic.php?pid=197022
> 
> This looks really similar to the issue raised in ticket
> http://trac.osgeo.org/gdal/ticket/3292 that you reported almost 2 years ago
> ;-) but that did not see any progress unfortunately :-(
> 
> Although not a specialist of the mapinfo format, I think the fix for
> EPSG:2154 should be straightforward (adding an entry in a table) once we
> know the mapinfo code that matches to the Reseau_Geodesique_Francais_1993
> datum. One way to get it would be to attach the COMMUNEL93.TAB (and the
> other related files that make dataset) mentionned in
> http://georezo.net/forum/viewtopic.php?pid=197022 to the ticket.
> 
> > I try to sum up the issue in english in this email. The process is
> > basicly as follow:
> > 1. check projection information with ogrinfo
> > 
> > > DATUM["GRS_80",
> > > 
> > >             SPHEROID["GRS 80",6378137,298.257222101],
> > 
> > 2. update projection information file with ogr2ogr:
> > > ogr2ogr -f "MapInfo file" -s_srs "EPSG:2154" -t_srs "EPSG:2154" new.tab
> > 
> > origin.tab
> > 
> > 3. check projection information with ogrinfo
> > 
> > > DATUM["WGS_1984",
> > > 
> > >             SPHEROID["WGS 84",6378137,298.257223563],
> > 
> > 1 and 3 show differents projection information! If I try to change file
> > format to shp, it seems that projection information are correct.
> > 
> > I can share tab files if needed.
> > 
> > Any idea? Thanks.
> > 
> > Y.

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From yjacolin at free.fr  Tue Aug 30 07:22:46 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Aug 30 17:04:08 2011
Subject: [gdal-dev] GTiff optimisation
Message-ID: <201108301322.46312.yjacolin@free.fr>

Hello,

I am converting GTiff to GTiff in order to add projection and georeferencing 
information in the header. I am using gdalwarp with some flags, mailny -co 
flags. I have some question about this.

Here is my command line:

gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co "NBITS=1" -
s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif

1.  File size: input.tif and output.tif have different file size, output file is 
50 % bigger than the input file. Is it normal?

2. If I use gdalinfo on my output file, I have no information about MINISWHITE 
parameter while I have it in the input file. Am I using this creation option 
correctly? This issue could be related to the first item?

3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo, what 
does it means?

gdal version: GDAL 1.7.3, released 2010/11/10

thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From etiennesky at yahoo.com  Tue Aug 30 09:09:13 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Tue Aug 30 18:15:31 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201108301322.46312.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
Message-ID: <1314709753.35941.YahooMailNeo@web36907.mail.mud.yahoo.com>

Bonjour Yves,


I think that gdalwarp is not optimized for saving compressed geotiffs, you would have to do that in a second step. This topic has been addressed in this list not long ago.


Anyway, you should be using gdal_translate (with a_srs flag) instead for this 
task, as you are just adding georeferencing information, not 
re-projecting the data.

something like gdal_translate -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co "NBITS=1" -a_srs "EPSG:2154" input.tif output.tif

Etienne



----- Original Message -----
From: Yves Jacolin <yjacolin@free.fr>
To: gdal-dev <gdal-dev@lists.osgeo.org>
Cc: 
Sent: Tuesday, August 30, 2011 8:22:46 AM
Subject: [gdal-dev] GTiff optimisation

Hello,

I am converting GTiff to GTiff in order to add projection and georeferencing 
information in the header. I am using gdalwarp with some flags, mailny -co 
flags. I have some question about this.

Here is my command line:

gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co "NBITS=1" -
s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif

1.? File size: input.tif and output.tif have different file size, output file is 
50 % bigger than the input file. Is it normal?

2. If I use gdalinfo on my output file, I have no information about MINISWHITE 
parameter while I have it in the input file. Am I using this creation option 
correctly? This issue could be related to the first item?

3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo, what 
does it means?

gdal version: GDAL 1.7.3, released 2010/11/10

thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etiennesky at yahoo.com  Tue Aug 30 09:18:38 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Tue Aug 30 18:28:30 2011
Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1314572053.8205.15.camel@octopi>
References: <1314218239.13381.YahooMailNeo@web36904.mail.mud.yahoo.com>
	<j37ime$g8k$1@dough.gmane.org>
	<1314371747.91047.YahooMailNeo@web36903.mail.mud.yahoo.com>
	<201108262120.07119.even.rouault@mines-paris.org>
	<1314568563.89202.YahooMailNeo@web36905.mail.mud.yahoo.com>
	<1314572053.8205.15.camel@octopi>
Message-ID: <1314710318.42499.YahooMailNeo@web36907.mail.mud.yahoo.com>

Brian,

I am not familiar with madis data.? I assume that it is point-data for meteorological stations?

If you like, please post your ideas and a short description in a new topic in the wiki entry at
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements .

Etienne



----- Original Message -----
From: Brian Case <rush@winkey.org>
To: Etienne Tourigny <etiennesky@yahoo.com>
Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
Sent: Sunday, August 28, 2011 7:54:13 PM
Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention

any thoughts on a ogr netcdf driver? I have a simple one for madis data
that needs work in my sandbox

Brian



On Sun, 2011-08-28 at 14:56 -0700, Etienne Tourigny wrote:
> I have created a new wiki page at http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements , following Even's suggestion (Thanks Even).
> 
> The following topics have been included:
> 
> 
> Topics:
> 
> 1 - UNIDATA NetCDF Conventions
> 
> 2 - Metadata
> 3 - Datum issues
> 4 - Dimension issues
> 5 - Compatibility with other software
> 6 - Test files
> 7 - Contribution
> Discussion
> 
> I encourage interested parties in participating in this discussion in the wiki and in the mailing list. 
> 
> 
> In particular, it would be useful to collect information on contributors and obtain test files with issues and the expected outcome. 
> 
> regards, Etienne
> 
> 
> ----- Original Message -----
> From: Even Rouault <even.rouault@mines-paris.org>
> To: gdal-dev@lists.osgeo.org; Etienne Tourigny <etiennesky@yahoo.com>
> Cc: 
> Sent: Friday, August 26, 2011 4:20:06 PM
> Subject: Re: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention
> 
> Le vendredi 26 ao?t 2011 17:15:47, Etienne Tourigny a ?crit :
> 
> My thoughts, just from a process point of view, not being myself deeply 
> involved in the NetCDF format :
> 
> * A wiki page (I'd suggest either a new page - 
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements - or at least a clearly 
> identified section in the current page, to avoid confusion for outsiders about 
> what is currently implemented and what is not) can be a convenient way of 
> structuring and editing the content by anyone with a osgeo id. But discussions 
> on the mailing list are also OK, at least to notify new content has been added 
> (provided that it doesn't cause flooding on the mailing list ;-))
> 
> * A http://download.osgeo.org/gdal/data/netcdf directory would be the right 
> place to store NetCDF sample files, provided they are free under the terms of 
> http://download.osgeo.org/gdal/data/COPYING . As write access to it is 
> restricted to people with appropriate rights, having those rights, I can help 
> uploading files over there. Having small (typically < or ~ 10 KB ) sample files 
> is also good so they can be directly included in SVN under the 
> autotest/gdrivers/data directory and thus easily used by regression tests.
> 
> * Tickets can be used to track the implementation of specific items and 
> bugfixes. But I've found they are not generally suitable for brainstorming when 
> the discussion is lasting, as you cannot edit already posted content. Wiki is 
> clearly better for this.
> 
> * Looking at past history, I see we haven't yet used the RFC formalism for 
> work specific to one driver, while it doesn't require changes or extensions to 
> the GDAL API. But it wouldn't hurt to create one if the need arises. Anyway, a 
> point that might require care and some consensus among the interested parties 
> is about how backward compatibility issues, in particular with respect to files 
> produced by older GDAL versions, are adressed. 
> http://trac.osgeo.org/gdal/wiki/rfc1_pmc details when a vote is required.
> 
> Best regards,
> 
> Even
> 
> > Hi all,
> > 
> > Since a few people have shown an interest in helping out, I would suggest
> > to set up space where we can post ideas, goals and test files.? This could
> > take the form of one of the following:
> > 
> > - a new wiki entry in trac, or the existing one at
> > http://trac.osgeo.org/gdal/wiki/NetCDF - a file repository at
> > http://download.osgeo.org/gdal/data/netcdf as suggested some time ago by
> > warmerdam
> > 
> > and/or
> > 
> > - a new ticket in trac (which allows to post files)
> > 
> > What are you thoughts about this?? Would it make sense to eventually
> > prepare an RFC?
> > 
> > 
> > 
> > I would suggest that each group identify the problems with the current
> > driver in terms of importing and exporting, post the files that they would
> > like to be supported, which other software they use with the netcdf files,
> > and their proposed contribution (code, test, ideas, etc.).
> > 
> > Those that cannot participate in code development can help out in testing
> > and discussion. Personally, I can write and test code, given example files
> > and expected outcome. 
> > 
> > 
> > Now to your specific comments, Knut-Frode:
> > 
> > 1) Yes CF-1.5 should be the goal, although I'm not sure we need to support
> > upgrading/downgrading.
> > 
> > 5) The WGS84 issue needs further research. Weather and ocean data are in
> > lat/lon, but what is the sphere radius assumed by the various data
> > providers and? the models which output/import netcdf files? I agree that a
> > small error does not make a difference with low-resolution dataset, but
> > I'd like to be sure in any case. We also need a means to translate the
> > CF-1.x datum information into EPSG/Proj.4 values.
> > 
> > 
> > 7) There is some support of a z-axis right now, in fact they driver assumes
> > that a third dimension is vertical if I understand correctly. However, I
> > have not tested nor looked into that.? This issue definitely needs come
> > planning and an RFC, IMHO.
> > 
> > 
> > Kyle, thanks for you help and interest!
> > 
> > 
> > cheers,
> > Etienne
> > 
> > 
> > ________________________________
> > From: Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>
> > To: gdal-dev@lists.osgeo.org
> > Sent: Friday, August 26, 2011 4:41:02 AM
> > Subject: [gdal-dev] Re: discussion on improvements to the NetCDF driver and
> > CF-1 convention
> > 
> > Etienne,
> > 
> > My group is also very much in support of the suggested improvements, as
> > NetCDF/CF is becoming the most important standard for data
> > storage/exchange in our community (climate, meteorology, oceanography). My
> > group is not much into GDAL driver development (at least not yet), but we
> > are now building our future very much around GDAL, so we are interested to
> > join the discussion around improved support for NetCDF/CF reading and
> > writing.
> > 
> > About some of the mentioned issues:
> > 
> > 1) The latest version of CF is 1.5, so it would be better to target 1.5 (or
> > 1.x) than 1.0. Ideally the driver could be made generic for smooth upgrade
> > to newer (or downgrade to older) versions of the CF conventions.
> > 
> > 5) It sounds meaningful to assume WGS84 datum if not specified. I believe
> > at least 99% of data typically stored in NetCDF/CF will have this datum,
> > and even when that is not the case, positioning errors less than 100 m
> > should normally have little impact for the types of data. Precision on
> > datum level is probably more relevant for more typical GIS-data with
> > roads, borders etc. A warning could however be issued each time the driver
> > has to assume WGS84.
> > 
> > 7) We agree in particular that proper handling of time axis is of high
> > value. This is one of the issues which is highly relevant for climate-data
> > (often 4-dimensional), but not well supported by typical GIS-software or
> > standards designed with 2-dimensional data in mind. A general
> > representation of a time-axis (or even vertical axis) in GDAL would be
> > ideal, but that would probably be too much an effort for anyone to
> > develop.
> > 
> > 
> > Knut-Frode
> > Nansen Environmental and Remote Sensing Center
> > 
> > On 24/08/2011 22:37, Etienne Tourigny wrote:
> > > Hi all,
> > > 
> > > I would like to start a discussion with those interested about fixing
> > > various issues in the NetCDF driver.
> > > 
> > > As it stands, it is not fully CF-1.0 compliant, and produces
> > > geographical grids that are not valid for other software.
> > > Also, the infamous "up-side down" problem has been addressed for
> > > importing netcdfs, but needs to be addressed for exporting.
> > > 
> > > Related ticket: http://trac.osgeo.org/gdal/ticket/2129
> > > I have been submitting patches for some time to fix the related issues.
> > > 
> > > I have identified a number of issues, of which the following have been
> > > fixed partially in my proposed patch.
> > > 
> > > 1- conform to the cf-1.0 standard for geographical grids (creating lat
> > > and lon dimensions and variables)
> > > 2- make netcdf grids "bottom-up" by default, as all software out there
> > > uses that convention
> > > 3- fix problems related to floating-point / string conversions (also
> > > reported in issue #4200 )
> > > 4- fix metadata handling and duplication (as reported in issue #4204),
> > > and keep band (variable) metadata outside of the global metadata
> > > 
> > > Pending issues:
> > > 
> > > 5- how to deal with netcdfs which have no datum? Can we assume WGS84?
> > > These files are extremely common, and CF-1.0 has provisions for
> > > identifying the key variables, but no Proj/Wkt codes.
> > > 6- fix proper export of projected CRS (this is not fully necessary
> > > though) with lat/lon values respecting CF-1.0
> > > 7- handle time axis properly (at least when creating a netcdf) - that
> > > would be great for import/export of netcdf
> > > 
> > > Regards,
> > > Etienne
> > > 
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Aug 30 11:22:30 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 30 20:36:11 2011
Subject: [gdal-dev] question about build static gdal with visual studio
In-Reply-To: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>
References: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>
Message-ID: <4E5D0036.90304@pobox.com>

On 11-08-30 01:12 AM, tang qingyuan wrote:
> HI !
>      gdal is default build to dynamic lib with visual studio.How can I build it
> to static lib ? Maybe a stupid question,But I cannot get the answer on mail
> list.  Thanks!

Tang Qingyuan,

In fact, I think you can get the answer on the mailing list!

I believe a default build of GDAL includes creation of the gdal.lib static
library which you can use to build against.  I think if you comment out the
following line in the nmake.opt file, then the gdal.lib will be used by
default when linking the commandline programs instead of the DLL stub library
(gdal_i.lib).

# Uncomment the following to link OGR utilities against main GDAL DLL
# instead of statically linking against OGR libraries.
DLLBUILD=1

I must confess to not having used this in some time so it could be broken.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yjacolin at free.fr  Tue Aug 30 10:24:50 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Aug 30 22:10:23 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <1314709753.35941.YahooMailNeo@web36907.mail.mud.yahoo.com>
References: <201108301322.46312.yjacolin@free.fr>
	<1314709753.35941.YahooMailNeo@web36907.mail.mud.yahoo.com>
Message-ID: <201108301624.50584.yjacolin@free.fr>

Etienne,

Ah yes I understand :)

Actually I tested geotifcp to add projection information in the geotiff file but 
I had some problem. Since I have ECW files also I moved to gdal utilities.

Merci !

Y.
Le mardi 30 ao?t 2011 15:09:13, Etienne Tourigny a ?crit :
> Bonjour Yves,
> 
> 
> I think that gdalwarp is not optimized for saving compressed geotiffs, you
> would have to do that in a second step. This topic has been addressed in
> this list not long ago.
> 
> 
> Anyway, you should be using gdal_translate (with a_srs flag) instead for
> this task, as you are just adding georeferencing information, not
> re-projecting the data.
> 
> something like gdal_translate -co "COMPRESS=PACKBITS" -co
> "PHOTOMETRIC=MINISWHITE" -co "NBITS=1" -a_srs "EPSG:2154" input.tif
> output.tif
> 
> Etienne
> 
> 
> 
> ----- Original Message -----
> From: Yves Jacolin <yjacolin@free.fr>
> To: gdal-dev <gdal-dev@lists.osgeo.org>
> Cc:
> Sent: Tuesday, August 30, 2011 8:22:46 AM
> Subject: [gdal-dev] GTiff optimisation
> 
> Hello,
> 
> I am converting GTiff to GTiff in order to add projection and
> georeferencing information in the header. I am using gdalwarp with some
> flags, mailny -co flags. I have some question about this.
> 
> Here is my command line:
> 
> gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co "NBITS=1"
> - s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif
> 
> 1.  File size: input.tif and output.tif have different file size, output
> file is 50 % bigger than the input file. Is it normal?
> 
> 2. If I use gdalinfo on my output file, I have no information about
> MINISWHITE parameter while I have it in the input file. Am I using this
> creation option correctly? This issue could be related to the first item?
> 
> 3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo, what
> does it means?
> 
> gdal version: GDAL 1.7.3, released 2010/11/10
> 
> thanks,
> 
> Y.

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From matze999 at gmail.com  Tue Aug 30 15:28:11 2011
From: matze999 at gmail.com (Matt Funk)
Date: Wed Aug 31 00:55:52 2011
Subject: [gdal-dev] using GDALGridCreate in python?
Message-ID: <4E5D39CB.2070106@gmail.com>

Hi,
i have several satellite scenes which basically give me 3 vectors:
lat/lon/data which is on an irregular. I would like to interpolate those
onto a regular grid. I found that GDALGridCreate would meet my need
except that i am developing in python, but it appears the bindings for
it don't exist (unless i am mistaken).
So my question is whether someone knows of an alternative route to
accomplish this or whether i am possible wrong in that i cannot use
GDALGridCreate in python?

thanks
matt

From even.rouault at mines-paris.org  Tue Aug 30 15:39:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 31 01:07:44 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <4E5D39CB.2070106@gmail.com>
References: <4E5D39CB.2070106@gmail.com>
Message-ID: <201108302139.50194.even.rouault@mines-paris.org>

Le mardi 30 ao?t 2011 21:28:11, Matt Funk a ?crit :
> Hi,
> i have several satellite scenes which basically give me 3 vectors:
> lat/lon/data which is on an irregular. I would like to interpolate those
> onto a regular grid. I found that GDALGridCreate would meet my need
> except that i am developing in python, but it appears the bindings for
> it don't exist (unless i am mistaken).
> So my question is whether someone knows of an alternative route to
> accomplish this or whether i am possible wrong in that i cannot use
> GDALGridCreate in python?

Yes, you cannot use GDALGridCreate() in python. It has only been mapped to 
Java bindings for now. You can as a workaround for a process with the 
gdal_grid utility.

> 
> thanks
> matt
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.wilkie at gov.yk.ca  Tue Aug 30 12:46:53 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Aug 31 02:19:12 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201108301322.46312.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
Message-ID: <4E5D13FD.2000008@gov.yk.ca>

Yves,  it's best to use gdalwarp without any compression options and 
then use gdal_translate as a last step to apply the compression. See 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSisbroken 
for more.

cheers,

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


On 30/08/2011 4:22 AM, Yves Jacolin wrote:
> Hello,
>
> I am converting GTiff to GTiff in order to add projection and georeferencing
> information in the header. I am using gdalwarp with some flags, mailny -co
> flags. I have some question about this.
>
> Here is my command line:
>
> gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co "NBITS=1" -
> s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif
>
> 1.  File size: input.tif and output.tif have different file size, output file is
> 50 % bigger than the input file. Is it normal?
>
> 2. If I use gdalinfo on my output file, I have no information about MINISWHITE
> parameter while I have it in the input file. Am I using this creation option
> correctly? This issue could be related to the first item?
>
> 3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo, what
> does it means?
>
> gdal version: GDAL 1.7.3, released 2010/11/10
>
> thanks,
>
> Y.
From matze999 at gmail.com  Tue Aug 30 16:57:34 2011
From: matze999 at gmail.com (Matt Funk)
Date: Wed Aug 31 02:30:05 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <201108302139.50194.even.rouault@mines-paris.org>
References: <4E5D39CB.2070106@gmail.com>
	<201108302139.50194.even.rouault@mines-paris.org>
Message-ID: <4E5D4EBE.9060603@gmail.com>

On 8/30/2011 1:39 PM, Even Rouault wrote:
> Le mardi 30 ao?t 2011 21:28:11, Matt Funk a ?crit :
>> Hi,
>> i have several satellite scenes which basically give me 3 vectors:
>> lat/lon/data which is on an irregular. I would like to interpolate those
>> onto a regular grid. I found that GDALGridCreate would meet my need
>> except that i am developing in python, but it appears the bindings for
>> it don't exist (unless i am mistaken).
>> So my question is whether someone knows of an alternative route to
>> accomplish this or whether i am possible wrong in that i cannot use
>> GDALGridCreate in python?
> Yes, you cannot use GDALGridCreate() in python. It has only been mapped to 
> Java bindings for now. You can as a workaround for a process with the 
> gdal_grid utility.
I have never used the gdal_grid utility. Outside of its manpage
(http://www.gdal.org/gdal_grid.html) i haven't found any usage examples.
As far as inputs are concerned it talks about csv file. Are there other
input formats. Is there a list of options?
Also, this might be a dumb question, but would it be of any value to
call the compiled c-gdal library directly from my python code?

matt

>
>> thanks
>> matt
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Tue Aug 30 17:04:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 31 02:37:26 2011
Subject: [gdal-dev] using GDALGridCreate in python?
In-Reply-To: <4E5D4EBE.9060603@gmail.com>
References: <4E5D39CB.2070106@gmail.com>
	<201108302139.50194.even.rouault@mines-paris.org>
	<4E5D4EBE.9060603@gmail.com>
Message-ID: <201108302304.57258.even.rouault@mines-paris.org>

Le mardi 30 ao?t 2011 22:57:34, Matt Funk a ?crit :
> On 8/30/2011 1:39 PM, Even Rouault wrote:
> > Le mardi 30 ao?t 2011 21:28:11, Matt Funk a ?crit :
> >> Hi,
> >> i have several satellite scenes which basically give me 3 vectors:
> >> lat/lon/data which is on an irregular. I would like to interpolate those
> >> onto a regular grid. I found that GDALGridCreate would meet my need
> >> except that i am developing in python, but it appears the bindings for
> >> it don't exist (unless i am mistaken).
> >> So my question is whether someone knows of an alternative route to
> >> accomplish this or whether i am possible wrong in that i cannot use
> >> GDALGridCreate in python?
> > 
> > Yes, you cannot use GDALGridCreate() in python. It has only been mapped
> > to Java bindings for now. You can as a workaround for a process with the
> > gdal_grid utility.
> 
> I have never used the gdal_grid utility. Outside of its manpage
> (http://www.gdal.org/gdal_grid.html) i haven't found any usage examples.

That's already a beginning ;-)

> As far as inputs are concerned it talks about csv file. Are there other
> input formats.

All OGR supported formats : http://gdal.org/ogr/ogr_formats.html

> Also, this might be a dumb question, but would it be of any value to
> call the compiled c-gdal library directly from my python code?

Possibly, but someone has to code the missing python swig typemaps however.

> 
> matt
> 
> >> thanks
> >> matt
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From tang312 at gmail.com  Tue Aug 30 21:58:38 2011
From: tang312 at gmail.com (tang)
Date: Wed Aug 31 07:47:25 2011
Subject: [gdal-dev] question about build static gdal with visual studio
In-Reply-To: <4E5D0036.90304@pobox.com>
References: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>
	<4E5D0036.90304@pobox.com>
Message-ID: <CADZaccNv0roiOira+QQ84TimW0wVTe4buH3mqZFpMNmhMc2vaQ@mail.gmail.com>

Thanks a lot for your replay!

    I got the gdal.lib,but while I link the program to this lib,it still
needs gdal18.dll. this confused me . I had tried to   comment out
DLLBUILD=1  ,  but the commandline programs need   gdal18.dll too.   even
replacing all gdal_i.lib with gdal.lib helps nothing.
    I know little about  nmake/cl/link, whitch are used in  the gdal's  vs
slution.  It seems in linux configure we can build static gdal with
--enalbe-static,but I don?t know how to do this in VS nmake.
     Best regards!  and thank you again!

On Tue, Aug 30, 2011 at 11:22 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-08-30 01:12 AM, tang qingyuan wrote:
>
>> HI !
>>     gdal is default build to dynamic lib with visual studio.How can I
>> build it
>> to static lib ? Maybe a stupid question,But I cannot get the answer on
>> mail
>> list.  Thanks!
>>
>
> Tang Qingyuan,
>
> In fact, I think you can get the answer on the mailing list!
>
> I believe a default build of GDAL includes creation of the gdal.lib static
> library which you can use to build against.  I think if you comment out the
> following line in the nmake.opt file, then the gdal.lib will be used by
> default when linking the commandline programs instead of the DLL stub
> library
> (gdal_i.lib).
>
> # Uncomment the following to link OGR utilities against main GDAL DLL
> # instead of statically linking against OGR libraries.
> DLLBUILD=1
>
> I must confess to not having used this in some time so it could be broken.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/9fc23259/attachment-0001.html
From hsumanto at vpac.org  Tue Aug 30 23:24:16 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Wed Aug 31 09:17:40 2011
Subject: [gdal-dev] Re: gdalwarp capability to output as netCDF format
In-Reply-To: <1314186595.4e54e56356adc@webmail.free.fr>
Message-ID: <606614298.75858.1314761056553.JavaMail.root@mail.vpac.org>

Thanks for both Chaitanya kumar CH and Even Rouault for your replies.

I will make a request to implement the Create method for the NetCDF driver so that gdalwarp can output as netCDF format
on the NetCDF improvements thread.

Regards,

Hendy

----- Original Message -----
From: "Even Rouault" <even.rouault@mines-paris.org>
To: "Chaitanya kumar CH" <chaitanya.ch@gmail.com>
Cc: "Hendy Sumanto" <hsumanto@vpac.org>, gdal-dev@lists.osgeo.org
Sent: Wednesday, 24 August, 2011 9:49:55 PM
Subject: Re: [gdal-dev] Re: gdalwarp capability to output as netCDF format

Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:

I'd note that implementing Create() is not always possible, depending on the
caracteristics of the format iself and/or the library that enables the access to
it. For netCDF, I can't say, being not versed into the format. There's perhaps
hope that it is doable since I see that the nc_put_vara_double() API that is
called in CreateCopy() takes as argument the offset where to write the buffer,
but it is not a guarantee that random access is possible.

Without changing the code, you still have the possibility to warp into a format
that supports Create() and translate into netCDF afterwards. The intermediate
format could be VRT if you want to save disk space. Of course, in that case, the
translate step will be a bit longer since it will do the warping on the fly.

> Hendy,
>
> Currently, there are no plans to implement the Create method for the netCDF
> driver. You can formally request for it by creating a ticket in the gdal
> trac page [1].
>
> To implement the method yourselves, you have to look at the current driver
> page[2] and the driver implementation tutorial page[3].
>
> [1]: http://trac.osgeo.org/gdal/
> [2]: http://www.gdal.org/frmt_netcdf.html
> [3]: http://www.gdal.org/gdal_drivertut.html
>
> On Wed, Aug 24, 2011 at 2:20 PM, Hendy Sumanto <hsumanto@vpac.org> wrote:
>
> > I probably should change the question to this to make it clearer.
> > Does anyone know whether there is plan to implement Create method for
> > netCDF driver as currently it is only support only CreateCopy method?
> > If no, could someone please describe what steps would be involved to add
> > this method to the netCDF driver as I am pretty new to GDAL.
> >
> > Thanks.
> >
> > Regards,
> >
> > Hendy
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>

From hsumanto at vpac.org  Wed Aug 31 00:23:54 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Wed Aug 31 10:20:32 2011
Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF driver
	and CF-1 convention
In-Reply-To: <1266305873.76196.1314764502989.JavaMail.root@mail.vpac.org>
Message-ID: <1308916252.76198.1314764634797.JavaMail.root@mail.vpac.org>

Hi Etienne,

I have a few items which I would like to put as new topics in the wiki entry but I think I better describe them here first before putting any entry or creating tickets.

1. As part of the improvement to the NetCDF driver, is it possible to make request to implement the Create method for the driver so that tool such as gdalwarp can output as NetCDF output.

2. Recently I was trying to serve the NetCDF dataset (which were created by gdal_translate geotiff LANDSAT dataset into NetCDF)
using THREDDS data server. When I try to access it via WMS using viewer such as Godiva2, I was not able to view the dataset correctly.

When I used the netCDF toolsUI to check the NetCDF dataset, it is not recognized as a grid by NetCDF Tools (4.2).  

Looking at this documentation (http://www.unidata.ucar.edu/software/netcdf-java/reference/StandardCoordinateTransforms.html),
in order for grid data to be viewable, the NetCDF dataset must:
a) define x and y projection coordinate variables, using the correct projection units, typically km on the projection plane.
b) define your projection dummy variable which has an attribute "grid_mapping_name"
c) refer to the projection in your data variables with the "grid_mapping" attribute.

Checking on the GDAL netCDF, it only define x and y dimensions but not x and y projection coordinate variables (point a is not followed).

Thus, I wondering whether other people have experienced the same issue as what I am having.

Then I just tried to: 
-generate its CDL by ncdump the GDAL netCDF file into CDL
-and the define x and y projection coordinate variables (as shown below) into the CDL
    double y(y) ;
        y:units = "m" ;
        y:standard_name = "projection_y_coordinate" ;
        y:long_name = "y coordinate of projection" ;
    double x(x) ;
        x:units = "m" ;
        x:standard_name = "projection_x_coordinate" ;
        x:long_name = "x coordinate of projection" ;
-regenerate the netCDF file from the modified CDL using ncgen
-populate the y coordinate variable in the NetCDF file with
        ymin, ymin+resolution, ymin+2*resolution, ...
-populate the x coordinate variable with
        xmin, xmin+resolution, xmin+2*resolution, ...
-if I then serve the modified NetCDF dataset again using THREDDS data server, now it can be viewed correctly.

Note: xmin, ymin are the lower left corner and resolution is the raster pixel size.

Thus, my questions:
i)Is there a specific reason why the current driver do not define the x and y projection coordinate variables but only defining x and y dimensions. 
For the dataset to be viewable using tools such as netCDF toolsUI or when the dataset are served via THREDDS dataset, we might have to add projection coordinate variables and the correct values
into the netCDF file.
ii)For lambert conformal conic projection with more than one standard parallel values, GDAL netCDF file is showing 
lambert_conformal_conic:standard_parallel_1 = -18.f ;
lambert_conformal_conic:standard_parallel_2 = -36.f ;
but the correct one (for the dataset to be viewable using toolsUI or THREDDS) should be
lambert_conformal_conic:standard_parallel = -18.f,-36.f ; 

Could you please please comment on 1, 2(i) and 2(ii)? 

The attached files:
tile.nc - GDAL netCDF file
tile-fixed-new.nc - the one I just tried to fix and can be viewed in netCDF toolsUI or served in THREDDS

Regards,

Hendy

From yehil at rafael.co.il  Wed Aug 31 02:24:22 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Aug 31 12:40:26 2011
Subject: [gdal-dev] VPF support
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>


Hi
I understand that for GDAL to support reading VPF files, I need to have the OGDI driver.
Are there prebuilt binaries for windows 64 bit which include OGDI?
Are there prebuilt binaries of OGDI itself, which I can use to build GDAL with that driver?

thanks
Yehiyam
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/e5acf877/attachment.html
From warmerdam at pobox.com  Wed Aug 31 02:46:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug 31 12:50:40 2011
Subject: [gdal-dev] question about build static gdal with visual studio
In-Reply-To: <CADZaccNv0roiOira+QQ84TimW0wVTe4buH3mqZFpMNmhMc2vaQ@mail.gmail.com>
References: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>
	<4E5D0036.90304@pobox.com>
	<CADZaccNv0roiOira+QQ84TimW0wVTe4buH3mqZFpMNmhMc2vaQ@mail.gmail.com>
Message-ID: <4E5DD8C1.3070009@pobox.com>

On 11-08-30 06:58 PM, tang wrote:
> Thanks a lot for your replay!
>
>      I got the gdal.lib,but while I link the program to this lib,it still needs
> gdal18.dll. this confused me . I had tried to   comment out   DLLBUILD=1  ,
> but the commandline programs need   gdal18.dll too.   even replacing all
> gdal_i.lib with gdal.lib helps nothing.
>      I know little about  nmake/cl/link, whitch are used in  the gdal's  vs
> slution.  It seems in linux configure we can build static gdal with
> --enalbe-static,but I don?t know how to do this in VS nmake.
>       Best regards!  and thank you again!

Tang,

Well, it took me a while, but I did a default build with MSVC2008 Express
on windows with GDAL 1.8.1 and then issued this command from within the

cl /MD apps/gdalinfo.c gdal.lib /Ilib /Igcore /Iport /Ialg /Iogr /Iogr/ogrsf_frmts

This produced a 4MB gdalinfo.exe (statically linked) that works fine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Aug 31 02:51:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug 31 12:56:35 2011
Subject: [gdal-dev] VPF support
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
Message-ID: <4E5DDA0F.6040806@pobox.com>

On 11-08-30 11:24 PM, Livneh Yehiyam wrote:
> Hi
> I understand that for GDAL to support reading VPF files, I need to have the
> OGDI driver.
> Are there prebuilt binaries for windows 64 bit which include OGDI?
> Are there prebuilt binaries of OGDI itself, which I can use to build GDAL with
> that driver?
> thanks

Yehiyam,

The OSGeo4W binaries for GDAL 1.8 include OGDI support.

   http://osgeo4w.osgeo.org/

I can be a bit involved to build OGDI yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hitweiran at sina.com  Wed Aug 31 05:49:04 2011
From: hitweiran at sina.com (hitweiran)
Date: Wed Aug 31 16:03:14 2011
Subject: [gdal-dev] The problem when using ReadRaster(C#) method
Message-ID: <1314784144569-6745826.post@n2.nabble.com>

I want to read a multiband image(in format of .img) by using method
ReadRaster, however, I encount some problems. I just can't understand why
the data loaded to memory is wrong?
the code is like this

OSGeo.GDAL.Dataset dataSet =
OSGeo.GDAL.Gdal.Open(@"G:\building.img",OSGeo.GDAL.Access.GA_ReadOnly);
int width = dataSet.RasterXSize;
int height = dataSet.RasterYSize;
int Band_Numbers = dataSet.RasterCount;
float [] buffer_first = new float [width * height];
OSGeo.GDAL.Band One_Band = dataSet.GetRasterBand(1);
One_Band.ReadRaster(0, 0, width, height,buffer_first, width, height, 0,0);

However, the output is wrong!
I watch the variable "buffer_first" in watch window, and discoverse that the
data is quite terrible-some data is such as 2.818478E+21,5.065476E+32, or
-6.131138E-11 and so on;
So I suspect my datatype is mismatch to data in img file, or the last two
arguments in ReadRaster is mistake, because I don't know the meaning of last
two parameters.
Thanks a lot for your answer!  

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6745826.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Wed Aug 31 06:15:55 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Aug 31 16:31:31 2011
Subject: [gdal-dev] The problem when using ReadRaster(C#) method
In-Reply-To: <1314784144569-6745826.post@n2.nabble.com>
References: <1314784144569-6745826.post@n2.nabble.com>
Message-ID: <CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>

You should make sure about the actual representation of the raster image,
whether it represents the pixel as floats as you have used float arrays in
the code. The last 2 parameters are used to define the byte offset of the
pixels and lines in the image ( for more info see the
RasterIO<http://www.gdal.org/classGDALRasterBand.html#5497e8d29e743ee9177202cb3f61c3c7>documentation).

Further C# related samples can be found here:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs

Best regards,

Tamas



2011/8/31 hitweiran <hitweiran@sina.com>

> I want to read a multiband image(in format of .img) by using method
> ReadRaster, however, I encount some problems. I just can't understand why
> the data loaded to memory is wrong?
> the code is like this
>
> OSGeo.GDAL.Dataset dataSet =
> OSGeo.GDAL.Gdal.Open(@"G:\building.img",OSGeo.GDAL.Access.GA_ReadOnly);
> int width = dataSet.RasterXSize;
> int height = dataSet.RasterYSize;
> int Band_Numbers = dataSet.RasterCount;
> float [] buffer_first = new float [width * height];
> OSGeo.GDAL.Band One_Band = dataSet.GetRasterBand(1);
> One_Band.ReadRaster(0, 0, width, height,buffer_first, width, height, 0,0);
>
> However, the output is wrong!
> I watch the variable "buffer_first" in watch window, and discoverse that
> the
> data is quite terrible-some data is such as 2.818478E+21,5.065476E+32, or
> -6.131138E-11 and so on;
> So I suspect my datatype is mismatch to data in img file, or the last two
> arguments in ReadRaster is mistake, because I don't know the meaning of
> last
> two parameters.
> Thanks a lot for your answer!
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6745826.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/266b56dc/attachment.html
From even.rouault at mines-paris.org  Wed Aug 31 07:22:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 31 17:41:22 2011
Subject: [gdal-dev] The problem when using ReadRaster(C#) method
In-Reply-To: <CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
References: <1314784144569-6745826.post@n2.nabble.com>
	<CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
Message-ID: <1314789720.4e5e195876c0a@webmail.free.fr>

Selon Tamas Szekeres <szekerest@gmail.com>:

> You should make sure about the actual representation of the raster image,
> whether it represents the pixel as floats as you have used float arrays in
> the code. The last 2 parameters are used to define the byte offset of the
> pixels and lines in the image ( for more info see the
>
RasterIO<http://www.gdal.org/classGDALRasterBand.html#5497e8d29e743ee9177202cb3f61c3c7>documentation).

Tamas, I would expect ReadRaster() to automatically convert to GDT_Float32 if
the provided buffer is of type float[]. As far as I can see in gdal_csharp.i, it
looks like they are doing so. So at worst, you could see loss of precisions if
the type of the array used doesn't exactly match the data type of the raster,
but you shouldn't see random values.

hitweiran, for a packed buffer as the one you use, the last parameters that give
the pixel size and line stride in bytes can be left to 0. In that case, the
function assumes the provided buffer is packed. So you should be fine.

All in all, I'm not sure why it doesn't work for you.

Did you try inspecting the values of your raster with gdal utilities first ?
Like gdallocationinfo for example.

>
> Further C# related samples can be found here:
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALRead.cs
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs
>
> Best regards,
>
> Tamas
>
>
>
> 2011/8/31 hitweiran <hitweiran@sina.com>
>
> > I want to read a multiband image(in format of .img) by using method
> > ReadRaster, however, I encount some problems. I just can't understand why
> > the data loaded to memory is wrong?
> > the code is like this
> >
> > OSGeo.GDAL.Dataset dataSet =
> > OSGeo.GDAL.Gdal.Open(@"G:\building.img",OSGeo.GDAL.Access.GA_ReadOnly);
> > int width = dataSet.RasterXSize;
> > int height = dataSet.RasterYSize;
> > int Band_Numbers = dataSet.RasterCount;
> > float [] buffer_first = new float [width * height];
> > OSGeo.GDAL.Band One_Band = dataSet.GetRasterBand(1);
> > One_Band.ReadRaster(0, 0, width, height,buffer_first, width, height, 0,0);
> >
> > However, the output is wrong!
> > I watch the variable "buffer_first" in watch window, and discoverse that
> > the
> > data is quite terrible-some data is such as 2.818478E+21,5.065476E+32, or
> > -6.131138E-11 and so on;
> > So I suspect my datatype is mismatch to data in img file, or the last two
> > arguments in ReadRaster is mistake, because I don't know the meaning of
> > last
> > two parameters.
> > Thanks a lot for your answer!
> >
> > --
> > View this message in context:
> >
>
http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6745826.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>


From yjacolin at free.fr  Wed Aug 31 08:13:53 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Aug 31 18:36:56 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <4E5D13FD.2000008@gov.yk.ca>
References: <201108301322.46312.yjacolin@free.fr> <4E5D13FD.2000008@gov.yk.ca>
Message-ID: <201108311413.53186.yjacolin@free.fr>

Matt,

Thanks for the link but I already read this page and I have only one process 
(assign projection information).

Anyway, this is always good to read this information !

List,

I successfully assigned my projection information but still have some 
difference in the file size. This is not so important but I wanted to understand 
the reason. Idea welcome :)

Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1 Go each) 
and 2 ECW files (2 Go each). I worked first on 2 Go ECW file, it takes around 1 
day to assign the projection information in the files.

Do you think this is normal? How can I improve this? 

Thanks.

Y.

Le mardi 30 ao?t 2011 18:46:53, Matt Wilkie a ?crit :
> Yves,  it's best to use gdalwarp without any compression options and
> then use gdal_translate as a last step to apply the compression. See
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSi
> sbroken for more.
> 
> cheers,
> 
> matt wilkie
> --------------------------------------------
> Geomatics Analyst
> Information Management and Technology
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
> 
> On 30/08/2011 4:22 AM, Yves Jacolin wrote:
> > Hello,
> > 
> > I am converting GTiff to GTiff in order to add projection and
> > georeferencing information in the header. I am using gdalwarp with some
> > flags, mailny -co flags. I have some question about this.
> > 
> > Here is my command line:
> > 
> > gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co
> > "NBITS=1" - s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif
> > 
> > 1.  File size: input.tif and output.tif have different file size, output
> > file is 50 % bigger than the input file. Is it normal?
> > 
> > 2. If I use gdalinfo on my output file, I have no information about
> > MINISWHITE parameter while I have it in the input file. Am I using this
> > creation option correctly? This issue could be related to the first
> > item?
> > 
> > 3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo,
> > what does it means?
> > 
> > gdal version: GDAL 1.7.3, released 2010/11/10
> > 
> > thanks,
> > 
> > Y.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From rajjad at gmail.com  Wed Aug 31 08:29:03 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed Aug 31 18:51:54 2011
Subject: [gdal-dev] dgn support in gdal/java?
Message-ID: <CADz3VuUceWoHzaKRdZkxCA3ueOFxJvwVKAw6b22gApPDDVySoQ@mail.gmail.com>

Hi list,

I was wondering if there is any support for reading DGN files using GDAL /
Java?

regards,

-- 
I.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/aa092707/attachment.html
From even.rouault at mines-paris.org  Wed Aug 31 08:38:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 31 19:02:31 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201108311413.53186.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr> <4E5D13FD.2000008@gov.yk.ca>
	<201108311413.53186.yjacolin@free.fr>
Message-ID: <1314794333.4e5e2b5d9fa0b@webmail.free.fr>

Selon Yves Jacolin <yjacolin@free.fr>:
> List,
>
> I successfully assigned my projection information but still have some
> difference in the file size. This is not so important but I wanted to
> understand
> the reason. Idea welcome :)

Yves,

You have a difference between the input file and the output file produced with
gdal_translate (not gdalwarp) with identical compression method and NBITS value,
right ? If the difference is in the order of a few hundred bytes, it might be
due to the way the TIFF directory is written (and perhaps rewritten), nothing
really to bother (from my developer point of view, the cost for "fixing" this
would scare me of, because of the complexity of dealing with this issue in the
GTiff driver while still being compatible with most active libtiff versions in
the wild). But it is a significant difference, then it is unexpected and it
would be indeed good to find the reason. You could provide a sample for further
examination if you cannot figure out the reason by yourself.

>
> Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1 Go
> each)
> and 2 ECW files (2 Go each). I worked first on 2 Go ECW file, it takes around
> 1
> day to assign the projection information in the files.
>
> Do you think this is normal? How can I improve this?

It sounds particularly slow indeed, even if it isn't totally unexexpected,
gdal_translate being a format agnostic tool, and when doing ECW -> ECW
transformation, it will decompress and recompress the data, which is not ideal
from a speed point of view and, in the case of lossy compression methods, from
the data integrity point of view. But a day for 2 ECW files is admitedly slow.
You might hit that ticket about ECW -> ECW slowness :
http://trac.osgeo.org/gdal/ticket/3454 . It contains a possible workaround
(altough you will find it quite ironic if you keep in memory what has been said
previously in this thread about gdalwarp being slower than gdal_translate ;-)).
Another solution if you only want to correct the projection information is to
use the "ECW Header Editor". I have never used that tool myself, but a search in
your favorite engine should bring some results. However it might not be
appropriate for batch processing.

Even

>
> Thanks.
>
> Y.
>
> Le mardi 30 ao?t 2011 18:46:53, Matt Wilkie a ?crit :
> > Yves,  it's best to use gdalwarp without any compression options and
> > then use gdal_translate as a last step to apply the compression. See
> > http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSi
> > sbroken for more.
> >
> > cheers,
> >
> > matt wilkie
> > --------------------------------------------
> > Geomatics Analyst
> > Information Management and Technology
> > Yukon Department of Environment
> > 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> > 867-667-8133 Tel * 867-393-7003 Fax
> > http://environmentyukon.gov.yk.ca/geomatics/
> > --------------------------------------------
> >
> > On 30/08/2011 4:22 AM, Yves Jacolin wrote:
> > > Hello,
> > >
> > > I am converting GTiff to GTiff in order to add projection and
> > > georeferencing information in the header. I am using gdalwarp with some
> > > flags, mailny -co flags. I have some question about this.
> > >
> > > Here is my command line:
> > >
> > > gdalwarp -co "COMPRESS=PACKBITS" -co "PHOTOMETRIC=MINISWHITE" -co
> > > "NBITS=1" - s_srs "EPSG:2154" -t_srs "EPSG:2154" input.tif output.tif
> > >
> > > 1.  File size: input.tif and output.tif have different file size, output
> > > file is 50 % bigger than the input file. Is it normal?
> > >
> > > 2. If I use gdalinfo on my output file, I have no information about
> > > MINISWHITE parameter while I have it in the input file. Am I using this
> > > creation option correctly? This issue could be related to the first
> > > item?
> > >
> > > 3. I also have a "AREA_OR_POINT=Area" item in my output from gdalinfo,
> > > what does it means?
> > >
> > > gdal version: GDAL 1.7.3, released 2010/11/10
> > >
> > > thanks,
> > >
> > > Y.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Yves Jacolin
>
> http://yjacolin.gloobe.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Wed Aug 31 08:41:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 31 19:05:34 2011
Subject: [gdal-dev] dgn support in gdal/java?
In-Reply-To: <CADz3VuUceWoHzaKRdZkxCA3ueOFxJvwVKAw6b22gApPDDVySoQ@mail.gmail.com>
References: <CADz3VuUceWoHzaKRdZkxCA3ueOFxJvwVKAw6b22gApPDDVySoQ@mail.gmail.com>
Message-ID: <1314794508.4e5e2c0c59e51@webmail.free.fr>

Selon Imran Rajjad <rajjad@gmail.com>:

> Hi list,
>
> I was wondering if there is any support for reading DGN files using GDAL /
> Java?

The Java bindings for GDAL/OGR should be able to deal with any format supported
by GDAL/OGR, DGN being one of those ( http://gdal.org/ogr/drv_dgn.html )

>
> regards,
>
> --
> I.R
>


From tang312 at gmail.com  Wed Aug 31 08:44:11 2011
From: tang312 at gmail.com (tang)
Date: Wed Aug 31 19:07:58 2011
Subject: [gdal-dev] question about build static gdal with visual studio
In-Reply-To: <4E5DD8C1.3070009@pobox.com>
References: <CADZaccNJtQyac73uO9bwz=d=yj331C7hkMKNyDh9zRmt1-nZmg@mail.gmail.com>
	<4E5D0036.90304@pobox.com>
	<CADZaccNv0roiOira+QQ84TimW0wVTe4buH3mqZFpMNmhMc2vaQ@mail.gmail.com>
	<4E5DD8C1.3070009@pobox.com>
Message-ID: <CADZaccM_NibD1bxAPgFfDuDDgSY17D-Z5U-YEM9RHzfRm=v5jQ@mail.gmail.com>

 It seems that gdal always links it's applications to dynamic lib. at last I
change the makefile.vc in the app folder with below lines.
!IFDEF DLLBUILD
LIBS = $(GDAL_ROOT)\gdal_i.lib
!ELSE
LIBS = $(GDAL_ROOT)\gdal.lib $(GDAL_ROOT)\ogr\ogr.lib
$(GDAL_ROOT)\port\cpl.lib $(GDAL_ROOT)\ogr\ogrsf_frmts\ogrsf_frmts.lib
$(ODBCLIB) $(CURL_LIB) $(TIFF_LIB) $(JPEG_LIB) $(PNG_LIB) $(GEOS_LIB)
!ENDIF
then the applications can run with out gdal18.dll.
  Best regards!  and thank you !

On Wed, Aug 31, 2011 at 2:46 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-08-30 06:58 PM, tang wrote:
>
>> Thanks a lot for your replay!
>>
>>     I got the gdal.lib,but while I link the program to this lib,it still
>> needs
>> gdal18.dll. this confused me . I had tried to   comment out   DLLBUILD=1
>>  ,
>> but the commandline programs need   gdal18.dll too.   even replacing all
>> gdal_i.lib with gdal.lib helps nothing.
>>     I know little about  nmake/cl/link, whitch are used in  the gdal's  vs
>> slution.  It seems in linux configure we can build static gdal with
>> --enalbe-static,but I don?t know how to do this in VS nmake.
>>      Best regards!  and thank you again!
>>
>
> Tang,
>
> Well, it took me a while, but I did a default build with MSVC2008 Express
> on windows with GDAL 1.8.1 and then issued this command from within the
>
> cl /MD apps/gdalinfo.c gdal.lib /Ilib /Igcore /Iport /Ialg /Iogr
> /Iogr/ogrsf_frmts
>
> This produced a 4MB gdalinfo.exe (statically linked) that works fine.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/90c42418/attachment.html
From zoltans at geograph.co.za  Wed Aug 31 08:47:54 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Aug 31 19:28:36 2011
Subject: [gdal-dev] dgn support in gdal/java?
In-Reply-To: <1314794508.4e5e2c0c59e51@webmail.free.fr>
References: <CADz3VuUceWoHzaKRdZkxCA3ueOFxJvwVKAw6b22gApPDDVySoQ@mail.gmail.com>
	<1314794508.4e5e2c0c59e51@webmail.free.fr>
Message-ID: <4E5E2D7A.8030702@geograph.co.za>

On 2011/08/31 14:41, Even Rouault wrote:
> Selon Imran Rajjad<rajjad@gmail.com>:
>
>> Hi list,
>>
>> I was wondering if there is any support for reading DGN files using GDAL /
>> Java?
> The Java bindings for GDAL/OGR should be able to deal with any format supported
> by GDAL/OGR, DGN being one of those ( http://gdal.org/ogr/drv_dgn.html )
Take special note: _*pre*_ v8.0 DGN files only.
>
>> regards,
>>
>> --
>> I.R
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/b5df6ee0/attachment.html
From Martin.Sommer at cassidian.com  Wed Aug 31 08:53:52 2011
From: Martin.Sommer at cassidian.com (Sommer, Martin)
Date: Wed Aug 31 19:32:07 2011
Subject: [gdal-dev] VPF support
In-Reply-To: <4E5DDA0F.6040806@pobox.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
	<4E5DDA0F.6040806@pobox.com>
Message-ID: <4AF8778B5747C44783C6D046C9819B6C01B2D24D@GSX703A.mxchg.m.corp>

Yehiyam,

current OGDI sources (betas) need a bit of tweaking, if you want it to build yourself.
Version 3.1.5 is far way better to build.

Best regards
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, August 31, 2011 8:52 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] VPF support

On 11-08-30 11:24 PM, Livneh Yehiyam wrote:
> Hi
> I understand that for GDAL to support reading VPF files, I need to have the
> OGDI driver.
> Are there prebuilt binaries for windows 64 bit which include OGDI?
> Are there prebuilt binaries of OGDI itself, which I can use to build GDAL with
> that driver?
> thanks

Yehiyam,

The OSGeo4W binaries for GDAL 1.8 include OGDI support.

   http://osgeo4w.osgeo.org/

I can be a bit involved to build OGDI yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hitweiran at sina.com  Wed Aug 31 09:46:56 2011
From: hitweiran at sina.com (hitweiran)
Date: Wed Aug 31 20:14:06 2011
Subject: [gdal-dev] Re: The problem when using ReadRaster(C#) method
In-Reply-To: <CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
References: <1314784144569-6745826.post@n2.nabble.com>
	<CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
Message-ID: <1314798416278-6746581.post@n2.nabble.com>

Thank for both of you, I will try according to your suggestion. 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6746581.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Martin.Spott at mgras.net  Wed Aug 31 09:52:39 2011
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Aug 31 20:20:09 2011
Subject: [gdal-dev] VPF support
References: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
	<4AF8778B5747C44783C6D046C9819B6C01B2D24D@GSX703A.mxchg.m.corp>
Message-ID: <j3leb7$9k00$1@osprey.mgras.de>

"Sommer, Martin" wrote:

> current OGDI sources (betas) need a bit of tweaking, if you want it to build yourself.
> Version 3.1.5 is far way better to build.

It's just an imprecise annotation, yet I'd like to share my findings
with you that the simple joy of getting an OGDI library built without
errors doesn't necessarily yield a working result.

Everybody who ever had a look at the VMap0 land cover data is familiar
with the 'usual' voids in northern Africa, middle east and Asia.  Yet,
when converting VMap0 into Shapefiles using the "3.2" version of OGDI
which is included in Linux Debian/AMD64, I've encountered many more
void areas then I was used to.
As a consequence I built OGDI 3.1.5 on 32 bit Linux in order to get the
familiar results.  I have to admit that I forgot wether the difference
was due to the OGDI version or some 32/64 bit mismatch.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From hitweiran at sina.com  Wed Aug 31 10:01:07 2011
From: hitweiran at sina.com (hitweiran)
Date: Wed Aug 31 20:29:02 2011
Subject: [gdal-dev] Re: The problem when using ReadRaster(C#) method
In-Reply-To: <1314789720.4e5e195876c0a@webmail.free.fr>
References: <1314784144569-6745826.post@n2.nabble.com>
	<CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
	<1314789720.4e5e195876c0a@webmail.free.fr>
Message-ID: <1314799267048-6746656.post@n2.nabble.com>

I am sure the original data is available, because I see the imges in ENVI and
have loaded it to MATLAB, so how can I inspect the values by
gdallocationinfo??Thanks !

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6746656.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yehil at rafael.co.il  Wed Aug 31 10:05:10 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Aug 31 20:34:44 2011
Subject: [gdal-dev] VPF support
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A2677260A9@MAILBOXSERVER.rf.local>

Thank you for all the insight. I guess I will try to build 3.1.5 or take the precompiled from OSGeo4W.

Sent from my mobile


-----------------------------
From: "Martin Spott"
Subject: Re: [gdal-dev] VPF support
Date: 31 ?????? 2011 16:51


"Sommer, Martin" wrote:

> current OGDI sources (betas) need a bit of tweaking, if you want it to build yourself.
> Version 3.1.5 is far way better to build.

It's just an imprecise annotation, yet I'd like to share my findings
with you that the simple joy of getting an OGDI library built without
errors doesn't necessarily yield a working result.

Everybody who ever had a look at the VMap0 land cover data is familiar
with the 'usual' voids in northern Africa, middle east and Asia.  Yet,
when converting VMap0 into Shapefiles using the "3.2" version of OGDI
which is included in Linux Debian/AMD64, I've encountered many more
void areas then I was used to.
As a consequence I built OGDI 3.1.5 on 32 bit Linux in order to get the
familiar results.  I have to admit that I forgot wether the difference
was due to the OGDI version or some 32/64 bit mismatch.

Cheers,
        Martin.
--
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

f
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/e642d125/attachment.html
From yjacolin at free.fr  Wed Aug 31 09:58:26 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Aug 31 21:05:17 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <1314794333.4e5e2b5d9fa0b@webmail.free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<201108311413.53186.yjacolin@free.fr>
	<1314794333.4e5e2b5d9fa0b@webmail.free.fr>
Message-ID: <201108311558.26452.yjacolin@free.fr>

Hello Even,

Le mercredi 31 ao?t 2011 14:38:53, Even Rouault a ?crit :
> Selon Yves Jacolin <yjacolin@free.fr>:
> > List,
> > 
> > I successfully assigned my projection information but still have some
> > difference in the file size. This is not so important but I wanted to
> > understand
> > the reason. Idea welcome :)
> 
> Yves,
> 
> You have a difference between the input file and the output file produced
> with gdal_translate (not gdalwarp) with identical compression method and
> NBITS value, right ? [..]

hum my apologies, I mixed my files from gdalwarp and gdal_translate or there is 
an improvement for gdal_transalte from GDAL 1.6.0 (my desktop) to GDAL 1.8.0 
(on my server).

> > Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1 Go
> > each)
> > and 2 ECW files (2 Go each). I worked first on 2 Go ECW file, it takes
> > around 1
> > day to assign the projection information in the files.
> > 
> > Do you think this is normal? How can I improve this?
> 
> It sounds particularly slow indeed, even if it isn't totally unexexpected,
> gdal_translate being a format agnostic tool, and when doing ECW -> ECW
> transformation, it will decompress and recompress the data, which is not
> ideal from a speed point of view and, in the case of lossy compression
> methods, from the data integrity point of view. But a day for 2 ECW files
> is admitedly slow. You might hit that ticket about ECW -> ECW slowness :
> http://trac.osgeo.org/gdal/ticket/3454 . It contains a possible workaround
> (altough you will find it quite ironic if you keep in memory what has been
> said previously in this thread about gdalwarp being slower than
> gdal_translate ;-)). Another solution if you only want to correct the
> projection information is to use the "ECW Header Editor". I have never
> used that tool myself, but a search in your favorite engine should bring
> some results. However it might not be appropriate for batch processing.

Interesting, I will test with gdalwarp soon. I don't know if it could be a 
problem but I am using VRT format. I saw in one of your comment in GeoRezo 
forum that it could be faster thant a direct ECW to ECW conversion. Am I 
right?

I also find this script http://jrepetto.free.fr/ecwhed/ which seems usefull, 
but I have not test it yet.

"ECW Header Editor" doesn't work on Linux or in batch mode :/

Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From hitweiran at sina.com  Wed Aug 31 10:37:57 2011
From: hitweiran at sina.com (hitweiran)
Date: Wed Aug 31 21:07:54 2011
Subject: [gdal-dev] Re: The problem when using ReadRaster(C#) method
In-Reply-To: <CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
References: <1314784144569-6745826.post@n2.nabble.com>
	<CACALY+Qemku6B64xiA6y75shXKhhTpXShmeVo3SNXNDJtK1H5A@mail.gmail.com>
Message-ID: <1314801477683-6746802.post@n2.nabble.com>

Tams:
    I extract the first band of that multiband image and save it as another
img file, then the read to that single band is successful ! So maybe the
mistake is due to the code get first band?    

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/The-problem-when-using-ReadRaster-C-method-tp6745826p6746802.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Aug 31 10:45:09 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Aug 31 21:15:28 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <201108311413.53186.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr> <4E5D13FD.2000008@gov.yk.ca>
	<201108311413.53186.yjacolin@free.fr>
Message-ID: <4E5E48F5.7020106@free.fr>

Le 31/08/2011 14:13, Yves Jacolin a ?crit :
>
> Another question: I have 2 000 ECW files (40 Mo each), 49 ECW files (1 Go each)
> and 2 ECW files (2 Go each). I worked first on 2 Go ECW file, it takes around 1
> day to assign the projection information in the files.
>
> Do you think this is normal? How can I improve this?

Since you are using Linux, you may be interested in a tool I wrote a few 
years ago :
http://jrepetto.free.fr/ecwhed/

You can compile it manually by a command such as :
g++ -o ecwhed -l pthread  ecwhed.cpp /usr/lib64/libecwj2.a

( The standard procedure ./configure; make; make install is not working 
anymore. If you know the autotools, may be you can fix it).

Jean-Claude
From member at linkedin.com  Wed Aug 31 11:05:12 2011
From: member at linkedin.com (sn jo via LinkedIn)
Date: Wed Aug 31 21:37:33 2011
Subject: [gdal-dev] Invitation to connect on LinkedIn
Message-ID: <557411855.2035778.1314803112519.JavaMail.app@ela4-app0134.prod>

LinkedIn
------------




    sn jo requested to add you as a connection on LinkedIn:
  
------------------------------------------

Brian,

I'd like to add you to my professional network on LinkedIn.

- sn

Accept invitation from sn jo
http://www.linkedin.com/e/-irq4iu-gs0ftqgd-62/vLKzdCgJPeu5C9tr8tebARb1PEH68MCNUB3xWf/blk/I165664852_15/1BpC5vrmRLoRZcjkkZt5YCpnlOt3RApnhMpmdzgmhxrSNBszYRclYOdjwQdzoRdz59bTwQtShxr39UbPoMcP0Pe38Qc3gLrCBxbOYWrSlI/EML_comm_afe/

View invitation from sn jo
http://www.linkedin.com/e/-irq4iu-gs0ftqgd-62/vLKzdCgJPeu5C9tr8tebARb1PEH68MCNUB3xWf/blk/I165664852_15/3kNnP8Re3gSdzkSckALqnpPbOYWrSlI/svi/

------------------------------------------

Why might connecting with sn jo be a good idea?

People sn jo knows can discover your profile:
Connecting to sn jo will attract the attention of LinkedIn users. See who's been viewing your profile:

http://www.linkedin.com/e/-irq4iu-gs0ftqgd-62/wvp/inv18_wvmp/
 
-- 
(c) 2011, LinkedIn Corporation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/bf0943bc/attachment-0001.html
From yjacolin at free.fr  Wed Aug 31 11:18:35 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Aug 31 21:51:35 2011
Subject: [gdal-dev] GTiff optimisation
In-Reply-To: <1314794333.4e5e2b5d9fa0b@webmail.free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<201108311413.53186.yjacolin@free.fr>
	<1314794333.4e5e2b5d9fa0b@webmail.free.fr>
Message-ID: <201108311718.35645.yjacolin@free.fr>

Le mercredi 31 ao?t 2011 14:38:53, Even Rouault a ?crit :
> It contains a possible workaround
> (altough you will find it quite ironic if you keep in memory what has been
> said previously in this thread about gdalwarp being slower than
> gdal_translate ;-)).
ouaaah, indeed it is really fast, the first file is not finished yet that the 
second one is already done.

Ok that's fine but my file is 50 % lighter than the input file :) It could be ok 
if the output file looks the same than the input file, but it does not. I 
suspect a compress option different. The documentation doesn't give any 
information about this. Can the user act on some creation option for ECW 
format with gdal_translate?

Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From even.rouault at mines-paris.org  Wed Aug 31 13:38:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 00:18:16 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <201108311718.35645.yjacolin@free.fr>
References: <201108301322.46312.yjacolin@free.fr>
	<1314794333.4e5e2b5d9fa0b@webmail.free.fr>
	<201108311718.35645.yjacolin@free.fr>
Message-ID: <201108311938.33298.even.rouault@mines-paris.org>

Le mercredi 31 ao?t 2011 17:18:35, Yves Jacolin a ?crit :
> Le mercredi 31 ao?t 2011 14:38:53, Even Rouault a ?crit :
> > It contains a possible workaround
> > (altough you will find it quite ironic if you keep in memory what has
> > been said previously in this thread about gdalwarp being slower than
> > gdal_translate ;-)).
> 
> ouaaah, indeed it is really fast, the first file is not finished yet that
> the second one is already done.
> 
> Ok that's fine but my file is 50 % lighter than the input file :) It could
> be ok if the output file looks the same than the input file, but it does
> not. I suspect a compress option different. The documentation doesn't give
> any information about this. Can the user act on some creation option for
> ECW format with gdal_translate?

http://gdal.org/frmt_ecw.html mentions that the default target size reduction 
is 95% (TARGET creation option). You might want to lower it. If you want your 
output file to have the same size as your input ECW file, you should try
TARGET = 100 - input_ecw_file_size_in_bytes / (width * height * 
number_of_bands)

But the ecwhdr utility that Jean-Claude mentionned is really what you would 
want to use, if you indeed just want to alter the projection info and/or 
georeferenced bounds. I thought that there was only a Erdas utility to achieve
that, cool to see that it can be done with the SDK API. This gives me the idea 
that the ECW driver could be enhanced to implement the SetGeoTransform() and 
SetProjection() API, as well as some special metadata (likely PROJ and DATUM 
to be consistant with the creation options) through SetMetadataItem() to 
explicitely set the datum and projection codes. Then a simple python script 
could use those new capabilities to offer a service equivalent to the one of 
the ecwhdr utility. This would have the advantage of being available through 
GDAL as soon as the ECW driver has been compiled. I think I'm going to give it 
a try.

> 
> Thanks,
> 
> Y.
From bellengj at gmail.com  Wed Aug 31 14:55:57 2011
From: bellengj at gmail.com (Jim Bellenger)
Date: Thu Sep  1 01:40:02 2011
Subject: [gdal-dev] What are the arguments to gdalwarp to cross the date
	line?
Message-ID: <CAGtt-4769hmpXihDvqqiMLFC7gK0hPfUqnDm1OO1PSDqsymzCw@mail.gmail.com>

Hello,

I have a Lambert Conformal Conic image that crosses the 180 dateline and I
want to gdalwarp to a latlong projection.  The result image wraps around the
globe instead of just crossing the dateline.  It seems to be a problem with
the western hemisphere because I have tried a "-te" option with both
hemispheres and the eastern (positive longitude) hemisphere works fine but
not the western hemisphere (negative longitude) always wraps around the
globe.  I have tried a +over and +lon_wrap=180 arguments with no success.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/c0d3a377/attachment.html
From pcreso at pcreso.com  Wed Aug 31 15:22:27 2011
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Thu Sep  1 02:10:04 2011
Subject: [gdal-dev] What are the arguments to gdalwarp to cross the date
	line?
In-Reply-To: <CAGtt-4769hmpXihDvqqiMLFC7gK0hPfUqnDm1OO1PSDqsymzCw@mail.gmail.com>
Message-ID: <1314818547.13079.YahooMailClassic@web160716.mail.bf1.yahoo.com>

Hi Jim,

proj.4 (cs2cs) has a parameter to force lat long coords into a +-180 or 0-360 space by specifying the output central meridian.

>From the proj.4 changelog:
2006-10-12? Frank Warmerdam? <warmerdam@pobox.com>

??? * Added experimental +lon_wrap argument to set a "center point" for 
??? longitude wrapping of longitude values coming out of pj_transform().

This defaults to zero, for +-180 but can also be set to 180 for 0-360. I don't know if you can do the same with GDAL.

You also have the option of cropping the dataset to generate two images, one each side of the dateline, and the one in the western hemisphere can be assigned coords in the +-180 or 0-360 space as you see fit to render correctly in your application.

I have done this routinely with MODIS imagery.

Cheers,

? Brent Wood

--- On Thu, 9/1/11, Jim Bellenger <bellengj@gmail.com> wrote:

From: Jim Bellenger <bellengj@gmail.com>
Subject: [gdal-dev] What are the arguments to gdalwarp to cross the date line?
To: gdal-dev@lists.osgeo.org
Date: Thursday, September 1, 2011, 6:55 AM

Hello,
?
I have a Lambert Conformal Conic image that crosses the 180 dateline and?I want to gdalwarp to a latlong projection.? The result image?wraps around the globe instead of just crossing the dateline.? It seems to be a problem with the western hemisphere because I have tried a "-te" option with both hemispheres and the eastern (positive longitude) hemisphere works fine but not the western hemisphere (negative longitude) always wraps around the globe.? I have tried a +over and +lon_wrap=180 arguments with no success.

?
Jim

-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110831/8eeb14ee/attachment.html
From even.rouault at mines-paris.org  Wed Aug 31 15:30:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 02:16:24 2011
Subject: [gdal-dev] VPF support
In-Reply-To: <j3leb7$9k00$1@osprey.mgras.de>
References: <C5D1974ECA44D2429ECBC64B967C34C0A26B070D6B@MAILBOXSERVER.rf.local>
	<4AF8778B5747C44783C6D046C9819B6C01B2D24D@GSX703A.mxchg.m.corp>
	<j3leb7$9k00$1@osprey.mgras.de>
Message-ID: <201108312130.17808.even.rouault@mines-paris.org>

Le mercredi 31 ao?t 2011 15:52:39, Martin Spott a ?crit :
> "Sommer, Martin" wrote:
> > current OGDI sources (betas) need a bit of tweaking, if you want it to
> > build yourself. Version 3.1.5 is far way better to build.
> 
> It's just an imprecise annotation, yet I'd like to share my findings
> with you that the simple joy of getting an OGDI library built without
> errors doesn't necessarily yield a working result.
> 
> Everybody who ever had a look at the VMap0 land cover data is familiar
> with the 'usual' voids in northern Africa, middle east and Asia.  Yet,
> when converting VMap0 into Shapefiles using the "3.2" version of OGDI
> which is included in Linux Debian/AMD64, I've encountered many more
> void areas then I was used to.
> As a consequence I built OGDI 3.1.5 on 32 bit Linux in order to get the
> familiar results.  I have to admit that I forgot wether the difference
> was due to the OGDI version or some 32/64 bit mismatch.

Hum, your statement stroke me, so I did a bit of testing with a Linux 32bit 
build of ogdi 3.1.5 vs ogdi 3.2.0beta2 used by GDAL. My test dataset is the 
eurnasia VMAP0 dataset.

The protocol was :

OGR_OGDI_LAUNDER_LAYER_NAMES=YES 
LD_LIBRARY_PATH=$PWD:/home/even/gdal/svn/32bit/trunk/gdal/install-
ogdi-3.1.5/lib apps/ogrinfo 
gltp:/vrf//home/even/gdal/data/vmap/v0eur/vmaplv0/eurnasia -ro | awk '{print 
$2}' > layers.txt

for i in `cat layers.txt`; do echo $i; OGR_OGDI_LAUNDER_LAYER_NAMES=YES 
LD_LIBRARY_PATH=$PWD:/home/even/gdal/svn/32bit/trunk/gdal/install-
ogdi-3.1.5/lib apps/ogrinfo 
gltp:/vrf//home/even/gdal/data/vmap/v0eur/vmaplv0/eurnasia -ro -q $i -
geom=SUMMARY > 315/$i.txt; done

for i in `cat layers.txt`; do echo $i; OGR_OGDI_LAUNDER_LAYER_NAMES=YES 
LD_LIBRARY_PATH=$PWD:/home/even/gdal/svn/32bit/trunk/gdal/install-
ogdi-3.2.0beta2/lib apps/ogrinfo 
gltp:/vrf//home/even/gdal/data/vmap/v0eur/vmaplv0/eurnasia -ro -q $i -
geom=SUMMARY > 320beta2/$i.txt; done

The only differences I could observe are slight precision differences in the 
coordinates of the geometry reported, and 2 missing features in the 3.2.0beta2 
on watrcrsl@hydro(*)_line layer. Those 2 missing features are :

OGRFeature(watrcrsl@hydro(*)_line):187392
  id (Integer) = 187393
  f_code (String) = BH140
  hyc (Integer) = 6
  nam (String) = UNK
  tile_id (Integer) = 24
  edg_id (Integer) = 9219
  LINESTRING (13.68719482421875 30.0,13.691277503967285 30.0)

and

OGRFeature(watrcrsl@hydro(*)_line):193488
  id (Integer) = 193489
  f_code (String) = BH140
  hyc (Integer) = 6
  nam (String) = UNK
  tile_id (Integer) = 25
  edg_id (Integer) = 7800
  LINESTRING (16.324306488037109 30.0,16.322221755981445 30.0)

I'm not sure why there is that difference, but this certainly doesn't account 
for large voids you could observe.

So perhaps the issue you saw was specifically a 64bit issue.

> 
> Cheers,
> 	Martin.
From etiennesky at yahoo.com  Wed Aug 31 16:05:11 2011
From: etiennesky at yahoo.com (Etienne Tourigny)
Date: Thu Sep  1 02:53:10 2011
Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF
	driver and CF-1 convention
In-Reply-To: <1308916252.76198.1314764634797.JavaMail.root@mail.vpac.org>
References: <1266305873.76196.1314764502989.JavaMail.root@mail.vpac.org>
	<1308916252.76198.1314764634797.JavaMail.root@mail.vpac.org>
Message-ID: <1314821111.88515.YahooMailNeo@web36903.mail.mud.yahoo.com>

Hendy

1)


I added an item on the wiki page under I/O issues, can you make a detailed ticket and link to it on the wiki?



In the mean time, please use Even's suggestion of using an intermediary format such as VRT.

* Support Create() method so that gdalwarp can be used on a netcdf file

It's not as simple as it may seem, because all modifications to the netcdf file (not internal gdal information) are done only in the CreateCopy() function.? in Create() you don't have information on geotransform and projection, nor raster bands.? A flag could indicate if projection/geotransform need to be written after it has been changed.? To avoid code de-duplication, the code in NCDFCreateCopy() related to projection/geotransform could be moved to a new function like SetNetcdfDimensions().? The RasterIO issues that Even mentioned can also be challenging.


2) 

I assume your file is in a projected CRS?In any case, the current implementation is not 100% CF compliant.? GDAL can read them (through custom tags), but other software cannot.?? I have submitted a patch to fix geographic CRS only.
?
Please add this information to existing bug #2893 (which I have renamed tonetcdf driver does not read and write CF-1.0 coordinate system properly for projected CRS), along with your file (which was stripped by the mailing list)

BTW, there is a nifty CF compliance checker (python script and online checker) which I have added to the wiki. Please test your file with it. It's possible that lambert_conformal_conic:standard_parallel_1 is valid CF, it needs to be tested.


Regards,
Etienne




----- Original Message -----
From: Hendy Sumanto <hsumanto@vpac.org>
To: gdal-dev@lists.osgeo.org
Cc: 
Sent: Wednesday, August 31, 2011 1:23:54 AM
Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention

Hi Etienne,

I have a few items which I would like to put as new topics in the wiki entry but I think I better describe them here first before putting any entry or creating tickets.

1. As part of the improvement to the NetCDF driver, is it possible to make request to implement the Create method for the driver so that tool such as gdalwarp can output as NetCDF output.

2. Recently I was trying to serve the NetCDF dataset (which were created by gdal_translate geotiff LANDSAT dataset into NetCDF)
using THREDDS data server. When I try to access it via WMS using viewer such as Godiva2, I was not able to view the dataset correctly.

When I used the netCDF toolsUI to check the NetCDF dataset, it is not recognized as a grid by NetCDF Tools (4.2).? 

Looking at this documentation (http://www.unidata.ucar.edu/software/netcdf-java/reference/StandardCoordinateTransforms.html),
in order for grid data to be viewable, the NetCDF dataset must:
a) define x and y projection coordinate variables, using the correct projection units, typically km on the projection plane.
b) define your projection dummy variable which has an attribute "grid_mapping_name"
c) refer to the projection in your data variables with the "grid_mapping" attribute.

Checking on the GDAL netCDF, it only define x and y dimensions but not x and y projection coordinate variables (point a is not followed).

Thus, I wondering whether other people have experienced the same issue as what I am having.

Then I just tried to: 
-generate its CDL by ncdump the GDAL netCDF file into CDL
-and the define x and y projection coordinate variables (as shown below) into the CDL
? ? double y(y) ;
? ? ? ? y:units = "m" ;
? ? ? ? y:standard_name = "projection_y_coordinate" ;
? ? ? ? y:long_name = "y coordinate of projection" ;
? ? double x(x) ;
? ? ? ? x:units = "m" ;
? ? ? ? x:standard_name = "projection_x_coordinate" ;
? ? ? ? x:long_name = "x coordinate of projection" ;
-regenerate the netCDF file from the modified CDL using ncgen
-populate the y coordinate variable in the NetCDF file with
? ? ? ? ymin, ymin+resolution, ymin+2*resolution, ...
-populate the x coordinate variable with
? ? ? ? xmin, xmin+resolution, xmin+2*resolution, ...
-if I then serve the modified NetCDF dataset again using THREDDS data server, now it can be viewed correctly.

Note: xmin, ymin are the lower left corner and resolution is the raster pixel size.

Thus, my questions:
i)Is there a specific reason why the current driver do not define the x and y projection coordinate variables but only defining x and y dimensions. 
For the dataset to be viewable using tools such as netCDF toolsUI or when the dataset are served via THREDDS dataset, we might have to add projection coordinate variables and the correct values
into the netCDF file.
ii)For lambert conformal conic projection with more than one standard parallel values, GDAL netCDF file is showing 
lambert_conformal_conic:standard_parallel_1 = -18.f ;
lambert_conformal_conic:standard_parallel_2 = -36.f ;
but the correct one (for the dataset to be viewable using toolsUI or THREDDS) should be
lambert_conformal_conic:standard_parallel = -18.f,-36.f ; 

Could you please please comment on 1, 2(i) and 2(ii)? 

The attached files:
tile.nc - GDAL netCDF file
tile-fixed-new.nc - the one I just tried to fix and can be viewed in netCDF toolsUI or served in THREDDS

Regards,

Hendy

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From elijah at villagis.com  Wed Aug 31 16:44:55 2011
From: elijah at villagis.com (Elijah Robison)
Date: Thu Sep  1 03:34:29 2011
Subject: [gdal-dev] ogr2ogr - output WKT to console?
Message-ID: <4E5E9D47.9010107@villagis.com>

Hi Devs,

When troubleshooting geodata integrity issues, we sometimes use ogr2ogr 
to push WKT expressions to a .csv file using a script like I show below. 
It uses an ogr sql statement to grab a single feature from a raw 
shapefile data source, then it saves the output to a CSV:

ogr2ogr -f "CSV" "C:\xData\CountyData\Shps\OriginalParcelCSV" 
"C:\xData\CountyData\Shps\parcel_polygons.shp" -sql "select * from 
parcel_polygons where id= 9080" -lco "GEOMETRY=AS_WKT" -lco 
"LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"

As our needs in this situation are very transient, I'm curious if it is 
possible to output the WKT directly to the console?

Very Best,

Elijah Robison
elijah@villagis.com
From even.rouault at mines-paris.org  Wed Aug 31 16:52:21 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 03:43:04 2011
Subject: [gdal-dev] ogr2ogr - output WKT to console?
In-Reply-To: <4E5E9D47.9010107@villagis.com>
References: <4E5E9D47.9010107@villagis.com>
Message-ID: <201108312252.22043.even.rouault@mines-paris.org>

Le mercredi 31 ao?t 2011 22:44:55, Elijah Robison a ?crit :
> Hi Devs,
> 
> When troubleshooting geodata integrity issues, we sometimes use ogr2ogr
> to push WKT expressions to a .csv file using a script like I show below.
> It uses an ogr sql statement to grab a single feature from a raw
> shapefile data source, then it saves the output to a CSV:
> 
> ogr2ogr -f "CSV" "C:\xData\CountyData\Shps\OriginalParcelCSV"
> "C:\xData\CountyData\Shps\parcel_polygons.shp" -sql "select * from
> parcel_polygons where id= 9080" -lco "GEOMETRY=AS_WKT" -lco
> "LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"
> 
> As our needs in this situation are very transient, I'm curious if it is
> possible to output the WKT directly to the console?

Yes, as a output filename, you can use the special name /vsistdout/ (you need 
the trailing slash) . You likely need GDAL 1.8 or later for it to work.

> 
> Very Best,
> 
> Elijah Robison
> elijah@villagis.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Wed Aug 31 17:02:53 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  1 03:54:08 2011
Subject: [gdal-dev] ogr2ogr - output WKT to console?
In-Reply-To: <201108312252.22043.even.rouault@mines-paris.org>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBedmVv2-3TByVopq68sub=uHT9+_jSKg34ciNYjRuCOqw@mail.gmail.com>

On Wed, Aug 31, 2011 at 1:52 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mercredi 31 ao?t 2011 22:44:55, Elijah Robison a ?crit :
>> Hi Devs,
>>
>> When troubleshooting geodata integrity issues, we sometimes use ogr2ogr
>> to push WKT expressions to a .csv file using a script like I show below.
>> It uses an ogr sql statement to grab a single feature from a raw
>> shapefile data source, then it saves the output to a CSV:
>>
>> ogr2ogr -f "CSV" "C:\xData\CountyData\Shps\OriginalParcelCSV"
>> "C:\xData\CountyData\Shps\parcel_polygons.shp" -sql "select * from
>> parcel_polygons where id= 9080" -lco "GEOMETRY=AS_WKT" -lco
>> "LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"
>>
>> As our needs in this situation are very transient, I'm curious if it is
>> possible to output the WKT directly to the console?
>
> Yes, as a output filename, you can use the special name /vsistdout/ (you need
> the trailing slash) . You likely need GDAL 1.8 or later for it to work.

Elijah,

It also seems like a suitable job for ogrinfo.  It reports geometry as
WKT to the console, and you can use -sql, -where, -spat and -fid
mechanisms to select features of interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From peifer at gmx.eu  Wed Aug 31 17:08:36 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep  1 04:00:17 2011
Subject: [gdal-dev] Re: ogr2ogr - output WKT to console?
In-Reply-To: <201108312252.22043.even.rouault@mines-paris.org>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
Message-ID: <4E5EA2D4.30803@gmx.eu>

On 31/08/2011 22:52, Even Rouault wrote:
>
> Yes, as a output filename, you can use the special name /vsistdout/ (you need
> the trailing slash) . You likely need GDAL 1.8 or later for it to work.
>

Even,

Thanks for the hint. Is there a specific reason why the csv driver isn't 
able to use /dev/stdout, similar to the kml driver [1] ?

Hermann

[1]

$ ogr2ogr -f kml /dev/stdout test.shp
<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document><Folder><name>test</name>
<Schema name="test" id="test">
         <SimpleField name="Name" type="string"></SimpleField>
         <SimpleField name="Description" type="string"></SimpleField>
         <SimpleField name="Latitude" type="string"></SimpleField>
         <SimpleField name="Longitude" type="string"></SimpleField>
         <SimpleField name="Value" type="string"></SimpleField>
</Schema>
   <Placemark>
         <name>First point</name>
         <ExtendedData><SchemaData schemaUrl="#test">
                 <SimpleData name="Name">First point</SimpleData>
                 <SimpleData name="Latitude">50</SimpleData>
                 <SimpleData name="Longitude">50</SimpleData>
                 <SimpleData name="Value">1</SimpleData>
         </SchemaData></ExtendedData>
       <Point><coordinates>50,50</coordinates></Point>
   </Placemark>
(...)
From even.rouault at mines-paris.org  Wed Aug 31 17:28:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 04:20:45 2011
Subject: [gdal-dev] Re: ogr2ogr - output WKT to console?
In-Reply-To: <4E5EA2D4.30803@gmx.eu>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EA2D4.30803@gmx.eu>
Message-ID: <201108312328.03774.even.rouault@mines-paris.org>

Le mercredi 31 ao?t 2011 23:08:36, Hermann Peifer a ?crit :
> On 31/08/2011 22:52, Even Rouault wrote:
> > Yes, as a output filename, you can use the special name /vsistdout/ (you
> > need the trailing slash) . You likely need GDAL 1.8 or later for it to
> > work.
> 
> Even,
> 
> Thanks for the hint. Is there a specific reason why the csv driver isn't
> able to use /dev/stdout, similar to the kml driver [1] ?

Because the CSV driver is a bit more complex with its processing of files and 
directories and requires special processing for the /vsistdout/ case in a few 
places to avoid trying random access IO. But it was easy to also support 
/dev/stdout as an alias for /vsistdout/. Added in r23016.

The advantage of /vsistdout/ is that is portable (within the GDAL world) for 
non-Unix OSs.

> 
> Hermann
> 
> [1]
> 
> $ ogr2ogr -f kml /dev/stdout test.shp
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://www.opengis.net/kml/2.2">
> <Document><Folder><name>test</name>
> <Schema name="test" id="test">
>          <SimpleField name="Name" type="string"></SimpleField>
>          <SimpleField name="Description" type="string"></SimpleField>
>          <SimpleField name="Latitude" type="string"></SimpleField>
>          <SimpleField name="Longitude" type="string"></SimpleField>
>          <SimpleField name="Value" type="string"></SimpleField>
> </Schema>
>    <Placemark>
>          <name>First point</name>
>          <ExtendedData><SchemaData schemaUrl="#test">
>                  <SimpleData name="Name">First point</SimpleData>
>                  <SimpleData name="Latitude">50</SimpleData>
>                  <SimpleData name="Longitude">50</SimpleData>
>                  <SimpleData name="Value">1</SimpleData>
>          </SchemaData></ExtendedData>
>        <Point><coordinates>50,50</coordinates></Point>
>    </Placemark>
> (...)
From elijah at villagis.com  Wed Aug 31 18:19:52 2011
From: elijah at villagis.com (Elijah Robison)
Date: Thu Sep  1 05:14:31 2011
Subject: [gdal-dev] ogr2ogr - output WKT to console?
In-Reply-To: <201108312252.22043.even.rouault@mines-paris.org>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
Message-ID: <4E5EB388.4090202@villagis.com>

Rad. :)

Thanks, Even.

It took me a few minutes to realize that -f "CSV" still applied --- but 
now I'm catching on. I presume the following statement is true:

The special "/vsistdout/" file path will output ogr2ogr results directly 
to the console, provided the output type is a text-based format for 
which OGR supports dataset creation.

I wonder about that text-based caveat, but I wasn't able to push a 
shapefile to the console (and didn't expect to), yet I /was /able to 
push several pure text formats to the console.

For those keeping score, and for posterity within the nabble list cache, 
the following redactions of my initial ogr2ogr script send their result 
set directly to the console:

ogr2ogr -f "CSV" "/vsistdout/" 
"C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from 
feb16_polygons where objectid= 2126" -lco "GEOMETRY=AS_WKT" -lco 
"LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"

ogr2ogr -f "GML" "/vsistdout/" 
"C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from 
feb16_polygons where objectid= 2126"

ogr2ogr -f "KML" "/vsistdout/" 
"C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from 
feb16_polygons where objectid= 2126"

ogr2ogr -f "GeoJSON" "/vsistdout/" 
"C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from 
feb16_polygons where objectid= 2126"

Many thanks to everyone who offered feedback.

Best, Elijah


Even Rouault wrote:
> Le mercredi 31 ao?t 2011 22:44:55, Elijah Robison a ?crit :
>   
>> Hi Devs,
>>
>> When troubleshooting geodata integrity issues, we sometimes use ogr2ogr
>> to push WKT expressions to a .csv file using a script like I show below.
>> It uses an ogr sql statement to grab a single feature from a raw
>> shapefile data source, then it saves the output to a CSV:
>>
>> ogr2ogr -f "CSV" "C:\xData\CountyData\Shps\OriginalParcelCSV"
>> "C:\xData\CountyData\Shps\parcel_polygons.shp" -sql "select * from
>> parcel_polygons where id= 9080" -lco "GEOMETRY=AS_WKT" -lco
>> "LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"
>>
>> As our needs in this situation are very transient, I'm curious if it is
>> possible to output the WKT directly to the console?
>>     
>
> Yes, as a output filename, you can use the special name /vsistdout/ (you need 
> the trailing slash) . You likely need GDAL 1.8 or later for it to work.
>
>   
>> Very Best,
>>
>> Elijah Robison
>> elijah@villagis.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>   
From even.rouault at mines-paris.org  Wed Aug 31 18:28:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 05:24:52 2011
Subject: [gdal-dev] ogr2ogr - output WKT to console?
In-Reply-To: <4E5EB388.4090202@villagis.com>
References: <4E5E9D47.9010107@villagis.com>
	<201108312252.22043.even.rouault@mines-paris.org>
	<4E5EB388.4090202@villagis.com>
Message-ID: <201109010028.56685.even.rouault@mines-paris.org>

Le jeudi 01 septembre 2011 00:19:52, Elijah Robison a ?crit :
> Rad. :)
> 
> Thanks, Even.
> 
> It took me a few minutes to realize that -f "CSV" still applied --- but
> now I'm catching on. I presume the following statement is true:
> 
> The special "/vsistdout/" file path will output ogr2ogr results directly
> to the console, provided the output type is a text-based format for
> which OGR supports dataset creation.

Well, to be pedantic, the driver also needs to support the VSI Virtual File 
API, which is now the case of most text based drivers that are converted over 
time from the standard FILE IO API to the VSI Virtual File API.

> 
> I wonder about that text-based caveat, but I wasn't able to push a
> shapefile to the console (and didn't expect to), yet I /was /able to
> push several pure text formats to the console.

This is not really a text-format versus binary-format issue. The problem with 
shapefiles is that there are several files involved, and that you need to be 
able to seek backward to those files to update their header. Both conditions 
that make it impossible as a streaming format.

> 
> For those keeping score, and for posterity within the nabble list cache,
> the following redactions of my initial ogr2ogr script send their result
> set directly to the console:
> 
> ogr2ogr -f "CSV" "/vsistdout/"
> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
> feb16_polygons where objectid= 2126" -lco "GEOMETRY=AS_WKT" -lco
> "LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"
> 
> ogr2ogr -f "GML" "/vsistdout/"
> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
> feb16_polygons where objectid= 2126"
> 
> ogr2ogr -f "KML" "/vsistdout/"
> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
> feb16_polygons where objectid= 2126"
> 
> ogr2ogr -f "GeoJSON" "/vsistdout/"
> "C:\xData\CountyUpdate\GeoFix\feb16_polygons.shp" -sql "select * from
> feb16_polygons where objectid= 2126"

You can also add the BNA, PGDump, GeoRSS and GPX drivers to the list

> 
> Many thanks to everyone who offered feedback.
> 
> Best, Elijah
> 
> Even Rouault wrote:
> > Le mercredi 31 ao?t 2011 22:44:55, Elijah Robison a ?crit :
> >> Hi Devs,
> >> 
> >> When troubleshooting geodata integrity issues, we sometimes use ogr2ogr
> >> to push WKT expressions to a .csv file using a script like I show below.
> >> It uses an ogr sql statement to grab a single feature from a raw
> >> shapefile data source, then it saves the output to a CSV:
> >> 
> >> ogr2ogr -f "CSV" "C:\xData\CountyData\Shps\OriginalParcelCSV"
> >> "C:\xData\CountyData\Shps\parcel_polygons.shp" -sql "select * from
> >> parcel_polygons where id= 9080" -lco "GEOMETRY=AS_WKT" -lco
> >> "LINEFORMAT=CRLF" -lco "SEPARATOR=SEMICOLON"
> >> 
> >> As our needs in this situation are very transient, I'm curious if it is
> >> possible to output the WKT directly to the console?
> > 
> > Yes, as a output filename, you can use the special name /vsistdout/ (you
> > need the trailing slash) . You likely need GDAL 1.8 or later for it to
> > work.
> > 
> >> Very Best,
> >> 
> >> Elijah Robison
> >> elijah@villagis.com
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Aug 31 19:38:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  1 06:37:52 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation)
In-Reply-To: <201108311938.33298.even.rouault@mines-paris.org>
References: <201108301322.46312.yjacolin@free.fr>
	<201108311718.35645.yjacolin@free.fr>
	<201108311938.33298.even.rouault@mines-paris.org>
Message-ID: <201109010138.11748.even.rouault@mines-paris.org>

> 
> But the ecwhdr utility that Jean-Claude mentionned is really what you would
> want to use, if you indeed just want to alter the projection info and/or
> georeferenced bounds. I thought that there was only a Erdas utility to
> achieve that, cool to see that it can be done with the SDK API. This gives
> me the idea that the ECW driver could be enhanced to implement the
> SetGeoTransform() and SetProjection() API, as well as some special
> metadata (likely PROJ and DATUM to be consistant with the creation
> options) through SetMetadataItem() to explicitely set the datum and
> projection codes. Then a simple python script could use those new
> capabilities to offer a service equivalent to the one of the ecwhdr
> utility. This would have the advantage of being available through GDAL as
> soon as the ECW driver has been compiled. I think I'm going to give it a
> try.

Implemented in http://trac.osgeo.org/gdal/ticket/4220 . Tested on Linux for 
now.

> 
> > Thanks,
> > 
> > Y.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Luke.Pinner at environment.gov.au  Wed Aug 31 19:56:04 2011
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Thu Sep  1 07:12:30 2011
Subject: [gdal-dev] ECW writing (was GTiff optimisation) [SEC=UNCLASSIFIED]
In-Reply-To: <201109010138.11748.even.rouault@mines-paris.org>
References: <201108301322.46312.yjacolin@free.fr><201108311718.35645.yjacolin@free.fr><201108311938.33298.even.rouault@mines-paris.org>
	<201109010138.11748.even.rouault@mines-paris.org>
Message-ID: <5C03B1B8A0679643BF6B814FFBBDDABD069615B1@pvac01exch50.internal.govt>

Does this apply to the 4.x read-only version of the ERDAS ECW/JP2 SDK as
well as the old 3.3 SDK?

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Thursday, 1 September 2011 9:38 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ECW writing (was GTiff optimisation)

> 
> But the ecwhdr utility that Jean-Claude mentionned is really what you
would
> want to use, if you indeed just want to alter the projection info
and/or
> georeferenced bounds. I thought that there was only a Erdas utility to
> achieve that, cool to see that it can be done with the SDK API. This
gives
> me the idea that the ECW driver could be enhanced to implement the
> SetGeoTransform() and SetProjection() API, as well as some special
> metadata (likely PROJ and DATUM to be consistant with the creation
> options) through SetMetadataItem() to explicitely set the datum and
> projection codes. Then a simple python script could use those new
> capabilities to offer a service equivalent to the one of the ecwhdr
> utility. This would have the advantage of being available through GDAL
as
> soon as the ECW driver has been compiled. I think I'm going to give it
a
> try.

Implemented in http://trac.osgeo.org/gdal/ticket/4220 . Tested on Linux
for 
now.

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
From patdevelop at gmail.com  Wed Aug 31 20:30:23 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Thu Sep  1 07:33:11 2011
Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF
	driver and CF-1 convention
Message-ID: <CALOKYXWthTFjcO9qUpBO77EcNYjyipacPDNcxaVsSNBZm43RMw@mail.gmail.com>

> Message: 6
> Date: Wed, 31 Aug 2011 13:05:11 -0700 (PDT)
> From: Etienne Tourigny <etiennesky@yahoo.com>
> Subject: Re: Fwd: [gdal-dev] Re: discussion on improvements to the
> ? ? ? ?NetCDF ?driver and CF-1 convention
> To: Hendy Sumanto <hsumanto@vpac.org>, ?"gdal-dev@lists.osgeo.org"
> ? ? ? ?<gdal-dev@lists.osgeo.org>
> Message-ID:
> ? ? ? ?<1314821111.88515.YahooMailNeo@web36903.mail.mud.yahoo.com>
> Content-Type: text/plain; charset=iso-8859-1
>
> Hendy
>
> 1)
>
>
> I added an item on the wiki page under I/O issues, can you make a detailed ticket and link to it on the wiki?
>
>
>
> In the mean time, please use Even's suggestion of using an intermediary format such as VRT.
>
> * Support Create() method so that gdalwarp can be used on a netcdf file
>

Hi Etienne,

I work for the same organisation as Hendy and have also been looking
at NetCDF issues, and have been looking at feasibility of supporting a
Create() method for NetCDF in particular. So I created a new ticket
(#4221) about this, and updated the NetCDF improvements wiki page to
link to it as suggested.

A couple of comments based on my study of the driver tutorial and code
below ....

> It's not as simple as it may seem, because all modifications to the netcdf file (not internal gdal information) are done only in the CreateCopy() function.? in Create() you don't have information on geotransform and projection, nor raster bands.

Hmm - looking at the signature for Create() on the tutorial page
(http://www.gdal.org/gdal_drivertut.html#gdal_drivertut_creation_create)
you do at least seem to get the # of bands and size of the raster. So
you could declare empty NetCDF Variables as required, then come back
and add projection information as a variable later.

I know with NetCDF classic there are some potential performance issues
with adding variables to an already existing file (See
http://www.unidata.ucar.edu/software/netcdf/workshops/most-recent/classic_perf/FileFormat.html)
- but there also seem ways around this of adding extra space
beforehand.

So this seems positive (though I'm no gdal expert yet ;)).

> A flag could indicate if projection/geotransform need to be written after it has been changed.? To avoid code de-duplication, the code in NCDFCreateCopy() related to projection/geotransform could be moved to a new function like SetNetcdfDimensions().? The RasterIO issues that Even mentioned can also be challenging.
>

Agreed, it looks like refactoring the existing CreateCopy() method so
common functionality was available to both would be the way to go.

cheers, Patrick.

>
> 2)
>
> I assume your file is in a projected CRS?In any case, the current implementation is not 100% CF compliant.? GDAL can read them (through custom tags), but other software cannot.?? I have submitted a patch to fix geographic CRS only.
>
> Please add this information to existing bug #2893 (which I have renamed tonetcdf driver does not read and write CF-1.0 coordinate system properly for projected CRS), along with your file (which was stripped by the mailing list)
>
> BTW, there is a nifty CF compliance checker (python script and online checker) which I have added to the wiki. Please test your file with it. It's possible that lambert_conformal_conic:standard_parallel_1 is valid CF, it needs to be tested.
>
>
> Regards,
> Etienne
>
>
>
>
> ----- Original Message -----
> From: Hendy Sumanto <hsumanto@vpac.org>
> To: gdal-dev@lists.osgeo.org
> Cc:
> Sent: Wednesday, August 31, 2011 1:23:54 AM
> Subject: Fwd: [gdal-dev] Re: discussion on improvements to the NetCDF driver and CF-1 convention
>
> Hi Etienne,
>
> I have a few items which I would like to put as new topics in the wiki entry but I think I better describe them here first before putting any entry or creating tickets.
>
> 1. As part of the improvement to the NetCDF driver, is it possible to make request to implement the Create method for the driver so that tool such as gdalwarp can output as NetCDF output.
>
> 2. Recently I was trying to serve the NetCDF dataset (which were created by gdal_translate geotiff LANDSAT dataset into NetCDF)
> using THREDDS data server. When I try to access it via WMS using viewer such as Godiva2, I was not able to view the dataset correctly.
>
> When I used the netCDF toolsUI to check the NetCDF dataset, it is not recognized as a grid by NetCDF Tools (4.2).
>
> Looking at this documentation (http://www.unidata.ucar.edu/software/netcdf-java/reference/StandardCoordinateTransforms.html),
> in order for grid data to be viewable, the NetCDF dataset must:
> a) define x and y projection coordinate variables, using the correct projection units, typically km on the projection plane.
> b) define your projection dummy variable which has an attribute "grid_mapping_name"
> c) refer to the projection in your data variables with the "grid_mapping" attribute.
>
> Checking on the GDAL netCDF, it only define x and y dimensions but not x and y projection coordinate variables (point a is not followed).
>
> Thus, I wondering whether other people have experienced the same issue as what I am having.
>
> Then I just tried to:
> -generate its CDL by ncdump the GDAL netCDF file into CDL
> -and the define x and y projection coordinate variables (as shown below) into the CDL
> ? ? double y(y) ;
> ? ? ? ? y:units = "m" ;
> ? ? ? ? y:standard_name = "projection_y_coordinate" ;
> ? ? ? ? y:long_name = "y coordinate of projection" ;
> ? ? double x(x) ;
> ? ? ? ? x:units = "m" ;
> ? ? ? ? x:standard_name = "projection_x_coordinate" ;
> ? ? ? ? x:long_name = "x coordinate of projection" ;
> -regenerate the netCDF file from the modified CDL using ncgen
> -populate the y coordinate variable in the NetCDF file with
> ? ? ? ? ymin, ymin+resolution, ymin+2*resolution, ...
> -populate the x coordinate variable with
> ? ? ? ? xmin, xmin+resolution, xmin+2*resolution, ...
> -if I then serve the modified NetCDF dataset again using THREDDS data server, now it can be viewed correctly.
>
> Note: xmin, ymin are the lower left corner and resolution is the raster pixel size.
>
> Thus, my questions:
> i)Is there a specific reason why the current driver do not define the x and y projection coordinate variables but only defining x and y dimensions.
> For the dataset to be viewable using tools such as netCDF toolsUI or when the dataset are served via THREDDS dataset, we might have to add projection coordinate variables and the correct values
> into the netCDF file.
> ii)For lambert conformal conic projection with more than one standard parallel values, GDAL netCDF file is showing
> lambert_conformal_conic:standard_parallel_1 = -18.f ;
> lambert_conformal_conic:standard_parallel_2 = -36.f ;
> but the correct one (for the dataset to be viewable using toolsUI or THREDDS) should be
> lambert_conformal_conic:standard_parallel = -18.f,-36.f ;
>
> Could you please please comment on 1, 2(i) and 2(ii)?
>
> The attached files:
> tile.nc - GDAL netCDF file
> tile-fixed-new.nc - the one I just tried to fix and can be viewed in netCDF toolsUI or served in THREDDS
>
> Regards,
>
> Hendy
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 88, Issue 1
> ***************************************
>
