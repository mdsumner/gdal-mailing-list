From anton.korosov at nersc.no  Wed Feb  1 03:12:17 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Feb  1 03:13:04 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <CAN_=ogvX1Tu5hc-tSVqbhY-OZbXd2nZvwAMLY-abHa-Tv5eFdQ@mail.gmail.com>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>	<CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>	<CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>	<CAJ0mEz1=m+vHj_c9gG23_M+sua4wCc6+pkL9tCy_8Dx0Qg4dsA@mail.gmail.com>
	<CAN_=ogvX1Tu5hc-tSVqbhY-OZbXd2nZvwAMLY-abHa-Tv5eFdQ@mail.gmail.com>
Message-ID: <4F28F3E1.6080405@nersc.no>

Probably the problem is with data type. You obviously have data of float 
type and you give GDT_Byte to the gdal.GetDriverByName('GTiff').Create().
Either try to create array with Byte data or give GDT_Float32. In the 
latter case the produced geotiff will have 32 bits fo each pixel. It is 
not supported by simple viewers but should be read with ArcGIS.

On 02/01/2012 03:31 AM, questions anon wrote:
> no I quickly checked that!
> myarray is:
> [[ 16.15035553  16.14380074  16.15581551 ...,  18.06388149  18.08930645
>     18.08825245]
>   [ 16.2154911   16.21180592  16.23977184 ...,  18.1085537   18.12040272
>     18.12342682]
>   [ 16.32851467  16.29202938  16.28964043 ...,  18.16753635  18.14905453
>     18.16632977]
>   ...,
>   [ 30.50812759  30.58384018  30.66707535 ...,  26.31020527  26.47789459
>     27.11495361]
>   [ 30.76499577  30.76497536  30.79138317 ...,  26.45928288  26.64059887
>     27.03641129]
>   [ 31.01263275  30.96269417  30.9933857  ...,  26.78247185  26.77845631
>     26.97975636]]
>
> On Wed, Feb 1, 2012 at 1:25 PM, Kyle Shannon <ksshannon@gmail.com
> <mailto:ksshannon@gmail.com>> wrote:
>
>     Is 'myarray' full of zeros?
>
>     /**
>       *
>       * Kyle Shannon
>       * ksshannon@gmail.com <mailto:ksshannon@gmail.com>
>       *
>       */
>
>
>
>     On Tue, Jan 31, 2012 at 19:20, questions anon
>     <questions.anon@gmail.com <mailto:questions.anon@gmail.com>> wrote:
>
>         thanks Frank, following your instructions with:
>
>         src_ds=gdal_array.OpenArray(myarray)
>         dst_ds =
>         gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
>         nrows, 1 ,gdal.GDT_Byte)
>         dst_ds.SetGeoTransform(geotransform)
>         dst_ds.GetRasterBand(1).WriteArray(myarray)
>
>         I do not receive any error messages but the tiff produced are
>         all just zeros. Is there a step I am missing?
>         thanks
>
>
>         On Wed, Feb 1, 2012 at 12:07 PM, Frank Warmerdam
>         <warmerdam@pobox.com <mailto:warmerdam@pobox.com>> wrote:
>
>             On Tue, Jan 31, 2012 at 4:38 PM, questions anon
>             <questions.anon@gmail.com <mailto:questions.anon@gmail.com>>
>             wrote:
>              > I need to output my numpy array as a raster so that
>             someone else can access
>              > the data in ArcGIS. So basically the steps I need are:
>              > read numpy array into gdal
>              > convert to raster
>              > use latitude and longitude and array size to set projection
>              >
>              > I am really struggling with gdal because I can't seem to
>             find enough
>              > documentation about each step to understand what it is doing.
>              > Here are some of the steps I think I need:
>              >
>              > myarray=myarray
>              > #the extent and shape of my array
>              > xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
>              > ncols,nrows=[193,106]
>              > xres=(xmax-xmin)/float(ncols)
>              > yres=(ymax-ymin)/float(nrows)
>              > geotransform=(xmin,xres,0,ymax,0, -yres)
>              >
>              > from osgeo import gdal
>              > from osgeo import gdal_array
>              >
>              > src_ds=gdal_array.OpenArray(myarray)
>              >
>              > dst_ds =
>              >
>             gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
>              > nrows, 1 ,gdal.GDT_Byte)
>              > dst_rb = dst_ds.GetRasterBand(0)
>              > dst_ds.SetGeoTransform(geotransform)
>              > output = gdal.RasterizeLayer(dst_ds)
>
>             Dear "Questions Anon",
>
>             There are a variety of Python related information at:
>
>             http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>
>             One serious issue with the above is that
>             "gdal.RasterizeLayer()" is used to
>             turn vector data into raster data - for instance to
>             rasterize polygon features
>             into an existing raster file.  I think you want to write
>             your array into a
>             raster file.  I think you can just call
>             "dst_ds.WriteArray(myarray)".
>
>             Alternatively if that method does not exist on the dataset, you
>             can write the one band like:
>
>               dst_ds.GetRasterBand(1).WriteArray(myarray)
>
>             Some of the samples referenced from the GdalOgrInPython
>             should be
>             helpful though I understand it can be hard to know where to
>             look.
>
>             Best regards,
>             --
>             ---------------------------------------+--------------------------------------
>             I set the clouds in motion - turn up   | Frank Warmerdam,
>             warmerdam@pobox.com <mailto:warmerdam@pobox.com>
>             light and sound - activate the windows |
>             http://pobox.com/~warmerdam <http://pobox.com/%7Ewarmerdam>
>             and watch the world go round - Rush    | Geospatial Software
>             Developer
>
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From singh01 at gmail.com  Wed Feb  1 10:19:13 2012
From: singh01 at gmail.com (singnage)
Date: Wed Feb  1 10:19:23 2012
Subject: [gdal-dev] HDF4 support for gdal 1.8
Message-ID: <1328109553800-4356589.post@n6.nabble.com>

I recently installed GDAL 1.8.1 from gisinternals.com/sdk on Windows 7, I was
previously using 1.6 from FW Tools, this newer version does not support 
HDF4 but supports HDF5, can anyone point how can I install the HDF4 support
for version 1.8.1.

thanks
NS

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/HDF4-support-for-gdal-1-8-tp4356589p4356589.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From newmanw10 at gmail.com  Wed Feb  1 11:42:17 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Wed Feb  1 11:43:28 2012
Subject: [gdal-dev] Getting VPF data via OGR java bindings
Message-ID: <CAD34qgmPuNiLktASyiTTbcw6pKc6_jcj9XUr-33E3GfaBAveYA@mail.gmail.com>

I am able to get VPF (vector product format) info and perform operations
(like convert to shape files) command line using ogrinfo and ogr2ogr.  What
I am wondering is if the java bindings for ogr support the same.

i.e. to get a list of layer names
ogrinfo gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia

Can I get a list of layer names using the java bindings?

i.e. convert to shape file
ogr2ogr watrcrsl.shp gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia
'watrcrsl@hydro(*)_line'

Can I convert a VPF to a shapefile using the java bindings?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/4614bc1d/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Feb  1 12:01:35 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  1 12:02:20 2012
Subject: [gdal-dev] Getting VPF data via OGR java bindings
In-Reply-To: <CAD34qgmPuNiLktASyiTTbcw6pKc6_jcj9XUr-33E3GfaBAveYA@mail.gmail.com>
References: <CAD34qgmPuNiLktASyiTTbcw6pKc6_jcj9XUr-33E3GfaBAveYA@mail.gmail.com>
Message-ID: <CAMKgpOZq3+0fq_Yp=dQ5ppGo0iBUm3-hsG9K4diER4tRx6rBbQ@mail.gmail.com>

Billy,

There are sample java programs that use GDAL's java bindings in the GDAL
code tree[1]. There include sample ogrinfo and ogr2ogr codes too.

[1]: http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps

On Wed, Feb 1, 2012 at 10:12 PM, Billy Newman <newmanw10@gmail.com> wrote:

> I am able to get VPF (vector product format) info and perform operations
> (like convert to shape files) command line using ogrinfo and ogr2ogr.  What
> I am wondering is if the java bindings for ogr support the same.
>
> i.e. to get a list of layer names
> ogrinfo gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia
>
> Can I get a list of layer names using the java bindings?
>
> i.e. convert to shape file
> ogr2ogr watrcrsl.shp gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia
> 'watrcrsl@hydro(*)_line'
>
> Can I convert a VPF to a shapefile using the java bindings?
>
> Thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/91dfce42/attachment.html
From szekerest at gmail.com  Wed Feb  1 13:17:33 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb  1 13:18:24 2012
Subject: [gdal-dev] HDF4 support for gdal 1.8
In-Reply-To: <1328109553800-4356589.post@n6.nabble.com>
References: <1328109553800-4356589.post@n6.nabble.com>
Message-ID: <CACALY+R=KfyWF=v-2=c+AzpjoOLtML-UjOi7sNE_0ir=qGmAEw@mail.gmail.com>

If you have a compiled version of the HDF4 libraries, you could probably
use the SDK from gisinternals <http://www.gisinternals.com/sdk/> to include
that in the build (Makefile should be edited). I have never tried it by
myself, but I'll give it a try as my time permits.

Best regards,

Tamas



2012/2/1 singnage <singh01@gmail.com>

> I recently installed GDAL 1.8.1 from gisinternals.com/sdk on Windows 7, I
> was
> previously using 1.6 from FW Tools, this newer version does not support
> HDF4 but supports HDF5, can anyone point how can I install the HDF4 support
> for version 1.8.1.
>
> thanks
> NS
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/HDF4-support-for-gdal-1-8-tp4356589p4356589.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/4adedd32/attachment.html
From jluis at ualg.pt  Wed Feb  1 13:45:41 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Feb  1 13:46:28 2012
Subject: [gdal-dev] subdatasets not read in a HDF file - CONT
Message-ID: <4F298855.5080202@ualg.pt>

Hi,

A couple of months ago I posted a message here about subdatsets not 
being read by the HDF4 driver and opened this ticked.

http://trac.osgeo.org/gdal/ticket/4305

Jose Gomez-Dans reminded me that this was a even older issue and pointed 
me to

http://osgeo-org.1560.n6.nabble.com/gdal-dev-subdatasets-not-read-in-a-HDF-file-tt3743143.html#a3743148

However, it turns out that the 1D datasets are not read purpose. Lines 
1013, 1014 of     hdf4dataset.cpp    have

             if ( iRank == 1 )        // Skip 1D datsets
                     continue;

which, if I comment them, allows reading the 1D datasets. Any reason to 
them restricted on purpose. Can't this constraint be released?

Thanks

Joaquim
From sault.don at gmail.com  Wed Feb  1 16:22:42 2012
From: sault.don at gmail.com (Donovan Cameron)
Date: Wed Feb  1 16:23:30 2012
Subject: [gdal-dev] Using -overwrite to create empty feature class
Message-ID: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>

Afternoon List.

I am trying to generate an empty feature (shp or gml) from a template that
retains both the attribute-table schema and map projection.

I can't get the *-overwrite *flag to work, it just copies the entire
feature (ie, makes a duplicate):
*ogr2ogr -overwrite -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML}*
*
*
The next commands <http://gis.stackexchange.com/a/16510/1297>[1] work using
*-where *or *-fid*:
*ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -where
"FID < 0"*
*ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -fid "< 0"*

I thought the* -overwrite* flag would delete the output layer and recreate
it empty <http://www.gdal.org/ogr2ogr.html>[2]?
Can someone help me figure out how to properly use -overwrite?


Thanks!



Donovan


[1] http://gis.stackexchange.com/a/16510/1297
[2] http://www.gdal.org/ogr2ogr.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/50c7e1df/attachment.html
From even.rouault at mines-paris.org  Wed Feb  1 16:26:11 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  1 16:25:08 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
Message-ID: <201202012226.11160.even.rouault@mines-paris.org>

Motion: GDAL/OGR Commit rights are extended to Robert Coup
---

Folks,

Robert Coup has been working over the last few weeks in submitting patches to 
improve and fix the new FileGDB driver. I have integrated them until now, but  
I think it would make the process smoother to give him commit access. Robert 
is testing with ESRI software such as ArcMap, which should help making sure 
output datasources produced by the FileGDB driver are interoperable with other 
software.

Robert is a core committer on Mapnik and a committer on Dojo. He has also been 
a GSoC mentor for Mapnik & Dojo over the last few years

Robert, could you publically reply to this message indicating your
willingness to follow RFC3?

  http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the voting with my support.

+1 Even
From warmerdam at pobox.com  Wed Feb  1 16:29:01 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  1 16:29:23 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <201202012226.11160.even.rouault@mines-paris.org>
References: <201202012226.11160.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBeSAv5v8S-+=n3L5xM7fXDE7XSaNjOi=so=6Qnng14Bkw@mail.gmail.com>

On Wed, Feb 1, 2012 at 1:26 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Motion: GDAL/OGR Commit rights are extended to Robert Coup
> ---

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From hobu.inc at gmail.com  Wed Feb  1 16:31:23 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Feb  1 16:31:59 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <CA+YzLBeSAv5v8S-+=n3L5xM7fXDE7XSaNjOi=so=6Qnng14Bkw@mail.gmail.com>
References: <201202012226.11160.even.rouault@mines-paris.org>
	<CA+YzLBeSAv5v8S-+=n3L5xM7fXDE7XSaNjOi=so=6Qnng14Bkw@mail.gmail.com>
Message-ID: <A9D96A27-0D29-466E-A3F3-25736B977D95@gmail.com>


On Feb 1, 2012, at 3:29 PM, Frank Warmerdam wrote:

> On Wed, Feb 1, 2012 at 1:26 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Motion: GDAL/OGR Commit rights are extended to Robert Coup
>> ---
> 
> +1 Frank

+1 Howard
From Tyler.Mitchell at actian.com  Wed Feb  1 16:34:11 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Wed Feb  1 16:34:49 2012
Subject: [gdal-dev] Ingres patch uploaded to trac
Message-ID: <07A3D451-F936-4ED9-B089-B55C18113DE0@actian.com>

Thanks Zhen (and Frank) for his work on helping improve the Windows build for the Ingres driver.
More details at http://trac.osgeo.org/gdal/ticket/4483

I can provide libs if anyone else wants to test it.

Tyler
From even.rouault at mines-paris.org  Wed Feb  1 16:38:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  1 16:37:39 2012
Subject: [gdal-dev] Using -overwrite to create empty feature class
In-Reply-To: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>
References: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>
Message-ID: <201202012238.01223.even.rouault@mines-paris.org>

Le mercredi 01 f?vrier 2012 22:22:42, Donovan Cameron a ?crit :
> Afternoon List.
> 
> I am trying to generate an empty feature (shp or gml) from a template that
> retains both the attribute-table schema and map projection.
> 
> I can't get the *-overwrite *flag to work, it just copies the entire
> feature (ie, makes a duplicate):
> *ogr2ogr -overwrite -f "GML" geoname.gml /vsizip/vsicurl/
> ${inZIP}/${inGML}* *
> *
> The next commands <http://gis.stackexchange.com/a/16510/1297>[1] work using
> *-where *or *-fid*:
> *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -where
> "FID < 0"*
> *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -fid "<
> 0"*
> 
> I thought the* -overwrite* flag would delete the output layer and recreate
> it empty <http://www.gdal.org/ogr2ogr.html>[2]?

-overwrite deletes the output layer, so that the new features added by ogr2ogr 
aren't added to the previously existing one, but in no way it creates an empty 
layer.

The -where "fid < 0" trick is actually an interesting one. I've no better 
suggestion.
From robert.coup at onetrackmind.co.nz  Wed Feb  1 16:44:36 2012
From: robert.coup at onetrackmind.co.nz (Robert Coup)
Date: Wed Feb  1 16:44:56 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <201202012226.11160.even.rouault@mines-paris.org>
References: <201202012226.11160.even.rouault@mines-paris.org>
Message-ID: <CAFLLRpL+-JbBpsUQUdcwbQaAhQD_7LTqEbsM=Ger6xvF32-AbA@mail.gmail.com>

Hi All,

On Thu, Feb 2, 2012 at 10:26 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Motion: GDAL/OGR Commit rights are extended to Robert Coup
>

Thank you sir :)


> Robert, could you publically reply to this message indicating your
> willingness to follow RFC3?
>
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters


Yes, happy to follow the rules.

Minor proviso - my available hours will vary over time (yay, startups) but
that'll only ever be a barrier to code quantity, not quality.

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/8a87e3af/attachment-0001.html
From questions.anon at gmail.com  Wed Feb  1 16:50:08 2012
From: questions.anon at gmail.com (questions anon)
Date: Wed Feb  1 16:50:50 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <4F28F3E1.6080405@nersc.no>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
	<CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>
	<CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>
	<CAJ0mEz1=m+vHj_c9gG23_M+sua4wCc6+pkL9tCy_8Dx0Qg4dsA@mail.gmail.com>
	<CAN_=ogvX1Tu5hc-tSVqbhY-OZbXd2nZvwAMLY-abHa-Tv5eFdQ@mail.gmail.com>
	<4F28F3E1.6080405@nersc.no>
Message-ID: <CAN_=ogutBVKfr6dYx7A8NN+nAo1wf9Bh5DEOG1x2-yN14pCAJw@mail.gmail.com>

Thanks for responding Anton, I have been playing with the datatype but so
far it hasn't fixed the problem. Also I do have access to ArcGIS to check
the output.
I will keep trying, this is where I am at currently:

from osgeo import gdal
from osgeo import gdal_array
from osgeo import osr

myarray=myarray.astype(N.float32)
xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
ncols,nrows=[193,106]
xres=(xmax-xmin)/float(ncols)
yres=(ymax-ymin)/float(nrows)
geotransform=(xmin,xres,0,ymax,0, -yres)
dst_ds =
gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/myraster.tif',ncols,
nrows, 1 ,gdal.GDT_Float32)
dst_ds.SetGeoTransform(geotransform)
srs = osr.SpatialReference()
srs.ImportFromEPSG(4326) #WGS84 lat long.
dst_ds.SetProjection( srs.ExportToWkt() )
dst_ds.GetRasterBand(1).WriteArray(myarray)

dst_ds=None


On Wed, Feb 1, 2012 at 7:12 PM, Anton Korosov <anton.korosov@nersc.no>wrote:

> Probably the problem is with data type. You obviously have data of float
> type and you give GDT_Byte to the gdal.GetDriverByName('GTiff').**
> Create().
> Either try to create array with Byte data or give GDT_Float32. In the
> latter case the produced geotiff will have 32 bits fo each pixel. It is not
> supported by simple viewers but should be read with ArcGIS.
>
>
> On 02/01/2012 03:31 AM, questions anon wrote:
>
>> no I quickly checked that!
>> myarray is:
>> [[ 16.15035553  16.14380074  16.15581551 ...,  18.06388149  18.08930645
>>    18.08825245]
>>  [ 16.2154911   16.21180592  16.23977184 ...,  18.1085537   18.12040272
>>    18.12342682]
>>  [ 16.32851467  16.29202938  16.28964043 ...,  18.16753635  18.14905453
>>    18.16632977]
>>  ...,
>>  [ 30.50812759  30.58384018  30.66707535 ...,  26.31020527  26.47789459
>>    27.11495361]
>>  [ 30.76499577  30.76497536  30.79138317 ...,  26.45928288  26.64059887
>>    27.03641129]
>>  [ 31.01263275  30.96269417  30.9933857  ...,  26.78247185  26.77845631
>>    26.97975636]]
>>
>> On Wed, Feb 1, 2012 at 1:25 PM, Kyle Shannon <ksshannon@gmail.com
>> <mailto:ksshannon@gmail.com>> wrote:
>>
>>    Is 'myarray' full of zeros?
>>
>>    /**
>>      *
>>      * Kyle Shannon
>>      * ksshannon@gmail.com <mailto:ksshannon@gmail.com>
>>
>>      *
>>      */
>>
>>
>>
>>    On Tue, Jan 31, 2012 at 19:20, questions anon
>>    <questions.anon@gmail.com <mailto:questions.anon@gmail.**com<questions.anon@gmail.com>>>
>> wrote:
>>
>>        thanks Frank, following your instructions with:
>>
>>        src_ds=gdal_array.OpenArray(**myarray)
>>        dst_ds =
>>        gdal.GetDriverByName('GTiff').**Create('E:/test/rasterise/**
>> mynewraster.tif',ncols,
>>        nrows, 1 ,gdal.GDT_Byte)
>>        dst_ds.SetGeoTransform(**geotransform)
>>        dst_ds.GetRasterBand(1).**WriteArray(myarray)
>>
>>        I do not receive any error messages but the tiff produced are
>>        all just zeros. Is there a step I am missing?
>>        thanks
>>
>>
>>        On Wed, Feb 1, 2012 at 12:07 PM, Frank Warmerdam
>>        <warmerdam@pobox.com <mailto:warmerdam@pobox.com>> wrote:
>>
>>            On Tue, Jan 31, 2012 at 4:38 PM, questions anon
>>            <questions.anon@gmail.com <mailto:questions.anon@gmail.**com<questions.anon@gmail.com>
>> >>
>>
>>            wrote:
>>             > I need to output my numpy array as a raster so that
>>            someone else can access
>>             > the data in ArcGIS. So basically the steps I need are:
>>             > read numpy array into gdal
>>             > convert to raster
>>             > use latitude and longitude and array size to set projection
>>             >
>>             > I am really struggling with gdal because I can't seem to
>>            find enough
>>             > documentation about each step to understand what it is
>> doing.
>>             > Here are some of the steps I think I need:
>>             >
>>             > myarray=myarray
>>             > #the extent and shape of my array
>>             > xmin,ymin,xmax,ymax=[139.8,-**39.2,150.0,-33.6]
>>             > ncols,nrows=[193,106]
>>             > xres=(xmax-xmin)/float(ncols)
>>             > yres=(ymax-ymin)/float(nrows)
>>             > geotransform=(xmin,xres,0,**ymax,0, -yres)
>>             >
>>             > from osgeo import gdal
>>             > from osgeo import gdal_array
>>             >
>>             > src_ds=gdal_array.OpenArray(**myarray)
>>             >
>>             > dst_ds =
>>             >
>>            gdal.GetDriverByName('GTiff').**Create('E:/test/rasterise/**
>> mynewraster.tif',ncols,
>>             > nrows, 1 ,gdal.GDT_Byte)
>>             > dst_rb = dst_ds.GetRasterBand(0)
>>             > dst_ds.SetGeoTransform(**geotransform)
>>             > output = gdal.RasterizeLayer(dst_ds)
>>
>>            Dear "Questions Anon",
>>
>>            There are a variety of Python related information at:
>>
>>            http://trac.osgeo.org/gdal/**wiki/GdalOgrInPython<http://trac.osgeo.org/gdal/wiki/GdalOgrInPython>
>>
>>            One serious issue with the above is that
>>            "gdal.RasterizeLayer()" is used to
>>            turn vector data into raster data - for instance to
>>            rasterize polygon features
>>            into an existing raster file.  I think you want to write
>>            your array into a
>>            raster file.  I think you can just call
>>            "dst_ds.WriteArray(myarray)".
>>
>>            Alternatively if that method does not exist on the dataset, you
>>            can write the one band like:
>>
>>              dst_ds.GetRasterBand(1).**WriteArray(myarray)
>>
>>            Some of the samples referenced from the GdalOgrInPython
>>            should be
>>            helpful though I understand it can be hard to know where to
>>            look.
>>
>>            Best regards,
>>            --
>>            ------------------------------**---------+--------------------
>> **------------------
>>            I set the clouds in motion - turn up   | Frank Warmerdam,
>>            warmerdam@pobox.com <mailto:warmerdam@pobox.com>
>>
>>            light and sound - activate the windows |
>>            http://pobox.com/~warmerdam <http://pobox.com/%7Ewarmerdam**>
>>
>>            and watch the world go round - Rush    | Geospatial Software
>>            Developer
>>
>>
>>
>>        ______________________________**_________________
>>        gdal-dev mailing list
>>        gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>> >
>>        http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>>
>>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/7a45f9a0/attachment.html
From szekerest at gmail.com  Wed Feb  1 16:57:45 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb  1 16:57:55 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <201202012226.11160.even.rouault@mines-paris.org>
References: <201202012226.11160.even.rouault@mines-paris.org>
Message-ID: <CACALY+ROoj+dtoY5eofkNJCXWmKzcDTitF+LyFLa0dzTuXAO5g@mail.gmail.com>

+1

Tamas



2012/2/1 Even Rouault <even.rouault@mines-paris.org>

> Motion: GDAL/OGR Commit rights are extended to Robert Coup
> ---
>
> Folks,
>
> Robert Coup has been working over the last few weeks in submitting patches
> to
> improve and fix the new FileGDB driver. I have integrated them until now,
> but
> I think it would make the process smoother to give him commit access.
> Robert
> is testing with ESRI software such as ArcMap, which should help making sure
> output datasources produced by the FileGDB driver are interoperable with
> other
> software.
>
> Robert is a core committer on Mapnik and a committer on Dojo. He has also
> been
> a GSoC mentor for Mapnik & Dojo over the last few years
>
> Robert, could you publically reply to this message indicating your
> willingness to follow RFC3?
>
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with my support.
>
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/1b0c17d4/attachment.html
From dmorissette at mapgears.com  Wed Feb  1 17:03:16 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Feb  1 17:03:43 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <CAFLLRpL+-JbBpsUQUdcwbQaAhQD_7LTqEbsM=Ger6xvF32-AbA@mail.gmail.com>
References: <201202012226.11160.even.rouault@mines-paris.org>
	<CAFLLRpL+-JbBpsUQUdcwbQaAhQD_7LTqEbsM=Ger6xvF32-AbA@mail.gmail.com>
Message-ID: <4F29B6A4.8010006@mapgears.com>

+1

Daniel

On 12-02-01 4:44 PM, Robert Coup wrote:
> Hi All,
>
> On Thu, Feb 2, 2012 at 10:26 AM, Even Rouault
> <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>> wrote:
>
>     Motion: GDAL/OGR Commit rights are extended to Robert Coup
>
>
> Thank you sir :)
>
>     Robert, could you publically reply to this message indicating your
>     willingness to follow RFC3?
>
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
>
> Yes, happy to follow the rules.
>
> Minor proviso - my available hours will vary over time (yay, startups)
> but that'll only ever be a barrier to code quantity, not quality.
>
> Cheers,
>
> Rob :)
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Wed Feb  1 20:22:21 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  1 20:22:54 2012
Subject: [gdal-dev] Web site downtime
Message-ID: <CA+YzLBfVEJjYhAHHG7V9bCT754uE9aA=mW=vo72=yqB4NxKHnA@mail.gmail.com>

Folks,

The OSGeo ProjectsVM is down while we upgrade the OS (an upgrade
that has encountered some issues).  While this is being resolved the
hosted sites including gdal.org, mapserver.org, grass.org will be down.

  http://wiki.osgeo.org/wiki/ProjectsVM

Downtime could potentially be in the hours or even a day or two.  I won't
announce when things are back but you can always try.  Note that Trac
for bug reporting, and subversion are not down.

Sorry for the inconvenience.  And damn Debian major OS version
in-place upgrades. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chaitanya.ch at gmail.com  Wed Feb  1 23:08:32 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  1 23:08:59 2012
Subject: [gdal-dev] Getting VPF data via OGR java bindings
In-Reply-To: <CAD34qgkpT4H+yU+HbmCB3+4-ZfTVfw3B=GwHnsqF-J7+=h1ipA@mail.gmail.com>
References: <CAD34qgmPuNiLktASyiTTbcw6pKc6_jcj9XUr-33E3GfaBAveYA@mail.gmail.com>
	<CAMKgpOZq3+0fq_Yp=dQ5ppGo0iBUm3-hsG9K4diER4tRx6rBbQ@mail.gmail.com>
	<CAD34qgkpT4H+yU+HbmCB3+4-ZfTVfw3B=GwHnsqF-J7+=h1ipA@mail.gmail.com>
Message-ID: <CAMKgpOYTyuZHfek85LBs1AP+z3qa1185ZXM4-AhRw5xMeLtO5g@mail.gmail.com>

Billy,

These programs run very similar to the original programs described in the
OGR utilities page[2]. They just have less functionality and not updated as
regularly.

PS: The gdal.org site is down at the moment.

[2]: http://www.gdal.org/ogr_utilities.html

On Thu, Feb 2, 2012 at 12:23 AM, Billy Newman <newmanw10@gmail.com> wrote:

> Do you have examples of how ogr2ogr.java and ogrinfo.java are run.  I.E.
> do you have test cases for these sample programs?
>
> Thanks a ton, this is really helpful.
>
>
> On Wed, Feb 1, 2012 at 10:01 AM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Billy,
>>
>> There are sample java programs that use GDAL's java bindings in the GDAL
>> code tree[1]. There include sample ogrinfo and ogr2ogr codes too.
>>
>> [1]: http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps
>>
>> On Wed, Feb 1, 2012 at 10:12 PM, Billy Newman <newmanw10@gmail.com>wrote:
>>
>>> I am able to get VPF (vector product format) info and perform operations
>>> (like convert to shape files) command line using ogrinfo and ogr2ogr.  What
>>> I am wondering is if the java bindings for ogr support the same.
>>>
>>> i.e. to get a list of layer names
>>> ogrinfo gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia
>>>
>>> Can I get a list of layer names using the java bindings?
>>>
>>> i.e. convert to shape file
>>> ogr2ogr watrcrsl.shp gltp:/vrf/usr4/mppl/v0eur/vmaplv0/eurnasia
>>> 'watrcrsl@hydro(*)_line'
>>>
>>> Can I convert a VPF to a shapefile using the java bindings?
>>>
>>> Thanks
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/957e30c0/attachment.html
From rajjad at gmail.com  Thu Feb  2 01:59:17 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Feb  2 01:59:41 2012
Subject: [gdal-dev] delete feature without fid
Message-ID: <CADz3VuUTcBpicQh69yJNqkXw3UCTrQNvDQydUvNZLPJog7Z8Jw@mail.gmail.com>

hi list,

in the gdal java bindings I need to delete a feature from layer, but it
seems the only way to delete the feature is its FID, which in my case is
unknown. Is there anyway to find the true FID of a feature in layer or
remove a feature by reference just like it can be updated or re-written.

my code ..


Feature f = layer.GetFeature(i); // i is index of loop that runs till total
feature count

g=f.GetGeometryRef();

layer.SetSpatialFilter(g); //reducing layer content to features with same
geom...here its a point

Feature comparefeature = layer.GetNextFeature();

*do*{

*if*(!f.Equal(comparefeature))

{

comparefeature.delete(); // not the right method...

delcount++;

}

 comparefeature = layer.GetNextFeature();

}*while*(comparefeature!=*null*);

layer.ResetReading();

layer.SetSpatialFilter(*null*); //remove spatial filter
-----------------------
regards,
Imran

-- 
I.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/e09a5b73/attachment.html
From rajjad at gmail.com  Thu Feb  2 02:09:03 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Feb  2 02:09:20 2012
Subject: [gdal-dev] Re: delete feature without fid
In-Reply-To: <CADz3VuUTcBpicQh69yJNqkXw3UCTrQNvDQydUvNZLPJog7Z8Jw@mail.gmail.com>
References: <CADz3VuUTcBpicQh69yJNqkXw3UCTrQNvDQydUvNZLPJog7Z8Jw@mail.gmail.com>
Message-ID: <CADz3VuUs0=CmBtwBgzAW8PJudk2+bZY02g+Bsjy6QnC8o5Voeg@mail.gmail.com>

i think its f.GetFID()

I`m guessing to show these changes on the file we need to call
layer.SyncToDisk();

regards,
Imran

On Thu, Feb 2, 2012 at 11:59 AM, Imran Rajjad <rajjad@gmail.com> wrote:

> hi list,
>
> in the gdal java bindings I need to delete a feature from layer, but it
> seems the only way to delete the feature is its FID, which in my case is
> unknown. Is there anyway to find the true FID of a feature in layer or
> remove a feature by reference just like it can be updated or re-written.
>
> my code ..
>
>
> Feature f = layer.GetFeature(i); // i is index of loop that runs till
> total feature count
>
> g=f.GetGeometryRef();
>
> layer.SetSpatialFilter(g); //reducing layer content to features with same
> geom...here its a point
>
> Feature comparefeature = layer.GetNextFeature();
>
> *do*
> {
>
> *if*(!f.Equal(comparefeature))
>
> {
>
> comparefeature.delete(); // not the right method...
>
> delcount++;
>
> }
>
>  comparefeature = layer.GetNextFeature();
>
> }
> *while*(comparefeature!=*null*);
>
> layer.ResetReading();
>
> layer.SetSpatialFilter(
> *null*); //remove spatial filter
> -----------------------
> regards,
> Imran
>
> --
> I.R
>



-- 
I.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/ae6fc382/attachment.html
From even.rouault at mines-paris.org  Thu Feb  2 03:42:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  2 03:42:48 2012
Subject: [gdal-dev] Re: delete feature without fid
In-Reply-To: <CADz3VuUs0=CmBtwBgzAW8PJudk2+bZY02g+Bsjy6QnC8o5Voeg@mail.gmail.com>
References: <CADz3VuUTcBpicQh69yJNqkXw3UCTrQNvDQydUvNZLPJog7Z8Jw@mail.gmail.com>
	<CADz3VuUs0=CmBtwBgzAW8PJudk2+bZY02g+Bsjy6QnC8o5Voeg@mail.gmail.com>
Message-ID: <1328172143.4f2a4c6fdcda4@imp.free.fr>

Imran,

I would have pointed you to http://gdal.org/java for the Javadoc , but the
website is currently down, so I give you a summary of what you'll find :

- To retrive the FID of a feature, yes, you need to use Feature.GetFID()
- Feature.delete() should not be called under normal circumstances. Normal
garbage collection should work without that help.
- To delete a feature from a layer, you need to call Layer.DeleteFeature(an_fid)
- Layer.SyncToDisk() is not implemented in all drivers. The safest method to
make sure the file is properly rewritten is to *explicitely* close the
datasource with DataSource.delete(). Yes, you must explicitely destroy it to
make sure the native code associated is indeed called. Garbage collection isn't
guaranteed to do it.

Best regards,

Even
From radha2sai at gmail.com  Thu Feb  2 04:19:13 2012
From: radha2sai at gmail.com (radha rani)
Date: Thu Feb  2 04:19:44 2012
Subject: [gdal-dev] Does GDAL has DXF/DWG read/write functionality for WINCE
	platform
Message-ID: <CADaE89=-7pMun_bfdh5YDU+zBbHJvhVZkhFmccod9CAUEeYBdQ@mail.gmail.com>

Hi ,

Iam developing a project which writes DXF/DWG files on WinCE
Platform,Does GDAL has DXF/DWG read/write functionality for WINCE
platform,

Please let me know  as soon as possible ,Kindly suggest me is there
any other alternatives which survives my requirement  i.e
Writing/Reading  DXF/DWG files on WINCE platform

Thanks & Regards
Radha
From aperi2007 at gmail.com  Thu Feb  2 05:37:12 2012
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu Feb  2 05:37:58 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <1328020343.4f27fb77ba632@imp.free.fr>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
Message-ID: <CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>

Hi,

Unfortunately I was unable to test with GDB.
My skill was not enough :(

However I try other ways.

I will use a utility to test the disk activity and after put the qgis
canvas on a little portion of land covered I add the catalog.vrt.
Using this utility I can see that qggis try to open all the raster instead
of open only the single raster necessary to visualize the portion of land
in the canvas.

After this I see the xml in the catalog:

<SimpleSource>
  <SourceFilename relativeToVRT="0">F:\....\216110_2010.ecw</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="13900" RasterYSize="11760"
DataType="Byte" BlockXSize="13900" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="13900" ySize="11760" />
      <DstRect xOff="26320" yOff="140" xSize="13900" ySize="11760" />
    </SimpleSource>

And I notice also that the catalog don't store on every tag of a raster the
single bbox of that raster.
So qgis necessary must open all the raster to understand what raster is on
the visible portion on the canvas.

I guess this is a good reason to explain because it is so slow when in the
catalog there and many hundred of rasters.

Unfortunately I don't find any option in gdalbuildvrt to add the extension
of every raster in the catalog.

Andrea.

2012/1/31 Even Rouault <even.rouault@mines-paris.org>

> Selon Dmitry Baryshnikov <polimax@mail.ru>:
>
> > 31.01.2012 16:54, Andrea Peri ?????:
> > > Hi,
> > > using qgis I notice that it is more slow to open some raster from a
> > > catalog.vrt rather than opening the same raster directly.
> > > The slow is so big that when the catalog has many raster qgis take
> > > many time to open the catalog.
> > >
> > > Because qgis use gdal to read raster and also to read a catalog.
> > > I guess this is not an issue for qgis. But is a question of gdal.
> > >
> > > Before to start to do some test I like to know if there is some know
> > > issue on this.
>
> > I think this bug are mentioned in such tickets
> > http://trac.osgeo.org/gdal/ticket/2076 and
> > http://trac.osgeo.org/gdal/ticket/3482
> > QGIS more slow because it warp image (if it from VRT or have some
> > rotation in meta and etc.) and have no overviews. You can see if image
> > is warped in layer properties metadata tab -> driver.
>
> Yes that's one possibility. A more pragmatic way would be to run qgis under
> GDB/DDD, and when it is stuck, Ctrl+C to see in which GDAL function it is
> stuck... That should give some hints.
>
> >
> > Best regards,
> >      Dmitry
> >
>
>
>


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/9940744e/attachment-0001.html
From even.rouault at mines-paris.org  Thu Feb  2 05:48:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  2 05:49:05 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
Message-ID: <1328179703.4f2a69f7e8522@imp.free.fr>

Selon Andrea Peri <aperi2007@gmail.com>:

> Hi,
>
> Unfortunately I was unable to test with GDB.
> My skill was not enough :(

Well, provided you have gdb installed, it is "just" a matter of :

1) "gdb qgis"
2) in the gdb console, type "run" and validate
3) when qgis is slow, switch to the console with gdb and hit Ctrl+C
4) in the gdb console, type "bt" (for backtrace)and validate, and then it can
give some interesting information
5) to go on qgis execution, type "c" (continue) and validate
6) you can go to 3) again

>
> However I try other ways.
>
> I will use a utility to test the disk activity and after put the qgis
> canvas on a little portion of land covered I add the catalog.vrt.
> Using this utility I can see that qggis try to open all the raster instead
> of open only the single raster necessary to visualize the portion of land
> in the canvas.
>
> After this I see the xml in the catalog:
>
> <SimpleSource>
>   <SourceFilename relativeToVRT="0">F:....216110_2010.ecw</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="13900" RasterYSize="11760"
> DataType="Byte" BlockXSize="13900" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="13900" ySize="11760" />
>       <DstRect xOff="26320" yOff="140" xSize="13900" ySize="11760" />
>     </SimpleSource>
>
> And I notice also that the catalog don't store on every tag of a raster the
> single bbox of that raster.
> So qgis necessary must open all the raster to understand what raster is on
> the visible portion on the canvas.

No, what you show above is sufficient to defer the loading of individual tiles,
until they are really necessary.

What I suspect is that your vrt has no associated overviews, so when you open
qgis, it will try to display the overall coverage of the raster, which then will
require to open each tile.

Try "gdaladdo your.vrt 2 4 8 16 32"

>
> I guess this is a good reason to explain because it is so slow when in the
> catalog there and many hundred of rasters.
>
> Unfortunately I don't find any option in gdalbuildvrt to add the extension
> of every raster in the catalog.

There's none : the above information that is generated by default is sufficient.

Best regards,

Even
From aperi2007 at gmail.com  Thu Feb  2 09:10:42 2012
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu Feb  2 09:11:27 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <1328179703.4f2a69f7e8522@imp.free.fr>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
	<1328179703.4f2a69f7e8522@imp.free.fr>
Message-ID: <CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>

2012/2/2 Even Rouault <even.rouault@mines-paris.org>

> Selon Andrea Peri <aperi2007@gmail.com>:
>
> > Hi,
> >
> > Unfortunately I was unable to test with GDB.
> > My skill was not enough :(
>
> Well, provided you have gdb installed, it is "just" a matter of :
>
> 1) "gdb qgis"
> 2) in the gdb console, type "run" and validate
> 3) when qgis is slow, switch to the console with gdb and hit Ctrl+C
> 4) in the gdb console, type "bt" (for backtrace)and validate, and then it
> can
> give some interesting information
> 5) to go on qgis execution, type "c" (continue) and validate
> 6) you can go to 3) again
>
>
thx, I try it .


> >
> > However I try other ways
>
>

> .....
>


> > So qgis necessary must open all the raster to understand what raster is
> on
> > the visible portion on the canvas.
>
> No, what you show above is sufficient to defer the loading of individual
> tiles,
> until they are really necessary.
>
> What I suspect is that your vrt has no associated overviews, so when you
> open
> qgis, it will try to display the overall coverage of the raster, which
> then will
> require to open each tile.
>
> Try "gdaladdo your.vrt 2 4 8 16 32"
>
>
I try to create the overview, but it is really sloow .
After 1hours is to 0%.

I will try with a selection of few rasters.


>
> > I guess this is a good reason to explain because it is so slow when in
> the
> > catalog there and many hundred of rasters.
> >
> > Unfortunately I don't find any option in gdalbuildvrt to add the
> extension
> > of every raster in the catalog.
>
> There's none : the above information that is generated by default is
> sufficient.
>
>
Sorry Roualt,
the catalog give the start point and the number of pixel , but miss the
size in meters or "unit of map" of every pixel so for me was not possible
to detect the bbox of every raster.
Perhaps in the overview there is the missing information ?

>Best regards,
>
>Even

Thx,
Andrea.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/3582f0d2/attachment.html
From polimax at mail.ru  Thu Feb  2 09:34:31 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu Feb  2 09:34:58 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster
 ?
In-Reply-To: <CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
	<1328179703.4f2a69f7e8522@imp.free.fr>
	<CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
Message-ID: <4F2A9EF7.7070609@mail.ru>

02.02.2012 18:10, Andrea Peri ?????:
>
>
> 2012/2/2 Even Rouault <even.rouault@mines-paris.org 
> <mailto:even.rouault@mines-paris.org>>
>
>     Selon Andrea Peri <aperi2007@gmail.com <mailto:aperi2007@gmail.com>>:
>
>     > Hi,
>     >
>     > Unfortunately I was unable to test with GDB.
>     > My skill was not enough :(
>
>     Well, provided you have gdb installed, it is "just" a matter of :
>
>     1) "gdb qgis"
>     2) in the gdb console, type "run" and validate
>     3) when qgis is slow, switch to the console with gdb and hit Ctrl+C
>     4) in the gdb console, type "bt" (for backtrace)and validate, and
>     then it can
>     give some interesting information
>     5) to go on qgis execution, type "c" (continue) and validate
>     6) you can go to 3) again
>
>
> thx, I try it .
>
>     >
>     > However I try other ways
>
> >
>
>     .....
>
>     > So qgis necessary must open all the raster to understand what
>     raster is on
>     > the visible portion on the canvas.
>
>     No, what you show above is sufficient to defer the loading of
>     individual tiles,
>     until they are really necessary.
>
>     What I suspect is that your vrt has no associated overviews, so
>     when you open
>     qgis, it will try to display the overall coverage of the raster,
>     which then will
>     require to open each tile.
>
>     Try "gdaladdo your.vrt 2 4 8 16 32"
>
>
> I try to create the overview, but it is really sloow .
> After 1hours is to 0%.
>
> I will try with a selection of few rasters.
>
>
>     >
>     > I guess this is a good reason to explain because it is so slow
>     when in the
>     > catalog there and many hundred of rasters.
>     >
>     > Unfortunately I don't find any option in gdalbuildvrt to add the
>     extension
>     > of every raster in the catalog.
>
>     There's none : the above information that is generated by default
>     is sufficient.
>
>
> Sorry Roualt,
> the catalog give the start point and the number of pixel , but miss 
> the size in meters or "unit of map" of every pixel so for me was not 
> possible to detect the bbox of every raster.
> Perhaps in the overview there is the missing information ?
>
> >Best regards,
> >
> >Even
>
> Thx,
> Andrea.
>
>
> -- 
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
We have discussed this problem with Even. I'll fix it. The work is in 
process.

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/aa4a81ee/attachment.html
From even.rouault at mines-paris.org  Thu Feb  2 09:40:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  2 09:41:19 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
	<1328179703.4f2a69f7e8522@imp.free.fr>
	<CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
Message-ID: <1328193634.4f2aa062b15b0@imp.free.fr>


> I try to create the overview, but it is really sloow .
> After 1hours is to 0%.

Well, given the size of the tile whose XML description you gave, I'm not that
surprised it would be very long, if you have lots of similar ones in your VRT.
But after one hour, this is indeed not a good sign that the progress bar stays
at 0%. There is a known performance problem when accessing ECW with some access
patterns ( http://trac.osgeo.org/gdal/ticket/3454 ). Perhaps you are running
into it.

>
> I will try with a selection of few rasters.
>
>
> >
> > > I guess this is a good reason to explain because it is so slow when in
> > the
> > > catalog there and many hundred of rasters.
> > >
> > > Unfortunately I don't find any option in gdalbuildvrt to add the
> > extension
> > > of every raster in the catalog.
> >
> > There's none : the above information that is generated by default is
> > sufficient.
> >
> >
> Sorry Roualt,
> the catalog give the start point and the number of pixel , but miss the
> size in meters or "unit of map" of every pixel so for me was not possible
> to detect the bbox of every raster.

Well, I've spent several dozains of hours hacking in the VRT driver over the
last few years to be pretty sure that there is everything needed in the VRT
generated by gdalbuildvrt to avoid opening each tile when doing windowed
request. If you look at the XML extract you mentionned, we have the information
on the size and blocking of the tile (SourceProperties element), we know which
window of the tile to extract (SrcRect) and we know where it must be located in
the VRT mosaic and at which size (DstRect). The last one (DstRect) is sufficient
to know if a tile is needed to satisfy a RasterIO request on the VRT. There's no
need to known the size in meters of pixels of each tile.

> Perhaps in the overview there is the missing information ?

No, having an overview will just avoid opening each tile.

>
> >Best regards,
> >
> >Even
>
> Thx,
> Andrea.
>
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>


From even.rouault at mines-paris.org  Thu Feb  2 09:44:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  2 09:44:51 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <4F2A9EF7.7070609@mail.ru>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
	<1328179703.4f2a69f7e8522@imp.free.fr>
	<CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
	<4F2A9EF7.7070609@mail.ru>
Message-ID: <1328193875.4f2aa1538770f@imp.free.fr>

> We have discussed this problem with Even. I'll fix it. The work is in
> process.

Dmitry,

See the answer I've just posted, but there's no evidence that Andrea is running
into the performance problems related to wrapped VRT. The VRTs produced by
gdalbuildvrt have no rotation. gdalbuildvrt only accepts "north-up" tiles. I'll
rather suspect a performance problem due to accessing ECW through VRT.

>
> Best regards,
>      Dmitry
>


From polimax at mail.ru  Thu Feb  2 10:03:55 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu Feb  2 10:04:28 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster
 ?
In-Reply-To: <1328193875.4f2aa1538770f@imp.free.fr>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<CABqTJk8YQGxf3F-7WTkSeGTWNJx_pUd2yygn0YZHD-p48sBaSg@mail.gmail.com>
	<1328179703.4f2a69f7e8522@imp.free.fr>
	<CABqTJk8qUXM9wjzxQbFzCYxLtYr2k=mh2bbCWrZtriFQZH7L9A@mail.gmail.com>
	<4F2A9EF7.7070609@mail.ru> <1328193875.4f2aa1538770f@imp.free.fr>
Message-ID: <4F2AA5DB.20401@mail.ru>

02.02.2012 18:44, Even Rouault ?????:
>> We have discussed this problem with Even. I'll fix it. The work is in
>> process.
> Dmitry,
>
> See the answer I've just posted, but there's no evidence that Andrea is running
> into the performance problems related to wrapped VRT. The VRTs produced by
> gdalbuildvrt have no rotation. gdalbuildvrt only accepts "north-up" tiles. I'll
> rather suspect a performance problem due to accessing ECW through VRT.
>
>> Best regards,
>>       Dmitry
>>
>
>
> .
>
Hello Even,

During fixing the problem I'll test this issue (vrt of mosaic raster 
with and without ECW) too, maintaining close contacts with QGIS developers.

Best regards,
Dmitry
From chaitanya.ch at gmail.com  Thu Feb  2 12:03:42 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb  2 12:03:55 2012
Subject: [gdal-dev] Does GDAL has DXF/DWG read/write functionality for
	WINCE platform
In-Reply-To: <CADaE89=-7pMun_bfdh5YDU+zBbHJvhVZkhFmccod9CAUEeYBdQ@mail.gmail.com>
References: <CADaE89=-7pMun_bfdh5YDU+zBbHJvhVZkhFmccod9CAUEeYBdQ@mail.gmail.com>
Message-ID: <CAMKgpObqPZapXgdEEHHCPERTprj9G2VDPfqzK9mv+G_ZbnPo9A@mail.gmail.com>

Radha,

OGR's AutoCAD drivers have limited functionality. The DXF driver is
compiled by default. So if you are planning on using GDAL/OGR you can just
compile the GDAL source for WinCE and confirm that DXF is included by
looking at the build log. Since you are going to use only AutoCAD formats,
you can disable a lot of other features including proj.4 support.

http://trac.osgeo.org/gdal/wiki/BuildHints

On Thu, Feb 2, 2012 at 2:49 PM, radha rani <radha2sai@gmail.com> wrote:

> Hi ,
>
> Iam developing a project which writes DXF/DWG files on WinCE
> Platform,Does GDAL has DXF/DWG read/write functionality for WINCE
> platform,
>
> Please let me know  as soon as possible ,Kindly suggest me is there
> any other alternatives which survives my requirement  i.e
> Writing/Reading  DXF/DWG files on WINCE platform
>
> Thanks & Regards
> Radha
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/b885b803/attachment.html
From zhang at liberasystems.com  Thu Feb  2 15:48:58 2012
From: zhang at liberasystems.com (Xiaodong Zhang)
Date: Thu Feb  2 15:49:17 2012
Subject: [gdal-dev] change the attribute values of a shapefile
Message-ID: <010b01cce1ec$16a1b690$43e523b0$@liberasystems.com>

Hi,

 

I'm just wondering if any of you has done and would like to share your
experience in replacing the attribute values of a shape file.

 

Here is what I'm doing:

 

1.       I have an image with pixels values ranging from, say,  1, 2, 3 and
4

2.       I used gdal_polygonize.py to convert this into a polygone shape
file, with attributes of 1, 2, 3 or 4.

3.       Now I need to replace these attributes with a set new values, say,
10, 20, 30, and 40.

 

Of course, I can do this in the first step, but I'm thinking the best way to
do this is in the last step, because I can preserve the original image. Any
suggestions?

 

Thanks

 

Xiaodong

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/f3fcd79c/attachment.html
From etourigny.dev at gmail.com  Thu Feb  2 16:01:13 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Feb  2 16:01:25 2012
Subject: [gdal-dev] change the attribute values of a shapefile
In-Reply-To: <010b01cce1ec$16a1b690$43e523b0$@liberasystems.com>
References: <010b01cce1ec$16a1b690$43e523b0$@liberasystems.com>
Message-ID: <CA+TxYvMdUWujRBvphBhM1v5trkKULD8nF=dtypxjbu585b92rw@mail.gmail.com>

You can use valrepl.py script to make a copy of your image with new values.
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_repl.py

Or if you really want to edit the shapefile afterwards, try out the
OGR python bindings, but you would need to write your script.

Etienne

On Thu, Feb 2, 2012 at 6:48 PM, Xiaodong Zhang <zhang@liberasystems.com> wrote:
> Hi,
>
>
>
> I?m just wondering if any of you has done and would like to share your
> experience in replacing the attribute values of a shape file.
>
>
>
> Here is what I?m doing:
>
>
>
> 1.?????? I have an image with pixels values ranging from, say, ?1, 2, 3 and
> 4
>
> 2.?????? I used gdal_polygonize.py to convert this into a polygone shape
> file, with attributes of 1, 2, 3 or 4.
>
> 3.?????? Now I need to replace these attributes with a set new values, say,
> 10, 20, 30, and 40.
>
>
>
> Of course, I can do this in the first step, but I?m thinking the best way to
> do this is in the last step, because I can preserve the original image. Any
> suggestions?
>
>
>
> Thanks
>
>
>
> Xiaodong
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From traviskirstine at gmail.com  Thu Feb  2 17:09:21 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu Feb  2 17:09:56 2012
Subject: [gdal-dev] Extract OSM data from PostGIS using OGR
Message-ID: <CALtm4h2G=TRb-Vit-EvNXJ_uFBGGE-U5JkdAH0Vie1LF8XYpgQ@mail.gmail.com>

Is it possible to extract features from a OSM PostGIS / Postgres
database (loaded with osm2pgsql)?
From sault.don at gmail.com  Thu Feb  2 18:04:49 2012
From: sault.don at gmail.com (Donovan Cameron)
Date: Thu Feb  2 18:05:01 2012
Subject: [gdal-dev] "Cannot open existing output data source" error writing
	to GML
Message-ID: <CAJo0jfMFp7hkBRMA4+kCi8nOXX1p3OB56S7X-iooeP9WVV3Osw@mail.gmail.com>

Afternoon List!

I am trying to batch merge several GML files but get the following error:
*Cannot open existing output data source: output.gml*

I can read the file fine with "*ogrinfo output.hml output -so*" and
everything looks normal.

I am able to perform the operation successfully without error on *shapefiles
from the same source.*

Data is from geobase.ca (geographical place names):
ftp://ftp2.cits.rncan.gc.ca/pub/geobase/official/cgn/250k_gml_eng/



Example code:
*for f in *.gml*
* do ogr2ogr -f "GML" merged/output.gml -update -append ${f}*
*done*



Is there a write or read limitation in my version of GDAL or the
GML<http://www.gdal.org/ogr/drv_gml.html>that I don't know about?

*ogr2ogr --version*
*GDAL 1.8.1, released 2011/07/09*
*
*
*ogr2ogr --formats*
*  > "GML" (read/write)*
*
*
Thanks for your time and assistance,

Donovan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/86305543/attachment.html
From warmerdam at pobox.com  Thu Feb  2 18:24:50 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  2 18:25:20 2012
Subject: [gdal-dev] "Cannot open existing output data source" error
	writing to GML
In-Reply-To: <CAJo0jfMFp7hkBRMA4+kCi8nOXX1p3OB56S7X-iooeP9WVV3Osw@mail.gmail.com>
References: <CAJo0jfMFp7hkBRMA4+kCi8nOXX1p3OB56S7X-iooeP9WVV3Osw@mail.gmail.com>
Message-ID: <CA+YzLBf--cVKP1nskuZcvPcwcFaiuZZUY8FcUqCZ73kQ0H5qjw@mail.gmail.com>

Donovan,

The problem is that the GML driver does not support "in place" update or
append support for GML files.  So you can't use the -update -append options
of ogr2ogr with an output GML file.  Instead you will need to collect your
input files into one output file in another format that does support appending.
Shapefiles, and most RDBMS drivers support appending.

Then you can do one ogr2ogr from that aggregate feature collection to
GML in one go.

If you wanted to write a script you could actually write feature from several
sources into one GML file more directly as long as the GML file isn't closed
until all features are written but this is fairly involved.

Best regards,
Frank

On Thu, Feb 2, 2012 at 3:04 PM, Donovan Cameron <sault.don@gmail.com> wrote:
> Afternoon List!
>
> I am trying to batch merge several GML files but get the following error:
> Cannot open existing output data source: output.gml
>
> I can read the file fine with "ogrinfo output.hml output -so" and everything
> looks normal.
>
> I am able to perform the operation successfully without error on shapefiles
> from the same source.
>
> Data is from geobase.ca (geographical place names):
> ftp://ftp2.cits.rncan.gc.ca/pub/geobase/official/cgn/250k_gml_eng/
>
>
>
> Example code:
> for f in *.gml
> ?do ogr2ogr -f "GML" merged/output.gml -update -append ${f}
> done
>
>
>
> Is there a write or read limitation in my version of GDAL or the GML that I
> don't know about?
>
> ogr2ogr --version
> GDAL 1.8.1, released 2011/07/09
>
> ogr2ogr --formats
> ? > "GML" (read/write)
>
> Thanks for your time and assistance,
>
> Donovan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From david.m.baker at chk.com  Thu Feb  2 18:31:41 2012
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Thu Feb  2 18:33:03 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl 
Message-ID: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>

All,

Working in C#...  I have need for EPSG:4418. Per http://www.epsg-registry.org/ this is the code for "ProjectedCRS [NAD27 / BLM 18N (ftUS)]".  This code does not seem to be in the GDAL/OGR/Prog4 database in FWTools2.4.7.  Executing the line:

var i = src.ImportFromEPSG(4418);

This call returns an error indicating the code is invalid.  I also searched the /data directory for this projection but was not able to find it.  So my next move was to try:

var i = src.ImportFromUrl(@"http://www.epsg-registry.org/export.htm?gml=urn:ogc:def:crs:EPSG::4410");

This did not work either.

So my general question is, for missing CRS's how does one retrieve the projection information from the web?

Thanks in Advance,
David

David M. Baker
Senior Advisor - Geoscience Technology
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com<mailto:david.m.baker@chk.com>


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/b6534087/attachment-0001.html
From refriguy68 at yahoo.com  Thu Feb  2 18:49:03 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Thu Feb  2 18:52:19 2012
Subject: [gdal-dev] GDALEndAsyncReader() takes long time to return
Message-ID: <1328226543.23782.YahooMailClassic@web161006.mail.bf1.yahoo.com>

I am trying to stream JPIPs.? I have two threads that are accessing the same file using the same GDALfiledataset.? One thread is a subsample image used as a navigator and the other thread is the full-sized image for the viewer to see the full image.
?
Each thread uses its own GDALAsyncReaderH Object.? Each thread detects if the AsyncReader object is not NULL prior to calling GDALBeginAsyncReader().? If either AsyncReader is not NULL, then call GDALEndAsyncReader().? Sounds good right?
?
Has anyone experienced the issue of GDALEndAsyncReader() taking longer than 10-20 seconds to return?? Can someone explain to me why it might take that long just to delete the AsyncReader object for JPIP to be able to process my next wanted region?
?
I hope that makes since for anyone to answer my quest.? If not, let me know as I can provide more information.? I am currently using the repository build from 2-1-2012
?
Thanks,
?
Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/903fd642/attachment.html
From warmerdam at pobox.com  Thu Feb  2 19:05:08 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  2 19:05:27 2012
Subject: [gdal-dev] GDALEndAsyncReader() takes long time to return
In-Reply-To: <1328226543.23782.YahooMailClassic@web161006.mail.bf1.yahoo.com>
References: <1328226543.23782.YahooMailClassic@web161006.mail.bf1.yahoo.com>
Message-ID: <CA+YzLBf2S8eNTb=HCauAtjX1o1sZsP5_7ow1NYj5fOajjx=7gg@mail.gmail.com>

On Thu, Feb 2, 2012 at 3:49 PM, Robert Zermeno <refriguy68@yahoo.com> wrote:

> I am trying to stream JPIPs.  I have two threads that are accessing the
> same file using the same GDALfiledataset.  One thread is a subsample image
> used as a navigator and the other thread is the full-sized image for the
> viewer to see the full image.
>
> Each thread uses its own GDALAsyncReaderH Object.  Each thread detects if
> the AsyncReader object is not NULL prior to calling
> GDALBeginAsyncReader().  If either AsyncReader is not NULL, then call
> GDALEndAsyncReader().  Sounds good right?
>
> Has anyone experienced the issue of GDALEndAsyncReader() taking longer
> than 10-20 seconds to return?  Can someone explain to me why it might take
> that long just to delete the AsyncReader object for JPIP to be able to
> process my next wanted region?
>
> I hope that makes since for anyone to answer my quest.  If not, let me
> know as I can provide more information.  I am currently using the
> repository build from 2-1-2012
>
>

Bob,

The JPIP driver implementation is a bit messy and I suspect
much more complicated than it really needs to be.  Looking
at the JPIPKAKAsyncReader::Stop() method it seems there is
interaction with a global mutex (global to the dataset that is), and
then potentially waiting for the work thread to report back that it
is complete.  It is not immediately obvious to me why this would
take a long time.

It looks like the Stop() function effectively sets one
of bHighThreadRunning or bLowThreadRunning to FALSE
as an indicator that the JPIPWorkerFunc() should stop after
it has finished processing it's next chunk from the server.
Depending on chunk size and latency this might be a while
I suppose.  In theory we might be able to make the
JPIPWorkerFunc() do more fine grained checking - for
instance between reading of data by http and processing
it via the jpeg2000 ReadFromInput() method.

I'd suggest turning on debug output (eg. CPL_DEBUG=ON)
and add some debug output in JPIPWorkerFunc to see if it
is holding things up.  Possibly it is also some problem getting
one of the mutexes.  I didn't normally have more than one
async request at a time so there could be some fails in
the periods over which the mutexes are held.

Patches welcome!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/0a792d5b/attachment.html
From nhatzop at gmail.com  Thu Feb  2 19:10:22 2012
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Feb  2 19:10:55 2012
Subject: [gdal-dev] Web site downtime
In-Reply-To: <CA+YzLBfVEJjYhAHHG7V9bCT754uE9aA=mW=vo72=yqB4NxKHnA@mail.gmail.com>
References: <CA+YzLBfVEJjYhAHHG7V9bCT754uE9aA=mW=vo72=yqB4NxKHnA@mail.gmail.com>
Message-ID: <CALDJGKAdc1jyWHHzautbKz3PPFR1vFEp8-ArWREN9rWTix-8hQ@mail.gmail.com>

Now you start realizing why enterprise linux exists :)

--Nikos

On Wed, Feb 1, 2012 at 5:22 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Folks,
>
> The OSGeo ProjectsVM is down while we upgrade the OS (an upgrade
> that has encountered some issues).  While this is being resolved the
> hosted sites including gdal.org, mapserver.org, grass.org will be down.
>
>  http://wiki.osgeo.org/wiki/ProjectsVM
>
> Downtime could potentially be in the hours or even a day or two.  I won't
> announce when things are back but you can always try.  Note that Trac
> for bug reporting, and subversion are not down.
>
> Sorry for the inconvenience.  And damn Debian major OS version
> in-place upgrades. :-)
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120202/4fb0908b/attachment.html
From paul at mactrix.com.au  Thu Feb  2 21:50:12 2012
From: paul at mactrix.com.au (Paul Jacobson)
Date: Thu Feb  2 22:00:01 2012
Subject: [gdal-dev] Updates/improvements to GDAL's OziExplorer driver?
Message-ID: <ED2BC8F5-34DF-4924-A7C9-FF35D72C15D0@mactrix.com.au>

Hi,

I've been attempting to use GDAL's Ozi driver to convert .map/.ozfx3 pairs into GeoTiff format but have been stymied by the limitations of the existing Ozi driver.  The maps I'm trying to convert use the Australian standard GDA94/UTM and it appears the current Ozi driver does not support the UTM grid.

I'd come across Jean-Claude Repetto's patches to the Ozi driver in Trac and have applied them to the 1.8.1 source, however it appears these patches don't address the lack of support for UTM.  I've since had some off-list correspondence with Jean-Claude, who has indicated he is planning to add support for all projections to the Ozi drivers, however the initial patches he provided 12 months ago have not yet been accepted.

To quote Jean Claude from a post to the gdal-dev list on 30/1/2012:
> I planned to submit several small patches for inclusion of this driver 
> in GDAL trunk. The first one has been sent in this ticket :
> http://trac.osgeo.org/gdal/ticket/3929
> 
> Unfortunately, this patch is still waiting in Trac. I'll wait until it 
> is accepted before continuing my work.


It would be extremely useful to have a Ozi driver that supports a wider range of projections than the current iteration, and it seems slightly odd that a developer who is ready to do the necessary work to improve the driver is not being encouraged.

cheers
Paul






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120203/d34b147b/attachment.html
From jukka.rahkonen at mmmtike.fi  Fri Feb  3 02:30:00 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Feb  3 02:30:53 2012
Subject: [gdal-dev] Re: Extract OSM data from PostGIS using OGR
References: <CALtm4h2G=TRb-Vit-EvNXJ_uFBGGE-U5JkdAH0Vie1LF8XYpgQ@mail.gmail.com>
Message-ID: <loom.20120203T082751-736@post.gmane.org>

Travis Kirstine <traviskirstine <at> gmail.com> writes:

> 
> Is it possible to extract features from a OSM PostGIS / Postgres
> database (loaded with osm2pgsql)?

For sure. The osm_point, osm_line and osm_polygon tables are normal spatial
tables which can be read with GDAL Postgis driver http://gdal.org/ogr/drv_pg.html

-Jukka Rahkonen-


From jrepetto at free.fr  Fri Feb  3 02:34:41 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Feb  3 02:35:39 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl
In-Reply-To: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
Message-ID: <4F2B8E11.4020006@free.fr>

On 02/03/12 00:31, David Baker (Geoscience) wrote:
> All,
>
> Working in C#... I have need for EPSG:4418. Per
> http://www.epsg-registry.org/ this is the code for ?ProjectedCRS [NAD27
> / BLM 18N (ftUS)]?. This code does not seem to be in the GDAL/OGR/Prog4
> database in FWTools2.4.7. Executing the line:
>
> var i = src.ImportFromEPSG(4418);
>
> This call returns an error indicating the code is invalid.

Hello,

In GDAL 1.9, it is not missing. Have you tried epsg_tr.py ?

$ epsg_tr.py 4418
PROJCS["NAD27 / BLM 18N (ftUS)",
     GEOGCS["NAD27",
         DATUM["North_American_Datum_1927",
             SPHEROID["Clarke 1866",6378206.4,294.9786982138982,
                 AUTHORITY["EPSG","7008"]],
             AUTHORITY["EPSG","6267"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4267"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-75],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",1640416.67],
     PARAMETER["false_northing",0],
     UNIT["US survey foot",0.3048006096012192,
         AUTHORITY["EPSG","9003"]],
     AXIS["X",EAST],
     AXIS["Y",NORTH],
     AUTHORITY["EPSG","4418"]]


Regards,
Jean-Claude
From andy.cheetham at geomaticsolutions.com  Fri Feb  3 02:44:33 2012
From: andy.cheetham at geomaticsolutions.com (Andy Cheetham)
Date: Fri Feb  3 02:45:13 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl
In-Reply-To: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
Message-ID: <CAJsGmkhgX7o84piBaGTWcXkfdo2vyiEO4VKr3zQWj+bQ9T1eAQ@mail.gmail.com>

You could try our website the GeoRepository.com

It will provide you with all the details of the CRS in question

http://georepository.com/search/by-name/?query=4418

Hope this helps

Andy Cheetham
On 2 Feb 2012 23:33, "David Baker (Geoscience)" <david.m.baker@chk.com>
wrote:

>  All,
>
>
>
> Working in C#...  I have need for EPSG:4418. Per
> http://www.epsg-registry.org/ this is the code for ?ProjectedCRS [NAD27 /
> BLM 18N (ftUS)]?.  This code does not seem to be in the GDAL/OGR/Prog4
> database in FWTools2.4.7.  Executing the line:
>
>
>
> var i = src.ImportFromEPSG(4418);
>
>
>
> This call returns an error indicating the code is invalid.  I also
> searched the /data directory for this projection but was not able to find
> it.  So my next move was to try:
>
>
>
> var i = src.ImportFromUrl(@"
> http://www.epsg-registry.org/export.htm?gml=urn:ogc:def:crs:EPSG::4410");
>
>
>
> This did not work either.
>
>
>
> So my general question is, for missing CRS?s how does one retrieve the
> projection information from the web?
>
>
>
> Thanks in Advance,
>
> David
>
>
>
> *David M. Baker*
>
> Senior Advisor ? Geoscience Technology
>
> Chesapeake Energy Corporation
>
> 405-935-3715 office
>
> 405-496-5373 cell
>
> david.m.baker@chk.com
>
>
>
> ------------------------------
>
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is privileged, confidential and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120203/2d480605/attachment.html
From peter.hopfgartner at r3-gis.com  Fri Feb  3 06:23:47 2012
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri Feb  3 06:30:59 2012
Subject: [gdal-dev] Issue GDAL with JPEG-compressed TIFFS
Message-ID: <4F2BC3C3.7000102@r3-gis.com>

I'm doing quite some experiments with GDAL and image compression these days

I do have an issue with geotiff 1.3/gdal 1.8.1 on CentOS 6 with packages 
from ELGIS. The story goes like this:

I create tiffs with

gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=90
  -co "TILED=YES" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" <infile> 
<outfile>

and then add overviews with (I do have to add the overlays in distinct 
steps, otherwise gdaladdo aborts with an error message).

gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW 
PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 3
gdaladdo  --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW 
PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 9
gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW 
PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 27
gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW 
PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 81

(Trying with power-of-2-steps gives the same result. If I drop all 
options from gdaladdo: same result).

I'll create a WMS service with MapServer 5.6.7 and do get a big red 
square in the image. The square is "fixed" to the geografical position, 
e.g. if I move the extend the square moves too. The square is situated 
in the corner of the tiff file.
It appears only at some scales. If I change it very slightly, the square 
remqins, if I change for more then approx 1%, it disappears.

I've put the two images at

http://www.r3-gis.com/gdal_issues/tiff_with_jpegcompression_and_overviews.jpeg 
and
http://www.r3-gis.com/gdal_issues/tiff_with_nocompression_and_overviews.jpeg
.

The problem disappears if I do not run gdaladdo on the images or when I 
do not use Jpeg compression:

gdal_translate -of GTiff  -co "TILED=YES" -co "BLOCKXSIZE=512" -co 
"BLOCKYSIZE=512" <origfile> <targetfile>

There are some hits for 
http://www.google.com/search?client=ubuntu&channel=fs&q=mapserver+artefacts+in+raster+gdal&ie=utf-8&oe=utf-8, 
but mostly related to older versions of GDAL and without resolution.


Thanks,

Peter

-- 

Peter Hopfgartner
R3 GIS Srl - GmbH
www.r3-gis.com


From david.m.baker at chk.com  Fri Feb  3 07:19:35 2012
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Fri Feb  3 07:20:20 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl
In-Reply-To: <CAJsGmkhgX7o84piBaGTWcXkfdo2vyiEO4VKr3zQWj+bQ9T1eAQ@mail.gmail.com>
References: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
	<CAJsGmkhgX7o84piBaGTWcXkfdo2vyiEO4VKr3zQWj+bQ9T1eAQ@mail.gmail.com>
Message-ID: <2A18A4344312134B937DF938D992264A02929BB6@OKCEXHPRD102.chkenergy.net>

Andy,

Great reference!  Thanks for the info.  But, when I execute the line:

var i = src.ImportFromUrl(@"http://georepository.com/search/by-name/?query=4418");

I get an error 6 of 6.  This gets back to my second question, can, and if so, how does one call on a URL to get the parameter info ?

Thanks,
David

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andy Cheetham
Sent: Friday, February 03, 2012 1:45 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Missing EPSG Codes and importFromUrl


You could try our website the GeoRepository.com

It will provide you with all the details of the CRS in question

http://georepository.com/search/by-name/?query=4418

Hope this helps

Andy Cheetham
On 2 Feb 2012 23:33, "David Baker (Geoscience)" <david.m.baker@chk.com<mailto:david.m.baker@chk.com>> wrote:
All,

Working in C#...  I have need for EPSG:4418. Per http://www.epsg-registry.org/ this is the code for "ProjectedCRS [NAD27 / BLM 18N (ftUS)]".  This code does not seem to be in the GDAL/OGR/Prog4 database in FWTools2.4.7.  Executing the line:

var i = src.ImportFromEPSG(4418);

This call returns an error indicating the code is invalid.  I also searched the /data directory for this projection but was not able to find it.  So my next move was to try:

var i = src.ImportFromUrl(@"http://www.epsg-registry.org/export.htm?gml=urn:ogc:def:crs:EPSG::4410");

This did not work either.

So my general question is, for missing CRS's how does one retrieve the projection information from the web?

Thanks in Advance,
David

David M. Baker
Senior Advisor - Geoscience Technology
Chesapeake Energy Corporation
405-935-3715<tel:405-935-3715> office
405-496-5373<tel:405-496-5373> cell
david.m.baker@chk.com<mailto:david.m.baker@chk.com>


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120203/9ef504a0/attachment.html
From even.rouault at mines-paris.org  Fri Feb  3 07:41:25 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb  3 07:41:47 2012
Subject: [gdal-dev] Issue GDAL with JPEG-compressed TIFFS
In-Reply-To: <4F2BC3C3.7000102@r3-gis.com>
References: <4F2BC3C3.7000102@r3-gis.com>
Message-ID: <1328272885.4f2bd5f552bed@imp.free.fr>

Peter,

Does ELGIS GDAL uses internal libtiff (4.0beta) or external libtiff (3.8 or 3.9)
? I guess it is external libtiff, and then it could explain the issues you have
with overviews and JPEG compression. There have been fixes in libtiff 4 to
better support that situation (multiple IFDs with compression). Altertantively,
you could probably workaround that by generating external overviews (add -ro to
the gdaladdo command line), but no guarantees. By the way, the --config
COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW PIXEL --config
JPEG_QUALITY_OVERVIEW 90 options only apply to external overviews, not internal
ones.

> I'm doing quite some experiments with GDAL and image compression these days
>
> I do have an issue with geotiff 1.3/gdal 1.8.1 on CentOS 6 with packages
> from ELGIS. The story goes like this:
>
> I create tiffs with
>
> gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=90
>   -co "TILED=YES" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" <infile>
> <outfile>
>
> and then add overviews with (I do have to add the overlays in distinct
> steps, otherwise gdaladdo aborts with an error message).
>
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 3
> gdaladdo  --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 9
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 27
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average <outfile> 81
>
> (Trying with power-of-2-steps gives the same result. If I drop all
> options from gdaladdo: same result).
>
> I'll create a WMS service with MapServer 5.6.7 and do get a big red
> square in the image. The square is "fixed" to the geografical position,
> e.g. if I move the extend the square moves too. The square is situated
> in the corner of the tiff file.
> It appears only at some scales. If I change it very slightly, the square
> remqins, if I change for more then approx 1%, it disappears.
>
> I've put the two images at
>
> http://www.r3-gis.com/gdal_issues/tiff_with_jpegcompression_and_overviews.jpeg
> and
> http://www.r3-gis.com/gdal_issues/tiff_with_nocompression_and_overviews.jpeg
> .
>
> The problem disappears if I do not run gdaladdo on the images or when I
> do not use Jpeg compression:
>
> gdal_translate -of GTiff  -co "TILED=YES" -co "BLOCKXSIZE=512" -co
> "BLOCKYSIZE=512" <origfile> <targetfile>
>
> There are some hits for
>
http://www.google.com/search?client=ubuntu&channel=fs&q=mapserver+artefacts+in+raster+gdal&ie=utf-8&oe=utf-8,
> but mostly related to older versions of GDAL and without resolution.
>
>
> Thanks,
>
> Peter
>
> --
>
> Peter Hopfgartner
> R3 GIS Srl - GmbH
> www.r3-gis.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From peter.hopfgartner at r3-gis.com  Fri Feb  3 08:04:45 2012
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri Feb  3 08:05:31 2012
Subject: [gdal-dev] Issue GDAL with JPEG-compressed TIFFS
In-Reply-To: <1328272885.4f2bd5f552bed@imp.free.fr>
References: <4F2BC3C3.7000102@r3-gis.com>
	<1328272885.4f2bd5f552bed@imp.free.fr>
Message-ID: <4F2BDB6D.7080001@r3-gis.com>

Hi Evan

Indeed, the external libtiff is used and is version 
libtiff-3.9.4-1.el6_0.3.x86_64.
In the mean time I did a quick compile of gdal-1.9.0 with internal 
libtiff and the square disappeared.
Probably it would be a wise decision to switch to libtiff4 quickly, as 
far as ELGIS is concerned.

Thanks,

Peter

On 02/03/2012 01:41 PM, Even Rouault wrote:
> Peter,
>
> Does ELGIS GDAL uses internal libtiff (4.0beta) or external libtiff (3.8 or 3.9)
> ? I guess it is external libtiff, and then it could explain the issues you have
> with overviews and JPEG compression. There have been fixes in libtiff 4 to
> better support that situation (multiple IFDs with compression). Altertantively,
> you could probably workaround that by generating external overviews (add -ro to
> the gdaladdo command line), but no guarantees. By the way, the --config
> COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW PIXEL --config
> JPEG_QUALITY_OVERVIEW 90 options only apply to external overviews, not internal
> ones.
>
>> I'm doing quite some experiments with GDAL and image compression these days
>>
>> I do have an issue with geotiff 1.3/gdal 1.8.1 on CentOS 6 with packages
>> from ELGIS. The story goes like this:
>>
>> I create tiffs with
>>
>> gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=90
>>    -co "TILED=YES" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512"<infile>
>> <outfile>
>>
>> and then add overviews with (I do have to add the overlays in distinct
>> steps, otherwise gdaladdo aborts with an error message).
>>
>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
>> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  3
>> gdaladdo  --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
>> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  9
>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
>> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  27
>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
>> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  81
>>
>> (Trying with power-of-2-steps gives the same result. If I drop all
>> options from gdaladdo: same result).
>>
>> I'll create a WMS service with MapServer 5.6.7 and do get a big red
>> square in the image. The square is "fixed" to the geografical position,
>> e.g. if I move the extend the square moves too. The square is situated
>> in the corner of the tiff file.
>> It appears only at some scales. If I change it very slightly, the square
>> remqins, if I change for more then approx 1%, it disappears.
>>
>> I've put the two images at
>>
>> http://www.r3-gis.com/gdal_issues/tiff_with_jpegcompression_and_overviews.jpeg
>> and
>> http://www.r3-gis.com/gdal_issues/tiff_with_nocompression_and_overviews.jpeg
>> .
>>
>> The problem disappears if I do not run gdaladdo on the images or when I
>> do not use Jpeg compression:
>>
>> gdal_translate -of GTiff  -co "TILED=YES" -co "BLOCKXSIZE=512" -co
>> "BLOCKYSIZE=512"<origfile>  <targetfile>
>>
>> There are some hits for
>>
> http://www.google.com/search?client=ubuntu&channel=fs&q=mapserver+artefacts+in+raster+gdal&ie=utf-8&oe=utf-8,
>> but mostly related to older versions of GDAL and without resolution.
>>
>>
>> Thanks,
>>
>> Peter
>>
>> --
>>
>> Peter Hopfgartner
>> R3 GIS Srl - GmbH
>> www.r3-gis.com
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


-- 
Peter Hopfgartner
R3 GIS Srl - GmbH
web  : www.r3-gis.com


From even.rouault at mines-paris.org  Fri Feb  3 08:52:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb  3 08:53:11 2012
Subject: [gdal-dev] Issue GDAL with JPEG-compressed TIFFS
In-Reply-To: <4F2BDB6D.7080001@r3-gis.com>
References: <4F2BC3C3.7000102@r3-gis.com>
	<1328272885.4f2bd5f552bed@imp.free.fr>
	<4F2BDB6D.7080001@r3-gis.com>
Message-ID: <1328277139.4f2be693a4804@imp.free.fr>

Selon Peter Hopfgartner <peter.hopfgartner@r3-gis.com>:

I'm not sure of your exact plans, but if you want to switch to internal libtiff
4 with GDAL 1.8.1, you might get into problems with applications that link both
with GDAL and external libtiff 3.9, because of symbol conflicts. If you switch
your external libtiff to libtiff 4, no problem of course.

If you still want to both keep external libtiff to libtiff 3.9 and use internal
libtiff 4 within GDAL, I'd strongly recommand upgrading to GDAL 1.9.0 and using
the new --with-rename-internal-libtiff-symbols and
--with-rename-internal-libgeotiff-symbols configure flags, of course combined
with --with-libtiff=internal and --with-geotiff=internal. This will avoid
symbols conflicts. FYI, the UbuntuGIS team is also planning to do so soon.


> Hi Evan
>
> Indeed, the external libtiff is used and is version
> libtiff-3.9.4-1.el6_0.3.x86_64.
> In the mean time I did a quick compile of gdal-1.9.0 with internal
> libtiff and the square disappeared.
> Probably it would be a wise decision to switch to libtiff4 quickly, as
> far as ELGIS is concerned.
>
> Thanks,
>
> Peter
>
> On 02/03/2012 01:41 PM, Even Rouault wrote:
> > Peter,
> >
> > Does ELGIS GDAL uses internal libtiff (4.0beta) or external libtiff (3.8 or
> 3.9)
> > ? I guess it is external libtiff, and then it could explain the issues you
> have
> > with overviews and JPEG compression. There have been fixes in libtiff 4 to
> > better support that situation (multiple IFDs with compression).
> Altertantively,
> > you could probably workaround that by generating external overviews (add
> -ro to
> > the gdaladdo command line), but no guarantees. By the way, the --config
> > COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW PIXEL --config
> > JPEG_QUALITY_OVERVIEW 90 options only apply to external overviews, not
> internal
> > ones.
> >
> >> I'm doing quite some experiments with GDAL and image compression these
> days
> >>
> >> I do have an issue with geotiff 1.3/gdal 1.8.1 on CentOS 6 with packages
> >> from ELGIS. The story goes like this:
> >>
> >> I create tiffs with
> >>
> >> gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=90
> >>    -co "TILED=YES" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512"<infile>
> >> <outfile>
> >>
> >> and then add overviews with (I do have to add the overlays in distinct
> >> steps, otherwise gdaladdo aborts with an error message).
> >>
> >> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> >> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  3
> >> gdaladdo  --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> >> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  9
> >> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> >> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  27
> >> gdaladdo --config COMPRESS_OVERVIEW JPEG --config INTERLEAVE_OVERVIEW
> >> PIXEL --config JPEG_QUALITY_OVERVIEW 90 -r average<outfile>  81
> >>
> >> (Trying with power-of-2-steps gives the same result. If I drop all
> >> options from gdaladdo: same result).
> >>
> >> I'll create a WMS service with MapServer 5.6.7 and do get a big red
> >> square in the image. The square is "fixed" to the geografical position,
> >> e.g. if I move the extend the square moves too. The square is situated
> >> in the corner of the tiff file.
> >> It appears only at some scales. If I change it very slightly, the square
> >> remqins, if I change for more then approx 1%, it disappears.
> >>
> >> I've put the two images at
> >>
> >>
> http://www.r3-gis.com/gdal_issues/tiff_with_jpegcompression_and_overviews.jpeg
> >> and
> >>
> http://www.r3-gis.com/gdal_issues/tiff_with_nocompression_and_overviews.jpeg
> >> .
> >>
> >> The problem disappears if I do not run gdaladdo on the images or when I
> >> do not use Jpeg compression:
> >>
> >> gdal_translate -of GTiff  -co "TILED=YES" -co "BLOCKXSIZE=512" -co
> >> "BLOCKYSIZE=512"<origfile>  <targetfile>
> >>
> >> There are some hits for
> >>
> >
>
http://www.google.com/search?client=ubuntu&channel=fs&q=mapserver+artefacts+in+raster+gdal&ie=utf-8&oe=utf-8,
> >> but mostly related to older versions of GDAL and without resolution.
> >>
> >>
> >> Thanks,
> >>
> >> Peter
> >>
> >> --
> >>
> >> Peter Hopfgartner
> >> R3 GIS Srl - GmbH
> >> www.r3-gis.com
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
>
>
> --
> Peter Hopfgartner
> R3 GIS Srl - GmbH
> web  : www.r3-gis.com
>
>
>


From hobu.inc at gmail.com  Fri Feb  3 09:09:10 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Feb  3 09:09:59 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl
In-Reply-To: <2A18A4344312134B937DF938D992264A02929BB6@OKCEXHPRD102.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
	<CAJsGmkhgX7o84piBaGTWcXkfdo2vyiEO4VKr3zQWj+bQ9T1eAQ@mail.gmail.com>
	<2A18A4344312134B937DF938D992264A02929BB6@OKCEXHPRD102.chkenergy.net>
Message-ID: <C8DC1BFD-6658-4A29-AA00-F3A48C98665D@gmail.com>

Caveats about importFromUrl:

* It only can consume http://, not https://
* It adds Accept: application/x-ogcwkt to the headers, and so the server can respond with that data
* It simply fetches the data from the URL and hands it off to SetFromUserInput, which is OSR's swiss army knife of SRS consumption.

Neither epsg-registry.org nor georepository.com return a simple text string of OGC WKT [1], and so there is no way for SetFromUserInput to be able to consume the data once cUrl fetches it.  You either need to find a URL on these websites that returns (plain) data that SetFromUserInput can ultimately consume, or modify these websites to respond to the Accept: header and return data accordingly.

[1] http://spatialreference.org/ref/epsg/4326/ogcwkt/

As far as EPSG:4418 is concerned, spatialreference.org doesn't have it, though it appears to just be NAD 27 UTM 10N with feet instead of meters for the units. You should be able to craft this by modifying things directly using the OSR module of the SWIG bindings.  The reason why 4418 isn't in spatialreference.org is most likely because it is pretty new, and spatialreference.org hasn't been updated with a new EPSG database in a while.

Here's some Python that might demonstrate how to get what you want... 

> href = osr.SpatialReference()
> href.ImportFromEPSG(26710)  # Import the NAD27 UTM variant, and then we'll change the units
> href.SetTargetLinearUnits("PROJCS", "U.S. Foot",  0.3048006096012)
> href.SetAuthority("UNIT", "EPSG", 9003)

Howard


On Feb 3, 2012, at 6:19 AM, David Baker (Geoscience) wrote:

> Andy,
>  
> Great reference!  Thanks for the info.  But, when I execute the line:
>  
> var i = src.ImportFromUrl(@"http://georepository.com/search/by-name/?query=4418");
>  
> I get an error 6 of 6.  This gets back to my second question, can, and if so, how does one call on a URL to get the parameter info ?
>  
> Thanks,
> David
>  
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andy Cheetham
> Sent: Friday, February 03, 2012 1:45 AM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Missing EPSG Codes and importFromUrl
>  
> You could try our website the GeoRepository.com
> 
> It will provide you with all the details of the CRS in question
> 
> http://georepository.com/search/by-name/?query=4418
> 
> Hope this helps
> 
> Andy Cheetham
> 
> On 2 Feb 2012 23:33, "David Baker (Geoscience)" <david.m.baker@chk.com> wrote:
> All,
>  
> Working in C#...  I have need for EPSG:4418. Per http://www.epsg-registry.org/ this is the code for ?ProjectedCRS [NAD27 / BLM 18N (ftUS)]?.  This code does not seem to be in the GDAL/OGR/Prog4 database in FWTools2.4.7.  Executing the line:
>  
> var i = src.ImportFromEPSG(4418);
>  
> This call returns an error indicating the code is invalid.  I also searched the /data directory for this projection but was not able to find it.  So my next move was to try:
>  
> var i = src.ImportFromUrl(@"http://www.epsg-registry.org/export.htm?gml=urn:ogc:def:crs:EPSG::4410");
>  
> This did not work either.
>  
> So my general question is, for missing CRS?s how does one retrieve the projection information from the web?
>  
> Thanks in Advance,
> David
>  
> David M. Baker
> Senior Advisor ? Geoscience Technology
> Chesapeake Energy Corporation
> 405-935-3715 office
> 405-496-5373 cell
> david.m.baker@chk.com
>  
>  
> 
> This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From david.m.baker at chk.com  Fri Feb  3 09:58:33 2012
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Fri Feb  3 09:58:51 2012
Subject: [gdal-dev] Missing EPSG Codes and importFromUrl
In-Reply-To: <C8DC1BFD-6658-4A29-AA00-F3A48C98665D@gmail.com>
References: <2A18A4344312134B937DF938D992264A0292918E@OKCEXHPRD102.chkenergy.net>
	<CAJsGmkhgX7o84piBaGTWcXkfdo2vyiEO4VKr3zQWj+bQ9T1eAQ@mail.gmail.com>
	<2A18A4344312134B937DF938D992264A02929BB6@OKCEXHPRD102.chkenergy.net>
	<C8DC1BFD-6658-4A29-AA00-F3A48C98665D@gmail.com>
Message-ID: <2A18A4344312134B937DF938D992264A02929F8A@OKCEXHPRD102.chkenergy.net>

Howard,

Thank you for your advice.  For what I need now, I will most likely try your python approach.  Do you know if there are any plans for GDAL/OGR to be able to work with the epsg-registry.org is the official store of the EPSG data.  It would be great if we could pass a url and osr would traverse the site getting all the needed data.

David
-----Original Message-----
From: Howard Butler [mailto:hobu.inc@gmail.com]
Sent: Friday, February 03, 2012 8:09 AM
To: David Baker (Geoscience)
Cc: 'Andy Cheetham'; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Missing EPSG Codes and importFromUrl

Caveats about importFromUrl:

* It only can consume http://, not https://
* It adds Accept: application/x-ogcwkt to the headers, and so the server can respond with that data
* It simply fetches the data from the URL and hands it off to SetFromUserInput, which is OSR's swiss army knife of SRS consumption.

Neither epsg-registry.org nor georepository.com return a simple text string of OGC WKT [1], and so there is no way for SetFromUserInput to be able to consume the data once cUrl fetches it.  You either need to find a URL on these websites that returns (plain) data that SetFromUserInput can ultimately consume, or modify these websites to respond to the Accept: header and return data accordingly.

[1] http://spatialreference.org/ref/epsg/4326/ogcwkt/

As far as EPSG:4418 is concerned, spatialreference.org doesn't have it, though it appears to just be NAD 27 UTM 10N with feet instead of meters for the units. You should be able to craft this by modifying things directly using the OSR module of the SWIG bindings.  The reason why 4418 isn't in spatialreference.org is most likely because it is pretty new, and spatialreference.org hasn't been updated with a new EPSG database in a while.

Here's some Python that might demonstrate how to get what you want...

> href = osr.SpatialReference()
> href.ImportFromEPSG(26710)  # Import the NAD27 UTM variant, and then we'll change the units
> href.SetTargetLinearUnits("PROJCS", "U.S. Foot",  0.3048006096012)
> href.SetAuthority("UNIT", "EPSG", 9003)

Howard


On Feb 3, 2012, at 6:19 AM, David Baker (Geoscience) wrote:

> Andy,
>
> Great reference!  Thanks for the info.  But, when I execute the line:
>
> var i = src.ImportFromUrl(@"http://georepository.com/search/by-name/?query=4418");
>
> I get an error 6 of 6.  This gets back to my second question, can, and if so, how does one call on a URL to get the parameter info ?
>
> Thanks,
> David
>
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andy Cheetham
> Sent: Friday, February 03, 2012 1:45 AM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Missing EPSG Codes and importFromUrl
>
> You could try our website the GeoRepository.com
>
> It will provide you with all the details of the CRS in question
>
> http://georepository.com/search/by-name/?query=4418
>
> Hope this helps
>
> Andy Cheetham
>
> On 2 Feb 2012 23:33, "David Baker (Geoscience)" <david.m.baker@chk.com> wrote:
> All,
>
> Working in C#...  I have need for EPSG:4418. Per http://www.epsg-registry.org/ this is the code for "ProjectedCRS [NAD27 / BLM 18N (ftUS)]".  This code does not seem to be in the GDAL/OGR/Prog4 database in FWTools2.4.7.  Executing the line:
>
> var i = src.ImportFromEPSG(4418);
>
> This call returns an error indicating the code is invalid.  I also searched the /data directory for this projection but was not able to find it.  So my next move was to try:
>
> var i = src.ImportFromUrl(@"http://www.epsg-registry.org/export.htm?gml=urn:ogc:def:crs:EPSG::4410");
>
> This did not work either.
>
> So my general question is, for missing CRS's how does one retrieve the projection information from the web?
>
> Thanks in Advance,
> David
>
> David M. Baker
> Senior Advisor - Geoscience Technology
> Chesapeake Energy Corporation
> 405-935-3715 office
> 405-496-5373 cell
> david.m.baker@chk.com
>
>
>
> This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From sault.don at gmail.com  Fri Feb  3 16:59:36 2012
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri Feb  3 17:00:10 2012
Subject: [gdal-dev] Using -overwrite to create empty feature class
In-Reply-To: <201202012238.01223.even.rouault@mines-paris.org>
References: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>
	<201202012238.01223.even.rouault@mines-paris.org>
Message-ID: <CAJo0jfMNegqZH1mhHNaiGhJaBxgABAHcm-pEXKHm9FHVeDx+Mw@mail.gmail.com>

FYI

Further testing with -overwrite given your explanation
*ogr2ogr -overwrite output.shp output.shp -progress*
...works as well but only if the files are in the same output directory

But it does report a dbf error:
*ERROR 1: fread(631) failed on DBF file.*

But I can still open the output for appending and view the results in a GIS
viewer like QGIS.

Though the -where or -fid trick works as well

On Wed, Feb 1, 2012 at 2:38 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 01 f?vrier 2012 22:22:42, Donovan Cameron a ?crit :
> > Afternoon List.
> >
> > I am trying to generate an empty feature (shp or gml) from a template
> that
> > retains both the attribute-table schema and map projection.
> >
> > I can't get the *-overwrite *flag to work, it just copies the entire
> > feature (ie, makes a duplicate):
> > *ogr2ogr -overwrite -f "GML" geoname.gml /vsizip/vsicurl/
> > ${inZIP}/${inGML}* *
> > *
> > The next commands <http://gis.stackexchange.com/a/16510/1297>[1] work
> using
> > *-where *or *-fid*:
> > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -where
> > "FID < 0"*
> > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -fid "<
> > 0"*
> >
> > I thought the* -overwrite* flag would delete the output layer and
> recreate
> > it empty <http://www.gdal.org/ogr2ogr.html>[2]?
>
> -overwrite deletes the output layer, so that the new features added by
> ogr2ogr
> aren't added to the previously existing one, but in no way it creates an
> empty
> layer.
>
> The -where "fid < 0" trick is actually an interesting one. I've no better
> suggestion.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120203/1b9f28d9/attachment.html
From even.rouault at mines-paris.org  Fri Feb  3 17:19:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb  3 17:18:31 2012
Subject: [gdal-dev] Using -overwrite to create empty feature class
In-Reply-To: <CAJo0jfMNegqZH1mhHNaiGhJaBxgABAHcm-pEXKHm9FHVeDx+Mw@mail.gmail.com>
References: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>
	<201202012238.01223.even.rouault@mines-paris.org>
	<CAJo0jfMNegqZH1mhHNaiGhJaBxgABAHcm-pEXKHm9FHVeDx+Mw@mail.gmail.com>
Message-ID: <201202032319.47315.even.rouault@mines-paris.org>

Le vendredi 03 f?vrier 2012 22:59:36, Donovan Cameron a ?crit :
> FYI
> 
> Further testing with -overwrite given your explanation
> *ogr2ogr -overwrite output.shp output.shp -progress*
> ...works as well but only if the files are in the same output directory

Overwriting the source file with itself is definitely not supported. Do at your 
own risk ! The DBF error isn't surprising in that context.

> 
> But it does report a dbf error:
> *ERROR 1: fread(631) failed on DBF file.*
> 
> But I can still open the output for appending and view the results in a GIS
> viewer like QGIS.
> 
> Though the -where or -fid trick works as well
> 
> On Wed, Feb 1, 2012 at 2:38 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le mercredi 01 f?vrier 2012 22:22:42, Donovan Cameron a ?crit :
> > > Afternoon List.
> > > 
> > > I am trying to generate an empty feature (shp or gml) from a template
> > 
> > that
> > 
> > > retains both the attribute-table schema and map projection.
> > > 
> > > I can't get the *-overwrite *flag to work, it just copies the entire
> > > feature (ie, makes a duplicate):
> > > *ogr2ogr -overwrite -f "GML" geoname.gml /vsizip/vsicurl/
> > > ${inZIP}/${inGML}* *
> > > *
> > > The next commands <http://gis.stackexchange.com/a/16510/1297>[1] work
> > 
> > using
> > 
> > > *-where *or *-fid*:
> > > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -where
> > > "FID < 0"*
> > > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -fid
> > > "< 0"*
> > > 
> > > I thought the* -overwrite* flag would delete the output layer and
> > 
> > recreate
> > 
> > > it empty <http://www.gdal.org/ogr2ogr.html>[2]?
> > 
> > -overwrite deletes the output layer, so that the new features added by
> > ogr2ogr
> > aren't added to the previously existing one, but in no way it creates an
> > empty
> > layer.
> > 
> > The -where "fid < 0" trick is actually an interesting one. I've no better
> > suggestion.
From sault.don at gmail.com  Sat Feb  4 04:05:45 2012
From: sault.don at gmail.com (Donovan Cameron)
Date: Sat Feb  4 04:06:05 2012
Subject: [gdal-dev] Using -overwrite to create empty feature class
In-Reply-To: <201202032319.47315.even.rouault@mines-paris.org>
References: <CAJo0jfP1-mthZ_=xRAhbdq0LG7y1-+bO4=vUBkLJcv1jfHSJxg@mail.gmail.com>
	<201202012238.01223.even.rouault@mines-paris.org>
	<CAJo0jfMNegqZH1mhHNaiGhJaBxgABAHcm-pEXKHm9FHVeDx+Mw@mail.gmail.com>
	<201202032319.47315.even.rouault@mines-paris.org>
Message-ID: <CAJo0jfNbK3e5JA2gQWMyJtH3Wm5783Yqo1ftpTP23HYkNhM6iQ@mail.gmail.com>

I will definitely not recommend it then. Seems I got lucky in this case
scenario.

Thanks.



Donovan

On Fri, Feb 3, 2012 at 3:19 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le vendredi 03 f?vrier 2012 22:59:36, Donovan Cameron a ?crit :
> > FYI
> >
> > Further testing with -overwrite given your explanation
> > *ogr2ogr -overwrite output.shp output.shp -progress*
> > ...works as well but only if the files are in the same output directory
>
> Overwriting the source file with itself is definitely not supported. Do at
> your
> own risk ! The DBF error isn't surprising in that context.
>
> >
> > But it does report a dbf error:
> > *ERROR 1: fread(631) failed on DBF file.*
> >
> > But I can still open the output for appending and view the results in a
> GIS
> > viewer like QGIS.
> >
> > Though the -where or -fid trick works as well
> >
> > On Wed, Feb 1, 2012 at 2:38 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Le mercredi 01 f?vrier 2012 22:22:42, Donovan Cameron a ?crit :
> > > > Afternoon List.
> > > >
> > > > I am trying to generate an empty feature (shp or gml) from a template
> > >
> > > that
> > >
> > > > retains both the attribute-table schema and map projection.
> > > >
> > > > I can't get the *-overwrite *flag to work, it just copies the entire
> > > > feature (ie, makes a duplicate):
> > > > *ogr2ogr -overwrite -f "GML" geoname.gml /vsizip/vsicurl/
> > > > ${inZIP}/${inGML}* *
> > > > *
> > > > The next commands <http://gis.stackexchange.com/a/16510/1297>[1]
> work
> > >
> > > using
> > >
> > > > *-where *or *-fid*:
> > > > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML}
> -where
> > > > "FID < 0"*
> > > > *ogr2ogr -f "GML" geoname.gml /vsizip/vsicurl/ ${inZIP}/${inGML} -fid
> > > > "< 0"*
> > > >
> > > > I thought the* -overwrite* flag would delete the output layer and
> > >
> > > recreate
> > >
> > > > it empty <http://www.gdal.org/ogr2ogr.html>[2]?
> > >
> > > -overwrite deletes the output layer, so that the new features added by
> > > ogr2ogr
> > > aren't added to the previously existing one, but in no way it creates
> an
> > > empty
> > > layer.
> > >
> > > The -where "fid < 0" trick is actually an interesting one. I've no
> better
> > > suggestion.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120204/e5f10974/attachment.html
From polimax at mail.ru  Sat Feb  4 05:46:12 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb  4 05:47:05 2012
Subject: [gdal-dev] Re: Extract OSM data from PostGIS using OGR
In-Reply-To: <loom.20120203T082751-736@post.gmane.org>
References: <CALtm4h2G=TRb-Vit-EvNXJ_uFBGGE-U5JkdAH0Vie1LF8XYpgQ@mail.gmail.com>
	<loom.20120203T082751-736@post.gmane.org>
Message-ID: <4F2D0C74.6060000@mail.ru>

03.02.2012 11:30, Jukka Rahkonen ?????:
> Travis Kirstine<traviskirstine<at>  gmail.com>  writes:
>
>> Is it possible to extract features from a OSM PostGIS / Postgres
>> database (loaded with osm2pgsql)?
> For sure. The osm_point, osm_line and osm_polygon tables are normal spatial
> tables which can be read with GDAL Postgis driver http://gdal.org/ogr/drv_pg.html
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi,

Please try wxGIS 0.4 (http://wxgis.googlecode.com/files/wxgis-0.4.0.7z) 
- the gdal based GIS Catalog. Sorry, by now the windows version only. It 
can connect to Postgis and export PG tables from it.
If any error, don't hesitate to contact me.

Best regards,
Dmitry
From polimax at mail.ru  Sat Feb  4 12:15:10 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb  4 12:15:30 2012
Subject: [gdal-dev] OGR building always requires KML, GML, GEOJSON drivers
Message-ID: <4F2D679E.2080400@mail.ru>

Hi all,

OGRGeometry have such methods as exportToGML, exportToKML, exportToJson 
which always requires KML (not LIBKM), GML and GEOJSON code.
I think in exportToGML, exportToKML, exportToJson should be #ifdef 
KML_ENABLED GML_ENABLED, GEOJSON_ENABLED.
For example:

    char *OGRGeometry::exportToKML() const

    {
    #ifndef _WIN32_WCE
    #if defined OGR_ENABLED && defined KML_ENABLED
         return OGR_G_ExportToKML( (OGRGeometryH) this, NULL );
    #else
         CPLError( CE_Failure, CPLE_AppDefined,
                   "OGRGeometry::exportToKML() not supported in builds
    without OGR drivers." );
         return NULL;
    #endif
    #else
         CPLError( CE_Failure, CPLE_AppDefined,
                   "OGRGeometry::exportToKML() not supported in the
    WinCE build." );
         return NULL;
    #endif
    }

Can I add such code?

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120204/ad08f35d/attachment.html
From polimax at mail.ru  Sat Feb  4 13:05:03 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb  4 13:05:44 2012
Subject: [gdal-dev] Building lightweight OGR library
Message-ID: <4F2D734F.2030306@mail.ru>

Hi all,

I want to build lightweight ORL library with only SHP, Mapinfo and KML 
support (and input such logic to cmake - ability to check any 
combination of libraries or drivers with cross dependent logic). But OGR 
code need several functions (GDALVersionInfo, GDALCheckVersion, etc.) 
form GDAL.
If I add the code with this functions - most of gdal lib code will added.
As Even Rouault said that GDAL without OGR is supported (this is used by 
ESRI), why the feature to build OGR without GDAL is not supported?
I can surround the other code from gdal.h and gdal_misc.cpp by #ifdef 
GDAL_ENABLED #endif (analog of OGR_ENABLED) or move this code to 
separate file.
I think there is necessity of such lightweight library (with only CPL 
and/or OGR and/or GDAL).
My general idea is that OGR lib with several main drivers depends from 
only GDALCheckVersion function from GDAL code. And also there is a 
simple solution - changing a pair of files (gdal.h and gdal_misc.cpp).
May be it make sense to provide this opportunity?

Best regards
     Dmitry
From dmorissette at mapgears.com  Sat Feb  4 15:56:04 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sat Feb  4 15:56:47 2012
Subject: [gdal-dev] Building lightweight OGR library
In-Reply-To: <4F2D734F.2030306@mail.ru>
References: <4F2D734F.2030306@mail.ru>
Message-ID: <4F2D9B64.7020603@mapgears.com>

On 12-02-04 1:05 PM, Dmitry Baryshnikov wrote:
>
> I think there is necessity of such lightweight library (with only CPL
> and/or OGR and/or GDAL).

Doing this is possible.

The MITAB library does carry just the required minimum files from the 
ogr and port directories: http://mitab.maptools.org/

I also did the exercise to isolate only the minimum set of files 
requires to provide the spatial refernce classes in a libosr library. 
It's availabel in SVN at:

   http://svn.osgeo.org/gdal/sandbox/libosr/

This should give you a good starting point.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From polimax at mail.ru  Sat Feb  4 17:11:40 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb  4 17:12:29 2012
Subject: [gdal-dev] Building lightweight OGR library
In-Reply-To: <4F2D9B64.7020603@mapgears.com>
References: <4F2D734F.2030306@mail.ru> <4F2D9B64.7020603@mapgears.com>
Message-ID: <4F2DAD1C.5070609@mail.ru>

05.02.2012 0:56, Daniel Morissette ?????:
> On 12-02-04 1:05 PM, Dmitry Baryshnikov wrote:
>>
>> I think there is necessity of such lightweight library (with only CPL
>> and/or OGR and/or GDAL).
>
> Doing this is possible.
>
> The MITAB library does carry just the required minimum files from the 
> ogr and port directories: http://mitab.maptools.org/
>
> I also did the exercise to isolate only the minimum set of files 
> requires to provide the spatial refernce classes in a libosr library. 
> It's availabel in SVN at:
>
>   http://svn.osgeo.org/gdal/sandbox/libosr/
>
> This should give you a good starting point.
>
Hi Daniel,

I know that it possible (and I did it in wxgisgdal.googlecode.com too), 
but I ask to change code of GDAL to provide such ability to anybody who 
making it, by selecting some options.

Best regards,
     Dmitry
From chaitanya.ch at gmail.com  Sun Feb  5 07:55:53 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Feb  5 07:55:58 2012
Subject: [gdal-dev] OGR building always requires KML, GML, GEOJSON drivers
In-Reply-To: <4F2D679E.2080400@mail.ru>
References: <4F2D679E.2080400@mail.ru>
Message-ID: <CAMKgpOafS3iP53jEfy34AuCd4xQa+eEJpQZ7qNfWTDsL_Jak6A@mail.gmail.com>

Dmitry,

I not sure about KML and GeoJSON, but the GML driver need not be enabled
for the exportToGML method to work. Even for the other two, the code
associated with exporting the OGRGeometry to those formats seems to stand
apart from the driver code.

Also, these functions are occasionally used irrespective of the drivers.

Check if there are any problems when the KML and GeoJSON drivers are
disabled. If there are any, it's better to add your patch.

On Sat, Feb 4, 2012 at 10:45 PM, Dmitry Baryshnikov <polimax@mail.ru> wrote:

>  Hi all,
>
> OGRGeometry have such methods as exportToGML, exportToKML, exportToJson
> which always requires KML (not LIBKM), GML and GEOJSON code.
> I think in exportToGML, exportToKML, exportToJson should be #ifdef
> KML_ENABLED GML_ENABLED, GEOJSON_ENABLED.
> For example:
>
> char *OGRGeometry::exportToKML() const
>
> {
> #ifndef _WIN32_WCE
> #if defined OGR_ENABLED && defined KML_ENABLED
>     return OGR_G_ExportToKML( (OGRGeometryH) this, NULL );
> #else
>     CPLError( CE_Failure, CPLE_AppDefined,
>               "OGRGeometry::exportToKML() not supported in builds without
> OGR drivers." );
>     return NULL;
> #endif
> #else
>     CPLError( CE_Failure, CPLE_AppDefined,
>               "OGRGeometry::exportToKML() not supported in the WinCE
> build." );
>     return NULL;
> #endif
> }
>
> Can I add such code?
>
> Best regards,
>     Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120205/2009dbd7/attachment.html
From polimax at mail.ru  Sun Feb  5 08:34:59 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sun Feb  5 08:35:32 2012
Subject: [gdal-dev] OGR building always requires KML, GML, GEOJSON drivers
In-Reply-To: <CAMKgpOafS3iP53jEfy34AuCd4xQa+eEJpQZ7qNfWTDsL_Jak6A@mail.gmail.com>
References: <4F2D679E.2080400@mail.ru>
	<CAMKgpOafS3iP53jEfy34AuCd4xQa+eEJpQZ7qNfWTDsL_Jak6A@mail.gmail.com>
Message-ID: <4F2E8583.5000104@mail.ru>

Hi,

05.02.2012 16:55, Chaitanya kumar CH ?????:
> Dmitry,
>
> I not sure about KML and GeoJSON, but the GML driver need not be 
> enabled for the exportToGML method to work. Even for the other two, 
> the code associated with exporting the OGRGeometry to those formats 
> seems to stand apart from the driver code.
I want to build GDAL without GML, KML and GEOJSON and I cannot do it 
because dependencies. I don't need exportToGML, exportToKML, 
exportToJson working in this library (as I don't check this drivers to 
build). The adding of ifdef will solve this.
>
> Also, these functions are occasionally used irrespective of the drivers.
>
> Check if there are any problems when the KML and GeoJSON drivers are 
> disabled. If there are any, it's better to add your patch.
>
> On Sat, Feb 4, 2012 at 10:45 PM, Dmitry Baryshnikov <polimax@mail.ru 
> <mailto:polimax@mail.ru>> wrote:
>
>     Hi all,
>
>     OGRGeometry have such methods as exportToGML, exportToKML,
>     exportToJson which always requires KML (not LIBKM), GML and
>     GEOJSON code.
>     I think in exportToGML, exportToKML, exportToJson should be #ifdef
>     KML_ENABLED GML_ENABLED, GEOJSON_ENABLED.
>     For example:
>
>         char *OGRGeometry::exportToKML() const
>
>         {
>         #ifndef _WIN32_WCE
>         #if defined OGR_ENABLED && defined KML_ENABLED
>             return OGR_G_ExportToKML( (OGRGeometryH) this, NULL );
>         #else
>             CPLError( CE_Failure, CPLE_AppDefined,
>                       "OGRGeometry::exportToKML() not supported in
>         builds without OGR drivers." );
>             return NULL;
>         #endif
>         #else
>             CPLError( CE_Failure, CPLE_AppDefined,
>                       "OGRGeometry::exportToKML() not supported in the
>         WinCE build." );
>             return NULL;
>         #endif
>         }
>
>     Can I add such code?
>
>     Best regards,
>         Dmitry
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120205/52a1b97a/attachment.html
From etourigny.dev at gmail.com  Sun Feb  5 20:41:40 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Feb  5 20:42:01 2012
Subject: [gdal-dev] warp memory limit default too low and does not have a
	config option
Message-ID: <CA+TxYvNrmFqSFQCUcY4ZHSjDPSHt_KeK10ceqtViOtw3HCT4Vw@mail.gmail.com>

Hi all,

The default memory limit for warp operations is 64MB, which is far too
low using recent hardware and leads to inefficiencies in I/O when
warping large images.

This can be changed using the -wm option of gdalwarp, or if using the
API change the value of GDALWarpOptions::dfWarpMemoryLimit.
More information here:
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp

However, it would be better to do both of the following:

1) Change the default value of 64 MB to something higher, perhaps
depending on the machine's configuration (say 1/4 of RAM) - this
possibility is mentioned in gdalwarpoperation.cpp  .
2) Add a config option so that the default can be set for all
operations by the user (which overrides 1, but can be overridden for
each operation)


Any comments?

regards,
Etienne
From candini at meeo.it  Mon Feb  6 08:11:17 2012
From: candini at meeo.it (Alessandro Candini)
Date: Mon Feb  6 08:18:58 2012
Subject: [gdal-dev] Getting SRID from ESRI shapefile
Message-ID: <4F2FD175.1090209@meeo.it>

Is it possible to get a SRID code from an ESRI shapefile?
For example, I've got the following:

~ $ ogrinfo -al LC_FIN_smooth.shp | head -n 30
INFO: Open of `LC_FIN_smooth.shp'
       using driver `ESRI Shapefile' successful.

Layer name: LC_FIN_smooth
Geometry: Polygon
Feature Count: 33308
Extent: (-598426.000000, -1172874.000000) - (-583748.000000, 
-1158198.000000)
Layer SRS WKT:
PROJCS["S-JTSK_Krovak_East_North",
     GEOGCS["GCS_S_JTSK",
         DATUM["Jednotne_Trigonometricke_Site_Katastralni",
             SPHEROID["Bessel_1841",6377397.155,299.1528128]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Krovak"],
     PARAMETER["False_Easting",0.0],
     PARAMETER["False_Northing",0.0],
     PARAMETER["Pseudo_Standard_Parallel_1",78.5],
     PARAMETER["Scale_Factor",0.9999],
     PARAMETER["Azimuth",30.28813975277778],
     PARAMETER["Longitude_Of_Center",24.83333333333333],
     PARAMETER["Latitude_Of_Center",49.5],
     PARAMETER["X_Scale",-1.0],
     PARAMETER["Y_Scale",1.0],
     PARAMETER["XY_Plane_Rotation",90.0],
     UNIT["Meter",1.0]]
Class_name: String (254.0)
LC: Real (32.16)
OGRFeature(LC_FIN_smooth):0
   Class_name (String) = out_of_AOI

At spatialreference.org I found that this correspond to SRID 102067.
But is there a way to obtain this number with gdal tools?

Thanks in advance.
From etourigny.dev at gmail.com  Mon Feb  6 08:52:49 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Feb  6 08:53:21 2012
Subject: [gdal-dev] Getting SRID from ESRI shapefile
In-Reply-To: <4F2FD175.1090209@meeo.it>
References: <4F2FD175.1090209@meeo.it>
Message-ID: <CA+TxYvN9dJyjkNxTKUwqvazhVgnUBAOPA=iGMovCpc9+8oL-uQ@mail.gmail.com>

Alessandro,

unfortunately there is not a reliable tool on GDAL at the moment, but
I have been working on experimental EPSG lookup, see ticket #4345

http://trac.osgeo.org/gdal/ticket/4345

It requires gdalsrsinfo from gdal-1.9 and some extra data files
installed in the gdal data directory (see the ticket)

usage:
$gdalsrsinfo -e 102067.prj

However, it does not work with your example because it is not an EPSG
definition, but an ESRI one.

Since SRID 102067 is in esri_extra.wkt,  is recognized by gdal (and
spatialreferenc.org), but this has not been added in my experimental
EPSG lookup.

$gdalsrsinfo EPSG:102067
PROJ.4 : '+proj=krovak +lat_0=49.5 +lon_0=24.83333333333333
+alpha=30.28813975277778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel
+units=m +no_defs '

OGC WKT :
PROJCS["S-JTSK_Krovak_East_North",
    GEOGCS["GCS_S_JTSK",
        DATUM["Jednotne_Trigonometricke_Site_Katastralni",
            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Krovak"],
    PARAMETER["False_Easting",0],
    PARAMETER["False_Northing",0],
    PARAMETER["Pseudo_Standard_Parallel_1",78.5],
    PARAMETER["Scale_Factor",0.9999],
    PARAMETER["Azimuth",30.28813975277778],
    PARAMETER["Longitude_Of_Center",24.83333333333333],
    PARAMETER["Latitude_Of_Center",49.5],
    PARAMETER["X_Scale",-1],
    PARAMETER["Y_Scale",1],
    PARAMETER["XY_Plane_Rotation",90],
    UNIT["Meter",1],
    AUTHORITY["EPSG","102067"]]


regards, Etienne


On Mon, Feb 6, 2012 at 11:11 AM, Alessandro Candini <candini@meeo.it> wrote:
> Is it possible to get a SRID code from an ESRI shapefile?
> For example, I've got the following:
>
> ~ $ ogrinfo -al LC_FIN_smooth.shp | head -n 30
> INFO: Open of `LC_FIN_smooth.shp'
> ? ? ?using driver `ESRI Shapefile' successful.
>
> Layer name: LC_FIN_smooth
> Geometry: Polygon
> Feature Count: 33308
> Extent: (-598426.000000, -1172874.000000) - (-583748.000000,
> -1158198.000000)
> Layer SRS WKT:
> PROJCS["S-JTSK_Krovak_East_North",
> ? ?GEOGCS["GCS_S_JTSK",
> ? ? ? ?DATUM["Jednotne_Trigonometricke_Site_Katastralni",
> ? ? ? ? ? ?SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> ? ? ? ?PRIMEM["Greenwich",0.0],
> ? ? ? ?UNIT["Degree",0.0174532925199433]],
> ? ?PROJECTION["Krovak"],
> ? ?PARAMETER["False_Easting",0.0],
> ? ?PARAMETER["False_Northing",0.0],
> ? ?PARAMETER["Pseudo_Standard_Parallel_1",78.5],
> ? ?PARAMETER["Scale_Factor",0.9999],
> ? ?PARAMETER["Azimuth",30.28813975277778],
> ? ?PARAMETER["Longitude_Of_Center",24.83333333333333],
> ? ?PARAMETER["Latitude_Of_Center",49.5],
> ? ?PARAMETER["X_Scale",-1.0],
> ? ?PARAMETER["Y_Scale",1.0],
> ? ?PARAMETER["XY_Plane_Rotation",90.0],
> ? ?UNIT["Meter",1.0]]
> Class_name: String (254.0)
> LC: Real (32.16)
> OGRFeature(LC_FIN_smooth):0
> ?Class_name (String) = out_of_AOI
>
> At spatialreference.org I found that this correspond to SRID 102067.
> But is there a way to obtain this number with gdal tools?
>
> Thanks in advance.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From peifer at gmx.eu  Mon Feb  6 11:29:41 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Feb  6 11:29:53 2012
Subject: [gdal-dev] Re: Getting SRID from ESRI shapefile
In-Reply-To: <CA+TxYvN9dJyjkNxTKUwqvazhVgnUBAOPA=iGMovCpc9+8oL-uQ@mail.gmail.com>
References: <4F2FD175.1090209@meeo.it>
	<CA+TxYvN9dJyjkNxTKUwqvazhVgnUBAOPA=iGMovCpc9+8oL-uQ@mail.gmail.com>
Message-ID: <4F2FFFF5.1000104@gmx.eu>

On 06/02/2012 14:52, Etienne Tourigny wrote:
>
> I have been working on experimental EPSG lookup, see ticket #4345
>
> http://trac.osgeo.org/gdal/ticket/4345
>
> It requires gdalsrsinfo from gdal-1.9 and some extra data files
> installed in the gdal data directory (see the ticket)
>

It could perhaps be an idea to make it more clear in the ticket which 
extra data files are needed (as there is quite a list of attachments).

I also tried to run gen_epsg_wkt.sh and ended up with a lot of:
ERROR 1: ERROR - wkt_old output not supported

I guess this should read: wkt_simple

Hermann

From etourigny.dev at gmail.com  Mon Feb  6 12:56:16 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Feb  6 12:56:53 2012
Subject: [gdal-dev] Re: Getting SRID from ESRI shapefile
In-Reply-To: <4F2FFFF5.1000104@gmx.eu>
References: <4F2FD175.1090209@meeo.it>
	<CA+TxYvN9dJyjkNxTKUwqvazhVgnUBAOPA=iGMovCpc9+8oL-uQ@mail.gmail.com>
	<4F2FFFF5.1000104@gmx.eu>
Message-ID: <CA+TxYvNf03Q0ENGQodoF6D=Z0v_QPQFsFg3BmnkL04k0W-DTyg@mail.gmail.com>

The ticket is sort of a mess as there are 2 experimental features in there...

I have updated the ticket with more information and a modified shell script.

Etienne

On Mon, Feb 6, 2012 at 2:29 PM, Hermann Peifer <peifer@gmx.eu> wrote:
> On 06/02/2012 14:52, Etienne Tourigny wrote:
>>
>>
>> I have been working on experimental EPSG lookup, see ticket #4345
>>
>> http://trac.osgeo.org/gdal/ticket/4345
>>
>> It requires gdalsrsinfo from gdal-1.9 and some extra data files
>> installed in the gdal data directory (see the ticket)
>>
>
> It could perhaps be an idea to make it more clear in the ticket which extra
> data files are needed (as there is quite a list of attachments).
>
> I also tried to run gen_epsg_wkt.sh and ended up with a lot of:
> ERROR 1: ERROR - wkt_old output not supported
>
> I guess this should read: wkt_simple
>
> Hermann
>
From newmanw10 at gmail.com  Mon Feb  6 18:23:20 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Mon Feb  6 18:24:14 2012
Subject: [gdal-dev] Thread safe?
In-Reply-To: <201201112309.40239.even.rouault@mines-paris.org>
References: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>
	<201201112309.40239.even.rouault@mines-paris.org>
Message-ID: <CAD34qgm+==ut6TB8Q=MSArhhS-WXpfu7N620tr7qcawJ3VuS_A@mail.gmail.com>

Is the DataSource.delete() method (from java binding) thread safe?

Thanks

On Wed, Jan 11, 2012 at 3:09 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> **
>
> Le mercredi 11 janvier 2012 22:32:45, Billy Newman a ?crit :
>
> > I am using a third party lib (imageio-ext) to leverage gdal in java code.
>
> > I have noticed that the imageio-ext folks have wrapped the gdal.Open(..)
>
> > call in a synchronized method. I am assuming this is to prevent
>
> > imageio-ext users from hanging themselves with regard to thread safety.
>
> >
>
> > I have looked at the gdal FAQ with regards to thread safety and the last
>
> > release that it mentions additions is 1.3.0.
>
> >
>
> > What is the current status of the 1.9.* build with regards to thread
>
> > safety.
>
> The following is still true : "In particular for the situation where many
> threads are reading from GDAL datasets at once should work as long as no
> two threads access the same  GDALDataset<http://www.gdal.org/classGDALDataset.html>object at the same time. However, in this scenario, no threads can be
> writing to GDAL while others are reading or chaos may ensue. "
>
> I believe most common GDAL drivers should be safe. That includes drivers
> that don't depend on third party librairies (the driver is self contained
> in GDAL source tree), and drivers that depend on "classic" third-party
> libraries (such as PNG, JPEG, GIF). For other third party libraries
> (netCDF, HDF4, HDF5, ...), this depends on whether they are thread-safe
> themselves. There's at least one driver that is known to be non thread-safe
> : GRIB.
>
> >
>
> > Thanks,
>
> > Billy
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120206/1e04fc30/attachment.html
From even.rouault at mines-paris.org  Mon Feb  6 18:41:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb  6 18:40:14 2012
Subject: [gdal-dev] Thread safe?
In-Reply-To: <CAD34qgm+==ut6TB8Q=MSArhhS-WXpfu7N620tr7qcawJ3VuS_A@mail.gmail.com>
References: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>
	<201201112309.40239.even.rouault@mines-paris.org>
	<CAD34qgm+==ut6TB8Q=MSArhhS-WXpfu7N620tr7qcawJ3VuS_A@mail.gmail.com>
Message-ID: <201202070041.38857.even.rouault@mines-paris.org>

Le mardi 07 f?vrier 2012 00:23:20, Billy Newman a ?crit :
> Is the DataSource.delete() method (from java binding) thread safe?

Yes, it should

> 
> Thanks
> 
> On Wed, Jan 11, 2012 at 3:09 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > **
> > 
> > Le mercredi 11 janvier 2012 22:32:45, Billy Newman a ?crit :
> > > I am using a third party lib (imageio-ext) to leverage gdal in java
> > > code.
> > > 
> > > I have noticed that the imageio-ext folks have wrapped the
> > > gdal.Open(..)
> > > 
> > > call in a synchronized method. I am assuming this is to prevent
> > > 
> > > imageio-ext users from hanging themselves with regard to thread safety.
> > > 
> > > 
> > > 
> > > I have looked at the gdal FAQ with regards to thread safety and the
> > > last
> > > 
> > > release that it mentions additions is 1.3.0.
> > > 
> > > 
> > > 
> > > What is the current status of the 1.9.* build with regards to thread
> > > 
> > > safety.
> > 
> > The following is still true : "In particular for the situation where many
> > threads are reading from GDAL datasets at once should work as long as no
> > two threads access the same 
> > GDALDataset<http://www.gdal.org/classGDALDataset.html>object at the same
> > time. However, in this scenario, no threads can be writing to GDAL while
> > others are reading or chaos may ensue. "
> > 
> > I believe most common GDAL drivers should be safe. That includes drivers
> > that don't depend on third party librairies (the driver is self contained
> > in GDAL source tree), and drivers that depend on "classic" third-party
> > libraries (such as PNG, JPEG, GIF). For other third party libraries
> > (netCDF, HDF4, HDF5, ...), this depends on whether they are thread-safe
> > themselves. There's at least one driver that is known to be non
> > thread-safe
> > 
> > : GRIB.
> > : 
> > > Thanks,
> > > 
> > > Billy
From even.rouault at mines-paris.org  Mon Feb  6 18:52:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb  6 18:51:58 2012
Subject: [gdal-dev] Thread safe?
In-Reply-To: <201202070041.38857.even.rouault@mines-paris.org>
References: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>
	<CAD34qgm+==ut6TB8Q=MSArhhS-WXpfu7N620tr7qcawJ3VuS_A@mail.gmail.com>
	<201202070041.38857.even.rouault@mines-paris.org>
Message-ID: <201202070052.45002.even.rouault@mines-paris.org>

Le mardi 07 f?vrier 2012 00:41:38, Even Rouault a ?crit :
> Le mardi 07 f?vrier 2012 00:23:20, Billy Newman a ?crit :
> > Is the DataSource.delete() method (from java binding) thread safe?
> 
> Yes, it should

To avoid any ambiguities, you can call  the delete() method on 2 distinct 
datasources"simultaneously" from 2 threads. "Of course", not on the same one.

> 
> > Thanks
> > 
> > On Wed, Jan 11, 2012 at 3:09 PM, Even Rouault
> > 
> > <even.rouault@mines-paris.org>wrote:
> > > **
> > > 
> > > Le mercredi 11 janvier 2012 22:32:45, Billy Newman a ?crit :
> > > > I am using a third party lib (imageio-ext) to leverage gdal in java
> > > > code.
> > > > 
> > > > I have noticed that the imageio-ext folks have wrapped the
> > > > gdal.Open(..)
> > > > 
> > > > call in a synchronized method. I am assuming this is to prevent
> > > > 
> > > > imageio-ext users from hanging themselves with regard to thread
> > > > safety.
> > > > 
> > > > 
> > > > 
> > > > I have looked at the gdal FAQ with regards to thread safety and the
> > > > last
> > > > 
> > > > release that it mentions additions is 1.3.0.
> > > > 
> > > > 
> > > > 
> > > > What is the current status of the 1.9.* build with regards to thread
> > > > 
> > > > safety.
> > > 
> > > The following is still true : "In particular for the situation where
> > > many threads are reading from GDAL datasets at once should work as
> > > long as no two threads access the same
> > > GDALDataset<http://www.gdal.org/classGDALDataset.html>object at the
> > > same time. However, in this scenario, no threads can be writing to
> > > GDAL while others are reading or chaos may ensue. "
> > > 
> > > I believe most common GDAL drivers should be safe. That includes
> > > drivers that don't depend on third party librairies (the driver is
> > > self contained in GDAL source tree), and drivers that depend on
> > > "classic" third-party libraries (such as PNG, JPEG, GIF). For other
> > > third party libraries (netCDF, HDF4, HDF5, ...), this depends on
> > > whether they are thread-safe themselves. There's at least one driver
> > > that is known to be non thread-safe
> > > 
> > > : GRIB.
> > > : 
> > > > Thanks,
> > > > 
> > > > Billy
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From JPalmer at linz.govt.nz  Mon Feb  6 22:16:54 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Mon Feb  6 22:18:17 2012
Subject: [gdal-dev] Copying FIDs into existing PG schema
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E13CE2A4A@prdlsmmsg01.ad.linz.govt.nz>

Hi

When using the config PG_USE_COPY option the copy command does not include the destination FID in the field list. In my case the destination FID field is a primary key with a not null constraint, so the copy fails.

e.g.

ogr2ogr --config PG_USE_COPY TRUE -append -preserve_fid -f "PostgreSQL" "PG:host=localhost user=myuser dbname=my_db" test.vrt -lco GEOMETRY_NAME=shape -nln test3 -select id,data1,data2

when the destination table looks like this:

CREATE TABLE test3
(
  id integer NOT NULL PRIMARY KEY,
  data1 TEXT,
  data2 TEXT,
  shape geometry
);

However when I don't use the PG_USE_COPY option and the driver uses plain SQL inserts it works e.g:

ogr2ogr -append -preserve_fid -f "PostgreSQL" "PG:host=localhost user=myuser dbname=my_db" test.vrt -lco GEOMETRY_NAME=shape -nln test3 -select id,data1,data2

Looking down into this it seems it has to do with the layers FieldDefn not including the FID in its list, and the OGRPGTableLayer::BuildCopyFields() method only adding the FID to the copy field list if it's in the layer FieldDefn. While the CreateFeatureViaInsert() method only checks if the FID field is set for the layer and the feature itself has the FID data set.

Is there a specific reason for the OGRPGTableLayer::BuildCopyFields (and CreateFeatureViaCopy) checking that the field must exist in the layer FieldDefn before adding it to the copy field list? Or is this a bug?

Cheers,
Jeremy


#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From etourigny.dev at gmail.com  Tue Feb  7 10:40:21 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Feb  7 10:40:59 2012
Subject: [gdal-dev] Geolocation Arrays ??
Message-ID: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>

Hi all,

I would like to have information on the status of geolocation array
support in GDAL.

The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
still "under development", and the information there is that
GDALCreateGeoLocTransformer "is currently partially implemented".

Also, the only driver which seems to support it is hdf4, is this still true?

regards,
Etienne
From newmanw10 at gmail.com  Tue Feb  7 13:07:41 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Tue Feb  7 13:08:43 2012
Subject: [gdal-dev] Attribute subsection not large enough....
Message-ID: <CAD34qgnXKWATiREu+LsDRyN+C9p-bwU_FLPHv8TBTD2sE6ky6g@mail.gmail.com>

I am getting the following error when trying to open NITF files for read:

Warning 1: Attribute subsection not large enough (124 bytes) to contain 196
attributes.

I am running multi threaded, and processing many different NITF files for
read (I am extracting the metadata).  Is this a memory issue? Or just a
problem with one of my NITF files.

Any ideas would help.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120207/64a6f086/attachment.html
From viswaug at yahoo.com  Tue Feb  7 15:17:56 2012
From: viswaug at yahoo.com (viswaug)
Date: Tue Feb  7 15:18:04 2012
Subject: [gdal-dev] gdal_polygonize error with Arc/Info binary grid
Message-ID: <1328645876354-4373940.post@n6.nabble.com>

Hi all,

I am trying to convert an Arc/Info binary grid raster file to a shapefile
using the gdal_polygonize.py utility. But the operation fails with the
following error


*Warning 1: Unsupported Arc/Info Binary Grid tile of type 0x80 encountered.
This and subsequent unsupported tile types set to no data value.*



Here is a screenshot of the error
http://osgeo-org.1560.n6.nabble.com/file/n4373658/Capture1.png 

I am able to open and view the binary grid file just fine in ArcMAP etc.
Here are the results when i run gdalinfo on the binary grid file. It seems
to be fine





Driver: AIG/Arc/Info Binary Grid
Files: /home/vish/Sample_Data/nh_priority
      /home/vish/Sample_Data/nh_priority.ovr
      /home/vish/Sample_Data/nh_priority/vat.adf
      /home/vish/Sample_Data/nh_priority/w001001x.adf
      /home/vish/Sample_Data/nh_priority/w001001.adf
      /home/vish/Sample_Data/nh_priority/hdr.adf
      /home/vish/Sample_Data/nh_priority/dblbnd.adf
      /home/vish/Sample_Data/nh_priority/prj.adf
      /home/vish/Sample_Data/nh_priority/sta.adf
Size is 4987, 9645
Coordinate System is:
PROJCS["NAD83 / New Hampshire",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]],
    UNIT["METERS",1],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",42.5],
    PARAMETER["central_meridian",-71.66666666666667],
    PARAMETER["scale_factor",0.999966667],
    PARAMETER["false_easting",300000],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","32110"],
    AXIS["X",EAST],
    AXIS["Y",NORTH]]
Origin = (228040.838957945175935,311318.187724410032388)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left  (  228040.839,  311318.188) ( 72d35'2.81"W, 45d17'53.85"N)
Lower Left  (  228040.839,  21968.188) ( 72d32'41.44"W, 42d41'39.84"N)
Upper Right (  377650.839,  311318.188) ( 70d40'35.98"W, 45d17'51.67"N)
Lower Right (  377650.839,  21968.188) ( 70d43'8.53"W, 42d41'37.85"N)
Center      (  302845.839,  166643.188) ( 71d37'52.26"W, 44d 0'0.06"N)
Band 1 Block=256x16 Type=Byte, ColorInterp=Palette
  Min=0.000 Max=2.000 
  NoData Value=255
  Overviews: 2494x4823, 1247x2412, 624x1206, 312x603, 156x302
  Color Table (RGB with 3 entries)
    0: 255,255,255,255
    1: 211,255,190,255
    2: 0,84,3,255
<GDALRasterAttributeTable>
  <FieldDefn index="0">
    <Name>VALUE</Name>
    <Type>0</Type>
    <Usage>5</Usage>
  </FieldDefn>
  <FieldDefn index="1">
    <Name>COUNT</Name>
    <Type>0</Type>
    <Usage>1</Usage>
  </FieldDefn>
  <FieldDefn index="2">
    <Name>STEW_STATUS</Name>
    <Type>2</Type>
    <Usage>0</Usage>
  </FieldDefn>
  <Row index="0">
    <F>0</F>
    <F>7209043</F>
    <F>non-eligible</F>
  </Row>
  <Row index="1">
    <F>1</F>
    <F>7672024</F>
    <F>eligible, non-priority</F>
  </Row>
  <Row index="2">
    <F>2</F>
    <F>11779591</F>
    <F>priority</F>
  </Row>
</GDALRasterAttributeTable>

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-polygonize-error-with-Arc-Info-binary-grid-tp4373940p4373940.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From viswaug at yahoo.com  Tue Feb  7 15:16:11 2012
From: viswaug at yahoo.com (Vish Uma)
Date: Tue Feb  7 15:19:08 2012
Subject: [gdal-dev] gdal_polygonize error with Arc/Info binary grid
Message-ID: <1328645771.41033.YahooMailNeo@web112420.mail.gq1.yahoo.com>

Hi all,

I am trying to convert an Arc/Info binary grid raster file to a shapefile
using the gdal_polygonize.py utility. But the operation fails with the
following error


*Warning 1: Unsupported Arc/Info Binary Grid tile of type 0x80 encountered.
This and subsequent unsupported tile types set to no data value.*



Here is a screenshot of the error
http://osgeo-org.1560.n6.nabble.com/file/n4373658/Capture1.png?

I am able to open and view the binary grid file just fine in ArcMAP etc.
Here are the results when i run gdalinfo on the binary grid file. It seems
to be fine





Driver: AIG/Arc/Info Binary Grid
Files: /home/vish/Sample_Data/nh_priority
? ? ? /home/vish/Sample_Data/nh_priority.ovr
? ? ? /home/vish/Sample_Data/nh_priority/vat.adf
? ? ? /home/vish/Sample_Data/nh_priority/w001001x.adf
? ? ? /home/vish/Sample_Data/nh_priority/w001001.adf
? ? ? /home/vish/Sample_Data/nh_priority/hdr.adf
? ? ? /home/vish/Sample_Data/nh_priority/dblbnd.adf
? ? ? /home/vish/Sample_Data/nh_priority/prj.adf
? ? ? /home/vish/Sample_Data/nh_priority/sta.adf
Size is 4987, 9645
Coordinate System is:
PROJCS["NAD83 / New Hampshire",
? ? GEOGCS["NAD83",
? ? ? ? DATUM["North_American_Datum_1983",
? ? ? ? ? ? SPHEROID["GRS 1980",6378137,298.257222101,
? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
? ? ? ? ? ? AUTHORITY["EPSG","6269"]],
? ? ? ? PRIMEM["Greenwich",0,
? ? ? ? ? ? AUTHORITY["EPSG","8901"]],
? ? ? ? UNIT["degree",0.01745329251994328,
? ? ? ? ? ? AUTHORITY["EPSG","9122"]],
? ? ? ? AUTHORITY["EPSG","4269"]],
? ? UNIT["METERS",1],
? ? PROJECTION["Transverse_Mercator"],
? ? PARAMETER["latitude_of_origin",42.5],
? ? PARAMETER["central_meridian",-71.66666666666667],
? ? PARAMETER["scale_factor",0.999966667],
? ? PARAMETER["false_easting",300000],
? ? PARAMETER["false_northing",0],
? ? AUTHORITY["EPSG","32110"],
? ? AXIS["X",EAST],
? ? AXIS["Y",NORTH]]
Origin = (228040.838957945175935,311318.187724410032388)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left ?( ?228040.839, ?311318.188) ( 72d35'2.81"W, 45d17'53.85"N)
Lower Left ?( ?228040.839, ?21968.188) ( 72d32'41.44"W, 42d41'39.84"N)
Upper Right ( ?377650.839, ?311318.188) ( 70d40'35.98"W, 45d17'51.67"N)
Lower Right ( ?377650.839, ?21968.188) ( 70d43'8.53"W, 42d41'37.85"N)
Center ? ? ?( ?302845.839, ?166643.188) ( 71d37'52.26"W, 44d 0'0.06"N)
Band 1 Block=256x16 Type=Byte, ColorInterp=Palette
? Min=0.000 Max=2.000?
? NoData Value=255
? Overviews: 2494x4823, 1247x2412, 624x1206, 312x603, 156x302
? Color Table (RGB with 3 entries)
? ? 0: 255,255,255,255
? ? 1: 211,255,190,255
? ? 2: 0,84,3,255
<GDALRasterAttributeTable>
? <FieldDefn index="0">
? ? <Name>VALUE</Name>
? ? <Type>0</Type>
? ? <Usage>5</Usage>
? </FieldDefn>
? <FieldDefn index="1">
? ? <Name>COUNT</Name>
? ? <Type>0</Type>
? ? <Usage>1</Usage>
? </FieldDefn>
? <FieldDefn index="2">
? ? <Name>STEW_STATUS</Name>
? ? <Type>2</Type>
? ? <Usage>0</Usage>
? </FieldDefn>
? <Row index="0">
? ? <F>0</F>
? ? <F>7209043</F>
? ? <F>non-eligible</F>
? </Row>
? <Row index="1">
? ? <F>1</F>
? ? <F>7672024</F>
? ? <F>eligible, non-priority</F>
? </Row>
? <Row index="2">
? ? <F>2</F>
? ? <F>11779591</F>
? ? <F>priority</F>
? </Row>
</GDALRasterAttributeTable>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120207/c444c705/attachment.html
From even.rouault at mines-paris.org  Tue Feb  7 15:41:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 15:39:54 2012
Subject: [gdal-dev] Updates/improvements to GDAL's OziExplorer driver?
In-Reply-To: <ED2BC8F5-34DF-4924-A7C9-FF35D72C15D0@mactrix.com.au>
References: <ED2BC8F5-34DF-4924-A7C9-FF35D72C15D0@mactrix.com.au>
Message-ID: <201202072141.13562.even.rouault@mines-paris.org>

> 
> It would be extremely useful to have a Ozi driver that supports a wider
> range of projections than the current iteration, and it seems slightly odd
> that a developer who is ready to do the necessary work to improve the
> driver is not being encouraged.

We have now obtained permission from OziExplorer authors to distribute the new 
data files, and the patch has just been incorporated in GDAL SVN trunk ( see 
http://trac.osgeo.org/gdal/ticket/3929#comment:7 )

> 
> cheers
> Paul
From even.rouault at mines-paris.org  Tue Feb  7 15:43:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 15:42:25 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
Message-ID: <201202072143.35192.even.rouault@mines-paris.org>

Le mardi 07 f?vrier 2012 16:40:21, Etienne Tourigny a ?crit :
> Hi all,
> 
> I would like to have information on the status of geolocation array
> support in GDAL.
> 
> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
> still "under development", and the information there is that
> GDALCreateGeoLocTransformer "is currently partially implemented".
> 
> Also, the only driver which seems to support it is hdf4, is this still
> true?

"grep -r GEOLOCATION frmts" suggests that HDF4 and L1B support geolocation 
(and VRT, but as a proxy)

> 
> regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Feb  7 15:47:17 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 15:46:16 2012
Subject: [gdal-dev] Motion: Commit Rights for Robert Coup
In-Reply-To: <201202012226.11160.even.rouault@mines-paris.org>
References: <201202012226.11160.even.rouault@mines-paris.org>
Message-ID: <201202072147.17147.even.rouault@mines-paris.org>

Le mercredi 01 f?vrier 2012 22:26:11, Even Rouault a ?crit :
> Motion: GDAL/OGR Commit rights are extended to Robert Coup

I declare this motion passed with support from myself, FrankW, HowardB, 
DanielM and TamasS. Welcome on board Robert !

Robert, I let to FrankW the practical details of enabling you as a commiter.

Best regards

Even
From warmerdam at pobox.com  Tue Feb  7 16:05:58 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  7 16:06:11 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
Message-ID: <CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>

On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Hi all,
>
> I would like to have information on the status of geolocation array
> support in GDAL.
>
> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate) ?is
> still "under development", and the information there is that
> GDALCreateGeoLocTransformer "is currently partially implemented".

Etienne,

I think the geoloc transformer received some fixes from someone
other than myself and now is working reasonable well.  It would
be desirable to freshen up the RFC and get it passed but it isn't
particularly a priority of mine so I'm not likely to drive it in the
very near future.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From paul at mactrix.com.au  Tue Feb  7 16:18:24 2012
From: paul at mactrix.com.au (Paul Jacobson)
Date: Tue Feb  7 16:19:24 2012
Subject: [gdal-dev] Updates/improvements to GDAL's OziExplorer driver?
In-Reply-To: <201202072141.13562.even.rouault@mines-paris.org>
References: <ED2BC8F5-34DF-4924-A7C9-FF35D72C15D0@mactrix.com.au>
	<201202072141.13562.even.rouault@mines-paris.org>
Message-ID: <3CEA2559-53D9-4258-AB81-1F2C12B06C5D@mactrix.com.au>


On 08/02/2012, at 7:41 AM, Even Rouault wrote:

>> 
>> It would be extremely useful to have a Ozi driver that supports a wider
>> range of projections than the current iteration, and it seems slightly odd
>> that a developer who is ready to do the necessary work to improve the
>> driver is not being encouraged.
> 
> We have now obtained permission from OziExplorer authors to distribute the new 
> data files, and the patch has just been incorporated in GDAL SVN trunk ( see 
> http://trac.osgeo.org/gdal/ticket/3929#comment:7 )
> 
>> 
>> cheers
>> Paul


Even,

That's great news.

many thanks

Paul 
From jrepetto at free.fr  Tue Feb  7 16:18:26 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Feb  7 16:19:31 2012
Subject: [gdal-dev] Updates/improvements to GDAL's OziExplorer driver?
In-Reply-To: <201202072141.13562.even.rouault@mines-paris.org>
References: <ED2BC8F5-34DF-4924-A7C9-FF35D72C15D0@mactrix.com.au>
	<201202072141.13562.even.rouault@mines-paris.org>
Message-ID: <4F319522.4010409@free.fr>

On 02/07/12 21:41, Even Rouault wrote:
>>
>> It would be extremely useful to have a Ozi driver that supports a wider
>> range of projections than the current iteration, and it seems slightly odd
>> that a developer who is ready to do the necessary work to improve the
>> driver is not being encouraged.
>
> We have now obtained permission from OziExplorer authors to distribute the new
> data files, and the patch has just been incorporated in GDAL SVN trunk ( see
> http://trac.osgeo.org/gdal/ticket/3929#comment:7 )

Thanks to Frank and Even.

I am going to resume my work on improving the support of OziExplorer 
.map files in GDAL.

I plan to submit two patches :

- the first one will address ticket #3380 : "OziExplorer .MAP file 
should be useable with all file formats, not only GIF" 
(http://trac.osgeo.org/gdal/ticket/3380). OziExplorer .MAP files will be 
considered as virtual files (they contain the name of the image file), 
not only as georeferencing data files. This new driver will be based on 
the GDALProxyRasterBand class.

- the second one will add support for missing projections.


Jean-Claude
From etourigny.dev at gmail.com  Tue Feb  7 16:22:47 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Feb  7 16:28:53 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
Message-ID: <CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>

Even, Frank,

thanks for your answers.  I have run into a problem with using
gdalwarp with geoloc transform.

In ticket #1895 there is an hdf file for which the HDF4 driver creates
GEOLOCATION metadata.

Trying gdalwarp on it gives an error, and the result transform is
incorrect.  Am I doing something wrong, or is this a bug?

command is : gdalwarp -geoloc -t_srs EPSG:4326
HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
more info below:

$ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
Driver: HDF4Image/HDF4 Dataset
Files: A2006005182000.L2_LAC_SST.x.hdf
Size is 389, 602
Coordinate System is `'
Metadata:
[...]
Geolocation:
  LINE_OFFSET=0
  LINE_STEP=1
  PIXEL_OFFSET=0
  PIXEL_STEP=1
  SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
  X_BAND=1
  X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
  Y_BAND=1
  Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
Corner Coordinates:
[...]

$ gdalwarp -geoloc -t_srs EPSG:4326
HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
Creating output file that is 31119P x 5864L.
Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo tmp1.tif
Driver: GTiff/GeoTIFF
Files: tmp1.tif
Size is 31119, 5864
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-90.198287963867188,90.300000000000011)
Pixel Size = (0.015398926739995,-0.015398926739995)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)


Regards,
Etienne


On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> Hi all,
>>
>> I would like to have information on the status of geolocation array
>> support in GDAL.
>>
>> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate) ?is
>> still "under development", and the information there is that
>> GDALCreateGeoLocTransformer "is currently partially implemented".
>
> Etienne,
>
> I think the geoloc transformer received some fixes from someone
> other than myself and now is working reasonable well. ?It would
> be desirable to freshen up the RFC and get it passed but it isn't
> particularly a priority of mine so I'm not likely to drive it in the
> very near future.
>
> Best regards,
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
From dmorissette at mapgears.com  Tue Feb  7 16:34:50 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Feb  7 16:34:55 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4EE84A57.1080005@pobox.com>
References: <4EE84A57.1080005@pobox.com>
Message-ID: <4F3198FA.6040900@mapgears.com>

Hi GDAL PSC,

The Seattle Sprint has a surplus this year and is offering the 
participants three options to deal with part of the surplus. I am 
emailing to ask what the PSC wants to do with respect to the 
registration paid by GDAL for Brian Case.

The options are:

1- Take a reimbursement of 100-150$ (that would go back to GDAL's budget)

2- Leave it to 2012: Turn down the reimbursement and let your share of 
the surplus be split between the other sprinters from this year who 
choose to take the reimbursement

3- Leave it to 2013: Turn down the reimbursement and leave your share as 
part of the surplus that will be passed to the 2013 sprint in Boston

Any preference? I would be leaning towards #3...

Daniel


On 11-12-14 2:03 AM, Frank Warmerdam wrote:
> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.
>
> -----
>
> Brian (aka winkey) has done lots of work in recent years on and with
> GDAL/OGR. Most notably he has developed the libkml based OGR KML driver.
>
> Brian lives relatively near the Islandwood sprint and would arrange to get
> himself there and other ancillary costs. We would just be paying the
> entrace fees (which also implicitly covers housing and food). Information
> on the Islandwood Sprint (successor to the Toronto, NYC and Montreal
> sprints
> of recent years) is available at:
>
> http://wiki.osgeo.org/wiki/IslandWood_Code_Sprint_2012
>
> I'm afraid I haven't done a detailed financial review of GDAL/OGR project
> funds but I think we have in excess of $10K in reserve so this is a modest
> expenditure, and I think can serve the community building goals of the
> project
> well. I think we should also be open to similar support for other
> substantial
> contributors to GDAL/OGR who don't have corporate travel support, who would
> like to attend the sprint, and who would be able to get themselves there.
> However, that is not explicitly covered by this motion.
>
> --
>
> I'll start with +1 Frank.
>
> PS. I'd love to make a new batch of GDAL project tshirts in the coming
> year if someone is up to organizing.
>
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Tue Feb  7 16:49:34 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  7 16:49:38 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4F3198FA.6040900@mapgears.com>
References: <4EE84A57.1080005@pobox.com>
	<4F3198FA.6040900@mapgears.com>
Message-ID: <CA+YzLBftd+O5=ea9iZvnc+cP18rXrKmd8aW=Tc4dk_oF3amnew@mail.gmail.com>

On Tue, Feb 7, 2012 at 1:34 PM, Daniel Morissette
<dmorissette@mapgears.com> wrote:
> Hi GDAL PSC,
>
> The Seattle Sprint has a surplus this year and is offering the participants
> three options to deal with part of the surplus. I am emailing to ask what
> the PSC wants to do with respect to the registration paid by GDAL for Brian
> Case.
>
> The options are:
>
> 1- Take a reimbursement of 100-150$ (that would go back to GDAL's budget)
>
> 2- Leave it to 2012: Turn down the reimbursement and let your share of the
> surplus be split between the other sprinters from this year who choose to
> take the reimbursement
>
> 3- Leave it to 2013: Turn down the reimbursement and leave your share as
> part of the surplus that will be passed to the 2013 sprint in Boston
>
> Any preference? I would be leaning towards #3...

Daniel,

#3 is fine with me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Feb  7 16:53:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 16:52:15 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <CA+YzLBftd+O5=ea9iZvnc+cP18rXrKmd8aW=Tc4dk_oF3amnew@mail.gmail.com>
References: <4EE84A57.1080005@pobox.com> <4F3198FA.6040900@mapgears.com>
	<CA+YzLBftd+O5=ea9iZvnc+cP18rXrKmd8aW=Tc4dk_oF3amnew@mail.gmail.com>
Message-ID: <201202072253.48580.even.rouault@mines-paris.org>

Le mardi 07 f?vrier 2012 22:49:34, Frank Warmerdam a ?crit :
> On Tue, Feb 7, 2012 at 1:34 PM, Daniel Morissette
> 
> <dmorissette@mapgears.com> wrote:
> > Hi GDAL PSC,
> > 
> > The Seattle Sprint has a surplus this year and is offering the
> > participants three options to deal with part of the surplus. I am
> > emailing to ask what the PSC wants to do with respect to the
> > registration paid by GDAL for Brian Case.
> > 
> > The options are:
> > 
> > 1- Take a reimbursement of 100-150$ (that would go back to GDAL's budget)
> > 
> > 2- Leave it to 2012: Turn down the reimbursement and let your share of
> > the surplus be split between the other sprinters from this year who
> > choose to take the reimbursement
> > 
> > 3- Leave it to 2013: Turn down the reimbursement and leave your share as
> > part of the surplus that will be passed to the 2013 sprint in Boston
> > 
> > Any preference? I would be leaning towards #3...
> 
> Daniel,
> 
> #3 is fine with me.

+1 for #3

> 
> Best regards,
From hobu.inc at gmail.com  Tue Feb  7 16:56:14 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Feb  7 16:56:42 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <201202072253.48580.even.rouault@mines-paris.org>
References: <4EE84A57.1080005@pobox.com> <4F3198FA.6040900@mapgears.com>
	<CA+YzLBftd+O5=ea9iZvnc+cP18rXrKmd8aW=Tc4dk_oF3amnew@mail.gmail.com>
	<201202072253.48580.even.rouault@mines-paris.org>
Message-ID: <F4E7297C-C0B1-465E-B9FD-4E2F36DD4B14@gmail.com>


On Feb 7, 2012, at 3:53 PM, Even Rouault wrote:

> Le mardi 07 f?vrier 2012 22:49:34, Frank Warmerdam a ?crit :
>> On Tue, Feb 7, 2012 at 1:34 PM, Daniel Morissette
>> 
>> <dmorissette@mapgears.com> wrote:
>>> Hi GDAL PSC,
>>> 
>>> The Seattle Sprint has a surplus this year and is offering the
>>> participants three options to deal with part of the surplus. I am
>>> emailing to ask what the PSC wants to do with respect to the
>>> registration paid by GDAL for Brian Case.
>>> 
>>> The options are:
>>> 
>>> 1- Take a reimbursement of 100-150$ (that would go back to GDAL's budget)
>>> 
>>> 2- Leave it to 2012: Turn down the reimbursement and let your share of
>>> the surplus be split between the other sprinters from this year who
>>> choose to take the reimbursement
>>> 
>>> 3- Leave it to 2013: Turn down the reimbursement and leave your share as
>>> part of the surplus that will be passed to the 2013 sprint in Boston
>>> 
>>> Any preference? I would be leaning towards #3...
>> 
>> Daniel,
>> 
>> #3 is fine with me.
> 
> +1 for #3

+1 for #3
From JPalmer at linz.govt.nz  Tue Feb  7 17:38:10 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue Feb  7 17:38:34 2012
Subject: [gdal-dev] RE: Copying FIDs into existing PG schema
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E13CE3012@prdlsmmsg01.ad.linz.govt.nz>

Any chance? Should I log a bug report?

> 
> Hi
> 
> When using the config PG_USE_COPY option the copy command does not include the
> destination FID in the field list. In my case the destination FID field is a primary key
> with a not null constraint, so the copy fails.
> 
> e.g.
> 
> ogr2ogr --config PG_USE_COPY TRUE -append -preserve_fid -f "PostgreSQL"
> "PG:host=localhost user=myuser dbname=my_db" test.vrt -lco
> GEOMETRY_NAME=shape -nln test3 -select id,data1,data2
> 
> when the destination table looks like this:
> 
> CREATE TABLE test3
> (
>   id integer NOT NULL PRIMARY KEY,
>   data1 TEXT,
>   data2 TEXT,
>   shape geometry
> );
> 
> However when I don't use the PG_USE_COPY option and the driver uses plain SQL
> inserts it works e.g:
> 
> ogr2ogr -append -preserve_fid -f "PostgreSQL" "PG:host=localhost user=myuser
> dbname=my_db" test.vrt -lco GEOMETRY_NAME=shape -nln test3 -select
> id,data1,data2
> 
> Looking down into this it seems it has to do with the layers FieldDefn not including the
> FID in its list, and the OGRPGTableLayer::BuildCopyFields() method only adding the
> FID to the copy field list if it's in the layer FieldDefn. While the
> CreateFeatureViaInsert() method only checks if the FID field is set for the layer and
> the feature itself has the FID data set.
> 
> Is there a specific reason for the OGRPGTableLayer::BuildCopyFields (and
> CreateFeatureViaCopy) checking that the field must exist in the layer FieldDefn before
> adding it to the copy field list? Or is this a bug?
> 
> Cheers,
> Jeremy
> 

#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From even.rouault at mines-paris.org  Tue Feb  7 17:49:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 17:48:40 2012
Subject: [gdal-dev] Copying FIDs into existing PG schema
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0E13CE2A4A@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0E13CE2A4A@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201202072349.47519.even.rouault@mines-paris.org>

> Is there a specific reason for the OGRPGTableLayer::BuildCopyFields (and
> CreateFeatureViaCopy) checking that the field must exist in the layer
> FieldDefn before adding it to the copy field list? Or is this a bug?

Jeremy,

I've created http://trac.osgeo.org/gdal/ticket/4495 to capture the issue and 
pushed a fix. 

Note however that this area is a bit fragile since there are valid use cases 
where we don't want to impose the FID and let the DB do the autoincrement (*). 
The issue is that in COPY mode you must choose at the beginning if you will 
set or not the FID column for all the features to be copied. So the heuristics 
is now : if the first feature to be copied has a FID set, then we will also set 
it for all following features. Otherwise, if the first feature to be copied has 
no FID set, we will not set it and let the DB pick up a value for us for all 
the features. This is hopefully a reasonable assumption. I'm afraid I have no 
idea how to do it differently.

But in INSERT mode, you can freely alternate features with FID set or unset.

(*) I'm happy that we have a rich regression suite for the PG driver because 
my first attemps at fixing the 'new' use case initially broke those use cases.

Best regards,

Even
From JPalmer at linz.govt.nz  Tue Feb  7 17:52:17 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue Feb  7 17:52:35 2012
Subject: [gdal-dev] Copying FIDs into existing PG schema
In-Reply-To: <201202072349.47519.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0E13CE2A4A@prdlsmmsg01.ad.linz.govt.nz>
	<201202072349.47519.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E13CE306D@prdlsmmsg01.ad.linz.govt.nz>

Wow, thanks Even! 

I now follow the logic for the original insert method. And yes your implementation makes a reasonable assumption.

Thanks again,
Jeremy

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Wednesday, 8 February 2012 11:50 a.m.
> To: gdal-dev@lists.osgeo.org
> Cc: Jeremy Palmer
> Subject: Re: [gdal-dev] Copying FIDs into existing PG schema
> 
> > Is there a specific reason for the OGRPGTableLayer::BuildCopyFields (and
> > CreateFeatureViaCopy) checking that the field must exist in the layer
> > FieldDefn before adding it to the copy field list? Or is this a bug?
> 
> Jeremy,
> 
> I've created http://trac.osgeo.org/gdal/ticket/4495 to capture the issue and
> pushed a fix.
> 
> Note however that this area is a bit fragile since there are valid use cases
> where we don't want to impose the FID and let the DB do the autoincrement (*).
> The issue is that in COPY mode you must choose at the beginning if you will
> set or not the FID column for all the features to be copied. So the heuristics
> is now : if the first feature to be copied has a FID set, then we will also set
> it for all following features. Otherwise, if the first feature to be copied has
> no FID set, we will not set it and let the DB pick up a value for us for all
> the features. This is hopefully a reasonable assumption. I'm afraid I have no
> idea how to do it differently.
> 
> But in INSERT mode, you can freely alternate features with FID set or unset.
> 
> (*) I'm happy that we have a rich regression suite for the PG driver because
> my first attemps at fixing the 'new' use case initially broke those use cases.
> 
> Best regards,
> 
> Even
#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From even.rouault at mines-paris.org  Tue Feb  7 18:13:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  7 18:12:13 2012
Subject: [gdal-dev] warp memory limit default too low and does not have a
	config option
In-Reply-To: <CA+TxYvNrmFqSFQCUcY4ZHSjDPSHt_KeK10ceqtViOtw3HCT4Vw@mail.gmail.com>
References: <CA+TxYvNrmFqSFQCUcY4ZHSjDPSHt_KeK10ceqtViOtw3HCT4Vw@mail.gmail.com>
Message-ID: <201202080013.38985.even.rouault@mines-paris.org>

Le lundi 06 f?vrier 2012 02:41:40, Etienne Tourigny a ?crit :
> Hi all,
> 
> The default memory limit for warp operations is 64MB, which is far too
> low using recent hardware and leads to inefficiencies in I/O when
> warping large images.
> 
> This can be changed using the -wm option of gdalwarp, or if using the
> API change the value of GDALWarpOptions::dfWarpMemoryLimit.
> More information here:
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincrease
> thespeedofgdalwarp
> 
> However, it would be better to do both of the following:
> 
> 1) Change the default value of 64 MB to something higher, perhaps
> depending on the machine's configuration (say 1/4 of RAM) - this
> possibility is mentioned in gdalwarpoperation.cpp  .

Finding good default values is quite difficult and somehow arbitrary. There's 
however something to be aware : in the trac entry you quote above, there's a 
mention of a use case where more RAM for dfWarpMemoryLimit will actually 
decrease performance. So if you intend increasing it substantially (which 
would be the case for 1/4 of RAM on modern configurations), that might make 
things significantly worse for that use case. That's definitely something to at 
least benchmark and lilely fix in the warping code. The use case if I remember 
well is "gdalwarp smallimage bigimage" (the real use case being generally 
"gdalwarp smallimage1 smallimage2 ... smallimageN bigmosaicofallsmallimages"). 
If you increase dfWarpMemoryLimit currently, we will currently read an area of 
bigimage much larger than needed to include the extent of smallimage, which 
cause excessive read operations before warping, and excessive write 
afterwards.

> 2) Add a config option so that the default can be set for all
> operations by the user (which overrides 1, but can be overridden for
> each operation)

Not sure to understand how option 2) if different from the -wm option and how 
it would be implemented ...

> 
> 
> Any comments?
> 
> regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dmorissette at mapgears.com  Tue Feb  7 18:51:02 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Feb  7 18:51:56 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <F4E7297C-C0B1-465E-B9FD-4E2F36DD4B14@gmail.com>
References: <4EE84A57.1080005@pobox.com> <4F3198FA.6040900@mapgears.com>
	<CA+YzLBftd+O5=ea9iZvnc+cP18rXrKmd8aW=Tc4dk_oF3amnew@mail.gmail.com>
	<201202072253.48580.even.rouault@mines-paris.org>
	<F4E7297C-C0B1-465E-B9FD-4E2F36DD4B14@gmail.com>
Message-ID: <4F31B8E6.1080008@mapgears.com>

Thank you guys for your quick response. Unless I hear otherwise from 
someone else then we'll go with #3.

Daniel


On 12-02-07 4:56 PM, Howard Butler wrote:
>
> On Feb 7, 2012, at 3:53 PM, Even Rouault wrote:
>
>> Le mardi 07 f?vrier 2012 22:49:34, Frank Warmerdam a ?crit :
>>> On Tue, Feb 7, 2012 at 1:34 PM, Daniel Morissette
>>>
>>> <dmorissette@mapgears.com>  wrote:
>>>> Hi GDAL PSC,
>>>>
>>>> The Seattle Sprint has a surplus this year and is offering the
>>>> participants three options to deal with part of the surplus. I am
>>>> emailing to ask what the PSC wants to do with respect to the
>>>> registration paid by GDAL for Brian Case.
>>>>
>>>> The options are:
>>>>
>>>> 1- Take a reimbursement of 100-150$ (that would go back to GDAL's budget)
>>>>
>>>> 2- Leave it to 2012: Turn down the reimbursement and let your share of
>>>> the surplus be split between the other sprinters from this year who
>>>> choose to take the reimbursement
>>>>
>>>> 3- Leave it to 2013: Turn down the reimbursement and leave your share as
>>>> part of the surplus that will be passed to the 2013 sprint in Boston
>>>>
>>>> Any preference? I would be leaning towards #3...
>>>
>>> Daniel,
>>>
>>> #3 is fine with me.
>>
>> +1 for #3
>
> +1 for #3_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From viswaug at yahoo.com  Tue Feb  7 21:48:31 2012
From: viswaug at yahoo.com (viswaug)
Date: Tue Feb  7 21:49:07 2012
Subject: [gdal-dev] Re: gdal_polygonize error with Arc/Info binary grid
In-Reply-To: <1328645876354-4373940.post@n6.nabble.com>
References: <1328645876354-4373940.post@n6.nabble.com>
Message-ID: <1328669311153-4374698.post@n6.nabble.com>


Anybody got any ideas on troubleshooting this error? Any help/suggestions
would be hugely appreciated. I am trying real hard to not fallback on to
esri gp tasks...

Thank You,
Vish

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-polygonize-error-with-Arc-Info-binary-grid-tp4373940p4374698.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etourigny.dev at gmail.com  Tue Feb  7 22:56:54 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Feb  7 22:57:01 2012
Subject: [gdal-dev] warp memory limit default too low and does not have a
	config option
In-Reply-To: <201202080013.38985.even.rouault@mines-paris.org>
References: <CA+TxYvNrmFqSFQCUcY4ZHSjDPSHt_KeK10ceqtViOtw3HCT4Vw@mail.gmail.com>
	<201202080013.38985.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvP0M_jMT=jCDZ=n4k8VrSrVG=ZxYEua6c0MFZtWpFcnDQ@mail.gmail.com>

On Tue, Feb 7, 2012 at 9:13 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le lundi 06 f?vrier 2012 02:41:40, Etienne Tourigny a ?crit :
>> Hi all,
>>
>> The default memory limit for warp operations is 64MB, which is far too
>> low using recent hardware and leads to inefficiencies in I/O when
>> warping large images.
>>
>> This can be changed using the -wm option of gdalwarp, or if using the
>> API change the value of GDALWarpOptions::dfWarpMemoryLimit.
>> More information here:
>> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincrease
>> thespeedofgdalwarp
>>
>> However, it would be better to do both of the following:
>>
>> 1) Change the default value of 64 MB to something higher, perhaps
>> depending on the machine's configuration (say 1/4 of RAM) - this
>> possibility is mentioned in gdalwarpoperation.cpp ?.
>
> Finding good default values is quite difficult and somehow arbitrary. There's
> however something to be aware : in the trac entry you quote above, there's a
> mention of a use case where more RAM for dfWarpMemoryLimit will actually
> decrease performance. So if you intend increasing it substantially (which
> would be the case for 1/4 of RAM on modern configurations), that might make
> things significantly worse for that use case. That's definitely something to at
> least benchmark and lilely fix in the warping code. The use case if I remember
> well is "gdalwarp smallimage bigimage" (the real use case being generally
> "gdalwarp smallimage1 smallimage2 ... smallimageN bigmosaicofallsmallimages").
> If you increase dfWarpMemoryLimit currently, we will currently read an area of
> bigimage much larger than needed to include the extent of smallimage, which
> cause excessive read operations before warping, and excessive write
> afterwards.

Is the problematic case you cite rather common or the exceptional?
Perhaps the -wm option is a good place to set a lower memory limit in
this case, with the default being higher (instead of the other way
around)?

Which is more common, 1) many small images being merged into a larger
one, 2) warping of large images or 3) merging of large+small images?
It would be nice as you suggest to have some benchmarks, would the 3
cases I just mentioned be representative enough? What would be typical
sizes for each case? Perhaps a compromise could be found, that
minimizes performance penalties on average.
The mentioned ticket has a proposed patch (by you) -  perhaps it could
be used in some benchmarks?
On a side note, I *think* that most users use default value and do not
use the -wm option unless they really look into the docs - therefore
it would be nice to have a better default.

>
>> 2) Add a config option so that the default can be set for all
>> operations by the user (which overrides 1, but can be overridden for
>> each operation)
>
> Not sure to understand how option 2) if different from the -wm option and how
> it would be implemented ...

Simply a config option, like there is for raster i/o cache (GDAL_CACHEMAX).
This would be a simple fix that allows the user to set the default for
his/her typical usage (and select another value with -wm when needed).
There might not be a need to change the default value then.
I have a small patch that implements that, should I create a ticket to
centralize this discussion and post the patch?

cheers,
Etienne

>
>>
>>
>> Any comments?
>>
>> regards,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ngarel at micromine.com  Tue Feb  7 23:58:01 2012
From: ngarel at micromine.com (Nicolas Garel)
Date: Wed Feb  8 00:01:28 2012
Subject: [gdal-dev] PGeo driver fails to open .mdb
Message-ID: <125F609FE1635548AF411AFA01558DFA3C00F4A0AC@PER-SRV-EM1.micromine.com.au>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: mm_corp_emailsig_perth.gif
Type: image/gif
Size: 17375 bytes
Desc: mm_corp_emailsig_perth.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120208/db415842/mm_corp_emailsig_perth-0001.gif
From dvdov at yahoo.com  Wed Feb  8 00:28:48 2012
From: dvdov at yahoo.com (David Ortiz)
Date: Wed Feb  8 00:31:10 2012
Subject: Rv: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <1328677946.32356.YahooMailNeo@web112010.mail.gq1.yahoo.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
	<CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>
	<1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
	<CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>
	<1327714069.10294.YahooMailNeo@web112014.mail.gq1.yahoo.com>
	<CAMKgpOY5sHyWXY87HydmUAJ=qP9m--Q1epffhZGSuSGpwhVe5A@mail.gmail.com>
	<1327809595.51509.YahooMailNeo@web112012.mail.gq1.yahoo.com>
	<1328677946.32356.YahooMailNeo@web112010.mail.gq1.yahoo.com>
Message-ID: <1328678928.31055.YahooMailNeo@web112019.mail.gq1.yahoo.com>




----- Mensaje reenviado -----
De: David Ortiz <dvdov@yahoo.com>
Para: "chaitanya.ch@gmail.com" <chaitanya.ch@gmail.com> 
Enviado: Mi?rcoles, febrero 8, 2012 12:12 A.M.
Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
 

Hi Chaitanya,

I have some questions:

1. ?Is there some way to get the residuals or errors from georeferencing when i use gdalwarp with any image?

2. ?Currently , i have a particular Geotiff image without spatial reference but i know it has the same features of AIRS radiances product (AIRIBRAD product ? ? ?from?http://mirador.gsfc.nasa.gov/cgi-bin/mirador/homepageAlt.pl?keyword=AIRIBRAD for 2009.01.18. date) like?coordinate system,resolution etc, but ? ? ?with other values for each pixel. I want set geolocation information to Geotiff from radiances file so,
?? ? Is posible associate ?geolocation arrays from hdf file (latitude,longitude subdatasets) with pixels of Geotiff image without using "-gcp" or "--optfile"options?
?? ? may be extracting arrays to GeoTiff format first?

3. ?I tried the command:
?? ? ? ? ? ? gdal_translate -a_srs "EPSG:4326"?--optfile GCPs.txt inputfile.tif outputfile.tif, ? then
?? ? ? ? ? ? gdalwarp outputfile.tif outputfile_1.if
?? ? where GCPs.txt file has 12200 gcps. I get:

?? ? ? ? ? ?Input file size is 90, 135
?? ? ? ? ? ?0ERROR 1: TIFFFetchNormalTag:Incorrect count for "GeoTiePoints"; tag ignored
?? ? ? ? ? ?...10...20...30...40...50...60...70...80...90...100 - done.
?? ? ?it worked with 10800 gcps.
?? ? ?Is there a limit number of gcps ???

4. Image with 10800 gcps does not have the same size of radiances image provided by HEG tool (Geotiff) when both are loaded into GIS software.
?? ?Do you know why ?


Below i describe some lines of AIRS radiances and particular geotiff images:

gdalinfo HDF4_EOS:EOS_SWATH:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":L1B_AIRS_Science:radiances

SWATH_TITLE= =L1B_AIRS_Science
...
...
Geolocation:
??LINE_OFFSET=0
??LINE_STEP=1
??PIXEL_OFFSET=0
??PIXEL_STEP=1
??SRS=
??X_BAND=1
??X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":L1B_AIRS_Science:Longitude
??Y_BAND=1
??Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":L1B_AIRS_Science:Latitude
Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ? 90.0)
Upper Right ( 2378.0, ? ?0.0)
Lower Right ( 2378.0, ? 90.0)
Center ? ? ?( 1189.0, ? 45.0)
?--- Here i note the dimensions are wrong because radiances is a dataset with 135*90 ?pixels and 2378 bands

gdalinfo?

HDF4_SDS:UNKNOWN:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":3 (radiances)
...
...
Geolocation:
??LINE_OFFSET=0
??LINE_STEP=1
??PIXEL_OFFSET=0
??PIXEL_STEP=1
??SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
??X_BAND=1
??X_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":1
??Y_BAND=1
??Y_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/2009.01.18/HDFs/AIRS.2009.01.18.236.L1B.AIRS_Rad.v5.0.0.0.G09020142509.hdf":0
Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ? 90.0)
Upper Right ( 2378.0, ? ?0.0)
Lower Right ( 2378.0, ? 90.0)
Center ? ? ?( 1189.0, ? 45.0)


# gdalinfo /home/david/Descargas/2009.01.18/Sin_referencia/Airs_referencia/GCPs/CO2_particularGTiff_2009.01.18.tif
Driver: GTiff/GeoTIFF
Files: /home/david/Descargas/2009.01.18/Sin_referencia/uwairs_Airs_referencia/GCPs/CO2_particularGTiff_2009.01.18.tif
Size is 90, 135
Coordinate System is `'
Image Structure Metadata:
??INTERLEAVE=BAND
Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ?135.0)
Upper Right ( ? 90.0, ? ?0.0)
Lower Right ( ? 90.0, ?135.0)
Center ? ? ?( ? 45.0, ? 67.5)
Band 1 Block=90x22 Type=Float32, ColorInterp=Gray


Thanks in advance
Best Regards


David A. Ortiz V





________________________________
 De: David Ortiz <dvdov@yahoo.com>
Para: Chaitanya kumar CH <chaitanya.ch@gmail.com> 
CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
Enviado: S?bado, enero 28, 2012 10:59 P.M.
Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
 

Chaitanya,

i ?used gdalwarp with several values for tolerance and minimum_gcps respectively?:
-refine_gcps 1 10, ?1 35, 1 41, 200 10, 200 35, 200 41, 329 10, 329 35, 329 41, 9000 10, 9000 41?

and loaded the images in Gis software with layer of points whose coordinates are from geolocation fields (Latitude, Longitude) in hdf file in order to compare
pixels against points.

when parameters are 1 41, 200 41, 329 41,9000 41, 9000 10 , most of points fall within its corresponding pixel. for other values, the images have a displacement towards west. Then,images with 1 10, 200 10, 329 10 values for parameters??are overlapped as well as images with 1 35, 200 35, 329 35, and 1 41, 200 41, 329 41, 9000 10, 9000 41. ? ? ? ???? ? ? ? ? ? ? ? ? ?








________________________________
 De: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Para: David Ortiz <dvdov@yahoo.com> 
CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
Enviado: Viernes, enero 27, 2012 11:09 P.M.
Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
 

David,

gdalwarp should stop eliminating outliers when it can't find any more. But to be sure you can pass the minimum number of GCPs. Also, the argument tolerance is the tolerance in GCP's SRS units. Since the outliers are indicated by (-9999,-9999) and our GCPs can go between -180 and 180, anything between 360 and 9000 can be given as tolerance.

BTW, there is no need for -s_srs because we are using GCPs.

Do let us know how it goes.


On Sat, Jan 28, 2012 at 6:57 AM, David Ortiz <dvdov@yahoo.com> wrote:

Chaitanya,
>
>
>
>This image have 329 GCPs and 41 of them are not outliers , can i put? -refine_gcps 329 41 in the command ?
>
>
>
>
>
>
>--
>David A. Ortiz V
>
>
>
>
>
>________________________________
> De: Chaitanya kumar CH <chaitanya.ch@gmail.com>
>Para: David Ortiz <dvdov@yahoo.com> 
>CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
>Enviado: Jueves, enero 26, 2012 10:49 P.M.
>
>Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
> 
>
>
>David,
>
>I checked the images I created now. The GCPs were not considered. So, I made sure they were used with gdalwarp.
>gdalwarp -s_srs "EPSG:4326" -t_srs "EPSG:4326" -refine_gcps 200 10 -of GTiff HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret? CO2_sup_Gtiff_EOS_warp.tif
>I used the -refine_gcps. It will help in excluding the dummy gcps 
pointing to (-9999,-9999,0). In this option, the number of minimum_gcps 
had to be given. I chose the number 10 based on the number of usable 
GCPs available. It should not be more than the number of usable GCPs. If I did not exclude the dummy gcps, I got black image.
>
>Also note that the output image dimensions changed.
>
>
>On Fri, Jan 27, 2012 at 7:26 AM, David Ortiz <dvdov@yahoo.com> wrote:
>
>Hi Chaitanya
>>
>>
>>
>>
>>Applying?gdalinfo -stats to input and output images i get coherent values ?for statistics in both .img ?and GTiff ?images. The problem was in data display in GIS since QGIS show a Gtiff image with all pixel values equal to zero when i use "identify spatial objects" tool and ArcGIS ?doesn't display it correctly , just two lines and no data, but?gvSIG ?allows see the?appropriate?values of CO2 amounts.
>>
>>
>>However, neither the .img nor GTiff have geographical spatial reference in WGS84 datum coordinates. Even opening ?subdatasets directly?from hdf file?with ArcGis , the images are missing georeference. As it is seen below, hdf image is between -133.57, -157.94 longitudes and 22.23, 45.88 latitudes. I mentioned HDF_SDS:UNKNOWN datasets on previous post because it have some info about coordinate reference system:
>>SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>>
>>Actually , when i load Geotiff generated with HEGTool?(with other AIRS products)?in any gis software , automatically have wgs84 Datum coordinates
>>
>>
>>
>>Here the results of gdalinfo command:
>>1. Input image
>>
>>
>>
>>gdalinfo -stats HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret?
>>Driver: HDF4Image/HDF4 Dataset
>>? ? ? ? ? ? ? ? ? ?...
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>>? Min=379.197 Max=393.697?
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>
>>
>>2. ?with?Geotiff?output ?image :?
>>gdalinfo -stats ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>>Driver: GTiff/GeoTIFF
>>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif.aux.xml
>>Size is 15, 22
>>Coordinate System is `'
>>GCP Projection =?
>>GCP[ ?0]: Id=1, Info=
>>? ? ? ? ? (0.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?1]: Id=2, Info=
>>? ? ? ? ? (1.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?2]: Id=3, Info=
>>? ? ? ? ? (2.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?3]: Id=4, Info=
>>? ? ? ? ? (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
>>GCP[ ?4]: Id=5, Info=
>>? ? ? ? ? (4.5,0.5) -> (-9999,-9999,0)
>>? ? ? ? ? ? ? ?...?
>>GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? ? ? ? ?...?
>>? INTERLEAVE=BAND
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>? ? ? ? ? ? ??
>>3. .img image :
>>
>>
>>gdalinfo -stats /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>>Driver: HFA/Erdas Imagine Images (.img)
>>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img.aux.xml
>>Size is 15, 22
>>Coordinate System is `'
>>? ? ? ? ? ? ? ?...?
>>GROUP ? ? ? ? ? ? ? ? ?= SPATIALDOMAINCONTAINER
>>? ? GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? ? ? ? ?...?
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>>? Description = Layer_1
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? LAYER_TYPE=athematic
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>
>>
>>
>>
>>
>>
>>What is wrong?. I tried with gdal 1.8 and 1.9 with hdf4 support.
>>
>>
>>
>>
>>Best regards.--
>>
>>
>>David Ortiz V.
>>
>>
>

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E



_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120207/3c32877f/attachment-0001.html
From even.rouault at mines-paris.org  Wed Feb  8 03:11:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  8 03:12:20 2012
Subject: [gdal-dev] PGeo driver fails to open .mdb
In-Reply-To: <125F609FE1635548AF411AFA01558DFA3C00F4A0AC@PER-SRV-EM1.micromine.com.au>
References: <125F609FE1635548AF411AFA01558DFA3C00F4A0AC@PER-SRV-EM1.micromine.com.au>
Message-ID: <1328688679.4f322e272b3de@webmail.free.fr>

Selon Nicolas Garel <ngarel@micromine.com>:

> Hi All,
> Gdal 1.9 fails to open Esri Personal geodatabase file (.mdb) in some cases.
> The new PGeo driver looks into the header of the file for the GDB_GeomColumns
> table (http://trac.osgeo.org/gdal/changeset/21550) and cannot find it due to
> (I assume) the limited size of the header allocated (100Kbytes).
> My geodatabase has hundreds of tables and my assumption is that the buffer
> allocated for the buffer is too small to contain all the information required
> to check if the table exists.
>
> A solution would be to first open the file and query the name of the table
> instead.
> Thank you.

Could you file a ticket in Trac with a link to the database with which you have
an issue so we can see if there's another hint that could be used ? The
rationale for the change was the introduction of the Geomedia driver, and it was
an attempt to avoid opening the DB twice to discover if it should be handled by
the MDB or Geomedia driver. But perhaps there's no other reliable choice.

>
> Nicolas Garel | Junior Software Engineer
> Micromine Product
> Email | ngarel@micromine.com<mailto:ngarel@micromine.com>
>
> http://www.micromine.com<http://www.micromine.com/>
>
>
>
>
> [cid:mm_corp_emailsig_perth.gif@f975285f74b34488990805508972a24c]
>
>


From anton.korosov at nersc.no  Wed Feb  8 03:21:53 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Feb  8 03:22:17 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
Message-ID: <4F3230A1.5060202@nersc.no>

Hello Etienne!

I also got such error when trying to process MODIS L1B images taken near 
the pole. Try to set some limited extent with the -te option for 
gdalwarp. It helped me, at least.

Best regards!
Anton

On 02/07/2012 10:22 PM, Etienne Tourigny wrote:
> Even, Frank,
>
> thanks for your answers.  I have run into a problem with using
> gdalwarp with geoloc transform.
>
> In ticket #1895 there is an hdf file for which the HDF4 driver creates
> GEOLOCATION metadata.
>
> Trying gdalwarp on it gives an error, and the result transform is
> incorrect.  Am I doing something wrong, or is this a bug?
>
> command is : gdalwarp -geoloc -t_srs EPSG:4326
> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> more info below:
>
> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
> Driver: HDF4Image/HDF4 Dataset
> Files: A2006005182000.L2_LAC_SST.x.hdf
> Size is 389, 602
> Coordinate System is `'
> Metadata:
> [...]
> Geolocation:
>    LINE_OFFSET=0
>    LINE_STEP=1
>    PIXEL_OFFSET=0
>    PIXEL_STEP=1
>    SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>    X_BAND=1
>    X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>    Y_BAND=1
>    Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
> Corner Coordinates:
> [...]
>
> $ gdalwarp -geoloc -t_srs EPSG:4326
> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> Creating output file that is 31119P x 5864L.
> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
> ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> $ gdalinfo tmp1.tif
> Driver: GTiff/GeoTIFF
> Files: tmp1.tif
> Size is 31119, 5864
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433],
>      AUTHORITY["EPSG","4326"]]
> Origin = (-90.198287963867188,90.300000000000011)
> Pixel Size = (0.015398926739995,-0.015398926739995)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
> Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
> Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
> Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
> Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
>
>
> Regards,
> Etienne
>
>
> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam<warmerdam@pobox.com>  wrote:
>> On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
>> <etourigny.dev@gmail.com>  wrote:
>>> Hi all,
>>>
>>> I would like to have information on the status of geolocation array
>>> support in GDAL.
>>>
>>> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
>>> still "under development", and the information there is that
>>> GDALCreateGeoLocTransformer "is currently partially implemented".
>>
>> Etienne,
>>
>> I think the geoloc transformer received some fixes from someone
>> other than myself and now is working reasonable well.  It would
>> be desirable to freshen up the RFC and get it passed but it isn't
>> particularly a priority of mine so I'm not likely to drive it in the
>> very near future.
>>
>> Best regards,
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From candini at meeo.it  Wed Feb  8 05:10:32 2012
From: candini at meeo.it (Alessandro Candini)
Date: Wed Feb  8 05:11:23 2012
Subject: [gdal-dev] ogr2ogr in python
Message-ID: <4F324A18.8010909@meeo.it>

Hi list.

I have to perform the following command:

ogr2ogr -t_srs EPSG:900913 output.shp input.shp

but inside a python script.

So I have included the OGR library with

import ogr

but I do not know  what are the commands in python that substitute the 
ogr2ogr tool.

Does it exist an analogue tool in python?
Or should I open the file and launch several manipulation functions in 
order to achieve the same result?

Thanks in advance.
From even.rouault at mines-paris.org  Wed Feb  8 05:16:46 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  8 05:17:07 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <4F324A18.8010909@meeo.it>
References: <4F324A18.8010909@meeo.it>
Message-ID: <1328696206.4f324b8eda29d@webmail.free.fr>


> Does it exist an analogue tool in python?

Yes, see http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2ogr.py

> Or should I open the file and launch several manipulation functions in
> order to achieve the same result?
>
> Thanks in advance.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From candini at meeo.it  Wed Feb  8 05:25:07 2012
From: candini at meeo.it (Alessandro Candini)
Date: Wed Feb  8 05:25:48 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <1328696206.4f324b8eda29d@webmail.free.fr>
References: <4F324A18.8010909@meeo.it>
	<1328696206.4f324b8eda29d@webmail.free.fr>
Message-ID: <4F324D83.4000507@meeo.it>

Thanks.

But is it already included in GDAL distribution?

I have version 1.7.2 on my system and I did not found this file in the 
whole system...

Maybe I can include that file into my python shared lib direcory such as 
/usr/share/pyshared/

>> Does it exist an analogue tool in python?
> Yes, see http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2ogr.py
>
>> Or should I open the file and launch several manipulation functions in
>> order to achieve the same result?
>>
>> Thanks in advance.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


-- 
Alessandro Candini
MEEO S.r.l.
Via Saragat 9
I-44122 Ferrara, Italy
Tel: +39 0532 1861501
Fax: +39 0532 1861637
http://www.meeo.it

========================================
"ATTENZIONE:le informazioni contenute in questo messaggio sono
da considerarsi confidenziali ed il loro utilizzo ? riservato unicamente
al destinatario sopra indicato. Chi dovesse ricevere questo messaggio
per errore ? tenuto ad informare il mittente ed a rimuoverlo
definitivamente da ogni supporto elettronico o cartaceo."

"WARNING:This message contains confidential and/or proprietary
information which may be subject to privilege or immunity and which
is intended for use of its addressee only. Should you receive this
message in error, you are kindly requested to inform the sender and
to definitively remove it from any paper or electronic format."

From even.rouault at mines-paris.org  Wed Feb  8 05:32:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  8 05:32:44 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <4F324D83.4000507@meeo.it>
References: <4F324A18.8010909@meeo.it>
	<1328696206.4f324b8eda29d@webmail.free.fr>
	<4F324D83.4000507@meeo.it>
Message-ID: <1328697142.4f324f36a3358@webmail.free.fr>

Selon Alessandro Candini <candini@meeo.it>:

> Thanks.
>
> But is it already included in GDAL distribution?
>
> I have version 1.7.2 on my system and I did not found this file in the
> whole system...

It is relatively new (perhaps 1.8. don't remember). And anyways it is in the
sample category that is generally not distributed with binary packages.
>
> Maybe I can include that file into my python shared lib direcory such as
> /usr/share/pyshared/

You can use it anywhere you like and modify it for your needs.
From candini at meeo.it  Wed Feb  8 05:38:40 2012
From: candini at meeo.it (Alessandro Candini)
Date: Wed Feb  8 05:39:21 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <1328697142.4f324f36a3358@webmail.free.fr>
References: <4F324A18.8010909@meeo.it>
	<1328696206.4f324b8eda29d@webmail.free.fr>
	<4F324D83.4000507@meeo.it>
	<1328697142.4f324f36a3358@webmail.free.fr>
Message-ID: <4F3250B0.1050806@meeo.it>

You are right: I have put ogr2ogr.py file inside /usr/bin and...

user@office ~ $ ogr2ogr.py
ERROR: Python bindings of GDAL 1.8.0 or later required

The problem is that I cannot update my GDAL version at the moment, it 
will mess up all my dependencies and so on...

Is there an alternative?

Maybe with a bunch of GDAL python functions already present in version 
1.7.3, I can get the same result...

Any suggestions?

> Selon Alessandro Candini<candini@meeo.it>:
>
>> Thanks.
>>
>> But is it already included in GDAL distribution?
>>
>> I have version 1.7.2 on my system and I did not found this file in the
>> whole system...
> It is relatively new (perhaps 1.8. don't remember). And anyways it is in the
> sample category that is generally not distributed with binary packages.
>> Maybe I can include that file into my python shared lib direcory such as
>> /usr/share/pyshared/
> You can use it anywhere you like and modify it for your needs.
From anton.korosov at nersc.no  Wed Feb  8 05:42:16 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Feb  8 05:43:00 2012
Subject: [gdal-dev] Does GDAL API for Python use <Scale> and <Offset> in VRT?
Message-ID: <4F325188.40805@nersc.no>

Hello everybody!

I'm trying to read values from a VRT file in Python.  When I modify 
<Scale> or <Offset> it seem not to make any effect.

I have a simple VRT of a Landsat7 file (below). It has neither scale nor 
offset. I launch the given script twice:
1st time to test the value of scale and the value from a band and to 
change the value of scale.
2nd time I test value of scale and value from a band. The output shows 
that the scale has changed, but the value is the same. I would expect 
that the second time the value should be 70.

Does it mean that ReadAsArray() doesn't interpret <Scale> and <Offset> 
tags? Ot do I do (expect) something wrong?

Thank you!
Anton



Script:
l7 = gdal.Open('L71211005_00520100824_B10.vrt')
print l7.GetRasterBand(1).GetScale()
print l7.GetRasterBand(1).ReadAsArray()[3000, 3000]
l7.GetRasterBand(1).SetScale(2)
l7.FlushCache()
l7 = None

Output:
 > python test.py
1.0
35
 > python test.py
2.0
35

VRT-file before test:
<VRTDataset rasterXSize="9211" rasterYSize="9021">
   <SRS>PROJCS["WGS 84 / UTM zone 33N",GEOGCS["WGS 
84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32633"]]</SRS>
   <GeoTransform>  3.6178500000000000e+05,  3.0000000000000000e+01, 
0.0000000000000000e+00,  8.6874150000000000e+06, 
0.0000000000000000e+00, -3.0000000000000000e+01</GeoTransform>
   <Metadata>
     <MDI key="AREA_OR_POINT">Point</MDI>
   </Metadata>
   <VRTRasterBand dataType="Byte" band="1">
     <Metadata />
     <ColorInterp>Gray</ColorInterp>
     <SimpleSource>
       <SourceFilename 
relativeToVRT="1">L71211005_00520100824_B10.TIF</SourceFilename>
       <SourceBand>1</SourceBand>
       <SourceProperties RasterXSize="9211" RasterYSize="9021" 
DataType="Byte" BlockXSize="9211" BlockYSize="1" />
       <SrcRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
       <DstRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
     </SimpleSource>
   </VRTRasterBand>
</VRTDataset>

VRT-file after test:
<VRTDataset rasterXSize="9211" rasterYSize="9021">
   <SRS>PROJCS["WGS 84 / UTM zone 33N",GEOGCS["WGS 
84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32633"]]</SRS>
   <GeoTransform>  3.6178500000000000e+05,  3.0000000000000000e+01, 
0.0000000000000000e+00,  8.6874150000000000e+06, 
0.0000000000000000e+00, -3.0000000000000000e+01</GeoTransform>
   <Metadata>
     <MDI key="AREA_OR_POINT">Point</MDI>
   </Metadata>
   <VRTRasterBand dataType="Byte" band="1">
     <Metadata />
     <Scale>2</Scale>
     <ColorInterp>Gray</ColorInterp>
     <SimpleSource>
       <SourceFilename 
relativeToVRT="1">L71211005_00520100824_B10.TIF</SourceFilename>
       <SourceBand>1</SourceBand>
       <SourceProperties RasterXSize="9211" RasterYSize="9021" 
DataType="Byte" BlockXSize="9211" BlockYSize="1" />
       <SrcRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
       <DstRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
     </SimpleSource>
   </VRTRasterBand>
</VRTDataset>
From pcorti at gmail.com  Wed Feb  8 05:46:11 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Feb  8 05:47:08 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <4F3250B0.1050806@meeo.it>
References: <4F324A18.8010909@meeo.it>
	<1328696206.4f324b8eda29d@webmail.free.fr>
	<4F324D83.4000507@meeo.it> <1328697142.4f324f36a3358@webmail.free.fr>
	<4F3250B0.1050806@meeo.it>
Message-ID: <CAHXrU-+Sf2-_eS7U6XF5aLxZYgrahhBMHBkxdmM-VdRTSpMo0Q@mail.gmail.com>

On Wed, Feb 8, 2012 at 11:38 AM, Alessandro Candini <candini@meeo.it> wrote:
> You are right: I have put ogr2ogr.py file inside /usr/bin and...
>
> user@office ~ $ ogr2ogr.py
> ERROR: Python bindings of GDAL 1.8.0 or later required
>
> The problem is that I cannot update my GDAL version at the moment, it will
> mess up all my dependencies and so on...
>
> Is there an alternative?
>

Alessandro,
maybe I am misunderstanding here, but if you need to run the ogr2ogr
command, why don't you run the version included in your package as an
external command from Python?
You may use the subprocess library for doing this, like:

>>> from subprocess import call
>>> call(['ogr2ogr'])

best regards
P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From candini at meeo.it  Wed Feb  8 05:48:50 2012
From: candini at meeo.it (Alessandro Candini)
Date: Wed Feb  8 05:49:22 2012
Subject: [gdal-dev] ogr2ogr in python
In-Reply-To: <CAHXrU-+Sf2-_eS7U6XF5aLxZYgrahhBMHBkxdmM-VdRTSpMo0Q@mail.gmail.com>
References: <4F324A18.8010909@meeo.it>
	<1328696206.4f324b8eda29d@webmail.free.fr>
	<4F324D83.4000507@meeo.it>
	<1328697142.4f324f36a3358@webmail.free.fr>
	<4F3250B0.1050806@meeo.it>
	<CAHXrU-+Sf2-_eS7U6XF5aLxZYgrahhBMHBkxdmM-VdRTSpMo0Q@mail.gmail.com>
Message-ID: <4F325312.4080004@meeo.it>

Yeah Paolo, your solution is probably the easiest way to reach my goal, 
I did't thought at it...

Thanks!

> On Wed, Feb 8, 2012 at 11:38 AM, Alessandro Candini<candini@meeo.it>  wrote:
>> You are right: I have put ogr2ogr.py file inside /usr/bin and...
>>
>> user@office ~ $ ogr2ogr.py
>> ERROR: Python bindings of GDAL 1.8.0 or later required
>>
>> The problem is that I cannot update my GDAL version at the moment, it will
>> mess up all my dependencies and so on...
>>
>> Is there an alternative?
>>
> Alessandro,
> maybe I am misunderstanding here, but if you need to run the ogr2ogr
> command, why don't you run the version included in your package as an
> external command from Python?
> You may use the subprocess library for doing this, like:
>
>>>> from subprocess import call
>>>> call(['ogr2ogr'])
> best regards
> P
>


-- 
Alessandro Candini
MEEO S.r.l.
Via Saragat 9
I-44122 Ferrara, Italy
Tel: +39 0532 1861501
Fax: +39 0532 1861637
http://www.meeo.it

========================================
"ATTENZIONE:le informazioni contenute in questo messaggio sono
da considerarsi confidenziali ed il loro utilizzo ? riservato unicamente
al destinatario sopra indicato. Chi dovesse ricevere questo messaggio
per errore ? tenuto ad informare il mittente ed a rimuoverlo
definitivamente da ogni supporto elettronico o cartaceo."

"WARNING:This message contains confidential and/or proprietary
information which may be subject to privilege or immunity and which
is intended for use of its addressee only. Should you receive this
message in error, you are kindly requested to inform the sender and
to definitively remove it from any paper or electronic format."

From even.rouault at mines-paris.org  Wed Feb  8 06:01:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  8 06:01:58 2012
Subject: [gdal-dev] Does GDAL API for Python use <Scale> and <Offset> in
	VRT?
In-Reply-To: <4F325188.40805@nersc.no>
References: <4F325188.40805@nersc.no>
Message-ID: <1328698901.4f32561502463@webmail.free.fr>

Selon Anton Korosov <anton.korosov@nersc.no>:

> Hello everybody!
>
> I'm trying to read values from a VRT file in Python.  When I modify
> <Scale> or <Offset> it seem not to make any effect.
>
> I have a simple VRT of a Landsat7 file (below). It has neither scale nor
> offset. I launch the given script twice:
> 1st time to test the value of scale and the value from a band and to
> change the value of scale.
> 2nd time I test value of scale and value from a band. The output shows
> that the scale has changed, but the value is the same. I would expect
> that the second time the value should be 70.
>
> Does it mean that ReadAsArray() doesn't interpret <Scale> and <Offset>
> tags? Ot do I do (expect) something wrong?

Yes, ReadAsArray() doesn't interpret <Scale> or <Offset>. They are
interpretation hints for the user, but GDAL won't alter the values read from the
dataset.

Alternatively, you can use the -unscale option of gdal_translate so that scale
and offset are taken into account.

>
> Thank you!
> Anton
>
>
>
> Script:
> l7 = gdal.Open('L71211005_00520100824_B10.vrt')
> print l7.GetRasterBand(1).GetScale()
> print l7.GetRasterBand(1).ReadAsArray()[3000, 3000]
> l7.GetRasterBand(1).SetScale(2)
> l7.FlushCache()
> l7 = None
>
> Output:
>  > python test.py
> 1.0
> 35
>  > python test.py
> 2.0
> 35
>
> VRT-file before test:
> <VRTDataset rasterXSize="9211" rasterYSize="9021">
>    <SRS>PROJCS["WGS 84 / UTM zone 33N",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
>
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32633"]]</SRS>
>    <GeoTransform>  3.6178500000000000e+05,  3.0000000000000000e+01,
> 0.0000000000000000e+00,  8.6874150000000000e+06,
> 0.0000000000000000e+00, -3.0000000000000000e+01</GeoTransform>
>    <Metadata>
>      <MDI key="AREA_OR_POINT">Point</MDI>
>    </Metadata>
>    <VRTRasterBand dataType="Byte" band="1">
>      <Metadata />
>      <ColorInterp>Gray</ColorInterp>
>      <SimpleSource>
>        <SourceFilename
> relativeToVRT="1">L71211005_00520100824_B10.TIF</SourceFilename>
>        <SourceBand>1</SourceBand>
>        <SourceProperties RasterXSize="9211" RasterYSize="9021"
> DataType="Byte" BlockXSize="9211" BlockYSize="1" />
>        <SrcRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
>        <DstRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
>      </SimpleSource>
>    </VRTRasterBand>
> </VRTDataset>
>
> VRT-file after test:
> <VRTDataset rasterXSize="9211" rasterYSize="9021">
>    <SRS>PROJCS["WGS 84 / UTM zone 33N",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
>
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32633"]]</SRS>
>    <GeoTransform>  3.6178500000000000e+05,  3.0000000000000000e+01,
> 0.0000000000000000e+00,  8.6874150000000000e+06,
> 0.0000000000000000e+00, -3.0000000000000000e+01</GeoTransform>
>    <Metadata>
>      <MDI key="AREA_OR_POINT">Point</MDI>
>    </Metadata>
>    <VRTRasterBand dataType="Byte" band="1">
>      <Metadata />
>      <Scale>2</Scale>
>      <ColorInterp>Gray</ColorInterp>
>      <SimpleSource>
>        <SourceFilename
> relativeToVRT="1">L71211005_00520100824_B10.TIF</SourceFilename>
>        <SourceBand>1</SourceBand>
>        <SourceProperties RasterXSize="9211" RasterYSize="9021"
> DataType="Byte" BlockXSize="9211" BlockYSize="1" />
>        <SrcRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
>        <DstRect xOff="0" yOff="0" xSize="9211" ySize="9021" />
>      </SimpleSource>
>    </VRTRasterBand>
> </VRTDataset>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From etourigny.dev at gmail.com  Wed Feb  8 08:13:48 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Feb  8 08:14:38 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <4F3230A1.5060202@nersc.no>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
	<4F3230A1.5060202@nersc.no>
Message-ID: <CA+TxYvNFYgckgDJgoyuc-5x-U0KLOAKiQDCx7mpFk2q4cYPR1A@mail.gmail.com>

Thanks Anton,

The latitudes of this dataset span from 26.77687 to 33.82318 , so
nowhere near the poles!

I tried your suggestion, using the extents from the hdf metadata:

		:Northernmost\ Latitude = 33.82318f ;
		:Southernmost\ Latitude = 26.77687f ;
		:Easternmost\ Longitude = -79.69389f ;
		:Westernmost\ Longitude = -90.15974f ;


$ gdalwarp -geoloc -t_srs EPSG:4326 -te -90.15974 26.77687 -79.69389
33.82318f  --debug off
HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif

And casual inspection shows that the value is correctly reprojected
(the outlines of Florida are consistent).

==> Does this mean that gdalwarp -geoloc should always be used with -te option?

Etienne

On Wed, Feb 8, 2012 at 6:21 AM, Anton Korosov <anton.korosov@nersc.no> wrote:
> Hello Etienne!
>
> I also got such error when trying to process MODIS L1B images taken near the
> pole. Try to set some limited extent with the -te option for gdalwarp. It
> helped me, at least.
>
> Best regards!
> Anton
>
>
> On 02/07/2012 10:22 PM, Etienne Tourigny wrote:
>>
>> Even, Frank,
>>
>> thanks for your answers. ?I have run into a problem with using
>> gdalwarp with geoloc transform.
>>
>> In ticket #1895 there is an hdf file for which the HDF4 driver creates
>> GEOLOCATION metadata.
>>
>> Trying gdalwarp on it gives an error, and the result transform is
>> incorrect. ?Am I doing something wrong, or is this a bug?
>>
>> command is : gdalwarp -geoloc -t_srs EPSG:4326
>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> more info below:
>>
>> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
>> Driver: HDF4Image/HDF4 Dataset
>> Files: A2006005182000.L2_LAC_SST.x.hdf
>> Size is 389, 602
>> Coordinate System is `'
>> Metadata:
>> [...]
>> Geolocation:
>> ? LINE_OFFSET=0
>> ? LINE_STEP=1
>> ? PIXEL_OFFSET=0
>> ? PIXEL_STEP=1
>> ? SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>>
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>> ? X_BAND=1
>> ? X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>> ? Y_BAND=1
>> ? Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
>> Corner Coordinates:
>> [...]
>>
>> $ gdalwarp -geoloc -t_srs EPSG:4326
>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> Creating output file that is 31119P x 5864L.
>> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
>> ERROR 1: Too many points (441 out of 441) failed to transform,
>> unable to compute output bounds.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> $ gdalinfo tmp1.tif
>> Driver: GTiff/GeoTIFF
>> Files: tmp1.tif
>> Size is 31119, 5864
>> Coordinate System is:
>> GEOGCS["WGS 84",
>> ? ? DATUM["WGS_1984",
>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> ? ? PRIMEM["Greenwich",0],
>> ? ? UNIT["degree",0.0174532925199433],
>> ? ? AUTHORITY["EPSG","4326"]]
>> Origin = (-90.198287963867188,90.300000000000011)
>> Pixel Size = (0.015398926739995,-0.015398926739995)
>> Metadata:
>> ? AREA_OR_POINT=Area
>> Image Structure Metadata:
>> ? INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left ?( -90.1982880, ?90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
>> Lower Left ?( -90.1982880, ? 0.0006936) ( 90d11'53.84"W, ?0d 0' 2.50"N)
>> Upper Right ( ? ? 389.001, ? ? ?90.300) (Invalid angle, 90d18' 0.00"N)
>> Lower Right ( ? ? 389.001, ? ? ? 0.001) (Invalid angle, ?0d 0' 2.50"N)
>> Center ? ? ?( 149.4013126, ?45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
>>
>>
>> Regards,
>> Etienne
>>
>>
>> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam<warmerdam@pobox.com>
>> ?wrote:
>>>
>>> On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
>>> <etourigny.dev@gmail.com> ?wrote:
>>>>
>>>> Hi all,
>>>>
>>>> I would like to have information on the status of geolocation array
>>>> support in GDAL.
>>>>
>>>> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate) ?is
>>>> still "under development", and the information there is that
>>>> GDALCreateGeoLocTransformer "is currently partially implemented".
>>>
>>>
>>> Etienne,
>>>
>>> I think the geoloc transformer received some fixes from someone
>>> other than myself and now is working reasonable well. ?It would
>>> be desirable to freshen up the RFC and get it passed but it isn't
>>> particularly a priority of mine so I'm not likely to drive it in the
>>> very near future.
>>>
>>> Best regards,
>>>
>>> --
>>>
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>> _______________________________________________
>>
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From anton.korosov at nersc.no  Wed Feb  8 08:19:05 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Feb  8 08:19:05 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvNFYgckgDJgoyuc-5x-U0KLOAKiQDCx7mpFk2q4cYPR1A@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>	<4F3230A1.5060202@nersc.no>
	<CA+TxYvNFYgckgDJgoyuc-5x-U0KLOAKiQDCx7mpFk2q4cYPR1A@mail.gmail.com>
Message-ID: <4F327649.90006@nersc.no>

Hi Etienne!

probably yes. At least that's what I got from an answer from Brian some 
time ago:

 > > EOS_SWATH has 2 geolocation arrays, you might try the -geoloc switch to
 >  > gdalwarp, otherwise it creates a handfull of gcps from the arrays, if
 >  > you get a error about points failing to transform, set the output 
extent
 >  > with the -te switch.
 >  >
 >  > also you could try the swath2grid application in
 >  > https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath
 >  >
 >  > Brian

Anton

On 02/08/2012 02:13 PM, Etienne Tourigny wrote:
> Thanks Anton,
>
> The latitudes of this dataset span from 26.77687 to 33.82318 , so
> nowhere near the poles!
>
> I tried your suggestion, using the extents from the hdf metadata:
>
> 		:Northernmost\ Latitude = 33.82318f ;
> 		:Southernmost\ Latitude = 26.77687f ;
> 		:Easternmost\ Longitude = -79.69389f ;
> 		:Westernmost\ Longitude = -90.15974f ;
>
>
> $ gdalwarp -geoloc -t_srs EPSG:4326 -te -90.15974 26.77687 -79.69389
> 33.82318f  --debug off
> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>
> And casual inspection shows that the value is correctly reprojected
> (the outlines of Florida are consistent).
>
> ==>  Does this mean that gdalwarp -geoloc should always be used with -te option?
>
> Etienne
>
> On Wed, Feb 8, 2012 at 6:21 AM, Anton Korosov<anton.korosov@nersc.no>  wrote:
>> Hello Etienne!
>>
>> I also got such error when trying to process MODIS L1B images taken near the
>> pole. Try to set some limited extent with the -te option for gdalwarp. It
>> helped me, at least.
>>
>> Best regards!
>> Anton
>>
>>
>> On 02/07/2012 10:22 PM, Etienne Tourigny wrote:
>>>
>>> Even, Frank,
>>>
>>> thanks for your answers.  I have run into a problem with using
>>> gdalwarp with geoloc transform.
>>>
>>> In ticket #1895 there is an hdf file for which the HDF4 driver creates
>>> GEOLOCATION metadata.
>>>
>>> Trying gdalwarp on it gives an error, and the result transform is
>>> incorrect.  Am I doing something wrong, or is this a bug?
>>>
>>> command is : gdalwarp -geoloc -t_srs EPSG:4326
>>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>>> more info below:
>>>
>>> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
>>> Driver: HDF4Image/HDF4 Dataset
>>> Files: A2006005182000.L2_LAC_SST.x.hdf
>>> Size is 389, 602
>>> Coordinate System is `'
>>> Metadata:
>>> [...]
>>> Geolocation:
>>>    LINE_OFFSET=0
>>>    LINE_STEP=1
>>>    PIXEL_OFFSET=0
>>>    PIXEL_STEP=1
>>>    SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>>>
>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>>>    X_BAND=1
>>>    X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>>>    Y_BAND=1
>>>    Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
>>> Corner Coordinates:
>>> [...]
>>>
>>> $ gdalwarp -geoloc -t_srs EPSG:4326
>>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>>> Creating output file that is 31119P x 5864L.
>>> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
>>> ERROR 1: Too many points (441 out of 441) failed to transform,
>>> unable to compute output bounds.
>>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>>
>>> $ gdalinfo tmp1.tif
>>> Driver: GTiff/GeoTIFF
>>> Files: tmp1.tif
>>> Size is 31119, 5864
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>>      DATUM["WGS_1984",
>>>          SPHEROID["WGS 84",6378137,298.257223563,
>>>              AUTHORITY["EPSG","7030"]],
>>>          AUTHORITY["EPSG","6326"]],
>>>      PRIMEM["Greenwich",0],
>>>      UNIT["degree",0.0174532925199433],
>>>      AUTHORITY["EPSG","4326"]]
>>> Origin = (-90.198287963867188,90.300000000000011)
>>> Pixel Size = (0.015398926739995,-0.015398926739995)
>>> Metadata:
>>>    AREA_OR_POINT=Area
>>> Image Structure Metadata:
>>>    INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
>>> Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
>>> Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
>>> Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
>>> Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
>>>
>>>
>>> Regards,
>>> Etienne
>>>
>>>
>>> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam<warmerdam@pobox.com>
>>>   wrote:
>>>>
>>>> On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
>>>> <etourigny.dev@gmail.com>    wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> I would like to have information on the status of geolocation array
>>>>> support in GDAL.
>>>>>
>>>>> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
>>>>> still "under development", and the information there is that
>>>>> GDALCreateGeoLocTransformer "is currently partially implemented".
>>>>
>>>>
>>>> Etienne,
>>>>
>>>> I think the geoloc transformer received some fixes from someone
>>>> other than myself and now is working reasonable well.  It would
>>>> be desirable to freshen up the RFC and get it passed but it isn't
>>>> particularly a priority of mine so I'm not likely to drive it in the
>>>> very near future.
>>>>
>>>> Best regards,
>>>>
>>>> --
>>>>
>>>> ---------------------------------------+--------------------------------------
>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>> warmerdam@pobox.com
>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>
>>> _______________________________________________
>>>
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Christopher.Pouliot at state.mn.us  Wed Feb  8 10:17:24 2012
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Wed Feb  8 10:18:19 2012
Subject: [gdal-dev] Detect if File Geodatabase has a schema lock
In-Reply-To: <20111020054829.E29AEE0059B@lists.osgeo.org>
References: <20111020054829.E29AEE0059B@lists.osgeo.org>
Message-ID: <074A014435F2E543B1FD97E729C76E4D07AAF0@055-CH1MPN1-013.055d.mgd.msft.net>

Hi All,

I am writing to an ESRI File Geodatabase and need to test to see if a layer has a schema lock on it (if it is loaded in ArcMap).  I test with  layer.TestCapability("SequentialWrite") and it always returns true yet when I attempt to write a feature to that layer it chokes saying that there is a schema lock on the layer.

So my question is, can I write to a layer that contains a schema lock?  If not, how can I effectively check to see if a schema lock exists?

Thanks,

Chris

From ethanfahy at gmail.com  Wed Feb  8 10:39:57 2012
From: ethanfahy at gmail.com (Ethan)
Date: Wed Feb  8 10:40:19 2012
Subject: [gdal-dev] Can RasterIO write one band at a time or must I combine
 my separate R,G,B buffers first?
Message-ID: <1328715597836-4376337.post@n6.nabble.com>

I am writing a C++ program that reads in 3 separate single band geotiffs,
applies some math to them, then outputs a single geotiff files that contains
the data from those 3 files in the bands 1,2 and 3.  I've so far set up the
code to follow the methods from the gdal api tutorial and have read in the
values from each of the 3 geotiffs to 3 separate buffers.  When it comes
time to use RasterIO to write to my single output geotiff, is there any way
to write one band at a time?  Or is there any way to use the RasterIO
function without first combining my 3 buffers into a single buffer?  For me
the RasterIO documentation is a little unclear when it describes:
        nBandCount 	the number of bands being read or written.
	panBandMap 	the list of nBandCount band numbers being read/written. Note
band numbers are 1 based. This may be NULL to select the first nBandCount
bands. 

Thanks in advance for any help it's much appreciated.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-RasterIO-write-one-band-at-a-time-or-must-I-combine-my-separate-R-G-B-buffers-first-tp4376337p4376337.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ksshannon at gmail.com  Wed Feb  8 11:05:47 2012
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Feb  8 11:06:16 2012
Subject: [gdal-dev] Can RasterIO write one band at a time or must I
	combine my separate R,G,B buffers first?
In-Reply-To: <1328715597836-4376337.post@n6.nabble.com>
References: <1328715597836-4376337.post@n6.nabble.com>
Message-ID: <CAJ0mEz37FG4SR4ocd5DLwCT4OT=XixbWaUT2oFU2u_KNfrPYhw@mail.gmail.com>

Ethan, you can fetch single bands using GDALRasterBand* poBand =
GetRasterBand(1) and use poBand->RasterIO(...).  See docs here:

http://gdal.org/classGDALRasterBand.html


/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Wed, Feb 8, 2012 at 08:39, Ethan <ethanfahy@gmail.com> wrote:

> I am writing a C++ program that reads in 3 separate single band geotiffs,
> applies some math to them, then outputs a single geotiff files that
> contains
> the data from those 3 files in the bands 1,2 and 3.  I've so far set up the
> code to follow the methods from the gdal api tutorial and have read in the
> values from each of the 3 geotiffs to 3 separate buffers.  When it comes
> time to use RasterIO to write to my single output geotiff, is there any way
> to write one band at a time?  Or is there any way to use the RasterIO
> function without first combining my 3 buffers into a single buffer?  For me
> the RasterIO documentation is a little unclear when it describes:
>        nBandCount      the number of bands being read or written.
>        panBandMap      the list of nBandCount band numbers being
> read/written. Note
> band numbers are 1 based. This may be NULL to select the first nBandCount
> bands.
>
> Thanks in advance for any help it's much appreciated.
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Can-RasterIO-write-one-band-at-a-time-or-must-I-combine-my-separate-R-G-B-buffers-first-tp4376337p4376337.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120208/20a5490f/attachment.html
From ethanfahy at gmail.com  Wed Feb  8 11:14:39 2012
From: ethanfahy at gmail.com (Ethan)
Date: Wed Feb  8 11:15:14 2012
Subject: [gdal-dev] Re: Can RasterIO write one band at a time or must I
 combine my separate R,G,B buffers first?
In-Reply-To: <CAJ0mEz37FG4SR4ocd5DLwCT4OT=XixbWaUT2oFU2u_KNfrPYhw@mail.gmail.com>
References: <1328715597836-4376337.post@n6.nabble.com>
	<CAJ0mEz37FG4SR4ocd5DLwCT4OT=XixbWaUT2oFU2u_KNfrPYhw@mail.gmail.com>
Message-ID: <1328717679554-4376431.post@n6.nabble.com>

Thanks Kyle that worked perfectly, much obliged.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-RasterIO-write-one-band-at-a-time-or-must-I-combine-my-separate-R-G-B-buffers-first-tp4376337p4376431.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mladen-g at distributel.net  Wed Feb  8 13:15:00 2012
From: mladen-g at distributel.net (mladen-g@distributel.net)
Date: Wed Feb  8 13:24:50 2012
Subject: [gdal-dev] Re: Weird gdal2tiles performance inconsistency
In-Reply-To: <20111222165852.406875abxtln4sho@webmail.distributel.net>
References: <20111222165852.406875abxtln4sho@webmail.distributel.net>
Message-ID: <20120208111500.17823spyjm0avixw@webmail.distributel.net>

Hi Vadim,

Just wanted to say thanks for suggesting the tilers-tools package.   
Over the past few weeks I've done some testing with it, and while it  
has some minor quirks, I think it's overall a better solution for me.

I do still see the strange performance drop in low zoomlevels, but  
since performance is overall much better, it's easier to tolerate.

I see on the Google code site that you're the project owner, so good job!

Regards,
Mladen

Quoting vadp.devl at gmail.com:

> Hi Mladen,
>
> On Fri, Dec 23, 2011 at 3:58 AM,  <mladen-g at distributel.net> wrote:
> > This takes about 16 seconds on my machine.
> >
> ...
> > This takes 32 seconds, or about double the time of tiling zoomlevels 1-7.
>
> Not really an answer to your question, but if you are about a timinig
> issues for you rater processing you may give a try to gdal_tiler.py
> from http://code.google.com/p/tilers-tools.
>
> Regards
> Vadim


Quoting mladen-g@distributel.net:

> Hi all,
>
> I'm seeing some very strange performance from gdal2tiles on a  
> particular grid, so I'm wondering if someone has an insight into why  
> this is happening.
>
> The problem is that when I tile the grid at zoom level 7, I get much  
> better performance than with other zoomlevels, including lower ones  
> (!).
>
> The grid is this (zipped PNG, ~2.7Mb):
> http://dl.dropbox.com/u/53500018/ontarioOrigSizeTrimReprojected.zip
>
> So, let's say I run this command:
> gdal2tiles.bat -w google -s EPSG:4326 -z 1-7 -v  
> C:\temp\ontarioOrigSizeTrimReprojected.png
> C:\temp\outputTiles
>
> This takes about 16 seconds on my machine.
>
> But if I replace the last line to be zoom level 1:
> gdal2tiles.bat -w google -s EPSG:4326 -z 1-1 -v  
> C:\temp\ontarioOrigSizeTrimReprojected.png
> C:\temp\outputTiles
>
> This takes 32 seconds, or about double the time of tiling zoomlevels  
> 1-7.  Note also that I've experimented with other maximum zoomlevels  
> (5,6,8,9,10,11) and they all run slower than 7.
>
> So, does anyone know Why does this strange behaviour happen on zoom  
> level 7?  And is there any way to optimize the input to gdal2tiles  
> for better performance?
>
> Regards,
> Mladen
>
> ----------------------------------------------------------------
> This message was sent using Distributel Webmail.
> Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.
>
>



----------------------------------------------------------------
This message was sent using Distributel Webmail.
Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.


From heidegg at hotmail.com  Thu Feb  9 04:45:27 2012
From: heidegg at hotmail.com (Roger Phillips)
Date: Thu Feb  9 04:47:23 2012
Subject: [gdal-dev] Multithreading, deadlock with proj.4
Message-ID: <SNT111-W516E32C7E84DD32836F816AA7B0@phx.gbl>


Hello folks,

I recently tried to use the GDAL 1.9.0 API from multiple threads. However, they may arise a deadlock situation
where one thread hangs in the cpl_multithread.cpp CPLAcquireMutex function and others hang in the pj_acquire_lock() function of the proj.4 4.7.0 API blocking each other.
The methods that set the locks seem to be the

int         Initialize( OGRSpatialReference *poSource, 
                            OGRSpatialReference *poTarget );
    virtual int TransformEx( int nCount, 
                             double *x, double *y, double *z = NULL,
                             int *panSuccess = NULL );

methods of ogrct.cpp.

Not using the methods prevents a deadlock.

Do you know about this?

Thanks for your attention!
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120209/6c68b425/attachment.html
From pascal.jaugeas.External at cassidian.com  Thu Feb  9 08:35:40 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Thu Feb  9 08:36:01 2012
Subject: [gdal-dev] Use Gdal in CentOS Mono
In-Reply-To: <CAJ0mEz37FG4SR4ocd5DLwCT4OT=XixbWaUT2oFU2u_KNfrPYhw@mail.gmail.com>
Message-ID: <4A9CDAF29DA84A4EAEAA77395DDE56F405F98846@SMFIDF806A.main.fr.ds.corp>

Hello,

 

I develop an application using Gdal dlls (to read grib file and  DTED
and VMAP shape...).

This application is developed with Visual Studio 2008 in C# .NET 3.5.

I want to port this appli in a linux CentOS 5.5  but I have an error
when I execute this .exe with "mono".

I have just deplace  my bin directory. Normally, it works for another
application.

But the error concern Gdal Dll (ogr...).

 

Do you have an idea to solve my problem? Maybe replace gdal Windows Dll
by gdal Linux So ? but which ones ?

 

Best regards

 

Pascal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120209/b6976741/attachment.html
From even.rouault at mines-paris.org  Thu Feb  9 08:56:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  9 08:56:45 2012
Subject: [gdal-dev] Multithreading, deadlock with proj.4
In-Reply-To: <SNT111-W516E32C7E84DD32836F816AA7B0@phx.gbl>
References: <SNT111-W516E32C7E84DD32836F816AA7B0@phx.gbl>
Message-ID: <1328795770.4f33d07aadb98@webmail.free.fr>

Selon Roger Phillips <heidegg@hotmail.com>:

You didn't mention which OS you are using, but if it is Windows, I believe you
are running into this proj4 bug : http://trac.osgeo.org/proj/ticket/63

It is now fixed, but no 4.7.1 or 4.8.0 release has been made since the fix has
been applied, so you have to patch it manually for now (or downgrade to a
previous proj release).

>
> Hello folks,
>
> I recently tried to use the GDAL 1.9.0 API from multiple threads. However,
> they may arise a deadlock situation
> where one thread hangs in the cpl_multithread.cpp CPLAcquireMutex function
> and others hang in the pj_acquire_lock() function of the proj.4 4.7.0 API
> blocking each other.
> The methods that set the locks seem to be the
>
> int         Initialize( OGRSpatialReference *poSource,
>                             OGRSpatialReference *poTarget );
>     virtual int TransformEx( int nCount,
>                              double *x, double *y, double *z = NULL,
>                              int *panSuccess = NULL );
>
> methods of ogrct.cpp.
>
> Not using the methods prevents a deadlock.
>
> Do you know about this?
>
> Thanks for your attention!
>


From jachym.cepicky at gmail.com  Thu Feb  9 14:00:03 2012
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Thu Feb  9 14:00:23 2012
Subject: [gdal-dev] WFS 1.1 and axis orientation - wrong coordinates
	interpretation
Message-ID: <4F3417B3.3050302@gmail.com>

Hi,

I think, OGR (and therefore MapServer too), is not taking care about
axis orientation of incomming data, acting as WFS 1.1 client. Result is
flipped data and I do not know, how the software recognizes, that axes
order is different (apperently, it does not).

We have setuped generic WFS 1.1 server with MapServer (6.0.1). Data are
published in WGS84.

With very simple request, you get the data and the axis order is Y,X
(lat, lon) (imho correct)

http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfeature&typename=okresy

Now, when try to get this data with OGR and convert them to e.g. Shapefile

ogr2ogr okresy.shp
"WFS:http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfeature&typename=okresy"

Resulting shapefile has inverted coordinates  (wrong)

Same applies, when I defined WFS layer using MapFile and tryed to render
the image. NOTE: Probably patch [1] is needed. Data are downloaded
corectly by the client (MapServer) from the server (MapServer or
anything else), but they are not rendered, because they are not
recognized as "inverted axis" data.

LAYER
    CONNECTION "http://gis.bnhelp.cz/ows/crwfs?"
    CONNECTIONTYPE WFS
    DATA "okresy"
    METADATA
      "wfs_extent"      "12.0972 48.5542 18.8583 51.0558"
      "wfs_request_method"      "GET"
      "wms_extent"      "12.0972 48.5542 18.8583 51.0558"
      "wfs_title"       "Okresy CR"
      "wfs_typename"    "okresy"
      "gml_include_items"       "all"
      "wfs_version"     "1.1.0"
      "wms_title"       "Okresy CR"
    END # METADATA
    NAME "okresy"
    PROJECTION
      "init=epsg:4326"
    END # PROJECTION
    STATUS OFF
    TEMPLATE "foo"
    TILEITEM "location"
    TYPE POLYGON
    UNITS METERS
    CLASS
      STYLE
        ANGLE 0
        COLOR 238 153 0
        OFFSET 0 0
        POLAROFFSET 0 0
        OUTLINECOLOR 134 81 0
        SIZE 5
        WIDTH 5
      END # STYLE
    END # CLASS
  END # LAYER

NOTE: WFS 1.0.0 just works.

So, do I consider this right as bug in OGR WFS 1.1 client implementation?

Thanks

Jachym

[1] http://trac.osgeo.org/mapserver/ticket/4118

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: OpenPGP digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120209/a0375ca7/signature.bin
From even.rouault at mines-paris.org  Thu Feb  9 14:22:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  9 14:21:25 2012
Subject: [gdal-dev] WFS 1.1 and axis orientation - wrong coordinates
	interpretation
In-Reply-To: <4F3417B3.3050302@gmail.com>
References: <4F3417B3.3050302@gmail.com>
Message-ID: <201202092022.50567.even.rouault@mines-paris.org>

Le jeudi 09 f?vrier 2012 20:00:03, Jachym Cepicky a ?crit :
> Hi,
> 
> I think, OGR (and therefore MapServer too), is not taking care about
> axis orientation of incomming data, acting as WFS 1.1 client. Result is
> flipped data and I do not know, how the software recognizes, that axes
> order is different (apperently, it does not).
> 
> We have setuped generic WFS 1.1 server with MapServer (6.0.1). Data are
> published in WGS84.
> 
> With very simple request, you get the data and the axis order is Y,X
> (lat, lon) (imho correct)
> 
> http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfeature
> &typename=okresy
> 
> Now, when try to get this data with OGR and convert them to e.g. Shapefile
> 
> ogr2ogr okresy.shp
> "WFS:http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfe
> ature&typename=okresy"
> 
> Resulting shapefile has inverted coordinates  (wrong)

Jachym ,

As always with axis ordering issues, the situation is complex. If not already 
done, I'd encourage you to first carefully read 
http://gdal.org/ogr/drv_gml.html , and particularly the CRS section.

I've looked at your server output and I believe this is more a bug (well, this 
can be discussed) in MapServer than in OGR. The issue is that in its 
GetFeature output, MapServer indicates  srsName="EPSG:4326" but reports 
coordinates in lat, long order.

The GML driver assumes that SRS expressed in EPSG:XXXX form are in long, lat 
order (which was the convention used in WFS 1.0 where most servers didn't 
respect the EPSG advertized axis order). Whereas if they are expressed as 
urn:ogc:EPSG::XXXX (which is now the popular form for WFS 1.1), they are in 
the axis order expressed by EPSG, which is lat, long in the case of EPSG 4326. 
I had created http://trac.osgeo.org/mapserver/ticket/3576 about that some time 
ago.

When the GML driver recognizes that the coordinates of a SRS are in lat, long 
order in the GML, it will flip them by default so that the consuming 
application see them in the usual long, lat order. This can be overriden with 
the GML_INVERT_AXIS_ORDER_IF_LAT_LONG config option.

Best regards,

Even
From even.rouault at mines-paris.org  Thu Feb  9 16:29:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  9 16:27:54 2012
Subject: [gdal-dev] warp memory limit default too low and does not have a
	config option
In-Reply-To: <CA+TxYvP0M_jMT=jCDZ=n4k8VrSrVG=ZxYEua6c0MFZtWpFcnDQ@mail.gmail.com>
References: <CA+TxYvNrmFqSFQCUcY4ZHSjDPSHt_KeK10ceqtViOtw3HCT4Vw@mail.gmail.com>
	<201202080013.38985.even.rouault@mines-paris.org>
	<CA+TxYvP0M_jMT=jCDZ=n4k8VrSrVG=ZxYEua6c0MFZtWpFcnDQ@mail.gmail.com>
Message-ID: <201202092229.05699.even.rouault@mines-paris.org>

> 
> Is the problematic case you cite rather common or the exceptional?
> Perhaps the -wm option is a good place to set a lower memory limit in
> this case, with the default being higher (instead of the other way
> around)?

Unless we install a spy in gdalwarp that sends reports to a server, nobody 
will know I'm afraid ;-)

> 
> Which is more common, 1) many small images being merged into a larger
> one, 2) warping of large images or 3) merging of large+small images?
> It would be nice as you suggest to have some benchmarks, would the 3
> cases I just mentioned be representative enough? What would be typical
> sizes for each case?

I can imagine, in simple warping scenarios, images of 1000x1000 and 
10000x10000 pixels.
And for mosaicing : merging images of size 1000x1000 in a 50000x50000 RGB 
mosaic.
But this is really arbitrary...

> Perhaps a compromise could be found, that
> minimizes performance penalties on average.
> The mentioned ticket has a proposed patch (by you) -  perhaps it could
> be used in some benchmarks?

Actually, I only saved the patch that was posted in a volatile paste by Adam. 
The rationale behind it is looks reasonable. I think I tested it a bit at that 
time, but was probably too shy to apply it without more testing.

> On a side note, I *think* that most users use default value and do not
> use the -wm option unless they really look into the docs - therefore
> it would be nice to have a better default.

I agree that users will unlikely play with -wm option whose value might need 
some expertise to set it to an appropriate value. So I think that increasing 
the default value for -wm is reasonable if it helps in common scenarios. But I 
think benchmarks will show that we will need to fix the issue raised in the 
ticket first, probably with Adam's patch or something close to that idea.

There are a few cases where choosing 1/4 of the RAM by default might cause 
issues : 

1) If several gdalwarp processes are launched in parallel, they might exhaust 
the RAM and suffer from excessive swapping. But I think it is OK in that 
advanced scenario to tell them : "just set -wm to a lower value so that the 
sum of the -wm values is lower than XX% of the RAM".

2) 1/4 of the RAM isn't appropriate for 32 bit process. You can have a machine 
with 64 GB RAM, but a 32 bit process can only address 2 GB (generally, 
sometimes 3 GB). So we should probably not try to use more than 1 GB (or less)  
to avoid exhausting virtual memory space in that case.

> 
> >> 2) Add a config option so that the default can be set for all
> >> operations by the user (which overrides 1, but can be overridden for
> >> each operation)
> > 
> > Not sure to understand how option 2) if different from the -wm option and
> > how it would be implemented ...
> 
> Simply a config option, like there is for raster i/o cache (GDAL_CACHEMAX).
> This would be a simple fix that allows the user to set the default for
> his/her typical usage (and select another value with -wm when needed).
> There might not be a need to change the default value then.

I'm not convinced that adding a new config option that does the same thing as -
wm will really help. Possibly, it would make things more confusing.

> I have a small patch that implements that, should I create a ticket to
> centralize this discussion and post the patch?
> 
> cheers,
> Etienne
> 
> >> Any comments?
> >> 
> >> regards,
> >> Etienne
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nhatzop at gmail.com  Thu Feb  9 20:01:10 2012
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Feb  9 20:01:56 2012
Subject: [gdal-dev] gdalenhance -config file how you do linear interpolation
	of the colors?
Message-ID: <CALDJGKBCk2m9=Yr1VKP2H8GO7LJjx=2JurMGjzkW6kKbtAm=og@mail.gmail.com>

so I have created a config file for gdalenhance

color.config:

1:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
120:0.429:190 190:0.231:255
2:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
120:0.429:190 190:0.231:255
3:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
120:0.429:190 190:0.231:255

is it valid..? is it going to make a linear interpolation of the colors???



--Nikos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120209/fabbafe1/attachment.html
From chaitanya.ch at gmail.com  Fri Feb 10 01:59:19 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 10 01:59:28 2012
Subject: [gdal-dev] gdalenhance -config file how you do linear
	interpolation of the colors?
In-Reply-To: <CALDJGKBCk2m9=Yr1VKP2H8GO7LJjx=2JurMGjzkW6kKbtAm=og@mail.gmail.com>
References: <CALDJGKBCk2m9=Yr1VKP2H8GO7LJjx=2JurMGjzkW6kKbtAm=og@mail.gmail.com>
Message-ID: <CAMKgpOagkSdMERamo5BdQTZJ+Vwjb2=SQgdapEeELjPgGpcMmg@mail.gmail.com>

Nikolaos,

The gdalenhance utility is not really recommended. I don't know the config
file format.

GDAL's VRT driver[1] supports a look-up-table that works with linear
interpolation. In it, you specify pairs of corresponding values in source
and destination rasters. The intermediate source values are interpolated
linearly.

[1]: http://www.gdal.org/gdal_vrttut.html

On Fri, Feb 10, 2012 at 6:31 AM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> so I have created a config file for gdalenhance
>
> color.config:
>
> 1:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
> 120:0.429:190 190:0.231:255
> 2:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
> 120:0.429:190 190:0.231:255
> 3:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
> 120:0.429:190 190:0.231:255
>
> is it valid..? is it going to make a linear interpolation of the colors???
>
>
>
> --Nikos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120210/ee079236/attachment.html
From mohammedrashadkm at gmail.com  Fri Feb 10 03:18:39 2012
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Feb 10 03:19:49 2012
Subject: [gdal-dev] spatial filter problem
Message-ID: <CANNqv9efbqmn2_XZc7ww+E85sBrokzPwF-8vVnRP-psHmmae4g@mail.gmail.com>

  OGRLinearRing oSpatialFilter;

  oSpatialFilter.setNumPoints(5);
  oSpatialFilter.setPoint(0, rect.minx, rect.miny);
  oSpatialFilter.setPoint(1, rect.maxx, rect.miny);
  oSpatialFilter.setPoint(2, rect.maxx, rect.maxy);
  oSpatialFilter.setPoint(3, rect.minx, rect.maxy);
  oSpatialFilter.setPoint(4, rect.minx, rect.miny);

 poLayer->SetSpatialFilter( &oSpatialFilter );
  poLayer->ResetReading();


poFeature = poLayer->GetNextFeature() gives me null poFeature

does spatialFilter requires gdal build with geos?

with 1.8.0 ubuntu version I am able to use spatialFilter but not with trunk

-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120210/cea1af4b/attachment.html
From pcorti at gmail.com  Fri Feb 10 06:04:34 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Fri Feb 10 06:05:33 2012
Subject: [gdal-dev] is there a way to concatenate the band in raster file
	name
Message-ID: <CAHXrU-JrJZAm9Bxwigc42ZB3tUkXJFTz2CRz5_-V5E8Z7jaQig@mail.gmail.com>

Hi all

Using the netCDF driver, I have noticed that there is a nice syntax
for getting the dataset and the single raster in the dataset.

For example, in my case, for accessing the dataset:

   $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc

and for accessing the single raster:

   $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc:myraster

I was wondering if there is a way (that could be very useful also for
other raster formats) to concatenate also the band, something like
this:

   $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc:myraster:myband

I would need this for using it in MapServer, without the need to
create virtual rasters (that seems to be the only viable solution at
my eyes)
Thanks for your patience

P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From etourigny.dev at gmail.com  Fri Feb 10 08:00:18 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Feb 10 08:01:09 2012
Subject: [gdal-dev] is there a way to concatenate the band in raster file
	name
In-Reply-To: <CAHXrU-JrJZAm9Bxwigc42ZB3tUkXJFTz2CRz5_-V5E8Z7jaQig@mail.gmail.com>
References: <CAHXrU-JrJZAm9Bxwigc42ZB3tUkXJFTz2CRz5_-V5E8Z7jaQig@mail.gmail.com>
Message-ID: <CA+TxYvOW077_enA2b7wZxLb1KScBrC8v+D_qcH0NWwcxThhDPQ@mail.gmail.com>

Paolo,

This feature would have to be driver-specific, so adding it to netcdf
would not benefit other drivers (in fact not all of them support
this).

Some time ago there was a discussion about standardizing the
driver:filename syntax , it seems to have stalled. It could be a nice
addition to have the option band=<band_no> in there.

http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030305.html
http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername

Would it be worth it allowing to select multiple bands (by range or
list) such as NETCDF:file.nc:var:1-2,4
There is a similar request already for selecting multiple bands:
http://trac.osgeo.org/gdal/ticket/2540

Etienne

On Fri, Feb 10, 2012 at 9:04 AM, Paolo Corti <pcorti@gmail.com> wrote:
> Hi all
>
> Using the netCDF driver, I have noticed that there is a nice syntax
> for getting the dataset and the single raster in the dataset.
>
> For example, in my case, for accessing the dataset:
>
> ? $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc
>
> and for accessing the single raster:
>
> ? $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc:myraster
>
> I was wondering if there is a way (that could be very useful also for
> other raster formats) to concatenate also the band, something like
> this:
>
> ? $ gdalinfo NETCDF:/my/path/data/mynetcdf_dataset.nc:myraster:myband
>
> I would need this for using it in MapServer, without the need to
> create virtual rasters (that seems to be the only viable solution at
> my eyes)
> Thanks for your patience
>
> P
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From alex.speder at gmail.com  Fri Feb 10 09:16:35 2012
From: alex.speder at gmail.com (Alex Speder)
Date: Fri Feb 10 09:17:18 2012
Subject: [gdal-dev] Possible statistics computation issue
Message-ID: <CAFWy9isFyZY3kz9vC-je1PZ0n=DOWrz5EjV_DhkKxXxcL2sjvw@mail.gmail.com>

Greetings all,

I recently attempted to update a Java project from GDAL 1.8.1 to GDAL
1.9.? However, I noticed the statistics being computed on my output
rasters were off.? After doing some digging, it seems that something
changed in the HFA driver's handling of minimum and maximum values.
IN GDAL 1.8.1 I could set a Float32 raster's NoData value to
Float.NEGATIVE_INFINITY and it would work as expected, i.e. pixels
with NoData values were ignored.? This no longer appears to be the
case in GDAL 1.9.? I have only seen this behavior with
Float.NEGATIVE_INFINITY or Float.POSITIVE_INFINITY as the NoData
(although with positive infinity the problem is reversed).? Is this
the intended behavior?

I've tested this on both Windows XP (32 bit) and Linux (both 32 and 64
bit) with the same results.? Of possible note, the GTiff driver in
GDAL 1.8.1 seems to exhibit this behavior as well, which makes me
think the HFA change might be intended.

Please note that the sample GDAL output's test raster is different
from, but exhibits the same problem as, rasters created with the
sample code.   Sorry in advance for the wall of text.

Java code to generate such rasters
----------------------------------
public static void main(String[] args) {
? gdal.AllRegister();
? Dataset writeDs =
gdal.GetDriverByName("HFA").Create("path//to//file.img", 100, 100, 1,
gdalconst.GDT_Float32);
? Band writeBand = writeDs.GetRasterBand(1);
? writeBand.SetNoDataValue(Float.NEGATIVE_INFINITY);
? double[] data = new double[10000];
? final Random gen = new Random();
? for(int i = 0; i < data.length; i++) {
??? int val = gen.nextInt(3);
??? data[i] = val == 2 ? Float.NEGATIVE_INFINITY : val;
? }
? writeBand.WriteRaster(0, 0, 100, 100, data);
? writeBand.delete();
? writeDs.delete();
}

GDAL 1.8.1 output
-----------------
[ywil@eli bin]$ ./gdalinfo test.img -stats -hist
Driver: HFA/Erdas Imagine Images (.img)
Files: test.img
Size is 177, 207
[...snip...]
Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
?Description = Layer_1
?Minimum=-0.000, Maximum=1.000, Mean=0.015, StdDev=0.113
0...10...20...30...40...50...60...70...80...90...100 - done.
?256 buckets from -0.00195313 to 1.00195:
?34184 1775 0 0 424 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 18 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 33
0 0 0 0 0 0 0 0 0 0 0 0 0 0 26 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 39
17 0 0 0 77 0 0 0 0 0 0 0 0 0 0 0 46
?NoData Value=-inf
?Metadata:
??? LAYER_TYPE=athematic
??? STATISTICS_MINIMUM=-1.8190514199101e-12
??? STATISTICS_MAXIMUM=1
??? STATISTICS_MEAN=0.015357797876846
??? STATISTICS_STDDEV=0.11342873850486

GDAL 1.9 output
---------------
[ywil@eli ~]$ gdalinfo test.img -stats -hist
Driver: HFA/Erdas Imagine Images (.img)
Files: test.img
Size is 177, 207
[...snip...]
Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
?Description = Layer_1
?Minimum=-inf, Maximum=1.000, Mean=-inf, StdDev=-nan
0...10...20...30...40...50...60...70...80...90...100 - done.
?256 buckets from -inf to inf:
?36639 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0
?NoData Value=-inf
?Metadata:
??? LAYER_TYPE=athematic
??? STATISTICS_MAXIMUM=1
??? STATISTICS_MEAN=-inf
??? STATISTICS_MINIMUM=-inf
??? STATISTICS_STDDEV=-nan

--
Alex Speder
alex.speder@gmail.com
From even.rouault at mines-paris.org  Fri Feb 10 10:37:46 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 10 10:38:02 2012
Subject: [gdal-dev] Possible statistics computation issue
In-Reply-To: <CAFWy9isFyZY3kz9vC-je1PZ0n=DOWrz5EjV_DhkKxXxcL2sjvw@mail.gmail.com>
References: <CAFWy9isFyZY3kz9vC-je1PZ0n=DOWrz5EjV_DhkKxXxcL2sjvw@mail.gmail.com>
Message-ID: <1328888266.4f3539caed25e@webmail.free.fr>

Selon Alex Speder <alex.speder@gmail.com>:

> Greetings all,
>
> I recently attempted to update a Java project from GDAL 1.8.1 to GDAL
> 1.9.? However, I noticed the statistics being computed on my output
> rasters were off.? After doing some digging, it seems that something
> changed in the HFA driver's handling of minimum and maximum values.
> IN GDAL 1.8.1 I could set a Float32 raster's NoData value to
> Float.NEGATIVE_INFINITY and it would work as expected, i.e. pixels
> with NoData values were ignored.? This no longer appears to be the
> case in GDAL 1.9.? I have only seen this behavior with
> Float.NEGATIVE_INFINITY or Float.POSITIVE_INFINITY as the NoData
> (although with positive infinity the problem is reversed).? Is this
> the intended behavior?

No, this is a regression. I've created ticket
http://trac.osgeo.org/gdal/ticket/4506 and pushed a fix (as well a new
regression test for that use case). Thanks for your report.
From nhatzop at gmail.com  Fri Feb 10 12:20:03 2012
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Feb 10 12:20:51 2012
Subject: [gdal-dev] gdalenhance -config file how you do linear
	interpolation of the colors?
In-Reply-To: <CAMKgpOagkSdMERamo5BdQTZJ+Vwjb2=SQgdapEeELjPgGpcMmg@mail.gmail.com>
References: <CALDJGKBCk2m9=Yr1VKP2H8GO7LJjx=2JurMGjzkW6kKbtAm=og@mail.gmail.com>
	<CAMKgpOagkSdMERamo5BdQTZJ+Vwjb2=SQgdapEeELjPgGpcMmg@mail.gmail.com>
Message-ID: <CALDJGKDY+a_0DfQgqNF+rLy0Tth8vd2rYFX9T3KZAGmgxuaXCw@mail.gmail.com>

How you define the min max from this documentation:
http://www.gdal.org/gdal_vrttut.html

--Nikos

On Thu, Feb 9, 2012 at 10:59 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Nikolaos,
>
> The gdalenhance utility is not really recommended. I don't know the config
> file format.
>
> GDAL's VRT driver[1] supports a look-up-table that works with linear
> interpolation. In it, you specify pairs of corresponding values in source
> and destination rasters. The intermediate source values are interpolated
> linearly.
>
> [1]: http://www.gdal.org/gdal_vrttut.html
>
> On Fri, Feb 10, 2012 at 6:31 AM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:
>
>> so I have created a config file for gdalenhance
>>
>> color.config:
>>
>> 1:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>> 120:0.429:190 190:0.231:255
>> 2:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>> 120:0.429:190 190:0.231:255
>> 3:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>> 120:0.429:190 190:0.231:255
>>
>> is it valid..? is it going to make a linear interpolation of the colors???
>>
>>
>>
>> --Nikos
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120210/1f59e800/attachment.html
From even.rouault at mines-paris.org  Fri Feb 10 12:24:28 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 10 12:24:41 2012
Subject: [gdal-dev] spatial filter problem
In-Reply-To: <CANNqv9efbqmn2_XZc7ww+E85sBrokzPwF-8vVnRP-psHmmae4g@mail.gmail.com>
References: <CANNqv9efbqmn2_XZc7ww+E85sBrokzPwF-8vVnRP-psHmmae4g@mail.gmail.com>
Message-ID: <1328894668.4f3552cc8c311@webmail.free.fr>

Selon Mohammed Rashad <mohammedrashadkm@gmail.com>:

>   OGRLinearRing oSpatialFilter;
>
>   oSpatialFilter.setNumPoints(5);
>   oSpatialFilter.setPoint(0, rect.minx, rect.miny);
>   oSpatialFilter.setPoint(1, rect.maxx, rect.miny);
>   oSpatialFilter.setPoint(2, rect.maxx, rect.maxy);
>   oSpatialFilter.setPoint(3, rect.minx, rect.maxy);
>   oSpatialFilter.setPoint(4, rect.minx, rect.miny);
>
>  poLayer->SetSpatialFilter( &oSpatialFilter );
>   poLayer->ResetReading();
>
>
> poFeature = poLayer->GetNextFeature() gives me null poFeature
>
> does spatialFilter requires gdal build with geos?
>
> with 1.8.0 ubuntu version I am able to use spatialFilter but not with trunk

Hum, I'm skeptical that directly feeding a OGRLinearRing has ever worked. You
should try instead to add it to a OGRPolygon, and then pass the polygon as the
spatial filter.

GEOS isn't strictly required for spatial filter to work. If it is available,
genuine interesection tests will be made when necessary. If not available, only
tests based on bounding box comparison will be made.

>
> --
> Regards,
>    Rashad
>


From chapmanm at pixia.com  Fri Feb 10 18:25:59 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Fri Feb 10 18:26:46 2012
Subject: [gdal-dev] PostGIS SRID conundrum
Message-ID: <5dd8056d.00001264.00000019@CHAPMANM7S>

I know this question isn't exactly related to GDAL but I thought someone
on the list might be able to answer this question.

 

So, I have a shape file that has the following spatial reference:

 

PROJCS["Orthographic",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["W
GS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017
453292519943295]],PROJECTION["Orthographic"],PARAMETER["Latitude_Of_Center
",40],PARAMETER["Longitude_Of_Center",-75],PARAMETER["false_easting",0],PA
RAMETER["false_northing",0],UNIT["User Defined",1]]

 

It was generated using OGR.  I want to insert it into postgres / postgis
but there is no direct match for the wkt or proj4 definition in the
spatial_ref_sys table.  So, I go to insert it into the table but the
question arises, what SRID do I use?  Do I just fudge a random one with a
high enough value that I hope it won't conflict with some other SRID in
the future, or do I create a table based off of the heterogeneous list of
SRIDs at spatialreference.org and insert from that?  I would like to do
the later but that will be a pain unless someone has a put together a
batch insert sql file for all the projections on spatialreference.org.
Still, there is always the possibility that I may run into one that isn't
defined and I will have to fudge my own number anyway.

 

Question:  What is the best way to handle this?  I wish the
spatial_ref_sys table came with all the ESRI and other SRID definitions. 

 

Suggestions are much appreciated!

 

Best regards,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120210/9e84a503/attachment.html
From pcreso at pcreso.com  Sat Feb 11 00:33:19 2012
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Sat Feb 11 00:35:53 2012
Subject: [gdal-dev] PostGIS SRID conundrum
In-Reply-To: <5dd8056d.00001264.00000019@CHAPMANM7S>
Message-ID: <1328938399.79370.YahooMailClassic@web160703.mail.bf1.yahoo.com>

ESRI does not use a SRID, it uses a text string that needs complex parsing to work. If ESRI supported EPSG codes it would be easier...

The spatial_ref_sys table contains entries for all EPSG recognised projections. If you have a reasonable case to have a projection inluded by EPSG, submit a request to EPSG & it will finish up in the Postgis spatial_reference table.

In the short term, add a proj4txt record for your projection with an arbitrary new srid in the spatial_ref_sys table & it will work fine in Postgis. If you want it to work with GDAL/OGR then you;ll need to add it to the proj4 list of projection parameters. Where this is depends on your OS & implementation.

See this spec:

http://remotesensing.org/geotiff/proj_list/orthographic.html

The proj4 parameter list for your case may need to specify WGS84 as your ellipsoid & datum.

HTH,

? Brent Wood

--- On Sat, 2/11/12, Martin Chapman <chapmanm@pixia.com> wrote:

From: Martin Chapman <chapmanm@pixia.com>
Subject: [gdal-dev] PostGIS SRID conundrum
To: gdal-dev@lists.osgeo.org
Date: Saturday, February 11, 2012, 12:25 PM

I know this question isn?t exactly related to GDAL but I thought someone on the list might be able to answer this question. ?So, I have a shape file that has the following spatial reference: ?PROJCS["Orthographic",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Orthographic"],PARAMETER["Latitude_Of_Center",40],PARAMETER["Longitude_Of_Center",-75],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["User Defined",1]] ?It was generated using OGR.? I want to insert it into postgres / postgis but there is no direct match for the wkt or proj4 definition in the spatial_ref_sys table.? So, I go to insert it into the table but the question arises, what SRID do I use?? Do I just fudge a random one with a high enough value that I hope it won?t conflict with some other SRID in the future, or do I create a table based off of the
 heterogeneous list of SRIDs at spatialreference.org and insert from that?? I would like to do the later but that will be a pain unless someone has a put together a batch insert sql file for all the projections on spatialreference.org.? Still, there is always the possibility that I may run into one that isn?t defined and I will have to fudge my own number anyway. ?Question:? What is the best way to handle this?? I wish the spatial_ref_sys table came with all the ESRI and other SRID definitions.  ?Suggestions are much appreciated! ?Best regards,Martin ? ?
-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120210/3e1c4145/attachment.html
From chapmanm at pixia.com  Sat Feb 11 00:48:55 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Sat Feb 11 00:49:03 2012
Subject: [gdal-dev] PostGIS SRID conundrum
In-Reply-To: <1328938399.79370.YahooMailClassic@web160703.mail.bf1.yahoo.com>
References: <5dd8056d.00001264.00000019@CHAPMANM7S>
	<1328938399.79370.YahooMailClassic@web160703.mail.bf1.yahoo.com>
Message-ID: <e859362d.00001994.00000002@CHAPMANM7S>

Brent,



Thank you very much for the advice.  What I resorted to (at least for the 
present) is:



1.        I try to get the geogcs or projcs (if projected) authority code 
from OGR.  If successful, I try to find a match in the spatial_ref_sys 
table.  If I find a match then I compare the wkt, if it?s exactly the same I 
use it.  If not I go to number 2.

2.       I export the proj4 text from OGR and do a select on the 
spatial_ref_sys table for an exact match.  If found I use that srid.  If not 
I go to number 3.

3.       I export the wkt text from OGR and do a select on the 
spatial_ref_sys table for an exact match.  If found I use that srid.  If not 
I go to number 4.

4.       I select the max(srid) where srid > 10000000.  If zero is returned 
then I  use that base number (10000000) and add a new entry to the 
spatial_ref_sys table using the proj4 text and wkt so all fields have a 
value?and my app name as the authority (makes me feel important J).  If a 
max above 10000000 is found then I take the max and add one and then add the 
new entry.



If you or anyone else can see any flaws in that logic I would appreciate 
some criticism.



Thanks again for your feedback!



Best regards,

Martin



From: pcreso@pcreso.com [mailto:pcreso@pcreso.com]
Sent: Friday, February 10, 2012 10:33 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] PostGIS SRID conundrum




ESRI does not use a SRID, it uses a text string that needs complex parsing 
to work. If ESRI supported EPSG codes it would be easier...

The spatial_ref_sys table contains entries for all EPSG recognised 
projections. If you have a reasonable case to have a projection inluded by 
EPSG, submit a request to EPSG & it will finish up in the Postgis 
spatial_reference table.

In the short term, add a proj4txt record for your projection with an 
arbitrary new srid in the spatial_ref_sys table & it will work fine in 
Postgis. If you want it to work with GDAL/OGR then you;ll need to add it to 
the proj4 list of projection parameters. Where this is depends on your OS & 
implementation.

See this spec:

http://remotesensing.org/geotiff/proj_list/orthographic.html

The proj4 parameter list for your case may need to specify WGS84 as your 
ellipsoid & datum.

HTH,

  Brent Wood

--- On Sat, 2/11/12, Martin Chapman <chapmanm@pixia.com> wrote:


From: Martin Chapman <chapmanm@pixia.com>
Subject: [gdal-dev] PostGIS SRID conundrum
To: gdal-dev@lists.osgeo.org
Date: Saturday, February 11, 2012, 12:25 PM

I know this question isn?t exactly related to GDAL but I thought someone on 
the list might be able to answer this question.



So, I have a shape file that has the following spatial reference:



PROJCS["Orthographic",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Orthographic"],PARAMETER["Latitude_Of_Center",40],PARAMETER["Longitude_Of_Center",-75],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["User 
Defined",1]]



It was generated using OGR.  I want to insert it into postgres / postgis but 
there is no direct match for the wkt or proj4 definition in the 
spatial_ref_sys table.  So, I go to insert it into the table but the 
question arises, what SRID do I use?  Do I just fudge a random one with a 
high enough value that I hope it won?t conflict with some other SRID in the 
future, or do I create a table based off of the heterogeneous list of SRIDs 
at spatialreference.org and insert from that?  I would like to do the later 
but that will be a pain unless someone has a put together a batch insert sql 
file for all the projections on spatialreference.org.  Still, there is 
always the possibility that I may run into one that isn?t defined and I will 
have to fudge my own number anyway.



Question:  What is the best way to handle this?  I wish the spatial_ref_sys 
table came with all the ESRI and other SRID definitions.



Suggestions are much appreciated!



Best regards,

Martin






-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120211/e2e040f6/attachment-0001.html
From chaitanya.ch at gmail.com  Sat Feb 11 04:57:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Feb 11 04:57:29 2012
Subject: [gdal-dev] gdalenhance -config file how you do linear
	interpolation of the colors?
In-Reply-To: <CALDJGKDY+a_0DfQgqNF+rLy0Tth8vd2rYFX9T3KZAGmgxuaXCw@mail.gmail.com>
References: <CALDJGKBCk2m9=Yr1VKP2H8GO7LJjx=2JurMGjzkW6kKbtAm=og@mail.gmail.com>
	<CAMKgpOagkSdMERamo5BdQTZJ+Vwjb2=SQgdapEeELjPgGpcMmg@mail.gmail.com>
	<CALDJGKDY+a_0DfQgqNF+rLy0Tth8vd2rYFX9T3KZAGmgxuaXCw@mail.gmail.com>
Message-ID: <CAMKgpOacivp0Nx-ooPob_jLRbejqPAwHdEPS+8B+Vmz0CQgV+Q@mail.gmail.com>

Just pair the min and max values of the source raster to the min and max of
the target raster.

On Fri, Feb 10, 2012 at 10:50 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> How you define the min max from this documentation:
> http://www.gdal.org/gdal_vrttut.html
>
> --Nikos
>
>
> On Thu, Feb 9, 2012 at 10:59 PM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Nikolaos,
>>
>> The gdalenhance utility is not really recommended. I don't know the
>> config file format.
>>
>> GDAL's VRT driver[1] supports a look-up-table that works with linear
>> interpolation. In it, you specify pairs of corresponding values in source
>> and destination rasters. The intermediate source values are interpolated
>> linearly.
>>
>> [1]: http://www.gdal.org/gdal_vrttut.html
>>
>> On Fri, Feb 10, 2012 at 6:31 AM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:
>>
>>> so I have created a config file for gdalenhance
>>>
>>> color.config:
>>>
>>> 1:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>>> 120:0.429:190 190:0.231:255
>>> 2:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>>> 120:0.429:190 190:0.231:255
>>> 3:Band -100:ScaleMin 11000:ScaleMax 0:3.667:30 30:1.667:60 60:0.833:120
>>> 120:0.429:190 190:0.231:255
>>>
>>> is it valid..? is it going to make a linear interpolation of the
>>> colors???
>>>
>>>
>>>
>>> --Nikos
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120211/c4204803/attachment.html
From rush at winkey.org  Tue Feb  7 17:46:10 2012
From: rush at winkey.org (Brian Case)
Date: Sat Feb 11 15:39:35 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
Message-ID: <1328654770.8877.1.camel@localhost>

Etienne
with the transformer the way it sits now, in most cases you will need to
specify -te xmin ymin xmax ymax with gdalwarp to avoid that error

Brian


On Tue, 2012-02-07 at 19:22 -0200, Etienne Tourigny wrote:
> Even, Frank,
> 
> thanks for your answers.  I have run into a problem with using
> gdalwarp with geoloc transform.
> 
> In ticket #1895 there is an hdf file for which the HDF4 driver creates
> GEOLOCATION metadata.
> 
> Trying gdalwarp on it gives an error, and the result transform is
> incorrect.  Am I doing something wrong, or is this a bug?
> 
> command is : gdalwarp -geoloc -t_srs EPSG:4326
> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> more info below:
> 
> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
> Driver: HDF4Image/HDF4 Dataset
> Files: A2006005182000.L2_LAC_SST.x.hdf
> Size is 389, 602
> Coordinate System is `'
> Metadata:
> [...]
> Geolocation:
>   LINE_OFFSET=0
>   LINE_STEP=1
>   PIXEL_OFFSET=0
>   PIXEL_STEP=1
>   SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>   X_BAND=1
>   X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>   Y_BAND=1
>   Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
> Corner Coordinates:
> [...]
> 
> $ gdalwarp -geoloc -t_srs EPSG:4326
> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> Creating output file that is 31119P x 5864L.
> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
> ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> $ gdalinfo tmp1.tif
> Driver: GTiff/GeoTIFF
> Files: tmp1.tif
> Size is 31119, 5864
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-90.198287963867188,90.300000000000011)
> Pixel Size = (0.015398926739995,-0.015398926739995)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
> Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
> Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
> Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
> Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
> 
> 
> Regards,
> Etienne
> 
> 
> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
> > <etourigny.dev@gmail.com> wrote:
> >> Hi all,
> >>
> >> I would like to have information on the status of geolocation array
> >> support in GDAL.
> >>
> >> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
> >> still "under development", and the information there is that
> >> GDALCreateGeoLocTransformer "is currently partially implemented".
> >
> > Etienne,
> >
> > I think the geoloc transformer received some fixes from someone
> > other than myself and now is working reasonable well.  It would
> > be desirable to freshen up the RFC and get it passed but it isn't
> > particularly a priority of mine so I'm not likely to drive it in the
> > very near future.
> >
> > Best regards,
> >
> > --
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pcreso at pcreso.com  Sun Feb 12 01:28:33 2012
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Sun Feb 12 01:29:03 2012
Subject: [gdal-dev] PostGIS SRID conundrum
In-Reply-To: <e859362d.00001994.00000002@CHAPMANM7S>
Message-ID: <1329028113.1292.YahooMailClassic@web160705.mail.bf1.yahoo.com>


Hi Martin,

I can't see why that won't work, but it does have one issue, and that is that if there is already a match, but the parameters are in a different order, you won't find it, &? then you are effectively creating a nonstandard SRID which duplicates a standard & supported projection. 

Which doesn't stop it working for your case.

And I don't believe there are any orthographic projecttions in Postgis at present, so it is a potential problem only for now.

Cheers,

? Brent

--- On Sat, 2/11/12, Martin Chapman <chapmanm@pixia.com> wrote:

From: Martin Chapman <chapmanm@pixia.com>
Subject: RE: [gdal-dev] PostGIS SRID conundrum
To: pcreso@pcreso.com
Cc: gdal-dev@lists.osgeo.org
Date: Saturday, February 11, 2012, 6:48 PM

Brent, ?Thank you very much for the advice.? What I resorted to (at least for the present) is: ?1.?????? ?I try to get the geogcs or projcs (if projected) authority code from OGR.? If successful, I try to find a match in the spatial_ref_sys table.? If I find a match then I compare the wkt, if it?s exactly the same I use it.? If not I go to number 2.2.?????? I export the proj4 text from OGR and do a select on the spatial_ref_sys table for an exact match.? If found I use that srid.? If not I go to number 3.3.?????? I export the wkt text from OGR and do a select on the spatial_ref_sys table for an exact match.? If found I use that srid.? If not I go to number 4.4.?????? I select the max(srid) where srid > 10000000.? If zero is returned then I ?use that base number (10000000) and add a new entry to the spatial_ref_sys table using the proj4 text and wkt so all fields have a value?and my app name as the authority (makes
 me feel important J).? If a max above 10000000 is found then I take the max and add one and then add the new entry. ?If you or anyone else can see any flaws in that logic I would appreciate some criticism. ?Thanks again for your feedback! ?Best regards,Martin ?From: pcreso@pcreso.com [mailto:pcreso@pcreso.com] 
Sent: Friday, February 10, 2012 10:33 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] PostGIS SRID conundrum ?ESRI does not use a SRID, it uses a text string that needs complex parsing to work. If ESRI supported EPSG codes it would be easier...

The spatial_ref_sys table contains entries for all EPSG recognised projections. If you have a reasonable case to have a projection inluded by EPSG, submit a request to EPSG & it will finish up in the Postgis spatial_reference table.

In the short term, add a proj4txt record for your projection with an arbitrary new srid in the spatial_ref_sys table & it will work fine in Postgis. If you want it to work with GDAL/OGR then you;ll need to add it to the proj4 list of projection parameters. Where this is depends on your OS & implementation.

See this spec:

http://remotesensing.org/geotiff/proj_list/orthographic.html

The proj4 parameter list for your case may need to specify WGS84 as your ellipsoid & datum.

HTH,

? Brent Wood

--- On Sat, 2/11/12, Martin Chapman <chapmanm@pixia.com> wrote:
From: Martin Chapman <chapmanm@pixia.com>
Subject: [gdal-dev] PostGIS SRID conundrum
To: gdal-dev@lists.osgeo.org
Date: Saturday, February 11, 2012, 12:25 PMI know this question isn?t exactly related to GDAL but I thought someone on the list might be able to answer this question.?So, I have a shape file that has the following spatial reference:?PROJCS["Orthographic",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Orthographic"],PARAMETER["Latitude_Of_Center",40],PARAMETER["Longitude_Of_Center",-75],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["User Defined",1]]?It was generated using OGR.? I want to insert it into postgres / postgis but there is no direct match for the wkt or proj4 definition in the spatial_ref_sys table.? So, I go to insert it into the table but the question arises, what SRID do I use?? Do I just fudge a random one with a high enough value that I hope it won?t conflict with some other SRID in the future, or do I
 create a table based off of the heterogeneous list of SRIDs at spatialreference.org and insert from that?? I would like to do the later but that will be a pain unless someone has a put together a batch insert sql file for all the projections on spatialreference.org.? Still, there is always the possibility that I may run into one that isn?t defined and I will have to fudge my own number anyway.?Question:? What is the best way to handle this?? I wish the spatial_ref_sys table came with all the ESRI and other SRID definitions. ?Suggestions are much appreciated!?Best regards,Martin??
-----Inline Attachment Follows-----_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120211/5ed7f726/attachment.html
From nezmar at tutok.sk  Sun Feb 12 04:11:23 2012
From: nezmar at tutok.sk (Marian Krivos)
Date: Sun Feb 12 04:11:40 2012
Subject: [gdal-dev] CMake port state
Message-ID: <4F37823B.20300@tutok.sk>

Hello,

what is the current state of porting gdal to cmake?

Best Regards,
Marian K.
From nezmar at tutok.sk  Sun Feb 12 04:05:21 2012
From: nezmar at tutok.sk (Marian Krivos)
Date: Sun Feb 12 04:14:32 2012
Subject: [gdal-dev] Problem with GDAL/WMS -> GeoServer/WMS
Message-ID: <4F3780D1.7020502@tutok.sk>

Hello,

I'm trying connect to my fresh installed geoserver with this result:

$ gdalinfo http://188.123.97.20:6543/geoserver/sf/wms
ERROR 4: `/vsimem/http_1/wms' not recognised as a supported file format.
ERROR 4: `/tmp/wms' not recognised as a supported file format.
gdalinfo failed - unable to open
'http://188.123.97.20:6543/geoserver/sf/wms'.


TCP conversation is:

GET /geoserver/sf/wms HTTP/1.1
Host: 188.123.97.20:6543
Accept: */*
Accept-Encoding: gzip
 
HTTP/1.1 200 OK
Content-Type: application/xml
Content-Length: 274
Content-Encoding: gzip
Server: Jetty(6.1.8)

<?xml version="1.0" encoding="UTF-8"?>
<ows:ExceptionReport version="1.0.0"
  xsi:schemaLocation="http://www.opengis.net/ows
http://188.123.97.20:6543/geoserver/schemas/ows/1.0.0/owsExceptionReport.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:ows="http://www.opengis.net/ows">
  <ows:Exception exceptionCode="NoApplicableCode">
    <ows:ExceptionText>java.lang.NullPointerException
null</ows:ExceptionText>
  </ows:Exception>
</ows:ExceptionReport>


Any ideas?

Best Regards

Marian K.
From even.rouault at mines-paris.org  Sun Feb 12 04:22:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 12 04:23:03 2012
Subject: [gdal-dev] Problem with GDAL/WMS -> GeoServer/WMS
In-Reply-To: <4F3780D1.7020502@tutok.sk>
References: <4F3780D1.7020502@tutok.sk>
Message-ID: <201202121022.51209.even.rouault@mines-paris.org>

Le dimanche 12 f?vrier 2012 10:05:21, Marian Krivos a ?crit :
> Hello,
> 
> I'm trying connect to my fresh installed geoserver with this result:
> 
> $ gdalinfo http://188.123.97.20:6543/geoserver/sf/wms

Try the following (if GDAL >= 1.9.0) :

 $ gdalinfo WMS:http://188.123.97.20:6543/geoserver/sf/wms

> ERROR 4: `/vsimem/http_1/wms' not recognised as a supported file format.
> ERROR 4: `/tmp/wms' not recognised as a supported file format.
> gdalinfo failed - unable to open
> 'http://188.123.97.20:6543/geoserver/sf/wms'.
> 
> 
> TCP conversation is:
> 
> GET /geoserver/sf/wms HTTP/1.1
> Host: 188.123.97.20:6543
> Accept: */*
> Accept-Encoding: gzip
> 
> HTTP/1.1 200 OK
> Content-Type: application/xml
> Content-Length: 274
> Content-Encoding: gzip
> Server: Jetty(6.1.8)
> 
> <?xml version="1.0" encoding="UTF-8"?>
> <ows:ExceptionReport version="1.0.0"
>   xsi:schemaLocation="http://www.opengis.net/ows
> http://188.123.97.20:6543/geoserver/schemas/ows/1.0.0/owsExceptionReport.xs
> d" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xmlns:ows="http://www.opengis.net/ows">
>   <ows:Exception exceptionCode="NoApplicableCode">
>     <ows:ExceptionText>java.lang.NullPointerException
> null</ows:ExceptionText>
>   </ows:Exception>
> </ows:ExceptionReport>
> 
> 
> Any ideas?
> 
> Best Regards
> 
> Marian K.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From bertelli at charta.acme.com  Sun Feb 12 05:45:45 2012
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Sun Feb 12 05:46:30 2012
Subject: [gdal-dev] Erosive pyramids again
Message-ID: <CALc8-VJ0FbeK3m8o+NU88WSsZ=fyk6K72T48cKRsQ1t_EiwahA@mail.gmail.com>

Hello, some time ago I complained with this list, asking for a better
algorithm for black and white and paletted raster maps.
While you scale the image, smaller black lines become thinner and
thinner, scaling to half size usually works without data loss but
further size reductions result into severe data loss.
I suggested introducting an "erose" option as to make thin lines
become fatter while reducing size.

Evaluating the consequences of the proposal, Even Rouault suggested
this was not a task for GDAL, but a user level choice to be provided
by QGis or other programs.
This is true, well known and expensive proprietary map-something show
antialised raster layers without any special effort, but at the
expense of huge computational requests.
Now, making pyramids should substantially reduce this burden, but
without severe data loss.

Obviously, Even is right, client programs should design a better
strategy to deal with line art and paletted maps, they could take into
account a near scale pyramid and an higher resolution one to draw
antialised layers in a slower rendition (this approach could be user
selectable or automatical, based on raster type), but it's still true
that GDAL should do its part not to lose data. And that happens
without any choice by the user than to avoid pyramids. Could we do
something better?
From polimax at mail.ru  Sun Feb 12 07:13:41 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sun Feb 12 07:13:57 2012
Subject: [gdal-dev] CMake port state
In-Reply-To: <4F37823B.20300@tutok.sk>
References: <4F37823B.20300@tutok.sk>
Message-ID: <4F37ACF5.20900@mail.ru>

12.02.2012 13:11, Marian Krivos ?????:
> Hello,
>
> what is the current state of porting gdal to cmake?
>
> Best Regards,
> Marian K.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi,

I wrote to Howard Butler and he answered that Jayesh has been leading 
this effort. But Jayesh Chaudhary don't answered me yet. I have my own 
simple CMake script, but it supports only few drivers and I'm waiting 
the details of CMake porting to prevent the doubling of this work.

Best regards,
Dmitry
From jukka.rahkonen at mmmtike.fi  Sun Feb 12 08:25:07 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Feb 12 08:26:09 2012
Subject: [gdal-dev] Unreliable names for temporary files
Message-ID: <loom.20120212T142023-601@post.gmane.org>

Hi,

I noticed a ticket http://trac.osgeo.org/gdal/ticket/4510 and started to wonder
if something similar can happen also elsewhere. I have had troubles with
Mapserver OGR output and they are somehow related to temporary files (both
physisical and vsimem files). See
http://lists.maptools.org/pipermail/ms4w-users/2012-February/001948.html for
some details.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Sun Feb 12 08:58:19 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Feb 12 08:58:35 2012
Subject: [gdal-dev] Re: Erosive pyramids again
References: <CALc8-VJ0FbeK3m8o+NU88WSsZ=fyk6K72T48cKRsQ1t_EiwahA@mail.gmail.com>
Message-ID: <loom.20120212T145649-493@post.gmane.org>

Carlo A. Bertelli (Charta s.r.l. <bertelli <at> charta.acme.com> writes:

> 
> Hello, some time ago I complained with this list, asking for a better
> algorithm for black and white and paletted raster maps.
> While you scale the image, smaller black lines become thinner and
> thinner, scaling to half size usually works without data loss but
> further size reductions result into severe data loss.
> I suggested introducting an "erose" option as to make thin lines
> become fatter while reducing size.

Hi,

I would make a little study about JPEG2000 format. Wavelett compression could
well suit your use case because redused resolutions are built in a different
way. This page seems to have lots of sample images
http://preserve.harvard.edu/massdig/hul_study/ 

-Jukka Rahkonen-



From etourigny.dev at gmail.com  Sun Feb 12 09:25:50 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Feb 12 09:26:43 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <1328654770.8877.1.camel@localhost>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
	<1328654770.8877.1.camel@localhost>
Message-ID: <CA+TxYvN_d5QUc+9XF1dMdh5wjaufuXWWJK+ZF_nMNFwqVZuGoA@mail.gmail.com>

Brian, thanks fot the info.

I have seen that on all tests I made (without -te option).  Sometimes
it fails completely, and sometimes it creates an extent that is too
large.

Would it make sense, if the geolocation SRS and target are SRS are the
same (e.g. WGS84), to calculate the target extents from the min/max of
the geolocation arrays?
Current extent detection code seems to try many transformations with
proj4, and either fails or creates an extent that is too large.

regards,
Etienne


On Tue, Feb 7, 2012 at 8:46 PM, Brian Case <rush@winkey.org> wrote:
> Etienne
> with the transformer the way it sits now, in most cases you will need to
> specify -te xmin ymin xmax ymax with gdalwarp to avoid that error
>
> Brian
>
>
> On Tue, 2012-02-07 at 19:22 -0200, Etienne Tourigny wrote:
>> Even, Frank,
>>
>> thanks for your answers. ?I have run into a problem with using
>> gdalwarp with geoloc transform.
>>
>> In ticket #1895 there is an hdf file for which the HDF4 driver creates
>> GEOLOCATION metadata.
>>
>> Trying gdalwarp on it gives an error, and the result transform is
>> incorrect. ?Am I doing something wrong, or is this a bug?
>>
>> command is : gdalwarp -geoloc -t_srs EPSG:4326
>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> more info below:
>>
>> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
>> Driver: HDF4Image/HDF4 Dataset
>> Files: A2006005182000.L2_LAC_SST.x.hdf
>> Size is 389, 602
>> Coordinate System is `'
>> Metadata:
>> [...]
>> Geolocation:
>> ? LINE_OFFSET=0
>> ? LINE_STEP=1
>> ? PIXEL_OFFSET=0
>> ? PIXEL_STEP=1
>> ? SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>> ? X_BAND=1
>> ? X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>> ? Y_BAND=1
>> ? Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
>> Corner Coordinates:
>> [...]
>>
>> $ gdalwarp -geoloc -t_srs EPSG:4326
>> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> Creating output file that is 31119P x 5864L.
>> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
>> ERROR 1: Too many points (441 out of 441) failed to transform,
>> unable to compute output bounds.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> $ gdalinfo tmp1.tif
>> Driver: GTiff/GeoTIFF
>> Files: tmp1.tif
>> Size is 31119, 5864
>> Coordinate System is:
>> GEOGCS["WGS 84",
>> ? ? DATUM["WGS_1984",
>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> ? ? PRIMEM["Greenwich",0],
>> ? ? UNIT["degree",0.0174532925199433],
>> ? ? AUTHORITY["EPSG","4326"]]
>> Origin = (-90.198287963867188,90.300000000000011)
>> Pixel Size = (0.015398926739995,-0.015398926739995)
>> Metadata:
>> ? AREA_OR_POINT=Area
>> Image Structure Metadata:
>> ? INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left ?( -90.1982880, ?90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
>> Lower Left ?( -90.1982880, ? 0.0006936) ( 90d11'53.84"W, ?0d 0' 2.50"N)
>> Upper Right ( ? ? 389.001, ? ? ?90.300) (Invalid angle, 90d18' 0.00"N)
>> Lower Right ( ? ? 389.001, ? ? ? 0.001) (Invalid angle, ?0d 0' 2.50"N)
>> Center ? ? ?( 149.4013126, ?45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
>>
>>
>> Regards,
>> Etienne
>>
>>
>> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> > On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
>> > <etourigny.dev@gmail.com> wrote:
>> >> Hi all,
>> >>
>> >> I would like to have information on the status of geolocation array
>> >> support in GDAL.
>> >>
>> >> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate) ?is
>> >> still "under development", and the information there is that
>> >> GDALCreateGeoLocTransformer "is currently partially implemented".
>> >
>> > Etienne,
>> >
>> > I think the geoloc transformer received some fixes from someone
>> > other than myself and now is working reasonable well. ?It would
>> > be desirable to freshen up the RFC and get it passed but it isn't
>> > particularly a priority of mine so I'm not likely to drive it in the
>> > very near future.
>> >
>> > Best regards,
>> >
>> > --
>> > ---------------------------------------+--------------------------------------
>> > I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
>> > light and sound - activate the windows | http://pobox.com/~warmerdam
>> > and watch the world go round - Rush ? ?| Geospatial Software Developer
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From rush at winkey.org  Sun Feb 12 09:38:06 2012
From: rush at winkey.org (Brian Case)
Date: Sun Feb 12 09:38:50 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvN_d5QUc+9XF1dMdh5wjaufuXWWJK+ZF_nMNFwqVZuGoA@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
	<1328654770.8877.1.camel@localhost>
	<CA+TxYvN_d5QUc+9XF1dMdh5wjaufuXWWJK+ZF_nMNFwqVZuGoA@mail.gmail.com>
Message-ID: <1329057486.30423.4.camel@localhost>

the forward transform is pretty strait forwards, however the reverse is
not, it creates back-mask (a geo-referenced image that contains the x/y locations
in the source image). the points that the warper tries to transform to
figure out the target extent are no-data in the back-mask.

Brian

On Sun, 2012-02-12 at 12:25 -0200, Etienne Tourigny wrote:
> Brian, thanks fot the info.
> 
> I have seen that on all tests I made (without -te option).  Sometimes
> it fails completely, and sometimes it creates an extent that is too
> large.
> 
> Would it make sense, if the geolocation SRS and target are SRS are the
> same (e.g. WGS84), to calculate the target extents from the min/max of
> the geolocation arrays?
> Current extent detection code seems to try many transformations with
> proj4, and either fails or creates an extent that is too large.
> 
> regards,
> Etienne
> 
> 
> On Tue, Feb 7, 2012 at 8:46 PM, Brian Case <rush@winkey.org> wrote:
> > Etienne
> > with the transformer the way it sits now, in most cases you will need to
> > specify -te xmin ymin xmax ymax with gdalwarp to avoid that error
> >
> > Brian
> >
> >
> > On Tue, 2012-02-07 at 19:22 -0200, Etienne Tourigny wrote:
> >> Even, Frank,
> >>
> >> thanks for your answers.  I have run into a problem with using
> >> gdalwarp with geoloc transform.
> >>
> >> In ticket #1895 there is an hdf file for which the HDF4 driver creates
> >> GEOLOCATION metadata.
> >>
> >> Trying gdalwarp on it gives an error, and the result transform is
> >> incorrect.  Am I doing something wrong, or is this a bug?
> >>
> >> command is : gdalwarp -geoloc -t_srs EPSG:4326
> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> >> more info below:
> >>
> >> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
> >> Driver: HDF4Image/HDF4 Dataset
> >> Files: A2006005182000.L2_LAC_SST.x.hdf
> >> Size is 389, 602
> >> Coordinate System is `'
> >> Metadata:
> >> [...]
> >> Geolocation:
> >>   LINE_OFFSET=0
> >>   LINE_STEP=1
> >>   PIXEL_OFFSET=0
> >>   PIXEL_STEP=1
> >>   SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> >> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> >>   X_BAND=1
> >>   X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
> >>   Y_BAND=1
> >>   Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
> >> Corner Coordinates:
> >> [...]
> >>
> >> $ gdalwarp -geoloc -t_srs EPSG:4326
> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> >> Creating output file that is 31119P x 5864L.
> >> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
> >> ERROR 1: Too many points (441 out of 441) failed to transform,
> >> unable to compute output bounds.
> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> >>
> >> $ gdalinfo tmp1.tif
> >> Driver: GTiff/GeoTIFF
> >> Files: tmp1.tif
> >> Size is 31119, 5864
> >> Coordinate System is:
> >> GEOGCS["WGS 84",
> >>     DATUM["WGS_1984",
> >>         SPHEROID["WGS 84",6378137,298.257223563,
> >>             AUTHORITY["EPSG","7030"]],
> >>         AUTHORITY["EPSG","6326"]],
> >>     PRIMEM["Greenwich",0],
> >>     UNIT["degree",0.0174532925199433],
> >>     AUTHORITY["EPSG","4326"]]
> >> Origin = (-90.198287963867188,90.300000000000011)
> >> Pixel Size = (0.015398926739995,-0.015398926739995)
> >> Metadata:
> >>   AREA_OR_POINT=Area
> >> Image Structure Metadata:
> >>   INTERLEAVE=BAND
> >> Corner Coordinates:
> >> Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
> >> Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
> >> Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
> >> Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
> >> Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
> >>
> >>
> >> Regards,
> >> Etienne
> >>
> >>
> >> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> >> > On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
> >> > <etourigny.dev@gmail.com> wrote:
> >> >> Hi all,
> >> >>
> >> >> I would like to have information on the status of geolocation array
> >> >> support in GDAL.
> >> >>
> >> >> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
> >> >> still "under development", and the information there is that
> >> >> GDALCreateGeoLocTransformer "is currently partially implemented".
> >> >
> >> > Etienne,
> >> >
> >> > I think the geoloc transformer received some fixes from someone
> >> > other than myself and now is working reasonable well.  It would
> >> > be desirable to freshen up the RFC and get it passed but it isn't
> >> > particularly a priority of mine so I'm not likely to drive it in the
> >> > very near future.
> >> >
> >> > Best regards,
> >> >
> >> > --
> >> > ---------------------------------------+--------------------------------------
> >> > I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> >> > light and sound - activate the windows | http://pobox.com/~warmerdam
> >> > and watch the world go round - Rush    | Geospatial Software Developer
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >


From etourigny.dev at gmail.com  Sun Feb 12 10:17:37 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Feb 12 10:17:54 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <1329057486.30423.4.camel@localhost>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
	<1328654770.8877.1.camel@localhost>
	<CA+TxYvN_d5QUc+9XF1dMdh5wjaufuXWWJK+ZF_nMNFwqVZuGoA@mail.gmail.com>
	<1329057486.30423.4.camel@localhost>
Message-ID: <CA+TxYvPEwbWaX79+trXcOyYFur_c8L4Uj71JXgwTe9fncRdDNg@mail.gmail.com>

Brian,

I'm not sure I understand your point - I probably don't understand the
algorithm enough. Are both the forward and reverse transformations
necessary in all cases?

My point is that, if (manually) adding the -te option to gdalwarp is
necessary in most cases, why not (automatically) setting the extents
from the min/max of the geolocation arrays instead of trying to
calculate them?
This could fix when the algorithm fails or generates an extent that is
too large.

Etienne

On Sun, Feb 12, 2012 at 12:38 PM, Brian Case <rush@winkey.org> wrote:
> the forward transform is pretty strait forwards, however the reverse is
> not, it creates back-mask (a geo-referenced image that contains the x/y locations
> in the source image). the points that the warper tries to transform to
> figure out the target extent are no-data in the back-mask.
>
> Brian
>
> On Sun, 2012-02-12 at 12:25 -0200, Etienne Tourigny wrote:
>> Brian, thanks fot the info.
>>
>> I have seen that on all tests I made (without -te option). ?Sometimes
>> it fails completely, and sometimes it creates an extent that is too
>> large.
>>
>> Would it make sense, if the geolocation SRS and target are SRS are the
>> same (e.g. WGS84), to calculate the target extents from the min/max of
>> the geolocation arrays?
>> Current extent detection code seems to try many transformations with
>> proj4, and either fails or creates an extent that is too large.
>>
>> regards,
>> Etienne
>>
>>
>> On Tue, Feb 7, 2012 at 8:46 PM, Brian Case <rush@winkey.org> wrote:
>> > Etienne
>> > with the transformer the way it sits now, in most cases you will need to
>> > specify -te xmin ymin xmax ymax with gdalwarp to avoid that error
>> >
>> > Brian
>> >
>> >
>> > On Tue, 2012-02-07 at 19:22 -0200, Etienne Tourigny wrote:
>> >> Even, Frank,
>> >>
>> >> thanks for your answers. ?I have run into a problem with using
>> >> gdalwarp with geoloc transform.
>> >>
>> >> In ticket #1895 there is an hdf file for which the HDF4 driver creates
>> >> GEOLOCATION metadata.
>> >>
>> >> Trying gdalwarp on it gives an error, and the result transform is
>> >> incorrect. ?Am I doing something wrong, or is this a bug?
>> >>
>> >> command is : gdalwarp -geoloc -t_srs EPSG:4326
>> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> >> more info below:
>> >>
>> >> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
>> >> Driver: HDF4Image/HDF4 Dataset
>> >> Files: A2006005182000.L2_LAC_SST.x.hdf
>> >> Size is 389, 602
>> >> Coordinate System is `'
>> >> Metadata:
>> >> [...]
>> >> Geolocation:
>> >> ? LINE_OFFSET=0
>> >> ? LINE_STEP=1
>> >> ? PIXEL_OFFSET=0
>> >> ? PIXEL_STEP=1
>> >> ? SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>> >> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>> >> ? X_BAND=1
>> >> ? X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
>> >> ? Y_BAND=1
>> >> ? Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
>> >> Corner Coordinates:
>> >> [...]
>> >>
>> >> $ gdalwarp -geoloc -t_srs EPSG:4326
>> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
>> >> Creating output file that is 31119P x 5864L.
>> >> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
>> >> ERROR 1: Too many points (441 out of 441) failed to transform,
>> >> unable to compute output bounds.
>> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> >>
>> >> $ gdalinfo tmp1.tif
>> >> Driver: GTiff/GeoTIFF
>> >> Files: tmp1.tif
>> >> Size is 31119, 5864
>> >> Coordinate System is:
>> >> GEOGCS["WGS 84",
>> >> ? ? DATUM["WGS_1984",
>> >> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> >> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> >> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> >> ? ? PRIMEM["Greenwich",0],
>> >> ? ? UNIT["degree",0.0174532925199433],
>> >> ? ? AUTHORITY["EPSG","4326"]]
>> >> Origin = (-90.198287963867188,90.300000000000011)
>> >> Pixel Size = (0.015398926739995,-0.015398926739995)
>> >> Metadata:
>> >> ? AREA_OR_POINT=Area
>> >> Image Structure Metadata:
>> >> ? INTERLEAVE=BAND
>> >> Corner Coordinates:
>> >> Upper Left ?( -90.1982880, ?90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
>> >> Lower Left ?( -90.1982880, ? 0.0006936) ( 90d11'53.84"W, ?0d 0' 2.50"N)
>> >> Upper Right ( ? ? 389.001, ? ? ?90.300) (Invalid angle, 90d18' 0.00"N)
>> >> Lower Right ( ? ? 389.001, ? ? ? 0.001) (Invalid angle, ?0d 0' 2.50"N)
>> >> Center ? ? ?( 149.4013126, ?45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
>> >>
>> >>
>> >> Regards,
>> >> Etienne
>> >>
>> >>
>> >> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> >> > On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
>> >> > <etourigny.dev@gmail.com> wrote:
>> >> >> Hi all,
>> >> >>
>> >> >> I would like to have information on the status of geolocation array
>> >> >> support in GDAL.
>> >> >>
>> >> >> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate) ?is
>> >> >> still "under development", and the information there is that
>> >> >> GDALCreateGeoLocTransformer "is currently partially implemented".
>> >> >
>> >> > Etienne,
>> >> >
>> >> > I think the geoloc transformer received some fixes from someone
>> >> > other than myself and now is working reasonable well. ?It would
>> >> > be desirable to freshen up the RFC and get it passed but it isn't
>> >> > particularly a priority of mine so I'm not likely to drive it in the
>> >> > very near future.
>> >> >
>> >> > Best regards,
>> >> >
>> >> > --
>> >> > ---------------------------------------+--------------------------------------
>> >> > I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
>> >> > light and sound - activate the windows | http://pobox.com/~warmerdam
>> >> > and watch the world go round - Rush ? ?| Geospatial Software Developer
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>
>
From rush at winkey.org  Sun Feb 12 10:56:24 2012
From: rush at winkey.org (Brian Case)
Date: Sun Feb 12 10:57:17 2012
Subject: [gdal-dev] Geolocation Arrays ??
In-Reply-To: <CA+TxYvPEwbWaX79+trXcOyYFur_c8L4Uj71JXgwTe9fncRdDNg@mail.gmail.com>
References: <CA+TxYvN0K+4LjmKx-exkzScSXeZELOGQhOcn-TVqwLOLO+54bw@mail.gmail.com>
	<CA+YzLBcxa4pAfMuYH-35OeFVjtQMLcDt+h7rVeWTxyyJmmMNhQ@mail.gmail.com>
	<CA+TxYvPyPdkDyQyxt9z8bo5SFO+5UktcLfOV173d85G7CezD=A@mail.gmail.com>
	<1328654770.8877.1.camel@localhost>
	<CA+TxYvN_d5QUc+9XF1dMdh5wjaufuXWWJK+ZF_nMNFwqVZuGoA@mail.gmail.com>
	<1329057486.30423.4.camel@localhost>
	<CA+TxYvPEwbWaX79+trXcOyYFur_c8L4Uj71JXgwTe9fncRdDNg@mail.gmail.com>
Message-ID: <1329062184.30423.10.camel@localhost>

Etienne

the algorithm that finds the target extent is not in the transformer

Brian

On Sun, 2012-02-12 at 13:17 -0200, Etienne Tourigny wrote:
> Brian,
> 
> I'm not sure I understand your point - I probably don't understand the
> algorithm enough. Are both the forward and reverse transformations
> necessary in all cases?
> 
> My point is that, if (manually) adding the -te option to gdalwarp is
> necessary in most cases, why not (automatically) setting the extents
> from the min/max of the geolocation arrays instead of trying to
> calculate them?
> This could fix when the algorithm fails or generates an extent that is
> too large.
> 
> Etienne
> 
> On Sun, Feb 12, 2012 at 12:38 PM, Brian Case <rush@winkey.org> wrote:
> > the forward transform is pretty strait forwards, however the reverse is
> > not, it creates back-mask (a geo-referenced image that contains the x/y locations
> > in the source image). the points that the warper tries to transform to
> > figure out the target extent are no-data in the back-mask.
> >
> > Brian
> >
> > On Sun, 2012-02-12 at 12:25 -0200, Etienne Tourigny wrote:
> >> Brian, thanks fot the info.
> >>
> >> I have seen that on all tests I made (without -te option).  Sometimes
> >> it fails completely, and sometimes it creates an extent that is too
> >> large.
> >>
> >> Would it make sense, if the geolocation SRS and target are SRS are the
> >> same (e.g. WGS84), to calculate the target extents from the min/max of
> >> the geolocation arrays?
> >> Current extent detection code seems to try many transformations with
> >> proj4, and either fails or creates an extent that is too large.
> >>
> >> regards,
> >> Etienne
> >>
> >>
> >> On Tue, Feb 7, 2012 at 8:46 PM, Brian Case <rush@winkey.org> wrote:
> >> > Etienne
> >> > with the transformer the way it sits now, in most cases you will need to
> >> > specify -te xmin ymin xmax ymax with gdalwarp to avoid that error
> >> >
> >> > Brian
> >> >
> >> >
> >> > On Tue, 2012-02-07 at 19:22 -0200, Etienne Tourigny wrote:
> >> >> Even, Frank,
> >> >>
> >> >> thanks for your answers.  I have run into a problem with using
> >> >> gdalwarp with geoloc transform.
> >> >>
> >> >> In ticket #1895 there is an hdf file for which the HDF4 driver creates
> >> >> GEOLOCATION metadata.
> >> >>
> >> >> Trying gdalwarp on it gives an error, and the result transform is
> >> >> incorrect.  Am I doing something wrong, or is this a bug?
> >> >>
> >> >> command is : gdalwarp -geoloc -t_srs EPSG:4326
> >> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> >> >> more info below:
> >> >>
> >> >> $ gdalinfo HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13
> >> >> Driver: HDF4Image/HDF4 Dataset
> >> >> Files: A2006005182000.L2_LAC_SST.x.hdf
> >> >> Size is 389, 602
> >> >> Coordinate System is `'
> >> >> Metadata:
> >> >> [...]
> >> >> Geolocation:
> >> >>   LINE_OFFSET=0
> >> >>   LINE_STEP=1
> >> >>   PIXEL_OFFSET=0
> >> >>   PIXEL_STEP=1
> >> >>   SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> >> >> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> >> >>   X_BAND=1
> >> >>   X_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":11
> >> >>   Y_BAND=1
> >> >>   Y_DATASET=HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":12
> >> >> Corner Coordinates:
> >> >> [...]
> >> >>
> >> >> $ gdalwarp -geoloc -t_srs EPSG:4326
> >> >> HDF4_SDS:UNKNOWN:"A2006005182000.L2_LAC_SST.x.hdf":13 tmp1.tif
> >> >> Creating output file that is 31119P x 5864L.
> >> >> Processing input file HDF4_SDS:UNKNOWN:A2006005182000.L2_LAC_SST.x.hdf:13.
> >> >> ERROR 1: Too many points (441 out of 441) failed to transform,
> >> >> unable to compute output bounds.
> >> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> >> >>
> >> >> $ gdalinfo tmp1.tif
> >> >> Driver: GTiff/GeoTIFF
> >> >> Files: tmp1.tif
> >> >> Size is 31119, 5864
> >> >> Coordinate System is:
> >> >> GEOGCS["WGS 84",
> >> >>     DATUM["WGS_1984",
> >> >>         SPHEROID["WGS 84",6378137,298.257223563,
> >> >>             AUTHORITY["EPSG","7030"]],
> >> >>         AUTHORITY["EPSG","6326"]],
> >> >>     PRIMEM["Greenwich",0],
> >> >>     UNIT["degree",0.0174532925199433],
> >> >>     AUTHORITY["EPSG","4326"]]
> >> >> Origin = (-90.198287963867188,90.300000000000011)
> >> >> Pixel Size = (0.015398926739995,-0.015398926739995)
> >> >> Metadata:
> >> >>   AREA_OR_POINT=Area
> >> >> Image Structure Metadata:
> >> >>   INTERLEAVE=BAND
> >> >> Corner Coordinates:
> >> >> Upper Left  ( -90.1982880,  90.3000000) ( 90d11'53.84"W, 90d18' 0.00"N)
> >> >> Lower Left  ( -90.1982880,   0.0006936) ( 90d11'53.84"W,  0d 0' 2.50"N)
> >> >> Upper Right (     389.001,      90.300) (Invalid angle, 90d18' 0.00"N)
> >> >> Lower Right (     389.001,       0.001) (Invalid angle,  0d 0' 2.50"N)
> >> >> Center      ( 149.4013126,  45.1503468) (149d24' 4.73"E, 45d 9' 1.25"N)
> >> >>
> >> >>
> >> >> Regards,
> >> >> Etienne
> >> >>
> >> >>
> >> >> On Tue, Feb 7, 2012 at 7:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> >> >> > On Tue, Feb 7, 2012 at 7:40 AM, Etienne Tourigny
> >> >> > <etourigny.dev@gmail.com> wrote:
> >> >> >> Hi all,
> >> >> >>
> >> >> >> I would like to have information on the status of geolocation array
> >> >> >> support in GDAL.
> >> >> >>
> >> >> >> The relevant RFC4 (http://trac.osgeo.org/gdal/wiki/rfc4_geolocate)  is
> >> >> >> still "under development", and the information there is that
> >> >> >> GDALCreateGeoLocTransformer "is currently partially implemented".
> >> >> >
> >> >> > Etienne,
> >> >> >
> >> >> > I think the geoloc transformer received some fixes from someone
> >> >> > other than myself and now is working reasonable well.  It would
> >> >> > be desirable to freshen up the RFC and get it passed but it isn't
> >> >> > particularly a priority of mine so I'm not likely to drive it in the
> >> >> > very near future.
> >> >> >
> >> >> > Best regards,
> >> >> >
> >> >> > --
> >> >> > ---------------------------------------+--------------------------------------
> >> >> > I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> >> >> > light and sound - activate the windows | http://pobox.com/~warmerdam
> >> >> > and watch the world go round - Rush    | Geospatial Software Developer
> >> >> _______________________________________________
> >> >> gdal-dev mailing list
> >> >> gdal-dev@lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >
> >> >
> >
> >


From gpuckett at metamap.com  Sun Feb 12 14:46:41 2012
From: gpuckett at metamap.com (Glenn Puckett)
Date: Sun Feb 12 14:49:33 2012
Subject: [gdal-dev] Help with executable
Message-ID: <017801cce9bf$0c15ea90$2441bfb0$@com>

Hi,

 

I am trying to get the environment set up to build a Windows desktop GIS
application in Python.  Since GDAL is a prerequisite I am unable to proceed
until I can get a download of the executable.  However I am NOT a C/C++
developer and I do not have any of the environment or specific knowledge
necessary to build the software from source.  Could someone please forward
to me a copy of the latest Win32 executable of GDAL?

 

GP

gpuckett@metamap.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120212/f5862a6e/attachment.html
From jukka.rahkonen at mmmtike.fi  Sun Feb 12 15:41:24 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Feb 12 15:42:04 2012
Subject: [gdal-dev] Re: Help with executable
References: <017801cce9bf$0c15ea90$2441bfb0$@com>
Message-ID: <loom.20120212T214020-829@post.gmane.org>

Glenn Puckett <gpuckett <at> metamap.com> writes:

> 
> 
> Hi,
> ?
> I am trying to get the environment set up to build a Windows desktop GIS
application in Python.? Since GDAL is a prerequisite I am unable to proceed
until I can get a download of the executable.? However I am NOT a C/C++
developer and I do not have any of the environment or specific knowledge
necessary to build the software from source.? Could someone please forward to me
a copy of the latest Win32 executable of GDAL?

Site seems to be down right now once it is up again check
http://www.gisinternals.com/sdk

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Sun Feb 12 16:16:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 12 16:17:26 2012
Subject: [gdal-dev] Unreliable names for temporary files
In-Reply-To: <loom.20120212T142023-601@post.gmane.org>
References: <loom.20120212T142023-601@post.gmane.org>
Message-ID: <201202122216.37104.even.rouault@mines-paris.org>

Le dimanche 12 f?vrier 2012 14:25:07, Jukka Rahkonen a ?crit :
> Hi,
> 
> I noticed a ticket http://trac.osgeo.org/gdal/ticket/4510 and started to
> wonder if something similar can happen also elsewhere. I have had troubles
> with Mapserver OGR output and they are somehow related to temporary files
> (both physisical and vsimem files). See
> http://lists.maptools.org/pipermail/ms4w-users/2012-February/001948.html
> for some details.

Jukka,

The issue with the mapfile in http://lists.maptools.org/pipermail/ms4w-
users/2012-February/001948.html is the default filename. For the CSV driver to 
create a single file, you need to change the filename to something ending with 
.csv (for example "default_outfile" "out.csv"), otherwise the CSV driver will 
create a directory, and when MapServer tries to read the filename, it is 
confused because it finds a directory, and not a file.

> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From eadam at co.lincoln.or.us  Sun Feb 12 19:35:55 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Sun Feb 12 19:44:36 2012
Subject: [gdal-dev] Some tables from mdb not exported to PostGIS
In-Reply-To: <1327719048548-4344999.post@n6.nabble.com>
References: <1327719048548-4344999.post@n6.nabble.com>
Message-ID: <CACqBkM_SMjqXStz4_-9BSXTKnHCL3otRZLHMy_zfAdg1TGV10w@mail.gmail.com>

Assuming that you are using ogr2ogr on the xp computer, you can fairly
easily setup ODBC connections for the non-spatial tables,
http://gdal.org/ogr/drv_odbc.html

Doing the same from linux is somewhat more difficult, the easiest path
I think to be http://gdal.org/ogr/drv_mdb.html

You can see some of my previous similar attempts,
http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030833.html

And this general topic seems to be ongoing so which version you are
using may be relevant depending on specifics,
http://trac.osgeo.org/gdal/changeset/23931

Bests, Eli


On Fri, Jan 27, 2012 at 6:50 PM, jjap <sabjap@gmail.com> wrote:
> Greetings,
> ogr2ogr has allowed me to successfully convert an ESRI personnal geodatabase
> from a Windows XP computer to an Ubuntu server 11.04 running PostGIS 1.5
> with proper encoding . The tables containing the blob/shapefiles all made it
> but not the others. Am I right to presume I'll have to migrate those other
> tables by hand and rebuild references?
> Am I missing some options which would have allowed me to do it in one fell
> swoop? Any hints appreciated.
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Some-tables-from-mdb-not-exported-to-PostGIS-tp4344999p4344999.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Mon Feb 13 00:22:31 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Feb 13 00:23:32 2012
Subject: [gdal-dev] Re: Unreliable names for temporary files
References: <loom.20120212T142023-601@post.gmane.org>
	<201202122216.37104.even.rouault@mines-paris.org>
Message-ID: <loom.20120213T062209-402@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le dimanche 12 f?vrier 2012 14:25:07, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > I noticed a ticket http://trac.osgeo.org/gdal/ticket/4510 and started to
> > wonder if something similar can happen also elsewhere. I have had troubles
> > with Mapserver OGR output and they are somehow related to temporary files
> > (both physisical and vsimem files). See
> > http://lists.maptools.org/pipermail/ms4w-users/2012-February/001948.html
> > for some details.
> 
> Jukka,
> 
> The issue with the mapfile in http://lists.maptools.org/pipermail/ms4w-
> users/2012-February/001948.html is the default filename. For the CSV driver to 
> create a single file, you need to change the filename to something ending with 
> .csv (for example "default_outfile" "out.csv"), otherwise the CSV driver will 
> create a directory, and when MapServer tries to read the filename, it is 
> confused because it finds a directory, and not a file.

Now I have these outputformats

OUTPUTFORMAT
  NAME "SHAPEZIP"
  DRIVER "OGR/ESRI Shapefile"
  MIMETYPE "application/shapefile"
  FORMATOPTION "STORAGE=memory"
  FORMATOPTION "FORM=zip"
  FORMATOPTION "FILENAME=shape.zip"
END
OUTPUTFORMAT
  NAME "CSV"
  DRIVER "OGR/CSV"
  MIMETYPE "text/csv"
  FORMATOPTION "LCO:GEOMETRY=AS_WKT"
  FORMATOPTION "STORAGE=filesystem"
  FORMATOPTION "FORM=simple"
  FORMATOPTION "FILENAME=out.csv"
END

You can try them:

http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=getfeature&typename=municipalities&outputformat=CSV
Result is probably "Failed to open result file" 

http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=getfeature&typename=municipalities&outputformat=SHAPEZIP
Result is probably an empty zip file.


-Jukka Rahkonen-

From schut at sarvision.nl  Mon Feb 13 03:37:38 2012
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Feb 13 03:47:04 2012
Subject: [gdal-dev] plate caree and EPSG:4326
In-Reply-To: <1327930099451-4350647.post@n6.nabble.com>
References: <1327930099451-4350647.post@n6.nabble.com>
Message-ID: <4F38CBD2.3040205@sarvision.nl>

On 01/30/2012 02:28 PM, Alfredo Alessandrini wrote:
> Hi,
>
> I'm trying to reproject the VGT-P product with the gdal libraries.
>
> The metafile is reported below.
>
> It's right to assume the EPSG 4326 code as source spatial reference set?

Probably, yes.
I have always used 4326 for spot vgt products, without any problems, 
though I must mention that I mainly worked with areas located around the 
equator. I think the 'plate carree' mentioned in the metadata is 
misleading; as far as I know svgt products are in latlong unprojected space.

Vincent.
>
>
> Thanks,
>
> Alfredo
>
>
> MAP_PROJ_NAME             PLATE_CARREE_1KMG nom provisoirement egal au code
> MAP_PROJ_FAMILY           UNPROJECTED
> MAP_PROJ_CODE             PLATE_CARREE_1KMG
> MAP_PROJ_UNIT             DEGREES
> MAP_PROJ_RESOLUTION       0.0089285714
> GEODETIC_SYST_NAME        WGS 1984
> GEODETIC_SYST_CODE        WG84
> HORIZ_DATUM               WGS 1984
> MERIDIAN_NAME             GREENWICH
> MERIDIAN_ORIGIN           +000.000
> SPHEROID_NAME             WGS 1984
> SPHEROID_SEMI_MAJ_AXIS    6378137.000
> SPHEROID_SEMI_MIN_AXIS    6356752.314
> CARTO_UPPER_LEFT_X          91.267857
> CARTO_UPPER_LEFT_Y          72.232143
> CARTO_UPPER_RIGHT_X        154.160714
> CARTO_UPPER_RIGHT_Y         72.232143
> CARTO_LOWER_RIGHT_X        154.160714
> CARTO_LOWER_RIGHT_Y         -8.241071
> CARTO_LOWER_LEFT_X          91.267857
> CARTO_LOWER_LEFT_Y          -8.241071
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/plate-caree-and-EPSG-4326-tp4350647p4350647.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dmburgess at linktechs.net  Mon Feb 13 07:11:05 2012
From: dmburgess at linktechs.net (Dennis Burgess)
Date: Mon Feb 13 07:09:12 2012
Subject: [gdal-dev] unsubscribe
Message-ID: <50710E9A7E64454C974049FC998EB655480406@03-exchange.lti.local>

 

 

------------------------------------------------------------------------
------------------------------------------------------------------------
-------------------
Dennis Burgess, Mikrotik Certified Trainer Author of "Learn RouterOS-
Second Edition <http://www.wlan1.com/product_p/mikrotik%20book-2.htm> "
Link Technologies, Inc -- Mikrotik & WISP Support Services
Office: 314-735-0270 <tel:314-735-0270>  Website:
http://www.linktechs.net <http://www.linktechs.net/>  - Skype: linktechs
<skype:linktechs?call> 
-- Create Wireless Coverages with www.mywificoverage.com
<http://www.mywificoverage.com/>  -- 
------------------------------------------------------------------------
------------------------------------------------------------------------
----------------------

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120213/58ac8033/attachment.html
From lambi at ucar.edu  Mon Feb 13 07:40:46 2012
From: lambi at ucar.edu (lambi@ucar.edu)
Date: Mon Feb 13 07:48:58 2012
Subject: [gdal-dev] building geotransform with lower left and upper right
	coordinates
Message-ID: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>

Hello,

I have a raster where I know the projection and the lower left and upper
right coordinates and pixel size but I don't know the upper left
coordinate.  It is a lambert conformal conic projection:

"+proj=lcc +lon_0=95W +lat_0=25N +lat_1=25N"

where the lower left is -113.1333, 16.3691
upper right is -49.385, 57.289
dx/dy is 1015.875 (m)
width/height is 5120

I've tried transforming the lower left lat/lon to lcc projection, adding
dy*height and then converting back to lat/lon (and a few variations of
this) but I can't seem to get a proper answer for what the upper left
should be so I can build a proper geotransform for this dataset.  I've
tried adding two GCPs for these points but gdalwarp says it doesn't have
enough points to complete the warp.

How can I find the upper left with the given information so I can build
the geotransform?

Any help is greatly appreciated!

Brice




From isrinath at yahoo.com  Mon Feb 13 09:44:31 2012
From: isrinath at yahoo.com (srinath indumathi)
Date: Mon Feb 13 09:46:59 2012
Subject: [gdal-dev] unsubscribe
In-Reply-To: <50710E9A7E64454C974049FC998EB655480406@03-exchange.lti.local>
Message-ID: <1329144271.48836.YahooMailClassic@web161303.mail.bf1.yahoo.com>



Indumathi Srinath



--- On Mon, 2/13/12, Dennis Burgess <dmburgess@linktechs.net> wrote:

From: Dennis Burgess <dmburgess@linktechs.net>
Subject: [gdal-dev] unsubscribe
To: gdal-dev@lists.osgeo.org
Date: Monday, February 13, 2012, 5:41 PM

? ?-------------------------------------------------------------------------------------------------------------------------------------------------------------------
Dennis Burgess, Mikrotik Certified Trainer Author of "Learn RouterOS- Second Edition?
Link Technologies, Inc -- Mikrotik & WISP Support Services
Office: 314-735-0270 Website: http://www.linktechs.net ? Skype: linktechs
-- Create Wireless Coverages with www.mywificoverage.com -- 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------- ?
-----Inline Attachment Follows-----

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120213/35d73aee/attachment.html
From rush at winkey.org  Mon Feb 13 12:31:37 2012
From: rush at winkey.org (Brian Case)
Date: Mon Feb 13 12:32:15 2012
Subject: [gdal-dev] building geotransform with lower left and upper
	right coordinates
In-Reply-To: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>
References: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>
Message-ID: <1329154297.4568.2.camel@localhost>

Brice,

with that projection the origin should be in meters. convert the ll to
meters and try setting dy to dy * -1

Brian

On Mon, 2012-02-13 at 05:40 -0700, lambi@ucar.edu wrote:
> Hello,
> 
> I have a raster where I know the projection and the lower left and upper
> right coordinates and pixel size but I don't know the upper left
> coordinate.  It is a lambert conformal conic projection:
> 
> "+proj=lcc +lon_0=95W +lat_0=25N +lat_1=25N"
> 
> where the lower left is -113.1333, 16.3691
> upper right is -49.385, 57.289
> dx/dy is 1015.875 (m)
> width/height is 5120
> 
> I've tried transforming the lower left lat/lon to lcc projection, adding
> dy*height and then converting back to lat/lon (and a few variations of
> this) but I can't seem to get a proper answer for what the upper left
> should be so I can build a proper geotransform for this dataset.  I've
> tried adding two GCPs for these points but gdalwarp says it doesn't have
> enough points to complete the warp.
> 
> How can I find the upper left with the given information so I can build
> the geotransform?
> 
> Any help is greatly appreciated!
> 
> Brice
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From rush at winkey.org  Mon Feb 13 12:44:31 2012
From: rush at winkey.org (Brian Case)
Date: Mon Feb 13 12:44:56 2012
Subject: [gdal-dev] building geotransform with lower left and upper
	right coordinates
In-Reply-To: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>
References: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>
Message-ID: <1329155071.4568.5.camel@localhost>

Brice,

After some thought your image might not be bottom up. if thats the case
calc the origin the way you did before, but don't convert back to lat
lon

Brian

On Mon, 2012-02-13 at 05:40 -0700, lambi@ucar.edu wrote:
> Hello,
> 
> I have a raster where I know the projection and the lower left and upper
> right coordinates and pixel size but I don't know the upper left
> coordinate.  It is a lambert conformal conic projection:
> 
> "+proj=lcc +lon_0=95W +lat_0=25N +lat_1=25N"
> 
> where the lower left is -113.1333, 16.3691
> upper right is -49.385, 57.289
> dx/dy is 1015.875 (m)
> width/height is 5120
> 
> I've tried transforming the lower left lat/lon to lcc projection, adding
> dy*height and then converting back to lat/lon (and a few variations of
> this) but I can't seem to get a proper answer for what the upper left
> should be so I can build a proper geotransform for this dataset.  I've
> tried adding two GCPs for these points but gdalwarp says it doesn't have
> enough points to complete the warp.
> 
> How can I find the upper left with the given information so I can build
> the geotransform?
> 
> Any help is greatly appreciated!
> 
> Brice
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mweisman at opengeo.org  Mon Feb 13 13:36:07 2012
From: mweisman at opengeo.org (Michael Weisman)
Date: Mon Feb 13 13:36:51 2012
Subject: [gdal-dev] RPM-deployed GDAL cannot find plugins
Message-ID: <8BCE877E-7546-4400-9F3E-726BFF4C2451@opengeo.org>

Hi,

I am trying to build a redistributable rpm binary of GDAL 1.8.1 with an additional gdal-mrsid package that installs a plugin to provide MrSID support if a user has the Lizard Tech SDK installed. If I install gdal using the standard ./configure, make, make install and then build MrSID support manually using g++ and copy the .so file into /usr/lib64/gdalplugins it works, but if I use rpmbuild and rpm to install these same files, gdalinfo --formats does not list MrSID, even though ldd shows that the plugin is aware of all required libraries.

I am building the MrSID plugin with:
g++ -g frmts/mrsid/*.cpp -shared -o gdal_MrSID.so \
-DOGR_ENABLED -D_REENTRANT -DMRSID_J2K -fPIC -DPIC \
-Ifrmts/gtiff/libgeotiff/ -Igcore -Iogr -Iport -I$MRSID_ROOT/include \
-L$MRSID_ROOT/lib -L.libs \
-lgdal -lltidsdk -lpthread -ldl

Is there a trick in gdal 1.8 to specify a plugin directory? I noticed that Debian GIS has a similar MrSID package that is built with the --with-autoload=$PLUGINDIR flag passed to configure. With gdal 1.8 I get a warning that --with-autoload is an unrecognized option.

I am both building and deploying these RPMs on 64-bit CentOS 5.5.

Thanks,

Michael
From lambi at ucar.edu  Mon Feb 13 13:39:02 2012
From: lambi at ucar.edu (Brice Lambi)
Date: Mon Feb 13 13:39:50 2012
Subject: [gdal-dev] building geotransform with lower left and upper right
	coordinates
In-Reply-To: <1329155071.4568.5.camel@localhost>
References: <e6194ccce2ebf281fbb6eb967fc0aeb1.squirrel@mail.rap.ucar.edu>
	<1329155071.4568.5.camel@localhost>
Message-ID: <4F3958C6.4000206@ucar.edu>

Hi Brian,

Thanks for the help, you were correct that I just needed to inverse my 
dy value in the geotransform.

Cheers,
Brice


On 02/13/2012 10:44 AM, Brian Case wrote:
> Brice,
>
> After some thought your image might not be bottom up. if thats the case
> calc the origin the way you did before, but don't convert back to lat
> lon
>
> Brian
>
> On Mon, 2012-02-13 at 05:40 -0700, lambi@ucar.edu wrote:
>> Hello,
>>
>> I have a raster where I know the projection and the lower left and upper
>> right coordinates and pixel size but I don't know the upper left
>> coordinate.  It is a lambert conformal conic projection:
>>
>> "+proj=lcc +lon_0=95W +lat_0=25N +lat_1=25N"
>>
>> where the lower left is -113.1333, 16.3691
>> upper right is -49.385, 57.289
>> dx/dy is 1015.875 (m)
>> width/height is 5120
>>
>> I've tried transforming the lower left lat/lon to lcc projection, adding
>> dy*height and then converting back to lat/lon (and a few variations of
>> this) but I can't seem to get a proper answer for what the upper left
>> should be so I can build a proper geotransform for this dataset.  I've
>> tried adding two GCPs for these points but gdalwarp says it doesn't have
>> enough points to complete the warp.
>>
>> How can I find the upper left with the given information so I can build
>> the geotransform?
>>
>> Any help is greatly appreciated!
>>
>> Brice
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Mon Feb 13 17:06:25 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 13 17:07:03 2012
Subject: [gdal-dev] Re: Unreliable names for temporary files
In-Reply-To: <loom.20120213T062209-402@post.gmane.org>
References: <loom.20120212T142023-601@post.gmane.org>
	<201202122216.37104.even.rouault@mines-paris.org>
	<loom.20120213T062209-402@post.gmane.org>
Message-ID: <201202132306.25699.even.rouault@mines-paris.org>

Le lundi 13 f?vrier 2012 06:22:31, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Le dimanche 12 f?vrier 2012 14:25:07, Jukka Rahkonen a ?crit :
> > > Hi,
> > > 
> > > I noticed a ticket http://trac.osgeo.org/gdal/ticket/4510 and started
> > > to wonder if something similar can happen also elsewhere. I have had
> > > troubles with Mapserver OGR output and they are somehow related to
> > > temporary files (both physisical and vsimem files). See
> > > http://lists.maptools.org/pipermail/ms4w-users/2012-February/001948.htm
> > > l for some details.
> > 
> > Jukka,
> > 
> > The issue with the mapfile in http://lists.maptools.org/pipermail/ms4w-
> > users/2012-February/001948.html is the default filename. For the CSV
> > driver to create a single file, you need to change the filename to
> > something ending with .csv (for example "default_outfile" "out.csv"),
> > otherwise the CSV driver will create a directory, and when MapServer
> > tries to read the filename, it is confused because it finds a directory,
> > and not a file.
> 
> Now I have these outputformats
> 
> OUTPUTFORMAT
>   NAME "SHAPEZIP"
>   DRIVER "OGR/ESRI Shapefile"
>   MIMETYPE "application/shapefile"
>   FORMATOPTION "STORAGE=memory"
>   FORMATOPTION "FORM=zip"
>   FORMATOPTION "FILENAME=shape.zip"
> END
> OUTPUTFORMAT
>   NAME "CSV"
>   DRIVER "OGR/CSV"
>   MIMETYPE "text/csv"
>   FORMATOPTION "LCO:GEOMETRY=AS_WKT"
>   FORMATOPTION "STORAGE=filesystem"
>   FORMATOPTION "FORM=simple"
>   FORMATOPTION "FILENAME=out.csv"
> END
> 
> You can try them:
> 
> http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=
> getfeature&typename=municipalities&outputformat=CSV Result is probably
> "Failed to open result file"
> 
> http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=
> getfeature&typename=municipalities&outputformat=SHAPEZIP Result is probably
> an empty zip file.

CC'ing to mapserver-users list.

Similar requests with the 2 above outputformats work great on my local 
mapserver instance, so I suspect something wrong in your setup. If I issue the 
CSV request on your server, I see the following error message :
<?xml version="1.0" encoding="UTF-8"?>
<ows:ExceptionReport xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:ows="http://www.opengis.net/ows" version="1.1.0" language="en-US" 
xsi:schemaLocation="http://www.opengis.net/ows 
http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd">
  <ows:Exception exceptionCode="NoApplicableCode" locator="mapserv">
    <ows:ExceptionText>msOGRWriteFromQuery(): General error message. Failed to 
open result file '/usr/temp/4f3988d4_287f_0/out.csv'.</ows:ExceptionText>
  </ows:Exception>
</ows:ExceptionReport>

The /usr/temp/ path look suspicious to me...

> 
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Jukka.Rahkonen at mmmtike.fi  Tue Feb 14 00:21:37 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Feb 14 00:21:47 2012
Subject: [gdal-dev] Re: Unreliable names for temporary files
In-Reply-To: <201202132306.25699.even.rouault@mines-paris.org>
References: <loom.20120212T142023-601@post.gmane.org>
	<201202122216.37104.even.rouault@mines-paris.org>
	<loom.20120213T062209-402@post.gmane.org>,
	<201202132306.25699.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63074075@pasuri.haapa.mmm.fi>


________________________________________
Even Rouault wrote:


Le lundi 13 f?vrier 2012 06:22:31, Jukka Rahkonen a ?crit :
>> Even Rouault <even.rouault <at> mines-paris.org> writes:
>> > Le dimanche 12 f?vrier 2012 14:25:07, Jukka Rahkonen a ?crit :
>> > > Hi,
>> > >
>> > > I noticed a ticket http://trac.osgeo.org/gdal/ticket/4510 and started
>> > > to wonder if something similar can happen also elsewhere. I have had
>> > > troubles with Mapserver OGR output and they are somehow related to
>> > > temporary files (both physisical and vsimem files). See
>> > > http://lists.maptools.org/pipermail/ms4w-users/2012-February/001948.htm
>> > > l for some details.
>> >
>> > Jukka,
>> >
>> > The issue with the mapfile in http://lists.maptools.org/pipermail/ms4w-
>> > users/2012-February/001948.html is the default filename. For the CSV
>> > driver to create a single file, you need to change the filename to
>> > something ending with .csv (for example "default_outfile" "out.csv"),
>> > otherwise the CSV driver will create a directory, and when MapServer
>> > tries to read the filename, it is confused because it finds a directory,
>> > and not a file.
>>
>> Now I have these outputformats
>>
>> OUTPUTFORMAT
>>   NAME "SHAPEZIP"
>>   DRIVER "OGR/ESRI Shapefile"
>>   MIMETYPE "application/shapefile"
>>   FORMATOPTION "STORAGE=memory"
>>   FORMATOPTION "FORM=zip"
>>   FORMATOPTION "FILENAME=shape.zip"
>> END
>> OUTPUTFORMAT
>>   NAME "CSV"
>>   DRIVER "OGR/CSV"
>>   MIMETYPE "text/csv"
>>   FORMATOPTION "LCO:GEOMETRY=AS_WKT"
>>   FORMATOPTION "STORAGE=filesystem"
>>   FORMATOPTION "FORM=simple"
>>   FORMATOPTION "FILENAME=out.csv"
>> END
>>
>> You can try them:
>
>> http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=
>> getfeature&typename=municipalities&outputformat=CSV Result is probably
>> "Failed to open result file"
>>
>> http://188.64.1.61/cgi-bin/mapserver_wfs?service=wfs&version=1.1.0&request=
>> getfeature&typename=municipalities&outputformat=SHAPEZIP Result is probably
>> an empty zip file.

> CC'ing to mapserver-users list.

> Similar requests with the 2 above outputformats work great on my local
> mapserver instance, so I suspect something wrong in your setup. If I issue the
> CSV request on your server, I see the following error message :
> <?xml version="1.0" encoding="UTF-8"?>
> <ows:ExceptionReport xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xmlns:ows="http://www.opengis.net/ows" version="1.1.0" language="en-US"
> xsi:schemaLocation="http://www.opengis.net/ows
> http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd">
> <ows:Exception exceptionCode="NoApplicableCode" locator="mapserv">
>     <ows:ExceptionText>msOGRWriteFromQuery(): General error message. Failed to
> open result file '/usr/temp/4f3988d4_287f_0/out.csv'.</ows:ExceptionText>
>   </ows:Exception>
> </ows:ExceptionReport>

> The /usr/temp/ path look suspicious to me...

Hi,

/usr/temp/ has 7777 rights and it is good enough for the MS_ERRORFILE...

Short history of my trials:
- half a year ago tried to set up ogroutput with no success
- read a message about using "temppath" in the mapfile and added that parameter
- SHPZIP and CSV outpur started to work and I was happy
- but in the same evening the "Failed to open result file" errors came back
- never again had a new success with that Linux server
- not a single success with several Windows computers
- last week tried the new MS4W 3.0.4beta1 on Windows
- succeeded to make ogroutput to work for a while
- was suspicious and restarted Apache and started to get "Failed to open result" file errors again

It can of course be that I am just repeating my own errors but weird is that I have received valid CSV an SHAPEZIP outputs but only for a while.

-Jukka Rahkonen-
From strk at keybit.net  Tue Feb 14 05:05:18 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue Feb 14 05:06:01 2012
Subject: [gdal-dev] PostGIS SRID conundrum
In-Reply-To: <e859362d.00001994.00000002@CHAPMANM7S>
References: <5dd8056d.00001264.00000019@CHAPMANM7S>
	<1328938399.79370.YahooMailClassic@web160703.mail.bf1.yahoo.com>
	<e859362d.00001994.00000002@CHAPMANM7S>
Message-ID: <CALbSccB3uchR3pQMtay=z3b3x7gLvH3RzawWcqNYE71qUztUYA@mail.gmail.com>

On Sat, Feb 11, 2012 at 6:48 AM, Martin Chapman <chapmanm@pixia.com> wrote:

> 4.       I select the max(srid) where srid > 10000000.  If zero is
> returned then I  use that base number (10000000) and add a new entry to the
> spatial_ref_sys table using the proj4 text and wkt so all fields have a
> value?and my app name as the authority (makes me feel important J).  If a
> max above 10000000 is found then I take the max and add one and then add
> the new entry.Guys, the MAXIMUM
>
The MAXIMUM valid user value for SRID in PostGIS-2.0 is 998999 so please
consider using values in the range 910000..910999 for your custom entries.

--strk;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120214/c004e93f/attachment.html
From chapmanm at pixia.com  Tue Feb 14 12:35:18 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Tue Feb 14 12:35:49 2012
Subject: [gdal-dev] PostGIS SRID conundrum
In-Reply-To: <CALbSccB3uchR3pQMtay=z3b3x7gLvH3RzawWcqNYE71qUztUYA@mail.gmail.com>
References: <5dd8056d.00001264.00000019@CHAPMANM7S>	<1328938399.79370.YahooMailClassic@web160703.mail.bf1.yahoo.com>	<e859362d.00001994.00000002@CHAPMANM7S>
	<CALbSccB3uchR3pQMtay=z3b3x7gLvH3RzawWcqNYE71qUztUYA@mail.gmail.com>
Message-ID: <d419cf4f.00000d20.0000002a@CHAPMANM7S>

Sandro,



Thank you very much for the info!



Best regards,

Martin



From: sandro.santilli@gmail.com [mailto:sandro.santilli@gmail.com] On Behalf 
Of Sandro Santilli
Sent: Tuesday, February 14, 2012 3:05 AM
To: Martin Chapman
Cc: pcreso@pcreso.com; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] PostGIS SRID conundrum





On Sat, Feb 11, 2012 at 6:48 AM, Martin Chapman <chapmanm@pixia.com> wrote:

4.       I select the max(srid) where srid > 10000000.  If zero is returned 
then I  use that base number (10000000) and add a new entry to the 
spatial_ref_sys table using the proj4 text and wkt so all fields have a 
value?and my app name as the authority (makes me feel important J).  If a 
max above 10000000 is found then I take the max and add one and then add the 
new entry.Guys, the MAXIMUM

The MAXIMUM valid user value for SRID in PostGIS-2.0 is 998999 so please
consider using values in the range 910000..910999 for your custom entries.

--strk;



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120214/f7293f81/attachment.html
From rjpawley at shaw.ca  Tue Feb 14 13:24:25 2012
From: rjpawley at shaw.ca (Bob Pawley)
Date: Tue Feb 14 13:25:08 2012
Subject: [gdal-dev] ogr2ogr
Message-ID: <B8B7F192430A4712BC447E4529317630@BobPC>

Is there a method of having two ?sql commands in one command prompt execution.

I have attempted 

1. ?sql ?first statement ? ?sql ?second?

2. ?sql ?first; second?

3. sql ?first ? ?second?

4. ?sql ?first? ?overwrite ?skipfailures -sql ?second? (an attempt to separate the two).

Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120214/456fbabd/attachment.html
From chander at otg-nc.com  Tue Feb 14 13:27:34 2012
From: chander at otg-nc.com (Chander Ganesan)
Date: Tue Feb 14 13:27:42 2012
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <B8B7F192430A4712BC447E4529317630@BobPC>
References: <B8B7F192430A4712BC447E4529317630@BobPC>
Message-ID: <4F3AA796.3040501@otg-nc.com>

I'm not certain what you are trying to do, but...

Consider the SQL "UNION", "UNION ALL", "INTERSECT", or "INTERSECT ALL" 
statements perhaps?  They allow you to combine the results of two 
queries into a single result set (as a single query.)

Chander

On 2/14/12 1:24 PM, Bob Pawley wrote:
> Is there a method of having two --sql commands in one command prompt 
> execution.
> I have attempted
> 1. --sql "first statement " --sql "second"
> 2. --sql "first; second"
> 3. sql "first " "second"
> 4. --sql "first" --overwrite --skipfailures -sql "second" (an attempt 
> to separate the two).
> Bob
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120214/bb9a681a/attachment.html
From rjpawley at shaw.ca  Tue Feb 14 13:56:30 2012
From: rjpawley at shaw.ca (Bob Pawley)
Date: Tue Feb 14 13:57:22 2012
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <4F3AA796.3040501@otg-nc.com>
References: <B8B7F192430A4712BC447E4529317630@BobPC>
	<4F3AA796.3040501@otg-nc.com>
Message-ID: <EC150AEA7E294A9681AD792B016BB531@BobPC>

I am trying to add columns to a table (which I am able to do), then add a trigger to that table in order to trigger an existing function.

My basic problem is that the ogr2ogr switch (ie: ?lco Dim=2) appear to only work with an -overwrite. They don?t seem to work with an -append.

As -overwrite drops the existing table, as well as its trigger, I need to replace the trigger after the table is restored.

Does this make sense? 

Perhaps there is another way of doing this?

Bob



From: Chander Ganesan 
Sent: Tuesday, February 14, 2012 10:27 AM
To: gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] ogr2ogr

I'm not certain what you are trying to do, but...

Consider the SQL "UNION", "UNION ALL", "INTERSECT", or "INTERSECT ALL" statements perhaps?  They allow you to combine the results of two queries into a single result set (as a single query.)

Chander

On 2/14/12 1:24 PM, Bob Pawley wrote: 
  Is there a method of having two ?sql commands in one command prompt execution.

  I have attempted 

  1. ?sql ?first statement ? ?sql ?second?

  2. ?sql ?first; second?

  3. sql ?first ? ?second?

  4. ?sql ?first? ?overwrite ?skipfailures -sql ?second? (an attempt to separate the two).

  Bob

   

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




--------------------------------------------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120214/bef5b21a/attachment.html
From supportlists at qlands.com  Wed Feb 15 01:10:39 2012
From: supportlists at qlands.com (SupportLists)
Date: Wed Feb 15 01:35:22 2012
Subject: [gdal-dev] Unable to open GRIB file
Message-ID: <4F3B4C5F.7090508@qlands.com>

Hi,

I am trying to open a grib file (meteorological data) with GDAL 1.8.1 
but i get the following error:

./2011.grib is a grib file, but no raster dataset was successfully 
identified.
gdalinfo failed - unable to open './2011.grib'

Other tools like wgrib successfully opens the same file.

Any idea what is wrong?

Thanks,
Carlos.

From rush at winkey.org  Wed Feb 15 02:44:55 2012
From: rush at winkey.org (Brian Case)
Date: Wed Feb 15 02:45:53 2012
Subject: [gdal-dev] Unable to open GRIB file
In-Reply-To: <4F3B4C5F.7090508@qlands.com>
References: <4F3B4C5F.7090508@qlands.com>
Message-ID: <1329291895.4707.2.camel@localhost>

On Wed, 2012-02-15 at 09:10 +0300, SupportLists wrote:

Carlos

is it raster or vector data?

can you make the file accessible some place? 

Brian

> Hi,
> 
> I am trying to open a grib file (meteorological data) with GDAL 1.8.1 
> but i get the following error:
> 
> ./2011.grib is a grib file, but no raster dataset was successfully 
> identified.
> gdalinfo failed - unable to open './2011.grib'
> 
> Other tools like wgrib successfully opens the same file.
> 
> Any idea what is wrong?
> 
> Thanks,
> Carlos.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From supportlists at qlands.com  Wed Feb 15 03:08:51 2012
From: supportlists at qlands.com (SupportLists)
Date: Wed Feb 15 03:10:14 2012
Subject: [gdal-dev] Unable to open GRIB file
In-Reply-To: <1329291895.4707.2.camel@localhost>
References: <4F3B4C5F.7090508@qlands.com> <1329291895.4707.2.camel@localhost>
Message-ID: <4F3B6813.6050406@qlands.com>

As far as I know is a raster.

You can get it from:

http://www.qlands.com/other_files/2011-01.grib

This grib is only one record from the whole file and it contains maximum 
temperature for the whole world.

The following is the wgrib ./2011-01.grib -V  of the file

rec 1:0:date 2011010100 MX2T kpds5=201 kpds6=1 kpds7=0 levels=(0,0) 
grid=255 sfc ECext=1 class=14 type=9 stream=1025 Version=0001 valid 0-3hr:
   MX2T=Maximum temperature at 2 metres since previous post-processing [K]
   timerange 2 P1 0 P2 3 TimeU 1  nx -1 ny 256 GDS grid 4 num_in_ave 0 
missing 0
   center 98 subcenter 0 process 128 Table 128 scan: WE:NS winds(N/S)
   thinned gaussian: lat  89.462000 to -89.462000
           long 0.000000 to 359.296000, 88838 grid pts   (-1 x 256) scan 
0 mode 0 bdsgrid 1
       18   25   36   40   45   50   60   64   72   72   80   90   90  
100  108
      120  120  125  128  144  144  150  160  160  180  180  180  192  
192  200
      216  216  216  225  240  240  240  250  250  256  270  270  288  
288  288
      300  300  320  320  320  320  324  360  360  360  360  360  360  
360  375
      375  375  375  384  384  400  400  400  400  405  432  432  432  
432  432
      432  432  450  450  450  450  450  480  480  480  480  480  480  
480  480
      480  480  486  486  486  500  500  500  500  500  500  500  512  
512  512
      512  512  512  512  512  512  512  512  512  512  512  512  512  
512  512
      512  512  512  512  512  512  512  512  512  512  512  512  512  
512  512
      512  512  512  512  512  512  512  512  512  512  512  512  512  
512  512
      512  512  512  512  500  500  500  500  500  500  500  486  486  
486  480
      480  480  480  480  480  480  480  480  480  450  450  450  450  
450  432
      432  432  432  432  432  432  405  400  400  400  400  384  384  
375  375
      375  375  360  360  360  360  360  360  360  324  320  320  320  
320  300
      300  288  288  288  270  270  256  250  250  240  240  240  225  
216  216
      216  200  192  192  180  180  180  160  160  150  144  144  128  
125  120
      120  108  100   90   90   80   72   72   64   60   50   45   40   
36   25
       18
   min/max data 223.996 316.531  num bits 16  BDS_Ref 223.996  DecScale 
0 BinScale -9

Many thanks,
Carlos

On 02/15/2012 10:44 AM, Brian Case wrote:
> On Wed, 2012-02-15 at 09:10 +0300, SupportLists wrote:
>
> Carlos
>
> is it raster or vector data?
>
> can you make the file accessible some place?
>
> Brian
>
>> Hi,
>>
>> I am trying to open a grib file (meteorological data) with GDAL 1.8.1
>> but i get the following error:
>>
>> ./2011.grib is a grib file, but no raster dataset was successfully
>> identified.
>> gdalinfo failed - unable to open './2011.grib'
>>
>> Other tools like wgrib successfully opens the same file.
>>
>> Any idea what is wrong?
>>
>> Thanks,
>> Carlos.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120215/0702fb4b/attachment-0001.html
From pavkiz at mail.ru  Wed Feb 15 03:53:18 2012
From: pavkiz at mail.ru (el_inca)
Date: Wed Feb 15 03:53:33 2012
Subject: [gdal-dev] How to read *.cos files
Message-ID: <1329295998516-4471351.post@n6.nabble.com>

Hi,
Can you help with opening terra-sar images?  
Terra-sar data is complex data like : C=A+i*B. If i  understand correctly,
when  we will read only 'A' part of data (for testing purposes) in output we
an image without phase. So, when using RasterIO, i use as buff_type
GDT_Int16. 
In output there is only a noise.
What i'm wrong?

Here is a part of code:

Int16 * scanline_16bit=new Int16[xSize];
if (unit_type==GDT_CInt16)
   {
     poRasterBand->RasterIO(GF_Read,
                                       0,
                                       i,
                                       xSize,
                                       1,
                                       scanline_16bit,
                                       xSize,
                                       1,
                                       GDT_Int16,
                                       0,
                                       0);
   }

GDAL version: 1.8.0
Language: Visual C++

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-read-cos-files-tp4471351p4471351.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etourigny.dev at gmail.com  Wed Feb 15 06:55:17 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Feb 15 06:55:34 2012
Subject: [gdal-dev] Unable to open GRIB file
In-Reply-To: <4F3B6813.6050406@qlands.com>
References: <4F3B4C5F.7090508@qlands.com> <1329291895.4707.2.camel@localhost>
	<4F3B6813.6050406@qlands.com>
Message-ID: <CA+TxYvOr+hOqzFKMWoq3605-_j1GZJU_d=gyS19Ay8v3tUv5uQ@mail.gmail.com>

Try with debugging output, perhaps it explains the error?

$ gdalinfo --debug on /data/tmp/2011-01.grib
GRIB: Problems with ReadGrib1Record called by ReadGrib2Record
Inside ReadGrib1Record
GRIB1 GDS: Expect PV = 255 != 33

ERROR 4: /data/tmp/2011-01.grib is a grib file, but no raster dataset
was successfully identified.
gdalinfo failed - unable to open '/data/tmp/2011-01.grib'.


On Wed, Feb 15, 2012 at 6:08 AM, SupportLists <supportlists@qlands.com> wrote:
> As far as I know is a raster.
>
> You can get it from:
>
> http://www.qlands.com/other_files/2011-01.grib
>
> This grib is only one record from the whole file and it contains maximum
> temperature for the whole world.
>
> The following is the wgrib ./2011-01.grib -V? of the file
>
> rec 1:0:date 2011010100 MX2T kpds5=201 kpds6=1 kpds7=0 levels=(0,0) grid=255
> sfc ECext=1 class=14 type=9 stream=1025 Version=0001 valid 0-3hr:
> ? MX2T=Maximum temperature at 2 metres since previous post-processing [K]
> ? timerange 2 P1 0 P2 3 TimeU 1? nx -1 ny 256 GDS grid 4 num_in_ave 0
> missing 0
> ? center 98 subcenter 0 process 128 Table 128 scan: WE:NS winds(N/S)
> ? thinned gaussian: lat? 89.462000 to -89.462000
> ????????? long 0.000000 to 359.296000, 88838 grid pts?? (-1 x 256) scan 0
> mode 0 bdsgrid 1
> ????? 18?? 25?? 36?? 40?? 45?? 50?? 60?? 64?? 72?? 72?? 80?? 90?? 90? 100
> 108
> ???? 120? 120? 125? 128? 144? 144? 150? 160? 160? 180? 180? 180? 192? 192
> 200
> ???? 216? 216? 216? 225? 240? 240? 240? 250? 250? 256? 270? 270? 288? 288
> 288
> ???? 300? 300? 320? 320? 320? 320? 324? 360? 360? 360? 360? 360? 360? 360
> 375
> ???? 375? 375? 375? 384? 384? 400? 400? 400? 400? 405? 432? 432? 432? 432
> 432
> ???? 432? 432? 450? 450? 450? 450? 450? 480? 480? 480? 480? 480? 480? 480
> 480
> ???? 480? 480? 486? 486? 486? 500? 500? 500? 500? 500? 500? 500? 512? 512
> 512
> ???? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512
> 512
> ???? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512
> 512
> ???? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512? 512
> 512
> ???? 512? 512? 512? 512? 500? 500? 500? 500? 500? 500? 500? 486? 486? 486
> 480
> ???? 480? 480? 480? 480? 480? 480? 480? 480? 480? 450? 450? 450? 450? 450
> 432
> ???? 432? 432? 432? 432? 432? 432? 405? 400? 400? 400? 400? 384? 384? 375
> 375
> ???? 375? 375? 360? 360? 360? 360? 360? 360? 360? 324? 320? 320? 320? 320
> 300
> ???? 300? 288? 288? 288? 270? 270? 256? 250? 250? 240? 240? 240? 225? 216
> 216
> ???? 216? 200? 192? 192? 180? 180? 180? 160? 160? 150? 144? 144? 128? 125
> 120
> ???? 120? 108? 100?? 90?? 90?? 80?? 72?? 72?? 64?? 60?? 50?? 45?? 40?? 36
> 25
> ????? 18
> ? min/max data 223.996 316.531? num bits 16? BDS_Ref 223.996? DecScale 0
> BinScale -9
>
> Many thanks,
> Carlos
>
>
> On 02/15/2012 10:44 AM, Brian Case wrote:
>
> On Wed, 2012-02-15 at 09:10 +0300, SupportLists wrote:
>
> Carlos
>
> is it raster or vector data?
>
> can you make the file accessible some place?
>
> Brian
>
> Hi,
>
> I am trying to open a grib file (meteorological data) with GDAL 1.8.1
> but i get the following error:
>
> ./2011.grib is a grib file, but no raster dataset was successfully
> identified.
> gdalinfo failed - unable to open './2011.grib'
>
> Other tools like wgrib successfully opens the same file.
>
> Any idea what is wrong?
>
> Thanks,
> Carlos.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From emmanuel.sambale at gmail.com  Wed Feb 15 07:19:43 2012
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Wed Feb 15 07:20:50 2012
Subject: [gdal-dev] gdal 1.9 binaries for ubuntu natty 11.04
Message-ID: <CAPzumuHFbP1hEw-mZQ3syhqpH6L5Sxfz4reDb1Lr7EgE2nAnNQ@mail.gmail.com>

As the subject, do we have ubuntu natty 11.04 binaries for 1.9? The
ubuntugis repo only provides 1.9 in Lucid [0]

[0] https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable/+packages

-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
From etourigny.dev at gmail.com  Wed Feb 15 07:27:37 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Feb 15 07:27:59 2012
Subject: [gdal-dev] gdal 1.9 binaries for ubuntu natty 11.04
In-Reply-To: <CAPzumuHFbP1hEw-mZQ3syhqpH6L5Sxfz4reDb1Lr7EgE2nAnNQ@mail.gmail.com>
References: <CAPzumuHFbP1hEw-mZQ3syhqpH6L5Sxfz4reDb1Lr7EgE2nAnNQ@mail.gmail.com>
Message-ID: <CA+TxYvPsmfvzfsJc_jHRjS5=fp6NsT-sC3MaonJkFGqsvcR_0A@mail.gmail.com>

Not yet, but soon.

This question probably belongs in the ubuntu mailing list at osgeo, though.

Here is the answer to your question:
http://www.osgeo.org/pipermail/ubuntu/2012-February/000470.html

Etienne

On Wed, Feb 15, 2012 at 10:19 AM, maning sambale
<emmanuel.sambale@gmail.com> wrote:
> As the subject, do we have ubuntu natty 11.04 binaries for 1.9? The
> ubuntugis repo only provides 1.9 in Lucid [0]
>
> [0] https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable/+packages
>
> --
> cheers,
> maning
> ------------------------------------------------------
> "Freedom is still the most radical idea of all" -N.Branden
> wiki: http://esambale.wikispaces.com/
> blog: http://epsg4253.wordpress.com/
> ------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From emmanuel.sambale at gmail.com  Wed Feb 15 07:36:41 2012
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Wed Feb 15 07:37:48 2012
Subject: [gdal-dev] gdal 1.9 binaries for ubuntu natty 11.04
In-Reply-To: <CA+TxYvPsmfvzfsJc_jHRjS5=fp6NsT-sC3MaonJkFGqsvcR_0A@mail.gmail.com>
References: <CAPzumuHFbP1hEw-mZQ3syhqpH6L5Sxfz4reDb1Lr7EgE2nAnNQ@mail.gmail.com>
	<CA+TxYvPsmfvzfsJc_jHRjS5=fp6NsT-sC3MaonJkFGqsvcR_0A@mail.gmail.com>
Message-ID: <CAPzumuHX0LaZtXL+xv6+7K_V2r1GMQkLw3owN3sTpnRK3Kv3Gg@mail.gmail.com>

Great! Thanks!

On Wed, Feb 15, 2012 at 8:27 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Not yet, but soon.
>
> This question probably belongs in the ubuntu mailing list at osgeo, though.
>
> Here is the answer to your question:
> http://www.osgeo.org/pipermail/ubuntu/2012-February/000470.html
>
> Etienne
>
> On Wed, Feb 15, 2012 at 10:19 AM, maning sambale
> <emmanuel.sambale@gmail.com> wrote:
>> As the subject, do we have ubuntu natty 11.04 binaries for 1.9? The
>> ubuntugis repo only provides 1.9 in Lucid [0]
>>
>> [0] https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable/+packages
>>
>> --
>> cheers,
>> maning
>> ------------------------------------------------------
>> "Freedom is still the most radical idea of all" -N.Branden
>> wiki: http://esambale.wikispaces.com/
>> blog: http://epsg4253.wordpress.com/
>> ------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
From eadam at co.lincoln.or.us  Wed Feb 15 10:51:28 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed Feb 15 10:52:01 2012
Subject: [gdal-dev] OGR SQL CAST and field name alias selects incorrect
	fields in some cases
Message-ID: <CACqBkM-ioNtOxJydbnEwe_=Fjg=6nrzsV4n2NWJnZP5kL61ahg@mail.gmail.com>

Hi all,

I'm trying to use OGR SQL to CAST and field name aliasing together and
getting incorrect results (or issuing incorrect commands) when
combined with two LEFT JOINs on MDB (both ODBC and MDB drivers).  The
results are incorrect in that the fields are populated with incorrect
information, specially, filling it with other fields that are not
selected at all.  I'm seeing this in windows close to trunk (ODBC) and
a statically compiled ubuntu 10.04 trunk from a few months ago (Access
MDB/Java/Jackess).  The data is somewhat messy so it could be a case
of ambiguous table/query names after some shortening is applied or
something similar although nothing jumps out in that regard to me.
Both the tables that are joined to have a field named DocumentName.
Also, the way I am using the CAST in this case isn't needed but I ran
into it and wanted to report it.

The simple case works as I expect:
ogr2ogr surveys_simply_cast2.shp Surveys.shp -sql "SELECT
CAST(surveyid AS character(255)) AS surveyid_alias, COMMENT FROM
Surveys" Warning 6: Normalized/laundered field name: 'surveyid_alias'
to 'surveyid_a'

Specifically, I get a field named surveyid_a that is character 255 and
has the correct content:
ogrinfo -al -so surveys_simply_cast2.shp surveys_simply_cast2
...
surveyid_a: String (255.0)
COMMENT: String (15.0)


Now I try the same thing with two LEFT JOINs to mdb/ODBC:
ogr2ogr surveys_output_two_fields.shp Surveys.shp -sql "SELECT
CAST(webimage AS character(255)) AS webimage_1,  CAST(SubdivisionName
AS character(255)) AS Subdivisio FROM Surveys LEFT JOIN
'ODBC:cygwinSurveys'.Local_Survey_Image ON
Surveys.surveyid=Local_Survey_Image.DocumentName LEFT JOIN
'ODBC:cygwinSurveys'.Survey ON Surveys.surveyid=Survey.DocumentName"

Warning 6: Field FileDate create as date field, though DateTime requested.

This gives me the fields that I expect:
ogrinfo -al -so surveys_output_two_fields.shp surveys_output_two_fields
...
webimage_1: String (255.0)
Subdivisio: String (255.0)

However, they are populated with incorrect information.  The field
webimage_1 is filled with values from the field
cygwinSurveys.Survey.Comments.  The field Subdivisio is filled with
values from cygwinSurveys.Survey.ImagePilot (or Net_PDF - yes there
are two fields with identical information).  Adding --debug ON shows
that these tables don't have FID columns (I could not see all the
debug content but that seemed to be the only non-routine information):
OGR_ODBC: Table Local_Survey_Image has no identified FID column.
...

On Ubuntu, the results are the same, my command is:
LD_LIBRARY_PATH=.:/usr/lib/jvm/java-6-openjdk/jre/lib/i386/client
ogr2ogr  /tmp/surveys_etl/surveys.shp /tmp/surveys_etl/Surveys.shp
-sql " SELECT Surveys.surveyid AS SURVEYID,DocumentName AS
DocumentNa,SurveyorKey as SurveyorKe,CAST(webimage AS character(255))
AS webimage_1,FileDate,Client, SurveyType,ClerkNumber AS
ClerkNumbe,CAST(SubdivisionName AS character(255)) AS Subdivisio FROM
Surveys LEFT JOIN '/tmp/surveys_etl/Surveys.mdb'.Survey ON
Surveys.surveyid=Survey.DocumentName LEFT JOIN
'/tmp/surveys_etl/Surveys.mdb'.Local_Survey_Image ON
Surveys.surveyid=Local_Survey_Image.DocumentName"

Excluding the CAST gives the correct results:
ogr2ogr surveys_output_no_cast.shp Surveys.shp -sql "SELECT webimage
AS webimage_1, SubdivisionName AS Subdivisio FROM Surveys LEFT JOIN
'ODBC:cygwinSurveys'.Local_Survey_Image ON
Surveys.surveyid=Local_Survey_Image.DocumentName LEFT JOIN
'ODBC:cygwinSurveys'.Survey ON Surveys.surveyid=Survey.DocumentName"

Trying to reintroduce the CAST with only one join works correctly (for
either join):
ogr2ogr surveys_output_singel_join.shp Surveys.shp -sql "SELECT
CAST(webimage AS character(255)) AS webimage_1 FROM Surveys LEFT JOIN
'ODBC:cygwinSurveys'.Local_Survey_Image ON
Surveys.surveyid=Local_Survey_Image.DocumentName"

ogr2ogr surveys_output_singleb.shp Surveys.shp -sql "SELECT
CAST(SubdivisionName AS character(255)) AS Subdivisio FROM Surveys
LEFT JOIN 'ODBC:cygwinSurveys'.Survey ON
Surveys.surveyid=Survey.DocumentName"

I can package this up for download by anyone interested, just contact
me offline for the link.  (I can also include the statically compiled
binary as well although it may only work on Ubuntu 10.04 with
Java/Jackess/etc and called setting LD_LIBRARY_PATH.)

Bests, Eli
From chaitanya.ch at gmail.com  Wed Feb 15 13:04:58 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 15 13:05:14 2012
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <EC150AEA7E294A9681AD792B016BB531@BobPC>
References: <B8B7F192430A4712BC447E4529317630@BobPC>
	<4F3AA796.3040501@otg-nc.com>
	<EC150AEA7E294A9681AD792B016BB531@BobPC>
Message-ID: <CAMKgpObizbTRGgsnCyDVfSBVmyvRvMs_ysC2_BOFga_zOzZOzw@mail.gmail.com>

Bob,
Since it is a layer *creation* option, it is only set when creating a
layer. Otherwise, they could interfere with existing data's validity. In
this case, there may be features with dim=3.

If you want to set the dimension of the created layer, there should be a
more elegant way than this. If you know the SQL command to set the
dimension, use "ogrinfo -sql <command> datasource".

On Wed, Feb 15, 2012 at 12:26 AM, Bob Pawley <rjpawley@shaw.ca> wrote:

>   I am trying to add columns to a table (which I am able to do), then add
> a trigger to that table in order to trigger an existing function.
>
> My basic problem is that the ogr2ogr switch (ie: ?lco Dim=2) appear to
> only work with an -overwrite. They don?t seem to work with an -append.
>
> As -overwrite drops the existing table, as well as its trigger, I need to
> replace the trigger after the table is restored.
>
> Does this make sense?
>
> Perhaps there is another way of doing this?
>
> Bob
>
>
>
>  *From:* Chander Ganesan <chander@otg-nc.com>
> *Sent:* Tuesday, February 14, 2012 10:27 AM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] ogr2ogr
>
> I'm not certain what you are trying to do, but...
>
> Consider the SQL "UNION", "UNION ALL", "INTERSECT", or "INTERSECT ALL"
> statements perhaps?  They allow you to combine the results of two queries
> into a single result set (as a single query.)
>
> Chander
>
> On 2/14/12 1:24 PM, Bob Pawley wrote:
>
>  Is there a method of having two ?sql commands in one command prompt
> execution.
>
> I have attempted
>
> 1. ?sql ?first statement ? ?sql ?second?
>
> 2. ?sql ?first; second?
>
> 3. sql ?first ? ?second?
>
> 4. ?sql ?first? ?overwrite ?skipfailures -sql ?second? (an attempt to
> separate the two).
>
> Bob
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>  ------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120215/806dc791/attachment.html
From armin.burger at gmx.net  Wed Feb 15 13:52:21 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Feb 15 13:52:34 2012
Subject: [gdal-dev] Using VRT images with derived bands (pixel function)
	with MapServer
Message-ID: <4F3BFEE5.8090900@gmx.net>

Dear all

I would be interested in using VRT images with "derived bands" as 
described on the VRT image documentation page. This requires the 
definition of a pixel function and the registration of this function in 
the used application via "GDALAddDerivedBandPixelFunc".

The provided sample function is already towards what I'm looking for. I 
would just need to adapt it accordingly (calculating band 1 as 
combination of source band 1 and 3).

Since my main interest is to use such image definition in the context of 
Mapserver, my question is if there could be a way to use this also from 
Mapserver as application? If yes, where would I need to register the 
function and how would I best make the function available to Mapserver 
(maybe via an .o file that is created when compiling)? Maybe somewhere 
inside mapgdal.c ?

Would such a pixel function be used also in case when not the full 
resolution image (i.e. TIFF file referenced in the VRT file) is read but 
one of the overviews from the .ovr file associated to the Tiff file?

Thanks in advance for any hints

Armin
From newmanw10 at gmail.com  Wed Feb 15 16:28:05 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Wed Feb 15 16:29:10 2012
Subject: [gdal-dev] Errors in NITF gdal 1.8.1
Message-ID: <CAD34qgmOwC0MGj7n4P-W1RMcuX=z4suqmfXQj_t68nJxZW+5jA@mail.gmail.com>

I am getting the following warnings/errors when try to open/read NITF files
using gdal 1.8.1.  Wondering if anyone has seen these before and can tell
me what they mean.

Warning 1: Block start for block 0 is wrong. Retrying with one extra byte
shift.

Error 1: For <file_path>, assert sizeX == ds_sizeX failed.

I don't remember seeing this issue with 1.7.3.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120215/7dd322c3/attachment.html
From even.rouault at mines-paris.org  Wed Feb 15 17:01:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 15 17:01:40 2012
Subject: [gdal-dev] Errors in NITF gdal 1.8.1
In-Reply-To: <CAD34qgmOwC0MGj7n4P-W1RMcuX=z4suqmfXQj_t68nJxZW+5jA@mail.gmail.com>
References: <CAD34qgmOwC0MGj7n4P-W1RMcuX=z4suqmfXQj_t68nJxZW+5jA@mail.gmail.com>
Message-ID: <201202152301.06376.even.rouault@mines-paris.org>

Le mercredi 15 f?vrier 2012 22:28:05, Billy Newman a ?crit :
> I am getting the following warnings/errors when try to open/read NITF files
> using gdal 1.8.1.  Wondering if anyone has seen these before and can tell
> me what they mean.
> 
> Warning 1: Block start for block 0 is wrong. Retrying with one extra byte
> shift.
> 
> Error 1: For <file_path>, assert sizeX == ds_sizeX failed.
> 
> I don't remember seeing this issue with 1.7.3.
> 
> Thanks

You tried to open the A.TOC file, right ? It would be helpfull if you could 
provide the data that triggered that. A quick look at the relevant code 
doesn't seem to show any significant difference between 1.7.3 and 1.8.1
From warmerdam at pobox.com  Wed Feb 15 17:05:01 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 15 17:05:46 2012
Subject: [gdal-dev] Errors in NITF gdal 1.8.1
In-Reply-To: <CAD34qgmOwC0MGj7n4P-W1RMcuX=z4suqmfXQj_t68nJxZW+5jA@mail.gmail.com>
References: <CAD34qgmOwC0MGj7n4P-W1RMcuX=z4suqmfXQj_t68nJxZW+5jA@mail.gmail.com>
Message-ID: <CA+YzLBcpRZ8JEnZVbw-xq1Jeny4pdgh61XmfycPr4k=J0uN5jg@mail.gmail.com>

On Wed, Feb 15, 2012 at 1:28 PM, Billy Newman <newmanw10@gmail.com> wrote:
> I am getting the following warnings/errors when try to open/read NITF files
> using gdal 1.8.1.? Wondering if anyone has seen these before and can tell me
> what they mean.
>
> Warning 1: Block start for block 0 is wrong. Retrying with one extra byte
> shift.
>
> Error 1: For <file_path>, assert sizeX == ds_sizeX failed.
>
> I don't remember seeing this issue with 1.7.3.

Billy,

The message about ds_sizeX comes out of the RPFTOC parser
and presumably relates to the NITF tile size not matching the size
expected from the TOC though I'm not familiar with this code.

I'd suggest trying again with 1.9.0 and see if things work there.
If not, if you can provide the data Even or I could likely look into
the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From armin.burger at gmx.net  Thu Feb 16 04:15:58 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Feb 16 04:16:49 2012
Subject: [gdal-dev] Using VRT images with derived bands (pixel function)
	with MapServer
In-Reply-To: <2178537.RaybmGH96k@tatras>
References: <4F3BFEE5.8090900@gmx.net> <2178537.RaybmGH96k@tatras>
Message-ID: <20120216091558.313770@gmx.net>

Yves

thanks a lot for the help. 

So it is sufficient to add SetEnv GDAL_DRIVER_PATH ..., place the file with the pixel function there, and Mapserver can find pixel function referenced in the VRT file? What kind of compilation did you use? Create a shared library *.so or is the *.o object file sufficient? 

Armin


-------- Original-Nachricht --------
> Datum: Thu, 16 Feb 2012 09:31:11 +0100
> Von: Yves Jacolin <yjacolin@free.fr>
> An: gdal-dev@lists.osgeo.org, armin.burger@gmx.net
> Betreff: Re: [gdal-dev] Using VRT images with derived bands (pixel function) with MapServer

> Armin,
> 
> I am using such application stack: netcdf > vrt and pixel functions > GDAL
> > 
> MapServer
> 
> We have a tiled layer inside PostGIS and we juste configure the layer like
> all 
> other tiled datasource:
> 
> LAYER
>  STATUS ON
>  NAME "layer_idx"
>  TYPE POLYGON
>  CONNECTION "dbname=mydb host=localhost user=myUser password=mypassword"
>  CONNECTIONTYPE postgis
>  DATA "the_geom FROM myLayer USING srid=4326"
>  PROJECTION
>   "init=epsg:4326"
>  END
>  METADATA
>    "wms_srs"   "EPSG:4326"
>    "wms_timeextent" "2010-12-20/2010-12-26"
>    "wms_timeitem" "datetime" #column in postgis table of type timestamp
>    "wms_timedefault" "2010-12-24T00:00:00Z"
>    "wms_enable_request" "*"
>  END
> END
> 
> If you want to use the vrt file directly it is also possible as easily as:
> DATA "vrt/myLayer.vrt"
> 
> About register the plugin, in Apache config you have to use SetEnv this
> way:
>    SetEnv GDAL_DRIVER_PATH  directory/mapserver/misc
>    SetEnv MS_MAPFILE directory/mapserver/mymapfile.map
>    SetEnv MS_MAPFILE_PATTERN "^directory/mapserver/mymapfile.map"
> 
> Hth,
> 
> Y.
> 
> Le Mercredi 15 F?vrier 2012 19:52:21 Armin Burger a ?crit :
> > Dear all
> > 
> > I would be interested in using VRT images with "derived bands" as
> > described on the VRT image documentation page. This requires the
> > definition of a pixel function and the registration of this function in
> > the used application via "GDALAddDerivedBandPixelFunc".
> > 
> > The provided sample function is already towards what I'm looking for. I
> > would just need to adapt it accordingly (calculating band 1 as
> > combination of source band 1 and 3).
> > 
> > Since my main interest is to use such image definition in the context of
> > Mapserver, my question is if there could be a way to use this also from
> > Mapserver as application? If yes, where would I need to register the
> > function and how would I best make the function available to Mapserver
> > (maybe via an .o file that is created when compiling)? Maybe somewhere
> > inside mapgdal.c ?
> > 
> > Would such a pixel function be used also in case when not the full
> > resolution image (i.e. TIFF file referenced in the VRT file) is read but
> > one of the overviews from the .ovr file associated to the Tiff file?
> > 
> > Thanks in advance for any hints
> > 
> > Armin
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> Yves Jacolin
> 
> http://yjacolin.gloobe.org

-- 
Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
From yjacolin at free.fr  Thu Feb 16 03:31:11 2012
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu Feb 16 10:41:09 2012
Subject: [gdal-dev] Using VRT images with derived bands (pixel function)
	with MapServer
In-Reply-To: <4F3BFEE5.8090900@gmx.net>
References: <4F3BFEE5.8090900@gmx.net>
Message-ID: <2178537.RaybmGH96k@tatras>

Armin,

I am using such application stack: netcdf > vrt and pixel functions > GDAL > 
MapServer

We have a tiled layer inside PostGIS and we juste configure the layer like all 
other tiled datasource:

LAYER
 STATUS ON
 NAME "layer_idx"
 TYPE POLYGON
 CONNECTION "dbname=mydb host=localhost user=myUser password=mypassword"
 CONNECTIONTYPE postgis
 DATA "the_geom FROM myLayer USING srid=4326"
 PROJECTION
  "init=epsg:4326"
 END
 METADATA
   "wms_srs"   "EPSG:4326"
   "wms_timeextent" "2010-12-20/2010-12-26"
   "wms_timeitem" "datetime" #column in postgis table of type timestamp
   "wms_timedefault" "2010-12-24T00:00:00Z"
   "wms_enable_request" "*"
 END
END

If you want to use the vrt file directly it is also possible as easily as:
DATA "vrt/myLayer.vrt"

About register the plugin, in Apache config you have to use SetEnv this way:
   SetEnv GDAL_DRIVER_PATH  directory/mapserver/misc
   SetEnv MS_MAPFILE directory/mapserver/mymapfile.map
   SetEnv MS_MAPFILE_PATTERN "^directory/mapserver/mymapfile.map"

Hth,

Y.

Le Mercredi 15 F?vrier 2012 19:52:21 Armin Burger a ?crit :
> Dear all
> 
> I would be interested in using VRT images with "derived bands" as
> described on the VRT image documentation page. This requires the
> definition of a pixel function and the registration of this function in
> the used application via "GDALAddDerivedBandPixelFunc".
> 
> The provided sample function is already towards what I'm looking for. I
> would just need to adapt it accordingly (calculating band 1 as
> combination of source band 1 and 3).
> 
> Since my main interest is to use such image definition in the context of
> Mapserver, my question is if there could be a way to use this also from
> Mapserver as application? If yes, where would I need to register the
> function and how would I best make the function available to Mapserver
> (maybe via an .o file that is created when compiling)? Maybe somewhere
> inside mapgdal.c ?
> 
> Would such a pixel function be used also in case when not the full
> resolution image (i.e. TIFF file referenced in the VRT file) is read but
> one of the overviews from the .ovr file associated to the Tiff file?
> 
> Thanks in advance for any hints
> 
> Armin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From yjacolin at free.fr  Thu Feb 16 12:30:32 2012
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Thu Feb 16 12:30:48 2012
Subject: [gdal-dev] Using VRT images with derived bands (pixel function)
	with MapServer
In-Reply-To: <20120216091558.313770@gmx.net>
References: <4F3BFEE5.8090900@gmx.net> <2178537.RaybmGH96k@tatras>
	<20120216091558.313770@gmx.net>
Message-ID: <201202161830.33113.yjacolin@free.fr>

Hello,

I used the Makefile file in an archive I found in a GDAL ticket. So I guess I am 
using a .so file.

Y.
Le jeudi 16 f?vrier 2012 10:15:58, Armin Burger a ?crit :
> Yves
> 
> thanks a lot for the help.
> 
> So it is sufficient to add SetEnv GDAL_DRIVER_PATH ..., place the file with
> the pixel function there, and Mapserver can find pixel function referenced
> in the VRT file? What kind of compilation did you use? Create a shared
> library *.so or is the *.o object file sufficient?
> 
> Armin
> 
> 
> -------- Original-Nachricht --------
> 
> > Datum: Thu, 16 Feb 2012 09:31:11 +0100
> > Von: Yves Jacolin <yjacolin@free.fr>
> > An: gdal-dev@lists.osgeo.org, armin.burger@gmx.net
> > Betreff: Re: [gdal-dev] Using VRT images with derived bands (pixel
> > function) with MapServer
> > 
> > Armin,
> > 
> > I am using such application stack: netcdf > vrt and pixel functions >
> > GDAL
> > 
> > MapServer
> > 
> > We have a tiled layer inside PostGIS and we juste configure the layer
> > like all
> > other tiled datasource:
> > 
> > LAYER
> > 
> >  STATUS ON
> >  NAME "layer_idx"
> >  TYPE POLYGON
> >  CONNECTION "dbname=mydb host=localhost user=myUser password=mypassword"
> >  CONNECTIONTYPE postgis
> >  DATA "the_geom FROM myLayer USING srid=4326"
> >  PROJECTION
> >  
> >   "init=epsg:4326"
> >  
> >  END
> >  METADATA
> >  
> >    "wms_srs"   "EPSG:4326"
> >    "wms_timeextent" "2010-12-20/2010-12-26"
> >    "wms_timeitem" "datetime" #column in postgis table of type timestamp
> >    "wms_timedefault" "2010-12-24T00:00:00Z"
> >    "wms_enable_request" "*"
> >  
> >  END
> > 
> > END
> > 
> > If you want to use the vrt file directly it is also possible as easily
> > as: DATA "vrt/myLayer.vrt"
> > 
> > About register the plugin, in Apache config you have to use SetEnv this
> > 
> > way:
> >    SetEnv GDAL_DRIVER_PATH  directory/mapserver/misc
> >    SetEnv MS_MAPFILE directory/mapserver/mymapfile.map
> >    SetEnv MS_MAPFILE_PATTERN "^directory/mapserver/mymapfile.map"
> > 
> > Hth,
> > 
> > Y.
> > 
> > Le Mercredi 15 F?vrier 2012 19:52:21 Armin Burger a ?crit :
> > > Dear all
> > > 
> > > I would be interested in using VRT images with "derived bands" as
> > > described on the VRT image documentation page. This requires the
> > > definition of a pixel function and the registration of this function in
> > > the used application via "GDALAddDerivedBandPixelFunc".
> > > 
> > > The provided sample function is already towards what I'm looking for. I
> > > would just need to adapt it accordingly (calculating band 1 as
> > > combination of source band 1 and 3).
> > > 
> > > Since my main interest is to use such image definition in the context
> > > of Mapserver, my question is if there could be a way to use this also
> > > from Mapserver as application? If yes, where would I need to register
> > > the function and how would I best make the function available to
> > > Mapserver (maybe via an .o file that is created when compiling)? Maybe
> > > somewhere inside mapgdal.c ?
> > > 
> > > Would such a pixel function be used also in case when not the full
> > > resolution image (i.e. TIFF file referenced in the VRT file) is read
> > > but one of the overviews from the .ovr file associated to the Tiff
> > > file?
> > > 
> > > Thanks in advance for any hints
> > > 
> > > Armin
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin
From solomon.gibbs at gmail.com  Thu Feb 16 13:21:18 2012
From: solomon.gibbs at gmail.com (Solomon Gibbs)
Date: Thu Feb 16 13:21:40 2012
Subject: [gdal-dev] Loading a scaled rawfile via VRT
Message-ID: <CANGO4PYAsxjh=L74B-2JYQtPtq7mnh15OFfUAusDU2_Vya1GCQ@mail.gmail.com>

I have raw data stored as UInt16 that needs to be scaled by a
(floating point) calibration factor and presented as Float32. I can
successfully load the UInt data using VRTRawRasterBand and scale it
using VRT ComplexSource. However, this seems to mean creating two
separate VRT datasets and files.

Is there any way to combine loading raw data and scaling to a floating
point value into a single dataset definition?
From anton.korosov at nersc.no  Thu Feb 16 13:42:12 2012
From: anton.korosov at nersc.no (anton.korosov@nersc.no)
Date: Thu Feb 16 13:42:58 2012
Subject: [gdal-dev] Loading a scaled rawfile via VRT
In-Reply-To: <CANGO4PYAsxjh=L74B-2JYQtPtq7mnh15OFfUAusDU2_Vya1GCQ@mail.gmail.com>
References: <CANGO4PYAsxjh=L74B-2JYQtPtq7mnh15OFfUAusDU2_Vya1GCQ@mail.gmail.com>
Message-ID: <3a4ee0302f786ae9a24fc2eca3bdeb38.squirrel@ice.nersc.no>

Hi Solomon,

I believe you can just specify the following tag within the ComplexSource:

<SourceProperties RasterXSize="512" RasterYSize="512" DataType="Byte"
BlockXSize="128" BlockYSize="128"/> (of course setting the correct values)
In this tag you can explicitly indicate the type of the source.

For a more definite answer can you please give an example of the two VRT
files that you create.

Anton

> I have raw data stored as UInt16 that needs to be scaled by a
> (floating point) calibration factor and presented as Float32. I can
> successfully load the UInt data using VRTRawRasterBand and scale it
> using VRT ComplexSource. However, this seems to mean creating two
> separate VRT datasets and files.
>
> Is there any way to combine loading raw data and scaling to a floating
> point value into a single dataset definition?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Thu Feb 16 14:13:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 16 14:14:29 2012
Subject: [gdal-dev] OGR SQL CAST and field name alias selects incorrect
	fields in some cases
In-Reply-To: <CACqBkM-ioNtOxJydbnEwe_=Fjg=6nrzsV4n2NWJnZP5kL61ahg@mail.gmail.com>
References: <CACqBkM-ioNtOxJydbnEwe_=Fjg=6nrzsV4n2NWJnZP5kL61ahg@mail.gmail.com>
Message-ID: <201202162013.38304.even.rouault@mines-paris.org>

Le mercredi 15 f?vrier 2012 16:51:28, Eli Adam a ?crit :
> Hi all,
> 
> I'm trying to use OGR SQL to CAST and field name aliasing together and
> getting incorrect results (or issuing incorrect commands) when
> combined with two LEFT JOINs on MDB (both ODBC and MDB drivers).  The
> results are incorrect in that the fields are populated with incorrect
> information, specially, filling it with other fields that are not
> selected at all.

The issue was not specific to those drivers, but indeed when multiple JOINs and 
expression based on field names were involved. It should now be fixed by the 
commits referenced in http://trac.osgeo.org/gdal/ticket/4521 .
From solomon.gibbs at gmail.com  Thu Feb 16 14:13:49 2012
From: solomon.gibbs at gmail.com (Solomon Gibbs)
Date: Thu Feb 16 14:14:35 2012
Subject: [gdal-dev] Loading a scaled rawfile via VRT
In-Reply-To: <3a4ee0302f786ae9a24fc2eca3bdeb38.squirrel@ice.nersc.no>
References: <CANGO4PYAsxjh=L74B-2JYQtPtq7mnh15OFfUAusDU2_Vya1GCQ@mail.gmail.com>
	<3a4ee0302f786ae9a24fc2eca3bdeb38.squirrel@ice.nersc.no>
Message-ID: <CANGO4PZ2KNdBh13Bb1+quvLqQ=-a1WDXTKR+E47B0HunC1dPig@mail.gmail.com>

Sure. Here is what I am trying to do.

The raw data has some junk on the front end of the file that needs to
be skipped:
<VRTDataset rasterXSize="1476" rasterYSize="1784">
 <VRTRasterBand band="1" dataType="UInt16" subClass="VRTRawRasterBand">
   <SourceFilename relativetoVRT="1">xxxxxxx</SourceFilename>
   <ImageOffset>9587</ImageOffset>
   <PixelOffset>2</PixelOffset>
   <LineOffset>2952</LineOffset>
   <ByteOrder>MSB</ByteOrder>
 </VRTRasterBand>
</VRTDataset>

Then, apply the scaling factor:
<VRTDataset rasterXSize="1476" rasterYSize="1784">
<VRTRasterBand dataType="Float32">
 <ComplexSource>
   <SourceFilename relativeToVRT="1">xxxxxxx.vrt</SourceFilename>
   <SourceBand>1</SourceBand>
   <ScaleOffset>0</ScaleOffset>
   <ScaleRatio>0.707</ScaleRatio>
 </ComplexSource>
</VRTRasterBand>
</VRTDataset>

So, I'm not clear if the SourceProperties tag can be used to define
the offset as well as the raster definition as you suggest. I was
hoping to maybe be able to nest the RawRasterBand under the
ComplexSource in place of the SourceFilename, but that hasn't worked
for me so far.

On Thu, Feb 16, 2012 at 1:42 PM,  <anton.korosov@nersc.no> wrote:
> Hi Solomon,
>
> I believe you can just specify the following tag within the ComplexSource:
>
> <SourceProperties RasterXSize="512" RasterYSize="512" DataType="Byte"
> BlockXSize="128" BlockYSize="128"/> (of course setting the correct values)
> In this tag you can explicitly indicate the type of the source.
>
> For a more definite answer can you please give an example of the two VRT
> files that you create.
>
> Anton
>
>> I have raw data stored as UInt16 that needs to be scaled by a
>> (floating point) calibration factor and presented as Float32. I can
>> successfully load the UInt data using VRTRawRasterBand and scale it
>> using VRT ComplexSource. However, this seems to mean creating two
>> separate VRT datasets and files.
>>
>> Is there any way to combine loading raw data and scaling to a floating
>> point value into a single dataset definition?
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From armin.burger at gmx.net  Thu Feb 16 14:41:24 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Feb 16 14:42:02 2012
Subject: [gdal-dev] Using VRT images with derived bands (pixel function)
	with MapServer
In-Reply-To: <201202161830.33113.yjacolin@free.fr>
References: <4F3BFEE5.8090900@gmx.net> <2178537.RaybmGH96k@tatras>
	<20120216091558.313770@gmx.net>
	<201202161830.33113.yjacolin@free.fr>
Message-ID: <4F3D5BE4.3070501@gmx.net>

Hello Yves

I succeeded to get it running with Mapserver, after some testing and 
additional settings also with PHP MapScript. For others who might be 
interested in the various steps, I added a short how-to to the Mapserver 
Wiki, see

http://trac.osgeo.org/mapserver/wiki/RasterVrtDerivedBands

Thanks again for the help!

Armin


On 16/02/2012 18:30, Yves Jacolin (free) wrote:
> Hello,
>
> I used the Makefile file in an archive I found in a GDAL ticket. So I guess I am
> using a .so file.
>
> Y.
> Le jeudi 16 f?vrier 2012 10:15:58, Armin Burger a ?crit :
>> Yves
>>
>> thanks a lot for the help.
>>
>> So it is sufficient to add SetEnv GDAL_DRIVER_PATH ..., place the file with
>> the pixel function there, and Mapserver can find pixel function referenced
>> in the VRT file? What kind of compilation did you use? Create a shared
>> library *.so or is the *.o object file sufficient?
>>
>> Armin
>>
>>
>> -------- Original-Nachricht --------
>>
>>> Datum: Thu, 16 Feb 2012 09:31:11 +0100
>>> Von: Yves Jacolin<yjacolin@free.fr>
>>> An: gdal-dev@lists.osgeo.org, armin.burger@gmx.net
>>> Betreff: Re: [gdal-dev] Using VRT images with derived bands (pixel
>>> function) with MapServer
>>>
>>> Armin,
>>>
>>> I am using such application stack: netcdf>  vrt and pixel functions>
>>> GDAL
>>>
>>> MapServer
>>>
>>> We have a tiled layer inside PostGIS and we juste configure the layer
>>> like all
>>> other tiled datasource:
>>>
>>> LAYER
>>>
>>>   STATUS ON
>>>   NAME "layer_idx"
>>>   TYPE POLYGON
>>>   CONNECTION "dbname=mydb host=localhost user=myUser password=mypassword"
>>>   CONNECTIONTYPE postgis
>>>   DATA "the_geom FROM myLayer USING srid=4326"
>>>   PROJECTION
>>>
>>>    "init=epsg:4326"
>>>
>>>   END
>>>   METADATA
>>>
>>>     "wms_srs"   "EPSG:4326"
>>>     "wms_timeextent" "2010-12-20/2010-12-26"
>>>     "wms_timeitem" "datetime" #column in postgis table of type timestamp
>>>     "wms_timedefault" "2010-12-24T00:00:00Z"
>>>     "wms_enable_request" "*"
>>>
>>>   END
>>>
>>> END
>>>
>>> If you want to use the vrt file directly it is also possible as easily
>>> as: DATA "vrt/myLayer.vrt"
>>>
>>> About register the plugin, in Apache config you have to use SetEnv this
>>>
>>> way:
>>>     SetEnv GDAL_DRIVER_PATH  directory/mapserver/misc
>>>     SetEnv MS_MAPFILE directory/mapserver/mymapfile.map
>>>     SetEnv MS_MAPFILE_PATTERN "^directory/mapserver/mymapfile.map"
>>>
>>> Hth,
>>>
>>> Y.
>>>
>>> Le Mercredi 15 F?vrier 2012 19:52:21 Armin Burger a ?crit :
>>>> Dear all
>>>>
>>>> I would be interested in using VRT images with "derived bands" as
>>>> described on the VRT image documentation page. This requires the
>>>> definition of a pixel function and the registration of this function in
>>>> the used application via "GDALAddDerivedBandPixelFunc".
>>>>
>>>> The provided sample function is already towards what I'm looking for. I
>>>> would just need to adapt it accordingly (calculating band 1 as
>>>> combination of source band 1 and 3).
>>>>
>>>> Since my main interest is to use such image definition in the context
>>>> of Mapserver, my question is if there could be a way to use this also
>>>> from Mapserver as application? If yes, where would I need to register
>>>> the function and how would I best make the function available to
>>>> Mapserver (maybe via an .o file that is created when compiling)? Maybe
>>>> somewhere inside mapgdal.c ?
>>>>
>>>> Would such a pixel function be used also in case when not the full
>>>> resolution image (i.e. TIFF file referenced in the VRT file) is read
>>>> but one of the overviews from the .ovr file associated to the Tiff
>>>> file?
>>>>
>>>> Thanks in advance for any hints
>>>>
>>>> Armin
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jachym.cepicky at gmail.com  Fri Feb 17 04:31:26 2012
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Fri Feb 17 04:31:53 2012
Subject: [gdal-dev] WFS 1.1 and axis orientation - wrong coordinates
	interpretation
In-Reply-To: <201202092022.50567.even.rouault@mines-paris.org>
References: <4F3417B3.3050302@gmail.com>
	<201202092022.50567.even.rouault@mines-paris.org>
Message-ID: <4F3E1E6E.6000206@gmail.com>

Hi,
sorry for delay

I see the point and I managed to get proper output from the WFS using
ogr2ogr

with

 ogr2ogr okresy.shp
"WFS:http://gis.bnhelp.cz/ows/crwfs?seice=wfs&version=1.1.0&request=getfeature&typename=okresy"
--config GML_INVERT_AXIS_ORDER_IF_LAT_LONG YES --config
GML_CONSIDER_EPSG_AS_URN YES


but, I did not find a way, how to pass those two options to MapServer
Mapfile - any hint there?

+axis (which should IMHO solve the problem too) did not help in the
PROJECTION section

Thanks

Jachym

P.S. I know, this should possibly go the mapserver mailing list, just
trying to continue the thread and hope, it will end successfully - thanks

On 9.2.2012 20:22, Even Rouault wrote:
> Le jeudi 09 f?vrier 2012 20:00:03, Jachym Cepicky a ?crit :
>> Hi,
>>
>> I think, OGR (and therefore MapServer too), is not taking care about
>> axis orientation of incomming data, acting as WFS 1.1 client. Result is
>> flipped data and I do not know, how the software recognizes, that axes
>> order is different (apperently, it does not).
>>
>> We have setuped generic WFS 1.1 server with MapServer (6.0.1). Data are
>> published in WGS84.
>>
>> With very simple request, you get the data and the axis order is Y,X
>> (lat, lon) (imho correct)
>>
>> http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfeature
>> &typename=okresy
>>
>> Now, when try to get this data with OGR and convert them to e.g. Shapefile
>>
>> ogr2ogr okresy.shp
>> "WFS:http://gis.bnhelp.cz/ows/crwfs?service=wfs&version=1.1.0&request=getfe
>> ature&typename=okresy"
>>
>> Resulting shapefile has inverted coordinates  (wrong)
> 
> Jachym ,
> 
> As always with axis ordering issues, the situation is complex. If not already 
> done, I'd encourage you to first carefully read 
> http://gdal.org/ogr/drv_gml.html , and particularly the CRS section.
> 
> I've looked at your server output and I believe this is more a bug (well, this 
> can be discussed) in MapServer than in OGR. The issue is that in its 
> GetFeature output, MapServer indicates  srsName="EPSG:4326" but reports 
> coordinates in lat, long order.
> 
> The GML driver assumes that SRS expressed in EPSG:XXXX form are in long, lat 
> order (which was the convention used in WFS 1.0 where most servers didn't 
> respect the EPSG advertized axis order). Whereas if they are expressed as 
> urn:ogc:EPSG::XXXX (which is now the popular form for WFS 1.1), they are in 
> the axis order expressed by EPSG, which is lat, long in the case of EPSG 4326. 
> I had created http://trac.osgeo.org/mapserver/ticket/3576 about that some time 
> ago.
> 
> When the GML driver recognizes that the coordinates of a SRS are in lat, long 
> order in the GML, it will flip them by default so that the consuming 
> application see them in the usual long, lat order. This can be overriden with 
> the GML_INVERT_AXIS_ORDER_IF_LAT_LONG config option.
> 
> Best regards,
> 
> Even

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: OpenPGP digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120217/e9d75a9a/signature.bin
From zoltans at geograph.co.za  Fri Feb 17 04:31:01 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri Feb 17 04:46:41 2012
Subject: [gdal-dev] Convert ECW to TIFF
Message-ID: <4F3E1E55.4050105@geograph.co.za>

Hi,
I have a bunch of ecw images that I need to convert to tif+worldfile.

I therefore need to recompile gdal against the ecw libraries, but the 
only file I can download from Intergraph/Erdas website is:
ECWJP2SDKSetup_RO_20110303.exe
which is a Windows install of the SDK.

How do I do this for Linux?
(Want to batch convert them on ubuntu 10.04)

On another note, I notice that the xml files received with the ecw 
images only have projection info in them, and not the georeferencing info.
Is the georeferencing info embedded in the ecw files (like geotiff)? I 
tried looking in the ecw file with a binary editor, but saw nothing obvious.

TIA,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From jorgepsantos2002 at gmail.com  Fri Feb 17 05:55:56 2012
From: jorgepsantos2002 at gmail.com (Jorge Santos)
Date: Fri Feb 17 05:56:42 2012
Subject: [gdal-dev] Convert ECW to TIFF
In-Reply-To: <4F3E1E55.4050105@geograph.co.za>
References: <4F3E1E55.4050105@geograph.co.za>
Message-ID: <CAAQ4jq6JC84kwBn7fh4nP2GcetAQBENzFa3BZYFODL6phy-yPg@mail.gmail.com>

Hi Zoltan,

*GDAL_TRANSLATE: CONVERT ECW to GEOTIFF* (type these commands in FWTools
Shell or OSGeo4W Shell):

*ONE FILE*

gdal_translate -of ECW -co TARGET=0 -a_srs EPSG:4326 input.tif output.ecw

*A FOLDER WITH MANY FILES*

for %f in (*.ecw) do gdal_translate -of ECW -co TARGET=0 -a_srs EPSG:4326
%f %~nf.tif

You need to inform the EPSG Code for output files.

EPSG 4326 = Geographic Coordinate System WGS 1984.

Source

http://www.gdal.org/gdal_translate.html

Good Luck! Jorge Santos


2012/2/17 Zoltan Szecsei <zoltans@geograph.co.za>

> Hi,
> I have a bunch of ecw images that I need to convert to tif+worldfile.
>
> I therefore need to recompile gdal against the ecw libraries, but the only
> file I can download from Intergraph/Erdas website is:
> ECWJP2SDKSetup_RO_20110303.exe
> which is a Windows install of the SDK.
>
> How do I do this for Linux?
> (Want to batch convert them on ubuntu 10.04)
>
> On another note, I notice that the xml files received with the ecw images
> only have projection info in them, and not the georeferencing info.
> Is the georeferencing info embedded in the ecw files (like geotiff)? I
> tried looking in the ecw file with a binary editor, but saw nothing obvious.
>
> TIA,
> Zoltan
>
>
> --
>
> ==============================**=============
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ==============================**=============
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120217/a72cd438/attachment.html
From veille.technique at crige-paca.org  Fri Feb 17 05:49:47 2012
From: veille.technique at crige-paca.org (CRIGE PACA - Veille Technique)
Date: Fri Feb 17 05:58:52 2012
Subject: [gdal-dev] Convert ECW to TIFF
In-Reply-To: <4F3E1E55.4050105@geograph.co.za>
References: <4F3E1E55.4050105@geograph.co.za>
Message-ID: <4F3E30CB.7020204@crige-paca.org>

Hi,

The new versions of ECW SDK is only available on Windows (4.0 to 4.2). 
The ReadOnly Windows version is free and Read/Write Windows version 
(desktop and server) is profitable. I believe that there is a project of 
porting SDK on Linux but it's not currently available 
(http://field-guide.blogspot.com/2011/07/erdas-ecwjp2-sdk-for-linux.html) and 
we don't know the coming licensing policy.

If you want to convert ECW to tif+worldfile on Linux, you need to 
recompile gdal agaisnt the 3.3 ECW library (which is no longer 
maintained by ERDAS since 2007). Be carreful, I noted a suspect 
behaviour of this library under Linux (I will send a post this week-end 
on this subject with more details). If you want, I believe you can find 
ubuntu binaries of this library here : 
http://geomatips.blogspot.com/2010/09/mise-jour-paquet-ecw-pour-ubuntu.html 
(french website)

At last, in order to get georeferencing informations embedded in ECW 
file, you can use the DATUM, UNITS**and PROJ options 
(http://www.gdal.org/frmt_ecw.html - code defintion are contained in 
ecw_cs.wkt file) or/and assign an EPSG code with -a_srs option in 
GDAL_TRANSLATE.

Hope to help...

Best regards

Sylvain

Le 17/02/12 10:31, Zoltan Szecsei a ?crit :
> Hi,
> I have a bunch of ecw images that I need to convert to tif+worldfile.
>
> I therefore need to recompile gdal against the ecw libraries, but the 
> only file I can download from Intergraph/Erdas website is:
> ECWJP2SDKSetup_RO_20110303.exe
> which is a Windows install of the SDK.
>
> How do I do this for Linux?
> (Want to batch convert them on ubuntu 10.04)
>
> On another note, I notice that the xml files received with the ecw 
> images only have projection info in them, and not the georeferencing 
> info.
> Is the georeferencing info embedded in the ecw files (like geotiff)? I 
> tried looking in the ecw file with a binary editor, but saw nothing 
> obvious.
>
> TIA,
> Zoltan
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120217/1d274011/attachment.html
From emmanuel.sambale at gmail.com  Fri Feb 17 07:38:53 2012
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Fri Feb 17 07:39:46 2012
Subject: [gdal-dev] reading palsar k&c mosaic (was Fwd: [GRASS-user] Re:
	grass and palsar processing)
Message-ID: <CAPzumuHWSw_6remj8SNOD-yXTVcXf5ag9U-4__v778dhgKnY_w@mail.gmail.com>

I cannot read K&C mosaic palsar data [0] with gdal 1.8.  Several bug
fixes are now closed in trac [1,2 and 3].  Has anyone tried this data
with gdal 1.9?

[0] http://www.eorc.jaxa.jp/ALOS/en/kc_mosaic/kc_mosaic.htm
[1] http://trac.osgeo.org/gdal/ticket/1981
[2] http://trac.osgeo.org/gdal/ticket/4136
[3] http://trac.osgeo.org/gdal/ticket/2234
---------- Forwarded message ----------
From: maning sambale <emmanuel.sambale@gmail.com>
Date: Wed, Feb 15, 2012 at 7:52 PM
Subject: Re: [GRASS-user] Re: grass and palsar processing
To: Markus Neteler <neteler@osgeo.org>
Cc: Alexander Muriy <amuriy@gmail.com>, GRASS user list
<grass-user@lists.osgeo.org>


Thanks markus for this.

I added an initial workflow for the ENVI tutorial I attended my goal
is to "port" this to GRASS. ?Most of the process is already available
in the pdf Alexander provided.

However, I'm having difficulty importing images from the K&C mosaic
product [0]. ?In the training I attended the mosaic product was
converted to GTiff using ASF MapReady [1]. ?According to ASF MapReady
the format is CEOS L1.

I tried using r.in.gdal and r.in.bin (based on the pdf) but I cannot
import the K&C mosaic


[0] http://www.eorc.jaxa.jp/ALOS/en/kc_mosaic/kc_mosaic.htm
[1] http://www.asf.alaska.edu/downloads/software_tools/mapready/version_history


On Sat, Feb 11, 2012 at 7:54 AM, Markus Neteler <neteler@osgeo.org> wrote:
> Hi,
>
> I am almost there:http://grass.osgeo.org/wiki/Radar_data_processing
> only imagemagick currently fails to make the thumbnails after debian
> upgrade.will check asap and upload the missing files.
> On Fri, Feb 10, 2012 at 7:43 PM, Alexander Muriy <amuriy@gmail.com> wrote:
>> Also there is PDF http://gis-lab.info/forum/download/file.php?id=2370,
>> copied from http://www.safe.iis.u-tokyo.ac.jp/, about SAR & GRASS.
>
> thanks, added on the Wiki page.
>
> Markus
> _______________________________________________
> grass-user mailing list
> grass-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/grass-user



--
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------


-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
From ahmettemiz88 at gmail.com  Fri Feb 17 14:25:07 2012
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Feb 17 14:25:18 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
Message-ID: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>

hello

how can I divide a big shape file into 5 equal pieces using ogr2ogr ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From perrygeo at gmail.com  Fri Feb 17 14:31:06 2012
From: perrygeo at gmail.com (Matt Perry)
Date: Fri Feb 17 14:31:36 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
In-Reply-To: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
References: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
Message-ID: <CAG-GLBP3J3x7buU4bWNeLMbAOrorXDicfOPS7B_Lsp6JdKa2Gg@mail.gmail.com>

2012/2/17 ahmet temiz <ahmettemiz88@gmail.com>:
> hello
>
> how can I divide a big shape file into 5 equal pieces using ogr2ogr ?
>

"equal" with regard to what? Number of features? Area of features?
File size? Some attribute field?

-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From chaitanya.ch at gmail.com  Fri Feb 17 23:51:55 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 17 23:52:26 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
In-Reply-To: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
References: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
Message-ID: <CAMKgpOay_jUVgfbL=fuuWVzNWPrtFGVpedgA62aVpoC9bMUSjg@mail.gmail.com>

Ahmet,

If you want to divide the shapefile to reduce file size or the number of
features, use the -where option. Restrict the features copied to the new
shapefile by specifying the range of FIDs.
Ex: ogr2ogr -where "FID >= 0 and FID < 1000" dst.shp src.shp

2012/2/18 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> how can I divide a big shape file into 5 equal pieces using ogr2ogr ?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> ________________________
>
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120218/dacd4032/attachment.html
From bfraser at geoanalytic.com  Sat Feb 18 14:11:35 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Sat Feb 18 14:12:17 2012
Subject: [gdal-dev] org2ogr, KML, and srs definition
Message-ID: <4F3FF7E7.6060303@geoanalytic.com>

I have some shapefiles I thought I would look at in Google Earth, so I 
used ogr2ogr (v1.8.1) to convert them to KML:

ogr2ogr -f "KML" Lines_OGR.kml Lines.shp

but they appeared about 100 meters Northeast of my expectation, leading 
me to believe there was a Datum problem.

ogrinfo reported (since there is a .prj file created by ArcMap):

Layer SRS WKT:
PROJCS["UTM_Zone_35_Northern_Hemisphere",
     GEOGCS["GCS_Geographic Coordinate System",
         DATUM["EUROPEAN_DATUM_1950",
             
SPHEROID["International_1909_Hayford_Intl_1924",6378388,297.0000000284015]],
         PRIMEM["Greenwich",0],
         UNIT["Degree",0.017453292519943295]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",27],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]

note the ED50, which is correct for my shapefiles.  After a few attempts 
experimenting, it was only when I used -s_srs AND -t_srs on the command 
line the features were shown where I expected them:

ogr2ogr -s_srs "EPSG:23035" -t_srs "EPSG:4326"...

The part that bothered me was there was no message from ogr2ogr warning 
me about source/target SRS issues.  It seems counter-intuitive since 
ogrinfo was able to intreprete the .prj file of the source data, and the 
only (?) allowable SRS of KML is EPSG:4326.

It this a known issue (other than a related 
http://trac.osgeo.org/gdal/ticket/2271)?

-- 
Best Regards,
Brent Fraser


From peifer at gmx.eu  Sat Feb 18 14:53:06 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Feb 18 14:53:40 2012
Subject: [gdal-dev] Re: org2ogr, KML, and srs definition
In-Reply-To: <4F3FF7E7.6060303@geoanalytic.com>
References: <4F3FF7E7.6060303@geoanalytic.com>
Message-ID: <4F4001A2.4080209@gmx.eu>

On 18/02/2012 20:11, Brent Fraser wrote:
> I have some shapefiles I thought I would look at in Google Earth, so I
> used ogr2ogr (v1.8.1) to convert them to KML:
>
> ogr2ogr -f "KML" Lines_OGR.kml Lines.shp
>
> but they appeared about 100 meters Northeast of my expectation, leading
> me to believe there was a Datum problem.
>

OGR interprets your .prj file like this:
+proj=utm +zone=35 +ellps=intl +units=m +no_defs

...and the EPSG code like this:
+proj=utm +zone=35 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m 
+no_defs

As there is no +towgs84 parameter in the 1st case, you end up with the 
100m shift. In trunk, there is some code that should enable some sort of 
EPSG code auto-detection, but this is still experimental...

Hermann

From ahmed.asker at roames.com.au  Sun Feb 19 18:57:34 2012
From: ahmed.asker at roames.com.au (Ahmed Asker)
Date: Sun Feb 19 18:58:22 2012
Subject: [gdal-dev] GDAL / Projection Coord. System (PROJCS) in JP2 header
Message-ID: <CA+Qr_4_D=BwqNDnvLxsD+mYL2Ex6bZ4dnQcYqGFZrufKUP_btw@mail.gmail.com>

Hello gdal-dev group,

I have a question that I'm wondering if you can answer.  I have GDAL 1.9
SVN on my machine, and I am having issues getting the projection coordinate
system (PROJCS) inside the JP2 headers *without *the accompanying XML/GML
sidecar (i.e. when sidecar is removed, running GDALINFO on the JP2 shows `
'  - blank coordinate system).

I have been experimenting with GDALWARP and have managed to get the PROJCS
in the GeoTiff headers (for TIFF files that previously also showed ` ' -
blank projection coord. system)  using the target reference system
arguement -t_srs  .. BUT.. have not managed to get this info to show in the
JP2 headers without an accompanying XML/GML sidecar file

*i.e. when running GDAL_TRANSLATE **and using the -a_srs argument (assign
SRS (spatial reference system) to output) to create a JP2 from** one of
these GeoTiffs (using OPENJpeg2000 raster driver) - the PROJCS does not
show in the JP2 file header, if the XML/GML file is removed - upon running
GDALINFO on this JP2 file *
*
*
*..command-lines, follow.. (below):*

*Command_line>  gdalwarp *-of GTiff -t_srs EPSG:32756 457000_7200000.tif
457000_7200000Test.tif
Creating output file that is 10000P x 10000L.
Processing input file 457000_7200000.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

*Command_line>  **gdalinfo* 457000_7200000Test.tif
Driver: GTiff/GeoTIFF
*Files: 457000_7200000Test.tif*
Size is 10000, 10000
Coordinate System is:
PROJCS["WGS 84 / UTM zone 56S",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",153],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32756"]]
Origin = (457000.000000000000000,7200000.000000000000000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  457000.000, 7200000.000) (152d34'22.01"E, 25d18'57.36"S)
Lower Left  (  457000.000, 7199000.000) (152d34'21.89"E, 25d19'29.87"S)
Upper Right (  458000.000, 7200000.000) (152d34'57.77"E, 25d18'57.47"S)
Lower Right (  458000.000, 7199000.000) (152d34'57.66"E, 25d19'29.98"S)
Center      (  457500.000, 7199500.000) (152d34'39.84"E, 25d19'13.67"S)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
*
Command_line>**    *gdal_translate -of JP2OpenJPEG -a_srs EPSG:32756
457000_7200000Test.tif 457000_7200000Test.jp2
Input file size is 10000, 10000
0...10...20...30...40...50...60...70...80...90...100 - done.

*Command_line>**    *del 457000_7200000Test.*.*.xml
*
Command_line>  *gdalinfo 457000_7200000Test.jp2
Driver: JP2OpenJPEG/JPEG-2000 driver based on OpenJPEG library
Files: 457000_7200000Test.jp2
Size is 10000, 10000
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,10000.0)
Upper Right (10000.0,    0.0)
Lower Right (10000.0,10000.0)
Center      ( 5000.0, 5000.0)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue


Best Regards,
--------------------
Ahmed Asker
Google Earth Builder Administrator, ROAMES (Remote | Observation |
Automated | Modelling | Economic | Simulation ?)
Ergon Energy
Mobile:    0402 058 325
Phone:    (07) 3228 8124
Email:     ahmed.asker@roames.com.au
Web:       http://www.roames.com.au
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/1cd6affd/attachment.html
From jmckenna at gatewaygeomatics.com  Mon Feb 20 07:52:52 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Feb 20 07:53:00 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
In-Reply-To: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
References: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
Message-ID: <4F424224.6030507@gatewaygeomatics.com>

On 12-02-17 3:25 PM, ahmet temiz wrote:
> hello
>
> how can I divide a big shape file into 5 equal pieces using ogr2ogr ?

You could use shp2tile to split your shp into equal parts: 
http://imaptools.com/download-software.html

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From etourigny.dev at gmail.com  Mon Feb 20 08:48:59 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Feb 20 08:49:42 2012
Subject: [gdal-dev] Re: org2ogr, KML, and srs definition
In-Reply-To: <4F4001A2.4080209@gmx.eu>
References: <4F3FF7E7.6060303@geoanalytic.com>
	<4F4001A2.4080209@gmx.eu>
Message-ID: <CA+TxYvPFtT=mKNKsd7RoWtAcDXA+eQsgNxsse8jTNDsKy6xtSA@mail.gmail.com>

Brent,

to use that experimental feature (available in 1.9.0), you need to set
GDAL_FIX_ESRI_WKT=TOWGS84

Try the following:
GDAL_FIX_ESRI_WKT=TOWGS84 gdalsrsinfo <yourfile.shp>

If you see the towgs84 parameters in the PROJ.4 string, then it will
work with ogr2ogr.

This is documented in
http://www.gdal.org/ogr/classOGRSpatialReference.html#ad556dfdc04d9ec5f1714fc6b5e0eb6a6
More information here http://trac.osgeo.org/gdal/ticket/4345

If it works, please report here, and if not, please send me your
shapefile so I can make improvements

Etienne


On Sat, Feb 18, 2012 at 4:53 PM, Hermann Peifer <peifer@gmx.eu> wrote:
> On 18/02/2012 20:11, Brent Fraser wrote:
>>
>> I have some shapefiles I thought I would look at in Google Earth, so I
>> used ogr2ogr (v1.8.1) to convert them to KML:
>>
>> ogr2ogr -f "KML" Lines_OGR.kml Lines.shp
>>
>> but they appeared about 100 meters Northeast of my expectation, leading
>> me to believe there was a Datum problem.
>>
>
> OGR interprets your .prj file like this:
> +proj=utm +zone=35 +ellps=intl +units=m +no_defs
>
> ...and the EPSG code like this:
> +proj=utm +zone=35 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m
> +no_defs
>
> As there is no +towgs84 parameter in the 1st case, you end up with the 100m
> shift. In trunk, there is some code that should enable some sort of EPSG
> code auto-detection, but this is still experimental...
>
> Hermann
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From yehil at rafael.co.il  Mon Feb 20 11:24:35 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon Feb 20 11:35:37 2012
Subject: [gdal-dev] Creating NITF with GCPs
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7DDEEA22C@MAILBOXSERVER.rf.local>


Hi
I'm trying to write an NITF image where the geo-registration is with 4 GCPs. Is this functionality supported by the NITF driver?
Looking through the code it seems that there is no way to create the IGEOLO data to the NITF from the supplied GCPs, but rather it will always calculate the IGEOLO data from the affine transform.

I'm using GDAL 1.8.1.

Am I missing something?

Thanks
Yehiyam Livneh

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/446324c9/attachment-0001.html
From chapmanm at pixia.com  Mon Feb 20 13:54:52 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Feb 20 13:54:54 2012
Subject: [gdal-dev] GEOS geometries SRS not set
Message-ID: <de03e7a5.000011c4.0000000f@CHAPMANM7S>

It appears that when new OGR geometries are created using the spatial
operations features of GEOS via OGR methods like ConvexHull, Buffer, etc.
that the spatial reference of the newly created OGR geometry is not
assigned.  Is this by design or is it an oversight?  If by design, what
was the reasoning? I'm using 1.8.1.

 

Best regards,

Martin 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/6b1ab554/attachment.html
From warmerdam at pobox.com  Mon Feb 20 13:58:09 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 20 13:58:28 2012
Subject: [gdal-dev] GEOS geometries SRS not set
In-Reply-To: <de03e7a5.000011c4.0000000f@CHAPMANM7S>
References: <de03e7a5.000011c4.0000000f@CHAPMANM7S>
Message-ID: <4F4297C1.80305@pobox.com>

On 12-02-20 10:54 AM, Martin Chapman wrote:
> It appears that when new OGR geometries are created using the spatial
> operations features of GEOS via OGR methods like ConvexHull, Buffer, etc? that
> the spatial reference of the newly created OGR geometry is not assigned. Is
> this by design or is it an oversight? If by design, what was the reasoning? I?m
> using 1.8.1.

Martin,

Is it an omission; however, I will caution that the SRS property on
geometries is not taking very seriously in OGR.  Many drivers neglect
to set it, and there are few methods that utilize it.  If you file a
ticket we can try and fixup the GEOS bindings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From chapmanm at pixia.com  Mon Feb 20 14:05:28 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Feb 20 14:06:11 2012
Subject: [gdal-dev] GEOS geometries SRS not set
In-Reply-To: <4F4297C1.80305@pobox.com>
References: <de03e7a5.000011c4.0000000f@CHAPMANM7S> <4F4297C1.80305@pobox.com>
Message-ID: <1f56f323.000011c4.00000015@CHAPMANM7S>

Frank,

Thanks for the clarification.  Is there a way to submit a ticket if I
don't have a login?

Best regards,
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, February 20, 2012 11:58 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GEOS geometries SRS not set

On 12-02-20 10:54 AM, Martin Chapman wrote:
> It appears that when new OGR geometries are created using the spatial 
> operations features of GEOS via OGR methods like ConvexHull, Buffer, 
> etc. that the spatial reference of the newly created OGR geometry is 
> not assigned. Is this by design or is it an oversight? If by design, 
> what was the reasoning? I'm using 1.8.1.

Martin,

Is it an omission; however, I will caution that the SRS property on
geometries is not taking very seriously in OGR.  Many drivers neglect to
set it, and there are few methods that utilize it.  If you file a ticket
we can try and fixup the GEOS bindings.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Feb 20 14:20:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 20 14:21:15 2012
Subject: [gdal-dev] Creating NITF with GCPs
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7DDEEA22C@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7DDEEA22C@MAILBOXSERVER.rf.local>
Message-ID: <201202202020.31574.even.rouault@mines-paris.org>

Le lundi 20 f?vrier 2012 17:24:35, Livneh Yehiyam a ?crit :
> Hi
> I'm trying to write an NITF image where the geo-registration is with 4
> GCPs. Is this functionality supported by the NITF driver? Looking through
> the code it seems that there is no way to create the IGEOLO data to the
> NITF from the supplied GCPs, but rather it will always calculate the
> IGEOLO data from the affine transform.
> 
> I'm using GDAL 1.8.1.
> 
> Am I missing something?

No, I've just added support for SetGCPs() in trunk in r23997.

> 
> Thanks
> Yehiyam Livneh
> 
> ***************************************************************************
> ******************* This message (including any attachments) issued by
> RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> confidential information intended for a specific individual and purpose,
> may constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not the intended recipient, you
> should contact us immediately and thereafter delete this message from your
> system. You are hereby notified that any disclosure, copying,
> dissemination, distribution or forwarding of this message, or the taking
> of any action based on it, is strictly prohibited. If you have received
> this e-mail in error, please notify us immediately by e-mail
> mailto:lawraf@rafael.co.il and completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
> **************************************************************************
> ********************
From yehil at rafael.co.il  Mon Feb 20 14:46:22 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon Feb 20 14:46:49 2012
Subject: [gdal-dev] Creating NITF with GCPs
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7DE125995@MAILBOXSERVER.rf.local>

Thanks Even.
We haven't made the switch to 1.9 yet. I will add it to our 1.8.1. Do you see any problems with that?

Sent from my mobile


-----------------------------
From: "Even Rouault"
Subject: Re: [gdal-dev] Creating NITF with GCPs
Date: 20 ?????? 2012 21:20


Le lundi 20 f?vrier 2012 17:24:35, Livneh Yehiyam a ?crit :
> Hi
> I'm trying to write an NITF image where the geo-registration is with 4
> GCPs. Is this functionality supported by the NITF driver? Looking through
> the code it seems that there is no way to create the IGEOLO data to the
> NITF from the supplied GCPs, but rather it will always calculate the
> IGEOLO data from the affine transform.
>
> I'm using GDAL 1.8.1.
>
> Am I missing something?

No, I've just added support for SetGCPs() in trunk in r23997.

>
> Thanks
> Yehiyam Livneh
>
> ***************************************************************************
> ******************* This message (including any attachments) issued by
> RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> confidential information intended for a specific individual and purpose,
> may constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not the intended recipient, you
> should contact us immediately and thereafter delete this message from your
> system. You are hereby notified that any disclosure, copying,
> dissemination, distribution or forwarding of this message, or the taking
> of any action based on it, is strictly prohibited. If you have received
> this e-mail in error, please notify us immediately by e-mail
> mailto:lawraf@rafael.co.il and completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
> **************************************************************************
> ********************

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/3b7c1295/attachment.html
From even.rouault at mines-paris.org  Mon Feb 20 14:56:56 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 20 14:57:47 2012
Subject: [gdal-dev] Creating NITF with GCPs
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7DE125995@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7DE125995@MAILBOXSERVER.rf.local>
Message-ID: <201202202056.56971.even.rouault@mines-paris.org>

Le lundi 20 f?vrier 2012 20:46:22, Livneh Yehiyam a ?crit :
> Thanks Even.
> We haven't made the switch to 1.9 yet. I will add it to our 1.8.1. Do you
> see any problems with that?

I don't anticipate huge issues, but the driver has evolved a bit during 1.9 
cycle, so the patch won't apply cleanly, I guess

> 
> Sent from my mobile
> 
> 
> -----------------------------
> From: "Even Rouault"
> Subject: Re: [gdal-dev] Creating NITF with GCPs
> Date: 20 ?????? 2012 21:20
> 
> Le lundi 20 f?vrier 2012 17:24:35, Livneh Yehiyam a ?crit :
> > Hi
> > I'm trying to write an NITF image where the geo-registration is with 4
> > GCPs. Is this functionality supported by the NITF driver? Looking through
> > the code it seems that there is no way to create the IGEOLO data to the
> > NITF from the supplied GCPs, but rather it will always calculate the
> > IGEOLO data from the affine transform.
> > 
> > I'm using GDAL 1.8.1.
> > 
> > Am I missing something?
> 
> No, I've just added support for SetGCPs() in trunk in r23997.
> 
> > Thanks
> > Yehiyam Livneh
> > 
> > *************************************************************************
> > ** ******************* This message (including any attachments) issued by
> > RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> > confidential information intended for a specific individual and purpose,
> > may constitute information that is privileged or confidential or
> > otherwise protected from disclosure. If you are not the intended
> > recipient, you should contact us immediately and thereafter delete this
> > message from your system. You are hereby notified that any disclosure,
> > copying,
> > dissemination, distribution or forwarding of this message, or the taking
> > of any action based on it, is strictly prohibited. If you have received
> > this e-mail in error, please notify us immediately by e-mail
> > mailto:lawraf@rafael.co.il and completely delete or destroy any and all
> > electronic or other copies of the original message and any attachments
> > thereof.
> > *************************************************************************
> > * ********************
> 
> ***************************************************************************
> ******************* This message (including any attachments) issued by
> RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> confidential information intended for a specific individual and purpose,
> may constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not the intended recipient, you
> should contact us immediately and thereafter delete this message from your
> system. You are hereby notified that any disclosure, copying,
> dissemination, distribution or forwarding of this message, or the taking
> of any action based on it, is strictly prohibited. If you have received
> this e-mail in error, please notify us immediately by e-mail
> mailto:lawraf@rafael.co.il and completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
> **************************************************************************
> ********************
From apsims at ncsu.edu  Mon Feb 20 16:17:39 2012
From: apsims at ncsu.edu (Aaron Sims)
Date: Mon Feb 20 16:18:07 2012
Subject: [gdal-dev] gdal / mapserver draw failure
Message-ID: <4F42B873.6000805@ncsu.edu>

We are using an openlayers frontend to utilize mapserver via 
phpmapscript to read some colorized tif files we have made, and then 
render a png file on a webpage via gdal.This process seems to work about 
95% of the time, The other 5%, we are getting no images and errors 
kicked out to the httpd error log. Based on the errors below, it seems 
to be occurring when mapserver issues the $map->draw() command, and 
kicks out some GDAL errors.When this happens, there is no png image that 
gets created. Ive included the following directives in the map file to 
help with debugging CONFIG "CPL_DEBUG" "ON", andCONFIG "MS_ERRORFILE" = 
/home/logfile

Any help on what may be happening here?

*When it succeeds I see a message like this in the httpd error logs:*

GDAL: GDALOpen(/home/cache/2012021913-2012022013.tif, 
this=0x2b5e6a5abda0) succeeds as GTiff

*When it fails, I see a string of errors, such as:*

GDAL: GDALClose(/home/cache/2012021913-2012022013.tif, this=0x2b5e6fd12890)

[Mon Feb 20 14:41:18 2012] [error] [client xxx.xxx.xxx.xxx] PHP 
Warning:[MapServer Error]: msDrawMap(): Failed to draw layer named 
'map_data'.\n in /home/www/testmscross.php on line 231

[Mon Feb 20 14:41:18 2012] [error] [client xxx.xxx.xxx.xxx] PHP 
Warning:[MapServer Error]: GetBlockRef failed at X block offset 0, Y 
block offset 0: GDALDatasetRasterIO() failed: drawGDAL()\n in 
/home/www/testmscross.php on line 231

[Mon Feb 20 14:41:18 2012] [error] [client xxx.xxx.xxx.xxx] PHP 
Warning:[MapServer Error]: msDrawMap(): Failed to draw layer named 
'map_data'.\n in /home/www/testmscross.php on line 231

[Mon Feb 20 14:41:18 2012] [error] [client xxx.xxx.xxx.xxx] PHP 
Warning:[MapServer Error]: GetBlockRef failed at X block offset 0, Y 
block offset 0: GDALDatasetRasterIO() failed: drawGDAL()\n in 
/home/www/testmscross.php on line 231

[Mon Feb 20 14:41:18 2012] [error] [client xxx.xxx.xxx.xxx] PHP Fatal 
error:Call to a member function saveImage() on a non-object in 
/home/www/testmscross.php on line 270

*gdalinfo on the tiff files yields*:

Driver: GTiff/GeoTIFFC

Files: /home/cache/2012021913-2012022013.tif

Size is 181, 132

Coordinate System is `'

Origin = (2172891.879999999888241,-5178906.330000000074506)

Pixel Size = (4772.703535911604376,-4764.676212121210483)

Image Structure Metadata:

INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left( 2172891.880,-5178906.330)

Lower Left( 2172891.880,-5807843.590)

Upper Right ( 3036751.220,-5178906.330)

Lower Right ( 3036751.220,-5807843.590)

Center( 2604821.550,-5493374.960)

Band 1 Block=181x15 Type=Byte, ColorInterp=Red

NoData Value=-1

Band 2 Block=181x15 Type=Byte, ColorInterp=Green

NoData Value=-1

Band 3 Block=181x15 Type=Byte, ColorInterp=Blue

NoData Value=-1

*and mapserv -v yields:*

MapServer version 5.6.7 OUTPUT=GIF OUTPUT=PNG OUTPUT=JPEG OUTPUT=WBMP 
OUTPUT=SVG SUPPORTS=PROJ SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=ICONV 
SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT SUPPORTS=WFS_SERVER 
SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER SUPPORTS=THREADS INPUT=EPPL7 
INPUT=OGR INPUT=GDAL INPUT=MYGIS INPUT=SHAPEFILE

*Mapserver compiled with:*

./configure --with-zlib --with-png --with-jpeg --with-gd --with-proj 
--with-threads --with-ogr=/usr/local/gdal-config 
--with-gdal=/usr/local/gdal-config --with-tiff --with-mygis --with-wfs 
--with-wcs --with-wmsclient --with-wfsclient 
--with-httpd=/usr/sbin/httpd --with-php=/usr/include/php

*gdal information:*

[root]#./gdal-config --version

1.7.3

[root]# ./gdal-config --dep-libs --version

-L/usr/local/lib -lgeos_c -L/usr/lib -lsqlite3 -L/usr/lib64 
-L/usr/lib64/lib -lodbc -lodbcinst -L/usr/lib64 -L/usr/lib64/lib -lgif 
-L/usr/lib64 -L/usr/lib64/lib -ljpeg -L/usr/lib64/lib -ltiff 
-L/usr/lib64 -L/usr/lib64/lib -lpng -L/usr/local/ -L/usr/local//lib 
-lnetcdf -L/usr/local/lib -L/usr/local/lib/lib -lcfitsio -lz 
-L/usr/lib64/ -L/usr/lib64//lib -lm -lrt -ldl -L/usr/kerberos/lib64 
-lcurl -ldl -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lidn -lssl 
-lcrypto -lz -rdynamic -L/usr/lib64/mysql -lmysqlclient -lz -lcrypt 
-lnsl -lm -L/usr/lib64 -lssl --lcrypto

[root]# ./gdal-config --formats

gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem 
jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis 
rmf leveller sgi srtmhgt idrisi gsg ingr ers jaxapalsar dimap gff cosar 
pds adrg coasp tsx terragen blx msgn til r northwood saga wcs wms grib 
bsb gif jpeg png netcdf pcraster fits rik rasterlite

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/487f4ab0/attachment-0001.html
From arnd.wippermann at web.de  Mon Feb 20 16:36:37 2012
From: arnd.wippermann at web.de (Arnd Wippermann)
Date: Mon Feb 20 16:42:28 2012
Subject: [gdal-dev] Simplify a polygon topology doesn't preserve the topology
Message-ID: <EBDE5AE14E4B405494820C06FF7E6861@pcawh2>

Hi,

I try to simplify a polygon topology (GDAL 1.9.0, released 2011/12/29).


SET INPUT="top1_bene.gml"

SET OUTPUT_01="top1_bene_sim_01.gml"
SET OUTPUT_005="top1_bene_sim_005.gml"
SET OUTPUT_001="top1_bene_sim_001.gml"

"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_01%  %INPUT% -simplify 0.1
"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_005% %INPUT% -simplify 0.05
"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_001% %INPUT% -simplify 0.01


but preserving the topology doesn't work for tolerances above a treshold.

I get a correct result for a tolerance of 0.01, but for 0.05 and 0.1
the results are only in parts correct.

see:
http://gis.ibbeck.de/OLClient/OLClient.asp?WMC=/ginfo/tests/ogr/simplify/Sim
plify_bene_ogr.wmc.xml

I have it also tried with a polygon topology of the us states and the result
wasn't great.

(I get similar results using postGis ST_Simplify.)

Apart the tolerance are there other options to consider or is it a bug?

The polygon topology consists of two polygons and the shared border have
identical vertices.

Arnd

From warmerdam at pobox.com  Mon Feb 20 19:39:39 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 20 19:40:13 2012
Subject: [gdal-dev] nmake.opt  compile rule changes
Message-ID: <4F42E7CB.8080101@pobox.com>

Folks,

If you don't build on Windows using visual studio NMAKE files you can stop
reading.

I have removed the .cc.obj and .c.obj rules from the nmake.opt and ensured
that CPPFLAGS gets set so that the default NMAKE rules for compiling can get
used.  The advantage of this is that they will build all the source files in
one makefile/directory in a single invocation of the compiler instead of one
invocation per file.  This can substantially speed up large builds.  Building
the gdal/port directory went from 30s to 15s for me.

If you have build problems on windows in the near future consider that my
change may be the cause.

   http://trac.osgeo.org/gdal/changeset/24005

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From pcreso at pcreso.com  Mon Feb 20 22:37:26 2012
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Mon Feb 20 22:37:36 2012
Subject: [gdal-dev] Simplify a polygon topology doesn't preserve the
	topology
In-Reply-To: <EBDE5AE14E4B405494820C06FF7E6861@pcawh2>
Message-ID: <1329795446.58834.YahooMailClassic@web160704.mail.bf1.yahoo.com>

Does Postgis ST_SimplifyPreserveTopology() work for you?

http://postgis.org/docs/ST_SimplifyPreserveTopology.html

Cheers,

? Brent Wood



--- On Tue, 2/21/12, Arnd Wippermann <arnd.wippermann@web.de> wrote:

From: Arnd Wippermann <arnd.wippermann@web.de>
Subject: [gdal-dev] Simplify a polygon topology doesn't preserve the topology
To: gdal-dev@lists.osgeo.org
Date: Tuesday, February 21, 2012, 10:36 AM

Hi,

I try to simplify a polygon topology (GDAL 1.9.0, released 2011/12/29).


SET INPUT="top1_bene.gml"

SET OUTPUT_01="top1_bene_sim_01.gml"
SET OUTPUT_005="top1_bene_sim_005.gml"
SET OUTPUT_001="top1_bene_sim_001.gml"

"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_01%? %INPUT% -simplify 0.1
"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_005% %INPUT% -simplify 0.05
"%prgpfad%\ogr2ogr" -f "GML" %OUTPUT_001% %INPUT% -simplify 0.01


but preserving the topology doesn't work for tolerances above a treshold.

I get a correct result for a tolerance of 0.01, but for 0.05 and 0.1
the results are only in parts correct.

see:
http://gis.ibbeck.de/OLClient/OLClient.asp?WMC=/ginfo/tests/ogr/simplify/Sim
plify_bene_ogr.wmc.xml

I have it also tried with a polygon topology of the us states and the result
wasn't great.

(I get similar results using postGis ST_Simplify.)

Apart the tolerance are there other options to consider or is it a bug?

The polygon topology consists of two polygons and the shared border have
identical vertices.

Arnd

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120220/40287601/attachment.html
From ahmettemiz88 at gmail.com  Tue Feb 21 03:29:43 2012
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Feb 21 03:29:57 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
In-Reply-To: <CAMKgpOay_jUVgfbL=fuuWVzNWPrtFGVpedgA62aVpoC9bMUSjg@mail.gmail.com>
References: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
	<CAMKgpOay_jUVgfbL=fuuWVzNWPrtFGVpedgA62aVpoC9bMUSjg@mail.gmail.com>
Message-ID: <CAJKO1YsMJNeiACFAxNw40aXw0g_cra5-+_3nKDxx0vEMxLZB8A@mail.gmail.com>

Thank you Chaitanya

It worked.
I had tried spat. But it couldn't achive.
Could you tell me why spat can not be used to part shp file
because of its big size ?

regards

2012/2/18 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> Ahmet,
>
> If you want to divide the shapefile to reduce file size or the number of
> features, use the -where option. Restrict the features copied to the new
> shapefile by specifying the range of FIDs.
> Ex: ogr2ogr -where "FID >= 0 and FID < 1000" dst.shp src.shp
>
> 2012/2/18 ahmet temiz <ahmettemiz88@gmail.com>
>>
>> hello
>>
>> how can I divide a big shape file into 5 equal pieces using ogr2ogr ?
>>
>> regards
>>
>> --
>> Ahmet Temiz
>> Jeoloji M?h.
>> Afet ve Acil Durum Y?netimi Ba?kanl???
>> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
>> Bilgi ve CBS grubu
>> Eski?ehir Yolu 10. km.
>> Lodumlu / Ankara
>> Tel : 0 312 2872680 / 1535
>> ________________________
>>
>> Ahmet Temiz
>> Geological Eng.
>> Information Systems - GIS Group
>> Disaster and Emergency Management
>> of Presidency
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E



-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From gianluca.cantoro at gmail.com  Tue Feb 21 04:15:33 2012
From: gianluca.cantoro at gmail.com (Gianluca Cantoro)
Date: Tue Feb 21 04:15:52 2012
Subject: [gdal-dev] gdal post - boundary polygone for rectified images
Message-ID: <CAN50pA-2+znZuFgM6bbaWFY1=M=f-gYwGJf9zNhhtbLbBigVSw@mail.gmail.com>

Dear All,
I learned from QGIS how to automate the georeferencing of raster file using
gdal.
Actually I "inject" a series of gcp to a jpg and I warp it with gdalwarp.
I was wondering if there is a similar procedure for a vector file (shp, kml
or... whatever else), depicting the boundary of the raster (from 0,0
starting coordinate before the rectification), to be rectified with the new
GroundControlPoints I provide.
Or if just there is a way to create a vector file showing the boundary of
the rectified image.
What I am searching is a script in "gdal style" in order to automate the
procedure for several rasters without further user input.
Thanks for your help and suggestions.
Cheers,
Gianluca
From tjmgis at gmail.com  Tue Feb 21 05:01:53 2012
From: tjmgis at gmail.com (TJMartin)
Date: Tue Feb 21 05:02:12 2012
Subject: [gdal-dev] Hillshade + Topographic Map??
Message-ID: <1329818513653-4490698.post@n6.nabble.com>

Hi

I have managed to create a hillshade using gdaldem and I have my original
topographic rasters. However I do not want the standard grey hillshad or
apply a colour ramp.

Is there a way to combine the hillshade and topo map together - ie add a
transparency or opacity to the hillshade.

I have looked at Photopshop and ImageMagik but the results are then not
supported in QGIS etc

After a trawl through the web the only entry is an ArGIS 10 tutorial

http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009t000001v1000000

Hopefully that will explain what I would like to achieve

thanks for anyones help

Tim

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Hillshade-Topographic-Map-tp4490698p4490698.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From brfr at metrico.lu  Tue Feb 21 08:14:08 2012
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Feb 21 08:14:01 2012
Subject: [gdal-dev] Hillshade + Topographic Map??
In-Reply-To: <1329818513653-4490698.post@n6.nabble.com>
References: <1329818513653-4490698.post@n6.nabble.com>
Message-ID: <4F4398A0.3040804@metrico.lu>

Hi,

the standard procedure for creating topo-maps is to overlay your land 
coverage map with a semi-transparent hillshading. I don't know if 
there's a tool for combining/adding two raster maps together in gdal, 
but this is a rather standard procedure in any GIS. In QGIS, for 
example, you can adjust the layer transparency slider to get the effect.

If you want to create a more permament combination of the land coverage 
and hillshade, you can use a software like GIMP to combine the two maps.

Mapserver may be able to create a georeferenced version of your 
combination also, as does mapnik. The biggest problem is probably to 
overcome the alpha-transparency for your hillshading, which is not 
something that every raster library is able to handle well.

Frank

Am 21.02.2012 11:01, schrieb TJMartin:
> Hi
>
> I have managed to create a hillshade using gdaldem and I have my original
> topographic rasters. However I do not want the standard grey hillshad or
> apply a colour ramp.
>
> Is there a way to combine the hillshade and topo map together - ie add a
> transparency or opacity to the hillshade.
>
> I have looked at Photopshop and ImageMagik but the results are then not
> supported in QGIS etc
>
> After a trawl through the web the only entry is an ArGIS 10 tutorial
>
> http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009t000001v1000000
>
> Hopefully that will explain what I would like to achieve
>
> thanks for anyones help
>
> Tim
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Hillshade-Topographic-Map-tp4490698p4490698.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From Volker.Wichmann at uibk.ac.at  Tue Feb 21 08:43:15 2012
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Tue Feb 21 08:50:20 2012
Subject: [gdal-dev] Hillshade + Topographic Map??
In-Reply-To: <4F4398A0.3040804@metrico.lu>
References: <1329818513653-4490698.post@n6.nabble.com>
	<4F4398A0.3040804@metrico.lu>
Message-ID: <4F439F73.4000907@uibk.ac.at>

The workflow with QGIS described by Frank is also working with SAGA GIS. 
SAGA also allows you to export a permament combination as image file 
(tif, jpg, png ... including world file and kml) with the 'Export Image' 
module.

Volker


On 02/21/2012 02:14 PM, Frank Broniewski wrote:
> Hi,
>
> the standard procedure for creating topo-maps is to overlay your land
> coverage map with a semi-transparent hillshading. I don't know if
> there's a tool for combining/adding two raster maps together in gdal,
> but this is a rather standard procedure in any GIS. In QGIS, for
> example, you can adjust the layer transparency slider to get the effect.
>
> If you want to create a more permament combination of the land coverage
> and hillshade, you can use a software like GIMP to combine the two maps.
>
> Mapserver may be able to create a georeferenced version of your
> combination also, as does mapnik. The biggest problem is probably to
> overcome the alpha-transparency for your hillshading, which is not
> something that every raster library is able to handle well.
>
> Frank
>
> Am 21.02.2012 11:01, schrieb TJMartin:
>> Hi
>>
>> I have managed to create a hillshade using gdaldem and I have my original
>> topographic rasters. However I do not want the standard grey hillshad or
>> apply a colour ramp.
>>
>> Is there a way to combine the hillshade and topo map together - ie add a
>> transparency or opacity to the hillshade.
>>
>> I have looked at Photopshop and ImageMagik but the results are then not
>> supported in QGIS etc
>>
>> After a trawl through the web the only entry is an ArGIS 10 tutorial
>>
>> http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009t000001v1000000
>>
>>
>> Hopefully that will explain what I would like to achieve
>>
>> thanks for anyones help
>>
>> Tim
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/Hillshade-Topographic-Map-tp4490698p4490698.html
>>
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From kassies at gmail.com  Tue Feb 21 09:11:54 2012
From: kassies at gmail.com (Rutger)
Date: Tue Feb 21 09:12:46 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <1329818513653-4490698.post@n6.nabble.com>
References: <1329818513653-4490698.post@n6.nabble.com>
Message-ID: <1329833514234-4491709.post@n6.nabble.com>

Hey,


TJMartin wrote
> 
> ...
> Is there a way to combine the hillshade and topo map together - ie add a
> transparency or opacity to the hillshade.
> ...
> 

A common way is to convert your (i assume) RGB topo map to HSV color space
and replace the intensity band (v) with your hillshade. This is for example
nicely shows at Franks blog:
http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html
http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html 

I find replacing the entire intensity band always a bit harsh since for flat
area's you would like to stick to your original color/data.

This can be done by normalizing the hillshade band with the zenith angle
used to create is. Following the hsv_merge.py script on Franks blog, the
original replacement of:
/hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], v] )/

Woud become something like:
/v_norm = v * hsv[2] / ( 255 * math.cos(zenith * (math.pi / 180.0)))
hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], numpy.where( v_norm > 255,
255, v_norm )] )/

You have to pay a bit attention to avoid saturating the normalized band.
This can be done by choosing a zenith angle wich gives a flat surface a
value halfway your range of 0 and 255.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Hillshade-Topographic-Map-tp4490698p4491709.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jluis at ualg.pt  Tue Feb 21 10:11:44 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Feb 21 10:12:53 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <1329833514234-4491709.post@n6.nabble.com>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
Message-ID: <4F43B430.6000005@ualg.pt>

On 21-02-2012 14:11, Rutger wrote:
> Hey,
>
>
> TJMartin wrote
>> ...
>> Is there a way to combine the hillshade and topo map together - ie add a
>> transparency or opacity to the hillshade.
>> ...
>>
> A common way is to convert your (i assume) RGB topo map to HSV color space
> and replace the intensity band (v) with your hillshade. This is for example
> nicely shows at Franks blog:
> http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html
> http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html
>
> I find replacing the entire intensity band always a bit harsh since for flat
> area's you would like to stick to your original color/data.
>
> This can be done by normalizing the hillshade band with the zenith angle
> used to create is. Following the hsv_merge.py script on Franks blog, the
> original replacement of:
> /hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], v] )/
>
> Woud become something like:
> /v_norm = v * hsv[2] / ( 255 * math.cos(zenith * (math.pi / 180.0)))
> hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], numpy.where( v_norm>  255,
> 255, v_norm )] )/
>
> You have to pay a bit attention to avoid saturating the normalized band.
> This can be done by choosing a zenith angle wich gives a flat surface a
> value halfway your range of 0 and 255.

GMT does that for ages. But it doesn't replace the intensity with 
shading. Instead the shading is used to change the saturation of HSV 
making the  facets facing illumination light become brighter and the 
other become darker.

See for example
http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1420007.17

and
http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1580008.2

With GMT5 one can compute the shading of a grid and apply it to an 
image. Here  goes a small example of the GMT's test set 
(..\gmt5\trunk\test\grdimage\orig\readwrite_withgdal.sh)

Even simpler is to use Mirone. We can do the above just with a couple of 
clicks.

Joaquim
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Capture.JPG
Type: image/jpeg
Size: 28153 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/9adb79b1/Capture-0001.jpe
From warmerdam at pobox.com  Tue Feb 21 10:36:18 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 21 10:36:43 2012
Subject: [gdal-dev] divide a big shape file using ogr2ogr
In-Reply-To: <CAJKO1YsMJNeiACFAxNw40aXw0g_cra5-+_3nKDxx0vEMxLZB8A@mail.gmail.com>
References: <CAJKO1Yub9pMjg5POksR3=qrokO_rvRVex3xQto2wXQp_vkZWTQ@mail.gmail.com>
	<CAMKgpOay_jUVgfbL=fuuWVzNWPrtFGVpedgA62aVpoC9bMUSjg@mail.gmail.com>
	<CAJKO1YsMJNeiACFAxNw40aXw0g_cra5-+_3nKDxx0vEMxLZB8A@mail.gmail.com>
Message-ID: <4F43B9F2.7010109@pobox.com>

On 12-02-21 12:29 AM, ahmet temiz wrote:
> Thank you Chaitanya
>
> It worked.
> I had tried spat. But it couldn't achive.
> Could you tell me why spat can not be used to part shp file
> because of its big size ?

Ahmet,

Roughly speaking -spat could be used for this purpose, but any features
crossing the line between -spat windows would get included in both files
unless you also use -clipsrc which would split features on the clip
boundaries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jmckenna at gatewaygeomatics.com  Tue Feb 21 11:27:06 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Feb 21 11:27:38 2012
Subject: [gdal-dev] nmake.opt  compile rule changes
In-Reply-To: <4F42E7CB.8080101@pobox.com>
References: <4F42E7CB.8080101@pobox.com>
Message-ID: <4F43C5DA.9010706@gatewaygeomatics.com>

Thanks for the improvements Frank - no problems here with trunk.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




On 12-02-20 8:39 PM, Frank Warmerdam wrote:
> Folks,
>
> If you don't build on Windows using visual studio NMAKE files you can stop
> reading.
>
> I have removed the .cc.obj and .c.obj rules from the nmake.opt and ensured
> that CPPFLAGS gets set so that the default NMAKE rules for compiling can
> get
> used. The advantage of this is that they will build all the source files in
> one makefile/directory in a single invocation of the compiler instead of
> one
> invocation per file. This can substantially speed up large builds. Building
> the gdal/port directory went from 30s to 15s for me.
>
> If you have build problems on windows in the near future consider that my
> change may be the cause.
>
> http://trac.osgeo.org/gdal/changeset/24005
>
> Best regards,
From tjmgis at gmail.com  Tue Feb 21 13:25:41 2012
From: tjmgis at gmail.com (tim martin)
Date: Tue Feb 21 13:26:06 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <4F43B430.6000005@ualg.pt>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
	<4F43B430.6000005@ualg.pt>
Message-ID: <CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>

Hi Everyone

Many thanks for your help.

Lots of recommendations and I have tried each one with limited success

1) QGIS - works but i need a permanent copy.
2) GIMP - problem with this is GIMP does not recognise my rasters. I have
expanded to color table to rgb and it still wouldnt open the file. It would
open the hillshade however its 2gb so it fell over half way through
3) hsv_merge.py - this initially did not work because the hillshade is
actually a different pixel size to the topo map even though they cover the
same area. So i used gdal to increase the size of the hillshade and then
ran the hsv_merge.py

it created a 98GB geotiff!! which i then compressed using gdal_translate,
ended up being 268Mb!!

However, as advised the colours were way off.

I tried to edit the python script but get indent errors or it does not know
what v_norm is.

4) then tried SASS GIS and when I open my rasters they are in a black
colour ramp even though they are RGB and I cannot figure out how to change
that so they load normally. Also SASS wont load a big tiff file in anyway.

5) Looked at GMT and I cannot find the options to load two rasters on top
of each other.

6) MIRONE - again cannot see how to do this from within the application.

The only real success was mapnik, however creating a map file looking at
2000 topogrpahic maps and 20000 hillshade map is crazy and even if I point
to the VRT for each, mapnik cannot create an image of 132000 by 248000 that
I need.

So after a very frustrating day I still do not have an answer!

So if there is any other ideas or methods I would really appreciate the help

thanks

Tim



On 21 February 2012 15:11, Joaquim Luis <jluis@ualg.pt> wrote:

> On 21-02-2012 14:11, Rutger wrote:
>
>> Hey,
>>
>>
>> TJMartin wrote
>>
>>> ...
>>> Is there a way to combine the hillshade and topo map together - ie add a
>>> transparency or opacity to the hillshade.
>>> ...
>>>
>>>  A common way is to convert your (i assume) RGB topo map to HSV color
>> space
>> and replace the intensity band (v) with your hillshade. This is for
>> example
>> nicely shows at Franks blog:
>> http://fwarmerdam.blogspot.**com/2010/01/hsvmergepy.html<http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html>
>> http://fwarmerdam.blogspot.**com/2010/01/hsvmergepy.html<http://fwarmerdam.blogspot.com/2010/01/hsvmergepy.html>
>>
>> I find replacing the entire intensity band always a bit harsh since for
>> flat
>> area's you would like to stick to your original color/data.
>>
>> This can be done by normalizing the hillshade band with the zenith angle
>> used to create is. Following the hsv_merge.py script on Franks blog, the
>> original replacement of:
>> /hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], v] )/
>>
>> Woud become something like:
>> /v_norm = v * hsv[2] / ( 255 * math.cos(zenith * (math.pi / 180.0)))
>>
>> hsv_adjusted = numpy.asarray( [hsv[0], hsv[1], numpy.where( v_norm>  255,
>> 255, v_norm )] )/
>>
>>
>> You have to pay a bit attention to avoid saturating the normalized band.
>> This can be done by choosing a zenith angle wich gives a flat surface a
>> value halfway your range of 0 and 255.
>>
>
> GMT does that for ages. But it doesn't replace the intensity with shading.
> Instead the shading is used to change the saturation of HSV making the
>  facets facing illumination light become brighter and the other become
> darker.
>
> See for example
> http://gmt.soest.hawaii.edu/**gmt/html/GMT_Docs.html#x1-**1420007.17<http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1420007.17>
>
> and
> http://gmt.soest.hawaii.edu/**gmt/html/GMT_Docs.html#x1-**1580008.2<http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1580008.2>
>
> With GMT5 one can compute the shading of a grid and apply it to an image.
> Here  goes a small example of the GMT's test set
> (..\gmt5\trunk\test\grdimage\**orig\readwrite_withgdal.sh)
>
> Even simpler is to use Mirone. We can do the above just with a couple of
> clicks.
>
> Joaquim
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/efb1576a/attachment.html
From dzwarg+gdal at azavea.com  Tue Feb 21 13:38:43 2012
From: dzwarg+gdal at azavea.com (David Zwarg)
Date: Tue Feb 21 13:38:57 2012
Subject: [gdal-dev] Postgis Raster driver improvements.
Message-ID: <CANSnHN0CnCa4BtioetjdN8XnEDcbNZKT5OBSyYGy4CnG3NA+iw@mail.gmail.com>

Hello,

I would like to help add write support and more to the Postgis Raster
driver.  Currently, there is a loader script in the autotest/data directory
for the driver -- when write support is complete, will that script no
longer be necessary? I don't see any corresponding test loading scripts for
any of the other types of drivers.

Also, in many places the driver is "WKTRaster" -- would it be possible to
update the name of the driver to PostgisRaster, or pgRaster, or something
similar? WKTRaster was the name of the spike branch, but raster support was
renamed from WKTRaster when it was brought into Postgis trunk.

Thanks,
Zwarg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/7f4e471f/attachment.html
From warmerdam at pobox.com  Tue Feb 21 14:19:20 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 21 14:19:23 2012
Subject: [gdal-dev] Postgis Raster driver improvements.
In-Reply-To: <CANSnHN0CnCa4BtioetjdN8XnEDcbNZKT5OBSyYGy4CnG3NA+iw@mail.gmail.com>
References: <CANSnHN0CnCa4BtioetjdN8XnEDcbNZKT5OBSyYGy4CnG3NA+iw@mail.gmail.com>
Message-ID: <CA+YzLBe=t87wbiiXexEN=8no-M+zjU7Lo13HfcDSzdgu_-EXhQ@mail.gmail.com>

On Tue, Feb 21, 2012 at 10:38 AM, David Zwarg <dzwarg+gdal@azavea.com> wrote:
> Hello,
>
> I would like to help add write support and more to the Postgis Raster
> driver.? Currently, there is a loader script in the autotest/data directory
> for the driver -- when write support is complete, will that script no longer
> be necessary? I don't see any corresponding test loading scripts for any of
> the other types of drivers.
>
> Also, in many places the driver is "WKTRaster" -- would it be possible to
> update the name of the driver to PostgisRaster, or pgRaster, or something
> similar? WKTRaster was the name of the spike branch, but raster support was
> renamed from WKTRaster when it was brought into Postgis trunk.

David,

Renaming the driver at this point should be ok.  The
driver name is mainly used for creation operations so
if we don't yet support creation it isn't going to break
existing scripts when it changes.

If it would break a lot of stuff, I'd have suggested registering
it twice - once under each name.

I'm looking forward to improvements.  I presume you are
in communication with Jorge who has done most of the
previous work, right?  I think he mentioned the two of you
are collaborating.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jluis at ualg.pt  Tue Feb 21 14:29:32 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Feb 21 14:30:40 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
	<4F43B430.6000005@ualg.pt>
	<CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>
Message-ID: <4F43F09C.1010101@ualg.pt>



> 5) Looked at GMT and I cannot find the options to load two rasters on 
> top of each other.

Tim,

You don't load the two grids on top of one-another. Illumination is NOT 
like transparency. It uses the gradients of the grid, projects it into 
the direction of light and than change the color in the HSV space (the 
S(aturation) component) and converts back to RGB


The links that I sent you have the scripts used to produce the figures. 
You can also look at this one for a very simple illumination in bw, but 
the procedure for color illumination is exactly the same.

http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1300007.5

> 6) MIRONE - again cannot see how to do this from within the application.

Well, I can give you a 'click-recipe' if you want, but Mirone won't be 
able to deal with the such big grids as yours.
Anyway, here is a step-by-step example
https://sites.google.com/site/mironehowtos/basic/shade-illuminations

From joseph.nalluri at gmail.com  Tue Feb 21 14:50:40 2012
From: joseph.nalluri at gmail.com (joseph.nalluri)
Date: Tue Feb 21 14:50:48 2012
Subject: [gdal-dev] learning GDAL with C/C++
Message-ID: <1329853840276-4492722.post@n6.nabble.com>

Hello All,

  I am very pleased to find this forum. This is my first post. Please bear
with me. In my project, I am trying to read in .bil file (hyperspectral
image) into my C/C++ code. ( I haven't done this yet, because I am still
trying to see, how can I do it).
 After I read in, I run some image processing algorithms on it and perform
this on a cluster. Is there a good tutorial/guide on this aspect, which
could help me out.
 Any help would be greatly appreciated. I am just starting out on this.

Thanks,
Joseph

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-learning-GDAL-with-C-C-tp4492722p4492722.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sault.don at gmail.com  Tue Feb 21 14:52:33 2012
From: sault.don at gmail.com (Donovan Cameron)
Date: Tue Feb 21 14:52:48 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <4F43F09C.1010101@ualg.pt>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
	<4F43B430.6000005@ualg.pt>
	<CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>
	<4F43F09C.1010101@ualg.pt>
Message-ID: <CAJo0jfN4B=-CbtHz-VTLRZd9g==tum+zTz2p5j3noPG3NcXghw@mail.gmail.com>

Have you reviewed the article from Tim Sutton: "A workflow for creating
beautiful relief shaded dems using GDAL"[1]?

It has some valuable pointers.

[1]
http://linfiniti.com/2010/12/a-workflow-for-creating-beautiful-relief-shaded-dems-using-gdal/





Donovan

On Tue, Feb 21, 2012 at 12:29 PM, Joaquim Luis <jluis@ualg.pt> wrote:

>
>
>  5) Looked at GMT and I cannot find the options to load two rasters on top
>> of each other.
>>
>
> Tim,
>
> You don't load the two grids on top of one-another. Illumination is NOT
> like transparency. It uses the gradients of the grid, projects it into the
> direction of light and than change the color in the HSV space (the
> S(aturation) component) and converts back to RGB
>
>
> The links that I sent you have the scripts used to produce the figures.
> You can also look at this one for a very simple illumination in bw, but the
> procedure for color illumination is exactly the same.
>
> http://gmt.soest.hawaii.edu/**gmt/html/GMT_Docs.html#x1-**1300007.5<http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1300007.5>
>
>
>  6) MIRONE - again cannot see how to do this from within the application.
>>
>
> Well, I can give you a 'click-recipe' if you want, but Mirone won't be
> able to deal with the such big grids as yours.
> Anyway, here is a step-by-step example
> https://sites.google.com/site/**mironehowtos/basic/shade-**illuminations<https://sites.google.com/site/mironehowtos/basic/shade-illuminations>
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/7982b0ef/attachment-0001.html
From warmerdam at pobox.com  Tue Feb 21 15:08:50 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 21 15:09:09 2012
Subject: [gdal-dev] learning GDAL with C/C++
In-Reply-To: <1329853840276-4492722.post@n6.nabble.com>
References: <1329853840276-4492722.post@n6.nabble.com>
Message-ID: <CA+YzLBdCanR7=LduJxDP4Hmz+1U9DJEanjHBhoV6ozt_hmdatg@mail.gmail.com>

Joseph,

I'd start with http://www.gdal.org/gdal_tutorial.html, the general purpose
API tutorial.  It isn't comprehensive, but I think it is fairly good for the
areas covered.

Note that GDAL does not directly help with distributed processing.  I
assume this is what you mean by running on a cluster.  You could
take care of farming out chunks yourself or have each process on the
cluster use GDAL to read chunks, but be cautious about writing to
one file from multiple processes.

Best regards,
Frank

On Tue, Feb 21, 2012 at 11:50 AM, joseph.nalluri
<joseph.nalluri@gmail.com> wrote:
> Hello All,
>
> ?I am very pleased to find this forum. This is my first post. Please bear
> with me. In my project, I am trying to read in .bil file (hyperspectral
> image) into my C/C++ code. ( I haven't done this yet, because I am still
> trying to see, how can I do it).
> ?After I read in, I run some image processing algorithms on it and perform
> this on a cluster. Is there a good tutorial/guide on this aspect, which
> could help me out.
> ?Any help would be greatly appreciated. I am just starting out on this.
>
> Thanks,
> Joseph
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-learning-GDAL-with-C-C-tp4492722p4492722.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From armin.burger at gmx.net  Tue Feb 21 15:36:19 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Tue Feb 21 15:36:31 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
Message-ID: <4F440043.7080300@gmx.net>

Hi all

I have a question regarding the gdaladdo tool and NODATA pixels:

When using resampling like "average" it seems that along the border of 
DATA and NODATA pixels there happens an averaging also of some of the 
original NODATA pixels (looks like 1-2 pixel width). This way in the 
overviews they get values higher than 0 (0 is defined as NODATA). Using 
this type of data in mapserver leads to small black borders when the 
overviews are taken since the tag
   OFFSITE 0 0 0
does not work anymore for the small border of now only "nearly-black" 
pixels.

I tried to set the metadata NODATA of the images to 0 for each band but 
it had no effect. Only when I use resampling "nearest" then every NODATA 
pixel of the overviews retains the full black 0 0 0.

Is there a way to force to exclude NODATA pixels during the "average" 
resampling so that they retain their NODATA values?

Thanks
Armin

From warmerdam at pobox.com  Tue Feb 21 15:48:55 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 21 15:49:43 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
In-Reply-To: <4F440043.7080300@gmx.net>
References: <4F440043.7080300@gmx.net>
Message-ID: <CA+YzLBdo=VzGj6=tZKnwgARws7UJkLB5nLer7Mk5CW=4vcGZtQ@mail.gmail.com>

Armin,

Reviewing the overview building code in gdal/gcore/overview.cpp
it clearly tries to exclude nodata values from the averaging calculation.
What does the gdalinfo report look like for the file before you run
gdaladdo?

Best regards,

On Tue, Feb 21, 2012 at 12:36 PM, Armin Burger <armin.burger@gmx.net> wrote:
> Hi all
>
> I have a question regarding the gdaladdo tool and NODATA pixels:
>
> When using resampling like "average" it seems that along the border of DATA
> and NODATA pixels there happens an averaging also of some of the original
> NODATA pixels (looks like 1-2 pixel width). This way in the overviews they
> get values higher than 0 (0 is defined as NODATA). Using this type of data
> in mapserver leads to small black borders when the overviews are taken since
> the tag
> ?OFFSITE 0 0 0
> does not work anymore for the small border of now only "nearly-black"
> pixels.
>
> I tried to set the metadata NODATA of the images to 0 for each band but it
> had no effect. Only when I use resampling "nearest" then every NODATA pixel
> of the overviews retains the full black 0 0 0.
>
> Is there a way to force to exclude NODATA pixels during the "average"
> resampling so that they retain their NODATA values?
>
> Thanks
> Armin
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From eadam at co.lincoln.or.us  Tue Feb 21 16:00:32 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue Feb 21 16:01:16 2012
Subject: [gdal-dev] gdal post - boundary polygone for rectified images
In-Reply-To: <CAN50pA-2+znZuFgM6bbaWFY1=M=f-gYwGJf9zNhhtbLbBigVSw@mail.gmail.com>
References: <CAN50pA-2+znZuFgM6bbaWFY1=M=f-gYwGJf9zNhhtbLbBigVSw@mail.gmail.com>
Message-ID: <CACqBkM96XowdGOuSDiYtHcf1H-LbCLGBvwkgQMXytveMA19Uzw@mail.gmail.com>

Gianluca,

> Or if just there is a way to create a vector file showing the boundary of
> the rectified image.
> What I am searching is a script in "gdal style" in order to automate the
> procedure for several rasters without further user input.


OGR has tindex which makes a shapefile outline of rasters,
http://gdal.org/ogrtindex.html

HTH, Eli
From armin.burger at gmx.net  Tue Feb 21 16:17:34 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Tue Feb 21 16:18:22 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
In-Reply-To: <CA+YzLBdo=VzGj6=tZKnwgARws7UJkLB5nLer7Mk5CW=4vcGZtQ@mail.gmail.com>
References: <4F440043.7080300@gmx.net>
	<CA+YzLBdo=VzGj6=tZKnwgARws7UJkLB5nLer7Mk5CW=4vcGZtQ@mail.gmail.com>
Message-ID: <4F4409EE.3050109@gmx.net>

Frank

the original images showed
...
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
...
Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue

Then I tried to set the NODATA value to 0 using Gdal-Python, and 
afterwards they had

Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
   NoData Value=0
Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
   NoData Value=0
Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
   NoData Value=0

But the result was the same, when using "-r average" a 1-2 pixel area of 
the original NODATA values along the border to the DATA areas seem to 
have got pixels with higher values than 0 (at least in Mapserver they 
cannot any more be "hidden" with OFFSITE). Is there a simple way to 
write out the overviews to separate Tiff files so that I can check them 
directly?

Armin


On 21/02/2012 21:48, Frank Warmerdam wrote:
> Armin,
>
> Reviewing the overview building code in gdal/gcore/overview.cpp
> it clearly tries to exclude nodata values from the averaging calculation.
> What does the gdalinfo report look like for the file before you run
> gdaladdo?
>
> Best regards,
>
> On Tue, Feb 21, 2012 at 12:36 PM, Armin Burger<armin.burger@gmx.net>  wrote:
>> Hi all
>>
>> I have a question regarding the gdaladdo tool and NODATA pixels:
>>
>> When using resampling like "average" it seems that along the border of DATA
>> and NODATA pixels there happens an averaging also of some of the original
>> NODATA pixels (looks like 1-2 pixel width). This way in the overviews they
>> get values higher than 0 (0 is defined as NODATA). Using this type of data
>> in mapserver leads to small black borders when the overviews are taken since
>> the tag
>>   OFFSITE 0 0 0
>> does not work anymore for the small border of now only "nearly-black"
>> pixels.
>>
>> I tried to set the metadata NODATA of the images to 0 for each band but it
>> had no effect. Only when I use resampling "nearest" then every NODATA pixel
>> of the overviews retains the full black 0 0 0.
>>
>> Is there a way to force to exclude NODATA pixels during the "average"
>> resampling so that they retain their NODATA values?
>>
>> Thanks
>> Armin
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From warmerdam at pobox.com  Tue Feb 21 16:36:08 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 21 16:36:16 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
In-Reply-To: <4F4409EE.3050109@gmx.net>
References: <4F440043.7080300@gmx.net>
	<CA+YzLBdo=VzGj6=tZKnwgARws7UJkLB5nLer7Mk5CW=4vcGZtQ@mail.gmail.com>
	<4F4409EE.3050109@gmx.net>
Message-ID: <CA+YzLBcjFGrK57WH6SPvX8RwXkET63ALR+Fb7myBvb6ugvM3Yw@mail.gmail.com>

On Tue, Feb 21, 2012 at 1:17 PM, Armin Burger <armin.burger@gmx.net> wrote:
> Then I tried to set the NODATA value to 0 using Gdal-Python, and afterwards
> they had
>
> Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
> ?NoData Value=0
> Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
> ?NoData Value=0
> Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
> ?NoData Value=0
>
> But the result was the same, when using "-r average" a 1-2 pixel area of the
> original NODATA values along the border to the DATA areas seem to have got
> pixels with higher values than 0 (at least in Mapserver they cannot any more
> be "hidden" with OFFSITE). Is there a simple way to write out the overviews
> to separate Tiff files so that I can check them directly?

Armin,

You can use the gdal/apps/dumpoverviews app to write out overviews.  It may
not be built and installed by default.   If you confirm the overviews are built
wrong then please file a ticket, and provide with it a small sample file with
which you encounter the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From dzwarg+gdal at azavea.com  Tue Feb 21 16:48:25 2012
From: dzwarg+gdal at azavea.com (David Zwarg)
Date: Tue Feb 21 16:49:14 2012
Subject: [gdal-dev] Postgis Raster driver improvements.
In-Reply-To: <CA+YzLBe=t87wbiiXexEN=8no-M+zjU7Lo13HfcDSzdgu_-EXhQ@mail.gmail.com>
References: <CANSnHN0CnCa4BtioetjdN8XnEDcbNZKT5OBSyYGy4CnG3NA+iw@mail.gmail.com>
	<CA+YzLBe=t87wbiiXexEN=8no-M+zjU7Lo13HfcDSzdgu_-EXhQ@mail.gmail.com>
Message-ID: <CANSnHN2+AcFNUHyoXpuR+AuuCZd3npJ2xzGWmq+DwZSmqEM65g@mail.gmail.com>

Hi Frank,

Yes, I am modernizing some of the testing scripts for PostGISRaster, and
adding write support in the near future.  I've been in touch with and am
coordinating with Jorge.

I think it was just the test script that used the old name, btw. The driver
is truly called "PostGISRaster", just the test script wasn't up-to-date.

Thanks,
Zwarg

On Tue, Feb 21, 2012 at 2:19 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On Tue, Feb 21, 2012 at 10:38 AM, David Zwarg <dzwarg+gdal@azavea.com>
> wrote:
> > Hello,
> >
> > I would like to help add write support and more to the Postgis Raster
> > driver.  Currently, there is a loader script in the autotest/data
> directory
> > for the driver -- when write support is complete, will that script no
> longer
> > be necessary? I don't see any corresponding test loading scripts for any
> of
> > the other types of drivers.
> >
> > Also, in many places the driver is "WKTRaster" -- would it be possible to
> > update the name of the driver to PostgisRaster, or pgRaster, or something
> > similar? WKTRaster was the name of the spike branch, but raster support
> was
> > renamed from WKTRaster when it was brought into Postgis trunk.
>
> David,
>
> Renaming the driver at this point should be ok.  The
> driver name is mainly used for creation operations so
> if we don't yet support creation it isn't going to break
> existing scripts when it changes.
>
> If it would break a lot of stuff, I'd have suggested registering
> it twice - once under each name.
>
> I'm looking forward to improvements.  I presume you are
> in communication with Jorge who has done most of the
> previous work, right?  I think he mentioned the two of you
> are collaborating.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/2620270a/attachment-0001.html
From jzl5325 at psu.edu  Tue Feb 21 19:54:23 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Tue Feb 21 20:51:39 2012
Subject: [gdal-dev] gdalwarp extent issues
Message-ID: <CA+bfmPuWDbw1C2H3474zaw7_gRUd5uC2D6GeHprNZ+cdH-gggQ@mail.gmail.com>

List,

I am attempting to reproject 8 gtiffs, each in a local equirectangular
projection, back to gcs for use in geoserver.  I immediately went to
gdalwarp to perform this task and am having an issue.  The input files are
stored in positive longitude, while the output SRS is in negative
longitude.  The "shift" to negative longitude is a primary reason for
wishing to perform the warp.

The input images which cover 0-90 north and 0-90 south are warping
correctly.  The others are not.

The other warped output images have an extent of -180 180, when the should
cover 90 degrees.  The images which remain in positive longitude are
drawing correctly, but have the remained of the extent filled in black.
 Meaning the image which spans 90-180n and 90-180s renders, but has an
extent of -180 to 180.  The input image which are shifted to negative
longitude have a global extent and are completely black.

I have tried the following without success:

gdalwarp -t_srs moon2000.prf input output_warped.tif

gdalwarp -s_srs <copy of the gdalinfo srs information in a prf> -t_srs
moon2000.prf input.tif output.tif

gdalwarp -t_srs moon2000.prf -te <desired extent as xmin ymin xmax ymax>
input.tif output.tif

Where moon2000.prf is:

GEOGCS["Moon 2000",
    DATUM["D_Moon_2000",
        SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
    PRIMEM["Greenwich",0],
    UNIT["Decimal_Degree",0.0174532925199433]]

Any insight would be greatly appreciated.
Jay

Here is the projection info as output by gdalinfo:

Coordinate System is:
PROJCS["EQUIRECTANGULAR MOON",
    GEOGCS["GCS_MOON",
        DATUM["D_MOON",
            SPHEROID["MOON_localRadius",1737400,0]],
        PRIMEM["Reference_Meridian",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Equirectangular"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["standard_parallel_1",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (100.000000000000000,1819400.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)

The coordinate information:
Corner Coordinates:
Upper Left  (     100.000, 1819400.000) (  0d 0'11.87"E, 59d59'59.88"N)
Lower Left  (     100.000,    -100.000) (  0d 0'11.87"E,  0d 0'11.87"S)
Upper Right ( 2729200.000, 1819400.000) ( 90d 0'11.69"E, 59d59'59.88"N)
Lower Right ( 2729200.000,    -100.000) ( 90d 0'11.69"E,  0d 0'11.87"S)
Center      ( 1364650.000,  909650.000) ( 45d 0'11.78"E, 29d59'54.00"N)

Oddly the central meridian and standard_parallel_1 parameters do not change
with each input file.  Since I know that gdal can see the s_srs from within
the files I have tried using:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/8c067867/attachment.html
From jdmorgan at unca.edu  Tue Feb 21 22:16:49 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Tue Feb 21 22:16:57 2012
Subject: [gdal-dev] comparing two rasters
Message-ID: <4F445E21.1050904@gmail.com>

Hello GDAL guru's,

I am working on a python script where I read in two rasters of similar 
extent and resolution.Then I re-assign any values that are greater that 
zero to a 1.Next, I compare to the rasters and attempt to create a third 
resulting raster which has 1's everywhere that the two input rasters 
match up.However, my results are not exactly as expected.  The third 
raster only has the values of the second raster. Any help would be 
greatly appreciated.Here is the script as it is now:

#!/usr/bin/python

from osgeo import gdal, osr, gdalconst

import os, sys, time

import struct

import numpy as np

np.set_printoptions(threshold='nan')

gdal.AllRegister()

print 'Raster Source 1------------------'

ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)

cols1 = ds1.RasterXSize

rows1 = ds1.RasterYSize

bands1 = ds1.RasterCount

print "Columns: " + str(cols1)

print "Rows: " + str(rows1)

print "Bands: " + str(bands1)

gt1 = ds1.GetGeoTransform()

width = ds1.RasterXSize

height = ds1.RasterYSize

minx = gt1[0]

print "Left(minx): "+ str(minx)

miny = gt1[3] + width*gt1[4] + height*gt1[5]

print "Bottom(miny): "+ str(miny)

maxx = gt1[0] + width*gt1[1] + height*gt1[2]

print "Right(maxx): "+ str(maxx)

maxy = gt1[3]

print "Top(maxy): "+ str(maxy)

pixWidth = gt1[1]

print "Pixel Width " + str(pixWidth)

pixHeight = gt1[5]

print "Pixel Height " + str(pixHeight)

xOrigin = gt1[0]

yOrigin = gt1[3]

print 'Raster Source 2------------------'

ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)

cols2 = ds2.RasterXSize

rows2 = ds2.RasterYSize

bands2 = ds2.RasterCount

print "Columns: " + str(cols2)

print "Rows: " + str(rows2)

print "Bands: " + str(bands2)

gt2 = ds2.GetGeoTransform()

width = ds2.RasterXSize

height = ds2.RasterYSize

minx = gt2[0]

print "Left(minx): "+ str(minx)

miny = gt2[3] + width*gt2[4] + height*gt2[5]

print "Bottom(miny): "+ str(miny)

maxx = gt2[0] + width*gt2[1] + height*gt2[2]

print "Right(maxx): "+ str(maxx)

maxy = gt2[3]

print "Top(maxy): "+ str(maxy)

pixWidth = gt2[1]

print "Pixel Width " + str(pixWidth)

pixHeight = gt2[5]

print "Pixel Height " + str(pixHeight)

xOrigin = gt2[0]

yOrigin = gt2[3]

format = "HFA"

dst_file = "out.img"

dst_driver = gdal.GetDriverByName(format)

dst_ds = dst_driver.Create(dst_file, width, height, 1, gdal.GDT_Byte ) 
#driver.Create( outfile, outwidth, outheight, numbands, gdaldatatype)

empty = np.empty([height, width], np.uint8 )

srs = osr.SpatialReference()

dst_ds.SetProjection(ds2.GetProjection())

dst_ds.SetGeoTransform(ds2.GetGeoTransform())

dst_ds.GetRasterBand(1).WriteArray(empty)

#This is a way to go through a given raster band

#one-by-one as an array by row, getting all of the columns for

for r in range(rows1):

data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)

data1[data1>0]=1

print "data1: " + str(data1)

data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)

data2[data2>0]=1

print "data2: " + str(data2)

result_bools = np.logical_and(np.logical_and(data1 != 0, data2 != 0), 
data1 == data2)

result_ints = np.array(result_bools, dtype=int)

print "result_ints: " + str(result_ints)

dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)

dst_ds = None

Cheers,

Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120221/aecb1250/attachment-0001.html
From spethm at landcareresearch.co.nz  Tue Feb 21 22:31:21 2012
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Tue Feb 21 22:32:39 2012
Subject: [gdal-dev] Using SWIG from a Driver
Message-ID: <4F446189.8020304@landcareresearch.co.nz>

Greetings GDAL devs,
   I am interested in developing a GDAL driver that calls out to a Java 
library that accesses a database that we are developing using SWIG's 
Java Bindings.  Are there any examples of existing GDAL drivers using 
the SWIG bindings?  If not, how might I use the SWIG library from a new 
GDAL driver?

I've noticed there are 2 usages of Java from a GDAL driver.  Frank 
pointed out to me (ogr/ogrsf_frmts/ili) and mdb (ogr/ogrsf_frmts/mdb).  
Both of these driver's use JNI.  The reason I want to use SWIG is to 
avoid having to deal with the added configuration of JNI (since SWIG 
handles that already).

Thanks!

-- 
Michael Speth
Research Systems Developer
Landcare Research

From chaitanya.ch at gmail.com  Tue Feb 21 23:33:29 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 21 23:33:48 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <4F445E21.1050904@gmail.com>
References: <4F445E21.1050904@gmail.com>
Message-ID: <CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>

Derek,

Can you explain the following lines towards the bottom of the script?
data1[data1>0]=1
...
data2[data2>0]=1


On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu> wrote:

>  Hello GDAL guru?s,
>
> I am working on a python script where I read in two rasters of similar
> extent and resolution.  Then I re-assign any values that are greater that
> zero to a 1.  Next, I compare to the rasters and attempt to create a
> third resulting raster which has 1?s everywhere that the two input rasters
> match up.  However, my results are not exactly as expected.  The third
> raster only has the values of the second raster. Any help would be
> greatly appreciated.  Here is the script as it is now:
>
> #!/usr/bin/python
>
> from osgeo import gdal, osr, gdalconst
>
> import os, sys, time
>
> import struct
>
> import numpy as np
>
> np.set_printoptions(threshold='nan')
>
> gdal.AllRegister()
>
> print 'Raster Source 1------------------'
>
> ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>
> cols1 = ds1.RasterXSize
>
> rows1 = ds1.RasterYSize
>
> bands1 = ds1.RasterCount
>
> print "Columns: " + str(cols1)
>
> print "Rows: " + str(rows1)
>
> print "Bands: " + str(bands1)
>
> gt1 = ds1.GetGeoTransform()
>
> width = ds1.RasterXSize
>
> height = ds1.RasterYSize
>
> minx = gt1[0]
>
> print "Left(minx): "+ str(minx)
>
> miny = gt1[3] + width*gt1[4] + height*gt1[5]
>
> print "Bottom(miny): "+ str(miny)
>
> maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>
> print "Right(maxx): "+ str(maxx)
>
> maxy = gt1[3]
>
> print "Top(maxy): "+ str(maxy)
>
> pixWidth = gt1[1]
>
> print "Pixel Width " + str(pixWidth)
>
> pixHeight = gt1[5]
>
> print "Pixel Height " + str(pixHeight)
>
> xOrigin = gt1[0]
>
> yOrigin = gt1[3]
>
> print 'Raster Source 2------------------'
>
> ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)
>
> cols2 = ds2.RasterXSize
>
> rows2 = ds2.RasterYSize
>
> bands2 = ds2.RasterCount
>
> print "Columns: " + str(cols2)
>
> print "Rows: " + str(rows2)
>
> print "Bands: " + str(bands2)
>
> gt2 = ds2.GetGeoTransform()
>
> width = ds2.RasterXSize
>
> height = ds2.RasterYSize
>
> minx = gt2[0]
>
> print "Left(minx): "+ str(minx)
>
> miny = gt2[3] + width*gt2[4] + height*gt2[5]
>
> print "Bottom(miny): "+ str(miny)
>
> maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>
> print "Right(maxx): "+ str(maxx)
>
> maxy = gt2[3]
>
> print "Top(maxy): "+ str(maxy)
>
> pixWidth = gt2[1]
>
> print "Pixel Width " + str(pixWidth)
>
> pixHeight = gt2[5]
>
> print "Pixel Height " + str(pixHeight)
>
> xOrigin = gt2[0]
>
> yOrigin = gt2[3]
>
> ** **
>
> ** **
>
> format = "HFA"
>
> dst_file = "out.img"
>
> dst_driver = gdal.GetDriverByName(format)
>
> dst_ds = dst_driver.Create(dst_file, width, height, 1, gdal.GDT_Byte )
> #driver.Create( outfile, outwidth, outheight, numbands, gdaldatatype)
>
> empty = np.empty([height, width], np.uint8 )
>
> srs = osr.SpatialReference()
>
> dst_ds.SetProjection(ds2.GetProjection())
>
> dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>
> dst_ds.GetRasterBand(1).WriteArray(empty)
>
> ** **
>
> ** **
>
> #This is a way to go through a given raster band
>
> #one-by-one as an array by row, getting all of the columns for
>
> for r in range(rows1):
>
>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>
>     data1[data1>0]=1
>
>     print "data1: " + str(data1)
>
>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>
>     data2[data2>0]=1
>
>     print "data2: " + str(data2)
>
>     result_bools = np.logical_and(np.logical_and(data1 != 0, data2 != 0),
> data1 == data2)
>
>     result_ints = np.array(result_bools, dtype=int)
>
>     print "result_ints: " + str(result_ints)
>
>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>
> dst_ds = None
>
> ** **
>
> Cheers,
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/0195c5cb/attachment.html
From sedwards2 at cinci.rr.com  Wed Feb 22 00:33:32 2012
From: sedwards2 at cinci.rr.com (Stuart Edwards)
Date: Wed Feb 22 00:34:48 2012
Subject: [gdal-dev] compiling gdal on Obuntu via Parallels
Message-ID: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>

Hi 

This seems to be an old problem  (see http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but when I try to compile GDAL 1.9.0 from source using Obuntu 10.04 through Parallels Desktop 6.0.12106 on OS X 10.6.8 (don't ask why this convoluted approach - long ESRI related story)  I get the following message during 'make':  

ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or directory.

and indeed, 

ls  /usr/local/gdal/frmts/o 

produces a listing for aaigriddataset.lo , but unlike the other files in the directory, no corresponding aaigriddataset.o

Was this problem ever resolved?

thx for your assistance.

Stu


From Ralf.Suhr at itc-halle.de  Wed Feb 22 03:45:28 2012
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Feb 22 03:46:06 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
In-Reply-To: <4F440043.7080300@gmx.net>
References: <4F440043.7080300@gmx.net>
Message-ID: <201202220945.28346.Ralf.Suhr@itc-halle.de>

Hi Armin,

you can work around with removing the nodata value first, build the overviews 
and setting the nodata value again with gdal_edit.py. The script can be found 
in source directory gdal/swig/python/samples.


Gr
Ralf

On Dienstag 21 Februar 2012 21:36:19 Armin Burger wrote:
> Hi all
> 
> I have a question regarding the gdaladdo tool and NODATA pixels:
> 
> When using resampling like "average" it seems that along the border of
> DATA and NODATA pixels there happens an averaging also of some of the
> original NODATA pixels (looks like 1-2 pixel width). This way in the
> overviews they get values higher than 0 (0 is defined as NODATA). Using
> this type of data in mapserver leads to small black borders when the
> overviews are taken since the tag
>    OFFSITE 0 0 0
> does not work anymore for the small border of now only "nearly-black"
> pixels.
> 
> I tried to set the metadata NODATA of the images to 0 for each band but
> it had no effect. Only when I use resampling "nearest" then every NODATA
> pixel of the overviews retains the full black 0 0 0.
> 
> Is there a way to force to exclude NODATA pixels during the "average"
> resampling so that they retain their NODATA values?
> 
> Thanks
> Armin
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/6c894cc4/attachment-0001.html
From yehil at rafael.co.il  Wed Feb 22 04:41:34 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Feb 22 04:42:13 2012
Subject: [gdal-dev] Multi image segments in NITF file
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7DE209067@MAILBOXSERVER.rf.local>


Hi
Another NITF question.
I want to create an NITF file with more than one image segment. I used the INUM create option to specify the number of image segments.
Gdalinfo reports the correct number of sub datasets.
I've noticed that all of the sub-datasets are created in the same size and pixel format as the main dataset, while the NITF specification permits different size and pixel format.
Is there a way to specify these parameters for sub-datasets (image segments), either when creating the file, or afterwards?

Another question is how do I write data to these sub-datasets? Just use Gdal.Open with the sub-dataset name and rasterIO as usual?

Thanks
Yehiyam Livneh

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/f191a5f6/attachment.html
From jorge.arevalo at deimos-space.com  Wed Feb 22 05:54:39 2012
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed Feb 22 06:03:27 2012
Subject: [gdal-dev] Postgis Raster driver improvements.
In-Reply-To: <CANSnHN2+AcFNUHyoXpuR+AuuCZd3npJ2xzGWmq+DwZSmqEM65g@mail.gmail.com>
References: <CANSnHN0CnCa4BtioetjdN8XnEDcbNZKT5OBSyYGy4CnG3NA+iw@mail.gmail.com>
	<CA+YzLBe=t87wbiiXexEN=8no-M+zjU7Lo13HfcDSzdgu_-EXhQ@mail.gmail.com>
	<CANSnHN2+AcFNUHyoXpuR+AuuCZd3npJ2xzGWmq+DwZSmqEM65g@mail.gmail.com>
Message-ID: <CAK29iX-MsvgAHmkmFO+7c6qwdfFKKi70uCwURq3M8a-1iir_nw@mail.gmail.com>

Hello,

I confirm the driver is called "PostGIS Raster" instead of "WKT
Raster". The old name just remains in testing scripts. The rest is ok.
And I'm in contact with David for everything related with the driver.

Best regards,
Jorge

On Tue, Feb 21, 2012 at 10:48 PM, David Zwarg <dzwarg+gdal@azavea.com> wrote:
> Hi Frank,
>
> Yes, I am modernizing some of the testing scripts for PostGISRaster, and
> adding write support in the near future.? I've been in touch with and am
> coordinating with Jorge.
>
> I think it was just the test script that used the old name, btw. The driver
> is truly called "PostGISRaster", just the test script wasn't up-to-date.
>
> Thanks,
> Zwarg
>
>
> On Tue, Feb 21, 2012 at 2:19 PM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>>
>> On Tue, Feb 21, 2012 at 10:38 AM, David Zwarg <dzwarg+gdal@azavea.com>
>> wrote:
>> > Hello,
>> >
>> > I would like to help add write support and more to the Postgis Raster
>> > driver.? Currently, there is a loader script in the autotest/data
>> > directory
>> > for the driver -- when write support is complete, will that script no
>> > longer
>> > be necessary? I don't see any corresponding test loading scripts for any
>> > of
>> > the other types of drivers.
>> >
>> > Also, in many places the driver is "WKTRaster" -- would it be possible
>> > to
>> > update the name of the driver to PostgisRaster, or pgRaster, or
>> > something
>> > similar? WKTRaster was the name of the spike branch, but raster support
>> > was
>> > renamed from WKTRaster when it was brought into Postgis trunk.
>>
>> David,
>>
>> Renaming the driver at this point should be ok. ?The
>> driver name is mainly used for creation operations so
>> if we don't yet support creation it isn't going to break
>> existing scripts when it changes.
>>
>> If it would break a lot of stuff, I'd have suggested registering
>> it twice - once under each name.
>>
>> I'm looking forward to improvements. ?I presume you are
>> in communication with Jorge who has done most of the
>> previous work, right? ?I think he mentioned the two of you
>> are collaborating.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://www.libregis.org
http://geohash.org/ezjqgrgzz0g
From jdmorgan at unca.edu  Wed Feb 22 06:56:18 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Wed Feb 22 06:56:32 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
References: <4F445E21.1050904@gmail.com>
	<CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
Message-ID: <4F44D7E2.20904@gmail.com>

Hi Chaitanya,
I am using data1[data1>0]=1 to convert any of the values in the row of 
data that is greater than 0 to a one.  I am doing this because the 
values are varied, but I am only interested in the fact that there is a 
value at all.  My end goal is to compare the two input rasters for 
places where they have any data (not zero).  But, as I mentioned I am 
certainly stuck somewhere getting results that I don't expect.

Thanks,
Derek

On 2/21/2012 11:33 PM, Chaitanya kumar CH wrote:
> Derek,
>
> Can you explain the following lines towards the bottom of the script?
> data1[data1>0]=1
> ...
> data2[data2>0]=1
>
>
> On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu 
> <mailto:jdmorgan@unca.edu>> wrote:
>
>     Hello GDAL guru?s,
>
>     I am working on a python script where I read in two rasters of
>     similar extent and resolution.Then I re-assign any values that are
>     greater that zero to a 1.Next, I compare to the rasters and
>     attempt to create a third resulting raster which has 1?s
>     everywhere that the two input rasters match up.However, my results
>     are not exactly as expected.  The third raster only has the values
>     of the second raster. Any help would be greatly appreciated.Here
>     is the script as it is now:
>
>     #!/usr/bin/python
>
>     from osgeo import gdal, osr, gdalconst
>
>     import os, sys, time
>
>     import struct
>
>     import numpy as np
>
>     np.set_printoptions(threshold='nan')
>
>     gdal.AllRegister()
>
>     print 'Raster Source 1------------------'
>
>     ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>
>     cols1 = ds1.RasterXSize
>
>     rows1 = ds1.RasterYSize
>
>     bands1 = ds1.RasterCount
>
>     print "Columns: " + str(cols1)
>
>     print "Rows: " + str(rows1)
>
>     print "Bands: " + str(bands1)
>
>     gt1 = ds1.GetGeoTransform()
>
>     width = ds1.RasterXSize
>
>     height = ds1.RasterYSize
>
>     minx = gt1[0]
>
>     print "Left(minx): "+ str(minx)
>
>     miny = gt1[3] + width*gt1[4] + height*gt1[5]
>
>     print "Bottom(miny): "+ str(miny)
>
>     maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>
>     print "Right(maxx): "+ str(maxx)
>
>     maxy = gt1[3]
>
>     print "Top(maxy): "+ str(maxy)
>
>     pixWidth = gt1[1]
>
>     print "Pixel Width " + str(pixWidth)
>
>     pixHeight = gt1[5]
>
>     print "Pixel Height " + str(pixHeight)
>
>     xOrigin = gt1[0]
>
>     yOrigin = gt1[3]
>
>     print 'Raster Source 2------------------'
>
>     ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)
>
>     cols2 = ds2.RasterXSize
>
>     rows2 = ds2.RasterYSize
>
>     bands2 = ds2.RasterCount
>
>     print "Columns: " + str(cols2)
>
>     print "Rows: " + str(rows2)
>
>     print "Bands: " + str(bands2)
>
>     gt2 = ds2.GetGeoTransform()
>
>     width = ds2.RasterXSize
>
>     height = ds2.RasterYSize
>
>     minx = gt2[0]
>
>     print "Left(minx): "+ str(minx)
>
>     miny = gt2[3] + width*gt2[4] + height*gt2[5]
>
>     print "Bottom(miny): "+ str(miny)
>
>     maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>
>     print "Right(maxx): "+ str(maxx)
>
>     maxy = gt2[3]
>
>     print "Top(maxy): "+ str(maxy)
>
>     pixWidth = gt2[1]
>
>     print "Pixel Width " + str(pixWidth)
>
>     pixHeight = gt2[5]
>
>     print "Pixel Height " + str(pixHeight)
>
>     xOrigin = gt2[0]
>
>     yOrigin = gt2[3]
>
>     format = "HFA"
>
>     dst_file = "out.img"
>
>     dst_driver = gdal.GetDriverByName(format)
>
>     dst_ds = dst_driver.Create(dst_file, width, height, 1,
>     gdal.GDT_Byte ) #driver.Create( outfile, outwidth, outheight,
>     numbands, gdaldatatype)
>
>     empty = np.empty([height, width], np.uint8 )
>
>     srs = osr.SpatialReference()
>
>     dst_ds.SetProjection(ds2.GetProjection())
>
>     dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>
>     dst_ds.GetRasterBand(1).WriteArray(empty)
>
>     #This is a way to go through a given raster band
>
>     #one-by-one as an array by row, getting all of the columns for
>
>     for r in range(rows1):
>
>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>
>     data1[data1>0]=1
>
>     print "data1: " + str(data1)
>
>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>
>     data2[data2>0]=1
>
>     print "data2: " + str(data2)
>
>     result_bools = np.logical_and(np.logical_and(data1 != 0, data2 !=
>     0), data1 == data2)
>
>     result_ints = np.array(result_bools, dtype=int)
>
>     print "result_ints: " + str(result_ints)
>
>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>
>     dst_ds = None
>
>     Cheers,
>
>     Derek
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Derek @ NEMAC

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/8cb4faba/attachment-0001.html
From even.rouault at mines-paris.org  Wed Feb 22 08:40:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 22 08:40:22 2012
Subject: [gdal-dev] Multi image segments in NITF file
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7DE209067@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7DE209067@MAILBOXSERVER.rf.local>
Message-ID: <1329918004.4f44f034a14f6@imp.free.fr>

Selon Livneh Yehiyam <yehil@rafael.co.il>:

>
> Hi
> Another NITF question.
> I want to create an NITF file with more than one image segment. I used the
> INUM create option to specify the number of image segments.
> Gdalinfo reports the correct number of sub datasets.
> I've noticed that all of the sub-datasets are created in the same size and
> pixel format as the main dataset, while the NITF specification permits
> different size and pixel format.
> Is there a way to specify these parameters for sub-datasets (image segments),
> either when creating the file, or afterwards?

No, there's no convenient interface in GDAL for doing that, so this is indeed a
limitation of the driver. Should probably be doable with a specific syntax of a
new creation option though.

>
> Another question is how do I write data to these sub-datasets? Just use
> Gdal.Open with the sub-dataset name and rasterIO as usual?

Yes, that should work.

>
> Thanks
> Yehiyam Livneh
>
>
**********************************************************************************************
> This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE
> SYSTEMS LTD.
> (hereinafter "RAFAEL") contains confidential information intended for a
> specific individual and purpose, may
> constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not
> the intended recipient, you should contact us immediately and thereafter
> delete this message from your
> system. You are hereby notified that any disclosure, copying, dissemination,
> distribution or forwarding of this
> message, or the taking of any action based on it, is strictly prohibited. If
> you have received this e-mail in error,
> please notify us immediately by e-mail mailto:lawraf@rafael.co.il and
> completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
>
**********************************************************************************************




From tjmgis at gmail.com  Wed Feb 22 08:42:45 2012
From: tjmgis at gmail.com (tim martin)
Date: Wed Feb 22 08:43:03 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <CAJo0jfN4B=-CbtHz-VTLRZd9g==tum+zTz2p5j3noPG3NcXghw@mail.gmail.com>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
	<4F43B430.6000005@ualg.pt>
	<CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>
	<4F43F09C.1010101@ualg.pt>
	<CAJo0jfN4B=-CbtHz-VTLRZd9g==tum+zTz2p5j3noPG3NcXghw@mail.gmail.com>
Message-ID: <CACrZSoM-=G60XtWpkVyCFx0OBwD0LpUXVy-duUG5Ezp6UG2Qwg@mail.gmail.com>

Hi Donovan and board

Yes that Tim Sutton tutorial is very good.

I also found this one

http://dirkraffel.com/2011/07/05/best-way-to-merge-color-relief-with-shaded-relief-map/



I ended up following this procedure and it has worked v well. I just setup
a loop to use ImageMagik and combine the two images. And then reapplied the
georeferencing using gdal_translate + world file.

Thanks to all helped, it has made me aware of lots of other options that I
may use in the future

thanks again

Tim

On 21 February 2012 19:52, Donovan Cameron <sault.don@gmail.com> wrote:

> Have you reviewed the article from Tim Sutton: "A workflow for creating
> beautiful relief shaded dems using GDAL"[1]?
>
> It has some valuable pointers.
>
> [1]
> http://linfiniti.com/2010/12/a-workflow-for-creating-beautiful-relief-shaded-dems-using-gdal/
>
>
>
>
>
> Donovan
>
> On Tue, Feb 21, 2012 at 12:29 PM, Joaquim Luis <jluis@ualg.pt> wrote:
>
>>
>>
>>  5) Looked at GMT and I cannot find the options to load two rasters on
>>> top of each other.
>>>
>>
>> Tim,
>>
>> You don't load the two grids on top of one-another. Illumination is NOT
>> like transparency. It uses the gradients of the grid, projects it into the
>> direction of light and than change the color in the HSV space (the
>> S(aturation) component) and converts back to RGB
>>
>>
>> The links that I sent you have the scripts used to produce the figures.
>> You can also look at this one for a very simple illumination in bw, but the
>> procedure for color illumination is exactly the same.
>>
>> http://gmt.soest.hawaii.edu/**gmt/html/GMT_Docs.html#x1-**1300007.5<http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1300007.5>
>>
>>
>>  6) MIRONE - again cannot see how to do this from within the application.
>>>
>>
>> Well, I can give you a 'click-recipe' if you want, but Mirone won't be
>> able to deal with the such big grids as yours.
>> Anyway, here is a step-by-step example
>> https://sites.google.com/site/**mironehowtos/basic/shade-**illuminations<https://sites.google.com/site/mironehowtos/basic/shade-illuminations>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/50a74f6f/attachment.html
From tjmgis at gmail.com  Wed Feb 22 08:51:12 2012
From: tjmgis at gmail.com (tim martin)
Date: Wed Feb 22 08:52:01 2012
Subject: [gdal-dev] Error when importing/exporting to FileGDB
Message-ID: <CACrZSoNYLjCroqfuAEThghWu4RMq4Pa4nAYrfZD+EiWy6eJO9w@mail.gmail.com>

Hi gdalers

I have installed OSGeo4W and have checked the ogr formats and see that
FileGDB is there.

So I then tested a simple ESRI shapefile using the following command

ogr2ogr -f "FileGDB" region.gdb region.shp

this worked and I can see the data in ArcMap.

I then tried a folder of shapefiles using

FOR %%A in (C:\data\*.shp) do (ogr2ogr -f FileGDB data.gdb %%A)

All worked well.

Now when I try to export from PostGIS or try to load data in using python I
get the following error

ERROR 1: Error: Failed at creating table for \Text (General Function
failure)

I then get errors for the other tables etc

I have done a search and found something about using -nlt POINT on gis
stack exchange, however that did not help.

There is also a post about stating the EPSG code, which I tried using
-a_srs EPSG:27700

Neither have helped and now a bit stuck,

Anyone else seen this error or know what is causing it

thanks

Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/d440e448/attachment.html
From nhv at cape.com  Wed Feb 22 08:50:57 2012
From: nhv at cape.com (Norman Vine)
Date: Wed Feb 22 08:58:34 2012
Subject: [gdal-dev] Re: Hillshade + Topographic Map??
In-Reply-To: <CACrZSoM-=G60XtWpkVyCFx0OBwD0LpUXVy-duUG5Ezp6UG2Qwg@mail.gmail.com>
References: <1329818513653-4490698.post@n6.nabble.com>
	<1329833514234-4491709.post@n6.nabble.com>
	<4F43B430.6000005@ualg.pt>
	<CACrZSoPrg2sMymWXVejfuV0LwLdanraqknj2sYLhpQc9qTMCjA@mail.gmail.com>
	<4F43F09C.1010101@ualg.pt>
	<CAJo0jfN4B=-CbtHz-VTLRZd9g==tum+zTz2p5j3noPG3NcXghw@mail.gmail.com>
	<CACrZSoM-=G60XtWpkVyCFx0OBwD0LpUXVy-duUG5Ezp6UG2Qwg@mail.gmail.com>
Message-ID: <D6D3BFFD-04F6-49B3-A8EC-6F203F644659@cape.com>


On Feb 22, 2012, at 8:42 AM, tim martin wrote:

> Hi Donovan and board
> 
> Yes that Tim Sutton tutorial is very good.
> 
> I also found this one
> 
> http://dirkraffel.com/2011/07/05/best-way-to-merge-color-relief-with-shaded-relief-map/ 
> 
> 
> I ended up following this procedure and it has worked v well. I just setup a loop to use ImageMagik and combine the two images. And then reapplied the georeferencing using gdal_translate + world file. 
> 
> Thanks to all helped, it has made me aware of lots of other options that I may use in the future
> 
> thanks again
> 
> Tim

another option is ossim see

http://trac.osgeo.org/ossim/wiki/ossim-dem

Norman

> 
> On 21 February 2012 19:52, Donovan Cameron <sault.don@gmail.com> wrote:
> Have you reviewed the article from Tim Sutton: "A workflow for creating beautiful relief shaded dems using GDAL"[1]?
> 
> It has some valuable pointers.
> 
> [1]  http://linfiniti.com/2010/12/a-workflow-for-creating-beautiful-relief-shaded-dems-using-gdal/ 
> 
> 
> 
> 
> Donovan
> 
> On Tue, Feb 21, 2012 at 12:29 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> 
> 
> 5) Looked at GMT and I cannot find the options to load two rasters on top of each other.
> 
> Tim,
> 
> You don't load the two grids on top of one-another. Illumination is NOT like transparency. It uses the gradients of the grid, projects it into the direction of light and than change the color in the HSV space (the S(aturation) component) and converts back to RGB
> 
> 
> The links that I sent you have the scripts used to produce the figures. You can also look at this one for a very simple illumination in bw, but the procedure for color illumination is exactly the same.
> 
> http://gmt.soest.hawaii.edu/gmt/html/GMT_Docs.html#x1-1300007.5
> 
> 
> 6) MIRONE - again cannot see how to do this from within the application.
> 
> Well, I can give you a 'click-recipe' if you want, but Mirone won't be able to deal with the such big grids as yours.
> Anyway, here is a step-by-step example
> https://sites.google.com/site/mironehowtos/basic/shade-illuminations
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/87f60209/attachment.html
From chaitanya.ch at gmail.com  Wed Feb 22 10:01:02 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 22 10:01:36 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <4F44D7E2.20904@gmail.com>
References: <4F445E21.1050904@gmail.com>
	<CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
	<4F44D7E2.20904@gmail.com>
Message-ID: <CAMKgpOb9Sj0PGhc7OskrrVHZtUVX07y1v4YRMYSecgVer-yAiw@mail.gmail.com>

Try this Derek,

for r in range(rows1):
    data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
    print "data1: " + str(data1)
    data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
    print "data2: " + str(data2)
    result_bools = np.logical_and((data1 > 0), (data2 > 0))
    result_ints = np.array(result_bools, dtype=int)
    print "result_ints: " + str(result_ints)
    dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
dst_ds = None

On Wed, Feb 22, 2012 at 5:26 PM, jdmorgan <jdmorgan@unca.edu> wrote:

>  Hi Chaitanya,
> I am using data1[data1>0]=1 to convert any of the values in the row of
> data that is greater than 0 to a one.  I am doing this because the values
> are varied, but I am only interested in the fact that there is a value at
> all.  My end goal is to compare the two input rasters for places where they
> have any data (not zero).  But, as I mentioned I am certainly stuck
> somewhere getting results that I don't expect.
>
> Thanks,
> Derek
>
>
> On 2/21/2012 11:33 PM, Chaitanya kumar CH wrote:
>
> Derek,
>
> Can you explain the following lines towards the bottom of the script?
> data1[data1>0]=1
> ...
> data2[data2>0]=1
>
>
> On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu> wrote:
>
>>  Hello GDAL guru?s,
>>
>> I am working on a python script where I read in two rasters of similar
>> extent and resolution.  Then I re-assign any values that are greater
>> that zero to a 1.  Next, I compare to the rasters and attempt to create
>> a third resulting raster which has 1?s everywhere that the two input
>> rasters match up.  However, my results are not exactly as expected.  The
>> third raster only has the values of the second raster. Any help would be
>> greatly appreciated.  Here is the script as it is now:
>>
>> #!/usr/bin/python
>>
>> from osgeo import gdal, osr, gdalconst
>>
>> import os, sys, time
>>
>> import struct
>>
>> import numpy as np
>>
>> np.set_printoptions(threshold='nan')
>>
>> gdal.AllRegister()
>>
>> print 'Raster Source 1------------------'
>>
>> ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>>
>> cols1 = ds1.RasterXSize
>>
>> rows1 = ds1.RasterYSize
>>
>> bands1 = ds1.RasterCount
>>
>> print "Columns: " + str(cols1)
>>
>> print "Rows: " + str(rows1)
>>
>> print "Bands: " + str(bands1)
>>
>> gt1 = ds1.GetGeoTransform()
>>
>> width = ds1.RasterXSize
>>
>> height = ds1.RasterYSize
>>
>> minx = gt1[0]
>>
>> print "Left(minx): "+ str(minx)
>>
>> miny = gt1[3] + width*gt1[4] + height*gt1[5]
>>
>> print "Bottom(miny): "+ str(miny)
>>
>> maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>>
>> print "Right(maxx): "+ str(maxx)
>>
>> maxy = gt1[3]
>>
>> print "Top(maxy): "+ str(maxy)
>>
>> pixWidth = gt1[1]
>>
>> print "Pixel Width " + str(pixWidth)
>>
>> pixHeight = gt1[5]
>>
>> print "Pixel Height " + str(pixHeight)
>>
>> xOrigin = gt1[0]
>>
>> yOrigin = gt1[3]
>>
>> print 'Raster Source 2------------------'
>>
>> ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)
>>
>> cols2 = ds2.RasterXSize
>>
>> rows2 = ds2.RasterYSize
>>
>> bands2 = ds2.RasterCount
>>
>> print "Columns: " + str(cols2)
>>
>> print "Rows: " + str(rows2)
>>
>> print "Bands: " + str(bands2)
>>
>> gt2 = ds2.GetGeoTransform()
>>
>> width = ds2.RasterXSize
>>
>> height = ds2.RasterYSize
>>
>> minx = gt2[0]
>>
>> print "Left(minx): "+ str(minx)
>>
>> miny = gt2[3] + width*gt2[4] + height*gt2[5]
>>
>> print "Bottom(miny): "+ str(miny)
>>
>> maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>>
>> print "Right(maxx): "+ str(maxx)
>>
>> maxy = gt2[3]
>>
>> print "Top(maxy): "+ str(maxy)
>>
>> pixWidth = gt2[1]
>>
>> print "Pixel Width " + str(pixWidth)
>>
>> pixHeight = gt2[5]
>>
>> print "Pixel Height " + str(pixHeight)
>>
>> xOrigin = gt2[0]
>>
>> yOrigin = gt2[3]
>>
>>
>>
>>
>>
>> format = "HFA"
>>
>> dst_file = "out.img"
>>
>> dst_driver = gdal.GetDriverByName(format)
>>
>> dst_ds = dst_driver.Create(dst_file, width, height, 1, gdal.GDT_Byte )
>> #driver.Create( outfile, outwidth, outheight, numbands, gdaldatatype)
>>
>> empty = np.empty([height, width], np.uint8 )
>>
>> srs = osr.SpatialReference()
>>
>> dst_ds.SetProjection(ds2.GetProjection())
>>
>> dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>>
>> dst_ds.GetRasterBand(1).WriteArray(empty)
>>
>>
>>
>>
>>
>> #This is a way to go through a given raster band
>>
>> #one-by-one as an array by row, getting all of the columns for
>>
>> for r in range(rows1):
>>
>>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>>
>>     data1[data1>0]=1
>>
>>     print "data1: " + str(data1)
>>
>>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>>
>>     data2[data2>0]=1
>>
>>     print "data2: " + str(data2)
>>
>>     result_bools = np.logical_and(np.logical_and(data1 != 0, data2 !=
>> 0), data1 == data2)
>>
>>     result_ints = np.array(result_bools, dtype=int)
>>
>>     print "result_ints: " + str(result_ints)
>>
>>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>>
>> dst_ds = None
>>
>>
>>
>> Cheers,
>>
>> Derek
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
> --
> Derek @ NEMAC
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/6ab3a11f/attachment-0001.html
From jzl5325 at psu.edu  Wed Feb 22 10:11:31 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Wed Feb 22 10:11:50 2012
Subject: [gdal-dev] gdalwarp extent issues
In-Reply-To: <CAE_VgzPyiRWG-QjOJWM5FtNbULNRAEairbP1yu23vOQHg8_qEg@mail.gmail.com>
References: <CA+bfmPuWDbw1C2H3474zaw7_gRUd5uC2D6GeHprNZ+cdH-gggQ@mail.gmail.com>
	<CAE_VgzPyiRWG-QjOJWM5FtNbULNRAEairbP1yu23vOQHg8_qEg@mail.gmail.com>
Message-ID: <CA+bfmPtJ+Wd+Ho-AV5jnOmvuU246CyBQ3h9zZNNYdXAwJgrDPg@mail.gmail.com>

I can confirm that gdal_retile.py also exhibits this behavior.  I am
testing the shift to negative longitude now to see if that "fixes" the
issue.

Should I also post to the ticket concerning the persistance of this error
in gdal_retile?

Jay

On Wed, Feb 22, 2012 at 9:48 AM, J Luis <jmfluis@gmail.com> wrote:

>
>
> On Wed, Feb 22, 2012 at 12:54 AM, Jay L. <jzl5325@psu.edu> wrote:
>
>> List,
>>
>> I am attempting to reproject 8 gtiffs, each in a local equirectangular
>> projection, back to gcs for use in geoserver.  I immediately went to
>> gdalwarp to perform this task and am having an issue.  The input files are
>> stored in positive longitude, while the output SRS is in negative
>> longitude.  The "shift" to negative longitude is a primary reason for
>> wishing to perform the warp.
>>
>> The input images which cover 0-90 north and 0-90 south are warping
>> correctly.  The others are not.
>>
>> The other warped output images have an extent of -180 180, when the
>> should cover 90 degrees.  The images which remain in positive longitude are
>> drawing correctly, but have the remained of the extent filled in black.
>>  Meaning the image which spans 90-180n and 90-180s renders, but has an
>> extent of -180 to 180.  The input image which are shifted to negative
>> longitude have a global extent and are completely black.
>>
>
> Jay,
>
> I crossed what seams to be the same problem a couple of days ago and
> opened this ticket
> http://trac.osgeo.org/gdal/ticket/4523
> With a bit more of experimenting after that report I found that the, at
> least with global grids, the problem is when they span [0 360]. If they are
> in [-180 180] gdalwarp works fine.
> if you are interested, I have one Mirone solution to warp from [0 360] to
> [-180 180].
>
> Joaquim
>
>
>>
>> I have tried the following without success:
>>
>> gdalwarp -t_srs moon2000.prf input output_warped.tif
>>
>> gdalwarp -s_srs <copy of the gdalinfo srs information in a prf> -t_srs
>> moon2000.prf input.tif output.tif
>>
>> gdalwarp -t_srs moon2000.prf -te <desired extent as xmin ymin xmax ymax>
>> input.tif output.tif
>>
>> Where moon2000.prf is:
>>
>> GEOGCS["Moon 2000",
>>     DATUM["D_Moon_2000",
>>         SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["Decimal_Degree",0.0174532925199433]]
>>
>> Any insight would be greatly appreciated.
>> Jay
>>
>> Here is the projection info as output by gdalinfo:
>>
>> Coordinate System is:
>> PROJCS["EQUIRECTANGULAR MOON",
>>     GEOGCS["GCS_MOON",
>>         DATUM["D_MOON",
>>             SPHEROID["MOON_localRadius",1737400,0]],
>>         PRIMEM["Reference_Meridian",0],
>>         UNIT["degree",0.0174532925199433]],
>>     PROJECTION["Equirectangular"],
>>     PARAMETER["latitude_of_origin",0],
>>     PARAMETER["central_meridian",0],
>>     PARAMETER["standard_parallel_1",0],
>>     PARAMETER["false_easting",0],
>>     PARAMETER["false_northing",0],
>>     UNIT["metre",1,
>>         AUTHORITY["EPSG","9001"]]]
>> Origin = (100.000000000000000,1819400.000000000000000)
>> Pixel Size = (100.000000000000000,-100.000000000000000)
>>
>> The coordinate information:
>> Corner Coordinates:
>> Upper Left  (     100.000, 1819400.000) (  0d 0'11.87"E, 59d59'59.88"N)
>> Lower Left  (     100.000,    -100.000) (  0d 0'11.87"E,  0d 0'11.87"S)
>> Upper Right ( 2729200.000, 1819400.000) ( 90d 0'11.69"E, 59d59'59.88"N)
>> Lower Right ( 2729200.000,    -100.000) ( 90d 0'11.69"E,  0d 0'11.87"S)
>> Center      ( 1364650.000,  909650.000) ( 45d 0'11.78"E, 29d59'54.00"N)
>>
>> Oddly the central meridian and standard_parallel_1 parameters do not
>> change with each input file.  Since I know that gdal can see the s_srs from
>> within the files I have tried using:
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/906a9a11/attachment.html
From even.rouault at mines-paris.org  Wed Feb 22 10:13:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 22 10:14:31 2012
Subject: [gdal-dev] Using SWIG from a Driver
In-Reply-To: <4F446189.8020304@landcareresearch.co.nz>
References: <4F446189.8020304@landcareresearch.co.nz>
Message-ID: <1329923637.4f45063531fd1@webmail.free.fr>

Selon Michael Speth <spethm@landcareresearch.co.nz>:

> Greetings GDAL devs,
>    I am interested in developing a GDAL driver that calls out to a Java
> library that accesses a database that we are developing using SWIG's
> Java Bindings.  Are there any examples of existing GDAL drivers using
> the SWIG bindings?

Not that I am aware of, and not in GDAL source tree for sure.

> If not, how might I use the SWIG library from a new
> GDAL driver?
>
> I've noticed there are 2 usages of Java from a GDAL driver.  Frank
> pointed out to me (ogr/ogrsf_frmts/ili) and mdb (ogr/ogrsf_frmts/mdb).
> Both of these driver's use JNI.  The reason I want to use SWIG is to
> avoid having to deal with the added configuration of JNI (since SWIG
> handles that already).

I'm not sure if you can call Java code with SWIG. Perhaps, but that's perhaps
more a question for a SWIG mailing list. I don't see how the code of the GDAL
SWIG bindings could help you since you will use a dedicated API for your Java
library.

>
> Thanks!
>
> --
> Michael Speth
> Research Systems Developer
> Landcare Research
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Wed Feb 22 10:16:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 22 10:16:47 2012
Subject: [gdal-dev] compiling gdal on Obuntu via Parallels
In-Reply-To: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
Message-ID: <1329923765.4f4506b5a9e1a@imp.free.fr>

Selon Stuart Edwards <sedwards2@cinci.rr.com>:

> Hi
>
> This seems to be an old problem  (see
> http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but when I
> try to compile GDAL 1.9.0 from source using Obuntu 10.04 through Parallels
> Desktop 6.0.12106 on OS X 10.6.8 (don't ask why this convoluted approach -
> long ESRI related story)  I get the following message during 'make':
>
> ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or directory.
>
> and indeed,
>
> ls  /usr/local/gdal/frmts/o
>
> produces a listing for aaigriddataset.lo , but unlike the other files in the
> directory, no corresponding aaigriddataset.o

Perhaps try ./configure --without-libtool . But no promise this will help
From jluis at ualg.pt  Wed Feb 22 09:50:09 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Feb 22 10:54:55 2012
Subject: [gdal-dev] gdalwarp extent issues
In-Reply-To: <CA+bfmPuWDbw1C2H3474zaw7_gRUd5uC2D6GeHprNZ+cdH-gggQ@mail.gmail.com>
References: <CA+bfmPuWDbw1C2H3474zaw7_gRUd5uC2D6GeHprNZ+cdH-gggQ@mail.gmail.com>
Message-ID: <4F4500A1.4020403@ualg.pt>

On 22-02-2012 00:54, Jay L. wrote:
> List,
>
> I am attempting to reproject 8 gtiffs, each in a local equirectangular 
> projection, back to gcs for use in geoserver.  I immediately went to 
> gdalwarp to perform this task and am having an issue.  The input files 
> are stored in positive longitude, while the output SRS is in negative 
> longitude.  The "shift" to negative longitude is a primary reason for 
> wishing to perform the warp.
>
> The input images which cover 0-90 north and 0-90 south are warping 
> correctly.  The others are not.
>
> The other warped output images have an extent of -180 180, when the 
> should cover 90 degrees.  The images which remain in positive 
> longitude are drawing correctly, but have the remained of the extent 
> filled in black.  Meaning the image which spans 90-180n and 90-180s 
> renders, but has an extent of -180 to 180.  The input image which are 
> shifted to negative longitude have a global extent and 
> are completely black.

Jay,

I crossed what seams to be the same problem a couple of days ago and 
opened this ticket
http://trac.osgeo.org/gdal/ticket/4523
With a bit more of experimenting after that report I found that the, at 
least with global grids, the problem is when they span [0 360]. If they 
are in [-180 180] gdalwarp works fine.
if you are interested, I have one Mirone solution to warp from [0 360] 
to [-180 180].

Joaquim

>
> I have tried the following without success:
>
> gdalwarp -t_srs moon2000.prf input output_warped.tif
>
> gdalwarp -s_srs <copy of the gdalinfo srs information in a prf> -t_srs 
> moon2000.prf input.tif output.tif
>
> gdalwarp -t_srs moon2000.prf -te <desired extent as xmin ymin xmax 
> ymax> input.tif output.tif
>
> Where moon2000.prf is:
>
> GEOGCS["Moon 2000",
>     DATUM["D_Moon_2000",
>         SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
>     PRIMEM["Greenwich",0],
>     UNIT["Decimal_Degree",0.0174532925199433]]
>
> Any insight would be greatly appreciated.
> Jay
>
> Here is the projection info as output by gdalinfo:
>
> Coordinate System is:
> PROJCS["EQUIRECTANGULAR MOON",
>     GEOGCS["GCS_MOON",
>         DATUM["D_MOON",
>             SPHEROID["MOON_localRadius",1737400,0]],
>         PRIMEM["Reference_Meridian",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Equirectangular"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",0],
>     PARAMETER["standard_parallel_1",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (100.000000000000000,1819400.000000000000000)
> Pixel Size = (100.000000000000000,-100.000000000000000)
>
> The coordinate information:
> Corner Coordinates:
> Upper Left  (     100.000, 1819400.000) (  0d 0'11.87"E, 59d59'59.88"N)
> Lower Left  (     100.000,    -100.000) (  0d 0'11.87"E,  0d 0'11.87"S)
> Upper Right ( 2729200.000, 1819400.000) ( 90d 0'11.69"E, 59d59'59.88"N)
> Lower Right ( 2729200.000,    -100.000) ( 90d 0'11.69"E,  0d 0'11.87"S)
> Center      ( 1364650.000,  909650.000) ( 45d 0'11.78"E, 29d59'54.00"N)
>
> Oddly the central meridian and standard_parallel_1 parameters do not 
> change with each input file.  Since I know that gdal can see the s_srs 
> from within the files I have tried using:
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/4fe4e0bc/attachment-0001.html
From sedwards2 at cinci.rr.com  Wed Feb 22 11:33:13 2012
From: sedwards2 at cinci.rr.com (Stuart Edwards)
Date: Wed Feb 22 11:33:48 2012
Subject: [gdal-dev] compiling gdal on Ubuntu via Parallels
In-Reply-To: <1329923765.4f4506b5a9e1a@imp.free.fr>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
Message-ID: <6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>


On Feb 22, 2012, at 10:16 AM, Even Rouault wrote:

> Selon Stuart Edwards <sedwards2@cinci.rr.com>:
> 
>> Hi
>> 
>> This seems to be an old problem  (see
>> http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but when I
>> try to compile GDAL 1.9.0 from source using Ubuntu 10.04 through Parallels
>> Desktop 6.0.12106 on OS X 10.6.8 (don't ask why this convoluted approach -
>> long ESRI related story)  I get the following message during 'make':
>> 
>> ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or directory.
>> 
>> and indeed,
>> 
>> ls  /usr/local/gdal/frmts/o
>> 
>> produces a listing for aaigriddataset.lo , but unlike the other files in the
>> directory, no corresponding aaigriddataset.o
> 
> Perhaps try ./configure --without-libtool . But no promise this will help

seemed to compile without problem, but then gdalinfo gives ' gedalinfo: error while loading shared libraries: libgdal.so: cannot open shared object file: No such file or directory'

thx for the help

Stu

From even.rouault at mines-paris.org  Wed Feb 22 11:41:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 22 11:41:51 2012
Subject: [gdal-dev] compiling gdal on Ubuntu via Parallels
In-Reply-To: <6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
Message-ID: <1329928892.4f451abcaf38d@imp.free.fr>

Selon Stuart Edwards <sedwards2@cinci.rr.com>:

>
> On Feb 22, 2012, at 10:16 AM, Even Rouault wrote:
>
> > Selon Stuart Edwards <sedwards2@cinci.rr.com>:
> >
> >> Hi
> >>
> >> This seems to be an old problem  (see
> >> http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but when
> I
> >> try to compile GDAL 1.9.0 from source using Ubuntu 10.04 through Parallels
> >> Desktop 6.0.12106 on OS X 10.6.8 (don't ask why this convoluted approach -
> >> long ESRI related story)  I get the following message during 'make':
> >>
> >> ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or
> directory.
> >>
> >> and indeed,
> >>
> >> ls  /usr/local/gdal/frmts/o
> >>
> >> produces a listing for aaigriddataset.lo , but unlike the other files in
> the
> >> directory, no corresponding aaigriddataset.o
> >
> > Perhaps try ./configure --without-libtool . But no promise this will help
>
> seemed to compile without problem, but then gdalinfo gives ' gedalinfo: error
> while loading shared libraries: libgdal.so: cannot open shared object file:
> No such file or directory'

You need to set the LD_LIBRARY_PATH to point to the directory where libgdal.so
is, or alternatively 'make install' (and make sure that the ${prefix_root}/lib
is in the searchable library path)

>
> thx for the help
>
> Stu
>
>


From KShannon at gcs-research.com  Wed Feb 22 11:41:08 2012
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Feb 22 11:53:47 2012
Subject: [gdal-dev] compiling gdal on Ubuntu via Parallels
In-Reply-To: <6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B94281D649@MAIL.gcs-research.net>

On newer Ubuntu releases /usr/local/lib is not in the LD_LIBRARY_PATH.  Either set it in your login script (export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH or add /usr/local/lib to /etc/ld.so.conf 

If you do the latter method, run sudo ldconfig after you are done and it should work.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Stuart Edwards
Sent: Wednesday, February 22, 2012 9:33 AM
To: Even Rouault
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] compiling gdal on Ubuntu via Parallels


On Feb 22, 2012, at 10:16 AM, Even Rouault wrote:

> Selon Stuart Edwards <sedwards2@cinci.rr.com>:
> 
>> Hi
>> 
>> This seems to be an old problem  (see
>> http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but 
>> when I try to compile GDAL 1.9.0 from source using Ubuntu 10.04 
>> through Parallels Desktop 6.0.12106 on OS X 10.6.8 (don't ask why 
>> this convoluted approach - long ESRI related story)  I get the following message during 'make':
>> 
>> ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or directory.
>> 
>> and indeed,
>> 
>> ls  /usr/local/gdal/frmts/o
>> 
>> produces a listing for aaigriddataset.lo , but unlike the other files 
>> in the directory, no corresponding aaigriddataset.o
> 
> Perhaps try ./configure --without-libtool . But no promise this will 
> help

seemed to compile without problem, but then gdalinfo gives ' gedalinfo: error while loading shared libraries: libgdal.so: cannot open shared object file: No such file or directory'

thx for the help

Stu

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From sedwards2 at cinci.rr.com  Wed Feb 22 12:55:40 2012
From: sedwards2 at cinci.rr.com (Stuart Edwards)
Date: Wed Feb 22 12:55:45 2012
Subject: [gdal-dev] compiling gdal on Ubuntu via Parallels
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B94281D649@MAIL.gcs-research.net>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<2DD24CD6225DC04C81CF12523261F4B94281D649@MAIL.gcs-research.net>
Message-ID: <1700DA2E-8D95-4A17-AEEA-66E60F45E3F6@cinci.rr.com>

that seems to have taken care of the problem - thanks!

Stu

On Feb 22, 2012, at 11:41 AM, Kyle Shannon wrote:

> On newer Ubuntu releases /usr/local/lib is not in the LD_LIBRARY_PATH.  Either set it in your login script (export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH or add /usr/local/lib to /etc/ld.so.conf 
> 
> If you do the latter method, run sudo ldconfig after you are done and it should work.
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Stuart Edwards
> Sent: Wednesday, February 22, 2012 9:33 AM
> To: Even Rouault
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] compiling gdal on Ubuntu via Parallels
> 
> 
> On Feb 22, 2012, at 10:16 AM, Even Rouault wrote:
> 
>> Selon Stuart Edwards <sedwards2@cinci.rr.com>:
>> 
>>> Hi
>>> 
>>> This seems to be an old problem  (see
>>> http://www.osgeo.org/pipermail/gdal-dev/2009-October/022308.html) but 
>>> when I try to compile GDAL 1.9.0 from source using Ubuntu 10.04 
>>> through Parallels Desktop 6.0.12106 on OS X 10.6.8 (don't ask why 
>>> this convoluted approach - long ESRI related story)  I get the following message during 'make':
>>> 
>>> ar:   /usr/local/gdal/frmts/o/aaigriddataset.o:   No such file or directory.
>>> 
>>> and indeed,
>>> 
>>> ls  /usr/local/gdal/frmts/o
>>> 
>>> produces a listing for aaigriddataset.lo , but unlike the other files 
>>> in the directory, no corresponding aaigriddataset.o
>> 
>> Perhaps try ./configure --without-libtool . But no promise this will 
>> help
> 
> seemed to compile without problem, but then gdalinfo gives ' gedalinfo: error while loading shared libraries: libgdal.so: cannot open shared object file: No such file or directory'
> 
> thx for the help
> 
> Stu
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From armin.burger at gmx.net  Wed Feb 22 14:36:52 2012
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Feb 22 14:37:43 2012
Subject: [gdal-dev] gdaladdo, overviews and NODATA
In-Reply-To: <CA+YzLBcjFGrK57WH6SPvX8RwXkET63ALR+Fb7myBvb6ugvM3Yw@mail.gmail.com>
References: <4F440043.7080300@gmx.net>
	<CA+YzLBdo=VzGj6=tZKnwgARws7UJkLB5nLer7Mk5CW=4vcGZtQ@mail.gmail.com>
	<4F4409EE.3050109@gmx.net>
	<CA+YzLBcjFGrK57WH6SPvX8RwXkET63ALR+Fb7myBvb6ugvM3Yw@mail.gmail.com>
Message-ID: <4F4543D4.50806@gmx.net>



On 21/02/2012 22:36, Frank Warmerdam wrote:
> On Tue, Feb 21, 2012 at 1:17 PM, Armin Burger<armin.burger@gmx.net>  wrote:
>> Then I tried to set the NODATA value to 0 using Gdal-Python, and afterwards
>> they had
>>
>> Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
>>   NoData Value=0
>> Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
>>   NoData Value=0
>> Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
>>   NoData Value=0
>>
>> But the result was the same, when using "-r average" a 1-2 pixel area of the
>> original NODATA values along the border to the DATA areas seem to have got
>> pixels with higher values than 0 (at least in Mapserver they cannot any more
>> be "hidden" with OFFSITE). Is there a simple way to write out the overviews
>> to separate Tiff files so that I can check them directly?
>
> Armin,
>
> You can use the gdal/apps/dumpoverviews app to write out overviews.  It may
> not be built and installed by default.   If you confirm the overviews are built
> wrong then please file a ticket, and provide with it a small sample file with
> which you encounter the problem.
>
> Best regards,

Frank

I checked the overviews after dumping them into Tiff files. I could not 
see anything strange with them along the border DATA-NODATA. The 
supposed NODATA pixels all had value 0 in all bands. So the problem 
seems a bit related how Mapserver handles the files. Strangely enough 
that the problem does not appear when the OV are created with nearest 
resampling. Being somehow more related to Mapserver I filed a ticket there

http://trac.osgeo.org/mapserver/ticket/4210

But the ticket owner are already you anyway ;-)

I could not upload a small test image due to file size restrictions (the 
zip has 3 MB). Should I send the file to you or someone else via mail?

I discovered an additional strange effect when using the layer 
processing parameter
   PROCESSING "RESAMPLE=BILINEAR"

which will create partially colored effects along the DATA-NODATA line. 
All of this happens just in the case that this line is not exactly 
horizontal or vertical but oblique due to image warping. I will create 
another ticket for this. So far it seems that I can use no "smoothing" 
via resampling, neither with overviews nor with the layer definition 
without having some "border effects".

Thanks

Armin

From ealpert at digitalglobe.com  Wed Feb 22 18:31:55 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Feb 22 18:36:06 2012
Subject: [gdal-dev] SetSpatialFilter
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23308F3351D@COMAIL01.digitalglobe.com>

Is it still true that the geometry used for SetSpatialFilter must have
the same CRS as the layer?


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120222/db579ba7/attachment.html
From even.rouault at mines-paris.org  Wed Feb 22 18:43:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 22 18:43:28 2012
Subject: [gdal-dev] SetSpatialFilter
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23308F3351D@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23308F3351D@COMAIL01.digitalglobe.com>
Message-ID: <201202230043.19272.even.rouault@mines-paris.org>

Le jeudi 23 f?vrier 2012 00:31:55, Ethan Alpert a ?crit :
> Is it still true that the geometry used for SetSpatialFilter must have
> the same CRS as the layer?

Yes, the only OGR driver that does the reprojection that I'm aware of  is the 
FileGDB driver. Other drivers will happily ignore any CRS set on the geometry 
passed to SetSpatialFilter

> 
> 
> This electronic communication and any attachments may contain confidential
> and proprietary information of DigitalGlobe, Inc. If you are not the
> intended recipient, or an agent or employee responsible for delivering
> this communication to the intended recipient, or if you have received this
> communication in error, please do not print, copy, retransmit, disseminate
> or otherwise use the information. Please indicate to the sender that you
> have received this communication in error, and delete the copy you
> received. DigitalGlobe reserves the right to monitor any electronic
> communication sent or received by its employees, agents or
> representatives.
From joseph.nalluri at gmail.com  Wed Feb 22 22:12:21 2012
From: joseph.nalluri at gmail.com (joseph.nalluri)
Date: Wed Feb 22 22:13:01 2012
Subject: [gdal-dev] Re: learning GDAL with C/C++
In-Reply-To: <CA+YzLBdCanR7=LduJxDP4Hmz+1U9DJEanjHBhoV6ozt_hmdatg@mail.gmail.com>
References: <1329853840276-4492722.post@n6.nabble.com>
	<CA+YzLBdCanR7=LduJxDP4Hmz+1U9DJEanjHBhoV6ozt_hmdatg@mail.gmail.com>
Message-ID: <1329966741463-4497346.post@n6.nabble.com>


Frank Warmerdam wrote
> 
> Joseph,
> 
> I'd start with http://www.gdal.org/gdal_tutorial.html, the general purpose
> API tutorial.  It isn't comprehensive, but I think it is fairly good for
> the
> areas covered.
> 
> Note that GDAL does not directly help with distributed processing.  I
> assume this is what you mean by running on a cluster.  You could
> take care of farming out chunks yourself or have each process on the
> cluster use GDAL to read chunks, but be cautious about writing to
> one file from multiple processes.
> 
> Best regards,
> Frank
> 
> On Tue, Feb 21, 2012 at 11:50 AM, joseph.nalluri
> &lt;joseph.nalluri@&gt; wrote:
>> Hello All,
>>
>> ?I am very pleased to find this forum. This is my first post. Please bear
>> with me. In my project, I am trying to read in .bil file (hyperspectral
>> image) into my C/C++ code. ( I haven't done this yet, because I am still
>> trying to see, how can I do it).
>> ?After I read in, I run some image processing algorithms on it and
>> perform
>> this on a cluster. Is there a good tutorial/guide on this aspect, which
>> could help me out.
>> ?Any help would be greatly appreciated. I am just starting out on this.
>>
>> Thanks,
>> Joseph
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-learning-GDAL-with-C-C-tp4492722p4492722.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@.osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@.osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

Thanks. 
I have a .bil file with an associated .hdr file with metadata. Do I have to
read in the .hdr file and manually prepare the variables or is there a
specified function? I could not find much info. about .hdr file.
I am not sure what should the values be for pixel height and pixel width. I
am using a 16 bit resolution camera.
Can you advise me on what steps I need to undertake when creating a C prog
which would be inputted with a .bil file?

Sincerely,
Joseph


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-learning-GDAL-with-C-C-tp4492722p4497346.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Feb 22 22:16:22 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 22 22:16:31 2012
Subject: [gdal-dev] Re: learning GDAL with C/C++
In-Reply-To: <1329966741463-4497346.post@n6.nabble.com>
References: <1329853840276-4492722.post@n6.nabble.com>
	<CA+YzLBdCanR7=LduJxDP4Hmz+1U9DJEanjHBhoV6ozt_hmdatg@mail.gmail.com>
	<1329966741463-4497346.post@n6.nabble.com>
Message-ID: <CA+YzLBfzHTpMAsbw6hH7Eendgi_sOXw+z8vAXY2fgPvcvTvNYw@mail.gmail.com>

On Wed, Feb 22, 2012 at 7:12 PM, joseph.nalluri
<joseph.nalluri@gmail.com> wrote:
> Thanks.
> I have a .bil file with an associated .hdr file with metadata. Do I have to
> read in the .hdr file and manually prepare the variables or is there a
> specified function? I could not find much info. about .hdr file.
> I am not sure what should the values be for pixel height and pixel width. I
> am using a 16 bit resolution camera.
> Can you advise me on what steps I need to undertake when creating a C prog
> which would be inputted with a .bil file?
>

Joseph,

GDAL should automatically read the .hdr file if you call
GDALOpen() on the .bil file.

You can test in advance with gdalinfo by running gdalinfo
against your .bil file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From sedwards2 at cinci.rr.com  Wed Feb 22 22:23:50 2012
From: sedwards2 at cinci.rr.com (Stuart Edwards)
Date: Wed Feb 22 22:24:25 2012
Subject: [gdal-dev] Building GDAL with FileGDB support
In-Reply-To: <1329928892.4f451abcaf38d@imp.free.fr>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<1329928892.4f451abcaf38d@imp.free.fr>
Message-ID: <C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>


Hi - 

I am trying to build GDAL with FileGDB support on Ubuntu 10.4 using the recipe on the GDAL wiki.  I have installed GDAL 1.9.0 in /usr/local/ and have placed FileGDB_API from the ArcGIS resource center at /usr/local.  Configure --with-fgdb produces a config summary that shows 'yes' for 'with fgdb support'.  However, after 'make' and 'make install', the tests for ogrinfo fail - no FileGDB format is acknowledged.  I have put the FileGDB_API directory in the GDAL_DRIVER_PATH.  

Any ideas on what I may have done incorrectly would be much appreciated.

thx

Stu
From pcorti at gmail.com  Thu Feb 23 03:12:45 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Thu Feb 23 03:13:52 2012
Subject: [gdal-dev] Building GDAL with FileGDB support
In-Reply-To: <C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<1329928892.4f451abcaf38d@imp.free.fr>
	<C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>
Message-ID: <CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>

> I am trying to build GDAL with FileGDB support on Ubuntu 10.4 using the recipe on the GDAL wiki. ?I have installed GDAL 1.9.0 in /usr/local/ and have placed FileGDB_API from the ArcGIS resource center at /usr/local. ?Configure --with-fgdb produces a config summary that shows 'yes' for 'with fgdb support'. ?However, after 'make' and 'make install', the tests for ogrinfo fail - no FileGDB format is acknowledged. ?I have put the FileGDB_API directory in the GDAL_DRIVER_PATH.
>
> Any ideas on what I may have done incorrectly would be much appreciated.
>

Hi Stuart
I think I have your same configuration, for me was enough to add
FileGDB_API/lib to the LD_LIBRARY_PATH variable, and fileGDB driver is
working perfectly.
Hope it helps
P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From stefano.moratto at gmail.com  Thu Feb 23 06:06:53 2012
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Thu Feb 23 06:07:44 2012
Subject: [gdal-dev] Using SWIG from a Driver
In-Reply-To: <1329923637.4f45063531fd1@webmail.free.fr>
References: <4F446189.8020304@landcareresearch.co.nz>
	<1329923637.4f45063531fd1@webmail.free.fr>
Message-ID: <CAABbwLZnLkOPkNPZH_EMbwm+M9HGOxRH3jHJYe5WwNXcxT0zog@mail.gmail.com>

Hi,

     I think it is possibile using the swig's director feature: Calling
back non c/c++ from c/c++  code.

Basically you have to develop your driver as a C++ class declared in a swig
interface file (.i) declaring virtual functions that have to implements the
features of your driver. This driver should be viewed as an abstract driver.
The "concrete" driver is implemented by a swig generated class that calls
you java code implementing the virtual functions you declared in you ".i
file".

Regards,
Stefano

Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software


On Wed, Feb 22, 2012 at 4:13 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Michael Speth <spethm@landcareresearch.co.nz>:
>
> > Greetings GDAL devs,
> >    I am interested in developing a GDAL driver that calls out to a Java
> > library that accesses a database that we are developing using SWIG's
> > Java Bindings.  Are there any examples of existing GDAL drivers using
> > the SWIG bindings?
>
> Not that I am aware of, and not in GDAL source tree for sure.
>
> > If not, how might I use the SWIG library from a new
> > GDAL driver?
> >
> > I've noticed there are 2 usages of Java from a GDAL driver.  Frank
> > pointed out to me (ogr/ogrsf_frmts/ili) and mdb (ogr/ogrsf_frmts/mdb).
> > Both of these driver's use JNI.  The reason I want to use SWIG is to
> > avoid having to deal with the added configuration of JNI (since SWIG
> > handles that already).
>
> I'm not sure if you can call Java code with SWIG. Perhaps, but that's
> perhaps
> more a question for a SWIG mailing list. I don't see how the code of the
> GDAL
> SWIG bindings could help you since you will use a dedicated API for your
> Java
> library.
>
> >
> > Thanks!
> >
> > --
> > Michael Speth
> > Research Systems Developer
> > Landcare Research
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/88846284/attachment.html
From sylvain.maffren at crige-paca.org  Thu Feb 23 09:03:51 2012
From: sylvain.maffren at crige-paca.org (Sylvain MAFFREN)
Date: Thu Feb 23 09:13:01 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on linux
	(libecw 3.3)
Message-ID: <4F464747.3070207@crige-paca.org>

Hi,

I try to convert RGB tiff file (300 Mo) into ECW ( libecw 3.3 and gdal 
1.8.1 that I have compiled) using this gdal_translate command, on a 
Debian Squeeze :  gdal_translate -of "ECW" -co LARGE_OK="YES" -co 
TARGET="90" -co DATUM="RGF93" -co PROJ="LMFRAN93" file_in.tif 
file_out.ecw, and I get strange results.

When I compare this results with ECW images that I get with the same 
command and the same source image with Windows binaries obtained here : 
/http://www.gisinternals.com/sdk//, MacOSX binaries obtained here : 
/http://www.kyngchaos.com/software: frameworks/ and translation with 
ErMapper with the same target, I note some differences between Linux 
results and other platforms results.

The result on Linux seems to be fuzzy, with poorer quality and a 
comparison with gdalinfo --mm --checksum confirm that fact (*images -- 
comparative tables downloadable here :**http://dl.free.fr/mkXpXahz3*- 
link "T?l?charger ce fichier"). I also used this command with Linux 
binaries (FWTOOLS Linux 2.0.6) and the same differences are appearing. I 
try with Windows binaries 64 bits and the result is comparable to the 
linux one (Nevertheless it's perfect with 32 bits binaries).

I tried with "libecwj2-3.3-2006-09-06.zip" and 
"ImageCompressionSDKSourceCode3.3Setup_20070509.zip" source code, I have 
as well tried to apply all the patches I found on the web. It doesn't 
change anything. I also tried to compile libECW 3.3 on FreeBSD (which is 
quite same as MacOSX), without best results...

I posted this question on a French forum 
(http://www.forumsig.org/showthread.php?p=286890#post286890) and others 
users do the same observations.

With the decompression process (ECW to Tiff with GDAL_TRANSLATE), I have 
the same and good result on each platform.

It's seems that the only problem relies on the ECW compression on Linux, 
with 3.3 SDK version (I compiled examples in source tree of SDK 3.3 and 
I have done some tests: it seems that the ECW compression with SDK is 
bad too. That would mean this problem not appears with GDAL...?).

Does anybody know this problem ? If not, it would maybe be interesting 
to add this information in GDAL WIKI in order to prevent users of lib 
3.3 (I don't have an account to edit this page).

All ideas and remarks are welcome. I'm not C/C++ developer and it's very 
difficult for me to find an issue...

Best regards,

Sylvain
-- 

*Sylvain MAFFREN*
*G?omaticien*

*T?l* : 04 42 90 71 22
*Fax* : 04 42 97 11 56

*CRIGE PACA*
Domaine du Petit Arbois - Avenue Louis Philibert
BP 10019 - 13 545 Aix-en-Provence cedex 4
www.crige-paca.org <http://www.crige-paca.org/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/835c6e28/attachment.html
From jdmorgan at unca.edu  Thu Feb 23 09:15:48 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Thu Feb 23 09:15:58 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <CAMKgpOb9Sj0PGhc7OskrrVHZtUVX07y1v4YRMYSecgVer-yAiw@mail.gmail.com>
References: <4F445E21.1050904@gmail.com>
	<CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
	<4F44D7E2.20904@gmail.com>
	<CAMKgpOb9Sj0PGhc7OskrrVHZtUVX07y1v4YRMYSecgVer-yAiw@mail.gmail.com>
Message-ID: <4F464A14.3020209@gmail.com>

ThanksChaitanya,

Actually this seems to be working, which is pretty cool.I think where I 
am getting confused is that I am attempting to verify the results by 
loading the resulting raster data into a GIS e.g. ArcGIS or QGIS and 
doing spot checking.However, as I haven?t done any actual color coding 
on the classes e.g. making the 1 black and 0?s white, I think I am not 
able to verify it correctly.If I let ArcGIS do a default classification 
it does something line 0?s white and 0-1 black.Is there a way to color 
class this in GDAL python?That would probably be a better approach.

Cheers,

Derek



On 2/22/2012 10:01 AM, Chaitanya kumar CH wrote:
> Try this Derek,
>
> for r in range(rows1):
>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>     print "data1: " + str(data1)
>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>     print "data2: " + str(data2)
>     result_bools = np.logical_and((data1 > 0), (data2 > 0))
>     result_ints = np.array(result_bools, dtype=int)
>     print "result_ints: " + str(result_ints)
>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
> dst_ds = None
>
> On Wed, Feb 22, 2012 at 5:26 PM, jdmorgan <jdmorgan@unca.edu 
> <mailto:jdmorgan@unca.edu>> wrote:
>
>     Hi Chaitanya,
>     I am using data1[data1>0]=1 to convert any of the values in the
>     row of data that is greater than 0 to a one.  I am doing this
>     because the values are varied, but I am only interested in the
>     fact that there is a value at all.  My end goal is to compare the
>     two input rasters for places where they have any data (not zero). 
>     But, as I mentioned I am certainly stuck somewhere getting results
>     that I don't expect.
>
>     Thanks,
>     Derek
>
>
>     On 2/21/2012 11:33 PM, Chaitanya kumar CH wrote:
>>     Derek,
>>
>>     Can you explain the following lines towards the bottom of the script?
>>     data1[data1>0]=1
>>     ...
>>     data2[data2>0]=1
>>
>>
>>     On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu
>>     <mailto:jdmorgan@unca.edu>> wrote:
>>
>>         Hello GDAL guru?s,
>>
>>         I am working on a python script where I read in two rasters
>>         of similar extent and resolution.Then I re-assign any values
>>         that are greater that zero to a 1.Next, I compare to the
>>         rasters and attempt to create a third resulting raster which
>>         has 1?s everywhere that the two input rasters match
>>         up.However, my results are not exactly as expected.  The
>>         third raster only has the values of the second raster. Any
>>         help would be greatly appreciated.Here is the script as it is
>>         now:
>>
>>         #!/usr/bin/python
>>
>>         from osgeo import gdal, osr, gdalconst
>>
>>         import os, sys, time
>>
>>         import struct
>>
>>         import numpy as np
>>
>>         np.set_printoptions(threshold='nan')
>>
>>         gdal.AllRegister()
>>
>>         print 'Raster Source 1------------------'
>>
>>         ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>>
>>         cols1 = ds1.RasterXSize
>>
>>         rows1 = ds1.RasterYSize
>>
>>         bands1 = ds1.RasterCount
>>
>>         print "Columns: " + str(cols1)
>>
>>         print "Rows: " + str(rows1)
>>
>>         print "Bands: " + str(bands1)
>>
>>         gt1 = ds1.GetGeoTransform()
>>
>>         width = ds1.RasterXSize
>>
>>         height = ds1.RasterYSize
>>
>>         minx = gt1[0]
>>
>>         print "Left(minx): "+ str(minx)
>>
>>         miny = gt1[3] + width*gt1[4] + height*gt1[5]
>>
>>         print "Bottom(miny): "+ str(miny)
>>
>>         maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>>
>>         print "Right(maxx): "+ str(maxx)
>>
>>         maxy = gt1[3]
>>
>>         print "Top(maxy): "+ str(maxy)
>>
>>         pixWidth = gt1[1]
>>
>>         print "Pixel Width " + str(pixWidth)
>>
>>         pixHeight = gt1[5]
>>
>>         print "Pixel Height " + str(pixHeight)
>>
>>         xOrigin = gt1[0]
>>
>>         yOrigin = gt1[3]
>>
>>         print 'Raster Source 2------------------'
>>
>>         ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)
>>
>>         cols2 = ds2.RasterXSize
>>
>>         rows2 = ds2.RasterYSize
>>
>>         bands2 = ds2.RasterCount
>>
>>         print "Columns: " + str(cols2)
>>
>>         print "Rows: " + str(rows2)
>>
>>         print "Bands: " + str(bands2)
>>
>>         gt2 = ds2.GetGeoTransform()
>>
>>         width = ds2.RasterXSize
>>
>>         height = ds2.RasterYSize
>>
>>         minx = gt2[0]
>>
>>         print "Left(minx): "+ str(minx)
>>
>>         miny = gt2[3] + width*gt2[4] + height*gt2[5]
>>
>>         print "Bottom(miny): "+ str(miny)
>>
>>         maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>>
>>         print "Right(maxx): "+ str(maxx)
>>
>>         maxy = gt2[3]
>>
>>         print "Top(maxy): "+ str(maxy)
>>
>>         pixWidth = gt2[1]
>>
>>         print "Pixel Width " + str(pixWidth)
>>
>>         pixHeight = gt2[5]
>>
>>         print "Pixel Height " + str(pixHeight)
>>
>>         xOrigin = gt2[0]
>>
>>         yOrigin = gt2[3]
>>
>>         format = "HFA"
>>
>>         dst_file = "out.img"
>>
>>         dst_driver = gdal.GetDriverByName(format)
>>
>>         dst_ds = dst_driver.Create(dst_file, width, height, 1,
>>         gdal.GDT_Byte ) #driver.Create( outfile, outwidth, outheight,
>>         numbands, gdaldatatype)
>>
>>         empty = np.empty([height, width], np.uint8 )
>>
>>         srs = osr.SpatialReference()
>>
>>         dst_ds.SetProjection(ds2.GetProjection())
>>
>>         dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>>
>>         dst_ds.GetRasterBand(1).WriteArray(empty)
>>
>>         #This is a way to go through a given raster band
>>
>>         #one-by-one as an array by row, getting all of the columns for
>>
>>         for r in range(rows1):
>>
>>         data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>>
>>         data1[data1>0]=1
>>
>>         print "data1: " + str(data1)
>>
>>         data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>>
>>         data2[data2>0]=1
>>
>>         print "data2: " + str(data2)
>>
>>         result_bools = np.logical_and(np.logical_and(data1 != 0,
>>         data2 != 0), data1 == data2)
>>
>>         result_ints = np.array(result_bools, dtype=int)
>>
>>         print "result_ints: " + str(result_ints)
>>
>>         dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>>
>>         dst_ds = None
>>
>>         Cheers,
>>
>>         Derek
>>
>>
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>     -- 
>>     Best regards,
>>     Chaitanya kumar CH.
>>
>>     +91-9494447584 <tel:%2B91-9494447584>
>>     17.2416N 80.1426E
>
>
>     -- 
>     Derek @ NEMAC
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Derek @ NEMAC

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/32233c4c/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Feb 23 09:31:29 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 23 09:31:44 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <4F464A14.3020209@gmail.com>
References: <4F445E21.1050904@gmail.com>
	<CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
	<4F44D7E2.20904@gmail.com>
	<CAMKgpOb9Sj0PGhc7OskrrVHZtUVX07y1v4YRMYSecgVer-yAiw@mail.gmail.com>
	<4F464A14.3020209@gmail.com>
Message-ID: <CAMKgpOYcBURVemCiNrPjSBRc6_XBWTRSwYinr06P9x0hK-Pnfw@mail.gmail.com>

Derek,

You can assign a color table.
Ex: (0,0,0) for 0, (255,255,255) for 1.
You can assign a color table to a raster band using the method
SetRasterColorTable().
You can find some sample python code in GDAL's test suite[1][2].

[1]: http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/colortable.py
[2]:
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py#L916

On Thu, Feb 23, 2012 at 7:45 PM, jdmorgan <jdmorgan@unca.edu> wrote:

>  Thanks Chaitanya,
>
> Actually this seems to be working, which is pretty cool. I think where I
> am getting confused is that I am attempting to verify the results by
> loading the resulting raster data into a GIS e.g. ArcGIS or QGIS and doing
> spot checking.  However, as I haven?t done any actual color coding on the
> classes e.g. making the 1 black and 0?s white, I think I am not able to
> verify it correctly.  If I let ArcGIS do a default classification it does
> something line 0?s white and 0-1 black.  Is there a way to color class
> this in GDAL python?  That would probably be a better approach.
>
> Cheers,
>
> Derek
>
>
> On 2/22/2012 10:01 AM, Chaitanya kumar CH wrote:
>
> Try this Derek,
>
> for r in range(rows1):
>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>     print "data1: " + str(data1)
>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>     print "data2: " + str(data2)
>     result_bools = np.logical_and((data1 > 0), (data2 > 0))
>     result_ints = np.array(result_bools, dtype=int)
>     print "result_ints: " + str(result_ints)
>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
> dst_ds = None
>
> On Wed, Feb 22, 2012 at 5:26 PM, jdmorgan <jdmorgan@unca.edu> wrote:
>
>>  Hi Chaitanya,
>> I am using data1[data1>0]=1 to convert any of the values in the row of
>> data that is greater than 0 to a one.  I am doing this because the values
>> are varied, but I am only interested in the fact that there is a value at
>> all.  My end goal is to compare the two input rasters for places where they
>> have any data (not zero).  But, as I mentioned I am certainly stuck
>> somewhere getting results that I don't expect.
>>
>> Thanks,
>> Derek
>>
>>
>> On 2/21/2012 11:33 PM, Chaitanya kumar CH wrote:
>>
>> Derek,
>>
>> Can you explain the following lines towards the bottom of the script?
>> data1[data1>0]=1
>> ...
>> data2[data2>0]=1
>>
>>
>> On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu> wrote:
>>
>>>  Hello GDAL guru?s,
>>>
>>> I am working on a python script where I read in two rasters of similar
>>> extent and resolution.  Then I re-assign any values that are greater
>>> that zero to a 1.  Next, I compare to the rasters and attempt to create
>>> a third resulting raster which has 1?s everywhere that the two input
>>> rasters match up.  However, my results are not exactly as expected.
>>> The third raster only has the values of the second raster. Any help
>>> would be greatly appreciated.  Here is the script as it is now:
>>>
>>> #!/usr/bin/python
>>>
>>> from osgeo import gdal, osr, gdalconst
>>>
>>> import os, sys, time
>>>
>>> import struct
>>>
>>> import numpy as np
>>>
>>> np.set_printoptions(threshold='nan')
>>>
>>> gdal.AllRegister()
>>>
>>> print 'Raster Source 1------------------'
>>>
>>> ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>>>
>>> cols1 = ds1.RasterXSize
>>>
>>> rows1 = ds1.RasterYSize
>>>
>>> bands1 = ds1.RasterCount
>>>
>>> print "Columns: " + str(cols1)
>>>
>>> print "Rows: " + str(rows1)
>>>
>>> print "Bands: " + str(bands1)
>>>
>>> gt1 = ds1.GetGeoTransform()
>>>
>>> width = ds1.RasterXSize
>>>
>>> height = ds1.RasterYSize
>>>
>>> minx = gt1[0]
>>>
>>> print "Left(minx): "+ str(minx)
>>>
>>> miny = gt1[3] + width*gt1[4] + height*gt1[5]
>>>
>>> print "Bottom(miny): "+ str(miny)
>>>
>>> maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>>>
>>> print "Right(maxx): "+ str(maxx)
>>>
>>> maxy = gt1[3]
>>>
>>> print "Top(maxy): "+ str(maxy)
>>>
>>> pixWidth = gt1[1]
>>>
>>> print "Pixel Width " + str(pixWidth)
>>>
>>> pixHeight = gt1[5]
>>>
>>> print "Pixel Height " + str(pixHeight)
>>>
>>> xOrigin = gt1[0]
>>>
>>> yOrigin = gt1[3]
>>>
>>> print 'Raster Source 2------------------'
>>>
>>> ds2 = gdal.Open('C:\Data\LowElev300by300.img', gdal.GA_ReadOnly)
>>>
>>> cols2 = ds2.RasterXSize
>>>
>>> rows2 = ds2.RasterYSize
>>>
>>> bands2 = ds2.RasterCount
>>>
>>> print "Columns: " + str(cols2)
>>>
>>> print "Rows: " + str(rows2)
>>>
>>> print "Bands: " + str(bands2)
>>>
>>> gt2 = ds2.GetGeoTransform()
>>>
>>> width = ds2.RasterXSize
>>>
>>> height = ds2.RasterYSize
>>>
>>> minx = gt2[0]
>>>
>>> print "Left(minx): "+ str(minx)
>>>
>>> miny = gt2[3] + width*gt2[4] + height*gt2[5]
>>>
>>> print "Bottom(miny): "+ str(miny)
>>>
>>> maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>>>
>>> print "Right(maxx): "+ str(maxx)
>>>
>>> maxy = gt2[3]
>>>
>>> print "Top(maxy): "+ str(maxy)
>>>
>>> pixWidth = gt2[1]
>>>
>>> print "Pixel Width " + str(pixWidth)
>>>
>>> pixHeight = gt2[5]
>>>
>>> print "Pixel Height " + str(pixHeight)
>>>
>>> xOrigin = gt2[0]
>>>
>>> yOrigin = gt2[3]
>>>
>>>
>>>
>>>
>>>
>>> format = "HFA"
>>>
>>> dst_file = "out.img"
>>>
>>> dst_driver = gdal.GetDriverByName(format)
>>>
>>> dst_ds = dst_driver.Create(dst_file, width, height, 1, gdal.GDT_Byte )
>>> #driver.Create( outfile, outwidth, outheight, numbands, gdaldatatype)
>>>
>>> empty = np.empty([height, width], np.uint8 )
>>>
>>> srs = osr.SpatialReference()
>>>
>>> dst_ds.SetProjection(ds2.GetProjection())
>>>
>>> dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>>>
>>> dst_ds.GetRasterBand(1).WriteArray(empty)
>>>
>>>
>>>
>>>
>>>
>>> #This is a way to go through a given raster band
>>>
>>> #one-by-one as an array by row, getting all of the columns for
>>>
>>> for r in range(rows1):
>>>
>>>     data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>>>
>>>     data1[data1>0]=1
>>>
>>>     print "data1: " + str(data1)
>>>
>>>     data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>>>
>>>     data2[data2>0]=1
>>>
>>>     print "data2: " + str(data2)
>>>
>>>     result_bools = np.logical_and(np.logical_and(data1 != 0, data2 !=
>>> 0), data1 == data2)
>>>
>>>     result_ints = np.array(result_bools, dtype=int)
>>>
>>>     print "result_ints: " + str(result_ints)
>>>
>>>     dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>>>
>>> dst_ds = None
>>>
>>>
>>>
>>> Cheers,
>>>
>>> Derek
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>>
>>   --
>> Derek @ NEMAC
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
> --
> Derek @ NEMAC
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/e411be00/attachment.html
From jdmorgan at unca.edu  Thu Feb 23 09:32:23 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Thu Feb 23 09:32:36 2012
Subject: [gdal-dev] color-code/class the raster in gdal/python
Message-ID: <4F464DF7.9080903@gmail.com>

Hello,

I am creating a raster file (.img) in python/gdal 
using.GetRasterBand(1).WriteArray it is seems to be working well.Where I 
could use some help is in knowing how to color-code/class the resulting 
raster.For instance my raster is only ones and zeros.I would like to 
make the ones white and the zeros black.Any help in this regard would be 
appreciated.

Thanks,

Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/7d54033e/attachment-0001.html
From jsimpson at wxtrends.com  Thu Feb 23 10:44:41 2012
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Feb 23 10:52:01 2012
Subject: [gdal-dev] undefined symbol error
Message-ID: <CACC0xJLvO+ciQbp4NS-HtOOTCf=8EKFuiq5qO2mUXfWvACPyDg@mail.gmail.com>

Hey guys, I just grabbed gdal 1.9 from SVN, compiled it and I am getting an
undefined symbol error pj_ctx_alloc in many of the ./apps/ programs. I
first noticed it with gdaldem. Everything is pointing to my build
directory. I've tried all manner of things, not sure what to do next.
gdal1.9NEW/apps/.libs/lt-gdaldem: symbol lookup error:
gdal1.9NEW/.libs/libgdal.so.1: undefined symbol: pj_ctx_alloc

any ideas?
My configure options
./configure --prefix=/usr/local --with-python  --with-netcdf=/usr/local
--with-static-proj4=/usr/local --with-geos=/usr/local/bin/geos-config

This issue just started yesterday.  I had a slightly older version from the
svn repository, still 1.9 and didn't have this trouble.  I'm not sure what
might have changed on the machine to have caused this.

Maybe there are some conflicting libaries hanging around mucking things up?

Thanks for the help!!

Jerl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/f2cc1960/attachment.html
From sedwards2 at cinci.rr.com  Thu Feb 23 11:26:53 2012
From: sedwards2 at cinci.rr.com (Stuart Edwards)
Date: Thu Feb 23 11:27:37 2012
Subject: [gdal-dev] Building GDAL with FileGDB support
In-Reply-To: <CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<1329928892.4f451abcaf38d@imp.free.fr>
	<C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>
	<CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>
Message-ID: <A8B0758D-71C4-4E46-B7FF-E45BC8B6402A@cinci.rr.com>


On Feb 23, 2012, at 3:12 AM, Paolo Corti wrote:

>> I am trying to build GDAL with FileGDB support on Ubuntu 10.4 using the recipe on the GDAL wiki.  I have installed GDAL 1.9.0 in /usr/local/ and have placed FileGDB_API from the ArcGIS resource center at /usr/local.  Configure --with-fgdb produces a config summary that shows 'yes' for 'with fgdb support'.  However, after 'make' and 'make install', the tests for ogrinfo fail - no FileGDB format is acknowledged.  I have put the FileGDB_API directory in the GDAL_DRIVER_PATH.
>> 
>> Any ideas on what I may have done incorrectly would be much appreciated.
>> 
> 
> Hi Stuart
> I think I have your same configuration, for me was enough to add
> FileGDB_API/lib to the LD_LIBRARY_PATH variable, and fileGDB driver is
> working perfectly.
> Hope it helps
> P

That didn't work for me unfortunately.  Quite a puzzle ... the feedback during the compile process shows that fgdb is being supported and there are no warnings or errors. However, fgdb just isn't making it to the list at 'ogrinfo --formats', nor will it open the test set 'test_fgdb.gdb'

Stu
From jdmorgan at unca.edu  Thu Feb 23 11:32:38 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Thu Feb 23 11:32:52 2012
Subject: [gdal-dev] comparing two rasters
In-Reply-To: <CAMKgpOYcBURVemCiNrPjSBRc6_XBWTRSwYinr06P9x0hK-Pnfw@mail.gmail.com>
References: <4F445E21.1050904@gmail.com>
	<CAMKgpOaL22WwzGctgGp3FxZ5XSNV=yuvfWvFW8jZn6jc3RrCKA@mail.gmail.com>
	<4F44D7E2.20904@gmail.com>
	<CAMKgpOb9Sj0PGhc7OskrrVHZtUVX07y1v4YRMYSecgVer-yAiw@mail.gmail.com>
	<4F464A14.3020209@gmail.com>
	<CAMKgpOYcBURVemCiNrPjSBRc6_XBWTRSwYinr06P9x0hK-Pnfw@mail.gmail.com>
Message-ID: <4F466A26.9010405@gmail.com>

Hi Chaitanya,
This works great.  Thanks so much.  GDAL/Python is a really powerful 
combination.

Cheers,
Derek

On 2/23/2012 9:31 AM, Chaitanya kumar CH wrote:
> Derek,
>
> You can assign a color table.
> Ex: (0,0,0) for 0, (255,255,255) for 1.
> You can assign a color table to a raster band using the method 
> SetRasterColorTable().
> You can find some sample python code in GDAL's test suite[1][2].
>
> [1]: http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/colortable.py
> [2]: 
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py#L916
>
> On Thu, Feb 23, 2012 at 7:45 PM, jdmorgan <jdmorgan@unca.edu 
> <mailto:jdmorgan@unca.edu>> wrote:
>
>     ThanksChaitanya,
>
>     Actually this seems to be working, which is pretty cool.I think
>     where I am getting confused is that I am attempting to verify the
>     results by loading the resulting raster data into a GIS e.g.
>     ArcGIS or QGIS and doing spot checking.However, as I haven?t done
>     any actual color coding on the classes e.g. making the 1 black and
>     0?s white, I think I am not able to verify it correctly.If I let
>     ArcGIS do a default classification it does something line 0?s
>     white and 0-1 black.Is there a way to color class this in GDAL
>     python?That would probably be a better approach.
>
>     Cheers,
>
>     Derek
>
>
>
>     On 2/22/2012 10:01 AM, Chaitanya kumar CH wrote:
>>     Try this Derek,
>>
>>     for r in range(rows1):
>>         data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>>         print "data1: " + str(data1)
>>         data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>>         print "data2: " + str(data2)
>>         result_bools = np.logical_and((data1 > 0), (data2 > 0))
>>         result_ints = np.array(result_bools, dtype=int)
>>         print "result_ints: " + str(result_ints)
>>         dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>>     dst_ds = None
>>
>>     On Wed, Feb 22, 2012 at 5:26 PM, jdmorgan <jdmorgan@unca.edu
>>     <mailto:jdmorgan@unca.edu>> wrote:
>>
>>         Hi Chaitanya,
>>         I am using data1[data1>0]=1 to convert any of the values in
>>         the row of data that is greater than 0 to a one.  I am doing
>>         this because the values are varied, but I am only interested
>>         in the fact that there is a value at all.  My end goal is to
>>         compare the two input rasters for places where they have any
>>         data (not zero).  But, as I mentioned I am certainly stuck
>>         somewhere getting results that I don't expect.
>>
>>         Thanks,
>>         Derek
>>
>>
>>         On 2/21/2012 11:33 PM, Chaitanya kumar CH wrote:
>>>         Derek,
>>>
>>>         Can you explain the following lines towards the bottom of
>>>         the script?
>>>         data1[data1>0]=1
>>>         ...
>>>         data2[data2>0]=1
>>>
>>>
>>>         On Wed, Feb 22, 2012 at 8:46 AM, jdmorgan <jdmorgan@unca.edu
>>>         <mailto:jdmorgan@unca.edu>> wrote:
>>>
>>>             Hello GDAL guru?s,
>>>
>>>             I am working on a python script where I read in two
>>>             rasters of similar extent and resolution.Then I
>>>             re-assign any values that are greater that zero to a
>>>             1.Next, I compare to the rasters and attempt to create a
>>>             third resulting raster which has 1?s everywhere that the
>>>             two input rasters match up.However, my results are not
>>>             exactly as expected.  The third raster only has the
>>>             values of the second raster. Any help would be greatly
>>>             appreciated.Here is the script as it is now:
>>>
>>>             #!/usr/bin/python
>>>
>>>             from osgeo import gdal, osr, gdalconst
>>>
>>>             import os, sys, time
>>>
>>>             import struct
>>>
>>>             import numpy as np
>>>
>>>             np.set_printoptions(threshold='nan')
>>>
>>>             gdal.AllRegister()
>>>
>>>             print 'Raster Source 1------------------'
>>>
>>>             ds1 = gdal.Open('C:\Data\TE300by300.img', gdal.GA_ReadOnly)
>>>
>>>             cols1 = ds1.RasterXSize
>>>
>>>             rows1 = ds1.RasterYSize
>>>
>>>             bands1 = ds1.RasterCount
>>>
>>>             print "Columns: " + str(cols1)
>>>
>>>             print "Rows: " + str(rows1)
>>>
>>>             print "Bands: " + str(bands1)
>>>
>>>             gt1 = ds1.GetGeoTransform()
>>>
>>>             width = ds1.RasterXSize
>>>
>>>             height = ds1.RasterYSize
>>>
>>>             minx = gt1[0]
>>>
>>>             print "Left(minx): "+ str(minx)
>>>
>>>             miny = gt1[3] + width*gt1[4] + height*gt1[5]
>>>
>>>             print "Bottom(miny): "+ str(miny)
>>>
>>>             maxx = gt1[0] + width*gt1[1] + height*gt1[2]
>>>
>>>             print "Right(maxx): "+ str(maxx)
>>>
>>>             maxy = gt1[3]
>>>
>>>             print "Top(maxy): "+ str(maxy)
>>>
>>>             pixWidth = gt1[1]
>>>
>>>             print "Pixel Width " + str(pixWidth)
>>>
>>>             pixHeight = gt1[5]
>>>
>>>             print "Pixel Height " + str(pixHeight)
>>>
>>>             xOrigin = gt1[0]
>>>
>>>             yOrigin = gt1[3]
>>>
>>>             print 'Raster Source 2------------------'
>>>
>>>             ds2 = gdal.Open('C:\Data\LowElev300by300.img',
>>>             gdal.GA_ReadOnly)
>>>
>>>             cols2 = ds2.RasterXSize
>>>
>>>             rows2 = ds2.RasterYSize
>>>
>>>             bands2 = ds2.RasterCount
>>>
>>>             print "Columns: " + str(cols2)
>>>
>>>             print "Rows: " + str(rows2)
>>>
>>>             print "Bands: " + str(bands2)
>>>
>>>             gt2 = ds2.GetGeoTransform()
>>>
>>>             width = ds2.RasterXSize
>>>
>>>             height = ds2.RasterYSize
>>>
>>>             minx = gt2[0]
>>>
>>>             print "Left(minx): "+ str(minx)
>>>
>>>             miny = gt2[3] + width*gt2[4] + height*gt2[5]
>>>
>>>             print "Bottom(miny): "+ str(miny)
>>>
>>>             maxx = gt2[0] + width*gt2[1] + height*gt2[2]
>>>
>>>             print "Right(maxx): "+ str(maxx)
>>>
>>>             maxy = gt2[3]
>>>
>>>             print "Top(maxy): "+ str(maxy)
>>>
>>>             pixWidth = gt2[1]
>>>
>>>             print "Pixel Width " + str(pixWidth)
>>>
>>>             pixHeight = gt2[5]
>>>
>>>             print "Pixel Height " + str(pixHeight)
>>>
>>>             xOrigin = gt2[0]
>>>
>>>             yOrigin = gt2[3]
>>>
>>>             format = "HFA"
>>>
>>>             dst_file = "out.img"
>>>
>>>             dst_driver = gdal.GetDriverByName(format)
>>>
>>>             dst_ds = dst_driver.Create(dst_file, width, height, 1,
>>>             gdal.GDT_Byte ) #driver.Create( outfile, outwidth,
>>>             outheight, numbands, gdaldatatype)
>>>
>>>             empty = np.empty([height, width], np.uint8 )
>>>
>>>             srs = osr.SpatialReference()
>>>
>>>             dst_ds.SetProjection(ds2.GetProjection())
>>>
>>>             dst_ds.SetGeoTransform(ds2.GetGeoTransform())
>>>
>>>             dst_ds.GetRasterBand(1).WriteArray(empty)
>>>
>>>             #This is a way to go through a given raster band
>>>
>>>             #one-by-one as an array by row, getting all of the
>>>             columns for
>>>
>>>             for r in range(rows1):
>>>
>>>             data1 = ds1.GetRasterBand(1).ReadAsArray(0, r, cols1, 1)
>>>
>>>             data1[data1>0]=1
>>>
>>>             print "data1: " + str(data1)
>>>
>>>             data2 = ds2.GetRasterBand(1).ReadAsArray(0, r, cols2, 1)
>>>
>>>             data2[data2>0]=1
>>>
>>>             print "data2: " + str(data2)
>>>
>>>             result_bools = np.logical_and(np.logical_and(data1 != 0,
>>>             data2 != 0), data1 == data2)
>>>
>>>             result_ints = np.array(result_bools, dtype=int)
>>>
>>>             print "result_ints: " + str(result_ints)
>>>
>>>             dst_ds.GetRasterBand(1).WriteArray(result_ints, 0, r)
>>>
>>>             dst_ds = None
>>>
>>>             Cheers,
>>>
>>>             Derek
>>>
>>>
>>>             _______________________________________________
>>>             gdal-dev mailing list
>>>             gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>>             http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>
>>>         -- 
>>>         Best regards,
>>>         Chaitanya kumar CH.
>>>
>>>         +91-9494447584 <tel:%2B91-9494447584>
>>>         17.2416N 80.1426E
>>
>>
>>         -- 
>>         Derek @ NEMAC
>>
>>
>>
>>
>>     -- 
>>     Best regards,
>>     Chaitanya kumar CH.
>>
>>     +91-9494447584 <tel:%2B91-9494447584>
>>     17.2416N 80.1426E
>
>
>     -- 
>     Derek @ NEMAC
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Derek @ NEMAC

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/4807b748/attachment-0001.html
From warmerdam at pobox.com  Thu Feb 23 13:13:15 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 23 13:14:03 2012
Subject: [gdal-dev] undefined symbol error
In-Reply-To: <CACC0xJLvO+ciQbp4NS-HtOOTCf=8EKFuiq5qO2mUXfWvACPyDg@mail.gmail.com>
References: <CACC0xJLvO+ciQbp4NS-HtOOTCf=8EKFuiq5qO2mUXfWvACPyDg@mail.gmail.com>
Message-ID: <CA+YzLBfBPgR4P_LiGnY4oOY+oE8aAKtdsTuymou_7=dq2hV3tg@mail.gmail.com>

Jerl,

I would imagine you are building GDAL against modern PROJ.4
include files but linking against an older (4.7.0 or older) PROJ.4
shared library.  Likely you have another libproj.so in /usr/lib in
addition to the one in /usr/local/lib.

By the way, why are you using --with-static-proj4?
If you were to use the dynamic libproj.4 loading (the default) a
mismatch between build and runtime would not actually be a problem
because the dynamic loader adapts to the version of the shared
library it ends up manually loading.

Best regards,
Frank

On Thu, Feb 23, 2012 at 7:44 AM, Jerl Simpson <jsimpson@wxtrends.com> wrote:
> Hey guys, I just grabbed gdal 1.9 from SVN, compiled it and I am getting an
> undefined symbol error pj_ctx_alloc in many of the ./apps/ programs. I first
> noticed it with gdaldem. Everything is pointing to my build directory. I've
> tried all manner of things, not sure what to do next.
> gdal1.9NEW/apps/.libs/lt-gdaldem: symbol lookup error:
> gdal1.9NEW/.libs/libgdal.so.1: undefined symbol: pj_ctx_alloc
>
> any ideas?
> My configure options
> ./configure --prefix=/usr/local --with-python ?--with-netcdf=/usr/local
> --with-static-proj4=/usr/local --with-geos=/usr/local/bin/geos-config
>
> This issue just started yesterday. ?I had a slightly older version from the
> svn repository, still 1.9 and didn't have this trouble. ?I'm not sure what
> might have changed on the machine to have caused this.
>
> Maybe there are some conflicting libaries hanging around mucking things up?
>
> Thanks for the help!!
>
> Jerl
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jsimpson at wxtrends.com  Thu Feb 23 13:18:00 2012
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Feb 23 13:18:22 2012
Subject: [gdal-dev] undefined symbol error
In-Reply-To: <CA+YzLBfBPgR4P_LiGnY4oOY+oE8aAKtdsTuymou_7=dq2hV3tg@mail.gmail.com>
References: <CACC0xJLvO+ciQbp4NS-HtOOTCf=8EKFuiq5qO2mUXfWvACPyDg@mail.gmail.com>
	<CA+YzLBfBPgR4P_LiGnY4oOY+oE8aAKtdsTuymou_7=dq2hV3tg@mail.gmail.com>
Message-ID: <CACC0xJ+=p1sRL3g7=U1T9KKUJf+wuEmvijeiVJShfDAjn7n+CQ@mail.gmail.com>

Hi Frank:

Thank you for the info.  Someone in the IRC channel suggested it might be a
PROJ.4 issues as well.  I updated PROJ.4 but didn't look for older
libraries.
Once this compile finishes, I'll take a look.

OH I bet the --with-static-proj4 is the issue.  It works find in build
directory with only the default options.

Thanks!!

Jerl

On Thu, Feb 23, 2012 at 12:13 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Jerl,
>
> I would imagine you are building GDAL against modern PROJ.4
> include files but linking against an older (4.7.0 or older) PROJ.4
> shared library.  Likely you have another libproj.so in /usr/lib in
> addition to the one in /usr/local/lib.
>
> By the way, why are you using --with-static-proj4?
> If you were to use the dynamic libproj.4 loading (the default) a
> mismatch between build and runtime would not actually be a problem
> because the dynamic loader adapts to the version of the shared
> library it ends up manually loading.
>
> Best regards,
> Frank
>
> On Thu, Feb 23, 2012 at 7:44 AM, Jerl Simpson <jsimpson@wxtrends.com>
> wrote:
> > Hey guys, I just grabbed gdal 1.9 from SVN, compiled it and I am getting
> an
> > undefined symbol error pj_ctx_alloc in many of the ./apps/ programs. I
> first
> > noticed it with gdaldem. Everything is pointing to my build directory.
> I've
> > tried all manner of things, not sure what to do next.
> > gdal1.9NEW/apps/.libs/lt-gdaldem: symbol lookup error:
> > gdal1.9NEW/.libs/libgdal.so.1: undefined symbol: pj_ctx_alloc
> >
> > any ideas?
> > My configure options
> > ./configure --prefix=/usr/local --with-python  --with-netcdf=/usr/local
> > --with-static-proj4=/usr/local --with-geos=/usr/local/bin/geos-config
> >
> > This issue just started yesterday.  I had a slightly older version from
> the
> > svn repository, still 1.9 and didn't have this trouble.  I'm not sure
> what
> > might have changed on the machine to have caused this.
> >
> > Maybe there are some conflicting libaries hanging around mucking things
> up?
> >
> > Thanks for the help!!
> >
> > Jerl
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
This communication is privileged and may contain confidential information.
 It's intended only for the use of the person or entity named above. If you
are not the intended recipient, do not distribute or copy this
communication. If you have received this communication in error, please
notify the sender immediately and return the original to the email address
above. ? Copyright 2011 Weather Trends International, Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120223/8d990316/attachment.html
From jukka.rahkonen at mmmtike.fi  Thu Feb 23 16:44:32 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Feb 23 16:45:28 2012
Subject: [gdal-dev] Correction to gdalwarp documentation
Message-ID: <loom.20120223T224057-886@post.gmane.org>

Hi,

The document http://gdal.org/gdalwarp.html contains an example
gdalwarp -t_srs '+proj=utm +zone=11 +datum=WGS84' raw_spot.tif utm11.tif

At least on Windows single quotes do not work while double ones do.

-Jukka Rahkonen-

From jmckenna at gatewaygeomatics.com  Fri Feb 24 07:08:57 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri Feb 24 07:09:21 2012
Subject: [gdal-dev] Building GDAL with FileGDB support
In-Reply-To: <CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<1329928892.4f451abcaf38d@imp.free.fr>
	<C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>
	<CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>
Message-ID: <4F477DD9.9030102@gatewaygeomatics.com>

On 12-02-23 4:12 AM, Paolo Corti wrote:
> Hi Stuart
> I think I have your same configuration, for me was enough to add
> FileGDB_API/lib to the LD_LIBRARY_PATH variable, and fileGDB driver is
> working perfectly.

Paolo, can you add your note to the wiki page?
http://trac.osgeo.org/gdal/wiki/FileGDB    Thanks!

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From pcorti at gmail.com  Fri Feb 24 09:24:56 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Fri Feb 24 09:25:42 2012
Subject: [gdal-dev] Building GDAL with FileGDB support
In-Reply-To: <4F477DD9.9030102@gatewaygeomatics.com>
References: <BB22CD42-4551-4236-BBF2-A080C39C7E23@cinci.rr.com>
	<1329923765.4f4506b5a9e1a@imp.free.fr>
	<6F894EB8-3BAB-4801-A610-D7592382C5D1@cinci.rr.com>
	<1329928892.4f451abcaf38d@imp.free.fr>
	<C03596AC-9346-42E7-BAA9-C6C63873220C@cinci.rr.com>
	<CAHXrU-LanGrNNJ4qd6VZXJSVV=-HG0-8cXpUhvnP-kK2UPropA@mail.gmail.com>
	<4F477DD9.9030102@gatewaygeomatics.com>
Message-ID: <CAHXrU-LKDoa6PCgtvBo+gXoVO4Ai5U_uzqQnK0mEFgMqASX53Q@mail.gmail.com>

On Fri, Feb 24, 2012 at 1:08 PM, Jeff McKenna
<jmckenna@gatewaygeomatics.com> wrote:
> On 12-02-23 4:12 AM, Paolo Corti wrote:
>> Hi Stuart
>> I think I have your same configuration, for me was enough to add
>> FileGDB_API/lib to the LD_LIBRARY_PATH variable, and fileGDB driver is
>> working perfectly.
>
> Paolo, can you add your note to the wiki page?
> http://trac.osgeo.org/gdal/wiki/FileGDB ? ?Thanks!
>

Hi Jeff

I gave another look at my conf, and I have just realized that even
unsetting the FileGDB_API/lib path in the LD_LIBRARY_PATH, the driver
is going to be built.
The only necessary step is to set the --with-fgdb to the correct
FileGDB_API path

Basically, the info in the wiki is more than correct :)
sorry for the confusion

P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From traviskirstine at gmail.com  Fri Feb 24 11:49:13 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Feb 24 11:49:44 2012
Subject: [gdal-dev] ogr2ogr GML creation encoding issue
Message-ID: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>

I have a PostGIS / PostgreSQL database (UTF8) containing OSM data that
was imported using osm2pgsql.  I have been extracting GML subsets of
the data using ogr2ogr.  I am having issues with the encoding of the
resultant GML files, the attribute strings have invalid UTF8
characters.


My Command
ogr2ogr -f GML -t_srs EPSG:4326 -s_srs EPSG:900913 -nln administrative
planet_osm_polygon_boundary_administrative.gml PG:'dbname=osmdb
user=osm' -sql "SELECT admin_level, name, way FROM planet_osm_polygon
WHERE boundary = 'administrative')"

Regards
From even.rouault at mines-paris.org  Fri Feb 24 11:56:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 24 11:56:59 2012
Subject: [gdal-dev] ogr2ogr GML creation encoding issue
In-Reply-To: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>
References: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>
Message-ID: <1330102566.4f47c126726d5@webmail.free.fr>

Selon Travis Kirstine <traviskirstine@gmail.com>:

> I have a PostGIS / PostgreSQL database (UTF8) containing OSM data that
> was imported using osm2pgsql.  I have been extracting GML subsets of
> the data using ogr2ogr.  I am having issues with the encoding of the
> resultant GML files, the attribute strings have invalid UTF8
> characters.

This sounds more as an issue with your PostGIS database then. You should make
sure that your PGCLIENTENCODING (or equivalent mechanism) is set to UTF-8. The
GML driver will just copy what it receives from the PostGIS DB.

>
>
> My Command
> ogr2ogr -f GML -t_srs EPSG:4326 -s_srs EPSG:900913 -nln administrative
> planet_osm_polygon_boundary_administrative.gml PG:'dbname=osmdb
> user=osm' -sql "SELECT admin_level, name, way FROM planet_osm_polygon
> WHERE boundary = 'administrative')"
>
> Regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Fri Feb 24 14:05:00 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 24 14:05:26 2012
Subject: [gdal-dev] ogr2ogr GML creation encoding issue
In-Reply-To: <CALtm4h0vODQhcEmVwX6KxM05S6ZPQ4K2Ktz+95-+UEP5qoOoSg@mail.gmail.com>
References: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>
	<1330102566.4f47c126726d5@webmail.free.fr>
	<CALtm4h0vODQhcEmVwX6KxM05S6ZPQ4K2Ktz+95-+UEP5qoOoSg@mail.gmail.com>
Message-ID: <201202242005.00213.even.rouault@mines-paris.org>

CC'ing the list in case someone has a better idea. I don't. Should work...

Le vendredi 24 f?vrier 2012 19:59:32, Travis Kirstine a ?crit :
> No luck with setting the client encoding variables.  The strange thing
> is that the strings appear fine in pgAdmin and qgis but not in the
> terminal or ogr output.
> 
> # env
> ...
> LANG=en_US.UTF-8
> PGCLIENTENCODING=UTF8
> ...
> 
> # psql -c 'SHOW client_encoding'
>  client_encoding
> -----------------
>  UTF8
> 
> On 24 February 2012 11:56, Even Rouault <even.rouault@mines-paris.org> 
wrote:
> > Selon Travis Kirstine <traviskirstine@gmail.com>:
> >> I have a PostGIS / PostgreSQL database (UTF8) containing OSM data that
> >> was imported using osm2pgsql.  I have been extracting GML subsets of
> >> the data using ogr2ogr.  I am having issues with the encoding of the
> >> resultant GML files, the attribute strings have invalid UTF8
> >> characters.
> > 
> > This sounds more as an issue with your PostGIS database then. You should
> > make sure that your PGCLIENTENCODING (or equivalent mechanism) is set to
> > UTF-8. The GML driver will just copy what it receives from the PostGIS
> > DB.
> > 
> >> My Command
> >> ogr2ogr -f GML -t_srs EPSG:4326 -s_srs EPSG:900913 -nln administrative
> >> planet_osm_polygon_boundary_administrative.gml PG:'dbname=osmdb
> >> user=osm' -sql "SELECT admin_level, name, way FROM planet_osm_polygon
> >> WHERE boundary = 'administrative')"
> >> 
> >> Regards
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From peifer at gmx.eu  Sat Feb 25 04:19:37 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Feb 25 04:20:00 2012
Subject: [gdal-dev] Re: ogr2ogr GML creation encoding issue
In-Reply-To: <201202242005.00213.even.rouault@mines-paris.org>
References: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>
	<1330102566.4f47c126726d5@webmail.free.fr>
	<CALtm4h0vODQhcEmVwX6KxM05S6ZPQ4K2Ktz+95-+UEP5qoOoSg@mail.gmail.com>
	<201202242005.00213.even.rouault@mines-paris.org>
Message-ID: <4F48A7A9.4090508@gmx.eu>

On 24/02/2012 20:05, Even Rouault wrote:
> CC'ing the list in case someone has a better idea. I don't. Should work...
>
>>> Selon Travis Kirstine<traviskirstine@gmail.com>:
>>>
>>>> My Command
>>>> ogr2ogr -f GML -t_srs EPSG:4326 -s_srs EPSG:900913 -nln administrative
>>>> planet_osm_polygon_boundary_administrative.gml PG:'dbname=osmdb
>>>> user=osm' -sql "SELECT admin_level, name, way FROM planet_osm_polygon
>>>> WHERE boundary = 'administrative')"
>>>>

Are you using ogr2ogr frim trunk?

Hermann


From srp at geo.ku.dk  Sat Feb 25 09:11:42 2012
From: srp at geo.ku.dk (Simon R. Proud)
Date: Sat Feb 25 09:15:11 2012
Subject: [gdal-dev] Compilation problem on Ubuntu
Message-ID: <4F48FA2E020000400005AA81@smtp.geo.ku.dk>

Hello all,
I'm trying to compile GDAL 1.9.0 on Ubuntu 11.04, but am not having any luck.
I configure with:
./configure --with-hdf4 --with-hdf5 --with-grib --with-msg --with-python
And that works with no problems (I have the MSG wavelet transform code, by the way, so that's not the issue).
But, when I make I get this fatal error part-way through the compilation:


hdf4imagedataset.cpp: In member function 'void HDF4ImageDataset::GetSwatAttrs(int32)':
hdf4imagedataset.cpp:1723:41: error: 'SWsdid' was not declared in this scope
hdf4imagedataset.cpp: In member function 'void HDF4ImageDataset::GetGridAttrs(int32)':
hdf4imagedataset.cpp:1833:41: error: 'GDsdid' was not declared in this scope
hdf4imagedataset.cpp: In member function 'int HDF4ImageDataset::ProcessSwathGeolocation(int32, char**)':
hdf4imagedataset.cpp:2218:48: warning: deprecated conversion from string constant to 'char*'
hdf4imagedataset.cpp:2240:51: warning: deprecated conversion from string constant to 'char*'
hdf4imagedataset.cpp:2252:51: warning: deprecated conversion from string constant to 'char*'
make[2]: *** [../o/hdf4imagedataset.lo] Error 1
make[2]: Leaving directory `/GDAL/frmts/hdf4'
make[1]: *** [hdf4-install-obj] Error 2
make[1]: Leaving directory `/GDAL/frmts'
make: *** [frmts-target] Error 2



I have the following HDF5 libraries installed:
hdf4-tools (v4.2r4-11ubuntu1)
libhdf4-0 (v4.2r4-11ubuntu1)
libhdf4-alt-dev (v4.2r4-11ubuntu1)
libhdf-4-0-alt (v4.2r4-11ubuntu1)
libhdfeos0 (v2.16v1.00.dfsg.2-4)
libhdfeos-dev (v2.16v1.00.dfsg.2-4)


I've tried various combinations libraries (including the -alt and normal versions) and nothing seems to change the result, always the same error. Compilation completes successfully if I configure --without-hdf4. Unfortunately I need the MSG capability for GDAL (and would like fillnodata.py also) so cannot just use the Ubuntu GDAL package.
So, any idea what the problem might be?


Thanks,
Simon.






~~~~~~~~~~~~~~~~~~~~~~~~
Dr Simon Proud
Post-doc, Satellite Remote Sensing
University of Copenhagen


Tel: +45 35 32 25 84
~~~~~~~~~~~~~~~~~~~~~~~~

From even.rouault at mines-paris.org  Sat Feb 25 11:09:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 25 11:10:14 2012
Subject: [gdal-dev] Compilation problem on Ubuntu
In-Reply-To: <4F48FA2E020000400005AA81@smtp.geo.ku.dk>
References: <4F48FA2E020000400005AA81@smtp.geo.ku.dk>
Message-ID: <201202251709.33021.even.rouault@mines-paris.org>

Le samedi 25 f?vrier 2012 15:11:42, Simon R. Proud a ?crit :
> Hello all,
> I'm trying to compile GDAL 1.9.0 on Ubuntu 11.04, but am not having any
> luck. I configure with:
> ./configure --with-hdf4 --with-hdf5 --with-grib --with-msg --with-python
> And that works with no problems (I have the MSG wavelet transform code, by
> the way, so that's not the issue). But, when I make I get this fatal error
> part-way through the compilation:
> 
> 
> hdf4imagedataset.cpp: In member function 'void
> HDF4ImageDataset::GetSwatAttrs(int32)': hdf4imagedataset.cpp:1723:41:
> error: 'SWsdid' was not declared in this scope hdf4imagedataset.cpp: In
> member function 'void HDF4ImageDataset::GetGridAttrs(int32)':
> hdf4imagedataset.cpp:1833:41: error: 'GDsdid' was not declared in this
> scope hdf4imagedataset.cpp: In member function 'int
> HDF4ImageDataset::ProcessSwathGeolocation(int32, char**)':
> hdf4imagedataset.cpp:2218:48: warning: deprecated conversion from string
> constant to 'char*' hdf4imagedataset.cpp:2240:51: warning: deprecated
> conversion from string constant to 'char*' hdf4imagedataset.cpp:2252:51:
> warning: deprecated conversion from string constant to 'char*' make[2]:
> *** [../o/hdf4imagedataset.lo] Error 1
> make[2]: Leaving directory `/GDAL/frmts/hdf4'
> make[1]: *** [hdf4-install-obj] Error 2
> make[1]: Leaving directory `/GDAL/frmts'
> make: *** [frmts-target] Error 2
> 
> 
> 
> I have the following HDF5 libraries installed:
> hdf4-tools (v4.2r4-11ubuntu1)
> libhdf4-0 (v4.2r4-11ubuntu1)
> libhdf4-alt-dev (v4.2r4-11ubuntu1)
> libhdf-4-0-alt (v4.2r4-11ubuntu1)
> libhdfeos0 (v2.16v1.00.dfsg.2-4)
> libhdfeos-dev (v2.16v1.00.dfsg.2-4)
> 
> 
> I've tried various combinations libraries (including the -alt and normal
> versions) and nothing seems to change the result, always the same error.
> Compilation completes successfully if I configure --without-hdf4.
> Unfortunately I need the MSG capability for GDAL (and would like
> fillnodata.py also) so cannot just use the Ubuntu GDAL package. So, any
> idea what the problem might be?

Yes, the HDF4 driver contains its own version of hdfeos, which is not 
identical (it has a few custom additions) with the one provided by the 
libhdfeos-dev package. So you should uninstall libhdfeos-dev and it should 
compile fine.

> 
> 
> Thanks,
> Simon.
> 
> 
> 
> 
> 
> 
> ~~~~~~~~~~~~~~~~~~~~~~~~
> Dr Simon Proud
> Post-doc, Satellite Remote Sensing
> University of Copenhagen
> 
> 
> Tel: +45 35 32 25 84
> ~~~~~~~~~~~~~~~~~~~~~~~~
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jgamble3 at gmail.com  Sat Feb 25 13:21:11 2012
From: jgamble3 at gmail.com (jgamble)
Date: Sat Feb 25 13:21:32 2012
Subject: [gdal-dev] Switching from ArcGIS to GDAL
Message-ID: <1330194071698-4507244.post@n6.nabble.com>

Hi All,

I've recently been tasked to cache several large imagery datasets using
ArcGIS and have found that my bottleneck has been generating overviews for
the datasets prior to caching.  ArcGIS appears to be limiting itself to a
single core while building overviews, which seems ridiculous on a 12 core
machine ... which is why I am here for some help.

I am using mosaic datasets in ArcGIS to manage my images.  Footprints for
the images have been created to clip out any bounding black pixels.  Am I
able to define overviews in ArcGIS and then use GDAL to build them with
multiple cores ... Or at least utilize the footprints I've already defined
in my mosaic dataset?  Does GDAL have something similar to a mosaic dataset
to manage images that I should be using?

I'm extremely new to the thought of using GDAL, so any advice on how to go
about utilizing it or at least pointing me in the right direction to some
tutorials is much appreciated.

Thanks
Jon.      

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4507244.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From polimax at mail.ru  Sat Feb 25 13:46:36 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb 25 13:46:51 2012
Subject: [gdal-dev] Switching from ArcGIS to GDAL
In-Reply-To: <1330194071698-4507244.post@n6.nabble.com>
References: <1330194071698-4507244.post@n6.nabble.com>
Message-ID: <4F492C8C.40700@mail.ru>

25.02.2012 22:21, jgamble ?????:
> Hi All,
>
> I've recently been tasked to cache several large imagery datasets using
> ArcGIS and have found that my bottleneck has been generating overviews for
> the datasets prior to caching.  ArcGIS appears to be limiting itself to a
> single core while building overviews, which seems ridiculous on a 12 core
> machine ... which is why I am here for some help.
>
> I am using mosaic datasets in ArcGIS to manage my images.  Footprints for
> the images have been created to clip out any bounding black pixels.  Am I
> able to define overviews in ArcGIS and then use GDAL to build them with
> multiple cores ... Or at least utilize the footprints I've already defined
> in my mosaic dataset?  Does GDAL have something similar to a mosaic dataset
> to manage images that I should be using?
>
> I'm extremely new to the thought of using GDAL, so any advice on how to go
> about utilizing it or at least pointing me in the right direction to some
> tutorials is much appreciated.
>
> Thanks
> Jon.
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4507244.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Do you try http://gdal.org/gdaladdo.html ?

Best regards,
Dmitry
From jgamble3 at gmail.com  Sat Feb 25 14:02:27 2012
From: jgamble3 at gmail.com (jgamble)
Date: Sat Feb 25 14:02:32 2012
Subject: [gdal-dev] Re: Switching from ArcGIS to GDAL
In-Reply-To: <4F492C8C.40700@mail.ru>
References: <1330194071698-4507244.post@n6.nabble.com> <4F492C8C.40700@mail.ru>
Message-ID: <1330196547949-4507323.post@n6.nabble.com>

Does gdaladdo support mosaic datasets?  If so, are there examples of how to
use gdaladdo with mosaic datasets?


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4507323.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From polimax at mail.ru  Sat Feb 25 14:35:15 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Feb 25 14:35:40 2012
Subject: [gdal-dev] Re: Switching from ArcGIS to GDAL
In-Reply-To: <1330196547949-4507323.post@n6.nabble.com>
References: <1330194071698-4507244.post@n6.nabble.com> <4F492C8C.40700@mail.ru>
	<1330196547949-4507323.post@n6.nabble.com>
Message-ID: <4F4937F3.1070708@mail.ru>

25.02.2012 23:02, jgamble ?????:
> Does gdaladdo support mosaic datasets?  If so, are there examples of how to
> use gdaladdo with mosaic datasets?
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4507323.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Do you mean new in ArcGIS 10 raster mosaic in geodatabase?

Best regards,
Dmitry
From nfarah at hotmail.com  Sat Feb 25 17:28:41 2012
From: nfarah at hotmail.com (N. Farah)
Date: Sat Feb 25 17:30:13 2012
Subject: [gdal-dev] UTF-8 and CPLSetConfigOption
Message-ID: <SNT116-W2534CBBC2228C739038FCBDD6B0@phx.gbl>





Hi,
I have a question about UTF-8 support per this rfc: http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
If UTF-8 is turned on, will the following calls assume that the passed strings are UTF-8 ?and the passed folder paths should be in UTF-8 ?
CPLSetConfigOption( "GDAL_DATA", myDataFolder);
and
CPLSetConfigOption( "GDAL_PAM_PROXY_DIR", myTempFolder);
Any clarification on this is appreciated.
Thanks
Noury Farah
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120225/b363f168/attachment.html
From warmerdam at pobox.com  Sat Feb 25 20:48:29 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb 25 20:49:10 2012
Subject: [gdal-dev] UTF-8 and CPLSetConfigOption
In-Reply-To: <SNT116-W2534CBBC2228C739038FCBDD6B0@phx.gbl>
References: <SNT116-W2534CBBC2228C739038FCBDD6B0@phx.gbl>
Message-ID: <4F498F6D.7070304@pobox.com>

On 12-02-25 02:28 PM, N. Farah wrote:
> Hi,
>
> I have a question about UTF-8 support per this rfc:
> http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> If UTF-8 is turned on, will the following calls assume that the passed strings
> are UTF-8 ?
> and the passed folder paths should be in UTF-8 ?
>
> CPLSetConfigOption( "GDAL_DATA", myDataFolder);
>
> and
>
> CPLSetConfigOption( "GDAL_PAM_PROXY_DIR", myTempFolder);
>
> Any clarification on this is appreciated.

Noury,

Yes, these will be treated as UTF-8.

Note that the actual code handling these values doesn't do anything
special, but because the underlying functions that will receive the
composed values (ie. VSIFOpen()) expect UTF-8 then the values at the
higher level are also implicitly assumed to be UTF-8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From nfarah at hotmail.com  Sat Feb 25 21:06:25 2012
From: nfarah at hotmail.com (N. Farah)
Date: Sat Feb 25 21:08:16 2012
Subject: [gdal-dev] Re: UTF-8 and CPLSetConfigOption
Message-ID: <SNT116-W5312BFC4938B6DF9E6DB87DD680@phx.gbl>


Great ! Thank you Frank for the prompt response.Noury FarahOn 12-02-25 02:28 PM, N. Farah wrote:
> Hi,
>
> I have a question about UTF-8 support per this rfc:
> http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> If UTF-8 is turned on, will the following calls assume that the passed strings
> are UTF-8 ?
> and the passed folder paths should be in UTF-8 ?
>
> CPLSetConfigOption( "GDAL_DATA", myDataFolder);
>
> and
>
> CPLSetConfigOption( "GDAL_PAM_PROXY_DIR", myTempFolder);
>
> Any clarification on this is appreciated.

Noury,

Yes, these will be treated as UTF-8.

Note that the actual code handling these values doesn't do anything
special, but because the underlying functions that will receive the
composed values (ie. VSIFOpen()) expect UTF-8 then the values at the
higher level are also implicitly assumed to be UTF-8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120225/601c2f1a/attachment.html
From warmerdam at pobox.com  Sun Feb 26 11:54:54 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Feb 26 11:55:18 2012
Subject: [gdal-dev] Re: Switching from ArcGIS to GDAL
In-Reply-To: <1330196547949-4507323.post@n6.nabble.com>
References: <1330194071698-4507244.post@n6.nabble.com>
	<4F492C8C.40700@mail.ru> <1330196547949-4507323.post@n6.nabble.com>
Message-ID: <4F4A63DE.7040306@pobox.com>

On 12-02-25 11:02 AM, jgamble wrote:
> Does gdaladdo support mosaic datasets?  If so, are there examples of how to
> use gdaladdo with mosaic datasets?

Jon,

GDAL does not support ArcGIS virtual mosaic format.

The gdaladdo utility can be used on conventional raster formats.  It is
also possible to build a GDAL virtual raster file which might be a mosaic
of raster files and then build overviews on it.  I believe gdalbuildvrt
is normal utility used to build .vrt mosaics.

However, whether this is suitable for your purposes will depend on
what you want to use the result for.  If you just want a freestanding
overview image of a set of images then you would be better off just
doing something like:

   gdal_merge.py -o mosaic.tif -ps 20 20 in*.tif

Assuming you want a mosaic of all in*.tif files with the output overview
mosaic with a 20m by 20m pixel size.

Note that .vrt's and their corresponding overviews may be usable in
ArcGIS (since it uses GDAL) but I am not certain and it will likely
depend on the version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From aashishcy at gmail.com  Mon Feb 27 01:51:37 2012
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Mon Feb 27 01:51:51 2012
Subject: [gdal-dev] plate-carree to google maps projection
Message-ID: <CAGeT8yk+qz48UsRiTPG5=7yfzv6gasTRGhLJBN5c45VDxMTF3Q@mail.gmail.com>

Friends,

I took a NASA blue marble image (in plate-carree projection) and translated
it to google maps projection EPSG:3857. The final image is here (I
converted it to JPG) http://prographicstech.com/world2.jpg.

Initial image dimension were 5400 X 2700 and final image dimensions is 4693
X 3798 (I did not change scale / size). When I overlayed this image on
google maps it came out stretched. (I had put these bounds,
-90,-180 to 90,180).

I believe I understand the problem but I am not sure if have a good
solution to the problem. I can certainly ask this question to google maps
groups but I am wondering if anyone else has any specific suggestions.

For the conversions I followed an earlier email to gdal-dev regarding the
same matter.

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120227/74e110e7/attachment.html
From aashishcy at gmail.com  Mon Feb 27 02:47:46 2012
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Mon Feb 27 02:48:30 2012
Subject: [gdal-dev] Re: plate-carree to google maps projection
In-Reply-To: <CAGeT8yk+qz48UsRiTPG5=7yfzv6gasTRGhLJBN5c45VDxMTF3Q@mail.gmail.com>
References: <CAGeT8yk+qz48UsRiTPG5=7yfzv6gasTRGhLJBN5c45VDxMTF3Q@mail.gmail.com>
Message-ID: <CAGeT8yn2ODW=NqJSbkRDd6soqxoeWvMMhvdfsOcX0LAGyb+M=g@mail.gmail.com>

Sorry for the noise..email to the wrong mailing list and also I solved my
issue.

Thanks


On Mon, Feb 27, 2012 at 1:51 AM, Jayesh Chaudhary <aashishcy@gmail.com>wrote:

> Friends,
>
> I took a NASA blue marble image (in plate-carree projection) and
> translated it to google maps projection EPSG:3857. The final image is here
> (I converted it to JPG) http://prographicstech.com/world2.jpg.
>
> Initial image dimension were 5400 X 2700 and final image dimensions is
> 4693 X 3798 (I did not change scale / size). When I overlayed this image on
> google maps it came out stretched. (I had put these bounds,
> -90,-180 to 90,180).
>
> I believe I understand the problem but I am not sure if have a good
> solution to the problem. I can certainly ask this question to google maps
> groups but I am wondering if anyone else has any specific suggestions.
>
> For the conversions I followed an earlier email to gdal-dev regarding the
> same matter.
>
> Thanks,
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120227/73e0ba4a/attachment.html
From beyhan at deprem.gov.tr  Mon Feb 27 02:18:51 2012
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Mon Feb 27 03:11:48 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
Message-ID: <1330327131.7408.4.camel@localhost>

Dear all,
I have shared this mail on Mapserver list but could not solve my
problem.  
Still could not achieve to draw line using start and stop point line
data stored in MySql database.

I have tried Mr. Robert's solution but I have faced an error message.


in map file 
I changed Geometrytype from wkbline to wkblinestring.

LAYER
NAME sfault1 
CONNECTIONTYPE OGR
CONNECTION '<OGRVRTDataSource>
<OGRVRTLayer name="lineview">
<SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>     
<SrcLayer>lineview</SrcLayer>
<GeometryType>wkbLineString</GeometryType>
<GeometryField encoding="WKT" field="geom"/>
<LayerSRS>WGS84</LayerSRS>
<FID>eq_id</FID>
</OGRVRTLayer>
</OGRVRTDataSource>'
  DATA sfault1
  STATUS on
  TYPE line
  CLASS
  NAME "Source Fault"
  SYMBOL "cline"
   SIZE 3
  COLOR  0 0 255 
 END
END 

in database
I have two table 
one is sfault which store 

id lat1 lon1 lat2 lon2 

and another is lineview which is a view 
of this table created by following

create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
+ "," + lon2 + " " + lat2 + ")" as geom from sfault


there is an another issue,

I have to draw line by considering id 
so in the map When I select one id, line should be belong to this id's
information
so I have to make a sql statement as follow instead of draw all line
stored in database I have to draw just one line considering id

something like this:

select eq_id, geom from lineview where id like '%id%' 


please help about this subject....


Regards....



Murat





-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jukka.rahkonen at mmmtike.fi  Mon Feb 27 04:12:37 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Feb 27 04:13:17 2012
Subject: [gdal-dev] Meaning of origin in JP2GML
Message-ID: <loom.20120227T091900-303@post.gmane.org>

Hi,

Is there one, valid and unambiguous interpretation about what the "origin" means
in JPEG2000 OGC-GML style metadata? 

<gml:origin>
   <gml:Point gml:id="P0001" srsName="urn:ogc:def:crs:EPSG::3067">
   <gml:pos>320000.0000000000000 6953999.5000000000000</gml:pos>
   </gml:Point>
</gml:origin>

I have read from a mail by Frank Warmerdam that origin should mean 
the centre of the anchor pixel. However, it looks like one major 
software vendor has a different interpretation and places the corner
of the corner pixel into the origin.

>From the OGC documents I could only find a Public discussion paper 
https://portal.opengeospatial.org/files/?artifact_id=35653 which, if I
understand it right, is giving the same advice than Frank.

Excerpt:
" g)
The location of the origin of the ImageDatum should be the grid point 
in a corner of the rectangular array of pixel values, at the center 
of a pixel. [Best Practice]
NOTE As stated in Clause B.3.5 of Topic 2, the anchorDefinition pixel 
is usually either the centre or a corner of the image. This document 
recommends that the origin be a corner of the rectangular array. 
Notice that the anchorDefinition is different from the pixelInCell, 
which specifies whether the origin is centered on a pixel or is halfway
between pixel centers. This document recommends that the origin always 
be centered on a corner pixel"

Now I have a few sample images which include either GeoJP2 georeferencing
or JP2GML georeferencing and GDAL finds different extents for those. If 
JPEG2000 image contains both GeoJP2 and JP2GML boxes then GDAL seems 
to select the GeoJP2 one which is good in my case because for these 
images it gives the correct georeferencing.

The JP2GML itself contains only the gml:RectifiedGridCoverage definitions 
for the image but I haven't been able to find yet anything about how the 
raster image pixels should be placed to suit the RectifiedGridCoverage. 
I did find that there there exists a gml:pixelInCell element which can 
be set to mean either cell corner or cell centre but as far as I 
understood JP2GML does not contain this element.

Sometimes I wonder why those OGC publications are called as "standards".

-Jukka Rahkonen-


From jgamble3 at gmail.com  Mon Feb 27 08:45:05 2012
From: jgamble3 at gmail.com (jgamble)
Date: Mon Feb 27 08:45:30 2012
Subject: [gdal-dev] Re: Switching from ArcGIS to GDAL
In-Reply-To: <4F4A63DE.7040306@pobox.com>
References: <1330194071698-4507244.post@n6.nabble.com> <4F492C8C.40700@mail.ru>
	<1330196547949-4507323.post@n6.nabble.com>
	<4F4A63DE.7040306@pobox.com>
Message-ID: <CAHdU39qtpnmzLR_8WUQRLzMmaNLgXoacyaj+8ZrKWMSb-KF8qg@mail.gmail.com>

Frank,

Thanks for the response.  I would like to take the overviews and use them
to cache the imagery into a web service ... I am assuming i'd be able to
use the overviews to cache.  I'll look into gdalbuildvrt command.

Do GDAL mosaics allow you to mask tile boundaries at all?  I'd like to
remove bounding black pixels along the borders prior to buliding overviews.


Thanks
Jon.

On Sun, Feb 26, 2012 at 11:55 AM, Frank Warmerdam [via OSGeo.org] <
ml-node+s1560n4510600h4@n6.nabble.com> wrote:

> On 12-02-25 11:02 AM, jgamble wrote:
> > Does gdaladdo support mosaic datasets?  If so, are there examples of how
> to
> > use gdaladdo with mosaic datasets?
>
> Jon,
>
> GDAL does not support ArcGIS virtual mosaic format.
>
> The gdaladdo utility can be used on conventional raster formats.  It is
> also possible to build a GDAL virtual raster file which might be a mosaic
> of raster files and then build overviews on it.  I believe gdalbuildvrt
> is normal utility used to build .vrt mosaics.
>
> However, whether this is suitable for your purposes will depend on
> what you want to use the result for.  If you just want a freestanding
> overview image of a set of images then you would be better off just
> doing something like:
>
>    gdal_merge.py -o mosaic.tif -ps 20 20 in*.tif
>
> Assuming you want a mosaic of all in*.tif files with the output overview
> mosaic with a 20m by 20m pixel size.
>
> Note that .vrt's and their corresponding overviews may be usable in
> ArcGIS (since it uses GDAL) but I am not certain and it will likely
> depend on the version.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
>
> I set the clouds in motion - turn up   | Frank Warmerdam, [hidden email]<http://user/SendEmail.jtp?type=node&node=4510600&i=0>
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=4510600&i=1>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4510600.html
>  To unsubscribe from Switching from ArcGIS to GDAL, click here<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4507244&code=amdhbWJsZTNAZ21haWwuY29tfDQ1MDcyNDR8NDU0MTk0NDEw>
> .
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4514777.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120227/e769fb92/attachment.html
From Michael.Smith at maine.gov  Mon Feb 27 08:38:16 2012
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Mon Feb 27 08:56:45 2012
Subject: [gdal-dev] Switching from ArcGIS to GDAL
In-Reply-To: <1330194071698-4507244.post@n6.nabble.com>
References: <1330194071698-4507244.post@n6.nabble.com>
Message-ID: <4EFF8BB964547748A07CA32961810C041BD7DC6F@SOM-TEAQASMAIL1.som.w2k.state.me.us>

Hi Jon - alas for we ArcGIS users, which even here in 2012 is still a
single-threaded application.  Who needs more than one CPU core anyway?
So your ArcGIS choice is to split your batch up into 12 groups and run
the processes simultaneously (which will then take all your CPUs), or
use something else.

Might I suggest a pretty simple solution which uses GDAL and MapServer
instead?  In the state of Maine we now serve all of our enterprise web
mapping services (WMS) for imagery using GDAL and MapServer.  Using
gdalwarp and gdal_translate we convert whatever the source imagery is
into JPEG2000 compressed tiles, and generate overview images using
gdalwarp.  This system takes our 3.5TB of source imagery down to about
700GB of JP2 files and is pretty darn fast.

You could set something like this up on a simple PC (but don't use a USB
drive for the data - put it on a fast internal drive) for a small group
of users inside your organization, or on servers for a wide distribution
to a large # of folks.

Our system is designed to support about 2000 end-users and about 10,000
requests per hour, using a dual-CPU (quad-core) HP server.  We use MS4W
which is super-easy to install, and then scripts to generate the tiles.
I'd be happy to share some of these with you as examples.


======================================
Michael Smith
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov
207-215-5530

Board Member, Maine GeoLibrary
Board Member, Maine GIS Users Group
State Rep, National States Geographic Information Council

| MEGIS | GeoLibrary | MEGUG | NSGIC |

State House Station 174
264 Civic Center Drive
Augusta, ME 04333-0174

69 o 47' 49.5"W   44 o 20' 54.5"N 

Confidentiality Notice: This email message, including any attachments,
is for the sole use of the intended recipients and may contain
confidential and privileged information. If you are not the intended
recipient, or an authorized agent of the intended recipient, please
immediately contact the sender by reply email and destroy/delete all
copies of the original message. Any unauthorized review, use, copying,
forwarding, disclosure, or distribution by other than the intended
recipient or authorized agent is prohibited.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of jgamble
Sent: Saturday, February 25, 2012 1:21 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Switching from ArcGIS to GDAL

Hi All,

I've recently been tasked to cache several large imagery datasets using
ArcGIS and have found that my bottleneck has been generating overviews
for
the datasets prior to caching.  ArcGIS appears to be limiting itself to
a
single core while building overviews, which seems ridiculous on a 12
core
machine ... which is why I am here for some help.

I am using mosaic datasets in ArcGIS to manage my images.  Footprints
for
the images have been created to clip out any bounding black pixels.  Am
I
able to define overviews in ArcGIS and then use GDAL to build them with
multiple cores ... Or at least utilize the footprints I've already
defined
in my mosaic dataset?  Does GDAL have something similar to a mosaic
dataset
to manage images that I should be using?

I'm extremely new to the thought of using GDAL, so any advice on how to
go
about utilizing it or at least pointing me in the right direction to
some
tutorials is much appreciated.

Thanks
Jon.      

--
View this message in context:
http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507
244p4507244.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Mon Feb 27 11:39:52 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb 27 11:40:34 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <1330327131.7408.4.camel@localhost>
References: <1330327131.7408.4.camel@localhost>
Message-ID: <CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>

Murat,

First check if your database is accessible using ogrinfo[1].
Then create a vrt file with the content you specified in the CONNECTION
field of the mapfile. Check if ogrinfo gives expected results with this
file.

You probably have gdal executables if you are running mapserver.

[1]: http://www.gdal.org/ogrinfo.html

On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan <beyhan@deprem.gov.tr> wrote:

> Dear all,
> I have shared this mail on Mapserver list but could not solve my
> problem.
> Still could not achieve to draw line using start and stop point line
> data stored in MySql database.
>
> I have tried Mr. Robert's solution but I have faced an error message.
>
>
> in map file
> I changed Geometrytype from wkbline to wkblinestring.
>
> LAYER
> NAME sfault1
> CONNECTIONTYPE OGR
> CONNECTION '<OGRVRTDataSource>
> <OGRVRTLayer name="lineview">
>
> <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>
> <SrcLayer>lineview</SrcLayer>
> <GeometryType>wkbLineString</GeometryType>
> <GeometryField encoding="WKT" field="geom"/>
> <LayerSRS>WGS84</LayerSRS>
> <FID>eq_id</FID>
> </OGRVRTLayer>
> </OGRVRTDataSource>'
>  DATA sfault1
>  STATUS on
>  TYPE line
>  CLASS
>  NAME "Source Fault"
>  SYMBOL "cline"
>   SIZE 3
>  COLOR  0 0 255
>  END
> END
>
> in database
> I have two table
> one is sfault which store
>
> id lat1 lon1 lat2 lon2
>
> and another is lineview which is a view
> of this table created by following
>
> create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
> + "," + lon2 + " " + lat2 + ")" as geom from sfault
>
>
> there is an another issue,
>
> I have to draw line by considering id
> so in the map When I select one id, line should be belong to this id's
> information
> so I have to make a sql statement as follow instead of draw all line
> stored in database I have to draw just one line considering id
>
> something like this:
>
> select eq_id, geom from lineview where id like '%id%'
>
>
> please help about this subject....
>
>
> Regards....
>
>
>
> Murat
>
>
>
>
>
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120227/d287029a/attachment.html
From pramsey at cleverelephant.ca  Mon Feb 27 12:20:29 2012
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Feb 27 12:21:02 2012
Subject: [gdal-dev] FOSS4G North America Call for Presentations Closes March
	1
Message-ID: <CACowWR00-R3VyO-7QdT6K5XGp39u7LjaTR5ACmroSa0ppTj=mg@mail.gmail.com>

FOSS4G-NA (April 10-12, in Washington DC) is shaping up to be very
successful: nearly half of our 400 registration slots are already
filled, and lots of sponsors have signed on. Now it's up to you to
bring the magic!

If you are planning to speak at FOSS4G-NA, you must submit a
presentation abstract by March 1. Please don't forget!

 http://foss4g-na.org/abstract-submission/

The conference program is being organized around three tracks:
 * open source technology best practices and tips;
 * deployment case studies; and
 * emerging ideas and trends in open source.

We have space for about 50 presentations and 20 Ignite sessions, so
get your submissions in!

For more information, please visit our site at http://foss4g-na.org/.

Space is limited to 300 attendees only, so you should sign up today to
ensure that you can be a part of this exciting event!

Related Links:
 * http://foss4g-na.org/registration/ FOSS4G-NA Registration
 * http://wiki.osgeo.org/wiki/North_America_Regional/ OSGeo North
America Chapter
 * http://www.osgeo.org/ Open Source Geospatial Foundation
 * http://2012.foss4g.org/ FOSS4G 2012 - Beijing, China
From andreaerdna at libero.it  Mon Feb 27 14:26:32 2012
From: andreaerdna at libero.it (andreaerdna)
Date: Mon Feb 27 14:27:20 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on
	linux (libecw 3.3)
In-Reply-To: <4F464747.3070207@crige-paca.org>
References: <4F464747.3070207@crige-paca.org>
Message-ID: <1330370792155-4516105.post@n6.nabble.com>


Sylvain Maffren wrote
> 
> I try to convert RGB tiff file (300 Mo) into ECW ( libecw 3.3 and gdal 
> 1.8.1 that I have compiled) using this gdal_translate command, on a 
> Debian Squeeze :  gdal_translate -of "ECW" -co LARGE_OK="YES" -co 
> TARGET="90" -co DATUM="RGF93" -co PROJ="LMFRAN93" file_in.tif 
> file_out.ecw, and I get strange results.
> 


Hi Sylvain,
I also am doing some tests about ECW encoding with GDAL using different OS
(Windows XP 32 bit / Windows 7 64 bit / Linux Ubuntu 10.04 64 bit),
different GDAL versions and ECW plugin (1.9.0 / 1.8.1 / 1.8.0 / 1.7.3 /
1.7.0b2) from different origins (www.gisinternals.com / OSGeo4W / FWTools /
ubuntugis launchpad repository / ERDAS sources), and with or without a
TARGET creation option set.

I'll post the results as soon as the tests are completed.


Andrea Giudiceandrea

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Strange-behaviour-of-gdal-translate-with-ECW-on-linux-libecw-3-3-tp4498738p4516105.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From beyhan at deprem.gov.tr  Mon Feb 27 15:52:47 2012
From: beyhan at deprem.gov.tr (Murat BEYHAN)
Date: Mon Feb 27 15:53:25 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
Message-ID: <20120227204559.M31003@deprem.gov.tr>

Chaitanya,

thanks for your repply,
 
Actually I use ogr and mysql to draw point for example epicenter of 
earthquakes. But this is the first time to draw line which is stored in 
Mysql as a table. Actually there is no problem on drawing shape file of the 
line. But I would like to draw it using MySql and ogr functionality. So I 
have only start and end point of line and I store it on MySql database then 
I try to draw it considering id of the line by sql statement.
Just I would lie to learn how to code it on Mapserver map file and how 
should I store line on database as a start and stop point of the line or as 
a geometry . Please help...
thanks




On Mon, 27 Feb 2012 22:09:52 +0530, Chaitanya kumar CH wrote
> Murat,
> 
> First check if your database is accessible using ogrinfo[1].
> Then create a vrt file with the content you specified in the CONNECTION
> field of the mapfile. Check if ogrinfo gives expected results with this
> file.
> 
> You probably have gdal executables if you are running mapserver.
> 
> [1]: http://www.gdal.org/ogrinfo.html
> 
> On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan 
> <beyhan@deprem.gov.tr> wrote:
> 
> > Dear all,
> > I have shared this mail on Mapserver list but could not solve my
> > problem.
> > Still could not achieve to draw line using start and stop point line
> > data stored in MySql database.
> >
> > I have tried Mr. Robert's solution but I have faced an error message.
> >
> >
> > in map file
> > I changed Geometrytype from wkbline to wkblinestring.
> >
> > LAYER
> > NAME sfault1
> > CONNECTIONTYPE OGR
> > CONNECTION '<OGRVRTDataSource>
> > <OGRVRTLayer name="lineview">
> >
> > 
<SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,po
rt=3306,tables=lineview</SrcDataSource>
> > <SrcLayer>lineview</SrcLayer>
> > <GeometryType>wkbLineString</GeometryType>
> > <GeometryField encoding="WKT" field="geom"/>
> > <LayerSRS>WGS84</LayerSRS>
> > <FID>eq_id</FID>
> > </OGRVRTLayer>
> > </OGRVRTDataSource>'
> >  DATA sfault1
> >  STATUS on
> >  TYPE line
> >  CLASS
> >  NAME "Source Fault"
> >  SYMBOL "cline"
> >   SIZE 3
> >  COLOR  0 0 255
> >  END
> > END
> >
> > in database
> > I have two table
> > one is sfault which store
> >
> > id lat1 lon1 lat2 lon2
> >
> > and another is lineview which is a view
> > of this table created by following
> >
> > create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
> > + "," + lon2 + " " + lat2 + ")" as geom from sfault
> >
> >
> > there is an another issue,
> >
> > I have to draw line by considering id
> > so in the map When I select one id, line should be belong to this id's
> > information
> > so I have to make a sql statement as follow instead of draw all line
> > stored in database I have to draw just one line considering id
> >
> > something like this:
> >
> > select eq_id, geom from lineview where id like '%id%'
> >
> >
> > please help about this subject....
> >
> >
> > Regards....
> >
> >
> >
> > Murat
> >
> >
> >
> >
> >
> > --
> > This message has been scanned for viruses and
> > dangerous content by MailScanner, and is
> > believed to be clean.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> 
> -- 
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.


Murat Beyhan
Jeofizik Y?k. M?h.
T.C.
BA?BAKANLIK
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km. Lodumlu/Ankara
Tel:+90 (312) 2872680-1550


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From andreaerdna at libero.it  Mon Feb 27 20:15:20 2012
From: andreaerdna at libero.it (andreaerdna)
Date: Mon Feb 27 20:15:54 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on
	linux (libecw 3.3)
In-Reply-To: <1330370792155-4516105.post@n6.nabble.com>
References: <4F464747.3070207@crige-paca.org>
	<1330370792155-4516105.post@n6.nabble.com>
Message-ID: <1330391720125-4518428.post@n6.nabble.com>

I've done some tests using a PNG image (22080x11520 pixels, 4 bands,
469.969.142 bytes) as source dataset.


Testing Operative Systems are:

1) MS Windows 7 HP SP1 64-bit 
2) Ubuntu Linux 10.04 64-bit (kernel 2.6.32-38.83)
3) MS Windows XP Pro SP3 32-bit


Testing GDAL versions are:

1) builds for Windows from www.gisinternals.com/sdk [with related 3.3 ECW
plugin]:
GDAL 1.9.0 [64-bit] (release-1600-x64-gdal-1-9-0-mapserver-6-0-1)
GDAL 1.9.0 [32-bit] (release-1600-gdal-1-9-0-mapserver-6-0-1)
GDAL 1.8.1 [64-bit] (release-1600-x64-gdal-1-8-1-mapserver-6-0-1)
GDAL 1.8.1 [32-bit] (release-1600-gdal-1-8-1-mapserver-6-0-1)
GDAL 1.8.0 [64-bit] (release-1600-x64-gdal-1-8-0-mapserver-6-0-0)
GDAL 1.8.0 [32-bit] (release-1600-gdal-1-8-0-mapserver-6-0-0)
GDAL 1.7.3 [64-bit] (release-1600-x64-gdal-1-7-3-mapserver-5-6-5)
GDAL 1.7.3 [32-bit] (release-1600-gdal-1-7-3-mapserver-5-6-5)

2) builds for Ubuntu 10.04 64 bit from UbuntuGis repository [using the ECW
libecwj2 3.3 library built by myself from ERDAS SDK Source Code
libecwj2-3.3-2006-09-06.zip]:
GDAL 1.9.0 [64 bit] (gdal-bin 1.9.0-1~exp1~lucid3 / libgdal-ecw-src
1.9.0-2~lucid1 / libgdal-dev 1.9.0-1~exp1~lucid3)
GDAL 1.8.0 [64 bit] (gdal-bin 1.8.0-2~lucid2 / libgdal-ecw-src
1.8.0-2~lucid1 / libgdal1-dev 1.8.0-2~lucid3)

3) build for Windows from OSGeo4W [with 3.3 ECW plugin from
release-1500-gdal-1-8-1-mapserver-6-0-1 at www.gisinternals.com/sdk]:
GDAL 1.8.1 [32-bit] (gdal 1.8.1-5)

4) build for Windows from FWTools [with related ECW plugin]:
GDAL 1.7.0b2 [32-bit] (FWTools 2.4.7)



Results:

- all 64-bit GDAL versions/builds on 64-bit Operative Systems (both Windows
and Linux) tested using gdal_translate with "TARGET=70" creation option
behave the same way producing an output ECW file of 159.832.544 bytes (with
the same checksums);

- almost all 64-bit GDAL versions/builds on 64-bit Operative Systems (both
Windows and Linux) tested using gdal_translate without a "TARGET" creation
option behave the same way producing an output ECW file of 24.982.036 bytes
(with the same checksums) with the only exception of GDAL 1.7.3 [64-bit]
(from www.gisinternals.com/sdk) on Windows 7 64-bit that produces a
considerably different (about 5 time bigger) output ECW file of 129.634.758
bytes;

- all 32-bit GDAL versions/builds on 64-bit/32-bit Windows tested using
gdal_translate with "TARGET=70" creation option behave the same way
producing an output ECW file of 192.085.632 bytes (with the same checksums)
that is slightly bigger than that produced by 64-bit GDAL versions with the
same "TARGET=70" creation option;

- the 32-bit GDAL versions/builds 1.9.0, 1.8.1, 1.8.0 from
www.gisinternals.com/sdk and 1.8.1 from OSGeo4W on 64-bit/32-bit Windows
tested using gdal_translate without a "TARGET" creation option behave the
same way producing an output ECW file of 52.777.560 bytes (with the same
checksums);

- the 32-bit GDAL versions/builds 1.7.3 from www.gisinternals.com/sdk and
1.7.0b2 from FWTools 2.4.7 on 64-bit/32-bit Windows tested using
gdal_translate without a "TARGET" creation option behave the same way
producing an output ECW file of 164.417.131 bytes (with the same checksums)
that is about 3 times bigger than that produced by the other 32-bit GDAL
versions tested.



I hope to do further investigation in the coming days


Andrea Giudiceandrea


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Strange-behaviour-of-gdal-translate-with-ECW-on-linux-libecw-3-3-tp4498738p4518428.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Feb 27 22:33:01 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb 27 22:33:46 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <20120227204559.M31003@deprem.gov.tr>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
	<20120227204559.M31003@deprem.gov.tr>
Message-ID: <CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>

Murat,

Since it is MySQL it doesn't matter much how you store it. If you are going
to edit the end points later, storing them as points is preferable,
otherwise store them as wkt linestring geometries.

For your mapfile, first check if the extents are correct. Then check if the
mapfile works with a shapefile created from the geometries in MySQL.

On Tuesday, February 28, 2012, Murat BEYHAN wrote:

> Chaitanya,
>
> thanks for your repply,
>
> Actually I use ogr and mysql to draw point for example epicenter of
> earthquakes. But this is the first time to draw line which is stored in
> Mysql as a table. Actually there is no problem on drawing shape file of the
> line. But I would like to draw it using MySql and ogr functionality. So I
> have only start and end point of line and I store it on MySql database then
> I try to draw it considering id of the line by sql statement.
> Just I would lie to learn how to code it on Mapserver map file and how
> should I store line on database as a start and stop point of the line or as
> a geometry . Please help...
> thanks
>
>
>
>
> On Mon, 27 Feb 2012 22:09:52 +0530, Chaitanya kumar CH wrote
> > Murat,
> >
> > First check if your database is accessible using ogrinfo[1].
> > Then create a vrt file with the content you specified in the CONNECTION
> > field of the mapfile. Check if ogrinfo gives expected results with this
> > file.
> >
> > You probably have gdal executables if you are running mapserver.
> >
> > [1]: http://www.gdal.org/ogrinfo.html
> >
> > On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan
> > <beyhan@deprem.gov.tr <javascript:;>> wrote:
> >
> > > Dear all,
> > > I have shared this mail on Mapserver list but could not solve my
> > > problem.
> > > Still could not achieve to draw line using start and stop point line
> > > data stored in MySql database.
> > >
> > > I have tried Mr. Robert's solution but I have faced an error message.
> > >
> > >
> > > in map file
> > > I changed Geometrytype from wkbline to wkblinestring.
> > >
> > > LAYER
> > > NAME sfault1
> > > CONNECTIONTYPE OGR
> > > CONNECTION '<OGRVRTDataSource>
> > > <OGRVRTLayer name="lineview">
> > >
> > >
>
> <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,po
> rt=3306,tables=lineview</SrcDataSource>
> > > <SrcLayer>lineview</SrcLayer>
> > > <GeometryType>wkbLineString</GeometryType>
> > > <GeometryField encoding="WKT" field="geom"/>
> > > <LayerSRS>WGS84</LayerSRS>
> > > <FID>eq_id</FID>
> > > </OGRVRTLayer>
> > > </OGRVRTDataSource>'
> > >  DATA sfault1
> > >  STATUS on
> > >  TYPE line
> > >  CLASS
> > >  NAME "Source Fault"
> > >  SYMBOL "cline"
> > >   SIZE 3
> > >  COLOR  0 0 255
> > >  END
> > > END
> > >
> > > in database
> > > I have two table
> > > one is sfault which store
> > >
> > > id lat1 lon1 lat2 lon2
> > >
> > > and another is lineview which is a view
> > > of this table created by following
> > >
> > > create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
> > > + "," + lon2 + " " + lat2 + ")" as geom from sfault
> > >
> > >
> > > there is an another issue,
> > >
> > > I have to draw line by considering id
> > > so in the map When I select one id, line should be belong to this id's
> > > information
> > > so I have to make a sql statement as follow instead of draw all line
> > > stored in database I have to draw just one line considering id
> > >
> > > something like this:
> > >
> > > select eq_id, geom from lineview where id like '%id%'
> > >
> > >
> > > please help about this subject....
> > >
> > >
> > > Regards....
> > >
> > >
> > >
> > > Murat
> > >
> > >
> > >
> > >
> > >
> > > --
> > > This message has been scanned for viruses and
> > > dangerous content by MailScanner, and is
> > > believed to be clean.
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org <javascript:;>
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> > --
> > This message has been scanned for viruses and
> > dangerous content by MailScanner, and is
> > believed to be clean.
>
>
> Murat Beyhan
> Jeofizik Y?k. M?h.
> T.C.
> BA?BAKANLIK
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Deprem Dairesi Ba?kanl???
> Eski?ehir Yolu 12. Km. Lodumlu/Ankara
> Tel:+90 (312) 2872680-1550
>
>
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
>
>

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120228/570b4633/attachment-0001.html
From beyhan at deprem.gov.tr  Tue Feb 28 02:19:37 2012
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Tue Feb 28 02:23:24 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
	<20120227204559.M31003@deprem.gov.tr>
	<CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>
Message-ID: <1330413577.5689.13.camel@localhost>

Chaitanya,


Map file which is try to draw line as follows 
are there any problem on the code

 LAYER
 NAME sfault1
 CONNECTIONTYPE OGR
 CONNECTION '<OGRVRTDataSource>
 <OGRVRTLayer name="lineview">
<SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>
 <SrcLayer>lineview</SrcLayer>
 <GeometryType>wkbLineString</GeometryType>
 <GeometryField encoding="WKT" field="geom"/>
 <LayerSRS>WGS84</LayerSRS>
 <FID>eq_id</FID>
 </OGRVRTLayer>
 </OGRVRTDataSource>'
  DATA sfault1
  STATUS on
  TYPE line
  CLASS
  NAME "Source Fault"
  SYMBOL "cline"
   SIZE 3
  COLOR  0 0 255
  END
  END 

ogrinfo
MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
sfault -summary
INFO: Open of
`MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
      using driver `MySQL' successful.

Layer name: sfault
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
eq_id: String (14.0)
lat1: Real (7.4)
lon1: Real (7.4)
lat2: Real (7.4)
lon2: Real (7.4)

**************linewiew created by following sql statement:*************


 create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
 + "," + lon2 + " " + lat2 + ")" as geom from sfault 

then

[murat@localhost ~]$ ogrinfo
MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
lineview -summary
INFO: Open of
`MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
      using driver `MySQL' successful.

Layer name: lineview
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
eq_id: String (14.0)
geom: Real (0.0)


as you see there is no problem to connect mysql and read information
created mysql geometries from shape file also works here is an example

[murat@localhost ~]$ ogrinfo
MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306
iller -summary
INFO: Open of
`MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306'                            
      using driver `MySQL'
successful.                                                                         

Layer name: iller
Geometry: Polygon
Feature Count: 83
Extent: (26.026489, 35.820221) - (44.869179, 42.094917)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.0174532925199433]]
FID Column = OGR_FID
Geometry Column = SHAPE2
area: Real (13.6)
perimeter: Real (13.6)
illerdd_: Real (0.0)
illerdd_id: Real (0.0)
il_kod: Real (2.0)
iladi: String (20.0)
[murat@localhost ~]$



Now I would like to learn what is wrong with my procedures... please
help



Murat


On Tue, 2012-02-28 at 09:03 +0530, Chaitanya kumar CH wrote:
> Murat,
> 
> 
> Since it is MySQL it doesn't matter much how you store it. If you are
> going to edit the end points later, storing them as points is
> preferable, otherwise store them as wkt linestring geometries.
> 
> 
> For your mapfile, first check if the extents are correct. Then check
> if the mapfile works with a shapefile created from the geometries in
> MySQL.
> 
> On Tuesday, February 28, 2012, Murat BEYHAN wrote:
>         Chaitanya,
>         
>         thanks for your repply,
>         
>         Actually I use ogr and mysql to draw point for example
>         epicenter of
>         earthquakes. But this is the first time to draw line which is
>         stored in
>         Mysql as a table. Actually there is no problem on drawing
>         shape file of the
>         line. But I would like to draw it using MySql and ogr
>         functionality. So I
>         have only start and end point of line and I store it on MySql
>         database then
>         I try to draw it considering id of the line by sql statement.
>         Just I would lie to learn how to code it on Mapserver map file
>         and how
>         should I store line on database as a start and stop point of
>         the line or as
>         a geometry . Please help...
>         thanks
>         
>         
>         
>         
>         On Mon, 27 Feb 2012 22:09:52 +0530, Chaitanya kumar CH wrote
>         > Murat,
>         >
>         > First check if your database is accessible using ogrinfo[1].
>         > Then create a vrt file with the content you specified in the
>         CONNECTION
>         > field of the mapfile. Check if ogrinfo gives expected
>         results with this
>         > file.
>         >
>         > You probably have gdal executables if you are running
>         mapserver.
>         >
>         > [1]: http://www.gdal.org/ogrinfo.html
>         >
>         > On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan
>         > <beyhan@deprem.gov.tr> wrote:
>         >
>         > > Dear all,
>         > > I have shared this mail on Mapserver list but could not
>         solve my
>         > > problem.
>         > > Still could not achieve to draw line using start and stop
>         point line
>         > > data stored in MySql database.
>         > >
>         > > I have tried Mr. Robert's solution but I have faced an
>         error message.
>         > >
>         > >
>         > > in map file
>         > > I changed Geometrytype from wkbline to wkblinestring.
>         > >
>         > > LAYER
>         > > NAME sfault1
>         > > CONNECTIONTYPE OGR
>         > > CONNECTION '<OGRVRTDataSource>
>         > > <OGRVRTLayer name="lineview">
>         > >
>         > >
>         <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,po
>         rt=3306,tables=lineview</SrcDataSource>
>         > > <SrcLayer>lineview</SrcLayer>
>         > > <GeometryType>wkbLineString</GeometryType>
>         > > <GeometryField encoding="WKT" field="geom"/>
>         > > <LayerSRS>WGS84</LayerSRS>
>         > > <FID>eq_id</FID>
>         > > </OGRVRTLayer>
>         > > </OGRVRTDataSource>'
>         > >  DATA sfault1
>         > >  STATUS on
>         > >  TYPE line
>         > >  CLASS
>         > >  NAME "Source Fault"
>         > >  SYMBOL "cline"
>         > >   SIZE 3
>         > >  COLOR  0 0 255
>         > >  END
>         > > END
>         > >
>         > > in database
>         > > I have two table
>         > > one is sfault which store
>         > >
>         > > id lat1 lon1 lat2 lon2
>         > >
>         > > and another is lineview which is a view
>         > > of this table created by following
>         > >
>         > > create view lineview as select eq_id, "LINESTRING(" + lon1
>         + " " + lat1
>         > > + "," + lon2 + " " + lat2 + ")" as geom from sfault
>         > >
>         > >
>         > > there is an another issue,
>         > >
>         > > I have to draw line by considering id
>         > > so in the map When I select one id, line should be belong
>         to this id's
>         > > information
>         > > so I have to make a sql statement as follow instead of
>         draw all line
>         > > stored in database I have to draw just one line
>         considering id
>         > >
>         > > something like this:
>         > >
>         > > select eq_id, geom from lineview where id like '%id%'
>         > >
>         > >
>         > > please help about this subject....
>         > >
>         > >
>         > > Regards....
>         > >
>         > >
>         > >
>         > > Murat
>         > >
>         > >
>         > >
>         > >
>         > >
>         > > --
>         > > This message has been scanned for viruses and
>         > > dangerous content by MailScanner, and is
>         > > believed to be clean.
>         > >
>         > > _______________________________________________
>         > > gdal-dev mailing list
>         > > gdal-dev@lists.osgeo.org
>         > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         > >
>         >
>         > --
>         > Best regards,
>         > Chaitanya kumar CH.
>         >
>         > +91-9494447584
>         > 17.2416N 80.1426E
>         >
>         > --
>         > This message has been scanned for viruses and
>         > dangerous content by MailScanner, and is
>         > believed to be clean.
>         
>         
>         Murat Beyhan
>         Jeofizik Y?k. M?h.
>         T.C.
>         BA?BAKANLIK
>         Afet ve Acil Durum Y?netimi Ba?kanl???
>         Deprem Dairesi Ba?kanl???
>         Eski?ehir Yolu 12. Km. Lodumlu/Ankara
>         Tel:+90 (312) 2872680-1550
>         
>         
>         --
>         This message has been scanned for viruses and
>         dangerous content by MailScanner, and is
>         believed to be clean.
>         
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> 
> -- 
> This message has been scanned for viruses and 
> dangerous content by MailScanner, and is 
> believed to be clean.



Murat BEYHAN 

Jeofizik Y.M?h.
T.C. Ba?bakanl?k
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km.
Lodumlu/ANKARA
Tel: 312 2872680-1556
email:beyhan@deprem.gov.tr




-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jrepetto at free.fr  Tue Feb 28 02:28:03 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Feb 28 02:28:47 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on linux
	(libecw 3.3)
In-Reply-To: <1330391720125-4518428.post@n6.nabble.com>
References: <4F464747.3070207@crige-paca.org>
	<1330370792155-4516105.post@n6.nabble.com>
	<1330391720125-4518428.post@n6.nabble.com>
Message-ID: <4F4C8203.7050601@free.fr>

On 02/28/12 02:15, andreaerdna wrote:

> - the 32-bit GDAL versions/builds 1.7.3 from www.gisinternals.com/sdk and
> 1.7.0b2 from FWTools 2.4.7 on 64-bit/32-bit Windows tested using
> gdal_translate without a "TARGET" creation option behave the same way
> producing an output ECW file of 164.417.131 bytes (with the same checksums)
> that is about 3 times bigger than that produced by the other 32-bit GDAL
> versions tested.
>

Hi,
The default TARGET parameter value has been changed from 75% to 95% 
between GDAL 1.7.3 and GDAL 1.8.
So please allways give the TARGET parameter when you make your tests, 
and use the same TARGET for all your tests.

It would be useful if you can make your test image available to 
everybody, so that people can compare their results with yours. If it is 
not possible, use a freely available image, such as NASA BlueMarble.

Could you also test on Linux 32 bits ?

Best regards,
Jean-Claude
From sylvain.maffren at crige-paca.org  Tue Feb 28 04:52:03 2012
From: sylvain.maffren at crige-paca.org (Sylvain MAFFREN)
Date: Tue Feb 28 04:51:53 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on linux
	(libecw 3.3)
In-Reply-To: <4F4C8203.7050601@free.fr>
References: <4F464747.3070207@crige-paca.org>
	<1330370792155-4516105.post@n6.nabble.com>
	<1330391720125-4518428.post@n6.nabble.com>
	<4F4C8203.7050601@free.fr>
Message-ID: <4F4CA3C3.2090405@crige-paca.org>

Hi,

And thanks for your tests ! For those who want to make some tests with 
the same file than me (tiff RGB - 293 Mo),I published it on a FTP server :

Adress : ftp://interne.crige-paca.org
Login : gdaldevecw
Password : ftc65*gt

I also published in this FTP the comparative table of my tests and 
results. I agree with Jean-Claude. It could be great to make tests with 
the same original file and the same gdal_translate command 
(gdal_translate -of "ECW" -co LARGE_OK="YES" -co TARGET="90" -co 
DATUM="RGF93" -co PROJ="LMFRAN93" file_in.tif file_out.ecw).

I made some complementary tests on GDAL 1.9 (Windows-Linux-MacOSX / 
32-64 bits) and always get the same differencies...

Best regards,

Sylvain
--

gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 
<http://www.crige-paca.org/>


Le 28/02/2012 08:28, Jean-Claude Repetto a ?crit :
> On 02/28/12 02:15, andreaerdna wrote:
>
>> - the 32-bit GDAL versions/builds 1.7.3 from www.gisinternals.com/sdk 
>> and
>> 1.7.0b2 from FWTools 2.4.7 on 64-bit/32-bit Windows tested using
>> gdal_translate without a "TARGET" creation option behave the same way
>> producing an output ECW file of 164.417.131 bytes (with the same 
>> checksums)
>> that is about 3 times bigger than that produced by the other 32-bit GDAL
>> versions tested.
>>
>
> Hi,
> The default TARGET parameter value has been changed from 75% to 95% 
> between GDAL 1.7.3 and GDAL 1.8.
> So please allways give the TARGET parameter when you make your tests, 
> and use the same TARGET for all your tests.
>
> It would be useful if you can make your test image available to 
> everybody, so that people can compare their results with yours. If it 
> is not possible, use a freely available image, such as NASA BlueMarble.
>
> Could you also test on Linux 32 bits ?
>
> Best regards,
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120228/270f449f/attachment.html
From sroeckelein at gmail.com  Tue Feb 28 07:06:36 2012
From: sroeckelein at gmail.com (=?ISO-8859-1?Q?Stefan_R=F6ckelein?=)
Date: Tue Feb 28 07:06:40 2012
Subject: [gdal-dev] OGR: read datasources from a database
Message-ID: <CAD39jT=tStdchF-AwKUzoQT1yi4GEXHvZRUS-CARdL=_FHgLvQ@mail.gmail.com>

Hi,

the usual procedure to open a file with OGR is to use
OGRSFDriverRegistrar::Open("somefile.dxf",FALSE)
Now I want to open a DXF-file which was previously stored in a database.
Therefore I would need some ORG method which reads the drawing not from a
file, but from a string (containing the whole DXF-file) directly.
Is it possible to do this somehow?

An alternative could be to save and read an OGRDataSource object inside the
database. Is this possible?

Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120228/88c2f13c/attachment.html
From even.rouault at mines-paris.org  Tue Feb 28 07:32:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 28 07:33:36 2012
Subject: [gdal-dev] OGR: read datasources from a database
In-Reply-To: <CAD39jT=tStdchF-AwKUzoQT1yi4GEXHvZRUS-CARdL=_FHgLvQ@mail.gmail.com>
References: <CAD39jT=tStdchF-AwKUzoQT1yi4GEXHvZRUS-CARdL=_FHgLvQ@mail.gmail.com>
Message-ID: <1330432374.4f4cc976514ef@webmail.free.fr>

Selon Stefan R?ckelein <sroeckelein@gmail.com>:

> Hi,
>
> the usual procedure to open a file with OGR is to use
> OGRSFDriverRegistrar::Open("somefile.dxf",FALSE)
> Now I want to open a DXF-file which was previously stored in a database.
> Therefore I would need some ORG method which reads the drawing not from a
> file, but from a string (containing the whole DXF-file) directly.
> Is it possible to do this somehow?
>
> An alternative could be to save and read an OGRDataSource object inside the
> database. Is this possible?

The DXF driver use the CPL Virtual File I/O API, so you can read from a
in-memory file created with VSIFileFromMemBuffer for example ( see
http://gdal.org/cpl__vsi_8h.html#af9c1b931449d423e7a80bacb75ff0717 )

The code to use would be something like :

char* pszTheDXFContent = "a_string_with_the_dxf_file";
VSILFILE* fpMem = VSIFileFromMemBuffer ("/vsimem/temp.dxf", pszTheDXFContent,
strlen(pszTheDXFContent), FALSE );
VSIFCloseL(fpMem);
OGRDataSource* poDS = OGRSFDriverRegistrar::Open("/vsimem/temp.dxf",FALSE);

/* do something */

OGRSFDriverRegistrar::ReleaseDataSource(poDS);
VSIUnlink("/vsimem/temp.dxf");

>
> Stefan
>


From chaitanya.ch at gmail.com  Tue Feb 28 07:38:17 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 28 07:38:28 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <1330413577.5689.13.camel@localhost>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
	<20120227204559.M31003@deprem.gov.tr>
	<CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>
	<1330413577.5689.13.camel@localhost>
Message-ID: <CAMKgpOZyLq6KtTTEA87QWp5+-TOkuv1uNKRrqoh0MH=K0HD2=g@mail.gmail.com>

Murat,

I see that your view,  lineview, doesn't give the expected geometry type
with ogrinfo. It is showing the datatype as Real. Check if the datatype of
geom is actually string/text.

On Tue, Feb 28, 2012 at 12:49 PM, Murat Beyhan <beyhan@deprem.gov.tr> wrote:

> Chaitanya,
>
>
> Map file which is try to draw line as follows
> are there any problem on the code
>
>  LAYER
>  NAME sfault1
>  CONNECTIONTYPE OGR
>  CONNECTION '<OGRVRTDataSource>
>  <OGRVRTLayer name="lineview">
>
> <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>
>  <SrcLayer>lineview</SrcLayer>
>  <GeometryType>wkbLineString</GeometryType>
>  <GeometryField encoding="WKT" field="geom"/>
>  <LayerSRS>WGS84</LayerSRS>
>  <FID>eq_id</FID>
>  </OGRVRTLayer>
>  </OGRVRTDataSource>'
>  DATA sfault1
>  STATUS on
>  TYPE line
>  CLASS
>  NAME "Source Fault"
>  SYMBOL "cline"
>   SIZE 3
>  COLOR  0 0 255
>  END
>  END
>
> ogrinfo
> MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
> sfault -summary
> INFO: Open of
> `MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>      using driver `MySQL' successful.
>
> Layer name: sfault
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> eq_id: String (14.0)
> lat1: Real (7.4)
> lon1: Real (7.4)
> lat2: Real (7.4)
> lon2: Real (7.4)
>
> **************linewiew created by following sql statement:*************
>
>
>  create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
>  + "," + lon2 + " " + lat2 + ")" as geom from sfault
>
> then
>
> [murat@localhost ~]$ ogrinfo
> MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
> lineview -summary
> INFO: Open of
> `MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>      using driver `MySQL' successful.
>
> Layer name: lineview
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> eq_id: String (14.0)
> geom: Real (0.0)
>
>
> as you see there is no problem to connect mysql and read information
> created mysql geometries from shape file also works here is an example
>
> [murat@localhost ~]$ ogrinfo
> MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306
> iller -summary
> INFO: Open of
> `MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306'
>      using driver `MySQL'
> successful.
>
> Layer name: iller
> Geometry: Polygon
> Feature Count: 83
> Extent: (26.026489, 35.820221) - (44.869179, 42.094917)
> Layer SRS WKT:
> GEOGCS["GCS_WGS_1984",
>    DATUM["WGS_1984",
>        SPHEROID["WGS_1984",6378137,298.257223563]],
>    PRIMEM["Greenwich",0],
>    UNIT["Degree",0.0174532925199433]]
> FID Column = OGR_FID
> Geometry Column = SHAPE2
> area: Real (13.6)
> perimeter: Real (13.6)
> illerdd_: Real (0.0)
> illerdd_id: Real (0.0)
> il_kod: Real (2.0)
> iladi: String (20.0)
> [murat@localhost ~]$
>
>
>
> Now I would like to learn what is wrong with my procedures... please
> help
>
>
>
> Murat
>
>
> On Tue, 2012-02-28 at 09:03 +0530, Chaitanya kumar CH wrote:
> > Murat,
> >
> >
> > Since it is MySQL it doesn't matter much how you store it. If you are
> > going to edit the end points later, storing them as points is
> > preferable, otherwise store them as wkt linestring geometries.
> >
> >
> > For your mapfile, first check if the extents are correct. Then check
> > if the mapfile works with a shapefile created from the geometries in
> > MySQL.
> >
> > On Tuesday, February 28, 2012, Murat BEYHAN wrote:
> >         Chaitanya,
> >
> >         thanks for your repply,
> >
> >         Actually I use ogr and mysql to draw point for example
> >         epicenter of
> >         earthquakes. But this is the first time to draw line which is
> >         stored in
> >         Mysql as a table. Actually there is no problem on drawing
> >         shape file of the
> >         line. But I would like to draw it using MySql and ogr
> >         functionality. So I
> >         have only start and end point of line and I store it on MySql
> >         database then
> >         I try to draw it considering id of the line by sql statement.
> >         Just I would lie to learn how to code it on Mapserver map file
> >         and how
> >         should I store line on database as a start and stop point of
> >         the line or as
> >         a geometry . Please help...
> >         thanks
> >
> >
> >
> >
> >         On Mon, 27 Feb 2012 22:09:52 +0530, Chaitanya kumar CH wrote
> >         > Murat,
> >         >
> >         > First check if your database is accessible using ogrinfo[1].
> >         > Then create a vrt file with the content you specified in the
> >         CONNECTION
> >         > field of the mapfile. Check if ogrinfo gives expected
> >         results with this
> >         > file.
> >         >
> >         > You probably have gdal executables if you are running
> >         mapserver.
> >         >
> >         > [1]: http://www.gdal.org/ogrinfo.html
> >         >
> >         > On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan
> >         > <beyhan@deprem.gov.tr> wrote:
> >         >
> >         > > Dear all,
> >         > > I have shared this mail on Mapserver list but could not
> >         solve my
> >         > > problem.
> >         > > Still could not achieve to draw line using start and stop
> >         point line
> >         > > data stored in MySql database.
> >         > >
> >         > > I have tried Mr. Robert's solution but I have faced an
> >         error message.
> >         > >
> >         > >
> >         > > in map file
> >         > > I changed Geometrytype from wkbline to wkblinestring.
> >         > >
> >         > > LAYER
> >         > > NAME sfault1
> >         > > CONNECTIONTYPE OGR
> >         > > CONNECTION '<OGRVRTDataSource>
> >         > > <OGRVRTLayer name="lineview">
> >         > >
> >         > >
> >
> <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,po
> >         rt=3306,tables=lineview</SrcDataSource>
> >         > > <SrcLayer>lineview</SrcLayer>
> >         > > <GeometryType>wkbLineString</GeometryType>
> >         > > <GeometryField encoding="WKT" field="geom"/>
> >         > > <LayerSRS>WGS84</LayerSRS>
> >         > > <FID>eq_id</FID>
> >         > > </OGRVRTLayer>
> >         > > </OGRVRTDataSource>'
> >         > >  DATA sfault1
> >         > >  STATUS on
> >         > >  TYPE line
> >         > >  CLASS
> >         > >  NAME "Source Fault"
> >         > >  SYMBOL "cline"
> >         > >   SIZE 3
> >         > >  COLOR  0 0 255
> >         > >  END
> >         > > END
> >         > >
> >         > > in database
> >         > > I have two table
> >         > > one is sfault which store
> >         > >
> >         > > id lat1 lon1 lat2 lon2
> >         > >
> >         > > and another is lineview which is a view
> >         > > of this table created by following
> >         > >
> >         > > create view lineview as select eq_id, "LINESTRING(" + lon1
> >         + " " + lat1
> >         > > + "," + lon2 + " " + lat2 + ")" as geom from sfault
> >         > >
> >         > >
> >         > > there is an another issue,
> >         > >
> >         > > I have to draw line by considering id
> >         > > so in the map When I select one id, line should be belong
> >         to this id's
> >         > > information
> >         > > so I have to make a sql statement as follow instead of
> >         draw all line
> >         > > stored in database I have to draw just one line
> >         considering id
> >         > >
> >         > > something like this:
> >         > >
> >         > > select eq_id, geom from lineview where id like '%id%'
> >         > >
> >         > >
> >         > > please help about this subject....
> >         > >
> >         > >
> >         > > Regards....
> >         > >
> >         > >
> >         > >
> >         > > Murat
> >         > >
> >         > >
> >         > >
> >         > >
> >         > >
> >         > > --
> >         > > This message has been scanned for viruses and
> >         > > dangerous content by MailScanner, and is
> >         > > believed to be clean.
> >         > >
> >         > > _______________________________________________
> >         > > gdal-dev mailing list
> >         > > gdal-dev@lists.osgeo.org
> >         > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         > >
> >         >
> >         > --
> >         > Best regards,
> >         > Chaitanya kumar CH.
> >         >
> >         > +91-9494447584
> >         > 17.2416N 80.1426E
> >         >
> >         > --
> >         > This message has been scanned for viruses and
> >         > dangerous content by MailScanner, and is
> >         > believed to be clean.
> >
> >
> >         Murat Beyhan
> >         Jeofizik Y?k. M?h.
> >         T.C.
> >         BA?BAKANLIK
> >         Afet ve Acil Durum Y?netimi Ba?kanl???
> >         Deprem Dairesi Ba?kanl???
> >         Eski?ehir Yolu 12. Km. Lodumlu/Ankara
> >         Tel:+90 (312) 2872680-1550
> >
> >
> >         --
> >         This message has been scanned for viruses and
> >         dangerous content by MailScanner, and is
> >         believed to be clean.
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> > --
> > This message has been scanned for viruses and
> > dangerous content by MailScanner, and is
> > believed to be clean.
>
>
>
> Murat BEYHAN
>
> Jeofizik Y.M?h.
> T.C. Ba?bakanl?k
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Deprem Dairesi Ba?kanl???
> Eski?ehir Yolu 12. Km.
> Lodumlu/ANKARA
> Tel: 312 2872680-1556
> email:beyhan@deprem.gov.tr
>
>
>
>
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120228/2c1e7d77/attachment.html
From traviskirstine at gmail.com  Tue Feb 28 08:12:20 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue Feb 28 08:12:45 2012
Subject: [gdal-dev] Re: ogr2ogr GML creation encoding issue
In-Reply-To: <4F48A7A9.4090508@gmx.eu>
References: <CALtm4h2c-7bYR86GdNGwcoWCRwHCSoixwEBS_+Zoef1BhBLuuQ@mail.gmail.com>
	<1330102566.4f47c126726d5@webmail.free.fr>
	<CALtm4h0vODQhcEmVwX6KxM05S6ZPQ4K2Ktz+95-+UEP5qoOoSg@mail.gmail.com>
	<201202242005.00213.even.rouault@mines-paris.org>
	<4F48A7A9.4090508@gmx.eu>
Message-ID: <CALtm4h03zBT+RhHv+_AjiFQeCuE=j4viZAFZ=m9yLNxK12PEpw@mail.gmail.com>

It turns out that the issue was not related to ogr2ogr at all, the
translation worked fine.  The problem was two issues, first I was
using putty to access my server to run ogr, you need to have the
character set to be UTF-8 and have a font that supports the
characters.  The second issue was that QGIS seems to have a issue with
the GML encoding (works with PostGIS).

Thanks for the help

On 25 February 2012 04:19, Hermann Peifer <peifer@gmx.eu> wrote:
> On 24/02/2012 20:05, Even Rouault wrote:
>>
>> CC'ing the list in case someone has a better idea. I don't. Should work...
>>
>>>> Selon Travis Kirstine<traviskirstine@gmail.com>:
>>>>
>>>>
>>>>> My Command
>>>>> ogr2ogr -f GML -t_srs EPSG:4326 -s_srs EPSG:900913 -nln administrative
>>>>> planet_osm_polygon_boundary_administrative.gml PG:'dbname=osmdb
>>>>> user=osm' -sql "SELECT admin_level, name, way FROM planet_osm_polygon
>>>>> WHERE boundary = 'administrative')"
>>>>>
>
> Are you using ogr2ogr frim trunk?
>
> Hermann
>
>
From knutfrodesoppel at hotmail.com  Tue Feb 28 09:34:01 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Tue Feb 28 09:34:52 2012
Subject: [gdal-dev] reading NOAA-19 AVHRR
Message-ID: <jiioko$q0n$1@dough.gmane.org>

Hi,

The GDAL AVHRR driver seems to work only for data from the older NOAA-9 
- NOAA-17 satellites: http://gdal.org/frmt_l1b.html

Hence it does not work for my NOAA-19 AVHRR files in HRP-format (from 
Eumetcast), which have filenames like avhrr_20120227_235800_noaa19.hrp

I have not able to find any software to convert such images to a format 
which can be read by GDAL.

Does anyone have some hints?

Best regards from Knut-Frode

From jrepetto at free.fr  Tue Feb 28 10:56:01 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Feb 28 10:56:28 2012
Subject: [gdal-dev] Strange behaviour of gdal_translate with ECW on linux
	(libecw 3.3)
In-Reply-To: <4F4CA3C3.2090405@crige-paca.org>
References: <4F464747.3070207@crige-paca.org>
	<1330370792155-4516105.post@n6.nabble.com>
	<1330391720125-4518428.post@n6.nabble.com>
	<4F4C8203.7050601@free.fr> <4F4CA3C3.2090405@crige-paca.org>
Message-ID: <4F4CF911.8020705@free.fr>

Le 28/02/2012 10:52, Sylvain MAFFREN a ?crit :
> Hi,
>
> And thanks for your tests ! For those who want to make some tests with
> the same file than me (tiff RGB - 293 Mo),I published it on a FTP server

My results on Gentoo Linux 64 bits and GDAL 1.9.0 :

Size = 16706521

Band 1
   Minimum=0.000, Maximum=255.000, Mean=110.714, StdDev=51.019
   Checksum=26447
Band 2
   Minimum=0.000, Maximum=255.000, Mean=107.029, StdDev=45.057
   Checksum=18380
Band 3
   Minimum=0.000, Maximum=255.000, Mean=91.003, StdDev=43.803
   Checksum=9105

Jean-Claude
From even.rouault at mines-paris.org  Tue Feb 28 11:06:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 28 11:06:57 2012
Subject: [gdal-dev] reading NOAA-19 AVHRR
In-Reply-To: <jiioko$q0n$1@dough.gmane.org>
References: <jiioko$q0n$1@dough.gmane.org>
Message-ID: <1330445165.4f4cfb6d5a2be@imp.free.fr>

Knut-Frode,

I've skimmed quickly through the driver code and if you are lucky, it is
probably just a matter of changing a few lines (well, I can be wrong).

If you have a debug build of GDAL, you can first try to run "gdalinfo --debug on
avhrr_20120227_235800_noaa19.hrp" . My guess (based on
http://en.wikipedia.org/wiki/NOAA-19 saying that NOAA-19 = NOAA-N' and NOOA-N'
appearing in commented code of the driver...) would be that you would see :
"Unknown spacecraft ID "8"".

If so, you could test the following patch :

Index: l1bdataset.cpp
===================================================================
--- l1bdataset.cpp	(revision 24036)
+++ l1bdataset.cpp	(working copy)
@@ -61,6 +61,7 @@
     NOAA16,     // NOAA-16(L)
     NOAA17,     // NOAA-17(M)
     NOAA18,     // NOAA-18(N)
+    NOAA19,     // NOAA-19(N')
     METOP2      // METOP-2(A)
 };

@@ -1025,10 +1026,10 @@
             case 7:
                 eSpacecraftID = NOAA18;
                 break;
-            /* FIXME: find appropriate samples and test these two cases:
-             * case 8:
-                eSpacecraftID = NOAA-N';
+            case 8:
+                eSpacecraftID = NOAA19;
                 break;
+            /* FIXME: find appropriate samples and test that case:
             case 11:
                 eSpacecraftID = METOP-1;
                 break;*/
@@ -1155,6 +1156,9 @@
         case NOAA18:
             pszText = "NOAA-18(N)";
             break;
+        case NOAA19:
+            pszText = "NOAA-19(N')";
+            break;
         case METOP2:
             pszText = "METOP-2(A)";
             break;

Perhaps Andrey Kiselev, the author of the driver, would have better clues.

Best regards,

Even


From jgamble3 at gmail.com  Tue Feb 28 13:33:14 2012
From: jgamble3 at gmail.com (jgamble)
Date: Tue Feb 28 13:33:53 2012
Subject: [gdal-dev] Re: Switching from ArcGIS to GDAL
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7DC6F@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <1330194071698-4507244.post@n6.nabble.com>
	<4EFF8BB964547748A07CA32961810C041BD7DC6F@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <CAHdU39pDAs465K=87uDh_CYZf4p7EDrMh6XwZdg_4OExcrQHBQ@mail.gmail.com>

Hey Michael,

Good tips on the GDAL/MapServer combo.  I may have a look into such a setup
for comparison purposes.

At the current moment though, I am in need of a solution that uses ArcGIS
Server as the cache that I create will eventually be incorporated back into
existing tiled services hosted on ArcGIS Server.  I was hoping that there
was a solution that would allow me to incorporate GDAL overviews into an
ArcGIS mosaic dataset, though at the moment I am not sure how to do such a
thing.

I'll keep looking at let you know if I find anything.

Thanks for your suggestion concerning MapServer though ... Seems like a lot
of folks are headed towards alternatives to ArcGIS Server these days.

Cheers,
Jon.

On Mon, Feb 27, 2012 at 8:56 AM, Smith, Michael-2 [via OSGeo.org] <
ml-node+s1560n4514858h2@n6.nabble.com> wrote:

> Hi Jon - alas for we ArcGIS users, which even here in 2012 is still a
> single-threaded application.  Who needs more than one CPU core anyway?
> So your ArcGIS choice is to split your batch up into 12 groups and run
> the processes simultaneously (which will then take all your CPUs), or
> use something else.
>
> Might I suggest a pretty simple solution which uses GDAL and MapServer
> instead?  In the state of Maine we now serve all of our enterprise web
> mapping services (WMS) for imagery using GDAL and MapServer.  Using
> gdalwarp and gdal_translate we convert whatever the source imagery is
> into JPEG2000 compressed tiles, and generate overview images using
> gdalwarp.  This system takes our 3.5TB of source imagery down to about
> 700GB of JP2 files and is pretty darn fast.
>
> You could set something like this up on a simple PC (but don't use a USB
> drive for the data - put it on a fast internal drive) for a small group
> of users inside your organization, or on servers for a wide distribution
> to a large # of folks.
>
> Our system is designed to support about 2000 end-users and about 10,000
> requests per hour, using a dual-CPU (quad-core) HP server.  We use MS4W
> which is super-easy to install, and then scripts to generate the tiles.
> I'd be happy to share some of these with you as examples.
>
>
> ======================================
> Michael Smith
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
>
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
>
> | MEGIS | GeoLibrary | MEGUG | NSGIC |
>
> State House Station 174
> 264 Civic Center Drive
> Augusta, ME 04333-0174
>
> 69 o 47' 49.5"W   44 o 20' 54.5"N
>
> Confidentiality Notice: This email message, including any attachments,
> is for the sole use of the intended recipients and may contain
> confidential and privileged information. If you are not the intended
> recipient, or an authorized agent of the intended recipient, please
> immediately contact the sender by reply email and destroy/delete all
> copies of the original message. Any unauthorized review, use, copying,
> forwarding, disclosure, or distribution by other than the intended
> recipient or authorized agent is prohibited.
>
> -----Original Message-----
> From: [hidden email]<http://user/SendEmail.jtp?type=node&node=4514858&i=0>
> [mailto:[hidden email]<http://user/SendEmail.jtp?type=node&node=4514858&i=1>]
> On Behalf Of jgamble
> Sent: Saturday, February 25, 2012 1:21 PM
> To: [hidden email] <http://user/SendEmail.jtp?type=node&node=4514858&i=2>
> Subject: [gdal-dev] Switching from ArcGIS to GDAL
>
> Hi All,
>
> I've recently been tasked to cache several large imagery datasets using
> ArcGIS and have found that my bottleneck has been generating overviews
> for
> the datasets prior to caching.  ArcGIS appears to be limiting itself to
> a
> single core while building overviews, which seems ridiculous on a 12
> core
> machine ... which is why I am here for some help.
>
> I am using mosaic datasets in ArcGIS to manage my images.  Footprints
> for
> the images have been created to clip out any bounding black pixels.  Am
> I
> able to define overviews in ArcGIS and then use GDAL to build them with
> multiple cores ... Or at least utilize the footprints I've already
> defined
> in my mosaic dataset?  Does GDAL have something similar to a mosaic
> dataset
> to manage images that I should be using?
>
> I'm extremely new to the thought of using GDAL, so any advice on how to
> go
> about utilizing it or at least pointing me in the right direction to
> some
> tutorials is much appreciated.
>
> Thanks
> Jon.
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507
> 244p4507244.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=4514858&i=3>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=4514858&i=4>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4514858.html
>  To unsubscribe from Switching from ArcGIS to GDAL, click here<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4507244&code=amdhbWJsZTNAZ21haWwuY29tfDQ1MDcyNDR8NDU0MTk0NDEw>
> .
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Switching-from-ArcGIS-to-GDAL-tp4507244p4523268.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120228/a1ffd298/attachment.html
From Aldo.Lucero at saic.com  Tue Feb 28 18:00:24 2012
From: Aldo.Lucero at saic.com (Aldo)
Date: Tue Feb 28 18:00:52 2012
Subject: [gdal-dev] Issue converting GRASS data to GeoTIFF
Message-ID: <1330470024802-4529514.post@n6.nabble.com>

I searched for this issue, but could not find anything. 

I have 3 data sets that are in GRASS format (cell, cellhd, etc). 
I used GRASS 6.4.2 to convert the GRASS data into GeoTiff using r.out.gdal. 
The command looks as follows: 
r.out.gdal input=japan@japan output=japan.gtif 

I read the japan.gtif file using some of the java interfaced classes for
GDAL (using 1.9.0).
 I get the right number of rows, columns, etc. 
The issue I have is that in some cases, for the same (row,column) in GRASS I
get a different elevation in GDAL. We have always used GRASS as an interface
to get elevation data, but we were hoping we could migrate to using GDAL.
 I was wondering if anyone has seen this issue before. Is this a projection
issue? The mapset is covers a big area (Lat 20N to 46N, Long 122E to 154E).
 We have an old JNI interface to access GRASS data using Java, but I was
hoping to remove that and use GDAL only. At some point I recompiled GDAL
with GRASS support, which I think would allow me to access the GRASS mapsets
directly, but then I did not know what file/directory to give GDAL in order
to read it. I tried the file under japan/cell, but that did not work.
 
I would appreciate any suggestions. 

Thanks, 

Aldo L. 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Issue-converting-GRASS-data-to-GeoTIFF-tp4529514p4529514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yjacolin at free.fr  Tue Feb 28 11:21:46 2012
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Feb 28 21:58:03 2012
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <201112131622.46743.yjacolin@free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<201112131537.49460.yjacolin@free.fr>
	<201112131622.46743.yjacolin@free.fr>
Message-ID: <18481230.PY9ohxFkpz@tatras>

Hello, 

Sorry to come again to this thread :)

It seems that when using relatif file for NETCDF for instance, MapServer won't 
work correclty, see Even comment below.

Is it a bug from GDAL? Do I need to open a ticket about this?

Y.
>Selon Yves Jacolin <yjacolin at free.fr>:
>> Hello,
>>
>> Etienne asked some question offlist so I investigate.
>>
>> gdal create relatif path by default (I don't see a flag to change this).
>> MapServer and QGIS don't like this.
>
>MapServer and QGIS don't even know the content of the VRT, so the problem is
>more complex than that.
>
>If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT, a
>relative path will be written. In which case the VRT driver should be able to
>recompute the full path given the location of the .vrt.
>On the contrary, if you pass an absolute path, it will be store as absolute.
>
>The issue here is likely with netCDF subdatasets, where the connexion string 
>is
>not a file, but something like "netCDF:xxxx:a_filename", that the VRT driver
>cannot interpret. In that case, the resolution of relative filenames will not
>work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid those
>issues. Or you must be sure that the current directory of MapServer and QGIS 
>is
>the directory of the .VRT, but you cannot always guarantee this.
>
>>
>> After changing relatif path to absolute path both are working correctly.
>>
>> Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From ophiry at gmail.com  Wed Feb 29 02:28:02 2012
From: ophiry at gmail.com (Ophir Yoktan)
Date: Wed Feb 29 02:29:06 2012
Subject: [gdal-dev] GDAL appears to ignore NoDataValue
In-Reply-To: <CAKuELE=j8MbU-YKuJvqZSuHYKdc_77iTj4W9i2Jd2HeLT4uUSg@mail.gmail.com>
References: <CAKuELE=j8MbU-YKuJvqZSuHYKdc_77iTj4W9i2Jd2HeLT4uUSg@mail.gmail.com>
Message-ID: <CAKuELEkYta8tNoZ1Kdw8mkEB-N8+WpF_ipvkNfA0jNiGmjjoaA@mail.gmail.com>

I'm trying to build a mosaic, and I rely on the NoDataValue feature to
treat some parts of the image as transparent.
However, it appears that GDAL doesn't work as expected.

I also created a very simple test case using a vrt dataset and
gdal_translate - and I get the same results (that is - the 2nd image draws
over the 1st image, ignoring "transparent areas")

I have to 100X100 image files with a white marking (different in each file)
over black background (black being exactly equal to 0)
I built a simple vrt file:

    <VRTDataset rasterXSize="100" rasterYSize="100">
      <VRTRasterBand dataType="Byte" band="1">
        <ColorInterp>Gray</ColorInterp>
        <SimpleSource>
          <SourceFilename relativeToVRT="1">a1.tif</SourceFilename>
          <SourceBand>1</SourceBand>
          <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
          <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
      <HideNoDataValue>1</HideNoDataValue>
      <NoDataValue>0</NoDataValue>
        </SimpleSource>
        <SimpleSource>
          <SourceFilename relativeToVRT="1">a2.tif</SourceFilename>
          <SourceBand>1</SourceBand>
          <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
          <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
      <HideNoDataValue>1</HideNoDataValue>
      <NoDataValue>0</NoDataValue>
        </SimpleSource>
      </VRTRasterBand>
    </VRTDataset>
and I run the command:

    gdal_translate mosaic.vrt mosaic.tif

The result is identical to image `a2.tif`, instead of being a combination
of `a1.tif` and `a2.tif`

I got the error using gdal 1.8 and 1.9

any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120229/66a82352/attachment-0001.html
From dirk at labela.nl  Wed Feb 29 03:54:21 2012
From: dirk at labela.nl (Dirk Vermeer)
Date: Wed Feb 29 03:55:04 2012
Subject: [gdal-dev] ogr2ogr conversion
Message-ID: <D2E6AFBC-92EB-4540-B785-FDE8DCAA5716@labela.nl>

Not sure if this is the right way to ask a question...
I am wondering if there is an option in ogr2ogr to use a custom delimiter in the conversion of shapefiles to csv with ogr2ogr. The csv outfile has a comma as the default delimiter, but what I need is a semicolon as delimiter.
Is this possible or do I have to write my own script to do this?

Thank you

Dirk


From even.rouault at mines-paris.org  Wed Feb 29 03:54:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 29 03:55:14 2012
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <18481230.PY9ohxFkpz@tatras>
References: <201112131220.07481.yjacolin@free.fr>
	<201112131537.49460.yjacolin@free.fr>
	<201112131622.46743.yjacolin@free.fr> <18481230.PY9ohxFkpz@tatras>
Message-ID: <1330505667.4f4de7c32a809@imp.free.fr>

Selon Yves Jacolin <yjacolin@free.fr>:

> Hello,
>
> Sorry to come again to this thread :)
>
> It seems that when using relatif file for NETCDF for instance, MapServer
> won't
> work correclty, see Even comment below.
>
> Is it a bug from GDAL? Do I need to open a ticket about this?

I don't see an easy fix to improve that. That would require some cooperation
with the driver to return the filename from the connection string and to reform
a new connection string with the full filename. IMHO not worth the effort, but
perhaps worth documenting it for the moment.

>
> Y.
> >Selon Yves Jacolin <yjacolin at free.fr>:
> >> Hello,
> >>
> >> Etienne asked some question offlist so I investigate.
> >>
> >> gdal create relatif path by default (I don't see a flag to change this).
> >> MapServer and QGIS don't like this.
> >
> >MapServer and QGIS don't even know the content of the VRT, so the problem is
> >more complex than that.
> >
> >If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT, a
> >relative path will be written. In which case the VRT driver should be able
> to
> >recompute the full path given the location of the .vrt.
> >On the contrary, if you pass an absolute path, it will be store as absolute.
> >
> >The issue here is likely with netCDF subdatasets, where the connexion string
> >is
> >not a file, but something like "netCDF:xxxx:a_filename", that the VRT driver
> >cannot interpret. In that case, the resolution of relative filenames will
> not
> >work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid those
> >issues. Or you must be sure that the current directory of MapServer and QGIS
> >is
> >the directory of the .VRT, but you cannot always guarantee this.
> >
> >>
> >> After changing relatif path to absolute path both are working correctly.
> >>
> >> Thanks,
>
> Y.
> --
> Yves Jacolin
>
> http://yjacolin.gloobe.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Wed Feb 29 03:57:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 29 03:58:03 2012
Subject: [gdal-dev] ogr2ogr conversion
In-Reply-To: <D2E6AFBC-92EB-4540-B785-FDE8DCAA5716@labela.nl>
References: <D2E6AFBC-92EB-4540-B785-FDE8DCAA5716@labela.nl>
Message-ID: <1330505827.4f4de863ea4b8@webmail.free.fr>

Selon Dirk Vermeer <dirk@labela.nl>:

> Not sure if this is the right way to ask a question...
> I am wondering if there is an option in ogr2ogr to use a custom delimiter in
> the conversion of shapefiles to csv with ogr2ogr. The csv outfile has a comma
> as the default delimiter, but what I need is a semicolon as delimiter.
> Is this possible or do I have to write my own script to do this?

See the SEPARATOR layer creation option documented in
http://gdal.org/ogr/drv_csv.html .

For example : ogr2ogr -f CSV dest.csv src.shp -lco SEPARATOR=SEMICOLON

>
> Thank you
>
> Dirk
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From pcorti at gmail.com  Wed Feb 29 03:57:32 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Feb 29 03:59:05 2012
Subject: [gdal-dev] ogr2ogr conversion
In-Reply-To: <D2E6AFBC-92EB-4540-B785-FDE8DCAA5716@labela.nl>
References: <D2E6AFBC-92EB-4540-B785-FDE8DCAA5716@labela.nl>
Message-ID: <CAHXrU-KwdZW+FGm4nSd189B8nR_yeqDbjn9pJphwAWAutrDijA@mail.gmail.com>

On Wed, Feb 29, 2012 at 9:54 AM, Dirk Vermeer <dirk@labela.nl> wrote:
> Not sure if this is the right way to ask a question...
> I am wondering if there is an option in ogr2ogr to use a custom delimiter in the conversion of shapefiles to csv with ogr2ogr. The csv outfile has a comma as the default delimiter, but what I need is a semicolon as delimiter.
> Is this possible or do I have to write my own script to do this?

did you check out the SEPARATOR option [1]?
SEPARATOR=COMMA/SEMICOLON/TAB (Starting with GDAL 1.7.0): Field
separator character. Default value : COMMA

[1] http://www.gdal.org/ogr/drv_csv.html

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From even.rouault at mines-paris.org  Wed Feb 29 04:03:49 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 29 04:04:09 2012
Subject: [gdal-dev] GDAL appears to ignore NoDataValue
In-Reply-To: <CAKuELEkYta8tNoZ1Kdw8mkEB-N8+WpF_ipvkNfA0jNiGmjjoaA@mail.gmail.com>
References: <CAKuELE=j8MbU-YKuJvqZSuHYKdc_77iTj4W9i2Jd2HeLT4uUSg@mail.gmail.com>
	<CAKuELEkYta8tNoZ1Kdw8mkEB-N8+WpF_ipvkNfA0jNiGmjjoaA@mail.gmail.com>
Message-ID: <1330506229.4f4de9f51905f@imp.free.fr>

Selon Ophir Yoktan <ophiry@gmail.com>:

Several errors :
1) The NoDataValue and HideNoDataValue elements are only valid under the
VRTRasterBand element, not SimpleSource
2) You want to change SimpleSource to ComplexSource, and add a
<NODATA>0</NODATA> element in it. (well basically rename your current
NoDataValue to NODATA.


> I'm trying to build a mosaic, and I rely on the NoDataValue feature to
> treat some parts of the image as transparent.
> However, it appears that GDAL doesn't work as expected.
>
> I also created a very simple test case using a vrt dataset and
> gdal_translate - and I get the same results (that is - the 2nd image draws
> over the 1st image, ignoring "transparent areas")
>
> I have to 100X100 image files with a white marking (different in each file)
> over black background (black being exactly equal to 0)
> I built a simple vrt file:
>
>     <VRTDataset rasterXSize="100" rasterYSize="100">
>       <VRTRasterBand dataType="Byte" band="1">
>         <ColorInterp>Gray</ColorInterp>
>         <SimpleSource>
>           <SourceFilename relativeToVRT="1">a1.tif</SourceFilename>
>           <SourceBand>1</SourceBand>
>           <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
>           <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
>       <HideNoDataValue>1</HideNoDataValue>
>       <NoDataValue>0</NoDataValue>
>         </SimpleSource>
>         <SimpleSource>
>           <SourceFilename relativeToVRT="1">a2.tif</SourceFilename>
>           <SourceBand>1</SourceBand>
>           <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
>           <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
>       <HideNoDataValue>1</HideNoDataValue>
>       <NoDataValue>0</NoDataValue>
>         </SimpleSource>
>       </VRTRasterBand>
>     </VRTDataset>
> and I run the command:
>
>     gdal_translate mosaic.vrt mosaic.tif
>
> The result is identical to image `a2.tif`, instead of being a combination
> of `a1.tif` and `a2.tif`
>
> I got the error using gdal 1.8 and 1.9
>
> any ideas?
>


From ophiry at gmail.com  Wed Feb 29 04:37:21 2012
From: ophiry at gmail.com (Ophir Yoktan)
Date: Wed Feb 29 04:37:48 2012
Subject: [gdal-dev] GDAL appears to ignore NoDataValue
In-Reply-To: <1330506229.4f4de9f51905f@imp.free.fr>
References: <CAKuELE=j8MbU-YKuJvqZSuHYKdc_77iTj4W9i2Jd2HeLT4uUSg@mail.gmail.com>
	<CAKuELEkYta8tNoZ1Kdw8mkEB-N8+WpF_ipvkNfA0jNiGmjjoaA@mail.gmail.com>
	<1330506229.4f4de9f51905f@imp.free.fr>
Message-ID: <CAKuELEnxCwifs2E+jftrq9mRia6AJyBQbK=aqt76JxkZutk8cg@mail.gmail.com>

Thanks! it works

a follow up "bonus" question
I get the same problem when trying to create a mosaic by warping to images
to a new dataset.

my code is basically copied from the "GDAL Warp API Tutorial" page
http://www.gdal.org/warptut.html

and adding:
psWarpOptions->padfSrcNoDataReal = new double(0);
 On Feb 29, 2012 11:03 AM, "Even Rouault" <even.rouault@mines-paris.org>
wrote:

> Selon Ophir Yoktan <ophiry@gmail.com>:
>
> Several errors :
> 1) The NoDataValue and HideNoDataValue elements are only valid under the
> VRTRasterBand element, not SimpleSource
> 2) You want to change SimpleSource to ComplexSource, and add a
> <NODATA>0</NODATA> element in it. (well basically rename your current
> NoDataValue to NODATA.
>
>
> > I'm trying to build a mosaic, and I rely on the NoDataValue feature to
> > treat some parts of the image as transparent.
> > However, it appears that GDAL doesn't work as expected.
> >
> > I also created a very simple test case using a vrt dataset and
> > gdal_translate - and I get the same results (that is - the 2nd image
> draws
> > over the 1st image, ignoring "transparent areas")
> >
> > I have to 100X100 image files with a white marking (different in each
> file)
> > over black background (black being exactly equal to 0)
> > I built a simple vrt file:
> >
> >     <VRTDataset rasterXSize="100" rasterYSize="100">
> >       <VRTRasterBand dataType="Byte" band="1">
> >         <ColorInterp>Gray</ColorInterp>
> >         <SimpleSource>
> >           <SourceFilename relativeToVRT="1">a1.tif</SourceFilename>
> >           <SourceBand>1</SourceBand>
> >           <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
> >           <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
> >       <HideNoDataValue>1</HideNoDataValue>
> >       <NoDataValue>0</NoDataValue>
> >         </SimpleSource>
> >         <SimpleSource>
> >           <SourceFilename relativeToVRT="1">a2.tif</SourceFilename>
> >           <SourceBand>1</SourceBand>
> >           <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
> >           <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
> >       <HideNoDataValue>1</HideNoDataValue>
> >       <NoDataValue>0</NoDataValue>
> >         </SimpleSource>
> >       </VRTRasterBand>
> >     </VRTDataset>
> > and I run the command:
> >
> >     gdal_translate mosaic.vrt mosaic.tif
> >
> > The result is identical to image `a2.tif`, instead of being a combination
> > of `a1.tif` and `a2.tif`
> >
> > I got the error using gdal 1.8 and 1.9
> >
> > any ideas?
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120229/04954012/attachment.html
From yjacolin at free.fr  Wed Feb 29 04:57:21 2012
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Feb 29 04:58:11 2012
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <1330505667.4f4de7c32a809@imp.free.fr>
References: <201112131220.07481.yjacolin@free.fr> <18481230.PY9ohxFkpz@tatras>
	<1330505667.4f4de7c32a809@imp.free.fr>
Message-ID: <13176323.A6J6TQtY43@tatras>

Even,

I understand.

Thanks,

Y.
Le Mercredi 29 F?vrier 2012 09:54:27 Even Rouault a ?crit :
> Selon Yves Jacolin <yjacolin@free.fr>:
> > Hello,
> > 
> > Sorry to come again to this thread :)
> > 
> > It seems that when using relatif file for NETCDF for instance, MapServer
> > won't
> > work correclty, see Even comment below.
> > 
> > Is it a bug from GDAL? Do I need to open a ticket about this?
> 
> I don't see an easy fix to improve that. That would require some cooperation
> with the driver to return the filename from the connection string and to
> reform a new connection string with the full filename. IMHO not worth the
> effort, but perhaps worth documenting it for the moment.
> 
> > Y.
> > 
> > >Selon Yves Jacolin <yjacolin at free.fr>:
> > >> Hello,
> > >> 
> > >> Etienne asked some question offlist so I investigate.
> > >> 
> > >> gdal create relatif path by default (I don't see a flag to change
> > >> this). MapServer and QGIS don't like this.
> > >
> > >MapServer and QGIS don't even know the content of the VRT, so the
> > >problem is more complex than that.
> > >
> > >If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT,
> > >a
> > >relative path will be written. In which case the VRT driver should be
> > >able> 
> > to
> > 
> > >recompute the full path given the location of the .vrt.
> > >On the contrary, if you pass an absolute path, it will be store as
> > >absolute.
> > >
> > >The issue here is likely with netCDF subdatasets, where the connexion
> > >string is
> > >not a file, but something like "netCDF:xxxx:a_filename", that the VRT
> > >driver cannot interpret. In that case, the resolution of relative
> > >filenames will> 
> > not
> > 
> > >work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid
> > >those issues. Or you must be sure that the current directory of
> > >MapServer and QGIS is
> > >the directory of the .VRT, but you cannot always guarantee this.
> > >
> > >> After changing relatif path to absolute path both are working
> > >> correctly.
> > >> 
> > >> Thanks,
> > 
> > Y.
> > --
> > Yves Jacolin
> > 
> > http://yjacolin.gloobe.org
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From jukka.rahkonen at mmmtike.fi  Wed Feb 29 07:28:45 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Feb 29 07:29:28 2012
Subject: [gdal-dev] Re: Meaning of origin in JP2GML
References: <loom.20120227T091900-303@post.gmane.org>
Message-ID: <loom.20120229T130653-481@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Hi,
> 
> Is there one, valid and unambiguous interpretation about what the 
"origin" means
> in JPEG2000 OGC-GML style metadata? 

I found from my own archives a document with title "Storing Geo-Location
Metadata in JPEG 2000 files using the OpenGIS GML Standard" by fellows Simon
Cope (Earth Resource mapping Ltd.), David Taubman (Kakadu Software), Klaus Jung
(AlgoVision-LuraTech GmbH.), Guillaume de Bailliencourt (Morgan Multimedia) and
Ivan Fox (Yakoa). The document has been available from the ER Mapper web site
but it is gone with the company.

In that document reads
"The origin element is required, shall have an id of "JPEG2000_Origin", and the
Point specifies the coordinate of the bottom-left corner of the bottom-left cell
in the image".

OGC has obviously dropped the JPEG2000_Origin id and requirement of bottom-left
corner. Whatever has happened to origin being in the corner of the corner cell,
it makes it more understandable that a successor of one of the above mentioned
companies seems to use it.

-Jukka Rahkonen-


From nhv at cape.com  Wed Feb 29 08:30:57 2012
From: nhv at cape.com (Norman Vine)
Date: Wed Feb 29 08:31:31 2012
Subject: [gdal-dev] Fwd: [OpenJPEG] python issues with j2k_to_image and
	image_to_j2k (version 1.5)
References: <4f789e8c-712c-408b-8267-97e602e1b263@s7g2000vby.googlegroups.com>
Message-ID: <B98765B4-0DFB-4F2F-BB3A-82C58DD5D5EE@cape.com>



Begin forwarded message:

> From: Xavier Gorro?o <xavi.gorronyo@gmail.com>
> Date: February 29, 2012 6:25:07 AM EST
> To: OpenJPEG <openjpeg@googlegroups.com>
> Subject: [OpenJPEG] python issues with j2k_to_image and image_to_j2k (version 1.5)
> Reply-To: openjpeg@googlegroups.com
> 
> I have been working in an application for a future satellite which
> needs to load JPEG2000 images.
> 
> The libraries in python are not optimised in order to deal with this
> image format and, therefore, I need to convert from JPEG2000 to TIFF
> and vice versa. I chose kakadu and everything works fine. However, I
> decided to try with OPENJPEG 1.5 since it is open-source and it seems
> to be the future reference. I have two main problems that I want to
> share:
> 
> 1. The information is shown in the command prompt every time I run the
> program. I redirect the output to a "garbage" txt as a solution.
> However, it works for "j2k_to_image" but not for "image_to_j2k". I
> think it would be nice an option to avoid these information like in
> kakadu (-quiet).
> 
> 2. I lose the georeference of the pixels. When I convert to TIFF I
> lose it and I found no option in the functions. GDAL can read the
> geoinformation of JPEG2000 but it cannot be directly updated to a
> JPEG2000 file. Therefore, that is for me a limitation. Probably, there
> are some other options... but anyway, it would be nice if the
> application recognises that information automatically like with
> kakadu.
> 
> Thanks in advance
> 
> -- 
> You are subscribed to the mailing-list of the OpenJPEG project (www.openjpeg.org)
> To post: email to openjpeg@googlegroups.com
> To unsubscribe: email to openjpeg+unsubscribe@googlegroups.com
> For more options: visit http://groups.google.com/group/openjpeg
> For more info about OpenJPEG main partners : visit  www.tele.ucl.ac.be (UCL) and www.intopix.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120229/37b6612c/attachment.html
From etourigny.dev at gmail.com  Wed Feb 29 09:02:49 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Feb 29 09:03:37 2012
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <13176323.A6J6TQtY43@tatras>
References: <201112131220.07481.yjacolin@free.fr> <18481230.PY9ohxFkpz@tatras>
	<1330505667.4f4de7c32a809@imp.free.fr> <13176323.A6J6TQtY43@tatras>
Message-ID: <CA+TxYvNsEJaM0yn7G2nOBze5f2_3YLohz4spu2QFnoMVWpMptw@mail.gmail.com>

Can you not pass the full path to the vrt file? This would resolve the
problem.  Like Even I don't see an easy fix in the driver.

Etienne

On Wed, Feb 29, 2012 at 6:57 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> Even,
>
> I understand.
>
> Thanks,
>
> Y.
> Le Mercredi 29 F?vrier 2012 09:54:27 Even Rouault a ?crit :
>> Selon Yves Jacolin <yjacolin@free.fr>:
>> > Hello,
>> >
>> > Sorry to come again to this thread :)
>> >
>> > It seems that when using relatif file for NETCDF for instance, MapServer
>> > won't
>> > work correclty, see Even comment below.
>> >
>> > Is it a bug from GDAL? Do I need to open a ticket about this?
>>
>> I don't see an easy fix to improve that. That would require some cooperation
>> with the driver to return the filename from the connection string and to
>> reform a new connection string with the full filename. IMHO not worth the
>> effort, but perhaps worth documenting it for the moment.
>>
>> > Y.
>> >
>> > >Selon Yves Jacolin <yjacolin at free.fr>:
>> > >> Hello,
>> > >>
>> > >> Etienne asked some question offlist so I investigate.
>> > >>
>> > >> gdal create relatif path by default (I don't see a flag to change
>> > >> this). MapServer and QGIS don't like this.
>> > >
>> > >MapServer and QGIS don't even know the content of the VRT, so the
>> > >problem is more complex than that.
>> > >
>> > >If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT,
>> > >a
>> > >relative path will be written. In which case the VRT driver should be
>> > >able>
>> > to
>> >
>> > >recompute the full path given the location of the .vrt.
>> > >On the contrary, if you pass an absolute path, it will be store as
>> > >absolute.
>> > >
>> > >The issue here is likely with netCDF subdatasets, where the connexion
>> > >string is
>> > >not a file, but something like "netCDF:xxxx:a_filename", that the VRT
>> > >driver cannot interpret. In that case, the resolution of relative
>> > >filenames will>
>> > not
>> >
>> > >work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid
>> > >those issues. Or you must be sure that the current directory of
>> > >MapServer and QGIS is
>> > >the directory of the .VRT, but you cannot always guarantee this.
>> > >
>> > >> After changing relatif path to absolute path both are working
>> > >> correctly.
>> > >>
>> > >> Thanks,
>> >
>> > Y.
>> > --
>> > Yves Jacolin
>> >
>> > http://yjacolin.gloobe.org
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> --
> Yves Jacolin
>
> http://yjacolin.gloobe.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From beyhan at deprem.gov.tr  Wed Feb 29 09:34:39 2012
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Wed Feb 29 09:38:28 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <CAMKgpOZyLq6KtTTEA87QWp5+-TOkuv1uNKRrqoh0MH=K0HD2=g@mail.gmail.com>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
	<20120227204559.M31003@deprem.gov.tr>
	<CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>
	<1330413577.5689.13.camel@localhost>
	<CAMKgpOZyLq6KtTTEA87QWp5+-TOkuv1uNKRrqoh0MH=K0HD2=g@mail.gmail.com>
Message-ID: <1330526079.12017.20.camel@localhost>

Chaitanya,

here is the structure of table on database

sfault :

eq_id varchar(14)    
lat1  decimal(7,4) 
lon1  decimal(7,4) 
lat2  decimal(7,4) 
lon2  decimal(7,4)   

lineview :


eq_id varchar(14)    
geom  double        


it seams geom as double 
I thing it should be geometry isn't it?

may be  I have to change structure of lineview by changing following
Roberts' suggestion to create view on database
 
 create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
 + "," + lon2 + " " + lat2 + ")" as geom from sfault


but I'm not sure for the line.

VTR for points, I have tested and works well


but for line still could not achieved yet, please give me another idea.

here is test.vrt file

<OGRVRTDataSource>
<OGRVRTLayer name="sta">
<SrcDataSource>MYSQL:stations,user=root,password=mysql_passwd,host=localhost,port=3306,tables=sta</SrcDataSource>
<SrcSQL>SELECT sta_id as name,type,latitude,longitude from sta where
type like "%SMACH%"</SrcSQL>
<GeometryType>wkbPoint</GeometryType>
<GeometryField encoding="PointFromColumns" x="longitude" y="latitude"/>
</OGRVRTLayer>
</OGRVRTDataSource>
 
and following code gives successful result as you see 


ogrinfo -ro -al test.vrt   
                                    
INFO: Open of `test.vrt' using driver `VRT' successful.        

Layer name: sta
Geometry: Point    
Feature Count: 12  
Layer SRS WKT:     
(unknown)          
name: String (12.0)
type: String (24.0)
latitude: Real (5.4)
longitude: Real (5.4)
OGRFeature(sta):0
  name (String) = 0617
  type (String) = SMACH   
  latitude (Real) = 40.4569
  longitude (Real) = 32.6319
  POINT (32.631900000000002 40.456899999999997)

OGRFeature(sta):1
  name (String) = 0618
  type (String) = SMACH   
  latitude (Real) = 40.4798
  longitude (Real) = 32.4555
  POINT (32.4555 40.479799999999997)

.
.
.
.


As you see this works well.

I hope you can catch point what is wrong or lack of on my works....


Thanks again 




On Tue, 2012-02-28 at 18:08 +0530, Chaitanya kumar CH wrote:
> Murat,
> 
> 
> I see that your view,  lineview, doesn't give the expected geometry
> type with ogrinfo. It is showing the datatype as Real. Check if the
> datatype of geom is actually string/text.
> 
> On Tue, Feb 28, 2012 at 12:49 PM, Murat Beyhan <beyhan@deprem.gov.tr>
> wrote:
>         Chaitanya,
>         
>         
>         Map file which is try to draw line as follows
>         are there any problem on the code
>         
>          LAYER
>          NAME sfault1
>          CONNECTIONTYPE OGR
>          CONNECTION '<OGRVRTDataSource>
>          <OGRVRTLayer name="lineview">
>         
>         <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>
>          <SrcLayer>lineview</SrcLayer>
>          <GeometryType>wkbLineString</GeometryType>
>          <GeometryField encoding="WKT" field="geom"/>
>          <LayerSRS>WGS84</LayerSRS>
>          <FID>eq_id</FID>
>          </OGRVRTLayer>
>          </OGRVRTDataSource>'
>          DATA sfault1
>          STATUS on
>          TYPE line
>          CLASS
>          NAME "Source Fault"
>          SYMBOL "cline"
>           SIZE 3
>          COLOR  0 0 255
>          END
>          END
>         
>         
>         ogrinfo
>         MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
>         sfault -summary
>         INFO: Open of
>         `MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>              using driver `MySQL' successful.
>         
>         Layer name: sfault
>         Geometry: None
>         Feature Count: 1
>         Layer SRS WKT:
>         (unknown)
>         eq_id: String (14.0)
>         lat1: Real (7.4)
>         lon1: Real (7.4)
>         lat2: Real (7.4)
>         lon2: Real (7.4)
>         
>         **************linewiew created by following sql
>         statement:*************
>         
>         
>          create view lineview as select eq_id, "LINESTRING(" + lon1 +
>         " " + lat1
>          + "," + lon2 + " " + lat2 + ")" as geom from sfault
>         
>         
>         then
>         
>         [murat@localhost ~]$ ogrinfo
>         MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
>         lineview -summary
>         INFO: Open of
>         `MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>              using driver `MySQL' successful.
>         
>         Layer name: lineview
>         Geometry: None
>         Feature Count: 1
>         Layer SRS WKT:
>         (unknown)
>         eq_id: String (14.0)
>         geom: Real (0.0)
>         
>         
>         as you see there is no problem to connect mysql and read
>         information
>         created mysql geometries from shape file also works here is an
>         example
>         
>         [murat@localhost ~]$ ogrinfo
>         MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306
>         iller -summary
>         INFO: Open of
>         `MYSQL:testogr,user=root,password=mysqlpasswd,host=localhost,port=3306'
>              using driver `MySQL'
>         successful.
>         
>         Layer name: iller
>         Geometry: Polygon
>         Feature Count: 83
>         Extent: (26.026489, 35.820221) - (44.869179, 42.094917)
>         Layer SRS WKT:
>         GEOGCS["GCS_WGS_1984",
>            DATUM["WGS_1984",
>                SPHEROID["WGS_1984",6378137,298.257223563]],
>            PRIMEM["Greenwich",0],
>            UNIT["Degree",0.0174532925199433]]
>         FID Column = OGR_FID
>         Geometry Column = SHAPE2
>         area: Real (13.6)
>         perimeter: Real (13.6)
>         illerdd_: Real (0.0)
>         illerdd_id: Real (0.0)
>         il_kod: Real (2.0)
>         iladi: String (20.0)
>         [murat@localhost ~]$
>         
>         
>         
>         Now I would like to learn what is wrong with my procedures...
>         please
>         help
>         
>         
>         
>         Murat
>         
>         
>         On Tue, 2012-02-28 at 09:03 +0530, Chaitanya kumar CH wrote:
>         > Murat,
>         >
>         >
>         > Since it is MySQL it doesn't matter much how you store it.
>         If you are
>         > going to edit the end points later, storing them as points
>         is
>         > preferable, otherwise store them as wkt linestring
>         geometries.
>         >
>         >
>         > For your mapfile, first check if the extents are correct.
>         Then check
>         > if the mapfile works with a shapefile created from the
>         geometries in
>         > MySQL.
>         >
>         > On Tuesday, February 28, 2012, Murat BEYHAN wrote:
>         >         Chaitanya,
>         >
>         >         thanks for your repply,
>         >
>         >         Actually I use ogr and mysql to draw point for
>         example
>         >         epicenter of
>         >         earthquakes. But this is the first time to draw line
>         which is
>         >         stored in
>         >         Mysql as a table. Actually there is no problem on
>         drawing
>         >         shape file of the
>         >         line. But I would like to draw it using MySql and
>         ogr
>         >         functionality. So I
>         >         have only start and end point of line and I store it
>         on MySql
>         >         database then
>         >         I try to draw it considering id of the line by sql
>         statement.
>         >         Just I would lie to learn how to code it on
>         Mapserver map file
>         >         and how
>         >         should I store line on database as a start and stop
>         point of
>         >         the line or as
>         >         a geometry . Please help...
>         >         thanks
>         >
>         >
>         >
>         >
>         >         On Mon, 27 Feb 2012 22:09:52 +0530, Chaitanya kumar
>         CH wrote
>         >         > Murat,
>         >         >
>         >         > First check if your database is accessible using
>         ogrinfo[1].
>         >         > Then create a vrt file with the content you
>         specified in the
>         >         CONNECTION
>         >         > field of the mapfile. Check if ogrinfo gives
>         expected
>         >         results with this
>         >         > file.
>         >         >
>         >         > You probably have gdal executables if you are
>         running
>         >         mapserver.
>         >         >
>         >         > [1]: http://www.gdal.org/ogrinfo.html
>         >         >
>         >         > On Mon, Feb 27, 2012 at 12:48 PM, Murat Beyhan
>         >         > <beyhan@deprem.gov.tr> wrote:
>         >         >
>         >         > > Dear all,
>         >         > > I have shared this mail on Mapserver list but
>         could not
>         >         solve my
>         >         > > problem.
>         >         > > Still could not achieve to draw line using start
>         and stop
>         >         point line
>         >         > > data stored in MySql database.
>         >         > >
>         >         > > I have tried Mr. Robert's solution but I have
>         faced an
>         >         error message.
>         >         > >
>         >         > >
>         >         > > in map file
>         >         > > I changed Geometrytype from wkbline to
>         wkblinestring.
>         >         > >
>         >         > > LAYER
>         >         > > NAME sfault1
>         >         > > CONNECTIONTYPE OGR
>         >         > > CONNECTION '<OGRVRTDataSource>
>         >         > > <OGRVRTLayer name="lineview">
>         >         > >
>         >         > >
>         >
>         <SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,po
>         >         rt=3306,tables=lineview</SrcDataSource>
>         >         > > <SrcLayer>lineview</SrcLayer>
>         >         > > <GeometryType>wkbLineString</GeometryType>
>         >         > > <GeometryField encoding="WKT" field="geom"/>
>         >         > > <LayerSRS>WGS84</LayerSRS>
>         >         > > <FID>eq_id</FID>
>         >         > > </OGRVRTLayer>
>         >         > > </OGRVRTDataSource>'
>         >         > >  DATA sfault1
>         >         > >  STATUS on
>         >         > >  TYPE line
>         >         > >  CLASS
>         >         > >  NAME "Source Fault"
>         >         > >  SYMBOL "cline"
>         >         > >   SIZE 3
>         >         > >  COLOR  0 0 255
>         >         > >  END
>         >         > > END
>         >         > >
>         >         > > in database
>         >         > > I have two table
>         >         > > one is sfault which store
>         >         > >
>         >         > > id lat1 lon1 lat2 lon2
>         >         > >
>         >         > > and another is lineview which is a view
>         >         > > of this table created by following
>         >         > >
>         >         > > create view lineview as select eq_id,
>         "LINESTRING(" + lon1
>         >         + " " + lat1
>         >         > > + "," + lon2 + " " + lat2 + ")" as geom from
>         sfault
>         >         > >
>         >         > >
>         >         > > there is an another issue,
>         >         > >
>         >         > > I have to draw line by considering id
>         >         > > so in the map When I select one id, line should
>         be belong
>         >         to this id's
>         >         > > information
>         >         > > so I have to make a sql statement as follow
>         instead of
>         >         draw all line
>         >         > > stored in database I have to draw just one line
>         >         considering id
>         >         > >
>         >         > > something like this:
>         >         > >
>         >         > > select eq_id, geom from lineview where id like
>         '%id%'
>         >         > >
>         >         > >
>         >         > > please help about this subject....
>         >         > >
>         >         > >
>         >         > > Regards....
>         >         > >
>         >         > >
>         >         > >
>         >         > > Murat
>         >         > >
>         >         > >
>         >         > >
>         >         > >
>         >         > >
>         >         > > --
>         >         > > This message has been scanned for viruses and
>         >         > > dangerous content by MailScanner, and is
>         >         > > believed to be clean.
>         >         > >
>         >         > > _______________________________________________
>         >         > > gdal-dev mailing list
>         >         > > gdal-dev@lists.osgeo.org
>         >         > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >         > >
>         >         >
>         >         > --
>         >         > Best regards,
>         >         > Chaitanya kumar CH.
>         >         >
>         >         > +91-9494447584
>         >         > 17.2416N 80.1426E
>         >         >
>         >         > --
>         >         > This message has been scanned for viruses and
>         >         > dangerous content by MailScanner, and is
>         >         > believed to be clean.
>         >
>         >
>         >         Murat Beyhan
>         >         Jeofizik Y?k. M?h.
>         >         T.C.
>         >         BA?BAKANLIK
>         >         Afet ve Acil Durum Y?netimi Ba?kanl???
>         >         Deprem Dairesi Ba?kanl???
>         >         Eski?ehir Yolu 12. Km. Lodumlu/Ankara
>         >         Tel:+90 (312) 2872680-1550
>         >
>         >
>         >         --
>         >         This message has been scanned for viruses and
>         >         dangerous content by MailScanner, and is
>         >         believed to be clean.
>         >
>         >
>         >
>         > --
>         > Best regards,
>         > Chaitanya kumar CH.
>         >
>         > +91-9494447584
>         > 17.2416N 80.1426E
>         >
>         > --
>         > This message has been scanned for viruses and
>         > dangerous content by MailScanner, and is
>         > believed to be clean.
>         
>         
>         
>         
>         Murat BEYHAN
>         
>         Jeofizik Y.M?h.
>         T.C. Ba?bakanl?k
>         Afet ve Acil Durum Y?netimi Ba?kanl???
>         Deprem Dairesi Ba?kanl???
>         Eski?ehir Yolu 12. Km.
>         
>         Lodumlu/ANKARA
>         Tel: 312 2872680-1556
>         email:beyhan@deprem.gov.tr
>         
>         
>         
>         
>         --
>         This message has been scanned for viruses and
>         dangerous content by MailScanner, and is
>         believed to be clean.
>         
>         
> 
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> 
> 
> -- 
> This message has been scanned for viruses and 
> dangerous content by MailScanner, and is 
> believed to be clean.



Murat BEYHAN 

Jeofizik Y.M?h.
T.C. Ba?bakanl?k
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km.
Lodumlu/ANKARA
Tel: 312 2872680-1556
email:beyhan@deprem.gov.tr




-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From chaitanya.ch at gmail.com  Wed Feb 29 22:52:46 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 29 22:53:17 2012
Subject: [gdal-dev] drawing line using OGR and mysql in mapserver
In-Reply-To: <1330526079.12017.20.camel@localhost>
References: <1330327131.7408.4.camel@localhost>
	<CAMKgpOZbZv+S1iaomQC9673D2TJT4KjFkXZq6wFzur=51rvFxg@mail.gmail.com>
	<20120227204559.M31003@deprem.gov.tr>
	<CAMKgpOYYJyNVYbh4fHtYWxFm2=hRwW_XdTarhc+1FK1b1R83fw@mail.gmail.com>
	<1330413577.5689.13.camel@localhost>
	<CAMKgpOZyLq6KtTTEA87QWp5+-TOkuv1uNKRrqoh0MH=K0HD2=g@mail.gmail.com>
	<1330526079.12017.20.camel@localhost>
Message-ID: <CAMKgpOY2+Ov=8qnMo5Qa9T6PMwT44YhXLcg56T5ONg3VU+eVCg@mail.gmail.com>

Murat,

You should check MySQL's SQL syntax to concatenate strings and decimals to
produce a string.

On Wednesday, February 29, 2012, Murat Beyhan <beyhan@deprem.gov.tr> wrote:
> Chaitanya,
>
> here is the structure of table on database
>
> sfault :
>
> eq_id varchar(14)
> lat1  decimal(7,4)
> lon1  decimal(7,4)
> lat2  decimal(7,4)
> lon2  decimal(7,4)
>
> lineview :
>
>
> eq_id varchar(14)
> geom  double
>
>
> it seams geom as double
> I thing it should be geometry isn't it?
>
> may be  I have to change structure of lineview by changing following
> Roberts' suggestion to create view on database
>
>  create view lineview as select eq_id, "LINESTRING(" + lon1 + " " + lat1
>  + "," + lon2 + " " + lat2 + ")" as geom from sfault
>
>
> but I'm not sure for the line.
>
> VTR for points, I have tested and works well
>
>
> but for line still could not achieved yet, please give me another idea.
>
> here is test.vrt file
>
> <OGRVRTDataSource>
> <OGRVRTLayer name="sta">
>
<SrcDataSource>MYSQL:stations,user=root,password=mysql_passwd,host=localhost,port=3306,tables=sta</SrcDataSource>
> <SrcSQL>SELECT sta_id as name,type,latitude,longitude from sta where
> type like "%SMACH%"</SrcSQL>
> <GeometryType>wkbPoint</GeometryType>
> <GeometryField encoding="PointFromColumns" x="longitude" y="latitude"/>
> </OGRVRTLayer>
> </OGRVRTDataSource>
>
> and following code gives successful result as you see
>
>
> ogrinfo -ro -al test.vrt
>
> INFO: Open of `test.vrt' using driver `VRT' successful.
>
> Layer name: sta
> Geometry: Point
> Feature Count: 12
> Layer SRS WKT:
> (unknown)
> name: String (12.0)
> type: String (24.0)
> latitude: Real (5.4)
> longitude: Real (5.4)
> OGRFeature(sta):0
>  name (String) = 0617
>  type (String) = SMACH
>  latitude (Real) = 40.4569
>  longitude (Real) = 32.6319
>  POINT (32.631900000000002 40.456899999999997)
>
> OGRFeature(sta):1
>  name (String) = 0618
>  type (String) = SMACH
>  latitude (Real) = 40.4798
>  longitude (Real) = 32.4555
>  POINT (32.4555 40.479799999999997)
>
> .
> .
> .
> .
>
>
> As you see this works well.
>
> I hope you can catch point what is wrong or lack of on my works....
>
>
> Thanks again
>
>
>
>
> On Tue, 2012-02-28 at 18:08 +0530, Chaitanya kumar CH wrote:
>> Murat,
>>
>>
>> I see that your view,  lineview, doesn't give the expected geometry
>> type with ogrinfo. It is showing the datatype as Real. Check if the
>> datatype of geom is actually string/text.
>>
>> On Tue, Feb 28, 2012 at 12:49 PM, Murat Beyhan <beyhan@deprem.gov.tr>
>> wrote:
>>         Chaitanya,
>>
>>
>>         Map file which is try to draw line as follows
>>         are there any problem on the code
>>
>>          LAYER
>>          NAME sfault1
>>          CONNECTIONTYPE OGR
>>          CONNECTION '<OGRVRTDataSource>
>>          <OGRVRTLayer name="lineview">
>>
>>
<SrcDataSource>MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306,tables=lineview</SrcDataSource>
>>          <SrcLayer>lineview</SrcLayer>
>>          <GeometryType>wkbLineString</GeometryType>
>>          <GeometryField encoding="WKT" field="geom"/>
>>          <LayerSRS>WGS84</LayerSRS>
>>          <FID>eq_id</FID>
>>          </OGRVRTLayer>
>>          </OGRVRTDataSource>'
>>          DATA sfault1
>>          STATUS on
>>          TYPE line
>>          CLASS
>>          NAME "Source Fault"
>>          SYMBOL "cline"
>>           SIZE 3
>>          COLOR  0 0 255
>>          END
>>          END
>>
>>
>>         ogrinfo
>>
MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
>>         sfault -summary
>>         INFO: Open of
>>
`MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>>              using driver `MySQL' successful.
>>
>>         Layer name: sfault
>>         Geometry: None
>>         Feature Count: 1
>>         Layer SRS WKT:
>>         (unknown)
>>         eq_id: String (14.0)
>>         lat1: Real (7.4)
>>         lon1: Real (7.4)
>>         lat2: Real (7.4)
>>         lon2: Real (7.4)
>>
>>         **************linewiew created by following sql
>>         statement:*************
>>
>>
>>          create view lineview as select eq_id, "LINESTRING(" + lon1 +
>>         " " + lat1
>>          + "," + lon2 + " " + lat2 + ")" as geom from sfault
>>
>>
>>         then
>>
>>         [murat@localhost ~]$ ogrinfo
>>
MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306
>>         lineview -summary
>>         INFO: Open of
>>
`MYSQL:dynamic,user=root,password=mysqlpasswd,host=localhost,port=3306'
>>              using driver `MySQL' successful.
>>
>>         Layer name: lineview
>>         Geometry: None
>>         Feature Count: 1
>>         Layer SRS WKT:
>>         (unknown)
>>         eq_id: String (14.0)
>>         geom: Real (0.0)
>>
>>
>>

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120301/fa38539d/attachment.html
