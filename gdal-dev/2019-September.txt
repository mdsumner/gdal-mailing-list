From uwe.schmitz at bezreg-koeln.nrw.de  Mon Sep  2 03:24:41 2019
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Mon, 2 Sep 2019 10:24:41 +0000
Subject: [gdal-dev] Specifying output format gives wrong result
Message-ID: <1A8DF958A1AA1E46BDDB48C08CB0DD0001E9729473@vbrk21mx02.bezreg-koeln.nrw.de>

Folks,

I try to filter a dem (456664_40m.tif) with the help of
a .vrt (456664gf.vrt) to get 456664gf.tif. The result is incorrect. 
It looks like it's slightly pushed together vertically in the middle of 
the dataset. Please look at 456664gf.tif, compare it to the
original 456664_40m.tif and you see what I mean.

The command is simple:
> gdal-config --version
2.4.0
> gdal_translate -ot Float32 -of GTiff 456664gf.vrt 456664gf.tif

Now the surprising: if I omit the "-of Float32" argument,
the result looks ok. It may be of interest that former versions
(2.1.x/2.2.x don't remember exactly) didn't have this
problem.

I uploaded the aforementioned files (zip archive) here:
http://www.keepandshare.com/doc12/view.php?id=249308&da=y

Thanks in advance
Uwe


From jp.perez.alcantara at gmail.com  Mon Sep  2 08:21:12 2019
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Mon, 2 Sep 2019 17:21:12 +0200
Subject: [gdal-dev] GDAL 3 and PROJ 6
Message-ID: <CAMPpJ8gm1Uexrgoe5_=EX4bqNEDKtt2pi1zHjiXwAWLaGuUObw@mail.gmail.com>

Hi everyone,

I maintain a set of Docker containers of PostGIS and currently I'm working
on a new release with updated version of the stack, which include PROJ 6,
GDAL 3, PostgreSQL 11.5, and PostGIS 2.5.3. I know PROJ 6 is a game
changer, and all the work I've done in the past configuring PROJ 4 to my
country (Spain) transformations with GSB grids might have been deprecated.
It appears so! Hopefully, after attempting a lot of things, I was able to
make PROJ 6 work nicely with the GSB by providing a resource epsg file.

My hopes were that, once PROJ 6 was in place, GDAL 3 would make use of it
for gdaltransform, but somehow GDAL is not playing nicely with PROJ 6 and
transformations are not using the grids. If someone can shed some light
regarding this issues, I'll be most grateful:

- what is the relation between GDAL 3 and PROJ 6? I mean, if cs2cs is using
the grid to transform, shouldn't GDAL rely on PROJ for reprojection and do
it well too?

- if GDAL has to be configured independently, what's the proper way to
attach a grid to a EPSG code so reprojections using the epsg:XXXXX syntax
would work with the grid?

Many thanks in advance for any help you can provide me, I'm pretty lost!

---

Juan Pedro Pérez Alcántara

jp.perez.alcantara at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190902/caaf21fb/attachment.html>

From even.rouault at spatialys.com  Mon Sep  2 08:32:51 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 02 Sep 2019 17:32:51 +0200
Subject: [gdal-dev] GDAL 3 and PROJ 6
In-Reply-To: <CAMPpJ8gm1Uexrgoe5_=EX4bqNEDKtt2pi1zHjiXwAWLaGuUObw@mail.gmail.com>
References: <CAMPpJ8gm1Uexrgoe5_=EX4bqNEDKtt2pi1zHjiXwAWLaGuUObw@mail.gmail.com>
Message-ID: <10678063.1zFfQXcmAD@even-i700>

Juan Pedro,

> I maintain a set of Docker containers of PostGIS and currently I'm working
> on a new release with updated version of the stack, which include PROJ 6,
> GDAL 3, PostgreSQL 11.5, and PostGIS 2.5.3. I know PROJ 6 is a game
> changer, and all the work I've done in the past configuring PROJ 4 to my
> country (Spain) transformations with GSB grids might have been deprecated.
> It appears so! Hopefully, after attempting a lot of things, I was able to
> make PROJ 6 work nicely with the GSB by providing a resource epsg file.

Creating a 'epsg' text resource file is now deprecated, in favor of using the 
'proj.db' database. See below
 
> My hopes were that, once PROJ 6 was in place, GDAL 3 would make use of it
> for gdaltransform, but somehow GDAL is not playing nicely with PROJ 6 and
> transformations are not using the grids. If someone can shed some light
> regarding this issues, I'll be most grateful:
> 
> - what is the relation between GDAL 3 and PROJ 6? I mean, if cs2cs is using
> the grid to transform, shouldn't GDAL rely on PROJ for reprojection and do
> it well too?

Yes, normally if something works with cs2cs it should work with GDAL 
reprojection API too, but they don't exactly use the same PROJ API, so details 
may matter. Can you give a full reproducer of your issue ?

> - if GDAL has to be configured independently, what's the proper way to
> attach a grid to a EPSG code so reprojections using the epsg:XXXXX syntax
> would work with the grid?

This is doable by addinng a new entry in the 'grid_transformation' table of 
the proj.db file.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jp.perez.alcantara at gmail.com  Mon Sep  2 08:46:15 2019
From: jp.perez.alcantara at gmail.com (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Mon, 2 Sep 2019 17:46:15 +0200
Subject: [gdal-dev] GDAL 3 and PROJ 6
In-Reply-To: <10678063.1zFfQXcmAD@even-i700>
References: <CAMPpJ8gm1Uexrgoe5_=EX4bqNEDKtt2pi1zHjiXwAWLaGuUObw@mail.gmail.com>
 <10678063.1zFfQXcmAD@even-i700>
Message-ID: <CAMPpJ8iM-1sB3C0UWXTau6hxmmMeKzgM=_BOkrD3ZoG+FGLk-Q@mail.gmail.com>

Many thanks for the quick response, Even. By the way, many, many, many
congratulations for the Sol Katz! You truly and heartly deserve it, thanks
for your impressive work!

Ok, I'll work the proj.db way, it seems to be more profitable to do so. If
I'm not mistaken, both PROJ 6 and QGIS rely on proj.db to reproject, isn't
it?

With PROJ 6 patched with the epsg file, I was trying on a vanilla GDAL
installation this:

gdaltransform -s_srs epsg:23030 -t_srs epsg:25830 <<EOF
235205.243 4142110.093
265467 3988010
EOF

Curiously enough, if I use this:

gdaltransform -s_srs +init=epsg:23030 -t_srs +init=epsg:25830 <<EOF
235205.243 4142110.093
265467 3988010
EOF

it does use the grid and the transformation is decimeter-perfect. However,
I'm getting a big DEPRECATION warning! Not good.

So, for not to take much of your time, do you think if I work the original
patching of PROJ 6 via the proj.db way a vanilla GDAL build will rely on it
out-of-the-box? Not wanting to abuse, but... any hint of what to expect
when I come to PostGIS? Will it use PROJ 6 out-of-the-box?

Besides, if I'm not mistaken, you, Even, are also one of the people behind
PROJ 6. How difficult can be to contribute the Spanish patch to the source?

Thanks again!

---

Juan Pedro Pérez Alcántara

jp.perez.alcantara at gmail.com


On Mon, 2 Sep 2019 at 17:32, Even Rouault <even.rouault at spatialys.com>
wrote:

> Juan Pedro,
>
> > I maintain a set of Docker containers of PostGIS and currently I'm
> working
> > on a new release with updated version of the stack, which include PROJ 6,
> > GDAL 3, PostgreSQL 11.5, and PostGIS 2.5.3. I know PROJ 6 is a game
> > changer, and all the work I've done in the past configuring PROJ 4 to my
> > country (Spain) transformations with GSB grids might have been
> deprecated.
> > It appears so! Hopefully, after attempting a lot of things, I was able to
> > make PROJ 6 work nicely with the GSB by providing a resource epsg file.
>
> Creating a 'epsg' text resource file is now deprecated, in favor of using
> the
> 'proj.db' database. See below
>
> > My hopes were that, once PROJ 6 was in place, GDAL 3 would make use of it
> > for gdaltransform, but somehow GDAL is not playing nicely with PROJ 6 and
> > transformations are not using the grids. If someone can shed some light
> > regarding this issues, I'll be most grateful:
> >
> > - what is the relation between GDAL 3 and PROJ 6? I mean, if cs2cs is
> using
> > the grid to transform, shouldn't GDAL rely on PROJ for reprojection and
> do
> > it well too?
>
> Yes, normally if something works with cs2cs it should work with GDAL
> reprojection API too, but they don't exactly use the same PROJ API, so
> details
> may matter. Can you give a full reproducer of your issue ?
>
> > - if GDAL has to be configured independently, what's the proper way to
> > attach a grid to a EPSG code so reprojections using the epsg:XXXXX syntax
> > would work with the grid?
>
> This is doable by addinng a new entry in the 'grid_transformation' table
> of
> the proj.db file.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190902/0b0c8c88/attachment.html>

From even.rouault at spatialys.com  Mon Sep  2 09:01:38 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 02 Sep 2019 18:01:38 +0200
Subject: [gdal-dev] GDAL 3 and PROJ 6
In-Reply-To: <CAMPpJ8iM-1sB3C0UWXTau6hxmmMeKzgM=_BOkrD3ZoG+FGLk-Q@mail.gmail.com>
References: <CAMPpJ8gm1Uexrgoe5_=EX4bqNEDKtt2pi1zHjiXwAWLaGuUObw@mail.gmail.com>
 <10678063.1zFfQXcmAD@even-i700>
 <CAMPpJ8iM-1sB3C0UWXTau6hxmmMeKzgM=_BOkrD3ZoG+FGLk-Q@mail.gmail.com>
Message-ID: <8870810.UtCR1b3BXX@even-i700>

> Ok, I'll work the proj.db way, it seems to be more profitable to do so. If
> I'm not mistaken, both PROJ 6 and QGIS rely on proj.db to reproject, isn't
> it?

Yes (QGIS 3.8 or later needed to use PROJ 6 new capabilities)

> 
> With PROJ 6 patched with the epsg file, I was trying on a vanilla GDAL
> installation this:
> 
> gdaltransform -s_srs epsg:23030 -t_srs epsg:25830 <<EOF
> 235205.243 4142110.093
> 265467 3988010
> EOF
> 
> Curiously enough, if I use this:
> 
> gdaltransform -s_srs +init=epsg:23030 -t_srs +init=epsg:25830 <<EOF
> 235205.243 4142110.093
> 265467 3988010
> EOF
> 
> it does use the grid and the transformation is decimeter-perfect. However,
> I'm getting a big DEPRECATION warning! Not good.

Yes, init files are now deprecated in PROJ6. And using epsg:xxxx or 
+init=epsg:xxxx is indeed different: the former doesn't try to use a init file 
but a corresponding entry in proj.db, whereas the later will try first to 
locate a epsg init file, and if not found, will fallbak to proj.db.

> So, for not to take much of your time, do you think if I work the original
> patching of PROJ 6 via the proj.db way a vanilla GDAL build will rely on it
> out-of-the-box? Not wanting to abuse, but... any hint of what to expect
> when I come to PostGIS? Will it use PROJ 6 out-of-the-box?

If you use PostGIS 3 beta, it should use proj.db out of the box. Older 
versions will rather use the PROJ strings of the spatial_ref_sys table.

> 
> Besides, if I'm not mistaken, you, Even, are also one of the people behind
> PROJ 6. How difficult can be to contribute the Spanish patch to the source?

Depends exactly on what you intend to do, but
https://github.com/OSGeo/proj-datumgrid/blob/master/CONTRIBUTING.md should 
give you some hints.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mlacayoemery at gmail.com  Mon Sep  2 09:13:32 2019
From: mlacayoemery at gmail.com (Martin Lacayo)
Date: Mon, 2 Sep 2019 18:13:32 +0200
Subject: [gdal-dev] ogr2ogr.py sqlite dialect unsupported?
Message-ID: <CADcOYKu93jk7boptECEYm8znRqfUzzd8wszLUHn5TONtJY_jnw@mail.gmail.com>

Hello,

I complied GDAL 3.0.1 from source with Python, SQLite, and SpatiLite
enabled. I am trying to dissolve polygons in a Shapefile with the
following command:

ogr2ogr output.shp input.shp -dialect sqlite -sql "SELECT
ST_Union(geometry) FROM input"

This works from the command line, but not as I would like from a
Python call to ogr2ogr.main, although other calls do work. I see from
the code that ogr2ogr.py does not support the dialect parameter, but
ogrinfo.py does.

Is there a way for me to do this from Python without a system call?

Should I report this a bug/feature request to the GitHub repository?

For my own enlightenment, does anyone understand why this command
works from the command line?

The full 32 line script I am working on is here:

https://github.com/mlacayoemery/esws/blob/master/tools/wy_preprocess.py

Thank you,
Martin

From even.rouault at spatialys.com  Mon Sep  2 09:19:46 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 02 Sep 2019 18:19:46 +0200
Subject: [gdal-dev] ogr2ogr.py sqlite dialect unsupported?
In-Reply-To: <CADcOYKu93jk7boptECEYm8znRqfUzzd8wszLUHn5TONtJY_jnw@mail.gmail.com>
References: <CADcOYKu93jk7boptECEYm8znRqfUzzd8wszLUHn5TONtJY_jnw@mail.gmail.com>
Message-ID: <19608231.IFOxaT7MM4@even-i700>

ogr2ogr.py is a toy / sample file which receives little maintainance, and was 
mostly a one-time port of the ogr2ogr.cpp source, which is the on used by the 
command line utility.

You may use the 'librarified' ogr2ogr with the gdal.VectorTranslate() Python 
function. Examples at 
https://github.com/OSGeo/gdal/blob/master/autotest/utilities/
test_ogr2ogr_lib.py#L63

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mlacayoemery at gmail.com  Tue Sep  3 04:02:42 2019
From: mlacayoemery at gmail.com (Martin Lacayo)
Date: Tue, 3 Sep 2019 13:02:42 +0200
Subject: [gdal-dev] ogr2ogr.py sqlite dialect unsupported?
In-Reply-To: <19608231.IFOxaT7MM4@even-i700>
References: <CADcOYKu93jk7boptECEYm8znRqfUzzd8wszLUHn5TONtJY_jnw@mail.gmail.com>
 <19608231.IFOxaT7MM4@even-i700>
Message-ID: <CADcOYKtfGuewZ6=MGmPh=ZSFESjhcUo2xEvhAM-LOdAD46kfcg@mail.gmail.com>

Thank you, the following code worked perfectly:

import os
import osgeo.gdal

name, ext = os.path.splitext(os.path.basename(in_path))
srcDS = osgeo.gdal.OpenEx(in_path)
ds = osgeo.gdal.VectorTranslate(out_path, srcDS, SQLStatement="SELECT
ST_Union(geometry) FROM " + name , SQLDialect='sqlite')

Cheers,
Martin

On Mon, Sep 2, 2019 at 6:19 PM Even Rouault <even.rouault at spatialys.com> wrote:
>
> ogr2ogr.py is a toy / sample file which receives little maintainance, and was
> mostly a one-time port of the ogr2ogr.cpp source, which is the on used by the
> command line utility.
>
> You may use the 'librarified' ogr2ogr with the gdal.VectorTranslate() Python
> function. Examples at
> https://github.com/OSGeo/gdal/blob/master/autotest/utilities/
> test_ogr2ogr_lib.py#L63
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From wee.s at forest.go.th  Tue Sep  3 16:41:13 2019
From: wee.s at forest.go.th (Wee Sritippho)
Date: Wed, 04 Sep 2019 06:41:13 +0700
Subject: [gdal-dev] gdal_retile.py killed when dealing with large .vrt +
	pixel function
Message-ID: <fac924cd-73cf-4e7b-a687-7f9c51a0745f@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/59377183/attachment.html>

From rykovd at gmail.com  Wed Sep  4 05:24:53 2019
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 4 Sep 2019 14:24:53 +0200
Subject: [gdal-dev] gdal_translate is slow
Message-ID: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>

Why gdal_translate so slow compared to rio translate from rasterio?

rio convert:

$ time rio convert download.grib download.tif
Warning: Inside GRIB2Inventory, Message # 15
ERROR: Ran out of file reading SECT0
Warning: Inside GRIB2Inventory, Message # 15
ERROR: Ran out of file reading SECT0
rio convert download.grib download.tif  15.79s user 2.05s system 72% cpu
24.627 total



gdal_translate:

$ time gdal_translate download.grib download.tif
Warning: Inside GRIB2Inventory, Message # 15
ERROR: Ran out of file reading SECT0
Input file size is 3600, 1801
0...10...20...30...40...50...60...70...80...90...100 - done.
gdal_translate download.grib download.tif  261.99s user 18.57s system 98%
cpu 4:45.62 total
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/17592c91/attachment.html>

From paul.malm at lfv.se  Wed Sep  4 05:45:41 2019
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 4 Sep 2019 12:45:41 +0000
Subject: [gdal-dev] ogr2ogr
Message-ID: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>

Hi,
I don't know if this is the correct forum.
I would like to fonvert a aeronavFAA obstacle file to the Esri shape format.
>From all the information I can find on internet I think this should be correct:
C:\Program Files\GDAL>ogr2ogr -f "ESRI Shapefile" c:\temp\FAAdof13_ga  C:\Downloads\FAA_DOF\13-GA.DAT

This is the error message I get:
FAILURE:
Unable to open datasource `C:\Users\anpaumal\Downloads\shapefiler\FAA_DOF\13-GA.DAT' with the following drivers.
  -> `netCDF'
  -> `PCIDSK'
  -> `PDS4'
  -> `JP2OpenJPEG'
  -> `PDF'
  -> `MBTiles'
  -> `EEDA'
  -> `DB2ODBC'
  -> `ESRI Shapefile'
  -> `MapInfo File'
  -> `UK .NTF'
  -> `OGR_SDTS'
  -> `S57'
  -> `DGN'
  -> `OGR_VRT'
  -> `REC'
  -> `Memory'
  -> `BNA'
  -> `CSV'
  -> `NAS'
  -> `GML'
  -> `GPX'
  -> `LIBKML'
  -> `KML'
  -> `GeoJSON'
  -> `GeoJSONSeq'
  -> `ESRIJSON'
  -> `TopoJSON'
  -> `Interlis 1'
  -> `Interlis 2'
  -> `OGR_GMT'
  -> `GPKG'
  -> `SQLite'
  -> `ODBC'
  -> `WAsP'
  -> `PGeo'
  -> `MSSQLSpatial'
  -> `PostgreSQL'
  -> `MySQL'
  -> `OpenFileGDB'
  -> `XPlane'
  -> `DXF'
  -> `CAD'
  -> `Geoconcept'
  -> `GeoRSS'
  -> `GPSTrackMaker'
  -> `VFK'
  -> `PGDUMP'
  -> `OSM'
  -> `GPSBabel'
  -> `SUA'
  -> `OpenAir'
  -> `OGR_PDS'
  -> `WFS'
  -> `WFS3'
  -> `HTF'
  -> `AeronavFAA'
  -> `Geomedia'
  -> `EDIGEO'
  -> `GFT'
  -> `SVG'
  -> `CouchDB'
  -> `Cloudant'
  -> `Idrisi'
  -> `ARCGEN'
  -> `SEGUKOOA'
  -> `SEGY'
  -> `ODS'
  -> `XLSX'
  -> `ElasticSearch'
  -> `Walk'
  -> `Carto'
  -> `SXF'
  -> `Selafin'
  -> `JML'
  -> `PLSCENES'
  -> `CSW'
  -> `VDV'
  -> `GMLAS'
 -> `MVT'
  -> `TIGER'
  -> `AVCBin'
  -> `AVCE00'
  -> `NGW'
  -> `HTTP'

I can see that the driver AeronavFAA is tested, since it is listed above, what am I doing wrong?
Kind regards,
Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/b5d37b45/attachment.html>

From paul.malm at lfv.se  Wed Sep  4 06:00:24 2019
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 4 Sep 2019 13:00:24 +0000
Subject: [gdal-dev] ogr2ogr openstreetmap
Message-ID: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>

Hi,
When I try to convert an open street map directory to a postgis data base I only get one layer(other_relations) with some lines and some points, far from everything.  There are no error meassages.
ogr2ogr-f "PostgreSQL" PG:"host= 127.0.0.1 user=postgres dbname=test password=postgres" c:\temp\sweden-latest.osm.pbf

Kind regards,
Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/a38ed448/attachment-0001.html>

From paul.malm at lfv.se  Wed Sep  4 06:04:45 2019
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 4 Sep 2019 13:04:45 +0000
Subject: [gdal-dev] ogr2ogr shp
Message-ID: <785199B14156764C8EB14EF96CEDC44EE2A6D4@xw-exch03.lfv.se>

When I import a shape layer to a postgis db with ogr2ogr, the table-name  only gets lower characters (railroads) even though the shapefile is named like RailRoads.shp. Is there a way to force the parser to use the same characters as the filename
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/3f5e021d/attachment.html>

From lars.schylberg at blixtmail.se  Wed Sep  4 06:27:19 2019
From: lars.schylberg at blixtmail.se (lars.schylberg at blixtmail.se)
Date: Wed, 04 Sep 2019 13:27:19 +0000
Subject: [gdal-dev] ogr2ogr openstreetmap
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
Message-ID: <5537f61af0ec6e47680fcc2ed0886aac@blixtmail.se>

use: osm2pgsqql or imposm instead

/Lars
4 september 2019 kl. 15:00, paul.malm at lfv.se (mailto:paul.malm at lfv.se) skrev:
	Hi, 

	When I try to convert an open street map directory to a postgis data base I only get one layer(other_relations) with some lines and some points, far from everything. There are no error meassages. 

	ogr2ogr-f "PostgreSQL" PG:"host= 127.0.0.1 user=postgres dbname=test password=postgres" c:tempsweden-latest.osm.pbf  

	Kind regards, 

	Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/a921eac9/attachment.html>

From lars.schylberg at blixtmail.se  Wed Sep  4 06:22:11 2019
From: lars.schylberg at blixtmail.se (lars.schylberg at blixtmail.se)
Date: Wed, 04 Sep 2019 13:22:11 +0000
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
Message-ID: <427290c65cd3c8ab0872a0acc51692d8@blixtmail.se>

Hi Paul,

if You do: gdalinfo --formats | grep AERONAVFAA
does your format show up?

I could be that You have to make your own build to have AERONAVFAA included.

It doesn't show up in my debian build.

/Lars
4 september 2019 kl. 14:46, paul.malm at lfv.se (mailto:paul.malm at lfv.se) skrev:
	Hi, 

	I don’t know if this is the correct forum. 

	I would like to fonvert a aeronavFAA obstacle file to the Esri shape format.  

	From all the information I can find on internet I think this should be correct: 

	C:Program FilesGDAL>ogr2ogr -f "ESRI Shapefile" c:tempFAAdof13_ga C:DownloadsFAA_DOF13-GA.DAT 

	This is the error message I get: 

	FAILURE: 

	Unable to open datasource `C:UsersanpaumalDownloadsshapefilerFAA_DOF13-GA.DAT' with the following drivers. 

	-> `netCDF' 

	-> `PCIDSK' 

	-> `PDS4' 

	-> `JP2OpenJPEG' 

	-> `PDF' 

	-> `MBTiles' 

	-> `EEDA' 

	-> `DB2ODBC' 

	-> `ESRI Shapefile' 

	-> `MapInfo File' 

	-> `UK .NTF' 

	-> `OGR_SDTS' 

	-> `S57' 

	-> `DGN' 

	-> `OGR_VRT' 

	-> `REC' 

	-> `Memory' 

	-> `BNA' 

	-> `CSV' 

	-> `NAS' 

	-> `GML' 

	-> `GPX' 

	-> `LIBKML' 

	-> `KML' 

	-> `GeoJSON' 

	-> `GeoJSONSeq' 

	-> `ESRIJSON' 

	-> `TopoJSON' 

	-> `Interlis 1' 

	-> `Interlis 2' 

	-> `OGR_GMT' 

	-> `GPKG' 

	-> `SQLite' 

	-> `ODBC' 

	-> `WAsP' 

	-> `PGeo' 

	-> `MSSQLSpatial' 

	-> `PostgreSQL' 

	-> `MySQL' 

	-> `OpenFileGDB' 

	-> `XPlane' 

	-> `DXF' 

	-> `CAD' 

	-> `Geoconcept' 

	-> `GeoRSS' 

	-> `GPSTrackMaker' 

	-> `VFK' 

	-> `PGDUMP' 

	-> `OSM' 

	-> `GPSBabel' 

	-> `SUA' 

	-> `OpenAir' 

	-> `OGR_PDS' 

	-> `WFS' 

	-> `WFS3' 

	-> `HTF' 

	-> `AeronavFAA' 

	-> `Geomedia' 

	-> `EDIGEO' 

	-> `GFT' 

	-> `SVG' 

	-> `CouchDB' 

	-> `Cloudant' 

	-> `Idrisi' 

	-> `ARCGEN' 

	-> `SEGUKOOA' 

	-> `SEGY' 

	-> `ODS' 

	-> `XLSX' 

	-> `ElasticSearch' 

	-> `Walk' 

	-> `Carto' 

	-> `SXF' 

	-> `Selafin' 

	-> `JML' 

	-> `PLSCENES' 

	-> `CSW' 

	-> `VDV' 

	-> `GMLAS' 

	-> `MVT' 

	-> `TIGER' 

	-> `AVCBin' 

	-> `AVCE00' 

	-> `NGW' 

	-> `HTTP' 

	I can see that the driver AeronavFAA is tested, since it is listed above, what am I doing wrong?  

	Kind regards, 

	Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/ecfe64c6/attachment.html>

From paul.malm at lfv.se  Wed Sep  4 06:49:46 2019
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 4 Sep 2019 13:49:46 +0000
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <427290c65cd3c8ab0872a0acc51692d8@blixtmail.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
 <427290c65cd3c8ab0872a0acc51692d8@blixtmail.se>
Message-ID: <785199B14156764C8EB14EF96CEDC44EE2A7FC@xw-exch03.lfv.se>

Hi Lars,
I get among others:
WFS3 -vector- (ro): OGC WFS 3 client (Web Feature Service)
HTF -vector- (rov): Hydrographic Transfer Vector
AeronavFAA -vector- (rov): Aeronav FAA
Geomedia -vector- (ro): Geomedia .mdb

Kul att höra ifrån dig!
/Paul

Från: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] För lars.schylberg at blixtmail.se
Skickat: den 4 september 2019 15:22
Till: gdal-dev at lists.osgeo.org
Ämne: Re: [gdal-dev] ogr2ogr

Hi Paul,

if You do: gdalinfo --formats | grep AERONAVFAA
does your format show up?

I could be that You have to make your own build to have AERONAVFAA included.

It doesn't show up in my debian build.

/Lars


4 september 2019 kl. 14:46, paul.malm at lfv.se<mailto:paul.malm at lfv.se> skrev:

Hi,

I don’t know if this is the correct forum.

I would like to fonvert a aeronavFAA obstacle file to the Esri shape format.

From all the information I can find on internet I think this should be correct:

C:\Program Files\GDAL>ogr2ogr -f "ESRI Shapefile" c:\temp\FAAdof13_ga C:\Downloads\FAA_DOF\13-GA.DAT

This is the error message I get:

FAILURE:

Unable to open datasource `C:\Users\anpaumal\Downloads\shapefiler\FAA_DOF\13-GA.DAT' with the following drivers.

-> `netCDF'

-> `PCIDSK'

-> `PDS4'

-> `JP2OpenJPEG'

-> `PDF'

-> `MBTiles'

-> `EEDA'

-> `DB2ODBC'

-> `ESRI Shapefile'

-> `MapInfo File'

-> `UK .NTF'

-> `OGR_SDTS'

-> `S57'

-> `DGN'

-> `OGR_VRT'

-> `REC'

-> `Memory'

-> `BNA'

-> `CSV'

-> `NAS'

-> `GML'

-> `GPX'

-> `LIBKML'

-> `KML'

-> `GeoJSON'

-> `GeoJSONSeq'

-> `ESRIJSON'

-> `TopoJSON'

-> `Interlis 1'

-> `Interlis 2'

-> `OGR_GMT'

-> `GPKG'

-> `SQLite'

-> `ODBC'

-> `WAsP'

-> `PGeo'

-> `MSSQLSpatial'

-> `PostgreSQL'

-> `MySQL'

-> `OpenFileGDB'

-> `XPlane'

-> `DXF'

-> `CAD'

-> `Geoconcept'

-> `GeoRSS'

-> `GPSTrackMaker'

-> `VFK'

-> `PGDUMP'

-> `OSM'

-> `GPSBabel'

-> `SUA'

-> `OpenAir'

-> `OGR_PDS'

-> `WFS'

-> `WFS3'

-> `HTF'

-> `AeronavFAA'

-> `Geomedia'

-> `EDIGEO'

-> `GFT'

-> `SVG'

-> `CouchDB'

-> `Cloudant'

-> `Idrisi'

-> `ARCGEN'

-> `SEGUKOOA'

-> `SEGY'

-> `ODS'

-> `XLSX'

-> `ElasticSearch'

-> `Walk'

-> `Carto'

-> `SXF'

-> `Selafin'

-> `JML'

-> `PLSCENES'

-> `CSW'

-> `VDV'

-> `GMLAS'

-> `MVT'

-> `TIGER'

-> `AVCBin'

-> `AVCE00'

-> `NGW'

-> `HTTP'

I can see that the driver AeronavFAA is tested, since it is listed above, what am I doing wrong?

Kind regards,

Paul



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/999ce42c/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep  4 06:52:33 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 4 Sep 2019 06:52:33 -0700 (MST)
Subject: [gdal-dev] ogr2ogr shp
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A6D4@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A6D4@xw-exch03.lfv.se>
Message-ID: <1567605153570-0.post@n6.nabble.com>

The original shapefile specification
https://www.esri.com/library/whitepapers/pdfs/shapefile.pdf informs about
filenames:
"All letters in a file name are in lower case on operating systems with case
sensitive file names."

I think that it makes sense that GDAL converts the non-standard names of
shapefiles into lower case layer names. You can override that by running
ogr2ogr with the -nln (new layer name) option. You can write a script that
reads the filename and inserts it literally as a value of -nln. Ogr2ogr
cannot do that automatically for you.

You probably know that an identifier having mixed case letters in its name
is so called "demited identifier" and you must use double quotes around the
name in the SQL queries but if you have a reason for that it is your choise.

-Jukka Rahkonen-


paul.malm wrote
> When I import a shape layer to a postgis db with ogr2ogr, the table-name 
> only gets lower characters (railroads) even though the shapefile is named
> like RailRoads.shp. Is there a way to force the parser to use the same
> characters as the filename





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep  4 07:14:35 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 4 Sep 2019 07:14:35 -0700 (MST)
Subject: [gdal-dev] ogr2ogr openstreetmap
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
Message-ID: <1567606475768-0.post@n6.nabble.com>





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep  4 07:21:53 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 4 Sep 2019 07:21:53 -0700 (MST)
Subject: [gdal-dev] ogr2ogr openstreetmap
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>
Message-ID: <1567606913225-0.post@n6.nabble.com>

I can't tell what goes wrong but your command works for me and new tables
have this much features:

points "809161"
lines "1517114"
multilinestrings "9812"
multipolygons "3317706"
other_relations "12587"

I used the default osmconf.ini file and Swedish data from last night.

-Jukka Rahkonen-



paul.malm wrote
> Hi,
> When I try to convert an open street map directory to a postgis data base
> I only get one layer(other_relations) with some lines and some points, far
> from everything.  There are no error meassages.
> ogr2ogr-f "PostgreSQL" PG:"host= 127.0.0.1 user=postgres dbname=test
> password=postgres" c:\temp\sweden-latest.osm.pbf
> 
> Kind regards,
> Paul





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sean at mapbox.com  Wed Sep  4 07:50:09 2019
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 4 Sep 2019 08:50:09 -0600
Subject: [gdal-dev] gdal_translate is slow
In-Reply-To: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
References: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
Message-ID: <CADPhZXz52doZ0A4GybUxy6SO8uN+SbwnpxoJXewHBVHzyRPQEg@mail.gmail.com>

Hi Denis,

rio-convert lacks some of the features of gdal_translate (advanced metadata
translation, statistics, &c) and it may be that the cost of those features
is being especially felt in the GRIB case. In fact, the core of
gdal_translate has some GRIB-specific code that rasterio does not use:
https://github.com/OSGeo/gdal/blob/master/gdal/apps/gdal_translate_lib.cpp#L1763-L1782
.

Hope this helps!

On Wed, Sep 4, 2019 at 6:25 AM Denis Rykov <rykovd at gmail.com> wrote:

> Why gdal_translate so slow compared to rio translate from rasterio?
>
> rio convert:
>
> $ time rio convert download.grib download.tif
> Warning: Inside GRIB2Inventory, Message # 15
> ERROR: Ran out of file reading SECT0
> Warning: Inside GRIB2Inventory, Message # 15
> ERROR: Ran out of file reading SECT0
> rio convert download.grib download.tif  15.79s user 2.05s system 72% cpu
> 24.627 total
>
>
>
> gdal_translate:
>
> $ time gdal_translate download.grib download.tif
> Warning: Inside GRIB2Inventory, Message # 15
> ERROR: Ran out of file reading SECT0
> Input file size is 3600, 1801
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> gdal_translate download.grib download.tif  261.99s user 18.57s system 98%
> cpu 4:45.62 total
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/f13e094d/attachment.html>

From even.rouault at spatialys.com  Wed Sep  4 08:04:15 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Sep 2019 17:04:15 +0200
Subject: [gdal-dev] gdal_translate is slow
In-Reply-To: <CADPhZXz52doZ0A4GybUxy6SO8uN+SbwnpxoJXewHBVHzyRPQEg@mail.gmail.com>
References: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
 <CADPhZXz52doZ0A4GybUxy6SO8uN+SbwnpxoJXewHBVHzyRPQEg@mail.gmail.com>
Message-ID: <2468439.TlCeXaJ78q@even-i700>

On mercredi 4 septembre 2019 08:50:09 CEST Sean Gillies wrote:
> Hi Denis,
> 
> rio-convert lacks some of the features of gdal_translate (advanced metadata
> translation, statistics, &c) and it may be that the cost of those features
> is being especially felt in the GRIB case.

For a plain gdal_translate like that, shouldn't matter

> In fact, the core of
> gdal_translate has some GRIB-specific code that rasterio does not use:
> https://github.com/OSGeo/gdal/blob/master/gdal/apps/gdal_translate_lib.cpp#L
> 1763-L1782 .

That part of the code shouldn't be called at all for a plain gdal_translate, 
and even, it shouldn't impact performance

Without the exact dataset to reproduce, hard to know what happens.

An hypothesis might be that the dataset has many bands, and as the GTiff 
driver will produce a pixel-interleaved file, it might need to switch 
frequently between source GRIB bands, but there's a limited cache for those 
bands. If rio convert proceeds band by band, this might be more beneficial 
here. Blind and likely wrong guess...


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rykovd at gmail.com  Wed Sep  4 08:26:14 2019
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 4 Sep 2019 17:26:14 +0200
Subject: [gdal-dev] gdal_translate is slow
In-Reply-To: <2468439.TlCeXaJ78q@even-i700>
References: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
 <CADPhZXz52doZ0A4GybUxy6SO8uN+SbwnpxoJXewHBVHzyRPQEg@mail.gmail.com>
 <2468439.TlCeXaJ78q@even-i700>
Message-ID: <CAJbvKNrPFvGCC75kShHoQAr4bmT0q6A6LH+8rG3H_TXOVZYRvg@mail.gmail.com>

Thanks for quick reply, I've uploaded grib file here:
https://transfer.sh/5JCVX/download.grib

On Wed, Sep 4, 2019 at 5:04 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 4 septembre 2019 08:50:09 CEST Sean Gillies wrote:
> > Hi Denis,
> >
> > rio-convert lacks some of the features of gdal_translate (advanced
> metadata
> > translation, statistics, &c) and it may be that the cost of those
> features
> > is being especially felt in the GRIB case.
>
> For a plain gdal_translate like that, shouldn't matter
>
> > In fact, the core of
> > gdal_translate has some GRIB-specific code that rasterio does not use:
> >
> https://github.com/OSGeo/gdal/blob/master/gdal/apps/gdal_translate_lib.cpp#L
> > 1763-L1782 .
>
> That part of the code shouldn't be called at all for a plain
> gdal_translate,
> and even, it shouldn't impact performance
>
> Without the exact dataset to reproduce, hard to know what happens.
>
> An hypothesis might be that the dataset has many bands, and as the GTiff
> driver will produce a pixel-interleaved file, it might need to switch
> frequently between source GRIB bands, but there's a limited cache for
> those
> bands. If rio convert proceeds band by band, this might be more beneficial
> here. Blind and likely wrong guess...
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/1e6f276b/attachment.html>

From even.rouault at spatialys.com  Wed Sep  4 08:27:18 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Sep 2019 17:27:18 +0200
Subject: [gdal-dev] gdal_retile.py killed when dealing with large .vrt +
	pixel function
In-Reply-To: <fac924cd-73cf-4e7b-a687-7f9c51a0745f@email.android.com>
References: <fac924cd-73cf-4e7b-a687-7f9c51a0745f@email.android.com>
Message-ID: <4004048.Tul3etcGqn@even-i700>

I cannot reproduce with a test_sum.vrt relying on a tiny 20x20 raster:

<VRTDataset rasterXSize="1178083" rasterYSize="2179667">
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTDerivedRasterBand">
    <PixelFunctionType>max</PixelFunctionType>
    <PixelFunctionLanguage>Python</PixelFunctionLanguage>
    <PixelFunctionCode><![CDATA[
import numpy as np
def max(in_ar, out_ar, xoff, yoff, xsize, ysize, raster_xsize, raster_ysize, buf_radius, gt, **kwargs):
    np.round_(np.clip(np.max(in_ar, axis = 0),0,255), out = out_ar)
]]>
    </PixelFunctionCode>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="20" DataType="Byte" BlockXSize="20" BlockYSize="20" />
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="20" />
      <DstRect xOff="0" yOff="0" xSize="1178083" ySize="2179667" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>


$ GDAL_VRT_ENABLE_PYTHON=YES python swig/python/scripts/gdal_retile.py -v -r bilinear -levels 5 -ps 2048 2048 -co "TILED=YES" -co "COMPRESS=JPEG"  -targetDir pyramid test_sum.vrt
Building internal Index for 1 tile(s) ... finished
Filename: test_sum.vrt
File Size: 1178083x2179667x1
Pixel Size: 1.000000 x -1.000000
UL:(0.000000,0.000000)   LR:(1178083.000000,-2179667.000000)
tileWidth:   2048
tileHeight:  2048
countTilesX: 576
countTilesY: 1065
overlap:     0
pyramid/test_sum_0001_0001.tif : 0|0-->2048-2048
pyramid/test_sum_0001_0002.tif : 2048|0-->2048-2048
pyramid/test_sum_0001_0003.tif : 4096|0-->2048-2048
pyramid/test_sum_0001_0004.tif : 6144|0-->2048-2048
pyramid/test_sum_0001_0005.tif : 8192|0-->2048-2048
pyramid/test_sum_0001_0006.tif : 10240|0-->2048-2048
pyramid/test_sum_0001_0007.tif : 12288|0-->2048-2048
pyramid/test_sum_0001_0008.tif : 14336|0-->2048-2048
pyramid/test_sum_0001_0009.tif : 16384|0-->2048-2048
pyramid/test_sum_0001_0010.tif : 18432|0-->2048-2048
[...]

You'll have to run under a debugger and see where this blows up.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From paul.malm at lfv.se  Wed Sep  4 08:51:53 2019
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 4 Sep 2019 15:51:53 +0000
Subject: [gdal-dev] ogr2ogr openstreetmap
In-Reply-To: <1567606913225-0.post@n6.nabble.com>
References: <785199B14156764C8EB14EF96CEDC44EE2A697@xw-exch03.lfv.se>,
 <1567606913225-0.post@n6.nabble.com>
Message-ID: <4590445C-4E38-448F-8553-2AE958058499@lfv.se>

Sorry for asking, but how did you use the inifile?
Kind regards,
Paul

> 4 sep. 2019 kl. 16:22 skrev jratike80 <jukka.rahkonen at maanmittauslaitos.fi>:
> 
> I can't tell what goes wrong but your command works for me and new tables
> have this much features:
> 
> points "809161"
> lines "1517114"
> multilinestrings "9812"
> multipolygons "3317706"
> other_relations "12587"
> 
> I used the default osmconf.ini file and Swedish data from last night.
> 
> -Jukka Rahkonen-
> 
> 
> 
> paul.malm wrote
>> Hi,
>> When I try to convert an open street map directory to a postgis data base
>> I only get one layer(other_relations) with some lines and some points, far
>> from everything.  There are no error meassages.
>> ogr2ogr-f "PostgreSQL" PG:"host= 127.0.0.1 user=postgres dbname=test
>> password=postgres" c:\temp\sweden-latest.osm.pbf
>> 
>> Kind regards,
>> Paul
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Sep  4 08:52:59 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Sep 2019 17:52:59 +0200
Subject: [gdal-dev] gdal_translate is slow
In-Reply-To: <CAJbvKNrPFvGCC75kShHoQAr4bmT0q6A6LH+8rG3H_TXOVZYRvg@mail.gmail.com>
References: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
 <2468439.TlCeXaJ78q@even-i700>
 <CAJbvKNrPFvGCC75kShHoQAr4bmT0q6A6LH+8rG3H_TXOVZYRvg@mail.gmail.com>
Message-ID: <3329408.oZoLTpW6je@even-i700>

On mercredi 4 septembre 2019 17:26:14 CEST Denis Rykov wrote:
> Thanks for quick reply, I've uploaded grib file here:
> https://transfer.sh/5JCVX/download.grib

Turns out that my guess wasn't so bad after all. The uncompressed file size is
3601x1801x14(bands)x8(bytes_per_pixel) = 693 MB
whereas a GRIB dataset has an internal cache by default of only 100 MB.
As you write to a pixel-interleaved GTiff, there's constant back and forth 
between bands when reading chunks and thus the GRIB cache has no effect.
So 2 possible workarounds:
- increase GRIB_CACHEMAX to 1000 for example. Limited to a GRIB dataset that 
can fits uncompressed in memory.
- add "-co interleave=band" to generate a band-interleaved geotiff. That one 
can work with an arbitrarily large GRIB file

I've committed an improvement, so if you now row master with --debug on, 
you'll see a hint
"""
GRIB: Maximum band cache size reached for this dataset. Caching only one band 
at a time from now, which can negatively affect performance. Consider 
increasing GRIB_CACHEMAX to a higher value (in MB), at least 693 in that 
instance
"""

As far as I can see in 
https://github.com/mapbox/rasterio/blob/
e1c984bf0e4a18e039569bb3bafe6667bb5b3a69/rasterio/rio/convert.py#L76
it presumably ingest the whole dataset into memory (Sean, correct me if I'm 
wrong), and thus those caching issues don't trigger since the input dataset 
will be read band-per-band.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From carsten.lockenkoetter at gon.de  Wed Sep  4 09:45:40 2019
From: carsten.lockenkoetter at gon.de (=?utf-8?B?Q2Fyc3RlbiBMb2NrZW5rw7Z0dGVy?=)
Date: Wed, 4 Sep 2019 16:45:40 +0000
Subject: [gdal-dev] GDAL (.NET) coordinate transformation via BETA2007
In-Reply-To: <1A8DF958A1AA1E46BDDB48C08CB0DD0001E971FADD@vbrk21mx02.bezreg-koeln.nrw.de>
References: <AM0PR09MB2948CBFBD397BD4629808B4897A00@AM0PR09MB2948.eurprd09.prod.outlook.com>
 <AM0PR09MB2948F040FE4CFA1A5E052E0697A00@AM0PR09MB2948.eurprd09.prod.outlook.com>
 <1A8DF958A1AA1E46BDDB48C08CB0DD0001E971FADD@vbrk21mx02.bezreg-koeln.nrw.de>
Message-ID: <DB8PR09MB295592ACB99C8D4F683B1DCB97B80@DB8PR09MB2955.eurprd09.prod.outlook.com>

I have updated my C# application to use the GDAL 3.0.1 binaries from GISInternals.

Transform via EPSG:
       var src = new SpatialReference("");
       var dest = new SpatialReference("");
       string wkt = "POINT(2575957.917 5728085.530)";
       var geom = Geometry.CreateFromWkt(wkt);
                src.ImportFromEPSG(31466);
       dest.ImportFromEPSG(3857);
       var transform = new CoordinateTransformation(src, dest);
       geom.Transform(transform);
       geom.ExportToWkt(out string outWKT);

// "POINT (3993425.20096133 2326133.24005068)" --> completely wrong

With CPL_DEBUG=ON and PROJ_DEBUG=5, I get following information about this transformation:
[cid:image001.png at 01D5634F.A76F19A0]

Transform via proj4 string:
       src.ImportFromProj4(@"+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids={absolutePath}\BETA2007.gsb +units=m +no_defs +type=crs");
       dest.ImportFromEPSG(3857);
// "POINT (790104.712949148 6742818.48632016)" --> ok

Transform via proj4 +init (deprecated)
       src.ImportFromProj4("+init=epsg:31466");
       dest.ImportFromEPSG(3857);

// "POINT (790104.712949148 6742818.48632016)" --> ok

[cid:image002.png at 01D5634F.A76F19A0]

Via CMD:
[cid:image003.png at 01D56350.8F2D45A0]
--> ok

FME returns:
(790104.7129438451,6742818.485878875)

So transforming via EPSG (source and destination) is using a completely wrong transformation in .NET, right?
But why?

My preferred method to transform is only via EPSG. But what I have to do, that the SpatialReference objects get the right transformation?

Regards,
Carsten

Von: Schmitz, Uwe <uwe.schmitz at bezreg-koeln.nrw.de>
Gesendet: Donnerstag, 29. August 2019 10:30
An: Carsten Lockenkötter <carsten.lockenkoetter at gon.de>; gdal-dev at lists.osgeo.org
Betreff: AW: GDAL (.NET) coordinate transformation via BETA2007

Carsten,

are you shure that the grid is used during transformation?
I know nothing about the C# package, but in my own tests
the “not-found” case was often the cause for wrong results.
So I tend to almost always use an absolute path to
the grid file.
Due to historical reasons gdal silently ignores this error.

Ah, and I see that I put an extra +wktext at the end of the
arguments. Don’t know if it’s still necessary.

Regards
Uwe


Von: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Carsten Lockenkötter
Gesendet: Dienstag, 27. August 2019 14:24
An: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Betreff: [gdal-dev] GDAL (.NET) coordinate transformation via BETA2007

Hello,

because SQLServer can't transform geometries, i have developed a .NET library (C#) that transforms the geometries based on GDAL (NuGet Package GDAL.Native v2.4.2).
In principle, this also works.

If i transform from 31466 to 3857, i have an offset of about 1.5m because gdal transformed via Helmert, not via Beta2007.
If i transform the same geometrie via proj4 string to use my Beta2007.gsb file, i get a completly wrong geometry.

sample code to transform via epsg
Example:

                var inputGeom = "POINT (2529815.8 5642182.4)";

                GdalConfiguration.ConfigureOgr();

                var source = new SpatialReference("");
                var destination = new SpatialReference("");

                source.ImportFromEPSG(31466);
                destination.ImportFromEPSG(3857);

                CoordinateTransformation transform = new CoordinateTransformation(source, destination);
                Geometry ogrGeom = Geometry.CreateFromWkt(inputGeom);
                ogrGeom.Transform(transform);

                ogrGeom.ExportToWkt(out string outGeom);

                return outGeom;

value of outGeom:
                POINT (776704.423009968 6626706.00572367)

if i transform the same geometrie via FME with the CsmapReprojector, i get this (correct) coordinates:
(776702.2109972419,6626706.521023605)

FME used the gridfile Beta2007, GDAL not.
So i tried to transform my geometrie via proj4 string, where I have the possibility to specify the gridfile.
My gridfile Beta2007.gsb is located here: {ProjectRoot}\bin\Debug\gdal\share\Beta2007.gsb

Example:

                var inputGeom = "POINT (2529815.8 5642182.4)";

                GdalConfiguration.ConfigureOgr();

                var source = new SpatialReference("");
                var destination = new SpatialReference("");

                source.ImportFromProj4("+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids=@BETA2007.gsb<mailto:+nadgrids=@BETA2007.gsb>");
                destination.ImportFromEPSG(3857);

                CoordinateTransformation transform = new CoordinateTransformation(source, destination);
                Geometry ogrGeom = Geometry.CreateFromWkt(inputGeom);
                ogrGeom.Transform(transform);

                ogrGeom.ExportToWkt(out string outGeom);

                return outGeom;

value of outGeom:
                POINT (776787.364952423 6626930.71048604)


What i need:
Beta2007 Transformation via EPSG code, but i don't know, where i have to change it.
(optional) if i can't change the transformation via EPSG code via Gridfile, i need to know the correct proj4 string for my transformation.

Best regards,
Carsten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/caca56ca/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7138 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/caca56ca/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 8933 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/caca56ca/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 11316 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/caca56ca/attachment-0005.png>

From wee.s at forest.go.th  Wed Sep  4 09:46:23 2019
From: wee.s at forest.go.th (=?utf-8?B?4Lin4Li14Lij4LmMIOC4qOC4o+C4teC4l+C4tOC4nuC5guC4nuC4mOC4tOC5jA==?=)
Date: Wed, 4 Sep 2019 23:46:23 +0700 (ICT)
Subject: [gdal-dev] gdal_retile.py killed when dealing with large .vrt +
 pixel function
In-Reply-To: <4004048.Tul3etcGqn@even-i700>
References: <fac924cd-73cf-4e7b-a687-7f9c51a0745f@email.android.com>
 <4004048.Tul3etcGqn@even-i700>
Message-ID: <1484688602.3296544.1567615583362.JavaMail.zimbra@forest.go.th>

Hi Even,

Thanks for your kindly attention. I'm sad that I couldn't provide you a proper material to reproduce the issue (since I didn't own them).

But I think I just found the cause of this problem - lack of memory.

>From your suggestion about using a debugger, I searched the internet and found out that I could pass '--debug ON' to every gdal commands. After I passed the option, more info are displayed:

GDAL: GDALDriver::Create(Memory,TileIndex,0,0,0,Unknown,(nil))
GDAL: GDALOpen(test_sum.vrt, this=0x2b10bc0) succeeds as VRT.
GDAL: GDALClose(test_sum.vrt, this=0x2b10bc0)
Building internal Index for 1 tile(s) ... finished
GDAL: GDALOpen(test_sum.vrt, this=0x2b10bc0) succeeds as VRT.
Filename: test_sum.vrt
File Size: 1178083x2179667x1
Pixel Size: 0.780877 x -0.780877
UL:(10841319.553138,2329047.665115)   LR:(11761257.511933,626995.763142)
tileWidth:   2048
tileHeight:  2048
countTilesX: 576
countTilesY: 1065
overlap:     0
GDAL: GDALDriver::Create(Memory,TileResult_0,0,0,0,Unknown,(nil))
GDAL: GDALDriver::Create(MEM,TEMP,2048,2048,1,Byte,(nil))
Killed

The script was killed after some message about 'memory', so I monitored my system's memory while running the script. The script gradually consumed my 8GB RAM then my 4GB swap before being killed.

I'll try to increase the memory/swap and report back.

Thank you,
Wee.

From rykovd at gmail.com  Wed Sep  4 10:56:03 2019
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 4 Sep 2019 19:56:03 +0200
Subject: [gdal-dev] gdal_translate is slow
In-Reply-To: <3329408.oZoLTpW6je@even-i700>
References: <CAJbvKNqejyxmcQPtsPXai7K0yELrCuznNs3bGuAYnPkv0QTHXw@mail.gmail.com>
 <2468439.TlCeXaJ78q@even-i700>
 <CAJbvKNrPFvGCC75kShHoQAr4bmT0q6A6LH+8rG3H_TXOVZYRvg@mail.gmail.com>
 <3329408.oZoLTpW6je@even-i700>
Message-ID: <CAJbvKNrUXQq5DnYjKP-ZkZ-pCCunZ2KDaxiv2E1QDuy1wTaUvA@mail.gmail.com>

Thanks guys for clarification!

On Wed, Sep 4, 2019, 5:53 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 4 septembre 2019 17:26:14 CEST Denis Rykov wrote:
> > Thanks for quick reply, I've uploaded grib file here:
> > https://transfer.sh/5JCVX/download.grib
>
> Turns out that my guess wasn't so bad after all. The uncompressed file
> size is
> 3601x1801x14(bands)x8(bytes_per_pixel) = 693 MB
> whereas a GRIB dataset has an internal cache by default of only 100 MB.
> As you write to a pixel-interleaved GTiff, there's constant back and forth
> between bands when reading chunks and thus the GRIB cache has no effect.
> So 2 possible workarounds:
> - increase GRIB_CACHEMAX to 1000 for example. Limited to a GRIB dataset
> that
> can fits uncompressed in memory.
> - add "-co interleave=band" to generate a band-interleaved geotiff. That
> one
> can work with an arbitrarily large GRIB file
>
> I've committed an improvement, so if you now row master with --debug on,
> you'll see a hint
> """
> GRIB: Maximum band cache size reached for this dataset. Caching only one
> band
> at a time from now, which can negatively affect performance. Consider
> increasing GRIB_CACHEMAX to a higher value (in MB), at least 693 in that
> instance
> """
>
> As far as I can see in
> https://github.com/mapbox/rasterio/blob/
> e1c984bf0e4a18e039569bb3bafe6667bb5b3a69/rasterio/rio/convert.py#L76
> it presumably ingest the whole dataset into memory (Sean, correct me if
> I'm
> wrong), and thus those caching issues don't trigger since the input
> dataset
> will be read band-per-band.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/8b989d46/attachment.html>

From scott at agi.com  Wed Sep  4 11:33:13 2019
From: scott at agi.com (Reynolds, Scott)
Date: Wed, 4 Sep 2019 18:33:13 +0000
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
References: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
Message-ID: <SN6PR07MB4909F90E8A993C403DD3A796A5B80@SN6PR07MB4909.namprd07.prod.outlook.com>

A quick look at the GDAL source in gdal-3.0.1\ogr\ogrsf_frmts\aeronavfaa\ograeronavfaadatasource.cpp suggests that the code is not processing the file format correctly and therefore not identifying the file as a Daily DOF.  I would try to fix it, but I can't get PROJ to build on Windows using Visual Studio because CMake can't find SQLite binary.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: Wednesday, September 4, 2019 08:46
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] ogr2ogr

Hi,
I don't know if this is the correct forum.
I would like to fonvert a aeronavFAA obstacle file to the Esri shape format.
>From all the information I can find on internet I think this should be correct:
C:\Program Files\GDAL>ogr2ogr -f "ESRI Shapefile" c:\temp\FAAdof13_ga  C:\Downloads\FAA_DOF\13-GA.DAT

This is the error message I get:
FAILURE:
Unable to open datasource `C:\Users\anpaumal\Downloads\shapefiler\FAA_DOF\13-GA.DAT' with the following drivers.
  -> `netCDF'
  -> `PCIDSK'
  -> `PDS4'
  -> `JP2OpenJPEG'
  -> `PDF'
  -> `MBTiles'
  -> `EEDA'
  -> `DB2ODBC'
  -> `ESRI Shapefile'
  -> `MapInfo File'
  -> `UK .NTF'
  -> `OGR_SDTS'
  -> `S57'
  -> `DGN'
  -> `OGR_VRT'
  -> `REC'
  -> `Memory'
  -> `BNA'
  -> `CSV'
  -> `NAS'
  -> `GML'
  -> `GPX'
  -> `LIBKML'
  -> `KML'
  -> `GeoJSON'
  -> `GeoJSONSeq'
  -> `ESRIJSON'
  -> `TopoJSON'
  -> `Interlis 1'
  -> `Interlis 2'
  -> `OGR_GMT'
  -> `GPKG'
  -> `SQLite'
  -> `ODBC'
  -> `WAsP'
  -> `PGeo'
  -> `MSSQLSpatial'
  -> `PostgreSQL'
  -> `MySQL'
  -> `OpenFileGDB'
  -> `XPlane'
  -> `DXF'
  -> `CAD'
  -> `Geoconcept'
  -> `GeoRSS'
  -> `GPSTrackMaker'
  -> `VFK'
  -> `PGDUMP'
  -> `OSM'
  -> `GPSBabel'
  -> `SUA'
  -> `OpenAir'
  -> `OGR_PDS'
  -> `WFS'
  -> `WFS3'
  -> `HTF'
  -> `AeronavFAA'
  -> `Geomedia'
  -> `EDIGEO'
  -> `GFT'
  -> `SVG'
  -> `CouchDB'
  -> `Cloudant'
  -> `Idrisi'
  -> `ARCGEN'
  -> `SEGUKOOA'
  -> `SEGY'
  -> `ODS'
  -> `XLSX'
  -> `ElasticSearch'
  -> `Walk'
  -> `Carto'
  -> `SXF'
  -> `Selafin'
  -> `JML'
  -> `PLSCENES'
  -> `CSW'
  -> `VDV'
  -> `GMLAS'
 -> `MVT'
  -> `TIGER'
  -> `AVCBin'
  -> `AVCE00'
  -> `NGW'
  -> `HTTP'

I can see that the driver AeronavFAA is tested, since it is listed above, what am I doing wrong?
Kind regards,
Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/915cb910/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep  4 11:52:54 2019
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 4 Sep 2019 18:52:54 +0000
Subject: [gdal-dev] ogr2ogr openstreetmap
Message-ID: <2c9f0382c5d947bdb97f59713e076b4d@C119S212VM042.msvyvi.vaha.local>

Hi,

I did not use osmconf.ini in any particular way. As you can read from the driver documentation https://gdal.org/drivers/vector/osm.html OSM driver reads the configuration from the osmconf.ini file. Because I did not edit my osmconf.ini and obviously you did not edit yours then we have been using the same default configuration. Your failure is caused by some other reason. Adding --debug on into your ogr2ogr command may print some useful information.

-Jukka-

-----Alkuperäinen viesti-----
Lähettäjä: paul.malm at lfv.se <paul.malm at lfv.se> 
Lähetetty: keskiviikko 4. syyskuuta 2019 18.52
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] ogr2ogr openstreetmap

Sorry for asking, but how did you use the inifile?
Kind regards,
Paul

> 4 sep. 2019 kl. 16:22 skrev jratike80 <jukka.rahkonen at maanmittauslaitos.fi>:
> 
> I can't tell what goes wrong but your command works for me and new 
> tables have this much features:
> 
> points "809161"
> lines "1517114"
> multilinestrings "9812"
> multipolygons "3317706"
> other_relations "12587"
> 
> I used the default osmconf.ini file and Swedish data from last night.
> 
> -Jukka Rahkonen-
> 
> 
> 
> paul.malm wrote
>> Hi,
>> When I try to convert an open street map directory to a postgis data 
>> base I only get one layer(other_relations) with some lines and some 
>> points, far from everything.  There are no error meassages.
>> ogr2ogr-f "PostgreSQL" PG:"host= 127.0.0.1 user=postgres dbname=test 
>> password=postgres" c:\temp\sweden-latest.osm.pbf
>> 
>> Kind regards,
>> Paul
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Wed Sep  4 13:13:40 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 4 Sep 2019 22:13:40 +0200
Subject: [gdal-dev] OGR FileGDB driver: 'OBJECTID' not recognised as an
	available field
Message-ID: <CACALY+QtxuX+H_vWsoDbt-sDrPJg6HL7L=OuUpH+mf-uOZmbyg@mail.gmail.com>

Hi,

It looks like  the sql queries with -dialect "OGRSQL" doesn't seem to work
as expected. When I specify the FID in the where clause, it doesn't filter
anything. The same query is also described as a solution in the following
ticket https://trac.osgeo.org/gdal/ticket/4253 but I doubt if that works at
all.

The code causing this problem is fairly generic (ogr_gensql.cpp)

if( psSelectInfo->where_expr && pszDialect != nullptr &&
            EQUAL(pszDialect, "OGRSQL") )
        {
            int nMinIndexForSpecialField =
poSrcLayer->GetLayerDefn()->GetFieldCount();
            bForwardWhereToSourceLayer =
!OGRGenSQLResultsLayerHasSpecialField
                            (psSelectInfo->where_expr,
nMinIndexForSpecialField);
        }
        if (bForwardWhereToSourceLayer)
            pszWHERE = CPLStrdup(pszWHEREIn);
        else
            pszWHERE = nullptr;

In the "where" expression, the FID field is thanslated to OBJECTID and it
is now treated as a special field, therefore the "where" expression is not
being passed to the driver.

I'm also unsure if that is a correct action to omit passing "where" to the
layer instead of providing an error message.

Is this a bug that should be fixed, or the OGRSQL dialect is considered as
unsupported with OpenFileGDB?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190904/8038f557/attachment.html>

From even.rouault at spatialys.com  Thu Sep  5 02:47:30 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Sep 2019 11:47:30 +0200
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <SN6PR07MB4909F90E8A993C403DD3A796A5B80@SN6PR07MB4909.namprd07.prod.outlook.com>
References: <785199B14156764C8EB14EF96CEDC44EE2A624@xw-exch03.lfv.se>
 <SN6PR07MB4909F90E8A993C403DD3A796A5B80@SN6PR07MB4909.namprd07.prod.outlook.com>
Message-ID: <1695470.jt3WLDo0HN@even-i700>

On mercredi 4 septembre 2019 18:33:13 CEST Reynolds, Scott wrote:
> A quick look at the GDAL source in
> gdal-3.0.1\ogr\ogrsf_frmts\aeronavfaa\ograeronavfaadatasource.cpp suggests
> that the code is not processing the file format correctly and therefore not
> identifying the file as a Daily DOF.  I would try to fix it, but I can't
> get PROJ to build on Windows using Visual Studio because CMake can't find
> SQLite binary.

You can fetch one of the last 4 SDKs listed at depending on your arch& 
compiler:
http://gisinternals.com/sdk.php

They contain PROJ and other dependencies.

Or follow (and slightly adapt for paths) the build recipee at
https://github.com/OSGeo/PROJ/blob/master/appveyor.yml#L24

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  5 04:13:03 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Sep 2019 13:13:03 +0200
Subject: [gdal-dev] OGR FileGDB driver: 'OBJECTID' not recognised as an
	available field
In-Reply-To: <CACALY+QtxuX+H_vWsoDbt-sDrPJg6HL7L=OuUpH+mf-uOZmbyg@mail.gmail.com>
References: <CACALY+QtxuX+H_vWsoDbt-sDrPJg6HL7L=OuUpH+mf-uOZmbyg@mail.gmail.com>
Message-ID: <3514507.CYR4maEha1@even-i700>

On mercredi 4 septembre 2019 22:13:40 CEST Tamas Szekeres wrote:
> Hi,
> 
> It looks like  the sql queries with -dialect "OGRSQL" doesn't seem to work
> as expected. When I specify the FID in the where clause, it doesn't filter
> anything. The same query is also described as a solution in the following
> ticket https://trac.osgeo.org/gdal/ticket/4253 but I doubt if that works at
> all.
> 
> The code causing this problem is fairly generic (ogr_gensql.cpp)
> 
> if( psSelectInfo->where_expr && pszDialect != nullptr &&
>             EQUAL(pszDialect, "OGRSQL") )
>         {
>             int nMinIndexForSpecialField =
> poSrcLayer->GetLayerDefn()->GetFieldCount();
>             bForwardWhereToSourceLayer =
> !OGRGenSQLResultsLayerHasSpecialField
>                             (psSelectInfo->where_expr,
> nMinIndexForSpecialField);
>         }
>         if (bForwardWhereToSourceLayer)
>             pszWHERE = CPLStrdup(pszWHEREIn);
>         else
>             pszWHERE = nullptr;
> 
> In the "where" expression, the FID field is thanslated to OBJECTID and it
> is now treated as a special field, therefore the "where" expression is not
> being passed to the driver.
> 
> I'm also unsure if that is a correct action to omit passing "where" to the
> layer instead of providing an error message.

Actually the where isn't completely discarded. It is set on the 
OGRGenSQLResultsLayer per

    if( !bForwardWhereToSourceLayer )
        OGRGenSQLResultsLayer::SetAttributeFilter( pszWHEREIn );

around line 492

The issue is that the GenSQL layer has no FID column set, and thus this filter 
fails. One could potentially set the FID Column name on it from the source 
layer, but that wouldn't be really appropriate in the case of JOIN. That said 
I see a poDstFeat->SetFID( poSrcFeat->GetFID() ); at line 1332 of 
TranslateFeature(), so...

(there might have been other fixes since #4253 that have made this case 
broken)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Thu Sep  5 13:51:49 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 5 Sep 2019 22:51:49 +0200
Subject: [gdal-dev] OGR FileGDB driver: 'OBJECTID' not recognised as an
 available field
In-Reply-To: <3514507.CYR4maEha1@even-i700>
References: <CACALY+QtxuX+H_vWsoDbt-sDrPJg6HL7L=OuUpH+mf-uOZmbyg@mail.gmail.com>
 <3514507.CYR4maEha1@even-i700>
Message-ID: <CACALY+RKVk-i-ZLW_xAV+7e3sC3kBej5eJPhTQwWVEVWsFxSKw@mail.gmail.com>

Hi,

I'm not sure if bForwardWhereToSourceLayer should not be set in this case,
since the special field FID in pszWHEREIn has already been replaced.
Or the OpenFileGDB driver should indeed expose OBJECTID as a column
according to #4253

Best regards,

Tamas


 Even Rouault <even.rouault at spatialys.com> ezt írta (időpont: 2019. szept.
5., Cs, 13:13):

> On mercredi 4 septembre 2019 22:13:40 CEST Tamas Szekeres wrote:
> > Hi,
> >
> > It looks like  the sql queries with -dialect "OGRSQL" doesn't seem to
> work
> > as expected. When I specify the FID in the where clause, it doesn't
> filter
> > anything. The same query is also described as a solution in the following
> > ticket https://trac.osgeo.org/gdal/ticket/4253 but I doubt if that
> works at
> > all.
> >
> > The code causing this problem is fairly generic (ogr_gensql.cpp)
> >
> > if( psSelectInfo->where_expr && pszDialect != nullptr &&
> >             EQUAL(pszDialect, "OGRSQL") )
> >         {
> >             int nMinIndexForSpecialField =
> > poSrcLayer->GetLayerDefn()->GetFieldCount();
> >             bForwardWhereToSourceLayer =
> > !OGRGenSQLResultsLayerHasSpecialField
> >                             (psSelectInfo->where_expr,
> > nMinIndexForSpecialField);
> >         }
> >         if (bForwardWhereToSourceLayer)
> >             pszWHERE = CPLStrdup(pszWHEREIn);
> >         else
> >             pszWHERE = nullptr;
> >
> > In the "where" expression, the FID field is thanslated to OBJECTID and it
> > is now treated as a special field, therefore the "where" expression is
> not
> > being passed to the driver.
> >
> > I'm also unsure if that is a correct action to omit passing "where" to
> the
> > layer instead of providing an error message.
>
> Actually the where isn't completely discarded. It is set on the
> OGRGenSQLResultsLayer per
>
>     if( !bForwardWhereToSourceLayer )
>         OGRGenSQLResultsLayer::SetAttributeFilter( pszWHEREIn );
>
> around line 492
>
> The issue is that the GenSQL layer has no FID column set, and thus this
> filter
> fails. One could potentially set the FID Column name on it from the source
> layer, but that wouldn't be really appropriate in the case of JOIN. That
> said
> I see a poDstFeat->SetFID( poSrcFeat->GetFID() ); at line 1332 of
> TranslateFeature(), so...
>
> (there might have been other fixes since #4253 that have made this case
> broken)
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190905/46fe485a/attachment.html>

From shawn.gong at mdacorporation.com  Thu Sep  5 14:12:11 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Thu, 5 Sep 2019 21:12:11 +0000
Subject: [gdal-dev] gdalwarp -t_srs proj=utm
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5D49E0D4@exbermd02.ds.mda.ca>

Hi GDAL list,


gdalwarp -t_srs '+proj=utm +zone=XX +datum=WGS84' source.tif result.tif

Is there a way for GDAL to automatically figure out the Zone #, so I don't have to provide XX ?

Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190905/bca2069a/attachment.html>

From shawn.gong at mdacorporation.com  Thu Sep  5 14:13:31 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Thu, 5 Sep 2019 21:13:31 +0000
Subject: [gdal-dev] gdalwarp -t_srs proj=utm
In-Reply-To: <7DCBC135929FF74E8A5488B1814AC6BC5D49E0D4@exbermd02.ds.mda.ca>
References: <7DCBC135929FF74E8A5488B1814AC6BC5D49E0D4@exbermd02.ds.mda.ca>
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5D49E0E7@exbermd02.ds.mda.ca>

Forgot to mention, this is to reproject from lat/long to UTM.


Thanks,
Shawn
________________________________
From: gdal-dev [gdal-dev-bounces at lists.osgeo.org] on behalf of Gong, Shawn [shawn.gong at mdacorporation.com]
Sent: September-05-19 5:12 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] gdalwarp -t_srs proj=utm

Hi GDAL list,


gdalwarp -t_srs '+proj=utm +zone=XX +datum=WGS84' source.tif result.tif

Is there a way for GDAL to automatically figure out the Zone #, so I don't have to provide XX ?

Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190905/eae37060/attachment.html>

From hellik at web.de  Fri Sep  6 12:44:21 2019
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 6 Sep 2019 12:44:21 -0700 (MST)
Subject: [gdal-dev] =?utf-8?q?geopackage_=C3=B7_gdal_python_tutorial?=
Message-ID: <1567799061953-0.post@n6.nabble.com>

Hi,

as the European Environmental Agency (EEA) is providing more and more data
as geopackages, I have  to rewrite some of my addons e.g. (1).

Beside the nice manual, are there some additional tutorials/wiki/code
snippets around gdal, python and geopackage format?

Thanks!

(1)https://github.com/OSGeo/grass-addons/tree/master/grass7/vector/v.in.natura2000 



-----
best regards
Helmut
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mwtoews at gmail.com  Sun Sep  8 14:35:36 2019
From: mwtoews at gmail.com (Mike Taves)
Date: Mon, 9 Sep 2019 09:35:36 +1200
Subject: [gdal-dev] gdal2tiles missing 'GRA_mode' resample method
In-Reply-To: <e5b4cc25f1ce49e88a3fc0c6b47973d1@VITOMAIL5.vito.local>
References: <e5b4cc25f1ce49e88a3fc0c6b47973d1@VITOMAIL5.vito.local>
Message-ID: <CAM2FmMoH7oySWPhhxfofyNRF0OG0Q8BNOoPBigndfo-C9u1yFg@mail.gmail.com>

On Tue, 27 Aug 2019 at 03:13, Jacobs Tim <tim.jacobs at vito.be> wrote:
> Recently, we were using gdal2tiles.py to build TMS tiles.
> Its code however seems to not support the “mode” resampling
> that is available in other GDAL utilities such as gdalwarp and gdal_translate.
>
> Can this be added to gdal2tiles.py too?

Hi Tim,

This has been addressed with https://github.com/OSGeo/gdal/pull/1817
and should appear in the next release.

Cheers,
Mike

From tim.jacobs at vito.be  Sun Sep  8 23:30:45 2019
From: tim.jacobs at vito.be (Jacobs Tim)
Date: Mon, 9 Sep 2019 06:30:45 +0000
Subject: [gdal-dev] gdal2tiles missing 'GRA_mode' resample method
In-Reply-To: <CAM2FmMoH7oySWPhhxfofyNRF0OG0Q8BNOoPBigndfo-C9u1yFg@mail.gmail.com>
References: <e5b4cc25f1ce49e88a3fc0c6b47973d1@VITOMAIL5.vito.local>
 <CAM2FmMoH7oySWPhhxfofyNRF0OG0Q8BNOoPBigndfo-C9u1yFg@mail.gmail.com>
Message-ID: <ef6447caf65e4ae591e2253b3ddc5d64@VITOMAIL5.vito.local>

Hi Mike

great, thanks a lot!

Tim

-----Original Message-----
From: Mike Taves <mwtoews at gmail.com>
Sent: Sunday, 8 September 2019 23:36
To: Jacobs Tim <tim.jacobs at vito.be>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdal2tiles missing 'GRA_mode' resample method

On Tue, 27 Aug 2019 at 03:13, Jacobs Tim <tim.jacobs at vito.be> wrote:
> Recently, we were using gdal2tiles.py to build TMS tiles.
> Its code however seems to not support the “mode” resampling that is
> available in other GDAL utilities such as gdalwarp and gdal_translate.
>
> Can this be added to gdal2tiles.py too?

Hi Tim,

This has been addressed with https://github.com/OSGeo/gdal/pull/1817
and should appear in the next release.

Cheers,
Mike
Indien u VITO Mol bezoekt, hou aub er dan rekening mee dat de hoofdingang voortaan enkel bereikbaar is vanuit de richting Dessel-Retie, niet vanuit richting Mol, zie vito.be/route.<http://www.vito.be/route>
If you plan to visit VITO at Mol, then please note that the main entrance can only be reached coming from Dessel-Retie and no longer coming from Mol, see vito.be/en/contact/locations.<http://www.vito.be/en/contact/locations>
VITO Disclaimer: http://www.vito.be/e-maildisclaimer

From pedrongvenancio at gmail.com  Mon Sep  9 09:37:05 2019
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Mon, 9 Sep 2019 17:37:05 +0100
Subject: [gdal-dev] CURL error - SSL certificate problem
Message-ID: <CAMCJChtKKahgRAgiypzo0ht35-AvvOes7j2kaMZSs330pitHXw@mail.gmail.com>

Hi,

I'm trying to access Sentinel-2 data in Google Cloud Storage in QGIS, but
I'm getting a SSL certificate problem.

gdalinfo says:

gdalinfo /vsicurl/
https://storage.cloud.google.com/gcp-public-data-sentinel-2/L2/tiles/29/T/PF/S2B_MSIL2A_20190907T112119_N0213_R037_T29TPF_20190907T144322.SAFE/GRANULE/L2A_T29TPF_A013076_20190907T112853/IMG_DATA/R10m/T29TPF_20190907T112119_B02_10m.jp2

ERROR 11: CURL error: SSL certificate problem: unable to get local issuer
certificate
gdalinfo failed - unable to open '/vsicurl/
https://storage.cloud.google.com/gcp-public-data-sentinel-2/L2/tiles/29/T/PF/S2B_MSIL2A_20190907T112119_N0213_R037_T29TPF_20190907T144322.SAFE/GRANULE/L2A_T29TPF_A013076_20190907T112853/IMG_DATA/R10m/T29TPF_20190907T112119_B02_10m.jp2
'.

I'm using gdal from OSGeo4W in Windows:

gdalinfo --version
GDAL 2.4.1, released 2019/03/15

I'm almost sure that this was working some time ago.

Any hint about this issue?

Another question I've is about using /vsigs/ (Google Cloud Storage files).
For that, I need the bucket and the object key.

For Sentinel-2 data stored in Google Cloud Storage, I believe the bucket
name is gcp-public-data-sentinel-2, but I can't find anything about the
object key. What could be the key?

Thank you very much!

Best regards,
Pedro Venâncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190909/99a6e85b/attachment.html>

From tobias.wendorff at tu-dortmund.de  Mon Sep  9 09:47:20 2019
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Mon, 9 Sep 2019 18:47:20 +0200
Subject: [gdal-dev] CURL error - SSL certificate problem
In-Reply-To: <CAMCJChtKKahgRAgiypzo0ht35-AvvOes7j2kaMZSs330pitHXw@mail.gmail.com>
References: <CAMCJChtKKahgRAgiypzo0ht35-AvvOes7j2kaMZSs330pitHXw@mail.gmail.com>
Message-ID: <19a56c295d42635cf3182ba4773afdf1.squirrel@webmail.tu-dortmund.de>

Am Mo, 9.09.2019, 18:37 schrieb Pedro Venâncio:
>
> Any hint about this issue?

Please try to add "--config GDAL_HTTP_UNSAFESSL YES".



From pedrongvenancio at gmail.com  Mon Sep  9 15:41:35 2019
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Mon, 9 Sep 2019 23:41:35 +0100
Subject: [gdal-dev] CURL error - SSL certificate problem
In-Reply-To: <19a56c295d42635cf3182ba4773afdf1.squirrel@webmail.tu-dortmund.de>
References: <CAMCJChtKKahgRAgiypzo0ht35-AvvOes7j2kaMZSs330pitHXw@mail.gmail.com>
 <19a56c295d42635cf3182ba4773afdf1.squirrel@webmail.tu-dortmund.de>
Message-ID: <CAMCJChu3bFxY5ULGL3sBpEyquZdtasT1za=qgwUF8eb=kXSdow@mail.gmail.com>

Hi Tobias,

Disabling https check, it works!

Testing in a Linux environment, with GDAL 2.2.2, I don't have the https
issue, so I assume that the SSL certificates are only checked in versions >
2.2.2, correct?

About the object key for Google Cloud Storage, anyone have an idea?

Thank you very much!

Best regards,
Pedro


Tobias Wendorff <tobias.wendorff at tu-dortmund.de> escreveu no dia segunda,
9/09/2019 à(s) 17:47:

> Am Mo, 9.09.2019, 18:37 schrieb Pedro Venâncio:
> >
> > Any hint about this issue?
>
> Please try to add "--config GDAL_HTTP_UNSAFESSL YES".
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190909/5f5ca677/attachment.html>

From carsten.lockenkoetter at gon.de  Mon Sep  9 23:26:00 2019
From: carsten.lockenkoetter at gon.de (=?utf-8?B?Q2Fyc3RlbiBMb2NrZW5rw7Z0dGVy?=)
Date: Tue, 10 Sep 2019 06:26:00 +0000
Subject: [gdal-dev] GDAL (.NET) coordinate transformation via BETA2007
In-Reply-To: <DB8PR09MB295592ACB99C8D4F683B1DCB97B80@DB8PR09MB2955.eurprd09.prod.outlook.com>
References: <AM0PR09MB2948CBFBD397BD4629808B4897A00@AM0PR09MB2948.eurprd09.prod.outlook.com>
 <AM0PR09MB2948F040FE4CFA1A5E052E0697A00@AM0PR09MB2948.eurprd09.prod.outlook.com>
 <1A8DF958A1AA1E46BDDB48C08CB0DD0001E971FADD@vbrk21mx02.bezreg-koeln.nrw.de>
 <DB8PR09MB295592ACB99C8D4F683B1DCB97B80@DB8PR09MB2955.eurprd09.prod.outlook.com>
Message-ID: <AM0PR09MB2948E3B8C1AB0D1D1FC90D3D97B60@AM0PR09MB2948.eurprd09.prod.outlook.com>

Hi,

a short update to my problem.

Setting AxisMappingStrategy to OAMS_TRADITIONAL_GIS_ORDER it seems to fix my problem. (GDAL 3.0.1)
Transformation from 31466 to 3857 (and reverse) and 4326_3857 (and reverse) returns the same coordinates as FME.

src.SetAxisMappingStrategy(AxisMappingStrategy.OAMS_TRADITIONAL_GIS_ORDER);
dest.SetAxisMappingStrategy(AxisMappingStrategy.OAMS_TRADITIONAL_GIS_ORDER);

Regards,
Carsten

Von: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Im Auftrag von Carsten Lockenkötter
Gesendet: Mittwoch, 4. September 2019 18:46
An: gdal-dev at lists.osgeo.org
Betreff: Re: [gdal-dev] GDAL (.NET) coordinate transformation via BETA2007

I have updated my C# application to use the GDAL 3.0.1 binaries from GISInternals.

Transform via EPSG:
       var src = new SpatialReference("");
       var dest = new SpatialReference("");
       string wkt = "POINT(2575957.917 5728085.530)";
       var geom = Geometry.CreateFromWkt(wkt);
                src.ImportFromEPSG(31466);
       dest.ImportFromEPSG(3857);
       var transform = new CoordinateTransformation(src, dest);
       geom.Transform(transform);
       geom.ExportToWkt(out string outWKT);

// "POINT (3993425.20096133 2326133.24005068)" --> completely wrong

With CPL_DEBUG=ON and PROJ_DEBUG=5, I get following information about this transformation:
[cid:image001.png at 01D567B1.355F5490]

Transform via proj4 string:
       src.ImportFromProj4(@"+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids={absolutePath}\BETA2007.gsb +units=m +no_defs +type=crs");
       dest.ImportFromEPSG(3857);
// "POINT (790104.712949148 6742818.48632016)" --> ok

Transform via proj4 +init (deprecated)
       src.ImportFromProj4("+init=epsg:31466");
       dest.ImportFromEPSG(3857);

// "POINT (790104.712949148 6742818.48632016)" --> ok

[cid:image002.png at 01D567B1.355F5490]

Via CMD:
[cid:image003.png at 01D567B1.355F5490]
--> ok

FME returns:
(790104.7129438451,6742818.485878875)

So transforming via EPSG (source and destination) is using a completely wrong transformation in .NET, right?
But why?

My preferred method to transform is only via EPSG. But what I have to do, that the SpatialReference objects get the right transformation?

Regards,
Carsten

Von: Schmitz, Uwe <uwe.schmitz at bezreg-koeln.nrw.de<mailto:uwe.schmitz at bezreg-koeln.nrw.de>>
Gesendet: Donnerstag, 29. August 2019 10:30
An: Carsten Lockenkötter <carsten.lockenkoetter at gon.de<mailto:carsten.lockenkoetter at gon.de>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Betreff: AW: GDAL (.NET) coordinate transformation via BETA2007

Carsten,

are you shure that the grid is used during transformation?
I know nothing about the C# package, but in my own tests
the “not-found” case was often the cause for wrong results.
So I tend to almost always use an absolute path to
the grid file.
Due to historical reasons gdal silently ignores this error.

Ah, and I see that I put an extra +wktext at the end of the
arguments. Don’t know if it’s still necessary.

Regards
Uwe


Von: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Carsten Lockenkötter
Gesendet: Dienstag, 27. August 2019 14:24
An: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Betreff: [gdal-dev] GDAL (.NET) coordinate transformation via BETA2007

Hello,

because SQLServer can't transform geometries, i have developed a .NET library (C#) that transforms the geometries based on GDAL (NuGet Package GDAL.Native v2.4.2).
In principle, this also works.

If i transform from 31466 to 3857, i have an offset of about 1.5m because gdal transformed via Helmert, not via Beta2007.
If i transform the same geometrie via proj4 string to use my Beta2007.gsb file, i get a completly wrong geometry.

sample code to transform via epsg
Example:

                var inputGeom = "POINT (2529815.8 5642182.4)";

                GdalConfiguration.ConfigureOgr();

                var source = new SpatialReference("");
                var destination = new SpatialReference("");

                source.ImportFromEPSG(31466);
                destination.ImportFromEPSG(3857);

                CoordinateTransformation transform = new CoordinateTransformation(source, destination);
                Geometry ogrGeom = Geometry.CreateFromWkt(inputGeom);
                ogrGeom.Transform(transform);

                ogrGeom.ExportToWkt(out string outGeom);

                return outGeom;

value of outGeom:
                POINT (776704.423009968 6626706.00572367)

if i transform the same geometrie via FME with the CsmapReprojector, i get this (correct) coordinates:
(776702.2109972419,6626706.521023605)

FME used the gridfile Beta2007, GDAL not.
So i tried to transform my geometrie via proj4 string, where I have the possibility to specify the gridfile.
My gridfile Beta2007.gsb is located here: {ProjectRoot}\bin\Debug\gdal\share\Beta2007.gsb

Example:

                var inputGeom = "POINT (2529815.8 5642182.4)";

                GdalConfiguration.ConfigureOgr();

                var source = new SpatialReference("");
                var destination = new SpatialReference("");

                source.ImportFromProj4("+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids=@BETA2007.gsb<mailto:+nadgrids=@BETA2007.gsb>");
                destination.ImportFromEPSG(3857);

                CoordinateTransformation transform = new CoordinateTransformation(source, destination);
                Geometry ogrGeom = Geometry.CreateFromWkt(inputGeom);
                ogrGeom.Transform(transform);

                ogrGeom.ExportToWkt(out string outGeom);

                return outGeom;

value of outGeom:
                POINT (776787.364952423 6626930.71048604)


What i need:
Beta2007 Transformation via EPSG code, but i don't know, where i have to change it.
(optional) if i can't change the transformation via EPSG code via Gridfile, i need to know the correct proj4 string for my transformation.

Best regards,
Carsten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190910/47c55e11/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7138 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190910/47c55e11/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 8933 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190910/47c55e11/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 11316 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190910/47c55e11/attachment-0005.png>

From gfourteener at yahoo.com  Tue Sep 10 14:03:58 2019
From: gfourteener at yahoo.com (G Fourteener)
Date: Tue, 10 Sep 2019 21:03:58 +0000 (UTC)
Subject: [gdal-dev] Importing records from both spreadsheet and gpx files
References: <917326224.87333.1568149438746.ref@mail.yahoo.com>
Message-ID: <917326224.87333.1568149438746@mail.yahoo.com>

Hello,
I have a spreadsheet of records that has a field for the GPX file for each record. I'm able to use ogr2ogr to import the spreadsheet and the GPX files into different layers in a geopackage file. I haven't yet been able to figure out how to combine the two data sources into a single layer, or add a geometry column (and other GPX columns) to the imported spreadsheet layer from the corresponding GPX file. I've also tried using ogrmerge.
The spreadsheet looks like:name, gpx filename, source, date, notes
Thanks,Gerry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190910/b0e7bc5b/attachment.html>

From ahmettemiz88 at gmail.com  Thu Sep 12 00:50:16 2019
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Thu, 12 Sep 2019 10:50:16 +0300
Subject: [gdal-dev] OGRLinestring from two vectors using GDAL C++
Message-ID: <CAJKO1Yt3K5D8AV_rt2o8wRw5f5wK30JYnGAZ-MFb-PNB4B1S9Q@mail.gmail.com>

Hi,

I have two vectors of vx-values and y_values

like vx { 1.1,2.2 ....} and vy { 3.3,55...}

How can I ogrLinestring from these two vectors using GDAL C++ ?

regards

-- 
Ahmet Temiz
Jeoloji Müh.
Afet ve Acil Durum Yönetimi Başkanlığı
Bilgi İşlem  Dairesi Başkanlığı-CBS Grubu


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190912/023d2516/attachment.html>

From mateusz at loskot.net  Thu Sep 12 01:02:32 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 12 Sep 2019 10:02:32 +0200
Subject: [gdal-dev] OGRLinestring from two vectors using GDAL C++
In-Reply-To: <CAJKO1Yt3K5D8AV_rt2o8wRw5f5wK30JYnGAZ-MFb-PNB4B1S9Q@mail.gmail.com>
References: <CAJKO1Yt3K5D8AV_rt2o8wRw5f5wK30JYnGAZ-MFb-PNB4B1S9Q@mail.gmail.com>
Message-ID: <CABUeae_atkmiOQ-=S7b9vG8i2odKOzbdURuGA-bK80Q2xEUZMQ@mail.gmail.com>

On Thu, 12 Sep 2019 at 09:50, Ahmet Temiz <ahmettemiz88 at gmail.com> wrote:
>
> I have two vectors of vx-values and y_values
>
> like vx { 1.1,2.2 ....} and vy { 3.3,55...}
>
> How can I ogrLinestring from these two vectors using GDAL C++ ?

If you browsed the API reference of OGRLineString and
its base class OGRSimpleCurve,
https://gdal.org/doxygen/classOGRSimpleCurve.html,
you would have figured it out in no time:

OGRLineString line;
for (...)
    line.addPoint(vx[i], vy[i]);

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From cdelancy at blackfangtechnologies.com  Fri Sep 13 08:10:29 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Fri, 13 Sep 2019 08:10:29 -0700 (MST)
Subject: [gdal-dev] Procedure for resizing a raster data set
Message-ID: <1568387429373-0.post@n6.nabble.com>

What is the proper procedure for resizing a raster GDALDataSet?

I am using GDAL 3 in a c++ project. The software I am interfacing with
expects raster data to always have dimensions  that are powers of two. What
is the procedure for resizing a data set while leaving its geo-referencing
information intact?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ahmettemiz88 at gmail.com  Tue Sep 17 01:48:59 2019
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Tue, 17 Sep 2019 11:48:59 +0300
Subject: [gdal-dev] merge close linestrings
Message-ID: <CAJKO1YuZANjyvpb_Yy7tmPuTPD+weEwa049foFNAVCJiTM7dQg@mail.gmail.com>

Hi,
Which function can I use to in GDAL / C++ ?

regards


-- 
Ahmet Temiz
Jeoloji Müh.
Afet ve Acil Durum Yönetimi Başkanlığı
Bilgi İşlem  Dairesi Başkanlığı-CBS Grubu


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/08127bfb/attachment.html>

From howard at hobu.co  Tue Sep 17 06:21:33 2019
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Sep 2019 08:21:33 -0500
Subject: [gdal-dev] =?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
Message-ID: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>

All,

I would like to nominate Mateusz Łoskot to the GDAL PSC.

Mateusz has been an active contributor to the GDAL project for nearly fifteen years. He was the very first paid maintainer for the project, closing bugs and running down issues, and his C/C++ expertise has helped the project evolve as it has moved to C++11. He is also very helpful with mailing list questions, and his experience and history with the project make him an excellent candidate for participating in the GDAL PSC.

I'll start with a +1.

Howard

From howard at hobu.co  Tue Sep 17 06:21:37 2019
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Sep 2019 08:21:37 -0500
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
Message-ID: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>

All,

I would like to nominate Sean Gillies to the GDAL PSC.

Sean leads the development of two important Python geospatial projects based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports and design ideas to GDAL while developing those libraries, and he brings nearly twenty years of active open source geospatial software contribution experience with him. His API sensibilities will continue provide invaluable direction and perspective going forward as GDAL continues to (slowly) evolve. 

I'll start with a +1.

Howard

From even.rouault at spatialys.com  Tue Sep 17 06:48:52 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Sep 2019 15:48:52 +0200
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <58106032.n8PCF7X4m4@even-i700>

On mardi 17 septembre 2019 08:21:33 CEST Howard Butler wrote:
> All,
> 
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
> 
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
> 
> I'll start with a +1.

+1 Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Sep 17 06:49:22 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Sep 2019 15:49:22 +0200
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <1580019.ad0gky3TAr@even-i700>

On mardi 17 septembre 2019 08:21:37 CEST you wrote:
> All,
> 
> I would like to nominate Sean Gillies to the GDAL PSC.
> 
> Sean leads the development of two important Python geospatial projects based
> on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports and
> design ideas to GDAL while developing those libraries, and he brings nearly
> twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.

+1 Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Tue Sep 17 06:55:14 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 17 Sep 2019 15:55:14 +0200
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <CACALY+Q_bd8jcia1zcBNvyFG6wA8WHTANSNtVgCka_BF-bjNRg@mail.gmail.com>

+1

Tamas

Howard Butler <howard at hobu.co> ezt írta (időpont: 2019. szept. 17., K,
15:22):

> All,
>
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
>
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/65aa3e21/attachment.html>

From szekerest at gmail.com  Tue Sep 17 06:55:34 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 17 Sep 2019 15:55:34 +0200
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <CACALY+QGxFDL-VJ45HC8OGRhjiYLsUk2xg3J1PHFunPDvhqGfg@mail.gmail.com>

+1

Tamas

Howard Butler <howard at hobu.co> ezt írta (időpont: 2019. szept. 17., K,
15:22):

> All,
>
> I would like to nominate Sean Gillies to the GDAL PSC.
>
> Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/27517e03/attachment.html>

From dmorissette at mapgears.com  Tue Sep 17 07:00:28 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 17 Sep 2019 10:00:28 -0400
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <82f0fc09-c83f-72af-b82c-e93f8fd016ea@mapgears.com>

+1

Daniel


On 2019-09-17 09:21, Howard Butler wrote:
> All,
> 
> I would like to nominate Sean Gillies to the GDAL PSC.
> 
> Sean leads the development of two important Python geospatial projects based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports and design ideas to GDAL while developing those libraries, and he brings nearly twenty years of active open source geospatial software contribution experience with him. His API sensibilities will continue provide invaluable direction and perspective going forward as GDAL continues to (slowly) evolve.
> 
> I'll start with a +1.
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From dmorissette at mapgears.com  Tue Sep 17 07:00:16 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 17 Sep 2019 10:00:16 -0400
Subject: [gdal-dev]
 =?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
 =?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <eecb8e8b-b758-c5ae-5562-b355cd530a3b@mapgears.com>

+1

Daniel

On 2019-09-17 09:21, Howard Butler wrote:
> All,
> 
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
> 
> Mateusz has been an active contributor to the GDAL project for nearly fifteen years. He was the very first paid maintainer for the project, closing bugs and running down issues, and his C/C++ expertise has helped the project evolve as it has moved to C++11. He is also very helpful with mailing list questions, and his experience and history with the project make him an excellent candidate for participating in the GDAL PSC.
> 
> I'll start with a +1.
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From norman.barker at gmail.com  Tue Sep 17 07:58:27 2019
From: norman.barker at gmail.com (Norman Barker)
Date: Tue, 17 Sep 2019 09:58:27 -0500
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <82f0fc09-c83f-72af-b82c-e93f8fd016ea@mapgears.com>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
 <82f0fc09-c83f-72af-b82c-e93f8fd016ea@mapgears.com>
Message-ID: <CAN_Dn-FuRo-off2SgD9iAjwC0ESpFF49JgRa=xOEwv9TevgpOQ@mail.gmail.com>

+1
Norman

On Tue, Sep 17, 2019 at 9:07 AM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
>
> On 2019-09-17 09:21, Howard Butler wrote:
> > All,
> >
> > I would like to nominate Sean Gillies to the GDAL PSC.
> >
> > Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
> >
> > I'll start with a +1.
> >
> > Howard
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/a43f744b/attachment.html>

From warmerdam at pobox.com  Tue Sep 17 08:28:21 2019
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 17 Sep 2019 11:28:21 -0400
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <CA+YzLBenQCZmPaZ8DuV0A8P9jBA0_H67F8BE=O216_XUK3izGw@mail.gmail.com>

+1 Frank

On Tue, Sep 17, 2019 at 9:22 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Sean Gillies to the GDAL PSC.
>
> Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows |
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/fac026ab/attachment.html>

From warmerdam at pobox.com  Tue Sep 17 08:29:52 2019
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 17 Sep 2019 11:29:52 -0400
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <CA+YzLBe0RA8y2w4GQoFKpqvXGwihcq-hgf0jihTBt0j00pXsaw@mail.gmail.com>

+1 Frank

On Tue, Sep 17, 2019 at 9:21 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
>
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows |
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/9e386aa5/attachment.html>

From schwehr at gmail.com  Tue Sep 17 09:11:30 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 17 Sep 2019 09:11:30 -0700
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <CACmBxys+3sr7Y_mtM-kunuqJqM25RTz6kstQ5D35t0tSQM090Q@mail.gmail.com>

+1 Kurt

On Tue, Sep 17, 2019 at 6:22 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
>
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/073b4e6f/attachment.html>

From schwehr at gmail.com  Tue Sep 17 09:11:59 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 17 Sep 2019 09:11:59 -0700
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <CACmBxyuLsT-qfZe4vJ8JPXmsDs9VTnO2YZT9DNoLUOYv698Etw@mail.gmail.com>

+1 Kurt

On Tue, Sep 17, 2019 at 6:22 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Sean Gillies to the GDAL PSC.
>
> Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190917/c68eadf0/attachment-0001.html>

From senhor.neto at gmail.com  Wed Sep 18 02:00:51 2019
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 18 Sep 2019 10:00:51 +0100
Subject: [gdal-dev] Calculations with uint16 rasters
Message-ID: <CA+H0G_E0Vg58CG5Y5-07kjxGV1VCHymJ1Xh4G15HuD2KXWAXrg@mail.gmail.com>

Hi,

I am new to this list so sorry if this has ever been asked or discussed.

I am using two sentinel bands in gdal_calc. they are in jp2 format and
uint16. I was surprised that subtracting one for the other (A - B) was
giving me strange results.

gdal_calc.py --calc "(A-B)" --format GTiff --type Float32 -A
/home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_20170513T172301_B08_10m.jp2
--A_band 1 -B
/home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_20170513T172301_B04_10m.jp2
--B_band 1 --outfile
/tmp/processing_90d61cb0e2a74784a9fcf4b11f9fd7dc/9945d3aec4a749d98f2a3d14694abe16/OUTPUT.tif

The result only returns positive integers, and the integers scale seems
shifted to accommodate the negative values to something above 0.

Strangely the fix comes by multiplying the values by 0.1. So (A*1.0 -
B*0.1) works as expected.

Is this a known issue? Is it the expected behavior?

Thanks,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/ab0eee3d/attachment.html>

From norman.barker at gmail.com  Wed Sep 18 02:17:02 2019
From: norman.barker at gmail.com (Norman Barker)
Date: Wed, 18 Sep 2019 04:17:02 -0500
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <CACmBxys+3sr7Y_mtM-kunuqJqM25RTz6kstQ5D35t0tSQM090Q@mail.gmail.com>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
 <CACmBxys+3sr7Y_mtM-kunuqJqM25RTz6kstQ5D35t0tSQM090Q@mail.gmail.com>
Message-ID: <CAN_Dn-GMA-M0KTZKO7Ln585nP1Qg=PwM+iSaAkASqV8iJ_w6Rg@mail.gmail.com>

+1 Norman

On Tue, Sep 17, 2019 at 11:11 AM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 Kurt
>
> On Tue, Sep 17, 2019 at 6:22 AM Howard Butler <howard at hobu.co> wrote:
>
>> All,
>>
>> I would like to nominate Mateusz Łoskot to the GDAL PSC.
>>
>> Mateusz has been an active contributor to the GDAL project for nearly
>> fifteen years. He was the very first paid maintainer for the project,
>> closing bugs and running down issues, and his C/C++ expertise has helped
>> the project evolve as it has moved to C++11. He is also very helpful with
>> mailing list questions, and his experience and history with the project
>> make him an excellent candidate for participating in the GDAL PSC.
>>
>> I'll start with a +1.
>>
>> Howard
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/b388b861/attachment.html>

From even.rouault at spatialys.com  Wed Sep 18 02:19:09 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Sep 2019 11:19:09 +0200
Subject: [gdal-dev] Calculations with uint16 rasters
In-Reply-To: <CA+H0G_E0Vg58CG5Y5-07kjxGV1VCHymJ1Xh4G15HuD2KXWAXrg@mail.gmail.com>
References: <CA+H0G_E0Vg58CG5Y5-07kjxGV1VCHymJ1Xh4G15HuD2KXWAXrg@mail.gmail.com>
Message-ID: <5017126.BPZUUCJt8b@even-i700>

On mercredi 18 septembre 2019 10:00:51 CEST Alexandre Neto wrote:
> Hi,
> 
> I am new to this list so sorry if this has ever been asked or discussed.
> 
> I am using two sentinel bands in gdal_calc. they are in jp2 format and
> uint16. I was surprised that subtracting one for the other (A - B) was
> giving me strange results.
> 
> gdal_calc.py --calc "(A-B)" --format GTiff --type Float32 -A
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> 20170513T172301_B08_10m.jp2 --A_band 1 -B
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> 20170513T172301_B04_10m.jp2 --B_band 1 --outfile
> /tmp/processing_90d61cb0e2a74784a9fcf4b11f9fd7dc/9945d3aec4a749d98f2a3d14694
> abe16/OUTPUT.tif
> 
> The result only returns positive integers, and the integers scale seems
> shifted to accommodate the negative values to something above 0.
> 
> Strangely the fix comes by multiplying the values by 0.1. So (A*1.0 -
> B*0.1) works as expected.
> 
> Is this a known issue? Is it the expected behavior?

It's kind of expected given how NumPy works, but a lot of people get into this 
trap.

Instead of multiplying by 1, you can also do A.astype(numpy.float32). This 
should be marginally faster.

This is very much the same as doing in C/C++

unsigned int A = 1;
unsigned int B = 2;
float C = A - B;

C will be 4294967296 (initialy I used 'unsigned short' for A and B, and I got 
-1 as the result, because in C/C++, when there's an arithmetic operation on 
types smaller than int, the operand get promoted to int first, which is 
signed)

We could possibly modify gdal_calc to grab the input raster on the specified 
output type, but I'm not completely sure this is a good idea, as there could 
be use cases where people would want the initial data type to be preserved.

But feel free to suggest a hint in the documentation of
https://gdal.org/programs/gdal_calc.html
I'd suggest both a note in the doc of the --type switch, and add an example 
similar to yours at the end.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 18 02:59:27 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 18 Sep 2019 02:59:27 -0700 (MST)
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <1568800767904-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From senhor.neto at gmail.com  Wed Sep 18 02:59:18 2019
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 18 Sep 2019 10:59:18 +0100
Subject: [gdal-dev] Calculations with uint16 rasters
In-Reply-To: <5017126.BPZUUCJt8b@even-i700>
References: <CA+H0G_E0Vg58CG5Y5-07kjxGV1VCHymJ1Xh4G15HuD2KXWAXrg@mail.gmail.com>
 <5017126.BPZUUCJt8b@even-i700>
Message-ID: <CA+H0G_Fr=xQOPbqs69xz1sEZ6oC6a2fq3iwY5ncT6wC2M2CrMQ@mail.gmail.com>

hi Even,

If you think it's better to keep it that way, let's leave it as it is. :-)

I will definitely try to add that as a hint to the docs. Not sure if that's
how you guys work, but I have created an issue for that taks:

https://github.com/OSGeo/gdal/issues/1848

Thanks for the fast answer.

Alex

On Wed, Sep 18, 2019 at 10:19 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 18 septembre 2019 10:00:51 CEST Alexandre Neto wrote:
> > Hi,
> >
> > I am new to this list so sorry if this has ever been asked or discussed.
> >
> > I am using two sentinel bands in gdal_calc. they are in jp2 format and
> > uint16. I was surprised that subtracting one for the other (A - B) was
> > giving me strange results.
> >
> > gdal_calc.py --calc "(A-B)" --format GTiff --type Float32 -A
> >
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> >
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> > 20170513T172301_B08_10m.jp2 --A_band 1 -B
> >
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> >
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> > 20170513T172301_B04_10m.jp2 --B_band 1 --outfile
> >
> /tmp/processing_90d61cb0e2a74784a9fcf4b11f9fd7dc/9945d3aec4a749d98f2a3d14694
> > abe16/OUTPUT.tif
> >
> > The result only returns positive integers, and the integers scale seems
> > shifted to accommodate the negative values to something above 0.
> >
> > Strangely the fix comes by multiplying the values by 0.1. So (A*1.0 -
> > B*0.1) works as expected.
> >
> > Is this a known issue? Is it the expected behavior?
>
> It's kind of expected given how NumPy works, but a lot of people get into
> this
> trap.
>
> Instead of multiplying by 1, you can also do A.astype(numpy.float32). This
> should be marginally faster.
>
> This is very much the same as doing in C/C++
>
> unsigned int A = 1;
> unsigned int B = 2;
> float C = A - B;
>
> C will be 4294967296 (initialy I used 'unsigned short' for A and B, and I
> got
> -1 as the result, because in C/C++, when there's an arithmetic operation
> on
> types smaller than int, the operand get promoted to int first, which is
> signed)
>
> We could possibly modify gdal_calc to grab the input raster on the
> specified
> output type, but I'm not completely sure this is a good idea, as there
> could
> be use cases where people would want the initial data type to be preserved.
>
> But feel free to suggest a hint in the documentation of
> https://gdal.org/programs/gdal_calc.html
> I'd suggest both a note in the doc of the --type switch, and add an
> example
> similar to yours at the end.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/9d452de0/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 18 03:00:28 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 18 Sep 2019 03:00:28 -0700 (MST)
Subject: [gdal-dev]
 =?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
 =?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <1568800828892-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Howard Butler-3 wrote
> All,
> 
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
> 
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
> 
> I'll start with a +1.
> 
> Howard





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrey.kiselev at gmail.com  Wed Sep 18 06:21:51 2019
From: andrey.kiselev at gmail.com (Andrey Kiselev)
Date: Wed, 18 Sep 2019 16:21:51 +0300
Subject: [gdal-dev] Withdraw Andrey Kiselev from GDAL PSC
Message-ID: <CAJDcFN3yvVdNOGTLfWZzzU9v=uxL=2M=HsWXNif0wSM-54+bfA@mail.gmail.com>

Hi all,

I would like to withdraw myself from GDAL PSC as I have little
possibilities to take a part in project related discussions and decision
making. I didn't vote for a long time and hardly useful now as a member of
PSC. I am still working with GDAL as my primary tool but mostly
concentrating on practical applications and scientific tasks than on
software development.

As a final vote I am adding my +1 for both Mateusz Łoskot and Sean Gillies
for their PSC nomination.

Best regards,
Andrey

-- 
Andrey V. Kiselev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/47568f18/attachment-0001.html>

From andrey.kiselev at gmail.com  Wed Sep 18 06:22:35 2019
From: andrey.kiselev at gmail.com (Andrey Kiselev)
Date: Wed, 18 Sep 2019 16:22:35 +0300
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <CAJDcFN0aXNo=FxsOBmuLy=+sWZi0cjXrKjvn0hau2EKGgAnmog@mail.gmail.com>

+1

On Tue, Sep 17, 2019 at 4:21 PM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
>
> Mateusz has been an active contributor to the GDAL project for nearly
> fifteen years. He was the very first paid maintainer for the project,
> closing bugs and running down issues, and his C/C++ expertise has helped
> the project evolve as it has moved to C++11. He is also very helpful with
> mailing list questions, and his experience and history with the project
> make him an excellent candidate for participating in the GDAL PSC.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Andrey V. Kiselev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/3cb1adad/attachment.html>

From andrey.kiselev at gmail.com  Wed Sep 18 06:23:03 2019
From: andrey.kiselev at gmail.com (Andrey Kiselev)
Date: Wed, 18 Sep 2019 16:23:03 +0300
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <CAJDcFN1aU4eekPBmymSTpr_Vj2a8++g3Ojzkw=i8B9GtUS4anQ@mail.gmail.com>

+1

On Tue, Sep 17, 2019 at 4:22 PM Howard Butler <howard at hobu.co> wrote:

> All,
>
> I would like to nominate Sean Gillies to the GDAL PSC.
>
> Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
>
> I'll start with a +1.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Andrey V. Kiselev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/5f2d1741/attachment.html>

From pedrongvenancio at gmail.com  Wed Sep 18 06:25:20 2019
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Wed, 18 Sep 2019 14:25:20 +0100
Subject: [gdal-dev] Calculations with uint16 rasters
In-Reply-To: <5017126.BPZUUCJt8b@even-i700>
References: <CA+H0G_E0Vg58CG5Y5-07kjxGV1VCHymJ1Xh4G15HuD2KXWAXrg@mail.gmail.com>
 <5017126.BPZUUCJt8b@even-i700>
Message-ID: <CAMCJChu5LiNSUhnyrQPQZNo_x5KotrPNOzxfM_Xws4-VN2h92g@mail.gmail.com>

Hi Even,

> We could possibly modify gdal_calc to grab the input raster on the
specified
> output type, but I'm not completely sure this is a good idea, as there
could
> be use cases where people would want the initial data type to be
preserved.

I think this should be considered at some time.

Of course this can break some current workflows, but that can be overcome,
adding a wildcard to --type=<datatype> to 'Keep the input datatype', and
keeping that option as the default.

Python itself already changed that behaviour in v3:

Python 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 20:25:58) [MSC v.1500 64
bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> A=1
>>> B=2
>>> A-B
-1
>>> A/B
0

Python 3.7.0 (v3.7.0:1bf9cc5093, Jun 27 2018, 04:59:51) [MSC v.1914 64 bit
(AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> A=1
>>> B=2
>>> A-B
-1
>>> A/B
0.5

and so, I believe it can be done with gdal_calc.

If a user choose a --type=Float32, it's almost sure that he wants the
result as a decimal with a considerable level of precision, and the cast of
the inputs should be done. If the user want the initial data type be
preserved, he could simply omit the --type parameter, and 'Keep the input
datatype' option was applied.

I think this would be more coherent and more understandable for users less
used to computer languages.

Thank you very much!

Best regards,
Pedro Venâncio

Even Rouault <even.rouault at spatialys.com> escreveu no dia quarta,
18/09/2019 à(s) 10:19:

> On mercredi 18 septembre 2019 10:00:51 CEST Alexandre Neto wrote:
> > Hi,
> >
> > I am new to this list so sorry if this has ever been asked or discussed.
> >
> > I am using two sentinel bands in gdal_calc. they are in jp2 format and
> > uint16. I was surprised that subtracting one for the other (A - B) was
> > giving me strange results.
> >
> > gdal_calc.py --calc "(A-B)" --format GTiff --type Float32 -A
> >
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> >
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> > 20170513T172301_B08_10m.jp2 --A_band 1 -B
> >
> /home/aneto/ARSI/data/S2A_MSIL2A_20170513T172301_N9999_R012_T14TPP_20190912T
> >
> 155528.SAFE/GRANULE/L2A_T14TPP_A009876_20170513T172257/IMG_DATA/R10m/T14TPP_
> > 20170513T172301_B04_10m.jp2 --B_band 1 --outfile
> >
> /tmp/processing_90d61cb0e2a74784a9fcf4b11f9fd7dc/9945d3aec4a749d98f2a3d14694
> > abe16/OUTPUT.tif
> >
> > The result only returns positive integers, and the integers scale seems
> > shifted to accommodate the negative values to something above 0.
> >
> > Strangely the fix comes by multiplying the values by 0.1. So (A*1.0 -
> > B*0.1) works as expected.
> >
> > Is this a known issue? Is it the expected behavior?
>
> It's kind of expected given how NumPy works, but a lot of people get into
> this
> trap.
>
> Instead of multiplying by 1, you can also do A.astype(numpy.float32). This
> should be marginally faster.
>
> This is very much the same as doing in C/C++
>
> unsigned int A = 1;
> unsigned int B = 2;
> float C = A - B;
>
> C will be 4294967296 (initialy I used 'unsigned short' for A and B, and I
> got
> -1 as the result, because in C/C++, when there's an arithmetic operation
> on
> types smaller than int, the operand get promoted to int first, which is
> signed)
>
> We could possibly modify gdal_calc to grab the input raster on the
> specified
> output type, but I'm not completely sure this is a good idea, as there
> could
> be use cases where people would want the initial data type to be preserved.
>
> But feel free to suggest a hint in the documentation of
> https://gdal.org/programs/gdal_calc.html
> I'd suggest both a note in the doc of the --type switch, and add an
> example
> similar to yours at the end.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190918/1ab8135e/attachment.html>

From even.rouault at spatialys.com  Wed Sep 18 06:43:27 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Sep 2019 15:43:27 +0200
Subject: [gdal-dev] Withdraw Andrey Kiselev from GDAL PSC
In-Reply-To: <CAJDcFN3yvVdNOGTLfWZzzU9v=uxL=2M=HsWXNif0wSM-54+bfA@mail.gmail.com>
References: <CAJDcFN3yvVdNOGTLfWZzzU9v=uxL=2M=HsWXNif0wSM-54+bfA@mail.gmail.com>
Message-ID: <1656374.dDmsBP3aEM@even-i700>

Andrey,

We take note of your decision.
On behalf of the GDAL community, I'd like to thank you for your past 
contributions to the project, and we'll always welcome your input.

Best regards,

Even

> Hi all,
> 
> I would like to withdraw myself from GDAL PSC as I have little
> possibilities to take a part in project related discussions and decision
> making. I didn't vote for a long time and hardly useful now as a member of
> PSC. I am still working with GDAL as my primary tool but mostly
> concentrating on practical applications and scientific tasks than on
> software development.
> 
> As a final vote I am adding my +1 for both Mateusz Łoskot and Sean Gillies
> for their PSC nomination.
> 
> Best regards,
> Andrey


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From klaus.braun at geographie.uni-freiburg.de  Thu Sep 19 06:08:48 2019
From: klaus.braun at geographie.uni-freiburg.de (Klaus Braun)
Date: Thu, 19 Sep 2019 15:08:48 +0200
Subject: [gdal-dev] Different results for osr.CoordinateTransformation()
 when using gdal 3.0.1 and 2.4.2 python bindings and transform to EPSG:4326
Message-ID: <622bf86f-48c8-401b-57a0-1e9a2745a764@geographie.uni-freiburg.de>

Hi,

on my SUSE box I compiled gdal 2.4.2 and 3.0.1 in the same way, enabling python
bindings.

When I use osr.CoordinateTransformation() in my python script to do a coordinate
transformation from a point to EPSG 4326 the resulting coordinates are swaped if
I use gdal 3.0.1 python bindings.

Any idea what might be the problem in this case?

Regards

Klaus



Example
-------

import sys

#
# Select GDAL version
#
sys.path.insert(0,'/usr/local/gdal/lib64/python2.7/site-packages/GDAL-2.4.2-py2.7-linux-x86_64.egg')
##sys.path.insert(0,'/usr/local/gdal-3.0.1/lib64/python2.7/site-packages/GDAL-3.0.1-py2.7-linux-x86_64.egg')

from osgeo import gdal
from osgeo import ogr
from osgeo import osr

print "GDAL Version: " + str(gdal.__version__)

target = osr.SpatialReference()
target.ImportFromEPSG(4326)

source = osr.SpatialReference()
source.ImportFromEPSG(3857)

transform = osr.CoordinateTransformation(source, target)

#
# Lower left point of EPSG 3857 bounding box
#
point = ogr.CreateGeometryFromWkt("POINT (-20026376.39 -20048966.10)")
point.Transform(transform)

print point.ExportToWkt()


Results
-------

GDAL Version: 2.4.2
POINT (-179.899999966673 -85.0599999968944)

GDAL Version: 3.0.1
POINT (-85.0599999968945 -179.899999966673)




-- 
Dr. Klaus Braun
Albert-Ludwigs-Universität
Physische Geographie
Schreiberstr. 20, D-79085 Freiburg, Germany
phone: ++49 (0)761 203-9223
http://geographie.uni-freiburg.de/

From even.rouault at spatialys.com  Thu Sep 19 08:24:01 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Sep 2019 17:24:01 +0200
Subject: [gdal-dev] Different results for osr.CoordinateTransformation()
	when using gdal 3.0.1 and 2.4.2 python bindings and transform
	to EPSG:4326
In-Reply-To: <622bf86f-48c8-401b-57a0-1e9a2745a764@geographie.uni-freiburg.de>
References: <622bf86f-48c8-401b-57a0-1e9a2745a764@geographie.uni-freiburg.de>
Message-ID: <4543349.NgDL3iWkTR@even-i700>

On jeudi 19 septembre 2019 15:08:48 CEST Klaus Braun wrote:
> Hi,
> 
> on my SUSE box I compiled gdal 2.4.2 and 3.0.1 in the same way, enabling
> python bindings.
> 
> When I use osr.CoordinateTransformation() in my python script to do a
> coordinate transformation from a point to EPSG 4326 the resulting
> coordinates are swaped if I use gdal 3.0.1 python bindings.
> 
> Any idea what might be the problem in this case?

https://github.com/OSGeo/gdal/blob/release/3.0/gdal/MIGRATION_GUIDE.TXT

"""
 Substantial changes, sometimes backward incompatible, in coordinate reference
  system and coordinate transformations have been introduced per
  https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
    * OSRImportFromEPSG() takes into account official axis order.
      Traditional GIS-friendly axis order can be restored with
      OGRSpatialReference::SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER);
"""

In Python if srs is a osr.SpatialReference object

srs.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Thu Sep 19 08:26:02 2019
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 19 Sep 2019 09:26:02 -0600
Subject: [gdal-dev] Different results for osr.CoordinateTransformation()
 when using gdal 3.0.1 and 2.4.2 python bindings and transform to EPSG:4326
In-Reply-To: <622bf86f-48c8-401b-57a0-1e9a2745a764@geographie.uni-freiburg.de>
References: <622bf86f-48c8-401b-57a0-1e9a2745a764@geographie.uni-freiburg.de>
Message-ID: <CADPhZXwN8fRM+rHr2SzJo_2qUuzonj=Z_9N-CxKtH8Mc30pcBg@mail.gmail.com>

Hi,

On Thu, Sep 19, 2019 at 8:31 AM Klaus Braun <
klaus.braun at geographie.uni-freiburg.de> wrote:

> Hi,
>
> on my SUSE box I compiled gdal 2.4.2 and 3.0.1 in the same way, enabling
> python
> bindings.
>
> When I use osr.CoordinateTransformation() in my python script to do a
> coordinate
> transformation from a point to EPSG 4326 the resulting coordinates are
> swaped if
> I use gdal 3.0.1 python bindings.
>
> Any idea what might be the problem in this case?
>
> Regards
>
> Klaus
>

GDAL 3 has a big change for coordinate transformations, See


https://gdal.org/development/rfc/rfc73_proj6_wkt2_srsbarn.html#axis-order-issues

The gist of it is you need to
call SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER) on your spatial
reference objects to preserve the behavior seen in GDAL 2.4.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190919/9e78316b/attachment.html>

From howard at hobu.co  Thu Sep 19 08:58:55 2019
From: howard at hobu.co (Howard Butler)
Date: Thu, 19 Sep 2019 10:58:55 -0500
Subject: [gdal-dev]
 =?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
 =?utf-8?q?AL_PSC?=
In-Reply-To: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
Message-ID: <E7FCF6EA-A0C8-4DC3-920A-36DCBFE1EE4B@hobu.co>

Declaring this motion passed with +1's from

Howard, Even, Norman, Andrey, Tamas, Daniel, Jukka, Frank, and Kurt

Welcome to the PSC Mateusz!

Howard

> On Sep 17, 2019, at 8:21 AM, Howard Butler <howard at hobu.co> wrote:
> 
> All,
> 
> I would like to nominate Mateusz Łoskot to the GDAL PSC.
> 
> Mateusz has been an active contributor to the GDAL project for nearly fifteen years. He was the very first paid maintainer for the project, closing bugs and running down issues, and his C/C++ expertise has helped the project evolve as it has moved to C++11. He is also very helpful with mailing list questions, and his experience and history with the project make him an excellent candidate for participating in the GDAL PSC.
> 
> I'll start with a +1.
> 
> Howard


From howard at hobu.co  Thu Sep 19 08:58:59 2019
From: howard at hobu.co (Howard Butler)
Date: Thu, 19 Sep 2019 10:58:59 -0500
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
Message-ID: <B2AE5323-DEC7-4886-B280-5E1186B0DFA0@hobu.co>

Declaring this motion passed with +1's from

Howard, Even, Norman, Andrey, Tamas, Daniel, Jukka, Frank, and Kurt

Welcome to the PSC Sean!

Howard

> On Sep 17, 2019, at 8:21 AM, Howard Butler <howard at hobu.co> wrote:
> 
> All,
> 
> I would like to nominate Sean Gillies to the GDAL PSC.
> 
> Sean leads the development of two important Python geospatial projects based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports and design ideas to GDAL while developing those libraries, and he brings nearly twenty years of active open source geospatial software contribution experience with him. His API sensibilities will continue provide invaluable direction and perspective going forward as GDAL continues to (slowly) evolve. 
> 
> I'll start with a +1.
> 
> Howard


From mateusz at loskot.net  Thu Sep 19 09:46:22 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 19 Sep 2019 18:46:22 +0200
Subject: [gdal-dev]
	=?utf-8?q?Nomination_of_Mateusz_=C5=81oskot_for_the_GD?=
	=?utf-8?q?AL_PSC?=
In-Reply-To: <E7FCF6EA-A0C8-4DC3-920A-36DCBFE1EE4B@hobu.co>
References: <A118C1E7-5535-4D7C-9638-B6ACD92AF329@hobu.co>
 <E7FCF6EA-A0C8-4DC3-920A-36DCBFE1EE4B@hobu.co>
Message-ID: <CABUeae9E7648DZCSVbuebi5VyQsuqNdXAoKyU2kbjB_dfbfmeg@mail.gmail.com>

I'm honoured. Thank you all for your trust.

Best regards,
Mateusz

On Thu, 19 Sep 2019 at 17:59, Howard Butler <howard at hobu.co> wrote:
>
> Declaring this motion passed with +1's from
>
> Howard, Even, Norman, Andrey, Tamas, Daniel, Jukka, Frank, and Kurt
>
> Welcome to the PSC Mateusz!
>
> Howard
>
> > On Sep 17, 2019, at 8:21 AM, Howard Butler <howard at hobu.co> wrote:
> >
> > All,
> >
> > I would like to nominate Mateusz Łoskot to the GDAL PSC.
> >
> > Mateusz has been an active contributor to the GDAL project for nearly fifteen years. He was the very first paid maintainer for the project, closing bugs and running down issues, and his C/C++ expertise has helped the project evolve as it has moved to C++11. He is also very helpful with mailing list questions, and his experience and history with the project make him an excellent candidate for participating in the GDAL PSC.
> >
> > I'll start with a +1.
> >
> > Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From sean at mapbox.com  Thu Sep 19 11:10:18 2019
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 19 Sep 2019 12:10:18 -0600
Subject: [gdal-dev] Nomination of Sean Gillies for the GDAL PSC
In-Reply-To: <B2AE5323-DEC7-4886-B280-5E1186B0DFA0@hobu.co>
References: <C1E13B36-743D-4AC4-AC83-F4B01174C0D1@hobu.co>
 <B2AE5323-DEC7-4886-B280-5E1186B0DFA0@hobu.co>
Message-ID: <CADPhZXwm5ypmac9KrWSie3-=4rm-=83N3jTNpEZLq2S18D1wcw@mail.gmail.com>

I'm honored! Thank you very much, everybody.

On Thu, Sep 19, 2019 at 9:59 AM Howard Butler <howard at hobu.co> wrote:

> Declaring this motion passed with +1's from
>
> Howard, Even, Norman, Andrey, Tamas, Daniel, Jukka, Frank, and Kurt
>
> Welcome to the PSC Sean!
>
> Howard
>
> > On Sep 17, 2019, at 8:21 AM, Howard Butler <howard at hobu.co> wrote:
> >
> > All,
> >
> > I would like to nominate Sean Gillies to the GDAL PSC.
> >
> > Sean leads the development of two important Python geospatial projects
> based on GDAL/OGR – rasterio and Fiona. He has contributed many bug reports
> and design ideas to GDAL while developing those libraries, and he brings
> nearly twenty years of active open source geospatial software contribution
> experience with him. His API sensibilities will continue provide invaluable
> direction and perspective going forward as GDAL continues to (slowly)
> evolve.
> >
> > I'll start with a +1.
> >
> > Howard
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190919/a6215e84/attachment.html>

From idan at miara.com  Sun Sep 22 07:46:59 2019
From: idan at miara.com (Idan Miara)
Date: Sun, 22 Sep 2019 17:46:59 +0300
Subject: [gdal-dev] Raster/vector storing and processing in micro services
	efficiently?
Message-ID: <CAEDrt3_r5T7-f=WRd2CGQU-56-CjW-uzORC+nyUGobWJvxOPbQ@mail.gmail.com>

Hi,

I'm developing a system that creates, processes and consumes rasters and
vectors. For instance, the user runs a computation that ouputs a few
rasters and vectors, later he could choose some of the output rasters and
the next process will combine the selected rasters into a new raster or
vector, which will be presented to the user.

Currently most of the processing is done in a single application,
everything is held in memory and only import/export the data to files as
necessary. it works very fast and efficient.

I'm would like to break the system into micro services and wanted to make
sure that there won't be a great performance degradation by moving the
rasters from/to databases and with the network protocols overhead.

Would you consider PostGIS or other tools? any pointers for minimising
traffic or overhead? best practices?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190922/7c3d5783/attachment.html>

From mateusz at loskot.net  Sun Sep 22 12:52:33 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 22 Sep 2019 21:52:33 +0200
Subject: [gdal-dev] Raster/vector storing and processing in micro
	services efficiently?
In-Reply-To: <CAEDrt3_r5T7-f=WRd2CGQU-56-CjW-uzORC+nyUGobWJvxOPbQ@mail.gmail.com>
References: <CAEDrt3_r5T7-f=WRd2CGQU-56-CjW-uzORC+nyUGobWJvxOPbQ@mail.gmail.com>
Message-ID: <CABUeae-+J92Nz=m=HEdSaVGyW1Gme+eFBRfJcABZe6pgNgToYQ@mail.gmail.com>

On Sun, 22 Sep 2019, 16:47 Idan Miara, <idan at miara.com> wrote:

> Hi,
>
> I'm developing a system that creates, processes and consumes rasters and
> vectors.  (...)
>
I'm would like to break the system into micro services
>

You may find some inspirations at https://iiif.io.
The community is quite active on their Slack space, good place to ask
questions.

Best regards,
-- 
Mateusz Loskot, mateusz at loskot.net
(Sent from mobile, may suffer from top-posting)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190922/b750022c/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Sep 23 10:26:47 2019
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 23 Sep 2019 17:26:47 +0000
Subject: [gdal-dev] Gdalbuildvrt does not read *.tif
Message-ID: <c3718e27de7343799c397032cb35a146@C119S212VM042.msvyvi.vaha.local>

Hi,

On Windows, with GDAL 3.1.0dev, released 2019/99/99, downloaded today from gisinternals http://download.gisinternals.com/sdk/downloads/release-1911-x64-gdal-mapserver.zip the gdalbuildvrt utility does not read a list of files with "*.tif". Instead happens this

gdalbuildvrt test.vrt *.tif
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 4: `*.tif' does not exist in the file system, and is not recognized as a supported dataset name.

Despite the 0 to 100 progress and -done messages no vrt file is written. With GDAL 2.4.1 from OSGeo4W the command works. I wonder if the failure is due to GDAL 3.1 or due to gisinternals packaging.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190923/b8bb31d0/attachment.html>

From even.rouault at spatialys.com  Mon Sep 23 10:56:52 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Sep 2019 19:56:52 +0200
Subject: [gdal-dev] Gdalbuildvrt does not read *.tif
In-Reply-To: <c3718e27de7343799c397032cb35a146@C119S212VM042.msvyvi.vaha.local>
References: <c3718e27de7343799c397032cb35a146@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1739103.Ql0f6kFSZp@even-i700>

On lundi 23 septembre 2019 17:26:47 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> On Windows, with GDAL 3.1.0dev, released 2019/99/99, downloaded today from
> gisinternals
> http://download.gisinternals.com/sdk/downloads/release-1911-x64-gdal-mapser
> ver.zip the gdalbuildvrt utility does not read a list of files with "*.tif".
> Instead happens this
> 
> gdalbuildvrt test.vrt *.tif
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 4: `*.tif' does not exist in the file system, and is not recognized as
> a supported dataset name.
> 
> Despite the 0 to 100 progress and -done messages no vrt file is written.
> With GDAL 2.4.1 from OSGeo4W the command works. I wonder if the failure is
> due to GDAL 3.1 or due to gisinternals packaging.

Looks pretty much as https://github.com/OSGeo/gdal/issues/1749

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gaurav.mam91 at gmail.com  Tue Sep 24 05:25:13 2019
From: gaurav.mam91 at gmail.com (gauravmam)
Date: Tue, 24 Sep 2019 05:25:13 -0700 (MST)
Subject: [gdal-dev] Native library load failed while using gdal maven
 dependency - UnsatisfiedLinkError
In-Reply-To: <1455114558084-5249930.post@n6.nabble.com>
References: <1455035313516-5249728.post@n6.nabble.com>
 <CAGLyg+okLXSTHh7vyb3ktSSQw5iWKUorUEcf_egr83KZX5MT+w@mail.gmail.com>
 <1455047210358-5249767.post@n6.nabble.com>
 <CAGLyg+r1nkcPa09H0kTuKERdjqtHMdMNQrCjrnNR5sqdydQJAw@mail.gmail.com>
 <1455049426771-5249772.post@n6.nabble.com>
 <1455114558084-5249930.post@n6.nabble.com>
Message-ID: <1569327913771-0.post@n6.nabble.com>

Hi,

Can anyone please share the exact same solution for MacOS? All the working
solutions I found were for Windows.


Thanks,
Gaurav



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From simon.eves at omnisci.com  Tue Sep 24 11:52:22 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Tue, 24 Sep 2019 11:52:22 -0700
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
Message-ID: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>

(re-posting as the first one ~2 weeks ago went into moderation quarantine
due to attachment size and I don't know if it ever came out again, but
certainly had no responses)

When our system imports (using GDAL) the attached GeoJSON file (of unknown
provenance, via our QA team) the geo (California counties) ends up
somewhere out in the Pacific and really small and slightly rotated.

I get the same results whether I import the file directly, or do a
Shapefile or WKT CSV conversion with ogr2ogr first (forcing to EPSG:4326).

Is the file bogus, or is GDAL not interpreting the original coordinate
system correctly?

This is all using GDAL 2.4.2, btw. We haven't made the leap to 3.x yet.
Sorry.

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190924/99d99811/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: us-ca-all.geo.json.gz
Type: application/gzip
Size: 11595 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190924/99d99811/attachment.gz>

From even.rouault at spatialys.com  Tue Sep 24 12:22:30 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 24 Sep 2019 21:22:30 +0200
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
In-Reply-To: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
References: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
Message-ID: <14685632.K4Y2riNn5s@even-i700>

On mardi 24 septembre 2019 11:52:22 CEST Simon Eves wrote:
> (re-posting as the first one ~2 weeks ago went into moderation quarantine
> due to attachment size and I don't know if it ever came out again, but
> certainly had no responses)
> 
> When our system imports (using GDAL) the attached GeoJSON file (of unknown
> provenance, via our QA team) the geo (California counties) ends up
> somewhere out in the Pacific and really small and slightly rotated.
> 
> I get the same results whether I import the file directly, or do a
> Shapefile or WKT CSV conversion with ogr2ogr first (forcing to EPSG:4326).
> 
> Is the file bogus, or is GDAL not interpreting the original coordinate
> system correctly?

Its CRS and coordinate encoding is highly unstandard

"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:EPSG:102243"}},"hc-
transform":{"default":{"crs":"+proj=lcc +lat_1=37.06666666666667 
+lat_2=38.43333333333333 +lat_0=36.5 +lon
_0=-120.5 +x_0=2000000 +y_0=500000 +ellps=GRS80 +units=m +no_defs","scale":
0.000665455608285,"jsonres":15.5,"jsonmarginX":-999,"jsonmarginY":
9851.0,"xoffset":1668099.76286,"yoffset":1116967.85109}}

EPSG:102243 doesn't exist. It is actually ESRI:102243 (the proj string above 
is consistant with that)

But the main issue is the "transform" object that seems to describe a offset & 
scaling strategy to encode coordinates as integer values. You'll have to 
manually apply those corrections

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simon.eves at omnisci.com  Wed Sep 25 08:27:56 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 25 Sep 2019 08:27:56 -0700
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
In-Reply-To: <14685632.K4Y2riNn5s@even-i700>
References: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
 <14685632.K4Y2riNn5s@even-i700>
Message-ID: <CAJf0KTSHupdkPzr=rgDUhRYTeoQkGV6_YKpZN9k_LfckC2jKtA@mail.gmail.com>

OK, so it's a weird file.

I'll leave it to you to decide whether it's worth making GDAL/Proj deal
with it. I suspect not, and that's fine with us.

Thanks!

Simon

On Tue, Sep 24, 2019 at 12:22 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 24 septembre 2019 11:52:22 CEST Simon Eves wrote:
> > (re-posting as the first one ~2 weeks ago went into moderation quarantine
> > due to attachment size and I don't know if it ever came out again, but
> > certainly had no responses)
> >
> > When our system imports (using GDAL) the attached GeoJSON file (of
> unknown
> > provenance, via our QA team) the geo (California counties) ends up
> > somewhere out in the Pacific and really small and slightly rotated.
> >
> > I get the same results whether I import the file directly, or do a
> > Shapefile or WKT CSV conversion with ogr2ogr first (forcing to
> EPSG:4326).
> >
> > Is the file bogus, or is GDAL not interpreting the original coordinate
> > system correctly?
>
> Its CRS and coordinate encoding is highly unstandard
>
>
> "crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:EPSG:102243"}},"hc-
> transform":{"default":{"crs":"+proj=lcc +lat_1=37.06666666666667
> +lat_2=38.43333333333333 +lat_0=36.5 +lon
> _0=-120.5 +x_0=2000000 +y_0=500000 +ellps=GRS80 +units=m +no_defs","scale":
> 0.000665455608285,"jsonres":15.5,"jsonmarginX":-999,"jsonmarginY":
> 9851.0,"xoffset":1668099.76286,"yoffset":1116967.85109}}
>
> EPSG:102243 doesn't exist. It is actually ESRI:102243 (the proj string
> above
> is consistant with that)
>
> But the main issue is the "transform" object that seems to describe a
> offset &
> scaling strategy to encode coordinates as integer values. You'll have to
> manually apply those corrections
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190925/8af31101/attachment.html>

From even.rouault at spatialys.com  Wed Sep 25 08:35:50 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Sep 2019 17:35:50 +0200
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
In-Reply-To: <CAJf0KTSHupdkPzr=rgDUhRYTeoQkGV6_YKpZN9k_LfckC2jKtA@mail.gmail.com>
References: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
 <14685632.K4Y2riNn5s@even-i700>
 <CAJf0KTSHupdkPzr=rgDUhRYTeoQkGV6_YKpZN9k_LfckC2jKtA@mail.gmail.com>
Message-ID: <3977184.ZzGsjGIWP9@even-i700>

On mercredi 25 septembre 2019 08:27:56 CEST Simon Eves wrote:
> OK, so it's a weird file.
> 
> I'll leave it to you to decide whether it's worth making GDAL/Proj deal
> with it. I suspect not, and that's fine with us.

Would only be a GDAL only thing.
One single occurrence of such a file doesn't seem to be a very compelling 
case.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simon.eves at omnisci.com  Wed Sep 25 08:47:04 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 25 Sep 2019 08:47:04 -0700
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
In-Reply-To: <3977184.ZzGsjGIWP9@even-i700>
References: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
 <14685632.K4Y2riNn5s@even-i700>
 <CAJf0KTSHupdkPzr=rgDUhRYTeoQkGV6_YKpZN9k_LfckC2jKtA@mail.gmail.com>
 <3977184.ZzGsjGIWP9@even-i700>
Message-ID: <CAJf0KTSMLW2igSmwwY1v4m9sPLZJ+n71zLeRs=DkjAJA0mcChg@mail.gmail.com>

I concur.

That said, I'm sure I have come across GeoJSON files with the
integer/scale/offset encoding before. I figured that was a standard thing,
but your response suggests otherwise.

That also said, I am digging through our stash of test files and I can't
find any like that, so maybe I'm dreaming.

Some Googling seems to indicate that the "hc-transform" node might be
something from HighCharts... starting here
https://github.com/highcharts/highcharts/issues/7960

I'll let you know if I find anything more...

SE

On Wed, Sep 25, 2019 at 8:35 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 25 septembre 2019 08:27:56 CEST Simon Eves wrote:
> > OK, so it's a weird file.
> >
> > I'll leave it to you to decide whether it's worth making GDAL/Proj deal
> > with it. I suspect not, and that's fine with us.
>
> Would only be a GDAL only thing.
> One single occurrence of such a file doesn't seem to be a very compelling
> case.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190925/393d1ce7/attachment.html>

From robertofig85 at gmail.com  Thu Sep 26 06:44:21 2019
From: robertofig85 at gmail.com (Roberto Ribeiro)
Date: Thu, 26 Sep 2019 10:44:21 -0300
Subject: [gdal-dev] Problems creating a VSI File on Windows
Message-ID: <CANTZQ+z_W+LBOPie2eHDavKyLK2-kbLqRrff31C-hQ5oqgXWdg@mail.gmail.com>

Hello list,

I am trying to create a VSI File on Memory, in a W10 system, but am unsure
how to proceed with path style.

> VSIFILE* Mem = VSIFileFromMemBuffer("path", (GByte*) NewImg,
(vsi_l_offset) (XSize * YSize), FALSE);
> GDALDataset* DS = (GDALDataset*) GDALOpen("path", GA_ReadOnly);

When doing the traditional Windows backslashes ("\\vsimem\\file.tif") it
raises the following error when run: "'\vsimem\file.tif' does not exist in
the file system, and is not recognized as a supported dataset name."

I scooped around some and found a ticket from a decade ago (
https://trac.osgeo.org/gdal/ticket/2318) saying I should use the Unix
format ("/vsimem/file.tif"), but when doing so it raises:
"'/vsimem/file.tif' not recognized as a supported file format.".

What is the proper way of doing this on Windows?

P.S.: linking to GDAL 2.0.3 64-bits, compiling with VS2017.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190926/59c0c9bc/attachment.html>

From even.rouault at spatialys.com  Thu Sep 26 06:56:40 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Sep 2019 15:56:40 +0200
Subject: [gdal-dev] Problems creating a VSI File on Windows
In-Reply-To: <CANTZQ+z_W+LBOPie2eHDavKyLK2-kbLqRrff31C-hQ5oqgXWdg@mail.gmail.com>
References: <CANTZQ+z_W+LBOPie2eHDavKyLK2-kbLqRrff31C-hQ5oqgXWdg@mail.gmail.com>
Message-ID: <2411173.NnekuTkMIC@even-i700>

On jeudi 26 septembre 2019 10:44:21 CEST Roberto Ribeiro wrote:
> Hello list,
> 
> I am trying to create a VSI File on Memory, in a W10 system, but am unsure
> how to proceed with path style.
> 
> > VSIFILE* Mem = VSIFileFromMemBuffer("path", (GByte*) NewImg,
> 
> (vsi_l_offset) (XSize * YSize), FALSE);
> 
> > GDALDataset* DS = (GDALDataset*) GDALOpen("path", GA_ReadOnly);
> 
> When doing the traditional Windows backslashes ("\\vsimem\\file.tif") it
> raises the following error when run: "'\vsimem\file.tif' does not exist in
> the file system, and is not recognized as a supported dataset name."
> 
> I scooped around some and found a ticket from a decade ago (
> https://trac.osgeo.org/gdal/ticket/2318) saying I should use the Unix
> format ("/vsimem/file.tif"), but when doing so it raises:
> "'/vsimem/file.tif' not recognized as a supported file format.".
> 
> What is the proper way of doing this on Windows?

/vsimem/file.tif is the proper way of doing it on all platforms

The issue here is that you pass apparently a raw buffer (nXSize * nYSize), 
which is not a recognized raster format.

You likely want to use the MEM driver. Use the Create() interface, and then 
fill it with your buffer with RasterIO()

Or use the MEM:::DATAPOINTER= syntax. See
https://gdal.org/drivers/raster/mem.html


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From benjamin.deschamps at canada.ca  Thu Sep 26 08:22:13 2019
From: benjamin.deschamps at canada.ca (Deschamps, Benjamin (EC))
Date: Thu, 26 Sep 2019 15:22:13 +0000
Subject: [gdal-dev] ogr2ogr VRT conversion with SQLite query not working in
	v. 3.0.1
Message-ID: <78e37aa294a849e783769d871f85b516@PELEPCDEXC020.birch.int.bell.ca>

Hi,

I have a simple VRT merging data from three Shapefile sources, using an SQLITE query. The command executes without any issues with ogr2ogr v. 2.3.0 dev and with 2.1.3, but fails my new 3.0.1 install.

ogr2ogr.exe -f "ESRI Shapefile" c:\pathto\test.shp f:\pathto\cis_SGRDAMERGED_20190925_pl_a.vrt

The VRT is:

<OGRVRTDataSource>
<OGRVRTUnionLayer name="test">
  <OGRVRTLayer name="cis_SGRDAHA_20190925T1800Z_pl_a">
   <SrcSQL dialect="SQLITE">SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAHA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")</SrcSQL>
   <SrcDataSource>F:\pathto\cis_SGRDAHA_20190925T1800Z_pl_a.shp</SrcDataSource>
  </OGRVRTLayer>
  <OGRVRTLayer name="cis_SGRDAMID_20190925T1800Z_pl_a">
   <SrcSQL dialect="SQLITE">SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAMID_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")</SrcSQL>
   <SrcDataSource>F:\pathto\cis_SGRDAMID_20190925T1800Z_pl_a.shp</SrcDataSource>
  </OGRVRTLayer>
  <OGRVRTLayer name="cis_SGRDAWA_20190925T1800Z_pl_a">
   <SrcSQL dialect="SQLITE">SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAWA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")</SrcSQL>
   <SrcDataSource>F:\pathto\cis_SGRDAWA_20190925T1800Z_pl_a.shp</SrcDataSource>
  </OGRVRTLayer>
</OGRVRTUnionLayer>
</OGRVRTDataSource>

===
Error:

ERROR 1: SQL Expression Parsing Error: syntax error, unexpected string, expecting NULL or NOT. Occurred around :
POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01
             ^
ERROR 1: In ExecuteSQL(): sqlite3_step(SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAHA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")):
  Cannot apply attribute filter : POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01' AND CT IS NOT '00'
ERROR 1: SQL statement failed, or returned no layer result:
SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAHA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")
ERROR 1: SQL Expression Parsing Error: syntax error, unexpected string, expecting NULL or NOT. Occurred around :
POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01
             ^
ERROR 1: In ExecuteSQL(): sqlite3_step(SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAMID_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")):
  Cannot apply attribute filter : POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01' AND CT IS NOT '00'
ERROR 1: SQL statement failed, or returned no layer result:
SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAMID_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")
ERROR 1: SQL Expression Parsing Error: syntax error, unexpected string, expecting NULL or NOT. Occurred around :
POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01
             ^
ERROR 1: In ExecuteSQL(): sqlite3_step(SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAWA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")):
  Cannot apply attribute filter : POLY_TYPE IS 'I' AND CT IS NOT '02' AND CT IS NOT '01' AND CT IS NOT '00'
ERROR 1: SQL statement failed, or returned no layer result:
SELECT GEOMETRY, POLY_TYPE FROM cis_SGRDAWA_20190925T1800Z_pl_a WHERE (POLY_TYPE IS "I") AND (CT IS NOT "00") AND (CT IS NOT "01") AND (CT IS NOT "02")

Any known issues already reported?

Thanks,

Benjamin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190926/d90026e3/attachment.html>

From simon.eves at omnisci.com  Thu Sep 26 08:41:38 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Thu, 26 Sep 2019 08:41:38 -0700
Subject: [gdal-dev] Bogus GeoJSON file or am I doing something wrong?
	(re-post)
In-Reply-To: <CAJf0KTSMLW2igSmwwY1v4m9sPLZJ+n71zLeRs=DkjAJA0mcChg@mail.gmail.com>
References: <CAJf0KTQHDyHt29LP194iKBE9a-L8CmUQkNWLt_0ewjyW5RJP+A@mail.gmail.com>
 <14685632.K4Y2riNn5s@even-i700>
 <CAJf0KTSHupdkPzr=rgDUhRYTeoQkGV6_YKpZN9k_LfckC2jKtA@mail.gmail.com>
 <3977184.ZzGsjGIWP9@even-i700>
 <CAJf0KTSMLW2igSmwwY1v4m9sPLZJ+n71zLeRs=DkjAJA0mcChg@mail.gmail.com>
Message-ID: <CAJf0KTRywvQShH1u4atMnCp4xUdroSA_JeD5J9bgn+VekqZwJw@mail.gmail.com>

To wrap this up, I got in touch with HighCharts, and they confirmed that
this file is from them, but not a real GeoJSON, and not expected to be
usable outside their software ecosystem.

Thanks again.

SE


On Wed, Sep 25, 2019 at 8:47 AM Simon Eves <simon.eves at omnisci.com> wrote:

> I concur.
>
> That said, I'm sure I have come across GeoJSON files with the
> integer/scale/offset encoding before. I figured that was a standard thing,
> but your response suggests otherwise.
>
> That also said, I am digging through our stash of test files and I can't
> find any like that, so maybe I'm dreaming.
>
> Some Googling seems to indicate that the "hc-transform" node might be
> something from HighCharts... starting here
> https://github.com/highcharts/highcharts/issues/7960
>
> I'll let you know if I find anything more...
>
> SE
>
> On Wed, Sep 25, 2019 at 8:35 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> On mercredi 25 septembre 2019 08:27:56 CEST Simon Eves wrote:
>> > OK, so it's a weird file.
>> >
>> > I'll leave it to you to decide whether it's worth making GDAL/Proj deal
>> > with it. I suspect not, and that's fine with us.
>>
>> Would only be a GDAL only thing.
>> One single occurrence of such a file doesn't seem to be a very compelling
>> case.
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
> --
> <http://www.omnisci.com/>
> Simon Eves
> Senior Graphics Engineer, Rendering Group
> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>
>

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
100 Montgomery St (5th Floor), San Francisco, CA 94104, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190926/cfda6f4f/attachment-0001.html>

From even.rouault at spatialys.com  Thu Sep 26 09:28:58 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Sep 2019 18:28:58 +0200
Subject: [gdal-dev] ogr2ogr VRT conversion with SQLite query not working
	in v. 3.0.1
In-Reply-To: <78e37aa294a849e783769d871f85b516@PELEPCDEXC020.birch.int.bell.ca>
References: <78e37aa294a849e783769d871f85b516@PELEPCDEXC020.birch.int.bell.ca>
Message-ID: <1865776.DyLkCL2Vbm@even-i700>

On jeudi 26 septembre 2019 15:22:13 CEST Deschamps, Benjamin (EC) wrote:
> Hi,
> 
> I have a simple VRT merging data from three Shapefile sources, using an
> SQLITE query. The command executes without any issues with ogr2ogr v. 2.3.0
> dev and with 2.1.3, but fails my new 3.0.1 install.

Benjamin,

The issue is likely not the upgrade of GDAL version, but the fact that it must 
use version >= 3.21 whereas older versions used an older SQLite version. With 
SQLite >= 3.21, GDAL tries to propagate IS constant / IS NOT constant 
constructs to OGR SQL, but OGR SQL doesn't support those constructs. I've just 
push a fix to avoid that propagation. If you don't strongly depend on the 
difference of semantics between IS and = (how they deal with NULL values), 
then just use =

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From winwaed at gmail.com  Thu Sep 26 14:33:42 2019
From: winwaed at gmail.com (Richard Marsden)
Date: Thu, 26 Sep 2019 16:33:42 -0500
Subject: [gdal-dev] Importing OSM: closed ways being skipped
Message-ID: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>

I am trying to read an osm pbf file, but I am getting different
feature counts when I use ogr2ogr to convert the file to spatialite,
and the Python OGR/GDAL wrapper (in a QGIS plugin) to loop through the
features individually.
Points, lines, and line strings are the same. The differences are in
the multipolygons.  ogr2ogr is reporting "closed ways" (with
osm_way_id set), whilst the direct Python calls are not.
The direct Python calls report a much lower multipolygon count, and
missing specific ids that I have searched for. It reports no features
with osm_way_id set.
(my test data is the Geofabrik Texas extract - this contains a lot of
buildings encoded as closed ways)

I've also described the issue here:

https://gis.stackexchange.com/questions/336595/gdal-ogr-losing-osm-closed-way-features-that-ogr2ogr-imports

Whilst searching this list, I saw references to osmconf.ini - turns
out I have about half a dozen copies installed from various
applications. They all have a "closed_ways_are_polygons" entry, which
looks like it could be the cause of the problem.
I tried copying one of these files to my plugin's directory, reloading
the plugin, and no change.

How can I programmatically check which osmconf.ini (if any) is being
used, what the closed_ways_are_polygons= setting is set to? Is it
possible to override it?

Environment: Windows 10 x64; GDAL and OGR2OGR are v2.4.1
More Python code is at the above link, but  this is how I am opening
an querying the features (error checking/etc removed for simplicity):

    from osgeo import gdal

    gdal.SetConfigOption("OGR_INTERLEAVED_READING", "YES")

    ds = gdal.OpenEx(input_pbfname, gdal.OF_VECTOR)

    nly = ds.GetLayerCount()

    nPoints = 0

    for ily in range (0,nly):
        layer = ds.GetLayerByIndex(ily)

        layer.ResetReading()
        feat = layer.GetNextFeature()
        while feat is not None:
            if layer.GetName() == "points":
                nPoints = nPoints+1
       #     elif  layer.GetName() == "lines": <etc>


If everything appears okay with my Python install, the next step would
be to try reproducing the issue directly with C/C++ - probably on a
Linux system. If this turns out to be a bug, then I'm game to
investigate it further and fix. However at the moment, I think it is
much more likely to be a configuration issue.

Regards,

Richard Marsden

From ap.joseph at live.com  Thu Sep 26 14:54:31 2019
From: ap.joseph at live.com (Andrew Joseph)
Date: Thu, 26 Sep 2019 14:54:31 -0700 (MST)
Subject: [gdal-dev] ESRI FileGDB driver causing issues with Postgis build
 due to packaged libstdc++
Message-ID: <1569534871024-0.post@n6.nabble.com>

I'm updating a docker build of gdal/postgis with gdal 3.0.1 and postgis
3.0.0alpha4 on top of a docker image of debian:buster-slim

below is my FileGDB build:

FGDB_BUILD_DIR=/usr/local/FileGDB_API
FGDB_BUNDLE=$BUILD_DIR/fgdb.tar.gz
wget -q -O "$FGDB_BUNDLE"
https://github.com/Esri/file-geodatabase-api/raw/master/FileGDB_API_1.5.1/FileGDB_API_1_5_1-64gcc51.tar.gz
mkdir -p $FGDB_BUILD_DIR
tar -xzf "$FGDB_BUNDLE" -C "$FGDB_BUILD_DIR" --strip-components 1
chown -R root:root ${FGDB_BUILD_DIR}
cd ${FGDB_BUILD_DIR}
echo "$FGDB_BUILD_DIR/lib" > /etc/ld.so.conf.d/filegdbapi.conf
ldconfig
rm -rf ${FGDB_BUNDLE}

When building postgis, I get the following error:

/usr/bin/clang-7: /usr/local/FileGDB_API/lib/libstdc++.so.6: version
`GLIBCXX_3.4.22' not found (required by
/usr/lib/x86_64-linux-gnu/libLLVM-7.so.1)

I know about the issue with older versions of the API and am using the
latest version (1.5.1). 
I cannot simply use the OpenFileGDB Driver as I need write support. 

Is there any workaround for this?




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Sep 26 15:04:01 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Sep 2019 00:04:01 +0200
Subject: [gdal-dev] ESRI FileGDB driver causing issues with Postgis
	build due to packaged libstdc++
In-Reply-To: <1569534871024-0.post@n6.nabble.com>
References: <1569534871024-0.post@n6.nabble.com>
Message-ID: <2186897.TE2IAMrWVD@even-i700>

> /usr/bin/clang-7: /usr/local/FileGDB_API/lib/libstdc++.so.6: version
> `GLIBCXX_3.4.22' not found (required by

Try removing that /usr/local/FileGDB_API/lib/libstdc++.so.6 . It is likely 
older than what the rest of your system expects.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ap.joseph at live.com  Thu Sep 26 15:44:11 2019
From: ap.joseph at live.com (Andrew Joseph)
Date: Thu, 26 Sep 2019 15:44:11 -0700 (MST)
Subject: [gdal-dev] ESRI FileGDB driver causing issues with Postgis
 build due to packaged libstdc++
In-Reply-To: <2186897.TE2IAMrWVD@even-i700>
References: <1569534871024-0.post@n6.nabble.com> <2186897.TE2IAMrWVD@even-i700>
Message-ID: <1569537851067-0.post@n6.nabble.com>

should I delete the libstdc++.so and libstdc++.so.6.0.2.1 files as well?
(sorry I'm unfamiliar with with C/C++)



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Sep 26 15:46:39 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Sep 2019 00:46:39 +0200
Subject: [gdal-dev] ESRI FileGDB driver causing issues with Postgis
	build due to packaged libstdc++
In-Reply-To: <1569537851067-0.post@n6.nabble.com>
References: <1569534871024-0.post@n6.nabble.com>
 <2186897.TE2IAMrWVD@even-i700> <1569537851067-0.post@n6.nabble.com>
Message-ID: <18254396.ayACkXHXRJ@even-i700>

On jeudi 26 septembre 2019 15:44:11 CEST Andrew Joseph wrote:
> should I delete the libstdc++.so and libstdc++.so.6.0.2.1 files as well?
> (sorry I'm unfamiliar with with C/C++)

Yes any file with libstdc++ in its name (just in /usr/local/FileGDB_API/lib )

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ap.joseph at live.com  Thu Sep 26 16:34:07 2019
From: ap.joseph at live.com (Andrew Joseph)
Date: Thu, 26 Sep 2019 16:34:07 -0700 (MST)
Subject: [gdal-dev] ESRI FileGDB driver causing issues with Postgis
 build due to packaged libstdc++
In-Reply-To: <18254396.ayACkXHXRJ@even-i700>
References: <1569534871024-0.post@n6.nabble.com>
 <2186897.TE2IAMrWVD@even-i700> <1569537851067-0.post@n6.nabble.com>
 <18254396.ayACkXHXRJ@even-i700>
Message-ID: <1569540847982-0.post@n6.nabble.com>

Thanks, that worked!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep 26 22:52:43 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 26 Sep 2019 22:52:43 -0700 (MST)
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
Message-ID: <1569563563268-0.post@n6.nabble.com>

Winwaed wrote
> Whilst searching this list, I saw references to osmconf.ini - turns
> out I have about half a dozen copies installed from various
> applications. They all have a "closed_ways_are_polygons" entry, which
> looks like it could be the cause of the problem.
> I tried copying one of these files to my plugin's directory, reloading
> the plugin, and no change.
> 
> How can I programmatically check which osmconf.ini (if any) is being
> used, what the closed_ways_are_polygons= setting is set to? Is it
> possible to override it?

Hi,

Answer to how to define which osmconf.ini to use can be found from
https://gdal.org/drivers/vector/osm.html that says "You can also define an
alternate path with the OSM_CONFIG_FILE configuration option." 

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From bdecarne at gmail.com  Fri Sep 27 00:54:51 2019
From: bdecarne at gmail.com (=?UTF-8?Q?Blaise_de_Carn=C3=A9?=)
Date: Fri, 27 Sep 2019 09:54:51 +0200
Subject: [gdal-dev] ogrinfo : strange behaviour ?
Message-ID: <CAAbtqUjhyvv9jpi-8vxPwLrzbx6VV+k7=-XVCudrrLung5i5Ow@mail.gmail.com>

Hello there !

I've got a strange behaviour with gdal 2.4.2 :

> ogrinfo https://france-geojson.gregoiredavid.fr/repo/regions.geojson
> INFO: Open of `
https://france-geojson.gregoiredavid.fr/repo/regions.geojson'
      using driver `GeoJSON' successful.

Right, that's ok. But now :

> ogrinfo GeoJSON:
https://france-geojson.gregoiredavid.fr/repo/regions.geojson
> FAILURE:
Unable to open datasource `GeoJSON:
https://france-geojson.gregoiredavid.fr/repo/regions.geojson' with the
following drivers [...]

Expected : same result, as with gdal 2.4.0

--debug ON give me :

GNM: GNMRegisterAllInternal
GNM: RegisterGNMFile
GNM: RegisterGNMdatabase
HTTP: Fetch(https://france-geojson.gregoiredavid.fr/repo/regions.geojson)
HTTP: libcurl/7.52.1 GnuTLS/3.6.9 zlib/1.2.8 libidn2/2.2.0 libpsl/0.17.0
(+libidn2/0.16) libssh2/1.7.0 nghttp2/1.18.1 librtmp/2.3
HTTP: These HTTP headers were set: Accept: text/plain, application/json
HTTP: Fetch(https://france-geojson.gregoiredavid.fr/repo/regions.geojson)
HTTP: These HTTP headers were set: Accept: text/plain, application/json
ERROR 6: Update from remote service not supported
FAILURE:
Unable to open datasource `GeoJSON:
https://france-geojson.gregoiredavid.fr/repo/regions.geojson' with the
following drivers.

Have a nice day !
Blaise







--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190927/6dc2ee06/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Sep 27 05:28:21 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 27 Sep 2019 05:28:21 -0700 (MST)
Subject: [gdal-dev] ogrinfo : strange behaviour ?
In-Reply-To: <CAAbtqUjhyvv9jpi-8vxPwLrzbx6VV+k7=-XVCudrrLung5i5Ow@mail.gmail.com>
References: <CAAbtqUjhyvv9jpi-8vxPwLrzbx6VV+k7=-XVCudrrLung5i5Ow@mail.gmail.com>
Message-ID: <1569587301322-0.post@n6.nabble.com>

Hi,

With GDAL 2.4.2 from OSGeo4W I had to bypass the certificate check to avoid
error "ERROR 1: SSL certificate problem: unable to get local issuer
certificate".

This gives data:

ogrinfo GEOJSON:https://france-geojson.gregoiredavid.fr/repo/regions.geojson
-al -so --config GDAL_HTTP_UNSAFESSL YES --debug on

With GDAL 3.0.1dev the certificate was accepted without bypass. I don't know
what has been fixed but it must be something certificate related.

-Jukka Rahkonen-



Blaise de Carné wrote
> Hello there !
> 
> I've got a strange behaviour with gdal 2.4.2 :
> 
>> ogrinfo https://france-geojson.gregoiredavid.fr/repo/regions.geojson
>> INFO: Open of `
> https://france-geojson.gregoiredavid.fr/repo/regions.geojson'
>       using driver `GeoJSON' successful.
> 
> Right, that's ok. But now :
> 
>> ogrinfo GeoJSON:
> https://france-geojson.gregoiredavid.fr/repo/regions.geojson
>> FAILURE:
> Unable to open datasource `GeoJSON:
> https://france-geojson.gregoiredavid.fr/repo/regions.geojson' with the
> following drivers [...]
> 
> Expected : same result, as with gdal 2.4.0
> 
> --debug ON give me :
> 
> GNM: GNMRegisterAllInternal
> GNM: RegisterGNMFile
> GNM: RegisterGNMdatabase
> HTTP: Fetch(https://france-geojson.gregoiredavid.fr/repo/regions.geojson)
> HTTP: libcurl/7.52.1 GnuTLS/3.6.9 zlib/1.2.8 libidn2/2.2.0 libpsl/0.17.0
> (+libidn2/0.16) libssh2/1.7.0 nghttp2/1.18.1 librtmp/2.3
> HTTP: These HTTP headers were set: Accept: text/plain, application/json
> HTTP: Fetch(https://france-geojson.gregoiredavid.fr/repo/regions.geojson)
> HTTP: These HTTP headers were set: Accept: text/plain, application/json
> ERROR 6: Update from remote service not supported
> FAILURE:
> Unable to open datasource `GeoJSON:
> https://france-geojson.gregoiredavid.fr/repo/regions.geojson' with the
> following drivers.
> 
> Have a nice day !
> Blaise
> 
> 
> 
> 
> 
> 
> 
> --
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From winwaed at gmail.com  Fri Sep 27 14:08:20 2019
From: winwaed at gmail.com (Richard Marsden)
Date: Fri, 27 Sep 2019 16:08:20 -0500
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <CAANKLwhzcrmCPOmiXeHTyoK8siEhGo7h-2i04R6379SHdUo85w@mail.gmail.com>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
 <1569563563268-0.post@n6.nabble.com>
 <CAANKLwhzcrmCPOmiXeHTyoK8siEhGo7h-2i04R6379SHdUo85w@mail.gmail.com>
Message-ID: <CAANKLwhrMZoOjPjgLvBbQfZ4FZrZvkmZ4NLfpG9Q4QsjzbF7BQ@mail.gmail.com>

Further to my previous email (thanks Jukka!), I think I've found the
underling issue by using 'simple' Python (ie. no QGIS) on an ubuntu
box.

The problem lies with the interleaving and need to use multiple
passes. This larger issue is something I was already aware of having
coded a C# PBF reader in the past, and it is also in the docs.
This is the reason I had the loop over all layer types - even those I
didn't need. The issue was that the 'other relations' have to be read
BEFORE the multipolygons. As the missing features were "closed ways" I
didn't think the relations were relevant. Clearly they are.

The amended code looks like this:

        ds = gdal.OpenEx(input_pbfname, gdal.OF_VECTOR)
        nly = ds.GetLayerCount()
        ds.ResetReading()
        for ily in (0,1,2,4,3):
            layer = ds.GetLayerByIndex(ily)
            layer.ResetReading()
            feat = layer.GetNextFeature()
            while feat is not None:
                 # do stuff with feat

Previously the loop was over  range (0,nly) - the same layers are
visited but previously they were in the order:
points,lines,linestrings,multipolygons,other relations.

Thanks

Richard



On Fri, Sep 27, 2019 at 11:13 AM Richard Marsden <winwaed at gmail.com> wrote:
>
> Jukka,
>
> Thanks - not sure how I missed that!  I've added that and I had a
> sudden increase in the number of reported nodes. Turned out my
> osmconf.ini had report_all_nodes=yes - and the default does not. So
> that turned out to be a good test that it was seeing the osmconf.ini
> that I thought it was. I've since disabled that option, however I'm
> still not seeing the polygons where osm_way_id has been set.
>
> I've also tried copying all polygons regardless of attribute values -
> the extra polygons are not there. "closed way" polygons aren't being
> reported, and I am not seeing any polygons with osm_way_id set to
> anything other than empty string.  The two specific tags examples I'm
> looking at are buildings and landuse.  My closed_ways_are_polygons= is
> set the same as the default:
>
> closed_ways_are_polygons=aeroway,amenity,boundary,building,craft,geological,historic,landuse,leisure,military,natural,office,place,shop,sport,tourism,highway=platform,public_transport=platform
>
> [multipolygons] also has osm_id=yes set. The comments note that this
> automatically sets osm_way_id - the two attributes being exclusively
> set (which makes sense).
>
> Richard
>
>
>
>
> On Fri, Sep 27, 2019 at 12:53 AM jratike80
> <jukka.rahkonen at maanmittauslaitos.fi> wrote:
> >
> > Winwaed wrote
> > > Whilst searching this list, I saw references to osmconf.ini - turns
> > > out I have about half a dozen copies installed from various
> > > applications. They all have a "closed_ways_are_polygons" entry, which
> > > looks like it could be the cause of the problem.
> > > I tried copying one of these files to my plugin's directory, reloading
> > > the plugin, and no change.
> > >
> > > How can I programmatically check which osmconf.ini (if any) is being
> > > used, what the closed_ways_are_polygons= setting is set to? Is it
> > > possible to override it?
> >
> > Hi,
> >
> > Answer to how to define which osmconf.ini to use can be found from
> > https://gdal.org/drivers/vector/osm.html that says "You can also define an
> > alternate path with the OSM_CONFIG_FILE configuration option."
> >
> > -Jukka Rahkonen-
> >
> >
> >
> > --
> > Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Fri Sep 27 14:28:53 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Sep 2019 23:28:53 +0200
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <CAANKLwhrMZoOjPjgLvBbQfZ4FZrZvkmZ4NLfpG9Q4QsjzbF7BQ@mail.gmail.com>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
 <CAANKLwhzcrmCPOmiXeHTyoK8siEhGo7h-2i04R6379SHdUo85w@mail.gmail.com>
 <CAANKLwhrMZoOjPjgLvBbQfZ4FZrZvkmZ4NLfpG9Q4QsjzbF7BQ@mail.gmail.com>
Message-ID: <1679109.tctaPTJTfo@even-i700>

> The amended code looks like this:
> 
>         ds = gdal.OpenEx(input_pbfname, gdal.OF_VECTOR)
>         nly = ds.GetLayerCount()
>         ds.ResetReading()
>         for ily in (0,1,2,4,3):
>             layer = ds.GetLayerByIndex(ily)
>             layer.ResetReading()
>             feat = layer.GetNextFeature()
>             while feat is not None:
>                  # do stuff with feat

This is not the proper way of doing layer interleaved reading. It might work 
by chance on your particular dataset, but not in the general case. See
https://gdal.org/drivers/vector/osm.html#interleaved-reading

With recent GDAL versions, you might also use ds.GetNextFeature()

See https://github.com/OSGeo/gdal/blob/master/autotest/ogr/ogr_osm.py#L702

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From winwaed at gmail.com  Fri Sep 27 14:58:08 2019
From: winwaed at gmail.com (Richard Marsden)
Date: Fri, 27 Sep 2019 16:58:08 -0500
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <1679109.tctaPTJTfo@even-i700>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
 <CAANKLwhzcrmCPOmiXeHTyoK8siEhGo7h-2i04R6379SHdUo85w@mail.gmail.com>
 <CAANKLwhrMZoOjPjgLvBbQfZ4FZrZvkmZ4NLfpG9Q4QsjzbF7BQ@mail.gmail.com>
 <1679109.tctaPTJTfo@even-i700>
Message-ID: <CAANKLwjc=5qG2C-VG0M_pJ6Rv4AYPuxWH9wN_egv3gcefeFuQg@mail.gmail.com>

Even,

Thanks  - I'll have a look at ds.GetNextFeature().  I'll note that the
sample (C++) code on the interleaved reading section, is where I got
the double loop that looped over layers, and then features within that
layer. This led me astray because it loops over the layers in index
order - doing this results in the closed ways being skipped.

Richard

On Fri, Sep 27, 2019 at 4:28 PM Even Rouault <even.rouault at spatialys.com> wrote:
>
> > The amended code looks like this:
> >
> >         ds = gdal.OpenEx(input_pbfname, gdal.OF_VECTOR)
> >         nly = ds.GetLayerCount()
> >         ds.ResetReading()
> >         for ily in (0,1,2,4,3):
> >             layer = ds.GetLayerByIndex(ily)
> >             layer.ResetReading()
> >             feat = layer.GetNextFeature()
> >             while feat is not None:
> >                  # do stuff with feat
>
> This is not the proper way of doing layer interleaved reading. It might work
> by chance on your particular dataset, but not in the general case. See
> https://gdal.org/drivers/vector/osm.html#interleaved-reading
>
> With recent GDAL versions, you might also use ds.GetNextFeature()
>
> See https://github.com/OSGeo/gdal/blob/master/autotest/ogr/ogr_osm.py#L702
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Fri Sep 27 15:06:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Sep 2019 00:06:25 +0200
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <CAANKLwjc=5qG2C-VG0M_pJ6Rv4AYPuxWH9wN_egv3gcefeFuQg@mail.gmail.com>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
 <1679109.tctaPTJTfo@even-i700>
 <CAANKLwjc=5qG2C-VG0M_pJ6Rv4AYPuxWH9wN_egv3gcefeFuQg@mail.gmail.com>
Message-ID: <2325881.xhFu9Sj6ON@even-i700>

On vendredi 27 septembre 2019 16:58:08 CEST Richard Marsden wrote:
> Even,
> 
> Thanks  - I'll have a look at ds.GetNextFeature().  I'll note that the
> sample (C++) code on the interleaved reading section, is where I got
> the double loop that looped over layers, and then features within that
> layer. This led me astray because it loops over the layers in index
> order - doing this results in the closed ways being skipped.

No, your code doesn't implement the code of the docs. It should be a 3-level 
looping.
Anyways ds.GetNextFeature() should be easier

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From winwaed at gmail.com  Fri Sep 27 16:36:49 2019
From: winwaed at gmail.com (Richard Marsden)
Date: Fri, 27 Sep 2019 18:36:49 -0500
Subject: [gdal-dev] Importing OSM: closed ways being skipped
In-Reply-To: <2325881.xhFu9Sj6ON@even-i700>
References: <CAANKLwhUaf1k79LLCb6LZ_HtArty4RiR2mmRHa7MgyQQDgnvqg@mail.gmail.com>
 <1679109.tctaPTJTfo@even-i700>
 <CAANKLwjc=5qG2C-VG0M_pJ6Rv4AYPuxWH9wN_egv3gcefeFuQg@mail.gmail.com>
 <2325881.xhFu9Sj6ON@even-i700>
Message-ID: <CAANKLwj7KYVse9oqFRMR9gp3F7Pvg8=JwUYgFf2cruWyL=w8nQ@mail.gmail.com>

Even,
Thanks - yes that makes sense now - the third looping until no
features are fetched from any of the layers, and so handling any order
of feature types as well as inter-dependencies. I guess I was
mis-interpreting that step.

Just tried ds.GetNextFeature() - worked first time!  Yes much simpler.
I'm currently only getting the feature and layer, but I see there is a
percent complete option - that might be useful for progress
indication. I'm currently providing features read and features
processed.

Thanks once again,

Richard


On Fri, Sep 27, 2019 at 5:06 PM Even Rouault <even.rouault at spatialys.com> wrote:
>
> On vendredi 27 septembre 2019 16:58:08 CEST Richard Marsden wrote:
> > Even,
> >
> > Thanks  - I'll have a look at ds.GetNextFeature().  I'll note that the
> > sample (C++) code on the interleaved reading section, is where I got
> > the double loop that looped over layers, and then features within that
> > layer. This led me astray because it loops over the layers in index
> > order - doing this results in the closed ways being skipped.
>
> No, your code doesn't implement the code of the docs. It should be a 3-level
> looping.
> Anyways ds.GetNextFeature() should be easier
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From Stefan.Blumentrath at nina.no  Mon Sep 30 01:19:41 2019
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Mon, 30 Sep 2019 08:19:41 +0000
Subject: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora
Message-ID: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>

Hi gdal-devs,

GDAL on PyPi is already at version 3, while e.g. Ubuntu and Fedora still ship GDAL 2.
Thus, downstream Python packages that do not particularly specify to depend on GDAL <3 fail to build via pip3, cause pip3 tires to install Python bindings for GDAL 3, which is missing on the system.

Would it be possible for the GDAL package on PyPi to check for and pick up the (latest) GDAL version installed in the system?

That would make it a bit more convenient for users and maintainers of downstream packages I guess...

Cheers
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190930/aff65200/attachment.html>

From mateusz at loskot.net  Mon Sep 30 02:21:16 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 30 Sep 2019 11:21:16 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
Message-ID: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>

Hi,

I'm a bit lost where build requirements are supposed
to be documented now. They used to be described
on the Wiki, e.g. https://trac.osgeo.org/gdal/wiki/BuildingOnUnix
or driver-specific ones https://trac.osgeo.org/gdal/wiki/ECW

For example, where unixODBC requirements should be advertised,
to avoid questions like https://github.com/OSGeo/gdal/issues/1895

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Sep 30 03:33:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 12:33:25 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
In-Reply-To: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
References: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
Message-ID: <1660509.EYkVnefIB9@even-i700>

On lundi 30 septembre 2019 11:21:16 CEST Mateusz Loskot wrote:
> Hi,
> 
> I'm a bit lost where build requirements are supposed
> to be documented now. They used to be described
> on the Wiki, e.g. https://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> or driver-specific ones https://trac.osgeo.org/gdal/wiki/ECW

Open question. We should probably have one or several pages on the website 
with build instructions. And for driver specific things, move them in the page 
of the driver

> 
> For example, where unixODBC requirements should be advertised,
> to avoid questions like https://github.com/OSGeo/gdal/issues/1895

The error is strange. cpl_odbc.cpp shouldn't even have been built if sql.h 
isn't there. There must be a flaw in configure.ac

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Sep 30 03:35:08 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 12:35:08 +0200
Subject: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora
In-Reply-To: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
References: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
Message-ID: <2528991.YPfin8ueBF@even-i700>

On lundi 30 septembre 2019 08:19:41 CEST Stefan Blumentrath wrote:
> Hi gdal-devs,
> 
> GDAL on PyPi is already at version 3, while e.g. Ubuntu and Fedora still
> ship GDAL 2. Thus, downstream Python packages that do not particularly
> specify to depend on GDAL <3 fail to build via pip3, cause pip3 tires to
> install Python bindings for GDAL 3, which is missing on the system.
> 
> Would it be possible for the GDAL package on PyPi to check for and pick up
> the (latest) GDAL version installed in the system?

I don't think that's something GDAL has control over. This is a pure pip 
behaviour. Users should definitely specify the version of GDAL for which they 
have the native library installed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cdelancy at blackfangtechnologies.com  Mon Sep 30 03:42:32 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Mon, 30 Sep 2019 03:42:32 -0700 (MST)
Subject: [gdal-dev] GDAL can't read values from new raster dataset,
 but Global Mapper can
Message-ID: <1569840152858-0.post@n6.nabble.com>

Hello. I am using GDAL 3 in a c++ project. I have found that GDAL does not
seem to properly read values from raster datasets that it has created. For
example, if I create a new raster dataset with one band and read the min and
max values from that band, it always returns -4294967295.0 and 4294967295.0.
If I fill the band with 0, it still returns -4294967295.0 and 4294967295.0.
If I write to it from a dataset that I have opened from file using a chunk
and warp operation, it still returns those values.

I have tried using both the Mem and GeoTiff drivers. However, if I use the
GeoTiff driver, I can open the resulting file on disk with Global Mapper.
When I copy the projection and geotransform from a source dataset to this
one, and then perform a warp, GDAL still reads -4294967295.0 and
4294967295.0 as the min and max. Strangely, in Global Mapper, it is exactly
as I would expect, demonstrating that the warp operation worked, at least to
some extent. The elevation values match the original file, and it is
properly georeferenced. 

Does anyone have any suggestions I could look into to explain this behavior?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Sep 30 03:51:17 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 12:51:17 +0200
Subject: [gdal-dev] GDAL can't read values from new raster dataset,
	but Global Mapper can
In-Reply-To: <1569840152858-0.post@n6.nabble.com>
References: <1569840152858-0.post@n6.nabble.com>
Message-ID: <2432991.VVXk4WQfRj@even-i700>

On lundi 30 septembre 2019 03:42:32 CEST CDelancy wrote:
> Hello. I am using GDAL 3 in a c++ project. I have found that GDAL does not
> seem to properly read values from raster datasets that it has created. For
> example, if I create a new raster dataset with one band and read the min and
> max values from that band, it always returns -4294967295.0 and
> 4294967295.0.

With which API ? With GetMinimum() and GetMaximum() ? In that case, that's the documented behaviour:
https://gdal.org/api/gdalrasterband_cpp.html#classGDALRasterBand_1a70e048ffc6b33cea685897ce8068a7e8
"""
Fetch the minimum value for this band.

For file formats that don’t know this intrinsically, the minimum supported value for the data type will generally be returned.
"""

Look at ComputeStatistics() or ComputeRasterMinMax():
https://gdal.org/api/gdalrasterband_cpp.html#_CPPv4N14GDALRasterBand17ComputeStatisticsEiPdPdPdPd16GDALProgressFuncPv
https://gdal.org/api/gdalrasterband_cpp.html#_CPPv4N14GDALRasterBand19ComputeRasterMinMaxEiPd

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Stefan.Blumentrath at nina.no  Mon Sep 30 05:02:55 2019
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Mon, 30 Sep 2019 12:02:55 +0000
Subject: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora
In-Reply-To: <2528991.YPfin8ueBF@even-i700>
References: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
 <2528991.YPfin8ueBF@even-i700>
Message-ID: <HE1PR0202MB28757CC8D8869659316927AD9E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>

Hi Even,

And thanks for your swift reply.

If I install Python bindings like:
pip3 install gdal==2.4.2
installation works fine.

However, if I then install nansat:
pip3 install nansat
then pip3 tries to re-install GDALs python bindings for GDAL version 3 (which fails).

So, users are caught up in package-mismatches and I was wondering if it would be possible to have something like:

import subprocess
gdal_version = None
try:
    gdal_version = subprocess.check_output(['gdal-config', '--version']).decode('utf8').strip('\n')
except:
    print('Warning: Could not identify GDAL version, using default!')
if not gdal_version:
    gdal_version = '3.0.0'
    
in setup.py for the Python bindings.

But maybe that messes too much with how pip is supposed to work...?

Cheers
Stefan

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: mandag 30. september 2019 12:35
To: gdal-dev at lists.osgeo.org
Cc: Stefan Blumentrath <Stefan.Blumentrath at nina.no>
Subject: Re: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora

On lundi 30 septembre 2019 08:19:41 CEST Stefan Blumentrath wrote:
> Hi gdal-devs,
> 
> GDAL on PyPi is already at version 3, while e.g. Ubuntu and Fedora 
> still ship GDAL 2. Thus, downstream Python packages that do not 
> particularly specify to depend on GDAL <3 fail to build via pip3, 
> cause pip3 tires to install Python bindings for GDAL 3, which is missing on the system.
> 
> Would it be possible for the GDAL package on PyPi to check for and 
> pick up the (latest) GDAL version installed in the system?

I don't think that's something GDAL has control over. This is a pure pip behaviour. Users should definitely specify the version of GDAL for which they have the native library installed.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From mateusz at loskot.net  Mon Sep 30 05:07:44 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 30 Sep 2019 14:07:44 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
In-Reply-To: <1660509.EYkVnefIB9@even-i700>
References: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
 <1660509.EYkVnefIB9@even-i700>
Message-ID: <CABUeae8yFjqLtn4eiYd81+TsfH2vDaL06YCzC1L0JwW-_GZn_Q@mail.gmail.com>

On Mon, 30 Sep 2019 at 12:33, Even Rouault <even.rouault at spatialys.com> wrote:
> On lundi 30 septembre 2019 11:21:16 CEST Mateusz Loskot wrote:
> >
> > I'm a bit lost where build requirements are supposed
> > to be documented now. They used to be described
> > on the Wiki, e.g. https://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> > or driver-specific ones https://trac.osgeo.org/gdal/wiki/ECW
>
> Open question. We should probably have one or several pages on the website
> with build instructions. And for driver specific things, move them in the page
> of the driver

I think a simple yet clean convention could be that each driver that
has any build requirements receives extra section(s):

"Building" section with "Unix" and "Windows" subsections
where requirements are explained

as last sections of driver's page.
Comments?

> > For example, where unixODBC requirements should be advertised,
> > to avoid questions like https://github.com/OSGeo/gdal/issues/1895
>
> The error is strange. cpl_odbc.cpp shouldn't even have been built if sql.h
> isn't there. There must be a flaw in configure.ac

AFAICT, current master behaves correctly on Linux w/o unixODBC.

Best regards.
--
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Sep 30 05:34:17 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 14:34:17 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
In-Reply-To: <CABUeae8yFjqLtn4eiYd81+TsfH2vDaL06YCzC1L0JwW-_GZn_Q@mail.gmail.com>
References: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
 <1660509.EYkVnefIB9@even-i700>
 <CABUeae8yFjqLtn4eiYd81+TsfH2vDaL06YCzC1L0JwW-_GZn_Q@mail.gmail.com>
Message-ID: <4156435.S34SAUaI6x@even-i700>

On lundi 30 septembre 2019 14:07:44 CEST Mateusz Loskot wrote:
> On Mon, 30 Sep 2019 at 12:33, Even Rouault <even.rouault at spatialys.com> 
wrote:
> > On lundi 30 septembre 2019 11:21:16 CEST Mateusz Loskot wrote:
> > > I'm a bit lost where build requirements are supposed
> > > to be documented now. They used to be described
> > > on the Wiki, e.g. https://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> > > or driver-specific ones https://trac.osgeo.org/gdal/wiki/ECW
> > 
> > Open question. We should probably have one or several pages on the website
> > with build instructions. And for driver specific things, move them in the
> > page of the driver
> 
> I think a simple yet clean convention could be that each driver that
> has any build requirements receives extra section(s):
> 
> "Building" section with "Unix" and "Windows" subsections
> where requirements are explained
> 
> as last sections of driver's page.
> Comments?

Sounds good. But for example multiple drivers depend on the same library 
(let's say sqlite3, expat, etc.), so we don't want to repeat how to enable 
that library for each driver (so links to some common description would be 
preferable then). There's also the issue that for unix, the name of the 
packages depend on the OS or the particular distro, or the distro version, so 
we cannot document everything.

I'd say that we should at the very minimum recover the information that used 
to be in the "Compiled by default" column of
https://github.com/OSGeo/gdal/blob/release/3.0/gdal/frmts/formats_list.html

That would address the comments in 
https://github.com/OSGeo/gdal/issues/1715
https://github.com/OSGeo/gdal/issues/1204

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Sep 30 05:36:15 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 14:36:15 +0200
Subject: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora
In-Reply-To: <HE1PR0202MB28757CC8D8869659316927AD9E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
References: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
 <2528991.YPfin8ueBF@even-i700>
 <HE1PR0202MB28757CC8D8869659316927AD9E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
Message-ID: <1740939.HFhYZtzbRq@even-i700>

On lundi 30 septembre 2019 12:02:55 CEST Stefan Blumentrath wrote:
> Hi Even,
> 
> And thanks for your swift reply.
> 
> If I install Python bindings like:
> pip3 install gdal==2.4.2
> installation works fine.
> 
> However, if I then install nansat:
> pip3 install nansat
> then pip3 tries to re-install GDALs python bindings for GDAL version 3
> (which fails).
> 
> So, users are caught up in package-mismatches and I was wondering if it
> would be possible to have something like:
> 
> import subprocess
> gdal_version = None
> try:
>     gdal_version = subprocess.check_output(['gdal-config',
> '--version']).decode('utf8').strip('\n') except:
>     print('Warning: Could not identify GDAL version, using default!')
> if not gdal_version:
>     gdal_version = '3.0.0'
> 
> in setup.py for the Python bindings.
> 
> But maybe that messes too much with how pip is supposed to work...?

Can't work. Once pip has downloaded a given version of the GDAL python 
bindings, the setup.py of that package can only built the bindings for that 
particular version, not earlier versions.

That's one of the issue/feature with pip and Python modules that use native 
library. The other approach would be to use wheels, but that's another can of 
worms

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From fernando.aristizabal at noaa.gov  Mon Sep 30 06:58:18 2019
From: fernando.aristizabal at noaa.gov (Fernando Aristizabal - NOAA Affiliate)
Date: Mon, 30 Sep 2019 08:58:18 -0500
Subject: [gdal-dev] ERROR 1: Does not appear to be a USGS DEM file
Message-ID: <CAJmvFw6eZKgtP+5gLQQD5j1qPr16y230QhSpHC7HKnC_Au=2kg@mail.gmail.com>

GDAL does not seem to recognize some FEMA generated Lidar datasets that are
presented in USGS DEM (.dem) file formats. The files open fine in ArcGIS.

Running:
$ gdalinfo fema06-140cm_2995441b.dem
ERROR 1: Does not appear to be a USGS DEM file
gdalinfo failed - unable to open 'fema06-140cm_2995441b.dem'.

The files can be viewed at:
https://data.tnris.org/collection/8ea19b45-7a66-4e95-9833-f9e89611d106

but a direct download link for one of the archives (~20MB) is:
https://s3.amazonaws.com/data.tnris.org/8ea19b45-7a66-4e95-9833-f9e89611d106/resources/fema06-140cm-coastal_2995441_dem.zip

Opening the ASCII files doesn't seem to reveal anything very far off but
maybe the headers are off a bit.

Thanks for the help


-- 
Best,

Fernando Aristizabal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190930/3b493d83/attachment.html>

From sean at mapbox.com  Mon Sep 30 07:38:02 2019
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 30 Sep 2019 08:38:02 -0600
Subject: [gdal-dev] Packages on PyPi vs. Ubuntu/Fedora
In-Reply-To: <HE1PR0202MB28757CC8D8869659316927AD9E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
References: <HE1PR0202MB28755A3DC4B3C4B76EAE42099E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
 <2528991.YPfin8ueBF@even-i700>
 <HE1PR0202MB28757CC8D8869659316927AD9E820@HE1PR0202MB2875.eurprd02.prod.outlook.com>
Message-ID: <CADPhZXyG_QK_P6tHbFL-SSJjogGwOeF_i_SoaVMnT54U4BShQQ@mail.gmail.com>

Hi Stefan,

On Mon, Sep 30, 2019 at 6:03 AM Stefan Blumentrath <
Stefan.Blumentrath at nina.no> wrote:

> Hi Even,
>
> And thanks for your swift reply.
>
> If I install Python bindings like:
> pip3 install gdal==2.4.2
> installation works fine.
>
> However, if I then install nansat:
> pip3 install nansat
> then pip3 tries to re-install GDALs python bindings for GDAL version 3
> (which fails).

...



The nansat package does not specify a dependency on a specific gdal
version. See https://github.com/nansencenter/nansat/blob/master/setup.py#L58.
Pip should not attempt to upgrade gdal when installing nansat because 2.4.2
is already installed and meets the requirements.

$ pip -V
pip 19.2.3 from
/home/sean/.virtualenvs/nansat/lib/python3.6/site-packages/pip (python 3.6)
$ pip install gdal==2.4.2
$ pip install nansat
$ pip list
Package         Version
--------------- ---------
certifi         2019.9.11
chardet         3.0.4
GDAL            2.4.2
idna            2.8
nansat          1.2.2
numpy           1.17.2
Pillow          6.1.0
pip             19.2.3
pythesint       1.4.7
python-dateutil 2.8.0
PyYAML          5.1.2
requests        2.22.0
setuptools      41.2.0
six             1.12.0
urllib3         1.25.6
wheel           0.33.6
xdg             1.0.7

I think there is something else going on with your system. Do you have a
much older version of pip? Or is there a script that is executing `pip
install -U nansat`?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190930/c3f5889b/attachment.html>

From even.rouault at spatialys.com  Mon Sep 30 07:54:49 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 16:54:49 +0200
Subject: [gdal-dev] ERROR 1: Does not appear to be a USGS DEM file
In-Reply-To: <CAJmvFw6eZKgtP+5gLQQD5j1qPr16y230QhSpHC7HKnC_Au=2kg@mail.gmail.com>
References: <CAJmvFw6eZKgtP+5gLQQD5j1qPr16y230QhSpHC7HKnC_Au=2kg@mail.gmail.com>
Message-ID: <2823576.vyQNLs5kRW@even-i700>

On lundi 30 septembre 2019 08:58:18 CEST Fernando Aristizabal - NOAA Affiliate 
wrote:
> FEMA generated Lidar datasets

I've just committed
https://github.com/OSGeo/gdal/commit/e6196ddef3ef73652eedef2c2daf73c087ebf4f2
which should fix reading those datasets

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Mon Sep 30 11:10:38 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 30 Sep 2019 20:10:38 +0200
Subject: [gdal-dev] Generating Viewsheds without Using Sightlines
Message-ID: <CACALY+S81zxp58geHX48U_6H5EKv3mSOyp0XymPFF+niaW1kZg@mail.gmail.com>

Hi,

I've implemented a viewshed algorithm a while ago, by utilizing a modified
version of the algorithm published at
https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_87-90.pdf

With this approach, it was crucial to provide a fast real-time option for
the viewshed calculation on relatively large raster DEMs by using only a
small memory footprint.

The implementation can be found here:

https://github.com/szekerest/gdal/blob/viewshed/gdal/alg/viewshed.cpp
https://github.com/szekerest/gdal/blob/viewshed/gdal/apps/gdal_viewshed.cpp

Does it make sense to spend some more effort and incorporate this approach
in GDAL officially?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190930/33759034/attachment-0001.html>

From even.rouault at spatialys.com  Mon Sep 30 11:54:36 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 20:54:36 +0200
Subject: [gdal-dev] Generating Viewsheds without Using Sightlines
In-Reply-To: <CACALY+S81zxp58geHX48U_6H5EKv3mSOyp0XymPFF+niaW1kZg@mail.gmail.com>
References: <CACALY+S81zxp58geHX48U_6H5EKv3mSOyp0XymPFF+niaW1kZg@mail.gmail.com>
Message-ID: <1731640.ke79XvHkjB@even-i700>

On lundi 30 septembre 2019 20:10:38 CEST Tamas Szekeres wrote:
> Hi,
> 
> I've implemented a viewshed algorithm a while ago, by utilizing a modified
> version of the algorithm published at
> https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_8
> 7-90.pdf
> 
> With this approach, it was crucial to provide a fast real-time option for
> the viewshed calculation on relatively large raster DEMs by using only a
> small memory footprint.
> 
> The implementation can be found here:
> 
> https://github.com/szekerest/gdal/blob/viewshed/gdal/alg/viewshed.cpp
> https://github.com/szekerest/gdal/blob/viewshed/gdal/apps/gdal_viewshed.cpp
> 
> Does it make sense to spend some more effort and incorporate this approach
> in GDAL officially?

Sounds useful to me ! 
(old memories of having implement line-of-sight based intervisibility 
algorithm in a past life !)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From eadam at co.lincoln.or.us  Mon Sep 30 12:34:51 2019
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 30 Sep 2019 12:34:51 -0700
Subject: [gdal-dev] Generating Viewsheds without Using Sightlines
In-Reply-To: <1731640.ke79XvHkjB@even-i700>
References: <CACALY+S81zxp58geHX48U_6H5EKv3mSOyp0XymPFF+niaW1kZg@mail.gmail.com>
 <1731640.ke79XvHkjB@even-i700>
Message-ID: <CACqBkM9tKPqrA6POLNLBysARP1=9ZvmVK0ZF6r9XfT2tRUe35g@mail.gmail.com>

On Mon, Sep 30, 2019 at 11:54 AM Even Rouault
<even.rouault at spatialys.com> wrote:
>
> On lundi 30 septembre 2019 20:10:38 CEST Tamas Szekeres wrote:
> > Hi,
> >
> > I've implemented a viewshed algorithm a while ago, by utilizing a modified
> > version of the algorithm published at
> > https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_8
> > 7-90.pdf
> >
> > With this approach, it was crucial to provide a fast real-time option for
> > the viewshed calculation on relatively large raster DEMs by using only a
> > small memory footprint.
> >
> > The implementation can be found here:
> >
> > https://github.com/szekerest/gdal/blob/viewshed/gdal/alg/viewshed.cpp
> > https://github.com/szekerest/gdal/blob/viewshed/gdal/apps/gdal_viewshed.cpp
> >
> > Does it make sense to spend some more effort and incorporate this approach
> > in GDAL officially?
>
> Sounds useful to me !
> (old memories of having implement line-of-sight based intervisibility
> algorithm in a past life !)

Gdaldem (although it has a different history) has an assortment of DEM
based utilities, https://gdal.org/programs/gdaldem.html  I'm not sure
if it would make sense there or elsewhere.  It would be a useful tool.

Best regards, Eli



>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Mon Sep 30 12:57:08 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 30 Sep 2019 21:57:08 +0200
Subject: [gdal-dev] Generating Viewsheds without Using Sightlines
In-Reply-To: <CACqBkM9tKPqrA6POLNLBysARP1=9ZvmVK0ZF6r9XfT2tRUe35g@mail.gmail.com>
References: <CACALY+S81zxp58geHX48U_6H5EKv3mSOyp0XymPFF+niaW1kZg@mail.gmail.com>
 <1731640.ke79XvHkjB@even-i700>
 <CACqBkM9tKPqrA6POLNLBysARP1=9ZvmVK0ZF6r9XfT2tRUe35g@mail.gmail.com>
Message-ID: <CACALY+S3DurZLpj3Ry+QH8AmkHdM2hLE45aSZk7afvba0q_Fqw@mail.gmail.com>

As far as I see, the size of the output raster is equal to the input size
with the gdaldem utility set.
With the viewshed approach, the size of the output raster is calculated
according to the provided parameters (ie. the observer location and
maxdistance), however it is a good idea to allow the user customize the
output format is some way.

Best regards,

Tamas


Eli Adam <eadam at co.lincoln.or.us> ezt írta (időpont: 2019. szept. 30., H,
21:35):

> On Mon, Sep 30, 2019 at 11:54 AM Even Rouault
> <even.rouault at spatialys.com> wrote:
> >
> > On lundi 30 septembre 2019 20:10:38 CEST Tamas Szekeres wrote:
> > > Hi,
> > >
> > > I've implemented a viewshed algorithm a while ago, by utilizing a
> modified
> > > version of the algorithm published at
> > >
> https://www.asprs.org/wp-content/uploads/pers/2000journal/january/2000_jan_8
> > > 7-90.pdf
> > >
> > > With this approach, it was crucial to provide a fast real-time option
> for
> > > the viewshed calculation on relatively large raster DEMs by using only
> a
> > > small memory footprint.
> > >
> > > The implementation can be found here:
> > >
> > > https://github.com/szekerest/gdal/blob/viewshed/gdal/alg/viewshed.cpp
> > >
> https://github.com/szekerest/gdal/blob/viewshed/gdal/apps/gdal_viewshed.cpp
> > >
> > > Does it make sense to spend some more effort and incorporate this
> approach
> > > in GDAL officially?
> >
> > Sounds useful to me !
> > (old memories of having implement line-of-sight based intervisibility
> > algorithm in a past life !)
>
> Gdaldem (although it has a different history) has an assortment of DEM
> based utilities, https://gdal.org/programs/gdaldem.html  I'm not sure
> if it would make sense there or elsewhere.  It would be a useful tool.
>
> Best regards, Eli
>
>
>
> >
> > Even
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190930/c3b5c6de/attachment.html>

From mateusz at loskot.net  Mon Sep 30 13:39:13 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 30 Sep 2019 22:39:13 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
In-Reply-To: <4156435.S34SAUaI6x@even-i700>
References: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
 <1660509.EYkVnefIB9@even-i700>
 <CABUeae8yFjqLtn4eiYd81+TsfH2vDaL06YCzC1L0JwW-_GZn_Q@mail.gmail.com>
 <4156435.S34SAUaI6x@even-i700>
Message-ID: <CABUeae8QWrF98KGHPFuaG=30z4arUy=pvfJpv+iA6dBSNo1Naw@mail.gmail.com>

On Mon, 30 Sep 2019 at 14:34, Even Rouault <even.rouault at spatialys.com> wrote:
>
> I'd say that we should at the very minimum recover the information that used
> to be in the "Compiled by default" column of
> https://github.com/OSGeo/gdal/blob/release/3.0/gdal/frmts/formats_list.html
>
> That would address the comments in
> https://github.com/OSGeo/gdal/issues/1715
> https://github.com/OSGeo/gdal/issues/1204

This is related but I take it as a sub-issue, so let's address it separately:
in Minneapolis, didn't we discuss a dedicated Sphinx directive?
(if I correctly remember the name of the feature)

Something that would add an indicator to each driver's page
like so https://github.com/OSGeo/gdal/issues/1204#issuecomment-502399654
and allow to script-generate a table or add the indicator to the
drivers listings.

I can't recall any more technical details of that.
Does anyone remember what was the idea about?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Sep 30 13:56:03 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Sep 2019 22:56:03 +0200
Subject: [gdal-dev] Documenting build requirements (e.g. ODBC)
In-Reply-To: <CABUeae8QWrF98KGHPFuaG=30z4arUy=pvfJpv+iA6dBSNo1Naw@mail.gmail.com>
References: <CABUeae8QErHhABrvZQFQ8MsSVK9_aJ0BWVYRReAXZ8Q+=v8s0w@mail.gmail.com>
 <4156435.S34SAUaI6x@even-i700>
 <CABUeae8QWrF98KGHPFuaG=30z4arUy=pvfJpv+iA6dBSNo1Naw@mail.gmail.com>
Message-ID: <2199604.obdtv7kM3K@even-i700>

On lundi 30 septembre 2019 22:39:13 CEST Mateusz Loskot wrote:
> On Mon, 30 Sep 2019 at 14:34, Even Rouault <even.rouault at spatialys.com> 
wrote:
> > I'd say that we should at the very minimum recover the information that
> > used to be in the "Compiled by default" column of
> > https://github.com/OSGeo/gdal/blob/release/3.0/gdal/frmts/formats_list.htm
> > l
> > 
> > That would address the comments in
> > https://github.com/OSGeo/gdal/issues/1715
> > https://github.com/OSGeo/gdal/issues/1204
> 
> This is related but I take it as a sub-issue, so let's address it
> separately: in Minneapolis, didn't we discuss a dedicated Sphinx directive?
> (if I correctly remember the name of the feature)
> 
> Something that would add an indicator to each driver's page
> like so https://github.com/OSGeo/gdal/issues/1204#issuecomment-502399654
> and allow to script-generate a table or add the indicator to the
> drivers listings.
> 
> I can't recall any more technical details of that.
> Does anyone remember what was the idea about?

We do have a few directives: shortname, supports_createcopy, 
supports_virtualio, etc.

See doc/source/_extensions/driverproperties.py

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

