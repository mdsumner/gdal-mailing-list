From daniele.romagnoli at geo-solutions.it  Mon Aug  1 03:24:32 2016
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Mon, 1 Aug 2016 12:24:32 +0200
Subject: [gdal-dev] Question on GDAL using libjpegturbo.
Message-ID: <CAJaHrDzoPvpwTgzJnmey132LhLj66zDQa9dP4_shqf401p_ttg@mail.gmail.com>

Hi List,
we are doing some performance tests with gdal operations (translate, warp,
...) and we are rewriting our output files as GeoTIFF with JPEG compression
and YCBCR Photometric interpretation.
We would like to involve libjpegturbo on that so I have a couple of
questions on the topic.
Before starting the new tests we have built a standard GDAL 2.1 version (on
Centos 7) and did some "benchmarks".

Now we would like redo the tests using libjpegturbo.
1) Should we re-build GDAL once libjpegturbo is installed on the machine?
In that case, is there any explicit setting to be provided to ./configure
or any output message from the ./configure confirming that libjpegturbo
will be used?
2) is there any CPL_DEBUG similar env var to be configured to better know
what is happening when running the gdal utilities in relation to the
libjpegturbo usage?

I have already taken a look to the GDAL JPEG format page but it doesn't say
too much.

*"It is also possible to use the JPEG driver with the libjpeg-turbo, a
version of libjpeg, API and ABI compatible with IJG libjpeg-6b, which uses
MMX, SSE, and SSE2 SIMD instructions to accelerate baseline JPEG
compression/decompression"*
Thanks in advance.
Cheers,
Daniele


-- 
==
GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

*AVVERTENZE AI SENSI DEL D.Lgs. 196/2003*

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.



The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160801/d5b4fe41/attachment.html>

From 191980 at niuitmo.ru  Mon Aug  1 00:20:57 2016
From: 191980 at niuitmo.ru (=?koi8-r?B?4s/S2tnIIOHMxcvTwc7E0iDhzsTSxcXXyd4=?=)
Date: Mon, 1 Aug 2016 07:20:57 +0000
Subject: [gdal-dev] GSoC GDAL DWG Support [Week 10]
Message-ID: <AMSPR01MB29459FCC4111295EF8F5976B6040@AMSPR01MB294.eurprd01.prod.exchangelabs.com>

Blogpost <http://gsoc2016gdaldwg.blogspot.ru/2016/07/week-9-report.html> link<http://gsoc2016gdaldwg.blogspot.ru/2016/07/week-10-report.html>.


1. This week I've done:

Pull request to GDAL-trunk was opened<https://github.com/OSGeo/gdal/pull/145>.

OGR CAD Driver changes:

- Python tests are done.

- Code style fixes, memory leaks removements.

- Custom geometries attributes support (which are taken from BlockReference attdefs). Example in blogpost.

- Code refactoring and cleaning.


2. Plan on doing next week:

Fix builds (travis/windows), testing and documentation update.


3. Blocking:

None.


Best regards,

Alexandr Borzykh


Links:

libopencad github<https://github.com/sandyre/libopencad>

gdal + libopencad fork github<https://github.com/sandyre/gdal_libopencad>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160801/a87a0f7a/attachment.html>

From francisco.javier.calzado at ericsson.com  Mon Aug  1 06:57:44 2016
From: francisco.javier.calzado at ericsson.com (Francisco Javier Calzado)
Date: Mon, 1 Aug 2016 13:57:44 +0000
Subject: [gdal-dev] Multithreading issue on pixel-based intensive access
 (GDAL 2.1.0)
In-Reply-To: <3263018.0GIK8gnYoZ@even-n550jk>
References: <loom.20160727T124642-372@post.gmane.org>
 <1546040.dbNMDothQ9@even-n550jk>
 <6BA6E0BBA9988E428FA9178AB0B28B485762A272@ESESSMB205.ericsson.se>
 <3263018.0GIK8gnYoZ@even-n550jk>
Message-ID: <6BA6E0BBA9988E428FA9178AB0B28B48576339BF@ESESSMB205.ericsson.se>

Thank you so much Even, it is working now!

I will check the link and send my driver code soon.

Javier.

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: 30 July, 2016 17:10
To: Francisco Javier Calzado <francisco.javier.calzado at ericsson.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Multithreading issue on pixel-based intensive access (GDAL 2.1.0)

Javier,

> I have attached a simple code to reproduce it (Test.cpp). If you need 
> the whole solution just ask me, although it is a very simple console 
> test. I have also shared with you the zipped datasets through this link:
> https://drive.google.com/file/d/0B-OCl1FjBi0YblRPRGZlQWx4eEE/view?usp=
> shari ng Just place them along with Test.exe file.

I managed to reproduce on Linux after some compilation fixes in your driver (constants _UI8_MAX and similar ones aren't recognized. I just commented out that code), and changing your Test.cpp to use GDAL thread machinery, since std::future/std::async doesn't create threads with gcc (4.8.4) for some reason but runs everything sequentially in the main thread.
The issue was that the call to GDALSetCacheMax() prevented the raster block mutex from being created. Fixed per https://trac.osgeo.org/gdal/ticket/6611. 
As a workaround you can call GDALGetCacheMax() just before.

> 
> IMPORTANT: Bear in mind that these datasets come in a format still not 
> supported officially by GDAL, as I am developing the driver. It is 
> almost finished (just a few details pending) and fully working. Find 
> the driver attached (Wizard_Driver.7z). By the way, what do we have to 
> do to contribute with this new driver for GDAL?

See https://trac.osgeo.org/gdal/wiki/HowToContribute

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Mon Aug  1 08:04:59 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Aug 2016 17:04:59 +0200
Subject: [gdal-dev] Question on GDAL using libjpegturbo.
In-Reply-To: <CAJaHrDzoPvpwTgzJnmey132LhLj66zDQa9dP4_shqf401p_ttg@mail.gmail.com>
References: <CAJaHrDzoPvpwTgzJnmey132LhLj66zDQa9dP4_shqf401p_ttg@mail.gmail.com>
Message-ID: <133646008.7hfamofZIN@even-n550jk>

Daniele,

There's generally nothing particular to do to make GDAL run against libjpeg-
turbo. libjpeg-turbo has been the default libjpeg on Ubuntu since a long time. 
Not sure about CentOS. libjpeg-turbo can be built to be compatible with IJG 
libjpeg ABI, 6b or 7 if I remember well (this is a ./configure switch of 
libjpeg-turbo). So if your GDAL is built against standard libjpeg, you need to 
make sure to build libjpeg-turbo with the same ABI as the standard libjpeg. 
Otherwise you'd need to rebuild GDAL against libjpeg-turbo. You can do that 
with ./configure --with-jpeg=/path/to/install/prefix/of/libjpeg-turbo

Even

> Hi List,
> we are doing some performance tests with gdal operations (translate, warp,
> ...) and we are rewriting our output files as GeoTIFF with JPEG compression
> and YCBCR Photometric interpretation.
> We would like to involve libjpegturbo on that so I have a couple of
> questions on the topic.
> Before starting the new tests we have built a standard GDAL 2.1 version (on
> Centos 7) and did some "benchmarks".
> 
> Now we would like redo the tests using libjpegturbo.
> 1) Should we re-build GDAL once libjpegturbo is installed on the machine?
> In that case, is there any explicit setting to be provided to ./configure
> or any output message from the ./configure confirming that libjpegturbo
> will be used?
> 2) is there any CPL_DEBUG similar env var to be configured to better know
> what is happening when running the gdal utilities in relation to the
> libjpegturbo usage?
> 
> I have already taken a look to the GDAL JPEG format page but it doesn't say
> too much.
> 
> *"It is also possible to use the JPEG driver with the libjpeg-turbo, a
> version of libjpeg, API and ABI compatible with IJG libjpeg-6b, which uses
> MMX, SSE, and SSE2 SIMD instructions to accelerate baseline JPEG
> compression/decompression"*
> Thanks in advance.
> Cheers,
> Daniele

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From LPlesea at esri.com  Mon Aug  1 12:23:50 2016
From: LPlesea at esri.com (Lucian Plesea)
Date: Mon, 1 Aug 2016 19:23:50 +0000
Subject: [gdal-dev] netCDF with VIRTUALIO?
Message-ID: <a383ba30f87341538622c6b18169661e@RED-INF-MXMB-P4.esri.com>

The driver itself doesn't seem to have support, but before I write it off, is there a way to get netCDF to work with virtualIO?

Thank You,

Lucian



From even.rouault at spatialys.com  Mon Aug  1 12:47:45 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Aug 2016 21:47:45 +0200
Subject: [gdal-dev] netCDF with VIRTUALIO?
In-Reply-To: <a383ba30f87341538622c6b18169661e@RED-INF-MXMB-P4.esri.com>
References: <a383ba30f87341538622c6b18169661e@RED-INF-MXMB-P4.esri.com>
Message-ID: <1567751.Fdrzvb1cpx@even-n550jk>

On Monday 01 August 2016 19:23:50 Lucian Plesea wrote:
> The driver itself doesn't seem to have support, but before I write it off,
> is there a way to get netCDF to work with virtualIO?

Lucian,

On Linux, you can use the vsipreload hack : 
https://lists.osgeo.org/pipermail/gdal-dev/2013-May/036359.html

But I'm not sure it is really possible to do a clean virtualIO implementation 
with netCDF since last time I checked it didn't provide an abstraction for file 
operations that could have user implementations.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From LPlesea at esri.com  Mon Aug  1 12:55:39 2016
From: LPlesea at esri.com (Lucian Plesea)
Date: Mon, 1 Aug 2016 19:55:39 +0000
Subject: [gdal-dev] netCDF with VIRTUALIO?
In-Reply-To: <1567751.Fdrzvb1cpx@even-n550jk>
References: <a383ba30f87341538622c6b18169661e@RED-INF-MXMB-P4.esri.com>
 <1567751.Fdrzvb1cpx@even-n550jk>
Message-ID: <3bc355f4885149139104ddf0f0981773@RED-INF-MXMB-P4.esri.com>

Thanks, I'll give it a try!

Lucian

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, August 01, 2016 12:48 PM
To: gdal-dev at lists.osgeo.org
Cc: Lucian Plesea
Subject: Re: [gdal-dev] netCDF with VIRTUALIO?

On Monday 01 August 2016 19:23:50 Lucian Plesea wrote:
> The driver itself doesn't seem to have support, but before I write it 
> off, is there a way to get netCDF to work with virtualIO?

Lucian,

On Linux, you can use the vsipreload hack : 
https://urldefense.proofpoint.com/v2/url?u=https-3A__lists.osgeo.org_pipermail_gdal-2Ddev_2013-2DMay_036359.html&d=CwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=ZN_tL2S6ZCPdMt_gpID_yQ&m=8TR390X7glmDIlHMaRoHnpgdgDe-mltjsG8P3Jk3Fso&s=6ooByMMBQLteINs84mo6C5cybh_DCBrpHPFW8cPtcMg&e= 

But I'm not sure it is really possible to do a clean virtualIO implementation with netCDF since last time I checked it didn't provide an abstraction for file operations that could have user implementations.

Even

--
Spatialys - Geospatial professional services https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spatialys.com&d=CwICAg&c=n6-cguzQvX_tUIrZOS_4Og&r=ZN_tL2S6ZCPdMt_gpID_yQ&m=8TR390X7glmDIlHMaRoHnpgdgDe-mltjsG8P3Jk3Fso&s=a2E7uUlgSEpt3DjDbrupca-Xr08kigG3CQ_tlmQrjPA&e= 

From LPlesea at esri.com  Mon Aug  1 12:38:29 2016
From: LPlesea at esri.com (Lucian Plesea)
Date: Mon, 1 Aug 2016 19:38:29 +0000
Subject: [gdal-dev] Question on GDAL using libjpegturbo
Message-ID: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>

How about 8 and 12 bit JPEG simultaneously, using libjpegturbo?

Thanks,

Lucian



From glendening at drjack.net  Mon Aug  1 13:05:43 2016
From: glendening at drjack.net (John W. Glendening)
Date: Mon, 01 Aug 2016 13:05:43 -0700
Subject: [gdal-dev] DPI for printing in geospatial PDF
Message-ID: <1470081943.1471.70.camel@HP-GLENDENI>

A previous thread
 http://lists.osgeo.org/pipermail/gdal-dev/2015-May/041727.html
discussed the effect of the DPI parameter of the geospatial PDF
driver, one response being

 "It may be that DPI setting at the moment does not have a totally
desired
effect. It would feel natural that increasing DPI from the default value
72
into a bigger value like 300 would make the page size of the PDF smaller
expressed as physical units like millimeters."

I stumbled upon this issue because previously I'd been creating PDFs
using ImageMagick "convert".  I needed to produce page-size printed
maps of an image with having much greater resolution than Adobe's
"standard" 72 dpi so used the convert "-page" option - whereupon
letter-sized prints were automatically generated when printed using
Adobe Reader.  [Without that option the same result could be obtained
by selecting Adobe Reader's "Fit to Printable Area" Page Scaling
option - but this file will be printed by others less knowledgeable
than I so I wanted to have one less thing for them to mess up.]

When I decided to create geospatial PDFs using GDAL, the default gave
a file which again required setting "Fit to Printable Area" - so I
looked for a way of avoiding that.  Using the "DPI" option seemed the
obvious answer, but altering it did not have the expected effect -
"Fit to Printable Area" was still required, as previously found by the
poster of the previous thread.

Delving into the PDF file itself, I see the "DPI" option changes not
only the PDF "MediaBox" variable but also its "UserUnit" variable,
such that the printable size is unchanged.

To me that makes no sense, since printing of a PDF is common and in
many cases one wants to print an image at a much higher resolution
than 72 dpi.  I do understand the need to limit the size of "MediaBox"
and the use of "DPI" to reduce the "MediaBox" values.  I note that
when I use IM's convert -print option it _also_ reduces the size of
"MediaBox" - but it did _not_ change "UserUnit", hence the expected
letter-size printed page is produced by IM.

So I'd urge you to also not change the PDF's "UserUnit" when driver
option "DPI" is invoked - that would help those wanting to print
higher-resolution images.  I personally don't know of a reason
why "UserUnit" needs to be changed.

Jack Glendening

PS: personally I have a work-around - after PDF creation within a
script, a command-line editor removes the "UserUnit" parameter from
the PDF.  But it's kludgey and I think the problem would be better
addressed through the "DPI" driver option.




From twhall at umich.edu  Mon Aug  1 16:19:17 2016
From: twhall at umich.edu (twhall)
Date: Mon, 1 Aug 2016 16:19:17 -0700 (PDT)
Subject: [gdal-dev] compile error on windows
In-Reply-To: <CAJzaxHMxEgkyio9kgyY3aBp5zhQv7Zai9_MGUSONLO0_O=xHpw@mail.gmail.com>
References: <CAOm6iLgG6O_6UL7M+GWv0RFL=Htxv2Q8L2g_c9CY1bq5w2PhaA@mail.gmail.com>
 <ac1603d2-0eea-e940-aaf1-6480896aa6ae@uci.edu>
 <CAOm6iLhrsNNve1332vx3TKUb445rO_B3YXPfKAAU5=x1zsaWnA@mail.gmail.com>
 <201605030954.58868.even.rouault@spatialys.com>
 <5728D093.2000400@gatewaygeomatics.com>
 <201605031836.45574.even.rouault@spatialys.com>
 <CAJzaxHMxEgkyio9kgyY3aBp5zhQv7Zai9_MGUSONLO0_O=xHpw@mail.gmail.com>
Message-ID: <1470093557588-5279010.post@n6.nabble.com>

I had previously built HDF5 v1.8.17 as a 64-bit DLL on Windows 10, Visual
Studio 2010.

Today I tried to rebuild GDAL v2.0.2 to include the HDF5 format, but failed
with the undefined symbols as reported by Ryan Grout on Apr. 29.

I followed his advice from May 02, to edit frmts/hdf5/makefile.vc, replacing
-D_HDF5USEDLL_ with -DH5_BUILT_AS_DYNAMIC_LIB, and that fixed the immediate
problem.  GDAL built successfully, though it remains to be seen whether the
HDF5 part actually works.

The dependence on -DH5_BUILT_AS_DYNAMIC_LIB originates in the HDF5 header
H5api_adpt.h:
#ifdef H5_BUILT_AS_DYNAMIC_LIB
   ...
   #define H5_DLL __declspec(dllimport)

Without that, the symbols won't import from the DLL.

I don't see any dependence on _HDF5USEDLL_



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-compile-error-on-windows-tp5263583p5279010.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Tue Aug  2 00:03:07 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Aug 2016 09:03:07 +0200
Subject: [gdal-dev] Question on GDAL using libjpegturbo
In-Reply-To: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>
References: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>
Message-ID: <7466381.dOl1ZSMQCY@even-n550jk>

On Monday 01 August 2016 19:38:29 Lucian Plesea wrote:
> How about 8 and 12 bit JPEG simultaneously, using libjpegturbo?

I'm not sure libjpegturbo can be compiled in 12bit mode. Perhaps it can, but 
in that case I guess that it doesn't have the SIMD optimizations enabled. 
Anyway at the ./configure stage in GDAL we currently only support JPEG 12 with 
GDAL internal libjpeg (ie 6b) compiled in 12bit mode. It works best when 
libjpeg 8bit (either external such as libjpeg/libjpeg-trubo or internal) has 
also 6b ABI. If libjpeg 8bit has not the 6b ABI, JPEG-in-TIFF 12bit will be 
disabled. Other uses of JPEG 12 should work though.

> 
> Thanks,
> 
> Lucian

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Aug  2 00:16:34 2016
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 02 Aug 2016 09:16:34 +0200
Subject: [gdal-dev] Closing connection in Python gdal (too many clients
	already)
Message-ID: <1626047.rsLXYaSZ0P@tatras>

Hello,

I am using gdal 2.1.1 in python. 

When I import several layers into postgis I get a FATAL error : 'sorry, too 
many clients already'. It seems I don't close the connection after each 
import.

I open the connection with dstDS = gdal.OpenEx(connectionString). how can I 
close the connexion? I can't find any method

Thanks,

Y.
PS : I send this question yesterday afternoon on IRC, but I had to leave 
before to get any answer. My apologies if you already answered,
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160802/313f4f76/attachment.sig>

From even.rouault at spatialys.com  Tue Aug  2 00:37:00 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Aug 2016 09:37 +0200
Subject: [gdal-dev] DPI for printing in geospatial PDF
In-Reply-To: <1470081943.1471.70.camel@HP-GLENDENI>
References: <1470081943.1471.70.camel@HP-GLENDENI>
Message-ID: <3041281.yRvVZGvkGr@even-n550jk>

Jack,

Your use case makes sense. The current behaviour is such that when reading, 
the GDAL PDF driver can retrieve the original size in pixels.

I've just committed an improvement that will enable the user to select which 
behaviour he wants.

Here's the doc of the new creation option:

WRITE_USERUNIT=YES/NO: (GDAL >= 2.2)
Whether the UserUnit setting computed from the DPI (UserUnit = DPI / 72.0)
should be recorded in the file. When UserUnit is recorded, the raster size in
pixels recognized by GDAL on reading remains identical to the source raster.
When UserUnit is not recorded, the printed size will depends on the DPI value.
If this parameter is not set, but DPI is specified, then it will default to NO
(so that the printed size depends on the DPI value). If this parameter is not
set and DPI is not specified, then UserUnit will be recorded (so that the
raster size in pixels recognized by GDAL on reading remain identical to the
source raster).

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Aug  2 00:42:56 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Aug 2016 09:42:56 +0200
Subject: [gdal-dev] Closing connection in Python gdal (too many clients
	already)
In-Reply-To: <1626047.rsLXYaSZ0P@tatras>
References: <1626047.rsLXYaSZ0P@tatras>
Message-ID: <15983442.78rKdGRRMt@even-n550jk>

Salut Yves,

> 
> I am using gdal 2.1.1 in python.
> 
> When I import several layers into postgis I get a FATAL error : 'sorry, too
> many clients already'. It seems I don't close the connection after each
> import.
> 
> I open the connection with dstDS = gdal.OpenEx(connectionString). how can I
> close the connexion? I can't find any method

You just need to drop any reference to the dataset, so, assuming it is not 
assigned to another variable, with dstDS = None or del dstDS.

See the "Saving and closing datasets/datasources" section at
https://trac.osgeo.org/gdal/wiki/PythonGotchas

Note: assuming you import layers from the same database, it will be (a tiny 
bit) more efficient if you re-use the same dataset object.

Even

> PS : I send this question yesterday afternoon on IRC, but I had to leave
> before to get any answer. My apologies if you already answered,

IRC logs are archived at http://irclogs.geoapt.com/gdal/


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Aug  2 01:28:09 2016
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 02 Aug 2016 10:28:09 +0200
Subject: [gdal-dev] Closing connection in Python gdal (too many clients
	already)
In-Reply-To: <15983442.78rKdGRRMt@even-n550jk>
References: <1626047.rsLXYaSZ0P@tatras> <15983442.78rKdGRRMt@even-n550jk>
Message-ID: <1726873.H2WJHRgDUR@tatras>

Bonjour Even,

On Tuesday, August 02, 2016 9:42:56 Even Rouault wrote:
> Salut Yves,
> 
> > I am using gdal 2.1.1 in python.
> > 
> > When I import several layers into postgis I get a FATAL error : 'sorry,
> > too
> > many clients already'. It seems I don't close the connection after each
> > import.
> > 
> > I open the connection with dstDS = gdal.OpenEx(connectionString). how can
> > I
> > close the connexion? I can't find any method
> 
> You just need to drop any reference to the dataset, so, assuming it is not
> assigned to another variable, with dstDS = None or del dstDS.
> 
> See the "Saving and closing datasets/datasources" section at
> https://trac.osgeo.org/gdal/wiki/PythonGotchas
> 
> Note: assuming you import layers from the same database, it will be (a tiny
> bit) more efficient if you re-use the same dataset object.
I tried both `del dstDS` and `dstDS = None`, but I still have the problem. I 
tried also to open just one connexion (see code below), but the problem is 
still there. I guess this is an other issue. Could the OGR import is still 
active when I import another file?

>>>
dstDS = gdal.OpenEx(connectionString)

for id in idList:

    srcDS = gdal.OpenEx('/tmp/file_' + str(id) + '.geojson')

    gdal.VectorTranslate(
     dstDS,
     srcDS, 
     format = 'PostgreSQL', 
     layerName='myLayer'
   )
   del srcDS

del dstDS
>>>

Any idea?

Y.


From even.rouault at spatialys.com  Tue Aug  2 01:50:15 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Aug 2016 10:50:15 +0200
Subject: [gdal-dev] Closing connection in Python gdal (too many clients
	already)
In-Reply-To: <1726873.H2WJHRgDUR@tatras>
References: <1626047.rsLXYaSZ0P@tatras> <15983442.78rKdGRRMt@even-n550jk>
 <1726873.H2WJHRgDUR@tatras>
Message-ID: <5090783.SC2V5qNzXc@even-n550jk>

On Tuesday 02 August 2016 10:28:09 Yves Jacolin wrote:
> Bonjour Even,
> 
> On Tuesday, August 02, 2016 9:42:56 Even Rouault wrote:
> > Salut Yves,
> > 
> > > I am using gdal 2.1.1 in python.
> > > 
> > > When I import several layers into postgis I get a FATAL error : 'sorry,
> > > too
> > > many clients already'. It seems I don't close the connection after each
> > > import.
> > > 
> > > I open the connection with dstDS = gdal.OpenEx(connectionString). how
> > > can
> > > I
> > > close the connexion? I can't find any method
> > 
> > You just need to drop any reference to the dataset, so, assuming it is not
> > assigned to another variable, with dstDS = None or del dstDS.
> > 
> > See the "Saving and closing datasets/datasources" section at
> > https://trac.osgeo.org/gdal/wiki/PythonGotchas
> > 
> > Note: assuming you import layers from the same database, it will be (a
> > tiny
> > bit) more efficient if you re-use the same dataset object.
> 
> I tried both `del dstDS` and `dstDS = None`, but I still have the problem. I
> tried also to open just one connexion (see code below), but the problem is
> still there. I guess this is an other issue. Could the OGR import is still
> active when I import another file?
> 
> 
> dstDS = gdal.OpenEx(connectionString)
> 
> for id in idList:
> 
>     srcDS = gdal.OpenEx('/tmp/file_' + str(id) + '.geojson')
> 
>     gdal.VectorTranslate(
>      dstDS,
>      srcDS,
>      format = 'PostgreSQL',
>      layerName='myLayer'
>    )
>    del srcDS
> 
> del dstDS

Ah indeed, it is a different issue.

gdal.VectorTranslate() doesn't currently properly handle the situation where 
you pass a dstDS object but not specify accessMode to be 'append', 'update' or 
'overwrite'. So try adding accessMode = 'append' as an extra argument to 
gdal.VectorTranslate() (if the intent is to append to the same layer)
Could you open a ticket about that ? (in your situation where accessMode is 
not specified but dstDS is specified, accessMode = 'update' should be the 
default behaviour)

And you should also open dstDS with

dstDS = gdal.OpenEx(connectionString, gdal.OF_UPDATE | gdal.OF_VECTOR)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Aug  2 02:02:59 2016
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 02 Aug 2016 11:02:59 +0200
Subject: [gdal-dev] Closing connection in Python gdal (too many clients
	already)
In-Reply-To: <5090783.SC2V5qNzXc@even-n550jk>
References: <1626047.rsLXYaSZ0P@tatras> <1726873.H2WJHRgDUR@tatras>
 <5090783.SC2V5qNzXc@even-n550jk>
Message-ID: <3040851.IBT0cOSejL@tatras>

On Tuesday, August 02, 2016 10:50:15 Even Rouault wrote:
> On Tuesday 02 August 2016 10:28:09 Yves Jacolin wrote:
> > Bonjour Even,
> > 
> > On Tuesday, August 02, 2016 9:42:56 Even Rouault wrote:
> > > Salut Yves,
> > > 
> > > > I am using gdal 2.1.1 in python.
> > > > 
> > > > When I import several layers into postgis I get a FATAL error :
> > > > 'sorry,
> > > > too
> > > > many clients already'. It seems I don't close the connection after
> > > > each
> > > > import.
> > > > 
> > > > I open the connection with dstDS = gdal.OpenEx(connectionString). how
> > > > can
> > > > I
> > > > close the connexion? I can't find any method
> > > 
> > > You just need to drop any reference to the dataset, so, assuming it is
> > > not
> > > assigned to another variable, with dstDS = None or del dstDS.
> > > 
> > > See the "Saving and closing datasets/datasources" section at
> > > https://trac.osgeo.org/gdal/wiki/PythonGotchas
> > > 
> > > Note: assuming you import layers from the same database, it will be (a
> > > tiny
> > > bit) more efficient if you re-use the same dataset object.
> > 
> > I tried both `del dstDS` and `dstDS = None`, but I still have the problem.
> > I tried also to open just one connexion (see code below), but the problem
> > is still there. I guess this is an other issue. Could the OGR import is
> > still active when I import another file?
> > 
> > 
> > dstDS = gdal.OpenEx(connectionString)
> > 
> > for id in idList:
> >     srcDS = gdal.OpenEx('/tmp/file_' + str(id) + '.geojson')
> >     
> >     gdal.VectorTranslate(
> >     
> >      dstDS,
> >      srcDS,
> >      format = 'PostgreSQL',
> >      layerName='myLayer'
> >    
> >    )
> >    del srcDS
> > 
> > del dstDS
> 
> Ah indeed, it is a different issue.
> 
> gdal.VectorTranslate() doesn't currently properly handle the situation where
> you pass a dstDS object but not specify accessMode to be 'append', 'update'
> or 'overwrite'. So try adding accessMode = 'append' as an extra argument to
> gdal.VectorTranslate() (if the intent is to append to the same layer) Could
> you open a ticket about that ? (in your situation where accessMode is not
> specified but dstDS is specified, accessMode = 'update' should be the
> default behaviour)
> 
> And you should also open dstDS with
> 
> dstDS = gdal.OpenEx(connectionString, gdal.OF_UPDATE | gdal.OF_VECTOR)
> 
> Even
Thanks Even! It works now.

Here is theticket, https://trac.osgeo.org/gdal/ticket/6612. I hope my 
information is enough (I copy past you comment as it seems more helpful).

Y.

From jmckenna at gatewaygeomatics.com  Tue Aug  2 05:00:13 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 2 Aug 2016 09:00:13 -0300
Subject: [gdal-dev] compile error on windows
In-Reply-To: <1470093557588-5279010.post@n6.nabble.com>
References: <CAOm6iLgG6O_6UL7M+GWv0RFL=Htxv2Q8L2g_c9CY1bq5w2PhaA@mail.gmail.com>
 <ac1603d2-0eea-e940-aaf1-6480896aa6ae@uci.edu>
 <CAOm6iLhrsNNve1332vx3TKUb445rO_B3YXPfKAAU5=x1zsaWnA@mail.gmail.com>
 <201605030954.58868.even.rouault@spatialys.com>
 <5728D093.2000400@gatewaygeomatics.com>
 <201605031836.45574.even.rouault@spatialys.com>
 <CAJzaxHMxEgkyio9kgyY3aBp5zhQv7Zai9_MGUSONLO0_O=xHpw@mail.gmail.com>
 <1470093557588-5279010.post@n6.nabble.com>
Message-ID: <420a2b03-bb98-3f2d-bffd-f56a7f6a9c5f@gatewaygeomatics.com>

It would be great for all those interested in this thread, to take a 
moment and make sure that these steps are documented in the BuildHints 
wiki page for this (https://trac.osgeo.org/gdal/wiki/HDF). I did that of 
course, but other community members should as well, especially all those 
so concerned with the HDF* process on Windows.

I agree, getting HDF5, HDF4, and NetCDF all to play nicely together is 
extremely difficult on Windows, but, if everyone going down these paths 
takes a moment to contribute back to the community by enhancing the wiki 
pages, things will go much more smoothly for everyone.

If you want to test all these formats working on Windows, give the 
latest MS4W builds a try (the builds with HDF*, NetCDF working are still 
marked as "experimental" at http://www.ms4w.com/release/experimental/). 
Feedback is welcomed.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 2016-08-01 8:19 PM, twhall wrote:
> I had previously built HDF5 v1.8.17 as a 64-bit DLL on Windows 10, Visual
> Studio 2010.
>
> Today I tried to rebuild GDAL v2.0.2 to include the HDF5 format, but failed
> with the undefined symbols as reported by Ryan Grout on Apr. 29.
>
> I followed his advice from May 02, to edit frmts/hdf5/makefile.vc, replacing
> -D_HDF5USEDLL_ with -DH5_BUILT_AS_DYNAMIC_LIB, and that fixed the immediate
> problem.  GDAL built successfully, though it remains to be seen whether the
> HDF5 part actually works.
>
> The dependence on -DH5_BUILT_AS_DYNAMIC_LIB originates in the HDF5 header
> H5api_adpt.h:
> #ifdef H5_BUILT_AS_DYNAMIC_LIB
>    ...
>    #define H5_DLL __declspec(dllimport)
>
> Without that, the symbols won't import from the DLL.
>
> I don't see any dependence on _HDF5USEDLL_
>
>




From jmckenna at gatewaygeomatics.com  Tue Aug  2 05:06:22 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 2 Aug 2016 09:06:22 -0300
Subject: [gdal-dev] compile error on windows
In-Reply-To: <1470093557588-5279010.post@n6.nabble.com>
References: <CAOm6iLgG6O_6UL7M+GWv0RFL=Htxv2Q8L2g_c9CY1bq5w2PhaA@mail.gmail.com>
 <ac1603d2-0eea-e940-aaf1-6480896aa6ae@uci.edu>
 <CAOm6iLhrsNNve1332vx3TKUb445rO_B3YXPfKAAU5=x1zsaWnA@mail.gmail.com>
 <201605030954.58868.even.rouault@spatialys.com>
 <5728D093.2000400@gatewaygeomatics.com>
 <201605031836.45574.even.rouault@spatialys.com>
 <CAJzaxHMxEgkyio9kgyY3aBp5zhQv7Zai9_MGUSONLO0_O=xHpw@mail.gmail.com>
 <1470093557588-5279010.post@n6.nabble.com>
Message-ID: <b974dee8-682b-e2d7-3dfd-ff561a2e4411@gatewaygeomatics.com>

For the longest time MS4W did leverage the static lib for HDF5, so the 
switch of -D_HDF5USEDLL was required in GDAL.  If you compile HDF5 
dynamically you will require the -DH5_BUILT_AS_DYNAMIC_LIB switch.  This 
is described at https://www.hdfgroup.org/HDF5/release/obtain5.html 
Please please if this is still confusing, take a moment and edit that 
GDAL BuildHints page, to make this more understandable for everyone: 
https://trac.osgeo.org/gdal/wiki/HDF

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 2016-08-01 8:19 PM, twhall wrote:
> I had previously built HDF5 v1.8.17 as a 64-bit DLL on Windows 10, Visual
> Studio 2010.
>
> Today I tried to rebuild GDAL v2.0.2 to include the HDF5 format, but failed
> with the undefined symbols as reported by Ryan Grout on Apr. 29.
>
> I followed his advice from May 02, to edit frmts/hdf5/makefile.vc, replacing
> -D_HDF5USEDLL_ with -DH5_BUILT_AS_DYNAMIC_LIB, and that fixed the immediate
> problem.  GDAL built successfully, though it remains to be seen whether the
> HDF5 part actually works.
>
> The dependence on -DH5_BUILT_AS_DYNAMIC_LIB originates in the HDF5 header
> H5api_adpt.h:
> #ifdef H5_BUILT_AS_DYNAMIC_LIB
>    ...
>    #define H5_DLL __declspec(dllimport)
>
> Without that, the symbols won't import from the DLL.
>
> I don't see any dependence on _HDF5USEDLL_
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-compile-error-on-windows-tp5263583p5279010.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From glendening at drjack.net  Tue Aug  2 10:56:10 2016
From: glendening at drjack.net (John W. Glendening)
Date: Tue, 02 Aug 2016 10:56:10 -0700
Subject: [gdal-dev] DPI for printing in geospatial PDF
In-Reply-To: <3041281.yRvVZGvkGr@even-n550jk>
References: <1470081943.1471.70.camel@HP-GLENDENI>
 <3041281.yRvVZGvkGr@even-n550jk>
Message-ID: <1470160570.1471.92.camel@HP-GLENDENI>

On Tue, 2016-08-02 at 09:37 +0200, Even Rouault wrote:
> Your use case makes sense. The current behaviour is such that when reading, 
> the GDAL PDF driver can retrieve the original size in pixels.
> 
> I've just committed an improvement that will enable the user to select which 
> behaviour he wants.

Glad to hear that the written GDAL fiile will be more usable by those
wanting
to print same.  Thanks for your effort on this, as well as GDAL in
general which
I extensively use in the maps I create for hikers.

Thanks also for the background behind why someone would want a
non-default UserUnit written to their PDF file.

Jack
bigsurtrailmap.net



From jacek.tomaka at hexagongeospatial.com  Wed Aug  3 09:16:27 2016
From: jacek.tomaka at hexagongeospatial.com (Tomaka, Jacek)
Date: Wed, 3 Aug 2016 16:16:27 +0000
Subject: [gdal-dev] Question on GDAL using libjpegturbo
In-Reply-To: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>
References: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>
Message-ID: <3ED562F633B1AE46BF141E903F9813079AA0AFEB@ap-mbx3.ingrnet.com>

Not directly related to your question... 

It would be quite useful to allow compilation of external libjpeg library with dual 8_12 jpeg... 
But it is being explicitly disabled by build scripts and code. i.e. DUAL_MODE_8_12 is allowed only with internal libjpeg. 

I  have a version of GDAL with libjpeg-ipp (which is obviously external)  in both 8 and 12 but it required some code/build script modifications and probably broke a few things. 

Would you be interested in a patch? 

Regards.
Jacek Tomaka

________________________________________
Od: gdal-dev [gdal-dev-bounces at lists.osgeo.org] w imieniu Lucian Plesea [LPlesea at esri.com]
Wysłano: 2 sierpnia 2016 03:38
Do: Even Rouault (even.rouault at spatialys.com)
DW: gdal dev (gdal-dev at lists.osgeo.org)
Temat: Re: [gdal-dev] Question on GDAL using libjpegturbo

How about 8 and 12 bit JPEG simultaneously, using libjpegturbo?

Thanks,

Lucian


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



From even.rouault at spatialys.com  Wed Aug  3 09:36:46 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 03 Aug 2016 18:36:46 +0200
Subject: [gdal-dev] Question on GDAL using libjpegturbo
In-Reply-To: <3ED562F633B1AE46BF141E903F9813079AA0AFEB@ap-mbx3.ingrnet.com>
References: <3262aac6ad2a469d81840f3219e65922@RED-INF-MXMB-P4.esri.com>
 <3ED562F633B1AE46BF141E903F9813079AA0AFEB@ap-mbx3.ingrnet.com>
Message-ID: <2869220.9pEDYl5YoR@even-n550jk>

On Wednesday 03 August 2016 16:16:27 Tomaka, Jacek wrote:
> Not directly related to your question...
> 
> It would be quite useful to allow compilation of external libjpeg library
> with dual 8_12 jpeg... But it is being explicitly disabled by build scripts
> and code. i.e. DUAL_MODE_8_12 is allowed only with internal libjpeg.
> 
> I  have a version of GDAL with libjpeg-ipp (which is obviously external)  in
> both 8 and 12 but it required some code/build script modifications and
> probably broke a few things.
> 
> Would you be interested in a patch?

Preferably if that doesn't break existing working stuff :-)

> 
> Regards.
> Jacek Tomaka
> 
> ________________________________________
> Od: gdal-dev [gdal-dev-bounces at lists.osgeo.org] w imieniu Lucian Plesea
> [LPlesea at esri.com] Wysłano: 2 sierpnia 2016 03:38
> Do: Even Rouault (even.rouault at spatialys.com)
> DW: gdal dev (gdal-dev at lists.osgeo.org)
> Temat: Re: [gdal-dev] Question on GDAL using libjpegturbo
> 
> How about 8 and 12 bit JPEG simultaneously, using libjpegturbo?
> 
> Thanks,
> 
> Lucian
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.lattes at yahoo.fr  Thu Aug  4 03:02:36 2016
From: mathieu.lattes at yahoo.fr (M. LATTES)
Date: Thu, 4 Aug 2016 10:02:36 +0000 (UTC)
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
Message-ID: <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>

Hi Everybody,
for some Visual Studio 2010 projects I've made a few time ago, I needed to update the GDAL lib that I was using into those projects to the GDAL version 2.I could make it with the GDAL Visual Studio Makefile projects as described in the wiki, but I like to have the "full project" with all the sources.

As I was not able to find one online, and as I read that the GDAL team did'nt intented to provide one I decided to make it myself.
I'm releasing it publicly, so feel free to download it and use it if you think it could help you.

You can find the repositories here :
GDAL 2.0.3 : https://github.com/MattLatt/GDAL_2.0.x_VCGDAL 2.1.1 : https://github.com/MattLatt/GDAL_2.1.x_VC

There is both dynamic lib project (aka dll) and static lib project and each one is configured for both x64 and x86 platform. I've kept the gdal source package almost as downloaded in a separate folder (see the readme file for the two slight modification).You can find it in the folder "gdal-2.y.z" of each repository.

All the Visual Studio 2010 workspaces are in the "libgdal-2.y.z" folder of each repository
All the 3rd part drivers libraries linked to the VC10 workspaces are in the "3rdpart" folder.In the "master" branches the following drivers are provided (curl, ecw, expat, geos, proj.4 and sqlite).For some there is just binaries (dll and lib) and for some there is a Visual Studio workspace.
I started with the GDAL 2.0.2 and 2.1.0 version so there is also a branch with the previous GDAL version for each repositories, but they will not be updated with new drivers.

I'v also made test projects (2 linking GDAL dynamically and 2 statically) for testing purpose. 3 are GDAL Utilities app and the last one is a very simple GDAL Drivers capabilities dump.
I intend to update those repositories with the latest GDAL releases.

So I hope it'll be usefull for someone.

Mathieu Lattes

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/a2a51c86/attachment.html>

From even.rouault at spatialys.com  Thu Aug  4 03:03:45 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 12:03:45 +0200
Subject: [gdal-dev] Motion: adopt RFC 63 : Sparse datasets improvements
In-Reply-To: <1942550.gUkk8Jh43O@even-n550jk>
References: <1942550.gUkk8Jh43O@even-n550jk>
Message-ID: <2930096.E5qq9qkF8B@even-n550jk>

On Tuesday 26 July 2016 17:00:51 Even Rouault wrote:
> Hi,
> 
> I move to adopt RFC 63 : Sparse datasets improvements
> 
> https://trac.osgeo.org/gdal/wiki/rfc63_sparse_datasets_improvements
> 
> -------
> 
> Starting with my +1

I declare this motion passed with +1 from DanielM and myself. The work has 
just been committed into trunk.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From daniele.romagnoli at geo-solutions.it  Thu Aug  4 03:11:18 2016
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 4 Aug 2016 12:11:18 +0200
Subject: [gdal-dev] Motion: adopt RFC 63 : Sparse datasets improvements
In-Reply-To: <2930096.E5qq9qkF8B@even-n550jk>
References: <1942550.gUkk8Jh43O@even-n550jk> <2930096.E5qq9qkF8B@even-n550jk>
Message-ID: <CAJaHrDwNuf3P7iYmoJyeZ+zJrdHzg5c1Gi=3+WwE7oeaiNiw4g@mail.gmail.com>

That's a very valuable improvement!
Thanks for that.

Is there any future plan to backport it into 2.x series?
Regards,
Daniele


On Thu, Aug 4, 2016 at 12:03 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On Tuesday 26 July 2016 17:00:51 Even Rouault wrote:
> > Hi,
> >
> > I move to adopt RFC 63 : Sparse datasets improvements
> >
> > https://trac.osgeo.org/gdal/wiki/rfc63_sparse_datasets_improvements
> >
> > -------
> >
> > Starting with my +1
>
> I declare this motion passed with +1 from DanielM and myself. The work has
> just been committed into trunk.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
==
GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

*AVVERTENZE AI SENSI DEL D.Lgs. 196/2003*

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.



The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/233ce2c8/attachment.html>

From even.rouault at spatialys.com  Thu Aug  4 03:12:01 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 12:12:01 +0200
Subject: [gdal-dev] Motion: adopt RFC 63 : Sparse datasets improvements
In-Reply-To: <CAJaHrDwNuf3P7iYmoJyeZ+zJrdHzg5c1Gi=3+WwE7oeaiNiw4g@mail.gmail.com>
References: <1942550.gUkk8Jh43O@even-n550jk> <2930096.E5qq9qkF8B@even-n550jk>
 <CAJaHrDwNuf3P7iYmoJyeZ+zJrdHzg5c1Gi=3+WwE7oeaiNiw4g@mail.gmail.com>
Message-ID: <9044634.a0jClZKWfb@even-n550jk>

On Thursday 04 August 2016 12:11:18 Daniele Romagnoli wrote:
> That's a very valuable improvement!
> Thanks for that.
> 
> Is there any future plan to backport it into 2.x series?

Hi Daniele,

No, this is a new feature and it modifies the C++ ABI, so definitely not 
appropriate for backporting into stable series.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Thu Aug  4 03:51:17 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 4 Aug 2016 12:51:17 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>

On 4 August 2016 at 12:02, M. LATTES <mathieu.lattes at yahoo.fr> wrote:
> Hi Everybody,
>
> for some Visual Studio 2010 projects I've made a few time ago, I needed to
> update the GDAL lib that I was using into those projects to the GDAL version
> 2.
> I could make it with the GDAL Visual Studio Makefile projects as described
> in the wiki, but I like to have the "full project" with all the sources.
>
> As I was not able to find one online, and as I read that the GDAL team
> did'nt intented to provide one I decided to make it myself.
>
> I'm releasing it publicly, so feel free to download it and use it if you
> think it could help you.
>
> You can find the repositories here :
>
> GDAL 2.0.3 : https://github.com/MattLatt/GDAL_2.0.x_VC
> GDAL 2.1.1 : https://github.com/MattLatt/GDAL_2.1.x_VC

You might not be aware, but there is a script that can generate VS projects:

https://svn.osgeo.org/gdal/trunk/gdal/makegdal_gen.bat

It does it in non-intrusive manner to build configuration
as it uses the official makefiles.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From bontepaarden at gmail.com  Thu Aug  4 04:25:19 2016
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 4 Aug 2016 13:25:19 +0200
Subject: [gdal-dev] ogrinfo not a C callable function?
Message-ID: <CAHNf2YTxrSLMbaXyw2N1714RuEwcB1042+5uaPy2f2_o479x8g@mail.gmail.com>

Hi,

When I look at RFC 59.1 (
https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library) I see
gdalinfo,exe, ogr2ogr.exe are all C callable functions now.

But I don't see ogrinfo?
Do I understand it right that ogrinfo.exe is not a C callable function?
If so is there a specific reason for that or will it be implemented in the
near future?

I ask this because we use these functions in MapWinGIS (
https://github.com/MapWindow) and we are now in the process to change our
implementation to the new C callable functions.

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/b822dcd9/attachment-0001.html>

From even.rouault at spatialys.com  Thu Aug  4 04:41:35 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 13:41:35 +0200
Subject: [gdal-dev] ogrinfo not a C callable function?
In-Reply-To: <CAHNf2YTxrSLMbaXyw2N1714RuEwcB1042+5uaPy2f2_o479x8g@mail.gmail.com>
References: <CAHNf2YTxrSLMbaXyw2N1714RuEwcB1042+5uaPy2f2_o479x8g@mail.gmail.com>
Message-ID: <8015175.yVf4dtKx22@even-n550jk>

On Thursday 04 August 2016 13:25:19 Paul Meems wrote:
> Hi,
> 
> When I look at RFC 59.1 (
> https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library) I see
> gdalinfo,exe, ogr2ogr.exe are all C callable functions now.
> 
> But I don't see ogrinfo?
> Do I understand it right that ogrinfo.exe is not a C callable function?

Yes

> If so is there a specific reason for that or will it be implemented in the
> near future?

The most uses of ogrinfo output features in the console with the DumpFeature() 
call, which doesn't make sense for a library function, so a librarified version 
would just address the metadata part. Which you can easily access through the 
C/C++ API already.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.lattes at yahoo.fr  Thu Aug  4 05:00:58 2016
From: mathieu.lattes at yahoo.fr (M. LATTES)
Date: Thu, 4 Aug 2016 12:00:58 +0000 (UTC)
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
Message-ID: <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>

Hi Mateusz,
yes I was aware, but it generate workspace with only the all "makefile.vc" in the project properties (at least when I tested it).I wanted to browse among the sources and headers files in the Visual Studio "Solution Explorer" or in the "Class View" (when debugging for example).I don't think that it is possible with the "makegdal_gent.bat" but maybe I'm wrong ?
Best regards.

Mathieu Lattes
 

    Le Jeudi 4 août 2016 12h51, Mateusz Loskot <mateusz at loskot.net> a écrit :
 

 On 4 August 2016 at 12:02, M. LATTES <mathieu.lattes at yahoo.fr> wrote:
> Hi Everybody,
>
> for some Visual Studio 2010 projects I've made a few time ago, I needed to
> update the GDAL lib that I was using into those projects to the GDAL version
> 2.
> I could make it with the GDAL Visual Studio Makefile projects as described
> in the wiki, but I like to have the "full project" with all the sources.
>
> As I was not able to find one online, and as I read that the GDAL team
> did'nt intented to provide one I decided to make it myself.
>
> I'm releasing it publicly, so feel free to download it and use it if you
> think it could help you.
>
> You can find the repositories here :
>
> GDAL 2.0.3 : https://github.com/MattLatt/GDAL_2.0.x_VC
> GDAL 2.1.1 : https://github.com/MattLatt/GDAL_2.1.x_VC

You might not be aware, but there is a script that can generate VS projects:

https://svn.osgeo.org/gdal/trunk/gdal/makegdal_gen.bat

It does it in non-intrusive manner to build configuration
as it uses the official makefiles.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/d7822cac/attachment.html>

From mateusz at loskot.net  Thu Aug  4 05:07:20 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 4 Aug 2016 14:07:20 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>

On 4 August 2016 at 14:00, M. LATTES <mathieu.lattes at yahoo.fr> wrote:
> Hi Mateusz,
>
> yes I was aware, but it generate workspace with only the all "makefile.vc"
> in the project properties (at least when I tested it).
> I wanted to browse among the sources and headers files in the Visual Studio
> "Solution Explorer" or in the "Class View" (when debugging for example).
> I don't think that it is possible with the "makegdal_gent.bat" but maybe I'm
> wrong ?


AFAIR, it does create "Source Files" and "Header Files" groups
with sources attached.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From lucena_ivan at hotmail.com  Thu Aug  4 06:41:03 2016
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 4 Aug 2016 13:41:03 +0000
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>,
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
Message-ID: <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>

Hi Mateusz,

I far as I know the project generated by makegdal_gen.bat does not work with newer version of VS. 

It used to be the case that we can import the project to newer version of VS but I think that MS dropped the support for that feature.

Have one of you manage to load the generated .vcproj into VS > 2010? I would like to know how to do that!

Best regards,
Ivan


> On Aug 4, 2016, at 8:08 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
>> On 4 August 2016 at 14:00, M. LATTES <mathieu.lattes at yahoo.fr> wrote:
>> Hi Mateusz,
>> 
>> yes I was aware, but it generate workspace with only the all "makefile.vc"
>> in the project properties (at least when I tested it).
>> I wanted to browse among the sources and headers files in the Visual Studio
>> "Solution Explorer" or in the "Class View" (when debugging for example).
>> I don't think that it is possible with the "makegdal_gent.bat" but maybe I'm
>> wrong ?
> 
> 
> AFAIR, it does create "Source Files" and "Header Files" groups
> with sources attached.
> 
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Thu Aug  4 07:07:25 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 4 Aug 2016 16:07:25 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
Message-ID: <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>

On 4 August 2016 at 15:41, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> Hi Mateusz,
>
> I far as I know the project generated by makegdal_gen.bat does not work with newer version of VS.
>
> It used to be the case that we can import the project to newer version of VS but I think that MS dropped the support for that feature.
>
> Have one of you manage to load the generated .vcproj into VS > 2010? I would like to know how to do that!

Ivan,

1. makegdal_gen 10.00 32 > makegdal10.vcproj
2. Launch VS2015
3. File > Open > Project/Solution...
4. Select makegdal10.vcproj
5. Accept to upgrade

I can confirm it works for me.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From bontepaarden at gmail.com  Thu Aug  4 07:31:05 2016
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 4 Aug 2016 16:31:05 +0200
Subject: [gdal-dev] ogrinfo not a C callable function?
In-Reply-To: <8015175.yVf4dtKx22@even-n550jk>
References: <CAHNf2YTxrSLMbaXyw2N1714RuEwcB1042+5uaPy2f2_o479x8g@mail.gmail.com>
 <8015175.yVf4dtKx22@even-n550jk>
Message-ID: <CAHNf2YSq0c6UMLWxV27WWkPWR_Lqm=ksM4MZRRExsm6MFk0Hjg@mail.gmail.com>

Hi Even,

Thanks for the clarification.
We will update our code accordingly.

Regards,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl


*The MapWindow GIS project has moved to GitHub
<https://github.com/MapWindow>!*


Download the latest MapWinGIS mapping engine.
<https://github.com/MapWindow/MapWinGIS/releases>

Download the latest MapWindow 5 open source desktop application.
<https://github.com/MapWindow/MapWindow5/releases>

2016-08-04 13:41 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> On Thursday 04 August 2016 13:25:19 Paul Meems wrote:
> > Hi,
> >
> > When I look at RFC 59.1 (
> > https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library) I see
> > gdalinfo,exe, ogr2ogr.exe are all C callable functions now.
> >
> > But I don't see ogrinfo?
> > Do I understand it right that ogrinfo.exe is not a C callable function?
>
> Yes
>
> > If so is there a specific reason for that or will it be implemented in
> the
> > near future?
>
> The most uses of ogrinfo output features in the console with the
> DumpFeature()
> call, which doesn't make sense for a library function, so a librarified
> version
> would just address the metadata part. Which you can easily access through
> the
> C/C++ API already.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/e00b158a/attachment-0001.html>

From mathieu.lattes at yahoo.fr  Thu Aug  4 08:28:00 2016
From: mathieu.lattes at yahoo.fr (M. LATTES)
Date: Thu, 4 Aug 2016 15:28:00 +0000 (UTC)
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
Message-ID: <1331662836.16530907.1470324480465.JavaMail.yahoo@mail.yahoo.com>

Thanks Mateusz,
my mistake.I've just tried again the "makegdal_gen.bat" and you're right.I miss this when I tested it.
My repositories may still be usefull for those who wants to build gdal as a static library, 
unless it's possible too to generate a static lib with "makegdal_gen.bat"
Best regards.
Mathieu Lattes.


 

    Le Jeudi 4 août 2016 14h07, Mateusz Loskot <mateusz at loskot.net> a écrit :
 

 On 4 August 2016 at 14:00, M. LATTES <mathieu.lattes at yahoo.fr> wrote:
> Hi Mateusz,
>
> yes I was aware, but it generate workspace with only the all "makefile.vc"
> in the project properties (at least when I tested it).
> I wanted to browse among the sources and headers files in the Visual Studio
> "Solution Explorer" or in the "Class View" (when debugging for example).
> I don't think that it is possible with the "makegdal_gent.bat" but maybe I'm
> wrong ?


AFAIR, it does create "Source Files" and "Header Files" groups
with sources attached.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/0c23df30/attachment.html>

From minshall at acm.org  Thu Aug  4 08:24:26 2016
From: minshall at acm.org (Greg Minshall)
Date: Thu, 04 Aug 2016 08:24:26 -0700
Subject: [gdal-dev] missing point in MultiGeometry KML file
Message-ID: <29280.1470324266@greg-minshalls-mbp-2.local>

hi.  i'm a newbie, trying to do some scripting which involves reading in
a KML file and then, after some processing, writing it out again.  i had
noticed that when running ogrinfo(1) on my input file, i wasn't seeing
all the point of the polygon in the MultiGeometry of my KML file, but
thought maybe that was just some form of abbreviation.  but, that
behavior seems to explain a problem i'm running into.  so, i tried
"ogr2ogr -f kml", and get the same behavior, my polygons are reduced to
a single point (the initial/terminal point).

i'm curious if it's obvious what i'm doing wrong, or if this is a known
bug, or...

my set up is a Mac running Fink:
----
bash greg-minshalls-mbp-2: {1773} ogr2ogr --version
GDAL 2.1.1, released 2016/07/07

bash greg-minshalls-mbp-2: {1774} uname -a
Darwin greg-minshalls-mbp-2.local 15.6.0 Darwin Kernel Version 15.6.0: Thu Jun 23 18:25:34 PDT 2016; root:xnu-3248.60.10~1/RELEASE_X86_64 x86_64

bash greg-minshalls-mbp-2: {1775} fink --version
Package manager version: 0.39.3
Distribution version: selfupdate-rsync Sat Jul 30 10:25:32 2016, 10.11, x86_64
Trees: local/main stable/main local/injected

Copyright (c) 2001 Christoph Pfisterer
Copyright (c) 2001-2016 The Fink Package Manager Team
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
----

a fairly reduced test case is running "ogr2ogr -f kml clone.kml bug.kml"
where "bug.kml" is:
----
<?xml version="1.0" encoding="UTF-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document id="root_doc">
    <Folder><name>Soberanes</name>
    <Placemark>
      <name></name>
      <description></description>
      <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
      <MultiGeometry><Polygon><outerBoundaryIs><LinearRing><coordinates>-121.859539607243,36.4458603356853,0,-121.859010098152,36.4456932276546,0,-121.858129504875,36.4453991811578,0,-121.857325735135,36.4448820131963,0,-121.85675971936,36.4445384607921,0,-121.856809120566,36.443876500306,0,-121.856430592837,36.4429020177187,0,-121.856167728728,36.4423261178737,0,-121.855775934253,36.4418654654089,0,-121.855094715237,36.4418565756417,0,-121.854381527851,36.4413356919538,0,-121.853600655401,36.4411842000059,0,-121.852822068116,36.4410692737567,0,-121.852532048225,36.4410353302927,0,-121.851959423457,36.4403344818693,0,-121.85201799593,36.4398188037771,0,-121.85285513667,36.4394180573464,0,-121.85328948567,36.4391070481673,0,-121.853289093379,36.4383737899567,0,,-121.827771447749,36.3590241926845,0,-121.827662452176,36.3587040307677,0,-121.827882572315,36.3582984116496,0,-121.828496319454,36.358129295858,0,-121.82929464932,36.3580608917042,0,-121.829555373568,36.3579419054821,0</coordi
 nates></LinearRing></outerBoundaryIs></Polygon></MultiGeometry>
    </Placemark>
    </Folder>
</Document></kml>
----

thanks in advance for any clues.

Greg Minshall

From jmckenna at gatewaygeomatics.com  Thu Aug  4 08:52:08 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 4 Aug 2016 12:52:08 -0300
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
Message-ID: <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>

On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>
> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
> 2. Launch VS2015
> 3. File > Open > Project/Solution...
> 4. Select makegdal10.vcproj
> 5. Accept to upgrade
>



Can we make sure to document these steps, so they are not lost in 
emails?  Somewhere on the BuildHints wiki would be great.  Possibly 
here? https://trac.osgeo.org/gdal/wiki/BuildingOnWindows

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From avyavkumar at gmail.com  Thu Aug  4 09:48:08 2016
From: avyavkumar at gmail.com (Avyav Kumar)
Date: Thu, 4 Aug 2016 22:18:08 +0530
Subject: [gdal-dev] Help regarding DXF format interpretation
Message-ID: <CAHOc4-3DaibfSeRQufmUnDx4WphHXx4jUddpgE+1Ws+4YrvoFQ@mail.gmail.com>

Hi all,

I am a student who is participating under the GSoC program, and I need the
help of the community! https://trac.osgeo.org/gdal/ticket/6246 contains an
issue that I aim to resolve. However, reading the DXF format is a
difficulty (for me). I don't understand how the indexing corresponding to
codes 71, 72 etc. works for each vertex instance.
If a vertex contains the index X (for instance) under code 71, does it mean
that the said vertex is part of the POLYLINE corresponding to the index X
(in short, all the vertices of index X under code 71 are part of the same
POLYLINE)? Or have I misinterpreted the reading?

If anyone has correct answers/documentation, I would really appreciate it.

Many thanks!

Regards,

Avyav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/c471d503/attachment.html>

From even.rouault at spatialys.com  Thu Aug  4 10:12:08 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 19:12:08 +0200
Subject: [gdal-dev] missing point in MultiGeometry KML file
In-Reply-To: <29280.1470324266@greg-minshalls-mbp-2.local>
References: <29280.1470324266@greg-minshalls-mbp-2.local>
Message-ID: <1768519.UI9R3sgiyz@even-n550jk>

Greg,

Your KML file is invalid. The format for <coordinates> content must be 
"X1,Y1,Z1 X2,Y2,Z2...". Here the space between triplets is replaced with a 
comma, which confuses the KML reader. The LIBKML driver is a bit more tolerant 
and successfully reads the file.

Even

> hi.  i'm a newbie, trying to do some scripting which involves reading in
> a KML file and then, after some processing, writing it out again.  i had
> noticed that when running ogrinfo(1) on my input file, i wasn't seeing
> all the point of the polygon in the MultiGeometry of my KML file, but
> thought maybe that was just some form of abbreviation.  but, that
> behavior seems to explain a problem i'm running into.  so, i tried
> "ogr2ogr -f kml", and get the same behavior, my polygons are reduced to
> a single point (the initial/terminal point).
> 
> i'm curious if it's obvious what i'm doing wrong, or if this is a known
> bug, or...
> 
> my set up is a Mac running Fink:
> ----
> bash greg-minshalls-mbp-2: {1773} ogr2ogr --version
> GDAL 2.1.1, released 2016/07/07
> 
> bash greg-minshalls-mbp-2: {1774} uname -a
> Darwin greg-minshalls-mbp-2.local 15.6.0 Darwin Kernel Version 15.6.0: Thu
> Jun 23 18:25:34 PDT 2016; root:xnu-3248.60.10~1/RELEASE_X86_64 x86_64
> 
> bash greg-minshalls-mbp-2: {1775} fink --version
> Package manager version: 0.39.3
> Distribution version: selfupdate-rsync Sat Jul 30 10:25:32 2016, 10.11,
> x86_64 Trees: local/main stable/main local/injected
> 
> Copyright (c) 2001 Christoph Pfisterer
> Copyright (c) 2001-2016 The Fink Package Manager Team
> This program is distributed in the hope that it will be useful,
> but WITHOUT ANY WARRANTY; without even the implied warranty of
> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> GNU General Public License for more details.
> ----
> 
> a fairly reduced test case is running "ogr2ogr -f kml clone.kml bug.kml"
> where "bug.kml" is:
> ----
> <?xml version="1.0" encoding="UTF-8" ?>
> <kml xmlns="http://www.opengis.net/kml/2.2">
>   <Document id="root_doc">
>     <Folder><name>Soberanes</name>
>     <Placemark>
>       <name></name>
>       <description></description>
>      
> <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fi
> ll></PolyStyle></Style>
> <MultiGeometry><Polygon><outerBoundaryIs><LinearRing><coordinates>-121.8595
> 39607243,36.4458603356853,0,-121.859010098152,36.4456932276546,0,-121.858129
> 504875,36.4453991811578,0,-121.857325735135,36.4448820131963,0,-121.85675971
> 936,36.4445384607921,0,-121.856809120566,36.443876500306,0,-121.856430592837
> ,36.4429020177187,0,-121.856167728728,36.4423261178737,0,-121.855775934253,3
> 6.4418654654089,0,-121.855094715237,36.4418565756417,0,-121.854381527851,36.
> 4413356919538,0,-121.853600655401,36.4411842000059,0,-121.852822068116,36.44
> 10692737567,0,-121.852532048225,36.4410353302927,0,-121.851959423457,36.4403
> 344818693,0,-121.85201799593,36.4398188037771,0,-121.85285513667,36.43941805
> 73464,0,-121.85328948567,36.4391070481673,0,-121.853289093379,36.43837378995
> 67,0,,-121.827771447749,36.3590241926845,0,-121.827662452176,36.358704030767
> 7,0,-121.827882572315,36.3582984116496,0,-121.828496319454,36.358129295858,0
> ,-121.82929464932,36.3580608917042,0,-121.829555373568,36.3579419054821,0</c
> oordi nates></LinearRing></outerBoundaryIs></Polygon></MultiGeometry>
>     </Placemark>
>     </Folder>
> </Document></kml>
> ----
> 
> thanks in advance for any clues.
> 
> Greg Minshall
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Thu Aug  4 10:37:50 2016
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 4 Aug 2016 10:37:50 -0700
Subject: [gdal-dev] Motion: adopt RFC 63 : Sparse datasets improvements
In-Reply-To: <9044634.a0jClZKWfb@even-n550jk>
References: <1942550.gUkk8Jh43O@even-n550jk> <2930096.E5qq9qkF8B@even-n550jk>
 <CAJaHrDwNuf3P7iYmoJyeZ+zJrdHzg5c1Gi=3+WwE7oeaiNiw4g@mail.gmail.com>
 <9044634.a0jClZKWfb@even-n550jk>
Message-ID: <CACmBxyssk-FvScq67oEqpoFC0BM_KNm+_fkjfyDLiqHEPhWmLQ@mail.gmail.com>

+1 for this change.

This will be awesome!

On Thu, Aug 4, 2016 at 3:12 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On Thursday 04 August 2016 12:11:18 Daniele Romagnoli wrote:
> > That's a very valuable improvement!
> > Thanks for that.
> >
> > Is there any future plan to backport it into 2.x series?
>
> Hi Daniele,
>
> No, this is a new feature and it modifies the C++ ABI, so definitely not
> appropriate for backporting into stable series.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/3a0fa212/attachment-0001.html>

From jamessramm at gmail.com  Thu Aug  4 10:42:44 2016
From: jamessramm at gmail.com (James Ramm)
Date: Thu, 4 Aug 2016 18:42:44 +0100
Subject: [gdal-dev] Motion: adopt RFC 63 : Sparse datasets improvements
In-Reply-To: <CACmBxyssk-FvScq67oEqpoFC0BM_KNm+_fkjfyDLiqHEPhWmLQ@mail.gmail.com>
References: <1942550.gUkk8Jh43O@even-n550jk> <2930096.E5qq9qkF8B@even-n550jk>
 <CAJaHrDwNuf3P7iYmoJyeZ+zJrdHzg5c1Gi=3+WwE7oeaiNiw4g@mail.gmail.com>
 <9044634.a0jClZKWfb@even-n550jk>
 <CACmBxyssk-FvScq67oEqpoFC0BM_KNm+_fkjfyDLiqHEPhWmLQ@mail.gmail.com>
Message-ID: <CAEW=KS5OqhZMnyQ+J12TAXipx1zwbe8FcQ33+CafHFha8pBDdw@mail.gmail.com>

Excellent! Really pleased this has g one through so quick

On 4 Aug 2016 6:38 p.m., "Kurt Schwehr" <schwehr at gmail.com> wrote:

> +1 for this change.
>
> This will be awesome!
>
> On Thu, Aug 4, 2016 at 3:12 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> On Thursday 04 August 2016 12:11:18 Daniele Romagnoli wrote:
>> > That's a very valuable improvement!
>> > Thanks for that.
>> >
>> > Is there any future plan to backport it into 2.x series?
>>
>> Hi Daniele,
>>
>> No, this is a new feature and it modifies the C++ ABI, so definitely not
>> appropriate for backporting into stable series.
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> --
> http://schwehr.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/8a9021c7/attachment.html>

From minshall at acm.org  Thu Aug  4 11:53:44 2016
From: minshall at acm.org (Greg Minshall)
Date: Thu, 04 Aug 2016 11:53:44 -0700
Subject: [gdal-dev] missing point in MultiGeometry KML file
In-Reply-To: Your message of "Thu, 04 Aug 2016 19:12:08 +0200."
 <1768519.UI9R3sgiyz@even-n550jk>
Message-ID: <30049.1470336824@greg-minshalls-mbp-2.local>

Even,

thanks very much!  i should have noticed that (but, newbie).  my input
files come from an external source (but, of course, i already have a sed
script for cleaning up bits and pieces of them, so...).

cheers, Greg Minshall

From ap.joseph at live.com  Thu Aug  4 13:24:51 2016
From: ap.joseph at live.com (Andrew Joseph)
Date: Thu, 4 Aug 2016 13:24:51 -0700 (PDT)
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase Support
 On Ubuntu 16.04
Message-ID: <1470342291850-5279578.post@n6.nabble.com>

I'm not able to compile GDAL with the ESRI FileGeodatabase driver (needed for
write support) on Ubuntu 16.04 with Docker (current LTS) I'm using the the
travis.yml of the 2.1_gcc5.2_sanitize coverage branch as a guide since that
seems to be the closest environment to 16.04.

However, during GDAL make, I received the following soul-destroying error
when attempting to compile using the standard build-essential package (see 
GIS StackExchange
<http://gis.stackexchange.com/questions/204521/error-compiling-gdal-with-esri-filegeodatabase-support-on-ubuntu-16-04>  
post for my build commands):

In file included from /usr/local/include/FileGDBAPI.h:28:0,
                 from filegdbsdk_headers.h:39,
                 from ogr_fgdb.h:50,
                 from FGdbDatasource.cpp:33:
/usr/local/include/GeodatabaseManagement.h:56:1: error: expected
constructor, destructor, or type conversion before '(' token
 EXT_FILEGDB_API fgdbError CreateGeodatabase(const std::wstring& path,
Geodatabase& geodatabase);
 ^
/usr/local/include/GeodatabaseManagement.h:64:1: error: expected
constructor, destructor, or type conversion before '(' token
 EXT_FILEGDB_API fgdbError OpenGeodatabase(const std::wstring& path,
Geodatabase& geodatabase);
 ^
/usr/local/include/GeodatabaseManagement.h:69:1: error: expected
constructor, destructor, or type conversion before '(' token
 EXT_FILEGDB_API fgdbError CloseGeodatabase(Geodatabase& geodatabase);
 ^
/usr/local/include/GeodatabaseManagement.h:77:1: error: expected
constructor, destructor, or type conversion before '(' token
 EXT_FILEGDB_API fgdbError DeleteGeodatabase(const std::wstring& path);
 ^
In file included from /usr/local/include/FileGDBAPI.h:29:0,
                 from filegdbsdk_headers.h:39,
                 from ogr_fgdb.h:50,
                 from FGdbDatasource.cpp:33:
/usr/local/include/Geodatabase.h:60:23: error: expected initializer before
'Geodatabase'
 class EXT_FILEGDB_API Geodatabase
                       ^
FGdbDatasource.cpp:760:1: error: expected '}' at end of input
 }
 ^
make[3]: *** [../o/FGdbDatasource.lo] Error 1



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-Compiling-GDAL-with-ESRI-FileGeodatabase-Support-On-Ubuntu-16-04-tp5279578.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Aug  4 13:26:52 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 22:26:52 +0200
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase
	Support On Ubuntu 16.04
In-Reply-To: <1470342291850-5279578.post@n6.nabble.com>
References: <1470342291850-5279578.post@n6.nabble.com>
Message-ID: <3178248.QYRmmCnrzU@even-n550jk>

Andrew,

Remove
CXX="g++ -std=c++14" CPPFLAGS="-DMAKE_SANITIZE_HAPPY -fsanitize=undefined -
fsanitize=address" LDFLAGS="-fsanitize=undefined -fsanitize=address" 

from the configure.

They are not intended for production use. More specifically the FGDB SDK 
doesn't like compiling with C++11 or 14.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hyoklee at hdfgroup.org  Thu Aug  4 13:02:18 2016
From: hyoklee at hdfgroup.org (Joe Lee)
Date: Thu, 4 Aug 2016 20:02:18 +0000
Subject: [gdal-dev] test
Message-ID: <DM3PR17MB06501C7B4C9D4DCC94E454E4C2070@DM3PR17MB0650.namprd17.prod.outlook.com>

Mail test.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/39f094b0/attachment.html>

From jmckenna at gatewaygeomatics.com  Thu Aug  4 13:41:59 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 4 Aug 2016 17:41:59 -0300
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase
 Support On Ubuntu 16.04
In-Reply-To: <1470342291850-5279578.post@n6.nabble.com>
References: <1470342291850-5279578.post@n6.nabble.com>
Message-ID: <a4e23d14-d11a-031e-fb2f-d214e08a1229@gatewaygeomatics.com>

On 2016-08-04 5:24 PM, Andrew Joseph wrote:
> I'm not able to compile GDAL with the ESRI FileGeodatabase driver (needed for
> write support) on Ubuntu 16.04 with Docker (current LTS) I'm using the the
> travis.yml of the 2.1_gcc5.2_sanitize coverage branch as a guide since that
> seems to be the closest environment to 16.04.

I try to maintain my notes on compiling the FileGDB driver on the GDAL 
wiki at https://trac.osgeo.org/gdal/wiki/FileGDB  It would be great if 
you could add to those notes, by adding a section for Docker steps 
directly in the wiki.  Thanks,

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From even.rouault at spatialys.com  Thu Aug  4 14:02:24 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Aug 2016 23:02:24 +0200
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase
	Support On Ubuntu 16.04
In-Reply-To: <CAHDApB7bV+7z8X=EVLsRTKSC6oCHKTkJ9xFxwmrY7UxeFwyznA@mail.gmail.com>
References: <1470342291850-5279578.post@n6.nabble.com>
 <3178248.QYRmmCnrzU@even-n550jk>
 <CAHDApB7bV+7z8X=EVLsRTKSC6oCHKTkJ9xFxwmrY7UxeFwyznA@mail.gmail.com>
Message-ID: <1818299.DE8HmCh3gW@even-n550jk>

On Thursday 04 August 2016 15:59:22 Andrew Joseph wrote:
> I had originally compiled without any of those flags (thought that might
> have been the issue), but still get an error  though it is different:

You may need to pass -std=C++03 and/or -D_GLIBCXX_USE_CXX11_ABI=0 as CXXFLAGS.

> 
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::Delete(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetFloat(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, float)'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmlengine::Href::Parse(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetDouble(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, double)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::GetQueryName(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >&) c                               onst'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetDouble(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, double&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::CreateTable(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> > const&, FileG
> DBAPI::Table&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetGUID(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::Guid const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >*,
> std::__cxx11::basic_string<char, std::char_traits<char>,
> std::allocator<char> >*) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetNull(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::FieldInfo::GetFieldName(int,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::OpenGeodatabase(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::Geodatabase&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetFloat(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, float&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetDate(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, tm&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::GetDocumentation(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetShort(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, short)'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::OpenTable(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::Table&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::CreateFeatureDataset(std::__cxx11::basic_string<ch
> ar, std::char_traits<char>, std::allocator<char> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetDate(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, tm const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetBinary(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::ByteArray&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetInteger(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, int)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::DeleteField(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::ExecuteSQL(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, bool,
> FileGDBAPI::EnumRows&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::CreateGeodatabase(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::Geodatabase&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Geodatabase::GetChildDatasets(std::__cxx11::basic_string<wchar_
> t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >                                const&,
> std::vector<std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >,
> std::allocator<std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > > >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element>
> const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>,
> std::allocator<char> > const&, std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >*)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::AddField(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetBinary(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::ByteArray const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Guid::ToString(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> >&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::IsNull(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, bool&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetShort(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, short&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetXML(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<char, std::char_traits<char>,
> std::allocator<char> >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::DeleteGeodatabase(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetInteger(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, int&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::Search(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> > const&, bool, F
> ileGDBAPI::EnumRows&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetString(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Guid::FromString(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `kmlengine::KmzFile::ReadFile(char const*, std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >*) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::Search(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> > const&, FileGDB
> API::Envelope const&, bool, FileGDBAPI::EnumRows&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetXML(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<char, std::char_traits<char>,
> std::allocator<char> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Table::GetDefinition(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >&) const'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::SetString(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> > const&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::ErrorInfo::GetErrorDescription(int,
> std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> std::allocator<wchar_t> >&)'
> /tmp/gdal/libgdal.so: undefined reference to
> `FileGDBAPI::Row::GetGUID(std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> FileGDBAPI::Guid&) const'
> collect2: error: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> 
> 
> On Thu, Aug 4, 2016 at 3:26 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Andrew,
> > 
> > Remove
> > CXX="g++ -std=c++14" CPPFLAGS="-DMAKE_SANITIZE_HAPPY -fsanitize=undefined
> > -
> > fsanitize=address" LDFLAGS="-fsanitize=undefined -fsanitize=address"
> > 
> > from the configure.
> > 
> > They are not intended for production use. More specifically the FGDB SDK
> > doesn't like compiling with C++11 or 14.
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hyoklee at hdfgroup.org  Thu Aug  4 14:31:25 2016
From: hyoklee at hdfgroup.org (H. Joe Lee)
Date: Thu, 4 Aug 2016 16:31:25 -0500
Subject: [gdal-dev] Feasibility of expanding VRT schema to allow users to
 specify X/Y dimension for HDF data?
Message-ID: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>

Hi,

  My name is Joe Lee and I'm very interested in improving GDAL's
capability to access NASA HDF4/HDF5 data so that users can work with
HDF easily through GDAL. For example, my goal is to allow users to
translate any HDF data into GeoTIFF via gdal_translate.

  I've worked with diverse NASA HDF products and provided solution for
visualizing data correctly through Python/MATLAB/IDL/NCL [1] and I
know that many products, other than HDF-EOS, may not work well with
GDAL because HDF is flexible and NASA data producers do not
necessarily follow the conventions that GDAL uses.

  By default, GDAL HDF4/HDF5 driver uses the following convention for
unknown products.

    For HDF4 (frmts/hdf4/hdf4imagedataset.cpp):

    // Search for the starting "X" and "Y" in the names or take
    // the last two dimensions as X and Y sizes
    iXDim = nDimCount - 1;
    iYDim = nDimCount - 2;

  For HDF5 (frmts/hdf5/hdf5imagedataset.cpp):

    int     GetYIndex() const { return IsComplexCSKL1A() ? 0 : ndims - 2; }
    int     GetXIndex() const { return IsComplexCSKL1A() ? 1 : ndims - 1; }

 The above code works well as long as Unknown HDF product follows the
above convention. However, in reality, HDF data can have an arbitrary
order in terms of Band, X and Y dimension like this:

  dset4D[XDim=360][YDim=180][Band1=2][Band2=3]
  dimindex:    0                      1            2             3

  Since ndims=4, ndims-2 becomes 2 and ndims-1=3. In such case, GDAL
generates 360x180 bands of 2x3 images, instead of the desired 2x3
bands of 360x180 images.

  Thus, I'm wondering if GDAL can expand VRT schema so that VRT allows
users to specify the correct dimension index because specifying
dimension order for each different NASA product in [1]  is
impractical. For example, I'd like suggest a new tag like
"SourceDimension" like below:

  <VRTRasterBand dataType="UInt16" band="1">
  <SimpleSource>
    <SourceFilename
relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilename>
    <SourceDimension RasterXDim="0" RasterYDim="1" />
    <SourceBand>1</SourceBand>
    <SourceProperties RasterXSize="360" RasterYSize="180"
DataType="UInt16" BlockXSize="360" BlockYSize="180" />
   ...
  </SimpleSource>
</VRTRasterBand>

  Once user specifies correct dimensions by editing VRT, it can be
used by GDAL HDF4/HDF5 drivers and the HDF drivers read the data
correctly for GDAL's image buffer.

  Do you think it's right and feasible approach to solve wrong X/Y
dimension order problem? Or do you have any other existing solution
that can mitigate this problem in GDAL? The GEE project team has
experimented the idea by creating another separate XML file [2] but I
think it's time to sync with GDAL development team and come up with
the most elegant solution. In my opinion, VRT looks best and I wish
GDAL development team can give me some feedback on this idea.

  Best Regards,



[1] http://hdfeos.org/zoo/
[2] https://wiki.earthdata.nasa.gov/pages/viewpage.action?pageId=65799385

From mateusz at loskot.net  Thu Aug  4 14:44:40 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 4 Aug 2016 23:44:40 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
Message-ID: <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>

On 4 August 2016 at 17:52, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
> On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>>
>> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
>> 2. Launch VS2015
>> 3. File > Open > Project/Solution...
>> 4. Select makegdal10.vcproj
>> 5. Accept to upgrade
>>
>
>
>
> Can we make sure to document these steps, so they are not lost in emails?
> Somewhere on the BuildHints wiki would be great.  Possibly here?
> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows

https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioproject

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ap.joseph at live.com  Thu Aug  4 15:00:29 2016
From: ap.joseph at live.com (Andrew Joseph)
Date: Thu, 4 Aug 2016 17:00:29 -0500
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase
 Support On Ubuntu 16.04
In-Reply-To: <1818299.DE8HmCh3gW@even-n550jk>
References: <1470342291850-5279578.post@n6.nabble.com>
 <3178248.QYRmmCnrzU@even-n550jk>
 <CAHDApB7bV+7z8X=EVLsRTKSC6oCHKTkJ9xFxwmrY7UxeFwyznA@mail.gmail.com>
 <1818299.DE8HmCh3gW@even-n550jk>
Message-ID: <CAHDApB5EwbgRvpCEWfO6vT3-mgjhxxZz4Ho-qS8LQwbrVKZHyg@mail.gmail.com>

using ./configure CXXFLAGS="-D_GLIBCXX_USE_CXX11_ABI=0" results in:

/tmp/gdal/gdal/libgdal.so: undefined reference to
`PoDoFo::PdfMemDocument::SetPassword(std::string
const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::client::Options::setSSLPEMKeyFile(std::string
const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::client::Options::setSSLCRLFile(std::string
const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::auth(std::string const&, std::string const&,
std::string const&, std::string&, bool)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `mongo::msgasserted(int,
std::string const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::BulkOperationBuilder::BulkOperationBuilder(mongo::DBClientBase*,
std::string const&, bool, bool)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::setGCPs(std::vector<kealib::KEAImageGCP*,
std::allocator<kealib::KEAImageGCP*> >*, std::string)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::createKEAImage(std::string,
kealib::KEADataType, unsigned int, unsigned int, unsigned int,
std::vector<std::string, std::allocator<std::string> >*,
kealib::KEAImageSpatialInfo*, unsigned int, unsigned int, int, unsigned
long long, unsigned long long, double, unsigned long long, unsigned long
long, unsigned int)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `mongo::BSONObjBuilder::
numStrs'
/tmp/gdal/gdal/libgdal.so: undefined reference to `kealib::KEAImageIO::
getGCPProjection()'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::client::Options::setSSLCAFile(std::string
const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `mongo::client::Options::
setSSLPEMKeyPassword(std::string const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::getImageBandMetaData(unsigned
int)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::getCollectionNames(std::string const&,
mongo::BSONObj const&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `kealib::KEAImageIO::
isKEAImage(std::string)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::setImageMetaData(std::string,
std::string)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::openKeaH5RDOnly(std::string,
int, unsigned long long, unsigned long long, double, unsigned long long,
unsigned long long)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::getDatabaseNames()'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::openKeaH5RW(std::string,
int, unsigned long long, unsigned long long, double, unsigned long long,
unsigned long long)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::ConnectionString::parse(std::string
const&, std::string&)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `kealib::KEAImageIO::
getImageMetaData()'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::ConnectionString::connect(std::string&,
double) const'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::Status::toString() const'
/tmp/gdal/gdal/libgdal.so: undefined reference to `mongo::OID::toString()
const'
/tmp/gdal/gdal/libgdal.so: undefined reference to `mongo::BSONElement::
jsonString(mongo::JsonStringFormat, bool, int) const'
/tmp/gdal/gdal/libgdal.so: undefined reference to `kealib::KEAImageIO::
getImageBandDescription(unsigned int)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::BSONObj::jsonString(mongo::JsonStringFormat, int, bool) const'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`kealib::KEAImageIO::setImageBandMetaData(unsigned
int, std::string, std::string)'
/tmp/gdal/gdal/libgdal.so: undefined reference to `kealib::KEAImageIO::
setImageBandDescription(unsigned int, std::string)'
/tmp/gdal/gdal/libgdal.so: undefined reference to
`mongo::OID::init(std::string const&)'
collect2: error: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1

and ./configure CXXFLAGS="-std=C++03 -D_GLIBCXX_USE_CXX11_ABI=0" results in:
configure: error: "You don't have a working C++ compiler." (I'm a java
developer so not very familiar with c/c++ compilation)

On Thu, Aug 4, 2016 at 4:02 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On Thursday 04 August 2016 15:59:22 Andrew Joseph wrote:
> > I had originally compiled without any of those flags (thought that might
> > have been the issue), but still get an error  though it is different:
>
> You may need to pass -std=C++03 and/or -D_GLIBCXX_USE_CXX11_ABI=0 as
> CXXFLAGS.
>
> >
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::Delete(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetFloat(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, float)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmlengine::Href::Parse(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetDouble(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, double)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::GetQueryName(std::__cxx11::
> basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >&) c                               onst'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetDouble(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, double&)
> const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::CreateTable(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> > const&, FileG
> > DBAPI::Table&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetGUID(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::Guid const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> >*,
> > std::__cxx11::basic_string<char, std::char_traits<char>,
> > std::allocator<char> >*) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetNull(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::FieldInfo::GetFieldName(int,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::OpenGeodatabase(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::Geodatabase&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetFloat(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, float&)
> const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetDate(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, tm&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::GetDocumentation(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetShort(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, short)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::OpenTable(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::Table&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::CreateFeatureDataset(std::__
> cxx11::basic_string<ch
> > ar, std::char_traits<char>, std::allocator<char> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetDate(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, tm const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetBinary(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::ByteArray&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetInteger(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, int)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::DeleteField(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::ExecuteSQL(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, bool,
> > FileGDBAPI::EnumRows&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::CreateGeodatabase(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::Geodatabase&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Geodatabase::GetChildDatasets(std::__cxx11:
> :basic_string<wchar_
> > t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >                                const&,
> > std::vector<std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >,
> > std::allocator<std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > > >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<
> kmldom::Element>
> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>,
> > std::allocator<char> > const&, std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> >*)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::AddField(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetBinary(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::ByteArray const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Guid::ToString(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> >&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::IsNull(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, bool&)
> const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetShort(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, short&)
> const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetXML(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<char, std::char_traits<char>,
> > std::allocator<char> >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::DeleteGeodatabase(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetInteger(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&, int&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::Search(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> > const&, bool, F
> > ileGDBAPI::EnumRows&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetString(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Guid::FromString(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `kmlengine::KmzFile::ReadFile(char const*, std::__cxx11::basic_string<
> char,
> > std::char_traits<char>, std::allocator<char> >*) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::Search(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> > const&, FileGDB
> > API::Envelope const&, bool, FileGDBAPI::EnumRows&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetXML(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<char, std::char_traits<char>,
> > std::allocator<char> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Table::GetDefinition(std::__cxx11::basic_string<char,
> > std::char_traits<char>, std::allocator<char> >&) const'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::SetString(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> > const&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::ErrorInfo::GetErrorDescription(int,
> > std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
> > std::allocator<wchar_t> >&)'
> > /tmp/gdal/libgdal.so: undefined reference to
> > `FileGDBAPI::Row::GetGUID(std::__cxx11::basic_string<wchar_t,
> > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,
> > FileGDBAPI::Guid&) const'
> > collect2: error: ld returned 1 exit status
> > make[1]: *** [gdalinfo] Error 1
> >
> >
> > On Thu, Aug 4, 2016 at 3:26 PM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Andrew,
> > >
> > > Remove
> > > CXX="g++ -std=c++14" CPPFLAGS="-DMAKE_SANITIZE_HAPPY
> -fsanitize=undefined
> > > -
> > > fsanitize=address" LDFLAGS="-fsanitize=undefined -fsanitize=address"
> > >
> > > from the configure.
> > >
> > > They are not intended for production use. More specifically the FGDB
> SDK
> > > doesn't like compiling with C++11 or 14.
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160804/7918fbf1/attachment-0001.html>

From even.rouault at spatialys.com  Thu Aug  4 15:21:32 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Aug 2016 00:21:32 +0200
Subject: [gdal-dev] Error Compiling GDAL with ESRI FileGeodatabase
	Support On Ubuntu 16.04
In-Reply-To: <CAHDApB5EwbgRvpCEWfO6vT3-mgjhxxZz4Ho-qS8LQwbrVKZHyg@mail.gmail.com>
References: <1470342291850-5279578.post@n6.nabble.com>
 <1818299.DE8HmCh3gW@even-n550jk>
 <CAHDApB5EwbgRvpCEWfO6vT3-mgjhxxZz4Ho-qS8LQwbrVKZHyg@mail.gmail.com>
Message-ID: <24127093.fCm5muyLMJ@even-n550jk>

On Thursday 04 August 2016 17:00:29 Andrew Joseph wrote:
> using ./configure CXXFLAGS="-D_GLIBCXX_USE_CXX11_ABI=0" results in:
> 
[...]
Looks like you must drop the mongo, podofo and kea dependencies, or recompile 
them with  -D_GLIBCXX_USE_CXX11_ABI=0 as well.

> and ./configure CXXFLAGS="-std=C++03 -D_GLIBCXX_USE_CXX11_ABI=0" results in:
> configure: error: "You don't have a working C++ compiler." (I'm a java
> developer so not very familiar with c/c++ compilation)

Hum, migt be case sensitive "-std=c++03 -D_GLIBCXX_USE_CXX11_ABI=0", but after 
thinking I don't think this is worth trying. The issue is more on the ABI than 
the version of C++.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug  4 15:32:03 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Aug 2016 00:32:03 +0200
Subject: [gdal-dev] Feasibility of expanding VRT schema to allow users
	to specify X/Y dimension for HDF data?
In-Reply-To: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>
References: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>
Message-ID: <2519356.THynjfpB8O@even-n550jk>

On Thursday 04 August 2016 16:31:25 H. Joe Lee wrote:
> Hi,
> 
>   My name is Joe Lee and I'm very interested in improving GDAL's
> capability to access NASA HDF4/HDF5 data so that users can work with
> HDF easily through GDAL. For example, my goal is to allow users to
> translate any HDF data into GeoTIFF via gdal_translate.
> 
>   I've worked with diverse NASA HDF products and provided solution for
> visualizing data correctly through Python/MATLAB/IDL/NCL [1] and I
> know that many products, other than HDF-EOS, may not work well with
> GDAL because HDF is flexible and NASA data producers do not
> necessarily follow the conventions that GDAL uses.
> 
>   By default, GDAL HDF4/HDF5 driver uses the following convention for
> unknown products.
> 
>     For HDF4 (frmts/hdf4/hdf4imagedataset.cpp):
> 
>     // Search for the starting "X" and "Y" in the names or take
>     // the last two dimensions as X and Y sizes
>     iXDim = nDimCount - 1;
>     iYDim = nDimCount - 2;
> 
>   For HDF5 (frmts/hdf5/hdf5imagedataset.cpp):
> 
>     int     GetYIndex() const { return IsComplexCSKL1A() ? 0 : ndims - 2; }
>     int     GetXIndex() const { return IsComplexCSKL1A() ? 1 : ndims - 1; }
> 
>  The above code works well as long as Unknown HDF product follows the
> above convention. However, in reality, HDF data can have an arbitrary
> order in terms of Band, X and Y dimension like this:
> 
>   dset4D[XDim=360][YDim=180][Band1=2][Band2=3]
>   dimindex:    0                      1            2             3
> 
>   Since ndims=4, ndims-2 becomes 2 and ndims-1=3. In such case, GDAL
> generates 360x180 bands of 2x3 images, instead of the desired 2x3
> bands of 360x180 images.
> 
>   Thus, I'm wondering if GDAL can expand VRT schema so that VRT allows
> users to specify the correct dimension index because specifying
> dimension order for each different NASA product in [1]  is
> impractical. For example, I'd like suggest a new tag like
> "SourceDimension" like below:
> 
>   <VRTRasterBand dataType="UInt16" band="1">
>   <SimpleSource>
>     <SourceFilename
> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilen
> ame> <SourceDimension RasterXDim="0" RasterYDim="1" />
>     <SourceBand>1</SourceBand>
>     <SourceProperties RasterXSize="360" RasterYSize="180"
> DataType="UInt16" BlockXSize="360" BlockYSize="180" />
>    ...
>   </SimpleSource>
> </VRTRasterBand>
> 
>   Once user specifies correct dimensions by editing VRT, it can be
> used by GDAL HDF4/HDF5 drivers and the HDF drivers read the data
> correctly for GDAL's image buffer.
> 
>   Do you think it's right and feasible approach to solve wrong X/Y
> dimension order problem? Or do you have any other existing solution
> that can mitigate this problem in GDAL? The GEE project team has
> experimented the idea by creating another separate XML file [2] but I
> think it's time to sync with GDAL development team and come up with
> the most elegant solution. In my opinion, VRT looks best and I wish
> GDAL development team can give me some feedback on this idea.

Joe,

I would rather suggest to add open options to the drivers and pass them with 
the exiting VRT OpenOptions element, rather than adding a new element in the 
VRT that would be specific of a few drivers

 <SimpleSource>
    <SourceFilename> 
relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilename>
   <OpenOptions>
      <OOI key="RASTERXDIM">0</OOI>
      <OOI key="RASTERYDIM">1</OOI>
   </OpenOptions>
    <SourceBand>1</SourceBand>
    <SourceProperties RasterXSize="360" RasterYSize="180" DataType="UInt16" 
BlockXSize="360" BlockYSize="180" />
   ...
  </SimpleSource>

Which is equivalent to:

gdalinfo HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7 -oo RASTERXDIM=0 -oo 
RASTERYDIM=0


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From warmerdam at pobox.com  Thu Aug  4 19:38:25 2016
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 4 Aug 2016 19:38:25 -0700
Subject: [gdal-dev] Feasibility of expanding VRT schema to allow users
 to specify X/Y dimension for HDF data?
In-Reply-To: <2519356.THynjfpB8O@even-n550jk>
References: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>
 <2519356.THynjfpB8O@even-n550jk>
Message-ID: <CA+YzLBeZxKMR-p-iprrNW2oDEtLsBRAteefq1kxkXup+Cufnig@mail.gmail.com>

Brian / Even,

Certainly it is desirable for the HDF (and perhaps other super
flexible formats like netcdf) to support an open option to select
alternative axes.  But the ability to transpose a dataset could also
be quite valuable in the VRT driver to "fix" any input transposed
dataset.

I'm also not entirely certain why one couldn't supply an appopriately
transposed geotransform to accomplish something similar.  This could
be done without any code changes in the existing VRT format.

Best regards,
Frank


On Thu, Aug 4, 2016 at 3:32 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> On Thursday 04 August 2016 16:31:25 H. Joe Lee wrote:
>> Hi,
>>
>>   My name is Joe Lee and I'm very interested in improving GDAL's
>> capability to access NASA HDF4/HDF5 data so that users can work with
>> HDF easily through GDAL. For example, my goal is to allow users to
>> translate any HDF data into GeoTIFF via gdal_translate.
>>
>>   I've worked with diverse NASA HDF products and provided solution for
>> visualizing data correctly through Python/MATLAB/IDL/NCL [1] and I
>> know that many products, other than HDF-EOS, may not work well with
>> GDAL because HDF is flexible and NASA data producers do not
>> necessarily follow the conventions that GDAL uses.
>>
>>   By default, GDAL HDF4/HDF5 driver uses the following convention for
>> unknown products.
>>
>>     For HDF4 (frmts/hdf4/hdf4imagedataset.cpp):
>>
>>     // Search for the starting "X" and "Y" in the names or take
>>     // the last two dimensions as X and Y sizes
>>     iXDim = nDimCount - 1;
>>     iYDim = nDimCount - 2;
>>
>>   For HDF5 (frmts/hdf5/hdf5imagedataset.cpp):
>>
>>     int     GetYIndex() const { return IsComplexCSKL1A() ? 0 : ndims - 2; }
>>     int     GetXIndex() const { return IsComplexCSKL1A() ? 1 : ndims - 1; }
>>
>>  The above code works well as long as Unknown HDF product follows the
>> above convention. However, in reality, HDF data can have an arbitrary
>> order in terms of Band, X and Y dimension like this:
>>
>>   dset4D[XDim=360][YDim=180][Band1=2][Band2=3]
>>   dimindex:    0                      1            2             3
>>
>>   Since ndims=4, ndims-2 becomes 2 and ndims-1=3. In such case, GDAL
>> generates 360x180 bands of 2x3 images, instead of the desired 2x3
>> bands of 360x180 images.
>>
>>   Thus, I'm wondering if GDAL can expand VRT schema so that VRT allows
>> users to specify the correct dimension index because specifying
>> dimension order for each different NASA product in [1]  is
>> impractical. For example, I'd like suggest a new tag like
>> "SourceDimension" like below:
>>
>>   <VRTRasterBand dataType="UInt16" band="1">
>>   <SimpleSource>
>>     <SourceFilename
>> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilen
>> ame> <SourceDimension RasterXDim="0" RasterYDim="1" />
>>     <SourceBand>1</SourceBand>
>>     <SourceProperties RasterXSize="360" RasterYSize="180"
>> DataType="UInt16" BlockXSize="360" BlockYSize="180" />
>>    ...
>>   </SimpleSource>
>> </VRTRasterBand>
>>
>>   Once user specifies correct dimensions by editing VRT, it can be
>> used by GDAL HDF4/HDF5 drivers and the HDF drivers read the data
>> correctly for GDAL's image buffer.
>>
>>   Do you think it's right and feasible approach to solve wrong X/Y
>> dimension order problem? Or do you have any other existing solution
>> that can mitigate this problem in GDAL? The GEE project team has
>> experimented the idea by creating another separate XML file [2] but I
>> think it's time to sync with GDAL development team and come up with
>> the most elegant solution. In my opinion, VRT looks best and I wish
>> GDAL development team can give me some feedback on this idea.
>
> Joe,
>
> I would rather suggest to add open options to the drivers and pass them with
> the exiting VRT OpenOptions element, rather than adding a new element in the
> VRT that would be specific of a few drivers
>
>  <SimpleSource>
>     <SourceFilename>
> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilename>
>    <OpenOptions>
>       <OOI key="RASTERXDIM">0</OOI>
>       <OOI key="RASTERYDIM">1</OOI>
>    </OpenOptions>
>     <SourceBand>1</SourceBand>
>     <SourceProperties RasterXSize="360" RasterYSize="180" DataType="UInt16"
> BlockXSize="360" BlockYSize="180" />
>    ...
>   </SimpleSource>
>
> Which is equivalent to:
>
> gdalinfo HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7 -oo RASTERXDIM=0 -oo
> RASTERYDIM=0
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From hyoklee at hdfgroup.org  Thu Aug  4 20:23:27 2016
From: hyoklee at hdfgroup.org (H. Joe Lee)
Date: Thu, 4 Aug 2016 22:23:27 -0500
Subject: [gdal-dev] Feasibility of expanding VRT schema to allow users
 to specify X/Y dimension for HDF data?
In-Reply-To: <2519356.THynjfpB8O@even-n550jk>
References: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>
 <2519356.THynjfpB8O@even-n550jk>
Message-ID: <CADeM3-ws-PCQE=mX9i_FaCcVkcNm+1nB6n2OOkaTamgEvsHV1g@mail.gmail.com>

Thank you so much, Even! OpenOptions sounds like a perfect match for
this case. I'll try it with HDF drivers and see how it goes with
gdal_translate.

Best Regards,



On Thu, Aug 4, 2016 at 5:32 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> On Thursday 04 August 2016 16:31:25 H. Joe Lee wrote:
>> Hi,
>>
>>   My name is Joe Lee and I'm very interested in improving GDAL's
>> capability to access NASA HDF4/HDF5 data so that users can work with
>> HDF easily through GDAL. For example, my goal is to allow users to
>> translate any HDF data into GeoTIFF via gdal_translate.
>>
>>   I've worked with diverse NASA HDF products and provided solution for
>> visualizing data correctly through Python/MATLAB/IDL/NCL [1] and I
>> know that many products, other than HDF-EOS, may not work well with
>> GDAL because HDF is flexible and NASA data producers do not
>> necessarily follow the conventions that GDAL uses.
>>
>>   By default, GDAL HDF4/HDF5 driver uses the following convention for
>> unknown products.
>>
>>     For HDF4 (frmts/hdf4/hdf4imagedataset.cpp):
>>
>>     // Search for the starting "X" and "Y" in the names or take
>>     // the last two dimensions as X and Y sizes
>>     iXDim = nDimCount - 1;
>>     iYDim = nDimCount - 2;
>>
>>   For HDF5 (frmts/hdf5/hdf5imagedataset.cpp):
>>
>>     int     GetYIndex() const { return IsComplexCSKL1A() ? 0 : ndims - 2; }
>>     int     GetXIndex() const { return IsComplexCSKL1A() ? 1 : ndims - 1; }
>>
>>  The above code works well as long as Unknown HDF product follows the
>> above convention. However, in reality, HDF data can have an arbitrary
>> order in terms of Band, X and Y dimension like this:
>>
>>   dset4D[XDim=360][YDim=180][Band1=2][Band2=3]
>>   dimindex:    0                      1            2             3
>>
>>   Since ndims=4, ndims-2 becomes 2 and ndims-1=3. In such case, GDAL
>> generates 360x180 bands of 2x3 images, instead of the desired 2x3
>> bands of 360x180 images.
>>
>>   Thus, I'm wondering if GDAL can expand VRT schema so that VRT allows
>> users to specify the correct dimension index because specifying
>> dimension order for each different NASA product in [1]  is
>> impractical. For example, I'd like suggest a new tag like
>> "SourceDimension" like below:
>>
>>   <VRTRasterBand dataType="UInt16" band="1">
>>   <SimpleSource>
>>     <SourceFilename
>> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilen
>> ame> <SourceDimension RasterXDim="0" RasterYDim="1" />
>>     <SourceBand>1</SourceBand>
>>     <SourceProperties RasterXSize="360" RasterYSize="180"
>> DataType="UInt16" BlockXSize="360" BlockYSize="180" />
>>    ...
>>   </SimpleSource>
>> </VRTRasterBand>
>>
>>   Once user specifies correct dimensions by editing VRT, it can be
>> used by GDAL HDF4/HDF5 drivers and the HDF drivers read the data
>> correctly for GDAL's image buffer.
>>
>>   Do you think it's right and feasible approach to solve wrong X/Y
>> dimension order problem? Or do you have any other existing solution
>> that can mitigate this problem in GDAL? The GEE project team has
>> experimented the idea by creating another separate XML file [2] but I
>> think it's time to sync with GDAL development team and come up with
>> the most elegant solution. In my opinion, VRT looks best and I wish
>> GDAL development team can give me some feedback on this idea.
>
> Joe,
>
> I would rather suggest to add open options to the drivers and pass them with
> the exiting VRT OpenOptions element, rather than adding a new element in the
> VRT that would be specific of a few drivers
>
>  <SimpleSource>
>     <SourceFilename>
> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFilename>
>    <OpenOptions>
>       <OOI key="RASTERXDIM">0</OOI>
>       <OOI key="RASTERYDIM">1</OOI>
>    </OpenOptions>
>     <SourceBand>1</SourceBand>
>     <SourceProperties RasterXSize="360" RasterYSize="180" DataType="UInt16"
> BlockXSize="360" BlockYSize="180" />
>    ...
>   </SimpleSource>
>
> Which is equivalent to:
>
> gdalinfo HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7 -oo RASTERXDIM=0 -oo
> RASTERYDIM=0
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug  5 00:59:13 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Aug 2016 09:59:13 +0200
Subject: [gdal-dev] Feasibility of expanding VRT schema to allow users
	to specify X/Y dimension for HDF data?
In-Reply-To: <CA+YzLBeZxKMR-p-iprrNW2oDEtLsBRAteefq1kxkXup+Cufnig@mail.gmail.com>
References: <CADeM3-y3BMW_bZYw-Te8b7=ctSvcVm+fpy6LeQzOs09=9r++Gg@mail.gmail.com>
 <2519356.THynjfpB8O@even-n550jk>
 <CA+YzLBeZxKMR-p-iprrNW2oDEtLsBRAteefq1kxkXup+Cufnig@mail.gmail.com>
Message-ID: <27766100.ccqjImSxoJ@even-n550jk>

Frank,

>From what I understand from Joe's needs, it looks like simple transposing of a 
2D raster wouldn't be enough. Here we would need to "transpose" pixels 
scattered through different subdatasets due to the Nd > 2 dimensionality of the 
original dataset, which would be impractical to express at the VRT level, and 
likely inefficient.

Something I've thought about would be to make Nd > 2 rasters native objects at 
the GDAL level, but this would have likely deep implications on the code base 
and should be considered carefully, and would be of interest for a limited set 
of drivers (netCDF, HDF4, HDF5, Rasdaman).

Even

> Brian / Even,
> 
> Certainly it is desirable for the HDF (and perhaps other super
> flexible formats like netcdf) to support an open option to select
> alternative axes.  But the ability to transpose a dataset could also
> be quite valuable in the VRT driver to "fix" any input transposed
> dataset.
> 
> I'm also not entirely certain why one couldn't supply an appopriately
> transposed geotransform to accomplish something similar.  This could
> be done without any code changes in the existing VRT format.
> 
> Best regards,
> Frank
> 
> On Thu, Aug 4, 2016 at 3:32 PM, Even Rouault <even.rouault at spatialys.com> 
wrote:
> > On Thursday 04 August 2016 16:31:25 H. Joe Lee wrote:
> >> Hi,
> >> 
> >>   My name is Joe Lee and I'm very interested in improving GDAL's
> >> 
> >> capability to access NASA HDF4/HDF5 data so that users can work with
> >> HDF easily through GDAL. For example, my goal is to allow users to
> >> translate any HDF data into GeoTIFF via gdal_translate.
> >> 
> >>   I've worked with diverse NASA HDF products and provided solution for
> >> 
> >> visualizing data correctly through Python/MATLAB/IDL/NCL [1] and I
> >> know that many products, other than HDF-EOS, may not work well with
> >> GDAL because HDF is flexible and NASA data producers do not
> >> necessarily follow the conventions that GDAL uses.
> >> 
> >>   By default, GDAL HDF4/HDF5 driver uses the following convention for
> >> 
> >> unknown products.
> >> 
> >>     For HDF4 (frmts/hdf4/hdf4imagedataset.cpp):
> >>     
> >>     // Search for the starting "X" and "Y" in the names or take
> >>     // the last two dimensions as X and Y sizes
> >>     iXDim = nDimCount - 1;
> >>     iYDim = nDimCount - 2;
> >>   
> >>   For HDF5 (frmts/hdf5/hdf5imagedataset.cpp):
> >>     int     GetYIndex() const { return IsComplexCSKL1A() ? 0 : ndims - 2;
> >>     }
> >>     int     GetXIndex() const { return IsComplexCSKL1A() ? 1 : ndims - 1;
> >>     }
> >>  
> >>  The above code works well as long as Unknown HDF product follows the
> >> 
> >> above convention. However, in reality, HDF data can have an arbitrary
> >> 
> >> order in terms of Band, X and Y dimension like this:
> >>   dset4D[XDim=360][YDim=180][Band1=2][Band2=3]
> >>   dimindex:    0                      1            2             3
> >>   
> >>   Since ndims=4, ndims-2 becomes 2 and ndims-1=3. In such case, GDAL
> >> 
> >> generates 360x180 bands of 2x3 images, instead of the desired 2x3
> >> bands of 360x180 images.
> >> 
> >>   Thus, I'm wondering if GDAL can expand VRT schema so that VRT allows
> >> 
> >> users to specify the correct dimension index because specifying
> >> dimension order for each different NASA product in [1]  is
> >> impractical. For example, I'd like suggest a new tag like
> >> 
> >> "SourceDimension" like below:
> >>   <VRTRasterBand dataType="UInt16" band="1">
> >>   <SimpleSource>
> >>   
> >>     <SourceFilename
> >> 
> >> relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFi
> >> len ame> <SourceDimension RasterXDim="0" RasterYDim="1" />
> >> 
> >>     <SourceBand>1</SourceBand>
> >>     <SourceProperties RasterXSize="360" RasterYSize="180"
> >> 
> >> DataType="UInt16" BlockXSize="360" BlockYSize="180" />
> >> 
> >>    ...
> >>   
> >>   </SimpleSource>
> >> 
> >> </VRTRasterBand>
> >> 
> >>   Once user specifies correct dimensions by editing VRT, it can be
> >> 
> >> used by GDAL HDF4/HDF5 drivers and the HDF drivers read the data
> >> correctly for GDAL's image buffer.
> >> 
> >>   Do you think it's right and feasible approach to solve wrong X/Y
> >> 
> >> dimension order problem? Or do you have any other existing solution
> >> that can mitigate this problem in GDAL? The GEE project team has
> >> experimented the idea by creating another separate XML file [2] but I
> >> think it's time to sync with GDAL development team and come up with
> >> the most elegant solution. In my opinion, VRT looks best and I wish
> >> GDAL development team can give me some feedback on this idea.
> > 
> > Joe,
> > 
> > I would rather suggest to add open options to the drivers and pass them
> > with the exiting VRT OpenOptions element, rather than adding a new
> > element in the VRT that would be specific of a few drivers
> > 
> >  <SimpleSource>
> >  
> >     <SourceFilename>
> > 
> > relativeToVRT="0">HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7</SourceFil
> > ename>> 
> >    <OpenOptions>
> >    
> >       <OOI key="RASTERXDIM">0</OOI>
> >       <OOI key="RASTERYDIM">1</OOI>
> >    
> >    </OpenOptions>
> >    
> >     <SourceBand>1</SourceBand>
> >     <SourceProperties RasterXSize="360" RasterYSize="180"
> >     DataType="UInt16"
> > 
> > BlockXSize="360" BlockYSize="180" />
> > 
> >    ...
> >   
> >   </SimpleSource>
> > 
> > Which is equivalent to:
> > 
> > gdalinfo HDF4_SDS:UNKNOWN:"DATA_WITH_4D_DATASET.hdf":7 -oo RASTERXDIM=0
> > -oo
> > RASTERYDIM=0
> > 
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Fri Aug  5 04:30:24 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 5 Aug 2016 08:30:24 -0300
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
Message-ID: <5613b2c2-afaf-0be1-27f2-c398fb50fb04@gatewaygeomatics.com>

On 2016-08-04 6:44 PM, Mateusz Loskot wrote:
>>
>> Can we make sure to document these steps, so they are not lost in emails?
>> Somewhere on the BuildHints wiki would be great.  Possibly here?
>> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
>
> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioproject
>

Thanks.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From gfrancis.dev at gmail.com  Fri Aug  5 08:02:28 2016
From: gfrancis.dev at gmail.com (Gareth Francis)
Date: Fri, 5 Aug 2016 16:02:28 +0100
Subject: [gdal-dev] No SONAME in libgdal.so when building with
	--without-libtool
Message-ID: <CAEKysgQ6cRR8HJDgJ9GstJN1fD0zQ1LgC=sUVbub2MoUDEGJng@mail.gmail.com>

Encountered on Centos 6, x86_64

configured with --without-libtool, resulting libgdal.so has no SONAME entry

The link command for libgdal.so uses the variable 'GDAL_SLIB_SONAME' which
isn't defined in GDALmake.opt.in

The attached patch fixes the issue, and I believe will generate the same
name as libtool.

Thanks
Gareth Francis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160805/df104d37/attachment.html>
-------------- next part --------------
Index: GDALmake.opt.in
===================================================================
--- GDALmake.opt.in	(revision 34928)
+++ GDALmake.opt.in	(working copy)
@@ -135,6 +135,7 @@
 GDAL_LIB	= 	$(GDAL_ROOT)/libgdal.a
 GDAL_SLIB	=	$(GDAL_ROOT)/libgdal.$(SO_EXT)
 GDAL_SLIB_LINK	=	-L$(GDAL_ROOT) -lgdal
+GDAL_SLIB_SONAME = -Wl,-soname,libgdal.$(SO_EXT). at GDAL_VERSION_MAJOR@
 
 # Mac OS X Framework definition
 MACOSX_FRAMEWORK = @MACOSX_FRAMEWORK@

From jan.heckman at gmail.com  Fri Aug  5 11:39:25 2016
From: jan.heckman at gmail.com (Jan Heckman)
Date: Fri, 5 Aug 2016 20:39:25 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <5613b2c2-afaf-0be1-27f2-c398fb50fb04@gatewaygeomatics.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
 <5613b2c2-afaf-0be1-27f2-c398fb50fb04@gatewaygeomatics.com>
Message-ID: <CAKMUAtAy6CO+hPn_nPH=r5kNhWCJh2kVb1hCei=Uh8OLKw4y9g@mail.gmail.com>

Hi,
Great stuff here!
A minor point: please add quotes to the copy path in post-build event.
Often people (like me) will have spaces in the project path,
e.g. C:\Users\jan\Documents\Visual Studio
2015\Projects\GDAL_2.1.x_VC-master\libgdal-2.1.1.
copy
$(Projectdir)$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)
$(SolutionDir)binaries\lib\$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)
becomes
copy
"$(Projectdir)$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)"
"$(SolutionDir)binaries\lib\$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)"
Can confirm it works fine in VS2015 and full lists of (re)source and header
files are indeed present. Neat!
Jan

On Fri, Aug 5, 2016 at 1:30 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> On 2016-08-04 6:44 PM, Mateusz Loskot wrote:
>
>>
>>> Can we make sure to document these steps, so they are not lost in emails?
>>> Somewhere on the BuildHints wiki would be great.  Possibly here?
>>> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
>>>
>>
>> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#Generatin
>> gVisualStudioproject
>>
>>
> Thanks.
>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160805/dfb822b7/attachment.html>

From fernando.ribeiro at geo-solutions.it  Sat Aug  6 06:20:54 2016
From: fernando.ribeiro at geo-solutions.it (Fernando Ribeiro)
Date: Sat, 6 Aug 2016 15:20:54 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
Message-ID: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>

Dear list,

Currently we are working with 4 band tifs, first 3 bands as normal RBG 
and the 4th as IR. On performing a warp operation from and to a VRT, 
GDAL seems considering the 4th band as alpha, resulting in full black 
pixels if 4th band value =0.

Some attempts were made to solve this issue, so far without success:

- Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO

- Manually editing the source VRT and replace Alpha color interpretation 
to Undefined

Does anyone have more suggestions?

Thank you

-- 
Regards,
Fernando Ribeiro
==
GeoServer Professional Services from the experts!
Visit http://goo.gl/it488V for more information.
==
Fernando Ribeiro
DevOps / Support Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:   +39 0584 1660272
mob:   +39 333 	8128928

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il loro utilizzo è consentito esclusivamente al destinatario del messaggio, per le finalità indicate nel messaggio stesso. Qualora riceviate questo messaggio senza esserne il destinatario, Vi preghiamo cortesemente di darcene notizia via e-mail e di procedere alla distruzione del messaggio stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso, divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od utilizzarlo per finalità diverse, costituisce comportamento contrario ai principi dettati dal D.Lgs. 196/2003.
  
The information in this message and/or attachments, is intended solely for the attention and use of the named addressee(s) and may be confidential or proprietary in nature or covered by the provisions of privacy act (Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection Code).Any use not in accord with its purpose, any disclosure, reproduction, copying, distribution, or either dissemination, either whole or partial, is strictly forbidden except previous formal approval of the named addressee(s). If you are not the intended recipient, please contact immediately the sender by telephone, fax or e-mail and delete the information in this message that has been received in error. The sender does not give any warranty or accept liability as the content, accuracy or completeness of sent messages and accepts no responsibility  for changes made after they were sent or for other risks which arise as a result of e-mail transmission, viruses, etc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160806/3ef72a3d/attachment.html>

From jan.heckman at gmail.com  Sat Aug  6 13:19:30 2016
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sat, 6 Aug 2016 22:19:30 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
Message-ID: <CAKMUAtDXOLG8PB=CD1eoQnUGa7T94GzCqP8=wKMin1QSRppWyQ@mail.gmail.com>

Hi Mateusz,
Thanks for your effort! It is really handy for me.
FYI, a few more things I came across:
- In the dll post build event there are 3 copy commands (dll, lib and exp).
The second and third command need a space before 'copy'.
- Enclosing source and destination file macros in quotes helps.
- in 64 bits compilation (VS2015 community update 1) the link fails with a
C1001 (internal compiler error). This is incurred by gdalexif.cpp, which is
not to blame btw.
  The 'solution' is to turn off compiler optimization for this file only
(and only for x64 compilation). Have not checked whether this happens e.g.
in VS2013.
- diminishing the number of compiler warnings:
 - /D _CRT_SECURE_NO_WARNINGS, if the secure versions are not going to be
used anyway (portability?).
 - change deprecated POSIX (acc. to VS), such as open, read, write, close,
fdopen, setmode to underscored names (_open, _read etc.)
   Not sure whether this is exclusively MS.
- warnings which are somewhat worryable: C4251, when compiling or using
DLL: X used in clas Y needs dll-interface.
  article <https://support.microsoft.com/en-us/kb/168958> claims to solve
this, but not too well, imo, because the proposed solution then causes the
same warning..
  Advice (e.g. gamedev mails
<http://www.gamedev.net/topic/637431-dealing-with-needs-to-have-dll-interface-to-be-used-by-clients-of-class/>)
is
not to export whole classes but only public members and ctor - dtor. More
to be found here
<http://stackoverflow.com/questions/767579/exporting-classes-containing-std-objects-vector-map-etc-from-a-dll?noredirect=1&lq=1>
.
  Claims that some STL (esp vector) can be safely exported, but not all
(map has (or at least had) a static member).
I've never come to grief ignoring C2451, so far.
Jan

On Thu, Aug 4, 2016 at 4:07 PM, Mateusz Loskot <mateusz at loskot.net> wrote:

> On 4 August 2016 at 15:41, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> > Hi Mateusz,
> >
> > I far as I know the project generated by makegdal_gen.bat does not work
> with newer version of VS.
> >
> > It used to be the case that we can import the project to newer version
> of VS but I think that MS dropped the support for that feature.
> >
> > Have one of you manage to load the generated .vcproj into VS > 2010? I
> would like to know how to do that!
>
> Ivan,
>
> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
> 2. Launch VS2015
> 3. File > Open > Project/Solution...
> 4. Select makegdal10.vcproj
> 5. Accept to upgrade
>
> I can confirm it works for me.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160806/949440e4/attachment.html>

From even.rouault at spatialys.com  Sun Aug  7 10:20:05 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Aug 2016 19:20:05 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
In-Reply-To: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
References: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
Message-ID: <201608071920.05542.even.rouault@spatialys.com>

Le samedi 06 août 2016 15:20:54, Fernando Ribeiro a écrit :
> Dear list,
> 
> Currently we are working with 4 band tifs, first 3 bands as normal RBG
> and the 4th as IR. On performing a warp operation from and to a VRT,
> GDAL seems considering the 4th band as alpha, resulting in full black
> pixels if 4th band value =0.

gdalwarp will consider the 4th band as alpha... only if it is effectively 
tagged as alpha in the source. You can check it with gdalinfo

> 
> Some attempts were made to solve this issue, so far without success:
> 
> - Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO

This will not influence the warping kernel.

> 
> - Manually editing the source VRT and replace Alpha color interpretation
> to Undefined

This one should work. Strange that this doesn't work for you.

> 
> Does anyone have more suggestions?
> 
> Thank you

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Aug  7 11:20:11 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Aug 2016 20:20:11 +0200
Subject: [gdal-dev] Warning-free "make docs" and "make man"
Message-ID: <201608072020.11887.even.rouault@spatialys.com>

Hi,

FYI, in the last couple of days, I've pushed many fixes so that "make docs" 
(HTML doc) and "make man" (man pages) are now warning-free in the Doxygen log. 
This is now asserted in the .travis.yml of trunk.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Aug  7 13:38:17 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Aug 2016 22:38:17 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
In-Reply-To: <201608071920.05542.even.rouault@spatialys.com>
References: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
 <201608071920.05542.even.rouault@spatialys.com>
Message-ID: <201608072238.17554.even.rouault@spatialys.com>

Le dimanche 07 août 2016 19:20:05, Even Rouault a écrit :
> Le samedi 06 août 2016 15:20:54, Fernando Ribeiro a écrit :
> > Dear list,
> > 
> > Currently we are working with 4 band tifs, first 3 bands as normal RBG
> > and the 4th as IR. On performing a warp operation from and to a VRT,
> > GDAL seems considering the 4th band as alpha, resulting in full black
> > pixels if 4th band value =0.
> 
> gdalwarp will consider the 4th band as alpha... only if it is effectively
> tagged as alpha in the source. You can check it with gdalinfo
> 
> > Some attempts were made to solve this issue, so far without success:
> > 
> > - Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO
> 
> This will not influence the warping kernel.
> 
> > - Manually editing the source VRT and replace Alpha color interpretation
> > to Undefined
> 
> This one should work. Strange that this doesn't work for you.
> 
> > Does anyone have more suggestions?

I've just committed an improvement in trunk: "gdalwarp: add a -nosrcalpha 
option to wrap the alpha band as a regular band and not as the alpha band"

> > 
> > Thank you

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From 191980 at niuitmo.ru  Sun Aug  7 13:56:15 2016
From: 191980 at niuitmo.ru (=?koi8-r?B?4s/S2tnIIOHMxcvTwc7E0iDhzsTSxcXXyd4=?=)
Date: Sun, 7 Aug 2016 20:56:15 +0000
Subject: [gdal-dev] GSoC GDAL DWG Support [Week 11]
Message-ID: <AMSPR01MB294AE7D4C216A48C5B0DD8FB61A0@AMSPR01MB294.eurprd01.prod.exchangelabs.com>

Blogpost link<http://gsoc2016gdaldwg.blogspot.ru/2016/08/week-11-report.html> (full copy is below).

1. This week I've done:
OGR CAD Driver changes:
- A lot of warnings fixed.
- Travis build passes.
- Configure script checks c++ compiler compability with C++11 and enables CAD driver if it exists.

2. Plan on doing next week:
Windows build, fixes of various problems mentioned in PR.

3. Blocking:
None.

Best regards,
Alexandr Borzykh

Links:
libopencad github<https://github.com/sandyre/libopencad><https://github.com/sandyre/libopencad>
gdal-trunk PR<https://github.com/OSGeo/gdal/pull/145>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160807/2a2dfe5b/attachment.html>

From daniele.romagnoli at geo-solutions.it  Mon Aug  8 00:30:53 2016
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Mon, 8 Aug 2016 09:30:53 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
In-Reply-To: <201608072238.17554.even.rouault@spatialys.com>
References: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
 <201608071920.05542.even.rouault@spatialys.com>
 <201608072238.17554.even.rouault@spatialys.com>
Message-ID: <CAJaHrDyjSGEEYcRyzspmHM3oGTvxTbac11oL1gqYvtC+ccQoOA@mail.gmail.com>

Hi Even,
my usual question would be: any plan to backport it? :-)

Cheers,
Daniele





On Sun, Aug 7, 2016 at 10:38 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le dimanche 07 août 2016 19:20:05, Even Rouault a écrit :
> > Le samedi 06 août 2016 15:20:54, Fernando Ribeiro a écrit :
> > > Dear list,
> > >
> > > Currently we are working with 4 band tifs, first 3 bands as normal RBG
> > > and the 4th as IR. On performing a warp operation from and to a VRT,
> > > GDAL seems considering the 4th band as alpha, resulting in full black
> > > pixels if 4th band value =0.
> >
> > gdalwarp will consider the 4th band as alpha... only if it is effectively
> > tagged as alpha in the source. You can check it with gdalinfo
> >
> > > Some attempts were made to solve this issue, so far without success:
> > >
> > > - Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO
> >
> > This will not influence the warping kernel.
> >
> > > - Manually editing the source VRT and replace Alpha color
> interpretation
> > > to Undefined
> >
> > This one should work. Strange that this doesn't work for you.
> >
> > > Does anyone have more suggestions?
>
> I've just committed an improvement in trunk: "gdalwarp: add a -nosrcalpha
> option to wrap the alpha band as a regular band and not as the alpha band"
>
> > >
> > > Thank you
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
==
GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

*AVVERTENZE AI SENSI DEL D.Lgs. 196/2003*

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.



The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/b64a66e4/attachment.html>

From mathieu.lattes at yahoo.fr  Mon Aug  8 02:05:40 2016
From: mathieu.lattes at yahoo.fr (M. LATTES)
Date: Mon, 8 Aug 2016 09:05:40 +0000 (UTC)
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CAKMUAtAy6CO+hPn_nPH=r5kNhWCJh2kVb1hCei=Uh8OLKw4y9g@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
 <5613b2c2-afaf-0be1-27f2-c398fb50fb04@gatewaygeomatics.com>
 <CAKMUAtAy6CO+hPn_nPH=r5kNhWCJh2kVb1hCei=Uh8OLKw4y9g@mail.gmail.com>
Message-ID: <2005056754.18778778.1470647141309.JavaMail.yahoo@mail.yahoo.com>

Hi Jan

thanks, 

Indeed, I'll update the master with the quote in post-builds events. 

Regards.

Mathieu Lattes
 

 

    Le Vendredi 5 août 2016 20h39, Jan Heckman <jan.heckman at gmail.com> a écrit :
 

 Hi,Great stuff here!A minor point: please add quotes to the copy path in post-build event.Often people (like me) will have spaces in the project path, e.g. C:\Users\jan\Documents\Visual Studio 2015\Projects\GDAL_2.1.x_VC-master\libgdal-2.1.1.copy $(Projectdir)$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt) $(SolutionDir)binaries\lib\$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt) becomes
copy "$(Projectdir)$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)" "$(SolutionDir)binaries\lib\$(PlatformShortName)\$(Configuration)\$(TargetName)$(TargetExt)"
Can confirm it works fine in VS2015 and full lists of (re)source and header files are indeed present. Neat!Jan
On Fri, Aug 5, 2016 at 1:30 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:

On 2016-08-04 6:44 PM, Mateusz Loskot wrote:



Can we make sure to document these steps, so they are not lost in emails?
Somewhere on the BuildHints wiki would be great.  Possibly here?
https://trac.osgeo.org/gdal/wi ki/BuildingOnWindows


https://trac.osgeo.org/gdal/wi ki/BuildingOnWindows#Generatin gVisualStudioproject



Thanks.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.co m/



______________________________ _________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman /listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/b7aacb67/attachment-0001.html>

From mathieu.lattes at yahoo.fr  Mon Aug  8 02:10:07 2016
From: mathieu.lattes at yahoo.fr (M. LATTES)
Date: Mon, 8 Aug 2016 09:10:07 +0000 (UTC)
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CAKMUAtDXOLG8PB=CD1eoQnUGa7T94GzCqP8=wKMin1QSRppWyQ@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <CAKMUAtDXOLG8PB=CD1eoQnUGa7T94GzCqP8=wKMin1QSRppWyQ@mail.gmail.com>
Message-ID: <298659336.18347269.1470647407559.JavaMail.yahoo@mail.yahoo.com>

Jan,

I'll dig into it and it let you know.

Mathieu Lattes
 

 

    Le Samedi 6 août 2016 22h19, Jan Heckman <jan.heckman at gmail.com> a écrit :
 

 Hi Mateusz,Thanks for your effort! It is really handy for me.
FYI, a few more things I came across:- In the dll post build event there are 3 copy commands (dll, lib and exp). The second and third command need a space before 'copy'.- Enclosing source and destination file macros in quotes helps.- in 64 bits compilation (VS2015 community update 1) the link fails with a C1001 (internal compiler error). This is incurred by gdalexif.cpp, which is not to blame btw.  The 'solution' is to turn off compiler optimization for this file only (and only for x64 compilation). Have not checked whether this happens e.g. in VS2013.- diminishing the number of compiler warnings: - /D _CRT_SECURE_NO_WARNINGS, if the secure versions are not going to be used anyway (portability?). - change deprecated POSIX (acc. to VS), such as open, read, write, close, fdopen, setmode to underscored names (_open, _read etc.)   Not sure whether this is exclusively MS.- warnings which are somewhat worryable: C4251, when compiling or using DLL: X used in clas Y needs dll-interface.  article claims to solve this, but not too well, imo, because the proposed solution then causes the same warning..  Advice (e.g. gamedev mails) is not to export whole classes but only public members and ctor - dtor. More to be found here.  Claims that some STL (esp vector) can be safely exported, but not all (map has (or at least had) a static member).I've never come to grief ignoring C2451, so far.Jan
On Thu, Aug 4, 2016 at 4:07 PM, Mateusz Loskot <mateusz at loskot.net> wrote:

On 4 August 2016 at 15:41, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> Hi Mateusz,
>
> I far as I know the project generated by makegdal_gen.bat does not work with newer version of VS.
>
> It used to be the case that we can import the project to newer version of VS but I think that MS dropped the support for that feature.
>
> Have one of you manage to load the generated .vcproj into VS > 2010? I would like to know how to do that!

Ivan,

1. makegdal_gen 10.00 32 > makegdal10.vcproj
2. Launch VS2015
3. File > Open > Project/Solution...
4. Select makegdal10.vcproj
5. Accept to upgrade

I can confirm it works for me.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net
______________________________ _________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/ mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/8dcbc4ee/attachment.html>

From even.rouault at spatialys.com  Mon Aug  8 02:26:52 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Aug 2016 11:26:52 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
In-Reply-To: <CAJaHrDyjSGEEYcRyzspmHM3oGTvxTbac11oL1gqYvtC+ccQoOA@mail.gmail.com>
References: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
 <201608072238.17554.even.rouault@spatialys.com>
 <CAJaHrDyjSGEEYcRyzspmHM3oGTvxTbac11oL1gqYvtC+ccQoOA@mail.gmail.com>
Message-ID: <201608081126.53076.even.rouault@spatialys.com>

Le lundi 08 août 2016 09:30:53, Daniele Romagnoli a écrit :
> Hi Even,
> my usual question would be: any plan to backport it? :-)

Not really. I guess this is a new feature.

As currently, our policy is to be rather conservative for what goes in stable 
branches, so people can upgrade from one micro version to another one 
blindlessly.
Regarding that particular feature, it could potentially be backported, but 
then where to draw the limit ? At some point, one such backport will undoubtly 
cause a regression elsewhere, or will have bugs, causing more stabilization 
work in stable branches.

Potential solutions:
- More frequent major.minor.0 releases that our ~ 1 year schedule
- Less conservative policy backport policy in regular stable branches that 
would allow some new features to be added, but within the current limits of no 
ABI change, no backward incompatibilities.
- An extra -backport branch that would have a less conservative policy. To be 
defined what would be the limits: ABI changes allowed or not ?, backward 
incompatibilities ? Would potentially only of interest for people who can 
build from source as it would be unlikely to be widely packaged.

All would need extra staffing / funding.

Another option that already exists: live on the bleeding edge and build from 
trunk ;-)

Even

> 
> Cheers,
> Daniele
> 
> 
> 
> 
> 
> On Sun, Aug 7, 2016 at 10:38 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le dimanche 07 août 2016 19:20:05, Even Rouault a écrit :
> > > Le samedi 06 août 2016 15:20:54, Fernando Ribeiro a écrit :
> > > > Dear list,
> > > > 
> > > > Currently we are working with 4 band tifs, first 3 bands as normal
> > > > RBG and the 4th as IR. On performing a warp operation from and to a
> > > > VRT, GDAL seems considering the 4th band as alpha, resulting in full
> > > > black pixels if 4th band value =0.
> > > 
> > > gdalwarp will consider the 4th band as alpha... only if it is
> > > effectively tagged as alpha in the source. You can check it with
> > > gdalinfo
> > > 
> > > > Some attempts were made to solve this issue, so far without success:
> > > > 
> > > > - Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO
> > > 
> > > This will not influence the warping kernel.
> > > 
> > > > - Manually editing the source VRT and replace Alpha color
> > 
> > interpretation
> > 
> > > > to Undefined
> > > 
> > > This one should work. Strange that this doesn't work for you.
> > > 
> > > > Does anyone have more suggestions?
> > 
> > I've just committed an improvement in trunk: "gdalwarp: add a -nosrcalpha
> > option to wrap the alpha band as a regular band and not as the alpha
> > band"
> > 
> > > > Thank you
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From diregola at gmail.com  Mon Aug  8 05:19:32 2016
From: diregola at gmail.com (Margherita Di Leo)
Date: Mon, 8 Aug 2016 14:19:32 +0200
Subject: [gdal-dev] Tiling with overlap
Message-ID: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>

Dear all,

is there a simple way to create tiles with a certain overlap?

Any hint appreciated.
Thanks in advance



-- 
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/396bcedd/attachment.html>

From ari.jolma at gmail.com  Mon Aug  8 05:56:12 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 8 Aug 2016 15:56:12 +0300
Subject: [gdal-dev] GDAL raster processing library?
In-Reply-To: <CAEW=KS76Mk5kab9b7jYR=rh5U7jKVzxLzQoRWnOEm0Eym7exUQ@mail.gmail.com>
References: <1468327227051-5275948.post@n6.nabble.com>
 <201607121555.41244.even.rouault@spatialys.com>
 <CAEW=KS5V1+HKa61MsXdEorPbUBOCi17zPjkENodz3tuXdT9JBQ@mail.gmail.com>
 <CADEnnOOrij+H2SH33aJYXNySwAtKq9erkAkGp3PJBpyR1NcxHA@mail.gmail.com>
 <CAEW=KS76Mk5kab9b7jYR=rh5U7jKVzxLzQoRWnOEm0Eym7exUQ@mail.gmail.com>
Message-ID: <ae70a756-2ccd-e193-6b0c-f2550781dd5b@gmail.com>

Hi,

Sorry for missing this last month due to holidays.

In fact in my approach I do not want to limit to single pixel operations 
but support neighborhood operations too. That is necessary for watershed 
analysis for example. Making sure that the neighborhood is readily 
available for computations is probably what is causing the biggest 
problem for the code. I also have a callback support. See for example 
https://github.com/ajolma/gdal/blob/trunk/gdal/map_algebra/test.cpp 
where on the lines 5 to 12 is a callback function.

When I left the code for my extended holidays I was doing profiling and 
intended to test another approach for caching. Now the caching is based 
on the native GDAL blocks, which is efficient for going through a single 
dataset. Since the block may be different for different datasets this 
approach may not be the best when there are more than one dataset. For 
example the raster algebra in QGIS uses an approach where the block is 
the same for all datasets. That simplifies the code and may be very 
efficient as a whole.

I'll be at the code sprint in FOSS4G 2016 and that would be a good place 
to discuss the RFC too.

Best,

Ari


13.07.2016, 10:09, James Ramm kirjoitti:
> Peter,
> I think 'Grid Algebra' would be what Ari Jolma is proposing here: 
> https://trac.osgeo.org/gdal/wiki/rfc62_raster_algebra
>
> As Even pointed out, there is some overlap, though my proposal is 
> technically very different.
> The key differences I see are:
>
> - Users can submit functions which operate on each sub window of the 
> raster, rather than an algebraic expression. This potentially allows 
> for much more complicated algorithms to be used (e.g. I dont think it 
> would be possible to run a watershed segmentation with a raster 
> algebra implementation, or to have algorithms which behave differently 
> depending on the 'location' within the raster or the values of 
> surrounding pixels etc etc).
>
> - Functions can be chained together for a complex processing 
> toolchain. Some overlap with VRT here, although again this introduces 
> a little more flexibility.
>
> On 12 July 2016 at 15:47, Peter Halls <p.halls at york.ac.uk 
> <mailto:p.halls at york.ac.uk>> wrote:
>
>     James,
>
>           in reality, are you not requesting an implementation of
>     Tomlin's 'Grid Algebra' in GDAL?  That defines the whole range of
>     functions from whole raster to pixel and has the distinct
>     advantage of being both published and extremely well known because
>     of other implementations ... which also provide ready-made
>     reference bases for the GDAL implementors ...
>
>     Best wishes,
>     Peter
>
>     On 12 July 2016 at 15:39, James Ramm <jamessramm at gmail.com
>     <mailto:jamessramm at gmail.com>> wrote:
>
>         Hi Even,
>
>         The difference I see with pixel functions is that, as far as I
>         understand, the pixel function is applied per pixel, so there
>         is no possibility of e.g. the pixel buffer when have the
>         function apply to 'blocks'.
>         I may be way off, but many of the algorithms we deal with
>         require some kind of neighbourhood search - a polygonise
>         algorithm or flow direction algorithm being good examples.
>         I dont think VRT pixel functions allow this?
>
>         So in that sense I'd see a VRT being 'just' another potential
>         input data source.
>
>         Perhaps VRT pixel functions could be expanded to also allow
>         'window' functions?
>
>         A downside is it requires creating a VRT even when you only
>         want to apply a such a function to a single dataset. Small
>         effort, but still a bit more than throwing in any GDALDataset
>         to be processed.
>
>         I see the overlap with raster algebra, although yes
>         technically very different.
>
>
>
>         On 12 July 2016 at 14:55, Even Rouault
>         <even.rouault at spatialys.com
>         <mailto:even.rouault at spatialys.com>> wrote:
>
>             James,
>
>             There's some intersection with Ari's proposal :
>             https://trac.osgeo.org/gdal/wiki/rfc62_raster_algebra . At
>             least regarding the
>             overall purposes, since technically this is quite different.
>
>             Actually what you propose is very close to the existing
>             VRT pixel functions of
>             derived bands. See "Using Derived Bands" in
>             http://www.gdal.org/gdal_vrttut.html . In the last days,
>             we've merged
>             Antonio's work regarding a predefined set of pixel functions.
>             Perhaps some extension to allow passing user parameters to
>             the pixel func
>             could be useful. It is possible to use pixel functions
>             from Python as shown in
>             https://github.com/OSGeo/gdal/blob/trunk/autotest/gcore/testnonboundtoswig.py#L303
>             although this is a bit ugly as it uses ctypes and not
>             SWIG. But should be
>             possible through SWIG by introducing proper types
>             similarly to what is done
>             for the progress functions or error handler functions.
>
>             Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/ce10d765/attachment-0001.html>

From ari.jolma at gmail.com  Mon Aug  8 06:01:23 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 8 Aug 2016 16:01:23 +0300
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
Message-ID: <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>

08.08.2016, 15:19, Margherita Di Leo kirjoitti:
> Dear all,
>
> is there a simple way to create tiles with a certain overlap?

Do you mean by "overlap" the geographic area the tiles should cover? 
gdal2tiles.py creates the tiles for the area the source dataset covers. 
So you can control the area through the source dataset.

Ari

>
> Any hint appreciated.
> Thanks in advance
>
>
>
> -- 
> Margherita Di Leo
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/fca3c584/attachment.html>

From diregola at gmail.com  Mon Aug  8 06:42:37 2016
From: diregola at gmail.com (Margherita Di Leo)
Date: Mon, 8 Aug 2016 15:42:37 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
Message-ID: <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>

Ari,

On Mon, Aug 8, 2016 at 3:01 PM, Ari Jolma <ari.jolma at gmail.com> wrote:

> 08.08.2016, 15:19, Margherita Di Leo kirjoitti:
>
> Dear all,
>
> is there a simple way to create tiles with a certain overlap?
>
>
> Do you mean by "overlap" the geographic area the tiles should cover?
> gdal2tiles.py creates the tiles for the area the source dataset covers. So
> you can control the area through the source dataset.
>

Thanks for your answer, sorry I'm not sure I understand the methodology you
are proposing. Let me explain what I'm trying to do so that the problem is
clearer. I have a dataset that is a global coverage, e.g. GMTED [1]. That
is a tiled dataset. However for my processing chain I need tiles that
overlap on each other for a certain number of pixels. This means that the
area at the border of each tile should be covered by the tile itself and by
the adjacent one to certain extent.
My method would be the following. I would create a virtual mosaic and then
create the tiles with this rule.  From the manual of gdal2tiles.py it is
not clear to me if i can obtain this result. What do you mean by "you can
control the area through the source dataset"?

Thank you


[1] http://topotools.cr.usgs.gov/gmted_viewer/


-- 
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/c52a98c1/attachment.html>

From ari.jolma at gmail.com  Mon Aug  8 07:26:24 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 8 Aug 2016 17:26:24 +0300
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
 <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
Message-ID: <f7601f8d-940d-c1cf-aaee-cffcb9ee550a@gmail.com>

08.08.2016, 16:42, Margherita Di Leo kirjoitti:
> Ari,
>
> On Mon, Aug 8, 2016 at 3:01 PM, Ari Jolma <ari.jolma at gmail.com 
> <mailto:ari.jolma at gmail.com>> wrote:
>
>     08.08.2016, 15:19, Margherita Di Leo kirjoitti:
>>     Dear all,
>>
>>     is there a simple way to create tiles with a certain overlap?
>
>     Do you mean by "overlap" the geographic area the tiles should
>     cover? gdal2tiles.py creates the tiles for the area the source
>     dataset covers. So you can control the area through the source
>     dataset.
>
>
> Thanks for your answer, sorry I'm not sure I understand the 
> methodology you are proposing. Let me explain what I'm trying to do so 
> that the problem is clearer. I have a dataset that is a global 
> coverage, e.g. GMTED [1]. That is a tiled dataset. However for my 
> processing chain I need tiles that overlap on each other for a certain 
> number of pixels. This means that the area at the border of each tile 
> should be covered by the tile itself and by the adjacent one to 
> certain extent.

Ok. I've done similar thing when I needed to get overlapping tiles to 
produce shaded relief tiles on the fly from a DEM. My processing chain was:

1) define the wanted tile (rectangle)
2) expand it by some amount
3) grab the expanded tile from the source (GDAL Translate)
4) process the expanded tile (in my case DEMProcessing)
5) shrink the wanted tile
6) grab the original wanted tile from the result of the processing (GDAL 
Translate again)
7) deliver the final product

(BTW, I'll present this in my FOSS4G 2016 talk)

As the first thought I'd do the same access the source dataset with GDAL 
and grab the data as such rectangles as you need (not the native tiles 
on the server) - i.e., your overlapping tiles.

> My method would be the following. I would create a virtual mosaic and 
> then create the tiles with this rule. From the manual of gdal2tiles.py 
> it is not clear to me if i can obtain this result. What do you mean by 
> "you can control the area through the source dataset"?

I mean simply set the area of the source but it is not relevant here 
since your problem is different.

I think you need to write your own code as gdal2tiles is probably not 
the solution.

Ari

>
> Thank you
>
>
> [1] http://topotools.cr.usgs.gov/gmted_viewer/ 
> <http://topotools.cr.usgs.gov/gmted_viewer/>
>
>
> -- 
> Margherita Di Leo

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/455a495c/attachment.html>

From afalciano at yahoo.it  Mon Aug  8 08:03:45 2016
From: afalciano at yahoo.it (Antonio Falciano)
Date: Mon, 8 Aug 2016 17:03:45 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <f7601f8d-940d-c1cf-aaee-cffcb9ee550a@gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
 <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
 <f7601f8d-940d-c1cf-aaee-cffcb9ee550a@gmail.com>
Message-ID: <715069a6-0ecc-83ac-18d7-984c1ec97800@yahoo.it>

Il 08/08/2016 16:26, Ari Jolma ha scritto:
> 08.08.2016, 16:42, Margherita Di Leo kirjoitti:
>> Ari,
>>
>> On Mon, Aug 8, 2016 at 3:01 PM, Ari Jolma wrote:
>>
>>     08.08.2016, 15:19, Margherita Di Leo kirjoitti:
>>>     Dear all,
>>>
>>>     is there a simple way to create tiles with a certain overlap?
>>
>>     Do you mean by "overlap" the geographic area the tiles should
>>     cover? gdal2tiles.py creates the tiles for the area the source
>>     dataset covers. So you can control the area through the source
>>     dataset.
>>
>>
>> Thanks for your answer, sorry I'm not sure I understand the
>> methodology you are proposing. Let me explain what I'm trying to do so
>> that the problem is clearer. I have a dataset that is a global
>> coverage, e.g. GMTED [1]. That is a tiled dataset. However for my
>> processing chain I need tiles that overlap on each other for a certain
>> number of pixels. This means that the area at the border of each tile
>> should be covered by the tile itself and by the adjacent one to
>> certain extent.
>
> Ok. I've done similar thing when I needed to get overlapping tiles to
> produce shaded relief tiles on the fly from a DEM. My processing chain was:
>
> 1) define the wanted tile (rectangle)
> 2) expand it by some amount
> 3) grab the expanded tile from the source (GDAL Translate)
> 4) process the expanded tile (in my case DEMProcessing)
> 5) shrink the wanted tile
> 6) grab the original wanted tile from the result of the processing (GDAL
> Translate again)
> 7) deliver the final product
>
> (BTW, I'll present this in my FOSS4G 2016 talk)
>
> As the first thought I'd do the same access the source dataset with GDAL
> and grab the data as such rectangles as you need (not the native tiles
> on the server) - i.e., your overlapping tiles.
>
>> My method would be the following. I would create a virtual mosaic and
>> then create the tiles with this rule.  From the manual of
>> gdal2tiles.py it is not clear to me if i can obtain this result. What
>> do you mean by "you can control the area through the source dataset"?
>
> I mean simply set the area of the source but it is not relevant here
> since your problem is different.
>
> I think you need to write your own code as gdal2tiles is probably not
> the solution.

Hi all,
if we have calculated the tileindex with overlaps yet, a simple
approach could consist into restricting the desired cutline features
based on attribute query using gdalwarp. For instance:

gdalwarp -co COMPRESS=DEFLATE -co TILED=YES -cutline basilicata.shp 
-crop_to_cutline -overwrite -cwhere NOME_COM='Potenza' -dstnodata 
-99999.0 eu_dem_bas.vrt eu_dem_Potenza.tif

where, instead of NOME_COM you can use the tilename or simply an
incremental index. Writing a loop over the index should be the easy
part of the task. ;-) Hope this helps!

ciao
Antonio

-- 
Antonio Falciano
http://www.linkedin.com/in/antoniofalciano

From jamessramm at gmail.com  Mon Aug  8 08:18:34 2016
From: jamessramm at gmail.com (jramm)
Date: Mon, 8 Aug 2016 08:18:34 -0700 (PDT)
Subject: [gdal-dev] GDAL raster processing library?
In-Reply-To: <ae70a756-2ccd-e193-6b0c-f2550781dd5b@gmail.com>
References: <1468327227051-5275948.post@n6.nabble.com>
 <201607121555.41244.even.rouault@spatialys.com>
 <CAEW=KS5V1+HKa61MsXdEorPbUBOCi17zPjkENodz3tuXdT9JBQ@mail.gmail.com>
 <CADEnnOOrij+H2SH33aJYXNySwAtKq9erkAkGp3PJBpyR1NcxHA@mail.gmail.com>
 <CAEW=KS76Mk5kab9b7jYR=rh5U7jKVzxLzQoRWnOEm0Eym7exUQ@mail.gmail.com>
 <ae70a756-2ccd-e193-6b0c-f2550781dd5b@gmail.com>
Message-ID: <CAEW=KS5NCvhqr5Jj8ecmuEbayPeufjWxZv7tSVPS17uF1MiAww@mail.gmail.com>

Hi Ari,
I began some work to clarify my ideas here: www.github.com/JamesRamm/GeoAlg
perhaps there is potential for merging with your project? For
neighbourhoods I provide 2 iterators - one simple block based and one
'buffered'. The block can be the natural block or user defined. I also
planned to provide a 'mosaic' iterator to support the planned 'reduce'
function. For callbacks I initially planned a simple function, but then
realised that many algorithms may wish to save state, so I changed to a
simple interface class where there is a single function to override. My
final plan was to expose opencv and other functionality (eg maybe taudem)
as a library of ready made callbacks.

If you think it worthwhile and possible, I would be open to porting
relevant parts to your code. Features I see as absolutely essential are:
- 'map' and 'reduce' functions for raster datasets, which handle large data
and user defined callbacks
- ability to save state in callbacks. This is essential for more complex
algorithms.
- A rich set of block iterators

A ready made library of a number of callbacks (preferably by exposing
functionality from existing well known libraries) would also be useful and
help build interest I think.

I will be in Bonn at foss4g from the Tuesday evening, it would be good to
meet!

On 8 Aug 2016 1:56 p.m., "Ari Jolma-2 [via OSGeo.org]" <
ml-node+s1560n5279906h35 at n6.nabble.com> wrote:

> Hi,
>
> Sorry for missing this last month due to holidays.
>
> In fact in my approach I do not want to limit to single pixel operations
> but support neighborhood operations too. That is necessary for watershed
> analysis for example. Making sure that the neighborhood is readily
> available for computations is probably what is causing the biggest problem
> for the code. I also have a callback support. See for example
> https://github.com/ajolma/gdal/blob/trunk/gdal/map_algebra/test.cpp where
> on the lines 5 to 12 is a callback function.
>
> When I left the code for my extended holidays I was doing profiling and
> intended to test another approach for caching. Now the caching is based on
> the native GDAL blocks, which is efficient for going through a single
> dataset. Since the block may be different for different datasets this
> approach may not be the best when there are more than one dataset. For
> example the raster algebra in QGIS uses an approach where the block is the
> same for all datasets. That simplifies the code and may be very efficient
> as a whole.
>
> I'll be at the code sprint in FOSS4G 2016 and that would be a good place
> to discuss the RFC too.
>
> Best,
>
> Ari
>
> 13.07.2016, 10:09, James Ramm kirjoitti:
>
> Peter,
> I think 'Grid Algebra' would be what Ari Jolma is proposing here:
> https://trac.osgeo.org/gdal/wiki/rfc62_raster_algebra
>
> As Even pointed out, there is some overlap, though my proposal is
> technically very different.
> The key differences I see are:
>
> - Users can submit functions which operate on each sub window of the
> raster, rather than an algebraic expression. This potentially allows for
> much more complicated algorithms to be used (e.g. I dont think it would be
> possible to run a watershed segmentation with a raster algebra
> implementation, or to have algorithms which behave differently depending on
> the 'location' within the raster or the values of surrounding pixels etc
> etc).
>
> - Functions can be chained together for a complex processing toolchain.
> Some overlap with VRT here, although again this introduces a little more
> flexibility.
>
> On 12 July 2016 at 15:47, Peter Halls <[hidden email]
> <http:///user/SendEmail.jtp?type=node&node=5279906&i=0>> wrote:
>
>> James,
>>
>>       in reality, are you not requesting an implementation of Tomlin's
>> 'Grid Algebra' in GDAL?  That defines the whole range of functions from
>> whole raster to pixel and has the distinct advantage of being both
>> published and extremely well known because of other implementations ...
>> which also provide ready-made reference bases for the GDAL implementors ...
>>
>> Best wishes,
>> Peter
>>
>> On 12 July 2016 at 15:39, James Ramm <[hidden email]
>> <http:///user/SendEmail.jtp?type=node&node=5279906&i=1>> wrote:
>>
>>> Hi Even,
>>>
>>> The difference I see with pixel functions is that, as far as I
>>> understand, the pixel function is applied per pixel, so there is no
>>> possibility of e.g. the pixel buffer when have the function apply to
>>> 'blocks'.
>>> I may be way off, but many of the algorithms we deal with require some
>>> kind of neighbourhood search - a polygonise algorithm or flow direction
>>> algorithm being good examples.
>>> I dont think VRT pixel functions allow this?
>>>
>>> So in that sense I'd see a VRT being 'just' another potential input data
>>> source.
>>>
>>> Perhaps VRT pixel functions could be expanded to also allow 'window'
>>> functions?
>>>
>>> A downside is it requires creating a VRT even when you only want to
>>> apply a such a function to a single dataset. Small effort, but still a bit
>>> more than throwing in any GDALDataset to be processed.
>>>
>>> I see the overlap with raster algebra, although yes technically very
>>> different.
>>>
>>>
>>>
>>> On 12 July 2016 at 14:55, Even Rouault <[hidden email]
>>> <http:///user/SendEmail.jtp?type=node&node=5279906&i=2>> wrote:
>>>
>>>> James,
>>>>
>>>> There's some intersection with Ari's proposal :
>>>> https://trac.osgeo.org/gdal/wiki/rfc62_raster_algebra . At least
>>>> regarding the
>>>> overall purposes, since technically this is quite different.
>>>>
>>>> Actually what you propose is very close to the existing VRT pixel
>>>> functions of
>>>> derived bands. See "Using Derived Bands" in
>>>> http://www.gdal.org/gdal_vrttut.html . In the last days, we've merged
>>>> Antonio's work regarding a predefined set of pixel functions.
>>>> Perhaps some extension to allow passing user parameters to the pixel
>>>> func
>>>> could be useful. It is possible to use pixel functions from Python as
>>>> shown in
>>>> https://github.com/OSGeo/gdal/blob/trunk/autotest/gcore/
>>>> testnonboundtoswig.py#L303
>>>> although this is a bit ugly as it uses ctypes and not SWIG. But should
>>>> be
>>>> possible through SWIG by introducing proper types similarly to what is
>>>> done
>>>> for the progress functions or error handler functions.
>>>>
>>>> Even
>>>>
>>>>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http:///user/SendEmail.jtp?type=node&node=5279906&i=3>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
> If you reply to this email, your message will be added to the discussion
> below:
> http://osgeo-org.1560.x6.nabble.com/GDAL-raster-processing-library-
> tp5275948p5279906.html
> To unsubscribe from GDAL raster processing library?, click here
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5275948&code=amFtZXNzcmFtbUBnbWFpbC5jb218NTI3NTk0OHwyMTIyMDM1OTQ5>
> .
> NAML
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-raster-processing-library-tp5275948p5279934.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/b6638e0c/attachment.html>

From schwehr at gmail.com  Mon Aug  8 11:29:22 2016
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 8 Aug 2016 11:29:22 -0700
Subject: [gdal-dev] Status of ESRI ARcSDE raster (frmts/sde) driver
Message-ID: <CACmBxyt+zpMYkyb=isYhG0-PXftNA0mU-bAsOgVA67WDfiO32g@mail.gmail.com>

Hi all,

The ArcSDE raster format driver <http://www.gdal.org/frmt_sde.html> is not
currently being built by any of the automated testing systems (as far as I
know).  With r34811
<https://trac.osgeo.org/gdal/changeset/34811/trunk/gdal/frmts/sde/sdedataset.cpp>,
I broke the code back 2 weeks ago for trunk and nobody noticed.  I don't
know if it worked before that or after a fix I just submitted.  We have a
couple options with this code.

It would be great to get someone to get the code to build automatically
someplace so we could treat it like other drivers that not all developers
can build locally... we can at least see the error messages and iterate
(slowly) to fix things.

However, we have other alternatives....

We could remove the code from trunk.  And if later, someone really wanted
it, we could add it back.

Or someone could build a fake
<http://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing>
that
would be good enough for testing.  Or even just a mock or stub to let us
know that it builds correctly.  e.g. the very beginnings of dummy headers
are here <https://gist.github.com/schwehr/5ea1566591405a228b73d24f7f2cb2be>

Thoughts on this driver?

svn log | egrep '^r[0-9]' | cut -d\| -f2 | sort -u
 dron
 goatbar (me -> just general code cleanup)
 hobu
 mloskot
 rouault
 tamas
 warmerdam

-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/0b1256cd/attachment.html>

From fernando.ribeiro at geo-solutions.it  Mon Aug  8 15:32:44 2016
From: fernando.ribeiro at geo-solutions.it (Fernando Ribeiro)
Date: Tue, 9 Aug 2016 00:32:44 +0200
Subject: [gdal-dev] 4th band as ALPHA on warp
In-Reply-To: <201608081126.53076.even.rouault@spatialys.com>
References: <8e3c82c6-dfef-0e00-9a46-3e96e05a6463@geo-solutions.it>
 <201608072238.17554.even.rouault@spatialys.com>
 <CAJaHrDyjSGEEYcRyzspmHM3oGTvxTbac11oL1gqYvtC+ccQoOA@mail.gmail.com>
 <201608081126.53076.even.rouault@spatialys.com>
Message-ID: <8cac9ca1-65bd-fcce-f7d7-03f53515c262@geo-solutions.it>

Thank you Even for this new feature.

Hope it will be handy to many more!


On 08/08/2016 11:26 AM, Even Rouault wrote:
> Le lundi 08 août 2016 09:30:53, Daniele Romagnoli a écrit :
>> Hi Even,
>> my usual question would be: any plan to backport it? :-)
> Not really. I guess this is a new feature.
>
> As currently, our policy is to be rather conservative for what goes in stable
> branches, so people can upgrade from one micro version to another one
> blindlessly.
> Regarding that particular feature, it could potentially be backported, but
> then where to draw the limit ? At some point, one such backport will undoubtly
> cause a regression elsewhere, or will have bugs, causing more stabilization
> work in stable branches.
>
> Potential solutions:
> - More frequent major.minor.0 releases that our ~ 1 year schedule
> - Less conservative policy backport policy in regular stable branches that
> would allow some new features to be added, but within the current limits of no
> ABI change, no backward incompatibilities.
> - An extra -backport branch that would have a less conservative policy. To be
> defined what would be the limits: ABI changes allowed or not ?, backward
> incompatibilities ? Would potentially only of interest for people who can
> build from source as it would be unlikely to be widely packaged.
>
> All would need extra staffing / funding.
>
> Another option that already exists: live on the bleeding edge and build from
> trunk ;-)
>
> Even
>
>> Cheers,
>> Daniele
>>
>>
>>
>>
>>
>> On Sun, Aug 7, 2016 at 10:38 PM, Even Rouault <even.rouault at spatialys.com>
>>
>> wrote:
>>> Le dimanche 07 août 2016 19:20:05, Even Rouault a écrit :
>>>> Le samedi 06 août 2016 15:20:54, Fernando Ribeiro a écrit :
>>>>> Dear list,
>>>>>
>>>>> Currently we are working with 4 band tifs, first 3 bands as normal
>>>>> RBG and the 4th as IR. On performing a warp operation from and to a
>>>>> VRT, GDAL seems considering the 4th band as alpha, resulting in full
>>>>> black pixels if 4th band value =0.
>>>> gdalwarp will consider the 4th band as alpha... only if it is
>>>> effectively tagged as alpha in the source. You can check it with
>>>> gdalinfo
>>>>
>>>>> Some attempts were made to solve this issue, so far without success:
>>>>>
>>>>> - Using the warp creation options PHOTOMETRIC=RGB and ALPHA=NO
>>>> This will not influence the warping kernel.
>>>>
>>>>> - Manually editing the source VRT and replace Alpha color
>>> interpretation
>>>
>>>>> to Undefined
>>>> This one should work. Strange that this doesn't work for you.
>>>>
>>>>> Does anyone have more suggestions?
>>> I've just committed an improvement in trunk: "gdalwarp: add a -nosrcalpha
>>> option to wrap the alpha band as a regular band and not as the alpha
>>> band"
>>>
>>>>> Thank you
>>> --
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Regards,
Fernando Ribeiro
==
GeoServer Professional Services from the experts!
Visit http://goo.gl/it488V for more information.
==
Fernando Ribeiro
DevOps / Support Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:   +39 0584 1660272
mob:   +39 333 	8128928

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il loro utilizzo è consentito esclusivamente al destinatario del messaggio, per le finalità indicate nel messaggio stesso. Qualora riceviate questo messaggio senza esserne il destinatario, Vi preghiamo cortesemente di darcene notizia via e-mail e di procedere alla distruzione del messaggio stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso, divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od utilizzarlo per finalità diverse, costituisce comportamento contrario ai principi dettati dal D.Lgs. 196/2003.
  
The information in this message and/or attachments, is intended solely for the attention and use of the named addressee(s) and may be confidential or proprietary in nature or covered by the provisions of privacy act (Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection Code).Any use not in accord with its purpose, any disclosure, reproduction, copying, distribution, or either dissemination, either whole or partial, is strictly forbidden except previous formal approval of the named addressee(s). If you are not the intended recipient, please contact immediately the sender by telephone, fax or e-mail and delete the information in this message that has been received in error. The sender does not give any warranty or accept liability as the content, accuracy or completeness of sent messages and accepts no responsibility  for changes made after they were sent or for other risks which arise as a result of e-mail transmission, viruses, etc.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160809/b5f4584d/attachment.html>

From Stefan.Blumentrath at nina.no  Mon Aug  8 12:01:46 2016
From: Stefan.Blumentrath at nina.no (Blumentrath, Stefan)
Date: Mon, 8 Aug 2016 19:01:46 +0000
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
 <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
Message-ID: <718ccbc479ed479cb27f4108fac68608@NINSRV23.nina.no>

Hei Madi,



Given that you are quite familiar with GRASS GIS here a GRASS / GDAL solution:



1.      Patch all tiles into one VRT with gdalbuildvrt

2.      Link the VRT and the individual tiles to GRASS (r.external)

3.      Loop over the tiles and adjust you region accordingly and apply what GRASS module you like.



So something like this:



gdalbuildvrt ...



r.external input=vrt ...

r.external input=tile ...



for tile in $(g.list type=raster ...)

do

g.region -p raster=$tile n=n+x s=s-x w=w-x e=e+x (where x is your desired overlap in map units)

r.*

done



Cheers

Stefan

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Margherita Di Leo
Sent: 8. august 2016 15:43
To: Ari Jolma <ari.jolma at gmail.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Tiling with overlap

Ari,

On Mon, Aug 8, 2016 at 3:01 PM, Ari Jolma <ari.jolma at gmail.com<mailto:ari.jolma at gmail.com>> wrote:
08.08.2016, 15:19, Margherita Di Leo kirjoitti:

Dear all,
is there a simple way to create tiles with a certain overlap?

Do you mean by "overlap" the geographic area the tiles should cover? gdal2tiles.py creates the tiles for the area the source dataset covers. So you can control the area through the source dataset.

Thanks for your answer, sorry I'm not sure I understand the methodology you are proposing. Let me explain what I'm trying to do so that the problem is clearer. I have a dataset that is a global coverage, e.g. GMTED [1]. That is a tiled dataset. However for my processing chain I need tiles that overlap on each other for a certain number of pixels. This means that the area at the border of each tile should be covered by the tile itself and by the adjacent one to certain extent.
My method would be the following. I would create a virtual mosaic and then create the tiles with this rule.  From the manual of gdal2tiles.py it is not clear to me if i can obtain this result. What do you mean by "you can control the area through the source dataset"?
Thank you


[1] http://topotools.cr.usgs.gov/gmted_viewer/


--
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160808/69db3272/attachment-0001.html>

From diregola at gmail.com  Tue Aug  9 00:08:19 2016
From: diregola at gmail.com (Margherita Di Leo)
Date: Tue, 9 Aug 2016 09:08:19 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <718ccbc479ed479cb27f4108fac68608@NINSRV23.nina.no>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
 <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
 <718ccbc479ed479cb27f4108fac68608@NINSRV23.nina.no>
Message-ID: <CABa=8Qq_P1+EC2PJmqPBNqBe8xvaT1L8uaYvYGrLzVuaMUuUng@mail.gmail.com>

Thank you all for the suggestions!
Cheers,
madi

On Mon, Aug 8, 2016 at 9:01 PM, Blumentrath, Stefan <
Stefan.Blumentrath at nina.no> wrote:

> Hei Madi,
>
>
>
> Given that you are quite familiar with GRASS GIS here a GRASS / GDAL
> solution:
>
>
>
> 1.      Patch all tiles into one VRT with gdalbuildvrt
>
> 2.      Link the VRT and the individual tiles to GRASS (r.external)
>
> 3.      Loop over the tiles and adjust you region accordingly and apply
> what GRASS module you like.
>
>
>
> So something like this:
>
>
>
> gdalbuildvrt ...
>
>
>
> r.external input=vrt ...
>
> r.external input=tile ...
>
>
>
> for tile in $(g.list type=raster ...)
>
> do
>
> g.region -p raster=$tile n=n+x s=s-x w=w-x e=e+x (where x is your desired
> overlap in map units)
>
> r.*
>
> done
>
>
>
> Cheers
>
> Stefan
>
>
>
> *From:* gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Margherita
> Di Leo
> *Sent:* 8. august 2016 15:43
> *To:* Ari Jolma <ari.jolma at gmail.com>
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Tiling with overlap
>
>
>
> Ari,
>
>
>
> On Mon, Aug 8, 2016 at 3:01 PM, Ari Jolma <ari.jolma at gmail.com> wrote:
>
> 08.08.2016, 15:19, Margherita Di Leo kirjoitti:
>
> Dear all,
>
> is there a simple way to create tiles with a certain overlap?
>
>
> Do you mean by "overlap" the geographic area the tiles should cover?
> gdal2tiles.py creates the tiles for the area the source dataset covers. So
> you can control the area through the source dataset.
>
>
>
> Thanks for your answer, sorry I'm not sure I understand the methodology
> you are proposing. Let me explain what I'm trying to do so that the problem
> is clearer. I have a dataset that is a global coverage, e.g. GMTED [1].
> That is a tiled dataset. However for my processing chain I need tiles that
> overlap on each other for a certain number of pixels. This means that the
> area at the border of each tile should be covered by the tile itself and by
> the adjacent one to certain extent.
> My method would be the following. I would create a virtual mosaic and then
> create the tiles with this rule.  From the manual of gdal2tiles.py it is
> not clear to me if i can obtain this result. What do you mean by "you can
> control the area through the source dataset"?
>
> Thank you
>
>
>
> [1] http://topotools.cr.usgs.gov/gmted_viewer/
>
>
>
> --
>
> Margherita Di Leo
>



-- 
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160809/52b69ea2/attachment.html>

From lucadeluge at gmail.com  Tue Aug  9 01:12:40 2016
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 9 Aug 2016 10:12:40 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <718ccbc479ed479cb27f4108fac68608@NINSRV23.nina.no>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <a07bcaa7-2bdf-2d28-1deb-f56add5b9e5b@gmail.com>
 <CABa=8QrdU2hA+6SRmqi0=0UBLNWAQpgxn9X4v6VDNKbtOZ0gfg@mail.gmail.com>
 <718ccbc479ed479cb27f4108fac68608@NINSRV23.nina.no>
Message-ID: <CAK4m-3yksvLGf-O0K=EmRb4gENm=5btqgJG_z+DfQyQ76E5DkA@mail.gmail.com>

On 8 August 2016 at 21:01, Blumentrath, Stefan
<Stefan.Blumentrath at nina.no> wrote:
> Hei Madi,
>


Hi,

>
> Given that you are quite familiar with GRASS GIS here a GRASS / GDAL
> solution:
>
>
>
> 1.      Patch all tiles into one VRT with gdalbuildvrt
>
> 2.      Link the VRT and the individual tiles to GRASS (r.external)
>
> 3.      Loop over the tiles and adjust you region accordingly and apply what
> GRASS module you like.
>
>
>
> So something like this:
>
>
>
> gdalbuildvrt ...
>
>
>
> r.external input=vrt ...
>
> r.external input=tile ...
>
>
>
> for tile in $(g.list type=raster ...)
>
> do
>
> g.region -p raster=$tile n=n+x s=s-x w=w-x e=e+x (where x is your desired
> overlap in map units)
>
> r.*
>
> done
>

I didn't answer before because I was thinking to go OT but in GRASS
you can use t.tile with overlaps

https://grass.osgeo.org/grass70/manuals/r.tile.html

>
> Cheers
>
> Stefan
>




-- 
ciao
Luca

www.lucadelu.org

From avyavkumar at gmail.com  Tue Aug  9 01:32:03 2016
From: avyavkumar at gmail.com (Avyav Kumar)
Date: Tue, 9 Aug 2016 14:02:03 +0530
Subject: [gdal-dev] Request for DXF files
Message-ID: <CAHOc4-2dfrzOrDPhz6psr88jRY7cNN7jRhvxv5wRajatrb2oWg@mail.gmail.com>

Hi all,

I am working to expose PolyfaceMesh objects in the DXF driver. If anyone
has access to simple DXF files which have Polyface Mesh objects, I would
appreciate it if I could have access to them for testing purposes.

Regards,

Avyav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160809/aa06f484/attachment.html>

From even.rouault at spatialys.com  Tue Aug  9 01:51:35 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Aug 2016 10:51:35 +0200
Subject: [gdal-dev] Request for DXF files
In-Reply-To: <CAHOc4-2dfrzOrDPhz6psr88jRY7cNN7jRhvxv5wRajatrb2oWg@mail.gmail.com>
References: <CAHOc4-2dfrzOrDPhz6psr88jRY7cNN7jRhvxv5wRajatrb2oWg@mail.gmail.com>
Message-ID: <201608091051.35852.even.rouault@spatialys.com>

Le mardi 09 août 2016 10:32:03, Avyav Kumar a écrit :
> Hi all,
> 
> I am working to expose PolyfaceMesh objects in the DXF driver. If anyone
> has access to simple DXF files which have Polyface Mesh objects, I would
> appreciate it if I could have access to them for testing purposes.

Avyav,

http://cadkit.blogspot.fr/p/sample-dxf-files.html has a few samples.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kassies at gmail.com  Tue Aug  9 04:30:16 2016
From: kassies at gmail.com (Rutger)
Date: Tue, 9 Aug 2016 04:30:16 -0700 (PDT)
Subject: [gdal-dev] GDAL raster processing library?
In-Reply-To: <1468327227051-5275948.post@n6.nabble.com>
References: <1468327227051-5275948.post@n6.nabble.com>
Message-ID: <1470742216155-5280032.post@n6.nabble.com>

Great discussion about improving the raster processing. As opposed to the
ideas above, of incorporating new machinery into GDAL, it might also
interesting to consider changing the API (a bit) so GDAL integrates better
with existing tools.

Within the Python ecosystem for example, there have recently emerged some
great tools for serious data processing. A combination of Dask (inc
Dask.distributed) and Numba for example allow relative easy scaling to
multicore (including GPU) and to clusters. 

Dask easily handles windowed functions as discussed above, but also much
more complicated relations between 'blocks' for example with linear algebra,
matrix multiplication etc.

Here is a small experiment i made a while back, to test if i could use GDAL
for the I/O to populate Dask arrays. It computes the slope, a windowed
function, from an elevation map:
http://nbviewer.jupyter.org/gist/RutgerK/a2ad8c074c78d000dd4a1e35cc229dee

You basically only need a Python '__getitem__' interface so a Dataset can be
indexed similar as a Numpy array, and some attributes like the shape of the
data. That's much easier to implement than handling and scheduling blocks
yourself.

The downside is of course that you rely on third partys, and you get a
different experience based on the programming language you use because the
availability of packages/modules will be different. My example uses Python
and therefore would be useless to users of other languages. 

Btw, has anyone thought of using vectorized Numba functions as GDAL pixel
functions? I have no clue whether that would technically work or even make
sense. Perhaps it would be a lot easier, and faster, then using Python
derived functions. 


Regards,
Rutger



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-raster-processing-library-tp5275948p5280032.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Tue Aug  9 05:10:56 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Aug 2016 14:10:56 +0200
Subject: [gdal-dev] No SONAME in libgdal.so when building with
	--without-libtool
In-Reply-To: <CAEKysgQ6cRR8HJDgJ9GstJN1fD0zQ1LgC=sUVbub2MoUDEGJng@mail.gmail.com>
References: <CAEKysgQ6cRR8HJDgJ9GstJN1fD0zQ1LgC=sUVbub2MoUDEGJng@mail.gmail.com>
Message-ID: <201608091410.57039.even.rouault@spatialys.com>

Gareth,

What sort of issue do you encounter with SONAME not being defined ?

I've tested your patch and it doesn't generate the same soname as libtool.  
libtool generates libgdal.so.20 deduced from the LIBGDAL_CURRENT / 
LIBGDAL_REVISION / LIBGDAL_AGE variables.

Digging into history, it seems to be a voluntary choice not to define by 
default the soname in non-libtool builds, but I'm not sure why :
https://trac.osgeo.org/gdal/changeset/4855

Even

> Encountered on Centos 6, x86_64
> 
> configured with --without-libtool, resulting libgdal.so has no SONAME entry
> 
> The link command for libgdal.so uses the variable 'GDAL_SLIB_SONAME' which
> isn't defined in GDALmake.opt.in
> 
> The attached patch fixes the issue, and I believe will generate the same
> name as libtool.
> 
> Thanks
> Gareth Francis

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Aug  9 05:43:56 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Aug 2016 14:43:56 +0200
Subject: [gdal-dev] Fwd: Re: No SONAME in libgdal.so when building with
	--without-libtool
Message-ID: <201608091443.56421.even.rouault@spatialys.com>

Forwarding to the list.

----------  Message transmis  ----------

Sujet : Re: [gdal-dev] No SONAME in libgdal.so when building with --without-
libtool
Date : mardi 09 août 2016, 14:38:00
De : Gareth Francis <gfrancis.dev at gmail.com>
À : Even Rouault <even.rouault at spatialys.com>

Not having a SONAME entry doesn't directly cause any problems, however
libraries linked to libgdal.so can end up having a DT_NEEDED entry
containing the library path '../../build/lib64/libgdal.so' instead of just
'libgdal.so.20'. This happens when linking with GNU ld using CMake's
default behaviour. Linking without rpaths/etc probably avoids the issue.

Any executable which doesn't directly link to libgdal.so will then try to
look for '../../build/lib64/libgdal.so', regardless of the LD_LIBRARY_PATH
contents.

The only special case I can think of is Android, where the SONAME should
just be 'libgdal.so' without any version numbers.

I'll have to double-check what our version of libtool generated, I probably
just made a mistake.


On 9 August 2016 at 13:10, Even Rouault <even.rouault at spatialys.com> wrote:

> Gareth,
>
> What sort of issue do you encounter with SONAME not being defined ?
>
> I've tested your patch and it doesn't generate the same soname as libtool.
> libtool generates libgdal.so.20 deduced from the LIBGDAL_CURRENT /
> LIBGDAL_REVISION / LIBGDAL_AGE variables.
>
> Digging into history, it seems to be a voluntary choice not to define by
> default the soname in non-libtool builds, but I'm not sure why :
> https://trac.osgeo.org/gdal/changeset/4855
>
> Even
>
> > Encountered on Centos 6, x86_64
> >
> > configured with --without-libtool, resulting libgdal.so has no SONAME
> entry
> >
> > The link command for libgdal.so uses the variable 'GDAL_SLIB_SONAME'
> which
> > isn't defined in GDALmake.opt.in
> >
> > The attached patch fixes the issue, and I believe will generate the same
> > name as libtool.
> >
> > Thanks
> > Gareth Francis
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--------------------
Gareth Francis
www.gfrancisdev.co.uk

-------------------------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Aug  9 06:27:40 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Aug 2016 15:27:40 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
Message-ID: <201608091527.40253.even.rouault@spatialys.com>

Le lundi 08 août 2016 14:19:32, Margherita Di Leo a écrit :
> Dear all,
> 
> is there a simple way to create tiles with a certain overlap?

I've just added a -overlap switch to 
https://svn.osgeo.org/gdal/trunk/gdal/swig/python/scripts/gdal_retile.py

You should be able to run the updated version against any recent GDAL version.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From diregola at gmail.com  Tue Aug  9 06:42:52 2016
From: diregola at gmail.com (Margherita Di Leo)
Date: Tue, 9 Aug 2016 15:42:52 +0200
Subject: [gdal-dev] Tiling with overlap
In-Reply-To: <201608091527.40253.even.rouault@spatialys.com>
References: <CABa=8QppHt+Fohq793kikOjTVsjG82r_0ht2wAg8P3iu2p9=kA@mail.gmail.com>
 <201608091527.40253.even.rouault@spatialys.com>
Message-ID: <CABa=8Qq1_QOY4LMWa8ETqjW12QzEAqgL9chULW0QGJsGn+gJ2Q@mail.gmail.com>

On Tue, Aug 9, 2016 at 3:27 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 08 août 2016 14:19:32, Margherita Di Leo a écrit :
> > Dear all,
> >
> > is there a simple way to create tiles with a certain overlap?
>
> I've just added a -overlap switch to
> https://svn.osgeo.org/gdal/trunk/gdal/swig/python/scripts/gdal_retile.py
>
> You should be able to run the updated version against any recent GDAL
> version.
>
>
> WOW! Thank you so much Even!



-- 
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160809/0a2a802a/attachment.html>

From gfrancis.dev at gmail.com  Tue Aug  9 06:49:24 2016
From: gfrancis.dev at gmail.com (Gareth Francis)
Date: Tue, 9 Aug 2016 14:49:24 +0100
Subject: [gdal-dev] Fwd: Re: No SONAME in libgdal.so when building with
	--without-libtool
In-Reply-To: <201608091443.56421.even.rouault@spatialys.com>
References: <201608091443.56421.even.rouault@spatialys.com>
Message-ID: <CAEKysgTRpeptzt1=prbKEtoy-ykoiM0hefJSt+R+S==4cjHG_A@mail.gmail.com>

I've attached an updated patch, though I don't think it's good enough for
all gdal versions/platform combinations

libtool is provided with all 3 version components via -version-info and
uses them as a base for the soname entry.
On Linux/similar it should just be the first component (libgdal.so.21),
however some platforms have other requirements.
Without knowing all of the possible platforms, or exactly what libtool does
I don't think there's a sensible default (may be why there wasn't one at
all)

It's also possible that the so-version isn't always the same as the product
version..

I'm happy to maintain this change just for my build if needed. I don't
think it's a problem for the final build output, just test harnesses/etc
which run from the build directory (before rpaths/etc are stripped out).

Thanks
Gareth


On 9 August 2016 at 13:43, Even Rouault <even.rouault at spatialys.com> wrote:

> Forwarding to the list.
>
> ----------  Message transmis  ----------
>
> Sujet : Re: [gdal-dev] No SONAME in libgdal.so when building with
> --without-
> libtool
> Date : mardi 09 août 2016, 14:38:00
> De : Gareth Francis <gfrancis.dev at gmail.com>
> À : Even Rouault <even.rouault at spatialys.com>
>
> Not having a SONAME entry doesn't directly cause any problems, however
> libraries linked to libgdal.so can end up having a DT_NEEDED entry
> containing the library path '../../build/lib64/libgdal.so' instead of just
> 'libgdal.so.20'. This happens when linking with GNU ld using CMake's
> default behaviour. Linking without rpaths/etc probably avoids the issue.
>
> Any executable which doesn't directly link to libgdal.so will then try to
> look for '../../build/lib64/libgdal.so', regardless of the LD_LIBRARY_PATH
> contents.
>
> The only special case I can think of is Android, where the SONAME should
> just be 'libgdal.so' without any version numbers.
>
> I'll have to double-check what our version of libtool generated, I probably
> just made a mistake.
>
>
> On 9 August 2016 at 13:10, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Gareth,
> >
> > What sort of issue do you encounter with SONAME not being defined ?
> >
> > I've tested your patch and it doesn't generate the same soname as
> libtool.
> > libtool generates libgdal.so.20 deduced from the LIBGDAL_CURRENT /
> > LIBGDAL_REVISION / LIBGDAL_AGE variables.
> >
> > Digging into history, it seems to be a voluntary choice not to define by
> > default the soname in non-libtool builds, but I'm not sure why :
> > https://trac.osgeo.org/gdal/changeset/4855
> >
> > Even
> >
> > > Encountered on Centos 6, x86_64
> > >
> > > configured with --without-libtool, resulting libgdal.so has no SONAME
> > entry
> > >
> > > The link command for libgdal.so uses the variable 'GDAL_SLIB_SONAME'
> > which
> > > isn't defined in GDALmake.opt.in
> > >
> > > The attached patch fixes the issue, and I believe will generate the
> same
> > > name as libtool.
> > >
> > > Thanks
> > > Gareth Francis
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
>
>
>
> --
> --------------------
> Gareth Francis
> www.gfrancisdev.co.uk
>
> -------------------------------------------------------
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
--------------------
Gareth Francis
www.gfrancisdev.co.uk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160809/5c43c93b/attachment.html>
-------------- next part --------------
Index: GDALmake.opt.in
===================================================================
--- GDALmake.opt.in	(revision 35008)
+++ GDALmake.opt.in	(working copy)
@@ -135,6 +135,7 @@
 GDAL_LIB	= 	$(GDAL_ROOT)/libgdal.a
 GDAL_SLIB	=	$(GDAL_ROOT)/libgdal.$(SO_EXT)
 GDAL_SLIB_LINK	=	-L$(GDAL_ROOT) -lgdal
+GDAL_SLIB_SONAME = -Wl,-soname,libgdal.$(SO_EXT).$(LIBGDAL_CURRENT)
 
 # Mac OS X Framework definition
 MACOSX_FRAMEWORK = @MACOSX_FRAMEWORK@

From anton.korosov at nersc.no  Wed Aug 10 02:13:49 2016
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed, 10 Aug 2016 11:13:49 +0200
Subject: [gdal-dev] Probably bug with HDF4-EOS driver
Message-ID: <936551dd-c117-30d5-e410-7955b3450ca2@nersc.no>

Dear GDAL developers,

I was trying to access MODIS L1 data available e.g. here:
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD02HKM/

and since GDAL version (2.1.0) the values of Ground Control Points are 
completely wrong. GCPPixel and GCPLine are twice larger than should be 
and GCPX, GCPY are just insane.

gdalinfo 
HDF4_EOS:EOS_SWATH:"MYD02HKM.A2016148.1050.006.2016149162607.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB

Driver: HDF4Image/HDF4 Dataset
Files: MYD02HKM.A2016148.1050.006.2016149162607.hdf
Size is 2708, 4060
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (0.5,0.5) -> (170569270408.57,2706131931253.88,0)
GCP[  1]: Id=, Info=
           (246.5,0.5) -> (33576161415.8712,2701109252213.01,0)
GCP[  2]: Id=, Info=
           (492.5,0.5) -> (14008281153.2792,2628614901860.17,0)
GCP[  3]: Id=, Info=
           (738.5,0.5) -> (5961274399.40133,2544871428176.69,0)
GCP[  4]: Id=, Info=
           (984.5,0.5) -> (2034123015.4764,2457627807804.38,0)
GCP[  5]: Id=, Info=
           (1230.5,0.5) -> (855102595.575362,2365791424551.01,0)


Earlier version (2.0.2) reports correct values
gdalinfo 
HDF4_EOS:EOS_SWATH:"/home/antonk/py/nansat-lectures/notebooks/examples/nansat-paper/MYD02HKM.A2011229.1005.005.2011230152517.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
Driver: HDF4Image/HDF4 Dataset
Files: none associated
Size is 2708, 4060
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (0.5,0.5) -> (59.6357002258301,61.7213020324707,0)
GCP[  1]: Id=, Info=
           (246.5,0.5) -> (51.7233047485352,61.6709632873535,0)
GCP[  2]: Id=, Info=
           (492.5,0.5) -> (47.139404296875,61.4298629760742,0)

I was installing GDAL using conda either the standard channel (e.g.: 
conda install gdal=2.1.0) or the conda-forge one (e.g. conda install 
gdal=2.0.2 -c conda-forge). The results are the same.

Can you please confirm that this is reproducible without conda and I can 
submit a ticket?

Regards!
Anton



Nansen Environmental and Remote Sensing Center
Address: Thormøhlens gate 47, NO-5006 Bergen, NORWAY
Website: www.nersc.no, Email: post at nersc.no
Work: +47 55 20 58 00, Fax: +47 55 20 58 01


From even.rouault at spatialys.com  Wed Aug 10 05:14:55 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Aug 2016 14:14:55 +0200
Subject: [gdal-dev] Probably bug with HDF4-EOS driver
In-Reply-To: <936551dd-c117-30d5-e410-7955b3450ca2@nersc.no>
References: <936551dd-c117-30d5-e410-7955b3450ca2@nersc.no>
Message-ID: <201608101414.55913.even.rouault@spatialys.com>

Le mercredi 10 août 2016 11:13:49, vous avez écrit :
> Dear GDAL developers,
> 
> I was trying to access MODIS L1 data available e.g. here:
> ftp://ladsweb.nascom.nasa.gov/allData/6/MYD02HKM/
> 
> and since GDAL version (2.1.0) the values of Ground Control Points are
> completely wrong. GCPPixel and GCPLine are twice larger than should be
> and GCPX, GCPY are just insane.
> 
> gdalinfo
> HDF4_EOS:EOS_SWATH:"MYD02HKM.A2016148.1050.006.2016149162607.hdf":MODIS_SWA
> TH_Type_L1B:EV_500_RefSB
> 
> Driver: HDF4Image/HDF4 Dataset
> Files: MYD02HKM.A2016148.1050.006.2016149162607.hdf
> Size is 2708, 4060
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.0174532925199433,
>          AUTHORITY["EPSG","9122"]],
>      AUTHORITY["EPSG","4326"]]
> GCP[  0]: Id=, Info=
>            (0.5,0.5) -> (170569270408.57,2706131931253.88,0)
> GCP[  1]: Id=, Info=
>            (246.5,0.5) -> (33576161415.8712,2701109252213.01,0)
> GCP[  2]: Id=, Info=
>            (492.5,0.5) -> (14008281153.2792,2628614901860.17,0)
> GCP[  3]: Id=, Info=
>            (738.5,0.5) -> (5961274399.40133,2544871428176.69,0)
> GCP[  4]: Id=, Info=
>            (984.5,0.5) -> (2034123015.4764,2457627807804.38,0)
> GCP[  5]: Id=, Info=
>            (1230.5,0.5) -> (855102595.575362,2365791424551.01,0)
> 
> 
> Earlier version (2.0.2) reports correct values
> gdalinfo
> HDF4_EOS:EOS_SWATH:"/home/antonk/py/nansat-lectures/notebooks/examples/nans
> at-paper/MYD02HKM.A2011229.1005.005.2011230152517.hdf":MODIS_SWATH_Type_L1B
> :EV_500_RefSB Driver: HDF4Image/HDF4 Dataset
> Files: none associated
> Size is 2708, 4060
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          TOWGS84[0,0,0,0,0,0,0],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.0174532925199433,
>          AUTHORITY["EPSG","9108"]],
>      AUTHORITY["EPSG","4326"]]
> GCP[  0]: Id=, Info=
>            (0.5,0.5) -> (59.6357002258301,61.7213020324707,0)
> GCP[  1]: Id=, Info=
>            (246.5,0.5) -> (51.7233047485352,61.6709632873535,0)
> GCP[  2]: Id=, Info=
>            (492.5,0.5) -> (47.139404296875,61.4298629760742,0)
> 
> I was installing GDAL using conda either the standard channel (e.g.:
> conda install gdal=2.1.0) or the conda-forge one (e.g. conda install
> gdal=2.0.2 -c conda-forge). The results are the same.
> 
> Can you please confirm that this is reproducible without conda and I can
> submit a ticket?

Confirmed. Fixed per https://trac.osgeo.org/gdal/ticket/6618.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From domlysz at gmail.com  Wed Aug 10 06:35:19 2016
From: domlysz at gmail.com (domlysz)
Date: Wed, 10 Aug 2016 06:35:19 -0700 (PDT)
Subject: [gdal-dev] [GDAL Python] Save a dataset to an in memory Python
	Bytes object
Message-ID: <1470836119627-5280254.post@n6.nabble.com>

Hi all,

I'm trying to use GDAL Python API to save a Numpy array directly to a Python
bytes object in PNG format. Then, bytes data will be pushed as BLOB in a
SQlite database, so I want to avoid using an intermediate file on disk. 

I wish to reproduce something like this snippet with PIL/PILLOW:


b = io.BytesIO()
img = Image.fromarray(data)
img.save(b, format='PNG')
data = b.getvalue() #convert bytesio to bytes


For now I tried to write my Numpy array in a memory dataset:

img_h, img_w, nbBands = data.shape
mem = gdal.GetDriverByName('MEM').Create('', img_w, img_h, nbBands,
gdal.GDT_Byte)
for bandIdx in range(nbBands):
	bandArray = data[:,:,bandIdx]
	mem.GetRasterBand(bandIdx+1).WriteArray(bandArray)

and then save the dataset to a bytes object using the CreateCopy method:

b = io.BytesIO()
out = gdal.GetDriverByName('PNG').CreateCopy(b, mem)

But CreateCopy only accept a valid string path not a bytes object.


I know it's possible to read a bytes stream through a virtual memory file

req = urllib.request.Request(url)
handle = urllib.request.urlopen(req)
data = handle.read()
vsipath = '/vsimem/img'
gdal.FileFromMemBuffer(vsipath, data)
ds = gdal.Open(vsipath)

But I did not find any information on how to do the inverse of this. It's
seems the ReadRaster method return bytes data but if I try to reopen this
output with PIL, it can't recognize the image format.


Any help on this will be very appreciate.

Thanks in advance.


Dominique



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-Python-Save-a-dataset-to-an-in-memory-Python-Bytes-object-tp5280254.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Aug 10 07:11:40 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Aug 2016 16:11:40 +0200
Subject: [gdal-dev] [GDAL Python] Save a dataset to an in memory Python
	Bytes object
In-Reply-To: <1470836119627-5280254.post@n6.nabble.com>
References: <1470836119627-5280254.post@n6.nabble.com>
Message-ID: <201608101611.41001.even.rouault@spatialys.com>

Le mercredi 10 août 2016 15:35:19, domlysz a écrit :
> Hi all,
> 
> I'm trying to use GDAL Python API to save a Numpy array directly to a
> Python bytes object in PNG format. Then, bytes data will be pushed as BLOB
> in a SQlite database, so I want to avoid using an intermediate file on
> disk.
> 
> I wish to reproduce something like this snippet with PIL/PILLOW:
> 
> 
> b = io.BytesIO()
> img = Image.fromarray(data)
> img.save(b, format='PNG')
> data = b.getvalue() #convert bytesio to bytes
> 
> 
> For now I tried to write my Numpy array in a memory dataset:
> 
> img_h, img_w, nbBands = data.shape
> mem = gdal.GetDriverByName('MEM').Create('', img_w, img_h, nbBands,
> gdal.GDT_Byte)
> for bandIdx in range(nbBands):
> 	bandArray = data[:,:,bandIdx]
> 	mem.GetRasterBand(bandIdx+1).WriteArray(bandArray)
> 
> and then save the dataset to a bytes object using the CreateCopy method:
> 
> b = io.BytesIO()
> out = gdal.GetDriverByName('PNG').CreateCopy(b, mem)
> 
> But CreateCopy only accept a valid string path not a bytes object.
> 
> 
> I know it's possible to read a bytes stream through a virtual memory file
> 
> req = urllib.request.Request(url)
> handle = urllib.request.urlopen(req)
> data = handle.read()
> vsipath = '/vsimem/img'
> gdal.FileFromMemBuffer(vsipath, data)
> ds = gdal.Open(vsipath)
> 
> But I did not find any information on how to do the inverse of this.

gdal.GetDriverByName('PNG').CreateCopy('/vsimem/output.png', mem)

# Read /vsimem/output.png 
f = gdal.VSIFOpenL('/vsimem/output.png', 'rb')
gdal.VSIFSeekL(f, 0, 2) # seek to end
size = gdal.VSIFTellL(f)
gdal.VSIFSeekL(f, 0, 0) # seek to beginning
data = gdal.VSIFReadL(1, size, f)
gdal.VSIFCloseL(f)

# Cleanup
gdal.Unlink('/vsimem/output.png')


> It's
> seems the ReadRaster method return bytes data but if I try to reopen this
> output with PIL, it can't recognize the image format.

Yes, because ReadRaster() return the uncompressed data.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From domlysz at gmail.com  Wed Aug 10 08:28:37 2016
From: domlysz at gmail.com (domlysz)
Date: Wed, 10 Aug 2016 08:28:37 -0700 (PDT)
Subject: [gdal-dev] [GDAL Python] Save a dataset to an in memory Python
 Bytes object
In-Reply-To: <201608101611.41001.even.rouault@spatialys.com>
References: <1470836119627-5280254.post@n6.nabble.com>
 <201608101611.41001.even.rouault@spatialys.com>
Message-ID: <1470842917520-5280271.post@n6.nabble.com>

Thank you very mutch, it work like a charm!

I would never have found this solution by myself.

Best regards




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-Python-Save-a-dataset-to-an-in-memory-Python-Bytes-object-tp5280254p5280271.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Wed Aug 10 10:01:26 2016
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 10 Aug 2016 10:01:26 -0700
Subject: [gdal-dev] [GDAL Python] Save a dataset to an in memory Python
 Bytes object
In-Reply-To: <1470842917520-5280271.post@n6.nabble.com>
References: <1470836119627-5280254.post@n6.nabble.com>
 <201608101611.41001.even.rouault@spatialys.com>
 <1470842917520-5280271.post@n6.nabble.com>
Message-ID: <CACmBxytNmuwruJwE6Jjf66V=4b1Znfsnyx-L4r=Bw=UKbc81pw@mail.gmail.com>

There are lots of examples to learn from in the autotest suite.   That's
where I learn a lot of stuff.

https://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/png.py?rev=33793#L211

Or for examples in C++14, there is also my draft autotest2.  You can see
examples like this:

https://github.com/schwehr/gdal-autotest2/blob/626a97593df7d4a4e66a31a3412b1386e936505a/cpp/ogr/ogrsf_frmts/libkml/libkml_test.cc#L62

On Wed, Aug 10, 2016 at 8:28 AM, domlysz <domlysz at gmail.com> wrote:

> Thank you very mutch, it work like a charm!
>
> I would never have found this solution by myself.
>
> Best regards
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.
> nabble.com/GDAL-Python-Save-a-dataset-to-an-in-memory-Python-Bytes-object-
> tp5280254p5280271.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160810/9e7c9741/attachment.html>

From david.ferdoille at gmail.com  Fri Aug 12 00:32:36 2016
From: david.ferdoille at gmail.com (David Ferdoille)
Date: Fri, 12 Aug 2016 09:32:36 +0200
Subject: [gdal-dev] OGR - S57 - geometry extraction issue
In-Reply-To: <331331746.11256708.1469784666364.JavaMail.yahoo@mail.yahoo.com>
References: <CAJ=7T6XOgm+EsZ0zBhF4qPYemYEyHBTAEpnuHevEBFaR4MqMmg@mail.gmail.com>
 <331331746.11256708.1469784666364.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <CAJ=7T6XV0rH_CKVPsoNiAYPru_H-s3NMphBsfpbsbzKtZoXreQ@mail.gmail.com>

Hello,


Thanks for the responses,



After a long afternoon of tests :

I try to access a WRECKS object, compose by an only point, with a QUAPOS
specific value of 5, and an POSACC of 500.0 (find it using CARIS Easy View)



1-

In ogrinfo -oo "RETURN_PRIMITIVES=ON" -oo "RETURN_LINKAGES=ON" -oo
"LNAM_REFS=ON" file.000 WRECKS, I found the object, but no QUAPOS or POSACC
(logical because the 2 attributes are not directly linked to the object,
but to the geometry).



2-

In ogrinfo -oo "RETURN_PRIMITIVES=ON" -oo "RETURN_LINKAGES=ON" -oo
"LNAM_REFS=ON" file.000 IsolatedNode, I found the node representing the
object but also no QUAPOS or POSACC.



3-

In ogrinfo -oo "RETURN_PRIMITIVES=ON" -oo "RETURN_LINKAGES=ON" -oo
"LNAM_REFS=ON" file.000 M_QUAL, I found an only object, spatially
containing my wreck object, but POSACC is null.



4-

In ogrinfo -oo "RETURN_PRIMITIVES=ON" -oo "RETURN_LINKAGES=ON" -oo
"LNAM_REFS=ON" file.000 M_QUAL, I found 20 objects, but QUAPOS is null for
all of them.



5-

No M_ACCY table is present in my dataset.





According to me, the good way to get these attributes, is the second one
(2-), but even if I try a lot of things, I didn’t manage to :

-          Trying all the S57 option with –oo

-          Trying to change the CSV types and attributes catalog used by
GDAL

-          Etc…





Does someone know if it is possible to get these attribute through GDAL/OGR
?

If not, is there another way to get this attributes (python GDAL scripts ?
another command line software ?)



Thanks again for your help !


Regards


David

2016-07-29 11:31 GMT+02:00 teddy guerin <teddyguerin at yahoo.fr>:

> Hi,
> Up for my previous answer.
> I was wrong for lines and area values POSACC, QUAPOS are on edges and not
> on "real object".
>
> Regards
> Ted
>
>
> ------------------------------
> *De :* David Ferdoille <david.ferdoille at gmail.com>
> *À :* gdal-dev at lists.osgeo.org
> *Envoyé le :* Mercredi 27 juillet 2016 15h12
> *Objet :* [gdal-dev] OGR - S57 - geometry extraction issue
>
> Hello all,
>
> We are trying to render S57 files as ENC through Geoserver.
>
> We convert S57 to shapefiles thanks to ogr2ogr : 1 shapefile for 1 class
> (ex : COALNE) and 1 geometry type (LINE) :
> ogrinfo -oo "RETURN_PRIMITIVES=ON" -oo "RETURN_LINKAGES=ON" -oo
> "LNAM_REFS=ON" CELLLL.000 COALNE
> ogr2ogr -skipfailures  -where "OGR_GEOMETRY='POINT' or
> OGR_GEOMETRY='MULTIPOINT'" SOUNDG_points.shp CELLLL.000 SOUNDG
>
> We use gdal-2.1.0 with the S57_CSV environnement variable
> (S57_CSV=/usr/local/share/gdal/ with s57*.csv files).
>
>
> We noticed that objects (of COALNE class for example) have multiple
> geometries and each sub-geometry have attributes like POSACC and QUAPOS
> which are important for S52 representation.
> We've succeeded to extract primitives (Edge, isolated points, connected
> points, ...), but it looks very complex to operate.
>
>
> We have some problems to extract geometries from s57 objects :
> - we noticed that, for an object, all sub-geometries are aggregated to one
> geometry
> - we didn't succeed to extract geometry attributes like POSACC and QUAPOS
>
>
> 1) Is there a way to not aggregate sub-geometries of an object and get
> this list of sub-geometries ?
> 2) Is there a way to extract geometry attributes like POSACC and QUAPOS ?
> 3) If not, are these features planned ?
>
>
> Thanks for your help !
>
>
> David
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160812/2db7c681/attachment.html>

From jamessramm at gmail.com  Fri Aug 12 06:49:55 2016
From: jamessramm at gmail.com (jramm)
Date: Fri, 12 Aug 2016 06:49:55 -0700 (PDT)
Subject: [gdal-dev] Memory increase in postgis raster driver
In-Reply-To: <201607201437.44368.even.rouault@spatialys.com>
References: <1469009579985-5277284.post@n6.nabble.com>
 <201607201437.44368.even.rouault@spatialys.com>
Message-ID: <1471009795250-5280563.post@n6.nabble.com>

Hi 
We have been looking into this problem some more.

So it seems we can reproduce this by using postgis raster tiles of 100 x
100.
raster2pgsql cmd was:
raster2pgsql bigtiff.tif -C -r -s 27700 -t 100x100 -P -I -M -Y
<schema.tablename> | psql <connection details>

The effect seems more pronounced using GDAL 2.2 (trunk) vs GDAL 2.1

With a tilesize of 256*256 it is fine. 

This is a very large tif btw; ~150000 x 200000 pixels





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Memory-increase-in-postgis-raster-driver-tp5277284p5280563.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From aperi2007 at gmail.com  Fri Aug 12 08:12:38 2016
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 12 Aug 2016 17:12:38 +0200
Subject: [gdal-dev] How clean a shapefile using ogrinfo
Message-ID: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>

Hi,
I need to clean a shapefile before export in it from a DB table.

The option "-overwrite" of ogr2ogr is not feasible for me because
AFAIK from the docs
the overwrite option will
"delete the shapefile and recreate it".
Instead I need do not recreate it to maintain the original structure of dbf.

So I try to delete the shapefile using this ogrinfo tools,
but using this sintax

ogrinfo -al -sql "delete from myshape" myshape.shp

I have an errore and seem is not accepted by ogrinfo.

I'm wrong something in the sintax or ogrinfo do not allow the delete
of a shapefile ?

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty àèìòù
-----------------

From even.rouault at spatialys.com  Fri Aug 12 08:22:16 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Aug 2016 17:22:16 +0200
Subject: [gdal-dev] How clean a shapefile using ogrinfo
In-Reply-To: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
References: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
Message-ID: <201608121722.17011.even.rouault@spatialys.com>

Hi Andrea,

> I need to clean a shapefile before export in it from a DB table.
> 
> The option "-overwrite" of ogr2ogr is not feasible for me because
> AFAIK from the docs
> the overwrite option will
> "delete the shapefile and recreate it".
> Instead I need do not recreate it to maintain the original structure of
> dbf.
> 
> So I try to delete the shapefile using this ogrinfo tools,
> but using this sintax
> 
> ogrinfo -al -sql "delete from myshape" myshape.shp

Add to the above command: -dialect sqlite

And to really clean all records, you need to repack afterwards:

ogrinfo -sql "repack myshape" myshape.shp


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From afalciano at yahoo.it  Fri Aug 12 08:21:27 2016
From: afalciano at yahoo.it (Antonio Falciano)
Date: Fri, 12 Aug 2016 17:21:27 +0200
Subject: [gdal-dev] How clean a shapefile using ogrinfo
In-Reply-To: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
References: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
Message-ID: <f015d239-641b-426b-ecb1-023a07937b09@yahoo.it>

Il 12/08/2016 17:12, Andrea Peri ha scritto:
> Hi,
> I need to clean a shapefile before export in it from a DB table.
>
> The option "-overwrite" of ogr2ogr is not feasible for me because
> AFAIK from the docs
> the overwrite option will
> "delete the shapefile and recreate it".
> Instead I need do not recreate it to maintain the original structure of dbf.
>
> So I try to delete the shapefile using this ogrinfo tools,
> but using this sintax
>
> ogrinfo -al -sql "delete from myshape" myshape.shp
>
> I have an errore and seem is not accepted by ogrinfo.
>
> I'm wrong something in the sintax or ogrinfo do not allow the delete
> of a shapefile ?

Andrea,
if you want to delete the shapefile only:

ogrinfo myshape.shp -sql "DROP TABLE myshape"

should be enough.

ciao
Antonio

-- 
Antonio Falciano
http://www.linkedin.com/in/antoniofalciano

From aperi2007 at gmail.com  Fri Aug 12 12:22:59 2016
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 12 Aug 2016 21:22:59 +0200
Subject: [gdal-dev] How clean a shapefile using ogrinfo
In-Reply-To: <201608121722.17011.even.rouault@spatialys.com>
References: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
 <201608121722.17011.even.rouault@spatialys.com>
Message-ID: <CABqTJk_FyhNDR9W72seVn_L_FvxcKXZj0EB7mKimQVR1eQSV_w@mail.gmail.com>

Hi Even,
thx for your help and for the "repack" hint.

A.


2016-08-12 17:22 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Hi Andrea,
>
>> I need to clean a shapefile before export in it from a DB table.
>>
>> The option "-overwrite" of ogr2ogr is not feasible for me because
>> AFAIK from the docs
>> the overwrite option will
>> "delete the shapefile and recreate it".
>> Instead I need do not recreate it to maintain the original structure of
>> dbf.
>>
>> So I try to delete the shapefile using this ogrinfo tools,
>> but using this sintax
>>
>> ogrinfo -al -sql "delete from myshape" myshape.shp
>
> Add to the above command: -dialect sqlite
>
> And to really clean all records, you need to repack afterwards:
>
> ogrinfo -sql "repack myshape" myshape.shp
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty àèìòù
-----------------

From jmckenna at gatewaygeomatics.com  Fri Aug 12 12:35:58 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 12 Aug 2016 16:35:58 -0300
Subject: [gdal-dev] How clean a shapefile using ogrinfo
In-Reply-To: <CABqTJk_FyhNDR9W72seVn_L_FvxcKXZj0EB7mKimQVR1eQSV_w@mail.gmail.com>
References: <CABqTJk8uiA4FkPRb4cxQR8S00moXhWAW00-ttw-wrwM1r2rPvQ@mail.gmail.com>
 <201608121722.17011.even.rouault@spatialys.com>
 <CABqTJk_FyhNDR9W72seVn_L_FvxcKXZj0EB7mKimQVR1eQSV_w@mail.gmail.com>
Message-ID: <26a30229-9a14-8253-5f7e-aebda9ec9014@gatewaygeomatics.com>

Hi Andrea,

This seems like a useful tip; would you mind documenting your steps on 
the GDAL wiki?  Maybe on this page? 
https://trac.osgeo.org/gdal/wiki/UserDocs/OgrInfo

thanks,

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




On 2016-08-12 4:22 PM, Andrea Peri wrote:
> Hi Even,
> thx for your help and for the "repack" hint.
>
> A.
>
>
> 2016-08-12 17:22 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
>> Hi Andrea,
>>
>>> I need to clean a shapefile before export in it from a DB table.
>>>
>>> The option "-overwrite" of ogr2ogr is not feasible for me because
>>> AFAIK from the docs
>>> the overwrite option will
>>> "delete the shapefile and recreate it".
>>> Instead I need do not recreate it to maintain the original structure of
>>> dbf.
>>>
>>> So I try to delete the shapefile using this ogrinfo tools,
>>> but using this sintax
>>>
>>> ogrinfo -al -sql "delete from myshape" myshape.shp
>>
>> Add to the above command: -dialect sqlite
>>
>> And to really clean all records, you need to repack afterwards:
>>
>> ogrinfo -sql "repack myshape" myshape.shp
>>
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>
>
>



From 191980 at niuitmo.ru  Sun Aug 14 11:03:29 2016
From: 191980 at niuitmo.ru (=?windows-1251?B?we7w5/v1IMDr5erx4O3k8CDA7eTw5eXi6Pc=?=)
Date: Sun, 14 Aug 2016 18:03:29 +0000
Subject: [gdal-dev] GSoC GDAL DWG Support [Week 12 report, final]
Message-ID: <AMSPR01MB2948A68A338BB174A277BD2B6110@AMSPR01MB294.eurprd01.prod.exchangelabs.com>

Week 12 Report [Final] blogpost link<http://gsoc2016gdaldwg.blogspot.ru/2016/08/week-12-report-final.html>


Brief description of the idea.

The aim of my project was to extend GDAL supported formats with DWG.


The state of the project as it was BEFORE your GSOC.

There was a DWG support, but it was not built-in by default, and GDAL Driver was based on third-party library Teigha (which is not X/MIT licensed, not even close).


The addition that your project brought to the software.


Libopencad (GDAL CAD Driver engine)

Overview

Libopencad is a library written in C++11, which provides a way to read/write CAD (DWG/DXF/DXFB) files. It was designed to have a uniformal API to work with any CAD files. It has a base class - CADFile. Inheriting this class it’s possible to create a ‘driver’ for any CAD format, all you need to do - is to overwrite interface functions like ‘GetGeometry(index)’, and others. Now it has an implementation for DWG2000 (R15), but only for read.

Library comes with ‘cadinfo’ utility, which prints out everything library can get from file - header variables, CAD custom classes, presented layers and geometries with their attributes.

Internal structure

Library presents CAD objects in different ways - base class CADObject and other CAD...Object classes are exact analogues of how DWG format stores information about its objects. CADGeometry, and other classes which inherits it, are done for API access to CAD...Object classes.

Library supports 3 modes of reading - READ_ALL (means everything which can be extracted from CAD file will be read) READ_FAST (skipping some kind of meanless information - linetypes, CRC check, etc), READ_FASTEST (only geometries reading, additional info is skipped).

When parsing the file, library does not store any information it does not need. First, it reads file meta-information, and creates a file map. It only stores some info about presented layers, and header variables. Then, when calling application uses CADLayer.GetGeometry(index), it actually reads a geometry from file, using prepared file map. Sometimes it will be slower than having everything you have read in cache, but gives you more flexibility what you want to store in memory, and what you wont.

Library also has special classes which incapsulates I/O functions, so it’s possible to reimplement them for your needs - by default it uses std::fstream, but you can make it possible to work with network by make a class inherited from CADFileIO.


Supported geometries list:

Point, Circle, Ellipse, Arc, Text, Solid, Spline, Line, Polyline 2D, Polyline 3D, LWPolyline, Ray, Raster (Images), MText, MLine, XLine, Polyface Mesh, 3DFace.




GDAL CAD Driver

Overview

GDAL CAD Driver uses libopencad as a datasource. Not everything that libopencad can read from file is mapped into OGR infrastructure, but it will be done in near future. Current features are:

  1.  OpenOptions are presented with 2 options:

- MODE - READ_ALL/READ_FAST/READ_FASTEST (means the same as library OpenOptions).

- ADD_UNSUPPORTED_GEOMETRIES_DATA (YES/NO) - unstable feature, if some of the objects cannot be mapped into OGR representation (or its just not implemented yet), it will be presented as a CADUnknown object - OGRFeature without geometric representation, but with basic info - geometry type, some additional params.

  1.  CAD header variables are mapped into metadata.

  2.  Unlike DXF driver, CAD driver stores vector data in the appropriate layers (not all entities in single layer).

  3.  Raster subdatasets are also supported.

  4.  Coordinate system is extracted from DWG file (if it is presented in accordance with ESRI Docs for DWG files), or from %FILENAME%.prj file in the same directory.

  5.  CAD Geometry attributes mapping is completely done into OGRLayerDefn. So, any ACAD BlockReference attributes will be seen in OGRLayerDefn.


Add all the links (hopefully permanent) to access the relevant code and documentation for the user to get started with testing your application.

During the planning stage, I decided to separate my project into 2 parts: separated CAD formats support library (named libopencad), and GDAL driver, which uses it. Library can be used by itself for any reason, and will be maintained after GSoC.


Links:

Libopencad repository<https://github.com/sandyre/libopencad> (installation is described in REAME.MD)

Libopencad + GDAL fork<https://github.com/sandyre/gdal_libopencad>

Blog with all reports and notices<http://gsoc2016gdaldwg.blogspot.ru/>

PR with my work into GDAL-trunk.<https://github.com/OSGeo/gdal/pull/145>

GDAL Wiki driver page<https://trac.osgeo.org/gdal/wiki/DWG_driver>


A slide / image should serve to show the main elements of your project.

Raster and vector layers by the same driver (left - ArcGIS, right - QGIS): image link<https://pbs.twimg.com/media/Cm2N_-nVIAA8jBn.jpg>

A little comparison between original data source (ACAD) and QGIS with new DWG driver: image link<https://pbs.twimg.com/media/CmwXIBnWcAAz22X.jpg>

Blockreference attributes mapping into OGRLayerDef: image link<https://pbs.twimg.com/media/CocvxggWYAACiIg.jpg>


Best regards,

Alexandr Borzykh

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160814/cd42cc30/attachment-0001.html>

From ahuarte47 at yahoo.es  Sat Aug 13 23:38:14 2016
From: ahuarte47 at yahoo.es (javi santana)
Date: Sun, 14 Aug 2016 09:38:14 +0300
Subject: [gdal-dev] expedition
Message-ID: <00006f570786$d22a85d6$793f09a8$@yahoo.es>

Dear, 

I'm planning an expedition to the Nort Pole, please take a look at some photos of  my preparations <http://solution.intimasbell.com/e4mgin>

Yours sincerely, javi santana


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160814/7c863c9a/attachment.html>

From lucena_ivan at hotmail.com  Mon Aug 15 12:37:58 2016
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Mon, 15 Aug 2016 19:37:58 +0000
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>,
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
Message-ID: <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>

Mateusz,


Thanks for the tip.


Yes, the project is loaded but it is not a "Makefile Project" anymore, so it's basically useless.


In previous VS versions once the .vsproj file was loaded and upgraded you could press F7 and "nmake -f makefile.vc" would start running inside the IDE.


That means you would have all the advantages of the IDE (debuggin/cross reference/refactoring/etc.) but still using the settings of nmake.local and running makefiles.


I am using VS 2013. Is that the same for you on VS 2015?


Thanks,

Ivan



________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Mateusz Loskot <mateusz at loskot.net>
Sent: Thursday, August 4, 2016 5:44 PM
To: Jeff McKenna
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010 Solution (static and dynamic lib)

On 4 August 2016 at 17:52, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
> On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>>
>> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
>> 2. Launch VS2015
>> 3. File > Open > Project/Solution...
>> 4. Select makegdal10.vcproj
>> 5. Accept to upgrade
>>
>
>
>
> Can we make sure to document these steps, so they are not lost in emails?
> Somewhere on the BuildHints wiki would be great.  Possibly here?
> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
BuildingOnWindows - GDAL<https://trac.osgeo.org/gdal/wiki/BuildingOnWindows>
trac.osgeo.org
GDAL can be built on Win32 platforms using MS VC++ 6.x and MS Visual Studio .NET (C++). The source distribution includes NMAKE compatible makefiles for use from the ...



https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioproject

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160815/105b0318/attachment.html>

From im.mansun at gmail.com  Tue Aug 16 05:24:53 2016
From: im.mansun at gmail.com (Suman Humagain)
Date: Tue, 16 Aug 2016 18:09:53 +0545
Subject: [gdal-dev] Issues with MapInfo Conversion to GeoJson using ogr2ogr
Message-ID: <CAK8UEV0eUvGMXsrw+UCw8w8GgDf3+NvSQkmx_iBeDzySfHZtHg@mail.gmail.com>

Hi folks,

I am converting the Mapinfo files to GeoJson format using the ogr2ogr tool.
The things are working great and its converting fine but i am getting
different polylines than i have drawn in the mapinfo. Some extra polylines
are created in the intersections. If there is of the two polylines are
intersected in the MapInfo, during ogr2ogr conversion, we can find 4
polylines in the GeoJson file. Am i missing something here or it the way
ogr2ogr is designed.

Thanks in advance.
-- 
*Suman Humagain*
Software Developer
--------------------------------
Skype: suman.hmg
LinkedIn: http://np.linkedin.com/in/sumanhmg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160816/96e1e6b6/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Aug 16 14:56:55 2016
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 16 Aug 2016 21:56:55 +0000
Subject: [gdal-dev] Issues with MapInfo Conversion to GeoJson using
	ogr2ogr
Message-ID: <64ed29109fe64b3ca1c67a968e479c13@C119S212VM022.msvyvi.vaha.local>

Suman Humagain wrote:

> Hi folks,

> I am converting the Mapinfo files to GeoJson format using the ogr2ogr tool.
> The things are working great and its converting fine but i am getting
> different polylines than i have drawn in the mapinfo. Some extra polylines
> are created in the intersections. If there is of the two polylines are
> intersected in the MapInfo, during ogr2ogr conversion, we can find 4
> polylines in the GeoJson file. Am i missing something here or it the way
> ogr2ogr is designed.

> Thanks in advance.

Please attach a small MapInfo file that can be used for reproducing the issue.

Thanks in advance.

-Jukka Rahkonen-

> -- 
> *Suman Humagain*

From oliver.klages at ksti.de  Wed Aug 17 00:07:28 2016
From: oliver.klages at ksti.de (oliver.klages at ksti.de)
Date: Wed, 17 Aug 2016 07:07:28 +0000
Subject: [gdal-dev] Problem with Gdal transforming "world" wgs84 to EPSG:3857
Message-ID: <D3D9D9CF.9EB9%oliver.klages@ksti.de>



down votefavorite<http://stackoverflow.com/questions/38953211/using-gdalwarp-to-transform-from-wgs84-to-epsg3857-does-not-cover-world#>


i am using gdal 1.10 and 2.1.1.

i have a VRT datasource in WGS84 where i forced the corner coordinates to the min/max values of EPSG:3857 (-180,85.5,180,-85.5).

gdalinfo output for this VRT looks like this:

Size is 1296001, 601200
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,85.500000000000000)
Pixel Size = (0.000277777563443,-0.000284431137725)
Corner Coordinates:
Upper Left  (-180.0000000,  85.5000000) (180d 0' 0.00"W, 85d30' 0.00"N)
Lower Left  (-180.0000000, -85.5000000) (180d 0' 0.00"W, 85d30' 0.00"S)
Upper Right ( 180.0000000,  85.5000000) (180d 0' 0.00"E, 85d30' 0.00"N)
Lower Right ( 180.0000000, -85.5000000) (180d 0' 0.00"E, 85d30' 0.00"S)
Center      (   0.0000000,  -0.0000000) (  0d 0' 0.01"E,  0d 0' 0.00"S)
Band 1 Block=128x128 Type=Int16, ColorInterp=Gray


Basically, i have the world minus the poles.

Now i want to convert this to EPSG:3857.

I use gdalwarp for this, using bilinear interpolation:

./gdalwarp -of VRT -co TILED=YES -srcnodata 9999 -t_srs 'EPSG:3785'  -multi  wgs84.vrt  wmerc.vrt  -overwrite -r bilinear


running gdalinfo on wmerc then gives this:

Size is 995026, 1025175
Coordinate System is:
PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
    GEOGCS["Popular Visualisation CRS",
        DATUM["Popular_Visualisation_Datum",
            SPHEROID["Popular Visualisation Sphere",6378137,0,
                AUTHORITY["EPSG","7059"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6055"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4055"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"],
    AUTHORITY["EPSG","3785"]]
Origin = (-20037508.342789247632027,20644642.363762538880110)
Pixel Size = (40.275313937642778,-40.275354414328227)
Corner Coordinates:
Upper Left  (-20037508.343,20644642.364) (180d 0' 0.00"E, 85d28'11.27"N)
Lower Left  (-20037508.343,-20644644.098) (180d 0' 0.00"E, 85d28'11.28"S)
Upper Right (20037476.183,20644642.364) (179d59'58.96"E, 85d28'11.27"N)
Lower Right (20037476.183,-20644644.098) (179d59'58.96"E, 85d28'11.28"S)
Center      ( -16.0797308,  -0.8670919) (  0d 0' 0.52"W,  0d 0' 0.03"S)
Band 1 Block=512x128 Type=Int16, ColorInterp=Gray
  NoData Value=9999


Note that the corner coordinates for upper/lower left look correct, but the corner coordinates for upper/lower right (the longitude) is missing is missing 32 units. Broadly put, i am missing a sliver on the right side, but only in regards to the coordinates. The data is there, but the coordinates to the right seem wrong.

Why is that?

i could just modify the coordinates to match the world (longitudinal) using gdal_translate but i fear i am overlooking something else here which might just come back to bite me.


Bet regards,


Oliver

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160817/4539c65d/attachment.html>

From even.rouault at spatialys.com  Wed Aug 17 02:20:56 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Aug 2016 11:20:56 +0200
Subject: [gdal-dev] Problem with Gdal transforming "world" wgs84 to
	EPSG:3857
In-Reply-To: <D3D9D9CF.9EB9%oliver.klages@ksti.de>
References: <D3D9D9CF.9EB9%oliver.klages@ksti.de>
Message-ID: <201608171120.56419.even.rouault@spatialys.com>

Le mercredi 17 août 2016 09:07:28, oliver.klages at ksti.de a écrit :
> down
> votefavorite<http://stackoverflow.com/questions/38953211/using-gdalwarp-to
> -transform-from-wgs84-to-epsg3857-does-not-cover-world#>
> 
> 
> i am using gdal 1.10 and 2.1.1.
> 
> i have a VRT datasource in WGS84 where i forced the corner coordinates to
> the min/max values of EPSG:3857 (-180,85.5,180,-85.5).
> 
> gdalinfo output for this VRT looks like this:
> 
> Size is 1296001, 601200
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000000000000,85.500000000000000)
> Pixel Size = (0.000277777563443,-0.000284431137725)
> Corner Coordinates:
> Upper Left  (-180.0000000,  85.5000000) (180d 0' 0.00"W, 85d30' 0.00"N)
> Lower Left  (-180.0000000, -85.5000000) (180d 0' 0.00"W, 85d30' 0.00"S)
> Upper Right ( 180.0000000,  85.5000000) (180d 0' 0.00"E, 85d30' 0.00"N)
> Lower Right ( 180.0000000, -85.5000000) (180d 0' 0.00"E, 85d30' 0.00"S)
> Center      (   0.0000000,  -0.0000000) (  0d 0' 0.01"E,  0d 0' 0.00"S)
> Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
> 
> 
> Basically, i have the world minus the poles.
> 
> Now i want to convert this to EPSG:3857.
> 
> I use gdalwarp for this, using bilinear interpolation:
> 
> ./gdalwarp -of VRT -co TILED=YES -srcnodata 9999 -t_srs 'EPSG:3785'  -multi
>  wgs84.vrt  wmerc.vrt  -overwrite -r bilinear
> 
> 
> running gdalinfo on wmerc then gives this:
> 
> Size is 995026, 1025175
> Coordinate System is:
> PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
>     GEOGCS["Popular Visualisation CRS",
>         DATUM["Popular_Visualisation_Datum",
>             SPHEROID["Popular Visualisation Sphere",6378137,0,
>                 AUTHORITY["EPSG","7059"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6055"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4055"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AXIS["X",EAST],
>     AXIS["Y",NORTH],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
> +no_defs"], AUTHORITY["EPSG","3785"]]
> Origin = (-20037508.342789247632027,20644642.363762538880110)
> Pixel Size = (40.275313937642778,-40.275354414328227)
> Corner Coordinates:
> Upper Left  (-20037508.343,20644642.364) (180d 0' 0.00"E, 85d28'11.27"N)
> Lower Left  (-20037508.343,-20644644.098) (180d 0' 0.00"E, 85d28'11.28"S)
> Upper Right (20037476.183,20644642.364) (179d59'58.96"E, 85d28'11.27"N)
> Lower Right (20037476.183,-20644644.098) (179d59'58.96"E, 85d28'11.28"S)
> Center      ( -16.0797308,  -0.8670919) (  0d 0' 0.52"W,  0d 0' 0.03"S)
> Band 1 Block=512x128 Type=Int16, ColorInterp=Gray
>   NoData Value=9999
> 
> 
> Note that the corner coordinates for upper/lower left look correct, but the
> corner coordinates for upper/lower right (the longitude) is missing is
> missing 32 units. Broadly put, i am missing a sliver on the right side,
> but only in regards to the coordinates. The data is there, but the
> coordinates to the right seem wrong.
> 
> Why is that?

When gdalwarp must guess the output extent and resolution, this involves a 
number of things. One of those is that gdalwarp will compute the output 
resolution to be square pixels so it is not generally possible to have both 
exact extent and square pixels at the same time.

But you can force the target extent manually with the -te parameters

As we have:

$ echo "-180 -85.5" | gdaltransform -s_srs EPSG:4326 -t_srs EPSG:3857
-20037508.3427892 -20644642.3637625 0

$ echo "180 85.5" | gdaltransform -s_srs EPSG:4326 -t_srs EPSG:3857
20037508.3427892 20644642.3637625 0

You can use :
-te -20037508.3427892 -20644642.3637625 20037508.3427892 20644642.3637625

The pixel size will be slightly altered from perfect square pixels to almost 
square pixels to enforce the specified extent.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vincent.bernat at magellium.fr  Wed Aug 17 05:10:19 2016
From: vincent.bernat at magellium.fr (Vincent BERNAT)
Date: Wed, 17 Aug 2016 12:10:19 +0000
Subject: [gdal-dev] GDALSuggestedWarpOutput return wrong pnPixels and pnLines
Message-ID: <1471435903922.44220@magellium.fr>

Hi all,

I work with gdal-2.1.0 on CentOS
I have an image and when I want to use the GDALSuggestedWarpOutput, it returns no failure but
pnPixels = 2173
pnLines  = 0

What could be the problem ?

Thanks a lot.
Regards,
Vincent

here are the gdalinfo :

Driver: SRP/Standard Raster Product (ASRP/USRP)
Files: VALIDATION_KO/ANTIME/ANTIME01.IMG
       VALIDATION_KO/ANTIME/ANTIME01.GEN
       VALIDATION_KO/ANTIME/ANTIME01.IMG
       VALIDATION_KO/ANTIME/ANTIME01.QAL
Size is 1536, 1536
Coordinate System is:
PROJCS["UTM Zone 60, Northern Hemisphere",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",177],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (722080.000000000000000,5320960.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Metadata:
  SRP_CLASSIFICATION=U
  SRP_CREATIONDATE=20070118
  SRP_EDN=0
  SRP_NAM=ANTIME
  SRP_PRODUCT=USRP
  SRP_REVISIONDATE=20070118
  SRP_SCA=50000
  SRP_ZNA=60
Corner Coordinates:
Upper Left  (  722080.000, 5320960.000) (179d58'38.83"E, 48d 0'11.97"N)
Lower Left  (  722080.000, 5313280.000) (179d58'24.55"E, 47d56' 3.55"N)
Upper Right (  729760.000, 5320960.000) (179d55'11.03"W, 48d 0' 2.20"N)
Lower Right (  729760.000, 5313280.000) (179d55'25.81"W, 47d55'53.80"N)
Center      (  725920.000, 5317120.000) (179d58'23.36"W, 47d58' 2.92"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
  NoData Value=0
  Color Table (RGB with 256 entries)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160817/109dad97/attachment-0001.html>

From ari.jolma at gmail.com  Wed Aug 17 05:28:56 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 17 Aug 2016 15:28:56 +0300
Subject: [gdal-dev] GDAL raster processing: parallel computing
Message-ID: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>

Hi,

This relates to RFC 62, raster algebra.

I realized that parallel processing is really an essential element of 
this. I don't have a lot of experience with parallel processing and 
threads so please let me know if I'm writing silly or ignorant things.

James, in your emails you write that map and reduce functions are 
essential. That seems to point to parallel processing - can you 
elaborate a bit more, what's you approach there and are you using some 
specific libraries etc?

Rutger mentioned Dask and Numba, which seem to be a high level solution.

Anyway, I thought I'd make a try with OpenMP and the C++ code I have 
written so far. On a very very simple level it seems that it might be 
enough to add "#pragma omp parallel for" before the for loop, which 
iterates over the (cached) blocks. And then compile the code with 
-fopenmp. Of course this does not work (or it seems to work but not make 
the code use more than one cpu at the same time) since a single GDAL 
Dataset object should not be used by several threads (GDAL FAQ).

There seems to be a solution in a book "Remote Sensing Raster 
Programming", which I found with google and google books shows the 
relevant page. The book suggests adding #pragma omp barrier before 
GDALRasterIO. To me it seems that that would cause all the raster data 
to accumulate into the RAM. I did not try it though.

It seems that I should somehow make the code spawn a new Dataset object 
for each thread. The function for that is GDALOpenShared. Now a simple 
question: What if the raster is created in the code? My test application 
for this is a simple one, which takes an existing raster and returns a 
0/1 raster, where the cell has 1 if the original raster has value 48 and 
0 elsewhere. Is the solution to create the dataset, and then open new 
connections to it using OpenShared?

By the way, I'll be at the FOSS4G code sprint Tuesday afternoon and 
Saturday morning if anyone wants to discuss this.

Best,

Ari



From franka1986 at gmail.com  Wed Aug 17 05:58:24 2016
From: franka1986 at gmail.com (=?UTF-8?Q?Francisco_Jos=C3=A9_Raga_L=C3=B3pez?=)
Date: Wed, 17 Aug 2016 14:58:24 +0200
Subject: [gdal-dev] GDAL 2.1.0, released 2016/04/25
Message-ID: <CAKuFJPoDU2xoViy-=rBtEQQ+8VwbLgwOZ7YETQaPts=TiP6mxw@mail.gmail.com>

HI.

I'm using gdal for java in a personal project,but I have a question.
What version java is need?

I'm using eclipse and If I use jdk 1.7.0 return this error,when debugging.


Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program Files\GDAL\gdaljni.dll: No
se encontró el proceso especificado
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.AllRegister()V
at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
at org.gdal.gdal.gdal.AllRegister(gdal.java:493)

But in jdk 1.8 it ok.

gdal 2.1.0 need java 1.8 or higher??

thanks





Francisco José Raga López

Analista/Desarrollador GIS Open Source "QGis"

Móvil: (+34) 654275432 | e-Mail: franka1986 at gmail.com | skype: francisco_raga
Github: https://github.com/All4Gis
Linkedin: https://es.linkedin.com/in/franciscojoseragalopez

"La vida real no tiene ningún mapa.."  Ivy Compton Burnett

From even.rouault at spatialys.com  Wed Aug 17 06:09:42 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Aug 2016 15:09:42 +0200
Subject: [gdal-dev] GDAL raster processing: parallel computing
In-Reply-To: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>
References: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>
Message-ID: <201608171509.42485.even.rouault@spatialys.com>

Hi Ari,

> 
> This relates to RFC 62, raster algebra.
> 
> I realized that parallel processing is really an essential element of
> this. I don't have a lot of experience with parallel processing and
> threads so please let me know if I'm writing silly or ignorant things.
> 
> James, in your emails you write that map and reduce functions are
> essential. That seems to point to parallel processing - can you
> elaborate a bit more, what's you approach there and are you using some
> specific libraries etc?
> 
> Rutger mentioned Dask and Numba, which seem to be a high level solution.

There's also Spark that is popular : 
https://en.wikipedia.org/wiki/Apache_Spark

There's also MPI: https://en.wikipedia.org/wiki/Message_Passing_Interface

I've no direct experience with any of those though. Happy to hear about other 
comments. But I'm not sure we would want to use directly one of those 
solutions into GDAL itself 

> 
> Anyway, I thought I'd make a try with OpenMP and the C++ code I have
> written so far. On a very very simple level it seems that it might be
> enough to add "#pragma omp parallel for" before the for loop, which
> iterates over the (cached) blocks. And then compile the code with
> -fopenmp. Of course this does not work (or it seems to work but not make
> the code use more than one cpu at the same time) since a single GDAL
> Dataset object should not be used by several threads (GDAL FAQ).

You should see some multi-threaded use though, but indeed with a likely crash 
at some point when the dataset object is used by several threads.

> 
> There seems to be a solution in a book "Remote Sensing Raster
> Programming", which I found with google and google books shows the
> relevant page. The book suggests adding #pragma omp barrier before
> GDALRasterIO. To me it seems that that would cause all the raster data
> to accumulate into the RAM. I did not try it though.

This should just put a mutex around the GDALRasterIO call. Not sure why data 
would accumulate into the RAM. I mean you should declare the buffer that 
receives the raster data to be thread private. There's a OMP directive for 
that.

Although OMP looks like it should be easy to use, I personnaly find it a bit 
hard to master and make sure you do things right because it is easy to forget 
to declare that some variable must be thread private. So until now, I've done 
multi-threading at the old school way and here you can more easily see what is 
shared vs thread-private. There's a port/cpl_worker_thread_pool.h class I've 
used in a few places : warpkernel, gdalgrid, GTiff driver multi-threaded 
compression. But this is mostly personal taste. Someone experienced with OMP 
should manage to write correct code, and in a less verbose way than explicit 
multithreading.

> 
> It seems that I should somehow make the code spawn a new Dataset object
> for each thread. The function for that is GDALOpenShared. 

Not really. GDALOpenShared("foo") use case is more for the single-threaded 
usage where you could have sometimes the need to open the same file but from 
different places and would want to share the same dataset so as to be able to 
take advantage of the cache. This was the case for the old way the VRT driver 
managed its sources (think of a RGB TIFF wrapped as a VRT: there are 3 sources 
pointing to the same TIFF file).

In the multi-threaded case, GDALOpenShared() will return different objects if 
called with the same dataset name from different threads. Like GDALOpen().

> Now a simple
> question: What if the raster is created in the code? My test application
> for this is a simple one, which takes an existing raster and returns a
> 0/1 raster, where the cell has 1 if the original raster has value 48 and
> 0 elsewhere. Is the solution to create the dataset, and then open new
> connections to it using OpenShared?

If it is a in-memory raster created with the MEM driver *and* if you do 
RasterIO requests such as nXSize == nBufXSize && nYSize == nBufYSize (ie no 
resampling), then you can share the same dataset object since the 
implementation doesn't require accessing to blocks.
Otherwise you'll need different datasets objects, or put a mutex around 
RasterIO calls.

> 
> By the way, I'll be at the FOSS4G code sprint Tuesday afternoon and
> Saturday morning if anyone wants to discuss this.

I'll be there too.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 17 06:12:46 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Aug 2016 15:12:46 +0200
Subject: [gdal-dev] GDAL 2.1.0, released 2016/04/25
In-Reply-To: <CAKuFJPoDU2xoViy-=rBtEQQ+8VwbLgwOZ7YETQaPts=TiP6mxw@mail.gmail.com>
References: <CAKuFJPoDU2xoViy-=rBtEQQ+8VwbLgwOZ7YETQaPts=TiP6mxw@mail.gmail.com>
Message-ID: <201608171512.46109.even.rouault@spatialys.com>

Le mercredi 17 août 2016 14:58:24, Francisco José Raga López a écrit :
> HI.
> 
> I'm using gdal for java in a personal project,but I have a question.
> What version java is need?

1.5 or later

> 
> I'm using eclipse and If I use jdk 1.7.0 return this error,when debugging.
> 
> 
> Native library load failed.
> java.lang.UnsatisfiedLinkError: C:\Program Files\GDAL\gdaljni.dll: No
> se encontró el proceso especificado
> Exception in thread "main" java.lang.UnsatisfiedLinkError:
> org.gdal.gdal.gdalJNI.AllRegister()V
> at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
> at org.gdal.gdal.gdal.AllRegister(gdal.java:493)
> 
> But in jdk 1.8 it ok.
> 
> gdal 2.1.0 need java 1.8 or higher??

No, it is likely an issue with the PATH and/or -Djava.library.path=... not 
pointing to gdaljni.dll and/or libgdal20.dll 

> 
> thanks
> 
> 
> 
> 
> 
> Francisco José Raga López
> 
> Analista/Desarrollador GIS Open Source "QGis"
> 
> Móvil: (+34) 654275432 | e-Mail: franka1986 at gmail.com | skype:
> francisco_raga Github: https://github.com/All4Gis
> Linkedin: https://es.linkedin.com/in/franciscojoseragalopez
> 
> "La vida real no tiene ningún mapa.."  Ivy Compton Burnett
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 17 06:16:32 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Aug 2016 15:16:32 +0200
Subject: [gdal-dev] GDALSuggestedWarpOutput return wrong pnPixels and
	pnLines
In-Reply-To: <1471435903922.44220@magellium.fr>
References: <1471435903922.44220@magellium.fr>
Message-ID: <201608171516.32403.even.rouault@spatialys.com>

Le mercredi 17 août 2016 14:10:19, Vincent BERNAT a écrit :
> Hi all,
> 
> I work with gdal-2.1.0 on CentOS
> I have an image and when I want to use the GDALSuggestedWarpOutput, it
> returns no failure but pnPixels = 2173
> pnLines  = 0
> 
> What could be the problem ?

Vincent,

The issue is that you're wrapping a dataset that crosses the antimeridian.
I suppose you're wrapping to EPSG:4326 ? Try instead the following target SRS 
definition "+proj=longlat +datum=WGS84 +lon_wrap=180 +wktext". The 
+lon_wrap=180 parameter will allow longitudes above 180 to be generated (and 
you need the +wktext so that GDAL passes this definition unmodified to proj.4). 
You might need to cut it into 2 parts afterwards and substract 360 to the 
right part so as to get longitudes in the [-180,...] range.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From franka1986 at gmail.com  Wed Aug 17 09:18:25 2016
From: franka1986 at gmail.com (=?UTF-8?Q?Francisco_Jos=C3=A9_Raga_L=C3=B3pez?=)
Date: Wed, 17 Aug 2016 18:18:25 +0200
Subject: [gdal-dev] GDAL 2.1.0, released 2016/04/25
Message-ID: <CAKuFJPqOuhh07gkwR+3zoPwd1jV=pGFm+siULFXSk3ziC+tGXA@mail.gmail.com>

mmm,,,don't work.

I'm dowload the gdal 2.1.0 installer from this site:
http://www.gisinternals.com/query.html?content=filelist&file=release-1800-gdal-2-1-0-mapserver-7-0-1.zip

and this is installed in C:\Program Files\GDAL

Then I have created the environment path:

GDAL_PATH:     C:\Program Files\GDAL

PATH:      %GDAL_PATH%

GDAL_DATA:    %GDAL_PATH%\gdal-data

GDAL_DRIVER_PATH: %GDAL_PATH%\gdalplugins

PROJ_LIB: %GDAL_PATH%\projlib

JAVA_HOME: C:\Program Files\Java\jdk1.7.0_80


ok?and then created a simple project where I add the gdal.jar in the
java build path and in this jar add "Native library location"
C:/Program Files/GDAL.

Run the example:

package testgdal;
import org.gdal.gdal.*;
public class test {
public static void main(String[] args) {
     gdal.AllRegister();
  }
}

And report this error:

Native library load failed.
java.lang.UnsatisfiedLinkError: C:\Program
Files\GDAL\native\gdaljni.dll: Can't find dependent libraries
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.AllRegister()V
at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
at org.gdal.gdal.gdal.AllRegister(gdal.java:493)
at testgdal.test.main(test.java:5)

What I What am I missing?

thanks a lot




Francisco José Raga López

Analista/Desarrollador GIS Open Source "QGis"

Móvil: (+34) 654275432 | e-Mail: franka1986 at gmail.com | skype: francisco_raga
Github: https://github.com/All4Gis
Linkedin: https://es.linkedin.com/in/franciscojoseragalopez

"La vida real no tiene ningún mapa.."  Ivy Compton Burnett


2016-08-17 15:12 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le mercredi 17 août 2016 14:58:24, Francisco José Raga López a écrit :
>> HI.
>>
>> I'm using gdal for java in a personal project,but I have a question.
>> What version java is need?
>
> 1.5 or later
>
>>
>> I'm using eclipse and If I use jdk 1.7.0 return this error,when debugging.
>>
>>
>> Native library load failed.
>> java.lang.UnsatisfiedLinkError: C:\Program Files\GDAL\gdaljni.dll: No
>> se encontró el proceso especificado
>> Exception in thread "main" java.lang.UnsatisfiedLinkError:
>> org.gdal.gdal.gdalJNI.AllRegister()V
>> at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
>> at org.gdal.gdal.gdal.AllRegister(gdal.java:493)
>>
>> But in jdk 1.8 it ok.
>>
>> gdal 2.1.0 need java 1.8 or higher??
>
> No, it is likely an issue with the PATH and/or -Djava.library.path=... not
> pointing to gdaljni.dll and/or libgdal20.dll
>
>>
>> thanks
>>
>>
>>
>>
>>
>> Francisco José Raga López
>>
>> Analista/Desarrollador GIS Open Source "QGis"
>>
>> Móvil: (+34) 654275432 | e-Mail: franka1986 at gmail.com | skype:
>> francisco_raga Github: https://github.com/All4Gis
>> Linkedin: https://es.linkedin.com/in/franciscojoseragalopez
>>
>> "La vida real no tiene ningún mapa.."  Ivy Compton Burnett
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 17 12:34:21 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Aug 2016 21:34:21 +0200
Subject: [gdal-dev] Fwd: [TC-Announce] Request for early implementations -
	GeoPackage 1.0
Message-ID: <201608172134.21206.even.rouault@spatialys.com>

Forwarding to the list.

Is someone interested in doing the below mentionned steps to get GDAL a 
certified implementation ? (that shouldn't involve development, just using 
gdal_translate / ogr2ogr )

----------  Message transmis  ----------

Begin forwarded message:

From: Luis E Bermudez via TC-Announce <tc-
announce at lists.opengeospatial.org<mailto:tc-
announce at lists.opengeospatial.org>>
Subject: [TC-Announce] Request for early implementations - GeoPackage 1.0
Date: 18 August 2016 at 2:26:12 AM NZST
To: "tc-announce at lists.opengeospatial.org<mailto:tc-
announce at lists.opengeospatial.org>" <tc-
announce at lists.opengeospatial.org<mailto:tc-
announce at lists.opengeospatial.org>>
Reply-To: Luis E Bermudez 
<lbermudez at opengeospatial.org<mailto:lbermudez at opengeospatial.org>>

All

If you have implemented GeoPackage 1.0, I invite you to be one of the first 
three early implementations to get certified.

The test is available at the OCG beta validation web site and covers the 
following:

• Core (Required)
• SQLite Container
• Spatial Reference Systems
• Contents
• Tiles
• Metadata


Process:

1) Visit the beta validation web site: http://cite.opengeospatial.org/te2/
2) Provide a file that has been created by your application
3) Go to the OGC portal to officially register your implementation  
http://www.opengeospatial.org/resource/products/registration
4) Apply for getting certified

If you are one of the first three implementations to pass the test, while the 
test is in beta, will have your trademark license fees waived for one year. 
This applies to both proprietary and open source implementations. You are also  
encouraged to offer your implementation as a reference implementations. A 
reference implementation is software that exemplifies proper implementation of 
a standard and is free and publicly available for testing via a web service or 
download.

Acknowledgements to Reinventing Geospatial, Inc. and Army Geospatial Center 
that kindly supported the development the test.

If you have any question, please let me know.

Best Regards,

Luis Bermudez

Executive Director Compliance and E-Learning
Open Geospatial Consortium


-------------------------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jamessramm at gmail.com  Wed Aug 17 13:26:00 2016
From: jamessramm at gmail.com (James Ramm)
Date: Wed, 17 Aug 2016 21:26:00 +0100
Subject: [gdal-dev] GDAL raster processing: parallel computing
In-Reply-To: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>
References: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>
Message-ID: <CAEW=KS76ifookzQSTQ5R8_YDXTqzXYSZiTHK43JagcXremAkNg@mail.gmail.com>

Hi,
I wasn't talking about MapReduce per se (although this would also be very
interesting), but rather the 'classic' functional programming functions of
'map' and 'reduce'.

A 'map' function essentially takes some user defined function and applies
it to every element of a list/vector or some other iterable. For a raster
dataset, I was proposing that it take a user defined function or class
instance and applies it to every 'block' of a raster dataset - with plenty
of choices about how each block is supplied ('natural' blocks, user defined
sizes, overlaps or 'pixel' buffers etc).

A 'reduce' function aims to apply a user defined function cumulatively to
the iterable, so as to reduce it to a single value. For raster dataset(s)
then, a 'reduce' function would take in multiple datasets and pass the
block of each dataset to the user-defined function together, expecting a
single block to be returned. I.E it reduces multiple datasets to a single
datasets. Image mosaicking would be an example of this.

I think a 'map' and 'reduce' function is all that is needed to allow the
user to do pretty much any kind of processing they want, without actually
having to worry about how to apply to a raster dataset of any size and all
that 'boring' boilerplate. Just define the algorithm and hand it over.

A MapReduce system would be, perhaps, a higher level 'organiser' of how
these tasks are run - perhaps distributing them across multiple machines.
Wikipedia does a much better job of explaining MapReduce vs map & reduce
than me:
https://en.wikipedia.org/wiki/MapReduce

I started to gather my ideas and snippets of code in a repository here:
https://github.com/JamesRamm/GeoAlg

It is more of a place to help me form ideas than anything usable atm.

I would be open to merging relevant parts etc.

What I think is important is:

- Different kinds of block 'iterators' so you can support e.g. overlapping
neighbourhoods, mosaicking etc. Iterating in blocks ofc is essential for
handling rasters of any size
- Ability to save state in the callbacks (I decided to support this by
making the callback a class instance conforming to some interface rather
than a function...i guess there are other ways too)
- It would be good to support complex raster 'masks' as well (e.g.
different regions of the mask indicating different processing parameters or
something). I am going to clarify my ideas on this on a wiki page in the
above repo.

When I have tried parallel processing in the past, I have generally done it
on the block array, which neatly avoids having to have multiple GDALDataset
instances and possible getting in a tangle with that. However, this limits
the usefulness of parallel processing to only the most complicated of
algorithms as most of the time I find processing to be heavily I/O bound.
I was hoping to at some point come up with a parallel, block based
alternative for gdal Polygonize as it runs quite slowly for large, tiled
geotiffs, where access by scanline is sub optimal. A polygonize function
also seems sufficiently complex to benefit from parallelisation. OpenCV
probably has much of the necessary work already done - of course, work
relying on OpenCV might be better outside gdal, rather than introducing
such a large & specialised dependency.

Ill be in Bonn from late Tues afternoon for the conference...

I have t

On 17 August 2016 at 13:28, Ari Jolma <ari.jolma at gmail.com> wrote:

> Hi,
>
> This relates to RFC 62, raster algebra.
>
> I realized that parallel processing is really an essential element of
> this. I don't have a lot of experience with parallel processing and threads
> so please let me know if I'm writing silly or ignorant things.
>
> James, in your emails you write that map and reduce functions are
> essential. That seems to point to parallel processing - can you elaborate a
> bit more, what's you approach there and are you using some specific
> libraries etc?
>
> Rutger mentioned Dask and Numba, which seem to be a high level solution.
>
> Anyway, I thought I'd make a try with OpenMP and the C++ code I have
> written so far. On a very very simple level it seems that it might be
> enough to add "#pragma omp parallel for" before the for loop, which
> iterates over the (cached) blocks. And then compile the code with -fopenmp.
> Of course this does not work (or it seems to work but not make the code use
> more than one cpu at the same time) since a single GDAL Dataset object
> should not be used by several threads (GDAL FAQ).
>
> There seems to be a solution in a book "Remote Sensing Raster
> Programming", which I found with google and google books shows the relevant
> page. The book suggests adding #pragma omp barrier before GDALRasterIO. To
> me it seems that that would cause all the raster data to accumulate into
> the RAM. I did not try it though.
>
> It seems that I should somehow make the code spawn a new Dataset object
> for each thread. The function for that is GDALOpenShared. Now a simple
> question: What if the raster is created in the code? My test application
> for this is a simple one, which takes an existing raster and returns a 0/1
> raster, where the cell has 1 if the original raster has value 48 and 0
> elsewhere. Is the solution to create the dataset, and then open new
> connections to it using OpenShared?
>
> By the way, I'll be at the FOSS4G code sprint Tuesday afternoon and
> Saturday morning if anyone wants to discuss this.
>
> Best,
>
> Ari
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160817/41094b63/attachment.html>

From tkeitt at utexas.edu  Wed Aug 17 15:40:31 2016
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 17 Aug 2016 17:40:31 -0500
Subject: [gdal-dev] GDAL raster processing: parallel computing
In-Reply-To: <CAEW=KS76ifookzQSTQ5R8_YDXTqzXYSZiTHK43JagcXremAkNg@mail.gmail.com>
References: <1ff1717e-9b0d-9c47-f5db-6006c70cea06@gmail.com>
 <CAEW=KS76ifookzQSTQ5R8_YDXTqzXYSZiTHK43JagcXremAkNg@mail.gmail.com>
Message-ID: <CANnL8gp78qJYX=eUkAPvkvFx87-c-mXpQ+nzTqgBm5y+T2Vfrg@mail.gmail.com>

http://www.keittlab.org/

On Wed, Aug 17, 2016 at 3:26 PM, James Ramm <jamessramm at gmail.com> wrote:

> Hi,
> I wasn't talking about MapReduce per se (although this would also be very
> interesting), but rather the 'classic' functional programming functions of
> 'map' and 'reduce'.
>
> A 'map' function essentially takes some user defined function and applies
> it to every element of a list/vector or some other iterable. For a raster
> dataset, I was proposing that it take a user defined function or class
> instance and applies it to every 'block' of a raster dataset - with plenty
> of choices about how each block is supplied ('natural' blocks, user defined
> sizes, overlaps or 'pixel' buffers etc).
>
> A 'reduce' function aims to apply a user defined function cumulatively to
> the iterable, so as to reduce it to a single value. For raster dataset(s)
> then, a 'reduce' function would take in multiple datasets and pass the
> block of each dataset to the user-defined function together, expecting a
> single block to be returned. I.E it reduces multiple datasets to a single
> datasets. Image mosaicking would be an example of this.
>
> I think a 'map' and 'reduce' function is all that is needed to allow the
> user to do pretty much any kind of processing they want, without actually
> having to worry about how to apply to a raster dataset of any size and all
> that 'boring' boilerplate. Just define the algorithm and hand it over.
>
> A MapReduce system would be, perhaps, a higher level 'organiser' of how
> these tasks are run - perhaps distributing them across multiple machines.
> Wikipedia does a much better job of explaining MapReduce vs map & reduce
> than me:
> https://en.wikipedia.org/wiki/MapReduce
>
> I started to gather my ideas and snippets of code in a repository here:
> https://github.com/JamesRamm/GeoAlg
>
> It is more of a place to help me form ideas than anything usable atm.
>
> I would be open to merging relevant parts etc.
>
> What I think is important is:
>
> - Different kinds of block 'iterators' so you can support e.g. overlapping
> neighbourhoods, mosaicking etc. Iterating in blocks ofc is essential for
> handling rasters of any size
> - Ability to save state in the callbacks (I decided to support this by
> making the callback a class instance conforming to some interface rather
> than a function...i guess there are other ways too)
> - It would be good to support complex raster 'masks' as well (e.g.
> different regions of the mask indicating different processing parameters or
> something). I am going to clarify my ideas on this on a wiki page in the
> above repo.
>
> When I have tried parallel processing in the past, I have generally done
> it on the block array, which neatly avoids having to have multiple
> GDALDataset instances and possible getting in a tangle with that. However,
> this limits the usefulness of parallel processing to only the most
> complicated of algorithms as most of the time I find processing to be
> heavily I/O bound.
> I was hoping to at some point come up with a parallel, block based
> alternative for gdal Polygonize as it runs quite slowly for large, tiled
> geotiffs, where access by scanline is sub optimal. A polygonize function
> also seems sufficiently complex to benefit from parallelisation. OpenCV
> probably has much of the necessary work already done - of course, work
> relying on OpenCV might be better outside gdal, rather than introducing
> such a large & specialised dependency.
>

I would tend to agree. GDAL is really good at translation, but not such a
great platform for implementing generic iterator-based algorithms. I would
suggest using GDAL to translate and then write algorithms separately, where
you could e.g. take advantage of newer C++ features. The Generic Image
Library is one possibility.

THK


>
> Ill be in Bonn from late Tues afternoon for the conference...
>
> I have t
>
> On 17 August 2016 at 13:28, Ari Jolma <ari.jolma at gmail.com> wrote:
>
>> Hi,
>>
>> This relates to RFC 62, raster algebra.
>>
>> I realized that parallel processing is really an essential element of
>> this. I don't have a lot of experience with parallel processing and threads
>> so please let me know if I'm writing silly or ignorant things.
>>
>> James, in your emails you write that map and reduce functions are
>> essential. That seems to point to parallel processing - can you elaborate a
>> bit more, what's you approach there and are you using some specific
>> libraries etc?
>>
>> Rutger mentioned Dask and Numba, which seem to be a high level solution.
>>
>> Anyway, I thought I'd make a try with OpenMP and the C++ code I have
>> written so far. On a very very simple level it seems that it might be
>> enough to add "#pragma omp parallel for" before the for loop, which
>> iterates over the (cached) blocks. And then compile the code with -fopenmp.
>> Of course this does not work (or it seems to work but not make the code use
>> more than one cpu at the same time) since a single GDAL Dataset object
>> should not be used by several threads (GDAL FAQ).
>>
>> There seems to be a solution in a book "Remote Sensing Raster
>> Programming", which I found with google and google books shows the relevant
>> page. The book suggests adding #pragma omp barrier before GDALRasterIO. To
>> me it seems that that would cause all the raster data to accumulate into
>> the RAM. I did not try it though.
>>
>> It seems that I should somehow make the code spawn a new Dataset object
>> for each thread. The function for that is GDALOpenShared. Now a simple
>> question: What if the raster is created in the code? My test application
>> for this is a simple one, which takes an existing raster and returns a 0/1
>> raster, where the cell has 1 if the original raster has value 48 and 0
>> elsewhere. Is the solution to create the dataset, and then open new
>> connections to it using OpenShared?
>>
>> By the way, I'll be at the FOSS4G code sprint Tuesday afternoon and
>> Saturday morning if anyone wants to discuss this.
>>
>> Best,
>>
>> Ari
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160817/76747c0f/attachment-0001.html>

From bradh at frogmouth.net  Wed Aug 17 15:36:37 2016
From: bradh at frogmouth.net (Brad Hards)
Date: Thu, 18 Aug 2016 08:36:37 +1000
Subject: [gdal-dev] GDAL 2.1.0, released 2016/04/25
In-Reply-To: <CAKuFJPqOuhh07gkwR+3zoPwd1jV=pGFm+siULFXSk3ziC+tGXA@mail.gmail.com>
References: <CAKuFJPqOuhh07gkwR+3zoPwd1jV=pGFm+siULFXSk3ziC+tGXA@mail.gmail.com>
Message-ID: <032f01d1f8d7$d399bca0$7acd35e0$@frogmouth.net>

> mmm,,,don't work.
Not very descriptive....

> GDAL_PATH:     C:\Program Files\GDAL
Maybe you need to quote the path, or use something with no space?

Brad



From franka1986 at gmail.com  Wed Aug 17 23:45:58 2016
From: franka1986 at gmail.com (=?UTF-8?Q?Francisco_Jos=C3=A9_Raga_L=C3=B3pez?=)
Date: Thu, 18 Aug 2016 08:45:58 +0200
Subject: [gdal-dev] Fwd:  GDAL 2.1.0, released 2016/04/25
Message-ID: <CAKuFJPpN=YtmGZwdgfibFqN_PEXThGxYMB_0u07Qftw5tOPbtA@mail.gmail.com>

Thanks for your quick response.

Ii I change the version to *GDAL 1.11.0*, released 2014/04/16,and use
*jdk1.7.0_80* any problem show in console,is in version *2.1.0 *only  the
issue.

*2.1.0* is compatible with java *jdk1.7.0_80*??

*2.1.0 *and *jdk1.8.0_91 *works,perfect.

thanks again


2016-08-18 0:36 GMT+02:00 Brad Hards <bradh at frogmouth.net>:
>> mmm,,,don't work.
> Not very descriptive....
>
>> GDAL_PATH:     C:\Program Files\GDAL
> Maybe you need to quote the path, or use something with no space?
>
> Brad
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160818/275786b2/attachment.html>

From gane.prog at gmail.com  Fri Aug 19 00:15:56 2016
From: gane.prog at gmail.com (Gane R)
Date: Fri, 19 Aug 2016 12:45:56 +0530
Subject: [gdal-dev] Build GDAL on iOS for iPhone
Message-ID: <CALMrLdA4W3kCaPShnwTXEbHN1iVAa+c6fhChWPkwKq8Eo+PTog@mail.gmail.com>

Hi all,

I had a change to see the link
http://stackoverflow.com/questions/12643898/incorporating-gdal-ogr-into-an-ios-project-a-quick-guide

This was guiding to build with Xcode 4.0, the above link says that it
doesn't work with Xcode version above 4.0

I just wanted to build GDAL as static library for iPhone and use the OGR
library there in iPhone.

I modified the build script as shown here, build_gdal_ios_cus.sh

#!/bin/bash
if [ "$#" -eq 0 ]
then
    echo "No parameters supplied"
else
    default_prefix="${HOME}/Documents/iOS_GDAL"
    prefix="${default_prefix}"
    if [ "$1" == "arm" ]
    then
        arch="armv7"
    fi
    if [ "$1" == "sim" ]
    then
        arch="i386"
    fi
    if [ "$2" == "iPhone" ]
    then
        export PATH=$PATH:/Users/w1/ctools
        echo $PATH
        #extra_cflags="-m${thumb_opt:-no-thumb} -mthumb-interwork"
        platform="iPhone"

platform_dir="/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain"
        platform_bin_dir="${platform_dir}/usr/bin"

platform_sdk_dir="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/"
        prefix="${prefix}/${arch}/${platform}.platform/iPhoneOS.sdk"
        echo library will be exported to $prefix
        #export CC="${platform_bin_dir}/clang"
        export
INCDIR="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include"
        export
INCDIR1="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/tr1"
        export
INCDIRCPP="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1"
        #export CFLAGS="-std=gnu99 -nostdinc -I${INCDIR} -I${INCDIRCPP}
-I${INCDIR1} -arch ${arch} -pipe -Os -gdwarf-2 -isysroot
${platform_sdk_dir}"
        export CFLAGS="-std=gnu99 -nostdinc -I${INCDIR} -I${INCDIR1} -arch
${arch} -pipe -Os -gdwarf-2 -isysroot ${platform_sdk_dir}"
        export LDFLAGS="-arch ${arch} -isysroot ${platform_sdk_dir}"
        export CXXFLAGS="-stdlib=libstdc++ -nostdinc++ -I${INCDIR}
-I${INCDIRCPP} -arch ${arch} -pipe -Os -gdwarf-2 -isysroot
${platform_sdk_dir}"
    fi
    if [ "$1" == "sim" ]
    then
        platform="iPhoneSimulator"
    fi
    ./configure \
        --prefix="${prefix}" \
        --host="${arch}-apple-darwin" \
        --disable-shared \
        --enable-static \
        --with-unix-stdio-64=no
fi


I created symbolic links to
 armv7-apple-darwin-gcc -> /usr/bin/llvm-gcc
 armv7-apple-darwin-g++ -> /usr/bin/llvm-g++

Actually points
 llvm-g++ -> clang++
 llvm-gcc -> clang

Above script was invoked as
./build_gdal_ios_cus.sh arm iPhone

Configure succeeded.

when I run

make
I get error like this

(cd alg; /Applications/Xcode.app/Contents/Developer/usr/bin/make)
/bin/sh /Users/w1/gdal-2.1.0/libtool --mode=compile --tag=CC
armv7-apple-darwin-gcc -I/Users/w1/gdal-2.1.0/port
-I/Users/w1/gdal-2.1.0/gcore -I/Users/w1/gdal-2.1.0/alg
-I/Users/w1/gdal-2.1.0/ogr -I/Users/w1/gdal-2.1.0/ogr/ogrsf_frmts
-I/Users/w1/gdal-2.1.0/gnm -I/Users/w1/gdal-2.1.0/apps -std=gnu99 -nostdinc
-I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include
-I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/tr1
-arch armv7 -pipe -Os -gdwarf-2 -isysroot
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
-Wall -Wdeclaration-after-statement -Wextra -Winit-self -Wunused-parameter
-Wmissing-prototypes -Wmissing-declarations -Wformat
-Werror=format-security -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow
-Werror=vla -Wdeclaration-after-statement -Wnull-dereference
-DINTERNAL_QHULL -Ilibqhull -DOGR_ENABLED -I/Users/w1/gdal-2.1.0/port
-DGDAL_COMPILATION  -c -o delaunay.lo delaunay.c
libtool: compile:  armv7-apple-darwin-gcc -I/Users/w1/gdal-2.1.0/port
-I/Users/w1/gdal-2.1.0/gcore -I/Users/w1/gdal-2.1.0/alg
-I/Users/w1/gdal-2.1.0/ogr -I/Users/w1/gdal-2.1.0/ogr/ogrsf_frmts
-I/Users/w1/gdal-2.1.0/gnm -I/Users/w1/gdal-2.1.0/apps -std=gnu99 -nostdinc
-I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include
-I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/tr1
-arch armv7 -pipe -Os -gdwarf-2 -isysroot
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
-Wall -Wdeclaration-after-statement -Wextra -Winit-self -Wunused-parameter
-Wmissing-prototypes -Wmissing-declarations -Wformat
-Werror=format-security -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow
-Werror=vla -Wdeclaration-after-statement -Wnull-dereference
-DINTERNAL_QHULL -Ilibqhull -DOGR_ENABLED -I/Users/w1/gdal-2.1.0/port
-DGDAL_COMPILATION -c delaunay.c -o delaunay.o
In file included from delaunay.c:62:
In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
libqhull/libqhull.c:64:34: error: use of undeclared identifier 'DBL_MAX'
  if (qh RERUN || qh JOGGLEmax < REALmax/2)
                                 ^
libqhull/user.h:145:17: note: expanded from macro 'REALmax'
#define REALmax DBL_MAX
                ^
In file included from delaunay.c:62:
In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
libqhull/libqhull.c:301:37: error: use of undeclared identifier 'DBL_MAX'
    if (!qh RERUN && qh JOGGLEmax < REALmax/2) {
                                    ^
libqhull/user.h:145:17: note: expanded from macro 'REALmax'
#define REALmax DBL_MAX
                ^
In file included from delaunay.c:62:
In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
libqhull/libqhull.c:325:49: error: use of undeclared identifier 'DBL_MAX'
      if (qh TRACEpoint != -1 || qh TRACEdist < REALmax/2 || qh TRACEmerge)
{
                                                ^
libqhull/

It seems that the float.h or cfloat does't have such definition or
implementation for arm target

Questions:

1. Can we build GDAL for iPhone with arm7 targert ??

2. Did I have missed or misconfigured something ???

Any suggestion or references on web will be of great help.

Thanks
Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160819/bf878479/attachment.html>

From im.mansun at gmail.com  Fri Aug 19 03:52:01 2016
From: im.mansun at gmail.com (Suman Humagain)
Date: Fri, 19 Aug 2016 16:37:01 +0545
Subject: [gdal-dev] Issues with MapInfo Conversion to GeoJson using
	ogr2ogr
In-Reply-To: <64ed29109fe64b3ca1c67a968e479c13@C119S212VM022.msvyvi.vaha.local>
References: <64ed29109fe64b3ca1c67a968e479c13@C119S212VM022.msvyvi.vaha.local>
Message-ID: <CAK8UEV3_C2w7C5LO=eNX6tf3zUoQscpviwgOQQnz8L0t6J77gw@mail.gmail.com>

Hi Rahkonen,

I created other mapinfo files and found that this issue occurs in the
mapinfo files where the polygons are combined after they are drawn. And
the uncombined polylines are working fine. So i don't think there is any
way we can restore the combined files into the previous state during
ogr2ogr conversion. Can we do anything like that? I have attached both
files with this message.

Thanks.

On 17 August 2016 at 03:41, Rahkonen Jukka (MML) <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Suman Humagain wrote:
>
> > Hi folks,
>
> > I am converting the Mapinfo files to GeoJson format using the ogr2ogr
> tool.
> > The things are working great and its converting fine but i am getting
> > different polylines than i have drawn in the mapinfo. Some extra
> polylines
> > are created in the intersections. If there is of the two polylines are
> > intersected in the MapInfo, during ogr2ogr conversion, we can find 4
> > polylines in the GeoJson file. Am i missing something here or it the way
> > ogr2ogr is designed.
>
> > Thanks in advance.
>
> Please attach a small MapInfo file that can be used for reproducing the
> issue.
>
> Thanks in advance.
>
> -Jukka Rahkonen-
>
> > --
> > *Suman Humagain*
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
*Suman Humagain*
Software Developer
--------------------------------
Mobile: +9779841029771
Skype: suman.hmg
LinkedIn: http://np.linkedin.com/in/sumanhmg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160819/62bd3a74/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mapinfo.zip
Type: application/zip
Size: 6382 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160819/62bd3a74/attachment-0001.zip>

From even.rouault at spatialys.com  Fri Aug 19 06:49:14 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Aug 2016 15:49:14 +0200
Subject: [gdal-dev] Issues with MapInfo Conversion to GeoJson using
	ogr2ogr
In-Reply-To: <CAK8UEV3_C2w7C5LO=eNX6tf3zUoQscpviwgOQQnz8L0t6J77gw@mail.gmail.com>
References: <64ed29109fe64b3ca1c67a968e479c13@C119S212VM022.msvyvi.vaha.local>
 <CAK8UEV3_C2w7C5LO=eNX6tf3zUoQscpviwgOQQnz8L0t6J77gw@mail.gmail.com>
Message-ID: <201608191549.14354.even.rouault@spatialys.com>

Le vendredi 19 août 2016 12:52:01, Suman Humagain a écrit :
> Hi Rahkonen,
> 
> I created other mapinfo files and found that this issue occurs in the
> mapinfo files where the polygons are combined after they are drawn. And
> the uncombined polylines are working fine. So i don't think there is any
> way we can restore the combined files into the previous state during
> ogr2ogr conversion. Can we do anything like that? I have attached both
> files with this message.

test.TAB is reported as 2 line objects (that happen to cross)
test._combine.TAB is reported as one single multilinestring object. The 
multilinestring being made of 4 lines, that correspond to the 4 segments 
resulting of the intersection of the 2 lines from test.TAB
So at first sight, there's no evidence that the OGR MITAB reader would do wrong 
things. Doesn't MapInfo expose those objects the same way on reading ?

I'm not sure about what restoration you would like : like starting from the 
multilinestring made of 4 lines and creating 2 separate lines ? Could 
certainly be done with some code (or perhaps some clever Spatialite/PostGIS 
SQL), but I can't think of an existing straighforward way of doing that.

> 
> Thanks.
> 
> On 17 August 2016 at 03:41, Rahkonen Jukka (MML) <
> 
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
> > Suman Humagain wrote:
> > > Hi folks,
> > > 
> > > I am converting the Mapinfo files to GeoJson format using the ogr2ogr
> > 
> > tool.
> > 
> > > The things are working great and its converting fine but i am getting
> > > different polylines than i have drawn in the mapinfo. Some extra
> > 
> > polylines
> > 
> > > are created in the intersections. If there is of the two polylines are
> > > intersected in the MapInfo, during ogr2ogr conversion, we can find 4
> > > polylines in the GeoJson file. Am i missing something here or it the
> > > way ogr2ogr is designed.
> > > 
> > > Thanks in advance.
> > 
> > Please attach a small MapInfo file that can be used for reproducing the
> > issue.
> > 
> > Thanks in advance.
> > 
> > -Jukka Rahkonen-
> > 
> > > --
> > > *Suman Humagain*
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rbarnes at umn.edu  Sun Aug 21 02:36:23 2016
From: rbarnes at umn.edu (Richard Barnes)
Date: Sun, 21 Aug 2016 03:36:23 -0600
Subject: [gdal-dev] Arc File Geodatabase
In-Reply-To: <mailman.0.1471771355.19602.gdal-dev@lists.osgeo.org>
References: <mailman.0.1471771355.19602.gdal-dev@lists.osgeo.org>
Message-ID: <76d971e9-f322-3553-c8e8-93180502c44c@umn.edu>

I saw a posting from July 
<https://lists.osgeo.org/pipermail/gdal-dev/2016-July/044761.html> about 
work towards deciphering the Arc File Geodatabase Raster format.

Inspired, I did some work today and successfully extracted a raster from 
a geodatabase.

Using Even Rouault's /dump_gdbtable/ as a starting point, I decompressed 
the raster blobs using zlib, as suggested in the posting.

For my raster, this gave 128x128 big-endian 32-bit floating-point values 
with a trailer of about 512 bytes.

Assembling these 128x128 tiles using the col_nbr and row_nbr fields 
resulted in the raster coming out.

I've uploaded my fork, along with appropriate input data and a command 
to run it all (see README.md) to https://github.com/r-barnes/dump_gdbtable.

What remains is to link metadata (block size, band_width, band_height) 
to the raster so the output can be sized appropriately, the data type 
deduced automatically, and projections saved. This is probably just a 
matter of linking the appropriate rows from some of the lower-numbered 
gdbtables with the files containing the raster data. It might also be 
nice to determine whether zlib is always being used, but I assume an 
error could be thrown if an unexpected compression format is encountered.

I'm interested in seeing GDAL include the ability to translate Arc File 
Geodatabase Rasters into other (less proprietary) formats.
What is a good way to move forward with that?

Best regards,
Richard Barnes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160821/6e4ab02d/attachment.html>

From even.rouault at spatialys.com  Sun Aug 21 04:01:14 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 21 Aug 2016 13:01:14 +0200
Subject: [gdal-dev] Arc File Geodatabase
In-Reply-To: <76d971e9-f322-3553-c8e8-93180502c44c@umn.edu>
References: <mailman.0.1471771355.19602.gdal-dev@lists.osgeo.org>
 <76d971e9-f322-3553-c8e8-93180502c44c@umn.edu>
Message-ID: <201608211301.14601.even.rouault@spatialys.com>

Hi Richard,

> I saw a posting from July
> <https://lists.osgeo.org/pipermail/gdal-dev/2016-July/044761.html> about
> work towards deciphering the Arc File Geodatabase Raster format.
> 
> Inspired, I did some work today and successfully extracted a raster from
> a geodatabase.
> 
> Using Even Rouault's /dump_gdbtable/ as a starting point, I decompressed
> the raster blobs using zlib, as suggested in the posting.
> 
> For my raster, this gave 128x128 big-endian 32-bit floating-point values
> with a trailer of about 512 bytes.
> 
> Assembling these 128x128 tiles using the col_nbr and row_nbr fields
> resulted in the raster coming out.
> 
> I've uploaded my fork, along with appropriate input data and a command
> to run it all (see README.md) to https://github.com/r-barnes/dump_gdbtable.
> 
> What remains is to link metadata (block size, band_width, band_height)
> to the raster so the output can be sized appropriately, the data type
> deduced automatically, and projections saved. This is probably just a
> matter of linking the appropriate rows from some of the lower-numbered
> gdbtables with the files containing the raster data. It might also be
> nice to determine whether zlib is always being used, but I assume an
> error could be thrown if an unexpected compression format is encountered.

One can expect other compression formats according to :
http://desktop.arcgis.com/en/arcmap/10.3/manage-data/raster-and-images/raster-compression.htm
None of them seem to be particularly difficult given what GDAL supports ("raw" RLE and "raw" LZW
would probably require a bit more work as there is no direct drivers that support them, although they
are codecs of some other GDAL drivers like TIFF, and so could be perhaps wrapped on the fly in a in-memory TIFF)

What they call LZ77 must be the ZLib one (according to
https://en.wikipedia.org/wiki/Zlib ZLib's DEFLATE is a modified LZ77)

> 
> I'm interested in seeing GDAL include the ability to translate Arc File
> Geodatabase Rasters into other (less proprietary) formats.
> What is a good way to move forward with that?

"A bit" of coding !
ogr/ogrsf_frmts/openfilegdb/filegdbtable.cpp should probably be extended to offer
the low level access to the rasters.
And ogropenfilegdbdatasource.cpp to implement the GDAL Raster API using the above.
Regarding efficiency of random reading of tiles, I'm wondering if they have some form of 2D (row, column)
indexing or perhaps 3D (row, column, pyramid_level). For the vector part, I only addressed the case
of 1D indexes.
As a fallback sequential reading through the records could still be used, perhaps with some tricks to read only the start
of the records to get the (row, column, pyramid_level) values, if located at the beginning of it,
and not the raster data if not needed.

Even

> 
> Best regards,
> Richard Barnes

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jamessramm at gmail.com  Sun Aug 21 05:17:48 2016
From: jamessramm at gmail.com (James Ramm)
Date: Sun, 21 Aug 2016 13:17:48 +0100
Subject: [gdal-dev] Arc File Geodatabase
In-Reply-To: <201608211301.14601.even.rouault@spatialys.com>
References: <mailman.0.1471771355.19602.gdal-dev@lists.osgeo.org>
 <76d971e9-f322-3553-c8e8-93180502c44c@umn.edu>
 <201608211301.14601.even.rouault@spatialys.com>
Message-ID: <CAEW=KS5SPf4T4OD=y=tbn5tN3PTKt8_THnaT7D2G7aiUZ-eMUA@mail.gmail.com>

Yes, there is some form 2d index - each raster has a corresponding
.col_index.atx, .row_index.atx, _.blk_key_index.atx and .band_index.atx
files. I've not looke at how they work together so far.



On Sunday, 21 August 2016, Even Rouault <even.rouault at spatialys.com> wrote:

> Hi Richard,
>
> > I saw a posting from July
> > <https://lists.osgeo.org/pipermail/gdal-dev/2016-July/044761.html> about
> > work towards deciphering the Arc File Geodatabase Raster format.
> >
> > Inspired, I did some work today and successfully extracted a raster from
> > a geodatabase.
> >
> > Using Even Rouault's /dump_gdbtable/ as a starting point, I decompressed
> > the raster blobs using zlib, as suggested in the posting.
> >
> > For my raster, this gave 128x128 big-endian 32-bit floating-point values
> > with a trailer of about 512 bytes.
> >
> > Assembling these 128x128 tiles using the col_nbr and row_nbr fields
> > resulted in the raster coming out.
> >
> > I've uploaded my fork, along with appropriate input data and a command
> > to run it all (see README.md) to https://github.com/r-barnes/
> dump_gdbtable.
> >
> > What remains is to link metadata (block size, band_width, band_height)
> > to the raster so the output can be sized appropriately, the data type
> > deduced automatically, and projections saved. This is probably just a
> > matter of linking the appropriate rows from some of the lower-numbered
> > gdbtables with the files containing the raster data. It might also be
> > nice to determine whether zlib is always being used, but I assume an
> > error could be thrown if an unexpected compression format is encountered.
>
> One can expect other compression formats according to :
> http://desktop.arcgis.com/en/arcmap/10.3/manage-data/
> raster-and-images/raster-compression.htm
> None of them seem to be particularly difficult given what GDAL supports
> ("raw" RLE and "raw" LZW
> would probably require a bit more work as there is no direct drivers that
> support them, although they
> are codecs of some other GDAL drivers like TIFF, and so could be perhaps
> wrapped on the fly in a in-memory TIFF)
>
> What they call LZ77 must be the ZLib one (according to
> https://en.wikipedia.org/wiki/Zlib ZLib's DEFLATE is a modified LZ77)
>
> >
> > I'm interested in seeing GDAL include the ability to translate Arc File
> > Geodatabase Rasters into other (less proprietary) formats.
> > What is a good way to move forward with that?
>
> "A bit" of coding !
> ogr/ogrsf_frmts/openfilegdb/filegdbtable.cpp should probably be extended
> to offer
> the low level access to the rasters.
> And ogropenfilegdbdatasource.cpp to implement the GDAL Raster API using
> the above.
> Regarding efficiency of random reading of tiles, I'm wondering if they
> have some form of 2D (row, column)
> indexing or perhaps 3D (row, column, pyramid_level). For the vector part,
> I only addressed the case
> of 1D indexes.
> As a fallback sequential reading through the records could still be used,
> perhaps with some tricks to read only the start
> of the records to get the (row, column, pyramid_level) values, if located
> at the beginning of it,
> and not the raster data if not needed.
>
> Even
>
> >
> > Best regards,
> > Richard Barnes
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <javascript:;>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160821/d00fa36c/attachment.html>

From jesse at gaiagps.com  Mon Aug 22 06:00:45 2016
From: jesse at gaiagps.com (Jesse Crocker)
Date: Mon, 22 Aug 2016 07:00:45 -0600
Subject: [gdal-dev] Build GDAL on iOS for iPhone
In-Reply-To: <CALMrLdA4W3kCaPShnwTXEbHN1iVAa+c6fhChWPkwKq8Eo+PTog@mail.gmail.com>
References: <CALMrLdA4W3kCaPShnwTXEbHN1iVAa+c6fhChWPkwKq8Eo+PTog@mail.gmail.com>
Message-ID: <CAOzkc6LVwnt64wLaNd2bs_e0Fx_krLOkE3c_PwMsY3W1o_1nDw@mail.gmail.com>

Hi Gane,
Here is a link to my gdal iOS build script, last tested with 1.11.2, but it
should still work with newer 1.11.x releases,
https://gist.github.com/JesseCrocker/22eee94485bce5b3a6ea

-
Jesse


On Fri, Aug 19, 2016 at 1:15 AM, Gane R <gane.prog at gmail.com> wrote:

> Hi all,
>
> I had a change to see the link
> http://stackoverflow.com/questions/12643898/incorporating-gdal-ogr-into-
> an-ios-project-a-quick-guide
>
> This was guiding to build with Xcode 4.0, the above link says that it
> doesn't work with Xcode version above 4.0
>
> I just wanted to build GDAL as static library for iPhone and use the OGR
> library there in iPhone.
>
> I modified the build script as shown here, build_gdal_ios_cus.sh
>
> #!/bin/bash
> if [ "$#" -eq 0 ]
> then
>     echo "No parameters supplied"
> else
>     default_prefix="${HOME}/Documents/iOS_GDAL"
>     prefix="${default_prefix}"
>     if [ "$1" == "arm" ]
>     then
>         arch="armv7"
>     fi
>     if [ "$1" == "sim" ]
>     then
>         arch="i386"
>     fi
>     if [ "$2" == "iPhone" ]
>     then
>         export PATH=$PATH:/Users/w1/ctools
>         echo $PATH
>         #extra_cflags="-m${thumb_opt:-no-thumb} -mthumb-interwork"
>         platform="iPhone"
>         platform_dir="/Applications/Xcode.app/Contents/Developer/
> Toolchains/XcodeDefault.xctoolchain"
>         platform_bin_dir="${platform_dir}/usr/bin"
>         platform_sdk_dir="/Applications/Xcode.app/
> Contents/Developer/Platforms/iPhoneOS.platform/Developer/
> SDKs/iPhoneOS.sdk/"
>         prefix="${prefix}/${arch}/${platform}.platform/iPhoneOS.sdk"
>         echo library will be exported to $prefix
>         #export CC="${platform_bin_dir}/clang"
>         export INCDIR="/Applications/Xcode.app/Contents/Developer/
> Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include"
>         export INCDIR1="/Applications/Xcode.app/Contents/Developer/
> Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
> usr/include/c++/4.2.1/tr1"
>         export INCDIRCPP="/Applications/Xcode.app/Contents/Developer/
> Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
> usr/include/c++/4.2.1"
>         #export CFLAGS="-std=gnu99 -nostdinc -I${INCDIR} -I${INCDIRCPP}
> -I${INCDIR1} -arch ${arch} -pipe -Os -gdwarf-2 -isysroot
> ${platform_sdk_dir}"
>         export CFLAGS="-std=gnu99 -nostdinc -I${INCDIR} -I${INCDIR1} -arch
> ${arch} -pipe -Os -gdwarf-2 -isysroot ${platform_sdk_dir}"
>         export LDFLAGS="-arch ${arch} -isysroot ${platform_sdk_dir}"
>         export CXXFLAGS="-stdlib=libstdc++ -nostdinc++ -I${INCDIR}
> -I${INCDIRCPP} -arch ${arch} -pipe -Os -gdwarf-2 -isysroot
> ${platform_sdk_dir}"
>     fi
>     if [ "$1" == "sim" ]
>     then
>         platform="iPhoneSimulator"
>     fi
>     ./configure \
>         --prefix="${prefix}" \
>         --host="${arch}-apple-darwin" \
>         --disable-shared \
>         --enable-static \
>         --with-unix-stdio-64=no
> fi
>
>
> I created symbolic links to
>  armv7-apple-darwin-gcc -> /usr/bin/llvm-gcc
>  armv7-apple-darwin-g++ -> /usr/bin/llvm-g++
>
> Actually points
>  llvm-g++ -> clang++
>  llvm-gcc -> clang
>
> Above script was invoked as
> ./build_gdal_ios_cus.sh arm iPhone
>
> Configure succeeded.
>
> when I run
>
> make
> I get error like this
>
> (cd alg; /Applications/Xcode.app/Contents/Developer/usr/bin/make)
> /bin/sh /Users/w1/gdal-2.1.0/libtool --mode=compile --tag=CC
> armv7-apple-darwin-gcc -I/Users/w1/gdal-2.1.0/port
> -I/Users/w1/gdal-2.1.0/gcore -I/Users/w1/gdal-2.1.0/alg
> -I/Users/w1/gdal-2.1.0/ogr -I/Users/w1/gdal-2.1.0/ogr/ogrsf_frmts
> -I/Users/w1/gdal-2.1.0/gnm -I/Users/w1/gdal-2.1.0/apps -std=gnu99 -nostdinc
> -I/Applications/Xcode.app/Contents/Developer/Platforms/
> iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include
> -I/Applications/Xcode.app/Contents/Developer/Platforms/
> iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/tr1
> -arch armv7 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/
> Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
> -Wall -Wdeclaration-after-statement -Wextra -Winit-self -Wunused-parameter
> -Wmissing-prototypes -Wmissing-declarations -Wformat
> -Werror=format-security -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow
> -Werror=vla -Wdeclaration-after-statement -Wnull-dereference
> -DINTERNAL_QHULL -Ilibqhull -DOGR_ENABLED -I/Users/w1/gdal-2.1.0/port
> -DGDAL_COMPILATION  -c -o delaunay.lo delaunay.c
> libtool: compile:  armv7-apple-darwin-gcc -I/Users/w1/gdal-2.1.0/port
> -I/Users/w1/gdal-2.1.0/gcore -I/Users/w1/gdal-2.1.0/alg
> -I/Users/w1/gdal-2.1.0/ogr -I/Users/w1/gdal-2.1.0/ogr/ogrsf_frmts
> -I/Users/w1/gdal-2.1.0/gnm -I/Users/w1/gdal-2.1.0/apps -std=gnu99 -nostdinc
> -I/Applications/Xcode.app/Contents/Developer/Platforms/
> iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include
> -I/Applications/Xcode.app/Contents/Developer/Platforms/
> iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/tr1
> -arch armv7 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/
> Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/
> -Wall -Wdeclaration-after-statement -Wextra -Winit-self -Wunused-parameter
> -Wmissing-prototypes -Wmissing-declarations -Wformat
> -Werror=format-security -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow
> -Werror=vla -Wdeclaration-after-statement -Wnull-dereference
> -DINTERNAL_QHULL -Ilibqhull -DOGR_ENABLED -I/Users/w1/gdal-2.1.0/port
> -DGDAL_COMPILATION -c delaunay.c -o delaunay.o
> In file included from delaunay.c:62:
> In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
> libqhull/libqhull.c:64:34: error: use of undeclared identifier 'DBL_MAX'
>   if (qh RERUN || qh JOGGLEmax < REALmax/2)
>                                  ^
> libqhull/user.h:145:17: note: expanded from macro 'REALmax'
> #define REALmax DBL_MAX
>                 ^
> In file included from delaunay.c:62:
> In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
> libqhull/libqhull.c:301:37: error: use of undeclared identifier 'DBL_MAX'
>     if (!qh RERUN && qh JOGGLEmax < REALmax/2) {
>                                     ^
> libqhull/user.h:145:17: note: expanded from macro 'REALmax'
> #define REALmax DBL_MAX
>                 ^
> In file included from delaunay.c:62:
> In file included from /w1/gdal-2.1.0/alg/internal_qhull_headers.h:977:
> libqhull/libqhull.c:325:49: error: use of undeclared identifier 'DBL_MAX'
>       if (qh TRACEpoint != -1 || qh TRACEdist < REALmax/2 || qh
> TRACEmerge) {
>                                                 ^
> libqhull/
>
> It seems that the float.h or cfloat does't have such definition or
> implementation for arm target
>
> Questions:
>
> 1. Can we build GDAL for iPhone with arm7 targert ??
>
> 2. Did I have missed or misconfigured something ???
>
> Any suggestion or references on web will be of great help.
>
> Thanks
> Gane
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160822/f63cb232/attachment.html>

From sean at mapbox.com  Tue Aug 23 09:41:35 2016
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 23 Aug 2016 18:41:35 +0200
Subject: [gdal-dev] Time for a new GeoJSON driver?
In-Reply-To: <2244266.tPmJZtzF6Q@even-n550jk>
References: <CADPhZXy0uLwei5sbYOo9c84MsuktC=7gdVjG+qgzgdROGvZqiw@mail.gmail.com>
 <CAFLLRpLYBo_kjN6Z4dRyvJ0QkXx=S0mLwTg_PAku09Tq_0K_=A@mail.gmail.com>
 <CABUeae-hWsYMvsoDQNCVws23GLuaryvgGK-sbA8Mf1Q1PTPS_g@mail.gmail.com>
 <2244266.tPmJZtzF6Q@even-n550jk>
Message-ID: <CADPhZXz4YXFThXYyPgQWnRne8udiA56fBHgUb9pMAccMYYsV0Q@mail.gmail.com>

Hi all,

Let's have a quick GDAL + GeoJSON BoF here at FOSS4G this week to discuss
the problem, yes? How about in the Tunnel, Wednesday, after the last talk
from 6-7pm? Hopefully taking much less than an hour.

Is there anybody on the list for whom the proposed time will not work?


On Thu, Jul 28, 2016 at 6:12 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> > >>
> > >> I'm concerned that requiring users to set an environment variable for
> > >> conformance will extend the period of transition from 2008 to RFC
> > >> GeoJSON. I honestly don't know that introducing a new format name
> > >> ("geo+json" instead of "GeoJSON") would be better,
>
> Yes, the casual user would have trouble making the difference between
> geo+json
> and GeoJSON without reading carefully the doc. And RFCxxxx would be too
> obscure. A GeoJSONv2 would be more intuitive but
>
> > >> but I think it could
> > >> be better: `ogr2ogr -f geo+json` appears more portable (to, i.e.,
> > >> Windows) than
> > >> `RFCxxxx_GEOJSON=TRUE ogr2ogr -f GeoJSON`.
>
> I wouldn't use a config option/environment variable for that, but a new
> layer
> creation option added to the existing ones :
>
> <LayerCreationOptionList>
>   <Option name="WRITE_BBOX" type="boolean" description="whether to write a
> bbox property with the bounding box of the geometries at the feature and
> feature collection level" default="NO" />
>   <Option name="COORDINATE_PRECISION" type="int" description="Number of
> decimal for coordinates" default="15" />
>   <Option name="SIGNIFICANT_FIGURES" type="int" description="Number of
> significant figures for floating-point values" default="17" />
>   <Option name="NATIVE_DATA" type="string" description="FeatureCollection
> level elements." />
>   <Option name="NATIVE_MEDIA_TYPE" type="string" description="Format of
> NATIVE_DATA. Must be &quot;application/vnd.geo+json&quot;, otherwise
> NATIVE_DATA will be ignored." />
> </LayerCreationOptionList>
>
>
> For example:
>
>  <Option name="FLAVOR"  type="string-select" default="TO-BE-DEFINED"
> description="Which flavor of GeoJSON must be output">
>     <Value>GJ2008</Value>
>     <Value>RFCxxxx</Value>
>  </Option>
>
>
> > Personally I'd prefer RFC-by-default and no automatic reprojection --
> with
> > an error if the CRS isn't CRS84. Be able to opt into old style with
> config
> > options, which would enable outputting either fully GeoJSON2008, or
> opting
> > into or out-of individual RFC features (eg. fully RFC-style except using
> an
> > alternate CRS, or skipping antimeridian-cutting). These options should
> > enable people to migrate systems gradually.
>
> Having option to turn on/off each individual RFC features seems overkill
> to me,
> unless there is a clear need that is expressed.
>
> >
> > That would change the current behaviour and might be unacceptable,
> > by PSC or users, then that is a good reason to create a new driver.
> > Problem might be with the names, having two drivers means two names,
> > and GeoJSON would still point to old driver which became de facto
> > non-GeoJSON driver. Confusing.
>
> To support RFCxxxx I really think creating a new driver would be
> technically
> an inferior choice given the likely high percentage of common code between
> both. On the reading side, how would you decide which driver would be
> selected
> ? etc...
> A similar situation is SQLite and Spatialite that are both handled by the
> same
> driver, where you select the spatialite flavor with a SPATIALITE=YES
> dataset
> creation option.
>
> >
> > > The above doesn't do good things for GDAL backwards compatibility
> though
> > > :)
>
> My feeling is that the main point of incompatibility is the crs object no
> longer being allowed, and CRS84 being compulsory. All other points are
> really
> details or corner cases that wouldn't impact most use cases
>
> An option would be, if FLAVOR is not specified, if the SRS passed to
> CreateLayer() is CRS84, then select RFCxxxx. Otherwise default to GJ2008.
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160823/4c7045f6/attachment.html>

From samuel.brunel at thalesgroup.com  Wed Aug 24 04:44:36 2016
From: samuel.brunel at thalesgroup.com (BRUNEL Samuel)
Date: Wed, 24 Aug 2016 13:44:36 +0200
Subject: [gdal-dev] No way to set natural block size ?
Message-ID: <57BD88A4.1060007@thalesgroup.com>

Hi,

It's easy to fetch the "natural" block size of a band with "void GDALRasterBand::GetBlockSize(int *pnXSize, int *pnYSize)" but I don't understand how pnXSize and pnYsize are set in gdal.

I'm using gdal 1.11.4

Anyone know the answer ?


Best regards,

Samuel


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160824/84e20e02/attachment.html>

From tkeitt at utexas.edu  Wed Aug 24 05:19:27 2016
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 24 Aug 2016 07:19:27 -0500
Subject: [gdal-dev] No way to set natural block size ?
In-Reply-To: <57BD88A4.1060007@thalesgroup.com>
References: <57BD88A4.1060007@thalesgroup.com>
Message-ID: <CANnL8gq+LNtfhqw7yqqFKiXT73ZMTJQP1FBT9Z79Fhv6m4AbGQ@mail.gmail.com>

It is set at the time of dataset creation and cannot be changed without
creating a new dataset. Check which drivers allow you to set a tiled layout
on disk.

THK

http://www.keittlab.org/

On Wed, Aug 24, 2016 at 6:44 AM, BRUNEL Samuel <
samuel.brunel at thalesgroup.com> wrote:

> Hi,
>
> It's easy to fetch the "natural" block size of a band with "void
> GDALRasterBand::GetBlockSize(int *pnXSize, int *pnYSize)" but I don't
> understand how pnXSize and pnYsize are set in gdal.
>
> I'm using gdal 1.11.4
>
> Anyone know the answer ?
>
>
> Best regards,
>
> Samuel
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160824/a212c3bc/attachment.html>

From samuel.brunel at thalesgroup.com  Wed Aug 24 06:09:15 2016
From: samuel.brunel at thalesgroup.com (BRUNEL Samuel)
Date: Wed, 24 Aug 2016 15:09:15 +0200
Subject: [gdal-dev] No way to set natural block size ?
In-Reply-To: <CANnL8gq+LNtfhqw7yqqFKiXT73ZMTJQP1FBT9Z79Fhv6m4AbGQ@mail.gmail.com>
References: <57BD88A4.1060007@thalesgroup.com>
 <CANnL8gq+LNtfhqw7yqqFKiXT73ZMTJQP1FBT9Z79Fhv6m4AbGQ@mail.gmail.com>
Message-ID: <57BD9C7B.9030209@thalesgroup.com>


OK, It's only possible to  set "natural" block size with options of GDALDataset::AddBand() if the driver supports "natural" block size, like "GTiff" driver.

Thank you very much,

Samuel


Tim Keitt a écrit :
It is set at the time of dataset creation and cannot be changed without creating a new dataset. Check which drivers allow you to set a tiled layout on disk.

THK

http://www.keittlab.org/

On Wed, Aug 24, 2016 at 6:44 AM, BRUNEL Samuel <samuel.brunel at thalesgroup.com<mailto:samuel.brunel at thalesgroup.com>> wrote:
Hi,

It's easy to fetch the "natural" block size of a band with "void GDALRasterBand::GetBlockSize(int *pnXSize, int *pnYSize)" but I don't understand how pnXSize and pnYsize are set in gdal.

I'm using gdal 1.11.4

Anyone know the answer ?


Best regards,

Samuel



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160824/11f4b427/attachment.html>

From mauceri at actgate.com  Wed Aug 24 07:00:02 2016
From: mauceri at actgate.com (Calogero Mauceri)
Date: Wed, 24 Aug 2016 16:00:02 +0200
Subject: [gdal-dev] GDAL 2.1.0 build error (32 bit, Mac)
Message-ID: <49b60192-35d2-f31e-e4da-6d0bd63cb1d7@actgate.com>

Hi all,
I'm trying to build GDAL 2.1.0 in 32 bit on Mac OS X.
I set the following environment variables

export CFLAGS="-arch i386"
export CXXFLAGS="-arch i386"
export CPPFLAGS="-arch i386"
export LDFLAGS="-arch i386"

and then execute

./configure

The build stops with the following error

/bin/sh /Users/mauceri/work/dev/libs/gdal-2.1.1/libtool --mode=compile 
--tag=CXX g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386  -Wall -Wextra 
-Winit-self -Wunused-parameter -Wformat -Werror=format-security 
-Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla 
-Wnull-dereference -Wunused-private-field -Wmissing-prototypes 
-Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual 
-fno-operator-names  -I..  -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg   
-DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff 
-DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/port  -DGDAL_COMPILATION -c -o 
../o/geotiff.lo geotiff.cpp
libtool: compile:  g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386 -Wall -Wextra 
-Winit-self -Wunused-parameter -Wformat -Werror=format-security 
-Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla 
-Wnull-dereference -Wunused-private-field -Wmissing-prototypes 
-Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual 
-fno-operator-names -I.. -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg 
-DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff 
-DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386 
-I/Users/mauceri/work/dev/libs/gdal-2.1.1/port -DGDAL_COMPILATION -c 
geotiff.cpp  -fno-common -DPIC -o ../o/.libs/geotiff.o
geotiff.cpp:9771:21: error: no member named 'my_function' in 
'CPLStaticAssert<false>'; did you mean 'CPLStaticAssert<true>::my_function'?
         if( bSwap ) CPL_SWAP64PTR(&nTmp);
                     ^~~~~~~~~~~~~~~~~~~~
/Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:655:5: note: 
expanded from macro 'CPL_SWAP64PTR'
     CPL_STATIC_ASSERT_IF_AVAILABLE(sizeof(*(x)) == 1 || sizeof(*(x)) == 
8); \
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:605:43: note: 
expanded from macro 'CPL_STATIC_ASSERT_IF_AVAILABLE'
#define CPL_STATIC_ASSERT_IF_AVAILABLE(x) CPL_STATIC_ASSERT(x)
^~~~~~~~~~~~~~~~~~~~
/Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:604:30: note: 
expanded from macro 'CPL_STATIC_ASSERT'
#define CPL_STATIC_ASSERT(x) CPLStaticAssert<x>::my_function()
                              ^~~~~~~~~~~~~~~~~~~~
/Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:599:17: note: 
'CPLStaticAssert<true>::my_function' declared here
     static void my_function() {}

[...]

Do you have any idea on how to fix this?
It seems a problem related to 32 bit compilation, if I compile GDAL in 
64 bit I do not get any error.

Thanks,
Calogero

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com



From sam at surfline.com  Wed Aug 24 14:38:51 2016
From: sam at surfline.com (Sam Wilson)
Date: Wed, 24 Aug 2016 21:38:51 +0000
Subject: [gdal-dev] Preserve Source Raster Resolution When Merging
Message-ID: <D3E36205.120382%sam@surfline.com>

Hi,

I’m attempting to merge (or maybe the proper term is mosaic) overlapping raster datasets of varying resolutions. I’d like to have the higher resolution datasets override the lower resolution datasets where available.

I’ve been able to get close using various methods i.e. gdal_merge.py or by constructing a VRT using gdalbuildvrt and providing the input file list.

However, both of those methods don’t seem to be ideal, unless I’m mistaken, because I’d prefer to preserve the native resolution of all datasets being merged.

For example, when using gdal_merge, you can provide a single pixel size, which I think makes the entire merged raster at that resolution. Thus, I end up gaining resolution where I don’t want it and losing resolution where I do want it. The same goes using the gdalbuildvrt method using the -resolution argument.

The end goal is to have a single raster containing all the input rasters at their native resolutions.  I’ve done a lot of searching around online and it appears that this can be achieved using ArcGIS tools.  However, I’m wondering if there are any workarounds to achieve that other than using ArcGIS.  For example, is their a modified version of gdal_merge.py that keeps the source rasters at their native resolutions when merging?

Thanks for any help!

Cheers,
Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160824/11b66a91/attachment.html>

From even.rouault at spatialys.com  Wed Aug 24 16:41:29 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Aug 2016 01:41:29 +0200
Subject: [gdal-dev] No way to set natural block size ?
In-Reply-To: <57BD9C7B.9030209@thalesgroup.com>
References: <57BD88A4.1060007@thalesgroup.com>
 <CANnL8gq+LNtfhqw7yqqFKiXT73ZMTJQP1FBT9Z79Fhv6m4AbGQ@mail.gmail.com>
 <57BD9C7B.9030209@thalesgroup.com>
Message-ID: <1593102.zWQGQIbiN4@even-n550jk>

On Wednesday 24 August 2016 15:09:15 BRUNEL Samuel wrote:
> OK, It's only possible to  set "natural" block size with options of
> GDALDataset::AddBand() if the driver supports "natural" block size, like
> "GTiff" driver.

There are actualy very vew drivers that actually support the AddBand() method 
(that is adding a new band to an existing dataset). And GTiff doesn't support 
it. In the GeoTIFF case, you can actually specify the block size at Create() 
or CreateCopy() time with TILED=YES/NO and BLOCKXSIZE/BLOCKYSIZE creation 
options.

 
> Thank you very much,
> 
> Samuel
> 
> 
> Tim Keitt a écrit :
> It is set at the time of dataset creation and cannot be changed without
> creating a new dataset. Check which drivers allow you to set a tiled layout
> on disk.
 
> THK
> 
> http://www.keittlab.org/
> 
> On Wed, Aug 24, 2016 at 6:44 AM, BRUNEL Samuel
> <samuel.brunel at thalesgroup.com<mailto:samuel.brunel at thalesgroup.com>>
> wrote:
 Hi,
> 
> It's easy to fetch the "natural" block size of a band with "void
> GDALRasterBand::GetBlockSize(int *pnXSize, int *pnYSize)" but I don't
> understand how pnXSize and pnYsize are set in gdal.
 
> I'm using gdal 1.11.4
> 
> Anyone know the answer ?
> 
> 
> Best regards,
> 
> Samuel
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 24 16:48:11 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Aug 2016 01:48:11 +0200
Subject: [gdal-dev] GDAL 2.1.0 build error (32 bit, Mac)
In-Reply-To: <49b60192-35d2-f31e-e4da-6d0bd63cb1d7@actgate.com>
References: <49b60192-35d2-f31e-e4da-6d0bd63cb1d7@actgate.com>
Message-ID: <1516312.gBv2pRLN9i@even-n550jk>

On Wednesday 24 August 2016 16:00:02 Calogero Mauceri wrote:
> Hi all,
> I'm trying to build GDAL 2.1.0 in 32 bit on Mac OS X.
> I set the following environment variables
> 
> export CFLAGS="-arch i386"
> export CXXFLAGS="-arch i386"
> export CPPFLAGS="-arch i386"
> export LDFLAGS="-arch i386"
> 
> and then execute
> 
> ./configure
> 
> The build stops with the following error
> 
> /bin/sh /Users/mauceri/work/dev/libs/gdal-2.1.1/libtool --mode=compile
> --tag=CXX g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386  -Wall -Wextra
> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
> -fno-operator-names  -I..  -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port  -DGDAL_COMPILATION -c -o
> ../o/geotiff.lo geotiff.cpp
> libtool: compile:  g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386 -Wall -Wextra
> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
> -fno-operator-names -I.. -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port -DGDAL_COMPILATION -c
> geotiff.cpp  -fno-common -DPIC -o ../o/.libs/geotiff.o
> geotiff.cpp:9771:21: error: no member named 'my_function' in
> 'CPLStaticAssert<false>'; did you mean 'CPLStaticAssert<true>::my_function'?
> if( bSwap ) CPL_SWAP64PTR(&nTmp);
>                      ^~~~~~~~~~~~~~~~~~~~
> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:655:5: note:
> expanded from macro 'CPL_SWAP64PTR'
>      CPL_STATIC_ASSERT_IF_AVAILABLE(sizeof(*(x)) == 1 || sizeof(*(x)) ==
> 8); \
> ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:605:43: note:
> expanded from macro 'CPL_STATIC_ASSERT_IF_AVAILABLE'
> #define CPL_STATIC_ASSERT_IF_AVAILABLE(x) CPL_STATIC_ASSERT(x)
> ^~~~~~~~~~~~~~~~~~~~
> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:604:30: note:
> expanded from macro 'CPL_STATIC_ASSERT'
> #define CPL_STATIC_ASSERT(x) CPLStaticAssert<x>::my_function()
>                               ^~~~~~~~~~~~~~~~~~~~
> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:599:17: note:
> 'CPLStaticAssert<true>::my_function' declared here
>      static void my_function() {}
> 
> [...]
> 
> Do you have any idea on how to fix this?

One of the reason for which it would happen is that GUIntBig type doesn't 
resolve to a 64 bit integer but to a 32 bit one. And that could happen if the 
HAVE_LONG_LONG macro is not defined in the port/cpl_config.h file that is 
generated by ./configure. Now I'm not Mac savvy enough to tell you why that 
would happen...

Quickly looking at https://trac.osgeo.org/gdal/wiki/BuildingOnMac , it seems 
you can/should specify  --with-macosx-framework and possibly use "-arch i386 -
arch x86_64"

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From samuel.brunel at thalesgroup.com  Thu Aug 25 00:05:40 2016
From: samuel.brunel at thalesgroup.com (BRUNEL Samuel)
Date: Thu, 25 Aug 2016 09:05:40 +0200
Subject: [gdal-dev] No way to set natural block size ?
In-Reply-To: <1593102.zWQGQIbiN4@even-n550jk>
References: <57BD88A4.1060007@thalesgroup.com>
 <CANnL8gq+LNtfhqw7yqqFKiXT73ZMTJQP1FBT9Z79Fhv6m4AbGQ@mail.gmail.com>
 <57BD9C7B.9030209@thalesgroup.com> <1593102.zWQGQIbiN4@even-n550jk>
Message-ID: <57BE98C4.4000706@thalesgroup.com>

Even Rouault a écrit :

On Wednesday 24 August 2016 15:09:15 BRUNEL Samuel wrote:
> OK, It's only possible to  set "natural" block size with options of
> GDALDataset::AddBand() if the driver supports "natural" block size, like
> "GTiff" driver.

There are actualy very vew drivers that actually support the AddBand() method
(that is adding a new band to an existing dataset). And GTiff doesn't support
it. In the GeoTIFF case, you can actually specify the block size at Create()
or CreateCopy() time with TILED=YES/NO and BLOCKXSIZE/BLOCKYSIZE creation
options.


OK, Thank you.


> Thank you very much,
>
> Samuel
>
>
> Tim Keitt a écrit :
> It is set at the time of dataset creation and cannot be changed without
> creating a new dataset. Check which drivers allow you to set a tiled layout
> on disk.

> THK
>
> http://www.keittlab.org/
>
> On Wed, Aug 24, 2016 at 6:44 AM, BRUNEL Samuel
> <samuel.brunel at thalesgroup.com<mailto:samuel.brunel at thalesgroup.com><mailto:samuel.brunel at thalesgroup.com>>
> wrote:
 Hi,
>
> It's easy to fetch the "natural" block size of a band with "void
> GDALRasterBand::GetBlockSize(int *pnXSize, int *pnYSize)" but I don't
> understand how pnXSize and pnYsize are set in gdal.

> I'm using gdal 1.11.4
>
> Anyone know the answer ?
>
>
> Best regards,
>
> Samuel
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

--
Spatialys - Geospatial professional services
http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/2be1b84c/attachment.html>

From mauceri at actgate.com  Thu Aug 25 06:10:59 2016
From: mauceri at actgate.com (Calogero Mauceri)
Date: Thu, 25 Aug 2016 15:10:59 +0200
Subject: [gdal-dev] GDAL 2.1.0 build error (32 bit, Mac)
In-Reply-To: <1516312.gBv2pRLN9i@even-n550jk>
References: <49b60192-35d2-f31e-e4da-6d0bd63cb1d7@actgate.com>
 <1516312.gBv2pRLN9i@even-n550jk>
Message-ID: <e3fe800e-bbf6-3d8f-ce04-84b8bb9def64@actgate.com>

Thanks Even for your reply.

I had a look to port/cpl_config.h and in both cases (32 and 64 bit) the 
following line is commented

[...]

/* Define to 1, if your compiler supports long long data type */
/* #undef HAVE_LONG_LONG */

[...]

I tried --with-macosx-framework and "-arch i386 -arch x86_64" but 
unfortunately did not work:
--with-macosx-framework is not recognized as a valid option and if I add 
-arch x86_64 flag I get the following configuration errors

[...]
checking for otool... otool
checking for otool64... no
checking for -single_module linker flag... Running ld for i386 ...
Running ld for x86_64 ...
yes
checking for -exported_symbols_list linker flag... yes
checking for -force_load linker flag... Running ld for i386 ...
Running ld for x86_64 ...
yes
checking how to run the C preprocessor... /lib/cpp
configure: error: in `/Users/mauceri/work/dev/libs/gdal-2.1.1':
configure: error: C preprocessor "/lib/cpp" fails sanity check


To add more information, GDAL 1.11.5 and 2.0.3 properly build in 32 bits 
on the same machine.

Calogero


Il 8/25/2016 1:48 AM, Even Rouault ha scritto:
> On Wednesday 24 August 2016 16:00:02 Calogero Mauceri wrote:
>> Hi all,
>> I'm trying to build GDAL 2.1.0 in 32 bit on Mac OS X.
>> I set the following environment variables
>>
>> export CFLAGS="-arch i386"
>> export CXXFLAGS="-arch i386"
>> export CPPFLAGS="-arch i386"
>> export LDFLAGS="-arch i386"
>>
>> and then execute
>>
>> ./configure
>>
>> The build stops with the following error
>>
>> /bin/sh /Users/mauceri/work/dev/libs/gdal-2.1.1/libtool --mode=compile
>> --tag=CXX g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386  -Wall -Wextra
>> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
>> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
>> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
>> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
>> -fno-operator-names  -I..  -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
>> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
>> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port  -DGDAL_COMPILATION -c -o
>> ../o/geotiff.lo geotiff.cpp
>> libtool: compile:  g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386 -Wall -Wextra
>> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
>> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
>> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
>> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
>> -fno-operator-names -I.. -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
>> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
>> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port -DGDAL_COMPILATION -c
>> geotiff.cpp  -fno-common -DPIC -o ../o/.libs/geotiff.o
>> geotiff.cpp:9771:21: error: no member named 'my_function' in
>> 'CPLStaticAssert<false>'; did you mean 'CPLStaticAssert<true>::my_function'?
>> if( bSwap ) CPL_SWAP64PTR(&nTmp);
>>                       ^~~~~~~~~~~~~~~~~~~~
>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:655:5: note:
>> expanded from macro 'CPL_SWAP64PTR'
>>       CPL_STATIC_ASSERT_IF_AVAILABLE(sizeof(*(x)) == 1 || sizeof(*(x)) ==
>> 8); \
>> ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:605:43: note:
>> expanded from macro 'CPL_STATIC_ASSERT_IF_AVAILABLE'
>> #define CPL_STATIC_ASSERT_IF_AVAILABLE(x) CPL_STATIC_ASSERT(x)
>> ^~~~~~~~~~~~~~~~~~~~
>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:604:30: note:
>> expanded from macro 'CPL_STATIC_ASSERT'
>> #define CPL_STATIC_ASSERT(x) CPLStaticAssert<x>::my_function()
>>                                ^~~~~~~~~~~~~~~~~~~~
>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:599:17: note:
>> 'CPLStaticAssert<true>::my_function' declared here
>>       static void my_function() {}
>>
>> [...]
>>
>> Do you have any idea on how to fix this?
> One of the reason for which it would happen is that GUIntBig type doesn't
> resolve to a 64 bit integer but to a 32 bit one. And that could happen if the
> HAVE_LONG_LONG macro is not defined in the port/cpl_config.h file that is
> generated by ./configure. Now I'm not Mac savvy enough to tell you why that
> would happen...
>
> Quickly looking at https://trac.osgeo.org/gdal/wiki/BuildingOnMac , it seems
> you can/should specify  --with-macosx-framework and possibly use "-arch i386 -
> arch x86_64"
>
> Even
>

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com


From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug 25 06:11:39 2016
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 25 Aug 2016 13:11:39 +0000
Subject: [gdal-dev] Preserve Source Raster Resolution When Merging
Message-ID: <47ae1546dd1b4916871ae37e0b8bb2f6@C119S212VM022.msvyvi.vaha.local>

Sam Wilson wrote:

> Hi,

> I'm attempting to merge (or maybe the proper term is mosaic) overlapping raster datasets of varying resolutions. I'd like to have the higher  resolution datasets override the lower resolution datasets where available.

> I've been able to get close using various methods i.e. gdal_merge.py or by constructing a VRT using gdalbuildvrt and providing the input file list.

> However, both of those methods don't seem to be ideal, unless I'm mistaken, because I'd prefer to preserve the native resolution of all datasets being merged.

> For example, when using gdal_merge, you can provide a single pixel size, which I think makes the entire merged raster at that resolution. Thus, I end up gaining resolution where I don't want it and losing resolution where I do want it. The same goes using the gdalbuildvrt method using the -resolution argument.

> The end goal is to have a single raster containing all the input rasters at their native resolutions.  I've done a lot of searching around online and it appears that this can be achieved using ArcGIS tools.  However, I'm wondering if there are any workarounds to achieve that other than using ArcGIS.  For example, is their a modified version of gdal_merge.py that keeps the source rasters at their native resolutions when merging?

> Thanks for any help!

Hi Sam,

Unfortunately you can't do that. From https://en.wikipedia.org/wiki/Raster_graphics
"In computer graphics, a raster graphics image is a dot matrix data structure representing a generally rectangular grid of pixels, or points of color, viewable via a monitor, paper, or other display medium. Raster images are stored in image files with varying formats."

It is hard to believe that ArcGIS could write raster files with variable pixel size either. I rather believe that it keeps the native resolution images somewhere in files or in the database and mosaics, resamples, and renders them on-the-fly. Something that you can simply demonstrate by opening your native images into the same QGIS project. But because of your online search work you must have some links to share with us.

BTW. if you select the best resolution of all the native images for the mosaic you will not lose anything, except disk space.

-Jukka Rahkonen-

> Cheers,
> Sam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/0ada72d9/attachment-0001.html>

From jaadfoo at gmail.com  Thu Aug 25 14:00:16 2016
From: jaadfoo at gmail.com (Jamie Adams)
Date: Thu, 25 Aug 2016 14:00:16 -0700
Subject: [gdal-dev] Preserve Source Raster Resolution When Merging
Message-ID: <CAGJMTBf5QzkMxoQFDHqXYBivhuJ3fT7E5JcfxhrvvYEmmfQ0TQ@mail.gmail.com>

Hi Sam,

If your gdal build has Rasterlite support, you can use that to store
multiple rasters at their native resolution.  For each raster do something
like this, where table is a unique name for each raster.  I used the file
name for table, but it can be anything.

gdal_translate -of Rasterlite raster1.tif RASTERLITE:testdb.sqlite,
table=raster.tif

The problem is on the viewing end.  QGIS prompts you select layers when you
open the sqlite db.  You can select them all, but they come in as
individual rasters. And afaict there isn't a way to enforce layer order.

Cheers,

Jamie

On Wed, Aug 24, 2016 at 2:38 PM, Sam Wilson <sam at surfline.com> wrote:

> Hi,
>
> I’m attempting to merge (or maybe the proper term is mosaic) overlapping
> raster datasets of varying resolutions. I’d like to have the higher
> resolution datasets override the lower resolution datasets where available.
>
> I’ve been able to get close using various methods i.e. gdal_merge.py or by
> constructing a VRT using gdalbuildvrt and providing the input file list.
>
> However, both of those methods don’t seem to be ideal, unless I’m
> mistaken, because I’d prefer to preserve the native resolution of all
> datasets being merged.
>
> For example, when using gdal_merge, you can provide a single pixel size,
> which I think makes the entire merged raster at that resolution. Thus, I
> end up gaining resolution where I don’t want it and losing resolution where
> I do want it. The same goes using the gdalbuildvrt method using the
> -resolution argument.
>
> The end goal is to have a single raster containing all the input rasters
> at their native resolutions.  I’ve done a lot of searching around online
> and it appears that this can be achieved using ArcGIS tools.  However, I’m
> wondering if there are any workarounds to achieve that other than using
> ArcGIS.  For example, is their a modified version of gdal_merge.py that
> keeps the source rasters at their native resolutions when merging?
>
> Thanks for any help!
>
> Cheers,
> Sam
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/efc9d48b/attachment.html>

From Benjamin.Stadin at heidelberg-mobil.com  Thu Aug 25 15:05:19 2016
From: Benjamin.Stadin at heidelberg-mobil.com (Stadin, Benjamin)
Date: Thu, 25 Aug 2016 22:05:19 +0000
Subject: [gdal-dev] Configure with GEOS prefix
Message-ID: <D3E537EB.3B0F7%benjamin.stadin@heidelberg-mobil.com>

Hi,

Is it possible to configure GDAL with GEOS, using a prefix path to a specific GEOS lib?

Cheers
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/bd8b3a2c/attachment.html>

From Benjamin.Stadin at heidelberg-mobil.com  Thu Aug 25 15:37:22 2016
From: Benjamin.Stadin at heidelberg-mobil.com (Stadin, Benjamin)
Date: Thu, 25 Aug 2016 22:37:22 +0000
Subject: [gdal-dev] Configure with GEOS prefix
Message-ID: <D3E53F62.3B0FD%benjamin.stadin@heidelberg-mobil.com>

Sorry, I've overlooked it (-with-geos).

Von: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> on behalf of Benjamin Stadin <benjamin.stadin at heidelberg-mobil.com<mailto:benjamin.stadin at heidelberg-mobil.com>>
Datum: Freitag, 26. August 2016 um 00:05
An: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Betreff: [gdal-dev] Configure with GEOS prefix

Hi,

Is it possible to configure GDAL with GEOS, using a prefix path to a specific GEOS lib?

Cheers
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/87f2a052/attachment.html>

From cgodkin at gmail.com  Thu Aug 25 15:43:14 2016
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 25 Aug 2016 15:43:14 -0700
Subject: [gdal-dev] Public XYM or XYZM datasets?
Message-ID: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>

Hi,

While I had read about XYM and XYZM on the mailing list a few months ago, I
had no experience with those geometry types until today when I happened to
stumble on

http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip

which contains a shapefile of trails around Boulder, Colorado that has
    Geometry: Measured Line String
in GDAL 2.1's ogrinfo.

I would like to find some other datasets with XYM (and/or XYZM) geometry
for testing.

I didn't see any associated with the RFC or tickets associated with it.

Can anyone point me to any others?  Thanks very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160825/efc7ccaa/attachment.html>

From mauceri at actgate.com  Fri Aug 26 01:54:00 2016
From: mauceri at actgate.com (Calogero Mauceri)
Date: Fri, 26 Aug 2016 10:54:00 +0200
Subject: [gdal-dev] GDAL 2.1.0 build error (32 bit, Mac)
In-Reply-To: <e3fe800e-bbf6-3d8f-ce04-84b8bb9def64@actgate.com>
References: <49b60192-35d2-f31e-e4da-6d0bd63cb1d7@actgate.com>
 <1516312.gBv2pRLN9i@even-n550jk>
 <e3fe800e-bbf6-3d8f-ce04-84b8bb9def64@actgate.com>
Message-ID: <6f3b3473-fd33-f256-d945-582011d6b3e1@actgate.com>

I defined HAVE_LONG_LONG in cpl_config.h and indeed it worked.
Not sure why that macro does not get defined automatically by the 
configure script.

Thanks for your hint,
Calogero


Il 8/25/2016 3:10 PM, Calogero Mauceri ha scritto:
> Thanks Even for your reply.
>
> I had a look to port/cpl_config.h and in both cases (32 and 64 bit) 
> the following line is commented
>
> [...]
>
> /* Define to 1, if your compiler supports long long data type */
> /* #undef HAVE_LONG_LONG */
>
> [...]
>
> I tried --with-macosx-framework and "-arch i386 -arch x86_64" but 
> unfortunately did not work:
> --with-macosx-framework is not recognized as a valid option and if I 
> add -arch x86_64 flag I get the following configuration errors
>
> [...]
> checking for otool... otool
> checking for otool64... no
> checking for -single_module linker flag... Running ld for i386 ...
> Running ld for x86_64 ...
> yes
> checking for -exported_symbols_list linker flag... yes
> checking for -force_load linker flag... Running ld for i386 ...
> Running ld for x86_64 ...
> yes
> checking how to run the C preprocessor... /lib/cpp
> configure: error: in `/Users/mauceri/work/dev/libs/gdal-2.1.1':
> configure: error: C preprocessor "/lib/cpp" fails sanity check
>
>
> To add more information, GDAL 1.11.5 and 2.0.3 properly build in 32 
> bits on the same machine.
>
> Calogero
>
>
> Il 8/25/2016 1:48 AM, Even Rouault ha scritto:
>> On Wednesday 24 August 2016 16:00:02 Calogero Mauceri wrote:
>>> Hi all,
>>> I'm trying to build GDAL 2.1.0 in 32 bit on Mac OS X.
>>> I set the following environment variables
>>>
>>> export CFLAGS="-arch i386"
>>> export CXXFLAGS="-arch i386"
>>> export CPPFLAGS="-arch i386"
>>> export LDFLAGS="-arch i386"
>>>
>>> and then execute
>>>
>>> ./configure
>>>
>>> The build stops with the following error
>>>
>>> /bin/sh /Users/mauceri/work/dev/libs/gdal-2.1.1/libtool --mode=compile
>>> --tag=CXX g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386 -Wall -Wextra
>>> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
>>> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
>>> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
>>> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
>>> -fno-operator-names  -I..  -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
>>> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
>>> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port -DGDAL_COMPILATION -c -o
>>> ../o/geotiff.lo geotiff.cpp
>>> libtool: compile:  g++ -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gcore
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/alg
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/ogr/ogrsf_frmts
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/gnm
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/apps -arch i386 -Wall -Wextra
>>> -Winit-self -Wunused-parameter -Wformat -Werror=format-security
>>> -Wno-format-nonliteral -Wshorten-64-to-32 -Wshadow -Werror=vla
>>> -Wnull-dereference -Wunused-private-field -Wmissing-prototypes
>>> -Wmissing-declarations -Wnon-virtual-dtor -Woverloaded-virtual
>>> -fno-operator-names -I.. -I../jpeg -DHAVE_LIBJPEG -I../jpeg/libjpeg
>>> -DINTERNAL_LIBGEOTIFF -Ilibgeotiff -DINTERNAL_LIBTIFF -Ilibtiff
>>> -DBIGTIFF_SUPPORT -DOGR_ENABLED -arch i386
>>> -I/Users/mauceri/work/dev/libs/gdal-2.1.1/port -DGDAL_COMPILATION -c
>>> geotiff.cpp  -fno-common -DPIC -o ../o/.libs/geotiff.o
>>> geotiff.cpp:9771:21: error: no member named 'my_function' in
>>> 'CPLStaticAssert<false>'; did you mean 
>>> 'CPLStaticAssert<true>::my_function'?
>>> if( bSwap ) CPL_SWAP64PTR(&nTmp);
>>>                       ^~~~~~~~~~~~~~~~~~~~
>>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:655:5: note:
>>> expanded from macro 'CPL_SWAP64PTR'
>>>       CPL_STATIC_ASSERT_IF_AVAILABLE(sizeof(*(x)) == 1 || 
>>> sizeof(*(x)) ==
>>> 8); \
>>> ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:605:43: note:
>>> expanded from macro 'CPL_STATIC_ASSERT_IF_AVAILABLE'
>>> #define CPL_STATIC_ASSERT_IF_AVAILABLE(x) CPL_STATIC_ASSERT(x)
>>> ^~~~~~~~~~~~~~~~~~~~
>>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:604:30: note:
>>> expanded from macro 'CPL_STATIC_ASSERT'
>>> #define CPL_STATIC_ASSERT(x) CPLStaticAssert<x>::my_function()
>>>                                ^~~~~~~~~~~~~~~~~~~~
>>> /Users/mauceri/work/dev/libs/gdal-2.1.1/port/cpl_port.h:599:17: note:
>>> 'CPLStaticAssert<true>::my_function' declared here
>>>       static void my_function() {}
>>>
>>> [...]
>>>
>>> Do you have any idea on how to fix this?
>> One of the reason for which it would happen is that GUIntBig type 
>> doesn't
>> resolve to a 64 bit integer but to a 32 bit one. And that could 
>> happen if the
>> HAVE_LONG_LONG macro is not defined in the port/cpl_config.h file 
>> that is
>> generated by ./configure. Now I'm not Mac savvy enough to tell you 
>> why that
>> would happen...
>>
>> Quickly looking at https://trac.osgeo.org/gdal/wiki/BuildingOnMac , 
>> it seems
>> you can/should specify  --with-macosx-framework and possibly use 
>> "-arch i386 -
>> arch x86_64"
>>
>> Even
>>
>

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com



From robin at rtwilson.com  Fri Aug 26 04:01:15 2016
From: robin at rtwilson.com (Robin Wilson)
Date: Fri, 26 Aug 2016 12:01:15 +0100
Subject: [gdal-dev] Calling gdal_merge from a Python script
Message-ID: <1A249F6F-AC0D-4145-8787-1B0CE7DDA092@rtwilson.com>

Hi,

I've was very happy to see the RFC 59.1 code merged in GDAL 2.1, allowing the use of some of the GDAL command-line utilities from within Python without having to 'shell out' using something like the subprocess module.

I notice that gdal_merge isn't in the list of command-line utilities that have been wrapped to be accessed programmatically - and that, in fact, as far as I can see none of the Python-based command-line utilities have been wrapped.

Are there any plans to provide programmatic access to gdal_merge.py and the other Python-based utilities?

If not, what is the best suggested way to use this from a Python script? Using subprocess can be quite brittle (I've had lots of issues with paths etc, particularly on Windows machines - and being able to `import gdal` in Python is in no way related to being able to run gdal_merge.py from the shell), but the only other way seems to be to manipulate the path somehow to try and import gdal_merge.py, and then manipulate sys.argv to 'fake' the command-line arguments to gdal_merge.py - which also seems quite brittle.

Any thoughts?

Robin


From even.rouault at spatialys.com  Fri Aug 26 10:36:02 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Aug 2016 19:36:02 +0200
Subject: [gdal-dev] Calling gdal_merge from a Python script
In-Reply-To: <1A249F6F-AC0D-4145-8787-1B0CE7DDA092@rtwilson.com>
References: <1A249F6F-AC0D-4145-8787-1B0CE7DDA092@rtwilson.com>
Message-ID: <1491988.pnU7GfK6iT@even-n550jk>

On Friday 26 August 2016 12:01:15 Robin Wilson wrote:
> Hi,
> 
> I've was very happy to see the RFC 59.1 code merged in GDAL 2.1, allowing
> the use of some of the GDAL command-line utilities from within Python
> without having to 'shell out' using something like the subprocess module.
> 
> I notice that gdal_merge isn't in the list of command-line utilities that
> have been wrapped to be accessed programmatically - and that, in fact, as
> far as I can see none of the Python-based command-line utilities have been
> wrapped.
> 
> Are there any plans to provide programmatic access to gdal_merge.py and the
> other Python-based utilities?

> 
> If not, what is the best suggested way to use this from a Python script?
> Using subprocess can be quite brittle (I've had lots of issues with paths
> etc, particularly on Windows machines - and being able to `import gdal` in
> Python is in no way related to being able to run gdal_merge.py from the
> shell), but the only other way seems to be to manipulate the path somehow
> to try and import gdal_merge.py, and then manipulate sys.argv to 'fake' the
> command-line arguments to gdal_merge.py - which also seems quite brittle.

Robin,

Yes, most Python based utilities are already usable as functions. You should 
be able to "import gdal_merge" (either by tweaking the path or just copying it 
next to your code) and call gdal_merge.main( argv = argv ) where argv is an 
array of the splitted arguments.

That's more or less the approach that has been taken for exposing the C++ 
utilities. Perhaps not the most elegant one, but very easily extensible.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Sat Aug 27 23:33:32 2016
From: bradh at frogmouth.net (Brad Hards)
Date: Sun, 28 Aug 2016 16:33:32 +1000
Subject: [gdal-dev] NITF TRE parsing - possible extensions for MIE4NITF
Message-ID: <000501d200f6$258e6710$70ab3530$@frogmouth.net>

I'm working on implementing Motion Imagery Extensions for NITF (MIE4NITF,
NGA.STND.0044 version 1.1) which adds quite a few TREs.

Some of it is fairly standard, and should merge into GDAL OK.

However there are two issues that are going to require changes:
1. Some of the fields (e.g. MTIMSA) are big endian integer (i.e. binary as
opposed to BCS-N characters), of between 1 and 8 (potentially up to 16, but
not used) bytes. So instead of "15" as two characters (0x31, 0x35), you get
one byte of 0x0F. My proposed change to the schema looks like:
@@ -130,6 +130,7 @@
                     <xs:enumeration value="string"/>
                     <xs:enumeration value="integer"/>
                     <xs:enumeration value="real"/>
+                    <xs:enumeration value="UINT"/>
                 </xs:restriction>
             </xs:simpleType>
         </xs:attribute>

That binary integer format also gets used for near-future CS***B format TREs
(and DES).
There is a similar case in BANDSB, which embeds IEEE-754 format floating
point numbers. I'm not interested in that case yet, but a similar extension
seems likely.

2. There are TREs which have defined length, but the body is just one field
that is "all of it". So length is signalled by CEL. The simplest of these is
FREESA, which basically just padding of 0xFF characters. There are two TREs
(FSYNWA and FASYWA, for TRE format metadata that applies for a single frame
or at a given time) where we need to recurse into them to parse out the
embedded TREs.  Extending the XSD to handle those cases seems too
complicated, so I'm planning to open code the FSYNWA / FASYWA cases, and
ignore FREESA which never has interesting content anyway.

Anyone have strong feeling about this, or suggestions that can make things
easier?

Brad



From ari.jolma at gmail.com  Sun Aug 28 00:48:15 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun, 28 Aug 2016 10:48:15 +0300
Subject: [gdal-dev] Public XYM or XYZM datasets?
In-Reply-To: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
References: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
Message-ID: <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>

The Finnish national road data was my motivation to add M to OGR.

You can download it from

https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu

The page is also in English (click EN on top left)

The "R" data is the one you want.

The meta data etc is probably in Finnish only so you may need to 
experiment. M values are used to encode point-like attribute data into 
the line strings.

Good luck,

Ari


26.08.2016, 01:43, Carl Godkin kirjoitti:
> Hi,
>
> While I had read about XYM and XYZM on the mailing list a few months 
> ago, I had no experience with those geometry types until today when I 
> happened to stumble on
>
> http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip
>
> which contains a shapefile of trails around Boulder, Colorado that has
>     Geometry: Measured Line String
> in GDAL 2.1's ogrinfo.
>
> I would like to find some other datasets with XYM (and/or XYZM) 
> geometry for testing.
>
> I didn't see any associated with the RFC or tickets associated with it.
>
> Can anyone point me to any others?  Thanks very much,
>
> carl
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160828/f45bd349/attachment.html>

From even.rouault at spatialys.com  Sun Aug 28 03:07:51 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Aug 2016 12:07:51 +0200
Subject: [gdal-dev] [OSGeo-Discuss] Help with GDAL EPSGTreatsAsLatLong
In-Reply-To: <CALK+YKMcE6W84cYbpLvWSZvinwtu8rnvurkCdN-b7SPwxwQPSA@mail.gmail.com>
References: <CALK+YKMcE6W84cYbpLvWSZvinwtu8rnvurkCdN-b7SPwxwQPSA@mail.gmail.com>
Message-ID: <201608281207.51256.even.rouault@spatialys.com>

Filipe,

(answering on gdal-dev which is the appropriate place for GDAL specific 
questions)

> Hi,
> 
> I have project on github to convert a map to covjon (https://covjson.org/)
> format, I am now trying
> to get the map axis orientation I am doing it with EPSGTreatsAsLatLong:
> 
> https://github.com/fsvieira/map2covjson/blob/master/map2covjson.cpp#L102
> 
> The problem is that I am always getting 0 (FALSE) to a map that I think it
> should be Lat/Lon.

Your geotiff is using EPSG:32629 as the projected coordinate system. EPSG:32629 
uses easting, northing ordering.

Calling EPSGTreatsAsLatLong() on a projected coordinate system doesn't make 
sense since it is intended for geographic coordinate system

For projected coordinate systems, you should rather call 
EPSGTreatsAsNorthingEasting()  : 
http://www.gdal.org/classOGRSpatialReference.html#a2fe484ea1e7c8e8121b3ae05bb1a1878
which will also return FALSE in that instance.

You can check if a CRS is projected or not with 
OGRSpatialReference::IsProjected() :
http://www.gdal.org/classOGRSpatialReference.html#a1186e3473d7ac2f81ec2ca5d0c4ec027

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Aug 28 03:40:19 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Aug 2016 12:40:19 +0200
Subject: [gdal-dev] NITF TRE parsing - possible extensions for MIE4NITF
In-Reply-To: <000501d200f6$258e6710$70ab3530$@frogmouth.net>
References: <000501d200f6$258e6710$70ab3530$@frogmouth.net>
Message-ID: <201608281240.19478.even.rouault@spatialys.com>

Brad,
> 
> However there are two issues that are going to require changes:
> 1. Some of the fields (e.g. MTIMSA) are big endian integer (i.e. binary as
> opposed to BCS-N characters), of between 1 and 8 (potentially up to 16, but
> not used) bytes. So instead of "15" as two characters (0x31, 0x35), you get
> one byte of 0x0F. My proposed change to the schema looks like:
> @@ -130,6 +130,7 @@
>                      <xs:enumeration value="string"/>
>                      <xs:enumeration value="integer"/>
>                      <xs:enumeration value="real"/>
> +                    <xs:enumeration value="UINT"/>
>                  </xs:restriction>
>              </xs:simpleType>
>          </xs:attribute>
> 

Is the UINT naming somewhat standardized ? Otherwise perhaps uint_be to reflect 
that it is binary encoded with big endianness (contrary to integer)

> 2. There are TREs which have defined length, but the body is just one field
> that is "all of it". So length is signalled by CEL. The simplest of these
> is FREESA, which basically just padding of 0xFF characters. There are two
> TREs (FSYNWA and FASYWA, for TRE format metadata that applies for a single
> frame or at a given time) where we need to recurse into them to parse out
> the embedded TREs.  Extending the XSD to handle those cases seems too
> complicated, so I'm planning to open code the FSYNWA / FASYWA cases, and
> ignore FREESA which never has interesting content anyway.

Not sure to have understood the structure of those TREs and couldn't find any 
public resource describing them.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Sun Aug 28 04:25:07 2016
From: bradh at frogmouth.net (Brad Hards)
Date: Sun, 28 Aug 2016 21:25:07 +1000
Subject: [gdal-dev] NITF TRE parsing - possible extensions for MIE4NITF
In-Reply-To: <201608281240.19478.even.rouault@spatialys.com>
References: <000501d200f6$258e6710$70ab3530$@frogmouth.net>
 <201608281240.19478.even.rouault@spatialys.com>
Message-ID: <001101d2011e$e1edcb30$a5c96190$@frogmouth.net>

MIE4NITF 1.1 can be downloaded from 
https://nsgreg.nga.mil/NSGDOC/files/doc/Document/MIE4NITF%20v%201_1.zip
(see https://nsgreg.nga.mil/doc/view?i=4205 for info).

> Is the UINT naming somewhat standardized ? Otherwise perhaps uint_be to
> reflect
> that it is binary encoded with big endianness (contrary to integer)

I can live with either.

The spec says:
5.9.2 MIE4NITF defined data types
MIE4NITF defines several data types that are used within its TREs. These data 
types are defined in this section. Table 8 introduces an unsigned integer type 
that is used in the MIE4NITF TREs. The UINTn nomenclature is somewhat 
standardized in the computing world but it is included here to unambiguously 
define its use. All bytes in the UINTn data type are stored in big endian 
order and all bits within those bytes are stored most significant bit first.

> Not sure to have understood the structure of those TREs and couldn't find 
> any
> public resource describing them.
Sorry, should have linked to those in the initial email. In the spec (above), 
see
5.9.3.6 Freespace TRE (FREESA)
5.9.4.8 Frame-Synchronous Metadata Wrapper TRE (FSYNWA)
5.9.4.9 Frame-Asynchronous Metadata Wrapper TRE (FASYWA)

I would caution that it's a bit confusing the first time.

Brad





From even.rouault at spatialys.com  Sun Aug 28 05:46:39 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Aug 2016 14:46:39 +0200
Subject: [gdal-dev] NITF TRE parsing - possible extensions for MIE4NITF
In-Reply-To: <001101d2011e$e1edcb30$a5c96190$@frogmouth.net>
References: <000501d200f6$258e6710$70ab3530$@frogmouth.net>
 <201608281240.19478.even.rouault@spatialys.com>
 <001101d2011e$e1edcb30$a5c96190$@frogmouth.net>
Message-ID: <201608281446.40032.even.rouault@spatialys.com>

Le dimanche 28 août 2016 13:25:07, Brad Hards a écrit :
> MIE4NITF 1.1 can be downloaded from
> https://nsgreg.nga.mil/NSGDOC/files/doc/Document/MIE4NITF%20v%201_1.zip
> (see https://nsgreg.nga.mil/doc/view?i=4205 for info).

Note for others: direct download link doesn't work, unless you add "Host: 
nsgreg.nga.mil" and "Referer: https://nsgreg.nga.mil/doc/view?i=4205" headers.

> 
> > Is the UINT naming somewhat standardized ? Otherwise perhaps uint_be to
> > reflect
> > that it is binary encoded with big endianness (contrary to integer)
> 
> I can live with either.
> 
> The spec says:
> 5.9.2 MIE4NITF defined data types
> MIE4NITF defines several data types that are used within its TREs. These
> data types are defined in this section. Table 8 introduces an unsigned
> integer type that is used in the MIE4NITF TREs. The UINTn nomenclature is
> somewhat standardized in the computing world but it is included here to
> unambiguously define its use. All bytes in the UINTn data type are stored
> in big endian order and all bits within those bytes are stored most
> significant bit first.

ok, as the UINT name comes from this doc, let's keep it (perhaps with a 
comment in the xsd to explain the difference with the integer type)

> 
> > Not sure to have understood the structure of those TREs and couldn't find
> > any
> > public resource describing them.
> 
> Sorry, should have linked to those in the initial email. In the spec
> (above), see
> 5.9.3.6 Freespace TRE (FREESA)
> 5.9.4.8 Frame-Synchronous Metadata Wrapper TRE (FSYNWA)
> 5.9.4.9 Frame-Asynchronous Metadata Wrapper TRE (FASYWA)
> 
> I would caution that it's a bit confusing the first time.

OK, that's clearer with the doc. When you say "I'm planning to open code the 
FSYNWA / FASYWA case", do you mean hard-code ? Sounds OK. Could still be 
retrofitted later into something more general purpose if such constructs are 
found to be common.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Aug 28 07:31:54 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Aug 2016 16:31:54 +0200
Subject: [gdal-dev] Removing bridge/ and vb6/ from source tree ?
Message-ID: <201608281631.54685.even.rouault@spatialys.com>

Hi,

We have the bridge and vb6 directories in the source tree that are probably no 
longer used by anyone (I don't recall any tickets or questions in recent years 
regarding those 2 topics), but I would be interested in hearing opinions in 
case someone still uses them (they are not part of default build scripts, so 
there's a chance they might even not build currently)

The only description of what "bridge" is I could find is : 
https://lists.osgeo.org/pipermail/gdal-dev/1999-May/002942.html , so basically 
it is a way of using the GDAL API through dlopen()/GetProcAddress() 
mechanisms. It seems this was developed primarily for the LIMP software, but 
that one doesn't seem to be around anymore.

Regarding VB6 bindings, of course VB6 itself is completely obsolete and no 
longer available at Microsoft. From 
https://en.wikipedia.org/wiki/Visual_Basic, seems that legacy VB6 applications 
could perhaps still run in recent Windows versions (not completely clear 
however)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Sun Aug 28 15:41:18 2016
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 29 Aug 2016 08:41:18 +1000
Subject: [gdal-dev] NITF TRE parsing - possible extensions for MIE4NITF
In-Reply-To: <201608281446.40032.even.rouault@spatialys.com>
References: <000501d200f6$258e6710$70ab3530$@frogmouth.net>
 <201608281240.19478.even.rouault@spatialys.com>
 <001101d2011e$e1edcb30$a5c96190$@frogmouth.net>
 <201608281446.40032.even.rouault@spatialys.com>
Message-ID: <003901d2017d$5754ca00$05fe5e00$@frogmouth.net>

> > Sorry, should have linked to those in the initial email. In the spec
> > (above), see
> > 5.9.3.6 Freespace TRE (FREESA)
> > 5.9.4.8 Frame-Synchronous Metadata Wrapper TRE (FSYNWA)
> > 5.9.4.9 Frame-Asynchronous Metadata Wrapper TRE (FASYWA)
> >
> > I would caution that it's a bit confusing the first time.
>
> OK, that's clearer with the doc. When you say "I'm planning to open code the
> FSYNWA / FASYWA case", do you mean hard-code ? Sounds OK. Could still be
> retrofitted later into something more general purpose if such constructs are
> found to be common.
Yes to the question about hard-coding it.

I haven't look into the nitffile.c enough to have a patch, but the two wrapper 
TREs should be similar, except for the labelling.
I'll keep the handling in a separate function to make it easier to handle in 
the future if needed.

Brad



From cgodkin at gmail.com  Sun Aug 28 15:43:36 2016
From: cgodkin at gmail.com (Carl Godkin)
Date: Sun, 28 Aug 2016 15:43:36 -0700
Subject: [gdal-dev] Public XYM or XYZM datasets?
In-Reply-To: <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>
References: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
 <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>
Message-ID: <CAE=8km=K0DPSm8oLeaUYzyLj-iHXfa7GWHQB6tysotn_HUD9EQ@mail.gmail.com>

Thank you very much for the response.  (This isn't the first time I've
found great example data from Finland, by the way.  When I was
experimenting with Lidar data a few years ago I found that Finland's
collection was enormous!)

However, I can't see what you mean by the "R" data.  I selected various
"Map Layers" and downloaded a few random shapefiles and none had "Measured"
geometry (according to ogrinfo).

Thanks for your help.  Sorry if this is a dumb question!

carl


On Sun, Aug 28, 2016 at 12:48 AM, Ari Jolma <ari.jolma at gmail.com> wrote:

> The Finnish national road data was my motivation to add M to OGR.
>
> You can download it from
>
> https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu
> The page is also in English (click EN on top left)
>
> The "R" data is the one you want.
>
> The meta data etc is probably in Finnish only so you may need to
> experiment. M values are used to encode point-like attribute data into the
> line strings.
>
> Good luck,
>
> Ari
>
> 26.08.2016, 01:43, Carl Godkin kirjoitti:
>
> Hi,
>
> While I had read about XYM and XYZM on the mailing list a few months ago,
> I had no experience with those geometry types until today when I happened
> to stumble on
>
> http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip
>
> which contains a shapefile of trails around Boulder, Colorado that has
>     Geometry: Measured Line String
> in GDAL 2.1's ogrinfo.
>
> I would like to find some other datasets with XYM (and/or XYZM) geometry
> for testing.
>
> I didn't see any associated with the RFC or tickets associated with it.
>
> Can anyone point me to any others?  Thanks very much,
>
> carl
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160828/cf581277/attachment.html>

From schwehr at gmail.com  Sun Aug 28 20:30:03 2016
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 28 Aug 2016 20:30:03 -0700
Subject: [gdal-dev] Removing bridge/ and vb6/ from source tree ?
In-Reply-To: <201608281631.54685.even.rouault@spatialys.com>
References: <201608281631.54685.even.rouault@spatialys.com>
Message-ID: <CACmBxyvPO61Qv9tjeBFfxBuVC7K5aEF52NuqbG2RAMu_c=6j=g@mail.gmail.com>

+1 for removing from trunk head if nobody speaks up.

On Sunday, August 28, 2016, Even Rouault <even.rouault at spatialys.com> wrote:

> Hi,
>
> We have the bridge and vb6 directories in the source tree that are
> probably no
> longer used by anyone (I don't recall any tickets or questions in recent
> years
> regarding those 2 topics), but I would be interested in hearing opinions in
> case someone still uses them (they are not part of default build scripts,
> so
> there's a chance they might even not build currently)
>
> The only description of what "bridge" is I could find is :
> https://lists.osgeo.org/pipermail/gdal-dev/1999-May/002942.html , so
> basically
> it is a way of using the GDAL API through dlopen()/GetProcAddress()
> mechanisms. It seems this was developed primarily for the LIMP software,
> but
> that one doesn't seem to be around anymore.
>
> Regarding VB6 bindings, of course VB6 itself is completely obsolete and no
> longer available at Microsoft. From
> https://en.wikipedia.org/wiki/Visual_Basic, seems that legacy VB6
> applications
> could perhaps still run in recent Windows versions (not completely clear
> however)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <javascript:;>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160828/56113eb4/attachment.html>

From ari.jolma at gmail.com  Sun Aug 28 22:15:36 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 29 Aug 2016 08:15:36 +0300
Subject: [gdal-dev] Public XYM or XYZM datasets?
In-Reply-To: <CAE=8km=K0DPSm8oLeaUYzyLj-iHXfa7GWHQB6tysotn_HUD9EQ@mail.gmail.com>
References: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
 <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>
 <CAE=8km=K0DPSm8oLeaUYzyLj-iHXfa7GWHQB6tysotn_HUD9EQ@mail.gmail.com>
Message-ID: <c4595eda-7ddf-d340-4b7b-4648551e237e@gmail.com>

In the download email you should have K and R data set options (two 
URLs). Only R has measured geometries.

Ari


29.08.2016, 01:43, Carl Godkin kirjoitti:
> Thank you very much for the response.  (This isn't the first time I've 
> found great example data from Finland, by the way.  When I was 
> experimenting with Lidar data a few years ago I found that Finland's 
> collection was enormous!)
>
> However, I can't see what you mean by the "R" data.  I selected 
> various "Map Layers" and downloaded a few random shapefiles and none 
> had "Measured" geometry (according to ogrinfo).
>
> Thanks for your help.  Sorry if this is a dumb question!
>
> carl
>
>
> On Sun, Aug 28, 2016 at 12:48 AM, Ari Jolma <ari.jolma at gmail.com 
> <mailto:ari.jolma at gmail.com>> wrote:
>
>     The Finnish national road data was my motivation to add M to OGR.
>
>     You can download it from
>
>     https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu
>     <https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu>
>
>     The page is also in English (click EN on top left)
>
>     The "R" data is the one you want.
>
>     The meta data etc is probably in Finnish only so you may need to
>     experiment. M values are used to encode point-like attribute data
>     into the line strings.
>
>     Good luck,
>
>     Ari
>
>
>     26.08.2016, 01:43, Carl Godkin kirjoitti:
>>     Hi,
>>
>>     While I had read about XYM and XYZM on the mailing list a few
>>     months ago, I had no experience with those geometry types until
>>     today when I happened to stumble on
>>
>>     http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip
>>     <http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip>
>>
>>     which contains a shapefile of trails around Boulder, Colorado
>>     that has
>>         Geometry: Measured Line String
>>     in GDAL 2.1's ogrinfo.
>>
>>     I would like to find some other datasets with XYM (and/or XYZM)
>>     geometry for testing.
>>
>>     I didn't see any associated with the RFC or tickets associated
>>     with it.
>>
>>     Can anyone point me to any others?  Thanks very much,
>>
>>     carl
>>
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>     _______________________________________________ gdal-dev mailing
>     list gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev> 
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160829/3339457c/attachment-0001.html>

From rbarnes at umn.edu  Mon Aug 29 13:48:26 2016
From: rbarnes at umn.edu (Richard Barnes)
Date: Mon, 29 Aug 2016 13:48:26 -0700
Subject: [gdal-dev] Arc File Geodatabase
In-Reply-To: <CAEW=KS5SPf4T4OD=y=tbn5tN3PTKt8_THnaT7D2G7aiUZ-eMUA@mail.gmail.com>
References: <mailman.0.1471771355.19602.gdal-dev@lists.osgeo.org>
 <76d971e9-f322-3553-c8e8-93180502c44c@umn.edu>
 <201608211301.14601.even.rouault@spatialys.com>
 <CAEW=KS5SPf4T4OD=y=tbn5tN3PTKt8_THnaT7D2G7aiUZ-eMUA@mail.gmail.com>
Message-ID: <57f87818-5f1b-db83-7599-202a31c46c31@umn.edu>

I'm not sure that I have time to do a full integration with GDAL. But I 
did continue my previous line of work far enough that I now have a 
decent program for extracting the raster data into GeoTIFFs. It's 
available at: https://github.com/r-barnes/ArcRasterRescue

It seems each raster is associated with five gdbtables. From these the 
program makes a best effort to obtain a CRS WKT and geotransform. It 
also determines the data type and performs endian conversion. 
Decompression is still limited to LZ77 and uncompressed formats.

Best regards,
Richard

On 08/21/2016 05:17 AM, James Ramm wrote:
> Yes, there is some form 2d index - each raster has a corresponding 
> .col_index.atx, .row_index.atx, _.blk_key_index.atx and 
> .band_index.atx files. I've not looke at how they work together so far.
>
>
>
> On Sunday, 21 August 2016, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi Richard,
>
>     > I saw a posting from July
>     >
>     <https://lists.osgeo.org/pipermail/gdal-dev/2016-July/044761.html
>     <https://lists.osgeo.org/pipermail/gdal-dev/2016-July/044761.html>>
>     about
>     > work towards deciphering the Arc File Geodatabase Raster format.
>     >
>     > Inspired, I did some work today and successfully extracted a
>     raster from
>     > a geodatabase.
>     >
>     > Using Even Rouault's /dump_gdbtable/ as a starting point, I
>     decompressed
>     > the raster blobs using zlib, as suggested in the posting.
>     >
>     > For my raster, this gave 128x128 big-endian 32-bit
>     floating-point values
>     > with a trailer of about 512 bytes.
>     >
>     > Assembling these 128x128 tiles using the col_nbr and row_nbr fields
>     > resulted in the raster coming out.
>     >
>     > I've uploaded my fork, along with appropriate input data and a
>     command
>     > to run it all (see README.md) to
>     https://github.com/r-barnes/dump_gdbtable
>     <https://github.com/r-barnes/dump_gdbtable>.
>     >
>     > What remains is to link metadata (block size, band_width,
>     band_height)
>     > to the raster so the output can be sized appropriately, the data
>     type
>     > deduced automatically, and projections saved. This is probably
>     just a
>     > matter of linking the appropriate rows from some of the
>     lower-numbered
>     > gdbtables with the files containing the raster data. It might
>     also be
>     > nice to determine whether zlib is always being used, but I assume an
>     > error could be thrown if an unexpected compression format is
>     encountered.
>
>     One can expect other compression formats according to :
>     http://desktop.arcgis.com/en/arcmap/10.3/manage-data/raster-and-images/raster-compression.htm
>     <http://desktop.arcgis.com/en/arcmap/10.3/manage-data/raster-and-images/raster-compression.htm>
>     None of them seem to be particularly difficult given what GDAL
>     supports ("raw" RLE and "raw" LZW
>     would probably require a bit more work as there is no direct
>     drivers that support them, although they
>     are codecs of some other GDAL drivers like TIFF, and so could be
>     perhaps wrapped on the fly in a in-memory TIFF)
>
>     What they call LZ77 must be the ZLib one (according to
>     https://en.wikipedia.org/wiki/Zlib
>     <https://en.wikipedia.org/wiki/Zlib> ZLib's DEFLATE is a modified
>     LZ77)
>
>     >
>     > I'm interested in seeing GDAL include the ability to translate
>     Arc File
>     > Geodatabase Rasters into other (less proprietary) formats.
>     > What is a good way to move forward with that?
>
>     "A bit" of coding !
>     ogr/ogrsf_frmts/openfilegdb/filegdbtable.cpp should probably be
>     extended to offer
>     the low level access to the rasters.
>     And ogropenfilegdbdatasource.cpp to implement the GDAL Raster API
>     using the above.
>     Regarding efficiency of random reading of tiles, I'm wondering if
>     they have some form of 2D (row, column)
>     indexing or perhaps 3D (row, column, pyramid_level). For the
>     vector part, I only addressed the case
>     of 1D indexes.
>     As a fallback sequential reading through the records could still
>     be used, perhaps with some tricks to read only the start
>     of the records to get the (row, column, pyramid_level) values, if
>     located at the beginning of it,
>     and not the raster data if not needed.
>
>     Even
>
>     >
>     > Best regards,
>     > Richard Barnes
>
>     --
>     Spatialys - Geospatial professional services
>     http://www.spatialys.com
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <javascript:;>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160829/20d11389/attachment.html>

From ari.jolma at gmail.com  Tue Aug 30 02:04:04 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 30 Aug 2016 12:04:04 +0300
Subject: [gdal-dev] PostGIS layer SRS
Message-ID: <d3ab59f1-de3b-198a-2258-ea170fef2d2a@gmail.com>

Hi,

How does one set the SRS of a new PostGIS layer (especially from the 
bindings)? It does not seem to work with simply setting it with the 
workflow: get geometry field definition and call SetSpatialRef on it.

It is quite simple with UpdateGeometrySRID() in SQL but it would be of 
course useful to be able to do it from the bindings.

Ari



From even.rouault at spatialys.com  Tue Aug 30 02:15:50 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Aug 2016 11:15:50 +0200
Subject: [gdal-dev] PostGIS layer SRS
In-Reply-To: <d3ab59f1-de3b-198a-2258-ea170fef2d2a@gmail.com>
References: <d3ab59f1-de3b-198a-2258-ea170fef2d2a@gmail.com>
Message-ID: <201608301115.50758.even.rouault@spatialys.com>

Hi Ari,

> 
> How does one set the SRS of a new PostGIS layer (especially from the
> bindings)?

With the srs parameter of Dataset.CreateLayer()

> It does not seem to work with simply setting it with the
> workflow: get geometry field definition and call SetSpatialRef on it.

Once the geometry field is created, it is too late, and any attempt to modify 
it will have no effect on how it is serialized.

But if you call AddGeomFieldDefn() (for layers with multiple geometry columns) 
with a geometry field definition that has the SRS set, that should be used too 
to record it in the DB.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Tue Aug 30 04:33:56 2016
From: bradh at frogmouth.net (Brad Hards)
Date: Tue, 30 Aug 2016 21:33:56 +1000
Subject: [gdal-dev] Fwd: [TC-Announce] Request for early implementations
	-	GeoPackage 1.0
In-Reply-To: <201608172134.21206.even.rouault@spatialys.com>
References: <201608172134.21206.even.rouault@spatialys.com>
Message-ID: <005f01d202b2$65b28c00$3117a400$@frogmouth.net>

I did some tests, and it looks like we'll need some code changes to pass.

There is a trivial schema fix for timestamps ('now' instead of 
CURRENT_TIMESTAMP).

There is a more complicated fix needed for
Requirement 45 which says:
    The width of a tile matrix (the difference between min_x and max_x in 
gpkg_tile_matrix_set) SHALL equal the product of matrix_width, tile_width, and 
pixel_x_size for that zoom level. Similarly, height of a tile matrix (the 
difference between min_y and max_y in gpkg_tile_matrix_set) SHALL equal the 
product of matrix_height, tile_height, and pixel_y_size for that zoom level.

That isn't true if we are doing something that doesn't fill the entire matrix 
(e.g. we only need 20 blocks instead of 32 at zoom level 5. Still trying to 
find a fix that works cleanly in a non-power of 2 matrix.

Brad




From howard at hobu.co  Tue Aug 30 06:19:53 2016
From: howard at hobu.co (Howard Butler)
Date: Tue, 30 Aug 2016 08:19:53 -0500
Subject: [gdal-dev] Removing bridge/ and vb6/ from source tree ?
In-Reply-To: <CACmBxyvPO61Qv9tjeBFfxBuVC7K5aEF52NuqbG2RAMu_c=6j=g@mail.gmail.com>
References: <201608281631.54685.even.rouault@spatialys.com>
 <CACmBxyvPO61Qv9tjeBFfxBuVC7K5aEF52NuqbG2RAMu_c=6j=g@mail.gmail.com>
Message-ID: <6B595FA3-16D9-45D9-B9F5-B5A44224BFA3@hobu.co>

+1


> On Aug 28, 2016, at 10:30 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
> 
> +1 for removing from trunk head if nobody speaks up. 
> 
> On Sunday, August 28, 2016, Even Rouault <even.rouault at spatialys.com> wrote:
> Hi,
> 
> We have the bridge and vb6 directories in the source tree that are probably no
> longer used by anyone (I don't recall any tickets or questions in recent years
> regarding those 2 topics), but I would be interested in hearing opinions in
> case someone still uses them (they are not part of default build scripts, so
> there's a chance they might even not build currently)
> 
> The only description of what "bridge" is I could find is :
> https://lists.osgeo.org/pipermail/gdal-dev/1999-May/002942.html , so basically
> it is a way of using the GDAL API through dlopen()/GetProcAddress()
> mechanisms. It seems this was developed primarily for the LIMP software, but
> that one doesn't seem to be around anymore.
> 
> Regarding VB6 bindings, of course VB6 itself is completely obsolete and no
> longer available at Microsoft. From
> https://en.wikipedia.org/wiki/Visual_Basic, seems that legacy VB6 applications
> could perhaps still run in recent Windows versions (not completely clear
> however)
> 
> Even
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> -- 
> --
> http://schwehr.org
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Tue Aug 30 06:33:52 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Aug 2016 15:33:52 +0200
Subject: [gdal-dev]
 =?utf-8?q?Fwd=3A_=5BTC-Announce=5D_Request_for_early_i?=
 =?utf-8?q?mplementations_-=09GeoPackage_1=2E0?=
In-Reply-To: <005f01d202b2$65b28c00$3117a400$@frogmouth.net>
References: <201608172134.21206.even.rouault@spatialys.com>
 <005f01d202b2$65b28c00$3117a400$@frogmouth.net>
Message-ID: <201608301533.52928.even.rouault@spatialys.com>

Brad,

> I did some tests, and it looks like we'll need some code changes to pass.

Thanks for looking at this.

> 
> There is a trivial schema fix for timestamps ('now' instead of
> CURRENT_TIMESTAMP).

Seems related to that change I found in the revision history (the last one 
made apparently before promoting to final 1.0.0):

2014-01-28 R10 Paul Daisey 1.1.3.1.1, 2.4.3.1.1,
Annex C, Annex H
strftime('%Y-%m-%dT%H:%M:%fZ',
CURRENT_TIMESTAMP) changed to
strftime('%Y-%m-%dT%H:%M:%fZ','now')

> 
> There is a more complicated fix needed for
> Requirement 45 which says:
>     The width of a tile matrix (the difference between min_x and max_x in
> gpkg_tile_matrix_set) SHALL equal the product of matrix_width, tile_width,
> and pixel_x_size for that zoom level. Similarly, height of a tile matrix
> (the difference between min_y and max_y in gpkg_tile_matrix_set) SHALL
> equal the product of matrix_height, tile_height, and pixel_y_size for that
> zoom level.
> 
> That isn't true if we are doing something that doesn't fill the entire
> matrix (e.g. we only need 20 blocks instead of 32 at zoom level 5. 

Hum, indeed I guess FinalizeRasterRegistration() could be fixed so that all 
zoom levels have matrix_width and matrix_height being power of 2.

> Still
> trying to find a fix that works cleanly in a non-power of 2 matrix.

I don't think it is possible in the general case to fulfill the requirement 
with non-power of 2 pyramids, at least in a reasonable way:

For example, if the initial situation is :
zoom_level=0, matrix_width=matrix_height=1, pixel_x_size=pixel_y_size=4
zoom_level=1,matrix_width=matrix_height=2, pixel_x_size=pixel_y_size=2
zoom_level=2,matrix_width=matrix_height=4, pixel_x_size=pixel_y_size=1

And you add an overview of factor 3, then you'll need to change this to be :
zoom_level=0, matrix_width=matrix_height=1, pixel_x_size=pixel_y_size=4
zoom_level=1, matrix_width=matrix_height=???, pixel_x_size=pixel_y_size=3
zoom_level=2,matrix_width=matrix_height=2, pixel_x_size=pixel_y_size=2
zoom_level=3,matrix_width=matrix_height=4, pixel_x_size=pixel_y_size=1

Currently we must replace ??? by 2.

Of course you can still fix things by altering the matrix_width/_height so that 
zoom_level=3 is both a multiple of a power of 2 and a multiple of a power of 3 
(and also changing min_x,_y,max_x,max_y in gpkg_tile_matrix_set):

zoom_level=0, matrix_width=matrix_height=1, pixel_x_size=pixel_y_size=4
zoom_level=1, matrix_width=matrix_height=4, pixel_x_size=pixel_y_size=3
zoom_level=2,matrix_width=matrix_height=6, pixel_x_size=pixel_y_size=2
zoom_level=3,matrix_width=matrix_height=12, pixel_x_size=pixel_y_size=1

But that's completely non-sense since the extent will be completely wrong.
So I think this requirement is disputable.


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Tue Aug 30 06:35:59 2016
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 30 Aug 2016 16:35:59 +0300
Subject: [gdal-dev] Public XYM or XYZM datasets?
In-Reply-To: <D47D4534-1B70-4218-9CC9-2A6769ED53A9@nutiteq.com>
References: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
 <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>
 <CAE=8km=K0DPSm8oLeaUYzyLj-iHXfa7GWHQB6tysotn_HUD9EQ@mail.gmail.com>
 <c4595eda-7ddf-d340-4b7b-4648551e237e@gmail.com>
 <D47D4534-1B70-4218-9CC9-2A6769ED53A9@nutiteq.com>
Message-ID: <5506b92e-3c77-1844-f9f7-eda6ffd1a779@gmail.com>

I think you need to select "DIGIROAD" on the left first. Then you should 
get something like

> Hi,
>
> Your selected digiroad data sets from the Finnish Transport Agency are 
> available at the following link:
> https://extranet.liikennevirasto.fi/livi/digiroad/Maakuntajako_DIGIROAD_K_EUREF-FIN/UUSIMAA.zip
> https://extranet.liikennevirasto.fi/livi/digiroad/Maakuntajako_DIGIROAD_R_EUREF-FIN/UUSIMAA.zip
>
>
> The download link is valid for 10 days. For further information,please 
> contact us at
> Paikkatieto at liikennevirasto.fi
> Do not reply to this email.
> Thank you for your order!
>
> The data set descriptions are available at:
> http://www.liikennevirasto.fi/avoindata/tietoaineistot
>
> Digiroad materialföljebrev hittas på Digiroads hemsida: 
> http://www.digiroad.fi/dokumentit/sv_SE/foljebrev/ 

It seems that these shapefiles have M:

1: DR_LINKKI (3D Measured Line String)
1: DR_NOPEUSRAJOITUS (3D Measured Line String)
1: DR_SUURIN_SALLITTU_AKSELIMASSA (3D Measured Line String)
1: DR_SUURIN_SALLITTU_KORKEUS (3D Measured Line String)
1: DR_SUURIN_SALLITTU_MASSA (3D Measured Line String)
1: DR_SUURIN_SALLITTU_PITUUS (3D Measured Line String)
1: DR_SUURIN_SALLITTU_TELIMASSA (3D Measured Line String)
1: DR_VALAISTU_TIE (3D Measured Line String)
1: DR_YHDISTELMAN_SUURIN_SALLITTU_MASSA (3D Measured Line String)

Sorry, in Finnish. For example "DR_NOPEUSRAJOITUS" probably has the 
speed limit on the road as M.

Ari


30.08.2016, 16:27, Jaak Laineste kirjoitti:
>
>
> It looks like I get only one link with some selected layers. Which 
> layers are worth to try?
>
> /Your selected spatial data sets from the Finnish Transport Agency are 
> available at the following link:
> https://extranet.liikennevirasto.fi/livi/inspire-downloads/41...zip
>
> The download link is valid for 10 days. For further information,please 
> contact us at
> /
>
> Jaak
>> On 29 Aug 2016, at 08:15, Ari Jolma <ari.jolma at gmail.com 
>> <mailto:ari.jolma at gmail.com>> wrote:
>>
>> In the download email you should have K and R data set options (two 
>> URLs). Only R has measured geometries.
>>
>> Ari
>>
>>
>> 29.08.2016, 01:43, Carl Godkin kirjoitti:
>>> Thank you very much for the response.  (This isn't the first time 
>>> I've found great example data from Finland, by the way.  When I was 
>>> experimenting with Lidar data a few years ago I found that Finland's 
>>> collection was enormous!)
>>>
>>> However, I can't see what you mean by the "R" data.  I selected 
>>> various "Map Layers" and downloaded a few random shapefiles and none 
>>> had "Measured" geometry (according to ogrinfo).
>>>
>>> Thanks for your help.  Sorry if this is a dumb question!
>>>
>>> carl
>>>
>>>
>>> On Sun, Aug 28, 2016 at 12:48 AM, Ari Jolma <ari.jolma at gmail.com 
>>> <mailto:ari.jolma at gmail.com>> wrote:
>>>
>>>     The Finnish national road data was my motivation to add M to OGR.
>>>
>>>     You can download it from
>>>
>>>     https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu
>>>     <https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu>
>>>
>>>     The page is also in English (click EN on top left)
>>>
>>>     The "R" data is the one you want.
>>>
>>>     The meta data etc is probably in Finnish only so you may need to
>>>     experiment. M values are used to encode point-like attribute
>>>     data into the line strings.
>>>
>>>     Good luck,
>>>
>>>     Ari
>>>
>>>
>>>     26.08.2016, 01:43, Carl Godkin kirjoitti:
>>>>     Hi,
>>>>
>>>>     While I had read about XYM and XYZM on the mailing list a few
>>>>     months ago, I had no experience with those geometry types until
>>>>     today when I happened to stumble on
>>>>
>>>>     http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip
>>>>     <http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip>
>>>>
>>>>     which contains a shapefile of trails around Boulder, Colorado
>>>>     that has
>>>>         Geometry: Measured Line String
>>>>     in GDAL 2.1's ogrinfo.
>>>>
>>>>     I would like to find some other datasets with XYM (and/or XYZM)
>>>>     geometry for testing.
>>>>
>>>>     I didn't see any associated with the RFC or tickets associated
>>>>     with it.
>>>>
>>>>     Can anyone point me to any others?  Thanks very much,
>>>>
>>>>     carl
>>>>
>>>>
>>>>
>>>>
>>>>     _______________________________________________
>>>>     gdal-dev mailing list
>>>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>     _______________________________________________ gdal-dev mailing
>>>     list gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev> 
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________ gdal-dev mailing list 
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/1e63a2ce/attachment.html>

From jaak at nutiteq.com  Tue Aug 30 06:27:42 2016
From: jaak at nutiteq.com (Jaak Laineste)
Date: Tue, 30 Aug 2016 16:27:42 +0300
Subject: [gdal-dev] Public XYM or XYZM datasets?
In-Reply-To: <c4595eda-7ddf-d340-4b7b-4648551e237e@gmail.com>
References: <CAE=8kmkVsnzysk+LQXNbCG9_oiXOsAPOQkPMopfFt=JtGnd=ow@mail.gmail.com>
 <1e21c036-f7a6-5245-85c2-471fd32eba65@gmail.com>
 <CAE=8km=K0DPSm8oLeaUYzyLj-iHXfa7GWHQB6tysotn_HUD9EQ@mail.gmail.com>
 <c4595eda-7ddf-d340-4b7b-4648551e237e@gmail.com>
Message-ID: <D47D4534-1B70-4218-9CC9-2A6769ED53A9@nutiteq.com>



It looks like I get only one link with some selected layers. Which layers are worth to try?

Your selected spatial data sets from the Finnish Transport Agency are available at the following link:
https://extranet.liikennevirasto.fi/livi/inspire-downloads/41...zip

The download link is valid for 10 days. For further information,please contact us at

Jaak
> On 29 Aug 2016, at 08:15, Ari Jolma <ari.jolma at gmail.com> wrote:
> 
> In the download email you should have K and R data set options (two URLs). Only R has measured geometries.
> 
> Ari
> 
> 29.08.2016, 01:43, Carl Godkin kirjoitti:
>> Thank you very much for the response.  (This isn't the first time I've found great example data from Finland, by the way.  When I was experimenting with Lidar data a few years ago I found that Finland's collection was enormous!)
>> 
>> However, I can't see what you mean by the "R" data.  I selected various "Map Layers" and downloaded a few random shapefiles and none had "Measured" geometry (according to ogrinfo).
>> 
>> Thanks for your help.  Sorry if this is a dumb question!
>> 
>> carl
>> 
>> 
>> On Sun, Aug 28, 2016 at 12:48 AM, Ari Jolma <ari.jolma at gmail.com <mailto:ari.jolma at gmail.com>> wrote:
>> The Finnish national road data was my motivation to add M to OGR.
>> 
>> You can download it from 
>> https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu <https://extranet.liikennevirasto.fi/extranet/web/public/latauspalvelu>The page is also in English (click EN on top left)
>> 
>> The "R" data is the one you want. 
>> 
>> The meta data etc is probably in Finnish only so you may need to experiment. M values are used to encode point-like attribute data into the line strings.
>> 
>> Good luck,
>> Ari
>> 
>> 26.08.2016, 01:43, Carl Godkin kirjoitti:
>>> Hi,
>>> 
>>> While I had read about XYM and XYZM on the mailing list a few months ago, I had no experience with those geometry types until today when I happened to stumble on 
>>> 
>>> http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip <http://www-static.bouldercolorado.gov/docs/opendata/OSMPTrails.zip>
>>> 
>>> which contains a shapefile of trails around Boulder, Colorado that has 
>>>     Geometry: Measured Line String
>>> in GDAL 2.1's ogrinfo.
>>> 
>>> I would like to find some other datasets with XYM (and/or XYZM) geometry for testing.  
>>> 
>>> I didn't see any associated with the RFC or tickets associated with it.
>>> 
>>> Can anyone point me to any others?  Thanks very much,
>>> 
>>> carl
>>> 
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev <http://lists.osgeo.org/mailman/listinfo/gdal-dev>_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/gdal-dev <http://lists.osgeo.org/mailman/listinfo/gdal-dev> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev <http://lists.osgeo.org/mailman/listinfo/gdal-dev>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/a13a27e3/attachment-0001.html>

From evan at avenza.com  Tue Aug 30 07:09:23 2016
From: evan at avenza.com (Evan Zhou)
Date: Tue, 30 Aug 2016 10:09:23 -0400
Subject: [gdal-dev] about rotated geotransfmrm supporting of gpkg
Message-ID: <4D685B58-EEC6-4ADD-AD01-861467152DC7@avenza.com>

Hi, brothers, 

	I am in a project that try to support geopackage files by using GDAL and when we were testing found GDAL don’t support rotated map. the code at:

	see:  https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp <https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp>

	

	my question is how to support rotated map. I don’t want to rotate all raster tiles to north-up :(, this too sad.

	I need your help. Please

Yours, 

Evan.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/6c1a20e9/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-1.tiff
Type: image/tiff
Size: 25222 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/6c1a20e9/attachment-0001.tiff>

From even.rouault at spatialys.com  Tue Aug 30 07:22:35 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Aug 2016 16:22:35 +0200
Subject: [gdal-dev] about rotated geotransfmrm supporting of gpkg
In-Reply-To: <4D685B58-EEC6-4ADD-AD01-861467152DC7@avenza.com>
References: <4D685B58-EEC6-4ADD-AD01-861467152DC7@avenza.com>
Message-ID: <201608301622.36212.even.rouault@spatialys.com>

Le mardi 30 août 2016 16:09:23, Evan Zhou a écrit :
> Hi, brothers,
> 
> 	I am in a project that try to support geopackage files by using GDAL and
> when we were testing found GDAL don’t support rotated map. the code at:
> 
> 	see: 
> https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gpkg/ogrgeop
> ackagedatasource.cpp
> <https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gpkg/ogrgeo
> packagedatasource.cpp>
> 
> 
> 
> 	my question is how to support rotated map. I don’t want to rotate all
> raster tiles to north-up :(, this too sad.

Evan,

I'm afraid you'll have to rotate your tiles north-up (or come with a custom 
extension to have non north-up spatial registration). This is a limitation of 
the GeoPackage standard itself, not one of the GDAL implementation.

Even.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Tue Aug 30 07:59:12 2016
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 30 Aug 2016 16:59:12 +0200
Subject: [gdal-dev] Time for a new GeoJSON driver?
In-Reply-To: <CADPhZXz4YXFThXYyPgQWnRne8udiA56fBHgUb9pMAccMYYsV0Q@mail.gmail.com>
References: <CADPhZXy0uLwei5sbYOo9c84MsuktC=7gdVjG+qgzgdROGvZqiw@mail.gmail.com>
 <CAFLLRpLYBo_kjN6Z4dRyvJ0QkXx=S0mLwTg_PAku09Tq_0K_=A@mail.gmail.com>
 <CABUeae-hWsYMvsoDQNCVws23GLuaryvgGK-sbA8Mf1Q1PTPS_g@mail.gmail.com>
 <2244266.tPmJZtzF6Q@even-n550jk>
 <CADPhZXz4YXFThXYyPgQWnRne8udiA56fBHgUb9pMAccMYYsV0Q@mail.gmail.com>
Message-ID: <CADPhZXz2M0Vg6UCR=z7ZnJLSnExg+S==A75iOpwbvknU8vL9GA@mail.gmail.com>

Unfortunately I had to leave the conference abruptly before the BoF and
have nothing to report. Robert, was there any conclusion? New driver, same
driver?

On Tue, Aug 23, 2016 at 6:41 PM, Sean Gillies <sean at mapbox.com> wrote:

> Hi all,
>
> Let's have a quick GDAL + GeoJSON BoF here at FOSS4G this week to discuss
> the problem, yes? How about in the Tunnel, Wednesday, after the last talk
> from 6-7pm? Hopefully taking much less than an hour.
>
> Is there anybody on the list for whom the proposed time will not work?
>
>
> On Thu, Jul 28, 2016 at 6:12 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> > >>
>> > >> I'm concerned that requiring users to set an environment variable for
>> > >> conformance will extend the period of transition from 2008 to RFC
>> > >> GeoJSON. I honestly don't know that introducing a new format name
>> > >> ("geo+json" instead of "GeoJSON") would be better,
>>
>> Yes, the casual user would have trouble making the difference between
>> geo+json
>> and GeoJSON without reading carefully the doc. And RFCxxxx would be too
>> obscure. A GeoJSONv2 would be more intuitive but
>>
>> > >> but I think it could
>> > >> be better: `ogr2ogr -f geo+json` appears more portable (to, i.e.,
>> > >> Windows) than
>> > >> `RFCxxxx_GEOJSON=TRUE ogr2ogr -f GeoJSON`.
>>
>> I wouldn't use a config option/environment variable for that, but a new
>> layer
>> creation option added to the existing ones :
>>
>> <LayerCreationOptionList>
>>   <Option name="WRITE_BBOX" type="boolean" description="whether to write a
>> bbox property with the bounding box of the geometries at the feature and
>> feature collection level" default="NO" />
>>   <Option name="COORDINATE_PRECISION" type="int" description="Number of
>> decimal for coordinates" default="15" />
>>   <Option name="SIGNIFICANT_FIGURES" type="int" description="Number of
>> significant figures for floating-point values" default="17" />
>>   <Option name="NATIVE_DATA" type="string" description="FeatureCollection
>> level elements." />
>>   <Option name="NATIVE_MEDIA_TYPE" type="string" description="Format of
>> NATIVE_DATA. Must be &quot;application/vnd.geo+json&quot;, otherwise
>> NATIVE_DATA will be ignored." />
>> </LayerCreationOptionList>
>>
>>
>> For example:
>>
>>  <Option name="FLAVOR"  type="string-select" default="TO-BE-DEFINED"
>> description="Which flavor of GeoJSON must be output">
>>     <Value>GJ2008</Value>
>>     <Value>RFCxxxx</Value>
>>  </Option>
>>
>>
>> > Personally I'd prefer RFC-by-default and no automatic reprojection --
>> with
>> > an error if the CRS isn't CRS84. Be able to opt into old style with
>> config
>> > options, which would enable outputting either fully GeoJSON2008, or
>> opting
>> > into or out-of individual RFC features (eg. fully RFC-style except
>> using an
>> > alternate CRS, or skipping antimeridian-cutting). These options should
>> > enable people to migrate systems gradually.
>>
>> Having option to turn on/off each individual RFC features seems overkill
>> to me,
>> unless there is a clear need that is expressed.
>>
>> >
>> > That would change the current behaviour and might be unacceptable,
>> > by PSC or users, then that is a good reason to create a new driver.
>> > Problem might be with the names, having two drivers means two names,
>> > and GeoJSON would still point to old driver which became de facto
>> > non-GeoJSON driver. Confusing.
>>
>> To support RFCxxxx I really think creating a new driver would be
>> technically
>> an inferior choice given the likely high percentage of common code between
>> both. On the reading side, how would you decide which driver would be
>> selected
>> ? etc...
>> A similar situation is SQLite and Spatialite that are both handled by the
>> same
>> driver, where you select the spatialite flavor with a SPATIALITE=YES
>> dataset
>> creation option.
>>
>> >
>> > > The above doesn't do good things for GDAL backwards compatibility
>> though
>> > > :)
>>
>> My feeling is that the main point of incompatibility is the crs object no
>> longer being allowed, and CRS84 being compulsory. All other points are
>> really
>> details or corner cases that wouldn't impact most use cases
>>
>> An option would be, if FLAVOR is not specified, if the SRS passed to
>> CreateLayer() is CRS84, then select RFCxxxx. Otherwise default to GJ2008.
>>
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
>
> --
> Sean Gillies
>



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/c799695a/attachment.html>

From lucena_ivan at hotmail.com  Tue Aug 30 12:21:09 2016
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 30 Aug 2016 19:21:09 +0000
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>,
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>,
 <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>
Message-ID: <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>

Hi Mateusz/Jeff,


Please try the new version of "makegdal_gen.bat".


It will generate projects ready to use in newer version of Visual Studio.


I tested it only in VC++ 12.0 (VS 2013).


Add comments, if you like, to: https://trac.osgeo.org/gdal/ticket/6635


Regards,

Ivan

________________________________
From: Ivan Lucena <lucena_ivan at hotmail.com>
Sent: Monday, August 15, 2016 3:37 PM
To: Mateusz Loskot; Jeff McKenna
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010 Solution (static and dynamic lib)


Mateusz,


Thanks for the tip.


Yes, the project is loaded but it is not a "Makefile Project" anymore, so it's basically useless.


In previous VS versions once the .vsproj file was loaded and upgraded you could press F7 and "nmake -f makefile.vc" would start running inside the IDE.


That means you would have all the advantages of the IDE (debuggin/cross reference/refactoring/etc.) but still using the settings of nmake.local and running makefiles.


I am using VS 2013. Is that the same for you on VS 2015?


Thanks,

Ivan



________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Mateusz Loskot <mateusz at loskot.net>
Sent: Thursday, August 4, 2016 5:44 PM
To: Jeff McKenna
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010 Solution (static and dynamic lib)

On 4 August 2016 at 17:52, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
> On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>>
>> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
>> 2. Launch VS2015
>> 3. File > Open > Project/Solution...
>> 4. Select makegdal10.vcproj
>> 5. Accept to upgrade
>>
>
>
>
> Can we make sure to document these steps, so they are not lost in emails?
> Somewhere on the BuildHints wiki would be great.  Possibly here?
> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
BuildingOnWindows - GDAL<https://trac.osgeo.org/gdal/wiki/BuildingOnWindows>
trac.osgeo.org
GDAL can be built on Win32 platforms using MS VC++ 6.x and MS Visual Studio .NET (C++). The source distribution includes NMAKE compatible makefiles for use from the ...



https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioproject

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160830/4e7fad1f/attachment.html>

From jmckenna at gatewaygeomatics.com  Tue Aug 30 13:41:52 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 30 Aug 2016 17:41:52 -0300
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
 <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>
 <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>
Message-ID: <b8af9b85-b947-ad62-1a92-fa69f1e1b396@gatewaygeomatics.com>

Very cool Ivan, I'll try this first thing in the morning, when my brain 
is working best :) -jeff



On 2016-08-30 4:21 PM, Ivan Lucena wrote:
> Hi Mateusz/Jeff,
>
>
> Please try the new version of "makegdal_gen.bat".
>
>
> It will generate projects ready to use in newer version of Visual Studio.
>
>
> I tested it only in VC++ 12.0 (VS 2013).
>
>
> Add comments, if you like, to: https://trac.osgeo.org/gdal/ticket/6635
>
>
> Regards,
>
> Ivan
>
>
> ------------------------------------------------------------------------
> *From:* Ivan Lucena <lucena_ivan at hotmail.com>
> *Sent:* Monday, August 15, 2016 3:37 PM
> *To:* Mateusz Loskot; Jeff McKenna
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual
> Studio 2010 Solution (static and dynamic lib)
>
>
> Mateusz,
>
>
> Thanks for the tip.
>
>
> Yes, the project is loaded but it is not a "Makefile Project" anymore,
> so it's basically useless.
>
>
> In previous VS versions once the .vsproj file was loaded and upgraded
> you could press F7 and "nmake -f makefile.vc" would start running inside
> the IDE.
>
>
> That means you would have all the advantages of the IDE (debuggin/cross
> reference/refactoring/etc.) but still using the settings of nmake.local
> and running makefiles.
>
>
> I am using VS 2013. Is that the same for you on VS 2015?
>
>
> Thanks,
>
> Ivan
>
>
>
>
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Mateusz
> Loskot <mateusz at loskot.net>
> *Sent:* Thursday, August 4, 2016 5:44 PM
> *To:* Jeff McKenna
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual
> Studio 2010 Solution (static and dynamic lib)
>
> On 4 August 2016 at 17:52, Jeff McKenna <jmckenna at gatewaygeomatics.com>
> wrote:
>> On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>>>
>>> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
>>> 2. Launch VS2015
>>> 3. File > Open > Project/Solution...
>>> 4. Select makegdal10.vcproj
>>> 5. Accept to upgrade
>>>
>>
>>
>>
>> Can we make sure to document these steps, so they are not lost in emails?
>> Somewhere on the BuildHints wiki would be great.  Possibly here?
>> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
> BuildingOnWindows – GDAL
> <https://trac.osgeo.org/gdal/wiki/BuildingOnWindows>
> trac.osgeo.org
> GDAL can be built on Win32 platforms using MS VC++ 6.x and MS Visual
> Studio .NET (C++). The source distribution includes NMAKE compatible
> makefiles for use from the ...
>
>

From mateusz at loskot.net  Tue Aug 30 14:06:59 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 30 Aug 2016 23:06:59 +0200
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <b8af9b85-b947-ad62-1a92-fa69f1e1b396@gatewaygeomatics.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
 <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>
 <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>
 <b8af9b85-b947-ad62-1a92-fa69f1e1b396@gatewaygeomatics.com>
Message-ID: <CABUeae8Qy7iNRSvoachXSQwjRYLtRjGOBJ966SuA8RjpR_UY+w@mail.gmail.com>

> On 2016-08-30 4:21 PM, Ivan Lucena wrote:
>
> Hi Mateusz/Jeff,
>
>
> Please try the new version of "makegdal_gen.bat".
>
>
> It will generate projects ready to use in newer version of Visual Studio.
>
>
> I tested it only in VC++ 12.0 (VS 2013).


Ivan,

I've just tested it with VS2015 Update 3 and it works like a charm :)
This is cool, thanks!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From AlanKeown at southernphone.com.au  Tue Aug 30 13:57:32 2016
From: AlanKeown at southernphone.com.au (Alan Keown)
Date: Wed, 31 Aug 2016 06:57:32 +1000
Subject: [gdal-dev] unsubscribe
Message-ID: <006a01d20301$2268cd70$673a6850$@southernphone.com.au>

unsubscribe

 

Cheers

AlanK

 

".And then came the grandest idea of all! 

We actually made a map of the country, on the scale of a mile to the mile!

Have you used it much? I enquired. 
It has never been spread out, yet,  said Mein Herr: 

the farmers objected:

they said it would cover the whole country, and shut out the sunlight!

So we now use the country itself, as its own map, and I assure you it does
nearly as well." 
- Lewis Carroll. The complete Sylvie and Bruno. 1893. 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160831/9b048608/attachment-0001.html>

From t.sawka at visimind.pl  Tue Aug 30 23:50:59 2016
From: t.sawka at visimind.pl (Tomasz Sawka)
Date: Wed, 31 Aug 2016 08:50:59 +0200
Subject: [gdal-dev] Geospatial PDF - multiple pages
Message-ID: <CABUxgwi83zeebK965jLx1_ZHF8p6uQZo7vHJKGyd5fFY7yGHZA@mail.gmail.com>

When i use GDAL to read PDF's with multiple pages i can access each page by
subdataset domains items and for example georeference it. Is it possible to
create Geospatial PDFs with many pages with GDAL? I'm creating new PDFs via
CreateCopy on virtual dataset if it's matters.

Best regards
Tomasz Sawka
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20160831/3715ecd0/attachment.html>

From even.rouault at spatialys.com  Wed Aug 31 03:51:54 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Aug 2016 12:51:54 +0200
Subject: [gdal-dev] Geospatial PDF - multiple pages
In-Reply-To: <CABUxgwi83zeebK965jLx1_ZHF8p6uQZo7vHJKGyd5fFY7yGHZA@mail.gmail.com>
References: <CABUxgwi83zeebK965jLx1_ZHF8p6uQZo7vHJKGyd5fFY7yGHZA@mail.gmail.com>
Message-ID: <201608311251.54670.even.rouault@spatialys.com>

Le mercredi 31 août 2016 08:50:59, Tomasz Sawka a écrit :
> When i use GDAL to read PDF's with multiple pages i can access each page by
> subdataset domains items and for example georeference it. Is it possible to
> create Geospatial PDFs with many pages with GDAL? I'm creating new PDFs via
> CreateCopy on virtual dataset if it's matters.

Tomasz,

Creating multiple pages PDF isn't currently supported in the GDAL PDF driver. 
You can use other tools like ImageMagick convert, pdfjoin, podofomerge, etc... 
to do that.

Even

> 
> Best regards
> Tomasz Sawka

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 31 04:48:26 2016
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Aug 2016 13:48:26 +0200
Subject: [gdal-dev] Time for a new GeoJSON driver?
In-Reply-To: <CADPhZXz2M0Vg6UCR=z7ZnJLSnExg+S==A75iOpwbvknU8vL9GA@mail.gmail.com>
References: <CADPhZXy0uLwei5sbYOo9c84MsuktC=7gdVjG+qgzgdROGvZqiw@mail.gmail.com>
 <CADPhZXz4YXFThXYyPgQWnRne8udiA56fBHgUb9pMAccMYYsV0Q@mail.gmail.com>
 <CADPhZXz2M0Vg6UCR=z7ZnJLSnExg+S==A75iOpwbvknU8vL9GA@mail.gmail.com>
Message-ID: <201608311348.26982.even.rouault@spatialys.com>

Sean,

We ended up cancelling the BoF.
I had a discussion with someone (Dmitry perhaps ?) and there was some concerns 
expressed by turning on RFC 7946 by default, even in the case of a source 
dataset in EPSG:4326. Particularly because of the behaviour at dateline, where 
RFC 7946 asks for geometries to be cut and coordinates to be wrapped around

One downside of having a new driver is that it creates issues for the read 
side of it. Due to the absence of versionning, how would you know if a json 
file must be handled by one driver or another ? In some cases, you could know 
(e.g. presence of a "crs" object), but generally you would need to parse the 
whole file and detect a few hints (like longitudes > 180 or <-180, unexpected 
orientation for polygons, etc). So you might end up parsing the file twice.

So I'd be more on the position to have a single driver that supports writing 
both "flavours" through a creation option. And probably default to GJ2008 to 
avoid breaking existing workflows (perhaps with some warning in release notes 
that the default might change in a later release, so people should explicitly 
specify the creation option if they depend on the precise flavour)
We could conceptually have a light-weight RFC7946 driver (or whatever we would 
call it) that would be just a wrapper around the existing driver and would set 
the creation option with the right flavour, but that would probably be a bit 
weird that this driver is never used on the read side (due to what I 
mentionned above).

One thing that is not completely obvious is how to handle edition capabilities 
(ie when the dataset is opened in open mode). When you re-write the file after 
a feature addition/update/deletion, which flavour do you choose ? Probably use 
the heuristics I mentionned before to have a best guess, and offer an open 
option with the flavour as well.

For RFC 7946, there were different opinions if I re-read the thread regarding 
if we must turn on automatic reprojection to EPSG:4326, or just error out if 
the CRS used at layer creation time is EPSG:4326.
We have already a few drivers whose underlying format is coordinates in 
lon,lat and that accept arbitrary CRS at creation time with on the fly 
reprojection. One advantage of this is that you can identify more easily 
geometries at the pole or the anti-meridian and thus write them correctly 
according to the new rules.
But anyway we would also need some heuristics in the case where you convert to 
RFC 7946 for example from a format in EPSG:4326 with geometries cut at the 
dateline. In the OGR geometry model, there's nothing that explictly tells if 
the geometry has been cut or not. So you might need to use the following 
heuristics: if a multipart geometry has longitudes both at -180 and 180 in 
different parts (ie that the same part of a geometry doesn't have points both 
at -180 and 180), then it has been cut.

Even


Le mardi 30 août 2016 16:59:12, Sean Gillies a écrit :
> Unfortunately I had to leave the conference abruptly before the BoF and
> have nothing to report. Robert, was there any conclusion? New driver, same
> driver?
> 
> On Tue, Aug 23, 2016 at 6:41 PM, Sean Gillies <sean at mapbox.com> wrote:
> > Hi all,
> > 
> > Let's have a quick GDAL + GeoJSON BoF here at FOSS4G this week to discuss
> > the problem, yes? How about in the Tunnel, Wednesday, after the last talk
> > from 6-7pm? Hopefully taking much less than an hour.
> > 
> > Is there anybody on the list for whom the proposed time will not work?
> > 
> > 
> > On Thu, Jul 28, 2016 at 6:12 PM, Even Rouault
> > <even.rouault at spatialys.com>
> > 
> > wrote:
> >> > >> I'm concerned that requiring users to set an environment variable
> >> > >> for conformance will extend the period of transition from 2008 to
> >> > >> RFC GeoJSON. I honestly don't know that introducing a new format
> >> > >> name ("geo+json" instead of "GeoJSON") would be better,
> >> 
> >> Yes, the casual user would have trouble making the difference between
> >> geo+json
> >> and GeoJSON without reading carefully the doc. And RFCxxxx would be too
> >> obscure. A GeoJSONv2 would be more intuitive but
> >> 
> >> > >> but I think it could
> >> > >> be better: `ogr2ogr -f geo+json` appears more portable (to, i.e.,
> >> > >> Windows) than
> >> > >> `RFCxxxx_GEOJSON=TRUE ogr2ogr -f GeoJSON`.
> >> 
> >> I wouldn't use a config option/environment variable for that, but a new
> >> layer
> >> creation option added to the existing ones :
> >> 
> >> <LayerCreationOptionList>
> >> 
> >>   <Option name="WRITE_BBOX" type="boolean" description="whether to write
> >>   a
> >> 
> >> bbox property with the bounding box of the geometries at the feature and
> >> feature collection level" default="NO" />
> >> 
> >>   <Option name="COORDINATE_PRECISION" type="int" description="Number of
> >> 
> >> decimal for coordinates" default="15" />
> >> 
> >>   <Option name="SIGNIFICANT_FIGURES" type="int" description="Number of
> >> 
> >> significant figures for floating-point values" default="17" />
> >> 
> >>   <Option name="NATIVE_DATA" type="string"
> >>   description="FeatureCollection
> >> 
> >> level elements." />
> >> 
> >>   <Option name="NATIVE_MEDIA_TYPE" type="string" description="Format of
> >> 
> >> NATIVE_DATA. Must be &quot;application/vnd.geo+json&quot;, otherwise
> >> NATIVE_DATA will be ignored." />
> >> </LayerCreationOptionList>
> >> 
> >> For example:
> >>  <Option name="FLAVOR"  type="string-select" default="TO-BE-DEFINED"
> >> 
> >> description="Which flavor of GeoJSON must be output">
> >> 
> >>     <Value>GJ2008</Value>
> >>     <Value>RFCxxxx</Value>
> >>  
> >>  </Option>
> >>  
> >> > Personally I'd prefer RFC-by-default and no automatic reprojection --
> >> 
> >> with
> >> 
> >> > an error if the CRS isn't CRS84. Be able to opt into old style with
> >> 
> >> config
> >> 
> >> > options, which would enable outputting either fully GeoJSON2008, or
> >> 
> >> opting
> >> 
> >> > into or out-of individual RFC features (eg. fully RFC-style except
> >> 
> >> using an
> >> 
> >> > alternate CRS, or skipping antimeridian-cutting). These options should
> >> > enable people to migrate systems gradually.
> >> 
> >> Having option to turn on/off each individual RFC features seems overkill
> >> to me,
> >> unless there is a clear need that is expressed.
> >> 
> >> > That would change the current behaviour and might be unacceptable,
> >> > by PSC or users, then that is a good reason to create a new driver.
> >> > Problem might be with the names, having two drivers means two names,
> >> > and GeoJSON would still point to old driver which became de facto
> >> > non-GeoJSON driver. Confusing.
> >> 
> >> To support RFCxxxx I really think creating a new driver would be
> >> technically
> >> an inferior choice given the likely high percentage of common code
> >> between both. On the reading side, how would you decide which driver
> >> would be selected
> >> ? etc...
> >> A similar situation is SQLite and Spatialite that are both handled by
> >> the same
> >> driver, where you select the spatialite flavor with a SPATIALITE=YES
> >> dataset
> >> creation option.
> >> 
> >> > > The above doesn't do good things for GDAL backwards compatibility
> >> 
> >> though
> >> 
> >> > > :)
> >> 
> >> My feeling is that the main point of incompatibility is the crs object
> >> no longer being allowed, and CRS84 being compulsory. All other points
> >> are really
> >> details or corner cases that wouldn't impact most use cases
> >> 
> >> An option would be, if FLAVOR is not specified, if the SRS passed to
> >> CreateLayer() is CRS84, then select RFCxxxx. Otherwise default to
> >> GJ2008.
> >> 
> >> 
> >> Even
> >> 
> >> --
> >> Spatialys - Geospatial professional services
> >> http://www.spatialys.com
> > 
> > --
> > Sean Gillies

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Wed Aug 31 10:18:06 2016
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 31 Aug 2016 14:18:06 -0300
Subject: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual Studio 2010
 Solution (static and dynamic lib)
In-Reply-To: <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>
References: <723698950.16216706.1470304956511.JavaMail.yahoo.ref@mail.yahoo.com>
 <723698950.16216706.1470304956511.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae-cQ8bSw8hJOrnODTNYyeD2cekfbJRi+ABVTBszWcUazw@mail.gmail.com>
 <2095377055.16225817.1470312058328.JavaMail.yahoo@mail.yahoo.com>
 <CABUeae_KSEMXqFX7+Q7a9vDM9VhL9CZhcXUnt8SmMb+ob9b2oQ@mail.gmail.com>
 <BLUPR19MB0145DFB88BECBF81E69AF63FF2070@BLUPR19MB0145.namprd19.prod.outlook.com>
 <CABUeae-YySUDE4WAdm2b1=QEK-H0YurRNHdwwRPEkocgH8pJeg@mail.gmail.com>
 <32ec0350-d115-8701-0fd3-a262d913b697@gatewaygeomatics.com>
 <CABUeae8pQ-CjGvj8WCFp_3y+vGte0UtWqoi7XOQuADftEaCGpA@mail.gmail.com>
 <BLUPR19MB0145C6411E3853F4F99FB20FF2120@BLUPR19MB0145.namprd19.prod.outlook.com>
 <BLUPR19MB01450B44375530A97A538E7AF2E00@BLUPR19MB0145.namprd19.prod.outlook.com>
Message-ID: <2ea7f313-3807-a6e4-246a-fc6e7f7f0ce6@gatewaygeomatics.com>

Hi Ivan,

I gave the script a good run-through today with Visual Studio 2015.  It 
works great!  Very nice to use the features of the IDE, I really like 
how it runs off of the setting in nmake.opt   Here are some comments:

  - When you run the script, the examples that it displays are missing 
the second switch (platform).
  - In the IDE after you've loaded "makefileproj_vs14.vcxproj", in the 
"Solution Explorer" panel there is text of "Visual Studio 2013" for some 
reason
  - (just for the record) I had to of course configure my "VC++ 
Directories" settings of the project first, to find SDK lib locations
  - I updated the wiki with these notes: 
https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioProject

Great work!

-jeff




On 2016-08-30 4:21 PM, Ivan Lucena wrote:
> Hi Mateusz/Jeff,
>
>
> Please try the new version of "makegdal_gen.bat".
>
>
> It will generate projects ready to use in newer version of Visual Studio.
>
>
> I tested it only in VC++ 12.0 (VS 2013).
>
>
> Add comments, if you like, to: https://trac.osgeo.org/gdal/ticket/6635
>
>
> Regards,
>
> Ivan
>
>
> ------------------------------------------------------------------------
> *From:* Ivan Lucena <lucena_ivan at hotmail.com>
> *Sent:* Monday, August 15, 2016 3:37 PM
> *To:* Mateusz Loskot; Jeff McKenna
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual
> Studio 2010 Solution (static and dynamic lib)
>
>
> Mateusz,
>
>
> Thanks for the tip.
>
>
> Yes, the project is loaded but it is not a "Makefile Project" anymore,
> so it's basically useless.
>
>
> In previous VS versions once the .vsproj file was loaded and upgraded
> you could press F7 and "nmake -f makefile.vc" would start running inside
> the IDE.
>
>
> That means you would have all the advantages of the IDE (debuggin/cross
> reference/refactoring/etc.) but still using the settings of nmake.local
> and running makefiles.
>
>
> I am using VS 2013. Is that the same for you on VS 2015?
>
>
> Thanks,
>
> Ivan
>
>
>
>
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Mateusz
> Loskot <mateusz at loskot.net>
> *Sent:* Thursday, August 4, 2016 5:44 PM
> *To:* Jeff McKenna
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Release of a GDAL 2.0.x and 2.1.x Visual
> Studio 2010 Solution (static and dynamic lib)
>
> On 4 August 2016 at 17:52, Jeff McKenna <jmckenna at gatewaygeomatics.com>
> wrote:
>> On 2016-08-04 11:07 AM, Mateusz Loskot wrote:
>>>
>>> 1. makegdal_gen 10.00 32 > makegdal10.vcproj
>>> 2. Launch VS2015
>>> 3. File > Open > Project/Solution...
>>> 4. Select makegdal10.vcproj
>>> 5. Accept to upgrade
>>>
>>
>>
>>
>> Can we make sure to document these steps, so they are not lost in emails?
>> Somewhere on the BuildHints wiki would be great.  Possibly here?
>> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
> BuildingOnWindows – GDAL
> <https://trac.osgeo.org/gdal/wiki/BuildingOnWindows>
> trac.osgeo.org
> GDAL can be built on Win32 platforms using MS VC++ 6.x and MS Visual
> Studio .NET (C++). The source distribution includes NMAKE compatible
> makefiles for use from the ...
>
>
>
> https://trac.osgeo.org/gdal/wiki/BuildingOnWindows#GeneratingVisualStudioproject
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/

