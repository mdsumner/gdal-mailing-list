From jukka.rahkonen at maanmittauslaitos.fi  Fri Sep  1 01:28:28 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 1 Sep 2023 08:28:28 +0000
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
In-Reply-To: <CAHEdGZOh2j1sseY+L8E81fDX6g7spfDaH51nE59a67SkXX5sGQ@mail.gmail.com>
References: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
 <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHEdGZOh2j1sseY+L8E81fDX6g7spfDaH51nE59a67SkXX5sGQ@mail.gmail.com>
Message-ID: <AM0PR09MB32195A90364405963B8280DAFDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Feature IDs are confusing. Some formats require FID, some do not directly support FID at all (shapefile). Sometimes FID must be an integer, sometimes it is always a string (gml_id), and sometimes it is either or (GeoJSON). Ogr2ogr has 3 parameters for FIDs, and vector drivers add their own options. Primary key acts usually as a FID, but can a composite PK be a FID? FIDs are really meant for the machines and GDAL usually hides FIDs, but they may be meaningful also for humans as well and sometimes users would like to expose them as a normal attribute with tricks like SELECT *, fid_field as my_fid.

I agree that something like a dedicated wiki page about FIDs in GDAL would be nice to have. Maybe documenting how OBJECTID in FileGDB behaves with different SQL dialects is a rather small detail to be documented separately.

-Jukka Rahkonen-

L?hett?j?: andy <aborruso at gmail.com>
L?hetetty: perjantai 1. syyskuuta 2023 9.54
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection

Hi Jukka,

On Fri, 1 Sept 2023 at 07:42, Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
When the SQLite dialect is used, a temporary SQLite database is created. OBJECTID is a feature identifier (FID) and I guess that the FID gets converted into a primary key with the SQLite defaults. So maybe you can find the OBJECTID from ROWID.

it works, thank you very much.

Maybe a little related note in the documentation would do. What do you think about it?

Thank you again

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230901/35f52f47/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Sep  1 08:55:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 1 Sep 2023 17:55:32 +0200
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
In-Reply-To: <AM0PR09MB32195A90364405963B8280DAFDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
 <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHEdGZOh2j1sseY+L8E81fDX6g7spfDaH51nE59a67SkXX5sGQ@mail.gmail.com>
 <AM0PR09MB32195A90364405963B8280DAFDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <2d7c0abb-1153-53a0-a3e4-2b77c0d35878@spatialys.com>

Hi,

in https://github.com/OSGeo/gdal/pull/8301, I've added the capability to 
select/filter using the FID column name (when it is not empty) with the 
SQLite dialect as well.

The behaviour of OGR SQL regarding FID use is documented at 
https://gdal.org/user/ogr_sql_dialect.html#fid , and for the SQLite 
dialect at https://gdal.org/user/sql_sqlite_dialect.html#feature-id

Even

Le 01/09/2023 ? 10:28, Rahkonen Jukka a ?crit?:
>
> Hi,
>
> Feature IDs are confusing. Some formats require FID, some do not 
> directly support FID at all (shapefile). Sometimes FID must be an 
> integer, sometimes it is always a string (gml_id), and sometimes it is 
> either or (GeoJSON). Ogr2ogr has 3 parameters for FIDs, and vector 
> drivers add their own options. Primary key acts usually as a FID, but 
> can a composite PK be a FID? FIDs are really meant for the machines 
> and GDAL usually hides FIDs, but they may be meaningful also for 
> humans as well and sometimes users would like to expose them as a 
> normal attribute with tricks like SELECT *, fid_field as my_fid.
>
> I agree that something like a dedicated wiki page about FIDs in GDAL 
> would be nice to have. Maybe documenting how OBJECTID in FileGDB 
> behaves with different SQL dialects is a rather small detail to be 
> documented separately.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:* andy <aborruso at gmail.com>
> *L?hetetty:* perjantai 1. syyskuuta 2023 9.54
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal dev <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column 
> selection
>
> Hi Jukka,
>
> On Fri, 1 Sept 2023 at 07:42, Rahkonen Jukka 
> <jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>     When the SQLite dialect is used, a temporary SQLite database is
>     created. OBJECTID is a feature identifier (FID) and I guess that
>     the FID gets converted into a primary key with the SQLite
>     defaults. So maybe you can find the OBJECTID from ROWID.
>
> it works, thank you very much.
>
> Maybe a little related note in the documentation would do. What do you 
> think about it?
>
> Thank you again
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230901/c1113a5d/attachment.htm>

From aborruso at gmail.com  Sat Sep  2 07:36:28 2023
From: aborruso at gmail.com (andy)
Date: Sat, 2 Sep 2023 16:36:28 +0200
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
In-Reply-To: <2d7c0abb-1153-53a0-a3e4-2b77c0d35878@spatialys.com>
References: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
 <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHEdGZOh2j1sseY+L8E81fDX6g7spfDaH51nE59a67SkXX5sGQ@mail.gmail.com>
 <AM0PR09MB32195A90364405963B8280DAFDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <2d7c0abb-1153-53a0-a3e4-2b77c0d35878@spatialys.com>
Message-ID: <CAHEdGZPFs1r-A_iJ0K7C6wiScX5hp1Skbp5huU4ciSXttbxmWA@mail.gmail.com>

Thank you very much  Even.

And thank you for this related PR https://github.com/OSGeo/gdal/pull/8301
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230902/a04386ae/attachment.htm>

From ryang at waabi.ai  Sun Sep  3 21:53:31 2023
From: ryang at waabi.ai (Ryan Yang)
Date: Sun, 3 Sep 2023 21:53:31 -0700
Subject: [gdal-dev] PROJ_DATA/PROJ_LIB set during build time for python
 bindings?
Message-ID: <CACqsvUYyp+ui+SMhDL=Ju4djPiremq6ah5nRcuHAaaG0mOWkPA@mail.gmail.com>

Hi!

I see that PROJ_DATA is an env variable to be set for pointing to the
directory containing proj.db. However, I was wondering if there's a way to
configure this to be set during build time via some cmake arg or if this
was intended to be a dynamic env variable that can always change?

Asking because currently building gdal python bindings for bazel, but it
seems to require an env set for PROJ_LIB/PROJ_DATA whenever I'm importing
gdal.

Thanks in advance!
Ryan

-- 
This email may be confidential and/or privileged. If you received this 
communication by mistake, please don't forward it to anyone else, delete 
all copies and attachments, and let me know that it has gone to the wrong 
person.


Statements made above may reflect a potential business 
arrangement. Any such statements are provided solely as a basis for further 
discussion, and are not intended to be and do not constitute a legally 
binding obligation. No legally binding obligations will be created, 
implied, or inferred until an agreement is duly executed in writing by all 
parties.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230903/d7cd2f2d/attachment.htm>

From even.rouault at spatialys.com  Mon Sep  4 00:03:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 4 Sep 2023 09:03:32 +0200
Subject: [gdal-dev] PROJ_DATA/PROJ_LIB set during build time for python
 bindings?
In-Reply-To: <CACqsvUYyp+ui+SMhDL=Ju4djPiremq6ah5nRcuHAaaG0mOWkPA@mail.gmail.com>
References: <CACqsvUYyp+ui+SMhDL=Ju4djPiremq6ah5nRcuHAaaG0mOWkPA@mail.gmail.com>
Message-ID: <8a913db0-c633-e119-4f72-1b257d6b1cd4@spatialys.com>

Hi,

A default PROJ_DATA value is "burnt" into libproj at its build time. Its 
value evaluates to "${CMAKE_INSTALL_FULL_DATADIR}/proj"

Similarly for GDAL_DATA which evaluates to 
"${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_DATADIR}/gdal"

Even

Le 04/09/2023 ? 06:53, Ryan Yang a ?crit?:
> Hi!
>
> I see that PROJ_DATA is an env variable to be set for pointing to the 
> directory containing proj.db. However, I was wondering if there's a 
> way to configure this to be set during build time via some cmake arg 
> or if this was intended to be a dynamic env variable that can always 
> change?
>
> Asking because currently building gdal python bindings for bazel, but 
> it seems to require an env set for PROJ_LIB/PROJ_DATA whenever I'm 
> importing gdal.
>
> Thanks in advance!
> Ryan
>
>
> This email may be confidential and/or privileged. If you received this 
> communication by mistake, please don't forward it to anyone else, 
> delete all copies and attachments, and let me know that it has gone to 
> the wrong person.
>
> Statements made above may reflect a potential business arrangement. 
> Any such statements are provided solely as a basis for further 
> discussion, and are not intended to be and do not constitute a legally 
> binding obligation. No legally binding obligations will be created, 
> implied, or inferred until an agreement is duly executed in writing by 
> all parties.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230904/e1bc4383/attachment.htm>

From ni_hao88 at hotmail.com  Mon Sep  4 17:29:41 2023
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 5 Sep 2023 00:29:41 +0000
Subject: [gdal-dev] SICD driver
Message-ID: <DM5PR02MB38620270D66689D867ADA2EAF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

Is there a GDAL sensor independent complex data (SICD) driver ?
https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407

Thank you.
[https://stonly.com/resources/facebook-cover.jpg]<https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407>
Metadata Standard: Sensor Independent Complex Data (SICD) | Customer knowledge base<https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407>
IntroductionSICD is an open, standardized specification for SAR data developed and maintained by the US National Geospatial Intelligence Agency (NGA). The full documentation is available here.Unlike CPHD, SICD files have been processed through an "image formation algorithm" and associated metadata has been adapted to meet a generic level of "independence" from the sensor that generated it. Therefore, while SICD files are more "opinionated" than CPHD, they are also less idiosyncratic.The NGA's motivation for creating the SICD standard was to enable integration of data from multiple disparate SAR systems using a common processing toolset and downstream analytical workflow. As more commercial providers adopt the SICD standard, end-users will benefit from the ability to create generic tools rather than having to build custom plugins for every vendor.Umbra uses the SICD standard to provide complex phase data in a more refined state than it does with its CPHD product. The "Polar Format Algorithm" (PFA) is used for
help.umbra.space

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/a5de43f7/attachment.htm>

From ni_hao88 at hotmail.com  Mon Sep  4 17:38:37 2023
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 5 Sep 2023 00:38:37 +0000
Subject: [gdal-dev] Sentinel-3 driver
Message-ID: <DM5PR02MB38625A5B99BAD495F7BA69D5F1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

Is there a GDAL driver for Sentinel-3's xfdumanifest.xml, not just individual *.nc ?

Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/e60df065/attachment.htm>

From ni_hao88 at hotmail.com  Mon Sep  4 17:42:08 2023
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 5 Sep 2023 00:42:08 +0000
Subject: [gdal-dev] Sentinel-3 driver
In-Reply-To: <DM5PR02MB38625A5B99BAD495F7BA69D5F1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625A5B99BAD495F7BA69D5F1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <DM5PR02MB3862A0A08685F2F39C67E69CF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>

https://sentinels.copernicus.eu/web/sentinel/user-guides/sentinel-3-altimetry/data-formats
Sentinel-SAFE is based on the XML Formatted Data Units (XFDU)
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of ni hao <ni_hao88 at hotmail.com>
Sent: September 4, 2023 9:38 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Sentinel-3 driver

Hi list,

Is there a GDAL driver for Sentinel-3's xfdumanifest.xml, not just individual *.nc ?

Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/97538509/attachment-0001.htm>

From mirza.nawandish at haritaevi.com  Mon Sep  4 22:11:04 2023
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Tue, 05 Sep 2023 08:11:04 +0300
Subject: [gdal-dev] : Inquiry about Converting MicroStation V8 DGN to
 GeoJSON or Alternative Formats
Message-ID: <311821693890509@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/8c05df79/attachment.htm>

From andrew at aitchison.me.uk  Mon Sep  4 23:39:38 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 5 Sep 2023 07:39:38 +0100 (BST)
Subject: [gdal-dev] Memory mapped VSILFILE ?
Message-ID: <de23573e-73a8-0e46-c4cb-74d3e7150550@aitchison.me.uk>


Drivers work with VSILFILE objects.
Sometimes these are real files but as I understand it,
sometimes these are actually blocks of memory behind a file interface.

Is the reverse possible, ie can I mmap a VSILFILE and then
read it as if it were a block of memory ?
This would be for read-only drivers.

There will inevitably be endian issues, but I have come across
several file formats that look to me to be designed to be read
this way, especially the header structures.

Thanks,

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From Adam.Jamison at portbris.com.au  Tue Sep  5 00:09:19 2023
From: Adam.Jamison at portbris.com.au (Adam Jamison)
Date: Tue, 5 Sep 2023 07:09:19 +0000
Subject: [gdal-dev] : Inquiry about Converting MicroStation V8 DGN to
 GeoJSON or Alternative Formats
In-Reply-To: <311821693890509@mail.yandex.com.tr>
References: <311821693890509@mail.yandex.com.tr>
Message-ID: <MEYP282MB4074CB70CF0A28E66744EEC4C6E8A@MEYP282MB4074.AUSP282.PROD.OUTLOOK.COM>

Shahrukh,

I use MicroStation daily and have a licensed product so this would only work if you have it installed.

Depending on your Bentley MicroStation version I?ve had some success writing C# addin for the software to interpret Bentley elements and output geojson.

In the latest version (v10.17.02.61) you could do some trickery using the new ?Item Types?, I haven?t made one for geojson direct however I?ve had success exporting an excel spreadsheet then using GDAL to convert this to geojson.

I?ve tested this with simple linestring and simple shape elements with upto 100 vertices (there?s currently no way of looping every vertex).


  1.  Create an Item Type for LineStrings call it WKT_LINE and create another one for Shape WKT_SHAPE or something that makes sense to you.
  2.  Add a property call it WKT or whatever you would like the geometry column to be called.
  3.  Set the following:
     *   Property Definition

                                                               i.      Type: Text

                                                             ii.      Is Array: False

                                                           iii.      Is ReadOnly: True

                                                           iv.      Visibility: Show

     *   Calculated Property

                                                               i.      Expression SEE BELOW

                                                             ii.      Use last valid value: False

                                                           iii.      Failure Value: ERROR GENERATING LINESTRING

  1.  Attach this item to required elements.
     *   WKT_LINE can be appended to simple linestring elements
     *   WKT_SHAPE can be appended to simple shape elements
  2.  Use MicroStation Export Item Types to export a spreadsheet
  3.  Use GDAL to convert spreadsheet to geojson or anything you want

Expression for LineString use first line below then repeat second line as many times as you like, increment the number each time, 1 becomes 2, 2 becomes 3 etc etc?. (Eventually would impact performance I guess), end with the last line.

"LINESTRING (" & IIF(this.GetElement().Count > 0, this.GetElement().Segments[0].Start.X & " " & this.GetElement().Segments[0].Start.Y,"")
& IIF(this.GetElement().Count > 1, ", " & this.GetElement().Segments[1].Start.X & " " & this.GetElement().Segments[1].Start.Y,"")
& ", " & this.GetElement().Segments[this.GetElement().Count-1].End.X & " " & this.GetElement().Segments[this.GetElement().Count-1].End.Y &")"

Expression for Shape / Polygon use first line below then repeat second line as many times as you like, increment the number each time, 1 becomes 2, 2 becomes 3 etc etc?. (Eventually would impact performance I guess), end with the last line.

"POLYGON ((" & IIF(this.GetElement().Count > 0, this.GetElement().Segments[0].Start.X & " " & this.GetElement().Segments[0].Start.Y,"")
& IIF(this.GetElement().Count> 1, ", " & this.GetElement().Segments[1].Start.X & " " & this.GetElement().Segments[1].Start.Y,"")
& ", " & IIF(this.GetElement().Count>0,this.GetElement().Segments[0].Start.X & " " & this.GetElement().Segments[0].Start.Y,"") & "))"

Cheers
Adam

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Shahrukh Mirza Nawandish
Sent: Tuesday, September 5, 2023 3:11 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] : Inquiry about Converting MicroStation V8 DGN to GeoJSON or Alternative Formats


Dear GDAL Support Team,

Is there a cost-effective or open-source solution for converting MicroStation V8 DGN files to GeoJSON or other formats, as the Open Teigha SDK comes with a cost.
Any suggestions or guidance would be appreciated.
--
Sayg?lar?mla / Kind Regards

Shahrukh Mirza NAWANDISH
Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
Bilgisayar Programc?s? / Computer Programmer MCA
[https://www.haritaevi.com/wp-content/uploads/2018/12/haritaevi-logo.png]<https://www.haritaevi.com/en>
T:+90 312 266 66 98
M:+90 538 519 72 67
E:mirza.nawandish at haritaevi.com<http://mirza.nawandish at haritaevi.com>
?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>
www.haritaevi.com<http://www.haritaevi.com>
www.obstacleanalyze.com<http://www.obstacleanalyze.com>
www.aerodatamarket.com<http://www.aerodatamarket.com>
[https://avatars.mds.yandex.net/get-mail-signature/2434044/d24bf65965f2be07edc47ff3c25b0348/orig]<https://www.instagram.com/haritaevi/?hl=tr>[https://avatars.mds.yandex.net/get-mail-signature/200369/c75763261eac7fb671922d147573080b/orig]<https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F>[https://avatars.mds.yandex.net/get-mail-signature/2434044/1cd6e615d44979bf9b0d6b0ea9c47182/orig]<https://twitter.com/haritaevi>[https://avatars.mds.yandex.net/get-mail-signature/232821/ec6941b191f27730d3a5f92fd846beb4/orig]<https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>[https://avatars.mds.yandex.net/get-mail-signature/232821/0545b2da2dc9f49f532774615ec45e51/orig]<https://www.facebook.com/haritaevi>[https://www.haritaevi.com/wp-content/uploads/2022/02/disclaimer_1.png]<https://www.haritaevi.com/disclaimer> [https://avatars.mds.yandex.net/get-mail-signature/2434044/58c47a3a908e28fdb209656734002f36/orig] <https://fidic.org> [https://avatars.mds.yandex.net/get-mail-signature/2423644/1ccfc2184635533811e43aeeae4bf6c1/orig] <https://www.efcanet.org> [https://avatars.mds.yandex.net/get-mail-signature/2423644/405b95fb41fb8db77dcee35ff542f333/orig] <https://www.haritaevi.com/en/about-us/quality-policy> [https://avatars.mds.yandex.net/get-mail-signature/1539903/c89e02562564f32028015473ea475742/orig] <https://www.haritaevi.com/en/about-us/information-security-policy>



Note:
This message is for the named person's use only.  It may contain confidential, proprietary or legally privileged information.  No confidentiality or privilege is waived or lost by any mistransmission.  If you receive this message in error, please immediately delete it and all copies of it from your system, destroy any hard copies of it and notify the sender.  You must not, directly or indirectly, use, disclose, distribute, print, or copy any part of this message if you are not the intended recipient. The Port of Brisbane reserves the right to monitor all e-mail communications through its networks.
If you have received this transmission in error please let us know by contacting us on +61 7 3258 4888 or by reply E-Mail to the sender.
Any views expressed in this message are those of the individual sender, except where the message states otherwise and the sender is authorised to state them to be the views of any such entity.
 
Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/1fdddbdb/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Sep  5 00:24:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 5 Sep 2023 09:24:54 +0200
Subject: [gdal-dev] SICD driver
In-Reply-To: <DM5PR02MB38620270D66689D867ADA2EAF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38620270D66689D867ADA2EAF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <880bb5ba-4bee-2cf7-ac38-1273a7c9a28a@spatialys.com>

Hi,


SICD is a specification over NITF for which there is a GDAL driver : 
https://gdal.org/drivers/raster/nitf.html


There have been tunings a couple years ago to deal with SICD apparently: 
https://github.com/OSGeo/gdal/pull/4028


Even


Le 05/09/2023 ? 02:29, ni hao a ?crit?:
> Hi list,
>
> Is there a GDAL sensor independent complex data (SICD) driver ?
> https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407
>
> Thank you.
> <https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407>
> 	
> Metadata Standard: Sensor Independent Complex Data (SICD) | Customer 
> knowledge base 
> <https://help.umbra.space/kb/guide/en/metadata-standard-sensor-independent-complex-data-sicd-0rG1v1c6mZ/Steps/665407>
> IntroductionSICD is an open, standardized specification for SAR data 
> developed and maintained by the US National Geospatial Intelligence 
> Agency (NGA). The full documentation is available?here.Unlike CPHD, 
> SICD files have been processed through an "image formation algorithm" 
> and associated metadata has been adapted to meet a generic level of 
> "independence" from the sensor that generated it. Therefore, while 
> SICD files are more "opinionated" than CPHD, they are also less 
> idiosyncratic.The NGA's motivation for creating the SICD standard was 
> to enable integration of data from multiple disparate SAR systems 
> using a common processing toolset and downstream analytical workflow. 
> As more commercial providers adopt the SICD standard, end-users will 
> benefit from the ability to create generic tools rather than having to 
> build custom plugins for every vendor.Umbra uses the SICD standard to 
> provide complex phase data in a more refined state than it does with 
> its CPHD product. The "Polar Format Algorithm" (PFA) is used for
> help.umbra.space
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/25ec5157/attachment.htm>

From even.rouault at spatialys.com  Tue Sep  5 00:33:31 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 5 Sep 2023 09:33:31 +0200
Subject: [gdal-dev] Sentinel-3 driver
In-Reply-To: <DM5PR02MB3862A0A08685F2F39C67E69CF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625A5B99BAD495F7BA69D5F1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
 <DM5PR02MB3862A0A08685F2F39C67E69CF1E8A@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <1ecd6ec4-d441-8c53-eeec-33519336d63b@spatialys.com>

Hi,


no, no support for manifest file. Not totally sure there's anything in 
them substantially more interesting compared to what is already in the 
.nc files


The netCDF driver has been tuned to read some Sentinel 3 products, such 
as SRAL MWR Level 2


Even


Le 05/09/2023 ? 02:42, ni hao a ?crit?:
> https://sentinels.copernicus.eu/web/sentinel/user-guides/sentinel-3-altimetry/data-formats
> Sentinel-SAFE is based on the XML Formatted Data Units (XFDU)
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of ni 
> hao <ni_hao88 at hotmail.com>
> *Sent:* September 4, 2023 9:38 PM
> *To:* gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* [gdal-dev] Sentinel-3 driver
> Hi list,
>
> Is there a GDAL driver for?Sentinel-3's?xfdumanifest.xml, not just 
> individual *.nc ?
>
> Thank you.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/2fd58f01/attachment.htm>

From even.rouault at spatialys.com  Tue Sep  5 00:40:48 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 5 Sep 2023 09:40:48 +0200
Subject: [gdal-dev] Memory mapped VSILFILE ?
In-Reply-To: <de23573e-73a8-0e46-c4cb-74d3e7150550@aitchison.me.uk>
References: <de23573e-73a8-0e46-c4cb-74d3e7150550@aitchison.me.uk>
Message-ID: <b28a97ac-0b7f-3872-00d3-08a42f54d9ec@spatialys.com>

Andrew,

cf CPLVirtualMemFileMapNew() ( 
https://gdal.org/doxygen/cpl__virtualmem_8h.html#a02ab08b2cf138fa69d076ccd81eda3cb 
) which was an implementation step of 
https://gdal.org/development/rfc/rfc45_virtualmem.html

RawRasterBand::GetVirtualMemAuto() 
(https://github.com/OSGeo/gdal/blob/83425621471d4987087317999d6fff3a482da88f/gcore/rawdataset.cpp#L1522) 
may be of interest

Even

Le 05/09/2023 ? 08:39, Andrew C Aitchison a ?crit?:
>
> Drivers work with VSILFILE objects.
> Sometimes these are real files but as I understand it,
> sometimes these are actually blocks of memory behind a file interface.
>
> Is the reverse possible, ie can I mmap a VSILFILE and then
> read it as if it were a block of memory ?
> This would be for read-only drivers.
>
> There will inevitably be endian issues, but I have come across
> several file formats that look to me to be designed to be read
> this way, especially the header structures.
>
> Thanks,
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From a.pau at creaf.uab.cat  Tue Sep  5 01:26:02 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Tue, 5 Sep 2023 08:26:02 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
Message-ID: <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0). 
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
	For version 1.1:   ogr2ogr src dst - dsco=V11
	For version 2.0:   ogr2ogr src dst - dsco=V20
	For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> 
Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
> 	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, 
and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements 
if you want to monitor the progress in debug mode (the GeoPackage driver 
implemets something similar during spatial index writing, which can be a 
long operation), but there's nothing dedicated in the OGR API or ogr2ogr 
to monitor the progress of long operations occuring during dataset 
closing, as most drivers don't need that.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From a.pau at creaf.uab.cat  Tue Sep  5 01:42:54 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Tue, 5 Sep 2023 08:42:54 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
 <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Sorry
there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ... 

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
Enviado el: dimarts, 5 de setembre de 2023 10:26
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0). 
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
	For version 1.1:   ogr2ogr src dst - dsco=V11
	For version 2.0:   ogr2ogr src dst - dsco=V20
	For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
> 	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options 
> in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements 
if you want to monitor the progress in debug mode (the GeoPackage driver 
implemets something similar during spatial index writing, which can be a 
long operation), but there's nothing dedicated in the OGR API or ogr2ogr 
to monitor the progress of long operations occuring during dataset 
closing, as most drivers don't need that.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Tue Sep  5 02:28:02 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 5 Sep 2023 11:28:02 +0200
Subject: [gdal-dev] GDAL 3.7.2 RC1 available
Message-ID: <da205ffe-26eb-3fd2-9b63-9b9e88b4cba6@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.7.2 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.7.2/gdal372rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.7.2/gdalautotest-3.7.2rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.7.2/gdalautotest-3.7.2rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.7.2RC1/NEWS.md

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew at aitchison.me.uk  Tue Sep  5 04:31:59 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 5 Sep 2023 12:31:59 +0100 (BST)
Subject: [gdal-dev] GDAL 3.7.2 RC1 available
In-Reply-To: <da205ffe-26eb-3fd2-9b63-9b9e88b4cba6@spatialys.com>
References: <da205ffe-26eb-3fd2-9b63-9b9e88b4cba6@spatialys.com>
Message-ID: <b99c0e32-faf5-cc0a-4e10-c4fee927063f@aitchison.me.uk>

On Tue, 5 Sep 2023, Even Rouault wrote:

> Hi,
>
> I have prepared a GDAL/OGR 3.7.2 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.7.2/gdal372rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.7.2/gdalautotest-3.7.2rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.7.2/gdalautotest-3.7.2rc1.zip
>
> The NEWS file is here:
>
> ? https://github.com/OSGeo/gdal/blob/v3.7.2RC1/NEWS.md
>
> I'll call for a vote promoting it to final later this week if no
> serious problems are reported before.

Builds fine on Ubunutu 23.05 lunar with this morning's build of clang18:
 	Ubuntu clang version 18.0.0
 	(++20230905053523+0a73e1eb47dd-1~exp1~20230905053641.302)
from llvm-toolchain-snapshot.

I am seeing problems with pytest, but so far nothing that I don't see
with 3.7.1 compiled with gcc 13.1.0.

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From a.pau at creaf.uab.cat  Tue Sep  5 06:25:31 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Tue, 5 Sep 2023 13:25:31 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
 <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB81686F671C8E7C976A5B0C4BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi again,
after looking for that in the code, I think that versions depends on layer, so -lco is working fine (instead of -dsco, les used).
So, if there is no inconvenience, I'll use -lco Version=V20, etc...

Thanks again

-----Mensaje original-----
De: Abel Pau <a.pau at creaf.uab.cat> 
Enviado el: dimarts, 5 de setembre de 2023 10:43
Para: Abel Pau <a.pau at creaf.uab.cat>; Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Sorry
there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ... 

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau Enviado el: dimarts, 5 de setembre de 2023 10:26
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0). 
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
	For version 1.1:   ogr2ogr src dst - dsco=V11
	For version 2.0:   ogr2ogr src dst - dsco=V20
	For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
> 	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options 
> in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements if you want to monitor the progress in debug mode (the GeoPackage driver implemets something similar during spatial index writing, which can be a long operation), but there's nothing dedicated in the OGR API or ogr2ogr to monitor the progress of long operations occuring during dataset closing, as most drivers don't need that.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From mirza.nawandish at haritaevi.com  Tue Sep  5 06:47:27 2023
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Tue, 05 Sep 2023 16:47:27 +0300
Subject: [gdal-dev] : Inquiry about Converting MicroStation V8 DGN to
 GeoJSON or Alternative Formats
In-Reply-To: <MEYP282MB4074CB70CF0A28E66744EEC4C6E8A@MEYP282MB4074.AUSP282.PROD.OUTLOOK.COM>
References: <311821693890509@mail.yandex.com.tr>
 <MEYP282MB4074CB70CF0A28E66744EEC4C6E8A@MEYP282MB4074.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <3658181693921421@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230905/5b3854db/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Sep  7 13:43:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 7 Sep 2023 22:43:00 +0200
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
Message-ID: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>

Hi,

Motion:

Adopt GDAL 3.7.2RC1 as 3.7.2 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep  7 13:45:40 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 7 Sep 2023 20:45:40 +0000
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
In-Reply-To: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
References: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
Message-ID: <AM0PR09MB3219CEFC342AAD7B59DE2977FDEEA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: torstai 7. syyskuuta 2023 23.43
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release

Hi,

Motion:

Adopt GDAL 3.7.2RC1 as 3.7.2 release

Starting with my +1

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Thu Sep  7 14:11:10 2023
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 7 Sep 2023 23:11:10 +0200
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
In-Reply-To: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
References: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
Message-ID: <CACALY+Tm77Sib7zLJzciC3G_NmTyn8PGFwJtz252irpf=b=LMQ@mail.gmail.com>

+1
Tamas

Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2023. szept.
7., Cs, 22:44):

> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.2RC1 as 3.7.2 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230907/a0c18a88/attachment.htm>

From mdsumner at gmail.com  Thu Sep  7 19:20:43 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 8 Sep 2023 12:20:43 +1000
Subject: [gdal-dev] -scale default
Message-ID: <CAAcGz9_FNEHy64LG0RMvn+gd6qyQb9ZGtyNHy1y_dciTdiKX-g@mail.gmail.com>

Hi, I'm expecting `gdal_translate -scale` to emit values in the range 0,255
but it seems to be targeting 0,256.  (All works as expected when using
explicit src_min src_max dst_min dst_max).

To see the output range on a simple example (see code at link below in case
email garbles):

from osgeo import gdal
ds = gdal.Translate("/vsimem/scl.tif", "autotest/gcore/data/float32.tif",
options = "-scale")
ds.GetRasterBand(1).ComputeRasterMinMax()
## (0.0, 255.99899291992188)

Is that expected, am I missing something? I've tried variations on the
input values and output types.

https://gist.github.com/mdsumner/ee4103d8616b9aa341e82c46b44a8c8c

Cheers, Mike


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230908/9e09e306/attachment.htm>

From mateusz at loskot.net  Thu Sep  7 23:03:54 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 8 Sep 2023 08:03:54 +0200
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
In-Reply-To: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
References: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
Message-ID: <CABUeae_aPg59QC5QJwV45=vVdNbRk-90W2U+EzL0c6AUheurfQ@mail.gmail.com>

+1

Mateusz

On Thu, 7 Sept 2023, 22:43 Even Rouault, <even.rouault at spatialys.com> wrote:

> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.2RC1 as 3.7.2 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230908/06aeff8e/attachment.htm>

From even.rouault at spatialys.com  Fri Sep  8 04:34:22 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 8 Sep 2023 13:34:22 +0200
Subject: [gdal-dev] -scale default
In-Reply-To: <CAAcGz9_FNEHy64LG0RMvn+gd6qyQb9ZGtyNHy1y_dciTdiKX-g@mail.gmail.com>
References: <CAAcGz9_FNEHy64LG0RMvn+gd6qyQb9ZGtyNHy1y_dciTdiKX-g@mail.gmail.com>
Message-ID: <af35a827-b681-c88e-f42d-12502d9872af@spatialys.com>

Michael,

It turns out that gdal_translate was using 255.999 since the origins in 
2002 : 
https://github.com/OSGeo/gdal/commit/47d859efb25da249b5d62eb8619c36134ae76572#diff-d57b4553312c88a736821448adc155e6797653b0d902bd42f9310572aa71f0b0R215

I suspect the reasoning was that, if you rounded values down (floor) and 
used 255 as the scaleDstMax, and you remapped [0,65535] to [0,255] for 
example, then 65534. / (65535. / 255) = 254.996.. would be rounded to 
254. So you would only get 255 as the output for 65535 as the input, 
which seems "unfair". But GDAL actually rounds to closest, so if using 
dstMax = 65535, all input values in range [65535 - 128, 65535] get 
scaled to 255, which is OK to me. Of course that last "bucket" and the 
first one at 0 (input values in [0,128]) are half-width of the ones in 
the middle (input values in [129,129+256] get scaled to 1) but I don't 
think we can do much about that (discrete values vs intervals)

One downside of using dstMax=255.999 is that if your input range is [0, 
255], then -scale was not the identity (254 got transformed to 253), 
which is kind of an issue! Hence I've changed dstMax to be 255 in 
https://github.com/OSGeo/gdal/pull/8367

I've also noticed during testing a more subtle consistency issue when if 
you did for example "gdal_translate autotest/gcore/data/byte.tif out.asc 
-scale 0 1 0 1.5 -of aaigrid", you would get values outside of the [0, 
255] range because the VRT machinery was ignoring the constraints of the 
VRTRasterBand data type (Byte), and was only honouring the buffer data 
type of the RasterIO() request from the AAIGrid driver (Int32, always 
used when translating from source bands having integer data types, but 
with the reasoning that if you query a Byte band then you would get 
always value in [0,255] range)

Even

Le 08/09/2023 ? 04:20, Michael Sumner a ?crit?:
> Hi, I'm expecting `gdal_translate -scale` to emit values in the range 
> 0,255 but it seems to be targeting?0,256.? (All works as expected when 
> using explicit src_min src_max dst_min dst_max).
>
> To see the output range on a simple example (see code at link below in 
> case email garbles):
>
> from osgeo import gdal
> ds = gdal.Translate("/vsimem/scl.tif", 
> "autotest/gcore/data/float32.tif", options = "-scale")
> ds.GetRasterBand(1).ComputeRasterMinMax()
> ## (0.0, 255.99899291992188)
>
> Is that expected, am I missing something? I've tried variations on the 
> input values and output types.
>
> https://gist.github.com/mdsumner/ee4103d8616b9aa341e82c46b44a8c8c
>
> Cheers, Mike
>
>
> -- 
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230908/f00614a9/attachment-0001.htm>

From howard at hobu.co  Fri Sep  8 09:50:27 2023
From: howard at hobu.co (Howard Butler)
Date: Fri, 8 Sep 2023 11:50:27 -0500
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
In-Reply-To: <CABUeae_aPg59QC5QJwV45=vVdNbRk-90W2U+EzL0c6AUheurfQ@mail.gmail.com>
References: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
 <CABUeae_aPg59QC5QJwV45=vVdNbRk-90W2U+EzL0c6AUheurfQ@mail.gmail.com>
Message-ID: <4642D68D-2309-440B-BE81-9D43EEA0C35B@hobu.co>

+1

Howard

> On Sep 8, 2023, at 1:03 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> +1
> 
> Mateusz 
> 
> On Thu, 7 Sept 2023, 22:43 Even Rouault, <even.rouault at spatialys.com> wrote:
> Hi,
> 
> Motion:
> 
> Adopt GDAL 3.7.2RC1 as 3.7.2 release
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From mdsumner at gmail.com  Fri Sep  8 15:17:08 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 9 Sep 2023 08:17:08 +1000
Subject: [gdal-dev] -scale default
In-Reply-To: <af35a827-b681-c88e-f42d-12502d9872af@spatialys.com>
References: <CAAcGz9_FNEHy64LG0RMvn+gd6qyQb9ZGtyNHy1y_dciTdiKX-g@mail.gmail.com>
 <af35a827-b681-c88e-f42d-12502d9872af@spatialys.com>
Message-ID: <CAAcGz9_mGLBRei3KgWFTp84ScEQKbC3ftAg1hWh04s1enPM9LQ@mail.gmail.com>

nice, thanks so much for the extended description.

Cheers, Mike

On Fri, 8 Sept 2023, 21:34 Even Rouault, <even.rouault at spatialys.com> wrote:

> Michael,
>
> It turns out that gdal_translate was using 255.999 since the origins in
> 2002 :
> https://github.com/OSGeo/gdal/commit/47d859efb25da249b5d62eb8619c36134ae76572#diff-d57b4553312c88a736821448adc155e6797653b0d902bd42f9310572aa71f0b0R215
>
> I suspect the reasoning was that, if you rounded values down (floor) and
> used 255 as the scaleDstMax, and you remapped [0,65535] to [0,255] for
> example, then 65534. / (65535. / 255) = 254.996.. would be rounded to 254.
> So you would only get 255 as the output for 65535 as the input, which seems
> "unfair". But GDAL actually rounds to closest, so if using dstMax = 65535,
> all input values in range [65535 - 128, 65535] get scaled to 255, which is
> OK to me. Of course that last "bucket" and the first one at 0 (input values
> in [0,128]) are half-width of the ones in the middle (input values in
> [129,129+256] get scaled to 1) but I don't think we can do much about that
> (discrete values vs intervals)
>
> One downside of using dstMax=255.999 is that if your input range is [0,
> 255], then -scale was not the identity (254 got transformed to 253), which
> is kind of an issue! Hence I've changed dstMax to be 255 in
> https://github.com/OSGeo/gdal/pull/8367
>
> I've also noticed during testing a more subtle consistency issue when if
> you did for example "gdal_translate autotest/gcore/data/byte.tif out.asc
> -scale 0 1 0 1.5 -of aaigrid", you would get values outside of the [0, 255]
> range because the VRT machinery was ignoring the constraints of the
> VRTRasterBand data type (Byte), and was only honouring the buffer data type
> of the RasterIO() request from the AAIGrid driver (Int32, always used when
> translating from source bands having integer data types, but with the
> reasoning that if you query a Byte band then you would get always value in
> [0,255] range)
>
> Even
> Le 08/09/2023 ? 04:20, Michael Sumner a ?crit :
>
> Hi, I'm expecting `gdal_translate -scale` to emit values in the range
> 0,255 but it seems to be targeting 0,256.  (All works as expected when
> using explicit src_min src_max dst_min dst_max).
>
> To see the output range on a simple example (see code at link below in
> case email garbles):
>
> from osgeo import gdal
> ds = gdal.Translate("/vsimem/scl.tif", "autotest/gcore/data/float32.tif",
> options = "-scale")
> ds.GetRasterBand(1).ComputeRasterMinMax()
> ## (0.0, 255.99899291992188)
>
> Is that expected, am I missing something? I've tried variations on the
> input values and output types.
>
> https://gist.github.com/mdsumner/ee4103d8616b9aa341e82c46b44a8c8c
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230909/bd7d30a2/attachment.htm>

From afernandez at odyhpc.com  Sun Sep 10 10:26:45 2023
From: afernandez at odyhpc.com (afernandez)
Date: Sun, 10 Sep 2023 17:26:45 +0000
Subject: [gdal-dev] Why is color palette changed when the bands are plotted?
Message-ID: <af3f7880419e2.5959c62f7282d@odyhpc.com>

Hello,
I'm generating a raster file with GDAL in QGISv3.30. The pseudo-code (with 
the raster data loaded as 'var') reads:
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_Byte) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
band.SetNoDataValue(no_data)
band.SetDescription(time_step)
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) 
colors = gdal.ColorTable()
colors.CreateColorRamp(0, (165, 0, 35), 18, (201, 34, 39))
colors.CreateColorRamp(18, (201, 34, 39), 36, (226, 74, 51))
colors.CreateColorRamp(36, (226, 74, 51), 55, (244, 118, 71))
colors.CreateColorRamp(55, (244, 118, 71), 73, (250, 163, 91))
colors.CreateColorRamp(73, (250, 163, 91), 92, (253, 200, 118))
colors.CreateColorRamp(91, (253, 200, 118), 109, (254, 231, 152))
colors.CreateColorRamp(109, (254, 231, 152), 127, (254, 254, 189))
colors.CreateColorRamp(127, (254, 254, 189), 145, (231, 245, 161))
colors.CreateColorRamp(145, (231, 245, 161), 163, (198, 230, 127))
colors.CreateColorRamp(163, (198, 230, 127), 181, (162, 216, 104))
colors.CreateColorRamp(181, (162, 216, 104), 200, (114, 194, 101))
colors.CreateColorRamp(200, (114, 194, 101), 218, (64, 170, 90))
colors.CreateColorRamp(218, (64, 170, 90), 236, (20, 140, 75))
colors.CreateColorRamp(236, (20, 140, 75), 255, (0, 94, 42))
band.SetRasterColorTable(colors)
band.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
band.WriteArray(data_scaled2)
gdal_ds.FlushCache()
This has been working mostly well except when the color palette is changed 
to mostly greenish with some light yellow. I have been trying to figure out 
what is triggering the change of the color palette for the last 2 weeks 
(initially thinking that it'd be a small thing) but have come up empty. I 
have checked out all variables and types, but everything looks like the 
same whether it uses the given color ramp or the greenish palette. I was 
wondering if anyone has run into the same problem or has any suggestion 
because I really cannot find an explanation. 
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230910/9174ef08/attachment.htm>

From philippe.ghesquiere at airbus.com  Tue Sep 12 04:35:24 2023
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Tue, 12 Sep 2023 13:35:24 +0200
Subject: [gdal-dev] VPF to GPKG translation with Latin-1 encoded strings
Message-ID: <CAAes_OEvi00WBVLEhy3SLy+vEdZNv4ctNvLtw6K9nbTjbZFz9g@mail.gmail.com>

Dear all,

I need some help to deal with a VPF data set.

*Environment :*

   - Windows 10
   - Gdal V3.5.0

*Context :*

I have a VPF vector set I try to convert to Geopackage. Some strings are
Latin-1 encoded (ISO-8859-1).

The OGR_OGDI plugin supports this specific encoding, but the GPKG format
does not. Thus, Latin-1 encoded text strings are saved as "BLOB".

So far, I have tried 2 ways to convert my VPF data :

1) Direct conversion to GPKG :
ogr2ogr -f GPKG mig040.gpkg
gltp:/vrf/e:/KIT_GEOCAPI_v3.0/02_Donnees_Test-Mires/BAO_M011_Ed1/VPF/MIG040/EURNASIA/MIG_040
<http://gltp/vrf/e:/KIT_GEOCAPI_v3.0/02_Donnees_Test-Mires/BAO_M011_Ed1/VPF/MIG040/EURNASIA/MIG_040>
"transtxt at trans(*)_text"

Text is saved as "BLOB".

I have tried several options (-lco, -oo, -doo, with SHAPE_ENCODING
configuration variable, ...) with no success.

2) Two-step conversion

ogr2ogr mig040.shp
gltp:/vrf/e:/KIT_GEOCAPI_v3.0/02_Donnees_Test-Mires/BAO_M011_Ed1/VPF/MIG040/EURNASIA/MIG_040
<http://gltp/vrf/e:/KIT_GEOCAPI_v3.0/02_Donnees_Test-Mires/BAO_M011_Ed1/VPF/MIG040/EURNASIA/MIG_040>
"transtxt at trans(*)_text"

ogr2ogr -f GPKG mig040.gpkg mig040.shp

Text is saved as UTF-8

*My question :*

Is there a way to convert directly to GPKG with UTF-8 text conversion ?

N.B. : I can share the data set. How can I do it ?


Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230912/ea43bb2a/attachment.htm>

From jluis at ualg.pt  Tue Sep 12 07:30:48 2023
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Tue, 12 Sep 2023 14:30:48 +0000
Subject: [gdal-dev] Failing to access a 8-bit SUBDATASET from GMT.
Message-ID: <GVXPR04MB9926B032EACBA95431532984A6F1A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Hi,

I am getting an error in GMT when trying to read the "qual_sst" subdataset of this nc file
https://fct-gmt.ualg.pt/gmt/data/cache/A2016152023000.L2_LAC_SST.nc

But it's only that subdataset that errors.

gdalinfo A2016152023000.L2_LAC_SST.nc
...
  SUBDATASET_1_NAME=NETCDF:"A2016152023000.L2_LAC_SST.nc":/geophysical_data/sst
  SUBDATASET_1_DESC=[2030x1354] sea_surface_temperature (16-bit integer)
  SUBDATASET_2_NAME=NETCDF:"A2016152023000.L2_LAC_SST.nc":/geophysical_data/qual_sst
  SUBDATASET_2_DESC=[2030x1354] /geophysical_data/qual_sst (8-bit integer)
...

For example, this works (and works for all other subdasets except "qual_sst"):

gmt grd2xyz A2016152023000.L2_LAC_SST.nc=gd?NETCDF:"A2016152023000.L2_LAC_SST.nc":/geophysical_data/sst -ZTLf > lixo.b

but this fails with

ERROR 7: Assertion `false' failed in file `C:\progs_cygw\GMTdev\gmt5\master\src\gmt_gdalread.c', line 1402

The code in question starts in

https://github.com/GenericMappingTools/gmt/blob/master/src/gmt_gdalread.c#L1246

and debugging shows that GDALGetRasterDataType(hBand) is returning 14, which according to this page
https://gdal.org/api/raster_c_api.html#_CPPv412GDALDataType

indicates that the layer is interpreted to be GDT_CFloat64

I get the exact same error when loading that subdataset from my Julia wrapper, that inquires the gdal shared lib directly and does not use the code wrapped in GMT.

But GDAL itself does not have problems extracting the data. This works fine

gdal_translate NETCDF:"A2016152023000.L2_LAC_SST.nc":/geophysical_data/qual_sst qual_lixo.nc


Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230912/8919e4a8/attachment.htm>

From howard at hobu.co  Tue Sep 12 12:21:32 2023
From: howard at hobu.co (Howard Butler)
Date: Tue, 12 Sep 2023 14:21:32 -0500
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
Message-ID: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>

Dear PSC,

Dan Baston is an active GDAL maintainer who does not currently have merge rights. Let's fix that so he can get more work done without waiting on someone to merge things up :)

/me starts with +1

Howard

From sean.gillies at gmail.com  Tue Sep 12 12:49:58 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 12 Sep 2023 13:49:58 -0600
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <CAOodmJrxcJP8ZVV-2JgoH-8dgyCzWg8tmy-BEWgjkR1h8amN=Q@mail.gmail.com>

Enthusiastic +1 from me

On Tue, Sep 12, 2023, 1:22 PM Howard Butler <howard at hobu.co> wrote:

> Dear PSC,
>
> Dan Baston is an active GDAL maintainer who does not currently have merge
> rights. Let's fix that so he can get more work done without waiting on
> someone to merge things up :)
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230912/d6f512b7/attachment.htm>

From even.rouault at spatialys.com  Tue Sep 12 12:52:53 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 12 Sep 2023 21:52:53 +0200
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <5d886a8a-b01e-8995-7a79-a84f236d2295@spatialys.com>

Hi,

Obvious +1 given all the work Dan is doing.

Even

Le 12/09/2023 ? 21:21, Howard Butler a ?crit?:
> Dear PSC,
>
> Dan Baston is an active GDAL maintainer who does not currently have merge rights. Let's fix that so he can get more work done without waiting on someone to merge things up :)
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep 12 13:05:17 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 12 Sep 2023 20:05:17 +0000
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <AM0PR09MB321999CB5B30119DEDEC3CC3FDF1A@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1 for sure.

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Howard Butler
L?hetetty: tiistai 12. syyskuuta 2023 22.22
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Motion: Grant Dan Baston Merge Rights

Dear PSC,

Dan Baston is an active GDAL maintainer who does not currently have merge rights. Let's fix that so he can get more work done without waiting on someone to merge things up :)

/me starts with +1

Howard
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Tue Sep 12 15:41:32 2023
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 12 Sep 2023 18:41:32 -0400
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <f6a5c72b-6ab6-738c-ef83-ccb622e01ced@mapgears.com>

Obviously +1

Daniel

On 2023-09-12 15:21, Howard Butler wrote:
> Dear PSC,
> 
> Dan Baston is an active GDAL maintainer who does not currently have merge rights. Let's fix that so he can get more work done without waiting on someone to merge things up :)
> 
> /me starts with +1
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From schwehr at gmail.com  Tue Sep 12 16:26:02 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 12 Sep 2023 16:26:02 -0700
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <CACmBxyuwOstWLFgCJ9FXxOBC89KWcjLb4RqG8L4VB7FWN_frrw@mail.gmail.com>

+1 KurtS

On Tue, Sep 12, 2023, 12:21 PM Howard Butler <howard at hobu.co> wrote:

> Dear PSC,
>
> Dan Baston is an active GDAL maintainer who does not currently have merge
> rights. Let's fix that so he can get more work done without waiting on
> someone to merge things up :)
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230912/bce8b71e/attachment.htm>

From warmerdam at pobox.com  Tue Sep 12 21:29:21 2023
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 13 Sep 2023 00:29:21 -0400
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <CACmBxyuwOstWLFgCJ9FXxOBC89KWcjLb4RqG8L4VB7FWN_frrw@mail.gmail.com>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
 <CACmBxyuwOstWLFgCJ9FXxOBC89KWcjLb4RqG8L4VB7FWN_frrw@mail.gmail.com>
Message-ID: <CA+YzLBdRE=KG+DHQLBp+XWURo8H6JdbQQg=1-aqnhaAEszKJeg@mail.gmail.com>

+1 FrankW


On Tue, Sep 12, 2023 at 7:26?PM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 KurtS
>
> On Tue, Sep 12, 2023, 12:21 PM Howard Butler <howard at hobu.co> wrote:
>
>> Dear PSC,
>>
>> Dan Baston is an active GDAL maintainer who does not currently have merge
>> rights. Let's fix that so he can get more work done without waiting on
>> someone to merge things up :)
>>
>> /me starts with +1
>>
>> Howard
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230913/96914d62/attachment-0001.htm>

From mateusz at loskot.net  Wed Sep 13 00:35:46 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 13 Sep 2023 09:35:46 +0200
Subject: [gdal-dev] Motion: Grant Dan Baston Merge Rights
In-Reply-To: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
References: <3B0BB1CD-DD32-4EBE-8BC5-7F5E5E3F5146@hobu.co>
Message-ID: <CABUeae8in7KaVUWWKEWKJpzL1Hw=Y6Q5Mv2m=SiPF=p79Qyf5g@mail.gmail.com>

+1

Mateusz

On Tue, 12 Sept 2023 at 21:21, Howard Butler <howard at hobu.co> wrote:
>
> Dear PSC,
>
> Dan Baston is an active GDAL maintainer who does not currently have merge rights. Let's fix that so he can get more work done without waiting on someone to merge things up :)
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Wed Sep 13 03:14:29 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 13 Sep 2023 12:14:29 +0200
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.2RC1 as 3.7.2 release
In-Reply-To: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
References: <24acab21-763d-0dd7-880c-0b02e58bae74@spatialys.com>
Message-ID: <3b7631d7-f3de-a777-8360-3dac74170ccb@spatialys.com>

Hi,

motion passed with +1 from PSC members JukkaR, TamasS, MateuszL, HowardB 
and me.

Even

Le 07/09/2023 ? 22:43, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.2RC1 as 3.7.2 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Sep 13 03:30:56 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 13 Sep 2023 12:30:56 +0200
Subject: [gdal-dev] GDAL 3.7.2 is released
Message-ID: <6267330f-a658-441f-8935-21095c235d4d@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.7.2 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.7.2/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2.tar.xz
 ??? https://download.osgeo.org/gdal/3.7.2/gdal-3.7.2.tar.gz
 ??? https://download.osgeo.org/gdal/3.7.2/gdal372.zip

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From edzer.pebesma at uni-muenster.de  Thu Sep 14 04:52:06 2023
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 14 Sep 2023 13:52:06 +0200
Subject: [gdal-dev] Global state for datum grid access?
Message-ID: <d94fd6d1-3e50-a413-9199-a2a17c0f1e2d@uni-muenster.de>

This came up here: https://github.com/r-spatial/sf/issues/2166

It seems to me that GDAL queries PROJ's ability to access the network 
for datum grids once, and remembers that. That means that applications 
can't switch this on and off on demand and expect GDAL to follow. Is 
this the case? If this is the case, is there a way applications can ask 
GDAL what this state is?

R package sf interacts with PROJ through GDAL as well as directly. This 
sounds messy, but some users want to get NA coordinates back for points 
that are not transformable.
-- 
Edzer Pebesma (he/him)
University M?nster, Institute for Geoinformatics
Heisenbergstrasse 2, 48149 M?nster, Germany
Phone: +49 251 8333081

From even.rouault at spatialys.com  Thu Sep 14 05:30:48 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 14 Sep 2023 14:30:48 +0200
Subject: [gdal-dev] Global state for datum grid access?
In-Reply-To: <d94fd6d1-3e50-a413-9199-a2a17c0f1e2d@uni-muenster.de>
References: <d94fd6d1-3e50-a413-9199-a2a17c0f1e2d@uni-muenster.de>
Message-ID: <5b568762-65b3-e0c3-41ad-c0f5854b74ee@spatialys.com>

Edzer,

Le 14/09/2023 ? 13:52, Edzer Pebesma a ?crit?:
> This came up here: https://github.com/r-spatial/sf/issues/2166
>
> It seems to me that GDAL queries PROJ's ability to access the network 
> for datum grids once, and remembers that. That means that applications 
> can't switch this on and off on demand and expect GDAL to follow. Is 
> this the case? If this is the case, is there a way applications can 
> ask GDAL what this state is?

The first time, per thread, GDAL uses PROJ it will inherit the network 
settings from PROJ when creating its per-thread PROJ context.

The current status can be queried with OSRGetPROJEnableNetwork(): 
https://gdal.org/api/ogr_srs_api.html#_CPPv423OSRGetPROJEnableNetworkv

and changed with OSRSetPROJEnableNetwork(): 
https://gdal.org/api/ogr_srs_api.html#_CPPv423OSRSetPROJEnableNetworki


I see that sf_proj_network() calls CPL_enable_network() 
(https://github.com/r-spatial/sf/blob/f36bd2f7273ace6d244e401b760291a3dc195c3c/src/proj.cpp#L193) 
which calls proj_context_set_enable_network() on the default PROJ 
context. If this is done before any GDAL use (or more exactly any use of 
PROJ by GDAL), then it is OK. But if it is called afterwards, GDAL will 
have created its own PROJ context, and later changes to the default PROJ 
context will not affect it anymore. Presumably sf_proj_network() or 
CPL_enable_network() should call OSRSetPROJEnableNetwork() as well if 
the intent if that this affects both pure-PROJ and PROJ-through-GDAL uses.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230914/f9c7a310/attachment.htm>

From edzer.pebesma at uni-muenster.de  Thu Sep 14 06:12:29 2023
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Thu, 14 Sep 2023 15:12:29 +0200
Subject: [gdal-dev] Global state for datum grid access?
In-Reply-To: <5b568762-65b3-e0c3-41ad-c0f5854b74ee@spatialys.com>
References: <d94fd6d1-3e50-a413-9199-a2a17c0f1e2d@uni-muenster.de>
 <5b568762-65b3-e0c3-41ad-c0f5854b74ee@spatialys.com>
Message-ID: <4ae77041-d474-a0d7-5351-556b8a2598a5@uni-muenster.de>

Thanks a lot, Even, I missed those. Many regards,

On 14/09/2023 14:30, Even Rouault wrote:
> Edzer,
> 
> Le 14/09/2023 ? 13:52, Edzer Pebesma a ?crit?:
>> This came up here: https://github.com/r-spatial/sf/issues/2166
>>
>> It seems to me that GDAL queries PROJ's ability to access the network 
>> for datum grids once, and remembers that. That means that applications 
>> can't switch this on and off on demand and expect GDAL to follow. Is 
>> this the case? If this is the case, is there a way applications can 
>> ask GDAL what this state is?
> 
> The first time, per thread, GDAL uses PROJ it will inherit the network 
> settings from PROJ when creating its per-thread PROJ context.
> 
> The current status can be queried with OSRGetPROJEnableNetwork(): 
> https://gdal.org/api/ogr_srs_api.html#_CPPv423OSRGetPROJEnableNetworkv
> 
> and changed with OSRSetPROJEnableNetwork(): 
> https://gdal.org/api/ogr_srs_api.html#_CPPv423OSRSetPROJEnableNetworki
> 
> 
> I see that sf_proj_network() calls CPL_enable_network() 
> (https://github.com/r-spatial/sf/blob/f36bd2f7273ace6d244e401b760291a3dc195c3c/src/proj.cpp#L193) which calls proj_context_set_enable_network() on the default PROJ context. If this is done before any GDAL use (or more exactly any use of PROJ by GDAL), then it is OK. But if it is called afterwards, GDAL will have created its own PROJ context, and later changes to the default PROJ context will not affect it anymore. Presumably sf_proj_network() or CPL_enable_network() should call OSRSetPROJEnableNetwork() as well if the intent if that this affects both pure-PROJ and PROJ-through-GDAL uses.
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Edzer Pebesma (he/him)
University M?nster, Institute for Geoinformatics
Heisenbergstrasse 2, 48149 M?nster, Germany
Phone: +49 251 8333081

From sean.gillies at gmail.com  Thu Sep 14 08:14:51 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 14 Sep 2023 09:14:51 -0600
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
Message-ID: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>

Hi all,

In https://github.com/OSGeo/gdal/pull/8155#issuecomment-1704923263 I think
I see (for the first time?) the beginning of a specification of the syntax
for GDAL "file names". I think it would be helpful if there was an RFC for
this.

I'm sure a lot of applications construct GDAL file names without much
understanding of what's correct or incorrect. A formal spec could help make
it more likely that anyone can construct a valid filename on the first try.

A stretch goal for the RFC could be to come up with a syntax that is
sufficiently general that authors of new format drivers don't have to
create their own new idiosyncratic file names.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230914/138c7881/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 14 09:21:29 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 14 Sep 2023 18:21:29 +0200
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
In-Reply-To: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
References: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
Message-ID: <f8d5f836-8372-fb6e-1928-310c6d4db1a7@spatialys.com>

Sean,

It is far from obvious to me to find a universal pattern that would fit 
existing and future use cases. If we would find a universal syntax, 
there would be the problem of deciding what to do with code that doesn't 
match it: support only new way (breaking external code),? or supporting 
both old and new ways (additional complexity in our code base)

How would we deal with the existing practices which are very diverse ? 
Examples:

- True filenames (most of the drivers)

- Database based drivers:

PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'" 
(Postgis vector) PG:"[host=''] [port=''] [dbname='' [user=''] 
[password=''] [schema=''] [table=''] [column=''] [where=''] [mode=''] 
[outdb_resolution='']" (Postgis raster, consistent with previous one) 
MYSQL:dbname,user="userid",password="password",host=x,port=y 
OCI:username/password at host_name:port_number/service_name:MY_SCHEMA.MY_VIEW georaster:<user>{,/}<pwd>{,@}[db],[schema.][table],[column],[where]
georaster:<user>{,/}<pwd>{,@}[db],<rdt>,<rid>

- Web services (some of them also accept plain filenames that are .xml 
files describing the service and parameters)

WMS:http://demo.opengeo.org/geoserver/gwc/service/wms?SERVICE=WMS&VERSION=1.1.1&
                             REQUEST=GetMap&LAYERS=og%3Abugsites&SRS=EPSG:900913&
                             BBOX=-1.15841845090625E7,5479006.186718751,-1.1505912992109375E7,5557277.703671876&
                             FORMAT=image/png&TILESIZE=256&OVERVIEWCOUNT=25&MINRESOLUTION=0.0046653459640220&TILED=true" 
(note the mix of pure WMS GetMap request query parameters + GDAL 
specific properties TILESIZE, OVERVIEWCOUNT, MINRESOLUTION)

WCS:http://194.66.252.155/cgi-bin/BGS_EMODnet_bathymetry/ows?VERSION=1.1.0&coverage=BGS_EMODNET_CentralMed-MCol
WFS:http://www2.dmsolutions.ca/cgi-bin/mswfs_gmap OAPIF:https://www.ldproxy.nrw.de/rest/services/kataster
WMTS:http://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.xml,layer=lb
( layer= is GDAL specific)


- Raster subdatasets (whether to surround filename with double quotes is 
driver specific)

NITF_IM:{image_number}:{filename}
NITF_TOC_ENTRY:{product_type}_{chartname}_{scale}_{somenumber}_{anothernumber}:GNCJNCN/rpf/a.toc
ECRG_TOC_ENTRY:{product_name}:{disk_name}:{scale}:{filename}
GTIFF:{directory_number}:{filename}
GTIFF:off:{directory_offset}:{filename}
GPKG:{filename}:{tablename}
netCDF:{filename}:{variable_name}
HDF5:{filename}:{dataset_path}
ZARR:{filename}? (mostly when filename is /vsicurl/ and we don't have a 
ReadDirectory() API)
ZARR:{filename}:{path_to_array}
ZARR:{filename}:{path_to_array}:{third_dim_index}[:{fourth_dim_index}[:{fifth_dim_index}...]]

- Other syntax

vrt:// connection string 
(https://gdal.org/drivers/raster/vrt.html#vrt-connection-string) . e.g.? 
vrt://my.tif?bands=3,2,1

Do you have also /vsi syntax in mind ?

Even

Le 14/09/2023 ? 17:14, Sean Gillies a ?crit?:
> Hi all,
>
> In https://github.com/OSGeo/gdal/pull/8155#issuecomment-1704923263 I 
> think I see (for the first time?) the beginning of a specification of 
> the syntax for GDAL "file names". I think it would be helpful if there 
> was an RFC for this.
>
> I'm sure a lot of applications construct GDAL file names without much 
> understanding of what's correct or incorrect. A formal spec could help 
> make it more likely that anyone can construct a valid filename on the 
> first try.
>
> A stretch goal for the RFC could be to come up with a syntax that is 
> sufficiently general that authors of new format drivers don't have to 
> create their own new idiosyncratic file names.
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230914/fcdfc63b/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Sep 15 02:23:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 15 Sep 2023 11:23:51 +0200
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard C/C++
 integer types
Message-ID: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>

Hi,

I've submitted an initial version of RFC95: Use standard C/C++ integer types

 ??? https://github.com/OSGeo/gdal/pull/8399

It has important implications on backward compatibility of C and C++ 
API. The "questions to be answer" paragraph need to be answered.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From elpaso at itopen.it  Fri Sep 15 07:23:52 2023
From: elpaso at itopen.it (ElPaso)
Date: Fri, 15 Sep 2023 16:23:52 +0200
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
In-Reply-To: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
References: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
Message-ID: <002e3930-0f98-8f2e-a6bd-508618b69092@itopen.it>

Il 14/09/23 17:14, Sean Gillies ha scritto:
> Hi all,
>
> In https://github.com/OSGeo/gdal/pull/8155#issuecomment-1704923263 I 
> think I see (for the first time?) the beginning of a specification of 
> the syntax for GDAL "file names". I think it would be helpful if there 
> was an RFC for this.
>
> I'm sure a lot of applications construct GDAL file names without much 
> understanding of what's correct or incorrect. A formal spec could help 
> make it more likely that anyone can construct a valid filename on the 
> first try.
>
> A stretch goal for the RFC could be to come up with a syntax that is 
> sufficiently general that authors of new format drivers don't have to 
> create their own new idiosyncratic file names.
>

Hi Sean,


I totally agree that it would be useful to have a formally defined 
syntax to describe data sources, we have the same problem with QGIS 
QgsDataSourceUri and we are treating the URIs as a private 
implementation detail, but in QGIS we have a GUI to set the data source 
strings that partially mitigatest the issue.


We discussed a few times what it could be the best format to encode a 
data source and URL encoding is probably a good candidate because it's 
well known and well supported by libraries.


Maybe something like:


<driver_name>://<path|connection>/<arguments ...>

mssql://username:password at hostname:port/?table=table_name&arg1=arg1...

gpkg:///path/to.gpkg?table=table_name&arg1=arg1...

postgis://username:password at hostname:port/?table=table_name&arg1=arg1...

shapefile:///path/to.shp/?arg1=arg1...


-- 
Alessandro Pasotti
w3: www.itopen.it


From sean.gillies at gmail.com  Fri Sep 15 08:45:46 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Fri, 15 Sep 2023 09:45:46 -0600
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
In-Reply-To: <f8d5f836-8372-fb6e-1928-310c6d4db1a7@spatialys.com>
References: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
 <f8d5f836-8372-fb6e-1928-310c6d4db1a7@spatialys.com>
Message-ID: <CAOodmJqF3KJO8OyCcX1knYYUH0VOZQencpM5aEvi7cso8Z3d9w@mail.gmail.com>

Even,

I agree that there is an untidy legacy. And it's probably not worth
formalizing the marginal filenames and connection strings. How about an RFC
and formal syntax only for hierarchical datasets then? It seems like this
is the direction the industry is growing.

Yes, I think a formal syntax for /vsi filenames would be useful. It's
almost done already, right? Only in prose, not ABNF (or whatever), but
that's a good start.

On Thu, Sep 14, 2023 at 10:21?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
> It is far from obvious to me to find a universal pattern that would fit
> existing and future use cases. If we would find a universal syntax, there
> would be the problem of deciding what to do with code that doesn't match
> it: support only new way (breaking external code),  or supporting both old
> and new ways (additional complexity in our code base)
>
> How would we deal with the existing practices which are very diverse ?
> Examples:
>
> - True filenames (most of the drivers)
>
> - Database based drivers:
>
> PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'"   (Postgis vector)PG:"[host=''] [port=''] [dbname='' [user=''] [password=''] [schema=''] [table=''] [column=''] [where=''] [mode=''] [outdb_resolution='']"  (Postgis raster, consistent with previous one)
> MYSQL:dbname,user="userid",password="password",host=x,port=y
> OCI:username/password at host_name:port_number/service_name:MY_SCHEMA.MY_VIEWgeoraster:<user>{,/}<pwd>{,@}[db],[schema.][table],[column],[where]
> georaster:<user>{,/}<pwd>{,@}[db],<rdt>,<rid>
>
> - Web services (some of them also accept plain filenames that are .xml
> files describing the service and parameters)
>
> WMS:http://demo.opengeo.org/geoserver/gwc/service/wms?SERVICE=WMS&VERSION=1.1.1&
>                             REQUEST=GetMap&LAYERS=og%3Abugsites&SRS=EPSG:900913&
>                             BBOX=-1.15841845090625E7,5479006.186718751,-1.1505912992109375E7,5557277.703671876&
>                             FORMAT=image/png&TILESIZE=256&OVERVIEWCOUNT=25&MINRESOLUTION=0.0046653459640220&TILED=true"
> (note the mix of pure WMS GetMap request query parameters + GDAL specific properties TILESIZE, OVERVIEWCOUNT, MINRESOLUTION)
>
> WCS:http://194.66.252.155/cgi-bin/BGS_EMODnet_bathymetry/ows?VERSION=1.1.0&coverage=BGS_EMODNET_CentralMed-MColWFS:http://www2.dmsolutions.ca/cgi-bin/mswfs_gmapOAPIF:https://www.ldproxy.nrw.de/rest/services/katasterWMTS:http://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.xml,layer=lb
> ( layer= is GDAL specific)
>
>
> - Raster subdatasets (whether to surround filename with double quotes is
> driver specific)
>
> NITF_IM:{image_number}:{filename}
>
> NITF_TOC_ENTRY:{product_type}_{chartname}_{scale}_{somenumber}_{anothernumber}:GNCJNCN/rpf/a.toc
> ECRG_TOC_ENTRY:{product_name}:{disk_name}:{scale}:{filename}
> GTIFF:{directory_number}:{filename}
> GTIFF:off:{directory_offset}:{filename}
> GPKG:{filename}:{tablename}
> netCDF:{filename}:{variable_name}
> HDF5:{filename}:{dataset_path}
> ZARR:{filename}  (mostly when filename is /vsicurl/ and we don't have a
> ReadDirectory() API)
> ZARR:{filename}:{path_to_array}
>
> ZARR:{filename}:{path_to_array}:{third_dim_index}[:{fourth_dim_index}[:{fifth_dim_index}...]]
>
> - Other syntax
>
> vrt:// connection string (
> https://gdal.org/drivers/raster/vrt.html#vrt-connection-string) . e.g.
> vrt://my.tif?bands=3,2,1
>
> Do you have also /vsi syntax in mind ?
>
> Even
>
> Le 14/09/2023 ? 17:14, Sean Gillies a ?crit :
>
> Hi all,
>
> In https://github.com/OSGeo/gdal/pull/8155#issuecomment-1704923263 I
> think I see (for the first time?) the beginning of a specification of the
> syntax for GDAL "file names". I think it would be helpful if there was an
> RFC for this.
>
> I'm sure a lot of applications construct GDAL file names without much
> understanding of what's correct or incorrect. A formal spec could help make
> it more likely that anyone can construct a valid filename on the first try.
>
> A stretch goal for the RFC could be to come up with a syntax that is
> sufficiently general that authors of new format drivers don't have to
> create their own new idiosyncratic file names.
>
> --
> Sean Gillies
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230915/c77ad9f8/attachment.htm>

From sean.gillies at gmail.com  Fri Sep 15 08:52:09 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Fri, 15 Sep 2023 09:52:09 -0600
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
In-Reply-To: <002e3930-0f98-8f2e-a6bd-508618b69092@itopen.it>
References: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
 <002e3930-0f98-8f2e-a6bd-508618b69092@itopen.it>
Message-ID: <CAOodmJpNggAp4sz_L7VAWcO5NT1YrHbk98Zk_oUaVPgZED87SA@mail.gmail.com>

Hi Alessandro,

On Fri, Sep 15, 2023 at 8:31?AM ElPaso <elpaso at itopen.it> wrote:

> Il 14/09/23 17:14, Sean Gillies ha scritto:
> > Hi all,
> >
> > In https://github.com/OSGeo/gdal/pull/8155#issuecomment-1704923263 I
> > think I see (for the first time?) the beginning of a specification of
> > the syntax for GDAL "file names". I think it would be helpful if there
> > was an RFC for this.
> >
> > I'm sure a lot of applications construct GDAL file names without much
> > understanding of what's correct or incorrect. A formal spec could help
> > make it more likely that anyone can construct a valid filename on the
> > first try.
> >
> > A stretch goal for the RFC could be to come up with a syntax that is
> > sufficiently general that authors of new format drivers don't have to
> > create their own new idiosyncratic file names.
> >
>
> Hi Sean,
>
>
> I totally agree that it would be useful to have a formally defined
> syntax to describe data sources, we have the same problem with QGIS
> QgsDataSourceUri and we are treating the URIs as a private
> implementation detail, but in QGIS we have a GUI to set the data source
> strings that partially mitigatest the issue.
>
>
> We discussed a few times what it could be the best format to encode a
> data source and URL encoding is probably a good candidate because it's
> well known and well supported by libraries.
>
>
> Maybe something like:
>
>
> <driver_name>://<path|connection>/<arguments ...>
>
> mssql://username:password at hostname:port/?table=table_name&arg1=arg1...
>
> gpkg:///path/to.gpkg?table=table_name&arg1=arg1...
>
> postgis://username:password at hostname:port/?table=table_name&arg1=arg1...
>
> shapefile:///path/to.shp/?arg1=arg1...
>

Yes, something like this is my dream :) I started working on such a
proposal a while back and then was derailed by a job change. I might try to
dust it off and start writing on it again.

I think the "vrt://" URI scheme was a mistake, though, and that we
shouldn't extend it to dozens of other formats. At least not without
consulting with other software communities. Ideally these schemes would be
universal across the internet.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230915/73b1c19f/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Sep 15 09:07:49 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 15 Sep 2023 18:07:49 +0200
Subject: [gdal-dev] Formalizing GDAL "file name" syntax in an RFC?
In-Reply-To: <CAOodmJqF3KJO8OyCcX1knYYUH0VOZQencpM5aEvi7cso8Z3d9w@mail.gmail.com>
References: <CAOodmJrA248YJKvXZMNby5=UN-YJyA8780w+gSx6wt68tw-UbQ@mail.gmail.com>
 <f8d5f836-8372-fb6e-1928-310c6d4db1a7@spatialys.com>
 <CAOodmJqF3KJO8OyCcX1knYYUH0VOZQencpM5aEvi7cso8Z3d9w@mail.gmail.com>
Message-ID: <5af06ff2-654a-77fd-c8b1-23595a2280a8@spatialys.com>


> I agree that there is an untidy legacy. And it's probably not worth 
> formalizing the marginal filenames and connection strings. How about 
> an RFC and formal syntax only for hierarchical datasets then? It seems 
> like this is the direction the industry is growing.
Hiearchical gridded datasets are well covered by the multidimensional 
API, which has facilities like 
GDALGroupOpenMDArrayFromFullname(hRootGroup, 
"/group/subgroup/.../array_name") . What you provide to GDALOpen() when 
using the API is the plain filename? (or ZARR:{filename} since it is 
sometimes hard for the Zarr driver to recognize datasets otherwise)
>
> Yes, I think a formal syntax for /vsi filenames would be useful. It's 
> almost done already, right?

There's some differences among the /vsi file systems how to provide options

/vsisubfile/<offset>,<filename>

/vsisubfile/<offset>_<size>,<filename>

/vsizip/<filename.zip>/<subpath>

/vsizip/{<container_without_zip_extension>}/<subpath> ? (the external { 
} are real characters, so an example of this is for example 
/vsizip/{my.apk}/file.bin )

/vsicurl?<option1>=<val1>&url=<url>

I've a PR sitting at https://github.com/OSGeo/gdal/pull/8351 to propose 
/vsicached?<option1>=<val1>&file=<filename>

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Fri Sep 15 09:21:13 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 15 Sep 2023 09:21:13 -0700
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
Message-ID: <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>

+1 Yes please!!

Thoughts:
- I've battled with the types so many times over the years. The pain caused
by a switch will be well worth it
- Q1: I'm for going to GDAL 4.0.
- Q2: Having a GDAL_USE_OLD_INT_TYPES for a while seems like a good idea to
expose the alias to users of the library
- Q3: Yes to vsi_l_offset -> uint64_t. I'm 90% for it. For me: Yes offset
has meaning, but if the type is critical to understanding a function /
method interface, we should have a comment. Knowing that it's an unsigned
64 bit int is usually more important. Would be great if anyone against this
change could speak up and give some examples.

Short term pain, but long term big gains in readability for people new to
GDAL / stability / maintainability / ability to cross compile.

On Fri, Sep 15, 2023 at 2:24?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I've submitted an initial version of RFC95: Use standard C/C++ integer
> types
>
>      https://github.com/OSGeo/gdal/pull/8399
>
> It has important implications on backward compatibility of C and C++
> API. The "questions to be answer" paragraph need to be answered.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230915/c8fc56a1/attachment.htm>

From lnicola at dend.ro  Fri Sep 15 09:32:53 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Fri, 15 Sep 2023 19:32:53 +0300
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
Message-ID: <2eb9524a-65a0-45d8-9ac4-0c52c3e4d4b5@app.fastmail.com>

On Fri, Sep 15, 2023, at 19:21, Kurt Schwehr wrote:
> - Q3: Yes to vsi_l_offset -> uint64_t. I'm 90% for it. For me: Yes offset has meaning, but if the type is critical to understanding a function / method interface, we should have a comment. Knowing that it's an unsigned 64 bit int is usually more important. Would be great if anyone against this change could speak up and give some examples.

It's 2023, not 1993. I'm going to assume that any library using 32 bits for file lengths or offsets is unmaintained. So I don't really care about the width here.

As for the typedef, it's nice to have, but not terribly necessary either when you have good IDE tooling 2023, right?).

So I'm +0 on this change.

Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230915/b92bc628/attachment.htm>

From j1 at jimenezshaw.com  Sat Sep 16 02:36:48 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 16 Sep 2023 11:36:48 +0200
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
Message-ID: <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>

It sounds reasonable to me. I agree with Kurt answers (about Q3 I have not
opinion).
(btw, I have no vote)
About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if "users" will
expect a bigger change in functionalities for a mayor release update.

Cheers,
Javier.

PS I always liked those fully defined types (i.e.: uint64_t) It was clear
to me how big that number could be, regardless the compiler and platform.

On Fri, 15 Sept 2023 at 18:21, Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 Yes please!!
>
> Thoughts:
> - I've battled with the types so many times over the years. The pain
> caused by a switch will be well worth it
> - Q1: I'm for going to GDAL 4.0.
> - Q2: Having a GDAL_USE_OLD_INT_TYPES for a while seems like a good idea
> to expose the alias to users of the library
> - Q3: Yes to vsi_l_offset -> uint64_t. I'm 90% for it. For me: Yes offset
> has meaning, but if the type is critical to understanding a function /
> method interface, we should have a comment. Knowing that it's an unsigned
> 64 bit int is usually more important. Would be great if anyone against this
> change could speak up and give some examples.
>
> Short term pain, but long term big gains in readability for people new to
> GDAL / stability / maintainability / ability to cross compile.
>
> On Fri, Sep 15, 2023 at 2:24?AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> I've submitted an initial version of RFC95: Use standard C/C++ integer
>> types
>>
>>      https://github.com/OSGeo/gdal/pull/8399
>>
>> It has important implications on backward compatibility of C and C++
>> API. The "questions to be answer" paragraph need to be answered.
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230916/15a077a7/attachment.htm>

From even.rouault at spatialys.com  Sat Sep 16 04:31:58 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 16 Sep 2023 13:31:58 +0200
Subject: [gdal-dev] =?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
 =?utf-8?q?DAL_PSC?=
Message-ID: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>

Hi,

I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership. 
Javier has been involved with GDAL for quite a time now, as a responsive 
user & ticket reporter, and has occasionally contributed fixes. Javier 
is well anchored in our ecosystem, with deep knowledge of CRS topics and 
PROJ (I've also nominated him for PROJ membership), contributing to PDAL 
as well. As part of his job, he's involved in orthomosaic/raster 
generation out of images and photogrammetry pipelines. His perspective 
would be most welcome.

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mateusz at loskot.net  Sat Sep 16 04:38:13 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 16 Sep 2023 13:38:13 +0200
Subject: [gdal-dev] 
	=?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
	=?utf-8?q?DAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <CABUeae-3KbFQAaa-eeLn1i+BCduoU+j3+cvoLqfZEpVjpwGY3g@mail.gmail.com>

+1  Mateusz


On Sat, 16 Sept 2023, 13:32 Even Rouault, <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
> Javier has been involved with GDAL for quite a time now, as a responsive
> user & ticket reporter, and has occasionally contributed fixes. Javier
> is well anchored in our ecosystem, with deep knowledge of CRS topics and
> PROJ (I've also nominated him for PROJ membership), contributing to PDAL
> as well. As part of his job, he's involved in orthomosaic/raster
> generation out of images and photogrammetry pipelines. His perspective
> would be most welcome.
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230916/a5799beb/attachment.htm>

From even.rouault at spatialys.com  Sat Sep 16 05:53:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 16 Sep 2023 14:53:32 +0200
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
Message-ID: <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>


> About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if "users" 
> will expect a bigger change in functionalities for a mayor release update.

Yes, there are a few other tickets flagged as appropriate for 4.0: 
https://github.com/OSGeo/gdal/milestone/33

All of them could probably be implemented without making the 3.8/4.0 
schedule drift. The exportToWKT with WKT2 as default would involve some 
work in GDAL drivers, given that some of them are dependent on WKT1, but 
hopefully nothing that cannot be overcome. The main impact would 
probably be on the autotest suite (fast resolution would be similar to 
drivers, and replace all exportToWKT() with 
exportToWKT(["FORMAT=WKT1"]), and possibly switch progressively to WKT2)

Other topics that could/should be split for a 4.0 ?

Thinking about CRS stuff, currently gdaltransform operates with the GIS 
friendly axis order, which is at odds with the fact that 
OGRSpatialReference default and PROJ's cs2cs which use the authority 
compliant axis order since PROJ 6.0 / GDAL 3.0. Not sure if we'd want to 
make gdaltransform follow cs2cs (possibly with a 
--axis-order=gis_friendly/authority_compliant explicit flag)

Maybe some 'Ex' (which stands for API) functions in the C API could be 
removed and their extra/modified arguments reincorporated with the 
original non-Ex function. Would totally make sense for the few ones 
impacted by RFC95 like GDALGetDefaultHistogramEx, 
GDALSetDefaultHistogramEx, GDALGetRasterHistogramEx

There might be also some defaults (open, creation options) that could be 
changed, although nothing immediately jumps to mind

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Sat Sep 16 10:35:12 2023
From: howard at hobu.co (Howard Butler)
Date: Sat, 16 Sep 2023 12:35:12 -0500
Subject: [gdal-dev] 
 =?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
 =?utf-8?q?DAL_PSC?=
In-Reply-To: <CABUeae-3KbFQAaa-eeLn1i+BCduoU+j3+cvoLqfZEpVjpwGY3g@mail.gmail.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
 <CABUeae-3KbFQAaa-eeLn1i+BCduoU+j3+cvoLqfZEpVjpwGY3g@mail.gmail.com>
Message-ID: <9C589C4A-105F-4CEF-A5B7-40B00E0A57C5@hobu.co>

+1 Howard

> On Sep 16, 2023, at 6:38 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> +1  Mateusz
> 
> 
> On Sat, 16 Sept 2023, 13:32 Even Rouault, <even.rouault at spatialys.com> wrote:
> Hi,
> 
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership. 
> Javier has been involved with GDAL for quite a time now, as a responsive 
> user & ticket reporter, and has occasionally contributed fixes. Javier 
> is well anchored in our ecosystem, with deep knowledge of CRS topics and 
> PROJ (I've also nominated him for PROJ membership), contributing to PDAL 
> as well. As part of his job, he's involved in orthomosaic/raster 
> generation out of images and photogrammetry pipelines. His perspective 
> would be most welcome.
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Sat Sep 16 13:00:32 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Sat, 16 Sep 2023 20:00:32 +0000
Subject: [gdal-dev] 
 =?iso-8859-1?q?Motion=3A_add_Javier_Jim=E9nez_Shaw_to?=
 =?iso-8859-1?q?_GDAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <AM0PR09MB321981A69E448B12DF2714A7FDF5A@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: lauantai 16. syyskuuta 2023 14.32
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: add Javier Jim?nez Shaw to GDAL PSC

Hi,

I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
Javier has been involved with GDAL for quite a time now, as a responsive user & ticket reporter, and has occasionally contributed fixes. Javier is well anchored in our ecosystem, with deep knowledge of CRS topics and PROJ (I've also nominated him for PROJ membership), contributing to PDAL as well. As part of his job, he's involved in orthomosaic/raster generation out of images and photogrammetry pipelines. His perspective would be most welcome.

Starting with my +1

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From schwehr at gmail.com  Sun Sep 17 19:38:45 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 17 Sep 2023 19:38:45 -0700
Subject: [gdal-dev] 
	=?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
	=?utf-8?q?DAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <CACmBxyv+DwzNHDFOjHU7GWtCP6rFcwqJ4N=F4gC8Z64rD63u3Q@mail.gmail.com>

+1 KurtS

On Sat, Sep 16, 2023, 4:32 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
> Javier has been involved with GDAL for quite a time now, as a responsive
> user & ticket reporter, and has occasionally contributed fixes. Javier
> is well anchored in our ecosystem, with deep knowledge of CRS topics and
> PROJ (I've also nominated him for PROJ membership), contributing to PDAL
> as well. As part of his job, he's involved in orthomosaic/raster
> generation out of images and photogrammetry pipelines. His perspective
> would be most welcome.
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230917/6ee3ff4d/attachment.htm>

From warmerdam at pobox.com  Sun Sep 17 20:07:07 2023
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 17 Sep 2023 23:07:07 -0400
Subject: [gdal-dev] 
	=?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
	=?utf-8?q?DAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <CA+YzLBfS-c6wuFTjs7QwwxuqbHMR8G1bJXNqbALzfTa2Z8-kXw@mail.gmail.com>

+1 Frank

On Sat, Sep 16, 2023 at 7:32?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
> Javier has been involved with GDAL for quite a time now, as a responsive
> user & ticket reporter, and has occasionally contributed fixes. Javier
> is well anchored in our ecosystem, with deep knowledge of CRS topics and
> PROJ (I've also nominated him for PROJ membership), contributing to PDAL
> as well. As part of his job, he's involved in orthomosaic/raster
> generation out of images and photogrammetry pipelines. His perspective
> would be most welcome.
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230917/585060f4/attachment.htm>

From jonathan-lists at lightpear.com  Mon Sep 18 02:06:16 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Mon, 18 Sep 2023 10:06:16 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
Message-ID: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>

Hi List,

I'm trying to get vector layer information via OGR and Python:

```

layer.GetSpatialRef()

```

This works fine for me on Windows with GDAL 3.7.1 on various different 
types of files (Shapefile, GPKG, GML, KML, GDB).

But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via Conda), 
they get a Python RuntimeError for all shapefiles (the exact same 
shapefiles that work fine for me). It works for Geopackages for them.

Anyone have any thoughts?
Thanks,
Jonathan


From j1 at jimenezshaw.com  Mon Sep 18 04:51:04 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 18 Sep 2023 13:51:04 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
Message-ID: <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>

Hi Jonathan

Which exact RuntimeError are you getting? It can be for several reasons
(probably an installation or configuration issue).

Best,
Javier


On Mon, 18 Sept 2023 at 11:06, Jonathan Moules <jonathan-lists at lightpear.com>
wrote:

> Hi List,
>
> I'm trying to get vector layer information via OGR and Python:
>
> ```
>
> layer.GetSpatialRef()
>
> ```
>
> This works fine for me on Windows with GDAL 3.7.1 on various different
> types of files (Shapefile, GPKG, GML, KML, GDB).
>
> But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via Conda),
> they get a Python RuntimeError for all shapefiles (the exact same
> shapefiles that work fine for me). It works for Geopackages for them.
>
> Anyone have any thoughts?
> Thanks,
> Jonathan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230918/96d59094/attachment.htm>

From jonathan-lists at lightpear.com  Mon Sep 18 04:54:39 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Mon, 18 Sep 2023 12:54:39 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
Message-ID: <2989368c-6353-9450-3900-e95d7b4b4938@lightpear.com>

Hi Javier,

I don't recall there being any exception message exposed. It was simply 
a RuntimeError.

I guessed it's probably installation/configuration, but surely GDAL 
should Just Work? Especially if it's coming via Conda? (I don't live in 
the Linux world; I just used a wheel).

Cheers,

Jonathan

On 18/09/2023 12:51, Javier Jimenez Shaw wrote:
> Hi Jonathan
>
> Which exact RuntimeError are you getting? It can be for several 
> reasons (probably an installation or configuration issue).
>
> Best,
> Javier
>
>
> On Mon, 18 Sept 2023 at 11:06, Jonathan Moules 
> <jonathan-lists at lightpear.com> wrote:
>
>     Hi List,
>
>     I'm trying to get vector layer information via OGR and Python:
>
>     ```
>
>     layer.GetSpatialRef()
>
>     ```
>
>     This works fine for me on Windows with GDAL 3.7.1 on various
>     different
>     types of files (Shapefile, GPKG, GML, KML, GDB).
>
>     But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via
>     Conda),
>     they get a Python RuntimeError for all shapefiles (the exact same
>     shapefiles that work fine for me). It works for Geopackages for them.
>
>     Anyone have any thoughts?
>     Thanks,
>     Jonathan
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230918/c73d2839/attachment-0001.htm>

From dmorissette at mapgears.com  Mon Sep 18 06:07:00 2023
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 18 Sep 2023 09:07:00 -0400
Subject: [gdal-dev] 
 =?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
 =?utf-8?q?DAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <995b8a7e-76c0-98c1-1f5e-a4b25a9b134d@mapgears.com>

+1

Daniel

On 2023-09-16 07:31, Even Rouault wrote:
> Hi,
> 
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership. 
> Javier has been involved with GDAL for quite a time now, as a responsive 
> user & ticket reporter, and has occasionally contributed fixes. Javier 
> is well anchored in our ecosystem, with deep knowledge of CRS topics and 
> PROJ (I've also nominated him for PROJ membership), contributing to PDAL 
> as well. As part of his job, he's involved in orthomosaic/raster 
> generation out of images and photogrammetry pipelines. His perspective 
> would be most welcome.
> 
> Starting with my +1
> 
> Even
> 

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From even.rouault at spatialys.com  Tue Sep 19 09:30:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 19 Sep 2023 18:30:00 +0200
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
 <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
Message-ID: <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>

No other reaction ? Are people comfortable with bumping to 4.0 ? If so, 
no opinion on what we should slip in while we are it (thinking more 
about breaking changes than new features, which generally can be added 
afterwards) ?

Le 16/09/2023 ? 14:53, Even Rouault a ?crit?:
>
>> About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if 
>> "users" will expect a bigger change in functionalities for a mayor 
>> release update.
>
> Yes, there are a few other tickets flagged as appropriate for 4.0: 
> https://github.com/OSGeo/gdal/milestone/33
>
> All of them could probably be implemented without making the 3.8/4.0 
> schedule drift. The exportToWKT with WKT2 as default would involve 
> some work in GDAL drivers, given that some of them are dependent on 
> WKT1, but hopefully nothing that cannot be overcome. The main impact 
> would probably be on the autotest suite (fast resolution would be 
> similar to drivers, and replace all exportToWKT() with 
> exportToWKT(["FORMAT=WKT1"]), and possibly switch progressively to WKT2)
>
> Other topics that could/should be split for a 4.0 ?
>
> Thinking about CRS stuff, currently gdaltransform operates with the 
> GIS friendly axis order, which is at odds with the fact that 
> OGRSpatialReference default and PROJ's cs2cs which use the authority 
> compliant axis order since PROJ 6.0 / GDAL 3.0. Not sure if we'd want 
> to make gdaltransform follow cs2cs (possibly with a 
> --axis-order=gis_friendly/authority_compliant explicit flag)
>
> Maybe some 'Ex' (which stands for API) functions in the C API could be 
> removed and their extra/modified arguments reincorporated with the 
> original non-Ex function. Would totally make sense for the few ones 
> impacted by RFC95 like GDALGetDefaultHistogramEx, 
> GDALSetDefaultHistogramEx, GDALGetRasterHistogramEx
>
> There might be also some defaults (open, creation options) that could 
> be changed, although nothing immediately jumps to mind
>
> Even
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Tue Sep 19 17:14:31 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 20 Sep 2023 10:14:31 +1000
Subject: [gdal-dev] adding metadata -mo in a domain?
Message-ID: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>

When we add metadata with -mo can we somehow specify the DOMAIN it would be
added to, or be instantiated with?

gdal_translate gcore/data/float32.tif /tmp/add_md.vrt -mo PHONY=important

I would like to tweak that so that the item was in a new domain, i.e.


  <Metadata>
    <MDI key="AREA_OR_POINT">Area</MDI>
  </Metadata>
  <Metadata domain="IMAGE_STRUCTURE">
    <MDI key="INTERLEAVE">BAND</MDI>
  </Metadata>
  <Metadata domain="MY_NEW_DOMAIN">
         <MDI key="PHONY">important</MDI>
  </Metadata>

Is that possible from cli?

Thank you


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/805c04d3/attachment.htm>

From even.rouault at spatialys.com  Tue Sep 19 17:19:26 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 20 Sep 2023 02:19:26 +0200
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
Message-ID: <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>

Not from cli. From the API, it is dataset.SetMetadataItem(key, value, 
domain)

Le 20/09/2023 ? 02:14, Michael Sumner a ?crit?:
> When we add metadata with -mo can we somehow specify the DOMAIN it 
> would be added to, or be instantiated with?
>
> gdal_translate gcore/data/float32.tif /tmp/add_md.vrt -mo PHONY=important
>
> I would like to tweak that so that the item was in a new domain, i.e.
>
>
> ? <Metadata>
> ? ? <MDI key="AREA_OR_POINT">Area</MDI>
> ? </Metadata>
> ? <Metadata domain="IMAGE_STRUCTURE">
> ? ? <MDI key="INTERLEAVE">BAND</MDI>
> ? </Metadata>
> ? <Metadata domain="MY_NEW_DOMAIN">
> ? ? <MDI key="PHONY">important</MDI>
> ? </Metadata>
>
> Is that possible from cli?
>
> Thank you
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/c099cfdf/attachment.htm>

From mdsumner at gmail.com  Tue Sep 19 17:32:10 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 20 Sep 2023 10:32:10 +1000
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
 <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
Message-ID: <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>

Thanks Even,  could add a  AttachDomainMetadata here that expected "-dmo
DOMAIN:META-TAG=VALUE"

https://github.com/OSGeo/gdal/blob/a4b57c22606be2258196a933d310f301e3ece93f/apps/gdal_translate_lib.cpp#L2625

I'll try that, or is it too much over-reach?

Ultimately it's for vrt:// con so could do

vrt://{dsn}?dmo=DOMAIN:META-TAG=VALUE

Cheers, Mike



On Wed, Sep 20, 2023 at 10:19?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Not from cli. From the API, it is dataset.SetMetadataItem(key, value,
> domain)
> Le 20/09/2023 ? 02:14, Michael Sumner a ?crit :
>
> When we add metadata with -mo can we somehow specify the DOMAIN it would
> be added to, or be instantiated with?
>
> gdal_translate gcore/data/float32.tif /tmp/add_md.vrt -mo PHONY=important
>
> I would like to tweak that so that the item was in a new domain, i.e.
>
>
>   <Metadata>
>     <MDI key="AREA_OR_POINT">Area</MDI>
>   </Metadata>
>   <Metadata domain="IMAGE_STRUCTURE">
>     <MDI key="INTERLEAVE">BAND</MDI>
>   </Metadata>
>   <Metadata domain="MY_NEW_DOMAIN">
>          <MDI key="PHONY">important</MDI>
>   </Metadata>
>
> Is that possible from cli?
>
> Thank you
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/872082d1/attachment.htm>

From even.rouault at spatialys.com  Wed Sep 20 01:40:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 20 Sep 2023 10:40:23 +0200
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
 <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
 <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>
Message-ID: <d22bb791-ae33-aa46-cef7-679ff433574e@spatialys.com>

Sounds OK to me

Le 20/09/2023 ? 02:32, Michael Sumner a ?crit?:
> Thanks Even,? could add a? AttachDomainMetadata here that expected 
> "-dmo DOMAIN:META-TAG=VALUE"
>
> https://github.com/OSGeo/gdal/blob/a4b57c22606be2258196a933d310f301e3ece93f/apps/gdal_translate_lib.cpp#L2625
>
> I'll try that, or is it too much over-reach?
>
> Ultimately?it's for vrt:// con so could do
>
> vrt://{dsn}?dmo=DOMAIN:META-TAG=VALUE
>
> Cheers, Mike
>
>
>
> On Wed, Sep 20, 2023 at 10:19?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Not from cli. From the API, it is dataset.SetMetadataItem(key,
>     value, domain)
>
>     Le 20/09/2023 ? 02:14, Michael Sumner a ?crit?:
>>     When we add metadata with -mo can we somehow specify the DOMAIN
>>     it would be added to, or be instantiated with?
>>
>>     gdal_translate gcore/data/float32.tif /tmp/add_md.vrt -mo
>>     PHONY=important
>>
>>     I would like to tweak that so that the item was in a new domain,
>>     i.e.
>>
>>
>>     ? <Metadata>
>>     ? ? <MDI key="AREA_OR_POINT">Area</MDI>
>>     ? </Metadata>
>>     ? <Metadata domain="IMAGE_STRUCTURE">
>>     ? ? <MDI key="INTERLEAVE">BAND</MDI>
>>     ? </Metadata>
>>     ? <Metadata domain="MY_NEW_DOMAIN">
>>     ? ?? ? ? <MDI key="PHONY">important</MDI>
>>     ? </Metadata>
>>
>>     Is that possible from cli?
>>
>>     Thank you
>>
>>
>>     -- 
>>     Michael Sumner
>>     Software and Database Engineer
>>     Australian Antarctic Division
>>     Hobart, Australia
>>     e-mail: mdsumner at gmail.com
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/ec8c0c46/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Sep 20 01:47:57 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 20 Sep 2023 10:47:57 +0200
Subject: [gdal-dev] 
 =?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
 =?utf-8?q?DAL_PSC?=
In-Reply-To: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
Message-ID: <3a85d8e6-c5de-74be-1bbd-892458c5dad2@spatialys.com>

Motion passed with +1 from PSC members MateuszL, HowardB, JukkaR, KurtS, 
FrankW, DanielM and me.

Congrats Javier! You can file a PR to add yourself to 
https://gdal.org/community/index.html#psc

Le 16/09/2023 ? 13:31, Even Rouault a ?crit?:
> Hi,
>
> I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership. 
> Javier has been involved with GDAL for quite a time now, as a 
> responsive user & ticket reporter, and has occasionally contributed 
> fixes. Javier is well anchored in our ecosystem, with deep knowledge 
> of CRS topics and PROJ (I've also nominated him for PROJ membership), 
> contributing to PDAL as well. As part of his job, he's involved in 
> orthomosaic/raster generation out of images and photogrammetry 
> pipelines. His perspective would be most welcome.
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Wed Sep 20 03:07:08 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 20 Sep 2023 12:07:08 +0200
Subject: [gdal-dev] 
	=?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
	=?utf-8?q?DAL_PSC?=
In-Reply-To: <3a85d8e6-c5de-74be-1bbd-892458c5dad2@spatialys.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
 <3a85d8e6-c5de-74be-1bbd-892458c5dad2@spatialys.com>
Message-ID: <CADRrdKu82kwDu6_F2CKzjUKTUES=WQQPvGCiNhMq=YtR+83LGg@mail.gmail.com>

Thank you! It is an honour being part of the PSC. :D

On Wed, 20 Sept 2023 at 10:47, Even Rouault <even.rouault at spatialys.com>
wrote:

> Motion passed with +1 from PSC members MateuszL, HowardB, JukkaR, KurtS,
> FrankW, DanielM and me.
>
> Congrats Javier! You can file a PR to add yourself to
> https://gdal.org/community/index.html#psc
>
> Le 16/09/2023 ? 13:31, Even Rouault a ?crit :
> > Hi,
> >
> > I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
> > Javier has been involved with GDAL for quite a time now, as a
> > responsive user & ticket reporter, and has occasionally contributed
> > fixes. Javier is well anchored in our ecosystem, with deep knowledge
> > of CRS topics and PROJ (I've also nominated him for PROJ membership),
> > contributing to PDAL as well. As part of his job, he's involved in
> > orthomosaic/raster generation out of images and photogrammetry
> > pipelines. His perspective would be most welcome.
> >
> > Starting with my +1
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/e9eba117/attachment.htm>

From sean.gillies at gmail.com  Wed Sep 20 10:01:02 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 20 Sep 2023 11:01:02 -0600
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
 <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
 <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>
Message-ID: <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>

Hi Even,

I'm in favor of overhauling the types in the next major version. However,
I'm not convinced we need to jump immediately to 4.0. The current situation
isn't ideal, but isn't holding us back very much right? GDAL is growing new
features rapidly and it doesn't seem that the old types have been a blocker
or huge friction for core developers.

Speaking for Fiona and Rasterio, supporting GDAL versions 3.5-3.7 and 4.0
at the same time will be a pain and will require some conditional
compilation changes throughout the code. These projects will need some time
to prepare. And I'd be more enthusiastic about supporting 3.7 and 4.0
simultaneously if 4.0 made GDAL's C API tangibly better, like dataset
unification in 2.0 or the PROJ switch in 3.0.

On Tue, Sep 19, 2023 at 10:30?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> No other reaction ? Are people comfortable with bumping to 4.0 ? If so,
> no opinion on what we should slip in while we are it (thinking more
> about breaking changes than new features, which generally can be added
> afterwards) ?
>
> Le 16/09/2023 ? 14:53, Even Rouault a ?crit :
> >
> >> About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if
> >> "users" will expect a bigger change in functionalities for a mayor
> >> release update.
> >
> > Yes, there are a few other tickets flagged as appropriate for 4.0:
> > https://github.com/OSGeo/gdal/milestone/33
> >
> > All of them could probably be implemented without making the 3.8/4.0
> > schedule drift. The exportToWKT with WKT2 as default would involve
> > some work in GDAL drivers, given that some of them are dependent on
> > WKT1, but hopefully nothing that cannot be overcome. The main impact
> > would probably be on the autotest suite (fast resolution would be
> > similar to drivers, and replace all exportToWKT() with
> > exportToWKT(["FORMAT=WKT1"]), and possibly switch progressively to WKT2)
> >
> > Other topics that could/should be split for a 4.0 ?
> >
> > Thinking about CRS stuff, currently gdaltransform operates with the
> > GIS friendly axis order, which is at odds with the fact that
> > OGRSpatialReference default and PROJ's cs2cs which use the authority
> > compliant axis order since PROJ 6.0 / GDAL 3.0. Not sure if we'd want
> > to make gdaltransform follow cs2cs (possibly with a
> > --axis-order=gis_friendly/authority_compliant explicit flag)
> >
> > Maybe some 'Ex' (which stands for API) functions in the C API could be
> > removed and their extra/modified arguments reincorporated with the
> > original non-Ex function. Would totally make sense for the few ones
> > impacted by RFC95 like GDALGetDefaultHistogramEx,
> > GDALSetDefaultHistogramEx, GDALGetRasterHistogramEx
> >
> > There might be also some defaults (open, creation options) that could
> > be changed, although nothing immediately jumps to mind
> >
> > Even
> >
> >
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/58aaa7a7/attachment.htm>

From even.rouault at spatialys.com  Wed Sep 20 10:23:45 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 20 Sep 2023 19:23:45 +0200
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
 <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
 <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>
 <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>
Message-ID: <71172487-ed62-61e4-e794-2636d5664fbf@spatialys.com>

Hi Even,
>
> I'm in favor of overhauling the types in the next major version. 
> However, I'm not convinced we need to jump immediately to 4.0. The 
> current situation isn't ideal, but isn't holding us back very much right?
No, there's no urgency. It is just one of the many continuous rather 
boring improvements we do in the code base, except that one is noticed 
externally.? My pain concern about defering is that the candidate 
implementation will rot quickly, and the manual parts are painful to 
redo (but nothing dramatic: a few hours of effort, not weeks).
>
> Speaking for Fiona and Rasterio, supporting GDAL versions 3.5-3.7 and 
> 4.0 at the same time will be a pain and will require some conditional 
> compilation changes throughout the code. These projects will need some 
> time to prepare.
I've experimented a bit about trying the RFC 95 branch to build 
mapserver, PDAL and QGIS against it and being compatible with older GDAL 
versions as well:

- https://github.com/MapServer/MapServer/pull/6936 : minimal change is 
just to define GDAL_USE_OLD_INT_TYPES

- https://github.com/PDAL/PDAL/pull/4179 : minimal change is just to 
define GDAL_USE_OLD_INT_TYPES

- https://github.com/qgis/QGIS/pull/54680: set GDAL_USE_OLD_INT_TYPES, a 
few if GDAL >= 4.0 branches and a few other changes that make it work 
with all GDAL versions

So nothing dramatic. Hopefully rasterio or fiona wouldn't be too 
troublesome to adapt

> And I'd be more enthusiastic about supporting 3.7 and 4.0 
> simultaneously if 4.0 made GDAL's C API tangibly better, like dataset 
> unification in 2.0 or the PROJ switch in 3.0.

Do you have something in mind about a tangibly better improvement to the 
API that would make it worth a 4.0?

Even


>
> On Tue, Sep 19, 2023 at 10:30?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     No other reaction ? Are people comfortable with bumping to 4.0 ?
>     If so,
>     no opinion on what we should slip in while we are it (thinking more
>     about breaking changes than new features, which generally can be
>     added
>     afterwards) ?
>
>     Le 16/09/2023 ? 14:53, Even Rouault a ?crit?:
>     >
>     >> About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if
>     >> "users" will expect a bigger change in functionalities for a mayor
>     >> release update.
>     >
>     > Yes, there are a few other tickets flagged as appropriate for 4.0:
>     > https://github.com/OSGeo/gdal/milestone/33
>     >
>     > All of them could probably be implemented without making the
>     3.8/4.0
>     > schedule drift. The exportToWKT with WKT2 as default would involve
>     > some work in GDAL drivers, given that some of them are dependent on
>     > WKT1, but hopefully nothing that cannot be overcome. The main
>     impact
>     > would probably be on the autotest suite (fast resolution would be
>     > similar to drivers, and replace all exportToWKT() with
>     > exportToWKT(["FORMAT=WKT1"]), and possibly switch progressively
>     to WKT2)
>     >
>     > Other topics that could/should be split for a 4.0 ?
>     >
>     > Thinking about CRS stuff, currently gdaltransform operates with the
>     > GIS friendly axis order, which is at odds with the fact that
>     > OGRSpatialReference default and PROJ's cs2cs which use the
>     authority
>     > compliant axis order since PROJ 6.0 / GDAL 3.0. Not sure if we'd
>     want
>     > to make gdaltransform follow cs2cs (possibly with a
>     > --axis-order=gis_friendly/authority_compliant explicit flag)
>     >
>     > Maybe some 'Ex' (which stands for API) functions in the C API
>     could be
>     > removed and their extra/modified arguments reincorporated with the
>     > original non-Ex function. Would totally make sense for the few ones
>     > impacted by RFC95 like GDALGetDefaultHistogramEx,
>     > GDALSetDefaultHistogramEx, GDALGetRasterHistogramEx
>     >
>     > There might be also some defaults (open, creation options) that
>     could
>     > be changed, although nothing immediately jumps to mind
>     >
>     > Even
>     >
>     >
>
>
>
> -- 
> Sean Gillies

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/d64f9af9/attachment-0001.htm>

From sean.gillies at gmail.com  Wed Sep 20 10:23:40 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 20 Sep 2023 11:23:40 -0600
Subject: [gdal-dev] 
	=?utf-8?q?Motion=3A_add_Javier_Jim=C3=A9nez_Shaw_to_G?=
	=?utf-8?q?DAL_PSC?=
In-Reply-To: <CADRrdKu82kwDu6_F2CKzjUKTUES=WQQPvGCiNhMq=YtR+83LGg@mail.gmail.com>
References: <4892e6c9-ac29-6952-f01b-14301643f22f@spatialys.com>
 <3a85d8e6-c5de-74be-1bbd-892458c5dad2@spatialys.com>
 <CADRrdKu82kwDu6_F2CKzjUKTUES=WQQPvGCiNhMq=YtR+83LGg@mail.gmail.com>
Message-ID: <CAOodmJqWi95Hv=1ah7QzYsvA8t5uiezsx5hgQ0LtuAMceTM-xg@mail.gmail.com>

Welcome aboard, Javier! I'm looking forward to working with you.

On Wed, Sep 20, 2023 at 4:08?AM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> Thank you! It is an honour being part of the PSC. :D
>
> On Wed, 20 Sept 2023 at 10:47, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Motion passed with +1 from PSC members MateuszL, HowardB, JukkaR, KurtS,
>> FrankW, DanielM and me.
>>
>> Congrats Javier! You can file a PR to add yourself to
>> https://gdal.org/community/index.html#psc
>>
>> Le 16/09/2023 ? 13:31, Even Rouault a ?crit :
>> > Hi,
>> >
>> > I would like to nominate Javier Jim?nez Shaw for GDAL PSC membership.
>> > Javier has been involved with GDAL for quite a time now, as a
>> > responsive user & ticket reporter, and has occasionally contributed
>> > fixes. Javier is well anchored in our ecosystem, with deep knowledge
>> > of CRS topics and PROJ (I've also nominated him for PROJ membership),
>> > contributing to PDAL as well. As part of his job, he's involved in
>> > orthomosaic/raster generation out of images and photogrammetry
>> > pipelines. His perspective would be most welcome.
>> >
>> > Starting with my +1
>> >
>> > Even
>> >
>>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/f21525c6/attachment.htm>

From sean.gillies at gmail.com  Wed Sep 20 10:43:10 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 20 Sep 2023 11:43:10 -0600
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <71172487-ed62-61e4-e794-2636d5664fbf@spatialys.com>
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
 <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
 <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>
 <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>
 <71172487-ed62-61e4-e794-2636d5664fbf@spatialys.com>
Message-ID: <CAOodmJoMXNvQH9xOdDGxYHpaePFiBR6Cj8gvET38Achq1SuDSQ@mail.gmail.com>

I've asked before about making GDAL's error propagation system better.
That's one thing I'd like to add to a list of proposed changes for 4.0.
Could we have a separate call for 4.0 ideas and review it next month (or
later)? I'm so busy with a running project and looking for a new job that I
don't have as much time for open source project roadmapping as I did a few
weeks ago.

On Wed, Sep 20, 2023 at 11:23?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Even,
>
>
> I'm in favor of overhauling the types in the next major version. However,
> I'm not convinced we need to jump immediately to 4.0. The current situation
> isn't ideal, but isn't holding us back very much right?
>
> No, there's no urgency. It is just one of the many continuous rather
> boring improvements we do in the code base, except that one is noticed
> externally.  My pain concern about defering is that the candidate
> implementation will rot quickly, and the manual parts are painful to redo
> (but nothing dramatic: a few hours of effort, not weeks).
>
>
> Speaking for Fiona and Rasterio, supporting GDAL versions 3.5-3.7 and 4.0
> at the same time will be a pain and will require some conditional
> compilation changes throughout the code. These projects will need some time
> to prepare.
>
> I've experimented a bit about trying the RFC 95 branch to build mapserver,
> PDAL and QGIS against it and being compatible with older GDAL versions as
> well:
>
> - https://github.com/MapServer/MapServer/pull/6936 : minimal change is
> just to define GDAL_USE_OLD_INT_TYPES
>
> - https://github.com/PDAL/PDAL/pull/4179 : minimal change is just to
> define GDAL_USE_OLD_INT_TYPES
>
> - https://github.com/qgis/QGIS/pull/54680: set GDAL_USE_OLD_INT_TYPES, a
> few if GDAL >= 4.0 branches and a few other changes that make it work with
> all GDAL versions
>
> So nothing dramatic. Hopefully rasterio or fiona wouldn't be too
> troublesome to adapt
>
> And I'd be more enthusiastic about supporting 3.7 and 4.0 simultaneously
> if 4.0 made GDAL's C API tangibly better, like dataset unification in 2.0
> or the PROJ switch in 3.0.
>
> Do you have something in mind about a tangibly better improvement to the
> API that would make it worth a 4.0?
>
> Even
>
>
> On Tue, Sep 19, 2023 at 10:30?AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> No other reaction ? Are people comfortable with bumping to 4.0 ? If so,
>> no opinion on what we should slip in while we are it (thinking more
>> about breaking changes than new features, which generally can be added
>> afterwards) ?
>>
>> Le 16/09/2023 ? 14:53, Even Rouault a ?crit :
>> >
>> >> About GDAL 4.0 vs 3.8, I'm fine with 4.0. But I do not know if
>> >> "users" will expect a bigger change in functionalities for a mayor
>> >> release update.
>> >
>> > Yes, there are a few other tickets flagged as appropriate for 4.0:
>> > https://github.com/OSGeo/gdal/milestone/33
>> >
>> > All of them could probably be implemented without making the 3.8/4.0
>> > schedule drift. The exportToWKT with WKT2 as default would involve
>> > some work in GDAL drivers, given that some of them are dependent on
>> > WKT1, but hopefully nothing that cannot be overcome. The main impact
>> > would probably be on the autotest suite (fast resolution would be
>> > similar to drivers, and replace all exportToWKT() with
>> > exportToWKT(["FORMAT=WKT1"]), and possibly switch progressively to WKT2)
>> >
>> > Other topics that could/should be split for a 4.0 ?
>> >
>> > Thinking about CRS stuff, currently gdaltransform operates with the
>> > GIS friendly axis order, which is at odds with the fact that
>> > OGRSpatialReference default and PROJ's cs2cs which use the authority
>> > compliant axis order since PROJ 6.0 / GDAL 3.0. Not sure if we'd want
>> > to make gdaltransform follow cs2cs (possibly with a
>> > --axis-order=gis_friendly/authority_compliant explicit flag)
>> >
>> > Maybe some 'Ex' (which stands for API) functions in the C API could be
>> > removed and their extra/modified arguments reincorporated with the
>> > original non-Ex function. Would totally make sense for the few ones
>> > impacted by RFC95 like GDALGetDefaultHistogramEx,
>> > GDALSetDefaultHistogramEx, GDALGetRasterHistogramEx
>> >
>> > There might be also some defaults (open, creation options) that could
>> > be changed, although nothing immediately jumps to mind
>> >
>> > Even
>> >
>> >
>>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230920/bca67564/attachment.htm>

From gdt at lexort.com  Wed Sep 20 10:55:35 2023
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 20 Sep 2023 13:55:35 -0400
Subject: [gdal-dev] Call for discussion/review of RFC95: Use standard
 C/C++ integer types
In-Reply-To: <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>
 (Sean Gillies's message of "Wed, 20 Sep 2023 11:01:02 -0600")
References: <328c4b43-ce1d-a9ce-1225-9d98298ed934@spatialys.com>
 <CACmBxytdWCp0KeH=HT9=mjJbmF8DCB=TgU3jPU0HspMX+vuAoQ@mail.gmail.com>
 <CADRrdKvDwCS+bSUyfJvhSp_ugWAibAP-+QoxpVP-eRTDMcjEKA@mail.gmail.com>
 <f5871edc-68a2-2e79-dabb-858046967ae9@spatialys.com>
 <d7aa710a-8265-d248-bbe6-a6675be89e81@spatialys.com>
 <CAOodmJr2xSOsMS74dyoyYSkDcWXCPr5k2ARzH34GCKqV77pUig@mail.gmail.com>
Message-ID: <rmisf78ohk8.fsf@s1.lexort.com>

Sean Gillies <sean.gillies at gmail.com> writes:

> I'm in favor of overhauling the types in the next major version. However,
> I'm not convinced we need to jump immediately to 4.0. The current situation
> isn't ideal, but isn't holding us back very much right? GDAL is growing new
> features rapidly and it doesn't seem that the old types have been a blocker
> or huge friction for core developers.

As a packager:

  I don't care if the version number is 3.8 or 4.0.  That really doesn't
  matter.

  ABI breaks are significant, but not a huge big deal.   It requires
  marking all depending packages as needing new versions.   (I am
  expecting that these types are in signatures in the public ABI.)

From even.rouault at spatialys.com  Wed Sep 20 13:31:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 20 Sep 2023 22:31:32 +0200
Subject: [gdal-dev] Call for 4.0 ideas
Message-ID: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>

Hi,

following latest discussions on RFC 95, I've drafted 
https://github.com/OSGeo/gdal/issues/8440 with a few ideas. Please add 
yours into it. We should focus on listing breaking changes, rather than 
new features that can be developed without involving breakage.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jluis at ualg.pt  Wed Sep 20 16:12:26 2023
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Wed, 20 Sep 2023 23:12:26 +0000
Subject: [gdal-dev] Call for 4.0 ideas
In-Reply-To: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
References: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
Message-ID: <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Remove spatial_ref WKT export in netCDF driver (GDAL 4) #4712

Would this mean all codes that use spatial_ref would be broken????!!!!
Just hope that I'm misunderstanding it.

Joaquim

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Wednesday, September 20, 2023 9:32 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Call for 4.0 ideas

Hi,

following latest discussions on RFC 95, I've drafted
https://github.com/OSGeo/gdal/issues/8440 with a few ideas. Please add yours into it. We should focus on listing breaking changes, rather than new features that can be developed without involving breakage.

Even

--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Sep 20 16:33:25 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 01:33:25 +0200
Subject: [gdal-dev] Call for 4.0 ideas
In-Reply-To: <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
 <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <daa41ea1-eac8-0aeb-87b8-46666bdfa9c4@spatialys.com>


Le 21/09/2023 ? 01:12, Joaquim Manuel Freire Lu?s a ?crit?:
> Remove spatial_ref WKT export in netCDF driver (GDAL 4) #4712
>
> Would this mean all codes that use spatial_ref would be broken????!!!!

yes, spatial_ref is AFAIK a GDAL specific thing that predates the 
introduction of crs_wkt in the CF conventions (cf 
https://github.com/cf-convention/cf-conventions/issues/222, 
https://github.com/opendatacube/datacube-core/issues/837 where this is 
also discussed). Recent GDAL versions write both crs_wkt and spatial_ref 
as a transition step. This would complete the transition by removing 
writing spatial_ref (presumably we'd still accept it on the reading side 
for older datasets). Code that only checks for spatial_ref should be 
adapted to deal with crs_wkt, since it is the standardized attribute, 
independently on whether GDAL discontinues writing spatial_ref or not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Wed Sep 20 18:25:13 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 21 Sep 2023 11:25:13 +1000
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <d22bb791-ae33-aa46-cef7-679ff433574e@spatialys.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
 <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
 <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>
 <d22bb791-ae33-aa46-cef7-679ff433574e@spatialys.com>
Message-ID: <CAAcGz98dczrp==VDkBhXto8=kWFQf7LrtMQFkk4TmZ7Xb83VsQ@mail.gmail.com>

I see this note about

GDALTranslateOptionsSetMetadataOptions()

GDALTranslateOptionsAddMetadataOptions()

which don't seem to exist. Is that just an outdated comment?

https://github.com/OSGeo/gdal/blob/8122e2c39f72317a803cd24ee1fb5d6a44a97596/apps/gdal_translate_lib.cpp#L200-L201

Thanks!



On Wed, Sep 20, 2023 at 6:40?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sounds OK to me
> Le 20/09/2023 ? 02:32, Michael Sumner a ?crit :
>
> Thanks Even,  could add a  AttachDomainMetadata here that expected "-dmo
> DOMAIN:META-TAG=VALUE"
>
>
> https://github.com/OSGeo/gdal/blob/a4b57c22606be2258196a933d310f301e3ece93f/apps/gdal_translate_lib.cpp#L2625
>
> I'll try that, or is it too much over-reach?
>
> Ultimately it's for vrt:// con so could do
>
> vrt://{dsn}?dmo=DOMAIN:META-TAG=VALUE
>
> Cheers, Mike
>
>
>
> On Wed, Sep 20, 2023 at 10:19?AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Not from cli. From the API, it is dataset.SetMetadataItem(key, value,
>> domain)
>> Le 20/09/2023 ? 02:14, Michael Sumner a ?crit :
>>
>> When we add metadata with -mo can we somehow specify the DOMAIN it would
>> be added to, or be instantiated with?
>>
>> gdal_translate gcore/data/float32.tif /tmp/add_md.vrt -mo PHONY=important
>>
>> I would like to tweak that so that the item was in a new domain, i.e.
>>
>>
>>   <Metadata>
>>     <MDI key="AREA_OR_POINT">Area</MDI>
>>   </Metadata>
>>   <Metadata domain="IMAGE_STRUCTURE">
>>     <MDI key="INTERLEAVE">BAND</MDI>
>>   </Metadata>
>>   <Metadata domain="MY_NEW_DOMAIN">
>>          <MDI key="PHONY">important</MDI>
>>   </Metadata>
>>
>> Is that possible from cli?
>>
>> Thank you
>>
>>
>> --
>> Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/c3d187b7/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 21 01:48:45 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 10:48:45 +0200
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <CAAcGz98dczrp==VDkBhXto8=kWFQf7LrtMQFkk4TmZ7Xb83VsQ@mail.gmail.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
 <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
 <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>
 <d22bb791-ae33-aa46-cef7-679ff433574e@spatialys.com>
 <CAAcGz98dczrp==VDkBhXto8=kWFQf7LrtMQFkk4TmZ7Xb83VsQ@mail.gmail.com>
Message-ID: <f986b29e-cb19-6d52-c6b0-c31ea1ab4936@spatialys.com>


>
> which don't seem to exist. Is that just an outdated comment?

yes, as far as I can see from history those functions have never 
existed. This comment dates back to the initial commit and they didn't 
even exist at that time.


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Thu Sep 21 02:03:48 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 21 Sep 2023 19:03:48 +1000
Subject: [gdal-dev] adding metadata -mo in a domain?
In-Reply-To: <f986b29e-cb19-6d52-c6b0-c31ea1ab4936@spatialys.com>
References: <CAAcGz9-snf_z0EAebcc7LoD0P61ArubNnNXD5JM5DTDNscwZag@mail.gmail.com>
 <7c0acb1e-e83c-c044-2fd6-975418a525e4@spatialys.com>
 <CAAcGz9-rf=NjHgqJJP_br5jS8UpFBj_onXBm3TdD5K6E6wCFjg@mail.gmail.com>
 <d22bb791-ae33-aa46-cef7-679ff433574e@spatialys.com>
 <CAAcGz98dczrp==VDkBhXto8=kWFQf7LrtMQFkk4TmZ7Xb83VsQ@mail.gmail.com>
 <f986b29e-cb19-6d52-c6b0-c31ea1ab4936@spatialys.com>
Message-ID: <CAAcGz98YfhiPGU104Ssq1fon1wiwV5QTs_vf0LkQczk1vHbNtQ@mail.gmail.com>

cool thanks, I'll deal with that ?



On Thu, 21 Sept 2023, 18:48 Even Rouault, <even.rouault at spatialys.com>
wrote:

>
> >
> > which don't seem to exist. Is that just an outdated comment?
>
> yes, as far as I can see from history those functions have never
> existed. This comment dates back to the initial commit and they didn't
> even exist at that time.
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/81949581/attachment-0001.htm>

From joana at doublebyte.net  Thu Sep 21 04:12:06 2023
From: joana at doublebyte.net (Joana Simoes)
Date: Thu, 21 Sep 2023 12:12:06 +0100
Subject: [gdal-dev] =?utf-8?q?Invitation_for_the_Open_Standards_Code_Spri?=
 =?utf-8?b?bnQg8J+agA==?=
In-Reply-To: <5309f976-ae34-975c-a1da-60a0f810b20d@doublebyte.net>
References: <5309f976-ae34-975c-a1da-60a0f810b20d@doublebyte.net>
Message-ID: <27d09160-95bf-1179-ae61-0f9bddbc1b65@doublebyte.net>


***

Good morning,

**

The Open Standards Code Sprint, will run from October 30 - November 1, 
in Geovation <https://geovation.uk/> (London, UK). All OGC standards are 
in scope for this code sprint and various Standards Working Groups 
already confirmed their participation 
<https://github.com/opengeospatial/developer-events/wiki/October-2023-Open-Standards-Code-Sprint#which-ogc-standards-or-domain-working-groups-are-going-to-participate>.


A Code Sprint is a three day hybrid event, where dozens of developers 
from around the world come together to code and share their ideas 
regarding sharing geospatial information.This code sprint will include a 
mentor stream targeted at newcomers, which includes an onboarding day 
with lots of introductory tutorials.

*

*OSGeo projects that wish to participate are encouraged to advertise it 
at the sprint wiki page 
<https://github.com/opengeospatial/developer-events/wiki/October-2023-Open-Standards-Code-Sprint#which-projects-are-going-to-participate>, 
and to register for the project pitches 
<https://github.com/opengeospatial/developer-events/wiki/October-2023-Open-Standards-Code-Sprint#project-and-working-group-pitches>.* 


**

*You can find more information, including a registration link in the 
code sprint website: https://developer.ogc.org/sprints/22/ *

*This event is generously supported by our sponsors and supporters 
<https://github.com/opengeospatial/developer-events/wiki/October-2023-Open-Standards-Code-Sprint#sponsored-by> 
and some funding opportunities for selected participants may be 
available. If you want to apply, please express your interest in the 
registration form 
<https://portal.ogc.org/public_ogc/register/231030os_codesprint.php>, as 
soon as possible.*

*Hope to see you at the code sprint,*

*All the Best,*

*Joana *

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/32aca093/attachment.htm>

From jonathan-lists at lightpear.com  Thu Sep 21 05:34:51 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Thu, 21 Sep 2023 13:34:51 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
Message-ID: <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>

Yeah, I'm afraid the error message is pretty much non-existent:

    Traceback (most recent call last):
     ? File
    "/home/name/Code/DSHub/PoC/Extract-Transform-Load-POC/Metadata/AME/src/info_vector.py",
    line 119, in get_layer_metadata
     ??? tmp_projection = layer.GetSpatialRef()
     ???????????????????? ^^^^^^^^^^^^^^^^^^^^^
     ? File
    "/home/name/anaconda3/envs/AME_env/lib/python3.11/site-packages/osgeo/ogr.py",
    line 1990, in GetSpatialRef
     ??? return _ogr.Layer_GetSpatialRef(self, *args)
     ?????????? ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    RuntimeError


Suggestions welcome.


On 18/09/2023 12:51, Javier Jimenez Shaw wrote:
> Hi Jonathan
>
> Which exact RuntimeError are you getting? It can be for several 
> reasons (probably an installation or configuration issue).
>
> Best,
> Javier
>
>
> On Mon, 18 Sept 2023 at 11:06, Jonathan Moules 
> <jonathan-lists at lightpear.com> wrote:
>
>     Hi List,
>
>     I'm trying to get vector layer information via OGR and Python:
>
>     ```
>
>     layer.GetSpatialRef()
>
>     ```
>
>     This works fine for me on Windows with GDAL 3.7.1 on various
>     different
>     types of files (Shapefile, GPKG, GML, KML, GDB).
>
>     But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via
>     Conda),
>     they get a Python RuntimeError for all shapefiles (the exact same
>     shapefiles that work fine for me). It works for Geopackages for them.
>
>     Anyone have any thoughts?
>     Thanks,
>     Jonathan
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/04fcf85b/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 21 05:39:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 14:39:36 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
Message-ID: <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>

Run ogrinfo on one shapefile to see if some more interesting error 
message is displayed

Also check if the environment isn't messed up regarding PROJ and the 
PROJ_LIB/PROJ_DATA environment variable

Le 21/09/2023 ? 14:34, Jonathan Moules via gdal-dev a ?crit?:
>
> Yeah, I'm afraid the error message is pretty much non-existent:
>
>     Traceback (most recent call last):
>     ? File
>     "/home/name/Code/DSHub/PoC/Extract-Transform-Load-POC/Metadata/AME/src/info_vector.py",
>     line 119, in get_layer_metadata
>     ??? tmp_projection = layer.GetSpatialRef()
>     ???????????????????? ^^^^^^^^^^^^^^^^^^^^^
>     ? File
>     "/home/name/anaconda3/envs/AME_env/lib/python3.11/site-packages/osgeo/ogr.py",
>     line 1990, in GetSpatialRef
>     ??? return _ogr.Layer_GetSpatialRef(self, *args)
>     ?????????? ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>     RuntimeError
>
>
> Suggestions welcome.
>
>
> On 18/09/2023 12:51, Javier Jimenez Shaw wrote:
>> Hi Jonathan
>>
>> Which exact RuntimeError are you getting? It can be for several 
>> reasons (probably an installation or configuration issue).
>>
>> Best,
>> Javier
>>
>>
>> On Mon, 18 Sept 2023 at 11:06, Jonathan Moules 
>> <jonathan-lists at lightpear.com> wrote:
>>
>>     Hi List,
>>
>>     I'm trying to get vector layer information via OGR and Python:
>>
>>     ```
>>
>>     layer.GetSpatialRef()
>>
>>     ```
>>
>>     This works fine for me on Windows with GDAL 3.7.1 on various
>>     different
>>     types of files (Shapefile, GPKG, GML, KML, GDB).
>>
>>     But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via
>>     Conda),
>>     they get a Python RuntimeError for all shapefiles (the exact same
>>     shapefiles that work fine for me). It works for Geopackages for them.
>>
>>     Anyone have any thoughts?
>>     Thanks,
>>     Jonathan
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/d51c779b/attachment.htm>

From lnicola at dend.ro  Thu Sep 21 06:38:36 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 21 Sep 2023 16:38:36 +0300
Subject: [gdal-dev] GeoTIFF and concurrent block reads
Message-ID: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>

Hello,

GDAL 3.6 added support for multi-threaded reading using PRead, but I couldn't spot ReadBlock using the same code path. On the other hand, I didn't see it taking a lock either, so I'm a little confused :-). My question is whether ReadBlock supports concurrent reads or not (*).

(*) I think these can also be implemented at VSI level by wrapping a file handle and turning Seek + Read into a PRead (when supported), even for drivers that don't explicitly support PRead.

Thanks,
Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/2cb6bec9/attachment-0001.htm>

From a.pau at creaf.uab.cat  Thu Sep 21 06:56:37 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 21 Sep 2023 13:56:37 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB81686F671C8E7C976A5B0C4BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
 <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81686F671C8E7C976A5B0C4BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB8168EA9A16E532C35C6515AAA2F8A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hello again!

I need to know that some shared code is being compiled in GDAL project. I can see that GDAL_COMPILATION  (at Preprocessor definition i Visual Studio Project) is everywhere.

It's apropiate to use that variable to know if I am compiling in GDAL or not?
#ifdef GDAL_COMPILATION
I'm in GDAL
#else
I can ignore that code in gdal
#endif

I'm not using that in the code, only in some .h

Thanks!!!


-----Mensaje original-----
De: Abel Pau 
Enviado el: dimarts, 5 de setembre de 2023 15:26
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Hi again,
after looking for that in the code, I think that versions depends on layer, so -lco is working fine (instead of -dsco, les used).
So, if there is no inconvenience, I'll use -lco Version=V20, etc...

Thanks again

-----Mensaje original-----
De: Abel Pau <a.pau at creaf.uab.cat>
Enviado el: dimarts, 5 de setembre de 2023 10:43
Para: Abel Pau <a.pau at creaf.uab.cat>; Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Sorry
there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ... 

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau Enviado el: dimarts, 5 de setembre de 2023 10:26
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0). 
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
	For version 1.1:   ogr2ogr src dst - dsco=V11
	For version 2.0:   ogr2ogr src dst - dsco=V20
	For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
> 	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options 
> in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements if you want to monitor the progress in debug mode (the GeoPackage driver implemets something similar during spatial index writing, which can be a long operation), but there's nothing dedicated in the OGR API or ogr2ogr to monitor the progress of long operations occuring during dataset closing, as most drivers don't need that.

Even


--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Thu Sep 21 07:02:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 16:02:14 +0200
Subject: [gdal-dev] GeoTIFF and concurrent block reads
In-Reply-To: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>
References: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>
Message-ID: <f47fbd22-a99f-cc01-def5-265b984fc9b8@spatialys.com>

Laurentiu,

>
> GDAL 3.6 added support for multi-threaded reading using PRead, but I 
> couldn't spot ReadBlock using the same code path.

If you read one single block at a time, the multi-threaded optimization 
cannot kick in, since the elementary decoding unit is a block. You must 
call RasterIO() with a window intersecting several block.

>
> (*) I think these can also be implemented at VSI level by wrapping a 
> file handle and turning Seek + Read into a PRead (when supported), 
> even for drivers that don't explicitly support PRead.

The multi-threaded optimization also works for VSI file systems not 
supported PRead(), but doing what you mention above: doing Seek+Read 
under a lock. This is of course less efficient.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/48d8b845/attachment.htm>

From lnicola at dend.ro  Thu Sep 21 07:21:11 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 21 Sep 2023 17:21:11 +0300
Subject: [gdal-dev] GeoTIFF and concurrent block reads
In-Reply-To: <f47fbd22-a99f-cc01-def5-265b984fc9b8@spatialys.com>
References: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>
 <f47fbd22-a99f-cc01-def5-265b984fc9b8@spatialys.com>
Message-ID: <2be40407-bd4b-487a-a10a-154c056927b6@betaapp.fastmail.com>

Hi,

On Thu, Sep 21, 2023, at 17:02, Even Rouault wrote:
> Laurentiu,
> 
>> 
>> GDAL 3.6 added support for multi-threaded reading using PRead, but I couldn't spot ReadBlock using the same code path.
> If you read one single block at a time, the multi-threaded optimization cannot kick in, since the elementary decoding unit is a block. You must call RasterIO() with a window intersecting several block.
> 
Of course, but I'm asking if it's worth calling ReadBlock on multiple threads (if it always takes a lock, it's not, and I should use RasterIO instead).
>> 
>> (*) I think these can also be implemented at VSI level by wrapping a file handle and turning Seek + Read into a PRead (when supported), even for drivers that don't explicitly support PRead.
> The multi-threaded optimization also works for VSI file systems not supported PRead(), but doing what you mention above: doing Seek+Read under a lock. This is of course less efficient.
> 
I meant something slightly different here: if a file supports PRead, but a driver doesn't (maybe it's using some external library like libtiff, which has _tiffReadProc and _tiffSeekProc), threading could still be supported with a hack. The driver could ask the library to open the same file multiple times, wrapping the same VSI handle, but passing in a seekProc that only keeps track of the current offset. So the library could seek and read as it pleases, but GDAL would turn those into PRead calls. The backing file handle would never see a seek, just PRead.

Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/cfee4bbb/attachment.htm>

From jluis at ualg.pt  Thu Sep 21 07:31:01 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Thu, 21 Sep 2023 14:31:01 +0000
Subject: [gdal-dev] Call for 4.0 ideas
In-Reply-To: <daa41ea1-eac8-0aeb-87b8-46666bdfa9c4@spatialys.com>
References: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
 <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <daa41ea1-eac8-0aeb-87b8-46666bdfa9c4@spatialys.com>
Message-ID: <GVXPR04MB9926F23AD3730E0C5ACEDF78A6F8A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Even, I understand that. Specially because not all nc files are created with GDAL ?
But I have more troubles to understand why breaking code that use spatial_ref  for decades without any real need. Sorry, and I know it's not decided yet, but it looks so much the Linux culture of *easy breaking*.

Joaquim

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Thursday, September 21, 2023 12:33 AM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Call for 4.0 ideas


Le 21/09/2023 ? 01:12, Joaquim Manuel Freire Lu?s a ?crit?:
> Remove spatial_ref WKT export in netCDF driver (GDAL 4) #4712
>
> Would this mean all codes that use spatial_ref would be broken????!!!!

yes, spatial_ref is AFAIK a GDAL specific thing that predates the introduction of crs_wkt in the CF conventions (cf https://github.com/cf-convention/cf-conventions/issues/222,
https://github.com/opendatacube/datacube-core/issues/837 where this is also discussed). Recent GDAL versions write both crs_wkt and spatial_ref as a transition step. This would complete the transition by removing writing spatial_ref (presumably we'd still accept it on the reading side for older datasets). Code that only checks for spatial_ref should be adapted to deal with crs_wkt, since it is the standardized attribute, independently on whether GDAL discontinues writing spatial_ref or not.

--
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Sep 21 08:05:34 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 17:05:34 +0200
Subject: [gdal-dev] GeoTIFF and concurrent block reads
In-Reply-To: <2be40407-bd4b-487a-a10a-154c056927b6@betaapp.fastmail.com>
References: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>
 <f47fbd22-a99f-cc01-def5-265b984fc9b8@spatialys.com>
 <2be40407-bd4b-487a-a10a-154c056927b6@betaapp.fastmail.com>
Message-ID: <1f2b944d-09e8-d7bd-3485-7a857192b210@spatialys.com>


> Of course, but I'm asking if it's worth calling ReadBlock on multiple 
> threads (if it always takes a lock, it's not, and I should use 
> RasterIO instead).
Not on the same dataset object, otherwise you'll get crashes as no lock 
is taken
>>>
>>> (*) I think these can also be implemented at VSI level by wrapping a 
>>> file handle and turning Seek + Read into a PRead (when supported), 
>>> even for drivers that don't explicitly support PRead.
>>
>> The multi-threaded optimization also works for VSI file systems not 
>> supported PRead(), but doing what you mention above: doing Seek+Read 
>> under a lock. This is of course less efficient.
>>
> I meant something slightly different here: if a file supports PRead, 
> but a driver doesn't (maybe it's using some external library like 
> libtiff, which has _tiffReadProc and _tiffSeekProc), threading could 
> still be supported with a hack. The driver could ask the library to 
> open the same file multiple times, wrapping the same VSI handle, but 
> passing in a seekProc that only keeps track of the current offset. So 
> the library could seek and read as it pleases, but GDAL would turn 
> those into PRead calls. The backing file handle would never see a 
> seek, just PRead.

Ah I see what you mean. Having generic multi-threading isn't possible. 
Each driver would have to be modified to be ready to cope with that. 
Besides file handles, there are often other state variables at the 
GDALDataset/GDALRasterBand level.


> Laurentiu

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/d15d4ff5/attachment.htm>

From lnicola at dend.ro  Thu Sep 21 08:22:26 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 21 Sep 2023 18:22:26 +0300
Subject: [gdal-dev] GeoTIFF and concurrent block reads
In-Reply-To: <1f2b944d-09e8-d7bd-3485-7a857192b210@spatialys.com>
References: <87756158-76a1-4ab5-aa08-95e231973fd7@betaapp.fastmail.com>
 <f47fbd22-a99f-cc01-def5-265b984fc9b8@spatialys.com>
 <2be40407-bd4b-487a-a10a-154c056927b6@betaapp.fastmail.com>
 <1f2b944d-09e8-d7bd-3485-7a857192b210@spatialys.com>
Message-ID: <e4172789-2927-4c2f-a2ff-00b45c361dfd@betaapp.fastmail.com>


On Thu, Sep 21, 2023, at 18:05, Even Rouault wrote:
> 
>> Of course, but I'm asking if it's worth calling ReadBlock on multiple threads (if it always takes a lock, it's not, and I should use RasterIO instead).
> Not on the same dataset object, otherwise you'll get crashes as no lock is taken
I've filed https://github.com/OSGeo/gdal/issues/8448 for this. Even if rejected, it will serve as documentation for other people who want this.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/bd31a8aa/attachment.htm>

From robert.coup at koordinates.com  Thu Sep 21 08:57:53 2023
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 21 Sep 2023 16:57:53 +0100
Subject: [gdal-dev] Call for 4.0 ideas
In-Reply-To: <GVXPR04MB9926F23AD3730E0C5ACEDF78A6F8A@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
 <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <daa41ea1-eac8-0aeb-87b8-46666bdfa9c4@spatialys.com>
 <GVXPR04MB9926F23AD3730E0C5ACEDF78A6F8A@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <CAFLLRpJgooWnWVef-3tFVQhYcNrYc9JOFE=4oT_6hdjZdnZXyQ@mail.gmail.com>

Hi Joaquim,

There have been other similar changes... for example, GDAL added an
aspatial extension[1] to GeoPackage v1.0 to support non-geo tables... the
GeoPackage standard added support for such tables in v1.2; so our extension
is no longer needed: GDAL still reads it, but no longer writes it [2].
We've done similar things in other drivers, and obviously removed entire
drivers before.

Every line of code has some test and maintenance burden... Are there netcdf
readers that *don't* support crs_wkt and *only* support spatial_ref?

@Even is it worth a pass through other drivers to swap default option
values or remove obsolete options with 4.0? And do another deprecation/cull
through unused drivers?

Rob :)

[1] https://gdal.org/drivers/vector/geopackage_aspatial.html
[2]
https://gdal.org/drivers/vector/gpkg.html#drivers/vector/gpkg-lco-ASPATIAL_VARIANT


On Thu, 21 Sept 2023 at 15:31, Joaquim Manuel Freire Lu?s via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Even, I understand that. Specially because not all nc files are created
> with GDAL ?
> But I have more troubles to understand why breaking code that use
> spatial_ref  for decades without any real need. Sorry, and I know it's not
> decided yet, but it looks so much the Linux culture of *easy breaking*.
>
> Joaquim
>
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Thursday, September 21, 2023 12:33 AM
> To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Call for 4.0 ideas
>
>
> Le 21/09/2023 ? 01:12, Joaquim Manuel Freire Lu?s a ?crit :
> > Remove spatial_ref WKT export in netCDF driver (GDAL 4) #4712
> >
> > Would this mean all codes that use spatial_ref would be broken????!!!!
>
> yes, spatial_ref is AFAIK a GDAL specific thing that predates the
> introduction of crs_wkt in the CF conventions (cf
> https://github.com/cf-convention/cf-conventions/issues/222,
> https://github.com/opendatacube/datacube-core/issues/837 where this is
> also discussed). Recent GDAL versions write both crs_wkt and spatial_ref as
> a transition step. This would complete the transition by removing writing
> spatial_ref (presumably we'd still accept it on the reading side for older
> datasets). Code that only checks for spatial_ref should be adapted to deal
> with crs_wkt, since it is the standardized attribute, independently on
> whether GDAL discontinues writing spatial_ref or not.
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/3e2d8f35/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 21 09:18:27 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 18:18:27 +0200
Subject: [gdal-dev] Call for 4.0 ideas
In-Reply-To: <CAFLLRpJgooWnWVef-3tFVQhYcNrYc9JOFE=4oT_6hdjZdnZXyQ@mail.gmail.com>
References: <f68e5b78-217d-6f99-9355-63c11aa707e3@spatialys.com>
 <GVXPR04MB99265CBB3F841E18D52B4231A6F9A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <daa41ea1-eac8-0aeb-87b8-46666bdfa9c4@spatialys.com>
 <GVXPR04MB9926F23AD3730E0C5ACEDF78A6F8A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <CAFLLRpJgooWnWVef-3tFVQhYcNrYc9JOFE=4oT_6hdjZdnZXyQ@mail.gmail.com>
Message-ID: <1b6a6647-875a-ebd9-0b57-239857b85917@spatialys.com>

| But I have more troubles to understand why breaking code that use 
spatial_ref for decades without any real need

Have you ever looked at the mess in the netcdf driver? Aligning with 
recommendations from standards, especially on the write side, and 
helping to reduce a bit code bloat (although mostly symbolic here) is 
helpful.

Another thing is that as currently we write both crs_wkt and 
spatial_ref, this can puzzle human or software readers, and that could 
result in inconsistencies if a writer would update one of the attribute 
without the other one.


> @Even is it worth a pass through other drivers to swap default option 
> values or remove obsolete options with 4.0?

I'd suggest people with interest in a particular driver do their own 
pass and add their suggestions to the meta-ticket (there have already 
been suggestions to change GTiff defaults to use LZW and tiling).

| And do another?deprecation/cull through unused drivers?

maybe, but do we have data points to assess what can be deprecated? 
(other than me blowing off out of frustration occasionally and randomly 
picking candidates :-) :-))

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Thu Sep 21 13:25:52 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 22 Sep 2023 06:25:52 +1000
Subject: [gdal-dev] resampling algs warp vs translate
Message-ID: <CAAcGz9-ro434yh8cj0nGTor1p8+Uqfisbc8upJpixE-5KYxwSw@mail.gmail.com>

Can we aspire to translate having the same set of resampling algorithms as
the warper?

I see the warper adds min, max, mod, q1, q3, sum

I especially wanted sum for OVERVIEW_RESAMPLING in COG, and I can see where
it's done and  ...  can maybe see my way through that ... but the 600 lines
of code in GDALResampleChunk_AverageOrRMS_T kind of reins in my confidence.

https://github.com/OSGeo/gdal/blob/26e7ff91504e0303434f440e6d19e58f2a206b45/gcore/overview.cpp#L1211C15-L1211C47

It came up as a need for statistical properties required for
overview-publishers, and while I think we can incrementally build up the
SUM-pyramid with external overivews via CLI it would be awesome to have the
same stats for the two resampling regimes.

Thank you



-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230922/556da033/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 21 13:49:17 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 21 Sep 2023 22:49:17 +0200
Subject: [gdal-dev] resampling algs warp vs translate
In-Reply-To: <CAAcGz9-ro434yh8cj0nGTor1p8+Uqfisbc8upJpixE-5KYxwSw@mail.gmail.com>
References: <CAAcGz9-ro434yh8cj0nGTor1p8+Uqfisbc8upJpixE-5KYxwSw@mail.gmail.com>
Message-ID: <046f6fa1-0224-3739-6f50-c3e3b5afa46b@spatialys.com>

That should be relatively straightforward to adapt 
GDALResampleChunk_AverageOrRMS_T to do sum. Reuse the average code path, 
but just don't divide the sum by dfTotalWeight at lines 1418, 1473, 
1688, 1700 and 1712. And error out if applied to a band with a color 
table (cf line 4361)

For other algorithms, it could potentially be possible to re-use the 
warping code with an adaptation layer like done in 
GDALRasterBand::RasterIOResampled() in the bUseWarp case. Of course that 
would be less performant than implementing a specific overview 
resampling kernel which can assume that a source rectangle maps to a 
target rectangle at the band level, while the warping code only process 
pixel by pixel.

Le 21/09/2023 ? 22:25, Michael Sumner via gdal-dev a ?crit?:
> Can we aspire to translate having the same set of resampling 
> algorithms as the warper?
>
> I see the warper adds min, max, mod, q1, q3, sum
>
> I especially wanted sum for OVERVIEW_RESAMPLING in COG, and I can see 
> where it's done and? ...? can maybe see my way through that ... but 
> the 600 lines of code in?GDALResampleChunk_AverageOrRMS_T kind of 
> reins in my confidence.
>
> https://github.com/OSGeo/gdal/blob/26e7ff91504e0303434f440e6d19e58f2a206b45/gcore/overview.cpp#L1211C15-L1211C47
>
> It came up as a need for statistical properties required for 
> overview-publishers, and while I think we can incrementally build up 
> the SUM-pyramid with external overivews?via CLI?it would be awesome to 
> have the same stats for the two resampling regimes.
>
> Thank you
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230921/ddf004ec/attachment.htm>

From j1 at jimenezshaw.com  Fri Sep 22 04:15:55 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 22 Sep 2023 13:15:55 +0200
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB8168EA9A16E532C35C6515AAA2F8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
 <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81686F671C8E7C976A5B0C4BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB8168EA9A16E532C35C6515AAA2F8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <CADRrdKtmkDqyOD7B+vkutB4T0e_Gb+cooLBU2gL2544H8Vs0Tg@mail.gmail.com>

I never used that env bastante before, but it seems to be what you
describe. See that it is enabled also in the tests, as Even says in the
pull 2666

I'm curious. Why do you need to do something different on GDAL compilation?
(I assume it is in a exported header)

On Thu, 21 Sept 2023, 15:56 Abel Pau via gdal-dev, <gdal-dev at lists.osgeo.org>
wrote:

> Hello again!
>
> I need to know that some shared code is being compiled in GDAL project. I
> can see that GDAL_COMPILATION  (at Preprocessor definition i Visual Studio
> Project) is everywhere.
>
> It's apropiate to use that variable to know if I am compiling in GDAL or
> not?
> #ifdef GDAL_COMPILATION
> I'm in GDAL
> #else
> I can ignore that code in gdal
> #endif
>
> I'm not using that in the code, only in some .h
>
> Thanks!!!
>
>
> -----Mensaje original-----
> De: Abel Pau
> Enviado el: dimarts, 5 de setembre de 2023 15:26
> Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
> Asunto: RE: [gdal-dev] Creation of a new driver from scratch
>
> Hi again,
> after looking for that in the code, I think that versions depends on
> layer, so -lco is working fine (instead of -dsco, les used).
> So, if there is no inconvenience, I'll use -lco Version=V20, etc...
>
> Thanks again
>
> -----Mensaje original-----
> De: Abel Pau <a.pau at creaf.uab.cat>
> Enviado el: dimarts, 5 de setembre de 2023 10:43
> Para: Abel Pau <a.pau at creaf.uab.cat>; Even Rouault <
> even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
> Asunto: RE: [gdal-dev] Creation of a new driver from scratch
>
> Sorry
> there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ...
>
> -----Mensaje original-----
> De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
> Enviado el: dimarts, 5 de setembre de 2023 10:26
> Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
> Asunto: Re: [gdal-dev] Creation of a new driver from scratch
>
> Hi Everyone,
>
> Even, after a meeting with the team, we have took in consideration your
> opinion and we have discard the option of writing V1.1 and change to V2.0
> in the middle of writing.
> We have a long tradition with V1.1 and we can't ignore that now but we are
> going to offer both possibilities: read both and write V1.1 and V2.0
> according to user's choice (default 2.0).
> If V1.1 is not enough for its limitations we are going to show a message:
> "MiraMon format limitations." and "Try V2.0 option." and return
> OGRERR_FAILURE;
>
> Can you confirm that is enough a -f parameter like?
>         For version 1.1:   ogr2ogr src dst - dsco=V11
>         For version 2.0:   ogr2ogr src dst - dsco=V20
>         For last version (to make it simple for possible future
> versions):  ogr2ogr src dst - dsco=last_version
>
> Thanks a lot for all your kind support.
>
> -----Mensaje original-----
> De: Even Rouault <even.rouault at spatialys.com> Enviado el: dimecres, 30
> d?agost de 2023 22:57
> Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
> Asunto: Re: [gdal-dev] Creation of a new driver from scratch
>
> Abel,
> >
> > I am interested in proportionate 3 ways of proceeding when a used calls
> translation from one format to our format.
> > way 1: force to write V1.1 and stop writing features if the limit is
> reached.
> > way 2: force to write V2.0 (and stop writing features if the limit is
> reached (it will no happen in a near future, I think)).
> > way 3: leave that the program decides if V1.1 is not enough and then it
> changes automatically to V2.0. It does it in the middle of the process,
> when FID or some used internal offset gets the limit.
>
> Not knowing anything about the ecosystem of the miramon format, but
> ideally I would bend on the side of simplicity if possible, and I would
> just write V2.0 if V1.1 can be considered as a legacy format, that deserves
> perhaps only read-only support (at our times of terabytes+ storage
> capacity, the saving of 4 bytes per feature seems like a anachronic
> concern). But if you really want to use V1.1 when possible and V2.0 only
> when possible, and provided that you implement the writing of the final
> file only at dataset closing as it was my understanding, then you know
> already the max(FID) of features that have been passed to CreateFeature, so
> you could decide automatically the version needed. I would strongly
> discourage starting writing a V1.1 file and then switching to V2.0 in the
> middle of the writing. That sounds like a serious complication.
>
> >
> > So, my questions:
> > 1.- Which ogr2ogr parameter is the best for doing that?
> >       -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon"
> (automatic way).
>
> If you really need to implement the 2 formats, a dataset creation option
> in a single driver would probably be better.
>
>
> >        Or there is another way I haven't seen (I've read all options
> > in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
> >
> > 2.- When using -progress some points appear on screen informing the
> progress. At the end of the progress (or sometimes driver requires) there
> is a gap of time that driver is writing some pendant information.
> -progress works by counting the number of features in the source layer,
> and computing the progress percentage at each call to CreateFeature()
> > There is any way to inform the user what the process is doing?
>
> Not really. You could possibly implement it using CPLDebug() statements if
> you want to monitor the progress in debug mode (the GeoPackage driver
> implemets something similar during spatial index writing, which can be a
> long operation), but there's nothing dedicated in the OGR API or ogr2ogr to
> monitor the progress of long operations occuring during dataset closing, as
> most drivers don't need that.
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230922/f33b2d4b/attachment-0001.htm>

From a.pau at creaf.uab.cat  Fri Sep 22 04:22:13 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 22 Sep 2023 11:22:13 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <CADRrdKtmkDqyOD7B+vkutB4T0e_Gb+cooLBU2gL2544H8Vs0Tg@mail.gmail.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>
 <AS8PR07MB8168480EC327708420A4BA3BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81682D970E6DB3646D89A5EEA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81686F671C8E7C976A5B0C4BA2E8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB8168EA9A16E532C35C6515AAA2F8A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <CADRrdKtmkDqyOD7B+vkutB4T0e_Gb+cooLBU2gL2544H8Vs0Tg@mail.gmail.com>
Message-ID: <AS8PR07MB81682FAB7EB298C3C941B695A2FFA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Javier,
thanks for your answer and congrats for being part of the PSC!

I am using GDAL functions in the some parts of the driver in order to be as GDAL-friendly as possible (like open files, close, duplicate strings... etc) but I don?t need them if I use this code in MiraMon (We have our own functions). And it?s useful to have this variable to use them or another. In fact when I copy the code to GDAl project I can simply eliminate that and be happy but if I can use that some places, it?s easier for maintenance.

Thanks!!

De: Javier Jimenez Shaw <j1 at jimenezshaw.com>
Enviado el: divendres, 22 de setembre de 2023 13:16
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: Even Rouault <even.rouault at spatialys.com>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

I never used that env bastante before, but it seems to be what you describe. See that it is enabled also in the tests, as Even says in the pull 2666

I'm curious. Why do you need to do something different on GDAL compilation? (I assume it is in a exported header)

On Thu, 21 Sept 2023, 15:56 Abel Pau via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello again!

I need to know that some shared code is being compiled in GDAL project. I can see that GDAL_COMPILATION  (at Preprocessor definition i Visual Studio Project) is everywhere.

It's apropiate to use that variable to know if I am compiling in GDAL or not?
#ifdef GDAL_COMPILATION
I'm in GDAL
#else
I can ignore that code in gdal
#endif

I'm not using that in the code, only in some .h

Thanks!!!


-----Mensaje original-----
De: Abel Pau
Enviado el: dimarts, 5 de setembre de 2023 15:26
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Hi again,
after looking for that in the code, I think that versions depends on layer, so -lco is working fine (instead of -dsco, les used).
So, if there is no inconvenience, I'll use -lco Version=V20, etc...

Thanks again

-----Mensaje original-----
De: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
Enviado el: dimarts, 5 de setembre de 2023 10:43
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Sorry
there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ...

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau Enviado el: dimarts, 5 de setembre de 2023 10:26
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0).
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
        For version 1.1:   ogr2ogr src dst - dsco=V11
        For version 2.0:   ogr2ogr src dst - dsco=V20
        For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
>       -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options
> in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements if you want to monitor the progress in debug mode (the GeoPackage driver implemets something similar during spatial index writing, which can be a long operation), but there's nothing dedicated in the OGR API or ogr2ogr to monitor the progress of long operations occuring during dataset closing, as most drivers don't need that.

Even


--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230922/53113cf1/attachment-0001.htm>

From jonathan-lists at lightpear.com  Fri Sep 22 07:43:16 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Fri, 22 Sep 2023 15:43:16 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
Message-ID: <5cb4f3d6-9dfc-7a46-c1ac-9c51db44006a@lightpear.com>

Tested against the following data types (OGR and GDAL):

GeoJSON, KML, KMZ, Shapefile, ECW, IMG, TIF, GML, ASC, Geopackage, NetCDF.

Only the shapefile fails.


On 21/09/2023 13:34, Jonathan Moules wrote:
>
> Yeah, I'm afraid the error message is pretty much non-existent:
>
>     Traceback (most recent call last):
>     ? File
>     "/home/name/Code/DSHub/PoC/Extract-Transform-Load-POC/Metadata/AME/src/info_vector.py",
>     line 119, in get_layer_metadata
>     ??? tmp_projection = layer.GetSpatialRef()
>     ???????????????????? ^^^^^^^^^^^^^^^^^^^^^
>     ? File
>     "/home/name/anaconda3/envs/AME_env/lib/python3.11/site-packages/osgeo/ogr.py",
>     line 1990, in GetSpatialRef
>     ??? return _ogr.Layer_GetSpatialRef(self, *args)
>     ?????????? ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>     RuntimeError
>
>
> Suggestions welcome.
>
>
> On 18/09/2023 12:51, Javier Jimenez Shaw wrote:
>> Hi Jonathan
>>
>> Which exact RuntimeError are you getting? It can be for several 
>> reasons (probably an installation or configuration issue).
>>
>> Best,
>> Javier
>>
>>
>> On Mon, 18 Sept 2023 at 11:06, Jonathan Moules 
>> <jonathan-lists at lightpear.com> wrote:
>>
>>     Hi List,
>>
>>     I'm trying to get vector layer information via OGR and Python:
>>
>>     ```
>>
>>     layer.GetSpatialRef()
>>
>>     ```
>>
>>     This works fine for me on Windows with GDAL 3.7.1 on various
>>     different
>>     types of files (Shapefile, GPKG, GML, KML, GDB).
>>
>>     But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via
>>     Conda),
>>     they get a Python RuntimeError for all shapefiles (the exact same
>>     shapefiles that work fine for me). It works for Geopackages for them.
>>
>>     Anyone have any thoughts?
>>     Thanks,
>>     Jonathan
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230922/e3537071/attachment.htm>

From jonathan-lists at lightpear.com  Sun Sep 24 14:22:51 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Sun, 24 Sep 2023 22:22:51 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
Message-ID: <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>

 > Also check if the environment isn't messed up regarding PROJ and the 
PROJ_LIB/PROJ_DATA environment variable

Thanks Even; sorry, what does this line mean? I'm guessing you're 
referring to: https://proj.org/en/9.3/usage/environmentvars.html - what 
would a "messed up" one look like?

Thanks,

Jonathan

On 2023-09-21 13:39, Even Rouault via gdal-dev wrote:
>
> Run ogrinfo on one shapefile to see if some more interesting error 
> message is displayed
>
> Also check if the environment isn't messed up regarding PROJ and the 
> PROJ_LIB/PROJ_DATA environment variable
>
> Le 21/09/2023 ? 14:34, Jonathan Moules via gdal-dev a ?crit?:
>>
>> Yeah, I'm afraid the error message is pretty much non-existent:
>>
>>     Traceback (most recent call last):
>>     ? File
>>     "/home/name/Code/DSHub/PoC/Extract-Transform-Load-POC/Metadata/AME/src/info_vector.py",
>>     line 119, in get_layer_metadata
>>     ??? tmp_projection = layer.GetSpatialRef()
>>     ???????????????????? ^^^^^^^^^^^^^^^^^^^^^
>>     ? File
>>     "/home/name/anaconda3/envs/AME_env/lib/python3.11/site-packages/osgeo/ogr.py",
>>     line 1990, in GetSpatialRef
>>     ??? return _ogr.Layer_GetSpatialRef(self, *args)
>>     ?????????? ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>>     RuntimeError
>>
>>
>> Suggestions welcome.
>>
>>
>> On 18/09/2023 12:51, Javier Jimenez Shaw wrote:
>>> Hi Jonathan
>>>
>>> Which exact RuntimeError are you getting? It can be for several 
>>> reasons (probably an installation or configuration issue).
>>>
>>> Best,
>>> Javier
>>>
>>>
>>> On Mon, 18 Sept 2023 at 11:06, Jonathan Moules 
>>> <jonathan-lists at lightpear.com> wrote:
>>>
>>>     Hi List,
>>>
>>>     I'm trying to get vector layer information via OGR and Python:
>>>
>>>     ```
>>>
>>>     layer.GetSpatialRef()
>>>
>>>     ```
>>>
>>>     This works fine for me on Windows with GDAL 3.7.1 on various
>>>     different
>>>     types of files (Shapefile, GPKG, GML, KML, GDB).
>>>
>>>     But for my colleague on Ubuntu 22.0.4.3, also on GDAL 3.7.1 (via
>>>     Conda),
>>>     they get a Python RuntimeError for all shapefiles (the exact same
>>>     shapefiles that work fine for me). It works for Geopackages for
>>>     them.
>>>
>>>     Anyone have any thoughts?
>>>     Thanks,
>>>     Jonathan
>>>
>>>     _______________________________________________
>>>     gdal-dev mailing list
>>>     gdal-dev at lists.osgeo.org
>>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230924/9d5d45b7/attachment.htm>

From even.rouault at spatialys.com  Sun Sep 24 14:35:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 24 Sep 2023 23:35:06 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
Message-ID: <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>


Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit?:
>
> > Also check if the environment isn't messed up regarding PROJ and the 
> PROJ_LIB/PROJ_DATA environment variable
>
> Thanks Even; sorry, what does this line mean? I'm guessing you're 
> referring to: https://proj.org/en/9.3/usage/environmentvars.html - 
> what would a "messed up" one look like?
>
Hard to say without access to the machine. Perhaps just try to recreate 
a new Conda env from scratch


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jonathan-lists at lightpear.com  Sun Sep 24 14:37:30 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Sun, 24 Sep 2023 22:37:30 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
Message-ID: <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>

Thanks Even. I don't have access to the machine either as the colleague 
is moving to another project. I'll have to see if it fails for another 
*nix user.

On 2023-09-24 22:35, Even Rouault wrote:
>
> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit?:
>>
>> > Also check if the environment isn't messed up regarding PROJ and 
>> the PROJ_LIB/PROJ_DATA environment variable
>>
>> Thanks Even; sorry, what does this line mean? I'm guessing you're 
>> referring to: https://proj.org/en/9.3/usage/environmentvars.html - 
>> what would a "messed up" one look like?
>>
> Hard to say without access to the machine. Perhaps just try to 
> recreate a new Conda env from scratch
>
>


From jan.heckman at gmail.com  Sun Sep 24 14:52:17 2023
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sun, 24 Sep 2023 23:52:17 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
Message-ID: <CAKMUAtBbeG43SJnOCOXu_sib0FfvNTBs5tV-=4MxZDnqrwsOsg@mail.gmail.com>

Sorry to break in, but surely, we would like to see the .prj file in
question for a simple try at reproducing?

On Sun, Sep 24, 2023 at 11:37?PM Jonathan Moules via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Thanks Even. I don't have access to the machine either as the colleague
> is moving to another project. I'll have to see if it fails for another
> *nix user.
>
> On 2023-09-24 22:35, Even Rouault wrote:
> >
> > Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
> >>
> >> > Also check if the environment isn't messed up regarding PROJ and
> >> the PROJ_LIB/PROJ_DATA environment variable
> >>
> >> Thanks Even; sorry, what does this line mean? I'm guessing you're
> >> referring to: https://proj.org/en/9.3/usage/environmentvars.html -
> >> what would a "messed up" one look like?
> >>
> > Hard to say without access to the machine. Perhaps just try to
> > recreate a new Conda env from scratch
> >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230924/a59900be/attachment.htm>

From jonathan-lists at lightpear.com  Sun Sep 24 14:58:24 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Sun, 24 Sep 2023 22:58:24 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <CAKMUAtBbeG43SJnOCOXu_sib0FfvNTBs5tV-=4MxZDnqrwsOsg@mail.gmail.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <CAKMUAtBbeG43SJnOCOXu_sib0FfvNTBs5tV-=4MxZDnqrwsOsg@mail.gmail.com>
Message-ID: <6fbdbd73-9001-5194-b66f-f44e139b027e@lightpear.com>

This applies to *all* shapefiles for that user. There are about 10 in 
the sample and they're from a diverse range of UK organisations. Mostly 
27700 (British National Grid), but likely one or two WGS84. Hence 
thinking it may be environmental, but I don't have any real *nix 
knowledge to use to diagnose the issue.


On 2023-09-24 22:52, Jan Heckman wrote:
> Sorry to break in, but surely, we would like to see the .prj file in 
> question for a simple try at reproducing?
>
> On Sun, Sep 24, 2023 at 11:37?PM Jonathan Moules via gdal-dev 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Thanks Even. I don't have access to the machine either as the
>     colleague
>     is moving to another project. I'll have to see if it fails for
>     another
>     *nix user.
>
>     On 2023-09-24 22:35, Even Rouault wrote:
>     >
>     > Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit?:
>     >>
>     >> > Also check if the environment isn't messed up regarding PROJ and
>     >> the PROJ_LIB/PROJ_DATA environment variable
>     >>
>     >> Thanks Even; sorry, what does this line mean? I'm guessing you're
>     >> referring to: https://proj.org/en/9.3/usage/environmentvars.html -
>     >> what would a "messed up" one look like?
>     >>
>     > Hard to say without access to the machine. Perhaps just try to
>     > recreate a new Conda env from scratch
>     >
>     >
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230924/f8f2f8e6/attachment-0001.htm>

From jan.heckman at gmail.com  Sun Sep 24 15:14:09 2023
From: jan.heckman at gmail.com (Jan Heckman)
Date: Mon, 25 Sep 2023 00:14:09 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <6fbdbd73-9001-5194-b66f-f44e139b027e@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <CAKMUAtBbeG43SJnOCOXu_sib0FfvNTBs5tV-=4MxZDnqrwsOsg@mail.gmail.com>
 <6fbdbd73-9001-5194-b66f-f44e139b027e@lightpear.com>
Message-ID: <CAKMUAtASs7jmnA02Stk3bmaumBA7sFBkkS4QzYk2EbJX33XKKw@mail.gmail.com>

That's clear. However, environmental means SET in one environment, and
EXPORT in the other.
Sorry for the pun, but I expect Windows and Linux settings/exports for GDAL
should be fairly similar.
So the environments might be the next step to communicate, if I'm not
mistaken at root.

On Sun, Sep 24, 2023 at 11:58?PM Jonathan Moules <
jonathan-lists at lightpear.com> wrote:

> This applies to *all* shapefiles for that user. There are about 10 in the
> sample and they're from a diverse range of UK organisations. Mostly 27700
> (British National Grid), but likely one or two WGS84. Hence thinking it may
> be environmental, but I don't have any real *nix knowledge to use to
> diagnose the issue.
>
>
> On 2023-09-24 22:52, Jan Heckman wrote:
>
> Sorry to break in, but surely, we would like to see the .prj file in
> question for a simple try at reproducing?
>
> On Sun, Sep 24, 2023 at 11:37?PM Jonathan Moules via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Thanks Even. I don't have access to the machine either as the colleague
>> is moving to another project. I'll have to see if it fails for another
>> *nix user.
>>
>> On 2023-09-24 22:35, Even Rouault wrote:
>> >
>> > Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
>> >>
>> >> > Also check if the environment isn't messed up regarding PROJ and
>> >> the PROJ_LIB/PROJ_DATA environment variable
>> >>
>> >> Thanks Even; sorry, what does this line mean? I'm guessing you're
>> >> referring to: https://proj.org/en/9.3/usage/environmentvars.html -
>> >> what would a "messed up" one look like?
>> >>
>> > Hard to say without access to the machine. Perhaps just try to
>> > recreate a new Conda env from scratch
>> >
>> >
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/584c1127/attachment.htm>

From a.pau at creaf.uab.cat  Mon Sep 25 05:13:15 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 25 Sep 2023 12:13:15 +0000
Subject: [gdal-dev] About installing EXPAT
Message-ID: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi,
I?ve been like hours trying to make EXPAT work in my driver compilation and execution. Without success.
It?s for that reason I am asking for your help. Thanks in advance!

I?ve downloaded EXPAT from GitHub, then I?ve created a folder ?build? and executed cmake .. and opened the result with Visual Studio 2019 (the same I?m using for the driver) and I?ve obtained libexpatd.dll and libexpatd.lib (from Debug). Also tried Release.

In Cmakefile.txt of the project I?ve configured this (below # Developer may want to specify some variable to find proper version.):
set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
set(EXPAT_USE_STATIC_LIBS ON)
set(GDAL_USE_EXPAT ON)

This appears and:
Found EXPAT: D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib (found version "2.5.0")

Next error appears in copiling:
LINK : fatal error LNK1104: cannot open file 'D:\GitHub-repository\libexpat\expat\build\Debug.obj' [D:\GitHub-repositor
y\GDAL\build\GDAL.vcxproj]

But when I change the configuration to a dinamic dll.
set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")
set(EXPAT_USE_STATIC_LIBS OFF)

Found EXPAT: D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll (found version "2.5.0") appears on the lines

Then the compilation works fine but an error appears when I am executing from Debug:
This means something like that system cannot found the dll...

[cid:image001.png at 01D9EFBA.6D796C90]

Any idea what is happening?
Thanks!!



De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau via gdal-dev
Enviado el: divendres, 22 de setembre de 2023 13:22
Para: Javier Jimenez Shaw <j1 at jimenezshaw.com>
CC: gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Javier,
thanks for your answer and congrats for being part of the PSC!

I am using GDAL functions in the some parts of the driver in order to be as GDAL-friendly as possible (like open files, close, duplicate strings... etc) but I don?t need them if I use this code in MiraMon (We have our own functions). And it?s useful to have this variable to use them or another. In fact when I copy the code to GDAl project I can simply eliminate that and be happy but if I can use that some places, it?s easier for maintenance.

Thanks!!

De: Javier Jimenez Shaw <j1 at jimenezshaw.com<mailto:j1 at jimenezshaw.com>>
Enviado el: divendres, 22 de setembre de 2023 13:16
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
CC: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

I never used that env bastante before, but it seems to be what you describe. See that it is enabled also in the tests, as Even says in the pull 2666

I'm curious. Why do you need to do something different on GDAL compilation? (I assume it is in a exported header)

On Thu, 21 Sept 2023, 15:56 Abel Pau via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello again!

I need to know that some shared code is being compiled in GDAL project. I can see that GDAL_COMPILATION  (at Preprocessor definition i Visual Studio Project) is everywhere.

It's apropiate to use that variable to know if I am compiling in GDAL or not?
#ifdef GDAL_COMPILATION
I'm in GDAL
#else
I can ignore that code in gdal
#endif

I'm not using that in the code, only in some .h

Thanks!!!


-----Mensaje original-----
De: Abel Pau
Enviado el: dimarts, 5 de setembre de 2023 15:26
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Hi again,
after looking for that in the code, I think that versions depends on layer, so -lco is working fine (instead of -dsco, les used).
So, if there is no inconvenience, I'll use -lco Version=V20, etc...

Thanks again

-----Mensaje original-----
De: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
Enviado el: dimarts, 5 de setembre de 2023 10:43
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] Creation of a new driver from scratch

Sorry
there was a mistake. I meant: ogr2ogr src dst -dsco Version=V11 ...

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau Enviado el: dimarts, 5 de setembre de 2023 10:26
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Everyone,

Even, after a meeting with the team, we have took in consideration your opinion and we have discard the option of writing V1.1 and change to V2.0 in the middle of writing.
We have a long tradition with V1.1 and we can't ignore that now but we are going to offer both possibilities: read both and write V1.1 and V2.0 according to user's choice (default 2.0).
If V1.1 is not enough for its limitations we are going to show a message:
"MiraMon format limitations." and "Try V2.0 option." and return OGRERR_FAILURE;

Can you confirm that is enough a -f parameter like?
        For version 1.1:   ogr2ogr src dst - dsco=V11
        For version 2.0:   ogr2ogr src dst - dsco=V20
        For last version (to make it simple for possible future versions):  ogr2ogr src dst - dsco=last_version

Thanks a lot for all your kind support.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> Enviado el: dimecres, 30 d?agost de 2023 22:57
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but ideally I would bend on the side of simplicity if possible, and I would just write V2.0 if V1.1 can be considered as a legacy format, that deserves perhaps only read-only support (at our times of terabytes+ storage capacity, the saving of 4 bytes per feature seems like a anachronic concern). But if you really want to use V1.1 when possible and V2.0 only when possible, and provided that you implement the writing of the final file only at dataset closing as it was my understanding, then you know already the max(FID) of features that have been passed to CreateFeature, so you could decide automatically the version needed. I would strongly discourage starting writing a V1.1 file and then switching to V2.0 in the middle of the writing. That sounds like a serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
>       -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options
> in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements if you want to monitor the progress in debug mode (the GeoPackage driver implemets something similar during spatial index writing, which can be a long operation), but there's nothing dedicated in the OGR API or ogr2ogr to monitor the progress of long operations occuring during dataset closing, as most drivers don't need that.

Even


--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/f31c58f4/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 8766 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/f31c58f4/attachment-0001.png>

From even.rouault at spatialys.com  Mon Sep 25 05:29:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 25 Sep 2023 14:29:52 +0200
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>

Abel,

>
> In Cmakefile.txt of the project I?ve configured this (below # 
> Developer may want to specify some variable to find proper version.):
>
> set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
>
> set(EXPAT_LIBRARY 
> "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
>
Is this .lib a static library, or an import library of the .dll ? My 
assumption (I may be wrong) is that it is an import lib of the .dll. In 
which case you must not set EXPAT_USE_STATIC_LIBS
>
> set(EXPAT_LIBRARY 
> "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")
>
That won't work. This needs to be a .lib

You'd better run cmake again on expat with a 
-DCMAKE_INSTALL_PREFIX=d:/install-prefix?? and run "cmake --build . 
--target install", and then when building GDAL, use "cmake .. 
-DCMAKE_PREFIX_PATH=d:/install-prefix", so it automatically configures 
things from what is found in d:/install-prefix

You could also potentially use vcpkg or conda to install GDAL 
dependencies instead of building them from scratch: 
https://gdal.org/download.html

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/b66646be/attachment.htm>

From a.pau at creaf.uab.cat  Mon Sep 25 07:21:11 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 25 Sep 2023 14:21:11 +0000
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
Message-ID: <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Even,
I really appreciate your help.

I prefer going by the easy way so once installed miniconda and applied all the described in download.htm.

To have the EXPAT installed I do that: conda install expat

And the, when I try the cmake .. some issues appear

D:\GitHub-repository\GDAL\build>cmake ..
-- Selecting Windows SDK version 10.0.19041.0 to target Windows 10.0.19045.
-- GDAL_VERSION          = 3.8.0dev
-- GDAL_ABI_FULL_VERSION = 38
-- GDAL_SOVERSION        =
-- Could NOT find MSSQL_NCLI (missing: MSSQL_NCLI_LIBRARY MSSQL_NCLI_INCLUDE_DIR MSSQL_NCLI_VERSION)
-- Could NOT find MSSQL_ODBC (missing: MSSQL_ODBC_LIBRARY MSSQL_ODBC_INCLUDE_DIR MSSQL_ODBC_VERSION)
-- Could NOT find MySQL (missing: MYSQL_LIBRARY MYSQL_INCLUDE_DIR)
-- Could NOT find CURL (missing: CURL_LIBRARY CURL_INCLUDE_DIR)
-- Could NOT find Iconv (missing: Iconv_LIBRARY Iconv_CHARSET_LIBRARY Iconv_INCLUDE_DIR)
-- Could NOT find LibXml2 (missing: LIBXML2_LIBRARY LIBXML2_INCLUDE_DIR)
-- Could NOT find EXPAT (missing: EXPAT_DIR)
-- Could NOT find EXPAT (missing: EXPAT_LIBRARY EXPAT_INCLUDE_DIR)
CMake Error at cmake/helpers/CheckDependentLibraries.cmake:202 (message):
  Configured to use EXPAT, but not found
Call Stack (most recent call first):
  cmake/helpers/CheckDependentLibraries.cmake:348 (gdal_check_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:280 (include)


-- Configuring incomplete, errors occurred!

D:\GitHub-repository\GDAL\build>

There is something I don?t understand because I don?t know what to do now.
Why after doing an gdal_master_env and installing everything and expat it doesn?t work?

Once again, I appreciate your help :)


De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dilluns, 25 de setembre de 2023 14:30
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] About installing EXPAT


Abel,

In Cmakefile.txt of the project I?ve configured this (below # Developer may want to specify some variable to find proper version.):
set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
Is this .lib a static library, or an import library of the .dll ? My assumption (I may be wrong) is that it is an import lib of the .dll. In which case you must not set EXPAT_USE_STATIC_LIBS

set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")

That won't work. This needs to be a .lib

You'd better run cmake again on expat with a -DCMAKE_INSTALL_PREFIX=d:/install-prefix   and run "cmake --build . --target install", and then when building GDAL, use "cmake .. -DCMAKE_PREFIX_PATH=d:/install-prefix", so it automatically configures things from what is found in d:/install-prefix

You could also potentially use vcpkg or conda to install GDAL dependencies instead of building them from scratch: https://gdal.org/download.html

Even

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/8203448c/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Sep 25 07:31:31 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 25 Sep 2023 16:31:31 +0200
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>

Add -DCMAKE_PREFIX_PATH="$CONDA_PREFIX" to your CMake invokation 
(assuming your have activate your Conda environment, so CONDA_PREFIX is set)

My suggestion is inspired from our CI Conda based Windows build: 
https://github.com/OSGeo/gdal/blob/7fc7bb59d2b2de1dca03dd18c14005f2b64adb49/.github/workflows/cmake_builds.yml#L463

You should also probably clear your existing CMakeCache.txt before doing 
the abve, to avoid mixing with variables set from your previous experiments

Le 25/09/2023 ? 16:21, Abel Pau a ?crit?:
>
> Hi Even,
>
> I really appreciate your help.
>
> I prefer going by the easy way so once installed miniconda and applied 
> all the described in download.htm.
>
> To have the EXPAT installed I do that: conda install expat
>
> And the, when I try the cmake .. some issues appear
>
> D:\GitHub-repository\GDAL\build>cmake ..
>
> -- Selecting Windows SDK version 10.0.19041.0 to target Windows 
> 10.0.19045.
>
> -- GDAL_VERSION????????? = 3.8.0dev
>
> -- GDAL_ABI_FULL_VERSION = 38
>
> -- GDAL_SOVERSION??????? =
>
> -- Could NOT find MSSQL_NCLI (missing: MSSQL_NCLI_LIBRARY 
> MSSQL_NCLI_INCLUDE_DIR MSSQL_NCLI_VERSION)
>
> -- Could NOT find MSSQL_ODBC (missing: MSSQL_ODBC_LIBRARY 
> MSSQL_ODBC_INCLUDE_DIR MSSQL_ODBC_VERSION)
>
> -- Could NOT find MySQL (missing: MYSQL_LIBRARY MYSQL_INCLUDE_DIR)
>
> -- Could NOT find CURL (missing: CURL_LIBRARY CURL_INCLUDE_DIR)
>
> -- Could NOT find Iconv (missing: Iconv_LIBRARY Iconv_CHARSET_LIBRARY 
> Iconv_INCLUDE_DIR)
>
> -- Could NOT find LibXml2 (missing: LIBXML2_LIBRARY LIBXML2_INCLUDE_DIR)
>
> -- Could NOT find EXPAT (missing: EXPAT_DIR)
>
> -- Could NOT find EXPAT (missing: EXPAT_LIBRARY EXPAT_INCLUDE_DIR)
>
> CMake Error at cmake/helpers/CheckDependentLibraries.cmake:202 (message):
>
> ? Configured to use EXPAT, but not found
>
> Call Stack (most recent call first):
>
> cmake/helpers/CheckDependentLibraries.cmake:348 (gdal_check_package)
>
> ? gdal.cmake:265 (include)
>
> ? CMakeLists.txt:280 (include)
>
> -- Configuring incomplete, errors occurred!
>
> D:\GitHub-repository\GDAL\build>
>
> There is something I don?t understand because I don?t know what to do now.
>
> *Why after doing an gdal_master_env and installing everything and 
> expat it doesn?t work?*
>
> Once again, I appreciate your help :)
>
> *De:*Even Rouault <even.rouault at spatialys.com>
> *Enviado el:* dilluns, 25 de setembre de 2023 14:30
> *Para:* Abel Pau <a.pau at creaf.uab.cat>; gdal dev 
> <gdal-dev at lists.osgeo.org>
> *Asunto:* Re: [gdal-dev] About installing EXPAT
>
> Abel,
>
>     In Cmakefile.txt of the project I?ve configured this (below #
>     Developer may want to specify some variable to find proper version.):
>
>     set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
>
>     set(EXPAT_LIBRARY
>     "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
>
> Is this .lib a static library, or an import library of the .dll ? My 
> assumption (I may be wrong) is that it is an import lib of the .dll. 
> In which case you must not set EXPAT_USE_STATIC_LIBS
>
>     set(EXPAT_LIBRARY
>     "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")
>
> That won't work. This needs to be a .lib
>
> You'd better run cmake again on expat with a 
> -DCMAKE_INSTALL_PREFIX=d:/install-prefix?? and run "cmake --build . 
> --target install", and then when building GDAL, use "cmake .. 
> -DCMAKE_PREFIX_PATH=d:/install-prefix", so it automatically configures 
> things from what is found in d:/install-prefix
>
> You could also potentially use vcpkg or conda to install GDAL 
> dependencies instead of building them from scratch: 
> https://gdal.org/download.html
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/3f6cf510/attachment.htm>

From a.pau at creaf.uab.cat  Mon Sep 25 08:25:11 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 25 Sep 2023 15:25:11 +0000
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
Message-ID: <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi again,
well after using CONDA_PREFIX some errors appear about packages that are not included (I suppose).

archive.dll
libcrypto-3-x64.dll
libssl-3-x64.dll
liblz4.dll

Are they familiar to you?


De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dilluns, 25 de setembre de 2023 16:32
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] About installing EXPAT


Add -DCMAKE_PREFIX_PATH="$CONDA_PREFIX" to your CMake invokation (assuming your have activate your Conda environment, so CONDA_PREFIX is set)

My suggestion is inspired from our CI Conda based Windows build: https://github.com/OSGeo/gdal/blob/7fc7bb59d2b2de1dca03dd18c14005f2b64adb49/.github/workflows/cmake_builds.yml#L463

You should also probably clear your existing CMakeCache.txt before doing the abve, to avoid mixing with variables set from your previous experiments
Le 25/09/2023 ? 16:21, Abel Pau a ?crit :
Hi Even,
I really appreciate your help.

I prefer going by the easy way so once installed miniconda and applied all the described in download.htm.

To have the EXPAT installed I do that: conda install expat

And the, when I try the cmake .. some issues appear

D:\GitHub-repository\GDAL\build>cmake ..
-- Selecting Windows SDK version 10.0.19041.0 to target Windows 10.0.19045.
-- GDAL_VERSION          = 3.8.0dev
-- GDAL_ABI_FULL_VERSION = 38
-- GDAL_SOVERSION        =
-- Could NOT find MSSQL_NCLI (missing: MSSQL_NCLI_LIBRARY MSSQL_NCLI_INCLUDE_DIR MSSQL_NCLI_VERSION)
-- Could NOT find MSSQL_ODBC (missing: MSSQL_ODBC_LIBRARY MSSQL_ODBC_INCLUDE_DIR MSSQL_ODBC_VERSION)
-- Could NOT find MySQL (missing: MYSQL_LIBRARY MYSQL_INCLUDE_DIR)
-- Could NOT find CURL (missing: CURL_LIBRARY CURL_INCLUDE_DIR)
-- Could NOT find Iconv (missing: Iconv_LIBRARY Iconv_CHARSET_LIBRARY Iconv_INCLUDE_DIR)
-- Could NOT find LibXml2 (missing: LIBXML2_LIBRARY LIBXML2_INCLUDE_DIR)
-- Could NOT find EXPAT (missing: EXPAT_DIR)
-- Could NOT find EXPAT (missing: EXPAT_LIBRARY EXPAT_INCLUDE_DIR)
CMake Error at cmake/helpers/CheckDependentLibraries.cmake:202 (message):
  Configured to use EXPAT, but not found
Call Stack (most recent call first):
  cmake/helpers/CheckDependentLibraries.cmake:348 (gdal_check_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:280 (include)


-- Configuring incomplete, errors occurred!

D:\GitHub-repository\GDAL\build>

There is something I don?t understand because I don?t know what to do now.
Why after doing an gdal_master_env and installing everything and expat it doesn?t work?

Once again, I appreciate your help :)


De: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Enviado el: dilluns, 25 de setembre de 2023 14:30
Para: Abel Pau <a.pau at creaf.uab.cat><mailto:a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] About installing EXPAT


Abel,

In Cmakefile.txt of the project I?ve configured this (below # Developer may want to specify some variable to find proper version.):
set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
Is this .lib a static library, or an import library of the .dll ? My assumption (I may be wrong) is that it is an import lib of the .dll. In which case you must not set EXPAT_USE_STATIC_LIBS


set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")

That won't work. This needs to be a .lib

You'd better run cmake again on expat with a -DCMAKE_INSTALL_PREFIX=d:/install-prefix   and run "cmake --build . --target install", and then when building GDAL, use "cmake .. -DCMAKE_PREFIX_PATH=d:/install-prefix", so it automatically configures things from what is found in d:/install-prefix

You could also potentially use vcpkg or conda to install GDAL dependencies instead of building them from scratch: https://gdal.org/download.html

Even

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230925/e3b43364/attachment-0001.htm>

From lucadeluge at gmail.com  Mon Sep 25 23:55:04 2023
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 26 Sep 2023 08:55:04 +0200
Subject: [gdal-dev] GDAL version in pip requirements file
Message-ID: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>

Hi everyone,

I would like to know if it is possible to set GDAL version in the pip
requirements file using gdal-config of the machine running the
installation, I tried some different ways but I was not able to do it,
also leaving GDAL without any specified version doesn't work because
it takes the last python GDAL version available in that system.

Do you have any advice?


-- 
ciao
Luca

www.lucadelu.org

From Stefan.Blumentrath at gmx.de  Tue Sep 26 00:07:45 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Tue, 26 Sep 2023 09:07:45 +0200
Subject: [gdal-dev] =?utf-8?q?GDAL_version_in_pip_requirements_file?=
In-Reply-To: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
Message-ID: <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230926/92321bf2/attachment.htm>

From pschmitt at gmail.com  Tue Sep 26 07:33:37 2023
From: pschmitt at gmail.com (Peter Schmitt)
Date: Tue, 26 Sep 2023 08:33:37 -0600
Subject: [gdal-dev] GDAL version in pip requirements file
In-Reply-To: <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
Message-ID: <CACkcqcV7ukgTcWBvM3Y4RiNCz48G5oxRoHj5whPTc_A-duzcdw@mail.gmail.com>

I know you mention requirements.txt, but I write my setup.py with a
function that uses gdal-config to get Python bindings for the version of
GDAL I have installed.  It looks something like this:

from setuptools import setup, find_packages
from subprocess import check_output

class GdalNotFoundError(Exception): pass

def gdal_version():
    """Returns version provided by gdal-config

    >>> gdal_version()
    '3.3.1'
    """

    try:
        version = check_output(['gdal-config', '--version'])
    except FileNotFoundError as err:
        raise GdalNotFoundError('GDAL must be installed and `gdal-config`
must be in the $PATH to continue')

    return version.decode('utf-8').strip()

setup(
    name='foo',
    description='bar.',
    version='0.0.0',
    py_modules=['cli'],
    packages=find_packages(exclude=['tests', 'docs']),
    include_package_data=True,
    install_requires=[
        f'gdal=={gdal_version()}',
    ],
    entry_points='''
        [console_scripts]
        foo=cli:cli
        ''',
)

On Tue, Sep 26, 2023 at 1:13?AM Stefan Blumentrath via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Luca,
>
> You could parse the gdal config version output into an environment
> variable and then specify the version in requirements.txt like this:
> GDAL==${GDAL_VERSION}
>
> Cheers,
> Stefan
> On 26/09/2023, 08:55 Luca Delucchi via gdal-dev <gdal-dev at lists.osgeo.org>
> wrote:
>
>> Hi everyone,
>>
>> I would like to know if it is possible to set GDAL version in the pip
>> requirements file using gdal-config of the machine running the
>> installation, I tried some different ways but I was not able to do it,
>> also leaving GDAL without any specified version doesn't work because
>> it takes the last python GDAL version available in that system.
>>
>> Do you have any advice?
>>
>>
>> --
>> ciao
>> Luca
>>
>> www.lucadelu.org
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230926/e0969173/attachment.htm>

From public at postholer.com  Tue Sep 26 20:15:42 2023
From: public at postholer.com (Scott)
Date: Tue, 26 Sep 2023 20:15:42 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
Message-ID: <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>

Any tips for using ogr2ogr to use only a specified amount of RAM? I'm 
not having any luck.

From billmyers at google.com  Wed Sep 27 10:44:18 2023
From: billmyers at google.com (Bill Myers)
Date: Wed, 27 Sep 2023 11:44:18 -0600
Subject: [gdal-dev] GDAL Interpolation Help
Message-ID: <CAA6+mXW5Obj1W1G7ZVFtwcoRXMhiZYDvvH16GKCwy27RD=h-2g@mail.gmail.com>

Hi,
I am new to working with GDAL. We are trying to spatially interpolate
Numerical Weather Prediction (NWP) model data to an arbitrary location,
i.e. lat/lon. We have been using gdal_translate but have been getting
unexpected results.
We have used the resampling method called "average". In this toy example,
we are trying to resample to a grid with twice the density of the input
data set. As can be seen in the image in the link below, the values at
the points that match the input points agree with the input values. That's
good. However, the interpolated values do not match our expectations. We
would expect the interpolated value at the midpoint (directly between two
input points) to be the average of those two input points. As can be seen,
this is not the case.
Can someone please help us understand what we might be doing incorrectly?
Also, does GDAL have the functionality that we are looking for?
Thanks for your help.
-b
https://pasteboard.co/uumLD4JtNmp3.png
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230927/5f5faac2/attachment.htm>

From public at postholer.com  Wed Sep 27 10:54:43 2023
From: public at postholer.com (Scott)
Date: Wed, 27 Sep 2023 10:54:43 -0700
Subject: [gdal-dev] GDAL Interpolation Help
In-Reply-To: <CAA6+mXW5Obj1W1G7ZVFtwcoRXMhiZYDvvH16GKCwy27RD=h-2g@mail.gmail.com>
References: <CAA6+mXW5Obj1W1G7ZVFtwcoRXMhiZYDvvH16GKCwy27RD=h-2g@mail.gmail.com>
Message-ID: <6376e209-b504-c7a4-c931-404717687f61@postholer.com>

Averaging rasters is a common task. Often I see developers write many 
lines of python to do simple tasks like this. The following GDAL command 
should give you the results you're looking for:

gdal_calc.py -A input1.tif -B input2.tif --outfile=result.tif 
--calc="(A+B)/2"

The above command was taken directly from the gdal_calc.py man page:
https://gdal.org/programs/gdal_calc.html


On 9/27/23 10:44, Bill Myers via gdal-dev wrote:
> Hi,
> I am new to working with GDAL. We are trying to spatially interpolate 
> Numerical Weather Prediction (NWP) model data to an arbitrary location, 
> i.e. lat/lon. We have been using gdal_translate but have been getting 
> unexpected results.
> We have used the resampling method called "average". In this toy 
> example, we are trying to resample to a grid with twice the density of 
> the input data set. As can be seen in the image in?the link below, the 
> values at the?points that match the input points agree with the input 
> values. That's good. However, the interpolated values do not match our 
> expectations. We would expect the interpolated value at the midpoint 
> (directly between two input points) to be the average of those two input 
> points. As can be seen, this is not the case.
> Can someone please help us understand what we might be doing 
> incorrectly? Also, does GDAL have the functionality that we are looking for?
> Thanks for your help.
> -b
> https://pasteboard.co/uumLD4JtNmp3.png 
> <https://pasteboard.co/uumLD4JtNmp3.png>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Sep 27 11:06:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 27 Sep 2023 20:06:52 +0200
Subject: [gdal-dev] GDAL Interpolation Help
In-Reply-To: <CAA6+mXW5Obj1W1G7ZVFtwcoRXMhiZYDvvH16GKCwy27RD=h-2g@mail.gmail.com>
References: <CAA6+mXW5Obj1W1G7ZVFtwcoRXMhiZYDvvH16GKCwy27RD=h-2g@mail.gmail.com>
Message-ID: <97570ebb-82c8-08de-e486-7ab068a591f1@spatialys.com>

Bill,

here you upsample from a 3x3 to a 5x5 array. Consequently each target 
pixel averages 5/3 x 5/3 contributing source pixels , not 2 x 2.? This 
way the total sum of the values of the target array is preserved 
compared to to the sum of the values of the source array, if you 
multiply the sum by 3/5 * 3/5.

To get what you expect you should work with even-sized arrays

Even

Le 27/09/2023 ? 19:44, Bill Myers via gdal-dev a ?crit?:
> Hi,
> I am new to working with GDAL. We are trying to spatially interpolate 
> Numerical Weather Prediction (NWP) model data to an arbitrary 
> location, i.e. lat/lon. We have been using gdal_translate but have 
> been getting unexpected results.
> We have used the resampling method called "average". In this toy 
> example, we are trying to resample to a grid with twice the density of 
> the input data set. As can be seen in the image in?the link below, the 
> values at the?points that match the input points agree with the input 
> values. That's good. However, the interpolated values do not match our 
> expectations. We would expect the interpolated value at the midpoint 
> (directly between two input points) to be the average of those two 
> input points. As can be seen, this is not the case.
> Can someone please help us understand what we might be doing 
> incorrectly? Also, does GDAL have the functionality that we are 
> looking for?
> Thanks for your help.
> -b
> https://pasteboard.co/uumLD4JtNmp3.png
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230927/a956d21c/attachment.htm>

From a.pau at creaf.uab.cat  Thu Sep 28 01:01:36 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 28 Sep 2023 08:01:36 +0000
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
Message-ID: <AS8PR07MB8168E1A1F2D6E4778FE50982A2C1A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Scott,

As a programmer, I can see that when translating from one format to another, there is a minimal amount of memory to work with. The primary objective for a programmer is to be cautious about this and strive to stay within this limit. The easy solution would be to request as much memory as needed, but in reality, this approach doesn't work in the long run.

During these days, while I've been working on a driver to integrate it into GDAL, I haven't come across a defined memory limit in the ogr2ogr options (though I could be mistaken). I have set my own limitations because I understand that if not, issues will inevitably arise.

If you encounter problems, perhaps you could consider breaking down the problem into smaller parts (if possible) and work with these parts separately before recombining them.

I apologize for not providing a concrete solution.

Best regards,
Abel

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Scott via gdal-dev
Enviado el: dimecres, 27 de setembre de 2023 5:16
Para: gdal-dev at lists.osgeo.org
Asunto: [gdal-dev] Using ogr2ogr with limited memory

Any tips for using ogr2ogr to use only a specified amount of RAM? I'm not having any luck.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From lnicola at dend.ro  Thu Sep 28 01:09:32 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 28 Sep 2023 11:09:32 +0300
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
Message-ID: <357f3371-6a38-4a91-a265-910bb1daf048@betaapp.fastmail.com>

Hello,

You might want to say which drivers you're using. I can imagine PostGIS  with PG_USE_COPY using more memory with a larger batch size (ogr2ogr -gt), for example. But most likely you're not going to be able to do anything about it.

So how much memory are we talking about, and which formats? How does it change if you pick a different input or output format?

Laurentiu

On Wed, Sep 27, 2023, at 06:15, Scott via gdal-dev wrote:
> Any tips for using ogr2ogr to use only a specified amount of RAM? I'm 
> not having any luck.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep 28 01:35:38 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 28 Sep 2023 08:35:38 +0000
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
Message-ID: <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Do you mean that your conversions fail because ogr2ogr does not get enough memory, or do you want to tell ogr2ogr to use max xxx MB of memory even there is much more available?

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Scott via gdal-dev
L?hetetty: keskiviikko 27. syyskuuta 2023 6.16
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Using ogr2ogr with limited memory

Any tips for using ogr2ogr to use only a specified amount of RAM? I'm not having any luck.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From stefan.uhrig at sap.com  Thu Sep 28 02:45:42 2023
From: stefan.uhrig at sap.com (Uhrig, Stefan)
Date: Thu, 28 Sep 2023 09:45:42 +0000
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
 <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AM7PR02MB57848F661B433C92923A8C3293C1A@AM7PR02MB5784.eurprd02.prod.outlook.com>

Hi Abel,

I can recommend vcpkg (https://vcpkg.io/) if you?d like to build GDAL on Windows with Visual Studio or Visual Studio Community Edition.

vcpkg builds packages from sources and can build the mandatory dependencies of GDAL (and a lot of optional ones). You get a working starting set via

vcpkg --triplet=x64-windows install curl expat geos lerc libdeflate libgeotiff libiconv libpng libxml2 openssl proj qhull sqlite3[rtree] xerces-c zlib

You can then open GDAL?s CMakeLists.txt file in Visual Studio via File -> Open -> CMake? After configuration, you can just start the build:

>------ Build All started: Project: gdal, Configuration: x64-Debug ------
  [1/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\crc32.c.obj
  [2/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\trees.c.obj
  [3/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\uncompr.c.obj
...
  [1348/1351] Linking CXX executable fuzzers\tests\test_ogr_fuzzer.exe
  [1349/1351] Linking CXX executable fuzzers\tests\test_gdal_fuzzer.exe
  [1350/1351] Linking CXX executable perftests\bench_ogr_c_api.exe
  [1351/1351] Linking CXX executable fuzzers\tests\test_osr_set_from_user_input_fuzzer.exe

Build All succeeded.

vcpkg builds debug and release versions of the packages. As the packages are built from source, you can even debug into the dependencies because the source code is on your machine. That can be really helpful from time to time.

I?d recommend starting from a clean environment though. I guess you tweaked quite a lot to get GDAL building.

Cheers,
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Abel Pau via gdal-dev
Sent: Monday, September 25, 2023 5:25 PM
To: Even Rouault <even.rouault at spatialys.com>; gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] About installing EXPAT

Hi again,
well after using CONDA_PREFIX some errors appear about packages that are not included (I suppose).

archive.dll
libcrypto-3-x64.dll
libssl-3-x64.dll
liblz4.dll

Are they familiar to you?


De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Enviado el: dilluns, 25 de setembre de 2023 16:32
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Asunto: Re: [gdal-dev] About installing EXPAT


Add -DCMAKE_PREFIX_PATH="$CONDA_PREFIX" to your CMake invokation (assuming your have activate your Conda environment, so CONDA_PREFIX is set)

My suggestion is inspired from our CI Conda based Windows build: https://github.com/OSGeo/gdal/blob/7fc7bb59d2b2de1dca03dd18c14005f2b64adb49/.github/workflows/cmake_builds.yml#L463

You should also probably clear your existing CMakeCache.txt before doing the abve, to avoid mixing with variables set from your previous experiments
Le 25/09/2023 ? 16:21, Abel Pau a ?crit :
Hi Even,
I really appreciate your help.

I prefer going by the easy way so once installed miniconda and applied all the described in download.htm.

To have the EXPAT installed I do that: conda install expat

And the, when I try the cmake .. some issues appear

D:\GitHub-repository\GDAL\build>cmake ..
-- Selecting Windows SDK version 10.0.19041.0 to target Windows 10.0.19045.
-- GDAL_VERSION          = 3.8.0dev
-- GDAL_ABI_FULL_VERSION = 38
-- GDAL_SOVERSION        =
-- Could NOT find MSSQL_NCLI (missing: MSSQL_NCLI_LIBRARY MSSQL_NCLI_INCLUDE_DIR MSSQL_NCLI_VERSION)
-- Could NOT find MSSQL_ODBC (missing: MSSQL_ODBC_LIBRARY MSSQL_ODBC_INCLUDE_DIR MSSQL_ODBC_VERSION)
-- Could NOT find MySQL (missing: MYSQL_LIBRARY MYSQL_INCLUDE_DIR)
-- Could NOT find CURL (missing: CURL_LIBRARY CURL_INCLUDE_DIR)
-- Could NOT find Iconv (missing: Iconv_LIBRARY Iconv_CHARSET_LIBRARY Iconv_INCLUDE_DIR)
-- Could NOT find LibXml2 (missing: LIBXML2_LIBRARY LIBXML2_INCLUDE_DIR)
-- Could NOT find EXPAT (missing: EXPAT_DIR)
-- Could NOT find EXPAT (missing: EXPAT_LIBRARY EXPAT_INCLUDE_DIR)
CMake Error at cmake/helpers/CheckDependentLibraries.cmake:202 (message):
  Configured to use EXPAT, but not found
Call Stack (most recent call first):
  cmake/helpers/CheckDependentLibraries.cmake:348 (gdal_check_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:280 (include)


-- Configuring incomplete, errors occurred!

D:\GitHub-repository\GDAL\build>

There is something I don?t understand because I don?t know what to do now.
Why after doing an gdal_master_env and installing everything and expat it doesn?t work?

Once again, I appreciate your help :)


De: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Enviado el: dilluns, 25 de setembre de 2023 14:30
Para: Abel Pau <a.pau at creaf.uab.cat><mailto:a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] About installing EXPAT


Abel,

In Cmakefile.txt of the project I?ve configured this (below # Developer may want to specify some variable to find proper version.):
set(EXPAT_INCLUDE_DIR "D:/GitHub-repository/libexpat/expat/lib")
set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.lib")
Is this .lib a static library, or an import library of the .dll ? My assumption (I may be wrong) is that it is an import lib of the .dll. In which case you must not set EXPAT_USE_STATIC_LIBS

set(EXPAT_LIBRARY "D:/GitHub-repository/libexpat/expat/build/Debug/libexpatd.dll")

That won't work. This needs to be a .lib

You'd better run cmake again on expat with a -DCMAKE_INSTALL_PREFIX=d:/install-prefix   and run "cmake --build . --target install", and then when building GDAL, use "cmake .. -DCMAKE_PREFIX_PATH=d:/install-prefix", so it automatically configures things from what is found in d:/install-prefix

You could also potentially use vcpkg or conda to install GDAL dependencies instead of building them from scratch: https://gdal.org/download.html

Even

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/80cd5017/attachment-0001.htm>

From jonathan-lists at lightpear.com  Thu Sep 28 04:10:28 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Thu, 28 Sep 2023 12:10:28 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
Message-ID: <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>

Hi Even,

The colleague doesn't have either a PROJ_LIB or a PROJ_DATA environment 
variable.

I asked another colleague to try it; they're on Ubuntu 20.04, and it 
worked for them. I believe using the same setup instructions.

Cheers,

Jonathan

On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
> Thanks Even. I don't have access to the machine either as the 
> colleague is moving to another project. I'll have to see if it fails 
> for another *nix user.
>
> On 2023-09-24 22:35, Even Rouault wrote:
>>
>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit?:
>>>
>>> > Also check if the environment isn't messed up regarding PROJ and 
>>> the PROJ_LIB/PROJ_DATA environment variable
>>>
>>> Thanks Even; sorry, what does this line mean? I'm guessing you're 
>>> referring to: https://proj.org/en/9.3/usage/environmentvars.html - 
>>> what would a "messed up" one look like?
>>>
>> Hard to say without access to the machine. Perhaps just try to 
>> recreate a new Conda env from scratch
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep 28 04:37:27 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 28 Sep 2023 11:37:27 +0000
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
Message-ID: <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Then they should add that environment if they do not know that they do not belong to "most users" https://proj.org/en/9.3/usage/environmentvars.html

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Jonathan Moules via gdal-dev
L?hetetty: torstai 28. syyskuuta 2023 14.10
Vastaanottaja: gdal-dev at lists.osgeo.org; Even Rouault <even.rouault at spatialys.com>
Aihe: Re: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles

Hi Even,

The colleague doesn't have either a PROJ_LIB or a PROJ_DATA environment variable.

I asked another colleague to try it; they're on Ubuntu 20.04, and it worked for them. I believe using the same setup instructions.

Cheers,

Jonathan

On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
> Thanks Even. I don't have access to the machine either as the
> colleague is moving to another project. I'll have to see if it fails
> for another *nix user.
>
> On 2023-09-24 22:35, Even Rouault wrote:
>>
>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
>>>
>>> > Also check if the environment isn't messed up regarding PROJ and
>>> the PROJ_LIB/PROJ_DATA environment variable
>>>
>>> Thanks Even; sorry, what does this line mean? I'm guessing you're
>>> referring to:
>>> https://proj.org/en/9.3/usage/environmentvars.html - what would a "messed up" one look like?
>>>
>> Hard to say without access to the machine. Perhaps just try to
>> recreate a new Conda env from scratch
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://list/
> s.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahko
> nen%40maanmittauslaitos.fi%7C1f6517888cb34fa40aed08dbc01389dd%7Cc4f8a6
> 3255804a1c92371d5a571b71fa%7C0%7C0%7C638314962370381350%7CUnknown%7CTW
> FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
> Mn0%3D%7C3000%7C%7C%7C&sdata=3fVru6K6Ndpkv35FnAbMOlT%2BM96USO7wywqx550
> uRUs%3D&reserved=0

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jonathan-lists at lightpear.com  Thu Sep 28 06:58:45 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Thu, 28 Sep 2023 14:58:45 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
 <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <82b0b64a-3975-0213-28cf-fc408539ceb9@lightpear.com>

Well, it seems that PROJ_DATA isn't set in their environment. But it's 
not set in mine either (`print(os.environ['PROJ_DATA']`)! So no idea why 
mine works just fine without it (Windows 11 thing?).

Creating a PROJ_DATA env var didn't fix anything. Even adding it 
explicitly in Python.

Their log file does have this in at a WARNING level:

`PROJ: proj_create_from_database: Open of 
/home/user/anaconda3/envs/env1/share/proj failed`

That path has: `drwxrwxr-x` permissions.

To answer Even's earlier question:

`ogrinfo /path/to/shape.shp` works fine on their system.



On 2023-09-28 12:37, Rahkonen Jukka wrote:
> Hi,
>
> Then they should add that environment if they do not know that they do not belong to "most users" https://proj.org/en/9.3/usage/environmentvars.html
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Jonathan Moules via gdal-dev
> L?hetetty: torstai 28. syyskuuta 2023 14.10
> Vastaanottaja: gdal-dev at lists.osgeo.org; Even Rouault <even.rouault at spatialys.com>
> Aihe: Re: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
>
> Hi Even,
>
> The colleague doesn't have either a PROJ_LIB or a PROJ_DATA environment variable.
>
> I asked another colleague to try it; they're on Ubuntu 20.04, and it worked for them. I believe using the same setup instructions.
>
> Cheers,
>
> Jonathan
>
> On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
>> Thanks Even. I don't have access to the machine either as the
>> colleague is moving to another project. I'll have to see if it fails
>> for another *nix user.
>>
>> On 2023-09-24 22:35, Even Rouault wrote:
>>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
>>>>> Also check if the environment isn't messed up regarding PROJ and
>>>> the PROJ_LIB/PROJ_DATA environment variable
>>>>
>>>> Thanks Even; sorry, what does this line mean? I'm guessing you're
>>>> referring to:
>>>> https://proj.org/en/9.3/usage/environmentvars.html - what would a "messed up" one look like?
>>>>
>>> Hard to say without access to the machine. Perhaps just try to
>>> recreate a new Conda env from scratch
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://list/
>> s.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahko
>> nen%40maanmittauslaitos.fi%7C1f6517888cb34fa40aed08dbc01389dd%7Cc4f8a6
>> 3255804a1c92371d5a571b71fa%7C0%7C0%7C638314962370381350%7CUnknown%7CTW
>> FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
>> Mn0%3D%7C3000%7C%7C%7C&sdata=3fVru6K6Ndpkv35FnAbMOlT%2BM96USO7wywqx550
>> uRUs%3D&reserved=0
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From lucadeluge at gmail.com  Thu Sep 28 07:56:14 2023
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 28 Sep 2023 16:56:14 +0200
Subject: [gdal-dev] GDAL version in pip requirements file
In-Reply-To: <CACkcqcV7ukgTcWBvM3Y4RiNCz48G5oxRoHj5whPTc_A-duzcdw@mail.gmail.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <CACkcqcV7ukgTcWBvM3Y4RiNCz48G5oxRoHj5whPTc_A-duzcdw@mail.gmail.com>
Message-ID: <CAK4m-3x8wq0+SSxTiXRa_2fWDAq0EGVoV6T9sbBWyNe1kDS_mw@mail.gmail.com>

Hi Peter,

Il mar 26 set 2023, 16:33 Peter Schmitt <pschmitt at gmail.com> ha scritto:

> I know you mention requirements.txt, but I write my setup.py with a
> function that uses gdal-config to get Python bindings for the version of
> GDAL I have installed.  It looks something like this:
>

Thanks for your help but I'm looking something strictly related to
requirements.txt

>
> from setuptools import setup, find_packages
> from subprocess import check_output
>
> class GdalNotFoundError(Exception): pass
>
> def gdal_version():
>     """Returns version provided by gdal-config
>
>     >>> gdal_version()
>     '3.3.1'
>     """
>
>     try:
>         version = check_output(['gdal-config', '--version'])
>     except FileNotFoundError as err:
>         raise GdalNotFoundError('GDAL must be installed and `gdal-config`
> must be in the $PATH to continue')
>
>     return version.decode('utf-8').strip()
>
> setup(
>     name='foo',
>     description='bar.',
>     version='0.0.0',
>     py_modules=['cli'],
>     packages=find_packages(exclude=['tests', 'docs']),
>     include_package_data=True,
>     install_requires=[
>         f'gdal=={gdal_version()}',
>     ],
>     entry_points='''
>         [console_scripts]
>         foo=cli:cli
>         ''',
> )
>

Best
Luca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/e886aeff/attachment.htm>

From lucadeluge at gmail.com  Thu Sep 28 07:56:51 2023
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 28 Sep 2023 16:56:51 +0200
Subject: [gdal-dev] GDAL version in pip requirements file
In-Reply-To: <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
Message-ID: <CAK4m-3wkrMoEY6c8ZHrFMPOK_UTEwTKLGarTzDX8CXztwoJR_g@mail.gmail.com>

Il mar 26 set 2023, 09:07 Stefan Blumentrath <Stefan.Blumentrath at gmx.de> ha
scritto:

> Hi Luca,
>

Hi Stefan,

>
> You could parse the gdal config version output into an environment
> variable and then specify the version in requirements.txt like this:
> GDAL==${GDAL_VERSION}
>

Thanks a lot it looks a good solution

>
> Cheers,
> Stefan
>

Best
Luca

>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/bd737191/attachment-0001.htm>

From schwehr at gmail.com  Thu Sep 28 09:10:43 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 28 Sep 2023 09:10:43 -0700
Subject: [gdal-dev] GDAL version in pip requirements file
In-Reply-To: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
Message-ID: <CACmBxysMJp0_5YAVwgpnTT=Xd1iEsCFKbBkkiZzafp896f7zbw@mail.gmail.com>

I am not sure if there is anything in this, but take a look at
https://packaging.python.org/en/latest/guides/

Also, I might suggest avoiding command line solutions. You can get the
version from the python module

On Mon, Sep 25, 2023, 11:55 PM Luca Delucchi via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi everyone,
>
> I would like to know if it is possible to set GDAL version in the pip
> requirements file using gdal-config of the machine running the
> installation, I tried some different ways but I was not able to do it,
> also leaving GDAL without any specified version doesn't work because
> it takes the last python GDAL version available in that system.
>
> Do you have any advice?
>
>
> --
> ciao
> Luca
>
> www.lucadelu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/7ef774d0/attachment.htm>

From public at postholer.com  Thu Sep 28 09:47:32 2023
From: public at postholer.com (Scott)
Date: Thu, 28 Sep 2023 09:47:32 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>


I should have been more specific.

One particular machine has 8GB of memory. When I try to do the most 
simple ogr2ogr command on large files, the host runs out of memory 
(vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.

The data formats I have experienced this with are .fgb, .parquet and 
.gpkg. The data files are 10's of GB.

Thanks for the responses!

From even.rouault at spatialys.com  Thu Sep 28 10:03:28 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 28 Sep 2023 19:03:28 +0200
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
Message-ID: <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>


Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>
> I should have been more specific.
>
> One particular machine has 8GB of memory. When I try to do the most 
> simple ogr2ogr command on large files, the host runs out of memory 
> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.
>
> The data formats I have experienced this with are .fgb, .parquet and 
> .gpkg. The data files are 10's of GB.

As input ? as output? Which operating system ? Which GDAL version ? The 
output of "ogrinfo -al -so the_input" might also be helpful. An exact 
ogr2ogr command line invocation that triggers the issue would certainly 
be useful.? In general, most GDAL drivers and ogr2ogr itself operate in 
streaming mode with low RAM requirements, but there might be exceptions 
(some configurations of GeoJSON file may require full ingestion on 
reading for example).? I'm also aware of issues with RAM fragmentation 
due to how some memory allocators work, but they seem to be restricted 
to multithreaded uses 
(https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading), 
which current ogr2ogr shouldn't trigger

Even

>
> Thanks for the responses!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Thu Sep 28 10:17:45 2023
From: public at postholer.com (Scott)
Date: Thu, 28 Sep 2023 10:17:45 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
Message-ID: <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>

USA.fgb is 36 GB. I've renamed it from its original source which can be 
found here:
https://beta.source.coop/vida/google-microsoft-open-buildings

ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints 
footprints.fgb ~/Downloads/USA.fgb

GDAL 3.7.1
OS Debian Buster

Output from ogrinfo -ro -al USA.fgb

Layer name: bfp_USA
Geometry: Unknown (any)
Feature Count: 145459485
Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
Layer SRS WKT:
GEOGCRS["WGS 84",
     DATUM["World Geodetic System 1984",
         ELLIPSOID["WGS 84",6378137,298.257223563,
             LENGTHUNIT["metre",1]]],
     PRIMEM["Greenwich",0,
         ANGLEUNIT["degree",0.0174532925199433]],
     CS[ellipsoidal,2],
         AXIS["geodetic latitude (Lat)",north,
             ORDER[1],
             ANGLEUNIT["degree",0.0174532925199433]],
         AXIS["geodetic longitude (Lon)",east,
             ORDER[2],
             ANGLEUNIT["degree",0.0174532925199433]],
     USAGE[
         SCOPE["unknown"],
         AREA["World"],
         BBOX[-90,-180,90,180]],
     ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
boundary_id: Integer64 (0.0)
bf_source: String (0.0)
confidence: Real (0.0)
area_in_meters: Real (0.0)
OGRFeature(bfp_USA):0
   boundary_id (Integer64) = 116
   bf_source (String) = google
   confidence (Real) = 0.906
   area_in_meters (Real) = 187.4652
   POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957 
17.722583049763,-64.6400238635835 17.7226126625647,-64.6400901719124 
17.7226412545727,-64.640104074415
  17.722611641767,-64.6401239848718 17.7226202271066,-64.6401528522526 
17.7225587385527,-64.6400955687758 17.7225340380511,-64.6401051288881 
17.7225136746756,-64.640040
1136221 17.7224856402151,-64.640030553504 
17.7225060035881,-64.6399910351014 17.7224889633119,-64.6399621676723 
17.7225504518464))

OGRFeature(bfp_USA):1
   boundary_id (Integer64) = 116
   bf_source (String) = microsoft
   area_in_meters (Real) = 51.0777955237376
   POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141 
17.7219853127982,-64.6398020235506 17.7220430591893,-64.6398758258215 
17.7220337304732,-64.63986778118
51 17.7219759840792))

OGRFeature(bfp_USA):2
   boundary_id (Integer64) = 116
   bf_source (String) = google
   confidence (Real) = 0.8323
   area_in_meters (Real) = 178.5448
   POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552 
17.722041016034,-64.6395789582891 17.7220531822569,-64.6395832735872 
17.7221139302758,-64.639696737462
3 17.7221065273415,-64.639698399651 17.7221299263498,-64.6398064310524 
17.7221228777942,-64.6398022655579 17.7220642396531,-64.6397672401299 
17.7220665249078))


On 9/28/23 10:03, Even Rouault wrote:
> 
> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>>
>> I should have been more specific.
>>
>> One particular machine has 8GB of memory. When I try to do the most 
>> simple ogr2ogr command on large files, the host runs out of memory 
>> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.
>>
>> The data formats I have experienced this with are .fgb, .parquet and 
>> .gpkg. The data files are 10's of GB.
> 
> As input ? as output? Which operating system ? Which GDAL version ? The 
> output of "ogrinfo -al -so the_input" might also be helpful. An exact 
> ogr2ogr command line invocation that triggers the issue would certainly 
> be useful.? In general, most GDAL drivers and ogr2ogr itself operate in 
> streaming mode with low RAM requirements, but there might be exceptions 
> (some configurations of GeoJSON file may require full ingestion on 
> reading for example).? I'm also aware of issues with RAM fragmentation 
> due to how some memory allocators work, but they seem to be restricted 
> to multithreaded uses 
> (https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading), which current ogr2ogr shouldn't trigger
> 
> Even
> 
>>
>> Thanks for the responses!
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From public at postholer.com  Thu Sep 28 10:39:35 2023
From: public at postholer.com (Scott)
Date: Thu, 28 Sep 2023 10:39:35 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
Message-ID: <64ebabf8-5406-8f00-48e6-d0af737c2b37@postholer.com>

I get the same error on OS AWS Linux 2.

Also, on either OS with source .parquet instead of .fgb.


On 9/28/23 10:17, Scott via gdal-dev wrote:
> USA.fgb is 36 GB. I've renamed it from its original source which can be 
> found here:
> https://beta.source.coop/vida/google-microsoft-open-buildings
> 
> ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints 
> footprints.fgb ~/Downloads/USA.fgb
> 
> GDAL 3.7.1
> OS Debian Buster
> 
> Output from ogrinfo -ro -al USA.fgb
> 
> Layer name: bfp_USA
> Geometry: Unknown (any)
> Feature Count: 145459485
> Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
> Layer SRS WKT:
> GEOGCRS["WGS 84",
>  ??? DATUM["World Geodetic System 1984",
>  ??????? ELLIPSOID["WGS 84",6378137,298.257223563,
>  ??????????? LENGTHUNIT["metre",1]]],
>  ??? PRIMEM["Greenwich",0,
>  ??????? ANGLEUNIT["degree",0.0174532925199433]],
>  ??? CS[ellipsoidal,2],
>  ??????? AXIS["geodetic latitude (Lat)",north,
>  ??????????? ORDER[1],
>  ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>  ??????? AXIS["geodetic longitude (Lon)",east,
>  ??????????? ORDER[2],
>  ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>  ??? USAGE[
>  ??????? SCOPE["unknown"],
>  ??????? AREA["World"],
>  ??????? BBOX[-90,-180,90,180]],
>  ??? ID["EPSG",4326]]
> Data axis to CRS axis mapping: 2,1
> boundary_id: Integer64 (0.0)
> bf_source: String (0.0)
> confidence: Real (0.0)
> area_in_meters: Real (0.0)
> OGRFeature(bfp_USA):0
>  ? boundary_id (Integer64) = 116
>  ? bf_source (String) = google
>  ? confidence (Real) = 0.906
>  ? area_in_meters (Real) = 187.4652
>  ? POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957 
> 17.722583049763,-64.6400238635835 17.7226126625647,-64.6400901719124 
> 17.7226412545727,-64.640104074415
>  ?17.722611641767,-64.6401239848718 17.7226202271066,-64.6401528522526 
> 17.7225587385527,-64.6400955687758 17.7225340380511,-64.6401051288881 
> 17.7225136746756,-64.640040
> 1136221 17.7224856402151,-64.640030553504 
> 17.7225060035881,-64.6399910351014 17.7224889633119,-64.6399621676723 
> 17.7225504518464))
> 
> OGRFeature(bfp_USA):1
>  ? boundary_id (Integer64) = 116
>  ? bf_source (String) = microsoft
>  ? area_in_meters (Real) = 51.0777955237376
>  ? POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141 
> 17.7219853127982,-64.6398020235506 17.7220430591893,-64.6398758258215 
> 17.7220337304732,-64.63986778118
> 51 17.7219759840792))
> 
> OGRFeature(bfp_USA):2
>  ? boundary_id (Integer64) = 116
>  ? bf_source (String) = google
>  ? confidence (Real) = 0.8323
>  ? area_in_meters (Real) = 178.5448
>  ? POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552 
> 17.722041016034,-64.6395789582891 17.7220531822569,-64.6395832735872 
> 17.7221139302758,-64.639696737462
> 3 17.7221065273415,-64.639698399651 17.7221299263498,-64.6398064310524 
> 17.7221228777942,-64.6398022655579 17.7220642396531,-64.6397672401299 
> 17.7220665249078))
> 
> 
> On 9/28/23 10:03, Even Rouault wrote:
>>
>> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>>>
>>> I should have been more specific.
>>>
>>> One particular machine has 8GB of memory. When I try to do the most 
>>> simple ogr2ogr command on large files, the host runs out of memory 
>>> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.
>>>
>>> The data formats I have experienced this with are .fgb, .parquet and 
>>> .gpkg. The data files are 10's of GB.
>>
>> As input ? as output? Which operating system ? Which GDAL version ? 
>> The output of "ogrinfo -al -so the_input" might also be helpful. An 
>> exact ogr2ogr command line invocation that triggers the issue would 
>> certainly be useful.? In general, most GDAL drivers and ogr2ogr itself 
>> operate in streaming mode with low RAM requirements, but there might 
>> be exceptions (some configurations of GeoJSON file may require full 
>> ingestion on reading for example).? I'm also aware of issues with RAM 
>> fragmentation due to how some memory allocators work, but they seem to 
>> be restricted to multithreaded uses 
>> (https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading), which current ogr2ogr shouldn't trigger
>>
>> Even
>>
>>>
>>> Thanks for the responses!
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Thu Sep 28 11:04:12 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 28 Sep 2023 20:04:12 +0200
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
Message-ID: <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>

ok, that now makes sense. Writing a .fgb files comes into those 
exceptions where RAM consumption might be important, as it involves 
building a packed Hilbert R-Tree in memory. With the current 
implementation, you need at least the number of features times some 
constant amount of RAM, at least to store the list of each feature 
bounding box + their offset in a temporary file. From what I can see 
this constant is at least 40 bytes. So in your particular case this 
requires at least 145459485 * 40 = 5.5 GB of RAM. And probably (not 
totally sure) twice that to store this initial list and the tree itself. 
I guess the implementation could be made smarter and use on-disk 
temporary memory, but that would likely involve serious implementation 
complications. I let Bj?rn comment more on this if he follows this 
discussion.

I've submitted a doc enhancement to mention this requirement: 
https://github.com/OSGeo/gdal/pull/8490

Le 28/09/2023 ? 19:17, Scott a ?crit?:
> USA.fgb is 36 GB. I've renamed it from its original source which can 
> be found here:
> https://beta.source.coop/vida/google-microsoft-open-buildings
>
> ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints 
> footprints.fgb ~/Downloads/USA.fgb
>
> GDAL 3.7.1
> OS Debian Buster
>
> Output from ogrinfo -ro -al USA.fgb
>
> Layer name: bfp_USA
> Geometry: Unknown (any)
> Feature Count: 145459485
> Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
> Layer SRS WKT:
> GEOGCRS["WGS 84",
> ??? DATUM["World Geodetic System 1984",
> ??????? ELLIPSOID["WGS 84",6378137,298.257223563,
> ??????????? LENGTHUNIT["metre",1]]],
> ??? PRIMEM["Greenwich",0,
> ??????? ANGLEUNIT["degree",0.0174532925199433]],
> ??? CS[ellipsoidal,2],
> ??????? AXIS["geodetic latitude (Lat)",north,
> ??????????? ORDER[1],
> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
> ??????? AXIS["geodetic longitude (Lon)",east,
> ??????????? ORDER[2],
> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
> ??? USAGE[
> ??????? SCOPE["unknown"],
> ??????? AREA["World"],
> ??????? BBOX[-90,-180,90,180]],
> ??? ID["EPSG",4326]]
> Data axis to CRS axis mapping: 2,1
> boundary_id: Integer64 (0.0)
> bf_source: String (0.0)
> confidence: Real (0.0)
> area_in_meters: Real (0.0)
> OGRFeature(bfp_USA):0
> ? boundary_id (Integer64) = 116
> ? bf_source (String) = google
> ? confidence (Real) = 0.906
> ? area_in_meters (Real) = 187.4652
> ? POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957 
> 17.722583049763,-64.6400238635835 17.7226126625647,-64.6400901719124 
> 17.7226412545727,-64.640104074415
> ?17.722611641767,-64.6401239848718 17.7226202271066,-64.6401528522526 
> 17.7225587385527,-64.6400955687758 17.7225340380511,-64.6401051288881 
> 17.7225136746756,-64.640040
> 1136221 17.7224856402151,-64.640030553504 
> 17.7225060035881,-64.6399910351014 17.7224889633119,-64.6399621676723 
> 17.7225504518464))
>
> OGRFeature(bfp_USA):1
> ? boundary_id (Integer64) = 116
> ? bf_source (String) = microsoft
> ? area_in_meters (Real) = 51.0777955237376
> ? POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141 
> 17.7219853127982,-64.6398020235506 17.7220430591893,-64.6398758258215 
> 17.7220337304732,-64.63986778118
> 51 17.7219759840792))
>
> OGRFeature(bfp_USA):2
> ? boundary_id (Integer64) = 116
> ? bf_source (String) = google
> ? confidence (Real) = 0.8323
> ? area_in_meters (Real) = 178.5448
> ? POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552 
> 17.722041016034,-64.6395789582891 17.7220531822569,-64.6395832735872 
> 17.7221139302758,-64.639696737462
> 3 17.7221065273415,-64.639698399651 17.7221299263498,-64.6398064310524 
> 17.7221228777942,-64.6398022655579 17.7220642396531,-64.6397672401299 
> 17.7220665249078))
>
>
> On 9/28/23 10:03, Even Rouault wrote:
>>
>> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>>>
>>> I should have been more specific.
>>>
>>> One particular machine has 8GB of memory. When I try to do the most 
>>> simple ogr2ogr command on large files, the host runs out of memory 
>>> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.
>>>
>>> The data formats I have experienced this with are .fgb, .parquet and 
>>> .gpkg. The data files are 10's of GB.
>>
>> As input ? as output? Which operating system ? Which GDAL version ? 
>> The output of "ogrinfo -al -so the_input" might also be helpful. An 
>> exact ogr2ogr command line invocation that triggers the issue would 
>> certainly be useful.? In general, most GDAL drivers and ogr2ogr 
>> itself operate in streaming mode with low RAM requirements, but there 
>> might be exceptions (some configurations of GeoJSON file may require 
>> full ingestion on reading for example).? I'm also aware of issues 
>> with RAM fragmentation due to how some memory allocators work, but 
>> they seem to be restricted to multithreaded uses 
>> (https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading), 
>> which current ogr2ogr shouldn't trigger
>>
>> Even
>>
>>>
>>> Thanks for the responses!
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Thu Sep 28 11:17:40 2023
From: public at postholer.com (Scott)
Date: Thu, 28 Sep 2023 11:17:40 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
 <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>
Message-ID: <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>

Thanks for digging into that Even!

Can I create my new .fgb in sections?

If I limit the number of source rows with -sql, doing that multiple 
times with -update, will it still build the entire R-tree when writing 
to the destination?

I'm looking for a way to get the desired results.

On 9/28/23 11:04, Even Rouault wrote:
> ok, that now makes sense. Writing a .fgb files comes into those 
> exceptions where RAM consumption might be important, as it involves 
> building a packed Hilbert R-Tree in memory. With the current 
> implementation, you need at least the number of features times some 
> constant amount of RAM, at least to store the list of each feature 
> bounding box + their offset in a temporary file. From what I can see 
> this constant is at least 40 bytes. So in your particular case this 
> requires at least 145459485 * 40 = 5.5 GB of RAM. And probably (not 
> totally sure) twice that to store this initial list and the tree itself. 
> I guess the implementation could be made smarter and use on-disk 
> temporary memory, but that would likely involve serious implementation 
> complications. I let Bj?rn comment more on this if he follows this 
> discussion.
> 
> I've submitted a doc enhancement to mention this requirement: 
> https://github.com/OSGeo/gdal/pull/8490
> 
> Le 28/09/2023 ? 19:17, Scott a ?crit?:
>> USA.fgb is 36 GB. I've renamed it from its original source which can 
>> be found here:
>> https://beta.source.coop/vida/google-microsoft-open-buildings
>>
>> ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints 
>> footprints.fgb ~/Downloads/USA.fgb
>>
>> GDAL 3.7.1
>> OS Debian Buster
>>
>> Output from ogrinfo -ro -al USA.fgb
>>
>> Layer name: bfp_USA
>> Geometry: Unknown (any)
>> Feature Count: 145459485
>> Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
>> Layer SRS WKT:
>> GEOGCRS["WGS 84",
>> ??? DATUM["World Geodetic System 1984",
>> ??????? ELLIPSOID["WGS 84",6378137,298.257223563,
>> ??????????? LENGTHUNIT["metre",1]]],
>> ??? PRIMEM["Greenwich",0,
>> ??????? ANGLEUNIT["degree",0.0174532925199433]],
>> ??? CS[ellipsoidal,2],
>> ??????? AXIS["geodetic latitude (Lat)",north,
>> ??????????? ORDER[1],
>> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>> ??????? AXIS["geodetic longitude (Lon)",east,
>> ??????????? ORDER[2],
>> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>> ??? USAGE[
>> ??????? SCOPE["unknown"],
>> ??????? AREA["World"],
>> ??????? BBOX[-90,-180,90,180]],
>> ??? ID["EPSG",4326]]
>> Data axis to CRS axis mapping: 2,1
>> boundary_id: Integer64 (0.0)
>> bf_source: String (0.0)
>> confidence: Real (0.0)
>> area_in_meters: Real (0.0)
>> OGRFeature(bfp_USA):0
>> ? boundary_id (Integer64) = 116
>> ? bf_source (String) = google
>> ? confidence (Real) = 0.906
>> ? area_in_meters (Real) = 187.4652
>> ? POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957 
>> 17.722583049763,-64.6400238635835 17.7226126625647,-64.6400901719124 
>> 17.7226412545727,-64.640104074415
>> ?17.722611641767,-64.6401239848718 17.7226202271066,-64.6401528522526 
>> 17.7225587385527,-64.6400955687758 17.7225340380511,-64.6401051288881 
>> 17.7225136746756,-64.640040
>> 1136221 17.7224856402151,-64.640030553504 
>> 17.7225060035881,-64.6399910351014 17.7224889633119,-64.6399621676723 
>> 17.7225504518464))
>>
>> OGRFeature(bfp_USA):1
>> ? boundary_id (Integer64) = 116
>> ? bf_source (String) = microsoft
>> ? area_in_meters (Real) = 51.0777955237376
>> ? POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141 
>> 17.7219853127982,-64.6398020235506 17.7220430591893,-64.6398758258215 
>> 17.7220337304732,-64.63986778118
>> 51 17.7219759840792))
>>
>> OGRFeature(bfp_USA):2
>> ? boundary_id (Integer64) = 116
>> ? bf_source (String) = google
>> ? confidence (Real) = 0.8323
>> ? area_in_meters (Real) = 178.5448
>> ? POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552 
>> 17.722041016034,-64.6395789582891 17.7220531822569,-64.6395832735872 
>> 17.7221139302758,-64.639696737462
>> 3 17.7221065273415,-64.639698399651 17.7221299263498,-64.6398064310524 
>> 17.7221228777942,-64.6398022655579 17.7220642396531,-64.6397672401299 
>> 17.7220665249078))
>>
>>
>> On 9/28/23 10:03, Even Rouault wrote:
>>>
>>> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>>>>
>>>> I should have been more specific.
>>>>
>>>> One particular machine has 8GB of memory. When I try to do the most 
>>>> simple ogr2ogr command on large files, the host runs out of memory 
>>>> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing more.
>>>>
>>>> The data formats I have experienced this with are .fgb, .parquet and 
>>>> .gpkg. The data files are 10's of GB.
>>>
>>> As input ? as output? Which operating system ? Which GDAL version ? 
>>> The output of "ogrinfo -al -so the_input" might also be helpful. An 
>>> exact ogr2ogr command line invocation that triggers the issue would 
>>> certainly be useful.? In general, most GDAL drivers and ogr2ogr 
>>> itself operate in streaming mode with low RAM requirements, but there 
>>> might be exceptions (some configurations of GeoJSON file may require 
>>> full ingestion on reading for example).? I'm also aware of issues 
>>> with RAM fragmentation due to how some memory allocators work, but 
>>> they seem to be restricted to multithreaded uses 
>>> (https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading), which current ogr2ogr shouldn't trigger
>>>
>>> Even
>>>
>>>>
>>>> Thanks for the responses!
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>

From rupestre.campos at gmail.com  Thu Sep 28 11:36:35 2023
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Thu, 28 Sep 2023 15:36:35 -0300
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
 <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>
 <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>
Message-ID: <CAAvXUUoBQ3A3Z3unjYqjM5OoNac-bpv5AMc2ZkhzzUaq-7Ee_w@mail.gmail.com>

I believe that you could try to increase your swap RAM,
for linux it is pretty straightforward, and having a SSD or NVME it will
perform good.
Free disk space is a must have to this to work,
as you are going to need about 10 - 20 Gb disk space as swap, according to
Even calcs + 8Gb that you have.
Not as fast as true RAM, but may be able to get the job done,

On Thu, Sep 28, 2023 at 3:18?PM Scott via gdal-dev <gdal-dev at lists.osgeo.org>
wrote:

> Thanks for digging into that Even!
>
> Can I create my new .fgb in sections?
>
> If I limit the number of source rows with -sql, doing that multiple
> times with -update, will it still build the entire R-tree when writing
> to the destination?
>
> I'm looking for a way to get the desired results.
>
> On 9/28/23 11:04, Even Rouault wrote:
> > ok, that now makes sense. Writing a .fgb files comes into those
> > exceptions where RAM consumption might be important, as it involves
> > building a packed Hilbert R-Tree in memory. With the current
> > implementation, you need at least the number of features times some
> > constant amount of RAM, at least to store the list of each feature
> > bounding box + their offset in a temporary file. From what I can see
> > this constant is at least 40 bytes. So in your particular case this
> > requires at least 145459485 * 40 = 5.5 GB of RAM. And probably (not
> > totally sure) twice that to store this initial list and the tree itself.
> > I guess the implementation could be made smarter and use on-disk
> > temporary memory, but that would likely involve serious implementation
> > complications. I let Bj?rn comment more on this if he follows this
> > discussion.
> >
> > I've submitted a doc enhancement to mention this requirement:
> > https://github.com/OSGeo/gdal/pull/8490
> >
> > Le 28/09/2023 ? 19:17, Scott a ?crit :
> >> USA.fgb is 36 GB. I've renamed it from its original source which can
> >> be found here:
> >> https://beta.source.coop/vida/google-microsoft-open-buildings
> >>
> >> ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints
> >> footprints.fgb ~/Downloads/USA.fgb
> >>
> >> GDAL 3.7.1
> >> OS Debian Buster
> >>
> >> Output from ogrinfo -ro -al USA.fgb
> >>
> >> Layer name: bfp_USA
> >> Geometry: Unknown (any)
> >> Feature Count: 145459485
> >> Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
> >> Layer SRS WKT:
> >> GEOGCRS["WGS 84",
> >>     DATUM["World Geodetic System 1984",
> >>         ELLIPSOID["WGS 84",6378137,298.257223563,
> >>             LENGTHUNIT["metre",1]]],
> >>     PRIMEM["Greenwich",0,
> >>         ANGLEUNIT["degree",0.0174532925199433]],
> >>     CS[ellipsoidal,2],
> >>         AXIS["geodetic latitude (Lat)",north,
> >>             ORDER[1],
> >>             ANGLEUNIT["degree",0.0174532925199433]],
> >>         AXIS["geodetic longitude (Lon)",east,
> >>             ORDER[2],
> >>             ANGLEUNIT["degree",0.0174532925199433]],
> >>     USAGE[
> >>         SCOPE["unknown"],
> >>         AREA["World"],
> >>         BBOX[-90,-180,90,180]],
> >>     ID["EPSG",4326]]
> >> Data axis to CRS axis mapping: 2,1
> >> boundary_id: Integer64 (0.0)
> >> bf_source: String (0.0)
> >> confidence: Real (0.0)
> >> area_in_meters: Real (0.0)
> >> OGRFeature(bfp_USA):0
> >>   boundary_id (Integer64) = 116
> >>   bf_source (String) = google
> >>   confidence (Real) = 0.906
> >>   area_in_meters (Real) = 187.4652
> >>   POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957
> >> 17.722583049763,-64.6400238635835 17.7226126625647,-64.6400901719124
> >> 17.7226412545727,-64.640104074415
> >>  17.722611641767,-64.6401239848718 17.7226202271066,-64.6401528522526
> >> 17.7225587385527,-64.6400955687758 17.7225340380511,-64.6401051288881
> >> 17.7225136746756,-64.640040
> >> 1136221 17.7224856402151,-64.640030553504
> >> 17.7225060035881,-64.6399910351014 17.7224889633119,-64.6399621676723
> >> 17.7225504518464))
> >>
> >> OGRFeature(bfp_USA):1
> >>   boundary_id (Integer64) = 116
> >>   bf_source (String) = microsoft
> >>   area_in_meters (Real) = 51.0777955237376
> >>   POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141
> >> 17.7219853127982,-64.6398020235506 17.7220430591893,-64.6398758258215
> >> 17.7220337304732,-64.63986778118
> >> 51 17.7219759840792))
> >>
> >> OGRFeature(bfp_USA):2
> >>   boundary_id (Integer64) = 116
> >>   bf_source (String) = google
> >>   confidence (Real) = 0.8323
> >>   area_in_meters (Real) = 178.5448
> >>   POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552
> >> 17.722041016034,-64.6395789582891 17.7220531822569,-64.6395832735872
> >> 17.7221139302758,-64.639696737462
> >> 3 17.7221065273415,-64.639698399651 17.7221299263498,-64.6398064310524
> >> 17.7221228777942,-64.6398022655579 17.7220642396531,-64.6397672401299
> >> 17.7220665249078))
> >>
> >>
> >> On 9/28/23 10:03, Even Rouault wrote:
> >>>
> >>> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit :
> >>>>
> >>>> I should have been more specific.
> >>>>
> >>>> One particular machine has 8GB of memory. When I try to do the most
> >>>> simple ogr2ogr command on large files, the host runs out of memory
> >>>> (vmstat shows this) and ogr2ogr terminates with 'Killed', nothing
> more.
> >>>>
> >>>> The data formats I have experienced this with are .fgb, .parquet and
> >>>> .gpkg. The data files are 10's of GB.
> >>>
> >>> As input ? as output? Which operating system ? Which GDAL version ?
> >>> The output of "ogrinfo -al -so the_input" might also be helpful. An
> >>> exact ogr2ogr command line invocation that triggers the issue would
> >>> certainly be useful.  In general, most GDAL drivers and ogr2ogr
> >>> itself operate in streaming mode with low RAM requirements, but there
> >>> might be exceptions (some configurations of GeoJSON file may require
> >>> full ingestion on reading for example).  I'm also aware of issues
> >>> with RAM fragmentation due to how some memory allocators work, but
> >>> they seem to be restricted to multithreaded uses
> >>> (
> https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading),
> which current ogr2ogr shouldn't trigger
> >>>
> >>> Even
> >>>
> >>>>
> >>>> Thanks for the responses!
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev at lists.osgeo.org
> >>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/55602902/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 28 11:37:55 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 28 Sep 2023 20:37:55 +0200
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
 <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>
 <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>
Message-ID: <de65af81-822a-7530-42c8-74e118acacb3@spatialys.com>


Le 28/09/2023 ? 20:17, Scott a ?crit?:
> Thanks for digging into that Even!
>
> Can I create my new .fgb in sections?
>
> If I limit the number of source rows with -sql, doing that multiple 
> times with -update, will it still build the entire R-tree when writing 
> to the destination?
That would actually be a bad idea. Appending in FlatGeobuf is not a 
native capability. It is emulated by storing into RAM the new features, 
and then writing at dataset closing the full .fgb file from the original 
one + the new features. You would actually need a lot more RAM than 
doing a single ogr2ogr run.
>
> I'm looking for a way to get the desired results.

Rent a bigger VM instance... or contribute a RAM-friendly implementation 
of the RTree building :-)

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Thu Sep 28 11:46:38 2023
From: public at postholer.com (Scott)
Date: Thu, 28 Sep 2023 11:46:38 -0700
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <CAAvXUUoBQ3A3Z3unjYqjM5OoNac-bpv5AMc2ZkhzzUaq-7Ee_w@mail.gmail.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
 <AM0PR09MB321904D94D6B1BD11C96D7E7FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5a8008b3-b63b-7cff-d945-4808d95a1abc@postholer.com>
 <44aef38d-5306-f217-505f-2e63edaf222a@spatialys.com>
 <1095fa4b-c379-4298-f326-d7303c42306c@postholer.com>
 <312fbace-96cc-3421-77c6-f1ef1c272787@spatialys.com>
 <f7bbd4cd-c324-1441-70bf-1e914db96ade@postholer.com>
 <CAAvXUUoBQ3A3Z3unjYqjM5OoNac-bpv5AMc2ZkhzzUaq-7Ee_w@mail.gmail.com>
Message-ID: <acee5c73-dce9-6b34-6bc9-8d46f4f42253@postholer.com>

Increasing swap was my last resort as I'd prefer not to do this across 
different systems. However, that's exactly what I'll do!

Thanks for the help people!

On 9/28/23 11:36, Cain? K. Campos via gdal-dev wrote:
> I believe that you could try to increase your swap RAM,
> for linux it is pretty straightforward, and having a SSD or NVME it will 
> perform good.
> Free disk space is a must have to this to work,
> as you are going to need about 10 - 20 Gb disk space as swap, according 
> to Even calcs + 8Gb that you have.
> Not as fast as true RAM, but may be able to get the job done,
> 
> On Thu, Sep 28, 2023 at 3:18?PM Scott via gdal-dev 
> <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:
> 
>     Thanks for digging into that Even!
> 
>     Can I create my new .fgb in sections?
> 
>     If I limit the number of source rows with -sql, doing that multiple
>     times with -update, will it still build the entire R-tree when writing
>     to the destination?
> 
>     I'm looking for a way to get the desired results.
> 
>     On 9/28/23 11:04, Even Rouault wrote:
>      > ok, that now makes sense. Writing a .fgb files comes into those
>      > exceptions where RAM consumption might be important, as it involves
>      > building a packed Hilbert R-Tree in memory. With the current
>      > implementation, you need at least the number of features times some
>      > constant amount of RAM, at least to store the list of each feature
>      > bounding box + their offset in a temporary file. From what I can see
>      > this constant is at least 40 bytes. So in your particular case this
>      > requires at least 145459485 * 40 = 5.5 GB of RAM. And probably (not
>      > totally sure) twice that to store this initial list and the tree
>     itself.
>      > I guess the implementation could be made smarter and use on-disk
>      > temporary memory, but that would likely involve serious
>     implementation
>      > complications. I let Bj?rn comment more on this if he follows this
>      > discussion.
>      >
>      > I've submitted a doc enhancement to mention this requirement:
>      > https://github.com/OSGeo/gdal/pull/8490
>     <https://github.com/OSGeo/gdal/pull/8490>
>      >
>      > Le 28/09/2023 ? 19:17, Scott a ?crit?:
>      >> USA.fgb is 36 GB. I've renamed it from its original source which
>     can
>      >> be found here:
>      >> https://beta.source.coop/vida/google-microsoft-open-buildings
>     <https://beta.source.coop/vida/google-microsoft-open-buildings>
>      >>
>      >> ogr2ogr -sql "select area_in_meters from bfp_USA" -nln footprints
>      >> footprints.fgb ~/Downloads/USA.fgb
>      >>
>      >> GDAL 3.7.1
>      >> OS Debian Buster
>      >>
>      >> Output from ogrinfo -ro -al USA.fgb
>      >>
>      >> Layer name: bfp_USA
>      >> Geometry: Unknown (any)
>      >> Feature Count: 145459485
>      >> Extent: (-160.221701, 17.677691) - (-64.583428, 71.360579)
>      >> Layer SRS WKT:
>      >> GEOGCRS["WGS 84",
>      >> ??? DATUM["World Geodetic System 1984",
>      >> ??????? ELLIPSOID["WGS 84",6378137,298.257223563,
>      >> ??????????? LENGTHUNIT["metre",1]]],
>      >> ??? PRIMEM["Greenwich",0,
>      >> ??????? ANGLEUNIT["degree",0.0174532925199433]],
>      >> ??? CS[ellipsoidal,2],
>      >> ??????? AXIS["geodetic latitude (Lat)",north,
>      >> ??????????? ORDER[1],
>      >> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>      >> ??????? AXIS["geodetic longitude (Lon)",east,
>      >> ??????????? ORDER[2],
>      >> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
>      >> ??? USAGE[
>      >> ??????? SCOPE["unknown"],
>      >> ??????? AREA["World"],
>      >> ??????? BBOX[-90,-180,90,180]],
>      >> ??? ID["EPSG",4326]]
>      >> Data axis to CRS axis mapping: 2,1
>      >> boundary_id: Integer64 (0.0)
>      >> bf_source: String (0.0)
>      >> confidence: Real (0.0)
>      >> area_in_meters: Real (0.0)
>      >> OGRFeature(bfp_USA):0
>      >> ? boundary_id (Integer64) = 116
>      >> ? bf_source (String) = google
>      >> ? confidence (Real) = 0.906
>      >> ? area_in_meters (Real) = 187.4652
>      >> ? POLYGON ((-64.6399621676723 17.7225504518464,-64.6400377660957
>      >> 17.722583049763,-64.6400238635835
>     17.7226126625647,-64.6400901719124
>      >> 17.7226412545727,-64.640104074415
>      >> ?17.722611641767,-64.6401239848718
>     17.7226202271066,-64.6401528522526
>      >> 17.7225587385527,-64.6400955687758
>     17.7225340380511,-64.6401051288881
>      >> 17.7225136746756,-64.640040
>      >> 1136221 17.7224856402151,-64.640030553504
>      >> 17.7225060035881,-64.6399910351014
>     17.7224889633119,-64.6399621676723
>      >> 17.7225504518464))
>      >>
>      >> OGRFeature(bfp_USA):1
>      >> ? boundary_id (Integer64) = 116
>      >> ? bf_source (String) = microsoft
>      >> ? area_in_meters (Real) = 51.0777955237376
>      >> ? POLYGON ((-64.6398677811851 17.7219759840792,-64.6397939789141
>      >> 17.7219853127982,-64.6398020235506
>     17.7220430591893,-64.6398758258215
>      >> 17.7220337304732,-64.63986778118
>      >> 51 17.7219759840792))
>      >>
>      >> OGRFeature(bfp_USA):2
>      >> ? boundary_id (Integer64) = 116
>      >> ? bf_source (String) = google
>      >> ? confidence (Real) = 0.8323
>      >> ? area_in_meters (Real) = 178.5448
>      >> ? POLYGON ((-64.6397672401299 17.7220665249078,-64.6397654280552
>      >> 17.722041016034,-64.6395789582891
>     17.7220531822569,-64.6395832735872
>      >> 17.7221139302758,-64.639696737462
>      >> 3 17.7221065273415,-64.639698399651
>     17.7221299263498,-64.6398064310524
>      >> 17.7221228777942,-64.6398022655579
>     17.7220642396531,-64.6397672401299
>      >> 17.7220665249078))
>      >>
>      >>
>      >> On 9/28/23 10:03, Even Rouault wrote:
>      >>>
>      >>> Le 28/09/2023 ? 18:47, Scott via gdal-dev a ?crit?:
>      >>>>
>      >>>> I should have been more specific.
>      >>>>
>      >>>> One particular machine has 8GB of memory. When I try to do the
>     most
>      >>>> simple ogr2ogr command on large files, the host runs out of
>     memory
>      >>>> (vmstat shows this) and ogr2ogr terminates with 'Killed',
>     nothing more.
>      >>>>
>      >>>> The data formats I have experienced this with are .fgb,
>     .parquet and
>      >>>> .gpkg. The data files are 10's of GB.
>      >>>
>      >>> As input ? as output? Which operating system ? Which GDAL
>     version ?
>      >>> The output of "ogrinfo -al -so the_input" might also be
>     helpful. An
>      >>> exact ogr2ogr command line invocation that triggers the issue
>     would
>      >>> certainly be useful.? In general, most GDAL drivers and ogr2ogr
>      >>> itself operate in streaming mode with low RAM requirements, but
>     there
>      >>> might be exceptions (some configurations of GeoJSON file may
>     require
>      >>> full ingestion on reading for example).? I'm also aware of issues
>      >>> with RAM fragmentation due to how some memory allocators work, but
>      >>> they seem to be restricted to multithreaded uses
>      >>>
>     (https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading <https://gdal.org/user/multithreading.html#ram-fragmentation-and-multi-threading>), which current ogr2ogr shouldn't trigger
>      >>>
>      >>> Even
>      >>>
>      >>>>
>      >>>> Thanks for the responses!
>      >>>> _______________________________________________
>      >>>> gdal-dev mailing list
>      >>>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>      >>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>      >>>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From Louis-Philippe.RousseauLambert at ec.gc.ca  Thu Sep 28 12:31:20 2023
From: Louis-Philippe.RousseauLambert at ec.gc.ca (Rousseau Lambert,Louis-Philippe (ECCC))
Date: Thu, 28 Sep 2023 19:31:20 +0000
Subject: [gdal-dev] GRIB2 file extent not matchi GRIB2 metadata (grib_dump)
Message-ID: <YT4PR01MB10407EEDA6B7BDB0729BC96DEFCC1A@YT4PR01MB10407.CANPRD01.PROD.OUTLOOK.COM>

Hi,

I am facing an issue with GRIB2 data, and the extent reported by a gdal_info command. Here is a sample data to test: https://drive.google.com/file/d/1URvQs2qHXgRkq3YfC7ZR8VGYK3SKXB59/view?usp=drive_link

Here is what I am testing with:

  *   Ubuntu 20.04.6 LTS
  *   GDAL 3.5.2, released 2022/09/02
  *   PROJ Rel. 8.2.0, November 1st, 2021

So, using grib_dump, I see the longitude of the file should be from 0 to 360 degress:

grib_dump out.grib2 | grep shapeOfTheEarth -A 12
  shapeOfTheEarth = 6;
  Ni = 2400;
  Nj = 1201;
  iScansNegatively = 0;
  jScansPositively = 1;
  jPointsAreConsecutive = 0;
  alternativeRowScanning = 0;
  latitudeOfFirstGridPointInDegrees = -90;
  longitudeOfFirstGridPointInDegrees = 0;
  latitudeOfLastGridPointInDegrees = 90;
  longitudeOfLastGridPointInDegrees = 360;
  iDirectionIncrementInDegrees = 0.15;
  jDirectionIncrementInDegrees = 0.15;

But using gdal_info I see the extent as:

gdal_info -proj4 out.grib2 | grep PROJ -A 9
PROJ.4 string is:
'+proj=longlat +R=6371229 +no_defs'
Origin = (-0.075031263026261,90.075000000000003)
Pixel Size = (0.150062526052522,-0.150000000000000)
Corner Coordinates:
Upper Left  (  -0.0750313,  90.0750000) (  0d 4'30.11"W, 90d 4'30.00"N)
Lower Left  (  -0.0750313, -90.0750000) (  0d 4'30.11"W, 90d 4'30.00"S)
Upper Right (     360.075,      90.075) (360d 4'30.11"E, 90d 4'30.00"N)
Lower Right (     360.075,     -90.075) (360d 4'30.11"E, 90d 4'30.00"S)
Center      ( 180.0000000,   0.0000000) (180d 0' 0.00"E,  0d 0' 0.01"N)

I would expect the gdal_info extent to be also from 0 to 360 degrees (2400 pixels * 0.15 = 360). From reading various source, I see the issue is potentially that the GRIB2 files define the extent using the center of the pixel while gdal assumes it is the top left corner.

My question: Is there a way to change this behavior in gdal, or this expected, or a bug ?

Thanks

LP
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/9ce83826/attachment.htm>

From even.rouault at spatialys.com  Thu Sep 28 12:51:50 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 28 Sep 2023 21:51:50 +0200
Subject: [gdal-dev] GRIB2 file extent not matchi GRIB2 metadata
 (grib_dump)
In-Reply-To: <YT4PR01MB10407EEDA6B7BDB0729BC96DEFCC1A@YT4PR01MB10407.CANPRD01.PROD.OUTLOOK.COM>
References: <YT4PR01MB10407EEDA6B7BDB0729BC96DEFCC1A@YT4PR01MB10407.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <4373afb6-e997-79dd-af5a-e6b71d82e23a@spatialys.com>

Hi Louis-Philippe,

yes this is a matter of conventions. GRIB indeed uses a center-of-pixel 
registration whereas GDAL uses a top-left corner of pixel ones. So GDAL 
adds a half-pixel shift to expose GRIB georeferencing using its 
convention, which is a feature. What is annoying is that it leads to 
latitudes > 90 for such datasets, but there isn't much that can be done 
in the driver itself.

Except doing post-processing to subset the file to crop the top and 
bottom line (gdal_translate -srcwin 0 1 2400 1199), which will result in 
longitudes in [-90 + 0.15, 90 - 0.15]. ? That said that file is a bit 
inconsistent. It is quite expected that it uses an odd number of rows 
(1201) to encode a clean (90 - -90) / (1201 - 1) = 0.15 vertical 
resolution. But for the horizontal dimension, it uses an even number of 
columns (2400), which leads to a compute resolution of (360 - 0) / (2400 
- 1) = 0.15006252605252188 resolution.

Or if you're OK to deal with a slight alteration in the georeferencing 
(maximum relative error should be 0.5 / 1200 = 0.04 % at the equator), 
gdal_translate -a_ullr 0 90 360 -90

Another approach would be to crop using non-integer coordinates (to 
remove the top and bottom half-rows) + apply a non-nearest resampling like

gdal_translate -srcwin 0 0.5 2400 1200 -r cubic in.grib2 out.tif

You should get an extent of latitudes in [-90,90].

Even

Le 28/09/2023 ? 21:31, Rousseau Lambert, Louis-Philippe (ECCC) via 
gdal-dev a ?crit?:
>
> Hi,
>
> I am facing an issue with GRIB2 data, and the extent reported by a 
> gdal_info command. Here is a sample data to test: 
> https://drive.google.com/file/d/1URvQs2qHXgRkq3YfC7ZR8VGYK3SKXB59/view?usp=drive_link
>
> Here is what I am testing with:
>
>   * Ubuntu 20.04.6 LTS
>   * GDAL 3.5.2, released 2022/09/02
>   * PROJ Rel. 8.2.0, November 1st, 2021
>
> So, using grib_dump, I see the longitude of the file should be from 0 
> to 360 degress:
>
> /grib_dump out.grib2 | grep shapeOfTheEarth -A 12/
>
> /? shapeOfTheEarth = 6;/
>
> /? Ni = 2400;/
>
> /? Nj = 1201;/
>
> /? iScansNegatively = 0;/
>
> /? jScansPositively = 1;/
>
> /? jPointsAreConsecutive = 0;/
>
> /? alternativeRowScanning = 0;/
>
> /? latitudeOfFirstGridPointInDegrees = -90;/
>
> /*longitudeOfFirstGridPointInDegrees = 0;*/
>
> /? latitudeOfLastGridPointInDegrees = 90;/
>
> /*longitudeOfLastGridPointInDegrees = 360;*/
>
> /? iDirectionIncrementInDegrees = 0.15;/
>
> /? jDirectionIncrementInDegrees = 0.15;/
>
> But using gdal_info I see the extent as:
>
> /gdal_info -proj4 out.grib2 | grep PROJ -A 9 /
>
> /PROJ.4 string is:/
>
> /'+proj=longlat +R=6371229 +no_defs'/
>
> /Origin = (-0.075031263026261,90.075000000000003)/
>
> /Pixel Size = (0.150062526052522,-0.150000000000000)/
>
> /Corner Coordinates:/
>
> /Upper Left? (? -0.0750313,? 90.0750000) (? 0d 4'30.11"W, 90d 4'30.00"N)/
>
> /Lower Left? (? -0.0750313, -90.0750000) (? 0d 4'30.11"W, 90d 4'30.00"S)/
>
> /Upper Right (???? 360.075,????? 90.075) (360d 4'30.11"E, 90d 4'30.00"N)/
>
> /Lower Right (???? 360.075,???? -90.075) (360d 4'30.11"E, 90d 4'30.00"S)/
>
> /Center????? ( 180.0000000,?? 0.0000000) (180d 0' 0.00"E,? 0d 0' 0.01"N)/
>
> I would expect the gdal_info extent to be also from 0 to 360 degrees 
> (2400 pixels * 0.15 = 360). From reading various source, I see the 
> issue is potentially that the GRIB2 files define the extent using the 
> center of the pixel while gdal assumes it is the top left corner.
>
> My question: Is there a way to change this behavior in gdal, or this 
> expected, or a bug ?
>
> Thanks
>
> LP
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230928/577eb22a/attachment-0001.htm>

From adamgutonski at protonmail.com  Thu Sep 28 19:31:55 2023
From: adamgutonski at protonmail.com (adamgutonski)
Date: Fri, 29 Sep 2023 02:31:55 +0000
Subject: [gdal-dev] Spatial references and geometry operations
Message-ID: <J-jds-Uk9p-WeJMyzcTRJ7QImWGnwI4p_ToE-SCXjLDM8nGWaAKtdtCt4lGDocZ-qRq7ZCVFO8T5TMfP53SE0bD2HF4FkkJL1oAP2qOmIHM=@protonmail.com>

Hello,

I am using geometry object functions like Buffer and Value. I am wondering if and when it is necessary to assign a spatial reference to an ogr.Geometry before calling these functions? For example if I want to get a point along the line using Value is the output affected by whether or not the ogr line geometry has an assigned spatial reference? Is there a way to tell what geometry functions are affected by this or not?

Thanks,
Adam Gutonski

Sent with [Proton Mail](https://proton.me/) secure email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230929/cf80d6a5/attachment.htm>

From runette at gmail.com  Fri Sep 29 01:20:31 2023
From: runette at gmail.com (Paul Harwood)
Date: Fri, 29 Sep 2023 09:20:31 +0100
Subject: [gdal-dev] Spatial references and geometry operations
In-Reply-To: <J-jds-Uk9p-WeJMyzcTRJ7QImWGnwI4p_ToE-SCXjLDM8nGWaAKtdtCt4lGDocZ-qRq7ZCVFO8T5TMfP53SE0bD2HF4FkkJL1oAP2qOmIHM=@protonmail.com>
References: <J-jds-Uk9p-WeJMyzcTRJ7QImWGnwI4p_ToE-SCXjLDM8nGWaAKtdtCt4lGDocZ-qRq7ZCVFO8T5TMfP53SE0bD2HF4FkkJL1oAP2qOmIHM=@protonmail.com>
Message-ID: <CAE8nN5OqO=2ZoH5fnH2i=VLKNmn3ojy9vQZjxEVQCwaJvd7rOQ@mail.gmail.com>

As a very general response, you probably need to differentiate between two
possible questions that you are asking, either:

1 Does the operation fail with an error, or
2 Is the result correct or meaningful?

I don't know about 1). My guess and experience is that, in most cases, it
won't fail.

However, I would make the case that most operations are undefined if the
system is making (possibly) unknown assumptions about the CRS. If you are
asking for the point at a distance along a line or a buffer then you are
implicitly or explicitly giving the system an input distance, so you are
making assumptions about the CRS of your input. If your assumptions do not
match the system's assumptions for the CRS, then the result will be wrong.
I would say that it is always better to make the definition of the CRS
explicit and then the result is defined.



On Fri, 29 Sept 2023 at 03:32, adamgutonski via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hello,
>
> I am using geometry object functions like Buffer and Value.  I am
> wondering if and when it is necessary to assign a spatial reference to an
> ogr.Geometry before calling these functions?  For example if I want to get
> a point along the line using Value is the output affected by whether or not
> the ogr line geometry has an assigned spatial reference?  Is there a way to
> tell what geometry functions are affected by this or not?
>
> Thanks,
> Adam Gutonski
>
> Sent with Proton Mail <https://proton.me/> secure email.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230929/ac7e374e/attachment.htm>

From mdsumner at gmail.com  Fri Sep 29 04:58:16 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 29 Sep 2023 21:58:16 +1000
Subject: [gdal-dev] Using ogr2ogr with limited memory
In-Reply-To: <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
References: <CAK4m-3zUiVAsLSMnxurX4ubCVqp0EXWTZA_OVJ1uPvheLVG+nw@mail.gmail.com>
 <trinity-96a669d8-fc30-49a5-98a7-bd0cfdce8782-1695712065147@msvc-mesg-gmx003>
 <bfe6d6a7-0b49-645a-2a05-a624137e55e1@postholer.com>
Message-ID: <CAAcGz98fsF566YRDGVQT7seKsBU-pke58hSczUpmKi2nLn-Erg@mail.gmail.com>

what's the task? what about batching the geometry and or fields? can you
run on just the first feature, does that work?

how many features, how big is the task?

On Wed, 27 Sept 2023, 13:16 Scott via gdal-dev, <gdal-dev at lists.osgeo.org>
wrote:

> Any tips for using ogr2ogr to use only a specified amount of RAM? I'm
> not having any luck.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230929/fd1f5822/attachment.htm>

From adamgutonski at protonmail.com  Fri Sep 29 05:17:37 2023
From: adamgutonski at protonmail.com (adamgutonski)
Date: Fri, 29 Sep 2023 12:17:37 +0000
Subject: [gdal-dev] Spatial references and geometry operations
In-Reply-To: <CAE8nN5OqO=2ZoH5fnH2i=VLKNmn3ojy9vQZjxEVQCwaJvd7rOQ@mail.gmail.com>
References: <J-jds-Uk9p-WeJMyzcTRJ7QImWGnwI4p_ToE-SCXjLDM8nGWaAKtdtCt4lGDocZ-qRq7ZCVFO8T5TMfP53SE0bD2HF4FkkJL1oAP2qOmIHM=@protonmail.com>
 <CAE8nN5OqO=2ZoH5fnH2i=VLKNmn3ojy9vQZjxEVQCwaJvd7rOQ@mail.gmail.com>
Message-ID: <F2D3_HZRo69JU4Y6Pj2NT-Dxs0actYMa9Dt8_xDOjOXemMtV2IDAekEoR4UwkplCjmh2PDsFYLap8qQnQkuVfQRWBIJZraHu9YxXv_-Lddk=@protonmail.com>

Thank you for the response Paul, it sounds like I'll be safe as long as I include the SRS :)

Cheers,
Adam

Sent with [Proton Mail](https://proton.me/) secure email.

------- Original Message -------
On Friday, September 29th, 2023 at 4:20 AM, Paul Harwood <runette at gmail.com> wrote:

> As a very general response, you probably need to differentiate between two possible questions that you are asking, either:
>
> 1 Does the operation fail with an error, or
> 2 Is the result correct or meaningful?
>
> I don't know about 1). My guess and experience is that, in most cases, it won't fail.
>
> However, I would make the case that most operations are undefined if the system is making (possibly) unknown assumptions about the CRS. If you are asking for the point at a distance along a line or a buffer then you are implicitly or explicitly giving the system an input distance, so you are making assumptions about the CRS of your input. If your assumptions do not match the system's assumptions for the CRS, then the result will be wrong. I would say that it is always better to make the definition of the CRS explicit and then the result is defined.
>
> On Fri, 29 Sept 2023 at 03:32, adamgutonski via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
>
>> Hello,
>>
>> I am using geometry object functions like Buffer and Value. I am wondering if and when it is necessary to assign a spatial reference to an ogr.Geometry before calling these functions? For example if I want to get a point along the line using Value is the output affected by whether or not the ogr line geometry has an assigned spatial reference? Is there a way to tell what geometry functions are affected by this or not?
>>
>> Thanks,
>> Adam Gutonski
>>
>> Sent with [Proton Mail](https://proton.me/) secure email.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230929/d7a1548a/attachment.htm>

From a.pau at creaf.uab.cat  Fri Sep 29 07:20:46 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 29 Sep 2023 14:20:46 +0000
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AM7PR02MB57848F661B433C92923A8C3293C1A@AM7PR02MB5784.eurprd02.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
 <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AM7PR02MB57848F661B433C92923A8C3293C1A@AM7PR02MB5784.eurprd02.prod.outlook.com>
Message-ID: <AS8PR07MB8168CBC7B041A3CCA9611102A2C0A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Stefan,
thanks for your answer.

I?ve installed vcpkg as you recommend. I followed the instructions of the web.
After I installed packages you comment.
It?s been needed to install phyton3 again cause some recent issues. (error: while looking for phyton:x64-windows: error: while loading phyton: error: phyton does not exist)
vcpkg install phyton3 works fine (it seems)

I Open Gdal CMakelists.txt in Visual
I add next two lines below (ODBC is not in vcpkg?)
list(APPEND CMAKE_PREFIX_PATH "C:/dev/vcpkg/vcpkg/installed")
set(ODBCCPP_INCLUDE_DIR "D:/GitHub-repository/odbc-cpp-wrapper/src")

It seems that all is fine. Visual detect it and execute the configuration.
1> [CMake] -- The following RECOMMENDED packages have been found:
1> [CMake]
1> [CMake]  * EXPAT
1> [CMake]    Read and write XML formats
...
1> CMake generation finished.


After that i try to build the project and...
>------ Build All started: Project: GDAL, Configuration: x64-Debug ------
  [1/6] cmd.exe /C "cd /D D:\GitHub-repository\GDAL\ogr && "C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\CommonExtensions\Microsoft\CMake\CMake\bin\cmake.exe" -DIN_FILE=swq_parser.y -DTARGET=generate_swq_parser -DEXPECTED_MD5SUM=44620ffbb37fb8665887a175b299781b -DFILENAME_CMAKE=D:/GitHub-repository/GDAL/ogr/CMakeLists.txt -P D:/GitHub-repository/GDAL/cmake/helpers/check_md5sum.cmake"
  [2/6] cmd.exe /C "cd /D D:\GitHub-repository\GDAL\ogr\ogrsf_frmts\ods && "C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\CommonExtensions\Microsoft\CMake\CMake\bin\cmake.exe" -DIN_FILE=ods_formula_parser.y -DTARGET=generate_ods_formula_parser -DEXPECTED_MD5SUM=acf825ac2d574098a64c74c864aee15e -DFILENAME_CMAKE=D:/GitHub-repository/GDAL/ogr/ogrsf_frmts/ods/CMakeLists.txt -P D:/GitHub-repository/GDAL/cmake/helpers/check_md5sum.cmake"
  [3/6] cmd.exe /C "cd /D D:\GitHub-repository\GDAL\out\build\x64-Debug && "C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\Common7\IDE\CommonExtensions\Microsoft\CMake\CMake\bin\cmake.exe" -DSOURCE_DIR=D:/GitHub-repository/GDAL -DBINARY_DIR=D:/GitHub-repository/GDAL/out/build/x64-Debug -DGDAL_SHA1SUM= -DGDAL_RELEASE_DATE= -P D:/GitHub-repository/GDAL/cmake/helpers/generate_gdal_version_h.cmake"
  -- Found Git: C:/Program Files/Git/cmd/git.exe (found version "2.40.1.windows.1")
  [4/6] Generating osgeo/_gdal.cp311-win_amd64.pyd, osgeo/_gdalconst.cp311-win_amd64.pyd, osgeo/_gnm.cp311-win_amd64.pyd, osgeo/_ogr.cp311-win_amd64.pyd, osgeo/_osr.cp311-win_amd64.pyd
  Traceback (most recent call last):
    File "D:\GitHub-repository\GDAL\out\build\x64-Debug\swig\python\setup.py", line 14, in <module>
      from setuptools.command.build_ext import build_ext
  ModuleNotFoundError: No module named 'setuptools'
  [5/6] Building CXX object autotest\CMakeFiles\pytest_runner.dir\pytest_runner.cpp.obj
  [6/6] Linking CXX executable autotest\pytest_runner.exe

Build All succeeded.

I have to install setuptools? At the end I don?t get the GDAL project rebuilded and I don?t know what is happening.
I?m new at that kind of things.
Thanks again for any help!

De: Uhrig, Stefan <stefan.uhrig at sap.com>
Enviado el: dijous, 28 de setembre de 2023 11:46
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] About installing EXPAT

Hi Abel,

I can recommend vcpkg (https://vcpkg.io/) if you?d like to build GDAL on Windows with Visual Studio or Visual Studio Community Edition.

vcpkg builds packages from sources and can build the mandatory dependencies of GDAL (and a lot of optional ones). You get a working starting set via

vcpkg --triplet=x64-windows install curl expat geos lerc libdeflate libgeotiff libiconv libpng libxml2 openssl proj qhull sqlite3[rtree] xerces-c zlib

You can then open GDAL?s CMakeLists.txt file in Visual Studio via File -> Open -> CMake? After configuration, you can just start the build:

>------ Build All started: Project: gdal, Configuration: x64-Debug ------
  [1/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\crc32.c.obj
  [2/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\trees.c.obj
  [3/1351] Building C object frmts\zlib\CMakeFiles\libz.dir\uncompr.c.obj
...
  [1348/1351] Linking CXX executable fuzzers\tests\test_ogr_fuzzer.exe
  [1349/1351] Linking CXX executable fuzzers\tests\test_gdal_fuzzer.exe
  [1350/1351] Linking CXX executable perftests\bench_ogr_c_api.exe
  [1351/1351] Linking CXX executable fuzzers\tests\test_osr_set_from_user_input_fuzzer.exe

Build All succeeded.

vcpkg builds debug and release versions of the packages. As the packages are built from source, you can even debug into the dependencies because the source code is on your machine. That can be really helpful from time to time.

I?d recommend starting from a clean environment though. I guess you tweaked quite a lot to get GDAL building.

Cheers,
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230929/c23df36f/attachment-0001.htm>

From a.pau at creaf.uab.cat  Fri Sep 29 21:54:54 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Sat, 30 Sep 2023 04:54:54 +0000
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AM0PR02MB577750635AB7BA303163832293C0A@AM0PR02MB5777.eurprd02.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
 <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AM7PR02MB57848F661B433C92923A8C3293C1A@AM7PR02MB5784.eurprd02.prod.outlook.com>
 <AS8PR07MB8168C50FD237A03BE9F760F4A2C0A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AM0PR02MB577750635AB7BA303163832293C0A@AM0PR02MB5777.eurprd02.prod.outlook.com>
Message-ID: <AS8PR07MB81684F3F3B2303BD0E3E6D7BA2C7A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Stefan,
I finally did it well and now it works!!!!
Thanks a lot for your help!!


De: Uhrig, Stefan <stefan.uhrig at sap.com>
Enviado el: divendres, 29 de setembre de 2023 17:36
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: RE: [gdal-dev] About installing EXPAT

Hi Abel,

Hmm, I did not build with SWIG and Python. Your build log also looks very different from mine. I wonder why you have all those separate projects. For me, it was just one project with 1351 tasks.

Let me share the output of my project configuration. Maybe it will help:

1> [CMake] -- The C compiler identification is MSVC 19.37.32824.0
1> [CMake] -- The CXX compiler identification is MSVC 19.37.32824.0
1> [CMake] -- Detecting C compiler ABI info
1> [CMake] -- Detecting C compiler ABI info - done
1> [CMake] -- Check for working C compiler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped
1> [CMake] -- Detecting C compile features
1> [CMake] -- Detecting C compile features - done
1> [CMake] -- Detecting CXX compiler ABI info
1> [CMake] -- Detecting CXX compiler ABI info - done
1> [CMake] -- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.37.32822/bin/Hostx64/x64/cl.exe - skipped
1> [CMake] -- Detecting CXX compile features
1> [CMake] -- Detecting CXX compile features - done
1> [CMake] -- Performing Test test_AVX
1> [CMake] -- Performing Test test_AVX - Success
1> [CMake] -- Performing Test test_AVX2
1> [CMake] -- Performing Test test_AVX2 - Success
1> [CMake] -- Could NOT find SWIG (missing: SWIG_EXECUTABLE SWIG_DIR)

1>  [CMake] -- Could NOT find Python (missing: Python_NumPy_INCLUDE_DIRS NumPy) (found suitable version "3.11.1", minimum required is "3.6")


[deleted ...]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230930/4f72a869/attachment.htm>

From dg0yt at darc.de  Sat Sep 30 01:10:16 2023
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Sat, 30 Sep 2023 10:10:16 +0200
Subject: [gdal-dev] About installing EXPAT
In-Reply-To: <AS8PR07MB8168CBC7B041A3CCA9611102A2C0A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168A026E5761EEC60F6D774A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <770b327b-ee92-6906-5bd3-21982ec7a5a5@spatialys.com>
 <AS8PR07MB8168624CB7584B87D8E87A72A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <f8799f9a-cba0-caad-5346-f294f255d708@spatialys.com>
 <AS8PR07MB816813A6F865DC076D0DF284A2FCA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AM7PR02MB57848F661B433C92923A8C3293C1A@AM7PR02MB5784.eurprd02.prod.outlook.com>
 <AS8PR07MB8168CBC7B041A3CCA9611102A2C0A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <376e79f4-7686-72bc-9201-1aea992d9c37@darc.de>

Am 29.09.23 um 16:20 schrieb Abel Pau via gdal-dev:
> I add next two lines below (ODBC is not in vcpkg?)
>
> list(APPENDCMAKE_PREFIX_PATH "C:/dev/vcpkg/vcpkg/installed")
>
> set(ODBCCPP_INCLUDE_DIR "D:/GitHub-repository/odbc-cpp-wrapper/src")
>
Note that vcpkg's CMake integration requires using vcpkg's CMake 
toolchain file (but you can chainload another toolchain file). In 
particular, the toolchain file integrates vcpkg's wrappers for CMake's 
Find modules. Without those wrappers, some dependencies won't be found, 
or release/debug libraries may mix unexpectedly.

https://learn.microsoft.com/en-us/vcpkg/users/buildsystems/cmake-integration

Kai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230930/5e8287f7/attachment-0001.htm>

