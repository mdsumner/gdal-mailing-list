From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:46 2007
Subject: No subject
Message-ID: <mailman.0.1195663725.31254.gdal-dev@lists.osgeo.org>

Synopsis

Boost.Build is a system for large project software construction built
on Boost.Jam, a descendant of "Perforce Jam", an open-source make
replacement[1]. Key features are:

    * A simple target description language
    * Build with your choice (or multiple) toolsets from a single
      command invocation
    * Build your choice of basic variants (e.g. debug, release,
      profile...) and subvariant modifications (e.g. inlining off)
      from a single command invocation
    * ``Feature Normalization'' allows target configurations to be
      described independently from the toolset used
    * Modular toolset description files allow build instructions for
      different toolsets to be described independently
    * Multiple subproject support
    * Automatic building of subproject dependencies


I hope this is helpful to some!

Cheers!

Mark
-- 
Mark Coletti | mailto:mcoletti@lychnobite.org | http://www.lychnobite.org/
		    Don't make me use uppercase...

------- =_aaaaaaaaaa0
Content-Type: application/x-tar; name="gdal.bjam.tgz"
Content-ID: <73237.1040237927.2@lychnobite.org>
Content-Description: bjam files for GDAL
Content-Transfer-Encoding: base64

H4sIAP3AAD4AA+1bX2/juBHPaw3kOxDJAu0VjWzLjtPL5nLAFvdwBdoUt4sC7YtBSZTMCyXqSMqO
++k7pPxHFCm7D+u0h3ICSdb8huSQGs4MKSUaJ5xLdZc0lGXRz7i8+vo0mU4mD/f3V5OW+tfJdD6/
AgH4ixeTB+BP48X84QpNLqCLQ41UWCB0JThXp+TO4b9S+vTy8vnL8qeXly/oO3Rzkz6O022xodW4
kWLMeIrZmFYpazLSGspyuoy/XU5ubtDHUcdy0IffHWv6Zqw4Z3LcIh9H/+0+BhqmaPxnXOaUkQu2
cXb+x/e7+T+bTWM9/6fxdBHm/3tQLfjPJFV3unvo4/VINsluvqOaiz6LF2IMh8yXuSiVdFHNuQ4T
/tdDZv6LhhF5uTbOzP/pZDY9xv9FrOf/fHYf5v970C36pKN49MnEasVrxMiaMLS3itHoFn0mBHUi
OiQEGXmLVqpkKOcCZTxtSlIprCivoraAQpKXBNFSOxFcKVQwnmCG1lhQnEC9iOZIrcgWrfCaVL9V
CDNBcLZFCSEVklBBstUCUFsjiUC80nco5WWJq+yO0Qr8jUC0ZZNqTQWvtBa6/R/gmSaMyhWAVCIs
jZBxcdw0i0zqAqVBkLFWcfQXzQJjKAh4tg1lDG1Ac6jOym12TVKBbg+OEqtVhECs+PLyNxBom6sw
DMCuuX23obKUw0jRilaFQXRZlAtemjtarSHl0uqgjArwy1zAKPBWsvXUphvRSJe72w1qJ4d7BC12
enwDmRe090WPWiMEDA1aEyF13aBV+9RHbdG///DT5x9f/oq+/w5No/jbaBKStv8XinQ8v3AOeMb/
x9P7h33+F88XZv03iePg/9+Dbq9HuxCAYPGPtBUARzP/FOXRH9Bms4mMs4y4KHbIhx+zD+anyf72
fumQ/TGamJtHfV7imkZpXV+PfoPMvfZ1pJaFxeS1su6lkEsiBXWYurG5w11jRjOsiAO8lazPq3hm
yWEpSQmuueZsW0AY6ECppRQ40bVVMidYNcLHykheedi/NERsPXyptsyuhhKW9SspCAycsivY81LO
GDwDyr0lcmwCSRfS8RMLAVGoz5Wqzy0bpugJqOa0Uh6uM56OoEdGQmCjOhfICYSs1BoW2QjoisVq
QDN5ZDCSJUvZ1C3nFgFP5imYBpa8Efuiez6pIG8RGMbG5uvkYd/KI3rahfnnyLRxvI3GOrnpMbvL
oxYSTaVoSXTK8vosdZaUXo/QgZ4ykjTFndyWCWRYz7zygaAieeaJnmcWLJSi/SLkLSW1NoW7FWRK
0GrRl5ArDDZqFNI9fc4xk6QrcfNUynX6/PT756f07S1nuJDPd//Ibs7K/POhI/OIjPZHxsewMvyf
ozb+d4z2ArnA6fg/nSwWs0P8n8wWIA/Lv7D+exf6qvG/vzd0yAUOzEdknGI0xutUH8uEgvt3eRvh
cMlkUhBXGNg1FpL4AL2i9PE3giq3QJlsfVwqU4cp8KavuE4l1ilw+9HGIyEorMSGUIa3A+CZmjsF
TSSLxllR6SNrylrranNzxrHyia8Iq318XpPKx29H2eVDusBfiQ/Zjf8AoCDRcNVd1oVbBDqu++eL
75ZAZ8Ad0D9s0NqyVaQHrBNHk7wk+oh1htlJSDqozulKkuJ0RdrNE7/AQEc6Am5HjqDbkR5m2s9O
SWRJx7JgthFBjXV5La+D9222AwlSUKkgzWLMLyBzZz540LYagQfElvBb/nJs4VbDJdNH7MudO7iV
xu+GxYZgZknpw02C1RvzHQResSZCbY9ZvI3rSeMvqRGdJno1WlOy6YyAogUR7ZlWOXdKQNdjuNrd
t3G4DJhdR8A1uyPomp3GlOitFqJxSSGxbs/LhDdVJgfAlHORye0QDOrqMDWA9ldlXhS8ej4g4ZiK
DdPsRNu0hNUuPIdTItWpCqC86XzCePo6LHO6hpUxrTNVGDfUl/Ga0xmkV2+7SDnTuN5MPilCM22T
p7pJ8xOodghel+UI9T1PV6AN8qf0PC5WBwTgOKEmHJLgkhE5ZOpw9Ga8hcIwZoNt20vjaFypXB9a
n67z6WLg6sD4XH43knf5MFMzwqhUHghip/EMHhWWO8ftQQTWsaIHwJOCi/eBduD+ozxCXTfej1RH
KdeP8SKjGtTXAR9pibhesgu79deFxupioO4D7Na7h4brFEQ2TA3jZo/DheX9wzjLdobgpioa1kH5
/mFA546Aq/UR9DcMh3lGvVhvS7TJrMvXdr3bBuPego7RywxWu1ofuHqNyxLom1cX7BuVXOGajLMk
b1Nmi6uL6B/+Fm0Rp00L9rdqzjrn8SC1pU/r00HS/PDq0xPp62PDfX06MQMzpV+HDYDwZBhkUiUW
r9IvkvKyZrAwSFeYVn4RUimqtrqVgTp2XoBmQzgYUILlgJI0W1Fp7aJa8CvZ7jdz/QJnOljTegDg
bGt6rXfrhkW6u6gWqBj4JVwVA936F621Dx/QCtCaNXK/4X5yL9Rh+PdHDb/daNIzZxilkv8xnk7D
Hupl91Dbh3TZF4Dnvv+I54f3f7P5zLz/i6fzsP/3HvT19v/2n4u1m35pzcB44Qw5YrU+uBfDkPZ9
RoV1D4t9bnPy/qpJM0ta0e77PcMzb54ETy2u+T6jy+gtTTVrLSlbNlAjgBnly8XchTe0msV9tqQ6
NHW5+vsR44kOzDe9qs+5KPExUy5xetDD61uDz7uUzwt0JPD/nS9AL/MPAOe+/zW/99//3c9BfjaZ
B/8fKFCgQIECBQoUKFCgQIECBQoUKFCgQIECBQoUKFCgQIEC/cf0bxeHQNQAUAAA

------- =_aaaaaaaaaa0--

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:47 2007
Subject: No subject
Message-ID: <mailman.1.1195663727.31254.gdal-dev@lists.osgeo.org>

culprit as it always fails because the file "projop_wparm.csv" cannot be
found.

 

Roger


------=_NextPart_000_0001_01C2DA15.2D967A40
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">


<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{font-family:Arial;
	color:windowtext;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-GB link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Frank,</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I create a new geotiff dataset, set the projection =
from wkt
that has projection parameters in it, and then save it. When I read it =
back in
the projection parameters are missing. For a transverse mercator these =
are things
like the lat/long origin and the false easting/northing etc. =
</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>From a quick look at the code the routine =
GTIFGetProjTRFInfo
might be a culprit as it always fails because the file =
&quot;projop_wparm.csv&quot;
cannot be found.</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Roger</span></font></p>

</div>

</body>

</html>

------=_NextPart_000_0001_01C2DA15.2D967A40--


From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:47 2007
Subject: No subject
Message-ID: <mailman.2.1195663727.31254.gdal-dev@lists.osgeo.org>

30339 open("foo.png", O_RDONLY) = -1 EFBIG (File too large)

Given that you suggested using an uncompressed format, although a
different one, I assumed that this would be because my gdal was
compiled to use system's libpng, which is unlikely to have large
file support.  So I recompiled gdal with internal PNG support but I
still get the same error.  I guess this means that somehow the PNG
driver does not get compiled with correct definitions.  I do see
calls to stat64 before that open call, so it would seem that some
parts are using 64bit calls.  Unless you have some insight into the
issue, I'll investigate this more closely later today or tomorrow.

I'm still using v1.1.8 but I'll get the CVS version as soon as
possible.

> My suggestion would be to let gdaladdo generate the overviews itself
> unless you have some specific algorithm for generating the overviews
> that you feel strongly about.

It's not really an algorithm issue, the overviews I already have
have been generated from different data and serve much better as
overviews.  If I generated highly downscaled versions of the high
resolution data, I couldn't read text or make much sense of the
data otherwise either.  But I can work around this problem easily
by keeping the overviews in separate files and operating on them as
separate datasets.  I am slightly worried whether GDAL's caching
works well in a situation like this, i.e. is it designed to work
with multiple simultaneously open datasets, but given that I
eventually need multiple simultaneously open datasets anyway
("real" datasets, not just overviews of an other dataset), I guess
I'll just make it work if it doesn't.

-- 
Hannu

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:50 2007
Subject: No subject
Message-ID: <mailman.3.1195663730.31254.gdal-dev@lists.osgeo.org>

Things like:
ogr2ogr watrcrsl.shp \
   gltp:/vrf/levi0/ssi/BIO/vectordata/vmap0_europe/v0eur/vmaplv0/eurnasia \
   'watrcrsl@hydro(*)_line'

produced feature-empty, but correct SHAPE files (as no features found).
I tried this with all maps.

But the VMAP0/Eurnasia data set requires 750 MB of disk space.
So I am obviously overlooking something.

Best regards
 
  Markus Neteler

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:55 2007
Subject: No subject
Message-ID: <mailman.4.1195663735.31254.gdal-dev@lists.osgeo.org>

<font color="#000000" face="arial,helvetica,sanserif">
<p>Xerces-C++ 2.3.0 now supports C++ Namespace.</p>
</font><font color="#000000" face="arial,helvetica,sanserif">- users'
applications must namespace qualified all the Xerces-C++
classes/data/variables with <code><font face="courier, monospaced">"xercesc::"</font></code>
or add the <code><font face="courier, monospaced">"using namespace
xercesc"</font></code> clause.<br>
<br>
So I modified configure so it would pass conftest...<br>
<br>
$ diff ../clean/configure ..modifiedl/configure<br>
21076,21078c21076,21078<br>
&lt;&nbsp;&nbsp;&nbsp;&nbsp; LIBS="-lxerces-c1_6_0 -lpthread $LIBS"<br>
&lt;&nbsp;&nbsp;&nbsp;&nbsp; if test -f /usr/local/lib/libxerces-c1_6_0.so ; then<br>
&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS="-L/usr/local/lib $LIBS"<br>
---<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp; LIBS="-lxerces-c -lpthread $LIBS"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # was&nbsp;
LIBS="-lxerces-c1_6_0"<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp; if test -f /usr/local/xerces-c-2_3_0/lib/libxerces-c.so.23.0 ;
then<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LIBS="-L/usr/local/xerces-c-2_3_0/lib $LIBS"<br>
21084,21085c21084,21085<br>
&lt;&nbsp;&nbsp;&nbsp;&nbsp; if test -d /usr/local/include/xercesc ; then<br>
&lt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XERCES_INCLUDE="-I/usr/local/include/xercesc"<br>
---<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp; if test -d /usr/local/xerces-c-2_3_0 ; then<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XERCES_INCLUDE="-I/usr/local/xerces-c-2_3_0/include"<br>
21091c21091,21096<br>
&lt;&nbsp;&nbsp; echo '#include &lt;util/PlatformUtils.hpp&gt;' &gt; conftest.cpp<br>
---<br>
&gt;&nbsp;&nbsp; # Xerces-C++ 2.3.0 now supports C++ Namespace.<br>
&gt;&nbsp;&nbsp; # From doc/html/program-others.html#CPPNamespace<br>
&gt;&nbsp;&nbsp; echo '#include &lt;xercesc/util/PlatformUtils.hpp&gt;' &gt;
conftest.cpp<br>
&gt;&nbsp;&nbsp; echo '#include &lt;xercesc/sax/HandlerBase.hpp&gt;' &gt;&gt;
conftest.cpp<br>
&gt;&nbsp;&nbsp; echo '#define XERCES_HAS_CPP_NAMESPACE' &gt;&gt; conftest.cpp<br>
&gt;&nbsp;&nbsp; echo 'using namespace xercesc;' &gt;&gt; conftest.cpp<br>
<br>
I also modified ogr/ogrsf_frmts/gml/gmlreaderp.h&nbsp; (although not clear
why this was necessary using namespaces)<br>
<br>
diff ../clean/gdal/ogr/ogrsf_frmts/gml/gmlreaderp.h
../modified/gdal/ogr/ogrsf_frmts/gml/gmlreaderp.h<br>
64,68c64,68<br>
&lt; #include &lt;util/PlatformUtils.hpp&gt;<br>
&lt; #include &lt;sax2/DefaultHandler.hpp&gt;<br>
&lt; #include &lt;sax2/ContentHandler.hpp&gt;<br>
&lt; #include &lt;sax2/SAX2XMLReader.hpp&gt;<br>
&lt; #include &lt;sax2/XMLReaderFactory.hpp&gt;<br>
---<br>
&gt; #include &lt;xercesc/util/PlatformUtils.hpp&gt;<br>
&gt; #include &lt;xercesc/sax2/DefaultHandler.hpp&gt;<br>
&gt; #include &lt;xercesc/sax2/ContentHandler.hpp&gt;<br>
&gt; #include &lt;xercesc/sax2/SAX2XMLReader.hpp&gt;<br>
&gt; #include &lt;xercesc/sax2/XMLReaderFactory.hpp&gt;<br>
<br>
Not sure all this was necessary, (I'm not a big C++ coder) but its what
I needed to compile in support for Xerces 2.3.0 and GML and wanted some
place to document my modifications in the chance it can help someone
else...<br>
<br>
-jv<br>
</font>
</body>
</html>

--------------050202000900000104080708--


From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:48:57 2007
Subject: No subject
Message-ID: <mailman.5.1195663737.31254.gdal-dev@lists.osgeo.org>

"------------ MODIS Reprojection Tool (MRT) Release Notes Version 3.1 
March 2003 USGS EROS Data Center South Dakota School of Mines and Technology

Capabilities 
1. MODIS Data Products The MODIS Reprojection Tool currently allows the user
to reproject gridded (Level-2G, Level-3, and Level-4 land products) MODIS
data products. Support for swath (Level-1 and Level-2) data products is not
currently planned."

So it probably won't be of help.

Maybe interesting:
 http://modis-land.gsfc.nasa.gov/news/
 http://modis-land.gsfc.nasa.gov/news/indiv_nws_pgs/c4_descrip.asp

Markus
  
> Chris
> 
> 
> -----Original Message-----
> From:	Ben Discoe [mailto:ben@vterrain.org]
> Sent:	Sun 10/12/2003 11:11 PM
> To:	gdal-dev@remotesensing.org
> Cc:	
> Subject:	RE: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
> 
> Answering my own question here.. the values given by MODIS for lat/lon are
> the center of the _image_, not necessarily the center of the projection.
> When i tell OGR Sinusoidal, with dfCenterLong=128, the other params 0, then
> the image appears more or less where i expect it.  It's still offset a bit,
> but it's certainly in the right overall projection.  The offset is probably
> due to ellipsoid differences, or some such.
> 
> -Ben
> 
> > -----Original Message-----
> > Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
> > 
> > This evening i tried to load some images from the MODIS Gallery
> > (http://rapidfire.sci.gsfc.nasa.gov/)  They are .jpg, with 
> > .jpw world files.
> > The projection is described in a separate .txt file, like this:
> > 
> >  projection: Sinusoidal
> >  image center lon: +128
> >  image center lat: +38
> >  ellipsoid: Sphere
> >  Earth radius (km): 6371.007181
> > 
> > When i looked at OGR for a way to describe this projection, i found:
> > 
> >   OGRSpatialReference::SetSinusoidal(dfCenterLong, dfFalseEasting,
> > dfFalseNorthing);
> > 
> > This doesn't seem to take a "center lat" parameter, so i'm 
> > left wondering how to tell it about the MODIS image?
> > 
> > Thanks,
> > Ben

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:49:01 2007
Subject: No subject
Message-ID: <mailman.6.1195663741.31254.gdal-dev@lists.osgeo.org>

Pushkar

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:49:05 2007
Subject: No subject
Message-ID: <mailman.7.1195663745.31254.gdal-dev@lists.osgeo.org>

http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnnetse
rv/html/ws03-64-bitwindevover.asp

/WP64: Getting the Compiler to Warn You of Potential Issues
The Microsoft(r) Visual C and Microsoft(r) Visual C++(r) .NET 2002
compilers added the /WP64 switch, which allows you to test your 32-bit
code for 64-bit compatibility issues. The compiler will issue warnings
about things like pointer truncation and improper casts. One of the
first steps in porting your 32-bit application to the 64-bit version of
Windows is to turn on this flag and compile your code like you normally
would. The first time, expect to get several errors. For example, take a
look at this snippet of code:

DWORD i = 0;
size_t x = 100;

i = x; // C4267: warning C4267: '=' : conversion from 
    // 'size_t' to 'DWORD', possible loss of data.
On a 32-bit platform this code would compile fine, because size_t is
32-bits, but on a 64-bit platform size_t is a 64-bit integer. With /WP64
enabled, the compiler will warn you about situations like this.

Additional examples:

void func(DWORD context)
{
  char* sz = (char*)context; // C4312: warning C4312: 
                // 'type cast' : conversion 
                // from 'DWORD' to 'char *' of
                // greater size
  // Do something with sz..
}

char* string = "the quick brown fox jumped over the lazy dog.";

func((DWORD)string); // C4311: warning C4311: 'type cast' :
           // pointer truncation from 'char *' 
           // to 'DWORD'
Once you fix these errors, test your 32-bit code. You want to make sure
that your 32-bit code continues to work as expected. Your 32-bit and
64-bit binaries should build from the same code base. This is a key
concept for writing Windows applications moving forward. You need to
think about both 32-bit and 64-bit issues from the beginning, and code
your application to work for both platforms.

New Data Types
The 64-bit version of Windows uses the LLP64 data model. What this means
is that the standard C types int and long remain 32-bit integers. The
data type size_t is mapped to the processor's word size (32-bits for
IA32 and 64-bits for IA64), and __int64 is a 64-bit integer. This was
done to assist in porting 32-bit code. The significance is that you can
have the same code base for both the 32-bit and 64-bit version of your
application. 

There is another data model called LP64, which maps the standard C type
long to a 64-bit integer; and int remains a 32-bit integer. This data
model is common on Unix platforms, but can make it harder to create both
32-bit and 64-bit versions of your application from a single code base.
You might notice a common theme here. The idea of a 32-bit versus a
64-bit platform is that you should be able to build both versions of
your application from a single code base. If you can't do that, then you
may want to revisit your design. Having a single code base is a huge
win, especially if you plan to ship both versions.


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, March 10, 2004 11:27 AM
To: Roger James
Cc: gdal-dev
Subject: [Gdal-dev] Re: VC7 build log



Roger (or others),

\Vterrain\APIs\gdal\alg\gdalwarpoperation.cpp(637) : warning C4312:
'type cast' : conversion from 'long' to 'void *' of greater size

This code looks like:
     ((void **) pThreadData)[2] = (void *) (long) eErr;

Given that I want to convert an enumerated error code into a pointer is
there any more "proper" way of doing it than this?

> \Vterrain\APIs\gdal\frmts\envisat\envisatdataset.cpp(546) : warning
> C4267: '=' : conversion from 'size_t' to 'int', possible loss of data


Ahh yes, all these.  Very annoying.  I have generally used "int" as
equivelent to size_t and it is warning every time there is a cast back
or forth.   This does not cause a complain under gcc -Wall and I am not
inclined to make a comprehensive pass through fixing it at this time.

I would note that a non-trivial number of the warnings are in libpng,
libjpeg,
and libz which I don't have any influence over.  If I fix the copy in
GDAL
then the changes will just be lost on my next upgrade.

 > The problem is that at some point the size_t typedef on windows
became
 > an unsigned int. I think it is something to do with 64 bit
 > compatability. C4267 is definitely a very bad warning to disable. I
for
 > one am very much in the "every warning masks a potential error" camp.
I
 > have mailed you a build log separately.

Death to C4267!  Err, I mean, I give up on it for now.

Re: file.lst files:
 > Not that I am aware of but maybe somebody else knows.I do not think
it
 > would be beyond possibility (but beyond my own knowledge and
timetable)
 > to make a perl script to edit the vcproj files. However, I am happy
to
 > keep the files reasonably up to date and send you updates. My
comments
 > on not wanting responsibility were of the legalistic nature seeing as
 > the files did not have any disclaimer associated with them. I did not
 > mean to wash my hands of them completely.

Well, I am not keen on update scripts.  I will commit the project files
to CVS, and I would be happy to offer you CVS commit access if you would
like to update them (and even fix warnings carefully).

Also, please don't mind my crankiness too much.  I am having a
frustrating
time keeping on top of actual paying work as well as the many requests
for
help, bug fixes and so forth on my many libraries.  My days often have a
peak frustration around noon, when I am pretty much dug out of overnight
requests for help, and ready to start on real work.  Less than half the
requests for help I get come via public mailing lists where others can
help
out, and of course there are a number of other projects I am involved
beside
GDAL itself.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From bogus@does.not.exist.com  Wed Nov 21 11:48:46 2007
From: bogus@does.not.exist.com ()
Date: Wed Nov 21 11:49:07 2007
Subject: No subject
Message-ID: <mailman.8.1195663747.31254.gdal-dev@lists.osgeo.org>

WGS84 UTM 29N.

 

I tried:

 

C:\gdal-1.1.9\apps>gdalwarp -s_srs 'EPSG:27700' -t_srs 'EPSG:32629' ss78.tif
ss78

utm.tif

ERROR 1: Translating source or target SRS failed:

'EPSG:27700'

 

The ss78.tif is the 1:25,000 sample from:

http://www.ordnancesurvey.co.uk/products/25kraster/sampledata/25klzwtif.exe

 

I used the following TFW file from the Ordnance Survey site that accompanies
the above file:

 

2.5

0

0

-2.5

270000

190000

 

I'm sure I am not doing things right, but what? 

 

Thanks in advance!

 

Roger

 

Roger Bedell, President, Sylvan Ascent Inc.

roger@sylvanascent.com

505-758-7712

www.sylvanascent.com

www.pocketterra.com

 

 


------=_NextPart_000_00A6_01C41897.4B39E430
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered)">
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I am not familiar with the British National Grid, but =
I was
asked to convert some Ordnance Survey data to UTM.</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>From the EPSG database, I got EPSG:27700 for the BNG, =
and
EPSG:32629 for WGS84 UTM 29N.</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I tried:</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>C:\gdal-1.1.9\apps&gt;gdalwarp -s_srs 'EPSG:27700' =
-t_srs
'EPSG:32629' ss78.tif ss78</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>utm.tif</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>ERROR 1: Translating source or target SRS =
failed:</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>'EPSG:27700'</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>The ss78.tif is the 1:25,000 sample =
from:</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><a
href=3D"http://www.ordnancesurvey.co.uk/products/25kraster/sampledata/25k=
lzwtif.exe">http://www.ordnancesurvey.co.uk/products/25kraster/sampledata=
/25klzwtif.exe</a></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I used the following TFW file from the Ordnance =
Survey site
that accompanies the above file:</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'>2.5</span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>0</span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier New"'>0</span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'>-2.5</span></font></p>

<p class=3DMsoNormal style=3D'text-autospace:none'><font size=3D2 =
face=3D"Courier New"><span
style=3D'font-size:10.0pt;font-family:"Courier =
New"'>270000</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3D"Courier New"><span =
style=3D'font-size:10.0pt;
font-family:"Courier New"'>190000</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3D"Courier New"><span =
style=3D'font-size:10.0pt;
font-family:"Courier New"'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>I&#8217;m sure I am not doing things right, but what? =
</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Thanks in advance!</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Roger</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D2 =
color=3Dnavy face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial;color:navy'>Roger Bedell, =
President,
Sylvan Ascent Inc.</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D2 =
color=3Dnavy face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial;color:navy'>roger@sylvanascen=
t.com</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D2 =
color=3Dnavy face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial;color:navy'>505-758-7712</spa=
n></font></p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D2 =
color=3Dnavy face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial;color:navy'><a
href=3D"http://www.sylvanascent.com">www.sylvanascent.com</a></span></fon=
t></p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D2 =
color=3Dnavy face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial;color:navy'><a
href=3D"http://www.pocketterra.com">www.pocketterra.com</a></span></font>=
</p>

<p class=3DMsoNormal style=3D'margin-left:.5in'><font size=3D3 =
face=3D"Times New Roman"><span
style=3D'font-size:12.0pt'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span =
style=3D'font-size:
12.0pt'>&nbsp;</span></font></p>

</div>

</body>

</html>

------=_NextPart_000_00A6_01C41897.4B39E430--


From hobu.inc at gmail.com  Thu Nov  1 00:10:24 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 'make install' and NG Python Bindings
Message-ID: <0A4B5935-9774-445F-A943-AE88B52AE576@gmail.com>

Chris and William (and others following along),

I updated the 'make install' target of ./swig/python/GNUMakefile to  
install the contents of ./swig/scripts in prefix/bin, like the GDAL/ 
OGR apps, etc.  Please add to http://trac.osgeo.org/gdal/ticket/1962  
if any issues arise or I did something dumb.

People seem to prefer the 'make install' approach of manually copying  
things as we did in the past, but I'm wondering if we don't also want  
to add "scripts" support to the setuptools side of the bindings and  
*also* install them that way.  The only significant advantage is  
someone getting stuff from the cheeseshop would also get the utilities.

Howard

From mateusz at loskot.net  Thu Nov  1 02:01:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling
	against	ndarrayobject.h]
In-Reply-To: <472913EC.7090403@pobox.com>
References: <4728ABA7.2080102@sarvision.nl> <472913EC.7090403@pobox.com>
Message-ID: <47296BC0.9000205@loskot.net>

Frank Warmerdam wrote:
> Vincent Schut wrote:
>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
>>
>>                  from extensions/gdal_array.h:10,
>>                  from extensions/_gdal_array.cpp:33:
>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
>>
>> error: #error Must use Python with unicode enabled.
> 
> Vincent,
> 
> At first I had no idea and assumed this was a Python 2.5 issue.  But then I
> ran into it on my system and discovered things were hosed by a change
> Mateusz made last night.  I have fixed
> gdal/swig/python/extensions/gdal_array.h
> in trunk now and things seem to be building ok for me.
> 
> Update, and try again.

Frank,

Yes, re-ordering headers broken numpy support.
Thanks for fixing.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From schut at sarvision.nl  Thu Nov  1 04:05:51 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling
	against	ndarrayobject.h]
In-Reply-To: <47296BC0.9000205@loskot.net>
References: <4728ABA7.2080102@sarvision.nl> <472913EC.7090403@pobox.com>
	<47296BC0.9000205@loskot.net>
Message-ID: <472988DF.3090405@sarvision.nl>

OK, rebuilding now, thanks for the fix! I was really frightened that I
had screwed up my numpy, or even worse, python build...

Cheers,
Vincent.

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>   
>> Vincent Schut wrote:
>>     
>>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
>>>
>>>                  from extensions/gdal_array.h:10,
>>>                  from extensions/_gdal_array.cpp:33:
>>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
>>>
>>> error: #error Must use Python with unicode enabled.
>>>       
>> Vincent,
>>
>> At first I had no idea and assumed this was a Python 2.5 issue.  But then I
>> ran into it on my system and discovered things were hosed by a change
>> Mateusz made last night.  I have fixed
>> gdal/swig/python/extensions/gdal_array.h
>> in trunk now and things seem to be building ok for me.
>>
>> Update, and try again.
>>     
>
> Frank,
>
> Yes, re-ordering headers broken numpy support.
> Thanks for fixing.
>
> Cheers
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071101/ecd1fb0a/attachment.html
From jetelus at centrum.cz  Thu Nov  1 04:08:32 2007
From: jetelus at centrum.cz (jetelus@centrum.cz)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
Message-ID: <200711010908.11215@centrum.cz>

Hi, I open and display raster without problems but when I
try zooming I get CE_Failure from GDALDatasetRasterIO with
this error message using GDAL 1.4.2:

"Assertion `nLockCount == 0' failed in file `..\..\..\gcore
\gdalrasterblock.cpp', line 219"
(and app crashs)

and this error message using GDAL 1.4.3:

"Out of memory allocating 59765 byte raster cache block."
(its little better becasuse app doesnt crash)

RASTER INFO:
bpp: 1
compression: LZW
resolution: 11953 x 10268.
file size: 658kB

When I convert this raster to 4 bits per pixel everything
is ok and I get no errors but raster file size grows to
1.7MB. Any ideas? Thx.


From schut at sarvision.nl  Thu Nov  1 04:42:45 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling
	against	ndarrayobject.h]
In-Reply-To: <47296BC0.9000205@loskot.net>
References: <4728ABA7.2080102@sarvision.nl> <472913EC.7090403@pobox.com>
	<47296BC0.9000205@loskot.net>
Message-ID: <47299185.3030502@sarvision.nl>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>   
>> Vincent Schut wrote:
>>     
>>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
>>>
>>>                  from extensions/gdal_array.h:10,
>>>                  from extensions/_gdal_array.cpp:33:
>>> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
>>>
>>> error: #error Must use Python with unicode enabled.
>>>       
>> Vincent,
>>
>> At first I had no idea and assumed this was a Python 2.5 issue.  But then I
>> ran into it on my system and discovered things were hosed by a change
>> Mateusz made last night.  I have fixed
>> gdal/swig/python/extensions/gdal_array.h
>> in trunk now and things seem to be building ok for me.
>>
>> Update, and try again.
>>     
>
> Frank,
>
> Yes, re-ordering headers broken numpy support.
> Thanks for fixing.
>
> Cheers
>   
Just to make an 'official' confirmation: gdal svn.12599 with ngpython is
building fine again for me.

Thanks folks!
VS.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071101/a9c092ac/attachment.html
From mateusz at loskot.net  Thu Nov  1 04:54:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711010908.11215@centrum.cz>
References: <200711010908.11215@centrum.cz>
Message-ID: <47299455.20707@loskot.net>

jetelus@centrum.cz wrote:
> Hi, I open and display raster without problems but when I
> try zooming I get CE_Failure from GDALDatasetRasterIO with
> this error message using GDAL 1.4.2:
> 
> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
> \gdalrasterblock.cpp', line 219"
> (and app crashs)
> 
> and this error message using GDAL 1.4.3:
> 
> "Out of memory allocating 59765 byte raster cache block."
> (its little better becasuse app doesnt crash)
> 
> RASTER INFO:
> bpp: 1
> compression: LZW
> resolution: 11953 x 10268.
> file size: 658kB
> 
> When I convert this raster to 4 bits per pixel everything
> is ok and I get no errors but raster file size grows to
> 1.7MB. Any ideas? Thx.

I don't know what device you have but you're trying to open ~120 MB
raster in one shot, on mobile device.
The error message is clear to me, you're dealing without of memory issue.

IMHO, it's not a good idea to feed mobile device with images of that
big. Better tile them into smaller pieces, use zoom levels, etc.
GDAL for Windows CE gives you with tools to solve this problem.

Keep in mind that "GDAL for Windows CE" does not mean you can use all
GDAL features on a mobile device the same way as on normal workstation.
There are obvious hardware limitations you can not overcome.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jetelus at centrum.cz  Thu Nov  1 07:06:52 2007
From: jetelus at centrum.cz (jetelus@centrum.cz)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711011138.23752@centrum.cz>
References: 00711010908.11215@centrum.cz> <200711010908.11215@centrum.cz>
	<47299455.20707@loskot.net> <200711011138.23752@centrum.cz>
Message-ID: <200711011206.29151@centrum.cz>

>> Hi, I open and display raster without problems but when I
>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>> this error message using GDAL 1.4.2:
>> 
>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>> \gdalrasterblock.cpp', line 219"
>> (and app crashs)
>> 
>> and this error message using GDAL 1.4.3:
>> 
>> "Out of memory allocating 59765 byte raster cache block."
>> (its little better becasuse app doesnt crash)
>> 
>> RASTER INFO:
>> bpp: 1
>> compression: LZW
>> resolution: 11953 x 10268.
>> file size: 658kB
>> 
>> When I convert this raster to 4 bits per pixel everything
>> is ok and I get no errors but raster file size grows to
>> 1.7MB. Any ideas? Thx.
>
>I don't know what device you have but you're trying to open ~120 MB
>raster in one shot, on mobile device.
>The error message is clear to me, you're dealing without of memory issue.
>
>IMHO, it's not a good idea to feed mobile device with images of that
>big. Better tile them into smaller pieces, use zoom levels, etc.
>GDAL for Windows CE gives you with tools to solve this problem.
>
>Keep in mind that "GDAL for Windows CE" does not mean you can use all
>GDAL features on a mobile device the same way as on normal workstation.
>There are obvious hardware limitations you can not overcome.
>
>Cheers
>-- 
>Mateusz Loskot
>http://mateusz.loskot.net
>

Thank you, I understand but why it works with 4 bpp version of same raster
which is even bigger?


From steve.hagen at unh.edu  Thu Nov  1 09:24:03 2007
From: steve.hagen at unh.edu (Steve Hagen)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] no gdal_rasterize in Ubuntu Gutsy (1.4.1-6build1)?
Message-ID: <loom.20071101T130926-830@post.gmane.org>

Hello, 

I apologize if this query is insultingly basic. Bare with me, as I have just
become my own administrator.

I want to use gdal_rasterize, which I believe became available with 1.3.2, but I
can't find the utility.

Some background:

I am working in Ubuntu Gutsy, on which I've installed the debian package using
sudo apt-get install gdal-bin. I can see the installed files in /usr/bin/ and
elsewhere. I can use gdalinfo, gdalwarp, etc. just fine. But gdal_rasterize is
nowhere to be found.

The changelog.gz file says gdal_rasterize became available with 1.3.2 (a while
back).

So, my question(s):

Where is gdal_rasterize? Is it installed and I'm just missing it?

If its not installed, how can I install it? (I'm a bit afraid of compiling from
source).

Any info would be much appreciated. 

Thanks in advance,

Steve Hagen


From warmerdam at pobox.com  Thu Nov  1 12:22:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] no gdal_rasterize in Ubuntu Gutsy (1.4.1-6build1)?
In-Reply-To: <loom.20071101T130926-830@post.gmane.org>
References: <loom.20071101T130926-830@post.gmane.org>
Message-ID: <4729FD4F.6020808@pobox.com>

Steve Hagen wrote:
> Where is gdal_rasterize? Is it installed and I'm just missing it?

Steve,

I don't know.

 > If its not installed, how can I install it? (I'm a bit afraid of compiling from
> source).

If you were to pull down FWTools for Linux, you could use gdal_rasterize.
Note that FWTools is organized so that it won't interfere with native packages.

   http://fwtools.maptools.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From a.neumann at carto.net  Thu Nov  1 12:34:18 2007
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] gdal 1.4.3: warning with postgis importer when in append
	mode
Message-ID: <24719.193.246.86.39.1193934858.squirrel@webmail.customers.iirc.at>

Hello,

I upgraded from gdal 1.4.2 to gdal 1.4.3

Since the upgrade, I get the following warnings I don't understand:

Warning 1: Unable to detect single-column primary key for
'Gebaeudeadressen__Strassenstueck'. Use default 'ogc_fid'

along for tons of other warnings for every other spatial table in the schema.

I get this warning when using the following command:

ogr2ogr -a_srs "EPSG:21781" -append -update -nln
av.Gebaeudeadressen__Strassenstueck -lco SCHEMA=av -lco DIM=2 -lco
LAUNDER=yes -lco GEOMETRY_NAME=the_geom -f "PostgreSQL" PG:"dbname=mydb
user=myuser password=mypw host=localhost" 198-uster-gds.itf,dm01avzh24.ili
Gebaeudeadressen__Strassenstueck

When looking at the table definition, I have a single-column primary key
called 'ogc_fid', which was generated by gdal itself. So whats wrong with
this primary key that ogr2ogr is complaining?

Thanks for any ideas,

Andreas


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


From mateusz at loskot.net  Thu Nov  1 12:36:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711011206.29151@centrum.cz>
References: 00711010908.11215@centrum.cz> <200711010908.11215@centrum.cz>
	<47299455.20707@loskot.net> <200711011138.23752@centrum.cz>
	<200711011206.29151@centrum.cz>
Message-ID: <54720.84.10.81.30.1193935006.squirrel@loskot.net>


jetelus@centrum.cz wrote:
>>> Hi, I open and display raster without problems but when I
>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>> this error message using GDAL 1.4.2:
>>>
>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>> \gdalrasterblock.cpp', line 219"
>>> (and app crashs)
>>>
>>> and this error message using GDAL 1.4.3:
>>>
>>> "Out of memory allocating 59765 byte raster cache block."
>>> (its little better becasuse app doesnt crash)
>>>
>>> RASTER INFO:
>>> bpp: 1
>>> compression: LZW
>>> resolution: 11953 x 10268.
>>> file size: 658kB
>>>
>>> When I convert this raster to 4 bits per pixel everything
>>> is ok and I get no errors but raster file size grows to
>>> 1.7MB. Any ideas? Thx.
>>
>>I don't know what device you have but you're trying to open ~120 MB
>>raster in one shot, on mobile device.
>>The error message is clear to me, you're dealing without of memory issue.
>>
>>IMHO, it's not a good idea to feed mobile device with images of that
>>big. Better tile them into smaller pieces, use zoom levels, etc.
>>GDAL for Windows CE gives you with tools to solve this problem.
>>
>>Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>GDAL features on a mobile device the same way as on normal workstation.
>>There are obvious hardware limitations you can not overcome.
>>
>>Cheers
>>--
>>Mateusz Loskot
>>http://mateusz.loskot.net
>>
>
> Thank you, I understand but why it works with 4 bpp version of same raster
> which is even bigger?

You wrote that you don't get any errors, but does it mean you can load it
and display?

Perhaps there is a bug, we can not exclude this option :-)
If you want, you can send me your image file and piece of code presenting
what are you doing exactly, then I will be able to investigate the problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Nov  1 13:52:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] gdal 1.4.3: warning with postgis importer when in
	append mode
In-Reply-To: <24719.193.246.86.39.1193934858.squirrel@webmail.customers.iirc.at>
References: <24719.193.246.86.39.1193934858.squirrel@webmail.customers.iirc.at>
Message-ID: <472A1269.4080004@pobox.com>

Andreas Neumann wrote:
> Hello,
> 
> I upgraded from gdal 1.4.2 to gdal 1.4.3
> 
> Since the upgrade, I get the following warnings I don't understand:
> 
> Warning 1: Unable to detect single-column primary key for
> 'Gebaeudeadressen__Strassenstueck'. Use default 'ogc_fid'
> 
> along for tons of other warnings for every other spatial table in the schema.
> 
> I get this warning when using the following command:
> 
> ogr2ogr -a_srs "EPSG:21781" -append -update -nln
> av.Gebaeudeadressen__Strassenstueck -lco SCHEMA=av -lco DIM=2 -lco
> LAUNDER=yes -lco GEOMETRY_NAME=the_geom -f "PostgreSQL" PG:"dbname=mydb
> user=myuser password=mypw host=localhost" 198-uster-gds.itf,dm01avzh24.ili
> Gebaeudeadressen__Strassenstueck
> 
> When looking at the table definition, I have a single-column primary key
> called 'ogc_fid', which was generated by gdal itself. So whats wrong with
> this primary key that ogr2ogr is complaining?

Andreas,

The warning is an unintended side effect of the fix for #1889.  I'll
reopen this as a priority fix for 1.4.4.  In the meantime, you can ignore
these particular warnings.

   http://trac.osgeo.org/gdal/ticket/1889

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From seth at pricepages.org  Thu Nov  1 14:40:39 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <471FCFB1.4070308@loskot.net>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
	<471DE483.9090006@loskot.net>
	<B80CAC72-D235-4312-8E47-60C8DB23FCAE@pricepages.org>
	<471E10C9.6020506@loskot.net>
	<FC8A4F1C-FF9C-4911-8169-AC536F6A0765@pricepages.org>
	<471FCFB1.4070308@loskot.net>
Message-ID: <5CDA1100-DCC9-4E23-A57A-FA24539C8707@pricepages.org>

Thanks for your help. I think I might have a bug for you. Using the  
file I've produced with your hack ('+proj=merc +a=6378137.0  
+b=6378137.0 +nadgrids=@null +wktext +units=m') I was able to produce  
the expected output file.

However, when I attempt to break that output into tiles (using  
'gdalwarp' and the same -t_srs string) the output image is shifted (as  
if we are back in the ellipsoid I think). However, the projection info  
from the file remains identical. I found that removing the 'nadgrids'  
hack produces the expected behavior.

I thought I'd report this bug in case it is, in fact, a bug. Here is  
the output from the command line that demonstrates what I mention  
above. 1_03868.no_srs.tif and 1_03868.srs.tif are images of different  
areas.


$ ./gdalinfo N010W074_x1.merc.tif
Driver: GTiff/GeoTIFFSize is 11651, 11797
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["unnamed ellipse",
         DATUM["unknown",
             SPHEROID["unnamed",6378137,0]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-8237642.318702000193298,1118889.974857999943197)
Pixel Size = (19.109001938546044,-19.108775438247005)
Metadata:
   AREA_OR_POINT=Area
   TIFFTAG_XRESOLUTION=219
   TIFFTAG_YRESOLUTION=222
   TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
Corner Coordinates:
Upper Left  (-8237642.319, 1118889.975) ( 74d 0'0.00"W, 10d 0'0.00"N)
Lower Left  (-8237642.319,  893463.751) ( 74d 0'0.00"W,  8d 0'0.00"N)
Upper Right (-8015003.337, 1118889.975) ( 72d 0'0.00"W, 10d 0'0.00"N)
Lower Right (-8015003.337,  893463.751) ( 72d 0'0.00"W,  8d 0'0.00"N)
Center      (-8126322.828, 1006176.863) ( 73d 0'0.00"W,  9d 0'4.98"N)
Band 1 Block=512x512 Type=Byte, ColorInterp=Red
   Overviews: 3884x3933, 1942x1967, 971x984, 486x492, 243x246, 122x123
Band 2 Block=512x512 Type=Byte, ColorInterp=Green
   Overviews: 3884x3933, 1942x1967, 971x984, 486x492, 243x246, 122x123
Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
   Overviews: 3884x3933, 1942x1967, 971x984, 486x492, 243x246, 122x123

$ ./gdalwarp -of GTiff -ts 256 256 -te -8233185.1903991  
1110477.1468928 -8228293.220589 1115369.1167029 N010W074_x1.merc.tif  
1_03868.no_srs.tifCreating output file that is 256P x 256L.
Processing input file N010W074_x1.merc.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done.

$ ./gdalinfo 1_03868.no_srs.tif
Driver: GTiff/GeoTIFFSize is 256, 256
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["unnamed ellipse",
         DATUM["unknown",
             SPHEROID["unnamed",6378137,0]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-8233185.190399100072682,1115369.116702900035307)
Pixel Size = (19.109257070704189,-19.109257070703279)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-8233185.190, 1115369.117) ( 73d57'35.86"W,  9d58'7.86"N)
Lower Left  (-8233185.190, 1110477.147) ( 73d57'35.86"W,  9d55'32.04"N)
Upper Right (-8228293.221, 1115369.117) ( 73d54'57.66"W,  9d58'7.86"N)
Lower Right (-8228293.221, 1110477.147) ( 73d54'57.66"W,  9d55'32.04"N)
Center      (-8230739.205, 1112923.132) ( 73d56'16.76"W,  9d56'49.95"N)
Band 1 Block=256x32 Type=Byte, ColorInterp=Red
Band 2 Block=256x32 Type=Byte, ColorInterp=Green
Band 3 Block=256x32 Type=Byte, ColorInterp=Blue

$ ./gdalwarp -of GTiff -ts 256 256 -t_srs '+proj=merc +a=6378137.0  
+b=6378137.0 +nadgrids=@null +wktext +units=m' -te -8233185.1903991  
1110477.1468928 -8228293.220589 1115369.1167029 N010W074_x1.merc.tif  
1_03868.srs.tif
Creating output file that is 256P x 256L.
Processing input file N010W074_x1.merc.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done.

$ ./gdalinfo 1_03868.srs.tif
Driver: GTiff/GeoTIFFSize is 256, 256
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["unnamed ellipse",
         DATUM["unknown",
             SPHEROID["unnamed",6378137,0]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-8233185.190399100072682,1115369.116702900035307)
Pixel Size = (19.109257070704189,-19.109257070703279)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-8233185.190, 1115369.117) ( 73d57'35.86"W,  9d58'7.86"N)
Lower Left  (-8233185.190, 1110477.147) ( 73d57'35.86"W,  9d55'32.04"N)
Upper Right (-8228293.221, 1115369.117) ( 73d54'57.66"W,  9d58'7.86"N)
Lower Right (-8228293.221, 1110477.147) ( 73d54'57.66"W,  9d55'32.04"N)
Center      (-8230739.205, 1112923.132) ( 73d56'16.76"W,  9d56'49.95"N)
Band 1 Block=256x32 Type=Byte, ColorInterp=Red
Band 2 Block=256x32 Type=Byte, ColorInterp=Green
Band 3 Block=256x32 Type=Byte, ColorInterp=Blue




On Oct 24, 2007, at 5:05 PM, Mateusz Loskot wrote:

> Seth,
>
>
> I found that your command is wrong.
> The OGR is correct, but you need to use +nadgrids=@null trick to
> overwrite ellipsoid issue.
>
>
> It is well explained in PROJ.4 FAQ:
>
>
> http://proj.maptools.org/faq.html (Changing Ellipsoid...)
>
>
>
>
>
>
>
>
> Seth Price wrote:
>> Sorry if I'm being impatient. Any news on this bug?
>> Thanks,
>> Seth
>>
>>
>> On Oct 23, 2007, at 9:18 AM, Mateusz Loskot wrote:
>>
>>> Seth Price wrote:
>>>> Thanks for the response. Although I don't claim to know what I'm  
>>>> doing,
>>>> I'm trying to define a sphere (not the normal ellipsoid).
>>>
>>> Seth,
>>>
>>> Ah, right. I've missed the b semi-axis parameter.
>>>
>>>> I'm copying
>>>> the instructions from this page, the PROJ.4 parameters are at the  
>>>> bottom
>>>> in the 'Update 4' text:
>>>> http://cfis.savagexi.com/articles/2006/05/03/google-maps-deconstructed
>>>>
>>>> Also, it doesn't make sense that I'm defining the same parameters,
>>>> because if I directly use the proj utility, the output is  
>>>> different:
>>>>
>>>> proj +proj=merc +datum=WGS84 +units=m -r << EOF
>>>> ? 46 -90
>>>> ? EOF
>>>> -10018754.17    5749599.55
>>>>
>>>> proj +proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 +a=6378137.0
>>>> +b=6378137.0 +units=m -r << EOF
>>>> ? 46 -90
>>>> ? EOF
>>>> -10018754.17    5780349.22
>>>>
>>>> I think that gdalwarp is confusing the two commands because the  
>>>> image is
>>>> shifted the same amount as the difference of these two coordinates.
>>>
>>> Yes, your assumptions seem to be correct.
>>>
>>> I've checked the code, and construction of spatial reference system
>>> object (OGRSpatialReference class) ignores your a and b parameters,
>>> recognizes proj=merc name and uses default ellipsoid.
>>> IOW, according to my understanding, handling custom PROJ.4  
>>> definition
>>> that uses standard projection name is not supported.
>>>
>>> Let's wait for Frank's comment.
>>>
>>> Cheers
>>> -- 
>>> Mateusz Loskot
>>> http://mateusz.loskot.net
>>
>>
>
>
>
>
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From seth at pricepages.org  Thu Nov  1 15:15:29 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Error appears in 1.4.3 which wasn't in 1.4.2
Message-ID: <4F58828A-6384-43FF-A086-9450E810ACFD@pricepages.org>

I have another bug for you guys. This seems to have appeared in 1.4.3.  
It seems to be having a problem with my '-dstnodata "0 0 20"' option.  
With the current version, GDAL errors out and produces a 4KB GeoTIFF.  
With v1.4.2, no error is produced and the GeoTIFF is as expected.

Am I doing everything right here?

v1.4.2:
$ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs  
'+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te  
-8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029  
N010W074_x1.merc.tif 1_03868.srs.tif
Creating output file that is 256P x 256L.
Processing input file N010W074_x1.merc.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done.

v1.4.3:
$ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs  
'+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te  
-8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029  
N010W074_x1.merc.tif 1_03868.srs.tif
Creating output file that is 256P x 256L.
Processing input file N010W074_x1.merc.tif.
ERROR 1: Invalid nBandCount or bMaskIsFloat argument in SourceNoDataMask

Thanks,
Seth

From warmerdam at pobox.com  Thu Nov  1 16:40:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Error appears in 1.4.3 which wasn't in 1.4.2
In-Reply-To: <4F58828A-6384-43FF-A086-9450E810ACFD@pricepages.org>
References: <4F58828A-6384-43FF-A086-9450E810ACFD@pricepages.org>
Message-ID: <472A39CB.3090007@pobox.com>

Seth Price wrote:
> I have another bug for you guys. This seems to have appeared in 1.4.3. 
> It seems to be having a problem with my '-dstnodata "0 0 20"' option. 
> With the current version, GDAL errors out and produces a 4KB GeoTIFF. 
> With v1.4.2, no error is produced and the GeoTIFF is as expected.
> 
> Am I doing everything right here?
> 
> v1.4.2:
> $ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs 
> '+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te 
> -8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029 
> N010W074_x1.merc.tif 1_03868.srs.tif
> Creating output file that is 256P x 256L.
> Processing input file N010W074_x1.merc.tif.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> v1.4.3:
> $ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs 
> '+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te 
> -8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029 
> N010W074_x1.merc.tif 1_03868.srs.tif
> Creating output file that is 256P x 256L.
> Processing input file N010W074_x1.merc.tif.
> ERROR 1: Invalid nBandCount or bMaskIsFloat argument in SourceNoDataMask

Seth,

There were some changes with regard to -dstnodata handling which
have apparently had unexpected side effects.  Could you file a
bug report including an input data file (or at least a gdalinfo
report of one) so we can reproduce this?

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From armin.burger at gmx.net  Thu Nov  1 17:16:49 2007
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Esri File geodatabase in GDAL?
Message-ID: <472A4241.50108@gmx.net>

Hi everybody

are there any plans for GDAL-OGR to support the "File geodatabase" of 
Esri in that was introduced in ArcGis 9.2?

Best regards

Armin

From woklist at kyngchaos.com  Thu Nov  1 17:19:31 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] 'make install' and NG Python Bindings
In-Reply-To: <0A4B5935-9774-445F-A943-AE88B52AE576@gmail.com>
References: <0A4B5935-9774-445F-A943-AE88B52AE576@gmail.com>
Message-ID: <56BAD559-372B-4549-BC38-F38805F4F511@kyngchaos.com>

Finally got thru the Leopard build.  The swig python scripts are not  
installed at all. From what I see in the makefile, the script install  
is trapped inside the itest target, which isn't referenced anywhere:

itest:
	echo $(SCRIPTS)
	for f in $(SCRIPTS) ; do $(INSTALL) ./scripts/$$f $(DESTDIR)$ 
(INST_BIN) ; done


On Oct 31, 2007, at 11:10 PM, Howard Butler wrote:

> Chris and William (and others following along),
>
> I updated the 'make install' target of ./swig/python/GNUMakefile to  
> install the contents of ./swig/scripts in prefix/bin, like the GDAL/ 
> OGR apps, etc.  Please add to http://trac.osgeo.org/gdal/ticket/1962  
> if any issues arise or I did something dumb.
>
> People seem to prefer the 'make install' approach of manually  
> copying things as we did in the past, but I'm wondering if we don't  
> also want to add "scripts" support to the setuptools side of the  
> bindings and *also* install them that way.  The only significant  
> advantage is someone getting stuff from the cheeseshop would also  
> get the utilities.
>
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From hobu.inc at gmail.com  Thu Nov  1 17:21:48 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] 'make install' and NG Python Bindings
In-Reply-To: <56BAD559-372B-4549-BC38-F38805F4F511@kyngchaos.com>
References: <0A4B5935-9774-445F-A943-AE88B52AE576@gmail.com>
	<56BAD559-372B-4549-BC38-F38805F4F511@kyngchaos.com>
Message-ID: <1B45856E-474C-4E8C-AB4F-97AA1612D333@gmail.com>

Missed a commit.  Should be there now...

Howard

On Nov 1, 2007, at 4:19 PM, William Kyngesburye wrote:

> Finally got thru the Leopard build.  The swig python scripts are  
> not installed at all. From what I see in the makefile, the script  
> install is trapped inside the itest target, which isn't referenced  
> anywhere:
>
> itest:
> 	echo $(SCRIPTS)
> 	for f in $(SCRIPTS) ; do $(INSTALL) ./scripts/$$f $(DESTDIR)$ 
> (INST_BIN) ; done
>
>
> On Oct 31, 2007, at 11:10 PM, Howard Butler wrote:
>
>> Chris and William (and others following along),
>>
>> I updated the 'make install' target of ./swig/python/GNUMakefile  
>> to install the contents of ./swig/scripts in prefix/bin, like the  
>> GDAL/OGR apps, etc.  Please add to http://trac.osgeo.org/gdal/ 
>> ticket/1962 if any issues arise or I did something dumb.
>>
>> People seem to prefer the 'make install' approach of manually  
>> copying things as we did in the past, but I'm wondering if we  
>> don't also want to add "scripts" support to the setuptools side of  
>> the bindings and *also* install them that way.  The only  
>> significant advantage is someone getting stuff from the cheeseshop  
>> would also get the utilities.
>>
>> Howard
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Earth: "Mostly harmless"
>
> - revised entry in the HitchHiker's Guide to the Galaxy
>
>


From warmerdam at pobox.com  Thu Nov  1 18:47:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Esri File geodatabase in GDAL?
In-Reply-To: <472A4241.50108@gmx.net>
References: <472A4241.50108@gmx.net>
Message-ID: <472A576E.8040400@pobox.com>

Armin Burger wrote:
> Hi everybody
> 
> are there any plans for GDAL-OGR to support the "File geodatabase" of 
> Esri in that was introduced in ArcGis 9.2?

Armin,

ESRI has indicated that the File Geodatabase will have an "Open API" but
I haven't seen any clear explanation of what that means and the folks at
ESRI I spoke to about it some months ago indicated they hadn't really
decided yet.  When that is worked out and published, I'd like to have
it implemented though doing a good job would likely require some funding.

I'd add I don't think it will be practical to reverse engineer the format,
under the assumption it will be quite complicated, but given sufficient
funding that might also be a possibility.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From desch-mosher at lanl.gov  Thu Nov  1 17:57:48 2007
From: desch-mosher at lanl.gov (Diana Esch-Mosher)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems building on redhat enterprise
Message-ID: <472A4BDC.6000102@lanl.gov>

I cannot compile on redhat enterprise 4 or 5. I get the following error:

In file included from ogrutils.cpp:37:
ogrsf_frmts/ogrsf_frmts.h: In member function `void
OGRLayer::SetStyleTable(OGRStyleTable*)':
ogrsf_frmts/ogrsf_frmts.h:107: error: 'class OGRStyleTable' has no
member named 'Clone'
ogrsf_frmts/ogrsf_frmts.h: In member function `void
OGRDataSource::SetStyleTable(OGRStyleTable*)':
ogrsf_frmts/ogrsf_frmts.h:187: error: 'class OGRStyleTable' has no
member named 'Clone'
make[1]: *** [ogrutils.o] Error 1
make[1]: Leaving directory `/a/toaster-
g3.lanl.gov/vol/home/u/harve/src/gdal-1.4.2/ogr'
make: *** [ogr-target] Error 2


When it does compile on 3 it seg faults on something simple like gdalinfo in a tif file. I traced the problem with gdalinfo down the GDALOpen call and in there to opening the first driver. I have configured with everything I can to be internal. Needing to get past this and get some work done .... can anyone give me hint what could be going wrong. 

Thanks,

Diana Esch-Mosher




From woklist at kyngchaos.com  Thu Nov  1 18:16:41 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] 'make install' and NG Python Bindings
In-Reply-To: <1B45856E-474C-4E8C-AB4F-97AA1612D333@gmail.com>
References: <0A4B5935-9774-445F-A943-AE88B52AE576@gmail.com>
	<56BAD559-372B-4549-BC38-F38805F4F511@kyngchaos.com>
	<1B45856E-474C-4E8C-AB4F-97AA1612D333@gmail.com>
Message-ID: <ACF0FE40-4ED8-4C69-BFC9-1BE097328D77@kyngchaos.com>

Works now.  (Sorry, I reopened the bug earlier for this.)

On Nov 1, 2007, at 4:21 PM, Howard Butler wrote:

> Missed a commit.  Should be there now...
>
> Howard
>
> On Nov 1, 2007, at 4:19 PM, William Kyngesburye wrote:
>
>> Finally got thru the Leopard build.  The swig python scripts are  
>> not installed at all. From what I see in the makefile, the script  
>> install is trapped inside the itest target, which isn't referenced  
>> anywhere:
>>
>> itest:
>> 	echo $(SCRIPTS)
>> 	for f in $(SCRIPTS) ; do $(INSTALL) ./scripts/$$f $(DESTDIR)$ 
>> (INST_BIN) ; done
>>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From matt.wilkie at gov.yk.ca  Thu Nov  1 19:58:41 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Esri File geodatabase in GDAL?
In-Reply-To: <472A576E.8040400@pobox.com>
References: <472A4241.50108@gmx.net> <472A576E.8040400@pobox.com>
Message-ID: <472A6831.1060409@gov.yk.ca>

> ESRI has indicated that the File Geodatabase will have an "Open API" but
> I haven't seen any clear explanation of what that means and the folks at
> ESRI I spoke to about it some months ago indicated they hadn't really
> decided yet.  When that is worked out and published, I'd like to have
> it implemented though doing a good job would likely require some funding.

Word from this year's ESRI International User Conference is that the api 
will be published sometime after ArcGIS 9.3 is released. When is 9.3 
then? "We are still in the development phase but we expect to be in beta 
later this year with a release in mid 2008." This tells me we're looking 
at a year or more before we see the API.

Q&A from this year's UC can be fetched from http://tinyurl.com/22coph
The following is "What are ESRI?s plans for opening up access to the 
geodatabase?"

<quote>
ESRI will provide full and open access to the geodatabase using the 
following methods:

     * A free and open API to the file geodatabase. * The file 
geodatabase was introduced at ArcGIS 9.2. While ESRI would ideally like 
to open the file geodatabase format in a manner similar to what we did 
for shapefiles when we released ArcView 2, geodatabases are complex and 
can be easily corrupted outside the ArcGIS environment. Instead, we plan 
to engineer a high performing and well documented API that developers 
can freely embed in custom applications and that will read and write 
file geodatabase datasets. This will be released after ArcGIS 9.3.

     * Geodatabase GML. ESRI will release a full geodatabase GML schema 
with ArcGIS 9.3. This profile will be based on the OGC specifications 
and built on the simple feature GML specification adopted by OGC this 
past year.
</quote>

I'm just speculating here, but the words "engineer a high performing 
...API" make me think they are working out how to have some software act 
as intermediary between applications using the api (like gdal-ogr) and 
the fgdb itself. If this is so this will not be shapefiles writ large 
and reborn and there will still be significant limitations on who can 
use it and where.

Until the api is officially out though it is just a guessing game. No 
one knows yet what kind of "open" ESRI means, and personally I think 
they themselves aren't sure yet either. I certainly never expected to 
see GDAL actually officially embedded in 9.2, so who knows?

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu Nov  1 21:48:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems building on redhat enterprise
In-Reply-To: <472A4BDC.6000102@lanl.gov>
References: <472A4BDC.6000102@lanl.gov>
Message-ID: <472A81F7.3080102@pobox.com>

Diana Esch-Mosher wrote:
> I cannot compile on redhat enterprise 4 or 5. I get the following error:
> 
> In file included from ogrutils.cpp:37:
> ogrsf_frmts/ogrsf_frmts.h: In member function `void
> OGRLayer::SetStyleTable(OGRStyleTable*)':
> ogrsf_frmts/ogrsf_frmts.h:107: error: 'class OGRStyleTable' has no
> member named 'Clone'
> ogrsf_frmts/ogrsf_frmts.h: In member function `void
> OGRDataSource::SetStyleTable(OGRStyleTable*)':
> ogrsf_frmts/ogrsf_frmts.h:187: error: 'class OGRStyleTable' has no
> member named 'Clone'
> make[1]: *** [ogrutils.o] Error 1
> make[1]: Leaving directory `/a/toaster-
> g3.lanl.gov/vol/home/u/harve/src/gdal-1.4.2/ogr'
> make: *** [ogr-target] Error 2
> 
> 
> When it does compile on 3 it seg faults on something simple like 
> gdalinfo in a tif file. I traced the problem with gdalinfo down the 
> GDALOpen call and in there to opening the first driver. I have 
> configured with everything I can to be internal. Needing to get past 
> this and get some work done .... can anyone give me hint what could be 
> going wrong.
> Thanks,

Diana,

I *suspect* older include files are getting picked up somehow.  Is this
GDAL/OGR 1.4.3?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Thu Nov  1 21:38:46 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
Message-ID: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>

I got GDAL mostly set for 64bits on OSX 10.5.

Missing:

Xerces - no 64bit Carbon, no 64bit Xerces.
MrSID - probably won't be a 64bit build for a wile
GRASS - haven't got that far yet

An odd one: python.  Apple's python is whacked.  The library is 64bit,  
but the executable is not, so there is no way to actually run any  
python scripts in 64bits.

Testing: since python doesn't run 64bits, I could only do the  
autotests in 32bits.  Some problems, but mostly OK:


Running tests from ogr/ogr_dods.py
   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
fail

I've never got this one to connect.  Other dap tests also fail with

I/O warning : failed to load external entity "data/ais.xml"


Running tests from ogr/ogr_join_test.py
   TEST: ogr_join_1 ... swig/python detected a memory leak of type  
'OGRLayerShadow *', no destructor found.


Running tests from gcore/tiff_ovr.py
   TEST: tiff_ovr_1 ... Warning 1: File open for read-only accessing,  
creating overviews externally.
ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as  
"SubfileType"
ERROR 1: _TIFFSetupFields:Setting up field info failed
ERROR 1: TIFFSetField:tmp/mfloat32.tif.ovr: Unknown tag 259
ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as  
"SubfileType"
ERROR 1: _TIFFSetupFields:Setting up field info failed
ERROR 1: TIFFSetField:tmp/mfloat32.tif.ovr: Unknown tag 259
fail
     Overview missing on target file.
   TEST: tiff_ovr_2 ... fail
     overviews missing after re-open?
   TEST: tiff_ovr_3 ... ERROR 1: _TIFFMergeFields:Field with tag 254  
is already registered as "SubfileType"
ERROR 1: _TIFFSetupFields:Setting up field info failed
ERROR 1: TIFFSetField:tmp/mfloat32.tif: Unknown tag 259
ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as  
"SubfileType"
ERROR 1: _TIFFSetupFields:Setting up field info failed
ERROR 1: TIFFSetField:tmp/mfloat32.tif: Unknown tag 259
success
   TEST: tiff_ovr_cleanup ... success

Haven't seen this one before.  Libtiff version 4.0 alpha.


   TEST: tiff_write_4 ... skip

huh?


Running tests from gdrivers/gdalhttp.py
   TEST: http_1 ... I/O warning : failed to load external entity "data/ 
ais.xml"
ERROR 1: An error occurred while creating a virtual connection to the  
DAP server:
Error while reading the URL: http://home.gdal.org/~warmerda/frank.gif.ver 
.
The OPeNDAP server returned the following message:
Not Found: The data source or server could not be found.
         Often this means that the OPeNDAP server is missing or needs  
attention;
         Please contact the server administrator.
fail
     Failed to open dataset: http://home.gdal.org/~warmerda/frank.gif

Is this down, Frank?


Running tests from gdrivers/mem.py
   TEST: mem_1 ... success
   TEST: mem_2 ... skip
   TEST: mem_cleanup ... success

huh?


I'll try running gdal commands later - they should run in 64bits.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a  
bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From woklist at kyngchaos.com  Thu Nov  1 21:51:26 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
Message-ID: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>

In trying to figure out how to simplify the OSX framework build so  
that the ngpython will work with it, it looks like libtool is simply  
getting in the way - it can't make a library file with a 'lib' prefix  
and '.dylib' extension.  And without knowing the exact path to the  
built python or installed python gdal libs (they're controlled by  
distutils/setuptools), there is no way to to postprocess them into  
framework binaries.  I can hack libtool to generate the correct  
library binary right away, but it doesn't look like this is  
configurable for libtool.

One possibility is for configure to somehow get from python the exact  
install path and store it in gdalmake.opt.

My other thought is to use the ldshared build, where we have complete  
control over the compile and link commands configurations and build  
the binary correct from the start.  then the python libs link  
correctly and no post-processing is needed.  Currently, it looks like  
the ldshared build is taylored to linux only.  I recall hearing some  
time ago that it wasn't really being maintained?


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan



From warmerdam at pobox.com  Fri Nov  2 00:38:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
In-Reply-To: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
References: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
Message-ID: <472AA9DD.5070909@pobox.com>

William Kyngesburye wrote:
> Running tests from ogr/ogr_dods.py
>   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
> fail
> 
> I've never got this one to connect.  Other dap tests also fail with
> 
> I/O warning : failed to load external entity "data/ais.xml"

William,

I woldn't worry about the DODS tests.

> Running tests from ogr/ogr_join_test.py
>   TEST: ogr_join_1 ... swig/python detected a memory leak of type 
> 'OGRLayerShadow *', no destructor found.

Funky.  I've never seen anything like this before, but perhaps I'm
not watching closely enough.

Hmm, I'll be darned.  That happens to me too! I've just noticed it before.

> Running tests from gcore/tiff_ovr.py
>   TEST: tiff_ovr_1 ... Warning 1: File open for read-only accessing, 
> creating overviews externally.
> ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as 
> "SubfileType"
> ERROR 1: _TIFFSetupFields:Setting up field info failed
> ERROR 1: TIFFSetField:tmp/mfloat32.tif.ovr: Unknown tag 259
> ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as 
> "SubfileType"
> ERROR 1: _TIFFSetupFields:Setting up field info failed
> ERROR 1: TIFFSetField:tmp/mfloat32.tif.ovr: Unknown tag 259
> fail
>     Overview missing on target file.
>   TEST: tiff_ovr_2 ... fail
>     overviews missing after re-open?
>   TEST: tiff_ovr_3 ... ERROR 1: _TIFFMergeFields:Field with tag 254 is 
> already registered as "SubfileType"
> ERROR 1: _TIFFSetupFields:Setting up field info failed
> ERROR 1: TIFFSetField:tmp/mfloat32.tif: Unknown tag 259
> ERROR 1: _TIFFMergeFields:Field with tag 254 is already registered as 
> "SubfileType"
> ERROR 1: _TIFFSetupFields:Setting up field info failed
> ERROR 1: TIFFSetField:tmp/mfloat32.tif: Unknown tag 259
> success
>   TEST: tiff_ovr_cleanup ... success
> 
> Haven't seen this one before.  Libtiff version 4.0 alpha.

I would suggest grabbing libtiff from CVS head.  This is a known
problem in libtiff4 alpha.

>   TEST: tiff_write_4 ... skip
> 
> huh?

This test depends on numpy.

> Running tests from gdrivers/gdalhttp.py
>   TEST: http_1 ... I/O warning : failed to load external entity 
> "data/ais.xml"
> ERROR 1: An error occurred while creating a virtual connection to the 
> DAP server:
> Error while reading the URL: http://home.gdal.org/~warmerda/frank.gif.ver.
> The OPeNDAP server returned the following message:
> Not Found: The data source or server could not be found.
>         Often this means that the OPeNDAP server is missing or needs 
> attention;
>         Please contact the server administrator.
> fail
>     Failed to open dataset: http://home.gdal.org/~warmerda/frank.gif
> 
> Is this down, Frank?

home.gdal.org/~warmerda/frank.gif is available.  But it seems the
http url is being addressed first by the DODS driver instead of the
http driver.  I seldom build with DODS these days.

> Running tests from gdrivers/mem.py
>   TEST: mem_1 ... success
>   TEST: mem_2 ... skip
>   TEST: mem_cleanup ... success
> 
> huh?

mem_2 depends on some stuff in the old python bindings and is
skipped with the new bindings.

Good work on the build!  This 32/64 intel/ppc universal binary
stuff just breaks my brain.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Fri Nov  2 00:05:45 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
In-Reply-To: <472AA9DD.5070909@pobox.com>
References: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
	<472AA9DD.5070909@pobox.com>
Message-ID: <B2AE8E81-8DE6-48F6-97F2-8661CADA5276@kyngchaos.com>

On Nov 1, 2007, at 11:38 PM, Frank Warmerdam wrote:

>> Haven't seen this one before.  Libtiff version 4.0 alpha.
>
> I would suggest grabbing libtiff from CVS head.  This is a known
> problem in libtiff4 alpha.
>
I did that once as a test.  Sounds like I should build it for real,  
then.

>>  TEST: tiff_write_4 ... skip
>> huh?
>
> This test depends on numpy.
>
Odd, I thought it built with numpy.  I'll look into it.

>> Running tests from gdrivers/gdalhttp.py
>>  TEST: http_1 ... I/O warning : failed to load external entity  
>> "data/ais.xml"
>> ERROR 1: An error occurred while creating a virtual connection to  
>> the DAP server:
>> Error while reading the URL: http://home.gdal.org/~warmerda/frank.gif.ver 
>> .
>> The OPeNDAP server returned the following message:
>> Not Found: The data source or server could not be found.
>>        Often this means that the OPeNDAP server is missing or needs  
>> attention;
>>        Please contact the server administrator.
>> fail
>>    Failed to open dataset: http://home.gdal.org/~warmerda/frank.gif
>> Is this down, Frank?
>
> home.gdal.org/~warmerda/frank.gif is available.  But it seems the
> http url is being addressed first by the DODS driver instead of the
> http driver.  I seldom build with DODS these days.
>
Sounds like a similar problem with the ordering of [I can't remember  
which drivers].  Ultimately you added an extra check in one driver so  
that it would better decide if it was the right one.


>> Running tests from gdrivers/mem.py
>>  TEST: mem_1 ... success
>>  TEST: mem_2 ... skip
>>  TEST: mem_cleanup ... success
>> huh?
>
> mem_2 depends on some stuff in the old python bindings and is
> skipped with the new bindings.
>
OK

> Good work on the build!  This 32/64 intel/ppc universal binary
> stuff just breaks my brain.
>
My brain's ready to burst ^_^

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the  
past isn't a fiction designed to account for the discrepancy between  
my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From Chris.Barker at noaa.gov  Fri Nov  2 01:11:02 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
Message-ID: <472AB166.5070403@noaa.gov>

First,

Thanks for all this OS-X work William!


> it looks like libtool is simply getting 
> in the way - it can't make a library file with a 'lib' prefix and 
> '.dylib' extension. 

It sounds likethe OS-X port of libtool is broken and/or incomplete -- 
are the libtool developers open to fixing this kind of stuff?

I don't have my OS-X box in front of me, but is the lib* convention not 
usually used with *.dylib? (ie,. it's either the old *nix lib*.so or 
just *.dylib)

Anyway, I'm pretty sure I've seen python extensions built against 
*.dylibs before -- why do we need the lib*.dylib convention?


> And without knowing the exact path to the built 
> python or installed python gdal libs (they're controlled by 
> distutils/setuptools), there is no way to to postprocess them into 
> framework binaries.

Now I'm confused -- isn't the goal here to build a GDAL Framework that 
the python extensions can use? In which case it seems you'd need to hack 
  the GDAL framework, not the python install.

Anyway, if you sue the python that you're running setup.py with, you 
should be able to use it to figure out the path to the python 
installation (or could you hack it before installing, in which case, 
it's in the build dir that distutils creates)

I wonder if some of the complication is coming from the order that we're 
using to do things -- if we did:

build GDAL
install GDAL lib (framework on OS-X)
build python extensions (using installed GDAL)
install python extensions

would that work better? I guess I've see this kind of thing done two ways:

Either the lib is there just to support the python extensions (like 
PIL), in which case it is built, then the extensions built, then the 
whole shebang installed in site-packages

Or the lib exists outside of python, and you want to use in in 
non-python tools (that would be GDAL) -- in that case, it's usually 
built and installed separately.

Then there's a third case -- like wxPython -- wx is used by other, 
non-python apps, but wxPython needs a specific build, so it's usually 
built and installed alongside the extension, not in a central location. 
However, the lib is still built and installed before building the python 
lib.

> One possibility is for configure to somehow get from python the exact 
> install path and store it in gdalmake.opt.

I'd think there'd be some way to query distutils for this. This looks 
like it:

 >>> distutils.sysconfig.get_python_lib()
'/usr/lib/python2.5/site-packages'

> My other thought is to use the ldshared build, where we have complete 
> control over the compile and link commands configurations and build the 
> binary correct from the start.  then the python libs link correctly and 
> no post-processing is needed.  Currently, it looks like the ldshared 
> build is taylored to linux only.  I recall hearing some time ago that it 
> wasn't really being maintained?

I presume that libtool has been adopted for a good reason, but I'll let 
someone who knows comment on that. It does seem like a bad ides to try 
to maintain multiple systems.

Howard Butler wrote:
> People seem to prefer the 'make install' approach of manually copying 
> things as we did in the past,

What's the difference? the scripts are useless without the python 
bindings, so It makes more sense to me to have distutils install them 
(or is it hard to get them in the right place that way?)

Given what's going on with the issues on OS-X, I'm feeling more and more 
like I'd rather the python extensions, and accompanying scripts, were 
separately built and installed with distutils/setuptools, and stop 
trying to integrate it into one make && make install step.

Is this to save a couple lines of typing?

In any case it would be nice to have the option of building separately? 
I haven't tried it, but is it as easy as just using without-python in 
.configure, then running setup.py after building and installing GDAL?

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Fri Nov  2 02:11:56 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <472AB166.5070403@noaa.gov>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
Message-ID: <472ABFAC.4050201@noaa.gov>

Christopher Barker wrote:
> but is it as easy as just using without-python in 
> .configure, then running setup.py after building and installing GDAL?

I just tried it (on Kubuntu Linux 7.10), and it appeared to build and 
install OK, but I'm getting:

 >>> import osgeo.gdal
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "osgeo/gdal.py", line 51, in <module>
     from gdalconst import *
   File "osgeo/gdalconst.py", line 123, in <module>
     GFT_Integer = _gdalconst.GFT_Integer
AttributeError: 'module' object has no attribute 'GFT_Integer'

(SVN head)

look familiar? I'm going to bed -- maybe I'll be able to poke into this 
more tomorrow

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Fri Nov  2 09:53:48 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <472AB166.5070403@noaa.gov>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
Message-ID: <F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>

This is all about the linking process to generate the GDAL framework  
binary, not it's usage...

On Nov 2, 2007, at 12:11 AM, Christopher Barker wrote:

> First,
>
> Thanks for all this OS-X work William!
>
>
>> it looks like libtool is simply getting in the way - it can't make  
>> a library file with a 'lib' prefix and '.dylib' extension.
>
> It sounds likethe OS-X port of libtool is broken and/or incomplete  
> -- are the libtool developers open to fixing this kind of stuff?
>
> I don't have my OS-X box in front of me, but is the lib* convention  
> not usually used with *.dylib? (ie,. it's either the old *nix  
> lib*.so or just *.dylib)
>
> Anyway, I'm pretty sure I've seen python extensions built against  
> *.dylibs before -- why do we need the lib*.dylib convention?
>
Libtool is not "broken", it just doesn't have the ability to directly  
create a binary of the framework style - no 'lib', no '.dylib'.  So  
the current GDAL makefile lets libtool do its thing, then renames it  
and changes its internal link path during installation.

>
>> And without knowing the exact path to the built python or installed  
>> python gdal libs (they're controlled by distutils/setuptools),  
>> there is no way to to postprocess them into framework binaries.
...
> I wonder if some of the complication is coming from the order that  
> we're using to do things -- if we did:
>
> build GDAL
> install GDAL lib (framework on OS-X)
> build python extensions (using installed GDAL)
> install python extensions
>
> would that work better? I guess I've see this kind of thing done two  
> ways:
>
Yes, that is a possibility.  But the current GDAL python setup.py  
doesn't work that way - it looks for the source-built copy of libgdal.

>> One possibility is for configure to somehow get from python the  
>> exact install path and store it in gdalmake.opt.
>
> I'd think there'd be some way to query distutils for this. This  
> looks like it:
>
> >>> distutils.sysconfig.get_python_lib()
> '/usr/lib/python2.5/site-packages'
>
That's a good possibility, and what I was looking for.  I'm just not  
up to speed yet on Python ;)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From ivan.lucena at pmldnet.com  Fri Nov  2 12:25:44 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Esri File geodatabase in GDAL?
In-Reply-To: <472A576E.8040400@pobox.com>
References: <472A4241.50108@gmx.net> <472A576E.8040400@pobox.com>
Message-ID: <472B4F88.3030706@pmldnet.com>

Frank, Armin,

Another alternative is to call ArcObject API from the GDAL and OGR "File 
Geodatabase" drivers. That will restrict it to work only in licensed 
environment, but it should work.

Best regards,

Ivan

Frank Warmerdam wrote:
> Armin Burger wrote:
>> Hi everybody
>>
>> are there any plans for GDAL-OGR to support the "File geodatabase" of 
>> Esri in that was introduced in ArcGis 9.2?
> 
> Armin,
> 
> ESRI has indicated that the File Geodatabase will have an "Open API" but
> I haven't seen any clear explanation of what that means and the folks at
> ESRI I spoke to about it some months ago indicated they hadn't really
> decided yet.  When that is worked out and published, I'd like to have
> it implemented though doing a good job would likely require some funding.
> 
> I'd add I don't think it will be practical to reverse engineer the format,
> under the assumption it will be quite complicated, but given sufficient
> funding that might also be a possibility.
> 
> Best regards,

From 2voodoo at gmx.de  Fri Nov  2 13:17:53 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Can't Read CCITTFAX 4 TIFs
Message-ID: <472B5BC1.9030603@gmx.de>

Hi there,

I am using GDAL 1.4.3 and esp. GeoTiff for reading and displaying
GeoTiffs on Windows CE.
I successfully managed it to display GeoTiff Files that are LZW
compressed - other formats seem not to work.
The error message I get when trying to load CCITTFax (3 or 4 - both do
not work) compressed images is:

GetBlockRef failed at X block offset 0, Y block offset 0

RasterIO still returns 0 (so it seems as there occured no error - but
CPLGetLastErrorMsg() returns the message above.)
gdalinfo returns for the working image:

Driver: GTiff/GeoTIFF
Size is 62, 68
Coordinate System is `'
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   68.0)
Upper Right (   62.0,    0.0)
Lower Right (   62.0,   68.0)
Center      (   31.0,   34.0)
Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
  Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 128,255,0,255
    1: 251,13,0,255

For the same image (just compressed with CCITTFax4 - and black/white
colors) it returns:
Driver: GTiff/GeoTIFF
Size is 62, 68
Coordinate System is `'
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   68.0)
Upper Right (   62.0,    0.0)
Lower Right (   62.0,   68.0)
Center      (   31.0,   34.0)
Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
  Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255


Everything is identical, but the the compression tag.
Do you have any hint what might have gone wrong?

Thanks in advance,
Tom


From woklist at kyngchaos.com  Fri Nov  2 13:17:42 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
In-Reply-To: <472AA9DD.5070909@pobox.com>
References: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
	<472AA9DD.5070909@pobox.com>
Message-ID: <DC83E4CE-834B-47E3-92E0-68E70F4A7DCE@kyngchaos.com>

On Nov 1, 2007, at 11:38 PM, Frank Warmerdam wrote:

> William Kyngesburye wrote:
>> Running tests from ogr/ogr_dods.py
>>  TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
>> fail
>> I've never got this one to connect.  Other dap tests also fail with
>> I/O warning : failed to load external entity "data/ais.xml"
>
> William,
>
> I woldn't worry about the DODS tests.

Is there a way to skip tests in the autotests, apart from removing  
their python script?  Or could this feature be added (is there a bug  
trac for autotests?)?  The dods test takes a while to timeout, so it's  
a bit annoying.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From warmerdam at pobox.com  Fri Nov  2 13:31:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
In-Reply-To: <DC83E4CE-834B-47E3-92E0-68E70F4A7DCE@kyngchaos.com>
References: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
	<472AA9DD.5070909@pobox.com>
	<DC83E4CE-834B-47E3-92E0-68E70F4A7DCE@kyngchaos.com>
Message-ID: <472B5F01.7020009@pobox.com>

William Kyngesburye wrote:
> On Nov 1, 2007, at 11:38 PM, Frank Warmerdam wrote:
> 
>> William Kyngesburye wrote:
>>> Running tests from ogr/ogr_dods.py
>>>  TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
>>> fail
>>> I've never got this one to connect.  Other dap tests also fail with
>>> I/O warning : failed to load external entity "data/ais.xml"
>>
>> William,
>>
>> I woldn't worry about the DODS tests.
> 
> Is there a way to skip tests in the autotests, apart from removing their 
> python script?  Or could this feature be added (is there a bug trac for 
> autotests?)?  The dods test takes a while to timeout, so it's a bit 
> annoying.

William,

I normally just remove the scripts I don't want to run, but of course then
they pop back next time I do a checkout.  There is a GDAL Trac "Category"
for autotest stuff, so feel to file a ticket on this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Fri Nov  2 13:28:44 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] First Leopard build results for GDAL 1.5
In-Reply-To: <B2AE8E81-8DE6-48F6-97F2-8661CADA5276@kyngchaos.com>
References: <A14A9E2F-24D4-48A6-B20C-D7342D3D1D92@kyngchaos.com>
	<472AA9DD.5070909@pobox.com>
	<B2AE8E81-8DE6-48F6-97F2-8661CADA5276@kyngchaos.com>
Message-ID: <7F855972-E5BB-4E6C-A81B-ED8E137F845B@kyngchaos.com>

On Nov 1, 2007, at 11:05 PM, William Kyngesburye wrote:

>>> TEST: tiff_write_4 ... skip
>>> huh?
>>
>> This test depends on numpy.
>>
> Odd, I thought it built with numpy.  I'll look into it.

Yes, it did build with numpy.  But in tiff_write.py, I see that it is  
importing gdalnumeric (from the old python bindings), not the new  
gdal_array.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.



From Chris.Barker at noaa.gov  Fri Nov  2 15:42:54 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
	<F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>
Message-ID: <472B7DBE.5020902@noaa.gov>

William Kyngesburye wrote:
>> It sounds likethe OS-X port of libtool is broken and/or incomplete -- 
>> are the libtool developers open to fixing this kind of stuff?

> Libtool is not "broken", it just doesn't have the ability to directly 
> create a binary of the framework style

I did say "or incomplete". Anyway, my point was that, according to the 
libtool web page, the goal of libtool is to provide one interface to 
building and installing shared libs. IN order to support OS-X, it should 
be able to build standard Frameworks, so I was wondering if the libtool 
devs are open to adding this functionality.

My other question is: are you trying to build what Apple could consider 
a "standard" framework, or something that's a mixture of regular old 
libs and a Framework?

> So the 
> current GDAL makefile lets libtool do its thing, then renames it and 
> changes its internal link path during installation.

OK, so I'm still confused as to why you need to hand-alter (or makefile 
alter) anything in the python package -- aren't all the changes needed 
in the GDAL Framework?

In my case, it looked like the python extension was looking for:

/Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib

where there already is:
/Library/Frameworks/GDAL.framework/Versions/1.5/GDAL
and:
/Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/libgdal.dylib

I know it's kludgy, but couldn't we put yet another link in to what 
python is looking for? The right way, I suppose, is to get it to look in:

/Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/

But I'm still confused as to how that path is being set.

Maybe this is it, from setup.py:

     libraries = ['gdal']
     library_dirs = ['../../.libs','../..']
     extra_link_args = []

That's how it finds the libs when it's building, but how does it know to 
look in the Framework when installed?

>> build GDAL
>> install GDAL lib (framework on OS-X)
>> build python extensions (using installed GDAL)
>> install python extensions
>>
>> would that work better?

> Yes, that is a possibility.  But the current GDAL python setup.py 
> doesn't work that way - it looks for the source-built copy of libgdal.

This just seems odd to me, and I'm surprised it isn't causing problems 
on other platforms. I guess it comes down to the idea of what are shared 
libs for? I think they are for, well, sharing the same libs among 
various programs, in this case, the various gdal utilities, anything 
built to use gdal, and the various language extensions.

In this case, it seems the normal route is to install the shared libs, 
then build the stuff that depends on them. I think that would work 
better in this case, and I think all it would take to build that way is 
to put something in the setup.py like:

extra_link_args=['-framework', 'GDAL']

I'll poke into this some more, if you like.


>> >>> distutils.sysconfig.get_python_lib()
>> '/usr/lib/python2.5/site-packages'
>>
> That's a good possibility, and what I was looking for.  I'm just not up 
> to speed yet on Python ;)

It took me a while to find it.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Fri Nov  2 17:03:20 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <472B7DBE.5020902@noaa.gov>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
	<F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>
	<472B7DBE.5020902@noaa.gov>
Message-ID: <F63DDA14-F8E3-499A-BB5C-22F79FE3DE16@kyngchaos.com>

On Nov 2, 2007, at 2:42 PM, Christopher Barker wrote:

> William Kyngesburye wrote:
>>> It sounds likethe OS-X port of libtool is broken and/or incomplete  
>>> -- are the libtool developers open to fixing this kind of stuff?
>
>> Libtool is not "broken", it just doesn't have the ability to  
>> directly create a binary of the framework style
>
> I did say "or incomplete". Anyway, my point was that, according to  
> the libtool web page, the goal of libtool is to provide one  
> interface to building and installing shared libs. IN order to  
> support OS-X, it should be able to build standard Frameworks, so I  
> was wondering if the libtool devs are open to adding this  
> functionality.
>
I don't follow libtool development.  Since OSX has been around for a  
while, and libtool has been thru many versions since, and I don't see  
support in the 2.x development, I doubt it will happen.  The future  
directions page on the libtool site doesn't mention anything about  
frameworks.

> My other question is: are you trying to build what Apple could  
> consider a "standard" framework, or something that's a mixture of  
> regular old libs and a Framework?
>
The end product is a normal framework.  But even Apple uses the  
"mixed" type - see the OpenGL framework, which includes libGL and  
libGLU as separate library files.  But they don't recommend others  
doing that (though I did for a while).

>> So the current GDAL makefile lets libtool do its thing, then  
>> renames it and changes its internal link path during installation.
>
> OK, so I'm still confused as to why you need to hand-alter (or  
> makefile alter) anything in the python package -- aren't all the  
> changes needed in the GDAL Framework?
>
> In my case, it looked like the python extension was looking for:
>
> /Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib
>
> where there already is:
> /Library/Frameworks/GDAL.framework/Versions/1.5/GDAL
> and:
> /Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/libgdal.dylib
>
Exactly.  Libtool builds it as

/Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib

Before installation, python links to that.  Then the GDAL install  
renames it to

/Library/Frameworks/GDAL.framework/Versions/1.5/GDAL

and needs to tell the gdal python libs the same (install_name_tool).

The unix/ stuff is just a convenience for other unix software that  
doesn't know about "-framework GDAL".

> I know it's kludgy, but couldn't we put yet another link in to what  
> python is looking for? The right way, I suppose, is to get it to  
> look in:
>
> /Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/
>
As you say, kludgy.  And messy.  I want to get it right.

> But I'm still confused as to how that path is being set.
>
> Maybe this is it, from setup.py:
>
>    libraries = ['gdal']
>    library_dirs = ['../../.libs','../..']
>    extra_link_args = []
>
> That's how it finds the libs when it's building, but how does it  
> know to look in the Framework when installed?
>
All OSX libraries embed the full path to theirselves.  The linker then  
embeds that into other libraries that link to them.  You can see this  
with:

otool -L /path/to/some/library/or/program


>>> build GDAL
>>> install GDAL lib (framework on OS-X)
>>> build python extensions (using installed GDAL)
>>> install python extensions
>>>
>>> would that work better?
>
>> Yes, that is a possibility.  But the current GDAL python setup.py  
>> doesn't work that way - it looks for the source-built copy of  
>> libgdal.
>
> This just seems odd to me, and I'm surprised it isn't causing  
> problems on other platforms. I guess it comes down to the idea of  
> what are shared libs for? I think they are for, well, sharing the  
> same libs among various programs, in this case, the various gdal  
> utilities, anything built to use gdal, and the various language  
> extensions.
>
It's an OSX problem, just for the framework build.  If you build GDAL  
as a dylib on OSX (which is exactly what the framework build does,  
really), and install in some standard location like /usr/local, the  
python linking won't have this problem.  But then you don't have the  
nice packaged framework that is so much easier to install and  
uninstall than the library.

> In this case, it seems the normal route is to install the shared  
> libs, then build the stuff that depends on them. I think that would  
> work better in this case, and I think all it would take to build  
> that way is to put something in the setup.py like:
>
> extra_link_args=['-framework', 'GDAL']
>
> I'll poke into this some more, if you like.

This is a possibility, even in the current build-everything context.   
It just needs a another flag: -F../.., and the framework would have to  
be assembled in the source tree first.  hmmm.....


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the  
past isn't a fiction designed to account for the discrepancy between  
my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From Chris.Barker at noaa.gov  Fri Nov  2 19:17:29 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <F63DDA14-F8E3-499A-BB5C-22F79FE3DE16@kyngchaos.com>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
	<F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>
	<472B7DBE.5020902@noaa.gov>
	<F63DDA14-F8E3-499A-BB5C-22F79FE3DE16@kyngchaos.com>
Message-ID: <472BB009.1010504@noaa.gov>

William Kyngesburye wrote:
>  The future 
> directions page on the libtool site doesn't mention anything about 
> frameworks.

Oh well, I guess we need to just live with what's there.

> Exactly.  Libtool builds it as
> 
> /Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib
> 
> Before installation, python links to that.  Then the GDAL install 
> renames it to
> 
> /Library/Frameworks/GDAL.framework/Versions/1.5/GDAL
> 
> and needs to tell the gdal python libs the same (install_name_tool).

Ah -- here is the issue, which again, seems to be caused by the fact 
that we are installing GDAL AFTER building the python extension. 
Otherwise the name would have changed before the python ext. was linked.

Could you run re-name libgdal.1.dylib to GDAL after building, rather on 
installation?

But to avoid that, you wan to use:

install_name_tool -change to change the name of the lib that the python 
extension is already linked to? In which case, I think something like 
this would work:

install_name_tool -change \
/Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib \
/Library/Frameworks/GDAL.framework/Versions/1.5/GDAL \
swig/python/build/lib.macosx-10.3-fat-2.5/osgeo/_gdal.so

after "setup.py build", and before "setup.py install"

Except that the ".macosx-10.3-fat-2.5" will change depending on what 
system/python it's being built on, but it looks like there is a way to 
ask python about that:

 >>> "-".join( (distutils.util.get_platform(), sys.version.split()[0]) )
'macosx-10.3-fat-2.5'

though you'd think there'd be an easier way!


This sure feels uglier than just building the python bindings after 
installing the GDAL framework! Or am I repeating myself here....

>> I know it's kludgy, but couldn't we put yet another link in to what 
>> python is looking for? The right way, I suppose, is to get it to look in:

now that I see what you're doing, I guess I'd keep the original name, 
and add a link to "GDAL", rather than re-naming it.

> As you say, kludgy.  And messy.  I want to get it right.

maybe, but all this re-naming feels pretty messy (and fragile) too!

> All OSX libraries embed the full path to theirselves.  The linker then 
> embeds that into other libraries that link to them.

Wow! such dependence on paths not changing! Though I suppose that solves 
the version issue -- you could have ten versions of a lib installed in 
ten places!

And it means you need to know at build time where you're going to 
install something (or get these problems!) which makes me think -- is 
there a way to specify the install path when the lib is built? rather 
than re-naming it later with install_name_tool?


> This is a possibility, even in the current build-everything context.  It 
> just needs a another flag: -F../.., and the framework would have to be 
> assembled in the source tree first.  hmmm.....

That may be an option too -- and a bit cleaner than what we figured out 
above.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Fri Nov  2 19:44:29 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] status of ldshared build? (or,
	other options for OSX framework build)
In-Reply-To: <472BB009.1010504@noaa.gov>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov>
	<F0E59961-1BF4-463A-86B7-8D337B2F9B32@kyngchaos.com>
	<472B7DBE.5020902@noaa.gov>
	<F63DDA14-F8E3-499A-BB5C-22F79FE3DE16@kyngchaos.com>
	<472BB009.1010504@noaa.gov>
Message-ID: <500F2DB4-BDA8-4130-961A-94C8E410A4F1@kyngchaos.com>

On Nov 2, 2007, at 6:17 PM, Christopher Barker wrote:

> Could you run re-name libgdal.1.dylib to GDAL after building, rather  
> on installation?
>
Hm, that's a good one.  I just have to make sure the GDAL makefiles  
know exactly where libtool puts its files.  I think something is known  
in there.  I think I'll look into this option.

>>> All OSX libraries embed the full path to theirselves.  The linker  
>>> then embeds that into other libraries that link to them.
>
> Wow! such dependence on paths not changing! Though I suppose that  
> solves the version issue -- you could have ten versions of a lib  
> installed in ten places!
>
> And it means you need to know at build time where you're going to  
> install something (or get these problems!) which makes me think --  
> is there a way to specify the install path when the lib is built?  
> rather than re-naming it later with install_name_tool?
>
This is the way OSX has always worked.  No need for grandma to muck  
around in the Terminal setting DYLD_LIBRARY_PATH.  Though it does lock  
libraries in a location, mostly.

And they are not only versioned by name, but with separate numbered  
versions - a current version, and a compatibility version, so the  
dynamic loader knows which versions are compatible with each other if  
an exact version match isn't available.

Libtool takes the configured path and does its magic depending on the  
platform to build the library.  In the OSX case, by adding - 
install_name to the linking.  But this is where libtool is limited -  
you give it the path and the *base* library name, say "gdal", and it  
adds the 'lib', .version and .dylib to it to use as the install_name.   
This is where libtool is inflexible on OSX.  It's possible to hack  
that in the libtool .m4 files and regenerate libtool, but it's not  
configurable, and it locks any OSX build into a framework name.

>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy



From hobu.inc at gmail.com  Sat Nov  3 00:38:54 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Ubuntu NG Python bindings (was status of ldshared
	build? (or, other options for OSX framework build))
In-Reply-To: <472ABFAC.4050201@noaa.gov>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov> <472ABFAC.4050201@noaa.gov>
Message-ID: <0864E341-678F-43A4-B1DA-675ED95D79F5@gmail.com>

Chris,

Things work ok on my ubuntu 7.10 server instance with stock  
setuptools.  Are you still having trouble?  I wonder if the generated  
code in svn is a bit out of sync or something.

Howard

On Nov 2, 2007, at 1:11 AM, Christopher Barker wrote:

> Christopher Barker wrote:
>> but is it as easy as just using without-python in .configure, then  
>> running setup.py after building and installing GDAL?
>
> I just tried it (on Kubuntu Linux 7.10), and it appeared to build  
> and install OK, but I'm getting:
>
> >>> import osgeo.gdal
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "osgeo/gdal.py", line 51, in <module>
>     from gdalconst import *
>   File "osgeo/gdalconst.py", line 123, in <module>
>     GFT_Integer = _gdalconst.GFT_Integer
> AttributeError: 'module' object has no attribute 'GFT_Integer'
>
> (SVN head)
>
> look familiar? I'm going to bed -- maybe I'll be able to poke into  
> this more tomorrow
>
> -Chris
>
>
>
> -- 
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From eric.c2c at gmail.com  Sun Nov  4 19:12:54 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
Message-ID: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>

Hello

(Resending this since it didn't make it due to too big attachments)

I have some image rendering issues with Gdal and MapServer, and I'm
hoping someone here could help me.

Context: I have an original tif/tfw file (file-in.tif) from which I
want to generate jpeg or png images with MapServer. The image
resolution is for scale of 1/5000. One characteristic of this image is its
horizontal hatches. (The output of gdalinfo file-in.tif is given below)

I want to visualize that image at 1/5000 but also at smaller scales:
1/10000 and 1/20000.

I operate the following gdal operations on my file: compress and
convert to geotiff, and create overviews.

$gdal_translate -of "GTiff" -co "COMPRESS=PACKBITS" file-in.tif file-out.tif
$gdaladdo -r average file-out.tif 2 4

(Output of gdalinfo file-out.tif is given below)

On the MapServer side, I use PROCESSING "RESAMPLE=AVERAGE".

The result isn't satisfying as the horizontal hatches aren't equally
spaced as they should be for the scales 1/20000 and 1/10000. It is a
lot better for 1/5000, although some lines seem bolder than others.

(In my previous email, I attached some png images to illustrate the
problem, but my email didn't make it to the list because of these
attachments).

I've used several other combinations. For example, I tried to use "nearest"
both with Gdal and MapServer. The results are very very bad.

Do you have suggestions?

Thanks a lot,

--
Eric


----
$gdalinfo file-in.tif

Driver: GTiff/GeoTIFF
Size is 19811, 15416
Coordinate System is `'
Origin = (798523.321250,90776.398750)
Pixel Size = (0.31750000,-0.31750000)
Metadata:
 TIFFTAG_IMAGEDESCRIPTION=Image obtenue depuis HPGL
 TIFFTAG_SOFTWARE=SPRING : wtiff.c version 3.3 (26-mai-1998)
 TIFFTAG_XRESOLUTION=400
 TIFFTAG_YRESOLUTION=400
 TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
 COMPRESSION=LZW
Corner Coordinates:
Upper Left  (  798523.321,   90776.399)
Lower Left  (  798523.321,   85881.819)
Upper Right (  804813.314,   90776.399)
Lower Right (  804813.314,   85881.819)
Center      (  801668.318,   88329.109)
Band 1 Block=19811x24 Type=Byte, ColorInterp=Red
Band 2 Block=19811x24 Type=Byte, ColorInterp=Green
Band 3 Block=19811x24 Type=Byte, ColorInterp=Blue

----
$gdalinfo file-out.tif

Driver: GTiff/GeoTIFF
Size is 19811, 15416
Coordinate System is `'
Origin = (798523.321250,90776.398750)
Pixel Size = (0.31750000,-0.31750000)
Metadata:
 TIFFTAG_IMAGEDESCRIPTION=Image obtenue depuis HPGL
 TIFFTAG_SOFTWARE=SPRING : wtiff.c version 3.3 (26-mai-1998)
 TIFFTAG_XRESOLUTION=400
 TIFFTAG_YRESOLUTION=400
 TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
 COMPRESSION=PACKBITS
Corner Coordinates:
Upper Left  (  798523.321,   90776.399)
Lower Left  (  798523.321,   85881.819)
Upper Right (  804813.314,   90776.399)
Lower Right (  804813.314,   85881.819)
Center      (  801668.318,   88329.109)
Band 1 Block=19811x1 Type=Byte, ColorInterp=Red
 Overviews: 9906x7708, 4953x3854
Band 2 Block=19811x1 Type=Byte, ColorInterp=Green
 Overviews: 9906x7708, 4953x3854
Band 3 Block=19811x1 Type=Byte, ColorInterp=Blue
 Overviews: 9906x7708, 4953x3854

From eric.c2c at gmail.com  Sun Nov  4 19:22:45 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] no gdal_rasterize in Ubuntu Gutsy (1.4.1-6build1)?
In-Reply-To: <loom.20071101T130926-830@post.gmane.org>
References: <loom.20071101T130926-830@post.gmane.org>
Message-ID: <5ec103de0711041622i4cfac8e5s141bfd0e5eb7e11a@mail.gmail.com>

On 11/1/07, Steve Hagen <steve.hagen@unh.edu> wrote:
> Hello,
>
> I apologize if this query is insultingly basic. Bare with me, as I have just
> become my own administrator.
>
> I want to use gdal_rasterize, which I believe became available with 1.3.2, but I
> can't find the utility.
>
> Some background:
>
> I am working in Ubuntu Gutsy, on which I've installed the debian package using
> sudo apt-get install gdal-bin. I can see the installed files in /usr/bin/ and
> elsewhere. I can use gdalinfo, gdalwarp, etc. just fine. But gdal_rasterize is
> nowhere to be found.
>
> The changelog.gz file says gdal_rasterize became available with 1.3.2 (a while
> back).
>
> So, my question(s):
>
> Where is gdal_rasterize? Is it installed and I'm just missing it?
>
> If its not installed, how can I install it? (I'm a bit afraid of compiling from
> source).
>
> Any info would be much appreciated.
>
> Thanks in advance,

Hi

I've run with the same issue on Debian. What I did is apt-get source
gdal-bin, add gdal-rasterize in some file under the debian/ dir (can't
remember which file), and rebuild the package using dpkg-buildpackage.
It's not that source code doesn't have gdal-rasterize, it's just that,
for some reason, it's not put in the Debian package.

Hope this helps,
--
Eric

From jetelus at centrum.cz  Mon Nov  5 03:57:43 2007
From: jetelus at centrum.cz (jetelus@centrum.cz)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <54720.84.10.81.30.1193935006.squirrel@loskot.net>
References: 0711010908.11215@centrum.cz> <200711010908.11215@centrum.cz>
	<47299455.20707@loskot.net> <200711011138.23752@centrum.cz>
	<200711011206.29151@centrum.cz>
	<54720.84.10.81.30.1193935006.squirrel@loskot.net>
Message-ID: <200711050957.25429@centrum.cz>

>jetelus@centrum.cz wrote:
>>>> Hi, I open and display raster without problems but when I
>>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>>> this error message using GDAL 1.4.2:
>>>>
>>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>>> \gdalrasterblock.cpp', line 219"
>>>> (and app crashs)
>>>>
>>>> and this error message using GDAL 1.4.3:
>>>>
>>>> "Out of memory allocating 59765 byte raster cache block."
>>>> (its little better becasuse app doesnt crash)
>>>>
>>>> RASTER INFO:
>>>> bpp: 1
>>>> compression: LZW
>>>> resolution: 11953 x 10268.
>>>> file size: 658kB
>>>>
>>>> When I convert this raster to 4 bits per pixel everything
>>>> is ok and I get no errors but raster file size grows to
>>>> 1.7MB. Any ideas? Thx.
>>>
>>>I don't know what device you have but you're trying to open ~120 MB
>>>raster in one shot, on mobile device.
>>>The error message is clear to me, you're dealing without of memory issue.
>>>
>>>IMHO, it's not a good idea to feed mobile device with images of that
>>>big. Better tile them into smaller pieces, use zoom levels, etc.
>>>GDAL for Windows CE gives you with tools to solve this problem.
>>>
>>>Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>>GDAL features on a mobile device the same way as on normal workstation.
>>>There are obvious hardware limitations you can not overcome.
>>>
>>>Cheers
>>>--
>>>Mateusz Loskot
>>>http://mateusz.loskot.net
>>>
>>
>> Thank you, I understand but why it works with 4 bpp version of same raster
>> which is even bigger?
>
>You wrote that you don't get any errors, but does it mean you can load it
>and display?
>
>Perhaps there is a bug, we can not exclude this option :-)
>If you want, you can send me your image file and piece of code presenting
>what are you doing exactly, then I will be able to investigate the problem.
>
>Cheers
>-- 
>Mateusz Loskot
>http://mateusz.loskot.net
>

Yes, I can load and display image. I get this error only when zooming.
(and no errors at all for 4bpp version)

I have this code:
(Windows Mobile 2003 Second Edition)

 --------------------------------------------------------------------------------
 ...
 int panBandMap[1];
 panBandMap[0] = 1;

 unsigned char* pData = (unsigned char*) malloc(nBufXSize * nBufYSize);

 if (!pData)
 {
	CString msg("Not enough memory.");
	TRACE(msg);
	MessageBox(NULL,msg,NULL,0);
	return false;
 }

 CPLErr e=GDALDatasetRasterIO(HDataset, GF_Read, nXOff, nYOff, nXSize, nYSize,
        pData, nBufXSize, nBufYSize, GDT_Byte, 1, panBandMap, 1, nBufXSize, 1);

 if (e != CE_None)
 {
        free(pData);
	CString msg(CPLGetLastErrorMsg());
	TRACE(msg);
	MessageBox(NULL,msg,NULL,0);
        return false;
 }
 ...
 show loaded raster
 ...
 free(pData);
 --------------------------------------------------------------------------------

works for whole image:

nXOff = 0
nYOff = 0
nXSize = 11953
nYSize = 10268
nBufXSize = 224
nBufYSize = 192

gives "Out of memory allocating 59765 byte raster cache block." for
raster part (same for similar areas when zooming):

nXOff = 3011
nYOff = 1571
nXSize = 7115
nYSize = 6561
nBufXSize = 248
nBufYSize = 228

Image is here (450kB):

http://rapidshare.com/files/67552472/tif_lzw.rar.html

Thx for your time.


From 2voodoo at gmx.de  Mon Nov  5 06:07:39 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711050957.25429@centrum.cz>
References: 0711010908.11215@centrum.cz>
	<200711010908.11215@centrum.cz>	<47299455.20707@loskot.net>
	<200711011138.23752@centrum.cz>	<200711011206.29151@centrum.cz>	<54720.84.10.81.30.1193935006.squirrel@loskot.net>
	<200711050957.25429@centrum.cz>
Message-ID: <472EF97B.4060006@gmx.de>

jetelus@centrum.cz schrieb:
>> jetelus@centrum.cz wrote:
>>     
>>>>> Hi, I open and display raster without problems but when I
>>>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>>>> this error message using GDAL 1.4.2:
>>>>>
>>>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>>>> \gdalrasterblock.cpp', line 219"
>>>>> (and app crashs)
>>>>>
>>>>> and this error message using GDAL 1.4.3:
>>>>>
>>>>> "Out of memory allocating 59765 byte raster cache block."
>>>>> (its little better becasuse app doesnt crash)
>>>>>
>>>>> RASTER INFO:
>>>>> bpp: 1
>>>>> compression: LZW
>>>>> resolution: 11953 x 10268.
>>>>> file size: 658kB
>>>>>
>>>>> When I convert this raster to 4 bits per pixel everything
>>>>> is ok and I get no errors but raster file size grows to
>>>>> 1.7MB. Any ideas? Thx.
>>>>>           
>>>> I don't know what device you have but you're trying to open ~120 MB
>>>> raster in one shot, on mobile device.
>>>> The error message is clear to me, you're dealing without of memory issue.
>>>>
>>>> IMHO, it's not a good idea to feed mobile device with images of that
>>>> big. Better tile them into smaller pieces, use zoom levels, etc.
>>>> GDAL for Windows CE gives you with tools to solve this problem.
>>>>
>>>> Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>>> GDAL features on a mobile device the same way as on normal workstation.
>>>> There are obvious hardware limitations you can not overcome.
>>>>
>>>> Cheers
>>>> --
>>>> Mateusz Loskot
>>>> http://mateusz.loskot.net
>>>>
>>>>         
>>> Thank you, I understand but why it works with 4 bpp version of same raster
>>> which is even bigger?
>>>       
>> You wrote that you don't get any errors, but does it mean you can load it
>> and display?
>>
>> Perhaps there is a bug, we can not exclude this option :-)
>> If you want, you can send me your image file and piece of code presenting
>> what are you doing exactly, then I will be able to investigate the problem.
>>
>> Cheers
>> -- 
>> Mateusz Loskot
>> http://mateusz.loskot.net
>>
>>     
>
> Yes, I can load and display image. I get this error only when zooming.
> (and no errors at all for 4bpp version)
>
> I have this code:
> (Windows Mobile 2003 Second Edition)
>
>  --------------------------------------------------------------------------------
>  ...
>  int panBandMap[1];
>  panBandMap[0] = 1;
>
>  unsigned char* pData = (unsigned char*) malloc(nBufXSize * nBufYSize);
>
>  if (!pData)
>  {
> 	CString msg("Not enough memory.");
> 	TRACE(msg);
> 	MessageBox(NULL,msg,NULL,0);
> 	return false;
>  }
>
>  CPLErr e=GDALDatasetRasterIO(HDataset, GF_Read, nXOff, nYOff, nXSize, nYSize,
>         pData, nBufXSize, nBufYSize, GDT_Byte, 1, panBandMap, 1, nBufXSize, 1);
>
>  if (e != CE_None)
>  {
>         free(pData);
> 	CString msg(CPLGetLastErrorMsg());
> 	TRACE(msg);
> 	MessageBox(NULL,msg,NULL,0);
>         return false;
>  }
>  ...
>  show loaded raster
>  ...
>  free(pData);
>  --------------------------------------------------------------------------------
>
> works for whole image:
>
> nXOff = 0
> nYOff = 0
> nXSize = 11953
> nYSize = 10268
> nBufXSize = 224
> nBufYSize = 192
>
> gives "Out of memory allocating 59765 byte raster cache block." for
> raster part (same for similar areas when zooming):
>
> nXOff = 3011
> nYOff = 1571
> nXSize = 7115
> nYSize = 6561
> nBufXSize = 248
> nBufYSize = 228
>
> Image is here (450kB):
>
> http://rapidshare.com/files/67552472/tif_lzw.rar.html
>
> Thx for your time.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>   
Hi,

I tryed your image out with my code and was surprised that my code can
handle that large images ;) - so just a question: Are there overviews in
the image?

With my code I was able to pan and zoom around - but after about 8
actions (I do not know exactly what the problem is - well, I will look
after it) I get the same error with the same amount of memory:
Return: 3
Last Error: Out of memory allocating 59765 byte raster cache block./

This error occured one time after I zoomed in (with about factor 2) and
another time when I zoomed out (about factor 0.4) -but not all the time.
I was also abtle to zoom deep in and out.
With only panning I get this error not that fast I think.

I don't know if this helps- but I try to test some more tonight.

Bye,
Tom

From jetelus at centrum.cz  Mon Nov  5 08:12:48 2007
From: jetelus at centrum.cz (jetelus@centrum.cz)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <472EF97B.4060006@gmx.de>
References: 711010908.11215@centrum.cz> <200711010908.11215@centrum.cz>
	<200711050957.25429@centrum.cz> <472EF97B.4060006@gmx.de>
Message-ID: <200711051412.17853@centrum.cz>

>jetelus@centrum.cz schrieb:
>>> jetelus@centrum.cz wrote:
>>>     
>>>>>> Hi, I open and display raster without problems but when I
>>>>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>>>>> this error message using GDAL 1.4.2:
>>>>>>
>>>>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>>>>> \gdalrasterblock.cpp', line 219"
>>>>>> (and app crashs)
>>>>>>
>>>>>> and this error message using GDAL 1.4.3:
>>>>>>
>>>>>> "Out of memory allocating 59765 byte raster cache block."
>>>>>> (its little better becasuse app doesnt crash)
>>>>>>
>>>>>> RASTER INFO:
>>>>>> bpp: 1
>>>>>> compression: LZW
>>>>>> resolution: 11953 x 10268.
>>>>>> file size: 658kB
>>>>>>
>>>>>> When I convert this raster to 4 bits per pixel everything
>>>>>> is ok and I get no errors but raster file size grows to
>>>>>> 1.7MB. Any ideas? Thx.
>>>>>>           
>>>>> I don't know what device you have but you're trying to open ~120 MB
>>>>> raster in one shot, on mobile device.
>>>>> The error message is clear to me, you're dealing without of memory issue.
>>>>>
>>>>> IMHO, it's not a good idea to feed mobile device with images of that
>>>>> big. Better tile them into smaller pieces, use zoom levels, etc.
>>>>> GDAL for Windows CE gives you with tools to solve this problem.
>>>>>
>>>>> Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>>>> GDAL features on a mobile device the same way as on normal workstation.
>>>>> There are obvious hardware limitations you can not overcome.
>>>>>
>>>>> Cheers
>>>>> --
>>>>> Mateusz Loskot
>>>>> http://mateusz.loskot.net
>>>>>
>>>>>         
>>>> Thank you, I understand but why it works with 4 bpp version of same raster
>>>> which is even bigger?
>>>>       
>>> You wrote that you don't get any errors, but does it mean you can load it
>>> and display?
>>>
>>> Perhaps there is a bug, we can not exclude this option :-)
>>> If you want, you can send me your image file and piece of code presenting
>>> what are you doing exactly, then I will be able to investigate the problem.
>>>
>>> Cheers
>>> -- 
>>> Mateusz Loskot
>>> http://mateusz.loskot.net
>>>
>>>     
>>
>> Yes, I can load and display image. I get this error only when zooming.
>> (and no errors at all for 4bpp version)
>>
>> I have this code:
>> (Windows Mobile 2003 Second Edition)
>>
>>  --------------------------------------------------------------------------------
>>  ...
>>  int panBandMap[1];
>>  panBandMap[0] = 1;
>>
>>  unsigned char* pData = (unsigned char*) malloc(nBufXSize * nBufYSize);
>>
>>  if (!pData)
>>  {
>> 	CString msg("Not enough memory.");
>> 	TRACE(msg);
>> 	MessageBox(NULL,msg,NULL,0);
>> 	return false;
>>  }
>>
>>  CPLErr e=GDALDatasetRasterIO(HDataset, GF_Read, nXOff, nYOff, nXSize, nYSize,
>>         pData, nBufXSize, nBufYSize, GDT_Byte, 1, panBandMap, 1, nBufXSize, 1);
>>
>>  if (e != CE_None)
>>  {
>>         free(pData);
>> 	CString msg(CPLGetLastErrorMsg());
>> 	TRACE(msg);
>> 	MessageBox(NULL,msg,NULL,0);
>>         return false;
>>  }
>>  ...
>>  show loaded raster
>>  ...
>>  free(pData);
>>  --------------------------------------------------------------------------------
>>
>> works for whole image:
>>
>> nXOff = 0
>> nYOff = 0
>> nXSize = 11953
>> nYSize = 10268
>> nBufXSize = 224
>> nBufYSize = 192
>>
>> gives "Out of memory allocating 59765 byte raster cache block." for
>> raster part (same for similar areas when zooming):
>>
>> nXOff = 3011
>> nYOff = 1571
>> nXSize = 7115
>> nYSize = 6561
>> nBufXSize = 248
>> nBufYSize = 228
>>
>> Image is here (450kB):
>>
>> http://rapidshare.com/files/67552472/tif_lzw.rar.html
>>
>> Thx for your time.
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>   
>Hi,
>
>I tryed your image out with my code and was surprised that my code can
>handle that large images ;) - so just a question: Are there overviews in
>the image?
>
>With my code I was able to pan and zoom around - but after about 8
>actions (I do not know exactly what the problem is - well, I will look
>after it) I get the same error with the same amount of memory:
>Return: 3
>Last Error: Out of memory allocating 59765 byte raster cache block./
>
>This error occured one time after I zoomed in (with about factor 2) and
>another time when I zoomed out (about factor 0.4) -but not all the time.
>I was also abtle to zoom deep in and out.
>With only panning I get this error not that fast I think.
>
>I don't know if this helps- but I try to test some more tonight.
>
>Bye,
>Tom
>

Hi,
thx for testing the image. I tryed to zoom to very small areas and it works.
So I added check for free memory before and after GDALDatasetRasterIO call
and discovered there is 11 MB difference. This is probably reason why all
following operations with larger areas are out of memory.


From wonder.sk at gmail.com  Mon Nov  5 08:25:03 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Re: [Qgis-developer] GDAL Python Bindings
In-Reply-To: <4728ACEE.5040504@noaa.gov>
References: <4728ACEE.5040504@noaa.gov>
Message-ID: <e8e7199c0711050525k135c7515mbd6482c63d0d0830@mail.gmail.com>

On 10/31/07, Christopher Barker <Chris.Barker@noaa.gov> wrote:
> Hi folks,
>
> Sorry for the cross-post, but it seemed topical to both qgis and gdal.
>
> Martin Dobias wrote:
>  >> GDAL already uses swig ngpython bindings, can't you reuse those ? There
>  >> is a gdalconst.py generated by swig which contains the enums.
>
>  > I don't think this would be a good idea. First, we would introduce
>  > dependency on GDAL python bindings.
>
> Well, there is a dependency on GDAL already, so why not the bindings?

Hi,
this is not the biggest problem and I think we could live with it.
But conceptually, why to connect GDAL and QGIS bindings? We want to
provide API that doesn't make differences between different data
providers: that's what is already done for vector data and what will
be done at some point for raster data. This is the reason why I think
that we should use our own data types, independent from underlying
libraries.


>  > Second, and more importantly,
>  > there seems to be a technical barrier - I have no idea how to connect
>  > SIP and SWIG bindings.
>
> What are the barriers exactly? I now nothing of SIP, and a little about
> SWIG. However, I think the key is to use Python as the intermediary, and
> not try to have SIP types dealing directly with GDAL C stuff. To do this
> efficiently, there may be a need to add a thing or two to the GDAL SWIG
> bindings and the Qgis bindings.

I see problem in converting between C++ and Python types. If you
instantiate a GDAL object in Python, how QGIS will get the pointer to
the real C++ object? I don't know how to tell SIP to use a type from
other library which isn't wrapped by SIP.


> In particular, thinking about a raster band, it could be a pretty good
> sized bock of data, so we'd want a way to get a GDAL raster band into
> whatever type you need for QGIS without a whole lot of data copying. By
> default, we might end up with:
>
> gdal generates a raster band. (first copy)
> it is converted to a Python string (two copies)
> it is converted to a QGIS raster band equivelent (three copies)

But the vision is that you will use only QGIS interface to do
anything, so the will be no need to do copies.


> It would be nice to just allocate the memory in GDAl, and pass that
> pointer through to whatever the QGIS type is. The way to do that is to
> use the Python buffer protocol, or even better the new nd-array protocol
> introduced by numpy, and slated for inclusion in future pythons:
>
> http://numpy.scipy.org/array_interface.shtml
>
> http://www.python.org/dev/peps/pep-3118/
>
> I'm hoping to add this support to the GDAL bindings anyway, for
> efficient transfer to/from numpy arrays.
>
> By the way, does pyQt and/or Qgis support numpy arrays at all now?

I'm not aware of any support of numpy by PyQt or QGIS...

Regards
Martin

From warmerdam at pobox.com  Mon Nov  5 11:14:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
Message-ID: <472F4151.40003@pobox.com>

Eric Lemoine wrote:
> Hello
> 
> (Resending this since it didn't make it due to too big attachments)

Eric,

The list is configure with a fairly restrictive limit on email size.
I'd suggest pointing to images on a web server you own or demonstrating
the issue with very small swatches.

> The result isn't satisfying as the horizontal hatches aren't equally
> spaced as they should be for the scales 1/20000 and 1/10000. It is a
> lot better for 1/5000, although some lines seem bolder than others.
> 
> (In my previous email, I attached some png images to illustrate the
> problem, but my email didn't make it to the list because of these
> attachments).
> 
> I've used several other combinations. For example, I tried to use "nearest"
> both with Gdal and MapServer. The results are very very bad.
> 
> Do you have suggestions?

It would be helpful to see the results, but generally it is hard to
downsample repeating patterns without odd aliasing effects.  The best
is to be very certain that exact factor of 2 downsamplings are done in
which case the algorithms should sample the data in a consistent way.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Nov  5 11:31:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Re: [Qgis-developer] GDAL Python Bindings
In-Reply-To: <e8e7199c0711050525k135c7515mbd6482c63d0d0830@mail.gmail.com>
References: <4728ACEE.5040504@noaa.gov>
	<e8e7199c0711050525k135c7515mbd6482c63d0d0830@mail.gmail.com>
Message-ID: <472F4560.30406@pobox.com>

Martin Dobias wrote:
> Hi,
> this is not the biggest problem and I think we could live with it.
> But conceptually, why to connect GDAL and QGIS bindings? We want to
> provide API that doesn't make differences between different data
> providers: that's what is already done for vector data and what will
> be done at some point for raster data. This is the reason why I think
> that we should use our own data types, independent from underlying
> libraries.

Martin,

I'm not sure I understand your point here.  Is the objective to support
raster data providers other than GDAL in a way that is uniform?  Or to
achieve a maximum amount of similarity in API between raster and vector
data sources (ie. similar metadata, driver capabilities and so forth)?

If the objective is to support raster providers other than GDAL I'd like
to make an empassioned plea to avoid this, but I don't want to rail against
something you weren't even suggesting.

> I see problem in converting between C++ and Python types. If you
> instantiate a GDAL object in Python, how QGIS will get the pointer to
> the real C++ object? I don't know how to tell SIP to use a type from
> other library which isn't wrapped by SIP.

Given a PyObject from something like the Python gdal.Open() wrapper
the object looks like this in C:

typedef struct {
   PyObject_HEAD
   void *ptr;
   swig_type_info *ty;
   int own;
   PyObject *next;
} PySwigObject;

The "void *ptr" is the wrap C/C++ pointer and can be cast to
GDALDatasetH or GDALDataset * as desired.  This approach is
somewhat fragile it might be worth inserting externall C callable
functions into the Python bindings that will safely return the
corresponding C/C++ pointer from a Python object.  Basically this
would be a variation on the SWIG_Python_ConvertPtrAndOwn() function
produced in the existing SWIG bindings, but designed for external
use.

This is also a problem that OpenEV has using the GDAL SWIG bindings.
OpenEV uses "yet another" python wrapping C mechanism and needs to
be able to work with swig wrapped python objects in various places.
In the past I put the conversion logic in OpenEV but it makes things
fragile in the face of changes to how swig works which is why I suggest
we make this a supported thing from within GDAL.

Overall, I'm not adverse to QGIS providing some modest degree of
python wrapping for GDAL datasets *but* the GDAL API is quite rich,
and developing over time.  I would claim that you don't want to be
in the position of producing wrapper glue for all of this, and
documenting it just so that QGIS Python scripters can get at the
capabilities.  And of course, if it is distinct from the normal way
of doing python stuff with GDAL, there will be regular frustration
that the existing wealth of GDAL Python scripts won't work in the
QGIS environment.

So, lets see what we can do to avoid too much duplication.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Mon Nov  5 12:19:29 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Ubuntu NG Python bindings (was status of ldshared
	build? (or, other options for OSX framework build))
In-Reply-To: <0864E341-678F-43A4-B1DA-675ED95D79F5@gmail.com>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov> <472ABFAC.4050201@noaa.gov>
	<0864E341-678F-43A4-B1DA-675ED95D79F5@gmail.com>
Message-ID: <472F50A1.2050505@noaa.gov>

Howard Butler wrote:
> Things work ok on my ubuntu 7.10 server instance with stock setuptools.  
> Are you still having trouble? 

Sorry, I haven't had a chance to try again on that box. However, last 
Friday, I got the same error on OS-X.

> I wonder if the generated code in svn is  a bit out of sync or something.

which might explain it. Is there a make command to re-run SWIG?

Also, this was with my attempt to turn off the python bindings in 
configure, and build them with setup.py by hand instead, so that may 
have resulted in the issue. Can you see any reason why that wouldn't 
work right.

This stems from messing with the OS-X framework build -- I"m becoming 
more convinced that the "right" way to do it is:

build gdal
install gdal
build python (and other) bindings
install python bindings

This is particularly a issue with the OS-X Framework build, as it is 
doing some library renaming at the install stage, so the bindings get 
built against the old names, and don't work (and all this is because 
libtool doesn't really support Frameworks right). William has some ideas 
about how to fix that, but I'm just thinking that the above build 
procedure really the the most appropriate way to handle building 
bindings of a lib that you want installed in the system for other uses 
as well.

I'll let you know when I get a chance to try again.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From ethoms at usgs.gov  Mon Nov  5 16:55:52 2007
From: ethoms at usgs.gov (Evan Thoms)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How do I set up gdal_translate to recognize GSAG?
Message-ID: <472F9168.2080801@usgs.gov>

Hi,
I need to convert an ascii surfer grid to a geotiff, but that format is 
unsupported by gdal_translate without modification. I utterly fail to 
understand how to add the required driver to the command. Can anyone 
explain in 101 language?
Thanks
Evan


-- 

Evan Thoms
Geologist\GIS Specialist
U.S. Geological Survey, Alaska Science Center 
4200 University Drive, Anchorage,  AK 99508          
voice: 907-786-7409	fax: 907-786-7401
ethoms@usgs.gov 


From wonder.sk at gmail.com  Mon Nov  5 19:19:33 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Re: [Qgis-developer] GDAL Python Bindings
In-Reply-To: <472F4560.30406@pobox.com>
References: <4728ACEE.5040504@noaa.gov>
	<e8e7199c0711050525k135c7515mbd6482c63d0d0830@mail.gmail.com>
	<472F4560.30406@pobox.com>
Message-ID: <e8e7199c0711051619g1b682cd6lc2525666d573e1cf@mail.gmail.com>

On 11/5/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Martin Dobias wrote:
> > Hi,
> > this is not the biggest problem and I think we could live with it.
> > But conceptually, why to connect GDAL and QGIS bindings? We want to
> > provide API that doesn't make differences between different data
> > providers: that's what is already done for vector data and what will
> > be done at some point for raster data. This is the reason why I think
> > that we should use our own data types, independent from underlying
> > libraries.
>
> Martin,
>
> I'm not sure I understand your point here.  Is the objective to support
> raster data providers other than GDAL in a way that is uniform?  Or to
> achieve a maximum amount of similarity in API between raster and vector
> data sources (ie. similar metadata, driver capabilities and so forth)?
>
> If the objective is to support raster providers other than GDAL I'd like
> to make an empassioned plea to avoid this, but I don't want to rail against
> something you weren't even suggesting.

Hi Frank,

the objective is that in future we'd like to possibly support other
providers than just GDAL. While still using GDAL as a primary data
provider, there's a need for more flexibility than using only GDAL as
a raster library:
- support for application-specific providers: to give users some easy
way to write a new data provider (in c++ or python)
- add GRASS raster provider - currently we depend on GRASS driver in
GDAL which produces some problems with packaging especially on
windows, e.g. you need to first compile GDAL, then GRASS and then GDAL
again with GRASS support
- we already have WMS raster provider which integrates into QGIS well


> > I see problem in converting between C++ and Python types. If you
> > instantiate a GDAL object in Python, how QGIS will get the pointer to
> > the real C++ object? I don't know how to tell SIP to use a type from
> > other library which isn't wrapped by SIP.
>
> Given a PyObject from something like the Python gdal.Open() wrapper
> the object looks like this in C:
>
> typedef struct {
>    PyObject_HEAD
>    void *ptr;
>    swig_type_info *ty;
>    int own;
>    PyObject *next;
> } PySwigObject;
>
> The "void *ptr" is the wrap C/C++ pointer and can be cast to
> GDALDatasetH or GDALDataset * as desired.  This approach is
> somewhat fragile it might be worth inserting externall C callable
> functions into the Python bindings that will safely return the
> corresponding C/C++ pointer from a Python object.  Basically this
> would be a variation on the SWIG_Python_ConvertPtrAndOwn() function
> produced in the existing SWIG bindings, but designed for external
> use.
>
> This is also a problem that OpenEV has using the GDAL SWIG bindings.
> OpenEV uses "yet another" python wrapping C mechanism and needs to
> be able to work with swig wrapped python objects in various places.
> In the past I put the conversion logic in OpenEV but it makes things
> fragile in the face of changes to how swig works which is why I suggest
> we make this a supported thing from within GDAL.

When looking at the SIP documentation, that conversion would be
probably done with some of this magic and SIP_PYOBJECT annotations. I
can imagine that this could work for layers with GDAL as underlying
data provider.


> Overall, I'm not adverse to QGIS providing some modest degree of
> python wrapping for GDAL datasets *but* the GDAL API is quite rich,
> and developing over time.  I would claim that you don't want to be
> in the position of producing wrapper glue for all of this, and
> documenting it just so that QGIS Python scripters can get at the
> capabilities.  And of course, if it is distinct from the normal way
> of doing python stuff with GDAL, there will be regular frustration
> that the existing wealth of GDAL Python scripts won't work in the
> QGIS environment.

QGIS API regarding raster handling isn't in a good shape or stable -
since the API has been used just internally and have been made
publicly available only recently. First we'd like to offer users at
least "something" (e.g. to render the layer) and then add more
functionality - like direct connection with GDAL bindings.


> So, lets see what we can do to avoid too much duplication.

I hope that we're still far from doing duplication...

Regards
Martin

From eric.c2c at gmail.com  Tue Nov  6 03:06:01 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <472F4151.40003@pobox.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
Message-ID: <5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>

On 11/5/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Eric Lemoine wrote:
> > Hello
> >
> > (Resending this since it didn't make it due to too big attachments)
>
> Eric,
>
> The list is configure with a fairly restrictive limit on email size.
> I'd suggest pointing to images on a web server you own or demonstrating
> the issue with very small swatches.
>
> > The result isn't satisfying as the horizontal hatches aren't equally
> > spaced as they should be for the scales 1/20000 and 1/10000. It is a
> > lot better for 1/5000, although some lines seem bolder than others.
> >
> > (In my previous email, I attached some png images to illustrate the
> > problem, but my email didn't make it to the list because of these
> > attachments).
> >
> > I've used several other combinations. For example, I tried to use "nearest"
> > both with Gdal and MapServer. The results are very very bad.
> >
> > Do you have suggestions?
>
> It would be helpful to see the results, but generally it is hard to
> downsample repeating patterns without odd aliasing effects.  The best
> is to be very certain that exact factor of 2 downsamplings are done in
> which case the algorithms should sample the data in a consistent way.

Thanks for your response Franck. Would you mind elaborate a bit more
on your last sentence?

<http://dev.camptocamp.com/grandlyon_plu/problem_images/>

Three screenshots at 1/20000, 1/10000, and 1/5000.

Cheers,

--
Eric

From mateusz at loskot.net  Tue Nov  6 04:43:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] OGR GeoJSON Driver
Message-ID: <47303740.708@loskot.net>

Hi All,

I published new OGR driver for accessing GeoJSON-based datasources.

Here is longer introduction about what is the OGR GeoJSON Driver about:

http://mateusz.loskot.net/2007/11/06/ogr-geojson-driver/

I've also submitted request to include it in the official GDAL/OGR
repository:

http://trac.osgeo.org/gdal/ticket/1968

I hope you will find this work interesting and helpful.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From schut at sarvision.nl  Tue Nov  6 05:35:27 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
Message-ID: <4730436F.1000704@sarvision.nl>

[resending because message was too large to come through...]

Hi folks,

I'm starting to work with modis 500m data, which comes in hdf tiles in a
sinusoidal projection. It is their projection/crs which makes me wonder
whether I have actually paid enough attention in GIS class years ago...
I hope someone more knowledgeable regarding sinusoidal projections
and/or gdal's modis hdf support can help me with this.

Introduction:
this data comes in tiles of 2400x2400 pixels, which seem to be just cut
from a sinusoidal world map grid (see
http://nsidc.org/data/modis/landgrid.html for an image of the grid). The
grid is 36 tiles wide (lon) by 18 tiles high (lat).
I have always presumed that the idea of a projection/crs (well, in
raster imagery, that is) is to have a linear grid spacing horizontally
and vertically (though hor and vert need not be the same) for the whole
range where the crs is valid. That means, pixel size for the entire area
is constant. For SIN, I'd think that would be the whole world, so pixel
sizes for any tile should be equal with any other tile. That way, and
only that way, they would match as in the world wide grid as shown on
the picture mentioned above.

The puzzle:
Then I tried to merge some modis tiles by using VRT, using vrt_merge.py.
I was very puzzeled when I got an error message telling me it wouldn't
merge my tiles because they did not have the same scale. After some
investigation, it indeed appeared they didn't! Pixel size (as calculated
by gdal) is different per tile. At around (0,0) degrees latlong, pixels
are square and of size 463.312716527916677 meters. The further one goes
from the equator or 0 deg longitude, the more the pixel size in that
direction differs from this 463.312716527916677 and pixels are not
square anymore.
I am lost here. Is gdal doing something wrong, are modis' sin tiles not
really sin grid tiles, or have I always underestimated projection/crs
limits and their usefulness for raster grids?

For now, I assume gdal is wrong :-) I'd like to test, but don't know
how. I can make some tiles publicly available on an ftp site if
necessary, and I'll post the gdalinfo for a couple of them (actually a
couple of the subdatasets of the tile hdf files) in this mail, first
without metadata (there is quite some), then with metadata, because I
assume gdal is calculating ul/lr from the hdf metadata. Could it be that
gdal is not taking into account the custom sphere modis uses?

Regards,
Vincent


the gdalinfo's:

tile h18 v09 (ul = 0,0, note the square pixels)
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h18v09.005.2007257192957.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (0.000000000000000,-0.000000000000000)
Pixel Size = (463.312716527916677,-463.312716527916677)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Lower Left  (       0.000,-1111950.520) (  0d 0'0.01"E, 10d 0'0.00"S)
Upper Right ( 1111950.520,       0.000) ( 10d 0'0.00"E,  0d 0'0.01"N)
Lower Right ( 1111950.520,-1111950.520) ( 10d 9'15.36"E, 10d 0'0.00"S)
Center      (  555975.260, -555975.260) (  5d 1'8.76"E,  5d 0'0.00"S)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767

tile: h17 v01
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h17v01.005.2007258182118.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-1111950.519667000044137,8895604.157332999631763)
Pixel Size = (463.312716527916677,-463.312716527499731)
Corner Coordinates:
Upper Left  (-1111950.520, 8895604.157) ( 57d35'15.74"W, 80d 0'0.00"N)
Lower Left  (-1111950.520, 7783653.638) ( 29d14'16.96"W, 70d 0'0.00"N)
Upper Right (       0.000, 8895604.157) (  0d 0'0.01"E, 80d 0'0.00"N)
Lower Right (       0.000, 7783653.638) (  0d 0'0.01"E, 70d 0'0.00"N)
Center      ( -555975.260, 8339628.897) ( 19d19'6.66"W, 75d 0'0.00"N)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767

tile h08 v06
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h08v06.005.2007258024555.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-11119505.196667000651360,3335851.558999999891967)
Pixel Size = (463.312716527917246,-463.312716527916677)
Corner Coordinates:
Upper Left  (-11119505.197, 3335851.559) (115d28'12.19"W, 30d 0'0.00"N)
Lower Left  (-11119505.197, 2223901.039) (106d25'4.00"W, 20d 0'0.00"N)
Upper Right (-10007554.677, 3335851.559) (103d55'22.97"W, 30d 0'0.00"N)
Lower Right (-10007554.677, 2223901.039) ( 95d46'33.60"W, 20d 0'0.00"N)
Center      (-10563529.937, 2779876.299) (104d49'15.25"W, 25d 0'0.00"N)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767


the same tiles gdalinfo including metadata:

tile h18 v08 (ul = 0,0)
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h18v09.005.2007257192957.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (0.000000000000000,-0.000000000000000)
Pixel Size = (463.312716527916677,-463.312716527916677)
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MCD43A4.A2007233.h18v09.005.2007257192957.hdf
  PRODUCTIONDATETIME=2007-09-14T19:29:57.000Z
  DAYNIGHTFLAG=Day
  REPROCESSINGACTUAL=reprocessed
  LOCALVERSIONID=5.0.6
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=Passed was set as a default value.
More algorithm will be developed
  AUTOMATICQUALITYFLAG=Passed
  SCIENCEQUALITYFLAGEXPLANATION=See
http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=aqua
the product Science Quality status.
  PARAMETERNAME=Nadir_Reflectance
  VERSIONID=5
  SHORTNAME=MCD43A4
  INPUTPOINTER=MYD09GHK.A2007233.h18v09.005.2007236053746.hdf,
MYD09GST.A2007233.h18v09.005.2007236053311.hdf,
MYDMGGAD.A2007233.h18v09.005.2007236053220.hdf,
MYDPTHKM.A2007233.h18v09.005.2007236053206.hdf,
MYD09GHK.A2007234.h18v09.005.2007237120850.hdf,
MYD09GST.A2007234.h18v09.005.2007237120515.hdf,
MYDMGGAD.A2007234.h18v09.005.2007237120428.hdf,
MYDPTHKM.A2007234.h18v09.005.2007237120423.hdf,
MYD09GHK.A2007235.h18v09.005.2007238114938.hdf,
MYD09GST.A2007235.h18v09.005.2007238114729.hdf,
MYDMGGAD.A2007235.h18v09.005.2007238114707.hdf,
MYDPTHKM.A2007235.h18v09.005.2007238114702.hdf,
MYD09GHK.A2007236.h18v09.005.2007239105155.hdf,
MYD09GST.A2007236.h18v09.005.2007239103755.hdf,
MYDMGGAD.A2007236.h18v09.005.2007239103643.hdf,
MYDPTHKM.A2007236.h18v09.005.2007239103614.hdf,
MYD09GHK.A2007237.h18v09.005.2007241063343.hdf,
MYD09GST.A2007237.h18v09.005.2007241061301.hdf,
MYDMGGAD.A2007237.h18v09.005.2007241061129.hdf,
MYDPTHKM.A2007237.h18v09.005.2007241061049.hdf,
MYD09GHK.A2007238.h18v09.005.2007241214859.hdf,
MYD09GST.A2007238.h18v09.005.2007241212740.hdf,
MYDMGGAD.A2007238.h18v09.005.2007241212617.hdf,
MYDPTHKM.A2007238.h18v09.005.2007241212558.hdf,
MYD09GHK.A2007239.h18v09.005.2007242054538.hdf,
MYD09GST.A2007239.h18v09.005.2007242053456.hdf,
MYDMGGAD.A2007239.h18v09.005.2007242053352.hdf,
MYDPTHKM.A2007239.h18v09.005.2007242053333.hdf,
MYD09GHK.A2007240.h18v09.005.2007243154617.hdf,
MYD09GST.A2007240.h18v09.005.2007243154026.hdf,
MYDMGGAD.A2007240.h18v09.005.2007243153840.hdf,
MYDPTHKM.A2007240.h18v09.005.2007243153819.hdf,
MYD09GHK.A2007241.h18v09.005.2007244030904.hdf,
MYD09GST.A2007241.h18v09.005.2007244023636.hdf,
MYDMGGAD.A2007241.h18v09.005.2007244023450.hdf,
MYDPTHKM.A2007241.h18v09.005.2007244023400.hdf,
MYD09GHK.A2007242.h18v09.005.2007245042617.hdf,
MYD09GST.A2007242.h18v09.005.2007245040916.hdf,
MYDMGGAD.A2007242.h18v09.005.2007245040636.hdf,
MYDPTHKM.A2007242.h18v09.005.2007245040534.hdf,
MYD09GHK.A2007243.h18v09.005.2007248130715.hdf,
MYD09GST.A2007243.h18v09.005.2007248130346.hdf,
MYDMGGAD.A2007243.h18v09.005.2007248130208.hdf,
MYDPTHKM.A2007243.h18v09.005.2007248130203.hdf,
MYD09GHK.A2007244.h18v09.005.2007247083702.hdf,
MYD09GST.A2007244.h18v09.005.2007247082252.hdf,
MYDMGGAD.A2007244.h18v09.005.2007247082143.hdf,
MYDPTHKM.A2007244.h18v09.005.2007247082108.hdf,
MYD09GHK.A2007245.h18v09.005.2007248005936.hdf,
MYD09GST.A2007245.h18v09.005.2007248004329.hdf,
MYDMGGAD.A2007245.h18v09.005.2007248004128.hdf,
MYDPTHKM.A2007245.h18v09.005.2007248004036.hdf,
MYD09GHK.A2007246.h18v09.005.2007255073637.hdf,
MYD09GST.A2007246.h18v09.005.2007255072421.hdf,
MYDMGGAD.A2007246.h18v09.005.2007255072312.hdf,
MYDPTHKM.A2007246.h18v09.005.2007255072247.hdf,
MYD09GHK.A2007247.h18v09.005.2007255144553.hdf,
MYD09GST.A2007247.h18v09.005.2007255143217.hdf,
MYDMGGAD.A2007247.h18v09.005.2007255143018.hdf,
MYDPTHKM.A2007247.h18v09.005.2007255142929.hdf,
MYD09GHK.A2007248.h18v09.005.2007251070617.hdf,
MYD09GST.A2007248.h18v09.005.2007251065138.hdf,
MYDMGGAD.A2007248.h18v09.005.2007251065039.hdf,
MYDPTHKM.A2007248.h18v09.005.2007251065012.hdf,
MOD09GHK.A2007233.h18v09.005.2007235214503.hdf,
MOD09GST.A2007233.h18v09.005.2007235214044.hdf,
MODMGGAD.A2007233.h18v09.005.2007235213836.hdf,
MODPTHKM.A2007233.h18v09.005.2007235213820.hdf,
MOD09GHK.A2007234.h18v09.005.2007237145653.hdf,
MOD09GST.A2007234.h18v09.005.2007237145417.hdf,
MODMGGAD.A2007234.h18v09.005.2007237145334.hdf,
MODPTHKM.A2007234.h18v09.005.2007237145329.hdf,
MOD09GHK.A2007235.h18v09.005.2007238021348.hdf,
MOD09GST.A2007235.h18v09.005.2007238021112.hdf,
MODMGGAD.A2007235.h18v09.005.2007238021044.hdf,
MODPTHKM.A2007235.h18v09.005.2007238021038.hdf,
MOD09GHK.A2007236.h18v09.005.2007239091305.hdf,
MOD09GST.A2007236.h18v09.005.2007239085423.hdf,
MODMGGAD.A2007236.h18v09.005.2007239085153.hdf,
MODPTHKM.A2007236.h18v09.005.2007239085045.hdf,
MOD09GHK.A2007237.h18v09.005.2007241014843.hdf,
MOD09GST.A2007237.h18v09.005.2007241013326.hdf,
MODMGGAD.A2007237.h18v09.005.2007241012505.hdf,
MODPTHKM.A2007237.h18v09.005.2007241012429.hdf,
MOD09GHK.A2007238.h18v09.005.2007241215222.hdf,
MOD09GST.A2007238.h18v09.005.2007241213217.hdf,
MODMGGAD.A2007238.h18v09.005.2007241213026.hdf,
MODPTHKM.A2007238.h18v09.005.2007241212953.hdf,
MOD09GHK.A2007239.h18v09.005.2007242072457.hdf,
MOD09GST.A2007239.h18v09.005.2007242071604.hdf,
MODMGGAD.A2007239.h18v09.005.2007242071420.hdf,
MODPTHKM.A2007239.h18v09.005.2007242071346.hdf,
MOD09GHK.A2007240.h18v09.005.2007243004029.hdf,
MOD09GST.A2007240.h18v09.005.2007243003106.hdf,
MODMGGAD.A2007240.h18v09.005.2007243002958.hdf,
MODPTHKM.A2007240.h18v09.005.2007243002925.hdf,
MOD09GHK.A2007241.h18v09.005.2007243231354.hdf,
MOD09GST.A2007241.h18v09.005.2007243225712.hdf,
MODMGGAD.A2007241.h18v09.005.2007243225614.hdf,
MODPTHKM.A2007241.h18v09.005.2007243225549.hdf,
MOD09GHK.A2007242.h18v09.005.2007245004458.hdf,
MOD09GST.A2007242.h18v09.005.2007245003432.hdf,
MODMGGAD.A2007242.h18v09.005.2007245003334.hdf,
MODPTHKM.A2007242.h18v09.005.2007245003303.hdf,
MOD09GHK.A2007243.h18v09.005.2007246012406.hdf,
MOD09GST.A2007243.h18v09.005.2007246011856.hdf,
MODMGGAD.A2007243.h18v09.005.2007246011821.hdf,
MODPTHKM.A2007243.h18v09.005.2007246011809.hdf,
MOD09GHK.A2007244.h18v09.005.2007246225108.hdf,
MOD09GST.A2007244.h18v09.005.2007246224524.hdf,
MODMGGAD.A2007244.h18v09.005.2007246224437.hdf,
MODPTHKM.A2007244.h18v09.005.2007246224414.hdf,
MOD09GHK.A2007245.h18v09.005.2007248075944.hdf,
MOD09GST.A2007245.h18v09.005.2007248074731.hdf,
MODMGGAD.A2007245.h18v09.005.2007248074647.hdf,
MODPTHKM.A2007245.h18v09.005.2007248074628.hdf,
MOD09GHK.A2007246.h18v09.005.2007249082516.hdf,
MOD09GST.A2007246.h18v09.005.2007249081943.hdf,
MODMGGAD.A2007246.h18v09.005.2007249081846.hdf,
MODPTHKM.A2007246.h18v09.005.2007249081826.hdf,
MOD09GHK.A2007247.h18v09.005.2007249234457.hdf,
MOD09GST.A2007247.h18v09.005.2007249234128.hdf,
MODMGGAD.A2007247.h18v09.005.2007249234101.hdf,
MODPTHKM.A2007247.h18v09.005.2007249234055.hdf,
MOD09GHK.A2007248.h18v09.005.2007250201505.hdf,
MOD09GST.A2007248.h18v09.005.2007250201055.hdf,
MODMGGAD.A2007248.h18v09.005.2007250200944.hdf,
MODPTHKM.A2007248.h18v09.005.2007250200934.hdf,
BRDF_DB.A2001001.h18v09.002.2005235120000.hdf
  GRINGPOINTLONGITUDE=-0.000495318715299631, -2.76300131940985e-15,
10.0088830882149, 10.1623357757029
  GRINGPOINTLATITUDE=-10.0006497593949, -2.21691396828058e-15,
0.000515336202014404, -9.99987677086012
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2007-09-05
  RANGEENDINGTIME=23:59:59.999999
  RANGEBEGINNINGDATE=2007-08-21
  RANGEBEGINNINGTIME=00:00:00.000000
  PGEVERSION=5.0.11
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Aqua
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  QAPERCENTGOODQUALITY=0
  QAPERCENTOTHERQUALITY=0
  QAPERCENTNOTPRODUCEDCLOUD=0
  QAPERCENTNOTPRODUCEDOTHER=100
  HORIZONTALTILENUMBER=18
  VERTICALTILENUMBER=09
  TileID=51018009
  BRDFCODEID=AMBRALS_V4.0R1
  SETUPFILEID=6121997
  ALBEDOFILEID=6121997
  BRDFDATABASEVERSION=v1.0500m
  PERCENTLANDINTILE=40.423603
  PERCENTPROCESSEDINTILE=12.187835
  PERCENTNEWBRDFS=0.022246
  PERCENTSHAPEFIXEDBRDFS=12.165589
  PERCENTSUBSTITUTEBRDFS=0.000000
  AVERAGENUMBEROBS=0.096625
  WESTBOUNDINGCOORDINATE=4.25322203204892e-15
  NORTHBOUNDINGCOORDINATE=-2.12661101602446e-15
  EASTBOUNDINGCOORDINATE=10.1627280063491
  SOUTHBOUNDINGCOORDINATE=-9.99999999910197
  GEOANYABNORMAL=False
  GEOESTMAXRMSERROR=75.0
  LONGNAME=MODIS/Terra+Aqua Nadir BRDF-Adjusted Reflectance 16-Day L3
Global 500m SIN Grid
  SPSOPARAMETERS=none, derived from 3669
  PROCESSINGCENTER=MODAPS
  CHARACTERISTICBINANGULARSIZE=15.0
  CHARACTERISTICBINSIZE=463.312716527778
  DATACOLUMNS=2400
  DATAROWS=2400
  GLOBALGRIDCOLUMNS=86400
  GLOBALGRIDROWS=43200
  MAXIMUMOBSERVATIONS=4
  NUMBEROFGRANULES=0
  COVERAGECALCULATIONMETHOD=volume
  NADIRDATARESOLUTION=500m
  PROCESSINGENVIRONMENT=Linux minion5124 2.6.8.1-26mdksmp #1 SMP Mon Nov
28 12:40:04 MST 2005 i686 IntelR PentiumR III CPU family      1133MHz
unknown GNU/Linux
  DESCRREVISION=5.1
  long_name=Nadir_Reflectance_Band1
  units=reflectance, no units
  valid_range=0, 32766
  _FillValue=32767
  scale_factor=0.0001
  add_offset=0
  scale_factor_err=0
  add_offset_err=0
  calibrated_nt=5
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Lower Left  (       0.000,-1111950.520) (  0d 0'0.01"E, 10d 0'0.00"S)
Upper Right ( 1111950.520,       0.000) ( 10d 0'0.00"E,  0d 0'0.01"N)
Lower Right ( 1111950.520,-1111950.520) ( 10d 9'15.36"E, 10d 0'0.00"S)
Center      (  555975.260, -555975.260) (  5d 1'8.76"E,  5d 0'0.00"S)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767

tile: h17 v01
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h17v01.005.2007258182118.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-1111950.519667000044137,8895604.157332999631763)
Pixel Size = (463.312716527916677,-463.312716527499731)
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MCD43A4.A2007233.h17v01.005.2007258182118.hdf
  PRODUCTIONDATETIME=2007-09-15T18:21:18.000Z
  DAYNIGHTFLAG=Both
  REPROCESSINGACTUAL=reprocessed
  LOCALVERSIONID=5.0.6
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=Passed was set as a default value.
More algorithm will be developed
  AUTOMATICQUALITYFLAG=Passed
  SCIENCEQUALITYFLAGEXPLANATION=See
http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=aqua
the product Science Quality status.
  PARAMETERNAME=Nadir_Reflectance
  VERSIONID=5
  SHORTNAME=MCD43A4
  INPUTPOINTER=MYD09GHK.A2007233.h17v01.005.2007236222856.hdf,
MYD09GST.A2007233.h17v01.005.2007236201630.hdf,
MYDMGGAD.A2007233.h17v01.005.2007236063600.hdf,
MYDPTHKM.A2007233.h17v01.005.2007236063258.hdf,
MYD09GHK.A2007234.h17v01.005.2007237111611.hdf,
MYD09GST.A2007234.h17v01.005.2007237103936.hdf,
MYDMGGAD.A2007234.h17v01.005.2007237103511.hdf,
MYDPTHKM.A2007234.h17v01.005.2007237103353.hdf,
MYD09GHK.A2007235.h17v01.005.2007238134639.hdf,
MYD09GST.A2007235.h17v01.005.2007238122331.hdf,
MYDMGGAD.A2007235.h17v01.005.2007238121637.hdf,
MYDPTHKM.A2007235.h17v01.005.2007238121158.hdf,
MYD09GHK.A2007236.h17v01.005.2007239122711.hdf,
MYD09GST.A2007236.h17v01.005.2007239112111.hdf,
MYDMGGAD.A2007236.h17v01.005.2007239111159.hdf,
MYDPTHKM.A2007236.h17v01.005.2007239110816.hdf,
MYD09GHK.A2007237.h17v01.005.2007241063713.hdf,
MYD09GST.A2007237.h17v01.005.2007241035122.hdf,
MYDMGGAD.A2007237.h17v01.005.2007241030744.hdf,
MYDPTHKM.A2007237.h17v01.005.2007241030435.hdf,
MYD09GHK.A2007238.h17v01.005.2007242000942.hdf,
MYD09GST.A2007238.h17v01.005.2007241212456.hdf,
MYDMGGAD.A2007238.h17v01.005.2007241204045.hdf,
MYDPTHKM.A2007238.h17v01.005.2007241202927.hdf,
MYD09GHK.A2007239.h17v01.005.2007242081058.hdf,
MYD09GST.A2007239.h17v01.005.2007242065819.hdf,
MYDMGGAD.A2007239.h17v01.005.2007242064753.hdf,
MYDPTHKM.A2007239.h17v01.005.2007242064433.hdf,
MYD09GHK.A2007240.h17v01.005.2007243192640.hdf,
MYD09GST.A2007240.h17v01.005.2007243162910.hdf,
MYDMGGAD.A2007240.h17v01.005.2007243161843.hdf,
MYDPTHKM.A2007240.h17v01.005.2007243161258.hdf,
MYD09GHK.A2007241.h17v01.005.2007244062704.hdf,
MYD09GST.A2007241.h17v01.005.2007244030438.hdf,
MYDMGGAD.A2007241.h17v01.005.2007244023659.hdf,
MYDPTHKM.A2007241.h17v01.005.2007244022907.hdf,
MYD09GHK.A2007242.h17v01.005.2007245110353.hdf,
MYD09GST.A2007242.h17v01.005.2007245093532.hdf,
MYDMGGAD.A2007242.h17v01.005.2007245090954.hdf,
MYDPTHKM.A2007242.h17v01.005.2007245085748.hdf,
MYD09GHK.A2007243.h17v01.005.2007248134615.hdf,
MYD09GST.A2007243.h17v01.005.2007248120549.hdf,
MYDMGGAD.A2007243.h17v01.005.2007248115402.hdf,
MYDPTHKM.A2007243.h17v01.005.2007248115049.hdf,
MYD09GHK.A2007244.h17v01.005.2007247074620.hdf,
MYD09GST.A2007244.h17v01.005.2007247063447.hdf,
MYDMGGAD.A2007244.h17v01.005.2007247062929.hdf,
MYDPTHKM.A2007244.h17v01.005.2007247062748.hdf,
MYD09GHK.A2007245.h17v01.005.2007248023226.hdf,
MYD09GST.A2007245.h17v01.005.2007248003758.hdf,
MYDMGGAD.A2007245.h17v01.005.2007248002740.hdf,
MYDPTHKM.A2007245.h17v01.005.2007248002157.hdf,
MYD09GHK.A2007246.h17v01.005.2007255075611.hdf,
MYD09GST.A2007246.h17v01.005.2007255062815.hdf,
MYDMGGAD.A2007246.h17v01.005.2007255061737.hdf,
MYDPTHKM.A2007246.h17v01.005.2007255061323.hdf,
MYD09GHK.A2007247.h17v01.005.2007255162151.hdf,
MYD09GST.A2007247.h17v01.005.2007255130850.hdf,
MYDMGGAD.A2007247.h17v01.005.2007255121258.hdf,
MYDPTHKM.A2007247.h17v01.005.2007255121053.hdf,
MYD09GHK.A2007248.h17v01.005.2007251092025.hdf,
MYD09GST.A2007248.h17v01.005.2007251071817.hdf,
MYDMGGAD.A2007248.h17v01.005.2007251070759.hdf,
MYDPTHKM.A2007248.h17v01.005.2007251070306.hdf,
MOD09GHK.A2007233.h17v01.005.2007235231318.hdf,
MOD09GST.A2007233.h17v01.005.2007235202757.hdf,
MODMGGAD.A2007233.h17v01.005.2007235195859.hdf,
MODPTHKM.A2007233.h17v01.005.2007235195245.hdf,
MOD09GHK.A2007234.h17v01.005.2007237135611.hdf,
MOD09GST.A2007234.h17v01.005.2007237131100.hdf,
MODMGGAD.A2007234.h17v01.005.2007237130257.hdf,
MODPTHKM.A2007234.h17v01.005.2007237130131.hdf,
MOD09GHK.A2007235.h17v01.005.2007238014117.hdf,
MOD09GST.A2007235.h17v01.005.2007238010732.hdf,
MODMGGAD.A2007235.h17v01.005.2007238010341.hdf,
MODPTHKM.A2007235.h17v01.005.2007238010239.hdf,
MOD09GHK.A2007236.h17v01.005.2007239071327.hdf,
MOD09GST.A2007236.h17v01.005.2007239063205.hdf,
MODMGGAD.A2007236.h17v01.005.2007239062729.hdf,
MODPTHKM.A2007236.h17v01.005.2007239062633.hdf,
MOD09GHK.A2007237.h17v01.005.2007241035814.hdf,
MOD09GST.A2007237.h17v01.005.2007241023721.hdf,
MODMGGAD.A2007237.h17v01.005.2007241021501.hdf,
MODPTHKM.A2007237.h17v01.005.2007241021036.hdf,
MOD09GHK.A2007238.h17v01.005.2007241181850.hdf,
MOD09GST.A2007238.h17v01.005.2007241165042.hdf,
MODMGGAD.A2007238.h17v01.005.2007241164133.hdf,
MODPTHKM.A2007238.h17v01.005.2007241163813.hdf,
MOD09GHK.A2007239.h17v01.005.2007242064203.hdf,
MOD09GST.A2007239.h17v01.005.2007242050934.hdf,
MODMGGAD.A2007239.h17v01.005.2007242044745.hdf,
MODPTHKM.A2007239.h17v01.005.2007242044316.hdf,
MOD09GHK.A2007240.h17v01.005.2007243002350.hdf,
MOD09GST.A2007240.h17v01.005.2007242220512.hdf,
MODMGGAD.A2007240.h17v01.005.2007242213145.hdf,
MODPTHKM.A2007240.h17v01.005.2007242212325.hdf,
MOD09GHK.A2007241.h17v01.005.2007244020115.hdf,
MOD09GST.A2007241.h17v01.005.2007243220830.hdf,
MODMGGAD.A2007241.h17v01.005.2007243212356.hdf,
MODPTHKM.A2007241.h17v01.005.2007243211229.hdf,
MOD09GHK.A2007242.h17v01.005.2007245010303.hdf,
MOD09GST.A2007242.h17v01.005.2007244235553.hdf,
MODMGGAD.A2007242.h17v01.005.2007244235044.hdf,
MODPTHKM.A2007242.h17v01.005.2007244234831.hdf,
MOD09GHK.A2007243.h17v01.005.2007246042209.hdf,
MOD09GST.A2007243.h17v01.005.2007246030516.hdf,
MODMGGAD.A2007243.h17v01.005.2007246024337.hdf,
MODPTHKM.A2007243.h17v01.005.2007246023927.hdf,
MOD09GHK.A2007244.h17v01.005.2007246235842.hdf,
MOD09GST.A2007244.h17v01.005.2007246220840.hdf,
MODMGGAD.A2007244.h17v01.005.2007246220100.hdf,
MODPTHKM.A2007244.h17v01.005.2007246215655.hdf,
MOD09GHK.A2007245.h17v01.005.2007248072411.hdf,
MOD09GST.A2007245.h17v01.005.2007248062224.hdf,
MODMGGAD.A2007245.h17v01.005.2007248052154.hdf,
MODPTHKM.A2007245.h17v01.005.2007248052020.hdf,
MOD09GHK.A2007246.h17v01.005.2007249073419.hdf,
MOD09GST.A2007246.h17v01.005.2007249062338.hdf,
MODMGGAD.A2007246.h17v01.005.2007249061018.hdf,
MODPTHKM.A2007246.h17v01.005.2007249060849.hdf,
MOD09GHK.A2007247.h17v01.005.2007250002634.hdf,
MOD09GST.A2007247.h17v01.005.2007249231010.hdf,
MODMGGAD.A2007247.h17v01.005.2007249230119.hdf,
MODPTHKM.A2007247.h17v01.005.2007249225736.hdf,
MOD09GHK.A2007248.h17v01.005.2007250210138.hdf,
MOD09GST.A2007248.h17v01.005.2007250174801.hdf,
MODMGGAD.A2007248.h17v01.005.2007250172712.hdf,
MODPTHKM.A2007248.h17v01.005.2007250172416.hdf,
BRDF_DB.A2001001.h17v01.002.2005235120000.hdf
  GRINGPOINTLONGITUDE=-29.1844410463807, -58.6470557489562,
0.164444841055828, 0.0201431634776088
  GRINGPOINTLATITUDE=69.3805018417384, 79.8967917713976,
80.0268628815066, 69.3949614027661
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2007-09-05
  RANGEENDINGTIME=23:59:59.999999
  RANGEBEGINNINGDATE=2007-08-21
  RANGEBEGINNINGTIME=00:00:00.000000
  PGEVERSION=5.0.11
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Aqua
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  QAPERCENTGOODQUALITY=18
  QAPERCENTOTHERQUALITY=28
  QAPERCENTNOTPRODUCEDCLOUD=0
  QAPERCENTNOTPRODUCEDOTHER=54
  HORIZONTALTILENUMBER=17
  VERTICALTILENUMBER=01
  TileID=51017001
  BRDFCODEID=AMBRALS_V4.0R1
  SETUPFILEID=6121997
  ALBEDOFILEID=6121997
  BRDFDATABASEVERSION=v1.0500m
  PERCENTLANDINTILE=87.166880
  PERCENTPROCESSEDINTILE=93.238151
  PERCENTNEWBRDFS=56.176027
  PERCENTSHAPEFIXEDBRDFS=37.062124
  PERCENTSUBSTITUTEBRDFS=0.000000
  AVERAGENUMBEROBS=6.685058
  WESTBOUNDINGCOORDINATE=-57.5877047853133
  NORTHBOUNDINGCOORDINATE=79.9999999928158
  EASTBOUNDINGCOORDINATE=0.0479897539877856
  SOUTHBOUNDINGCOORDINATE=69.9999999937138
  GEOANYABNORMAL=False
  GEOESTMAXRMSERROR=75.0
  LONGNAME=MODIS/Terra+Aqua Nadir BRDF-Adjusted Reflectance 16-Day L3
Global 500m SIN Grid
  SPSOPARAMETERS=none, derived from 3669
  PROCESSINGCENTER=MODAPS
  CHARACTERISTICBINANGULARSIZE=15.0
  CHARACTERISTICBINSIZE=463.312716527778
  DATACOLUMNS=2400
  DATAROWS=2400
  GLOBALGRIDCOLUMNS=86400
  GLOBALGRIDROWS=43200
  MAXIMUMOBSERVATIONS=19
  NUMBEROFGRANULES=0
  COVERAGECALCULATIONMETHOD=volume
  NADIRDATARESOLUTION=500m
  PROCESSINGENVIRONMENT=Linux minion5244 2.6.20.3 #1 SMP Thu Mar 22
09:36:24 EST 2007 i686 IntelR XeonR CPU            5140  @ 2.33GHz
unknown GNU/Linux
  DESCRREVISION=5.1
  long_name=Nadir_Reflectance_Band1
  units=reflectance, no units
  valid_range=0, 32766
  _FillValue=32767
  scale_factor=0.0001
  add_offset=0
  scale_factor_err=0
  add_offset_err=0
  calibrated_nt=5
Corner Coordinates:
Upper Left  (-1111950.520, 8895604.157) ( 57d35'15.74"W, 80d 0'0.00"N)
Lower Left  (-1111950.520, 7783653.638) ( 29d14'16.96"W, 70d 0'0.00"N)
Upper Right (       0.000, 8895604.157) (  0d 0'0.01"E, 80d 0'0.00"N)
Lower Right (       0.000, 7783653.638) (  0d 0'0.01"E, 70d 0'0.00"N)
Center      ( -555975.260, 8339628.897) ( 19d19'6.66"W, 75d 0'0.00"N)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767

tile h08 v06
Driver: HDF4Image/HDF4 Dataset
Files: MCD43A4.A2007233.h08v06.005.2007258024555.hdf
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-11119505.196667000651360,3335851.558999999891967)
Pixel Size = (463.312716527917246,-463.312716527916677)
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MCD43A4.A2007233.h08v06.005.2007258024555.hdf
  PRODUCTIONDATETIME=2007-09-15T02:45:55.000Z
  DAYNIGHTFLAG=Day
  REPROCESSINGACTUAL=reprocessed
  LOCALVERSIONID=5.0.6
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=Passed was set as a default value.
More algorithm will be developed
  AUTOMATICQUALITYFLAG=Passed
  SCIENCEQUALITYFLAGEXPLANATION=See
http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=aqua
the product Science Quality status.
  PARAMETERNAME=Nadir_Reflectance
  VERSIONID=5
  SHORTNAME=MCD43A4
  INPUTPOINTER=MYD09GHK.A2007233.h08v06.005.2007236055001.hdf,
MYD09GST.A2007233.h08v06.005.2007236054524.hdf,
MYDMGGAD.A2007233.h08v06.005.2007236054418.hdf,
MYDPTHKM.A2007233.h08v06.005.2007236054406.hdf,
MYD09GHK.A2007234.h08v06.005.2007237125257.hdf,
MYD09GST.A2007234.h08v06.005.2007237123958.hdf,
MYDMGGAD.A2007234.h08v06.005.2007237123812.hdf,
MYDPTHKM.A2007234.h08v06.005.2007237123731.hdf,
MYD09GHK.A2007235.h08v06.005.2007238122041.hdf,
MYD09GST.A2007235.h08v06.005.2007238120909.hdf,
MYDMGGAD.A2007235.h08v06.005.2007238120819.hdf,
MYDPTHKM.A2007235.h08v06.005.2007238120804.hdf,
MYD09GHK.A2007236.h08v06.005.2007239105629.hdf,
MYD09GST.A2007236.h08v06.005.2007239104810.hdf,
MYDMGGAD.A2007236.h08v06.005.2007239104711.hdf,
MYDPTHKM.A2007236.h08v06.005.2007239104649.hdf,
MYD09GHK.A2007237.h08v06.005.2007241070752.hdf,
MYD09GST.A2007237.h08v06.005.2007241065104.hdf,
MYDMGGAD.A2007237.h08v06.005.2007241064907.hdf,
MYDPTHKM.A2007237.h08v06.005.2007241064828.hdf,
MYD09GHK.A2007238.h08v06.005.2007241221949.hdf,
MYD09GST.A2007238.h08v06.005.2007241220654.hdf,
MYDMGGAD.A2007238.h08v06.005.2007241220231.hdf,
MYDPTHKM.A2007238.h08v06.005.2007241220212.hdf,
MYD09GHK.A2007239.h08v06.005.2007242063652.hdf,
MYD09GST.A2007239.h08v06.005.2007242062321.hdf,
MYDMGGAD.A2007239.h08v06.005.2007242061831.hdf,
MYDPTHKM.A2007239.h08v06.005.2007242061807.hdf,
MYD09GHK.A2007240.h08v06.005.2007243171012.hdf,
MYD09GST.A2007240.h08v06.005.2007243163242.hdf,
MYDMGGAD.A2007240.h08v06.005.2007243162538.hdf,
MYDPTHKM.A2007240.h08v06.005.2007243162420.hdf,
MYD09GHK.A2007241.h08v06.005.2007244032741.hdf,
MYD09GST.A2007241.h08v06.005.2007244031447.hdf,
MYDMGGAD.A2007241.h08v06.005.2007244031225.hdf,
MYDPTHKM.A2007241.h08v06.005.2007244031153.hdf,
MYD09GHK.A2007242.h08v06.005.2007245045319.hdf,
MYD09GST.A2007242.h08v06.005.2007245044223.hdf,
MYDMGGAD.A2007242.h08v06.005.2007245044003.hdf,
MYDPTHKM.A2007242.h08v06.005.2007245043924.hdf,
MYD09GHK.A2007243.h08v06.005.2007248143434.hdf,
MYD09GST.A2007243.h08v06.005.2007248141504.hdf,
MYDMGGAD.A2007243.h08v06.005.2007248141209.hdf,
MYDPTHKM.A2007243.h08v06.005.2007248141126.hdf,
MYD09GHK.A2007244.h08v06.005.2007247091119.hdf,
MYD09GST.A2007244.h08v06.005.2007247085633.hdf,
MYDMGGAD.A2007244.h08v06.005.2007247085455.hdf,
MYDPTHKM.A2007244.h08v06.005.2007247085421.hdf,
MYD09GHK.A2007245.h08v06.005.2007248012609.hdf,
MYD09GST.A2007245.h08v06.005.2007248010721.hdf,
MYDMGGAD.A2007245.h08v06.005.2007248010541.hdf,
MYDPTHKM.A2007245.h08v06.005.2007248010452.hdf,
MYD09GHK.A2007246.h08v06.005.2007255083102.hdf,
MYD09GST.A2007246.h08v06.005.2007255080900.hdf,
MYDMGGAD.A2007246.h08v06.005.2007255080648.hdf,
MYDPTHKM.A2007246.h08v06.005.2007255080556.hdf,
MYD09GHK.A2007247.h08v06.005.2007255150756.hdf,
MYD09GST.A2007247.h08v06.005.2007255145310.hdf,
MYDMGGAD.A2007247.h08v06.005.2007255145221.hdf,
MYDPTHKM.A2007247.h08v06.005.2007255145154.hdf,
MYD09GHK.A2007248.h08v06.005.2007251075702.hdf,
MYD09GST.A2007248.h08v06.005.2007251073308.hdf,
MYDMGGAD.A2007248.h08v06.005.2007251072953.hdf,
MYDPTHKM.A2007248.h08v06.005.2007251072857.hdf,
MOD09GHK.A2007233.h08v06.005.2007235222725.hdf,
MOD09GST.A2007233.h08v06.005.2007235222419.hdf,
MODMGGAD.A2007233.h08v06.005.2007235221909.hdf,
MODPTHKM.A2007233.h08v06.005.2007235221903.hdf,
MOD09GHK.A2007234.h08v06.005.2007237152604.hdf,
MOD09GST.A2007234.h08v06.005.2007237151838.hdf,
MODMGGAD.A2007234.h08v06.005.2007237151735.hdf,
MODPTHKM.A2007234.h08v06.005.2007237151701.hdf,
MOD09GHK.A2007235.h08v06.005.2007238032257.hdf,
MOD09GST.A2007235.h08v06.005.2007238025353.hdf,
MODMGGAD.A2007235.h08v06.005.2007238024639.hdf,
MODPTHKM.A2007235.h08v06.005.2007238024610.hdf,
MOD09GHK.A2007236.h08v06.005.2007239095547.hdf,
MOD09GST.A2007236.h08v06.005.2007239093658.hdf,
MODMGGAD.A2007236.h08v06.005.2007239093428.hdf,
MODPTHKM.A2007236.h08v06.005.2007239093339.hdf,
MOD09GHK.A2007237.h08v06.005.2007241025632.hdf,
MOD09GST.A2007237.h08v06.005.2007241023754.hdf,
MODMGGAD.A2007237.h08v06.005.2007241022546.hdf,
MODPTHKM.A2007237.h08v06.005.2007241022455.hdf,
MOD09GHK.A2007238.h08v06.005.2007241172628.hdf,
MOD09GST.A2007238.h08v06.005.2007241170539.hdf,
MODMGGAD.A2007238.h08v06.005.2007241170139.hdf,
MODPTHKM.A2007238.h08v06.005.2007241170109.hdf,
MOD09GHK.A2007239.h08v06.005.2007242074424.hdf,
MOD09GST.A2007239.h08v06.005.2007242073724.hdf,
MODMGGAD.A2007239.h08v06.005.2007242073630.hdf,
MODPTHKM.A2007239.h08v06.005.2007242073603.hdf,
MOD09GHK.A2007240.h08v06.005.2007243010525.hdf,
MOD09GST.A2007240.h08v06.005.2007243005546.hdf,
MODMGGAD.A2007240.h08v06.005.2007243005454.hdf,
MODPTHKM.A2007240.h08v06.005.2007243005432.hdf,
MOD09GHK.A2007241.h08v06.005.2007243231514.hdf,
MOD09GST.A2007241.h08v06.005.2007243230431.hdf,
MODMGGAD.A2007241.h08v06.005.2007243230150.hdf,
MODPTHKM.A2007241.h08v06.005.2007243230128.hdf,
MOD09GHK.A2007242.h08v06.005.2007245005400.hdf,
MOD09GST.A2007242.h08v06.005.2007245005018.hdf,
MODMGGAD.A2007242.h08v06.005.2007245004930.hdf,
MODPTHKM.A2007242.h08v06.005.2007245004922.hdf,
MOD09GHK.A2007243.h08v06.005.2007246020004.hdf,
MOD09GST.A2007243.h08v06.005.2007246014726.hdf,
MODMGGAD.A2007243.h08v06.005.2007246014636.hdf,
MODPTHKM.A2007243.h08v06.005.2007246014609.hdf,
MOD09GHK.A2007244.h08v06.005.2007246230653.hdf,
MOD09GST.A2007244.h08v06.005.2007246230243.hdf,
MODMGGAD.A2007244.h08v06.005.2007246230200.hdf,
MODPTHKM.A2007244.h08v06.005.2007246230151.hdf,
MOD09GHK.A2007245.h08v06.005.2007248090138.hdf,
MOD09GST.A2007245.h08v06.005.2007248083920.hdf,
MODMGGAD.A2007245.h08v06.005.2007248083721.hdf,
MODPTHKM.A2007245.h08v06.005.2007248083636.hdf,
MOD09GHK.A2007246.h08v06.005.2007249085420.hdf,
MOD09GST.A2007246.h08v06.005.2007249085024.hdf,
MODMGGAD.A2007246.h08v06.005.2007249084940.hdf,
MODPTHKM.A2007246.h08v06.005.2007249084929.hdf,
MOD09GHK.A2007247.h08v06.005.2007250003123.hdf,
MOD09GST.A2007247.h08v06.005.2007250002054.hdf,
MODMGGAD.A2007247.h08v06.005.2007250001916.hdf,
MODPTHKM.A2007247.h08v06.005.2007250001853.hdf,
MOD09GHK.A2007248.h08v06.005.2007250212413.hdf,
MOD09GST.A2007248.h08v06.005.2007250205836.hdf,
MODMGGAD.A2007248.h08v06.005.2007250204928.hdf,
MODPTHKM.A2007248.h08v06.005.2007250204904.hdf,
BRDF_DB.A2001001.h08v06.002.2005235120000.hdf
  GRINGPOINTLONGITUDE=-106.396225638704, -115.470053824421,
-103.573541793307, -95.4407395216898
  GRINGPOINTLATITUDE=19.8904251675885, 29.9999999973059,
30.0494066701966, 19.9379472075091
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2007-09-05
  RANGEENDINGTIME=23:59:59.999999
  RANGEBEGINNINGDATE=2007-08-21
  RANGEBEGINNINGTIME=00:00:00.000000
  PGEVERSION=5.0.11
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Aqua
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  QAPERCENTGOODQUALITY=30
  QAPERCENTOTHERQUALITY=41
  QAPERCENTNOTPRODUCEDCLOUD=0
  QAPERCENTNOTPRODUCEDOTHER=29
  HORIZONTALTILENUMBER=08
  VERTICALTILENUMBER=06
  TileID=51008006
  BRDFCODEID=AMBRALS_V4.0R1
  SETUPFILEID=6121997
  ALBEDOFILEID=6121997
  BRDFDATABASEVERSION=v1.0500m
  PERCENTLANDINTILE=95.056002
  PERCENTPROCESSEDINTILE=83.268062
  PERCENTNEWBRDFS=41.880168
  PERCENTSHAPEFIXEDBRDFS=41.387894
  PERCENTSUBSTITUTEBRDFS=0.000000
  AVERAGENUMBEROBS=6.733127
  WESTBOUNDINGCOORDINATE=-115.470053824421
  NORTHBOUNDINGCOORDINATE=29.9999999973059
  EASTBOUNDINGCOORDINATE=-95.7671313650353
  SOUTHBOUNDINGCOORDINATE=19.9999999982039
  GEOANYABNORMAL=False
  GEOESTMAXRMSERROR=75.0
  LONGNAME=MODIS/Terra+Aqua Nadir BRDF-Adjusted Reflectance 16-Day L3
Global 500m SIN Grid
  SPSOPARAMETERS=none, derived from 3669
  PROCESSINGCENTER=MODAPS
  CHARACTERISTICBINANGULARSIZE=15.0
  CHARACTERISTICBINSIZE=463.312716527778
  DATACOLUMNS=2400
  DATAROWS=2400
  GLOBALGRIDCOLUMNS=86400
  GLOBALGRIDROWS=43200
  MAXIMUMOBSERVATIONS=4
  NUMBEROFGRANULES=0
  COVERAGECALCULATIONMETHOD=volume
  NADIRDATARESOLUTION=500m
  PROCESSINGENVIRONMENT=Linux minion5083 2.6.8.1-26mdksmp #1 SMP Mon Nov
28 12:40:04 MST 2005 i686 IntelR XeonTM CPU 2.80GHz unknown GNU/Linux
  DESCRREVISION=5.1
  long_name=Nadir_Reflectance_Band1
  units=reflectance, no units
  valid_range=0, 32766
  _FillValue=32767
  scale_factor=0.0001
  add_offset=0
  scale_factor_err=0
  add_offset_err=0
  calibrated_nt=5
Corner Coordinates:
Upper Left  (-11119505.197, 3335851.559) (115d28'12.19"W, 30d 0'0.00"N)
Lower Left  (-11119505.197, 2223901.039) (106d25'4.00"W, 20d 0'0.00"N)
Upper Right (-10007554.677, 3335851.559) (103d55'22.97"W, 30d 0'0.00"N)
Lower Right (-10007554.677, 2223901.039) ( 95d46'33.60"W, 20d 0'0.00"N)
Center      (-10563529.937, 2779876.299) (104d49'15.25"W, 25d 0'0.00"N)
Band 1 Block=2400x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767

tile h18 v09 : not added because it makes my message too large


From jetelus at centrum.cz  Tue Nov  6 05:57:02 2007
From: jetelus at centrum.cz (jetelus@centrum.cz)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711051412.17853@centrum.cz>
References: 11010908.11215@centrum.cz> <200711010908.11215@centrum.cz>
	<472EF97B.4060006@gmx.de> <200711051412.17853@centrum.cz>
Message-ID: <200711061157.4869@centrum.cz>

_____________________________________________________________
> Od: jetelus@centrum.cz
> Komu: <gdal-dev@lists.maptools.org>
> Datum: 05.11.2007 14:22
> P?edm?t: Re: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
>
>>jetelus@centrum.cz schrieb:
>>>> jetelus@centrum.cz wrote:
>>>>     
>>>>>>> Hi, I open and display raster without problems but when I
>>>>>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>>>>>> this error message using GDAL 1.4.2:
>>>>>>>
>>>>>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>>>>>> \gdalrasterblock.cpp', line 219"
>>>>>>> (and app crashs)
>>>>>>>
>>>>>>> and this error message using GDAL 1.4.3:
>>>>>>>
>>>>>>> "Out of memory allocating 59765 byte raster cache block."
>>>>>>> (its little better becasuse app doesnt crash)
>>>>>>>
>>>>>>> RASTER INFO:
>>>>>>> bpp: 1
>>>>>>> compression: LZW
>>>>>>> resolution: 11953 x 10268.
>>>>>>> file size: 658kB
>>>>>>>
>>>>>>> When I convert this raster to 4 bits per pixel everything
>>>>>>> is ok and I get no errors but raster file size grows to
>>>>>>> 1.7MB. Any ideas? Thx.
>>>>>>>           
>>>>>> I don't know what device you have but you're trying to open ~120 MB
>>>>>> raster in one shot, on mobile device.
>>>>>> The error message is clear to me, you're dealing without of memory issue.
>>>>>>
>>>>>> IMHO, it's not a good idea to feed mobile device with images of that
>>>>>> big. Better tile them into smaller pieces, use zoom levels, etc.
>>>>>> GDAL for Windows CE gives you with tools to solve this problem.
>>>>>>
>>>>>> Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>>>>> GDAL features on a mobile device the same way as on normal workstation.
>>>>>> There are obvious hardware limitations you can not overcome.
>>>>>>
>>>>>> Cheers
>>>>>> --
>>>>>> Mateusz Loskot
>>>>>> http://mateusz.loskot.net
>>>>>>
>>>>>>         
>>>>> Thank you, I understand but why it works with 4 bpp version of same raster
>>>>> which is even bigger?
>>>>>       
>>>> You wrote that you don't get any errors, but does it mean you can load it
>>>> and display?
>>>>
>>>> Perhaps there is a bug, we can not exclude this option :-)
>>>> If you want, you can send me your image file and piece of code presenting
>>>> what are you doing exactly, then I will be able to investigate the problem.
>>>>
>>>> Cheers
>>>> -- 
>>>> Mateusz Loskot
>>>> http://mateusz.loskot.net
>>>>
>>>>     
>>>
>>> Yes, I can load and display image. I get this error only when zooming.
>>> (and no errors at all for 4bpp version)
>>>
>>> I have this code:
>>> (Windows Mobile 2003 Second Edition)
>>>
>>>  --------------------------------------------------------------------------------
>>>  ...
>>>  int panBandMap[1];
>>>  panBandMap[0] = 1;
>>>
>>>  unsigned char* pData = (unsigned char*) malloc(nBufXSize * nBufYSize);
>>>
>>>  if (!pData)
>>>  {
>>> 	CString msg("Not enough memory.");
>>> 	TRACE(msg);
>>> 	MessageBox(NULL,msg,NULL,0);
>>> 	return false;
>>>  }
>>>
>>>  CPLErr e=GDALDatasetRasterIO(HDataset, GF_Read, nXOff, nYOff, nXSize, nYSize,
>>>         pData, nBufXSize, nBufYSize, GDT_Byte, 1, panBandMap, 1, nBufXSize, 1);
>>>
>>>  if (e != CE_None)
>>>  {
>>>         free(pData);
>>> 	CString msg(CPLGetLastErrorMsg());
>>> 	TRACE(msg);
>>> 	MessageBox(NULL,msg,NULL,0);
>>>         return false;
>>>  }
>>>  ...
>>>  show loaded raster
>>>  ...
>>>  free(pData);
>>>  --------------------------------------------------------------------------------
>>>
>>> works for whole image:
>>>
>>> nXOff = 0
>>> nYOff = 0
>>> nXSize = 11953
>>> nYSize = 10268
>>> nBufXSize = 224
>>> nBufYSize = 192
>>>
>>> gives "Out of memory allocating 59765 byte raster cache block." for
>>> raster part (same for similar areas when zooming):
>>>
>>> nXOff = 3011
>>> nYOff = 1571
>>> nXSize = 7115
>>> nYSize = 6561
>>> nBufXSize = 248
>>> nBufYSize = 228
>>>
>>> Image is here (450kB):
>>>
>>> http://rapidshare.com/files/67552472/tif_lzw.rar.html
>>>
>>> Thx for your time.
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>>   
>>Hi,
>>
>>I tryed your image out with my code and was surprised that my code can
>>handle that large images ;) - so just a question: Are there overviews in
>>the image?
>>
>>With my code I was able to pan and zoom around - but after about 8
>>actions (I do not know exactly what the problem is - well, I will look
>>after it) I get the same error with the same amount of memory:
>>Return: 3
>>Last Error: Out of memory allocating 59765 byte raster cache block./
>>
>>This error occured one time after I zoomed in (with about factor 2) and
>>another time when I zoomed out (about factor 0.4) -but not all the time.
>>I was also abtle to zoom deep in and out.
>>With only panning I get this error not that fast I think.
>>
>>I don't know if this helps- but I try to test some more tonight.
>>
>>Bye,
>>Tom
>>
>
>Hi,
>thx for testing the image. I tryed to zoom to very small areas and it works.
>So I added check for free memory before and after GDALDatasetRasterIO call
>and discovered there is 11 MB difference. This is probably reason why all
>following operations with larger areas are out of memory.
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>

Finally I solved it! I was hunting that lost memory and I
discovered there is cache system implemented in GDAL :-)
Problem is it's default size - 40 MB - too much for CE.
I set it to 4 MB using GDALSetCacheMax() and all errors are
gone - lol I suck I know :) but it would be nice to add some
note to GDALDatasetRasterIO documentation - something like
there is cache system which memory usage can be controlled.
I can display even 5 MB JPEGs now on CE! Have a nice day!

to Tom: There are no overviews in that image. BTW how are you
doing with that CCITTFax? I am interested in it too :)


From warmerdam at pobox.com  Tue Nov  6 08:40:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <4730436F.1000704@sarvision.nl>
References: <4730436F.1000704@sarvision.nl>
Message-ID: <47306EC8.9060706@pobox.com>

Vincent Schut wrote:
> The puzzle:
> Then I tried to merge some modis tiles by using VRT, using vrt_merge.py.
> I was very puzzeled when I got an error message telling me it wouldn't
> merge my tiles because they did not have the same scale. 

Vincent,

vrt_merge.py isn't part of GDAL - could you provide a pointer to the
version you are using?

> After some
> investigation, it indeed appeared they didn't! Pixel size (as calculated
> by gdal) is different per tile. At around (0,0) degrees latlong, pixels
> are square and of size 463.312716527916677 meters. The further one goes
> from the equator or 0 deg longitude, the more the pixel size in that
> direction differs from this 463.312716527916677 and pixels are not
> square anymore.

I see the pixels are just very slightly not-square.  The actually bounds
in sinusoidal projection are apparently computed from the lat/long bounds
for the image so they are sensitive to small differences due to floating
point error, and issues in the sinusoidal equations.  I see the differences
are roughly 12 digits into the pixel size and represent a difference in
pixel size of roughly one billionth of a meter or (I think) roughly one
millionth of a meter in the origin/corner values.

I believe the issue is an undue sensitivity to slight differences in
pixel size in vrt_merge.py.

> the gdalinfo's:
> 
> tile h18 v09 (ul = 0,0, note the square pixels)
> Origin = (0.000000000000000,-0.000000000000000)
> Pixel Size = (463.312716527916677,-463.312716527916677)

> 
> tile: h17 v01

> Origin = (-1111950.519667000044137,8895604.157332999631763)
> Pixel Size = (463.312716527916677,-463.312716527499731)

> 
> tile h08 v06
> Origin = (-11119505.196667000651360,3335851.558999999891967)
> Pixel Size = (463.312716527917246,-463.312716527916677)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From schut at sarvision.nl  Tue Nov  6 09:06:45 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <47306EC8.9060706@pobox.com>
References: <4730436F.1000704@sarvision.nl> <47306EC8.9060706@pobox.com>
Message-ID: <473074F5.7040201@sarvision.nl>

Frank Warmerdam wrote:
> Vincent Schut wrote:
>> The puzzle:
>> Then I tried to merge some modis tiles by using VRT, using vrt_merge.py.
>> I was very puzzeled when I got an error message telling me it wouldn't
>> merge my tiles because they did not have the same scale. 
>
> Vincent,
>
> vrt_merge.py isn't part of GDAL - could you provide a pointer to the
> version you are using?
I know that. It is however a very valuable tool for me :-)
I think I picked it up from the ml somewhere sometime long ago... Not
easy to provide a pointer. Might have been this one:
http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py, but I'm not
sure. And I've adapted it to correct for an index error in the
colortable support somewhere, if I remember correctly. And for
ngbindings instead of ogbindings. I can send you a copy if you'd like.
>
>> After some
>> investigation, it indeed appeared they didn't! Pixel size (as calculated
>> by gdal) is different per tile. At around (0,0) degrees latlong, pixels
>> are square and of size 463.312716527916677 meters. The further one goes
>> from the equator or 0 deg longitude, the more the pixel size in that
>> direction differs from this 463.312716527916677 and pixels are not
>> square anymore.
>
> I see the pixels are just very slightly not-square.  The actually bounds
> in sinusoidal projection are apparently computed from the lat/long bounds
> for the image so they are sensitive to small differences due to floating
> point error, and issues in the sinusoidal equations.  I see the
> differences
> are roughly 12 digits into the pixel size and represent a difference in
> pixel size of roughly one billionth of a meter or (I think) roughly one
> millionth of a meter in the origin/corner values.
That is true. I see now that the metadata doesn't provide projected
corner coordinates, only pixel size
(CHARACTERISTICBINSIZE=463.312716527778)... Hmm, NASA, bad boy...
However, I have read somewhere that the sinusoidal projection would be
one of the most accurate for worldwide coverage, so I still am a bit
surprised at the differences. As I was used to work in unprojected
lat/lon spaces till now, I admit I have been a bit oversensitive to
nanometer scales... ;-)
OK, now to find out whether CHARACTERISTICBINSIZE is more accurate, or
the latlon corner coordinates are more accurate...
>
> I believe the issue is an undue sensitivity to slight differences in
> pixel size in vrt_merge.py.
I think so too, now. I think I'll create my own script to mosaic these
tiles, just forcing them right into the grid... :)
>
>> the gdalinfo's:
>>
>> tile h18 v09 (ul = 0,0, note the square pixels)
>> Origin = (0.000000000000000,-0.000000000000000)
>> Pixel Size = (463.312716527916677,-463.312716527916677)
>
>>
>> tile: h17 v01
>
>> Origin = (-1111950.519667000044137,8895604.157332999631763)
>> Pixel Size = (463.312716527916677,-463.312716527499731)
>
>>
>> tile h08 v06
>> Origin = (-11119505.196667000651360,3335851.558999999891967)
>> Pixel Size = (463.312716527917246,-463.312716527916677)
>
> Best regards,
Thanks!
VS.

From schut at sarvision.nl  Tue Nov  6 09:24:23 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <47306EC8.9060706@pobox.com>
References: <4730436F.1000704@sarvision.nl> <47306EC8.9060706@pobox.com>
Message-ID: <47307917.9080107@sarvision.nl>

Frank Warmerdam wrote:
> Vincent Schut wrote:
>> The puzzle:
>> Then I tried to merge some modis tiles by using VRT, using vrt_merge.py.
>> I was very puzzeled when I got an error message telling me it wouldn't
>> merge my tiles because they did not have the same scale. 
>
> Vincent,
>
> vrt_merge.py isn't part of GDAL - could you provide a pointer to the
> version you are using?
>
>> After some
>> investigation, it indeed appeared they didn't! Pixel size (as calculated
>> by gdal) is different per tile. At around (0,0) degrees latlong, pixels
>> are square and of size 463.312716527916677 meters. The further one goes
>> from the equator or 0 deg longitude, the more the pixel size in that
>> direction differs from this 463.312716527916677 and pixels are not
>> square anymore.
>
> I see the pixels are just very slightly not-square.  The actually bounds
> in sinusoidal projection are apparently computed from the lat/long bounds
> for the image so they are sensitive to small differences due to floating
> point error, and issues in the sinusoidal equations.  I see the
> differences
> are roughly 12 digits into the pixel size and represent a difference in
> pixel size of roughly one billionth of a meter or (I think) roughly one
> millionth of a meter in the origin/corner values.
And as an extra example to the not-so-good metadata that NASA apparently
ships with their products:
- they say they use a spheroid of 6371007.181.
- md says GLOBALGRIDCOLUMNS=86400
- md says CHARACTERISTICBINSIZE=463.312716527778
- (6371007.181 * 2pi) / 86400 = 463.31271656938469
Now which one is non-accurate, their spheroid or their pixel size? OK,
we are still talking below-mm scales, but still I think it is a bit
embarassing... Or maybe they have a more accurate pi than my python
has... :-)

OK, let's close the issue. I'll just use their spheroid and calculate my
own pixel sizes.

Cheers,
VS.

From nhv at cape.com  Tue Nov  6 09:26:14 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <473074F5.7040201@sarvision.nl>
Message-ID: <20071106123419.7A35F28018@mrelay1.cape.com>

Vincent Schut writes:
> 
> Frank Warmerdam wrote:
> > Vincent Schut wrote:
> >> The puzzle:
> >> Then I tried to merge some modis tiles by using VRT, using 
> vrt_merge.py.
> >> I was very puzzeled when I got an error message telling me 
> it wouldn't
> >> merge my tiles because they did not have the same scale. 
> >
> > Vincent,
> >
> > vrt_merge.py isn't part of GDAL - could you provide a pointer to the
> > version you are using?
> I know that. It is however a very valuable tool for me :-)
> I think I picked it up from the ml somewhere sometime long ago... Not
> easy to provide a pointer. Might have been this one:
> http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py, but I'm not
> sure. And I've adapted it to correct for an index error in the
> colortable support somewhere, if I remember correctly. And for
> ngbindings instead of ogbindings. I can send you a copy if you'd like.


AFAIK this is now part of the gdal distribution

http://trac.osgeo.org/gdal/browser/trunk/gdal/pymod/samples/gdal_vrtmerge.py

I can't remember when I fixed the 'precision' to match the GDAL 'C'
expectations

So I would try the version above might get lucky  :-)

Cheers

Norman


From warmerdam at pobox.com  Tue Nov  6 09:36:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <473074F5.7040201@sarvision.nl>
References: <4730436F.1000704@sarvision.nl> <47306EC8.9060706@pobox.com>
	<473074F5.7040201@sarvision.nl>
Message-ID: <47307BDE.6000008@pobox.com>

Vincent Schut wrote:
> Frank Warmerdam wrote:
>> Vincent Schut wrote:
>>> The puzzle:
>>> Then I tried to merge some modis tiles by using VRT, using vrt_merge.py.
>>> I was very puzzeled when I got an error message telling me it wouldn't
>>> merge my tiles because they did not have the same scale. 
>> Vincent,
>>
>> vrt_merge.py isn't part of GDAL - could you provide a pointer to the
>> version you are using?
> I know that. It is however a very valuable tool for me :-)
> I think I picked it up from the ml somewhere sometime long ago... Not
> easy to provide a pointer. Might have been this one:
> http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py, but I'm not
> sure. And I've adapted it to correct for an index error in the
> colortable support somewhere, if I remember correctly. And for
> ngbindings instead of ogbindings. I can send you a copy if you'd like.

Vincent,

I wouldn't mind incorporating it into GDAL, even if only in "samples" for
now.  My main point is that it was hard for me to second guess the
vrt_merge.py aspects.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Tue Nov  6 10:00:48 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <47307917.9080107@sarvision.nl>
References: <4730436F.1000704@sarvision.nl> <47306EC8.9060706@pobox.com>
	<47307917.9080107@sarvision.nl>
Message-ID: <20071106150048.GA10057@ak4719.spb.edu>

On Tue, Nov 06, 2007 at 03:24:23PM +0100, Vincent Schut wrote:
> > I see the pixels are just very slightly not-square.  The actually
> > bounds in sinusoidal projection are apparently computed from the
> > lat/long bounds for the image so they are sensitive to small
> > differences due to floating point error, and issues in the
> > sinusoidal equations.  I see the differences are roughly 12 digits
> > into the pixel size and represent a difference in pixel size of
> > roughly one billionth of a meter or (I think) roughly one millionth
> > of a meter in the origin/corner values.
> And as an extra example to the not-so-good metadata that NASA apparently
> ships with their products:
> - they say they use a spheroid of 6371007.181.
> - md says GLOBALGRIDCOLUMNS=86400
> - md says CHARACTERISTICBINSIZE=463.312716527778
> - (6371007.181 * 2pi) / 86400 = 463.31271656938469
> Now which one is non-accurate, their spheroid or their pixel size? OK,
> we are still talking below-mm scales, but still I think it is a bit
> embarassing... Or maybe they have a more accurate pi than my python
> has... :-)

Vincent,

Note, that projection and georeferencing parameters reported by GDAL
are not fetched from the metadata (well, let say they are not fetched
from anything visible). So you can find difference between metadata
records and projection info, that is not necessary a serious problem.

Another source of differences is a way how these data stored in HDF. All
parameters are serialized in ASCII strings, so we will always have
conversion/rounding/encoding errors with this stuff. Personally, I do
not care about so subtle errors. 

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Tue Nov  6 11:11:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
Message-ID: <47309214.9030004@pobox.com>

Eric Lemoine wrote:
>> It would be helpful to see the results, but generally it is hard to
>> downsample repeating patterns without odd aliasing effects.  The best
>> is to be very certain that exact factor of 2 downsamplings are done in
>> which case the algorithms should sample the data in a consistent way.
> 
> Thanks for your response Franck. Would you mind elaborate a bit more
> on your last sentence?
> 
> <http://dev.camptocamp.com/grandlyon_plu/problem_images/>
> 
> Three screenshots at 1/20000, 1/10000, and 1/5000.

Eric,

I've looked at the three images.  The 1/5000 is the original, right?  Is this
really the *original*?  It seems the hatching spacing is not exactly uniform
and darkness of the hatch is not uniform.  So if this is what you are working
from you are basically doomed to relatively poor and inconsistent results.

The hatching does not follow on nice power of 2 boundaries, so nearest
neighbour downsampling will certainly produce inconsistent results (some
hatches will be completely missed for instance).  Are the 1/10000 and
1/20000 samples you provide produced with averaging?  With MapServer or
gdaladdo?

MapServer's "averaging" does not always go back to the original image to
do the averaging (I think), so as you start to downsample a lot it will
suffer from nearest neighbour "missing a line" effects which seems to be
the case.  Gdaladdo on the other hand should not have this effect.

Basically raster hatching effects put through sampling processes suck,
and at most you can hope for not-too-bad in my opinion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maplabs at light42.com  Tue Nov  6 11:46:25 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <47309214.9030004@pobox.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
	<47309214.9030004@pobox.com>
Message-ID: <D02E7CEA-8C87-11DC-954B-000A277A733C@light42.com>


On Nov 6, 2007, at 8:11 AM, Frank Warmerdam wrote:
> Eric Lemoine wrote:
>>> It would be helpful to see the results, but generally it is hard to
>>> downsample repeating patterns without odd aliasing effects.  The best
>>> is to be very certain that exact factor of 2 downsamplings are done 
>>> in
>>> which case the algorithms should sample the data in a consistent way.
>> Thanks for your response Franck. Would you mind elaborate a bit more
>> on your last sentence?
>> <http://dev.camptocamp.com/grandlyon_plu/problem_images/>
>> Three screenshots at 1/20000, 1/10000, and 1/5000.
>
> I've looked at the three images.  The 1/5000 is the original, right?  
> Is this
> really the *original*?  It seems the hatching spacing is not exactly 
> uniform
> and darkness of the hatch is not uniform.  So if this is what you are 
> working
> from you are basically doomed to relatively poor and inconsistent 
> results.
>
> The hatching does not follow on nice power of 2 boundaries, so nearest
> neighbour downsampling will certainly produce inconsistent results 
> (some
> hatches will be completely missed for instance).  Are the 1/10000 and
> 1/20000 samples you provide produced with averaging?  With MapServer or
> gdaladdo?
> ...
> Basically raster hatching effects put through sampling processes suck,
> and at most you can hope for not-too-bad in my opinion.
>

people use Gaussian blur and others at that point, y?


From Chris.Barker at noaa.gov  Tue Nov  6 12:26:38 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <47307917.9080107@sarvision.nl>
References: <4730436F.1000704@sarvision.nl> <47306EC8.9060706@pobox.com>
	<47307917.9080107@sarvision.nl>
Message-ID: <4730A3CE.3050007@noaa.gov>

Vincent Schut wrote:
> - md says CHARACTERISTICBINSIZE=463.312716527778
> - (6371007.181 * 2pi) / 86400 = 463.31271656938469
> Now which one is non-accurate, their spheroid or their pixel size?

These are the same to single precision floating point -- was all 
storage/calculation done in doubles? I expect not. We all know that 
checking equality is problematic with floating point -- all you can do 
is check that they are the same to the precision expected, and this sure 
looks close to me.

looking closer, they are the same for the first 10 decimal digits, and 
your calculation is based on ten digits input.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Tue Nov  6 12:30:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How do I set up gdal_translate to recognize GSAG?
In-Reply-To: <472F9168.2080801@usgs.gov>
References: <472F9168.2080801@usgs.gov>
Message-ID: <4730A49B.5010503@pobox.com>

Evan Thoms wrote:
> Hi,
> I need to convert an ascii surfer grid to a geotiff, but that format is 
> unsupported by gdal_translate without modification. I utterly fail to 
> understand how to add the required driver to the command. Can anyone 
> explain in 101 language?

Evan,

If you have the driver built into GDAL you shouldn't need to do anything
special on the commandline.  Just something like:

   gdal_translate your_gsag.asc out.tif

You can verify you have the driver registered by doing:

   gdal_translate --format gsag

The driver does not appear to be in 1.4, but is in 1.5 (aka svn-trunk).  So
you either need to build from subversion (or a nightly svn-trunk snapshot) or
get development binaries (such as FWTools).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ethoms at usgs.gov  Tue Nov  6 14:41:54 2007
From: ethoms at usgs.gov (Evan Thoms)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How do I set up gdal_translate to recognize GSAG?
In-Reply-To: <4730A49B.5010503@pobox.com>
References: <472F9168.2080801@usgs.gov> <4730A49B.5010503@pobox.com>
Message-ID: <4730C382.9050606@usgs.gov>

Thanks Frank,
Right, I only had 1.4 and gsag was not a supported format.
I checked out FWtools and the driver's been added there.

cheers

Evan Thoms
Geologist\GIS Specialist
U.S. Geological Survey, Alaska Science Center 
4200 University Drive, Anchorage,  AK 99508          
voice: 907-786-7409	fax: 907-786-7401
ethoms@usgs.gov 



Frank Warmerdam wrote:
> Evan Thoms wrote:
>> Hi,
>> I need to convert an ascii surfer grid to a geotiff, but that format 
>> is unsupported by gdal_translate without modification. I utterly fail 
>> to understand how to add the required driver to the command. Can 
>> anyone explain in 101 language?
>
> Evan,
>
> If you have the driver built into GDAL you shouldn't need to do anything
> special on the commandline.  Just something like:
>
>   gdal_translate your_gsag.asc out.tif
>
> You can verify you have the driver registered by doing:
>
>   gdal_translate --format gsag
>
> The driver does not appear to be in 1.4, but is in 1.5 (aka 
> svn-trunk).  So
> you either need to build from subversion (or a nightly svn-trunk 
> snapshot) or
> get development binaries (such as FWTools).
>
> Best regards,

From mdsumner at utas.edu.au  Tue Nov  6 15:57:25 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems with datum transform AGD66 to GDA94
In-Reply-To: <200711061609.lA6G9toA001972@duke.maptools.org>
References: <200711061609.lA6G9toA001972@duke.maptools.org>
Message-ID: <4730D535.8010409@utas.edu.au>

Hello,

The use of ellps=aust_SA does not seem to correspond to AGD66 
(Australian Geodetic Datum 1966)
as suggested in epsg:4202.

I want to convert +longlat +ellps=aust_SA to +longlat +ellps=WGS84  (or 
longlat GDA94)

I thought "GDA94" was close enough to WGS84 to be fine (within a metre 
or so).

Also, the use of
+proj=longlat +a=6378160 +rf=298.250000000055 
+towgs84=-29.193,41.212,130.73,-0.246,-0.374,-0.329,-2.955 +no_defs
as suggested by 
http://lists.maptools.org/pipermail/gdal-dev/2006-February/008090.html 
seems *closer*, but no where on a par with the example data here

http://www.dse.vic.gov.au/land/lcnlc2.nsf/LinkView/9B33746B3D77040F4A256A250008E70A5B923E73477D6D65CA256E5F0013D73B

I wonder is there something stupid I'm missing? 

The examples below convert longlat AGD66 to MGA94, simply because I find 
it easier to compare the results by eye. My original goal was simply to 
convert longlat AGD66 to longlat GDA94/WGS84, with similar problems.

I'm using FWTools 1.4.2 .
The following examples attempts to convert the AGD66 lonlat to MGA94 
(using first line from example file "transform66_99.csv" on that site).
I'd appreciate any feedback about either what might be wrong or what I 
am missing.

Here I give the GDAit benchmark, for AGD66 to MGA94 (55), then some 
variants with the resulting Northin/Easting from converting a shapefile 
using aust_SA, the full parameter list, OGC WKT, and Manifold GIS.

Manifold's is the closest, but also the easiest to not get wrong - so 
I'm hoping to be pointed in the right direction for using ogr2ogr for 
datum conversion.

Cheers, Mike.

##########################
##-- GDAit Benchmark
longlat AGD 66
144.423551833 -37.952535778

MGA(55) GDA94
273741.3314    5796489.766
##--
#########################

#########################
##-- aust_SA
ogr2ogr -s_srs "+proj=longlat +ellps=aust_SA" -t_srs "+proj=utm +zone=55 
+south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs" MGA94.shp 
AGD66.shp
POINT (273630.24303696747 5796320.4235594533)
##--
#########################

#########################
##-- expanded PROJ
ogr2ogr -s_srs "+proj=longlat +a=6378160 +rf=298.250000000055 
+towgs84=-29.193,41.212,130.73,-0.246,-0.374,-0.329,-2.955 +no_defs" 
-t_srs "+proj=utm +zone=55 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 
+units=m +no_defs" MGA94.shp AGD66.shp
POINT (273602.06779312098 5796438.2737073004)
##--
#########################

#########################
##-- With PRJ (AGD66.prj)
AGD66.prj = 
GEOGCS["GCS_Australian_1966",DATUM["D_Australian_1966",SPHEROID["Australian",6378160.000000,298.250000]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]
ogr2ogr  -s_srs "AGD66.prj" -t_srs "+proj=utm +zone=55 +south 
+ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs" MGA94.shp AGD66.shp
POINT (273630.24303696747 5796320.4235594533)
##--
#########################

#########################
##-- With Manifold GIS:
273741.3462 5796489.7426
##--
##########################









From eric.c2c at gmail.com  Tue Nov  6 17:26:26 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <47309214.9030004@pobox.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
	<47309214.9030004@pobox.com>
Message-ID: <5ec103de0711061426v3a631d73s20d2e5f9ddeaf066@mail.gmail.com>

On 11/6/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Eric Lemoine wrote:
> >> It would be helpful to see the results, but generally it is hard to
> >> downsample repeating patterns without odd aliasing effects.  The best
> >> is to be very certain that exact factor of 2 downsamplings are done in
> >> which case the algorithms should sample the data in a consistent way.
> >
> > Thanks for your response Franck. Would you mind elaborate a bit more
> > on your last sentence?
> >
> > <http://dev.camptocamp.com/grandlyon_plu/problem_images/>
> >
> > Three screenshots at 1/20000, 1/10000, and 1/5000.
>
> Eric,
>
> I've looked at the three images.  The 1/5000 is the original, right?

The original tiff is 1/5000 yes.

> Is this
> really the *original*?

Well no. It went through gdal_translate (tiff to geotiff), gdaladdo,
and got handled by MapServer.

> It seems the hatching spacing is not exactly uniform
> and darkness of the hatch is not uniform.  So if this is what you are working
> from you are basically doomed to relatively poor and inconsistent results.
>
> The hatching does not follow on nice power of 2 boundaries, so nearest
> neighbour downsampling will certainly produce inconsistent results (some
> hatches will be completely missed for instance).  Are the 1/10000 and
> 1/20000 samples you provide produced with averaging?  With MapServer or
> gdaladdo?

Average is used both in gdaladdo and MapServer. If I use nearest in
MapServer, or gdaladdo, or both, the results get very bad. Average
with both gdaladdo and MapServer is what's given me the best results,
which aren't good enough to my customer ;-)

> MapServer's "averaging" does not always go back to the original image to
> do the averaging (I think), so as you start to downsample a lot it will
> suffer from nearest neighbour "missing a line" effects which seems to be
> the case.  Gdaladdo on the other hand should not have this effect.
>
> Basically raster hatching effects put through sampling processes suck,
> and at most you can hope for not-too-bad in my opinion.

I'm going to tell my customer about this :-)

Thanks a lot for your response Frank. This helps me understand the problem.
--
Eric

From AWilliams at rapidmap.com  Tue Nov  6 17:31:27 2007
From: AWilliams at rapidmap.com (Andrew Williams)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems with datum transform AGD66 to GDA94
In-Reply-To: <4730D535.8010409@utas.edu.au>
References: <200711061609.lA6G9toA001972@duke.maptools.org>
	<4730D535.8010409@utas.edu.au>
Message-ID: <29C3A52E0876C94C97BD6443FA96F73302539CB9F2@rms03.rapidmap.local>

Mike,
Based on your DSE link, one of the things you may be missing is that GDAit is using a local grid distortion model as well as doing a point to point conversion from AMG to MGA. The local distortion model uses a grid of observed values to determine additional local shifts. GDAit is considered the most correct conversion for AMG to MGA and depending on location this can be a metre in magnitude.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Michael Sumner
Sent: Wednesday, 7 November 2007 7:57 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problems with datum transform AGD66 to GDA94

Hello,

The use of ellps=aust_SA does not seem to correspond to AGD66
(Australian Geodetic Datum 1966)
as suggested in epsg:4202.

I want to convert +longlat +ellps=aust_SA to +longlat +ellps=WGS84  (or
longlat GDA94)

I thought "GDA94" was close enough to WGS84 to be fine (within a metre
or so).

Also, the use of
+proj=longlat +a=6378160 +rf=298.250000000055
+towgs84=-29.193,41.212,130.73,-0.246,-0.374,-0.329,-2.955 +no_defs
as suggested by
http://lists.maptools.org/pipermail/gdal-dev/2006-February/008090.html
seems *closer*, but no where on a par with the example data here

http://www.dse.vic.gov.au/land/lcnlc2.nsf/LinkView/9B33746B3D77040F4A256A250008E70A5B923E73477D6D65CA256E5F0013D73B

I wonder is there something stupid I'm missing?

The examples below convert longlat AGD66 to MGA94, simply because I find
it easier to compare the results by eye. My original goal was simply to
convert longlat AGD66 to longlat GDA94/WGS84, with similar problems.

I'm using FWTools 1.4.2 .
The following examples attempts to convert the AGD66 lonlat to MGA94
(using first line from example file "transform66_99.csv" on that site).
I'd appreciate any feedback about either what might be wrong or what I
am missing.

Here I give the GDAit benchmark, for AGD66 to MGA94 (55), then some
variants with the resulting Northin/Easting from converting a shapefile
using aust_SA, the full parameter list, OGC WKT, and Manifold GIS.

Manifold's is the closest, but also the easiest to not get wrong - so
I'm hoping to be pointed in the right direction for using ogr2ogr for
datum conversion.

Cheers, Mike.

##########################
##-- GDAit Benchmark
longlat AGD 66
144.423551833 -37.952535778

MGA(55) GDA94
273741.3314    5796489.766
##--
#########################

#########################
##-- aust_SA
ogr2ogr -s_srs "+proj=longlat +ellps=aust_SA" -t_srs "+proj=utm +zone=55
+south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs" MGA94.shp
AGD66.shp
POINT (273630.24303696747 5796320.4235594533)
##--
#########################

#########################
##-- expanded PROJ
ogr2ogr -s_srs "+proj=longlat +a=6378160 +rf=298.250000000055
+towgs84=-29.193,41.212,130.73,-0.246,-0.374,-0.329,-2.955 +no_defs"
-t_srs "+proj=utm +zone=55 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
+units=m +no_defs" MGA94.shp AGD66.shp
POINT (273602.06779312098 5796438.2737073004)
##--
#########################

#########################
##-- With PRJ (AGD66.prj)
AGD66.prj =
GEOGCS["GCS_Australian_1966",DATUM["D_Australian_1966",SPHEROID["Australian",6378160.000000,298.250000]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]
ogr2ogr  -s_srs "AGD66.prj" -t_srs "+proj=utm +zone=55 +south
+ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs" MGA94.shp AGD66.shp
POINT (273630.24303696747 5796320.4235594533)
##--
#########################

#########################
##-- With Manifold GIS:
273741.3462 5796489.7426
##--
##########################








_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From russo at bogodyn.org  Tue Nov  6 18:31:26 2007
From: russo at bogodyn.org (Tom Russo)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] SVN main trunk compilation woes on FreeBSD
Message-ID: <20071106233126.GB52453@bogodyn.org>

I had a few problems getting gdal from svn head to compile on BSD this weekend.
It's been a long time since I've updated gdal (I think the last time was 
somewhere around a recent release, but still off the svn version), and I use
the python bindings.

My configure line was:


./configure --without-libgrass --without-grass --with-local=/usr/local --with-python 

This gets me (ultimately) the configure output:

GDAL is now configured for i386-unknown-freebsd6.3

  Installation directory:    /usr/local
  C compiler:                gcc -O2 
  C++ compiler:              g++ -O2 

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            yes
  LIBPNG support:            external
  LIBTIFF support:           external (BigTIFF=no)
  LIBGEOTIFF support:        external
  LIBJPEG support:           external
  LIBGIF support:            internal
  OGDI support:              yes
  HDF4 support:              no
  HDF5 support:              no
  KAKADU support:            no
  JASPER support:            yes (GeoJP2=no)
  ECW support:               no
  MrSID support:             no
  GRIB support:              no
  CURL support (wms/wcs/...):yes
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            no
  Expat support:             no
  ODBC support:              no
  PGEO support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            no
  DWGdirect support          no
  PANORAMA GIS support:      no
  INFORMIX DataBlade support:no
  GEOS support:              yes


  Old-gen python          no
  SWIG Bindings:          python 

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  enable debug mode:         no
  hide internal symbols:     no


But when I build I get a ton of errors like:
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found

and finally:

libtool: link: g++  /users/russo/src/gdal/.libs/libgdal.so -L/usr/local/lib /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/local/lib/libjasper.so -logdi31 -lgeotiff /usr/local/lib/libtiff.so -lm /usr/local/lib/libjpeg.so -lpng /usr/local/lib/libnetcdf.so -lpq /usr/local/lib/libcurl.so -lssl -lcrypto -lz -Wl,-rpath -Wl,/usr/local/lib
/usr/lib/crt1.o(.text+0x72): In function `_start':
: undefined reference to `main'

In the end I simply took the path of least resistance and use 
"--without-libtool" to get past linker errors.  I have no idea how to proceed
with libtool here, but I can live without it.

The other problem was that when built with the new python bindings I got a 
make error ("don't know how to make build").  Building with --with-ogpython
worked.

Turns out the second problem is very simple to fix, and I'm attaching the patch.
FreeBSD does not have GNU Make as its default "make" program, you need to use
"gmake" to build gdal.  But the swig GNUMakefile has a hard coded "make build"
(among other things) in its rules, where it should have "$(MAKE) build" so that
the actual make program in use gets propagated downward.  With this attached
patch, I can build gdal on FreeBSD with the configure line:

-- 
Tom Russo    KM5VY   SAR502   DM64ux          http://www.swcp.com/~russo/
Tijeras, NM  QRPL#1592 K2#398  SOC#236 AHTB#1 http://kevan.org/brain.cgi?DDTNM
"And, isn't sanity really just a one-trick pony anyway? I mean all you get is
 one trick, rational thinking, but when you're good and crazy, oooh, oooh,
 oooh, the sky is the limit!"  --- The Tick
-------------- next part --------------
Index: swig/GNUmakefile
===================================================================
--- swig/GNUmakefile	(revision 12615)
+++ swig/GNUmakefile	(working copy)
@@ -17,16 +17,16 @@
 dist: generate
 
 clean:
-	for dir in ${BINDINGS}; do (cd $$dir; make clean ); done
+	for dir in ${BINDINGS}; do (cd $$dir; $(MAKE) clean ); done
 
 veryclean:
-	for dir in ${ALL_BINDINGS}; do (cd $$dir; make veryclean ); done
+	for dir in ${ALL_BINDINGS}; do (cd $$dir; $(MAKE) veryclean ); done
 
 generate:
-	for dir in ${ALL_BINDINGS}; do (cd $$dir; make generate ); done
+	for dir in ${ALL_BINDINGS}; do (cd $$dir; $(MAKE) generate ); done
 
 build:
-	for dir in ${BINDINGS}; do (cd $$dir; make build ); done
+	for dir in ${BINDINGS}; do (cd $$dir; $(MAKE) build ); done
 
 install:
-	for dir in ${BINDINGS}; do (cd $$dir; make install ); done
+	for dir in ${BINDINGS}; do (cd $$dir; $(MAKE) install ); done
From mdsumner at utas.edu.au  Tue Nov  6 18:49:07 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems with datum transform AGD66 to GDA94
Message-ID: <200711062349.lA6Nn7sC014455@corinna.its.utas.edu.au>

Thanks Andrew, 

That's what I thought - but the differences between the GDAit and ogr2ogr 
conversions are 100-200m. 

That is worse than I thought we could expect. I simply don't know how
else to specify the conversion for this transformation. 

Cheers, Mike.

>Mike,
>Based on your DSE link, one of the things you may be missing is that
GDAit is using a >local grid distortion model as well as doing a point to 
point conversion from AMG to MGA. >The local distortion model uses a grid 
of observed values to determine additional local >shifts. GDAit is
considered the most correct conversion for AMG to MGA and depending on
>location this can be a metre in magnitude.




From warmerdam at pobox.com  Tue Nov  6 19:23:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] SVN main trunk compilation woes on FreeBSD
In-Reply-To: <20071106233126.GB52453@bogodyn.org>
References: <20071106233126.GB52453@bogodyn.org>
Message-ID: <4731057A.6030907@pobox.com>

Tom Russo wrote:
> Turns out the second problem is very simple to fix, and I'm attaching the patch.
> FreeBSD does not have GNU Make as its default "make" program, you need to use
> "gmake" to build gdal.  But the swig GNUMakefile has a hard coded "make build"
> (among other things) in its rules, where it should have "$(MAKE) build" so that
> the actual make program in use gets propagated downward.  With this attached
> patch, I can build gdal on FreeBSD with the configure line:

Tom,

I have applied the swig/GNUmakefile patch.

I'm not sure why libtool isn't working.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From nate at deltateck.com  Tue Nov  6 19:06:47 2007
From: nate at deltateck.com (Nate Jennings)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Questions building GDAL libraries for Windows OS
Message-ID: <4f44d320711061606v5381d880v8554673b3bc8d31b@mail.gmail.com>

I know this has probably been stated several times and have never gone
through the build process to use the gdal libraries, so any solid direction
is much appreciated.

I am wanting to use the gdal libraries to create some image processing
functions using c++ (g++).

1.  Do I need to actually build the gdal libraries to use in my code?  I saw
on some examples from the internet that are using c++ that they "include"
the gdal_priv.h header file and others.  When I look at the bindaries I
downloaded from the gdal site, I saw the gdal_priv.h as well as others.  I
also noticed that the gdal_priv.h file also contains other header files from
gdal.  This leads me to believe that I do actually need to build the
libraries.

2. If this is the case, then can someone provide more specifics than what is
on the gdal site for building the libraries, preferably using g++ on a
Windows OS?  Since I am new at this aspect (I can program in Python and
C++), I need some additional guidance.  Step by step would be great.  Please
let me know of other software or utilities I need to download.  I have g++
installed on my system.

3.  Also, if I create a little executable for an image processing function,
do I need to include this compiled set of libraries with my exe?  and does
the user of the exe need to have the gdal libraries on their system?  Are
there any other dependencies I need to be aware of?

Thank you in advance for any direction and assistance.

Nate

PS.  I was able to create a little filter program using Python and the
compiled gdal libraries( thanks to Howard Butler) which can be found on my
website below under Skillset--Application Development.

-- 
http://www.jenningsplanet.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071106/52e076ea/attachment.html
From AWilliams at rapidmap.com  Tue Nov  6 19:46:02 2007
From: AWilliams at rapidmap.com (Andrew Williams)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] problems with datum transform AGD66 to GDA94
In-Reply-To: <200711062349.lA6Nn7sC014455@corinna.its.utas.edu.au>
References: <200711062349.lA6Nn7sC014455@corinna.its.utas.edu.au>
Message-ID: <29C3A52E0876C94C97BD6443FA96F73302539CB9F8@rms03.rapidmap.local>

OK, now that's a bit different. In this magnitude we're often talking wrong datum.

You will see this sort of magnitude when you 'assume' your source datum is AGD66 and convert to WGS84 when in fact the source datum was WGS84 all along.

Also vice versa.

However I just noticed you may have gotten the sign on one of the conversion parameters wrong.

You had

+proj=longlat +a=6378160 +rf=298.250000000055
+towgs84=-29.193,41.212,130.73,-0.246,-0.374,-0.329,-2.955 +no_defs

Based on the GDA technical manual http://www.icsm.gov.au/icsm/gda/gdatm/gdav2.2.pdf

The towgs84 parameters should be +towgs84=-29.193,-41.212,130.73,-0.246,-0.374,-0.329,-2.955

Note the minus added to the second parameter.

Also note that depending on the way these parameters are expressed also depends on how the sign is used. In some applications I have reversed all the signs and achieved the desired outcome.

Try the revised parameters. If that doesn't work, reverse the signs and try again.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Michael Sumner
Sent: Wednesday, 7 November 2007 10:49 AM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] problems with datum transform AGD66 to GDA94

Thanks Andrew,

That's what I thought - but the differences between the GDAit and ogr2ogr
conversions are 100-200m.

That is worse than I thought we could expect. I simply don't know how
else to specify the conversion for this transformation.

Cheers, Mike.

>Mike,
>Based on your DSE link, one of the things you may be missing is that
GDAit is using a >local grid distortion model as well as doing a point to
point conversion from AMG to MGA. >The local distortion model uses a grid
of observed values to determine additional local >shifts. GDAit is
considered the most correct conversion for AMG to MGA and depending on
>location this can be a metre in magnitude.



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Nov  6 23:15:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] GDALDatasetCopyWholeRaster() and RFC 14: Image Structure
	Metadata
Message-ID: <47313BC4.5010101@pobox.com>

Folks,

I have made some nontrivial changes to GDAL in svn trunk today.

I have added a new GDALDatasetCopyWholeRaster() function primarily intended
for use by CreateCopy() methods:

/**
  * Copy all dataset raster data.
  *
  * This function copies the complete raster contents of one dataset to
  * another similarly configured dataset.  The source and destination
  * dataset must have the same number of bands, and the same width
  * and height.  The bands do not have to have the same data type.
  *
  * This function is primarily intended to support implementation of
  * driver specific CreateCopy() functions.  It implements efficient copying,
  * in particular "chunking" the copy in substantial blocks and, if appropriate,
  * performing the transfer in a pixel interleaved fashion.
  *
  * Currently the only papszOptions value supported is "INTERLEAVE=PIXEL"
  * to force pixel interleaved operation.  More options may be supported in
  * the future.
  *
  * @param hSrcDS the source dataset
  * @param hDstDS the destination dataset
  * @param papszOptions transfer hints in "StringList" Name=Value format.
  * @param pfnProgress progress reporting function.
  * @param pProgressData callback data for progress function.
  *
  * @return CE_None on success, or CE_Failure on failure.
  */

CPLErr CPL_STDCALL GDALDatasetCopyWholeRaster(
     GDALDatasetH hSrcDS, GDALDatasetH hDstDS, char **papszOptions,
     GDALProgressFunc pfnProgress, void *pProgressData );

The key here is that it knows how to check for whether interleaved copies
are best.  It also copies in substantial chunks which can be quite a bit
faster for some formats (like jpeg2000 inputs).

This leads back to RFC 14 which included a consistent way of indicating
a datasets internal interleaving.  I've refreshed this RFC and I'd
like to bring it forward for discussion this week.  Later in the week
(barring big issues), I plan to motion for it's adoption.

   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

A significant portion of the work is already done, but I'm willing
to change it if things aren't acceptable as defined.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Wed Nov  7 02:49:59 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Ubuntu NG Python bindings
In-Reply-To: <0864E341-678F-43A4-B1DA-675ED95D79F5@gmail.com>
References: <F808BFFA-378F-4E56-ABB3-9F6C515EF671@kyngchaos.com>
	<472AB166.5070403@noaa.gov> <472ABFAC.4050201@noaa.gov>
	<0864E341-678F-43A4-B1DA-675ED95D79F5@gmail.com>
Message-ID: <47316E27.50502@noaa.gov>

Howard Butler wrote:
> Chris,
> 
> Things work ok on my ubuntu 7.10 server instance with stock setuptools.  
> Are you still having trouble? 

yup. just did an svn update, cleaned everything out, and re-built, and 
the same problem:

Python 2.5.1 (r251:54863, May  2 2007, 16:56:35)
[GCC 4.1.2 (Ubuntu 4.1.2-0ubuntu4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
 >>> from osgeo import gdal
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "osgeo/gdal.py", line 51, in <module>
     from gdalconst import *
   File "osgeo/gdalconst.py", line 123, in <module>
     GFT_Integer = _gdalconst.GFT_Integer
AttributeError: 'module' object has no attribute 'GFT_Integer'


Again, I'm trying this late at night, so no time to dig into in myself...

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From nf10 at hotmail.com  Wed Nov  7 06:15:42 2007
From: nf10 at hotmail.com (Jeff H.)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] ArcSDE Raster plugin
Message-ID: <BAY108-W13E0920A15434E97792D9EC68A0@phx.gbl>


Hi,
 
I would like to try out ArcSDE raster driver but it appears that compiling the plugin requires ArcSDE
C client headers and .lib. Are the header and lib redestributable and how one can access them ? Otherwise does the ArcSDE plugin .dll get built with the GDAL distributable build (Win32) ?
 
Thanks
 
Jeff Lacoste
_________________________________________________________________
R U Ready for Windows Live Messenger Beta 8.5? Try it today!
http://entertainment.sympatico.msn.ca/WindowsLiveMessenger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071107/4376651e/attachment.html
From schut at sarvision.nl  Wed Nov  7 07:17:33 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] modis sinusoidal tiles: bug in gdal?
In-Reply-To: <20071106123419.7A35F28018@mrelay1.cape.com>
References: <20071106123419.7A35F28018@mrelay1.cape.com>
Message-ID: <4731ACDD.604@sarvision.nl>



Norman Vine wrote:
>>>
>>> Vincent,
>>>
>>> vrt_merge.py isn't part of GDAL - could you provide a pointer to the
>>> version you are using?
>>>       
>> I know that. It is however a very valuable tool for me :-)
>> I think I picked it up from the ml somewhere sometime long ago... Not
>> easy to provide a pointer. Might have been this one:
>> http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py, but I'm not
>> sure. And I've adapted it to correct for an index error in the
>> colortable support somewhere, if I remember correctly. And for
>> ngbindings instead of ogbindings. I can send you a copy if you'd like.
>>     
>
>
> AFAIK this is now part of the gdal distribution
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/pymod/samples/gdal_vrtmerge.py
>
> I can't remember when I fixed the 'precision' to match the GDAL 'C'
> expectations
>
> So I would try the version above might get lucky  :-)
>
> Cheers
>
> Norman
>   
This version (from gdal svn) seems slightly older than the version I
found somewhere, and which I have changed a bit since then. The newer
version contains a line in the changelog that sais "Be more careful in
rounding for computing xsize/ysize." by you (Norman), but I see no other
difference when diffing with the version from gdal's pymod/samples
except for my own edits. Maybe you forgot to actually implement it?
Anyway, both versions choke on my sub-nanometer scale difference, so
there might be some improvement possible.
Currently, my version of the script is adapted to use ngpython
(osgeo.gdal), has a bug fixed (I think) regarding colortable support,
and has nodata propagation from source to destination vrt bands. I could
try to implement some precision-diminishing code for coordinates and
pixel sizes. Would gdal be interested in an update of this script? I'd
like to have someone (preferable the creator?) review my changes,
especially the colortable thing, to make sure I didn't accidentally
break something. I only tested it on very specific datasets :)
What would be the prefered way to handle the precision issue? Simply
round to let's say 8 or 10 digits after the dot, and compare likewise?
Would that be enough precision for all use cases, like degree based
crs's too?

VS.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071107/2fca361c/attachment.html
From g.ces at pettra.es  Wed Nov  7 12:54:34 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
Message-ID: <000f01c82167$41e4f050$ba03a8c0@GUS>

Hi all,

    I?m making a python script and i need to measure the distance betwen two points on a line ( not the euclidean distance; sometimes there?s a lot of points betwen them...). I see the Distance() method but it seems it compares the euclidean distance betwen two geometries. Is there any ogr method to achieve my goal?
    Thanks in advance,

Gus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071107/34e54ec4/attachment.html
From mateusz at loskot.net  Wed Nov  7 13:43:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] GDAL Maintenance Reports 2007 (2)
Message-ID: <47320741.6060305@loskot.net>

Folks,

I submitted 4 updated reports from the GDAL Maintenance work.
Here they are, reports from 8 to 11:

http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByMateusz2007

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From me at ryanlewis.net  Wed Nov  7 14:15:34 2007
From: me at ryanlewis.net (Ryan Lewis)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to efficiently read in a GDAL image into a matrix
Message-ID: <97BDA9E6-0852-4C4D-AB2B-7BF406D45C76@ryanlewis.net>

Hi,

I would like to read in an entire ENVI image into a GDAL Dataset, and  
then, create a matrix the size of which is pixels X number of raster  
bands
So each column of the matrix is a raster band of the image, and each  
row is a pixel of the image.  so the idea is I would linearize the 2d  
raster band with something like the pixel at (x,y) in a particular  
rasterband would be at the position
x*width + y in the column.

Apparently it is a really bad idea to try and read one value at a  
time out of each raster band, so could someone just tell me the best  
method for doing this.

(If you have the code already that would be cool, but it is not  
necessary, just an outline of the best way to do this in GDAL would  
be awesome).

Thanks,

- Ryan H. Lewis


From nate at deltateck.com  Wed Nov  7 14:51:10 2007
From: nate at deltateck.com (Nate Jennings)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] RE: How to efficiently read in a GDAL image into a matrix
Message-ID: <4f44d320711071151i29b074a3k53af2620bda5dcc3@mail.gmail.com>

Ryan,

You might try my website below, then go to Skillset--Application
Development.  I just put up a python script to do a mean filter on a
multiband image.  It uses the python gdal build of 1.4.2 that is posted on
the gdal site and also requires the old Numeric libraries as well.  I based
my code on sample code from the gdal site as well as my past experience in
accessing pixels within bands from a graduate remote sensing algorithms
course I took during grad school.  I don't know if this is what you need,
but I do access individual pixels.  The code runs very slow (~5 min for a
400 x 600 image).  I am looking to reproduce a similar function using c++ if
and when I can understand how the gdal libraries are used within c++.

Nate

-- 
http://www.jenningsplanet.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071107/9a5fce3b/attachment.html
From warmerdam at pobox.com  Wed Nov  7 15:14:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to efficiently read in a GDAL image into a matrix
In-Reply-To: <97BDA9E6-0852-4C4D-AB2B-7BF406D45C76@ryanlewis.net>
References: <97BDA9E6-0852-4C4D-AB2B-7BF406D45C76@ryanlewis.net>
Message-ID: <47321CB0.50806@pobox.com>

Ryan Lewis wrote:
> Hi,
> 
> I would like to read in an entire ENVI image into a GDAL Dataset, and 
> then, create a matrix the size of which is pixels X number of raster bands
> So each column of the matrix is a raster band of the image, and each row 
> is a pixel of the image.  so the idea is I would linearize the 2d raster 
> band with something like the pixel at (x,y) in a particular rasterband 
> would be at the position
> x*width + y in the column.

Ryan,

I don't understand how you would use x*width+y to get to a particular pixel.
Perhaps you mean y*width + x?

If you have an image that is 200 width, 300 height and 3 bands you could
read it into a single "band sequential" array like this:

   GByte data[200*300*3];

   ...

   GDALDatasetRasterIO( hDS, GF_Read, 0, 0, 200, 300,
                        data, 200, 300, GDT_Byte,
                        3, NULL, 1, 200, 200*300 );

If you want to have an array of 2D arrays, one for each band, you might do:

   GByte *bands[3];
   GByte band1[200*300];
   GByte band2[200*300];
   GByte band3[200*300];
   GByte *bands[3] = {band1,band2,band3};

   for( int band = 1; band <= 3; band++ )
     GDALRasterIO( GDALGetRasterBand(hDS,band), GF_Read,
                   0, 0, 200, 300,
                   bands[band-1], 200, 300, GDT_Byte, 0, 0 );

Key things to keep in mind.

  o If you want to read more than one band at a time, you need to use
    GDALDatasetRasterIO() (or the RasterIO() method on GDALDataset).
  o The final 2/3 values in the RasterIO() call control the packing
    of the buffer.  Values of 0,0,0 are default packing, otherwise it
    is "pixel step", "line step" and "band step".

I'm open to contributed improvements to the GDAL raster api tutorial,
and the appropriate method docs to make this stuff clearer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Wed Nov  7 17:09:06 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] RE: How to efficiently read in a GDAL image into a
	matrix
In-Reply-To: <4f44d320711071151i29b074a3k53af2620bda5dcc3@mail.gmail.com>
References: <4f44d320711071151i29b074a3k53af2620bda5dcc3@mail.gmail.com>
Message-ID: <47323782.4050802@noaa.gov>

Nate Jennings wrote:
> You might try my website below, then go to Skillset--Application 
> Development.  I just put up a python script to do a mean filter on a
>  multiband image.  It uses the python gdal build of 1.4.2 that is
> posted on the gdal site and also requires the old Numeric libraries
> as well.

You should be able to do it with the latest GDAL and numpy as well.

> I do access individual pixels.  The code runs very slow (~5 min for a
> 400 x 600 image).

Is it necessary to do by individual pixels? numpy gives you a lot of
tools to work with whole arrays at a time, which would make it MUCH
faster. There are also a fair number of image processing algorithms out
there that use numpy -- ask on the numpy list if you can't find what you
need.

> I am looking to reproduce a similar function using c++ if and when I
 > can understand how the gdal libraries are used within c++.

If you do really need to go to C/C++, another option is to write code 
that works with numpy arrays as a python extension -- that way you can 
still write everything else in Python. There are lots of way to write 
C/C++ for use with numpy arrays:

SWIG
Pyrex
weave.blitz
f2py

See: http://www.scipy.org/PerformancePython

and the scipy and numpy lists for examples and discussion.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From eric.c2c at gmail.com  Thu Nov  8 04:43:03 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <47309214.9030004@pobox.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
	<47309214.9030004@pobox.com>
Message-ID: <5ec103de0711080143k79095f2emca1a3d2dcdaa4bf2@mail.gmail.com>

On 11/6/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Eric Lemoine wrote:
> >> It would be helpful to see the results, but generally it is hard to
> >> downsample repeating patterns without odd aliasing effects.  The best
> >> is to be very certain that exact factor of 2 downsamplings are done in
> >> which case the algorithms should sample the data in a consistent way.
> >
> > Thanks for your response Franck. Would you mind elaborate a bit more
> > on your last sentence?
> >
> > <http://dev.camptocamp.com/grandlyon_plu/problem_images/>
> >
> > Three screenshots at 1/20000, 1/10000, and 1/5000.
>
> Eric,
>
> I've looked at the three images.  The 1/5000 is the original, right?  Is this
> really the *original*?  It seems the hatching spacing is not exactly uniform
> and darkness of the hatch is not uniform.  So if this is what you are working
> from you are basically doomed to relatively poor and inconsistent results.
>
> The hatching does not follow on nice power of 2 boundaries, so nearest
> neighbour downsampling will certainly produce inconsistent results (some
> hatches will be completely missed for instance).  Are the 1/10000 and
> 1/20000 samples you provide produced with averaging?  With MapServer or
> gdaladdo?
>
> MapServer's "averaging" does not always go back to the original image to
> do the averaging (I think), so as you start to downsample a lot it will
> suffer from nearest neighbour "missing a line" effects which seems to be
> the case.  Gdaladdo on the other hand should not have this effect.

If my original image is 1/5000 and if I use <gdaladdo file.tif 2 4>,
is MapServer going to do its own downsampling? I was expecting
MapServer to rely on the overviews created by gdaladdo and do nothing
more.

--
Eric

From josegomez at gmx.net  Thu Nov  8 05:48:20 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to efficiently read in a GDAL image into a matrix
In-Reply-To: <97BDA9E6-0852-4C4D-AB2B-7BF406D45C76@ryanlewis.net>
References: <97BDA9E6-0852-4C4D-AB2B-7BF406D45C76@ryanlewis.net>
Message-ID: <20071108104820.146620@gmx.net>

Hi Ryan,

> I would like to read in an entire ENVI image into a GDAL Dataset, and  
> then, create a matrix the size of which is pixels X number of raster  
> bands.

I do this sort of thing in Python (+numpy et al.) fairly often. Unfortunately, I haven't got gdal, python or anything installed over here, but I think the code goes like this:

g=gdal.Open ( fname )
for band in xrange g.GetRasterCount):
   b = g.GetRasterBand( band ).ReadAsArray()
   #b is a 2D array with your band.
   #Use numpy's reshape to stack it however you like
   #In particular, you can use slice notation for this sort of thing

Using large-ish images (Landsat, around 6400x6500 pixels and a few bands), it is fairly confortable to read the data and apply algorithms using numpy and scipy. If you apply this to whole images, it is very fast. If you're using a few pixels at a time, use a masked array to improve performance.

Finally, another way to speed things up is to read N rows from B bands at a time and work on smaller chunks. If you have dual cores or several machines, you can try to process "several smaller chunks" in parallel, but I haven't tried that yet.


> Apparently it is a really bad idea to try and read one value at a  
> time out of each raster band, so could someone just tell me the best  
> method for doing this.

You might as well read a line (or several lines into a buffer, and deal with them. It is significantly faster (you make use of IO cache, processor cache, etc.) than going pixel by pixel. 

I am sorry I can't provide any code (I have done the approaches mentioned here in both python and C. In the end, when factoring the debugging and me screwing up with things, python  ends up being 100x faster than C :D).

Hope that helps,
Jose
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From josegomez at gmx.net  Thu Nov  8 05:58:24 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
In-Reply-To: <000f01c82167$41e4f050$ba03a8c0@GUS>
References: <000f01c82167$41e4f050$ba03a8c0@GUS>
Message-ID: <20071108105824.146620@gmx.net>

Hi Gus,
-------- Original-Nachricht --------
>     I?m making a python script and i need to measure the distance betwen
> two points on a line ( not the euclidean distance; sometimes there?s a lot
> of points betwen them...). I see the Distance() method but it seems it
> compares the euclidean distance betwen two geometries. Is there any ogr method
> to achieve my goal?

Maybe someone can provide more insight, but my idea would go along the lines of using some sort of geoprocessing to split the bit of line between your two points (you can use getPoint(point_position) to get your point's geometry). In this resulting line, you can then measure its length.

A similar way of doing this (skipping the geoprocessing bit, which might be non-trivial) is to search for your first point (->getPoint(), Equals()?), and copy that into a new line object, adding new points up to your last point of interest. You can then use the

You don't want to use Distance, as that gives you the distance between the geometries, not length along line, which is what you're looking for.

Hopefully, someone more knowledgeable than me will be able to help!

Jose
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

From g.ces at pettra.es  Thu Nov  8 07:10:29 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
Message-ID: <007f01c82200$5e13a7f0$ba03a8c0@GUS>


----- Original Message ----- 
From: "Gustavo Ces" <g.ces@pettra.es>
To: "Jose Luis Gomez Dans" <josegomez@gmx.net>
Sent: Thursday, November 08, 2007 12:20 PM
Subject: Re: [Gdal-dev] How to measure a distance betwen two points on a 
line


> Hi Jose
>
>    Thanks for answering. I?d love to getPoint() but i can?t because my 
> feat.GetGeometryRef() returned doesn?t have this method!
>    feat.GetGeometryName() returns ' Linestring" and in ogr page i can see 
> a getPoint() method  for that type of class. May i have to convert my 
> geometry to linestring ? How?
>    Now i can access to point coordinates ( with GetX and GetY) but that?s 
> all.
>    I see a get_length too, but only for linestring classes... Snif!
>
> Gus
>
> ----- Original Message ----- 
> From: "Jose Luis Gomez Dans" <josegomez@gmx.net>
> To: "Gustavo Ces" <g.ces@pettra.es>; <gdal-dev@lists.maptools.org>
> Sent: Thursday, November 08, 2007 11:58 AM
> Subject: Re: [Gdal-dev] How to measure a distance betwen two points on a 
> line
>
>
>> Hi Gus,
>> -------- Original-Nachricht --------
>>>     I?m making a python script and i need to measure the distance betwen
>>> two points on a line ( not the euclidean distance; sometimes there?s a 
>>> lot
>>> of points betwen them...). I see the Distance() method but it seems it
>>> compares the euclidean distance betwen two geometries. Is there any ogr 
>>> method
>>> to achieve my goal?
>>
>> Maybe someone can provide more insight, but my idea would go along the 
>> lines of using some sort of geoprocessing to split the bit of line 
>> between your two points (you can use getPoint(point_position) to get your 
>> point's geometry). In this resulting line, you can then measure its 
>> length.
>>
>> A similar way of doing this (skipping the geoprocessing bit, which might 
>> be non-trivial) is to search for your first point (->getPoint(), 
>> Equals()?), and copy that into a new line object, adding new points up to 
>> your last point of interest. You can then use the
>>
>> You don't want to use Distance, as that gives you the distance between 
>> the geometries, not length along line, which is what you're looking for.
>>
>> Hopefully, someone more knowledgeable than me will be able to help!
>>
>> Jose
>> -- 
>> GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
>> Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
> 


From warmerdam at pobox.com  Thu Nov  8 09:05:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <5ec103de0711080143k79095f2emca1a3d2dcdaa4bf2@mail.gmail.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
	<47309214.9030004@pobox.com>
	<5ec103de0711080143k79095f2emca1a3d2dcdaa4bf2@mail.gmail.com>
Message-ID: <4733179E.7070505@pobox.com>

Eric Lemoine wrote:
> If my original image is 1/5000 and if I use <gdaladdo file.tif 2 4>,
> is MapServer going to do its own downsampling? I was expecting
> MapServer to rely on the overviews created by gdaladdo and do nothing
> more.

Eric,

Generally speaking MapServer will work from the overview corresponding to
the resolution of the map request.  If there is no direct correspondence
it will work from the closest *higher resolution* overview.

Things are also complicated by the fact that in some modes (ie. AVERAGE
resampling, reprojecting) MapServer requests the source data somewhat
oversampled and downsamples/warps from that.  So you may actually end up
loading a higher resolution overview than you would otherwise expect.

If the overview level requested for "normal" views does not correspond
to the resolution of an overview, downsampling must still be done by
MapServer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From vdharan2001 at gmail.com  Thu Nov  8 09:23:25 2007
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Need Help compiling OGR sample in linux
Message-ID: <d29760880711080623q4711ed34jd3a12816fe8507a@mail.gmail.com>

Hi,

Can any one please  provide me the step by step procedure to compile
the following sample in linux.
I have installed fwtools. Iam new to linux environment.

#include "ogrsf_frmts.h"

int main()

{
    OGRRegisterAll();

    OGRDataSource       *poDS;

    poDS = OGRSFDriverRegistrar::Open( "point.shp", FALSE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n" );
        exit( 1 );
    }

    OGRLayer  *poLayer;

    poLayer = poDS->GetLayerByName( "point" );

    OGRFeature *poFeature;

    poLayer->ResetReading();
    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        int iField;

        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

            if( poFieldDefn->GetType() == OFTInteger )
                printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
            else if( poFieldDefn->GetType() == OFTReal )
                printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
            else if( poFieldDefn->GetType() == OFTString )
                printf( "%s,", poFeature->GetFieldAsString(iField) );
            else
                printf( "%s,", poFeature->GetFieldAsString(iField) );
        }

        OGRGeometry *poGeometry;

        poGeometry = poFeature->GetGeometryRef();
        if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbPoint )
        {
            OGRPoint *poPoint = (OGRPoint *) poGeometry;

            printf( "%.3f,%3.f\n", poPoint->getX(), poPoint->getY() );
        }
        else
        {
            printf( "no point geometry\n" );
        }
        OGRFeature::DestroyFeature( poFeature );
    }

    OGRDataSource::DestroyDataSource( poDS );
}


Regards,
N.Vidhiyadharan

From g.ces at pettra.es  Thu Nov  8 09:49:03 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
References: <007f01c82200$5e13a7f0$ba03a8c0@GUS>
Message-ID: <001a01c82216$81d5da80$ba03a8c0@GUS>



Uuupsss! Again :


Hi Jose

    Thanks for answering. I?d love to getPoint() but i can?t because my
feat.GetGeometryRef() returned doesn?t have this method!
    feat.GetGeometryName() returns ' Linestring" and in ogr page i can see a
getPoint() method  for that type of class. May i have to convert my geometry
to linestring ? How?
    Now i can access to point coordinates ( with GetX and GetY) but that?s
all.
    I see a get_length too, but only for linestring classes... Snif! Any 
help?

Gus


From warmerdam at pobox.com  Thu Nov  8 10:07:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Need Help compiling OGR sample in linux
In-Reply-To: <d29760880711080623q4711ed34jd3a12816fe8507a@mail.gmail.com>
References: <d29760880711080623q4711ed34jd3a12816fe8507a@mail.gmail.com>
Message-ID: <47332635.9050706@pobox.com>

vdharan nadra wrote:
> Hi,
> 
> Can any one please  provide me the step by step procedure to compile
> the following sample in linux.
> I have installed fwtools. Iam new to linux environment.

Hi,

I was able to build this program using the command:

  g++ -I/usr3/pkg4/OpenEV_FW_Tree/FWTools/include 
-L/usr3/pkg4/OpenEV_FW_Tree/FWTools/lib test1.cpp -lgdal -o test1

Because you are using C++, there are fairly compiler version specific
linkage issues and you will need to use a version of g++ compatible with
g++ 3.2.3. And 3.2.x would be fine.  4.x likely not.

If you were to rework your program to use the equivelent C API this
problem would not exist.

I also found I had to source the fwtools_env.sh script first in order
to set LD_LIBRARY_PATH properly so that dependent libraries were found.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmitry.kan at gmail.com  Thu Nov  8 10:40:41 2007
From: dmitry.kan at gmail.com (Dmitry Kan)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Intersection of two OGRLinearRing objects is NULL
Message-ID: <9a4d1d60711080740s1bc613b6uf521b0b23e70dbba@mail.gmail.com>

Hello list!

I have two polygons. I know that their exterior rings intersect in two
OGRPoint's. Despite that fact Intersection() on the ring objects return
NULL;

CPLGetLastErrorNo() returns 0.

GDAL 1.5dev, FWTools 1.3.7 released 20070918

Data:

LINEARRING (1524276.6530932689 6793100.5031028837,1524276.6407590816
6793100.0320792776,1524276.6037903272 6793099.5623467145,1524276.5422883341
6793099.0951926988,1524276.4564216754 6793098.6318976665,1524276.3464257054
6793098.1737314779,1524276.2126019155 6793097.721949934,1524276.0553171074
6793097.277791338,1524275.8750023877 6793096.8424730962,1524275.6721519865
6793096.4171883864,1524275.447321903 6793096.0031028837,1524275.2011283804
6793095.6013515685,1524274.9342462183 6793095.2130356133,1524274.647406922
6793094.8392193643,1524274.3413966983 6793094.4809274264,1524274.0170542996
6793094.139141853,1524273.6752687262 6793093.8147994541,1524273.3169767882
6793093.5087892301,1524272.9431605395 6793093.221949934,1524272.5548445841
6793092.9550677724,1524272.1530932689 6793092.7088742498,1524271.7390077666
6793092.4840441663,1524271.3137230566 6793092.2811937649,1524270.8784048147
6793092.1008790452,1524270.4342462183 6793091.9435942369,1524269.9824646749
6793091.8097704472,1524269.5242984863 6793091.6997744767,1524269.0610034543
6793091.6139078187,1524268.5938494382 6793091.5524058258,1524268.124116875
6793091.5154370712,1524267.6530932689 6793091.5031028837,1524267.1820696627
6793091.5154370712,1524266.7123370995 6793091.5524058258,1524266.2451830835
6793091.6139078187,1524265.7818880514 6793091.6997744767,1524265.3237218629
6793091.8097704472,1524264.8719403194 6793091.9435942369,1524264.427781723
6793092.1008790452,1524263.9924634811 6793092.2811937649,1524263.5671787711
6793092.4840441663,1524263.1530932689 6793092.7088742498,1524262.7513419536
6793092.9550677724,1524262.3630259982 6793093.221949934,1524261.9892097495
6793093.5087892301,1524261.6309178115 6793093.8147994541,1524261.2891322381
6793094.139141853,1524260.9647898395 6793094.4809274264,1524260.6587796158
6793094.8392193643,1524260.3719403194 6793095.2130356133,1524260.1050581574
6793095.6013515685,1524259.8588646348 6793096.0031028837,1524259.6340345512
6793096.4171883864,1524259.43118415 6793096.8424730962,1524259.2508694304
6793097.277791338,1524259.0935846223 6793097.721949934,1524258.9597608324
6793098.1737314779,1524258.8497648623 6793098.6318976665,1524258.7638982036
6793099.0951926988,1524258.7023962105 6793099.5623467145,1524258.6654274561
6793100.0320792776,1524258.6530932689 6793100.5031028837,1524258.6654274561
6793100.9741264898,1524258.7023962105 6793101.4438590528,1524258.7638982036
6793101.9110130686,1524258.8497648623 6793102.3743081009,1524258.9597608324
6793102.8324742895,1524259.0935846223 6793103.2842558334,1524259.2508694304
6793103.7284144294,1524259.43118415 6793104.1637326712,1524259.6340345512
6793104.589017381,1524259.8588646348 6793105.0031028837,1524260.1050581574
6793105.4048541989,1524260.3719403194 6793105.7931701541,1524260.6587796158
6793106.1669864031,1524260.9647898395 6793106.525278341,1524261.2891322381
6793106.8670639144,1524261.6309178115 6793107.1914063133,1524261.9892097495
6793107.4974165373,1524262.3630259982 6793107.7842558334,1524262.7513419536
6793108.051137995,1524263.1530932689 6793108.2973315176,1524263.5671787711
6793108.5221616011,1524263.9924634811 6793108.7250120025,1524264.427781723
6793108.9053267222,1524264.8719403194 6793109.0626115305,1524265.3237218629
6793109.1964353202,1524265.7818880514 6793109.3064312907,1524266.2451830835
6793109.3922979487,1524266.7123370995 6793109.4537999416,1524267.1820696627
6793109.4907686962,1524267.6530932689 6793109.5031028837,1524268.124116875
6793109.4907686962,1524268.5938494382 6793109.4537999416,1524269.0610034543
6793109.3922979487,1524269.5242984863 6793109.3064312907,1524269.9824646749
6793109.1964353202,1524270.4342462183 6793109.0626115305,1524270.8784048147
6793108.9053267222,1524271.3137230566 6793108.7250120025,1524271.7390077666
6793108.5221616011,1524272.1530932689 6793108.2973315176,1524272.5548445841
6793108.051137995,1524272.9431605395 6793107.7842558334,1524273.3169767882
6793107.4974165373,1524273.6752687262 6793107.1914063133,1524274.0170542996
6793106.8670639144,1524274.3413966983 6793106.525278341,1524274.647406922
6793106.1669864031,1524274.9342462183 6793105.7931701541,1524275.2011283804
6793105.4048541989,1524275.447321903 6793105.0031028837,1524275.6721519865
6793104.589017381,1524275.8750023877 6793104.1637326712,1524276.0553171074
6793103.7284144294,1524276.2126019155 6793103.2842558334,1524276.3464257054
6793102.8324742895,1524276.4564216754 6793102.3743081009,1524276.5422883341
6793101.9110130686,1524276.6037903272 6793101.4438590528,1524276.6407590816
6793100.9741264898,1524276.6530932689 6793100.5031028837)

LINEARRING (1524433.5542046793 6793297.3288131524,1524436.9432731641
6793284.7892597588,1524438.9767142551 6793263.7770351507,1524438.9767142551
6793260.0490598194,1524438.9767142551 6793243.442624243,1524438.9767142551
6793225.819468122,1524452.1940813458 6793215.3133558147,1524472.8673991042
6793198.7069202419,1524479.6455360737 6793185.4895531498,1524489.1349278314
6793171.255465515,1524493.8796237102 6793160.4104463607,1524498.0493464959
6793151.3160566399,1524492.8741877205 6793149.4341807216,1524471.3331169907
6793147.3153868793,1524451.2045754897 6793142.0184022719,1524426.8384463042
6793141.6652699653,1524395.4096709776 6793136.0151530514,1524363.980895651
6793128.5993746063,1524338.9085018514 6793123.3023900008,1524331.4927234033
6793119.4179346226,1524326.5488711051 6793109.8833623314,1524324.0769449556
6793101.4081869619,1524318.073695736 6793093.992408514,1524307.4797265248
6793092.2267469801,1524297.5920219277 6793092.9330115914,1524285.2323911814
6793097.5237315837,1524274.9915542773 6793099.2893931186,1524261.9256589168
6793101.4081869619,1524249.2128958635 6793098.9362608138,1524235.0876035818
6793098.5831285054,1524226.9655605203 6793093.6392762074,1524223.7873697567
6793085.5172331473,1524225.5530312918 6793077.0420577778,1524228.7312220552
6793064.3292947216,1524233.3219420468 6793050.204002439,1524233.6750743538
6793036.4318424668,1524233.8933896199 6793035.0346247638,1524222.4152380712
6793040.0985151501,1524209.19787098 6793047.2155589685,1524191.9136217074
6793059.755112364,1524171.9181176466 6793071.61685206,1524160.7341916463
6793079.4117095768,1524142.0943149796 6793089.9178218767,1524125.1489725553
6793103.8130026665,1524107.1869095853 6793116.3525560582,1524091.2582877064
6793127.5364820594,1524080.4132685547 6793133.9757121811,1524124.7548642601
6793179.090579628,1524160.4546408183 6793218.0033360766,1524181.8745067534
6793242.6361819031,1524191.1564486586 6793254.7741059307,1524193.6554330175
6793251.918123805,1524192.9414374866 6793236.9242176488,1524202.2233793915
6793240.1371975439,1524212.5763145934 6793245.4921640325,1524218.2882788428
6793250.8471305082,1524219.3592721394 6793259.7720746519,1524219.3592721391
6793273.3379897466,1524265.0549861339 6793280.4779450577,1524322.8886241578
6793288.3318959009,1524388.576213025 6793290.4738824926,1524433.5542046793
6793297.3288131524)


-- 
best wishes,
Dmitry Kan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071108/d060e4b4/attachment.html
From daniel112b at gmail.com  Thu Nov  8 10:40:25 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] OGR, CPLSPrintf and thread safety
Message-ID: <962626470711080740s2664be95q7862db1670449cf1@mail.gmail.com>

Hello,

I have run into some threading issues accessing a .tab file from multiple
threads. Each thread has it's own OGRDataSource so the OGRDataSource objects
won't get accessed from more than one thread at a time. The GDAL faq says:

"In particular for the situation where many threads are reading from GDAL
datasets at once should work as long as no two threads access the same
GDALDataset <http://www.gdal.org/classGDALDataset.html> object at the same
time"

Is the same thing true for OGR? ( or at least in the sense that it is
supposed to be). I think i have tracked down the problem in this particular
case to CPLSPrintf. The static buffers it is using is declared as:


static CPL_THREADLOCAL
chargszCPLSPrintfBuffer[CPLSPrintf_BUF_Count][CPLSPrintf_BUF_SIZE];

static CPL_THREADLOCAL int gnCPLSPrintfBuffer = 0;

but CPL_THREADLOCAL is by default defined to nothing, a long time ago (23/5
2005) CPL_THREADLOCAL was defined to declspec(thread) in cpl_config.h.vc
which should have made them thread local. But that was changed a month later
or so. Was there a particular reason for that? I havn't used thread local
storage much myself so i don't know how good it works or if it differs alot
between different compilers. I havn't tried to define CPL_THREADLOCAL myself
yet to see if it works but i'll hope i'll get time to do that.

My problems occur while i'm trying to extract the styling info and i end up
with an empty style string when running multiple threads.



Regards,

Daniel B?ck
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071108/14858510/attachment.html
From Konstantin.Baumann at hpi.uni-potsdam.de  Thu Nov  8 11:13:00 2007
From: Konstantin.Baumann at hpi.uni-potsdam.de (Baumann, Konstantin)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Coord ordering for given coord ref system?
Message-ID: <5AC0F51A926CD442BC08D55DA7DAB1D4077C0F08@3mxma1r.hpi.uni-potsdam.de>

Hi all!

 

It seems that there could be different axes ordering schemes based on
the used coord ref system. For example, EPSG:31466 specifies a
northing/easting ordering, whereas EPSG:31462 uses an easting/northing
ordering (see for example
http://www.bezreg-koeln.nrw.de/extra/33alkis/dokumente/2007-05-30_Revisi
onsliste_fuer_1-1.pdf, page 3, bottom right, in german).

 

Could this ordering information be retrieved from OGRSpatialReference?
How does GDAL/OGR handle such cases during vector data import?

 

Kind regards,

            Konstantin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071108/c980a61f/attachment.html
From szekerest at gmail.com  Thu Nov  8 11:19:12 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] OGR, CPLSPrintf and thread safety
In-Reply-To: <962626470711080740s2664be95q7862db1670449cf1@mail.gmail.com>
References: <962626470711080740s2664be95q7862db1670449cf1@mail.gmail.com>
Message-ID: <f3b73b7d0711080819o76fc2f7anbc44c1c9aa4a54ee@mail.gmail.com>

Daniel,

__declspec(thread) is a Microsoft VC specific so it cannot used as an
universal solution. Moreover it works in DLLs only when those DLLs are
bound to the executable, and will not work for those loaded with
LoadLibrary().

In this particular case it would be reasonable to allocate the buffer
in the stack at the beginning of every function using these variables.

Alternatively there's a fairly platform neutral TLS implementation in
gdal that can also be used.

You might want to submit a ticket with this issue.


Best regards,

Tamas



2007/11/8, Daniel <daniel112b@gmail.com>:
> Hello,
>
> I have run into some threading issues accessing a .tab file from multiple
> threads. Each thread has it's own OGRDataSource so the OGRDataSource objects
> won't get accessed from more than one thread at a time. The GDAL faq says:
>
> "In particular for the situation where many threads are reading from GDAL
> datasets at once should work as long as no two threads access the same
> GDALDataset object at the same time"
>
> Is the same thing true for OGR? ( or at least in the sense that it is
> supposed to be). I think i have tracked down the problem in this particular
> case to CPLSPrintf. The static buffers it is using is declared as:
>
>
>
> static CPL_THREADLOCAL char
> gszCPLSPrintfBuffer[CPLSPrintf_BUF_Count][CPLSPrintf_BUF_SIZE];
>
> static CPL_THREADLOCAL int gnCPLSPrintfBuffer = 0;
>
> but CPL_THREADLOCAL is by default defined to nothing, a long time ago (23/5
> 2005) CPL_THREADLOCAL was defined to declspec(thread) in cpl_config.h.vc
> which should have made them thread local. But that was changed a month later
> or so. Was there a particular reason for that? I havn't used thread local
> storage much myself so i don't know how good it works or if it differs alot
> between different compilers. I havn't tried to define CPL_THREADLOCAL myself
> yet to see if it works but i'll hope i'll get time to do that.
>
> My problems occur while i'm trying to extract the styling info and i end up
> with an empty style string when running multiple threads.
>
>
>
> Regards,
>
> Daniel B?ck
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Thu Nov  8 11:24:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711061157.4869@centrum.cz>
References: 11010908.11215@centrum.cz>
	<200711010908.11215@centrum.cz>	<472EF97B.4060006@gmx.de>
	<200711051412.17853@centrum.cz> <200711061157.4869@centrum.cz>
Message-ID: <4733383C.2070104@loskot.net>

jetelus@centrum.cz wrote:
> Finally I solved it! I was hunting that lost memory and I
> discovered there is cache system implemented in GDAL :-)
> Problem is it's default size - 40 MB - too much for CE.
> I set it to 4 MB using GDALSetCacheMax() and all errors are
> gone - lol I suck I know :) but it would be nice to add some
> note to GDALDatasetRasterIO documentation - something like
> there is cache system which memory usage can be controlled.

Unfortuntelly, I've had no chance to test this issue yet,
but that's great the problem has been solved.
I will update the doc but custom cache size will be used in GDAL built
for Windows CE.

http://trac.osgeo.org/gdal/ticket/1978

> I can display even 5 MB JPEGs now on CE! Have a nice day!

What about the previous ~120MB file or you're still using file of the
same size?

Chers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov  8 11:43:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
In-Reply-To: <000f01c82167$41e4f050$ba03a8c0@GUS>
References: <000f01c82167$41e4f050$ba03a8c0@GUS>
Message-ID: <47333CB9.2090905@loskot.net>

Gustavo Ces wrote:
> 
> I?m making a python script and i need to measure the distance betwen
> two points on a line ( not the euclidean distance; sometimes there?s
> a lot of points betwen them...). I see the Distance() method but it
> seems it compares the euclidean distance betwen two geometries. Is
> there any ogr method to achieve my goal? Thanks in advance,

Gustavo,

You can use linestring to one of rectangular system, projecting your
data to ie. UTM. Then you can use provided Distance function
based on the Pythagorean Th.

Another option is to use laws of spherical geometry and simple
approximations of distance. Here you can find it well explained with
implementation provided:

http://www.codeguru.com/Cpp/Cpp/algorithms/article.php/c5115/

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov  8 12:10:01 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] Intersection of two OGRLinearRing objects is NULL
In-Reply-To: <9a4d1d60711080740s1bc613b6uf521b0b23e70dbba@mail.gmail.com>
References: <9a4d1d60711080740s1bc613b6uf521b0b23e70dbba@mail.gmail.com>
Message-ID: <473342E9.6070308@loskot.net>

Dmitry Kan wrote:
> Hello list!
> 
> I have two polygons. I know that their exterior rings intersect in two
> OGRPoint's. Despite that fact Intersection() on the ring objects return
> NULL;

Dmitry,

I did short test:
I changed LINEARRING to LINESTRING because it's not possible to create
LINEARRING directly from WKT. Note, that LINEARRING should not be used
as standalone geometry but it's a variation of LINESTRING used to
support POLYGON geometries.
Next, I created two geometries and generated intersection.
The intersection operation succeeded and resulting geometry is of type
of 4, it is MultiPoint:

>>> import ogr
>>> a = open('a.txt').read()
>>> g1 = ogr.CreateGeometryFromWkt(a)
>>> g1.GetGeometryType()
2
>>> b = open('b.txt').read()
>>> g2 = ogr.CreateGeometryFromWkt(b)
>>> g2.GetGeometryType()
2
>>> ints = g1.Intersection(g2)
>>> print ints.GetGeometryType()
4

Files a.txt and b.txt consist of definition of your geometries.
I used GDAL from current SVN.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Thu Nov  8 12:26:34 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] gdalwarp -multi: CPLCreateThread() failed in
	ChunkAndWarpMulti()
Message-ID: <473346CA.9020407@o2.pl>

Hi

After SVN update from 1.4 stable branch just now I noticed
that using -multi in gdalwarp with any input raster yields:

ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()

I have few older versions of GDAL 1.4 packaged and put
aside. Of them version from 2007-09-12 has the same issue,
but another older one from 2007-06-04 doesn't. Seems like a
regression.

Maciek

From tutey at o2.pl  Fri Nov  9 04:28:16 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] gdalwarp -multi: CPLCreateThread() failed in
	ChunkAndWarpMulti()
In-Reply-To: <473346CA.9020407@o2.pl>
References: <473346CA.9020407@o2.pl>
Message-ID: <13663722.post@talk.nabble.com>


> Seems like a regression.

Disregard! It's a regression in my build script only :). The --with-threads
at configure somehow vanished from it. Added it back and all OK now. Sorry
for the fuss.

Maciek

-- 
View this message in context: http://www.nabble.com/gdalwarp--multi%3A-CPLCreateThread%28%29-failed-in-ChunkAndWarpMulti%28%29-tf4772484.html#a13663722
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From daniel112b at gmail.com  Fri Nov  9 04:59:49 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] OGR, CPLSPrintf and thread safety
In-Reply-To: <f3b73b7d0711080819o76fc2f7anbc44c1c9aa4a54ee@mail.gmail.com>
References: <962626470711080740s2664be95q7862db1670449cf1@mail.gmail.com>
	<f3b73b7d0711080819o76fc2f7anbc44c1c9aa4a54ee@mail.gmail.com>
Message-ID: <962626470711090159s283bf82ag2fc1132a0f4e88ac@mail.gmail.com>

I have submitted a ticket #1979

Best Regards,
  Daniel B?ck

On Nov 8, 2007 5:19 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Daniel,
>
> __declspec(thread) is a Microsoft VC specific so it cannot used as an
> universal solution. Moreover it works in DLLs only when those DLLs are
> bound to the executable, and will not work for those loaded with
> LoadLibrary().
>
> In this particular case it would be reasonable to allocate the buffer
> in the stack at the beginning of every function using these variables.
>
> Alternatively there's a fairly platform neutral TLS implementation in
> gdal that can also be used.
>
> You might want to submit a ticket with this issue.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2007/11/8, Daniel <daniel112b@gmail.com>:
>  > Hello,
> >
> > I have run into some threading issues accessing a .tab file from
> multiple
> > threads. Each thread has it's own OGRDataSource so the OGRDataSource
> objects
> > won't get accessed from more than one thread at a time. The GDAL faq
> says:
> >
> > "In particular for the situation where many threads are reading from
> GDAL
> > datasets at once should work as long as no two threads access the same
> > GDALDataset object at the same time"
> >
> > Is the same thing true for OGR? ( or at least in the sense that it is
> > supposed to be). I think i have tracked down the problem in this
> particular
> > case to CPLSPrintf. The static buffers it is using is declared as:
> >
> >
> >
> > static CPL_THREADLOCAL char
> > gszCPLSPrintfBuffer[CPLSPrintf_BUF_Count][CPLSPrintf_BUF_SIZE];
> >
> > static CPL_THREADLOCAL int gnCPLSPrintfBuffer = 0;
> >
> > but CPL_THREADLOCAL is by default defined to nothing, a long time ago
> (23/5
> > 2005) CPL_THREADLOCAL was defined to declspec(thread) in cpl_config.h.vc
> > which should have made them thread local. But that was changed a month
> later
> > or so. Was there a particular reason for that? I havn't used thread
> local
> > storage much myself so i don't know how good it works or if it differs
> alot
> > between different compilers. I havn't tried to define CPL_THREADLOCAL
> myself
> > yet to see if it works but i'll hope i'll get time to do that.
> >
> > My problems occur while i'm trying to extract the styling info and i end
> up
> > with an empty style string when running multiple threads.
> >
> >
> >
> > Regards,
> >
> > Daniel B?ck
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071109/8dd0ca4d/attachment.html
From schut at sarvision.nl  Fri Nov  9 05:11:14 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] improved gdal_vrtmerge.py
Message-ID: <47343242.4090108@sarvision.nl>

Folks,

as a result of the discussion in the thread about modis sinusoidal tile
processing with gdal_vrtmerge.py, I hereby submit a (imho) slightly
improved version of gdal_vrtmerge.py.

Changes (compared to the version in gdal's pymod/samples directory):

o  uses ngpython bindings (from osgeo import gdal)
o  fixed colortable bug
o  added customizable precision for coordinates and pixel sizes, by
   default set to 10 digits. Can be adjusted by changing the variable
   'precision' at the beginning of the python script.
   This is used 1) to round the calculation result of corner coordinates
   and pixel size, and 2) in the comparison between pixel size/scale of
   multiple datasets (including a conversion to string before
   comparison) to prevent bailing out on nanometer/degree scale
   differences due to rounding/floating point issues.

Any of you who speaks python, feel free to double check my changes and
eventually propose better ones :-) I hereby donate this version to the
gdal community.

Regards,
Vincent Schut.

Hmm will try to attach the script, hope it won't be too large for the ml...
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_vrtmerge.py
Type: text/x-python
Size: 9432 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071109/ea977767/gdal_vrtmerge.py
From sonson25 at gmail.com  Fri Nov  9 10:27:02 2007
From: sonson25 at gmail.com (Sonson Sonson)
Date: Wed Nov 21 11:51:08 2007
Subject: [Gdal-dev] How to scale an image
Message-ID: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>

Hi all,
I have a question. I would like to know how to scale an image. I am
writing a program where I need to scale an image before processing it,
but I cannot find any sample program, or documentation on how to do
that. Say if my image's size is 6579x3289 pixel and I want it to be
scaled to 6656x3328, can anybody point me to documentation and sample
codes on how to do it.

Thanks.

From warmerdam at pobox.com  Fri Nov  9 10:41:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Coord ordering for given coord ref system?
In-Reply-To: <5AC0F51A926CD442BC08D55DA7DAB1D4077C0F08@3mxma1r.hpi.uni-potsdam.de>
References: <5AC0F51A926CD442BC08D55DA7DAB1D4077C0F08@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <47347FB9.3010008@pobox.com>

Baumann, Konstantin wrote:
> Hi all!
> 
>  
> 
> It seems that there could be different axes ordering schemes based on 
> the used coord ref system. For example, EPSG:31466 specifies a 
> northing/easting ordering, whereas EPSG:31462 uses an easting/northing 
> ordering (see for example 
> http://www.bezreg-koeln.nrw.de/extra/33alkis/dokumente/2007-05-30_Revisionsliste_fuer_1-1.pdf, 
> page 3, bottom right, in german).
> 
>  
> 
> Could this ordering information be retrieved from OGRSpatialReference? 
> How does GDAL/OGR handle such cases during vector data import?

Konstantin,

Currently OGR is "axis unaware" which does cause a number of problems.  It
is something I would like to see fixed, but is a substantial effort and I
don't know when I will get to it. If someone else is willing to make a
substantial effort on this task, I would appreciate input into the approach
taken.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Nov  9 10:54:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to scale an image
In-Reply-To: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>
References: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>
Message-ID: <473482A4.7010409@pobox.com>

Sonson Sonson wrote:
> Hi all,
> I have a question. I would like to know how to scale an image. I am
> writing a program where I need to scale an image before processing it,
> but I cannot find any sample program, or documentation on how to do
> that. Say if my image's size is 6579x3289 pixel and I want it to be
> scaled to 6656x3328, can anybody point me to documentation and sample
> codes on how to do it.

Sonson,

What sort of sampling approach do you want to take?  If you just
want nearest neighbour resampling you can do this as:

   gdal_translate -outsize 6656 3328 in.tif out.tif

or at the API level by specifying 6656,3328 as your buffer size when
doing a RasterIO() to read into memory.

If you want to control the resampling kernel you need to use the warp
api.  At the commandline:

   gdalwarp -rc in.tif out.tif -ts 6656 3328

At the API level it is fairly involved. You could review:

   http://www.gdal.org/warptut.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sonson25 at gmail.com  Fri Nov  9 11:59:28 2007
From: sonson25 at gmail.com (Sonson Sonson)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to scale an image
In-Reply-To: <473482A4.7010409@pobox.com>
References: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>
	<473482A4.7010409@pobox.com>
Message-ID: <a271b340711090859v73f70ab7ibc81a7930f9405cd@mail.gmail.com>

Thanks Frank for your response.
I would like to do this at the API level.
Here is what I am trying to do. I am trying to read an image, set of
size 1000x1000 and write it to a new file of with a bigger size of say
1024x1024 or a smaller size like 512x512. Below a sample code of how I
try to achieve this. newsize is the width and length of my destination
image. I read an image, of size  rxsize x rysize, with
poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize, dysize,
eType, 0, 0); and create a file of size newsize x newsize, and later
write the pixed I read to the new file. I am sure there is something
wrong with the code, but I cannot seem to figure it out. Please help.


                               GDALDataset  *poDataset = (GDALDataset
*) GDALOpen( strInputFile, GA_ReadOnly );
				.................
				.................
				GDALRasterBand  *poBand = poDataset->GetRasterBand(1);
				.........
				.........
				//Load raster.
				char *data;		

				nXSize = dxsize* dysize;
				data = (char *) CPLMalloc(nXSize*eType);
				poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize,
dysize,  eType, 0, 0);
				..............
				..............
				
				GDALDataset *poDstDS = poDriver->Create( filename, newsize,
newsize, bands, eType, papszOptions );
				
				poDstDS->SetGeoTransform( geotransform );
				poDstDS->SetProjection(projection);
				poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, rxsize,
rysize, data, dxsize, dysize,  eType, 0, 0);
				poDstDS->FlushCache();
				
				delete poDstDS;

On Nov 9, 2007 10:54 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Sonson Sonson wrote:
> > Hi all,
> > I have a question. I would like to know how to scale an image. I am
> > writing a program where I need to scale an image before processing it,
> > but I cannot find any sample program, or documentation on how to do
> > that. Say if my image's size is 6579x3289 pixel and I want it to be
> > scaled to 6656x3328, can anybody point me to documentation and sample
> > codes on how to do it.
>
> Sonson,
>
> What sort of sampling approach do you want to take?  If you just
> want nearest neighbour resampling you can do this as:
>
>    gdal_translate -outsize 6656 3328 in.tif out.tif
>
> or at the API level by specifying 6656,3328 as your buffer size when
> doing a RasterIO() to read into memory.
>
> If you want to control the resampling kernel you need to use the warp
> api.  At the commandline:
>
>    gdalwarp -rc in.tif out.tif -ts 6656 3328
>
> At the API level it is fairly involved. You could review:
>
>    http://www.gdal.org/warptut.html
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From warmerdam at pobox.com  Fri Nov  9 12:17:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to scale an image
In-Reply-To: <a271b340711090859v73f70ab7ibc81a7930f9405cd@mail.gmail.com>
References: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>
	<473482A4.7010409@pobox.com>
	<a271b340711090859v73f70ab7ibc81a7930f9405cd@mail.gmail.com>
Message-ID: <4734960E.9000608@pobox.com>

Sonson Sonson wrote:
> Thanks Frank for your response.
> I would like to do this at the API level.
> Here is what I am trying to do. I am trying to read an image, set of
> size 1000x1000 and write it to a new file of with a bigger size of say
> 1024x1024 or a smaller size like 512x512. Below a sample code of how I
> try to achieve this. newsize is the width and length of my destination
> image. I read an image, of size  rxsize x rysize, with
> poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize, dysize,
> eType, 0, 0); and create a file of size newsize x newsize, and later
> write the pixed I read to the new file. I am sure there is something
> wrong with the code, but I cannot seem to figure it out. Please help.

Sonson,

I'll add a few inline comments, but of course it is hard to judge from
this subset.

>                                GDALDataset  *poDataset = (GDALDataset
> *) GDALOpen( strInputFile, GA_ReadOnly );
> 				.................
> 				.................
> 				GDALRasterBand  *poBand = poDataset->GetRasterBand(1);
> 				.........
> 				.........
> 				//Load raster.
> 				char *data;		
> 
> 				nXSize = dxsize* dysize;

Can I just say, it is painful for me to see this variable name?  How
about nBufSize!
> 				data = (char *) CPLMalloc(nXSize*eType);

You don't show what eType is, but if it is a GDALDataType value then this
is wrong.  You likely want (GDALGetDataTypeSize(eType)/8).  GDALGetDataTypeSize
returns the size of the passed data type (such as GDT_Float32) in bits.

> 				poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize,
> dysize,  eType, 0, 0);

Can I assume that rxsize,rysize are the sizes of the source dataset, and
dxsize,dysize are the desired output size?

  				..............
> 				..............
> 				
> 				GDALDataset *poDstDS = poDriver->Create( filename, newsize,
> newsize, bands, eType, papszOptions );

Why aren't you creating the output file as dxsize,dysize instead of
newsize,newsize?

> 				
> 				poDstDS->SetGeoTransform( geotransform );
> 				poDstDS->SetProjection(projection);
> 				poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, rxsize,
> rysize, data, dxsize, dysize,  eType, 0, 0);

The data in "data" is already dxsize x dysize, so assuming the output file is
dxsize x dysize you likely want to write it using:

  poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, dxsize, dysize,
                                      data, dxsize, dysize,  eType, 0, 0);


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Fri Nov  9 12:35:30 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] improved gdal_vrtmerge.py
In-Reply-To: <47343242.4090108@sarvision.nl>
References: <47343242.4090108@sarvision.nl>
Message-ID: <47349A62.3080603@gov.yk.ca>

Hi Vincent,

Thanks for contributing your improvements. I've only recently discovered 
vrtmerge and have been enjoying it very much. I encourage you to post 
your changes to the gdal Trac where it won't get lost in the shuffle, 
and stands a better chance of being incorporated into the standard release.

http://trac.osgeo.org/gdal/newticket

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From sonson25 at gmail.com  Fri Nov  9 13:13:19 2007
From: sonson25 at gmail.com (Sonson Sonson)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to scale an image
In-Reply-To: <4734960E.9000608@pobox.com>
References: <a271b340711090727h2d87dd34lfeb2e7890da683d@mail.gmail.com>
	<473482A4.7010409@pobox.com>
	<a271b340711090859v73f70ab7ibc81a7930f9405cd@mail.gmail.com>
	<4734960E.9000608@pobox.com>
Message-ID: <a271b340711091013q6be71555y79dd77993cc2e3e@mail.gmail.com>

Sorry. I have added some inline comments.
Please see the code below.

	                        GDALDataType eType = GDT_Byte;
				.................
				.................
				GDALDataset  *poDataset = (GDALDataset *) GDALOpen( strInputFile,
GA_ReadOnly );
				.................
				.................
				GDALRasterBand  *poBand = poDataset->GetRasterBand(1);
				.........
				.........
				//Load raster.
				char *data;		

				nXSize = dxsize* dysize; //Buffer size
				data = (char *) CPLMalloc(nXSize*eType);
				//rxsize and rysize are the size of the input dataset and dxsize *
dysize is the size in byte of the buffer
				// That will store the read data in the data.
				poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize,
dysize,  eType, 0, 0);
																																														
				..............
				..............
				
				//newsize is the size of my new image. It is very likely to be
different than rxsize and rysize.
				GDALDataset *poDstDS = poDriver->Create( filename, newsize,
newsize, bands, eType, papszOptions );
				
				poDstDS->SetGeoTransform( geotransform );
				poDstDS->SetProjection(projection);
				// I would like to write the data in a new image of size newsize.
Basically the idea is that,
				// If rxsize and rysize are: 1000x1000 and newsize is 512x512
				// I would like to have a new image that is scaled down to
512x512, but with the same data as
				//the original 1000x1000 image.
				poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, newsize,
newsize, data, dxsize, dysize,  eType, 0, 0);
				poDstDS->FlushCache();
				
				delete poDstDS;

On Nov 9, 2007 12:17 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Sonson Sonson wrote:
> > Thanks Frank for your response.
> > I would like to do this at the API level.
> > Here is what I am trying to do. I am trying to read an image, set of
> > size 1000x1000 and write it to a new file of with a bigger size of say
> > 1024x1024 or a smaller size like 512x512. Below a sample code of how I
> > try to achieve this. newsize is the width and length of my destination
> > image. I read an image, of size  rxsize x rysize, with
> > poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize, dysize,
> > eType, 0, 0); and create a file of size newsize x newsize, and later
> > write the pixed I read to the new file. I am sure there is something
> > wrong with the code, but I cannot seem to figure it out. Please help.
>
> Sonson,
>
> I'll add a few inline comments, but of course it is hard to judge from
> this subset.
>
> >                                GDALDataset  *poDataset = (GDALDataset
> > *) GDALOpen( strInputFile, GA_ReadOnly );
> >                               .................
> >                               .................
> >                               GDALRasterBand  *poBand = poDataset->GetRasterBand(1);
> >                               .........
> >                               .........
> >                               //Load raster.
> >                               char *data;
> >
> >                               nXSize = dxsize* dysize;
>
> Can I just say, it is painful for me to see this variable name?  How
> about nBufSize!
> >                               data = (char *) CPLMalloc(nXSize*eType);
>
> You don't show what eType is, but if it is a GDALDataType value then this
> is wrong.  You likely want (GDALGetDataTypeSize(eType)/8).  GDALGetDataTypeSize
> returns the size of the passed data type (such as GDT_Float32) in bits.
Yes eType is GDALDataType of value GDT_Byte
>
> >                               poBand->RasterIO(GF_Read, 0, 0, rxsize, rysize, data, dxsize,
> > dysize,  eType, 0, 0);
>
> Can I assume that rxsize,rysize are the sizes of the source dataset, and
> dxsize,dysize are the desired output size?
>
rxsize and rysize are the size of the source dataset and dxsize and
dysize are just the size of buffer to read. The desired output dataset
size is newsize.
>                                 ..............
> >                               ..............
> >
> >                               GDALDataset *poDstDS = poDriver->Create( filename, newsize,
> > newsize, bands, eType, papszOptions );
>
> Why aren't you creating the output file as dxsize,dysize instead of
> newsize,newsize?
>
> >
> >                               poDstDS->SetGeoTransform( geotransform );
> >                               poDstDS->SetProjection(projection);
> >                               poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, rxsize,
> > rysize, data, dxsize, dysize,  eType, 0, 0);
>
> The data in "data" is already dxsize x dysize, so assuming the output file is
> dxsize x dysize you likely want to write it using:
>
>   poDstDS->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, dxsize, dysize,
>                                       data, dxsize, dysize,  eType, 0, 0);
My problem here, is that dxsize and newsize might be different.
>
>
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

Thanks.
Sonson

From matt.wilkie at gov.yk.ca  Fri Nov  9 13:41:57 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] comparing overviews (pyramids) - arcgis, gdal, ossim
Message-ID: <4734A9F5.4090608@gov.yk.ca>

Hi All,

I've just run an experiment on the various methods available to me of 
adding overviews, pyramids in arcgis parlance, to rasters and thought 
others might be interested in the results.

Source data: 14 LZW compressed tiff images, a mix of 8bit grey and RGB.

source                                      1.710 gb
arcgis LZ7 compressed (.rrd)                2.069 gb
ossim img2rr compress deflate (.ovr)        2.348 gb
gdaladdo with COMPRESS_OVERVIEW LZW (.tif)  2.623 gb
gdaladdo with USE_RRD YES (.aux)            3.169 gb

(totals are source + overviews together)


So, the best absolute storage savings are achieved wimith arcgis.

The best open source option in terms of storage space is ossim, however 
only ossim tools will use the overviews. Ossim is also the fastest of 
the bunch (subjective, I didn't think to actually measure the process 
until halfway through).

The best open source option for sharing amoung multiple applications is 
gdaladdo with embedded overviews in the tiff, but be careful of bug 
#1758 http://trac.osgeo.org/gdal/ticket/1758

Gdal tools (e.g. openev) will use arcgis .rrd even if it can't make 
them. So if you have a mixed shop this is a good choice.

It would be nice to see more collaboration between ossim and gdal. The 
external .ovr file used by ossim is geotiff so I imagine this would not 
be that hard(?).

Ossim is generating 10-12 overviews per file while arcgis does 6-7 and 
gdal 4 (I used gdaladdo ... 2 4 8 16 as per the example on the manual 
page). Since the ossim .ovr is a deflate compressed geotiff I am 
mystified as to why it's images are so much smaller than gdal's.  On a 
single image, there is less than a 1mb difference in 366mb using 
gdaladdo deflate vs lzw compression.

source lzw tif    218 mb
arcgis: 7 overs   255 mb
ossim:  12 overs  272 mb
gdal tif: 4 overs 367 mb

For more strangeness yet, gdaladdo doesn't like deflate compressed tiff:

  gdal_translate -co compress=deflate image.tif deflated.tif

  gdaladdo deflated.tif 2 4 8 16
   0...10...20...30.ERROR 1: ZIPDecode:ZLib error: (null)
   ERROR 1: TIFFReadEncodedTile() failed.
   ERROR 1: IReadBlock failed at X offset 0, Y offset 1
   ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
   ERROR 1: ZIPDecode:Decoding error at scanline 128d, unknown
    compression method
   ERROR 1: TIFFReadEncodedTile() failed.

And same error using '--config compress_overview deflate'

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Fri Nov  9 15:05:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] OGR, CPLSPrintf and thread safety
In-Reply-To: <f3b73b7d0711080819o76fc2f7anbc44c1c9aa4a54ee@mail.gmail.com>
References: <962626470711080740s2664be95q7862db1670449cf1@mail.gmail.com>
	<f3b73b7d0711080819o76fc2f7anbc44c1c9aa4a54ee@mail.gmail.com>
Message-ID: <4734BD8C.9030101@pobox.com>

Tamas Szekeres wrote:
> Daniel,
> 
> __declspec(thread) is a Microsoft VC specific so it cannot used as an
> universal solution. Moreover it works in DLLs only when those DLLs are
> bound to the executable, and will not work for those loaded with
> LoadLibrary().
> 
> In this particular case it would be reasonable to allocate the buffer
> in the stack at the beginning of every function using these variables.
> 
> Alternatively there's a fairly platform neutral TLS implementation in
> gdal that can also be used.
> 
> You might want to submit a ticket with this issue.

Folks,

I can confirm that __declspec(thread) is not the "right" solution though
it might do in particular circumstances.  The bug was filed as

   http://trac.osgeo.org/gdal/ticket/1979

I have fixed it in trunk and 1.4 branch by using the CPL*TLS (thread
local storage) services.  I have also made a pass through GDAL in trunk
replacing use of CPLSPrintf() with CPLString which doesn't have the
static buffer and limited buffer size issues of CPLSPrintf().  There are
more places to fix, but I'd like to encourage developers to avoid CPLSPrintf()
in the future, in favor of CPLString.

eg.

This:
   SetLocalCS( CPLSPrintf("\"Panorama\" projection number %d",
                          iProjSys) );

becomes:
   SetLocalCS( CPLString().Printf("\"Panorama\" projection number %d",
                                  iProjSys) );


The CPLString() syntax creates a temporary CPLString object which last
until after the SetLocalCS() function call is completed.  The Printf()
method works normally, and there is a default casting operating for
CPLString to const char *, so SetLocalCS() gets a normal const char *
as it expects.

One thing to be aware of is that the (const char *) casting operator
is only used if the place the CPLString is being passed to is declared
to expect a char * or const char *.  So if you pass CPLString's into
printf() type arguments which are untyped you need to explicitly cast
to const char *, or call the c_str() method.

eg.
         CPLDebug( "OGR_ESRI", "Unsupported projection: %s", osProj.c_str() );

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Fri Nov  9 15:28:28 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] place for user contributed utilities?
Message-ID: <4734C2EC.7090407@gov.yk.ca>

Dear GDAL,

I've pointed two people towards the gdal trac lately as for putting 
contributed utilities. However is creating a newticket as an enhancement 
request actually the best place/process?

The "How to contribute FAQ" http://trac.osgeo.org/gdal/wiki/FAQ is not 
yet answered. Perhaps my question can drive that a little :)

My ulterior motive of course is to get tools that I'm interested in 
carried along with the rest of the gdal tree as it develops, and as an 
easy method of acquiring windows binaries.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From eric.c2c at gmail.com  Fri Nov  9 16:31:49 2007
From: eric.c2c at gmail.com (Eric Lemoine)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] hatches rendering issues
In-Reply-To: <4733179E.7070505@pobox.com>
References: <5ec103de0711041612u3b866a63qc04d438bf5377b5e@mail.gmail.com>
	<472F4151.40003@pobox.com>
	<5ec103de0711060006jfc9f77bx9d5838ed51c35128@mail.gmail.com>
	<47309214.9030004@pobox.com>
	<5ec103de0711080143k79095f2emca1a3d2dcdaa4bf2@mail.gmail.com>
	<4733179E.7070505@pobox.com>
Message-ID: <5ec103de0711091331j57eec7e3l7a4d0b9a0d090d33@mail.gmail.com>

On Nov 8, 2007 3:05 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Eric Lemoine wrote:
> > If my original image is 1/5000 and if I use <gdaladdo file.tif 2 4>,
> > is MapServer going to do its own downsampling? I was expecting
> > MapServer to rely on the overviews created by gdaladdo and do nothing
> > more.
>
> Eric,
>
> Generally speaking MapServer will work from the overview corresponding to
> the resolution of the map request.  If there is no direct correspondence
> it will work from the closest *higher resolution* overview.
>
> Things are also complicated by the fact that in some modes (ie. AVERAGE
> resampling, reprojecting) MapServer requests the source data somewhat
> oversampled and downsamples/warps from that.  So you may actually end up
> loading a higher resolution overview than you would otherwise expect.
>
> If the overview level requested for "normal" views does not correspond
> to the resolution of an overview, downsampling must still be done by
> MapServer.

Frank,

At 72 dpi my original tif wasn't 1/5000 but somewhere near 1/900 (it
is 1/5000 for 400 dpi). That's why the 1/5000 image I posted hadn't a
uniform hatching spacing.

Anyway, here's how I managed getting good results:

$gdaladdo -r average 2 4 8 16 file.tif

and request images from MapServer at the exact resolutions, that is
(if r is the initial resolution): r, r/2, r/4, r/8, r/16. Previously I
was requesting images at 1/1000, 1/2000, 1/5000, 1/10000, 1/20000,
which forced MapServer to do its own downsampling I guess.

Anyway, rendering is good now. Thanks for your help Frank,

--
Eric

From mdsumner at utas.edu.au  Fri Nov  9 17:24:39 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Gdal-dev Digest, Vol 42, Issue 15
In-Reply-To: <200711081058.lA8Awi0e011060@duke.maptools.org>
References: <200711081058.lA8Awi0e011060@duke.maptools.org>
Message-ID: <4734DE27.8080406@utas.edu.au>

This is actually a reasonably close description of how R's sp package 
represents a gridded dataset as as SpatialGridDataFrame, readable by 
readGDAL via rgdal.

In R the data is stored as a "data frame" - which is basically a list of 
same-length vectors that is matrix-alike via methods. (Real matrices in 
R are just vectors with a "dim" attribute and appropriate methods).  For 
SGDF each row holds each pixel's value, one column per band. In R the 
data frame structure allows bands of different data type, a pathological 
GDAL scenario but very useful in R generally.

I don't get what you want to do with it once you have represented it as 
a "matrix", but maybe this gives you another option.

Cheers, Mike.
>
> ------------------------------------------------------------------------
>
> Subject:
> [Gdal-dev] How to efficiently read in a GDAL image into a matrix
> From:
> Ryan Lewis <me@ryanlewis.net>
> Date:
> Wed, 7 Nov 2007 14:15:34 -0500
> To:
> gdal-dev@lists.maptools.org
>
> To:
> gdal-dev@lists.maptools.org
>
>
> Hi,
>
> I would like to read in an entire ENVI image into a GDAL Dataset, and 
> then, create a matrix the size of which is pixels X number of raster 
> bands
> So each column of the matrix is a raster band of the image, and each 
> row is a pixel of the image.  so the idea is I would linearize the 2d 
> raster band with something like the pixel at (x,y) in a particular 
> rasterband would be at the position
> x*width + y in the column.
>
> Apparently it is a really bad idea to try and read one value at a time 
> out of each raster band, so could someone just tell me the best method 
> for doing this.
>
> (If you have the code already that would be cool, but it is not 
> necessary, just an outline of the best way to do this in GDAL would be 
> awesome).
>
> Thanks,
>
> - Ryan H. Lewis
>


From tkeitt at gmail.com  Fri Nov  9 21:37:37 2007
From: tkeitt at gmail.com (Tim Keitt)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Gdal-dev Digest, Vol 42, Issue 15
References: <200711081058.lA8Awi0e011060@duke.maptools.org>
	<4734DE27.8080406@utas.edu.au>
Message-ID: <loom.20071110T023012-591@post.gmane.org>

Michael Sumner <mdsumner <at> utas.edu.au> writes:

> In R the data is stored as a "data frame" - which is basically a list of 
> same-length vectors that is matrix-alike via methods. (Real matrices in 
> R are just vectors with a "dim" attribute and appropriate methods).  For 
> SGDF each row holds each pixel's value, one column per band. In R the 
> data frame structure allows bands of different data type, a pathological 
> GDAL scenario but very useful in R generally.

GDAL handles different data types per band just fine. Some file format drivers
may disallow different types, but the GDAL API does not have this constraint.

Re the original post, I don't use sp classes that often, but I assume there is a
method to convert a SGDF to an ordinary data frame or matrix. Simply call
readGDAL and then convert to a matrix, probably using the "as" method.

THK



From vdharan2001 at gmail.com  Sat Nov 10 08:11:25 2007
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Need Help compiling OGR sample in linux
In-Reply-To: <47332635.9050706@pobox.com>
References: <d29760880711080623q4711ed34jd3a12816fe8507a@mail.gmail.com>
	<47332635.9050706@pobox.com>
Message-ID: <d29760880711100511j6534974ek73cdf067704d4847@mail.gmail.com>

Hi,

My g++ version is 4.1.1 so i decided to use  C API.

Iam able to get it working.

Thank you very much.

Regards,
N.Vidhiyadharan

On 11/8/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> vdharan nadra wrote:
> > Hi,
> >
> > Can any one please  provide me the step by step procedure to compile
> > the following sample in linux.
> > I have installed fwtools. Iam new to linux environment.
>
> Hi,
>
> I was able to build this program using the command:
>
>   g++ -I/usr3/pkg4/OpenEV_FW_Tree/FWTools/include
> -L/usr3/pkg4/OpenEV_FW_Tree/FWTools/lib test1.cpp -lgdal -o test1
>
> Because you are using C++, there are fairly compiler version specific
> linkage issues and you will need to use a version of g++ compatible with
> g++ 3.2.3. And 3.2.x would be fine.  4.x likely not.
>
> If you were to rework your program to use the equivelent C API this
> problem would not exist.
>
> I also found I had to source the fwtools_env.sh script first in order
> to set LD_LIBRARY_PATH properly so that dependent libraries were found.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From mateusz at loskot.net  Sat Nov 10 08:58:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] place for user contributed utilities?
In-Reply-To: <4734C2EC.7090407@gov.yk.ca>
References: <4734C2EC.7090407@gov.yk.ca>
Message-ID: <4735B91A.3020107@loskot.net>

Matt Wilkie wrote:
> Dear GDAL,
> 
> I've pointed two people towards the gdal trac lately as for putting
> contributed utilities. However is creating a newticket as an enhancement
> request actually the best place/process?
> 
> The "How to contribute FAQ" http://trac.osgeo.org/gdal/wiki/FAQ is not
> yet answered. Perhaps my question can drive that a little :)
> 
> My ulterior motive of course is to get tools that I'm interested in
> carried along with the rest of the gdal tree as it develops, and as an
> easy method of acquiring windows binaries.

Matt,

Personally, I believe reporting a Ticket is the best way to submit
contributions. Here is one of examples how GeoJSON driver have been
incorporated to the GDAL:

http://trac.osgeo.org/gdal/ticket/1968

I created new Ticket of type of enhancement and now we are refer to this
ticket when submitting driver code, driver test cases, changes to the
building configuration required for the new driver, etc.
So, we can track all necessary updates and changes in one plance,
using single Ticket. After a new driver is incorporated and well tested,
we can annotate and close the ticket.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sat Nov 10 10:33:29 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Changes to
	Geo::OSR::SpatialReference->ImportFromXXX() methods?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301855116@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301855116@COMAIL01.digitalglobe.com>
Message-ID: <4735CF49.50108@tkk.fi>

Ethan Alpert kirjoitti:
>
> Greetings, I recently compiled the the svn-trunk from 11/06. It seems 
> the import functions interface has changed and tries to match the 
> char** interface of the native library. I had to patch ImportFromESRI 
> because I couldn?t figure out how to pass projection strings.
>
> Do you have an example of how to create a perl array which 
> ImportFromESRI will now accept?
>

In fact I'm not sure what change you refer to. I've so far used these 
functions very little. The ImportFromESRI accepts a reference to an 
options array (similarly to the native library) as you say but I have 
little clue what it should contain. All ESRI prj files I find contain 
WKT, which ImportFromWkt happily accepts. The usage should be

use Geo::GDAL;
$a = Geo::OSR::SpatialReference->new();
$a->ImportFromESRI([ ...list of strings here... ]);

I'm cc'ing this to the gdal-list, probably somebody there can enlighten 
us about the old style prj files.

Ari
>
> Thanks,
>
> -ethan
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ealpert at digitalglobe.com  Sat Nov 10 10:40:09 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] RE: Changes to
	Geo::OSR::SpatialReference->ImportFromXXX() methods?
In-Reply-To: <4735CF49.50108@tkk.fi>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301855116@COMAIL01.digitalglobe.com>
	<4735CF49.50108@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330185511B@COMAIL01.digitalglobe.com>


Ari,

Take a look at the diff of _wrap_SpatialReference_ImportFromESRI in
osr_wrap.cpp between the trunk and 1.4.3. The code has changed. All I'm
sure of is that code that ran in 1.4.3 gives me an exit. As far as I can
tell the 1.4.x releases took a single string. I will try the list of
strings approach you suggest.

-e

The code is:


my $from_sr = new Geo::OSR::SpatialReference;

my $prj = read_file("$dir/$base\.prj",bindmode=>':raw');

$from_sr->ImportFromESRI($prj);


The above code worked fine for all 1.4.x releases


-e
-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Saturday, November 10, 2007 8:33 AM
To: Ethan Alpert; gdal-dev
Subject: Re: Changes to Geo::OSR::SpatialReference->ImportFromXXX()
methods?

Ethan Alpert kirjoitti:
>
> Greetings, I recently compiled the the svn-trunk from 11/06. It seems 
> the import functions interface has changed and tries to match the 
> char** interface of the native library. I had to patch ImportFromESRI 
> because I couldn't figure out how to pass projection strings.
>
> Do you have an example of how to create a perl array which 
> ImportFromESRI will now accept?
>

In fact I'm not sure what change you refer to. I've so far used these 
functions very little. The ImportFromESRI accepts a reference to an 
options array (similarly to the native library) as you say but I have 
little clue what it should contain. All ESRI prj files I find contain 
WKT, which ImportFromWkt happily accepts. The usage should be

use Geo::GDAL;
$a = Geo::OSR::SpatialReference->new();
$a->ImportFromESRI([ ...list of strings here... ]);

I'm cc'ing this to the gdal-list, probably somebody there can enlighten 
us about the old style prj files.

Ari
>
> Thanks,
>
> -ethan
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma




From warmerdam at pobox.com  Sat Nov 10 12:37:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
Message-ID: <4735EC65.5060502@pobox.com>

Motion: To adopt RFC 14 on Image Structure Metadata

   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Nov 10 12:43:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion: Commiter Status for Phil Vachon
Message-ID: <4735EDD2.606@pobox.com>

Motion: Commiter Status for Phil Vachon

Phil has contributed a JAXA PALSAR driver to GDAL, and has a COASP
driver "in the pipe".  He is also a frequent attender of OSGeo Ottawa
meetings, an afficianado of SAR imagery, and a software developer at PCI.
I am confident he will be a valuable contributor.

Phil has reviewed RFC 3 on commiter responsibilities, and has agreed to them.

Starting with a +1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sat Nov 10 13:21:17 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <f3b73b7d0711101021s1182dbc5m1520758873e0eae@mail.gmail.com>

+1


2007/11/10, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To adopt RFC 14 on Image Structure Metadata
>
>    http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Sat Nov 10 13:22:18 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion: Commiter Status for Phil Vachon
In-Reply-To: <4735EDD2.606@pobox.com>
References: <4735EDD2.606@pobox.com>
Message-ID: <f3b73b7d0711101022i433893bawaac947f0336d2fe@mail.gmail.com>

+1

Best regards,

Tamas


2007/11/10, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: Commiter Status for Phil Vachon
>
> Phil has contributed a JAXA PALSAR driver to GDAL, and has a COASP
> driver "in the pipe".  He is also a frequent attender of OSGeo Ottawa
> meetings, an afficianado of SAR imagery, and a software developer at PCI.
> I am confident he will be a valuable contributor.
>
> Phil has reviewed RFC 3 on commiter responsibilities, and has agreed to them.
>
> Starting with a +1 from me.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sat Nov 10 14:44:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] pre deleting for GDALDriver::Create() and CreateCopy()
Message-ID: <47360A33.8040306@pobox.com>

Folks,

Even noticed a problem that has been nagging the back of my mind as well.
Currently gdal_translate will generally just blat over existing files
without warnings or anything.  The old file is replaced, and I'm fine with
that.  But, associated files (.wld, .aux.xml, .ovr, etc) are not cleaned up
which can easily leave us in the position where an old support file is treated
as applying to a new base file - quite possibly very inappropriately.

To fix this, I have modified the GDALDriver::Create() and
GDALDriver::CreateCopy() methods to first check if the dataset already
exists.  If so, it identifies the appropriate driver, and calls it's delete
method.  For drivers who properly know about their supporting files (see
GetFileList()) this will result in supporting files getting cleaned up.

This does a good job of cleaning up .aux.xml files for instance.

This is a fairly significant behavioral change, and if there are people with
an objection please let me know and we can discuss it at greater length.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Sat Nov 10 15:10:19 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] place for user contributed utilities?
In-Reply-To: <4735B91A.3020107@loskot.net>
References: <4734C2EC.7090407@gov.yk.ca> <4735B91A.3020107@loskot.net>
Message-ID: <4736102B.8080204@gov.yk.ca>

> Personally, I believe reporting a Ticket is the best way to submit
> contributions. Here is one of examples how GeoJSON driver have been
> incorporated to the GDAL:

Thank you Mateusz, that's perfect. I've added it to the wiki, with some 
wording changes: http://trac.osgeo.org/gdal/wiki/HowToContribute

I thought about adding a blurb about filing bug reports, but got bogged 
down in "how to write a good bug report". I thought it would be as 
simple as "go read this page...", hah! Everything I found online was 
specific to a particular project or software base. I'm sure it's out 
there, but I'm supposed to be working right now :)

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Sat Nov 10 15:19:38 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] PCI .pix: only reading 1 band
Message-ID: <4736125A.60309@gov.yk.ca>

Hi,

In trying to do some stuff today I noticed that the gdal utilities are 
only reading a single band of PCI .pix images. Is this normal? Has it 
always been this way? I think I remember using gdal before on these but, 
as I've publicly proven here in the past my memory is not so reliable... ;-)

GDAL 1.5dev, FWTools 1.4.2, released 2007/11/05

Here is gdalinfo output for a 6 channel .pix:


  gdalinfo y:\ImageRepository\Landsat7\Orthos\Mosaic\oYukonMosaic15m.pix
Driver: PCIDSK/PCIDSK Database File
Files: y:\ImageRepository\Landsat7\Orthos\Mosaic\oYukonMosaic15m.pix
Size is 64523, 81767
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["Unknown datum based upon the GRS 1980 ellipsoid",
         DATUM["Not specified (based on GRS 1980 spheroid)",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Albers_Conic_Equal_Area"],
     PARAMETER["standard_parallel_1",61.6666666666667],
     PARAMETER["standard_parallel_2",68],
     PARAMETER["latitude_of_center",59],
     PARAMETER["longitude_of_center",-132.5],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",500000],
     UNIT["Meter",1]]
Origin = (17475.000000000000000,1722705.000000000000000)
Pixel Size = (15.000000000000000,-15.000000000000000)
Metadata:
   SOFTWARE=PACEV9.1
   FILE_ID=c_\1mosaic\YukonMosaic15m.pix
   GENERATING_FACILITY=PCI Inc., Richmond Hill, Canada
   DESCRIPTION1=
   DESCRIPTION2=
   DATE_OF_CREATION=10_13 27Mar2002
   DATE_OF_UPDATE=10_17 27Mar2002
Corner Coordinates:
Upper Left  (   17475.000, 1722705.000) (144d54'58.37"W, 69d32'29.93"N)
Lower Left  (   17475.000,  496200.000) (140d48'47.92"W, 58d40'49.61"N)
Upper Right (  985320.000, 1722705.000) (120d 0'49.34"W, 69d32'12.29"N)
Lower Right (  985320.000,  496200.000) (124d 8'20.73"W, 58d40'37.73"N)
Center      (  501397.500, 1109452.500) (132d28'15.27"W, 64d28'12.10"N)
Band 1 Block=64523x1 Type=Byte, ColorInterp=Undefined
   Description = Contents Not Specified
   Overviews: 21507x27255, 7169x9085, 2390x3028
   Metadata:
     DATE_OF_CREATION=10_13 27Mar2002
     DATE_OF_UPDATE=10_17 27Mar2002
     UNITS=
     HISTORY1=orthoen_output mosaic 
       10_
17 27Mar2002
     LAYER_CRC=0x6423





-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Sat Nov 10 15:50:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] PCI .pix: only reading 1 band
In-Reply-To: <4736125A.60309@gov.yk.ca>
References: <4736125A.60309@gov.yk.ca>
Message-ID: <473619B3.7020806@pobox.com>

Matt Wilkie wrote:
> Hi,
> 
> In trying to do some stuff today I noticed that the gdal utilities are 
> only reading a single band of PCI .pix images. Is this normal? Has it 
> always been this way? I think I remember using gdal before on these but, 
> as I've publicly proven here in the past my memory is not so reliable... 
> ;-)
> 
> GDAL 1.5dev, FWTools 1.4.2, released 2007/11/05
> 
> Here is gdalinfo output for a 6 channel .pix:

Matt,

Multi band files should work.  I have confirmed that gdalinfo sees
multiple bands on an old "irvine.pix" file.  Could you submit a bug
report on this issue with a file causing problems?  (hopefully a small
file).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ivan.lucena at pmldnet.com  Sat Nov 10 15:54:51 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] pre deleting for GDALDriver::Create() and CreateCopy()
In-Reply-To: <47360A33.8040306@pobox.com>
References: <47360A33.8040306@pobox.com>
Message-ID: <47361A9B.8010308@pmldnet.com>

Frank,

I have no objection. I actually ran into the same problem with a driver 
that I wrote but I wasn't aware of GetFileList() so I implemented the 
fix (delete associated files) on the Create method of the driver itself. 
Your solution sounds great.

Regards,

Ivan

Frank Warmerdam wrote:
> Folks,
> 
> Even noticed a problem that has been nagging the back of my mind as well.
> Currently gdal_translate will generally just blat over existing files
> without warnings or anything.  The old file is replaced, and I'm fine with
> that.  But, associated files (.wld, .aux.xml, .ovr, etc) are not cleaned up
> which can easily leave us in the position where an old support file is 
> treated
> as applying to a new base file - quite possibly very inappropriately.
> 
> To fix this, I have modified the GDALDriver::Create() and
> GDALDriver::CreateCopy() methods to first check if the dataset already
> exists.  If so, it identifies the appropriate driver, and calls it's delete
> method.  For drivers who properly know about their supporting files (see
> GetFileList()) this will result in supporting files getting cleaned up.
> 
> This does a good job of cleaning up .aux.xml files for instance.
> 
> This is a fairly significant behavioral change, and if there are people 
> with
> an objection please let me know and we can discuss it at greater length.
> 
> Best regards,

From ari.jolma at tkk.fi  Sat Nov 10 16:10:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Changes to
	Geo::OSR::SpatialReference->ImportFromXXX() methods?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330185511B@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301855116@COMAIL01.digitalglobe.com>
	<4735CF49.50108@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB2330185511B@COMAIL01.digitalglobe.com>
Message-ID: <47361E62.3080103@tkk.fi>

Ethan Alpert kirjoitti:
> Ari,
>
> Take a look at the diff of _wrap_SpatialReference_ImportFromESRI in
> osr_wrap.cpp between the trunk and 1.4.3. The code has changed. All I'm
> sure of is that code that ran in 1.4.3 gives me an exit. As far as I can
> tell the 1.4.x releases took a single string. I will try the list of
> strings approach you suggest.
>
> -e
>
> The code is:
>
>
> my $from_sr = new Geo::OSR::SpatialReference;
>
> my $prj = read_file("$dir/$base\.prj",bindmode=>':raw');
>
> $from_sr->ImportFromESRI($prj);
>
>
> The above code worked fine for all 1.4.x releases
>   

Does the read_file just return the contents of the file as one string? 
It seems that hobu made the change March 7 2007: "ImportFromESRI takes a 
list, unlike all of the other ImportFrom* methods.  Apply the 
appropriate typemap...". I just wonder how it could have worked earlier? 
The method in C++ expects a pointer to an array of char pointers 
(strings) and earlier the bindings would have given a pointer to one 
char pointer. Hm, if it earlier was

$from_sr->ImportFromESRI($prj);


then currently

$from_sr->ImportFromESRI([$prj]);

should give the same result. Could you post an example .prj file?


Ari



-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ari.jolma at tkk.fi  Sat Nov 10 16:17:30 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Is make generate a part of make release?
Message-ID: <47361FEA.80808@tkk.fi>

I downloaded the sources of 1.4.3 and while there are swig .i files that 
are very recent, the perl wrappers are from December 2006. That would 
indicate that make generate was not run in the release process.

I have a bad habit of not updating the wrappers in the repository very 
often. Is it my responsibility to update them at the time of release?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From hobu.inc at gmail.com  Sat Nov 10 16:30:35 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <4056FC31-A839-4EB6-A63C-2B79A585F951@gmail.com>

+0.
On Nov 10, 2007, at 11:37 AM, Frank Warmerdam wrote:

> Motion: To adopt RFC 14 on Image Structure Metadata
>
>  http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure
>
> Best regards,
> --  
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Sat Nov 10 16:42:33 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <200711102242.34481.even.rouault@mines-paris.org>

+1

Le Saturday 10 November 2007 18:37:41 Frank Warmerdam, vous avez ?crit?:
> Motion: To adopt RFC 14 on Image Structure Metadata
>
>    http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure
>
> Best regards,




From warmerdam at pobox.com  Sat Nov 10 16:55:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Is make generate a part of make release?
In-Reply-To: <47361FEA.80808@tkk.fi>
References: <47361FEA.80808@tkk.fi>
Message-ID: <473628BF.30603@pobox.com>

Ari Jolma wrote:
> I downloaded the sources of 1.4.3 and while there are swig .i files that 
> are very recent, the perl wrappers are from December 2006. That would 
> indicate that make generate was not run in the release process.
> 
> I have a bad habit of not updating the wrappers in the repository very 
> often. Is it my responsibility to update them at the time of release?

Ari,

I believe our policy is that it is up to the wrapper maintainer to
regenerate and commit the derived files. This is done so the maintainer
can confirm the correct function and because in some cases (and I
vaguely recall this applying to perl at one time) special actions are
required.

The exception is csharp for which the mkgdaldist.sh script automatically
regenerates the interfaces.

If you would like the same done for perl, please update the mkgdaldist.sh
script yourself, or write a ticket to have Mateusz do so, with any special
instructions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tim.bowden at westnet.com.au  Sat Nov 10 19:01:42 2007
From: tim.bowden at westnet.com.au (Tim Bowden)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] place for user contributed utilities?
In-Reply-To: <4736102B.8080204@gov.yk.ca>
References: <4734C2EC.7090407@gov.yk.ca> <4735B91A.3020107@loskot.net>
	<4736102B.8080204@gov.yk.ca>
Message-ID: <1194739302.6665.194.camel@edoras>


On Sat, 2007-11-10 at 12:10 -0800, Matt Wilkie wrote:
> > Personally, I believe reporting a Ticket is the best way to submit
> > contributions. Here is one of examples how GeoJSON driver have been
> > incorporated to the GDAL:
> 
> Thank you Mateusz, that's perfect. I've added it to the wiki, with some 
> wording changes: http://trac.osgeo.org/gdal/wiki/HowToContribute
> 
> I thought about adding a blurb about filing bug reports, but got bogged 
> down in "how to write a good bug report". I thought it would be as 
> simple as "go read this page...", hah! Everything I found online was 
> specific to a particular project or software base. I'm sure it's out 
> there, but I'm supposed to be working right now :)
> 
> cheers,
> 

There's always the oft-quoted "How to Report Bugs Effectively" at
http://www.chiark.greenend.org.uk/~sgtatham/bugs.html and some useful
advice can probably be extracted from esr's "How To Ask Questions The
Smart Way" http://www.catb.org/~esr/faqs/smart-questions.html, though
that's more related to getting help on a mailing list.

Regards,
Tim Bowden


From mdsumner at utas.edu.au  Sat Nov 10 19:19:29 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: [R-sig-Geo] working with Z values in spatial data
	frames
In-Reply-To: <200711101701.lAAH1JOK027950@duke.maptools.org>
References: <200711101701.lAAH1JOK027950@duke.maptools.org>
Message-ID: <47364A91.7080104@utas.edu.au>

I know GDAL allows it, and it flows naturally into the data.frame model 
in R, but the GDAL gods consider the case of multiple bands of different 
types to be pathological. (I think).

This will give you the matrix:

as.image.SpatialGridDataFrame()$z

That's not a class-definition based "as" coercer, because "image" is not 
a class. It's just a well supported data structure in R.

Cheers, Mike.
>
>
>
> ------------------------------------------------------------------------
>
> Subject:
> [Gdal-dev] Re: Gdal-dev Digest, Vol 42, Issue 15
> From:
> Tim Keitt <tkeitt@gmail.com>
> Date:
> Sat, 10 Nov 2007 02:37:37 +0000 (UTC)
> To:
> gdal-dev@lists.maptools.org
>
> To:
> gdal-dev@lists.maptools.org
>
>
> Michael Sumner <mdsumner <at> utas.edu.au> writes:
>
>   
>> In R the data is stored as a "data frame" - which is basically a list of 
>> same-length vectors that is matrix-alike via methods. (Real matrices in 
>> R are just vectors with a "dim" attribute and appropriate methods).  For 
>> SGDF each row holds each pixel's value, one column per band. In R the 
>> data frame structure allows bands of different data type, a pathological 
>> GDAL scenario but very useful in R generally.
>>     
>
> GDAL handles different data types per band just fine. Some file format drivers
> may disallow different types, but the GDAL API does not have this constraint.
>
> Re the original post, I don't use sp classes that often, but I assume there is a
> method to convert a SGDF to an ordinary data frame or matrix. Simply call
> readGDAL and then convert to a matrix, probably using the "as" method.
>
> THK
>
>
>
>   


From matt.wilkie at gov.yk.ca  Sat Nov 10 21:41:35 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] PCI .pix: only reading 1 band
In-Reply-To: <473619B3.7020806@pobox.com>
References: <4736125A.60309@gov.yk.ca> <473619B3.7020806@pobox.com>
Message-ID: <47366BDF.9020400@gov.yk.ca>

> Multi band files should work.  I have confirmed that gdalinfo sees
> multiple bands on an old "irvine.pix" file.  Could you submit a bug
> report on this issue with a file causing problems?  (hopefully a small
> file).

*sigh* PEBKAC
there is no problem with gdal, just with me. There are similarily named 
.pix's that I've been attempting to work with this weekend, and some are 
single channel...

sorry for the false alarm and needless noise.

/matt slinks away


From ari.jolma at tkk.fi  Sun Nov 11 05:41:35 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Is make generate a part of make release?
In-Reply-To: <473628BF.30603@pobox.com>
References: <47361FEA.80808@tkk.fi> <473628BF.30603@pobox.com>
Message-ID: <4736DC5F.4040807@tkk.fi>

Frank Warmerdam kirjoitti:
> If you would like the same done for perl, please update the 
> mkgdaldist.sh script yourself.

I did this and tested it.

For the record, I needed to remove the dependency to GDALmake.opt from 
GNUmakefile in swig/perl, which was only needed for INST_PREFIX to be 
the PREFIX for perl Makefile.PL. Currently only "perl Makefile.PL" is 
run, which puts the Perl module to a standard location. If somebody 
needs to put them somewhere else they need to run "perl Makefile.PL" by 
hand and specify "PREFIX=some_path" manually instead of through "make 
build". If there's a big need for Perl PREFIX to be the INST_PREFIX of 
GDAL automagically then maybe we can come up with some way of picking it 
up from GDALmake.opt, but honestly, I don't think that's really needed.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ari.jolma at tkk.fi  Sun Nov 11 07:11:16 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Building the new GeoJSON driver in MinGW
Message-ID: <4736F164.8040403@tkk.fi>

Some things how the jsonc is configured make its compilation fail in 
MinGW/MSYS:

line config.h:95 needs to be

#if defined(_MSC_VER) || defined(__MINGW32__)

and lines printbuf:74 and 82 should be something like

#if defined(WIN32) && !defined(__MINGW32__)

Where could I find a GeoJSON example to try?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From mateusz at loskot.net  Sun Nov 11 08:32:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Building the new GeoJSON driver in MinGW
In-Reply-To: <4736F164.8040403@tkk.fi>
References: <4736F164.8040403@tkk.fi>
Message-ID: <47370454.3010000@loskot.net>

Ari Jolma wrote:
> Some things how the jsonc is configured make its compilation fail in
> MinGW/MSYS:
> 
> line config.h:95 needs to be
> 
> #if defined(_MSC_VER) || defined(__MINGW32__)
> 
> and lines printbuf:74 and 82 should be something like
> 
> #if defined(WIN32) && !defined(__MINGW32__)

Ari,

Thanks for this fix. Yes, the config.h stuff needs to be redesigned or
even replaced with configuration header from the gdal\port.
I will work on it soon.

> Where could I find a GeoJSON example to try?

I added ogr_geojson.py script to the autotest package along with
sample .geojson files. You can find all of them here

http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/data

Here is demo served by FeatureServer:

http://featureserver.org/featureserver.cgi/scribble/.geojson

Also, there is sample GeoServer instance available, see Andrea Aime
comment below my post:

http://mateusz.loskot.net/2007/11/06/ogr-geojson-driver/

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From josegomez at gmx.net  Sun Nov 11 11:02:59 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
In-Reply-To: <47333CB9.2090905@loskot.net>
References: <000f01c82167$41e4f050$ba03a8c0@GUS> <47333CB9.2090905@loskot.net>
Message-ID: <20071111160259.42820@gmx.net>

Hi,

I had written a reply, but I think I closed the window prior to sending the message. D'ooh!!!

> You can use linestring to one of rectangular system, projecting your
> data to ie. UTM. Then you can use provided Distance function
> based on the Pythagorean Th.

Imagine that the data is already in projected coordinates (UTM, say). I have a points layer with pairs of points, and I have another layer with a number of LINES. The POINTS are coincident with vertices on the lines layer. What I think Gus wants to know is how to measure the distance ALONG the line between those two points. So I guess that you first need to cut the line to go from point A to point B (using some sort of buffer, intersection operation). Then, on that line, you can just use the length() (can't quite remember what the method's exactly called) to work out that length. 

The implementation turns nasty, because you can have many points, and many lines. So you need some sort of algorithm to "return a line between point A and point B". 

I am curious as to the best way to solve this.

Cheers,
Jose
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From ari.jolma at tkk.fi  Sun Nov 11 17:22:54 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Playing with data from web
Message-ID: <473780BE.9090409@tkk.fi>

I got GeoJSON working and wanted to go on and test WCS also. I found 
only this WCS server at UCL (funny thing is that I was at UCL in London 
just last week): 
http://iceds.ge.ucl.ac.uk/cgi-bin/wcs?map=wcs.map&SERVICE=WCS&REQUEST=GetCapabilities

I put that into a WCS xml:

<WCS_GDAL>
  
<ServiceURL>http://iceds.ge.ucl.ac.uk/cgi-bin/wcs?map=wcs.map&</ServiceURL>
  <CoverageName>landsat</CoverageName>
</WCS_GDAL>

But the result is

ERROR 1: TIFFFetchDirectory:/vsimem/wcs/00BD4A58/wcsresult.dat: Seek 
error accessing TIFF directory
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 20

I also tried downloading it directly and it gives the same error. 
Probably this indicates that the problem is at the server end?

Are there any other working WCS servers that I could use for 
demonstration in class?

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Sun Nov 11 23:44:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: [R-sig-Geo] working with Z values in spatial data
	frames
In-Reply-To: <47364A91.7080104@utas.edu.au>
References: <200711101701.lAAH1JOK027950@duke.maptools.org>
	<47364A91.7080104@utas.edu.au>
Message-ID: <4737DA2D.8010502@pobox.com>

Michael Sumner wrote:
> I know GDAL allows it, and it flows naturally into the data.frame model 
> in R, but the GDAL gods consider the case of multiple bands of different 
> types to be pathological. (I think).
> 
> This will give you the matrix:
> 
> as.image.SpatialGridDataFrame()$z
> 
> That's not a class-definition based "as" coercer, because "image" is not 
> a class. It's just a well supported data structure in R.

Mike,

I consider the case of bands with a mixture of data types in a single
dataset uncommon.  Currently it works fine for reading, but the Create()
assumes that all bands of a newly created dataset will be of the same type.
So it is ackward to create mixed band type datasets.  It can be done in a
few cases by using the AddBand() method to create new bands of alternate
types after creating a base dataset.

Only a few datasets support mixed types (ie. HFA, PCIDSK, VRT, MEM).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Nov 11 23:45:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Playing with data from web
In-Reply-To: <473780BE.9090409@tkk.fi>
References: <473780BE.9090409@tkk.fi>
Message-ID: <4737DA72.5020406@pobox.com>

Ari Jolma wrote:
> I got GeoJSON working and wanted to go on and test WCS also. I found 
> only this WCS server at UCL (funny thing is that I was at UCL in London 
> just last week): 
> http://iceds.ge.ucl.ac.uk/cgi-bin/wcs?map=wcs.map&SERVICE=WCS&REQUEST=GetCapabilities 
> 
> 
> I put that into a WCS xml:
> 
> <WCS_GDAL>
>  
> <ServiceURL>http://iceds.ge.ucl.ac.uk/cgi-bin/wcs?map=wcs.map&</ServiceURL>
>  <CoverageName>landsat</CoverageName>
> </WCS_GDAL>

Cari,

You might want to try:

   <ServiceURL>http://geodata.telascience.org/cgi-bin/mapserv_dem?</ServiceURL>
   <CoverageName>srtmplus_raw</CoverageName>

It isn't always accessable, but I do try to keep it operational.  It is the
one used by the autotest script for the WCS driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Mon Nov 12 01:55:47 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Playing with data from web
In-Reply-To: <473780BE.9090409@tkk.fi>
References: <473780BE.9090409@tkk.fi>
Message-ID: <4737F8F3.5050904@tkk.fi>

Ari Jolma kirjoitti:
> ERROR 1: TIFFFetchDirectory:/vsimem/wcs/00BD4A58/wcsresult.dat: Seek 
> error accessing TIFF directory
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 20
>

Baah, this is the same old TIFF problem I've had before. I forget that 
if I use internal libtiff but include an include-dir, which contains 
headers of an external libtiff, problems ensue.

Thanks Frank for the telascience WCS, also the UCL WCS site is ok.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From dron at ak4719.spb.edu  Mon Nov 12 08:52:45 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <20071112135245.GC15473@ak4719.spb.edu>

On Sat, Nov 10, 2007 at 12:37:41PM -0500, Frank Warmerdam wrote:
> Motion: To adopt RFC 14 on Image Structure Metadata
> 
>   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

+1

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Nov 12 08:50:43 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <47358E58.7060503@loskot.net>
References: <47358E58.7060503@loskot.net>
Message-ID: <20071112135043.GA15473@ak4719.spb.edu>

On Sat, Nov 10, 2007 at 11:56:24AM +0100, Mateusz Loskot wrote:
> I'd like to ask you about your plans regarding the RFC 10
> 
> http://trac.osgeo.org/gdal/wiki/rfc10_ogropen
> 
> Recently, I added new driver - GeoJSON - to the OGR set and in this
> driver I follow your concept from the RFC but input parameters are
> "passed" to Open() call as environment variable.
> 
> I believe it would be good to have RFC10 implemented for 1.5.0 so I'm
> willing to help in this. Could you tell me if and where I could be
> helpful?

Hi Mateusz,

I am CC'ing to list to initiate a new discussion of RFC 10.

Actually I am thinking about revoking the RFC 10 because of two reasons.
In first of all it looks like it will not be adopted in the current form
due to the API changes it needs.

The second reason came to my mind when I better thought out the problem.
It is a problem with GUI applications.  GDAL has a possibility to
automatically determine input file format without user specification,
that is why we can't pass driver specific open options in the Open()
call. Typical scenario for GUI applications is the following: show the
open dialog to choose the file name --- at this stage we don't know the
file format yet and can't put driver specific switches on that dialog.
After file selection stage we can show the option dialog, but the
problem is that we don't know the file format, and also we do not have
a way to interrupt the GDALOpen() call to pass our options there.

Note that non-interactive CLI applications does not have this problem
because of their non-interactivity :-). We will need to run such an
application twice: the first run to determine file format and the second
run to perform our task using correct format specific options. Or we
should know the file format from the third part.

I see two ways to solve this problem.

1. Introduce the callback function which will be called in the Open()
method and return back driver specific open options --- GUI dialog can
be shown to user here.

2. Introduce new mandatory method for format drivers to determine the
file format. Now GUI scenario will look like that:

 - select the file name;
 - determine a format of that file;
 - let the user choose open options, specific for that format;
 - now proceed to GDALOpen(), capable to get options as per RFC 10.

Warning: between the second and the forth steps we have a race
condition. But for this particular case it is not important.

Either way, for applications like Mapserver we should need to know the
file format before writing the file name in its config file.

The second approach is simpler to implement and also it is good to have
separate format guessing method, it can be quite useful by itself. The
problem still exist with formats that can't be easily identified though.

Frank also suggested to pass encoded open options along with file name
instead of having the separate parameter in Open() method. With this
approach we will have different names to pass for format identification
function and for GDALOpen(): pure file name for the former one and
name+options for the last one. This will only work when we know the file
format before opening the file, otherwise we just don't know what
options are needed.

So the questions are: what approach looks better? Is there another
possible solution?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Nov 12 08:52:02 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion: Commiter Status for Phil Vachon
In-Reply-To: <4735EDD2.606@pobox.com>
References: <4735EDD2.606@pobox.com>
Message-ID: <20071112135202.GB15473@ak4719.spb.edu>

On Sat, Nov 10, 2007 at 12:43:46PM -0500, Frank Warmerdam wrote:
> Motion: Commiter Status for Phil Vachon
> 
> Phil has contributed a JAXA PALSAR driver to GDAL, and has a COASP
> driver "in the pipe".  He is also a frequent attender of OSGeo Ottawa
> meetings, an afficianado of SAR imagery, and a software developer at PCI.
> I am confident he will be a valuable contributor.
> 
> Phil has reviewed RFC 3 on commiter responsibilities, and has agreed to 
> them.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From pietro.buratti at elsagdatamat.com  Mon Nov 12 09:09:41 2007
From: pietro.buratti at elsagdatamat.com (Pietro Buratti)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Problem With black Collar with gdal warp
Message-ID: <001201c82535$ab40e370$e206280a@Mss23>

Hi,
I have a "big" problem with Reprojected GeoTIFF Images because They have a black collar after the reprojection and It's impossible to collect them in a singular GeoTIFF.

Could you help me? 
I must use only gdal utilities ...

Thanks
Pietro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071112/2cd72854/attachment.html
From dmorissette at mapgears.com  Mon Nov 12 09:32:39 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion: Commiter Status for Phil Vachon
In-Reply-To: <4735EDD2.606@pobox.com>
References: <4735EDD2.606@pobox.com>
Message-ID: <47386407.5020606@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Motion: Commiter Status for Phil Vachon
> 
> Phil has contributed a JAXA PALSAR driver to GDAL, and has a COASP
> driver "in the pipe".  He is also a frequent attender of OSGeo Ottawa
> meetings, an afficianado of SAR imagery, and a software developer at PCI.
> I am confident he will be a valuable contributor.
> 
> Phil has reviewed RFC 3 on commiter responsibilities, and has agreed to 
> them.
> 
> Starting with a +1 from me.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Mon Nov 12 13:54:26 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <4738A162.40608@mapgears.com>

Frank Warmerdam wrote:
> Motion: To adopt RFC 14 on Image Structure Metadata
> 
>   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure
> 

+0

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From mgfernandes at ualg.pt  Mon Nov 12 13:51:39 2007
From: mgfernandes at ualg.pt (Miguel Fernandes)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] NaN values transformation in funtion Transform from
 OGRCoordinateTransformation class
Message-ID: <4738A0BB.30307@ualg.pt>

Hello all,

I'm using version GDAL_svn_trunk_2007_11_04 and the behaviour I'm 
describing also happens in version 1.4.3. Using library OGR, class 
OGRCoordinateTransformation functions Transform and TransformEx in order 
to make coordinate transformations from latlon to utm29 for coastline 
coordinates that include NaN values in order to detach features like 
islands, the function is transforming the NaN values into Inf values.
The following output from a code before and after using the Transform 
function:

Coordinates before transformation in latlon and verification if the 
coordinate is a nan value.
x: -8.95006     y: 37             0 0
x: -8.95009     y: 37             0 0
x: -1.#IND     y: -1.#IND     1 1
x: -8.94716     y: 37             0 0
x: -8.94716     y: 37             0 0

Coordinates after transformation to UTM29 and verification if its a nan 
values:
x: 504444     y: 4.09488e+006         0 0
x: 504441     y: 4.09487e+006         0 0
x: 1.#INF     y: 1.#INF                     0 0
x: 504702     y: 4.09487e+006         0 0
x: 504702     y: 4.09488e+006         0 0

Is this behaviour correct or is this a bug?

Best Regards,
-- 
/Miguel Fernandes
/*
**Projecto ERSTA*
CIMA - Centro de Investiga??o Marinha Ambiental
Campus de Gambelas
8005-139 Faro
Portugal

+351 289800995 ext.7574
mgfernandes@ualg.pt

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071112/0f6a9d25/attachment.html
From even.rouault at mines-paris.org  Mon Nov 12 14:27:27 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] New OGR driver for GPX format
Message-ID: <200711122027.28289.even.rouault@mines-paris.org>

Hi All,

I've just commited in GDAL trunk (in r12731) a new OGR driver that adds 
support for reading and writing GPX (GPS exchange file format) files.

A ticket was filed for that functionnality : 
http://trac.osgeo.org/gdal/attachment/ticket/1515

See documentation provided with the driver for more informations : 
http://gdal.org/ogr/drv_gpx.html

Documentation for GPX format is available at 
http://www.topografix.com/gpx.asp.

Best regards.

From warmerdam at pobox.com  Mon Nov 12 15:36:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <20071112135043.GA15473@ak4719.spb.edu>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
Message-ID: <4738B963.9050301@pobox.com>

Andrey Kiselev wrote:
> 2. Introduce new mandatory method for format drivers to determine the
> file format. Now GUI scenario will look like that:
> 
>  - select the file name;
>  - determine a format of that file;
>  - let the user choose open options, specific for that format;
>  - now proceed to GDALOpen(), capable to get options as per RFC 10.

Andrey,

Note that RFC 11: Fast Format Identify, already provides a mechanism
to identify the format of a GDAL dataset.  Presumably you are suggesting
something similar for OGR?

> Frank also suggested to pass encoded open options along with file name
> instead of having the separate parameter in Open() method. With this
> approach we will have different names to pass for format identification
> function and for GDALOpen(): pure file name for the former one and
> name+options for the last one. This will only work when we know the file
> format before opening the file, otherwise we just don't know what
> options are needed.

Note that the approach of encoding driver specific options into the
name is already widely used for OGR - mainly for the various RDBMS
drivers.

I'm not clear on why RFC 10 couldn't be altered to provide a standard
mechanism to encode parameters into the datasource name and go from there.
The issue of applications which don't know the format apriori is not new.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Nov 12 15:38:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Problem With black Collar with gdal warp
In-Reply-To: <001201c82535$ab40e370$e206280a@Mss23>
References: <001201c82535$ab40e370$e206280a@Mss23>
Message-ID: <4738B9D7.6080207@pobox.com>

Pietro Buratti wrote:
> Hi,
> I have a "big" problem with Reprojected GeoTIFF Images because They have 
> a black collar after the reprojection and It's impossible to collect 
> them in a singular GeoTIFF.
>  
> Could you help me?
> I must use only gdal utilities ...

Pietro,

One option is to reproject them directly into an existing mosaic file.
Another is to mosaic them after reprojection with knowledge of the black
nodata value (though this runs the risk of black pixels in the image being
treated as nodata).  You could also add an alpha band when reprojecting
to keep track of valid and invalid pixels (gdalwarp's -dstalpha switch).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From schut at sarvision.nl  Tue Nov 13 03:28:28 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion: Commiter Status for Phil Vachon
In-Reply-To: <4735EDD2.606@pobox.com>
References: <4735EDD2.606@pobox.com>
Message-ID: <4739602C.9070102@sarvision.nl>

Frank Warmerdam wrote:
> Motion: Commiter Status for Phil Vachon
> 
> Phil has contributed a JAXA PALSAR driver to GDAL, and has a COASP
> driver "in the pipe".  He is also a frequent attender of OSGeo Ottawa
> meetings, an afficianado of SAR imagery, and a software developer at PCI.
> I am confident he will be a valuable contributor.
> 
> Phil has reviewed RFC 3 on commiter responsibilities, and has agreed to
> them.
> 
> Starting with a +1 from me.
> 
> Best regards,

Though not allowed to vote, I would like to express my joy about at
least one SAR afficianado in the GDAL team :-)
Though you might remember me because of lots of spot vegetation and
modis related questions, we do work a lot with SAR here at SarVision.
Seeing through the clouds is a great advantage when looing at tropical
(rain)forests...
Radar rulez!

VS.


From sandricionut at yahoo.com  Tue Nov 13 09:10:17 2007
From: sandricionut at yahoo.com (sandric ionut)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] coordinates with gdal_array
Message-ID: <934305.28470.qm@web51311.mail.re2.yahoo.com>

Hello:
 
I am using gdal_array to read data as array, process the data, and write it back as raster data. When I save the array to raster, using any format supported by gdal, I loose the coordinates. How can I keep the coordinates after I process the array?
 
Thank you,
 
Ionut


      ____________________________________________________________________________________
Be a better sports nut!  Let your teams follow you 
with Yahoo Mobile. Try it now.  http://mobile.yahoo.com/sports;_ylt=At9_qDKvtAbMuh1G1SQtBI7ntAcJ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071113/32a16ac3/attachment.html
From enrico at enricozini.org  Tue Nov 13 09:30:56 2007
From: enrico at enricozini.org (Enrico Zini)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Spaceview projection
Message-ID: <20071113143056.GA8242@enricozini.org>

Hello,

As part of the effort of geting meteosatlib[1] nearer to gdal, I have to
handle images using the spaceview projection in GDAL.  Problem is, I
didn't quote understand how.

It does not seem to be a simple affine transform.  The formula to go
from latitude,longitude to projected space that meteosatlib uses is:

Input: m.lat, m.lon.  Output: p.x, p.y:

    // sublon is the longitude of the point directly below the satellite
    // orbitRadius is the radius of the satellite orbit in units of
    //   earth radius.
    // EARTH_RPOL is the polar radius of the Earth.
    // EARTH_1E2 and EARTH_E2 are constants for which I didn't find any
    //   documentation

    // Convert to radians
    double lat = m.lat * M_PI / 180;
    double lon = (m.lon - sublon) * M_PI / 180;
    
    double c_lat;
    double r1,r2,r3,rn,rl;
    
    c_lat = atan( EARTH_1E2 * tan(lat) );
    rl    = EARTH_RPOL / ( sqrt(1.0 - EARTH_E2 * pow(cos(c_lat), 2.0)) );
    
    r1 = orbitRadius - \
          rl * cos(c_lat) * cos(lon);
    r2 = -rl * cos(c_lat) * sin(lon);
    r3 = rl * sin(c_lat);
    rn = sqrt( r1*r1 + r2*r2 + r3*r3 );
    
    p.x = atan(-r2 / r1) * 180 / M_PI;
    p.y = asin(-r3 / rn) * 180 / M_PI;

To get to the pixel coordinates in the image, a simple extra scaling
step is required, taking as input the pixel resolution and the offset of
the top left pixel:

    x = (int)rint((double)p.x * column_resolution) + image_xstart;
    y = (int)rint((double)p.y * line_resolution) + image_ystart;


Is there anything like this in GDAL?  If not, how can it be added?


Ciao,

Enrico

[1] http://meteosatlib.sourceforge.net/
-- 
GPG key: 1024D/797EBFAB 2000-12-05 Enrico Zini <enrico@debian.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071113/4e07a1c3/attachment.bin
From warmerdam at pobox.com  Tue Nov 13 10:59:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] coordinates with gdal_array
In-Reply-To: <934305.28470.qm@web51311.mail.re2.yahoo.com>
References: <934305.28470.qm@web51311.mail.re2.yahoo.com>
Message-ID: <4739C9F6.8010303@pobox.com>

sandric ionut wrote:
> Hello:
>  
> I am using gdal_array to read data as array, process the data, and write 
> it back as raster data. When I save the array to raster, using any 
> format supported by gdal, I loose the coordinates. How can I keep the 
> coordinates after I process the array?

Ionut,

The plain arrays unfortunately can't carry around coordinate and other
types of metadata.  So the workaround is that the gdal_array.SaveArray()
method has a 4th argument which is a prototype dataset.  This prototype
dataset will be used as a source of coordinate system and georeferencing
information for the created file.

So you could do something like:

data = gdal_array.LoadFile('src.tif')

data = (data - 15) * 1.33

gdal_array.SaveArray( data, 'dst.tif', prototype = 'src.tif' )

The prototype argument can be either the name of a datasource (which
will be opened internally) or an existing open GDAL dataset handle.
This approach doesn't help much if you are resizing, or subsetting
the data as part of your processing (unfortunately).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Tue Nov 13 12:05:55 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <4738B963.9050301@pobox.com>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com>
Message-ID: <20071113170555.GA22940@ak4719.spb.edu>

On Mon, Nov 12, 2007 at 03:36:51PM -0500, Frank Warmerdam wrote:
> >2. Introduce new mandatory method for format drivers to determine the
> >file format. Now GUI scenario will look like that:
> >
> > - select the file name;
> > - determine a format of that file;
> > - let the user choose open options, specific for that format;
> > - now proceed to GDALOpen(), capable to get options as per RFC 10.
> 
> Note that RFC 11: Fast Format Identify, already provides a mechanism
> to identify the format of a GDAL dataset.  Presumably you are
> suggesting something similar for OGR?

Sorry for messing things up, yes, OGR is my primary concern in this
regard.

> >Frank also suggested to pass encoded open options along with file
> >name instead of having the separate parameter in Open() method. With
> >this approach we will have different names to pass for format
> >identification function and for GDALOpen(): pure file name for the
> >former one and name+options for the last one. This will only work
> >when we know the file format before opening the file, otherwise we
> >just don't know what options are needed.
> 
> Note that the approach of encoding driver specific options into the
> name is already widely used for OGR - mainly for the various RDBMS
> drivers.

Yes, but it is not standartized and weak in many ways. Also it is clear
that we need open options, for example, PG driver uses PGSQL_OGR_FID
variable for some purpose, that is certainly a thing that should be
configured as an per-datasource parameter.

> I'm not clear on why RFC 10 couldn't be altered to provide a standard
> mechanism to encode parameters into the datasource name and go from
> there.  The issue of applications which don't know the format apriori
> is not new.

If the identification function will be added to OGR we will have two
forms of datasource naming. Identification function will accept a pure
dataset name, because we don't know what options are acceptable at this
stage, and we don't need them here anyway. Open function should get
datasource name AND open options: here we know what parameters we need
and already asked our user to set them. Note, that username/password
thing of mentioned PG driver is a part of datasource name and not an
option: we need these things to check database existence and establish
connection.  Though PGSQL_OGR_FID is an optional parameter and it is
only required when the actual data reading starts.

So the programmer will need to use the following code to open datasource
with open options:

 ds_name = "datasource_name";
 format = Identify(ds_name);
 if (format == "OUR_FORMAT") {
  options = AskUserForOptions();
  some_kind_of_new_name = CombineAndQuoteStrings(ds_name, options);
  ds = OGROpen(some_kind_of_new_name);
 }

instead of

 ds_name = "datasource_name";
 format = Identify(ds_name);
 if (format == "OUR_FORMAT") {
  options = AskUserForOptions();
  ds = OGROpen(ds_name, options);
 }

I think it is just clearer and simpler for developer.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Tue Nov 13 13:02:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Motion: Commiter Status for Phil Vachon
In-Reply-To: <4735EDD2.606@pobox.com>
References: <4735EDD2.606@pobox.com>
Message-ID: <4739E6C7.30301@pobox.com>

Frank Warmerdam wrote:
> Motion: Commiter Status for Phil Vachon

Motion passed with support from Tamas, Andrey, Daniel and myself.

Welcome aboard Phil!  Account 'pvachon' should now have commit access.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Nov 13 13:04:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <4739E719.50009@pobox.com>

Frank Warmerdam wrote:
> Motion: To adopt RFC 14 on Image Structure Metadata
> 
>   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

Folks,

This RFC passes with support from Tamas, Andrey, and Frank, and +0's from
Daniel and Howard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Tue Nov 13 14:35:22 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Error appears in 1.4.3 which wasn't in 1.4.2
In-Reply-To: <472A39CB.3090007@pobox.com>
References: <4F58828A-6384-43FF-A086-9450E810ACFD@pricepages.org>
	<472A39CB.3090007@pobox.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23301855418@COMAIL01.digitalglobe.com>

It looks like this has been fixed in the trunk. Is there a back port
pending?

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Thursday, November 01, 2007 2:41 PM
To: Seth Price
Cc: gdal
Subject: Re: [Gdal-dev] Error appears in 1.4.3 which wasn't in 1.4.2

Seth Price wrote:
> I have another bug for you guys. This seems to have appeared in 1.4.3.

> It seems to be having a problem with my '-dstnodata "0 0 20"' option. 
> With the current version, GDAL errors out and produces a 4KB GeoTIFF. 
> With v1.4.2, no error is produced and the GeoTIFF is as expected.
> 
> Am I doing everything right here?
> 
> v1.4.2:
> $ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs 
> '+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te 
> -8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029 
> N010W074_x1.merc.tif 1_03868.srs.tif
> Creating output file that is 256P x 256L.
> Processing input file N010W074_x1.merc.tif.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> v1.4.3:
> $ ./gdalwarp -dstnodata "0 0 20" -of GTiff -ts 256 256 -t_srs 
> '+proj=merc +a=6378137.0 +b=6378137.0 +wktext +units=m' -te 
> -8233185.1903991 1110477.1468928 -8228293.220589 1115369.1167029 
> N010W074_x1.merc.tif 1_03868.srs.tif
> Creating output file that is 256P x 256L.
> Processing input file N010W074_x1.merc.tif.
> ERROR 1: Invalid nBandCount or bMaskIsFloat argument in
SourceNoDataMask

Seth,

There were some changes with regard to -dstnodata handling which
have apparently had unexpected side effects.  Could you file a
bug report including an input data file (or at least a gdalinfo
report of one) so we can reproduce this?

Thanks,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Nov 13 15:14:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Error appears in 1.4.3 which wasn't in 1.4.2
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301855418@COMAIL01.digitalglobe.com>
References: <4F58828A-6384-43FF-A086-9450E810ACFD@pricepages.org>
	<472A39CB.3090007@pobox.com>
	<8B319E5A30FF4A48BE7EEAAF609DB23301855418@COMAIL01.digitalglobe.com>
Message-ID: <473A059F.5070505@pobox.com>

Ethan Alpert wrote:
> It looks like this has been fixed in the trunk. Is there a back port
> pending?

Ethan,

The fix is in 1.4 branch now, so you should be able to grab a nightly
"svn-stable" snapshot and go.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Nov 13 22:54:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Spaceview projection
In-Reply-To: <20071113143056.GA8242@enricozini.org>
References: <20071113143056.GA8242@enricozini.org>
Message-ID: <473A716B.1090809@pobox.com>

Enrico Zini wrote:
> Hello,
> 
> As part of the effort of geting meteosatlib[1] nearer to gdal, I have to
> handle images using the spaceview projection in GDAL.  Problem is, I
> didn't quote understand how.
> 
> It does not seem to be a simple affine transform.  The formula to go
> from latitude,longitude to projected space that meteosatlib uses is:
> 
> Input: m.lat, m.lon.  Output: p.x, p.y:
> 
>     // sublon is the longitude of the point directly below the satellite
>     // orbitRadius is the radius of the satellite orbit in units of
>     //   earth radius.
>     // EARTH_RPOL is the polar radius of the Earth.
>     // EARTH_1E2 and EARTH_E2 are constants for which I didn't find any
>     //   documentation
> 
>     // Convert to radians
>     double lat = m.lat * M_PI / 180;
>     double lon = (m.lon - sublon) * M_PI / 180;
>     
>     double c_lat;
>     double r1,r2,r3,rn,rl;
>     
>     c_lat = atan( EARTH_1E2 * tan(lat) );
>     rl    = EARTH_RPOL / ( sqrt(1.0 - EARTH_E2 * pow(cos(c_lat), 2.0)) );
>     
>     r1 = orbitRadius - \
>           rl * cos(c_lat) * cos(lon);
>     r2 = -rl * cos(c_lat) * sin(lon);
>     r3 = rl * sin(c_lat);
>     rn = sqrt( r1*r1 + r2*r2 + r3*r3 );
>     
>     p.x = atan(-r2 / r1) * 180 / M_PI;
>     p.y = asin(-r3 / rn) * 180 / M_PI;


Enrico,

I'd guess the above should be a projection method in proj.4.  And the
part below is just the normal application of a geotransform in GDAL.

I vaguely recall someone offering a meteosat projection for PROJ.4 in
the past, and I think I sent him on to Gerald.  I don't know what came
of that.

Best regards,

> To get to the pixel coordinates in the image, a simple extra scaling
> step is required, taking as input the pixel resolution and the offset of
> the top left pixel:
> 
>     x = (int)rint((double)p.x * column_resolution) + image_xstart;
>     y = (int)rint((double)p.y * line_resolution) + image_ystart;
> 
> 
> Is there anything like this in GDAL?  If not, how can it be added?


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Tue Nov 13 23:21:01 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] RE: Changes to
	Geo::OSR::SpatialReference->ImportFromXXX() methods?
In-Reply-To: <47361E62.3080103@tkk.fi>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301855116@COMAIL01.digitalglobe.com>
	<4735CF49.50108@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB2330185511B@COMAIL01.digitalglobe.com>
	<47361E62.3080103@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233018554E0@COMAIL01.digitalglobe.com>

I built the svn-trunk and tried your suggestion:

$from_sr->ImportFromESRI([$prj]);

Now I get:

at ./new_main.pl line 60.
Command exited with non-zero status 2

When I replace the wrapper with the 1.4.2 code it works.

-e

-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Saturday, November 10, 2007 2:11 PM
To: Ethan Alpert
Cc: gdal-dev
Subject: Re: Changes to Geo::OSR::SpatialReference->ImportFromXXX()
methods?

Ethan Alpert kirjoitti:
> Ari,
>
> Take a look at the diff of _wrap_SpatialReference_ImportFromESRI in
> osr_wrap.cpp between the trunk and 1.4.3. The code has changed. All
I'm
> sure of is that code that ran in 1.4.3 gives me an exit. As far as I
can
> tell the 1.4.x releases took a single string. I will try the list of
> strings approach you suggest.
>
> -e
>
> The code is:
>
>
> my $from_sr = new Geo::OSR::SpatialReference;
>
> my $prj = read_file("$dir/$base\.prj",bindmode=>':raw');
>
> $from_sr->ImportFromESRI($prj);
>
>
> The above code worked fine for all 1.4.x releases
>   

Does the read_file just return the contents of the file as one string? 
It seems that hobu made the change March 7 2007: "ImportFromESRI takes a

list, unlike all of the other ImportFrom* methods.  Apply the 
appropriate typemap...". I just wonder how it could have worked earlier?

The method in C++ expects a pointer to an array of char pointers 
(strings) and earlier the bindings would have given a pointer to one 
char pointer. Hm, if it earlier was

$from_sr->ImportFromESRI($prj);


then currently

$from_sr->ImportFromESRI([$prj]);

should give the same result. Could you post an example .prj file?


Ari



-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma




From hobu.inc at gmail.com  Wed Nov 14 00:58:43 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] IRC meeting to discuss 1.5 release Tues Nov 20th at
	19:00 GMT
Message-ID: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>

All,

I would like to propose that we (all PSC members and any committers  
and users who can attend) have an IRC meeting next Tuesday to discuss  
what work we hope to have done in time to make the 1.5 beta release.

1900 GMT is 1PM Central or 2PM Eastern for North American types and 7,  
8, or 9PM for European folks.
http://www.timeanddate.com/worldclock/meetingtime.html?month=11&day=20&year=2007&p1=0&p2=64&p3=50&p4=262

I propose the following agenda:

* Release scheduling and process
   - Do we want a more formalized process, ala MapServer, with freezes  
and sequential betas, etc?  RFC Freeze?
   - Feature Freeze?
   - Release Manager?
   - Ticket referencing restriction for commits (ie post-commit hook  
that requires a ticket number in the commit comment) during beta period?
   - Optimistic beta date

* Outstanding development
   - Work that *must* make it into 1.5
   - Work that it would be nice to have done in time for 1.5
   - Bugs/features marked for 1.5 in Trac that can be deferred

* Documentation
   - For 1.5, should we consider a documentation snapshot that can  
stay sync'd with the stable 1.5 branch once it is out?
   - Do we need a doc similar to MapServer's migration doc to  
highlight significant and backward incompatible changes that 1.5  
introduces?
   - What have you committed for 1.5?  Frank's a great human ChangeLog  
generator, but it's a big task.  Let's try and lessen its size.

Howard

From ari.jolma at tkk.fi  Wed Nov 14 02:28:55 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Old style ESRI prj files
Message-ID: <473AA3B7.3080509@tkk.fi>

The ImportFromESRI method of OSR SpatialReference takes a list of 
strings as a parameter. Could somebody give me or point me to an example 
of such a list?

Hobu, you changed the API of that method to use a correct typemap but it 
seems that it miraculously worked earlier in the Perl bindings when it 
was given the contents of a PRJ file in one string.

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ari.jolma at tkk.fi  Wed Nov 14 05:37:06 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] The GPX driver in trunk hangs
Message-ID: <473ACFD2.7080203@tkk.fi>

The GPX driver now in trunk hangs. And since it is a chain, the whole 
OGR open method hangs.

Maybe it's not a very good idea to have a toolset built from trunk. :)

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ealpert at digitalglobe.com  Wed Nov 14 08:28:48 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Old style ESRI prj files
In-Reply-To: <473AA3B7.3080509@tkk.fi>
References: <473AA3B7.3080509@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233018554E3@COMAIL01.digitalglobe.com>

I'm still in the debugger looking at what is going on hopefully I'll
come up with something. For now, it seems [$prj] although it is the type
expected by the wrapper, causes pszItem to always be NULL when it
fetches the list of strings. So arg2 contains no data when calling
OSRSpatialReferenceShadow_ImportFromESRI
I'm going to have to read the perl guts docs to get a better idea of why
this is.

Here's an ESRI prj file:

PROJCS["WGS_1984_UTM_Zone_10N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",
SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Gr
eenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_
Mercator"],PARAMETER["False_Easting",500000],PARAMETER
["False_Northing",0],PARAMETER["Central_Meridian",-123],PARAMETER["Scale
_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0],UNI
T["Meter",1]]


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ari Jolma
Sent: Wednesday, November 14, 2007 12:29 AM
To: gdal-dev
Subject: [Gdal-dev] Old style ESRI prj files

The ImportFromESRI method of OSR SpatialReference takes a list of 
strings as a parameter. Could somebody give me or point me to an example

of such a list?

Hobu, you changed the API of that method to use a correct typemap but it

seems that it miraculously worked earlier in the Perl bindings when it 
was given the contents of a PRJ file in one string.

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From dron at ak4719.spb.edu  Wed Nov 14 08:26:21 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] IRC meeting to discuss 1.5 release Tues Nov 20th at
	19:00 GMT
In-Reply-To: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
References: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
Message-ID: <20071114132621.GA28795@ak4719.spb.edu>

On Tue, Nov 13, 2007 at 11:58:43PM -0600, Howard Butler wrote:
> I would like to propose that we (all PSC members and any committers
> and users who can attend) have an IRC meeting next Tuesday to discuss
> what work we hope to have done in time to make the 1.5 beta release.
> 
> 1900 GMT is 1PM Central or 2PM Eastern for North American types and 7,
> 8, or 9PM for European folks.

Well, for some European folks it will be 10PM ;-) But I am OK with that.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Wed Nov 14 11:53:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] The GPX driver in trunk hangs
In-Reply-To: <473ACFD2.7080203@tkk.fi>
References: <473ACFD2.7080203@tkk.fi>
Message-ID: <473B2824.4090405@pobox.com>

Ari Jolma wrote:
> The GPX driver now in trunk hangs. And since it is a chain, the whole 
> OGR open method hangs.
> 
> Maybe it's not a very good idea to have a toolset built from trunk. :)

Ari,

Well, it helps identify problems more quickly!

However, I don't see this problem. Perhaps it relates to the file passed
to OGROpen()?  Can you provide specifics?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maplabs at light42.com  Wed Nov 14 11:22:05 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] FWTools2 for Linux vs a Debug Environment
Message-ID: <BD3B3D62-92CD-11DC-954B-000A277A733C@light42.com>

two weeks ago I asked the list about their opinions on an OS choice..
Without going into a lot of detail, I chose Ubuntu Gutsy 64bit

That machine is up now, with some minimal software installed
I built GDAL 1.4.3 right away, and can use it to write to Postgres

However, I now have a new question
Either I add the new FWTools2 for Linux
   OR have a debug and build environment with source

In a previous life I built large C/C++ applications for a living
My editor and debugger were daily tools

So far, I have not heard a firm commitment to a Source Level Debugger 
on Linux
I understand that some use GDB effectively, but to me, thats not an 
option

Do I find an editor/debugger for Linux, and use this box to perhaps 
build patches for GDAL?
OR simply use it as a production machine, and enjoy whatever FWTools2 
provides?

Opinions, Pointers, Package Recommendations Welcome
best regards
    -Brian


From Allan.Meek at drdc-rddc.gc.ca  Wed Nov 14 11:40:40 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] gdalwarp
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E0B19BD@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Would it be possible to do step the following with the gdalwarp API?

1. Open an image.
2. Check if the image meets certain criteria.
3. Reproject the image using gdalwarp without creating a new file or
modifying the original file.

1 and 2 are simple enough, but it's 3 that's got me stumped. The
examples of gdalwarp that I've been able to find create a new file with
the reprojected image.

Thanks,
Allan


From ari.jolma at tkk.fi  Wed Nov 14 12:19:48 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] The GPX driver in trunk hangs
In-Reply-To: <473B2824.4090405@pobox.com>
References: <473ACFD2.7080203@tkk.fi> <473B2824.4090405@pobox.com>
Message-ID: <473B2E34.3040502@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> The GPX driver now in trunk hangs. And since it is a chain, the whole 
>> OGR open method hangs.
>>
>> Maybe it's not a very good idea to have a toolset built from trunk. :)
>
> Ari,
>
> Well, it helps identify problems more quickly!
>
> However, I don't see this problem. Perhaps it relates to the file passed
> to OGROpen()?  Can you provide specifics?

In my cases it generally seems to hang, if given datasources (paths), 
which contain subdirectories. On directories which do not contain 
subdirectories it works ok.

Oh, this is related to my habit (the Open Vector Data dialog in 
Geoinformatica) to pass directories to OGROpen, which is not very common 
I believe.

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From maplabs at light42.com  Wed Nov 14 12:25:56 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: FWTools2 for Linux vs a Debug Environment
Message-ID: <A8A18480-92D6-11DC-954B-000A277A733C@light42.com>

mailto:maplabs@light42.com

I will summarize to the list
thanks
   -Brian


From ari.jolma at tkk.fi  Wed Nov 14 12:28:10 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Old style ESRI prj files
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233018554E3@COMAIL01.digitalglobe.com>
References: <473AA3B7.3080509@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB233018554E3@COMAIL01.digitalglobe.com>
Message-ID: <473B302A.1040206@tkk.fi>

Ethan Alpert kirjoitti:
> I'm still in the debugger looking at what is going on hopefully I'll
> come up with something. For now, it seems [$prj] although it is the type
> expected by the wrapper, causes pszItem to always be NULL when it
> fetches the list of strings. So arg2 contains no data when calling
> OSRSpatialReferenceShadow_ImportFromESRI
> I'm going to have to read the perl guts docs to get a better idea of why
> this is.
>
> Here's an ESRI prj file:
>
> PROJCS["WGS_1984_UTM_Zone_10N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",
> SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Gr
> eenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_
> Mercator"],PARAMETER["False_Easting",500000],PARAMETER
> ["False_Northing",0],PARAMETER["Central_Meridian",-123],PARAMETER["Scale
> _Factor",0.9996],PARAMETER["Latitude_Of_Origin",0],UNI
> T["Meter",1]]
>   

Isn't this more or less WKT? At least ImportFromWkt() method eats it 
without complaints and the result seems ok. I saw somewhere an old prj 
file which had what looked like key, value -pairs.

Ari

>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ari Jolma
> Sent: Wednesday, November 14, 2007 12:29 AM
> To: gdal-dev
> Subject: [Gdal-dev] Old style ESRI prj files
>
> The ImportFromESRI method of OSR SpatialReference takes a list of 
> strings as a parameter. Could somebody give me or point me to an example
>
> of such a list?
>
> Hobu, you changed the API of that method to use a correct typemap but it
>
> seems that it miraculously worked earlier in the Perl bindings when it 
> was given the contents of a PRJ file in one string.
>
> Cheers,
>
> Ari
>
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Wed Nov 14 13:21:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] The GPX driver in trunk hangs
In-Reply-To: <473B2E34.3040502@tkk.fi>
References: <473ACFD2.7080203@tkk.fi> <473B2824.4090405@pobox.com>
	<473B2E34.3040502@tkk.fi>
Message-ID: <473B3C8E.5000704@pobox.com>

Ari Jolma wrote:
> In my cases it generally seems to hang, if given datasources (paths), 
> which contain subdirectories. On directories which do not contain 
> subdirectories it works ok.
> 
> Oh, this is related to my habit (the Open Vector Data dialog in 
> Geoinformatica) to pass directories to OGROpen, which is not very common 
> I believe.

Ari,

I have committed a change to ogrgpxdatasource.cpp so that if VSIFReadL()
returns zero it will exit the reading loop instead of hanging.  I think
this would also have been a problem with zero length files.

Even,

Could you review OGRGPXDataSource::Open() and see if it can be made safer?
In particular, it looks to me like it will slurp up any XML file and parse
it without verifying the format till it is done which could be very expensive.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 14 13:25:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] IRC meeting to discuss 1.5 release Tues Nov 20th at
	19:00 GMT
In-Reply-To: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
References: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
Message-ID: <473B3DAB.7020207@pobox.com>

Howard Butler wrote:
> All,
> 
> I would like to propose that we (all PSC members and any committers and 
> users who can attend) have an IRC meeting next Tuesday to discuss what 
> work we hope to have done in time to make the 1.5 beta release.
> 
> 1900 GMT is 1PM Central or 2PM Eastern for North American types and 7, 
> 8, or 9PM for European folks.
> http://www.timeanddate.com/worldclock/meetingtime.html?month=11&day=20&year=2007&p1=0&p2=64&p3=50&p4=262 

Howard,

Sounds good to me.  I have put this in Trac:

   http://trac.osgeo.org/gdal/wiki/FirstMeeting

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 14 13:37:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Old style ESRI prj files
In-Reply-To: <473B302A.1040206@tkk.fi>
References: <473AA3B7.3080509@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB233018554E3@COMAIL01.digitalglobe.com>
	<473B302A.1040206@tkk.fi>
Message-ID: <473B4051.7040400@pobox.com>

Ari Jolma wrote:
> Ethan Alpert kirjoitti:
>> I'm still in the debugger looking at what is going on hopefully I'll
>> come up with something. For now, it seems [$prj] although it is the type
>> expected by the wrapper, causes pszItem to always be NULL when it
>> fetches the list of strings. So arg2 contains no data when calling
>> OSRSpatialReferenceShadow_ImportFromESRI
>> I'm going to have to read the perl guts docs to get a better idea of why
>> this is.
>>
>> Here's an ESRI prj file:
>>
>> PROJCS["WGS_1984_UTM_Zone_10N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",
>> SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Gr
>> eenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_
>> Mercator"],PARAMETER["False_Easting",500000],PARAMETER
>> ["False_Northing",0],PARAMETER["Central_Meridian",-123],PARAMETER["Scale
>> _Factor",0.9996],PARAMETER["Latitude_Of_Origin",0],UNI
>> T["Meter",1]]
>>   
> 
> Isn't this more or less WKT? At least ImportFromWkt() method eats it 
> without complaints and the result seems ok. I saw somewhere an old prj 
> file which had what looked like key, value -pairs.

Ari,

This is an example of old style .prj:
Projection    TRANSVERSE
Datum         GDA94
Spheroid      GRS80
Units         METERS
Zunits        NO
Xshift        0.0
Yshift        0.0
Parameters
0.9996 /* scale factor at central meridian
  147  0  0.0 /* longitude of central meridian
    0  0  0.0 /* latitude of origin
500000.0 /* false easting (meters)
10000000.0 /* false northing (meters)

This has to be passed into the ImportFromESRI() as a list of strings,
one string per line.  I appologise for all this hassle.  The ImportFromESRI()
interface was poorly designed.

For most purposes (new style ESRI WKT files) it is sufficient to prefix the
string with "ESRI::" and pass to SetFromUserInput().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Wed Nov 14 12:59:37 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] The GPX driver in trunk hangs
In-Reply-To: <473B3C8E.5000704@pobox.com>
References: <473ACFD2.7080203@tkk.fi> <473B2824.4090405@pobox.com>
	<473B2E34.3040502@tkk.fi> <473B3C8E.5000704@pobox.com>
Message-ID: <473B3789.8080607@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari,
>
> I have committed a change to ogrgpxdatasource.cpp so that if VSIFReadL()
> returns zero it will exit the reading loop instead of hanging.  I think
> this would also have been a problem with zero length files.

Yep, works now (at least exists the loop).

Ari

>
> Even,
>
> Could you review OGRGPXDataSource::Open() and see if it can be made 
> safer?
> In particular, it looks to me like it will slurp up any XML file and 
> parse
> it without verifying the format till it is done which could be very 
> expensive.
>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ivan.lucena at pmldnet.com  Wed Nov 14 13:24:15 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Python video
Message-ID: <473B3D4F.3040809@pmldnet.com>

Wouldn't be nice to have a Python+GDAL video just like that: 
http://www.carabos.com/videos/pytables-1-intro



From ari.jolma at tkk.fi  Wed Nov 14 15:59:54 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Old style ESRI prj files
In-Reply-To: <473B4051.7040400@pobox.com>
References: <473AA3B7.3080509@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB233018554E3@COMAIL01.digitalglobe.com>
	<473B302A.1040206@tkk.fi> <473B4051.7040400@pobox.com>
Message-ID: <473B61CA.30203@tkk.fi>

Frank Warmerdam kirjoitti:
> This is an example of old style .prj:
> Projection    TRANSVERSE
> Datum         GDA94
> Spheroid      GRS80
> Units         METERS
> Zunits        NO
> Xshift        0.0
> Yshift        0.0
> Parameters
> 0.9996 /* scale factor at central meridian
>  147  0  0.0 /* longitude of central meridian
>    0  0  0.0 /* latitude of origin
> 500000.0 /* false easting (meters)
> 10000000.0 /* false northing (meters)

ok, this works:

use Geo::GDAL;

@proj = (
     'Projection    TRANSVERSE',
     'Datum         GDA94',
     'Spheroid      GRS80',
     'Units         METERS',
     'Zunits        NO',
     'Xshift        0.0',
     'Yshift        0.0',
     'Parameters',
     '0.9996 /* scale factor at central meridian',
     ' 147  0  0.0 /* longitude of central meridian',
     '   0  0  0.0 /* latitude of origin',
     '500000.0 /* false easting (meters)',
     '10000000.0 /* false northing (meters)');

$a = Geo::OSR::SpatialReference->new();
$a->ImportFromESRI(\@proj);

Ari



From jluis at ualg.pt  Wed Nov 14 17:57:02 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
Message-ID: <473B7D3E.20905@ualg.pt>

Hi,

Suppose I want to get this (or any other) google image tile programatically

http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt

is there any way to do it with gdal/ogr?

Thanks

Joaquim Luis

From alison_luo2001 at yahoo.com  Wed Nov 14 18:24:43 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] libtiff for Mac?
Message-ID: <597584.40747.qm@web50507.mail.re2.yahoo.com>

Is there a libtiff for Mac platform?

 I need to call XTIFFOpenW equivalent on Mac, but this function is WIN32 specific. 

Thanks,
Alison




      ____________________________________________________________________________________
Be a better sports nut!  Let your teams follow you 
with Yahoo Mobile. Try it now.  http://mobile.yahoo.com/sports;_ylt=At9_qDKvtAbMuh1G1SQtBI7ntAcJ

From woklist at kyngchaos.com  Wed Nov 14 19:10:28 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] libtiff for Mac?
In-Reply-To: <597584.40747.qm@web50507.mail.re2.yahoo.com>
References: <597584.40747.qm@web50507.mail.re2.yahoo.com>
Message-ID: <880C2D60-835E-41F3-838D-9D881E1498AC@kyngchaos.com>

I have libtiff in my UnixImageIO framework, which is used in my GDAL  
framework build.

If you need a traditional library, you can always compile it from  
source.


On Nov 14, 2007, at 5:24 PM, Alison Luo wrote:

> Is there a libtiff for Mac platform?
>
> I need to call XTIFFOpenW equivalent on Mac, but this function is  
> WIN32 specific.
>
> Thanks,
> Alison
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the  
past isn't a fiction designed to account for the discrepancy between  
my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From warmerdam at pobox.com  Wed Nov 14 20:23:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] libtiff for Mac?
In-Reply-To: <597584.40747.qm@web50507.mail.re2.yahoo.com>
References: <597584.40747.qm@web50507.mail.re2.yahoo.com>
Message-ID: <473B9F9E.4010001@pobox.com>

Alison Luo wrote:
> Is there a libtiff for Mac platform?
> 
>  I need to call XTIFFOpenW equivalent on Mac, but this function is WIN32 specific. 

Alison,

This is not the libtiff support list.  I'd encourage you to join and
ask there.

Libtiff is widely used on the Mac, but there is no "wide string" version of
the open available for the Mac.  With a bit of savvy i'd imagine you could
adapt the win32 version to macos and submit an appropriate patch to the
libtiff bugzilla.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 14 20:27:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473B7D3E.20905@ualg.pt>
References: <473B7D3E.20905@ualg.pt>
Message-ID: <473BA08C.1060103@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> Suppose I want to get this (or any other) google image tile programatically
> 
> http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt
> 
> is there any way to do it with gdal/ogr?

Joaquim,

If you have libcurl support included in your GDAL build you can just do:

   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'

That is, GDAL has a special "HTTP" driver that will fetch from an url
and access the data from a memory buffer.

If you have DODS support built into your GDAL it will kick in first for
anything prefixed by http:.  I had to do:

   setenv GDAL_SKIP DODS
   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Nov 15 00:46:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] gdalwarp
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E0B19BD@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B19BD@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <473BDD28.1060003@pobox.com>

Meek, Allan (Contractor) wrote:
> Would it be possible to do step the following with the gdalwarp API?
> 
> 1. Open an image.
> 2. Check if the image meets certain criteria.
> 3. Reproject the image using gdalwarp without creating a new file or
> modifying the original file.
> 
> 1 and 2 are simple enough, but it's 3 that's got me stumped. The
> examples of gdalwarp that I've been able to find create a new file with
> the reprojected image.

Allan,

You could essentially warp the file to a memory image without writing to disk,
or create a "warped vrt" dataset that is essentially a virtual dataset which
will warp the original dataset into the target coordinate system on the fly.

The "warped vrt" approach can be approximated by doing:

   gdalwarp -of VRT utm.tif -t_srs WGS84 wgs84.vrt

Basically, if you could construct a similar VRT in memory then you would
have such a virtual dataset.  In fact, I think there is a convenient function
for doing this, if it is what you want, called GDALInitializeWarpedVRT().
See gdal/apps/gdalwarp.cpp for an example of it's use.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From zhonghaiw at gmail.com  Thu Nov 15 03:11:37 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473BA08C.1060103@pobox.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
Message-ID: <2534c4120711150011j28fdeb55x4d8fc8e82b88cedd@mail.gmail.com>

Hi there,

that's a very good point for me. Several days ago I've tried to access
tiled indexed raster images via a http link in MapServer, but I did
NOT get it run, is there any KEYWORD in MapServer to switch this
functionality on? like the GDAL_SKIP DODS command?

Best Regards

Zhonghai

On Nov 15, 2007 2:27 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Joaquim Luis wrote:
> > Hi,
> >
> > Suppose I want to get this (or any other) google image tile programatically
> >
> > http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt
> >
> > is there any way to do it with gdal/ogr?
>
> Joaquim,
>
> If you have libcurl support included in your GDAL build you can just do:
>
>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>
> That is, GDAL has a special "HTTP" driver that will fetch from an url
> and access the data from a memory buffer.
>
> If you have DODS support built into your GDAL it will kick in first for
> anything prefixed by http:.  I had to do:
>
>   setenv GDAL_SKIP DODS
>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From eric.doenges at gmx.net  Thu Nov 15 05:15:34 2007
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] libtiff for Mac?
In-Reply-To: <597584.40747.qm@web50507.mail.re2.yahoo.com>
References: <597584.40747.qm@web50507.mail.re2.yahoo.com>
Message-ID: <D257D41C-7FA3-49C5-A367-65FFB9643034@gmx.net>


Am 15.11.2007 um 00:24 schrieb Alison Luo:

> Is there a libtiff for Mac platform?

libtiff should compile for MacOS without any problems.

>  I need to call XTIFFOpenW equivalent on Mac, but this function is  
> WIN32 specific.

I assume XTIFFOpenW takes an 16 bit Unicode string as input ? If this  
is the case,
on MacOS you could create a CFString with either  
CFStringCreateWithCharacters() or
CFStringCreateWithCharactersNoCopy(), use that string to create a  
CFURL using CFURLCreateWithString(), and then call  
CFURLGetFileSystemRepresentation() to get
the path in the proper encoding (which is UTF-8 on MacOS, I believe).  
To avoid all
this pain, you should check if you can change your code to only use  
UTF-8 for filenames.

Disclaimer: I only assume the above will work; I haven't tested it  
myself.

With kind regards,
Eric

From warmerdam at pobox.com  Thu Nov 15 09:34:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <2534c4120711150011j28fdeb55x4d8fc8e82b88cedd@mail.gmail.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<2534c4120711150011j28fdeb55x4d8fc8e82b88cedd@mail.gmail.com>
Message-ID: <473C58EC.9050605@pobox.com>

Zhonghai Wang wrote:
> Hi there,
> 
> that's a very good point for me. Several days ago I've tried to access
> tiled indexed raster images via a http link in MapServer, but I did
> NOT get it run, is there any KEYWORD in MapServer to switch this
> functionality on? like the GDAL_SKIP DODS command?
> 
> Best Regards
> 
> Zhonghai

Zhonghai,

You can set GDAL/OGR configuration variables in MapServer using the CONFIG
keyword in MAP section.

   CONFIG "GDAL_SKIP" "DODS"

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Thu Nov 15 09:48:39 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473BA08C.1060103@pobox.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
Message-ID: <473C5C47.8090000@ualg.pt>

Frank Warmerdam wrote:
> If you have libcurl support included in your GDAL build you can just do:
>
>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>
> That is, GDAL has a special "HTTP" driver that will fetch from an url
> and access the data from a memory buffer.

Frank,
Thanks that's cool, but before I dig out how to get the image in memory 
let me bug you with one further question.
How do we declare a proxy?
(you command worked at home but not here at the University - firewalls)

Thanks
Joaquim


From potts at cfl.rr.com  Thu Nov 15 10:01:27 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473C5C47.8090000@ualg.pt>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
Message-ID: <2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>

Hello:

I think for any http requests GDAL uses libcurl.  There is a global  
environment variable (I think) that you can set outside your software  
for libcurl to go through a proxy.  Let me dig around real quick


Take care

Garrett

On Nov 15, 2007, at 9:48 AM, Joaquim Luis wrote:

> Frank Warmerdam wrote:
>> If you have libcurl support included in your GDAL build you can  
>> just do:
>>
>>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>>
>> That is, GDAL has a special "HTTP" driver that will fetch from an url
>> and access the data from a memory buffer.
>
> Frank,
> Thanks that's cool, but before I dig out how to get the image in  
> memory let me bug you with one further question.
> How do we declare a proxy?
> (you command worked at home but not here at the University -  
> firewalls)
>
> Thanks
> Joaquim
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From potts at cfl.rr.com  Thu Nov 15 10:12:37 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
Message-ID: <A92DC2A7-5E2F-473C-AC22-6187CE21C54B@cfl.rr.com>

This is a cut and paste from the libcurl docs on setting a proxy  
through the environment if the program doesn't expose it for ya to set.



the environment variable is http_proxy and they describe the format  
of it here



Take care



Garrett





libcurl automatically checks and uses a set of environment variables  
to know what proxies to use for certain protocols. The names of the  
variables are following an ancient de facto standard and are built up  
as "[protocol]_proxy" (note the lower casing). Which makes the  
variable 'http_proxy' checked for a name of a proxy to use when the  
input URL is HTTP. Following the same rule, the variable named  
'ftp_proxy' is checked for FTP URLs. Again, the proxies are always  
HTTP proxies, the different names of the variables simply allows  
different HTTP proxies to be used.

The proxy environment variable contents should be in the format  
"[protocol://][user:password@]machine[:port]". Where the protocol://  
part is simply ignored if present (so http://proxy and bluerk://proxy  
will do the same) and the optional port number specifies on which  
port the proxy operates on the host. If not specified, the internal  
default port number will be used and that is most likely *not* the  
one you would like it to be.

There are two special environment variables. 'all_proxy' is what sets  
proxy for any URL in case the protocol specific variable wasn't set,  
and 'no_proxy' defines a list of hosts that should not use a proxy  
even though a variable may say so. If 'no_proxy' is a plain asterisk  
("*") it matches all hosts.

To explicitly disable libcurl's checking for and using the proxy  
environment variables, set the proxy name to "" - an empty string -  
with CURLOPT_PROXY.





http://curl.haxx.se/libcurl/c/libcurl-tutorial.html


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071115/d082d70b/attachment.html
From zhonghaiw at gmail.com  Thu Nov 15 10:43:04 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <A92DC2A7-5E2F-473C-AC22-6187CE21C54B@cfl.rr.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<A92DC2A7-5E2F-473C-AC22-6187CE21C54B@cfl.rr.com>
Message-ID: <2534c4120711150743y87c78fbh859ba302b418073d@mail.gmail.com>

Hi Frank,

I must say it's so cool, you know, i compiled MapServer myself, and
just totally forgot the libcurl thing, now you pull me out of the
dark. Many thanks.

Best Regards

Zhonghai

On Nov 15, 2007 4:12 PM, Garrett Potts <potts@cfl.rr.com> wrote:
>
>
> This is a cut and paste from the libcurl docs on setting a proxy through the
> environment if the program doesn't expose it for ya to set.
>
>
>
>
> the environment variable is http_proxy and they describe the format of it
> here
>
>
>
>
> Take care
>
>
>
>
> Garrett
>
>
>
>
>
>
>
> libcurl automatically checks and uses a set of environment variables to know
> what proxies to use for certain protocols. The names of the variables are
> following an ancient de facto standard and are built up as
> "[protocol]_proxy" (note the lower casing). Which makes the variable
> 'http_proxy' checked for a name of a proxy to use when the input URL is
> HTTP. Following the same rule, the variable named 'ftp_proxy' is checked for
> FTP URLs. Again, the proxies are always HTTP proxies, the different names of
> the variables simply allows different HTTP proxies to be used.
>
> The proxy environment variable contents should be in the format
> "[protocol://][user:password@]machine[:port]". Where the protocol:// part is
> simply ignored if present (so http://proxy and bluerk://proxy will do the
> same) and the optional port number specifies on which port the proxy
> operates on the host. If not specified, the internal default port number
> will be used and that is most likely *not* the one you would like it to be.
>
> There are two special environment variables. 'all_proxy' is what sets proxy
> for any URL in case the protocol specific variable wasn't set, and
> 'no_proxy' defines a list of hosts that should not use a proxy even though a
> variable may say so. If 'no_proxy' is a plain asterisk ("*") it matches all
> hosts.
>
> To explicitly disable libcurl's checking for and using the proxy environment
> variables, set the proxy name to "" - an empty string - with CURLOPT_PROXY.
>
>
>
>
>
> http://curl.haxx.se/libcurl/c/libcurl-tutorial.html
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From jluis at ualg.pt  Thu Nov 15 10:52:48 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
Message-ID: <473C6B50.6030402@ualg.pt>

Thanks Garrett
Some search helped me to find that (in my case of course) this solves 
the problem (windows)

set http_proxy=proxy1.si.ualg.pt:8080

Joaquim Luis

> I think for any http requests GDAL uses libcurl.  There is a global 
> environment variable (I think) that you can set outside your software 
> for libcurl to go through a proxy.  Let me dig around real quick
>
> Take care
>
> Garrett
>
> On Nov 15, 2007, at 9:48 AM, Joaquim Luis wrote:
>
>> Frank Warmerdam wrote:
>>> If you have libcurl support included in your GDAL build you can just 
>>> do:
>>>
>>>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>>>
>>> That is, GDAL has a special "HTTP" driver that will fetch from an url
>>> and access the data from a memory buffer.
>>
>> Frank,
>> Thanks that's cool, but before I dig out how to get the image in 
>> memory let me bug you with one further question.
>> How do we declare a proxy?
>> (you command worked at home but not here at the University - firewalls)
>>
>> Thanks
>> Joaquim
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>


From maplabs at light42.com  Thu Nov 15 12:21:42 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473C6B50.6030402@ualg.pt>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<473C6B50.6030402@ualg.pt>
Message-ID: <3BF0C302-939F-11DC-954B-000A277A733C@light42.com>

I am not pointing any fingers, but...
I was speaking with one of the Google developer relations people 
yesterday. There is a problem in the field with downloading a lot of 
Google's tiles and making things with them.. (I saw two examples) There 
is a denial of service that kicks in at some point. Google is aware of 
some of these cases, and is increasing scrutiny where appropriate.....

-Brian


On Nov 15, 2007, at 7:52 AM, Joaquim Luis wrote:

> Thanks Garrett
> Some search helped me to find that (in my case of course) this solves 
> the problem (windows)
>
> set http_proxy=proxy1.si.ualg.pt:8080
>
> Joaquim Luis
>
>> I think for any http requests GDAL uses libcurl.  There is a global 
>> environment variable (I think) that you can set outside your software 
>> for libcurl to go through a proxy.  Let me dig around real quick
>>
>> Take care
>>
>> Garrett
>>
>> On Nov 15, 2007, at 9:48 AM, Joaquim Luis wrote:
>>
>>> Frank Warmerdam wrote:
>>>> If you have libcurl support included in your GDAL build you can 
>>>> just do:
>>>>
>>>>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>>>>
>>>> That is, GDAL has a special "HTTP" driver that will fetch from an 
>>>> url
>>>> and access the data from a memory buffer.
>>>
>>> Frank,
>>> Thanks that's cool, but before I dig out how to get the image in 
>>> memory let me bug you with one further question.
>>> How do we declare a proxy?
>>> (you command worked at home but not here at the University - 
>>> firewalls)
>>>
>>> Thanks
>>> Joaquim
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Thu Nov 15 12:35:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] NaN values transformation in funtion Transform from
	OGRCoordinateTransformation class
In-Reply-To: <4738A0BB.30307@ualg.pt>
References: <4738A0BB.30307@ualg.pt>
Message-ID: <473C8365.4030909@loskot.net>

Miguel Fernandes wrote:
> Hello all,
> 
> I'm using version GDAL_svn_trunk_2007_11_04 and the behaviour I'm 
> describing also happens in version 1.4.3. Using library OGR, class 
> OGRCoordinateTransformation functions Transform and TransformEx in
> order to make coordinate transformations from latlon to utm29 for
> coastline coordinates that include NaN values in order to detach
> features like islands, the function is transforming the NaN values
> into Inf values. [...] Is this behaviour correct or is this a bug?

It looks like something is wrong. Does it happen for the same coordinate
values or random?
It would be helpful if you could prepare simple test case, a minimal
code snipped (perhaps as a ticket at the http://trac.osgeo.org/gdal/)
presenting how do you use the OGR code, input data and what output you
get. Then it will be possible to try to reproduce this problem and debug.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From potts at cfl.rr.com  Thu Nov 15 12:38:25 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<473C6B50.6030402@ualg.pt>
	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
Message-ID: <F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>

Hello:

I think it is illegal based on their license terms to even download  
and/or use their image server in your own applications.   They have  
license agreements with their image providers that the data will only  
be used through their tools??  Can't remember,  I get caught up in  
their legalities.


Take care

Garrett

On Nov 15, 2007, at 12:21 PM, Brian Hamlin wrote:

> I am not pointing any fingers, but...
> I was speaking with one of the Google developer relations people  
> yesterday. There is a problem in the field with downloading a lot  
> of Google's tiles and making things with them.. (I saw two  
> examples) There is a denial of service that kicks in at some point.  
> Google is aware of some of these cases, and is increasing scrutiny  
> where appropriate.....
>
> -Brian
>
>
> On Nov 15, 2007, at 7:52 AM, Joaquim Luis wrote:
>
>> Thanks Garrett
>> Some search helped me to find that (in my case of course) this  
>> solves the problem (windows)
>>
>> set http_proxy=proxy1.si.ualg.pt:8080
>>
>> Joaquim Luis
>>
>>> I think for any http requests GDAL uses libcurl.  There is a  
>>> global environment variable (I think) that you can set outside  
>>> your software for libcurl to go through a proxy.  Let me dig  
>>> around real quick
>>>
>>> Take care
>>>
>>> Garrett
>>>
>>> On Nov 15, 2007, at 9:48 AM, Joaquim Luis wrote:
>>>
>>>> Frank Warmerdam wrote:
>>>>> If you have libcurl support included in your GDAL build you can  
>>>>> just do:
>>>>>
>>>>>   gdalinfo 'http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt'
>>>>>
>>>>> That is, GDAL has a special "HTTP" driver that will fetch from  
>>>>> an url
>>>>> and access the data from a memory buffer.
>>>>
>>>> Frank,
>>>> Thanks that's cool, but before I dig out how to get the image in  
>>>> memory let me bug you with one further question.
>>>> How do we declare a proxy?
>>>> (you command worked at home but not here at the University -  
>>>> firewalls)
>>>>
>>>> Thanks
>>>> Joaquim
>>>>
>>>> _______________________________________________
>>>> Gdal-dev mailing list
>>>> Gdal-dev@lists.maptools.org
>>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Thu Nov 15 12:44:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] How to measure a distance betwen two points on a line
In-Reply-To: <20071111160259.42820@gmx.net>
References: <000f01c82167$41e4f050$ba03a8c0@GUS> <47333CB9.2090905@loskot.net>
	<20071111160259.42820@gmx.net>
Message-ID: <473C8572.5000102@loskot.net>

Jose Luis Gomez Dans wrote:
> Hi,
> 
> I had written a reply, but I think I closed the window prior to
> sending the message. D'ooh!!!
> 
>> You can use linestring to one of rectangular system, projecting
>> your data to ie. UTM. Then you can use provided Distance function 
>> based on the Pythagorean Th.
> 
> Imagine that the data is already in projected coordinates (UTM, say).
> I have a points layer with pairs of points, and I have another layer
> with a number of LINES. The POINTS are coincident with vertices on
> the lines layer. What I think Gus wants to know is how to measure the
> distance ALONG the line between those two points. So I guess that you
> first need to cut the line to go from point A to point B (using some
> sort of buffer, intersection operation). Then, on that line, you can
> just use the length() (can't quite remember what the method's exactly
> called) to work out that length.

I'm not sure if I understand the problem correctly, but I'll try to give
another 5 cents. If both layers are projected to a rectangular system,
then you can calculate distance between two geometries, of different or
same type.

If you have line (L) and points (P) you can calculate shortest distance
between p1 and p2 using OGRGeometry::Distance():

    v1    v2
L --*-----*--
P   p1    p2  (coincident with L vertices)


If you have a polyline like this:

    v1    v2    v3    v4
L --*-----*-----*-----*--
P   p1    p2    p3    p4

you need to calculate a sum of distance between all subsequent points p1
to p4 corresponding to L vertices (v1..v4).

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 12:59:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <20071112135043.GA15473@ak4719.spb.edu>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
Message-ID: <473C88EE.3020808@loskot.net>

Andrey Kiselev wrote:
> On Sat, Nov 10, 2007 at 11:56:24AM +0100, Mateusz Loskot wrote:
>> I'd like to ask you about your plans regarding the RFC 10
>>
>> http://trac.osgeo.org/gdal/wiki/rfc10_ogropen
>>
>> Recently, I added new driver - GeoJSON - to the OGR set and in this
>> driver I follow your concept from the RFC but input parameters are
>> "passed" to Open() call as environment variable.
>>
>> I believe it would be good to have RFC10 implemented for 1.5.0 so I'm
>> willing to help in this. Could you tell me if and where I could be
>> helpful?
> 
> Hi Mateusz,
> 
> I am CC'ing to list to initiate a new discussion of RFC 10.
> 
> Actually I am thinking about revoking the RFC 10 because of two reasons.
> In first of all it looks like it will not be adopted in the current form
> due to the API changes it needs.

Andrey,

I understand.

> The second reason came to my mind when I better thought out the problem.
> It is a problem with GUI applications.  GDAL has a possibility to
> automatically determine input file format without user specification,
> that is why we can't pass driver specific open options in the Open()
> call. Typical scenario for GUI applications is the following: show the
> open dialog to choose the file name --- at this stage we don't know the
> file format yet and can't put driver specific switches on that dialog.
> After file selection stage we can show the option dialog, but the
> problem is that we don't know the file format, and also we do not have
> a way to interrupt the GDALOpen() call to pass our options there.

It makes sense to me.

> Note that non-interactive CLI applications does not have this problem
> because of their non-interactivity :-). We will need to run such an
> application twice: the first run to determine file format and the second
> run to perform our task using correct format specific options. Or we
> should know the file format from the third part.
> 
> I see two ways to solve this problem.
> 
> 1. Introduce the callback function which will be called in the Open()
> method and return back driver specific open options --- GUI dialog can
> be shown to user here.

It looks like a kind of data format reflection mechanism.

> 2. Introduce new mandatory method for format drivers to determine the
> file format. Now GUI scenario will look like that:
> 
>  - select the file name;
>  - determine a format of that file;
>  - let the user choose open options, specific for that format;
>  - now proceed to GDALOpen(), capable to get options as per RFC 10.
> 
> Warning: between the second and the forth steps we have a race
> condition. But for this particular case it is not important.
> 
> Either way, for applications like Mapserver we should need to know the
> file format before writing the file name in its config file.

There seems to be yet another option or rather a variation of the 2nd
one. GUI applications may use OGRSFDriverRegistrar and its Open()
function to determine format of datasource passed in:

1. OGRSFDriverRegistrar::Open()
1.1. on success OGRSFDriver of returned OGRDataSource instance
2. Close the datasource
3. Use obtained driver to open the same datasource again but with custom
opening options passed

This is a kind of two-steps open action and is very similar to two steps
connection used in FDO:
- first step to answer what properties are required to open connection
- second step to pass required properties and establish connection

> The second approach is simpler to implement and also it is good to have
> separate format guessing method, it can be quite useful by itself. The
> problem still exist with formats that can't be easily identified though.

Right, it's similar to FDO's solution.

> Frank also suggested to pass encoded open options along with file name
> instead of having the separate parameter in Open() method. With this
> approach we will have different names to pass for format identification
> function and for GDALOpen(): pure file name for the former one and
> name+options for the last one. This will only work when we know the file
> format before opening the file, otherwise we just don't know what
> options are needed.

It sounds like usable approach but perhaps more complex to users.

> So the questions are: what approach looks better? Is there another
> possible solution?

I'd vote for your 2nd version.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 13:04:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <4738B963.9050301@pobox.com>
References: <47358E58.7060503@loskot.net>	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com>
Message-ID: <473C8A2E.3090709@loskot.net>

Frank Warmerdam wrote:
> I'm not clear on why RFC 10 couldn't be altered to provide a standard
> mechanism to encode parameters into the datasource name and go from there.
> The issue of applications which don't know the format apriori is not new.

I think it might be not easy to find common syntax used across all
drivers. For example, if we decided to delimit options with @, perhaps
there are some drivers that use @ token in its native connection string.

IMO, options interface should be defined as common to all drivers, but
not using syntax specific to a driver.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 13:21:26 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <20071113170555.GA22940@ak4719.spb.edu>
References: <47358E58.7060503@loskot.net>	<20071112135043.GA15473@ak4719.spb.edu>	<4738B963.9050301@pobox.com>
	<20071113170555.GA22940@ak4719.spb.edu>
Message-ID: <473C8E26.2080500@loskot.net>

Andrey Kiselev wrote:
> On Mon, Nov 12, 2007 at 03:36:51PM -0500, Frank Warmerdam wrote:
>>> 
>>> Frank also suggested to pass encoded open options along with file
>>> name instead of having the separate parameter in Open() method. With
>>> this approach we will have different names to pass for format
>>> identification function and for GDALOpen(): pure file name for the
>>> former one and name+options for the last one. This will only work
>>> when we know the file format before opening the file, otherwise we
>>> just don't know what options are needed.
>> Note that the approach of encoding driver specific options into the
>> name is already widely used for OGR - mainly for the various RDBMS
>> drivers.
> 
> Yes, but it is not standartized and weak in many ways. Also it is clear
> that we need open options, for example, PG driver uses PGSQL_OGR_FID
> variable for some purpose, that is certainly a thing that should be
> configured as an per-datasource parameter.

Perhaps we could you JSON syntax or something similar for GDAL/OGR options:

{
option1 : value,
option2 : value
}

and pass it as a single string to the open function, together with
native connection string:

char const* pszName =
"PG:\'dbname=test\'{option1=value,option2=value}";

where the part enclosed with {} is considered as options list.

char const* pszName =
"{option1=value,option2=value}ODBC:userid/password@dsn";

as above, the part enclosed with {} consists of options list.

Perhaps it would be required to use double-braces "{{option1=value}}

However, all these conventions require extra actions from a
user to encode the connection string.

>> I'm not clear on why RFC 10 couldn't be altered to provide a standard
>> mechanism to encode parameters into the datasource name and go from
>> there.  The issue of applications which don't know the format apriori
>> is not new.
> 
> If the identification function will be added to OGR we will have two
> forms of datasource naming. Identification function will accept a pure
> dataset name, because we don't know what options are acceptable at this
> stage, and we don't need them here anyway. Open function should get
> datasource name AND open options: here we know what parameters we need
> and already asked our user to set them. Note, that username/password
> thing of mentioned PG driver is a part of datasource name and not an
> option: we need these things to check database existence and establish
> connection.  Though PGSQL_OGR_FID is an optional parameter and it is
> only required when the actual data reading starts.

I agree with Andrey's reasoning.

> So the programmer will need to use the following code to open datasource
> with open options:
> 
>  ds_name = "datasource_name";
>  format = Identify(ds_name);
>  if (format == "OUR_FORMAT") {
>   options = AskUserForOptions();
>   some_kind_of_new_name = CombineAndQuoteStrings(ds_name, options);
>   ds = OGROpen(some_kind_of_new_name);
>  }
> 
> instead of
> 
>  ds_name = "datasource_name";
>  format = Identify(ds_name);
>  if (format == "OUR_FORMAT") {
>   options = AskUserForOptions();
>   ds = OGROpen(ds_name, options);
>  }
> 
> I think it is just clearer and simpler for developer.

I agree.
Also, the second version is compatible with convention of passing
creation options [1], so it's more intuitive for GDAL/OGR users.

[1] options passed as a list to functions
OGRSFDriver::CreateDataSource() and GDALDriver::Create()

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Thu Nov 15 13:30:49 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
References: <473B7D3E.20905@ualg.pt>
	<473BA08C.1060103@pobox.com>	<473C5C47.8090000@ualg.pt>	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>	<473C6B50.6030402@ualg.pt>	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
Message-ID: <473C9059.4090708@ualg.pt>

Thank you guys. I was not aware of those issues.

Joaquim

> Hello:
>
> I think it is illegal based on their license terms to even download 
> and/or use their image server in your own applications.   They have 
> license agreements with their image providers that the data will only 
> be used through their tools??  Can't remember,  I get caught up in 
> their legalities.
>
>
> Take care
>
> Garrett
>
> On Nov 15, 2007, at 12:21 PM, Brian Hamlin wrote:
>
>> I am not pointing any fingers, but...
>> I was speaking with one of the Google developer relations people 
>> yesterday. There is a problem in the field with downloading a lot of 
>> Google's tiles and making things with them.. (I saw two examples) 
>> There is a denial of service that kicks in at some point. Google is 
>> aware of some of these cases, and is increasing scrutiny where 
>> appropriate.....
>>
>> -Brian
>>


From mateusz at loskot.net  Thu Nov 15 13:34:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Motion to Adopt RFC 14: Image Structure Metadata
In-Reply-To: <4735EC65.5060502@pobox.com>
References: <4735EC65.5060502@pobox.com>
Message-ID: <473C9120.309@loskot.net>

Frank Warmerdam wrote:
> Motion: To adopt RFC 14 on Image Structure Metadata
> 
>   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

I've read, I've understood, I'm cool with it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 13:36:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Is make generate a part of make release?
In-Reply-To: <4736DC5F.4040807@tkk.fi>
References: <47361FEA.80808@tkk.fi> <473628BF.30603@pobox.com>
	<4736DC5F.4040807@tkk.fi>
Message-ID: <473C91C1.1060700@loskot.net>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>> If you would like the same done for perl, please update the
>> mkgdaldist.sh script yourself.
> 
> I did this and tested it.

Thanks Ari!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Nov 15 13:47:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <473C8A2E.3090709@loskot.net>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com> <473C8A2E.3090709@loskot.net>
Message-ID: <473C942D.9080500@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> I'm not clear on why RFC 10 couldn't be altered to provide a standard
>> mechanism to encode parameters into the datasource name and go from there.
>> The issue of applications which don't know the format apriori is not new.
> 
> I think it might be not easy to find common syntax used across all
> drivers. For example, if we decided to delimit options with @, perhaps
> there are some drivers that use @ token in its native connection string.
> 
> IMO, options interface should be defined as common to all drivers, but
> not using syntax specific to a driver.

Mateusz,

Yes, that was my intent.  To "package" lists of options in a standard way
with well understood escaping and quoting rules.  A mechanism that could
be applied to new drivers, and in some hopefully not-too-disruptive fashion
applied to old drivers with options in the datasource name.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Nov 15 13:43:21 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
Message-ID: <473C9349.1080904@gov.yk.ca>

Hello all,

Some time ago I was able to compile gdal on cygwin out of the box. Today 
  it seems it's not so straightforward anymore. Has anyone else done so 
lately? Any tips to share?

the error I'm running into at the moment is "cpl_port.h: No such file or 
directory". That file does exist in the gdal/port directory. Perhaps I 
need another one somewhere else too?

$ configure --without-expat
...snip...
$ make
...snip...
(cd port; make)
make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/port'
make[1]: Nothing to be done for `default'.
make[1]: Leaving directory `/cygdrive/d/src/gdal-trunk/port'
(cd gcore; make)
make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/gcore'
/bin/sh /d/src/gdal-trunk/libtool --mode=compile --tag=CXX g++ 
-DHAVE_MITAB -Wal
l  -O2   -I/d/src/gdal-trunk/port -I/d/src/gdal-trunk/gcore 
-I/d/src/gdal-trunk/
alg -I/d/src/gdal-trunk/ogr -I/d/src/gdal-trunk/ogr/ogrsf_frmts 
-DOGR_ENABLED -I
/d/src/gdal-trunk/port  -DPAM_ENABLED -c -o gdalopeninfo.o gdalopeninfo.cpp
libtool: compile:  g++ -DHAVE_MITAB -Wall -O2 -I/d/src/gdal-trunk/port 
-I/d/src/
gdal-trunk/gcore -I/d/src/gdal-trunk/alg -I/d/src/gdal-trunk/ogr 
-I/d/src/gdal-t
runk/ogr/ogrsf_frmts -DOGR_ENABLED -I/d/src/gdal-trunk/port 
-DPAM_ENABLED -c gda
lopeninfo.cpp  -DDLL_EXPORT -DPIC -o .libs/gdalopeninfo.o
In file included from gdal_priv.h:50,
                  from gdalopeninfo.cpp:30:
gdal.h:40:22: cpl_port.h: No such file or directory
gdal.h:41:23: cpl_error.h: No such file or directory
In file included from gdal_priv.h:50,
                  from gdalopeninfo.cpp:30:
gdal.h:50: error: expected constructor, destructor, or type conversion 
before
....etc.



thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Thu Nov 15 13:44:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] place for user contributed utilities?
In-Reply-To: <4736102B.8080204@gov.yk.ca>
References: <4734C2EC.7090407@gov.yk.ca> <4735B91A.3020107@loskot.net>
	<4736102B.8080204@gov.yk.ca>
Message-ID: <473C9375.8080106@loskot.net>

Matt Wilkie wrote:
>> Personally, I believe reporting a Ticket is the best way to submit
>> contributions. Here is one of examples how GeoJSON driver have been
>> incorporated to the GDAL:
> 
> Thank you Mateusz, that's perfect. I've added it to the wiki, with some
> wording changes: http://trac.osgeo.org/gdal/wiki/HowToContribute

Matt,

Thanks for writing down these useful notes on the Wiki.

> I thought about adding a blurb about filing bug reports, but got
> bogged
> down in "how to write a good bug report". I thought it would be as
> simple as "go read this page...", hah! Everything I found online was
> specific to a particular project or software base. I'm sure it's out
> there, but I'm supposed to be working right now :)

Right, submitting new features is not very different than
reporting a bug. Hmm, it could be a proof of well-known truth that bugs
in s software are features :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 13:45:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <473C942D.9080500@pobox.com>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com> <473C8A2E.3090709@loskot.net>
	<473C942D.9080500@pobox.com>
Message-ID: <473C93D8.3020000@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> I'm not clear on why RFC 10 couldn't be altered to provide a standard
>>> mechanism to encode parameters into the datasource name and go from
>>> there.
>>> The issue of applications which don't know the format apriori is not
>>> new.
>>
>> I think it might be not easy to find common syntax used across all
>> drivers. For example, if we decided to delimit options with @, perhaps
>> there are some drivers that use @ token in its native connection string.
>>
>> IMO, options interface should be defined as common to all drivers, but
>> not using syntax specific to a driver.
> 
> Mateusz,
> 
> Yes, that was my intent.  To "package" lists of options in a standard way
> with well understood escaping and quoting rules.  A mechanism that could
> be applied to new drivers, and in some hopefully not-too-disruptive fashion
> applied to old drivers with options in the datasource name.

Frank,

OK

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 14:01:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473C9349.1080904@gov.yk.ca>
References: <473C9349.1080904@gov.yk.ca>
Message-ID: <473C976E.8080503@loskot.net>

Matt Wilkie wrote:
> Hello all,
> 
> Some time ago I was able to compile gdal on cygwin out of the box. Today
>  it seems it's not so straightforward anymore. Has anyone else done so
> lately? Any tips to share?
> 
> the error I'm running into at the moment is "cpl_port.h: No such file or
> directory". That file does exist in the gdal/port directory. Perhaps I
> need another one somewhere else too?
> 
> $ configure --without-expat
> ...snip...

The cpl_port.h file should be generated by the ./configure script.
I don't use cygwin but I tested it on Mac OS X
- removed cpl_port.h
- svn update
- ./configure --without-expat

after that I found port/cpl_port.h file generated.

Perhaps there is something wrong with ./configure on cygwin.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 14:10:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] IRC meeting to discuss 1.5 release Tues Nov 20th at
	19:00 GMT
In-Reply-To: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
References: <0DA2BF7B-53CF-4414-B17C-EEF964AD9DF7@gmail.com>
Message-ID: <473C999F.7030900@loskot.net>

Howard Butler wrote:
> All,
> 
> I would like to propose that we (all PSC members and any committers and
> users who can attend) have an IRC meeting next Tuesday to discuss what
> work we hope to have done in time to make the 1.5 beta release.
> 
> 1900 GMT is 1PM Central or 2PM Eastern for North American types and 7,
> 8, or 9PM for European folks.
> http://www.timeanddate.com/worldclock/meetingtime.html?month=11&day=20&year=2007&p1=0&p2=64&p3=50&p4=262

Hobu,

It looks very good to me. Thanks!

-- 
Mateusz Loskot
http://mateusz.loskot.net

From fniles at mitre.org  Thu Nov 15 14:14:34 2007
From: fniles at mitre.org (Rick Niles)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: GDAL SRTM hgt code
In-Reply-To: <fb5rfq$iq6$1@sea.gmane.org>
References: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
	<fb5rfq$iq6$1@sea.gmane.org>
Message-ID: <473C9A9A.1010601@mitre.org>

Since SRTM hgt-files is the best public available terrain data around 
(that I know of..), it seems like it's worth it to have a specific 
front-end to handle it directly via GDALOpen().  I can see why some 
would argue that's just a special case of a raw 2-byte file, but I don't 
think it would be ugly to have a specific filter to handle this 
extremely popular data.  There's 3-second and 1-second SRTM data and I'm 
not sure you can auto-detect which is which.

What do you think?

Rick Niles.


WolfgangZ wrote:
> list67@netscape.net schrieb:
>> Has anyone added code to GDAL so that a SRTM (1 or 3 arcsecond) hgt 
>> file can be passed to GDALOpen(...) for use?
>>
>> I did some searching and noticed that there are some format 
>> conversion workarounds for using the SRTM files with GDAL, but I 
>> didn't find any info about wether or not a more direct open 
>> capability had been implemented?
>>
>> Thank you.
>>
>>    Mike
>
> hi Mike,
>
> you can have a look at the grass r.in.srtm script. It basically unzips 
> and renames the file to .bil and furthermore you need to create a 
> textfile with the same file name and the fiel ending .hdr with the 
> following content:
> For 3arcsec data:
>     BYTEORDER M
>     LAYOUT BIL
>     NROWS 1201
>     NCOLS 1201
>     NBANDS 1
>     NBITS 16
>     BANDROWBYTES 2402
>     TOTALROWBYTES 2402
>     BANDGAPBYTES 0
>     NODATA -32768
>     ULXMAP $ULXMAP
>     ULYMAP $ULYMAP
>     XDIM 0.000833333333333
>     YDIM 0.000833333333333
>
> of for 1arcsec data:
>     BYTEORDER M
>     LAYOUT BIL
>     NROWS 3601
>     NCOLS 3601
>     NBANDS 1
>     NBITS 16
>     BANDROWBYTES 7202
>     TOTALROWBYTES 7202
>     BANDGAPBYTES 0
>     NODATA -32768
>     ULXMAP $ULXMAP
>     ULYMAP $ULYMAP
>     XDIM 0.000277777777777778
>     YDIM 0.000277777777777778
>
> You need to replace $ULXMAP and $ULYMAP with the upper left 
> coordinates of that tile. As s_srs you can use EPSG:4326.
>
> Greetings
> Wolfgang
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Nov 15 14:24:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473C9349.1080904@gov.yk.ca>
References: <473C9349.1080904@gov.yk.ca>
Message-ID: <473C9D0A.1040807@pobox.com>

Matt Wilkie wrote:
> Hello all,
> 
> Some time ago I was able to compile gdal on cygwin out of the box. Today 
>  it seems it's not so straightforward anymore. Has anyone else done so 
> lately? Any tips to share?
> 
> the error I'm running into at the moment is "cpl_port.h: No such file or 
> directory". That file does exist in the gdal/port directory. Perhaps I 
> need another one somewhere else too?
> 
> $ configure --without-expat
> ...snip...
> $ make
> ...snip...
> (cd port; make)
> make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/port'
> make[1]: Nothing to be done for `default'.
> make[1]: Leaving directory `/cygdrive/d/src/gdal-trunk/port'
> (cd gcore; make)
> make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/gcore'
> /bin/sh /d/src/gdal-trunk/libtool --mode=compile --tag=CXX g++ 
> -DHAVE_MITAB -Wal
> l  -O2   -I/d/src/gdal-trunk/port -I/d/src/gdal-trunk/gcore 
> -I/d/src/gdal-trunk/
> alg -I/d/src/gdal-trunk/ogr -I/d/src/gdal-trunk/ogr/ogrsf_frmts 
> -DOGR_ENABLED -I
> /d/src/gdal-trunk/port  -DPAM_ENABLED -c -o gdalopeninfo.o gdalopeninfo.cpp
> libtool: compile:  g++ -DHAVE_MITAB -Wall -O2 -I/d/src/gdal-trunk/port 
> -I/d/src/
> gdal-trunk/gcore -I/d/src/gdal-trunk/alg -I/d/src/gdal-trunk/ogr 
> -I/d/src/gdal-t
> runk/ogr/ogrsf_frmts -DOGR_ENABLED -I/d/src/gdal-trunk/port 
> -DPAM_ENABLED -c gda
> lopeninfo.cpp  -DDLL_EXPORT -DPIC -o .libs/gdalopeninfo.o
> In file included from gdal_priv.h:50,
>                  from gdalopeninfo.cpp:30:
> gdal.h:40:22: cpl_port.h: No such file or directory

Matt,

Does cpl_port.h exist in /d/src/gdal-trunk/port?  If so, it is quite
unclear to me why the above compile command wouldn't have found it.

I will concede I have not tried a cygwin build of GDAL in a while.  It
is my intention that we continue to build properly on cygwin.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Thu Nov 15 14:56:20 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: GDAL SRTM hgt code
In-Reply-To: <473C9A9A.1010601@mitre.org>
References: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
	<fb5rfq$iq6$1@sea.gmane.org> <473C9A9A.1010601@mitre.org>
Message-ID: <200711152056.22070.even.rouault@mines-paris.org>

Hi,

A specific driver for SRTM hgt files has been added a few weeks ago to GDAL 
trunk (future 1.5.0). You may test it with nightly snapshot or latest 
FWTools-2.0.0


Le Thursday 15 November 2007 20:14:34 Rick Niles, vous avez ?crit?:
> Since SRTM hgt-files is the best public available terrain data around
> (that I know of..), it seems like it's worth it to have a specific
> front-end to handle it directly via GDALOpen().  I can see why some
> would argue that's just a special case of a raw 2-byte file, but I don't
> think it would be ugly to have a specific filter to handle this
> extremely popular data.  There's 3-second and 1-second SRTM data and I'm
> not sure you can auto-detect which is which.
>
> What do you think?
>
> Rick Niles.
>
> WolfgangZ wrote:
> > list67@netscape.net schrieb:
> >> Has anyone added code to GDAL so that a SRTM (1 or 3 arcsecond) hgt
> >> file can be passed to GDALOpen(...) for use?
> >>
> >> I did some searching and noticed that there are some format
> >> conversion workarounds for using the SRTM files with GDAL, but I
> >> didn't find any info about wether or not a more direct open
> >> capability had been implemented?
> >>
> >> Thank you.
> >>
> >>    Mike
> >
> > hi Mike,
> >
> > you can have a look at the grass r.in.srtm script. It basically unzips
> > and renames the file to .bil and furthermore you need to create a
> > textfile with the same file name and the fiel ending .hdr with the
> > following content:
> > For 3arcsec data:
> >     BYTEORDER M
> >     LAYOUT BIL
> >     NROWS 1201
> >     NCOLS 1201
> >     NBANDS 1
> >     NBITS 16
> >     BANDROWBYTES 2402
> >     TOTALROWBYTES 2402
> >     BANDGAPBYTES 0
> >     NODATA -32768
> >     ULXMAP $ULXMAP
> >     ULYMAP $ULYMAP
> >     XDIM 0.000833333333333
> >     YDIM 0.000833333333333
> >
> > of for 1arcsec data:
> >     BYTEORDER M
> >     LAYOUT BIL
> >     NROWS 3601
> >     NCOLS 3601
> >     NBANDS 1
> >     NBITS 16
> >     BANDROWBYTES 7202
> >     TOTALROWBYTES 7202
> >     BANDGAPBYTES 0
> >     NODATA -32768
> >     ULXMAP $ULXMAP
> >     ULYMAP $ULYMAP
> >     XDIM 0.000277777777777778
> >     YDIM 0.000277777777777778
> >
> > You need to replace $ULXMAP and $ULYMAP with the upper left
> > coordinates of that tile. As s_srs you can use EPSG:4326.
> >
> > Greetings
> > Wolfgang
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Thu Nov 15 15:24:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: GDAL SRTM hgt code
In-Reply-To: <473C9A9A.1010601@mitre.org>
References: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
	<fb5rfq$iq6$1@sea.gmane.org> <473C9A9A.1010601@mitre.org>
Message-ID: <473CAB09.3060805@pobox.com>

Rick Niles wrote:
> Since SRTM hgt-files is the best public available terrain data around 
> (that I know of..), it seems like it's worth it to have a specific 
> front-end to handle it directly via GDALOpen().  I can see why some 
> would argue that's just a special case of a raw 2-byte file, but I don't 
> think it would be ugly to have a specific filter to handle this 
> extremely popular data.  There's 3-second and 1-second SRTM data and I'm 
> not sure you can auto-detect which is which.

Rick,

An SRTM driver was implemented in "trunk" and will be in the 1.5.0 release.
I haven't tried it yet, but it should be built into the FWTools builds
(or just build from any trunk snapshot).  Some info at:

   http://www.gdal.org/frmt_various.html#SRTMHGT

It looks like it was implemented by Michael Mazzella and Even Rouault so
kudos and bug reports to them. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Nov 15 15:22:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473C9D0A.1040807@pobox.com>
References: <473C9349.1080904@gov.yk.ca> <473C9D0A.1040807@pobox.com>
Message-ID: <473CAA6E.20201@loskot.net>

Matt,

I'm sorry but I've misinform you the cpl_port.h is generated by
./configure. I mistaken the cpl_port.h as with cpl_config.h file which
is generated by configure.

Sorry for confusing.

-- Mateusz

Frank Warmerdam wrote:
> Matt Wilkie wrote:
>> Hello all,
>>
>> Some time ago I was able to compile gdal on cygwin out of the box.
>> Today  it seems it's not so straightforward anymore. Has anyone else
>> done so lately? Any tips to share?
>>
>> the error I'm running into at the moment is "cpl_port.h: No such file
>> or directory". That file does exist in the gdal/port directory.
>> Perhaps I need another one somewhere else too?
>>
>> $ configure --without-expat
>> ...snip...
>> $ make
>> ...snip...
>> (cd port; make)
>> make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/port'
>> make[1]: Nothing to be done for `default'.
>> make[1]: Leaving directory `/cygdrive/d/src/gdal-trunk/port'
>> (cd gcore; make)
>> make[1]: Entering directory `/cygdrive/d/src/gdal-trunk/gcore'
>> /bin/sh /d/src/gdal-trunk/libtool --mode=compile --tag=CXX g++
>> -DHAVE_MITAB -Wal
>> l  -O2   -I/d/src/gdal-trunk/port -I/d/src/gdal-trunk/gcore
>> -I/d/src/gdal-trunk/
>> alg -I/d/src/gdal-trunk/ogr -I/d/src/gdal-trunk/ogr/ogrsf_frmts
>> -DOGR_ENABLED -I
>> /d/src/gdal-trunk/port  -DPAM_ENABLED -c -o gdalopeninfo.o
>> gdalopeninfo.cpp
>> libtool: compile:  g++ -DHAVE_MITAB -Wall -O2 -I/d/src/gdal-trunk/port
>> -I/d/src/
>> gdal-trunk/gcore -I/d/src/gdal-trunk/alg -I/d/src/gdal-trunk/ogr
>> -I/d/src/gdal-t
>> runk/ogr/ogrsf_frmts -DOGR_ENABLED -I/d/src/gdal-trunk/port
>> -DPAM_ENABLED -c gda
>> lopeninfo.cpp  -DDLL_EXPORT -DPIC -o .libs/gdalopeninfo.o
>> In file included from gdal_priv.h:50,
>>                  from gdalopeninfo.cpp:30:
>> gdal.h:40:22: cpl_port.h: No such file or directory
> 
> Matt,
> 
> Does cpl_port.h exist in /d/src/gdal-trunk/port?  If so, it is quite
> unclear to me why the above compile command wouldn't have found it.
> 
> I will concede I have not tried a cygwin build of GDAL in a while.  It
> is my intention that we continue to build properly on cygwin.
> 
> Best regards,


-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Thu Nov 15 16:29:32 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get an image by url?
In-Reply-To: <F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
References: <473B7D3E.20905@ualg.pt>
	<473BA08C.1060103@pobox.com>	<473C5C47.8090000@ualg.pt>	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>	<473C6B50.6030402@ualg.pt>	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
Message-ID: <473CBA3C.9000304@ualg.pt>

Sorry to insist on this but is libcurl support the only condition to 
access images by url?

I'm able to access using FWTools but with my build 1.4.3 I get these errors.
And yes, I checked with the dependency walker that libcurl and zlib1 
etc... are all  "non red"


Thanks
Joaquim
 

ERROR 4: `http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not 
exist in the
 file system,
and is not recognised as a supported dataset name.

GDALOpen failed - 4
`http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not exist in the 
file sys
tem,
and is not recognised as a supported dataset name.

From zhonghaiw at gmail.com  Thu Nov 15 16:50:04 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get an image by url?
In-Reply-To: <473CBA3C.9000304@ualg.pt>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<473C6B50.6030402@ualg.pt>
	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
	<473CBA3C.9000304@ualg.pt>
Message-ID: <2534c4120711151350p1c1c33qa513344502b6d756@mail.gmail.com>

Hi There,

try this:

> *gadlinfo "http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt"*

be sure that you enclosed the http link with double quote.

Regards

Zhonghai

On Nov 15, 2007 10:29 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> Sorry to insist on this but is libcurl support the only condition to
> access images by url?
>
> I'm able to access using FWTools but with my build 1.4.3 I get these
errors.
> And yes, I checked with the dependency walker that libcurl and zlib1
> etc... are all  "non red"
>
>
> Thanks
> Joaquim
>
>
> ERROR 4: `http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not
> exist in the
>  file system,
> and is not recognised as a supported dataset name.
>
> GDALOpen failed - 4
> `http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not exist in the
> file sys
> tem,
> and is not recognised as a supported dataset name.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071115/3d073b88/attachment.html
From jluis at ualg.pt  Thu Nov 15 16:56:09 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get an image by url?
In-Reply-To: <2534c4120711151350p1c1c33qa513344502b6d756@mail.gmail.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>	
	<473C5C47.8090000@ualg.pt>	
	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>	
	<473C6B50.6030402@ualg.pt>	
	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>	
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>	
	<473CBA3C.9000304@ualg.pt>
	<2534c4120711151350p1c1c33qa513344502b6d756@mail.gmail.com>
Message-ID: <473CC079.5020702@ualg.pt>

Zhonghai Wang wrote:
> Hi There,
>
> try this:
>
> > *gadlinfo "http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt 
> <http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt>"*
>
> be sure that you enclosed the http link with double quote.

Thanks Zhonghai, but that is what I'm doing (it works with FWTools).
The problem is somewhere else.

Joaquim



From matt.wilkie at gov.yk.ca  Thu Nov 15 16:56:00 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473C9D0A.1040807@pobox.com>
References: <473C9349.1080904@gov.yk.ca> <473C9D0A.1040807@pobox.com>
Message-ID: <473CC070.6000700@gov.yk.ca>


> Does cpl_port.h exist in /d/src/gdal-trunk/port?  If so, it is quite
> unclear to me why the above compile command wouldn't have found it.

yes that's where it is.

I found my problem: I had a mingw bin directory in my path AND did not 
have gcc installed in cygwin. I thought, but did not verify, I was 
working in a clean shell.

So, now I'm happy to report gdal compiles cleanly out of the box still. 
Now I just have to try and figure out why it seems to missing the xerces 
library.

Sorry for the needless alarm!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu Nov 15 17:17:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get an image by url?
In-Reply-To: <473CBA3C.9000304@ualg.pt>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<473C6B50.6030402@ualg.pt>	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
	<473CBA3C.9000304@ualg.pt>
Message-ID: <473CC563.2060501@pobox.com>

Joaquim Luis wrote:
> Sorry to insist on this but is libcurl support the only condition to 
> access images by url?
> 
> I'm able to access using FWTools but with my build 1.4.3 I get these 
> errors.
> And yes, I checked with the dependency walker that libcurl and zlib1 
> etc... are all  "non red"
> 
> 
> Thanks
> Joaquim
> 
> 
> ERROR 4: `http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not 
> exist in the
> file system,
> and is not recognised as a supported dataset name.
> 
> GDALOpen failed - 4
> `http://kh.google.com/kh?v=99&n=404&t=tqssrrqstt' does not exist in the 
> file sys
> tem,
> and is not recognised as a supported dataset name.

Joaquim,

The other condition is that you need to be using GDAL trunk (aka 1.5).
The HTTP driver does not existing in 1.4.x.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Nov 15 18:02:57 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473CC070.6000700@gov.yk.ca>
References: <473C9349.1080904@gov.yk.ca> <473C9D0A.1040807@pobox.com>
	<473CC070.6000700@gov.yk.ca>
Message-ID: <473CD021.5060808@gov.yk.ca>

> So, now I'm happy to report gdal compiles cleanly out of the box still. 
> Now I just have to try and figure out why it seems to missing the xerces 
> library.

I've verified that xerces-c and xerces-c-devel are installed, but 
configure tells me they are not there. When I search the packages for 
xerces there are some different versions available, do I need a specific 
one?

-------------------------------
((edited for brevity))

$ cyg-apt search xerces
libxerces-c21 - Runtime library for a validating XML parser written in a 
portable subset of C++
libxerces-c22 - Runtime library for a validating XML parser ...
libxerces-c23 - Runtime library for a validating XML parser ...
libxerces-c24 - Runtime library for a validating XML parser ...
libxerces-c25 - Runtime library for a validating XML parser ...
xerces-c - Runtime library for a validating XML parser ...
xerces-c-devel - A validating XML parser written in a portable ...
xerces-c-doc - Documentation for a validating XML parser written ...
-------------------------------


-------------------------------
$ ./configure
...snip...
checking for Xerces C++... requested, but compile or link fails!

g++ -I/usr/include -I/usr/include/xercesc -o conftest conftest.cpp 
-L/usr/lib -lxerces-c -lpthread -lz -ldl

/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: 
cannot find -lxerces-c
collect2: ld returned 1 exit status

cat conftest.cpp
#include <xercesc/util/XercesDefs.hpp>
#include <xercesc/util/PlatformUtils.hpp>
#if (_XERCES_VERSION >= 20200)
     XERCES_CPP_NAMESPACE_USE
#endif
int main() {  XMLPlatformUtils::Initialize(); }
configure: error: Please correct Xerces options, or don't enable Xerces.

mhwilkie@geomatt /d/src/gdal-trunk
$ ls -l /usr/include/xercesc/
total 0
drwxrwx---+ 4 mhwilkie mkgroup-l-d 0 Nov 15 14:49 dom
drwxrwx---+ 3 mhwilkie mkgroup-l-d 0 Nov 15 14:49 framework
drwxrwx---+ 2 mhwilkie mkgroup-l-d 0 Nov 15 14:49 internal
drwxrwx---+ 2 mhwilkie mkgroup-l-d 0 Nov 15 14:49 parsers
drwxrwx---+ 2 mhwilkie mkgroup-l-d 0 Nov 15 14:49 sax
drwxrwx---+ 2 mhwilkie mkgroup-l-d 0 Nov 15 14:49 sax2
drwxrwx---+ 8 mhwilkie mkgroup-l-d 0 Nov 15 14:49 util
drwxrwx---+ 6 mhwilkie mkgroup-l-d 0 Nov 15 14:49 validators
------------------------------------



-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From dev at geoaspects.com  Thu Nov 15 18:12:50 2007
From: dev at geoaspects.com (Geo Aspects Dev)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <473C942D.9080500@pobox.com>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com> <473C8A2E.3090709@loskot.net>
	<473C942D.9080500@pobox.com>
Message-ID: <CB3C9778-82C5-414E-8925-4FCAB5619DCD@geoaspects.com>

Hi,

i was rather hoping this RFC would help me to provide a kind of map  
browser interface
eg pass each file in a directory (or any file list for that matter)  
and have GDAL/OGR driver say which it would be able to open, so i  
could highlight (or make selectable) only those "genuine" map files.
Not sure how that would work, if I needed to provide options/ 
parameters up front?

just my specific perspective on this of course ...

Tim


On 15 Nov 2007, at 19:47, Frank Warmerdam wrote:

> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> I'm not clear on why RFC 10 couldn't be altered to provide a  
>>> standard
>>> mechanism to encode parameters into the datasource name and go  
>>> from there.
>>> The issue of applications which don't know the format apriori is  
>>> not new.
>> I think it might be not easy to find common syntax used across all
>> drivers. For example, if we decided to delimit options with @,  
>> perhaps
>> there are some drivers that use @ token in its native connection  
>> string.
>> IMO, options interface should be defined as common to all drivers,  
>> but
>> not using syntax specific to a driver.
>
> Mateusz,
>
> Yes, that was my intent.  To "package" lists of options in a  
> standard way
> with well understood escaping and quoting rules.  A mechanism that  
> could
> be applied to new drivers, and in some hopefully not-too-disruptive  
> fashion
> applied to old drivers with options in the datasource name.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Thu Nov 15 18:16:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] problems compiling gdal with xerces
In-Reply-To: <f4c7e92f0709051226h5d34c798vc86657e4e5e760e1@mail.gmail.com>
References: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>	<46DEF6E0.3080003@loskot.net>	<f4c7e92f0709051147p6291e364j3cad71f21164903e@mail.gmail.com>	<f4c7e92f0709051225r626a8ce8n6418687653f10d4b@mail.gmail.com>
	<f4c7e92f0709051226h5d34c798vc86657e4e5e760e1@mail.gmail.com>
Message-ID: <473CD341.1040300@loskot.net>

Edward Fialkowski wrote:
> Sorry, I sent from the wrong e-mail address so the list didn't accept it.

Edward,

Sorry I'm replying ridiculously late, just encountered this post.

> [...]
> Unfortunately, my FeatureServer request returns an error:
> 
> An error occurred: libxerces-c.so.27: cannot open shared object file:
> No such file or directory
> 
> Pretty bizarre if you ask me, now I have even less of a clue what to do than
> before!
> 
> Thanks again for looking into that.  If anyone has any random ideas or
> suggestions, I'd be happy to hear them.

It looks like Xerces library is not available for the FeatureServer
service. Check if you see Xerces library in listing printed by

ldconfig -p

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Thu Nov 15 18:19:19 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] Method to get an image by url?
In-Reply-To: <473CC563.2060501@pobox.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<473C5C47.8090000@ualg.pt>	<2E46BC47-E100-4308-AEB8-E2484B5A0642@cfl.rr.com>
	<473C6B50.6030402@ualg.pt>	<3BF0C302-939F-11DC-954B-000A277A733C@light42.com>
	<F82904ED-D056-4BE0-A542-1F4D556417A8@cfl.rr.com>
	<473CBA3C.9000304@ualg.pt> <473CC563.2060501@pobox.com>
Message-ID: <473CD3F7.3060703@ualg.pt>

Frank Warmerdam wrote:
> Joaquim,
>
> The other condition is that you need to be using GDAL trunk (aka 1.5).
> The HTTP driver does not existing in 1.4.x.

Uf, it's working now.
First, since it worked with FWTools 1.2.3 I thought the driver was 
already in 1.4
To get it work with 1.5 I had to workaround some difficulties that may 
worth leave a record of.

-  Firstly, I had previously downloaded the last libcurl-7.15.5 devel no 
SSL. It compiles fine with 1.4.3
   but not with trunk, since it has not a libcurl_imp.lib.
-  Next, downloaded libcurl-7.15.1-msvc-win32-ssl-0.9.8a-zlib-1.2.3.zip 
which contains the named lib
    But it also contains a zlib1.dll which shows up in "orange" on the 
dependency walker of gdal15.dll.
    My past (recent) sufferings with that send me on a search of a new 
zlib1 library. Found one at
    sourceforge that works well.

Joaquim

From mateusz at loskot.net  Thu Nov 15 18:19:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] ELAS not mentioned among GDAL Raster Formats?
In-Reply-To: <46D339D1.8030601@o2.pl>
References: <46C497E1.4040608@o2.pl> <46D339D1.8030601@o2.pl>
Message-ID: <473CD41A.90107@loskot.net>

Maciej Sieczka wrote:
> Hi
> 
> Sorry for being a pain, but I'm asking again:
> 
> Is there a reason why ELAS format is not mentioned on the GDAL Raster
> Formats site [1]? Or maybe just some other name is used which I don't
> know...
> 
> [1] $ gdalinfo --formats | grep ELAS
>   ELAS (rw+): ELAS
> 
> [2]http://www.gdal.org/formats_list.html

Maciek,

While cleaning my inbox from old posts, I've found this one and sorry
for late replay.

I will take care of it. Thanks for reporting

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 18:22:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] gdal compile
In-Reply-To: <BAY117-F35F4CA5D0309C3F0090F8E87D70@phx.gbl>
References: <BAY117-F35F4CA5D0309C3F0090F8E87D70@phx.gbl>
Message-ID: <473CD4C4.3020701@loskot.net>

Ron DeSpain wrote:
> I need to compile gdal 1.3.2 with Kakadu 5.2.6 on an SGI running IRIX. 
> Are there any compiling instructions that I can follow(for unix maybe?).

Ron,

Please, refer to the "External Library Issues" section on this page:

http://trac.osgeo.org/gdal/wiki/BuildHints

and follow the link to JP2KAK.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 18:25:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:09 2007
Subject: [Gdal-dev] defragment files with gdal_translate in parallel
In-Reply-To: <faq4df$rtr$1@sea.gmane.org>
References: <faq4df$rtr$1@sea.gmane.org>
Message-ID: <473CD55D.3080508@loskot.net>

WolfgangZ wrote:
> Hi,
> 
> I'm using gdal_translate to convert a remote dataset to a local one ;-)
> Therefore I use several tiles in parallel. The local files are heavily
> defragmented. I'm not sure if this is a WindowsXP problem or from gdal.
> I'm using FWTools 1.3.5; had anybody the same experience?

I'm inclined to judge this is Windows XP problem.
Perhaps you could try to defragment this heavy fragmentation using one
of commercial software. IMO, the defragmentator avaialbe in the system
is not good, so it's better to use something like diskkeeper etc.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 18:28:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000
	support
In-Reply-To: <a0fd5fa30709100412m64538410o260bb369c4c1703@mail.gmail.com>
References: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>	
	<46DEE855.7000706@loskot.net>	
	<a0fd5fa30709060050xd017085w18d47d1066b2225d@mail.gmail.com>	
	<46E161AA.4030706@loskot.net>
	<a0fd5fa30709100412m64538410o260bb369c4c1703@mail.gmail.com>
Message-ID: <473CD616.3070209@loskot.net>

patrice canonici wrote:
>> Is this a problem for you to not to use libtool when building
>> with Kakadu support?
>>
> 
> no it isn't.
> 
> build is OK, I can read  and write JPEG2000 with MapServer WMS
> I have a problem with WCS, I don't know from where it comes. I have to
> look for  that now.

Patrice,

FYI, this issue has been fixed recently and now it's possible to build
GDAL with Kakadu support with libtool support (--with-libtool).

More information available at this page:

http://trac.osgeo.org/gdal/ticket/1460

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 18:31:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] help for reading sde features by ogr
In-Reply-To: <28049659.1004591189579414189.JavaMail.coremail@bj126app87.126.com>
References: <28049659.1004591189579414189.JavaMail.coremail@bj126app87.126.com>
Message-ID: <473CD6C6.9020509@loskot.net>

chenxuexia wrote:
> hi, any one have some samples about reading features in database(
> configured by ArcSDE ) with OGR_sde ?

Hi,

Check the OGR API tutorial to learn how to:
- connect with a datasource
- access layers
- access features of a layer

http://www.gdal.org/ogr/ogr_apitut.html

In order to know how to connect to the ArcSDE datasource,
check this page where you can learn about connection string:

http://www.gdal.org/ogr/drv_sde.html

These two pages are the only thing what you need to learn how to access OGR
datasoruce and ArcSDE.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ealpert at digitalglobe.com  Thu Nov 15 18:50:55 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Some issues with GDAL WCS support
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233018557C2@COMAIL01.digitalglobe.com>

 

 

I've looked at both stable and trunk and the problem is the same.
Furthermore, it looks like the WCS server gdal uses to test with does
not provide a complete DescribeCoverage.

 

http://geodata.telascience.org/cgi-bin/mapserv_dem?REQUEST=DescribeCover
age&Coverage=srtmplus_raw&SERVICE=WCS&VERSION=1.0.0

 

Note that <rangeSet> is undefined. 

 

Anyhow I have a WCS service which does not have a set a default band
identifier so when GDAL tries to do a GetCoverage in
WCSDataset::EstablishRasterDetails() it doesn't provide a band=
parameter resulting in the following service exception:

 

<ServiceException code="MissingParameterValue" locator="Request does not
include BAND value, and the service instance did not declare any default
value for that parameter. "></ServiceException>

 

 

I think GDAL needs to parse the DescribeCoverage and use the rangeSet to
set up the list of bands in the WCS offering.

 

I did a real quick and dirty test and inserted the band identifiers into
all the GetCoverage url constructions and GDAL worked with my WCS.  Of
course this would be simpler if my WCS had default bands but it doesn't.

 

Got to catch a bus now but I think this should probably be a bug report.

 

-e

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071115/5d4804d5/attachment.html
From mateusz at loskot.net  Thu Nov 15 19:01:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Problem with gdal_translate
In-Reply-To: <5F827424D35BD311BBA300902798C054053729BA@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C054053729BA@ct13-mel.cete-mediterranee.i2>
Message-ID: <473CDDC7.3010508@loskot.net>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> I have already explained the problem with gdalwarp using a big ECW (7Go).
> I've tried to translate this big ECW to HFA using this command :
> 
> "gdal_translate -of HFA -a_srs EPSG:27572 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-LA2E-C10.img"
> Input file size is 280000, 180000
> 0...10...20...30.ERROR 2: CPLMalloc(): Out of memory allocating 49227500 bytes.

Try to use increase memory use with GDAL_CACHEMAX, for example:

--config GDAL_CACHEMAX 512

See --config option explained here

http://www.gdal.org/gdal_utilities.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Nov 15 19:05:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473CD021.5060808@gov.yk.ca>
References: <473C9349.1080904@gov.yk.ca>
	<473C9D0A.1040807@pobox.com>	<473CC070.6000700@gov.yk.ca>
	<473CD021.5060808@gov.yk.ca>
Message-ID: <473CDED3.9060809@loskot.net>

Matt Wilkie wrote:
>> So, now I'm happy to report gdal compiles cleanly out of the box
>> still. Now I just have to try and figure out why it seems to missing
>> the xerces library.
> 
> I've verified that xerces-c and xerces-c-devel are installed, but
> configure tells me they are not there. When I search the packages for
> xerces there are some different versions available, do I need a specific
> one?

Perhaps you have it installed in different location than:

/usr with /usr/include/xercesc
or
/usr/local with /usr/local/include/xercesc

You can try this:

./configure --with-xerces=yes \
   --with-xerces-inc=/path/to/headers \
   --with-xerces-lib="-L/path/to/libs -lxerces-c -lpthread"


For example, I have installed Xerces under

/usr/local/xerces-2.8.0
with
/usr/local/xerces-2.8.0/include
/usr/local/xerces-2.8.0/lib

so I configure it this way:

./configure --with-xerces=yes \
   --with-xerces-inc=/usr/local/xerces-2.8.0/include \
   --with-xerces-lib="-L/usr/local/xerces-2.8.0/lib -lxerces-c -lpthread"


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From philippe at cowpig.ca  Thu Nov 15 21:55:32 2007
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Enhancements to Polarimetric SAR drivers
Message-ID: <20071116025532.GA20748@cowpig.ca>

Folks,

I've put together a list of some fairly simple enhancements I'm going to
make to some SAR file format drivers. In particular, the goal is to make
working with Polarimetric SAR data with GDAL a lot easier.

To do this, I'm going to modify a handful of drivers to provide a new
metadata item, called MATRIX_REPRESENTATION, as well as standardize on a
set of particular values for the POLARIMETRIC_INTERP metadata item for
the bands.

I've put together a wiki page on this topic that can be found at
	http://trac.osgeo.org/gdal/wiki/PolarimetricSAR
Feel free to add drivers to the list (in case I've missed any), and ideas 
you might have for this project; I'm always happy to get input.

Regards,
Phil Vachon

From matt.wilkie at gov.yk.ca  Fri Nov 16 11:34:01 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <473CDED3.9060809@loskot.net>
References: <473C9349.1080904@gov.yk.ca>
	<473C9D0A.1040807@pobox.com>	<473CC070.6000700@gov.yk.ca>
	<473CD021.5060808@gov.yk.ca> <473CDED3.9060809@loskot.net>
Message-ID: <473DC679.20501@gov.yk.ca>

> Perhaps you have it installed in different location than:
> 
> /usr with /usr/include/xercesc
> or
> /usr/local with /usr/local/include/xercesc

xerces files are located in /usr/include/xercesc and a single lib file: 
/usr/lib/libxerces-c25.dll.a. Full listing is attached.

There is a note in /usr/share/doc/Cygwin/xerces-c-2.5.0.README which 
says "Also, since the library exposes C++ classes, then applications 
using the library should be built with the same version compiler, 
otherwise there will be link errors." Might this be what is happening?

Is there anyone else who can try a cygwin compile? I'd like to determine 
whether it's my environment which is not set right or not.

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
-------------- next part --------------
/usr/include/xercesc
/usr/include/xercesc/dom
/usr/include/xercesc/dom/deprecated
/usr/include/xercesc/dom/deprecated/DOM.hpp
/usr/include/xercesc/dom/deprecated/DomMemDebug.hpp
/usr/include/xercesc/dom/deprecated/DOMParser.hpp
/usr/include/xercesc/dom/deprecated/DOMString.hpp
/usr/include/xercesc/dom/deprecated/DOM_Attr.hpp
/usr/include/xercesc/dom/deprecated/DOM_CDATASection.hpp
/usr/include/xercesc/dom/deprecated/DOM_CharacterData.hpp
/usr/include/xercesc/dom/deprecated/DOM_Comment.hpp
/usr/include/xercesc/dom/deprecated/DOM_Document.hpp
/usr/include/xercesc/dom/deprecated/DOM_DocumentFragment.hpp
/usr/include/xercesc/dom/deprecated/DOM_DocumentType.hpp
/usr/include/xercesc/dom/deprecated/DOM_DOMException.hpp
/usr/include/xercesc/dom/deprecated/DOM_DOMImplementation.hpp
/usr/include/xercesc/dom/deprecated/DOM_Element.hpp
/usr/include/xercesc/dom/deprecated/DOM_Entity.hpp
/usr/include/xercesc/dom/deprecated/DOM_EntityReference.hpp
/usr/include/xercesc/dom/deprecated/DOM_NamedNodeMap.hpp
/usr/include/xercesc/dom/deprecated/DOM_Node.hpp
/usr/include/xercesc/dom/deprecated/DOM_NodeFilter.hpp
/usr/include/xercesc/dom/deprecated/DOM_NodeIterator.hpp
/usr/include/xercesc/dom/deprecated/DOM_NodeList.hpp
/usr/include/xercesc/dom/deprecated/DOM_Notation.hpp
/usr/include/xercesc/dom/deprecated/DOM_ProcessingInstruction.hpp
/usr/include/xercesc/dom/deprecated/DOM_Range.hpp
/usr/include/xercesc/dom/deprecated/DOM_RangeException.hpp
/usr/include/xercesc/dom/deprecated/DOM_Text.hpp
/usr/include/xercesc/dom/deprecated/DOM_TreeWalker.hpp
/usr/include/xercesc/dom/deprecated/DOM_XMLDecl.hpp
/usr/include/xercesc/dom/DOM.hpp
/usr/include/xercesc/dom/DOMAttr.hpp
/usr/include/xercesc/dom/DOMBuilder.hpp
/usr/include/xercesc/dom/DOMCDATASection.hpp
/usr/include/xercesc/dom/DOMCharacterData.hpp
/usr/include/xercesc/dom/DOMComment.hpp
/usr/include/xercesc/dom/DOMConfiguration.hpp
/usr/include/xercesc/dom/DOMDocument.hpp
/usr/include/xercesc/dom/DOMDocumentFragment.hpp
/usr/include/xercesc/dom/DOMDocumentRange.hpp
/usr/include/xercesc/dom/DOMDocumentTraversal.hpp
/usr/include/xercesc/dom/DOMDocumentType.hpp
/usr/include/xercesc/dom/DOMElement.hpp
/usr/include/xercesc/dom/DOMEntity.hpp
/usr/include/xercesc/dom/DOMEntityReference.hpp
/usr/include/xercesc/dom/DOMEntityResolver.hpp
/usr/include/xercesc/dom/DOMError.hpp
/usr/include/xercesc/dom/DOMErrorHandler.hpp
/usr/include/xercesc/dom/DOMException.hpp
/usr/include/xercesc/dom/DOMImplementation.hpp
/usr/include/xercesc/dom/DOMImplementationLS.hpp
/usr/include/xercesc/dom/DOMImplementationRegistry.hpp
/usr/include/xercesc/dom/DOMImplementationSource.hpp
/usr/include/xercesc/dom/DOMInputSource.hpp
/usr/include/xercesc/dom/DOMLocator.hpp
/usr/include/xercesc/dom/DOMNamedNodeMap.hpp
/usr/include/xercesc/dom/DOMNode.hpp
/usr/include/xercesc/dom/DOMNodeFilter.hpp
/usr/include/xercesc/dom/DOMNodeIterator.hpp
/usr/include/xercesc/dom/DOMNodeList.hpp
/usr/include/xercesc/dom/DOMNotation.hpp
/usr/include/xercesc/dom/DOMProcessingInstruction.hpp
/usr/include/xercesc/dom/DOMRange.hpp
/usr/include/xercesc/dom/DOMRangeException.hpp
/usr/include/xercesc/dom/DOMText.hpp
/usr/include/xercesc/dom/DOMTreeWalker.hpp
/usr/include/xercesc/dom/DOMTypeInfo.hpp
/usr/include/xercesc/dom/DOMUserDataHandler.hpp
/usr/include/xercesc/dom/DOMWriter.hpp
/usr/include/xercesc/dom/DOMWriterFilter.hpp
/usr/include/xercesc/dom/DOMXPathEvaluator.hpp
/usr/include/xercesc/dom/DOMXPathException.hpp
/usr/include/xercesc/dom/DOMXPathExpression.hpp
/usr/include/xercesc/dom/DOMXPathNamespace.hpp
/usr/include/xercesc/dom/DOMXPathNSResolver.hpp
/usr/include/xercesc/dom/DOMXPathResult.hpp
/usr/include/xercesc/dom/impl
/usr/include/xercesc/dom/impl/DOMDeepNodeListPool.c
/usr/include/xercesc/dom/StDOMNode.hpp
/usr/include/xercesc/framework
/usr/include/xercesc/framework/BinOutputStream.hpp
/usr/include/xercesc/framework/LocalFileFormatTarget.hpp
/usr/include/xercesc/framework/LocalFileInputSource.hpp
/usr/include/xercesc/framework/MemBufFormatTarget.hpp
/usr/include/xercesc/framework/MemBufInputSource.hpp
/usr/include/xercesc/framework/MemoryManager.hpp
/usr/include/xercesc/framework/psvi
/usr/include/xercesc/framework/psvi/PSVIAttribute.hpp
/usr/include/xercesc/framework/psvi/PSVIAttributeList.hpp
/usr/include/xercesc/framework/psvi/PSVIElement.hpp
/usr/include/xercesc/framework/psvi/PSVIHandler.hpp
/usr/include/xercesc/framework/psvi/PSVIItem.hpp
/usr/include/xercesc/framework/psvi/XSAnnotation.hpp
/usr/include/xercesc/framework/psvi/XSAttributeDeclaration.hpp
/usr/include/xercesc/framework/psvi/XSAttributeGroupDefinition.hpp
/usr/include/xercesc/framework/psvi/XSAttributeUse.hpp
/usr/include/xercesc/framework/psvi/XSComplexTypeDefinition.hpp
/usr/include/xercesc/framework/psvi/XSConstants.hpp
/usr/include/xercesc/framework/psvi/XSElementDeclaration.hpp
/usr/include/xercesc/framework/psvi/XSFacet.hpp
/usr/include/xercesc/framework/psvi/XSIDCDefinition.hpp
/usr/include/xercesc/framework/psvi/XSModel.hpp
/usr/include/xercesc/framework/psvi/XSModelGroup.hpp
/usr/include/xercesc/framework/psvi/XSModelGroupDefinition.hpp
/usr/include/xercesc/framework/psvi/XSMultiValueFacet.hpp
/usr/include/xercesc/framework/psvi/XSNamedMap.c
/usr/include/xercesc/framework/psvi/XSNamedMap.hpp
/usr/include/xercesc/framework/psvi/XSNamespaceItem.hpp
/usr/include/xercesc/framework/psvi/XSNotationDeclaration.hpp
/usr/include/xercesc/framework/psvi/XSObject.hpp
/usr/include/xercesc/framework/psvi/XSParticle.hpp
/usr/include/xercesc/framework/psvi/XSSimpleTypeDefinition.hpp
/usr/include/xercesc/framework/psvi/XSTypeDefinition.hpp
/usr/include/xercesc/framework/psvi/XSWildcard.hpp
/usr/include/xercesc/framework/StdInInputSource.hpp
/usr/include/xercesc/framework/StdOutFormatTarget.hpp
/usr/include/xercesc/framework/URLInputSource.hpp
/usr/include/xercesc/framework/ValidationContext.hpp
/usr/include/xercesc/framework/Wrapper4DOMInputSource.hpp
/usr/include/xercesc/framework/Wrapper4InputSource.hpp
/usr/include/xercesc/framework/XMLAttDef.hpp
/usr/include/xercesc/framework/XMLAttDefList.hpp
/usr/include/xercesc/framework/XMLAttr.hpp
/usr/include/xercesc/framework/XMLBuffer.hpp
/usr/include/xercesc/framework/XMLBufferMgr.hpp
/usr/include/xercesc/framework/XMLContentModel.hpp
/usr/include/xercesc/framework/XMLDocumentHandler.hpp
/usr/include/xercesc/framework/XMLDTDDescription.hpp
/usr/include/xercesc/framework/XMLElementDecl.hpp
/usr/include/xercesc/framework/XMLEntityDecl.hpp
/usr/include/xercesc/framework/XMLEntityHandler.hpp
/usr/include/xercesc/framework/XMLErrorCodes.hpp
/usr/include/xercesc/framework/XMLErrorReporter.hpp
/usr/include/xercesc/framework/XMLFormatter.hpp
/usr/include/xercesc/framework/XMLGrammarDescription.hpp
/usr/include/xercesc/framework/XMLGrammarPool.hpp
/usr/include/xercesc/framework/XMLNotationDecl.hpp
/usr/include/xercesc/framework/XMLPScanToken.hpp
/usr/include/xercesc/framework/XMLRecognizer.hpp
/usr/include/xercesc/framework/XMLRefInfo.hpp
/usr/include/xercesc/framework/XMLSchemaDescription.hpp
/usr/include/xercesc/framework/XMLValidator.hpp
/usr/include/xercesc/framework/XMLValidityCodes.hpp
/usr/include/xercesc/internal
/usr/include/xercesc/internal/BinFileOutputStream.hpp
/usr/include/xercesc/internal/BinMemOutputStream.hpp
/usr/include/xercesc/internal/CharTypeTables.hpp
/usr/include/xercesc/internal/DGXMLScanner.hpp
/usr/include/xercesc/internal/ElemStack.hpp
/usr/include/xercesc/internal/EndOfEntityException.hpp
/usr/include/xercesc/internal/IANAEncodings.hpp
/usr/include/xercesc/internal/IGXMLScanner.hpp
/usr/include/xercesc/internal/MemoryManagerArrayImpl.hpp
/usr/include/xercesc/internal/MemoryManagerImpl.hpp
/usr/include/xercesc/internal/ReaderMgr.hpp
/usr/include/xercesc/internal/SGXMLScanner.hpp
/usr/include/xercesc/internal/ValidationContextImpl.hpp
/usr/include/xercesc/internal/VecAttributesImpl.hpp
/usr/include/xercesc/internal/VecAttrListImpl.hpp
/usr/include/xercesc/internal/WFXMLScanner.hpp
/usr/include/xercesc/internal/XMLGrammarPoolImpl.hpp
/usr/include/xercesc/internal/XMLInternalErrorHandler.hpp
/usr/include/xercesc/internal/XMLReader.hpp
/usr/include/xercesc/internal/XMLScanner.hpp
/usr/include/xercesc/internal/XMLScannerResolver.hpp
/usr/include/xercesc/internal/XObjectComparator.hpp
/usr/include/xercesc/internal/XProtoType.hpp
/usr/include/xercesc/internal/XSerializable.hpp
/usr/include/xercesc/internal/XSerializationException.hpp
/usr/include/xercesc/internal/XSerializeEngine.hpp
/usr/include/xercesc/internal/XSObjectFactory.hpp
/usr/include/xercesc/internal/XTemplateComparator.hpp
/usr/include/xercesc/internal/XTemplateSerializer.hpp
/usr/include/xercesc/parsers
/usr/include/xercesc/parsers/AbstractDOMParser.hpp
/usr/include/xercesc/parsers/DOMBuilderImpl.hpp
/usr/include/xercesc/parsers/SAX2XMLReaderImpl.hpp
/usr/include/xercesc/parsers/SAXParser.hpp
/usr/include/xercesc/parsers/XercesDOMParser.hpp
/usr/include/xercesc/sax
/usr/include/xercesc/sax/AttributeList.hpp
/usr/include/xercesc/sax/DocumentHandler.hpp
/usr/include/xercesc/sax/DTDHandler.hpp
/usr/include/xercesc/sax/EntityResolver.hpp
/usr/include/xercesc/sax/ErrorHandler.hpp
/usr/include/xercesc/sax/HandlerBase.hpp
/usr/include/xercesc/sax/InputSource.hpp
/usr/include/xercesc/sax/Locator.hpp
/usr/include/xercesc/sax/Parser.hpp
/usr/include/xercesc/sax/SAXException.hpp
/usr/include/xercesc/sax/SAXParseException.hpp
/usr/include/xercesc/sax2
/usr/include/xercesc/sax2/Attributes.hpp
/usr/include/xercesc/sax2/ContentHandler.hpp
/usr/include/xercesc/sax2/DeclHandler.hpp
/usr/include/xercesc/sax2/DefaultHandler.hpp
/usr/include/xercesc/sax2/LexicalHandler.hpp
/usr/include/xercesc/sax2/SAX2XMLReader.hpp
/usr/include/xercesc/sax2/XMLReaderFactory.hpp
/usr/include/xercesc/util
/usr/include/xercesc/util/ArrayIndexOutOfBoundsException.hpp
/usr/include/xercesc/util/AutoSense.hpp
/usr/include/xercesc/util/Base64.hpp
/usr/include/xercesc/util/BaseRefVectorOf.c
/usr/include/xercesc/util/BaseRefVectorOf.hpp
/usr/include/xercesc/util/BinFileInputStream.hpp
/usr/include/xercesc/util/BinInputStream.hpp
/usr/include/xercesc/util/BinMemInputStream.hpp
/usr/include/xercesc/util/BitOps.hpp
/usr/include/xercesc/util/BitSet.hpp
/usr/include/xercesc/util/Compilers
/usr/include/xercesc/util/Compilers/BorlandCDefs.hpp
/usr/include/xercesc/util/Compilers/CodeWarriorDefs.hpp
/usr/include/xercesc/util/Compilers/CSetDefs.hpp
/usr/include/xercesc/util/Compilers/DECCXXDefs.hpp
/usr/include/xercesc/util/Compilers/GCCDefs.hpp
/usr/include/xercesc/util/Compilers/HPCCDefs.hpp
/usr/include/xercesc/util/Compilers/IBMVAOS2Defs.hpp
/usr/include/xercesc/util/Compilers/IBMVAW32Defs.hpp
/usr/include/xercesc/util/Compilers/MIPSproDefs.hpp
/usr/include/xercesc/util/Compilers/MVSCPPDefs.hpp
/usr/include/xercesc/util/Compilers/OS400SetDefs.hpp
/usr/include/xercesc/util/Compilers/PTXCCDefs.hpp
/usr/include/xercesc/util/Compilers/QCCDefs.hpp
/usr/include/xercesc/util/Compilers/SCOCCDefs.hpp
/usr/include/xercesc/util/Compilers/SunCCDefs.hpp
/usr/include/xercesc/util/Compilers/SunKaiDefs.hpp
/usr/include/xercesc/util/Compilers/TandemCCDefs.hpp
/usr/include/xercesc/util/Compilers/VCPPDefs.hpp
/usr/include/xercesc/util/CountedPointer.c
/usr/include/xercesc/util/CountedPointer.hpp
/usr/include/xercesc/util/DefaultPanicHandler.hpp
/usr/include/xercesc/util/EmptyStackException.hpp
/usr/include/xercesc/util/EncodingValidator.hpp
/usr/include/xercesc/util/FlagJanitor.c
/usr/include/xercesc/util/FlagJanitor.hpp
/usr/include/xercesc/util/HashBase.hpp
/usr/include/xercesc/util/HashCMStateSet.hpp
/usr/include/xercesc/util/HashPtr.hpp
/usr/include/xercesc/util/HashXMLCh.hpp
/usr/include/xercesc/util/HexBin.hpp
/usr/include/xercesc/util/IllegalArgumentException.hpp
/usr/include/xercesc/util/InvalidCastException.hpp
/usr/include/xercesc/util/IOException.hpp
/usr/include/xercesc/util/Janitor.c
/usr/include/xercesc/util/Janitor.hpp
/usr/include/xercesc/util/KeyRefPair.c
/usr/include/xercesc/util/KeyRefPair.hpp
/usr/include/xercesc/util/KeyValuePair.c
/usr/include/xercesc/util/KeyValuePair.hpp
/usr/include/xercesc/util/KVStringPair.hpp
/usr/include/xercesc/util/LogicalPath.c
/usr/include/xercesc/util/MsgLoaders
/usr/include/xercesc/util/MsgLoaders/InMemory
/usr/include/xercesc/util/MsgLoaders/InMemory/InMemMsgLoader.hpp
/usr/include/xercesc/util/MsgLoaders/InMemory/XercesMessages_en_US.hpp
/usr/include/xercesc/util/Mutexes.hpp
/usr/include/xercesc/util/NameIdPool.c
/usr/include/xercesc/util/NameIdPool.hpp
/usr/include/xercesc/util/NetAccessors
/usr/include/xercesc/util/NetAccessors/Socket
/usr/include/xercesc/util/NetAccessors/Socket/SocketNetAccessor.hpp
/usr/include/xercesc/util/NetAccessors/Socket/UnixHTTPURLInputStream.hpp
/usr/include/xercesc/util/NoSuchElementException.hpp
/usr/include/xercesc/util/NullPointerException.hpp
/usr/include/xercesc/util/NumberFormatException.hpp
/usr/include/xercesc/util/OutOfMemoryException.hpp
/usr/include/xercesc/util/PanicHandler.hpp
/usr/include/xercesc/util/ParseException.hpp
/usr/include/xercesc/util/Platforms
/usr/include/xercesc/util/Platforms/Win32
/usr/include/xercesc/util/Platforms/Win32/Win32Defs.hpp
/usr/include/xercesc/util/PlatformUtils.hpp
/usr/include/xercesc/util/QName.hpp
/usr/include/xercesc/util/RefArrayOf.c
/usr/include/xercesc/util/RefArrayOf.hpp
/usr/include/xercesc/util/RefArrayVectorOf.c
/usr/include/xercesc/util/RefArrayVectorOf.hpp
/usr/include/xercesc/util/RefHash2KeysTableOf.c
/usr/include/xercesc/util/RefHash2KeysTableOf.hpp
/usr/include/xercesc/util/RefHash3KeysIdPool.c
/usr/include/xercesc/util/RefHash3KeysIdPool.hpp
/usr/include/xercesc/util/RefHashTableOf.c
/usr/include/xercesc/util/RefHashTableOf.hpp
/usr/include/xercesc/util/RefStackOf.c
/usr/include/xercesc/util/RefStackOf.hpp
/usr/include/xercesc/util/RefVectorOf.c
/usr/include/xercesc/util/RefVectorOf.hpp
/usr/include/xercesc/util/regx
/usr/include/xercesc/util/regx/ASCIIRangeFactory.hpp
/usr/include/xercesc/util/regx/BlockRangeFactory.hpp
/usr/include/xercesc/util/regx/BMPattern.hpp
/usr/include/xercesc/util/regx/CharToken.hpp
/usr/include/xercesc/util/regx/ClosureToken.hpp
/usr/include/xercesc/util/regx/ConcatToken.hpp
/usr/include/xercesc/util/regx/ConditionToken.hpp
/usr/include/xercesc/util/regx/Match.hpp
/usr/include/xercesc/util/regx/ModifierToken.hpp
/usr/include/xercesc/util/regx/Op.hpp
/usr/include/xercesc/util/regx/OpFactory.hpp
/usr/include/xercesc/util/regx/ParenToken.hpp
/usr/include/xercesc/util/regx/ParserForXMLSchema.hpp
/usr/include/xercesc/util/regx/RangeFactory.hpp
/usr/include/xercesc/util/regx/RangeToken.hpp
/usr/include/xercesc/util/regx/RangeTokenMap.hpp
/usr/include/xercesc/util/regx/RegularExpression.hpp
/usr/include/xercesc/util/regx/RegxDefs.hpp
/usr/include/xercesc/util/regx/RegxParser.hpp
/usr/include/xercesc/util/regx/RegxUtil.hpp
/usr/include/xercesc/util/regx/StringToken.hpp
/usr/include/xercesc/util/regx/Token.hpp
/usr/include/xercesc/util/regx/TokenFactory.hpp
/usr/include/xercesc/util/regx/TokenInc.hpp
/usr/include/xercesc/util/regx/UniCharTable.hpp
/usr/include/xercesc/util/regx/UnicodeRangeFactory.hpp
/usr/include/xercesc/util/regx/UnionToken.hpp
/usr/include/xercesc/util/regx/XMLRangeFactory.hpp
/usr/include/xercesc/util/regx/XMLUniCharacter.hpp
/usr/include/xercesc/util/RuntimeException.hpp
/usr/include/xercesc/util/SchemaDateTimeException.hpp
/usr/include/xercesc/util/SecurityManager.hpp
/usr/include/xercesc/util/StringPool.hpp
/usr/include/xercesc/util/SynchronizedStringPool.hpp
/usr/include/xercesc/util/Transcoders
/usr/include/xercesc/util/Transcoders/Cygwin
/usr/include/xercesc/util/Transcoders/Cygwin/CygwinTransService.hpp
/usr/include/xercesc/util/TranscodingException.hpp
/usr/include/xercesc/util/TransENameMap.c
/usr/include/xercesc/util/TransENameMap.hpp
/usr/include/xercesc/util/TransService.hpp
/usr/include/xercesc/util/UnexpectedEOFException.hpp
/usr/include/xercesc/util/UnsupportedEncodingException.hpp
/usr/include/xercesc/util/UTFDataFormatException.hpp
/usr/include/xercesc/util/ValueArrayOf.c
/usr/include/xercesc/util/ValueArrayOf.hpp
/usr/include/xercesc/util/ValueHashTableOf.c
/usr/include/xercesc/util/ValueHashTableOf.hpp
/usr/include/xercesc/util/ValueStackOf.c
/usr/include/xercesc/util/ValueStackOf.hpp
/usr/include/xercesc/util/ValueVectorOf.c
/usr/include/xercesc/util/ValueVectorOf.hpp
/usr/include/xercesc/util/XercesDefs.hpp
/usr/include/xercesc/util/XercesVersion.hpp
/usr/include/xercesc/util/XMemory.hpp
/usr/include/xercesc/util/XML256TableTranscoder.hpp
/usr/include/xercesc/util/XML88591Transcoder.hpp
/usr/include/xercesc/util/XMLAbstractDoubleFloat.hpp
/usr/include/xercesc/util/XMLASCIITranscoder.hpp
/usr/include/xercesc/util/XMLBigDecimal.hpp
/usr/include/xercesc/util/XMLBigInteger.hpp
/usr/include/xercesc/util/XMLChar.hpp
/usr/include/xercesc/util/XMLChTranscoder.hpp
/usr/include/xercesc/util/XMLDateTime.hpp
/usr/include/xercesc/util/XMLDeleterFor.c
/usr/include/xercesc/util/XMLDeleterFor.hpp
/usr/include/xercesc/util/XMLDOMMsg.hpp
/usr/include/xercesc/util/XMLDouble.hpp
/usr/include/xercesc/util/XMLEBCDICTranscoder.hpp
/usr/include/xercesc/util/XMLEntityResolver.hpp
/usr/include/xercesc/util/XMLEnumerator.hpp
/usr/include/xercesc/util/XMLException.hpp
/usr/include/xercesc/util/XMLExceptMsgs.hpp
/usr/include/xercesc/util/XMLFloat.hpp
/usr/include/xercesc/util/XMLIBM1047Transcoder.hpp
/usr/include/xercesc/util/XMLIBM1140Transcoder.hpp
/usr/include/xercesc/util/XMLInteger.hpp
/usr/include/xercesc/util/XMLMsgLoader.hpp
/usr/include/xercesc/util/XMLNetAccessor.hpp
/usr/include/xercesc/util/XMLNumber.hpp
/usr/include/xercesc/util/XMLRegisterCleanup.hpp
/usr/include/xercesc/util/XMLResourceIdentifier.hpp
/usr/include/xercesc/util/XMLString.hpp
/usr/include/xercesc/util/XMLStringTokenizer.hpp
/usr/include/xercesc/util/XMLUCS4Transcoder.hpp
/usr/include/xercesc/util/XMLUni.hpp
/usr/include/xercesc/util/XMLUniDefs.hpp
/usr/include/xercesc/util/XMLUri.hpp
/usr/include/xercesc/util/XMLURL.hpp
/usr/include/xercesc/util/XMLUTF16Transcoder.hpp
/usr/include/xercesc/util/XMLUTF8Transcoder.hpp
/usr/include/xercesc/util/XMLWin1252Transcoder.hpp
/usr/include/xercesc/validators
/usr/include/xercesc/validators/common
/usr/include/xercesc/validators/common/AllContentModel.hpp
/usr/include/xercesc/validators/common/CMAny.hpp
/usr/include/xercesc/validators/common/CMBinaryOp.hpp
/usr/include/xercesc/validators/common/CMLeaf.hpp
/usr/include/xercesc/validators/common/CMNode.hpp
/usr/include/xercesc/validators/common/CMStateSet.hpp
/usr/include/xercesc/validators/common/CMUnaryOp.hpp
/usr/include/xercesc/validators/common/ContentLeafNameTypeVector.hpp
/usr/include/xercesc/validators/common/ContentSpecNode.hpp
/usr/include/xercesc/validators/common/DFAContentModel.hpp
/usr/include/xercesc/validators/common/Grammar.hpp
/usr/include/xercesc/validators/common/GrammarResolver.hpp
/usr/include/xercesc/validators/common/MixedContentModel.hpp
/usr/include/xercesc/validators/common/SimpleContentModel.hpp
/usr/include/xercesc/validators/datatype
/usr/include/xercesc/validators/datatype/AbstractNumericFacetValidator.hpp
/usr/include/xercesc/validators/datatype/AbstractNumericValidator.hpp
/usr/include/xercesc/validators/datatype/AbstractStringValidator.hpp
/usr/include/xercesc/validators/datatype/AnySimpleTypeDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/AnyURIDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/Base64BinaryDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/BooleanDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DatatypeValidatorFactory.hpp
/usr/include/xercesc/validators/datatype/DateDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DateTimeDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DateTimeValidator.hpp
/usr/include/xercesc/validators/datatype/DayDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DecimalDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DoubleDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/DurationDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/ENTITYDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/FloatDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/HexBinaryDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/IDDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/IDREFDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/InvalidDatatypeFacetException.hpp
/usr/include/xercesc/validators/datatype/InvalidDatatypeValueException.hpp
/usr/include/xercesc/validators/datatype/ListDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/MonthDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/MonthDayDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/NameDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/NCNameDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/NOTATIONDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/QNameDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/StringDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/TimeDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/UnionDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/XMLCanRepGroup.hpp
/usr/include/xercesc/validators/datatype/YearDatatypeValidator.hpp
/usr/include/xercesc/validators/datatype/YearMonthDatatypeValidator.hpp
/usr/include/xercesc/validators/DTD
/usr/include/xercesc/validators/DTD/DocTypeHandler.hpp
/usr/include/xercesc/validators/DTD/DTDAttDef.hpp
/usr/include/xercesc/validators/DTD/DTDAttDefList.hpp
/usr/include/xercesc/validators/DTD/DTDElementDecl.hpp
/usr/include/xercesc/validators/DTD/DTDEntityDecl.hpp
/usr/include/xercesc/validators/DTD/DTDGrammar.hpp
/usr/include/xercesc/validators/DTD/DTDScanner.hpp
/usr/include/xercesc/validators/DTD/DTDValidator.hpp
/usr/include/xercesc/validators/DTD/XMLDTDDescriptionImpl.hpp
/usr/include/xercesc/validators/schema
/usr/include/xercesc/validators/schema/ComplexTypeInfo.hpp
/usr/include/xercesc/validators/schema/GeneralAttributeCheck.hpp
/usr/include/xercesc/validators/schema/identity
/usr/include/xercesc/validators/schema/identity/FieldActivator.hpp
/usr/include/xercesc/validators/schema/identity/FieldValueMap.hpp
/usr/include/xercesc/validators/schema/identity/IC_Field.hpp
/usr/include/xercesc/validators/schema/identity/IC_Key.hpp
/usr/include/xercesc/validators/schema/identity/IC_KeyRef.hpp
/usr/include/xercesc/validators/schema/identity/IC_Selector.hpp
/usr/include/xercesc/validators/schema/identity/IC_Unique.hpp
/usr/include/xercesc/validators/schema/identity/IdentityConstraint.hpp
/usr/include/xercesc/validators/schema/identity/ValueStore.hpp
/usr/include/xercesc/validators/schema/identity/ValueStoreCache.hpp
/usr/include/xercesc/validators/schema/identity/XercesXPath.hpp
/usr/include/xercesc/validators/schema/identity/XPathException.hpp
/usr/include/xercesc/validators/schema/identity/XPathMatcher.hpp
/usr/include/xercesc/validators/schema/identity/XPathMatcherStack.hpp
/usr/include/xercesc/validators/schema/identity/XPathSymbols.hpp
/usr/include/xercesc/validators/schema/NamespaceScope.hpp
/usr/include/xercesc/validators/schema/PSVIDefs.hpp
/usr/include/xercesc/validators/schema/SchemaAttDef.hpp
/usr/include/xercesc/validators/schema/SchemaAttDefList.hpp
/usr/include/xercesc/validators/schema/SchemaElementDecl.hpp
/usr/include/xercesc/validators/schema/SchemaGrammar.hpp
/usr/include/xercesc/validators/schema/SchemaInfo.hpp
/usr/include/xercesc/validators/schema/SchemaSymbols.hpp
/usr/include/xercesc/validators/schema/SchemaValidator.hpp
/usr/include/xercesc/validators/schema/SubstitutionGroupComparator.hpp
/usr/include/xercesc/validators/schema/TraverseSchema.hpp
/usr/include/xercesc/validators/schema/XercesAttGroupInfo.hpp
/usr/include/xercesc/validators/schema/XercesElementWildcard.hpp
/usr/include/xercesc/validators/schema/XercesGroupInfo.hpp
/usr/include/xercesc/validators/schema/XMLSchemaDescriptionImpl.hpp
/usr/include/xercesc/validators/schema/XSDDOMParser.hpp
/usr/include/xercesc/validators/schema/XSDErrorReporter.hpp
/usr/include/xercesc/validators/schema/XSDLocator.hpp
/usr/include/xercesc/validators/schema/XUtil.hpp
/usr/share/doc/Cygwin/xerces-c-2.5.0.README
/usr/share/doc/xerces-c-2.5.0
/usr/share/doc/xerces-c-2.5.0/credits.txt
/usr/share/doc/xerces-c-2.5.0/LICENSE.txt
/usr/bin/cygxerces-c25.dll
/usr/lib/libxerces-c25.dll.a
From ealpert at digitalglobe.com  Fri Nov 16 11:59:40 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Some issues with GDAL WCS support
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233018557C2@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233018557C2@COMAIL01.digitalglobe.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233018F02A3@COMAIL01.digitalglobe.com>

Wow this took over 12 hours to get to the gdal-dev list. Anyhow, I've
tried the
<DescribeCoverageExtra>BAND=band1,band2,band3</DescribeCoverageExtra>
but that does not appear to get applied in the EstablishRasterDetails()
method.

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Thursday, November 15, 2007 4:51 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Some issues with GDAL WCS support

 

 

 

I've looked at both stable and trunk and the problem is the same.
Furthermore, it looks like the WCS server gdal uses to test with does
not provide a complete DescribeCoverage.

 

http://geodata.telascience.org/cgi-bin/mapserv_dem?REQUEST=DescribeCover
age&Coverage=srtmplus_raw&SERVICE=WCS&VERSION=1.0.0

 

Note that <rangeSet> is undefined. 

 

Anyhow I have a WCS service which does not have a set a default band
identifier so when GDAL tries to do a GetCoverage in
WCSDataset::EstablishRasterDetails() it doesn't provide a band=
parameter resulting in the following service exception:

 

<ServiceException code="MissingParameterValue" locator="Request does not
include BAND value, and the service instance did not declare any default
value for that parameter. "></ServiceException>

 

 

I think GDAL needs to parse the DescribeCoverage and use the rangeSet to
set up the list of bands in the WCS offering.

 

I did a real quick and dirty test and inserted the band identifiers into
all the GetCoverage url constructions and GDAL worked with my WCS.  Of
course this would be simpler if my WCS had default bands but it doesn't.

 

Got to catch a bus now but I think this should probably be a bug report.

 

-e

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071116/9da2e8a0/attachment.html
From neteler at fbk.eu  Fri Nov 16 12:47:01 2007
From: neteler at fbk.eu (Markus Neteler)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: GDAL SRTM hgt code
In-Reply-To: <473CAB09.3060805@pobox.com>
References: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
	<fb5rfq$iq6$1@sea.gmane.org> <473C9A9A.1010601@mitre.org>
	<473CAB09.3060805@pobox.com>
Message-ID: <20071116174701.GJ32548@fbk.eu>

On Thu, Nov 15, 2007 at 09:24:41PM +0100, Frank Warmerdam wrote:
> Rick Niles wrote:
> > Since SRTM hgt-files is the best public available terrain data around
> > (that I know of..), it seems like it's worth it to have a specific
> > front-end to handle it directly via GDALOpen().  I can see why some
> > would argue that's just a special case of a raw 2-byte file, but I don't
> > think it would be ugly to have a specific filter to handle this
> > extremely popular data.  There's 3-second and 1-second SRTM data and I'm
> > not sure you can auto-detect which is which.
> 
> Rick,
> 
> An SRTM driver was implemented in "trunk" and will be in the 1.5.0 release.
> I haven't tried it yet, but it should be built into the FWTools builds
> (or just build from any trunk snapshot).  Some info at:
> 
>    http://www.gdal.org/frmt_various.html#SRTMHGT
> 
> It looks like it was implemented by Michael Mazzella and Even Rouault so
> kudos and bug reports to them. :-)

I had tried it some (short) time ago with European SRTM data
and compared to GRASS SRTM import: identical. So I think
that it works well.

Markus

From warmerdam at pobox.com  Fri Nov 16 13:45:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <CB3C9778-82C5-414E-8925-4FCAB5619DCD@geoaspects.com>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com> <473C8A2E.3090709@loskot.net>
	<473C942D.9080500@pobox.com>
	<CB3C9778-82C5-414E-8925-4FCAB5619DCD@geoaspects.com>
Message-ID: <473DE548.5080607@pobox.com>

Geo Aspects Dev wrote:
> Hi,
> 
> i was rather hoping this RFC would help me to provide a kind of map 
> browser interface
> eg pass each file in a directory (or any file list for that matter) and 
> have GDAL/OGR driver say which it would be able to open, so i could 
> highlight (or make selectable) only those "genuine" map files.
> Not sure how that would work, if I needed to provide options/parameters 
> up front?

Tim,

Note, this is exactly what the Identify() method implemented for GDAL is
intended for.  It makes it easier for file browsers to know which files are
openable by GDALOpen(), and even what format driver applies but in a fairly
inexpensive way.

Unfortunately, nothing corresponding exists for OGR.  Rather that
reimplement the same concepts for OGR, I'd rather approach "GDAL/OGR
Grand Unification" where a common driver architecture is used for both.

But Grand Unification is a substantial job, and not one for which I have
seen client interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Nov 16 13:56:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
Message-ID: <473DE7DB.6000904@pobox.com>

Motion: Migrate gdal-dev to lists.osgeo.org

Folks,

In the interest of centralizing list management, and possibly to reduce the
current gdal-dev email latency, I would like to migrate the gdal-dev list
to lists.osgeo.org.  I will endeavor to do so in such a way that full archives
are retained, and all user subscriptions (with per user subscription details)
are retained.

With Daniel's help, I would also plan to put an alias forwarding
gdal-dev@lists.maptools.org to gdal-dev@lists.osgeo.org that would be
in place for the foreseeable future to mitgate migration disruption.

The gdal-announce list is already at lists.osgeo.org.

+1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Fri Nov 16 13:27:25 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473DE7DB.6000904@pobox.com>
References: <473DE7DB.6000904@pobox.com>
Message-ID: <36D29481-51D3-4BE1-AD1F-E2DCB3B1E622@gmail.com>

+1

On Nov 16, 2007, at 12:56 PM, Frank Warmerdam wrote:

> Motion: Migrate gdal-dev to lists.osgeo.org
>
> Folks,
>
> In the interest of centralizing list management, and possibly to  
> reduce the
> current gdal-dev email latency, I would like to migrate the gdal-dev  
> list
> to lists.osgeo.org.  I will endeavor to do so in such a way that  
> full archives
> are retained, and all user subscriptions (with per user subscription  
> details)
> are retained.
>
> With Daniel's help, I would also plan to put an alias forwarding
> gdal-dev@lists.maptools.org to gdal-dev@lists.osgeo.org that would be
> in place for the foreseeable future to mitgate migration disruption.
>
> The gdal-announce list is already at lists.osgeo.org.
>
> +1 from me.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Fri Nov 16 13:45:32 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473DE7DB.6000904@pobox.com>
References: <473DE7DB.6000904@pobox.com>
Message-ID: <473DE54C.40203@mapgears.com>

Frank Warmerdam wrote:
> Motion: Migrate gdal-dev to lists.osgeo.org
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From dev at geoaspects.com  Fri Nov 16 15:08:52 2007
From: dev at geoaspects.com (Geo Aspects Dev)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: RFC 10
In-Reply-To: <473DE548.5080607@pobox.com>
References: <47358E58.7060503@loskot.net>
	<20071112135043.GA15473@ak4719.spb.edu>
	<4738B963.9050301@pobox.com> <473C8A2E.3090709@loskot.net>
	<473C942D.9080500@pobox.com>
	<CB3C9778-82C5-414E-8925-4FCAB5619DCD@geoaspects.com>
	<473DE548.5080607@pobox.com>
Message-ID: <2C367B2B-956B-4ECB-BB8A-22128B688BE4@geoaspects.com>

Understood.
But not implementing Identity() and implementing only Open(name 
+options_mangle) makes things worse (for me:)

tim


On 16 Nov 2007, at 19:45, Frank Warmerdam wrote:

> Geo Aspects Dev wrote:
>> Hi,
>> i was rather hoping this RFC would help me to provide a kind of  
>> map browser interface
>> eg pass each file in a directory (or any file list for that  
>> matter) and have GDAL/OGR driver say which it would be able to  
>> open, so i could highlight (or make selectable) only those  
>> "genuine" map files.
>> Not sure how that would work, if I needed to provide options/ 
>> parameters up front?
>
> Tim,
>
> Note, this is exactly what the Identify() method implemented for  
> GDAL is
> intended for.  It makes it easier for file browsers to know which  
> files are
> openable by GDALOpen(), and even what format driver applies but in  
> a fairly
> inexpensive way.
>
> Unfortunately, nothing corresponding exists for OGR.  Rather that
> reimplement the same concepts for OGR, I'd rather approach "GDAL/OGR
> Grand Unification" where a common driver architecture is used for  
> both.
>
> But Grand Unification is a substantial job, and not one for which I  
> have
> seen client interest.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>


From szekerest at gmail.com  Fri Nov 16 15:26:44 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473DE7DB.6000904@pobox.com>
References: <473DE7DB.6000904@pobox.com>
Message-ID: <f3b73b7d0711161226s75884235gb91e5ae31769aceb@mail.gmail.com>

+1

Tamas



2007/11/16, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: Migrate gdal-dev to lists.osgeo.org
>
> Folks,
>
> In the interest of centralizing list management, and possibly to reduce the
> current gdal-dev email latency, I would like to migrate the gdal-dev list
> to lists.osgeo.org.  I will endeavor to do so in such a way that full archives
> are retained, and all user subscriptions (with per user subscription details)
> are retained.
>
> With Daniel's help, I would also plan to put an alias forwarding
> gdal-dev@lists.maptools.org to gdal-dev@lists.osgeo.org that would be
> in place for the foreseeable future to mitgate migration disruption.
>
> The gdal-announce list is already at lists.osgeo.org.
>
> +1 from me.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ari.jolma at tkk.fi  Fri Nov 16 17:21:33 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Changes in the Perl bindings API (should not break
	anything)
Message-ID: <473E17ED.40304@tkk.fi>

I've improved the Perl bindings API a bit. Mainly I've tried to remove 
all needs to use the constants like $Geo::GDAL::Const::wkbPoint and use 
strings instead. Nothing should have been broken, it's just a thin new 
layer I've added.

I've created some new constructors with the name of create. I'll use a 
new name since I don't know how to feasibly replace the "new" 
constructors Swig creates. For example, geometries can be created now 
like this:

$geom = Geo::OGR::Geometry->create('Point');

I've also updated the documentation of the Perl bindings and marked as 
"deprecated" those methods that I think shouldn't be used. The 
documentation is written in Doxygen and it is a bit difficult to 
produce, I've set up nightly (around 1 am Finnish time - the latest 
should be there soon) production of them here: 
http://map.hut.fi/doc/Geo-GDAL/html/index.html

There's still much to do, for example add code to keep parent objects 
live when their variables go out of scope and children still exist; code 
that would ease the transfer of data from Perl to GDAL and vice versa; 
documentation; etc. Comments and help are welcome.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From gok at aerometric-ak.com  Fri Nov 16 17:20:42 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] xyz to rgb
Message-ID: <3054411AF4728548AD6D7137190D56B302B57D55@admin1.aeromap.com>

Hello, all.
Is there a way to create geoTiff from raw data? I have gridded xyz, want
to create intensity or better color georeferenced image.
Thank you.
Gennady


From mateusz at loskot.net  Fri Nov 16 18:59:40 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473DE7DB.6000904@pobox.com>
References: <473DE7DB.6000904@pobox.com>
Message-ID: <473E2EEC.3000608@loskot.net>

Frank Warmerdam wrote:
> Motion: Migrate gdal-dev to lists.osgeo.org
> 
> Folks,
> 
> In the interest of centralizing list management, and possibly to reduce the
> current gdal-dev email latency, I would like to migrate the gdal-dev list
> to lists.osgeo.org.  I will endeavor to do so in such a way that full
> archives
> are retained, and all user subscriptions (with per user subscription
> details)
> are retained.
> 
> With Daniel's help, I would also plan to put an alias forwarding
> gdal-dev@lists.maptools.org to gdal-dev@lists.osgeo.org that would be
> in place for the foreseeable future to mitgate migration disruption.
> 
> The gdal-announce list is already at lists.osgeo.org.
> 
> +1 from me.

Frank,

This is a good idea. Thanks for the effort.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From hobu.inc at gmail.com  Fri Nov 16 23:11:00 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] LAS Format Specifications -- poof!  They're gone.
Message-ID: <439ED28D-09C8-4DF0-8E8E-AD93F482228D@gmail.com>

Does anyone know what happened to http://www.lasformat.org?  I'm  
hoping some of the remotesensing/ASPRS types on here might have some  
pointers.

Thanks,

Howard



From perrygeo at gmail.com  Fri Nov 16 23:56:04 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] LAS Format Specifications -- poof! They're gone.
In-Reply-To: <439ED28D-09C8-4DF0-8E8E-AD93F482228D@gmail.com>
References: <439ED28D-09C8-4DF0-8E8E-AD93F482228D@gmail.com>
Message-ID: <5383fa5e0711162056h26017c83pd534f6d65c03040f@mail.gmail.com>

Howard,

  No idea what happen to the site but I've got an old copy of the v1.1 LAS
specs. I don't recall if there is a later version of the spec or not.

 It's up temporarily at http://perrygeo.net/download/lasv1_1.pdf if that
helps.

- Matt

On Nov 16, 2007 8:11 PM, Howard Butler <hobu.inc@gmail.com> wrote:

> Does anyone know what happened to http://www.lasformat.org?  I'm
> hoping some of the remotesensing/ASPRS types on here might have some
> pointers.
>
> Thanks,
>
> Howard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Matthew T. Perry
http://www.perrygeo.net

"Never ascribe to malice, that which can be adequately explained by
incompetence."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071116/2b40e6c1/attachment.html
From hobu.inc at gmail.com  Sat Nov 17 00:27:25 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] LAS Format Specifications -- poof! They're gone.
In-Reply-To: <5383fa5e0711162056h26017c83pd534f6d65c03040f@mail.gmail.com>
References: <439ED28D-09C8-4DF0-8E8E-AD93F482228D@gmail.com>
	<5383fa5e0711162056h26017c83pd534f6d65c03040f@mail.gmail.com>
Message-ID: <73A623E0-80DD-487F-8678-A39205AEACA9@gmail.com>

Jason Birch found it for me.

http://www.asprs.org/society/divisions/ppd/standards/lidar_exchange_format.htm

Thanks Jason,

Howard

On Nov 16, 2007, at 10:56 PM, Matthew Perry wrote:

> Howard,
>
>   No idea what happen to the site but I've got an old copy of the  
> v1.1 LAS specs. I don't recall if there is a later version of the  
> spec or not.
>
>  It's up temporarily at http://perrygeo.net/download/lasv1_1.pdf if  
> that helps.
>
> - Matt
>
> On Nov 16, 2007 8:11 PM, Howard Butler <hobu.inc@gmail.com> wrote:
> Does anyone know what happened to http://www.lasformat.org ?  I'm
> hoping some of the remotesensing/ASPRS types on here might have some
> pointers.
>
> Thanks,
>
> Howard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
> -- 
> Matthew T. Perry
> http://www.perrygeo.net
>
> "Never ascribe to malice, that which can be adequately explained by  
> incompetence."


From neteler at fbk.eu  Sat Nov 17 15:29:19 2007
From: neteler at fbk.eu (Markus Neteler)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473E2EEC.3000608@loskot.net>
References: <473DE7DB.6000904@pobox.com> <473E2EEC.3000608@loskot.net>
Message-ID: <20071117202919.GC22766@fbk.eu>

On Sat, Nov 17, 2007 at 12:59:40AM +0100, Mateusz Loskot wrote:
> Frank Warmerdam wrote:
> > Motion: Migrate gdal-dev to lists.osgeo.org
> >
> > Folks,
> >
> > In the interest of centralizing list management, and possibly to reduce the
> > current gdal-dev email latency, I would like to migrate the gdal-dev list
> > to lists.osgeo.org.  I will endeavor to do so in such a way that full
> > archives
> > are retained, and all user subscriptions (with per user subscription
> > details)
> > are retained.
> >
> > With Daniel's help, I would also plan to put an alias forwarding
> > gdal-dev@lists.maptools.org to gdal-dev@lists.osgeo.org that would be
> > in place for the foreseeable future to mitgate migration disruption.
> >
> > The gdal-announce list is already at lists.osgeo.org.
> >
> > +1 from me.
> 
> Frank,
> 
> This is a good idea. Thanks for the effort.
> 

Frank just migrated our 13 GRASS mailing lists
without problems to lists.osgeo.org :-)

It will be good to have OSGeo projects more
centralized.

Markus

From ari.jolma at tkk.fi  Sun Nov 18 15:17:39 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Changes in the Perl bindings API (should not break
	anything)
In-Reply-To: <473E17ED.40304@tkk.fi>
References: <473E17ED.40304@tkk.fi>
Message-ID: <47409DE3.7050109@tkk.fi>


> There's still much to do, for example add code to keep parent objects 
> live when their variables go out of scope and children still exist; 
> code that would ease the transfer of data from Perl to GDAL and vice 
> versa; documentation; etc. Comments and help are welcome.

I've added some code to keep

* Datasets alive while their Bands are used
* DataSources alive while their Layers are used
* Features alive while their Geometries are used

I also fixed a bug which should keep FeatureDefns alive while Features 
that use them exist.

These fixes should keep code like:

my $band;
{
    my $dataset = Geo::GDAL::Dataset::Open('filename');
    $band = $dataset->GetRasterBand();
}
$band->something..

not crashing.

I added simpler API for moving raster data between Perl and GDAL:

$data = $band->ReadTile($xoff, $yoff, $xsize, $ysize);
$band->WriteTile($data, $xoff, $yoff);

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Sun Nov 18 20:24:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: [FWTools] Documentation and delivery of REC, GRASS,
 GPX, GML and Interlis drivers
In-Reply-To: <25bc040b0711181117j13cf91f2tfc1fb7052f344850@mail.gmail.com>
References: <25bc040b0711181117j13cf91f2tfc1fb7052f344850@mail.gmail.com>
Message-ID: <4740E5E1.6050407@pobox.com>

Stefan Keller wrote:
> Frank,
>  
> I'm referring to your thread and Bryan Keith's post about "FWTools 2.0.0 
> Released": Frank made a great job especially also with OGR and I' trying 
> to promote and use it. 
>  
> Regarding documentation and features of the OGR (incl. OGR2OGR) tools I 
> have following hints and questions, especially also to outreach it to 
> Windows users:
> 
> * The REC driver (read-only) is mentioned in ogr2ogr but I don't find 
> any documentation about it as a source/format.

Stefan,

This is a special purpose format that is not of wide interest.  I am not
keen on documenting it.

> * GRASS is mentioned in the Web documentation 
> (http://www.gdal.org/ogr/ogr_formats.html) without reading/writing 
> availability restrictions - but it doesn't work either (at least on my 
> Windows installations).

FWTools does not support GRASS.  libgrass is under the GPL and FWTools
includes GPL incompatible software (such as MrSID), so I had to
choose either the GRASS driver or non-free drivers.  I chose the
non-free drivers.

> * GPX writing: The Web documenation says: "OGR has support for GPX 
> reading (if GDAL is build with expat library support) and writing." From 
> this, reading is not optional; so the following should work - but 
> doesn't: $ ogrinfo -ro -al test.gpx

The GPX support is very new, perhaps it was introduced after the last
FWTools release?  I see FWTools is built against expat (at least on
linux) and so we can reasonably expect GPX support.  Hmm, I think expat
is missing on windows (other than the expat for OGDI) so I'm not sure
what will happen there.

> * Reading two of the most prominent formats from GPS and GIS, namely GPX 
> and GML, are not part of the main distribution of FWTools (GPX needs 
> expat library and GML Xerces). 

I believe FWTools on windows and linux includes Xerces and thus full
GML support.

 > And Interlis needs a jar (ili2c.jar) from elsewhere.

I'm not adverse to distributing ili2c.jar with FWTools, but I
don't distribute a Java interpreter so I think it would be of
limited value.

 > I understand the argument not to keep components apart. On
> the other side, this means, that Windows users are practically excluded 
> from using these features. => Is it difficult for those who maintain the 
> build scripts anyway to compose a Windows release as it is now together 
> with one which *includes* these three libraries?

I'm starting to wonder if you are mixing up the "stock" GDAL DLLs
distributed from download.osgeo.org, and FWTools.  FWTools is not
maintained by "those", but just by me.   And it does have GML and
hopefully will include GPX.

> * Finally one question about perhaps the most well known "GIS/CAD" 
> formats ever: DXF file reading is currently not supported. To be sure 
> not to begin redundant activities: Are there plans to enhance that?

There is currently no support for reading DXF and I am not aware of anyone
working on this.  The existing DXFDWG driver is likely to be removed from
GDAL/OGR since it includes some source code directly adapted from the
open design alliance code base.

An MIT/X DXF read/writer without dependencies on external libraries would
be a valuable addition to GDAL/OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Mon Nov 19 01:42:25 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: [FWTools] Documentation and delivery of REC, GRASS,
	GPX, GML and Interlis drivers
In-Reply-To: <4740E5E1.6050407@pobox.com>
References: <25bc040b0711181117j13cf91f2tfc1fb7052f344850@mail.gmail.com>
	<4740E5E1.6050407@pobox.com>
Message-ID: <200711190742.28766.even.rouault@mines-paris.org>

Le Monday 19 November 2007 02:24:49 Frank Warmerdam, vous avez ?crit?:

> > * GPX writing: The Web documenation says: "OGR has support for GPX
> > reading (if GDAL is build with expat library support) and writing." From
> > this, reading is not optional; so the following should work - but
> > doesn't: $ ogrinfo -ro -al test.gpx
>
> The GPX support is very new, perhaps it was introduced after the last
> FWTools release?  I see FWTools is built against expat (at least on
> linux) and so we can reasonably expect GPX support.  Hmm, I think expat
> is missing on windows (other than the expat for OGDI) so I'm not sure
> what will happen there.
>

I have looked at the symbols exported by libgdal.so from Linux FWTools 2.0. 
Nothing related to GPX. So I guess I commited this work after FWTools 2.0 
release.

And to make things clearer, GPX reading requires expat. But writing doesn't.

Best regards



From enrico at enricozini.org  Mon Nov 19 04:55:52 2007
From: enrico at enricozini.org (Enrico Zini)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Understanding GEOS projected space
Message-ID: <20071119095552.GA3465@enricozini.org>

Hello,

I'm porting georeferentiation information from meteosatlib to GDAL, and
I'm currently stuck dealing with the numbers I get from proj.

What I cannot find is, in the GEOS projection, what do the projected
values represent.

Angles from the subsatellite point to the projected point with the
vertex on the satellite, or something else?  In what measurement unit?

I could not find this kind of information neither in
http://remotesensing.org/geotiff/proj_list/geos.html nor in the section
4.4.3.2 of the pdf document referred by the page, where the projection
is described.  I'm afraid I lack the math background to infer it from
the formulas of the projection.


Ciao,

Enrico

-- 
GPG key: 1024D/797EBFAB 2000-12-05 Enrico Zini <enrico@debian.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071119/84e5795d/attachment.bin
From retsios at itc.nl  Mon Nov 19 06:21:40 2007
From: retsios at itc.nl (Bas Retsios)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Understanding GEOS projected space
In-Reply-To: <20071119095552.GA3465@enricozini.org>
References: <20071119095552.GA3465@enricozini.org>
Message-ID: <474171C4.9020208@itc.nl>

Enrico Zini wrote:

>Hello,
>
>I'm porting georeferentiation information from meteosatlib to GDAL, and
>I'm currently stuck dealing with the numbers I get from proj.
>
>What I cannot find is, in the GEOS projection, what do the projected
>values represent.
>
>Angles from the subsatellite point to the projected point with the
>vertex on the satellite, or something else?  In what measurement unit?
>
>I could not find this kind of information neither in
>http://remotesensing.org/geotiff/proj_list/geos.html nor in the section
>4.4.3.2 of the pdf document referred by the page, where the projection
>is described.  I'm afraid I lack the math background to infer it from
>the formulas of the projection.
>
>
>Ciao,
>
>Enrico
>
The projected coordinates are expressed in meters.
When using lon_0 = 0, x_0 = 0 and y_0 = 0 (defaults for the MSG-1 
satellite), point (0,0) in projected coordinates coincides with lat=0 
and lon=0.
Note that due to the large area covered by this projection (an entire 
earth's hemisphere), the "meters" are only correct near the nadir-point.
As an example, a box with bounds (xMin=-3500000, xMax=3500000, 
yMin=-3500000, yMax=3500000) would roughly include the Arfican continent 
and a great part of the atlantic ocean.

Best regards,

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl





From enrico at enricozini.org  Mon Nov 19 07:29:08 2007
From: enrico at enricozini.org (Enrico Zini)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Understanding GEOS projected space
In-Reply-To: <474171C4.9020208@itc.nl>
References: <20071119095552.GA3465@enricozini.org> <474171C4.9020208@itc.nl>
Message-ID: <20071119122908.GA14674@enricozini.org>

On Mon, Nov 19, 2007 at 12:21:40PM +0100, Bas Retsios wrote:

> Note that due to the large area covered by this projection (an entire 
> earth's hemisphere), the "meters" are only correct near the nadir-point.
> As an example, a box with bounds (xMin=-3500000, xMax=3500000, 
> yMin=-3500000, yMax=3500000) would roughly include the Arfican continent 
> and a great part of the atlantic ocean.

So we're talking about a virtual kind of metre that is 1 metre long at
the nadir point but gets smaller as we move further from it.

The implementation I had (which followed directly from Eumetsat
documentation) used to work with the scaling function defined at section
"4.4.4 Scaling Function"[1],

Switching to proj I need to use ColumnDirGridStep and
LineDirGridStep[2], which I didn't see mentioned in Eumetsat's
documentation about georeferencing.  I hope that it's just the same
quantity scaled differently, and that the precision of georeferentiation
that I get in the end is the same.

Now, I need to handle some NetCDF based formats that store this
georeferentiation information in terms of CFAC and LFAC, and moving to
GDAL I'd need to rebuild ColumnDirGridStep and LineDirGridStep out of
those.

Is there a formula (it should be nothing more than a simple scaling
constant, if I get it right) that allows me to convert back and forth
from ColumnDirGridStep to CFAC (likewise for line)?


Ciao,

Enrico


[1]
4.4.4 Scaling Function

  The scaling function provides a linear relation between the
  intermediate coordinates (x,y) and the image coordinates (c,l).

  The definition is as follows:

    c = COFF + nint(x * 2^-16 * CFAC)
    l = LOFF + nint(y * 2^-16 * LFAC)

  Herein, "nint" denotes a nearest integer rounding of the real
  argument. COFF, CFAC, LOFF, LFAC are the (integer) scaling
  coefficients provided with the image navigation record. Each of the
  coefficients may have an integer value between -231 and +231-1.
[2]
  LineDirGridStep gives the grid step size in km SSP in the line
  direction. Default value is 3km for VIS and IR, and 1km for HRV. The
  on-ground grid step size of 3 km at the SSP represents an instrument
  scan step of 251.53 microrad divided by 3.
  
  ColumnDirGridStep gives the grid step size in km SSP in the column
  direction. Default value as for `LineDirGridStep'.
-- 
GPG key: 1024D/797EBFAB 2000-12-05 Enrico Zini <enrico@debian.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071119/3a07566b/attachment.bin
From ivan.lucena at pmldnet.com  Mon Nov 19 09:31:27 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Visual C++ Projects
Message-ID: <47419E3F.2090700@pmldnet.com>

Hi all,

For Microsoft Visual Studio users only.

I don't know if you have noticed but we have some .vcproj files on the
trunk and I would like to receive some feedback from people that already
use then and for those who would like to give it a little try.

They are not the regular kind of VC Project that holds all the linker,
dependencies and compiler option. They are "Makefile Project", that 
means they call the regular makefile command line when you press click 
on "Build".

If you have a newer version of Visual Studio or the Express version you 
can either try to load the makegdal71.vcproj and it will be updated or
you can run the script makegdal_gen.bat and generate a new one.

Thanks,

Ivan




From retsios at itc.nl  Mon Nov 19 09:33:58 2007
From: retsios at itc.nl (Bas Retsios)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Understanding GEOS projected space
In-Reply-To: <20071119122908.GA14674@enricozini.org>
References: <20071119095552.GA3465@enricozini.org> <474171C4.9020208@itc.nl>
	<20071119122908.GA14674@enricozini.org>
Message-ID: <47419ED6.9020205@itc.nl>

Enrico Zini wrote:

>On Mon, Nov 19, 2007 at 12:21:40PM +0100, Bas Retsios wrote:
>
>>Note that due to the large area covered by this projection (an entire 
>>earth's hemisphere), the "meters" are only correct near the nadir-point.
>>As an example, a box with bounds (xMin=-3500000, xMax=3500000, 
>>yMin=-3500000, yMax=3500000) would roughly include the Arfican continent 
>>and a great part of the atlantic ocean.
>>    
>>
>
>So we're talking about a virtual kind of metre that is 1 metre long at
>the nadir point but gets smaller as we move further from it.
>
>The implementation I had (which followed directly from Eumetsat
>documentation) used to work with the scaling function defined at section
>"4.4.4 Scaling Function"[1],
>
>Switching to proj I need to use ColumnDirGridStep and
>LineDirGridStep[2], which I didn't see mentioned in Eumetsat's
>documentation about georeferencing.  I hope that it's just the same
>quantity scaled differently, and that the precision of georeferentiation
>that I get in the end is the same.
>
>Now, I need to handle some NetCDF based formats that store this
>georeferentiation information in terms of CFAC and LFAC, and moving to
>GDAL I'd need to rebuild ColumnDirGridStep and LineDirGridStep out of
>those.
>
>Is there a formula (it should be nothing more than a simple scaling
>constant, if I get it right) that allows me to convert back and forth
>from ColumnDirGridStep to CFAC (likewise for line)?
>
>
>Ciao,
>
>Enrico
>
>
>[1]
>4.4.4 Scaling Function
>
>  The scaling function provides a linear relation between the
>  intermediate coordinates (x,y) and the image coordinates (c,l).
>
>  The definition is as follows:
>
>    c = COFF + nint(x * 2^-16 * CFAC)
>    l = LOFF + nint(y * 2^-16 * LFAC)
>
>  Herein, "nint" denotes a nearest integer rounding of the real
>  argument. COFF, CFAC, LOFF, LFAC are the (integer) scaling
>  coefficients provided with the image navigation record. Each of the
>  coefficients may have an integer value between -231 and +231-1.
>[2]
>  LineDirGridStep gives the grid step size in km SSP in the line
>  direction. Default value is 3km for VIS and IR, and 1km for HRV. The
>  on-ground grid step size of 3 km at the SSP represents an instrument
>  scan step of 251.53 microrad divided by 3.
>  
>  ColumnDirGridStep gives the grid step size in km SSP in the column
>  direction. Default value as for `LineDirGridStep'.
>  
>
The x and y as mentioned in formula [1] (4.4.4), the so-called 
"intermediate coordinates" are the scan-angle of the satellite. There is 
a linear relationship between the c and l (column and line of a pixel in 
an MSG-image), and the angle at which this was "seen" from the satellite.

Since c and l also have a linear relationship with X and Y (meters, in 
GEOS projection), you must be right when you say that there is also a 
linear relationship (scaling + offset) between (x,y) and (X,Y).

Calculate the relationship, given the following:

The ColumnDirGridStep and LineDirGridStep values found in the header 
files of the MSG images are 3004.03165817 m for bands 1-11, and 
1000.134348869 m for HRV band 12. Thus not exactly 3km / 1km, but 
slightly more. These values have never changed, since our institute 
installed a receiver for MSG images in 2004.

For bands 1-11, COFF=1856 and CFAC=-13642337, and for band 12, COFF = 
5566 and CFAC=-40927014. These values have also remained the same for 
all images up to now.

c = COFF + x * CFAC / 65536
c = X / ColumnDirGridStep

Best regards,

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071119/dacb54a8/attachment.html
From retsios at itc.nl  Mon Nov 19 10:25:42 2007
From: retsios at itc.nl (Bas Retsios)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Understanding GEOS projected space
In-Reply-To: <47419ED6.9020205@itc.nl>
References: <20071119095552.GA3465@enricozini.org>
	<474171C4.9020208@itc.nl>	<20071119122908.GA14674@enricozini.org>
	<47419ED6.9020205@itc.nl>
Message-ID: <4741AAF6.90800@itc.nl>

Bas Retsios wrote:

> The x and y as mentioned in formula [1] (4.4.4), the so-called 
> "intermediate coordinates" are the scan-angle of the satellite. There 
> is a linear relationship between the c and l (column and line of a 
> pixel in an MSG-image), and the angle at which this was "seen" from 
> the satellite.
>
> Since c and l also have a linear relationship with X and Y (meters, in 
> GEOS projection), you must be right when you say that there is also a 
> linear relationship (scaling + offset) between (x,y) and (X,Y).
>
> Calculate the relationship, given the following:
>
> The ColumnDirGridStep and LineDirGridStep values found in the header 
> files of the MSG images are 3004.03165817 m for bands 1-11, and 
> 1000.134348869 m for HRV band 12. Thus not exactly 3km / 1km, but 
> slightly more. These values have never changed, since our institute 
> installed a receiver for MSG images in 2004.
>
> For bands 1-11, COFF=1856 and CFAC=-13642337, and for band 12, COFF = 
> 5566 and CFAC=-40927014. These values have also remained the same for 
> all images up to now.
>
> c = COFF + x * CFAC / 65536
> c = X / ColumnDirGridStep

The last part is wrong .. of course you need to add COFF to get c, thus:
c = COFF + X / ColumnDirGridStep

Therewith, the relationship between x and X is a factor:

x * CFAC / 65536 = X / ColumnDirGridStep

thus
X = x * CFAC * ColumnDirGridStep / 65536
and
x = X * 65536 / (CFAC * ColumnDirGridStep)

Best regards,

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071119/e69b6304/attachment.html
From tim at linfiniti.com  Mon Nov 19 11:54:52 2007
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
Message-ID: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>

Hi All

OK I know its a loaded question, but which format and format options
are the 'best' in terms of:

- produce the most compact file size
- supports byte output
- support nodata
- is writeable by gdal
- and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8

Previously we've been using HFA but lack of nodata support is an issue
and it does not seem to work well under both ArcMap and ArcGIS.

Any tips on the subject will be greatly appreciated.

Regards

-- 
Tim Sutton
QGIS Project Steering Committee Member - Release  Manager
Visit http://qgis.org for a great open source GIS
openModeller Desktop Developer
Visit http://openModeller.sf.net for a great open source ecological
niche modelling tool
Home Page: http://tim.linfiniti.com
Skype: timlinux
Irc: timlinux on #qgis at freenode.net

From sy at perkins.net  Mon Nov 19 15:06:13 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
In-Reply-To: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
Message-ID: <4741ECB5.8020307@perkins.net>

To throw in my 2c, the answer is of course: it all depends...

For instance, you don't say if you need data types other than byte, or a 
number of bands other than 1 or 3, or whether lossy compression is 
acceptable, or whether your images are targeted at a particular 
community, or whether you want to do random access updates, or whether 
you need to store images larger than 4GB, or whether you need 
georeferencing support, or arbitrary metadata support, or...

Generically though, GeoTIFF is perhaps the most complete non-proprietary 
format supported by GDAL. However it suffers from the severe problem 
that standard TIFF files have a 4GB file size limit (you can create 
BIGTIFF files with unlimited file size, but not all readers will read 
them). Also, multi-band and non-byte support is not part of the core 
spec so different applications may or may not support it. Also, not all 
readers support the deflate compression method, which is the only decent 
lossless compression TIFF offers.

You might also consider JPEG2000, which supports a wide variety of 
storage formats, including lossy or lossless compression.

I'm surprised that HFA doesn't support NODATA though.

Cheers,

Sy


Tim Sutton wrote:
> Hi All
>
> OK I know its a loaded question, but which format and format options
> are the 'best' in terms of:
>
> - produce the most compact file size
> - supports byte output
> - support nodata
> - is writeable by gdal
> - and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8
>
> Previously we've been using HFA but lack of nodata support is an issue
> and it does not seem to work well under both ArcMap and ArcGIS.
>
> Any tips on the subject will be greatly appreciated.
>
> Regards
>
>   


From warmerdam at pobox.com  Mon Nov 19 15:44:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] GDAL Project Meeting Tomorrow (Tuesday)
Message-ID: <4741F5C8.9040806@pobox.com>

Folks,

A reminder that we are having a project meeting tomorrow, Tuesday
Nov 20 at 1900 GMT is 1PM Central or 2PM Eastern.

   http://trac.osgeo.org/gdal/wiki/FirstMeeting

The focus of the meeting is planning for the GDAL/OGR 1.5.0 release.  All
interested developers and users are welcome, but be warned if you show up
you might get roped into helping with testing, or even fixing some bugs!

The meeting will take place in the #gdal IRC channel.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mchapman at texelinc.com  Mon Nov 19 15:46:21 2007
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
In-Reply-To: <4741ECB5.8020307@perkins.net>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
	<4741ECB5.8020307@perkins.net>
Message-ID: <00f101c82aed$3e8f3ed0$bbadbc70$@com>

I agree with Simon.  GeoTiff is great.  Erdas .img is also really good and
doesn't have the 4GB limit. 

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simon Perkins
Sent: Monday, November 19, 2007 1:06 PM
To: Tim Sutton
Cc: Renato De Giovanni; gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] The perfect raster format - which is it?

To throw in my 2c, the answer is of course: it all depends...

For instance, you don't say if you need data types other than byte, or a 
number of bands other than 1 or 3, or whether lossy compression is 
acceptable, or whether your images are targeted at a particular 
community, or whether you want to do random access updates, or whether 
you need to store images larger than 4GB, or whether you need 
georeferencing support, or arbitrary metadata support, or...

Generically though, GeoTIFF is perhaps the most complete non-proprietary 
format supported by GDAL. However it suffers from the severe problem 
that standard TIFF files have a 4GB file size limit (you can create 
BIGTIFF files with unlimited file size, but not all readers will read 
them). Also, multi-band and non-byte support is not part of the core 
spec so different applications may or may not support it. Also, not all 
readers support the deflate compression method, which is the only decent 
lossless compression TIFF offers.

You might also consider JPEG2000, which supports a wide variety of 
storage formats, including lossy or lossless compression.

I'm surprised that HFA doesn't support NODATA though.

Cheers,

Sy


Tim Sutton wrote:
> Hi All
>
> OK I know its a loaded question, but which format and format options
> are the 'best' in terms of:
>
> - produce the most compact file size
> - supports byte output
> - support nodata
> - is writeable by gdal
> - and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8
>
> Previously we've been using HFA but lack of nodata support is an issue
> and it does not seem to work well under both ArcMap and ArcGIS.
>
> Any tips on the subject will be greatly appreciated.
>
> Regards
>
>   

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sy at perkins.net  Mon Nov 19 15:53:47 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
In-Reply-To: <00f101c82aed$3e8f3ed0$bbadbc70$@com>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
	<4741ECB5.8020307@perkins.net>
	<00f101c82aed$3e8f3ed0$bbadbc70$@com>
Message-ID: <4741F7DB.2000403@perkins.net>

Agreed, though Erdas .img (AKA "HFA" format) is what they're already 
using...

Cheers!

Sy


Martin Chapman wrote:
> I agree with Simon.  GeoTiff is great.  Erdas .img is also really good and
> doesn't have the 4GB limit. 
>
> Martin Chapman
> Chief Software Architect
> Fortified Datacom Inc.
> http://www.fortifieddatacom.com
> mchapman@fortifieddatacom.com
> 303-324-1065
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simon Perkins
> Sent: Monday, November 19, 2007 1:06 PM
> To: Tim Sutton
> Cc: Renato De Giovanni; gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] The perfect raster format - which is it?
>
> To throw in my 2c, the answer is of course: it all depends...
>
> For instance, you don't say if you need data types other than byte, or a 
> number of bands other than 1 or 3, or whether lossy compression is 
> acceptable, or whether your images are targeted at a particular 
> community, or whether you want to do random access updates, or whether 
> you need to store images larger than 4GB, or whether you need 
> georeferencing support, or arbitrary metadata support, or...
>
> Generically though, GeoTIFF is perhaps the most complete non-proprietary 
> format supported by GDAL. However it suffers from the severe problem 
> that standard TIFF files have a 4GB file size limit (you can create 
> BIGTIFF files with unlimited file size, but not all readers will read 
> them). Also, multi-band and non-byte support is not part of the core 
> spec so different applications may or may not support it. Also, not all 
> readers support the deflate compression method, which is the only decent 
> lossless compression TIFF offers.
>
> You might also consider JPEG2000, which supports a wide variety of 
> storage formats, including lossy or lossless compression.
>
> I'm surprised that HFA doesn't support NODATA though.
>
> Cheers,
>
> Sy
>
>
> Tim Sutton wrote:
>   
>> Hi All
>>
>> OK I know its a loaded question, but which format and format options
>> are the 'best' in terms of:
>>
>> - produce the most compact file size
>> - supports byte output
>> - support nodata
>> - is writeable by gdal
>> - and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8
>>
>> Previously we've been using HFA but lack of nodata support is an issue
>> and it does not seem to work well under both ArcMap and ArcGIS.
>>
>> Any tips on the subject will be greatly appreciated.
>>
>> Regards
>>
>>   
>>     
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071119/bcea5dbd/attachment.html
From dron at ak4719.spb.edu  Mon Nov 19 16:14:21 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] xyz to rgb
In-Reply-To: <3054411AF4728548AD6D7137190D56B302B57D55@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B302B57D55@admin1.aeromap.com>
Message-ID: <20071119211421.GA4203@ak4719.spb.edu>

Gennady,

On Fri, Nov 16, 2007 at 01:20:42PM -0900, Gennady Khokhorin wrote:
> Is there a way to create geoTiff from raw data? I have gridded xyz,
> want to create intensity or better color georeferenced image.

Yes, there is. At the moment we have a way to create the grid from XYZ
data programatically:
 
 http://www.gdal.org/gdal__alg_8h.html#272e099fee92569aff154bbb035fc7c1

Shortly there will be user space utility for that task. It is not the
decent implementation, there is a lot of room for optimization and for
new algorithms to add.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From tim at linfiniti.com  Mon Nov 19 23:33:30 2007
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
In-Reply-To: <4741F7DB.2000403@perkins.net>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
	<4741ECB5.8020307@perkins.net> <00f101c82aed$3e8f3ed0$bbadbc70$@com>
	<4741F7DB.2000403@perkins.net>
Message-ID: <d368056f0711192033y477e01c2ybeddca73126180f1@mail.gmail.com>

Hi

Sorry I should have listed bands and colour depth in my requirements.
Here is the revised list then:

- produce the most compact file size
- supports byte output ( no need for float or larger colour depths)
- support nodata
- is writeable by gdal
- and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8
- only single band required
- lossless compression required

Currently we are using HFA which is great except for lack of nodata
support (theres a patch in gdal trac which adds that but it will be a
while before that filters down into distros etc after it has been
applied to gdal svn). Second snag with HFA is that it doesnt work (for
us anyway) on both ArcMap 8 and ArcView 3.x.

Tiff is our second choice but the compression seems to require some
kind of plugin in ArcMap so thats a bit of a bind...and the 4GB file
size limit is sometimes hit due to inability to use compression  :-(

So I was just wondering if there was anything else in terms of format
support that I may be overlooking.

Many thanks,

Regards

Tim

2007/11/19, Simon Perkins <sy@perkins.net>:
>
>  Agreed, though Erdas .img (AKA "HFA" format) is what they're already
> using...
>
>  Cheers!
>
>  Sy
>
>
>
>  Martin Chapman wrote:
>  I agree with Simon. GeoTiff is great. Erdas .img is also really good and
> doesn't have the 4GB limit.
>
> Martin Chapman
> Chief Software Architect
> Fortified Datacom Inc.
> http://www.fortifieddatacom.com
> mchapman@fortifieddatacom.com
> 303-324-1065
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
> Simon Perkins
> Sent: Monday, November 19, 2007 1:06 PM
> To: Tim Sutton
> Cc: Renato De Giovanni; gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] The perfect raster format - which is it?
>
> To throw in my 2c, the answer is of course: it all depends...
>
> For instance, you don't say if you need data types other than byte, or a
> number of bands other than 1 or 3, or whether lossy compression is
> acceptable, or whether your images are targeted at a particular
> community, or whether you want to do random access updates, or whether
> you need to store images larger than 4GB, or whether you need
> georeferencing support, or arbitrary metadata support, or...
>
> Generically though, GeoTIFF is perhaps the most complete non-proprietary
> format supported by GDAL. However it suffers from the severe problem
> that standard TIFF files have a 4GB file size limit (you can create
> BIGTIFF files with unlimited file size, but not all readers will read
> them). Also, multi-band and non-byte support is not part of the core
> spec so different applications may or may not support it. Also, not all
> readers support the deflate compression method, which is the only decent
> lossless compression TIFF offers.
>
> You might also consider JPEG2000, which supports a wide variety of
> storage formats, including lossy or lossless compression.
>
> I'm surprised that HFA doesn't support NODATA though.
>
> Cheers,
>
> Sy
>
>
> Tim Sutton wrote:
>
>
>  Hi All
>
> OK I know its a loaded question, but which format and format options
> are the 'best' in terms of:
>
> - produce the most compact file size
> - supports byte output
> - support nodata
> - is writeable by gdal
> - and (for special bonus points) is readable by ArcView 3.x and ArcMap >=8
>
> Previously we've been using HFA but lack of nodata support is an issue
> and it does not seem to work well under both ArcMap and ArcGIS.
>
> Any tips on the subject will be greatly appreciated.
>
> Regards
>
>
>
>  _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
>


-- 
Tim Sutton
QGIS Project Steering Committee Member - Release  Manager
Visit http://qgis.org for a great open source GIS
openModeller Desktop Developer
Visit http://openModeller.sf.net for a great open source ecological
niche modelling tool
Home Page: http://tim.linfiniti.com
Skype: timlinux
Irc: timlinux on #qgis at freenode.net

From aberenyi at burken.hu  Tue Nov 20 04:40:25 2007
From: aberenyi at burken.hu (=?ISO-8859-2?Q?Ber=E9nyi_Attila?=)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] mysql -> ogr  -> mapserver: precision problem
Message-ID: <4742AB89.2070900@burken.hu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi there,

I'm having trouble displaying mysql data (double precision) through
ogr in mapserver. I could handle the data but it"s precision is only
decimal.
The same problem is discussed here
(http://trac.osgeo.org/mapserver/ticket/1255), but it seems the
problem exists still.

Anyone face this problem? Any solution?

Thanks in advance,

Attila
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.7 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFHQquJ76iTSmN9z2ARAgEPAJ94mwHtnyQmjxehXWcw8JLGymcNiQCfeFjc
PrGhMEITJ/7+0ykziv1kgro=
=ZB21
-----END PGP SIGNATURE-----


From potts at cfl.rr.com  Tue Nov 20 09:14:38 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] The perfect raster format - which is it?
In-Reply-To: <d368056f0711192033y477e01c2ybeddca73126180f1@mail.gmail.com>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
	<4741ECB5.8020307@perkins.net>
	<00f101c82aed$3e8f3ed0$bbadbc70$@com>
	<4741F7DB.2000403@perkins.net>
	<d368056f0711192033y477e01c2ybeddca73126180f1@mail.gmail.com>
Message-ID: <4A6365DD-8052-4605-A58D-40B7CEA449D0@cfl.rr.com>

Hello Tim:

I would use TIFF.  Note,  GDAL contains BigTIff support.  I have been  
using BigTiff now for a month and have written out and used ~100  
Gigabyte file and some more than that.  You could always try PACKBITS  
or LZW For TIFF.

Take care

Garrett

On Nov 19, 2007, at 11:33 PM, Tim Sutton wrote:

> Hi
>
> Sorry I should have listed bands and colour depth in my requirements.
> Here is the revised list then:
>
> - produce the most compact file size
> - supports byte output ( no need for float or larger colour depths)
> - support nodata
> - is writeable by gdal
> - and (for special bonus points) is readable by ArcView 3.x and  
> ArcMap >=8
> - only single band required
> - lossless compression required
>
> Currently we are using HFA which is great except for lack of nodata
> support (theres a patch in gdal trac which adds that but it will be a
> while before that filters down into distros etc after it has been
> applied to gdal svn). Second snag with HFA is that it doesnt work (for
> us anyway) on both ArcMap 8 and ArcView 3.x.
>
> Tiff is our second choice but the compression seems to require some
> kind of plugin in ArcMap so thats a bit of a bind...and the 4GB file
> size limit is sometimes hit due to inability to use compression  :-(
>
> So I was just wondering if there was anything else in terms of format
> support that I may be overlooking.
>
> Many thanks,
>
> Regards
>
> Tim
>
> 2007/11/19, Simon Perkins <sy@perkins.net>:
>>
>>  Agreed, though Erdas .img (AKA "HFA" format) is what they're already
>> using...
>>
>>  Cheers!
>>
>>  Sy
>>
>>
>>
>>  Martin Chapman wrote:
>>  I agree with Simon. GeoTiff is great. Erdas .img is also really  
>> good and
>> doesn't have the 4GB limit.
>>
>> Martin Chapman
>> Chief Software Architect
>> Fortified Datacom Inc.
>> http://www.fortifieddatacom.com
>> mchapman@fortifieddatacom.com
>> 303-324-1065
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org
>> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
>> Simon Perkins
>> Sent: Monday, November 19, 2007 1:06 PM
>> To: Tim Sutton
>> Cc: Renato De Giovanni; gdal-dev@lists.maptools.org
>> Subject: Re: [Gdal-dev] The perfect raster format - which is it?
>>
>> To throw in my 2c, the answer is of course: it all depends...
>>
>> For instance, you don't say if you need data types other than  
>> byte, or a
>> number of bands other than 1 or 3, or whether lossy compression is
>> acceptable, or whether your images are targeted at a particular
>> community, or whether you want to do random access updates, or  
>> whether
>> you need to store images larger than 4GB, or whether you need
>> georeferencing support, or arbitrary metadata support, or...
>>
>> Generically though, GeoTIFF is perhaps the most complete non- 
>> proprietary
>> format supported by GDAL. However it suffers from the severe problem
>> that standard TIFF files have a 4GB file size limit (you can create
>> BIGTIFF files with unlimited file size, but not all readers will read
>> them). Also, multi-band and non-byte support is not part of the core
>> spec so different applications may or may not support it. Also,  
>> not all
>> readers support the deflate compression method, which is the only  
>> decent
>> lossless compression TIFF offers.
>>
>> You might also consider JPEG2000, which supports a wide variety of
>> storage formats, including lossy or lossless compression.
>>
>> I'm surprised that HFA doesn't support NODATA though.
>>
>> Cheers,
>>
>> Sy
>>
>>
>> Tim Sutton wrote:
>>
>>
>>  Hi All
>>
>> OK I know its a loaded question, but which format and format options
>> are the 'best' in terms of:
>>
>> - produce the most compact file size
>> - supports byte output
>> - support nodata
>> - is writeable by gdal
>> - and (for special bonus points) is readable by ArcView 3.x and  
>> ArcMap >=8
>>
>> Previously we've been using HFA but lack of nodata support is an  
>> issue
>> and it does not seem to work well under both ArcMap and ArcGIS.
>>
>> Any tips on the subject will be greatly appreciated.
>>
>> Regards
>>
>>
>>
>>  _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>
>
> -- 
> Tim Sutton
> QGIS Project Steering Committee Member - Release  Manager
> Visit http://qgis.org for a great open source GIS
> openModeller Desktop Developer
> Visit http://openModeller.sf.net for a great open source ecological
> niche modelling tool
> Home Page: http://tim.linfiniti.com
> Skype: timlinux
> Irc: timlinux on #qgis at freenode.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Tue Nov 20 13:30:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Visual Leak Detector support for Visual C++ builds
Message-ID: <50232.84.10.81.30.1195583418.squirrel@loskot.net>

Folks,

I added experimental optional configuration of Visual Leak
Detector to NMAKE-based configuration:

http://trac.osgeo.org/gdal/ticket/2009

Please, report any problems if noticed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From brian.claywell at gmail.com  Tue Nov 20 14:42:47 2007
From: brian.claywell at gmail.com (Brian Claywell)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: The perfect raster format - which is it?
In-Reply-To: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
Message-ID: <fhvdbq$jtl$1@ger.gmane.org>

Tim Sutton wrote:
> Previously we've been using HFA but lack of nodata support is an issue
> and it does not seem to work well under both ArcMap and ArcGIS.

Tim,

I submitted a patch that adds no-data support to the HFA driver back in
April or so; it's not scheduled to be included until the 1.5 release,
but we've been using it internally ever since then and have run into no
problems with it. You can find the patch here:

http://trac.osgeo.org/gdal/ticket/1567

The patch was written against the 1.4.0 source tree, but I've
successfully applied it to 1.4.1 and 1.4.3 as well.

Hope that helps!

-- 
Brian Claywell
brian.claywell@gmail.com


From lxnyce at gmail.com  Tue Nov 20 14:56:08 2007
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Export Aux File from GDAL dataset?
Message-ID: <82c245aa0711201156p43644da9k694d485aa8fe4cec@mail.gmail.com>

Hi All,

A colleague of mines has 1500+ MrSID files with no coordinate system
assigned. They are trying to read this using ERDAS IMAGINE.

I can easily assign the coordinate system in GDAL, however, there is no way
(that I know of) to get IMAGINE to recognize the coordinate system since it
stores auxiliary information in aux files.

I am wondering if there is a way to export the aux files from the GDAL
dataset, so that when IMAGINE reads it back, it gets the correct coordinate
system?

-Lennox
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071120/a1bf2714/attachment.html
From philippe at cowpig.ca  Tue Nov 20 15:32:04 2007
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] GDAL Project Meeting Tomorrow (Tuesday)
In-Reply-To: <4741F5C8.9040806@pobox.com>
References: <4741F5C8.9040806@pobox.com>
Message-ID: <20071120203204.GA2156@cowpig.ca>

Hi Everyone,

The minutes for the meeting can be found at:
    http://trac.osgeo.org/gdal/attachment/wiki/FirstMeeting/minutes_20071120.pdf
or alternatively:
    http://www.cowpig.ca/~philippe/minutes_20071120.pdf
If you attended the meeting and see any omissions or if I misspelled
your name, please let me know ASAP and I will fix it.

Cheers,
Phil

On Mon, Nov 19, 2007 at 03:44:56PM -0500, Frank Warmerdam wrote:
> Folks,
> 
> A reminder that we are having a project meeting tomorrow, Tuesday
> Nov 20 at 1900 GMT is 1PM Central or 2PM Eastern.
> 
>   http://trac.osgeo.org/gdal/wiki/FirstMeeting
> 
> The focus of the meeting is planning for the GDAL/OGR 1.5.0 release.  All
> interested developers and users are welcome, but be warned if you show up
> you might get roped into helping with testing, or even fixing some bugs!
> 
> The meeting will take place in the #gdal IRC channel.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From mrosen at lizardtech.com  Tue Nov 20 17:39:14 2007
From: mrosen at lizardtech.com (Michael S. Rosen)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Export Aux File from GDAL dataset?
In-Reply-To: <82c245aa0711201156p43644da9k694d485aa8fe4cec@mail.gmail.com>
References: <82c245aa0711201156p43644da9k694d485aa8fe4cec@mail.gmail.com>
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD126EF555@sea-srv-ms3.lizardtech.com>

Lennox,

 

If you've got a GDAL dataset of one sort, you should be convert it to an
HFADataset without undue difficulty.  The HFADataset will write out the
.aux file you need.

 

Set up your HFADataset something rather like this, I think:

 

      char **papszOptions = NULL;

      papszOptions = CSLSetNameValue(papszOptions, "AUX", "YES"); //
create aux file only (no raster data)

      int nXSize = pImage->getWidth();

      int nYSize = pImage->getHeight();

      int nBands = pImage->getNumBands();

      GDALDataType eType = GDT_Unknown ; 

      switch (pImage->getDataType())

      {

      case LTI_DATATYPE_UINT8: eType = GDT_Byte;          break; 

      case LTI_DATATYPE_SINT8: eType = GDT_Byte;          break;

...

      }

      GDALDataset *poDstDS;

      poDstDS = poDriver->Create(fsOutput.utf8(), nXSize, nYSize,
nBands, eType,

         papszOptions);

 

      // Add the metadata we choose to support 

      const LTIGeoCoord &geo = pImage->getGeoCoord();

      double xUL, yUL, xRes, yRes, xRot, yRot;

      geo.get(xUL, yUL, xRes, yRes, xRot, yRot);

      double adfGeoTransform[6];

      adfGeoTransform[0] = xUL - 0.5 * xRes; // Upper left corner of
upper left pixel

      adfGeoTransform[1] = xRes;

      adfGeoTransform[2] = xRot;

      adfGeoTransform[3] = yUL - 0.5 * yRes; // Bottom right corner of
bottom right pixel

      adfGeoTransform[4] = yRot;

      adfGeoTransform[5] = yRes;

      CPLErr err = poDstDS->SetGeoTransform(adfGeoTransform);

...

 

      const char *pWkt = geo.getWKT();

      OGRSpatialReference oSRS( pWkt );

      oSRS.exportToWkt(pWkt);

 

      err = poDstDS->SetProjection(pWkt);

...

      // This destruction causes GDAL's driver to flush to disk

      if (poDstDS != NULL)

      {

         delete poDstDS;

      }

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Lennox Antoine
Sent: Tuesday, November 20, 2007 11:56 AM
To: gdal
Subject: [Gdal-dev] Export Aux File from GDAL dataset?

 

Hi All,

A colleague of mines has 1500+ MrSID files with no coordinate system
assigned. They are trying to read this using ERDAS IMAGINE.

I can easily assign the coordinate system in GDAL, however, there is no
way (that I know of) to get IMAGINE to recognize the coordinate system
since it stores auxiliary information in aux files. 

I am wondering if there is a way to export the aux files from the GDAL
dataset, so that when IMAGINE reads it back, it gets the correct
coordinate system?

-Lennox

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 11446 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071120/90b7d729/attachment.bin
From tim at linfiniti.com  Tue Nov 20 21:07:33 2007
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: The perfect raster format - which is it?
In-Reply-To: <fhvdbq$jtl$1@ger.gmane.org>
References: <d368056f0711190854h34f1b2ccodd832b29ffe597f3@mail.gmail.com>
	<fhvdbq$jtl$1@ger.gmane.org>
Message-ID: <d368056f0711201807u738af6c7oa409b107a1c30d31@mail.gmail.com>

Hi

2007/11/20, Brian Claywell <brian.claywell@gmail.com>:
> Tim Sutton wrote:
> > Previously we've been using HFA but lack of nodata support is an issue
> > and it does not seem to work well under both ArcMap and ArcGIS.
>
> Tim,
>
> I submitted a patch that adds no-data support to the HFA driver back in
> April or so; it's not scheduled to be included until the 1.5 release,
> but we've been using it internally ever since then and have run into no
> problems with it. You can find the patch here:
>
> http://trac.osgeo.org/gdal/ticket/1567
>
> The patch was written against the 1.4.0 source tree, but I've
> successfully applied it to 1.4.1 and 1.4.3 as well.
>

Right it was your patch I was referring to in my previous post:

"Currently we are using HFA which is great except for lack of nodata
support (theres a patch in gdal trac which adds that but it will be a
while before that filters down into distros etc after it has been
applied to gdal svn). Second snag with HFA is that it doesnt work (for
us anyway) on both ArcMap 8 and ArcView 3.x."

I look forward to your patch making its way into mainstream distros.

Regards

Tim

> Hope that helps!
>
> --
> Brian Claywell
> brian.claywell@gmail.com
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Tim Sutton
QGIS Project Steering Committee Member - Release  Manager
Visit http://qgis.org for a great open source GIS
openModeller Desktop Developer
Visit http://openModeller.sf.net for a great open source ecological
niche modelling tool
Home Page: http://tim.linfiniti.com
Skype: timlinux
Irc: timlinux on #qgis at freenode.net

From zhonghaiw at gmail.com  Wed Nov 21 10:02:06 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <473C58EC.9050605@pobox.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<2534c4120711150011j28fdeb55x4d8fc8e82b88cedd@mail.gmail.com>
	<473C58EC.9050605@pobox.com>
Message-ID: <2534c4120711210702h12293041gc5482cb5842c647b@mail.gmail.com>

Hi Frank,

I've set the CONFIG in mapfile, but it still doesn't work, mapserver still
cannot access the raster images specified in the tile index file with http
links. The error message is something like:

msDrawRaster(): Unable to access file. (http://....../m_128_52_40000.gif);

I should mention that I've compiled MapServer myself under VS2005 with the
MapServer 5.0 source code. MapScript is compiled with libcurl support.

Do you have any idea about what is going wrong?

Best Regards

Zhonghai







On Nov 15, 2007 3:34 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Zhonghai Wang wrote:
> > Hi there,
> >
> > that's a very good point for me. Several days ago I've tried to access
> > tiled indexed raster images via a http link in MapServer, but I did
> > NOT get it run, is there any KEYWORD in MapServer to switch this
> > functionality on? like the GDAL_SKIP DODS command?
> >
> > Best Regards
> >
> > Zhonghai
>
> Zhonghai,
>
> You can set GDAL/OGR configuration variables in MapServer using the CONFIG
> keyword in MAP section.
>
>   CONFIG "GDAL_SKIP" "DODS"
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071121/74c5a779/attachment.html
From warmerdam at pobox.com  Wed Nov 21 10:37:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Method to get a google image by url?
In-Reply-To: <2534c4120711210702h12293041gc5482cb5842c647b@mail.gmail.com>
References: <473B7D3E.20905@ualg.pt> <473BA08C.1060103@pobox.com>
	<2534c4120711150011j28fdeb55x4d8fc8e82b88cedd@mail.gmail.com>
	<473C58EC.9050605@pobox.com>
	<2534c4120711210702h12293041gc5482cb5842c647b@mail.gmail.com>
Message-ID: <474450B1.2090705@pobox.com>

Zhonghai Wang wrote:
> Hi Frank,
>  
> I've set the CONFIG in mapfile, but it still doesn't work, mapserver 
> still cannot access the raster images specified in the tile index file 
> with http links. The error message is something like:
> 
> msDrawRaster(): Unable to access file. (http://....../m_128_52_40000.gif 
> <http://....../m_128_52_40000.gif>);
>  
> I should mention that I've compiled MapServer myself under VS2005 with 
> the MapServer 5.0 source code. MapScript is compiled with libcurl support.
>  
> Do you have any idea about what is going wrong?

Zhonghai,

Note it doesn't matter if MapServer is built with libcurl, what matters is
whether GDAL is built with libcurl.  I'd suggest you set the CPL_DEBUG
environment variable to see if there is any more info available from GDAL.

Also verify that the HTTP driver is available in GDAL
(eg. gdalinfo --format http)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 21 10:52:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] ogr kml driver debug changes
Message-ID: <47445426.8010003@pobox.com>

Folks,

I have modified the KML driver to only emit truely copious amounts of debug
information if the KML_DEBUG configuration (ie. environment) variable is set
to some value.

The great gouts of debug output was getting on my nerves.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 21 11:28:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:10 2007
Subject: [Gdal-dev] Re: Motion: Migrate gdal-dev to lists.osgeo.org
In-Reply-To: <473DE7DB.6000904@pobox.com>
References: <473DE7DB.6000904@pobox.com>
Message-ID: <47445CB4.9080405@pobox.com>

Frank Warmerdam wrote:
> Motion: Migrate gdal-dev to lists.osgeo.org

Motion passed with support from HowardB, DanielM, TamasS and I.  I will
proceed with the migration.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Nov 21 12:18:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 12:16:05 2007
Subject: [gdal-dev] Mailing List Migrated
Message-ID: <47446867.6060402@pobox.com>

Folks,

If you get this, it would appear the gdal-dev migration to lists.osgeo.org
has been successful.  Please update your address book to use:

   gdal-dev@lists.osgeo.org

I have setup an alias for the old address to forward to the new one, but
this may not last forever.  Subscription details and archives should be
preserved.  Info at:

   http://lists.osgeo.org/mailman/listinfo/gdal-dev

And thanks to Daniel and DM Solutions for the support of Maptools.org
the last several years.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Nov 21 13:05:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 13:02:36 2007
Subject: [gdal-dev] GDAL/OGR 1.4.3 ABI incompatability with 1.4.2
Message-ID: <47447387.9080905@pobox.com>

Folks,

It appears this change:

   http://trac.osgeo.org/gdal/changeset/12517

broke ABI compatability between GDAL 1.4.3 and GDAL 1.4.2.  In particular
we absolutely cannot alter the virtual tables (or size - ie. layout of
private data fields) of public classes such as OGRLinearRing.

This came to light when I attempted to provide plugins for MrSID and
ECW built against GDAL 1.4.3 DLLs to those working with GDAL 1.4.2
DLLs.

I think we will need to retract the GDAL 1.4.3 release, announcing it as
dangerous to propagate and attempt to issue a corrected GDAL 1.4.4 release
as soon as is practical.

Does anyone have any thoughts on this?  Am I overreacting?

I think this helps hightlight the importance of making ABI compatability
requirements for stable branches very clear, and furthermore introducing
some mechanism to test the theory.

/me swears a blue streak.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From maplabs at light42.com  Wed Nov 21 13:25:31 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 13:25:42 2007
Subject: [gdal-dev] GDAL/OGR 1.4.3 ABI incompatability with 1.4.2
In-Reply-To: <47447387.9080905@pobox.com>
References: <47447387.9080905@pobox.com>
Message-ID: <2474DD0A-985F-11DC-954B-000A277A733C@light42.com>

On Nov 21, 2007, at 10:05 AM, Frank Warmerdam wrote:

> Folks,
>
> It appears this change:
>
>   http://trac.osgeo.org/gdal/changeset/12517
>
> broke ABI compatability between GDAL 1.4.3 and GDAL 1.4.2.  In 
> particular
> we absolutely cannot alter the virtual tables (or size - ie. layout of
> private data fields) of public classes such as OGRLinearRing.
>
> This came to light when I attempted to provide plugins for MrSID and
> ECW built against GDAL 1.4.3 DLLs to those working with GDAL 1.4.2
> DLLs.
>
> I think we will need to retract the GDAL 1.4.3 release, announcing it 
> as
> dangerous to propagate and attempt to issue a corrected GDAL 1.4.4 
> release
> as soon as is practical.
>
> Does anyone have any thoughts on this?  Am I overreacting?
>

yes, declare the build "bad" and release 1.4.4
this sounds like just the kind of case where such action is called for

> I think this helps hightlight the importance of making ABI 
> compatability
> requirements for stable branches very clear, and furthermore 
> introducing
> some mechanism to test the theory.
>
> /me swears a blue streak.
>

From even.rouault at mines-paris.org  Wed Nov 21 13:35:01 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 13:35:06 2007
Subject: [gdal-dev] GDAL/OGR 1.4.3 ABI incompatability with 1.4.2
In-Reply-To: <47447387.9080905@pobox.com>
References: <47447387.9080905@pobox.com>
Message-ID: <200711211935.02730.even.rouault@mines-paris.org>

Yes, we must announce it clearly and withdraw it from download site.

More important, as we human can get wrong easily, it would be great to use an 
automated system to detect such accidental ABI break, to avoid that in the 
future. I'm not aware of such a means unfortunately, but it's worth looking 
for.

Le Wednesday 21 November 2007 19:05:59 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> It appears this change:
>
>    http://trac.osgeo.org/gdal/changeset/12517
>
> broke ABI compatability between GDAL 1.4.3 and GDAL 1.4.2.  In particular
> we absolutely cannot alter the virtual tables (or size - ie. layout of
> private data fields) of public classes such as OGRLinearRing.
>
> This came to light when I attempted to provide plugins for MrSID and
> ECW built against GDAL 1.4.3 DLLs to those working with GDAL 1.4.2
> DLLs.
>
> I think we will need to retract the GDAL 1.4.3 release, announcing it as
> dangerous to propagate and attempt to issue a corrected GDAL 1.4.4 release
> as soon as is practical.
>
> Does anyone have any thoughts on this?  Am I overreacting?
>
> I think this helps hightlight the importance of making ABI compatability
> requirements for stable branches very clear, and furthermore introducing
> some mechanism to test the theory.
>
> /me swears a blue streak.
>
> Best regards,


From mateusz at loskot.net  Wed Nov 21 13:45:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 13:45:36 2007
Subject: [gdal-dev] GDAL/OGR 1.4.3 ABI incompatability with 1.4.2
In-Reply-To: <47447387.9080905@pobox.com>
References: <47447387.9080905@pobox.com>
Message-ID: <47447CCA.6090200@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> It appears this change:
> 
>   http://trac.osgeo.org/gdal/changeset/12517
> 
> broke ABI compatability between GDAL 1.4.3 and GDAL 1.4.2.  In particular
> we absolutely cannot alter the virtual tables (or size - ie. layout of
> private data fields) of public classes such as OGRLinearRing.

Frank,

Unfortunately, I have to confirm it. This addition affects object size
and layout. I mindlessly applied the patch reviewing validity of
implementation, and forgetting influence on ABI.
Definitly my fault.

> I think we will need to retract the GDAL 1.4.3 release, announcing it as
> dangerous to propagate and attempt to issue a corrected GDAL 1.4.4 release
> as soon as is practical.

Yes, I can't see any better solution.

> Does anyone have any thoughts on this?  Am I overreacting?

I don't think, it's dangerous.

> I think this helps hightlight the importance of making ABI compatability
> requirements for stable branches very clear, and furthermore introducing
> some mechanism to test the theory.

I'd wish if we could have a set of tests checking ABI compatibility
before every release.  Any idea how would that work?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From warmerdam at pobox.com  Wed Nov 21 14:38:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 14:32:07 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
Message-ID: <4744894F.9060700@pobox.com>

Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing the
retraction and removal of source and binaries from normal locations.

+1 from me

Folks,

Pursuant to the ABI incompatability found, I'm seeking permission to
retract the 1.4.3 release.  In fact, since speed is of the essence, I have
already done so though I can't undo my changes if the PSC isn't in agreement.

In addition to a fairly gdal specific announcement of the retraction, my
intention would be to announce a GDAL 1.4.4 release fairly widely (wider
than would normally be the case) along with the notice that 1.4.3 is retracted.

Mateusz is backing out the offending ABI change, and is looking into mechanisms
to test ABI compatability as part of stable release preparation.  Howard, are
you prepared to "release manage" a 1.4.4 release later this week or over the
weekend?  If not, I'm sure we could have Mateusz be release manager for 1.4.4
and you for an eventual 1.4.5.  I would like to push this release out fairly
quickly (but not *too* quickly).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Wed Nov 21 14:43:13 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 14:43:58 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
In-Reply-To: <4744894F.9060700@pobox.com>
References: <4744894F.9060700@pobox.com>
Message-ID: <A8E5E31E-D076-4471-8BCA-E91C4715E934@gmail.com>


On Nov 21, 2007, at 1:38 PM, Frank Warmerdam wrote:

> Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing  
> the
> retraction and removal of source and binaries from normal locations.
>
> +1 from me

+1

> Howard, are you prepared to "release manage" a 1.4.4 release later  
> this week or over the weekend?

Yes, I may ask numerous questions about the finer details though.

Howard
From mateusz at loskot.net  Wed Nov 21 14:56:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 14:56:26 2007
Subject: [gdal-dev] Test
Message-ID: <47448D64.9060907@loskot.net>

This is test, please ignore it.
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Nov 21 15:01:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 15:01:52 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
In-Reply-To: <4744894F.9060700@pobox.com>
References: <4744894F.9060700@pobox.com>
Message-ID: <47448EA9.30206@loskot.net>

Frank Warmerdam wrote:
> Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing the
> retraction and removal of source and binaries from normal locations.
> 
> +1 from me

+1 from me

> Mateusz is backing out the offending ABI change,

Already done

http://trac.osgeo.org/gdal/ticket/1704#comment:8

> and is looking into mechanisms
> to test ABI compatability as part of stable release preparation. 

I will be back with results soon.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From dmorissette at mapgears.com  Wed Nov 21 15:03:11 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 15:04:11 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
In-Reply-To: <4744894F.9060700@pobox.com>
References: <4744894F.9060700@pobox.com>
Message-ID: <47448EFF.8010209@mapgears.com>

I'm +1 to retract 1.4.3 and release 1.4.4 as soon as practical...

... but let's cool down, the place is not on fire, 1.4.3 has been out in 
the wild for a few weeks already, a few more hours won't make much 
difference...

Daniel


Frank Warmerdam wrote:
> Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing the
> retraction and removal of source and binaries from normal locations.
> 
> +1 from me
> 
> Folks,
> 
> Pursuant to the ABI incompatability found, I'm seeking permission to
> retract the 1.4.3 release.  In fact, since speed is of the essence, I have
> already done so though I can't undo my changes if the PSC isn't in 
> agreement.
> 
> In addition to a fairly gdal specific announcement of the retraction, my
> intention would be to announce a GDAL 1.4.4 release fairly widely (wider
> than would normally be the case) along with the notice that 1.4.3 is 
> retracted.
> 
> Mateusz is backing out the offending ABI change, and is looking into 
> mechanisms
> to test ABI compatability as part of stable release preparation.  
> Howard, are
> you prepared to "release manage" a 1.4.4 release later this week or over 
> the
> weekend?  If not, I'm sure we could have Mateusz be release manager for 
> 1.4.4
> and you for an eventual 1.4.5.  I would like to push this release out 
> fairly
> quickly (but not *too* quickly).
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
From mateusz at loskot.net  Wed Nov 21 23:20:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 23:20:50 2007
Subject: [Gdal-dev] Building the new GeoJSON driver in MinGW
Message-ID: <4745039D.5000307@loskot.net>

Ari Jolma wrote:
>> Some things how the jsonc is configured make its compilation fail in
>> MinGW/MSYS:
>>
>> line config.h:95 needs to be
>>
>> #if defined(_MSC_VER) || defined(__MINGW32__)
>>
>> and lines printbuf:74 and 82 should be something like
>>
>> #if defined(WIN32) && !defined(__MINGW32__)

Ari,

Sorry but I've missed this post.
BTW, I think it's better to report such improvements/patches using Trac,
then they won't be forgotten :-)

>> Where could I find a GeoJSON example to try?

There is a bunch of .geojson files in autotest/ogr/data

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Nov 21 23:21:59 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 23:22:04 2007
Subject: [Gdal-dev] recent compile on cygwin?
Message-ID: <474503E7.10109@loskot.net>

Matt Wilkie wrote:
>> Perhaps you have it installed in different location than:
>>
>> /usr with /usr/include/xercesc
>> or
>> /usr/local with /usr/local/include/xercesc
>
> xerces files are located in /usr/include/xercesc

This location is correct, so Xerces prefix is /usr.

> and a single lib file:
> /usr/lib/libxerces-c25.dll.a. Full listing is attached.

I have no idea how cygwin works, but GDAL building configuration
expects to link against -lxerces-c. IOW, libxerces-c.so file is used.

Recently, I significantly improved Xerces detection for Unix

http://trac.osgeo.org/gdal/ticket/1988

(see last big comment)

and perhaps now it will work for you, but I'm still doing a palmistry.

> There is a note in /usr/share/doc/Cygwin/xerces-c-2.5.0.README which
> says "Also, since the library exposes C++ classes, then applications
> using the library should be built with the same version compiler,
> otherwise there will be link errors." Might this be what is happening?

The only thing I can say is "perhaps". Haven't used cygwin, so no
experience here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Thu Nov 22 00:18:22 2007
From: mateusz at loskot.net (mateusz@loskot.net)
Date: Thu Nov 22 00:18:24 2007
Subject: [gdal-dev] [GDAL Buildbot] failure on telascience-stable
Message-ID: <200711220518.lAM5IMhd007241@xblade14-2.telascience.org>

The Buildbot has detected a failed build of telascience-stable on GDAL.
Full details are available at:
 http://buildbot.osgeo.org:8500/builders/telascience-stable/builds/2

Buildbot URL: http://buildbot.osgeo.org:8500/

Buildslave for this Build: telascience-gdal

Build Reason: The web-page 'force build' button was pressed by 'mloskot': 

Build Source Stamp: HEAD
Blamelist: 

BUILD FAILED: failed test

Sincerely,
-- 
The OSGeo Buildbot
http://buildbot.osgeo.org

From mchapman at texelinc.com  Thu Nov 22 01:36:54 2007
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Nov 22 01:36:56 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
In-Reply-To: <47448EFF.8010209@mapgears.com>
References: <4744894F.9060700@pobox.com> <47448EFF.8010209@mapgears.com>
Message-ID: <001701c82cd2$12b168b0$38143a10$@com>

If anyone cares, I'm using 1.4.3 and it's been working great for me so far.
I'm on XP Pro using MS Visual Studio 2005.  By the way I think you guys have
made some really great additions/modifications to the library in the last
few releases.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Daniel Morissette
Sent: Wednesday, November 21, 2007 1:03 PM
To: gdal-dev
Subject: Re: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release

I'm +1 to retract 1.4.3 and release 1.4.4 as soon as practical...

... but let's cool down, the place is not on fire, 1.4.3 has been out in 
the wild for a few weeks already, a few more hours won't make much 
difference...

Daniel


Frank Warmerdam wrote:
> Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing the
> retraction and removal of source and binaries from normal locations.
> 
> +1 from me
> 
> Folks,
> 
> Pursuant to the ABI incompatability found, I'm seeking permission to
> retract the 1.4.3 release.  In fact, since speed is of the essence, I have
> already done so though I can't undo my changes if the PSC isn't in 
> agreement.
> 
> In addition to a fairly gdal specific announcement of the retraction, my
> intention would be to announce a GDAL 1.4.4 release fairly widely (wider
> than would normally be the case) along with the notice that 1.4.3 is 
> retracted.
> 
> Mateusz is backing out the offending ABI change, and is looking into 
> mechanisms
> to test ABI compatability as part of stable release preparation.  
> Howard, are
> you prepared to "release manage" a 1.4.4 release later this week or over 
> the
> weekend?  If not, I'm sure we could have Mateusz be release manager for 
> 1.4.4
> and you for an eventual 1.4.5.  I would like to push this release out 
> fairly
> quickly (but not *too* quickly).
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Thu Nov 22 04:17:59 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Nov 22 04:18:03 2007
Subject: [gdal-dev] Motion: Retract GDAL/OGR 1.4.3 Release
In-Reply-To: <4744894F.9060700@pobox.com>
References: <4744894F.9060700@pobox.com>
Message-ID: <f3b73b7d0711220117q2dda374bq95357ff88d8eb06d@mail.gmail.com>

+1

Tamas


2007/11/21, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To retract the GDAL/OGR 1.4.3 Release, including announcing the
> retraction and removal of source and binaries from normal locations.
>
> +1 from me
>
> Folks,
>
> Pursuant to the ABI incompatability found, I'm seeking permission to
> retract the 1.4.3 release.  In fact, since speed is of the essence, I have
> already done so though I can't undo my changes if the PSC isn't in agreement.
>
> In addition to a fairly gdal specific announcement of the retraction, my
> intention would be to announce a GDAL 1.4.4 release fairly widely (wider
> than would normally be the case) along with the notice that 1.4.3 is retracted.
>
> Mateusz is backing out the offending ABI change, and is looking into mechanisms
> to test ABI compatability as part of stable release preparation.  Howard, are
> you prepared to "release manage" a 1.4.4 release later this week or over the
> weekend?  If not, I'm sure we could have Mateusz be release manager for 1.4.4
> and you for an eventual 1.4.5.  I would like to push this release out fairly
> quickly (but not *too* quickly).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Thu Nov 22 14:54:16 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Nov 22 14:54:22 2007
Subject: [gdal-dev] Buildbot notifications and autobuild
Message-ID: <4745DE68.1060507@loskot.net>

Hi Folks,

Yesterday Hobu and I configured two features of Buildbot for GDAL.

1. E-mail notifications

Every time a build fails, short notification is sent to gdal-commits
mailing list. It can be tweaked so notifications are sent only if a
build fails (is red) but previous build was successful (green).

It's also possible to add new e-mail addresses to list of recipients,
so if anyone would like to get build notifications on his e-mail,
please send your address directly to me and I will add it.

2. Auto-builds triggered by svn commits.

If a commit arrives, post-commit hook sends notification to GDAL
buildbot. The buildbot starts timer and waits 120 secs.
If new commit arrives withing these 120 secs, the timer is reset for
next 120 secs.
If new commit does not arrive within this period, the buildbot starts a
build on *-quick builders.

Similar process run on *-full builders but the timer is set to 120
minutes, in order to avoid server overloads. So, new builds start
only if new commit does not arrive within 2 hours since last commit.

Theoretically, both options sounds useful and helpful.
However, this is experimental configuration and perhaps we will find it
not very convenient in future and people will start complaining about
server overload or high traffic on gdal-commit list.
As nothing is fixed in concrete, there is no problem disable these gadgets.

Please, report any problems, comments, questions.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Mario.Cruz at esa.int  Fri Nov 23 05:51:57 2007
From: Mario.Cruz at esa.int (Mario.Cruz@esa.int)
Date: Fri Nov 23 05:52:23 2007
Subject: [Gdal-dev] NetCDF driver bug fix
In-Reply-To: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
Message-ID: <OFA6C5ABF8.ACE8282B-ONC125739C.0038E8E4-C125739C.003BB00D@esa.int>

Sorry to revive a seemingly dead thread, but I was revisiting the code 
while upgrading to the now forbidden 1.4.3 release, and realized that the 
submitted patch is seriously ill, i.e. IT DOES NOT WORK for any attribute 
type except strings. Explaining why it does not work is left as an 
exercise for the reader.

Anyway, solved the reported bug with a smaller (and now hopefully 
type-safe) set of changes to the code, but I'll try to follow due 
procedure this time around and submit both the bug and suggested 
correction through the bug tracker system.

My apologies for wasting anyone's time on this issue.

Best regards,

Mario Cruz

> Attached follows a (seemingly) working patch for the NetCDF driver.
> 
> The ReadAttributes method was using a fixed-length array to store 
> attribute data, crashing when presented with an attribute whose data 
size 
> was larger than MAX_STR_LEN.
> 
> The patched version dynamically allocates enough memory to store the 
> attribute's string representation. It's a naive implementation, but it's 

> working well with the datasets I've been throwing at it. And anything is 

> better than fixed-length arrays + unknown-length strcpy.
> 
> Some remarks:
> - array pointer arithmetic done by hand, may impact platform portability
> - didn't have time to check for similar bugs in the rest of the driver
> - patched against 1.4.2 version
> - couldn't figure out if the code uses tabs/spaces or some evil 
> combination of both, so just spaced all the indentation
> 
> On a related note, is there any reason why variables with only one 
> dimension can't be made available as rasters of x*1 size? Didn't really 
> want to be adding yet another python module just to access that kind of 
> data.
> 
> Best regards, 
> 
> Mario Cruz
> 
From mateusz at loskot.net  Fri Nov 23 06:07:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov 23 06:07:53 2007
Subject: [Gdal-dev] NetCDF driver bug fix
In-Reply-To: <OFA6C5ABF8.ACE8282B-ONC125739C.0038E8E4-C125739C.003BB00D@esa.int>
References: <OFA6C5ABF8.ACE8282B-ONC125739C.0038E8E4-C125739C.003BB00D@esa.int>
Message-ID: <4746B482.7090808@loskot.net>

Mario.Cruz@esa.int wrote:
> Sorry to revive a seemingly dead thread, but I was revisiting the code 
> while upgrading to the now forbidden 1.4.3 release, and realized that the 
> submitted patch is seriously ill, i.e. IT DOES NOT WORK for any attribute 
> type except strings. Explaining why it does not work is left as an 
> exercise for the reader.

Mario,

Thanks for this review.

> Anyway, solved the reported bug with a smaller (and now hopefully 
> type-safe) set of changes to the code, but I'll try to follow due 
> procedure this time around and submit both the bug and suggested 
> correction through the bug tracker system.

Yes, this is a very good idea to use Trac for submitting patches.
Thanks for your contribution!


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From yrusinov at gmail.com  Fri Nov 23 06:32:48 2007
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri Nov 23 06:32:53 2007
Subject: [gdal-dev] OGRGeometry creation
Message-ID: <1ac023f40711230332l69dd9c7aqa28278742111c3dc@mail.gmail.com>

Dear Colleagues !

I try to create geometry object using wkt-string. I do
    OGRGeometry * poOGRGeom;
    const char* obWkt = "POLYGON((...,...))";
    char * pszWkt = new char [strlen (obWkt)];
    strncpy (pszWkt, obWkt, strlen (obWkt));
    OGRSpatialReference *ref = new OGRSpatialReference ();

    OGRErr ier = OGRGeometryFactory::createFromWkt (&pszWkt, ref,
&poOGRGeom);
    if (ier == OGRERR_NONE)
    {
        char ** wkt = new char*;
        wkt[0] = new char[1000];
        poOGRGeom->exportToWkt (wkt);
        ...
    }

This code works fine under Linux, but under Windows (Visual Studio 2003) it
fails on call of any function-member OGRGeometry class. Where is the
troubles ?

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071123/15fbc4fa/attachment.html
From yrusinov at gmail.com  Fri Nov 23 07:24:35 2007
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri Nov 23 07:24:37 2007
Subject: [gdal-dev] OGRGeometry creation
Message-ID: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>

Dear Colleagues !

I try to create geometry object using wkt-string. I do
    OGRGeometry * poOGRGeom;
    const char* obWkt = "POLYGON((...,...))";
    char * pszWkt = new char [strlen (obWkt)];
    strncpy (pszWkt, obWkt, strlen (obWkt));
    OGRSpatialReference *ref = new OGRSpatialReference ();

    OGRErr ier = OGRGeometryFactory::createFromWkt (&pszWkt, ref,
&poOGRGeom);
    if (ier == OGRERR_NONE)
    {
        char ** wkt = new char*;
        wkt[0] = new char[1000];
        poOGRGeom->exportToWkt (wkt);
        ...
    }

This code works fine under Linux, but under Windows (Visual Studio 2003) it
fails on call of any function-member OGRGeometry class. Where is the
troubles ?

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071123/e58a642c/attachment.html
From mateusz at loskot.net  Fri Nov 23 07:57:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov 23 07:57:49 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <1ac023f40711230332l69dd9c7aqa28278742111c3dc@mail.gmail.com>
References: <1ac023f40711230332l69dd9c7aqa28278742111c3dc@mail.gmail.com>
Message-ID: <4746CE46.4050903@loskot.net>

Yuriy Rusinov wrote:
> Dear Colleagues !
> 
> I try to create geometry object using wkt-string. I do
>
>     OGRGeometry * poOGRGeom;
>     const char* obWkt = "POLYGON((...,...))";
>     char * pszWkt = new char [strlen (obWkt)];

You need strlen(obWkt) + 1, to have room for \0 character

>     strncpy (pszWkt, obWkt, strlen (obWkt));
>     OGRSpatialReference *ref = new OGRSpatialReference ();

Not necessary, you can pass NULL instead of empty SRS.

>     OGRErr ier = OGRGeometryFactory::createFromWkt (&pszWkt, ref,
> &poOGRGeom);
>     if (ier == OGRERR_NONE)
>     {
>         char ** wkt = new char*;
>         wkt[0] = new char[1000];

Here is the bug.
You don't need to allocate memory for output wkt.

The manual says:

"ppszDstText - a text buffer is allocated by the program, and assigned
to the passed pointer."

http://www.gdal.org/ogr/classOGRGeometry.html#71184265101d21cffa5c50ee79afdd61

>         poOGRGeom->exportToWkt (wkt);
>         ...
>     }
> 
> This code works fine under Linux, but under Windows (Visual Studio 2003) it
> fails on call of any function-member OGRGeometry class. Where is the
> troubles ?

This is random problem caused by incorrect (re)allocation of output
buffer pointed above. Here is complete code of your example that
presents how correctly import/export WKT to/from OGRGeometry:


////////////////////////////////////////////////////////////////////
#include <ogrsf_frmts.h>
#include <iostream>
#include <cstdlib>
#include <cassert>

int main()
{
    OGRRegisterAll();

    OGRGeometry * poOGRGeom = NULL;
    const char* obWkt = "POLYGON((0 0,4 0,4 4,0 4,0 0),(1 1,2 1,2 2,1
2,1 1))";

    // Copy WKT to new 'iteratable' buffer
    std::size_t size = strlen(obWkt);
    char * pszWkt = new char [size + 1];
    memset(pszWkt, 0, size);
    strncpy(pszWkt, obWkt, size);

    // You don't need this, you can pass NULL
    // if you do not need specific SRS
    OGRSpatialReference *ref = new OGRSpatialReference ();

    // Use copy of ptr, as we need the original for deallocation
    // createFromWkt uses passed WKT ptr as iterator, so it will point
    // to pass-the-end after all
    char* p = pszWkt;
    OGRErr ier = OGRGeometryFactory::createFromWkt (&p, ref, &poOGRGeom);
    delete [] pszWkt;

    if (ier == OGRERR_NONE)
    {
        // exportToWkt will allocate memory for WKT
        char* wkt = NULL;
        poOGRGeom->exportToWkt(&wkt);
        assert(NULL != wkt);
        std::cout << wkt << std::endl;

        // Important cleanup
        CPLFree(wkt);
    }
    OGRGeometryFactory::destroyGeometry(poOGRGeom);

    return 0;
}
////////////////////////////////////////////////////////////////////

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From josegomez at gmx.net  Fri Nov 23 12:24:37 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Nov 23 12:24:40 2007
Subject: [gdal-dev] Dissolve polygon internal boundary
Message-ID: <20071123172437.25500@gmx.net>

Hi,
I noticed that this has already been raised in the list a couple of times, but no conclusive conclusion was reached (I think!). Let's say I want to dissolve the internal boundaries of polygons based on an attribute. There is an example (GNU R-centric) in <http://www.nceas.ucsb.edu/scicomp/GISSeminar/UseCases/PolygonDissolve/PolygonDissolve.html>.

Can this be done with OGR?

Cheers!
Jos?
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From mchapman at texelinc.com  Fri Nov 23 12:35:27 2007
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri Nov 23 12:37:27 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>
References: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>
Message-ID: <1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>

Look at your if statement.  You are saying if ier equals err_none is true when it should be ier not equal ogr_errnone.  U have a logical operator wrong for error check. Your code is the problem.

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: "Yuriy Rusinov" <yrusinov@gmail.com>

Date: Fri, 23 Nov 2007 15:24:35 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] OGRGeometry creation


Dear Colleagues !

I try to create geometry object using wkt-string. I do 
??? OGRGeometry * poOGRGeom;
??? const char* obWkt = "POLYGON((...,...))";
??? char * pszWkt = new char [strlen (obWkt)];
 ??? strncpy (pszWkt, obWkt, strlen (obWkt));
??? OGRSpatialReference *ref = new OGRSpatialReference ();

??? OGRErr ier = OGRGeometryFactory::createFromWkt (&pszWkt, ref, &poOGRGeom); 
??? if (ier == OGRERR_NONE) 
??? {
??????? char ** wkt = new char*;
??????? wkt[0] = new char[1000];
??????? poOGRGeom->exportToWkt (wkt);
??????? ...
??? }

This code works fine under Linux, but under Windows (Visual Studio 2003) it fails on call of any function-member OGRGeometry class. Where is the troubles ? 

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From yrusinov at gmail.com  Fri Nov 23 12:46:59 2007
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri Nov 23 12:47:01 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>
References: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>
	<1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>
Message-ID: <1ac023f40711230946x7a74e4acxadd03721cb6ac973@mail.gmail.com>

Thanks, I solved this problem. It was in memory allocation.

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071123/031a783a/attachment.html
From yrusinov at gmail.com  Fri Nov 23 13:07:53 2007
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri Nov 23 13:07:55 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <4746CE46.4050903@loskot.net>
References: <1ac023f40711230332l69dd9c7aqa28278742111c3dc@mail.gmail.com>
	<4746CE46.4050903@loskot.net>
Message-ID: <1ac023f40711231007q155034cfu1f6498348625bda9@mail.gmail.com>

Thanks a lot. This solved this problem.

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071123/24c68bab/attachment.html
From hobu.inc at gmail.com  Fri Nov 23 15:09:26 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Nov 23 15:10:19 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1
Message-ID: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>

All,

GDAL 1.4.4-RC1 has now been released for review.

http://download.osgeo.org/gdal/gdal-1.4.4-RC1.tar.gz
http://download.osgeo.org/gdal/gdal144-RC1.zip

Two major bugs were fixed in this release:

  - 1.4.3 broke ABI compatibility, which potentially broke plugin  
modules
     - http://trac.osgeo.org/gdal/ticket/2019
  - internal libtiff was updated to apply numerous improvements
     - http://trac.osgeo.org/gdal/ticket/1965
     - http://trac.osgeo.org/gdal/ticket/1948

This release also closes 13 other tickets:

http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.4

Please review and test this release candidate, and if no significant  
issues are found, I move that we promote it to the final release on  
Tuesday afternoon (Nov 27th).

Howard

From fabrice_martin2 at yahoo.fr  Fri Nov 23 15:19:35 2007
From: fabrice_martin2 at yahoo.fr (fabrice martin)
Date: Fri Nov 23 15:19:38 2007
Subject: [gdal-dev] problem with dstnodata and vrt in gdalwarp
Message-ID: <226283.41096.qm@web26604.mail.ukl.yahoo.com>

Hello,

I have a problem using dstnodata when the input is a vrt file: it 
looks as if dstnodata is not taken into account. Indeed, if I choose destination coordinates that are not completely overlapped by the source images, nodata areas are 
always black, whatever the value for dstnodata.

For example, I create a simple vrt with gdal_vrtmerge: 
gdal_vrtmerge.py -o test.vrt *.tif

If I reproject this vrt, nodata 
areas are black:
gdalwarp -of Gtiff -te 897000 6657000 898000 6658000 -s_srs 
"EPSG:27582" -t_srs "EPSG:2154" -tps -rc -tr 0.5 0.5 -dstnodata 255 -co INTERLEAVE=PIXEL test.vrt test_with_vrt.tif

If I reprojet directly 
the same *.tif images, nodata areas are white as expected:
gdalwarp -of 
GTiff -te 897000 6657000 898000 6658000 -s_srs "EPSG:27582" -t_srs 
"EPSG:2154" -tps -rc -tr 0.5 0.5  -dstnodata 255  -co 
INTERLEAVE=PIXEL  
*.tif test_with_tifs.tif

Could you confirm the problem ? If so, do you have any 
insight on where to look in the code to correct it ?
Thank 
you,

Fabrice.




      _____________________________________________________________________________ 
Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 
From mateusz at loskot.net  Fri Nov 23 15:46:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov 23 15:46:53 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>
References: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>
	<1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>
Message-ID: <47473C35.1020400@loskot.net>

mchapman@texelinc.com wrote:
> Look at your if statement.  You are saying if ier equals err_none is
> true when it should be ier not equal ogr_errnone.  U have a logical
> operator wrong for error check. Your code is the problem.

I don't think the condition is incorrectly defined.
AFAIU, Yuriy is trying to do:

1. import OGR geometry from WKT
2. if imported correctly
2.1 export OGR geometry back to WKT

The 2. is true if OGRERR_NONE is returned, then 2.1 is executed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From yrusinov at gmail.com  Fri Nov 23 16:26:50 2007
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri Nov 23 16:26:52 2007
Subject: [gdal-dev] OGRGeometry creation
In-Reply-To: <47473C35.1020400@loskot.net>
References: <1ac023f40711230424v1066dc6di720643c616b82f5a@mail.gmail.com>
	<1082375321-1195839441-cardhu_decombobulator_blackberry.rim.net-861878796-@bxe022.bisx.prod.on.blackberry>
	<47473C35.1020400@loskot.net>
Message-ID: <1ac023f40711231326u4e16aa91l51480512494c1d9d@mail.gmail.com>

>
> I don't think the condition is incorrectly defined.
> AFAIU, Yuriy is trying to do:
>
> 1. import OGR geometry from WKT
> 2. if imported correctly
> 2.1 export OGR geometry back to WKT


Of course, you are right. One problem was solved, but another (with
incorrect data from QT) arise. I try to solve it using QT forums. Thanks.


-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071124/c3119792/attachment.html
From warmerdam at pobox.com  Fri Nov 23 16:54:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 23 16:42:38 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
Message-ID: <47474C2E.80405@pobox.com>

Folks,

I have prepared 1.4.4 win32 binaries for GDAL based on RC1.  Feel free to
use these in testing.

   http://download.osgeo.org/gdal/win32/1.4.4

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jluis at ualg.pt  Fri Nov 23 19:01:30 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Nov 23 19:15:08 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 -- GOOD news
In-Reply-To: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
Message-ID: <474769DA.9090900@ualg.pt>

Hi all

By mistake I compiled this version with the Intel compiler and, contrary 
to a previous attempt, everything run smooth. The only exception was 
this warning
"d:\programas\gdal-1.4.4\port\cpl_string.cpp(796) : warning C4700: local 
variable  'args' used without having been initialized"

Joaquim Luis
From jluis at ualg.pt  Fri Nov 23 19:09:40 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Nov 23 19:15:48 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
Message-ID: <47476BC4.1080205@ualg.pt>

The netCDF driver is still broken.
I have repeatedly reported that netCDF COARDS compliant grids created by 
GMT have their header reported incorrectly.

fast example

grdmath -R-10/10/-10/10 -I1 = lixo.grd

C:\>gdalinfo NETCDF:"lixo.grd":z
Driver: netCDF/Network Common Data Format
Size is 21, 21
Coordinate System is `'
Origin = (-10.500000000000000,-10.500000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Metadata:
  NC_GLOBAL#Conventions=COARDS, CF-1.0
  NC_GLOBAL#title=lixo.grd
  NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 = lixo.grd
  NC_GLOBAL#GMT_version=GMT4.2
  NC_GLOBAL#node_offset=0
  z#long_name=z
  z#_FillValue=1.#QNAN0e+000
  z#actual_range=00
  z#coordinates=x y
  x#long_name=x
  x#actual_range=-1010
  y#long_name=y
  y#actual_range=-1010
Corner Coordinates:
Upper Left  ( -10.5000000, -10.5000000)            <===    WRONG  
Lower Left  ( -10.5000000,  10.5000000)
Upper Right (  10.5000000, -10.5000000)
Lower Right (  10.5000000,  10.5000000)
Center      (   0.0000000,   0.0000000)
...

I have also submitted a patch that corrects this problem
http://trac.osgeo.org/gdal/ticket/1926
why is it being ignored?

Joaquim Luis

From hobu.inc at gmail.com  Fri Nov 23 19:39:09 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Nov 23 19:40:03 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <47476BC4.1080205@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt>
Message-ID: <965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>

I don't know that you are being ignored, and what was submitted before  
the release candidate was not a patch, but an entire source file.   
Additionally, Frank has targeted this work until the 1.5 release, and  
it is not for the 1.4 branch.  The 1.5 beta is on the horizon shortly,  
but these changes will not be backported to the 1.4 branch unless we  
have a 1.4.5 branch and Frank determines that they are safe to backport.

Howard -- 1.4.4 Release Manager


On Nov 23, 2007, at 6:09 PM, Joaquim Luis wrote:

> The netCDF driver is still broken.
> I have repeatedly reported that netCDF COARDS compliant grids  
> created by GMT have their header reported incorrectly.
>
> fast example
>
> grdmath -R-10/10/-10/10 -I1 = lixo.grd
>
> C:\>gdalinfo NETCDF:"lixo.grd":z
> Driver: netCDF/Network Common Data Format
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,-10.500000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Metadata:
> NC_GLOBAL#Conventions=COARDS, CF-1.0
> NC_GLOBAL#title=lixo.grd
> NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 = lixo.grd
> NC_GLOBAL#GMT_version=GMT4.2
> NC_GLOBAL#node_offset=0
> z#long_name=z
> z#_FillValue=1.#QNAN0e+000
> z#actual_range=00
> z#coordinates=x y
> x#long_name=x
> x#actual_range=-1010
> y#long_name=y
> y#actual_range=-1010
> Corner Coordinates:
> Upper Left  ( -10.5000000, -10.5000000)            <===    WRONG   
> Lower Left  ( -10.5000000,  10.5000000)
> Upper Right (  10.5000000, -10.5000000)
> Lower Right (  10.5000000,  10.5000000)
> Center      (   0.0000000,   0.0000000)
> ...
>
> I have also submitted a patch that corrects this problem
> http://trac.osgeo.org/gdal/ticket/1926
> why is it being ignored?
>
> Joaquim Luis
>

From warmerdam at pobox.com  Fri Nov 23 21:19:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 23 20:50:35 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <47476BC4.1080205@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt>
Message-ID: <47478A2A.2020404@pobox.com>

Joaquim Luis wrote:
> The netCDF driver is still broken.
> I have repeatedly reported that netCDF COARDS compliant grids created by 
> GMT have their header reported incorrectly.
...
> I have also submitted a patch that corrects this problem
> http://trac.osgeo.org/gdal/ticket/1926
> why is it being ignored?

Joaquim,

Basically for a long time I was hoping that Denis might take care of
the NetCDF driver.  I'm afraid of it and imagine that once I dig into it
I'm going to have to spent quite a bit of time studying it to make sure
that the various patches offered for it don't just break other stuff.

In IRC Howard often writes "patches welcome".  That is true, but there is
still quite a bit of work required to review patches, apply them,
prepare test cases for the test stream and so forth.

I have the vague understanding that there are several bug reports, and
even substantial rewrites of the netcdf driver waiting in Trac, and I
just haven't felt up to addressing them.

It is possible that I might attack the various netcdf related trac tickets
for 1.5, or I might not.  Perhaps Mateusz will have time to, or perhaps not.
It's hard to say.

If you are willing to take responsibility for the driver, I'd be willing to
turn it over to you, but you would need to review all the available trac
tickets on it, synthesize them, prepare test cases, etc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Nov 23 21:52:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 23 21:21:09 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 -- GOOD news
In-Reply-To: <474769DA.9090900@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<474769DA.9090900@ualg.pt>
Message-ID: <474791FE.7010903@pobox.com>

Joaquim Luis wrote:
> Hi all
> 
> By mistake I compiled this version with the Intel compiler and, contrary 
> to a previous attempt, everything run smooth. The only exception was 
> this warning
> "d:\programas\gdal-1.4.4\port\cpl_string.cpp(796) : warning C4700: local 
> variable  'args' used without having been initialized"


Joaquim,

This is caused by a missing va_start() in the CSLAppendPrintf() function.
It seems I screwed up fixes for bug #1979 in r12683.  I'm not sure how
serious this is though.  As far as I can see, the only code using
CSLAppendPrintf() is in MITAB:

ogr/ogrsf_frmts/mitab/mitab_tabview.cpp:
	m_papszTABFnames = CSLAppendPrintf(m_papszTABFnames, "%s%s%d.tab",

ogr/ogrsf_frmts/mitab/mitab_tabview.cpp:
	m_papszTABFnames = CSLAppendPrintf(m_papszTABFnames,

Daniel - can you easily test the code this relates to? I have committed fixes
for this in trunk and 1.4 branch in case we need to cut a new RC with this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ari.jolma at tkk.fi  Sat Nov 24 06:02:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Nov 24 06:02:22 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <47474C2E.80405@pobox.com>
References: <47474C2E.80405@pobox.com>
Message-ID: <474804E2.9060701@tkk.fi>

Frank Warmerdam kirjoitti:
> Folks,
>
> I have prepared 1.4.4 win32 binaries for GDAL based on RC1.  Feel free to
> use these in testing.
>
>   http://download.osgeo.org/gdal/win32/1.4.4

I tried to drop it as a replacement (I had to change the name) to the 
libgdal-1.dll that gcc rpoduces in MSYS. The error message is 
"CPLGetLastErrorMsg could not be located in dll". And, no, I cant see it 
in the gdal14.dll (using the portable executable viewer in servant 
salamander). There is, however, _CPLGetLastErrorMsg@0. Why is it so, 
when there are for example CPLError (without _ and @0)?

I guess the answer is that in cpl_error.h CPLGetLastErrorMsg has 
CPL_STDCALL and CPLError does not. What's CPL_STDCALL and why is it needed?

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From even.rouault at mines-paris.org  Sat Nov 24 07:03:37 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov 24 07:03:44 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <474804E2.9060701@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
Message-ID: <200711241303.38872.even.rouault@mines-paris.org>

Hi,

First, I found the following discussion on CPL_STDCALL problems  :
http://www.nabble.com/Windows-linking-to-FWTools-gdal_i.lib-t1128647.html

I think you pointed out exactly where your problem is.

If you look at cpl_port.h, you can see :

#ifndef CPL_STDCALL
#if defined(_MSC_VER) && !defined(CPL_DISABLE_STDCALL)
#  define CPL_STDCALL     __stdcall
#else
#  define CPL_STDCALL
#endif
#endif

So, libgdal compiled with GCC/MSYS will ignore CPL_STDCALL and export symbols 
as 'cdecl' without any symbol decoration.

Whereas, libgdal14.dll compiled by Frank with MVSC 7.1  takes into account 
CPL_STDCALL  and exports these symbols with the _foo@X decorations.

Now, let's play a bit...

I've tried to compile the following c code into a DLL with 
i586-mingw32msvc-gcc (under Linux) :

foo.c :
int __declspec(dllexport) foo_cdecl();
int __declspec(dllexport) foo_cdecl() {}
int __declspec(dllexport) __stdcall foo_stdcall();
int __declspec(dllexport) __stdcall foo_stdcall() {}

Compiled with "i586-mingw32msvc-gcc foo.c -shared -o foo.dll", I get the 
following symbols :

[Ordinal/Name Pointer] Table
        [   0] foo_cdecl
        [   1] foo_stdcall@0

That confirms what is above. Except, that I would have 
expected "_foo_stdcall@0" instead of "foo_stdcall@0".
http://wyw.dcweb.cn/stdcall.htm which appears to be a great reference on that 
subject seems to confirm that GCC and MSVC don't decorate dllexport __stdcall 
symbols the same way...

Now, I've written foo.def to export foo_stdcall@0 as _foo_stdcall@0:
DESCRIPTION 'foo'
VERSION 1.0
EXPORTS
foo_cdecl
_foo_stdcall@0 = foo_stdcall@0

i586-mingw32msvc-gcc foo.c -c
i586-mingw32msvc-dllwrap --def foo.def -o foo.dll foo.o

And now, I get :	

[Ordinal/Name Pointer] Table
        [   0] _foo_stdcall@0
        [   1] foo_cdecl

Great victory !

So I guess that even if you change the above portion of cpl_port.h to #  
define CPL_STDCALL     __stdcall to recompile GDAL with gcc, you won't get 
something compatible, unless you use a DEF file and use alias symbols for all 
stdcall functions. Arf, these calling conventions / different compiler issues 
are a nightmare !

Best regards,
Even


Le Saturday 24 November 2007 12:02:58 Ari Jolma, vous avez ?crit?:
> Frank Warmerdam kirjoitti:
> > Folks,
> >
> > I have prepared 1.4.4 win32 binaries for GDAL based on RC1.  Feel free to
> > use these in testing.
> >
> >   http://download.osgeo.org/gdal/win32/1.4.4
>
> I tried to drop it as a replacement (I had to change the name) to the
> libgdal-1.dll that gcc rpoduces in MSYS. The error message is
> "CPLGetLastErrorMsg could not be located in dll". And, no, I cant see it
> in the gdal14.dll (using the portable executable viewer in servant
> salamander). There is, however, _CPLGetLastErrorMsg@0. Why is it so,
> when there are for example CPLError (without _ and @0)?
>
> I guess the answer is that in cpl_error.h CPLGetLastErrorMsg has
> CPL_STDCALL and CPLError does not. What's CPL_STDCALL and why is it needed?
>
> Ari
>
> > Best regards,


From ari.jolma at tkk.fi  Sat Nov 24 08:13:28 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Nov 24 08:12:18 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <200711241303.38872.even.rouault@mines-paris.org>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
Message-ID: <47482378.9020603@tkk.fi>

Even Rouault kirjoitti:
> Hi,
>
> First, I found the following discussion on CPL_STDCALL problems  :
> http://www.nabble.com/Windows-linking-to-FWTools-gdal_i.lib-t1128647.html
>   

Yes, AFAIK Roger is also using MSYS and MinGW to compile R-spatial for 
windows

> I think you pointed out exactly where your problem is.
>   

Well, I'm not so sure if it's my problem! :) see below...

> Whereas, libgdal14.dll compiled by Frank with MVSC 7.1  takes into account 
> CPL_STDCALL  and exports these symbols with the _foo@X decorations.
>   

ok, but why it's done for some and not all? And if it's needed for some, 
why not define it twice, i.e.:

const char CPL_DLL * CPL_STDCALL CPLGetLastErrorMsg( void );
const char CPL_DLL * CPLGetLastErrorMsg( void );

that would create quite a lot of extra stuff into headers but my guess 
is that it would make the resulting dll (made by VC) usable also in 
MinGW world (except that the name issue would still be there). But I'm 
still puzzled why _Foo@0 syntax is needed *only* for some functions? 
Because it seems that the programs (e.g. the exes in the package) need 
to know how to call functions in both syntaxes. Indeed, looking at 
gdal_rasterize.exe:

Import Table:
  gdal14.dll
    Import Adress Table:                0x000030B4
    Import Name Table:                  0x000036E0
    Time Date Stamp:                    0x00000000
    Index of first forwarder reference: 0x00000000

    0x00003968      2525   _GDALAllRegister@0
    0x00003956      2140   OGRRegisterAll
    0x00003934      2572   _GDALGeneralCmdLineProcessor@12

etc. and yes (from C API headers):
 
void CPL_DLL CPL_STDCALL GDALAllRegister( void );
void CPL_DLL OGRRegisterAll(void);

as was predictable...

Cheers,

Ari

>
>   
-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From schwehr at ccom.unh.edu  Sat Nov 24 12:09:07 2007
From: schwehr at ccom.unh.edu (schwehr@ccom.unh.edu)
Date: Sat Nov 24 12:09:23 2007
Subject: [gdal-dev] Compact bit representations of geometry for AIS binary
	messages?
Message-ID: <51761.75.192.85.57.1195924147.squirrel@webmail.ccom.unh.edu>

Hi All,

Sorry this is off topic, but I figured this is probably a good place
to ask this question as you all work with a wide range of systems.  If
you want to respond off list or comment on
http://goatbar.livejournal.com/314.html , that would probably be the
best.

I am looking to propose a couple a binary messages for maritime
communication that must specify regions in a very limited message
size.  I'd like to be able to handle a range of different geometries
using a couple different messages to obtain the most geometry being
sent with the minimum amount of bandwidth.  Something standard like
WKB would be nice, but uses too much space.  An example of the
existing message to define a point is the lat/lon fields in this
message:

http://vislab-ccom.unh.edu/~schwehr/software/noaadata/ais-messages/ais_msg_3.html
http://vislab-ccom.unh.edu/~schwehr/software/noaadata/ais-messages/structs-inc.xml

Where a point takes 55 bits.

I figure a circle is reasonable easy by just adding a radius.  For a
"rectangle", I'm wondering if a point with a dx and dy (in meters or
1/600000's of a degree) would be workable rather than two corners.

Then there comes the necessity of specifying an arbitrary polygon.  I'm
thinking that I have to bite the bullet and come up with a max number of
points two fit within the bit constraint of the max message size that I am
going to allow (368 bits).

Any thoughts?  I'm trying to propose a standard that doesn't do more harm
than good :)

Thanks much,
-kurt


From jluis at ualg.pt  Sat Nov 24 14:43:30 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Nov 24 14:43:27 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <47478A2A.2020404@pobox.com>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt> <47478A2A.2020404@pobox.com>
Message-ID: <47487EE2.2080805@ualg.pt>

Frank Warmerdam wrote:
> Basically for a long time I was hoping that Denis might take care of
> the NetCDF driver.  I'm afraid of it and imagine that once I dig into it
> I'm going to have to spent quite a bit of time studying it to make sure
> that the various patches offered for it don't just break other stuff.

Frank,

I understand that you must verify what the submitted patches do and that 
takes time an effort.
In fact I think all submitters count on that.
However, it was you who wrote "I've made non-trivial changes to the 
netcdf driver"
so I though that you have decided to clean up a bit those netCDF issues.
The bug I'm referring is a relatively simple one to correct and that is 
why I have a bit
difficulty to understand why is it being postponed, but that's ok with 
me.  I don't even
use gdal to read netCDF files.

> If you are willing to take responsibility for the driver, I'd be 
> willing to
> turn it over to you, but you would need to review all the available trac
> tickets on it, synthesize them, prepare test cases, etc.

Frank, I'll have to decline that for now because I feel that I wouldn't 
honor that responsibility without
a substantial studying of both the netCDF library and other parts of the 
gdal code.

Cheers
Joaquim
From jluis at ualg.pt  Sat Nov 24 14:51:44 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Nov 24 14:51:29 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt>
	<965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>
Message-ID: <474880D0.6060100@ualg.pt>

Howard Butler wrote:
> I don't know that you are being ignored, 

Howard,

I didn't take it personally.

> and what was submitted before the release candidate was not a patch, 
> but an entire source file.

That is not entirely true. I submitted a complete file on 19 Sept, and a 
patch on 17-Nov, that is before 1.4.4 RC1.
The last entry, dated on 23-Nov was an update. This is what it reads on 
the track ticket:

"Update patch to account only to "my own" changes, which deal with error 
reporting limits of grids created by GMT. The previous version also 
corrected for the bug of reading attributes reported by Mario Cruz but 
since he said that his patch was incomplete I'm retiring my 
implementation of his patch"

Joaquim

From warmerdam at pobox.com  Sat Nov 24 15:54:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Nov 24 15:54:44 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <47482378.9020603@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
Message-ID: <47488F82.8010604@pobox.com>

Ari Jolma wrote:
>> Whereas, libgdal14.dll compiled by Frank with MVSC 7.1  takes into 
>> account CPL_STDCALL  and exports these symbols with the _foo@X 
>> decorations.
>>   
> 
> ok, but why it's done for some and not all? And if it's needed for some, 
> why not define it twice, i.e.:

Ari,

Basically, I added CPL_STDCALL for stuff I wanted to call from VB6
and didn't bother applying it to everything.

> const char CPL_DLL * CPL_STDCALL CPLGetLastErrorMsg( void );
> const char CPL_DLL * CPLGetLastErrorMsg( void );

I'm already appalled by the complexity of the externa GDAL API and would
not be keen on doubling it.  And anyways, we would need some way to produce
CPL_STDCALL and non CPL_STDCALL implementations to match the paired
prototypes.

Potentially we could deprecate STDCALL support in 1.5 and just #define
it to nothing by default in VC builds if it is causing a big problem, though
I'm not clear on why it is a problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From 2voodoo at gmx.de  Sat Nov 24 16:53:42 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Sat Nov 24 16:53:38 2007
Subject: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
In-Reply-To: <200711061157.4869@centrum.cz>
References: 11010908.11215@centrum.cz>
	<200711010908.11215@centrum.cz>	<472EF97B.4060006@gmx.de>
	<200711051412.17853@centrum.cz> <200711061157.4869@centrum.cz>
Message-ID: <47489D66.2070309@gmx.de>

jetelus@centrum.cz schrieb:

> > _____________________________________________________________
> >   
>   
>> >> Od: jetelus@centrum.cz
>> >> Komu: <gdal-dev@lists.maptools.org>
>> >> Datum: 05.11.2007 14:22
>> >> P?edm?t: Re: [Gdal-dev] Windows CE - GDALDatasetRasterIO error
>> >>
>> >>     
>>     
>>> >>> jetelus@centrum.cz schrieb:
>>> >>>       
>>>       
>>>>> >>>>> jetelus@centrum.cz wrote:
>>>>> >>>>>     
>>>>> >>>>>           
>>>>>           
>>>>>>>> >>>>>>>> Hi, I open and display raster without problems but when I
>>>>>>>> >>>>>>>> try zooming I get CE_Failure from GDALDatasetRasterIO with
>>>>>>>> >>>>>>>> this error message using GDAL 1.4.2:
>>>>>>>> >>>>>>>>
>>>>>>>> >>>>>>>> "Assertion `nLockCount == 0' failed in file `..\..\..\gcore
>>>>>>>> >>>>>>>> \gdalrasterblock.cpp', line 219"
>>>>>>>> >>>>>>>> (and app crashs)
>>>>>>>> >>>>>>>>
>>>>>>>> >>>>>>>> and this error message using GDAL 1.4.3:
>>>>>>>> >>>>>>>>
>>>>>>>> >>>>>>>> "Out of memory allocating 59765 byte raster cache block."
>>>>>>>> >>>>>>>> (its little better becasuse app doesnt crash)
>>>>>>>> >>>>>>>>
>>>>>>>> >>>>>>>> RASTER INFO:
>>>>>>>> >>>>>>>> bpp: 1
>>>>>>>> >>>>>>>> compression: LZW
>>>>>>>> >>>>>>>> resolution: 11953 x 10268.
>>>>>>>> >>>>>>>> file size: 658kB
>>>>>>>> >>>>>>>>
>>>>>>>> >>>>>>>> When I convert this raster to 4 bits per pixel everything
>>>>>>>> >>>>>>>> is ok and I get no errors but raster file size grows to
>>>>>>>> >>>>>>>> 1.7MB. Any ideas? Thx.
>>>>>>>> >>>>>>>>           
>>>>>>>> >>>>>>>>                 
>>>>>>>>                 
>>>>>>> >>>>>>> I don't know what device you have but you're trying to open ~120 MB
>>>>>>> >>>>>>> raster in one shot, on mobile device.
>>>>>>> >>>>>>> The error message is clear to me, you're dealing without of memory issue.
>>>>>>> >>>>>>>
>>>>>>> >>>>>>> IMHO, it's not a good idea to feed mobile device with images of that
>>>>>>> >>>>>>> big. Better tile them into smaller pieces, use zoom levels, etc.
>>>>>>> >>>>>>> GDAL for Windows CE gives you with tools to solve this problem.
>>>>>>> >>>>>>>
>>>>>>> >>>>>>> Keep in mind that "GDAL for Windows CE" does not mean you can use all
>>>>>>> >>>>>>> GDAL features on a mobile device the same way as on normal workstation.
>>>>>>> >>>>>>> There are obvious hardware limitations you can not overcome.
>>>>>>> >>>>>>>
>>>>>>> >>>>>>> Cheers
>>>>>>> >>>>>>> --
>>>>>>> >>>>>>> Mateusz Loskot
>>>>>>> >>>>>>> http://mateusz.loskot.net
>>>>>>> >>>>>>>
>>>>>>> >>>>>>>         
>>>>>>> >>>>>>>               
>>>>>>>               
>>>>>> >>>>>> Thank you, I understand but why it works with 4 bpp version of same raster
>>>>>> >>>>>> which is even bigger?
>>>>>> >>>>>>       
>>>>>> >>>>>>             
>>>>>>             
>>>>> >>>>> You wrote that you don't get any errors, but does it mean you can load it
>>>>> >>>>> and display?
>>>>> >>>>>
>>>>> >>>>> Perhaps there is a bug, we can not exclude this option  :-) 
>>>>> >>>>> If you want, you can send me your image file and piece of code presenting
>>>>> >>>>> what are you doing exactly, then I will be able to investigate the problem.
>>>>> >>>>>
>>>>> >>>>> Cheers
>>>>> >>>>> -- 
>>>>> >>>>> Mateusz Loskot
>>>>> >>>>> http://mateusz.loskot.net
>>>>> >>>>>
>>>>> >>>>>     
>>>>> >>>>>           
>>>>>           
>>>> >>>> Yes, I can load and display image. I get this error only when zooming.
>>>> >>>> (and no errors at all for 4bpp version)
>>>> >>>>
>>>> >>>> I have this code:
>>>> >>>> (Windows Mobile 2003 Second Edition)
>>>> >>>>
>>>> >>>>  --------------------------------------------------------------------------------
>>>> >>>>  ...
>>>> >>>>  int panBandMap[1];
>>>> >>>>  panBandMap[0] = 1;
>>>> >>>>
>>>> >>>>  unsigned char* pData = (unsigned char*) malloc(nBufXSize * nBufYSize);
>>>> >>>>
>>>> >>>>  if (!pData)
>>>> >>>>  {
>>>> >>>> 	CString msg("Not enough memory.");
>>>> >>>> 	TRACE(msg);
>>>> >>>> 	MessageBox(NULL,msg,NULL,0);
>>>> >>>> 	return false;
>>>> >>>>  }
>>>> >>>>
>>>> >>>>  CPLErr e=GDALDatasetRasterIO(HDataset, GF_Read, nXOff, nYOff, nXSize, nYSize,
>>>> >>>>         pData, nBufXSize, nBufYSize, GDT_Byte, 1, panBandMap, 1, nBufXSize, 1);
>>>> >>>>
>>>> >>>>  if (e != CE_None)
>>>> >>>>  {
>>>> >>>>         free(pData);
>>>> >>>> 	CString msg(CPLGetLastErrorMsg());
>>>> >>>> 	TRACE(msg);
>>>> >>>> 	MessageBox(NULL,msg,NULL,0);
>>>> >>>>         return false;
>>>> >>>>  }
>>>> >>>>  ...
>>>> >>>>  show loaded raster
>>>> >>>>  ...
>>>> >>>>  free(pData);
>>>> >>>>  --------------------------------------------------------------------------------
>>>> >>>>
>>>> >>>> works for whole image:
>>>> >>>>
>>>> >>>> nXOff = 0
>>>> >>>> nYOff = 0
>>>> >>>> nXSize = 11953
>>>> >>>> nYSize = 10268
>>>> >>>> nBufXSize = 224
>>>> >>>> nBufYSize = 192
>>>> >>>>
>>>> >>>> gives "Out of memory allocating 59765 byte raster cache block." for
>>>> >>>> raster part (same for similar areas when zooming):
>>>> >>>>
>>>> >>>> nXOff = 3011
>>>> >>>> nYOff = 1571
>>>> >>>> nXSize = 7115
>>>> >>>> nYSize = 6561
>>>> >>>> nBufXSize = 248
>>>> >>>> nBufYSize = 228
>>>> >>>>
>>>> >>>> Image is here (450kB):
>>>> >>>>
>>>> >>>> http://rapidshare.com/files/67552472/tif_lzw.rar.html
>>>> >>>>
>>>> >>>> Thx for your time.
>>>> >>>>
>>>> >>>> _______________________________________________
>>>> >>>> Gdal-dev mailing list
>>>> >>>> Gdal-dev@lists.maptools.org
>>>> >>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>> >>>>
>>>> >>>>   
>>>> >>>>         
>>>>         
>>> >>> Hi,
>>> >>>
>>> >>> I tryed your image out with my code and was surprised that my code can
>>> >>> handle that large images  ;)  - so just a question: Are there overviews in
>>> >>> the image?
>>> >>>
>>> >>> With my code I was able to pan and zoom around - but after about 8
>>> >>> actions (I do not know exactly what the problem is - well, I will look
>>> >>> after it) I get the same error with the same amount of memory:
>>> >>> Return: 3
>>> >>> Last Error: Out of memory allocating 59765 byte raster cache block./
>>> >>>
>>> >>> This error occured one time after I zoomed in (with about factor 2) and
>>> >>> another time when I zoomed out (about factor 0.4) -but not all the time.
>>> >>> I was also abtle to zoom deep in and out.
>>> >>> With only panning I get this error not that fast I think.
>>> >>>
>>> >>> I don't know if this helps- but I try to test some more tonight.
>>> >>>
>>> >>> Bye,
>>> >>> Tom
>>> >>>
>>> >>>       
>>>       
>> >> Hi,
>> >> thx for testing the image. I tryed to zoom to very small areas and it works.
>> >> So I added check for free memory before and after GDALDatasetRasterIO call
>> >> and discovered there is 11 MB difference. This is probably reason why all
>> >> following operations with larger areas are out of memory.
>> >>
>> >> _______________________________________________
>> >> Gdal-dev mailing list
>> >> Gdal-dev@lists.maptools.org
>> >> http://lists.maptools.org/mailman/listinfo/gdal-dev
>> >>
>> >>     
>>     
> >
> > Finally I solved it! I was hunting that lost memory and I
> > discovered there is cache system implemented in GDAL  :-) 
> > Problem is it's default size - 40 MB - too much for CE.
> > I set it to 4 MB using GDALSetCacheMax() and all errors are
> > gone - lol I suck I know  :)  but it would be nice to add some
> > note to GDALDatasetRasterIO documentation - something like
> > there is cache system which memory usage can be controlled.
> > I can display even 5 MB JPEGs now on CE! Have a nice day!
> >
> > to Tom: There are no overviews in that image. BTW how are you
> > doing with that CCITTFax? I am interested in it too  :) 
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >   
>   
I read this message somehow too late - sorry.
This tip works also for me quite well - thank you.
Up to now I was not able to solve the problem with CCITTFax - I just can
not read it with GDAL (see the other thread from November 2.)
Have you had any success with this?

Bye,
Tom



From ari.jolma at tkk.fi  Sun Nov 25 06:07:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sun Nov 25 06:06:01 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <47488F82.8010604@pobox.com>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi> <47488F82.8010604@pobox.com>
Message-ID: <4749575D.7050606@tkk.fi>

Frank Warmerdam kirjoitti:
>
> I'm not clear on why it is a problem.

I did not get there but quite. Using information from

http://www.mingw.org/mingwfaq.shtml#faq-msvcdll
and
http://www.geocities.com/yongweiwu/stdcall.htm

and writing a small Perl program (I call it def.pl here):
8<--------
while (<STDIN>) {
    $a = $_;
    print $_;
    if (/^_/) {
        chomp;
        s/\r//;
        s/^_//;
        s/\@\d+$//;
        print "$_ = $a";
    }
}
8<--------

and running commands (these are MinGW tools)
pexports gdal14.dll | perl def.pl > gdal14.def
dlltool -U -d gdal14.def -l libgdal14.a

and changing Makefile.PL to link to gdal14: "-lgdal14" I get to the 
point where g++  complains only about these:

gdal_wrap.o:gdal_wrap.cpp:(.text+0xee1f): undefined reference to 
`GDALColorTable::GDALColorTable(GDALPaletteInterp)'

i.e., about the parts in the bindings, which use the C++ API of GDAL. 
This is where I stop since I have no idea how to create aliases for 
them, which g++ would understand.

Luckily 1.5 will use C API for colortable, so there's hope. I'll try 
this same procedure once there's 1.5 binaries. Probably it could be 
streamlined into Makefile.PL for the Perl bindings for Windows at least.

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From jluis at ualg.pt  Sun Nov 25 14:47:16 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Nov 25 14:47:06 2007
Subject: [gdal-dev] HDF4 trouble files
In-Reply-To: <474880D0.6060100@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>	<47476BC4.1080205@ualg.pt>	<965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>
	<474880D0.6060100@ualg.pt>
Message-ID: <4749D144.9040705@ualg.pt>

Hi

I'm having troubles reading some of files available at
http://oceancolor.gsfc.nasa.gov
In particular the SST files but not the ocean color files.

What is happening is that on the problematic files

GDALGetRasterCount( hDataset );
 
is returning 0, which is fatal to my gdalread mex file.

Here is an example file
http://oceancolor.gsfc.nasa.gov/cgi/getfile/T20061822006212.L3m_MO_SST_9.bz2
Note that running gdalinfo on it does not print the
Band 1 Block= ...

since that part of the code is inside a loop
for( iBand = 0; iBand < GDALGetRasterCount( hDataset ); iBand++ )

and it's not executed since GDALGetRasterCount( hDataset ) == 0


Joaquim Luis
From ivan.lucena at pmldnet.com  Sun Nov 25 16:13:28 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Sun Nov 25 16:13:35 2007
Subject: [gdal-dev] HDF4 trouble files
In-Reply-To: <4749D144.9040705@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>	<47476BC4.1080205@ualg.pt>	<965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>	<474880D0.6060100@ualg.pt>
	<4749D144.9040705@ualg.pt>
Message-ID: <4749E578.10308@pmldnet.com>

Joaquim,

Calling GetRasterCount from an HDF4 will always return 0 if you use only 
the file name to open it. In order to "see" bands you need to specify 
the subdataset string [http://www.gdal.org/frmt_hdf4.html] when you open 
it. And in order to see the subdatasets list you need to check the 
metadata, ex.: 
[http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalinfo.c#L284]

Best regards,

Ivan

Joaquim Luis wrote:
> Hi
> 
> I'm having troubles reading some of files available at
> http://oceancolor.gsfc.nasa.gov
> In particular the SST files but not the ocean color files.
> 
> What is happening is that on the problematic files
> 
> GDALGetRasterCount( hDataset );
> 
> is returning 0, which is fatal to my gdalread mex file.
> 
> Here is an example file
> http://oceancolor.gsfc.nasa.gov/cgi/getfile/T20061822006212.L3m_MO_SST_9.bz2 
> 
> Note that running gdalinfo on it does not print the
> Band 1 Block= ...
> 
> since that part of the code is inside a loop
> for( iBand = 0; iBand < GDALGetRasterCount( hDataset ); iBand++ )
> 
> and it's not executed since GDALGetRasterCount( hDataset ) == 0
> 
> 
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From jluis at ualg.pt  Sun Nov 25 16:45:14 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Nov 25 16:45:00 2007
Subject: [gdal-dev] HDF4 trouble files
In-Reply-To: <4749E578.10308@pmldnet.com>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>	<47476BC4.1080205@ualg.pt>	<965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>	<474880D0.6060100@ualg.pt>
	<4749D144.9040705@ualg.pt> <4749E578.10308@pmldnet.com>
Message-ID: <4749ECEA.1090900@ualg.pt>

OK
Excuse me guys, it was a false error report. I was used to load the 
color files with no problem and I got hanged with the sst ones

... but I still have this other situation

This file reports 0s for all X's
http://oceancolor.gsfc.nasa.gov/cgi/getfile/S20061822006212.L3m_MO_L555_9.bz2
It may obviously be a file's internal error. but I have no way to tell it.

....
Corner Coordinates:
Upper Left  (       0.000,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
Lower Left  (       0.000,-10018754.171) (  0d 0'0.01"E, 90d 0'0.00"S)
Upper Right (       0.000,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
Lower Right (       0.000,-10018754.171) (  0d 0'0.01"E, 90d 0'0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)

Joaquim

> Joaquim,
>
> Calling GetRasterCount from an HDF4 will always return 0 if you use 
> only the file name to open it. In order to "see" bands you need to 
> specify the subdataset string [http://www.gdal.org/frmt_hdf4.html] 
> when you open it. And in order to see the subdatasets list you need to 
> check the metadata, ex.: 
> [http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalinfo.c#L284]
>
> Best regards,
>
> Ivan
>
> Joaquim Luis wrote:
>> Hi
>>
>> I'm having troubles reading some of files available at
>> http://oceancolor.gsfc.nasa.gov
>> In particular the SST files but not the ocean color files.
>>
>> What is happening is that on the problematic files
>>
>> GDALGetRasterCount( hDataset );
>>
>> is returning 0, which is fatal to my gdalread mex file.
>>
>> Here is an example file
>> http://oceancolor.gsfc.nasa.gov/cgi/getfile/T20061822006212.L3m_MO_SST_9.bz2 
>>
>> Note that running gdalinfo on it does not print the
>> Band 1 Block= ...
>>
>> since that part of the code is inside a loop
>> for( iBand = 0; iBand < GDALGetRasterCount( hDataset ); iBand++ )
>>
>> and it's not executed since GDALGetRasterCount( hDataset ) == 0
>>
>>
>> Joaquim Luis
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>

From warmerdam at pobox.com  Sun Nov 25 17:03:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Nov 25 17:00:40 2007
Subject: [gdal-dev] HDF4 trouble files
In-Reply-To: <4749ECEA.1090900@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt>	<965863CB-5B64-4024-B050-DF3ABB04A75B@gmail.com>
	<474880D0.6060100@ualg.pt> <4749D144.9040705@ualg.pt>
	<4749E578.10308@pmldnet.com> <4749ECEA.1090900@ualg.pt>
Message-ID: <4749F11D.6030708@pobox.com>

Joaquim Luis wrote:
> OK
> Excuse me guys, it was a false error report. I was used to load the 
> color files with no problem and I got hanged with the sst ones
> 
> ... but I still have this other situation
> 
> This file reports 0s for all X's
> http://oceancolor.gsfc.nasa.gov/cgi/getfile/S20061822006212.L3m_MO_L555_9.bz2 
> 
> It may obviously be a file's internal error. but I have no way to tell it.
> 
> ....
> Corner Coordinates:
> Upper Left  (       0.000,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
> Lower Left  (       0.000,-10018754.171) (  0d 0'0.01"E, 90d 0'0.00"S)
> Upper Right (       0.000,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
> Lower Right (       0.000,-10018754.171) (  0d 0'0.01"E, 90d 0'0.00"S)
> Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)

Joaquim,

I have confirmed this problem.  It turns out to be a problem transforming
the world corners (-180,90) to equirectangular.  Due to complex internal
issues it is hard to do this properly for projections that are internally
treated as spherical.  Grr.

Could you file a ticket on this issue?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Mon Nov 26 02:56:42 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Nov 26 02:57:24 2007
Subject: [gdal-dev] Callbacks for next-gen Python bindings
Message-ID: <CBB1A6AF-A6B3-47E3-8219-3FAA3C3B2B79@gmail.com>

All,

I have just committed rudimentary typemaps and support code for Python  
function callbacks and the generic GDAL TermProgress methods in the  
next-gen interface files.  This was one of the last major pieces of  
missing functionality that existed in the old-gen bindings that was  
preventing us from porting over a number of scripts in ./pymod.

Additionally, I have created a new interface file, Operations.i, and  
placed GDAL raster operations like ComputeMedianCutPCT, DitherRGB2PCT,  
and ReprojectImage in this file to de-bulk gdal.i, which was getting a  
little bit bloated after adding in the new methods.

I would like to request making a change to Driver.CreateCopy.  It is  
currently missing arguments for callback and callback_data, which  
existed in the old-gen bindings.  I propose adding them and having  
them default to NULL as is currently done.  Does anyone foresee an  
issue with doing so?

Howard
From mateusz at loskot.net  Mon Nov 26 05:58:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 05:58:29 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <200711241303.38872.even.rouault@mines-paris.org>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
Message-ID: <54026.84.10.81.30.1196074703.squirrel@loskot.net>

Even Rouault wrote:
> Hi,
>
> First, I found the following discussion on CPL_STDCALL problems  :
> http://www.nabble.com/Windows-linking-to-FWTools-gdal_i.lib-t1128647.html
>
> I think you pointed out exactly where your problem is.
>
> If you look at cpl_port.h, you can see :
>
> #ifndef CPL_STDCALL
> #if defined(_MSC_VER) && !defined(CPL_DISABLE_STDCALL)
> #  define CPL_STDCALL     __stdcall
> #else
> #  define CPL_STDCALL
> #endif
> #endif
>
> So, libgdal compiled with GCC/MSYS will ignore CPL_STDCALL and export
> symbols as 'cdecl' without any symbol decoration.

Yes. cdecl is a default convention used in C programs, C Standard Library,
as well as in C++ global functions. However, __stdcall is usually faster,
so preferred when using Visual C++ (also used as default convention in
Win32 world).

> Whereas, libgdal14.dll compiled by Frank with MVSC 7.1  takes into account
> CPL_STDCALL  and exports these symbols with the _foo@X decorations.

Yes, as mangled name with X as encoded size of input arguments.

> Now, let's play a bit...
>
> I've tried to compile the following c code into a DLL with
> i586-mingw32msvc-gcc (under Linux) :
>
> foo.c :
> int __declspec(dllexport) foo_cdecl();
> int __declspec(dllexport) foo_cdecl() {}
> int __declspec(dllexport) __stdcall foo_stdcall();
> int __declspec(dllexport) __stdcall foo_stdcall() {}
>
> Compiled with "i586-mingw32msvc-gcc foo.c -shared -o foo.dll", I get the
> following symbols :
>
> [Ordinal/Name Pointer] Table
>         [   0] foo_cdecl
>         [   1] foo_stdcall@0
>
> That confirms what is above. Except, that I would have
> expected "_foo_stdcall@0" instead of "foo_stdcall@0".

It's just how MinGW mangles function names. Simply, it does not prefix a
name, unlike Visual C++ where _ is used as a name prefix. Here is the
mangling schema explained:

http://msdn2.microsoft.com/en-us/library/zxk0tw93(VS.71).aspx

> http://wyw.dcweb.cn/stdcall.htm which appears to be a great reference on
> that subject seems to confirm that GCC and MSVC don't decorate dllexport
> __stdcall symbols the same way...

Yes, and not only these two differ in this subject.
Almost all compilers use their own decoration patterns:

http://en.wikipedia.org/wiki/Name_mangling#How_different_compilers_mangle_the_same_functions

This is well-known part of so called DLL Hell :-)

Names mangling is a part of "type-safe linking" feature used by C++
compilers and linker. This feature makes it possible to overload functions
(class members, etc.), because it assures parameters are passed correctly.
When compilers build an object from a C++ class, all names
of member functions have to be encoded to include all information about
function prototype, return type, etc. to distinguish all overloaded
symbols.

The problem is that implementation of type-safe linking is not standardized
and different C++ compiler vendors implement it differently.
Therefore, there are many different mangling schemes.

One possible workaround is to use .DEF files and assign ordinals to
functions but even then we'll need to provide different
import libraries for different compilers/linkers.

http://msdn2.microsoft.com/en-us/library/d91k01sh(VS.80).aspx

> Now, I've written foo.def to export foo_stdcall@0 as _foo_stdcall@0:
> DESCRIPTION 'foo'
> VERSION 1.0
> EXPORTS
> foo_cdecl
> _foo_stdcall@0 = foo_stdcall@0
>
> i586-mingw32msvc-gcc foo.c -c
> i586-mingw32msvc-dllwrap --def foo.def -o foo.dll foo.o
>
> And now, I get :
>
> [Ordinal/Name Pointer] Table
>         [   0] _foo_stdcall@0
>         [   1] foo_cdecl
>
> Great victory !

Unfortunately, it introduces another problem - huge maintenance overhead.
We will need to provide .DEF files per compiler, with names
mangled according to specific decoration schema used by particular compiler.

> So I guess that even if you change the above portion of cpl_port.h to #
> define CPL_STDCALL     __stdcall to recompile GDAL with gcc, you won't get
> something compatible, unless you use a DEF file and use alias symbols for
> all stdcall functions.

Yes.

> Arf, these calling conventions / different compiler
> issues are a nightmare !

The DLL Hell. And this is one of the important reasons why Component Object
Model (COM) was invented and has been used so widely in the Microsoft world.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Mon Nov 26 06:10:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 06:10:17 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <47482378.9020603@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
Message-ID: <54052.84.10.81.30.1196075409.squirrel@loskot.net>

Ari Jolma wrote:
> Even Rouault kirjoitti:
>> Hi,
>>
>> First, I found the following discussion on CPL_STDCALL problems  :
>> http://www.nabble.com/Windows-linking-to-FWTools-gdal_i.lib-t1128647.html
>>
>
> Yes, AFAIK Roger is also using MSYS and MinGW to compile R-spatial for
> windows
>
>> I think you pointed out exactly where your problem is.
>>
>
> Well, I'm not so sure if it's my problem! :) see below...
>
>> Whereas, libgdal14.dll compiled by Frank with MVSC 7.1  takes into
>> account
>> CPL_STDCALL  and exports these symbols with the _foo@X decorations.
>>
>
> ok, but why it's done for some and not all? And if it's needed for some,
> why not define it twice, i.e.:
>
> const char CPL_DLL * CPL_STDCALL CPLGetLastErrorMsg( void );
> const char CPL_DLL * CPLGetLastErrorMsg( void );
>
> that would create quite a lot of extra stuff into headers but my guess
> is that it would make the resulting dll (made by VC) usable also in
> MinGW world (except that the name issue would still be there).

DLL built with MingGW will be usable with Visual C++ (and vice versa)
only if separete/dedicated import libraries are prepared. Having .DEF file
it's easier than not having it, but still, dedicated binary is required.

> But I'm
> still puzzled why _Foo@0 syntax is needed *only* for some functions?

Mangling is required for C++ functions, class members functions,
overloaded functions.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Mon Nov 26 06:14:29 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 06:14:36 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <4749575D.7050606@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi> <47488F82.8010604@pobox.com>
	<4749575D.7050606@tkk.fi>
Message-ID: <54068.84.10.81.30.1196075669.squirrel@loskot.net>

Ari Jolma wrote:
> [...]
> and running commands (these are MinGW tools)
> pexports gdal14.dll | perl def.pl > gdal14.def
> dlltool -U -d gdal14.def -l libgdal14.a
>
> and changing Makefile.PL to link to gdal14: "-lgdal14" I get to the
> point where g++  complains only about these:
>
> gdal_wrap.o:gdal_wrap.cpp:(.text+0xee1f): undefined reference to
> `GDALColorTable::GDALColorTable(GDALPaletteInterp)'
>
> i.e., about the parts in the bindings, which use the C++ API of GDAL.
> This is where I stop since I have no idea how to create aliases for
> them, which g++ would understand.

The .DEF file needs to include names in mangled form for specific compiler.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Mon Nov 26 06:31:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 06:31:40 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <47488F82.8010604@pobox.com>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi> <47488F82.8010604@pobox.com>
Message-ID: <54115.84.10.81.30.1196076681.squirrel@loskot.net>

Frank Warmerdam wrote:
>
> Potentially we could deprecate STDCALL support in 1.5 and just #define
> it to nothing by default in VC builds if it is causing a big problem,
> though I'm not clear on why it is a problem.

Frank,

To workaround the problem with mangled names, we would also need to
wrap all exported C functions with

extern "C" {}

then GCC and VC++ will be instructed to export/import unmangled names.
However, this trick doesn't work for C++ overloaded functions as well as
there are possible run-time errors. Compilers may not be even compatible on
this level from version to version and IMHO we should not expect to make
GDAL binaries interoperable for compilers from different vendors.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From oneingray at gmail.com  Mon Nov 26 06:45:03 2007
From: oneingray at gmail.com (Ivan Shmakov)
Date: Mon Nov 26 06:45:11 2007
Subject: [gdal-dev] http://www.gdal.org/ still points to lists.maptools.org
Message-ID: <b1e3a35f0711260345j7f97e209u5677c2e84d7aa6f@mail.gmail.com>

        I guess, the link to the `gdal-dev' mailing list page should be
        changed as well.

$ nl -ba www.gdal.org/index.html
...
    70  Mailing List</a></h2>
    71  A gdal-announce mailing list <a
href="http://lists.osgeo.org/mailman/listinfo/gdal-announce">subscription</a>
is a low volume way of keeping track of major developments with the
GDAL project.<p>
    72  The <a href="mailto:gdal-dev@lists.maptools.org">gdal-dev@lists.maptools.org</a>
mailing list can be used for discussion of development and user issues
related to GDAL and related technologies. Subscriptions can be done,
and archives reviewed <a
href="http://lists.maptools.org/mailman/listinfo/gdal-dev/">on the
web</a>. The mailing list is also available in read-only format by
NNTP at <a href="news://news.gmane.org/gmane.comp.gis.gdal.devel">news://news.gmane.org/gmane.comp.gis.gdal.devel</a>
and by HTTP at <a
href="http://news.gmane.org/gmane.comp.gis.gdal.devel">http://news.gmane.org/gmane.comp.gis.gdal.devel</a>.<p>
...
$
From mateusz at loskot.net  Mon Nov 26 06:55:59 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 06:56:07 2007
Subject: [gdal-dev] http://www.gdal.org/ still points to 
	lists.maptools.org
In-Reply-To: <b1e3a35f0711260345j7f97e209u5677c2e84d7aa6f@mail.gmail.com>
References: <b1e3a35f0711260345j7f97e209u5677c2e84d7aa6f@mail.gmail.com>
Message-ID: <54345.84.10.81.30.1196078159.squirrel@loskot.net>

Ivan Shmakov wrote:
>         I guess, the link to the `gdal-dev' mailing list page should be
>         changed as well.
>
> $ nl -ba www.gdal.org/index.html
> ...
>     70  Mailing List</a></h2>
>     71  A gdal-announce mailing list <a
> href="http://lists.osgeo.org/mailman/listinfo/gdal-announce">subscription</a>
> is a low volume way of keeping track of major developments with the
> GDAL project.<p>
>     72  The <a
> href="mailto:gdal-dev@lists.maptools.org">gdal-dev@lists.maptools.org</a>
> mailing list can be used for discussion of development and user issues
> related to GDAL and related technologies. Subscriptions can be done,
> and archives reviewed <a
> href="http://lists.maptools.org/mailman/listinfo/gdal-dev/">on the
> web</a>. The mailing list is also available in read-only format by
> NNTP at <a
> href="news://news.gmane.org/gmane.comp.gis.gdal.devel">news://news.gmane.org/gmane.comp.gis.gdal.devel</a>
> and by HTTP at <a
> href="http://news.gmane.org/gmane.comp.gis.gdal.devel">http://news.gmane.org/gmane.comp.gis.gdal.devel</a>.<p>
> ...
> $


Ivan,

Thanks for reporting this.
I've fixed it and the website will get updated in ~1 hour.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From ari.jolma at tkk.fi  Mon Nov 26 07:10:00 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Mon Nov 26 07:10:33 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <54052.84.10.81.30.1196075409.squirrel@loskot.net>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
	<54052.84.10.81.30.1196075409.squirrel@loskot.net>
Message-ID: <474AB798.5060406@tkk.fi>

Mateusz Loskot kirjoitti:
> Ari Jolma wrote:
>   
>> that would create quite a lot of extra stuff into headers but my guess
>> is that it would make the resulting dll (made by VC) usable also in
>> MinGW world (except that the name issue would still be there).
>>     
>
> DLL built with MingGW will be usable with Visual C++ (and vice versa)
> only if separete/dedicated import libraries are prepared. Having .DEF file
> it's easier than not having it, but still, dedicated binary is required.
>   


By "usable" do you mean usable to link against or usable as a drop in 
replacement (as I tried here)? By "dedicated binary" you do not mean a 
separate DLL for applications compiled with different compilers?

If we forget the Colortable issue where the 1.4 bindings still use C++ 
API of GDAL, my first guess is that if the export names were 
undecorated, I could use gdal14.dll as a drop in replacement of 
libgdal-1.dll, even though they are compiled with different compilers. 
I'm very sure that if I go through the hoops and link against gdal14.dll 
everything will work. Note that with the tools in MinGW I can 
automatically create a usable .DEF and from that a usable .a for linking 
against (this .a is not a static library, it is some kind of link 
library for the dll).

I'm willing to go through the hoops once I get a 1.5 binary. By the way, 
I'd appreciate one already now so I could have a working method for 
compiling the Perl bindings against it. Having a GDAL DLL with most if 
not all drivers included would be a new thing for me. So far I've not 
been able to include JPEG2000 drivers for example.

>   
>> But I'm
>> still puzzled why _Foo@0 syntax is needed *only* for some functions?
>>     
>
> Mangling is required for C++ functions, class members functions,
> overloaded functions.
>   

yes, but I'm speaking of decorations for C API functions.

Cheers,

Ari

> Cheers
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Mon Nov 26 08:05:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 08:05:28 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <474AB798.5060406@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
	<54052.84.10.81.30.1196075409.squirrel@loskot.net>
	<474AB798.5060406@tkk.fi>
Message-ID: <54656.84.10.81.30.1196082320.squirrel@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>> Ari Jolma wrote:
>>
>>> that would create quite a lot of extra stuff into headers but my guess
>>> is that it would make the resulting dll (made by VC) usable also in
>>> MinGW world (except that the name issue would still be there).
>>>
>>
>> DLL built with MingGW will be usable with Visual C++ (and vice versa)
>> only if separete/dedicated import libraries are prepared. Having .DEF
>> file
>> it's easier than not having it, but still, dedicated binary is required.
>
>
> By "usable" do you mean usable to link against or usable as a drop in
> replacement (as I tried here)?

I mean to "link against"

> By "dedicated binary" you do not mean a
> separate DLL for applications compiled with different compilers?

Not DLL but import library used to link to DLL definitions.

> If we forget the Colortable issue where the 1.4 bindings still use C++
> API of GDAL, my first guess is that if the export names were
> undecorated, I could use gdal14.dll as a drop in replacement of
> libgdal-1.dll, even though they are compiled with different compilers.

It should be feasible for C-only API but not C++.

> I'm very sure that if I go through the hoops and link against gdal14.dll
> everything will work. Note that with the tools in MinGW I can
> automatically create a usable .DEF and from that a usable .a for linking
> against (this .a is not a static library, it is some kind of link
> library for the dll).

This is exactly what I mean 2 sections above. You have one DLL but two or
more import libraries prepared for various compilers.

> I'm willing to go through the hoops once I get a 1.5 binary. By the way,
> I'd appreciate one already now so I could have a working method for
> compiling the Perl bindings against it. Having a GDAL DLL with most if
> not all drivers included would be a new thing for me. So far I've not
> been able to include JPEG2000 drivers for example.

I suppose it will be hard or impossible to get 3rd party dependencies
working with MinGW, like MrSID.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Mon Nov 26 08:21:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 08:21:51 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release Candidate 1 - NOT SO GOOD news
In-Reply-To: <47476BC4.1080205@ualg.pt>
References: <14D00B65-5FF3-4C1D-BE07-A4F89FA0E995@gmail.com>
	<47476BC4.1080205@ualg.pt>
Message-ID: <54798.84.10.81.30.1196083302.squirrel@loskot.net>


Joaquim Luis wrote:
> The netCDF driver is still broken.
> I have repeatedly reported that netCDF COARDS compliant grids created by
> GMT have their header reported incorrectly.
>
> fast example
>
> grdmath -R-10/10/-10/10 -I1 = lixo.grd
>
> C:\>gdalinfo NETCDF:"lixo.grd":z
> Driver: netCDF/Network Common Data Format
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,-10.500000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS, CF-1.0
>   NC_GLOBAL#title=lixo.grd
>   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 = lixo.grd
>   NC_GLOBAL#GMT_version=GMT4.2
>   NC_GLOBAL#node_offset=0
>   z#long_name=z
>   z#_FillValue=1.#QNAN0e+000
>   z#actual_range=00
>   z#coordinates=x y
>   x#long_name=x
>   x#actual_range=-1010
>   y#long_name=y
>   y#actual_range=-1010
> Corner Coordinates:
> Upper Left  ( -10.5000000, -10.5000000)            <===    WRONG
> Lower Left  ( -10.5000000,  10.5000000)
> Upper Right (  10.5000000, -10.5000000)
> Lower Right (  10.5000000,  10.5000000)
> Center      (   0.0000000,   0.0000000)
> ...
>
> I have also submitted a patch that corrects this problem
> http://trac.osgeo.org/gdal/ticket/1926
> why is it being ignored?

Joaquim,

It is not being ignored but it's been set to target mileston 1.5.0.
Current release is 1.4.4 and it does not include any fixes targetting 1.5.0.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
From warmerdam at pobox.com  Mon Nov 26 09:09:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 26 09:09:37 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <474AB798.5060406@tkk.fi>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
	<54052.84.10.81.30.1196075409.squirrel@loskot.net>
	<474AB798.5060406@tkk.fi>
Message-ID: <474AD38F.8050103@pobox.com>

Ari Jolma wrote:
> I'm willing to go through the hoops once I get a 1.5 binary. By the way, 
> I'd appreciate one already now so I could have a working method for 
> compiling the Perl bindings against it. 

Ari,

Is this is a request for a GDAL 1.5 win32 build similar to the 1.4.4
binearies I prepared?  I am willing to produce such a set with the
first beta for GDAL 1.5 if that would be helpful.

Hopefully we can lock down ABI compatability from the first beta on.

 > Having a GDAL DLL with most if
> not all drivers included would be a new thing for me. So far I've not 
> been able to include JPEG2000 drivers for example.

Note that it is not been my practice to produce a "featureful"
builds for the core Win32 binaries.  That is, I don't build in
formats beyond the base set.  This is partly because I want the
base official binaries to avoid having huge numbers of library
dependencies.

Perhaps for the 1.5 series I could aim at a "light GDAL15.DLL"
with the base set, a "heavy GDAL15.DLL" with a fair amount of
stuff built in (and a corresponding collection of DLLs for the
dependencies, and then plugins for stuff beyond that.

I'm not prepared to distribute plugins for formats like ECW,
JPEG2000, or MrSID with hard to be sure of license terms from
the GDAL/OSGeo web site, but I will likely offer such from my
own personal web site.


>>> But I'm
>>> still puzzled why _Foo@0 syntax is needed *only* for some functions?
>>>     
>>
>> Mangling is required for C++ functions, class members functions,
>> overloaded functions.
>>   
> 
> yes, but I'm speaking of decorations for C API functions.

As mentioned previously, I basically added the stdcall only on functions
I used, or anticipated using in the VB6 bindings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Nov 26 09:11:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 26 09:11:59 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <54115.84.10.81.30.1196076681.squirrel@loskot.net>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi> <47488F82.8010604@pobox.com>
	<54115.84.10.81.30.1196076681.squirrel@loskot.net>
Message-ID: <474AD424.8040905@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Potentially we could deprecate STDCALL support in 1.5 and just #define
>> it to nothing by default in VC builds if it is causing a big problem,
>> though I'm not clear on why it is a problem.
> 
> Frank,
> 
> To workaround the problem with mangled names, we would also need to
> wrap all exported C functions with
> 
> extern "C" {}

Mateusz,

Note, that we already are careful to enclose all C API functions in
extern "C" {} (accomplished with the CPL_C_START/CPL_C_END macros.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ari.jolma at tkk.fi  Mon Nov 26 10:01:34 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Mon Nov 26 10:03:50 2007
Subject: [gdal-dev] Callbacks for next-gen Python bindings
In-Reply-To: <CBB1A6AF-A6B3-47E3-8219-3FAA3C3B2B79@gmail.com>
References: <CBB1A6AF-A6B3-47E3-8219-3FAA3C3B2B79@gmail.com>
Message-ID: <474ADFCE.1070401@tkk.fi>

Howard Butler kirjoitti:
> All,
>
> I have just committed rudimentary typemaps and support code for Python 
> function callbacks and the generic GDAL TermProgress methods in the 
> next-gen interface files.  This was one of the last major pieces of 
> missing functionality that existed in the old-gen bindings that was 
> preventing us from porting over a number of scripts in ./pymod.
>
> Additionally, I have created a new interface file, Operations.i, and 
> placed GDAL raster operations like ComputeMedianCutPCT, DitherRGB2PCT, 
> and ReprojectImage in this file to de-bulk gdal.i, which was getting a 
> little bit bloated after adding in the new methods.
>
> I would like to request making a change to Driver.CreateCopy.  It is 
> currently missing arguments for callback and callback_data, which 
> existed in the old-gen bindings.  I propose adding them and having 
> them default to NULL as is currently done.  Does anyone foresee an 
> issue with doing so?

I added a support and test for this type of callback into the Perl 
bindings. The callback is a Perl subroutine.

In writing the callbacks the problem was that Swig does not seem to 
support input typemaps with more than one effective parameters. I would 
need to manage the interplay because the pointer to the Perl subroutine 
is carried by the callback data. I could not find a way to write the 
typemap without hard coding the serial number of one of the parameters 
(callback_data). This is partially due to them being optional. If they 
were not, I could trust that the callback_data typemap really sets the 
callback_data parameter.

So, I would favor having them required and add an extra (Perl) layer... 
Hm, In fact I think I can add an extra layer anyway, which adds them and 
then I could trust that the callback_data is really set as it should be.

Howard, now that I'm talking to you, I think the "%typemap(out) char 
**options" has a bug in the Python bindings as it had one in the Perl 
one. It discards the last option.

Ari

>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Mon Nov 26 10:08:21 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Mon Nov 26 10:09:00 2007
Subject: [gdal-dev] 1.4.4 Preliminary Win32 Binaries
In-Reply-To: <474AD38F.8050103@pobox.com>
References: <47474C2E.80405@pobox.com> <474804E2.9060701@tkk.fi>
	<200711241303.38872.even.rouault@mines-paris.org>
	<47482378.9020603@tkk.fi>
	<54052.84.10.81.30.1196075409.squirrel@loskot.net>
	<474AB798.5060406@tkk.fi> <474AD38F.8050103@pobox.com>
Message-ID: <474AE165.1080301@tkk.fi>

Frank Warmerdam kirjoitti:
> Is this is a request for a GDAL 1.5 win32 build similar to the 1.4.4
> binearies I prepared?  I am willing to produce such a set with the
> first beta for GDAL 1.5 if that would be helpful.

yes, thanks

>
> I'm not prepared to distribute plugins for formats like ECW,
> JPEG2000, or MrSID with hard to be sure of license terms from
> the GDAL/OSGeo web site, but I will likely offer such from my
> own personal web site.

Once I had to install FWTools to look at some JPEG2000 images since I 
could not link in the driver into the GDAL DLL which I built. I'd like 
to stick to one application ;)

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Mon Nov 26 11:36:39 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Mon Nov 26 11:35:31 2007
Subject: [gdal-dev] Callbacks for next-gen Python bindings
In-Reply-To: <CBB1A6AF-A6B3-47E3-8219-3FAA3C3B2B79@gmail.com>
References: <CBB1A6AF-A6B3-47E3-8219-3FAA3C3B2B79@gmail.com>
Message-ID: <474AF617.9070804@tkk.fi>

Howard Butler kirjoitti:
> Additionally, I have created a new interface file, Operations.i, and 
> placed GDAL raster operations like 

By the way, why did you put CPLErrorReset(); into the functions? Isn't 
that by default in all binded functions because of what's in %exception 
in cpl_exceptions.i? It probably does no harm but it's redundant.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From milovanderlinden at gmail.com  Mon Nov 26 11:56:27 2007
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Mon Nov 26 11:56:35 2007
Subject: [gdal-dev] split multipolygons?
Message-ID: <474AFABB.4080702@3dsite.nl>

Hello list,

I have a table in mapinfo format that contains different geometry types. 
some are errors and when I filter out the errors, multipolygon and 
polygon remain.

I try to use ogr2ogr  with -nlt to only get polygons. This doesn't work 
the way I want it. When I open the resulting table in OpenJUMP, there 
are still multipolygons in my table which prevent me from saving changes 
I make with OpenJump.

What I would like to know is if it is possible to split multipolygons to 
polygons with regards to maintaining the attributes. Can this be done?    

kind regards,

Milo van der Linden

From warmerdam at pobox.com  Mon Nov 26 12:54:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 26 12:51:09 2007
Subject: [gdal-dev] split multipolygons?
In-Reply-To: <474AFABB.4080702@3dsite.nl>
References: <474AFABB.4080702@3dsite.nl>
Message-ID: <474B0843.3070107@pobox.com>

Milo van der Linden wrote:
> Hello list,
> 
> I have a table in mapinfo format that contains different geometry types. 
> some are errors and when I filter out the errors, multipolygon and 
> polygon remain.
> 
> I try to use ogr2ogr  with -nlt to only get polygons. This doesn't work 
> the way I want it. When I open the resulting table in OpenJUMP, there 
> are still multipolygons in my table which prevent me from saving changes 
> I make with OpenJump.

Milo,

The -nlt switch sets the type of a layer, but doesn't - in itself -
alter what geometries get written to the layer.

> What I would like to know is if it is possible to split multipolygons to 
> polygons with regards to maintaining the attributes. Can this be done?   
> kind regards,

With GDAL/OGR 1.4+ you should be able to do something like:

   ogr2ogr out.shp in.shp -where "OGR_GEOMETRY = 'POLYGON'" in

I'm not sure if I have the quoting right.

Basically, OGR_GEOMETRY is a special field that will contain
the OGC WKT name for the geometry per:

   http://trac.osgeo.org/gdal/wiki/rfc6_sqlgeom

It can be used in attribute filters.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From milovanderlinden at gmail.com  Mon Nov 26 13:02:52 2007
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Mon Nov 26 13:02:59 2007
Subject: [gdal-dev] split multipolygons?
In-Reply-To: <474B0843.3070107@pobox.com>
References: <474AFABB.4080702@3dsite.nl> <474B0843.3070107@pobox.com>
Message-ID: <474B0A4C.2090805@3dsite.nl>

Thank you Frank,

I will test the wher clause, come up with the right quoting and post my 
final result to the list.

Kind regards!

Milo van der Linden

Frank Warmerdam schreef:
> Milo van der Linden wrote:
>> Hello list,
>>
>> I have a table in mapinfo format that contains different geometry 
>> types. some are errors and when I filter out the errors, multipolygon 
>> and polygon remain.
>>
>> I try to use ogr2ogr  with -nlt to only get polygons. This doesn't 
>> work the way I want it. When I open the resulting table in OpenJUMP, 
>> there are still multipolygons in my table which prevent me from 
>> saving changes I make with OpenJump.
>
> Milo,
>
> The -nlt switch sets the type of a layer, but doesn't - in itself -
> alter what geometries get written to the layer.
>
>> What I would like to know is if it is possible to split multipolygons 
>> to polygons with regards to maintaining the attributes. Can this be 
>> done?   kind regards,
>
> With GDAL/OGR 1.4+ you should be able to do something like:
>
>   ogr2ogr out.shp in.shp -where "OGR_GEOMETRY = 'POLYGON'" in
>
> I'm not sure if I have the quoting right.
>
> Basically, OGR_GEOMETRY is a special field that will contain
> the OGC WKT name for the geometry per:
>
>   http://trac.osgeo.org/gdal/wiki/rfc6_sqlgeom
>
> It can be used in attribute filters.
>
> Best regards,
>


-- 

   	

3DSite - Milo van der Linden - CTO
A. Joachimi kade 3 F, 4461 BG  Goes 
(Zeeland, Nederland)
milo@3dsite.nl <mailto:milo@3dsite.nl>
http://www.3dsite.nl


De informatie verzonden met dit e-mail bericht is uitsluitend bestemd 
voor de geadresseerde(n). Gebruik van deze informatie door andere dan de 
geadresseerde(n) is verboden. Openbaarmaking, vermenigvuldiging, 
verspreiding en/of verstrekking van deze informatie aan derde is niet 
toegestaan. Kopi?ren en/of misbruiken van ingesloten afbeeldingen en/of 
bestanden is wettelijke verboden en strafbaar. 3DSite staat niet in voor 
de juiste en volledige overbrenging van de inhoud van een verzonden 
e-mail, noch voor tijdig ontvangst daarvan. Op al onze leveringen, 
aanbiedingen en verkopen zijn van toepassing onze Algemene Voorwaarden, 
zoals gedeponeerd bij de K.v.K. te Middelburg. 3DSite

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071126/77e5553e/attachment.html
From bfraser at geoanalytic.com  Mon Nov 26 15:01:57 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Nov 26 15:02:21 2007
Subject: [gdal-dev] 
	I'm conflicted:  GeoTIFF's PixelIsPoint, myth or reality?
Message-ID: <1d6701c83067$32d0ab40$140002c0@shark>

Frank (and anyone else interested in 1/2 pixel accuracy in
GeoTIFFs),

  Years ago I read about how the authors of the GeoTIFF spec
never  intended the PixelIsPoint/PixelIsArea tag to indicate
the image origin (center or top-left of top left pixel) of
the SRS tie point.  Regardless of the intent, some (most?)
s/w developers used it that way; perhaps the actual origin
was not obvious in the spec.

  My problem is that GDAL follows the spec (or conversely
other popular apps don't!), ignores the tag for
geo-referencing purposes and uses the tie point as the
top-left of the top left pixel.  No problem when creating
GeoTIFFs with GDAL as it sets PixelIsArea.  And all is good
when reading PixelIsArea-style GeoTIFFs with GDAL.

  But when reading PixelIsPoint-style GeoTIFFs (and
translating them), the reported tie point is shifted 1/2
pixel in X and Y (well, shifted from my expectation).  I've
read past GDAL emails explaining changing GDAL would be
large effort (to say nothing of buying into the PixelIsPoint
myth) so perhaps a simple addition would keep me (and
others) within 1/2 a pixel:

 Have the GDAL utilties issue a warning message when a
PixelIsPoint-style GeoTIFF is read.  And maybe have an
option ( "-w" ?) to ignore the embedded tie point values and
instead try to use a world file (tfw), if it exists?



Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

From lran at unc.edu  Mon Nov 26 19:08:37 2007
From: lran at unc.edu (Limei Ran)
Date: Mon Nov 26 19:12:03 2007
Subject: [gdal-dev] GDAL and PROJ.4 in compiling
Message-ID: <20071126190837.6o1vg8zaww4o408g@webmail5.isis.unc.edu>


Hi:

Does GDAL 1.4.2 have PROJ.4 coming with the package?  I need to use 
PROJ.4 for projection transformation.  I have PROJ.4 installed in a 
local directory on the linux server.  Do I need to point to PROJ.4's 
lib directory when configuring GDAL before make?

Thanks,

LR

From mateusz at loskot.net  Mon Nov 26 19:58:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Nov 26 19:58:42 2007
Subject: [gdal-dev] GDAL and PROJ.4 in compiling
In-Reply-To: <20071126190837.6o1vg8zaww4o408g@webmail5.isis.unc.edu>
References: <20071126190837.6o1vg8zaww4o408g@webmail5.isis.unc.edu>
Message-ID: <474B6BBC.3040000@loskot.net>

Limei Ran wrote:
> Does GDAL 1.4.2 have PROJ.4 coming with the package?

Limei Ran,

What package you mean?

> I need to use PROJ.4 for projection transformation.  I have PROJ.4
> installed in a local directory on the linux server.  Do I need to
> point to PROJ.4's lib directory when configuring GDAL before make?

You don't need to point PROJ.4. GDAL will use PROJ.4 by loading it
dynamically in run-time if it's installed and available from standard
prefixes like /usr or /usr/local or other pointed by LD_LIBRARY_PATH
in your system.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From jmpmcmanus at yahoo.com  Mon Nov 26 23:33:08 2007
From: jmpmcmanus at yahoo.com (James McManus)
Date: Mon Nov 26 23:33:11 2007
Subject: [gdal-dev] parallel processing
Message-ID: <474B9E04.7030207@yahoo.com>

Has implementing parallel process for GDAL and OGR been considered?

Jim
From paul.malm at saabgroup.com  Tue Nov 27 02:05:37 2007
From: paul.malm at saabgroup.com (Malm Paul)
Date: Tue Nov 27 02:05:55 2007
Subject: [gdal-dev] 3D maps
In-Reply-To: <474B0843.3070107@pobox.com>
References: <474AFABB.4080702@3dsite.nl> <474B0843.3070107@pobox.com>
Message-ID: <9103513CAFE9554496DD17054510B6DF0107A65E@corpappl002.corp.saab.se>

 
Hi!
I have a geometry set of triangles (e.g land area), including
elevations.
To be able to view e.g roads ontop those triangles I must insert points 
in the road polylines with the correct elevation in each intersection 
(roadline - triangle border). Att the same time I would like to insert 
the correct elevation of the original points of the road-polyline. is 
there a command that could do this for me?

 Kind regards,

 Paul
From jeshua at OpenOSX.com  Tue Nov 27 07:01:51 2007
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Nov 27 07:04:29 2007
Subject: [gdal-dev] 3D maps
In-Reply-To: <9103513CAFE9554496DD17054510B6DF0107A65E@corpappl002.corp.saab.se>
References: <474AFABB.4080702@3dsite.nl> <474B0843.3070107@pobox.com>
	<9103513CAFE9554496DD17054510B6DF0107A65E@corpappl002.corp.saab.se>
Message-ID: <4BA47AAA-5A6C-4A2A-8B54-D080C27C2D7B@OpenOSX.com>


On Nov 27, 2007, at 12:05 AM, Malm Paul wrote:

> I have a geometry set of triangles (e.g land area), including
> elevations.
> To be able to view e.g roads ontop those triangles I must insert  
> points
> in the road polylines with the correct elevation in each intersection
> (roadline - triangle border). Att the same time I would like to insert
> the correct elevation of the original points of the road-polyline. is
> there a command that could do this for me?

Hello

I am not sure about GDAL, however, GRASS GIS certainly has the  
functionality.

In fact, with a single command you can covert 2D vectors to 3D:

	v.drape -[ B | C ] input=2D_vector output=3D_vector rast=elevation


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364





From paul.malm at saabgroup.com  Tue Nov 27 08:39:04 2007
From: paul.malm at saabgroup.com (Malm Paul)
Date: Tue Nov 27 08:39:23 2007
Subject: [gdal-dev] 3D maps
In-Reply-To: <4BA47AAA-5A6C-4A2A-8B54-D080C27C2D7B@OpenOSX.com>
References: <474AFABB.4080702@3dsite.nl> <474B0843.3070107@pobox.com>
	<9103513CAFE9554496DD17054510B6DF0107A65E@corpappl002.corp.saab.se>
	<4BA47AAA-5A6C-4A2A-8B54-D080C27C2D7B@OpenOSX.com>
Message-ID: <9103513CAFE9554496DD17054510B6DF0107A82A@corpappl002.corp.saab.se>

Thanks, interesting...

1) Has GRASS functions to insert points in the road where it intersects
a triangle in another layer.
I.e the road must be drawn ontop of the triangulated surface where the
surface triangles are not regular, due to open field- forrest- city area
borders? 

2) Do you know of an turtorial documentation of GRASS where I can learn
more about it?

Kind regards,

Paul Malm

-----Original Message-----
From: Jeshua Lacock [mailto:jeshua@OpenOSX.com] 
Sent: den 27 november 2007 13:02
To: Malm Paul; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] 3D maps



On Nov 27, 2007, at 12:05 AM, Malm Paul wrote:

> I have a geometry set of triangles (e.g land area), including 
> elevations.
> To be able to view e.g roads ontop those triangles I must insert 
> points in the road polylines with the correct elevation in each 
> intersection (roadline - triangle border). Att the same time I would 
> like to insert the correct elevation of the original points of the 
> road-polyline. is there a command that could do this for me?

Hello

I am not sure about GDAL, however, GRASS GIS certainly has the
functionality.

In fact, with a single command you can covert 2D vectors to 3D:

	v.drape -[ B | C ] input=2D_vector output=3D_vector
rast=elevation


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364





From hobu.inc at gmail.com  Tue Nov 27 11:37:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Nov 27 11:38:47 2007
Subject: [gdal-dev] Motion: Release GDAL 1.4.4
Message-ID: <F5234066-C99A-4541-8FFF-2F9258AED981@gmail.com>

All,

Following up on my motion http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014999.html 
  , I would like to +1 promoting GDAL 1.4.4 RC1 to release.

Howard
From warmerdam at pobox.com  Tue Nov 27 12:23:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 27 12:00:59 2007
Subject: [gdal-dev] Motion: Release GDAL 1.4.4
In-Reply-To: <F5234066-C99A-4541-8FFF-2F9258AED981@gmail.com>
References: <F5234066-C99A-4541-8FFF-2F9258AED981@gmail.com>
Message-ID: <474C5296.7080200@pobox.com>

Howard Butler wrote:
> All,
> 
> Following up on my motion 
> http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014999.html , I 
> would like to +1 promoting GDAL 1.4.4 RC1 to release.

+1



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dron at ak4719.spb.edu  Tue Nov 27 12:14:36 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Nov 27 12:17:36 2007
Subject: [gdal-dev] Motion: Release GDAL 1.4.4
In-Reply-To: <F5234066-C99A-4541-8FFF-2F9258AED981@gmail.com>
References: <F5234066-C99A-4541-8FFF-2F9258AED981@gmail.com>
Message-ID: <20071127171436.GA24494@ak4719.spb.edu>

On Tue, Nov 27, 2007 at 10:37:57AM -0600, Howard Butler wrote:
> Following up on my motion 
> http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014999.html , I 
>  would like to +1 promoting GDAL 1.4.4 RC1 to release.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From warmerdam at pobox.com  Tue Nov 27 15:01:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 27 14:33:53 2007
Subject: [gdal-dev] parallel processing
In-Reply-To: <474B9E04.7030207@yahoo.com>
References: <474B9E04.7030207@yahoo.com>
Message-ID: <474C77AF.2080000@pobox.com>

James McManus wrote:
> Has implementing parallel process for GDAL and OGR been considered?

James,

There has not been much work on parallel processing within GDAL but
some applications do use GDAL in multiple threads at a time and there
has been considerable work to make aspects of GDAL thread safe.  In
particular modern GDAL should support a "many readers" situation fairly
well now as long as each of the readers is operating on distinct
GDALDataset objects.

For various reasons you can't have multiple readers active on a common
gdal dataset, and when GDAL is writing there should really only be
one thread active at a time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From matt.wilkie at gov.yk.ca  Tue Nov 27 15:08:50 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Nov 27 15:09:37 2007
Subject: [Gdal-dev] recent compile on cygwin?
In-Reply-To: <474503E7.10109@loskot.net>
References: <474503E7.10109@loskot.net>
Message-ID: <474C7952.3010400@gov.yk.ca>

Hi Mateusz,

I tried again today against svn revision 13119 and configure still 
doesn't find libxercesc. Or more precisely, the xercesc headers are 
found but the library is not. Config.log attached.

thank you for efforts looking into a build environment you personally 
don't have access to. I guess we'll have to wait for a developer with 
cygwin experience to get interested.

take care,

-matt



Mateusz Loskot wrote:
> Matt Wilkie wrote:
>>> Perhaps you have it installed in different location than:
>>>
>>> /usr with /usr/include/xercesc
>>> or
>>> /usr/local with /usr/local/include/xercesc
>> xerces files are located in /usr/include/xercesc
> 
> This location is correct, so Xerces prefix is /usr.
> 
>> and a single lib file:
>> /usr/lib/libxerces-c25.dll.a. Full listing is attached.
> 
> I have no idea how cygwin works, but GDAL building configuration
> expects to link against -lxerces-c. IOW, libxerces-c.so file is used.
> 
> Recently, I significantly improved Xerces detection for Unix
> 
> http://trac.osgeo.org/gdal/ticket/1988
> 
> (see last big comment)
> 
> and perhaps now it will work for you, but I'm still doing a palmistry.
> 
>> There is a note in /usr/share/doc/Cygwin/xerces-c-2.5.0.README which
>> says "Also, since the library exposes C++ classes, then applications
>> using the library should be built with the same version compiler,
>> otherwise there will be link errors." Might this be what is happening?
> 
> The only thing I can say is "perhaps". Haven't used cygwin, so no
> experience here.
> 
> Cheers

-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.log.gz
Type: application/x-gzip
Size: 13371 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071127/93730444/config.log.gz
From jeshua at OpenOSX.com  Tue Nov 27 17:33:25 2007
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Nov 27 17:33:40 2007
Subject: [gdal-dev] 3D maps
In-Reply-To: <9103513CAFE9554496DD17054510B6DF0107A82A@corpappl002.corp.saab.se>
References: <474AFABB.4080702@3dsite.nl> <474B0843.3070107@pobox.com>
	<9103513CAFE9554496DD17054510B6DF0107A65E@corpappl002.corp.saab.se>
	<4BA47AAA-5A6C-4A2A-8B54-D080C27C2D7B@OpenOSX.com>
	<9103513CAFE9554496DD17054510B6DF0107A82A@corpappl002.corp.saab.se>
Message-ID: <05E96338-EF11-4C6D-A872-A19D596F2138@OpenOSX.com>


On Nov 27, 2007, at 6:39 AM, Malm Paul wrote:

> 1) Has GRASS functions to insert points in the road where it  
> intersects
> a triangle in another layer.
> I.e the road must be drawn ontop of the triangulated surface where the
> surface triangles are not regular, due to open field- forrest- city  
> area
> borders?

I am sure you can, but I cannot recommend a method offhand, perhaps  
try grass-list.

> 2) Do you know of an turtorial documentation of GRASS where I can  
> learn
> more about it?

There is gobs of documentation and tutorials at the Grass site:

	<http://grass.itc.it>


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364
From mateusz at loskot.net  Tue Nov 27 20:59:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Nov 27 20:59:19 2007
Subject: [gdal-dev] GDAL and PROJ.4 in compiling
In-Reply-To: <20071127101603.jolt0jbm2o0wg4o8@webmail5.isis.unc.edu>
References: <20071126190837.6o1vg8zaww4o408g@webmail5.isis.unc.edu>	<474B6BBC.3040000@loskot.net>
	<20071127101603.jolt0jbm2o0wg4o8@webmail5.isis.unc.edu>
Message-ID: <474CCB71.1020504@loskot.net>

Limei Ran wrote:
> 
> Hi Mateusz:
> 
> Thanks for your help.  Unfortunately, PROJ.4 is not installed in /usr or
> /usr/local. I do not have LD_LIBRARY_PATH point to PROJ.4.
> 
> There are five dirs under PROJ.4 installation local dir: bin/  include/
>  lib/  man/  share/.  I am not sure which dir I should use in configure.
> 
> 
> Could I fix it by configuring:
> 
> configure --with-static-proj4=/nas/lran/soft/proj.4/local
> or
> configure --with-static-proj4=/nas/lran/soft/proj.4/local/lib


You can use installation prefix:

configure --with-static-proj4=/nas/lran/soft/proj.4/local

and the 'lib' subdirectory should be found automagically.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From warmerdam at pobox.com  Wed Nov 28 00:52:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 28 00:22:34 2007
Subject: [gdal-dev] GDAL/OGR 1.4.4 Release
Message-ID: <474D0236.8050907@pobox.com>

The GDAL project is pleased to announce the GDAL/OGR 1.4.4 release.
This is a bug fix release in the 1.4.x stable release series and
adds no significant new features.

This release replaces the GDAL/OGR 1.4.3 release which has been retracted
by the project as it included an unexpected ABI (Application Binary
Interface) change from the earlier 1.4.x releases.  This ABI change means
that applications using the GDAL/OGR C++ interface, and GDAL/OGR driver
plugins built against GDAL/OGR 1.4.0, 1.4.1 or 1.4.2 could not be safely
used with GDAL/OGR 1.4.3.  All applications redistributing binaries are
encouraged to discard GDAL/OGR 1.4.3 and use 1.4.4 instead.  The GDAL/OGR
1.4.4 release is ABI compatiable with all earlier 1.4.x releases except
for the disavowed 1.4.3.

GDAL/OGR 1.4.4 is available in source format at:

   http://download.osgeo.org/gdal/gdal-1.4.4.tar.gz
   http://download.osgeo.org/gdal/gdal144.zip

More detailed NEWS on fixes in the 1.4.4 release can be found at:

   http://trac.osgeo.org/gdal/wiki/Release/1.4.4-News

GDAL 1.5.0, a major "new features" release, will be entering beta during
December, and it is hoped a GDAL 1.5.0 release will be available by the end
of year.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jmpmcmanus at yahoo.com  Wed Nov 28 00:37:09 2007
From: jmpmcmanus at yahoo.com (James McManus)
Date: Wed Nov 28 00:37:17 2007
Subject: [gdal-dev] parallel processing
In-Reply-To: <474C77AF.2080000@pobox.com>
References: <474B9E04.7030207@yahoo.com> <474C77AF.2080000@pobox.com>
Message-ID: <474CFE85.8010100@yahoo.com>

Frank Warmerdam wrote:
> James McManus wrote:
>> Has implementing parallel process for GDAL and OGR been considered?
>
> James,
>
> There has not been much work on parallel processing within GDAL but
> some applications do use GDAL in multiple threads at a time and there
> has been considerable work to make aspects of GDAL thread safe.  In
> particular modern GDAL should support a "many readers" situation fairly
> well now as long as each of the readers is operating on distinct
> GDALDataset objects.
>
> For various reasons you can't have multiple readers active on a common
> gdal dataset, and when GDAL is writing there should really only be
> one thread active at a time.
>
> Best regards,
Frank,
/
/That is basically what I am looking for. I would like to take advantage 
of my additional cores and CPU when I import data using v.in.ogr.  As 
you know large vector files take a long time to read, so it would be 
great if I could employ additional threads.  I searched the web to see 
if any other IO software was doing this. I found that netcdf has a 
library which uses MPI-IO:

http://www-unix.mcs.anl.gov/parallel-netcdf/

Reading spaghetti shape files into GRASS requires building of topology 
among other things. Multi-thread processing would speed this up 
dramatically. With the proliferation of multi-thread processors for PC's 
it seems like something that would eventually have to be incorporated 
into GDAL/OGR.

Jim
From Jukka.Rahkonen at mmmtike.fi  Wed Nov 28 03:22:05 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 28 03:22:12 2007
Subject: [gdal-dev] How to use my own nad2bin shift grid file?
Message-ID: <CC197224AC75CE4DB23F739B16891B866E754D@tikka.haapa.mmm.fi>

Hi,
 
I have prepared a shift grid file which I hope to correct local
distortions of the Finnish KKJ projection. I made it by calculating
correction values and feeding them into ascii file in .lla format. That
ascii file I used as input for nad2bin program. Now I have a .bin file
produced by nad2bin (named as KKJ.bin), but no idea about how to use it.
My aim is to utilise this KKJ.bin file when converting from epsg-codes
2391, 2392, 2393 and 2394 to other systems.  I would be happy if
somebody could give me an example about how to do it for example in
making re-projection from epsg:2393 to epsg:4326 with ogr2ogr.
 
Regards,
 
-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071128/f414b9b6/attachment.html
From daniel112b at gmail.com  Wed Nov 28 04:28:57 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 28 04:29:00 2007
Subject: [gdal-dev] charset info from TAB
Message-ID: <962626470711280128p5dcdb9a6ga84f74367924cfa1@mail.gmail.com>

Hello,

Is it possible to get the charset info from a .TAB file with OGR in order to
handle strings correctly. I couldn't find a way to do that using the API.

Best Regards,
  Daniel B?ck
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071128/0d9f5fe9/attachment.html
From nikos.alexandris at felis.uni-freiburg.de  Wed Nov 28 07:37:13 2007
From: nikos.alexandris at felis.uni-freiburg.de (nikos.alexandris@felis.uni-freiburg.de)
Date: Wed Nov 28 07:37:14 2007
Subject: [gdal-dev] Successful warping of MODIS surface reflectance products
 from sinusoidal to HGRS87
Message-ID: <web-93826164@uni-freiburg.de>

I hope this time my mail comes through till the GDAL mail
-list ;-)

(Re-post!  Sorry, I was trying to post this through Nabble
since the
22th of November. Yet, it was not accepted all this days...
) 

Just FYI: 

Yoohooo! 

Many many thanks to all... !! 

The answer was in: http://trac.osgeo.org/gdal/ticket/1239  

--- 
[  $ gdalwarp -of HFA \ 

    -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null
+wktext' \ -t_srs 
TARGET-SRS \
'HDF4_EOS:EOS_GRID:"fpar8.hdf":MOD_Grid_MOD15A2:Fpar_1km'
\ 
fpar8.hfa 

        Note the key `+nadgrids=@null +wktext' options. In
TARGET-SRS,
` 
+ellps=sphere' becomes unnecessary (unless, of course, one
wants the 
dataset to be warped into a projection on a sphere.)  ] 
--- 

(Using Markus script ...slighlty modified, using 460x460
pixel
resolution for the output): 
--- 

#!/bin/sh 

#MODIS HDF/Sinusoidal to GeoTiff/HGRS87 
#Based on: 
#2005, Markus Neteler 
# warp MODIS HDF to Erdas/Img - LatLong/WGS84 

PROG="$0" 

if [ $# -lt 1 -o "$1" = "-h" -o "$1" = "--help" -o "$1" =
"-help" ] ; 
then 
 echo "Script to warp all layers of MODIS HDF to Erdas/Img
- 
LatLong/WGS84" 
 echo "Usage:" 
 echo "      $PROG M[OD|MYD]blablabla.hdf" 
 exit 1 
fi 

FILE=$1 
HDFlayerNAMES="`gdalinfo $FILE | grep SUBDATASET_ | grep
_NAME | cut 
-d'=' -f2`" 

#aarg! NDVI/EVI MOD13 contains spaces: 
HDFlayerNAMES_NOSPACES="`gdalinfo $FILE | grep SUBDATASET_
| grep _NAME 
| cut -d'=' -f2 | tr -s ' ' '|'`" 

#MODIS does not use the "Normal Sphere (r=6370997)"!!! 
# MODIS sphere, radius of 6371007.181 --> Instead use:
'+proj=sinu 
+R=6371007.181 +nadgrids=@null +wktext' 
#
http://edcdaac.usgs.gov/landdaac/tools/mrtswath/info/ReleaseNotes.pdf
 
# 
#GGRS87 (or HGRS87 or EGSA87) 
#<2100> +proj=tmerc +lat_0=0 +lon_0=24 +k=0.9996
+x_0=500000 +y_0=0 
+ellps=GRS80 +towgs84=-199.87,74.79,246.62,0,0,0,0 +units=m
+no_defs <> 

#loop over all layers: 
for i in ${HDFlayerNAMES_NOSPACES} ; do 
        #transform back: 
        INPUT="`echo ${i} | tr -s '|' ' '`" 
        NEWNAME="`echo ${i} | cut -d':' -f4,5 | tr ':' '_'
| tr -s '|' 
'_'`" 
        # apply GCPs 
        gdalwarp -s_srs '+proj=sinu +R=6371007.181
+nadgrids=@null 
+wktext' -t_srs '+init=epsg:2100' -tr 460 460 "${INPUT}" 
$NEWNAME.HGRS87.tif 
done 
--- 
-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information
Systems
Faculty of Forestry & Environmental Sciences,
Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 /
Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br.,
Germany
From warmerdam at pobox.com  Wed Nov 28 10:30:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 28 09:58:41 2007
Subject: [gdal-dev] charset info from TAB
In-Reply-To: <962626470711280128p5dcdb9a6ga84f74367924cfa1@mail.gmail.com>
References: <962626470711280128p5dcdb9a6ga84f74367924cfa1@mail.gmail.com>
Message-ID: <474D89A5.1050408@pobox.com>

Daniel wrote:
> Hello,
> 
> Is it possible to get the charset info from a .TAB file with OGR in 
> order to handle strings correctly. I couldn't find a way to do that 
> using the API.

Daniel,

Generally speaking OGR is not aware of charset/codepage issues.

I'm not sure if there is a special MITAB call for this info or not.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From viswaug at gmail.com  Wed Nov 28 11:18:33 2007
From: viswaug at gmail.com (Vish Uma)
Date: Wed Nov 28 11:18:54 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
Message-ID: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>

Hi all,

I am primarily a c# developer trying to get into GDAL programming using
python. I have been reading upon on Python already. I was wondering if
someone could point me in the right direction with respect to getting
started with GDAL in Python. Maybe point me to some tutorials, documentation
or training materials.

Thank You,
Vish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071128/1ef887b6/attachment.html
From szekerest at gmail.com  Wed Nov 28 11:33:56 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 28 11:33:59 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
In-Reply-To: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
References: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
Message-ID: <f3b73b7d0711280833i789d584ga3ead156f3129daa@mail.gmail.com>

Hi,

You can either use the gdal C# bindings to access gdal/ogr from a .NET
application.

Best regards,

Tamas



2007/11/28, Vish Uma <viswaug@gmail.com>:
> Hi all,
>
> I am primarily a c# developer trying to get into GDAL programming using
> python. I have been reading upon on Python already. I was wondering if
> someone could point me in the right direction with respect to getting
> started with GDAL in Python. Maybe point me to some tutorials, documentation
> or training materials.
>
> Thank You,
> Vish
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Wed Nov 28 11:38:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 28 11:38:24 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
In-Reply-To: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
References: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
Message-ID: <474D997B.6070506@loskot.net>

Vish Uma wrote:
> Hi all,
> 
> I am primarily a c# developer trying to get into GDAL programming using
> python. I have been reading upon on Python already. I was wondering if
> someone could point me in the right direction with respect to getting
> started with GDAL in Python. Maybe point me to some tutorials, documentation
> or training materials.

Check this Wiki:

http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Chris.Barker at noaa.gov  Wed Nov 28 12:20:52 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 28 12:20:00 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
In-Reply-To: <474D997B.6070506@loskot.net>
References: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
	<474D997B.6070506@loskot.net>
Message-ID: <474DA374.1090405@noaa.gov>

> Vish Uma wrote:
>> I am primarily a c# developer trying to get into GDAL programming using
>> python. I have been reading upon on Python already.

I'm confused -- do yu want to use GDAL with Python, or with C#? Or maybe 
you mean Iron Python, which is a Python implementation based on the .net 
CLR. If that's the case, then, in theory, you should be able to use the 
C# bindings, but I have no idea how.

If you mean plain old python (sometimes known as CPython, as the runtime 
is implemented in C), I'd start at python.org to make sure you've got 
the basics of Python down first, then take a look at the various Python 
scripts that come with GDAL to see how the GDAL bindings work. I'd also 
check out numpy -- it's very helpful for the kind of stuff you might do 
with GDAL.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From Steven.Mullins at dmme.virginia.gov  Wed Nov 28 12:45:58 2007
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Wed Nov 28 12:46:37 2007
Subject: [gdal-dev] Reprojecting shapefile
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8304C39085@exch2k1.dmmenet.mme.state.va.us>

I am reading point data via a VRT file from a sql server and converting to a shapefile.  This works great.  The X and Y coordinates are read from the SQL data columns.  The shapefiles are reprojected but the X and Y datafields are not updated.  I understand why they are not, since they are not spatial data in the shapefile sense.  However, I would like them to match the reprojected coordinates.  Any suggestions?

Thanks,

Steve

VRT FILE (geology-all.ovf):

<OGRVRTDataSource>
    <OGRVRTLayer name="geology-all">
      <SrcDataSource>ODBC:xxx/xxxxxxxxx@xxxx</SrcDataSource>  
	<GeometryType>wkbPoint</GeometryType>
	<SrcSQL>
	  SELECT dmlrpermits_geopoints.keyPeGeoPoints, PeNo, PeGeoLoc, PeGeoElevation,
	   PeGeoAnalysis, PeGeoShared 
	  from dmlrpermits_geopoints
	</SrcSQL> 
      <LayerSRS>PROJCS["NAD27 / Virginia South",
    	  GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
        SPHEROID["Clarke 1866",6378206.4,294.9786982139103,
        AUTHORITY["EPSG","7008"]],
        AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
        AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4267"]],
    	  PROJECTION["Lambert_Conformal_Conic_2SP"],
    	  PARAMETER["standard_parallel_1",36.76666666666667],
        PARAMETER["standard_parallel_2",37.96666666666667],
        PARAMETER["latitude_of_origin",36.33333333333334],
        PARAMETER["central_meridian",-78.5],
        PARAMETER["false_easting",2000000],
        PARAMETER["false_northing",0],
        UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]],
        AUTHORITY["EPSG","32047"]]
      </LayerSRS>
	<GeometryField encoding="PointFromColumns" x="PeGeoEasting" y="PeGeoNorthing"/> 
    </OGRVRTLayer>
</OGRVRTDataSource>


Command:

ogr2ogr -f "ESRI Shapefile"  -t_srs 83.wkt geo geology-all.ovf
From viswaug at gmail.com  Wed Nov 28 12:56:21 2007
From: viswaug at gmail.com (Vish Uma)
Date: Wed Nov 28 12:56:34 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
In-Reply-To: <f3b73b7d0711280833i789d584ga3ead156f3129daa@mail.gmail.com>
References: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>
	<f3b73b7d0711280833i789d584ga3ead156f3129daa@mail.gmail.com>
Message-ID: <93da6ded0711280956m1ca058b7w125d3f5e75ebc38a@mail.gmail.com>

Hi Tamas,

Thanks Tamas. But i think the community support is just not there for using
GDAL with .NET. So, i am looking into python for it. I also wanna learn and
get into python for other projects and Apps as well.

Thank You,
Vish



On Nov 28, 2007 9:33 AM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Hi,
>
> You can either use the gdal C# bindings to access gdal/ogr from a .NET
> application.
>
> Best regards,
>
> Tamas
>
>
>
> 2007/11/28, Vish Uma <viswaug@gmail.com>:
> > Hi all,
> >
> > I am primarily a c# developer trying to get into GDAL programming using
> > python. I have been reading upon on Python already. I was wondering if
> > someone could point me in the right direction with respect to getting
> > started with GDAL in Python. Maybe point me to some tutorials,
> documentation
> > or training materials.
> >
> > Thank You,
> > Vish
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071128/f71b4adf/attachment.html
From warmerdam at pobox.com  Wed Nov 28 13:41:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 28 13:05:05 2007
Subject: [gdal-dev] Reprojecting shapefile
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8304C39085@exch2k1.dmmenet.mme.state.va.us>
References: <1C6192D3F2755C45A2D0658D6FE5ED8304C39085@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <474DB63F.60409@pobox.com>

Mullins, Steven wrote:
> I am reading point data via a VRT file from a sql server and converting to a shapefile.  This works great.  The X and Y coordinates are read from the SQL data columns.  The shapefiles are reprojected but the X and Y datafields are not updated.  I understand why they are not, since they are not spatial data in the shapefile sense.  However, I would like them to match the reprojected coordinates.  Any suggestions?
> 
> Thanks,
> 
> Steve
> 
> VRT FILE (geology-all.ovf):
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name="geology-all">
>       <SrcDataSource>ODBC:xxx/xxxxxxxxx@xxxx</SrcDataSource>  
> 	<GeometryType>wkbPoint</GeometryType>
> 	<SrcSQL>
> 	  SELECT dmlrpermits_geopoints.keyPeGeoPoints, PeNo, PeGeoLoc, PeGeoElevation,
> 	   PeGeoAnalysis, PeGeoShared 
> 	  from dmlrpermits_geopoints
> 	</SrcSQL> 
>       <LayerSRS>PROJCS["NAD27 / Virginia South",
>     	  GEOGCS["NAD27",
>         DATUM["North_American_Datum_1927",
>         SPHEROID["Clarke 1866",6378206.4,294.9786982139103,
>         AUTHORITY["EPSG","7008"]],
>         AUTHORITY["EPSG","6267"]],
>         PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>         AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4267"]],
>     	  PROJECTION["Lambert_Conformal_Conic_2SP"],
>     	  PARAMETER["standard_parallel_1",36.76666666666667],
>         PARAMETER["standard_parallel_2",37.96666666666667],
>         PARAMETER["latitude_of_origin",36.33333333333334],
>         PARAMETER["central_meridian",-78.5],
>         PARAMETER["false_easting",2000000],
>         PARAMETER["false_northing",0],
>         UNIT["US survey foot",0.3048006096012192,
>         AUTHORITY["EPSG","9003"]],
>         AUTHORITY["EPSG","32047"]]
>       </LayerSRS>
> 	<GeometryField encoding="PointFromColumns" x="PeGeoEasting" y="PeGeoNorthing"/> 
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 
> Command:
> 
> ogr2ogr -f "ESRI Shapefile"  -t_srs 83.wkt geo geology-all.ovf

Steven,

The only solution I can see is to write a script to copy the values
back into the attributes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Wed Nov 28 13:28:55 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 28 13:29:03 2007
Subject: [gdal-dev] Reprojecting shapefile
In-Reply-To: <474DB63F.60409@pobox.com>
References: <1C6192D3F2755C45A2D0658D6FE5ED8304C39085@exch2k1.dmmenet.mme.state.va.us>
	<474DB63F.60409@pobox.com>
Message-ID: <200711281928.57860.even.rouault@mines-paris.org>

Le Wednesday 28 November 2007 19:41:03 Frank Warmerdam, vous avez ?crit?:
> Mullins, Steven wrote:
> > I am reading point data via a VRT file from a sql server and converting
> > to a shapefile.  This works great.  The X and Y coordinates are read from
> > the SQL data columns.  The shapefiles are reprojected but the X and Y
> > datafields are not updated.  I understand why they are not, since they
> > are not spatial data in the shapefile sense.  However, I would like them
> > to match the reprojected coordinates.  Any suggestions?
> >
> > Thanks,
> >
> > Steve
> >
> > VRT FILE (geology-all.ovf):
> >
> > <OGRVRTDataSource>
> >     <OGRVRTLayer name="geology-all">
> >       <SrcDataSource>ODBC:xxx/xxxxxxxxx@xxxx</SrcDataSource>
> > 	<GeometryType>wkbPoint</GeometryType>
> > 	<SrcSQL>
> > 	  SELECT dmlrpermits_geopoints.keyPeGeoPoints, PeNo, PeGeoLoc,
> > PeGeoElevation, PeGeoAnalysis, PeGeoShared
> > 	  from dmlrpermits_geopoints
> > 	</SrcSQL>
> >       <LayerSRS>PROJCS["NAD27 / Virginia South",
> >     	  GEOGCS["NAD27",
> >         DATUM["North_American_Datum_1927",
> >         SPHEROID["Clarke 1866",6378206.4,294.9786982139103,
> >         AUTHORITY["EPSG","7008"]],
> >         AUTHORITY["EPSG","6267"]],
> >         PRIMEM["Greenwich",0,
> >         AUTHORITY["EPSG","8901"]],
> >         UNIT["degree",0.01745329251994328,
> >         AUTHORITY["EPSG","9122"]],
> >         AUTHORITY["EPSG","4267"]],
> >     	  PROJECTION["Lambert_Conformal_Conic_2SP"],
> >     	  PARAMETER["standard_parallel_1",36.76666666666667],
> >         PARAMETER["standard_parallel_2",37.96666666666667],
> >         PARAMETER["latitude_of_origin",36.33333333333334],
> >         PARAMETER["central_meridian",-78.5],
> >         PARAMETER["false_easting",2000000],
> >         PARAMETER["false_northing",0],
> >         UNIT["US survey foot",0.3048006096012192,
> >         AUTHORITY["EPSG","9003"]],
> >         AUTHORITY["EPSG","32047"]]
> >       </LayerSRS>
> > 	<GeometryField encoding="PointFromColumns" x="PeGeoEasting"
> > y="PeGeoNorthing"/> </OGRVRTLayer>
> > </OGRVRTDataSource>
> >
> >
> > Command:
> >
> > ogr2ogr -f "ESRI Shapefile"  -t_srs 83.wkt geo geology-all.ovf
>
> Steven,
>
> The only solution I can see is to write a script to copy the values
> back into the attributes.
>
> Best regards,


Or, if you can use GDAL 1.5dev, use the BNA driver as output.
BNA is a very simple text format.
For points, you'll get something like :
"id1", "id2",1, Y, X
This can be opened as a CSV file afterwards.

Something like that should do the job :
ogr2ogr -f BNA -dsco "NB_IDS=2" -dsco "MULTILINE=NO" output.bna input.shp

See : http://www.gdal.org/ogr/drv_bna.html

Best regards.
From sy at perkins.net  Wed Nov 28 13:49:56 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 28 13:50:04 2007
Subject: [gdal-dev] Help with getting started with GDAL on .NET
In-Reply-To: <93da6ded0711280956m1ca058b7w125d3f5e75ebc38a@mail.gmail.com>
References: <93da6ded0711280818n6072e1f4x54d337363312588e@mail.gmail.com>	<f3b73b7d0711280833i789d584ga3ead156f3129daa@mail.gmail.com>
	<93da6ded0711280956m1ca058b7w125d3f5e75ebc38a@mail.gmail.com>
Message-ID: <474DB854.3040302@perkins.net>

Hard to say how much of a community is out there (incidentally, I would 
love to see OSGF carry out an occasional survey of GDAL usage patterns 
on this list to get some idea what areas should be priorities for 
development) , but I've been using the GDAL C# bindings for about a year 
and they're pretty solid. I think Tamas put a lot of work into them at 
the end of 2006 / beginning of 2007, and he's pretty vigilant about 
maintaining things.

Just my 2c,

Sy

Vish Uma wrote:
> Hi Tamas,
>
> Thanks Tamas. But i think the community support is just not there for 
> using GDAL with .NET. So, i am looking into python for it. I also 
> wanna learn and get into python for other projects and Apps as well.
>
> Thank You,
> Vish
>
>
>
> On Nov 28, 2007 9:33 AM, Tamas Szekeres <szekerest@gmail.com 
> <mailto:szekerest@gmail.com>> wrote:
>
>     Hi,
>
>     You can either use the gdal C# bindings to access gdal/ogr from a .NET
>     application.
>
>     Best regards,
>
>     Tamas
>
>
>
>     2007/11/28, Vish Uma <viswaug@gmail.com <mailto:viswaug@gmail.com>>:
>     > Hi all,
>     >
>     > I am primarily a c# developer trying to get into GDAL
>     programming using
>     > python. I have been reading upon on Python already. I was
>     wondering if
>     > someone could point me in the right direction with respect to
>     getting
>     > started with GDAL in Python. Maybe point me to some tutorials,
>     documentation
>     > or training materials.
>     >
>     > Thank You,
>     > Vish
>     >
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     >
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071128/52c9be51/attachment.html
From lran at unc.edu  Wed Nov 28 15:54:25 2007
From: lran at unc.edu (Limei Ran)
Date: Wed Nov 28 15:55:02 2007
Subject: [gdal-dev] Sphere projection definition problem with ogr2ogr
Message-ID: <474DD581.4040901@unc.edu>

Hi:

I can not define the earth sphere as +a=6370000.0 +es=0.0 when I use 
ogr2ogr command.  For instance,
./ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=lcc +a=6370000.0 +es=0.0 
+lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97" out.shp in.shp
will fail.  But,

./ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=lcc +a=6370000.0 
+b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97" out.shp in.shp
will work.

cs2cs in PROJ.4 will allow you to define the sphere as +a=6370000.0 +es=0.0.

A sphere in OGR can only be defined as +a=6370000.0 +b=6370000.0, 
right?  Also, do I always need +no_defs in projection definition?  What 
is it for?

Thanks,

Limei
From warmerdam at pobox.com  Wed Nov 28 17:11:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 28 16:26:42 2007
Subject: [gdal-dev] Sphere projection definition problem with ogr2ogr
In-Reply-To: <474DD581.4040901@unc.edu>
References: <474DD581.4040901@unc.edu>
Message-ID: <474DE789.6050105@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I can not define the earth sphere as +a=6370000.0 +es=0.0 when I use 
> ogr2ogr command.  For instance,
> ./ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=lcc +a=6370000.0 +es=0.0 
> +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97" out.shp in.shp
> will fail.  But,
> 
> ./ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=lcc +a=6370000.0 
> +b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97" out.shp in.shp
> will work.
> 
> cs2cs in PROJ.4 will allow you to define the sphere as +a=6370000.0 
> +es=0.0.
> 
> A sphere in OGR can only be defined as +a=6370000.0 +b=6370000.0, 
> right? 

Limei,

Correct.  OGR has a rather limited PROJ.4 parser and doesn't
understand lots of the more esoteric options.

> Also, do I always need +no_defs in projection definition?  What 
> is it for?

It tells PROJ.4 not to look in a defaults file for some
sorts of defaults.  It can be helpful to ensure nothing
surprising is happening.  OGR ignores it though since it
never looks in the defaults file anyways.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From potts at cfl.rr.com  Thu Nov 29 09:11:20 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Thu Nov 29 09:11:24 2007
Subject: [gdal-dev]  I'm conflicted:  GeoTIFF's PixelIsPoint,
	myth or reality?
In-Reply-To: <1d6701c83067$32d0ab40$140002c0@shark>
References: <1d6701c83067$32d0ab40$140002c0@shark>
Message-ID: <363FB4AC-FDD9-40C7-8C8D-3A1E3B91A3E3@cfl.rr.com>

Hello All:

Hmmm,  Not sure why this would be hard to add.  It would be nice to  
have in the metadata of the file opened an indication of what the tie  
point represents.  Center of pixel or upper left corner of pixel 
( AREA).  Even if GDAL doesn't do auto shifting to a common  
representation it would be nice to have in the API a way to query  
this information.

Take care

Garrett

On Nov 26, 2007, at 3:01 PM, Brent Fraser wrote:

> Frank (and anyone else interested in 1/2 pixel accuracy in
> GeoTIFFs),
>
>   Years ago I read about how the authors of the GeoTIFF spec
> never  intended the PixelIsPoint/PixelIsArea tag to indicate
> the image origin (center or top-left of top left pixel) of
> the SRS tie point.  Regardless of the intent, some (most?)
> s/w developers used it that way; perhaps the actual origin
> was not obvious in the spec.
>
>   My problem is that GDAL follows the spec (or conversely
> other popular apps don't!), ignores the tag for
> geo-referencing purposes and uses the tie point as the
> top-left of the top left pixel.  No problem when creating
> GeoTIFFs with GDAL as it sets PixelIsArea.  And all is good
> when reading PixelIsArea-style GeoTIFFs with GDAL.
>
>   But when reading PixelIsPoint-style GeoTIFFs (and
> translating them), the reported tie point is shifted 1/2
> pixel in X and Y (well, shifted from my expectation).  I've
> read past GDAL emails explaining changing GDAL would be
> large effort (to say nothing of buying into the PixelIsPoint
> myth) so perhaps a simple addition would keep me (and
> others) within 1/2 a pixel:
>
>  Have the GDAL utilties issue a warning message when a
> PixelIsPoint-style GeoTIFF is read.  And maybe have an
> option ( "-w" ?) to ignore the embedded tie point values and
> instead try to use a world file (tfw), if it exists?
>
>
>
> Brent Fraser
> GeoAnalytic Inc.
> Calgary, Alberta
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lran at unc.edu  Thu Nov 29 10:01:41 2007
From: lran at unc.edu (Limei Ran)
Date: Thu Nov 29 10:02:03 2007
Subject: [gdal-dev] where is gdal_transform?
Message-ID: <474ED455.3010207@unc.edu>

Hi:

I could not find gdal_transform in the gdal 1.4.2 I downloaded.  Is the 
utility still included in the release?

Thanks,

Limei
From warmerdam at pobox.com  Thu Nov 29 10:19:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 29 10:20:33 2007
Subject: [gdal-dev] where is gdal_transform?
In-Reply-To: <474ED455.3010207@unc.edu>
References: <474ED455.3010207@unc.edu>
Message-ID: <474ED877.6040902@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I could not find gdal_transform in the gdal 1.4.2 I downloaded.  Is the 
> utility still included in the release?

Limei,

The gdaltransform utility is new and exists only in "gdal trunk", which will
become GDAL 1.5.0.

For those not familiar with it, it intends to provide a commandline coordinate
transformation interface for points passed on stdin - much like the PROJ.4
cs2cs command but giving access to the various transformers including support
for going from pixel/line to geoferenced space using a geotransform,
GCPs or other mechanisms.

It is likely to be somewhat incomplete for the 1.5.0 release, but is already
useful.

   http://www.gdal.org/gdaltransform.html

I presume Limei is confused by the fact that the docs are now on the web site,
highlighting the issue raised in the meeting that our web site documentation
ought to primariliy reflect the current stable release rather than the
development version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ekanegae at gmail.com  Thu Nov 29 19:00:03 2007
From: ekanegae at gmail.com (Eduardo Kanegae)
Date: Thu Nov 29 19:00:06 2007
Subject: [gdal-dev] ogr2ogr + OGRSQL : process spatial functions for
	shapefiles
Message-ID: <ce13c0ca0711291600s5aae68e2te3d2a743cf188f87@mail.gmail.com>

Hi,

Is there any way to process validation/spatial functions using OGR SQL for
shapefiles?

I?d like to validate a given polygon shp layer using topology functions.

thanks in advance

-- 
Eduardo P. Kanegae
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071129/342ec19a/attachment.html
From warmerdam at pobox.com  Fri Nov 30 09:57:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 30 09:50:08 2007
Subject: [gdal-dev] ogr2ogr + OGRSQL : process spatial functions for
	shapefiles
In-Reply-To: <ce13c0ca0711291600s5aae68e2te3d2a743cf188f87@mail.gmail.com>
References: <ce13c0ca0711291600s5aae68e2te3d2a743cf188f87@mail.gmail.com>
Message-ID: <475024DB.80201@pobox.com>

Eduardo Kanegae wrote:
> Hi,
> 
> Is there any way to process validation/spatial functions using OGR SQL 
> for shapefiles?
> 
> I?d like to validate a given polygon shp layer using topology functions.

Eduardo,

No, not really.  The GEOS spatial functionality is not exposed via OGR SQL
at this time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From lran at unc.edu  Fri Nov 30 13:45:21 2007
From: lran at unc.edu (Limei Ran)
Date: Fri Nov 30 13:46:03 2007
Subject: [gdal-dev] Problem in an application calling GDAL library
Message-ID: <47505A41.7000602@unc.edu>

Hi:

I obtained GDAL1.4.2 and install the software with PROJ.4 statically on 
a linux server.  Now, I am writting a small program using some classes 
in GDAL.  Here is my  Makefile to create exe file for the gdal_gridpoly.cpp:
=============================
# for Linux or any gcc/g++ compiler
CC = gcc
CPP = g++

# for IBM VisualAge compiler on AIX
#CC  = c89
#CPP = xlC_r

#Optional flags - uncomment one OPTFLAGS line
OPTFLAGS = -O2
#OPTFLAGS = -O -DDEBUG

#link flag
LNK_FLAGS =     -pg

#set GDAL library and include directories
GDAL_DIR = /nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/lib
GDAL_INCLUDE = /nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/include
LOCAL_DIR = /usr/lib

# Library paths
LIBS = -L$(GDAL_DIR) -lgdal -L$(LOCAL_DIR) -lpq -lz  -lm -lrt -ldl -static
EXE_LIBS = $(GDAL_DIR)/libgdal.la

CPPFLAGS = $(OPTFLAGS) -I$(GDAL_INCLUDE)

all: ogr_gridpoly.exe

ogr_gridpoly.exe:  ogr_gridpoly.o $(EXE_LIBS)
        $(CPP) $(LNK_FLAGS ) ogr_gridpoly.o -o $ogr_gridpoly.exe $(LIBS)

clean:
         -rm -f *.o ogr_gridpoly.exe

ogr_gridpoly.o:  ogr_gridpoly.cpp
        $(CPP) $(CPPFLAGS) ogr_gridpoly.cpp -c -o $@
==================================================

When I make the exe file, I got a lot error messages related to 
undefined references such as:

===================================================
/nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/lib/libgdal.a(cplgetsymbol.o)(.text+0x24): 
In function `CPLGetSymbol':
: Using 'dlopen' in statically linked applications requires at runtime 
the shared libraries from the glibc version used for linking
/usr/lib/libpq.a(fe-secure.o)(.text+0x3a6): In function `load_dh_file':
/usr/src/build/475942-i386/BUILD/postgresql-7.3.8/src/interfaces/libpq/fe-secure.c:503: 
Using 'getpwuid' in statically linked applications requires at runtime 
the shared libraries from the glibc version used for linking
/usr/lib/libpq.a(fe-connect.o)(.text+0xccc): In function `connectDBStart':
/usr/src/build/475942-i386/BUILD/postgresql-7.3.8/src/interfaces/libpq/fe-connect.c:844: 
Using 'gethostbyname' in statically linked applications requires at 
runtime the shared libraries from the glibc version used for linking
/nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/lib/libgdal.a(ogrociselectlayer.o)(.text+0x181): 
In function `OGROCISelectLayer::ReadTableDefinition(OGROCIStatement*)':
: undefined reference to `OCIParamGet'
/nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/lib/libgdal.a(ogrocisession.o)(.text+0x128): 
In function `OGROCISession::~OGROCISession()':
: undefined reference to `OCILogoff'
/nas/uncch/depts/cep/emc/lran/soft/gdal-1.4.2/local/lib/libgdal.a(ogrocisession.o)(.text+0x13b): 
In function `OGROCISession::~OGROCISession()':
.............................
=========================================================

There must be some problems in defining LIBS.  It looks like OCI* stuffs 
are related to oracle.  I looked GDAL's GDALmake.opt.  LIBS is defined as:
LIBS    =       -L/nas/uncch/depts/cep/emc/lran/soft/proj-4.5.0/exe/lib 
-lproj -L/afs/isis.unc.edu/pkg/oracle-1020/client//lib -lclntsh -lnnz10 
-lgif -ljpeg -lpng -L/usr/lib -lpq -lz  -lm -lrt -ldl  $(DWG_LIBS) 
$(SDE_LIB) $(CURL_LIB) $(IDB_LIB)

My question is how I can define GDAL library in my application's 
makefile?  Do I need to include PROJ and oracle lib likes LIBS in GDAL's 
GDALmake.opt in my application Makefile LIBS?

Thanks,

Limei
 
From ari.jolma at tkk.fi  Fri Nov 30 17:33:56 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Nov 30 17:32:47 2007
Subject: [gdal-dev] Contour generation method in bindings
Message-ID: <47508FD4.3040109@tkk.fi>

I added a function and, based on that, a method for Band for making 
contour lines into the Swig bindings. These are currently only in Perl 
(see the end of gdal_perl.i) since it needs a couple of new typemaps.

Tamas, Hobu, other swig bindings people, comments?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From hobu.inc at gmail.com  Fri Nov 30 18:15:45 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Nov 30 18:16:42 2007
Subject: [gdal-dev] Contour generation method in bindings
In-Reply-To: <47508FD4.3040109@tkk.fi>
References: <47508FD4.3040109@tkk.fi>
Message-ID: <85CB0037-7D81-481F-B120-59D1735DA43F@gmail.com>

I am planning to add CreateGrid support as well.

I am slightly confused by http://trac.osgeo.org/gdal/changeset/13163  
Why are we importing ogr.i into gdal.i?

Howard
On Nov 30, 2007, at 4:33 PM, Ari Jolma wrote:

> I added a function and, based on that, a method for Band for making  
> contour lines into the Swig bindings. These are currently only in  
> Perl (see the end of gdal_perl.i) since it needs a couple of new  
> typemaps.
>
> Tamas, Hobu, other swig bindings people, comments?
>
> Ari
>
> -- 
> Prof. Ari Jolma
> Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
> Teknillinen Korkeakoulu / Helsinki University of Technology
> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

