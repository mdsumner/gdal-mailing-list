From pawill79 at gmail.com  Sat Oct  1 03:53:45 2011
From: pawill79 at gmail.com (pawill79)
Date: Sat Oct  1 05:08:42 2011
Subject: [gdal-dev] Re: GDAL JP2KAK plugin for lossless 16 bit
In-Reply-To: <4D63EF8F.7020201@pobox.com>
References: <201102221631.p1MGVrT0013890@smtp06.msg.oleane.net>
	<4D63EF8F.7020201@pobox.com>
Message-ID: <1317455625814-6850147.post@n2.nabble.com>

I have also come across this issue. The odd thing is that it works fine when
build on Solaris x86 64bit. I currently compiled GDAL 1.8.1 on Fedora Linux
x86 32bit. 

Like previously mentioned, if I use kdu_compress on the TIF file the
artifacts are not present. When running gdal_translate directly from NITF or
TIF to JP2KAK the artifacts are showed as lines throughout image and overall
degraded quality.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-JP2KAK-plugin-for-lossless-16-bit-tp6053172p6850147.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From luzhenyu1981 at gmail.com  Sun Oct  2 17:01:11 2011
From: luzhenyu1981 at gmail.com (Zhenyu Lu)
Date: Sun Oct  2 18:25:16 2011
Subject: [gdal-dev] Help on GDAL 1.8.1 .dll files for C#
Message-ID: <CA+VK+OC8-HMUT8CZx_iPiHMMtokzNyS_=UvTEBaT2kp8P16Kog@mail.gmail.com>

Hi,

Is there any possibilities that any kind-hearted guys can send me the
compiled .dll files of GDAL 1.8.1 for C#. I am trying to compile these .dll
files this whole afternoon, but failed all the time.
I used to create tools using GDAL 1.5.2 and C#. These tools run well under
the OS of XP, but these days I would like to run the tools under the Windows
7. It always remind me that "initialize the OSGeo.GDAL.Gdal throw an
exception".
I am guessing is that because the 1.5.2 is too old to work on Windows 7.
Then I decided to compile the most current version of GDAL 1.8.1 to see
whether it will be useful for solving the problem. I have already obtained
three .dll files for GDAL, which are gdal18, gdal_wrap, gdal_csharp. But I
noticed that two files named as gdalconst_csharp.dll and gdalconst_wrap.dll
are missing. Does the GDAL 1.8.1 require same .dll files as the GDAL 1.5.2?
Anyone send me the compiled .dll files or let me know where the possible
problem would be might save my frustrated life ^-^.
Thanks in advance for whoever can help!

-- 
Zhenyu Lu
SUNY-ESF
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111003/d44c5b1f/attachment.html
From armin.burger at gmx.net  Sun Oct  2 18:12:07 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Sun Oct  2 19:40:33 2011
Subject: [gdal-dev] Help on GDAL 1.8.1 .dll files for C#
In-Reply-To: <CA+VK+OC8-HMUT8CZx_iPiHMMtokzNyS_=UvTEBaT2kp8P16Kog@mail.gmail.com>
References: <CA+VK+OC8-HMUT8CZx_iPiHMMtokzNyS_=UvTEBaT2kp8P16Kog@mail.gmail.com>
Message-ID: <4E88E1B7.7030908@gmx.net>

Zhenyu,

have you tried the compiled versions from

http://www.gisinternals.com/sdk/

they come in various flavours of compilers, in 32/64 bit, contain java, 
python and c# bindings. So I guess one of them should fit your environment.

Best regards
armin

On 02/10/2011 23:01, Zhenyu Lu wrote:
> Hi,
> Is there any possibilities that any kind-hearted guys can send me the
> compiled .dll files of GDAL 1.8.1 for C#. I am trying to compile these
> .dll files this whole afternoon, but failed all the time.
> I used to create tools using GDAL 1.5.2 and C#. These tools run well
> under the OS of XP, but these days I would like to run the tools under
> the Windows 7. It always remind me that "initialize the OSGeo.GDAL.Gdal
> throw an exception".
> I am guessing is that because the 1.5.2 is too old to work on Windows 7.
> Then I decided to compile the most current version of GDAL 1.8.1 to see
> whether it will be useful for solving the problem. I have already
> obtained three .dll files for GDAL, which are gdal18, gdal_wrap,
> gdal_csharp. But I noticed that two files named as gdalconst_csharp.dll
> and gdalconst_wrap.dll are missing. Does the GDAL 1.8.1 require
> same .dll files as the GDAL 1.5.2?
> Anyone send me the compiled .dll files or let me know where the possible
> problem would be might save my frustrated life ^-^.
> Thanks in advance for whoever can help!
>
> --
> Zhenyu Lu
> SUNY-ESF
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From szekerest at gmail.com  Mon Oct  3 03:04:36 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Oct  3 05:02:17 2011
Subject: [gdal-dev] Re: Question regarding GDAL .dll files for C#
In-Reply-To: <CA+VK+OBqTA9qGrFMtLcx4CvHAv7fpqysE=RhN3mL-L5QRkuK_w@mail.gmail.com>
References: <CA+VK+OBqTA9qGrFMtLcx4CvHAv7fpqysE=RhN3mL-L5QRkuK_w@mail.gmail.com>
Message-ID: <CACALY+R9u5n4NtmsQTgtk8LWUxYTJoFVermR4KhyuQAwEMRyJw@mail.gmail.com>

Hi Zhenyu Lu,

You need not install the plugin dll-s if you don't require the corresponding
functionality.
With regards to the dependent dll-s, you can use the -dev packages from
http://www.gisinternals.com/sdk/ to compile your own versions using the
following steps:

1. Download the -dev package according to your compiler version.
2. Extract the SDK files in a specific directory (like C:\builds)
3. Check out the gdal sources into this directory.
4. Edit makefile and comment out the unwanted dependecies, like:

#GDAL_POSTGIS = YES

5. Open a Visual studio command prompt, and type:

nmake gdal GDAL_DIR=[your gdal directory]


Best regards,

Tamas



2011/10/3 Zhenyu Lu <luzhenyu1981@gmail.com>

> Hi Tamas,
>
> Sorry for sending you email so late at night. I noticed that you're in
> charge of maintaining the GDAL binary and SDK packages. I would say that
> you've done a fatastic job so far for making so many GDAL binary and SDK
> packages. I've downloaded two .msi files which worked great. So I'm thinking
> that your knowledge might offer huge help for me.
> I would like to ask you several questions regarding the binary and SDK
> packages you've released.
> I used to use the .dll files of GDAL 1.5.2 before, which were compiled by
> myself using VS2005. Now I wrote a tool for students to use for their labs.
> I suddenly realized that all the computers of my uniersity have installed
> Windows 7 64bit operating system, and my previous compiled .dll files do not
> work anymore.
> So I downloaded the gdal-18-1400-x64-core.msi and installed it on
> my computer. Compared with the previous .dll files, the newly created .dll
> files has much larger size (maybe much more functions). I think it is mainly
> because I must include some other .dll files (hdf5dll, geos_c, libmysql,
> pdflib, and xerces-c_2_8.dll) to make it work. However, using my previously
> compiled .dll file, I only need to include the gdal1.5.dll itself. So my
> previous implementation has the file size of < 5 MB, but now the
> implementation grows to more than 20 MB which make it hard to distribute.
> Now I would like to ask is it possible for you to create .dll files or the
> installation file to only include the gdal18.dll file without the other
> plugin .dll files? Or is there a way for me to create such .dll files?
> Hopefully I have made my questions straightforward.
> Thank you so much if you could offer me some suggestions.
>
> -- Zhenyu Lu
> SUNY-ESF
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111003/a01fdbe5/attachment.html
From hdam99 at gmail.com  Mon Oct  3 09:05:16 2011
From: hdam99 at gmail.com (hdam99@gmail.com)
Date: Mon Oct  3 11:23:21 2011
Subject: [gdal-dev] ogr2ogr (1.8.2) error cannot fetch a layer
Message-ID: <1317647116084-6854910.post@n2.nabble.com>

Hi,

I'm using ogr2ogr to get data from a oracle view (11g2) to a gml (3.1) file. 
The gml file was created as expected even I got the ERROR1: ORA-04043:
object blah does not exist errors.

Why did I get those errors even though they are in the database?

There are two views that I didn't have any data.  One of them has additional
error "FAILURE: Couldn't fetch requested layer 'AIRWAY'!  

What would be the cause and would be there any work around?

Thanks - H

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-1-8-2-error-cannot-fetch-a-layer-tp6854910p6854910.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Mon Oct  3 12:43:16 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Oct  3 15:14:22 2011
Subject: [gdal-dev] Re: ogr2ogr (1.8.2) error cannot fetch a layer
References: <1317647116084-6854910.post@n2.nabble.com>
Message-ID: <loom.20111003T183734-246@post.gmane.org>

hdam99 <at> gmail.com <hdam99 <at> gmail.com> writes:

> 
> Hi,
> 
> I'm using ogr2ogr to get data from a oracle view (11g2) to a gml (3.1) file. 
> The gml file was created as expected even I got the ERROR1: ORA-04043:
> object blah does not exist errors.
> 
> Why did I get those errors even though they are in the database?
> 
> There are two views that I didn't have any data.  One of them has additional
> error "FAILURE: Couldn't fetch requested layer 'AIRWAY'!  
> 
> What would be the cause and would be there any work around?
hdam99 <at> gmail.com <hdam99 <at> gmail.com> writes:

> 
> Hi,
> 
> I'm using ogr2ogr to get data from a oracle view (11g2) to a gml (3.1) file. 
> The gml file was created as expected even I got the ERROR1: ORA-04043:
> object blah does not exist errors.
> 
> Why did I get those errors even though they are in the database?
> 
> There are two views that I didn't have any data.  One of them has additional
> error "FAILURE: Couldn't fetch requested layer 'AIRWAY'!  
> 
> What would be the cause and would be there any work around?

ORA-error is coming from the database but I fear with this information not much
more can be said. For having something to start with, could you provide us

- The CREATE VIEW you have used
- What you have in the USER_SDO_GEOM_COLUMNS about the new view
- What does ogrinfo list about the view?
- Is the Oracle user who created the view the same as the ogr2ogr user? If
not,what rights does ogr2ogr user have for the view?


> Thanks - H
> 
> --
> View this message in context:
http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-1-8-2-error-cannot-fetch-a-layer-tp6854910p6854910.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 




From DCarreira at edia.pt  Mon Oct  3 13:17:25 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon Oct  3 16:17:56 2011
Subject: [gdal-dev] ogr, vrt - connecting to arcsde errors only with srcsql
Message-ID: <9DA6C5AFE0E78D48B7AC250D357F33021EBC82@beja012.edia.pt>

Hi there.

I'm having trouble using a SrcSQL tag in a vrt that connects to an ArcSDE feature class.

If I use SrcLayer everything works.

But if I remove SrcLayer, and add a SrcSQL with the simplest of queries (SELECT * FROM USER.TABLE1) I get errors in ogrinfo:

ERROR 1: SQL Expression Parsing Error: syntax error
ERROR 1: SQL statement failed, or returned no layer result:
SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
ERROR 1: SQL Expression Parsing Error: syntax error
ERROR 1: SQL statement failed, or returned no layer result:
SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
FAILURE:
Unable to open datasource `sde_Regadio_SQL.vrt' with the following drivers.

Any idea why this is?

Thanks,
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111003/3f277147/attachment.html
From even.rouault at mines-paris.org  Mon Oct  3 13:50:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct  3 16:25:12 2011
Subject: [gdal-dev] ogr, vrt - connecting to arcsde errors only with srcsql
In-Reply-To: <9DA6C5AFE0E78D48B7AC250D357F33021EBC82@beja012.edia.pt>
References: <9DA6C5AFE0E78D48B7AC250D357F33021EBC82@beja012.edia.pt>
Message-ID: <201110031950.50770.even.rouault@mines-paris.org>

Le lundi 03 octobre 2011 19:17:25, Duarte Carreira a ?crit :
> Hi there.
> 
> I'm having trouble using a SrcSQL tag in a vrt that connects to an ArcSDE
> feature class.
> 
> If I use SrcLayer everything works.
> 
> But if I remove SrcLayer, and add a SrcSQL with the simplest of queries
> (SELECT * FROM USER.TABLE1) I get errors in ogrinfo:
> 
> ERROR 1: SQL Expression Parsing Error: syntax error
> ERROR 1: SQL statement failed, or returned no layer result:
> SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
> ERROR 1: SQL Expression Parsing Error: syntax error
> ERROR 1: SQL statement failed, or returned no layer result:
> SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
> FAILURE:
> Unable to open datasource `sde_Regadio_SQL.vrt' with the following drivers.
> 
> Any idea why this is?

I guess it is because of the . in the table name. You should surround the 
table name by simple quote character.

SELECT * FROM 'USER.TABLE1'

> 
> Thanks,
> Duarte
From ivan.lucena at pmldnet.com  Mon Oct  3 20:02:21 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Oct  3 22:56:46 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
Message-ID: <20111004000222.19170.qmail@s466.sureserver.com>

Hi All,

RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername

The goal of RFC 36 is to save processing time by telling GDALOpen what driver to use, avoiding the driver-probing mechanism (Where all drivers are asked to checked if they recognize the file).

It works by adding the driver name before the file-name as in GDALOpen("hfa:example_file.img").

*It is optional*. It does not invalidate the current simple filename entry that most of the drivers use nor the more complex "filename" string formats used by a few drivers (with things like server-name, port-number, table-name).

It is intended to speed up applications or scripts that need to process a large number of datasets when it already knows what driver to use.

Command line use should not be affect considerably in terms of speed but it adds the option to avoid the wrong driver from taking precedence from the intended one (#3043), ex.:

$ gdalinfo ntif:/autotest/gdrivers/data/rgb.ntf"

If you want to try it, a patch that implements this proposed change is available on ticket 3043 http://trac.osgeo.org/gdal/ticket/3043

Please take a look and send us your comments.

Regards,

Ivan
From rush at winkey.org  Mon Oct  3 20:21:57 2011
From: rush at winkey.org (Brian Case)
Date: Mon Oct  3 23:17:37 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <20111004000222.19170.qmail@s466.sureserver.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
Message-ID: <1317687717.30287.13.camel@octopi>

Ivan

Makes me wonder what kind of performance gain you could see with
mapserver on a layer with a large number of images to open.

Seems to me that a tileindex would be a good application of this.

Brian




On Mon, 2011-10-03 at 19:02 -0500, Ivan Lucena wrote:
> Hi All,
> 
> RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername
> 
> The goal of RFC 36 is to save processing time by telling GDALOpen what driver to use, avoiding the driver-probing mechanism (Where all drivers are asked to checked if they recognize the file).
> 
> It works by adding the driver name before the file-name as in GDALOpen("hfa:example_file.img").
> 
> *It is optional*. It does not invalidate the current simple filename entry that most of the drivers use nor the more complex "filename" string formats used by a few drivers (with things like server-name, port-number, table-name).
> 
> It is intended to speed up applications or scripts that need to process a large number of datasets when it already knows what driver to use.
> 
> Command line use should not be affect considerably in terms of speed but it adds the option to avoid the wrong driver from taking precedence from the intended one (#3043), ex.:
> 
> $ gdalinfo ntif:/autotest/gdrivers/data/rgb.ntf"
> 
> If you want to try it, a patch that implements this proposed change is available on ticket 3043 http://trac.osgeo.org/gdal/ticket/3043
> 
> Please take a look and send us your comments.
> 
> Regards,
> 
> Ivan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Mon Oct  3 21:14:32 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Oct  4 00:13:10 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <20111004000222.19170.qmail@s466.sureserver.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
Message-ID: <4E8A5DF8.8000801@mapgears.com>

I like the idea, especially since it can increase performance in some 
cases. However unless I'm mistaken the proposed patch seems to fall back 
on the regular test-open loop when the GDALOpenInternal() call with the 
explicit driver name failed, no matter why it failed. e.g. I specify the 
invalid "hfa:test.tif" open string, then I should get a NULL return 
value and not a handle to a TIFF file.

The patch would need to be reworked for this, but I think that if the 
GetDriverByName() call succeeds (i.e. the driver name prefix is 
recognized by GDAL) and the call to poDriver->pfnOpen() fails then we 
should return NULL to the application code (and not fall back on the 
test-open loop). OTOH, if the GetDriverByName() lookup failed, then we 
should fall back on the test-open loop.

Also, if we implement this mechanism in GDAL, then we'd have to provide 
it in OGR as well to be consistent.

Daniel


On 11-10-03 08:02 PM, Ivan Lucena wrote:
> Hi All,
>
> RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername
>
> The goal of RFC 36 is to save processing time by telling GDALOpen what driver to use, avoiding the driver-probing mechanism (Where all drivers are asked to checked if they recognize the file).
>
> It works by adding the driver name before the file-name as in GDALOpen("hfa:example_file.img").
>
> *It is optional*. It does not invalidate the current simple filename entry that most of the drivers use nor the more complex "filename" string formats used by a few drivers (with things like server-name, port-number, table-name).
>
> It is intended to speed up applications or scripts that need to process a large number of datasets when it already knows what driver to use.
>
> Command line use should not be affect considerably in terms of speed but it adds the option to avoid the wrong driver from taking precedence from the intended one (#3043), ex.:
>
> $ gdalinfo ntif:/autotest/gdrivers/data/rgb.ntf"
>
> If you want to try it, a patch that implements this proposed change is available on ticket 3043 http://trac.osgeo.org/gdal/ticket/3043
>
> Please take a look and send us your comments.
>
> Regards,
>
> Ivan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Mon Oct  3 22:04:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  4 01:05:27 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <4E8A5DF8.8000801@mapgears.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A5DF8.8000801@mapgears.com>
Message-ID: <CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>

On Mon, Oct 3, 2011 at 6:14 PM, Daniel Morissette
<dmorissette@mapgears.com> wrote:
> I like the idea, especially since it can increase performance in some cases.
> However unless I'm mistaken the proposed patch seems to fall back on the
> regular test-open loop when the GDALOpenInternal() call with the explicit
> driver name failed, no matter why it failed. e.g. I specify the invalid
> "hfa:test.tif" open string, then I should get a NULL return value and not a
> handle to a TIFF file.

Daniel,

I believe that is because it is hard to know if HFA:test.tif was really
something other than a request for the HFA driver.  It could actually
be a file named "HFA:test.tif" or it could be that another driver happens
to use the HFA: prefix to mean something.   I believe this is an
effort to avoid failure in these cases.

> The patch would need to be reworked for this, but I think that if the
> GetDriverByName() call succeeds (i.e. the driver name prefix is recognized
> by GDAL) and the call to poDriver->pfnOpen() fails then we should return
> NULL to the application code (and not fall back on the test-open loop).
> OTOH, if the GetDriverByName() lookup failed, then we should fall back on
> the test-open loop.
>
> Also, if we implement this mechanism in GDAL, then we'd have to provide it
> in OGR as well to be consistent.

I'm not convinced that this is necessary.  I have had a hope for
some time to provide a standard way of binding up open options,
including the driver name, for OGR as demonstrated by a
request like:

  @driver=ingres,dbname=test

One objection I had previously to Ivan's proposal is that I'm
interested in pursuing this general purpose mechanism for
many open options in OGR and in GDAL.  But since I haven't
gotten to it for so long there is no point in holding up Ivan's
fairly straight forward change.  Nevertheless, I'm hesitant to
push his change to OGR unnecessarily.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From dmorissette at mapgears.com  Mon Oct  3 22:52:09 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Oct  4 01:55:58 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>	<4E8A5DF8.8000801@mapgears.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
Message-ID: <4E8A74D9.5090006@mapgears.com>

On 11-10-03 10:04 PM, Frank Warmerdam wrote:
>
> I believe that is because it is hard to know if HFA:test.tif was really
> something other than a request for the HFA driver.  It could actually
> be a file named "HFA:test.tif" or it could be that another driver happens
> to use the HFA: prefix to mean something.   I believe this is an
> effort to avoid failure in these cases.
>

Um... the best I can say then is -0 in the hope that we can find a 
better delimiter or syntax. Unfortunately I just can't come up with a 
better option at the moment.

>
> I'm not convinced that this is necessary.  I have had a hope for
> some time to provide a standard way of binding up open options,
> including the driver name, for OGR as demonstrated by a
> request like:
>
>    @driver=ingres,dbname=test
>

Unfortunately "@driver=ingres,dbname=test.tif" is also a valid filename, 
so we'd have the same problem as with "HFA:test.tif" above.

I also think it is important to be consistent between GDAL and OGR for 
something like this.

Once again, I'm not trying to kill the idea, just pointing the flaws in 
the hope that the someone in the group will find a more predictable 
mechanism.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From chaitanya.ch at gmail.com  Mon Oct  3 23:55:27 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct  4 03:02:48 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <4E8A74D9.5090006@mapgears.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A5DF8.8000801@mapgears.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
	<4E8A74D9.5090006@mapgears.com>
Message-ID: <CAMKgpOYmwTg7J=PjFCvt53EN83JjUcJwOQzzk7Wmv_Yg042Z8w@mail.gmail.com>

What happens when a user tries to open a file named "hfa:example_file.img"
the current way when there is also a file name "example_file.img"?

What if we try to reorder the driver list according to the file extension?

On Tue, Oct 4, 2011 at 8:22 AM, Daniel Morissette
<dmorissette@mapgears.com>wrote:

> On 11-10-03 10:04 PM, Frank Warmerdam wrote:
>
>>
>> I believe that is because it is hard to know if HFA:test.tif was really
>> something other than a request for the HFA driver.  It could actually
>> be a file named "HFA:test.tif" or it could be that another driver happens
>> to use the HFA: prefix to mean something.   I believe this is an
>> effort to avoid failure in these cases.
>>
>>
> Um... the best I can say then is -0 in the hope that we can find a better
> delimiter or syntax. Unfortunately I just can't come up with a better option
> at the moment.
>
>
>
>> I'm not convinced that this is necessary.  I have had a hope for
>> some time to provide a standard way of binding up open options,
>> including the driver name, for OGR as demonstrated by a
>> request like:
>>
>>   @driver=ingres,dbname=test
>>
>>
> Unfortunately "@driver=ingres,dbname=test.**tif" is also a valid filename,
> so we'd have the same problem as with "HFA:test.tif" above.
>
> I also think it is important to be consistent between GDAL and OGR for
> something like this.
>
> Once again, I'm not trying to kill the idea, just pointing the flaws in the
> hope that the someone in the group will find a more predictable mechanism.
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111004/c9a7791c/attachment.html
From even.rouault at mines-paris.org  Tue Oct  4 01:54:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  4 05:08:14 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <CAMKgpOYmwTg7J=PjFCvt53EN83JjUcJwOQzzk7Wmv_Yg042Z8w@mail.gmail.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A74D9.5090006@mapgears.com>
	<CAMKgpOYmwTg7J=PjFCvt53EN83JjUcJwOQzzk7Wmv_Yg042Z8w@mail.gmail.com>
Message-ID: <201110040754.26371.even.rouault@mines-paris.org>

Le mardi 04 octobre 2011 05:55:27, Chaitanya kumar CH a ?crit :
> What happens when a user tries to open a file named "hfa:example_file.img"
> the current way when there is also a file name "example_file.img"?

That should be fine. Ivan's code is only triggered :

if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != NULL  ) 

So if "hfa:example_file.img" is a regular file, it will be opened through the 
usual open mechanism.

> 
> What if we try to reorder the driver list according to the file extension?

That was one of the previous Ivan's attempt (actually the reordering was done 
according to the provided driver name, not file extension which is not a 100% 
reliable way of guessing the driver), but there are multithread concurrency 
problems with this solution that would oblige to hold a mutex around pfn-
>Open(), which would hurt scalability.
From even.rouault at mines-paris.org  Tue Oct  4 02:09:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  4 05:23:52 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <4E8A74D9.5090006@mapgears.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
	<4E8A74D9.5090006@mapgears.com>
Message-ID: <201110040809.16945.even.rouault@mines-paris.org>

Le mardi 04 octobre 2011 04:52:09, Daniel Morissette a ?crit :
> On 11-10-03 10:04 PM, Frank Warmerdam wrote:
> > I believe that is because it is hard to know if HFA:test.tif was really
> > something other than a request for the HFA driver.  It could actually
> > be a file named "HFA:test.tif

Daniel's suggestion to not fallback to the regular Open() that loops over the 
driver, once we've recognized the driver name, could make sense actually. 
Because Ivan's code is not called if the "drivername:filename" is a regular 
filename ( see if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != 
NULL  )  ).

> > " or it could be that another driver happens
> > to use the HFA: prefix to mean something.

That would be pretty confusing and should be banned. I hope there's no such 
case in the current code base !

> Um... the best I can say then is -0 in the hope that we can find a
> better delimiter or syntax. Unfortunately I just can't come up with a
> better option at the moment.

There's already another GDALOpenInternal() that I pushed some time ago for the 
purpose of the NITF driver (that needs to restrict the opening of JPEG2000 
datastream to the JPEG2000 capable driver that are PAM capable). That 
GDALOpenInternal() accepts a list of driver names as an additional argument. 

That could be an alternative to Ivan's solution. The downside of this approach 
is that as it is a new API, you need to retrofit all callers, such as gdalinfo, 
gdal_translate, and all the other gdal utilities/scripts etc.., to add a new 
user option to specify the driver name(s).

So I don't see any obvious winner between the 2 approachs (embedding the 
driver name in the string vs providing a new argument to GDALOpenXXX() )

> 
> > I'm not convinced that this is necessary.  I have had a hope for
> > some time to provide a standard way of binding up open options,
> > including the driver name, for OGR as demonstrated by a
> > 
> > request like:
> >    @driver=ingres,dbname=test
> 
> Unfortunately "@driver=ingres,dbname=test.tif" is also a valid filename,
> so we'd have the same problem as with "HFA:test.tif" above.
> 
> I also think it is important to be consistent between GDAL and OGR for
> something like this.
> 
> Once again, I'm not trying to kill the idea, just pointing the flaws in
> the hope that the someone in the group will find a more predictable
> mechanism.
From jukka.rahkonen at mmmtike.fi  Tue Oct  4 02:42:47 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Oct  4 05:59:09 2011
Subject: [gdal-dev] Re: Resquest for comments (RFC 36)
References: <20111004000222.19170.qmail@s466.sureserver.com>
Message-ID: <loom.20111004T081226-653@post.gmane.org>

Ivan Lucena <ivan.lucena <at> pmldnet.com> writes:

> 
> Hi All,
> 
> RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername
> 
> The goal of RFC 36 is to save processing time by telling GDALOpen what driver
to use, avoiding the
> driver-probing mechanism (Where all drivers are asked to checked if they
recognize the file).

You can add to the motivation of RFC also the case when a file format is
supported by several drivers. I do not know if there are others than JPEG2000
but for that GDAL has JPEG2000, JP2KAK, JP2ECW, JP2MrSID and JP2OpenJPEG
drivers. If several drivers are configured the only way to control which one is
used is to use GDAL_SKIP. Being able to tell which driver to use instead of
which one(s) not to use feels much better for me.

I can easily imagine that someone making benchmark with different GDAL JPEG2000
drivers could get totally wrong results if the new driver:file opening system
for some reason fails and GDAL takes automatically the first capable JPEG2000
driver from the list without warning the user. Wouldn't it be better to throw an
error by default?

-Jukka Rahkonen-

From DCarreira at edia.pt  Tue Oct  4 05:47:20 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue Oct  4 05:51:06 2011
Subject: [gdal-dev] ogr, vrt - connecting to arcsde errors only with srcsql
In-Reply-To: <201110031950.50770.even.rouault@mines-paris.org>
References: <9DA6C5AFE0E78D48B7AC250D357F33021EBC82@beja012.edia.pt>
	<201110031950.50770.even.rouault@mines-paris.org>
Message-ID: <9DA6C5AFE0E78D48B7AC250D357F33021EBCE6@beja012.edia.pt>

Hi Even.

Thanks, using single-quotes around the fully qualified table name solved it. But I cannot use a where clause... it always results in an error. I have tried everything I could remember: single quotes, double-quotes, fully qualified field name, quotes and double-quotes on the value... nothing worked.

A simple query with a numeric field:
SELECT * FROM 'GDBMAN.SREGA_PERIMETROS_REGA' WHERE OBJECTID_1=21522

Gives this error:
Layer name: regadio
ERROR 1: SE_stream_fetch: -51/Underlying DBMS error

If I use the fully qualified field name:
SELECT * FROM 'GDBMAN.SREGA_PERIMETROS_REGA' WHERE 'GDBMAN.SREGA_PERIMETROS_REGA.OBJECTID_1'=21522

Results in this error:
ERROR 1: Type mismatch or improper type of arguments to = operator.
ERROR 1: SQL statement failed, or returned no layer result:
SELECT * FROM 'GDBMAN.SREGA_PERIMETROS_REGA' WHERE 'GDBMAN.SREGA_PERIMETROS_REGA
.OBJECTID_1'=21522
FAILURE:
Unable to open datasource `sde_Regadio_SQL.vrt' with the following drivers.

If I take out the single-quotes around the field name I get another error:
ERROR 1: SQL Expression Parsing Error: syntax error
ERROR 1: SQL statement failed, or returned no layer result:
SELECT * FROM 'GDBMAN.SREGA_PERIMETROS_REGA' WHERE GDBMAN.SREGA_PERIMETROS_REGA.
OBJECTID_1=21522
FAILURE:
Unable to open datasource `sde_Regadio_SQL.vrt' with the following drivers.

Any clues on how to apply a SQL query here?

Thanks again,
Duarte

-----Mensagem original-----
De: Even Rouault [mailto:even.rouault@mines-paris.org]
Enviada: segunda-feira, 3 de Outubro de 2011 18:51
Para: gdal-dev@lists.osgeo.org
Cc: Duarte Carreira
Assunto: Re: [gdal-dev] ogr, vrt - connecting to arcsde errors only with srcsql

Le lundi 03 octobre 2011 19:17:25, Duarte Carreira a ?crit :
> Hi there.
>
> I'm having trouble using a SrcSQL tag in a vrt that connects to an ArcSDE
> feature class.
>
> If I use SrcLayer everything works.
>
> But if I remove SrcLayer, and add a SrcSQL with the simplest of queries
> (SELECT * FROM USER.TABLE1) I get errors in ogrinfo:
>
> ERROR 1: SQL Expression Parsing Error: syntax error
> ERROR 1: SQL statement failed, or returned no layer result:
> SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
> ERROR 1: SQL Expression Parsing Error: syntax error
> ERROR 1: SQL statement failed, or returned no layer result:
> SELECT * FROM GDBMAN.SREGA_PERIMETROS_REGA
> FAILURE:
> Unable to open datasource `sde_Regadio_SQL.vrt' with the following drivers.
>
> Any idea why this is?

I guess it is because of the . in the table name. You should surround the
table name by simple quote character.

SELECT * FROM 'USER.TABLE1'

>
> Thanks,
> Duarte
From ivan.lucena at pmldnet.com  Tue Oct  4 06:31:31 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Oct  4 06:37:45 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IFJlc3F1ZXN0IGZvciBjb21tZW50cyAoUkZDIDM2KQ==?=
In-Reply-To: <loom.20111004T081226-653@post.gmane.org>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<loom.20111004T081226-653@post.gmane.org>
Message-ID: <20111004103131.21044.qmail@s466.sureserver.com>

Hi Jukka,

That is a very important concern, you could try the path on your machine so that we can make sure. But I believe that because the functions does not strip the driver name from the oOpenInfo.pszFilename, when it fails and go back to the original code, it will also fails because no driver will recognize a file name like "DRVX:landsatscene.cot". Not even the DRVX driver. In that case GDALOpen will through the same old error. 

Regards,

Ivan

>  -------Original Message-------
>  From: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Re: Resquest for comments (RFC 36)
>  Sent: Oct 04 '11 01:42
>  
>  Ivan Lucena <ivan.lucena <at> pmldnet.com> writes:
>  
>  >
>  > Hi All,
>  >
>  > RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername
>  >
>  > The goal of RFC 36 is to save processing time by telling GDALOpen what driver
>  to use, avoiding the
>  > driver-probing mechanism (Where all drivers are asked to checked if they
>  recognize the file).
>  
>  You can add to the motivation of RFC also the case when a file format is
>  supported by several drivers. I do not know if there are others than JPEG2000
>  but for that GDAL has JPEG2000, JP2KAK, JP2ECW, JP2MrSID and JP2OpenJPEG
>  drivers. If several drivers are configured the only way to control which one is
>  used is to use GDAL_SKIP. Being able to tell which driver to use instead of
>  which one(s) not to use feels much better for me.
>  
>  I can easily imagine that someone making benchmark with different GDAL JPEG2000
>  drivers could get totally wrong results if the new driver:file opening system
>  for some reason fails and GDAL takes automatically the first capable JPEG2000
>  driver from the list without warning the user. Wouldn't it be better to throw an
>  error by default?
>  
>  -Jukka Rahkonen-
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From luisapena1979 at gmail.com  Tue Oct  4 09:21:58 2011
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Tue Oct  4 09:37:43 2011
Subject: [gdal-dev] Generating a Google Earth image overlay from a Geotiff
	image
Message-ID: <CAH+a18_To_ODkPaLGr1+Xy6dxh7dXTfgAOZGqEaxDgcRPP1LiA@mail.gmail.com>

Greetings

I have a raster RGB image (Geotiff) and I want to create an image overlay
KML file to be seen on Google Earth. Is it possible to do this in GDAL? If
yes, how ?
Thanks
Best regards,
Luisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111004/0b92aae7/attachment.html
From ivan.lucena at pmldnet.com  Tue Oct  4 09:58:14 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Oct  4 10:16:02 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmVzcXVlc3QgZm9yIGNvbW1lbnRzIChSRkMgMzYp?=
In-Reply-To: <CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A5DF8.8000801@mapgears.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
Message-ID: <20111004135814.3048.qmail@s466.sureserver.com>

Frank,

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  To: Daniel Morissette <dmorissette@mapgears.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Resquest for comments (RFC 36)
>  Sent: Oct 03 '11 21:04
>  
>  On Mon, Oct 3, 2011 at 6:14 PM, Daniel Morissette
>  <dmorissette@mapgears.com> wrote:
>  > I like the idea, especially since it can increase performance in some cases.
>  > However unless I'm mistaken the proposed patch seems to fall back on the
>  > regular test-open loop when the GDALOpenInternal() call with the explicit
>  > driver name failed, no matter why it failed. e.g. I specify the invalid
>  > "hfa:test.tif" open string, then I should get a NULL return value and not a
>  > handle to a TIFF file.
>  
>  Daniel,
>  
>  I believe that is because it is hard to know if HFA:test.tif was really
>  something other than a request for the HFA driver.??It could actually
>  be a file named "HFA:test.tif" or it could be that another driver happens
>  to use the HFA: prefix to mean something.?? I believe this is an
>  effort to avoid failure in these cases.

I think that the concerns that Daniel and Jukka has expressed are legit.

As I explain to Jukka. It might not be a problem but it is still feels like a dirt trick. I mean, the "fall back" strategy.

So it would be better to do this instead:

{{{
    GDALOpenInfo oOpenInfo( pszFilename, eAccess ); 
    if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != NULL  ) 
    { 
        return GDALOpenInternal( oOpenInfo ); 
    } 
    return GDALOpenInternal(oOpenInfo, papszAllowedDrivers); 
}}}

And implement any kind of driver-specific string convention inside the function. 

>  > The patch would need to be reworked for this, but I think that if the
>  > GetDriverByName() call succeeds (i.e. the driver name prefix is recognized
>  > by GDAL) and the call to poDriver->pfnOpen() fails then we should return
>  > NULL to the application code (and not fall back on the test-open loop).
>  > OTOH, if the GetDriverByName() lookup failed, then we should fall back on
>  > the test-open loop.

But as Frank mentioned, we do have some drivers that use unlawful driver names, like GTIFF_RAW. For example, one driver that I wrote is officially called "georaster:" but it does accept "geor:" and people got used to that simplification. What we could do is to create a list of driver-nickname extracting information from a new driver metada entry.

>  >
>  > Also, if we implement this mechanism in GDAL, then we'd have to provide it
>  > in OGR as well to be consistent.
>  
>  I'm not convinced that this is necessary.??I have had a hope for
>  some time to provide a standard way of binding up open options,
>  including the driver name, for OGR as demonstrated by a
>  request like:
>  
>  ??@driver=ingres,dbname=test
>  
>  One objection I had previously to Ivan's proposal is that I'm
>  interested in pursuing this general purpose mechanism for
>  many open options in OGR and in GDAL.??But since I haven't
>  gotten to it for so long there is no point in holding up Ivan's
>  fairly straight forward change.??Nevertheless, I'm hesitant to
>  push his change to OGR unnecessarily.

I like that idea and I think it would address most of the concerns. 

It could like that, I guess:

$ gdalinfo driver=gtiff,landsat1.tif
$ gdalinfo driver=gtiff,gtiff_raw:landsat1.tif

It is not very user friendly (just because it requires more writing) but the intention is to be script-friendly and app-friendly anyway. Right?

That would require minimal change and it would be backward compatible:

{{{
    GDALOpenInfo oOpenInfo( pszFilename, eAccess ); 
    if ( oOpenInfo.bStatOK == false && EQUALN( pszFilename, "driver=", 7 ) ) 
    { 
        return GDALOpenInternal( oOpenInfo ); 
    } 
    return GDALOpenInternal(oOpenInfo, papszAllowedDrivers); 
}}}

We just need to load the driver informed and pass the string that comes after the comma as the pszFileName. No strips, not tricks, plain and simple.

I could write a patch and change the RFC if you want.

Regards,

Ivan
From Govind.Harsh at geoeye.com  Tue Oct  4 10:52:08 2011
From: Govind.Harsh at geoeye.com (Harsh Govind)
Date: Tue Oct  4 11:13:43 2011
Subject: [gdal-dev] Generating a Google Earth image overlay from a
	Geotiff	image
In-Reply-To: <CAH+a18_To_ODkPaLGr1+Xy6dxh7dXTfgAOZGqEaxDgcRPP1LiA@mail.gmail.com>
References: <CAH+a18_To_ODkPaLGr1+Xy6dxh7dXTfgAOZGqEaxDgcRPP1LiA@mail.gmail.com>
Message-ID: <5F9140F5AD393F4CBC675B0A6689F3BE0239B1@EEXCHMB01THN.geoeye.com>

Gdal_translate.exe -of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz -co FORMAT=PNG

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Luisa Pe?a
Sent: Tuesday, October 04, 2011 9:22 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Generating a Google Earth image overlay from a Geotiff image

Greetings

I have a raster RGB image (Geotiff) and I want to create an image overlay KML file to be seen on Google Earth. Is it possible to do this in GDAL? If yes, how ?
Thanks
Best regards,
Luisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111004/3515cea2/attachment.html
From xenon at alphapixel.com  Tue Oct  4 10:56:01 2011
From: xenon at alphapixel.com (Chris 'Xenon' Hanson)
Date: Tue Oct  4 11:24:10 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <20111004000222.19170.qmail@s466.sureserver.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
Message-ID: <4E8B1E81.8070504@alphapixel.com>

On 10/3/2011 6:02 PM, Ivan Lucena wrote:
> Hi All,
> RFC 36: http://trac.osgeo.org/gdal/wiki/rfc36_open_by_drivername
> The goal of RFC 36 is to save processing time by telling GDALOpen what driver to use, avoiding the driver-probing mechanism (Where all drivers are asked to checked if they recognize the file).
> It works by adding the driver name before the file-name as in GDALOpen("hfa:example_file.img").

  My suggestion would be to look for a token that is NOT valid in a conventional
file-path-name/URL/URI. I would also possibly place that token in the FIRST string
character location for fast detection of this special condition without having to search
the whole beginning of the string. For example, if it was decided that '@' was not a valid
token otherwise, the string would be more like:

"@hfa:example_file.img"

  While in theory all token values are available for use in all URIs, in practice, I
suspect there is an exotic character (like 0x01 or 0x7f or 0xff) that could be safely
reserved for this use without affecting any known protocols or URIs.

-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon@AlphaPixel.com http://www.alphapixel.com/
  Digital Imaging. OpenGL. Scene Graphs. GIS. GPS. Training. Consulting. Contracting.
    "There is no Truth. There is only Perception. To Perceive is to Exist." - Xen
From etourigny.dev at gmail.com  Tue Oct  4 11:35:16 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Oct  4 11:58:25 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <20111004135814.3048.qmail@s466.sureserver.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A5DF8.8000801@mapgears.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
	<20111004135814.3048.qmail@s466.sureserver.com>
Message-ID: <CA+TxYvNN_+jzH9SyNj2wUiAcuYZpgLuL+SZjp8oJW0Ci54nY=w@mail.gmail.com>

Hi all,

On Tue, Oct 4, 2011 at 9:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Frank,
>
>> ?-------Original Message-------
>> ?From: Frank Warmerdam <warmerdam@pobox.com>
>> ?To: Daniel Morissette <dmorissette@mapgears.com>
>> ?Cc: gdal-dev@lists.osgeo.org
>> ?Subject: Re: [gdal-dev] Resquest for comments (RFC 36)
>> ?Sent: Oct 03 '11 21:04
>>
>> ?On Mon, Oct 3, 2011 at 6:14 PM, Daniel Morissette
>> ?<dmorissette@mapgears.com> wrote:
>> ?> I like the idea, especially since it can increase performance in some cases.
>> ?> However unless I'm mistaken the proposed patch seems to fall back on the
>> ?> regular test-open loop when the GDALOpenInternal() call with the explicit
>> ?> driver name failed, no matter why it failed. e.g. I specify the invalid
>> ?> "hfa:test.tif" open string, then I should get a NULL return value and not a
>> ?> handle to a TIFF file.
>>
>> ?Daniel,
>>
>> ?I believe that is because it is hard to know if HFA:test.tif was really
>> ?something other than a request for the HFA driver.??It could actually
>> ?be a file named "HFA:test.tif" or it could be that another driver happens
>> ?to use the HFA: prefix to mean something.?? I believe this is an
>> ?effort to avoid failure in these cases.
>
> I think that the concerns that Daniel and Jukka has expressed are legit.
>
> As I explain to Jukka. It might not be a problem but it is still feels like a dirt trick. I mean, the "fall back" strategy.
>
> So it would be better to do this instead:
>
> {{{
> ? ?GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> ? ?if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != NULL ?)
> ? ?{
> ? ? ? ?return GDALOpenInternal( oOpenInfo );
> ? ?}
> ? ?return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> }}}
>
> And implement any kind of driver-specific string convention inside the function.
>
>> ?> The patch would need to be reworked for this, but I think that if the
>> ?> GetDriverByName() call succeeds (i.e. the driver name prefix is recognized
>> ?> by GDAL) and the call to poDriver->pfnOpen() fails then we should return
>> ?> NULL to the application code (and not fall back on the test-open loop).
>> ?> OTOH, if the GetDriverByName() lookup failed, then we should fall back on
>> ?> the test-open loop.
>
> But as Frank mentioned, we do have some drivers that use unlawful driver names, like GTIFF_RAW. For example, one driver that I wrote is officially called "georaster:" but it does accept "geor:" and people got used to that simplification. What we could do is to create a list of driver-nickname extracting information from a new driver metada entry.

IMHO this should be added by each driver in the GDAL_Register<driver>
functions, and the driver's name be added automatically to this list,
without any changes.

>
>> ?>
>> ?> Also, if we implement this mechanism in GDAL, then we'd have to provide it
>> ?> in OGR as well to be consistent.
>>
>> ?I'm not convinced that this is necessary.??I have had a hope for
>> ?some time to provide a standard way of binding up open options,
>> ?including the driver name, for OGR as demonstrated by a
>> ?request like:
>>
>> ???@driver=ingres,dbname=test
>>
>> ?One objection I had previously to Ivan's proposal is that I'm
>> ?interested in pursuing this general purpose mechanism for
>> ?many open options in OGR and in GDAL.??But since I haven't
>> ?gotten to it for so long there is no point in holding up Ivan's
>> ?fairly straight forward change.??Nevertheless, I'm hesitant to
>> ?push his change to OGR unnecessarily.
>
> I like that idea and I think it would address most of the concerns.
>
> It could like that, I guess:
>
> $ gdalinfo driver=gtiff,landsat1.tif
> $ gdalinfo driver=gtiff,gtiff_raw:landsat1.tif
>
> It is not very user friendly (just because it requires more writing) but the intention is to be script-friendly and app-friendly anyway. Right?

As there are already a number of drivers which accept the
DRIVER:filename syntax, (therefore users and applications already use
that syntax) I would recommend using that syntax for the fast
detection also.

Perhaps both syntaxes could be valid, in order to accommodate OGR also?

1) <driver>:<filename> (e.g. gtiff:landsat1.tif)
2) driver=<driver>,<filename> (e.g. driver=gtiff:landsat1.tif)

I would add my 2cents and suggest that unusual filenames like
"hfa:example_file.img" and "@driver=ingres,dbname=test.tif" are rare,
and a fallback to the (slower) detection mecanism in these cases won't
be detrimental on average.

>
> That would require minimal change and it would be backward compatible:
>
> {{{
> ? ?GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> ? ?if ( oOpenInfo.bStatOK == false && EQUALN( pszFilename, "driver=", 7 ) )
> ? ?{
> ? ? ? ?return GDALOpenInternal( oOpenInfo );
> ? ?}
> ? ?return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> }}}
>
> We just need to load the driver informed and pass the string that comes after the comma as the pszFileName. No strips, not tricks, plain and simple.
>
> I could write a patch and change the RFC if you want.
>
> Regards,
>
> Ivan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From dmorissette at mapgears.com  Tue Oct  4 14:06:45 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Oct  4 14:38:14 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <4E8B1E81.8070504@alphapixel.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8B1E81.8070504@alphapixel.com>
Message-ID: <4E8B4B35.7010008@mapgears.com>

On 11-10-04 10:56 AM, Chris 'Xenon' Hanson wrote:
>>
>    My suggestion would be to look for a token that is NOT valid in a conventional
> file-path-name/URL/URI. I would also possibly place that token in the FIRST string
> character location for fast detection of this special condition without having to search
> the whole beginning of the string. For example, if it was decided that '@' was not a valid
> token otherwise, the string would be more like:
>
> "@hfa:example_file.img"
>
>    While in theory all token values are available for use in all URIs, in practice, I
> suspect there is an exotic character (like 0x01 or 0x7f or 0xff) that could be safely
> reserved for this use without affecting any known protocols or URIs.
>

[...]

On 11-10-04 09:58 AM, Ivan Lucena wrote:
> It could like that, I guess:
>
> $ gdalinfo driver=gtiff,landsat1.tif
> $ gdalinfo driver=gtiff,gtiff_raw:landsat1.tif
>
> It is not very user friendly (just because it requires more writing) but the intention is to be script-friendly and app-friendly anyway. Right?


I don't think this would be useful only in scripts.

I think we want a syntax that can easily be entered by a user at the 
command line, or in the text field of a desktop or web user interface. 
That definitely rules out exotic characters, and ideally we'd lean 
towards a simpler syntax.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Tue Oct  4 14:20:50 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  4 15:01:52 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <20111004135814.3048.qmail@s466.sureserver.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8A5DF8.8000801@mapgears.com>
	<CA+YzLBeqkeNjO0T3WKuG9AK6NO3zXkW8spSwTfhz3XCujAxMew@mail.gmail.com>
	<20111004135814.3048.qmail@s466.sureserver.com>
Message-ID: <CA+YzLBf9JpSBeMdRPH+afigDH7pBWbCsHEvT42XXUMMwV-q4_g@mail.gmail.com>

On Tue, Oct 4, 2011 at 6:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>> ?I believe that is because it is hard to know if HFA:test.tif was really
>> ?something other than a request for the HFA driver.??It could actually
>> ?be a file named "HFA:test.tif" or it could be that another driver happens
>> ?to use the HFA: prefix to mean something.?? I believe this is an
>> ?effort to avoid failure in these cases.
>
> I think that the concerns that Daniel and Jukka has expressed are legit.
>
> As I explain to Jukka. It might not be a problem but it is still feels like a dirt trick. I mean, the "fall back" strategy.
>
> So it would be better to do this instead:
>
> {{{
> ? ?GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> ? ?if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != NULL ?)
> ? ?{
> ? ? ? ?return GDALOpenInternal( oOpenInfo );
> ? ?}
> ? ?return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> }}}

Ivan,

I'm not clear on what you are proposing above, possibly because you have
simplified the code a bit to much for me to follow your point.

> But as Frank mentioned, we do have some drivers that use unlawful driver names, like GTIFF_RAW. For example, one driver that I wrote is officially called "georaster:" but it does accept "geor:" and people got used to that simplification. What we could do is to create a list of driver-nickname extracting information from a new driver metada entry.

I do *not* believe it is reasonable to expect drivers to register
"special prefixes".

I think the approach should be to examine the passed in
string, see if there appears to be a prefix like "HFA:", and
if so lookup to see if there is a corresponding driver.  If so,
try opening the file with that particular driver and with the
prefix stripped.

This logic will only activate if the prefix string matches a
driver name and there will be no conflict with things like
GTIFF_RAW.  By the way, I strongly dislike the suggestion
that these are "unlawful" names.

>> ?I'm not convinced that this is necessary.??I have had a hope for
>> ?some time to provide a standard way of binding up open options,
>> ?including the driver name, for OGR as demonstrated by a
>> ?request like:
>>
>> ???@driver=ingres,dbname=test
>>
>> ?One objection I had previously to Ivan's proposal is that I'm
>> ?interested in pursuing this general purpose mechanism for
>> ?many open options in OGR and in GDAL.??But since I haven't
>> ?gotten to it for so long there is no point in holding up Ivan's
>> ?fairly straight forward change.??Nevertheless, I'm hesitant to
>> ?push his change to OGR unnecessarily.
>
> I like that idea and I think it would address most of the concerns.
>
> It could like that, I guess:
>
> $ gdalinfo driver=gtiff,landsat1.tif
> $ gdalinfo driver=gtiff,gtiff_raw:landsat1.tif

> It is not very user friendly (just because it requires more writing) but the intention is to be script-friendly and app-friendly anyway. Right?

Note that using the complicated form is optional, and only needed
when there is a desire to pass open options.  Also, it would be:

  gdalinfo @driver=gtiff,landsat1.tif

The "@" prefix is the clue to kick into the special logic.  We would
likely want to avoid it if the file "@driver=gtiff,landsat1.tif" actually
existed in the filesystem.

The main advantage of the @ approach is that it is intended to be
easier to specify multiple open options.  Particularly on the OGR side
there has long been a desire to control how some DB opens are done
with extra open options but now the only way we can provide these is
via config options.   In any event, I am willing to back off this more
complex form so we can proceed with something promptly.

> That would require minimal change and it would be backward compatible:
>
> {{{
> ? ?GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> ? ?if ( oOpenInfo.bStatOK == false && EQUALN( pszFilename, "driver=", 7 ) )
> ? ?{
> ? ? ? ?return GDALOpenInternal( oOpenInfo );
> ? ?}
> ? ?return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> }}}
>
> We just need to load the driver informed and pass the string that comes after the comma as the pszFileName. No strips, not tricks, plain and simple.
>
> I could write a patch and change the RFC if you want.

I'm afraid I still don't follow the above.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Oct  4 14:31:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  4 15:04:32 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <4E8B4B35.7010008@mapgears.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<4E8B1E81.8070504@alphapixel.com> <4E8B4B35.7010008@mapgears.com>
Message-ID: <201110042031.38155.even.rouault@mines-paris.org>

> 
> I think we want a syntax that can easily be entered by a user at the
> command line, or in the text field of a desktop or web user interface.
> That definitely rules out exotic characters, and ideally we'd lean
> towards a simpler syntax.

For a desktop user interface, *ideally*, I think the user should not even know 
how it is formatted. He would select a filename in a file browser, and have a 
drop-down list "Format" with the following values "Autodetected (by default), 
GeoTIFF, Imagine, ...." with the driver long names rather than the short 
names. Then the application would combine the filename with the value from the 
drop-down list to format it to whatever syntax we will decide (or if we decide 
to create a new GDALOpenXXX() that takes a driver name as an extra argument, 
it will call it). The point is that the syntax should only matter to the 
people using command line utilities.

But when thinking to that a bit more, embedding the driver name rather than 
providing a new GDALOpenXXX() has clearly an advantage for the VRT or 
gdaltindex cases. The format of those files would not require any change to 
take advantage of the "fast open" new capability.

There's a small issue however to be able to build those files in a user 
friendly way. Currently, a common use case is to issue : "gdaltindex 
mytileindex.shp *.tif" or "gdalbuildvrt my.vrt *.tif"

But, you will not be able to issue : "gdaltindex mytileindex.shp GTiff:*.tif" 
or "gdalbuildvrt my.vrt GTiff:*.tif"

Well, you could, but then the utilities would have to do the listing of the 
directory by themselves, instead of relying on the shell to do the wildcard 
expansion. So perhaps for those utilities a new option would be necessary so 
that the utility can combine the filename with the driver name : "gdaltindex 
mytileindex.shp *.tif -driver GTiff" or "gdalbuildvrt my.vrt *.tif -driver 
GTiff"

From even.rouault at mines-paris.org  Tue Oct  4 14:42:31 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  4 15:16:06 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <CA+YzLBf9JpSBeMdRPH+afigDH7pBWbCsHEvT42XXUMMwV-q4_g@mail.gmail.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<20111004135814.3048.qmail@s466.sureserver.com>
	<CA+YzLBf9JpSBeMdRPH+afigDH7pBWbCsHEvT42XXUMMwV-q4_g@mail.gmail.com>
Message-ID: <201110042042.31890.even.rouault@mines-paris.org>

Le mardi 04 octobre 2011 20:20:50, Frank Warmerdam a ?crit :
> On Tue, Oct 4, 2011 at 6:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> >>  I believe that is because it is hard to know if HFA:test.tif was really
> >>  something other than a request for the HFA driver.  It could actually
> >>  be a file named "HFA:test.tif" or it could be that another driver
> >> happens to use the HFA: prefix to mean something.   I believe this is
> >> an effort to avoid failure in these cases.
> > 
> > I think that the concerns that Daniel and Jukka has expressed are legit.
> > 
> > As I explain to Jukka. It might not be a problem but it is still feels
> > like a dirt trick. I mean, the "fall back" strategy.
> > 
> > So it would be better to do this instead:
> > 
> > {{{
> >    GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> >    if ( oOpenInfo.bStatOK == false && strstr( pszFilename, ":" ) != NULL
> >  ) {
> >        return GDALOpenInternal( oOpenInfo );
> >    }
> >    return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> > }}}
> 
> Ivan,
> 
> I'm not clear on what you are proposing above, possibly because you have
> simplified the code a bit to much for me to follow your point.
> 
> > But as Frank mentioned, we do have some drivers that use unlawful driver
> > names, like GTIFF_RAW. For example, one driver that I wrote is
> > officially called "georaster:" but it does accept "geor:" and people got
> > used to that simplification. What we could do is to create a list of
> > driver-nickname extracting information from a new driver metada entry.
> 
> I do *not* believe it is reasonable to expect drivers to register
> "special prefixes".
> 
> I think the approach should be to examine the passed in
> string, see if there appears to be a prefix like "HFA:", and
> if so lookup to see if there is a corresponding driver.  If so,
> try opening the file with that particular driver and with the
> prefix stripped.
> 
> This logic will only activate if the prefix string matches a
> driver name and there will be no conflict with things like
> GTIFF_RAW.  By the way, I strongly dislike the suggestion
> that these are "unlawful" names.

That's exactly my understanding of what the latest patch 
http://trac.osgeo.org/gdal/attachment/ticket/3043/open_by_drivername_v3.patch 
does.

> 
> >>  I'm not convinced that this is necessary.  I have had a hope for
> >>  some time to provide a standard way of binding up open options,
> >>  including the driver name, for OGR as demonstrated by a
> >>  request like:
> >> 
> >>    @driver=ingres,dbname=test
> >> 
> >>  One objection I had previously to Ivan's proposal is that I'm
> >>  interested in pursuing this general purpose mechanism for
> >>  many open options in OGR and in GDAL.  But since I haven't
> >>  gotten to it for so long there is no point in holding up Ivan's
> >>  fairly straight forward change.  Nevertheless, I'm hesitant to
> >>  push his change to OGR unnecessarily.
> > 
> > I like that idea and I think it would address most of the concerns.
> > 
> > It could like that, I guess:
> > 
> > $ gdalinfo driver=gtiff,landsat1.tif
> > $ gdalinfo driver=gtiff,gtiff_raw:landsat1.tif
> > 
> > It is not very user friendly (just because it requires more writing) but
> > the intention is to be script-friendly and app-friendly anyway. Right?
> 
> Note that using the complicated form is optional, and only needed
> when there is a desire to pass open options.  Also, it would be:
> 
>   gdalinfo @driver=gtiff,landsat1.tif
> 
> The "@" prefix is the clue to kick into the special logic.  We would
> likely want to avoid it if the file "@driver=gtiff,landsat1.tif" actually
> existed in the filesystem.
> 
> The main advantage of the @ approach is that it is intended to be
> easier to specify multiple open options.

Even if it is not in the scope of current RFC, do you have an idea of what the 
syntax would be for open options so as we can pick up something that could be 
later extended ?

Something like :

@[driver=drivername,]option1=value1,options2=value2,filename ?

> Particularly on the OGR side
> there has long been a desire to control how some DB opens are done
> with extra open options but now the only way we can provide these is
> via config options.

Actually on OGR side, apart from the configuration options, you also have the 
notion of connection strings, like for the PG driver, to provide the driver 
name, database name, host, port, etc etc...

> In any event, I am willing to back off this more
> complex form so we can proceed with something promptly.
> 
> > That would require minimal change and it would be backward compatible:
> > 
> > {{{
> >    GDALOpenInfo oOpenInfo( pszFilename, eAccess );
> >    if ( oOpenInfo.bStatOK == false && EQUALN( pszFilename, "driver=", 7 )
> > ) {
> >        return GDALOpenInternal( oOpenInfo );
> >    }
> >    return GDALOpenInternal(oOpenInfo, papszAllowedDrivers);
> > }}}
> > 
> > We just need to load the driver informed and pass the string that comes
> > after the comma as the pszFileName. No strips, not tricks, plain and
> > simple.
> > 
> > I could write a patch and change the RFC if you want.
> 
> I'm afraid I still don't follow the above.
> 
> Best regards,
From warmerdam at pobox.com  Tue Oct  4 14:52:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  4 15:26:37 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <201110042042.31890.even.rouault@mines-paris.org>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<20111004135814.3048.qmail@s466.sureserver.com>
	<CA+YzLBf9JpSBeMdRPH+afigDH7pBWbCsHEvT42XXUMMwV-q4_g@mail.gmail.com>
	<201110042042.31890.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBctmPTPz6sA=xWainxJOQy_Tp5ZmCeR857TGB47j=6kQA@mail.gmail.com>

On Tue, Oct 4, 2011 at 11:42 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> That's exactly my understanding of what the latest patch
> http://trac.osgeo.org/gdal/attachment/ticket/3043/open_by_drivername_v3.patch
> does.

Even,

Good, but I didn't understand what Ivan was suggesting/proposing.

>> The main advantage of the @ approach is that it is intended to be
>> easier to specify multiple open options.
>
> Even if it is not in the scope of current RFC, do you have an idea of what the
> syntax would be for open options so as we can pick up something that could be
> later extended ?
>
> Something like :
>
> @[driver=drivername,]option1=value1,options2=value2,filename ?

This was my rough intention with, hopefully, well defined quoting or
escaping rules to take into account the case where the regular filename
contains commas.  One of the thing that held me back from pushing
this was coming up with good rules on quoting/escaping.  The use of
quotes in subdataset names in stuff like the HDF driver is a great headache.
In the gdalinfo report on a HDF driver we try to report the subdataset names
with clear quoting, but if folks cut and paste that into a shell the quotes
get eaten by the shell which makes it very hard for users to know what
they need to do unless they are quite shell-savvy.  I'd like to avoid that
if possible.


>> Particularly on the OGR side
>> there has long been a desire to control how some DB opens are done
>> with extra open options but now the only way we can provide these is
>> via config options.
>
> Actually on OGR side, apart from the configuration options, you also have the
> notion of connection strings, like for the PG driver, to provide the driver
> name, database name, host, port, etc etc...

Yes, my intention was to regularize how connection strings are done.
So if applied to the postgres driver we would have stuff like:

  @driver=pg,host=localhost,password=tiger,dbname=ottawa

What I don't like now is that the connection string parsing,
quoting, etc is handled differently in the different DB drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From hdam99 at gmail.com  Tue Oct  4 14:57:16 2011
From: hdam99 at gmail.com (hdam99@gmail.com)
Date: Tue Oct  4 15:31:30 2011
Subject: [gdal-dev] Re: ogr2ogr (1.8.2) error cannot fetch a layer
In-Reply-To: <loom.20111003T183734-246@post.gmane.org>
References: <1317647116084-6854910.post@n2.nabble.com>
	<loom.20111003T183734-246@post.gmane.org>
Message-ID: <1317754636605-6859755.post@n2.nabble.com>

Hi,

The failing layer doesn't have a geometry column, it associates with another
view that contains the geometries.  Would this cause error?

The ogrinfo returns the same error: "FAILURE: Couldn't fetch requested layer
'AIRWAY' "

Oracle user who created the view is the same as the ogr2ogr user, I have no
issues getting data from other views, except for misleading "ERROR1:
ORA-04043" messages displayed on the console.

Thanks - H

http://osgeo-org.1803224.n2.nabble.com/file/n6859755/airwayView.txt
airwayView.txt 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-1-8-2-error-cannot-fetch-a-layer-tp6854910p6859755.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Tue Oct  4 15:32:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  4 16:09:09 2011
Subject: [gdal-dev] Resquest for comments (RFC 36)
In-Reply-To: <CA+YzLBctmPTPz6sA=xWainxJOQy_Tp5ZmCeR857TGB47j=6kQA@mail.gmail.com>
References: <20111004000222.19170.qmail@s466.sureserver.com>
	<201110042042.31890.even.rouault@mines-paris.org>
	<CA+YzLBctmPTPz6sA=xWainxJOQy_Tp5ZmCeR857TGB47j=6kQA@mail.gmail.com>
Message-ID: <201110042132.57287.even.rouault@mines-paris.org>

> Yes, my intention was to regularize how connection strings are done.
> So if applied to the postgres driver we would have stuff like:
> 
>   @driver=pg,host=localhost,password=tiger,dbname=ottawa
> 
> What I don't like now is that the connection string parsing,
> quoting, etc is handled differently in the different DB drivers.

Yes, and actually the example I randomly picked up is a bit special, because 
the connection string of the PG driver is something directly passed to the 
PQconnectdb() call. Except that we have extended its syntax to also accomodate 
OGR specific options, like schemas, active_schema and tables, that we strip off 
from the connection string before passing it to PQconnectdb().

Of course, we could normalize the way to pass the options, and rebuild the 
connection string as expected by libpq.

> 
> Best regards,
From ivan.lucena at pmldnet.com  Tue Oct  4 22:45:30 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Oct  4 23:45:31 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmVzcXVlc3QgZm9yIGNvbW1lbnRzIChSRkMgMzYp?=
Message-ID: <20111005024531.3113.qmail@s466.sureserver.com>

Frank,

Sorry for the confusion. Please disregard my last message. I didn't had the time to edit it properly.

But I am happy to see that the discussion has brought some interesting ideas and some important concerns.

That is what I think we should do:

- Keep backward compatibility. Simple files names and drivers specific entries should works as usual;
- The initial approach, "drivername:" is misleading and problematic;
- We should use an unambiguous token to express exactly that a driver has been chosen.

In my option the "driver=" is the best approach because:

- It is simple enough to be used in command line, if needed (what is rarely the case);
- It works well with entries like "table=" or "user=";
- It doesn't create problems with driver that consume prefixes that are not real drivers names.

> The "@" prefix is the clue to kick into the special logic.  We would
> likely want to avoid it if the file "@driver=gtiff,landsat1.tif" actually
> existed in the filesystem.

Please note in the proposed code that If the file exist ("oOpenInfo.bStatOK == false") there is no need to check for anything else. Existing file will always be handle by the driver probing. IMHO I would rather not have the "@". The possibility of having a file by the name of "driver=something" is basically the same as "@driver=something".

Except by the "@", I agree with what you and Even discussed as a proposed format:

> @[driver=drivername,]option1=value1,options2=value2,filename

I would guess that the list of "option=value" and "filename" would be parsed by GDALOpenInfo constructor, like in:

  GDALOpenInfo oOpenInfoClone( "option1=value1,options2=value2,filename", eAccess );

That should work well in either strategy, driver probing or open-by-drivername. I think.

My best regards,

Ivan

>??-------Original Message-------
>??From: Frank Warmerdam <warmerdam@pobox.com>
>??To: Even Rouault <even.rouault@mines-paris.org>
>??Cc: gdal-dev@lists.osgeo.org, Ivan Lucena <ivan.lucena@pmldnet.com>
>??Subject: Re: [gdal-dev] Resquest for comments (RFC 36)
>??Sent: Oct 04 '11 13:52
>??
>??On Tue, Oct 4, 2011 at 11:42 AM, Even Rouault
>??<even.rouault@mines-paris.org> wrote:
>??> That's exactly my understanding of what the latest patch
>??> http://trac.osgeo.org/gdal/attachment/ticket/3043/open_by_drivername_v3.patch
>??> does.
>??
>??Even,
>??
>??Good, but I didn't understand what Ivan was suggesting/proposing.
>??
>??>> The main advantage of the @ approach is that it is intended to be
>??>> easier to specify multiple open options.
>??>
>??> Even if it is not in the scope of current RFC, do you have an idea of what the
>??> syntax would be for open options so as we can pick up something that could be
>??> later extended ?
>??>
>??> Something like :
>??>
>??> @[driver=drivername,]option1=value1,options2=value2,filename ?
>??
>??This was my rough intention with, hopefully, well defined quoting or
>??escaping rules to take into account the case where the regular filename
>??contains commas.??One of the thing that held me back from pushing
>??this was coming up with good rules on quoting/escaping.??The use of
>??quotes in subdataset names in stuff like the HDF driver is a great headache.
>??In the gdalinfo report on a HDF driver we try to report the subdataset names
>??with clear quoting, but if folks cut and paste that into a shell the quotes
>??get eaten by the shell which makes it very hard for users to know what
>??they need to do unless they are quite shell-savvy.??I'd like to avoid that
>??if possible.
>??
>??
>??>> Particularly on the OGR side
>??>> there has long been a desire to control how some DB opens are done
>??>> with extra open options but now the only way we can provide these is
>??>> via config options.
>??>
>??> Actually on OGR side, apart from the configuration options, you also have the
>??> notion of connection strings, like for the PG driver, to provide the driver
>??> name, database name, host, port, etc etc...
>??
>??Yes, my intention was to regularize how connection strings are done.
>??So if applied to the postgres driver we would have stuff like:
>??
>????@driver=pg,host=localhost,password=tiger,dbname=ottawa
>??
>??What I don't like now is that the connection string parsing,
>??quoting, etc is handled differently in the different DB drivers.
>??
>??Best regards,
>??--
>??---------------------------------------+--------------------------------------
>??I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>??light and sound - activate the windows | http://pobox.com/~warmerdam
>??and watch the world go round - Rush? ? | Geospatial Software Developer
>??
From etourigny.dev at gmail.com  Wed Oct  5 16:28:32 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct  5 18:27:21 2011
Subject: [gdal-dev] sandbox access for non-commiters
Message-ID: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>

Hi all,

I was wondering what is the policy regarding access to the svn sandbox
directories.  Can osgeo id's which are not commiters to gdal be
granted access to a directory within the sandbox svn (or just the
sandbox directory in general)?

I have not found any information on the gdal wiki, but there is some
info on openlayers here:
http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#HowdoIcreatemyownsandboxintheSVNrepository
It says that one can be granted access to the sandbox for a project by
someone who is already authorized for that sandbox.

I am asking this because I am working on netcdf improvements with a
contributor (Patrick) and we share our code on Github, but it would be
nice to be able to work in a sandbox in the osgeo svn.

Regards,
Etienne
From warmerdam at pobox.com  Wed Oct  5 16:55:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  5 18:55:23 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
Message-ID: <CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>

On Wed, Oct 5, 2011 at 1:28 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Hi all,
>
> I was wondering what is the policy regarding access to the svn sandbox
> directories. ?Can osgeo id's which are not commiters to gdal be
> granted access to a directory within the sandbox svn (or just the
> sandbox directory in general)?
>
> I have not found any information on the gdal wiki, but there is some
> info on openlayers here:
> http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#HowdoIcreatemyownsandboxintheSVNrepository
> It says that one can be granted access to the sandbox for a project by
> someone who is already authorized for that sandbox.
>
> I am asking this because I am working on netcdf improvements with a
> contributor (Patrick) and we share our code on Github, but it would be
> nice to be able to work in a sandbox in the osgeo svn.

Etienne,

Technically anyone in the gdal sandbox svn group can grant
membership in it, but it does not seem that we passed any
RFC or motion addressing how we want this handled.  Our
practice appears to be that the sandbox is primary a play area
for commiters rather than a work area for non-commiters.  The
only non-commiter in the sandbox is Chris Schmidt.

In the absence of a clear policy I'm willing to add Patrick
in the sandbox area as long as you can provide me his
OSGeo userid.  I'll also try to bring forward an RFC update
regularizing this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Wed Oct  5 19:08:11 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct  5 21:15:44 2011
Subject: [gdal-dev] how to save history of gdal commands in metadata?
Message-ID: <CA+TxYvPfugK=VzMsWihwKYAhcn_Y3fXX9qzDCbdLisbLRk-irg@mail.gmail.com>

Hi all,

I am adding support for the netcdf history attribute (which keeps
track of all commands done on an netcdf file), I am trying to see how
to include as much possible information as possible in the
NCDFCreateCopy() function.

Firstly, is there a way to access to the current command line which
generated a GDALCreateCopy()?  All I have access to is what is passed
to the NCDFCreateCopy() function, such as filename, input dataset,
driver options.

Secondly, would there be interest in introducing this sort of feature
into the GDAL framework?  I would see it as an optional string which
could be passed from the calling script to the Create() and
CreateCopy() methods, or perhaps a global variable which drivers would
be free to use or not.
As Geotiff supports metadata, it would be a nice addition to it.

Here is an example of netcdf history metadata:
As you can see there is not much information from the GDAL command yet.

{{{
		:history = "Wed Oct 05 19:59:26 2011: GDAL NCDFCreateCopy(
trmm-cp51.nc, ... )\n",
			"Wed Sep 07 22:33:59 2011: cdo sellonlatbox,-80,-70,-20,-10
tmp4-noc.nc tmp5.nc\n",
			"Wed Sep  7 22:33:53 2011: ncatted -a Conventions,global,d,,
tmp4.nc tmp4-noc.nc\n",
			"Wed Aug 24 12:59:04 2011: ncatted -D 10 -a
CoreMetadata.0,global,d,, -a ArchiveMetadata.0,global,d,, tmp3.nc
tmp4.nc\n",
			"Tue Aug 23 21:04:45 2011: cdo seltimestep,1 tmp2.nc tmp3.nc\n",
			"Tue Aug 23 19:19:18 2011: cdo selvar,pcp tmp1.nc tmp2.nc\n",
			"Tue May 17 19:34:24 2011: cdo
sellonlatbox,-85.25,-29.625,15.25,-50 3B43.2011.nc tmp1.nc\n",
			"Tue May 17 19:26:31 2011: cdo mergetime 3B43.110101.6A.nc
3B43.110201.6A.nc 3B43.110301.6A.nc 3B43.110401.6A.nc 3B43.2011.nc" ;
}}}

Regards,
Etienne
From matt.wilkie at gov.yk.ca  Wed Oct  5 19:43:00 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Oct  5 21:53:07 2011
Subject: [gdal-dev] how to save history of gdal commands in metadata?
In-Reply-To: <CA+TxYvPfugK=VzMsWihwKYAhcn_Y3fXX9qzDCbdLisbLRk-irg@mail.gmail.com>
References: <CA+TxYvPfugK=VzMsWihwKYAhcn_Y3fXX9qzDCbdLisbLRk-irg@mail.gmail.com>
Message-ID: <4E8CEB84.90803@gov.yk.ca>

Esri records (some) processing history in the metadata and at times I 
have found that to be *very* useful. I for one would welcome gdal/ogr 
doing the same.

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


On 05/10/2011 4:08 PM, Etienne Tourigny wrote:
> Hi all,
>
> I am adding support for the netcdf history attribute (which keeps
> track of all commands done on an netcdf file), I am trying to see how
> to include as much possible information as possible in the
> NCDFCreateCopy() function.
>
> Firstly, is there a way to access to the current command line which
> generated a GDALCreateCopy()?  All I have access to is what is passed
> to the NCDFCreateCopy() function, such as filename, input dataset,
> driver options.
>
> Secondly, would there be interest in introducing this sort of feature
> into the GDAL framework?  I would see it as an optional string which
> could be passed from the calling script to the Create() and
> CreateCopy() methods, or perhaps a global variable which drivers would
> be free to use or not.
> As Geotiff supports metadata, it would be a nice addition to it.
>
> Here is an example of netcdf history metadata:
> As you can see there is not much information from the GDAL command yet.
>
> {{{
> 		:history = "Wed Oct 05 19:59:26 2011: GDAL NCDFCreateCopy(
> trmm-cp51.nc, ... )\n",
> 			"Wed Sep 07 22:33:59 2011: cdo sellonlatbox,-80,-70,-20,-10
> tmp4-noc.nc tmp5.nc\n",
> 			"Wed Sep  7 22:33:53 2011: ncatted -a Conventions,global,d,,
> tmp4.nc tmp4-noc.nc\n",
> 			"Wed Aug 24 12:59:04 2011: ncatted -D 10 -a
> CoreMetadata.0,global,d,, -a ArchiveMetadata.0,global,d,, tmp3.nc
> tmp4.nc\n",
> 			"Tue Aug 23 21:04:45 2011: cdo seltimestep,1 tmp2.nc tmp3.nc\n",
> 			"Tue Aug 23 19:19:18 2011: cdo selvar,pcp tmp1.nc tmp2.nc\n",
> 			"Tue May 17 19:34:24 2011: cdo
> sellonlatbox,-85.25,-29.625,15.25,-50 3B43.2011.nc tmp1.nc\n",
> 			"Tue May 17 19:26:31 2011: cdo mergetime 3B43.110101.6A.nc
> 3B43.110201.6A.nc 3B43.110301.6A.nc 3B43.110401.6A.nc 3B43.2011.nc" ;
> }}}
>
> Regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> .
>
From antonio.valentino at tiscali.it  Thu Oct  6 02:50:38 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Oct  6 05:30:26 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
Message-ID: <20111006085038.075c4603@asigrid01>

Hi Frank, hi Etienne,

Il giorno Wed, 5 Oct 2011 13:55:01 -0700
Frank Warmerdam <warmerdam@pobox.com> ha scritto:

> On Wed, Oct 5, 2011 at 1:28 PM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
> > Hi all,
> >
> > I was wondering what is the policy regarding access to the svn
> > sandbox directories. ?Can osgeo id's which are not commiters to
> > gdal be granted access to a directory within the sandbox svn (or
> > just the sandbox directory in general)?
> >
> > I have not found any information on the gdal wiki, but there is some
> > info on openlayers here:
> > http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#HowdoIcreatemyownsandboxintheSVNrepository
> > It says that one can be granted access to the sandbox for a project
> > by someone who is already authorized for that sandbox.
> >
> > I am asking this because I am working on netcdf improvements with a
> > contributor (Patrick) and we share our code on Github, but it would
> > be nice to be able to work in a sandbox in the osgeo svn.
> 
> Etienne,
> 
> Technically anyone in the gdal sandbox svn group can grant
> membership in it, but it does not seem that we passed any
> RFC or motion addressing how we want this handled.  Our
> practice appears to be that the sandbox is primary a play area
> for commiters rather than a work area for non-commiters.  The
> only non-commiter in the sandbox is Chris Schmidt.
> 
> In the absence of a clear policy I'm willing to add Patrick
> in the sandbox area as long as you can provide me his
> OSGeo userid.  I'll also try to bring forward an RFC update
> regularizing this.
> 
> Best regards,

IMHO it would be a very interesting solution to use GitHub (or any
other hosting site for DVCS) for GDAL contributors.
I have a relatively short experience with GitHub but I found it very
handy, specially for tracking feature branches and merging (even large)
patches.
Also, there is the possibility to put comments directly on code.

I don't know if the topic of using a DVCS for GDAL has already been
discussed in the past and, probably, it is not convenient to move GDAL
itself on a DVCS.

Anyway I think that the possibility of maintaining an official mirror
of GDAL on a Git or Mercurial repository should be considered and
contributors should be encouraged to use it.

Here it is an unofficial mirror

https://github.com/mloskot/gdal

and a wiki page about the topic on the GDAL trac 

http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow


regards

-- 
Antonio Valentino
From hobu.inc at gmail.com  Thu Oct  6 12:04:07 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Oct  6 15:07:57 2011
Subject: [gdal-dev] CMake for GDAL
Message-ID: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>

All,

There has been a couple of efforts started to bring a CMake build configuration to GDAL, but they haven't taken off because of lack of momentum and project buy in. For those who don't know, CMake is a sort of meta-builder, kind of like an autotools that generates many project Makefile layouts. CMake can generate MSVC project files, MSVC Makefiles, XCode, Eclipse, GNU Makefile, etc. You have one CMake configuration that specifies the changeable bits, and CMake takes care of the rest to generate the project type that you desire. CMake can even stack project builds together, so the the CMake configuration of GDAL can use the CMake configuration of GeoTIFF.

GDAL currently has hand-rolled MSVC Makefiles, an combination hand-rolled libtool project (that we generally tell people not to use), and hand-rolled MSVC project files.  Adding another build system into our source tree is not going to add that much more complexity to what we already have, and I would like to propose that we integrate the CMake build for GDAL efforts that have been happening outside of the project inside our source tree.  If the effort takes off, maybe we can eliminate some of these hand-rolled efforts, but at this time, the CMake effort will just be supplementary to the existing build systems that already exist in GDAL.

I am willing to manage this effort, and I expect contribution from a couple of folks who have been itching for it. One of these key individuals is someone I met at #foss4g, Aashish Chaudhary, who is a software engineer at Kitware, the proprietors of CMake.  Aashish is a GDAL user, and a CMake configuration, with full detection capabilities for the myriad of external dependencies that GDAL can take advantage of would be a big, cross-platform build win for him. Aashish has volunteered to do the bulk of the integration work of the existing, external CMake configuration into the source tree, and having quick access to CMake developers who can answer any questions that might come up about GDAL's complex build layout will also be helpful.  Workflow-wise, I would like to give Aashish sandbox access so he can start working on the tree there, and then I'll take care of moving things into the main trunk as they mature.  Once things are integrated, it would make lots of sense to give Aashish proper commit access provided he looks like he'll be able to stick around and help maintain things -- although once everything is standing, the maintenance should be limited. 

tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.

Thanks,

Howard
From nezmar at tutok.sk  Thu Oct  6 12:43:27 2011
From: nezmar at tutok.sk (Marian Krivos)
Date: Thu Oct  6 15:55:00 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
Message-ID: <4E8DDAAF.9090903@tutok.sk>

Hi all,

I am working with CMake configuration as developer few years, can I help
as tester & contributor?


On 10/06/11 18:04, Howard Butler wrote:
> All,
>
> There has been a couple of efforts started to bring a CMake build configuration to GDAL, but they haven't taken off because of lack of momentum and project buy in. For those who don't know, CMake is a sort of meta-builder, kind of like an autotools that generates many project Makefile layouts. CMake can generate MSVC project files, MSVC Makefiles, XCode, Eclipse, GNU Makefile, etc. You have one CMake configuration that specifies the changeable bits, and CMake takes care of the rest to generate the project type that you desire. CMake can even stack project builds together, so the the CMake configuration of GDAL can use the CMake configuration of GeoTIFF.
>
> GDAL currently has hand-rolled MSVC Makefiles, an combination hand-rolled libtool project (that we generally tell people not to use), and hand-rolled MSVC project files.  Adding another build system into our source tree is not going to add that much more complexity to what we already have, and I would like to propose that we integrate the CMake build for GDAL efforts that have been happening outside of the project inside our source tree.  If the effort takes off, maybe we can eliminate some of these hand-rolled efforts, but at this time, the CMake effort will just be supplementary to the existing build systems that already exist in GDAL.
>
> I am willing to manage this effort, and I expect contribution from a couple of folks who have been itching for it. One of these key individuals is someone I met at #foss4g, Aashish Chaudhary, who is a software engineer at Kitware, the proprietors of CMake.  Aashish is a GDAL user, and a CMake configuration, with full detection capabilities for the myriad of external dependencies that GDAL can take advantage of would be a big, cross-platform build win for him. Aashish has volunteered to do the bulk of the integration work of the existing, external CMake configuration into the source tree, and having quick access to CMake developers who can answer any questions that might come up about GDAL's complex build layout will also be helpful.  Workflow-wise, I would like to give Aashish sandbox access so he can start working on the tree there, and then I'll take care of moving things into the main trunk as they mature.  Once things are integrated, it would make lots of sense to give Aashish proper commit access provided he looks like he'll be able to stick around and help maintain things -- although once everything is standing, the maintenance should be limited. 
>
> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.
>
> Thanks,
>
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Thu Oct  6 13:12:04 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 16:19:24 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
Message-ID: <4E8DE164.7030902@loskot.net>

On 06/10/11 17:04, Howard Butler wrote:
> CMake can even stack project builds together, so the the CMake
> configuration of GDAL can use the CMake configuration of GeoTIFF.

... and PROJ.4 soon :-)

> I am willing to manage this effort, and I expect contribution from a
> couple of folks who have been itching for it. One of these key
> individuals is someone I met at #foss4g, Aashish Chaudhary, who is a
> software engineer at Kitware, the proprietors of CMake.
 > [...]

This is a great news!

> Aashish has volunteered to do the bulk of the integration
> work of the existing, external CMake configuration into the source
> tree, and having quick access to CMake developers who can answer any
> questions that might come up about GDAL's complex build layout will
> also be helpful.

Sounds good indeed.

> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap
> incorporating CMake configuration into GDAL. We hope to have things
> done by the 1.9 release. This is your notice of that fact.

Are you going to write some notes, perhaps on GDAL Wiki, about basics
of the configuration design and structure?

I've been growing the idea of CMake configuration for long time with one 
attempt that eventually failed due to the reasons you've mentioned.
My idea was to have CMake core configuration that is written once
and fairly static in long term. Then, there are several macros which 
allow driver developers and maintainers to plug-in their drivers to the
CMake configuration with literally a few lines of CMake script.

Basically, the CMake configuration could be modular.

I have implemented this approach on smaller scale while configuring SOCI 
library. It is a database access library in C++ that consists of core + 
a set of backends (drivers):

http://bit.ly/reLrPE

The modularisation separates a few things:

1)- third-party dependencies lookup follows the well-known convention
   of cmake/modules/Find*.cmake

2) selection of what is needed is configured file-based in 
cmake/dependencies - e.g. if Boost.cmake exists, then Boost is a 
dependency. This scheme uses module from 1) to search for Boost components.

3) configuration of backend (driver) library is a single call of 
soci_backend() macro, see backends/sqlite3/CMakeLists.txt.
Corresponding test is configured in similar way
backends/sqlite3/test/CMakeLists.txt

This states a minimal configuration for CMake and assumes there are
no specialised options required for this particular driver.

4) If common denominator is not enough and there are neede
some public options specific to driver, then such options go to CMake 
configuration local for this driver, see
src/backends/postgresql/CMakeLists.txt

So, there is a framework that catches all common properties for the 
drivers. The rest is moduler. If any kind of customisation is needed,
it is defined locally for particular driver.
The master/root CMakeLists.txt is lean and thin as it should be.

I am not a master of CMake, so perhaps this approach is not the best 
possible, but it works fairly well. However, assuming Aashish and his 
team know CMake better, perhaps they could suggest if this is a good 
idea, if there is a better idea, so we can discuss pros and cons.

I'm interested in contributing and testing.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From warmerdam at pobox.com  Thu Oct  6 13:38:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct  6 16:49:37 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
Message-ID: <CA+YzLBcfKqUoz8DQ_fLGQuspEQwijBJkNgf7Uh9SsKBw47Kpsg@mail.gmail.com>

On Thu, Oct 6, 2011 at 9:04 AM, Howard Butler <hobu.inc@gmail.com> wrote:
> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.

Howard,

It is my perception that there should be an RFC to go with this
effort.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From woklist at kyngchaos.com  Thu Oct  6 13:46:35 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Oct  6 16:55:47 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
Message-ID: <B452F19A-97A7-4EA4-8CAC-889FEC7E1B5E@kyngchaos.com>

Same as for your PROJ cmake effort, I can help with the OS X framework rules for GDAL. (Note: framework build is a separate thing from generating Xcode project.)

On Oct 6, 2011, at 11:04 AM, Howard Butler wrote:

> All,
> 
> There has been a couple of efforts started to bring a CMake build configuration to GDAL, but they haven't taken off because of lack of momentum and project buy in. For those who don't know, CMake is a sort of meta-builder, kind of like an autotools that generates many project Makefile layouts. CMake can generate MSVC project files, MSVC Makefiles, XCode, Eclipse, GNU Makefile, etc. You have one CMake configuration that specifies the changeable bits, and CMake takes care of the rest to generate the project type that you desire. CMake can even stack project builds together, so the the CMake configuration of GDAL can use the CMake configuration of GeoTIFF.
> 
> GDAL currently has hand-rolled MSVC Makefiles, an combination hand-rolled libtool project (that we generally tell people not to use), and hand-rolled MSVC project files.  Adding another build system into our source tree is not going to add that much more complexity to what we already have, and I would like to propose that we integrate the CMake build for GDAL efforts that have been happening outside of the project inside our source tree.  If the effort takes off, maybe we can eliminate some of these hand-rolled efforts, but at this time, the CMake effort will just be supplementary to the existing build systems that already exist in GDAL.
> 
> I am willing to manage this effort, and I expect contribution from a couple of folks who have been itching for it. One of these key individuals is someone I met at #foss4g, Aashish Chaudhary, who is a software engineer at Kitware, the proprietors of CMake.  Aashish is a GDAL user, and a CMake configuration, with full detection capabilities for the myriad of external dependencies that GDAL can take advantage of would be a big, cross-platform build win for him. Aashish has volunteered to do the bulk of the integration work of the existing, external CMake configuration into the source tree, and having quick access to CMake developers who can answer any questions that might come up about GDAL's complex build layout will also be helpful.  Workflow-wise, I would like to give Aashish sandbox access so he can start working on the tree there, and then I'll take care of moving things into the main trunk as they mature.  Once things are integrated, it would make lots of sense to give Aashish proper commit access provided he looks like he'll be able to stick around and help maintain things -- although once everything is standing, the maintenance should be limited. 
> 
> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.
> 
> Thanks,
> 
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From warmerdam at pobox.com  Thu Oct  6 14:07:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct  6 17:18:12 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <20111006085038.075c4603@asigrid01>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
Message-ID: <CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>

On Wed, Oct 5, 2011 at 11:50 PM, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> Anyway I think that the possibility of maintaining an official mirror
> of GDAL on a Git or Mercurial repository should be considered and
> contributors should be encouraged to use it.
>
> Here it is an unofficial mirror
>
> https://github.com/mloskot/gdal
>
> and a wiki page about the topic on the GDAL trac
>
> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow

Antonio,

If it was to be made "official" it would need an RFC.  I'm
not sure what the benefit of making it official is.  I will
note that I am rabidly anti-git for GDAL but I will as always
bow to the will of the PSC and duely passed RFCs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mateusz at loskot.net  Thu Oct  6 14:16:46 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 17:27:47 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
Message-ID: <4E8DF08E.8040809@loskot.net>

On 06/10/11 19:07, Frank Warmerdam wrote:
> On Wed, Oct 5, 2011 at 11:50 PM, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
>> Anyway I think that the possibility of maintaining an official mirror
>> of GDAL on a Git or Mercurial repository should be considered and
>> contributors should be encouraged to use it.
>>
>> Here it is an unofficial mirror
>>
>> https://github.com/mloskot/gdal
>>
>> and a wiki page about the topic on the GDAL trac
>>
>> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow
> 
> Antonio,
> 
> If it was to be made "official" it would need an RFC.  I'm
> not sure what the benefit of making it official is.  I will
> note that I am rabidly anti-git for GDAL but I will as always
> bow to the will of the PSC and duely passed RFCs.

Frank / Antonio,

FYI, I keep the repo at https://github.com/mloskot/gdal up to
date daily. I'm assembling a server at home, so it will become
cronjob-managed soon.

I am not proposing git for GDAL.
However, I believe github could be very useful to host GDAL sandbox
which can be forked by anyone and without hassle of managing privs
in OSGeo SVN.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From DCarreira at edia.pt  Thu Oct  6 14:53:37 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu Oct  6 18:06:44 2011
Subject: [gdal-dev] ogrinfo and oracle sql expressions, maybe arcsde
Message-ID: <19FC4FDFEC50D844B20EB1EF42871FCC2BCAC74034@IE2RD2XVS421.red002.local>

Hi again.

I am trying to determine why I cannot get any sql queries to work against oracle and through arcsde driver.

It seems the sql sentence keeps adding single-quotes to both field and value, which is not valid.
For instance, a simple numeric clause:

Ogrinfo -so -ro -al -sql "SELECT * FROM 'USER.TABLE' WHERE FEATID=1234" "SDE:<connection string>"

Results in errors being reported in the client:
"(...)
      using driver `SDE' successful.

Layer name: GDBMAN.SREGA_PERIMETROS_REGA
Geometry: Unknown (any)
ERROR 1: SE_stream_fetch: -51/Underlying DBMS error
Feature Count: -1
OGR_SDE: Loading GDBMAN.SREGA_PERIMETROS_REGA layerinfo.
ERROR 1: SE_stream_fetch: -51/Underlying DBMS error
Layer SRS WKT:
(...)"

In ArcSDE logs I can see this sql query being reported:
WhereClause:   "('OBJECTID_1') = (21522)"

Which in turn raises an error in Oracle, since single-quotes are meant for values and not for field names. For field names oracle allows double-quotes. So it should really be: ("OBJECTID_2")=(21522).

Then I tried a string query. And that doesn't work either... I can't figure out how to build a sql where clause in ogr with a string field that works...

So, has anyone any successful experience with ogr -sql queries in Oracle or ArcSDE? Any tips? I'm not sure where the error happens, either in sde driver or ogr sql parser...

Thanks,
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111006/a4e10c43/attachment.html
From etourigny.dev at gmail.com  Thu Oct  6 15:26:38 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct  6 18:41:31 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8DF08E.8040809@loskot.net>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
Message-ID: <CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>

My main concern with using github is that the bridge between svn and
git may or may not be easy to learn.  I tried the procedure you
describe in the wiki and it was painfully slow on import.  I didn't
know that you kept it up to date, because last time I checked it was
out of date.

Is it possible as a commiter to use a single local git repository that
can be used for both the official svn (for commits) and also in github
(to interact with other contributors)?
>From your instructions it looks doable, but can you push and pull to
the github repos, and then commit changes back to gdal svn?

If that's easy then I would definitely use that approach instead of svn sandbox.

regards,
Etienne

On Thu, Oct 6, 2011 at 3:16 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> On 06/10/11 19:07, Frank Warmerdam wrote:
>> On Wed, Oct 5, 2011 at 11:50 PM, Antonio Valentino
>> <antonio.valentino@tiscali.it> wrote:
>>> Anyway I think that the possibility of maintaining an official mirror
>>> of GDAL on a Git or Mercurial repository should be considered and
>>> contributors should be encouraged to use it.
>>>
>>> Here it is an unofficial mirror
>>>
>>> https://github.com/mloskot/gdal
>>>
>>> and a wiki page about the topic on the GDAL trac
>>>
>>> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow
>>
>> Antonio,
>>
>> If it was to be made "official" it would need an RFC. ?I'm
>> not sure what the benefit of making it official is. ?I will
>> note that I am rabidly anti-git for GDAL but I will as always
>> bow to the will of the PSC and duely passed RFCs.
>
> Frank / Antonio,
>
> FYI, I keep the repo at https://github.com/mloskot/gdal up to
> date daily. I'm assembling a server at home, so it will become
> cronjob-managed soon.
>
> I am not proposing git for GDAL.
> However, I believe github could be very useful to host GDAL sandbox
> which can be forked by anyone and without hassle of managing privs
> in OSGeo SVN.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From hobu.inc at gmail.com  Thu Oct  6 15:36:27 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Oct  6 18:52:02 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CA+YzLBcfKqUoz8DQ_fLGQuspEQwijBJkNgf7Uh9SsKBw47Kpsg@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+YzLBcfKqUoz8DQ_fLGQuspEQwijBJkNgf7Uh9SsKBw47Kpsg@mail.gmail.com>
Message-ID: <632B6F1C-5E73-49C5-9D1A-4D0C0EF7A7D0@gmail.com>


On Oct 6, 2011, at 12:38 PM, Frank Warmerdam wrote:

> On Thu, Oct 6, 2011 at 9:04 AM, Howard Butler <hobu.inc@gmail.com> wrote:
>> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.
> 
> Howard,
> 
> It is my perception that there should be an RFC to go with this
> effort.

It is not our intent that the CMake configuration would be the primary or only configuration system within the GDAL project, and we would not put forward a proposal to make it such until it was clear that most people were using it in favor of the alternatives.  We will cook up a wiki page describing our planned implementation and details with how to use CMake to build GDAL once things are in place.

If it still seems as if we need an RFC at that point, I will put one together.

Howard
From etourigny.dev at gmail.com  Thu Oct  6 15:38:03 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct  6 18:53:39 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
Message-ID: <CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>

It sounds great indeed!

In particular I am interested in improving detection of netcdf library
and its various incarnations and support libs (v3, v4, HDF4, HDF5,
zlib, szip), which would make things much easier for our improvements
to the netcdf driver.

I'd definitely like to help on that aspect of the cmake script,
although I don't have experience in building cmake configuration
scripts.

regards,
Etienne

On Thu, Oct 6, 2011 at 1:04 PM, Howard Butler <hobu.inc@gmail.com> wrote:
> All,
>
> There has been a couple of efforts started to bring a CMake build configuration to GDAL, but they haven't taken off because of lack of momentum and project buy in. For those who don't know, CMake is a sort of meta-builder, kind of like an autotools that generates many project Makefile layouts. CMake can generate MSVC project files, MSVC Makefiles, XCode, Eclipse, GNU Makefile, etc. You have one CMake configuration that specifies the changeable bits, and CMake takes care of the rest to generate the project type that you desire. CMake can even stack project builds together, so the the CMake configuration of GDAL can use the CMake configuration of GeoTIFF.
>
> GDAL currently has hand-rolled MSVC Makefiles, an combination hand-rolled libtool project (that we generally tell people not to use), and hand-rolled MSVC project files. ?Adding another build system into our source tree is not going to add that much more complexity to what we already have, and I would like to propose that we integrate the CMake build for GDAL efforts that have been happening outside of the project inside our source tree. ?If the effort takes off, maybe we can eliminate some of these hand-rolled efforts, but at this time, the CMake effort will just be supplementary to the existing build systems that already exist in GDAL.
>
> I am willing to manage this effort, and I expect contribution from a couple of folks who have been itching for it. One of these key individuals is someone I met at #foss4g, Aashish Chaudhary, who is a software engineer at Kitware, the proprietors of CMake. ?Aashish is a GDAL user, and a CMake configuration, with full detection capabilities for the myriad of external dependencies that GDAL can take advantage of would be a big, cross-platform build win for him. Aashish has volunteered to do the bulk of the integration work of the existing, external CMake configuration into the source tree, and having quick access to CMake developers who can answer any questions that might come up about GDAL's complex build layout will also be helpful. ?Workflow-wise, I would like to give Aashish sandbox access so he can start working on the tree there, and then I'll take care of moving things into the main trunk as they mature. ?Once things are integrated, it would make lots of sense to give Aashish proper commit access provided he looks like he'll be able to stick around and help maintain things -- although once everything is standing, the maintenance should be limited.
>
> tl;dr summary. Aashish Chaudhary and myself are going to bootstrap incorporating CMake configuration into GDAL. We hope to have things done by the 1.9 release. This is your notice of that fact.
>
> Thanks,
>
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Thu Oct  6 15:38:18 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 18:54:08 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
Message-ID: <4E8E03AA.2090206@loskot.net>

On 06/10/11 20:26, Etienne Tourigny wrote:
> My main concern with using github is that the bridge between svn and
> git may or may not be easy to learn.  I tried the procedure you
> describe in the wiki and it was painfully slow on import.

Yes, the initial synchronisation takes 4-5 hours.

> I didn't know that you kept it up to date, because last time I checked it was
> out of date.

There was a break due to my own system issues.

> Is it possible as a commiter to use a single local git repository that
> can be used for both the official svn (for commits) and also in github
> (to interact with other contributors)?
> From your instructions it looks doable, but can you push and pull to
> the github repos, and then commit changes back to gdal svn?

It is possible to have stream data in both directions, from and to svn,
so to push changes back from git and svn. However, I don't do that.
AFAIK, the process is fragile.

The GDAL at github is a simple mirror I synchronise with SVN,
but I don't synchronise it back, from Git to SVN.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Thu Oct  6 15:56:54 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 19:13:33 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
Message-ID: <4E8E0806.9090600@loskot.net>

On 06/10/11 20:45, Etienne Tourigny wrote:
> On Thu, Oct 6, 2011 at 4:38 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>> On 06/10/11 20:26, Etienne Tourigny wrote:
>>>
>>> Is it possible as a commiter to use a single local git repository that
>>> can be used for both the official svn (for commits) and also in github
>>> (to interact with other contributors)?
>>> From your instructions it looks doable, but can you push and pull to
>>> the github repos, and then commit changes back to gdal svn?
>>
>> It is possible to have stream data in both directions, from and to svn,
>> so to push changes back from git and svn. However, I don't do that.
>> AFAIK, the process is fragile.
> 
> Mat, your instructions seem to indicate that it is possible.  How
> fragile is it, and do you know any source of documentation I can look
> into for that?

I don't know how fragile it is as I haven't worked according to this
workflow. I only copied what I have learned from reading various
resources. However, I call it fragile, because to use git svn safely in
workflow that synchronises projects in both ways, in-depth understanding
of SVN and Git is necessary, IMHO. Especially understanding of Git
because Git is such a powerful tool that it is possible to do things in
many ways.
Otherwise, it is easy to break things.

Here are the two resources I can recommend:

http://learn.github.com/p/git-svn.html

http://progit.org/book/ch8-1.html

If you look at the last sections of both, it is "Rules and Guidelines"
and "Git-Svn Summary", you will notice quite a number of "health and
safety" rules included in those fairly short paragraphs.
This tells me, it is easy to blow things up.

Best regards,

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Thu Oct  6 16:01:25 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct  6 19:18:14 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E0806.9090600@loskot.net>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
Message-ID: <CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>

Thanks for the information.  It seems that using git-svn is more
suited for working locally, and then commiting back to the svn repos,
or as an easy way to stay in-sync with the main repos (like you do).

For now, I will stick to straight svn (or straight git) because I
don't know enough about git and don't want to break things!

thanks, Etienne

On Thu, Oct 6, 2011 at 4:56 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> On 06/10/11 20:45, Etienne Tourigny wrote:
>> On Thu, Oct 6, 2011 at 4:38 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>>> On 06/10/11 20:26, Etienne Tourigny wrote:
>>>>
>>>> Is it possible as a commiter to use a single local git repository that
>>>> can be used for both the official svn (for commits) and also in github
>>>> (to interact with other contributors)?
>>>> From your instructions it looks doable, but can you push and pull to
>>>> the github repos, and then commit changes back to gdal svn?
>>>
>>> It is possible to have stream data in both directions, from and to svn,
>>> so to push changes back from git and svn. However, I don't do that.
>>> AFAIK, the process is fragile.
>>
>> Mat, your instructions seem to indicate that it is possible. ?How
>> fragile is it, and do you know any source of documentation I can look
>> into for that?
>
> I don't know how fragile it is as I haven't worked according to this
> workflow. I only copied what I have learned from reading various
> resources. However, I call it fragile, because to use git svn safely in
> workflow that synchronises projects in both ways, in-depth understanding
> of SVN and Git is necessary, IMHO. Especially understanding of Git
> because Git is such a powerful tool that it is possible to do things in
> many ways.
> Otherwise, it is easy to break things.
>
> Here are the two resources I can recommend:
>
> http://learn.github.com/p/git-svn.html
>
> http://progit.org/book/ch8-1.html
>
> If you look at the last sections of both, it is "Rules and Guidelines"
> and "Git-Svn Summary", you will notice quite a number of "health and
> safety" rules included in those fairly short paragraphs.
> This tells me, it is easy to blow things up.
>
> Best regards,
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>
From antonio.valentino at tiscali.it  Thu Oct  6 16:12:35 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Oct  6 19:35:46 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
Message-ID: <4E8E0BB3.6030705@tiscali.it>

Hi Frank,

Il 06/10/2011 20:07, Frank Warmerdam ha scritto:
> On Wed, Oct 5, 2011 at 11:50 PM, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
>> Anyway I think that the possibility of maintaining an official mirror
>> of GDAL on a Git or Mercurial repository should be considered and
>> contributors should be encouraged to use it.
>>
>> Here it is an unofficial mirror
>>
>> https://github.com/mloskot/gdal
>>
>> and a wiki page about the topic on the GDAL trac
>>
>> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow
> 
> Antonio,
> 
> If it was to be made "official" it would need an RFC.  I'm
> not sure what the benefit of making it official is.  I will
> note that I am rabidly anti-git for GDAL but I will as always
> bow to the will of the PSC and duely passed RFCs.
> 
> Best regards,

The main purpose is not to replace the current VCS but, rather, to make
life easier to potential contributors (that do not have commit access).

Of course, contributors that are not familiar with DVCS can always
submit patches via trac as usual.

Advantages of having an *official* mirror, apart to encourage
contributors to use it, are basically related to the possibility to use
the osgeo infrastructure for synchronization (I'm thinking to a simple
cron job or s commit hook).


regards

-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Thu Oct  6 16:52:39 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Oct  6 20:12:11 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
Message-ID: <4E8E1517.4050507@tiscali.it>

Hi Etienne,

Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
> Thanks for the information.  It seems that using git-svn is more
> suited for working locally, and then commiting back to the svn repos,
> or as an easy way to stay in-sync with the main repos (like you do).
> 

IMHO the trick is using a separate branch for developing new features in
order to be able to use git freely.

When the job is done one should just rebase (locally) on the branch in
sync with svn and use git-svn to push hanges back into svn.

The weak point in the workflow is the initial cloning of the svn repo.

> For now, I will stick to straight svn (or straight git) because I
> don't know enough about git and don't want to break things!
> 
> thanks, Etienne


-- 
Antonio Valentino
From mateusz at loskot.net  Thu Oct  6 17:03:48 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 20:24:01 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E1517.4050507@tiscali.it>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
Message-ID: <4E8E17B4.90701@loskot.net>

On 06/10/11 21:52, Antonio Valentino wrote:
> Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
>> Thanks for the information.  It seems that using git-svn is more
>> suited for working locally, and then commiting back to the svn repos,
>> or as an easy way to stay in-sync with the main repos (like you do).
>>
> 
> IMHO the trick is using a separate branch for developing new features in
> order to be able to use git freely.
> 
> When the job is done one should just rebase (locally) on the branch in
> sync with svn and use git-svn to push hanges back into svn.
> 
> The weak point in the workflow is the initial cloning of the svn repo.

Indeed, because every developer aiming in the git svn workflow
has to do this initial step on his own. AFAIK, there is no way to
centralise it.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Thu Oct  6 17:12:40 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct  6 20:33:21 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E1517.4050507@tiscali.it>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
Message-ID: <CA+TxYvNN_56=Av_BhtyTz8rsFEZ2qcYSu7xjHquJBOTv_TyxQw@mail.gmail.com>

On Thu, Oct 6, 2011 at 5:52 PM, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> Hi Etienne,
>
> Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
>> Thanks for the information. ?It seems that using git-svn is more
>> suited for working locally, and then commiting back to the svn repos,
>> or as an easy way to stay in-sync with the main repos (like you do).
>>
>
> IMHO the trick is using a separate branch for developing new features in
> order to be able to use git freely.
>
> When the job is done one should just rebase (locally) on the branch in
> sync with svn and use git-svn to push hanges back into svn.
>

GOTCHA! That sounds quite reasonable.

> The weak point in the workflow is the initial cloning of the svn repo.
>

I guess if you were to clone the repo from a recent revision (not  the
whole changeset), you would speed things up considerably.  Is there a
way to do that?


>> For now, I will stick to straight svn (or straight git) because I
>> don't know enough about git and don't want to break things!
>>
>> thanks, Etienne
>
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Thu Oct  6 17:19:32 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Oct  6 20:40:36 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvNN_56=Av_BhtyTz8rsFEZ2qcYSu7xjHquJBOTv_TyxQw@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>	<4E8E1517.4050507@tiscali.it>
	<CA+TxYvNN_56=Av_BhtyTz8rsFEZ2qcYSu7xjHquJBOTv_TyxQw@mail.gmail.com>
Message-ID: <4E8E1B64.9050502@loskot.net>

On 06/10/11 22:12, Etienne Tourigny wrote:
> On Thu, Oct 6, 2011 at 5:52 PM, Antonio Valentino
>> The weak point in the workflow is the initial cloning of the svn repo.
>>
> 
> I guess if you were to clone the repo from a recent revision (not  the
> whole changeset), you would speed things up considerably.  Is there a
> way to do that?

Yes, you can try this:

git svn --authors-file=gdal-git-authors.txt fetch -r 23192


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From antonio.valentino at tiscali.it  Thu Oct  6 17:27:15 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Oct  6 20:48:53 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E17B4.90701@loskot.net>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it> <4E8E17B4.90701@loskot.net>
Message-ID: <4E8E1D33.60409@tiscali.it>

Hi Mateusz,

Il 06/10/2011 23:03, Mateusz Loskot ha scritto:
> On 06/10/11 21:52, Antonio Valentino wrote:
>> Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
>>> Thanks for the information.  It seems that using git-svn is more
>>> suited for working locally, and then commiting back to the svn repos,
>>> or as an easy way to stay in-sync with the main repos (like you do).
>>>
>>
>> IMHO the trick is using a separate branch for developing new features in
>> order to be able to use git freely.
>>
>> When the job is done one should just rebase (locally) on the branch in
>> sync with svn and use git-svn to push hanges back into svn.
>>
>> The weak point in the workflow is the initial cloning of the svn repo.
> 
> Indeed, because every developer aiming in the git svn workflow
> has to do this initial step on his own. AFAIK, there is no way to
> centralise it.
> 
> Best regards,

I'm wondering if there is some way to use a svn dump for the initial
setup of the git repo.
The svn dump could be downloaded (in compressed form) via FTP in a way
that is by far faster than the initial git svn fetch

Another option is to make available a pre-loaded git repo in compressed
form.
Developers that want to use git should download and uncompress the
pre-loaded repo and re-sync using git-svn for getting last svn commits.


-- 
Antonio Valentino
From matt.feemster at ga-asi.com  Thu Oct  6 18:05:33 2011
From: matt.feemster at ga-asi.com (matt.feemster)
Date: Thu Oct  6 21:29:17 2011
Subject: [gdal-dev] Help with setting GCPs in a GeoTiff
Message-ID: <1317938733154-6867532.post@n2.nabble.com>

Long time GDAL user here, but first time poster.

I have an image in an internal format that I want to save out as a GeoTiff.
>From all of the examples I've seen, they say to use a transformation matrix.
However, we cannot do that with our images because they are not exactly
square. When using a transformation matrix, they come out skewed.

What we ideally need to do, is simply save the corner coordinates of the
original image in the GeoTiff (similar to how a NITF is done). We already
know what they are in our original format, but I cannot figure out how to
properly assign them using GDAL.

I have tried setting the GCPs with no luck, so I feel like I am missing
something.

So my question involves three steps:

1) Is it possible to store only corner coordinates as a way of telling
GDAL/GeoTiff what the geo information is for a GeoTiff? Again,
transformations will not work here.

2) If it is possible, how to go about it?

3) When assigning the GCPs, what exactly do the 'x' and 'y' members of the
GDAL_GCP structure mean? Per the documentation: X position of GCP in
georeferenced space. Are x and y a lat/lon pair? ECEF x/y? UTM
easting/northing? What exactly should I be assigning these values.


Assume WGS84 for everything.

Any help would greatly be appreciated. I've burned two solid days on this
task and am out of ideas.

Thanks.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Help-with-setting-GCPs-in-a-GeoTiff-tp6867532p6867532.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Oct  6 23:55:58 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct  7 03:39:21 2011
Subject: [gdal-dev] Help with setting GCPs in a GeoTiff
In-Reply-To: <1317938733154-6867532.post@n2.nabble.com>
References: <1317938733154-6867532.post@n2.nabble.com>
Message-ID: <CAMKgpObMF-FdCi=BEoPSqgr3mares-56826QQX5izAKtOBeC6Q@mail.gmail.com>

Matt,

Affine transform and GCPs are the two methods used to set the georeference
of a raster. These two are practically exclusive of each other. You cannot
use Affine transform because your images they are not exactly rectangular.
Your only option is setting GCPs.

Since you are using WGS84, the X and Y values indicate the longitude and
latitude of the pixel's position.

Please go through the GDAL Data Model page[1] so that you don't miss any
other details.

[1]: http://www.gdal.org/gdal_datamodel.html

On Fri, Oct 7, 2011 at 3:35 AM, matt.feemster <matt.feemster@ga-asi.com>wrote:

> Long time GDAL user here, but first time poster.
>
> I have an image in an internal format that I want to save out as a GeoTiff.
> >From all of the examples I've seen, they say to use a transformation
> matrix.
> However, we cannot do that with our images because they are not exactly
> square. When using a transformation matrix, they come out skewed.
>
> What we ideally need to do, is simply save the corner coordinates of the
> original image in the GeoTiff (similar to how a NITF is done). We already
> know what they are in our original format, but I cannot figure out how to
> properly assign them using GDAL.
>
> I have tried setting the GCPs with no luck, so I feel like I am missing
> something.
>
> So my question involves three steps:
>
> 1) Is it possible to store only corner coordinates as a way of telling
> GDAL/GeoTiff what the geo information is for a GeoTiff? Again,
> transformations will not work here.
>
> 2) If it is possible, how to go about it?
>
> 3) When assigning the GCPs, what exactly do the 'x' and 'y' members of the
> GDAL_GCP structure mean? Per the documentation: X position of GCP in
> georeferenced space. Are x and y a lat/lon pair? ECEF x/y? UTM
> easting/northing? What exactly should I be assigning these values.
>
>
> Assume WGS84 for everything.
>
> Any help would greatly be appreciated. I've burned two solid days on this
> task and am out of ideas.
>
> Thanks.
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Help-with-setting-GCPs-in-a-GeoTiff-tp6867532p6867532.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111007/c70d2e18/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Fri Oct  7 00:27:05 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Oct  7 04:12:17 2011
Subject: [gdal-dev] Re: Help with setting GCPs in a GeoTiff
References: <1317938733154-6867532.post@n2.nabble.com>
Message-ID: <loom.20111007T061050-941@post.gmane.org>

matt.feemster <matt.feemster <at> ga-asi.com> writes:


> So my question involves three steps:
> 
> 1) Is it possible to store only corner coordinates as a way of telling
> GDAL/GeoTiff what the geo information is for a GeoTiff? Again,
> transformations will not work here.
Yes

> 2) If it is possible, how to go about it?

For example for a 10000x10000 pixel image
gdal_translate source.tif output.tif -gcp 0 0
285113.632 6713217.584 -gcp 10000 0 284658.101
6703227.690 -gcp 0 10000 295103.322 6712761.873 -gcp
10000 10000 294647.828 6702772.378

Note that the anchor point of GDAL gcp is the top-left corner of the pixel and
counting X and Y starts from zero. Therefore in this example X and Y values
10000 are used even that means binding gcp to a pixel that is just outside the
image. If you have measured control points from the centers of pixels you may
need to calculate also half a pixel shifts here and there.
 
> 3) When assigning the GCPs, what exactly do the 'x' and 'y' members of the
> GDAL_GCP structure mean? Per the documentation: X position of GCP in
> georeferenced space. Are x and y a lat/lon pair? ECEF x/y? UTM
> easting/northing? What exactly should I be assigning these values.

X is easting or longitude, Y is northing or latitude.

-Jukka Rahkonen-



From etourigny.dev at gmail.com  Fri Oct  7 10:17:34 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Oct  7 14:35:19 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E1517.4050507@tiscali.it>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
Message-ID: <CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>

On Thu, Oct 6, 2011 at 5:52 PM, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> Hi Etienne,
>
> Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
>> Thanks for the information. ?It seems that using git-svn is more
>> suited for working locally, and then commiting back to the svn repos,
>> or as an easy way to stay in-sync with the main repos (like you do).
>>
>
> IMHO the trick is using a separate branch for developing new features in
> order to be able to use git freely.


Is there a way to create a git repo from a subdirectory of the svn?
I'm not sure such a thing is possible, because the git stuff is at the
root of the source tree

I really just need the frmts/netcdf directory, which is the best
option (and which is possible)?

1) get a clone of just that directory using git svn ; create a branch;
push to a new git repos
2) get a clone of the full source tree using git svn ; create a branch
; push the subdirectory to a new git repos

regards,
Etienne

>
> When the job is done one should just rebase (locally) on the branch in
> sync with svn and use git-svn to push hanges back into svn.
>
> The weak point in the workflow is the initial cloning of the svn repo.
>
>> For now, I will stick to straight svn (or straight git) because I
>> don't know enough about git and don't want to break things!
>>
>> thanks, Etienne
>
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From traviskirstine at gmail.com  Fri Oct  7 10:29:10 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Oct  7 14:54:04 2011
Subject: [gdal-dev] elgis build of GDAL - compressed overview fails
Message-ID: <CALtm4h2Qwqd_FzS70R7Q+TB-rU+9A04Nd52_mGLYJrdLNs=6Pg@mail.gmail.com>

I have been using the elgis 5 repository with include build of GDAL
1.8 and have problems creating overviews with jpeg compression

gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
ORTH176250488302011FBS.tif 2 4 8
0...10...20...30...40...50...60...70...80...90...100 - done.
0gdaladdo: tif_jpeg.c:691: JPEGPreDecode: Assertion
`sp->cinfo.comm.is_decompressor' failed.
Aborted

I believe that this is related to use of external libtiff / libgeotiff
rather than internal as described in ticket 3139
http://trac.osgeo.org/gdal/ticket/3139


Regards
From matt.feemster at ga-asi.com  Fri Oct  7 10:44:05 2011
From: matt.feemster at ga-asi.com (matt.feemster)
Date: Fri Oct  7 15:03:08 2011
Subject: [gdal-dev] Re: Help with setting GCPs in a GeoTiff
In-Reply-To: <CAMKgpObMF-FdCi=BEoPSqgr3mares-56826QQX5izAKtOBeC6Q@mail.gmail.com>
References: <1317938733154-6867532.post@n2.nabble.com>
	<CAMKgpObMF-FdCi=BEoPSqgr3mares-56826QQX5izAKtOBeC6Q@mail.gmail.com>
Message-ID: <1317998645699-6869597.post@n2.nabble.com>

Thanks for the help guys. I've managed to figure it out in code.

A quick note though, wouldn't X correspond to lon (increase/decrease
horizontally) and Y correspond to lat (increase/decrease vertically)?

And shouldn't the far pixel count be the extent minus one since it's zero
indexed?

Here is an example of the way I am setting up the upper right corner in
code.

gcpList[1].dfGCPPixel = width - 1;
gcpList[1].dfGCPLine = 0;
gcpList[1].dfGCPX = ur.lng;
gcpList[1].dfGCPY = ur.lat;
gcpList[1].dfGCPZ = ur.hae;

Let me know if this is correct?

Regarding this:

http://www.gdal.org/gdal_datamodel.html

More concrete information and examples there on GCPs would be helpful.

Thanks.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Help-with-setting-GCPs-in-a-GeoTiff-tp6867532p6869597.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jzl5325 at psu.edu  Fri Oct  7 11:42:52 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Fri Oct  7 16:05:16 2011
Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans attachment
In-Reply-To: <CA+bfmPvF1mcFi6-y53cKD46Mqw8vaD3xEfMDeERShYERcsbybg@mail.gmail.com>
References: <CA+bfmPvF1mcFi6-y53cKD46Mqw8vaD3xEfMDeERShYERcsbybg@mail.gmail.com>
Message-ID: <CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>

Sent with an example attachment, which is awaiting approval.  Here is the
mail without attachement.


I have 8 large Gtiffs which I am trying to mosaic.  Tiffs were created from
.IMG files downloaded from PDS.  I converted to tif using:

        gdal_translate -of GTiff -scale -co "TILED=YES" -co "COMPRESS=JPEG"
<input>

The format conversion is working without a problem.  Gdalinfo is reporting
the correct NDV and projection information.  Viewing each tif also returns
the expected raster iamge.  So far, so good.


I then use:

        gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt


Six of the eight tiles are added to the mosaic correctly.  Varying the order
in the list, or using *.tif does not change the output.  It is always the
same two images which are missing.  Watching the verbose output, it looks
like the images are mosaicing correctly.  What would cause these images to
be merged as totally black tiles?


Thanks for any insight,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111007/85567e6a/attachment.html
From antonio.valentino at tiscali.it  Fri Oct  7 11:49:07 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Fri Oct  7 16:11:57 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
	<CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>
Message-ID: <20111007174907.5b4b6fd1@asigrid01>

Hi Etienne,

Il giorno Fri, 7 Oct 2011 11:17:34 -0300
Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:

> On Thu, Oct 6, 2011 at 5:52 PM, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
> > Hi Etienne,
> >
> > Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
> >> Thanks for the information. ?It seems that using git-svn is more
> >> suited for working locally, and then commiting back to the svn
> >> repos, or as an easy way to stay in-sync with the main repos (like
> >> you do).
> >>
> >
> > IMHO the trick is using a separate branch for developing new
> > features in order to be able to use git freely.
> 
> 
> Is there a way to create a git repo from a subdirectory of the svn?

Yes:

$ git svn clone https://svn.osgeo.org/gdal/trunk/gdal/frmts/netcdf


> I'm not sure such a thing is possible, because the git stuff is at the
> root of the source tree
> 
> I really just need the frmts/netcdf directory, which is the best
> option (and which is possible)?
> 
> 1) get a clone of just that directory using git svn ; create a branch;
> push to a new git repos
> 2) get a clone of the full source tree using git svn ; create a branch
> ; push the subdirectory to a new git repos
> 
> regards,
> Etienne

I'm not sure to understand what do you want.
If you clone the entire repo and then you create a branch, the new
branch will include the complete source tree (I suppose).


regards

-- 
Antonio Valentino
From etourigny.dev at gmail.com  Fri Oct  7 11:52:16 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Oct  7 16:15:16 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <20111007174907.5b4b6fd1@asigrid01>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
	<CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>
	<20111007174907.5b4b6fd1@asigrid01>
Message-ID: <CA+TxYvOdWUdL=p9SCLW-Zi_18tNDVTgZfgRpUo5Vf_mxjAkonA@mail.gmail.com>

On Fri, Oct 7, 2011 at 12:49 PM, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> Hi Etienne,
>
> Il giorno Fri, 7 Oct 2011 11:17:34 -0300
> Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:
>
>> On Thu, Oct 6, 2011 at 5:52 PM, Antonio Valentino
>> <antonio.valentino@tiscali.it> wrote:
>> > Hi Etienne,
>> >
>> > Il 06/10/2011 22:01, Etienne Tourigny ha scritto:
>> >> Thanks for the information. ?It seems that using git-svn is more
>> >> suited for working locally, and then commiting back to the svn
>> >> repos, or as an easy way to stay in-sync with the main repos (like
>> >> you do).
>> >>
>> >
>> > IMHO the trick is using a separate branch for developing new
>> > features in order to be able to use git freely.
>>
>>
>> Is there a way to create a git repo from a subdirectory of the svn?
>
> Yes:
>
> $ git svn clone https://svn.osgeo.org/gdal/trunk/gdal/frmts/netcdf
>

Thanks! that's what I thought

>
>> I'm not sure such a thing is possible, because the git stuff is at the
>> root of the source tree
>>
>> I really just need the frmts/netcdf directory, which is the best
>> option (and which is possible)?
>>
>> 1) get a clone of just that directory using git svn ; create a branch;
>> push to a new git repos
>> 2) get a clone of the full source tree using git svn ; create a branch
>> ; push the subdirectory to a new git repos
>>
>> regards,
>> Etienne
>
> I'm not sure to understand what do you want.
> If you clone the entire repo and then you create a branch, the new
> branch will include the complete source tree (I suppose).
>


What I meant was, can I clone the entire repo, but only create a git
repo with just the subdirectory?

This way I can have the entire source tree within my git-svn setup,
but I don't have to copy the entire source when I create a new repo on
git, and any new branches I would create.


>
> regards
>
> --
> Antonio Valentino
>
From traviskirstine at gmail.com  Fri Oct  7 11:56:27 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Oct  7 16:19:39 2011
Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans attachment
In-Reply-To: <CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
References: <CA+bfmPvF1mcFi6-y53cKD46Mqw8vaD3xEfMDeERShYERcsbybg@mail.gmail.com>
	<CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
Message-ID: <CALtm4h1LewPXWZZdeQ_vK2Kmaka30MeZtw0mXbKrOYUse=bvjg@mail.gmail.com>

Dose gdalwarp work

gdalwarp -of GTiff *.tif wacmos.tif

Regards

On 7 October 2011 11:42, Jay L. <jzl5325@psu.edu> wrote:
> Sent with an example attachment, which is awaiting approval. ?Here is the
> mail without attachement.
>
> I have 8 large Gtiffs which I am trying to mosaic. ?Tiffs were created from
> .IMG files downloaded from PDS. ?I converted to tif using:
> ? ? ? ? gdal_translate -of GTiff -scale -co "TILED=YES" -co "COMPRESS=JPEG"
> <input>
> The format conversion is working without a problem. ?Gdalinfo is reporting
> the correct NDV and projection information. ?Viewing each tif also returns
> the expected raster iamge. ?So far, so good.
>
> I then use:
> ? ? ? ? gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt
>
> Six of the eight tiles are added to the mosaic correctly. ?Varying the order
> in the list, or using *.tif does not change the output. ?It is always the
> same two images which are missing. ?Watching the verbose output, it looks
> like the images are mosaicing correctly. ?What would cause these images to
> be merged as totally black tiles?
>
> Thanks for any insight,
> Jay
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From antonio.valentino at tiscali.it  Fri Oct  7 12:14:41 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Fri Oct  7 16:38:55 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvOdWUdL=p9SCLW-Zi_18tNDVTgZfgRpUo5Vf_mxjAkonA@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
	<CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>
	<20111007174907.5b4b6fd1@asigrid01>
	<CA+TxYvOdWUdL=p9SCLW-Zi_18tNDVTgZfgRpUo5Vf_mxjAkonA@mail.gmail.com>
Message-ID: <20111007181441.3379c88a@asigrid01>

Hi Etienne,

Il giorno Fri, 7 Oct 2011 12:52:16 -0300
Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:

> On Fri, Oct 7, 2011 at 12:49 PM, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
> > Hi Etienne,
> >
> > Il giorno Fri, 7 Oct 2011 11:17:34 -0300
> > Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:

[CUT]

> >> Is there a way to create a git repo from a subdirectory of the svn?
> >
> > Yes:
> >
> > $ git svn clone https://svn.osgeo.org/gdal/trunk/gdal/frmts/netcdf
> >
> 
> Thanks! that's what I thought
> 
> >
> >> I'm not sure such a thing is possible, because the git stuff is at
> >> the root of the source tree
> >>
> >> I really just need the frmts/netcdf directory, which is the best
> >> option (and which is possible)?
> >>
> >> 1) get a clone of just that directory using git svn ; create a
> >> branch; push to a new git repos
> >> 2) get a clone of the full source tree using git svn ; create a
> >> branch ; push the subdirectory to a new git repos
> >>
> >> regards,
> >> Etienne
> >
> > I'm not sure to understand what do you want.
> > If you clone the entire repo and then you create a branch, the new
> > branch will include the complete source tree (I suppose).
> >
> 
> 
> What I meant was, can I clone the entire repo, but only create a git
> repo with just the subdirectory?

Of course you can if you start the repo from scratch (no clone).
But in this case you would loose the ability to synchronize repos.
I guess this is not what you want.


> This way I can have the entire source tree within my git-svn setup,
> but I don't have to copy the entire source when I create a new repo on
> git, and any new branches I would create.

Well, branching is very very very space and time efficient in DVCS.
Only differences between branches are recorded.

If you have a clone of the entire repo IMHO you have no need to create
a new repo for a sub-tree.

Just 
* branch
* edit
* commit
* switch between branches using git checkout
* ...


regards

-- 
Antonio Valentino
From jgr007 at gmail.com  Fri Oct  7 12:25:19 2011
From: jgr007 at gmail.com (Jeff Ruby)
Date: Fri Oct  7 16:50:12 2011
Subject: [gdal-dev] Re: gdal_merge.py - Missing images
Message-ID: <CAKBfbXHFURwG_Q1+v1D5Mcab=yATvL0O+Bv-Bf46nh7VDukwDg@mail.gmail.com>

You might try building a vrt file first and then converting that.

gdalbuildvrt merge.vrt *.tif

 -or just merge the original IMGs-

gdalbuildvrt merge.vrt *.img

-then-

gdal_translate <your options> merge.vrt output.tif


> Message: 4
> Date: Fri, 7 Oct 2011 11:42:52 -0400
> From: "Jay L." <jzl5325@psu.edu>
> Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans
> ? ? ? ?attachment
> To: gdal-dev@lists.osgeo.org
> Message-ID:
> ? ? ? ?<CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Sent with an example attachment, which is awaiting approval. ?Here is the
> mail without attachement.
>
>
> I have 8 large Gtiffs which I am trying to mosaic. ?Tiffs were created from
> .IMG files downloaded from PDS. ?I converted to tif using:
>
> ? ? ? ?gdal_translate -of GTiff -scale -co "TILED=YES" -co "COMPRESS=JPEG"
> <input>
>
> The format conversion is working without a problem. ?Gdalinfo is reporting
> the correct NDV and projection information. ?Viewing each tif also returns
> the expected raster iamge. ?So far, so good.
>
>
> I then use:
>
> ? ? ? ?gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt
>
>
> Six of the eight tiles are added to the mosaic correctly. ?Varying the order
> in the list, or using *.tif does not change the output. ?It is always the
> same two images which are missing. ?Watching the verbose output, it looks
> like the images are mosaicing correctly. ?What would cause these images to
> be merged as totally black tiles?
>
>
> Thanks for any insight,
> Jay
From jzl5325 at psu.edu  Fri Oct  7 12:27:04 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Fri Oct  7 16:51:58 2011
Subject: [gdal-dev] Re: gdal_merge.py - Missing images
In-Reply-To: <CAKBfbXHFURwG_Q1+v1D5Mcab=yATvL0O+Bv-Bf46nh7VDukwDg@mail.gmail.com>
References: <CAKBfbXHFURwG_Q1+v1D5Mcab=yATvL0O+Bv-Bf46nh7VDukwDg@mail.gmail.com>
Message-ID: <CA+bfmPvNr0o8VGrUs6wZ8V3yWebVM4BF0w4zvLen-d3A0hPfww@mail.gmail.com>

GIving gdalwarp a try now and slapping my forehead for not thinking to try a
.vrt.  Thanks for the nudge Jeff.

On Fri, Oct 7, 2011 at 12:25 PM, Jeff Ruby <jgr007@gmail.com> wrote:

> You might try building a vrt file first and then converting that.
>
> gdalbuildvrt merge.vrt *.tif
>
>  -or just merge the original IMGs-
>
> gdalbuildvrt merge.vrt *.img
>
> -then-
>
> gdal_translate <your options> merge.vrt output.tif
>
>
> > Message: 4
> > Date: Fri, 7 Oct 2011 11:42:52 -0400
> > From: "Jay L." <jzl5325@psu.edu>
> > Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans
> >        attachment
> > To: gdal-dev@lists.osgeo.org
> > Message-ID:
> >        <
> CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
> > Content-Type: text/plain; charset="iso-8859-1"
> >
> > Sent with an example attachment, which is awaiting approval.  Here is the
> > mail without attachement.
> >
> >
> > I have 8 large Gtiffs which I am trying to mosaic.  Tiffs were created
> from
> > .IMG files downloaded from PDS.  I converted to tif using:
> >
> >        gdal_translate -of GTiff -scale -co "TILED=YES" -co
> "COMPRESS=JPEG"
> > <input>
> >
> > The format conversion is working without a problem.  Gdalinfo is
> reporting
> > the correct NDV and projection information.  Viewing each tif also
> returns
> > the expected raster iamge.  So far, so good.
> >
> >
> > I then use:
> >
> >        gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt
> >
> >
> > Six of the eight tiles are added to the mosaic correctly.  Varying the
> order
> > in the list, or using *.tif does not change the output.  It is always the
> > same two images which are missing.  Watching the verbose output, it looks
> > like the images are mosaicing correctly.  What would cause these images
> to
> > be merged as totally black tiles?
> >
> >
> > Thanks for any insight,
> > Jay
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111007/0610dfbd/attachment.html
From even.rouault at mines-paris.org  Fri Oct  7 13:42:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct  7 18:11:22 2011
Subject: [gdal-dev] elgis build of GDAL - compressed overview fails
In-Reply-To: <CALtm4h2Qwqd_FzS70R7Q+TB-rU+9A04Nd52_mGLYJrdLNs=6Pg@mail.gmail.com>
References: <CALtm4h2Qwqd_FzS70R7Q+TB-rU+9A04Nd52_mGLYJrdLNs=6Pg@mail.gmail.com>
Message-ID: <201110071942.05470.even.rouault@mines-paris.org>

Le vendredi 07 octobre 2011 16:29:10, Travis Kirstine a ?crit :
> I have been using the elgis 5 repository with include build of GDAL
> 1.8 and have problems creating overviews with jpeg compression
> 
> gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> ORTH176250488302011FBS.tif 2 4 8
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 0gdaladdo: tif_jpeg.c:691: JPEGPreDecode: Assertion
> `sp->cinfo.comm.is_decompressor' failed.
> Aborted
> 
> I believe that this is related to use of external libtiff / libgeotiff
> rather than internal as described in ticket 3139
> http://trac.osgeo.org/gdal/ticket/3139

Yes, I suppose elgis 5 ships with an ancient (ahem, I meant "stable" ;-)) 
libtiff version, presumably libtiff 3.8.2-with-lot-of-security-patches. It is 
known that those old versions have caveats with advanced features like adding 
multiple overview levels with JPEG compression.

No guarantee this will work, but you could try to generate one overview level 
at a time :
gdaladdo all-the-above-options ORTH176250488302011FBS.tif 2
gdaladdo all-the-above-options ORTH176250488302011FBS.tif 4
gdaladdo all-the-above-options ORTH176250488302011FBS.tif 8

This could perhaps avoid the bug, but again no guarantee.

> 
> 
> Regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From aashishcy at gmail.com  Fri Oct  7 14:14:21 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Fri Oct  7 18:45:11 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
Message-ID: <CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>

Hi All,

First of all, many thanks to Howard for introducing me. I have been using
GDAL for long time and used it successfully in various projects

No need to say that CMake has been adopted by various open source and
commercial projects. CMake itself is open source with a very flexible
licensing and is very active project (just this week 2.8.6 has been
released) (http://www.vtk.org/Wiki/CMake_Projects)

I personally felt that GDAL can be benefited by using CMake. Once done, It
 will make it easier to add new modules to GDAL and save bunch of time
writing custom build files for various platforms. Also if desired, can be
coupled with CTEST and CDASH for testing.

It is good to see that people are supporting the idea. To know more about
CMake please visit http://cmake.org/cmake/project/about.html. Please feel
free to contact us if you have any questions / concerns.

Thanks,
Aashish


On Thu, Oct 6, 2011 at 3:38 PM, Etienne Tourigny <etourigny.dev@gmail.com>wrote:

> It sounds great indeed!
>
> In particular I am interested in improving detection of netcdf library
> and its various incarnations and support libs (v3, v4, HDF4, HDF5,
> zlib, szip), which would make things much easier for our improvements
> to the netcdf driver.
>
> I'd definitely like to help on that aspect of the cmake script,
> although I don't have experience in building cmake configuration
> scripts.
>
> regards,
> Etienne
>
> On Thu, Oct 6, 2011 at 1:04 PM, Howard Butler <hobu.inc@gmail.com> wrote:
> > All,
> >
> > There has been a couple of efforts started to bring a CMake build
> configuration to GDAL, but they haven't taken off because of lack of
> momentum and project buy in. For those who don't know, CMake is a sort of
> meta-builder, kind of like an autotools that generates many project Makefile
> layouts. CMake can generate MSVC project files, MSVC Makefiles, XCode,
> Eclipse, GNU Makefile, etc. You have one CMake configuration that specifies
> the changeable bits, and CMake takes care of the rest to generate the
> project type that you desire. CMake can even stack project builds together,
> so the the CMake configuration of GDAL can use the CMake configuration of
> GeoTIFF.
> >
> > GDAL currently has hand-rolled MSVC Makefiles, an combination hand-rolled
> libtool project (that we generally tell people not to use), and hand-rolled
> MSVC project files.  Adding another build system into our source tree is not
> going to add that much more complexity to what we already have, and I would
> like to propose that we integrate the CMake build for GDAL efforts that have
> been happening outside of the project inside our source tree.  If the effort
> takes off, maybe we can eliminate some of these hand-rolled efforts, but at
> this time, the CMake effort will just be supplementary to the existing build
> systems that already exist in GDAL.
> >
> > I am willing to manage this effort, and I expect contribution from a
> couple of folks who have been itching for it. One of these key individuals
> is someone I met at #foss4g, Aashish Chaudhary, who is a software engineer
> at Kitware, the proprietors of CMake.  Aashish is a GDAL user, and a CMake
> configuration, with full detection capabilities for the myriad of external
> dependencies that GDAL can take advantage of would be a big, cross-platform
> build win for him. Aashish has volunteered to do the bulk of the integration
> work of the existing, external CMake configuration into the source tree, and
> having quick access to CMake developers who can answer any questions that
> might come up about GDAL's complex build layout will also be helpful.
>  Workflow-wise, I would like to give Aashish sandbox access so he can start
> working on the tree there, and then I'll take care of moving things into the
> main trunk as they mature.  Once things are integrated, it would make lots
> of sense to give Aashish proper commit access provided he looks like he'll
> be able to stick around and help maintain things -- although once everything
> is standing, the maintenance should be limited.
> >
> > tl;dr summary. Aashish Chaudhary and myself are going to bootstrap
> incorporating CMake configuration into GDAL. We hope to have things done by
> the 1.9 release. This is your notice of that fact.
> >
> > Thanks,
> >
> > Howard_______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111007/0e02049a/attachment.html
From mateusz at loskot.net  Fri Oct  7 16:36:55 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Oct  7 21:16:07 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8E1D33.60409@tiscali.it>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it> <4E8E17B4.90701@loskot.net>
	<4E8E1D33.60409@tiscali.it>
Message-ID: <4E8F62E7.30702@loskot.net>

On 06/10/11 22:27, Antonio Valentino wrote:
> Il 06/10/2011 23:03, Mateusz Loskot ha scritto:
>> On 06/10/11 21:52, Antonio Valentino wrote:
>>>
>>> The weak point in the workflow is the initial cloning of the svn repo.
>>
>> Indeed, because every developer aiming in the git svn workflow
>> has to do this initial step on his own. AFAIK, there is no way to
>> centralise it.
> 
> I'm wondering if there is some way to use a svn dump for the initial
> setup of the git repo.
> The svn dump could be downloaded (in compressed form) via FTP in a way
> that is by far faster than the initial git svn fetch

I have no idea if it is possible.

> Another option is to make available a pre-loaded git repo in compressed
> form.
> Developers that want to use git should download and uncompress the
> pre-loaded repo and re-sync using git-svn for getting last svn commits.

It should be possible.

Here is package of GDAL repo I maintain using "git svn" to
synchronise the Git mirror of GDAL at GitHub:

http://mateusz.loskot.net/tmp/gdal/mloskot-github-gdal-20111007.7z

You should be able to download, unpack, fetch update since the creation
of the package and use it.

Note, the repo is created/managed on Windows, so it's configured
to use CRLF. If you download/use it on Unix, you will have to do:

$ git config core.autocrlf true

otherwise, Git will report all files as changed, thus  "needs update".

Summary

unpack mloskot-github-gdal-20111007.7z
$ cd mloskot-github-gdal-20111007
$ git config core.autocrlf true
$ git svn --authors-file=../gdal-git-authors.txt rebase

At this point, the Git repo is up to date with the upstream in SVN trunk.

Now, you may want to push it to your remote Git repo at GitHub
So, either do:

git push [protocol]://[login]@github.com/mloskot/gdal.git

or add aliased remote [1]:

git remote add [alias] [protocol]://[login]@github.com/denisarnaud/soci.git

where [alias] is short name of your Git remote,
[protocol] is either git or https and [login] is your account at GitHub.
Now, you can push your mirror of GDAL trunk to remote Git repo:

$ git push [alias]

Note, in the mloskot-github-gdal-20111007.7z file I left my update.bat
script. This is the script I use to quickly pull changes from GDAL SVN
trunk and push it to Git at github. Obviously, don't use this script
trying to push to my repo.

[1] http://gitref.org/remotes/

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org

From mateusz at loskot.net  Fri Oct  7 16:44:59 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Oct  7 21:24:35 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
	<CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
Message-ID: <4E8F64CB.2010207@loskot.net>

On 07/10/11 19:14, Jayesh Chaudhary wrote:
> It is good to see that people are supporting the idea. To know more
> about CMake please visit http://cmake.org/cmake/project/about.html.
> Please feel free to contact us if you have any questions / concerns. 

Would it be possible to learn more about your plan of the attack?
What's your roadmap, roughly?

Are you going to discuss technicalities publicly (e.g. here) like design
of the CMake configuration or you will cook everything at Kitware and
then share the result?
Is there any room for contribution?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Fri Oct  7 17:05:39 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Oct  7 21:46:20 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <20111007181441.3379c88a@asigrid01>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>
	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>
	<20111006085038.075c4603@asigrid01>
	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>
	<4E8DF08E.8040809@loskot.net>
	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>
	<4E8E03AA.2090206@loskot.net>
	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>
	<4E8E0806.9090600@loskot.net>
	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it>
	<CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>
	<20111007174907.5b4b6fd1@asigrid01>
	<CA+TxYvOdWUdL=p9SCLW-Zi_18tNDVTgZfgRpUo5Vf_mxjAkonA@mail.gmail.com>
	<20111007181441.3379c88a@asigrid01>
Message-ID: <CA+TxYvN_maRCJGUbE8UEZTxkLKx2PXy=CaacHKS8f8L5qT33gQ@mail.gmail.com>

Just like to update on my recent findings on how you can setup an
environment to be able to commit to the svn repo, and also keep a
separate dev enviroment on github (to work with others)

Mateusz, it would be nice to include your latest instructions on the
wiki page, do you want me to add this stuff as well?


1) Get the entire repo from svn (or use Mateusz's compressed file to
save lots of time)

git svn init --trunk https://svn.osgeo.org/gdal/trunk
git svn --authors-file=/home/src/gdal/git/gdal/gdal-git-authors.txt fetch

2) If needed rebase, and push the entire repo to github (this can take
some time)

git svn --authors-file=/home/src/gdal/git/gdal/gdal-git-authors.txt rebase
git push --all git@github.com:etiennesky/gdal-netcdf

3) Make as many branches as you like and commit them to the git repo
(really fast)

git branch gdal-netcdf-autotest
git checkout gdal-netcdf-autotest
git push git@github.com:etiennesky/gdal-netcdf gdal-netcdf-autotest

4) Commit any changes to the git repo

git commit -m "blabla" .
git push  git@github.com:etiennesky/gdal-netcdf

5) Merge the changes you want into master, and commit to svn (if applicable)

$git checkout master
$git merge gdal-netcdf-autotest
$git svn dcommit -n
Committing to https://svn.osgeo.org/gdal/trunk ...
diff-tree 7edfc78415537dcd98bc141a2c52decadc34647e~1
7edfc78415537dcd98bc141a2c52decadc34647e
diff-tree 1f156cf3e0f055a9d31df422abe7f7c3b2f85348~1
1f156cf3e0f055a9d31df422abe7f7c3b2f85348
$git diff 7edfc78415537dcd98bc141a2c52decadc34647e~1
7edfc78415537dcd98bc141a2c52decadc34647e
... diff output...
$git svn dcommit


Voila!  At least it worked for me...

thanks to Mat and Antonio for their input
Etienne

On Fri, Oct 7, 2011 at 1:14 PM, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> Hi Etienne,
>
> Il giorno Fri, 7 Oct 2011 12:52:16 -0300
> Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:
>
>> On Fri, Oct 7, 2011 at 12:49 PM, Antonio Valentino
>> <antonio.valentino@tiscali.it> wrote:
>> > Hi Etienne,
>> >
>> > Il giorno Fri, 7 Oct 2011 11:17:34 -0300
>> > Etienne Tourigny <etourigny.dev@gmail.com> ha scritto:
>
> [CUT]
>
>> >> Is there a way to create a git repo from a subdirectory of the svn?
>> >
>> > Yes:
>> >
>> > $ git svn clone https://svn.osgeo.org/gdal/trunk/gdal/frmts/netcdf
>> >
>>
>> Thanks! that's what I thought
>>
>> >
>> >> I'm not sure such a thing is possible, because the git stuff is at
>> >> the root of the source tree
>> >>
>> >> I really just need the frmts/netcdf directory, which is the best
>> >> option (and which is possible)?
>> >>
>> >> 1) get a clone of just that directory using git svn ; create a
>> >> branch; push to a new git repos
>> >> 2) get a clone of the full source tree using git svn ; create a
>> >> branch ; push the subdirectory to a new git repos
>> >>
>> >> regards,
>> >> Etienne
>> >
>> > I'm not sure to understand what do you want.
>> > If you clone the entire repo and then you create a branch, the new
>> > branch will include the complete source tree (I suppose).
>> >
>>
>>
>> What I meant was, can I clone the entire repo, but only create a git
>> repo with just the subdirectory?
>
> Of course you can if you start the repo from scratch (no clone).
> But in this case you would loose the ability to synchronize repos.
> I guess this is not what you want.
>
>
>> This way I can have the entire source tree within my git-svn setup,
>> but I don't have to copy the entire source when I create a new repo on
>> git, and any new branches I would create.
>
> Well, branching is very very very space and time efficient in DVCS.
> Only differences between branches are recorded.
>
> If you have a clone of the entire repo IMHO you have no need to create
> a new repo for a sub-tree.
>
> Just
> * branch
> * edit
> * commit
> * switch between branches using git checkout
> * ...
>
>
> regards
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Fri Oct  7 17:29:07 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Oct  7 22:11:27 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <CA+TxYvN_maRCJGUbE8UEZTxkLKx2PXy=CaacHKS8f8L5qT33gQ@mail.gmail.com>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>	<4E8E1517.4050507@tiscali.it>	<CA+TxYvMMsy4wCOZaijsse-WUq-LhkwCVgxZECOC0=o6KxJC02Q@mail.gmail.com>	<20111007174907.5b4b6fd1@asigrid01>	<CA+TxYvOdWUdL=p9SCLW-Zi_18tNDVTgZfgRpUo5Vf_mxjAkonA@mail.gmail.com>	<20111007181441.3379c88a@asigrid01>
	<CA+TxYvN_maRCJGUbE8UEZTxkLKx2PXy=CaacHKS8f8L5qT33gQ@mail.gmail.com>
Message-ID: <4E8F6F23.2050807@loskot.net>

On 07/10/11 22:05, Etienne Tourigny wrote:
> Mateusz, it would be nice to include your latest instructions on the
> wiki page, do you want me to add this stuff as well?

Etienne, yes, it would be helpful if you could edit the page.
Feel free to either extend the current sections or create new section
with the workflow summary. It's a Wiki :-)

> 1) Get the entire repo from svn (or use Mateusz's compressed file to
> save lots of time)
> 
> git svn init --trunk https://svn.osgeo.org/gdal/trunk
> git svn --authors-file=/home/src/gdal/git/gdal/gdal-git-authors.txt fetch
> 
> 2) If needed rebase, and push the entire repo to github (this can take
> some time)
> 
> git svn --authors-file=/home/src/gdal/git/gdal/gdal-git-authors.txt rebase

rebase is needed to pull recent changes from the SVN trunk upstream.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From chaitanya.ch at gmail.com  Fri Oct  7 18:59:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct  7 23:46:06 2011
Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans attachment
In-Reply-To: <CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
References: <CA+bfmPvF1mcFi6-y53cKD46Mqw8vaD3xEfMDeERShYERcsbybg@mail.gmail.com>
	<CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
Message-ID: <CAMKgpOYPAFujgRVLrFS-vZGkqonwpmbye6eREeXuM3kvGfJQYA@mail.gmail.com>

Jay,

The gdal_merge script needs the images to match in the coordinate system and
the number of bands.

One likely problem is could be different data types. Provide the gdalinfo
outputs of the images.

Before you try that, use the gdalbuildvrt program to create a vrt file and
then gdal_translate to convert the vrt file into a single image. The result
is usually the same.

On Fri, Oct 7, 2011 at 9:12 PM, Jay L. <jzl5325@psu.edu> wrote:

> Sent with an example attachment, which is awaiting approval.  Here is the
> mail without attachement.
>
>
>  I have 8 large Gtiffs which I am trying to mosaic.  Tiffs were created
> from .IMG files downloaded from PDS.  I converted to tif using:
>
>         gdal_translate -of GTiff -scale -co "TILED=YES" -co "COMPRESS=JPEG"
> <input>
>
> The format conversion is working without a problem.  Gdalinfo is reporting
> the correct NDV and projection information.  Viewing each tif also returns
> the expected raster iamge.  So far, so good.
>
>
> I then use:
>
>         gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt
>
>
> Six of the eight tiles are added to the mosaic correctly.  Varying the
> order in the list, or using *.tif does not change the output.  It is always
> the same two images which are missing.  Watching the verbose output, it
> looks like the images are mosaicing correctly.  What would cause these
> images to be merged as totally black tiles?
>
>
> Thanks for any insight,
> Jay
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111008/9d129cf7/attachment.html
From etourigny.dev at gmail.com  Fri Oct  7 19:36:04 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Oct  8 00:24:40 2011
Subject: [gdal-dev] help for comparing two WKT
Message-ID: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>

Hi all,

I would appreciate any hints as to how I can compare 2
WKT/OGRSpatialReference objects.

My goal is to make sure that a more detailed WKT (with authority codes
and explicit datum) corresponds (numerically) to a simpler one, such
as in the following examples.

I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
PARAMETER nodes are in the same order? Does FixupOrdering() solve that
problem?

Furthermore, How could I compare the datums?




CF=[PROJCS["unnamed",
    GEOGCS["unknown",
        DATUM["unknown",
            SPHEROID["Spheroid",6378137,298.2572221010002]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",-18],
    PARAMETER["standard_parallel_2",-36],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",134],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]]

GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
    GEOGCS["GDA94",
        DATUM["Geocentric_Datum_of_Australia_1994",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6283"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4283"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",-18],
    PARAMETER["standard_parallel_2",-36],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",134],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3112"]]]



Another option is exporting to PROJ.4 strings, but there are the
+towgs84 that shows up , plus some differences in +datum vs. +ellps.

e.g.

CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
 or
CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
+ellps=GRS80 +units=m +no_defs ]
GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
+y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]



many thanks,
Etienne
From warmerdam at pobox.com  Fri Oct  7 20:49:40 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Oct  8 01:42:20 2011
Subject: [gdal-dev] help for comparing two WKT
In-Reply-To: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
Message-ID: <CA+YzLBe7k3uUT_ZH=4GJfRt+-QemShvv+nUL_MpZzvPbYrffXQ@mail.gmail.com>

Etienne,

You should in theory just use OGRSpatialReference::IsSame() method to
see if two coordinate systems are essentially equivelent, but it is not
really all that perfect.

Best regards,


On Fri, Oct 7, 2011 at 4:36 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Hi all,
>
> I would appreciate any hints as to how I can compare 2
> WKT/OGRSpatialReference objects.
>
> My goal is to make sure that a more detailed WKT (with authority codes
> and explicit datum) corresponds (numerically) to a simpler one, such
> as in the following examples.
>
> I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
> AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
> PARAMETER nodes are in the same order? Does FixupOrdering() solve that
> problem?
>
> Furthermore, How could I compare the datums?
>
>
>
>
> CF=[PROJCS["unnamed",
> ? ?GEOGCS["unknown",
> ? ? ? ?DATUM["unknown",
> ? ? ? ? ? ?SPHEROID["Spheroid",6378137,298.2572221010002]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",-18],
> ? ?PARAMETER["standard_parallel_2",-36],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",134],
> ? ?PARAMETER["false_easting",0],
> ? ?PARAMETER["false_northing",0]]]
>
> GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
> ? ?GEOGCS["GDA94",
> ? ? ? ?DATUM["Geocentric_Datum_of_Australia_1994",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ? ? ?AUTHORITY["EPSG","6283"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4283"]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",-18],
> ? ?PARAMETER["standard_parallel_2",-36],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",134],
> ? ?PARAMETER["false_easting",0],
> ? ?PARAMETER["false_northing",0],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AUTHORITY["EPSG","3112"]]]
>
>
>
> Another option is exporting to PROJ.4 strings, but there are the
> +towgs84 that shows up , plus some differences in +datum vs. +ellps.
>
> e.g.
>
> CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
> GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
> ?or
> CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
> +ellps=GRS80 +units=m +no_defs ]
> GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
> +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]
>
>
>
> many thanks,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Sat Oct  8 00:39:30 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Oct  8 05:45:08 2011
Subject: [gdal-dev] help for comparing two WKT
In-Reply-To: <CA+YzLBe7k3uUT_ZH=4GJfRt+-QemShvv+nUL_MpZzvPbYrffXQ@mail.gmail.com>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
	<CA+YzLBe7k3uUT_ZH=4GJfRt+-QemShvv+nUL_MpZzvPbYrffXQ@mail.gmail.com>
Message-ID: <CA+TxYvPGcfHaq+k=fHL2NMt4yRdixQbWwehzZHc3KcoWQhiTQQ@mail.gmail.com>

Thanks Frank,

I think I found a bug in OGRSpatialReference::IsSameGeogCS(), which is
called by IsSame().  The code looks for identical "DATUM" values, but
doesn't check for DATUM="unknown".
In my test, even thought the spheroid values are identical the test fails.

Filed a bug report and one-liner fix http://trac.osgeo.org/gdal/ticket/4281

I'm not confident in commiting myself before confirmation that it's ok.

    if( pszThisValue != NULL && pszOtherValue != NULL
+        && !EQUAL(pszThisValue,"unknown") && !EQUAL(pszOtherValue,"unknown")
        && !EQUAL(pszThisValue,pszOtherValue) )
        return FALSE;

regards, Etienne
On Fri, Oct 7, 2011 at 9:49 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Etienne,
>
> You should in theory just use OGRSpatialReference::IsSame() method to
> see if two coordinate systems are essentially equivelent, but it is not
> really all that perfect.
>
> Best regards,
>
>
> On Fri, Oct 7, 2011 at 4:36 PM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> Hi all,
>>
>> I would appreciate any hints as to how I can compare 2
>> WKT/OGRSpatialReference objects.
>>
>> My goal is to make sure that a more detailed WKT (with authority codes
>> and explicit datum) corresponds (numerically) to a simpler one, such
>> as in the following examples.
>>
>> I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
>> AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
>> PARAMETER nodes are in the same order? Does FixupOrdering() solve that
>> problem?
>>
>> Furthermore, How could I compare the datums?
>>
>>
>>
>>
>> CF=[PROJCS["unnamed",
>> ? ?GEOGCS["unknown",
>> ? ? ? ?DATUM["unknown",
>> ? ? ? ? ? ?SPHEROID["Spheroid",6378137,298.2572221010002]],
>> ? ? ? ?PRIMEM["Greenwich",0],
>> ? ? ? ?UNIT["degree",0.0174532925199433]],
>> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>> ? ?PARAMETER["standard_parallel_1",-18],
>> ? ?PARAMETER["standard_parallel_2",-36],
>> ? ?PARAMETER["latitude_of_origin",0],
>> ? ?PARAMETER["central_meridian",134],
>> ? ?PARAMETER["false_easting",0],
>> ? ?PARAMETER["false_northing",0]]]
>>
>> GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
>> ? ?GEOGCS["GDA94",
>> ? ? ? ?DATUM["Geocentric_Datum_of_Australia_1994",
>> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
>> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
>> ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
>> ? ? ? ? ? ?AUTHORITY["EPSG","6283"]],
>> ? ? ? ?PRIMEM["Greenwich",0],
>> ? ? ? ?UNIT["degree",0.0174532925199433],
>> ? ? ? ?AUTHORITY["EPSG","4283"]],
>> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>> ? ?PARAMETER["standard_parallel_1",-18],
>> ? ?PARAMETER["standard_parallel_2",-36],
>> ? ?PARAMETER["latitude_of_origin",0],
>> ? ?PARAMETER["central_meridian",134],
>> ? ?PARAMETER["false_easting",0],
>> ? ?PARAMETER["false_northing",0],
>> ? ?UNIT["metre",1,
>> ? ? ? ?AUTHORITY["EPSG","9001"]],
>> ? ?AUTHORITY["EPSG","3112"]]]
>>
>>
>>
>> Another option is exporting to PROJ.4 strings, but there are the
>> +towgs84 that shows up , plus some differences in +datum vs. +ellps.
>>
>> e.g.
>>
>> CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
>> GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
>> ?or
>> CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
>> +ellps=GRS80 +units=m +no_defs ]
>> GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
>> +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]
>>
>>
>>
>> many thanks,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
>
From etourigny.dev at gmail.com  Sat Oct  8 01:05:31 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Oct  8 06:12:39 2011
Subject: [gdal-dev] Re: help for comparing two WKT
In-Reply-To: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
Message-ID: <CA+TxYvOi3dKt1JYDF2ercSCkGjbVERqB_-5QyanOozkuhq5yHw@mail.gmail.com>

A related question:

given an unnamed datum with defined spheroid, PRIMEM and UNIT values,
is there a way to find a corresponding named datum or EPSG code?

I'd be interested in an existing method, or perhaps externalng code or
table in which I could search for common candidate DATUM definitions,
and compare using OGRSpatialReference::IsSameGeogCS() .

e.g

    DATUM["unknown",
        SPHEROID["Spheroid",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]

corresponds to

EPSG: 4326
or
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]

also:

 ? ? ? ?DATUM["unknown",
 ? ? ? ? ? ?SPHEROID["Spheroid",6378137,298.2572221010002]],
 ? ? ? ?PRIMEM["Greenwich",0],
 ? ? ? ?UNIT["degree",0.0174532925199433]],

corresponds to
EPSG:4283
or
 ? ? ? ?DATUM["Geocentric_Datum_of_Australia_1994",
 ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
 ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
 ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
 ? ? ? ? ? ?AUTHORITY["EPSG","6283"]],
 ? ? ? ?PRIMEM["Greenwich",0],
 ? ? ? ?UNIT["degree",0.0174532925199433],
 ? ? ? ?AUTHORITY["EPSG","4283"]],


many thanks
Etienne

On Fri, Oct 7, 2011 at 8:36 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Hi all,
>
> I would appreciate any hints as to how I can compare 2
> WKT/OGRSpatialReference objects.
>
> My goal is to make sure that a more detailed WKT (with authority codes
> and explicit datum) corresponds (numerically) to a simpler one, such
> as in the following examples.
>
> I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
> AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
> PARAMETER nodes are in the same order? Does FixupOrdering() solve that
> problem?
>
> Furthermore, How could I compare the datums?
>
>
>
>
> CF=[PROJCS["unnamed",
> ? ?GEOGCS["unknown",
> ? ? ? ?DATUM["unknown",
> ? ? ? ? ? ?SPHEROID["Spheroid",6378137,298.2572221010002]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",-18],
> ? ?PARAMETER["standard_parallel_2",-36],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",134],
> ? ?PARAMETER["false_easting",0],
> ? ?PARAMETER["false_northing",0]]]
>
> GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
> ? ?GEOGCS["GDA94",
> ? ? ? ?DATUM["Geocentric_Datum_of_Australia_1994",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ? ? ?AUTHORITY["EPSG","6283"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4283"]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",-18],
> ? ?PARAMETER["standard_parallel_2",-36],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",134],
> ? ?PARAMETER["false_easting",0],
> ? ?PARAMETER["false_northing",0],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AUTHORITY["EPSG","3112"]]]
>
>
>
> Another option is exporting to PROJ.4 strings, but there are the
> +towgs84 that shows up , plus some differences in +datum vs. +ellps.
>
> e.g.
>
> CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
> GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
> ?or
> CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
> +ellps=GRS80 +units=m +no_defs ]
> GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
> +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]
>
>
>
> many thanks,
> Etienne
>
From antonio.valentino at tiscali.it  Sat Oct  8 05:14:17 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Oct  8 10:35:19 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E8F62E7.30702@loskot.net>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it> <4E8E17B4.90701@loskot.net>
	<4E8E1D33.60409@tiscali.it> <4E8F62E7.30702@loskot.net>
Message-ID: <4E901469.1000108@tiscali.it>

Hi Mateusz,

Il 07/10/2011 22:36, Mateusz Loskot ha scritto:
> On 06/10/11 22:27, Antonio Valentino wrote:
>> Il 06/10/2011 23:03, Mateusz Loskot ha scritto:
>>> On 06/10/11 21:52, Antonio Valentino wrote:
>>>>
>>>> The weak point in the workflow is the initial cloning of the svn repo.
>>>
>>> Indeed, because every developer aiming in the git svn workflow
>>> has to do this initial step on his own. AFAIK, there is no way to
>>> centralise it.
>>
>> I'm wondering if there is some way to use a svn dump for the initial
>> setup of the git repo.
>> The svn dump could be downloaded (in compressed form) via FTP in a way
>> that is by far faster than the initial git svn fetch
> 
> I have no idea if it is possible.
> 

Mmh, after a quick test it seems to be not possible.

>> Another option is to make available a pre-loaded git repo in compressed
>> form.
>> Developers that want to use git should download and uncompress the
>> pre-loaded repo and re-sync using git-svn for getting last svn commits.
> 
> It should be possible.
> 
> Here is package of GDAL repo I maintain using "git svn" to
> synchronise the Git mirror of GDAL at GitHub:
> 
> http://mateusz.loskot.net/tmp/gdal/mloskot-github-gdal-20111007.7z
> 
> You should be able to download, unpack, fetch update since the creation
> of the package and use it.
> 
> Note, the repo is created/managed on Windows, so it's configured
> to use CRLF. If you download/use it on Unix, you will have to do:
> 
> $ git config core.autocrlf true
> 
> otherwise, Git will report all files as changed, thus  "needs update".
> 
> Summary
> 
> unpack mloskot-github-gdal-20111007.7z
> $ cd mloskot-github-gdal-20111007
> $ git config core.autocrlf true
> $ git svn --authors-file=../gdal-git-authors.txt rebase
> 
> At this point, the Git repo is up to date with the upstream in SVN trunk.
> 
> Now, you may want to push it to your remote Git repo at GitHub

Just for the record, IMHO this final step is not strictly needed.
Githubbers can simply *fork* the reference repo (yours) using the web
interface.
Since from now on we are in the git part of the workflow,
publishing/sharing a branch in whatever remote repo is just a matter of

$ git push <repository> <branchename>

This allow to skip the time expensive operation of pushing the entire
gdal repo to github.

> So, either do:
> 
> git push [protocol]://[login]@github.com/mloskot/gdal.git
> 
> or add aliased remote [1]:
> 
> git remote add [alias] [protocol]://[login]@github.com/denisarnaud/soci.git
> 
> where [alias] is short name of your Git remote,
> [protocol] is either git or https and [login] is your account at GitHub.
> Now, you can push your mirror of GDAL trunk to remote Git repo:
> 
> $ git push [alias]
> 
> Note, in the mloskot-github-gdal-20111007.7z file I left my update.bat
> script. This is the script I use to quickly pull changes from GDAL SVN
> trunk and push it to Git at github. Obviously, don't use this script
> trying to push to my repo.
> 
> [1] http://gitref.org/remotes/
> 
> Best regards,

Thank yo very much Mateusz, it worked perfectly.

regards

-- 
Antonio Valentino
From even.rouault at mines-paris.org  Sat Oct  8 06:56:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct  8 12:23:11 2011
Subject: [gdal-dev] Re: help for comparing two WKT
In-Reply-To: <CA+TxYvOi3dKt1JYDF2ercSCkGjbVERqB_-5QyanOozkuhq5yHw@mail.gmail.com>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
	<CA+TxYvOi3dKt1JYDF2ercSCkGjbVERqB_-5QyanOozkuhq5yHw@mail.gmail.com>
Message-ID: <201110081256.37591.even.rouault@mines-paris.org>

Le samedi 08 octobre 2011 07:05:31, Etienne Tourigny a ?crit :
> A related question:
> 
> given an unnamed datum with defined spheroid, PRIMEM and UNIT values,
> is there a way to find a corresponding named datum or EPSG code?
> 

You can find a match, but there are often several possible solutions. See on 
your examples below.

> I'd be interested in an existing method, or perhaps externalng code or
> table in which I could search for common candidate DATUM definitions,
> and compare using OGRSpatialReference::IsSameGeogCS() .

One method would be to open data/gcs.csv, iterate over the GEOGCS EPSG code in 
the first column, make them expanded to full SRS by 
OGRSpatialReference::importFromEPSG(), strip the nodes you are not interested 
in for the comparisons (AUTHORITY codes), alter the DATUM/SPHEROID names to 
"unknown", and finally compare.

> 
> e.g
> 
>     DATUM["unknown",
>         SPHEROID["Spheroid",6378137,298.257223563]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> 
> corresponds to
> 
> EPSG: 4326
> or
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]

Or :

GEOGCS["Hartebeesthoek94",
    DATUM["Hartebeesthoek94",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6148"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4148"]]

GEOGCS["Yemen NGN96",
    DATUM["Yemen_National_Geodetic_Network_1996",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6163"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4163"]]

GEOGCS["Korean 1995",
    DATUM["Korean_Datum_1995",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6166"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4166"]]

And other GEOGCS that are defined by "+proj=longlat +ellps=WGS84 
+towgs84=0,0,0,0,0,0,0 +no_defs" in the share/proj/epsg file.

> 
> also:
> 
>         DATUM["unknown",
>             SPHEROID["Spheroid",6378137,298.2572221010002]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
> 
> corresponds to
> EPSG:4283
> or
>         DATUM["Geocentric_Datum_of_Australia_1994",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6283"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4283"]],
> 

Or :

GEOGCS["TWD97",
    DATUM["Taiwan_Datum_1997",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1026"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3824"]]

GEOGCS["IGRS",
    DATUM["Iraqi_Geospatial_Reference_System",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1029"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3889"]]

GEOGCS["MOLDREF99",
    DATUM["MOLDREF99",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1032"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4023"]]

GEOGCS["RGRDC 2005",
    DATUM["Reseau_Geodesique_de_la_RDC_2005",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1033"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4046"]]

GEOGCS["SREF98",
    DATUM["Serbian_Reference_Network_1998",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1034"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4075"]]


> 
> many thanks
> Etienne
> 
> On Fri, Oct 7, 2011 at 8:36 PM, Etienne Tourigny
> 
> <etourigny.dev@gmail.com> wrote:
> > Hi all,
> > 
> > I would appreciate any hints as to how I can compare 2
> > WKT/OGRSpatialReference objects.
> > 
> > My goal is to make sure that a more detailed WKT (with authority codes
> > and explicit datum) corresponds (numerically) to a simpler one, such
> > as in the following examples.
> > 
> > I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
> > AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
> > PARAMETER nodes are in the same order? Does FixupOrdering() solve that
> > problem?
> > 
> > Furthermore, How could I compare the datums?
> > 
> > 
> > 
> > 
> > CF=[PROJCS["unnamed",
> >    GEOGCS["unknown",
> >        DATUM["unknown",
> >            SPHEROID["Spheroid",6378137,298.2572221010002]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["degree",0.0174532925199433]],
> >    PROJECTION["Lambert_Conformal_Conic_2SP"],
> >    PARAMETER["standard_parallel_1",-18],
> >    PARAMETER["standard_parallel_2",-36],
> >    PARAMETER["latitude_of_origin",0],
> >    PARAMETER["central_meridian",134],
> >    PARAMETER["false_easting",0],
> >    PARAMETER["false_northing",0]]]
> > 
> > GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
> >    GEOGCS["GDA94",
> >        DATUM["Geocentric_Datum_of_Australia_1994",
> >            SPHEROID["GRS 1980",6378137,298.2572221010002,
> >                AUTHORITY["EPSG","7019"]],
> >            TOWGS84[0,0,0,0,0,0,0],
> >            AUTHORITY["EPSG","6283"]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["degree",0.0174532925199433],
> >        AUTHORITY["EPSG","4283"]],
> >    PROJECTION["Lambert_Conformal_Conic_2SP"],
> >    PARAMETER["standard_parallel_1",-18],
> >    PARAMETER["standard_parallel_2",-36],
> >    PARAMETER["latitude_of_origin",0],
> >    PARAMETER["central_meridian",134],
> >    PARAMETER["false_easting",0],
> >    PARAMETER["false_northing",0],
> >    UNIT["metre",1,
> >        AUTHORITY["EPSG","9001"]],
> >    AUTHORITY["EPSG","3112"]]]
> > 
> > 
> > 
> > Another option is exporting to PROJ.4 strings, but there are the
> > +towgs84 that shows up , plus some differences in +datum vs. +ellps.
> > 
> > e.g.
> > 
> > CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
> > GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
> >  or
> > CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
> > +ellps=GRS80 +units=m +no_defs ]
> > GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
> > +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]
> > 
> > 
> > 
> > many thanks,
> > Etienne
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jzl5325 at psu.edu  Sat Oct  8 11:10:03 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Oct  8 16:50:35 2011
Subject: [gdal-dev] Fwd: gdal_merge.py - Missing images - sans attachment
In-Reply-To: <CAMKgpOYPAFujgRVLrFS-vZGkqonwpmbye6eREeXuM3kvGfJQYA@mail.gmail.com>
References: <CA+bfmPvF1mcFi6-y53cKD46Mqw8vaD3xEfMDeERShYERcsbybg@mail.gmail.com>
	<CA+bfmPsVpqKPSdOWvuvnG8vR9okKpHBRAKvznCQ3fRbBuGjDVQ@mail.gmail.com>
	<CAMKgpOYPAFujgRVLrFS-vZGkqonwpmbye6eREeXuM3kvGfJQYA@mail.gmail.com>
Message-ID: <CA+bfmPt4vOj2VbXGos=31AbPa5=n3x_ovDjRWtEMsS6BJRsjOg@mail.gmail.com>

I got this working this morning.  Again, I simply need to explore the
documentation better!  My issue was not with format or projection, but with
image size.  My final mosaic kept hitting the 3.7GB mark, regardless of
whether I used a .vrt, a GTiff, or worked with gdalwarp.

Reading the GTiff driver documentation, I needed to set BigTiff to yes.

Thanks all who responded.  Using a vrt definitely sped the process as I no
longer needed to batch translate from IMG to tif.



On Fri, Oct 7, 2011 at 6:59 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Jay,
>
> The gdal_merge script needs the images to match in the coordinate system
> and the number of bands.
>
> One likely problem is could be different data types. Provide the gdalinfo
> outputs of the images.
>
> Before you try that, use the gdalbuildvrt program to create a vrt file and
> then gdal_translate to convert the vrt file into a single image. The result
> is usually the same.
>
>
> On Fri, Oct 7, 2011 at 9:12 PM, Jay L. <jzl5325@psu.edu> wrote:
>
>> Sent with an example attachment, which is awaiting approval.  Here is the
>> mail without attachement.
>>
>>
>>  I have 8 large Gtiffs which I am trying to mosaic.  Tiffs were created
>> from .IMG files downloaded from PDS.  I converted to tif using:
>>
>>         gdal_translate -of GTiff -scale -co "TILED=YES" -co
>> "COMPRESS=JPEG" <input>
>>
>> The format conversion is working without a problem.  Gdalinfo is reporting
>> the correct NDV and projection information.  Viewing each tif also returns
>> the expected raster iamge.  So far, so good.
>>
>>
>> I then use:
>>
>>         gdal_merge.py -o wacmos.tif -of GTiff -v --optfile tiff_list.txt
>>
>>
>> Six of the eight tiles are added to the mosaic correctly.  Varying the
>> order in the list, or using *.tif does not change the output.  It is always
>> the same two images which are missing.  Watching the verbose output, it
>> looks like the images are mosaicing correctly.  What would cause these
>> images to be merged as totally black tiles?
>>
>>
>> Thanks for any insight,
>> Jay
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111008/978a1b70/attachment.html
From jzl5325 at psu.edu  Sat Oct  8 11:26:58 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Oct  8 17:08:32 2011
Subject: [gdal-dev] TRI, TPI, and Ruggedness
Message-ID: <CA+bfmPtRjWwyV+Cyzz4W6aumODKJxOHu9M=uwNvCZHdtVn_9Mw@mail.gmail.com>

What is the box size on these indices (TRI, TPI, Roughness)?  Is it user
modifiable?

Finally, in your experience, which index have you selected for a specific
application and why?  (Cross-posted this question to gis.stackexchange.com)

Thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111008/2568108b/attachment.html
From even.rouault at mines-paris.org  Sat Oct  8 12:29:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct  8 18:14:09 2011
Subject: [gdal-dev] TRI, TPI, and Ruggedness
In-Reply-To: <CA+bfmPtRjWwyV+Cyzz4W6aumODKJxOHu9M=uwNvCZHdtVn_9Mw@mail.gmail.com>
References: <CA+bfmPtRjWwyV+Cyzz4W6aumODKJxOHu9M=uwNvCZHdtVn_9Mw@mail.gmail.com>
Message-ID: <201110081829.02399.even.rouault@mines-paris.org>

Le samedi 08 octobre 2011 17:26:58, Jay L. a ?crit :
> What is the box size on these indices (TRI, TPI, Roughness)?

3x3 window

> Is it user modifiable?

No

> 
> Finally, in your experience, which index have you selected for a specific
> application and why?  (Cross-posted this question to gis.stackexchange.com)

Can't answer on that part.

> 
> Thanks,
> Jay
From jzl5325 at psu.edu  Sat Oct  8 12:41:45 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Oct  8 18:27:24 2011
Subject: [gdal-dev] TRI, TPI, and Ruggedness
In-Reply-To: <201110081829.02399.even.rouault@mines-paris.org>
References: <CA+bfmPtRjWwyV+Cyzz4W6aumODKJxOHu9M=uwNvCZHdtVn_9Mw@mail.gmail.com>
	<201110081829.02399.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPvK5ogtzHGfxcsg7vYw3VcoMBwWYbFnC4phYC1kgD7T4g@mail.gmail.com>

Evan,

Thanks for the info.

Jay

On Sat, Oct 8, 2011 at 12:29 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le samedi 08 octobre 2011 17:26:58, Jay L. a ?crit :
> > What is the box size on these indices (TRI, TPI, Roughness)?
>
> 3x3 window
>
> > Is it user modifiable?
>
> No
>
> >
> > Finally, in your experience, which index have you selected for a specific
> > application and why?  (Cross-posted this question to
> gis.stackexchange.com)
>
> Can't answer on that part.
>
> >
> > Thanks,
> > Jay
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111008/ad4b40c9/attachment.html
From jluis at ualg.pt  Sat Oct  8 13:03:14 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Oct  8 18:50:14 2011
Subject: [gdal-dev] TRI, TPI, and Ruggedness
In-Reply-To: <CA+bfmPvK5ogtzHGfxcsg7vYw3VcoMBwWYbFnC4phYC1kgD7T4g@mail.gmail.com>
References: <CA+bfmPtRjWwyV+Cyzz4W6aumODKJxOHu9M=uwNvCZHdtVn_9Mw@mail.gmail.com>	<201110081829.02399.even.rouault@mines-paris.org>
	<CA+bfmPvK5ogtzHGfxcsg7vYw3VcoMBwWYbFnC4phYC1kgD7T4g@mail.gmail.com>
Message-ID: <4E908252.4060600@ualg.pt>

Hi,

Mirone has those same block algorithms (and more, like slope by fitting 
a bilinear surface) and let change the the box size.

Joaquim

> Evan,
>
> Thanks for the info.
>
> Jay
>
> On Sat, Oct 8, 2011 at 12:29 PM, Even Rouault 
> <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>> 
> wrote:
>
>     Le samedi 08 octobre 2011 17:26:58, Jay L. a ?crit :
>     > What is the box size on these indices (TRI, TPI, Roughness)?
>
>     3x3 window
>
>     > Is it user modifiable?
>
>     No
>
>     >
>     > Finally, in your experience, which index have you selected for a
>     specific
>     > application and why?  (Cross-posted this question to
>     gis.stackexchange.com <http://gis.stackexchange.com>)
>
>     Can't answer on that part.
>
>     >
>     > Thanks,
>     > Jay
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111008/a981f828/attachment-0001.html
From mateusz at loskot.net  Sat Oct  8 15:53:48 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Oct  8 21:50:03 2011
Subject: [gdal-dev] sandbox access for non-commiters
In-Reply-To: <4E901469.1000108@tiscali.it>
References: <CA+TxYvO2NWYcCUY4WAL6BEVu7Z+u2nYa1SSFmMJ1zfzdsphrDQ@mail.gmail.com>	<CA+YzLBfke+HwomvCb+PyztQtY=58Phi1OBXze5JjnHrsePKv+Q@mail.gmail.com>	<20111006085038.075c4603@asigrid01>	<CA+YzLBenoN+D_PX625R-Z6Uf8K-Sa2=c6cTfL0=1v1L77_N5dg@mail.gmail.com>	<4E8DF08E.8040809@loskot.net>	<CA+TxYvO1fv24YE=pQybAXPG=qLJ+T95grZKrUtF0j5mgVa=rDg@mail.gmail.com>	<4E8E03AA.2090206@loskot.net>	<CA+TxYvO272jrtiZTeyeLdcLy3VhAzdXG7Wj6vY9kqdXhBrwsRg@mail.gmail.com>	<4E8E0806.9090600@loskot.net>	<CA+TxYvO7aBB3d0eJjC=d78miKwvjrBEuX2TXZpUi9MGgDiETTA@mail.gmail.com>
	<4E8E1517.4050507@tiscali.it> <4E8E17B4.90701@loskot.net>
	<4E8E1D33.60409@tiscali.it> <4E8F62E7.30702@loskot.net>
	<4E901469.1000108@tiscali.it>
Message-ID: <4E90AA4C.2040703@loskot.net>

On 08/10/11 10:14, Antonio Valentino wrote:
> Il 07/10/2011 22:36, Mateusz Loskot ha scritto:
>> On 06/10/11 22:27, Antonio Valentino wrote:
>>>
>>> Another option is to make available a pre-loaded git repo in compressed
>>> form.
>>> Developers that want to use git should download and uncompress the
>>> pre-loaded repo and re-sync using git-svn for getting last svn commits.
>>
>> It should be possible.
>>
>> Here is package of GDAL repo I maintain using "git svn" to
>> synchronise the Git mirror of GDAL at GitHub:
>>
>> http://mateusz.loskot.net/tmp/gdal/mloskot-github-gdal-20111007.7z
>>
>> You should be able to download, unpack, fetch update since the creation
>> of the package and use it.
>>
>> Note, the repo is created/managed on Windows, so it's configured
>> to use CRLF. If you download/use it on Unix, you will have to do:
>>
>> $ git config core.autocrlf true
>>
>> otherwise, Git will report all files as changed, thus  "needs update".
>>
>> Summary
>>
>> unpack mloskot-github-gdal-20111007.7z
>> $ cd mloskot-github-gdal-20111007
>> $ git config core.autocrlf true
>> $ git svn --authors-file=../gdal-git-authors.txt rebase
>>
>> At this point, the Git repo is up to date with the upstream in SVN trunk.
>>
>> Now, you may want to push it to your remote Git repo at GitHub
> 
> Just for the record, IMHO this final step is not strictly needed.
> Githubbers can simply *fork* the reference repo (yours) using the web
> interface.
> Since from now on we are in the git part of the workflow,
> publishing/sharing a branch in whatever remote repo is just a matter of
> 
> $ git push <repository> <branchename>
> 
> This allow to skip the time expensive operation of pushing the entire
> gdal repo to github.

Yes, you are right.

>> So, either do:
>>
>> git push [protocol]://[login]@github.com/mloskot/gdal.git
>>
>> or add aliased remote [1]:
>>
>> git remote add [alias] [protocol]://[login]@github.com/denisarnaud/soci.git
>>
>> where [alias] is short name of your Git remote,
>> [protocol] is either git or https and [login] is your account at GitHub.
>> Now, you can push your mirror of GDAL trunk to remote Git repo:
>>
>> $ git push [alias]
>>
>> Note, in the mloskot-github-gdal-20111007.7z file I left my update.bat
>> script. This is the script I use to quickly pull changes from GDAL SVN
>> trunk and push it to Git at github. Obviously, don't use this script
>> trying to push to my repo.
>>
>> [1] http://gitref.org/remotes/
>>
>> Best regards,
> 
> Thank yo very much Mateusz, it worked perfectly.


You are welcome.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Sat Oct  8 19:05:21 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Oct  9 01:11:44 2011
Subject: [gdal-dev] Re: help for comparing two WKT
In-Reply-To: <201110081256.37591.even.rouault@mines-paris.org>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
	<CA+TxYvOi3dKt1JYDF2ercSCkGjbVERqB_-5QyanOozkuhq5yHw@mail.gmail.com>
	<201110081256.37591.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvP+esave3OUMhS=NSHVZcx4M5SbJuAVL+CYk6H2mQHq5Q@mail.gmail.com>

Thanks Even

I see what you mean, several named GEOGCS/datums can match a given spheroid.

I am trying to see if I can assign a named datum given spheroid
parameters from the CF Convention for the netcdf driver.

For example, this CF definition corresponds to the WGS84 datum/GEOGCS
  int crs ;
    crs:grid_mapping_name = "latitude_longitude";
    crs:longitude_of_prime_meridian = 0.0 ;
    crs:semi_major_axis = 6378137.0 ;
    crs:inverse_flattening = 298.257223563 ;

-> Are there any numerical differences between GEOGCS/datums that use
the same spheroid?
In other words, is it erroneous (numerically) to use another named
GEOGCS/datum than the one that was intended? (e.g. using WGS_1984
instead of Hartebeesthoek94).

-> Furthermore, is there a precedence than one must or can use in
order to choose which one that matches?
I assume that the numerical order of the EPSG codes have nothing to do
with precedence.

regards,
Etienne

On Sat, Oct 8, 2011 at 7:56 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le samedi 08 octobre 2011 07:05:31, Etienne Tourigny a ?crit :
>> A related question:
>>
>> given an unnamed datum with defined spheroid, PRIMEM and UNIT values,
>> is there a way to find a corresponding named datum or EPSG code?
>>
>
> You can find a match, but there are often several possible solutions. See on
> your examples below.
>
>> I'd be interested in an existing method, or perhaps externalng code or
>> table in which I could search for common candidate DATUM definitions,
>> and compare using OGRSpatialReference::IsSameGeogCS() .
>
> One method would be to open data/gcs.csv, iterate over the GEOGCS EPSG code in
> the first column, make them expanded to full SRS by
> OGRSpatialReference::importFromEPSG(), strip the nodes you are not interested
> in for the comparisons (AUTHORITY codes), alter the DATUM/SPHEROID names to
> "unknown", and finally compare.
>
>>
>> e.g
>>
>> ? ? DATUM["unknown",
>> ? ? ? ? SPHEROID["Spheroid",6378137,298.257223563]],
>> ? ? PRIMEM["Greenwich",0],
>> ? ? UNIT["degree",0.0174532925199433]]
>>
>> corresponds to
>>
>> EPSG: 4326
>> or
>> ? ? DATUM["WGS_1984",
>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> ? ? PRIMEM["Greenwich",0],
>> ? ? UNIT["degree",0.0174532925199433],
>> ? ? AUTHORITY["EPSG","4326"]]
>
> Or :
>
> GEOGCS["Hartebeesthoek94",
> ? ?DATUM["Hartebeesthoek94",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","6148"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4148"]]
>
> GEOGCS["Yemen NGN96",
> ? ?DATUM["Yemen_National_Geodetic_Network_1996",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","6163"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4163"]]
>
> GEOGCS["Korean 1995",
> ? ?DATUM["Korean_Datum_1995",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","6166"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4166"]]
>
> And other GEOGCS that are defined by "+proj=longlat +ellps=WGS84
> +towgs84=0,0,0,0,0,0,0 +no_defs" in the share/proj/epsg file.
>
>>
>> also:
>>
>> ? ? ? ? DATUM["unknown",
>> ? ? ? ? ? ? SPHEROID["Spheroid",6378137,298.2572221010002]],
>> ? ? ? ? PRIMEM["Greenwich",0],
>> ? ? ? ? UNIT["degree",0.0174532925199433]],
>>
>> corresponds to
>> EPSG:4283
>> or
>> ? ? ? ? DATUM["Geocentric_Datum_of_Australia_1994",
>> ? ? ? ? ? ? SPHEROID["GRS 1980",6378137,298.2572221010002,
>> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
>> ? ? ? ? ? ? TOWGS84[0,0,0,0,0,0,0],
>> ? ? ? ? ? ? AUTHORITY["EPSG","6283"]],
>> ? ? ? ? PRIMEM["Greenwich",0],
>> ? ? ? ? UNIT["degree",0.0174532925199433],
>> ? ? ? ? AUTHORITY["EPSG","4283"]],
>>
>
> Or :
>
> GEOGCS["TWD97",
> ? ?DATUM["Taiwan_Datum_1997",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1026"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","3824"]]
>
> GEOGCS["IGRS",
> ? ?DATUM["Iraqi_Geospatial_Reference_System",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1029"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","3889"]]
>
> GEOGCS["MOLDREF99",
> ? ?DATUM["MOLDREF99",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1032"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4023"]]
>
> GEOGCS["RGRDC 2005",
> ? ?DATUM["Reseau_Geodesique_de_la_RDC_2005",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1033"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4046"]]
>
> GEOGCS["SREF98",
> ? ?DATUM["Serbian_Reference_Network_1998",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","1034"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4075"]]
>
>
>>
>> many thanks
>> Etienne
>>
>> On Fri, Oct 7, 2011 at 8:36 PM, Etienne Tourigny
>>
>> <etourigny.dev@gmail.com> wrote:
>> > Hi all,
>> >
>> > I would appreciate any hints as to how I can compare 2
>> > WKT/OGRSpatialReference objects.
>> >
>> > My goal is to make sure that a more detailed WKT (with authority codes
>> > and explicit datum) corresponds (numerically) to a simpler one, such
>> > as in the following examples.
>> >
>> > I understand that the oSRSGDAL.exportToPrettyWkt() function can remove
>> > AXIS, AUTHORITY and EXTENSION nodes, but how can I guarantee that the
>> > PARAMETER nodes are in the same order? Does FixupOrdering() solve that
>> > problem?
>> >
>> > Furthermore, How could I compare the datums?
>> >
>> >
>> >
>> >
>> > CF=[PROJCS["unnamed",
>> > ? ?GEOGCS["unknown",
>> > ? ? ? ?DATUM["unknown",
>> > ? ? ? ? ? ?SPHEROID["Spheroid",6378137,298.2572221010002]],
>> > ? ? ? ?PRIMEM["Greenwich",0],
>> > ? ? ? ?UNIT["degree",0.0174532925199433]],
>> > ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>> > ? ?PARAMETER["standard_parallel_1",-18],
>> > ? ?PARAMETER["standard_parallel_2",-36],
>> > ? ?PARAMETER["latitude_of_origin",0],
>> > ? ?PARAMETER["central_meridian",134],
>> > ? ?PARAMETER["false_easting",0],
>> > ? ?PARAMETER["false_northing",0]]]
>> >
>> > GDAL=[PROJCS["GDA94 / Geoscience Australia Lambert",
>> > ? ?GEOGCS["GDA94",
>> > ? ? ? ?DATUM["Geocentric_Datum_of_Australia_1994",
>> > ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
>> > ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
>> > ? ? ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
>> > ? ? ? ? ? ?AUTHORITY["EPSG","6283"]],
>> > ? ? ? ?PRIMEM["Greenwich",0],
>> > ? ? ? ?UNIT["degree",0.0174532925199433],
>> > ? ? ? ?AUTHORITY["EPSG","4283"]],
>> > ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>> > ? ?PARAMETER["standard_parallel_1",-18],
>> > ? ?PARAMETER["standard_parallel_2",-36],
>> > ? ?PARAMETER["latitude_of_origin",0],
>> > ? ?PARAMETER["central_meridian",134],
>> > ? ?PARAMETER["false_easting",0],
>> > ? ?PARAMETER["false_northing",0],
>> > ? ?UNIT["metre",1,
>> > ? ? ? ?AUTHORITY["EPSG","9001"]],
>> > ? ?AUTHORITY["EPSG","3112"]]]
>> >
>> >
>> >
>> > Another option is exporting to PROJ.4 strings, but there are the
>> > +towgs84 that shows up , plus some differences in +datum vs. +ellps.
>> >
>> > e.g.
>> >
>> > CF=[+proj=utm +zone=55 +ellps=WGS84 +units=m +no_defs ]
>> > GDAL=[+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs ]
>> > ?or
>> > CF=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0
>> > +ellps=GRS80 +units=m +no_defs ]
>> > GDAL=[+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0
>> > +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ]
>> >
>> >
>> >
>> > many thanks,
>> > Etienne
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Sat Oct  8 19:32:21 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Oct  9 01:40:12 2011
Subject: [gdal-dev] Re: help for comparing two WKT
In-Reply-To: <CA+TxYvP+esave3OUMhS=NSHVZcx4M5SbJuAVL+CYk6H2mQHq5Q@mail.gmail.com>
References: <CA+TxYvNnw870vaC7pM_Cqn2ZHabFuLfBWRpOJKmWD+tQFYMx0A@mail.gmail.com>
	<201110081256.37591.even.rouault@mines-paris.org>
	<CA+TxYvP+esave3OUMhS=NSHVZcx4M5SbJuAVL+CYk6H2mQHq5Q@mail.gmail.com>
Message-ID: <201110090132.21477.even.rouault@mines-paris.org>

Le dimanche 09 octobre 2011 01:05:21, Etienne Tourigny a ?crit :
> Thanks Even
> 
> I see what you mean, several named GEOGCS/datums can match a given
> spheroid.
> 
> I am trying to see if I can assign a named datum given spheroid
> parameters from the CF Convention for the netcdf driver.
> 
> For example, this CF definition corresponds to the WGS84 datum/GEOGCS
>   int crs ;
>     crs:grid_mapping_name = "latitude_longitude";
>     crs:longitude_of_prime_meridian = 0.0 ;
>     crs:semi_major_axis = 6378137.0 ;
>     crs:inverse_flattening = 298.257223563 ;
> 
> -> Are there any numerical differences between GEOGCS/datums that use
> the same spheroid?
> In other words, is it erroneous (numerically) to use another named
> GEOGCS/datum than the one that was intended? (e.g. using WGS_1984
> instead of Hartebeesthoek94).

If using PROJ4 no, they will be equivalent. But if EPSG chose to make them 
different, I guess it probably means that with more precise 
modeling/transformation tools they would be different. It's somehow geodesic 
pedantry.

For example, http://www.fig.net/commission5/reports/wonnacott.pdf explains how 
the Hartebeesthoek94 was built.

> 
> -> Furthermore, is there a precedence than one must or can use in
> order to choose which one that matches?
> I assume that the numerical order of the EPSG codes have nothing to do
> with precedence.

I'm afraid there's no "precedence", apart from an arbitrary choice you could 
made based on what you believe to be the most "usual" / likely one.

EPSG also defines a geographical zone where GEOGCS/PROJCS are valid, so that 
could perhaps be used to guess the most appropriate match when you have other 
elements (such as the bounding box of the raster that uses the SRS), but I'm 
not sure if those values are preserved in the GDAL CSV files.

> 
> regards,
> Etienne
From jukka.rahkonen at mmmtike.fi  Sun Oct  9 05:06:44 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Oct  9 11:46:26 2011
Subject: [gdal-dev] Re: elgis build of GDAL - compressed overview fails
References: <CALtm4h2Qwqd_FzS70R7Q+TB-rU+9A04Nd52_mGLYJrdLNs=6Pg@mail.gmail.com>
Message-ID: <loom.20111009T110251-526@post.gmane.org>

Travis Kirstine <traviskirstine <at> gmail.com> writes:

> 
> I have been using the elgis 5 repository with include build of GDAL
> 1.8 and have problems creating overviews with jpeg compression
> 
> gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> ORTH176250488302011FBS.tif 2 4 8
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 0gdaladdo: tif_jpeg.c:691: JPEGPreDecode: Assertion
> `sp->cinfo.comm.is_decompressor' failed.
> Aborted
> 
> I believe that this is related to use of external libtiff / libgeotiff
> rather than internal as described in ticket 3139
> http://trac.osgeo.org/gdal/ticket/3139


Just a week ago I failed with options
--config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW YCBCR 
but using only --config COMPRESS_OVERVIEW JPEG was successful. I do not remember
the exact error message nor gdal version I was using, but it had to be some
FWTools package and thus something older. 



From jukka.rahkonen at mmmtike.fi  Sun Oct  9 05:13:35 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Oct  9 11:53:31 2011
Subject: [gdal-dev] Re: Help with setting GCPs in a GeoTiff
References: <1317938733154-6867532.post@n2.nabble.com>
	<CAMKgpObMF-FdCi=BEoPSqgr3mares-56826QQX5izAKtOBeC6Q@mail.gmail.com>
	<1317998645699-6869597.post@n2.nabble.com>
Message-ID: <loom.20111009T110758-353@post.gmane.org>

matt.feemster <matt.feemster <at> ga-asi.com> writes:


> 
> And shouldn't the far pixel count be the extent minus one since it's zero
> indexed?

Yes, but remember that the anchor point is in the top-left corner or the pixel
and therefore extent minus one might give you a different result than you
believe. The right side gcp will not be located at the right side extent of the
whole visible image but one pixel width to the left and the same thing happens
at the bottom of the image. It may be OK in your use case but think about it.

-Jukka Rahkonen-

From traviskirstine at gmail.com  Sun Oct  9 07:36:22 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Sun Oct  9 14:23:55 2011
Subject: [gdal-dev] Re: elgis build of GDAL - compressed overview fails
In-Reply-To: <loom.20111009T110251-526@post.gmane.org>
References: <CALtm4h2Qwqd_FzS70R7Q+TB-rU+9A04Nd52_mGLYJrdLNs=6Pg@mail.gmail.com>
	<loom.20111009T110251-526@post.gmane.org>
Message-ID: <CALtm4h1J+90XwJNbB8366yjUQ0RKrRuPJCeHiCgy1-VX0FDuVA@mail.gmail.com>

Jukka,


Thanks,

We'll just tweak the elgis build to use external libtiff libraries.

Regards



On 9 October 2011 05:06, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> wrote:
> Travis Kirstine <traviskirstine <at> gmail.com> writes:
>
>>
>> I have been using the elgis 5 repository with include build of GDAL
>> 1.8 and have problems creating overviews with jpeg compression
>>
>> gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
>> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
>> ORTH176250488302011FBS.tif 2 4 8
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> 0gdaladdo: tif_jpeg.c:691: JPEGPreDecode: Assertion
>> `sp->cinfo.comm.is_decompressor' failed.
>> Aborted
>>
>> I believe that this is related to use of external libtiff / libgeotiff
>> rather than internal as described in ticket 3139
>> http://trac.osgeo.org/gdal/ticket/3139
>
>
> Just a week ago I failed with options
> --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW YCBCR
> but using only --config COMPRESS_OVERVIEW JPEG was successful. I do not remember
> the exact error message nor gdal version I was using, but it had to be some
> FWTools package and thus something older.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From wyzwyz969 at 163.com  Sun Oct  9 22:45:56 2011
From: wyzwyz969 at 163.com (rrrrssss00)
Date: Mon Oct 10 06:24:57 2011
Subject: [gdal-dev] Slow to write a hfa(erdas img) file?
Message-ID: <1318214756445-6875603.post@n2.nabble.com>

need to write a big img file(2GB) from a source file(the source is also img).
it takes about 10mins , but if i write in tif or pix format, it takes much
less time (about 2min)

i tried to use the gdal_translate.exe to do the same thing , the result is
almost the same,write in img format is slow...

so , my question is : is there something wrong in the code of writing img
format? or how can i speed up the progress of writing img file 

thanks

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Slow-to-write-a-hfa-erdas-img-file-tp6875603p6875603.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From patdevelop at gmail.com  Mon Oct 10 03:14:39 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Mon Oct 10 11:08:43 2011
Subject: [gdal-dev] Re: help for comparing two WKT
Message-ID: <CALOKYXVcztePKifUFzFv+8CoxbXiJsarQKiH6tbamKf_2E9Usg@mail.gmail.com>

On Mon, Oct 10, 2011 at 3:00 AM,  <gdal-dev-request@lists.osgeo.org> wrote:
> Message: 3
> Date: Sun, 9 Oct 2011 01:32:21 +0200
> From: Even Rouault <even.rouault@mines-paris.org>
> Subject: Re: [gdal-dev] Re: help for comparing two WKT
> To: Etienne Tourigny <etourigny.dev@gmail.com>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID: <201110090132.21477.even.rouault@mines-paris.org>
> Content-Type: Text/Plain; ?charset="iso-8859-1"
>
> Le dimanche 09 octobre 2011 01:05:21, Etienne Tourigny a ?crit :
>> Thanks Even
>>
>> I see what you mean, several named GEOGCS/datums can match a given
>> spheroid.
>>
>> I am trying to see if I can assign a named datum given spheroid
>> parameters from the CF Convention for the netcdf driver.
>>
>> For example, this CF definition corresponds to the WGS84 datum/GEOGCS
>> ? int crs ;
>> ? ? crs:grid_mapping_name = "latitude_longitude";
>> ? ? crs:longitude_of_prime_meridian = 0.0 ;
>> ? ? crs:semi_major_axis = 6378137.0 ;
>> ? ? crs:inverse_flattening = 298.257223563 ;
>>
>> -> Are there any numerical differences between GEOGCS/datums that use
>> the same spheroid?
>> In other words, is it erroneous (numerically) to use another named
>> GEOGCS/datum than the one that was intended? (e.g. using WGS_1984
>> instead of Hartebeesthoek94).
>
> If using PROJ4 no, they will be equivalent. But if EPSG chose to make them
> different, I guess it probably means that with more precise
> modeling/transformation tools they would be different. It's somehow geodesic
> pedantry.
>
> For example, http://www.fig.net/commission5/reports/wonnacott.pdf
>
> explains how
> the Hartebeesthoek94 was built.

Yes, I think named datums imply sets of control points that can be
used for more precise datum transformations, going beyond just the
ellipsoid used, e.g. see discussions at:
http://www.unidata.ucar.edu/mailing_lists/archives/netcdf-java/2011/msg00024.html

So it doesn't seem to me that two datums that have the same spheroid,
but different names, should return True when tested with
IsSameGeogCS().

If you wanted to test the 2 Spheroids are the same, you could access
info using the OGRSpatialReference::GetAttrNode() function - e.g. path
"GEOGCS|DATUM|SPHEROID", and check the values are the same under that
node.

Also the spheroids themselves have EPSG codes (e.g. EPSG:7030 for the
spheroid used in WGS84, EPSG:7019 for GRS 80) - so maybe the right
level to target these functions is to be able to check spheroid values
and assign EPSG codes at that level?

-- Pat.

>
>>
>> -> Furthermore, is there a precedence than one must or can use in
>> order to choose which one that matches?
>> I assume that the numerical order of the EPSG codes have nothing to do
>> with precedence.
>
> I'm afraid there's no "precedence", apart from an arbitrary choice you could
> made based on what you believe to be the most "usual" / likely one.
>
> EPSG also defines a geographical zone where GEOGCS/PROJCS are valid, so that
> could perhaps be used to guess the most appropriate match when you have other
> elements (such as the bounding box of the raster that uses the SRS), but I'm
> not sure if those values are preserved in the GDAL CSV files.
>
>>
>> regards,
>> Etienne
From emmexx at tiscalinet.it  Mon Oct 10 05:14:55 2011
From: emmexx at tiscalinet.it (emmexx)
Date: Mon Oct 10 13:15:09 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
Message-ID: <4E92B78F.6090206@tiscalinet.it>

I'm new to this list, sorry if my question is not new or OT.

I was given a shape file containing linestrings based on a CTR map (CTR
is a "technical italian map").
The file uses Roma1940 and the coordinates are geographic. This is the
start of the output of ogrinfo -al:
Geometry: Line String
Feature Count: 185
Extent: (9.048641, 45.413654) - (9.267740, 45.527227)
Layer SRS WKT:
GEOGCS["GCS_Roma_1940",
    DATUM["Roma_1940",
        SPHEROID["International_1924",6378388,297]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.017453292519943295]]

I need to convert the shape file to EPSG:4326 to view the data on google
or osm maps.

I received, and found also on the web, some srs to make the conversion
from Gauss-Boaga to wgs84 but, if I understand correctly, all those
files expect the coordinates of the points to be cartesian, not geographic.

I tried to use ogr2ogr with the following parameters:

ogr2ogr -a_srs "gausboaga.prj" -s_srs "latlong_wgs84.prj" -t_srs
"EPSG:4326" -f "one of many formats" outputfile myshape.shp

(the srs files at the end of the message)

What I get are points with geographic coordinates changed at the
13th-14th decimal place. E.g.:

9.170837078374765,45.525406361655726
becomes
9.170837078374774,45.525406361655769

As a test I downloaded a shape file of my city roads from a regional web
service, the coordinates are cartesian, then I used a web tool to
convert that shape file from epsg:3003 to epsg:4326 and the result is a
file with lines that perfectly match gmaps or osm roads.
If I try to use the same service with my shape file I get an error.

I found out some formulas to derive cartesian from geographic
coordinates for a transverse mercator projection
(http://www.remotesensing.org/geotiff/proj_list/guid7.html) but I wonder
if there is some ogr2ogr parameter or some srs to do the same.

Thank you

	maxx


"gausboaga.prj"
PROJCS["Monte Mario / Italy zone 1",
	GEOGCS["Monte Mario",
		DATUM["Monte_Mario",
			SPHEROID["International 1924", 6378388.0, 297.0,
			AUTHORITY["EPSG","7022"]],
		TOWGS84[-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68],
			AUTHORITY["EPSG","6265"]],
		PRIMEM["Greenwich", 0.0,
			AUTHORITY["EPSG","8901"]],
		UNIT["degree", 0.017453292519943295],
		AXIS["Lon", EAST],
		AXIS["Lat", NORTH],
		AUTHORITY["EPSG","4265"]],
		PROJECTION["Transverse_Mercator"],
		PARAMETER["central_meridian", 9.0],
		PARAMETER["latitude_of_origin", 0.0],
		PARAMETER["scale_factor", 0.9996],
		PARAMETER["false_easting", 1500000.0],
		PARAMETER["false_northing", 0.0],
		UNIT["m", 1.0],
		AXIS["x", EAST],
		AXIS["y", NORTH],
		AUTHORITY["EPSG","3003"]]

"latlon_wgs84.prj"
GEOGCS["wgs84",DATUM["WGS_1984",
	SPHEROID["wgs84",6378137,298.257223563],
	TOWGS84[0.000000,0.000000,0.000000]],
	PRIMEM["Greenwich",0],
	UNIT["degree",0.0174532925199433]]


From etourigny.dev at gmail.com  Mon Oct 10 08:49:44 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Oct 10 17:01:42 2011
Subject: [gdal-dev] Re: help for comparing two WKT
In-Reply-To: <CALOKYXVcztePKifUFzFv+8CoxbXiJsarQKiH6tbamKf_2E9Usg@mail.gmail.com>
References: <CALOKYXVcztePKifUFzFv+8CoxbXiJsarQKiH6tbamKf_2E9Usg@mail.gmail.com>
Message-ID: <CA+TxYvONZLP7QT3m=TkUepcku9R2j-CLCC+LX0kCFm39b+Y_jQ@mail.gmail.com>

On Mon, Oct 10, 2011 at 4:14 AM, Patrick Sunter <patdevelop@gmail.com> wrote:
> On Mon, Oct 10, 2011 at 3:00 AM, ?<gdal-dev-request@lists.osgeo.org> wrote:
>> Message: 3
>> Date: Sun, 9 Oct 2011 01:32:21 +0200
>> From: Even Rouault <even.rouault@mines-paris.org>
>> Subject: Re: [gdal-dev] Re: help for comparing two WKT
>> To: Etienne Tourigny <etourigny.dev@gmail.com>
>> Cc: gdal-dev@lists.osgeo.org
>> Message-ID: <201110090132.21477.even.rouault@mines-paris.org>
>> Content-Type: Text/Plain; ?charset="iso-8859-1"
>>
>> Le dimanche 09 octobre 2011 01:05:21, Etienne Tourigny a ?crit :
>>> Thanks Even
>>>
>>> I see what you mean, several named GEOGCS/datums can match a given
>>> spheroid.
>>>
>>> I am trying to see if I can assign a named datum given spheroid
>>> parameters from the CF Convention for the netcdf driver.
>>>
>>> For example, this CF definition corresponds to the WGS84 datum/GEOGCS
>>> ? int crs ;
>>> ? ? crs:grid_mapping_name = "latitude_longitude";
>>> ? ? crs:longitude_of_prime_meridian = 0.0 ;
>>> ? ? crs:semi_major_axis = 6378137.0 ;
>>> ? ? crs:inverse_flattening = 298.257223563 ;
>>>
>>> -> Are there any numerical differences between GEOGCS/datums that use
>>> the same spheroid?
>>> In other words, is it erroneous (numerically) to use another named
>>> GEOGCS/datum than the one that was intended? (e.g. using WGS_1984
>>> instead of Hartebeesthoek94).
>>
>> If using PROJ4 no, they will be equivalent. But if EPSG chose to make them
>> different, I guess it probably means that with more precise
>> modeling/transformation tools they would be different. It's somehow geodesic
>> pedantry.
>>
>> For example, http://www.fig.net/commission5/reports/wonnacott.pdf
>>
>> explains how
>> the Hartebeesthoek94 was built.
>
> Yes, I think named datums imply sets of control points that can be
> used for more precise datum transformations, going beyond just the
> ellipsoid used, e.g. see discussions at:
> http://www.unidata.ucar.edu/mailing_lists/archives/netcdf-java/2011/msg00024.html
>
> So it doesn't seem to me that two datums that have the same spheroid,
> but different names, should return True when tested with
> IsSameGeogCS().

Ok I understand now, will close the bug I filed.

>
> If you wanted to test the 2 Spheroids are the same, you could access
> info using the OGRSpatialReference::GetAttrNode() function - e.g. path
> "GEOGCS|DATUM|SPHEROID", and check the values are the same under that
> node.
>
> Also the spheroids themselves have EPSG codes (e.g. EPSG:7030 for the
> spheroid used in WGS84, EPSG:7019 for GRS 80) - so maybe the right
> level to target these functions is to be able to check spheroid values
> and assign EPSG codes at that level?

Well not much added value in adding the spheroid EPSG code, so I guess
it's not worth the trouble.

This simple example

GEOGCS["unknown",
    DATUM["unknown",
        SPHEROID["Spheroid",6378140,298.257]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]

would become

GEOGCS["unknown",
    DATUM["unknown",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]

instead of the more complete (but possibly erroneous in terms of
precise geodesy)

GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]

Thanks to everyone for their help
Etienne
>
> -- Pat.
>
>>
>>>
>>> -> Furthermore, is there a precedence than one must or can use in
>>> order to choose which one that matches?
>>> I assume that the numerical order of the EPSG codes have nothing to do
>>> with precedence.
>>
>> I'm afraid there's no "precedence", apart from an arbitrary choice you could
>> made based on what you believe to be the most "usual" / likely one.
>>
>> EPSG also defines a geographical zone where GEOGCS/PROJCS are valid, so that
>> could perhaps be used to guess the most appropriate match when you have other
>> elements (such as the bounding box of the raster that uses the SRS), but I'm
>> not sure if those values are preserved in the GDAL CSV files.
>>
>>>
>>> regards,
>>> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From sigfrido at tiscali.it  Tue Oct 11 03:50:13 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Tue Oct 11 13:08:00 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
In-Reply-To: <4E92B78F.6090206@tiscalinet.it>
References: <4E92B78F.6090206@tiscalinet.it>
Message-ID: <1318319413.2262.2.camel@GOLEM>

Hi Max,

have you tried

ogr2ogr -t_srs EPSG:4326 -f "one of many formats" outputfile myshape.shp

As ogrinfo recognizes the source shape CS (I guess it has a .prj file
associated with it), you should only transform (-t_srs) into the
destination CS.

All the best

Sig


> 


Il giorno lun, 10/10/2011 alle 11.14 +0200, emmexx ha scritto:
> I'm new to this list, sorry if my question is not new or OT.
> 
> I was given a shape file containing linestrings based on a CTR map (CTR
> is a "technical italian map").
> The file uses Roma1940 and the coordinates are geographic. This is the
> start of the output of ogrinfo -al:
> Geometry: Line String
> Feature Count: 185
> Extent: (9.048641, 45.413654) - (9.267740, 45.527227)
> Layer SRS WKT:
> GEOGCS["GCS_Roma_1940",
>     DATUM["Roma_1940",
>         SPHEROID["International_1924",6378388,297]],
>     PRIMEM["Greenwich",0],
>     UNIT["Degree",0.017453292519943295]]
> 
> I need to convert the shape file to EPSG:4326 to view the data on google
> or osm maps.
> 
> I received, and found also on the web, some srs to make the conversion
> from Gauss-Boaga to wgs84 but, if I understand correctly, all those
> files expect the coordinates of the points to be cartesian, not geographic.
> 
> I tried to use ogr2ogr with the following parameters:
> 
> ogr2ogr -a_srs "gausboaga.prj" -s_srs "latlong_wgs84.prj" -t_srs
> "EPSG:4326" -f "one of many formats" outputfile myshape.shp
> 
> (the srs files at the end of the message)
> 
> What I get are points with geographic coordinates changed at the
> 13th-14th decimal place. E.g.:
> 
> 9.170837078374765,45.525406361655726
> becomes
> 9.170837078374774,45.525406361655769
> 
> As a test I downloaded a shape file of my city roads from a regional web
> service, the coordinates are cartesian, then I used a web tool to
> convert that shape file from epsg:3003 to epsg:4326 and the result is a
> file with lines that perfectly match gmaps or osm roads.
> If I try to use the same service with my shape file I get an error.
> 
> I found out some formulas to derive cartesian from geographic
> coordinates for a transverse mercator projection
> (http://www.remotesensing.org/geotiff/proj_list/guid7.html) but I wonder
> if there is some ogr2ogr parameter or some srs to do the same.
> 
> Thank you
> 
> 	maxx
> 
> 
> "gausboaga.prj"
> PROJCS["Monte Mario / Italy zone 1",
> 	GEOGCS["Monte Mario",
> 		DATUM["Monte_Mario",
> 			SPHEROID["International 1924", 6378388.0, 297.0,
> 			AUTHORITY["EPSG","7022"]],
> 		TOWGS84[-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68],
> 			AUTHORITY["EPSG","6265"]],
> 		PRIMEM["Greenwich", 0.0,
> 			AUTHORITY["EPSG","8901"]],
> 		UNIT["degree", 0.017453292519943295],
> 		AXIS["Lon", EAST],
> 		AXIS["Lat", NORTH],
> 		AUTHORITY["EPSG","4265"]],
> 		PROJECTION["Transverse_Mercator"],
> 		PARAMETER["central_meridian", 9.0],
> 		PARAMETER["latitude_of_origin", 0.0],
> 		PARAMETER["scale_factor", 0.9996],
> 		PARAMETER["false_easting", 1500000.0],
> 		PARAMETER["false_northing", 0.0],
> 		UNIT["m", 1.0],
> 		AXIS["x", EAST],
> 		AXIS["y", NORTH],
> 		AUTHORITY["EPSG","3003"]]
> 
> "latlon_wgs84.prj"
> GEOGCS["wgs84",DATUM["WGS_1984",
> 	SPHEROID["wgs84",6378137,298.257223563],
> 	TOWGS84[0.000000,0.000000,0.000000]],
> 	PRIMEM["Greenwich",0],
> 	UNIT["degree",0.0174532925199433]]
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From joss.armstrong at gmail.com  Tue Oct 11 06:21:04 2011
From: joss.armstrong at gmail.com (jarmstrong)
Date: Tue Oct 11 15:44:11 2011
Subject: [gdal-dev] Re: KML's extendedData not visible
In-Reply-To: <1283189019.12470.6.camel@winkey.org>
References: <201008240102.33770.volker27@gmx.at>
	<1283189019.12470.6.camel@winkey.org>
Message-ID: <1318328464310-6880389.post@n2.nabble.com>

I have a similar question regarding KML and OGR.
When trying to import the example extended data as given at 
http://code.google.com/apis/kml/documentation/extendeddata.html
http://code.google.com/apis/kml/documentation/extendeddata.html 
The extended data is not present in the created tables in the PG database
when imported from KML file using ogr2ogr command.
The database is created according to the template_postgis and the geometry
data is imported correctly.
Please let me know if this extended data should be present in the database
tables and if so what is required to do this.

Thanks
J Armstrong 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-KML-s-extendedData-not-visible-tp5454623p6880389.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Tue Oct 11 10:09:01 2011
From: rush at winkey.org (Brian Case)
Date: Tue Oct 11 19:44:38 2011
Subject: [gdal-dev] Re: KML's extendedData not visible
In-Reply-To: <1318328464310-6880389.post@n2.nabble.com>
References: <201008240102.33770.volker27@gmx.at>
	<1283189019.12470.6.camel@winkey.org>
	<1318328464310-6880389.post@n2.nabble.com>
Message-ID: <1318342141.22118.3.camel@octopi>

joss,

you should try the libkml driver.
http://www.gdal.org/ogr/drv_libkml.html

ogr2ogr -f CSV test.csv test.kml

cat test.csv
Name,description,timestamp,begin,end,altitudeMode,tessellate,extrude,visibility,holeNumber,holeYardage,holePar
Club house,,,,,,-1,-1,-1,1,234,4
By the lake,,,,,,-1,-1,-1,5,523,5


Brian



On Tue, 2011-10-11 at 03:21 -0700, jarmstrong wrote:
> I have a similar question regarding KML and OGR.
> When trying to import the example extended data as given at 
> http://code.google.com/apis/kml/documentation/extendeddata.html
> http://code.google.com/apis/kml/documentation/extendeddata.html 
> The extended data is not present in the created tables in the PG database
> when imported from KML file using ogr2ogr command.
> The database is created according to the template_postgis and the geometry
> data is imported correctly.
> Please let me know if this extended data should be present in the database
> tables and if so what is required to do this.
> 
> Thanks
> J Armstrong 
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-KML-s-extendedData-not-visible-tp5454623p6880389.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jgomezdans at gmail.com  Tue Oct 11 13:49:18 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Oct 11 23:36:59 2011
Subject: [gdal-dev] ReadRaster python bindings and argumen types
Message-ID: <CAMWde5oV49hnd18LDhhSTTf7WZXDLKnks1A0m3=7UuD=EGbf1A@mail.gmail.com>

Hi,
I have installed GDAL 1.8.1 to use the python bindings. I note that if I
pass a slice of an array to ReadRaster for the (x,y) pixel location, I get a
TypeError:
TypeError: in method 'Dataset_ReadRaster1', argument 2 of type 'int'

If I surround the offending slice by int( x ) and int(y), it works fine.
Somehow, I think the wrapper (ReadRaster1) should also take 1-element slices
which are integers.

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111011/5c6ae533/attachment.html
From chaitanya.ch at gmail.com  Tue Oct 11 15:35:14 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 12 01:28:58 2011
Subject: [gdal-dev] ReadRaster python bindings and argumen types
In-Reply-To: <CAMWde5oV49hnd18LDhhSTTf7WZXDLKnks1A0m3=7UuD=EGbf1A@mail.gmail.com>
References: <CAMWde5oV49hnd18LDhhSTTf7WZXDLKnks1A0m3=7UuD=EGbf1A@mail.gmail.com>
Message-ID: <CAMKgpObRgV884nq2GaVHSY-ZSJ9GzaG77eoQ9L=Zp1bbFCfDOQ@mail.gmail.com>

Jose,

FYI, the ReadRaster function is optimized for reading chunks of image, not
individual pixels.

An array slice is essentially an array itself. But your error message says
different. Can you provide the offending lines of code?

On Tue, Oct 11, 2011 at 11:19 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi,
> I have installed GDAL 1.8.1 to use the python bindings. I note that if I
> pass a slice of an array to ReadRaster for the (x,y) pixel location, I get a
> TypeError:
> TypeError: in method 'Dataset_ReadRaster1', argument 2 of type 'int'
>
> If I surround the offending slice by int( x ) and int(y), it works fine.
> Somehow, I think the wrapper (ReadRaster1) should also take 1-element slices
> which are integers.
>
> Jose
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111012/cf43e7a9/attachment.html
From Jennings.Jay at geoeye.com  Tue Oct 11 16:09:02 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Wed Oct 12 02:05:32 2011
Subject: [gdal-dev] RGB + Grayscale in gdalwarp
Message-ID: <ADE7627990BC2E4AB2112FF812FB5C8E059D13@EEXCHMB01THN.geoeye.com>

Hi folks,
I am trying to merge a grayscale (1-band) image with RGB (3-band) imagery using 'gdalwarp', the hope being that the grayscale image would be converted on-the-fly to RGB by duplicating the one band 3 times, thus ending up still grayscale visually.
But 'gdalwarp' doesn't seem to do that; instead the grayscale image comes out recognizable but dark reddish, as if the one input band is being used as the Red band on output, with the Green and Blue output bands getting all zeroes.

Looking at the 'gdalwarp' documentation, I don't see any options to treat this (admittedly unusual) case as I'm expecting.  Did I miss anything ?

( I see that the 1-band image can be made compatible by preprocessing it like this:
     gdal_translate -b 1 -b 1 -b 1 gray.tif  RGB_still_gray.tif

That will be my fallback if there are no special tricks in 'gdalwarp' )
.........................................................
Jay Jennings
GeoEye, Inc.
(NASDAQ: GEOY)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111011/3af119c8/attachment-0001.html
From even.rouault at mines-paris.org  Tue Oct 11 16:29:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 12 02:26:38 2011
Subject: [gdal-dev] RGB + Grayscale in gdalwarp
In-Reply-To: <ADE7627990BC2E4AB2112FF812FB5C8E059D13@EEXCHMB01THN.geoeye.com>
References: <ADE7627990BC2E4AB2112FF812FB5C8E059D13@EEXCHMB01THN.geoeye.com>
Message-ID: <201110112229.49124.even.rouault@mines-paris.org>

Le mardi 11 octobre 2011 22:09:02, Jay Jennings a ?crit :
> Hi folks,
> I am trying to merge a grayscale (1-band) image with RGB (3-band) imagery
> using 'gdalwarp', the hope being that the grayscale image would be
> converted on-the-fly to RGB by duplicating the one band 3 times, thus
> ending up still grayscale visually. But 'gdalwarp' doesn't seem to do
> that; instead the grayscale image comes out recognizable but dark reddish,
> as if the one input band is being used as the Red band on output, with the
> Green and Blue output bands getting all zeroes.
> 
> Looking at the 'gdalwarp' documentation, I don't see any options to treat
> this (admittedly unusual) case as I'm expecting.  Did I miss anything ?
> 
> ( I see that the 1-band image can be made compatible by preprocessing it
> like this: gdal_translate -b 1 -b 1 -b 1 gray.tif  RGB_still_gray.tif
> 
> That will be my fallback if there are no special tricks in 'gdalwarp' )

I can understand your wish, but gdalwarp has probably already enough special 
tricks to justify adding a new one for which you have found by yourself a 
perfectly simple solution.

"Write programs that do one thing and do it well." -Doug McIlroy

PS:  If you really want to do it in a single step, you could probably easily 
convince the warping algorithm to do the RGB expansion directly by setting 
psWO->panSrcBands[i] = 1 and assigning psWO->nBandCount to 3 . (hack in 
apps/gdalwarp.cpp).


> .........................................................
> Jay Jennings
> GeoEye, Inc.
> (NASDAQ: GEOY)
From emmexx at tiscalinet.it  Wed Oct 12 05:33:23 2011
From: emmexx at tiscalinet.it (emmexx)
Date: Wed Oct 12 16:13:29 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
In-Reply-To: <1318319413.2262.2.camel@GOLEM>
References: <4E92B78F.6090206@tiscalinet.it> <1318319413.2262.2.camel@GOLEM>
Message-ID: <4E955EE3.8090606@tiscalinet.it>

Il 10/11/2011 09:50 AM, Luca Sigfrido Percich scrisse:
> Hi Max,
> 
> have you tried
> 
> ogr2ogr -t_srs EPSG:4326 -f "one of many formats" outputfile myshape.shp
> 
> As ogrinfo recognizes the source shape CS (I guess it has a .prj file
> associated with it), you should only transform (-t_srs) into the
> destination CS.

The problem is that the .prj file is incorrect or not complete, so
ogr2ogr guess is wrong.
I tried many intermediate conversions to no avail.

I will ask to create a new shape with the correct .prj and format.

Thank you
	maxx
From sigfrido at tiscali.it  Wed Oct 12 06:10:58 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Wed Oct 12 16:53:08 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
In-Reply-To: <4E955EE3.8090606@tiscalinet.it>
References: <4E92B78F.6090206@tiscalinet.it> <1318319413.2262.2.camel@GOLEM>
	<4E955EE3.8090606@tiscalinet.it>
Message-ID: <1318414258.2382.20.camel@GOLEM>

Yes, in that case you need to store in a file the WKT implementation of
the CS and add the -s_srs "file.prj" option.

Before doing this, have you tried -s_srs EPSG:4806 ?

http://spatialreference.org/ref/epsg/4806/

It uses international 1924 and not Rome 1940 spheroid, though.

Sig


Il giorno mer, 12/10/2011 alle 11.33 +0200, emmexx ha scritto:
> Il 10/11/2011 09:50 AM, Luca Sigfrido Percich scrisse:
> > Hi Max,
> > 
> > have you tried
> > 
> > ogr2ogr -t_srs EPSG:4326 -f "one of many formats" outputfile myshape.shp
> > 
> > As ogrinfo recognizes the source shape CS (I guess it has a .prj file
> > associated with it), you should only transform (-t_srs) into the
> > destination CS.
> 
> The problem is that the .prj file is incorrect or not complete, so
> ogr2ogr guess is wrong.
> I tried many intermediate conversions to no avail.
> 
> I will ask to create a new shape with the correct .prj and format.
> 
> Thank you
> 	maxx


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From oliver.eichler at gmx.de  Wed Oct 12 06:11:57 2011
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Oct 12 16:54:08 2011
Subject: [gdal-dev] gdalwarp and transparent colors
Message-ID: <20111012101157.136180@gmx.net>

Hi,

if I use gdalwarp to convert a geotiff with nodata set into another one I get a bad result. The nodata value is not taken over and gdalwarp replaces these pixel with whatever colorindex it is. Example files can be found here: 

www.qlandkarte.org/files.tar.gz

f1.tif is the source and f2.tif the target. On the command line I did:

gdalwarp -t_srs EPSG:4326 -ts 983 1008 -co tiled=yes -co compress=LZW f1.tif f2.tif

Sure I know there -dstnodata. And if this would be a single job on the console I would simply use it. But the command line is executed from within an application and the application does not really know about if there is any nodata value in the source. 

I wonder why it's not simply copied with the color table? Do I miss the obvious? Don't tell me to call gdalinfo and to parse it's output. Or to use the GDAL API to open the dataset just to get this information. I would like to avoid that kind of overhead if possible.

Thanks for help

Oliver
From emmexx at tiscalinet.it  Wed Oct 12 06:19:58 2011
From: emmexx at tiscalinet.it (emmexx)
Date: Wed Oct 12 17:02:34 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
In-Reply-To: <1318414258.2382.20.camel@GOLEM>
References: <4E92B78F.6090206@tiscalinet.it> <1318319413.2262.2.camel@GOLEM>
	<4E955EE3.8090606@tiscalinet.it> <1318414258.2382.20.camel@GOLEM>
Message-ID: <4E9569CE.6060203@tiscalinet.it>

Il 10/12/2011 12:10 PM, Luca Sigfrido Percich scrisse:
> Yes, in that case you need to store in a file the WKT implementation of
> the CS and add the -s_srs "file.prj" option.
> 
> Before doing this, have you tried -s_srs EPSG:4806 ?

I tried that to no avail.
The transformed coordinates are wrong.
Input (9, 45) output (21, 45)

Thank you anyway

	maxx
From sigfrido at tiscali.it  Wed Oct 12 07:14:13 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Wed Oct 12 17:59:45 2011
Subject: [gdal-dev] ogr2ogr: cartesian geographic coordinates problem
In-Reply-To: <4E9569CE.6060203@tiscalinet.it>
References: <4E92B78F.6090206@tiscalinet.it> <1318319413.2262.2.camel@GOLEM>
	<4E955EE3.8090606@tiscalinet.it> <1318414258.2382.20.camel@GOLEM>
	<4E9569CE.6060203@tiscalinet.it>
Message-ID: <1318418053.2382.24.camel@GOLEM>

Well, at least you can guess that the prime meridian is Greenwich and
not Rome.

Good luck!

Sig

Il giorno mer, 12/10/2011 alle 12.19 +0200, emmexx ha scritto:
> Il 10/12/2011 12:10 PM, Luca Sigfrido Percich scrisse:
> > Yes, in that case you need to store in a file the WKT implementation of
> > the CS and add the -s_srs "file.prj" option.
> > 
> > Before doing this, have you tried -s_srs EPSG:4806 ?
> 
> I tried that to no avail.
> The transformed coordinates are wrong.
> Input (9, 45) output (21, 45)
> 
> Thank you anyway
> 
> 	maxx


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From thomas.hirsch at statkart.no  Wed Oct 12 08:34:53 2011
From: thomas.hirsch at statkart.no (relet)
Date: Wed Oct 12 19:24:39 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1278931564694-5282431.post@n2.nabble.com>
References: <1278931564694-5282431.post@n2.nabble.com>
Message-ID: <1318422893791-6884804.post@n2.nabble.com>

Dear all,

Re: http://trac.osgeo.org/gdal/ticket/3638

The current version of the SOSI driver depends on a library called FYBA.
This library is about to be made open source under a MIT/X licence. That
means, we could legally include it fully in the SOSI driver, and I would
like to start a discussion whether that should be done.

As you can see in the ticket thread above, there are some technical
particularities: It's a library with a good bit of historic legacy. In
particular 
- code and documentation is mostly in Norwegian (it's a National geographic
standard)
- variable naming follows a different Hungarian notation variant
- it has a history of supporting various OS, was maintained for Windows
during some years, and runs now on Windows and Linux. It mostly uses its own
portability library. 

Still, I would like to make it as easy as possible for the user to actually
get a running ogr/sosi installation on their target system of choice. Having
this code available from the same source and integrated with their makefiles
seems a definite plus. 

We are willing to maintain the code base and ogr driver (as is), and will
update it along with changes in the standard (e.g. SOSI 4.5 with UTF-8
support is scheduled for the beginning of next year). 
(Contact me if you want to inspect the code. The official release has not
happened yet.)

How do you suggest to make the library accessible?

Best regards,
Thomas

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p6884804.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From traviskirstine at gmail.com  Wed Oct 12 08:46:49 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Oct 12 19:37:01 2011
Subject: [gdal-dev] gdal_fillnodata.py filling interior holes in RGB images
Message-ID: <CALtm4h3xxMFtZnAFyQQtOfupQL42Dai38zgNcVijt-HYTsVBog@mail.gmail.com>

I have some RGB orthophotos that have interior holes, typically 1
pixel.  Most of the images have "valid" nodata around the edges.  I
would like to fill the interior holes while maintaining the valid
nodata around the edges.  I have tried gdal_fillnodata.py but cannot
get the utility to return a multiband image and / or interpolate only
interior holes.

Any help would be much appreciated
From envenom.gm at gmail.com  Wed Oct 12 21:17:09 2011
From: envenom.gm at gmail.com (=?UTF-8?B?0JzQuNGF0LDQuNC7?=)
Date: Wed Oct 12 21:17:11 2011
Subject: [gdal-dev] Using gdal_translate to convert tiff 2 tiff with
	georeferencing
Message-ID: <4E2AD80C.40607@gmail.com>

Hello, everybody.
I have some images in TIFF format created in Photoshop. Also, I have 
georeferncing for each file in txt.
If I'm working with BMP files, then i have no problems - I can use this 
command line for example
gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm 
+zone=37 +datum=WGS84" "input.bmp" "output.tiff"
Also I have created additional  input.bpw file
2.00
0.00
0.00
-2.00
395276.00
6206467.00
I don't know the reason, but gdal_translate doesn't generate 
georeferencing without this input.bpw file.
But then I've tried to convert tiff without georeferencing 2 tiff with 
georeferencing using next command line
gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm 
+zone=37 +datum=WGS84" "input.tiff" "output.tiff"
Unfortunately, it doesn't work. It looks like gdal_translate is taking 
reference information from input TIFF and obviously there is nothing, 
because it was created in Photoshop. If I'm using TIFF created in 
GlobalMapper with georeferencing, then all works fine. How to solve this 
poblem?

From jrepetto at free.fr  Wed Oct 12 10:43:27 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Oct 12 21:40:08 2011
Subject: [gdal-dev] Using gdal_translate to convert tiff 2 tiff
	with	georeferencing
In-Reply-To: <4E2AD80C.40607@gmail.com>
References: <4E2AD80C.40607@gmail.com>
Message-ID: <4E95A78F.80800@free.fr>

Le 23/07/2011 16:17, ?????? a ?crit :
> Hello, everybody.
> I have some images in TIFF format created in Photoshop. Also, I have
> georeferncing for each file in txt.
> If I'm working with BMP files, then i have no problems - I can use this
> command line for example
> gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm
> +zone=37 +datum=WGS84" "input.bmp" "output.tiff"
> Also I have created additional input.bpw file
> 2.00
> 0.00
> 0.00
> -2.00
> 395276.00
> 6206467.00
> I don't know the reason, but gdal_translate doesn't generate
> georeferencing without this input.bpw file.

Alternatively, you can use the -a_ullr option of gdal_translate.

> But then I've tried to convert tiff without georeferencing 2 tiff with
> georeferencing using next command line
> gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm
> +zone=37 +datum=WGS84" "input.tiff" "output.tiff"
> Unfortunately, it doesn't work. It looks like gdal_translate is taking
> reference information from input TIFF and obviously there is nothing,
> because it was created in Photoshop. If I'm using TIFF created in
> GlobalMapper with georeferencing, then all works fine. How to solve this
> poblem?

You can use the -a_ullr option of gdal_translate, or create a .tfw file 
as you did for BMP files.

Jean-Claude

From RSyaoxin at hotmail.com  Wed Oct 12 12:02:24 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Wed Oct 12 23:03:10 2011
Subject: [gdal-dev] Cosmosky-med metadata and Gcps patch
Message-ID: <1318435344123-6885609.post@n2.nabble.com>

Hi,all
      Today,Alex Mantaut provided  a code which can get some Cosmosky-med
HDF5 file metadata and georeference(including Gcps).
      The patch: 
http://trac.osgeo.org/gdal/attachment/ticket/4160/hdf5_csk_111011.patch
http://trac.osgeo.org/gdal/attachment/ticket/4160/hdf5_csk_111011.patch     
      It is my pleasure that he sent me the source code.He put this patch
available to the public,and if you find any bugs, report them on the trac
ticket, they will help us improve the CSK support.
      Thanks!
      Best regards.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Cosmosky-med-metadata-and-Gcps-patch-tp6885609p6885609.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Wed Oct 12 13:00:02 2011
From: rush at winkey.org (Brian Case)
Date: Thu Oct 13 00:04:17 2011
Subject: [gdal-dev] gdal_fillnodata.py filling interior holes in RGB images
In-Reply-To: <CALtm4h3xxMFtZnAFyQQtOfupQL42Dai38zgNcVijt-HYTsVBog@mail.gmail.com>
References: <CALtm4h3xxMFtZnAFyQQtOfupQL42Dai38zgNcVijt-HYTsVBog@mail.gmail.com>
Message-ID: <1318438802.22118.35.camel@octopi>

Travis,

you have to run gdal_fillnodata on each band, then splice the outputs
back together.

if the nodata areas on the inside do not connect to the outside area you
could create an alpha band

### -color 0,0,0 assumes odata value of 0
nearblack -dstalpha -near 0 -nb 0 -setalpha -color 0,0,0 \
          myfile.tif -o mytmpfile.tif
gdal_translate -b 4 -of VRT mytmpfile.tif a.vrt

gdal_fillnodata.py -md 1 -b 1 myfile.tif r_filled.tif
gdal_fillnodata.py -md 1 -b 2 myfile.tif g_filled.tif
gdal_fillnodata.py -md 1 -b 3 myfile.tif b_filled.tif

gdalbuildvrt -resolution highest -separate filled.vrt \
             r_filled.tif g_filled.tif b_filled.tif a.vrt

if you want an rgba image use
gdal_translate filled.vrt filled.tif

otherwise for rgb with nodata use

### INIT_DEST=0 assumes nodata value of 0
gdalwarp -wo INIT_DEST=0 filled.vrt filled.tif

if your interior nodata areas connect to the outside nodata areas. I
don't know howto deal with that other than to just live with the extra
pixel around the outside of the valid data.

Brian


On Wed, 2011-10-12 at 08:46 -0400, Travis Kirstine wrote:
> I have some RGB orthophotos that have interior holes, typically 1
> pixel.  Most of the images have "valid" nodata around the edges.  I
> would like to fill the interior holes while maintaining the valid
> nodata around the edges.  I have tried gdal_fillnodata.py but cannot
> get the utility to return a multiband image and / or interpolate only
> interior holes.
> 
> Any help would be much appreciated
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From traviskirstine at gmail.com  Wed Oct 12 13:20:48 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu Oct 13 00:26:07 2011
Subject: [gdal-dev] gdal_fillnodata.py filling interior holes in RGB images
In-Reply-To: <1318438802.22118.35.camel@octopi>
References: <CALtm4h3xxMFtZnAFyQQtOfupQL42Dai38zgNcVijt-HYTsVBog@mail.gmail.com>
	<1318438802.22118.35.camel@octopi>
Message-ID: <CALtm4h0Xarp8Y749Dxsd6qWr6MNuwzbxJPWL2_PkbPiOjD2ZMQ@mail.gmail.com>

Thanks Brian,
I'll give it a try.

Regards

On 12 October 2011 13:00, Brian Case <rush@winkey.org> wrote:
> Travis,
>
> you have to run gdal_fillnodata on each band, then splice the outputs
> back together.
>
> if the nodata areas on the inside do not connect to the outside area you
> could create an alpha band
>
> ### -color 0,0,0 assumes odata value of 0
> nearblack -dstalpha -near 0 -nb 0 -setalpha -color 0,0,0 \
> ? ? ? ? ?myfile.tif -o mytmpfile.tif
> gdal_translate -b 4 -of VRT mytmpfile.tif a.vrt
>
> gdal_fillnodata.py -md 1 -b 1 myfile.tif r_filled.tif
> gdal_fillnodata.py -md 1 -b 2 myfile.tif g_filled.tif
> gdal_fillnodata.py -md 1 -b 3 myfile.tif b_filled.tif
>
> gdalbuildvrt -resolution highest -separate filled.vrt \
> ? ? ? ? ? ? r_filled.tif g_filled.tif b_filled.tif a.vrt
>
> if you want an rgba image use
> gdal_translate filled.vrt filled.tif
>
> otherwise for rgb with nodata use
>
> ### INIT_DEST=0 assumes nodata value of 0
> gdalwarp -wo INIT_DEST=0 filled.vrt filled.tif
>
> if your interior nodata areas connect to the outside nodata areas. I
> don't know howto deal with that other than to just live with the extra
> pixel around the outside of the valid data.
>
> Brian
>
>
> On Wed, 2011-10-12 at 08:46 -0400, Travis Kirstine wrote:
>> I have some RGB orthophotos that have interior holes, typically 1
>> pixel. ?Most of the images have "valid" nodata around the edges. ?I
>> would like to fill the interior holes while maintaining the valid
>> nodata around the edges. ?I have tried gdal_fillnodata.py but cannot
>> get the utility to return a multiband image and / or interpolate only
>> interior holes.
>>
>> Any help would be much appreciated
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From graeme at inetix.com.au  Wed Oct 12 21:02:11 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Thu Oct 13 08:31:58 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
Message-ID: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>

I'm trying out gdal_contour just to see what falls out of it as an
experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
then seems to hang.  I'm trying it on a relatively small DTM

The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
dtm_11072101.tif dtm-1m.shp"

and gdalinfo gives the following info  about the image
Driver: GTiff/GeoTIFF
Files: dtm_11072101.tif
      dtm_11072101.tfw
Size is 1000, 2500
Coordinate System is `'
Origin = (488000.000000000000000,7198000.000000000000000)
Pixel Size = (2.000000000000000,-2.000000000000000)
Metadata:
 TIFFTAG_XRESOLUTION=200
 TIFFTAG_YRESOLUTION=200
 TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  488000.000, 7198000.000)
Lower Left  (  488000.000, 7193000.000)
Upper Right (  490000.000, 7198000.000)
Lower Right (  490000.000, 7193000.000)
Center      (  489000.000, 7195500.000)
Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray

I admit I'm at a loss as to how to proceed/troubleshoot so any
pointers gratefully received. I tried popping it through
gdal_translate to add a projection but it seems to have the same issue

Cheers,
 Graeme
From jzl5325 at psu.edu  Wed Oct 12 22:05:02 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Oct 13 09:38:20 2011
Subject: [gdal-dev] GTiff INTERLEAVE=BAND
Message-ID: <CA+bfmPtR0+sDFFN+aMyatoCfMSaPyARxzk3H_SS-C5HjQtJ+ZA@mail.gmail.com>

I have a series of raster images (GTiff) that are causing ArcMap10 to hang.
 After trying a number of different things (32bit to 8bit, translate to
another format, compression, tiling, etc.) I suspect that the issue could be
with the interleave.  Gdalinfo shows that INTERLEAVE=BAND.  The GTiff driver
suggests that some programs can not handle band and require pixel.  I have
tried the following, but have been unable to get interleave set to pixel.
 Ideas?

gdal_translate -of GTiff -ot Byte -co COMPRESS=LZW -co INTERLEAVE=PIXEL
<input.tif> <output.tif>

Thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111012/b209c5ea/attachment.html
From chaitanya.ch at gmail.com  Thu Oct 13 00:56:14 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 13 12:39:01 2011
Subject: [gdal-dev] GTiff INTERLEAVE=BAND
In-Reply-To: <CA+bfmPtR0+sDFFN+aMyatoCfMSaPyARxzk3H_SS-C5HjQtJ+ZA@mail.gmail.com>
References: <CA+bfmPtR0+sDFFN+aMyatoCfMSaPyARxzk3H_SS-C5HjQtJ+ZA@mail.gmail.com>
Message-ID: <CAMKgpOYxtZoh0PEWPDhPb1GLA7HRTGCiud1Qf0c11zZ4Sbz1LQ@mail.gmail.com>

Jay,

Can you provide a small sample image that shows this problem?

On Thu, Oct 13, 2011 at 7:35 AM, Jay L. <jzl5325@psu.edu> wrote:

> I have a series of raster images (GTiff) that are causing ArcMap10 to hang.
>  After trying a number of different things (32bit to 8bit, translate to
> another format, compression, tiling, etc.) I suspect that the issue could be
> with the interleave.  Gdalinfo shows that INTERLEAVE=BAND.  The GTiff driver
> suggests that some programs can not handle band and require pixel.  I have
> tried the following, but have been unable to get interleave set to pixel.
>  Ideas?
>
> gdal_translate -of GTiff -ot Byte -co COMPRESS=LZW -co INTERLEAVE=PIXEL
> <input.tif> <output.tif>
>
> Thanks,
> Jay
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111013/04c66c0a/attachment.html
From chaitanya.ch at gmail.com  Thu Oct 13 01:03:08 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 13 12:46:17 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
Message-ID: <CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>

Graeme,

Can you try again with a much larger interval?

On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au>wrote:

> I'm trying out gdal_contour just to see what falls out of it as an
> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
> then seems to hang.  I'm trying it on a relatively small DTM
>
> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
> dtm_11072101.tif dtm-1m.shp"
>
> and gdalinfo gives the following info  about the image
> Driver: GTiff/GeoTIFF
> Files: dtm_11072101.tif
>      dtm_11072101.tfw
> Size is 1000, 2500
> Coordinate System is `'
> Origin = (488000.000000000000000,7198000.000000000000000)
> Pixel Size = (2.000000000000000,-2.000000000000000)
> Metadata:
>  TIFFTAG_XRESOLUTION=200
>  TIFFTAG_YRESOLUTION=200
>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  488000.000, 7198000.000)
> Lower Left  (  488000.000, 7193000.000)
> Upper Right (  490000.000, 7198000.000)
> Lower Right (  490000.000, 7193000.000)
> Center      (  489000.000, 7195500.000)
> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>
> I admit I'm at a loss as to how to proceed/troubleshoot so any
> pointers gratefully received. I tried popping it through
> gdal_translate to add a projection but it seems to have the same issue
>
> Cheers,
>  Graeme
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111013/67f8a3c4/attachment.html
From sigfrido at tiscali.it  Thu Oct 13 04:49:53 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu Oct 13 16:45:19 2011
Subject: [gdal-dev] ogr2ogr problem with DECIMAL big int columns
Message-ID: <1318495793.2227.39.camel@GOLEM>

Hi all,

I'm trying to convert with ogr2ogr a shapefile having a decimal(15,0) ID
column containig very long integer unique IDs (for example,
113800200319004)
For whom it may concern, it is a TeleAtlas MultiNet file.

When converting to shapefile, I get the same column type in out.shp -
decimal(15, 0) - but all the values are truncated to the lowest long
integer, -2147483648, so it looks like a conversion to long integer is
taking place somewhere:

ogr2ogr -s_srs EPSG:4326 -t_srs EPSG:3003 -f "ESRI Shapefile"
test/out.shp in.shp

When converting to MapInfo TAB, the column is converted to Float (8
bytes), which could lead to loss of information when the number is
really big and thus gets approximated when stored in floating point
format:

ogr2ogr -s_srs EPSG:4326 -t_srs EPSG:3003 -f "MapInfo file" test/out.tab
in.shp

Please note that MapInfo supports the Decimal column type, so a straight
type mapping should be implemented.

I tried the -fieldTypeToString option, which in this case could do the
trick, but the "decimal" type is not supported:

> Unhandled type for fieldtypeasstring option : decimal

It works fine with the "real" type, though:

ogr2ogr -fieldTypeToString real -s_srs EPSG:4326 -t_srs EPSG:3003 -f
"MapInfo file" test/out.tab in.shp

but all the decimal and real columns are converted into character, which
is a negative but not critical drawback.

Should I open a ticket? Or could you suggest a workaround other than
converting all floating point columns to char?

Thank you in advance

Sig

_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

-- 
This email was Anti Virus checked by Astaro Security Gateway. http://www.amat-mi.it
From traviskirstine at gmail.com  Thu Oct 13 10:02:24 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu Oct 13 22:22:47 2011
Subject: [gdal-dev] gdal_fillnodata.py filling interior holes in RGB images
In-Reply-To: <CALtm4h0Xarp8Y749Dxsd6qWr6MNuwzbxJPWL2_PkbPiOjD2ZMQ@mail.gmail.com>
References: <CALtm4h3xxMFtZnAFyQQtOfupQL42Dai38zgNcVijt-HYTsVBog@mail.gmail.com>
	<1318438802.22118.35.camel@octopi>
	<CALtm4h0Xarp8Y749Dxsd6qWr6MNuwzbxJPWL2_PkbPiOjD2ZMQ@mail.gmail.com>
Message-ID: <CALtm4h0cpS5aCeY8TAc+2s0qUC0q_O87sKraoha-wp_nT4rYkQ@mail.gmail.com>

Brian,

Thanks for your help, I had to switch up some of the commands to get
it to work.  This is what I did:

# merge all the tiles
gdalwarp -co TILED=YES -dstnodata 0 1000m/*.tif merged.tif

# create a mask file for nodata at the edge of the image
nearblack -near 0 -nb 0 -setmask -setalpha merged.tif -o mask.tif

# grab the mask band as a vrt
gdal_translate -of VRT -b 4 mask.tif mask.vrt

# fill holes for each band
gdal_fillnodata.py -md 1 -b 1 merged.tif r.tif
gdal_fillnodata.py -md 1 -b 2 merged.tif g.tif
gdal_fillnodata.py -md 1 -b 3 merged.tif b.tif

# recombine the bands with the mask
gdalbuildvrt -resolution highest -separate rgba.vrt r.tif g.tif b.tif mask.vrt

# convert to 3 band image with external mask file
gdal_translate -of GTiff -mask 4 -b 1 -b 2 -b 3 rgba.vrt rgb.tif

# convert the fill to rgb with mask applied
gdalwarp -co TILED=YES -dstnodata 0,0,0 -wo INIT_DEST=0 rgb.vrt final.tif

I may have a extra step in there but it works.  In the method you had
recommended the last gdalwarp command failed to recognize the 4th band
as a mask


Regards



On 12 October 2011 13:20, Travis Kirstine <traviskirstine@gmail.com> wrote:
> Thanks Brian,
> I'll give it a try.
>
> Regards
>
> On 12 October 2011 13:00, Brian Case <rush@winkey.org> wrote:
>> Travis,
>>
>> you have to run gdal_fillnodata on each band, then splice the outputs
>> back together.
>>
>> if the nodata areas on the inside do not connect to the outside area you
>> could create an alpha band
>>
>> ### -color 0,0,0 assumes odata value of 0
>> nearblack -dstalpha -near 0 -nb 0 -setalpha -color 0,0,0 \
>> ? ? ? ? ?myfile.tif -o mytmpfile.tif
>> gdal_translate -b 4 -of VRT mytmpfile.tif a.vrt
>>
>> gdal_fillnodata.py -md 1 -b 1 myfile.tif r_filled.tif
>> gdal_fillnodata.py -md 1 -b 2 myfile.tif g_filled.tif
>> gdal_fillnodata.py -md 1 -b 3 myfile.tif b_filled.tif
>>
>> gdalbuildvrt -resolution highest -separate filled.vrt \
>> ? ? ? ? ? ? r_filled.tif g_filled.tif b_filled.tif a.vrt
>>
>> if you want an rgba image use
>> gdal_translate filled.vrt filled.tif
>>
>> otherwise for rgb with nodata use
>>
>> ### INIT_DEST=0 assumes nodata value of 0
>> gdalwarp -wo INIT_DEST=0 filled.vrt filled.tif
>>
>> if your interior nodata areas connect to the outside nodata areas. I
>> don't know howto deal with that other than to just live with the extra
>> pixel around the outside of the valid data.
>>
>> Brian
>>
>>
>> On Wed, 2011-10-12 at 08:46 -0400, Travis Kirstine wrote:
>>> I have some RGB orthophotos that have interior holes, typically 1
>>> pixel. ?Most of the images have "valid" nodata around the edges. ?I
>>> would like to fill the interior holes while maintaining the valid
>>> nodata around the edges. ?I have tried gdal_fillnodata.py but cannot
>>> get the utility to return a multiband image and / or interpolate only
>>> interior holes.
>>>
>>> Any help would be much appreciated
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
From jorge.arevalo at deimos-space.com  Thu Oct 13 13:45:04 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 14 02:11:15 2011
Subject: [gdal-dev] Border problem with gdal2tiles
Message-ID: <CAK29iX-kNJFjE_+5nEUCCCEVuyhQkXxR4tU+4O9-wd7eN=VPFw@mail.gmail.com>

Hello,

I'm executing gdal2tiles against 2 different TIFF files. Say
'image1.tiff' and 'image2.tiff'. Image1 size is 3.5 GB, and image2
size is 4.1 GB. Here, links to gdalinfo outputs applied to them:

image1: http://dl.dropbox.com/u/6599273/gdal/gdalinfo_output_image1.txt
image2: http://dl.dropbox.com/u/6599273/gdal/gdalinfo_output_image2.txt

As you can see in the corner coordinates, both images are in this situation:

http://dl.dropbox.com/u/6599273/gdal/images_schema.png

But when you execute gdal2tiles against one, and then gdal2tiles
against the other one, to generate google overlay tiles, they share a
small part. For example, both sets of tiles share a directory 14/8055.
And all the images of these directories are complementary:

image1. Directory 14/8055/10106.png:
http://dl.dropbox.com/u/6599273/gdal/image1_14_8055_10106.png
image2. Directory 14/8055/10106.png:
http://dl.dropbox.com/u/6599273/gdal/image2_14_8055_10106.png

Or graphically, something like this (sorry for the rusty schema, but I
think it shows my point):

http://dl.dropbox.com/u/6599273/gdal/images_schema2.png

Over the map, the problem is visually striking:

http://dl.dropbox.com/u/6599273/gdal/gdal2tiles_border_problem.png

The problem is the border tiles from image2 (geographically placed on
the right side) have their left parts (this is, the 128 pixels from
the left of each border tile) in blank, and they overwrote the border
tiles from image1. Otherwise, the tile 14/8055/10106.png belonging to
image2 overwrote the tile 14/8055/10106.png belonging to image1.

Of course, I could execute gdal2tiles against both images at same
time, constructing a VRT file first. That works fine. But I need to
make it work in the other way, executing gdal2tiles one time per
image, and putting all the tiles together.

One option, not related with GIS at all, could be constructing one
tile for each 2 overlapping tiles, taking the left part from one of
them, and the right part for the other one. But do you have a more
elegant option?

If you need more context or further explanations, don't hesitate to ask me.

Many thanks in advance, and best regards,

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From even.rouault at mines-paris.org  Thu Oct 13 15:36:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 14 04:08:14 2011
Subject: [gdal-dev] ogr2ogr problem with DECIMAL big int columns
In-Reply-To: <1318495793.2227.39.camel@GOLEM>
References: <1318495793.2227.39.camel@GOLEM>
Message-ID: <201110132136.09411.even.rouault@mines-paris.org>

Le jeudi 13 octobre 2011 10:49:53, Luca Sigfrido Percich a ?crit :
> Hi all,
> 
> I'm trying to convert with ogr2ogr a shapefile having a decimal(15,0) ID
> column containig very long integer unique IDs (for example,
> 113800200319004)
> For whom it may concern, it is a TeleAtlas MultiNet file.
> 
> When converting to shapefile, I get the same column type in out.shp -
> decimal(15, 0) - but all the values are truncated to the lowest long
> integer, -2147483648, so it looks like a conversion to long integer is
> taking place somewhere:
> 
> ogr2ogr -s_srs EPSG:4326 -t_srs EPSG:3003 -f "ESRI Shapefile"
> test/out.shp in.shp

Yes the lack of support for big integers is a well known problem. A RFC on 
that subject has been prepared some time a go ( 
http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 ) but has not been adopted nor 
implemented yet.

> 
> When converting to MapInfo TAB, the column is converted to Float (8
> bytes), which could lead to loss of information when the number is
> really big and thus gets approximated when stored in floating point
> format:
> 
> ogr2ogr -s_srs EPSG:4326 -t_srs EPSG:3003 -f "MapInfo file" test/out.tab
> in.shp
> 
> Please note that MapInfo supports the Decimal column type, so a straight
> type mapping should be implemented.

Remember that ogr2ogr never does direct translation from one format to another 
one, but uses the OGR data model as a pivot representation. So even when 2 
formats support a concept, but OGR does not, you cannot expect miracles from 
ogr2ogr.

> 
> I tried the -fieldTypeToString option, which in this case could do the
> 
> trick, but the "decimal" type is not supported:
> > Unhandled type for fieldtypeasstring option : decimal

Expected as documented in http://gdal.org/ogr2ogr.html :

"""
-fieldTypeToString type1, ...:
(starting with GDAL 1.7.0) converts any field of the specified type to a field of 
type string in the destination layer. Valid types are : Integer, Real, String, 
Date, Time, DateTime, Binary, IntegerList, RealList, StringList. Special value 
All can be used to convert all fields to strings. This is an alternate way to 
using the CAST operator of OGR SQL, that may avoid typing a long SQL query. 
"""

> 
> It works fine with the "real" type, though:
> 
> ogr2ogr -fieldTypeToString real -s_srs EPSG:4326 -t_srs EPSG:3003 -f
> "MapInfo file" test/out.tab in.shp
> 
> but all the decimal and real columns are converted into character, which
> is a negative but not critical drawback.
> 
> Should I open a ticket? 

This is probably the issue that has the biggest number of tickets, so no you 
don't need to file a new one ;-)

> Or could you suggest a workaround other than
> converting all floating point columns to char?

No, that's one of the main reason that justified adding -fieldTypeToString

> 
> Thank you in advance
> 
> Sig
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111013/386e2546/attachment-0001.html
From dbakeman at comcast.net  Thu Oct 13 18:47:18 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Fri Oct 14 07:30:39 2011
Subject: [gdal-dev] PostgreSQL problems
Message-ID: <4E976A76.2020902@comcast.net>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111013/e72ecb42/attachment.html
From sigfrido at tiscali.it  Thu Oct 13 18:54:17 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri Oct 14 07:42:14 2011
Subject: [gdal-dev] ogr2ogr problem with DECIMAL big int columns
In-Reply-To: <201110132136.09411.even.rouault@mines-paris.org>
References: <1318495793.2227.39.camel@GOLEM>
	<201110132136.09411.even.rouault@mines-paris.org>
Message-ID: <1318546457.2313.46.camel@GOLEM>

Even,

thank you very much for you explanation, which is clear and complete as
usual. I understand. The -fieldTypeToString workaround will be fine for
me until further OGR development or implementation of the rfc.

All the best

Sig

Il giorno gio, 13/10/2011 alle 21.36 +0200, Even Rouault ha scritto:

> Yes the lack of support for big integers is a well known problem. A
> RFC on that subject has been prepared some time a go
> ( http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 ) but has not been
> adopted nor implemented yet.
> 
> Remember that ogr2ogr never does direct translation from one format to
> another one, but uses the OGR data model as a pivot representation. So
> even when 2 formats support a concept, but OGR does not, you cannot
> expect miracles from ogr2ogr.
> 
> >
From KShannon at gcs-research.com  Thu Oct 13 18:50:50 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Oct 14 07:45:53 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E976A76.2020902@comcast.net>
References: <4E976A76.2020902@comcast.net>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA4599@MAIL.gcs-research.net>

Can you show us the output of the command? And also ogrinfo --formats

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of David J. Bakeman
Sent: Thursday, October 13, 2011 4:47 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] PostgreSQL problems

I'm sure I've done something stupid but I've googled for hours and haven't been able to figure this out.  Any help is greatly appreciated!

I'm on Fedora core 14 with gdal 1.7.3.

I setup postgre and created a spatial enabled database with a table that includes geometry.  I can connect using psql mydb.  However when I try ogrinfo -ro PG:dbname=mydb it fails saying no driver found. I'm not sure what's causing this because I can use psql mydb?  The user is my login I'm just using ident as my authentication method for local connections.

Any thoughts?

By the way I am able to use QGIS to connect to the db and display the table but I'd like to run some command line gdal tools.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111013/ab1dadb0/attachment.html
From mateusz at loskot.net  Thu Oct 13 19:05:31 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Oct 14 07:48:30 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E976A76.2020902@comcast.net>
References: <4E976A76.2020902@comcast.net>
Message-ID: <CABUeae--cu30CYrsBoLshzAkvVeqptem-EB+8GJ8AHkFUF7nGQ@mail.gmail.com>

On 13 October 2011 23:47, David J. Bakeman <dbakeman@comcast.net> wrote:
> I'm on Fedora core 14 with gdal 1.7.3.
>
> I setup postgre and created a spatial enabled database with a table that
> includes geometry.? I can connect using psql mydb.? However when I try
> ogrinfo -ro PG:dbname=mydb it fails saying no driver found.

ogrinfo --formats | grep -i post

and see if your GDAL/OGR installation has built-in PostgreSQL support.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From dbakeman at comcast.net  Thu Oct 13 20:10:02 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Fri Oct 14 08:56:35 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <CABUeae--cu30CYrsBoLshzAkvVeqptem-EB+8GJ8AHkFUF7nGQ@mail.gmail.com>
References: <4E976A76.2020902@comcast.net>
	<CABUeae--cu30CYrsBoLshzAkvVeqptem-EB+8GJ8AHkFUF7nGQ@mail.gmail.com>
Message-ID: <4E977DDA.6000206@comcast.net>

Mateusz ?oskot wrote:
> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>  wrote:
>    
>> I'm on Fedora core 14 with gdal 1.7.3.
>>
>> I setup postgre and created a spatial enabled database with a table that
>> includes geometry.  I can connect using psql mydb.  However when I try
>> ogrinfo -ro PG:dbname=mydb it fails saying no driver found.
>>      
> ogrinfo --formats | grep -i post
>    
-> "PostgreSQL" (read/write)

I really think it's some configuration thing but I don't know what it is?
> and see if your GDAL/OGR installation has built-in PostgreSQL support.
>
> Best regards,
>    

From eadam at co.lincoln.or.us  Thu Oct 13 20:51:22 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri Oct 14 09:40:04 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E977DDA.6000206@comcast.net>
References: <4E976A76.2020902@comcast.net>
	<CABUeae--cu30CYrsBoLshzAkvVeqptem-EB+8GJ8AHkFUF7nGQ@mail.gmail.com>
	<4E977DDA.6000206@comcast.net>
Message-ID: <CACqBkM-iq741yVYWRPyq_j7f7t+Sg4Pj683krFe3gwixz5A_Lg@mail.gmail.com>

David,

     It probably is a configuration or simple error, however, you've
not given much detail to let other people try to guess what it might
be.  Kyle asked for the output of your command.  Also, the exact
command (copied from terminal) may help too.  I looked at the OGR
PosrgreSQL/PostGIS format page and copied this:

PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'"

Could you try

ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x' password='y'"

from the host machine?

What do you get?

PostgreSQL requires very complex quoting if you have any CAPs, do you
have any caps in the db name, table, name, fieldname, etc?  With lack
of information, I'm making random guesses that may not be relevant.
I'm sure that if you provide detailed information, someone
knowledgeable will quickly help you (or at least that is what I often
observe on this list).

Bests, Eli

On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman <dbakeman@comcast.net> wrote:
> Mateusz ?oskot wrote:
>>
>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net> ?wrote:
>>
>>>
>>> I'm on Fedora core 14 with gdal 1.7.3.
>>>
>>> I setup postgre and created a spatial enabled database with a table that
>>> includes geometry. ?I can connect using psql mydb. ?However when I try
>>> ogrinfo -ro PG:dbname=mydb it fails saying no driver found.
>>>
>>
>> ogrinfo --formats | grep -i post
>>
>
> -> "PostgreSQL" (read/write)
>
> I really think it's some configuration thing but I don't know what it is?
>>
>> and see if your GDAL/OGR installation has built-in PostgreSQL support.
>>
>> Best regards,
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mohammedrashadkm at gmail.com  Fri Oct 14 01:44:32 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Oct 14 14:50:28 2011
Subject: [gdal-dev] GDAL Javascript
Message-ID: <CANNqv9fokuOp5Crp-QO=Y+bf3iMsXoV8w_3SbgLO5R-tsBFo9w@mail.gmail.com>

Hi All,

how can I use OGR to read shapefile using JavaScript
Is this possible?

If yes please tell me how.

-- 
Regards,
   Mohammed Rashad K M
   M.S. (By Research) student
   Lab for Spatial Informatics
   Department of CSE
   International Institute of Information Technology
   Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111014/827ea868/attachment.html
From jorge.arevalo at deimos-space.com  Fri Oct 14 05:00:53 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 14 18:17:45 2011
Subject: [gdal-dev] Using gdal_translate to convert tiff 2 tiff with
	georeferencing
In-Reply-To: <4E95A78F.80800@free.fr>
References: <4E2AD80C.40607@gmail.com> <4E95A78F.80800@free.fr>
Message-ID: <CAK29iX9ik-nQnzzLLJ5hD6UgFdxgiphUB9+Cpn5PfdPt1G-NOQ@mail.gmail.com>

Hello,

On Wed, Oct 12, 2011 at 4:43 PM, Jean-Claude Repetto <jrepetto@free.fr> wrote:
> Le 23/07/2011 16:17, ?????? a ?crit :
>>
>> Hello, everybody.
>> I have some images in TIFF format created in Photoshop. Also, I have
>> georeferncing for each file in txt.
>> If I'm working with BMP files, then i have no problems - I can use this
>> command line for example
>> gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm
>> +zone=37 +datum=WGS84" "input.bmp" "output.tiff"
>> Also I have created additional input.bpw file
>> 2.00
>> 0.00
>> 0.00
>> -2.00
>> 395276.00
>> 6206467.00
>> I don't know the reason, but gdal_translate doesn't generate
>> georeferencing without this input.bpw file.
>
> Alternatively, you can use the -a_ullr option of gdal_translate.
>
>> But then I've tried to convert tiff without georeferencing 2 tiff with
>> georeferencing using next command line
>> gdal_translate -co COMPRESS=LZW -co JPEG_QUALITY=100 -a_srs "+proj=utm
>> +zone=37 +datum=WGS84" "input.tiff" "output.tiff"
>> Unfortunately, it doesn't work. It looks like gdal_translate is taking
>> reference information from input TIFF and obviously there is nothing,
>> because it was created in Photoshop. If I'm using TIFF created in
>> GlobalMapper with georeferencing, then all works fine. How to solve this
>> poblem?
>
> You can use the -a_ullr option of gdal_translate, or create a .tfw file as
> you did for BMP files.
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Did you try with -co TFW=YES option?

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From jorge.arevalo at deimos-space.com  Fri Oct 14 07:50:05 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 14 21:16:28 2011
Subject: [gdal-dev] GDAL Javascript
In-Reply-To: <CANNqv9fokuOp5Crp-QO=Y+bf3iMsXoV8w_3SbgLO5R-tsBFo9w@mail.gmail.com>
References: <CANNqv9fokuOp5Crp-QO=Y+bf3iMsXoV8w_3SbgLO5R-tsBFo9w@mail.gmail.com>
Message-ID: <CAK29iX_HLGnmCxQ1zFE2rvJ5h0RxnGpnK6Xce4S6B1JfQuOyQw@mail.gmail.com>

On Fri, Oct 14, 2011 at 7:44 AM, Mohammed Rashad
<mohammedrashadkm@gmail.com> wrote:
> Hi All,
> how can I use OGR to read shapefile using JavaScript
> Is this possible?
> If yes please tell me how.
>
> --
> Regards,
> ? ?Mohammed Rashad K M
> ? ?M.S. (By Research) student
> ? ?Lab for Spatial Informatics
> ? ?Department of CSE
> ? ?International Institute of Information Technology
> ? ?Hyderabad, India
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi,

You can use OpenLayers to read vector formats, like shapefiles. Take a
look at http://openlayers.org/dev/examples/

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From wouter.schaubroeck at gmail.com  Fri Oct 14 10:47:25 2011
From: wouter.schaubroeck at gmail.com (Wouter Schaubroeck)
Date: Sat Oct 15 00:23:24 2011
Subject: [gdal-dev] ArcSDE -> GeoTiff: Bit size calculation failed...
Message-ID: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>

Hey list,

I'm trying to convert a raster image in ArcSDE to a GeoTiff, but this
isn't working as expected. I'm getting the following error:

Bit size calculation failed...
SDE's length:16834 With bitmap length: 18529 Without bitmap length: 16834

The error is thrown in the following file:
sderasterband.cpp, at line 444

I've searched for this on google, but except for the source code,
nothing showed up. I've noticed that the first and last number are the
same, but according the source this isn't possible...

ArcSDE's stats are up to date, and I can see the image with ArcMap and
with GeoServer (with the SDE-jars).

What am I doing wrong here?

thx, Wouter
--
Wouter
http://blog.giswhat.be
From chaitanya.ch at gmail.com  Fri Oct 14 11:34:42 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Oct 15 01:13:08 2011
Subject: [gdal-dev] ArcSDE -> GeoTiff: Bit size calculation failed...
In-Reply-To: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>
References: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>
Message-ID: <CAMKgpObBCZzwHY4nBCY-kB0Q1xnG_H8YjtYi9L-e+PQix1JXHg@mail.gmail.com>

Wouter,

Which version of GDAL are you using?

On Fri, Oct 14, 2011 at 8:17 PM, Wouter Schaubroeck <
wouter.schaubroeck@gmail.com> wrote:

> Hey list,
>
> I'm trying to convert a raster image in ArcSDE to a GeoTiff, but this
> isn't working as expected. I'm getting the following error:
>
> Bit size calculation failed...
> SDE's length:16834 With bitmap length: 18529 Without bitmap length: 16834
>
> The error is thrown in the following file:
> sderasterband.cpp, at line 444
>
> I've searched for this on google, but except for the source code,
> nothing showed up. I've noticed that the first and last number are the
> same, but according the source this isn't possible...
>
> ArcSDE's stats are up to date, and I can see the image with ArcMap and
> with GeoServer (with the SDE-jars).
>
> What am I doing wrong here?
>
> thx, Wouter
> --
> Wouter
> http://blog.giswhat.be
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111014/744065d9/attachment.html
From hobu.inc at gmail.com  Fri Oct 14 12:04:20 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Sat Oct 15 01:44:26 2011
Subject: [gdal-dev] ArcSDE -> GeoTiff: Bit size calculation failed...
In-Reply-To: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>
References: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>
Message-ID: <2BB0E8E2-BC5F-4AEE-A76A-AFB4C079464A@gmail.com>


On Oct 14, 2011, at 9:47 AM, Wouter Schaubroeck wrote:
> Bit size calculation failed...
> SDE's length:16834 With bitmap length: 18529 Without bitmap length: 16834

Wouter,

I was the author of that code, but it has been a number of years since I've done anything with SDE. I believe it has to do with the fact that the raster layer you're reading from has a bitmask (bitmap) on it, and the SDE driver doesn't handle them.  The code probably needs to be updated to either disregard the mask, or handle it as a GDAL MaskBand.

Hope this helps,

Howard


From dbakeman at comcast.net  Fri Oct 14 15:04:12 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Sat Oct 15 04:53:45 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <CACqBkM-iq741yVYWRPyq_j7f7t+Sg4Pj683krFe3gwixz5A_Lg@mail.gmail.com>
References: <4E976A76.2020902@comcast.net>	<CABUeae--cu30CYrsBoLshzAkvVeqptem-EB+8GJ8AHkFUF7nGQ@mail.gmail.com>	<4E977DDA.6000206@comcast.net>
	<CACqBkM-iq741yVYWRPyq_j7f7t+Sg4Pj683krFe3gwixz5A_Lg@mail.gmail.com>
Message-ID: <4E9887AC.3070200@comcast.net>

Sorry I was trying to limit the bandwidth I used I figured it was 
probably something really stupid and someone would just say you forgot 
to XX :<;

Anyway this is a test database so it really is named mydb and I copied 
the ogrinfo command from the PostgreSQL driver page for OGR.  I checked 
before I started to confirm that the version of gdal I'm using supports 
Postgresql and the ogrinfo --formats prints -> "PostgreSQL" (read/write) 
so I believe that confirms it.
so both ogrinfo -ro PG:'dbname=mydb' and ogrinfo -ro PG:"dbname='mydb'" 
and ogrinfo -ro PG:"dbname='mydb' user='dbakeman' port='5432'" return 
the same failure which is to print FAILURE: and a list of drivers which 
again includes postgresql.  I skipped the password part because I'm on a 
system where I'm happy to run the ident authentication locally at least.

Here's what happens if I do psql -d mydb

\d
                List of relations
  Schema |       Name        | Type  |  Owner
--------+-------------------+-------+----------
  public | geography_columns | view  | dbakeman
  public | geometry_columns  | table | dbakeman
  public | products_swordxml | table | dbakeman
  public | pxml_points       | view  | dbakeman
  public | spatial_ref_sys   | table | dbakeman
  public | sword_trap        | table | dbakeman

Which is a list of the tables I've created.
Eli Adam wrote:
> David,
>
>       It probably is a configuration or simple error, however, you've
> not given much detail to let other people try to guess what it might
> be.  Kyle asked for the output of your command.  Also, the exact
> command (copied from terminal) may help too.  I looked at the OGR
> PosrgreSQL/PostGIS format page and copied this:
>
> PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'"
>
> Could you try
>
> ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x' password='y'"
>
> from the host machine?
>
> What do you get?
>
> PostgreSQL requires very complex quoting if you have any CAPs, do you
> have any caps in the db name, table, name, fieldname, etc?  With lack
> of information, I'm making random guesses that may not be relevant.
> I'm sure that if you provide detailed information, someone
> knowledgeable will quickly help you (or at least that is what I often
> observe on this list).
>
> Bests, Eli
>
> On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman<dbakeman@comcast.net>  wrote:
>    
>> Mateusz ?oskot wrote:
>>      
>>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>    wrote:
>>>
>>>        
>>>> I'm on Fedora core 14 with gdal 1.7.3.
>>>>
>>>> I setup postgre and created a spatial enabled database with a table that
>>>> includes geometry.  I can connect using psql mydb.  However when I try
>>>> ogrinfo -ro PG:dbname=mydb it fails saying no driver found.
>>>>
>>>>          
>>> ogrinfo --formats | grep -i post
>>>
>>>        
>> ->  "PostgreSQL" (read/write)
>>
>> I really think it's some configuration thing but I don't know what it is?
>>      
>>> and see if your GDAL/OGR installation has built-in PostgreSQL support.
>>>
>>> Best regards,
>>>
>>>        
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>      
>    

From even.rouault at mines-paris.org  Fri Oct 14 15:11:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 15 05:00:55 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E9887AC.3070200@comcast.net>
References: <4E976A76.2020902@comcast.net>
	<CACqBkM-iq741yVYWRPyq_j7f7t+Sg4Pj683krFe3gwixz5A_Lg@mail.gmail.com>
	<4E9887AC.3070200@comcast.net>
Message-ID: <201110142111.12654.even.rouault@mines-paris.org>

Le vendredi 14 octobre 2011 21:04:12, David J. Bakeman a ?crit :

Try  ogrinfo --debug on  -ro PG:'dbname=mydb' 

and see  if something interesting shows up (and post the output to the list if 
you don't find the solution by yourself)

It is really weird that it works with QGIS but not with OGR. That eliminates 
the usual suspects, like insufficient rights on the postgis "system" tables 
(geometry_columns, spatial_ref_sys), as a cause for the failure.

> Sorry I was trying to limit the bandwidth I used I figured it was
> probably something really stupid and someone would just say you forgot
> to XX :<;
> 
> Anyway this is a test database so it really is named mydb and I copied
> the ogrinfo command from the PostgreSQL driver page for OGR.  I checked
> before I started to confirm that the version of gdal I'm using supports
> Postgresql and the ogrinfo --formats prints -> "PostgreSQL" (read/write)
> so I believe that confirms it.
> so both ogrinfo -ro PG:'dbname=mydb' and ogrinfo -ro PG:"dbname='mydb'"
> and ogrinfo -ro PG:"dbname='mydb' user='dbakeman' port='5432'" return
> the same failure which is to print FAILURE: and a list of drivers which
> again includes postgresql.  I skipped the password part because I'm on a
> system where I'm happy to run the ident authentication locally at least.
> 
> Here's what happens if I do psql -d mydb
> 
> \d
>                 List of relations
>   Schema |       Name        | Type  |  Owner
> --------+-------------------+-------+----------
>   public | geography_columns | view  | dbakeman
>   public | geometry_columns  | table | dbakeman
>   public | products_swordxml | table | dbakeman
>   public | pxml_points       | view  | dbakeman
>   public | spatial_ref_sys   | table | dbakeman
>   public | sword_trap        | table | dbakeman
> 
> Which is a list of the tables I've created.
> 
> Eli Adam wrote:
> > David,
> > 
> >       It probably is a configuration or simple error, however, you've
> > 
> > not given much detail to let other people try to guess what it might
> > be.  Kyle asked for the output of your command.  Also, the exact
> > command (copied from terminal) may help too.  I looked at the OGR
> > PosrgreSQL/PostGIS format page and copied this:
> > 
> > PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'"
> > 
> > Could you try
> > 
> > ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x'
> > password='y'"
> > 
> > from the host machine?
> > 
> > What do you get?
> > 
> > PostgreSQL requires very complex quoting if you have any CAPs, do you
> > have any caps in the db name, table, name, fieldname, etc?  With lack
> > of information, I'm making random guesses that may not be relevant.
> > I'm sure that if you provide detailed information, someone
> > knowledgeable will quickly help you (or at least that is what I often
> > observe on this list).
> > 
> > Bests, Eli
> > 
> > On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman<dbakeman@comcast.net>  
wrote:
> >> Mateusz ?oskot wrote:
> >>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>    
wrote:
> >>>> I'm on Fedora core 14 with gdal 1.7.3.
> >>>> 
> >>>> I setup postgre and created a spatial enabled database with a table
> >>>> that includes geometry.  I can connect using psql mydb.  However when
> >>>> I try ogrinfo -ro PG:dbname=mydb it fails saying no driver found.
> >>> 
> >>> ogrinfo --formats | grep -i post
> >> 
> >> ->  "PostgreSQL" (read/write)
> >> 
> >> I really think it's some configuration thing but I don't know what it
> >> is?
> >> 
> >>> and see if your GDAL/OGR installation has built-in PostgreSQL support.
> >>> 
> >>> Best regards,
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dbakeman at comcast.net  Fri Oct 14 16:57:32 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Sat Oct 15 06:52:53 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <201110142111.12654.even.rouault@mines-paris.org>
References: <4E976A76.2020902@comcast.net>
	<CACqBkM-iq741yVYWRPyq_j7f7t+Sg4Pj683krFe3gwixz5A_Lg@mail.gmail.com>
	<4E9887AC.3070200@comcast.net>
	<201110142111.12654.even.rouault@mines-paris.org>
Message-ID: <4E98A23C.5070702@comcast.net>

Even Rouault wrote:
> Le vendredi 14 octobre 2011 21:04:12, David J. Bakeman a ?crit :
>
> Try  ogrinfo --debug on  -ro PG:'dbname=mydb'
>    
OK I am totally confused now here is the output:
ogrinfo --debug -ro PG:'dbname=mydb'
INFO: Open of `PG:dbname=mydb'
       using driver `PostgreSQL' successful.

That's all though?  I expected it to give a list of the layers as it 
says in the driver docs.

By the way without the --debug it still says FAILURE: and list all of 
the drivers????
> and see  if something interesting shows up (and post the output to the list if
> you don't find the solution by yourself)
>
> It is really weird that it works with QGIS but not with OGR. That eliminates
> the usual suspects, like insufficient rights on the postgis "system" tables
> (geometry_columns, spatial_ref_sys), as a cause for the failure.
>
>    
>> Sorry I was trying to limit the bandwidth I used I figured it was
>> probably something really stupid and someone would just say you forgot
>> to XX :<;
>>
>> Anyway this is a test database so it really is named mydb and I copied
>> the ogrinfo command from the PostgreSQL driver page for OGR.  I checked
>> before I started to confirm that the version of gdal I'm using supports
>> Postgresql and the ogrinfo --formats prints ->  "PostgreSQL" (read/write)
>> so I believe that confirms it.
>> so both ogrinfo -ro PG:'dbname=mydb' and ogrinfo -ro PG:"dbname='mydb'"
>> and ogrinfo -ro PG:"dbname='mydb' user='dbakeman' port='5432'" return
>> the same failure which is to print FAILURE: and a list of drivers which
>> again includes postgresql.  I skipped the password part because I'm on a
>> system where I'm happy to run the ident authentication locally at least.
>>
>> Here's what happens if I do psql -d mydb
>>
>> \d
>>                  List of relations
>>    Schema |       Name        | Type  |  Owner
>> --------+-------------------+-------+----------
>>    public | geography_columns | view  | dbakeman
>>    public | geometry_columns  | table | dbakeman
>>    public | products_swordxml | table | dbakeman
>>    public | pxml_points       | view  | dbakeman
>>    public | spatial_ref_sys   | table | dbakeman
>>    public | sword_trap        | table | dbakeman
>>
>> Which is a list of the tables I've created.
>>
>> Eli Adam wrote:
>>      
>>> David,
>>>
>>>        It probably is a configuration or simple error, however, you've
>>>
>>> not given much detail to let other people try to guess what it might
>>> be.  Kyle asked for the output of your command.  Also, the exact
>>> command (copied from terminal) may help too.  I looked at the OGR
>>> PosrgreSQL/PostGIS format page and copied this:
>>>
>>> PG:"dbname='databasename' host='addr' port='5432' user='x' password='y'"
>>>
>>> Could you try
>>>
>>> ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x'
>>> password='y'"
>>>
>>> from the host machine?
>>>
>>> What do you get?
>>>
>>> PostgreSQL requires very complex quoting if you have any CAPs, do you
>>> have any caps in the db name, table, name, fieldname, etc?  With lack
>>> of information, I'm making random guesses that may not be relevant.
>>> I'm sure that if you provide detailed information, someone
>>> knowledgeable will quickly help you (or at least that is what I often
>>> observe on this list).
>>>
>>> Bests, Eli
>>>
>>> On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman<dbakeman@comcast.net>
>>>        
> wrote:
>    
>>>> Mateusz ?oskot wrote:
>>>>          
>>>>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>
>>>>>            
> wrote:
>    
>>>>>> I'm on Fedora core 14 with gdal 1.7.3.
>>>>>>
>>>>>> I setup postgre and created a spatial enabled database with a table
>>>>>> that includes geometry.  I can connect using psql mydb.  However when
>>>>>> I try ogrinfo -ro PG:dbname=mydb it fails saying no driver found.
>>>>>>              
>>>>> ogrinfo --formats | grep -i post
>>>>>            
>>>> ->   "PostgreSQL" (read/write)
>>>>
>>>> I really think it's some configuration thing but I don't know what it
>>>> is?
>>>>
>>>>          
>>>>> and see if your GDAL/OGR installation has built-in PostgreSQL support.
>>>>>
>>>>> Best regards,
>>>>>            
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>          
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
>    

From even.rouault at mines-paris.org  Fri Oct 14 17:17:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 15 07:13:31 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E98A23C.5070702@comcast.net>
References: <4E976A76.2020902@comcast.net>
	<201110142111.12654.even.rouault@mines-paris.org>
	<4E98A23C.5070702@comcast.net>
Message-ID: <201110142317.06109.even.rouault@mines-paris.org>

Le vendredi 14 octobre 2011 22:57:32, David J. Bakeman a ?crit :
> Even Rouault wrote:
> > Le vendredi 14 octobre 2011 21:04:12, David J. Bakeman a ?crit :
> > 
> > Try  ogrinfo --debug on  -ro PG:'dbname=mydb'
> 
> OK I am totally confused now here is the output:
> ogrinfo --debug -ro PG:'dbname=mydb'
> INFO: Open of `PG:dbname=mydb'
>        using driver `PostgreSQL' successful.

I asked for "--debug on", not just "--debug". The latter will not work as a 
debugging option : it will "eat" the following -ro.

So basically, it is as if you had type ogrinfo PG:'dbname=mydb' without the -
ro option, so in update mode

But that's interesting. Because actually when the PG driver cannot find any 
Postgis layer in a database opened as read-only, it returns as if there was an 
error (that behaviour might be discussed). Whereas when you open in update 
mode, it succeeds (the justification being that in update mode, you can create 
a new layer in an empty database).

All in all, it means that the driver doesn't recognize valid Postgis layers 
(that is to say tables who have a geometry column referenced in the 
geometry_column table) in your database.

You can try defining the environment variable PG_LIST_ALL_TABLES=YES as 
documented in http://gdal.org/ogr/drv_pg_advanced.html .

> 
> That's all though?  I expected it to give a list of the layers as it
> says in the driver docs.
> 
> By the way without the --debug it still says FAILURE: and list all of
> the drivers????
> 
> > and see  if something interesting shows up (and post the output to the
> > list if you don't find the solution by yourself)
> > 
> > It is really weird that it works with QGIS but not with OGR. That
> > eliminates the usual suspects, like insufficient rights on the postgis
> > "system" tables (geometry_columns, spatial_ref_sys), as a cause for the
> > failure.
> > 
> >> Sorry I was trying to limit the bandwidth I used I figured it was
> >> probably something really stupid and someone would just say you forgot
> >> to XX :<;
> >> 
> >> Anyway this is a test database so it really is named mydb and I copied
> >> the ogrinfo command from the PostgreSQL driver page for OGR.  I checked
> >> before I started to confirm that the version of gdal I'm using supports
> >> Postgresql and the ogrinfo --formats prints ->  "PostgreSQL"
> >> (read/write) so I believe that confirms it.
> >> so both ogrinfo -ro PG:'dbname=mydb' and ogrinfo -ro PG:"dbname='mydb'"
> >> and ogrinfo -ro PG:"dbname='mydb' user='dbakeman' port='5432'" return
> >> the same failure which is to print FAILURE: and a list of drivers which
> >> again includes postgresql.  I skipped the password part because I'm on a
> >> system where I'm happy to run the ident authentication locally at least.
> >> 
> >> Here's what happens if I do psql -d mydb
> >> 
> >> \d
> >> 
> >>                  List of relations
> >>    
> >>    Schema |       Name        | Type  |  Owner
> >> 
> >> --------+-------------------+-------+----------
> >> 
> >>    public | geography_columns | view  | dbakeman
> >>    public | geometry_columns  | table | dbakeman
> >>    public | products_swordxml | table | dbakeman
> >>    public | pxml_points       | view  | dbakeman
> >>    public | spatial_ref_sys   | table | dbakeman
> >>    public | sword_trap        | table | dbakeman
> >> 
> >> Which is a list of the tables I've created.
> >> 
> >> Eli Adam wrote:
> >>> David,
> >>> 
> >>>        It probably is a configuration or simple error, however, you've
> >>> 
> >>> not given much detail to let other people try to guess what it might
> >>> be.  Kyle asked for the output of your command.  Also, the exact
> >>> command (copied from terminal) may help too.  I looked at the OGR
> >>> PosrgreSQL/PostGIS format page and copied this:
> >>> 
> >>> PG:"dbname='databasename' host='addr' port='5432' user='x'
> >>> password='y'"
> >>> 
> >>> Could you try
> >>> 
> >>> ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x'
> >>> password='y'"
> >>> 
> >>> from the host machine?
> >>> 
> >>> What do you get?
> >>> 
> >>> PostgreSQL requires very complex quoting if you have any CAPs, do you
> >>> have any caps in the db name, table, name, fieldname, etc?  With lack
> >>> of information, I'm making random guesses that may not be relevant.
> >>> I'm sure that if you provide detailed information, someone
> >>> knowledgeable will quickly help you (or at least that is what I often
> >>> observe on this list).
> >>> 
> >>> Bests, Eli
> >>> 
> >>> On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman<dbakeman@comcast.net>
> > 
> > wrote:
> >>>> Mateusz ?oskot wrote:
> >>>>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>
> > 
> > wrote:
> >>>>>> I'm on Fedora core 14 with gdal 1.7.3.
> >>>>>> 
> >>>>>> I setup postgre and created a spatial enabled database with a table
> >>>>>> that includes geometry.  I can connect using psql mydb.  However
> >>>>>> when I try ogrinfo -ro PG:dbname=mydb it fails saying no driver
> >>>>>> found.
> >>>>> 
> >>>>> ogrinfo --formats | grep -i post
> >>>> 
> >>>> ->   "PostgreSQL" (read/write)
> >>>> 
> >>>> I really think it's some configuration thing but I don't know what it
> >>>> is?
> >>>> 
> >>>>> and see if your GDAL/OGR installation has built-in PostgreSQL
> >>>>> support.
> >>>>> 
> >>>>> Best regards,
> >>>> 
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dbakeman at comcast.net  Fri Oct 14 17:44:33 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Sat Oct 15 07:42:32 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <201110142317.06109.even.rouault@mines-paris.org>
References: <4E976A76.2020902@comcast.net>
	<201110142111.12654.even.rouault@mines-paris.org>
	<4E98A23C.5070702@comcast.net>
	<201110142317.06109.even.rouault@mines-paris.org>
Message-ID: <4E98AD41.6090406@comcast.net>

Even Rouault wrote:
> Le vendredi 14 octobre 2011 22:57:32, David J. Bakeman a ?crit :
>    
>> Even Rouault wrote:
>>      
>>> Le vendredi 14 octobre 2011 21:04:12, David J. Bakeman a ?crit :
>>>
>>> Try  ogrinfo --debug on  -ro PG:'dbname=mydb'
>>>        
>> OK I am totally confused now here is the output:
>> ogrinfo --debug -ro PG:'dbname=mydb'
>> INFO: Open of `PG:dbname=mydb'
>>         using driver `PostgreSQL' successful.
>>      
> I asked for "--debug on", not just "--debug". The latter will not work as a
> debugging option : it will "eat" the following -ro.
>
> So basically, it is as if you had type ogrinfo PG:'dbname=mydb' without the -
> ro option, so in update mode
>
> But that's interesting. Because actually when the PG driver cannot find any
> Postgis layer in a database opened as read-only, it returns as if there was an
> error (that behaviour might be discussed). Whereas when you open in update
> mode, it succeeds (the justification being that in update mode, you can create
> a new layer in an empty database).
>
> All in all, it means that the driver doesn't recognize valid Postgis layers
> (that is to say tables who have a geometry column referenced in the
> geometry_column table) in your database.
>
> You can try defining the environment variable PG_LIST_ALL_TABLES=YES as
> documented in http://gdal.org/ogr/drv_pg_advanced.html .
>    
OK now we are getting somewhere!  I did the following:

env PG_LIST_ALL_TABLES=YES ogrinfo --debug on PG:'dbname=mydb'
PG: DBName="mydb"
PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on 
x86_64-redhat-linux-gnu, compiled by GCC gcc (GCC) 4.5.1 20100924 (Red 
Hat 4.5.1-4), 64-bit'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Field f_table_name is of unknown format type name (type=name).
PG: Field f_table_catalog is of unknown format type name (type=name).
PG: Field f_table_schema is of unknown format type name (type=name).
PG: Field f_geography_column is of unknown format type name (type=name).
PG: Primary key name (FID): id
PG: Using column 'id' as FID for table 'products_swordxml'
OGR: OGROpen(PG:dbname=mydb/0xbd4940) succeeded as PostgreSQL.
INFO: Open of `PG:dbname=mydb'
       using driver `PostgreSQL' successful.
OGR: GetLayerCount() = 6

1: geography_columns (None)
2: products_swordxml (None)
3: pxml_points
4: sword_trap
5: sword_trap2
6: sword_trapz

Now I know the last 3 tables/layers do have geometry because I can 
display them in QGIS.

The original table products_swordxml was given to me as a mysql file and 
has no gemetry per se.
There are coordinates embedded in the table. So I did a create table as 
select *, geomfromtext etc
to get the geometry into geometry.  Could this be why ogr is not seeing 
it as geometry even though qgis does?
Or do the above unknown format type messages mean the mysql conversion I 
attempted has screwed something up?

I'm willing to do the work just hoping for a tip in the right direction.

Thanks you guys have already helped a bunch!
>    
>> That's all though?  I expected it to give a list of the layers as it
>> says in the driver docs.
>>
>> By the way without the --debug it still says FAILURE: and list all of
>> the drivers????
>>
>>      
>>> and see  if something interesting shows up (and post the output to the
>>> list if you don't find the solution by yourself)
>>>
>>> It is really weird that it works with QGIS but not with OGR. That
>>> eliminates the usual suspects, like insufficient rights on the postgis
>>> "system" tables (geometry_columns, spatial_ref_sys), as a cause for the
>>> failure.
>>>
>>>        
>>>> Sorry I was trying to limit the bandwidth I used I figured it was
>>>> probably something really stupid and someone would just say you forgot
>>>> to XX :<;
>>>>
>>>> Anyway this is a test database so it really is named mydb and I copied
>>>> the ogrinfo command from the PostgreSQL driver page for OGR.  I checked
>>>> before I started to confirm that the version of gdal I'm using supports
>>>> Postgresql and the ogrinfo --formats prints ->   "PostgreSQL"
>>>> (read/write) so I believe that confirms it.
>>>> so both ogrinfo -ro PG:'dbname=mydb' and ogrinfo -ro PG:"dbname='mydb'"
>>>> and ogrinfo -ro PG:"dbname='mydb' user='dbakeman' port='5432'" return
>>>> the same failure which is to print FAILURE: and a list of drivers which
>>>> again includes postgresql.  I skipped the password part because I'm on a
>>>> system where I'm happy to run the ident authentication locally at least.
>>>>
>>>> Here's what happens if I do psql -d mydb
>>>>
>>>> \d
>>>>
>>>>                   List of relations
>>>>
>>>>     Schema |       Name        | Type  |  Owner
>>>>
>>>> --------+-------------------+-------+----------
>>>>
>>>>     public | geography_columns | view  | dbakeman
>>>>     public | geometry_columns  | table | dbakeman
>>>>     public | products_swordxml | table | dbakeman
>>>>     public | pxml_points       | view  | dbakeman
>>>>     public | spatial_ref_sys   | table | dbakeman
>>>>     public | sword_trap        | table | dbakeman
>>>>
>>>> Which is a list of the tables I've created.
>>>>
>>>> Eli Adam wrote:
>>>>          
>>>>> David,
>>>>>
>>>>>         It probably is a configuration or simple error, however, you've
>>>>>
>>>>> not given much detail to let other people try to guess what it might
>>>>> be.  Kyle asked for the output of your command.  Also, the exact
>>>>> command (copied from terminal) may help too.  I looked at the OGR
>>>>> PosrgreSQL/PostGIS format page and copied this:
>>>>>
>>>>> PG:"dbname='databasename' host='addr' port='5432' user='x'
>>>>> password='y'"
>>>>>
>>>>> Could you try
>>>>>
>>>>> ogrinfo PG:"dbname='mydb' host='localhost' port='5432' user='x'
>>>>> password='y'"
>>>>>
>>>>> from the host machine?
>>>>>
>>>>> What do you get?
>>>>>
>>>>> PostgreSQL requires very complex quoting if you have any CAPs, do you
>>>>> have any caps in the db name, table, name, fieldname, etc?  With lack
>>>>> of information, I'm making random guesses that may not be relevant.
>>>>> I'm sure that if you provide detailed information, someone
>>>>> knowledgeable will quickly help you (or at least that is what I often
>>>>> observe on this list).
>>>>>
>>>>> Bests, Eli
>>>>>
>>>>> On Thu, Oct 13, 2011 at 5:10 PM, David J. Bakeman<dbakeman@comcast.net>
>>>>>            
>>> wrote:
>>>        
>>>>>> Mateusz ?oskot wrote:
>>>>>>              
>>>>>>> On 13 October 2011 23:47, David J. Bakeman<dbakeman@comcast.net>
>>>>>>>                
>>> wrote:
>>>        
>>>>>>>> I'm on Fedora core 14 with gdal 1.7.3.
>>>>>>>>
>>>>>>>> I setup postgre and created a spatial enabled database with a table
>>>>>>>> that includes geometry.  I can connect using psql mydb.  However
>>>>>>>> when I try ogrinfo -ro PG:dbname=mydb it fails saying no driver
>>>>>>>> found.
>>>>>>>>                  
>>>>>>> ogrinfo --formats | grep -i post
>>>>>>>                
>>>>>> ->    "PostgreSQL" (read/write)
>>>>>>
>>>>>> I really think it's some configuration thing but I don't know what it
>>>>>> is?
>>>>>>
>>>>>>              
>>>>>>> and see if your GDAL/OGR installation has built-in PostgreSQL
>>>>>>> support.
>>>>>>>
>>>>>>> Best regards,
>>>>>>>                
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>              
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>          
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
>    

From even.rouault at mines-paris.org  Fri Oct 14 17:59:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 15 07:58:30 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E98AD41.6090406@comcast.net>
References: <4E976A76.2020902@comcast.net>
	<201110142317.06109.even.rouault@mines-paris.org>
	<4E98AD41.6090406@comcast.net>
Message-ID: <201110142359.54704.even.rouault@mines-paris.org>

> OK now we are getting somewhere!  I did the following:
> 
> env PG_LIST_ALL_TABLES=YES ogrinfo --debug on PG:'dbname=mydb'
> PG: DBName="mydb"
> PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
> x86_64-redhat-linux-gnu, compiled by GCC gcc (GCC) 4.5.1 20100924 (Red
> Hat 4.5.1-4), 64-bit'
> PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
> PG: Field f_table_name is of unknown format type name (type=name).
> PG: Field f_table_catalog is of unknown format type name (type=name).
> PG: Field f_table_schema is of unknown format type name (type=name).
> PG: Field f_geography_column is of unknown format type name (type=name).
> PG: Primary key name (FID): id
> PG: Using column 'id' as FID for table 'products_swordxml'
> OGR: OGROpen(PG:dbname=mydb/0xbd4940) succeeded as PostgreSQL.
> INFO: Open of `PG:dbname=mydb'
>        using driver `PostgreSQL' successful.
> OGR: GetLayerCount() = 6
> 
> 1: geography_columns (None)
> 2: products_swordxml (None)
> 3: pxml_points
> 4: sword_trap
> 5: sword_trap2
> 6: sword_trapz
> 
> Now I know the last 3 tables/layers do have geometry because I can
> display them in QGIS.

I believe that now you should be able to display their content. 

The (none) behind the 2 first one means that OGR detects that they are indeed 
not spatial tables. The absence of it on the 4 last tables means that OGR 
detects a geometry column but cannot determine the precise geometry type : 
that is to say if its a point, line, polygon, etc... But that's OK.

So you could try "env PG_LIST_ALL_TABLES=YES ogrinfo PG:'dbname=mydb' 
pxml_points" and I believe you should see features with their geometry 
reported.

> 
> The original table products_swordxml was given to me as a mysql file and
> has no gemetry per se.
> There are coordinates embedded in the table. So I did a create table as
> select *, geomfromtext etc
> to get the geometry into geometry.  Could this be why ogr is not seeing
> it as geometry even though qgis does?

Hum, my guess is that the way you have created them did not register them in 
the geometry_columns table. OGR only lists by default spatial tables 
registered into that table.

So you could try adding manually an entry in geometry_columns for those tables 
with the appropriate SELECT AddGeometryColumn(....) statement. See PostGIS doc 
for that. After doing so, the PG_LIST_ALL_TABLES=YES will not be necessary.

From dbakeman at comcast.net  Fri Oct 14 18:51:01 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Sat Oct 15 08:52:42 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <201110142359.54704.even.rouault@mines-paris.org>
References: <4E976A76.2020902@comcast.net>
	<201110142317.06109.even.rouault@mines-paris.org>
	<4E98AD41.6090406@comcast.net>
	<201110142359.54704.even.rouault@mines-paris.org>
Message-ID: <4E98BCD5.9000003@comcast.net>

Thanks Even and everyone else who responded!  It was the fact that I had 
created the tables without registering the geometry column.  I did that 
and now things appear good to go!  That is ogrinfo is successful and 
lists the three tables with geometry.

Perhaps the normal user of ogr is aware that only geometry columns are 
listed and you get a FAILURE otherwise but perhaps an empty list would 
be better? So I would have gotten:
  INFO: Open of `PG:dbname=mydb'
       using driver `PostgreSQL' successful.

Instead of the FAILURE.  I know the structure of the software might not 
make this possible so maybe a Note in the driver page for PostgreSQL?

Even Rouault wrote:
>> OK now we are getting somewhere!  I did the following:
>>
>> env PG_LIST_ALL_TABLES=YES ogrinfo --debug on PG:'dbname=mydb'
>> PG: DBName="mydb"
>> PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
>> x86_64-redhat-linux-gnu, compiled by GCC gcc (GCC) 4.5.1 20100924 (Red
>> Hat 4.5.1-4), 64-bit'
>> PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>> PG: Field f_table_name is of unknown format type name (type=name).
>> PG: Field f_table_catalog is of unknown format type name (type=name).
>> PG: Field f_table_schema is of unknown format type name (type=name).
>> PG: Field f_geography_column is of unknown format type name (type=name).
>> PG: Primary key name (FID): id
>> PG: Using column 'id' as FID for table 'products_swordxml'
>> OGR: OGROpen(PG:dbname=mydb/0xbd4940) succeeded as PostgreSQL.
>> INFO: Open of `PG:dbname=mydb'
>>         using driver `PostgreSQL' successful.
>> OGR: GetLayerCount() = 6
>>
>> 1: geography_columns (None)
>> 2: products_swordxml (None)
>> 3: pxml_points
>> 4: sword_trap
>> 5: sword_trap2
>> 6: sword_trapz
>>
>> Now I know the last 3 tables/layers do have geometry because I can
>> display them in QGIS.
>>      
> I believe that now you should be able to display their content.
>
> The (none) behind the 2 first one means that OGR detects that they are indeed
> not spatial tables. The absence of it on the 4 last tables means that OGR
> detects a geometry column but cannot determine the precise geometry type :
> that is to say if its a point, line, polygon, etc... But that's OK.
>
> So you could try "env PG_LIST_ALL_TABLES=YES ogrinfo PG:'dbname=mydb'
> pxml_points" and I believe you should see features with their geometry
> reported.
>
>    
>> The original table products_swordxml was given to me as a mysql file and
>> has no gemetry per se.
>> There are coordinates embedded in the table. So I did a create table as
>> select *, geomfromtext etc
>> to get the geometry into geometry.  Could this be why ogr is not seeing
>> it as geometry even though qgis does?
>>      
> Hum, my guess is that the way you have created them did not register them in
> the geometry_columns table. OGR only lists by default spatial tables
> registered into that table.
>
> So you could try adding manually an entry in geometry_columns for those tables
> with the appropriate SELECT AddGeometryColumn(....) statement. See PostGIS doc
> for that. After doing so, the PG_LIST_ALL_TABLES=YES will not be necessary.
>
>
>    

From even.rouault at mines-paris.org  Sat Oct 15 03:50:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 15 18:21:25 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <4E98BCD5.9000003@comcast.net>
References: <4E976A76.2020902@comcast.net>
	<201110142359.54704.even.rouault@mines-paris.org>
	<4E98BCD5.9000003@comcast.net>
Message-ID: <201110150950.04729.even.rouault@mines-paris.org>

Le samedi 15 octobre 2011 00:51:01, David J. Bakeman a ?crit :
> Thanks Even and everyone else who responded!  It was the fact that I had
> created the tables without registering the geometry column.  I did that
> and now things appear good to go!  That is ogrinfo is successful and
> lists the three tables with geometry.
> 
> Perhaps the normal user of ogr is aware that only geometry columns are
> listed

In http://gdal.org/ogr/drv_pg.html,

"""If the geometry_columns table exists (i.e. PostGIS is enabled for the 
accessed database), then all tables and named views listed in the 
geometry_columns table will be treated as OGR layers."""

> and you get a FAILURE otherwise but perhaps an empty list would
> be better? So I would have gotten:
>   INFO: Open of `PG:dbname=mydb'
>        using driver `PostgreSQL' successful.
> 
> Instead of the FAILURE.  I know the structure of the software might not
> make this possible so maybe a Note in the driver page for PostgreSQL?

Actually, the change to just return an empty list has been introduced in GDAL 
1.8.0

From the 1.8.0 NEWS :
"""
PostgreSQL driver:
[...]
 * Don't require to have found a layer in readonly mode to succeed in opening
   the datasource.
"""

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111015/8bbd26fc/attachment.html
From dbakeman at comcast.net  Sat Oct 15 20:43:40 2011
From: dbakeman at comcast.net (David J. Bakeman)
Date: Sun Oct 16 12:10:29 2011
Subject: [gdal-dev] PostgreSQL problems
In-Reply-To: <201110150950.04729.even.rouault@mines-paris.org>
References: <4E976A76.2020902@comcast.net>
	<201110142359.54704.even.rouault@mines-paris.org>
	<4E98BCD5.9000003@comcast.net>
	<201110150950.04729.even.rouault@mines-paris.org>
Message-ID: <4E9A28BC.1070300@comcast.net>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111015/1d794333/attachment.html
From chaitanya.ch at gmail.com  Sun Oct 16 16:38:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 17 09:12:06 2011
Subject: [gdal-dev] Re: [FWTools] DXF2Postgis Blocks
In-Reply-To: <F3B1BE60CEBA4976AE4645F20FD6451C@BobPC>
References: <B0C25E48B77E43B09873D02FFA31D324@BobPC>
	<CAMKgpOai1aiwhxvxkVTQRYFAuDfK2vtKyKHv6295YKwsSTxKWQ@mail.gmail.com>
	<F3B1BE60CEBA4976AE4645F20FD6451C@BobPC>
Message-ID: <CAMKgpOaYOfRoEK7AW_f=bbZFWonH4edHC05tdopkV1H49HmdBA@mail.gmail.com>

Bob,

Configuration options can be set in three ways. Programmatically, by
commandline switches or they can be set as environment variables.
The ogr2ogr utility doesn't use the commandline switch to set them. So the
only way left is by setting an environment variable.

On windows use can use the 'set' command to set the environment variable in
the shell. Once set all subsequent programs run on that shell will run
according to that variable.

Most of this is explained in the ConfigOptions page.

In your case you have to use two commands.
set DXF_INLINE_BLOCKS=false
ogr2ogr -f PostgreSQL -overwrite PG:"host='DBHost' user='postgres'
dbname='DBName' password='Pass'" DXFfile -nln 'Import_PID'

On Sun, Oct 16, 2011 at 10:59 PM, Bob Pawley <rjpawley@shaw.ca> wrote:

>   Hi Chaitanya
>
> I haven?t been able to find any information on how to disable the DXF
> inline blocks.
>
> I have tried the following as well as adaptations but I still can?t
> transfer the blocks or their attributes. Everything else comes through tho.
>
> '"'+s+'\FWTools2.4.7\bin\ogr2ogr"  "-f" "PostgreSQL" PG:"host='+DBHost+'
> user=postgres dbname='+DBName+' password='+Pass+'" "' + DXF + '" "set
> DXF_INLINE_BLOCKS=false" + -nln '+'Import_PID'+' "-overwrite" ';
>
>  Can you point me to a site that can help me?
>
>  Bob
>
>
>   *From:* Chaitanya kumar CH <chaitanya.ch@gmail.com>
> *Sent:* Friday, October 14, 2011 6:41 AM
> *To:* Bob Pawley <rjpawley@shaw.ca>
> *Cc:* fwtools@lists.maptools.org
> *Subject:* Re: [FWTools] DXF2Postgis Blocks
>
> Bob,
>
> Go through the DXF driver page[1]. According to that you can set
> DXF_INLINE_BLOCKS configuration option[2] to false to extract more info from
> the blocks.
>
> [1]: http://www.gdal.org/ogr/drv_dxf.html
> [2]: http://trac.osgeo.org/gdal/wiki/ConfigOptions
>
> On Fri, Oct 14, 2011 at 11:21 AM, Bob Pawley <rjpawley@shaw.ca> wrote:
>
>>   Hi
>>
>> I am using FWTools to import DXF files to Postgis.
>>
>> It mostly works quite well except I am not able to import the DXF Blocks
>> and Block Attributes.
>>
>> Is it possible to include the Blocks, or am I just missing something?
>>
>> Bob Pawley
>>
>>
>>
>>
>>
>> _______________________________________________
>> FWTools mailing list
>> FWTools@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/fwtools
>> http://fwtools.maptools.org/
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111017/ceb559c0/attachment.html
From etourigny.dev at gmail.com  Sun Oct 16 20:38:41 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Oct 17 13:24:55 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
Message-ID: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>

I have written a small utility app that I think would make a nice
addition to the GDAL Utilities.

gdalsrsinfo (provisional name) processes an input SRS definition (or
dataset) and outputs the SRS definition in one or all of the formats
which GDAL can export to (WKT, PROJ.4, ESRI WKT, mapserver, xml).

It accepts a valid GDAL dataset or any of the usual GDAL/OGR forms. It
could be extended to accept OGR datasets (already supports .prj
files).

In my opinion it is useful because it allows easy access to the
different SRS forms supported by GDAL and conversions between those
forms.

> gdalsrsinfo -h

Usage: gdalsrsinfo [options] srs_def

srs_def may be the filename of a dataset from which to extract SRS information
OR any of the usual GDAL/OGR forms
(complete WKT, PROJ.4, EPSG:n or a file containing the SRS)

Options:
   [--help-general] [-h]  Show help and exit
   [-p]                         Pretty-print where applicable (e.g. WKT)
   [-s]                         Be as silent as possible
   [-o out_type]           Output type {all,proj4,wkt,esri,mapinfo,xml}


Please give me your opinion on this, and if I should go ahead and
commit it to svn trunk.  Also what name it should have.

Attaching source code and modified GNUMakefile to build. It is written
in c to make it easily available to all GDAL installations.

Regards, Etienne

Posting some examples:

>  ./gdalsrsinfo  -o all  landsat.tif

PROJ.4 : '+proj=utm +zone=19 +south +datum=WGS84 +units=m +no_defs '

OGC WKT :
PROJCS["WGS 84 / UTM zone 19S",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32719"]]

ESRI WKT :
PROJCS["WGS_1984_UTM_Zone_19S",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]

MAPINFO : 'Earth Projection 8, 104, "m", -69, 0, 0.9996, 500000, 10000000'


> ./gdalsrsinfo  -o proj4 "EPSG:32722"

PROJ.4 : '+proj=utm +zone=22 +south +datum=WGS84 +units=m +no_defs '

> ./gdalsrsinfo  -o wkt -s  "EPSG:32722"

PROJCS["WGS 84 / UTM zone 22S",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-51],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["EPSG","32722"]]


> ./gdalsrsinfo  -o wkt -p "EPSG:4326"

OGC WKT :
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalsrsinfo.c
Type: text/x-csrc
Size: 7991 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111016/c2ea8049/gdalsrsinfo.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GNUmakefile
Type: application/octet-stream
Size: 6271 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111016/c2ea8049/GNUmakefile.obj
From warmerdam at pobox.com  Sun Oct 16 20:45:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 17 13:31:42 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
In-Reply-To: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
References: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
Message-ID: <CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>

Etienne,

Potentially something similar could be accomplished with an
-srsformat option to gdalinfo.  I will also note that the existing
*unsupported* "testepsg" utility will report an SRS in all known
formats and has a few other options.

If you did check in a gdalsrsinfo utility, I'd suggest you have a
way of taking the input SRS definition from the commandline
instead of from a file.

Best regards,


On Sun, Oct 16, 2011 at 5:38 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> I have written a small utility app that I think would make a nice
> addition to the GDAL Utilities.
>
> gdalsrsinfo (provisional name) processes an input SRS definition (or
> dataset) and outputs the SRS definition in one or all of the formats
> which GDAL can export to (WKT, PROJ.4, ESRI WKT, mapserver, xml).
>
> It accepts a valid GDAL dataset or any of the usual GDAL/OGR forms. It
> could be extended to accept OGR datasets (already supports .prj
> files).
>
> In my opinion it is useful because it allows easy access to the
> different SRS forms supported by GDAL and conversions between those
> forms.
>
>> gdalsrsinfo -h
>
> Usage: gdalsrsinfo [options] srs_def
>
> srs_def may be the filename of a dataset from which to extract SRS information
> OR any of the usual GDAL/OGR forms
> (complete WKT, PROJ.4, EPSG:n or a file containing the SRS)
>
> Options:
> ? [--help-general] [-h] ?Show help and exit
> ? [-p] ? ? ? ? ? ? ? ? ? ? ? ? Pretty-print where applicable (e.g. WKT)
> ? [-s] ? ? ? ? ? ? ? ? ? ? ? ? Be as silent as possible
> ? [-o out_type] ? ? ? ? ? Output type {all,proj4,wkt,esri,mapinfo,xml}
>
>
> Please give me your opinion on this, and if I should go ahead and
> commit it to svn trunk. ?Also what name it should have.
>
> Attaching source code and modified GNUMakefile to build. It is written
> in c to make it easily available to all GDAL installations.
>
> Regards, Etienne
>
> Posting some examples:
>
>> ?./gdalsrsinfo ?-o all ?landsat.tif
>
> PROJ.4 : '+proj=utm +zone=19 +south +datum=WGS84 +units=m +no_defs '
>
> OGC WKT :
> PROJCS["WGS 84 / UTM zone 19S",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32719"]]
>
> ESRI WKT :
> PROJCS["WGS_1984_UTM_Zone_19S",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
>
> MAPINFO : 'Earth Projection 8, 104, "m", -69, 0, 0.9996, 500000, 10000000'
>
>
>> ./gdalsrsinfo ?-o proj4 "EPSG:32722"
>
> PROJ.4 : '+proj=utm +zone=22 +south +datum=WGS84 +units=m +no_defs '
>
>> ./gdalsrsinfo ?-o wkt -s ?"EPSG:32722"
>
> PROJCS["WGS 84 / UTM zone 22S",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-51],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["EPSG","32722"]]
>
>
>> ./gdalsrsinfo ?-o wkt -p "EPSG:4326"
>
> OGC WKT :
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4326"]]
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Sun Oct 16 21:02:41 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Oct 17 13:50:16 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
In-Reply-To: <CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>
References: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
	<CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>
Message-ID: <CA+TxYvPodK9-NMg4kxLeW41vzQqKuQmVrMruMQjjaCRwX2ucpA@mail.gmail.com>

Frank,

Getting srs from the commandline is already supported, and it would
not make sense without it.  I also added support for getting it from
an existing file as an afterthought.
The reason I think this should be separate from gdalinfo is because I
want to be able to get the srs from a commandline and not worry about
using a file.

Your suggestion to add a -srsformat to gdalinfo is nice, and it could
replace the -proj4 option I checked in this week.  With that option,
output would be in one of the supported flavors, instead of the
default OGC WKT.

I'll look into testepsg, I thought it was only for EPSG codes (guess I
was wrong). I also overlooked it because it is not in the GDAL
utilities page.

Perhaps I can combine testepsg with gdalsrsinfo ?

Again some examples without needing any files:

./gdalsrsinfo  -o wkt -s  "EPSG:32722"
./gdalsrsinfo '+proj=stere +lat_0=-37 +lon_0=145 +x_0=0 +y_0=0
+ellps=WGS84 +datum=WGS84 +units=m +no_defs'

Thanks,
Etienne

On Sun, Oct 16, 2011 at 10:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Etienne,
>
> Potentially something similar could be accomplished with an
> -srsformat option to gdalinfo. ?I will also note that the existing
> *unsupported* "testepsg" utility will report an SRS in all known
> formats and has a few other options.
>
> If you did check in a gdalsrsinfo utility, I'd suggest you have a
> way of taking the input SRS definition from the commandline
> instead of from a file.
>
> Best regards,
>
>
> On Sun, Oct 16, 2011 at 5:38 PM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> I have written a small utility app that I think would make a nice
>> addition to the GDAL Utilities.
>>
>> gdalsrsinfo (provisional name) processes an input SRS definition (or
>> dataset) and outputs the SRS definition in one or all of the formats
>> which GDAL can export to (WKT, PROJ.4, ESRI WKT, mapserver, xml).
>>
>> It accepts a valid GDAL dataset or any of the usual GDAL/OGR forms. It
>> could be extended to accept OGR datasets (already supports .prj
>> files).
>>
>> In my opinion it is useful because it allows easy access to the
>> different SRS forms supported by GDAL and conversions between those
>> forms.
>>
>>> gdalsrsinfo -h
>>
>> Usage: gdalsrsinfo [options] srs_def
>>
>> srs_def may be the filename of a dataset from which to extract SRS information
>> OR any of the usual GDAL/OGR forms
>> (complete WKT, PROJ.4, EPSG:n or a file containing the SRS)
>>
>> Options:
>> ? [--help-general] [-h] ?Show help and exit
>> ? [-p] ? ? ? ? ? ? ? ? ? ? ? ? Pretty-print where applicable (e.g. WKT)
>> ? [-s] ? ? ? ? ? ? ? ? ? ? ? ? Be as silent as possible
>> ? [-o out_type] ? ? ? ? ? Output type {all,proj4,wkt,esri,mapinfo,xml}
>>
>>
>> Please give me your opinion on this, and if I should go ahead and
>> commit it to svn trunk. ?Also what name it should have.
>>
>> Attaching source code and modified GNUMakefile to build. It is written
>> in c to make it easily available to all GDAL installations.
>>
>> Regards, Etienne
>>
>> Posting some examples:
>>
>>> ?./gdalsrsinfo ?-o all ?landsat.tif
>>
>> PROJ.4 : '+proj=utm +zone=19 +south +datum=WGS84 +units=m +no_defs '
>>
>> OGC WKT :
>> PROJCS["WGS 84 / UTM zone 19S",GEOGCS["WGS
>> 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32719"]]
>>
>> ESRI WKT :
>> PROJCS["WGS_1984_UTM_Zone_19S",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
>>
>> MAPINFO : 'Earth Projection 8, 104, "m", -69, 0, 0.9996, 500000, 10000000'
>>
>>
>>> ./gdalsrsinfo ?-o proj4 "EPSG:32722"
>>
>> PROJ.4 : '+proj=utm +zone=22 +south +datum=WGS84 +units=m +no_defs '
>>
>>> ./gdalsrsinfo ?-o wkt -s ?"EPSG:32722"
>>
>> PROJCS["WGS 84 / UTM zone 22S",GEOGCS["WGS
>> 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-51],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["EPSG","32722"]]
>>
>>
>>> ./gdalsrsinfo ?-o wkt -p "EPSG:4326"
>>
>> OGC WKT :
>> GEOGCS["WGS 84",
>> ? ?DATUM["WGS_1984",
>> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
>> ? ? ? ?AUTHORITY["EPSG","6326"]],
>> ? ?PRIMEM["Greenwich",0,
>> ? ? ? ?AUTHORITY["EPSG","8901"]],
>> ? ?UNIT["degree",0.0174532925199433,
>> ? ? ? ?AUTHORITY["EPSG","9122"]],
>> ? ?AUTHORITY["EPSG","4326"]]
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
>
From warmerdam at pobox.com  Sun Oct 16 21:06:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 17 13:54:22 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
In-Reply-To: <CA+TxYvPodK9-NMg4kxLeW41vzQqKuQmVrMruMQjjaCRwX2ucpA@mail.gmail.com>
References: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
	<CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>
	<CA+TxYvPodK9-NMg4kxLeW41vzQqKuQmVrMruMQjjaCRwX2ucpA@mail.gmail.com>
Message-ID: <CA+YzLBes196+WFbwjPw-=mm0g26c1sZSAg0GnN2JMVes=Azj0Q@mail.gmail.com>

On Sun, Oct 16, 2011 at 6:02 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> I'll look into testepsg, I thought it was only for EPSG codes (guess I
> was wrong). I also overlooked it because it is not in the GDAL
> utilities page.

Etienne,

The most accurate part of the utilities name is "test".  It is not
in the utilities page because it is not a supported utility.  It
was really just for me to do testing.

> Perhaps I can combine testepsg with gdalsrsinfo ?

I would imagine gdalsrsinfo superceding testepsg.

The gdaltransform utility already does the transformation work
done by testepsg.

I'm ok with you adding gdalsrsinfo as a supported utility.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From potts at cfl.rr.com  Sun Oct 16 21:38:30 2011
From: potts at cfl.rr.com (Garrett Potts)
Date: Mon Oct 17 14:29:19 2011
Subject: [gdal-dev] JPIPKAK dataset usage
Message-ID: <3B2FDA6D-B562-41AD-BBAD-651FCAE80461@cfl.rr.com>

Hello All:

I am trying to use the jpipkak data set driver for testing JPIP calls to a JPIP server and I think I am having troubles trying to figure out the proper call to GDALRasterIo for the proper load of the requested region of interest.  I have tried 2 ways,  using the block IO and also trying to use the GDALRasterIO call.  I am simply trying to use an application to sequence over the blocks at a given R-Level and write to a file.  Seems what I think the RLevel rect should be in the call is not what the JPIP driver expects:

Here are a pseudo step of what I am doing in our own image loader and all the open fluff has been removed and the dataset has been verified to get the image dimensions, pixel type, ? etc properly from the JPIP stream:

1) grab resolution band:
 
if res level is 0 or full res then init:

 aBand = GDALGetRasterBand( theDataset, aGdalBandIndex );

if overviewIndex is > 0

aBand = GDALGetOverview( aBand, overviewIndex );

2) grab blocksize:

      int xSize=0, ySize=0;
      GDALGetBlockSize(aBand,
                       &xSize,
                       &ySize);


3) now iterate over resolution level by the block sizes and grab the data.  I have tried this with GDALReadBlock and GDALRasterIO.


The driver gets data but it is in the wrong resolution which means I am not calling these with the proper request.  I have traced the code but something doesn't quite make sense to me.  It appears the R-Level is computed based on the input request versus the output width height buffer ratio.  I think everything would get cleared up if I could see some example calls using above methods in when using the JPIPKAK dataset driver.


Thank you in advance for any help

Take care

Garrett

From warmerdam at pobox.com  Mon Oct 17 01:49:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 17 18:52:39 2011
Subject: [gdal-dev] JPIPKAK dataset usage
In-Reply-To: <3B2FDA6D-B562-41AD-BBAD-651FCAE80461@cfl.rr.com>
References: <3B2FDA6D-B562-41AD-BBAD-651FCAE80461@cfl.rr.com>
Message-ID: <4E9BC1CD.3080503@pobox.com>

On 11-10-16 06:38 PM, Garrett Potts wrote:
> The driver gets data but it is in the wrong resolution which means I am not
> calling these with the proper request.  I have traced the code but something
> doesn't quite make sense to me.  It appears the R-Level is computed based on
> the input request versus the output width height buffer ratio.  I think
> everything would get cleared up if I could see some example calls using
> above methods in when using the JPIPKAK dataset driver.

Garrett,

Do you get the right results at full resolution?   I would not be
entirely suprised to find that JPIP support for reading from band
overview objects is broken.  Also, are you using quite recent code?
There were some bugs in this at one point that got fixed.  GDAL 1.8.1
or trunk should be fine.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From etourigny.dev at gmail.com  Mon Oct 17 02:58:48 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Oct 17 20:06:15 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
In-Reply-To: <CA+YzLBes196+WFbwjPw-=mm0g26c1sZSAg0GnN2JMVes=Azj0Q@mail.gmail.com>
References: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
	<CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>
	<CA+TxYvPodK9-NMg4kxLeW41vzQqKuQmVrMruMQjjaCRwX2ucpA@mail.gmail.com>
	<CA+YzLBes196+WFbwjPw-=mm0g26c1sZSAg0GnN2JMVes=Azj0Q@mail.gmail.com>
Message-ID: <CA+TxYvPdXgPXgiZnOkNQWi1EZRqqGQfNYDffNW_7QROOvk-7Pw@mail.gmail.com>

I've committed a slightly modified version to trunk.

I'll also add sometime soon a -srsformat option to gdalinfo with
similar behaviour.

I'll wait a bit before adding to the 1.8 branch

	M	gdal/apps/GNUmakefile
	M	gdal/apps/gdal_utilities.dox
	A	gdal/apps/gdalsrsinfo.c



On Sun, Oct 16, 2011 at 11:06 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Sun, Oct 16, 2011 at 6:02 PM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> I'll look into testepsg, I thought it was only for EPSG codes (guess I
>> was wrong). I also overlooked it because it is not in the GDAL
>> utilities page.
>
> Etienne,
>
> The most accurate part of the utilities name is "test". ?It is not
> in the utilities page because it is not a supported utility. ?It
> was really just for me to do testing.
>
>> Perhaps I can combine testepsg with gdalsrsinfo ?
>
> I would imagine gdalsrsinfo superceding testepsg.
>
> The gdaltransform utility already does the transformation work
> done by testepsg.
>
> I'm ok with you adding gdalsrsinfo as a supported utility.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
>
From even.rouault at mines-paris.org  Mon Oct 17 03:59:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 17 21:10:45 2011
Subject: [gdal-dev] proposal for a new GDAL/OGR utility app: gdalsrsinfo
In-Reply-To: <CA+TxYvPdXgPXgiZnOkNQWi1EZRqqGQfNYDffNW_7QROOvk-7Pw@mail.gmail.com>
References: <CA+TxYvOoepp6L+-Hx6NUYg+BsbiwBMxVfi4SEakd3hBGZL5EDg@mail.gmail.com>
	<CA+YzLBc6RM0qGB8J48uTQLDJUrJJ_zPycG7aqXXYcvcd5coa=w@mail.gmail.com>
	<CA+TxYvPodK9-NMg4kxLeW41vzQqKuQmVrMruMQjjaCRwX2ucpA@mail.gmail.com>
	<CA+YzLBes196+WFbwjPw-=mm0g26c1sZSAg0GnN2JMVes=Azj0Q@mail.gmail.com>
	<CA+TxYvPdXgPXgiZnOkNQWi1EZRqqGQfNYDffNW_7QROOvk-7Pw@mail.gmail.com>
Message-ID: <1318838381.4e9be06db58bc@webmail.free.fr>

Selon Etienne Tourigny <etourigny.dev@gmail.com>:

> I've committed a slightly modified version to trunk.
>
> I'll also add sometime soon a -srsformat option to gdalinfo with
> similar behaviour.
>
> I'll wait a bit before adding to the 1.8 branch
>
> 	M	gdal/apps/GNUmakefile
> 	M	gdal/apps/gdal_utilities.dox
> 	A	gdal/apps/gdalsrsinfo.c
>
>

Hi Etienne,

A few remarks :

1) apps/makefile.vc also needs to be updated

2) We usually don't commit new features/utilities in stable branches.

3) I think I know why you had to comment /* if ( hOGRDS )  OGR_DS_Destroy(
hOGRDS ); */ at the end. The issue is that the hSRS you got with hSRS =
OGR_L_GetSpatialRef( hLayer ); is managed by the datasource object. So you must
not free it explicitely : it will be freed when you destroy the datasource
object. An alternative would be to clone the SRS you get with
OGR_L_GetSpatialRef() to be able to close the datasource early.

4) Your test to know if the input is a filename that can be opened by GDALOpen()
/ OGROpen() uses file = fopen(pszInput, "r"); . But a lot of GDAL and OGR
drivers can now open VSI virtual files. So I'd suggest using VSIFOpenL() /
VSIFCloseL() instead.

5) The various OSRExportToXXX() allocated a new pszOutput that should be freed.

6) The OSRMorphToESRI( hSRS ); will alter the SRS object. So all code below will
be run on a ESRI'fied SRS. You probably need to clone the SRS before morphing to
ESRI, so it can be used specifically by that part of the code.

7) nTmp = OGR_L_GetFeatureCount(hLayer,TRUE); is dead code

8) I'd encourage you to extent autotest/utilities to test the new utility.

9) I'd suggest doing the cleanup for GDALAllRegister() and OGRRegisterAll()
at the end of the file and not in the middle, to avoid errors, and for nice
visual pairing.

Best regards,

Even


>
> On Sun, Oct 16, 2011 at 11:06 PM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> > On Sun, Oct 16, 2011 at 6:02 PM, Etienne Tourigny
> > <etourigny.dev@gmail.com> wrote:
> >> I'll look into testepsg, I thought it was only for EPSG codes (guess I
> >> was wrong). I also overlooked it because it is not in the GDAL
> >> utilities page.
> >
> > Etienne,
> >
> > The most accurate part of the utilities name is "test". ?It is not
> > in the utilities page because it is not a supported utility. ?It
> > was really just for me to do testing.
> >
> >> Perhaps I can combine testepsg with gdalsrsinfo ?
> >
> > I would imagine gdalsrsinfo superceding testepsg.
> >
> > The gdaltransform utility already does the transformation work
> > done by testepsg.
> >
> > I'm ok with you adding gdalsrsinfo as a supported utility.
> >
> > Best regards,
> > --
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up?? | Frank Warmerdam,
> warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush? ? | Geospatial Software Developer
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From wouter.schaubroeck at gmail.com  Mon Oct 17 05:06:42 2011
From: wouter.schaubroeck at gmail.com (Wouter Schaubroeck)
Date: Mon Oct 17 22:21:38 2011
Subject: [gdal-dev] ArcSDE -> GeoTiff: Bit size calculation failed...
In-Reply-To: <2BB0E8E2-BC5F-4AEE-A76A-AFB4C079464A@gmail.com>
References: <CAMV_oz23YMEPGneb-fi3nN=RgOZnObumjbaNkA1cLPZeOHAReA@mail.gmail.com>
	<2BB0E8E2-BC5F-4AEE-A76A-AFB4C079464A@gmail.com>
Message-ID: <CAMV_oz1nhJRXewHeFfM329uKOScc73puk-WpKGVpgcigQsgmew@mail.gmail.com>

Howard,

Thanks for the information. As soon as I have a ArcMAP installation,
I'll check this (should be a matter of days).

Wouter
--
Wouter
http://blog.giswhat.be



On 14 October 2011 18:04, Howard Butler <hobu.inc@gmail.com> wrote:
>
> On Oct 14, 2011, at 9:47 AM, Wouter Schaubroeck wrote:
>> Bit size calculation failed...
>> SDE's length:16834 With bitmap length: 18529 Without bitmap length: 16834
>
> Wouter,
>
> I was the author of that code, but it has been a number of years since I've done anything with SDE. I believe it has to do with the fact that the raster layer you're reading from has a bitmask (bitmap) on it, and the SDE driver doesn't handle them. ?The code probably needs to be updated to either disregard the mask, or handle it as a GDAL MaskBand.
>
> Hope this helps,
>
> Howard
>
>
>
From potts at cfl.rr.com  Mon Oct 17 06:16:39 2011
From: potts at cfl.rr.com (Garrett Potts)
Date: Mon Oct 17 23:35:03 2011
Subject: [gdal-dev] JPIPKAK dataset usage
In-Reply-To: <4E9BC1CD.3080503@pobox.com>
References: <3B2FDA6D-B562-41AD-BBAD-651FCAE80461@cfl.rr.com>
	<4E9BC1CD.3080503@pobox.com>
Message-ID: <75CA17BD-9AE6-445A-9D26-0D8AB57DA0C2@cfl.rr.com>

Hello Frank:

Thank you for the information.  Yes, full resolution seems to work fine and also I was using the 1.8.0 zipped download.  Let me try the 1.8.1 and see if that will fix any problems.

Thank you for the response and I will post my result.


Take care

Garrett

On Oct 17, 2011, at 1:49 AM, Frank Warmerdam wrote:

> On 11-10-16 06:38 PM, Garrett Potts wrote:
>> The driver gets data but it is in the wrong resolution which means I am not
>> calling these with the proper request.  I have traced the code but something
>> doesn't quite make sense to me.  It appears the R-Level is computed based on
>> the input request versus the output width height buffer ratio.  I think
>> everything would get cleared up if I could see some example calls using
>> above methods in when using the JPIPKAK dataset driver.
> 
> Garrett,
> 
> Do you get the right results at full resolution?   I would not be
> entirely suprised to find that JPIP support for reading from band
> overview objects is broken.  Also, are you using quite recent code?
> There were some bugs in this at one point that got fixed.  GDAL 1.8.1
> or trunk should be fine.
> 
> Best regards,
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From potts at cfl.rr.com  Mon Oct 17 07:33:55 2011
From: potts at cfl.rr.com (Garrett Potts)
Date: Tue Oct 18 00:56:44 2011
Subject: [gdal-dev] JPIPKAK dataset usage
In-Reply-To: <75CA17BD-9AE6-445A-9D26-0D8AB57DA0C2@cfl.rr.com>
References: <3B2FDA6D-B562-41AD-BBAD-651FCAE80461@cfl.rr.com>
	<4E9BC1CD.3080503@pobox.com>
	<75CA17BD-9AE6-445A-9D26-0D8AB57DA0C2@cfl.rr.com>
Message-ID: <75EDC664-4A3E-4402-9A92-BC9D522D7440@cfl.rr.com>

Hello Frank:

The GDALReadBlock works great in the 1.8.1 tag.  

Thank you for the help!

Take care all

Garrett

On Oct 17, 2011, at 6:16 AM, Garrett Potts wrote:

> Hello Frank:
> 
> Thank you for the information.  Yes, full resolution seems to work fine and also I was using the 1.8.0 zipped download.  Let me try the 1.8.1 and see if that will fix any problems.
> 
> Thank you for the response and I will post my result.
> 
> 
> Take care
> 
> Garrett
> 
> On Oct 17, 2011, at 1:49 AM, Frank Warmerdam wrote:
> 
>> On 11-10-16 06:38 PM, Garrett Potts wrote:
>>> The driver gets data but it is in the wrong resolution which means I am not
>>> calling these with the proper request.  I have traced the code but something
>>> doesn't quite make sense to me.  It appears the R-Level is computed based on
>>> the input request versus the output width height buffer ratio.  I think
>>> everything would get cleared up if I could see some example calls using
>>> above methods in when using the JPIPKAK dataset driver.
>> 
>> Garrett,
>> 
>> Do you get the right results at full resolution?   I would not be
>> entirely suprised to find that JPIP support for reading from band
>> overview objects is broken.  Also, are you using quite recent code?
>> There were some bugs in this at one point that got fixed.  GDAL 1.8.1
>> or trunk should be fine.
>> 
>> Best regards,
>> 
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/warmerda
>> and watch the world go round - Rush    | Geospatial Software Developer
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From smith.todd at gmail.com  Mon Oct 17 14:27:42 2011
From: smith.todd at gmail.com (Todd Smith)
Date: Tue Oct 18 08:13:32 2011
Subject: [gdal-dev] CDB?
Message-ID: <CADtPKxyzSk1WyN7RnpbKJTu+6jDv0-wRMkmsh2bAienUL74ttg@mail.gmail.com>

Are there any plans to support CDB (Common Database) in the near future?
http://www.presagis.com/products_services/standards/cdb/

I'm specifically asking about Elevation and Visible Spectrum terrain Imagery
Datasets.

Thanks,

Todd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111017/cb6b9e4c/attachment.html
From warmerdam at pobox.com  Mon Oct 17 15:43:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 18 09:33:05 2011
Subject: [gdal-dev] CDB?
In-Reply-To: <CADtPKxyzSk1WyN7RnpbKJTu+6jDv0-wRMkmsh2bAienUL74ttg@mail.gmail.com>
References: <CADtPKxyzSk1WyN7RnpbKJTu+6jDv0-wRMkmsh2bAienUL74ttg@mail.gmail.com>
Message-ID: <CA+YzLBehpM_6-caKEdYMH=YMFqjo9na8DqW4fNXRkjRvrwqCwQ@mail.gmail.com>

Todd,

>From a brief review of the web page it seems CDB is an XML catalog
with references to images and feature data in GeoTIFF, and Shapefile.
Is there important metadata in the CDB catalog needed to fully exploit
the feature and raster data?

I am not aware of anyone working on a CDB driver.

To some extent drivers like the RadarSat 2 (gdal/frmts/rs2) might be
good models for a CDB driver.  The RS2 driver also has an XML file
with references to one or more TIFF files for a product.

Best regards,
Frank


On Mon, Oct 17, 2011 at 11:27 AM, Todd Smith <smith.todd@gmail.com> wrote:
> Are there any plans to support CDB (Common Database) in the near future?
> ?http://www.presagis.com/products_services/standards/cdb/
> I'm specifically asking about Elevation and Visible Spectrum terrain Imagery
> Datasets.
> Thanks,
> Todd
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From smith.todd at gmail.com  Mon Oct 17 18:49:21 2011
From: smith.todd at gmail.com (Todd Smith)
Date: Tue Oct 18 12:49:08 2011
Subject: [gdal-dev] CDB?
In-Reply-To: <CA+YzLBehpM_6-caKEdYMH=YMFqjo9na8DqW4fNXRkjRvrwqCwQ@mail.gmail.com>
References: <CADtPKxyzSk1WyN7RnpbKJTu+6jDv0-wRMkmsh2bAienUL74ttg@mail.gmail.com>
	<CA+YzLBehpM_6-caKEdYMH=YMFqjo9na8DqW4fNXRkjRvrwqCwQ@mail.gmail.com>
Message-ID: <CADtPKxzP=Am5WEs01xrYj2du6hr0ukOhUTtBiztBvxxhWdDzeg@mail.gmail.com>

Actually, I think my question was a little premature.

Thanks for the help though.

On Mon, Oct 17, 2011 at 1:43 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Todd,
>
> From a brief review of the web page it seems CDB is an XML catalog
> with references to images and feature data in GeoTIFF, and Shapefile.
> Is there important metadata in the CDB catalog needed to fully exploit
> the feature and raster data?
>
> I am not aware of anyone working on a CDB driver.
>
> To some extent drivers like the RadarSat 2 (gdal/frmts/rs2) might be
> good models for a CDB driver.  The RS2 driver also has an XML file
> with references to one or more TIFF files for a product.
>
> Best regards,
> Frank
>
>
> On Mon, Oct 17, 2011 at 11:27 AM, Todd Smith <smith.todd@gmail.com> wrote:
> > Are there any plans to support CDB (Common Database) in the near future?
> >  http://www.presagis.com/products_services/standards/cdb/
> > I'm specifically asking about Elevation and Visible Spectrum terrain
> Imagery
> > Datasets.
> > Thanks,
> > Todd
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111017/33928042/attachment.html
From dev4cx4m9z at snkmail.com  Tue Oct 18 04:06:55 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Tue Oct 18 22:36:39 2011
Subject: [gdal-dev] Confused about coordinate transformations
Message-ID: <004301cc8d6c$e7dd5bd0$b7981370$@snkmail.com>

I have a GIS database with all coordinates stored in WGS84 datum. I am
trying to translate the coordinates of the database to the datum of my map.
I am creating two OGRSpatialReference, one for WGS84 and one for the current
map. I am then creating an OGRCoordinateTransformation. When I do so I get a
PROJ.4 error - "No PROJ.4 translation for destination SRS, coordinate
transformation initialisation has failed"

 

Question - Do I HAVE to use PROJ.4 to do the translation? Can I not just
load the SRS with a WKT? I wish to avoid PROJ.4 as I'm unsure how to build
it.

 

_______________________________________

Marc Hillman, Melbourne, Australia

 <http://users.tpg.com.au/users/mhillman/>
http://users.tpg.com.au/users/mhillman/

marc .hillman @ t p g . c o m . a u

Eagles may soar, but weasels don't get sucked into jet engines.

Early bird gets the worm, but the second mouse gets the cheese.

If Barbie is so popular, why do you have to buy her friends?

All those who believe in psychokinesis, raise my hand.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/da85f717/attachment.html
From chaitanya.ch at gmail.com  Tue Oct 18 04:24:59 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct 18 22:55:47 2011
Subject: [gdal-dev] Confused about coordinate transformations
In-Reply-To: <004301cc8d6c$e7dd5bd0$b7981370$@snkmail.com>
References: <004301cc8d6c$e7dd5bd0$b7981370$@snkmail.com>
Message-ID: <CAMKgpOav8BJFX5JAihmPgNxZQb9shn5uYDoKr5XhLOuG9OF36w@mail.gmail.com>

Marc,

proj4 usually comes with the gdal library. Instead of coding your own
program, first try the ogr2ogr utility[1] that comes with the gdal library.

[1]: http://www.gdal.org/ogr2ogr.html

On Tue, Oct 18, 2011 at 1:36 PM, <dev4cx4m9z@snkmail.com> wrote:

> I have a GIS database with all coordinates stored in WGS84 datum. I am
> trying to translate the coordinates of the database to the datum of my map.
> I am creating two OGRSpatialReference, one for WGS84 and one for the current
> map. I am then creating an OGRCoordinateTransformation. When I do so I get a
> PROJ.4 error ? ?No PROJ.4 translation for destination SRS, coordinate
> transformation initialisation has failed?****
>
> ** **
>
> Question ? Do I HAVE to use PROJ.4 to do the translation? Can I not just
> load the SRS with a WKT? I wish to avoid PROJ.4 as I?m unsure how to build
> it.****
>
> ** **
>
> _______________________________________****
>
> Marc Hillman, Melbourne, Australia****
>
> http://users.tpg.com.au/users/mhillman/****
>
> marc .hillman @ t p g . c o m . a u****
>
> Eagles may soar, but weasels don't get sucked into jet engines.****
>
> Early bird gets the worm, but the second mouse gets the cheese.****
>
> If Barbie is so popular, why do you have to buy her friends?****
>
> All those who believe in psychokinesis, raise my hand.****
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/47f231ed/attachment.html
From dev4cx4m9z at snkmail.com  Tue Oct 18 03:51:14 2011
From: dev4cx4m9z at snkmail.com (Marc Hillman)
Date: Tue Oct 18 23:03:11 2011
Subject: [gdal-dev] Confused about datum transformations
Message-ID: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>

I have a GIS database, and all data is stored in WGS84 datum. I have
developed an application using GDAL, and I now need to translate my WGS84
coordinates to several different datums, depending what map is loaded. I
seem to be going around in circles, and need a nudge in the right direction.
I am defining an OGRSpatialReference for each datum (WGS84 and current map)
and then attempting to create an OGRCoordinateTransformation for the
transformation. This last step fails with a PROJ.4 error ("No PROJ.4
translation for destination SRS, coordinate transformation initialization
failed"

 

My question is - Do I need PROJ.4 to do the translation? Can I not just use
ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
canned list of all the WKT somewhere?  I'm keen to avoid PROJ.4 if possible
as I'm not sure I can build it.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/e51697bd/attachment.html
From chaitanya.ch at gmail.com  Tue Oct 18 04:44:04 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct 18 23:15:47 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
Message-ID: <CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>

Marc,

Can you provide the code leading to the error?

On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>wrote:

> I have a GIS database, and all data is stored in WGS84 datum. I have
> developed an application using GDAL, and I now need to translate my WGS84
> coordinates to several different datums, depending what map is loaded. I
> seem to be going around in circles, and need a nudge in the right direction.
> I am defining an OGRSpatialReference for each datum (WGS84 and current map)
> and then attempting to create an OGRCoordinateTransformation for the
> transformation. This last step fails with a PROJ.4 error (?No PROJ.4
> translation for destination SRS, coordinate transformation initialization
> failed?****
>
> ** **
>
> My question is - Do I need PROJ.4 to do the translation? Can I not just use
> ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
> canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible
> as I?m not sure I can build it.****
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/c3a49386/attachment-0001.html
From dev4cx4m9z at snkmail.com  Tue Oct 18 06:11:56 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Wed Oct 19 00:48:12 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
Message-ID: <005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>

I?m not sure the code will help too much, but here are the relevant code fragments. I?m using a hand crafted VB.net wrapper which explains some of the syntax

 

Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84

Private MapSRS As OGRSpatialReference       ' Coordinate system of map

Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map

 

With WGS84SRS

    GDALError = .SetProjCS("WGS84 Datum")

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

    GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

With MapSRS

     GDALError = .SetProjCS("Map coordinate system")

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

     GDALError = .ImportFromEPSG(3577)

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map

Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())

 

Marc,

Can you provide the code leading to the error?

On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com> wrote:

I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?

 

My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E



No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/c642324e/attachment.html
From dev4cx4m9z at snkmail.com  Tue Oct 18 06:13:40 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Wed Oct 19 00:50:02 2011
Subject: [gdal-dev] Confused about coordinate transformations
In-Reply-To: <CAMKgpOav8BJFX5JAihmPgNxZQb9shn5uYDoKr5XhLOuG9OF36w@mail.gmail.com>
References: <004301cc8d6c$e7dd5bd0$b7981370$@snkmail.com>
	<CAMKgpOav8BJFX5JAihmPgNxZQb9shn5uYDoKr5XhLOuG9OF36w@mail.gmail.com>
Message-ID: <005f01cc8d7e$9d09c280$d71d4780$@snkmail.com>

My program does MANY other things that GDAL can?t. I?m using GDAL as a small part of something much larger. I need to do the transformation at runtime.

 

Marc,

proj4 usually comes with the gdal library. Instead of coding your own program, first try the ogr2ogr utility[1] that comes with the gdal library.

[1]: http://www.gdal.org/ogr2ogr.html

On Tue, Oct 18, 2011 at 1:36 PM, <dev4cx4m9z@snkmail.com> wrote:

I have a GIS database with all coordinates stored in WGS84 datum. I am trying to translate the coordinates of the database to the datum of my map. I am creating two OGRSpatialReference, one for WGS84 and one for the current map. I am then creating an OGRCoordinateTransformation. When I do so I get a PROJ.4 error ? ?No PROJ.4 translation for destination SRS, coordinate transformation initialisation has failed?

 

Question ? Do I HAVE to use PROJ.4 to do the translation? Can I not just load the SRS with a WKT? I wish to avoid PROJ.4 as I?m unsure how to build it.

 

_______________________________________

Marc Hillman, Melbourne, Australia

http://users.tpg.com.au/users/mhillman/

marc .hillman @ t p g . c o m . a u

Eagles may soar, but weasels don't get sucked into jet engines.

Early bird gets the worm, but the second mouse gets the cheese.

If Barbie is so popular, why do you have to buy her friends?

All those who believe in psychokinesis, raise my hand..

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E



No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/b9c20f0d/attachment.html
From chaitanya.ch at gmail.com  Tue Oct 18 09:09:43 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 19 03:55:35 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
Message-ID: <CAMKgpOYfgagxOhaoz+5OZ3DCO21ywAj3mHMyjVXCrAkrDehtqg@mail.gmail.com>

Marc,

Looks like there might be a problem with the targetSRS. Please check if it
is ok. Try the exportToWkt method on it. Also, make sure the file pcs.csv in
gdal's data directory contains the entry for 3577.

On Tue, Oct 18, 2011 at 3:41 PM, <dev4cx4m9z@snkmail.com> wrote:

> I?m not sure the code will help too much, but here are the relevant code
> fragments. I?m using a hand crafted VB.net wrapper which explains some of
> the syntax****
>
> ** **
>
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
> WGS84****
>
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map****
>
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
> transform from WGS84 to map****
>
> ** **
>
> With WGS84SRS****
>
>     GDALError = .SetProjCS("WGS84 Datum")****
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system****
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
> End With****
>
> ** **
>
> With MapSRS****
>
>      GDALError = .SetProjCS("Map coordinate system")****
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
>      GDALError = .ImportFromEPSG(3577)****
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
> End With****
>
> ** **
>
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
> ' Create a coordinate transformation - WGS84 to map****
>
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())****
>
> ** **
>
> Marc,
>
> Can you provide the code leading to the error?****
>
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
> wrote:****
>
> I have a GIS database, and all data is stored in WGS84 datum. I have
> developed an application using GDAL, and I now need to translate my WGS84
> coordinates to several different datums, depending what map is loaded. I
> seem to be going around in circles, and need a nudge in the right direction.
> I am defining an OGRSpatialReference for each datum (WGS84 and current map)
> and then attempting to create an OGRCoordinateTransformation for the
> transformation.. This last step fails with a PROJ.4 error (?No PROJ.4
> translation for destination SRS, coordinate transformation initialization
> failed?****
>
>  ****
>
> My question is - Do I need PROJ.4 to do the translation? Can I not just use
> ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
> canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible
> as I?m not sure I can build it.****
>
>  ****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> ****
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11*
> ***
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/20ac9d27/attachment-0001.html
From etourigny.dev at gmail.com  Tue Oct 18 09:32:46 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 04:19:54 2011
Subject: [gdal-dev] Confused about coordinate transformations
In-Reply-To: <005f01cc8d7e$9d09c280$d71d4780$@snkmail.com>
References: <004301cc8d6c$e7dd5bd0$b7981370$@snkmail.com>
	<CAMKgpOav8BJFX5JAihmPgNxZQb9shn5uYDoKr5XhLOuG9OF36w@mail.gmail.com>
	<005f01cc8d7e$9d09c280$d71d4780$@snkmail.com>
Message-ID: <CA+TxYvMBPF9wVY+PZ38djHyb4aQDTtLeX9y5o2tSr095zh0v6A@mail.gmail.com>

Marc, if you get the same error with ogr2ogr/gdal_translate/gdalwarp,
it means that your destination srs is not supported.  What is the
definition that you use for the destination srs?

On Tue, Oct 18, 2011 at 8:13 AM,  <dev4cx4m9z@snkmail.com> wrote:
> My program does MANY other things that GDAL can?t. I?m using GDAL as a small
> part of something much larger. I need to do the transformation at runtime.
>
>
>
> Marc,
>
> proj4 usually comes with the gdal library. Instead of coding your own
> program, first try the ogr2ogr utility[1] that comes with the gdal library.
>
> [1]: http://www.gdal.org/ogr2ogr.html
>
> On Tue, Oct 18, 2011 at 1:36 PM, <dev4cx4m9z@snkmail.com> wrote:
>
> I have a GIS database with all coordinates stored in WGS84 datum. I am
> trying to translate the coordinates of the database to the datum of my map.
> I am creating two OGRSpatialReference, one for WGS84 and one for the current
> map. I am then creating an OGRCoordinateTransformation. When I do so I get a
> PROJ.4 error ? ?No PROJ.4 translation for destination SRS, coordinate
> transformation initialisation has failed?
>
>
>
> Question ? Do I HAVE to use PROJ.4 to do the translation? Can I not just
> load the SRS with a WKT? I wish to avoid PROJ.4 as I?m unsure how to build
> it.
>
>
>
> _______________________________________
>
> Marc Hillman, Melbourne, Australia
>
> http://users.tpg.com.au/users/mhillman/
>
> marc .hillman @ t p g . c o m . a u
>
> Eagles may soar, but weasels don't get sucked into jet engines.
>
> Early bird gets the worm, but the second mouse gets the cheese.
>
> If Barbie is so popular, why do you have to buy her friends?
>
> All those who believe in psychokinesis, raise my hand..
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From julien.malik at c-s.fr  Tue Oct 18 09:56:34 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Wed Oct 19 05:22:03 2011
Subject: [gdal-dev] Backporting rename-internal-libtiff-symbols to GDAL
 1.8.0 ubuntu package ?
Message-ID: <4E9D8592.1070906@c-s.fr>

Hi all,

In the frame of recent development aiming at providing the OrfeoToolbox 
functionnalities in Qgis [1], I'm planning on providing an Ubuntu 
package with the necessary binaries, built on top of dependencies from 
the ubuntugis-unstable repository.

The instructions to have it working on Ubuntu and Debian systems is 
described in [2].
As you will see, it is currently *not* possible to build the binaries on 
top of the current GDAL 1.8.0 package, because of a symbol clash issue 
with libtiff/libgeotiff (that has already been discussed on this list).
I know the problem has been worked around and a solution is provided in 
GDAL trunk which can remangle the internal libtiff/libgeotiff symbol.

Therefore, my plan is to provide, in our PPA ([3], [4]), yet-another 
patched GDAL 1.8.0 package integrating this fix, and building gdal with 
--with-rename-internal-libtiff-symbols=yes and 
--with-rename-internal-libgeotiff-symbols=yes
I think applying and using the "rename-internal-libtiff-symbols" patch 
will create an ABI compatible GDAL library (the ultimate goal is of 
course to provide a package which is ABI-compatible with all the 
packages of ubuntugis-unstable).

I would appreciate the opinion of GDAL developers and Ubuntu/Debian 
package maintainers about this assumption I'm making.
Do you see an issue that I would have missed ?

This patched GDAL package will become obsolete as soon as GDAL 1.9 is 
released.
As such it will be removed from our PPA as soon as possible.

Best regards,
Julien

[1] http://lists.osgeo.org/pipermail/qgis-developer/2011-October/016275.html
[2] 
http://wiki.orfeo-toolbox.org/index.php/Quantum_GIS_access_to_OTB_applications
[3] https://launchpad.net/~otb/+archive/orfeotoolbox-nightly
[4] https://launchpad.net/~otb/+archive/orfeotoolbox-stable-ubuntugis
From KShannon at gcs-research.com  Tue Oct 18 10:41:17 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Oct 19 05:33:27 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>

Did you compile gdal yourself, or use a pre-built package.  It is also possible GDAL_DATA environment variable isn?t set.

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of dev4cx4m9z@snkmail.com
Sent: Tuesday, October 18, 2011 4:12 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Confused about datum transformations

I?m not sure the code will help too much, but here are the relevant code fragments. I?m using a hand crafted VB.net wrapper which explains some of the syntax

Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84
Private MapSRS As OGRSpatialReference       ' Coordinate system of map
Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map

With WGS84SRS
    GDALError = .SetProjCS("WGS84 Datum")
    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
    GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system
    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
End With

With MapSRS
     GDALError = .SetProjCS("Map coordinate system")
     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
     GDALError = .ImportFromEPSG(3577)
     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
End With

ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map
Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())

Marc,

Can you provide the code leading to the error?
On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com<mailto:dev4cx4m9z@snkmail.com>> wrote:
I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?

My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
No virus found in this message.
Checked by AVG - www.avg.com<http://www.avg.com>
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/c2ba67df/attachment.html
From Christopher.Pouliot at state.mn.us  Tue Oct 18 11:49:56 2011
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Wed Oct 19 07:00:24 2011
Subject: [gdal-dev] deploying with GDAL libraries
Message-ID: <074A014435F2E543B1FD97E729C76E4DF883@055-CH1MPN1-013.055d.mgd.msft.net>

Hi All,

I'm a C# programmer and new to the Open Source arena.  I'm looking to develop a program that uses GDAL for reading and writing VECTOR data (shapefiles, ESRI file geodatabases, etc) and incorporates the PROJ.4 capabilities for projecting data too.   To this point I've done the following:

Downloaded the File GDB API for Visual Studio (v 1.1) and compiled it
Downloaded the GDAL source (v 1.9.0)
Updated the NMAKE.OPT file to enable the file Geodatabase Plugin
Compiled the GDAL source in Visual Studio 10.
Ran the NMAKE commands to make the interface/C# wrapper files.

So now I've got the OGR_CSHARP.DLL, OSR_CSHARP.DLL, GDAL_CSHARP.DLL files as well as the OGR_FILEGDB.dll ready to go.  My questions are:

1)      What is the best way to incorporate PROJ.4?  Can I simply set the PROJ_LIB environment variable in my application to point to my PROJ.dll location?

2)      What are the bare minimum files I need to incorporate into my application for deployment?

Thanks.

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us
(651) 259-5491

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/39a6d09f/attachment-0001.html
From even.rouault at mines-paris.org  Tue Oct 18 13:16:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 19 08:15:42 2011
Subject: [gdal-dev] Backporting rename-internal-libtiff-symbols to GDAL
	1.8.0 ubuntu package ?
In-Reply-To: <4E9D8592.1070906@c-s.fr>
References: <4E9D8592.1070906@c-s.fr>
Message-ID: <201110181916.20329.even.rouault@mines-paris.org>

> Therefore, my plan is to provide, in our PPA ([3], [4]), yet-another
> patched GDAL 1.8.0 package integrating this fix, and building gdal with
> --with-rename-internal-libtiff-symbols=yes and
> --with-rename-internal-libgeotiff-symbols=yes
> I think applying and using the "rename-internal-libtiff-symbols" patch
> will create an ABI compatible GDAL library (the ultimate goal is of
> course to provide a package which is ABI-compatible with all the
> packages of ubuntugis-unstable).
> 
> I would appreciate the opinion of GDAL developers and Ubuntu/Debian
> package maintainers about this assumption I'm making.
> Do you see an issue that I would have missed ?

My initial thought without checking :
I don't think it should cause any ABI problem. IMHO, the symbols of the 
internal libtiff and libgeotiff have never been thought as belonging to the GDAL 
API/ABI. I believe that Debian uses --with-hide-internal-symbols by the way 
(to be confirmed by the package mainteners of course), so those symbols were 
already not available to binaries linking to GDAL.

But...
I've just done a test and the results are mixed. It appears that the internal 
libtiff symbols are not exported as expected when using  --with-hide-internal-
symbol, but the libgeotiff ones are exported ... So, there could be issues if 
--with-rename-internal-libgeotiff-symbols is used and an external binary linked 
to GDAL hoping that it would export the libgeotiff symbols.

Side node : I don't understand why Debian/Ubuntu uses internal libgeotiff, and 
not external libgeotiff ? I don't see a good reason for that.

My conclusion :
If you want to apply the patch and be on the safe side, you have to review all 
libs/apps that link to libgdal and check if they use libgeotiff symbols 
(symbols beginning by GTIF). If they link to both libgdal and (external) 
libgeotiff, then the patch should be OK. If they link only to libgdal, then 
there's an issue. And even if there's no problem with packaged applications, 
there's still the possibility of non-packaged ones depending on that...
From szekerest at gmail.com  Tue Oct 18 14:22:11 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Oct 19 09:25:00 2011
Subject: [gdal-dev] deploying with GDAL libraries
In-Reply-To: <074A014435F2E543B1FD97E729C76E4DF883@055-CH1MPN1-013.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4DF883@055-CH1MPN1-013.055d.mgd.msft.net>
Message-ID: <CACALY+QUrJErJehiYKrYoqP_rgAb9bGz-eU1bC-9CAKwAphM1w@mail.gmail.com>

2011/10/18 Pouliot, Christopher (DNR) <Christopher.Pouliot@state.mn.us>

>  1)      **What is the best way to incorporate PROJ.4?  Can I simply set
> the PROJ_LIB environment variable in my application to point to my PROJ.dll
> location?
>


In the default gdal build proj4 is loaded dynamically. Your responsibility
is to deploy proj.dll into a location available in the common Windows dll
search locations. (probably into the same directory of where the gdal dll
resides)
PROJ_LIB should point to the folder containing the epsg file etc.

**
>
> **2)      **What are the bare minimum files I need to incorporate into my
> application for deployment?  ****
>
> **
>
It depends on your compilation. You may use the Dependency Walker to make
sure which dlls your build depends on.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111018/fd0d063f/attachment.html
From mateusz at loskot.net  Tue Oct 18 14:50:42 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Oct 19 09:54:55 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
Message-ID: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>

Hi,

To those who are interested, I've just posted updated pre-loaded [1] git
repository of GDAL which is a copy of what I use to maintain at GitHub [2]:

http://mateusz.loskot.net/tmp/gdal/mloskot-github-gdal-20111018.7z

[1] http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030369.html
[2] https://github.com/mloskot/gdal
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Tue Oct 18 16:10:57 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 11:19:28 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps RFC)
Message-ID: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>

Dear devs and users,

As part of ongoing improvements to the netcdf driver (mainly for the
proper export of projected CRS) Patrick Sunter and I have prepared a
document - that may serve as an RFC - to deal with proposed changes to
the netcdf driver export and import.

Most of these changes are necessary for proper CF compatible export of
files with projected CRS.
We have written and tested the proposed changes (except 4 in the list
below), and the RFC wiki contains links to the code repository.


The main changes we suggest are summarized as :

1) Changes to metadata items including update to CF-1.5

2) Change to a default south-up orientation for NetCDF data

3) Changes to improve SRS Interoperability between GDAL and NetCDF
CF-1 for Map Projected data
     3.1) When exporting to NetCDF map projections via GDAL, save
projection coordinate variables.
     3.2) Continue saving GDAL custom attribute tags in addition to
CRS definition, but add option not to save
     3.3) Add saving of reference Ellipsoid parameters in CF-1
compliant format used by dataset

4) Add support for different netcdf file types and compression (this
one has not been implemented yet)


We have also fixed a number of issues with specific projections, some
of which have been reported in trac and many which were found with a
new autotest.


As there are a few changes to export and import, I am consulting the
members of the list to know their opinion on

A) do the changes require an RFC vote?
     - We propose to add new -co and Config options.
     - change #2 can cause backwards-compatibility issues in certain
rare cases (see the wiki)

B) can we have help testing the changes, to help catch any issues that
haven't been caught by our testing so far?

C) comments and recommendations from devs and users


For reference:

The (long) RFC page is at:
http://trac.osgeo.org/gdal/wiki/NetCDF_exportUpdateChanges

The following ticket was created to discuss technical issues and store
files such as patches.
http://trac.osgeo.org/gdal/ticket/4294

Status of support of the various projections can be found at
http://trac.osgeo.org/gdal/wiki/NetCDF_ProjectionTestingStatus

For reference, the page containing long-term ideas for improving the
NetCDF driver is at
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements


Regards,
Etienne Tourigny
From frankie at debian.org  Tue Oct 18 16:47:29 2011
From: frankie at debian.org (Francesco P. Lovergine)
Date: Wed Oct 19 12:18:16 2011
Subject: [gdal-dev] Backporting rename-internal-libtiff-symbols to GDAL
	1.8.0 ubuntu package ?
In-Reply-To: <201110181916.20329.even.rouault@mines-paris.org>
References: <4E9D8592.1070906@c-s.fr>
	<201110181916.20329.even.rouault@mines-paris.org>
Message-ID: <20111018204728.GA2664@frankie.is-a-geek.org>

On Tue, Oct 18, 2011 at 07:16:20PM +0200, Even Rouault wrote:
> > Therefore, my plan is to provide, in our PPA ([3], [4]), yet-another
> > patched GDAL 1.8.0 package integrating this fix, and building gdal with
> > --with-rename-internal-libtiff-symbols=yes and
> > --with-rename-internal-libgeotiff-symbols=yes
> > I think applying and using the "rename-internal-libtiff-symbols" patch
> > will create an ABI compatible GDAL library (the ultimate goal is of
> > course to provide a package which is ABI-compatible with all the
> > packages of ubuntugis-unstable).
> > 
> > I would appreciate the opinion of GDAL developers and Ubuntu/Debian
> > package maintainers about this assumption I'm making.
> > Do you see an issue that I would have missed ?
> 
> My initial thought without checking :
> I don't think it should cause any ABI problem. IMHO, the symbols of the 
> internal libtiff and libgeotiff have never been thought as belonging to the GDAL 
> API/ABI. I believe that Debian uses --with-hide-internal-symbols by the way 
> (to be confirmed by the package mainteners of course), so those symbols were 
> already not available to binaries linking to GDAL.
> 

Confirmed. On those regards I would appreciate if you would have a try
in linking by using current experimental gdal 1.8.1 available in the archive.
On the basis of my trials tiff/geotiff/gdal can now be linked together in
whatever order without problems, with that version.

> But...
> I've just done a test and the results are mixed. It appears that the internal 
> libtiff symbols are not exported as expected when using  --with-hide-internal-
> symbol, but the libgeotiff ones are exported ... So, there could be issues if 
> --with-rename-internal-libgeotiff-symbols is used and an external binary linked 
> to GDAL hoping that it would export the libgeotiff symbols.
> 
> Side node : I don't understand why Debian/Ubuntu uses internal libgeotiff, and 
> not external libgeotiff ? I don't see a good reason for that.
> 

The true problem is that we currently are distributing the traditional
non-bigtiff enabled libtiff and people are quite resistant in changing that.
That forces me to use the internal library. Also, at the time of squeeze
release the internal geotiff support was more recent than the official
geotiff. That could be currently different.

> My conclusion :
> If you want to apply the patch and be on the safe side, you have to review all 
> libs/apps that link to libgdal and check if they use libgeotiff symbols 
> (symbols beginning by GTIF). If they link to both libgdal and (external) 
> libgeotiff, then the patch should be OK. If they link only to libgdal, then 
> there's an issue. And even if there's no problem with packaged applications, 
> there's still the possibility of non-packaged ones depending on that...

-- 
Francesco P. Lovergine
From warmerdam at pobox.com  Tue Oct 18 17:22:13 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 19 12:34:32 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
Message-ID: <CA+YzLBdjYLuAQpKn1nMzWb4NcmpY5eKg819KtFa5QZBROxAKMw@mail.gmail.com>

On Tue, Oct 18, 2011 at 1:10 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> 2) Change to a default south-up orientation for NetCDF data

Etienne,

Could you expand on this a bit?  In particular I'm wondering if:

1) Is a south-up file represented as south up to GDAL applications?
That is, will geotransform[5] be negative or positive?

2) Depending on the answer to the above, are there any performance
implications when gdal_translate'ing from and to north north up datasets
in other formats?

The changes to the driver seem major enough and with backward
compatibility issues such that I think an RFC is reasonable.  Calling
for a vote on the existing document will likely be sufficient after
any discussion here.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Wed Oct 19 01:19:32 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 20:58:29 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <CA+YzLBdjYLuAQpKn1nMzWb4NcmpY5eKg819KtFa5QZBROxAKMw@mail.gmail.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<CA+YzLBdjYLuAQpKn1nMzWb4NcmpY5eKg819KtFa5QZBROxAKMw@mail.gmail.com>
Message-ID: <CA+TxYvO6Wwm9gGA-mA4J8TJ+uVS2sQWmo7X=ptnL4JR_Miw8tA@mail.gmail.com>

Hi Frank,

On Tue, Oct 18, 2011 at 7:22 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Tue, Oct 18, 2011 at 1:10 PM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> 2) Change to a default south-up orientation for NetCDF data
>
> Etienne,
>
> Could you expand on this a bit? ?In particular I'm wondering if:
>
> 1) Is a south-up file represented as south up to GDAL applications?
> That is, will geotransform[5] be negative or positive?


Files created by the driver have a negative  pixel height
(geotransform[5]) when opened with GDAL , so I guess that means it
looks like it is north up.

When the driver opens a south-up file, it has to invert the y axis
upon import to make it compatible with GDAL's data model.

For example, a gtiff landsat that has the following geo info:
Origin = (625970.000000000000000,8981830.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)

Which is the same when translated to netcdf and the netcdf is read by GDAL.

>
> 2) Depending on the answer to the above, are there any performance
> implications when gdal_translate'ing from and to north north up datasets
> in other formats?
>

The difference is that it has to loop over the Y Axis backwards when
reading or writing, so if a file is not organised by scanlines there
will be thrashing (as far as I understand, I'm not an I/O expert).

Our new implementation has a BOTTOM_UP option (default: yes), so the
user has an option to write it in GDAL's native order, if performance
is an issue.

For what it gives, here are some numbers for gdal_translate on a test
dataset (22239 x 33359 INT) . The netcdf creation takes longer than
gtiff, but the difference between south-up and north-up is small.

gtiff-> gtiff
real    0m34.251s
user    0m1.550s
sys     0m3.710s

gtiff->netcdf (BOTTOM_UP=YES)
real    1m3.869s
user    0m2.520s
sys     0m5.300s

gtiff->netcdf (BOTTOM_UP=NO)
real    1m35.077s
user    0m3.050s
sys     0m6.150s

gtiff->netcdf (driver in svn trunk, north-up)
real    2m4.186s
user    0m5.110s
sys     0m7.130s


>From our understanding of NetCDF 3's data organisation, there's not a
big penalty if you don't start reading at the start of the file, it's
supposed to be a fairly random-access format. I don't know about other
formats supported by GDAL, though.

As part of further changes (NETCDF-4 format and DEFLATE compression),
we will look more into performance issues, hopefully processing time
will get smaller.


> The changes to the driver seem major enough and with backward
> compatibility issues such that I think an RFC is reasonable. ?Calling
> for a vote on the existing document will likely be sufficient after
> any discussion here.
>

I'd like to add that the backward-compat issues are rather rare, in
most cases the old driver (since gdal 1.6) will read these files fine
(as CF-1 projection and geotransform info is supported by the old
driver). The -co options BOTTOM_UP and WRITE_GDAL_TAGS (default yes)
can make files that will be similar to what the current driver does.
Exceptions occur when there is no projection or geotransform, and
perhaps because of new (correct) export and import of certain
projections.

I agree that the changes are significant (new -co options, default
south-up export and change in projection parameters), so it's up to you guys.

Many thanks, Etienne

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
>
From warmerdam at pobox.com  Wed Oct 19 01:34:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 19 21:14:04 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <CA+TxYvO6Wwm9gGA-mA4J8TJ+uVS2sQWmo7X=ptnL4JR_Miw8tA@mail.gmail.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<CA+YzLBdjYLuAQpKn1nMzWb4NcmpY5eKg819KtFa5QZBROxAKMw@mail.gmail.com>
	<CA+TxYvO6Wwm9gGA-mA4J8TJ+uVS2sQWmo7X=ptnL4JR_Miw8tA@mail.gmail.com>
Message-ID: <4E9E615B.4050804@pobox.com>

On 11-10-18 10:19 PM, Etienne Tourigny wrote:
> Hi Frank,
>
> On Tue, Oct 18, 2011 at 7:22 PM, Frank Warmerdam<warmerdam@pobox.com>  wrote:
>> On Tue, Oct 18, 2011 at 1:10 PM, Etienne Tourigny
>> <etourigny.dev@gmail.com>  wrote:
>>> 2) Change to a default south-up orientation for NetCDF data
>>
>> Etienne,
>>
>> Could you expand on this a bit?  In particular I'm wondering if:
>>
>> 1) Is a south-up file represented as south up to GDAL applications?
>> That is, will geotransform[5] be negative or positive?
>
>
> Files created by the driver have a negative  pixel height
> (geotransform[5]) when opened with GDAL , so I guess that means it
> looks like it is north up.
>
> When the driver opens a south-up file, it has to invert the y axis
> upon import to make it compatible with GDAL's data model.
>
> For example, a gtiff landsat that has the following geo info:
> Origin = (625970.000000000000000,8981830.000000000000000)
> Pixel Size = (30.000000000000000,-30.000000000000000)
>
> Which is the same when translated to netcdf and the netcdf is read by GDAL.\

Etienne,

OK, it seems that to applications the change to producing
bottom-up files will not be particularly disruptive.

> For what it gives, here are some numbers for gdal_translate on a test
> dataset (22239 x 33359 INT) . The netcdf creation takes longer than
> gtiff, but the difference between south-up and north-up is small.
>
> gtiff->  gtiff
> real    0m34.251s
> user    0m1.550s
> sys     0m3.710s
>
> gtiff->netcdf (BOTTOM_UP=YES)
> real    1m3.869s
> user    0m2.520s
> sys     0m5.300s
>
> gtiff->netcdf (BOTTOM_UP=NO)
> real    1m35.077s
> user    0m3.050s
> sys     0m6.150s
>
> gtiff->netcdf (driver in svn trunk, north-up)
> real    2m4.186s
> user    0m5.110s
> sys     0m7.130s
>

I'm a bit confused about the above.  How are the "driver in svn trunk,
north-up" case and the "BOTTOM_UP=YES" case different?  Why is
"BOTTOM_UP=NO" case slower than "BOTTOM_UP_YES" case?

In any event, at least for this case the differences aren't devastating
and there are options to control what is done.  I am supportive of changes
that produce a more interoperable  result.

As PSC chair I will not be offended if you proceed with netcdf changes
*without* a formal RFC type vote on the changes.  The changes are fixing
bugs and don't cause real backward compatability issues and I'm willing to
treat you as the authority/owner for the driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From dev4cx4m9z at snkmail.com  Wed Oct 19 03:16:00 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Wed Oct 19 23:01:09 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
Message-ID: <002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>

Thanks for all the suggestions ? they have given me many possibilities to eliminate, but I still haven?t really got an answer to the original question.

 

Am I required to have proj.dll built with support for the datums/projections I want to use, or is it sufficient to set GDAL_DATA such that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not confident I can rebuild PROJ with the required datums, so I wish to avoid if possible. I?d even be prepared to use SetGeogCS explicitly as I only use a few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.

 

I have set GDAL_DATA to the correct folder.

I have checked that the datum numbers I use are in the gcs.csv file.

 

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of dev4cx4m9z@snkmail.com
Sent: Tuesday, October 18, 2011 4:12 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Confused about datum transformations

 

I?m not sure the code will help too much, but here are the relevant code fragments. I?m using a hand crafted VB.net wrapper which explains some of the syntax

 

Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84

Private MapSRS As OGRSpatialReference       ' Coordinate system of map

Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map

 

With WGS84SRS

    GDALError = .SetProjCS("WGS84 Datum")

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

    GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

With MapSRS

     GDALError = .SetProjCS("Map coordinate system")

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

     GDALError = .ImportFromEPSG(3577)

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map

Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())

 

Marc,

Can you provide the code leading to the error?

On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com> wrote:

I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?

 

My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11


This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   ??  

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/73558761/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Oct 19 03:36:15 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 19 23:22:25 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
Message-ID: <CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>

Marc,

You don't need to rebuild proj.4; you are already using it. Since you were
able to use ogr2ogr to do the transformation, it works.

What you need to do is find out if the arguments you are passing to the
transformation builder are good. Especially 'MapSRS'. If it doesn't show any
problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild
gdal.

On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:

> Thanks for all the suggestions ? they have given me many possibilities to
> eliminate, but I still haven?t really got an answer to the original
> question.****
>
> ** **
>
> Am I required to have proj.dll built with support for the
> datums/projections I want to use, or is it sufficient to set GDAL_DATA such
> that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not
> confident I can rebuild PROJ with the required datums, so I wish to avoid if
> possible. I?d even be prepared to use SetGeogCS explicitly as I only use a
> few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.*
> ***
>
> ** **
>
> I have set GDAL_DATA to the correct folder.****
>
> I have checked that the datum numbers I use are in the gcs.csv file.****
>
> ** **
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *dev4cx4m9z@snkmail.com
> *Sent:* Tuesday, October 18, 2011 4:12 AM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* RE: [gdal-dev] Confused about datum transformations****
>
> ** **
>
> I?m not sure the code will help too much, but here are the relevant code
> fragments. I?m using a hand crafted VB.net wrapper which explains some of
> the syntax****
>
> ** **
>
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
> WGS84****
>
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map****
>
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
> transform from WGS84 to map****
>
> ** **
>
> With WGS84SRS****
>
>     GDALError = .SetProjCS("WGS84 Datum")****
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system****
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
> End With****
>
> ** **
>
> With MapSRS****
>
>      GDALError = .SetProjCS("Map coordinate system")****
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
>      GDALError = .ImportFromEPSG(3577)****
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())****
>
> End With****
>
> ** **
>
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
> ' Create a coordinate transformation - WGS84 to map****
>
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())****
>
> ** **
>
> Marc,
>
> Can you provide the code leading to the error?****
>
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
> wrote:****
>
> I have a GIS database, and all data is stored in WGS84 datum. I have
> developed an application using GDAL, and I now need to translate my WGS84
> coordinates to several different datums, depending what map is loaded. I
> seem to be going around in circles, and need a nudge in the right direction.
> I am defining an OGRSpatialReference for each datum (WGS84 and current map)
> and then attempting to create an OGRCoordinateTransformation for the
> transformation.. This last step fails with a PROJ.4 error (?No PROJ.4
> translation for destination SRS, coordinate transformation initialization
> failed?****
>
>  ****
>
> My question is - Do I need PROJ.4 to do the translation? Can I not just use
> ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
> canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible
> as I?m not sure I can build it.****
>
>  ****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E****
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11*
> ***
>
>
> This email message is for the sole use of the intended recipient(s) and may
> contain confidential and privileged information. Any unauthorized review,
> use, disclosure or distribution is prohibited. If you are not the intended
> recipient, please contact the sender by reply email and delete the original
> message.   ??  ****
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11*
> ***
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/18c9f30a/attachment.html
From candini at meeo.it  Wed Oct 19 03:44:56 2011
From: candini at meeo.it (canduc17)
Date: Wed Oct 19 23:31:29 2011
Subject: [gdal-dev] Autoconf macro for gdal-config
Message-ID: <1319010296403-6907599.post@n2.nabble.com>

Compiling my gdal programs with the autotools, I would like to use
gdal-config in my configure.ac file, in order to manage gdal path on
different systems.

The same things is made for example with the PKG_CHECK_MODULES macro for
libraries which support pkg-config.

Is there a pre built macro to do the same thing?
Or should I write a new macro? Examples and hints on that would be really
appreciated...

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Autoconf-macro-for-gdal-config-tp6907599p6907599.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dev4cx4m9z at snkmail.com  Wed Oct 19 04:32:07 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Thu Oct 20 00:21:19 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
Message-ID: <003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>

I have not used org2ogr. I have just realised that the C API for GDAL uses a mixture of STD and CDECL. How annoying. Anyway ? I have carefully checked and all are correct. I get a stack balance problem if they are not anyway. It?s hard to see how I could get the arguments wrong ? one is the string ?WGS84?, and the other is an integer.

 

I still don?t know whether proj.dll is required.

 

From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL| [mailto:5rm5yuc82t@sneakemail.com] 
Sent: Wednesday, October 19, 2011 6:36 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Confused about datum transformations

 

Marc,

You don't need to rebuild proj.4; you are already using it.. Since you were able to use ogr2ogr to do the transformation, it works.

What you need to do is find out if the arguments you are passing to the transformation builder are good. Especially 'MapSRS'. If it doesn't show any problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild gdal.

On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:

Thanks for all the suggestions ? they have given me many possibilities to eliminate, but I still haven?t really got an answer to the original question.

 

Am I required to have proj.dll built with support for the datums/projections I want to use, or is it sufficient to set GDAL_DATA such that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not confident I can rebuild PROJ with the required datums, so I wish to avoid if possible. I?d even be prepared to use SetGeogCS explicitly as I only use a few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.

 

I have set GDAL_DATA to the correct folder.

I have checked that the datum numbers I use are in the gcs.csv file.

 

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of dev4cx4m9z@snkmail.com
Sent: Tuesday, October 18, 2011 4:12 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Confused about datum transformations

 

I?m not sure the code will help too much, but here are the relevant code fragments. I?m using a hand crafted VB.net wrapper which explains some of the syntax

 

Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84

Private MapSRS As OGRSpatialReference       ' Coordinate system of map

Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map

 

With WGS84SRS

    GDALError = .SetProjCS("WGS84 Datum")

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

    GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system

    Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

With MapSRS

     GDALError = .SetProjCS("Map coordinate system")

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

     GDALError = .ImportFromEPSG(3577)

     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

End With

 

ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map

Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())

 

Marc,

Can you provide the code leading to the error?

On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com> wrote:

I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?

 

My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584 <tel:%2B91-9494447584> 
17.2416N 80.1426E

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11


This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   ??  

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4558 - Release Date: 10/17/11


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E



No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/817a033d/attachment-0001.html
From julien.malik at c-s.fr  Wed Oct 19 04:52:56 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Thu Oct 20 00:43:09 2011
Subject: [gdal-dev] Backporting rename-internal-libtiff-symbols to GDAL
	1.8.0 ubuntu package ?
In-Reply-To: <201110181916.20329.even.rouault@mines-paris.org>
References: <4E9D8592.1070906@c-s.fr>
	<201110181916.20329.even.rouault@mines-paris.org>
Message-ID: <4E9E8FE8.3030107@c-s.fr>

Hi Even,

Le 18/10/2011 19:16, Even Rouault a ?crit :
>> Therefore, my plan is to provide, in our PPA ([3], [4]), yet-another
>> patched GDAL 1.8.0 package integrating this fix, and building gdal with
>> --with-rename-internal-libtiff-symbols=yes and
>> --with-rename-internal-libgeotiff-symbols=yes
>> I think applying and using the "rename-internal-libtiff-symbols" patch
>> will create an ABI compatible GDAL library (the ultimate goal is of
>> course to provide a package which is ABI-compatible with all the
>> packages of ubuntugis-unstable).
>>
>> I would appreciate the opinion of GDAL developers and Ubuntu/Debian
>> package maintainers about this assumption I'm making.
>> Do you see an issue that I would have missed ?
> My initial thought without checking :
> I don't think it should cause any ABI problem. IMHO, the symbols of the
> internal libtiff and libgeotiff have never been thought as belonging to the GDAL
> API/ABI. I believe that Debian uses --with-hide-internal-symbols by the way
> (to be confirmed by the package mainteners of course), so those symbols were
> already not available to binaries linking to GDAL.
>
> But...
> I've just done a test and the results are mixed. It appears that the internal
> libtiff symbols are not exported as expected when using  --with-hide-internal-
> symbol, but the libgeotiff ones are exported ... So, there could be issues if
> --with-rename-internal-libgeotiff-symbols is used and an external binary linked
> to GDAL hoping that it would export the libgeotiff symbols.

Seems coherent with what I know about this issue (on Ubuntu platforms).
The symbol problem results for us in segfaults in libtiff, after 
initializing the TIFF header by the geotiff symbol XTIFFOpen.
So it's the geotiff symbol from GDAL that is used.

But with-hide-internal-symbol has the effect of making it impossible to 
link objects needing geotiff symbols by only linking to GDAL (the 
problem appear later, at runtime).

So that external binary would have had to link explicitely to the "real" 
geotiff library at some point.


> Side node : I don't understand why Debian/Ubuntu uses internal libgeotiff, and
> not external libgeotiff ? I don't see a good reason for that.
>
> My conclusion :
> If you want to apply the patch and be on the safe side, you have to review all
> libs/apps that link to libgdal and check if they use libgeotiff symbols
> (symbols beginning by GTIF). If they link to both libgdal and (external)
> libgeotiff, then the patch should be OK. If they link only to libgdal, then
> there's an issue. And even if there's no problem with packaged applications,
> there's still the possibility of non-packaged ones depending on that...

Thanks for the input.
So for the moment I conclude it's worth working on it, I understand I'm 
on the safe side.


Julien



From julien.malik at c-s.fr  Wed Oct 19 04:58:58 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Thu Oct 20 00:49:29 2011
Subject: [gdal-dev] Backporting rename-internal-libtiff-symbols to GDAL
	1.8.0 ubuntu package ?
In-Reply-To: <20111018204728.GA2664@frankie.is-a-geek.org>
References: <4E9D8592.1070906@c-s.fr>
	<201110181916.20329.even.rouault@mines-paris.org>
	<20111018204728.GA2664@frankie.is-a-geek.org>
Message-ID: <4E9E9152.5060906@c-s.fr>

Hi Francesco,
>> My initial thought without checking :
>> I don't think it should cause any ABI problem. IMHO, the symbols of the
>> internal libtiff and libgeotiff have never been thought as belonging to the GDAL
>> API/ABI. I believe that Debian uses --with-hide-internal-symbols by the way
>> (to be confirmed by the package mainteners of course), so those symbols were
>> already not available to binaries linking to GDAL.
>>
> Confirmed. On those regards I would appreciate if you would have a try
> in linking by using current experimental gdal 1.8.1 available in the archive.
> On the basis of my trials tiff/geotiff/gdal can now be linked together in
> whatever order without problems, with that version.
>

I don't have a Debian unstable at hand to test, but I'll ask our Debian 
devs to give it a shot.

Julien
From dev4cx4m9z at snkmail.com  Wed Oct 19 05:21:24 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Thu Oct 20 01:13:26 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <4E9E9016.50605@york.ac.uk>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>
	<4E9E9016.50605@york.ac.uk>
Message-ID: <004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>

I have a big clue - I have inspected the output of ExportToWKT, and the results are interesting

        With WGS84SRS
            GDALError = .SetProjCS("WGS84 Datum")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces PROJCS["WGS84 Datum",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
        With UTMSRS
            GDALError = .SetProjCS("UTM coordinate system")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a UTM coordinate system
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces PROJCS["UTM coordinate system",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]

       With MapSRS
            GDALError = .SetProjCS("Map coordinate system")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .ImportFromEPSG(i)
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4283"]]

The error when I attempt to create the transformation is always with the SRS that seems to be a projection definition, not a datum. ImportFromEPSG seems to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be producing a "PROJCS"

I feel I'm very close to the answer, but I still can't see it.

-----Original Message-----
From: Peter J Halls P.Halls-at-york.ac.uk |GDAL| [mailto:6wyv643jct@sneakemail.com] 
Sent: Wednesday, October 19, 2011 7:54 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Subject: Re: [gdal-dev] Confused about datum transformations

A comment from another GDAL user, rather than the development team.

GDAL and OGR are actually C++ tools that have C, Java, Python and other language bindings.  What you have picked up is an artefact of the fact that GDAL is not just C.

The proj4 library for your platform is automatically loaded with GDAL and OGR: 
it must be present but no explicit action is required by the user.

Chaitanya's advice was to double check that the transformation parameters are being passed correctly.  Datum transformations *are* fiddly (full stop) to specify and this advice is sound.  You appear to be specifying two parts of the transformation, presumably being content with the default values for the other parameters.  Ideally, you need to get the system to regurgitate its understanding of your parameters in the WKT version of the final transformation specification - ie the complete string.  This is what you are being advised to do.

Problems like this are not confined to GDAL / OGR: I've lost count of the number of times I've handled projection problems here.  What sounds to be a simple operation is not trivial and unpicking problems most often requires an understanding of the transformation method and all the parameters applied.

Hoping that helps,

Peter

dev4cx4m9z@snkmail.com wrote:
> I have not used org2ogr. I have just realised that the C API for GDAL 
> uses a mixture of STD and CDECL. How annoying. Anyway ? I have 
> carefully checked and all are correct. I get a stack balance problem 
> if they are not anyway. It?s hard to see how I could get the arguments wrong ? one is the string ?WGS84?, and the other is an integer.
> 
>  
> 
> I still don?t know whether proj.dll is required.
> 
>  
> 
> From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL| 
> [mailto:5rm5yuc82t@sneakemail.com]
> Sent: Wednesday, October 19, 2011 6:36 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Confused about datum transformations
> 
>  
> 
> Marc,
> 
> You don't need to rebuild proj.4; you are already using it.. Since you were able to use ogr2ogr to do the transformation, it works.
> 
> What you need to do is find out if the arguments you are passing to the transformation builder are good. Especially 'MapSRS'. If it doesn't show any problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild gdal.
> 
> On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
> 
> Thanks for all the suggestions ? they have given me many possibilities to eliminate, but I still haven?t really got an answer to the original question.
> 
>  
> 
> Am I required to have proj.dll built with support for the datums/projections I want to use, or is it sufficient to set GDAL_DATA such that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not confident I can rebuild PROJ with the required datums, so I wish to avoid if possible. I?d even be prepared to use SetGeogCS explicitly as I only use a few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.
> 
>  
> 
> I have set GDAL_DATA to the correct folder.
> 
> I have checked that the datum numbers I use are in the gcs.csv file.
> 
>  
> 
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org 
> <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of 
> dev4cx4m9z@snkmail.com
> Sent: Tuesday, October 18, 2011 4:12 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Confused about datum transformations
> 
>  
> 
> I?m not sure the code will help too much, but here are the relevant 
> code fragments. I?m using a hand crafted VB.net wrapper which explains 
> some of the syntax
> 
>  
> 
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84
> 
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map
> 
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map
> 
>  
> 
> With WGS84SRS
> 
>     GDALError = .SetProjCS("WGS84 Datum")
> 
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system
> 
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
> End With
> 
>  
> 
> With MapSRS
> 
>      GDALError = .SetProjCS("Map coordinate system")
> 
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
>      GDALError = .ImportFromEPSG(3577)
> 
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
> End With
> 
>  
> 
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map
> 
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
> 
>  
> 
> Marc,
> 
> Can you provide the code leading to the error?
> 
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com> wrote:
> 
> I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?
> 
>  
> 
> My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.
> 
>  
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> 
> 
> ----------------------------------------------------------------------
> --
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
             Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

From silyko at gmail.com  Wed Oct 19 05:54:53 2011
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Thu Oct 20 01:48:29 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>
	<4E9E9016.50605@york.ac.uk>
	<004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
Message-ID: <CANzGYpTsB1yvLNeLz2f2XctM-kZSL0=_bkiPLv3qSDD9vmdG+A@mail.gmail.com>

Hi Marc,

  Just to understand your problem fully:  You have data in your database in
WGS84, in geographical coordinates, or what? That would correspond to a
srs=osr.SpatialReference(), srs.SetWellKnownGeogCS("WGS84").

   What kind of projection or geographical coordinate system do you want to
project to? It seems to be: EPSG:3557 which is: NAD83(NSRS2007) / Maine
East. Is this correct? If you have the GDAL_DATA env-variable pointing to
the right directory (containing EPSG definitions etc), gdal should be able
to also do:
srs2=osr.SpatialReference(), srs2.ImportFromEPSG(3557), which becomes:

>>> srs2.ExportToPrettyWkt()
'PROJCS["NAD83(NSRS2007) / Maine East",\n
GEOGCS["NAD83(NSRS2007)",\n
DATUM["NAD83_National_Spatial_Reference_System_2007",\n
SPHEROID["GRS 1980",6378137,298.257222101,\n
AUTHORITY["EPSG","7019"]],\n
       TOWGS84[0,0,0,0,0,0,0],\n
AUTHORITY["EPSG","6759"]],\n        PRIMEM["Greenwich",0,\n
AUTHORITY["EPSG","8901"]],\n
UNIT["degree",0.01745329251994328,\n
AUTHORITY["EPSG","9122"]],\n        AUTHORITY["EPSG","4759"]],\n
UNIT["metre",1,\n        AUTHORITY["EPSG","9001"]],\n
PROJECTION["Transverse_Mercator"],\n
PARAMETER["latitude_of_origin",43.66666666666666],\n
PARAMETER["central_meridian",-68.5],\n
PARAMETER["scale_factor",0.9999],\n
PARAMETER["false_easting",300000],\n    PARAMETER["false_northing",0],\n
AUTHORITY["EPSG","3557"],\n    AXIS["X",EAST],\n    AXIS["Y",NORTH]]'
'

If you want to perform the actual coordinate transformation, besides just
having descriptions of the systems, you'll definitely need to have proj4.dll
somewhere in your system, where gdal can find it (I guess besides gdal.dll
or somewhere in your PATH).

Cheers,
Simon


On Wed, Oct 19, 2011 at 11:21 AM, <dev4cx4m9z@snkmail.com> wrote:

> I have a big clue - I have inspected the output of ExportToWKT, and the
> results are interesting
>
>        With WGS84SRS
>            GDALError = .SetProjCS("WGS84 Datum")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>            GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With
>
> Produces PROJCS["WGS84 Datum",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
>        With UTMSRS
>            GDALError = .SetProjCS("UTM coordinate system")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>            GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a
> UTM coordinate system
>             Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With
>
> Produces PROJCS["UTM coordinate system",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
>
>       With MapSRS
>            GDALError = .SetProjCS("Map coordinate system")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>             GDALError = .ImportFromEPSG(i)
>             Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With
>
> Produces
> GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS
> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4283"]]
>
> The error when I attempt to create the transformation is always with the
> SRS that seems to be a projection definition, not a datum. ImportFromEPSG
> seems to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be
> producing a "PROJCS"
>
> I feel I'm very close to the answer, but I still can't see it.
>
> -----Original Message-----
> From: Peter J Halls P.Halls-at-york.ac.uk |GDAL| [mailto:
> 6wyv643jct@sneakemail.com]
> Sent: Wednesday, October 19, 2011 7:54 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Subject: Re: [gdal-dev] Confused about datum transformations
>
> A comment from another GDAL user, rather than the development team.
>
> GDAL and OGR are actually C++ tools that have C, Java, Python and other
> language bindings.  What you have picked up is an artefact of the fact that
> GDAL is not just C.
>
> The proj4 library for your platform is automatically loaded with GDAL and
> OGR:
> it must be present but no explicit action is required by the user.
>
> Chaitanya's advice was to double check that the transformation parameters
> are being passed correctly.  Datum transformations *are* fiddly (full stop)
> to specify and this advice is sound.  You appear to be specifying two parts
> of the transformation, presumably being content with the default values for
> the other parameters.  Ideally, you need to get the system to regurgitate
> its understanding of your parameters in the WKT version of the final
> transformation specification - ie the complete string.  This is what you are
> being advised to do.
>
> Problems like this are not confined to GDAL / OGR: I've lost count of the
> number of times I've handled projection problems here.  What sounds to be a
> simple operation is not trivial and unpicking problems most often requires
> an understanding of the transformation method and all the parameters
> applied.
>
> Hoping that helps,
>
> Peter
>
> dev4cx4m9z@snkmail.com wrote:
> > I have not used org2ogr. I have just realised that the C API for GDAL
> > uses a mixture of STD and CDECL. How annoying. Anyway ? I have
> > carefully checked and all are correct. I get a stack balance problem
> > if they are not anyway. It?s hard to see how I could get the arguments
> wrong ? one is the string ?WGS84?, and the other is an integer.
> >
> >
> >
> > I still don?t know whether proj.dll is required.
> >
> >
> >
> > From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL|
> > [mailto:5rm5yuc82t@sneakemail.com]
> > Sent: Wednesday, October 19, 2011 6:36 PM
> > To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> > Cc: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] Confused about datum transformations
> >
> >
> >
> > Marc,
> >
> > You don't need to rebuild proj.4; you are already using it.. Since you
> were able to use ogr2ogr to do the transformation, it works.
> >
> > What you need to do is find out if the arguments you are passing to the
> transformation builder are good. Especially 'MapSRS'. If it doesn't show any
> problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild
> gdal.
> >
> > On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
> >
> > Thanks for all the suggestions ? they have given me many possibilities to
> eliminate, but I still haven?t really got an answer to the original
> question.
> >
> >
> >
> > Am I required to have proj.dll built with support for the
> datums/projections I want to use, or is it sufficient to set GDAL_DATA such
> that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not
> confident I can rebuild PROJ with the required datums, so I wish to avoid if
> possible. I?d even be prepared to use SetGeogCS explicitly as I only use a
> few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.
> >
> >
> >
> > I have set GDAL_DATA to the correct folder.
> >
> > I have checked that the datum numbers I use are in the gcs.csv file.
> >
> >
> >
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org
> > <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of
> > dev4cx4m9z@snkmail.com
> > Sent: Tuesday, October 18, 2011 4:12 AM
> > To: gdal-dev@lists.osgeo.org
> > Subject: RE: [gdal-dev] Confused about datum transformations
> >
> >
> >
> > I?m not sure the code will help too much, but here are the relevant
> > code fragments. I?m using a hand crafted VB.net wrapper which explains
> > some of the syntax
> >
> >
> >
> > Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
> WGS84
> >
> > Private MapSRS As OGRSpatialReference       ' Coordinate system of map
> >
> > Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
> transform from WGS84 to map
> >
> >
> >
> > With WGS84SRS
> >
> >     GDALError = .SetProjCS("WGS84 Datum")
> >
> >     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> >     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system
> >
> >     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> > End With
> >
> >
> >
> > With MapSRS
> >
> >      GDALError = .SetProjCS("Map coordinate system")
> >
> >      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> >      GDALError = .ImportFromEPSG(3577)
> >
> >      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> > End With
> >
> >
> >
> > ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
>    ' Create a coordinate transformation - WGS84 to map
> >
> > Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
> >
> >
> >
> > Marc,
> >
> > Can you provide the code leading to the error?
> >
> > On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
> wrote:
> >
> > I have a GIS database, and all data is stored in WGS84 datum. I have
> developed an application using GDAL, and I now need to translate my WGS84
> coordinates to several different datums, depending what map is loaded. I
> seem to be going around in circles, and need a nudge in the right direction.
> I am defining an OGRSpatialReference for each datum (WGS84 and current map)
> and then attempting to create an OGRCoordinateTransformation for the
> transformation.. This last step fails with a PROJ.4 error (?No PROJ.4
> translation for destination SRS, coordinate transformation initialization
> failed?
> >
> >
> >
> > My question is - Do I need PROJ.4 to do the translation? Can I not just
> use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
> canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible
> as I?m not sure I can build it.
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> >
> >
> > ----------------------------------------------------------------------
> > --
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
>                Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>             Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
>
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/d6a898e3/attachment-0001.html
From dev4cx4m9z at snkmail.com  Wed Oct 19 06:09:04 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Thu Oct 20 02:03:33 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>	<4E9E9016.50605@york.ac.uk>
	<004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
Message-ID: <004b01cc8e47$2285ad70$67910850$@snkmail.com>

Well - I have it working, without fully understanding why. I used a SetUTM on each SRS to give it a projection, and all seems OK.  I'm still getting a GEOGCS only for the first SRS (MapSRS) but it doesn't seem to matter.

Some of my map use the "Lambert Conformal Conic" projection. How do I set that instead of UTM?

"GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4283"]"

"PROJCS["UTM coordinate system",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-3],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]"

"PROJCS["WGS84 Datum",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-3],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]"


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of dev4cx4m9z-at-snkmail.com |GDAL|
Sent: Wednesday, October 19, 2011 8:21 PM
To: marc.hillman@tpg.com.au; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Confused about datum transformations

I have a big clue - I have inspected the output of ExportToWKT, and the results are interesting

        With WGS84SRS
            GDALError = .SetProjCS("WGS84 Datum")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces PROJCS["WGS84 Datum",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
        With UTMSRS
            GDALError = .SetProjCS("UTM coordinate system")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a UTM coordinate system
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces PROJCS["UTM coordinate system",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]

       With MapSRS
            GDALError = .SetProjCS("Map coordinate system")
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
            GDALError = .ImportFromEPSG(i)
            Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
        End With

Produces GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4283"]]

The error when I attempt to create the transformation is always with the SRS that seems to be a projection definition, not a datum. ImportFromEPSG seems to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be producing a "PROJCS"

I feel I'm very close to the answer, but I still can't see it.

-----Original Message-----
From: Peter J Halls P.Halls-at-york.ac.uk |GDAL| [mailto:6wyv643jct@sneakemail.com]
Sent: Wednesday, October 19, 2011 7:54 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Subject: Re: [gdal-dev] Confused about datum transformations

A comment from another GDAL user, rather than the development team.

GDAL and OGR are actually C++ tools that have C, Java, Python and other language bindings.  What you have picked up is an artefact of the fact that GDAL is not just C.

The proj4 library for your platform is automatically loaded with GDAL and OGR: 
it must be present but no explicit action is required by the user.

Chaitanya's advice was to double check that the transformation parameters are being passed correctly.  Datum transformations *are* fiddly (full stop) to specify and this advice is sound.  You appear to be specifying two parts of the transformation, presumably being content with the default values for the other parameters.  Ideally, you need to get the system to regurgitate its understanding of your parameters in the WKT version of the final transformation specification - ie the complete string.  This is what you are being advised to do.

Problems like this are not confined to GDAL / OGR: I've lost count of the number of times I've handled projection problems here.  What sounds to be a simple operation is not trivial and unpicking problems most often requires an understanding of the transformation method and all the parameters applied.

Hoping that helps,

Peter

dev4cx4m9z@snkmail.com wrote:
> I have not used org2ogr. I have just realised that the C API for GDAL 
> uses a mixture of STD and CDECL. How annoying. Anyway ? I have 
> carefully checked and all are correct. I get a stack balance problem 
> if they are not anyway. It?s hard to see how I could get the arguments wrong ? one is the string ?WGS84?, and the other is an integer.
> 
>  
> 
> I still don?t know whether proj.dll is required.
> 
>  
> 
> From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL| 
> [mailto:5rm5yuc82t@sneakemail.com]
> Sent: Wednesday, October 19, 2011 6:36 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Confused about datum transformations
> 
>  
> 
> Marc,
> 
> You don't need to rebuild proj.4; you are already using it.. Since you were able to use ogr2ogr to do the transformation, it works.
> 
> What you need to do is find out if the arguments you are passing to the transformation builder are good. Especially 'MapSRS'. If it doesn't show any problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild gdal.
> 
> On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
> 
> Thanks for all the suggestions ? they have given me many possibilities to eliminate, but I still haven?t really got an answer to the original question.
> 
>  
> 
> Am I required to have proj.dll built with support for the datums/projections I want to use, or is it sufficient to set GDAL_DATA such that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not confident I can rebuild PROJ with the required datums, so I wish to avoid if possible. I?d even be prepared to use SetGeogCS explicitly as I only use a few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.
> 
>  
> 
> I have set GDAL_DATA to the correct folder.
> 
> I have checked that the datum numbers I use are in the gcs.csv file.
> 
>  
> 
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org
> <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of 
> dev4cx4m9z@snkmail.com
> Sent: Tuesday, October 18, 2011 4:12 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Confused about datum transformations
> 
>  
> 
> I?m not sure the code will help too much, but here are the relevant 
> code fragments. I?m using a hand crafted VB.net wrapper which explains 
> some of the syntax
> 
>  
> 
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in WGS84
> 
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map
> 
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate transform from WGS84 to map
> 
>  
> 
> With WGS84SRS
> 
>     GDALError = .SetProjCS("WGS84 Datum")
> 
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84 coordinate system
> 
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
> End With
> 
>  
> 
> With MapSRS
> 
>      GDALError = .SetProjCS("Map coordinate system")
> 
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
>      GDALError = .ImportFromEPSG(3577)
> 
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> 
> End With
> 
>  
> 
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)        ' Create a coordinate transformation - WGS84 to map
> 
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
> 
>  
> 
> Marc,
> 
> Can you provide the code leading to the error?
> 
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com> wrote:
> 
> I have a GIS database, and all data is stored in WGS84 datum. I have developed an application using GDAL, and I now need to translate my WGS84 coordinates to several different datums, depending what map is loaded. I seem to be going around in circles, and need a nudge in the right direction. I am defining an OGRSpatialReference for each datum (WGS84 and current map) and then attempting to create an OGRCoordinateTransformation for the transformation.. This last step fails with a PROJ.4 error (?No PROJ.4 translation for destination SRS, coordinate transformation initialization failed?
> 
>  
> 
> My question is - Do I need PROJ.4 to do the translation? Can I not just use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible as I?m not sure I can build it.
> 
>  
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> 
> 
> ----------------------------------------------------------------------
> --
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
             Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11


From dev4cx4m9z at snkmail.com  Wed Oct 19 06:53:44 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Thu Oct 20 02:50:36 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <CANzGYpTsB1yvLNeLz2f2XctM-kZSL0=_bkiPLv3qSDD9vmdG+A@mail.gmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>	<4E9E9016.50605@york.ac.uk>
	<004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
	<CANzGYpTsB1yvLNeLz2f2XctM-kZSL0=_bkiPLv3qSDD9vmdG+A@mail.gmail.com>
Message-ID: <005101cc8e4d$60cee6e0$226cb4a0$@snkmail.com>

Well, it's 'working' (sort of) but I'm still confused. I'll try to explain
better what I'm trying to do.

 

I have a database of map coordinates stored in WGS84 datum.

I load and display a map in my application which may, or may not, use the
WGS84 datum. I am setting up a coordinatetransformation to convert WGS84
data to whatever datum the map is. I then use another transformation to
translate to screen coordinates.

 

I'm only worrying about the datum conversion issue first. I will worry about
the map projection issue later.

 

I have successfully created a number of CT's with no error. When invoked,
they're giving the wrong answer, but I'm still looking into that.

 

I still don't understand proj.dll. I downloaded the prebuilt proj.dll, and
it seems to only have a few datums. It certainly does not have the ones I'm
using. Does it matter, or must proj.dll contain all the datums I intend to
use? Is the data pointed to by GDAL_DATA sufficient to translate from any
known datum to another?

 

From: Simon Lyngby Kokkendorff silyko-at-gmail.com |GDAL|
[mailto:r0dk224axt@sneakemail.com] 
Sent: Wednesday, October 19, 2011 8:55 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Confused about datum transformations

 

Hi Marc,

  Just to understand your problem fully:  You have data in your database in
WGS84, in geographical coordinates, or what? That would correspond to a
srs=osr.SpatialReference(), srs.SetWellKnownGeogCS("WGS84").

   What kind of projection or geographical coordinate system do you want to
project to? It seems to be: EPSG:3557 which is: NAD83(NSRS2007) / Maine
East. Is this correct? If you have the GDAL_DATA env-variable pointing to
the right directory (containing EPSG definitions etc), gdal should be able
to also do:
srs2=osr.SpatialReference(), srs2.ImportFromEPSG(3557), which becomes:

>>> srs2.ExportToPrettyWkt()
'PROJCS["NAD83(NSRS2007) / Maine East",\n    GEOGCS["NAD83(NSRS2007)",\n
DATUM["NAD83_National_Spatial_Reference_System_2007",\n
SPHEROID["GRS 1980",6378137,298.257222101,\n
AUTHORITY["EPSG","7019"]],\n
       TOWGS84[0,0,0,0,0,0,0],\n            AUTHORITY["EPSG","6759"]],\n
PRIMEM["Greenwich",0,\n            AUTHORITY["EPSG","8901"]],\n
UNIT["degree",0.01745329251994328,\n            AUTHORITY["EPSG","9122"]],\n
AUTHORITY["EPSG","4759"]],\n    UNIT["metre",1,\n
AUTHORITY["EPSG","9001"]],\n    PROJECTION["Transverse_Mercator"],\n
PARAMETER["latitude_of_origin",43.66666666666666],\n
PARAMETER["central_meridian",-68.5],\n
PARAMETER["scale_factor",0.9999],\n    PARAMETER["false_easting",300000],\n
PARAMETER["false_northing",0],\n    AUTHORITY["EPSG","3557"],\n
AXIS["X",EAST],\n    AXIS["Y",NORTH]]'
'

If you want to perform the actual coordinate transformation, besides just
having descriptions of the systems, you'll definitely need to have proj4.dll
somewhere in your system, where gdal can find it (I guess besides gdal.dll
or somewhere in your PATH). 

Cheers,
Simon



On Wed, Oct 19, 2011 at 11:21 AM, <dev4cx4m9z@snkmail.com> wrote:

I have a big clue - I have inspected the output of ExportToWKT, and the
results are interesting


       With WGS84SRS
           GDALError = .SetProjCS("WGS84 Datum")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
           GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces PROJCS["WGS84 Datum",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],A
UTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT
["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","432
6"]]]
       With UTMSRS
           GDALError = .SetProjCS("UTM coordinate system")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
           GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a
UTM coordinate system

           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces PROJCS["UTM coordinate system",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],A
UTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT
["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","432
6"]]]


      With MapSRS
           GDALError = .SetProjCS("Map coordinate system")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

           GDALError = .ImportFromEPSG(i)

           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces
GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0]
,AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UN
IT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4
283"]]

The error when I attempt to create the transformation is always with the SRS
that seems to be a projection definition, not a datum. ImportFromEPSG seems
to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be
producing a "PROJCS"

I feel I'm very close to the answer, but I still can't see it.


-----Original Message-----
From: Peter J Halls P.Halls-at-york.ac.uk |GDAL|
[mailto:6wyv643jct@sneakemail.com]
Sent: Wednesday, October 19, 2011 7:54 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Subject: Re: [gdal-dev] Confused about datum transformations

A comment from another GDAL user, rather than the development team.

GDAL and OGR are actually C++ tools that have C, Java, Python and other
language bindings.  What you have picked up is an artefact of the fact that
GDAL is not just C.

The proj4 library for your platform is automatically loaded with GDAL and
OGR:
it must be present but no explicit action is required by the user.

Chaitanya's advice was to double check that the transformation parameters
are being passed correctly.  Datum transformations *are* fiddly (full stop)
to specify and this advice is sound.  You appear to be specifying two parts
of the transformation, presumably being content with the default values for
the other parameters.  Ideally, you need to get the system to regurgitate
its understanding of your parameters in the WKT version of the final
transformation specification - ie the complete string.  This is what you are
being advised to do.

Problems like this are not confined to GDAL / OGR: I've lost count of the
number of times I've handled projection problems here.  What sounds to be a
simple operation is not trivial and unpicking problems most often requires
an understanding of the transformation method and all the parameters
applied.

Hoping that helps,

Peter


dev4cx4m9z@snkmail.com wrote:
> I have not used org2ogr. I have just realised that the C API for GDAL
> uses a mixture of STD and CDECL. How annoying. Anyway - I have
> carefully checked and all are correct. I get a stack balance problem
> if they are not anyway. It's hard to see how I could get the arguments
wrong - one is the string "WGS84", and the other is an integer.
>
>
>
> I still don't know whether proj.dll is required.
>
>
>
> From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL|
> [mailto:5rm5yuc82t@sneakemail.com]
> Sent: Wednesday, October 19, 2011 6:36 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Confused about datum transformations
>
>
>
> Marc,
>
> You don't need to rebuild proj.4; you are already using it.. Since you
were able to use ogr2ogr to do the transformation, it works.
>
> What you need to do is find out if the arguments you are passing to the
transformation builder are good. Especially 'MapSRS'. If it doesn't show any
problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild
gdal.
>
> On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
>
> Thanks for all the suggestions - they have given me many possibilities to
eliminate, but I still haven't really got an answer to the original
question.
>
>
>
> Am I required to have proj.dll built with support for the
datums/projections I want to use, or is it sufficient to set GDAL_DATA such
that gcs.csv and pcs.csv are visible? I'm working in VB.NET, and I'm not
confident I can rebuild PROJ with the required datums, so I wish to avoid if
possible. I'd even be prepared to use SetGeogCS explicitly as I only use a
few datums. If I use SetGeogCS, I can't see what purpose proj.dll serves.
>
>
>
> I have set GDAL_DATA to the correct folder.
>
> I have checked that the datum numbers I use are in the gcs.csv file.
>
>
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org

> <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of

> dev4cx4m9z@snkmail.com <mailto:dev4cx4m9z@snkmail..com> 
> Sent: Tuesday, October 18, 2011 4:12 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Confused about datum transformations
>
>
>
> I'm not sure the code will help too much, but here are the relevant
> code fragments. I'm using a hand crafted VB.net wrapper which explains
> some of the syntax
>
>
>
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
WGS84
>
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map
>
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
transform from WGS84 to map
>
>
>
> With WGS84SRS
>
>     GDALError = .SetProjCS("WGS84 Datum")
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
> End With
>
>
>
> With MapSRS
>
>      GDALError = .SetProjCS("Map coordinate system")
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
>      GDALError = .ImportFromEPSG(3577)
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
> End With
>
>
>
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
' Create a coordinate transformation - WGS84 to map
>
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
>
>
>
> Marc,
>
> Can you provide the code leading to the error?
>
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
wrote:
>
> I have a GIS database, and all data is stored in WGS84 datum. I have
developed an application using GDAL, and I now need to translate my WGS84
coordinates to several different datums, depending what map is loaded. I
seem to be going around in circles, and need a nudge in the right direction.
I am defining an OGRSpatialReference for each datum (WGS84 and current map)
and then attempting to create an OGRCoordinateTransformation for the
transformation.. This last step fails with a PROJ.4 error ("No PROJ.4
translation for destination SRS, coordinate transformation initialization
failed"
>
>
>
> My question is - Do I need PROJ.4 to do the translation? Can I not just
use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
canned list of all the WKT somewhere?  I'm keen to avoid PROJ.4 if possible
as I'm not sure I can build it.
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
>

> ----------------------------------------------------------------------
> --

>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--

----------------------------------------------------------------------------
----
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
            Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------
----



-----

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/538539dc/attachment-0001.html
From silyko at gmail.com  Wed Oct 19 07:31:38 2011
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Thu Oct 20 03:30:29 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <005101cc8e4d$60cee6e0$226cb4a0$@snkmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>
	<4E9E9016.50605@york.ac.uk>
	<004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
	<CANzGYpTsB1yvLNeLz2f2XctM-kZSL0=_bkiPLv3qSDD9vmdG+A@mail.gmail.com>
	<005101cc8e4d$60cee6e0$226cb4a0$@snkmail.com>
Message-ID: <CANzGYpTJcfNiQWghL4nyKqkYW-FFCP-NjSjQdu7z0XWEhTi96A@mail.gmail.com>

Hi Marc,

 I suppose that when you say: WGS84 datum, you mean geographical coordinates
based on the WGS84-datum (i.e. lat,lon)?
 Which other datums are involved?

Cheers,
Simon


On Wed, Oct 19, 2011 at 12:53 PM, <dev4cx4m9z@snkmail.com> wrote:

> Well, it?s ?working? (sort of) but I?m still confused. I?ll try to explain
> better what I?m trying to do.****
>
> ** **
>
> I have a database of map coordinates stored in WGS84 datum.****
>
> I load and display a map in my application which may, or may not, use the
> WGS84 datum. I am setting up a coordinatetransformation to convert WGS84
> data to whatever datum the map is. I then use another transformation to
> translate to screen coordinates.****
>
> ** **
>
> I?m only worrying about the datum conversion issue first. I will worry
> about the map projection issue later.****
>
> ** **
>
> I have successfully created a number of CT?s with no error. When invoked,
> they?re giving the wrong answer, but I?m still looking into that.****
>
> ** **
>
> I still don?t understand proj.dll. I downloaded the prebuilt proj.dll, and
> it seems to only have a few datums. It certainly does not have the ones I?m
> using. Does it matter, or must proj.dll contain all the datums I intend to
> use? Is the data pointed to by GDAL_DATA sufficient to translate from any
> known datum to another?****
>
> ** **
>
> *From:* Simon Lyngby Kokkendorff silyko-at-gmail.com |GDAL| [mailto:
> r0dk224axt@sneakemail.com]
> *Sent:* Wednesday, October 19, 2011 8:55 PM
>
> *To:* marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Confused about datum transformations****
>
> ** **
>
> Hi Marc,
>
>   Just to understand your problem fully:  You have data in your database in
> WGS84, in geographical coordinates, or what? That would correspond to a
> srs=osr.SpatialReference(), srs.SetWellKnownGeogCS("WGS84").
>
>    What kind of projection or geographical coordinate system do you want to
> project to? It seems to be: EPSG:3557 which is: NAD83(NSRS2007) / Maine
> East. Is this correct? If you have the GDAL_DATA env-variable pointing to
> the right directory (containing EPSG definitions etc), gdal should be able
> to also do:
> srs2=osr.SpatialReference(), srs2.ImportFromEPSG(3557), which becomes:
>
> >>> srs2.ExportToPrettyWkt()
> 'PROJCS["NAD83(NSRS2007) / Maine East",\n
> GEOGCS["NAD83(NSRS2007)",\n
> DATUM["NAD83_National_Spatial_Reference_System_2007",\n
> SPHEROID["GRS 1980",6378137,298.257222101,\n
> AUTHORITY["EPSG","7019"]],\n
>        TOWGS84[0,0,0,0,0,0,0],\n
> AUTHORITY["EPSG","6759"]],\n        PRIMEM["Greenwich",0,\n
> AUTHORITY["EPSG","8901"]],\n
> UNIT["degree",0.01745329251994328,\n
> AUTHORITY["EPSG","9122"]],\n        AUTHORITY["EPSG","4759"]],\n
> UNIT["metre",1,\n        AUTHORITY["EPSG","9001"]],\n
> PROJECTION["Transverse_Mercator"],\n
> PARAMETER["latitude_of_origin",43.66666666666666],\n
> PARAMETER["central_meridian",-68.5],\n
> PARAMETER["scale_factor",0.9999],\n
> PARAMETER["false_easting",300000],\n    PARAMETER["false_northing",0],\n
> AUTHORITY["EPSG","3557"],\n    AXIS["X",EAST],\n    AXIS["Y",NORTH]]'
> '
>
> If you want to perform the actual coordinate transformation, besides just
> having descriptions of the systems, you'll definitely need to have proj4.dll
> somewhere in your system, where gdal can find it (I guess besides gdal.dll
> or somewhere in your PATH).
>
> Cheers,
> Simon
>
> ****
>
> On Wed, Oct 19, 2011 at 11:21 AM, <dev4cx4m9z@snkmail.com> wrote:****
>
> I have a big clue - I have inspected the output of ExportToWKT, and the
> results are interesting****
>
>
>        With WGS84SRS
>            GDALError = .SetProjCS("WGS84 Datum")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>            GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With****
>
> Produces PROJCS["WGS84 Datum",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
>        With UTMSRS
>            GDALError = .SetProjCS("UTM coordinate system")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>            GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a
> UTM coordinate system****
>
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With****
>
> Produces PROJCS["UTM coordinate system",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]]
> ****
>
>
>       With MapSRS
>            GDALError = .SetProjCS("Map coordinate system")
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())****
>
>            GDALError = .ImportFromEPSG(i)****
>
>            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
> GetLastErrorMsg())
>        End With****
>
> Produces
> GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS
> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4283"]]
>
> The error when I attempt to create the transformation is always with the
> SRS that seems to be a projection definition, not a datum. ImportFromEPSG
> seems to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be
> producing a "PROJCS"
>
> I feel I'm very close to the answer, but I still can't see it.****
>
>
> -----Original Message-----
> From: Peter J Halls P.Halls-at-york.ac.uk |GDAL| [mailto:
> 6wyv643jct@sneakemail.com]
> Sent: Wednesday, October 19, 2011 7:54 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Subject: Re: [gdal-dev] Confused about datum transformations****
>
> A comment from another GDAL user, rather than the development team.
>
> GDAL and OGR are actually C++ tools that have C, Java, Python and other
> language bindings.  What you have picked up is an artefact of the fact that
> GDAL is not just C.
>
> The proj4 library for your platform is automatically loaded with GDAL and
> OGR:
> it must be present but no explicit action is required by the user.
>
> Chaitanya's advice was to double check that the transformation parameters
> are being passed correctly.  Datum transformations *are* fiddly (full stop)
> to specify and this advice is sound.  You appear to be specifying two parts
> of the transformation, presumably being content with the default values for
> the other parameters.  Ideally, you need to get the system to regurgitate
> its understanding of your parameters in the WKT version of the final
> transformation specification - ie the complete string.  This is what you are
> being advised to do.
>
> Problems like this are not confined to GDAL / OGR: I've lost count of the
> number of times I've handled projection problems here.  What sounds to be a
> simple operation is not trivial and unpicking problems most often requires
> an understanding of the transformation method and all the parameters
> applied.
>
> Hoping that helps,
>
> Peter****
>
>
> dev4cx4m9z@snkmail.com wrote:
> > I have not used org2ogr. I have just realised that the C API for GDAL
> > uses a mixture of STD and CDECL. How annoying. Anyway ? I have
> > carefully checked and all are correct. I get a stack balance problem
> > if they are not anyway. It?s hard to see how I could get the arguments
> wrong ? one is the string ?WGS84?, and the other is an integer.
> >
> >
> >
> > I still don?t know whether proj.dll is required.
> >
> >
> >
> > From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL|
> > [mailto:5rm5yuc82t@sneakemail.com]
> > Sent: Wednesday, October 19, 2011 6:36 PM
> > To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> > Cc: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] Confused about datum transformations
> >
> >
> >
> > Marc,
> >
> > You don't need to rebuild proj.4; you are already using it.. Since you
> were able to use ogr2ogr to do the transformation, it works.
> >
> > What you need to do is find out if the arguments you are passing to the
> transformation builder are good. Especially 'MapSRS'. If it doesn't show any
> problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild
> gdal.
> >
> > On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
> >
> > Thanks for all the suggestions ? they have given me many possibilities to
> eliminate, but I still haven?t really got an answer to the original
> question.
> >
> >
> >
> > Am I required to have proj.dll built with support for the
> datums/projections I want to use, or is it sufficient to set GDAL_DATA such
> that gcs.csv and pcs.csv are visible? I?m working in VB.NET, and I?m not
> confident I can rebuild PROJ with the required datums, so I wish to avoid if
> possible. I?d even be prepared to use SetGeogCS explicitly as I only use a
> few datums. If I use SetGeogCS, I can?t see what purpose proj.dll serves.
> >
> >
> >
> > I have set GDAL_DATA to the correct folder.
> >
> > I have checked that the datum numbers I use are in the gcs.csv file.
> >
> >
> >
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org****
>
> > <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of****
>
> > dev4cx4m9z@snkmail.com <dev4cx4m9z@snkmail..com>
> > Sent: Tuesday, October 18, 2011 4:12 AM
> > To: gdal-dev@lists.osgeo.org
> > Subject: RE: [gdal-dev] Confused about datum transformations
> >
> >
> >
> > I?m not sure the code will help too much, but here are the relevant
> > code fragments. I?m using a hand crafted VB.net wrapper which explains
> > some of the syntax
> >
> >
> >
> > Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
> WGS84
> >
> > Private MapSRS As OGRSpatialReference       ' Coordinate system of map
> >
> > Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
> transform from WGS84 to map
> >
> >
> >
> > With WGS84SRS
> >
> >     GDALError = .SetProjCS("WGS84 Datum")
> >
> >     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> >     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
> coordinate system
> >
> >     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> > End With
> >
> >
> >
> > With MapSRS
> >
> >      GDALError = .SetProjCS("Map coordinate system")
> >
> >      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> >      GDALError = .ImportFromEPSG(3577)
> >
> >      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
> >
> > End With
> >
> >
> >
> > ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
>    ' Create a coordinate transformation - WGS84 to map
> >
> > Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
> >
> >
> >
> > Marc,
> >
> > Can you provide the code leading to the error?
> >
> > On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
> wrote:
> >
> > I have a GIS database, and all data is stored in WGS84 datum. I have
> developed an application using GDAL, and I now need to translate my WGS84
> coordinates to several different datums, depending what map is loaded. I
> seem to be going around in circles, and need a nudge in the right direction.
> I am defining an OGRSpatialReference for each datum (WGS84 and current map)
> and then attempting to create an OGRCoordinateTransformation for the
> transformation.. This last step fails with a PROJ.4 error (?No PROJ.4
> translation for destination SRS, coordinate transformation initialization
> failed?
> >
> >
> >
> > My question is - Do I need PROJ.4 to do the translation? Can I not just
> use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
> canned list of all the WKT somewhere?  I?m keen to avoid PROJ.4 if possible
> as I?m not sure I can build it.
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> >
> >****
>
> > ----------------------------------------------------------------------
> > --****
>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --****
>
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
>                Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>             Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
>
>
>
> -----****
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11*
> ***
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
> ****
>
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11*
> ***
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/655a234c/attachment-0001.html
From dev4cx4m9z at snkmail.com  Wed Oct 19 07:40:53 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Thu Oct 20 03:40:21 2011
Subject: [gdal-dev] Confused about datum transformations
In-Reply-To: <CANzGYpTJcfNiQWghL4nyKqkYW-FFCP-NjSjQdu7z0XWEhTi96A@mail.gmail.com>
References: <003e01cc8d6a$b778d160$266a7420$@snkmail.com>
	<CAMKgpOYE3LtNa2nh_rigDmNXp04wtUAvB9XFt-7E-BaT2+AxKA@mail.gmail.com>
	<005a01cc8d7e$5ee2a850$1ca7f8f0$@snkmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA4792@MAIL.gcs-research.net>
	<002901cc8e2e$f5b45de0$e11d19a0$@snkmail.com>
	<CAMKgpOYUCfOo+BetKadXKCm+3bd1fS4j-xWCdBWxX7MKHP9sng@mail.gmail.com>
	<003a01cc8e39$97cd8390$c7688ab0$@snkmail.com>	<4E9E9016.50605@york.ac.uk>
	<004701cc8e40$7a31ffd0$6e95ff70$@snkmail.com>
	<CANzGYpTsB1yvLNeLz2f2XctM-kZSL0=_bkiPLv3qSDD9vmdG+A@mail.gmail.com>
	<005101cc8e4d$60cee6e0$226cb4a0$@snkmail.com>
	<CANzGYpTJcfNiQWghL4nyKqkYW-FFCP-NjSjQdu7z0XWEhTi96A@mail.gmail.com>
Message-ID: <006601cc8e53$f655a720$e300f560$@snkmail.com>

Yes - I mean lat and lon. I'm using the datums in common use in Australia,
i.e. Australian Geodetic 1966, Australian Geodetic 1984, Australian
Geocentric 1994

 

 

From: Simon Lyngby Kokkendorff silyko-at-gmail.com |GDAL|
[mailto:r0dk224axt@sneakemail.com] 
Sent: Wednesday, October 19, 2011 10:32 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Confused about datum transformations

 

Hi Marc,

 I suppose that when you say: WGS84 datum, you mean geographical coordinates
based on the WGS84-datum (i.e. lat,lon)?
 Which other datums are involved?

Cheers,
Simon
 

On Wed, Oct 19, 2011 at 12:53 PM, <dev4cx4m9z@snkmail.com> wrote:

Well, it's 'working' (sort of) but I'm still confused. I'll try to explain
better what I'm trying to do.

 

I have a database of map coordinates stored in WGS84 datum.

I load and display a map in my application which may, or may not, use the
WGS84 datum. I am setting up a coordinatetransformation to convert WGS84
data to whatever datum the map is. I then use another transformation to
translate to screen coordinates.

 

I'm only worrying about the datum conversion issue first. I will worry about
the map projection issue later.

 

I have successfully created a number of CT's with no error. When invoked,
they're giving the wrong answer, but I'm still looking into that.

 

I still don't understand proj.dll. I downloaded the prebuilt proj.dll, and
it seems to only have a few datums. It certainly does not have the ones I'm
using. Does it matter, or must proj.dll contain all the datums I intend to
use? Is the data pointed to by GDAL_DATA sufficient to translate from any
known datum to another?

 

From: Simon Lyngby Kokkendorff silyko-at-gmail.com |GDAL|
[mailto:r0dk224axt@sneakemail.com] 
Sent: Wednesday, October 19, 2011 8:55 PM


To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Confused about datum transformations

 

Hi Marc,

  Just to understand your problem fully:  You have data in your database in
WGS84, in geographical coordinates, or what? That would correspond to a
srs=osr.SpatialReference(), srs.SetWellKnownGeogCS("WGS84").

   What kind of projection or geographical coordinate system do you want to
project to? It seems to be: EPSG:3557 which is: NAD83(NSRS2007) / Maine
East. Is this correct? If you have the GDAL_DATA env-variable pointing to
the right directory (containing EPSG definitions etc), gdal should be able
to also do:
srs2=osr.SpatialReference(), srs2.ImportFromEPSG(3557), which becomes:

>>> srs2.ExportToPrettyWkt()
'PROJCS["NAD83(NSRS2007) / Maine East",\n    GEOGCS["NAD83(NSRS2007)",\n
DATUM["NAD83_National_Spatial_Reference_System_2007",\n
SPHEROID["GRS 1980",6378137,298.257222101,\n
AUTHORITY["EPSG","7019"]],\n
       TOWGS84[0,0,0,0,0,0,0],\n            AUTHORITY["EPSG","6759"]],\n
PRIMEM["Greenwich",0,\n            AUTHORITY["EPSG","8901"]],\n
UNIT["degree",0.01745329251994328,\n            AUTHORITY["EPSG","9122"]],\n
AUTHORITY["EPSG","4759"]],\n    UNIT["metre",1,\n
AUTHORITY["EPSG","9001"]],\n    PROJECTION["Transverse_Mercator"],\n
PARAMETER["latitude_of_origin",43.66666666666666],\n
PARAMETER["central_meridian",-68.5],\n
PARAMETER["scale_factor",0.9999],\n    PARAMETER["false_easting",300000],\n
PARAMETER["false_northing",0],\n    AUTHORITY["EPSG","3557"],\n
AXIS["X",EAST],\n    AXIS["Y",NORTH]]'
'

If you want to perform the actual coordinate transformation, besides just
having descriptions of the systems, you'll definitely need to have proj4.dll
somewhere in your system, where gdal can find it (I guess besides gdal.dll
or somewhere in your PATH). 

Cheers,
Simon

On Wed, Oct 19, 2011 at 11:21 AM, <dev4cx4m9z@snkmail.com> wrote:

I have a big clue - I have inspected the output of ExportToWKT, and the
results are interesting


       With WGS84SRS
           GDALError = .SetProjCS("WGS84 Datum")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
           GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces PROJCS["WGS84 Datum",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],A
UTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT
["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","432
6"]]]
       With UTMSRS
           GDALError = .SetProjCS("UTM coordinate system")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
           GDALError = .SetWellKnownGeogCS("WGS84")              ' Define a
UTM coordinate system

           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces PROJCS["UTM coordinate system",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],A
UTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT
["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","432
6"]]]


      With MapSRS
           GDALError = .SetProjCS("Map coordinate system")
           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())

           GDALError = .ImportFromEPSG(i)

           Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
       End With

Produces
GEOGCS["GDA94",DATUM["Geocentric_Datum_of_Australia_1994",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0]
,AUTHORITY["EPSG","6283"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UN
IT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4
283"]]

The error when I attempt to create the transformation is always with the SRS
that seems to be a projection definition, not a datum. ImportFromEPSG seems
to be correctly producing a GEOGCS, but SetWellKnownGeogCS seems to be
producing a "PROJCS"

I feel I'm very close to the answer, but I still can't see it.


-----Original Message-----
From: Peter J Halls P.Halls-at-york.ac.uk |GDAL|
[mailto:6wyv643jct@sneakemail.com]
Sent: Wednesday, October 19, 2011 7:54 PM
To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
Subject: Re: [gdal-dev] Confused about datum transformations

A comment from another GDAL user, rather than the development team.

GDAL and OGR are actually C++ tools that have C, Java, Python and other
language bindings.  What you have picked up is an artefact of the fact that
GDAL is not just C.

The proj4 library for your platform is automatically loaded with GDAL and
OGR:
it must be present but no explicit action is required by the user.

Chaitanya's advice was to double check that the transformation parameters
are being passed correctly.  Datum transformations *are* fiddly (full stop)
to specify and this advice is sound.  You appear to be specifying two parts
of the transformation, presumably being content with the default values for
the other parameters.  Ideally, you need to get the system to regurgitate
its understanding of your parameters in the WKT version of the final
transformation specification - ie the complete string.  This is what you are
being advised to do.

Problems like this are not confined to GDAL / OGR: I've lost count of the
number of times I've handled projection problems here.  What sounds to be a
simple operation is not trivial and unpicking problems most often requires
an understanding of the transformation method and all the parameters
applied.

Hoping that helps,

Peter


dev4cx4m9z@snkmail.com wrote:
> I have not used org2ogr. I have just realised that the C API for GDAL
> uses a mixture of STD and CDECL. How annoying. Anyway - I have
> carefully checked and all are correct. I get a stack balance problem
> if they are not anyway. It's hard to see how I could get the arguments
wrong - one is the string "WGS84", and the other is an integer.
>
>
>
> I still don't know whether proj.dll is required.
>
>
>
> From: Chaitanya kumar CH chaitanya.ch-at-gmail.com |GDAL|
> [mailto:5rm5yuc82t@sneakemail.com]
> Sent: Wednesday, October 19, 2011 6:36 PM
> To: marc.hillman@tpg.com.au; dev4cx4m9z@snkmail.com
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Confused about datum transformations
>
>
>
> Marc,
>
> You don't need to rebuild proj.4; you are already using it.. Since you
were able to use ogr2ogr to do the transformation, it works.
>
> What you need to do is find out if the arguments you are passing to the
transformation builder are good. Especially 'MapSRS'. If it doesn't show any
problem, plug some debug messages in the OSR code in ogrct.cpp and rebuild
gdal.
>
> On Wed, Oct 19, 2011 at 12:46 PM, <dev4cx4m9z@snkmail.com> wrote:
>
> Thanks for all the suggestions - they have given me many possibilities to
eliminate, but I still haven't really got an answer to the original
question.
>
>
>
> Am I required to have proj.dll built with support for the
datums/projections I want to use, or is it sufficient to set GDAL_DATA such
that gcs.csv and pcs.csv are visible? I'm working in VB.NET, and I'm not
confident I can rebuild PROJ with the required datums, so I wish to avoid if
possible. I'd even be prepared to use SetGeogCS explicitly as I only use a
few datums. If I use SetGeogCS, I can't see what purpose proj.dll serves.
>
>
>
> I have set GDAL_DATA to the correct folder.
>
> I have checked that the datum numbers I use are in the gcs.csv file.
>
>
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org

> <mailto:gdal-dev-bounces@lists.osgeo..org> ] On Behalf Of

> dev4cx4m9z@snkmail.com <mailto:dev4cx4m9z@snkmail...com> 
> Sent: Tuesday, October 18, 2011 4:12 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Confused about datum transformations
>
>
>
> I'm not sure the code will help too much, but here are the relevant
> code fragments. I'm using a hand crafted VB.net wrapper which explains
> some of the syntax
>
>
>
> Private WGS84SRS As New OGRSpatialReference     ' Coordinate system in
WGS84
>
> Private MapSRS As OGRSpatialReference       ' Coordinate system of map
>
> Private ctWGS84toMap As OGRCoordinateTransformation       ' Coordinate
transform from WGS84 to map
>
>
>
> With WGS84SRS
>
>     GDALError = .SetProjCS("WGS84 Datum")
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
>     GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system
>
>     Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
> End With
>
>
>
> With MapSRS
>
>      GDALError = .SetProjCS("Map coordinate system")
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
>      GDALError = .ImportFromEPSG(3577)
>
>      Debug.Assert(GDALError = OGRError.OGRERR_NONE, GetLastErrorMsg())
>
> End With
>
>
>
> ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
' Create a coordinate transformation - WGS84 to map
>
> Debug.Assert(ctWGS84toMap IsNot Nothing, GetLastErrorMsg())
>
>
>
> Marc,
>
> Can you provide the code leading to the error?
>
> On Tue, Oct 18, 2011 at 1:21 PM, Marc Hillman <dev4cx4m9z@snkmail.com>
wrote:
>
> I have a GIS database, and all data is stored in WGS84 datum. I have
developed an application using GDAL, and I now need to translate my WGS84
coordinates to several different datums, depending what map is loaded.. I
seem to be going around in circles, and need a nudge in the right direction.
I am defining an OGRSpatialReference for each datum (WGS84 and current map)
and then attempting to create an OGRCoordinateTransformation for the
transformation.. This last step fails with a PROJ.4 error ("No PROJ.4
translation for destination SRS, coordinate transformation initialization
failed"
>
>
>
> My question is - Do I need PROJ.4 to do the translation? Can I not just
use ImportFromWKT to define my OGRSpatialReference? If so, is there a nice
canned list of all the WKT somewhere?  I'm keen to avoid PROJ.4 if possible
as I'm not sure I can build it.
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
>

> ----------------------------------------------------------------------
> --

>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--

----------------------------------------------------------------------------
----
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
            Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------
----



-----

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





No virus found in this message.
Checked by AVG - www.avg.com
Version: 2012.0.1831 / Virus Database: 2092/4560 - Release Date: 10/18/11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/d30b2b36/attachment-0001.html
From etourigny.dev at gmail.com  Wed Oct 19 08:16:32 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct 20 04:17:49 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <4E9E615B.4050804@pobox.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<CA+YzLBdjYLuAQpKn1nMzWb4NcmpY5eKg819KtFa5QZBROxAKMw@mail.gmail.com>
	<CA+TxYvO6Wwm9gGA-mA4J8TJ+uVS2sQWmo7X=ptnL4JR_Miw8tA@mail.gmail.com>
	<4E9E615B.4050804@pobox.com>
Message-ID: <CA+TxYvNwvATpb5iY_SX8x4+UGdAY5oEOjeWs6kF6TuRTND2qBg@mail.gmail.com>

On Wed, Oct 19, 2011 at 3:34 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-10-18 10:19 PM, Etienne Tourigny wrote:
>>
>> Hi Frank,
>>
>> On Tue, Oct 18, 2011 at 7:22 PM, Frank Warmerdam<warmerdam@pobox.com>
>> ?wrote:
>>>
>>> On Tue, Oct 18, 2011 at 1:10 PM, Etienne Tourigny
>>> <etourigny.dev@gmail.com> ?wrote:
>>>>
>>>> 2) Change to a default south-up orientation for NetCDF data
>>>
>>> Etienne,
>>>
>>> Could you expand on this a bit? ?In particular I'm wondering if:
>>>
>>> 1) Is a south-up file represented as south up to GDAL applications?
>>> That is, will geotransform[5] be negative or positive?
>>
>>
>> Files created by the driver have a negative ?pixel height
>> (geotransform[5]) when opened with GDAL , so I guess that means it
>> looks like it is north up.
>>
>> When the driver opens a south-up file, it has to invert the y axis
>> upon import to make it compatible with GDAL's data model.
>>
>> For example, a gtiff landsat that has the following geo info:
>> Origin = (625970.000000000000000,8981830.000000000000000)
>> Pixel Size = (30.000000000000000,-30.000000000000000)
>>
>> Which is the same when translated to netcdf and the netcdf is read by
>> GDAL.\
>
> Etienne,
>
> OK, it seems that to applications the change to producing
> bottom-up files will not be particularly disruptive.

yes, and as netcdf is more or less random access the performance hit
should not be significant.

>
>> For what it gives, here are some numbers for gdal_translate on a test
>> dataset (22239 x 33359 INT) . The netcdf creation takes longer than
>> gtiff, but the difference between south-up and north-up is small.
>>
>> gtiff-> ?gtiff
>> real ? ?0m34.251s
>> user ? ?0m1.550s
>> sys ? ? 0m3.710s
>>
>> gtiff->netcdf (BOTTOM_UP=YES)
>> real ? ?1m3.869s
>> user ? ?0m2.520s
>> sys ? ? 0m5.300s
>>
>> gtiff->netcdf (BOTTOM_UP=NO)
>> real ? ?1m35.077s
>> user ? ?0m3.050s
>> sys ? ? 0m6.150s
>>
>> gtiff->netcdf (driver in svn trunk, north-up)
>> real ? ?2m4.186s
>> user ? ?0m5.110s
>> sys ? ? 0m7.130s
>>
>
> I'm a bit confused about the above. ?How are the "driver in svn trunk,
> north-up" case and the "BOTTOM_UP=YES" case different? ?Why is
> "BOTTOM_UP=NO" case slower than "BOTTOM_UP_YES" case?
>

Frank, Sorry about the confusion

The driver in svn produces north-up, as does BOTTOM_UP=NO, so the
result is identical numerically. BOTTUM_UP=YES produces south-up

For the numbers it seems to be rather random, I can never get really
close values (maybe it has to do with caching).

The tests I made were with a slight optimisation which isn't in the
old driver.  Shows that we have been making progress on a few fronts!

I reverted that and here is what I got, for 2 separate runs:

Basically north-up and south-up are pretty much at the same order (5s
user, 6s sys) , and also the time is consistent with older driver (5s
user, 7s sys)

tourigny@supernova: /data/research/work/gdal-netcdf $ time
gdal_translate -of netcdf -co WRITE_BOTTOMUP=1 -co WRITE_LONLAT=0
mcd45-100.tif mcd45-100-1.nc
real	2m17.040s
user	0m4.160s
sys	0m5.860s

tourigny@supernova: /data/research/work/gdal-netcdf $ time
gdal_translate -of netcdf -co WRITE_BOTTOMUP=0 -co WRITE_LONLAT=0
mcd45-100.tif mcd45-100-2.nc
real	1m55.951s
user	0m4.890s
sys	0m6.900s

tourigny@supernova: /data/research/work/gdal-netcdf $ time
gdal_translate -of netcdf -co WRITE_BOTTOMUP=1 -co WRITE_LONLAT=0
mcd45-100.tif mcd45-100-1.nc
real	3m0.683s
user	0m6.320s
sys	0m9.700s

tourigny@supernova: /data/research/work/gdal-netcdf $ time
gdal_translate -of netcdf -co WRITE_BOTTOMUP=0 -co WRITE_LONLAT=0
mcd45-100.tif mcd45-100-2.nc
real	1m50.754s
user	0m4.870s
sys	0m7.480s


> In any event, at least for this case the differences aren't devastating
> and there are options to control what is done. ?I am supportive of changes
> that produce a more interoperable ?result.

I have been considering using a single Config Option to select which
workflow the user wants (strictly GDAL, more back-compat and more
efficient in GDAL vs. CF with less back-compact)

>
> As PSC chair I will not be offended if you proceed with netcdf changes
> *without* a formal RFC type vote on the changes. ?The changes are fixing
> bugs and don't cause real backward compatability issues and I'm willing to
> treat you as the authority/owner for the driver.

OK Frank, many thanks for you support and trust

>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush ? ?| Geospatial Software Developer
>
>
From aashishcy at gmail.com  Wed Oct 19 08:42:28 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Thu Oct 20 04:44:58 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <4E8F64CB.2010207@loskot.net>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
	<CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
	<4E8F64CB.2010207@loskot.net>
Message-ID: <CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>

On Fri, Oct 7, 2011 at 4:44 PM, Mateusz Loskot <mateusz@loskot.net> wrote:

> On 07/10/11 19:14, Jayesh Chaudhary wrote:
> > It is good to see that people are supporting the idea. To know more
> > about CMake please visit http://cmake.org/cmake/project/about.html.
> > Please feel free to contact us if you have any questions / concerns.
>
> Would it be possible to learn more about your plan of the attack?
> What's your roadmap, roughly?
>

I can create a document (on Wiki? Google document, whatever is convenient)
for this purpose.

>
> Are you going to discuss technicalities publicly (e.g. here) like design
> of the CMake configuration or you will cook everything at Kitware and
> then share the result?
>

I think it is beneficial to discuss technicalities publicly.


> Is there any room for contribution?
>

Absolutely!.. Probably you, Howard and myself can start sharing emails and
once we have some rough plan in place we will send an email to dev list?

>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/be429a48/attachment.html
From etourigny.dev at gmail.com  Wed Oct 19 08:50:40 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct 20 04:53:42 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
	<CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
	<4E8F64CB.2010207@loskot.net>
	<CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>
Message-ID: <CA+TxYvMhJEvs17Lm05yTAnTbqEAbjkxdy7rs=pXEnN4aE=zGHg@mail.gmail.com>

On Wed, Oct 19, 2011 at 10:42 AM, Jayesh Chaudhary <aashishcy@gmail.com> wrote:
>
>
> On Fri, Oct 7, 2011 at 4:44 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>>
>> On 07/10/11 19:14, Jayesh Chaudhary wrote:
>> > It is good to see that people are supporting the idea. To know more
>> > about CMake please visit http://cmake.org/cmake/project/about.html.
>> > Please feel free to contact us if you have any questions / concerns.
>>
>> Would it be possible to learn more about your plan of the attack?
>> What's your roadmap, roughly?
>
> I can create a document (on Wiki? Google document, whatever is convenient)
> for this purpose.

I think a wiki page in the gdal trac would be best.

>>
>> Are you going to discuss technicalities publicly (e.g. here) like design
>> of the CMake configuration or you will cook everything at Kitware and
>> then share the result?
>
> I think it is beneficial to discuss technicalities publicly.
>
>>
>> Is there any room for contribution?
>
> Absolutely!.. Probably you, Howard and myself can start sharing emails and
> once we have some rough plan in place we will send an email to dev list?

As the maintainer of one of the drivers (netcdf), I'd like to ask if
we can be given information (sometime in the future) on how we can
integrate any tests or requirements the drivers have.

many thanks
Etienne

>>
>> Best regards,
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>> Charter Member of OSGeo, http://osgeo.org
>> Member of ACCU, http://accu.org
>
>
From mateusz at loskot.net  Wed Oct 19 09:37:31 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Oct 20 05:43:03 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
	<CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
	<4E8F64CB.2010207@loskot.net>
	<CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>
Message-ID: <CABUeae8T37PWJp-67iL+d3So4DUmvRhzwWdi2u+6_t8NzR5Cyg@mail.gmail.com>

On 19 October 2011 13:42, Jayesh Chaudhary <aashishcy@gmail.com> wrote:
> On Fri, Oct 7, 2011 at 4:44 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>>
>> On 07/10/11 19:14, Jayesh Chaudhary wrote:
>> > It is good to see that people are supporting the idea. To know more
>> > about CMake please visit http://cmake.org/cmake/project/about.html.
>> > Please feel free to contact us if you have any questions / concerns.
>>
>> Would it be possible to learn more about your plan of the attack?
>> What's your roadmap, roughly?
>
> I can create a document (on Wiki? Google document, whatever is convenient)
> for this purpose.

I'd suggest GDAL Wiki - http://trac.osgeo.org/gdal/wiki

>> Is there any room for contribution?
>
> Absolutely!.. Probably you, Howard and myself can start sharing emails and
> once we have some rough plan in place we will send an email to dev list?

I'm fine with any channel of communication. Feel free to use my e-mail.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From dburken at comcast.net  Wed Oct 19 10:04:37 2011
From: dburken at comcast.net (David Burken)
Date: Wed Oct 19 10:06:53 2011
Subject: [gdal-dev] CMake for GDAL
In-Reply-To: <CABUeae8T37PWJp-67iL+d3So4DUmvRhzwWdi2u+6_t8NzR5Cyg@mail.gmail.com>
References: <81BF9F90-727F-4961-AD79-1BBD35C52E5E@gmail.com>
	<CA+TxYvNwU9+SQQZaxKpqajuVH3NhvE1T8o1=H=K_oPVD9XThcg@mail.gmail.com>
	<CAGeT8ykx3LEAHAhV_r6jMO-Z79=_NmvfiaVZdCe7couxqj9MAg@mail.gmail.com>
	<4E8F64CB.2010207@loskot.net>
	<CAGeT8ymyipgxxsgzPBmXYvChzD_yAJipSw+hQ0y2NJ-SL0k-gQ@mail.gmail.com>
	<CABUeae8T37PWJp-67iL+d3So4DUmvRhzwWdi2u+6_t8NzR5Cyg@mail.gmail.com>
Message-ID: <4E9ED8F5.2020909@comcast.net>

Mateusz, all:

It's good to hear there is an effort in this.  The dependencies/optional 
packages will be painful I expect.  If you need testers for Fedora I can 
help just let me know.

Take care,
Dave

On 10/19/2011 09:37 AM, Mateusz ?oskot wrote:
> On 19 October 2011 13:42, Jayesh Chaudhary<aashishcy@gmail.com>  wrote:
>> On Fri, Oct 7, 2011 at 4:44 PM, Mateusz Loskot<mateusz@loskot.net>  wrote:
>>> On 07/10/11 19:14, Jayesh Chaudhary wrote:
>>>> It is good to see that people are supporting the idea. To know more
>>>> about CMake please visit http://cmake.org/cmake/project/about.html.
>>>> Please feel free to contact us if you have any questions / concerns.
>>> Would it be possible to learn more about your plan of the attack?
>>> What's your roadmap, roughly?
>> I can create a document (on Wiki? Google document, whatever is convenient)
>> for this purpose.
> I'd suggest GDAL Wiki - http://trac.osgeo.org/gdal/wiki
>
>>> Is there any room for contribution?
>> Absolutely!.. Probably you, Howard and myself can start sharing emails and
>> once we have some rough plan in place we will send an email to dev list?
> I'm fine with any channel of communication. Feel free to use my e-mail.
>
> Best regards,
From supportlists at qlands.com  Wed Oct 19 10:55:53 2011
From: supportlists at qlands.com (SupportLists)
Date: Wed Oct 19 11:22:03 2011
Subject: [gdal-dev] Warp - Reproject to a different pixel size (cellsize)?
Message-ID: <4E9EE4F9.8050008@qlands.com>

Hi,

I have an ASCII grid with pixel sizes: 0.00833333,-0.00833333. Its 
dimensions are X: 1510 Y: 1970 Bands: 1.

How can I re-project it to a pixel size of 0.0833333,-0.0833333?

Many thanks in advance,
Carlos.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/4cc353dc/attachment.html
From jukka.rahkonen at mmmtike.fi  Wed Oct 19 11:35:19 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Oct 19 11:41:49 2011
Subject: [gdal-dev] Re: Warp - Reproject to a different pixel size
	(cellsize)?
References: <4E9EE4F9.8050008@qlands.com>
Message-ID: <loom.20111019T173419-290@post.gmane.org>

SupportLists <supportlists <at> qlands.com> writes:

> 
> 
>     Hi,
>     I have an ASCII grid with pixel sizes:
>     p, li { white-space: pre-wrap; }0.00833333,-0.00833333.
>     Its dimensions are X: 1510 Y: 1970 Bands: 1.
>     How can I re-project it to a pixel size of 0.0833333,-0.0833333?
>     Many thanks in advance,
>     Carlos.

Read http://gdal.org/gdalwarp.html and have a try with -tr

-Jukka Rahkonen-

From etourigny.dev at gmail.com  Wed Oct 19 14:10:32 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 14:24:48 2011
Subject: [gdal-dev] how to save history of gdal commands in metadata?
In-Reply-To: <4E8CEB84.90803@gov.yk.ca>
References: <CA+TxYvPfugK=VzMsWihwKYAhcn_Y3fXX9qzDCbdLisbLRk-irg@mail.gmail.com>
	<4E8CEB84.90803@gov.yk.ca>
Message-ID: <CA+TxYvOvriYv9mqvbyw72xgjPbuJsTcb4WQhqyLCMYi5iJ3eqA@mail.gmail.com>

I've figured out a way to save any comandline command : as
GDALGeneralCmdLineProcessor() gets called by all applications, the
command args can be saved to a static char[] and then consulted later.

My question to other devs: where can I add code to create/modify a
metadataitem (e.g. "history") in code so that it happens almost
transparently?  Having to add it in every application would be a drag,
so maybe in GDALDataset or GDALDriver?

I have created a ticket with more information, if anyone has ideas or
comments please do so.

http://trac.osgeo.org/gdal/ticket/4297

Regards, Etienne

On Wed, Oct 5, 2011 at 8:43 PM, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Esri records (some) processing history in the metadata and at times I have
> found that to be *very* useful. I for one would welcome gdal/ogr doing the
> same.
>
> matt wilkie
> --------------------------------------------
> Geomatics Analyst
> Information Management and Technology
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133?Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
>
> On 05/10/2011 4:08 PM, Etienne Tourigny wrote:
>>
>> Hi all,
>>
>> I am adding support for the netcdf history attribute (which keeps
>> track of all commands done on an netcdf file), I am trying to see how
>> to include as much possible information as possible in the
>> NCDFCreateCopy() function.
>>
>> Firstly, is there a way to access to the current command line which
>> generated a GDALCreateCopy()? ?All I have access to is what is passed
>> to the NCDFCreateCopy() function, such as filename, input dataset,
>> driver options.
>>
>> Secondly, would there be interest in introducing this sort of feature
>> into the GDAL framework? ?I would see it as an optional string which
>> could be passed from the calling script to the Create() and
>> CreateCopy() methods, or perhaps a global variable which drivers would
>> be free to use or not.
>> As Geotiff supports metadata, it would be a nice addition to it.
>>
>> Here is an example of netcdf history metadata:
>> As you can see there is not much information from the GDAL command yet.
>>
>> {{{
>> ? ? ? ? ? ? ? ?:history = "Wed Oct 05 19:59:26 2011: GDAL NCDFCreateCopy(
>> trmm-cp51.nc, ... )\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Wed Sep 07 22:33:59 2011: cdo
>> sellonlatbox,-80,-70,-20,-10
>> tmp4-noc.nc tmp5.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Wed Sep ?7 22:33:53 2011: ncatted -a
>> Conventions,global,d,,
>> tmp4.nc tmp4-noc.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Wed Aug 24 12:59:04 2011: ncatted -D 10 -a
>> CoreMetadata.0,global,d,, -a ArchiveMetadata.0,global,d,, tmp3.nc
>> tmp4.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Tue Aug 23 21:04:45 2011: cdo seltimestep,1
>> tmp2.nc tmp3.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Tue Aug 23 19:19:18 2011: cdo selvar,pcp tmp1.nc
>> tmp2.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Tue May 17 19:34:24 2011: cdo
>> sellonlatbox,-85.25,-29.625,15.25,-50 3B43.2011.nc tmp1.nc\n",
>> ? ? ? ? ? ? ? ? ? ? ? ?"Tue May 17 19:26:31 2011: cdo mergetime
>> 3B43.110101.6A.nc
>> 3B43.110201.6A.nc 3B43.110301.6A.nc 3B43.110401.6A.nc 3B43.2011.nc" ;
>> }}}
>>
>> Regards,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> .
>>
>
From even.rouault at mines-paris.org  Wed Oct 19 15:49:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 19 16:09:13 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <CA+TxYvNwvATpb5iY_SX8x4+UGdAY5oEOjeWs6kF6TuRTND2qBg@mail.gmail.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<4E9E615B.4050804@pobox.com>
	<CA+TxYvNwvATpb5iY_SX8x4+UGdAY5oEOjeWs6kF6TuRTND2qBg@mail.gmail.com>
Message-ID: <201110192149.17175.even.rouault@mines-paris.org>

> > As PSC chair I will not be offended if you proceed with netcdf changes
> > *without* a formal RFC type vote on the changes.  The changes are fixing
> > bugs and don't cause real backward compatability issues and I'm willing
> > to treat you as the authority/owner for the driver.
> 
> OK Frank, many thanks for you support and trust

I also totally share Frank's opinion. All the efforts you have lead seem to 
have been carefully thought about and are well documented (in the wiki, but 
frmt_netcdf.html would perhaps need updates). Plus I'd have difficulties to vote 
for a RFC with an enlightened mind on such a specialized topic ;-)

How will you proceed to updating in SVN ? A big code drop, or apply 
incremental changes ? Personnaly, I tend to prefer micro changes to be able to 
track regressions more easily, but it might be hard with the workflow you 
followed using git? I'd note that merging a svn branch in trunk would also 
loose incremental steps. That's just questions to satisfy my curiosity: I 
don't ask you to "rewrite history" as they seem to do in Linux kernel 
development.

> 
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> > ----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/warmerda
> > and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Oct 19 16:04:47 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 16:25:25 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <201110192149.17175.even.rouault@mines-paris.org>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<4E9E615B.4050804@pobox.com>
	<CA+TxYvNwvATpb5iY_SX8x4+UGdAY5oEOjeWs6kF6TuRTND2qBg@mail.gmail.com>
	<201110192149.17175.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvM1ZwY-g8z6jE2owKmNs-rKuU4-kBCrqx-tCmTDjiRNeA@mail.gmail.com>

Even,

I've been thinking about this, and I knew you were going to prefer
incremental changes, as it would be preferable.  However, there's
about a month of development in there and it would be quite difficult
to try to separate things in small chunks.
It will also be difficult because there has been significant
refactoring, due to the export of lon/lat values for projected crs.
Also if I commited all the changes (it's possible with my workflow),
there would be quite many patches and it would be difficult to follow.

Probably what I will do is make a diff and see if I can break it up
into different parts. Perhaps I can separate import, export and misc
parts into separate commits - how about that?
I will wait a few days (we are still doing some benchmarks and final
testing) and then go through the commit process.

There will also be a significant refactoring for the adding of a
Create() function (just the export part), but I want to push through
these changes first.

salutations,
Etienne

On Wed, Oct 19, 2011 at 5:49 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> > As PSC chair I will not be offended if you proceed with netcdf changes
>> > *without* a formal RFC type vote on the changes. ?The changes are fixing
>> > bugs and don't cause real backward compatability issues and I'm willing
>> > to treat you as the authority/owner for the driver.
>>
>> OK Frank, many thanks for you support and trust
>
> I also totally share Frank's opinion. All the efforts you have lead seem to
> have been carefully thought about and are well documented (in the wiki, but
> frmt_netcdf.html would perhaps need updates). Plus I'd have difficulties to vote
> for a RFC with an enlightened mind on such a specialized topic ;-)
>
> How will you proceed to updating in SVN ? A big code drop, or apply
> incremental changes ? Personnaly, I tend to prefer micro changes to be able to
> track regressions more easily, but it might be hard with the workflow you
> followed using git? I'd note that merging a svn branch in trunk would also
> loose incremental steps. That's just questions to satisfy my curiosity: I
> don't ask you to "rewrite history" as they seem to do in Linux kernel
> development.
>
>>
>> > Best regards,
>> > --
>> > ---------------------------------------+---------------------------------
>> > ----- I set the clouds in motion - turn up ? | Frank Warmerdam,
>> > warmerdam@pobox.com
>> > light and sound - activate the windows | http://pobox.com/warmerda
>> > and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Wed Oct 19 16:11:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 19 16:32:29 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <CA+TxYvM1ZwY-g8z6jE2owKmNs-rKuU4-kBCrqx-tCmTDjiRNeA@mail.gmail.com>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<201110192149.17175.even.rouault@mines-paris.org>
	<CA+TxYvM1ZwY-g8z6jE2owKmNs-rKuU4-kBCrqx-tCmTDjiRNeA@mail.gmail.com>
Message-ID: <201110192211.29558.even.rouault@mines-paris.org>

Le mercredi 19 octobre 2011 22:04:47, Etienne Tourigny a ?crit :
> Even,
> 
> I've been thinking about this, and I knew you were going to prefer
> incremental changes, as it would be preferable.  However, there's
> about a month of development in there and it would be quite difficult
> to try to separate things in small chunks.
> It will also be difficult because there has been significant
> refactoring, due to the export of lon/lat values for projected crs.
> Also if I commited all the changes (it's possible with my workflow),
> there would be quite many patches and it would be difficult to follow.
> 
> Probably what I will do is make a diff and see if I can break it up
> into different parts. Perhaps I can separate import, export and misc
> parts into separate commits - how about that?
> I will wait a few days (we are still doing some benchmarks and final
> testing) and then go through the commit process.

Sounds reasonable. But as I said, I would not want to set constraints on you 
on this. I'm well aware it can be costly. We have no rules on that, so it is 
left to your judgement.

> 
> There will also be a significant refactoring for the adding of a
> Create() function (just the export part), but I want to push through
> these changes first.

Sounds reasonable

> 
> salutations,
> Etienne
> 
> On Wed, Oct 19, 2011 at 5:49 PM, Even Rouault
> 
> <even.rouault@mines-paris.org> wrote:
> >> > As PSC chair I will not be offended if you proceed with netcdf changes
> >> > *without* a formal RFC type vote on the changes.  The changes are
> >> > fixing bugs and don't cause real backward compatability issues and
> >> > I'm willing to treat you as the authority/owner for the driver.
> >> 
> >> OK Frank, many thanks for you support and trust
> > 
> > I also totally share Frank's opinion. All the efforts you have lead seem
> > to have been carefully thought about and are well documented (in the
> > wiki, but frmt_netcdf.html would perhaps need updates). Plus I'd have
> > difficulties to vote for a RFC with an enlightened mind on such a
> > specialized topic ;-)
> > 
> > How will you proceed to updating in SVN ? A big code drop, or apply
> > incremental changes ? Personnaly, I tend to prefer micro changes to be
> > able to track regressions more easily, but it might be hard with the
> > workflow you followed using git? I'd note that merging a svn branch in
> > trunk would also loose incremental steps. That's just questions to
> > satisfy my curiosity: I don't ask you to "rewrite history" as they seem
> > to do in Linux kernel development.
> > 
> >> > Best regards,
> >> > --
> >> > ---------------------------------------+------------------------------
> >> > --- ----- I set the clouds in motion - turn up   | Frank Warmerdam,
> >> > warmerdam@pobox.com
> >> > light and sound - activate the windows | http://pobox.com/warmerda
> >> > and watch the world go round - Rush    | Geospatial Software Developer
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From wsureshoot at fastmail.fm  Wed Oct 19 16:23:39 2011
From: wsureshoot at fastmail.fm (Roger Viton)
Date: Wed Oct 19 16:45:15 2011
Subject: [gdal-dev] DTED Elevations with Java and gdal
Message-ID: <1319055819214-6910385.post@n2.nabble.com>

There have been other threads on this topic.  The threads seem to die with no
clear solution presented. 

Does anyone have a Java example on how to get elevations from a DTED file? 


org.gdal.gdal.Dataset dataset = org.gdal.gdal.gdal.Open(<some dted file>,
org.gdal.gdalconst.gdalconst.GA_ReadOnly);


With an x y point how can the elevation be derived?


We have been able to run GDALtest.java against a DTED file with no problem. 
There does not seem to be any reference to any elevation in DTEDtest.java

Just want to get the elevation at a point.



Thanks,

Roger





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/DTED-Elevations-with-Java-and-gdal-tp6910385p6910385.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From KShannon at gcs-research.com  Wed Oct 19 16:31:36 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Oct 19 16:55:08 2011
Subject: [gdal-dev] DTED Elevations with Java and gdal
In-Reply-To: <1319055819214-6910385.post@n2.nabble.com>
References: <1319055819214-6910385.post@n2.nabble.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA4932@MAIL.gcs-research.net>

Check the code for gdallocationinfo app.  

Docs for the app:

http://gdal.org/gdallocationinfo.html

code for the app:

http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdallocationinfo.cpp

That should get you started.  I assume the java bindings are up to date.

kss

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roger Viton
Sent: Wednesday, October 19, 2011 2:24 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] DTED Elevations with Java and gdal

There have been other threads on this topic.  The threads seem to die with no clear solution presented. 

Does anyone have a Java example on how to get elevations from a DTED file? 


org.gdal.gdal.Dataset dataset = org.gdal.gdal.gdal.Open(<some dted file>, org.gdal.gdalconst.gdalconst.GA_ReadOnly);


With an x y point how can the elevation be derived?


We have been able to run GDALtest.java against a DTED file with no problem. 
There does not seem to be any reference to any elevation in DTEDtest.java

Just want to get the elevation at a point.



Thanks,

Roger





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/DTED-Elevations-with-Java-and-gdal-tp6910385p6910385.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Oct 19 17:40:24 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Oct 19 18:06:07 2011
Subject: [gdal-dev] proposed changes to netcdf export behaviour (perhaps
	RFC)
In-Reply-To: <201110192149.17175.even.rouault@mines-paris.org>
References: <CA+TxYvNb+P2_KNtKJxCCtHzdSisH=S35WKK5jFDLJChK=r3khw@mail.gmail.com>
	<4E9E615B.4050804@pobox.com>
	<CA+TxYvNwvATpb5iY_SX8x4+UGdAY5oEOjeWs6kF6TuRTND2qBg@mail.gmail.com>
	<201110192149.17175.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvOFM62SdbAZ+HJZ7suKrxphibNTT34ivHsFEM3SERibLg@mail.gmail.com>

Guys,

given these changes are considered bug-fixes/improvements,  would you
approve of adding these changes (when sufficiently tested and matured)
to the 1.8 branch?

If not there are a number of bugfixes (some already commited) that I
would like to commit to 1.8.

Related to this - in what timeframe would a 1.8.2 release be scheduled?

thanks
Etienne

On Wed, Oct 19, 2011 at 5:49 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> > As PSC chair I will not be offended if you proceed with netcdf changes
>> > *without* a formal RFC type vote on the changes. ?The changes are fixing
>> > bugs and don't cause real backward compatability issues and I'm willing
>> > to treat you as the authority/owner for the driver.
>>
>> OK Frank, many thanks for you support and trust
>
> I also totally share Frank's opinion. All the efforts you have lead seem to
> have been carefully thought about and are well documented (in the wiki, but
> frmt_netcdf.html would perhaps need updates). Plus I'd have difficulties to vote
> for a RFC with an enlightened mind on such a specialized topic ;-)
>
> How will you proceed to updating in SVN ? A big code drop, or apply
> incremental changes ? Personnaly, I tend to prefer micro changes to be able to
> track regressions more easily, but it might be hard with the workflow you
> followed using git? I'd note that merging a svn branch in trunk would also
> loose incremental steps. That's just questions to satisfy my curiosity: I
> don't ask you to "rewrite history" as they seem to do in Linux kernel
> development.
>
>>
>> > Best regards,
>> > --
>> > ---------------------------------------+---------------------------------
>> > ----- I set the clouds in motion - turn up ? | Frank Warmerdam,
>> > warmerdam@pobox.com
>> > light and sound - activate the windows | http://pobox.com/warmerda
>> > and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Wed Oct 19 18:03:34 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Oct 19 18:30:26 2011
Subject: [gdal-dev] Autoconf macro for gdal-config
In-Reply-To: <1319010296403-6907599.post@n2.nabble.com>
References: <1319010296403-6907599.post@n2.nabble.com>
Message-ID: <CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>

On 19 October 2011 08:44, canduc17 <candini@meeo.it> wrote:
> Compiling my gdal programs with the autotools, I would like to use
> gdal-config in my configure.ac file, in order to manage gdal path on
> different systems.
>
> The same things is made for example with the PKG_CHECK_MODULES macro for
> libraries which support pkg-config.
>
> Is there a pre built macro to do the same thing?
> Or should I write a new macro? Examples and hints on that would be really
> appreciated...

I have planned to write GDAL autoconf macro for long time, but had no motivation
since I moved to CMake :-) Anyway, thanks for reminder.
I added new ax_lib_gdal.m4 macro to my collection at
https://github.com/mloskot/autotools-modules/

(also attached to this message)

If you look at the header of this file, you can see what variables it defines.

Basic usage:

AX_LIB_GDAL([1.8.0])
GDAL_FOUND="no"
if test ! -z "$GDAL_CFLAGS" -a ! -z "$GDAL_LDFLAGS"; then
    GDAL_FOUND="yes"
fi

For debugging, you can print all variables it defines using:
    AC_MSG_WARN([$GDAL_VERSION])
    AC_MSG_WARN([$GDAL_CFLAGS])
    AC_MSG_WARN([$GDAL_LDFLAGS])
    AC_MSG_WARN([$GDAL_DEP_LDFLAGS])
    AC_MSG_WARN([$GDAL_OGR_ENABLED])


This is new macro which has not been used anywhere but during basic tests,
so expect bugs. If you notice any, don't hesitate to let me know.

I submit all the macros from my archive at GitHub to the official
Autoconf Macros Indes:
https://www.gnu.org/software/autoconf-archive/

So, once the ax_lib_gdal.m4 is well tested, I will submit it there too.

Best regards
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ax_lib_gdal.m4
Type: application/x-m4
Size: 4201 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111019/b43d0d75/ax_lib_gdal.bin
From warmerdam at pobox.com  Wed Oct 19 21:08:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 19 21:45:59 2011
Subject: [gdal-dev] DTED Elevations with Java and gdal
In-Reply-To: <1319055819214-6910385.post@n2.nabble.com>
References: <1319055819214-6910385.post@n2.nabble.com>
Message-ID: <CA+YzLBchW7uK8bj8c3jiuUS-neBToLLCB_s22LczuKYvZ7CHkg@mail.gmail.com>

On Wed, Oct 19, 2011 at 1:23 PM, Roger Viton <wsureshoot@fastmail.fm> wrote:
> There have been other threads on this topic. ?The threads seem to die with no
> clear solution presented.
>
> Does anyone have a Java example on how to get elevations from a DTED file?
>
>
> org.gdal.gdal.Dataset dataset = org.gdal.gdal.gdal.Open(<some dted file>,
> org.gdal.gdalconst.gdalconst.GA_ReadOnly);
>
>
> With an x y point how can the elevation be derived?
>
>
> We have been able to run GDALtest.java against a DTED file with no problem.
> There does not seem to be any reference to any elevation in DTEDtest.java
>
> Just want to get the elevation at a point.

Roger,

There is nothing special about a DTED file compared to other
raster files.  The only thing to keep in mind is to load the
elevation into a buffer with a better type than Byte.  The
gdal/swig/java/apps/GDALTestIO.java shows an example of
reading into a Float32 buffer.

You have not been specific about the coordinate system of your
x y point so it is hard to be specific.  As Kyle suggests the
gdallocationinfo program does what you want, but in C++ with
some variations.  It should be instructive even if you don't want
to do it in C++.

Assuming your x and y are in longitude and latitude, then you
should just need to use the geotransform from the file to
transform the x/y into pixel/line coordinates suitable for use
with the RasterIO() method.  If you only want one pixel then
just read into a 1x1 buffer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From candini at meeo.it  Thu Oct 20 04:37:35 2011
From: candini at meeo.it (canduc17)
Date: Thu Oct 20 05:39:42 2011
Subject: [gdal-dev] Re: Autoconf macro for gdal-config
In-Reply-To: <CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
References: <1319010296403-6907599.post@n2.nabble.com>
	<CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
Message-ID: <1319099855400-6912091.post@n2.nabble.com>

Thank you so much!
At the moment it doesn't work to me, even specifing the --with-gdal flag in
configure launch.
I'm not an autotools expert, but this is a very good starting point.

If I have time to study and modify your code I will let you know.

Regards.

Caneta

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Autoconf-macro-for-gdal-config-tp6907599p6912091.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Thu Oct 20 08:23:40 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Oct 20 09:38:04 2011
Subject: [gdal-dev] Re: Autoconf macro for gdal-config
In-Reply-To: <1319099855400-6912091.post@n2.nabble.com>
References: <1319010296403-6907599.post@n2.nabble.com>
	<CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
	<1319099855400-6912091.post@n2.nabble.com>
Message-ID: <CABUeae9oAV3cy7ZZuwqu+=vaPaA5_F-FxRU3hc=zs=pTXvMBPA@mail.gmail.com>

On 20 October 2011 09:37, canduc17 <candini@meeo.it> wrote:
> Thank you so much!
> At the moment it doesn't work to me, even specifing the --with-gdal flag in
> configure launch.

I tested the following last night and it works for me well:

./configure --with-gdal=/path/to/gdal-config

where ./configure comes from my test project.

Whenever you report a problem, details about what you are doing are required.
Otherwise it's impossible to diagnose what's the problem.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mohammedrashadkm at gmail.com  Thu Oct 20 08:29:07 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Oct 20 09:44:32 2011
Subject: [gdal-dev] gdal custom build
Message-ID: <CANNqv9dK+V_=Dv2fFVF0jDa29q4nBN9P1pB1ns07=0cKrHTQqg@mail.gmail.com>

All,
How to build gdal with only OGR support?

I need to disable raster things from gdal
Is it possible?

I tried ./configure --help but no sucess

-- 
Regards,
   Mohammed Rashad K M
   M.S. (By Research) student
   Lab for Spatial Informatics
   Department of CSE
   International Institute of Information Technology
   Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111020/bd2887b2/attachment.html
From candini at meeo.it  Thu Oct 20 08:34:32 2011
From: candini at meeo.it (canduc17)
Date: Thu Oct 20 09:49:29 2011
Subject: [gdal-dev] Re: Autoconf macro for gdal-config
In-Reply-To: <CABUeae9oAV3cy7ZZuwqu+=vaPaA5_F-FxRU3hc=zs=pTXvMBPA@mail.gmail.com>
References: <1319010296403-6907599.post@n2.nabble.com>
	<CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
	<1319099855400-6912091.post@n2.nabble.com>
	<CABUeae9oAV3cy7ZZuwqu+=vaPaA5_F-FxRU3hc=zs=pTXvMBPA@mail.gmail.com>
Message-ID: <1319114072701-6912716.post@n2.nabble.com>

I did post nothing because I have to better check what is going on with my
project. No time for doing that right now.
I launched my configure script in the same way, but probably something is
missing in my configure.ac.

Could you please post your configure.ac?

Thanks

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Autoconf-macro-for-gdal-config-tp6907599p6912716.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From julien.malik at c-s.fr  Thu Oct 20 09:02:30 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Thu Oct 20 10:18:50 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
Message-ID: <4EA01BE6.3030200@c-s.fr>

Hi,

Is it possible and/or planned that you also provide the gdal branches in 
git ?
I may be wrong but I only see the trunk.

I just found myself in need for backporting one trunk commit into the 
1.8 branch.
Of course extracting the diff and trying to apply it as-is does not work.
Git would certainly be my friend here (specifically git-rebase).

Julien

Le 18/10/2011 20:50, Mateusz ?oskot a ?crit :
> Hi,
>
> To those who are interested, I've just posted updated pre-loaded [1] git
> repository of GDAL which is a copy of what I use to maintain at GitHub [2]:
>
> http://mateusz.loskot.net/tmp/gdal/mloskot-github-gdal-20111018.7z
>
> [1] http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030369.html
> [2] https://github.com/mloskot/gdal
From wsureshoot at fastmail.fm  Thu Oct 20 11:14:14 2011
From: wsureshoot at fastmail.fm (Roger Viton)
Date: Thu Oct 20 12:38:00 2011
Subject: [gdal-dev] Re: DTED Elevations with Java and gdal
In-Reply-To: <CA+YzLBchW7uK8bj8c3jiuUS-neBToLLCB_s22LczuKYvZ7CHkg@mail.gmail.com>
References: <1319055819214-6910385.post@n2.nabble.com>
	<CA+YzLBchW7uK8bj8c3jiuUS-neBToLLCB_s22LczuKYvZ7CHkg@mail.gmail.com>
Message-ID: <1319123654779-6913271.post@n2.nabble.com>

Grateful for your replies.

Am not fluent yet in all the coordinate systems.
Will learn them though.

We have a DTED dt0 file that has 121*121 data points.

Used geotools to get the elevation at point (1,1).
When gdallocationinfo.exe was run at the same point (1,1)
gdallocationinfo returned the same elevation.

A good sign.

Plan to port the gdallocationinfo.cpp to Java.

Will report back when it is complete.  Maybe someone
else is interested also.

Thank you.

Roger


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/DTED-Elevations-with-Java-and-gdal-tp6910385p6913271.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Oct 20 12:48:52 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 20 14:17:54 2011
Subject: [gdal-dev] gdal custom build
In-Reply-To: <CANNqv9dK+V_=Dv2fFVF0jDa29q4nBN9P1pB1ns07=0cKrHTQqg@mail.gmail.com>
References: <CANNqv9dK+V_=Dv2fFVF0jDa29q4nBN9P1pB1ns07=0cKrHTQqg@mail.gmail.com>
Message-ID: <CA+YzLBeayAhO9o-_xQgy7mvYuNh_LDLU6fA6doysLKdxGdnXMw@mail.gmail.com>

On Thu, Oct 20, 2011 at 5:29 AM, Mohammed Rashad
<mohammedrashadkm@gmail.com> wrote:
> All,
> How to build gdal with only OGR support?
> I need to disable raster things from gdal
> Is it possible?
> I tried ./configure --help but no sucess

Mohammed,

I do not believe there is a convenient way to do this from configure.
However, you can edit out most actual drivers by modifying the
GDAL_FORMATS macro in gdal/GDALmake.opt to drop formats.
After this you could need to do a clean build (make clean; make).

There are likely a few formats tied into other parts of the system that
you won't be able to remove.  VRT and GTIFF and perhaps others.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mateusz at loskot.net  Thu Oct 20 14:41:18 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Oct 20 16:16:46 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <4EA01BE6.3030200@c-s.fr>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
Message-ID: <CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>

2011/10/20 Julien Malik <julien.malik@c-s.fr>:
> Is it possible and/or planned that you also provide the gdal branches in git?

I guess it is possible. I just didn't bother to do it.

> I may be wrong but I only see the trunk.

You are correct. It' s only the trunk.

> I just found myself in need for backporting one trunk commit into the 1.8
> branch.
> Of course extracting the diff and trying to apply it as-is does not work.
> Git would certainly be my friend here (specifically git-rebase).

I'm afraid you'd need to extend the Git workflow on your own.
Once you've done it, I can try to apply it in the mirror at Github.
I don't have time to discover it myself now, I'm afraid.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From julien.malik at c-s.fr  Thu Oct 20 15:04:01 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Thu Oct 20 16:40:47 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
Message-ID: <4EA070A1.3060806@c-s.fr>

Hi,
>> I just found myself in need for backporting one trunk commit into the 1.8
>> branch.
>> Of course extracting the diff and trying to apply it as-is does not work.
>> Git would certainly be my friend here (specifically git-rebase).
> I'm afraid you'd need to extend the Git workflow on your own.
> Once you've done it, I can try to apply it in the mirror at Github.
> I don't have time to discover it myself now, I'm afraid.
>
Sorry I think I was not clear enough : my goal is to generate a patch 
for inclusion in a gdal-1.8.0 debian package [1]
No plan at all for committing it in the gdal svn after that.

I would play with my local git repo (letting git do all the hard work, I 
hope) and in the end just extract a diff file.

Best regards,
Julien

[1] http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030466.html

From mateusz at loskot.net  Thu Oct 20 16:59:27 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Oct 20 18:41:52 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <4EA070A1.3060806@c-s.fr>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
Message-ID: <CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>

2011/10/20 Julien Malik <julien.malik@c-s.fr>:
> Sorry I think I was not clear enough : my goal is to generate a patch for
> inclusion in a gdal-1.8.0 debian package [1]
> No plan at all for committing it in the gdal svn after that.
>
> I would play with my local git repo (letting git do all the hard work, I
> hope) and in the end just extract a diff file.

Juline,

I believe I've understood your needs.
You'd like to have Git repo with all GDAL branches.
I say, I like the idea but I have no time to learn how to create and
maintain (sync) it using git svn,
so I can replace the current mirror at GitHub with complete GDAL SVN
repo mirror including trunk, branches
and presumably tags.

So, I suggested that if you have resources, you could figure out how to do it,
then send me receipt and I will use it to regenerate and replace
current Git repo at GitHub.
Then I can maintain such fully featured mirror there

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Thu Oct 20 18:26:50 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Oct 20 20:14:11 2011
Subject: [gdal-dev] Re: Autoconf macro for gdal-config
In-Reply-To: <1319114072701-6912716.post@n2.nabble.com>
References: <1319010296403-6907599.post@n2.nabble.com>
	<CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
	<1319099855400-6912091.post@n2.nabble.com>
	<CABUeae9oAV3cy7ZZuwqu+=vaPaA5_F-FxRU3hc=zs=pTXvMBPA@mail.gmail.com>
	<1319114072701-6912716.post@n2.nabble.com>
Message-ID: <CABUeae8HhPZCQY=GS=i+6q4vrZXNujaNp7oYSc5SdhAV-YuqbA@mail.gmail.com>

On 20 October 2011 13:34, canduc17 <candini@meeo.it> wrote:
> I did post nothing because I have to better check what is going on with my
> project. No time for doing that right now.
> I launched my configure script in the same way, but probably something is
> missing in my configure.ac.
>
> Could you please post your configure.ac?

In /test folder at https://github.com/mloskot/autotools-modules
you will find simple project I use for testing my modules.

Here is my run with complete results:

mloskot@dog: test (master)$ pwd
/home/mloskot/dev/mloskot/_git/autotools-modules/test

mloskot@dog: test (master)$ ./autogen.sh
--with-gdal=/home/mloskot/usr/bin/gdal-config
processing .
Running aclocal -I ../macros  ...
Running autoheader...
Running automake --gnu  ...
configure.ac:5: installing `./install-sh'
configure.ac:5: installing `./missing'
src/Makefile.am: installing `./depcomp'
Makefile.am: installing `./INSTALL'
Running autoconf ...
Running ./configure --enable-maintainer-mode
--with-gdal=/home/mloskot/usr/bin/gdal-config ...
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... yes
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for gdal-config... /home/mloskot/usr/bin/gdal-config
checking for GDAL library... yes
checking for OGR support in GDAL library... yes
checking if GDAL version is >= 1.8.0... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating config.h
config.status: executing depfiles commands

********* Test summary *********

*** GDAL variables set by configure:
GDAL_VERSION=1.9.0
GDAL_CFLAGS=-I/home/mloskot/usr/include
GDAL_LDFLAGS=-L/home/mloskot/usr/lib -lgdal
GDAL_DEP_LDFLAGS=-L/usr/local/lib -lgeos_c -lpthread -lm -lrt -ldl
GDAL_OGR_ENABLED=yes

*** GDAL preprocessor definitions generated in config.h:
#define HAVE_GDAL 1
#define HAVE_GDAL_OGR 1

Now type `make' to compile.
mloskot@dog: test (master %)$

Best regards
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From antonio.valentino at tiscali.it  Fri Oct 21 02:54:38 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Fri Oct 21 05:38:18 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
Message-ID: <20111021085438.696e2a4b@asigrid01>

Hi Mateusz, hi Julien,

Il giorno Thu, 20 Oct 2011 21:59:27 +0100
Mateusz ?oskot <mateusz@loskot.net> ha scritto:

> 2011/10/20 Julien Malik <julien.malik@c-s.fr>:
> > Sorry I think I was not clear enough : my goal is to generate a
> > patch for inclusion in a gdal-1.8.0 debian package [1]
> > No plan at all for committing it in the gdal svn after that.
> >
> > I would play with my local git repo (letting git do all the hard
> > work, I hope) and in the end just extract a diff file.
> 
> Juline,
> 
> I believe I've understood your needs.
> You'd like to have Git repo with all GDAL branches.
> I say, I like the idea but I have no time to learn how to create and
> maintain (sync) it using git svn,
> so I can replace the current mirror at GitHub with complete GDAL SVN
> repo mirror including trunk, branches
> and presumably tags.
> 
> So, I suggested that if you have resources, you could figure out how
> to do it, then send me receipt and I will use it to regenerate and
> replace current Git repo at GitHub.
> Then I can maintain such fully featured mirror there
> 
> Best regards,

It seems that the svn2git [1] tool (based on git-svn) is able to import
svn repositories with branches in a proper way.
I never used it an I don't know if it allows to push changes back to
svn.
Anyway since Julien only needs to generate a patch, svn2git should be
good for its purposes.


[1] https://github.com/nirvdrum/svn2git

regards

-- 
Antonio Valentino
From julien.malik at c-s.fr  Fri Oct 21 05:14:53 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Fri Oct 21 07:38:06 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <20111021085438.696e2a4b@asigrid01>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>	<4EA01BE6.3030200@c-s.fr>	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>	<4EA070A1.3060806@c-s.fr>	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
Message-ID: <4EA1380D.7010706@c-s.fr>

Antonio,
> It seems that the svn2git [1] tool (based on git-svn) is able to import
> svn repositories with branches in a proper way.
> I never used it an I don't know if it allows to push changes back to
> svn.
> Anyway since Julien only needs to generate a patch, svn2git should be
> good for its purposes.
>
>
> [1] https://github.com/nirvdrum/svn2git
Thanks for the tip, I'll look in that direction.

Julien
From mateusz at loskot.net  Fri Oct 21 05:46:10 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Oct 21 08:11:03 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <20111021085438.696e2a4b@asigrid01>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
Message-ID: <CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>

On 21 October 2011 07:54, Antonio Valentino
<antonio.valentino@tiscali.it> wrote:
> It seems that the svn2git [1] tool (based on git-svn) is able to import
> svn repositories with branches in a proper way.
> I never used it an I don't know if it allows to push changes back to
> svn.
> Anyway since Julien only needs to generate a patch, svn2git should be
> good for its purposes.
>
>
> [1] https://github.com/nirvdrum/svn2git

"(...) This is a one way sync, but allows you to use svn2git as a
mirroring tool for your SVN repositories."

Thanks! It looks it is what we need.

I will try to recreate the mirror using svn2git over the weekend.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From etourigny.dev at gmail.com  Fri Oct 21 09:33:02 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Oct 21 12:10:07 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
	<CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
Message-ID: <CA+TxYvMmOK85BC94h5dWGrCuEfdnGQdkrEkcoUzWA-s6L-EawA@mail.gmail.com>

>From this page it seems like it's quite easy using just "git svn", and
doesn't require an extra tool.

http://trac.parrot.org/parrot/wiki/git-svn-tutorial

Instructions there are:

git svn clone -s -r 40000:HEAD https://svn.parrot.org/parrot # choose
some recent-ish commit

-s is for --stdlayout which presumes the svn recommended layout for
tags, trunk, and branches.
-r is for the revision to start taking history from. If you want to
include all of the history, just leave that option off, but it will
take a very long time, and you really don't need all of it.

This should also work (adding -s to git svn init), although I didn't try

 git svn init -s https://svn.osgeo.org/gdal/trunk/

2011/10/21 Mateusz ?oskot <mateusz@loskot.net>:
> On 21 October 2011 07:54, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
>> It seems that the svn2git [1] tool (based on git-svn) is able to import
>> svn repositories with branches in a proper way.
>> I never used it an I don't know if it allows to push changes back to
>> svn.
>> Anyway since Julien only needs to generate a patch, svn2git should be
>> good for its purposes.
>>
>>
>> [1] https://github.com/nirvdrum/svn2git
>
> "(...) This is a one way sync, but allows you to use svn2git as a
> mirroring tool for your SVN repositories."
>
> Thanks! It looks it is what we need.
>
> I will try to recreate the mirror using svn2git over the weekend.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From discoursemap at live.com  Fri Oct 21 09:34:03 2011
From: discoursemap at live.com (Discourse Maps)
Date: Fri Oct 21 12:12:17 2011
Subject: [gdal-dev] ReadAsArray with Windows 7
Message-ID: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>


Hi,

I was wondering if the issue mentioned in a past thread has every been addressed. 
http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html

I am having much the same issues with GDAL 1.6.1, Windows 7, and using 'ReadAsArray'.  Python crashes almost every time.

Any help is most appreciated.

Thanks,
Jimmy
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111021/6a696c08/attachment.html
From warmerdam at pobox.com  Fri Oct 21 13:14:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 21 16:03:30 2011
Subject: [gdal-dev] ReadAsArray with Windows 7
In-Reply-To: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>
References: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>
Message-ID: <CA+YzLBfFOZCmNi0cLpoX8JZwEzxqNh_JUXiEtugwtfgZbzCyTw@mail.gmail.com>

On Fri, Oct 21, 2011 at 6:34 AM, Discourse Maps <discoursemap@live.com> wrote:
> Hi,
>
> I was wondering if the issue mentioned in a past thread has every been
> addressed.
> http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html
>
> I am having much the same issues with GDAL 1.6.1, Windows 7, and using
> 'ReadAsArray'.? Python crashes almost every time.
>
> Any help is most appreciated.

Jimmy,

It looks like the folks running into the problem were all using
Tamas' binaries.  Would you be willing to see if you can reproduce
the problem with the OSGeo4W binaries?  If so, please file a ticket
against GDAL with all the details and hopefully someone will be
able to dig into it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Fri Oct 21 13:49:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 21 16:40:04 2011
Subject: [gdal-dev] ReadAsArray with Windows 7
In-Reply-To: <SNT130-W442370372A4CCB5C1D9431BCE80@phx.gbl>
References: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>
	<CA+YzLBfFOZCmNi0cLpoX8JZwEzxqNh_JUXiEtugwtfgZbzCyTw@mail.gmail.com>
	<SNT130-W442370372A4CCB5C1D9431BCE80@phx.gbl>
Message-ID: <CA+YzLBc_qzciY4HJrWQO87sk1Uc4Omh-NeJKaWLjFJ_cOUdJVw@mail.gmail.com>

Jimmy,

Visit http://osgeo4w.osgeo.org/ and follow the instructions.
You will need to go through "advanced install" and ensure
the "gdal-python" package is selected for installation.

After it completes you should have an OSGeo4W shell icon on
your desktop.  You can launch that and from within that shell
you should have a python interpreter available which will find
the GDAL/OGR Python bindings.  So you could do something like:

  python your.py

If the problem with your script persists when using the OSGeo4W
python environment then I should be able to reproduce it with a
suitable bug report.  If it does not happen with OSGeo4W then
the issue likely relates to Tamas's use of SWIG version for the
python bindings, or possibly a mismatch between the version of
Python he built for, and the version you are running.

(or something else...)

Best regards,

On Fri, Oct 21, 2011 at 10:36 AM, Discourse Maps <discoursemap@live.com> wrote:
> Sure. ?Though I'm not too saavy with the open source programming.
> How do I go about acquiring and installing?OSGeo4W binaries?
>
>> Date: Fri, 21 Oct 2011 10:14:39 -0700
>> Subject: Re: [gdal-dev] ReadAsArray with Windows 7
>> From: warmerdam@pobox.com
>> To: discoursemap@live.com
>> CC: gdal-dev@lists.osgeo.org
>>
>> On Fri, Oct 21, 2011 at 6:34 AM, Discourse Maps <discoursemap@live.com>
>> wrote:
>> > Hi,
>> >
>> > I was wondering if the issue mentioned in a past thread has every been
>> > addressed.
>> >
>> > http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html
>> >
>> > I am having much the same issues with GDAL 1.6.1, Windows 7, and using
>> > 'ReadAsArray'.? Python crashes almost every time.
>> >
>> > Any help is most appreciated.
>>
>> Jimmy,
>>
>> It looks like the folks running into the problem were all using
>> Tamas' binaries. Would you be willing to see if you can reproduce
>> the problem with the OSGeo4W binaries? If so, please file a ticket
>> against GDAL with all the details and hopefully someone will be
>> able to dig into it.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From traviskirstine at gmail.com  Fri Oct 21 13:56:52 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Oct 21 16:47:52 2011
Subject: [gdal-dev] get metadata from dataset
Message-ID: <CALtm4h32kMkH+dygMZgpiYo=BKvxtO3RBqrv=_hp8qgrx3m6ug@mail.gmail.com>

How do you get the "image structure metadata" (source_color_space,
interleave etc....) displayed in gdalinfo using the API

python

ds = gdal.Open('file.tif', 0)
ds.Metadata
returns a empty dict

Regards
From warmerdam at pobox.com  Fri Oct 21 14:03:38 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 21 16:55:04 2011
Subject: [gdal-dev] get metadata from dataset
In-Reply-To: <CALtm4h32kMkH+dygMZgpiYo=BKvxtO3RBqrv=_hp8qgrx3m6ug@mail.gmail.com>
References: <CALtm4h32kMkH+dygMZgpiYo=BKvxtO3RBqrv=_hp8qgrx3m6ug@mail.gmail.com>
Message-ID: <CA+YzLBe3hDUAMzB6e9qb8j2sxpvJmFCdycSVnRZmzRffu+wA7A@mail.gmail.com>

On Fri, Oct 21, 2011 at 10:56 AM, Travis Kirstine
<traviskirstine@gmail.com> wrote:
> How do you get the "image structure metadata" (source_color_space,
> interleave etc....) displayed in gdalinfo using the API
>
> python
>
> ds = gdal.Open('file.tif', 0)
> ds.Metadata
> returns a empty dict

Travis,

You need to fetch the "IMAGE_STRUCTURE" domain.

eg.
print ds.GetMetadata('IMAGE_STRUCTURE')

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From szekerest at gmail.com  Fri Oct 21 14:36:03 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Oct 21 17:29:31 2011
Subject: [gdal-dev] ReadAsArray with Windows 7
In-Reply-To: <CA+YzLBfFOZCmNi0cLpoX8JZwEzxqNh_JUXiEtugwtfgZbzCyTw@mail.gmail.com>
References: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>
	<CA+YzLBfFOZCmNi0cLpoX8JZwEzxqNh_JUXiEtugwtfgZbzCyTw@mail.gmail.com>
Message-ID: <CACALY+S=+2gSFjeT0bBde279B31CAkYrLHW8pQuY6BRgJ8eSQg@mail.gmail.com>

2011/10/21 Frank Warmerdam <warmerdam@pobox.com>

> On Fri, Oct 21, 2011 at 6:34 AM, Discourse Maps <discoursemap@live.com>
> wrote:
> > Hi,
> >
> > I was wondering if the issue mentioned in a past thread has every been
> > addressed.
> >
> http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html
> >
> > I am having much the same issues with GDAL 1.6.1, Windows 7, and using
> > 'ReadAsArray'.  Python crashes almost every time.
> >
> > Any help is most appreciated.
>
> Jimmy,
>
> It looks like the folks running into the problem were all using
> Tamas' binaries.  Would you be willing to see if you can reproduce
> the problem with the OSGeo4W binaries?  If so, please file a ticket
> against GDAL with all the details and hopefully someone will be
> able to dig into it.
>
>

I think it wasn't mentioned which binaries have been used. By reading back
the thread above, it was said an old gdal distribution caused the issue
whereas the daily builds were working:

<quote>
It appears that the official binaries for gdal 1.6 simply do not work on
Win7 x64 while the problem is already fixed in the cutting edge builds
</quote>

Daily builds also do autotests including the use of ReadAsArray()
in numpy_rw.py  and it doesn't seem to be failing.
One issue I have in my mind is a crash with the x64 version of Python +
numpy+ GDAL (in autotests) therefore numpy hasn't been added in the x64
builds.

By all means if someone can prepare a ready to use test case to reproduce
this issue, I'll be happy to do a test with that.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111021/ce5e5110/attachment.html
From szekerest at gmail.com  Fri Oct 21 14:49:07 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Oct 21 17:43:08 2011
Subject: [gdal-dev] ReadAsArray with Windows 7
In-Reply-To: <CA+YzLBc_qzciY4HJrWQO87sk1Uc4Omh-NeJKaWLjFJ_cOUdJVw@mail.gmail.com>
References: <SNT130-W1961217609AFEBC0D62723BCE80@phx.gbl>
	<CA+YzLBfFOZCmNi0cLpoX8JZwEzxqNh_JUXiEtugwtfgZbzCyTw@mail.gmail.com>
	<SNT130-W442370372A4CCB5C1D9431BCE80@phx.gbl>
	<CA+YzLBc_qzciY4HJrWQO87sk1Uc4Omh-NeJKaWLjFJ_cOUdJVw@mail.gmail.com>
Message-ID: <CACALY+TS6=xj+owMA85M+YvxDyFXkH91nR4U0m_EzNeq1EW5pg@mail.gmail.com>

2011/10/21 Frank Warmerdam <warmerdam@pobox.com>
>
> If the problem with your script persists when using the OSGeo4W
> python environment then I should be able to reproduce it with a
> suitable bug report.  If it does not happen with OSGeo4W then
> the issue likely relates to Tamas's use of SWIG version for the
> python bindings, or possibly a mismatch between the version of
> Python he built for, and the version you are running.
>

Frank,

BTW: The daily builds at http://www.gisinternals.com/sdk/ always re-generate
the python bindings from the interface files. Is this something that makes
the python bindings more fragile compared to the pre-generated version of
the SWIG output hosted in GDAL SVN? However we may often find that the SWIG
output doesn't always updated when the interface is changing.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111021/352413d8/attachment-0001.html
From hdam99 at gmail.com  Fri Oct 21 16:26:07 2011
From: hdam99 at gmail.com (hdam99@gmail.com)
Date: Fri Oct 21 19:25:14 2011
Subject: [gdal-dev] ogr2ogr different behaviour on different OS platforms
 (Windows 7 vs XP)
Message-ID: <1319228767209-6918436.post@n2.nabble.com>

Hi,

I use the same ogr2ogr 1.8.1 running on both Windows 7 (64-bit) and XP.  I
got the expected result from Windows 7, but XP gave me warning and errors.  
The ogr2ogr command is:

ogr2ogr.exe -f PostgreSQL "PG:dbname=name user=user password=pwd
host=host_name port=5432" OCI:name/pwd@serviceID:table_name -overwrite -nlt
POLYGON -nln new_table_name -sql "select * from table_name where column_n
like '%somePattern%'"

The XP warns of the conflict of using both -nln and -sql at the same time. 
It also issue error in creating the table.

Why are there error/warning from XP version, and how can I fix it?

Thanks - H

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-different-behaviour-on-different-OS-platforms-Windows-7-vs-XP-tp6918436p6918436.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Oct 21 16:33:40 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 21 19:49:15 2011
Subject: [gdal-dev] ogr2ogr different behaviour on different OS platforms
	(Windows 7 vs XP)
In-Reply-To: <1319228767209-6918436.post@n2.nabble.com>
References: <1319228767209-6918436.post@n2.nabble.com>
Message-ID: <201110212233.40133.even.rouault@mines-paris.org>

Le vendredi 21 octobre 2011 22:26:07, hdam99@gmail.com a ?crit :
> Hi,
> 
> I use the same ogr2ogr 1.8.1 running on both Windows 7 (64-bit) and XP.  I
> got the expected result from Windows 7, but XP gave me warning and errors.
> The ogr2ogr command is:
> 
> ogr2ogr.exe -f PostgreSQL "PG:dbname=name user=user password=pwd
> host=host_name port=5432" OCI:name/pwd@serviceID:table_name -overwrite -nlt
> POLYGON -nln new_table_name -sql "select * from table_name where column_n
> like '%somePattern%'"
> 
> The XP warns of the conflict of using both -nln and -sql at the same time.
> It also issue error in creating the table.
> 
> Why are there error/warning from XP version, and how can I fix it?
> 

This is very surprising. I've reviewed the code of ogr2ogr and can't see any 
warning telling about a conflict of using both -nln and -sql at the same time

The only somehow related message is "layer names ignored in combination with -
sql", but this is not related with the use of -nln. It is issued if you try to 
do this : ogr2ogr destdatasource srcdatasource srclayername -sql "something"

If it is the above error message, then it would suggest you perhaps didn't 
issue the exact same command line on both systems, and on one of them, you 
could have forgotten to specify "-nln". This is my best bet actually ;-)

Provided it is not the above error message, could you paste *verbatim* the 
error message you got ?

> Thanks - H
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-different-behaviour-on-diff
> erent-OS-platforms-Windows-7-vs-XP-tp6918436p6918436.html Sent from the
> GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From josh at joshdoe.com  Sat Oct 22 00:22:04 2011
From: josh at joshdoe.com (Josh Doe)
Date: Sat Oct 22 03:48:06 2011
Subject: [gdal-dev] Creating JPEGs with gdal2tiles using 4-band GeoTIFFs
	(RGB+NIR)
Message-ID: <CAJnipd4-=HOp-YcReHZ595+5NnWub2pq=p9-ic27wXMUZcSV-Q@mail.gmail.com>

Hello,
I've gotten 4-band imagery from USGS for Virginia, and it's stored in
GeoTIFF format. The bands are R, G, B, and NIR. I tried running
gdal2tiles directly on one of these files, and got a bad result, since
it interpreted the NIR band as an alpha channel. I tried looking in
the source to ignore this fourth band and just write out simple JPEGs
using the first three bands, but couldn't figure out how to do so.
Anyone else try this?

I was able to convert one file to just RGB using "gdal_translate -b 1
-b 2 -b 3 ...", and then gdal2tiles was successful, however I have
thousands of GeoTIFFs to work with and might not have the space to be
converting the whole batch to eliminate the NIR band.

Thanks for any help,
-Josh
From dev4cx4m9z at snkmail.com  Sat Oct 22 01:47:43 2011
From: dev4cx4m9z at snkmail.com (dev4cx4m9z@snkmail.com)
Date: Sat Oct 22 05:18:22 2011
Subject: [gdal-dev] Still Confused about datum transformations
Message-ID: <001501cc907e$1fc90ad0$5f5b2070$@snkmail.com>

I have received many useful suggestions, but I am still struggling with what
should be a simple problem. I am trying to translate a series of lat/lon
coordinates in WGS84 coordinates to lat/lon coordinates for my map (AGD66).
The code is below, and seems to mirror sample code in the GDAL tutorials.
When I create the coordinate transform, I get error message "No PROJ.4
translation for source SRS, coordinate transformation initialization
failed".

 

PROJ.dll is in the right place, and GDAL_DATA and PROJ_LIB are correctly
defined. I don't think the error is here because when I put illegal
parameters (e.g. EPSG:111111) it throws an exception.

 

I have noticed that when I add a projection to the SRS it seems to help, but
I'm not up to that yet. All I want to do is transform from one datum to
another (in code). Can anyone see the simple mistake I must be making?

 

 

       Dim WGS84SRS As New OGRSpatialReference     ' Coordinate system in
WGS84

        Dim MapSRS As New OGRSpatialReference       ' Coordinate system of
map

        Dim ctWGS84toMap As New OGRCoordinateTransformation       '
Coordinate transform from WGS84 to map

        Dim WGS84WKT As String, MapWKT As String

        With WGS84SRS

            GDALError = .SetProjCS("WGS84 Datum")

            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
GetLastErrorMsg())

            GDALError = .SetWellKnownGeogCS("WGS84")          ' Define WGS84
coordinate system

            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
GetLastErrorMsg())

            WGS84WKT = .ExportToWkt

        End With

        With MapSRS

            GDALError = .SetProjCS("Map Datum")

            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
GetLastErrorMsg())

            GDALError = .SetWellKnownGeogCS("EPSG:4202")          '
Australian Geodetic 1966

            Debug.Assert(GDALError = OGRError.OGRERR_NONE,
GetLastErrorMsg())

            MapWKT = .ExportToWkt

        End With

        ctWGS84toMap = GDAL.CreateCoordinateTransformation(WGS84SRS, MapSRS)
' Create a coordinate transformation - WGS84 to map

 

WGS84WKT = "PROJCS["WGS84 Datum",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],A
UTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],

UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG",
"4326"]]]"

 

MapWKT = "PROJCS["Map
Datum",GEOGCS["AGD66",DATUM["Australian_Geodetic_Datum_1966",SPHEROID["Austr
alian National
Spheroid",6378160,298.25,AUTHORITY["EPSG","7003"]],TOWGS84[-117.808,-51.536,
137.784,0.303,0.446,0.234,-0.29],AUTHORITY["EPSG","6202"]],PRIMEM["Greenwich
",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EP
SG","9122"]],AUTHORITY["EPSG","4202"]]]"

 

_______________________________________

Marc Hillman, Melbourne, Australia

http://users.tpg.com.au/users/mhillman/

marc .hillman @ t p g . c o m . a u

Eagles may soar, but weasels don't get sucked into jet engines.

Early bird gets the worm, but the second mouse gets the cheese.

If Barbie is so popular, why do you have to buy her friends?

All those who believe in psychokinesis, raise my hand.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111022/af281b15/attachment.html
From even.rouault at mines-paris.org  Sat Oct 22 03:09:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 22 06:45:49 2011
Subject: [gdal-dev] Creating JPEGs with gdal2tiles using 4-band GeoTIFFs
	(RGB+NIR)
In-Reply-To: <CAJnipd4-=HOp-YcReHZ595+5NnWub2pq=p9-ic27wXMUZcSV-Q@mail.gmail.com>
References: <CAJnipd4-=HOp-YcReHZ595+5NnWub2pq=p9-ic27wXMUZcSV-Q@mail.gmail.com>
Message-ID: <201110220909.56187.even.rouault@mines-paris.org>

Le samedi 22 octobre 2011 06:22:04, Josh Doe a ?crit :
> Hello,
> I've gotten 4-band imagery from USGS for Virginia, and it's stored in
> GeoTIFF format. The bands are R, G, B, and NIR. I tried running
> gdal2tiles directly on one of these files, and got a bad result, since
> it interpreted the NIR band as an alpha channel. I tried looking in
> the source to ignore this fourth band and just write out simple JPEGs
> using the first three bands, but couldn't figure out how to do so.
> Anyone else try this?
> 
> I was able to convert one file to just RGB using "gdal_translate -b 1
> -b 2 -b 3 ...", and then gdal2tiles was successful, however I have
> thousands of GeoTIFFs to work with and might not have the space to be
> converting the whole batch to eliminate the NIR band.

You can use your workaround, but instead of producing RGB TIFF, you can 
produce VRT files that are small XML files describing the transformation from 
R,G,B,NIR to R,G,B and that will be considered as valid raster by GDAL tools. 
You just have to add -of VRT to the gdal_translate command line. Then use 
gdal2tiles on those VRT files.

> 
> Thanks for any help,
> -Josh
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Sat Oct 22 07:57:06 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Oct 22 11:48:17 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
Message-ID: <4EA2AF92.4090805@ualg.pt>

Hi,

I'm having troubles reading a SeaWifs L2 hdf file due to a bug in the 
hdf driver. The problem here is that not all Subdatasets are read.
Below is the list givem by gdalinfo, which lacks 2 subdatasets: the
cntl_pt_cols & cntl_pt_rows
To prove I attach a little screencapture of "HDF Explorer".

Now I have two questions.

1- The hdf file in question is relatively small (1.2 Mb). Can I attach 
it to a ticket?

2- If I build GDAL with netCDF4, can I force the reading of this file 
with the netCDF driver? And if yes, how?

Thanks

Joaquim




Subdatasets:
   
SUBDATASET_1_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":11
   SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
   
SUBDATASET_2_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":12
   SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
   
SUBDATASET_3_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":13
   SUBDATASET_3_DESC=[391x78] Rrs_412 (16-bit integer)
   
SUBDATASET_4_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":14
   SUBDATASET_4_DESC=[391x78] Rrs_443 (16-bit integer)
   
SUBDATASET_5_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":15
   SUBDATASET_5_DESC=[391x78] Rrs_490 (16-bit integer)
   
SUBDATASET_6_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":16
   SUBDATASET_6_DESC=[391x78] Rrs_510 (16-bit integer)
   
SUBDATASET_7_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":17
   SUBDATASET_7_DESC=[391x78] Rrs_555 (16-bit integer)
   
SUBDATASET_8_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":18
   SUBDATASET_8_DESC=[391x78] Rrs_670 (16-bit integer)
   
SUBDATASET_9_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":19
   SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
   
SUBDATASET_10_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":20
   SUBDATASET_10_DESC=[391x78] Kd_490 (16-bit integer)
   
SUBDATASET_11_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":21
   SUBDATASET_11_DESC=[391x78] pic (16-bit integer)
   
SUBDATASET_12_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":22
   SUBDATASET_12_DESC=[391x78] poc (16-bit integer)
   
SUBDATASET_13_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":23
   SUBDATASET_13_DESC=[391x78] cdom_index (16-bit integer)
   
SUBDATASET_14_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":24
   SUBDATASET_14_DESC=[391x78] par (16-bit integer)
   
SUBDATASET_15_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":25
   SUBDATASET_15_DESC=[391x78] l2_flags (32-bit integer)
   
SUBDATASET_16_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":34
   SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
   
SUBDATASET_17_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":35
   SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
   
SUBDATASET_18_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":36
   SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
   
SUBDATASET_19_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":37
   SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
   
SUBDATASET_20_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":38
   SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
   
SUBDATASET_21_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":39
   SUBDATASET_21_DESC=[391x8] nflag (32-bit integer)
   
SUBDATASET_22_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":42
   SUBDATASET_22_DESC=[20x2] tilt_ranges (16-bit integer)
Corner Coordinates:
-------------- next part --------------
Skipped content of type multipart/related
From mateusz at loskot.net  Sat Oct 22 09:08:48 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat Oct 22 13:03:31 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
	<CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
Message-ID: <CABUeae-HKRGPkQjT3-aX4A1Cd1Ho23uppXuuBXWtQ-Krs4pkVQ@mail.gmail.com>

2011/10/21 Mateusz ?oskot <mateusz@loskot.net>:
> On 21 October 2011 07:54, Antonio Valentino
> <antonio.valentino@tiscali.it> wrote:
>> It seems that the svn2git [1] tool (based on git-svn) is able to import
>> svn repositories with branches in a proper way.
>> I never used it an I don't know if it allows to push changes back to
>> svn.
>> Anyway since Julien only needs to generate a patch, svn2git should be
>> good for its purposes.
>>
>>
>> [1] https://github.com/nirvdrum/svn2git
>
> "(...) This is a one way sync, but allows you to use svn2git as a
> mirroring tool for your SVN repositories."
>
> Thanks! It looks it is what we need.
>
> I will try to recreate the mirror using svn2git over the weekend.

I've rebuilt GDAL mirror at GitHub using svn2git.
I hope it's in usable state.

I've also updated the Wiki with the process explanation:

http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow#Gitrepositorysetupusingsvn2git

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From hdam99 at gmail.com  Sat Oct 22 11:11:26 2011
From: hdam99 at gmail.com (hdam99@gmail.com)
Date: Sat Oct 22 15:13:11 2011
Subject: [gdal-dev] Re: ogr2ogr different behaviour on different OS
 platforms (Windows 7 vs XP)
In-Reply-To: <1319228767209-6918436.post@n2.nabble.com>
References: <1319228767209-6918436.post@n2.nabble.com>
Message-ID: <CAFm7zcPUUPsAAS6rH6XaYtho7V3azax1x1M+aA5Ja-kJ-H5-Jw@mail.gmail.com>

Hi,

Thanks, yes the warning was my fault, missing -nln option.  The creation
table error happens intermittently, could potentially caused by wrapping
ogr2org execution from a C# thread.  Any pointers/advices on how to make
this call more reliable are much appreciated.

Thanks - H

On Fri, Oct 21, 2011 at 4:26 PM, hdam99@gmail.com [via OSGeo.org] <
ml-node+s1803224n6918436h92@n2.nabble.com> wrote:

> Hi,
>
> I use the same ogr2ogr 1.8.1 running on both Windows 7 (64-bit) and XP.  I
> got the expected result from Windows 7, but XP gave me warning and errors.
> The ogr2ogr command is:
>
> ogr2ogr.exe -f PostgreSQL "PG:dbname=name user=user password=pwd
> host=host_name port=5432" OCI:name/pwd@serviceID:table_name -overwrite
> -nlt POLYGON -nln new_table_name -sql "select * from table_name where
> column_n like '%somePattern%'"
>
> The XP warns of the conflict of using both -nln and -sql at the same time.
>  It also issue error in creating the table.
>
> Why are there error/warning from XP version, and how can I fix it?
>
> Thanks - H
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-different-behaviour-on-different-OS-platforms-Windows-7-vs-XP-tp6918436p6918436.html
>  To start a new topic under GDAL - Dev, email
> ml-node+s1803224n2022644h40@n2.nabble.com
> To unsubscribe from GDAL - Dev, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=2022644&code=aGRhbTk5QGdtYWlsLmNvbXwyMDIyNjQ0fC02NDg0MzcwODU=>.
>
>


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-different-behaviour-on-different-OS-platforms-Windows-7-vs-XP-tp6918436p6920266.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111022/c98555d9/attachment.html
From josh at joshdoe.com  Sat Oct 22 11:40:56 2011
From: josh at joshdoe.com (Josh Doe)
Date: Sat Oct 22 15:44:47 2011
Subject: [gdal-dev] Creating JPEGs with gdal2tiles using 4-band GeoTIFFs
	(RGB+NIR)
In-Reply-To: <201110220909.56187.even.rouault@mines-paris.org>
References: <CAJnipd4-=HOp-YcReHZ595+5NnWub2pq=p9-ic27wXMUZcSV-Q@mail.gmail.com>
	<201110220909.56187.even.rouault@mines-paris.org>
Message-ID: <CAJnipd6L7iOTVHKSWov4utrm1+FuY4b6teMd4BxeCmQgp+F3Zw@mail.gmail.com>

On Sat, Oct 22, 2011 at 3:09 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le samedi 22 octobre 2011 06:22:04, Josh Doe a ?crit :
>> Hello,
>> I've gotten 4-band imagery from USGS for Virginia, and it's stored in
>> GeoTIFF format. The bands are R, G, B, and NIR. I tried running
>> gdal2tiles directly on one of these files, and got a bad result, since
>> it interpreted the NIR band as an alpha channel. I tried looking in
>> the source to ignore this fourth band and just write out simple JPEGs
>> using the first three bands, but couldn't figure out how to do so.
>> Anyone else try this?
>>
>> I was able to convert one file to just RGB using "gdal_translate -b 1
>> -b 2 -b 3 ...", and then gdal2tiles was successful, however I have
>> thousands of GeoTIFFs to work with and might not have the space to be
>> converting the whole batch to eliminate the NIR band.
>
> You can use your workaround, but instead of producing RGB TIFF, you can
> produce VRT files that are small XML files describing the transformation from
> R,G,B,NIR to R,G,B and that will be considered as valid raster by GDAL tools.
> You just have to add -of VRT to the gdal_translate command line. Then use
> gdal2tiles on those VRT files.

Thanks, this worked perfectly! I used gdalbuildvrt on the thousands of
GeoTIFFs, then ran gdal_translate to pick out the R, G, and B bands to
create another VRT. I didn't realize until your message that you could
create a VRT from another VRT.

Thanks again,
-Josh
From etourigny.dev at gmail.com  Sat Oct 22 15:46:17 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Oct 22 20:02:53 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <4EA2AF92.4090805@ualg.pt>
References: <4EA2AF92.4090805@ualg.pt>
Message-ID: <CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 14393 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111022/01bbe110/attachment-0001.png
From joolek.o at gmail.com  Sat Oct 22 19:10:22 2011
From: joolek.o at gmail.com (joolek)
Date: Sat Oct 22 19:20:44 2011
Subject: [gdal-dev] Gdal_translate, question from an amateur.
Message-ID: <1319325022991-6921127.post@n2.nabble.com>

Hi all, 
I need your expertise... I've got number of TIFF's and ECW's with RGB
(72,255,25) that I would like to convert to 255,255,255.

How should the command looks like?.. gdal_translate -scale (not sure about
this) <input> <output>
Thank you guys!!, appreciate any help.
J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921127.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Sat Oct 22 20:41:17 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat Oct 22 20:56:31 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae-HKRGPkQjT3-aX4A1Cd1Ho23uppXuuBXWtQ-Krs4pkVQ@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
	<CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
	<CABUeae-HKRGPkQjT3-aX4A1Cd1Ho23uppXuuBXWtQ-Krs4pkVQ@mail.gmail.com>
Message-ID: <CABUeae9e+s9_HqGa_ibFNYs7S6zsfV-Saw5XaD4AXH5m08T4eA@mail.gmail.com>

2011/10/22 Mateusz ?oskot <mateusz@loskot.net>:
> 2011/10/21 Mateusz ?oskot <mateusz@loskot.net>:
>> On 21 October 2011 07:54, Antonio Valentino
>> <antonio.valentino@tiscali.it> wrote:
>>> It seems that the svn2git [1] tool (based on git-svn) is able to import
>>> svn repositories with branches in a proper way.
>>> I never used it an I don't know if it allows to push changes back to
>>> svn.
>>> Anyway since Julien only needs to generate a patch, svn2git should be
>>> good for its purposes.
>>>
>>>
>>> [1] https://github.com/nirvdrum/svn2git
>>
>> "(...) This is a one way sync, but allows you to use svn2git as a
>> mirroring tool for your SVN repositories."
>>
>> Thanks! It looks it is what we need.
>>
>> I will try to recreate the mirror using svn2git over the weekend.
>
> I've rebuilt GDAL mirror at GitHub using svn2git.
> I hope it's in usable state.
>
> I've also updated the Wiki with the process explanation:
>
> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow#Gitrepositorysetupusingsvn2git

Folks,

It turns out the full SVN repo mirroring is not working well.
The GDAL Git at GitHub has broken, so moved it to gdal-old.
The svn2git pulls number of very ancient pre-SVN branches created
during CVS times
which are no longer vislble at http://svn.osgeo.org/gdal
Then gives up with weird errors which I have no idea about neither
time to investigate.

ATM, GDAL mirror at GitHub is not functioning. I'll try to bring it back ASAP.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Sat Oct 22 21:51:59 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat Oct 22 22:11:11 2011
Subject: [gdal-dev] Wiki page about CMake for GDAL
Message-ID: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>

Folks

I have started brainstorming the CMake for GDAL idea on Wiki:

http://trac.osgeo.org/gdal/wiki/CMake

Feel free to add your ideas, wishes, proposals, questions, etc.
Try to keep it clear and structured if possible.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From jzl5325 at psu.edu  Sat Oct 22 21:57:16 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Oct 22 22:16:46 2011
Subject: [gdal-dev] Gdal_translate, question from an amateur.
In-Reply-To: <1319325022991-6921127.post@n2.nabble.com>
References: <1319325022991-6921127.post@n2.nabble.com>
Message-ID: <CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>

I'm not sure I fully understand the question.  Are you attempting to convert
all pixels with RGB value 72, 255, 25 to white?  Or are you trying to scale
the image to 8-bit?

Sounds like the former.  In this case -scale is not the way to go.  I'm
honestly not sure what is, short of reading each band into a numpy array and
then checking individual pixels in each band.  You could then modify the
value in each array by position.

On Sat, Oct 22, 2011 at 7:10 PM, joolek <joolek.o@gmail.com> wrote:

> Hi all,
> I need your expertise... I've got number of TIFF's and ECW's with RGB
> (72,255,25) that I would like to convert to 255,255,255.
>
> How should the command looks like?.. gdal_translate -scale (not sure about
> this) <input> <output>
> Thank you guys!!, appreciate any help.
> J
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921127.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111022/05d34d17/attachment.html
From joolek.o at gmail.com  Sun Oct 23 01:57:46 2011
From: joolek.o at gmail.com (joolek)
Date: Sun Oct 23 02:30:46 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
Message-ID: <1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>

Hi
Yes - I need to convert all the pixels into white. Is this possible?
Thank you
J

On 23 Oct 2011, at 02:57, "Jay L. [via OSGeo.org]" <ml-node+s1803224n6921281h87@n2.nabble.com> wrote:

> I'm not sure I fully understand the question.  Are you attempting to convert all pixels with RGB value 72, 255, 25 to white?  Or are you trying to scale the image to 8-bit?  
> 
> Sounds like the former.  In this case -scale is not the way to go.  I'm honestly not sure what is, short of reading each band into a numpy array and then checking individual pixels in each band.  You could then modify the value in each array by position.
> 
> On Sat, Oct 22, 2011 at 7:10 PM, joolek <[hidden email]> wrote:
> Hi all,
> I need your expertise... I've got number of TIFF's and ECW's with RGB
> (72,255,25) that I would like to convert to 255,255,255.
> 
> How should the command looks like?.. gdal_translate -scale (not sure about
> this) <input> <output>
> Thank you guys!!, appreciate any help.
> J
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921127.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> 
> If you reply to this email, your message will be added to the discussion below:
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921281.html
> To unsubscribe from Gdal_translate, question from an amateur., click here.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921459.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111022/41895714/attachment.html
From joolek.o at gmail.com  Sun Oct 23 04:53:43 2011
From: joolek.o at gmail.com (joolek)
Date: Sun Oct 23 05:36:48 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
Message-ID: <1319360023955-6921658.post@n2.nabble.com>

Hi me again...,
Would it be actually possible to convert all the 255 255 255 into 254 254
254?

Is this is the command to do so: gdal_translate -scale 0 254 0 255 <input>
<output>

Thank you in advance for your time, 
J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921658.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From joolek.o at gmail.com  Sun Oct 23 06:01:50 2011
From: joolek.o at gmail.com (joolek)
Date: Sun Oct 23 06:48:19 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
Message-ID: <1319364110375-6921730.post@n2.nabble.com>

Basically - I have an imagery with RGB 0-255, but I would like to strip it to
1-254.
So i want to get rid off two extremes (0 and 255) - is this possible?
Thank you
J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From antonio.valentino at tiscali.it  Sun Oct 23 07:17:00 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Oct 23 08:07:43 2011
Subject: [gdal-dev] New mloskot-github-gdal-20111018.7z
In-Reply-To: <CABUeae9e+s9_HqGa_ibFNYs7S6zsfV-Saw5XaD4AXH5m08T4eA@mail.gmail.com>
References: <CABUeae_WaiK_VQYZua-JC=+RdU+4Jcca=2vMAXErbOZOKgsNLA@mail.gmail.com>
	<4EA01BE6.3030200@c-s.fr>
	<CABUeae_CyoziWBfMt31PLjcN8hc342ijmrwN9kv9_nFg7HNZSw@mail.gmail.com>
	<4EA070A1.3060806@c-s.fr>
	<CABUeae9J6JXdvrXnv7uyNdSQ2ymcfxoGGt+um2-w7VqzLmxo3g@mail.gmail.com>
	<20111021085438.696e2a4b@asigrid01>
	<CABUeae8pi5G0v7WxpXFQPMOy_aJUWhmWahZKtJV_Ci0rFTPZ3g@mail.gmail.com>
	<CABUeae-HKRGPkQjT3-aX4A1Cd1Ho23uppXuuBXWtQ-Krs4pkVQ@mail.gmail.com>
	<CABUeae9e+s9_HqGa_ibFNYs7S6zsfV-Saw5XaD4AXH5m08T4eA@mail.gmail.com>
Message-ID: <4EA3F7AC.7060203@tiscali.it>

Hi Mateusz, hi Julien, hi Etienne,

Il 23/10/2011 02:41, Mateusz ?oskot ha scritto:
> 2011/10/22 Mateusz ?oskot <mateusz@loskot.net>:
>> 2011/10/21 Mateusz ?oskot <mateusz@loskot.net>:
>>> On 21 October 2011 07:54, Antonio Valentino
>>> <antonio.valentino@tiscali.it> wrote:
>>>> It seems that the svn2git [1] tool (based on git-svn) is able to import
>>>> svn repositories with branches in a proper way.
>>>> I never used it an I don't know if it allows to push changes back to
>>>> svn.
>>>> Anyway since Julien only needs to generate a patch, svn2git should be
>>>> good for its purposes.
>>>>
>>>>
>>>> [1] https://github.com/nirvdrum/svn2git
>>>
>>> "(...) This is a one way sync, but allows you to use svn2git as a
>>> mirroring tool for your SVN repositories."
>>>
>>> Thanks! It looks it is what we need.
>>>
>>> I will try to recreate the mirror using svn2git over the weekend.
>>
>> I've rebuilt GDAL mirror at GitHub using svn2git.
>> I hope it's in usable state.
>>
>> I've also updated the Wiki with the process explanation:
>>
>> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow#Gitrepositorysetupusingsvn2git
> 
> Folks,
> 
> It turns out the full SVN repo mirroring is not working well.
> The GDAL Git at GitHub has broken, so moved it to gdal-old.
> The svn2git pulls number of very ancient pre-SVN branches created
> during CVS times
> which are no longer vislble at http://svn.osgeo.org/gdal
> Then gives up with weird errors which I have no idea about neither
> time to investigate.
> 
> ATM, GDAL mirror at GitHub is not functioning. I'll try to bring it back ASAP.
> 
> Best regards,

Just pushed on https://github.com/avalentino/gdal a new mirror of
https://svn.osgeo.org/gdal generated with git-svn and the --stdlayout
option (as suggested by Etienne).

The tool seems to handle both svn branches and tags ad git branches in
the svn remote, so I manually created branches and tags on the git side
pointing to them.

I should be able to sync the master branch with git-svn rebase but I
have no idea, at the moment, on hos to sync branches.

I'm going to upload a bzipped version of the git svn clone on

https://github.com/avalentino/gdal/downloads

regards

-- 
Antonio Valentino
From rush at winkey.org  Sun Oct 23 10:02:25 2011
From: rush at winkey.org (Brian Case)
Date: Sun Oct 23 11:02:17 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <1319364110375-6921730.post@n2.nabble.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
Message-ID: <1319378545.24288.3.camel@octopi>

joolek,

I noticed you used the word "strip". Are you trying to remove portions
of the image that are all black or white?


On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
> Basically - I have an imagery with RGB 0-255, but I would like to strip it to
> 1-254.
> So i want to get rid off two extremes (0 and 255) - is this possible?
> Thank you
> J
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jzl5325 at psu.edu  Sun Oct 23 10:25:55 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sun Oct 23 11:26:58 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <1319378545.24288.3.camel@octopi>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
	<1319378545.24288.3.camel@octopi>
Message-ID: <CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>

Or are you trying to convert only some of the pixels to white?

On Sun, Oct 23, 2011 at 10:02 AM, Brian Case <rush@winkey.org> wrote:

> joolek,
>
> I noticed you used the word "strip". Are you trying to remove portions
> of the image that are all black or white?
>
>
> On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
> > Basically - I have an imagery with RGB 0-255, but I would like to strip
> it to
> > 1-254.
> > So i want to get rid off two extremes (0 and 255) - is this possible?
> > Thank you
> > J
> >
> > --
> > View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111023/11d0d52d/attachment.html
From joolek.o at gmail.com  Sun Oct 23 12:59:42 2011
From: joolek.o at gmail.com (joolek)
Date: Sun Oct 23 14:09:24 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
	<1319378545.24288.3.camel@octopi>
	<CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>
Message-ID: <B59C1E91-DA96-426E-9C02-B0926D13731A@gmail.com>

Hi
I need to convert all the 255 255 255 into 254 254 254. Is this possible?
PS. Do appologize for lack of my language. 

Thanks
J

On 23 Oct 2011, at 15:26, "Jay L. [via OSGeo.org]" <ml-node+s1803224n6922091h97@n2.nabble.com> wrote:

> Or are you trying to convert only some of the pixels to white?
> 
> On Sun, Oct 23, 2011 at 10:02 AM, Brian Case <[hidden email]> wrote:
> joolek,
> 
> I noticed you used the word "strip". Are you trying to remove portions
> of the image that are all black or white?
> 
> 
> On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
> > Basically - I have an imagery with RGB 0-255, but I would like to strip it to
> > 1-254.
> > So i want to get rid off two extremes (0 and 255) - is this possible?
> > Thank you
> > J
> >
> > --
> > View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email]
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> 
> If you reply to this email, your message will be added to the discussion below:
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922091.html
> To unsubscribe from Gdal_translate, question from an amateur., click here.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922377.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111023/712f0c55/attachment.html
From jzl5325 at psu.edu  Sun Oct 23 14:19:59 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sun Oct 23 15:34:13 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <B59C1E91-DA96-426E-9C02-B0926D13731A@gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
	<1319378545.24288.3.camel@octopi>
	<CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>
	<B59C1E91-DA96-426E-9C02-B0926D13731A@gmail.com>
Message-ID: <CA+bfmPtczw41e8+dOUvk1msDXrpW4+qk=iV376i5PZD=raonsQ@mail.gmail.com>

I do not believe that a GDAL command line tool to perform that function
exists.  The task is achievable using GDAL and Numpy masked arrays in
python.

Perhaps someone else knows of a GDAL tool to perform this functionality
though.

J

On Sun, Oct 23, 2011 at 12:59 PM, joolek <joolek.o@gmail.com> wrote:

> Hi
> I need to convert all the 255 255 255 into 254 254 254. Is this possible?
> PS. Do appologize for lack of my language.
>
> Thanks
> J
>
> On 23 Oct 2011, at 15:26, "Jay L. [via OSGeo.org]" <[hidden email]<http://user/SendEmail.jtp?type=node&node=6922377&i=0>>
> wrote:
>
> Or are you trying to convert only some of the pixels to white?
>
> On Sun, Oct 23, 2011 at 10:02 AM, Brian Case <[hidden email]<http://user/SendEmail.jtp?type=node&node=6922091&i=0>
> > wrote:
>
>> joolek,
>>
>> I noticed you used the word "strip". Are you trying to remove portions
>> of the image that are all black or white?
>>
>>
>> On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
>> > Basically - I have an imagery with RGB 0-255, but I would like to strip
>> it to
>> > 1-254.
>> > So i want to get rid off two extremes (0 and 255) - is this possible?
>> > Thank you
>> > J
>> >
>> > --
>> > View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
>> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> > _______________________________________________
>> > gdal-dev mailing list
>> > [hidden email] <http://user/SendEmail.jtp?type=node&node=6922091&i=1>
>>
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=6922091&i=2>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=6922091&i=3>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922091.html
>  To unsubscribe from Gdal_translate, question from an amateur., click here.
>
>
>
> ------------------------------
> View this message in context: Re: Gdal_translate, question from an
> amateur.<http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922377.html>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1803224.n2.nabble.com/GDAL-Dev-f2022644.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111023/954e9e32/attachment.html
From joolek.o at gmail.com  Sun Oct 23 14:53:57 2011
From: joolek.o at gmail.com (joolek)
Date: Sun Oct 23 16:10:03 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <CA+bfmPtczw41e8+dOUvk1msDXrpW4+qk=iV376i5PZD=raonsQ@mail.gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
	<1319378545.24288.3.camel@octopi>
	<CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>
	<B59C1E91-DA96-426E-9C02-B0926D13731A@gmail.com>
	<CA+bfmPtczw41e8+dOUvk1msDXrpW4+qk=iV376i5PZD=raonsQ@mail.gmail.com>
Message-ID: <CEDD9ED3-3215-40A1-AE8E-94A7D0277E51@gmail.com>

Hmm...  So what the following does : 
gdal_translate -scale 0 254 0 255 <input> <output>

Thank you
J

23 Oct 2011, at 19:20, "Jay L. [via OSGeo.org]" <ml-node+s1803224n6922518h34@n2.nabble.com> wrote:

> I do not believe that a GDAL command line tool to perform that function exists.  The task is achievable using GDAL and Numpy masked arrays in python.
> 
> Perhaps someone else knows of a GDAL tool to perform this functionality though.
> 
> J
> 
> On Sun, Oct 23, 2011 at 12:59 PM, joolek <[hidden email]> wrote:
> Hi
> I need to convert all the 255 255 255 into 254 254 254. Is this possible?
> PS. Do appologize for lack of my language. 
> 
> Thanks
> J
> 
> On 23 Oct 2011, at 15:26, "Jay L. [via OSGeo.org]" <[hidden email]> wrote:
> 
>> Or are you trying to convert only some of the pixels to white?
>> 
>> On Sun, Oct 23, 2011 at 10:02 AM, Brian Case <[hidden email]> wrote:
>> joolek,
>> 
>> I noticed you used the word "strip". Are you trying to remove portions
>> of the image that are all black or white?
>> 
>> 
>> On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
>> > Basically - I have an imagery with RGB 0-255, but I would like to strip it to
>> > 1-254.
>> > So i want to get rid off two extremes (0 and 255) - is this possible?
>> > Thank you
>> > J
>> >
>> > --
>> > View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
>> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> > _______________________________________________
>> > gdal-dev mailing list
>> > [hidden email]
>> 
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> _______________________________________________ 
>> gdal-dev mailing list 
>> [hidden email] 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>> 
>> If you reply to this email, your message will be added to the discussion below:
>> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922091.html
>> To unsubscribe from Gdal_translate, question from an amateur., click here.
> 
> View this message in context: Re: Gdal_translate, question from an amateur.
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> 
> If you reply to this email, your message will be added to the discussion below:
> http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922518.html
> To unsubscribe from Gdal_translate, question from an amateur., click here.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922637.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111023/f5622d3c/attachment-0001.html
From jluis at ualg.pt  Sun Oct 23 14:54:50 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Oct 23 16:11:05 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>
References: <4EA2AF92.4090805@ualg.pt>
	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>
Message-ID: <4EA462FA.3060608@ualg.pt>

Etienne,

1) Manage to attach the file (zipped) to the just opened ticket.

2) Unfortunately it doesn't work. It says the usual

C:\SVN\mironeWC>gdalinfo "NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude"
ERROR 4: `NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude' does not 
exist in the file system,

Note that I built GDAL with netcdf4 that on Windows is always linked 
against HDF.

Joaquim



> 1) Not sure, but give it a try! If not, put it somewhere accessible on 
> the web.  You should definitively create a ticket for this.
>
> 2)
> netcdf supports HDF4 if it was configured for hdf4 support.
>
> In that case, to force the netcdf driver you would have to 
> use "NETCDF:filename:subdataset", or else the HDF4 driver will open it 
> pick it up.
>
> Etienne
>
> On Sat, Oct 22, 2011 at 9:57 AM, Joaquim Luis <jluis@ualg.pt 
> <mailto:jluis@ualg.pt>> wrote:
>
>     Hi,
>
>     I'm having troubles reading a SeaWifs L2 hdf file due to a bug in
>     the hdf driver. The problem here is that not all Subdatasets are
>     read.
>     Below is the list givem by gdalinfo, which lacks 2 subdatasets: the
>     cntl_pt_cols & cntl_pt_rows
>     To prove I attach a little screencapture of "HDF Explorer".
>
>     Now I have two questions.
>
>     1- The hdf file in question is relatively small (1.2 Mb). Can I
>     attach it to a ticket?
>
>     2- If I build GDAL with netCDF4, can I force the reading of this
>     file with the netCDF driver? And if yes, how?
>
>     Thanks
>
>     Joaquim
>
>
>
>
>     Subdatasets:
>      
>     SUBDATASET_1_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":11
>       SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
>      
>     SUBDATASET_2_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":12
>       SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
>      
>     SUBDATASET_3_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":13
>       SUBDATASET_3_DESC=[391x78] Rrs_412 (16-bit integer)
>      
>     SUBDATASET_4_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":14
>       SUBDATASET_4_DESC=[391x78] Rrs_443 (16-bit integer)
>      
>     SUBDATASET_5_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":15
>       SUBDATASET_5_DESC=[391x78] Rrs_490 (16-bit integer)
>      
>     SUBDATASET_6_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":16
>       SUBDATASET_6_DESC=[391x78] Rrs_510 (16-bit integer)
>      
>     SUBDATASET_7_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":17
>       SUBDATASET_7_DESC=[391x78] Rrs_555 (16-bit integer)
>      
>     SUBDATASET_8_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":18
>       SUBDATASET_8_DESC=[391x78] Rrs_670 (16-bit integer)
>      
>     SUBDATASET_9_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":19
>       SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
>      
>     SUBDATASET_10_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":20
>       SUBDATASET_10_DESC=[391x78] Kd_490 (16-bit integer)
>      
>     SUBDATASET_11_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":21
>       SUBDATASET_11_DESC=[391x78] pic (16-bit integer)
>      
>     SUBDATASET_12_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":22
>       SUBDATASET_12_DESC=[391x78] poc (16-bit integer)
>      
>     SUBDATASET_13_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":23
>       SUBDATASET_13_DESC=[391x78] cdom_index (16-bit integer)
>      
>     SUBDATASET_14_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":24
>       SUBDATASET_14_DESC=[391x78] par (16-bit integer)
>      
>     SUBDATASET_15_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":25
>       SUBDATASET_15_DESC=[391x78] l2_flags (32-bit integer)
>      
>     SUBDATASET_16_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":34
>       SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
>      
>     SUBDATASET_17_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":35
>       SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
>      
>     SUBDATASET_18_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":36
>       SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
>      
>     SUBDATASET_19_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":37
>       SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
>      
>     SUBDATASET_20_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":38
>       SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
>      
>     SUBDATASET_21_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":39
>       SUBDATASET_21_DESC=[391x8] nflag (32-bit integer)
>      
>     SUBDATASET_22_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":42
>       SUBDATASET_22_DESC=[20x2] tilt_ranges (16-bit integer)
>     Corner Coordinates:
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
Skipped content of type multipart/related
From mateusz at loskot.net  Sun Oct 23 17:16:29 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sun Oct 23 18:40:02 2011
Subject: [gdal-dev] Wiki page about CMake for GDAL
In-Reply-To: <20111023032130.7866.qmail@s466.sureserver.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<20111023032130.7866.qmail@s466.sureserver.com>
Message-ID: <CABUeae-a8LSN8082y8oPf-vqwpZ39dPByR+AKqamCXz_qku1gw@mail.gmail.com>

On 23 October 2011 04:21, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Hi Mateusz,
>
> Just a thought,
>
> Since GDAL is used in some large software projects, it could be helpful to explain how cmake could help,
> and not hurt, the integration of GDAL building process into their existing building process.
> Folks need to know that they don't need to integrated cmake into their already complex building scripts.
> They just need to run cmake once, build the makefiles just like we do already do with ./configure.
> It is just that cmake does it better, they way it checks the dependencies and user options,
> and they way it does a unified approach for Windows and UNIX(s).

Ivan,

Good point about deployment and integration.
It's also important to point that CMake will not replace current build
configuration,
but will be be provided as an alternative, AFAIK.
Please, consider adding your thoughts to the wiki.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From rush at winkey.org  Sun Oct 23 17:19:52 2011
From: rush at winkey.org (Brian Case)
Date: Sun Oct 23 18:43:44 2011
Subject: [gdal-dev] Re: Gdal_translate, question from an amateur.
In-Reply-To: <CEDD9ED3-3215-40A1-AE8E-94A7D0277E51@gmail.com>
References: <1319325022991-6921127.post@n2.nabble.com>
	<CA+bfmPv6Qs1Ucdv_w7+p+8CD-iaYMj_yJz7QU2q525yKfZt4DA@mail.gmail.com>
	<1D686AD2-11C1-4B87-91DE-7AFDF1B811E3@gmail.com>
	<1319364110375-6921730.post@n2.nabble.com>
	<1319378545.24288.3.camel@octopi>
	<CA+bfmPua=+g6OrhuqvazagS+9Lue_K3K1Xrifd5JSUj0nkQoRQ@mail.gmail.com>
	<B59C1E91-DA96-426E-9C02-B0926D13731A@gmail.com>
	<CA+bfmPtczw41e8+dOUvk1msDXrpW4+qk=iV376i5PZD=raonsQ@mail.gmail.com>
	<CEDD9ED3-3215-40A1-AE8E-94A7D0277E51@gmail.com>
Message-ID: <1319404792.24288.9.camel@octopi>

Joolek,


gdal_translate cannot look at 3 bands at a time, -scale 0 255 1 254 will
scale each band separately, therefore 0 255 0 would become 1 254 1.

At one point I thought perhaps you were trying to get rid of a border,
but now I don't think thats the issue.

Brian



On Sun, 2011-10-23 at 11:53 -0700, joolek wrote:
> Hmm...  So what the following does : 
> gdal_translate -scale 0 <a href="tel:254%200%20255">254 0 255 <input>
> <output>
> 
> 
> Thank you
> J
> 
> 
> 23 Oct 2011, at 19:20, "Jay L. [via OSGeo.org]" <[hidden email]>
> wrote:
> 
> 
> 
> > I do not believe that a GDAL command line tool to perform that
> > function exists.  The task is achievable using GDAL and Numpy masked
> > arrays in python.
> > 
> > 
> > Perhaps someone else knows of a GDAL tool to perform this
> > functionality though.
> > 
> > 
> > J
> > 
> > On Sun, Oct 23, 2011 at 12:59 PM, joolek <[hidden email]> wrote:
> >         Hi
> >         I need to convert all the 255 255 255 into 254 254 254. Is
> >         this possible?
> >         PS. Do appologize for lack of my language. 
> >         
> >         
> >         Thanks
> >         J
> >         
> >         On 23 Oct 2011, at 15:26, "Jay L. [via OSGeo.org]" <[hidden
> >         email]> wrote:
> >         
> >         
> >         
> >         > Or are you trying to convert only some of the pixels to
> >         > white?
> >         > 
> >         > 
> >         > On Sun, Oct 23, 2011 at 10:02 AM, Brian Case <[hidden
> >         > email]> wrote:
> >         > 
> >         >         joolek,
> >         >         
> >         >         I noticed you used the word "strip". Are you
> >         >         trying to remove portions
> >         >         of the image that are all black or white?
> >         >         
> >         >         
> >         >         
> >         >         
> >         >         On Sun, 2011-10-23 at 03:01 -0700, joolek wrote:
> >         >         > Basically - I have an imagery with RGB 0-255,
> >         >         but I would like to strip it to
> >         >         > 1-254.
> >         >         > So i want to get rid off two extremes (0 and
> >         >         255) - is this possible?
> >         >         > Thank you
> >         >         > J
> >         >         >
> >         >         > --
> >         >         > View this message in context:
> >         >         http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6921730.html
> >         >         > Sent from the GDAL - Dev mailing list archive at
> >         >         Nabble.com.
> >         >         > _______________________________________________
> >         >         > gdal-dev mailing list
> >         >         
> >         >         > [hidden email]
> >         >         
> >         >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >         
> >         >         
> >         >         _______________________________________________
> >         >         gdal-dev mailing list
> >         >         
> >         >         [hidden email]
> >         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >         
> >         > 
> >         > 
> >         > _______________________________________________ 
> >         > gdal-dev mailing list 
> >         > [hidden email] 
> >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> >         > 
> >         > 
> >         > __________________________________________________________
> >         > If you reply to this email, your message will be added to
> >         > the discussion below:
> >         > http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922091.html 
> >         > To unsubscribe from Gdal_translate, question from an
> >         > amateur., click here. 
> >         
> >         
> >         ____________________________________________________________
> >         View this message in context: Re: Gdal_translate, question
> >         from an amateur.
> >         
> >         
> >         Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >         
> >         
> >         _______________________________________________
> >         gdal-dev mailing list
> >         [hidden email]
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > 
> > 
> > _______________________________________________ 
> > gdal-dev mailing list 
> > [hidden email] 
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> > 
> > 
> > ____________________________________________________________________
> > If you reply to this email, your message will be added to the
> > discussion below:
> > http://osgeo-org.1803224.n2.nabble.com/Gdal-translate-question-from-an-amateur-tp6921127p6922518.html 
> > To unsubscribe from Gdal_translate, question from an amateur., click
> > here. 
> 
> 
> ______________________________________________________________________
> View this message in context: Re: Gdal_translate, question from an
> amateur.
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From graeme at inetix.com.au  Sun Oct 23 22:58:20 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Mon Oct 24 00:40:17 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
	<CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
Message-ID: <CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>

Apologies for the delay in replying.

I ran the same command with 10m spacing "gdal_contour -a ELEL -i 1.0
dtm.tif dtm-10m.shp" and the same issue occurred.   I also ran the DTM
through gdal_translate to add projection info just in case. Note this is
gdal_1.8.1 running on Ubuntu Lucid not from deb's but a custom compile

The same symptoms occur, it gets to around 7% or so then hangs. Load goes
through the roof.

Ran it through strace and seems to get stuck in massive loop with calling
brk()

Cheers,
 Graeme

On Thu, Oct 13, 2011 at 4:03 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Graeme,
>
> Can you try again with a much larger interval?
>
> On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>
>> I'm trying out gdal_contour just to see what falls out of it as an
>> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
>> then seems to hang.  I'm trying it on a relatively small DTM
>>
>> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
>> dtm_11072101.tif dtm-1m.shp"
>>
>> and gdalinfo gives the following info  about the image
>> Driver: GTiff/GeoTIFF
>> Files: dtm_11072101.tif
>>      dtm_11072101.tfw
>> Size is 1000, 2500
>> Coordinate System is `'
>> Origin = (488000.000000000000000,7198000.000000000000000)
>> Pixel Size = (2.000000000000000,-2.000000000000000)
>> Metadata:
>>  TIFFTAG_XRESOLUTION=200
>>  TIFFTAG_YRESOLUTION=200
>>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
>> Image Structure Metadata:
>>  INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (  488000.000, 7198000.000)
>> Lower Left  (  488000.000, 7193000.000)
>> Upper Right (  490000.000, 7198000.000)
>> Lower Right (  490000.000, 7193000.000)
>> Center      (  489000.000, 7195500.000)
>> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>>
>> I admit I'm at a loss as to how to proceed/troubleshoot so any
>> pointers gratefully received. I tried popping it through
>> gdal_translate to add a projection but it seems to have the same issue
>>
>> Cheers,
>>  Graeme
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/80807cd5/attachment.html
From graeme at inetix.com.au  Sun Oct 23 23:50:04 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Mon Oct 24 01:35:13 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
	<CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
	<CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>
Message-ID: <CAG5_Ya3BQQBoUNQ+x6qdZisCVDdNZVZm31DiQY6fYOOMLdqdDA@mail.gmail.com>

Correction, the cmdline was "gdal_contour -a ELEL -i 10.0 dtm.tif
dtm-10m.shp"


On Mon, Oct 24, 2011 at 1:58 PM, Graeme Merrall <graeme@inetix.com.au>wrote:

> Apologies for the delay in replying.
>
> I ran the same command with 10m spacing "gdal_contour -a ELEL -i 1.0
> dtm.tif dtm-10m.shp" and the same issue occurred.   I also ran the DTM
> through gdal_translate to add projection info just in case. Note this is
> gdal_1.8.1 running on Ubuntu Lucid not from deb's but a custom compile
>
> The same symptoms occur, it gets to around 7% or so then hangs. Load goes
> through the roof.
>
> Ran it through strace and seems to get stuck in massive loop with calling
> brk()
>
> Cheers,
>  Graeme
>
> On Thu, Oct 13, 2011 at 4:03 PM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Graeme,
>>
>> Can you try again with a much larger interval?
>>
>> On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>
>>> I'm trying out gdal_contour just to see what falls out of it as an
>>> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
>>> then seems to hang.  I'm trying it on a relatively small DTM
>>>
>>> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
>>> dtm_11072101.tif dtm-1m.shp"
>>>
>>> and gdalinfo gives the following info  about the image
>>> Driver: GTiff/GeoTIFF
>>> Files: dtm_11072101.tif
>>>      dtm_11072101.tfw
>>> Size is 1000, 2500
>>> Coordinate System is `'
>>> Origin = (488000.000000000000000,7198000.000000000000000)
>>> Pixel Size = (2.000000000000000,-2.000000000000000)
>>> Metadata:
>>>  TIFFTAG_XRESOLUTION=200
>>>  TIFFTAG_YRESOLUTION=200
>>>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
>>> Image Structure Metadata:
>>>  INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (  488000.000, 7198000.000)
>>> Lower Left  (  488000.000, 7193000.000)
>>> Upper Right (  490000.000, 7198000.000)
>>> Lower Right (  490000.000, 7193000.000)
>>> Center      (  489000.000, 7195500.000)
>>> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>>>
>>> I admit I'm at a loss as to how to proceed/troubleshoot so any
>>> pointers gratefully received. I tried popping it through
>>> gdal_translate to add a projection but it seems to have the same issue
>>>
>>> Cheers,
>>>  Graeme
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/9c86db5b/attachment.html
From chaitanya.ch at gmail.com  Mon Oct 24 00:02:38 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 24 01:48:27 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAG5_Ya3BQQBoUNQ+x6qdZisCVDdNZVZm31DiQY6fYOOMLdqdDA@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
	<CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
	<CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>
	<CAG5_Ya3BQQBoUNQ+x6qdZisCVDdNZVZm31DiQY6fYOOMLdqdDA@mail.gmail.com>
Message-ID: <CAMKgpOaN+ihb1s-SMJ2UF5J685xJ5bLG=c6Sa9=T-T_Ax+4sGA@mail.gmail.com>

Graeme,

Can you provide a small sample image for testing?

On Mon, Oct 24, 2011 at 9:20 AM, Graeme Merrall <graeme@inetix.com.au>wrote:

> Correction, the cmdline was "gdal_contour -a ELEL -i 10.0 dtm.tif
> dtm-10m.shp"
>
>
>
> On Mon, Oct 24, 2011 at 1:58 PM, Graeme Merrall <graeme@inetix.com.au>wrote:
>
>> Apologies for the delay in replying.
>>
>> I ran the same command with 10m spacing "gdal_contour -a ELEL -i 1.0
>> dtm.tif dtm-10m.shp" and the same issue occurred.   I also ran the DTM
>> through gdal_translate to add projection info just in case. Note this is
>> gdal_1.8.1 running on Ubuntu Lucid not from deb's but a custom compile
>>
>> The same symptoms occur, it gets to around 7% or so then hangs. Load goes
>> through the roof.
>>
>> Ran it through strace and seems to get stuck in massive loop with calling
>> brk()
>>
>> Cheers,
>>  Graeme
>>
>> On Thu, Oct 13, 2011 at 4:03 PM, Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> wrote:
>>
>>> Graeme,
>>>
>>> Can you try again with a much larger interval?
>>>
>>> On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>>
>>>> I'm trying out gdal_contour just to see what falls out of it as an
>>>> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
>>>> then seems to hang.  I'm trying it on a relatively small DTM
>>>>
>>>> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
>>>> dtm_11072101.tif dtm-1m.shp"
>>>>
>>>> and gdalinfo gives the following info  about the image
>>>> Driver: GTiff/GeoTIFF
>>>> Files: dtm_11072101.tif
>>>>      dtm_11072101.tfw
>>>> Size is 1000, 2500
>>>> Coordinate System is `'
>>>> Origin = (488000.000000000000000,7198000.000000000000000)
>>>> Pixel Size = (2.000000000000000,-2.000000000000000)
>>>> Metadata:
>>>>  TIFFTAG_XRESOLUTION=200
>>>>  TIFFTAG_YRESOLUTION=200
>>>>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
>>>> Image Structure Metadata:
>>>>  INTERLEAVE=BAND
>>>> Corner Coordinates:
>>>> Upper Left  (  488000.000, 7198000.000)
>>>> Lower Left  (  488000.000, 7193000.000)
>>>> Upper Right (  490000.000, 7198000.000)
>>>> Lower Right (  490000.000, 7193000.000)
>>>> Center      (  489000.000, 7195500.000)
>>>> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>>>>
>>>> I admit I'm at a loss as to how to proceed/troubleshoot so any
>>>> pointers gratefully received. I tried popping it through
>>>> gdal_translate to add a projection but it seems to have the same issue
>>>>
>>>> Cheers,
>>>>  Graeme
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/2b1fe006/attachment-0001.html
From graeme at inetix.com.au  Mon Oct 24 01:57:04 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Mon Oct 24 03:49:02 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAMKgpOaN+ihb1s-SMJ2UF5J685xJ5bLG=c6Sa9=T-T_Ax+4sGA@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
	<CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
	<CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>
	<CAG5_Ya3BQQBoUNQ+x6qdZisCVDdNZVZm31DiQY6fYOOMLdqdDA@mail.gmail.com>
	<CAMKgpOaN+ihb1s-SMJ2UF5J685xJ5bLG=c6Sa9=T-T_Ax+4sGA@mail.gmail.com>
Message-ID: <CAG5_Ya3cLjpKeh--50J80AVO-N_BeAhQ_vyJsbBzOMt-17hNmA@mail.gmail.com>

You can download it from http://dl.dropbox.com/u/5657619/dtm.tif  Only 9.6Mb

Cheers,
 Graeme

On Mon, Oct 24, 2011 at 3:02 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Graeme,
>
> Can you provide a small sample image for testing?
>
>
> On Mon, Oct 24, 2011 at 9:20 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>
>> Correction, the cmdline was "gdal_contour -a ELEL -i 10.0 dtm.tif
>> dtm-10m.shp"
>>
>>
>>
>> On Mon, Oct 24, 2011 at 1:58 PM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>
>>> Apologies for the delay in replying.
>>>
>>> I ran the same command with 10m spacing "gdal_contour -a ELEL -i 1.0
>>> dtm.tif dtm-10m.shp" and the same issue occurred.   I also ran the DTM
>>> through gdal_translate to add projection info just in case. Note this is
>>> gdal_1.8.1 running on Ubuntu Lucid not from deb's but a custom compile
>>>
>>> The same symptoms occur, it gets to around 7% or so then hangs. Load goes
>>> through the roof.
>>>
>>> Ran it through strace and seems to get stuck in massive loop with calling
>>> brk()
>>>
>>> Cheers,
>>>  Graeme
>>>
>>> On Thu, Oct 13, 2011 at 4:03 PM, Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> wrote:
>>>
>>>> Graeme,
>>>>
>>>> Can you try again with a much larger interval?
>>>>
>>>>  On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>>>
>>>>> I'm trying out gdal_contour just to see what falls out of it as an
>>>>> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
>>>>> then seems to hang.  I'm trying it on a relatively small DTM
>>>>>
>>>>> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
>>>>> dtm_11072101.tif dtm-1m.shp"
>>>>>
>>>>> and gdalinfo gives the following info  about the image
>>>>> Driver: GTiff/GeoTIFF
>>>>> Files: dtm_11072101.tif
>>>>>      dtm_11072101.tfw
>>>>> Size is 1000, 2500
>>>>> Coordinate System is `'
>>>>> Origin = (488000.000000000000000,7198000.000000000000000)
>>>>> Pixel Size = (2.000000000000000,-2.000000000000000)
>>>>> Metadata:
>>>>>  TIFFTAG_XRESOLUTION=200
>>>>>  TIFFTAG_YRESOLUTION=200
>>>>>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
>>>>> Image Structure Metadata:
>>>>>  INTERLEAVE=BAND
>>>>> Corner Coordinates:
>>>>> Upper Left  (  488000.000, 7198000.000)
>>>>> Lower Left  (  488000.000, 7193000.000)
>>>>> Upper Right (  490000.000, 7198000.000)
>>>>> Lower Right (  490000.000, 7193000.000)
>>>>> Center      (  489000.000, 7195500.000)
>>>>> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>>>>>
>>>>> I admit I'm at a loss as to how to proceed/troubleshoot so any
>>>>> pointers gratefully received. I tried popping it through
>>>>> gdal_translate to add a projection but it seems to have the same issue
>>>>>
>>>>> Cheers,
>>>>>  Graeme
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/5f5707a0/attachment.html
From chaitanya.ch at gmail.com  Mon Oct 24 03:07:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 24 05:03:35 2011
Subject: [gdal-dev] gdal_contour stuck in processing?
In-Reply-To: <CAG5_Ya3cLjpKeh--50J80AVO-N_BeAhQ_vyJsbBzOMt-17hNmA@mail.gmail.com>
References: <CAG5_Ya3u4Fwgn2bNYq5i0wQR+GpjeCDavAHsEmBUXHQ5=XgQMw@mail.gmail.com>
	<CAMKgpOYiP5BQvg3CZcsfRDeUGj3fUQ0JM6LQ3MNG3_FGL0n1yQ@mail.gmail.com>
	<CAG5_Ya17+iJHCaxBLp-FkS2jc3o5ftwqUb3DGagg4TpuQSYPkg@mail.gmail.com>
	<CAG5_Ya3BQQBoUNQ+x6qdZisCVDdNZVZm31DiQY6fYOOMLdqdDA@mail.gmail.com>
	<CAMKgpOaN+ihb1s-SMJ2UF5J685xJ5bLG=c6Sa9=T-T_Ax+4sGA@mail.gmail.com>
	<CAG5_Ya3cLjpKeh--50J80AVO-N_BeAhQ_vyJsbBzOMt-17hNmA@mail.gmail.com>
Message-ID: <CAMKgpObOXUr7rLBg3hWCumO63cGmpzzJ-LmXZ0BWRmihoJricA@mail.gmail.com>

Graeme,

"gdalinfo -stats dtm.tif" shows "Min=1093360681.000 Max=3351465984.000" for
the pixel values. That would mean you are asking for 225810530 levels; lots
of tightly placed contours. I don't think Shapefile format can accommodate a
vector datasource of that size. Based on the histogram, it's better to use
the -fl option with gdal_contour.

On Mon, Oct 24, 2011 at 11:27 AM, Graeme Merrall <graeme@inetix.com.au>wrote:

> You can download it from http://dl.dropbox.com/u/5657619/dtm.tif  Only
> 9.6Mb
>
> Cheers,
>  Graeme
>
>
> On Mon, Oct 24, 2011 at 3:02 PM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Graeme,
>>
>> Can you provide a small sample image for testing?
>>
>>
>> On Mon, Oct 24, 2011 at 9:20 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>
>>> Correction, the cmdline was "gdal_contour -a ELEL -i 10.0 dtm.tif
>>> dtm-10m.shp"
>>>
>>>
>>>
>>> On Mon, Oct 24, 2011 at 1:58 PM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>>
>>>> Apologies for the delay in replying.
>>>>
>>>> I ran the same command with 10m spacing "gdal_contour -a ELEL -i 1.0
>>>> dtm.tif dtm-10m.shp" and the same issue occurred.   I also ran the DTM
>>>> through gdal_translate to add projection info just in case. Note this is
>>>> gdal_1.8.1 running on Ubuntu Lucid not from deb's but a custom compile
>>>>
>>>> The same symptoms occur, it gets to around 7% or so then hangs. Load
>>>> goes through the roof.
>>>>
>>>> Ran it through strace and seems to get stuck in massive loop with
>>>> calling brk()
>>>>
>>>> Cheers,
>>>>  Graeme
>>>>
>>>> On Thu, Oct 13, 2011 at 4:03 PM, Chaitanya kumar CH <
>>>> chaitanya.ch@gmail.com> wrote:
>>>>
>>>>> Graeme,
>>>>>
>>>>> Can you try again with a much larger interval?
>>>>>
>>>>>  On Thu, Oct 13, 2011 at 6:32 AM, Graeme Merrall <graeme@inetix.com.au
>>>>> > wrote:
>>>>>
>>>>>> I'm trying out gdal_contour just to see what falls out of it as an
>>>>>> experiment.  I've noticed it seems to get to "0.."  e.g. 7% or so, and
>>>>>> then seems to hang.  I'm trying it on a relatively small DTM
>>>>>>
>>>>>> The cmdline is pretty simple "gdal_contour -a ELEL -i 1.0
>>>>>> dtm_11072101.tif dtm-1m.shp"
>>>>>>
>>>>>> and gdalinfo gives the following info  about the image
>>>>>> Driver: GTiff/GeoTIFF
>>>>>> Files: dtm_11072101.tif
>>>>>>      dtm_11072101.tfw
>>>>>> Size is 1000, 2500
>>>>>> Coordinate System is `'
>>>>>> Origin = (488000.000000000000000,7198000.000000000000000)
>>>>>> Pixel Size = (2.000000000000000,-2.000000000000000)
>>>>>> Metadata:
>>>>>>  TIFFTAG_XRESOLUTION=200
>>>>>>  TIFFTAG_YRESOLUTION=200
>>>>>>  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
>>>>>> Image Structure Metadata:
>>>>>>  INTERLEAVE=BAND
>>>>>> Corner Coordinates:
>>>>>> Upper Left  (  488000.000, 7198000.000)
>>>>>> Lower Left  (  488000.000, 7193000.000)
>>>>>> Upper Right (  490000.000, 7198000.000)
>>>>>> Lower Right (  490000.000, 7193000.000)
>>>>>> Center      (  489000.000, 7195500.000)
>>>>>> Band 1 Block=1000x2 Type=UInt32, ColorInterp=Gray
>>>>>>
>>>>>> I admit I'm at a loss as to how to proceed/troubleshoot so any
>>>>>> pointers gratefully received. I tried popping it through
>>>>>> gdal_translate to add a projection but it seems to have the same issue
>>>>>>
>>>>>> Cheers,
>>>>>>  Graeme
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/29358bcc/attachment.html
From anton.korosov at nersc.no  Mon Oct 24 07:52:57 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Mon Oct 24 10:04:32 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <4EA462FA.3060608@ualg.pt>
References: <4EA2AF92.4090805@ualg.pt>	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>
	<4EA462FA.3060608@ualg.pt>
Message-ID: <4EA55199.9030609@nersc.no>

Hi Joaquim!

I'm curious why do you want to read cnt_pt_col and cnt_pt_row from a 
SeaWiFS file?

These dataset (1D vectors, actually) only contains indexes of rows and 
columns for which latitude, longitude grids are given. And you can read 
lat/lon from GCPs. Or do you also feel that only ~100 GCPs are not enough ?

I'm working with MODIS data and in the Arctic warping results look ugly 
sometimes. I was thinking if I should try to get lat/lon grids from an 
HDF file and increase number of GCPs.

Anton

On 10/23/2011 08:54 PM, Joaquim Luis wrote:
> Etienne,
>
> 1) Manage to attach the file (zipped) to the just opened ticket.
>
> 2) Unfortunately it doesn't work. It says the usual
>
> C:\SVN\mironeWC>gdalinfo "NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude"
> ERROR 4: `NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude' does not
> exist in the file system,
>
> Note that I built GDAL with netcdf4 that on Windows is always linked
> against HDF.
>
> Joaquim
>
>
>
>> 1) Not sure, but give it a try! If not, put it somewhere accessible on
>> the web. You should definitively create a ticket for this.
>>
>> 2)
>> netcdf supports HDF4 if it was configured for hdf4 support.
>>
>> In that case, to force the netcdf driver you would have to use
>> "NETCDF:filename:subdataset", or else the HDF4 driver will open it
>> pick it up.
>>
>> Etienne
>>
>> On Sat, Oct 22, 2011 at 9:57 AM, Joaquim Luis <jluis@ualg.pt
>> <mailto:jluis@ualg.pt>> wrote:
>>
>>     Hi,
>>
>>     I'm having troubles reading a SeaWifs L2 hdf file due to a bug in
>>     the hdf driver. The problem here is that not all Subdatasets are
>>     read.
>>     Below is the list givem by gdalinfo, which lacks 2 subdatasets: the
>>     cntl_pt_cols & cntl_pt_rows
>>     To prove I attach a little screencapture of "HDF Explorer".
>>
>>     Now I have two questions.
>>
>>     1- The hdf file in question is relatively small (1.2 Mb). Can I
>>     attach it to a ticket?
>>
>>     2- If I build GDAL with netCDF4, can I force the reading of this
>>     file with the netCDF driver? And if yes, how?
>>
>>     Thanks
>>
>>     Joaquim
>>
>>
>>
>>
>>     Subdatasets:
>>     SUBDATASET_1_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":11
>>     SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
>>     SUBDATASET_2_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":12
>>     SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
>>     SUBDATASET_3_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":13
>>     SUBDATASET_3_DESC=[391x78] Rrs_412 (16-bit integer)
>>     SUBDATASET_4_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":14
>>     SUBDATASET_4_DESC=[391x78] Rrs_443 (16-bit integer)
>>     SUBDATASET_5_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":15
>>     SUBDATASET_5_DESC=[391x78] Rrs_490 (16-bit integer)
>>     SUBDATASET_6_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":16
>>     SUBDATASET_6_DESC=[391x78] Rrs_510 (16-bit integer)
>>     SUBDATASET_7_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":17
>>     SUBDATASET_7_DESC=[391x78] Rrs_555 (16-bit integer)
>>     SUBDATASET_8_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":18
>>     SUBDATASET_8_DESC=[391x78] Rrs_670 (16-bit integer)
>>     SUBDATASET_9_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":19
>>     SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
>>     SUBDATASET_10_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":20
>>     SUBDATASET_10_DESC=[391x78] Kd_490 (16-bit integer)
>>     SUBDATASET_11_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":21
>>     SUBDATASET_11_DESC=[391x78] pic (16-bit integer)
>>     SUBDATASET_12_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":22
>>     SUBDATASET_12_DESC=[391x78] poc (16-bit integer)
>>     SUBDATASET_13_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":23
>>     SUBDATASET_13_DESC=[391x78] cdom_index (16-bit integer)
>>     SUBDATASET_14_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":24
>>     SUBDATASET_14_DESC=[391x78] par (16-bit integer)
>>     SUBDATASET_15_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":25
>>     SUBDATASET_15_DESC=[391x78] l2_flags (32-bit integer)
>>     SUBDATASET_16_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":34
>>     SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
>>     SUBDATASET_17_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":35
>>     SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
>>     SUBDATASET_18_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":36
>>     SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
>>     SUBDATASET_19_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":37
>>     SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
>>     SUBDATASET_20_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":38
>>     SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
>>     SUBDATASET_21_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":39
>>     SUBDATASET_21_DESC=[391x8] nflag (32-bit integer)
>>     SUBDATASET_22_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":42
>>     SUBDATASET_22_DESC=[20x2] tilt_ranges (16-bit integer)
>>     Corner Coordinates:
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From katrineggert1980 at gmail.com  Mon Oct 24 08:18:50 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Mon Oct 24 10:31:51 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
Message-ID: <CAGR7mtD=XyGU9moVac=doqSKDfbFXVXgYLepZNvCXTcZ-mi22A@mail.gmail.com>

Greetings

Is there any tool in GDAL to generate KML-overlay maps from a Geotiff file
(with a single raster map)?
Thanks
Kat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/f9cc7771/attachment.html
From chris.green at ibstv.co.uk  Mon Oct 24 08:35:38 2011
From: chris.green at ibstv.co.uk (Chris Green)
Date: Mon Oct 24 10:50:08 2011
Subject: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
Message-ID: <082f01cc9249$710dcee0$53296ca0$@green@ibstv.co.uk>

Hi List

 

I'm hoping someone can help me make ogr work under Linux with the PGeo
driver, so I can read an ESRI Personal Database .mdb file into Mapserver. I
can see from old posts that the basic problem is that MDBTools is a bit
'flaky' and needs a DSN based connection rather than connecting direct to
the .mdb data.

 

I have been trying to follow the instructions in
http://www.gdal.org/ogr/drv_pgeo.html . Having installed unixODBC and
MDBTools, I configured the odbcinst.ini and odbc.ini files as suggested and
it seems that I have partial success because when I define my datasource in
odbc.ini like so:

 

[my_pgeo]

Description = Sample PGeo Database

Driver      = Microsoft Access Driver (*.mdb)

Database    = /var/www/vhosts/mydomain.com/httpdocs/data/test.mdb

 

then the command ogrinfo  PGeo:my_pgeo results in the following:

 

INFO: Open of 'PGeo:my_pgeo' using driver 'PGeo' successful. 

Error: syntax error at line:2 col:0

 

I can't figure out what or where this syntax error can be. I feel that I am
quite close to success but don't know how to move forward from here. Can
anyone point me in the right direction please?

 

 

Chris 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/a761513d/attachment.html
From jluis at ualg.pt  Mon Oct 24 08:56:11 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Oct 24 11:11:39 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <4EA55199.9030609@nersc.no>
References: <4EA2AF92.4090805@ualg.pt>	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>	<4EA462FA.3060608@ualg.pt>
	<4EA55199.9030609@nersc.no>
Message-ID: <4EA5606B.8000608@ualg.pt>

Anton,

I don't remember the details because I programmed that some time ago, 
but from what I recall that's the most accurate way of interpolating the 
data into a regular grid. The whole procedure is implemented in Mirone 
were the x,y,z triplets (computed after the cnt_pt_col|row)  are 
reinterpolated with minimum curvature or nearneighbor algorithms to 
calculate a regular grid.  Now, this used to work with temperature data 
but it didn't anymore with that chlorophyll file (Mirone stand-alone 
crashed) .  The implementation use a Matlab hdf reader MEX and that MEX 
of the time of ML6.5 crashes. New versions work okay but I cannot used 
them in the Mirone stand-alone so I though in using GDAL (as I do in 
many other instances), except that ... it doesn't work too.

Joaquim

P.S. The whole procedure should be as simple as described here

https://sites.google.com/site/mironehowtos/satellite/import-a-modis-l2-sst-hdf-grid


> Hi Joaquim!
>
> I'm curious why do you want to read cnt_pt_col and cnt_pt_row from a 
> SeaWiFS file?
>
> These dataset (1D vectors, actually) only contains indexes of rows and 
> columns for which latitude, longitude grids are given. And you can 
> read lat/lon from GCPs. Or do you also feel that only ~100 GCPs are 
> not enough ?
>
> I'm working with MODIS data and in the Arctic warping results look 
> ugly sometimes. I was thinking if I should try to get lat/lon grids 
> from an HDF file and increase number of GCPs.
>
> Anton
>
> On 10/23/2011 08:54 PM, Joaquim Luis wrote:
>> Etienne,
>>
>> 1) Manage to attach the file (zipped) to the just opened ticket.
>>
>> 2) Unfortunately it doesn't work. It says the usual
>>
>> C:\SVN\mironeWC>gdalinfo 
>> "NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude"
>> ERROR 4: `NETCDF:S1998031140424.L2_MLAC_OC.x.hdf:longitude' does not
>> exist in the file system,
>>
>> Note that I built GDAL with netcdf4 that on Windows is always linked
>> against HDF.
>>
>> Joaquim
>>
>>
>>
>>> 1) Not sure, but give it a try! If not, put it somewhere accessible on
>>> the web. You should definitively create a ticket for this.
>>>
>>> 2)
>>> netcdf supports HDF4 if it was configured for hdf4 support.
>>>
>>> In that case, to force the netcdf driver you would have to use
>>> "NETCDF:filename:subdataset", or else the HDF4 driver will open it
>>> pick it up.
>>>
>>> Etienne
>>>
>>> On Sat, Oct 22, 2011 at 9:57 AM, Joaquim Luis <jluis@ualg.pt
>>> <mailto:jluis@ualg.pt>> wrote:
>>>
>>>     Hi,
>>>
>>>     I'm having troubles reading a SeaWifs L2 hdf file due to a bug in
>>>     the hdf driver. The problem here is that not all Subdatasets are
>>>     read.
>>>     Below is the list givem by gdalinfo, which lacks 2 subdatasets: the
>>>     cntl_pt_cols & cntl_pt_rows
>>>     To prove I attach a little screencapture of "HDF Explorer".
>>>
>>>     Now I have two questions.
>>>
>>>     1- The hdf file in question is relatively small (1.2 Mb). Can I
>>>     attach it to a ticket?
>>>
>>>     2- If I build GDAL with netCDF4, can I force the reading of this
>>>     file with the netCDF driver? And if yes, how?
>>>
>>>     Thanks
>>>
>>>     Joaquim
>>>
>>>
>>>
>>>
>>>     Subdatasets:
>>>     
>>> SUBDATASET_1_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":11
>>>     SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
>>>     
>>> SUBDATASET_2_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":12
>>>     SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
>>>     
>>> SUBDATASET_3_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":13
>>>     SUBDATASET_3_DESC=[391x78] Rrs_412 (16-bit integer)
>>>     
>>> SUBDATASET_4_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":14
>>>     SUBDATASET_4_DESC=[391x78] Rrs_443 (16-bit integer)
>>>     
>>> SUBDATASET_5_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":15
>>>     SUBDATASET_5_DESC=[391x78] Rrs_490 (16-bit integer)
>>>     
>>> SUBDATASET_6_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":16
>>>     SUBDATASET_6_DESC=[391x78] Rrs_510 (16-bit integer)
>>>     
>>> SUBDATASET_7_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":17
>>>     SUBDATASET_7_DESC=[391x78] Rrs_555 (16-bit integer)
>>>     
>>> SUBDATASET_8_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":18
>>>     SUBDATASET_8_DESC=[391x78] Rrs_670 (16-bit integer)
>>>     
>>> SUBDATASET_9_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":19
>>>     SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
>>>     
>>> SUBDATASET_10_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":20
>>>     SUBDATASET_10_DESC=[391x78] Kd_490 (16-bit integer)
>>>     
>>> SUBDATASET_11_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":21
>>>     SUBDATASET_11_DESC=[391x78] pic (16-bit integer)
>>>     
>>> SUBDATASET_12_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":22
>>>     SUBDATASET_12_DESC=[391x78] poc (16-bit integer)
>>>     
>>> SUBDATASET_13_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":23
>>>     SUBDATASET_13_DESC=[391x78] cdom_index (16-bit integer)
>>>     
>>> SUBDATASET_14_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":24
>>>     SUBDATASET_14_DESC=[391x78] par (16-bit integer)
>>>     
>>> SUBDATASET_15_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":25
>>>     SUBDATASET_15_DESC=[391x78] l2_flags (32-bit integer)
>>>     
>>> SUBDATASET_16_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":34
>>>     SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
>>>     
>>> SUBDATASET_17_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":35
>>>     SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
>>>     
>>> SUBDATASET_18_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":36
>>>     SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
>>>     
>>> SUBDATASET_19_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":37
>>>     SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
>>>     
>>> SUBDATASET_20_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":38
>>>     SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
>>>     
>>> SUBDATASET_21_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":39
>>>     SUBDATASET_21_DESC=[391x8] nflag (32-bit integer)
>>>     
>>> SUBDATASET_22_NAME=HDF4_SDS:SEAWIFS_L2:"S1998031140424.L2_MLAC_OC.x.hdf":42
>>>     SUBDATASET_22_DESC=[20x2] tilt_ranges (16-bit integer)
>>>     Corner Coordinates:
>>>
>>>     _______________________________________________
>>>     gdal-dev mailing list
>>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From jgomezdans at gmail.com  Mon Oct 24 09:04:00 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Mon Oct 24 11:19:40 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <4EA5606B.8000608@ualg.pt>
References: <4EA2AF92.4090805@ualg.pt>
	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>
	<4EA462FA.3060608@ualg.pt> <4EA55199.9030609@nersc.no>
	<4EA5606B.8000608@ualg.pt>
Message-ID: <CAMWde5pj0O8ThLsnrRPybt=UyzsE1irFDvko-uyKCFmzvCPpCw@mail.gmail.com>

Hi Joaquim,

On 24 October 2011 13:56, Joaquim Luis <jluis@ualg.pt> wrote:

> Anton,
>
> I don't remember the details because I programmed that some time ago, but
> from what I recall that's the most accurate way of interpolating the data
> into a regular grid. The whole procedure is implemented in Mirone were the
> x,y,z triplets (computed after the cnt_pt_col|row)  are reinterpolated with
> minimum curvature or nearneighbor algorithms to calculate a regular grid.
>  Now, this used to work with temperature data but it didn't anymore with
> that chlorophyll file (Mirone stand-alone crashed) .  The implementation use
> a Matlab hdf reader MEX and that MEX of the time of ML6.5 crashes. New
> versions work okay but I cannot used them in the Mirone stand-alone so I
> though in using GDAL (as I do in many other instances), except that ... it
> doesn't work too.


I think that GDAL doesn't do the 1D datasets you find in some products
(MODIS MOD09XX springn to mind). Here's a message I sent to the list in
2008, and a reply from F Warmerdam on it. I ended up using pyhdf in the
end:
<
http://osgeo-org.1803224.n2.nabble.com/HDF-V-and-VR-components-td2032993.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/064842a3/attachment.html
From jluis at ualg.pt  Mon Oct 24 09:15:03 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Oct 24 12:06:54 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <CAMWde5pj0O8ThLsnrRPybt=UyzsE1irFDvko-uyKCFmzvCPpCw@mail.gmail.com>
References: <4EA2AF92.4090805@ualg.pt>	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>	<4EA462FA.3060608@ualg.pt>	<4EA55199.9030609@nersc.no>	<4EA5606B.8000608@ualg.pt>
	<CAMWde5pj0O8ThLsnrRPybt=UyzsE1irFDvko-uyKCFmzvCPpCw@mail.gmail.com>
Message-ID: <4EA564D7.2050004@ualg.pt>

On 24-10-2011 14:04, Jose Gomez-Dans wrote:
> Hi Joaquim,
>
> On 24 October 2011 13:56, Joaquim Luis <jluis@ualg.pt 
> <mailto:jluis@ualg.pt>> wrote:
>
>     Anton,
>
>     I don't remember the details because I programmed that some time
>     ago, but from what I recall that's the most accurate way of
>     interpolating the data into a regular grid. The whole procedure is
>     implemented in Mirone were the x,y,z triplets (computed after the
>     cnt_pt_col|row)  are reinterpolated with minimum curvature or
>     nearneighbor algorithms to calculate a regular grid.  Now, this
>     used to work with temperature data but it didn't anymore with that
>     chlorophyll file (Mirone stand-alone crashed) .  The
>     implementation use a Matlab hdf reader MEX and that MEX of the
>     time of ML6.5 crashes. New versions work okay but I cannot used
>     them in the Mirone stand-alone so I though in using GDAL (as I do
>     in many other instances), except that ... it doesn't work too.
>
>
> I think that GDAL doesn't do the 1D datasets you find in some products 
> (MODIS MOD09XX springn to mind). Here's a message I sent to the list 
> in 2008, and a reply from F Warmerdam on it. I ended up using pyhdf in 
> the end:
> <http://osgeo-org.1803224.n2.nabble.com/HDF-V-and-VR-components-td2032993.html>
>

Hi Jose,

That's indeed a pitty ... but perhaps there is s new hope in town -  the 
updated netcdf driver. Etienne?
BTW what do I need to change in nmake.opt to compile with the new 
abilities of the netCDF driver on Windows? I have netcd4 built with HDF 
support and tried by adding

-DNC_NETCDF4 -DNETCDF_HAS_NC4 -DNETCDF_HAS_HDF4

to the compile flags but still no luck in reading a HDF file with it's 
cousin driver.

Joaqium
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/49b66a60/attachment.html
From etourigny.dev at gmail.com  Mon Oct 24 10:21:58 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Oct 24 12:41:54 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <4EA564D7.2050004@ualg.pt>
References: <4EA2AF92.4090805@ualg.pt>
	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>
	<4EA462FA.3060608@ualg.pt> <4EA55199.9030609@nersc.no>
	<4EA5606B.8000608@ualg.pt>
	<CAMWde5pj0O8ThLsnrRPybt=UyzsE1irFDvko-uyKCFmzvCPpCw@mail.gmail.com>
	<4EA564D7.2050004@ualg.pt>
Message-ID: <CA+TxYvMfyQRFec5LR2EUxxiyNwfDBm=+BFAei99ttX55BT5FKg@mail.gmail.com>

Joaquim,

I tried reading your dataset with the updated netcdf driver in linux,
but it reads the same (22) subdatasets (see below).  But at least it
opens, with the following call:
gdalinfo NETCDF:S1998031140424.L2_MLAC_OC.x.hdf

In fact, your email prompted me to try it out and add support for HDF4
in the netcdf driver (since netcdf-4 can support it).
I think it doesn't read what you want because netcdf uses SDOpen and
does not support all of HDF4's capabilities (only SDS datasets).


I asked Even if he can update the windows makefiles, but if you can
help out (especially if you use netcdf-4) it would be nice!
Please post any patches to ticket http://trac.osgeo.org/gdal/ticket/4294

my opinion (and Even's) is that you should

1) add to nmake.opt the following in the netcdf section
# Uncomment the following to add NC4 and HDF4 support
#NETCDF_HAS_NC4 = yes
#NETCDF_HAS_HDF4 = yes

2) and frmts/netcdf/makefile.vc is where you need to add the -D statements

NETCDF_HAS_NC4
NETCDF_HAS_HDF4
HAVE_HDF4 (if HDF4_DIR is defined)
HAVE_HDF5 (if HDF5_DIR is defined)

a quick fix is to add the defines in netcdfdataset.h, see if that works
#define NETCDF_HAS_NC4
#define NETCDF_HAS_HDF4
#define HAVE_HDF4
#define HAVE_HDF5

definitely do not add NC_NETCDF4 as it is defined by netcdf-4 itself.

  SUBDATASET_1_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":longitude
  SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":latitude
  SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_412
  SUBDATASET_3_DESC=[391x78] Rrs_412 (8-bit integer)
  SUBDATASET_4_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_443
  SUBDATASET_4_DESC=[391x78] Rrs_443 (8-bit integer)
  SUBDATASET_5_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_490
  SUBDATASET_5_DESC=[391x78] Rrs_490 (8-bit integer)
  SUBDATASET_6_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_510
  SUBDATASET_6_DESC=[391x78] Rrs_510 (8-bit integer)
  SUBDATASET_7_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_555
  SUBDATASET_7_DESC=[391x78] Rrs_555 (8-bit integer)
  SUBDATASET_8_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_670
  SUBDATASET_8_DESC=[391x78] Rrs_670 (8-bit integer)
  SUBDATASET_9_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":chlor_a
  SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
  SUBDATASET_10_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Kd_490
  SUBDATASET_10_DESC=[391x78] Kd_490 (8-bit integer)
  SUBDATASET_11_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":pic
  SUBDATASET_11_DESC=[391x78] pic (8-bit integer)
  SUBDATASET_12_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":poc
  SUBDATASET_12_DESC=[391x78] poc (8-bit integer)
  SUBDATASET_13_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":cdom_index
  SUBDATASET_13_DESC=[391x78] cdom_index (8-bit integer)
  SUBDATASET_14_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":par
  SUBDATASET_14_DESC=[391x78] par (8-bit integer)
  SUBDATASET_15_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":l2_flags
  SUBDATASET_15_DESC=[391x78] l2_flags (16-bit integer)
  SUBDATASET_16_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":orb_vec
  SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
  SUBDATASET_17_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":sun_ref
  SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
  SUBDATASET_18_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":att_ang
  SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
  SUBDATASET_19_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":sen_mat
  SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
  SUBDATASET_20_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":scan_ell
  SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
  SUBDATASET_21_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":nflag
  SUBDATASET_21_DESC=[391x8] nflag (16-bit integer)
  SUBDATASET_22_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":tilt_ranges
  SUBDATASET_22_DESC=[20x2] tilt_ranges (8-bit integer)


thanks,
Etienne

On Mon, Oct 24, 2011 at 11:15 AM, Joaquim Luis <jluis@ualg.pt> wrote:
> On 24-10-2011 14:04, Jose Gomez-Dans wrote:
>
> Hi Joaquim,
>
> On 24 October 2011 13:56, Joaquim Luis <jluis@ualg.pt> wrote:
>>
>> Anton,
>>
>> I don't remember the details because I programmed that some time ago, but
>> from what I recall that's the most accurate way of interpolating the data
>> into a regular grid. The whole procedure is implemented in Mirone were the
>> x,y,z triplets (computed after the cnt_pt_col|row) ?are reinterpolated with
>> minimum curvature or nearneighbor algorithms to calculate a regular grid.
>> ?Now, this used to work with temperature data but it didn't anymore with
>> that chlorophyll file (Mirone stand-alone crashed) . ?The implementation use
>> a Matlab hdf reader MEX and that MEX of the time of ML6.5 crashes. New
>> versions work okay but I cannot used them in the Mirone stand-alone so I
>> though in using GDAL (as I do in many other instances), except that ... it
>> doesn't work too.
>
> I think that GDAL doesn't do the 1D datasets you find in some products
> (MODIS MOD09XX springn to mind). Here's a message I sent to the list in
> 2008, and a reply from F Warmerdam on it. I ended up using pyhdf in the
> end:
> <http://osgeo-org.1803224.n2.nabble.com/HDF-V-and-VR-components-td2032993.html>
>
> Hi Jose,
>
> That's indeed a pitty ... but perhaps there is s new hope in town -? the
> updated netcdf driver. Etienne?
> BTW what do I need to change in nmake.opt to compile with the new abilities
> of the netCDF driver on Windows? I have netcd4 built with HDF support and
> tried by adding
>
> -DNC_NETCDF4 -DNETCDF_HAS_NC4 -DNETCDF_HAS_HDF4
>
> to the compile flags but still no luck in reading a HDF file with it's
> cousin driver.
>
> Joaqium
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From candini at meeo.it  Mon Oct 24 11:25:23 2011
From: candini at meeo.it (canduc17)
Date: Mon Oct 24 13:48:53 2011
Subject: [gdal-dev] Re: Autoconf macro for gdal-config
In-Reply-To: <CABUeae8HhPZCQY=GS=i+6q4vrZXNujaNp7oYSc5SdhAV-YuqbA@mail.gmail.com>
References: <1319010296403-6907599.post@n2.nabble.com>
	<CABUeae9a2vkJDPf+eDZBBE0F2=GuHAo7LuqODuuCM-MGSmP7Dw@mail.gmail.com>
	<1319099855400-6912091.post@n2.nabble.com>
	<CABUeae9oAV3cy7ZZuwqu+=vaPaA5_F-FxRU3hc=zs=pTXvMBPA@mail.gmail.com>
	<1319114072701-6912716.post@n2.nabble.com>
	<CABUeae8HhPZCQY=GS=i+6q4vrZXNujaNp7oYSc5SdhAV-YuqbA@mail.gmail.com>
Message-ID: <1319469923852-6925402.post@n2.nabble.com>

http://www.gnu.org/s/autoconf-archive/ax_lib_gdal.html#ax_lib_gdal Here  you
can find th ax_lib_gdal macro to compile GDAL C and C++ programs using the
autotools. Enjoy!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Autoconf-macro-for-gdal-config-tp6907599p6925402.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jluis at ualg.pt  Mon Oct 24 12:02:20 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Oct 24 14:27:50 2011
Subject: [gdal-dev] subdatasets not read in a HDF file
In-Reply-To: <CA+TxYvMfyQRFec5LR2EUxxiyNwfDBm=+BFAei99ttX55BT5FKg@mail.gmail.com>
References: <4EA2AF92.4090805@ualg.pt>	<CA+TxYvMdaAmyt1DY=yN-FqpH+MATi4q9w68o-R4F=Lc2MoiT8A@mail.gmail.com>	<4EA462FA.3060608@ualg.pt>	<4EA55199.9030609@nersc.no>	<4EA5606B.8000608@ualg.pt>	<CAMWde5pj0O8ThLsnrRPybt=UyzsE1irFDvko-uyKCFmzvCPpCw@mail.gmail.com>	<4EA564D7.2050004@ualg.pt>
	<CA+TxYvMfyQRFec5LR2EUxxiyNwfDBm=+BFAei99ttX55BT5FKg@mail.gmail.com>
Message-ID: <4EA58C0C.7060201@ualg.pt>

On 24-10-2011 15:21, Etienne Tourigny wrote:
> Joaquim,
>
> I tried reading your dataset with the updated netcdf driver in linux,
> but it reads the same (22) subdatasets (see below).  But at least it
> opens, with the following call:
> gdalinfo NETCDF:S1998031140424.L2_MLAC_OC.x.hdf

Etienne, I rebuilt with your instructions ( 1) + the netcdfdataset.h 
quick fix) and still get the same error, but perhaps it's something 
related to the driverName:fileName mechanism as I get the same error 
message when using the HDF driver

gdalinfo HDF:S1998031140424.L2_MLAC_OC.x.hdf
ERROR 4: `HDF:S1998031140424.L2_MLAC_OC.x.hdf' does not exist in the 
file system,


> In fact, your email prompted me to try it out and add support for HDF4
> in the netcdf driver (since netcdf-4 can support it).
> I think it doesn't read what you want because netcdf uses SDOpen and
> does not support all of HDF4's capabilities (only SDS datasets).

I don't know if it's in some way related (I know little about hdf) but 
my Matlab code has

cntl_pt_cols = hdf_funs('hdfread', att.fname, 
att.hdrModisL2.Vgroup(Vg_index).SDS(3).Name, ...

the 'SDS' member name is provided by the Matlab MEX and I don't know if 
it is related but I notice the coincidence.

>
> I asked Even if he can update the windows makefiles, but if you can
> help out (especially if you use netcdf-4) it would be nice!
> Please post any patches to ticket http://trac.osgeo.org/gdal/ticket/4294
>
> my opinion (and Even's) is that you should
>
> 1) add to nmake.opt the following in the netcdf section
> # Uncomment the following to add NC4 and HDF4 support
> #NETCDF_HAS_NC4 = yes
> #NETCDF_HAS_HDF4 = yes
>
> 2) and frmts/netcdf/makefile.vc is where you need to add the -D statements
>
> NETCDF_HAS_NC4
> NETCDF_HAS_HDF4
> HAVE_HDF4 (if HDF4_DIR is defined)
> HAVE_HDF5 (if HDF5_DIR is defined)
>
> a quick fix is to add the defines in netcdfdataset.h, see if that works
> #define NETCDF_HAS_NC4
> #define NETCDF_HAS_HDF4
> #define HAVE_HDF4
> #define HAVE_HDF5
>
> definitely do not add NC_NETCDF4 as it is defined by netcdf-4 itself.
>
>    SUBDATASET_1_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":longitude
>    SUBDATASET_1_DESC=[391x78] longitude (32-bit floating-point)
>    SUBDATASET_2_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":latitude
>    SUBDATASET_2_DESC=[391x78] latitude (32-bit floating-point)
>    SUBDATASET_3_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_412
>    SUBDATASET_3_DESC=[391x78] Rrs_412 (8-bit integer)
>    SUBDATASET_4_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_443
>    SUBDATASET_4_DESC=[391x78] Rrs_443 (8-bit integer)
>    SUBDATASET_5_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_490
>    SUBDATASET_5_DESC=[391x78] Rrs_490 (8-bit integer)
>    SUBDATASET_6_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_510
>    SUBDATASET_6_DESC=[391x78] Rrs_510 (8-bit integer)
>    SUBDATASET_7_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_555
>    SUBDATASET_7_DESC=[391x78] Rrs_555 (8-bit integer)
>    SUBDATASET_8_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Rrs_670
>    SUBDATASET_8_DESC=[391x78] Rrs_670 (8-bit integer)
>    SUBDATASET_9_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":chlor_a
>    SUBDATASET_9_DESC=[391x78] chlor_a (32-bit floating-point)
>    SUBDATASET_10_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":Kd_490
>    SUBDATASET_10_DESC=[391x78] Kd_490 (8-bit integer)
>    SUBDATASET_11_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":pic
>    SUBDATASET_11_DESC=[391x78] pic (8-bit integer)
>    SUBDATASET_12_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":poc
>    SUBDATASET_12_DESC=[391x78] poc (8-bit integer)
>    SUBDATASET_13_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":cdom_index
>    SUBDATASET_13_DESC=[391x78] cdom_index (8-bit integer)
>    SUBDATASET_14_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":par
>    SUBDATASET_14_DESC=[391x78] par (8-bit integer)
>    SUBDATASET_15_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":l2_flags
>    SUBDATASET_15_DESC=[391x78] l2_flags (16-bit integer)
>    SUBDATASET_16_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":orb_vec
>    SUBDATASET_16_DESC=[391x3] orb_vec (32-bit floating-point)
>    SUBDATASET_17_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":sun_ref
>    SUBDATASET_17_DESC=[391x3] sun_ref (32-bit floating-point)
>    SUBDATASET_18_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":att_ang
>    SUBDATASET_18_DESC=[391x3] att_ang (32-bit floating-point)
>    SUBDATASET_19_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":sen_mat
>    SUBDATASET_19_DESC=[391x3x3] sen_mat (32-bit floating-point)
>    SUBDATASET_20_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":scan_ell
>    SUBDATASET_20_DESC=[391x6] scan_ell (32-bit floating-point)
>    SUBDATASET_21_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":nflag
>    SUBDATASET_21_DESC=[391x8] nflag (16-bit integer)
>    SUBDATASET_22_NAME=NETCDF:"S1998031140424.L2_MLAC_OC.x.hdf":tilt_ranges
>    SUBDATASET_22_DESC=[20x2] tilt_ranges (8-bit integer)
>
>
> thanks,
> Etienne
>
> On Mon, Oct 24, 2011 at 11:15 AM, Joaquim Luis<jluis@ualg.pt>  wrote:
>> On 24-10-2011 14:04, Jose Gomez-Dans wrote:
>>
>> Hi Joaquim,
>>
>> On 24 October 2011 13:56, Joaquim Luis<jluis@ualg.pt>  wrote:
>>> Anton,
>>>
>>> I don't remember the details because I programmed that some time ago, but
>>> from what I recall that's the most accurate way of interpolating the data
>>> into a regular grid. The whole procedure is implemented in Mirone were the
>>> x,y,z triplets (computed after the cnt_pt_col|row)  are reinterpolated with
>>> minimum curvature or nearneighbor algorithms to calculate a regular grid.
>>>   Now, this used to work with temperature data but it didn't anymore with
>>> that chlorophyll file (Mirone stand-alone crashed) .  The implementation use
>>> a Matlab hdf reader MEX and that MEX of the time of ML6.5 crashes. New
>>> versions work okay but I cannot used them in the Mirone stand-alone so I
>>> though in using GDAL (as I do in many other instances), except that ... it
>>> doesn't work too.
>> I think that GDAL doesn't do the 1D datasets you find in some products
>> (MODIS MOD09XX springn to mind). Here's a message I sent to the list in
>> 2008, and a reply from F Warmerdam on it. I ended up using pyhdf in the
>> end:
>> <http://osgeo-org.1803224.n2.nabble.com/HDF-V-and-VR-components-td2032993.html>
>>
>> Hi Jose,
>>
>> That's indeed a pitty ... but perhaps there is s new hope in town -  the
>> updated netcdf driver. Etienne?
>> BTW what do I need to change in nmake.opt to compile with the new abilities
>> of the netCDF driver on Windows? I have netcd4 built with HDF support and
>> tried by adding
>>
>> -DNC_NETCDF4 -DNETCDF_HAS_NC4 -DNETCDF_HAS_HDF4
>>
>> to the compile flags but still no luck in reading a HDF file with it's
>> cousin driver.
>>
>> Joaqium
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

From aashishcy at gmail.com  Mon Oct 24 13:13:42 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Mon Oct 24 15:42:51 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
Message-ID: <CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>

Hi Mateusz,

Thanks for putting this together. I will have a look today and probably add
things to it today/ tomorrow.

Best,


2011/10/22 Mateusz ?oskot <mateusz@loskot.net>

> Folks
>
> I have started brainstorming the CMake for GDAL idea on Wiki:
>
> http://trac.osgeo.org/gdal/wiki/CMake
>
> Feel free to add your ideas, wishes, proposals, questions, etc.
> Try to keep it clear and structured if possible.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/495c284c/attachment-0001.html
From eadam at co.lincoln.or.us  Mon Oct 24 14:32:16 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon Oct 24 17:05:31 2011
Subject: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
In-Reply-To: <4ea55bec.020f440a.3909.770dSMTPIN_ADDED@mx.google.com>
References: <4ea55bec.020f440a.3909.770dSMTPIN_ADDED@mx.google.com>
Message-ID: <CACqBkM9rcmNmPSxwvPmnCaCQji1E821zy1=ceTit1=zG5PbkqQ@mail.gmail.com>

Chris,

     There is also another route that may work for PGeo,
http://www.gdal.org/ogr/drv_mdb.html  I recently built that on Ubuntu but
have not used it yet.  It looks like you are close on the other route
though.

HTH, Eli

On Mon, Oct 24, 2011 at 5:35 AM, Chris Green <chris.green@ibstv.co.uk>wrote:

> Hi List****
>
> ** **
>
> I?m hoping someone can help me make ogr work under Linux with the PGeo
> driver, so I can read an ESRI Personal Database .mdb file into Mapserver. I
> can see from old posts that the basic problem is that MDBTools is a bit
> ?flaky? and needs a DSN based connection rather than connecting direct to
> the .mdb data.****
>
> ** **
>
> I have been trying to follow the instructions in
> http://www.gdal.org/ogr/drv_pgeo.html . Having installed unixODBC and
> MDBTools, I configured the odbcinst.ini and odbc.ini files as suggested and
> it seems that I have partial success because when I define my datasource in
> odbc.ini like so:****
>
> ** **
>
> [my_pgeo]****
>
> Description = Sample PGeo Database****
>
> Driver      = Microsoft Access Driver (*.mdb)****
>
> Database    = /var/www/vhosts/mydomain.com/httpdocs/data/test.mdb****
>
> ** **
>
> then the command ogrinfo  PGeo:my_pgeo results in the following:****
>
> ** **
>
> INFO: Open of ?PGeo:my_pgeo? using driver ?PGeo? successful. ****
>
> Error: syntax error at line:2 col:0****
>
> ** **
>
> I can?t figure out what or where this syntax error can be. I feel that I am
> quite close to success but don?t know how to move forward from here. Can
> anyone point me in the right direction please?****
>
> ** **
>
> ** **
>
> Chris ****
>
> ** **
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111024/b45490ab/attachment.html
From chris.green at ibstv.co.uk  Tue Oct 25 03:20:02 2011
From: chris.green at ibstv.co.uk (Chris Green)
Date: Tue Oct 25 06:35:51 2011
Subject: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
In-Reply-To: <CACqBkM9rcmNmPSxwvPmnCaCQji1E821zy1=ceTit1=zG5PbkqQ@mail.gmail.com>
References: <4ea55bec.020f440a.3909.770dSMTPIN_ADDED@mx.google.com>
	<CACqBkM9rcmNmPSxwvPmnCaCQji1E821zy1=ceTit1=zG5PbkqQ@mail.gmail.com>
Message-ID: <09a901cc92e6$84450170$8ccf0450$@green@ibstv.co.uk>

Hi Eli

 

Thanks for your suggestion. Despite pulling most of my hair out I still
can't get past the syntax error thrown by the PGeo driver, so I would
certainly be interested to follow the alternative approach. However  I see
in the drv_mdb documentation that GDAL/OGR >=1.9.0 is required, yet I can't
find anything for Ubuntu later than 1.8 (from UbuntuGIS unstable).  Do you
have 1.9 on your Ubuntu, if so could you tell me where I can find it?

 

 

Chris

 

 

From: Eli Adam [mailto:eadam@co.lincoln.or.us] 
Sent: 24 October 2011 19:32
To: Chris Green
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu

 

Chris,

     There is also another route that may work for PGeo,
http://www.gdal.org/ogr/drv_mdb.html  I recently built that on Ubuntu but
have not used it yet.  It looks like you are close on the other route
though.  

HTH, Eli

On Mon, Oct 24, 2011 at 5:35 AM, Chris Green <chris.green@ibstv.co.uk>
wrote:

Hi List

 

I'm hoping someone can help me make ogr work under Linux with the PGeo
driver, so I can read an ESRI Personal Database .mdb file into Mapserver. I
can see from old posts that the basic problem is that MDBTools is a bit
'flaky' and needs a DSN based connection rather than connecting direct to
the .mdb data.

 

I have been trying to follow the instructions in
http://www.gdal.org/ogr/drv_pgeo.html . Having installed unixODBC and
MDBTools, I configured the odbcinst.ini and odbc.ini files as suggested and
it seems that I have partial success because when I define my datasource in
odbc.ini like so:

 

[my_pgeo]

Description = Sample PGeo Database

Driver      = Microsoft Access Driver (*.mdb)

Database    = /var/www/vhosts/mydomain.com/httpdocs/data/test.mdb

 

then the command ogrinfo  PGeo:my_pgeo results in the following:

 

INFO: Open of 'PGeo:my_pgeo' using driver 'PGeo' successful. 

Error: syntax error at line:2 col:0

 

I can't figure out what or where this syntax error can be. I feel that I am
quite close to success but don't know how to move forward from here. Can
anyone point me in the right direction please?

 

 

Chris 

 

 

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev







-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111025/3a0508be/attachment.html
From tappenbeck at widemann.de  Tue Oct 25 06:03:25 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Tue Oct 25 09:34:32 2011
Subject: [gdal-dev] Problems with transform raster image
Message-ID: <4EA6896D.8090603@widemann.de>



   hi

i try to transform a rasterimage with following command:

gdalwarp -s_srs EPSG:25832 -t_srs EPSG:31466 [Path]\DOP_3905470.tif 
[Path]\DOP_3905470_trans.tif

the message is ...

C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:25832 -t_srs 
EPSG:31466
  [Path]\DOP_3905470.tif [Path]\DOP_3905470_trans.tif
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for [Path]\DOP_3905470.tif.
There is no affine transformation and no GCPs.

and the data of the source:....

Driver: GTiff/GeoTIFF
Files: [Path]\DOP_3905470.tif
Size is 10000, 10000
Coordinate System is `'
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,10000.0)
Upper Right (10000.0,    0.0)
Lower Right (10000.0,10000.0)
Center      ( 5000.0, 5000.0)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

can anybody help me ?

regards Jan .-)

-- 

Freundliche Gr??e
i.A. Jan Tappenbeck

Dipl. Vermessungsingenieur
CAD-Systemberater&  AutoCAD-Support

Widemann Systeme GmbH
CAD- und GIS-Systemhaus
Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf

Ackermannstra?e 21, 22087 Hamburg
Fon: 040 / 229477-22
Fax: 040 / 229477-29 	
tappenbeck@widemann.de    www.widemann.de

Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345

Zu jedem Produkt das passende Forum unter http://www.widemann.de/wisysforen/


Widemann Systeme - aktuell:

geosi.DE - Vermessungssoftware ...
... f?r Stra?enbau, Bauwesen, ....

- weitere Infos unter:
http://www.widemann.de/produkte/geoside/geosi.htm


Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte
sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren
dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen
ist nicht gestattet.

The information contained in this message is confidential or protected by
law. If you are not the intended recipient, please contact the sender and
delete this message. Any unauthorised copying of this message or unauthorised
distribution of the information contained herein is prohibited.


From chaitanya.ch at gmail.com  Tue Oct 25 08:40:51 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct 25 12:13:32 2011
Subject: [gdal-dev] Problems with transform raster image
In-Reply-To: <4EA6896D.8090603@widemann.de>
References: <4EA6896D.8090603@widemann.de>
Message-ID: <CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>

Jan,

You need to assign not only the projection of the source file but also the
geographical extents. The easiest way to do this is by adding GCPs to it
using the -gcp option of gdal_translate to create a new tif file. Use the
four corners of the image. Remember that the top left of the top left pixel
is (0,0) and bottom right of the bottom right pixel is (width,height).

On Tue, Oct 25, 2011 at 3:33 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  hi
>
> i try to transform a rasterimage with following command:
>
> gdalwarp -s_srs EPSG:25832 -t_srs EPSG:31466 [Path]\DOP_3905470.tif
> [Path]\DOP_3905470_trans.tif
>
> the message is ...
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:25832 -t_srs
> EPSG:31466
>  [Path]\DOP_3905470.tif [Path]\DOP_3905470_trans.tif
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for [Path]\DOP_3905470.tif.
> There is no affine transformation and no GCPs.
>
> and the data of the source:....
>
> Driver: GTiff/GeoTIFF
> Files: [Path]\DOP_3905470.tif
> Size is 10000, 10000
> Coordinate System is `'
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,10000.0)
> Upper Right (10000.0,    0.0)
> Lower Right (10000.0,10000.0)
> Center      ( 5000.0, 5000.0)
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
> can anybody help me ?
>
> regards Jan .-)
>
> --
>
> Freundliche Gr??e
> i.A. Jan Tappenbeck
>
> Dipl. Vermessungsingenieur
> CAD-Systemberater&  AutoCAD-Support
>
> Widemann Systeme GmbH
> CAD- und GIS-Systemhaus
> Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf
>
> Ackermannstra?e 21, 22087 Hamburg
> Fon: 040 / 229477-22
> Fax: 040 / 229477-29
> tappenbeck@widemann.de    www.widemann.de
>
> Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345
>
> Zu jedem Produkt das passende Forum unter http://www.widemann.de/**
> wisysforen/ <http://www.widemann.de/wisysforen/>
>
>
> Widemann Systeme - aktuell:
>
> geosi.DE - Vermessungssoftware ...
> ... f?r Stra?enbau, Bauwesen, ....
>
> - weitere Infos unter:
> http://www.widemann.de/**produkte/geoside/geosi.htm<http://www.widemann.de/produkte/geoside/geosi.htm>
>
>
> Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
> Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte
> sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren
> dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen
> ist nicht gestattet.
>
> The information contained in this message is confidential or protected by
> law. If you are not the intended recipient, please contact the sender and
> delete this message. Any unauthorised copying of this message or
> unauthorised
> distribution of the information contained herein is prohibited.
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111025/1b38df07/attachment.html
From chaitanya.ch at gmail.com  Tue Oct 25 08:55:27 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct 25 12:28:56 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAGR7mtD=XyGU9moVac=doqSKDfbFXVXgYLepZNvCXTcZ-mi22A@mail.gmail.com>
References: <CAGR7mtD=XyGU9moVac=doqSKDfbFXVXgYLepZNvCXTcZ-mi22A@mail.gmail.com>
Message-ID: <CAMKgpOZokZYxgfAYgGUk5Mi6NK_9LQ0JPVuSC-GJNjNKsbbfgA@mail.gmail.com>

Kat,

gdal2tiles.py script should help you.
http://www.gdal.org/gdal2tiles.html

On Mon, Oct 24, 2011 at 5:48 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Greetings
>
> Is there any tool in GDAL to generate KML-overlay maps from a Geotiff file
> (with a single raster map)?
> Thanks
> Kat
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111025/9bf9e148/attachment.html
From hobu.inc at gmail.com  Tue Oct 25 11:20:44 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Oct 25 15:02:11 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
Message-ID: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>

All,

I have prepared an RFC to support the implementation of providing user context data in CPLErrorHandling scenarios. I suspect this is a non-controversial proposal with limited applicability and impact for most folks, and I hope to pass the RFC and implement the proposed code in trunk in a week or so.

http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata

Howard
From warmerdam at pobox.com  Tue Oct 25 12:26:33 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 25 16:11:41 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
Message-ID: <4EA6E339.2010507@pobox.com>

On 11-10-25 08:20 AM, Howard Butler wrote:
> All,
>
> I have prepared an RFC to support the implementation of providing user context data in CPLErrorHandling scenarios. I suspect this is a non-controversial proposal with limited applicability and impact for most folks, and I hope to pass the RFC and implement the proposed code in trunk in a week or so.
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata


Howard,

I would like to suggest the the CPLGetLastErrorUserData() be renamed something
like CPLGetErrorHandlerUserData().  It is *not* returning the user data
associated with the last error - but instead the user data associated with
the currently in-force error handler.   I'd also suggest that the functions
documentation include a note mentioning it is primarily intended for use from
within error handlers.

You also did not address if/how this will be exposed in SWIG languages.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From eadam at co.lincoln.or.us  Tue Oct 25 12:38:54 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue Oct 25 16:24:38 2011
Subject: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
In-Reply-To: <4ea66363.4910440a.1c8d.ffffa335SMTPIN_ADDED@mx.google.com>
References: <4ea55bec.020f440a.3909.770dSMTPIN_ADDED@mx.google.com>
	<CACqBkM9rcmNmPSxwvPmnCaCQji1E821zy1=ceTit1=zG5PbkqQ@mail.gmail.com>
	<4ea66363.4910440a.1c8d.ffffa335SMTPIN_ADDED@mx.google.com>
Message-ID: <CACqBkM-r4T=zDaYcy2r9Xq_RTVqKTffAhujq+LWwqfg_uE=XQQ@mail.gmail.com>

Chris,

GDAL 1.9 is trunk so I built from source.  You need to first install
subversion, a compiler and other things to compile software.  Once you have
the proper environment, then for the basic GDAL build (which would not
include mdb of any sort) it is not too difficult and there are directions on
the wiki, http://trac.osgeo.org/gdal/wiki/BuildingOnUnix

Adding in more formats and drivers is more difficult.  Usually, there are
details on the format page, http://gdal.org/ogr/drv_mdb.html and/or the
build hints section of the wiki, http://trac.osgeo.org/gdal/wiki/BuildHints

For the way I did it for the Access mdb driver, I had to make a file
/etc/ld.so.sonf.d/libjvm.conf which just has the path pointing to libjvm.so
I did this based on the file not found errors I got after compiling and
running ogrinfo on the first attempt.  I don't fully understand what is the
proper way to address issues like this and there may be better ways.  I
first learned about it using the FileGDB driver.  Here is that thread,
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-FileGDB-OGR-driver-test-td6237191.html
Even's suggestion about adding to LD_LIBRARY_PATH and these two links are
mostly what helped me figure it out.

http://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-su
and
http://replay.waybackmachine.org/20090301081221/http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html

HTH, Eli


On Tue, Oct 25, 2011 at 12:20 AM, Chris Green <chris.green@ibstv.co.uk>wrote:

> Hi Eli****
>
> ** **
>
> Thanks for your suggestion. Despite pulling most of my hair out I still
> can?t get past the syntax error thrown by the PGeo driver, so I would
> certainly be interested to follow the alternative approach. However  I see
> in the drv_mdb documentation that GDAL/OGR >=1.9.0 is required, yet I can?t
> find anything for Ubuntu later than 1.8 (from UbuntuGIS unstable).  Do you
> have 1.9 on your Ubuntu, if so could you tell me where I can find it?****
>
> ** **
>
> ** **
>
> Chris****
>
>  ****
>
> ** **
>
> *From:* Eli Adam [mailto:eadam@co.lincoln.or.us]
> *Sent:* 24 October 2011 19:32
> *To:* Chris Green
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
> ****
>
> ** **
>
> Chris,
>
>      There is also another route that may work for PGeo,
> http://www.gdal.org/ogr/drv_mdb.html  I recently built that on Ubuntu but
> have not used it yet.  It looks like you are close on the other route
> though.
>
> HTH, Eli****
>
> On Mon, Oct 24, 2011 at 5:35 AM, Chris Green <chris.green@ibstv.co.uk>
> wrote:****
>
> Hi List****
>
>  ****
>
> I?m hoping someone can help me make ogr work under Linux with the PGeo
> driver, so I can read an ESRI Personal Database .mdb file into Mapserver. I
> can see from old posts that the basic problem is that MDBTools is a bit
> ?flaky? and needs a DSN based connection rather than connecting direct to
> the .mdb data.****
>
>  ****
>
> I have been trying to follow the instructions in
> http://www.gdal.org/ogr/drv_pgeo.html . Having installed unixODBC and
> MDBTools, I configured the odbcinst.ini and odbc.ini files as suggested and
> it seems that I have partial success because when I define my datasource in
> odbc.ini like so:****
>
>  ****
>
> [my_pgeo]****
>
> Description = Sample PGeo Database****
>
> Driver      = Microsoft Access Driver (*.mdb)****
>
> Database    = /var/www/vhosts/mydomain.com/httpdocs/data/test.mdb****
>
>  ****
>
> then the command ogrinfo  PGeo:my_pgeo results in the following:****
>
>  ****
>
> INFO: Open of ?PGeo:my_pgeo? using driver ?PGeo? successful. ****
>
> Error: syntax error at line:2 col:0****
>
>  ****
>
> I can?t figure out what or where this syntax error can be. I feel that I am
> quite close to success but don?t know how to move forward from here. Can
> anyone point me in the right direction please?****
>
>  ****
>
>  ****
>
> Chris ****
>
>  ****
>
>  ****
>
>  ****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
>
> ****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111025/0616d52f/attachment-0001.html
From hobu.inc at gmail.com  Tue Oct 25 14:07:34 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Oct 25 17:58:02 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <4EA6E339.2010507@pobox.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<4EA6E339.2010507@pobox.com>
Message-ID: <5F09AF38-4CA8-482D-B7E3-87EEB639DA7A@gmail.com>


On Oct 25, 2011, at 11:26 AM, Frank Warmerdam wrote:
>> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
> 
> Howard,
> 
> I would like to suggest the the CPLGetLastErrorUserData() be renamed something
> like CPLGetErrorHandlerUserData().  It is *not* returning the user data
> associated with the last error - but instead the user data associated with
> the currently in-force error handler.   I'd also suggest that the functions
> documentation include a note mentioning it is primarily intended for use from
> within error handlers.

Done.

> You also did not address if/how this will be exposed in SWIG languages.

This RFC is not going to address integration of this capability into the usage of error handlers in the SWIG languages, but bindings maintainers are encouraged to consider how this capability could improve error handling within those languages and implement code to take advantage of it accordingly.

Howard 
From ari.jolma at gmail.com  Tue Oct 25 14:32:50 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Oct 25 18:24:44 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <5F09AF38-4CA8-482D-B7E3-87EEB639DA7A@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<4EA6E339.2010507@pobox.com>
	<5F09AF38-4CA8-482D-B7E3-87EEB639DA7A@gmail.com>
Message-ID: <4EA700D2.5040901@gmail.com>

On 10/25/2011 09:07 PM, Howard Butler wrote:
>> You also did not address if/how this will be exposed in SWIG languages.
> This RFC is not going to address integration of this capability into the usage of error handlers in the SWIG languages, but bindings maintainers are encouraged to consider how this capability could improve error handling within those languages and implement code to take advantage of it accordingly.

That sounds very correct, but could you elaborate a bit how this 
capability could be exploited?

It is a problem when the user initiates a complex process in a GUI and 
somewhere along the way GDAL is called ending in an error. The error 
report is probably not very useful to the user. Could this facility be 
somehow used to add to the error message ending up in the message box 
the user sees?

Right now the Swig interface to the error handler facility is rather 
minimal.

Regards,

Ari

>
> Howard _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Tue Oct 25 15:09:12 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Oct 25 19:03:02 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
Message-ID: <CABUeae9d4iXXTpFCssUZHMQVzDONpF+_-n_-6j2R3-Gnfzi5DA@mail.gmail.com>

On 25 October 2011 16:20, Howard Butler <hobu.inc@gmail.com> wrote:
> All,
>
> I have prepared an RFC to support the implementation of providing user context data in CPLErrorHandling scenarios.
> I suspect this is a non-controversial proposal with limited applicability and impact for most folks, and
> I hope to pass the RFC and implement the proposed code in trunk in a week or so.
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata

Hobu, thanks for the solid effort about this.

It's also a useful example how to sneak new features to
fixed-in-concrete GDAL API.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From hobu.inc at gmail.com  Tue Oct 25 17:01:18 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Oct 25 21:01:05 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <4EA700D2.5040901@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<4EA6E339.2010507@pobox.com>
	<5F09AF38-4CA8-482D-B7E3-87EEB639DA7A@gmail.com>
	<4EA700D2.5040901@gmail.com>
Message-ID: <3C022673-5CA0-4C94-ABBD-FAF731FBFC0C@gmail.com>


On Oct 25, 2011, at 1:32 PM, Ari Jolma wrote:

> On 10/25/2011 09:07 PM, Howard Butler wrote:
>>> You also did not address if/how this will be exposed in SWIG languages.
>> This RFC is not going to address integration of this capability into the usage of error handlers in the SWIG languages, but bindings maintainers are encouraged to consider how this capability could improve error handling within those languages and implement code to take advantage of it accordingly.
> 
> That sounds very correct, but could you elaborate a bit how this capability could be exploited?
> 
> It is a problem when the user initiates a complex process in a GUI and somewhere along the way GDAL is called ending in an error. The error report is probably not very useful to the user. Could this facility be somehow used to add to the error message ending up in the message box the user sees?

SWIG bindings code could start pushing its own error handling operations along with a void* user data to CPLPushErrorHandlerEx to capture the context of the object(s) that the error handling function corresponds to. Instead of the simple CPLSetErrorHandler-based global handlers we have now, native languages could construct their own handlers and pass the "self" of the object for which that handler corresponds into CPLPushErrorHandlerEx and then utilize that "self" object when an error or debug message occurs. 

Mateusz' example demonstrates some of the concepts, albeit in a very c++'y way. http://trac.osgeo.org/gdal/attachment/ticket/4295/trampoline_set_handler.cpp I'll try to cook something up that demonstrates how it could be taken advantage of from the SWIG Python bindings and utilized as an example for the other languages soon. 

> Right now the Swig interface to the error handler facility is rather minimal.

Indeed. This is mostly a result of coming from the original GDAL Python bindings into a full-force SWIG-based approach. Kevin started out with something simple, and it has stuck around.

Howard

From danhomerick at gmail.com  Tue Oct 25 19:50:48 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Tue Oct 25 23:59:42 2011
Subject: [gdal-dev] Distinguish between empty result and error with
	OGRDataSource::ExecuteSQL
Message-ID: <CAGVu-jETz0VT_BO1OwnLjU77uKF4vgXB5Bhs7S8S7yU9xM=ddw@mail.gmail.com>

GDAL-Dev,

The ExecuteSQL method returns NULL when an error occurs, or if the
statement result is just empty. I don't see any methods to get
information on the last error, which leaves me wondering if there's a
good way to distinguish the different causes for a NULL result.

I've been prototyping using MS SQL Server, and it looks like the
OGRODBCDataSource has a public getSession method (returning a
CPLODBCSession), that I could use to get error information -- although
this method is commented as being for internal use. Is there a better
route, ideally one that is sure to be supported for all the various
SQL drivers?

Thanks for any guidance,
 - Dan
From dmorissette at mapgears.com  Tue Oct 25 20:50:48 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Oct 26 01:03:09 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
Message-ID: <4EA75968.5030809@mapgears.com>

On 11-10-25 11:20 AM, Howard Butler wrote:
> All,
>
> I have prepared an RFC to support the implementation of providing user context data in CPLErrorHandling scenarios. I suspect this is a non-controversial proposal with limited applicability and impact for most folks, and I hope to pass the RFC and implement the proposed code in trunk in a week or so.
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
>

Please forgive the naive question, but to make things really simple from 
the API standpoint, instead of accessing the pUserData via 
CPLGetErrorHandlerUserData(), could we not instead define a new type of 
error handler that receives the user data as argument?

typedef void (CPL_STDCALL *CPLErrorHandlerEx)(CPLErr, int, const char*, 
void *);

I guess that would imply changing the CPLErrorHandlerNode to support two 
types of handlers. Maybe that's why you didn't choose to take that approach?

Okay, I guess I answered my own question... if yes then sorry for the 
noise...

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From hobu.inc at gmail.com  Tue Oct 25 20:59:08 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Oct 26 01:12:00 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <4EA75968.5030809@mapgears.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<4EA75968.5030809@mapgears.com>
Message-ID: <1AD9717E-84C5-4B44-B5A8-D085498648C8@gmail.com>


On Oct 25, 2011, at 7:50 PM, Daniel Morissette wrote:

> On 11-10-25 11:20 AM, Howard Butler wrote:
>> All,
>> 
>> I have prepared an RFC to support the implementation of providing user context data in CPLErrorHandling scenarios. I suspect this is a non-controversial proposal with limited applicability and impact for most folks, and I hope to pass the RFC and implement the proposed code in trunk in a week or so.
>> 
>> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
>> 
> 
> Please forgive the naive question, but to make things really simple from the API standpoint, instead of accessing the pUserData via CPLGetErrorHandlerUserData(), could we not instead define a new type of error handler that receives the user data as argument?

Yes, but the RFC also says "an approach that mimics and looks similar to the existing operations is likely the best approach for GDAL -- if not the cleanest approach in general." for this reason. I was trying hard to not upset our existing pile of apples.

> 
> typedef void (CPL_STDCALL *CPLErrorHandlerEx)(CPLErr, int, const char*, void *);
> 
> I guess that would imply changing the CPLErrorHandlerNode to support two types of handlers. Maybe that's why you didn't choose to take that approach?

Adam Nowaki explored this option, and I put together a patch that implemented it on the ticket. As Even pointed out [1], this approach causes some complications with how CPLSetErrorHandlerEx vs CPLSetErrorHandler works and what it should return.  In the end, it seemed to me as though this might be more trouble than it was worth. 

[1] http://trac.osgeo.org/gdal/ticket/4295#comment:6
From dmorissette at mapgears.com  Tue Oct 25 21:02:41 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Oct 26 01:15:38 2011
Subject: [gdal-dev] RFC 37: User context data in CPLErrorHandler callbacks
In-Reply-To: <1AD9717E-84C5-4B44-B5A8-D085498648C8@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<4EA75968.5030809@mapgears.com>
	<1AD9717E-84C5-4B44-B5A8-D085498648C8@gmail.com>
Message-ID: <4EA75C31.6050908@mapgears.com>

On 11-10-25 08:59 PM, Howard Butler wrote:
>
> Adam Nowaki explored this option, and I put together a patch that implemented it on the ticket. As Even pointed out [1], this approach causes some complications with how CPLSetErrorHandlerEx vs CPLSetErrorHandler works and what it should return.  In the end, it seemed to me as though this might be more trouble than it was worth.
>
> [1] http://trac.osgeo.org/gdal/ticket/4295#comment:6

Sounds good. If you've explored the option and found that the current 
approach was better then that solves the question for me.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Tue Oct 25 22:54:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 26 03:13:04 2011
Subject: [gdal-dev] Distinguish between empty result and error with
	OGRDataSource::ExecuteSQL
In-Reply-To: <CAGVu-jETz0VT_BO1OwnLjU77uKF4vgXB5Bhs7S8S7yU9xM=ddw@mail.gmail.com>
References: <CAGVu-jETz0VT_BO1OwnLjU77uKF4vgXB5Bhs7S8S7yU9xM=ddw@mail.gmail.com>
Message-ID: <4EA77649.8010407@pobox.com>

On 11-10-25 04:50 PM, Dan Homerick wrote:
> GDAL-Dev,
>
> The ExecuteSQL method returns NULL when an error occurs, or if the
> statement result is just empty. I don't see any methods to get
> information on the last error, which leaves me wondering if there's a
> good way to distinguish the different causes for a NULL result.
>
> I've been prototyping using MS SQL Server, and it looks like the
> OGRODBCDataSource has a public getSession method (returning a
> CPLODBCSession), that I could use to get error information -- although
> this method is commented as being for internal use. Is there a better
> route, ideally one that is sure to be supported for all the various
> SQL drivers?

Dan,

The normal approach to distinguishing would be to call CPLErrorReset()
before calling ExecuteSQL().  Then if you get a NULL back interogate
CPLGetLastErrorType().  If it is ERRTYP_FAILURE then an error occurred.

Note that the "ogr sql" implementation appears to return a layer even if
the results is empty it just has no features.  Ideally other implementations
of ExecuteSQL() would do the same.  Feel free to file a ticket if this is not
the case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From joolek.o at gmail.com  Wed Oct 26 04:57:30 2011
From: joolek.o at gmail.com (joolek)
Date: Wed Oct 26 09:36:57 2011
Subject: [gdal-dev] 254 into 255
Message-ID: <1319619450332-6931988.post@n2.nabble.com>

Hi, me again.
I've managed to scale all three bands from 0-255 into 1-254 but do you guys
know how to convert particular band into other for example 3x 254 into
3x255?

Thank you
J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6931988.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From antonio.rocha at deimos.com.pt  Wed Oct 26 04:53:26 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Wed Oct 26 09:39:36 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
Message-ID: <4EA7CA86.8020906@deimos.com.pt>

Greetings
I have to shage a column name in a Shapefile. I'm not much familiar with 
OGR. How can I do that in OGR?
THanks
Best regards,
Antonio



__________ Information from ESET NOD32 Antivirus, version of virus signature database 6574 (20111025) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Wed Oct 26 05:04:30 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 26 09:44:18 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <4EA7CA86.8020906@deimos.com.pt>
References: <4EA7CA86.8020906@deimos.com.pt>
Message-ID: <CAMKgpOYkABtn-2V0dkiexV9r3-z2zMHVwSfNc9oBANX+RKWHRQ@mail.gmail.com>

Ant?nio,

The easiest way is to use the -sql option in ogr2ogr [1] and set a new name
with the AS clause in the SQL statement [2].

[1]: http://www.gdal.org/ogr2ogr.html
[2]: http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc

2011/10/26 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
> I have to shage a column name in a Shapefile. I'm not much familiar with
> OGR. How can I do that in OGR?
> THanks
> Best regards,
> Antonio
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6574 (20111025) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/270eaec7/attachment.html
From chaitanya.ch at gmail.com  Wed Oct 26 05:15:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 26 09:55:46 2011
Subject: [gdal-dev] 254 into 255
In-Reply-To: <1319619450332-6931988.post@n2.nabble.com>
References: <1319619450332-6931988.post@n2.nabble.com>
Message-ID: <CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>

J,

Can you elaborate your query? What is your input and what do you want the
output to be?

On Wed, Oct 26, 2011 at 2:27 PM, joolek <joolek.o@gmail.com> wrote:

> Hi, me again.
> I've managed to scale all three bands from 0-255 into 1-254 but do you guys
> know how to convert particular band into other for example 3x 254 into
> 3x255?
>
> Thank you
> J
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6931988.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/bd827e68/attachment.html
From chaitanya.ch at gmail.com  Wed Oct 26 07:46:57 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 26 12:35:13 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <4EA7F08E.4090707@deimos.com.pt>
References: <4EA7CA86.8020906@deimos.com.pt>
	<CAMKgpOYkABtn-2V0dkiexV9r3-z2zMHVwSfNc9oBANX+RKWHRQ@mail.gmail.com>
	<4EA7F08E.4090707@deimos.com.pt>
Message-ID: <CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>

Ant?nio,

OGR comes as a part of GDAL. OGR utilities can be used like GDAL utilities.

First, run ogrinfo on the shapefile with the options "-al" and "-so" to
determine the field names in it.

Next, use the ogr2ogr utility like this:
ogr2ogr -sql "SELECT [field1a AS field1b, field2a AS field2b, field 3a AS
field3b] FROM shapefileA" shapefileB.shp shapefileA.shp

This command changes the fields field1a, field2a and field3a in the original
shapefile, shapefileA.shp, to field1b, field2b and field3b respectively in
the new shapefile, shapefile.shp.

2011/10/26 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Hi
> THanks for the feedback. I'm a bit lost on this. Is there any examples and
> tutorials on using sql commands for OGR? I'm sorry but I'm not use to use
> Vectorial data and neither OGR (only GDAL)
> Thanks
> Antonio
> Chaitanya kumar CH wrote:
>
>> Ant?nio,
>>
>> The easiest way is to use the -sql option in ogr2ogr [1] and set a new
>> name with the AS clause in the SQL statement [2].
>>
>> [1]: http://www.gdal.org/ogr2ogr.**html<http://www.gdal.org/ogr2ogr.html>
>> [2]: http://trac.osgeo.org/gdal/**wiki/rfc28_sqlfunc<http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc>
>>
>> 2011/10/26 Ant?nio Rocha <antonio.rocha@deimos.com.pt <mailto:
>> antonio.rocha@deimos.**com.pt <antonio.rocha@deimos.com.pt>>>
>>
>>
>>    Greetings
>>    I have to shage a column name in a Shapefile. I'm not much
>>    familiar with OGR. How can I do that in OGR?
>>    THanks
>>    Best regards,
>>    Antonio
>>
>>
>>
>>    __________ Information from ESET NOD32 Antivirus, version of virus
>>    signature database 6574 (20111025) __________
>>
>>    The message was checked by ESET NOD32 Antivirus.
>>
>>    http://www.eset.com
>>
>>
>>    ______________________________**_________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>> >
>>
>>    http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6575 (20111026) __________
>
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/f0fb9fcf/attachment.html
From chris.green at ibstv.co.uk  Wed Oct 26 09:26:30 2011
From: chris.green at ibstv.co.uk (Chris Green)
Date: Wed Oct 26 14:20:12 2011
Subject: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu
In-Reply-To: <CACqBkM-r4T=zDaYcy2r9Xq_RTVqKTffAhujq+LWwqfg_uE=XQQ@mail.gmail.com>
References: <4ea55bec.020f440a.3909.770dSMTPIN_ADDED@mx.google.com>	<CACqBkM9rcmNmPSxwvPmnCaCQji1E821zy1=ceTit1=zG5PbkqQ@mail.gmail.com>	<4ea66363.4910440a.1c8d.ffffa335SMTPIN_ADDED@mx.google.com>
	<CACqBkM-r4T=zDaYcy2r9Xq_RTVqKTffAhujq+LWwqfg_uE=XQQ@mail.gmail.com>
Message-ID: <006e01cc93e2$e0d1ce80$a2756b80$@green@ibstv.co.uk>

Hi Eli

 

Thanks very much for the details. It all seems rather daunting, I think I
will punish myself with one more day of trying to get PGeo to work before
tackling MDB     

 

 

 

 

Chris

 

From: Eli Adam [mailto:eadam@co.lincoln.or.us] 
Sent: 25 October 2011 17:39
To: Chris Green
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu

 

Chris, 

GDAL 1.9 is trunk so I built from source.  You need to first install
subversion, a compiler and other things to compile software.  Once you have
the proper environment, then for the basic GDAL build (which would not
include mdb of any sort) it is not too difficult and there are directions on
the wiki, http://trac.osgeo.org/gdal/wiki/BuildingOnUnix

Adding in more formats and drivers is more difficult.  Usually, there are
details on the format page, http://gdal.org/ogr/drv_mdb.html and/or the
build hints section of the wiki, http://trac.osgeo.org/gdal/wiki/BuildHints

For the way I did it for the Access mdb driver, I had to make a file
/etc/ld.so.sonf.d/libjvm.conf which just has the path pointing to libjvm.so
I did this based on the file not found errors I got after compiling and
running ogrinfo on the first attempt.  I don't fully understand what is the
proper way to address issues like this and there may be better ways.  I
first learned about it using the FileGDB driver.  Here is that thread,
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-FileGDB-OGR-driver-test-td62
37191.html  Even's suggestion about adding to LD_LIBRARY_PATH and these two
links are mostly what helped me figure it out.  

http://stackoverflow.com/questions/480764/linux-error-while-loading-shared-l
ibraries-cannot-open-shared-object-file-no-su
and 
http://replay.waybackmachine.org/20090301081221/http://www.linux.org/docs/ld
p/howto/Program-Library-HOWTO/shared-libraries.html
<http://replay.waybackmachine.org/20090301081221/http:/www.linux.org/docs/ld
p/howto/Program-Library-HOWTO/shared-libraries.html> 

HTH, Eli



On Tue, Oct 25, 2011 at 12:20 AM, Chris Green <chris.green@ibstv.co.uk>
wrote:

Hi Eli

 

Thanks for your suggestion. Despite pulling most of my hair out I still
can't get past the syntax error thrown by the PGeo driver, so I would
certainly be interested to follow the alternative approach. However  I see
in the drv_mdb documentation that GDAL/OGR >=1.9.0 is required, yet I can't
find anything for Ubuntu later than 1.8 (from UbuntuGIS unstable).  Do you
have 1.9 on your Ubuntu, if so could you tell me where I can find it?

 

 

Chris

 

 

From: Eli Adam [mailto:eadam@co.lincoln.or.us] 
Sent: 24 October 2011 19:32
To: Chris Green
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogrinfo and PGeo Driver for .mdb file, on Ubuntu

 

Chris,

     There is also another route that may work for PGeo,
http://www.gdal.org/ogr/drv_mdb.html  I recently built that on Ubuntu but
have not used it yet.  It looks like you are close on the other route
though.  

HTH, Eli

On Mon, Oct 24, 2011 at 5:35 AM, Chris Green <chris.green@ibstv.co.uk>
wrote:

Hi List

 

I'm hoping someone can help me make ogr work under Linux with the PGeo
driver, so I can read an ESRI Personal Database .mdb file into Mapserver. I
can see from old posts that the basic problem is that MDBTools is a bit
'flaky' and needs a DSN based connection rather than connecting direct to
the .mdb data.

 

I have been trying to follow the instructions in
http://www.gdal.org/ogr/drv_pgeo.html . Having installed unixODBC and
MDBTools, I configured the odbcinst.ini and odbc.ini files as suggested and
it seems that I have partial success because when I define my datasource in
odbc.ini like so:

 

[my_pgeo]

Description = Sample PGeo Database

Driver      = Microsoft Access Driver (*.mdb)

Database    = /var/www/vhosts/mydomain.com/httpdocs/data/test.mdb

 

then the command ogrinfo  PGeo:my_pgeo results in the following:

 

INFO: Open of 'PGeo:my_pgeo' using driver 'PGeo' successful. 

Error: syntax error at line:2 col:0

 

I can't figure out what or where this syntax error can be. I feel that I am
quite close to success but don't know how to move forward from here. Can
anyone point me in the right direction please?

 

 

Chris 

 

 

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/aa2860fb/attachment.html
From lists at hilboll.de  Wed Oct 26 09:22:09 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Oct 26 14:26:00 2011
Subject: [gdal-dev] HDF-Problems when compiling
In-Reply-To: <CA+TxYvNXmy2Rc1z1e2xMhOAZMyz4FRA+Y_OKQ40kesHEn0fOOA@mail.gmail.com>
References: <83fb5f97d5a667d1e49cb1159d33cb91.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CA+TxYvNXmy2Rc1z1e2xMhOAZMyz4FRA+Y_OKQ40kesHEn0fOOA@mail.gmail.com>
Message-ID: <4EA80981.9060601@hilboll.de>

> I can see that it is trying to link to /usr/local/lib/libmfhdf.a
> instead of your specified /hb/USER/lib/epd-7.1-1-x86_64, and something
> similar for hdf5
> 
> Sometimes it's easier to use the default system libraries, or remove
> them if you are using more recent ones  avoid conflicts like these.
> 
> Have a look at config.log to see what is happening.
> You might also have something bad in you LD_LIBRARY_PATH configuration,
> try:
> export LD_LIBRARY_PATH="/hb/USER/lib/epd-7.1-1-x86_64"

Etienne,

thanks for your helping message! I solved the problem by appending
"--without-libtool" to my ./configure call. Everything worked like a
charm, even though I don't understand why?!

Cheers,
Andreas.
From joolek.o at gmail.com  Wed Oct 26 12:03:47 2011
From: joolek.o at gmail.com (joolek)
Date: Wed Oct 26 17:06:00 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
Message-ID: <1319645027220-6933182.post@n2.nabble.com>

Hi I basically want to convert all the 254 254 254 into 255 255 255... is
this possible?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Wed Oct 26 12:04:16 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 26 17:06:46 2011
Subject: [gdal-dev] Another PGeo driver issue, on 64-bit Debian Linux
Message-ID: <j89b1q$e6$1@dough.gmane.org>

Hi,

I have been trying to get the PGeo driver working, following the hints 
at [0].

I have gotten to a partial success in so far that the driver connects to 
the mdb and finds the layers and the features [1]. However, the geometry 
is not understood, which seems to be related to the "importFromWKT() 
failed" error message, which is repeated for each layer [2].

Querying individual layers gives an additional "GetFeatureCount() 
failed" error, see under [3].

I searched on Internet and found a few (older) postings mentioning 
similar errors where the WKT string is always truncated to 12 
characters, but nothing could really help me fixing the issue.

Does anyone know how to fix the issue? (I am using GDAL from trunk, on 
64-bit Debian Linux, unixodbc 2.2.14p2-4, mdbtools 0.5.99.0.6pre1.)

Thanks in advance, Hermann

[0] http://gdal.org/ogr/drv_pgeo.html

[1]

$ ogrinfo --debug on pgeo:mt
PGeo: MDB Tools driver: /usr/lib/libmdbodbc.so.0
PGeo: MDB Tools driver installed successfully!
PGeo: EstablishSession(mt)
ODBC: SQLConnect(mt)
INFO: Open of `pgeo:mt'
       using driver `PGeo' successful.
OGR: GetLayerCount() = 26

1: CoastL
2: DamL
3: WatrcrsL
...

[2] ERROR 1: importFromWKT() failed on SRS 'GEOGCS["GCS_'.

[3]

$ ogrinfo --debug on PGeo:mt CoastL
PGeo: MDB Tools driver: /usr/lib/libmdbodbc.so.0
PGeo: MDB Tools driver installed successfully!
PGeo: EstablishSession(mt)
ODBC: SQLConnect(mt)
OGR: OGROpen(PGeo:mt/0x8804b0) succeeded as PGeo.

INFO: Open of `PGeo:mt'
       using driver `PGeo' successful.
OGR: GetLayerCount() = 26

Layer name: CoastL
Geometry: Unknown (any)
Error at Line : syntax error near (
ERROR 1: GetFeatureCount() failed on query SELECT COUNT(*) FROM CoastL.

Feature Count: 11
Extent: (14.183600, 35.806450) - (14.576150, 36.082430)
Layer SRS WKT:
(unknown)
FID Column = OBJECTID
Geometry Column = Shape
OBJECTID: Integer (0.0)
FCsubtype: Integer (0.0)
gfid: String (0.0)
F_CODE: String (0.0)
ICC: String (0.0)
SN: Integer (0.0)
Shape_Length: Real (0.0)
PGeo: 11 features read on layer 'CoastL'.
ODBC: SQLDisconnect()

From chaitanya.ch at gmail.com  Wed Oct 26 12:10:43 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 26 17:13:22 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <1319645027220-6933182.post@n2.nabble.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
Message-ID: <CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>

Do you want to convert just the pixels with the values (254,254,254)?

On Wed, Oct 26, 2011 at 9:33 PM, joolek <joolek.o@gmail.com> wrote:

> Hi I basically want to convert all the 254 254 254 into 255 255 255... is
> this possible?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/2e474365/attachment.html
From even.rouault at mines-paris.org  Wed Oct 26 12:11:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 26 17:14:09 2011
Subject: [gdal-dev] Another PGeo driver issue, on 64-bit Debian Linux
In-Reply-To: <j89b1q$e6$1@dough.gmane.org>
References: <j89b1q$e6$1@dough.gmane.org>
Message-ID: <1319645484.4ea8312c2fb67@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

> Hi,
>
> I have been trying to get the PGeo driver working, following the hints
> at [0].
>
> I have gotten to a partial success in so far that the driver connects to
> the mdb and finds the layers and the features [1]. However, the geometry
> is not understood, which seems to be related to the "importFromWKT()
> failed" error message, which is repeated for each layer [2].
>
> Querying individual layers gives an additional "GetFeatureCount()
> failed" error, see under [3].
>
> I searched on Internet and found a few (older) postings mentioning
> similar errors where the WKT string is always truncated to 12
> characters, but nothing could really help me fixing the issue.
>
> Does anyone know how to fix the issue? (I am using GDAL from trunk, on
> 64-bit Debian Linux, unixodbc 2.2.14p2-4, mdbtools 0.5.99.0.6pre1.)

IMHO, you can't. I've spent some time investigating this issues a few months ago
and my conclusion was that mdbtools was too buggy (and unmaintained), and in
particular not 64bit ready. I tried a few fixes, but finally I gave up. I've
developped the MDB driver that relies on the Jackess Java library to workaround
mdbtools problems and it works quite well (although not particularly fast due to
the invokation of Java code from native code).

>
> Thanks in advance, Hermann
>
> [0] http://gdal.org/ogr/drv_pgeo.html
>
> [1]
>
> $ ogrinfo --debug on pgeo:mt
> PGeo: MDB Tools driver: /usr/lib/libmdbodbc.so.0
> PGeo: MDB Tools driver installed successfully!
> PGeo: EstablishSession(mt)
> ODBC: SQLConnect(mt)
> INFO: Open of `pgeo:mt'
>        using driver `PGeo' successful.
> OGR: GetLayerCount() = 26
>
> 1: CoastL
> 2: DamL
> 3: WatrcrsL
> ...
>
> [2] ERROR 1: importFromWKT() failed on SRS 'GEOGCS["GCS_'.
>
> [3]
>
> $ ogrinfo --debug on PGeo:mt CoastL
> PGeo: MDB Tools driver: /usr/lib/libmdbodbc.so.0
> PGeo: MDB Tools driver installed successfully!
> PGeo: EstablishSession(mt)
> ODBC: SQLConnect(mt)
> OGR: OGROpen(PGeo:mt/0x8804b0) succeeded as PGeo.
>
> INFO: Open of `PGeo:mt'
>        using driver `PGeo' successful.
> OGR: GetLayerCount() = 26
>
> Layer name: CoastL
> Geometry: Unknown (any)
> Error at Line : syntax error near (
> ERROR 1: GetFeatureCount() failed on query SELECT COUNT(*) FROM CoastL.
>
> Feature Count: 11
> Extent: (14.183600, 35.806450) - (14.576150, 36.082430)
> Layer SRS WKT:
> (unknown)
> FID Column = OBJECTID
> Geometry Column = Shape
> OBJECTID: Integer (0.0)
> FCsubtype: Integer (0.0)
> gfid: String (0.0)
> F_CODE: String (0.0)
> ICC: String (0.0)
> SN: Integer (0.0)
> Shape_Length: Real (0.0)
> PGeo: 11 features read on layer 'CoastL'.
> ODBC: SQLDisconnect()
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From peifer at gmx.eu  Wed Oct 26 12:21:56 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 26 17:25:04 2011
Subject: [gdal-dev] Another PGeo driver issue, on 64-bit Debian Linux
In-Reply-To: <1319645484.4ea8312c2fb67@webmail.free.fr>
References: <j89b1q$e6$1@dough.gmane.org>
	<1319645484.4ea8312c2fb67@webmail.free.fr>
Message-ID: <4EA833A4.5080701@gmx.eu>

On 26/10/2011 18:11, Even Rouault wrote:
>
> IMHO, you can't. I've spent some time investigating this issues a few months ago
> and my conclusion was that mdbtools was too buggy (and unmaintained), and in
> particular not 64bit ready. I tried a few fixes, but finally I gave up. I've
> developped the MDB driver that relies on the Jackess Java library to workaround
> mdbtools problems and it works quite well (although not particularly fast due to
> the invokation of Java code from native code).
>

Thanks for the quick response. If you didn't get it to work, then I 
should better not have tried in the first place. Perhaps some warnings 
for Linux users should be added to http://gdal.org/ogr/drv_pgeo.html (?)

I'll have a look at the MBD driver.

Thanks again, Hermann
From mateusz at loskot.net  Wed Oct 26 12:32:10 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Oct 26 17:35:52 2011
Subject: [gdal-dev] Another PGeo driver issue, on 64-bit Debian Linux
In-Reply-To: <4EA833A4.5080701@gmx.eu>
References: <j89b1q$e6$1@dough.gmane.org>
	<1319645484.4ea8312c2fb67@webmail.free.fr>
	<4EA833A4.5080701@gmx.eu>
Message-ID: <CABUeae_YURR4RXHTzgAhua9Qb=NNDJFCtQB-da9R-RJ6S47ztg@mail.gmail.com>

On 26 October 2011 17:21, Hermann Peifer <peifer@gmx.eu> wrote:
> On 26/10/2011 18:11, Even Rouault wrote:
>>
>> IMHO, you can't. I've spent some time investigating this issues a few
>> months ago
>> and my conclusion was that mdbtools was too buggy (and unmaintained), and
>> in
>> particular not 64bit ready. I tried a few fixes, but finally I gave up.
>> I've
>> developped the MDB driver that relies on the Jackess Java library to
>> workaround
>> mdbtools problems and it works quite well (although not particularly fast
>> due to
>> the invokation of Java code from native code).
>>
>
> Thanks for the quick response. If you didn't get it to work, then I should
> better not have tried in the first place. Perhaps some warnings for Linux
> users should be added to http://gdal.org/ogr/drv_pgeo.html (?)

It is there: "See also GDAL wiki for other details" leading to:

http://trac.osgeo.org/gdal/wiki/mdbtools
http://trac.osgeo.org/gdal/wiki/PGeo

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From danhomerick at gmail.com  Wed Oct 26 12:39:26 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Oct 26 17:43:36 2011
Subject: [gdal-dev] Distinguish between empty result and error with
	OGRDataSource::ExecuteSQL
In-Reply-To: <4EA77649.8010407@pobox.com>
References: <CAGVu-jETz0VT_BO1OwnLjU77uKF4vgXB5Bhs7S8S7yU9xM=ddw@mail.gmail.com>
	<4EA77649.8010407@pobox.com>
Message-ID: <CAGVu-jH+gBG38U0Eh_6AHkpBK6q-08mCRX5qD1d2PJ=EA15qHA@mail.gmail.com>

On Tue, Oct 25, 2011 at 7:54 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-10-25 04:50 PM, Dan Homerick wrote:
>> The ExecuteSQL method returns NULL when an error occurs, or if the
>> statement result is just empty...
>
> The normal approach to distinguishing would be to call CPLErrorReset()
> before calling ExecuteSQL(). ?Then if you get a NULL back interogate
> CPLGetLastErrorType(). ?If it is ERRTYP_FAILURE then an error occurred.

Thanks, that's just what I needed! It's CE_Failure, by the way.

> Note that the "ogr sql" implementation appears to return a layer even if
> the results is empty it just has no features. ?Ideally other implementations
> of ExecuteSQL() would do the same. ?Feel free to file a ticket if this is
> not the case.

The OGRDataSource documentation
(http://www.gdal.org/ogr/classOGRDataSource.html#a6acc228db6513784a56ce12334a8c33)
states that NULL is returned for statements "that have no results
set", which is subtly different than what I initially claimed, "if the
statement result is just empty" -- in practice, I think that a result
set with no columns comes back as NULL (e.g. from an INSERT
statement), but I think one that has no rows will come back as an
empty OGRLayer.

I think I'd mildly prefer something like an INSERT to return an empty
OGRLayer, but the current implementation doesn't appear to be a bug. I
should probably mention that I don't have much experience with
databases, so I don't have any sense of what's standard as far as
results from non-query statements.

Should I still open a ticket?

Cheers,
 - Dan
From warmerdam at pobox.com  Wed Oct 26 12:59:38 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 26 18:04:55 2011
Subject: [gdal-dev] Distinguish between empty result and error with
	OGRDataSource::ExecuteSQL
In-Reply-To: <CAGVu-jH+gBG38U0Eh_6AHkpBK6q-08mCRX5qD1d2PJ=EA15qHA@mail.gmail.com>
References: <CAGVu-jETz0VT_BO1OwnLjU77uKF4vgXB5Bhs7S8S7yU9xM=ddw@mail.gmail.com>
	<4EA77649.8010407@pobox.com>
	<CAGVu-jH+gBG38U0Eh_6AHkpBK6q-08mCRX5qD1d2PJ=EA15qHA@mail.gmail.com>
Message-ID: <CA+YzLBdWCzitbRt+rEqFoZpT00Cs6qXZpsVXnB=amaWdww4gcw@mail.gmail.com>

On Wed, Oct 26, 2011 at 9:39 AM, Dan Homerick <danhomerick@gmail.com> wrote:
> The OGRDataSource documentation
> (http://www.gdal.org/ogr/classOGRDataSource.html#a6acc228db6513784a56ce12334a8c33)
> states that NULL is returned for statements "that have no results
> set", which is subtly different than what I initially claimed, "if the
> statement result is just empty" -- in practice, I think that a result
> set with no columns comes back as NULL (e.g. from an INSERT
> statement), but I think one that has no rows will come back as an
> empty OGRLayer.

Dan,

OK, from my point of view then things are working as intended.
I did note that the code returns NULL for special pseudo statements
like DROP TABLE and CREATE INDEX in the OGR SQL case.
Basically any operation that would never return a resultset returns
NULL.

> I think I'd mildly prefer something like an INSERT to return an empty
> OGRLayer, but the current implementation doesn't appear to be a bug. I
> should probably mention that I don't have much experience with
> databases, so I don't have any sense of what's standard as far as
> results from non-query statements.

I am hesitant to encourage this in part because creating an OGRLayer
is not necessarily a trivial expense.

> Should I still open a ticket?

It seems like things are working as intended from my point of view
so I'm not encouraging the opening of a ticket now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From peifer at gmx.eu  Wed Oct 26 13:02:10 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 26 18:07:28 2011
Subject: [gdal-dev] Another PGeo driver issue, on 64-bit Debian Linux
In-Reply-To: <CABUeae_YURR4RXHTzgAhua9Qb=NNDJFCtQB-da9R-RJ6S47ztg@mail.gmail.com>
References: <j89b1q$e6$1@dough.gmane.org>
	<1319645484.4ea8312c2fb67@webmail.free.fr>
	<4EA833A4.5080701@gmx.eu>
	<CABUeae_YURR4RXHTzgAhua9Qb=NNDJFCtQB-da9R-RJ6S47ztg@mail.gmail.com>
Message-ID: <4EA83D12.6090304@gmx.eu>

On 26/10/2011 18:32, Mateusz ?oskot wrote:
>
> It is there: "See also GDAL wiki for other details" leading to:
>
> http://trac.osgeo.org/gdal/wiki/mdbtools
> http://trac.osgeo.org/gdal/wiki/PGeo
>

Aha. Now I see. Perhaps there should be a stronger warning for dumb GDAL 
users like me. Something like:

"WARNING: If you are on 64-bit Linux, don't waste your time and go 
directly to the MDB driver page."

;-) Hermann
From danhomerick at gmail.com  Wed Oct 26 13:29:31 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Oct 26 18:36:08 2011
Subject: [gdal-dev] Auto-selection of geometry column for MS SQL Server is
 not restrictive enough
Message-ID: <CAGVu-jGpYBBfvdJKx4kEL+W6oJqb7kYn9=L5zkzrswja8YSj8g@mail.gmail.com>

The current logic for detecting the geometry or geography column will
accept a column of type "image" (a subset of binary string[1]) as the
GeomColumn. Furthermore, the logic checks the column types
sequentially, and will accept an "image" column as the GeomColumn,
even if there is a "geometry" or "geography" later in the list of
columns.

I came across this by trying to do queries on a table which does not
have any spatial data, but which does have column of type "image". The
image column was incorrectly assumed to be a geometry column, which
naturally led to errors. This was despite NOT using "OGRSQL" as the
dialect.

There doesn't appear to be any interface to specify which, if any,
column should be used as the GeomColumn -- am I (hopefully!) just
overlooking something?

[1] http://msdn.microsoft.com/en-us/library/ms187752.aspx

- Dan
From szekerest at gmail.com  Wed Oct 26 14:27:11 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Oct 26 19:36:52 2011
Subject: [gdal-dev] Auto-selection of geometry column for MS SQL Server is
	not restrictive enough
In-Reply-To: <CAGVu-jGpYBBfvdJKx4kEL+W6oJqb7kYn9=L5zkzrswja8YSj8g@mail.gmail.com>
References: <CAGVu-jGpYBBfvdJKx4kEL+W6oJqb7kYn9=L5zkzrswja8YSj8g@mail.gmail.com>
Message-ID: <CACALY+QMnBidnEWRQReU6kte6xb=nx3h9z0Y8itFyA9PbdT6cQ@mail.gmail.com>

Dan,

You can specify the geometry column name along with the table name in the
connection string, something like:

MSSQL:server=servername;database=dbname;tables=schemaname.tablename(geomcolumnname)

for more information see: http://www.gdal.org/ogr/drv_mssqlspatial.html

Best regards,

Tamas



2011/10/26 Dan Homerick <danhomerick@gmail.com>

> The current logic for detecting the geometry or geography column will
> accept a column of type "image" (a subset of binary string[1]) as the
> GeomColumn. Furthermore, the logic checks the column types
> sequentially, and will accept an "image" column as the GeomColumn,
> even if there is a "geometry" or "geography" later in the list of
> columns.
>
> I came across this by trying to do queries on a table which does not
> have any spatial data, but which does have column of type "image". The
> image column was incorrectly assumed to be a geometry column, which
> naturally led to errors. This was despite NOT using "OGRSQL" as the
> dialect.
>
> There doesn't appear to be any interface to specify which, if any,
> column should be used as the GeomColumn -- am I (hopefully!) just
> overlooking something?
>
> [1] http://msdn.microsoft.com/en-us/library/ms187752.aspx
>
> - Dan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/f03ae72f/attachment.html
From hobu.inc at gmail.com  Wed Oct 26 15:27:30 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Oct 26 20:40:27 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
Message-ID: <7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>

Folks,

Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks

http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata

Having responded to input and updated the document accordingly, I would like now formally move to adopt RFC 37.

Howard
From even.rouault at mines-paris.org  Wed Oct 26 15:52:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 26 20:43:29 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
Message-ID: <201110262152.56673.even.rouault@mines-paris.org>

Le mercredi 26 octobre 2011 21:27:30, Howard Butler a ?crit :
> Folks,
> 
> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
> 
+1
From dmorissette at mapgears.com  Wed Oct 26 15:38:08 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Oct 26 20:51:38 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data
	in	CPLErrorHandler callbacks
In-Reply-To: <7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
Message-ID: <4EA861A0.6080209@mapgears.com>

On 11-10-26 03:27 PM, Howard Butler wrote:
> Folks,
>
> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
>
> Having responded to input and updated the document accordingly, I would like now formally move to adopt RFC 37.
>


+1 Daniel

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Wed Oct 26 15:45:49 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 26 20:59:44 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
Message-ID: <CA+YzLBfb7ux8anbmD4HEqopVnt+jOtT3AcGj3_JYm66-EYrmyA@mail.gmail.com>

On Wed, Oct 26, 2011 at 12:27 PM, Howard Butler <hobu.inc@gmail.com> wrote:
> Folks,
>
> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From szekerest at gmail.com  Wed Oct 26 15:58:52 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Oct 26 21:13:37 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
Message-ID: <CACALY+QWHOegLrLzt6KkcgNpbnYk_5F11SHMv==f3RaEZaCmdQ@mail.gmail.com>

+1

Tamas



2011/10/26 Howard Butler <hobu.inc@gmail.com>

> Folks,
>
> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
>
> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
>
> Having responded to input and updated the document accordingly, I would
> like now formally move to adopt RFC 37.
>
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111026/2f5fc81e/attachment.html
From mateusz at loskot.net  Wed Oct 26 15:59:36 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Oct 26 21:14:23 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <CACALY+QWHOegLrLzt6KkcgNpbnYk_5F11SHMv==f3RaEZaCmdQ@mail.gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
	<CACALY+QWHOegLrLzt6KkcgNpbnYk_5F11SHMv==f3RaEZaCmdQ@mail.gmail.com>
Message-ID: <CABUeae952b_1K6K=oT10Loz1NCePpV93xG=3bAGMpr22Pqxuzw@mail.gmail.com>

Great, thanks all!

On 26 October 2011 20:58, Tamas Szekeres <szekerest@gmail.com> wrote:
> +1
> Tamas
>
>
> 2011/10/26 Howard Butler <hobu.inc@gmail.com>
>>
>> Folks,
>>
>> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
>>
>> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata
>>
>> Having responded to input and updated the document accordingly, I would
>> like now formally move to adopt RFC 37.
>>
>> Howard_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From joolek.o at gmail.com  Thu Oct 27 03:10:37 2011
From: joolek.o at gmail.com (joolek)
Date: Thu Oct 27 09:02:43 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
Message-ID: <52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>

Yes, this is exactly what I am struggling to do. Gdal is so powerful - but I can't get it working. 
J

On 26 Oct 2011, at 17:10, "Chaitanya kumar CH [via OSGeo.org]"<ml-node+s1803224n6933215h41@n2.nabble.com> wrote:

> Do you want to convert just the pixels with the values (254,254,254)?
> 
> On Wed, Oct 26, 2011 at 9:33 PM, joolek <[hidden email]> wrote:
> Hi I basically want to convert all the 254 254 254 into 255 255 255... is
> this possible?
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> 
> If you reply to this email, your message will be added to the discussion below:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933215.html
> To unsubscribe from 254 into 255, click here.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935299.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/be0f72df/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Oct 27 04:58:53 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 27 10:56:47 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
Message-ID: <CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>

J,

A vrt file[1] can implement your requirements. It can create a 'lookup
table' to translate your pixel values.
Start by running gdalbuildvrt on your raster file and modify it to contain
the LUT element. It will look something like this:

<VRTDataset rasterXSize="512" rasterYSize="512">
  <VRTRasterBand dataType="Byte" band="1">
    <ComplexSource>
      <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <ScaleOffset>0</ScaleOffset>
      <ScaleRatio>1</ScaleRatio>
      <LUT>0:0,253:253,254:255</LUT>
      <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
      <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <ComplexSource>
      <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
      <SourceBand>2</SourceBand>
      <ScaleOffset>0</ScaleOffset>
      <ScaleRatio>1</ScaleRatio>
      <LUT>0:0,253:253,254:255</LUT>
      <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
      <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <ComplexSource>
      <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
      <SourceBand>3</SourceBand>
      <ScaleOffset>0</ScaleOffset>
      <ScaleRatio>1</ScaleRatio>
      <LUT>0:0,253:253,254:255</LUT>
      <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
      <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>


The LUT element is the key here. It tells the VRT driver to keep the values
from 0 to 253 as they are and change 254 to 255.
Remember to replace the appropriate parts.

[1]: http://www.gdal.org/gdal_vrttut.html

On Thu, Oct 27, 2011 at 12:40 PM, joolek <joolek.o@gmail.com> wrote:

> Yes, this is exactly what I am struggling to do. Gdal is so powerful - but
> I can't get it working.
> J
>
>
> On 26 Oct 2011, at 17:10, "Chaitanya kumar CH [via OSGeo.org]"<[hidden
> email] <http://user/SendEmail.jtp?type=node&node=6935299&i=0>> wrote:
>
> Do you want to convert just the pixels with the values (254,254,254)?
>
> On Wed, Oct 26, 2011 at 9:33 PM, joolek <[hidden email]<http://user/SendEmail.jtp?type=node&node=6933215&i=0>
> > wrote:
>
>> Hi I basically want to convert all the 254 254 254 into 255 255 255... is
>> this possible?
>>
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=6933215&i=1>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=6933215&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933215.html
>  To unsubscribe from 254 into 255, click here.
>
>
> ------------------------------
> View this message in context: Re: 254 into 255<http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935299.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1803224.n2.nabble.com/GDAL-Dev-f2022644.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/99e57894/attachment.html
From joolek.o at gmail.com  Thu Oct 27 06:25:02 2011
From: joolek.o at gmail.com (joolek)
Date: Thu Oct 27 12:27:33 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
Message-ID: <1319711102114-6935758.post@n2.nabble.com>

Thank you for that, really really thank you.

I'll definitelly give a go.
If u don't mind me asking two questions:
- what do you mean by appropriate parts?
- I have around 3000 files... can I batch it somehow? If so... would you be
able to give me a hint how to do it?

J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935758.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From joolek.o at gmail.com  Thu Oct 27 06:25:06 2011
From: joolek.o at gmail.com (joolek)
Date: Thu Oct 27 12:27:39 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
Message-ID: <1319711106024-6935760.post@n2.nabble.com>

Thank you for that, really really thank you.

I'll definitelly give a go.
If u don't mind me asking two questions:
- what do you mean by appropriate parts?
- I have around 3000 files... can I batch it somehow? If so... would you be
able to give me a hint how to do it?

J

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935760.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jzl5325 at psu.edu  Thu Oct 27 06:46:11 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Oct 27 12:49:55 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
Message-ID: <CA+bfmPv0H9p+LUqTso-9VaF=+1UdruQWinAM9iNdS9zML7vZig@mail.gmail.com>

Thanks for posting this!  I had to no idea that this functionality existed.
 Is this documented somewhere?

On Thu, Oct 27, 2011 at 4:58 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> J,
>
> A vrt file[1] can implement your requirements. It can create a 'lookup
> table' to translate your pixel values.
> Start by running gdalbuildvrt on your raster file and modify it to contain
> the LUT element. It will look something like this:
>
> <VRTDataset rasterXSize="512" rasterYSize="512">
>   <VRTRasterBand dataType="Byte" band="1">
>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <ScaleOffset>0</ScaleOffset>
>
>       <ScaleRatio>1</ScaleRatio>
>       <LUT>0:0,253:253,254:255</LUT>
>       <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>       <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>     </ComplexSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="2">
>     <ComplexSource>
>
>       <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
>       <SourceBand>2</SourceBand>
>       <ScaleOffset>0</ScaleOffset>
>
>       <ScaleRatio>1</ScaleRatio>
>       <LUT>0:0,253:253,254:255</LUT>
>       <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>       <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>     </ComplexSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="3">
>     <ComplexSource>
>
>       <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
>       <SourceBand>3</SourceBand>
>       <ScaleOffset>0</ScaleOffset>
>
>       <ScaleRatio>1</ScaleRatio>
>       <LUT>0:0,253:253,254:255</LUT>
>       <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>       <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
>
>     </ComplexSource>
>   </VRTRasterBand>
> </VRTDataset>
>
>
> The LUT element is the key here. It tells the VRT driver to keep the values
> from 0 to 253 as they are and change 254 to 255.
> Remember to replace the appropriate parts.
>
> [1]: http://www.gdal.org/gdal_vrttut.html
>
> On Thu, Oct 27, 2011 at 12:40 PM, joolek <joolek.o@gmail.com> wrote:
>
>> Yes, this is exactly what I am struggling to do. Gdal is so powerful - but
>> I can't get it working.
>> J
>>
>>
>> On 26 Oct 2011, at 17:10, "Chaitanya kumar CH [via OSGeo.org]"<[hidden
>> email] <http://user/SendEmail.jtp?type=node&node=6935299&i=0>> wrote:
>>
>> Do you want to convert just the pixels with the values (254,254,254)?
>>
>> On Wed, Oct 26, 2011 at 9:33 PM, joolek <[hidden email]<http://user/SendEmail.jtp?type=node&node=6933215&i=0>
>> > wrote:
>>
>>> Hi I basically want to convert all the 254 254 254 into 255 255 255... is
>>> this possible?
>>>
>>> --
>>> View this message in context:
>>> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> [hidden email] <http://user/SendEmail.jtp?type=node&node=6933215&i=1>
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=6933215&i=2>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> ------------------------------
>>  If you reply to this email, your message will be added to the discussion
>> below:
>> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933215.html
>>  To unsubscribe from 254 into 255, click here.
>>
>>
>> ------------------------------
>> View this message in context: Re: 254 into 255<http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935299.html>
>>
>> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1803224.n2.nabble.com/GDAL-Dev-f2022644.html>at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/f8173650/attachment.html
From etourigny.dev at gmail.com  Thu Oct 27 08:48:35 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Oct 27 14:58:44 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <1319645027220-6933182.post@n2.nabble.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
Message-ID: <CA+TxYvPuodTAieh5uA35DUmA5PtSpLOD_Tsas2dmemqQ2qn-7Q@mail.gmail.com>

You can also modify the existing val_repl.py script, which modifies a
specific value found in an input dataset.  You would have to modify it
because it changes the values for all bands, which is different from
your case, that all bands must have that value (254).  The doownside
is that it's a little slow.

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/val_repl.py

Etienne

On Wed, Oct 26, 2011 at 2:03 PM, joolek <joolek.o@gmail.com> wrote:
> Hi I basically want to convert all the 254 254 254 into 255 255 255... is
> this possible?
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6933182.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From chaitanya.ch at gmail.com  Thu Oct 27 08:48:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 27 14:58:54 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <1319711102114-6935758.post@n2.nabble.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
Message-ID: <CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>

J,

The example I provided is for some other raster with three bands and
resolution 500x500. Please go through the GDAL Virtual Format Tutorial[1] to
get acquainted with what you are doing.

You can dispose off the rasterXSize, rasterYSize, ScaleOffset, ScaleRatio,
SrcRect and DstRect elements.
If all your raster images are similar, you only have to change the value of
the SourceFilename element for each file. So, you can create vrt files with
these differences and then run gdal_translate on them to create Tiff files.

There is a command line program, gdalbuildvrt [2], that can build a single
VRT of multiple rasters. However it doesn't support complex sources like the
example I gave.

[1]: http://www.gdal.org/gdal_vrttut.html
[2]: http://www.gdal.org/gdalbuildvrt.html


On Thu, Oct 27, 2011 at 3:55 PM, joolek <joolek.o@gmail.com> wrote:

> Thank you for that, really really thank you.
>
> I'll definitelly give a go.
> If u don't mind me asking two questions:
> - what do you mean by appropriate parts?
> - I have around 3000 files... can I batch it somehow? If so... would you be
> able to give me a hint how to do it?
>
> J
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6935758.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/1e35523f/attachment.html
From chris.green at ibstv.co.uk  Thu Oct 27 09:47:27 2011
From: chris.green at ibstv.co.uk (Chris Green)
Date: Thu Oct 27 16:01:05 2011
Subject: [gdal-dev] ogr and mdb conversion
Message-ID: <024f01cc94ae$f8660e40$e9322ac0$@green@ibstv.co.uk>

Hi

 

I'm trying to get to a point where I can publish an .mdb dataset on
Mapserver. Having tried for nearly a week to get OGR and the PGeo driver
working on Linux (and not being willing to tackle building the MDB driver
which involves compiling GDAL/OGR 1.9), I decided to try and get round my
problem by using OGR2OGR to convert my .mdb dataset to MySQL offline, then
connect Mapserver to MySQL (something I am doing already).

 

But now I have a different problem. I can open my .mdb file with OGRInfo and
OGR2PGR starts off converting the data but then trips up with the error
"ERROR 1: Terminating translation prematurely after failed translation of
layer ..". If I tell OGR2OGR to -skipfailures it continues to the end of the
file having missed perhaps 60% of the features.

 

There is no additional information about the nature of the translation
error. Looking at the features in Microsoft Access I see no obvious reason
why some should be successfully translated and others should fail. 

 

I realise that MySQL is not the best database for spatial data but I really
don't want to have to change it, and anyway I am not sure whether this
problem is caused by OGR2OGR, or by the .mdb file, or by MySQL.

 

Does anyone have any suggestions as to how I could establish why these
errors occur?

 

 

 

Chris

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/224b55e1/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Oct 27 10:28:09 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 27 16:44:02 2011
Subject: [gdal-dev] ogr and mdb conversion
In-Reply-To: <4ea960ff.428edc0a.6402.119dSMTPIN_ADDED@mx.google.com>
References: <4ea960ff.428edc0a.6402.119dSMTPIN_ADDED@mx.google.com>
Message-ID: <CAMKgpOZYPBjROq5w-oHdmdMe-7pPZb6Br4Z2iREaA0vs1UWhkw@mail.gmail.com>

Chris,

Try to convert the data to some other format using ogr2ogr. GML or Shapefile
are very convenient.

On Thu, Oct 27, 2011 at 7:17 PM, Chris Green <chris.green@ibstv.co.uk>wrote:

> Hi****
>
> ** **
>
> I?m trying to get to a point where I can publish an .mdb dataset on
> Mapserver. Having tried for nearly a week to get OGR and the PGeo driver
> working on Linux (and not being willing to tackle building the MDB driver
> which involves compiling GDAL/OGR 1.9), I decided to try and get round my
> problem by using OGR2OGR to convert my .mdb dataset to MySQL offline, then
> connect Mapserver to MySQL (something I am doing already).****
>
> ** **
>
> But now I have a different problem. I can open my .mdb file with OGRInfo
> and OGR2PGR starts off converting the data but then trips up with the error
> ?ERROR 1: Terminating translation prematurely after failed translation of
> layer ?.?. If I tell OGR2OGR to ?skipfailures it continues to the end of the
> file having missed perhaps 60% of the features.****
>
> ** **
>
> There is no additional information about the nature of the translation
> error. Looking at the features in Microsoft Access I see no obvious reason
> why some should be successfully translated and others should fail. ****
>
> ** **
>
> I realise that MySQL is not the best database for spatial data but I really
> don?t want to have to change it, and anyway I am not sure whether this
> problem is caused by OGR2OGR, or by the .mdb file, or by MySQL.****
>
> ** **
>
> Does anyone have any suggestions as to how I could establish why these
> errors occur?****
>
> ** **
>
> ** **
>
> ** **
>
> Chris****
>
>  ****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/f99704d4/attachment.html
From chris.green at ibstv.co.uk  Thu Oct 27 10:58:21 2011
From: chris.green at ibstv.co.uk (Chris Green)
Date: Thu Oct 27 17:15:52 2011
Subject: [gdal-dev] ogr and mdb conversion
In-Reply-To: <CAMKgpOZYPBjROq5w-oHdmdMe-7pPZb6Br4Z2iREaA0vs1UWhkw@mail.gmail.com>
References: <4ea960ff.428edc0a.6402.119dSMTPIN_ADDED@mx.google.com>
	<CAMKgpOZYPBjROq5w-oHdmdMe-7pPZb6Br4Z2iREaA0vs1UWhkw@mail.gmail.com>
Message-ID: <02a301cc94b8$e0157e20$a0407a60$@green@ibstv.co.uk>

Very constructive suggestion!

 

OGR2OGR works fine from mdb to a shape file, so the problem obviously lies in MySQL?s ability to handle certain types of feature. I will have to decide which way to go next? 

 

 

Much appreciated.

 

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Sent: 27 October 2011 15:28
To: Chris Green
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogr and mdb conversion

 

Chris,

Try to convert the data to some other format using ogr2ogr. GML or Shapefile are very convenient.

On Thu, Oct 27, 2011 at 7:17 PM, Chris Green <chris.green@ibstv.co.uk> wrote:

Hi

 

I?m trying to get to a point where I can publish an .mdb dataset on Mapserver. Having tried for nearly a week to get OGR and the PGeo driver working on Linux (and not being willing to tackle building the MDB driver which involves compiling GDAL/OGR 1.9), I decided to try and get round my problem by using OGR2OGR to convert my .mdb dataset to MySQL offline, then connect Mapserver to MySQL (something I am doing already).

 

But now I have a different problem. I can open my .mdb file with OGRInfo and OGR2PGR starts off converting the data but then trips up with the error ?ERROR 1: Terminating translation prematurely after failed translation of layer ?.?. If I tell OGR2OGR to ?skipfailures it continues to the end of the file having missed perhaps 60% of the features.

 

There is no additional information about the nature of the translation error. Looking at the features in Microsoft Access I see no obvious reason why some should be successfully translated and others should fail. 

 

I realise that MySQL is not the best database for spatial data but I really don?t want to have to change it, and anyway I am not sure whether this problem is caused by OGR2OGR, or by the .mdb file, or by MySQL.

 

Does anyone have any suggestions as to how I could establish why these errors occur?

 

 

 

Chris

 

 

 


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/41233152/attachment.html
From traviskirstine at gmail.com  Thu Oct 27 11:14:34 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu Oct 27 17:32:49 2011
Subject: [gdal-dev] Translating files with a external mask file
Message-ID: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>

I have a rgb geotiff with a external mask file
rgb_withmaskfile.tif.msk, I would like to convert the files to a
compressed GeoTiff using a command simalar to the one below.  This
command will generate a illegal band # error

gdal_translate rgb_withmaskfile.tif results.tif -b 1 -b 2 -b 3 -mask 4
-co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config
GDAL_TIFF_INTERNAL_MASK YES
From chaitanya.ch at gmail.com  Thu Oct 27 11:52:14 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 27 18:12:32 2011
Subject: [gdal-dev] Translating files with a external mask file
In-Reply-To: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>
References: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>
Message-ID: <CAMKgpOZ1jubs+NEsuhVnKcFi-jEEYuzoTNeo2kRZFX4pt90zOA@mail.gmail.com>

Travis,

There might be a problem with the mask band's number. Try fiddling with it.
http://www.gdal.org/gdal_translate.html

On Thu, Oct 27, 2011 at 8:44 PM, Travis Kirstine
<traviskirstine@gmail.com>wrote:

> I have a rgb geotiff with a external mask file
> rgb_withmaskfile.tif.msk, I would like to convert the files to a
> compressed GeoTiff using a command simalar to the one below.  This
> command will generate a illegal band # error
>
> gdal_translate rgb_withmaskfile.tif results.tif -b 1 -b 2 -b 3 -mask 4
> -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config
> GDAL_TIFF_INTERNAL_MASK YES
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/b584cfeb/attachment.html
From warmerdam at pobox.com  Thu Oct 27 12:48:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 27 19:11:36 2011
Subject: [gdal-dev] Translating files with a external mask file
In-Reply-To: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>
References: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>
Message-ID: <CA+YzLBd8n+AjO9PFb=J3T8MOQPqzrDzfc2fA+JA=93BFsvRDFg@mail.gmail.com>

On Thu, Oct 27, 2011 at 8:14 AM, Travis Kirstine
<traviskirstine@gmail.com> wrote:
> I have a rgb geotiff with a external mask file
> rgb_withmaskfile.tif.msk, I would like to convert the files to a
> compressed GeoTiff using a command simalar to the one below. ?This
> command will generate a illegal band # error
>
> gdal_translate rgb_withmaskfile.tif results.tif -b 1 -b 2 -b 3 -mask 4
> -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config
> GDAL_TIFF_INTERNAL_MASK YES

Travis,

Is the mask really band 4?  I presume the mask (from the .msk file)
is not treated as a regular band of the source file and cannot be
referenced as such.  I would hope that gdal_translate would
automatically try to translate the associated mask though I must
confess I haven't tried this myself.  If it does not then please file a
ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Thu Oct 27 14:43:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 27 20:42:24 2011
Subject: [gdal-dev] Translating files with a external mask file
In-Reply-To: <CA+YzLBd8n+AjO9PFb=J3T8MOQPqzrDzfc2fA+JA=93BFsvRDFg@mail.gmail.com>
References: <CALtm4h18vE7uHgfCNMV-+CV7Th-n5BU_XzXZJTuiqFSU7eEhng@mail.gmail.com>
	<CA+YzLBd8n+AjO9PFb=J3T8MOQPqzrDzfc2fA+JA=93BFsvRDFg@mail.gmail.com>
Message-ID: <201110272043.51916.even.rouault@mines-paris.org>

Le jeudi 27 octobre 2011 18:48:07, Frank Warmerdam a ?crit :
> On Thu, Oct 27, 2011 at 8:14 AM, Travis Kirstine
> 
> <traviskirstine@gmail.com> wrote:
> > I have a rgb geotiff with a external mask file
> > rgb_withmaskfile.tif.msk, I would like to convert the files to a
> > compressed GeoTiff using a command simalar to the one below.  This
> > command will generate a illegal band # error
> > 
> > gdal_translate rgb_withmaskfile.tif results.tif -b 1 -b 2 -b 3 -mask 4
> > -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config
> > GDAL_TIFF_INTERNAL_MASK YES
> 
> Travis,
> 
> Is the mask really band 4?  I presume the mask (from the .msk file)
> is not treated as a regular band of the source file and cannot be
> referenced as such.  I would hope that gdal_translate would
> automatically try to translate the associated mask though I must
> confess I haven't tried this myself.  If it does not then please file a
> ticket.

2 possibilities I have verified to work with GDAL >= 1.8.0 :

1) As suggested by Frank, the easiest where you don't have to play with the -b 
and -mask arguments :

gdal_translate rgb_withmaskfile.tif results.tif -co COMPRESS=JPEG -co 
PHOTOMETRIC=YCBCR --config GDAL_TIFF_INTERNAL_MASK YES

2) Another one more verbose :

gdal_translate rgb_withmaskfile.tif results.tif  -b 1 -b 2 -b 3 -mask mask -co 
COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config GDAL_TIFF_INTERNAL_MASK YES

--> The difference with yours is that the band number for the -mask argument is 
the mask keyword. "-mask mask" means that you use as a mask the mask band of 
the source dataset.


> 
> Best regards,
From mike.omalley at nextcentury.com  Thu Oct 27 14:14:32 2011
From: mike.omalley at nextcentury.com (Mike O'Malley)
Date: Thu Oct 27 20:44:05 2011
Subject: [gdal-dev] GDAL, Java and UINT16
Message-ID: <8EDBE3F4D9261F4A90677FB13B9CCEBC026417ED@ws2.hq.nextcentury.com>

Hi-

   I've built GDAL 1.8.1 on Windows and used SWIG to produce the Java
bindings.  I've tried to run Worldwind's GDALTest application
(http://worldwind31.arc.nasa.gov/svn/trunk/GDAL/GDAL-1.7.2/swig/java/app
s/GDALtest.java) against a known good NITF image, but with no success.  

   Initially, I got an exception because the image's single band is of
type UINT16, and the Worldwind code didn't have a case for that type.  I
shoehorned it into the INT16 clause, producing this:

 

              else if ((buf_type ==
gdalconstConstants.GDT_Int16)||(buf_type==gdalconstConstants.GDT_UInt16)
)

              {

                  System.out.println("Int16/Uint16");

                  short[][] shorts = new short[bandCount][];

                  for (int i = 0; i < bandCount; i++)

                  {

                      shorts[i] = new short[pixels];

                      bands[i].asShortBuffer().get(shorts[i]);

                  }

                  imgBuffer = new DataBufferShort(shorts, pixels);

                  buffer_type = DataBuffer.TYPE_USHORT;

                  sampleModel = new BandedSampleModel(buffer_type,

                      xsize, ysize, xsize, banks, offsets);

                  data_type = BufferedImage.TYPE_USHORT_GRAY;

              }

 

   I knew it wasn't quite correct, but it turns out that it's not at all
correct.  The Worldwind function returns a BufferedImage object
constructed from the NITF file.  Java's ImageIO object refuses to write
the BufferedImage created for the UINT16 image using the code above.
There's no exception, the function ImageIO.write() simply returns false
and no file is created.

   The problem isn't the image; the GDAL command line applications work
very well with it, as does FWTools.  

   I don't think this is a Java bindings problem; I just think I'm not
handling UINT16 images correctly.  Given the difference in sign between
Java and C, what's the best way to proceed?  There has to be a
straightforward answer for this, but I can't find it.  The Worldwind
code handles bytes, signed int16s, and signed int32s.  

 

   Thanks,

                Mike

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/836a5ebf/attachment.html
From even.rouault at mines-paris.org  Thu Oct 27 14:56:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 27 20:55:14 2011
Subject: [gdal-dev] GDAL, Java and UINT16
In-Reply-To: <8EDBE3F4D9261F4A90677FB13B9CCEBC026417ED@ws2.hq.nextcentury.com>
References: <8EDBE3F4D9261F4A90677FB13B9CCEBC026417ED@ws2.hq.nextcentury.com>
Message-ID: <201110272056.04925.even.rouault@mines-paris.org>

Le jeudi 27 octobre 2011 20:14:32, Mike O'Malley a ?crit :
> Hi-
> 
>    I've built GDAL 1.8.1 on Windows and used SWIG to produce the Java
> bindings.  I've tried to run Worldwind's GDALTest application
> (http://worldwind31.arc.nasa.gov/svn/trunk/GDAL/GDAL-1.7.2/swig/java/app
> s/GDALtest.java) against a known good NITF image, but with no success.
> 
>    Initially, I got an exception because the image's single band is of
> type UINT16, and the Worldwind code didn't have a case for that type.  I
> shoehorned it into the INT16 clause, producing this:
> 
> 
> 
>               else if ((buf_type ==
> gdalconstConstants.GDT_Int16)||(buf_type==gdalconstConstants.GDT_UInt16)
> )
> 
>               {
> 
>                   System.out.println("Int16/Uint16");
> 
>                   short[][] shorts = new short[bandCount][];
> 
>                   for (int i = 0; i < bandCount; i++)
> 
>                   {
> 
>                       shorts[i] = new short[pixels];
> 
>                       bands[i].asShortBuffer().get(shorts[i]);
> 
>                   }
> 
>                   imgBuffer = new DataBufferShort(shorts, pixels);
> 
>                   buffer_type = DataBuffer.TYPE_USHORT;
> 
>                   sampleModel = new BandedSampleModel(buffer_type,
> 
>                       xsize, ysize, xsize, banks, offsets);
> 
>                   data_type = BufferedImage.TYPE_USHORT_GRAY;
> 
>               }
> 
> 
> 
>    I knew it wasn't quite correct, but it turns out that it's not at all
> correct.  The Worldwind function returns a BufferedImage object
> constructed from the NITF file.  Java's ImageIO object refuses to write
> the BufferedImage created for the UINT16 image using the code above.
> There's no exception, the function ImageIO.write() simply returns false
> and no file is created.
> 
>    The problem isn't the image; the GDAL command line applications work
> very well with it, as does FWTools.
> 
>    I don't think this is a Java bindings problem; I just think I'm not
> handling UINT16 images correctly.  Given the difference in sign between
> Java and C, what's the best way to proceed?  There has to be a
> straightforward answer for this, but I can't find it.  The Worldwind
> code handles bytes, signed int16s, and signed int32s.

I'm not familiar with the BufferedImage API, but I can point you to the 
introduction paragraph of http://gdal.org/java/org/gdal/gdal/Band.html

"""
Band objects are returned by methods from other classes, such as 
Dataset.GetRasterBand() Users of the Java bindings must be aware that the Java 
primitive types byte, short, int are signed types, whereas a few GDAL data 
types (GDT_Byte, GDT_UInt16 and GDT_UInt32) are unsigned. To read/write those 
data types, you may have to choose a "larger" type for example 
(short/GDT_Int16 for GDT_Byte, int/GDT_Int32 for GDT_UInt16, 
double/GDT_Float64 for GDT_UInt32), or use some tricks to hold unsigned values 
into signed data type. For example : 
   byte[] byteArray = new byte[xsize * ysize];
   byte[] byteArray2 = new byte[xsize * ysize];
   band.ReadRaster(0, 0, xsize, ysize, gdalconst.GDT_Byte, byteArray);
   for(int j=0; j < ysize; j++)
   {
      for(int i=0; i < xsize; i++)
      {
          byte bVal = byteArray[j*xsize+i]; // ranging from -128 to 127
          int nVal = ((int)bVal) & 0xff; // remapped to range from 0 to 255
          int nVal2;
          if (nVal > threshold)
              nVal2 = 255;
          else
              nVal2 = 0;
          byte bVal2 = (nVal2 > 127) ? nVal2 - 256 : nVal2; // remapped to range from -128 to 127
          byteArray2[j*xsize+i] = bVal2;
      }
   }
   band2.WriteRaster(0, 0, xsize, ysize, gdalconst.GDT_Byte, byteArray2);
 """

I'd note that what you call the Worldwind's GDALTest application is actually 
the GDAL's GDALTest application ;-) I'm not sure how well it works with non-
byte data type.

> 
> 
> 
>    Thanks,
> 
>                 Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111027/e4e25367/attachment-0001.html
From peifer at gmx.eu  Fri Oct 28 02:52:04 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 28 10:01:43 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
	<CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
Message-ID: <4EAA5114.4050908@gmx.eu>

On 27/10/2011 14:48, Chaitanya kumar CH wrote:
> However it [gdalbuildvrt] doesn't support complex sources..

Chaitanya, could you perhaps elaborate on the above statement?


joolek,

About the batch-processing of 3000 files: in my 
Linux/Bash/GDAL-from-trunk environment, I would do something like 
indicated below.

Hope this helps, Hermann

for f in path/to/mytiffs/*.tif; do
   gdal_translate -of vrt $f /dev/stdout |
   awk '
     BEGIN { lut = "<LUT>0:0,253:253,254:255</LUT>" }
     { gsub(/SimpleSource>/, "ComplexSource>") }
     $1 == "</ComplexSource>" { $0 = lut ORS $0 }
     { print }' > tmp.vrt
   gdal_translate tmp.vrt ${f%.tif}_modified.tif
done
From chaitanya.ch at gmail.com  Fri Oct 28 03:09:26 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 10:20:05 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <4EAA5114.4050908@gmx.eu>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
	<CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
	<4EAA5114.4050908@gmx.eu>
Message-ID: <CAMKgpOYDR3VS7SEQaEx-nqz5B-kwDWzMwp3XyY+6P_s1yZ8J_Q@mail.gmail.com>

I'm sorry. I should have said that gdalbuildvrt does not support creation of
the lookup table.

On Fri, Oct 28, 2011 at 12:22 PM, Hermann Peifer <peifer@gmx.eu> wrote:

> On 27/10/2011 14:48, Chaitanya kumar CH wrote:
>
>> However it [gdalbuildvrt] doesn't support complex sources..
>>
>
> Chaitanya, could you perhaps elaborate on the above statement?
>
>
> joolek,
>
> About the batch-processing of 3000 files: in my Linux/Bash/GDAL-from-trunk
> environment, I would do something like indicated below.
>
> Hope this helps, Hermann
>
> for f in path/to/mytiffs/*.tif; do
>  gdal_translate -of vrt $f /dev/stdout |
>  awk '
>    BEGIN { lut = "<LUT>0:0,253:253,254:255</**LUT>" }
>    { gsub(/SimpleSource>/, "ComplexSource>") }
>    $1 == "</ComplexSource>" { $0 = lut ORS $0 }
>    { print }' > tmp.vrt
>  gdal_translate tmp.vrt ${f%.tif}_modified.tif
> done
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/1b51e0cc/attachment.html
From peifer at gmx.eu  Fri Oct 28 04:19:09 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 28 11:33:33 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOYDR3VS7SEQaEx-nqz5B-kwDWzMwp3XyY+6P_s1yZ8J_Q@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
	<CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
	<4EAA5114.4050908@gmx.eu>
	<CAMKgpOYDR3VS7SEQaEx-nqz5B-kwDWzMwp3XyY+6P_s1yZ8J_Q@mail.gmail.com>
Message-ID: <4EAA657D.5010605@gmx.eu>

On 28/10/2011 09:09, Chaitanya kumar CH wrote:
> I'm sorry. I should have said that gdalbuildvrt does not support
> creation of the lookup table.
>

Thanks for the clarification and for posting the vrt-lookup-table trick. 
This was very helpful.

Hermann
From tom at vdputte.nl  Fri Oct 28 04:33:18 2011
From: tom at vdputte.nl (Tom van der Putte)
Date: Fri Oct 28 11:48:32 2011
Subject: [gdal-dev] Empty GTiff Cont'd
Message-ID: <4708.1319790798@vdputte.nl>

I
forgot to mention that I had replaced the original array with
np.ones((10,10)) for testing purposes, the result stays the same...
 Tom
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/1d131566/attachment.html
From tom at vdputte.nl  Fri Oct 28 04:23:04 2011
From: tom at vdputte.nl (Tom van der Putte)
Date: Fri Oct 28 11:58:57 2011
Subject: [gdal-dev] empty Gtiff from Python
Message-ID: <4335.1319790184@vdputte.nl>

Hi
List,
 I'm trying to save a numpy array to a GTiff, which should be quite
straightforward, considering all the examples available on the web.
However, I get an file that is not readable by Qgis, is regarded by
ArcMap to have only 0 and gdalinfo displays nothing on the values.
 I start with a ndarray, dtype = int32, shape = ( 10,10). It has
integer values between 1 and 10. The code is as follows:
 import numpy as np
 from osgeo import gdal
 from osgeo import osr
 #np array
 a = np.ones((10,10))
 #coord-system
 sr_str = 'LOCAL_CS["arbitrary"]'
 sr = osr.SpatialReference( sr_str )
 #driver
 driver = gdal.GetDriverByName("GTiff")
 #dataset
 ds = driver.Create("D:\temp\output.tif", 10, 10, 1, gdal.GDT_Byte)
 ds.SetProjection( sr_str )
 ds.SetGeoTransform((0, 1, 0,0, 0,1))
 #write and close
 ds.GetRasterBand(1).WriteArray(a)
 ds = None
 The corresponding gdalinfo is:
 *********
 Raster dataset parameters:
   Projection:
LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
   RasterCount: 1
   RasterSize (10,10)
 Using driver GeoTIFF
   Metadata:
     0:  AREA_OR_POINT=Area
   Image Structure Metadata:
     0:  INTERLEAVE=BAND
 Corner Coordinates:
   Upper Left (0, 0)
   Lower Left (0, 10)
   Upper Right (10, 0)
   Lower Right (10, 10)
   Center (5, 5)
 Coordinate System is:
 LOCAL_CS["arbitrary",
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
 Band 1 :
    DataType: Byte
    ColorInterpretation: Gray
    Description:
    Size (10,10)
    BlockSize (10,10)
 *********
 I have tried both version 1.6.3 (I'm trying to make a Qgis plugin,
and thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds =
driver.Create("D:\temp\output.tif", 10, 10, 1, gdal.GDT_Int32), but
that didn't make much difference.
 I tried to make a Surfer grid (GSBG), and this somewhat worked: it
gave a nice picture, but the values were off the charts.
 Any clues as to what I'm missing here? Cheers,
 Tom van der Putte
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/d4d82f44/attachment.html
From schut at sarvision.nl  Fri Oct 28 04:57:56 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Oct 28 12:22:20 2011
Subject: [gdal-dev] empty Gtiff from Python
In-Reply-To: <4335.1319790184@vdputte.nl>
References: <4335.1319790184@vdputte.nl>
Message-ID: <4EAA6E94.6000600@sarvision.nl>

Tom van der Putte wrote:
> Hi List,
>
> I'm trying to save a numpy array to a GTiff, which should be quite 
> straightforward, considering all the examples available on the web. 
> However, I get an file that is not readable by Qgis, is regarded by 
> ArcMap to have only 0 and gdalinfo displays nothing on the values.
>
> I start with a ndarray, dtype = int32, shape = ( 10,10). It has 
> integer values between 1 and 10. The code is as follows:
>
> import numpy as np
> from osgeo import gdal
> from osgeo import osr
>
> #np array
> a = np.ones((10,10))
>
> #coord-system
> sr_str = 'LOCAL_CS["arbitrary"]'
> sr = osr.SpatialReference( sr_str )
>
> #driver
> driver = gdal.GetDriverByName("GTiff")
>
> #dataset
> ds = driver.Create("D:\\temp\\output.tif", 10, 10, 1, gdal.GDT_Byte)
> ds.SetProjection( sr_str )
> ds.SetGeoTransform((0, 1, 0,0, 0,1))
>
> #write and close
> ds.GetRasterBand(1).WriteArray(a)
> ds = None

Tom,

don't know if you can use WriteArray this way... what I always do, is:

from osgeo import gdal_array
# to write numpy array:
gdal_array.BandWriteAsArray(ds.GetRasterBand(1), a)

Best,
Vincent.
>
> The corresponding gdalinfo is:
> *********
> Raster dataset parameters:
>   Projection: 
> LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
>   RasterCount: 1
>   RasterSize (10,10)
> Using driver GeoTIFF
>   Metadata:
>     0:  AREA_OR_POINT=Area
>
>   Image Structure Metadata:
>     0:  INTERLEAVE=BAND
>
> Corner Coordinates:
>   Upper Left (0, 0)
>   Lower Left (0, 10)
>   Upper Right (10, 0)
>   Lower Right (10, 10)
>   Center (5, 5)
>
> Coordinate System is:
> LOCAL_CS["arbitrary",
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Band 1 :
>    DataType: Byte
>    ColorInterpretation: Gray
>    Description:
>    Size (10,10)
>    BlockSize (10,10)
> *********
>
> I have tried both version 1.6.3 (I'm trying to make a Qgis plugin, and 
> thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds = 
> driver.Create("D:\\temp\\output.tif", 10, 10, 1, gdal.GDT_Int32), but 
> that didn't make much difference.
>
> I tried to make a Surfer grid (GSBG), and this somewhat worked: it 
> gave a nice picture, but the values were off the charts.
>
> Any clues as to what I'm missing here? Cheers,
>
> Tom van der Putte
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/41a3422a/attachment.html
From tom at vdputte.nl  Fri Oct 28 05:06:16 2011
From: tom at vdputte.nl (Tom van der Putte)
Date: Fri Oct 28 12:23:12 2011
Subject: [gdal-dev] empty Gtiff from Python
Message-ID: <1161.1319792776@vdputte.nl>

 Hi Vincent,
 Thanks for the repliy; unfortunately 
 gdal_array.BandWriteArray(ds.GetRasterBand(1),a)  
 (BandWriteAsArray doesn't exist)
 has the same effect.
 Tom
 On Fri 28/10/11 10:57 , Vincent Schut schut@sarvision.nl sent:
                    Tom van der Putte wrote:            Hi      
List,
       I'm trying to save a numpy array to a GTiff, which should be
quite       straightforward, considering all the examples available on
the       web. However, I get an file that is not readable by Qgis, is
      regarded by ArcMap to have only 0 and gdalinfo displays nothing
on       the values.
       I start with a ndarray, dtype = int32, shape = ( 10,10). It
has       integer values between 1 and 10. The code is as follows:
       import numpy as np
       from osgeo import gdal
       from osgeo import osr
       #np array
       a = np.ones((10,10))
       #coord-system
       sr_str = 'LOCAL_CS["arbitrary"]'
       sr = osr.SpatialReference( sr_str )
       #driver
       driver = gdal.GetDriverByName("GTiff")
       #dataset
       ds = driver.Create("D:\temp\output.tif", 10, 10, 1,      
gdal.GDT_Byte)
       ds.SetProjection( sr_str )
       ds.SetGeoTransform((0, 1, 0,0, 0,1))
       #write and close
       ds.GetRasterBand(1).WriteArray(a)
       ds = None
     Tom,
     don't know if you can use WriteArray this way... what I always
do,     is:
     from osgeo import gdal_array
     # to write numpy array:
     gdal_array.BandWriteAsArray(ds.GetRasterBand(1), a)
     Best,
     Vincent.
       The corresponding gdalinfo is:
       *********
       Raster dataset parameters:
         Projection:      
LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
         RasterCount: 1
         RasterSize (10,10)
       Using driver GeoTIFF
         Metadata:
           0:  AREA_OR_POINT=Area
         Image Structure Metadata:
           0:  INTERLEAVE=BAND
       Corner Coordinates:
         Upper Left (0, 0)
         Lower Left (0, 10)
         Upper Right (10, 0)
         Lower Right (10, 10)
         Center (5, 5)
       Coordinate System is:
       LOCAL_CS["arbitrary",
           UNIT["metre",1,
               AUTHORITY["EPSG","9001"]]]
       Band 1 :
          DataType: Byte
          ColorInterpretation: Gray
          Description:
          Size (10,10)
          BlockSize (10,10)
       *********
       I have tried both version 1.6.3 (I'm trying to make a Qgis
plugin,       and thus restricted to 1.6.3) as well as 1.8.1. I have
also tried       ds = driver.Create("D:\temp\output.tif", 10, 10, 1,  
    gdal.GDT_Int32), but that didn't make much difference.
       I tried to make a Surfer grid (GSBG), and this somewhat
worked: it       gave a nice picture, but the values were off the
charts.
       Any clues as to what I'm missing here? Cheers,
       Tom van der Putte
	_______________________________________________ gdal-dev mailing
list gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev         
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/f4601ad1/attachment.html
From tom at vdputte.nl  Fri Oct 28 05:43:08 2011
From: tom at vdputte.nl (Tom van der Putte)
Date: Fri Oct 28 13:02:18 2011
Subject: [gdal-dev] empty Gtiff from Python
Message-ID: <1959.1319794989@vdputte.nl>

Hi
Chris,
 Thanks for checking. I tried it on a linux machine here also and it
seems to work. Probably something wrong with either the GDAL
instalations or QGIS on my windows machine. I'll try reinstalling it
all.
 Cheers!
 Tom
 On Fri 28/10/11 11:10 , "Chris Yesson" Chris.Yesson@ioz.ac.uk sent:
 Tom,
 I have just run your code exactly as you sent it (except for output
 path), with python 2.5.2 ang gdal 1.8.1.  The ouput file appears in
 order (gdalinfo output below).  The file opens and displays normally
in
 qgis trunk v 1.8.
 - Chris
 Gdalinfo output
 Driver: GTiff/GeoTIFF
 Files: output.tif
        output.tif.aux.xml
 Size is 10, 10
 Coordinate System is:
 LOCAL_CS["arbitrary",
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
 Metadata:
   AREA_OR_POINT=Area
 Image Structure Metadata:
   INTERLEAVE=BAND
 Corner Coordinates:
 Upper Left  (    0.0,    0.0)
 Lower Left  (    0.0,   10.0)
 Upper Right (   10.0,    0.0)
 Lower Right (   10.0,   10.0)
 Center      (    5.0,    5.0)
 Band 1 Block=10x10 Type=Byte, ColorInterp=Gray
   Min=1.000 Max=1.000
   Minimum=1.000, Maximum=1.000, Mean=1.000, StdDev=0.000
   Metadata:
     STATISTICS_MINIMUM=1
     STATISTICS_MAXIMUM=1
     STATISTICS_MEAN=1
     STATISTICS_STDDEV=0
 Date: Fri, 28 Oct 2011 10:23:04 +0200
 From: Tom van der Putte 
 Subject: [gdal-dev] empty Gtiff from Python
 To: 
 Message-ID: 
 Content-Type: text/plain; charset="utf-8"
 Hi
 List,
  I'm trying to save a numpy array to a GTiff, which should be quite
 straightforward, considering all the examples available on the web.
 However, I get an file that is not readable by Qgis, is regarded by
 ArcMap to have only 0 and gdalinfo displays nothing on the values.
  I start with a ndarray, dtype = int32, shape = ( 10,10). It has
 integer values between 1 and 10. The code is as follows:
  import numpy as np
  from osgeo import gdal
  from osgeo import osr
  #np array
  a = np.ones((10,10))
  #coord-system
  sr_str = 'LOCAL_CS["arbitrary"]'
  sr = osr.SpatialReference( sr_str )
  #driver
  driver = gdal.GetDriverByName("GTiff")
  #dataset
  ds = driver.Create("D:tempoutput.tif", 10, 10, 1, gdal.GDT_Byte)
  ds.SetProjection( sr_str )
  ds.SetGeoTransform((0, 1, 0,0, 0,1))
  #write and close
  ds.GetRasterBand(1).WriteArray(a)
  ds = None
  The corresponding gdalinfo is:
  *********
  Raster dataset parameters:
    Projection:
 LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
    RasterCount: 1
    RasterSize (10,10)
  Using driver GeoTIFF
    Metadata:
      0:  AREA_OR_POINT=Area
    Image Structure Metadata:
      0:  INTERLEAVE=BAND
  Corner Coordinates:
    Upper Left (0, 0)
    Lower Left (0, 10)
    Upper Right (10, 0)
    Lower Right (10, 10)
    Center (5, 5)
  Coordinate System is:
  LOCAL_CS["arbitrary",
      UNIT["metre",1,
          AUTHORITY["EPSG","9001"]]]
  Band 1 :
     DataType: Byte
     ColorInterpretation: Gray
     Description:
     Size (10,10)
     BlockSize (10,10)
  *********
  I have tried both version 1.6.3 (I'm trying to make a Qgis plugin,
 and thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds
=
 driver.Create("D:tempoutput.tif", 10, 10, 1, gdal.GDT_Int32), but
 that didn't make much difference.
  I tried to make a Surfer grid (GSBG), and this somewhat worked: it
 gave a nice picture, but the values were off the charts.
  Any clues as to what I'm missing here? Cheers,
  Tom van der Putte
 -------------- next part --------------
 An HTML attachment was scrubbed...
 URL:

http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/d4d82f44/
 attachment-0001.html
 ------------------------------
 _______________________________________________
 gdal-dev mailing list
 http://lists.osgeo.org/mailman/listinfo/gdal-dev
 End of gdal-dev Digest, Vol 89, Issue 71
 ****************************************
 This message has been scanned for viruses by MailControl -
 www.mailcontrol.com
 Click
 https://www.mailcontrol.com/sr/wQw0zmjPoHdJTZGyOCrrhg==
 oTJhgA1yNPXUJ0FMnJ7X3MJaL!eAyER2lygvJyt6ermNw==  to report this
email as
 spam.
 The Zoological Society of London is incorporated by Royal Charter
 Principal Office England. Company Number RC000749
 Registered address: 
 Regent's Park, London, England NW1 4RY
 Registered Charity in England and Wales no. 208728 

_________________________________________________________________________
 This e-mail has been sent in confidence to the named addressee(s).
 If you are not the intended recipient, you must not disclose or
distribute
 it in any form, and you are asked to contact the sender immediately.
 Views or opinions expressed in this communication may not be those
 of The Zoological Society of London and, therefore, The Zoological
 Society of London does not accept legal responsibility for the
contents
 of this message. The recipient(s) must be aware that e-mail is not a
 secure communication medium and that the contents of this mail may
 have been altered by a third party in transit.
 If you have any issues regarding this mail please contact:
 .

___________________________________________________________________________
 This message has been scanned for viruses by MailControl, a service
from BlackSpider Technologies.
 

Links:
------
[5] http://www.mailcontrol.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/466c878a/attachment-0001.html
From Chris.Yesson at ioz.ac.uk  Fri Oct 28 05:10:32 2011
From: Chris.Yesson at ioz.ac.uk (Chris Yesson)
Date: Fri Oct 28 13:04:27 2011
Subject: [gdal-dev] empty Gtiff from Python
In-Reply-To: <20111028160013.CFECBE00A10@lists.osgeo.org>
References: <20111028160013.CFECBE00A10@lists.osgeo.org>
Message-ID: <41E1ED29E5E8E34BBDD8B82CFA1A9D040C16B305@ZSL26.zsl.org>

Tom,

I have just run your code exactly as you sent it (except for output
path), with python 2.5.2 ang gdal 1.8.1.  The ouput file appears in
order (gdalinfo output below).  The file opens and displays normally in
qgis trunk v 1.8.

- Chris

Gdalinfo output

Driver: GTiff/GeoTIFF
Files: output.tif
       output.tif.aux.xml
Size is 10, 10
Coordinate System is:
LOCAL_CS["arbitrary",
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   10.0)
Upper Right (   10.0,    0.0)
Lower Right (   10.0,   10.0)
Center      (    5.0,    5.0)
Band 1 Block=10x10 Type=Byte, ColorInterp=Gray
  Min=1.000 Max=1.000
  Minimum=1.000, Maximum=1.000, Mean=1.000, StdDev=0.000
  Metadata:
    STATISTICS_MINIMUM=1
    STATISTICS_MAXIMUM=1
    STATISTICS_MEAN=1
    STATISTICS_STDDEV=0

Date: Fri, 28 Oct 2011 10:23:04 +0200
From: Tom van der Putte <tom@vdputte.nl>
Subject: [gdal-dev] empty Gtiff from Python
To: <gdal-dev@lists.osgeo.org>
Message-ID: <4335.1319790184@vdputte.nl>
Content-Type: text/plain; charset="utf-8"

Hi
List,
 I'm trying to save a numpy array to a GTiff, which should be quite
straightforward, considering all the examples available on the web.
However, I get an file that is not readable by Qgis, is regarded by
ArcMap to have only 0 and gdalinfo displays nothing on the values.
 I start with a ndarray, dtype = int32, shape = ( 10,10). It has
integer values between 1 and 10. The code is as follows:
 import numpy as np
 from osgeo import gdal
 from osgeo import osr
 #np array
 a = np.ones((10,10))
 #coord-system
 sr_str = 'LOCAL_CS["arbitrary"]'
 sr = osr.SpatialReference( sr_str )
 #driver
 driver = gdal.GetDriverByName("GTiff")
 #dataset
 ds = driver.Create("D:\temp\output.tif", 10, 10, 1, gdal.GDT_Byte)
 ds.SetProjection( sr_str )
 ds.SetGeoTransform((0, 1, 0,0, 0,1))
 #write and close
 ds.GetRasterBand(1).WriteArray(a)
 ds = None
 The corresponding gdalinfo is:
 *********
 Raster dataset parameters:
   Projection:
LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
   RasterCount: 1
   RasterSize (10,10)
 Using driver GeoTIFF
   Metadata:
     0:  AREA_OR_POINT=Area
   Image Structure Metadata:
     0:  INTERLEAVE=BAND
 Corner Coordinates:
   Upper Left (0, 0)
   Lower Left (0, 10)
   Upper Right (10, 0)
   Lower Right (10, 10)
   Center (5, 5)
 Coordinate System is:
 LOCAL_CS["arbitrary",
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
 Band 1 :
    DataType: Byte
    ColorInterpretation: Gray
    Description:
    Size (10,10)
    BlockSize (10,10)
 *********
 I have tried both version 1.6.3 (I'm trying to make a Qgis plugin,
and thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds =
driver.Create("D:\temp\output.tif", 10, 10, 1, gdal.GDT_Int32), but
that didn't make much difference.
 I tried to make a Surfer grid (GSBG), and this somewhat worked: it
gave a nice picture, but the values were off the charts.
 Any clues as to what I'm missing here? Cheers,
 Tom van der Putte
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/d4d82f44/
attachment-0001.html

------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

End of gdal-dev Digest, Vol 89, Issue 71
****************************************


This message has been scanned for viruses by MailControl -
www.mailcontrol.com

Click
https://www.mailcontrol.com/sr/wQw0zmjPoHdJTZGyOCrrhg==
oTJhgA1yNPXUJ0FMnJ7X3MJaL!eAyER2lygvJyt6ermNw==  to report this email as
spam.


The Zoological Society of London is incorporated by Royal Charter
Principal Office England. Company Number RC000749
Registered address: 
Regent's Park, London, England NW1 4RY
Registered Charity in England and Wales no. 208728 

_________________________________________________________________________
This e-mail has been sent in confidence to the named addressee(s).
If you are not the intended recipient, you must not disclose or distribute
it in any form, and you are asked to contact the sender immediately.
Views or opinions expressed in this communication may not be those
of The Zoological Society of London and, therefore, The Zoological
Society of London does not accept legal responsibility for the contents
of this message. The recipient(s) must be aware that e-mail is not a
secure communication medium and that the contents of this mail may
have been altered by a third party in transit.
If you have any issues regarding this mail please contact:
administrator@zsl.org.
___________________________________________________________________________



This message has been scanned for viruses by MailControl, a service from BlackSpider Technologies.
From katrineggert1980 at gmail.com  Fri Oct 28 07:04:32 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Fri Oct 28 14:28:25 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
Message-ID: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>

Hi
I have used gdal2tile.py like this
python gdal2tile.py -k [input] [output] and the tiels that are generated are
nothing to do with the input image. It has changed the image by almost
plotting random values pixels.
Is there any limitation regarding inpu timage (e.g. it must be integer or
something like this)?

Thanks
Kat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/80846163/attachment.html
From antonio.rocha at deimos.com.pt  Fri Oct 28 07:54:37 2011
From: antonio.rocha at deimos.com.pt (=?UTF-8?B?QW50w7NuaW8gUm9jaGE=?=)
Date: Fri Oct 28 15:21:13 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>
References: <4EA7CA86.8020906@deimos.com.pt>	<CAMKgpOYkABtn-2V0dkiexV9r3-z2zMHVwSfNc9oBANX+RKWHRQ@mail.gmail.com>	<4EA7F08E.4090707@deimos.com.pt>
	<CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>
Message-ID: <4EAA97FD.8080506@deimos.com.pt>

Hi
I have tried qwhat you said:
First: ogrinfo -al -so GPS_Project.shp
INFO: Open of `GPS_Project.shp'
      using driver `ESRI Shapefile' successful.

Layer name: GPS_Project
Geometry: Point
Feature Count: 135
Extent: (643712.710081, 7794078.321332) - (649554.409908, 7796057.897650)
Layer SRS WKT:
PROJCS["WGS_1984_UTM_Zone_36S",
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_1984",6378137.0,298.257223563]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000.0],
    PARAMETER["False_Northing",10000000.0],
    PARAMETER["Central_Meridian",33.0],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
ele: Real (19.15)
time: String (80.0)
magvar: Real (19.15)
geoidheigh: Real (19.15)
name: String (80.0)
cmt: String (80.0)
desc_: String (80.0)
src: String (80.0)
link1_href: String (80.0)
link1_text: String (80.0)
link1_type: String (80.0)
link2_href: String (80.0)
link2_text: String (80.0)
link2_type: String (80.0)
sym: String (80.0)
type: String (80.0)
fix: String (80.0)
sat: Integer (10.0)
hdop: Real (19.15)
vdop: Real (19.15)
pdop: Real (19.15)
ageofdgpsd: Real (19.15)
dgpsid: Integer (10.0)
label: String (80.0)

And then:
ogr2ogr -sql "SELECT [ele AS ele, time AS t, magvar AS magvar, 
geoidheigh AS geoidheigh, name AS name, cmt AS cmt, desc_ AS desc_, src 
AS src] FROM GPS_Project.shp", new.shp GPS_Project.shp                  
And I got:

         ERROR 1: SQL Expression Parsing Error: syntax error


What is wrong in my expression?
THanks and sorry
Antonio

Chaitanya kumar CH wrote:
> Ant?nio,
>
> OGR comes as a part of GDAL. OGR utilities can be used like GDAL 
> utilities.
>
> First, run ogrinfo on the shapefile with the options "-al" and "-so" 
> to determine the field names in it.
>
> Next, use the ogr2ogr utility like this:
> ogr2ogr -sql "SELECT [field1a AS field1b, field2a AS field2b, field 3a 
> AS field3b] FROM shapefileA" shapefileB.shp shapefileA.shp
>
> This command changes the fields field1a, field2a and field3a in the 
> original shapefile, shapefileA.shp, to field1b, field2b and field3b 
> respectively in the new shapefile, shapefile.shp.
>
> 2011/10/26 Ant?nio Rocha <antonio.rocha@deimos.com.pt 
> <mailto:antonio.rocha@deimos.com.pt>>
>
>     Hi
>     THanks for the feedback. I'm a bit lost on this. Is there any
>     examples and tutorials on using sql commands for OGR? I'm sorry
>     but I'm not use to use Vectorial data and neither OGR (only GDAL)
>     Thanks
>     Antonio
>     Chaitanya kumar CH wrote:
>
>         Ant?nio,
>
>         The easiest way is to use the -sql option in ogr2ogr [1] and
>         set a new name with the AS clause in the SQL statement [2].
>
>         [1]: http://www.gdal.org/ogr2ogr.html
>         [2]: http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
>
>         2011/10/26 Ant?nio Rocha <antonio.rocha@deimos.com.pt
>         <mailto:antonio.rocha@deimos.com.pt>
>         <mailto:antonio.rocha@deimos.com.pt
>         <mailto:antonio.rocha@deimos.com.pt>>>
>
>
>            Greetings
>            I have to shage a column name in a Shapefile. I'm not much
>            familiar with OGR. How can I do that in OGR?
>            THanks
>            Best regards,
>            Antonio
>
>
>
>            __________ Information from ESET NOD32 Antivirus, version
>         of virus
>            signature database 6574 (20111025) __________
>
>            The message was checked by ESET NOD32 Antivirus.
>
>            http://www.eset.com
>
>
>            _______________________________________________
>            gdal-dev mailing list
>            gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         <mailto:gdal-dev@lists.osgeo.org
>         <mailto:gdal-dev@lists.osgeo.org>>
>
>            http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>         -- 
>         Best regards,
>         Chaitanya kumar CH.
>
>         +91-9494447584 <tel:%2B91-9494447584>
>         17.2416N 80.1426E
>
>
>
>
>     __________ Information from ESET NOD32 Antivirus, version of virus
>     signature database 6575 (20111026) __________
>
>
>     The message was checked by ESET NOD32 Antivirus.
>
>     http://www.eset.com
>
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Ant?nio Rocha

Aerospace & Defence Portugal
DEIMOS Engenharia, SA
Av. D. Joao II, Lt 1.17.01 - 10?, Ed. Torre Zen
1998-023 Lisboa, Portugal
Ph:  +351 21 893 3010
Fax: +351 21 896 9099
http://www.deimos.pt 



__________ Information from ESET NOD32 Antivirus, version of virus signature database 6582 (20111028) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From Ralf.Suhr at itc-halle.de  Fri Oct 28 08:22:30 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Oct 28 15:52:01 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <4EAA97FD.8080506@deimos.com.pt>
References: <4EA7CA86.8020906@deimos.com.pt>
	<CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>
	<4EAA97FD.8080506@deimos.com.pt>
Message-ID: <201110281422.30330.Ralf.Suhr@itc-halle.de>

ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar, 
geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp

Gr
Ralf

On Freitag 28 Oktober 2011 13:54:37 Ant?nio Rocha wrote:
> ogr2ogr -sql "SELECT [ele AS ele, time AS t, magvar AS magvar, 
> geoidheigh AS geoidheigh, name AS name, cmt AS cmt, desc_ AS desc_, src 
> AS src] FROM GPS_Project.shp", new.shp GPS_Project.shp
From antonio.rocha at deimos.com.pt  Fri Oct 28 08:38:43 2011
From: antonio.rocha at deimos.com.pt (=?UTF-8?B?QW50w7NuaW8gUm9jaGE=?=)
Date: Fri Oct 28 16:07:38 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <201110281422.30330.Ralf.Suhr@itc-halle.de>
References: <4EA7CA86.8020906@deimos.com.pt>
	<CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>
	<4EAA97FD.8080506@deimos.com.pt>
	<201110281422.30330.Ralf.Suhr@itc-halle.de>
Message-ID: <4EAAA253.70703@deimos.com.pt>

Hi Ralf
Thanks for the feedback but it did not work.
I tried:
ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, 
magvar,geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp 
GPS_Project.shp
And I got:
ERROR 1: SQL Expression Parsing Error: syntax error

Even I tried:
ogr2ogr -f "esri shapefile" -sql "SELECT ele, magvar,geoidheigh, name, 
cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp
And I got:
ERROR 1: SQL Expression Parsing Error: syntax error
Any other suggestion?
Thanks
Antonio


Ralf Suhr wrote:
> ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar, 
> geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp
>
> Gr
> Ralf
>
> On Freitag 28 Oktober 2011 13:54:37 Ant?nio Rocha wrote:
>   
>> ogr2ogr -sql "SELECT [ele AS ele, time AS t, magvar AS magvar, 
>> geoidheigh AS geoidheigh, name AS name, cmt AS cmt, desc_ AS desc_, src 
>> AS src] FROM GPS_Project.shp", new.shp GPS_Project.shp
>>     
>
>
>   



__________ Information from ESET NOD32 Antivirus, version of virus signature database 6582 (20111028) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Fri Oct 28 08:50:51 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 16:20:41 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <4EAAA253.70703@deimos.com.pt>
References: <4EA7CA86.8020906@deimos.com.pt>
	<CAMKgpObuvGL_NRjzcsJXQ=UL=UproFx1stpBFDrd=j+QdPWtvA@mail.gmail.com>
	<4EAA97FD.8080506@deimos.com.pt>
	<201110281422.30330.Ralf.Suhr@itc-halle.de>
	<4EAAA253.70703@deimos.com.pt>
Message-ID: <CAMKgpOY443WV6-kdo7JfXOaoZkoEJT-EearBfqCD5aoTZh3NBw@mail.gmail.com>

Ant?nio,

The field name 'desc' is one of the SQL keywords[1]. It needs to be quoted
for OGR to process it. So the following command should work.
ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar,geoidheigh,
name, cmt, 'desc', src FROM GPS_Project" new.shp GPS_Project.shp

[1]: http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc#CompatabilityImplications

2011/10/28 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Hi Ralf
> Thanks for the feedback but it did not work.
> I tried:
> ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar,geoidheigh,
> name, cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp
>
> And I got:
> ERROR 1: SQL Expression Parsing Error: syntax error
>
> Even I tried:
> ogr2ogr -f "esri shapefile" -sql "SELECT ele, magvar,geoidheigh, name, cmt,
> desc, src FROM GPS_Project" new.shp GPS_Project.shp
>
> And I got:
> ERROR 1: SQL Expression Parsing Error: syntax error
> Any other suggestion?
> Thanks
> Antonio
>
>
>
> Ralf Suhr wrote:
>
>> ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar,
>> geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp
>>
>> Gr
>> Ralf
>>
>> On Freitag 28 Oktober 2011 13:54:37 Ant?nio Rocha wrote:
>>
>>
>>> ogr2ogr -sql "SELECT [ele AS ele, time AS t, magvar AS magvar, geoidheigh
>>> AS geoidheigh, name AS name, cmt AS cmt, desc_ AS desc_, src AS src] FROM
>>> GPS_Project.shp", new.shp GPS_Project.shp
>>>
>>>
>>
>>
>>
>>
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6582 (20111028) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/3349869f/attachment-0001.html
From Ralf.Suhr at itc-halle.de  Fri Oct 28 08:52:54 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Oct 28 16:22:49 2011
Subject: [gdal-dev] Renaming a column's name in a Shapefile
In-Reply-To: <4EAAA253.70703@deimos.com.pt>
References: <4EA7CA86.8020906@deimos.com.pt>
	<201110281422.30330.Ralf.Suhr@itc-halle.de>
	<4EAAA253.70703@deimos.com.pt>
Message-ID: <201110281452.54204.Ralf.Suhr@itc-halle.de>

Hi Ant?nio,

one underscore was missing. 

ogrinfo print the needed words:

  Layer name: GPS_Project

  ele: Real (19.15)
  time: String (80.0)
  magvar: Real (19.15)
  geoidheigh: Real (19.15)
  name: String (80.0)
  cmt: String (80.0)
  desc_: String (80.0)
  src: String (80.0)


-sql "SELECT ele, time AS t, magvar, geoidheigh, name, cmt, desc_, src FROM 
GPS_Project"

Gr
Ralf

On Freitag 28 Oktober 2011 14:38:43 Ant?nio Rocha wrote:
> Hi Ralf
> Thanks for the feedback but it did not work.
> I tried:
> ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t,
> magvar,geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp
> GPS_Project.shp
> And I got:
> ERROR 1: SQL Expression Parsing Error: syntax error
> 
> Even I tried:
> ogr2ogr -f "esri shapefile" -sql "SELECT ele, magvar,geoidheigh, name,
> cmt, desc, src FROM GPS_Project" new.shp GPS_Project.shp
> And I got:
> ERROR 1: SQL Expression Parsing Error: syntax error
> Any other suggestion?
> Thanks
> Antonio
> 
> Ralf Suhr wrote:
> > ogr2ogr -f "esri shapefile" -sql "SELECT ele, time AS t, magvar,
> > geoidheigh, name, cmt, desc, src FROM GPS_Project" new.shp
> > GPS_Project.shp
> > 
> > Gr
> > Ralf
> > 
> > On Freitag 28 Oktober 2011 13:54:37 Ant?nio Rocha wrote:
> >> ogr2ogr -sql "SELECT [ele AS ele, time AS t, magvar AS magvar,
> >> geoidheigh AS geoidheigh, name AS name, cmt AS cmt, desc_ AS desc_, src
> >> AS src] FROM GPS_Project.shp", new.shp GPS_Project.shp
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6582 (20111028) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
From chaitanya.ch at gmail.com  Fri Oct 28 09:13:13 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 16:44:19 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
Message-ID: <CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>

Kat,

Please provide the whole command you used and the output of gdalinfo on your
input file.

On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi
> I have used gdal2tile.py like this
> python gdal2tile.py -k [input] [output] and the tiels that are generated
> are nothing to do with the input image. It has changed the image by almost
> plotting random values pixels.
> Is there any limitation regarding inpu timage (e.g. it must be integer or
> something like this)?
>
> Thanks
> Kat
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/444c5ca1/attachment.html
From tom at vdputte.nl  Fri Oct 28 09:24:55 2011
From: tom at vdputte.nl (Tom van der Putte)
Date: Fri Oct 28 16:56:44 2011
Subject: [gdal-dev] empty Gtiff from Python
Message-ID: <2601.1319808295@vdputte.nl>

I
reinstalled everything, and then still something went wrong. Here I
have to tell you a little more on my goal: I was trying to convert a
slice of opendap data into netcdf. For this I use Pydap (works well). 
 I found out that using an 2D array  populated in a loop was saved as
a GTiff without a problem, but the PyDap arrays were a problem. Turned
out that Pydap returns a big-endian 32bit integer ( '>i4' ).
Converting this to 'normal' int32 resulted in a perfect image:
 instead of :
 a = dataset['klasse'][1:9,1:9,5].array[:]
 I used:
 a = dataset['klasse'][1:9,1:9,5].array[:].view(dtype = 'int32')
 a[:] = dataset['klasse'][1:9,1:9,5].array[:]
 Is this something to request a ticket for in GDAL to support? Not a
real big deal, but it takes time to convert obviously.
  Tom
 On Fri 28/10/11 11:10 , "Chris Yesson" Chris.Yesson@ioz.ac.uk sent:
 Tom,
 I have just run your code exactly as you sent it (except for output
 path), with python 2.5.2 ang gdal 1.8.1.  The ouput file appears in
 order (gdalinfo output below).  The file opens and displays normally
in
 qgis trunk v 1.8.
 - Chris
 Gdalinfo output
 Driver: GTiff/GeoTIFF
 Files: output.tif
        output.tif.aux.xml
 Size is 10, 10
 Coordinate System is:
 LOCAL_CS["arbitrary",
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
 Metadata:
   AREA_OR_POINT=Area
 Image Structure Metadata:
   INTERLEAVE=BAND
 Corner Coordinates:
 Upper Left  (    0.0,    0.0)
 Lower Left  (    0.0,   10.0)
 Upper Right (   10.0,    0.0)
 Lower Right (   10.0,   10.0)
 Center      (    5.0,    5.0)
 Band 1 Block=10x10 Type=Byte, ColorInterp=Gray
   Min=1.000 Max=1.000
   Minimum=1.000, Maximum=1.000, Mean=1.000, StdDev=0.000
   Metadata:
     STATISTICS_MINIMUM=1
     STATISTICS_MAXIMUM=1
     STATISTICS_MEAN=1
     STATISTICS_STDDEV=0
 Date: Fri, 28 Oct 2011 10:23:04 +0200
 From: Tom van der Putte 
 Subject: [gdal-dev] empty Gtiff from Python
 To: 
 Message-ID: 
 Content-Type: text/plain; charset="utf-8"
 Hi
 List,
  I'm trying to save a numpy array to a GTiff, which should be quite
 straightforward, considering all the examples available on the web.
 However, I get an file that is not readable by Qgis, is regarded by
 ArcMap to have only 0 and gdalinfo displays nothing on the values.
  I start with a ndarray, dtype = int32, shape = ( 10,10). It has
 integer values between 1 and 10. The code is as follows:
  import numpy as np
  from osgeo import gdal
  from osgeo import osr
  #np array
  a = np.ones((10,10))
  #coord-system
  sr_str = 'LOCAL_CS["arbitrary"]'
  sr = osr.SpatialReference( sr_str )
  #driver
  driver = gdal.GetDriverByName("GTiff")
  #dataset
  ds = driver.Create("D:tempoutput.tif", 10, 10, 1, gdal.GDT_Byte)
  ds.SetProjection( sr_str )
  ds.SetGeoTransform((0, 1, 0,0, 0,1))
  #write and close
  ds.GetRasterBand(1).WriteArray(a)
  ds = None
  The corresponding gdalinfo is:
  *********
  Raster dataset parameters:
    Projection:
 LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
    RasterCount: 1
    RasterSize (10,10)
  Using driver GeoTIFF
    Metadata:
      0:  AREA_OR_POINT=Area
    Image Structure Metadata:
      0:  INTERLEAVE=BAND
  Corner Coordinates:
    Upper Left (0, 0)
    Lower Left (0, 10)
    Upper Right (10, 0)
    Lower Right (10, 10)
    Center (5, 5)
  Coordinate System is:
  LOCAL_CS["arbitrary",
      UNIT["metre",1,
          AUTHORITY["EPSG","9001"]]]
  Band 1 :
     DataType: Byte
     ColorInterpretation: Gray
     Description:
     Size (10,10)
     BlockSize (10,10)
  *********
  I have tried both version 1.6.3 (I'm trying to make a Qgis plugin,
 and thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds
=
 driver.Create("D:tempoutput.tif", 10, 10, 1, gdal.GDT_Int32), but
 that didn't make much difference.
  I tried to make a Surfer grid (GSBG), and this somewhat worked: it
 gave a nice picture, but the values were off the charts.
  Any clues as to what I'm missing here? Cheers,
  Tom van der Putte
 -------------- next part --------------
 An HTML attachment was scrubbed...
 URL:

http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/d4d82f44/
 attachment-0001.html
 ------------------------------
 _______________________________________________
 gdal-dev mailing list
 http://lists.osgeo.org/mailman/listinfo/gdal-dev
 End of gdal-dev Digest, Vol 89, Issue 71
 ****************************************
 This message has been scanned for viruses by MailControl -
 www.mailcontrol.com
 Click
 https://www.mailcontrol.com/sr/wQw0zmjPoHdJTZGyOCrrhg==
 oTJhgA1yNPXUJ0FMnJ7X3MJaL!eAyER2lygvJyt6ermNw==  to report this
email as
 spam.
 The Zoological Society of London is incorporated by Royal Charter
 Principal Office England. Company Number RC000749
 Registered address: 
 Regent's Park, London, England NW1 4RY
 Registered Charity in England and Wales no. 208728 

_________________________________________________________________________
 This e-mail has been sent in confidence to the named addressee(s).
 If you are not the intended recipient, you must not disclose or
distribute
 it in any form, and you are asked to contact the sender immediately.
 Views or opinions expressed in this communication may not be those
 of The Zoological Society of London and, therefore, The Zoological
 Society of London does not accept legal responsibility for the
contents
 of this message. The recipient(s) must be aware that e-mail is not a
 secure communication medium and that the contents of this mail may
 have been altered by a third party in transit.
 If you have any issues regarding this mail please contact:
 .

___________________________________________________________________________
 This message has been scanned for viruses by MailControl, a service
from BlackSpider Technologies.
 

Links:
------
[5] http://www.mailcontrol.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/1c4fb05f/attachment.html
From katrineggert1980 at gmail.com  Fri Oct 28 10:04:21 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Fri Oct 28 17:38:01 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
	<CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
Message-ID: <CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>

Hi
Gdalinfo reproject.tif

Driver: GTiff/GeoTIFF
Files: reprojected.tif
Size is 3700, 3500
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (34.001088235352334,-19.571332568602660)
Pixel Size = (0.000204639356437,-0.000204639356437)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  34.0010882, -19.5713326) ( 34d 0' 3.92"E, 19d34'16.80"S)
Lower Left  (  34.0010882, -20.2998487) ( 34d 0' 3.92"E, 20d17'59.46"S)
Upper Right (  34.7715554, -19.5713326) ( 34d46'17.60"E, 19d34'16.80"S)
Lower Right (  34.7715554, -20.2998487) ( 34d46'17.60"E, 20d17'59.46"S)
Center      (  34.3863218, -19.9355906) ( 34d23'10.76"E, 19d56' 8.13"S)
Band 1 Block=3765x1 Type=Float32, ColorInterp=Gray

and gdal2tile
>python gdal2tiles.py -k /home/user/reprojected.tif  /home/user/gdal2tile





2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Kat,
>
> Please provide the whole command you used and the output of gdalinfo on
> your input file.
>
> On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert <katrineggert1980@gmail.com
> > wrote:
>
>> Hi
>> I have used gdal2tile.py like this
>> python gdal2tile.py -k [input] [output] and the tiels that are generated
>> are nothing to do with the input image. It has changed the image by almost
>> plotting random values pixels.
>> Is there any limitation regarding inpu timage (e.g. it must be integer or
>> something like this)?
>>
>> Thanks
>> Kat
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/93175a38/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Oct 28 10:21:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 17:56:41 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
	<CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
	<CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>
Message-ID: <CAMKgpOYQniN7oF_Gs6GgNS3ZPV1uqBmXxEaJ8Zc=CQ7nGtnzeg@mail.gmail.com>

Kat,

Your input image is of 32-bit float type. Whereas KML tiles are supposed to
be png format that should be viewable on browsers.
The corrupted pixels are a result of clipping the float valued pixels to the
range [0,255].

I suggest scaling the pixel values to byte type using the -scale option in
gdal_translate.

On Fri, Oct 28, 2011 at 7:34 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi
> Gdalinfo reproject.tif
>
> Driver: GTiff/GeoTIFF
> Files: reprojected.tif
> Size is 3700, 3500
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (34.001088235352334,-19.571332568602660)
> Pixel Size = (0.000204639356437,-0.000204639356437)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  34.0010882, -19.5713326) ( 34d 0' 3.92"E, 19d34'16.80"S)
> Lower Left  (  34.0010882, -20.2998487) ( 34d 0' 3.92"E, 20d17'59.46"S)
> Upper Right (  34.7715554, -19.5713326) ( 34d46'17.60"E, 19d34'16.80"S)
> Lower Right (  34.7715554, -20.2998487) ( 34d46'17.60"E, 20d17'59.46"S)
> Center      (  34.3863218, -19.9355906) ( 34d23'10.76"E, 19d56' 8.13"S)
> Band 1 Block=3765x1 Type=Float32, ColorInterp=Gray
>
> and gdal2tile
> >python gdal2tiles.py -k /home/user/reprojected.tif  /home/user/gdal2tile
>
>
>
>
>
>
> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> Kat,
>>
>> Please provide the whole command you used and the output of gdalinfo on
>> your input file.
>>
>> On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert <
>> katrineggert1980@gmail.com> wrote:
>>
>>> Hi
>>> I have used gdal2tile.py like this
>>> python gdal2tile.py -k [input] [output] and the tiels that are generated
>>> are nothing to do with the input image. It has changed the image by almost
>>> plotting random values pixels.
>>> Is there any limitation regarding inpu timage (e.g. it must be integer or
>>> something like this)?
>>>
>>> Thanks
>>> Kat
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/7f5412bf/attachment.html
From guillaume.huby.lists at gmail.com  Fri Oct 28 11:29:01 2011
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Fri Oct 28 19:07:03 2011
Subject: [gdal-dev] Trouble using gdal_rasterize
Message-ID: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>

Hello,

I am using Gdal 1.8.1 (gdalinfo --version -> GDAL 1.8.1, released
2011/07/09).

I used gdal_rasterize to burn some tif file with values from a shapefile:

> gdal_rasterize -a ID -l vector_test vector_test.shp test_out.tif
>

My tif file contains a unique layer of type UInt32.

The shape files contains an ID column with four features with ID 28021201,
28021202, 28021203 and 28021204.

But test_out.tif is not burned correctly it has :
- 28021200 where 28021201 is expected;
- 28021204 where 28021203 is expected;
- others values are OK.

I can provide sample files if needed.

Is there something I missuse in my command line or is it a normal issue ?

Thanks for your replies.

Best regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/446733d3/attachment.html
From chaitanya.ch at gmail.com  Fri Oct 28 11:32:20 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 19:10:36 2011
Subject: [gdal-dev] Trouble using gdal_rasterize
In-Reply-To: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>
References: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>
Message-ID: <CAMKgpOaBwRE=8Tq4ZrENZt3-kQwpea2KggnoHN67sjUe6vQRtg@mail.gmail.com>

Guillaume,

Please do provide the sample shapefile.

On Fri, Oct 28, 2011 at 8:59 PM, guillaume huby <
guillaume.huby.lists@gmail.com> wrote:

> Hello,
>
> I am using Gdal 1.8.1 (gdalinfo --version -> GDAL 1.8.1, released
> 2011/07/09).
>
> I used gdal_rasterize to burn some tif file with values from a shapefile:
>
>> gdal_rasterize -a ID -l vector_test vector_test.shp test_out.tif
>>
>
> My tif file contains a unique layer of type UInt32.
>
> The shape files contains an ID column with four features with ID 28021201,
> 28021202, 28021203 and 28021204.
>
> But test_out.tif is not burned correctly it has :
> - 28021200 where 28021201 is expected;
> - 28021204 where 28021203 is expected;
> - others values are OK.
>
> I can provide sample files if needed.
>
> Is there something I missuse in my command line or is it a normal issue ?
>
> Thanks for your replies.
>
> Best regards,
> Guillaume.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/a882924a/attachment.html
From joolek.o at gmail.com  Fri Oct 28 12:13:48 2011
From: joolek.o at gmail.com (joolek)
Date: Fri Oct 28 19:54:08 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <4EAA657D.5010605@gmx.eu>
References: <CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
	<CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
	<4EAA5114.4050908@gmx.eu>
	<CAMKgpOYDR3VS7SEQaEx-nqz5B-kwDWzMwp3XyY+6P_s1yZ8J_Q@mail.gmail.com>
	<4EAA657D.5010605@gmx.eu>
Message-ID: <1319818428658-6940762.post@n2.nabble.com>

Seriously guys... I do admire your knowledge!!
Still can't get it to work :)

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6940762.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Oct 28 12:21:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 28 20:01:58 2011
Subject: [gdal-dev] Trouble using gdal_rasterize
In-Reply-To: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>
References: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>
Message-ID: <1319818868.4eaad674c4efe@webmail.free.fr>

Selon guillaume huby <guillaume.huby.lists@gmail.com>:

> Hello,
>
> I am using Gdal 1.8.1 (gdalinfo --version -> GDAL 1.8.1, released
> 2011/07/09).
>
> I used gdal_rasterize to burn some tif file with values from a shapefile:
>
> > gdal_rasterize -a ID -l vector_test vector_test.shp test_out.tif
> >
>
> My tif file contains a unique layer of type UInt32.
>
> The shape files contains an ID column with four features with ID 28021201,
> 28021202, 28021203 and 28021204.
>
> But test_out.tif is not burned correctly it has :
> - 28021200 where 28021201 is expected;
> - 28021204 where 28021203 is expected;
> - others values are OK.
>
> I can provide sample files if needed.
>
> Is there something I missuse in my command line or is it a normal issue ?

This sounds as another symptom of the precision loss issue that has been fixed
for the ticket http://trac.osgeo.org/gdal/ticket/4292

Fixed in GDAL 1.9.0dev

>
> Thanks for your replies.
>
> Best regards,
> Guillaume.
>


From chaitanya.ch at gmail.com  Fri Oct 28 13:56:42 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 21:42:26 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <1319818428658-6940762.post@n2.nabble.com>
References: <CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<1319711102114-6935758.post@n2.nabble.com>
	<CAMKgpOYA-ttOtTb0wOo+etmefhX8bay84y5LR=L3d3D4kTSprw@mail.gmail.com>
	<4EAA5114.4050908@gmx.eu>
	<CAMKgpOYDR3VS7SEQaEx-nqz5B-kwDWzMwp3XyY+6P_s1yZ8J_Q@mail.gmail.com>
	<4EAA657D.5010605@gmx.eu>
	<1319818428658-6940762.post@n2.nabble.com>
Message-ID: <CAMKgpOZkYCkR9JzzdAvja6UW7LNKSieFA9p-3J_zGHxKcZuSOw@mail.gmail.com>

Try it with one file and list all the error messages.

On Fri, Oct 28, 2011 at 9:43 PM, joolek <joolek.o@gmail.com> wrote:

> Seriously guys... I do admire your knowledge!!
> Still can't get it to work :)
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/254-into-255-tp6931988p6940762.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/a4bfe311/attachment.html
From peifer at gmx.eu  Fri Oct 28 13:58:25 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 28 21:43:55 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
Message-ID: <4EAAED41.50206@gmx.eu>

On 27/10/2011 10:58, Chaitanya kumar CH wrote:
>
> A vrt file can implement your requirements. It can create a 'lookup
> table' to translate your pixel values...

Chaitanya,

I just tried to translate an Int32 GeoTIFF with pixel values 111..523 
into a byte-type GeoTIFF with values 1..44, using the LUT as indicated 
below.

I noted that in the resulting GeoTIFF, the previous NODATA areas have 
now a pixel value of 1. Is this expected behaviour or rather some sort 
of "over-extrapolation" of my lookup table (as I would assume)  ?

Thanks in advance, Hermann



<VRTDataset rasterXSize="8786" rasterYSize="6443">
...
     <VRTRasterBand dataType="Int32" band="1">
     <NoDataValue>0.00000000000000E+00</NoDataValue>
     <ColorInterp>Gray</ColorInterp>
     <ComplexSource>
       <SourceFilename relativeToVRT="1">ch00_form.tif</SourceFilename>
       <SourceBand>1</SourceBand>
       <SourceProperties RasterXSize="8786" RasterYSize="6443" 
DataType="Int32" BlockXSize="256" BlockYSize="256" />
       <SrcRect xOff="0" yOff="0" xSize="8786" ySize="6443" />
       <DstRect xOff="0" yOff="0" xSize="8786" ySize="6443" />
       <LUT>111:1,112:2,121:3,122:4,123:5,124:6,131:7,132:8,...</LUT>
     </ComplexSource>
   </VRTRasterBand>
</VRTDataset>
From chaitanya.ch at gmail.com  Fri Oct 28 14:02:09 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 21:48:11 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <4EAAED41.50206@gmx.eu>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<4EAAED41.50206@gmx.eu>
Message-ID: <CAMKgpOayOG2=6OD9VGrPLuA5PqwY-iLE03Tc_=eG0O-HUCfKbQ@mail.gmail.com>

What was the nodata value in the original?

On Fri, Oct 28, 2011 at 11:28 PM, Hermann Peifer <peifer@gmx.eu> wrote:

> On 27/10/2011 10:58, Chaitanya kumar CH wrote:
>
>>
>> A vrt file can implement your requirements. It can create a 'lookup
>> table' to translate your pixel values...
>>
>
> Chaitanya,
>
> I just tried to translate an Int32 GeoTIFF with pixel values 111..523 into
> a byte-type GeoTIFF with values 1..44, using the LUT as indicated below.
>
> I noted that in the resulting GeoTIFF, the previous NODATA areas have now a
> pixel value of 1. Is this expected behaviour or rather some sort of
> "over-extrapolation" of my lookup table (as I would assume)  ?
>
> Thanks in advance, Hermann
>
>
>
> <VRTDataset rasterXSize="8786" rasterYSize="6443">
> ...
>    <VRTRasterBand dataType="Int32" band="1">
>    <NoDataValue>0.**00000000000000E+00</**NoDataValue>
>    <ColorInterp>Gray</**ColorInterp>
>    <ComplexSource>
>      <SourceFilename relativeToVRT="1">ch00_form.**tif</SourceFilename>
>      <SourceBand>1</SourceBand>
>      <SourceProperties RasterXSize="8786" RasterYSize="6443"
> DataType="Int32" BlockXSize="256" BlockYSize="256" />
>      <SrcRect xOff="0" yOff="0" xSize="8786" ySize="6443" />
>      <DstRect xOff="0" yOff="0" xSize="8786" ySize="6443" />
>      <LUT>111:1,112:2,121:3,122:4,**123:5,124:6,131:7,132:8,...</**LUT>
>    </ComplexSource>
>  </VRTRasterBand>
> </VRTDataset>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/04845793/attachment.html
From peifer at gmx.eu  Fri Oct 28 14:03:53 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 28 21:49:41 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOayOG2=6OD9VGrPLuA5PqwY-iLE03Tc_=eG0O-HUCfKbQ@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<4EAAED41.50206@gmx.eu>
	<CAMKgpOayOG2=6OD9VGrPLuA5PqwY-iLE03Tc_=eG0O-HUCfKbQ@mail.gmail.com>
Message-ID: <4EAAEE89.2000501@gmx.eu>

On 28/10/2011 20:02, Chaitanya kumar CH wrote:
> What was the nodata value in the original?
>

     <NoDataValue>0.00000000000000E+00</NoDataValue>

Hermann
From chaitanya.ch at gmail.com  Fri Oct 28 14:08:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct 28 21:54:41 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <4EAAEE89.2000501@gmx.eu>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<4EAAED41.50206@gmx.eu>
	<CAMKgpOayOG2=6OD9VGrPLuA5PqwY-iLE03Tc_=eG0O-HUCfKbQ@mail.gmail.com>
	<4EAAEE89.2000501@gmx.eu>
Message-ID: <CAMKgpOaP-s5+bCK7jR1pm7ovd-zaYsZKp8FgJrmF_ktikcav=g@mail.gmail.com>

I meant the nodata value of ch00_form.tif

On Fri, Oct 28, 2011 at 11:33 PM, Hermann Peifer <peifer@gmx.eu> wrote:

> On 28/10/2011 20:02, Chaitanya kumar CH wrote:
>
>> What was the nodata value in the original?
>>
>>
>    <NoDataValue>0.**00000000000000E+00</**NoDataValue>
>
> Hermann
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111028/3bfe09e8/attachment.html
From peifer at gmx.eu  Fri Oct 28 14:16:36 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 28 22:03:13 2011
Subject: [gdal-dev] Re: 254 into 255
In-Reply-To: <CAMKgpOaP-s5+bCK7jR1pm7ovd-zaYsZKp8FgJrmF_ktikcav=g@mail.gmail.com>
References: <1319619450332-6931988.post@n2.nabble.com>
	<CAMKgpOZbYAH_GfWmOf=fm5o_3Hc5ZV2NhiCT5GWKShd9XomxLw@mail.gmail.com>
	<1319645027220-6933182.post@n2.nabble.com>
	<CAMKgpOZZU03CnvoRV6F-4YoY9iRC9r5nFE6paqAjuYLyjT1TGg@mail.gmail.com>
	<52804E03-A34A-42C1-AA92-EC69F7A040E6@gmail.com>
	<CAMKgpOa4f=T4MWqiw4Z6zaygJCDWJtMM6prqXytn-kUZLRWT=A@mail.gmail.com>
	<4EAAED41.50206@gmx.eu>
	<CAMKgpOayOG2=6OD9VGrPLuA5PqwY-iLE03Tc_=eG0O-HUCfKbQ@mail.gmail.com>
	<4EAAEE89.2000501@gmx.eu>
	<CAMKgpOaP-s5+bCK7jR1pm7ovd-zaYsZKp8FgJrmF_ktikcav=g@mail.gmail.com>
Message-ID: <4EAAF184.9090101@gmx.eu>

On 28/10/2011 20:08, Chaitanya kumar CH wrote:
> I meant the nodata value of ch00_form.tif
>

This *is* the nodata value of ch00_form.tif.

The vrt which I posted has been generated through a simple:
$ gdal_translate -of vrt ch00_form.tif ch00_form.vrt

The only modifications I made was to change SimpleSource into 
ComplexSource, and to add the LUT.

Hermann

From hobu.inc at gmail.com  Fri Oct 28 16:53:12 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Sat Oct 29 00:49:04 2011
Subject: [gdal-dev] Motion: Approve RFC 37: User context data in
	CPLErrorHandler callbacks
In-Reply-To: <CA+YzLBfb7ux8anbmD4HEqopVnt+jOtT3AcGj3_JYm66-EYrmyA@mail.gmail.com>
References: <3F3FBCE0-61E9-4853-8228-5A7116A0A12D@gmail.com>
	<7D458550-D87F-4B2E-AB4E-CE0206820F4C@gmail.com>
	<CA+YzLBfb7ux8anbmD4HEqopVnt+jOtT3AcGj3_JYm66-EYrmyA@mail.gmail.com>
Message-ID: <05D1E5E3-3529-41DA-80D7-30EA3E49C7D6@gmail.com>


On Oct 26, 2011, at 2:45 PM, Frank Warmerdam wrote:

> On Wed, Oct 26, 2011 at 12:27 PM, Howard Butler <hobu.inc@gmail.com> wrote:
>> Folks,
>> 
>> Motion: To approve RFC 37: User context data in CPLErrorHandler callbacks
>> 
>> http://trac.osgeo.org/gdal/wiki/rfc37_cplerror_userdata

With +1's from Daniel, Tamas, Even, Frank, and myself, I declare this motion and RFC passed.  

I will commit the patch to implement this to trunk.

Howard
From danhomerick at gmail.com  Sun Oct 30 13:24:09 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Sun Oct 30 23:46:32 2011
Subject: [gdal-dev] Patch submission & development questions
Message-ID: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>

Gdal-dev,

I have a couple questions about the patch submission process. The main
one being, "What is it?" I assume that patches are best submitted
through a Trac ticket. Should we post here for discussion before
opening a ticket, if the issue we'd like to patch doesn't have an
existing ticket open? Do most changes go through an "official" RFC
phase, or just the addition of larger features?

There are a couple things I'd like to submit patches for. The first
addresses a question I had earlier about the OGR MS SQL Sever
(mssqlspatial), and its default tendency to assume that any "image"
column must be a WKB geometry column. Since the expected geometry
storage type is specified in the connection string (i.e. native, wkb,
or wkt, defaulting to native), the patch utilizes that type
information when auto-selecting the geometry column. Like the original
code, the patch does not try to guess which is the geometry column
when WKT is used.

The other thing I'd like to submit a patch for is the Visual Studio
2010 solution / project file. Before I do any work on it, I'd like to
know more about how it's maintained, though. Specifically, is it
something that is intended to be auto-generated periodically (either
directly, or by converting a 2008 project), or is it being maintained
by hand? The main changes I'd want to make are adding all the missing
source and header files, adding header paths, and any other tweaks
required to get Intellisense to work correctly.

A final question I have is, "What is the testing process?" As part of
my work, I'll be (indirectly) writing tests for the patch(es) I
submit, but I'll be writing those tests with an eye towards how we'll
be using the classes. If GDAL has a more formal testing procedure,
I'll be happy to write additional tests for whatever testing framework
is being used.

Cheers,
 - Dan
From even.rouault at mines-paris.org  Sun Oct 30 13:54:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 31 00:18:51 2011
Subject: [gdal-dev] Patch submission & development questions
In-Reply-To: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>
References: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>
Message-ID: <1319997278.4ead8f5ed3f13@webmail.free.fr>

Selon Dan Homerick <danhomerick@gmail.com>:

> Gdal-dev,
>
> I have a couple questions about the patch submission process. The main
> one being, "What is it?" I assume that patches are best submitted
> through a Trac ticket. Should we post here for discussion before
> opening a ticket, if the issue we'd like to patch doesn't have an
> existing ticket open?

Yes, that might be useful to make a notice here so that the patch gets attention
more easily.

> Do most changes go through an "official" RFC
> phase, or just the addition of larger features?

RFC are generally used for the addition of new API to GDAL/OGR, or big changes
in subsystems. Changes in drivers that keep the API can be done without formal
RFC

>
> There are a couple things I'd like to submit patches for. The first
> addresses a question I had earlier about the OGR MS SQL Sever
> (mssqlspatial), and its default tendency to assume that any "image"
> column must be a WKB geometry column. Since the expected geometry
> storage type is specified in the connection string (i.e. native, wkb,
> or wkt, defaulting to native), the patch utilizes that type
> information when auto-selecting the geometry column. Like the original
> code, the patch does not try to guess which is the geometry column
> when WKT is used.

You might want to discuss that with Tamas Szerekes, the author of the driver.

>
> The other thing I'd like to submit a patch for is the Visual Studio
> 2010 solution / project file. Before I do any work on it, I'd like to
> know more about how it's maintained, though. Specifically, is it
> something that is intended to be auto-generated periodically (either
> directly, or by converting a 2008 project), or is it being maintained
> by hand? The main changes I'd want to make are adding all the missing
> source and header files, adding header paths, and any other tweaks
> required to get Intellisense to work correctly.

There's makegdal_gen.bat that is used from time to time to regenerate the MSVC
project files. I suppose we should run it before release, but I don't see it
mentionned in HOWTO-RELEASE

>
> A final question I have is, "What is the testing process?" As part of
> my work, I'll be (indirectly) writing tests for the patch(es) I
> submit, but I'll be writing those tests with an eye towards how we'll
> be using the classes. If GDAL has a more formal testing procedure,
> I'll be happy to write additional tests for whatever testing framework
> is being used.

We have a regression test suite here : http://svn.osgeo.org/gdal/trunk/autotest/

You need to build the GDAL python bindings to be able to run it.

>
> Cheers,
>  - Dan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Sun Oct 30 13:58:08 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Mon Oct 31 00:22:22 2011
Subject: [gdal-dev] Patch submission & development questions
In-Reply-To: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>
References: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>
Message-ID: <CABUeae-Qq3Tmd1HmOnzJdEORSOWVrjV3XCLT97pVAiScLxMXpw@mail.gmail.com>

On 30 October 2011 17:24, Dan Homerick <danhomerick@gmail.com> wrote:
> I have a couple questions about the patch submission process. The main
> one being, "What is it?"

I know it this way:

- You create a patch
- You submit new ticket with your patch attached
- Patch is commented in the ticket
- Decision is made, patch accepted or rejected

> I assume that patches are best submitted
> through a Trac ticket. Should we post here for discussion before
> opening a ticket, if the issue we'd like to patch doesn't have an
> existing ticket open?

IMHO, new ticket + discussion as comments to ticket.

> Do most changes go through an "official" RFC
> phase, or just the addition of larger features?

"Significant changes to the main development version should be discussed
on the gdal-dev list before you make them, and larger changes will
require a RFC approved by the PSC."

http://trac.osgeo.org/gdal/wiki/rfc3_commiters

> There are a couple things I'd like to submit patches for.

I would create new tickets, one per subject/patch, and discuss it there.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From iainmalcolm1 at googlemail.com  Sun Oct 30 15:16:31 2011
From: iainmalcolm1 at googlemail.com (Iain)
Date: Mon Oct 31 01:44:56 2011
Subject: [gdal-dev] Using a gdal generated tiff to generate DEM tiles -
 losing registration
Message-ID: <1320002191096-6946188.post@n2.nabble.com>

I'm building a set of 'tiles' that actually just contain dem data to drive a
3d geograpic tool on android (using opengl es2.0)

primarily for the uk (cos that's where I am) but hopefully in a way that
works anywhere.

I've picked up the srtm data and used gdal translate and gdawarp as
described in the  http://wiki.openstreetmap.org/wiki/HikingBikingMaps
openstreetmao wiki here , and used these to add height colouring and contour
lines to mapnik generated tiles and this all works well and appears to be
OK.

To get the 'height' tiles I'm using the same giant tiff that I use as input
to hill shade and colour-relief to a little home brew app that uses the gdal
library to fetch out a tilesworth of data and then scales it and writes a
tile file (using the same tile naming scheme as mapnik / tms.  But the tiles
I generate appear to be out about 1/4 degree too far north (look OK east
west) over the whole area.  (the mapnik generated tiles, using background
from hill shade + colour-relief and data from openstreetmap in a postgis
database are all fine and match exactly the position of tiles from the
openstreetmap server.

I am linearly scaling the raster info using the geo info from the giant tiff
and the  http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames code here
to translate between tile numbers and lon/lat.

Is linear scaling the wrong way to do this?  (but if so I would expect the
error to change as I move north - south).

I am considering using gdal2tiles to generate out the tiles, (I think I can
easily tweak the settings to generate 16bit tiffs, and then reprocess these
to fix the filenames and reformat the data ready for the android device),
but this is a rather long way around to get there.

Anyone know why this all goes awry?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-a-gdal-generated-tiff-to-generate-DEM-tiles-losing-registration-tp6946188p6946188.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Oct 31 00:56:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 31 11:56:43 2011
Subject: [gdal-dev] Using a gdal generated tiff to generate DEM tiles -
	losing registration
In-Reply-To: <1320002191096-6946188.post@n2.nabble.com>
References: <1320002191096-6946188.post@n2.nabble.com>
Message-ID: <CAMKgpOa7trS+=HQPk5DdK6q0gKesi17tXTwMnQVXrW9_DobQhw@mail.gmail.com>

Iain,

Can you provide the code?

On Mon, Oct 31, 2011 at 12:46 AM, Iain <iainmalcolm1@googlemail.com> wrote:

> I'm building a set of 'tiles' that actually just contain dem data to drive
> a
> 3d geograpic tool on android (using opengl es2.0)
>
> primarily for the uk (cos that's where I am) but hopefully in a way that
> works anywhere.
>
> I've picked up the srtm data and used gdal translate and gdawarp as
> described in the  http://wiki.openstreetmap.org/wiki/HikingBikingMaps
> openstreetmao wiki here , and used these to add height colouring and
> contour
> lines to mapnik generated tiles and this all works well and appears to be
> OK.
>
> To get the 'height' tiles I'm using the same giant tiff that I use as input
> to hill shade and colour-relief to a little home brew app that uses the
> gdal
> library to fetch out a tilesworth of data and then scales it and writes a
> tile file (using the same tile naming scheme as mapnik / tms.  But the
> tiles
> I generate appear to be out about 1/4 degree too far north (look OK east
> west) over the whole area.  (the mapnik generated tiles, using background
> from hill shade + colour-relief and data from openstreetmap in a postgis
> database are all fine and match exactly the position of tiles from the
> openstreetmap server.
>
> I am linearly scaling the raster info using the geo info from the giant
> tiff
> and the  http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames code here
> to translate between tile numbers and lon/lat.
>
> Is linear scaling the wrong way to do this?  (but if so I would expect the
> error to change as I move north - south).
>
> I am considering using gdal2tiles to generate out the tiles, (I think I can
> easily tweak the settings to generate 16bit tiffs, and then reprocess these
> to fix the filenames and reformat the data ready for the android device),
> but this is a rather long way around to get there.
>
> Anyone know why this all goes awry?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Using-a-gdal-generated-tiff-to-generate-DEM-tiles-losing-registration-tp6946188p6946188.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/e67c3497/attachment.html
From peifer at gmx.eu  Mon Oct 31 03:55:21 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct 31 15:05:21 2011
Subject: [gdal-dev] Re: Using a gdal generated tiff to generate DEM tiles -
	losing registration
In-Reply-To: <1320002191096-6946188.post@n2.nabble.com>
References: <1320002191096-6946188.post@n2.nabble.com>
Message-ID: <4EAE5469.9000701@gmx.eu>

On 30/10/2011 20:16, Iain wrote:
> But the tiles
> I generate appear to be out about 1/4 degree too far north (look OK east
> west) over the whole area.  (the mapnik generated tiles, using background
> from hill shade + colour-relief and data from openstreetmap in a postgis
> database are all fine and match exactly the position of tiles from the
> openstreetmap server.


- OSM tiles come in a *Spherical* Mercator projection
- what you observe seems to be a latitude-only shift

This type of "datum" shift often occurs when projecting from a sphere to 
an ellpsoid or vice-versa, although 1/4 degree (~28 km) sounds like 
quite a lot.

Here 2 links to recent gdal-dev postings on this issue:

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Ogr2ogr-projection-problem-features-are-shifted-12-miles-to-the-north-How-do-I-fix-it-td6779672.html

http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Ogr2ogr-datum-shift-td6795580.html

From chaitanya.ch at gmail.com  Mon Oct 31 05:30:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 31 16:46:01 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAGR7mtDBoccdbZKmDSP+Nkz2HCej0Ka9=B16pX0HrqAweQWCXw@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
	<CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
	<CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>
	<CAMKgpOYQniN7oF_Gs6GgNS3ZPV1uqBmXxEaJ8Zc=CQ7nGtnzeg@mail.gmail.com>
	<CAGR7mtDBoccdbZKmDSP+Nkz2HCej0Ka9=B16pX0HrqAweQWCXw@mail.gmail.com>
Message-ID: <CAMKgpOYw0zgtoD-7b+iyaEf8qu0Vca+17g780zvAgSqOY6qjHQ@mail.gmail.com>

Kat,

Do you want your browser to load the whole image in your window as a single
image? If so, you need to be running a WMS server. If not, please explain.

On Mon, Oct 31, 2011 at 2:35 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi
> THanks for the feedback I will try it right now.
> Just one question: Is it possible to generate all image in one tile?
> instead of multiple tiles? Or even decreasing "image quality"?
> Thanks
>
>
>
> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> Kat,
>>
>> Your input image is of 32-bit float type. Whereas KML tiles are supposed
>> to be png format that should be viewable on browsers.
>> The corrupted pixels are a result of clipping the float valued pixels to
>> the range [0,255].
>>
>> I suggest scaling the pixel values to byte type using the -scale option
>> in gdal_translate.
>>
>>
>> On Fri, Oct 28, 2011 at 7:34 PM, katrin eggert <
>> katrineggert1980@gmail.com> wrote:
>>
>>> Hi
>>> Gdalinfo reproject.tif
>>>
>>> Driver: GTiff/GeoTIFF
>>> Files: reprojected.tif
>>> Size is 3700, 3500
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>>     DATUM["WGS_1984",
>>>         SPHEROID["WGS 84",6378137,298.257223563,
>>>             AUTHORITY["EPSG","7030"]],
>>>         AUTHORITY["EPSG","6326"]],
>>>     PRIMEM["Greenwich",0],
>>>     UNIT["degree",0.0174532925199433],
>>>     AUTHORITY["EPSG","4326"]]
>>> Origin = (34.001088235352334,-19.571332568602660)
>>> Pixel Size = (0.000204639356437,-0.000204639356437)
>>> Metadata:
>>>   AREA_OR_POINT=Area
>>> Image Structure Metadata:
>>>   INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (  34.0010882, -19.5713326) ( 34d 0' 3.92"E, 19d34'16.80"S)
>>> Lower Left  (  34.0010882, -20.2998487) ( 34d 0' 3.92"E, 20d17'59.46"S)
>>> Upper Right (  34.7715554, -19.5713326) ( 34d46'17.60"E, 19d34'16.80"S)
>>> Lower Right (  34.7715554, -20.2998487) ( 34d46'17.60"E, 20d17'59.46"S)
>>> Center      (  34.3863218, -19.9355906) ( 34d23'10.76"E, 19d56' 8.13"S)
>>> Band 1 Block=3765x1 Type=Float32, ColorInterp=Gray
>>>
>>> and gdal2tile
>>> >python gdal2tiles.py -k /home/user/reprojected.tif  /home/user/gdal2tile
>>>
>>>
>>>
>>>
>>>
>>>
>>> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>
>>>> Kat,
>>>>
>>>> Please provide the whole command you used and the output of gdalinfo on
>>>> your input file.
>>>>
>>>> On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert <
>>>> katrineggert1980@gmail.com> wrote:
>>>>
>>>>> Hi
>>>>> I have used gdal2tile.py like this
>>>>> python gdal2tile.py -k [input] [output] and the tiels that are
>>>>> generated are nothing to do with the input image. It has changed the image
>>>>> by almost plotting random values pixels.
>>>>> Is there any limitation regarding inpu timage (e.g. it must be integer
>>>>> or something like this)?
>>>>>
>>>>> Thanks
>>>>> Kat
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/2b6acbba/attachment.html
From iainmalcolm1 at googlemail.com  Mon Oct 31 06:29:05 2011
From: iainmalcolm1 at googlemail.com (Iain)
Date: Mon Oct 31 17:47:35 2011
Subject: [gdal-dev] Re: Using a gdal generated tiff to generate DEM tiles -
 losing registration
In-Reply-To: <CAMKgpOa7trS+=HQPk5DdK6q0gKesi17tXTwMnQVXrW9_DobQhw@mail.gmail.com>
References: <1320002191096-6946188.post@n2.nabble.com>
	<CAMKgpOa7trS+=HQPk5DdK6q0gKesi17tXTwMnQVXrW9_DobQhw@mail.gmail.com>
Message-ID: <1320056945347-6947649.post@n2.nabble.com>

http://osgeo-org.1803224.n2.nabble.com/file/n6947649/tilersrc.tar.gz
tilersrc.tar.gz 

Here's the source. It's a bit of lashup, but the principle bits that must
underly the problem are the tile and boundingbox classes (both pretty small)
and the pixoffsets and readtile functions in the gdshelper class.

The input file I'm using starts from srtm files through this chain:

gdal_fillnodata.py   #just to get cleaner data 

gdal_merge.py     # to generate 1 big file

gdal_translate -of GTiff -co "TILED=YES" -a_srs "+proj=latlong" brisles.tif
brislestrans.tif

gdalwarp -of GTiff -co "TILED=YES" -srcnodata 32767 -t_srs "+proj=merc
+ellps=sphere +R=6378137 +a=6378137 +units=m" -rcs -order 3 -tr 30 30 -multi
brislestrans.tif brisleswarped.tif

The output from this comes out correctly registered from hillshade, but
wrong from my program...

Iain


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-a-gdal-generated-tiff-to-generate-DEM-tiles-losing-registration-tp6946188p6947649.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From iainmalcolm1 at googlemail.com  Mon Oct 31 06:43:57 2011
From: iainmalcolm1 at googlemail.com (Iain)
Date: Mon Oct 31 18:03:13 2011
Subject: [gdal-dev] Re: Using a gdal generated tiff to generate DEM
	tiles - losing registration
In-Reply-To: <4EAE5469.9000701@gmx.eu>
References: <1320002191096-6946188.post@n2.nabble.com>
	<4EAE5469.9000701@gmx.eu>
Message-ID: <1320057837570-6947684.post@n2.nabble.com>

That might be the answer - or at least part of it,  I still get brain fade
trying to work through projections and projection conversion.

I'll try and think this bit through again!

Here's the gdalinfo from the input file :

Driver: GTiff/GeoTIFF
Files: brw.tif
Size is 48243, 78372
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-1224560.781847173348069,8625918.873687559738755)
Pixel Size = (30.000000000000000,-30.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-1224560.782, 8625918.874) ( 11d 0'1.50"W, 61d 0'1.50"N)
Lower Left  (-1224560.782, 6274758.874) ( 11d 0'1.50"W, 48d59'57.82"N)
Upper Right (  222729.218, 8625918.874) (  2d 0'2.92"E, 61d 0'1.50"N)
Lower Right (  222729.218, 6274758.874) (  2d 0'2.92"E, 48d59'57.82"N)
Center      ( -500915.782, 7450338.874) (  4d29'59.29"W, 55d27'11.78"N)
Band 1 Block=256x256 Type=Int16, ColorInterp=Gray


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-a-gdal-generated-tiff-to-generate-DEM-tiles-losing-registration-tp6946188p6947684.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From guillaume.huby.lists at gmail.com  Mon Oct 31 07:10:30 2011
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Mon Oct 31 18:31:14 2011
Subject: [gdal-dev] Trouble using gdal_rasterize
In-Reply-To: <1319818868.4eaad674c4efe@webmail.free.fr>
References: <CALzf2c2SXy1gHaR6q7M8yD1Nc=zrqQHUy_Orf+aX0w3kjXyqfw@mail.gmail.com>
	<1319818868.4eaad674c4efe@webmail.free.fr>
Message-ID: <CALzf2c0M28C2WQ3f6oNciFzGtxJcyy9VUhUedZfnJG_pvo=OCA@mail.gmail.com>

Dear Even,

On Fri, Oct 28, 2011 at 6:21 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

>
> This sounds as another symptom of the precision loss issue that has been
> fixed
> for the ticket http://trac.osgeo.org/gdal/ticket/4292
>
> Fixed in GDAL 1.9.0dev
>
>
Thank you for your reply. I tested using gdal-svn-trunk-2011.10.31 and it
looks fine !

I'm looking for next stable release of 1.9.0 !

Best regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/5ffcc679/attachment.html
From ahmettemiz88 at gmail.com  Mon Oct 31 09:05:59 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Mon Oct 31 20:32:53 2011
Subject: [gdal-dev] Getting field values after obtaining FID
Message-ID: <CAJKO1YvLisBS=VYLELZzyWZwiNJkhaLdN1YKR+_UJvmmhUQqtQ@mail.gmail.com>

hello

Using the gdal.jar,
I am confused about getting other field values after obtaining FID.

I got ly2.GetFeature(fid)) but when I used
ly2.GetNextFeature().GetFieldAsString("koy"),
I got exception.

What is the way to get other field values after getting fid value of a
particular record ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From even.rouault at mines-paris.org  Mon Oct 31 09:11:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 31 20:38:44 2011
Subject: [gdal-dev] Getting field values after obtaining FID
In-Reply-To: <CAJKO1YvLisBS=VYLELZzyWZwiNJkhaLdN1YKR+_UJvmmhUQqtQ@mail.gmail.com>
References: <CAJKO1YvLisBS=VYLELZzyWZwiNJkhaLdN1YKR+_UJvmmhUQqtQ@mail.gmail.com>
Message-ID: <1320066688.4eae9e8067d5b@webmail.free.fr>

Selon ahmet temiz <ahmettemiz88@gmail.com>:

> hello
>
> Using the gdal.jar,
> I am confused about getting other field values after obtaining FID.
>
> I got ly2.GetFeature(fid)) but when I used
> ly2.GetNextFeature().GetFieldAsString("koy"),
> I got exception.

Which exception ? Please be precise when you report issues.

>
> What is the way to get other field values after getting fid value of a
> particular record ?

If you call GetNextFeature(), you will get the next feature...

What you want is to store a reference to the feature you are interested in and
do several queries on it :

Feature feat = ly2.GetFeature(fid):
String val = feat.GetFieldAsString("koy");

>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> ________________________
>
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From katrineggert1980 at gmail.com  Mon Oct 31 09:59:53 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Mon Oct 31 21:29:43 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAMKgpOYQniN7oF_Gs6GgNS3ZPV1uqBmXxEaJ8Zc=CQ7nGtnzeg@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
	<CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
	<CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>
	<CAMKgpOYQniN7oF_Gs6GgNS3ZPV1uqBmXxEaJ8Zc=CQ7nGtnzeg@mail.gmail.com>
Message-ID: <CAGR7mtD9kFn5uPPnG8MN8P-Wx7M9-nir=x1+Xs+cc=1MPtmAsA@mail.gmail.com>

Hi
I just did what you have told me and I got this error:

usage: Usage: gdal2tiles.py [options] input_file(s) [output]

gdal2tiles.py: error: Please convert this file to RGB/RGBA and run
gdal2tiles on the result.

>From paletted file you can create RGBA file (temp.vrt) by:
gdal_translate -of vrt -expand rgba /home/anrr/NDVI_rescaled2.tif temp.vrt

Any tips?

2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Kat,
>
> Your input image is of 32-bit float type. Whereas KML tiles are supposed
> to be png format that should be viewable on browsers.
> The corrupted pixels are a result of clipping the float valued pixels to
> the range [0,255].
>
> I suggest scaling the pixel values to byte type using the -scale option in
> gdal_translate.
>
>
> On Fri, Oct 28, 2011 at 7:34 PM, katrin eggert <katrineggert1980@gmail.com
> > wrote:
>
>> Hi
>> Gdalinfo reproject.tif
>>
>> Driver: GTiff/GeoTIFF
>> Files: reprojected.tif
>> Size is 3700, 3500
>> Coordinate System is:
>> GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["degree",0.0174532925199433],
>>     AUTHORITY["EPSG","4326"]]
>> Origin = (34.001088235352334,-19.571332568602660)
>> Pixel Size = (0.000204639356437,-0.000204639356437)
>> Metadata:
>>   AREA_OR_POINT=Area
>> Image Structure Metadata:
>>   INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (  34.0010882, -19.5713326) ( 34d 0' 3.92"E, 19d34'16.80"S)
>> Lower Left  (  34.0010882, -20.2998487) ( 34d 0' 3.92"E, 20d17'59.46"S)
>> Upper Right (  34.7715554, -19.5713326) ( 34d46'17.60"E, 19d34'16.80"S)
>> Lower Right (  34.7715554, -20.2998487) ( 34d46'17.60"E, 20d17'59.46"S)
>> Center      (  34.3863218, -19.9355906) ( 34d23'10.76"E, 19d56' 8.13"S)
>> Band 1 Block=3765x1 Type=Float32, ColorInterp=Gray
>>
>> and gdal2tile
>> >python gdal2tiles.py -k /home/user/reprojected.tif  /home/user/gdal2tile
>>
>>
>>
>>
>>
>>
>> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>
>>> Kat,
>>>
>>> Please provide the whole command you used and the output of gdalinfo on
>>> your input file.
>>>
>>> On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert <
>>> katrineggert1980@gmail.com> wrote:
>>>
>>>> Hi
>>>> I have used gdal2tile.py like this
>>>> python gdal2tile.py -k [input] [output] and the tiels that are
>>>> generated are nothing to do with the input image. It has changed the image
>>>> by almost plotting random values pixels.
>>>> Is there any limitation regarding inpu timage (e.g. it must be integer
>>>> or something like this)?
>>>>
>>>> Thanks
>>>> Kat
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/4f35b644/attachment-0001.html
From chaitanya.ch at gmail.com  Mon Oct 31 10:05:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 31 21:35:23 2011
Subject: [gdal-dev] Generate a KML-overlay from a Geotiff file
In-Reply-To: <CAGR7mtD9kFn5uPPnG8MN8P-Wx7M9-nir=x1+Xs+cc=1MPtmAsA@mail.gmail.com>
References: <CAGR7mtCTq0jq7rSXrPe=9WVDFtWaj6dMPQqCLGhMYMMThjrBGg@mail.gmail.com>
	<CAMKgpObp6nSydeZfHO_OKJBrzmMFg6Q9H9JtMaFtV1JqfAMoTg@mail.gmail.com>
	<CAGR7mtAD3=+wawGZgaiw9+sFYLmpaUM6Av9YQO1skTgAcBdsCg@mail.gmail.com>
	<CAMKgpOYQniN7oF_Gs6GgNS3ZPV1uqBmXxEaJ8Zc=CQ7nGtnzeg@mail.gmail.com>
	<CAGR7mtD9kFn5uPPnG8MN8P-Wx7M9-nir=x1+Xs+cc=1MPtmAsA@mail.gmail.com>
Message-ID: <CAMKgpOZPJNp_F3c08oCGHQ1h3FTd5A+P5HhgBYNJSGQvBufANg@mail.gmail.com>

Kat,

The method suggested by the message is the quick and clean method.
After creating the temp.vrt file with gdal_translate, you can use it with
the gdal2tiles script in place of the original tif.

On Mon, Oct 31, 2011 at 7:29 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi
> I just did what you have told me and I got this error:
>
> usage: Usage: gdal2tiles.py [options] input_file(s) [output]
>
> gdal2tiles.py: error: Please convert this file to RGB/RGBA and run
> gdal2tiles on the result.
>
> From paletted file you can create RGBA file (temp.vrt) by:
> gdal_translate -of vrt -expand rgba /home/anrr/NDVI_rescaled2.tif temp.vrt
>
> Any tips?
>
>
> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> Kat,
>>
>> Your input image is of 32-bit float type. Whereas KML tiles are supposed
>> to be png format that should be viewable on browsers.
>> The corrupted pixels are a result of clipping the float valued pixels to
>> the range [0,255].
>>
>> I suggest scaling the pixel values to byte type using the -scale option
>> in gdal_translate.
>>
>>
>> On Fri, Oct 28, 2011 at 7:34 PM, katrin eggert <
>> katrineggert1980@gmail.com> wrote:
>>
>>> Hi
>>> Gdalinfo reproject.tif
>>>
>>> Driver: GTiff/GeoTIFF
>>> Files: reprojected.tif
>>> Size is 3700, 3500
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>>     DATUM["WGS_1984",
>>>         SPHEROID["WGS 84",6378137,298.257223563,
>>>             AUTHORITY["EPSG","7030"]],
>>>         AUTHORITY["EPSG","6326"]],
>>>     PRIMEM["Greenwich",0],
>>>     UNIT["degree",0.0174532925199433],
>>>     AUTHORITY["EPSG","4326"]]
>>> Origin = (34.001088235352334,-19.571332568602660)
>>> Pixel Size = (0.000204639356437,-0.000204639356437)
>>> Metadata:
>>>   AREA_OR_POINT=Area
>>> Image Structure Metadata:
>>>   INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (  34.0010882, -19.5713326) ( 34d 0' 3.92"E, 19d34'16.80"S)
>>> Lower Left  (  34.0010882, -20.2998487) ( 34d 0' 3.92"E, 20d17'59.46"S)
>>> Upper Right (  34.7715554, -19.5713326) ( 34d46'17.60"E, 19d34'16.80"S)
>>> Lower Right (  34.7715554, -20.2998487) ( 34d46'17.60"E, 20d17'59.46"S)
>>> Center      (  34.3863218, -19.9355906) ( 34d23'10.76"E, 19d56' 8.13"S)
>>> Band 1 Block=3765x1 Type=Float32, ColorInterp=Gray
>>>
>>> and gdal2tile
>>> >python gdal2tiles.py -k /home/user/reprojected.tif  /home/user/gdal2tile
>>>
>>>
>>>
>>>
>>>
>>>
>>> 2011/10/28 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>
>>>> Kat,
>>>>
>>>> Please provide the whole command you used and the output of gdalinfo on
>>>> your input file.
>>>>
>>>> On Fri, Oct 28, 2011 at 4:34 PM, katrin eggert <
>>>> katrineggert1980@gmail.com> wrote:
>>>>
>>>>> Hi
>>>>> I have used gdal2tile.py like this
>>>>> python gdal2tile.py -k [input] [output] and the tiels that are
>>>>> generated are nothing to do with the input image. It has changed the image
>>>>> by almost plotting random values pixels.
>>>>> Is there any limitation regarding inpu timage (e.g. it must be integer
>>>>> or something like this)?
>>>>>
>>>>> Thanks
>>>>> Kat
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/f6776ff7/attachment.html
From chaitanya.ch at gmail.com  Mon Oct 31 11:24:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 31 22:59:07 2011
Subject: [gdal-dev] Re: [WISY-Spam]Re: Problems with transform raster image
In-Reply-To: <4EAEBA15.3020302@tappenbeck.net>
References: <4EA6896D.8090603@widemann.de>
	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>
	<4EAEBA15.3020302@tappenbeck.net>
Message-ID: <CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>

Jan,

[1]: http://www.gdal.org/frmt_various.html#WLD

On Mon, Oct 31, 2011 at 8:39 PM, Jan Tappenbeck <osm@tappenbeck.net> wrote:

>
>
> Hi !
>
> this is a very strange way - i have tfw-file for the images.
>
> is there a possibility to integrate this information to the
> gdalwarp-command.
>
GDAL should automatically check for .tfw file. Check if the .tfw file is
according to the specified format[1].


>

in the web i only found the additional command -co tfw=yes - but then only
> a list of possible options will list !!!!!
>
The TFW=YES creation option is used to 'create' the world file while
creating new files.


> please help !
>
> regards Jan :-)
>
> Am 25.10.2011 14:40, schrieb Chaitanya kumar CH:
>
>> Jan,
>>
>> You need to assign not only the projection of the source file but also
>> the geographical extents. The easiest way to do this is by adding GCPs
>> to it using the -gcp option of gdal_translate to create a new tif file.
>> Use the four corners of the image. Remember that the top left of the top
>> left pixel is (0,0) and bottom right of the bottom right pixel is
>> (width,height).
>>
>> On Tue, Oct 25, 2011 at 3:33 PM, Jan Tappenbeck <tappenbeck@widemann.de
>> <mailto:tappenbeck@widemann.de**>> wrote:
>>
>>
>>
>>      hi
>>
>>    i try to transform a rasterimage with following command:
>>
>>    gdalwarp -s_srs EPSG:25832 -t_srs EPSG:31466 [Path]\DOP_3905470.tif
>>    [Path]\DOP_3905470_trans.tif
>>
>>    the message is ...
>>
>>    C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:25832
>>    -t_srs EPSG:31466
>>      [Path]\DOP_3905470.tif [Path]\DOP_3905470_trans.tif
>>    ERROR 1: Unable to compute a transformation between pixel/line
>>    and georeferenced coordinates for [Path]\DOP_3905470.tif.
>>    There is no affine transformation and no GCPs.
>>
>>    and the data of the source:....
>>
>>    Driver: GTiff/GeoTIFF
>>    Files: [Path]\DOP_3905470.tif
>>    Size is 10000, 10000
>>    Coordinate System is `'
>>    Image Structure Metadata:
>>      INTERLEAVE=PIXEL
>>    Corner Coordinates:
>>    Upper Left  (    0.0,    0.0)
>>    Lower Left  (    0.0,10000.0)
>>    Upper Right (10000.0,    0.0)
>>    Lower Right (10000.0,10000.0)
>>    Center      ( 5000.0, 5000.0)
>>    Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>>    Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>>    Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>>
>>    can anybody help me ?
>>
>>    regards Jan .-)
>>
>>    --
>>
>>    Freundliche Gr??e
>>    i.A. Jan Tappenbeck
>>
>>    Dipl. Vermessungsingenieur
>>    CAD-Systemberater&  AutoCAD-Support
>>
>>    Widemann Systeme GmbH
>>    CAD- und GIS-Systemhaus
>>    Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf
>>
>>    Ackermannstra?e 21, 22087 Hamburg
>>    Fon: 040 / 229477-22
>>    Fax: 040 / 229477-29
>>    tappenbeck@widemann.de <mailto:tappenbeck@widemann.de**>
>>    www.widemann.de <http://www.widemann.de>
>>
>>
>>    Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345
>>
>>    Zu jedem Produkt das passende Forum unter
>>    http://www.widemann.de/__**wisysforen/<http://www.widemann.de/__wisysforen/>
>>
>>    <http://www.widemann.de/**wisysforen/<http://www.widemann.de/wisysforen/>
>> >
>>
>>
>>    Widemann Systeme - aktuell:
>>
>>    geosi.DE - Vermessungssoftware ...
>>    ... f?r Stra?enbau, Bauwesen, ....
>>
>>    - weitere Infos unter:
>>    http://www.widemann.de/__**produkte/geoside/geosi.htm<http://www.widemann.de/__produkte/geoside/geosi.htm>
>>
>>    <http://www.widemann.de/**produkte/geoside/geosi.htm<http://www.widemann.de/produkte/geoside/geosi.htm>
>> >
>>
>>
>>    Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte
>>    Informationen.
>>    Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte
>>    sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte
>> Kopieren
>>    dieser E-Mail oder die unbefugte Weitergabe der enthaltenen
>>    Informationen
>>    ist nicht gestattet.
>>
>>    The information contained in this message is confidential or
>>    protected by
>>    law. If you are not the intended recipient, please contact the
>>    sender and
>>    delete this message. Any unauthorised copying of this message or
>>    unauthorised
>>    distribution of the information contained herein is prohibited.
>>
>>
>>    ______________________________**___________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>> >
>>    http://lists.osgeo.org/__**mailman/listinfo/gdal-dev<http://lists.osgeo.org/__mailman/listinfo/gdal-dev>
>>
>>    <http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>> >
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/eba862af/attachment.html
From chaitanya.ch at gmail.com  Mon Oct 31 11:48:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Oct 31 23:25:02 2011
Subject: [gdal-dev] Re: [WISY-Spam]Re: Problems with transform raster image
In-Reply-To: <4EAEC19D.10504@tappenbeck.net>
References: <4EA6896D.8090603@widemann.de>
	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>
	<4EAEBA15.3020302@tappenbeck.net>
	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>
	<4EAEC19D.10504@tappenbeck.net>
Message-ID: <CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>

Jan,

GDAL's GeoTIFF driver checks for the twf file automatically while reading.
You can create this file manually.

On Mon, Oct 31, 2011 at 9:11 PM, Jan Tappenbeck <osm@tappenbeck.net> wrote:

> **
> hi !
>
> i know this format - so add the parameter manuell ??
>
> no set a flag and then the twf will integrate automaticlly ?
>
> reagards Jan :-)
>
> Am 31.10.2011 16:24, schrieb Chaitanya kumar CH:
>
>
> On Mon, Oct 31, 2011 at 8:39 PM, Jan Tappenbeck <osm@tappenbeck.net>wrote:
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/1ae5862e/attachment-0001.html
From chaitanya.ch at gmail.com  Mon Oct 31 12:25:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov  1 00:03:04 2011
Subject: [gdal-dev] Re: [WISY-Spam]Re: Problems with transform raster image
In-Reply-To: <4EAEC58A.5060107@tappenbeck.net>
References: <4EA6896D.8090603@widemann.de>
	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>
	<4EAEBA15.3020302@tappenbeck.net>
	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>
	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4EAEC58A.5060107@tappenbeck.net>
Message-ID: <CAMKgpOa=2y9O_RMfrcrBJogqOhqJ47YBpTRWWGd+0PY-oLOaLQ@mail.gmail.com>

Jan,

Is the problem only with gdalwarp? Were you able to use the twf file with
gdal_translate? If it works with gdal_translate create a VRT file using it
and then use the VRT file in place of the original tiff.

gdal_translate -of VRT DOP_3905470.tif DOP_3905470.vrt
gdalwarp -s_srs EPSG:25832 -t_srs EPSG:31466 DOP_3905470.vrt
DOP_3905470_trans.tif

Tell me how it worked.

On Mon, Oct 31, 2011 at 9:28 PM, Jan Tappenbeck <osm@tappenbeck.net> wrote:

> **
> Hi !
>
> when reading automatically then i did not understand why gdalwarp could
> not use this information for the translation.
>
> in german - da du aus der schweiz kommst.
>
> wenn die twf-dateien im verzeichnis mit den bildern sind, dann verstehe
> ich nicht warum gdalwarp diese nicht mit in die transformation einbezieht
> und passpunkte haben will !
>
> gru? Jan :-)
>
> Am 31.10.2011 16:48, schrieb Chaitanya kumar CH:
>
> Jan,
>
> GDAL's GeoTIFF driver checks for the twf file automatically while reading.
> You can create this file manually.
>
> On Mon, Oct 31, 2011 at 9:11 PM, Jan Tappenbeck <osm@tappenbeck.net>wrote:
>
>>  hi !
>>
>> i know this format - so add the parameter manuell ??
>>
>> no set a flag and then the twf will integrate automaticlly ?
>>
>> reagards Jan :-)
>>
>> Am 31.10.2011 16:24, schrieb Chaitanya kumar CH:
>>
>>
>> On Mon, Oct 31, 2011 at 8:39 PM, Jan Tappenbeck <osm@tappenbeck.net>wrote:
>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/4ddfa860/attachment.html
From jormarfe at gmail.com  Mon Oct 31 12:41:10 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Tue Nov  1 00:19:56 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
Message-ID: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>

Hello,

       I am using RasterIO function to write tiff files. The problem
appears when the image size is aprox. 25000x25000 (500Mb), the last lines
of the image are not correctly written. The last lines are written with 0
or 255 value. I have checked that if I only write a tiff file with the last
lines of the image, this lines are correctly written.

     This problem, could be solved writing the image by blocks (using the
function WriteBlock() )?


Best Regards,

 Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/a575a416/attachment.html
From giohappy at gmail.com  Mon Oct 31 14:19:21 2011
From: giohappy at gmail.com (G. Allegri)
Date: Tue Nov  1 02:03:53 2011
Subject: [gdal-dev] problems with calculations with very small numbers (near
	zero)
Message-ID: <CAB4g1=yL4oGS=eLp=159JyeDR1DaaZCDDbz5c25Z4bOfUEYdSA@mail.gmail.com>

Hi,
I'm having some troubles with raster algebra on a raster with very small
(near zero, but not).
I'm using numpy (through python gdal) to do a multiplication, eg
numpy.multiply(rasterarr,2), but I obtain the following raster stats:
http://pastebin.com/hHiUrWwD.

I suppose that -3.4028234663852886e+038 values are causing the problems,
and I wonder wha'ts the best way to deal with these kind of values... Maybe
rounding them to zeros?
I've tried to do it using the LUT tag inside a VRT dataset, but it doesn't
seem to do the job.

giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/adb009a4/attachment.html
From giohappy at gmail.com  Mon Oct 31 14:34:20 2011
From: giohappy at gmail.com (G. Allegri)
Date: Tue Nov  1 02:19:48 2011
Subject: [gdal-dev] problems with calculations with very small numbers
	(nearzero)
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FEC01E082AE@docexs1.ad.consrv.ca.gov>
References: <CAB4g1=yL4oGS=eLp=159JyeDR1DaaZCDDbz5c25Z4bOfUEYdSA@mail.gmail.com>
	<A73B6E7A4503E948826CE81A65AF5FEC01E082AE@docexs1.ad.consrv.ca.gov>
Message-ID: <CAB4g1=ycTNZSLWJvJERb5rCT7vFkFgktM=XW7B2om7TfO-anYA@mail.gmail.com>

Ops, you're right Bob. So the problem is the huge negative value... So the
problem is how to substitute it, maybe with a more treatable value outside
my raster range...

giovanni



2011/10/31 Moskovitz, Bob <Bob.Moskovitz@conservation.ca.gov>

> Hi Giovanni,****
>
> ** **
>
> I?ve seen -3.4028234663852886e+038 (which is a huge negative value.  Your
> minds eye probably saw a ?-? instead of ?+?)  as a nodata value.****
>
> ** **
>
> Regards,****
>
> Bob****
>
> ** **
>
> Bob Moskovitz****
>
> Seismic Hazards Mapping Program****
>
> California Geological Survey****
>
> ** **
>
> CONFIDENTIALITY NOTICE: This communication is intended only for the use of
> the individual or entity to which it is addressed. This message contains
> information from the State of California, California Geological Survey,
> which may be privileged, confidential and exempt from disclosure under
> applicable law, including the Electronic Communications Privacy Act. If the
> reader of this communication is not the intended recipient, you are hereby
> notified that any dissemination, distribution, or copying of this
> communication is strictly prohibited.****
>
> ** **
>
> ** **
>
> ** **
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *G. Allegri
> *Sent:* Monday, October 31, 2011 11:19 AM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] problems with calculations with very small numbers
> (nearzero)****
>
> ** **
>
> Hi, ****
>
> I'm having some troubles with raster algebra on a raster with very small
> (near zero, but not).****
>
> I'm using numpy (through python gdal) to do a multiplication, eg
> numpy.multiply(rasterarr,2), but I obtain the following raster stats:
> http://pastebin.com/hHiUrWwD.****
>
> ** **
>
> I suppose that -3.4028234663852886e+038 values are causing the problems,
> and I wonder wha'ts the best way to deal with these kind of values... Maybe
> rounding them to zeros?****
>
> I've tried to do it using the LUT tag inside a VRT dataset, but it doesn't
> seem to do the job.****
>
> ** **
>
> giovanni****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/83ec7d62/attachment.html
From Bob.Moskovitz at conservation.ca.gov  Mon Oct 31 14:29:49 2011
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Tue Nov  1 02:30:56 2011
Subject: [gdal-dev] problems with calculations with very small numbers
	(nearzero)
In-Reply-To: <CAB4g1=yL4oGS=eLp=159JyeDR1DaaZCDDbz5c25Z4bOfUEYdSA@mail.gmail.com>
References: <CAB4g1=yL4oGS=eLp=159JyeDR1DaaZCDDbz5c25Z4bOfUEYdSA@mail.gmail.com>
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC01E082AE@docexs1.ad.consrv.ca.gov>

Hi Giovanni,

 

I've seen -3.4028234663852886e+038 (which is a huge negative value.
Your minds eye probably saw a "-" instead of "+")  as a nodata value.

 

Regards,

Bob

 

Bob Moskovitz

Seismic Hazards Mapping Program

California Geological Survey

 

CONFIDENTIALITY NOTICE: This communication is intended only for the use
of the individual or entity to which it is addressed. This message
contains information from the State of California, California Geological
Survey, which may be privileged, confidential and exempt from disclosure
under applicable law, including the Electronic Communications Privacy
Act. If the reader of this communication is not the intended recipient,
you are hereby notified that any dissemination, distribution, or copying
of this communication is strictly prohibited.

 

 

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of G. Allegri
Sent: Monday, October 31, 2011 11:19 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] problems with calculations with very small numbers
(nearzero)

 

Hi, 

I'm having some troubles with raster algebra on a raster with very small
(near zero, but not).

I'm using numpy (through python gdal) to do a multiplication, eg
numpy.multiply(rasterarr,2), but I obtain the following raster stats:
http://pastebin.com/hHiUrWwD.

 

I suppose that -3.4028234663852886e+038 values are causing the problems,
and I wonder wha'ts the best way to deal with these kind of values...
Maybe rounding them to zeros?

I've tried to do it using the LUT tag inside a VRT dataset, but it
doesn't seem to do the job.

 

giovanni

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/5d4e619c/attachment-0001.html
From Bob.Moskovitz at conservation.ca.gov  Mon Oct 31 14:43:04 2011
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Tue Nov  1 02:44:49 2011
Subject: [gdal-dev] problems with calculations with very small numbers
	(nearzero)
In-Reply-To: <CAB4g1=ycTNZSLWJvJERb5rCT7vFkFgktM=XW7B2om7TfO-anYA@mail.gmail.com>
References: <CAB4g1=yL4oGS=eLp=159JyeDR1DaaZCDDbz5c25Z4bOfUEYdSA@mail.gmail.com><A73B6E7A4503E948826CE81A65AF5FEC01E082AE@docexs1.ad.consrv.ca.gov>
	<CAB4g1=ycTNZSLWJvJERb5rCT7vFkFgktM=XW7B2om7TfO-anYA@mail.gmail.com>
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC01E082AF@docexs1.ad.consrv.ca.gov>

That's what I usually do.  I just convert my file to AAIGrid and use sed
to replace the nodata to a value I like J

 

Bob

 

Bob Moskovitz

Seismic Hazards Mapping Program

California Geological Survey

 

CONFIDENTIALITY NOTICE: This communication is intended only for the use
of the individual or entity to which it is addressed. This message
contains information from the State of California, California Geological
Survey, which may be privileged, confidential and exempt from disclosure
under applicable law, including the Electronic Communications Privacy
Act. If the reader of this communication is not the intended recipient,
you are hereby notified that any dissemination, distribution, or copying
of this communication is strictly prohibited.

 

 

 

From: G. Allegri [mailto:giohappy@gmail.com] 
Sent: Monday, October 31, 2011 11:34 AM
To: Moskovitz, Bob
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] problems with calculations with very small
numbers (nearzero)

 

Ops, you're right Bob. So the problem is the huge negative value... So
the problem is how to substitute it, maybe with a more treatable value
outside my raster range...

 

giovanni

 

 

 

2011/10/31 Moskovitz, Bob <Bob.Moskovitz@conservation.ca.gov>

Hi Giovanni,

 

I've seen -3.4028234663852886e+038 (which is a huge negative value.
Your minds eye probably saw a "-" instead of "+")  as a nodata value.

 

Regards,

Bob

 

Bob Moskovitz

Seismic Hazards Mapping Program

California Geological Survey

 

CONFIDENTIALITY NOTICE: This communication is intended only for the use
of the individual or entity to which it is addressed. This message
contains information from the State of California, California Geological
Survey, which may be privileged, confidential and exempt from disclosure
under applicable law, including the Electronic Communications Privacy
Act. If the reader of this communication is not the intended recipient,
you are hereby notified that any dissemination, distribution, or copying
of this communication is strictly prohibited.

 

 

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of G. Allegri
Sent: Monday, October 31, 2011 11:19 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] problems with calculations with very small numbers
(nearzero)

 

Hi, 

I'm having some troubles with raster algebra on a raster with very small
(near zero, but not).

I'm using numpy (through python gdal) to do a multiplication, eg
numpy.multiply(rasterarr,2), but I obtain the following raster stats:
http://pastebin.com/hHiUrWwD.

 

I suppose that -3.4028234663852886e+038 values are causing the problems,
and I wonder wha'ts the best way to deal with these kind of values...
Maybe rounding them to zeros?

I've tried to do it using the LUT tag inside a VRT dataset, but it
doesn't seem to do the job.

 

giovanni

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111031/674eb70b/attachment.html
From even.rouault at mines-paris.org  Mon Oct 31 15:17:18 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov  1 03:05:05 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
In-Reply-To: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
References: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
Message-ID: <1320088638.4eaef43e5d63e@webmail.free.fr>

Selon Jorge Martin <jormarfe@gmail.com>:

> Hello,
>
>        I am using RasterIO function to write tiff files. The problem
> appears when the image size is aprox. 25000x25000 (500Mb), the last lines
> of the image are not correctly written. The last lines are written with 0
> or 255 value. I have checked that if I only write a tiff file with the last
> lines of the image, this lines are correctly written.
>
>      This problem, could be solved writing the image by blocks (using the
> function WriteBlock() )?

Hum, provided there is no bug in your code, this sounds like a bug. Not sure
WriteBlock() would help.

Could you post a small and self-contained code that demonstrates the issue ?

You didn't mention your GDAL version. If it is not a recent one, you could try
upgrading and see if it works better.

>
>
> Best Regards,
>
>  Jorge
>


From bcclaywell at gmail.com  Mon Oct 31 17:13:29 2011
From: bcclaywell at gmail.com (Brian Claywell)
Date: Tue Nov  1 05:08:08 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
In-Reply-To: <1320088638.4eaef43e5d63e@webmail.free.fr>
References: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
	<1320088638.4eaef43e5d63e@webmail.free.fr>
Message-ID: <CAONKBT5BswqHTV6ky80OR1S_qMyVYusutxE1x3VD3KucyS5AFA@mail.gmail.com>

Jorge,

On Mon, Oct 31, 2011 at 2:17 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon Jorge Martin <jormarfe@gmail.com>:
>> ? ? ? ?I am using RasterIO function to write tiff files. The problem
>> appears when the image size is aprox. 25000x25000 (500Mb), the last lines
>> of the image are not correctly written. The last lines are written with 0
>> or 255 value. I have checked that if I only write a tiff file with the last
>> lines of the image, this lines are correctly written.
<snip>
> You didn't mention your GDAL version. If it is not a recent one, you could try
> upgrading and see if it works better.

If you're seeing this behavior pre-1.8.1, it sounds similar to this
bug, which has since been fixed:
http://trac.osgeo.org/gdal/ticket/4090

-b

-- 
Brian Claywell
bcclaywell@gmail.com
