From sovofmad at yandex.ru  Mon Sep  1 02:00:34 2014
From: sovofmad at yandex.ru (Storkur)
Date: Mon, 1 Sep 2014 02:00:34 -0700 (PDT)
Subject: [gdal-dev] Convert S57 to image with S52 rendering
In-Reply-To: <1409321505.38788.YahooMailBasic@web160504.mail.bf1.yahoo.com>
References: <4FFE8D3C.5030706@t-kartor.se>
	<1409040273309-5158302.post@n6.nabble.com>
	<1409149339.76440.YahooMailBasic@web160504.mail.bf1.yahoo.com>
	<1409292659969-5158977.post@n6.nabble.com>
	<1409321505.38788.YahooMailBasic@web160504.mail.bf1.yahoo.com>
Message-ID: <1409562034328-5159378.post@n6.nabble.com>

Sylvain,

Thanks

But i cant build s52 lib.
I try make s52glx command, but it says S52.c:271: error: storage size of
?_mp_mutex? isn?t known
I probably resolve all dependencies.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Convert-S57-to-image-with-S52-rendering-tp4987897p5159378.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From strk at keybit.net  Mon Sep  1 04:16:38 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 1 Sep 2014 13:16:38 +0200
Subject: [gdal-dev] Identity affine handling in
	GDALCreateGenImgProjTransformer2
Message-ID: <20140901111638.GA20883@localhost>

Hi all,
I'm trying to cleanup the PostGIS raster code handling raster warping
and got suprised by the complex code used there to do what looks like
being a workaround for a GDAL bug.

The workaround adds some permutations to rasters with an affine transform
of {0,1,0,0,0,-1}. Looking at the GDAL code I've found that on the code
path used by postgis raster we have a call to GDALCreateGenImgProjTransformer2
which indeed handles in a special case both {0,1,0,0,0,-1} and {0,1,0,0,0,1}
as you can see here: https://github.com/OSGeo/gdal/blob/1.11/gdal/alg/gdaltransformer.cpp#L1163-L1168

Basically it looks like the code doesn't not trust the return code
from the driver's GDALGetGeoTransform() call, but rather look at the
returned matrix to decide if the raster did have or not a an affine
transformation.

The error message I get when passing rasters with that affine to the
function is indeed:

 ERROR 1: Unable to compute a transformation between pixel/line
 and georeferenced coordinates for .
 There is no affine transformation and no GCPs.

But the raster _does_ have an affine transformation, just happens to
be the identity one.

Should the GDALCreateGenImgProjTransformer2 not threat the identity matrix
in a special way ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From even.rouault at spatialys.com  Mon Sep  1 06:45:23 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Sep 2014 15:45:23 +0200
Subject: [gdal-dev] Identity affine handling in
	GDALCreateGenImgProjTransformer2
In-Reply-To: <20140901111638.GA20883@localhost>
References: <20140901111638.GA20883@localhost>
Message-ID: <1409579123.5404787327596@imp.free.fr>

Hi Sandro

>
> Basically it looks like the code doesn't not trust the return code
> from the driver's GDALGetGeoTransform() call, but rather look at the
> returned matrix to decide if the raster did have or not a an affine
> transformation.

Yes, there are indeed various places where we don't trust GetGeoTransform()
return code. I guess this is for historical reasons. This is a bit unfortunate
and should be fixed at driver level rather than handled by GDAL core. Perhaps
you could try removing the test on the geotransform values in
GDALCreateGenImgProjTransformer2 () and see if it impacts the autotest suite ?
(though it would not be a proof that some
audit of drivers would not be required so that we can reliably trust the return
code of their GetGeoTransform() implementation)

>
> The error message I get when passing rasters with that affine to the
> function is indeed:
>
>  ERROR 1: Unable to compute a transformation between pixel/line
>  and georeferenced coordinates for .
>  There is no affine transformation and no GCPs.
>
> But the raster _does_ have an affine transformation, just happens to
> be the identity one.
>
> Should the GDALCreateGenImgProjTransformer2 not threat the identity matrix
> in a special way ?

In theory, there's nothing wrong with the identity matrix. Shouldn't be a
particular case in the rest of the warping.

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From strk at keybit.net  Mon Sep  1 07:40:29 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 1 Sep 2014 16:40:29 +0200
Subject: [gdal-dev] Identity affine handling in
 GDALCreateGenImgProjTransformer2
In-Reply-To: <1409579123.5404787327596@imp.free.fr>
References: <20140901111638.GA20883@localhost>
	<1409579123.5404787327596@imp.free.fr>
Message-ID: <20140901144029.GB4607@localhost>

On Mon, Sep 01, 2014 at 03:45:23PM +0200, Even Rouault wrote:

> > Basically it looks like the code doesn't not trust the return code
> > from the driver's GDALGetGeoTransform() call, but rather look at the
> > returned matrix to decide if the raster did have or not a an affine
> > transformation.
> 
> Yes, there are indeed various places where we don't trust GetGeoTransform()
> return code. I guess this is for historical reasons. This is a bit unfortunate
> and should be fixed at driver level rather than handled by GDAL core. Perhaps
> you could try removing the test on the geotransform values in
> GDALCreateGenImgProjTransformer2 () and see if it impacts the autotest suite ?
> (though it would not be a proof that some
> audit of drivers would not be required so that we can reliably trust the return
> code of their GetGeoTransform() implementation)

Uhm, locally I get a segfault when running the testsuite, with
trunk untouched (autotest$ python run_all.py)

Do travis run all tests ? I've filed a pull request to trigger
a travis build there: https://github.com/OSGeo/gdal/pull/40

--strk;

From even.rouault at spatialys.com  Mon Sep  1 08:00:24 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Sep 2014 17:00:24 +0200
Subject: [gdal-dev] Identity affine handling in
	GDALCreateGenImgProjTransformer2
In-Reply-To: <20140901144029.GB4607@localhost>
References: <20140901111638.GA20883@localhost>
	<1409579123.5404787327596@imp.free.fr>
	<20140901144029.GB4607@localhost>
Message-ID: <1409583624.54048a08d82ec@imp.free.fr>

Selon Sandro Santilli <strk at keybit.net>:

> On Mon, Sep 01, 2014 at 03:45:23PM +0200, Even Rouault wrote:
>
> > > Basically it looks like the code doesn't not trust the return code
> > > from the driver's GDALGetGeoTransform() call, but rather look at the
> > > returned matrix to decide if the raster did have or not a an affine
> > > transformation.
> >
> > Yes, there are indeed various places where we don't trust GetGeoTransform()
> > return code. I guess this is for historical reasons. This is a bit
> unfortunate
> > and should be fixed at driver level rather than handled by GDAL core.
> Perhaps
> > you could try removing the test on the geotransform values in
> > GDALCreateGenImgProjTransformer2 () and see if it impacts the autotest
> suite ?
> > (though it would not be a proof that some
> > audit of drivers would not be required so that we can reliably trust the
> return
> > code of their GetGeoTransform() implementation)
>
> Uhm, locally I get a segfault when running the testsuite, with
> trunk untouched (autotest$ python run_all.py)

They should run. If you svn updated a previous working copy, try make clean &&
make

>
> Do travis run all tests ?

"All" : I guess hardly nobody has ever built GDAL with all drivers configured,
but most yes.

> I've filed a pull request to trigger
> a travis build there: https://github.com/OSGeo/gdal/pull/40
>
> --strk;
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From strk at keybit.net  Mon Sep  1 08:09:25 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 1 Sep 2014 17:09:25 +0200
Subject: [gdal-dev] Identity affine handling in
 GDALCreateGenImgProjTransformer2
In-Reply-To: <1409583624.54048a08d82ec@imp.free.fr>
References: <20140901111638.GA20883@localhost>
	<1409579123.5404787327596@imp.free.fr>
	<20140901144029.GB4607@localhost>
	<1409583624.54048a08d82ec@imp.free.fr>
Message-ID: <20140901150925.GC4607@localhost>

On Mon, Sep 01, 2014 at 05:00:24PM +0200, Even Rouault wrote:
> Selon Sandro Santilli <strk at keybit.net>:

> > Uhm, locally I get a segfault when running the testsuite, with
> > trunk untouched (autotest$ python run_all.py)
> 
> They should run. If you svn updated a previous working copy, try make clean &&
> make

There's no "clean" rule under autotest/
I did make a fresh rebuild in gdal/ dir.

> > Do travis run all tests ?
> 
> "All" : I guess hardly nobody has ever built GDAL with all drivers configured,
> but most yes.

The testsuite seems fine with the change:
https://travis-ci.org/OSGeo/gdal/builds/34106679

--strk;

> > I've filed a pull request to trigger
> > a travis build there: https://github.com/OSGeo/gdal/pull/40

From sylvain_duclos at yahoo.com  Mon Sep  1 08:47:08 2014
From: sylvain_duclos at yahoo.com (s duclos)
Date: Mon, 1 Sep 2014 08:47:08 -0700
Subject: [gdal-dev] Convert S57 to image with S52 rendering
In-Reply-To: <1409562034328-5159378.post@n6.nabble.com>
Message-ID: <1409586428.71993.YahooMailBasic@web160504.mail.bf1.yahoo.com>

Storkur,

I think that you should be fine with glib-2.0 (2.31)
I'm on Ubuntu 14.04 witch have glib 2.40.0 and I just tried the target s52glx. 
Work fine here.

But if you can't upgrade your glib then maybe the old way work for you
Simple test would be to comment line S52.c:271 and add:

static GStaticMutex       _mp_mutex = G_STATIC_MUTEX_INIT;


In recent glib GStaticMutex is deprecated.


rgds,

Sylvain.

--------------------------------------------
On Mon, 9/1/14, Storkur <sovofmad at yandex.ru> wrote:

 Subject: Re: [gdal-dev] Convert S57 to image with S52 rendering
 To: gdal-dev at lists.osgeo.org
 Received: Monday, September 1, 2014, 5:00 AM
 
 Sylvain,
 
 Thanks
 
 But i cant build s52 lib.
 I try
 make s52glx command, but it says S52.c:271: error: storage
 size of
 ?_mp_mutex? isn?t known
 I probably resolve all dependencies.
 
 
 
 --
 View this message in
 context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Convert-S57-to-image-with-S52-rendering-tp4987897p5159378.html
 Sent
 from the GDAL - Dev mailing list archive at Nabble.com.
 _______________________________________________
 gdal-dev mailing list
 gdal-dev at lists.osgeo.org
 http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Mon Sep  1 08:56:40 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 01 Sep 2014 17:56:40 +0200
Subject: [gdal-dev] Identity affine handling in
	GDALCreateGenImgProjTransformer2
In-Reply-To: <20140901150925.GC4607@localhost>
References: <20140901111638.GA20883@localhost>
	<1409579123.5404787327596@imp.free.fr>
	<20140901144029.GB4607@localhost>
	<1409583624.54048a08d82ec@imp.free.fr>
	<20140901150925.GC4607@localhost>
Message-ID: <1409587000.5404973827897@imp.free.fr>

Selon Sandro Santilli <strk at keybit.net>:

> On Mon, Sep 01, 2014 at 05:00:24PM +0200, Even Rouault wrote:
> > Selon Sandro Santilli <strk at keybit.net>:
>
> > > Uhm, locally I get a segfault when running the testsuite, with
> > > trunk untouched (autotest$ python run_all.py)
> >
> > They should run. If you svn updated a previous working copy, try make clean
> &&
> > make
>
> There's no "clean" rule under autotest/

Yes, I meant in the lib, not autotest.

> I did make a fresh rebuild in gdal/ dir.

And still crashing ? Where does it crash ?

>
> > > Do travis run all tests ?
> >
> > "All" : I guess hardly nobody has ever built GDAL with all drivers
> configured,
> > but most yes.
>
> The testsuite seems fine with the change:
> https://travis-ci.org/OSGeo/gdal/builds/34106679
>
> --strk;
>
> > > I've filed a pull request to trigger
> > > a travis build there: https://github.com/OSGeo/gdal/pull/40
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From richsharp at stanford.edu  Mon Sep  1 21:44:56 2014
From: richsharp at stanford.edu (Richard Sharp)
Date: Mon, 1 Sep 2014 21:44:56 -0700
Subject: [gdal-dev] why do I get a floating point nodata value from a
	byte raster?
In-Reply-To: <201408291934.44369.even.rouault@spatialys.com>
References: <CAGuVLy07f+mRtGXe2fXd7n-1boY7PuqEYe3=3vcUPmN6u3CE0Q@mail.gmail.com>
	<201408291934.44369.even.rouault@spatialys.com>
Message-ID: <CAGuVLy1pZnbVLL9zQNGX-_T4YNF5wT2YGumnsYExwZ06-wzRjQ@mail.gmail.com>

On Fri, Aug 29, 2014 at 10:34 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 28 ao?t 2014 23:32:38, Richard Sharp a ?crit :
> > I have a byte GTiff dataset that has a nodata value of 0 according to
> QGIS.
>
> Well, I've just created such a file, and with QGIS 1.8, the GUI display
> well
> the -3.4028230607370965e+38 value, but with 2.4, it displays 0. So seems
> to be
> on QGIS side.
> That said,  -3.4028230607370965e+38 doesn't make sense as a nodata value
> for
> Byte, which can only range from 0 to 255.
> After some testing, it seems that QGIS displays 0 when the nodata value is
> out
> of the range of the data type.
>
>
Thanks Evan.  Just so I'm clear, you're saying that the raster had its
nodata value set to something that exceeded its datatype range.  In that
case, it doesn't make sense to interpret the  -3.4028230607370965e+38 as
"0" in the byte range, but rather as a nodata value defined for the valid
pixels in the raster?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140901/7482f113/attachment.html>

From even.rouault at spatialys.com  Tue Sep  2 01:05:57 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Sep 2014 10:05:57 +0200
Subject: [gdal-dev] why do I get a floating point nodata value from a
	byte raster?
In-Reply-To: <CAGuVLy1pZnbVLL9zQNGX-_T4YNF5wT2YGumnsYExwZ06-wzRjQ@mail.gmail.com>
References: <CAGuVLy07f+mRtGXe2fXd7n-1boY7PuqEYe3=3vcUPmN6u3CE0Q@mail.gmail.com>
	<201408291934.44369.even.rouault@spatialys.com>
	<CAGuVLy1pZnbVLL9zQNGX-_T4YNF5wT2YGumnsYExwZ06-wzRjQ@mail.gmail.com>
Message-ID: <1409645157.54057a65694f4@imp.free.fr>

Selon Richard Sharp <richsharp at stanford.edu>:

> On Fri, Aug 29, 2014 at 10:34 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Le jeudi 28 ao?t 2014 23:32:38, Richard Sharp a ?crit :
> > > I have a byte GTiff dataset that has a nodata value of 0 according to
> > QGIS.
> >
> > Well, I've just created such a file, and with QGIS 1.8, the GUI display
> > well
> > the -3.4028230607370965e+38 value, but with 2.4, it displays 0. So seems
> > to be
> > on QGIS side.
> > That said,  -3.4028230607370965e+38 doesn't make sense as a nodata value
> > for
> > Byte, which can only range from 0 to 255.
> > After some testing, it seems that QGIS displays 0 when the nodata value is
> > out
> > of the range of the data type.
> >
> >
> Thanks Evan.  Just so I'm clear, you're saying that the raster had its
> nodata value set to something that exceeded its datatype range.

Yes.

  In that
> case, it doesn't make sense to interpret the  -3.4028230607370965e+38 as
> "0" in the byte range,

Yes, QGIS should ignore the nodata value, as if there was nodata reported

> but rather as a nodata value defined for the valid
> pixels in the raster?

I've not verified if it actually takes 0 as a nodata value, but if it does, yes
that's unexpected.

>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sovofmad at yandex.ru  Tue Sep  2 01:12:44 2014
From: sovofmad at yandex.ru (Storkur)
Date: Tue, 2 Sep 2014 01:12:44 -0700 (PDT)
Subject: [gdal-dev] Convert S57 to image with S52 rendering
In-Reply-To: <1409586428.71993.YahooMailBasic@web160504.mail.bf1.yahoo.com>
References: <4FFE8D3C.5030706@t-kartor.se>
	<1409040273309-5158302.post@n6.nabble.com>
	<1409149339.76440.YahooMailBasic@web160504.mail.bf1.yahoo.com>
	<1409292659969-5158977.post@n6.nabble.com>
	<1409321505.38788.YahooMailBasic@web160504.mail.bf1.yahoo.com>
	<1409562034328-5159378.post@n6.nabble.com>
	<1409586428.71993.YahooMailBasic@web160504.mail.bf1.yahoo.com>
Message-ID: <1409645564915-5159559.post@n6.nabble.com>

Sylvain,

I couldn't build changing this line of code.
But i have succeed using another version of Linux.
I have built s52 on Ubuntu 14.04 and on our "target" platform Astra Linux
(based on debian)
On Ubuntu i running test/s52glx it displays some data from my file.
But in Astra it says 
/S57data.c:337 in S57_geo2prj3dv(): ERROR: nothing to project to .. load a
chart frist!
**
ERROR:S57data.c:339:S57_geo2prj3dv: assertion failed: (0)
S52.c:1332 in _trapSIG(): Signal SIGABRT(6) cought .. Abort/



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Convert-S57-to-image-with-S52-rendering-tp4987897p5159559.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From strk at keybit.net  Tue Sep  2 01:27:10 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 2 Sep 2014 10:27:10 +0200
Subject: [gdal-dev] Identity affine handling in
 GDALCreateGenImgProjTransformer2
In-Reply-To: <1409587000.5404973827897@imp.free.fr>
References: <20140901111638.GA20883@localhost>
	<1409579123.5404787327596@imp.free.fr>
	<20140901144029.GB4607@localhost>
	<1409583624.54048a08d82ec@imp.free.fr>
	<20140901150925.GC4607@localhost>
	<1409587000.5404973827897@imp.free.fr>
Message-ID: <20140902082710.GC4166@localhost>

On Mon, Sep 01, 2014 at 05:56:40PM +0200, Even Rouault wrote:
> Selon Sandro Santilli <strk at keybit.net>:

> > I did make a fresh rebuild in gdal/ dir.
> 
> And still crashing ? Where does it crash ?

  TEST: vrt_read_5 ... Segmentation fault (core dumped)

Core was generated by `python run_all.py'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  __strncasecmp_l_avx () at ../sysdeps/x86_64/multiarch/strcmp-sse42.S:164
164     ../sysdeps/x86_64/multiarch/strcmp-sse42.S: No such file or directory.
(gdb) bt
#0  __strncasecmp_l_avx () at ../sysdeps/x86_64/multiarch/strcmp-sse42.S:164
#1  0x00007f8ce2578a4a in NUMPYDataset::Open (poOpenInfo=0x7fffee719840) at extensions/gdal_array_wrap.cpp:3370
#2  0x00007f8cf51b3ae5 in GDALIdentifyDriver (pszFilename=pszFilename at entry=0x7f8ceb75c214 "/vsimem/vrt_read_5.vrt",
    papszFileList=papszFileList at entry=0x0) at gdaldriver.cpp:1713
#3  0x00007f8cf51b3bb2 in GDALDriver::QuietDelete (pszName=pszName at entry=0x7f8ceb75c214 "/vsimem/vrt_read_5.vrt") at gdaldriver.cpp:810
#4  0x00007f8cf51b4b84 in GDALDriver::CreateCopy (this=0x2201170, pszFilename=0x7f8ceb75c214 "/vsimem/vrt_read_5.vrt", poSrcDS=0x5d0c270,
    bStrict=1, papszOptions=0x0, pfnProgress=0x7f8cf51fcfe0 <GDALDummyProgress(double, char const*, void*)>, pProgressData=0x2508290)
    at gdaldriver.cpp:714
#5  0x00007f8cf5a0e702 in GDALDriverShadow_CreateCopy (callback_data=0x2508290, callback=<optimized out>, options=0x0, strict=1, src=0x5d0c270,
    utf8_path=0x7f8ceb75c214 "/vsimem/vrt_read_5.vrt", self=0x2201170) at extensions/gdal_wrap.cpp:3557
#6  _wrap_Driver_CreateCopy (args=<optimized out>, kwargs=<optimized out>) at extensions/gdal_wrap.cpp:8614
#7  0x000000000052f936 in PyEval_EvalFrameEx ()
#8  0x000000000055c594 in PyEval_EvalCodeEx ()

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From lucadeluge at gmail.com  Tue Sep  2 06:47:54 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 2 Sep 2014 15:47:54 +0200
Subject: [gdal-dev] ERROR: Points of LinearRing do not form a closed
	linestring
Message-ID: <CAK4m-3zDdft2+SrqBO9o-w=Dzk9NYA8NmGuh8SqY+CRWZNZbwA@mail.gmail.com>

Hi everybody,

I created a script to filter some lidar data, and It worked perfectly
some weeks ago.
Now I have to run with different data but I obtain the following error
when I try to overlaps two geometry.

ERROR 1: IllegalArgumentException: Points of LinearRing do not form a
closed linestring

The code that I'm using is something similar to this

import osgeo.ogr as ogr
import osgeo.osr as osr
# this is the input vector file to read the features for filter the lidar point
inDatasource = ogr.Open('/incoming/james_lidar.json')
inLayer = inDatasource.GetLayer()
inFeature = inLayer.GetFeature(0)
geom = inFeature.geometry()
geom.ExportToWkt()
'POLYGON ((661300 5115700,661300 5117600,662300 5117600,662300 5115700))'
# this is the polygon of a lidar tile bounding box
wkt = 'POLYGON((660000 5116000,660000 5118000,661793 5118000,661793
5116000,660000 5116000))'
poly = ogr.CreateGeometryFromWkt(wkt)
geoms.Overlaps(poly)
ERROR 1: IllegalArgumentException: Points of LinearRing do not form a
closed linestring

What I'm doing wrong?

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at spatialys.com  Tue Sep  2 07:06:32 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Sep 2014 16:06:32 +0200
Subject: [gdal-dev] ERROR: Points of LinearRing do not form a closed
	linestring
In-Reply-To: <CAK4m-3zDdft2+SrqBO9o-w=Dzk9NYA8NmGuh8SqY+CRWZNZbwA@mail.gmail.com>
References: <CAK4m-3zDdft2+SrqBO9o-w=Dzk9NYA8NmGuh8SqY+CRWZNZbwA@mail.gmail.com>
Message-ID: <1409666792.5405cee8d87b5@imp.free.fr>

Selon Luca Delucchi <lucadeluge at gmail.com>:

> Hi everybody,
>
> I created a script to filter some lidar data, and It worked perfectly
> some weeks ago.
> Now I have to run with different data but I obtain the following error
> when I try to overlaps two geometry.
>
> ERROR 1: IllegalArgumentException: Points of LinearRing do not form a
> closed linestring
>
> The code that I'm using is something similar to this
>
> import osgeo.ogr as ogr
> import osgeo.osr as osr
> # this is the input vector file to read the features for filter the lidar
> point
> inDatasource = ogr.Open('/incoming/james_lidar.json')
> inLayer = inDatasource.GetLayer()
> inFeature = inLayer.GetFeature(0)
> geom = inFeature.geometry()
> geom.ExportToWkt()
> 'POLYGON ((661300 5115700,661300 5117600,662300 5117600,662300 5115700))'
> # this is the polygon of a lidar tile bounding box
> wkt = 'POLYGON((660000 5116000,660000 5118000,661793 5118000,661793
> 5116000,660000 5116000))'
> poly = ogr.CreateGeometryFromWkt(wkt)
> geoms.Overlaps(poly)
> ERROR 1: IllegalArgumentException: Points of LinearRing do not form a
> closed linestring
>
> What I'm doing wrong?

Just as suggested by the error message, your polygon is not closed. You must
repeat the first point as last point to form a valid polygon.

>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sylvain_duclos at yahoo.com  Tue Sep  2 07:51:43 2014
From: sylvain_duclos at yahoo.com (s duclos)
Date: Tue, 2 Sep 2014 07:51:43 -0700
Subject: [gdal-dev] Convert S57 to image with S52 rendering
In-Reply-To: <1409645564915-5159559.post@n6.nabble.com>
Message-ID: <1409669503.43111.YahooMailBasic@web160506.mail.bf1.yahoo.com>

Storkur,

For further question on S52 I think it would be best if we e-mail directly
instead of gdal-dev.

All answer directly to you in my next mail.

rgds,

Sylvain.

--------------------------------------------
On Tue, 9/2/14, Storkur <sovofmad at yandex.ru> wrote:

 Subject: Re: [gdal-dev] Convert S57 to image with S52 rendering
 To: gdal-dev at lists.osgeo.org
 Received: Tuesday, September 2, 2014, 4:12 AM
 
 Sylvain,
 
 I couldn't build changing
 this line of code.
 But i have succeed using
 another version of Linux.
 I have built s52
 on Ubuntu 14.04 and on our "target" platform Astra
 Linux
 (based on debian)
 On
 Ubuntu i running test/s52glx it displays some data from my
 file.
 But in Astra it says 
 /S57data.c:337 in S57_geo2prj3dv(): ERROR:
 nothing to project to .. load a
 chart
 frist!
 **
 ERROR:S57data.c:339:S57_geo2prj3dv: assertion
 failed: (0)
 S52.c:1332 in _trapSIG(): Signal
 SIGABRT(6) cought .. Abort/
 
 
 
 --
 View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Convert-S57-to-image-with-S52-rendering-tp4987897p5159559.html
 Sent
 from the GDAL - Dev mailing list archive at Nabble.com.
 _______________________________________________
 gdal-dev mailing list
 gdal-dev at lists.osgeo.org
 http://lists.osgeo.org/mailman/listinfo/gdal-dev
 

From maw269 at gmail.com  Tue Sep  2 14:59:51 2014
From: maw269 at gmail.com (maw269)
Date: Tue, 2 Sep 2014 14:59:51 -0700 (PDT)
Subject: [gdal-dev] GDAL 1.11 and EPSG:3857
Message-ID: <1409695191255-5159753.post@n6.nabble.com>

Using GDAL 1.11

When I use the gdalwarp command:

gdalwarp -s_srs ESRI::EPG94.prj -t_srs epsg:*900913 *EPG94.ecw 900913.tif
I get legitimate gdalinfo with datum and spheroid defined.

Driver: GTiff/GeoTIFF
Files: 900913.tif
Size is 76318, 41566
Coordinate System is:
PROJCS["Google Maps Global Mercator",
    GEOGCS["WGS 84",
        *DATUM["WGS_1984",*
            *SPHEROID["WGS 84",6378137,298.257223563,*
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (13363025.433129203000000,-2674166.549594078200000)
Pixel Size = (0.163524580961778,-0.163524580961778)
Metadata:
  AREA_OR_POINT=Area
  COLORSPACE=RGB
  COMPRESSION_RATE_TARGET=9
  VERSION=2
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (13363025.433,-2674166.550) (120d 2'31.56"E, 23d29'18.24"S)
Lower Left  (13363025.433,-2680963.612) (120d 2'31.56"E, 23d32'40.94"S)
Upper Right (13375505.302,-2674166.550) (120d 9'15.15"E, 23d29'18.24"S)
Lower Right (13375505.302,-2680963.612) (120d 9'15.15"E, 23d32'40.94"S)
Center      (13369265.368,-2677565.081) (120d 5'53.36"E, 23d30'59.60"S)
Band 1 Block=76318x1 Type=Byte, ColorInterp=Red
  Description = Red
Band 2 Block=76318x1 Type=Byte, ColorInterp=Green
  Description = Green
Band 3 Block=76318x1 Type=Byte, ColorInterp=Blue
  Description = Blue
  
-----------------------------------------------------------------  
When I use the gdalwarp command:

gdalwarp -s_srs ESRI::EPG94.prj -t_srs epsg:*3857 *EPG94.ecw 3857.tif
I get illegitimate gdalinfo with datum and spheroid unknown and
unretrievable:

Driver: GTiff/GeoTIFF
Files: 3857.tif
Size is 76318, 41566
Coordinate System is:
LOCAL_CS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        *DATUM["unknown",*
            *SPHEROID["unretrievable - using*
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    AUTHORITY["EPSG","3857"],
    UNIT["metre",1]]
Origin = (13363025.433129203000000,-2674166
Pixel Size = (0.163524580961778,-0.16352458
Metadata:
  AREA_OR_POINT=Area
  COLORSPACE=RGB
  COMPRESSION_RATE_TARGET=9
  VERSION=2
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (13363025.433,-2674166.550)
Lower Left  (13363025.433,-2680963.612)
Upper Right (13375505.302,-2674166.550)
Lower Right (13375505.302,-2680963.612)
Center      (13369265.368,-2677565.081)
Band 1 Block=76318x1 Type=Byte, ColorInterp
  Description = Red
Band 2 Block=76318x1 Type=Byte, ColorInterp
  Description = Green
Band 3 Block=76318x1 Type=Byte, ColorInterp
  Description = Blue

 
This messes up my geoserver image pyramid when I try to use it.
---------------------------------

It seems epsg:900913 works but epsg:3857 does not.
The thing is, gdalwarp to 3857 worked in gdal 1.10 

Thanks,

Matt
 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-and-EPSG-3857-tp5159753.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Tue Sep  2 15:12:39 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Sep 2014 00:12:39 +0200
Subject: [gdal-dev] GDAL 1.11 and EPSG:3857
In-Reply-To: <1409695191255-5159753.post@n6.nabble.com>
References: <1409695191255-5159753.post@n6.nabble.com>
Message-ID: <201409030012.39387.even.rouault@spatialys.com>

Le mardi 02 septembre 2014 23:59:51, maw269 a ?crit :

> 
> It seems epsg:900913 works but epsg:3857 does not.
> The thing is, gdalwarp to 3857 worked in gdal 1.10

Matt,

Works ok for me. See below the output of something gdalwarp'ed to 3857 with 
1.11. Are you sure that your GDAL_DATA is correctly set up ?

$ gdalinfo out.tif
Driver: GTiff/GeoTIFF
Files: out.tif
Size is 20, 20
Coordinate System is:
PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 
+x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
    AUTHORITY["EPSG","3857"]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (  3d57'32.60"E, 31d54'30.99"N)
Lower Left  (  440720.000, 3750120.000) (  3d57'32.60"E, 31d53'58.04"N)
Upper Right (  441920.000, 3751320.000) (  3d58'11.41"E, 31d54'30.99"N)
Lower Right (  441920.000, 3750120.000) (  3d58'11.41"E, 31d53'58.04"N)
Center      (  441320.000, 3750720.000) (  3d57'52.00"E, 31d54'14.52"N)
Band 1 Block=20x20 Type=Byte, ColorInterp=Gray

Even

> 
> Thanks,
> 
> Matt
> 
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-and-EPSG-3857-tp5159753.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From maw269 at gmail.com  Tue Sep  2 15:18:57 2014
From: maw269 at gmail.com (maw269)
Date: Tue, 2 Sep 2014 15:18:57 -0700 (PDT)
Subject: [gdal-dev] GDAL 1.11 and EPSG:3857
In-Reply-To: <201409030012.39387.even.rouault@spatialys.com>
References: <1409695191255-5159753.post@n6.nabble.com>
	<201409030012.39387.even.rouault@spatialys.com>
Message-ID: <1409696337345-5159755.post@n6.nabble.com>

Even,
Thanks for the quick reply.

I am using GDAL from the OSGeo4W suite.
I have my gdal_data set to:

set GDAL_DATA=C:\OSGeo4W64\share\gdal

Matt



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-and-EPSG-3857-tp5159753p5159755.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From rd7190 at gmail.com  Tue Sep  2 16:24:49 2014
From: rd7190 at gmail.com (Ravi Desai)
Date: Tue, 02 Sep 2014 19:24:49 -0400
Subject: [gdal-dev] Can anyone else replicate this bug?
Message-ID: <540651C1.3000009@gmail.com>

Hello everyone,
   I unziped this file:
http://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/files-fichiers/gct_000a11a_e.zip 
,
   and then fed the directory into the following command:
     ogr2ogr -t_srs epsg:4326 -f CSV output.csv 
canada_census_boundaries/ -lco GEOMETRY=AS_WKT

Line 4 ends with
   ...,-76.529666044999942 
44.249647768000038))",5210015.00,0015.00,521,Kingston,B,35521,35,Ontario
but line 5 ends with
   ...-81.066175268999913 
42.,5550100.01,0100.01,555,London,B,35555,35,Ontario

As you can see, the geometry is truncated and the ending quotes are also 
not applied to it, creating invalid CSV.

Would anyone else be able to replicate this, just to ensure this isn't 
due to something on my system?

Thank you,
-ravi

From ljvillarin30 at gmail.com  Tue Sep  2 19:43:41 2014
From: ljvillarin30 at gmail.com (Love)
Date: Wed, 3 Sep 2014 10:43:41 +0800
Subject: [gdal-dev] gdal-dev Digest, Vol 123, Issue 64
In-Reply-To: <mailman.26909.1409550013.1977.gdal-dev@lists.osgeo.org>
References: <mailman.26909.1409550013.1977.gdal-dev@lists.osgeo.org>
Message-ID: <CAMZEyL7=A_RpgOWjDNmxfxceb4396O+ZXkmyDb+hvuXmE2MMDQ@mail.gmail.com>

Hello,

I've decided to attached here the five hdf files which I used in stitching.
I just converted into GTiff and warped. Definitely, the two blocks doesn't
meet but I'm just not sure if these covers the middle area as what you've
said. You could give it a try if you can stitch these well.

Thanks!


On Mon, Sep 1, 2014 at 1:40 PM, <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Re: OGR C API Spy (Even Rouault)
>    2. Appveyor Windows Continuous Integration (Even Rouault)
>    3. Re: OGR C API Spy (Robert Coup)
>    4. Re: OGR C API Spy (Even Rouault)
>    5. Re: Problem encountered in stitching/merging the raster   files
>       (user_name)
>    6. Re: Problem encountered in stitching/merging the raster   files
>       (Jukka Rahkonen)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sun, 31 Aug 2014 21:14:15 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312114.15354.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > That's cool :) Is there any particular performance penalty to compiling
> > *with* OGRAPISPY_ENABLED and then running *without*
> > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > set?
>
> Hi Robert,
>
> Hopefully no, see for example :
>
> OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
>
> {
>     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
>
> #ifdef OGRAPISPY_ENABLED
>     if( bOGRAPISpyEnabled )
>         OGRAPISpy_L_GetNextFeature(hLayer);
> #endif
>
>     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> }
>
> I cannot imagine something with less overhead. (if you exclude dynamic
> binary
> patching techniques ;-) )
>
> OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that tests
> if
> the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
>
> Even
>
> >
> > Rob :)
> >
> >
> > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Hi,
> > >
> > > This will not be of interest for the crowds, but mainly for OGR driver
> > > developers (and potentially also to get precise bug reports from
> users).
> > > I'm
> > > currently adding update capabilities to the MITAB driver, and while
> > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > trigger bugs, but
> > > that I had issues to replicate afterwards. This spy mechanism enables
> to
> > > have
> > > recording of all relevant calls to be able to replicate them exactly
> > > afterwards.
> > >
> > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > >
> > > Related autotest script :
> > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 2
> Date: Sun, 31 Aug 2014 21:38:10 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Appveyor Windows Continuous Integration
> Message-ID: <201408312138.10607.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="us-ascii"
>
> Hi,
>
> I've just experimented with Appveyor, a hosted continuous integration
> solution
> for Windows to do Windows GDAL builds. This is not completely convincing,
> since a optimized build of GDAL, without any optional dependency, takes
> more
> than 30 minutes, and then gets killed since this is the limit for the free
> (as
> in free beer) profile... I've managed to make it work with debug builds
> that
> run in 25 minutes. So no time to run tests. Results can be seen at
> https://ci.appveyor.com/project/rouault/gdal-coverage .
> This is still interesting since it uses Visual Studio 2013 (a.k.a VC12 /
> MSVC
> 1800), which Tamas doesn't yet use on http://www.gisinternals.com/sdk/
> Contrary to Travis-CI, there's no IRC notification yet in Appveyor
> unfortunately, so you have to watch the previous mentionned URL. I could
> perhaps enable email notices to gdal-commits at lists.osgeo.org, but did not
> do
> it for know.
> A new build will be launched everytime my cron job runs (i.e. every 15
> minutes) *and* something has been committed in SVN.
>
> I've also updated http://trac.osgeo.org/gdal/wiki/Buildbot (which is badly
> named now...) with all the various C.I. setups that currently exist.
>
> Note: some time ago I also experimented with Visual Studio Express 2005 and
> 2008 under Wine. https://travis-ci.org/rouault/vcexpress2005 and
> https://travis-ci.org/rouault/vcexpress2008. I didn't enable them on each
> commit, since I'm not sure downloading the compiler and sdk from MS each
> time
> is a good idea... The builds were faster than with Appveyor (quite ironical
> !). And for some reason I couldn't manage to install Python under Wine
> once VS
> is installed. So no autotest too.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 1 Sep 2014 08:44:00 +1200
> From: Robert Coup <robert.coup at koordinates.com>
> To: Even Rouault <even.rouault at spatialys.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID:
>         <
> CAFLLRpLW5ngjroRUGGwz+Kf5K0eUYtdoACrypB8xMJ5vSF1vkA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Excellent :)
>
> There's obviously no nice run-time solution using the C++ API, though I
> guess callgrind/linux-perf can do it - do you have any experience worth
> sharing there?
>
> Rob.
>
>
> On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > That's cool :) Is there any particular performance penalty to compiling
> > > *with* OGRAPISPY_ENABLED and then running *without*
> > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > set?
> >
> > Hi Robert,
> >
> > Hopefully no, see for example :
> >
> > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> >
> > {
> >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> >
> > #ifdef OGRAPISPY_ENABLED
> >     if( bOGRAPISpyEnabled )
> >         OGRAPISpy_L_GetNextFeature(hLayer);
> > #endif
> >
> >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > }
> >
> > I cannot imagine something with less overhead. (if you exclude dynamic
> > binary
> > patching techniques ;-) )
> >
> > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> tests
> > if
> > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> >
> > Even
> >
> > >
> > > Rob :)
> > >
> > >
> > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > even.rouault at spatialys.com>
> > >
> > > wrote:
> > > > Hi,
> > > >
> > > > This will not be of interest for the crowds, but mainly for OGR
> driver
> > > > developers (and potentially also to get precise bug reports from
> > users).
> > > > I'm
> > > > currently adding update capabilities to the MITAB driver, and while
> > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > trigger bugs, but
> > > > that I had issues to replicate afterwards. This spy mechanism enables
> > to
> > > > have
> > > > recording of all relevant calls to be able to replicate them exactly
> > > > afterwards.
> > > >
> > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > >
> > > > Related autotest script :
> > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > >
> > > > Even
> > > >
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
>
>
>
> --
>
> *Koordinates*PO Box 1604, Shortland St, Auckland 1140, New Zealand
> Phone +64-9-966 0433 koordinates.com <https://koordinates.com/about>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140901/e7014a88/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 4
> Date: Sun, 31 Aug 2014 22:52:50 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312252.50664.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 22:44:00, Robert Coup a ?crit :
> > Excellent :)
> >
> > There's obviously no nice run-time solution using the C++ API,
>
> Yes, that could be possible if the C++ public API had redirection to driver
> implementation methods. In GDAL, we have that with some methods like
> RasterIO() vs IRasterIO(). In OGR, that only exists now with CreateLayer()
> /
> ICreateLayer() (change done during RFC46)
>
> > though I
> > guess callgrind/linux-perf can do it - do you have any experience worth
> > sharing there?
>
> Hum, my OGR API Spy hasn't been design to do performance profiling. That
> would
> require a pre- and post- calls.
> Long time ago, I had use callgrind, but not with GDAL. Works, slowly, and
> AFAIR can only measure CPU time, whereas GDAL does typically lots of I/O,
> so
> CPU time isn't always very significant. A more lightweight and faster
> solution
> that I've sometimes used is sysprof (not sure this is really maintained).
> Only
> sees CPU activity too.
>
> >
> > Rob.
> >
> >
> > On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > > That's cool :) Is there any particular performance penalty to
> compiling
> > > > *with* OGRAPISPY_ENABLED and then running *without*
> > > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > > set?
> > >
> > > Hi Robert,
> > >
> > > Hopefully no, see for example :
> > >
> > > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> > >
> > > {
> > >
> > >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> > >
> > > #ifdef OGRAPISPY_ENABLED
> > >
> > >     if( bOGRAPISpyEnabled )
> > >
> > >         OGRAPISpy_L_GetNextFeature(hLayer);
> > >
> > > #endif
> > >
> > >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > >
> > > }
> > >
> > > I cannot imagine something with less overhead. (if you exclude dynamic
> > > binary
> > > patching techniques ;-) )
> > >
> > > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> > > tests if
> > > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> > >
> > > Even
> > >
> > > > Rob :)
> > > >
> > > >
> > > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > >
> > > even.rouault at spatialys.com>
> > >
> > > > wrote:
> > > > > Hi,
> > > > >
> > > > > This will not be of interest for the crowds, but mainly for OGR
> > > > > driver developers (and potentially also to get precise bug reports
> > > > > from
> > >
> > > users).
> > >
> > > > > I'm
> > > > > currently adding update capabilities to the MITAB driver, and while
> > > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > > trigger bugs, but
> > > > > that I had issues to replicate afterwards. This spy mechanism
> enables
> > >
> > > to
> > >
> > > > > have
> > > > > recording of all relevant calls to be able to replicate them
> exactly
> > > > > afterwards.
> > > > >
> > > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > > >
> > > > > Related autotest script :
> > > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > > >
> > > > > Even
> > > > >
> > > > > --
> > > > > Spatialys - Geospatial professional services
> > > > > http://www.spatialys.com
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 5
> Date: Sun, 31 Aug 2014 21:03:50 -0700 (PDT)
> From: user_name <ljvillarin30 at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID:
>         <
> CAMZEyL5sv5FnVrPbK8MLU6Tp4XvMND-5ndRbwZ7J0Qe9S7iaVA at mail.gmail.com>
> Content-Type: text/plain; charset="us-ascii"
>
> I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It really didn't stitch/mosaic well. The output is still the same. I'm
> really confused?
>
>
>
>
> On Sat, Aug 30, 2014 at 12:31 AM, Rahkonen Jukka (Tike) [via OSGeo.org] <
> ml-node+s1560n5159142h49 at n6.nabble.com> wrote:
>
> > user_name <ljvillarin30 <at> gmail.com> writes:
> >
> > >
> > > I've tried your suggestion but then the result was this:
> > > Note: I used OpenEV to open the file.
> > >
> > > <http://osgeo-org.1560.x6.nabble.com/file/n5158992/openev.gif>
> >
> > Hi,
> >
> > Result looks like it is because the black slivers which are created by
> > warping are not made transparent. Have a try by adding -dstnodata 0 0 0
> to
> > the gdalwarp command.
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http://user/SendEmail.jtp?type=node&node=5159142&i=0>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> >
> >
> http://osgeo-org.1560.x6.nabble.com/Problem-encountered-in-stitching-merging-the-raster-files-tp5158957p5159142.html
> >  To unsubscribe from Problem encountered in stitching/merging the raster
> > files, click here
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5158957&code=bGp2aWxsYXJpbjMwQGdtYWlsLmNvbXw1MTU4OTU3fC03MDA3NDA3OTM=
> >
> > .
> > NAML
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml
> >
> >
>
>
> transparent.tif (77K) <
> http://osgeo-org.1560.x6.nabble.com/attachment/5159338/0/transparent.tif>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Re-Problem-encountered-in-stitching-merging-the-raster-files-tp5159338.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140831/701cb8f4/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 6
> Date: Mon, 1 Sep 2014 05:39:51 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID: <loom.20140901T063843-87 at post.gmane.org>
> Content-Type: text/plain; charset=us-ascii
>
> user_name <ljvillarin30 <at> gmail.com> writes:
>
> >
> >
> >
> > I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It
> really didn't stitch/mosaic well. The output is still the same. I'm really
> confused?
> >
> >
>
> Hi,
>
> I am confused too. You get two blocks, western one combined from two images
> and eastern one combined from three images. For me it looks that the blocks
> do not meet simply because your original satellite images do not cover that
> internal area and the image which you attached to your firs mail shows all
> the image data that you have. For total coverage you should acquire more
> images into your mosaic. Correct me if you are sure that your originals
> cover also the middle area.
>
> -Jukka Rahkonen-
>
>
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 123, Issue 64
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140903/216ae2f8/attachment-0001.html>

From ljvillarin30 at gmail.com  Tue Sep  2 19:38:24 2014
From: ljvillarin30 at gmail.com (user_name)
Date: Tue, 2 Sep 2014 19:38:24 -0700 (PDT)
Subject: [gdal-dev] gdal-dev Digest, Vol 123, Issue 64
Message-ID: <CAMZEyL7=A_RpgOWjDNmxfxceb4396O+ZXkmyDb+hvuXmE2MMDQ@mail.gmail.com>

Hello,

I've decided to attached here the five hdf files which I used in stitching.
I just converted into GTiff and warped. Definitely, the two blocks doesn't
meet but I'm just not sure if these covers the middle area as what you've
said. You could give it a try if you can stitch these well.

Thanks!


On Mon, Sep 1, 2014 at 1:40 PM, <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Re: OGR C API Spy (Even Rouault)
>    2. Appveyor Windows Continuous Integration (Even Rouault)
>    3. Re: OGR C API Spy (Robert Coup)
>    4. Re: OGR C API Spy (Even Rouault)
>    5. Re: Problem encountered in stitching/merging the raster   files
>       (user_name)
>    6. Re: Problem encountered in stitching/merging the raster   files
>       (Jukka Rahkonen)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sun, 31 Aug 2014 21:14:15 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312114.15354.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > That's cool :) Is there any particular performance penalty to compiling
> > *with* OGRAPISPY_ENABLED and then running *without*
> > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > set?
>
> Hi Robert,
>
> Hopefully no, see for example :
>
> OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
>
> {
>     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
>
> #ifdef OGRAPISPY_ENABLED
>     if( bOGRAPISpyEnabled )
>         OGRAPISpy_L_GetNextFeature(hLayer);
> #endif
>
>     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> }
>
> I cannot imagine something with less overhead. (if you exclude dynamic
> binary
> patching techniques ;-) )
>
> OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that tests
> if
> the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
>
> Even
>
> >
> > Rob :)
> >
> >
> > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Hi,
> > >
> > > This will not be of interest for the crowds, but mainly for OGR driver
> > > developers (and potentially also to get precise bug reports from
> users).
> > > I'm
> > > currently adding update capabilities to the MITAB driver, and while
> > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > trigger bugs, but
> > > that I had issues to replicate afterwards. This spy mechanism enables
> to
> > > have
> > > recording of all relevant calls to be able to replicate them exactly
> > > afterwards.
> > >
> > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > >
> > > Related autotest script :
> > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 2
> Date: Sun, 31 Aug 2014 21:38:10 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Appveyor Windows Continuous Integration
> Message-ID: <201408312138.10607.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="us-ascii"
>
> Hi,
>
> I've just experimented with Appveyor, a hosted continuous integration
> solution
> for Windows to do Windows GDAL builds. This is not completely convincing,
> since a optimized build of GDAL, without any optional dependency, takes
> more
> than 30 minutes, and then gets killed since this is the limit for the free
> (as
> in free beer) profile... I've managed to make it work with debug builds
> that
> run in 25 minutes. So no time to run tests. Results can be seen at
> https://ci.appveyor.com/project/rouault/gdal-coverage .
> This is still interesting since it uses Visual Studio 2013 (a.k.a VC12 /
> MSVC
> 1800), which Tamas doesn't yet use on http://www.gisinternals.com/sdk/
> Contrary to Travis-CI, there's no IRC notification yet in Appveyor
> unfortunately, so you have to watch the previous mentionned URL. I could
> perhaps enable email notices to gdal-commits at lists.osgeo.org, but did not
> do
> it for know.
> A new build will be launched everytime my cron job runs (i.e. every 15
> minutes) *and* something has been committed in SVN.
>
> I've also updated http://trac.osgeo.org/gdal/wiki/Buildbot (which is badly
> named now...) with all the various C.I. setups that currently exist.
>
> Note: some time ago I also experimented with Visual Studio Express 2005 and
> 2008 under Wine. https://travis-ci.org/rouault/vcexpress2005 and
> https://travis-ci.org/rouault/vcexpress2008. I didn't enable them on each
> commit, since I'm not sure downloading the compiler and sdk from MS each
> time
> is a good idea... The builds were faster than with Appveyor (quite ironical
> !). And for some reason I couldn't manage to install Python under Wine
> once VS
> is installed. So no autotest too.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 1 Sep 2014 08:44:00 +1200
> From: Robert Coup <robert.coup at koordinates.com>
> To: Even Rouault <even.rouault at spatialys.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID:
>         <
> CAFLLRpLW5ngjroRUGGwz+Kf5K0eUYtdoACrypB8xMJ5vSF1vkA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Excellent :)
>
> There's obviously no nice run-time solution using the C++ API, though I
> guess callgrind/linux-perf can do it - do you have any experience worth
> sharing there?
>
> Rob.
>
>
> On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > That's cool :) Is there any particular performance penalty to compiling
> > > *with* OGRAPISPY_ENABLED and then running *without*
> > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > set?
> >
> > Hi Robert,
> >
> > Hopefully no, see for example :
> >
> > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> >
> > {
> >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> >
> > #ifdef OGRAPISPY_ENABLED
> >     if( bOGRAPISpyEnabled )
> >         OGRAPISpy_L_GetNextFeature(hLayer);
> > #endif
> >
> >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > }
> >
> > I cannot imagine something with less overhead. (if you exclude dynamic
> > binary
> > patching techniques ;-) )
> >
> > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> tests
> > if
> > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> >
> > Even
> >
> > >
> > > Rob :)
> > >
> > >
> > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > even.rouault at spatialys.com>
> > >
> > > wrote:
> > > > Hi,
> > > >
> > > > This will not be of interest for the crowds, but mainly for OGR
> driver
> > > > developers (and potentially also to get precise bug reports from
> > users).
> > > > I'm
> > > > currently adding update capabilities to the MITAB driver, and while
> > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > trigger bugs, but
> > > > that I had issues to replicate afterwards. This spy mechanism enables
> > to
> > > > have
> > > > recording of all relevant calls to be able to replicate them exactly
> > > > afterwards.
> > > >
> > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > >
> > > > Related autotest script :
> > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > >
> > > > Even
> > > >
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
>
>
>
> --
>
> *Koordinates*PO Box 1604, Shortland St, Auckland 1140, New Zealand
> Phone +64-9-966 0433 koordinates.com <https://koordinates.com/about>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140901/e7014a88/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 4
> Date: Sun, 31 Aug 2014 22:52:50 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312252.50664.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 22:44:00, Robert Coup a ?crit :
> > Excellent :)
> >
> > There's obviously no nice run-time solution using the C++ API,
>
> Yes, that could be possible if the C++ public API had redirection to driver
> implementation methods. In GDAL, we have that with some methods like
> RasterIO() vs IRasterIO(). In OGR, that only exists now with CreateLayer()
> /
> ICreateLayer() (change done during RFC46)
>
> > though I
> > guess callgrind/linux-perf can do it - do you have any experience worth
> > sharing there?
>
> Hum, my OGR API Spy hasn't been design to do performance profiling. That
> would
> require a pre- and post- calls.
> Long time ago, I had use callgrind, but not with GDAL. Works, slowly, and
> AFAIR can only measure CPU time, whereas GDAL does typically lots of I/O,
> so
> CPU time isn't always very significant. A more lightweight and faster
> solution
> that I've sometimes used is sysprof (not sure this is really maintained).
> Only
> sees CPU activity too.
>
> >
> > Rob.
> >
> >
> > On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > > That's cool :) Is there any particular performance penalty to
> compiling
> > > > *with* OGRAPISPY_ENABLED and then running *without*
> > > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > > set?
> > >
> > > Hi Robert,
> > >
> > > Hopefully no, see for example :
> > >
> > > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> > >
> > > {
> > >
> > >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> > >
> > > #ifdef OGRAPISPY_ENABLED
> > >
> > >     if( bOGRAPISpyEnabled )
> > >
> > >         OGRAPISpy_L_GetNextFeature(hLayer);
> > >
> > > #endif
> > >
> > >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > >
> > > }
> > >
> > > I cannot imagine something with less overhead. (if you exclude dynamic
> > > binary
> > > patching techniques ;-) )
> > >
> > > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> > > tests if
> > > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> > >
> > > Even
> > >
> > > > Rob :)
> > > >
> > > >
> > > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > >
> > > even.rouault at spatialys.com>
> > >
> > > > wrote:
> > > > > Hi,
> > > > >
> > > > > This will not be of interest for the crowds, but mainly for OGR
> > > > > driver developers (and potentially also to get precise bug reports
> > > > > from
> > >
> > > users).
> > >
> > > > > I'm
> > > > > currently adding update capabilities to the MITAB driver, and while
> > > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > > trigger bugs, but
> > > > > that I had issues to replicate afterwards. This spy mechanism
> enables
> > >
> > > to
> > >
> > > > > have
> > > > > recording of all relevant calls to be able to replicate them
> exactly
> > > > > afterwards.
> > > > >
> > > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > > >
> > > > > Related autotest script :
> > > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > > >
> > > > > Even
> > > > >
> > > > > --
> > > > > Spatialys - Geospatial professional services
> > > > > http://www.spatialys.com
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 5
> Date: Sun, 31 Aug 2014 21:03:50 -0700 (PDT)
> From: user_name <ljvillarin30 at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID:
>         <
> CAMZEyL5sv5FnVrPbK8MLU6Tp4XvMND-5ndRbwZ7J0Qe9S7iaVA at mail.gmail.com>
> Content-Type: text/plain; charset="us-ascii"
>
> I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It really didn't stitch/mosaic well. The output is still the same. I'm
> really confused?
>
>
>
>
> On Sat, Aug 30, 2014 at 12:31 AM, Rahkonen Jukka (Tike) [via OSGeo.org] <
> ml-node+s1560n5159142h49 at n6.nabble.com> wrote:
>
> > user_name <ljvillarin30 <at> gmail.com> writes:
> >
> > >
> > > I've tried your suggestion but then the result was this:
> > > Note: I used OpenEV to open the file.
> > >
> > > <http://osgeo-org.1560.x6.nabble.com/file/n5158992/openev.gif>
> >
> > Hi,
> >
> > Result looks like it is because the black slivers which are created by
> > warping are not made transparent. Have a try by adding -dstnodata 0 0 0
> to
> > the gdalwarp command.
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http://user/SendEmail.jtp?type=node&node=5159142&i=0>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> >
> >
> http://osgeo-org.1560.x6.nabble.com/Problem-encountered-in-stitching-merging-the-raster-files-tp5158957p5159142.html
> >  To unsubscribe from Problem encountered in stitching/merging the raster
> > files, click here
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5158957&code=bGp2aWxsYXJpbjMwQGdtYWlsLmNvbXw1MTU4OTU3fC03MDA3NDA3OTM=
> >
> > .
> > NAML
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml
> >
> >
>
>
> transparent.tif (77K) <
> http://osgeo-org.1560.x6.nabble.com/attachment/5159338/0/transparent.tif>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Re-Problem-encountered-in-stitching-merging-the-raster-files-tp5159338.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140831/701cb8f4/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 6
> Date: Mon, 1 Sep 2014 05:39:51 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID: <loom.20140901T063843-87 at post.gmane.org>
> Content-Type: text/plain; charset=us-ascii
>
> user_name <ljvillarin30 <at> gmail.com> writes:
>
> >
> >
> >
> > I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It
> really didn't stitch/mosaic well. The output is still the same. I'm really
> confused?
> >
> >
>
> Hi,
>
> I am confused too. You get two blocks, western one combined from two images
> and eastern one combined from three images. For me it looks that the blocks
> do not meet simply because your original satellite images do not cover that
> internal area and the image which you attached to your firs mail shows all
> the image data that you have. For total coverage you should acquire more
> images into your mosaic. Correct me if you are sure that your originals
> cover also the middle area.
>
> -Jukka Rahkonen-
>
>
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 123, Issue 64
> *****************************************
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-gdal-dev-Digest-Vol-123-Issue-64-tp5159766.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140902/216ae2f8/attachment-0001.html>

From ljvillarin30 at gmail.com  Tue Sep  2 22:04:56 2014
From: ljvillarin30 at gmail.com (Love)
Date: Wed, 3 Sep 2014 13:04:56 +0800
Subject: [gdal-dev] gdal-dev Digest, Vol 123, Issue 64
In-Reply-To: <mailman.26909.1409550013.1977.gdal-dev@lists.osgeo.org>
References: <mailman.26909.1409550013.1977.gdal-dev@lists.osgeo.org>
Message-ID: <CAMZEyL6uaxF=_x75NDwMc-Umw79F2sw6Ri_CN2OHv2CBFZZtBQ@mail.gmail.com>

Hello,

I've decided to attached here the five hdf files which I used in stitching.
I just converted into GTiff and warped. Definitely, the two blocks doesn't
meet but I'm just not sure if these covers the middle area as what you've
said. You could give it a try if you can stitch these well.

Thanks!?
 A2014197040000.L2_LAC.SeAHABS.hdf
<https://docs.google.com/file/d/0B3MWv8orIhBnbElMVzFTRVktRGc/edit?usp=drive_web>
??
 A2014197040500.L2_LAC.SeAHABS.hdf
<https://docs.google.com/file/d/0B3MWv8orIhBnWTB5SXF6Skc5djQ/edit?usp=drive_web>
??
 A2014197041000.L2_LAC.SeAHABS.hdf
<https://docs.google.com/file/d/0B3MWv8orIhBnNko3UWp3ekZHYXc/edit?usp=drive_web>
??
 A2014197054000.L2_LAC.SeAHABS.hdf
<https://docs.google.com/file/d/0B3MWv8orIhBnd0pqZ0NoblBiLXM/edit?usp=drive_web>
??
 A2014197054500.L2_LAC.SeAHABS.hdf
<https://docs.google.com/file/d/0B3MWv8orIhBndzdGb1VGZHBta00/edit?usp=drive_web>
?


On Mon, Sep 1, 2014 at 1:40 PM, <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Re: OGR C API Spy (Even Rouault)
>    2. Appveyor Windows Continuous Integration (Even Rouault)
>    3. Re: OGR C API Spy (Robert Coup)
>    4. Re: OGR C API Spy (Even Rouault)
>    5. Re: Problem encountered in stitching/merging the raster   files
>       (user_name)
>    6. Re: Problem encountered in stitching/merging the raster   files
>       (Jukka Rahkonen)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sun, 31 Aug 2014 21:14:15 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312114.15354.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > That's cool :) Is there any particular performance penalty to compiling
> > *with* OGRAPISPY_ENABLED and then running *without*
> > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > set?
>
> Hi Robert,
>
> Hopefully no, see for example :
>
> OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
>
> {
>     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
>
> #ifdef OGRAPISPY_ENABLED
>     if( bOGRAPISpyEnabled )
>         OGRAPISpy_L_GetNextFeature(hLayer);
> #endif
>
>     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> }
>
> I cannot imagine something with less overhead. (if you exclude dynamic
> binary
> patching techniques ;-) )
>
> OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that tests
> if
> the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
>
> Even
>
> >
> > Rob :)
> >
> >
> > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Hi,
> > >
> > > This will not be of interest for the crowds, but mainly for OGR driver
> > > developers (and potentially also to get precise bug reports from
> users).
> > > I'm
> > > currently adding update capabilities to the MITAB driver, and while
> > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > trigger bugs, but
> > > that I had issues to replicate afterwards. This spy mechanism enables
> to
> > > have
> > > recording of all relevant calls to be able to replicate them exactly
> > > afterwards.
> > >
> > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > >
> > > Related autotest script :
> > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 2
> Date: Sun, 31 Aug 2014 21:38:10 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Appveyor Windows Continuous Integration
> Message-ID: <201408312138.10607.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="us-ascii"
>
> Hi,
>
> I've just experimented with Appveyor, a hosted continuous integration
> solution
> for Windows to do Windows GDAL builds. This is not completely convincing,
> since a optimized build of GDAL, without any optional dependency, takes
> more
> than 30 minutes, and then gets killed since this is the limit for the free
> (as
> in free beer) profile... I've managed to make it work with debug builds
> that
> run in 25 minutes. So no time to run tests. Results can be seen at
> https://ci.appveyor.com/project/rouault/gdal-coverage .
> This is still interesting since it uses Visual Studio 2013 (a.k.a VC12 /
> MSVC
> 1800), which Tamas doesn't yet use on http://www.gisinternals.com/sdk/
> Contrary to Travis-CI, there's no IRC notification yet in Appveyor
> unfortunately, so you have to watch the previous mentionned URL. I could
> perhaps enable email notices to gdal-commits at lists.osgeo.org, but did not
> do
> it for know.
> A new build will be launched everytime my cron job runs (i.e. every 15
> minutes) *and* something has been committed in SVN.
>
> I've also updated http://trac.osgeo.org/gdal/wiki/Buildbot (which is badly
> named now...) with all the various C.I. setups that currently exist.
>
> Note: some time ago I also experimented with Visual Studio Express 2005 and
> 2008 under Wine. https://travis-ci.org/rouault/vcexpress2005 and
> https://travis-ci.org/rouault/vcexpress2008. I didn't enable them on each
> commit, since I'm not sure downloading the compiler and sdk from MS each
> time
> is a good idea... The builds were faster than with Appveyor (quite ironical
> !). And for some reason I couldn't manage to install Python under Wine
> once VS
> is installed. So no autotest too.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 1 Sep 2014 08:44:00 +1200
> From: Robert Coup <robert.coup at koordinates.com>
> To: Even Rouault <even.rouault at spatialys.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID:
>         <
> CAFLLRpLW5ngjroRUGGwz+Kf5K0eUYtdoACrypB8xMJ5vSF1vkA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Excellent :)
>
> There's obviously no nice run-time solution using the C++ API, though I
> guess callgrind/linux-perf can do it - do you have any experience worth
> sharing there?
>
> Rob.
>
>
> On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > That's cool :) Is there any particular performance penalty to compiling
> > > *with* OGRAPISPY_ENABLED and then running *without*
> > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > set?
> >
> > Hi Robert,
> >
> > Hopefully no, see for example :
> >
> > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> >
> > {
> >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> >
> > #ifdef OGRAPISPY_ENABLED
> >     if( bOGRAPISpyEnabled )
> >         OGRAPISpy_L_GetNextFeature(hLayer);
> > #endif
> >
> >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > }
> >
> > I cannot imagine something with less overhead. (if you exclude dynamic
> > binary
> > patching techniques ;-) )
> >
> > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> tests
> > if
> > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> >
> > Even
> >
> > >
> > > Rob :)
> > >
> > >
> > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > even.rouault at spatialys.com>
> > >
> > > wrote:
> > > > Hi,
> > > >
> > > > This will not be of interest for the crowds, but mainly for OGR
> driver
> > > > developers (and potentially also to get precise bug reports from
> > users).
> > > > I'm
> > > > currently adding update capabilities to the MITAB driver, and while
> > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > trigger bugs, but
> > > > that I had issues to replicate afterwards. This spy mechanism enables
> > to
> > > > have
> > > > recording of all relevant calls to be able to replicate them exactly
> > > > afterwards.
> > > >
> > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > >
> > > > Related autotest script :
> > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > >
> > > > Even
> > > >
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
>
>
>
> --
>
> *Koordinates*PO Box 1604, Shortland St, Auckland 1140, New Zealand
> Phone +64-9-966 0433 koordinates.com <https://koordinates.com/about>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140901/e7014a88/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 4
> Date: Sun, 31 Aug 2014 22:52:50 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: Robert Coup <robert.coup at koordinates.com>
> Cc: GDAL List <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] OGR C API Spy
> Message-ID: <201408312252.50664.even.rouault at spatialys.com>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Le dimanche 31 ao?t 2014 22:44:00, Robert Coup a ?crit :
> > Excellent :)
> >
> > There's obviously no nice run-time solution using the C++ API,
>
> Yes, that could be possible if the C++ public API had redirection to driver
> implementation methods. In GDAL, we have that with some methods like
> RasterIO() vs IRasterIO(). In OGR, that only exists now with CreateLayer()
> /
> ICreateLayer() (change done during RFC46)
>
> > though I
> > guess callgrind/linux-perf can do it - do you have any experience worth
> > sharing there?
>
> Hum, my OGR API Spy hasn't been design to do performance profiling. That
> would
> require a pre- and post- calls.
> Long time ago, I had use callgrind, but not with GDAL. Works, slowly, and
> AFAIR can only measure CPU time, whereas GDAL does typically lots of I/O,
> so
> CPU time isn't always very significant. A more lightweight and faster
> solution
> that I've sometimes used is sysprof (not sure this is really maintained).
> Only
> sees CPU activity too.
>
> >
> > Rob.
> >
> >
> > On Mon, Sep 1, 2014 at 7:14 AM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Le dimanche 31 ao?t 2014 20:50:41, Robert Coup a ?crit :
> > > > That's cool :) Is there any particular performance penalty to
> compiling
> > > > *with* OGRAPISPY_ENABLED and then running *without*
> > > > OGR_API_SPY_FILE/OGR_API_SPY_SNAPSHOT_PATH
> > > > set?
> > >
> > > Hi Robert,
> > >
> > > Hopefully no, see for example :
> > >
> > > OGRFeatureH OGR_L_GetNextFeature( OGRLayerH hLayer )
> > >
> > > {
> > >
> > >     VALIDATE_POINTER1( hLayer, "OGR_L_GetNextFeature", NULL );
> > >
> > > #ifdef OGRAPISPY_ENABLED
> > >
> > >     if( bOGRAPISpyEnabled )
> > >
> > >         OGRAPISpy_L_GetNextFeature(hLayer);
> > >
> > > #endif
> > >
> > >     return (OGRFeatureH) ((OGRLayer *)hLayer)->GetNextFeature();
> > >
> > > }
> > >
> > > I cannot imagine something with less overhead. (if you exclude dynamic
> > > binary
> > > patching techniques ;-) )
> > >
> > > OGROpen() and OGR_Dr_CreateDataSource() call a tracing function that
> > > tests if
> > > the env. variable is set, and if so set the boolean bOGRAPISpyEnabled.
> > >
> > > Even
> > >
> > > > Rob :)
> > > >
> > > >
> > > > On Sun, Aug 31, 2014 at 11:34 PM, Even Rouault <
> > >
> > > even.rouault at spatialys.com>
> > >
> > > > wrote:
> > > > > Hi,
> > > > >
> > > > > This will not be of interest for the crowds, but mainly for OGR
> > > > > driver developers (and potentially also to get precise bug reports
> > > > > from
> > >
> > > users).
> > >
> > > > > I'm
> > > > > currently adding update capabilities to the MITAB driver, and while
> > > > > playing with QGIS, there are sometimes sequences of OGR calls that
> > > > > trigger bugs, but
> > > > > that I had issues to replicate afterwards. This spy mechanism
> enables
> > >
> > > to
> > >
> > > > > have
> > > > > recording of all relevant calls to be able to replicate them
> exactly
> > > > > afterwards.
> > > > >
> > > > > Doc to use it : http://www.gdal.org/ograpispy_8h.html
> > > > >
> > > > > Related autotest script :
> > > > > http://svn.osgeo.org/gdal/trunk/autotest/ogr/ograpispy.py
> > > > >
> > > > > Even
> > > > >
> > > > > --
> > > > > Spatialys - Geospatial professional services
> > > > > http://www.spatialys.com
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 5
> Date: Sun, 31 Aug 2014 21:03:50 -0700 (PDT)
> From: user_name <ljvillarin30 at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID:
>         <
> CAMZEyL5sv5FnVrPbK8MLU6Tp4XvMND-5ndRbwZ7J0Qe9S7iaVA at mail.gmail.com>
> Content-Type: text/plain; charset="us-ascii"
>
> I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It really didn't stitch/mosaic well. The output is still the same. I'm
> really confused?
>
>
>
>
> On Sat, Aug 30, 2014 at 12:31 AM, Rahkonen Jukka (Tike) [via OSGeo.org] <
> ml-node+s1560n5159142h49 at n6.nabble.com> wrote:
>
> > user_name <ljvillarin30 <at> gmail.com> writes:
> >
> > >
> > > I've tried your suggestion but then the result was this:
> > > Note: I used OpenEV to open the file.
> > >
> > > <http://osgeo-org.1560.x6.nabble.com/file/n5158992/openev.gif>
> >
> > Hi,
> >
> > Result looks like it is because the black slivers which are created by
> > warping are not made transparent. Have a try by adding -dstnodata 0 0 0
> to
> > the gdalwarp command.
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http://user/SendEmail.jtp?type=node&node=5159142&i=0>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> >
> >
> http://osgeo-org.1560.x6.nabble.com/Problem-encountered-in-stitching-merging-the-raster-files-tp5158957p5159142.html
> >  To unsubscribe from Problem encountered in stitching/merging the raster
> > files, click here
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5158957&code=bGp2aWxsYXJpbjMwQGdtYWlsLmNvbXw1MTU4OTU3fC03MDA3NDA3OTM=
> >
> > .
> > NAML
> > <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml
> >
> >
>
>
> transparent.tif (77K) <
> http://osgeo-org.1560.x6.nabble.com/attachment/5159338/0/transparent.tif>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Re-Problem-encountered-in-stitching-merging-the-raster-files-tp5159338.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140831/701cb8f4/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 6
> Date: Mon, 1 Sep 2014 05:39:51 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem encountered in stitching/merging the
>         raster  files
> Message-ID: <loom.20140901T063843-87 at post.gmane.org>
> Content-Type: text/plain; charset=us-ascii
>
> user_name <ljvillarin30 <at> gmail.com> writes:
>
> >
> >
> >
> > I tried adding -dstnodata 0 to gdalwarp(I just add one 0 because it has
> only 1 band.Am I doing the right thing?) I have attached here the output.
> It
> really didn't stitch/mosaic well. The output is still the same. I'm really
> confused?
> >
> >
>
> Hi,
>
> I am confused too. You get two blocks, western one combined from two images
> and eastern one combined from three images. For me it looks that the blocks
> do not meet simply because your original satellite images do not cover that
> internal area and the image which you attached to your firs mail shows all
> the image data that you have. For total coverage you should acquire more
> images into your mosaic. Correct me if you are sure that your originals
> cover also the middle area.
>
> -Jukka Rahkonen-
>
>
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 123, Issue 64
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140903/c1fdafde/attachment-0001.html>

From peifer at gmx.eu  Tue Sep  2 22:52:02 2014
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 03 Sep 2014 07:52:02 +0200
Subject: [gdal-dev] Can anyone else replicate this bug?
In-Reply-To: <540651C1.3000009@gmail.com>
References: <540651C1.3000009@gmail.com>
Message-ID: <5406AC82.8030007@gmx.eu>

On 2014-09-03 1:24, Ravi Desai wrote:
> Hello everyone,
>    I unziped this file:
> http://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/files-fichiers/gct_000a11a_e.zip
> ,
>    and then fed the directory into the following command:
>      ogr2ogr -t_srs epsg:4326 -f CSV output.csv
> canada_census_boundaries/ -lco GEOMETRY=AS_WKT
>
> Line 4 ends with
>    ...,-76.529666044999942
> 44.249647768000038))",5210015.00,0015.00,521,Kingston,B,35521,35,Ontario
> but line 5 ends with
>    ...-81.066175268999913
> 42.,5550100.01,0100.01,555,London,B,35555,35,Ontario
>
> As you can see, the geometry is truncated and the ending quotes are also
> not applied to it, creating invalid CSV.
>


See the post "OGR v1.11 CSV GEOM=AS_WKT truncated...", at 
http://lists.osgeo.org/pipermail/gdal-dev/2014-June/thread.html

The issue has been fixed already:
 > r27434 | rouault | 2014-06-04 21:38:05 +0200 (Wed, 04 Jun 2014)
 > CSV: fix to avoid truncation of WKT geometries to 8000 characters


I also mentioned a work-around in my reply back then.

Hermann

From oananicola at yahoo.com  Wed Sep  3 02:33:26 2014
From: oananicola at yahoo.com (Oana Nicola)
Date: Wed, 3 Sep 2014 02:33:26 -0700
Subject: [gdal-dev] Read and convert MSG3 HRIT data with GDAL
Message-ID: <1409736806.18666.YahooMailNeo@web125903.mail.ne1.yahoo.com>

Dear list,

I've tried to read the MSG3 HRIT data (using http://www.gdal.org/frmt_msg.html instructions for the MSG driver installation):

 
gdal_translate -of JPEG MSG(my_path/,201406281200,(3,2,1),Y,B,1,1) my_path/outfile.jpg 

with the error:

bash: syntax error near unexpected token `('

Gdal version is: GDAL 1.11.0, released 2014/04/16, on Ubuntu Release 12.04 (precise) 64-bit, Kernel Linux 3.2.0-67-generic, GNOME 3.4.2.

We are preparing a poster presentation for the Eumetsat Annual Conference: "Meteosat SEVIRI visualization and processing ? Comparing open source
software for operational use" and thinking that gdal must be on this "open source software list".

Thanks in advance for your help,
Oana




Oana Nicola

Scientific Researcher

Satellite Meteorology Laboratory
National Meteorological Administration
Sos. Bucuresti Ploiesti 97, Bucharest 013686, ROMANIA
Tel:   +40 21 318 32 40 ext 105
Fax:  +40 21 316 31 43
Mob:+40 72 951 49 20
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140903/0fc8f773/attachment.html>

From even.rouault at spatialys.com  Wed Sep  3 02:35:38 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Sep 2014 11:35:38 +0200
Subject: [gdal-dev] Read and convert MSG3 HRIT data with GDAL
In-Reply-To: <1409736806.18666.YahooMailNeo@web125903.mail.ne1.yahoo.com>
References: <1409736806.18666.YahooMailNeo@web125903.mail.ne1.yahoo.com>
Message-ID: <201409031135.38946.even.rouault@spatialys.com>

Le mercredi 03 septembre 2014 11:33:26, Oana Nicola a ?crit :
> Dear list,
> 
> I've tried to read the MSG3 HRIT data (using
> http://www.gdal.org/frmt_msg.html instructions for the MSG driver
> installation):
> 
> 
> gdal_translate -of JPEG MSG(my_path/,201406281200,(3,2,1),Y,B,1,1)
> my_path/outfile.jpg

Try adding the double-quote character " before MSG( and after B,1,1)
> 
> with the error:
> 
> bash: syntax error near unexpected token `('
> 
> Gdal version is: GDAL 1.11.0, released 2014/04/16, on Ubuntu Release 12.04
> (precise) 64-bit, Kernel Linux 3.2.0-67-generic, GNOME 3.4.2.
> 
> We are preparing a poster presentation for the Eumetsat Annual Conference:
> "Meteosat SEVIRI visualization and processing ? Comparing open source
> software for operational use" and thinking that gdal must be on this "open
> source software list".
> 
> Thanks in advance for your help,
> Oana
> 
> 
> 
> 
> Oana Nicola
> 
> Scientific Researcher
> 
> Satellite Meteorology Laboratory
> National Meteorological Administration
> Sos. Bucuresti Ploiesti 97, Bucharest 013686, ROMANIA
> Tel:   +40 21 318 32 40 ext 105
> Fax:  +40 21 316 31 43
> Mob:+40 72 951 49 20

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lucadeluge at gmail.com  Wed Sep  3 04:55:11 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 3 Sep 2014 13:55:11 +0200
Subject: [gdal-dev] ERROR: Points of LinearRing do not form a closed
	linestring
In-Reply-To: <1409666792.5405cee8d87b5@imp.free.fr>
References: <CAK4m-3zDdft2+SrqBO9o-w=Dzk9NYA8NmGuh8SqY+CRWZNZbwA@mail.gmail.com>
	<1409666792.5405cee8d87b5@imp.free.fr>
Message-ID: <CAK4m-3w0LLxJ0N+-+L_Ed0y+ciQJHn72dBMHcjSMtybrX1e_+g@mail.gmail.com>

On 2 September 2014 16:06, Even Rouault <even.rouault at spatialys.com> wrote:

>
> Just as suggested by the error message, your polygon is not closed. You must
> repeat the first point as last point to form a valid polygon.
>

The problem was in the input json file, I created it with only four
point, and I forgot the fifth (the repeated one).
In this case ogrinfo should return an error? I was also able to see it
correctly in QGIS...

Thanks

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From andre.vautour at caris.com  Thu Sep  4 13:07:46 2014
From: andre.vautour at caris.com (Andre Vautour)
Date: Thu, 04 Sep 2014 17:07:46 -0300
Subject: [gdal-dev] OGRStyleTool::GetStyleString() loosing quotes after
	modification
Message-ID: <5408C692.40804@caris.com>

I ran into a problem where a quoted text string in a OGR Style String 
gets lost while interacting with it via an OGRStyleTool. Using the same 
style string afterwords causes OGRStyleTool::Parse() to fail because the 
quote string contained parentheses which would have typically been 
ignored because of the CSLT_HONOURSTRINGS and CSLT_PRESERVEQUOTES flags 
that are passed to CSLTokenizeString2.

Here is a code snippet that exposes the issue that I am seeing:

    void testGetStyleString()
    {
         const char* const originalStyleString = "LABEL(t:\"MyText(1)\")";
         std::cout << "originalStyleString:" << originalStyleString <<
    std::endl;

         ::OGRStyleLabel styleLabel;
         styleLabel.SetStyleString(originalStyleString);

         const char* const styleStringAfterBeingSet =
    styleLabel.GetStyleString();
         std::cout << "styleStringAfterBeingSet:" <<
    styleStringAfterBeingSet << std::endl;

         GBool defaultValue = false;
         const char* const textString = styleLabel.TextString(defaultValue);
         std::cout << "textString:" << textString << std::endl;

         const char* const styleStringAfterParsingStage =
    styleLabel.GetStyleString();
         std::cout << "styleStringAfterParsingStage:" <<
    styleStringAfterParsingStage << std::endl;

         return;
    }

Which produces the following output:

    originalStyleString:LABEL(t:"MyText(1)")
    styleStringAfterBeingSet:LABEL(t:"MyText(1)")
    textString:MyText(1)
    styleStringAfterParsingStage:LABEL(t:MyText(1))

So, the main problem I have encountered, as far as I can tell is that 
GetStyleString() does not honor the quotes after it has been set to have 
been parse and set as modified (StyleModified). I my case, I didn't even 
modify the tool, OGRStyleTool::Parse() seems to be the one who set the 
style tool as being modified. The modified flag is why GetStyleString() 
regenerates the string from the parameters. So, I have two questions:

1. Should Parse() set the style tool as modified as it currently does?
2. Should the parsing of the parameters retain the quotes? It currently 
doesn't specify CSLT_PRESERVEQUOTES when splitting t:"MyText" at the colon.

Doing #2 would obviously mean the TextString() would return the quoted 
string which it doesn't do currently.

Any thoughts?
Andr?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140904/9cf47dc2/attachment.html>

From Roman.Ploehn at and-solution.com  Fri Sep  5 07:37:10 2014
From: Roman.Ploehn at and-solution.com (Roman Ploehn)
Date: Fri, 5 Sep 2014 14:37:10 +0000
Subject: [gdal-dev] Problem reading folder name with <font> tag
References: <C314E4D913FA7944BB93EF9AF68474075BA821CE@EXCH-MUC.versakom.ger> 
Message-ID: <C314E4D913FA7944BB93EF9AF68474075BA82252@EXCH-MUC.versakom.ger>

Hello,

I got a KML file where folder names aren't read completeley with OGR and libkml driver.

I found the problem is the <name> tags contain <font> texts like i.e.:

<Folder><name><font style="background-color: orangered;color: orangered">---</font> Data Centrum</name>...</Folder>
<Folder><name><font style="color: Blue">Leased</font></name>...</Folder>

In GoogleEarth these are evalutated and define the color the folders are shown.

But in OGR the layer names result in ' Data Centrum' and ''

I tried with KML driver too, there the first name is identical, the second one is some auto generated 'Layer #1' instead of empty text.


Does anyone know if there's a way to retrieve the complete <name> content including the <font> (and maybe other HTML) tags?


Thanks in advance,

best regards,

Zoppo



From even.rouault at spatialys.com  Fri Sep  5 08:33:52 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Sep 2014 17:33:52 +0200
Subject: [gdal-dev] Problem reading folder name with <font> tag
In-Reply-To: <C314E4D913FA7944BB93EF9AF68474075BA82252@EXCH-MUC.versakom.ger>
References: <C314E4D913FA7944BB93EF9AF68474075BA821CE@EXCH-MUC.versakom.ger>
	<C314E4D913FA7944BB93EF9AF68474075BA82252@EXCH-MUC.versakom.ger>
Message-ID: <1409931232.5409d7e055528@imp.free.fr>

Zoppo,

I'm not completely convinced this is valid KML. According to the strict OGC KML
2.2 schema (http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd), I'd say this
would be invalid. And according to the historical looser specification at
https://developers.google.com/kml/documentation/kmlreference#name, this is not
mentionned as possible. But a lot of, more or less, valid KML files can be found
in the wild, so I'm half surprised. Although I would have expected seeing the
content between <name> and </name> to be encapsulated by <![CDATA[ and ]]>

To answer your question, code changes would be required in the KML driver. Not
sure if that would be possible in the LIBKML one if libkml library itself has no
provision to return all content, and not only the textual one.

Best regards,

Even


> Hello,
>
> I got a KML file where folder names aren't read completeley with OGR and
> libkml driver.
>
> I found the problem is the <name> tags contain <font> texts like i.e.:
>
> <Folder><name><font style="background-color: orangered;color:
> orangered">---</font> Data Centrum</name>...</Folder>
> <Folder><name><font style="color: Blue">Leased</font></name>...</Folder>
>
> In GoogleEarth these are evalutated and define the color the folders are
> shown.
>
> But in OGR the layer names result in ' Data Centrum' and ''
>
> I tried with KML driver too, there the first name is identical, the second
> one is some auto generated 'Layer #1' instead of empty text.
>
>
> Does anyone know if there's a way to retrieve the complete <name> content
> including the <font> (and maybe other HTML) tags?
>
>
> Thanks in advance,
>
> best regards,
>
> Zoppo
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From klonuo at gmail.com  Sat Sep  6 05:13:05 2014
From: klonuo at gmail.com (klo uo)
Date: Sat, 6 Sep 2014 14:13:05 +0200
Subject: [gdal-dev] Re-projecting with valid geometry
Message-ID: <CAA-8Ld-Rux2dX1bqwkcGW8MTWscwC-3UEdz-Fgec5zTL7ETAxw@mail.gmail.com>

Hi,

I have PostGIS table with multipolygon geometry column of ~2000 features
with valid geometries. Most are single polygons.
These were originally in 900914 projection.

I tried to re-project to 4326, first with org2ogr then with PostGIS's
ST_Transform() function.

In both cases I get results with couple of invalid geometries in a manner
of:

  segment [#] of ring [#] of polygon [#] intersects segment [#] of ring [#]
of polygon [#] at [x], [y]

reported by QGIS "Check geometry validy" function, or same as a result from
PostGIS's ST_IsValid() function.

Interestingly table reprojected with ogr2ogr shows errors on different
features then errors generated by PostGIS's ST_Transform() function.

I wonder if there are some steps I can take before re-projecting or
afterward, that will produce valid transformation, without need of
correcting erroneous geometries by hand after re-projecting data?


Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140906/0996896e/attachment.html>

From even.rouault at spatialys.com  Sat Sep  6 05:36:12 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Sep 2014 14:36:12 +0200
Subject: [gdal-dev] OGRStyleTool::GetStyleString() loosing quotes after
	modification
In-Reply-To: <5408C692.40804@caris.com>
References: <5408C692.40804@caris.com>
Message-ID: <201409061436.12442.even.rouault@spatialys.com>

Le jeudi 04 septembre 2014 22:07:46, Andre Vautour a ?crit :
> I ran into a problem where a quoted text string in a OGR Style String
> gets lost while interacting with it via an OGRStyleTool. Using the same
> style string afterwords causes OGRStyleTool::Parse() to fail because the
> quote string contained parentheses which would have typically been
> ignored because of the CSLT_HONOURSTRINGS and CSLT_PRESERVEQUOTES flags
> that are passed to CSLTokenizeString2.
> 
> Here is a code snippet that exposes the issue that I am seeing:
> 
>     void testGetStyleString()
>     {
>          const char* const originalStyleString = "LABEL(t:\"MyText(1)\")";
>          std::cout << "originalStyleString:" << originalStyleString <<
>     std::endl;
> 
>          ::OGRStyleLabel styleLabel;
> 
>          styleLabel.SetStyleString(originalStyleString);
> 
>          const char* const styleStringAfterBeingSet =
>     styleLabel.GetStyleString();
>          std::cout << "styleStringAfterBeingSet:" <<
>     styleStringAfterBeingSet << std::endl;
> 
>          GBool defaultValue = false;
>          const char* const textString =
> styleLabel.TextString(defaultValue); std::cout << "textString:" <<
> textString << std::endl;
> 
>          const char* const styleStringAfterParsingStage =
>     styleLabel.GetStyleString();
>          std::cout << "styleStringAfterParsingStage:" <<
>     styleStringAfterParsingStage << std::endl;
> 
>          return;
>     }
> 
> Which produces the following output:
> 
>     originalStyleString:LABEL(t:"MyText(1)")
>     styleStringAfterBeingSet:LABEL(t:"MyText(1)")
>     textString:MyText(1)
>     styleStringAfterParsingStage:LABEL(t:MyText(1))
> 
> So, the main problem I have encountered, as far as I can tell is that
> GetStyleString() does not honor the quotes after it has been set to have
> been parse and set as modified (StyleModified). I my case, I didn't even
> modify the tool, OGRStyleTool::Parse() seems to be the one who set the
> style tool as being modified. The modified flag is why GetStyleString()
> regenerates the string from the parameters. So, I have two questions:
> 
> 1. Should Parse() set the style tool as modified as it currently does?

No, the m_bModified flag should be reset to FALSE at the end of Parse().

> 2. Should the parsing of the parameters retain the quotes? It currently
> doesn't specify CSLT_PRESERVEQUOTES when splitting t:"MyText" at the colon.

I see returning unquoted text as a desired behaviour, since quoting is a 
serialization trick. But OGRStyleTool::GetStyleString() should add double-
quoting when building the feature style string.

I can also see that escaping of double-quote characters with \ will probably 
not be correctly handled in de-serialization and serialization.

> 
> Doing #2 would obviously mean the TextString() would return the quoted
> string which it doesn't do currently.
> 
> Any thoughts?
> Andr?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sat Sep  6 05:43:39 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Sep 2014 14:43:39 +0200
Subject: [gdal-dev] Re-projecting with valid geometry
In-Reply-To: <CAA-8Ld-Rux2dX1bqwkcGW8MTWscwC-3UEdz-Fgec5zTL7ETAxw@mail.gmail.com>
References: <CAA-8Ld-Rux2dX1bqwkcGW8MTWscwC-3UEdz-Fgec5zTL7ETAxw@mail.gmail.com>
Message-ID: <201409061443.39402.even.rouault@spatialys.com>

Hi,

> 
> Interestingly table reprojected with ogr2ogr shows errors on different
> features then errors generated by PostGIS's ST_Transform() function.

This is a bit surprising. ogr2ogr applies reprojection on each point of source 
geometries. I would have expected ST_Transform() to do the same.

> 
> I wonder if there are some steps I can take before re-projecting or
> afterward, that will produce valid transformation, without need of
> correcting erroneous geometries by hand after re-projecting data?

Not sure if this qualified of a by hand correction, but you may want to try 
ST_MakeValid() after ST_Transform() : 
http://postgis.org/docs/ST_MakeValid.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From klonuo at gmail.com  Sat Sep  6 06:58:07 2014
From: klonuo at gmail.com (klo uo)
Date: Sat, 6 Sep 2014 15:58:07 +0200
Subject: [gdal-dev] Re-projecting with valid geometry
In-Reply-To: <201409061443.39402.even.rouault@spatialys.com>
References: <CAA-8Ld-Rux2dX1bqwkcGW8MTWscwC-3UEdz-Fgec5zTL7ETAxw@mail.gmail.com>
	<201409061443.39402.even.rouault@spatialys.com>
Message-ID: <CAA-8Ld-Yutwi=nQxjJfbb-6xWw3tmbdaUMM4j+VP7OTkcOrM7Q@mail.gmail.com>

Thanks Even,that's great solution.

Now, although ST_IsValid() doesn't report any more problems, QGIS "Check
geometry validity" still finds issues on 3 features.

I also tried ArcMap's "Check Geometry" function, and it found 2 "self
intersections". Features reported by QGIS and ArcMap are different.

This is just terrible file to work on, that's why I didn't want to touch or
edit anything inside. And now this validity tools all report issues on
different features...


Cheers



On Sat, Sep 6, 2014 at 2:43 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> >
> > Interestingly table reprojected with ogr2ogr shows errors on different
> > features then errors generated by PostGIS's ST_Transform() function.
>
> This is a bit surprising. ogr2ogr applies reprojection on each point of
> source
> geometries. I would have expected ST_Transform() to do the same.
>
> >
> > I wonder if there are some steps I can take before re-projecting or
> > afterward, that will produce valid transformation, without need of
> > correcting erroneous geometries by hand after re-projecting data?
>
> Not sure if this qualified of a by hand correction, but you may want to try
> ST_MakeValid() after ST_Transform() :
> http://postgis.org/docs/ST_MakeValid.html
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140906/1cad0f3e/attachment.html>

From jukka.rahkonen at mmmtike.fi  Sun Sep  7 09:13:58 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 7 Sep 2014 16:13:58 +0000 (UTC)
Subject: [gdal-dev] Re-projecting with valid geometry
References: <CAA-8Ld-Rux2dX1bqwkcGW8MTWscwC-3UEdz-Fgec5zTL7ETAxw@mail.gmail.com>
	<201409061443.39402.even.rouault@spatialys.com>
	<CAA-8Ld-Yutwi=nQxjJfbb-6xWw3tmbdaUMM4j+VP7OTkcOrM7Q@mail.gmail.com>
Message-ID: <loom.20140907T181111-979@post.gmane.org>

klo uo <klonuo <at> gmail.com> writes:


> Thanks Even,that's great solution.
> 
> Now, although ST_IsValid() doesn't report any more problems, QGIS "Check
geometry validity" still finds issues on 3 features.
> I also tried ArcMap's "Check Geometry" function, and it found 2 "self
intersections". Features reported by QGIS and ArcMap are different.
> This is just terrible file to work on, that's why I didn't want to touch
or edit anything inside. And now this validity tools all report issues on
different features...
> Cheers

Capture some problematic geometries as WKT and send them to the list. It
would be nice to look how they are invalid and why some tools do not find
any errors.

-Jukka Rahkonen-


From zimmicz at gmail.com  Mon Sep  8 00:58:24 2014
From: zimmicz at gmail.com (Michal Zimmermann)
Date: Mon, 8 Sep 2014 09:58:24 +0200
Subject: [gdal-dev] OGR not opening any source
Message-ID: <CAKgN3YUs6fkr=rC_YNjVVCxtxhU7PDEr4-_O=2a5hYz5QymcpA@mail.gmail.com>

Hi,
I installed GDAL 1.11.0, released 2014/04/16 on CentOS 6.5 following
https://github.com/wavded/ogre/wiki/Compiling-a-recent-ogr2ogr-from-source-on-CentOS-%28RHEL%29
.
Trying ogr2ogr or ogrinfo always results in Unable to open datasource
`path` with the following drivers. Any of you ever experienced such
behaviour? I would like to make it work or start debugging, any help
appreciated.

-- 
Michal Zimmermann (zimmi)
WWW: http://www.zimmi.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140908/864e126f/attachment.html>

From bishop.dev at gmail.com  Mon Sep  8 01:40:29 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 08 Sep 2014 12:40:29 +0400
Subject: [gdal-dev] OGR not opening any source
In-Reply-To: <CAKgN3YUs6fkr=rC_YNjVVCxtxhU7PDEr4-_O=2a5hYz5QymcpA@mail.gmail.com>
References: <CAKgN3YUs6fkr=rC_YNjVVCxtxhU7PDEr4-_O=2a5hYz5QymcpA@mail.gmail.com>
Message-ID: <540D6B7D.7080103@gmail.com>

Hi Michal,

I installed GDAL with PostGIS on CentOS 6.5 using this instruction: 
http://www.postgresonline.com/journal/archives/329-An-almost-idiots-guide-to-install-PostgreSQL-9.3,-PostGIS-2.1-and-pgRouting-with-Yum.html
Works to me:

[bishop at centos ~]$ uname -a
Linux centos 2.6.32-431.23.3.el6.x86_64 #1 SMP Thu Jul 31 17:20:51 UTC 
2014 x86_64 x86_64 x86_64 GNU/Linux
[bishop at centos ~]$ uname -r
2.6.32-431.23.3.el6.x86_64
[bishop at centos ~]$ gdalinfo --version
GDAL 1.9.2, released 2012/10/08

Best regards,
     Dmitry

08.09.2014 11:58, Michal Zimmermann ?????:
> Hi,
> I installed GDAL 1.11.0, released 2014/04/16 on CentOS 6.5 following 
> https://github.com/wavded/ogre/wiki/Compiling-a-recent-ogr2ogr-from-source-on-CentOS-%28RHEL%29.
> Trying ogr2ogr or ogrinfo always results in Unable to open datasource 
> `path` with the following drivers. Any of you ever experienced such 
> behaviour? I would like to make it work or start debugging, any help 
> appreciated.
>
> -- 
> Michal Zimmermann (zimmi)
> WWW: http://www.zimmi.cz
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140908/e922444b/attachment.html>

From gusevmihs at gmail.com  Mon Sep  8 05:08:11 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Mon, 8 Sep 2014 16:08:11 +0400
Subject: [gdal-dev] RFC 48: Geographical networks support
Message-ID: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>

Hello all.
My work on GSoC 2014 project is finished and I made an RFC in order to
discuss the integration of my subproject into GDAL:
http://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support. I
think it may be necessary to make some small changes/improvements before
the integration will be possible and I'm ready to make them. Anyway I'll be
glad to hear your thoughts and ideas about my project and its integration.

Best regards,
Mikhail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140908/d229204b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Sep  8 05:24:02 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 8 Sep 2014 12:24:02 +0000 (UTC)
Subject: [gdal-dev] PostGIS does not close a ring created by ogr2ogr
Message-ID: <loom.20140908T135952-387@post.gmane.org>

Hi,

Anybody interested in biting some bytes of WKB? Thorough description of the
trouble is in Stackexchange
http://gis.stackexchange.com/questions/113029/polygon-from-line-creation-problem

Summary:
User has converted a linestring from dxf format into PostGIS with ogr2ogr.
By staring at the WKB the linestring seems to make a closing ring with first
and last vertex having exactly same coordinates which are in binary:
D89E591A2DD4284123D92354DF65F440
However, PostGIS claims that the ring is not closed and it can't make a
polygon with ST_MakePolygon. ST_MakePolygon is successful if WKB is first
converted into WKT and then back to WKB with PostGIS. There are some
differences in the beginning of WKB created by ogr2ogr and PostGIS. GDAL
writes this before the coordinates begin (separates with dashes from where I
believe to be logical breaks) 
01-02000020-B46B0000-7D000000

PostGIS version writes different geometry type and WKB is a few bytes shorter:
01-02000000-7D000000

So GDAL writes "02000020" instead of "02000000" but it also writes bytes
"B46B0000" which do not have any equivalent it the PostGIS WKB. After these
bytes WKB seems to be identical.

I am curious to get an explanation for what happens.

-Jukka Rahkonen- 







From even.rouault at spatialys.com  Mon Sep  8 06:55:28 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Sep 2014 15:55:28 +0200
Subject: [gdal-dev] PostGIS does not close a ring created by ogr2ogr
In-Reply-To: <loom.20140908T135952-387@post.gmane.org>
References: <loom.20140908T135952-387@post.gmane.org>
Message-ID: <1410184528.540db5506d569@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> Anybody interested in biting some bytes of WKB? Thorough description of the
> trouble is in Stackexchange
>
http://gis.stackexchange.com/questions/113029/polygon-from-line-creation-problem
>
> Summary:
> User has converted a linestring from dxf format into PostGIS with ogr2ogr.
> By staring at the WKB the linestring seems to make a closing ring with first
> and last vertex having exactly same coordinates which are in binary:
> D89E591A2DD4284123D92354DF65F440
> However, PostGIS claims that the ring is not closed and it can't make a
> polygon with ST_MakePolygon. ST_MakePolygon is successful if WKB is first
> converted into WKT and then back to WKB with PostGIS. There are some
> differences in the beginning of WKB created by ogr2ogr and PostGIS. GDAL
> writes this before the coordinates begin (separates with dashes from where I
> believe to be logical breaks)
> 01-02000020-B46B0000-7D000000
>
> PostGIS version writes different geometry type and WKB is a few bytes
> shorter:
> 01-02000000-7D000000
>
> So GDAL writes "02000020" instead of "02000000" but it also writes bytes
> "B46B0000" which do not have any equivalent it the PostGIS WKB. After these
> bytes WKB seems to be identical.
>
> I am curious to get an explanation for what happens.

Jukka,

What GDAL writes is EWKB / Extended WKB, which is a PostGIS extension to WKB,
that is nominally used when reading from/writing to PostGIS tables. See
http://postgis.net/docs/using_postgis_dbmanagement.html#EWKB_EWKT

In that instance the final "20" in  "02000020" is the SRID flag 0x20000000,
indicating that the next 4 bytes, will be the SRID of the geometry. And
"B46B0000" is 0x00006BB4 = 27572, i.e. EPSG:27572, French Lambert zone II.

As far as the cause of the failure, there's a very slight difference in the
least-signficant byte of the Y component of the first and last vertex. See
(difference outlined between stars) :
D89E591A2DD428412*3*D92354DF65F440
D89E591A2DD428412*1*D92354DF65F440
Translated into text with st_astext, it is probably unnoticed.
And st_astext/st_geomfromtext return respectively OGC WKT and OGC WKB, loosing
the PostGIS embedded SRID.

Even


>
> -Jukka Rahkonen-
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Mon Sep  8 07:15:53 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 8 Sep 2014 16:15:53 +0200
Subject: [gdal-dev] GetFeatureCount() bForce set to FALSE
Message-ID: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>

Hi all,

I was trying to change a default value of bForce in
OGRVFKLayer::GetFeatureCount() to FALSE [1], but when I debug eg.
ogrinfo, it still reports bForce as TRUE (1)

Breakpoint 1, OGRVFKLayer::GetFeatureCount (this=0x71a7d0, bForce=1)
at ogrvfklayer.cpp:162

Any idea what could be wrong?

Thanks in advance, Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/vfk/ogr_vfk.h#L83

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at spatialys.com  Mon Sep  8 07:22:27 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Sep 2014 16:22:27 +0200
Subject: [gdal-dev] GetFeatureCount() bForce set to FALSE
In-Reply-To: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
References: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
Message-ID: <1410186147.540dbba348441@imp.free.fr>

Martin,

I'm far from being a C++ expert, but I don't think it makes sense to change the
default value of an optional parameter of a virtual method in a child class of
the base class.

http://svn.osgeo.org/gdal/trunk/gdal/ogr/ogrsf_frmts/ogrsf_frmts.h :
virtual int         GetFeatureCount( int bForce = TRUE );

My suggestion would be that you remove the (|| bForce) test in your
implementation, if the poDataBlock->GetFeatureCount() is reliable.

Even

> Hi all,
>
> I was trying to change a default value of bForce in
> OGRVFKLayer::GetFeatureCount() to FALSE [1], but when I debug eg.
> ogrinfo, it still reports bForce as TRUE (1)
>
> Breakpoint 1, OGRVFKLayer::GetFeatureCount (this=0x71a7d0, bForce=1)
> at ogrvfklayer.cpp:162
>
> Any idea what could be wrong?
>
> Thanks in advance, Martin
>
> [1]
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/vfk/ogr_vfk.h#L83
>
> --
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Mon Sep  8 08:57:20 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 8 Sep 2014 17:57:20 +0200
Subject: [gdal-dev] GetFeatureCount() bForce set to FALSE
In-Reply-To: <1410186147.540dbba348441@imp.free.fr>
References: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
	<1410186147.540dbba348441@imp.free.fr>
Message-ID: <CA+Ei1OdrqjrAu422agqLXAZBSrZEkRiXe+f0QXgD5VcHA1QzSA@mail.gmail.com>

Hi Even,

2014-09-08 16:22 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> My suggestion would be that you remove the (|| bForce) test in your
> implementation, if the poDataBlock->GetFeatureCount() is reliable.

that make sense to me, thanks. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at spatialys.com  Mon Sep  8 12:55:56 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Sep 2014 21:55:56 +0200
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>
References: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>
Message-ID: <201409082155.56976.even.rouault@spatialys.com>

Le lundi 08 septembre 2014 14:08:11, Mikhail Gusev a ?crit :
> Hello all.
> My work on GSoC 2014 project is finished and I made an RFC in order to
> discuss the integration of my subproject into GDAL:
> http://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support. I
> think it may be necessary to make some small changes/improvements before
> the integration will be possible and I'm ready to make them. Anyway I'll be
> glad to hear your thoughts and ideas about my project and its integration.

Mikhail,

Not much to say on the RFC itself. Perhaps you should mention who will take 
care of committing in the source : Dmitry I guess ?

I looked at the code changes:
https://github.com/MikhanGusev/gdal/compare/OSGeo:trunk...trunk

My remarks:
- any reason not to licence  autotest/gnm/gnm_gdalnetwork_test.py
 under X/MIT ? There are a few files LGPL licenced in autotest, but this is 
more historical remain than intended policy.
-  gdal/apps/GNUmakefile : in clean target, analysis/*.o is probably unneeded
- which gnm headers are installed ? gnm.h gnm_frmts.h gnm_api.h 
gnmstdanalysis.h ?
- header files should have guards against multiple inclusion. At least seen for 
gnm/analysis/gnmstdanalysis.h
- in implementations there are many maps, vectors, etc., so I guess some 
algorithms may consume a lot of memory if operating on huge networks. The 
documentation should make it clear.
- GNMGdalStdRoutingAnalyser and GNMGdalStdCommutationsAnalyser: currently have 
only one method and no member variables. Do you foresee future extensions to 
add member variables ? If not, they might go to GNMGdalStdAnalyser, no ? And 
what about non-GDAL network ? Shouldn't the interface of 
DijkstraShortestPath() and ResourceDestribution() go to GNMStdAnalyser ? Open 
questions : just wondering of what it might look like if other network 
implementations are done. I can imagine that the dijkstra alg would have 
similar interface.
- gnm/frmts/gnm_frmts.h :  I'm a bit concerned about exposing (installed 
header + CPL_DLL) an interface that has not yet been implemented. My intuition 
is that it might change once the first one or two implementations have been 
made. So maybe keep it internal/experimental for now.
- gnm/frmts/gnm_frmts.h : "static const char *GNMAllFormats[] = {" should not 
be exposed in a .h file
- gnm/frmts/gnm_frmts.h :  static std::vector<std::string> _regNetFrmts : same 
remark as above
- gnm/frmts/gnm_frmts.h :  GetFormatByName() and RegisterAllNetworkFormats() 
should not be in a .h and lack "namespace"
- gnm/gnm.h : static const char *GNMGdalSupportedDrivers[] should be moved 
somewhere else
- gnm/gnm.h : most #define are not of public use. might be moved in a 
gnm_priv.h
- gnm/gnm.h : typedef int GNMDirection and the 3 following defines. A typedef 
enum would seem more appropriate. Same for GNMErr (although I can see this 
pattern in ogr_core.h. not clear why enum have not been chosen)
- gnm/gnm.h : GNMManager::Close() the GNMNetwork should know if it is native 
or not. The user shouldn't have to specify it again.
- gnm/gnm.h : GNMManager::GdalCloseNetwork(). Ideally this method should not 
exist and Close() should work for all kind of network objects.
- gnm/gnm.h : GNMNetwork class definition. Commented methods that could be 
removed. TODO that no longer apply
- gnm/gnm.h : IsDriverSupported() --> IsDatasetDriverSupported() for 
consistency between name and argument ?
- gnm/gnm.h : std::pair<char**,int> GetClassLayers () : very unusual interface 
in GDAL. I'd say return a char** NULL terminated for consistency to other 
methods in the same class
- gnm/gnm_api.h: all functions are prefixed by GNMGdal. But some methods 
actually belong to the base GNMNetwork class, ant not specifically to 
GNMGdalNetwork. For example CreateLayer(), CreateFeature(), and many others
- gnm/gnm_tut.dox : #include "analysis/gnmstdanalysis.h" . Is the analysis 
directory valid for an installed GDAL ?
- gnm/gnmgdalnetwork.cpp : _makeNewLayerName(): newName might overflow. instead 
of 100, use strlen(name) + 50. Or return a std::string to avoid manual dealing 
with memory
- gnm/gnmgdalnetwork.cpp : GNMGdalNetwork::CreateLayer() : the call to  
_makeNewLayerName return a char* not a const char*.
- GNMGdalNetwork::IsDriverSupported (): CSLFindString() >= 0 could be used to 
replace the loop
- GNMGdalNetwork::GetSupportedDrivers () : return 
CSLDuplicate(GNMGdalSupportedDrivers)
- GNMGdalNetwork::GetMetaParamValueName () : return a "const char*" that must 
be freed by delete[]. Quite unusual. Better return a "char*". Other issue, it 
is allocated with new char[], but the method is bound to C. C callers cannot 
call delete[]. So you have to allocate with CPLMalloc(), and ask the caller to 
free with CPLFree(). Isn't there a risk of overflow with 254 characters ?
- GNMGdalNetwork::GetMetaParamValueDescr () : same remarks as above
- GNMManager::CreateConnectivity () : I'm confused by the 'native' term. In 
this method, native=false seems to imply the GDAL "proprietary" network format 
that can work with any vector driver that has similar capabilities than 
shapefile. Whereas in the RFC text, it seems to imply the contrary ( "network 
of ?GDAL-native? format").
-  GNMNetwork::AutoConnect() :" if (lineGFID == 684) { int x = 9; } " debug 
left-over ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gusevmihs at gmail.com  Mon Sep  8 14:29:10 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Tue, 9 Sep 2014 01:29:10 +0400
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <201409082155.56976.even.rouault@spatialys.com>
References: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>
	<201409082155.56976.even.rouault@spatialys.com>
Message-ID: <CAJB43VoiMB0sF1-jJOAudviwA+_wtVmOkxhBHWuV8dvHod1seQ@mail.gmail.com>

Even, firstly thanks for your remarks!

Not much to say on the RFC itself. Perhaps you should mention who will take
> care of committing in the source : Dmitry I guess ?
>

Yes, I think someone who has committing rights can do this. I will discuss
it with Dmitriy.


> I looked at the code changes:
> https://github.com/MikhanGusev/gdal/compare/OSGeo:trunk...trunk
>
> My remarks:
> - any reason not to licence  autotest/gnm/gnm_gdalnetwork_test.py
>  under X/MIT ? There are a few files LGPL licenced in autotest, but this is
> more historical remain than intended policy.
>

No problems with X/MIT.

-  gdal/apps/GNUmakefile : in clean target, analysis/*.o is probably
> unneeded
>
- which gnm headers are installed ? gnm.h gnm_frmts.h gnm_api.h
> gnmstdanalysis.h ?
>

Actually exactly these 4 files must be installed. I'll add them to
makefiles.

- header files should have guards against multiple inclusion. At least seen
> for
> gnm/analysis/gnmstdanalysis.h
>

My mistake, I'll fix this.


> - in implementations there are many maps, vectors, etc., so I guess some
> algorithms may consume a lot of memory if operating on huge networks. The
> documentation should make it clear.
>

The use of these containers make the calculations fast. And what I haven't
done actually - is the testing on the very huge graphs. I'll include this
to my future plans. No problems with docs.


> - GNMGdalStdRoutingAnalyser and GNMGdalStdCommutationsAnalyser: currently
> have
> only one method and no member variables. Do you foresee future extensions
> to
> add member variables ? If not, they might go to GNMGdalStdAnalyser, no ?
> And
> what about non-GDAL network ? Shouldn't the interface of
> DijkstraShortestPath() and ResourceDestribution() go to GNMStdAnalyser ?
> Open
> questions : just wondering of what it might look like if other network
> implementations are done. I can imagine that the dijkstra alg would have
> similar interface.
>

According to my idea GNMStdAnalyser is actually the class which firstly
represents a graph and the methods to operate it. So it must contain only
the basic algorithms. DijkstraShortestPath() and ResourceDestribution() are
the methods which use the basic methods of the graph and return the results
in the specific form. Also in general for the classes
GNMGdalStdRoutingAnalyser and GNMGdalStdCommutationsAnalyser: they were
designed as the "specific-purpose" classes approximately for engineering
and road networks, so they can be extended in future and probably with
member variables. But this relates to the answer for the next remark:

- gnm/frmts/gnm_frmts.h :  I'm a bit concerned about exposing (installed
> header + CPL_DLL) an interface that has not yet been implemented. My
> intuition
> is that it might change once the first one or two implementations have been
> made. So maybe keep it internal/experimental for now.
>

I agree that the inclusion of the interfaces/capabilities that can be (not
will be) extended in future is not a 100% good idea. I hoped that someone
will be interested or even I will have time to implement and extend
something of what I wrote at the "Future ideas" section in my RFC. But we
do not know exactly will it be implemented or not. So: (1) We can remove
for now all these interfaces "for future", which means to leave only
GNMGdalNetwork and one analysing class. (2) Try to implement these
capabilities: pgRouting for gnm_frmts.h and for example
GNMGdalStdRoutingAnalyser with some algorithm extension (K shortest path).


> - gnm/frmts/gnm_frmts.h : "static const char *GNMAllFormats[] = {" should
> not
> be exposed in a .h file
>
- gnm/frmts/gnm_frmts.h :  static std::vector<std::string> _regNetFrmts :
> same
> remark as above
>
- gnm/frmts/gnm_frmts.h :  GetFormatByName() and RegisterAllNetworkFormats()
> should not be in a .h and lack "namespace"
>
- gnm/gnm.h : static const char *GNMGdalSupportedDrivers[] should be moved
> somewhere else
>

Actually I have no idea where to place the gnm_frmts.h static fields. They
must be common for all formats. But if we decide to remove formats support
it will be easier.


> - gnm/gnm.h : most #define are not of public use. might be moved in a
> gnm_priv.h
>

Yes, the same for rule types.

- gnm/gnm.h : typedef int GNMDirection and the 3 following defines. A
> typedef
> enum would seem more appropriate. Same for GNMErr (although I can see this
> pattern in ogr_core.h. not clear why enum have not been chosen)
>

Agree.


> - gnm/gnm.h : GNMManager::Close() the GNMNetwork should know if it is
> native
> or not. The user shouldn't have to specify it again.
>
- gnm/gnm.h : GNMManager::GdalCloseNetwork(). Ideally this method should not
> exist and Close() should work for all kind of network objects.
>

Can be possible.


> - gnm/gnm.h : GNMNetwork class definition. Commented methods that could be
> removed. TODO that no longer apply
>
- gnm/gnm.h : IsDriverSupported() --> IsDatasetDriverSupported() for
> consistency between name and argument ?
>
- gnm/gnm.h : std::pair<char**,int> GetClassLayers () : very unusual
> interface
> in GDAL. I'd say return a char** NULL terminated for consistency to other
> methods in the same class
>

Agree.

- gnm/gnm_api.h: all functions are prefixed by GNMGdal. But some methods
> actually belong to the base GNMNetwork class, ant not specifically to
> GNMGdalNetwork. For example CreateLayer(), CreateFeature(), and many others
>

Yes, I should update the C header and also wrap some methods from
GNMManager.


> - gnm/gnm_tut.dox : #include "analysis/gnmstdanalysis.h" . Is the analysis
> directory valid for an installed GDAL ?
>

Haven't check.


> - gnm/gnmgdalnetwork.cpp : _makeNewLayerName(): newName might overflow.
> instead
> of 100, use strlen(name) + 50. Or return a std::string to avoid manual
> dealing
> with memory
>
- gnm/gnmgdalnetwork.cpp : GNMGdalNetwork::CreateLayer() : the call to
> _makeNewLayerName return a char* not a const char*.
>
- GNMGdalNetwork::IsDriverSupported (): CSLFindString() >= 0 could be used
> to
> replace the loop
>
- GNMGdalNetwork::GetSupportedDrivers () : return
> CSLDuplicate(GNMGdalSupportedDrivers)
>
- GNMGdalNetwork::GetMetaParamValueName () : return a "const char*" that
> must
> be freed by delete[]. Quite unusual. Better return a "char*". Other issue,
> it
> is allocated with new char[], but the method is bound to C. C callers
> cannot
> call delete[]. So you have to allocate with CPLMalloc(), and ask the
> caller to
> free with CPLFree(). Isn't there a risk of overflow with 254 characters ?
>
- GNMGdalNetwork::GetMetaParamValueDescr () : same remarks as above
>

I'll fix.

- GNMManager::CreateConnectivity () : I'm confused by the 'native' term. In
> this method, native=false seems to imply the GDAL "proprietary" network
> format
> that can work with any vector driver that has similar capabilities than
> shapefile. Whereas in the RFC text, it seems to imply the contrary (
> "network
> of ?GDAL-native? format").
>

Maybe I used it not correctly everywhere, but the general idea is the
following: The term "native" corresponds to the existed network formats (so
when we work with pgRouting network we work with its native tables and
fields, rather than with GNMGdal- system layers), while the GDAL-networks
are not "native" and more likely "common".

-  GNMNetwork::AutoConnect() :" if (lineGFID == 684) { int x = 9; } " debug
> left-over ?
>

Yes, my mistake :D
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140909/a8d8c127/attachment.html>

From even.rouault at spatialys.com  Mon Sep  8 14:52:59 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Sep 2014 23:52:59 +0200
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <CAJB43VoiMB0sF1-jJOAudviwA+_wtVmOkxhBHWuV8dvHod1seQ@mail.gmail.com>
References: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>
	<201409082155.56976.even.rouault@spatialys.com>
	<CAJB43VoiMB0sF1-jJOAudviwA+_wtVmOkxhBHWuV8dvHod1seQ@mail.gmail.com>
Message-ID: <201409082352.59995.even.rouault@spatialys.com>


> - gnm/frmts/gnm_frmts.h :  I'm a bit concerned about exposing (installed
> 
> > header + CPL_DLL) an interface that has not yet been implemented. My
> > intuition
> > is that it might change once the first one or two implementations have
> > been made. So maybe keep it internal/experimental for now.
> 
> I agree that the inclusion of the interfaces/capabilities that can be (not
> will be) extended in future is not a 100% good idea. I hoped that someone
> will be interested or even I will have time to implement and extend
> something of what I wrote at the "Future ideas" section in my RFC. But we
> do not know exactly will it be implemented or not. So: (1) We can remove
> for now all these interfaces "for future", which means to leave only
> GNMGdalNetwork and one analysing class. (2) Try to implement these
> capabilities: pgRouting for gnm_frmts.h and for example
> GNMGdalStdRoutingAnalyser with some algorithm extension (K shortest path).

It's your call. Depend on how much time you have to implement that, but we 
might go with the current state, if we clearly mark experimental/unstabilized 
interfaces as such. Either by "hiding" them, or by documentation if not 
possible.

> - GNMManager::CreateConnectivity () : I'm confused by the 'native' term. In
> 
> > this method, native=false seems to imply the GDAL "proprietary" network
> > format
> > that can work with any vector driver that has similar capabilities than
> > shapefile. Whereas in the RFC text, it seems to imply the contrary (
> > "network
> > of ?GDAL-native? format").
> 
> Maybe I used it not correctly everywhere, but the general idea is the
> following: The term "native" corresponds to the existed network formats (so
> when we work with pgRouting network we work with its native tables and
> fields, rather than with GNMGdal- system layers), while the GDAL-networks
> are not "native" and more likely "common".
> 

Yes, that would be good if the language could be consistent among the code and 
the RFC text. From your explanation, it seems that the text in the RFC should 
be corrected. Yes GDAL-network is more a "common" or "generic" network 
implementation.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at stripfamily.net  Mon Sep  8 19:54:19 2014
From: gdal at stripfamily.net (David Strip)
Date: Mon, 08 Sep 2014 20:54:19 -0600
Subject: [gdal-dev] GetFeatureCount() bForce set to FALSE
In-Reply-To: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
References: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
Message-ID: <540E6BDB.8020708@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140908/f023a669/attachment.html>

From landa.martin at gmail.com  Mon Sep  8 23:15:07 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 9 Sep 2014 08:15:07 +0200
Subject: [gdal-dev] GetFeatureCount() bForce set to FALSE
In-Reply-To: <540E6BDB.8020708@stripfamily.net>
References: <CA+Ei1OeNth8ikTF26ZsynNJqzarsozqq9jZG5mD_1+LLz-p4tw@mail.gmail.com>
	<540E6BDB.8020708@stripfamily.net>
Message-ID: <CA+Ei1OcDGbbOOSJWE7+HgxqA10bNw1hPVkGAi+rS=sBfY7Mtpg@mail.gmail.com>

Hi,

2014-09-09 4:54 GMT+02:00 David Strip <gdal at stripfamily.net>:

> 83     int                  GetFeatureCount(int = TRUE);
>
>
> ie, you have not changed the default to FALSE as you intended. If this is the code you're compiling, it would certainly explain your problem.

no, of course I changed the code, ie.

int                  GetFeatureCount(int = FALSE);

locally. I agree that it's a bad practice and I solved the problem
based on Even's suggestion. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From CABO at NIRAS.DK  Tue Sep  9 08:16:16 2014
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Tue, 9 Sep 2014 15:16:16 +0000
Subject: [gdal-dev] Python error (missing?) when performing RasterizeLayer
 on specific polygon with two very close vertices
Message-ID: <BCF6B63AE0B25941A7F56567B58A28056B4C503A@allkexa1.NIRAS.INT>

I have the following polygon:

POLYGON ((539500.00004634191 6314429.5954758488,539499.999 6314429.5964747742,539500.0 6314500.001,539563.49086194986 6314500.001,539574.70556674246 6314491.5008581309,539591.23494657199 6314478.9664945751,539600.001 6314472.1168122729,539600.00014411798 6314460.5601839637,539543.07124903298 6314452.2691510962,539546.30058158806 6314438.619163854,539507.3702219734 6314429.939004397,539505.68004823104 6314429.8589810915,539500.00004634191 6314429.5954758488))

I have created a memory vector layer and added this polygon as the only feature.

    projection = ...
    geometry = ...
    ogr_mem_drv = ogr.GetDriverByName('Memory')

    mem_vector_ds = ogr_mem_drv.CreateDataSource('')
    mem_vector_layer = mem_vector_ds.CreateLayer('', srs=projection)
    feature = ogr.Feature(mem_vector_layer.GetLayerDefn())
    feature.SetGeometry(geometry.Clone())
    mem_vector_layer.CreateFeature(feature)

    gdal_mem_drv = gdal.GetDriverByName('MEM')
    mem_raster_ds = gdal_mem_drv.Create('',5,5,1,gdal.GDT_Byte)
    mem_raster_ds.SetGeoTransform([...])
    mem_raster_ds.SetProjection(mem_vector_layer.GetSpatialRef().ExportToWkt())

    err = gdal.RasterizeLayer(mem_raster_ds, [1], mem_vector_layer, None, None, [1], ['ALL_TOUCHED=TRUE'])

When running the last line with gdal.RasterizeLayer(...) my program waits a couple of seconds and then just terminates without any exception or error.

If  I remove vertex number two from the above WKT it works. Vertex 1 and 2 are very close (located in the lower left corner of the polygon).

I am running GDAL 1.10.1 and Python 3.2, builds are stable releases from http://www.gisinternals.com/sdk/.

What could be the reason for this strange error?


Kind regards, Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140909/f6b94cf4/attachment.html>

From rajjad at gmail.com  Tue Sep  9 08:41:02 2014
From: rajjad at gmail.com (Imran Rajjad)
Date: Tue, 9 Sep 2014 20:41:02 +0500
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <201409082352.59995.even.rouault@spatialys.com>
References: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>
	<201409082155.56976.even.rouault@spatialys.com>
	<CAJB43VoiMB0sF1-jJOAudviwA+_wtVmOkxhBHWuV8dvHod1seQ@mail.gmail.com>
	<201409082352.59995.even.rouault@spatialys.com>
Message-ID: <CADz3VuXMjwH-b89RJ0Z4BQKoxX-DE669b_MVHZ4wiG_HaBYADA@mail.gmail.com>

Will this be available for java bindings too?
On Sep 9, 2014 12:53 AM, "Even Rouault" <even.rouault at spatialys.com> wrote:

>
> > - gnm/frmts/gnm_frmts.h :  I'm a bit concerned about exposing (installed
> >
> > > header + CPL_DLL) an interface that has not yet been implemented. My
> > > intuition
> > > is that it might change once the first one or two implementations have
> > > been made. So maybe keep it internal/experimental for now.
> >
> > I agree that the inclusion of the interfaces/capabilities that can be
> (not
> > will be) extended in future is not a 100% good idea. I hoped that someone
> > will be interested or even I will have time to implement and extend
> > something of what I wrote at the "Future ideas" section in my RFC. But we
> > do not know exactly will it be implemented or not. So: (1) We can remove
> > for now all these interfaces "for future", which means to leave only
> > GNMGdalNetwork and one analysing class. (2) Try to implement these
> > capabilities: pgRouting for gnm_frmts.h and for example
> > GNMGdalStdRoutingAnalyser with some algorithm extension (K shortest
> path).
>
> It's your call. Depend on how much time you have to implement that, but we
> might go with the current state, if we clearly mark
> experimental/unstabilized
> interfaces as such. Either by "hiding" them, or by documentation if not
> possible.
>
> > - GNMManager::CreateConnectivity () : I'm confused by the 'native' term.
> In
> >
> > > this method, native=false seems to imply the GDAL "proprietary" network
> > > format
> > > that can work with any vector driver that has similar capabilities than
> > > shapefile. Whereas in the RFC text, it seems to imply the contrary (
> > > "network
> > > of ?GDAL-native? format").
> >
> > Maybe I used it not correctly everywhere, but the general idea is the
> > following: The term "native" corresponds to the existed network formats
> (so
> > when we work with pgRouting network we work with its native tables and
> > fields, rather than with GNMGdal- system layers), while the GDAL-networks
> > are not "native" and more likely "common".
> >
>
> Yes, that would be good if the language could be consistent among the code
> and
> the RFC text. From your explanation, it seems that the text in the RFC
> should
> be corrected. Yes GDAL-network is more a "common" or "generic" network
> implementation.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140909/17e5b853/attachment-0001.html>

From CABO at NIRAS.DK  Tue Sep  9 09:08:16 2014
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Tue, 9 Sep 2014 16:08:16 +0000
Subject: [gdal-dev] Python error (missing?) when performing
 RasterizeLayer on specific polygon with two very close vertices
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28056B4C503A@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A28056B4C503A@allkexa1.NIRAS.INT>
Message-ID: <BCF6B63AE0B25941A7F56567B58A28056B4C506E@allkexa1.NIRAS.INT>

I have tried with GDAL 1.11 and Python 3.2 (again the builds are from GISInternals), and it gives me the same result. Python just terminated without any warning or error.

Both versions of GDAL are x64.


Kind regards, Casper

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Casper B?rgesen (CABO)
Sent: 9. september 2014 17:16
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Python error (missing?) when performing RasterizeLayer on specific polygon with two very close vertices

I have the following polygon:

POLYGON ((539500.00004634191 6314429.5954758488,539499.999 6314429.5964747742,539500.0 6314500.001,539563.49086194986 6314500.001,539574.70556674246 6314491.5008581309,539591.23494657199 6314478.9664945751,539600.001 6314472.1168122729,539600.00014411798 6314460.5601839637,539543.07124903298 6314452.2691510962,539546.30058158806 6314438.619163854,539507.3702219734 6314429.939004397,539505.68004823104 6314429.8589810915,539500.00004634191 6314429.5954758488))

I have created a memory vector layer and added this polygon as the only feature.

    projection = ...
    geometry = ...
    ogr_mem_drv = ogr.GetDriverByName('Memory')

    mem_vector_ds = ogr_mem_drv.CreateDataSource('')
    mem_vector_layer = mem_vector_ds.CreateLayer('', srs=projection)
    feature = ogr.Feature(mem_vector_layer.GetLayerDefn())
    feature.SetGeometry(geometry.Clone())
    mem_vector_layer.CreateFeature(feature)

    gdal_mem_drv = gdal.GetDriverByName('MEM')
    mem_raster_ds = gdal_mem_drv.Create('',5,5,1,gdal.GDT_Byte)
    mem_raster_ds.SetGeoTransform([...])
    mem_raster_ds.SetProjection(mem_vector_layer.GetSpatialRef().ExportToWkt())

    err = gdal.RasterizeLayer(mem_raster_ds, [1], mem_vector_layer, None, None, [1], ['ALL_TOUCHED=TRUE'])

When running the last line with gdal.RasterizeLayer(...) my program waits a couple of seconds and then just terminates without any exception or error.

If  I remove vertex number two from the above WKT it works. Vertex 1 and 2 are very close (located in the lower left corner of the polygon).

I am running GDAL 1.10.1 and Python 3.2, builds are stable releases from http://www.gisinternals.com/sdk/.

What could be the reason for this strange error?


Kind regards, Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140909/621090f3/attachment.html>

From even.rouault at spatialys.com  Tue Sep  9 10:37:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Sep 2014 19:37:30 +0200
Subject: [gdal-dev] Python error (missing?) when performing
	RasterizeLayer on specific polygon with two very close vertices
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28056B4C506E@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A28056B4C503A@allkexa1.NIRAS.INT>
	<BCF6B63AE0B25941A7F56567B58A28056B4C506E@allkexa1.NIRAS.INT>
Message-ID: <201409091937.30730.even.rouault@spatialys.com>

Le mardi 09 septembre 2014 18:08:16, Casper B?rgesen (CABO) a ?crit :
> I have tried with GDAL 1.11 and Python 3.2 (again the builds are from
> GISInternals), and it gives me the same result. Python just terminated
> without any warning or error.
> 
> Both versions of GDAL are x64.

Casper,

This is probably an issue with the rasterization algorithm itself. I'd suggest 
you to provide a fully reproducible sample script (i.e. without "...") and put 
it/attach it in a new ticket at http://trac.osgeo.org/gdal/newticket

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From purelyamethyst at gmail.com  Wed Sep 10 06:30:54 2014
From: purelyamethyst at gmail.com (Beau Taylor)
Date: Wed, 10 Sep 2014 22:30:54 +0900
Subject: [gdal-dev] unable to write a shapefile using ogr
Message-ID: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>

The following program successfully creates a shape file I am requiring.

from osgeo import ogr
from osgeo import osr

def myRing(coords):
    ring = ogr.Geometry(ogr.wkbLinearRing)
    for xy in coords:
        ring.AddPoint(xy[0],xy[1])
    return ring

coords = [(-23.378906,68.974164), (-23.378906,34.307144),
(31.464844,34.307144), (31.464844,68.974164), (-23.378906,68.974164)]

ring = myRing(coords)
poly = ogr.Geometry(ogr.wkbPolygon)
poly.AddGeometry(ring)

outDriver = ogr.GetDriverByName('ESRI Shapefile')
data_source = outDriver.CreateDataSource('test.shp')
srs = osr.SpatialReference()
srs.ImportFromEPSG(4326)
layer = data_source.CreateLayer('test.shp', srs, ogr.wkbPolygon)

feature = ogr.Feature(layer.GetLayerDefn())
feature.SetGeometry(poly)
layer.CreateFeature(feature)

feature.Destroy
data_source.Destroy()

However, I did not know how to do the followings:

-set the color of outer ring as blue,
-do not fill the polygen
-name the feature as 'test'

I hope someone can help me.

Thanks in the advance.
Beau
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140910/3f47f787/attachment.html>

From landa.martin at gmail.com  Wed Sep 10 08:07:18 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 10 Sep 2014 17:07:18 +0200
Subject: [gdal-dev] arcs and circles as OGR geometry
Message-ID: <CA+Ei1Oeycp-z_kF46-b25Oen=e5VXofAEmnavt_0sk7shYKcLw@mail.gmail.com>

Hi all,

in VFK driver which I maintain I would like to implement support for
arcs and circles which can be part of VFK file beside line strings
which are more common.

It's seems to me that the only way how to process such geometry in OGR
library is to approximate circles or arcs with linestrings, is it
right?

Thanks a lot, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at spatialys.com  Wed Sep 10 08:15:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Sep 2014 17:15:30 +0200
Subject: [gdal-dev] arcs and circles as OGR geometry
In-Reply-To: <CA+Ei1Oeycp-z_kF46-b25Oen=e5VXofAEmnavt_0sk7shYKcLw@mail.gmail.com>
References: <CA+Ei1Oeycp-z_kF46-b25Oen=e5VXofAEmnavt_0sk7shYKcLw@mail.gmail.com>
Message-ID: <201409101715.30453.even.rouault@spatialys.com>

Le mercredi 10 septembre 2014 17:07:18, Martin Landa a ?crit :
> Hi all,
> 
> in VFK driver which I maintain I would like to implement support for
> arcs and circles which can be part of VFK file beside line strings
> which are more common.
> 
> It's seems to me that the only way how to process such geometry in OGR
> library is to approximate circles or arcs with linestrings, is it
> right?

Martin,

Yes, there's no suppport for curve geometries yet, and linear approximation is 
what has been used up to now (GML, DXF, ...). However I have reasonable hope 
to get funding "soon", hopefully before end of year, to be able to work on 
that.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Wed Sep 10 08:31:27 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 10 Sep 2014 17:31:27 +0200
Subject: [gdal-dev] arcs and circles as OGR geometry
In-Reply-To: <201409101715.30453.even.rouault@spatialys.com>
References: <CA+Ei1Oeycp-z_kF46-b25Oen=e5VXofAEmnavt_0sk7shYKcLw@mail.gmail.com>
	<201409101715.30453.even.rouault@spatialys.com>
Message-ID: <CA+Ei1OefVz-emCfrZEbByWhyH6JRLBSSoyG5Ryjx9iBLPkPGFA@mail.gmail.com>

Hi Even,

2014-09-10 17:15 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Yes, there's no suppport for curve geometries yet, and linear approximation is
> what has been used up to now (GML, DXF, ...). However I have reasonable hope
> to get funding "soon", hopefully before end of year, to be able to work on
> that.

thanks for info! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From kyle at pobox.com  Wed Sep 10 08:37:18 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 10 Sep 2014 09:37:18 -0600
Subject: [gdal-dev] unable to write a shapefile using ogr
In-Reply-To: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
References: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
Message-ID: <CAJ0mEz3TYPvd9HX_6jDOSFLje-UQk+zz81t-d-fFZEx1t3T+cg@mail.gmail.com>

Beau,

On Wed, Sep 10, 2014 at 7:30 AM, Beau Taylor <purelyamethyst at gmail.com> wrote:
> The following program successfully creates a shape file I am requiring.
>
> from osgeo import ogr
> from osgeo import osr
>
> def myRing(coords):
>     ring = ogr.Geometry(ogr.wkbLinearRing)
>     for xy in coords:
>         ring.AddPoint(xy[0],xy[1])
>     return ring
>
> coords = [(-23.378906,68.974164), (-23.378906,34.307144),
> (31.464844,34.307144), (31.464844,68.974164), (-23.378906,68.974164)]
>
> ring = myRing(coords)
> poly = ogr.Geometry(ogr.wkbPolygon)
> poly.AddGeometry(ring)
>
> outDriver = ogr.GetDriverByName('ESRI Shapefile')
> data_source = outDriver.CreateDataSource('test.shp')
> srs = osr.SpatialReference()
> srs.ImportFromEPSG(4326)
> layer = data_source.CreateLayer('test.shp', srs, ogr.wkbPolygon)
>
> feature = ogr.Feature(layer.GetLayerDefn())
> feature.SetGeometry(poly)
> layer.CreateFeature(feature)
>
> feature.Destroy
> data_source.Destroy()
>
> However, I did not know how to do the followings:
>
> -set the color of outer ring as blue,
> -do not fill the polygen

Style is usually dictated by the application.  You can set them in the
app, or for some formats/drivers you can use the OGR style API:

http://gdal.org/ogr_feature_style.html

AFAIK, shapefiles do not support styles

> -name the feature as 'test'

Add a field to the feature definition, called 'name', see the
tutorial, I think it has that exact example:

http://gdal.org/ogr_apitut.html

>
> I hope someone can help me.
>
> Thanks in the advance.
> Beau
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

If you are using GDAL/OGR 1.x, use the docs at:

http://gdal.org/1.11/index.html


-- 
Kyle

From bishop.dev at gmail.com  Wed Sep 10 09:43:35 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 10 Sep 2014 20:43:35 +0400
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <CADz3VuXMjwH-b89RJ0Z4BQKoxX-DE669b_MVHZ4wiG_HaBYADA@mail.gmail.com>
References: <CAJB43VoQhuC-HiAvq8MDC_RoaP4KjSZf3ShbL=zsvpyUQ7gecQ@mail.gmail.com>	<201409082155.56976.even.rouault@spatialys.com>	<CAJB43VoiMB0sF1-jJOAudviwA+_wtVmOkxhBHWuV8dvHod1seQ@mail.gmail.com>	<201409082352.59995.even.rouault@spatialys.com>
	<CADz3VuXMjwH-b89RJ0Z4BQKoxX-DE669b_MVHZ4wiG_HaBYADA@mail.gmail.com>
Message-ID: <54107FB7.6000604@gmail.com>

Hi, Imran.

Yes, I think so. It depends on including GNM into GDAL. The python 
binding using swig, so adding the java will be simple.

Best regards,
     Dmitry

09.09.2014 19:41, Imran Rajjad ?????:
>
> Will this be available for java bindings too?
>
> On Sep 9, 2014 12:53 AM, "Even Rouault" <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>
>     > - gnm/frmts/gnm_frmts.h :  I'm a bit concerned about exposing
>     (installed
>     >
>     > > header + CPL_DLL) an interface that has not yet been
>     implemented. My
>     > > intuition
>     > > is that it might change once the first one or two
>     implementations have
>     > > been made. So maybe keep it internal/experimental for now.
>     >
>     > I agree that the inclusion of the interfaces/capabilities that
>     can be (not
>     > will be) extended in future is not a 100% good idea. I hoped
>     that someone
>     > will be interested or even I will have time to implement and extend
>     > something of what I wrote at the "Future ideas" section in my
>     RFC. But we
>     > do not know exactly will it be implemented or not. So: (1) We
>     can remove
>     > for now all these interfaces "for future", which means to leave only
>     > GNMGdalNetwork and one analysing class. (2) Try to implement these
>     > capabilities: pgRouting for gnm_frmts.h and for example
>     > GNMGdalStdRoutingAnalyser with some algorithm extension (K
>     shortest path).
>
>     It's your call. Depend on how much time you have to implement
>     that, but we
>     might go with the current state, if we clearly mark
>     experimental/unstabilized
>     interfaces as such. Either by "hiding" them, or by documentation
>     if not
>     possible.
>
>     > - GNMManager::CreateConnectivity () : I'm confused by the
>     'native' term. In
>     >
>     > > this method, native=false seems to imply the GDAL
>     "proprietary" network
>     > > format
>     > > that can work with any vector driver that has similar
>     capabilities than
>     > > shapefile. Whereas in the RFC text, it seems to imply the
>     contrary (
>     > > "network
>     > > of ?GDAL-native? format").
>     >
>     > Maybe I used it not correctly everywhere, but the general idea
>     is the
>     > following: The term "native" corresponds to the existed network
>     formats (so
>     > when we work with pgRouting network we work with its native
>     tables and
>     > fields, rather than with GNMGdal- system layers), while the
>     GDAL-networks
>     > are not "native" and more likely "common".
>     >
>
>     Yes, that would be good if the language could be consistent among
>     the code and
>     the RFC text. From your explanation, it seems that the text in the
>     RFC should
>     be corrected. Yes GDAL-network is more a "common" or "generic" network
>     implementation.
>
>     --
>     Spatialys - Geospatial professional services
>     http://www.spatialys.com
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140910/19e54f88/attachment.html>

From nhatzop at gmail.com  Wed Sep 10 10:15:47 2014
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed, 10 Sep 2014 10:15:47 -0700
Subject: [gdal-dev] Uint16 geotiff
Message-ID: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>

Dear All,

so I have an RGB image in tiff format with uint16
when I use gdalwrap the TIFFTAG_MINSAMPLEVALUE
and TIFFTAG_MAXSAMPLEVALUE are magicaly disappearing
from the result image

WHYYY???

--Nikos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140910/16a12410/attachment-0001.html>

From warmerdam at pobox.com  Wed Sep 10 10:36:53 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 10 Sep 2014 10:36:53 -0700
Subject: [gdal-dev] Uint16 geotiff
In-Reply-To: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>
References: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>
Message-ID: <CA+YzLBfbDABzACp75uDhZ81fcfmGS1KiEk8eyqBMmc5aZH3r_Q@mail.gmail.com>

Gdalwarp generally does not propagate metadata from the source(s) to the
output file.  One approach is to use gdal_translate after to re-add desired
metadata.  Alternatively you could precreate the output file and populate
it with metadata.  I often do this part in python.

Best regards,
Frank
On Sep 10, 2014 10:17 AM, "Nikolaos Hatzopoulos" <nhatzop at gmail.com> wrote:

> Dear All,
>
> so I have an RGB image in tiff format with uint16
> when I use gdalwrap the TIFFTAG_MINSAMPLEVALUE
> and TIFFTAG_MAXSAMPLEVALUE are magicaly disappearing
> from the result image
>
> WHYYY???
>
> --Nikos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140910/cc9d02c9/attachment.html>

From bhudspeth at edac.unm.edu  Wed Sep 10 11:02:47 2014
From: bhudspeth at edac.unm.edu (VictoriaH)
Date: Wed, 10 Sep 2014 11:02:47 -0700 (PDT)
Subject: [gdal-dev] Extract subdataset from netCDF in a given directory
Message-ID: <1410372167496-5161167.post@n6.nabble.com>

Hello, I am using gdal_translate to extract a subdataset from a netCDF file
to a geotiff. If I run the command from the same directory where the netCDF
file is located, there is no problem:

Filename: PM25_2001_02_average.nc

Ex. gdal_translate -of GTiff HDF5:"PM25_2001_02_average.nc"://Data
/var/www/pm25/netCDF/output.tif'

However, if I try to run gdal-translate and point to a netCDF file in a
different directory, I get an error:

Ex. gdal_translate -of GTiff
/netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data
/tiff/files/pm25/netCDF/output.tif'

GDALOpen failed - 4
` /netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data' does not exist in the
file system,
and is not recognised as a supported dataset name.

Can anyone tell me how this is done. I need to run a single script and enter
different directory locations to access various netCDF files...

Thanks, Vick



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Extract-subdataset-from-netCDF-in-a-given-directory-tp5161167.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Wed Sep 10 14:27:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 10 Sep 2014 21:27:29 +0000 (UTC)
Subject: [gdal-dev] Uint16 geotiff
References: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>
	<CA+YzLBfbDABzACp75uDhZ81fcfmGS1KiEk8eyqBMmc5aZH3r_Q@mail.gmail.com>
Message-ID: <loom.20140910T232417-567@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> 
> Gdalwarp generally does not propagate metadata from the source(s) to the
output file.? One approach is to use gdal_translate after to re-add desired
metadata.? Alternatively you could precreate the output file and populate it
with metadata.? I often do this part in python.? 

Some people know that we have gdal_edit.py nowadays for those who do not
write python themselves http://www.gdal.org/gdal_edit.html. See the -mo
option, it may suit you.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Wed Sep 10 14:33:39 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 10 Sep 2014 21:33:39 +0000 (UTC)
Subject: [gdal-dev] unable to write a shapefile using ogr
References: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
	<CAJ0mEz3TYPvd9HX_6jDOSFLje-UQk+zz81t-d-fFZEx1t3T+cg@mail.gmail.com>
Message-ID: <loom.20140910T232905-509@post.gmane.org>

Kyle Shannon <kyle <at> pobox.com> writes:

> 
> Style is usually dictated by the application.  You can set them in the
> app, or for some formats/drivers you can use the OGR style API:
> 
> http://gdal.org/ogr_feature_style.html
> 
> AFAIK, shapefiles do not support styles

As you said, style is dictated by application. If you create an "OGR_STYLE"
column into shapefile and populate it with OGR feature style strings some
programs can utilize them. I know that Mapserver can do it as well as GDAL
when it writes PDF files.

-Jukka Rahkonen-


From shuai at illinois.edu  Wed Sep 10 14:51:00 2014
From: shuai at illinois.edu (Zhang, Shuai)
Date: Wed, 10 Sep 2014 21:51:00 +0000
Subject: [gdal-dev] Cygwin x86_64 complie gdal-1.11.0 fail
Message-ID: <2DAEBB32799F494EBE504E1247CC5E8220EE4131@CITESMBX6.ad.uillinois.edu>

Hi there,

I think I just found a bug when I tried to compile gdal-1.11.0 using cygwin in my laptop. it returns a fail info as below. I did a little search and found that setmod function is no longer supported by the cygwin. it is said that this kind of problem can only seen in x86_64 platform and can walk around by include <io.h>. 

hope anyone get a better idea~

yours,
Hanson

see: https://cygwin.com/ml/cygwin/2010-09/msg00267.html

/home/Hanson/gdal-1.11.0/frmts/o/.libs/egif_lib.o: In function `EGifOpenFileHandle':
/home/Hanson/gdal-1.11.0/frmts/gif/giflib/egif_lib.c:137: undefined reference to `setmode'
/home/Hanson/gdal-1.11.0/frmts/gif/giflib/egif_lib.c:137:(.text+0x4f7): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `setmode'
collect2: error: ld returned 1 exit status
GNUmakefile:41: recipe for target 'libgdal.la' failed
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory '/home/Hanson/gdal-1.11.0'
GNUmakefile:50: recipe for target 'check-lib' failed
make: *** [check-lib] Error 2

From nhatzop at gmail.com  Wed Sep 10 15:11:51 2014
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed, 10 Sep 2014 15:11:51 -0700
Subject: [gdal-dev] Uint16 geotiff
In-Reply-To: <CA+YzLBfbDABzACp75uDhZ81fcfmGS1KiEk8eyqBMmc5aZH3r_Q@mail.gmail.com>
References: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>
	<CA+YzLBfbDABzACp75uDhZ81fcfmGS1KiEk8eyqBMmc5aZH3r_Q@mail.gmail.com>
Message-ID: <CALDJGKDxfHgzAaaavSPM7VjsWE72EtAMjz8ZMwtK9_wuYp9zJA@mail.gmail.com>

gdal translate can not add the TIFFTAG_MINSAMPLEVALUE TIFFTAG_MAXSAMPLEVALUE
the specific tag are readonly

see:
http://www.gdal.org/frmt_gtiff.html

On Wed, Sep 10, 2014 at 10:36 AM, Frank Warmerdam <warmerdam at pobox.com>
wrote:

> Gdalwarp generally does not propagate metadata from the source(s) to the
> output file.  One approach is to use gdal_translate after to re-add desired
> metadata.  Alternatively you could precreate the output file and populate
> it with metadata.  I often do this part in python.
>
> Best regards,
> Frank
> On Sep 10, 2014 10:17 AM, "Nikolaos Hatzopoulos" <nhatzop at gmail.com>
> wrote:
>
>> Dear All,
>>
>> so I have an RGB image in tiff format with uint16
>> when I use gdalwrap the TIFFTAG_MINSAMPLEVALUE
>> and TIFFTAG_MAXSAMPLEVALUE are magicaly disappearing
>> from the result image
>>
>> WHYYY???
>>
>> --Nikos
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140910/3da7bf8a/attachment.html>

From ljvillarin30 at gmail.com  Wed Sep 10 21:02:18 2014
From: ljvillarin30 at gmail.com (user_name)
Date: Wed, 10 Sep 2014 21:02:18 -0700 (PDT)
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
Message-ID: <1410408138063-5161212.post@n6.nabble.com>

I know I'm not the first to post this topic and encountered this problem. But
I've search and read some posts related to this and tried their solutions
but no luck. I really can't figure out what is causing this problem. How am
I going to solve it?

I have tried gdalwarp -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES and still no
luck.

Here are the info:

gdalwarp -t_srs "+proj=longlat +datum=WGS84"
HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":37 hdf.tif

Creating output file that is 783P x 697L.
Processing input file HDF4_SDS:UNKNOWN:A2014042042000.L2_LAC.SeAHABS.hdf:37.
ERROR 1: Too many points (440 out of 441) failed to transform,
unable to compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,783,697,
skipping.
0...10...20...30...40...50...60...70...80...90...100 - done.


*GDALINFO:*

Driver: HDF4Image/HDF4 Dataset
Files: A2014042042000.L2_LAC.SeAHABS.hdf
Size is 563, 880
Coordinate System is `'
Metadata:
  bad_value_scaled=-32767
  bad_value_unscaled=-32767
  Calibration Data=A2014042042000.L1A_LAC.eAHAB.hdf,
MYD02_Reflective_LUTs.V6.1.17.19_OC.hdf, MYD02_Emissive_LUTs.V6.1.1
7.19_OC.hdf, MYD02_QA_LUTs.V6.1.17.19_OC.hdf
  cdm_data_type=swath
  Conventions=CF-1.6
  creator email=data at oceancolor.gsfc.nasa.gov
  creator name=NASA/GSFC/OBPG
  creator url=http://oceandata.sci.gsfc.nasa.gov
  date_created=20140211T064516Z
  Day or Night=Day
  Earth-Sun Distance Correction=1.02664971351624
  Easternmost Longitude=136.7005615
  End Center Latitude=11.01664448
  End Center Longitude=131.961853
  End Day=42
  End Millisec=15905744
  End Node=Ascending
  End Time=2014042042505744
  End Year=2014
  Flag Percentages=0, 1.770345688, 0, 52.53552246, 57.10398483, 8.07766819,
0.434966892, 0, 29.46895599, 64.5276947, 0.0
002018407686, 0.4016631842, 0, 0, 2.331059217, 0.0367350243, 0, 0, 0,
0.4466736615, 77.9515152, 0, 1.508356214, 0, 0, 1.
087921858, 0, 72.44247437, 1.770345688, 6.767116547, 90.6432724, 0
  geospatial_lat_max=11.47631836
  geospatial_lat_min=2.273697615
  geospatial_lat_units=degrees_north
  geospatial_lon_max=136.7005615
  geospatial_lon_min=125.5854034
  geospatial_lon_units=degrees_east

  Latitude Units=degrees North
 
license=http://science.nasa.gov/earth-science/earth-science-data/data-information-policy/
  long_name=Chlorophyll Concentration, OC3 Algorithm
  Longitude Units=degrees East
  Lower Left Latitude=11.47631836
  Lower Left Longitude=135.0154266
  Lower Right Latitude=9.963588715
  Lower Right Longitude=125.5854034
  Mask Names=ATMFAIL,LAND,CLDICE,HILT
  naming_authority=gov.nasa.gsfc.sci.oceandata
  Node Crossing Time=0000334000000
  Northernmost Latitude=11.47631836
  Number of Bands=16
  Number of Pixel Control Points=563
  Number of Scan Control Points=880
  Number of Scan Lines=880
  Orbit Node Longitude=-999
  Orbit Number=-1
  Pixels per Scan Line=563
  
  Scene Center Latitude=7.185176849
  Scene Center Longitude=132.8315887
  Scene Center Scan Line=440
  Scene Center Solar Zenith=26.09000015
  Scene Center Time=2014042042403706
  Sensor Name=HMODISA

  Upper Left Latitude=3.718107462
  Upper Left Longitude=136.7005615
  Upper Right Latitude=2.273697615
  Upper Right Longitude=127.4018173
  Westernmost Longitude=125.5854034
Geolocation:
  LINE_OFFSET=0
  LINE_STEP=1
  PIXEL_OFFSET=0
  PIXEL_STEP=1
  SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0
,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHOR
ITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
  X_BAND=1
  X_DATASET=HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":11
  Y_BAND=1
  Y_DATASET=HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":12
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  880.0)
Upper Right (  563.0,    0.0)
Lower Right (  563.0,  880.0)
Center      (  281.5,  440.0)
Band 1 Block=563x880 Type=Float32, ColorInterp=Gray




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ERROR-1-Too-many-points-440-out-of-441-failed-to-transform-unable-to-compute-output-bounds-tp5161212.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From vwf at vulkor.net  Wed Sep 10 22:33:50 2014
From: vwf at vulkor.net (vwf)
Date: Thu, 11 Sep 2014 07:33:50 +0200
Subject: [gdal-dev] S57 and area reconstruction
Message-ID: <20140911053350.GA7386@trane.vulkor.net>

Hello,

My question is about S57, not gdal, but one of you may be able to help 
me. 

When an area (like "prcare") is at the edge of a cell (map) there will 
be a vertex on the edge of the cel. With several cells the full area can
have several lines going through the area. Is there a trick/technique to
reconstruct the outer edge or remove the extra lines?

Thank you,
Frits


From jukka.rahkonen at mmmtike.fi  Wed Sep 10 23:32:24 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 11 Sep 2014 06:32:24 +0000 (UTC)
Subject: [gdal-dev] Uint16 geotiff
References: <CALDJGKA80tcMi_UsT_+GHY5s5=Adb3n3bsS_Qxa8ChtYZ+Z7Zg@mail.gmail.com>
	<CA+YzLBfbDABzACp75uDhZ81fcfmGS1KiEk8eyqBMmc5aZH3r_Q@mail.gmail.com>
	<CALDJGKDxfHgzAaaavSPM7VjsWE72EtAMjz8ZMwtK9_wuYp9zJA@mail.gmail.com>
Message-ID: <loom.20140911T083013-975@post.gmane.org>

Nikolaos Hatzopoulos <nhatzop <at> gmail.com> writes:

> gdal translate can not add the TIFFTAG_MINSAMPLEVALUE TIFFTAG_MAXSAMPLEVALUE
> the specific tag are readonlysee:http://www.gdal.org/frmt_gtiff.html

Hi,

Works for me with gdal_edit.py:

>c:\python27\python C:\gdal_dev\bin\gdal\python\scripts\gdal_edit.py -mo
"TIFFTAG_MAXSAMPLEVALUE=200" test_1000by1000.tif

gdalinfo test_1000by1000.tif
...
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_MAXSAMPLEVALUE=200
...

-Jukka Rahkonen-



From ljvillarin30 at gmail.com  Thu Sep 11 01:45:31 2014
From: ljvillarin30 at gmail.com (Love)
Date: Thu, 11 Sep 2014 16:45:31 +0800
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
Message-ID: <CAMZEyL6nEqwgrX64-s8uCT=gL=62YvbBjo=yEyC1uYTqJh7Ehw@mail.gmail.com>

I know I'm not the first to post this topic and encountered this problem.
But I've search and read some posts related to this and tried their
solutions but no luck. I really can't figure out what is causing this
problem. How am I going to solve it? Badly need help!

I have tried gdalwarp -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES and still no
luck.

Here are the info:

gdalwarp -t_srs "+proj=longlat +datum=WGS84"
HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":37 hdf.tif

Creating output file that is 783P x 697L.
Processing input file
HDF4_SDS:UNKNOWN:A2014042042000.L2_LAC.SeAHABS.hdf:37.
ERROR 1: Too many points (440 out of 441) failed to transform,
unable to compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,783,697,
skipping.
0...10...20...30...40...50...60...70...80...90...100 - done.


*GDALINFO:*

Driver: HDF4Image/HDF4 Dataset
Files: A2014042042000.L2_LAC.SeAHABS.hdf
Size is 563, 880
Coordinate System is `'
Metadata:
  bad_value_scaled=-32767
  bad_value_unscaled=-32767
  Calibration Data=A2014042042000.L1A_LAC.eAHAB.hdf,
MYD02_Reflective_LUTs.V6.1.17.19_OC.hdf, MYD02_Emissive_LUTs.V6.1.1
7.19_OC.hdf, MYD02_QA_LUTs.V6.1.17.19_OC.hdf
  cdm_data_type=swath
  Conventions=CF-1.6
  creator email=data at oceancolor.gsfc.nasa.gov
  creator name=NASA/GSFC/OBPG
  creator url=http://oceandata.sci.gsfc.nasa.gov
  date_created=20140211T064516Z
  Day or Night=Day
  Earth-Sun Distance Correction=1.02664971351624
  Easternmost Longitude=136.7005615
  End Center Latitude=11.01664448
  End Center Longitude=131.961853
  End Day=42
  End Millisec=15905744
  End Node=Ascending
  End Time=2014042042505744
  End Year=2014
  Flag Percentages=0, 1.770345688, 0, 52.53552246, 57.10398483, 8.07766819,
0.434966892, 0, 29.46895599, 64.5276947, 0.0
002018407686, 0.4016631842, 0, 0, 2.331059217, 0.0367350243, 0, 0, 0,
0.4466736615, 77.9515152, 0, 1.508356214, 0, 0, 1.
087921858, 0, 72.44247437, 1.770345688, 6.767116547, 90.6432724, 0
  geospatial_lat_max=11.47631836
  geospatial_lat_min=2.273697615
  geospatial_lat_units=degrees_north
  geospatial_lon_max=136.7005615
  geospatial_lon_min=125.5854034
  geospatial_lon_units=degrees_east

  Latitude Units=degrees North
  license=
http://science.nasa.gov/earth-science/earth-science-data/data-information-policy/
  long_name=Chlorophyll Concentration, OC3 Algorithm
  Longitude Units=degrees East
  Lower Left Latitude=11.47631836
  Lower Left Longitude=135.0154266
  Lower Right Latitude=9.963588715
  Lower Right Longitude=125.5854034
  Mask Names=ATMFAIL,LAND,CLDICE,HILT
  naming_authority=gov.nasa.gsfc.sci.oceandata
  Node Crossing Time=0000334000000
  Northernmost Latitude=11.47631836
  Number of Bands=16
  Number of Pixel Control Points=563
  Number of Scan Control Points=880
  Number of Scan Lines=880
  Orbit Node Longitude=-999
  Orbit Number=-1
  Pixels per Scan Line=563

  Scene Center Latitude=7.185176849
  Scene Center Longitude=132.8315887
  Scene Center Scan Line=440
  Scene Center Solar Zenith=26.09000015
  Scene Center Time=2014042042403706
  Sensor Name=HMODISA

  Upper Left Latitude=3.718107462
  Upper Left Longitude=136.7005615
  Upper Right Latitude=2.273697615
  Upper Right Longitude=127.4018173
  Westernmost Longitude=125.5854034
Geolocation:
  LINE_OFFSET=0
  LINE_STEP=1
  PIXEL_OFFSET=0
  PIXEL_STEP=1
  SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0
,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHOR

ITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
  X_BAND=1
  X_DATASET=HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":11
  Y_BAND=1
  Y_DATASET=HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":12
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  880.0)
Upper Right (  563.0,    0.0)
Lower Right (  563.0,  880.0)
Center      (  281.5,  440.0)
Band 1 Block=563x880 Type=Float32, ColorInterp=Gray
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140911/ef8c07c7/attachment-0001.html>

From antti.castren at iki.fi  Thu Sep 11 04:10:42 2014
From: antti.castren at iki.fi (=?UTF-8?Q?Antti_Castr=C3=A9n?=)
Date: Thu, 11 Sep 2014 14:10:42 +0300
Subject: [gdal-dev] S57 and area reconstruction
In-Reply-To: <20140911053350.GA7386@trane.vulkor.net>
References: <20140911053350.GA7386@trane.vulkor.net>
Message-ID: <CAPcvoO+scqr+CCO8JbYss5SnAAGWLGGa22GX+KMk-xd0bPKVZQ@mail.gmail.com>

Hello Frits,

It is possible to (re)merge the objects across cell boundaries if they
share common Feature Object IDentifier (FOID), which is a combination
of AGEN, FIND and FINS subfields. Some ECDISes can hide the boundary
depending on masking. Usage of FOIDs vary, so it might be possible for
your datasets - if you are lucky.

See Clause 3.1 of Edition 2.0 (November 2000) of the ENC Product
Specification (S-57 Appendix B.1) and ENC Encoding Bulletin Number 33.

Cheers,

  Antti


2014-09-11 8:33 GMT+03:00 vwf <vwf at vulkor.net>:
> Hello,
>
> My question is about S57, not gdal, but one of you may be able to help
> me.
>
> When an area (like "prcare") is at the edge of a cell (map) there will
> be a vertex on the edge of the cel. With several cells the full area can
> have several lines going through the area. Is there a trick/technique to
> reconstruct the outer edge or remove the extra lines?
>
> Thank you,
> Frits
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Antti Castr?n
+358505997538
antti.castren at iki.fi

From andre+joost at nurfuerspam.de  Thu Sep 11 07:39:11 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 11 Sep 2014 16:39:11 +0200
Subject: [gdal-dev] Extract subdataset from netCDF in a given directory
In-Reply-To: <1410372167496-5161167.post@n6.nabble.com>
References: <1410372167496-5161167.post@n6.nabble.com>
Message-ID: <luscmh$ps8$2@ger.gmane.org>

Am 10.09.2014 20:02, schrieb VictoriaH:
> Hello, I am using gdal_translate to extract a subdataset from a netCDF file
> to a geotiff. If I run the command from the same directory where the netCDF
> file is located, there is no problem:
>
> Filename: PM25_2001_02_average.nc
>
> Ex. gdal_translate -of GTiff HDF5:"PM25_2001_02_average.nc"://Data
> /var/www/pm25/netCDF/output.tif'
>
> However, if I try to run gdal-translate and point to a netCDF file in a
> different directory, I get an error:
>
> Ex. gdal_translate -of GTiff
> /netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data
> /tiff/files/pm25/netCDF/output.tif'
>

I am not sure about your syntax at ://Data. This worked for me:

gdal_translate -a_srs EPSG:4326 -a_ullr -180 -90 180 90 -of "Gtiff" 
HDF4_SDS:UNKOWN:"LISOTD_HRFC_V2.3.2013.hdf":0 test.tif

with all files in the same directory. You have to run gdalinfo first to 
get the exact name of the subdataset including the number after the :
The output filename needs to be separated by a blank.

HTH
Andr? Joost



From andre+joost at nurfuerspam.de  Thu Sep 11 07:46:05 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 11 Sep 2014 16:46:05 +0200
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <CAMZEyL6nEqwgrX64-s8uCT=gL=62YvbBjo=yEyC1uYTqJh7Ehw@mail.gmail.com>
References: <CAMZEyL6nEqwgrX64-s8uCT=gL=62YvbBjo=yEyC1uYTqJh7Ehw@mail.gmail.com>
Message-ID: <luscmh$ps8$1@ger.gmane.org>

Am 11.09.2014 10:45, schrieb Love:
> I know I'm not the first to post this topic and encountered this problem.
> But I've search and read some posts related to this and tried their
> solutions but no luck. I really can't figure out what is causing this
> problem. How am I going to solve it? Badly need help!
>
> I have tried gdalwarp -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES and still no
> luck.
>
> Here are the info:
>
> gdalwarp -t_srs "+proj=longlat +datum=WGS84"
> HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":37 hdf.tif

maybe source crs is missing.


> *GDALINFO:*
>
> Driver: HDF4Image/HDF4 Dataset
> Files: A2014042042000.L2_LAC.SeAHABS.hdf
> Size is 563, 880
> Coordinate System is `'

That is for the whole dataset. Try gdalinfo on the subdataset 37 you want.

I was successful with extracting the subdatset using gdal_translate, and 
work on with that:

gdal_translate -a_srs EPSG:4326 -a_ullr -180 -90 180 90 -of "Gtiff" 
HDF4_SDS:UNKOWN:"LISOTD_HRFC_V2.3.2013.hdf":0 test.tif


In your case, a_ullr might be different.


HTH,
Andr? Joost


From andre+joost at nurfuerspam.de  Thu Sep 11 07:58:17 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 11 Sep 2014 16:58:17 +0200
Subject: [gdal-dev] Extract subdataset from netCDF in a given directory
In-Reply-To: <1410372167496-5161167.post@n6.nabble.com>
References: <1410372167496-5161167.post@n6.nabble.com>
Message-ID: <lusdbc$4t1$1@ger.gmane.org>

Am 10.09.2014 20:02, schrieb VictoriaH:
> Hello, I am using gdal_translate to extract a subdataset from a netCDF file
> to a geotiff. If I run the command from the same directory where the netCDF
> file is located, there is no problem:
>
> Filename: PM25_2001_02_average.nc
>
> Ex. gdal_translate -of GTiff HDF5:"PM25_2001_02_average.nc"://Data
> /var/www/pm25/netCDF/output.tif'
>
> However, if I try to run gdal-translate and point to a netCDF file in a
> different directory, I get an error:
>
> Ex. gdal_translate -of GTiff
> /netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data
> /tiff/files/pm25/netCDF/output.tif'
>

According to http://www.gdal.org/frmt_hdf5.html, the syntax should be:

HDF5:file_name:subdataset

So it has little use to put the path before the HDF5:. I'm not sure if 
GDAL accepts the path before the file_name. Running the command in the 
same folder should be a safe thing. The output file might go to another 
folder.

HTH,
Andr? Joost


From ljvillarin30 at gmail.com  Thu Sep 11 19:54:59 2014
From: ljvillarin30 at gmail.com (Love)
Date: Fri, 12 Sep 2014 10:54:59 +0800
Subject: [gdal-dev] gdal-dev Digest, Vol 124, Issue 17
In-Reply-To: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
References: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
Message-ID: <CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>

Hi,

The gdalinfo in my post is the gdalinfo of the subdataset 37. I have also
tried gdal_translate but when I tried to use gdalwarp using the
gdal_translate output, it has error. I really need to use gdalwarp so that
I could project the image into epsg:4326(+prj=longlat). If I'm going to use
the gdal_translate I am ask to indicate the gcp which is not good in my
case because I have many hdf files in my local directory and maybe they
have different gcp and I need to batch process them later using the
gdalwarp with the +proj=longlat command. What could be the solution?

On Fri, Sep 12, 2014 at 3:00 AM, <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Re: S57 and area reconstruction (Antti Castr?n)
>    2. Re: Extract subdataset from netCDF in a given directory
>       (Andre Joost)
>    3. Re: ERROR 1: Too many points (440 out of 441) failed to
>       transform, unable to compute output bounds. (Andre Joost)
>    4. Re: Extract subdataset from netCDF in a given directory
>       (Andre Joost)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 11 Sep 2014 14:10:42 +0300
> From: Antti Castr?n <antti.castren at iki.fi>
> To: vwf <vwf at vulkor.net>
> Cc: gdal dev <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] S57 and area reconstruction
> Message-ID:
>         <
> CAPcvoO+scqr+CCO8JbYss5SnAAGWLGGa22GX+KMk-xd0bPKVZQ at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8
>
> Hello Frits,
>
> It is possible to (re)merge the objects across cell boundaries if they
> share common Feature Object IDentifier (FOID), which is a combination
> of AGEN, FIND and FINS subfields. Some ECDISes can hide the boundary
> depending on masking. Usage of FOIDs vary, so it might be possible for
> your datasets - if you are lucky.
>
> See Clause 3.1 of Edition 2.0 (November 2000) of the ENC Product
> Specification (S-57 Appendix B.1) and ENC Encoding Bulletin Number 33.
>
> Cheers,
>
>   Antti
>
>
> 2014-09-11 8:33 GMT+03:00 vwf <vwf at vulkor.net>:
> > Hello,
> >
> > My question is about S57, not gdal, but one of you may be able to help
> > me.
> >
> > When an area (like "prcare") is at the edge of a cell (map) there will
> > be a vertex on the edge of the cel. With several cells the full area can
> > have several lines going through the area. Is there a trick/technique to
> > reconstruct the outer edge or remove the extra lines?
> >
> > Thank you,
> > Frits
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Antti Castr?n
> +358505997538
> antti.castren at iki.fi
>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 11 Sep 2014 16:39:11 +0200
> From: Andre Joost <andre+joost at nurfuerspam.de>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Extract subdataset from netCDF in a given
>         directory
> Message-ID: <luscmh$ps8$2 at ger.gmane.org>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Am 10.09.2014 20:02, schrieb VictoriaH:
> > Hello, I am using gdal_translate to extract a subdataset from a netCDF
> file
> > to a geotiff. If I run the command from the same directory where the
> netCDF
> > file is located, there is no problem:
> >
> > Filename: PM25_2001_02_average.nc
> >
> > Ex. gdal_translate -of GTiff HDF5:"PM25_2001_02_average.nc"://Data
> > /var/www/pm25/netCDF/output.tif'
> >
> > However, if I try to run gdal-translate and point to a netCDF file in a
> > different directory, I get an error:
> >
> > Ex. gdal_translate -of GTiff
> > /netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data
> > /tiff/files/pm25/netCDF/output.tif'
> >
>
> I am not sure about your syntax at ://Data. This worked for me:
>
> gdal_translate -a_srs EPSG:4326 -a_ullr -180 -90 180 90 -of "Gtiff"
> HDF4_SDS:UNKOWN:"LISOTD_HRFC_V2.3.2013.hdf":0 test.tif
>
> with all files in the same directory. You have to run gdalinfo first to
> get the exact name of the subdataset including the number after the :
> The output filename needs to be separated by a blank.
>
> HTH
> Andr? Joost
>
>
>
>
> ------------------------------
>
> Message: 3
> Date: Thu, 11 Sep 2014 16:46:05 +0200
> From: Andre Joost <andre+joost at nurfuerspam.de>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] ERROR 1: Too many points (440 out of 441)
>         failed to transform, unable to compute output bounds.
> Message-ID: <luscmh$ps8$1 at ger.gmane.org>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Am 11.09.2014 10:45, schrieb Love:
> > I know I'm not the first to post this topic and encountered this problem.
> > But I've search and read some posts related to this and tried their
> > solutions but no luck. I really can't figure out what is causing this
> > problem. How am I going to solve it? Badly need help!
> >
> > I have tried gdalwarp -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES and still
> no
> > luck.
> >
> > Here are the info:
> >
> > gdalwarp -t_srs "+proj=longlat +datum=WGS84"
> > HDF4_SDS:UNKNOWN:"A2014042042000.L2_LAC.SeAHABS.hdf":37 hdf.tif
>
> maybe source crs is missing.
>
>
> > *GDALINFO:*
> >
> > Driver: HDF4Image/HDF4 Dataset
> > Files: A2014042042000.L2_LAC.SeAHABS.hdf
> > Size is 563, 880
> > Coordinate System is `'
>
> That is for the whole dataset. Try gdalinfo on the subdataset 37 you want.
>
> I was successful with extracting the subdatset using gdal_translate, and
> work on with that:
>
> gdal_translate -a_srs EPSG:4326 -a_ullr -180 -90 180 90 -of "Gtiff"
> HDF4_SDS:UNKOWN:"LISOTD_HRFC_V2.3.2013.hdf":0 test.tif
>
>
> In your case, a_ullr might be different.
>
>
> HTH,
> Andr? Joost
>
>
>
> ------------------------------
>
> Message: 4
> Date: Thu, 11 Sep 2014 16:58:17 +0200
> From: Andre Joost <andre+joost at nurfuerspam.de>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Extract subdataset from netCDF in a given
>         directory
> Message-ID: <lusdbc$4t1$1 at ger.gmane.org>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Am 10.09.2014 20:02, schrieb VictoriaH:
> > Hello, I am using gdal_translate to extract a subdataset from a netCDF
> file
> > to a geotiff. If I run the command from the same directory where the
> netCDF
> > file is located, there is no problem:
> >
> > Filename: PM25_2001_02_average.nc
> >
> > Ex. gdal_translate -of GTiff HDF5:"PM25_2001_02_average.nc"://Data
> > /var/www/pm25/netCDF/output.tif'
> >
> > However, if I try to run gdal-translate and point to a netCDF file in a
> > different directory, I get an error:
> >
> > Ex. gdal_translate -of GTiff
> > /netCDF/files/HDF5:"PM25_2001_02_average.nc"://Data
> > /tiff/files/pm25/netCDF/output.tif'
> >
>
> According to http://www.gdal.org/frmt_hdf5.html, the syntax should be:
>
> HDF5:file_name:subdataset
>
> So it has little use to put the path before the HDF5:. I'm not sure if
> GDAL accepts the path before the file_name. Running the command in the
> same folder should be a safe thing. The output file might go to another
> folder.
>
> HTH,
> Andr? Joost
>
>
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 124, Issue 17
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140912/e9d06e33/attachment.html>

From purelyamethyst at gmail.com  Thu Sep 11 21:49:26 2014
From: purelyamethyst at gmail.com (Beau Taylor)
Date: Fri, 12 Sep 2014 13:49:26 +0900
Subject: [gdal-dev] unable to write a shapefile using ogr
In-Reply-To: <loom.20140910T232905-509@post.gmane.org>
References: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
	<CAJ0mEz3TYPvd9HX_6jDOSFLje-UQk+zz81t-d-fFZEx1t3T+cg@mail.gmail.com>
	<loom.20140910T232905-509@post.gmane.org>
Message-ID: <CAD3z=UZRPB0Ey+4uqMqeNye+uYRJt0_bx99Ab5hE=2E4M7Nq1Q@mail.gmail.com>

I tried to insert the 'feature name', but could not. Can some one correct
it?

field_defn = ogr.FieldDefn("Name", ogr.OFTString)
field_defn.SetWidth(32)
feature.SetField("Name", name)



On Thu, Sep 11, 2014 at 6:33 AM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
wrote:

> Kyle Shannon <kyle <at> pobox.com> writes:
>
> >
> > Style is usually dictated by the application.  You can set them in the
> > app, or for some formats/drivers you can use the OGR style API:
> >
> > http://gdal.org/ogr_feature_style.html
> >
> > AFAIK, shapefiles do not support styles
>
> As you said, style is dictated by application. If you create an "OGR_STYLE"
> column into shapefile and populate it with OGR feature style strings some
> programs can utilize them. I know that Mapserver can do it as well as GDAL
> when it writes PDF files.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140912/0171fdd3/attachment.html>

From pedromachadomonteiro at gmail.com  Fri Sep 12 00:31:41 2014
From: pedromachadomonteiro at gmail.com (Pedro Machado Monteiro)
Date: Fri, 12 Sep 2014 08:31:41 +0100
Subject: [gdal-dev] Fwd: ogr2ogr. SQL seems to disable use_gpx_extensions
In-Reply-To: <CAMzfqQ_5n1KqmiefvPJgJCYMJiNv-QKBhKhNGCGQYELLCW4Dwg@mail.gmail.com>
References: <mailman.29187.1410431832.1977.gdal-announce@lists.osgeo.org>
	<CAMzfqQ_5n1KqmiefvPJgJCYMJiNv-QKBhKhNGCGQYELLCW4Dwg@mail.gmail.com>
Message-ID: <CAMzfqQ9MFcgCB-UDWYLiKZaf728EtZKPXrPu45aBu3+Wv4O0Ng@mail.gmail.com>

Hello:



I?m trying to export a shapefile to a GPX file, with GDAL 1.9.0 ogr2ogr.



>From the shapefile attribute table, I want  to export some fields to  the
corresponding tags of the GPX file, and the remaining (or all) fields to
the <extensions> tag



That does?nt seem to work: when I use the *?sql* option SELECT AS (ex: to
export the field ?Linha? from the shape attribute table, to the GPX
<name>), it seems that the *-dsco* option USE_GPX_EXTENSIONS=YES is
disabled, because the result always lacks the <extensions> tag, with the
remaining (or all) fields.


But http://gdal.org/drv_gpx.html says that If GPX_USE_EXTENSIONS=YES is
specified, extra fields will be written inside the*<extensions>* tag.



Here is the kind of statement:



*ogr2ogr* *-f* GPX *-dsco* GPX_USE_EXTENSIONS=YES exportfile.gpx sourcefile.shp
*-sql* *"*SELECT Linha AS name FROM sourcefile*"*



Thanks for any help

Pedro Monteiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140912/f8463f53/attachment-0001.html>

From even.rouault at spatialys.com  Fri Sep 12 01:18:28 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Sep 2014 10:18:28 +0200
Subject: [gdal-dev] unable to write a shapefile using ogr
In-Reply-To: <CAD3z=UZRPB0Ey+4uqMqeNye+uYRJt0_bx99Ab5hE=2E4M7Nq1Q@mail.gmail.com>
References: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
	<CAJ0mEz3TYPvd9HX_6jDOSFLje-UQk+zz81t-d-fFZEx1t3T+cg@mail.gmail.com>
	<loom.20140910T232905-509@post.gmane.org>
	<CAD3z=UZRPB0Ey+4uqMqeNye+uYRJt0_bx99Ab5hE=2E4M7Nq1Q@mail.gmail.com>
Message-ID: <1410509908.5412ac542947c@imp.free.fr>

Selon Beau Taylor <purelyamethyst at gmail.com>:

> I tried to insert the 'feature name', but could not. Can some one correct
> it?
>
> field_defn = ogr.FieldDefn("Name", ogr.OFTString)
> field_defn.SetWidth(32)

There's a missing call to :
layer.CreateField(field_defn)

and you should make sure to instanciate the feature *after* having added the
field to the layer, otherwise crash is likely.


> feature.SetField("Name", name)
>
>
>
> On Thu, Sep 11, 2014 at 6:33 AM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> wrote:
>
> > Kyle Shannon <kyle <at> pobox.com> writes:
> >
> > >
> > > Style is usually dictated by the application.  You can set them in the
> > > app, or for some formats/drivers you can use the OGR style API:
> > >
> > > http://gdal.org/ogr_feature_style.html
> > >
> > > AFAIK, shapefiles do not support styles
> >
> > As you said, style is dictated by application. If you create an "OGR_STYLE"
> > column into shapefile and populate it with OGR feature style strings some
> > programs can utilize them. I know that Mapserver can do it as well as GDAL
> > when it writes PDF files.
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Sep 12 01:22:40 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Sep 2014 10:22:40 +0200
Subject: [gdal-dev] Fwd: ogr2ogr. SQL seems to disable use_gpx_extensions
In-Reply-To: <CAMzfqQ9MFcgCB-UDWYLiKZaf728EtZKPXrPu45aBu3+Wv4O0Ng@mail.gmail.com>
References: <mailman.29187.1410431832.1977.gdal-announce@lists.osgeo.org>
	<CAMzfqQ_5n1KqmiefvPJgJCYMJiNv-QKBhKhNGCGQYELLCW4Dwg@mail.gmail.com>
	<CAMzfqQ9MFcgCB-UDWYLiKZaf728EtZKPXrPu45aBu3+Wv4O0Ng@mail.gmail.com>
Message-ID: <1410510160.5412ad507ddfe@imp.free.fr>

Selon Pedro Machado Monteiro <pedromachadomonteiro at gmail.com>:

> Hello:
>
>
>
> I???m trying to export a shapefile to a GPX file, with GDAL 1.9.0 ogr2ogr.
>
>
>
> From the shapefile attribute table, I want  to export some fields to  the
> corresponding tags of the GPX file, and the remaining (or all) fields to
> the <extensions> tag
>
>
>
> That does???nt seem to work: when I use the *???sql* option SELECT AS (ex: to
> export the field ???Linha??? from the shape attribute table, to the GPX
> <name>), it seems that the *-dsco* option USE_GPX_EXTENSIONS=YES is
> disabled, because the result always lacks the <extensions> tag, with the
> remaining (or all) fields.
>
>
> But http://gdal.org/drv_gpx.html says that If GPX_USE_EXTENSIONS=YES is
> specified, extra fields will be written inside the*<extensions>* tag.
>
>
>
> Here is the kind of statement:
>
>
>
> *ogr2ogr* *-f* GPX *-dsco* GPX_USE_EXTENSIONS=YES exportfile.gpx
> sourcefile.shp
> *-sql* *"*SELECT Linha AS name FROM sourcefile*"*

Pedro,

The above SQL statement only selects one single field from the shapefile, so it
is expected that the resulting GPX will have only the standard <name> attribute.
You must explicitely list other fields in the SELECT clause if you want them to
go in <extensions>.
If you want to be quick and don't mind the Linha field to be in the extensions
as well in addition to <name>, you can just do "SELECT Linha AS name, * FROM
sourcefile"

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastian-hoerz at web.de  Fri Sep 12 05:18:27 2014
From: sebastian-hoerz at web.de (Sebastian Hoerz)
Date: Fri, 12 Sep 2014 14:18:27 +0200
Subject: [gdal-dev] gdal_translate ERROR 1: nc_put_vara_double(IMAGE.grd):
 NetCDF: Start+count exceeds dimension bound
Message-ID: <5412E493.70403@web.de>

Hello,

I have a problem with the following GeoTIFF:

gdalinfo IMAGE.tif
Driver: GTiff/GeoTIFF
Files: IMAGEDATA/IMAGE.tif
Size is 46800, 55200
Coordinate System is:
PROJCS["WGS 84 / UTM zone 30S",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-3],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",10000000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32730"]]
Origin = (422999.375000000000000,2201000.625000000000000)
Pixel Size = (1.250000000000000,-1.250000000000000)
Metadata:
   AREA_OR_POINT=Point
Image Structure Metadata:
   COMPRESSION=PACKBITS
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  422999.375, 2201000.625) (  5d 2'44.07"W, 70d17' 7.59"S)
Lower Left  (  422999.375, 2132000.625) (  5d 6'33.10"W, 70d54'13.43"S)
Upper Right (  481499.375, 2201000.625) (  3d29'30.00"W, 70d17'46.95"S)
Lower Right (  481499.375, 2132000.625) (  3d30'25.10"W, 70d54'54.17"S)
Center      (  452249.375, 2166500.625) (  4d17'17.74"W, 70d36' 6.69"S)
Band 1 Block=46800x1 Type=UInt16, ColorInterp=Gray

I want to translate it into a GMT grid file using gdal_translate:
gdal_translate -of GMT IMAGE.tif IMAGE.grd

But this produces an error and the file is not useable afterwards.
ERROR 1: nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds 
dimension bound

gdalinfo  IMAGE.grd
Warning 1: IMAGE.grd is a netCDF file, but not in GMT configuration.
gdalinfo failed - unable to open 'IMAGE.grd'.

Can anybody explain this and offer a solution?

Thanks in advance!
Sebastian.


From jluis at ualg.pt  Fri Sep 12 06:08:25 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri, 12 Sep 2014 14:08:25 +0100
Subject: [gdal-dev] gdal_translate ERROR 1:
 nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds dimension bound
In-Reply-To: <5412E493.70403@web.de>
References: <5412E493.70403@web.de>
Message-ID: <op.xl2r4bdodbaoe8@macmarilu>

Sebastian,

Any particular reason why you would want to use that so old and abandoned  
format (-of GMT)? Do not confuse it with the netCDF CF that GMT uses since  
GMT 4.0 (released many years ago). Note also that in GMT5 you can use the   
GeoTiff directly, or convert it with grdreformat or with gdal_translate  
but to netCDF (not to 'GMT')

Joaquim

> Hello,
>
> I have a problem with the following GeoTIFF:
>
> gdalinfo IMAGE.tif
> Driver: GTiff/GeoTIFF
> Files: IMAGEDATA/IMAGE.tif
> Size is 46800, 55200
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 30S",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.257223563,
>                  AUTHORITY["EPSG","7030"]],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",-3],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",10000000],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","32730"]]
> Origin = (422999.375000000000000,2201000.625000000000000)
> Pixel Size = (1.250000000000000,-1.250000000000000)
> Metadata:
>    AREA_OR_POINT=Point
> Image Structure Metadata:
>    COMPRESSION=PACKBITS
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  422999.375, 2201000.625) (  5d 2'44.07"W, 70d17' 7.59"S)
> Lower Left  (  422999.375, 2132000.625) (  5d 6'33.10"W, 70d54'13.43"S)
> Upper Right (  481499.375, 2201000.625) (  3d29'30.00"W, 70d17'46.95"S)
> Lower Right (  481499.375, 2132000.625) (  3d30'25.10"W, 70d54'54.17"S)
> Center      (  452249.375, 2166500.625) (  4d17'17.74"W, 70d36' 6.69"S)
> Band 1 Block=46800x1 Type=UInt16, ColorInterp=Gray
>
> I want to translate it into a GMT grid file using gdal_translate:
> gdal_translate -of GMT IMAGE.tif IMAGE.grd
>
> But this produces an error and the file is not useable afterwards.
> ERROR 1: nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds  
> dimension bound
>
> gdalinfo  IMAGE.grd
> Warning 1: IMAGE.grd is a netCDF file, but not in GMT configuration.
> gdalinfo failed - unable to open 'IMAGE.grd'.
>
> Can anybody explain this and offer a solution?
>
> Thanks in advance!
> Sebastian.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From sebastian-hoerz at web.de  Fri Sep 12 07:21:01 2014
From: sebastian-hoerz at web.de (Sebastian Hoerz)
Date: Fri, 12 Sep 2014 16:21:01 +0200
Subject: [gdal-dev] gdal_translate ERROR 1:
 nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds dimension bound
In-Reply-To: <5412FB08.8020406@web.de>
References: <5412FB08.8020406@web.de>
Message-ID: <5413014D.2060809@web.de>

Hello Joaquim,


I thought it is clever to use -of GMT because gmt grdmath is not working
with the GeoTIFF.

     grdmath: gdalread: failure to allocate enough memory
     grdmath: ERROR reading file with gdalread.
     grdmath (GMTAPI_Import_Grid): Could not create file [IMAGE.tif]
     [Session gmt (0)]: Error returned from GMT API: GMT_GRID_READ_ERROR (18)

Now I tried:

     gdal_translate -of netCDF IMAGE.tif IMAGE.nc

but

     Input file size is 46800, 55200
     0...10...20...30...40...50Warning 1: Unsupported GDAL datatype (2), treat as NC_FLOAT.
     ...60...70...80...90...100 - done.

and gmt grdmath can't handle the output file.

Any suggestions?


Thanks for your help!

Sebastian.




Am 12/09/14 15:08, schrieb Joaquim Luis:
> Sebastian,
>
> Any particular reason why you would want to use that so old and
> abandoned format (-of GMT)? Do not confuse it with the netCDF CF that
> GMT uses since GMT 4.0 (released many years ago). Note also that in
> GMT5 you can use the  GeoTiff directly, or convert it with grdreformat
> or with gdal_translate but to netCDF (not to 'GMT')
>
> Joaquim
>
>> Hello,
>>
>> I have a problem with the following GeoTIFF:
>>
>> gdalinfo IMAGE.tif
>> Driver: GTiff/GeoTIFF
>> Files: IMAGEDATA/IMAGE.tif
>> Size is 46800, 55200
>> Coordinate System is:
>> PROJCS["WGS 84 / UTM zone 30S",
>>      GEOGCS["WGS 84",
>>          DATUM["WGS_1984",
>>              SPHEROID["WGS 84",6378137,298.257223563,
>>                  AUTHORITY["EPSG","7030"]],
>>              AUTHORITY["EPSG","6326"]],
>>          PRIMEM["Greenwich",0],
>>          UNIT["degree",0.0174532925199433],
>>          AUTHORITY["EPSG","4326"]],
>>      PROJECTION["Transverse_Mercator"],
>>      PARAMETER["latitude_of_origin",0],
>>      PARAMETER["central_meridian",-3],
>>      PARAMETER["scale_factor",0.9996],
>>      PARAMETER["false_easting",500000],
>>      PARAMETER["false_northing",10000000],
>>      UNIT["metre",1,
>>          AUTHORITY["EPSG","9001"]],
>>      AUTHORITY["EPSG","32730"]]
>> Origin = (422999.375000000000000,2201000.625000000000000)
>> Pixel Size = (1.250000000000000,-1.250000000000000)
>> Metadata:
>>    AREA_OR_POINT=Point
>> Image Structure Metadata:
>>    COMPRESSION=PACKBITS
>>    INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (  422999.375, 2201000.625) (  5d 2'44.07"W, 70d17' 7.59"S)
>> Lower Left  (  422999.375, 2132000.625) (  5d 6'33.10"W, 70d54'13.43"S)
>> Upper Right (  481499.375, 2201000.625) (  3d29'30.00"W, 70d17'46.95"S)
>> Lower Right (  481499.375, 2132000.625) (  3d30'25.10"W, 70d54'54.17"S)
>> Center      (  452249.375, 2166500.625) (  4d17'17.74"W, 70d36' 6.69"S)
>> Band 1 Block=46800x1 Type=UInt16, ColorInterp=Gray
>>
>> I want to translate it into a GMT grid file using gdal_translate:
>> gdal_translate -of GMT IMAGE.tif IMAGE.grd
>>
>> But this produces an error and the file is not useable afterwards.
>> ERROR 1: nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds
>> dimension bound
>>
>> gdalinfo  IMAGE.grd
>> Warning 1: IMAGE.grd is a netCDF file, but not in GMT configuration.
>> gdalinfo failed - unable to open 'IMAGE.grd'.
>>
>> Can anybody explain this and offer a solution?
>>
>> Thanks in advance!
>> Sebastian.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Fri Sep 12 07:33:03 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri, 12 Sep 2014 15:33:03 +0100
Subject: [gdal-dev] gdal_translate ERROR 1:
 nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds dimension bound
In-Reply-To: <5413014D.2060809@web.de>
References: <5412FB08.8020406@web.de> <5413014D.2060809@web.de>
Message-ID: <op.xl2v1dycdbaoe8@macmarilu>

Well,

It's a relatively big file (46800 x 55200) and since GMT internally uses  
floats, that converts to an array of ~9.8 Gb so you need to have available  
a memory chunk of that size to process it. Aside from grdcuting it and  
process it on pieces I don't see what else you can do.

> Hello Joaquim,
>
>
> I thought it is clever to use -of GMT because gmt grdmath is not working
> with the GeoTIFF.
>
>      grdmath: gdalread: failure to allocate enough memory
>      grdmath: ERROR reading file with gdalread.
>      grdmath (GMTAPI_Import_Grid): Could not create file [IMAGE.tif]
>      [Session gmt (0)]: Error returned from GMT API: GMT_GRID_READ_ERROR  
> (18)
>
> Now I tried:
>
>      gdal_translate -of netCDF IMAGE.tif IMAGE.nc
>
> but
>
>      Input file size is 46800, 55200
>      0...10...20...30...40...50Warning 1: Unsupported GDAL datatype (2),  
> treat as NC_FLOAT.
>      ...60...70...80...90...100 - done.
>
> and gmt grdmath can't handle the output file.
>
> Any suggestions?
>
>
> Thanks for your help!
>
> Sebastian.
>
>
>
>
> Am 12/09/14 15:08, schrieb Joaquim Luis:
>> Sebastian,
>>
>> Any particular reason why you would want to use that so old and
>> abandoned format (-of GMT)? Do not confuse it with the netCDF CF that
>> GMT uses since GMT 4.0 (released many years ago). Note also that in
>> GMT5 you can use the  GeoTiff directly, or convert it with grdreformat
>> or with gdal_translate but to netCDF (not to 'GMT')
>>
>> Joaquim
>>
>>> Hello,
>>>
>>> I have a problem with the following GeoTIFF:
>>>
>>> gdalinfo IMAGE.tif
>>> Driver: GTiff/GeoTIFF
>>> Files: IMAGEDATA/IMAGE.tif
>>> Size is 46800, 55200
>>> Coordinate System is:
>>> PROJCS["WGS 84 / UTM zone 30S",
>>>      GEOGCS["WGS 84",
>>>          DATUM["WGS_1984",
>>>              SPHEROID["WGS 84",6378137,298.257223563,
>>>                  AUTHORITY["EPSG","7030"]],
>>>              AUTHORITY["EPSG","6326"]],
>>>          PRIMEM["Greenwich",0],
>>>          UNIT["degree",0.0174532925199433],
>>>          AUTHORITY["EPSG","4326"]],
>>>      PROJECTION["Transverse_Mercator"],
>>>      PARAMETER["latitude_of_origin",0],
>>>      PARAMETER["central_meridian",-3],
>>>      PARAMETER["scale_factor",0.9996],
>>>      PARAMETER["false_easting",500000],
>>>      PARAMETER["false_northing",10000000],
>>>      UNIT["metre",1,
>>>          AUTHORITY["EPSG","9001"]],
>>>      AUTHORITY["EPSG","32730"]]
>>> Origin = (422999.375000000000000,2201000.625000000000000)
>>> Pixel Size = (1.250000000000000,-1.250000000000000)
>>> Metadata:
>>>    AREA_OR_POINT=Point
>>> Image Structure Metadata:
>>>    COMPRESSION=PACKBITS
>>>    INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left  (  422999.375, 2201000.625) (  5d 2'44.07"W, 70d17' 7.59"S)
>>> Lower Left  (  422999.375, 2132000.625) (  5d 6'33.10"W, 70d54'13.43"S)
>>> Upper Right (  481499.375, 2201000.625) (  3d29'30.00"W, 70d17'46.95"S)
>>> Lower Right (  481499.375, 2132000.625) (  3d30'25.10"W, 70d54'54.17"S)
>>> Center      (  452249.375, 2166500.625) (  4d17'17.74"W, 70d36' 6.69"S)
>>> Band 1 Block=46800x1 Type=UInt16, ColorInterp=Gray
>>>
>>> I want to translate it into a GMT grid file using gdal_translate:
>>> gdal_translate -of GMT IMAGE.tif IMAGE.grd
>>>
>>> But this produces an error and the file is not useable afterwards.
>>> ERROR 1: nc_put_vara_double(IMAGE.grd): NetCDF: Start+count exceeds
>>> dimension bound
>>>
>>> gdalinfo  IMAGE.grd
>>> Warning 1: IMAGE.grd is a netCDF file, but not in GMT configuration.
>>> gdalinfo failed - unable to open 'IMAGE.grd'.
>>>
>>> Can anybody explain this and offer a solution?
>>>
>>> Thanks in advance!
>>> Sebastian.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From andre+joost at nurfuerspam.de  Fri Sep 12 09:10:22 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Sep 2014 18:10:22 +0200
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>
References: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
	<CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>
Message-ID: <luv6eh$gq1$1@ger.gmane.org>

Am 12.09.2014 04:54, schrieb Love:
> Hi,
>
> The gdalinfo in my post is the gdalinfo of the subdataset 37. I have also
> tried gdal_translate but when I tried to use gdalwarp using the
> gdal_translate output, it has error. I really need to use gdalwarp so that
> I could project the image into epsg:4326(+prj=longlat). If I'm going to use
> the gdal_translate I am ask to indicate the gcp which is not good in my
> case because I have many hdf files in my local directory and maybe they
> have different gcp and I need to batch process them later using the
> gdalwarp with the +proj=longlat command. What could be the solution?

gdalwarp needs the -geoloc switch, and the target extent with -te. See 
also 
<http://osgeo-org.1560.x6.nabble.com/gdal-dev-Geolocation-Arrays-td4372909.html>

There does not seen to be any progress on this issue.

The values for -te can be found with gdalinfo on the subdataset.

HTH,
Andr? Joost


From pedromachadomonteiro at gmail.com  Fri Sep 12 11:35:34 2014
From: pedromachadomonteiro at gmail.com (Pedro Machado Monteiro)
Date: Fri, 12 Sep 2014 19:35:34 +0100
Subject: [gdal-dev] Fwd: ogr2ogr. SQL seems to disable use_gpx_extensions
In-Reply-To: <1410510160.5412ad507ddfe@imp.free.fr>
References: <mailman.29187.1410431832.1977.gdal-announce@lists.osgeo.org>
	<CAMzfqQ_5n1KqmiefvPJgJCYMJiNv-QKBhKhNGCGQYELLCW4Dwg@mail.gmail.com>
	<CAMzfqQ9MFcgCB-UDWYLiKZaf728EtZKPXrPu45aBu3+Wv4O0Ng@mail.gmail.com>
	<1410510160.5412ad507ddfe@imp.free.fr>
Message-ID: <CAMzfqQ_5=Ryfy0ACWy9vxLSXVRyXNfv-iL3pK5EuTkEy0O3S5g@mail.gmail.com>

Thank you very much, Even.

By the way, unlike the alias for the tag <*cmt*>, the alias for the tag <
*desc*> gave me a syntax error in the SQL:

F:\usbgis\apps\ms4w
GDAL, mapserv, mapcache, PROJ, and shapelib dll paths set
GDAL_DATA path set
GDAL_DRIVER_PATH set
PROJ_LIB set
CURL_CA_BUNDLE set
F:\usbgis\apps\ms4w\tools\gdal-ogr>ogr2ogr -f GPX -dsco
GPX_USE_EXTENSIONS=YES D:\Si\Gps\FaunaPnpg_w
gs84_testeA.gpx D:\Si\Gps\FaunaPnpg_wgs84_teste_utf8.shp -sql "SELECT Linha
AS name , IDENTIFICA AS
*cmt* FROM FaunaPnpg_wgs84_teste_utf8"

F:\usbgis\apps\ms4w\tools\gdal-ogr>ogr2ogr -f GPX -dsco
GPX_USE_EXTENSIONS=YES D:\Si\Gps\FaunaPnpg_w
gs84_testeB.gpx D:\Si\Gps\FaunaPnpg_wgs84_teste_utf8.shp -sql "SELECT Linha
AS name , IDENTIFICA AS
*desc* FROM FaunaPnpg_wgs84_teste_utf8"
ERROR 1: SQL Expression Parsing Error: syntax error


F:\usbgis\apps\ms4w\tools\gdal-ogr>


And the same thing happens with all fields in the <extensions>:

F:\usbgis\apps\ms4w
GDAL, mapserv, mapcache, PROJ, and shapelib dll paths set
GDAL_DATA path set
GDAL_DRIVER_PATH set
PROJ_LIB set
CURL_CA_BUNDLE set
F:\usbgis\apps\ms4w\tools\gdal-ogr>ogr2ogr -f GPX -dsco
GPX_USE_EXTENSIONS=YES D:\Si\Gps\FaunaPnpg_w
gs84_testeC.gpx D:\Si\Gps\FaunaPnpg_wgs84_teste_utf8.shp -sql "SELECT Linha
AS name , IDENTIFICA AS
*cmt* , * FROM FaunaPnpg_wgs84_teste_utf8"

F:\usbgis\apps\ms4w\tools\gdal-ogr>ogr2ogr -f GPX -dsco
GPX_USE_EXTENSIONS=YES D:\Si\Gps\FaunaPnpg_w
gs84_testeD.gpx D:\Si\Gps\FaunaPnpg_wgs84_teste_utf8.shp -sql "SELECT Linha
AS name , IDENTIFICA AS
*desc* , * FROM FaunaPnpg_wgs84_teste_utf8"
ERROR 1: SQL Expression Parsing Error: syntax error

F:\usbgis\apps\ms4w\tools\gdal-ogr>

Is there any special issue about this tag?

With my best regards

Pedro Monteiro











2014-09-12 9:22 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Selon Pedro Machado Monteiro <pedromachadomonteiro at gmail.com>:
>
> > Hello:
> >
> >
> >
> > I?  m trying to export a shapefile to a GPX file, with GDAL 1.9.0
> ogr2ogr.
> >
> >
> >
> > From the shapefile attribute table, I want  to export some fields to  the
> > corresponding tags of the GPX file, and the remaining (or all) fields to
> > the <extensions> tag
> >
> >
> >
> > That does?  nt seem to work: when I use the *?  sql* option SELECT AS
> (ex: to
> > export the field ?  Linha?   from the shape attribute table, to the GPX
> > <name>), it seems that the *-dsco* option USE_GPX_EXTENSIONS=YES is
> > disabled, because the result always lacks the <extensions> tag, with the
> > remaining (or all) fields.
> >
> >
> > But http://gdal.org/drv_gpx.html says that If GPX_USE_EXTENSIONS=YES is
> > specified, extra fields will be written inside the*<extensions>* tag.
> >
> >
> >
> > Here is the kind of statement:
> >
> >
> >
> > *ogr2ogr* *-f* GPX *-dsco* GPX_USE_EXTENSIONS=YES exportfile.gpx
> > sourcefile.shp
> > *-sql* *"*SELECT Linha AS name FROM sourcefile*"*
>
> Pedro,
>
> The above SQL statement only selects one single field from the shapefile,
> so it
> is expected that the resulting GPX will have only the standard <name>
> attribute.
> You must explicitely list other fields in the SELECT clause if you want
> them to
> go in <extensions>.
> If you want to be quick and don't mind the Linha field to be in the
> extensions
> as well in addition to <name>, you can just do "SELECT Linha AS name, *
> FROM
> sourcefile"
>
> Best regards,
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140912/722a2dae/attachment-0001.html>

From even.rouault at spatialys.com  Fri Sep 12 11:53:04 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Sep 2014 20:53:04 +0200
Subject: [gdal-dev] Fwd: ogr2ogr. SQL seems to disable use_gpx_extensions
In-Reply-To: <CAMzfqQ_5=Ryfy0ACWy9vxLSXVRyXNfv-iL3pK5EuTkEy0O3S5g@mail.gmail.com>
References: <mailman.29187.1410431832.1977.gdal-announce@lists.osgeo.org>
	<1410510160.5412ad507ddfe@imp.free.fr>
	<CAMzfqQ_5=Ryfy0ACWy9vxLSXVRyXNfv-iL3pK5EuTkEy0O3S5g@mail.gmail.com>
Message-ID: <201409122053.04948.even.rouault@spatialys.com>

Le vendredi 12 septembre 2014 20:35:34, Pedro Machado Monteiro a ?crit :
> Thank you very much, Even.
> 
> By the way, unlike the alias for the tag <*cmt*>, the alias for the tag <
> *desc*> gave me a syntax error in the SQL:

Yes, DESC is a SQL reserved keyword to ask for descending sorting order. When 
you want to use it as an identifier, it must be quoted, e.g. with single quote 
character

 "SELECT Linha AS name , IDENTIFICA AS 'cmt' FROM FaunaPnpg_wgs84_teste_utf8"

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From normvcr at telus.net  Fri Sep 12 18:10:55 2014
From: normvcr at telus.net (Norman Goldstein)
Date: Fri, 12 Sep 2014 18:10:55 -0700
Subject: [gdal-dev] Get hold of TIFF structure
In-Reply-To: <1409039366.53fc3c0685f58@imp.free.fr>
References: <53FC2542.2070902@telus.net> <1409039366.53fc3c0685f58@imp.free.fr>
Message-ID: <5413999F.9060006@telus.net>

My apologies.  I missed your response to my question.
Thanks for pointing me to GDALDataset::GetInternalHandle()
and the tiff library compatibility gotcha's.

To answer your question, I wish to use geotiff format to work in general 
XYZ space, and not necessarily tied to the Earth.  I still need 
transformations like XYZ <--> IJK, and would like to set the 4x4 
coefficients, directly.  I did not see how to reasonably do this trhough 
the gdal interface.  Understandably, gdal is designed around the Earth.


On 08/26/2014 12:49 AM, Even Rouault wrote:
> Selon Norman Goldstein <normvcr at telus.net>:
>
>> Let's say I've opened a dataset (from a tiff file on disk).  How do I
>> get hold of the TIFF structure that is used by the libtiff library?
> GDALDataset::GetInternalHandle() on a GTiff dataset will return a TIFF* handle.
> But be careful. If you use GDAL compiled with internal libtiff (libtiff 4.X),
> you must also link your application against libtiff 4.X, or export the libtiff
> symbols of the internal version of GDAL, otherwise chaos will happen.
>
> http://www.gdal.org/classGDALDataset.html#a39396324384dc195866a374775fa74ef
>
> Why do you want to access the TIFF handle ? Is there information you cannot
> access through GDAL API ?
>


From purelyamethyst at gmail.com  Fri Sep 12 22:54:58 2014
From: purelyamethyst at gmail.com (Beau Taylor)
Date: Sat, 13 Sep 2014 14:54:58 +0900
Subject: [gdal-dev] unable to write a shapefile using ogr
In-Reply-To: <1410509908.5412ac542947c@imp.free.fr>
References: <CAD3z=Uaa6jRvFUuXgQscQbH_XFHCv7xU_wJOfKRirLvQ=JGbQw@mail.gmail.com>
	<CAJ0mEz3TYPvd9HX_6jDOSFLje-UQk+zz81t-d-fFZEx1t3T+cg@mail.gmail.com>
	<loom.20140910T232905-509@post.gmane.org>
	<CAD3z=UZRPB0Ey+4uqMqeNye+uYRJt0_bx99Ab5hE=2E4M7Nq1Q@mail.gmail.com>
	<1410509908.5412ac542947c@imp.free.fr>
Message-ID: <CAD3z=UbsQgoG-EXpOL4g8Rz9X8vuzBH4zE4+3F05fxjhdi2d8Q@mail.gmail.com>

Even Rouault

Thanks, I got it.

On Fri, Sep 12, 2014 at 5:18 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Selon Beau Taylor <purelyamethyst at gmail.com>:
>
> > I tried to insert the 'feature name', but could not. Can some one correct
> > it?
> >
> > field_defn = ogr.FieldDefn("Name", ogr.OFTString)
> > field_defn.SetWidth(32)
>
> There's a missing call to :
> layer.CreateField(field_defn)
>
> and you should make sure to instanciate the feature *after* having added
> the
> field to the layer, otherwise crash is likely.
>
>
> > feature.SetField("Name", name)
> >
> >
> >
> > On Thu, Sep 11, 2014 at 6:33 AM, Jukka Rahkonen <
> jukka.rahkonen at mmmtike.fi>
> > wrote:
> >
> > > Kyle Shannon <kyle <at> pobox.com> writes:
> > >
> > > >
> > > > Style is usually dictated by the application.  You can set them in
> the
> > > > app, or for some formats/drivers you can use the OGR style API:
> > > >
> > > > http://gdal.org/ogr_feature_style.html
> > > >
> > > > AFAIK, shapefiles do not support styles
> > >
> > > As you said, style is dictated by application. If you create an
> "OGR_STYLE"
> > > column into shapefile and populate it with OGR feature style strings
> some
> > > programs can utilize them. I know that Mapserver can do it as well as
> GDAL
> > > when it writes PDF files.
> > >
> > > -Jukka Rahkonen-
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140913/71b9c37a/attachment.html>

From andre+joost at nurfuerspam.de  Fri Sep 12 23:32:45 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sat, 13 Sep 2014 08:32:45 +0200
Subject: [gdal-dev] Extract subdataset from netCDF in a given directory
In-Reply-To: <lusdbc$4t1$1@ger.gmane.org>
References: <1410372167496-5161167.post@n6.nabble.com>
	<lusdbc$4t1$1@ger.gmane.org>
Message-ID: <lv0ofj$4mv$1@ger.gmane.org>

Am 11.09.2014 16:58, schrieb Andre Joost:

>
> According to http://www.gdal.org/frmt_hdf5.html, the syntax should be:
>
> HDF5:file_name:subdataset
>
> So it has little use to put the path before the HDF5:. I'm not sure if
> GDAL accepts the path before the file_name. Running the command in the
> same folder should be a safe thing. The output file might go to another
> folder.
>

Update:

If you run gdalinfo on /path/file_name, you see how the path should be 
incorporated inside the quotation marks of the file_name.

HTH,
Andr? Joost



From warmerdam at pobox.com  Sat Sep 13 10:41:29 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 13 Sep 2014 10:41:29 -0700
Subject: [gdal-dev] EPSG 8.5 Upgrade
Message-ID: <CA+YzLBf+KR9x5j6wnO2QbAAqhMEybEzP+9j5_EgU_EjHiG-QBw@mail.gmail.com>

Folks,

With help from Howard Butler, I have upgraded GDAL trunk to using EPSG 8.5
definitions in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140913/dda80334/attachment.html>

From victor.fomin.1 at gmail.com  Mon Sep 15 01:44:54 2014
From: victor.fomin.1 at gmail.com (vf)
Date: Mon, 15 Sep 2014 01:44:54 -0700 (PDT)
Subject: [gdal-dev] Problem with HDF5 CSK files and .hdr files generated by
	ENVI
Message-ID: <1410770694879-5161812.post@n6.nabble.com>


Dear GDAL developers,

I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5 files
which have been read before by ENVI software (and .hdr file is generated
near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
Labelled" instead of HDF5 if the file is not present. Suppression of the
generated .hdr file can fix the problem. Do you think that it is the only
solution ?

Cheers,
Victor





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-with-HDF5-CSK-files-and-hdr-files-generated-by-ENVI-tp5161812.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kursatk at gmail.com  Mon Sep 15 01:57:27 2014
From: kursatk at gmail.com (kursatk)
Date: Mon, 15 Sep 2014 01:57:27 -0700 (PDT)
Subject: [gdal-dev] Working with Kakadu
Message-ID: <1410771447865-5161815.post@n6.nabble.com>

Hi;

I read lots of texts about gdal and kakadu, and i am a bit confused. I'm
trying to read a jp2 image with kakadu driver by using gdal java bindings
api. Hence, i should register JP2KAK driver. Most of my researchs say that,
i can do that by building gdal with kakadu library. But, i wonder, isn't
there a way to do that as using plugin architecture? I mean, i am looking
for some easy ways. 

Thanks for your advance.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Working-with-Kakadu-tp5161815.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yhema.2705 at gmail.com  Mon Sep 15 04:23:33 2014
From: yhema.2705 at gmail.com (yhema.2705)
Date: Mon, 15 Sep 2014 04:23:33 -0700 (PDT)
Subject: [gdal-dev] GDAL sqlite /spatialite support with trignometric
	functions
Message-ID: <1410780213752-5161833.post@n6.nabble.com>

hi  ,

I have build gdal 1.11 with spatialite and sqlite support. I want the layer
attributes of the shape file be updated with trignometric values .Update is
functioning well for arithemetic functions for trignometric functions it is
giving error : ERROR 1: In ExecuteSQL(): sqlite3_prepare(UPDATE gemetry_test
SET  ID  =  tan(45) ):
  no such function: tan.
thanks all





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-sqlite-spatialite-support-with-trignometric-functions-tp5161833.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Mon Sep 15 05:48:26 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Sep 2014 14:48:26 +0200
Subject: [gdal-dev] Problem with HDF5 CSK files and .hdr files generated
	by ENVI
In-Reply-To: <1410770694879-5161812.post@n6.nabble.com>
References: <1410770694879-5161812.post@n6.nabble.com>
Message-ID: <1410785306.5416e01af385f@imp.free.fr>

Selon vf <victor.fomin.1 at gmail.com>:

>
> Dear GDAL developers,
>
> I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5 files
> which have been read before by ENVI software (and .hdr file is generated
> near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
> Labelled" instead of HDF5 if the file is not present. Suppression of the
> generated .hdr file can fix the problem. Do you think that it is the only
> solution ?

Victor,

You can define GDAL_SKIP=ENVI as environment variable as well to avoid the ENVI
driver to be used at all.
We could/should probably register the ENVI driver in last, so to be sure it is
used only after all other drivers have been tried.
Could you paste the content of the .hdr file ? It is a bit strange that such a
file is generated without a BIL/BIP/BIQ image file that matches it (isn't there
any other file next to the .hdr and .h5 file that would have been generated by
ENVI?). There are perhaps some keywords in that .hdr file that would show it
should be ignored.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Sep 15 05:54:27 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Sep 2014 14:54:27 +0200
Subject: [gdal-dev] Working with Kakadu
In-Reply-To: <1410771447865-5161815.post@n6.nabble.com>
References: <1410771447865-5161815.post@n6.nabble.com>
Message-ID: <1410785667.5416e18321d43@imp.free.fr>

Selon kursatk <kursatk at gmail.com>:

> Hi;
>
> I read lots of texts about gdal and kakadu, and i am a bit confused. I'm
> trying to read a jp2 image with kakadu driver by using gdal java bindings
> api. Hence, i should register JP2KAK driver. Most of my researchs say that,
> i can do that by building gdal with kakadu library. But, i wonder, isn't
> there a way to do that as using plugin architecture? I mean, i am looking
> for some easy ways.

In theory almost all GDAL drivers could be compiled as plugins, but not all of
them have the makefile support to do so. I've looked at the JP2KAK driver and
currently there are no makefile rules for Linux or Windows to make it build as a
plugin. I don't think there ara fundamental reasons for not having plugin
support for this driver (although JP2KAK could be a pain since the way the
Kakadu library makes it available to other programs/libraries is non standard).
Just someone has to do it.

>
> Thanks for your advance.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Working-with-Kakadu-tp5161815.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From victor.fomin.1 at gmail.com  Mon Sep 15 05:57:11 2014
From: victor.fomin.1 at gmail.com (victor fomin)
Date: Mon, 15 Sep 2014 14:57:11 +0200
Subject: [gdal-dev] Problem with HDF5 CSK files and .hdr files generated
 by ENVI
In-Reply-To: <1410785306.5416e01af385f@imp.free.fr>
References: <1410770694879-5161812.post@n6.nabble.com>
	<1410785306.5416e01af385f@imp.free.fr>
Message-ID: <CA+ynR02PTAYT5k8A+5xGt8ZJrpBG8qgB+H532aF52dAw0tx4cg@mail.gmail.com>

Even,


Thank you for the suggestion to skip the driver, it is ok for me.
Concerning other files generated by ENVI, I am not sure how it is working,
but I have the only .hdr file after simple opening the CSK imagery.

Here is the content of the .hdr file :
--------
ENVI
description = {
  COSMO SkyMed # 3 Prod Type: Level 1A Single-look Complex Sland Acquisition
  Mode:ENHANCED SPOTLIGHT Pol: Vertical Tx/Vertical Rx}
samples = 19124
lines   = 14378
bands   = 2
header offset = 0
file type = ENVI Standard
data type = 2
interleave = bsq
sensor type = COSMO-SkyMed
byte order = 0
read procedures = {envi_cosmo_read_spatial, envi_cosmo_read_spectral}
subset procedure = envi_cosmo_read_scroll
wavelength units = Unknown
band names = {
 Real-SCS_U-ENHANCED SPOTLIGHT-VV, Imaginary-SCS_U-ENHANCED SPOTLIGHT-VV}
cosmo info = {
 /S01/SBI,
 CSKS3_SCS_U_S2_19_VV_RD_SF_20140905173604_20140905173612_qlk_S01_00, none,
 none, /S01/SBI,
 CSKS3_SCS_U_S2_19_VV_RD_SF_20140905173604_20140905173612_qlk_S01_01, none,
 none}
-------


Victor




On Mon, Sep 15, 2014 at 2:48 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Selon vf <victor.fomin.1 at gmail.com>:
>
> >
> > Dear GDAL developers,
> >
> > I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5
> files
> > which have been read before by ENVI software (and .hdr file is generated
> > near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
> > Labelled" instead of HDF5 if the file is not present. Suppression of the
> > generated .hdr file can fix the problem. Do you think that it is the only
> > solution ?
>
> Victor,
>
> You can define GDAL_SKIP=ENVI as environment variable as well to avoid the
> ENVI
> driver to be used at all.
> We could/should probably register the ENVI driver in last, so to be sure
> it is
> used only after all other drivers have been tried.
> Could you paste the content of the .hdr file ? It is a bit strange that
> such a
> file is generated without a BIL/BIP/BIQ image file that matches it (isn't
> there
> any other file next to the .hdr and .h5 file that would have been
> generated by
> ENVI?). There are perhaps some keywords in that .hdr file that would show
> it
> should be ignored.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140915/73a1aabb/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Sep 15 07:20:01 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 15 Sep 2014 14:20:01 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GDAL_sqlite_/spatialite_support_with_trignom?=
	=?utf-8?q?etric=09functions?=
References: <1410780213752-5161833.post@n6.nabble.com>
Message-ID: <loom.20140915T161807-624@post.gmane.org>

yhema.2705 <yhema.2705 <at> gmail.com> writes:

> 
> hi  ,
> 
> I have build gdal 1.11 with spatialite and sqlite support. I want the layer
> attributes of the shape file be updated with trignometric values .Update is
> functioning well for arithemetic functions for trignometric functions it is
> giving error : ERROR 1: In ExecuteSQL(): sqlite3_prepare(UPDATE gemetry_test
> SET  ID  =  tan(45) ):
>   no such function: tan.
> thanks all

Works for me with the Windows binaries (v.2.0-dev) from gisinternalt.com.

C:\temp\>ogrinfo -dialect sqlite tantest.shp -sql "update tantest set
num=tan(45)"

C:\temp\>ogrinfo tantest.shp -al
INFO: Open of `tantest.shp'
      using driver `ESRI Shapefile' successful.

Layer name: tantest
Geometry: Polygon
Feature Count: 1
Extent: (3213863.000000, 6802915.000000) - (3215302.000000, 6804011.000000)
Layer SRS WKT:
(unknown)
num: Real (33.16)
OGRFeature(tantest):0
  num (Real) = 1.6197751905438615
  POLYGON ((3213863 6803646,3215055 6804011,3215302 6803152,3214776
6802915,3213863 6803646))


-Jukka Rahkonen-


From andre+joost at nurfuerspam.de  Mon Sep 15 07:39:06 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 15 Sep 2014 16:39:06 +0200
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <CAMZEyL6dR0vXc6RJPwOEEv3G8mmaSBCq9qBa1kEJ-794ZLknRg@mail.gmail.com>
References: <mailman.29517.1410546977.1977.gdal-dev@lists.osgeo.org>
	<CAMZEyL6dR0vXc6RJPwOEEv3G8mmaSBCq9qBa1kEJ-794ZLknRg@mail.gmail.com>
Message-ID: <lv6u0h$kfa$1@ger.gmane.org>

Am 15.09.2014 04:22, schrieb Love:
> Thanks andre, will try this as soon as I can and will give you a update.
>
> I just want to ask if will it be possible to batch process my hdf files and
> gdalwarp everything if I'm going to specify the -te of each files?
>

I am not sure if the -te coordinates follow a certain pattern. It should 
be possible to read the metadata information with gdalinfo, and extract 
the coordinate information with a python script that can build the 
gdalwarp command from it. But I am not a python expert.

HTH,
Andr? Joost



From skunkmyrddyn at gmail.com  Mon Sep 15 08:02:05 2014
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Mon, 15 Sep 2014 10:02:05 -0500
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <luv6eh$gq1$1@ger.gmane.org>
References: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
	<CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>
	<luv6eh$gq1$1@ger.gmane.org>
Message-ID: <CAJuTQSGAJ_sy2AM0ZXH+13GfR=w5uR-RAwJQ3LFmvafUKy2L1w@mail.gmail.com>

I have had this error message show up if the s_srs is not correctly auto
detected or not present in the input file. I have used a combination of
looking through other nonstandard meta data files present with the image
sets or using a program like global mapper which has a good chance at
guessing the correct s_srs and then specifying it with the -s_srs option.
On Sep 12, 2014 11:19 AM, "Andre Joost" <andre+joost at nurfuerspam.de> wrote:

> Am 12.09.2014 04:54, schrieb Love:
>
>> Hi,
>>
>> The gdalinfo in my post is the gdalinfo of the subdataset 37. I have also
>> tried gdal_translate but when I tried to use gdalwarp using the
>> gdal_translate output, it has error. I really need to use gdalwarp so that
>> I could project the image into epsg:4326(+prj=longlat). If I'm going to
>> use
>> the gdal_translate I am ask to indicate the gcp which is not good in my
>> case because I have many hdf files in my local directory and maybe they
>> have different gcp and I need to batch process them later using the
>> gdalwarp with the +proj=longlat command. What could be the solution?
>>
>
> gdalwarp needs the -geoloc switch, and the target extent with -te. See
> also <http://osgeo-org.1560.x6.nabble.com/gdal-dev-
> Geolocation-Arrays-td4372909.html>
>
> There does not seen to be any progress on this issue.
>
> The values for -te can be found with gdalinfo on the subdataset.
>
> HTH,
> Andr? Joost
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140915/5ab581c6/attachment-0001.html>

From andre+joost at nurfuerspam.de  Mon Sep 15 09:20:08 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 15 Sep 2014 18:20:08 +0200
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <CAJuTQSGAJ_sy2AM0ZXH+13GfR=w5uR-RAwJQ3LFmvafUKy2L1w@mail.gmail.com>
References: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
	<CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>
	<luv6eh$gq1$1@ger.gmane.org>
	<CAJuTQSGAJ_sy2AM0ZXH+13GfR=w5uR-RAwJQ3LFmvafUKy2L1w@mail.gmail.com>
Message-ID: <lv73l9$6ae$1@ger.gmane.org>

Am 15.09.2014 17:02, schrieb Simon Shak:
> I have had this error message show up if the s_srs is not correctly auto
> detected or not present in the input file. I have used a combination of
> looking through other nonstandard meta data files present with the image
> sets or using a program like global mapper which has a good chance at
> guessing the correct s_srs and then specifying it with the -s_srs option.

For the hdf files mentioned above, the SRS is EPSG:4326, so that is not 
the problem.

It is rather the extent of the raster. The raster is not aligned to 
latitudes or longitudes, but rather a parallelogram. The coordinates of 
each cell are stored in additional bands. Re-transforming only works if 
GDAL knows the correct extent of the data in degrees.

Greetings,
Andr? Joost


From even.rouault at spatialys.com  Mon Sep 15 11:43:14 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Sep 2014 20:43:14 +0200
Subject: [gdal-dev] 1.11.1 planning reminder
Message-ID: <201409152043.14681.even.rouault@spatialys.com>

Hi,

as nobody has objected to my proposal, I just wanted to remind developers that 
it was my intention to issue a 1.11.1RC1 release on September 24th. If you 
need some more time to do a fix, just tell.

Regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From alex.jong0019 at gmail.com  Tue Sep 16 02:01:56 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Tue, 16 Sep 2014 02:01:56 -0700 (PDT)
Subject: [gdal-dev] white line between tiles when using gdal_translate on a
 vrt file
Message-ID: <1410858116208-5162050.post@n6.nabble.com>

Hello,

I've a problem when I use gdal_translate on a vrt, some lines appear on the
generated image.
These lines correspond to the border of each small image referenced in the
vrt.
These images have been reprojected to mercator projection.

Lines appears randomly at some zoom levels.
I thought the overview (by gdaladdo) were the problem, but when I delete the
.ovr file, this doesn't make any difference.

Thanks for any help :)

<http://osgeo-org.1560.x6.nabble.com/file/n5162050/img_bug.png> 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-white-line-between-tiles-when-using-gdal-translate-on-a-vrt-file-tp5162050.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From burton449geo at gmail.com  Tue Sep 16 10:43:43 2014
From: burton449geo at gmail.com (Max Demars)
Date: Tue, 16 Sep 2014 13:43:43 -0400
Subject: [gdal-dev] ogr.Geometry - UnionCascaded() question
Message-ID: <CAKtuc=-ybQAXAPxzwnJ0JQCqZhBYRi1WwDxu4yPWW99Mb+gR4g@mail.gmail.com>

Hi,

I want to do a union on many ogr.Geometry stored in a list, but I have a
TypeError: unbound method UnionCascaded() must be called with Geometry
instance as first argument (got list instance instead).

I though UnionCascaded was made to perform Union on many geometries like
this:

        geometries = []
        for feature in featureCollection['features']:

geometries.append(ogr.CreateGeometryFromJson(json.dumps(feature['geometry'])))
        outputGeometry = ogr.Geometry
        output = outputGeometry.UnionCascaded(geometries)

How am I supposed to use this function if list are not accepted?

Thank you,

-Max Demars
-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140916/c121d80c/attachment.html>

From even.rouault at spatialys.com  Tue Sep 16 11:08:14 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Sep 2014 20:08:14 +0200
Subject: [gdal-dev] ogr.Geometry - UnionCascaded() question
In-Reply-To: <CAKtuc=-ybQAXAPxzwnJ0JQCqZhBYRi1WwDxu4yPWW99Mb+gR4g@mail.gmail.com>
References: <CAKtuc=-ybQAXAPxzwnJ0JQCqZhBYRi1WwDxu4yPWW99Mb+gR4g@mail.gmail.com>
Message-ID: <201409162008.14203.even.rouault@spatialys.com>

Le mardi 16 septembre 2014 19:43:43, Max Demars a ?crit :
> Hi,
> 
> I want to do a union on many ogr.Geometry stored in a list, but I have a
> TypeError: unbound method UnionCascaded() must be called with Geometry
> instance as first argument (got list instance instead).
> 
> I though UnionCascaded was made to perform Union on many geometries like
> this:
> 
>         geometries = []
>         for feature in featureCollection['features']:
> 
> geometries.append(ogr.CreateGeometryFromJson(json.dumps(feature['geometry']
> ))) outputGeometry = ogr.Geometry
>         output = outputGeometry.UnionCascaded(geometries)
> 
> How am I supposed to use this function if list are not accepted?

Max,

UnionCascaded() takes no argument and operates on a multipolygon geometry :

For example

geom = ogr.CreateGeometryFromWkt('MULTIPOLYGON(((0 0,0 1,1 1,0 0)),((0 0,1 1,1 
0,0 0)))')
result = geom.UnionCascaded()

Or you can build it into several steps :

geom = ogr.Geometry(ogr.wkbMultiPolygon)
geom.AddGeometry(ogr.CreateGeometryFromWkt('POLYGON((0 0,0 1,1 1,0 0))'))
geom.AddGeometry(ogr.CreateGeometryFromWkt('POLYGON((0 0,1 1,1 0,0 0))'))
result = geom.UnionCascaded()

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From skunkmyrddyn at gmail.com  Tue Sep 16 12:00:00 2014
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Tue, 16 Sep 2014 14:00:00 -0500
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <lv73l9$6ae$1@ger.gmane.org>
References: <mailman.47.1410462003.6811.gdal-dev@lists.osgeo.org>
	<CAMZEyL5fLTVYYRE2BcJLEWEPbi1tM2xHQ5MQpjFouF3FpNKUoA@mail.gmail.com>
	<luv6eh$gq1$1@ger.gmane.org>
	<CAJuTQSGAJ_sy2AM0ZXH+13GfR=w5uR-RAwJQ3LFmvafUKy2L1w@mail.gmail.com>
	<lv73l9$6ae$1@ger.gmane.org>
Message-ID: <CAJuTQSEcG6U72FAZe7aydZew-BFYc=qaE88voaRZ_U4Sct6GGA@mail.gmail.com>

I just recall seeing similar output from gdal info where it listed the meta
data but still showed Coordinate System is `' for the main line. When I
added the s_srs it fixed itself.
However I will admit it was a long while ago and I could be remembering
slightly off.
On Sep 15, 2014 11:21 AM, "Andre Joost" <andre+joost at nurfuerspam.de> wrote:

> Am 15.09.2014 17:02, schrieb Simon Shak:
>
>> I have had this error message show up if the s_srs is not correctly auto
>> detected or not present in the input file. I have used a combination of
>> looking through other nonstandard meta data files present with the image
>> sets or using a program like global mapper which has a good chance at
>> guessing the correct s_srs and then specifying it with the -s_srs option.
>>
>
> For the hdf files mentioned above, the SRS is EPSG:4326, so that is not
> the problem.
>
> It is rather the extent of the raster. The raster is not aligned to
> latitudes or longitudes, but rather a parallelogram. The coordinates of
> each cell are stored in additional bands. Re-transforming only works if
> GDAL knows the correct extent of the data in degrees.
>
> Greetings,
> Andr? Joost
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140916/965d9964/attachment.html>

From ljvillarin30 at gmail.com  Tue Sep 16 19:59:03 2014
From: ljvillarin30 at gmail.com (Love)
Date: Wed, 17 Sep 2014 10:59:03 +0800
Subject: [gdal-dev] gdal-dev Digest, Vol 124, Issue 22
In-Reply-To: <mailman.29938.1410793328.1977.gdal-dev@lists.osgeo.org>
References: <mailman.29938.1410793328.1977.gdal-dev@lists.osgeo.org>
Message-ID: <CAMZEyL4Zvydnea_cZKK+wTz+bW1HuqqkwvKPKLqNbfMPvKxPHQ@mail.gmail.com>

Hi,

Thanks! But it is workig only for some while for some hdf's, error still
appears. I assigned one uniform target extent for all the files since this
was what I specified before I downloaded the files from the oceancolor nasa.

ERROR:

D:\hdf\file\input> gdalwarp -geoloc -te 109.975 3.475 135.025 25.025
HDF4_SDS:UNKNOWN:"A2014045050000.L2_LA
C.SeAHABS.hdf":37 sample.tif
Creating output file that is 927P x 798L.
Processing input file HDF4_SDS:UNKNOWN:A2014045050000.L2_LAC.SeAHABS.hdf:37.
ERROR 1: Too many points (438 out of 441) failed to transform,
unable to compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,927,798,
skipping.
0...10...20...30...40...50...60...70...80...90...100 - done.

On Mon, Sep 15, 2014 at 11:02 PM, <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Problem with HDF5 CSK files and .hdr files generated by   ENVI (vf)
>    2. Working with Kakadu (kursatk)
>    3. GDAL sqlite /spatialite support with trignometric functions
>       (yhema.2705)
>    4. Re: Problem with HDF5 CSK files and .hdr files generated  by
>       ENVI (Even Rouault)
>    5. Re: Working with Kakadu (Even Rouault)
>    6. Re: Problem with HDF5 CSK files and .hdr files generated by
>       ENVI (victor fomin)
>    7. Re: GDAL sqlite /spatialite support with trignometric
>       functions (Jukka Rahkonen)
>    8. Re: ERROR 1: Too many points (440 out of 441) failed to
>       transform, unable to compute output bounds. (Andre Joost)
>    9. Re: ERROR 1: Too many points (440 out of 441) failed to
>       transform, unable to compute output bounds. (Simon Shak)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 15 Sep 2014 01:44:54 -0700 (PDT)
> From: vf <victor.fomin.1 at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Problem with HDF5 CSK files and .hdr files
>         generated by    ENVI
> Message-ID: <1410770694879-5161812.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
>
> Dear GDAL developers,
>
> I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5 files
> which have been read before by ENVI software (and .hdr file is generated
> near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
> Labelled" instead of HDF5 if the file is not present. Suppression of the
> generated .hdr file can fix the problem. Do you think that it is the only
> solution ?
>
> Cheers,
> Victor
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Problem-with-HDF5-CSK-files-and-hdr-files-generated-by-ENVI-tp5161812.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
> ------------------------------
>
> Message: 2
> Date: Mon, 15 Sep 2014 01:57:27 -0700 (PDT)
> From: kursatk <kursatk at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Working with Kakadu
> Message-ID: <1410771447865-5161815.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
> Hi;
>
> I read lots of texts about gdal and kakadu, and i am a bit confused. I'm
> trying to read a jp2 image with kakadu driver by using gdal java bindings
> api. Hence, i should register JP2KAK driver. Most of my researchs say that,
> i can do that by building gdal with kakadu library. But, i wonder, isn't
> there a way to do that as using plugin architecture? I mean, i am looking
> for some easy ways.
>
> Thanks for your advance.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Working-with-Kakadu-tp5161815.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 15 Sep 2014 04:23:33 -0700 (PDT)
> From: "yhema.2705" <yhema.2705 at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] GDAL sqlite /spatialite support with trignometric
>         functions
> Message-ID: <1410780213752-5161833.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
> hi  ,
>
> I have build gdal 1.11 with spatialite and sqlite support. I want the layer
> attributes of the shape file be updated with trignometric values .Update is
> functioning well for arithemetic functions for trignometric functions it is
> giving error : ERROR 1: In ExecuteSQL(): sqlite3_prepare(UPDATE
> gemetry_test
> SET  ID  =  tan(45) ):
>   no such function: tan.
> thanks all
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/GDAL-sqlite-spatialite-support-with-trignometric-functions-tp5161833.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
> ------------------------------
>
> Message: 4
> Date: Mon, 15 Sep 2014 14:48:26 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: vf <victor.fomin.1 at gmail.com>
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem with HDF5 CSK files and .hdr files
>         generated       by ENVI
> Message-ID: <1410785306.5416e01af385f at imp.free.fr>
> Content-Type: text/plain; charset=ISO-8859-15
>
> Selon vf <victor.fomin.1 at gmail.com>:
>
> >
> > Dear GDAL developers,
> >
> > I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5
> files
> > which have been read before by ENVI software (and .hdr file is generated
> > near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
> > Labelled" instead of HDF5 if the file is not present. Suppression of the
> > generated .hdr file can fix the problem. Do you think that it is the only
> > solution ?
>
> Victor,
>
> You can define GDAL_SKIP=ENVI as environment variable as well to avoid the
> ENVI
> driver to be used at all.
> We could/should probably register the ENVI driver in last, so to be sure
> it is
> used only after all other drivers have been tried.
> Could you paste the content of the .hdr file ? It is a bit strange that
> such a
> file is generated without a BIL/BIP/BIQ image file that matches it (isn't
> there
> any other file next to the .hdr and .h5 file that would have been
> generated by
> ENVI?). There are perhaps some keywords in that .hdr file that would show
> it
> should be ignored.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 5
> Date: Mon, 15 Sep 2014 14:54:27 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: kursatk <kursatk at gmail.com>
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Working with Kakadu
> Message-ID: <1410785667.5416e18321d43 at imp.free.fr>
> Content-Type: text/plain; charset=ISO-8859-15
>
> Selon kursatk <kursatk at gmail.com>:
>
> > Hi;
> >
> > I read lots of texts about gdal and kakadu, and i am a bit confused. I'm
> > trying to read a jp2 image with kakadu driver by using gdal java bindings
> > api. Hence, i should register JP2KAK driver. Most of my researchs say
> that,
> > i can do that by building gdal with kakadu library. But, i wonder, isn't
> > there a way to do that as using plugin architecture? I mean, i am looking
> > for some easy ways.
>
> In theory almost all GDAL drivers could be compiled as plugins, but not
> all of
> them have the makefile support to do so. I've looked at the JP2KAK driver
> and
> currently there are no makefile rules for Linux or Windows to make it
> build as a
> plugin. I don't think there ara fundamental reasons for not having plugin
> support for this driver (although JP2KAK could be a pain since the way the
> Kakadu library makes it available to other programs/libraries is non
> standard).
> Just someone has to do it.
>
> >
> > Thanks for your advance.
> >
> >
> >
> > --
> > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/Working-with-Kakadu-tp5161815.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> ------------------------------
>
> Message: 6
> Date: Mon, 15 Sep 2014 14:57:11 +0200
> From: victor fomin <victor.fomin.1 at gmail.com>
> To: Even Rouault <even.rouault at spatialys.com>,
>         gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Problem with HDF5 CSK files and .hdr files
>         generated by ENVI
> Message-ID:
>         <
> CA+ynR02PTAYT5k8A+5xGt8ZJrpBG8qgB+H532aF52dAw0tx4cg at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Even,
>
>
> Thank you for the suggestion to skip the driver, it is ok for me.
> Concerning other files generated by ENVI, I am not sure how it is working,
> but I have the only .hdr file after simple opening the CSK imagery.
>
> Here is the content of the .hdr file :
> --------
> ENVI
> description = {
>   COSMO SkyMed # 3 Prod Type: Level 1A Single-look Complex Sland
> Acquisition
>   Mode:ENHANCED SPOTLIGHT Pol: Vertical Tx/Vertical Rx}
> samples = 19124
> lines   = 14378
> bands   = 2
> header offset = 0
> file type = ENVI Standard
> data type = 2
> interleave = bsq
> sensor type = COSMO-SkyMed
> byte order = 0
> read procedures = {envi_cosmo_read_spatial, envi_cosmo_read_spectral}
> subset procedure = envi_cosmo_read_scroll
> wavelength units = Unknown
> band names = {
>  Real-SCS_U-ENHANCED SPOTLIGHT-VV, Imaginary-SCS_U-ENHANCED SPOTLIGHT-VV}
> cosmo info = {
>  /S01/SBI,
>  CSKS3_SCS_U_S2_19_VV_RD_SF_20140905173604_20140905173612_qlk_S01_00, none,
>  none, /S01/SBI,
>  CSKS3_SCS_U_S2_19_VV_RD_SF_20140905173604_20140905173612_qlk_S01_01, none,
>  none}
> -------
>
>
> Victor
>
>
>
>
> On Mon, Sep 15, 2014 at 2:48 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> > Selon vf <victor.fomin.1 at gmail.com>:
> >
> > >
> > > Dear GDAL developers,
> > >
> > > I constate that GDAL (e.g. gdalinfo) fails to open correctly CSK hdf5
> > files
> > > which have been read before by ENVI software (and .hdr file is
> generated
> > > near .h5 source file). In this case GDAL uses driver "ENVI/ENVI .hdr
> > > Labelled" instead of HDF5 if the file is not present. Suppression of
> the
> > > generated .hdr file can fix the problem. Do you think that it is the
> only
> > > solution ?
> >
> > Victor,
> >
> > You can define GDAL_SKIP=ENVI as environment variable as well to avoid
> the
> > ENVI
> > driver to be used at all.
> > We could/should probably register the ENVI driver in last, so to be sure
> > it is
> > used only after all other drivers have been tried.
> > Could you paste the content of the .hdr file ? It is a bit strange that
> > such a
> > file is generated without a BIL/BIP/BIQ image file that matches it (isn't
> > there
> > any other file next to the .hdr and .h5 file that would have been
> > generated by
> > ENVI?). There are perhaps some keywords in that .hdr file that would show
> > it
> > should be ignored.
> >
> > Even
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140915/73a1aabb/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 7
> Date: Mon, 15 Sep 2014 14:20:01 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] GDAL sqlite /spatialite support with
>         trignometric    functions
> Message-ID: <loom.20140915T161807-624 at post.gmane.org>
> Content-Type: text/plain; charset=us-ascii
>
> yhema.2705 <yhema.2705 <at> gmail.com> writes:
>
> >
> > hi  ,
> >
> > I have build gdal 1.11 with spatialite and sqlite support. I want the
> layer
> > attributes of the shape file be updated with trignometric values .Update
> is
> > functioning well for arithemetic functions for trignometric functions it
> is
> > giving error : ERROR 1: In ExecuteSQL(): sqlite3_prepare(UPDATE
> gemetry_test
> > SET  ID  =  tan(45) ):
> >   no such function: tan.
> > thanks all
>
> Works for me with the Windows binaries (v.2.0-dev) from gisinternalt.com.
>
> C:\temp\>ogrinfo -dialect sqlite tantest.shp -sql "update tantest set
> num=tan(45)"
>
> C:\temp\>ogrinfo tantest.shp -al
> INFO: Open of `tantest.shp'
>       using driver `ESRI Shapefile' successful.
>
> Layer name: tantest
> Geometry: Polygon
> Feature Count: 1
> Extent: (3213863.000000, 6802915.000000) - (3215302.000000, 6804011.000000)
> Layer SRS WKT:
> (unknown)
> num: Real (33.16)
> OGRFeature(tantest):0
>   num (Real) = 1.6197751905438615
>   POLYGON ((3213863 6803646,3215055 6804011,3215302 6803152,3214776
> 6802915,3213863 6803646))
>
>
> -Jukka Rahkonen-
>
>
>
> ------------------------------
>
> Message: 8
> Date: Mon, 15 Sep 2014 16:39:06 +0200
> From: Andre Joost <andre+joost at nurfuerspam.de>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] ERROR 1: Too many points (440 out of 441)
>         failed to transform, unable to compute output bounds.
> Message-ID: <lv6u0h$kfa$1 at ger.gmane.org>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> Am 15.09.2014 04:22, schrieb Love:
> > Thanks andre, will try this as soon as I can and will give you a update.
> >
> > I just want to ask if will it be possible to batch process my hdf files
> and
> > gdalwarp everything if I'm going to specify the -te of each files?
> >
>
> I am not sure if the -te coordinates follow a certain pattern. It should
> be possible to read the metadata information with gdalinfo, and extract
> the coordinate information with a python script that can build the
> gdalwarp command from it. But I am not a python expert.
>
> HTH,
> Andr? Joost
>
>
>
>
> ------------------------------
>
> Message: 9
> Date: Mon, 15 Sep 2014 10:02:05 -0500
> From: Simon Shak <skunkmyrddyn at gmail.com>
> To: Andre Joost <andre+joost at nurfuerspam.de>
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] ERROR 1: Too many points (440 out of 441)
>         failed to transform, unable to compute output bounds.
> Message-ID:
>         <CAJuTQSGAJ_sy2AM0ZXH+13GfR=
> w5uR-RAwJQ3LFmvafUKy2L1w at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> I have had this error message show up if the s_srs is not correctly auto
> detected or not present in the input file. I have used a combination of
> looking through other nonstandard meta data files present with the image
> sets or using a program like global mapper which has a good chance at
> guessing the correct s_srs and then specifying it with the -s_srs option.
> On Sep 12, 2014 11:19 AM, "Andre Joost" <andre+joost at nurfuerspam.de>
> wrote:
>
> > Am 12.09.2014 04:54, schrieb Love:
> >
> >> Hi,
> >>
> >> The gdalinfo in my post is the gdalinfo of the subdataset 37. I have
> also
> >> tried gdal_translate but when I tried to use gdalwarp using the
> >> gdal_translate output, it has error. I really need to use gdalwarp so
> that
> >> I could project the image into epsg:4326(+prj=longlat). If I'm going to
> >> use
> >> the gdal_translate I am ask to indicate the gcp which is not good in my
> >> case because I have many hdf files in my local directory and maybe they
> >> have different gcp and I need to batch process them later using the
> >> gdalwarp with the +proj=longlat command. What could be the solution?
> >>
> >
> > gdalwarp needs the -geoloc switch, and the target extent with -te. See
> > also <http://osgeo-org.1560.x6.nabble.com/gdal-dev-
> > Geolocation-Arrays-td4372909.html>
> >
> > There does not seen to be any progress on this issue.
> >
> > The values for -te can be found with gdalinfo on the subdataset.
> >
> > HTH,
> > Andr? Joost
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140915/5ab581c6/attachment.html
> >
>
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> End of gdal-dev Digest, Vol 124, Issue 22
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140917/5c6f9890/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Tue Sep 16 21:45:56 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 17 Sep 2014 04:45:56 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?white_line_between_tiles_when_using_gdal=5Ft?=
	=?utf-8?q?ranslate_on_a_vrt_file?=
References: <1410858116208-5162050.post@n6.nabble.com>
Message-ID: <loom.20140917T064046-816@post.gmane.org>

00darki <alex.jong0019 <at> gmail.com> writes:

> 
> Hello,
> 
> I've a problem when I use gdal_translate on a vrt, some lines appear on the
> generated image.
> These lines correspond to the border of each small image referenced in the
> vrt.
> These images have been reprojected to mercator projection.
> 
> Lines appears randomly at some zoom levels.
> I thought the overview (by gdaladdo) were the problem, but when I delete the
> .ovr file, this doesn't make any difference.
> 
> Thanks for any help :)
> 
> <http://osgeo-org.1560.x6.nabble.com/file/n5162050/img_bug.png> 

Hi,

Have you warped each tile first individually into EPSG:3857 and VRT file is
combining these warped tiles?

In that case it could help to run gdalwarp with -tr and -tap options. Use
the same pixel size than the original in -tr, or bigger.

-Jukka Rahkonen-


From warmerdam at pobox.com  Tue Sep 16 22:33:17 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 16 Sep 2014 22:33:17 -0700
Subject: [gdal-dev] OGR WCTS Security Issue / Migration To Spike
Message-ID: <CA+YzLBdPkRhX9HpedvJaz=uF2uwRFbjKVfnSH1ipFXdAx+=fOg@mail.gmail.com>

Folks,

Robert Coup has noticed a security problem with the OGR WCTS service.  As I
am not aware of anyone using it, and it hasn't been maintained for a while,
I'm going to move it to "svn spike" from trunk and added a small warning
about it there.  Anyone actually running this as a service may want to
review the notes added to the index.html and/or talk to Robert.  If there
is desire to keep this in the GDAL/OGR distribution let me know and we
could work on a fix.

The brief (incomplete) description follows, and the code can now be found
at:

  http://svn.osgeo.org/gdal/spike/wcts/

<h2><a id="security">Security Concern</a></h2>

The OGR WCTS server has been moved to "spike" due to lack of maintenance
and a non-trivial SSRF security bug.  In light of this problem, it is
advised
that this service only be used with caution.  Robert Coup describes it this
way:
<p>

<i>
If the WCTS stuff is compiled with -DHAVE_CURL, then the ogrwcts process is
vulnerable to SSRF. The wctsclient process (which looks to me like a cgi
server) is always vulnerable, since it doesn't care about -DHAVE_CURL.<p>

(a) Either passing in a user-supplied URL which isn't validated before
requesting it - this leaves "internal" http services which should only be
readable to the server readable to any client.<p>

(b) Using a redirect to the gopher protocol a client can send HTTP POST
requests or other payloads to any host accessible to the server. *Why* curl
enables the gopher protocol is beyond me, but it does.<p>

We can protect against (b) by disabling redirect-following
(CURLOPT_FOLLOWLOCATION=0). But we can't really protect against (a) at all
without adding some black/whitelist of IP addresses.<p>

Steps to reproduce:<p>

Overview:
<ol>
<li> send evil request to wctsclient or ogrwcts services
<li> wcts requests client-specified http url (via <FileUrl> in ogrwcts, or
WCTSServer/GMLURL in wctsclient)
<li> either that reveals private inf
</ol>
</i>

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140916/ecda85b2/attachment.html>

From alex.jong0019 at gmail.com  Wed Sep 17 02:04:52 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Wed, 17 Sep 2014 02:04:52 -0700 (PDT)
Subject: [gdal-dev] white line between tiles when using gdal_translate
 on a vrt file
In-Reply-To: <loom.20140917T064046-816@post.gmane.org>
References: <1410858116208-5162050.post@n6.nabble.com>
	<loom.20140917T064046-816@post.gmane.org>
Message-ID: <1410944692551-5162284.post@n6.nabble.com>

Yes, I warped each file individually and the .vrt is the index containing all
warped files.

I added -tr and -tap option and apparently the problem is solved !

Thanks a lot !! :)



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-white-line-between-tiles-when-using-gdal-translate-on-a-vrt-file-tp5162050p5162284.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jp.alcantara at geographica.gs  Wed Sep 17 02:36:49 2014
From: jp.alcantara at geographica.gs (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Wed, 17 Sep 2014 11:36:49 +0200
Subject: [gdal-dev] Building GDAL against custom libtiff
Message-ID: <CACFPushnR_-MGPnMeQYcwSdErpOSv8u51AkeCWhUJviZ9Oz_TQ@mail.gmail.com>

Hi,

I'm having from quiet some time now an issue when building GDAL against an
external TIFF library. For sure is a very silly thing but I'm missing
something important nonetheless. So long, I ended up always compiling with
--with-libtiff=internal and have a perfectly functional installation, but
I'm just curious about this.

The things goes as follows: I installed tiff-4.0.3.tar.gz from osgeo.org,
then I try to configure the GDAL build with --with-libtiff=/usr/local/,
where I installed the libtiff, and it compiles. But somehow, when executing
gdalinfo against a TIFF, I get the following:

Warning 1: libtiff version mismatch : You're linking against libtiff 3.X,
but GDAL has been compiled against libtiff >= 4.0.0

And when I ldd gdalinfo, I get:

 libtiff.so.4 => /usr/lib/i386-linux-gnu/libtiff.so.4 (0xb6482000)
 libtiff.so.5 => /usr/local/lib/libtiff.so.5 (0xb640e000)

and I'm at a loss, it seems that is trying to link to the system library
instead the custom installed. Any insight on this will be most welcomed.
Many thanks in advance.
Juan Pedro P?rez Alc?ntara
Chief Science Officer

jp.alcantara at geographica.gs
+34 670 786 422

Avda. de Grecia 8
41012 Sevilla, Spain

T  +34 954 701 157
F  +34  955 110 441
*www.geographica.gs <http://www.geographica.gs>*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140917/453e73e0/attachment.html>

From even.rouault at spatialys.com  Wed Sep 17 03:01:16 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Sep 2014 12:01:16 +0200
Subject: [gdal-dev] Building GDAL against custom libtiff
In-Reply-To: <CACFPushnR_-MGPnMeQYcwSdErpOSv8u51AkeCWhUJviZ9Oz_TQ@mail.gmail.com>
References: <CACFPushnR_-MGPnMeQYcwSdErpOSv8u51AkeCWhUJviZ9Oz_TQ@mail.gmail.com>
Message-ID: <201409171201.16366.even.rouault@spatialys.com>

Juan,

It might be possible that one of the other third-party library that GDAL links 
to already links against your system library. Try a as minimal as possible 
GDAL build first to see if my hypothesis is right.

Another thing to check is after configure to open GDALmake.opt. If there are 
occurrences of "-L/usr/lib ", remove them, and run make.

Even

Le mercredi 17 septembre 2014 11:36:49, Juan Pedro P?rez Alc?ntara a ?crit :
> Hi,
> 
> I'm having from quiet some time now an issue when building GDAL against an
> external TIFF library. For sure is a very silly thing but I'm missing
> something important nonetheless. So long, I ended up always compiling with
> --with-libtiff=internal and have a perfectly functional installation, but
> I'm just curious about this.
> 
> The things goes as follows: I installed tiff-4.0.3.tar.gz from osgeo.org,
> then I try to configure the GDAL build with --with-libtiff=/usr/local/,
> where I installed the libtiff, and it compiles. But somehow, when executing
> gdalinfo against a TIFF, I get the following:
> 
> Warning 1: libtiff version mismatch : You're linking against libtiff 3.X,
> but GDAL has been compiled against libtiff >= 4.0.0
> 
> And when I ldd gdalinfo, I get:
> 
>  libtiff.so.4 => /usr/lib/i386-linux-gnu/libtiff.so.4 (0xb6482000)
>  libtiff.so.5 => /usr/local/lib/libtiff.so.5 (0xb640e000)
> 
> and I'm at a loss, it seems that is trying to link to the system library
> instead the custom installed. Any insight on this will be most welcomed.
> Many thanks in advance.
> Juan Pedro P?rez Alc?ntara
> Chief Science Officer
> 
> jp.alcantara at geographica.gs
> +34 670 786 422
> 
> Avda. de Grecia 8
> 41012 Sevilla, Spain
> 
> T  +34 954 701 157
> F  +34  955 110 441
> *www.geographica.gs <http://www.geographica.gs>*

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jp.alcantara at geographica.gs  Wed Sep 17 02:48:42 2014
From: jp.alcantara at geographica.gs (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Wed, 17 Sep 2014 11:48:42 +0200
Subject: [gdal-dev] Building GDAL against custom libtiff
In-Reply-To: <201409171201.16366.even.rouault@spatialys.com>
References: <CACFPushnR_-MGPnMeQYcwSdErpOSv8u51AkeCWhUJviZ9Oz_TQ@mail.gmail.com>
	<201409171201.16366.even.rouault@spatialys.com>
Message-ID: <CACFPush6b0OjOSZGaU1ZMG=707iLUrSasnjyaNK_Dp4kk=KSwA@mail.gmail.com>

Thanks so much Even, I'll try this.

Juan Pedro P?rez Alc?ntara
Chief Science Officer

jp.alcantara at geographica.gs
+34 670 786 422

Avda. de Grecia 8
41012 Sevilla, Spain

T  +34 954 701 157
F  +34  955 110 441
*www.geographica.gs <http://www.geographica.gs>*

On Wed, Sep 17, 2014 at 12:01 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Juan,
>
> It might be possible that one of the other third-party library that GDAL
> links
> to already links against your system library. Try a as minimal as possible
> GDAL build first to see if my hypothesis is right.
>
> Another thing to check is after configure to open GDALmake.opt. If there
> are
> occurrences of "-L/usr/lib ", remove them, and run make.
>
> Even
>
> Le mercredi 17 septembre 2014 11:36:49, Juan Pedro P?rez Alc?ntara a ?crit
> :
> > Hi,
> >
> > I'm having from quiet some time now an issue when building GDAL against
> an
> > external TIFF library. For sure is a very silly thing but I'm missing
> > something important nonetheless. So long, I ended up always compiling
> with
> > --with-libtiff=internal and have a perfectly functional installation, but
> > I'm just curious about this.
> >
> > The things goes as follows: I installed tiff-4.0.3.tar.gz from osgeo.org
> ,
> > then I try to configure the GDAL build with --with-libtiff=/usr/local/,
> > where I installed the libtiff, and it compiles. But somehow, when
> executing
> > gdalinfo against a TIFF, I get the following:
> >
> > Warning 1: libtiff version mismatch : You're linking against libtiff 3.X,
> > but GDAL has been compiled against libtiff >= 4.0.0
> >
> > And when I ldd gdalinfo, I get:
> >
> >  libtiff.so.4 => /usr/lib/i386-linux-gnu/libtiff.so.4 (0xb6482000)
> >  libtiff.so.5 => /usr/local/lib/libtiff.so.5 (0xb640e000)
> >
> > and I'm at a loss, it seems that is trying to link to the system library
> > instead the custom installed. Any insight on this will be most welcomed.
> > Many thanks in advance.
> > Juan Pedro P?rez Alc?ntara
> > Chief Science Officer
> >
> > jp.alcantara at geographica.gs
> > +34 670 786 422
> >
> > Avda. de Grecia 8
> > 41012 Sevilla, Spain
> >
> > T  +34 954 701 157
> > F  +34 955 110 441
> > *www.geographica.gs <http://www.geographica.gs>*
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140917/90ddf592/attachment-0001.html>

From jp.alcantara at geographica.gs  Wed Sep 17 02:49:37 2014
From: jp.alcantara at geographica.gs (=?UTF-8?Q?Juan_Pedro_P=C3=A9rez_Alc=C3=A1ntara?=)
Date: Wed, 17 Sep 2014 11:49:37 +0200
Subject: [gdal-dev] Building GDAL against custom libtiff
In-Reply-To: <201409171201.16366.even.rouault@spatialys.com>
References: <CACFPushnR_-MGPnMeQYcwSdErpOSv8u51AkeCWhUJviZ9Oz_TQ@mail.gmail.com>
	<201409171201.16366.even.rouault@spatialys.com>
Message-ID: <CACFPusjD4Gp=hD2UjFo1xp0kqhdbz=5wm9nVmoECo6YXi8zRtA@mail.gmail.com>

Even, just wondering, maybe GRASS seems to be a good candidate for that?

Juan Pedro P?rez Alc?ntara
Chief Science Officer

jp.alcantara at geographica.gs
+34 670 786 422

Avda. de Grecia 8
41012 Sevilla, Spain

T  +34 954 701 157
F  +34  955 110 441
*www.geographica.gs <http://www.geographica.gs>*

On Wed, Sep 17, 2014 at 12:01 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Juan,
>
> It might be possible that one of the other third-party library that GDAL
> links
> to already links against your system library. Try a as minimal as possible
> GDAL build first to see if my hypothesis is right.
>
> Another thing to check is after configure to open GDALmake.opt. If there
> are
> occurrences of "-L/usr/lib ", remove them, and run make.
>
> Even
>
> Le mercredi 17 septembre 2014 11:36:49, Juan Pedro P?rez Alc?ntara a ?crit
> :
> > Hi,
> >
> > I'm having from quiet some time now an issue when building GDAL against
> an
> > external TIFF library. For sure is a very silly thing but I'm missing
> > something important nonetheless. So long, I ended up always compiling
> with
> > --with-libtiff=internal and have a perfectly functional installation, but
> > I'm just curious about this.
> >
> > The things goes as follows: I installed tiff-4.0.3.tar.gz from osgeo.org
> ,
> > then I try to configure the GDAL build with --with-libtiff=/usr/local/,
> > where I installed the libtiff, and it compiles. But somehow, when
> executing
> > gdalinfo against a TIFF, I get the following:
> >
> > Warning 1: libtiff version mismatch : You're linking against libtiff 3.X,
> > but GDAL has been compiled against libtiff >= 4.0.0
> >
> > And when I ldd gdalinfo, I get:
> >
> >  libtiff.so.4 => /usr/lib/i386-linux-gnu/libtiff.so.4 (0xb6482000)
> >  libtiff.so.5 => /usr/local/lib/libtiff.so.5 (0xb640e000)
> >
> > and I'm at a loss, it seems that is trying to link to the system library
> > instead the custom installed. Any insight on this will be most welcomed.
> > Many thanks in advance.
> > Juan Pedro P?rez Alc?ntara
> > Chief Science Officer
> >
> > jp.alcantara at geographica.gs
> > +34 670 786 422
> >
> > Avda. de Grecia 8
> > 41012 Sevilla, Spain
> >
> > T  +34 954 701 157
> > F  +34 955 110 441
> > *www.geographica.gs <http://www.geographica.gs>*
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140917/dcccbbe5/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Sep 17 04:00:15 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 17 Sep 2014 11:00:15 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?white_line_between_tiles_when_using_gdal=5Ft?=
	=?utf-8?q?ranslate_on_a_vrt_file?=
References: <1410858116208-5162050.post@n6.nabble.com>
	<loom.20140917T064046-816@post.gmane.org>
	<1410944692551-5162284.post@n6.nabble.com>
Message-ID: <loom.20140917T125340-369@post.gmane.org>

00darki <alex.jong0019 <at> gmail.com> writes:

> Yes, I warped each file individually and the .vrt is the index containing all
> warped files.
> 
> I added -tr and -tap option and apparently the problem is solved !
> 
> Thanks a lot !! :)

Good that it worked for you. However, after having answered dozen times to
the same question in GDAL and Mapserver lists I start to think that this
would belong to FAQ somewhere, with a proper explanation and some good
images to demonstrate what really happens and why -tr and -tap can usually
fix those artifacts.

-Jukka Rahkonen-


From burton449geo at gmail.com  Wed Sep 17 10:47:58 2014
From: burton449geo at gmail.com (Max Demars)
Date: Wed, 17 Sep 2014 13:47:58 -0400
Subject: [gdal-dev] Split polygon by a linestring to get two polygons
Message-ID: <CAKtuc=93dVf+EieLmp94ZK8AaTSrxcNfLbYn_E+mMLMXjxx6PA@mail.gmail.com>

Hi,

I am scratching my head to find a way to split a polygon geometry by a
linestring without success. Anybody has found a workaround as function such
postgis ST_Split is not implemented in ogr geometry yet?

Thank you for your help,

-Max Demars

-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140917/425c20ee/attachment.html>

From andre+joost at nurfuerspam.de  Wed Sep 17 12:45:52 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 17 Sep 2014 21:45:52 +0200
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
In-Reply-To: <CAMZEyL4Zvydnea_cZKK+wTz+bW1HuqqkwvKPKLqNbfMPvKxPHQ@mail.gmail.com>
References: <mailman.29938.1410793328.1977.gdal-dev@lists.osgeo.org>
	<CAMZEyL4Zvydnea_cZKK+wTz+bW1HuqqkwvKPKLqNbfMPvKxPHQ@mail.gmail.com>
Message-ID: <lvcof4$pv7$1@ger.gmane.org>

Am 17.09.2014 04:59, schrieb Love:
> Hi,
>
> Thanks! But it is workig only for some while for some hdf's, error still
> appears. I assigned one uniform target extent for all the files since this
> was what I specified before I downloaded the files from the oceancolor nasa.
>

The extent of the hdf file(s) is different than the rectangular extent 
you ordered. You have to run gdalinfo on each hdf file to get the 
information.

Look out for something like:

   geospatial_lat_max=24.78230858
   geospatial_lat_min=5.343300343
   geospatial_lat_units=degrees_north
   geospatial_lon_max=139.3295746
   geospatial_lon_min=126.3987579
   geospatial_lon_units=degrees_east

HTH,
Andr? Joost


From jukka.rahkonen at mmmtike.fi  Wed Sep 17 13:27:09 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 17 Sep 2014 20:27:09 +0000 (UTC)
Subject: [gdal-dev] Split polygon by a linestring to get two polygons
References: <CAKtuc=93dVf+EieLmp94ZK8AaTSrxcNfLbYn_E+mMLMXjxx6PA@mail.gmail.com>
Message-ID: <loom.20140917T220019-520@post.gmane.org>

Max Demars <burton449geo <at> gmail.com> writes:


> Hi,
> I am scratching my head to find a way to split a polygon geometry by a
linestring without success. Anybody has found a workaround as function such
postgis ST_Split is not implemented in ogr geometry yet?
> Thank you for your help,
> -Max Demars

Hi,

It should be possible do with SQLite SQL dialect if GDAL is built with fresh
enough Spatialite and Spatialite is built with LWGEOM. Spatialite has
functions Split, SplitLeft and SplitRight
http://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html. 

For testing the syntax create a dummy shapefile "test.shp" and try the
following which should work with quite old Spatialite version.

ogrinfo test.shp -sql "select buffer(geomfromtext('POINT (100 100)'),10)"
-dialect sqlite

Similarly this should do split if the Spatialite version supports it:
ogrinfo test.shp -sql "select split(geomfromtext('POLYGON (( 126 178, 187
254, 289 185, 126 178 ))'),geomfromtext('LINESTRING ( 189 13
5, 244 272 )'))" -dialect sqlite

The gisinternals.com Windows builds do not support the latter.
Spatialite-gui 1.7.0 with Spatialite v. 4.1 does support it so build GDAL
with the current Spatialite v. 4.2 and I believe that you will have your
splitter.

-Jukka Rahkonen-


From benjamin.preisig at metgis.com  Thu Sep 18 03:38:35 2014
From: benjamin.preisig at metgis.com (Benjamin_P)
Date: Thu, 18 Sep 2014 03:38:35 -0700 (PDT)
Subject: [gdal-dev] gdal_calc.py else not 0
Message-ID: <1411036715945-5162590.post@n6.nabble.com>

I am trying to reassign 0 values in my raster to 1 and leave all the other
values as they are.

gdal_calc.py -A infile.tif --outfile=outfile.tif --calc="A* logical_or(A <
0, A > 0)" --overwrite --NoDataValue=1

The problem I am encountering is, that I cannot reassign the zeros. In my
calculation I search for all values except zero which gives me 1 which I
multiply with the original value. If the statement is false - for zeros -
ELSE evaluates to 0. How can I tell gdal_calc.py to use another value for
else and how can I add this to my calculation? I was trying to achieve this
with --NoDataValue=1 but this does not help.

Cheers
Benjamin 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-calc-py-else-not-0-tp5162590.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From benjamin.preisig at metgis.com  Thu Sep 18 04:56:42 2014
From: benjamin.preisig at metgis.com (Benjamin_P)
Date: Thu, 18 Sep 2014 04:56:42 -0700 (PDT)
Subject: [gdal-dev] gdal_calc.py else not 0
In-Reply-To: <1411036715945-5162590.post@n6.nabble.com>
References: <1411036715945-5162590.post@n6.nabble.com>
Message-ID: <1411041402798-5162612.post@n6.nabble.com>

I found a workaround for my problem:

First get all zeros in the original file with:
gdal_calc.py -A original_file.tif --outfile=zeros.tif --calc=A==0
--> results in a file where ther former zero cells have a value of 1 and all
other cells 0

Then combine the temporary file with the original file:
gdal_calc.py -A original_file.tif -B zeros.tif --outfile=noZeros.tif
--calc=A+B
--> Add the values of both files. Now we add 1 to the former zero cells, the
other values are not affected.

Benjamin



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-calc-py-else-not-0-tp5162590p5162612.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From peter.hopfgartner at r3-gis.com  Thu Sep 18 08:40:11 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Thu, 18 Sep 2014 17:40:11 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
Message-ID: <541AFCDB.3020206@r3-gis.com>

Hi, everybody

we are using the GDAL WMS driver for getting maps from a public WMTS 
service, http://www.basemap.at. Anyway, the resulting image does not 
look smooth. In particular, I would guess that the the image was scaled 
with something like a nearest neighbor algorithm.
So my question is simply, if I can switch the interpolation method in 
some place.

The XML file, taken from 
http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/, is:

<GDAL_WMS>
  <Service name="TMS">
<ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/${z}/${y}/${x}.jpeg</ServerUrl>
  </Service>
  <DataWindow>
   <UpperLeftX>-20037508.34</UpperLeftX>
   <UpperLeftY>20037508.34</UpperLeftY>
   <LowerRightX>20037508.34</LowerRightX>
   <LowerRightY>-20037508.34</LowerRightY>
   <TileLevel>18</TileLevel>
   <TileCountX>1</TileCountX>
   <TileCountY>1</TileCountY>
   <YOrigin>top</YOrigin>
  </DataWindow>
  <Projection>EPSG:3857</Projection>
  <BlockSizeX>256</BlockSizeX>
  <BlockSizeY>256</BlockSizeY>
  <BandsCount>3</BandsCount>
  <Cache />
</GDAL_WMS>

The command is:

gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize 
250 250 basemap_at.xml basemap_at.jpg

As can be clearly seen, the labels are hard to read.

Reagrds,

Peter

-- 
Peter Hopfgartner
R3 GIS
web  : www.r3-gis.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140918/c5701376/attachment.html>

From even.rouault at spatialys.com  Thu Sep 18 13:11:48 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Sep 2014 22:11:48 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <541AFCDB.3020206@r3-gis.com>
References: <541AFCDB.3020206@r3-gis.com>
Message-ID: <201409182211.48472.even.rouault@spatialys.com>

Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
> Hi, everybody
> 
> we are using the GDAL WMS driver for getting maps from a public WMTS
> service, http://www.basemap.at. Anyway, the resulting image does not
> look smooth. In particular, I would guess that the the image was scaled
> with something like a nearest neighbor algorithm.
> So my question is simply, if I can switch the interpolation method in
> some place.
> 
> The XML file, taken from
> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
> is:
> 
> <GDAL_WMS>
>   <Service name="TMS">
> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/
> ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
>   <DataWindow>
>    <UpperLeftX>-20037508.34</UpperLeftX>
>    <UpperLeftY>20037508.34</UpperLeftY>
>    <LowerRightX>20037508.34</LowerRightX>
>    <LowerRightY>-20037508.34</LowerRightY>
>    <TileLevel>18</TileLevel>
>    <TileCountX>1</TileCountX>
>    <TileCountY>1</TileCountY>
>    <YOrigin>top</YOrigin>
>   </DataWindow>
>   <Projection>EPSG:3857</Projection>
>   <BlockSizeX>256</BlockSizeX>
>   <BlockSizeY>256</BlockSizeY>
>   <BandsCount>3</BandsCount>
>   <Cache />
> </GDAL_WMS>
> 
> The command is:
> 
> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
> 250 250 basemap_at.xml basemap_at.jpg

Peter,

Resampling done by gdal_translate is nearest neighbour, so not always that 
great.

What you can do is select an outsize that is compatible with the source 
overviews. In TMS, the ratio between sucessive overviews work with factor of 
2, so you should select an outsize of 10000 / 2^N. The closest is 10000 / 256 
= 390.625 -> 391

So 

gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
391 391 basemap_at.xml tmp.tif

and then:

gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different 
resampling kernel)
gdal_translate tmp2.tif basemap_at.jpg -of JPEG

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peter.hopfgartner at r3-gis.com  Thu Sep 18 13:23:06 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Thu, 18 Sep 2014 22:23:06 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <201409182211.48472.even.rouault@spatialys.com>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
Message-ID: <291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>

Salut Evan,

thanks for you recipe. Unfortunately, what I am really interested in is to use this from MapServer. Could you give me a pointer in the source where the resampling takes place?

Thanks,

Peter

Am 18.09.2014 um 22:11 schrieb Even Rouault <even.rouault at spatialys.com>:

> Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
>> Hi, everybody
>> 
>> we are using the GDAL WMS driver for getting maps from a public WMTS
>> service, http://www.basemap.at. Anyway, the resulting image does not
>> look smooth. In particular, I would guess that the the image was scaled
>> with something like a nearest neighbor algorithm.
>> So my question is simply, if I can switch the interpolation method in
>> some place.
>> 
>> The XML file, taken from
>> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
>> is:
>> 
>> <GDAL_WMS>
>>  <Service name="TMS">
>> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/
>> ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
>>  <DataWindow>
>>   <UpperLeftX>-20037508.34</UpperLeftX>
>>   <UpperLeftY>20037508.34</UpperLeftY>
>>   <LowerRightX>20037508.34</LowerRightX>
>>   <LowerRightY>-20037508.34</LowerRightY>
>>   <TileLevel>18</TileLevel>
>>   <TileCountX>1</TileCountX>
>>   <TileCountY>1</TileCountY>
>>   <YOrigin>top</YOrigin>
>>  </DataWindow>
>>  <Projection>EPSG:3857</Projection>
>>  <BlockSizeX>256</BlockSizeX>
>>  <BlockSizeY>256</BlockSizeY>
>>  <BandsCount>3</BandsCount>
>>  <Cache />
>> </GDAL_WMS>
>> 
>> The command is:
>> 
>> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
>> 250 250 basemap_at.xml basemap_at.jpg
> 
> Peter,
> 
> Resampling done by gdal_translate is nearest neighbour, so not always that 
> great.
> 
> What you can do is select an outsize that is compatible with the source 
> overviews. In TMS, the ratio between sucessive overviews work with factor of 
> 2, so you should select an outsize of 10000 / 2^N. The closest is 10000 / 256 
> = 390.625 -> 391
> 
> So 
> 
> gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
> 391 391 basemap_at.xml tmp.tif
> 
> and then:
> 
> gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different 
> resampling kernel)
> gdal_translate tmp2.tif basemap_at.jpg -of JPEG
> 
> Best regards,
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From even.rouault at spatialys.com  Thu Sep 18 13:30:09 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Sep 2014 22:30:09 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
Message-ID: <201409182230.10093.even.rouault@spatialys.com>

Le jeudi 18 septembre 2014 22:23:06, Peter Hopfgartner a ?crit :
> Salut Evan,
> 
> thanks for you recipe. Unfortunately, what I am really interested in is to
> use this from MapServer. Could you give me a pointer in the source where
> the resampling takes place?

In gcore/rasterio.cpp : GDALRasterBand::IRasterIO(). I must warn you : quite 
tricky code

But perhaps you don't need code change. In MapServer did you try to define 
PROCESSING "RESAMPLE=BILINEAR" ?

> 
> Thanks,
> 
> Peter
> 
> Am 18.09.2014 um 22:11 schrieb Even Rouault <even.rouault at spatialys.com>:
> > Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
> >> Hi, everybody
> >> 
> >> we are using the GDAL WMS driver for getting maps from a public WMTS
> >> service, http://www.basemap.at. Anyway, the resulting image does not
> >> look smooth. In particular, I would guess that the the image was scaled
> >> with something like a nearest neighbor algorithm.
> >> So my question is simply, if I can switch the interpolation method in
> >> some place.
> >> 
> >> The XML file, taken from
> >> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
> >> is:
> >> 
> >> <GDAL_WMS>
> >> 
> >>  <Service name="TMS">
> >> 
> >> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google38
> >> 57/ ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
> >> 
> >>  <DataWindow>
> >>  
> >>   <UpperLeftX>-20037508.34</UpperLeftX>
> >>   <UpperLeftY>20037508.34</UpperLeftY>
> >>   <LowerRightX>20037508.34</LowerRightX>
> >>   <LowerRightY>-20037508.34</LowerRightY>
> >>   <TileLevel>18</TileLevel>
> >>   <TileCountX>1</TileCountX>
> >>   <TileCountY>1</TileCountY>
> >>   <YOrigin>top</YOrigin>
> >>  
> >>  </DataWindow>
> >>  <Projection>EPSG:3857</Projection>
> >>  <BlockSizeX>256</BlockSizeX>
> >>  <BlockSizeY>256</BlockSizeY>
> >>  <BandsCount>3</BandsCount>
> >>  <Cache />
> >> 
> >> </GDAL_WMS>
> >> 
> >> The command is:
> >> 
> >> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
> >> 250 250 basemap_at.xml basemap_at.jpg
> > 
> > Peter,
> > 
> > Resampling done by gdal_translate is nearest neighbour, so not always
> > that great.
> > 
> > What you can do is select an outsize that is compatible with the source
> > overviews. In TMS, the ratio between sucessive overviews work with factor
> > of 2, so you should select an outsize of 10000 / 2^N. The closest is
> > 10000 / 256 = 390.625 -> 391
> > 
> > So
> > 
> > gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
> > 391 391 basemap_at.xml tmp.tif
> > 
> > and then:
> > 
> > gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different
> > resampling kernel)
> > gdal_translate tmp2.tif basemap_at.jpg -of JPEG
> > 
> > Best regards,
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at mmmtike.fi  Thu Sep 18 14:03:18 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 18 Sep 2014 21:03:18 +0000 (UTC)
Subject: [gdal-dev] Interpolation when using the WMS format
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
Message-ID: <loom.20140918T225531-284@post.gmane.org>

Peter Hopfgartner <peter.hopfgartner <at> r3-gis.com> writes:

> 
> Salut Evan,
> 
> thanks for you recipe. Unfortunately, what I am really interested in is to
use this from MapServer. Could
> you give me a pointer in the source where the resampling takes place?

Hi,

Why don't you test with Mapserver then before starting to code? If you use
Mapserver as WMS GDAL can request correct resolution directly and there
should be no need at all for resampling. Most Mapservers are also configured
to use png as one of the outputformats which should lead to better quality
than the jpeg compressed tiles you have been playing with.

-Jukka Rahkonen-


From peter.hopfgartner at r3-gis.com  Fri Sep 19 03:18:59 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 19 Sep 2014 12:18:59 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <201409182230.10093.even.rouault@spatialys.com>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<201409182230.10093.even.rouault@spatialys.com>
Message-ID: <541C0313.1090403@r3-gis.com>

Hello Evan,

I've tried this on your suggestion. What happens is, that all labels are 
now much smaller, even harder to read then before. Basically, it seems 
that tiles from a higher zoom levels are taken. This would be 
reasonably, if there would be no labels on the tiles. But in the case of 
the basemap.at tiles, labels are drawn on the tiles.
When working with tiles, even more if the tiles are from a third party, 
the available options are much reduced, compared to WMS request. When 
the raster information is lost due to a lower quality interpolation, 
it's gone forever in the processing pipeline.
I did not have the time to look at the code yet (and probably I do not 
have enough C++ experience either), I'll retry during the weekend.

Regards,

Peter

On 09/18/2014 10:30 PM, Even Rouault wrote:
> Le jeudi 18 septembre 2014 22:23:06, Peter Hopfgartner a ?crit :
>> Salut Evan,
>>
>> thanks for you recipe. Unfortunately, what I am really interested in is to
>> use this from MapServer. Could you give me a pointer in the source where
>> the resampling takes place?
> In gcore/rasterio.cpp : GDALRasterBand::IRasterIO(). I must warn you : quite
> tricky code
>
> But perhaps you don't need code change. In MapServer did you try to define
> PROCESSING "RESAMPLE=BILINEAR" ?
>
>> Thanks,
>>
>> Peter
>>
>> Am 18.09.2014 um 22:11 schrieb Even Rouault <even.rouault at spatialys.com>:
>>> Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
>>>> Hi, everybody
>>>>
>>>> we are using the GDAL WMS driver for getting maps from a public WMTS
>>>> service, http://www.basemap.at. Anyway, the resulting image does not
>>>> look smooth. In particular, I would guess that the the image was scaled
>>>> with something like a nearest neighbor algorithm.
>>>> So my question is simply, if I can switch the interpolation method in
>>>> some place.
>>>>
>>>> The XML file, taken from
>>>> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
>>>> is:
>>>>
>>>> <GDAL_WMS>
>>>>
>>>>   <Service name="TMS">
>>>>
>>>> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google38
>>>> 57/ ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
>>>>
>>>>   <DataWindow>
>>>>   
>>>>    <UpperLeftX>-20037508.34</UpperLeftX>
>>>>    <UpperLeftY>20037508.34</UpperLeftY>
>>>>    <LowerRightX>20037508.34</LowerRightX>
>>>>    <LowerRightY>-20037508.34</LowerRightY>
>>>>    <TileLevel>18</TileLevel>
>>>>    <TileCountX>1</TileCountX>
>>>>    <TileCountY>1</TileCountY>
>>>>    <YOrigin>top</YOrigin>
>>>>   
>>>>   </DataWindow>
>>>>   <Projection>EPSG:3857</Projection>
>>>>   <BlockSizeX>256</BlockSizeX>
>>>>   <BlockSizeY>256</BlockSizeY>
>>>>   <BandsCount>3</BandsCount>
>>>>   <Cache />
>>>>
>>>> </GDAL_WMS>
>>>>
>>>> The command is:
>>>>
>>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
>>>> 250 250 basemap_at.xml basemap_at.jpg
>>> Peter,
>>>
>>> Resampling done by gdal_translate is nearest neighbour, so not always
>>> that great.
>>>
>>> What you can do is select an outsize that is compatible with the source
>>> overviews. In TMS, the ratio between sucessive overviews work with factor
>>> of 2, so you should select an outsize of 10000 / 2^N. The closest is
>>> 10000 / 256 = 390.625 -> 391
>>>
>>> So
>>>
>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
>>> 391 391 basemap_at.xml tmp.tif
>>>
>>> and then:
>>>
>>> gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different
>>> resampling kernel)
>>> gdal_translate tmp2.tif basemap_at.jpg -of JPEG
>>>
>>> Best regards,
>>>
>>> Even


-- 
Peter Hopfgartner
R3 GIS
web  : www.r3-gis.com


From peter.hopfgartner at r3-gis.com  Fri Sep 19 03:29:49 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 19 Sep 2014 12:29:49 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <loom.20140918T225531-284@post.gmane.org>
References: <541AFCDB.3020206@r3-gis.com>	<201409182211.48472.even.rouault@spatialys.com>	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<loom.20140918T225531-284@post.gmane.org>
Message-ID: <541C059D.10104@r3-gis.com>

On 09/18/2014 11:03 PM, Jukka Rahkonen wrote:
> Peter Hopfgartner <peter.hopfgartner <at> r3-gis.com> writes:
>
>> Salut Evan,
>>
>> thanks for you recipe. Unfortunately, what I am really interested in is to
> use this from MapServer. Could
>> you give me a pointer in the source where the resampling takes place?
> Hi,
Hi Jukka
> Why don't you test with Mapserver then before starting to code?
You are certainly right that starting with MapServer is a more 
reasonable approach. Anyway, sometimes a look at the code might help to 
better understand the problem. (black box vs. white box)
>   If you use
> Mapserver as WMS GDAL can request correct resolution directly and there
> should be no need at all for resampling.
This is true for WMS layers. Unfortunately, with tiles this is 
different. I guess (and I think to have seen this in the code), that 
GDAL is looking for the best matching resolution for this particular 
tile server, fetches the necessary tiles and then resamples the tiles to 
the final pixmap, which, if not by incredible chance, has a lower 
resolution then the cpomplete set of fetched tiles. My guess is, that in 
this resampling the labels get unreadable to to nearest point 
interpolation, which is really fast but delivers a lower quality then 
e.g. bilinear interpolation.
>   Most Mapservers are also configured
> to use png as one of the outputformats which should lead to better quality
> than the jpeg compressed tiles you have been playing with.
Even here the, I have to follow the rules set by the service provider, 
as specified in http://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml , 
which limits me to JPEG. I have to take what I get.
> -Jukka Rahkonen-
Regards,

Peter

-- 
Peter Hopfgartner
R3 GIS
web  : www.r3-gis.com


From jukka.rahkonen at mmmtike.fi  Fri Sep 19 03:47:07 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 19 Sep 2014 10:47:07 +0000 (UTC)
Subject: [gdal-dev] Interpolation when using the WMS format
References: <541AFCDB.3020206@r3-gis.com>	<201409182211.48472.even.rouault@spatialys.com>	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<loom.20140918T225531-284@post.gmane.org>
	<541C059D.10104@r3-gis.com>
Message-ID: <loom.20140919T123959-874@post.gmane.org>

Peter Hopfgartner <peter.hopfgartner <at> r3-gis.com> writes:

> 
> On 09/18/2014 11:03 PM, Jukka Rahkonen wrote:
> > Peter Hopfgartner <peter.hopfgartner <at> r3-gis.com> writes:
> >
> >> Salut Evan,
> >>
> >> thanks for you recipe. Unfortunately, what I am really interested in is to
> > use this from MapServer. Could
> >> you give me a pointer in the source where the resampling takes place?
> > Hi,
> Hi Jukka
> > Why don't you test with Mapserver then before starting to code?
> You are certainly right that starting with MapServer is a more 
> reasonable approach. Anyway, sometimes a look at the code might help to 
> better understand the problem. (black box vs. white box)
> >   If you use
> > Mapserver as WMS GDAL can request correct resolution directly and there
> > should be no need at all for resampling.
> This is true for WMS layers. Unfortunately, with tiles this is 
> different. I guess (and I think to have seen this in the code), that 
> GDAL is looking for the best matching resolution for this particular 
> tile server, fetches the necessary tiles and then resamples the tiles to 
> the final pixmap, which, if not by incredible chance, has a lower 
> resolution then the cpomplete set of fetched tiles. My guess is, that in 
> this resampling the labels get unreadable to to nearest point 
> interpolation, which is really fast but delivers a lower quality then 
> e.g. bilinear interpolation.
> >   Most Mapservers are also configured
> > to use png as one of the outputformats which should lead to better quality
> > than the jpeg compressed tiles you have been playing with.
> Even here the, I have to follow the rules set by the service provider, 
> as specified in http://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml , 
> which limits me to JPEG. I have to take what I get.

Hi,

You are naturally right about the tiles and it is good if you will work and
make GDAL better. I reacted when you wrote "what I am really interested in
is to use this from MapServer". I believe that your improvements will have
no effect on what you said you are really interested in but if you have
strong enough will to make the world of open source GIS better anyway we all
appreciate you.

-Jukka Rahkonen- 







From even.rouault at spatialys.com  Fri Sep 19 03:51:57 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Sep 2014 12:51:57 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <541C0313.1090403@r3-gis.com>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<201409182230.10093.even.rouault@spatialys.com>
	<541C0313.1090403@r3-gis.com>
Message-ID: <1411123917.541c0acddee29@imp.free.fr>

Selon Peter Hopfgartner <peter.hopfgartner at r3-gis.com>:

> Hello Evan,
>
> I've tried this on your suggestion. What happens is, that all labels are
> now much smaller, even harder to read then before. Basically, it seems
> that tiles from a higher zoom levels are taken. This would be
> reasonably, if there would be no labels on the tiles. But in the case of
> the basemap.at tiles, labels are drawn on the tiles.

Did you try tweaking OVERSAMPLE_RATIO ? See
http://mapserver.org/input/raster.html.

Note: the doc is out of sync. The default value is 2.0 (not 2.5).


> When working with tiles, even more if the tiles are from a third party,
> the available options are much reduced, compared to WMS request. When
> the raster information is lost due to a lower quality interpolation,
> it's gone forever in the processing pipeline.
> I did not have the time to look at the code yet (and probably I do not
> have enough C++ experience either), I'll retry during the weekend.
>
> Regards,
>
> Peter
>
> On 09/18/2014 10:30 PM, Even Rouault wrote:
> > Le jeudi 18 septembre 2014 22:23:06, Peter Hopfgartner a ?crit :
> >> Salut Evan,
> >>
> >> thanks for you recipe. Unfortunately, what I am really interested in is to
> >> use this from MapServer. Could you give me a pointer in the source where
> >> the resampling takes place?
> > In gcore/rasterio.cpp : GDALRasterBand::IRasterIO(). I must warn you :
> quite
> > tricky code
> >
> > But perhaps you don't need code change. In MapServer did you try to define
> > PROCESSING "RESAMPLE=BILINEAR" ?
> >
> >> Thanks,
> >>
> >> Peter
> >>
> >> Am 18.09.2014 um 22:11 schrieb Even Rouault <even.rouault at spatialys.com>:
> >>> Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
> >>>> Hi, everybody
> >>>>
> >>>> we are using the GDAL WMS driver for getting maps from a public WMTS
> >>>> service, http://www.basemap.at. Anyway, the resulting image does not
> >>>> look smooth. In particular, I would guess that the the image was scaled
> >>>> with something like a nearest neighbor algorithm.
> >>>> So my question is simply, if I can switch the interpolation method in
> >>>> some place.
> >>>>
> >>>> The XML file, taken from
> >>>> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
> >>>> is:
> >>>>
> >>>> <GDAL_WMS>
> >>>>
> >>>>   <Service name="TMS">
> >>>>
> >>>> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google38
> >>>> 57/ ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
> >>>>
> >>>>   <DataWindow>
> >>>>
> >>>>    <UpperLeftX>-20037508.34</UpperLeftX>
> >>>>    <UpperLeftY>20037508.34</UpperLeftY>
> >>>>    <LowerRightX>20037508.34</LowerRightX>
> >>>>    <LowerRightY>-20037508.34</LowerRightY>
> >>>>    <TileLevel>18</TileLevel>
> >>>>    <TileCountX>1</TileCountX>
> >>>>    <TileCountY>1</TileCountY>
> >>>>    <YOrigin>top</YOrigin>
> >>>>
> >>>>   </DataWindow>
> >>>>   <Projection>EPSG:3857</Projection>
> >>>>   <BlockSizeX>256</BlockSizeX>
> >>>>   <BlockSizeY>256</BlockSizeY>
> >>>>   <BandsCount>3</BandsCount>
> >>>>   <Cache />
> >>>>
> >>>> </GDAL_WMS>
> >>>>
> >>>> The command is:
> >>>>
> >>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
> >>>> 250 250 basemap_at.xml basemap_at.jpg
> >>> Peter,
> >>>
> >>> Resampling done by gdal_translate is nearest neighbour, so not always
> >>> that great.
> >>>
> >>> What you can do is select an outsize that is compatible with the source
> >>> overviews. In TMS, the ratio between sucessive overviews work with factor
> >>> of 2, so you should select an outsize of 10000 / 2^N. The closest is
> >>> 10000 / 256 = 390.625 -> 391
> >>>
> >>> So
> >>>
> >>> gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
> >>> 391 391 basemap_at.xml tmp.tif
> >>>
> >>> and then:
> >>>
> >>> gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different
> >>> resampling kernel)
> >>> gdal_translate tmp2.tif basemap_at.jpg -of JPEG
> >>>
> >>> Best regards,
> >>>
> >>> Even
>
>
> --
> Peter Hopfgartner
> R3 GIS
> web  : www.r3-gis.com
>
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peter.hopfgartner at r3-gis.com  Fri Sep 19 04:50:39 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 19 Sep 2014 13:50:39 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <201409182230.10093.even.rouault@spatialys.com>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<201409182230.10093.even.rouault@spatialys.com>
Message-ID: <541C188F.6040206@r3-gis.com>

On 09/18/2014 10:30 PM, Even Rouault wrote:
> Le jeudi 18 septembre 2014 22:23:06, Peter Hopfgartner a ?crit :
>> Salut Evan,
>>
>> thanks for you recipe. Unfortunately, what I am really interested in is to
>> use this from MapServer. Could you give me a pointer in the source where
>> the resampling takes place?
> In gcore/rasterio.cpp : GDALRasterBand::IRasterIO(). I must warn you : quite
> tricky code
>
> But perhaps you don't need code change. In MapServer did you try to define
> PROCESSING "RESAMPLE=BILINEAR" ?
>
>> Thanks,
>>
>> Peter
>>
>> Am 18.09.2014 um 22:11 schrieb Even Rouault <even.rouault at spatialys.com>:
>>> Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
>>>> Hi, everybody
>>>>
>>>> we are using the GDAL WMS driver for getting maps from a public WMTS
>>>> service, http://www.basemap.at. Anyway, the resulting image does not
>>>> look smooth. In particular, I would guess that the the image was scaled
>>>> with something like a nearest neighbor algorithm.
>>>> So my question is simply, if I can switch the interpolation method in
>>>> some place.
>>>>
>>>> The XML file, taken from
>>>> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/,
>>>> is:
>>>>
>>>> <GDAL_WMS>
>>>>
>>>>   <Service name="TMS">
>>>>
>>>> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google38
>>>> 57/ ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
>>>>
>>>>   <DataWindow>
>>>>   
>>>>    <UpperLeftX>-20037508.34</UpperLeftX>
>>>>    <UpperLeftY>20037508.34</UpperLeftY>
>>>>    <LowerRightX>20037508.34</LowerRightX>
>>>>    <LowerRightY>-20037508.34</LowerRightY>
>>>>    <TileLevel>18</TileLevel>
>>>>    <TileCountX>1</TileCountX>
>>>>    <TileCountY>1</TileCountY>
>>>>    <YOrigin>top</YOrigin>
>>>>   
>>>>   </DataWindow>
>>>>   <Projection>EPSG:3857</Projection>
>>>>   <BlockSizeX>256</BlockSizeX>
>>>>   <BlockSizeY>256</BlockSizeY>
>>>>   <BandsCount>3</BandsCount>
>>>>   <Cache />
>>>>
>>>> </GDAL_WMS>
>>>>
>>>> The command is:
>>>>
>>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG -outsize
>>>> 250 250 basemap_at.xml basemap_at.jpg
>>> Peter,
>>>
>>> Resampling done by gdal_translate is nearest neighbour, so not always
>>> that great.
>>>
>>> What you can do is select an outsize that is compatible with the source
>>> overviews. In TMS, the ratio between sucessive overviews work with factor
>>> of 2, so you should select an outsize of 10000 / 2^N. The closest is
>>> 10000 / 256 = 390.625 -> 391
>>>
>>> So
>>>
>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
>>> 391 391 basemap_at.xml tmp.tif
>>>
>>> and then:
>>>
>>> gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try different
>>> resampling kernel)
>>> gdal_translate tmp2.tif basemap_at.jpg -of JPEG
>>>
>>> Best regards,
>>>
>>> Even
I've tried to simulate the result of different algorithms to further 
investigate the idea of having a configurable resampling step. The 
original tile is 256 x 256 pixels and I've rescaled it to rescale it to 
200x200 using Gimp.

The original tile was taken from 
http://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/8/89/137.jpg, 
a copy is stored at 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.jpg.

Results
no interpolation, (nearest neighbor?): 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-noint.png
bilinear: 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-linear.png
bicubic: 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-cubic.png
lanczos: 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-lanczos.png

I'd say that the quality of the resampling respects the obove order, 
with lanczos being the best.

Regards,

Peter

-- 
Peter Hopfgartner
R3 GIS
web  : http://www.r3-gis.com


From peter.hopfgartner at r3-gis.com  Fri Sep 19 04:52:37 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 19 Sep 2014 13:52:37 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <1411123917.541c0acddee29@imp.free.fr>
References: <541AFCDB.3020206@r3-gis.com>
	<201409182211.48472.even.rouault@spatialys.com>
	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<201409182230.10093.even.rouault@spatialys.com>
	<541C0313.1090403@r3-gis.com>
	<1411123917.541c0acddee29@imp.free.fr>
Message-ID: <541C1905.2050903@r3-gis.com>

On 09/19/2014 12:51 PM, Even Rouault wrote:
> Selon Peter Hopfgartner <peter.hopfgartner at r3-gis.com>:
>
>> Hello Evan,
>>
>> I've tried this on your suggestion. What happens is, that all labels are
>> now much smaller, even harder to read then before. Basically, it seems
>> that tiles from a higher zoom levels are taken. This would be
>> reasonably, if there would be no labels on the tiles. But in the case of
>> the basemap.at tiles, labels are drawn on the tiles.
> Did you try tweaking OVERSAMPLE_RATIO ? See
> http://mapserver.org/input/raster.html.
>
> Note: the doc is out of sync. The default value is 2.0 (not 2.5).
>
>
Hello Evan,

we tried different values, but the result was rather unimpressive.

Regards,

Peter


From benjamin.preisig at metgis.com  Fri Sep 19 06:30:33 2014
From: benjamin.preisig at metgis.com (Benjamin_P)
Date: Fri, 19 Sep 2014 06:30:33 -0700 (PDT)
Subject: [gdal-dev] gdal_calc.py else not 0
In-Reply-To: <1411036715945-5162590.post@n6.nabble.com>
References: <1411036715945-5162590.post@n6.nabble.com>
Message-ID: <1411133433634-5162914.post@n6.nabble.com>

I am posting a response I got from Graeme B. Bell:

To get "1 if zero, or A" you do:

--calc="(A==0)*1 + (A>0)*A"

Don't make 1 your nodata value if it's actually a data value here

G




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-calc-py-else-not-0-tp5162590p5162914.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Fri Sep 19 08:13:57 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 19 Sep 2014 15:13:57 +0000 (UTC)
Subject: [gdal-dev] Interpolation when using the WMS format
References: <541AFCDB.3020206@r3-gis.com>	<201409182211.48472.even.rouault@spatialys.com>	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>
	<loom.20140918T225531-284@post.gmane.org>
	<541C059D.10104@r3-gis.com>
	<loom.20140919T123959-874@post.gmane.org>
Message-ID: <loom.20140919T170433-532@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> Hi,
> 
> You are naturally right about the tiles and it is good if you will work and
> make GDAL better. I reacted when you wrote "what I am really interested in
> is to use this from MapServer". I believe that your improvements will have
> no effect on what you said you are really interested in but if you have
> strong enough will to make the world of open source GIS better anyway we all
> appreciate you.

Oh sorry, I think I understand now. You are planning to chain tiled services
with Mapserver and put GDAL to read data for it. I thought that you were
planning to use *imagery* from Mapserver WMS as the definitive source but
you meant that you are going to use the *code* from Mapserver.

I believe that MapProxy is already doing what you plan to implement and it
could be worth having a look at it http://mapproxy.org/docs/1.6.0/.

-Jukka-


From j.tosovsky at email.cz  Sat Sep 20 05:20:41 2014
From: j.tosovsky at email.cz (Jan Tosovsky)
Date: Sat, 20 Sep 2014 14:20:41 +0200
Subject: [gdal-dev] gdal2tiles for 16bit data
Message-ID: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>

Dear All,

I am trying to produce GeoTiff tiles from my SRTM based GeoTiff:

gdal2tiles.py -z 6-7 warped.tif D:\tiles-gdal

The problem is that the final data is somehow converted from 16bit into 8bit
so useless for intended further processing.

In the script there are following lines responsible for r/w operations:

data = ds.ReadRaster(rx, ry, rxsize, rysize, wxsize, wysize,
band_list=list(range(1,self.dataBandsCount+1)))
dstile.WriteRaster(wx, wy, wxsize, wysize, data,
band_list=list(range(1,self.dataBandsCount+1)))

Just a naive idea, could this be somehow edited to get the proper result?

I believe there is a solution as all translate->merge->warp steps kept the
16bit intact.

Thanks, Jan

Win7/GDAL 1.10



From gdal at stripfamily.net  Sat Sep 20 07:13:05 2014
From: gdal at stripfamily.net (David Strip)
Date: Sat, 20 Sep 2014 08:13:05 -0600
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>
Message-ID: <541D8B71.4000602@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140920/880f1010/attachment.html>

From j.tosovsky at email.cz  Sat Sep 20 08:02:12 2014
From: j.tosovsky at email.cz (Jan Tosovsky)
Date: Sat, 20 Sep 2014 17:02:12 +0200
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <541D8B71.4000602@stripfamily.net>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>
	<541D8B71.4000602@stripfamily.net>
Message-ID: <006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>

On 2014-09-20 David Strip wrote:
> > On 9/20/2014 6:20 AM, Jan Tosovsky wrote:
> >
> > I am trying to produce GeoTiff tiles from my SRTM based GeoTiff:
> > gdal2tiles.py -z 6-7 warped.tif D:\tiles-gdal
> >
> > The problem is that the final data is somehow converted from
> > 16bit into 8bit so useless for intended further processing.
> > ...
>
> A few lines before the ones you quoted from the script dstile is set to
> a raster in memory:
> 
> dstile = self.mem_drv.Create('', self.tilesize, self.tilesize,
> tilebands)
> 
> This memory dataset driver defaults to a datatype of byte. You need to
> override this to the datatype of your choice. I'm not familiar enough
> with the Python interface to be able to tell you how to do that in
> Python, though.
> 

A good catch, thanks. 

Adding an extra parameter seems to be fixing this:
dstile = self.mem_drv.Create('', self.tilesize, self.tilesize, tilebands,
gdal.GDT_UInt16)
(applied to all 'mem_drv.Create' occurrences)

But the final tif has most likely incorrect metadata as its reading via
jai-imageio fails ArrayIndexOutOfBoundsException: 256

(Despite the Ok result when reading the tiling source image using the same
method)

Any idea?

Thanks, Jan


From jlmcgraw at gmail.com  Sat Sep 20 09:56:11 2014
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Sat, 20 Sep 2014 12:56:11 -0400
Subject: [gdal-dev] Forcing gdal translate to only rotate/scale
Message-ID: <-631370321081207923@unknownmsgid>

Is it possible to force gdal_translate to only rotate/scale an image
when given a list of more than two GCPs?

I'm manually georeferencing maps which are all North-up and I'd like
to supply as many GCPs as possible to average out my errors but if I
provide more than two it will potentially skew the image.

Thanks!
-Jesse

From even.rouault at spatialys.com  Sat Sep 20 12:14:51 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 20 Sep 2014 21:14:51 +0200
Subject: [gdal-dev] Forcing gdal translate to only rotate/scale
In-Reply-To: <-631370321081207923@unknownmsgid>
References: <-631370321081207923@unknownmsgid>
Message-ID: <201409202114.51637.even.rouault@spatialys.com>

Le samedi 20 septembre 2014 18:56:11, Jesse McGraw a ?crit :
> Is it possible to force gdal_translate to only rotate/scale an image
> when given a list of more than two GCPs?
> 
> I'm manually georeferencing maps which are all North-up and I'd like
> to supply as many GCPs as possible to average out my errors but if I
> provide more than two it will potentially skew the image.

Jesse,

GDALGCPsToGeoTransform() would indeed return an affine transform matrix, 
computated with least-squares, but with potential shearing.

If you want only rotation and scaling (I assume uniform scaling), that would 
mean to solve

Xi = X0 + S * cos(theta) * xi - S * sin(theta) * yi
Yi = Y0  + S * sin(theta) * xi + S * cos(theta) * yi

where the unknown variables are X0, Y0, S and theta.

Unfortunately, I think this would be difficult to analytically solve it because 
of the non-linear terms in cos(theta), sin(theta).

Perhaps a pragmatic way would be to use GDALGCPsToGeoTransform()  that would 
return (X0, A, B, Y0, C, D) such that

Xi = X0 + A * xi + B * yi
Yi = Y0 + C * xi + D * yi

And then you can try the following approximation :
S ~= sqrt(A* D - B * C)
theta ~= 0.5 (atan2(-B,A) + atan2(C,D))

(that would be exact if the transform is only scaling and rotation)

You can then recompute X0 and Y0 as the average of
Xi - (  S * cos(theta) * xi - S * sin(theta) * yi ) and
Yi - (  S * sin(theta) * xi + S * cos(theta) * yi )

This will be not the mathematical optimal solution, but hopefully it would not 
be very far from the optimal provided that the amount of shearing is low. If 
you want something more exact, you can use this solution as the initial 
solution for an interative method as described in 
http://en.wikipedia.org/wiki/Non-linear_least_squares

Note: I didn't try, so there might be errors in the formulas. And they are 
based with indexing pixels from the bottom left corner of the image, so some 
sign tweaking will be necessary.

Even

> 
> Thanks!
> -Jesse
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at stripfamily.net  Sat Sep 20 19:08:00 2014
From: gdal at stripfamily.net (David Strip)
Date: Sat, 20 Sep 2014 20:08:00 -0600
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>	<541D8B71.4000602@stripfamily.net>
	<006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>
Message-ID: <541E3300.5010001@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140920/dd7d8c3a/attachment.html>

From Dominik.Schneider at Colorado.EDU  Sun Sep 21 16:45:16 2014
From: Dominik.Schneider at Colorado.EDU (Dominik Schneider)
Date: Sun, 21 Sep 2014 17:45:16 -0600
Subject: [gdal-dev] gdaldem definitions
In-Reply-To: <CAHYDKLaGEYxLzD03PQ_3zN9X+OBL6_FDYrk5qjui2O042CmgSQ@mail.gmail.com>
References: <CAHYDKLaGEYxLzD03PQ_3zN9X+OBL6_FDYrk5qjui2O042CmgSQ@mail.gmail.com>
Message-ID: <CAHYDKLb7q+URpK7J9RwgxpFxPASehdtJRsU8HmLec7KFpUmKHQ@mail.gmail.com>

One correction, that should have said:
TPI "the central pixel is assigned the absolute difference between the
central pixel of a 3x3 window and mean of all pixels within the 3x3 window"

Dominik Schneider
o 303.735.6296 | c 518.956.3978


On Sun, Sep 21, 2014 at 5:36 PM, Dominik Schneider <
dominik.schneider at colorado.edu> wrote:

> Hi -
> I was reviewing the gdaldem documentation and the definitions provided
> seem to differ from those in the cited article (Wilson et al. 2007)
> For example,
> TRI should be "the central pixel is assigned the mean of the absolute
> differences between a central pixel and its surrounding cells"
> TPI "the central pixel is assigned the absolute difference between the
> central pixel of a 3x3 window and all pixels within the 3x3 window"
> roughness "the central pixel is assigned the largest inter-cell
> difference within the 3x3 window surrounding the central pixel"
>
> of course, this is assuming the algorithms are actually those presented in
> the publication at the 3x3 scale as opposed to those written in the
> documentation.
>
> I assume the source code could be checked to resolve this question?
>
> Thanks and my apologies if I misunderstood something.
> Dominik
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140921/17fe32df/attachment.html>

From Dominik.Schneider at Colorado.EDU  Sun Sep 21 16:36:32 2014
From: Dominik.Schneider at Colorado.EDU (Dominik Schneider)
Date: Sun, 21 Sep 2014 17:36:32 -0600
Subject: [gdal-dev] gdaldem definitions
Message-ID: <CAHYDKLaGEYxLzD03PQ_3zN9X+OBL6_FDYrk5qjui2O042CmgSQ@mail.gmail.com>

Hi -
I was reviewing the gdaldem documentation and the definitions provided seem
to differ from those in the cited article (Wilson et al. 2007)
For example,
TRI should be "the central pixel is assigned the mean of the absolute
differences between a central pixel and its surrounding cells"
TPI "the central pixel is assigned the absolute difference between the
central pixel of a 3x3 window and all pixels within the 3x3 window"
roughness "the central pixel is assigned the largest inter-cell difference
within the 3x3 window surrounding the central pixel"

of course, this is assuming the algorithms are actually those presented in
the publication at the 3x3 scale as opposed to those written in the
documentation.

I assume the source code could be checked to resolve this question?

Thanks and my apologies if I misunderstood something.
Dominik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140921/61c09b0f/attachment.html>

From JLiu at eris.ca  Mon Sep 22 09:09:17 2014
From: JLiu at eris.ca (Liu, Jian)
Date: Mon, 22 Sep 2014 12:09:17 -0400
Subject: [gdal-dev] turn off Orthoimage layer for USGS topos
Message-ID: <6EA4EFC234788744A8304EE0D4B8AF986B5BE89EFD@bigtorex01>

Hello list,

I am just wondering if anybody has any experience with this-

I want to convert USGS Topos to Geotiff using GDAL. My command below seems to work well in general:

gdalwarp C:\JIANTestFolder\geo.pdf C:\JIANTestFolder\geo.tif -crop_to_cutline -cutline C:\JIANTestFolder\cutline.csv -overwrite --config GDAL_CACHEMAX 500 -wm 500 --config GDAL_PDF_LAYERS "ALL" --config GDAL_PDF_LAYERS_OFF Images.Orthoimage --config GDAL_PDF_DPI 250 -co "TILED=YES" -co "TFW=YES" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"

Except for some files:
WI_Madison_West_20100723_TM_geo.pdf  (http://ims.er.usgs.gov/gda_services/download?item_id=5222418)
IL_Metropolis_20101018_TM_geo.pdf
LA_Union_Springs_20100930_TM_geo.pdf
ND_Lehr_20110324_TM_geo.pdf
TX_Panola_20100312_TM_geo.pdf
.......
......


For some reason, the Orthoimage layer cannot be turned off for these files. I've noticed these might be the early versions of the new generation USGS topos (for example, the 2013 Madison one works well with the command). Also I found people with similar issue here:
http://gis.stackexchange.com/questions/88988/gdal-conversion-of-us-topo-geopdfs

So I was wondering:

1.       Why this is happening? "Bad" file format in the earlier versions?

2.        For these files, separating orthoimage from others is not doable at all or there might be other workaround?

Thank you in advance for any insight you want to share. I much appreciate any suggestions/comments.

Best regards,
Jian Liu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140922/b7529770/attachment.html>

From j.tosovsky at email.cz  Mon Sep 22 13:18:08 2014
From: j.tosovsky at email.cz (Jan Tosovsky)
Date: Mon, 22 Sep 2014 22:18:08 +0200
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <541E3300.5010001@stripfamily.net>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>	<541D8B71.4000602@stripfamily.net>
	<006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>
	<541E3300.5010001@stripfamily.net>
Message-ID: <010801cfd6a2$54b83c80$fe28b580$@tosovsky@email.cz>

On 2014-09-21 David Strip wrote:
> On 9/20/2014 9:02 AM, Jan Tosovsky wrote:
> 
> > Adding an extra parameter seems to be fixing this:
> > dstile = self.mem_drv.Create('', self.tilesize, self.tilesize,
> > tilebands, gdal.GDT_UInt16)
> > (applied to all 'mem_drv.Create' occurrences)
> >
> > But the final tif has most likely incorrect metadata as its
> > reading via jai-imageio fails: 
> > ArrayIndexOutOfBoundsException: 256
> >
> > (Despite the Ok result when reading the tiling source image
> > using the same method)
> 
> Looking back at the code, the actual output file is created with 
> this line:
> self.out_drv.CreateCopy(tilefilename, dstile, strict=0)

Hmm, I have no idea how to pass this info into CreateCopy:
http://www.gdal.org/classGDALDriver.html

> If this still doesn't fix it, the first thing to do is run gdalinfo
> against one of the tiles and let us know the result.

Thanks for the hint. I've checked the tiling source (correct file):

...
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
...
Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
  NoData Value=0


While my tile is:
...
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
...
Band 1 Block=256x8 Type=UInt16, ColorInterp=Gray
Band 2 Block=256x8 Type=UInt16, ColorInterp=Undefined

I've changed UInt16 to Int16, but in this case there are 'ERROR 1: Buffer
too small' errors when tiles are produced (but they are somehow generated
anyway). It fixes the type to Int16, but there are still some differences.

What exactly is 'Block=256x256' and is 'Block=256x8' in the second case
correct?
Are other differences cosmetic or fatal ones?

Thanks, Jan


From gdal at stripfamily.net  Mon Sep 22 16:29:28 2014
From: gdal at stripfamily.net (David Strip)
Date: Mon, 22 Sep 2014 17:29:28 -0600
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <010801cfd6a2$54b83c80$fe28b580$@tosovsky@email.cz>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>	<541D8B71.4000602@stripfamily.net>	<006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>	<541E3300.5010001@stripfamily.net>
	<010801cfd6a2$54b83c80$fe28b580$@tosovsky@email.cz>
Message-ID: <5420B0D8.2010206@stripfamily.net>

On 9/22/2014 2:18 PM, Jan Tosovsky wrote:
> On 2014-09-21 David Strip wrote:
>> Looking back at the code, the actual output file is created with 
>> this line:
>> self.out_drv.CreateCopy(tilefilename, dstile, strict=0)
> Hmm, I have no idea how to pass this info into CreateCopy:
> http://www.gdal.org/classGDALDriver.html

This was bad advice. CreateCopy uses the same datatype as the raster
it's copying, so it couldn't be the source of your problem (and there's
no way to specify a datatype, since it's just copied).
>
>> If this still doesn't fix it, the first thing to do is run gdalinfo
>> against one of the tiles and let us know the result.
> Thanks for the hint. I've checked the tiling source (correct file):
>
> ...
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> ...
> Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
>   NoData Value=0
>
>
> While my tile is:
> ...
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> ...
> Band 1 Block=256x8 Type=UInt16, ColorInterp=Gray
> Band 2 Block=256x8 Type=UInt16, ColorInterp=Undefined
>
> I've changed UInt16 to Int16, but in this case there are 'ERROR 1: Buffer
> too small' errors when tiles are produced (but they are somehow generated
> anyway). It fixes the type to Int16, but there are still some differences.
I have no idea what this is about. It does appear to be some sort of
numpy error msg from within the routine, but why it occurs and you can
still get output is a mystery to me.
>
> What exactly is 'Block=256x256' and is 'Block=256x8' in the second case
> correct?
The block  describes how the pixels are laid out in the file. The fact
that the input and output block sizes are different is not an error.
Likewise, interleave = band vs. pixel is a matter of internal
organization and shouldn't matter.

> Are other differences cosmetic or fatal ones?
gdal2tiles automatically creates a mask band (band2) for the tile, so
the addition of the second band is not surprising or incorrect. This
also accounts for the removal of the NoData Value
>
> Thanks, Jan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From turgay.osna at netcad.com.tr  Tue Sep 23 05:53:37 2014
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Tue, 23 Sep 2014 05:53:37 -0700 (PDT)
Subject: [gdal-dev] How to draw using bilinear interpolation algorithm with
	Gdal
Message-ID: <1411476817285-5163491.post@n6.nabble.com>

I want to draw a raster file using bilinear interpolation algorithm with
Gdal. How can I do this?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-draw-using-bilinear-interpolation-algorithm-with-Gdal-tp5163491.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From landa.martin at gmail.com  Tue Sep 23 07:27:23 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 23 Sep 2014 16:27:23 +0200
Subject: [gdal-dev] support for Czech Exchange Format for Land Consolidation
Message-ID: <CA+Ei1OdXVntkFOL=OamAPM3BhKg+NAXUmoPR_5sYxap5OfmacQ@mail.gmail.com>

Hi all,

together with colleague of mine we are thinking to add support to GDAL
for the Czech Exchange Format of Land Consolidation. This format is
XML-based, but unfortunately not a GML. Here is a small sample (just
line segments):

  <zs>
    <plins>
      <plin typ="55">
        <lin>
          <segment xsi:type="v:se">
            <c x="1075053.92" y="591813.89" />
            <c x="1075055.75" y="591793.89" />
          </segment>
        </lin>
      </plin>
      <plin typ="55">
        <lin>
          <segment xsi:type="v:se">
            <c x="1075055.75" y="591793.89" />
            <c x="1075059.23" y="591777.01" />
          </segment>
        </lin>
      </plin>
      <plin typ="55">
        <lin>
          <segment xsi:type="v:se">
            <c x="1075059.23" y="591777.01" />
            <c x="1075058.48" y="591773.38" />
          </segment>
        </lin>
      </plin>
</zs>

I wonder if there is an easier way than to write a new GDAL driver
from the scratch (using XML parser similarly to GML driver)...

Thanks in advance for any idea! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at spatialys.com  Tue Sep 23 07:56:34 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Sep 2014 16:56:34 +0200
Subject: [gdal-dev] support for Czech Exchange Format for Land
	Consolidation
In-Reply-To: <CA+Ei1OdXVntkFOL=OamAPM3BhKg+NAXUmoPR_5sYxap5OfmacQ@mail.gmail.com>
References: <CA+Ei1OdXVntkFOL=OamAPM3BhKg+NAXUmoPR_5sYxap5OfmacQ@mail.gmail.com>
Message-ID: <1411484194.54218a223fad3@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi all,
>
> together with colleague of mine we are thinking to add support to GDAL
> for the Czech Exchange Format of Land Consolidation. This format is
> XML-based, but unfortunately not a GML. Here is a small sample (just
> line segments):
>
>   <zs>
>     <plins>
>       <plin typ="55">
>         <lin>
>           <segment xsi:type="v:se">
>             <c x="1075053.92" y="591813.89" />
>             <c x="1075055.75" y="591793.89" />
>           </segment>
>         </lin>
>       </plin>
>       <plin typ="55">
>         <lin>
>           <segment xsi:type="v:se">
>             <c x="1075055.75" y="591793.89" />
>             <c x="1075059.23" y="591777.01" />
>           </segment>
>         </lin>
>       </plin>
>       <plin typ="55">
>         <lin>
>           <segment xsi:type="v:se">
>             <c x="1075059.23" y="591777.01" />
>             <c x="1075058.48" y="591773.38" />
>           </segment>
>         </lin>
>       </plin>
> </zs>
>
> I wonder if there is an easier way than to write a new GDAL driver
> from the scratch (using XML parser similarly to GML driver)...

Martin,

Although I've always felt intimated by its syntax, I imagine you could write a
XSLT document that would transform the above XML in GML. Easier solution is to
do it off-line (i.e. outside GDAL), otherwise if you want something transparent
to the user, we could have a generic XML driver that would try several XSLT
documents and then feed the transformed document to the GML driver. I don't
think we have already a dependency library that handle XSLT however. In
http://en.wikipedia.org/wiki/XSLT, I see libxslt mentionned as a possibility.
One point to check is if the libraries can do the transform in a streaming way
(SAX parsing) or if they must ingest the whole document (DOM), which could be a
limitating factor for big documents.

If you go with a from-the-scratch driver, I would not recommand to go from the
GML one which has become very complicated. GeoRSS or GPX are probably better
starting points.

Even

>
> Thanks in advance for any idea! Martin
>
> --
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep 24 03:23:15 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Sep 2014 12:23:15 +0200
Subject: [gdal-dev] turn off Orthoimage layer for USGS topos
In-Reply-To: <6EA4EFC234788744A8304EE0D4B8AF986B5BE89EFD@bigtorex01>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5BE89EFD@bigtorex01>
Message-ID: <201409241223.15535.even.rouault@spatialys.com>

Jian,

I've analyzed the file and it has indeed a particular structure with its 
OptionalContentGroup and OptionalContentMembershipDirectionary, the PDF 
objects that define layers and their visibility rules. Would be difficult to 
explain here... I believe the file is correct (at least layer turning on/off 
works well in Acrobat), but it seems that poppler (the PDF library used for 
PDF rendering) isn't ready yet to deal with that structure. It might be fixable 
in poppler and could perhaps be workarounded in GDAL code too.

Best regards,

Even

> Hello list,
> 
> I am just wondering if anybody has any experience with this-
> 
> I want to convert USGS Topos to Geotiff using GDAL. My command below seems
> to work well in general:
> 
> gdalwarp C:\JIANTestFolder\geo.pdf C:\JIANTestFolder\geo.tif
> -crop_to_cutline -cutline C:\JIANTestFolder\cutline.csv -overwrite
> --config GDAL_CACHEMAX 500 -wm 500 --config GDAL_PDF_LAYERS "ALL" --config
> GDAL_PDF_LAYERS_OFF Images.Orthoimage --config GDAL_PDF_DPI 250 -co
> "TILED=YES" -co "TFW=YES" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"
> 
> Except for some files:
> WI_Madison_West_20100723_TM_geo.pdf 
> (http://ims.er.usgs.gov/gda_services/download?item_id=5222418)
> IL_Metropolis_20101018_TM_geo.pdf
> LA_Union_Springs_20100930_TM_geo.pdf
> ND_Lehr_20110324_TM_geo.pdf
> TX_Panola_20100312_TM_geo.pdf
> .......
> ......
> 
> 
> For some reason, the Orthoimage layer cannot be turned off for these files.
> I've noticed these might be the early versions of the new generation USGS
> topos (for example, the 2013 Madison one works well with the command).
> Also I found people with similar issue here:
> http://gis.stackexchange.com/questions/88988/gdal-conversion-of-us-topo-ge
> opdfs
> 
> So I was wondering:
> 
> 1.       Why this is happening? "Bad" file format in the earlier versions?
> 
> 2.        For these files, separating orthoimage from others is not doable
> at all or there might be other workaround?
> 
> Thank you in advance for any insight you want to share. I much appreciate
> any suggestions/comments.
> 
> Best regards,
> Jian Liu

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep 24 04:34:19 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Sep 2014 13:34:19 +0200
Subject: [gdal-dev] gdaldem definitions
In-Reply-To: <CAHYDKLb7q+URpK7J9RwgxpFxPASehdtJRsU8HmLec7KFpUmKHQ@mail.gmail.com>
References: <CAHYDKLaGEYxLzD03PQ_3zN9X+OBL6_FDYrk5qjui2O042CmgSQ@mail.gmail.com>
	<CAHYDKLb7q+URpK7J9RwgxpFxPASehdtJRsU8HmLec7KFpUmKHQ@mail.gmail.com>
Message-ID: <201409241334.19588.even.rouault@spatialys.com>

Le lundi 22 septembre 2014 01:45:16, Dominik Schneider a ?crit :
> One correction, that should have said:
> TPI "the central pixel is assigned the absolute difference between the
> central pixel of a 3x3 window and mean of all pixels within the 3x3 window"

Domink,

here's the relevant part of the code. Looks they match the definition although 
I guess there's some ambiguity sometimes if the central pixel must be take 
into account or not. The main difference between the implementation and Wilson 
article might be on TPI where GDAL takes the difference and not the absolute 
difference. AFAIR, the implementation in GDAL is similar to the one in GRASS, 
but there might have been changes during porting.

Pixels are numbered like the following :
[0] [1] [2]
[3] [4] [5]
[6] [7] [8]

so [4] is the central pixel.


/************************************************************************/
/*                         GDALTRIAlg()                                 */
/************************************************************************/

float GDALTRIAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Terrain Ruggedness is average difference in height
    return (fabs(afWin[0]-afWin[4]) +
            fabs(afWin[1]-afWin[4]) +
            fabs(afWin[2]-afWin[4]) +
            fabs(afWin[3]-afWin[4]) +
            fabs(afWin[5]-afWin[4]) +
            fabs(afWin[6]-afWin[4]) +
            fabs(afWin[7]-afWin[4]) +
            fabs(afWin[8]-afWin[4]))/8;
}


/************************************************************************/
/*                         GDALTPIAlg()                                 */
/************************************************************************/

float GDALTPIAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Terrain Position is the difference between
    // The central cell and the mean of the surrounding cells
    return afWin[4] - 
            ((afWin[0]+
              afWin[1]+
              afWin[2]+
              afWin[3]+
              afWin[5]+
              afWin[6]+
              afWin[7]+
              afWin[8])/8);
}

/************************************************************************/
/*                     GDALRoughnessAlg()                               */
/************************************************************************/

float GDALRoughnessAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Roughness is the largest difference
    //  between any two cells

    float pafRoughnessMin = afWin[0];
    float pafRoughnessMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] > pafRoughnessMax)
        {
            pafRoughnessMax=afWin[k];
        }
        if (afWin[k] < pafRoughnessMin)
        {
            pafRoughnessMin=afWin[k];
        }
    }
    return pafRoughnessMax - pafRoughnessMin;
}

Even

> 
> Dominik Schneider
> o 303.735.6296 | c 518.956.3978
> 
> 
> On Sun, Sep 21, 2014 at 5:36 PM, Dominik Schneider <
> 
> dominik.schneider at colorado.edu> wrote:
> > Hi -
> > I was reviewing the gdaldem documentation and the definitions provided
> > seem to differ from those in the cited article (Wilson et al. 2007)
> > For example,
> > TRI should be "the central pixel is assigned the mean of the absolute
> > differences between a central pixel and its surrounding cells"
> > TPI "the central pixel is assigned the absolute difference between the
> > central pixel of a 3x3 window and all pixels within the 3x3 window"
> > roughness "the central pixel is assigned the largest inter-cell
> > difference within the 3x3 window surrounding the central pixel"
> > 
> > of course, this is assuming the algorithms are actually those presented
> > in the publication at the 3x3 scale as opposed to those written in the
> > documentation.
> > 
> > I assume the source code could be checked to resolve this question?
> > 
> > Thanks and my apologies if I misunderstood something.
> > Dominik

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Dominik.Schneider at Colorado.EDU  Wed Sep 24 07:20:53 2014
From: Dominik.Schneider at Colorado.EDU (Dominik Schneider)
Date: Wed, 24 Sep 2014 08:20:53 -0600
Subject: [gdal-dev] gdaldem definitions
In-Reply-To: <201409241334.19588.even.rouault@spatialys.com>
References: <CAHYDKLaGEYxLzD03PQ_3zN9X+OBL6_FDYrk5qjui2O042CmgSQ@mail.gmail.com>
	<CAHYDKLb7q+URpK7J9RwgxpFxPASehdtJRsU8HmLec7KFpUmKHQ@mail.gmail.com>
	<201409241334.19588.even.rouault@spatialys.com>
Message-ID: <CAHYDKLZXdr34EbWnp72q+JpoLyFrrmPnnyQFGX2Mzvg4gb+aWA@mail.gmail.com>

Thanks Even!

Dominik Schneider
o 303.735.6296 | c 518.956.3978


On Wed, Sep 24, 2014 at 5:34 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 22 septembre 2014 01:45:16, Dominik Schneider a ?crit :
> > One correction, that should have said:
> > TPI "the central pixel is assigned the absolute difference between the
> > central pixel of a 3x3 window and mean of all pixels within the 3x3
> window"
>
> Domink,
>
> here's the relevant part of the code. Looks they match the definition
> although
> I guess there's some ambiguity sometimes if the central pixel must be take
> into account or not. The main difference between the implementation and
> Wilson
> article might be on TPI where GDAL takes the difference and not the
> absolute
> difference. AFAIR, the implementation in GDAL is similar to the one in
> GRASS,
> but there might have been changes during porting.
>
> Pixels are numbered like the following :
> [0] [1] [2]
> [3] [4] [5]
> [6] [7] [8]
>
> so [4] is the central pixel.
>
>
> /************************************************************************/
> /*                         GDALTRIAlg()                                 */
> /************************************************************************/
>
> float GDALTRIAlg (float* afWin, float fDstNoDataValue, void* pData)
> {
>     // Terrain Ruggedness is average difference in height
>     return (fabs(afWin[0]-afWin[4]) +
>             fabs(afWin[1]-afWin[4]) +
>             fabs(afWin[2]-afWin[4]) +
>             fabs(afWin[3]-afWin[4]) +
>             fabs(afWin[5]-afWin[4]) +
>             fabs(afWin[6]-afWin[4]) +
>             fabs(afWin[7]-afWin[4]) +
>             fabs(afWin[8]-afWin[4]))/8;
> }
>
>
> /************************************************************************/
> /*                         GDALTPIAlg()                                 */
> /************************************************************************/
>
> float GDALTPIAlg (float* afWin, float fDstNoDataValue, void* pData)
> {
>     // Terrain Position is the difference between
>     // The central cell and the mean of the surrounding cells
>     return afWin[4] -
>             ((afWin[0]+
>               afWin[1]+
>               afWin[2]+
>               afWin[3]+
>               afWin[5]+
>               afWin[6]+
>               afWin[7]+
>               afWin[8])/8);
> }
>
> /************************************************************************/
> /*                     GDALRoughnessAlg()                               */
> /************************************************************************/
>
> float GDALRoughnessAlg (float* afWin, float fDstNoDataValue, void* pData)
> {
>     // Roughness is the largest difference
>     //  between any two cells
>
>     float pafRoughnessMin = afWin[0];
>     float pafRoughnessMax = afWin[0];
>
>     for ( int k = 1; k < 9; k++)
>     {
>         if (afWin[k] > pafRoughnessMax)
>         {
>             pafRoughnessMax=afWin[k];
>         }
>         if (afWin[k] < pafRoughnessMin)
>         {
>             pafRoughnessMin=afWin[k];
>         }
>     }
>     return pafRoughnessMax - pafRoughnessMin;
> }
>
> Even
>
> >
> > Dominik Schneider
> > o 303.735.6296 | c 518.956.3978
> >
> >
> > On Sun, Sep 21, 2014 at 5:36 PM, Dominik Schneider <
> >
> > dominik.schneider at colorado.edu> wrote:
> > > Hi -
> > > I was reviewing the gdaldem documentation and the definitions provided
> > > seem to differ from those in the cited article (Wilson et al. 2007)
> > > For example,
> > > TRI should be "the central pixel is assigned the mean of the absolute
> > > differences between a central pixel and its surrounding cells"
> > > TPI "the central pixel is assigned the absolute difference between the
> > > central pixel of a 3x3 window and all pixels within the 3x3 window"
> > > roughness "the central pixel is assigned the largest inter-cell
> > > difference within the 3x3 window surrounding the central pixel"
> > >
> > > of course, this is assuming the algorithms are actually those presented
> > > in the publication at the 3x3 scale as opposed to those written in the
> > > documentation.
> > >
> > > I assume the source code could be checked to resolve this question?
> > >
> > > Thanks and my apologies if I misunderstood something.
> > > Dominik
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140924/418d93c8/attachment.html>

From even.rouault at spatialys.com  Wed Sep 24 07:34:36 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Sep 2014 16:34:36 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.1 RC1 Available for Review
Message-ID: <201409241634.36208.even.rouault@spatialys.com>

Hi,

As announced, I have prepared a GDAL/OGR 1.11.1 release candidate (many 1's 
eh!). Please review and test.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.xz
  http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.gz
  http://download.osgeo.org/gdal/1.11.1/gdal1111RC1.zip

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.tar.gz
  http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News

I'll call for a vote promoting it to final if I don't hear of any
serious problems in the next few days.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jsimpson at wxtrends.com  Wed Sep 24 12:38:05 2014
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Wed, 24 Sep 2014 14:38:05 -0500
Subject: [gdal-dev] gdalwarp sets nodata value for real data points
Message-ID: <54231D9D.3020907@wxtrends.com>

I've noticed a problem when using gdalwarp to warp netCDF data sets to 
different resolutions.
$ gdalwarp --version
GDAL 1.11.0, released 2014/04/16
It also happens with:
$ gdalwarp --version
GDAL 1.9.2, released 2012/10/08

It makes no difference if I'm warping to a higher, lower or same 
resolution, all the data points from -180 to 90 longitude are set to the 
noData value.
The only points that remain unaffected are those that equal 0.  If I set 
all points that are 0 to 1, then every point <90deg longitude is set to 
the nodata value.

I have seen this before, but specifying the -srcnodata and -dstnodata 
values fixed it in those cases, it seems to have no affect on the 
dataset I'm using now.
One of the versions of the commands I've used, doesn't seem to matter 
which resampling method I use.
$ gdalwarp -r cubicspline -tr 0.1 -0.1 -dstnodata -9999 -srcnodata -9999 
-of netCDF in.nc out.nc

Does anyone have any idea what's going on here?

Input file info (output file info is the same, except (pixel) size changes)

    Driver: netCDF/Network Common Data Format
    Files: in.nc
    Size is 8640, 3432
    Coordinate System is:
    GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AUTHORITY["EPSG","4326"]]
    Origin = (-180.000000000000000,85.000000000114412
    Pixel Size = (0.041666666666700,-0.041666666666700)
    Corner Coordinates:
    Upper Left  (-180.0000000,  85.0000000) (180d 0' 0.00"W, 85d 0' 0.00"N)
    Lower Left  (-180.0000000, -58.0000000) (180d 0' 0.00"W, 58d 0' 0.00"S)
    Upper Right ( 180.0000000,  85.0000000) (180d 0' 0.00"E, 85d 0' 0.00"N)
    Lower Right ( 180.0000000, -58.0000000) (180d 0' 0.00"E, 58d 0' 0.00"S)
    Center      (   0.0000000,  13.5000000) (  0d 0' 0.00"E, 13d30' 0.00"N)
    Band 1 Block=8640x1 Type=Float32, ColorInterp=Undefined
       NoData Value=-9999


Thanks,

Jerl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140924/0246560f/attachment.html>

From stephen.roecker at gmail.com  Wed Sep 24 13:21:05 2014
From: stephen.roecker at gmail.com (Stephen Roecker)
Date: Wed, 24 Sep 2014 16:21:05 -0400
Subject: [gdal-dev] Fwd: gdalwarp -r average bug?
In-Reply-To: <CAGcGWcr6ivbQVrJxRQ0_5YnaKy=TM5yYgzLE4O5LM9BigrKtQw@mail.gmail.com>
References: <CAGcGWcr6ivbQVrJxRQ0_5YnaKy=TM5yYgzLE4O5LM9BigrKtQw@mail.gmail.com>
Message-ID: <CAGcGWcp5gEmvMuv3S0S8CqutLeOmES6B7TReH8f4=VMa1x+pxQ@mail.gmail.com>

Out of curiousity the other day I compared the results of gdalwarp (-r
average) against  the raster R package aggregate(fun=mean) function
for aggregating a raster to a coarser resolution. I was suprized how
different the results of gdalwarp were from raster. When zooming in
and manually averaging the overlapping cells, the results of gdal were
off.

The elevation difference between the raster and gdal aggregated
rasters only averaged 0.66 meters, but had a max of 12 meters. Also
when subtracting the raster and gdal aggregated rasters, the resulting
subtracted layer looked like a hillshade, suggesting the GDAL
aggregated raster was shifted. However the raster and GDAL rasters
overlapped perfectly, so I can only assume the shift occured during
the aggregation process.

Can someone explain gdal's behavior to me? Why the difference, is this
a bug in gdal? gdalwarp claims it's averaging all the overlapping
cells except the NA. That doesn't seem to be the case. FYI I'm using
GDAL 1.10.1

See a reproduceable R example below.

Stephen

library(gdalUtils)
library(raster)

src_dataset <- system.file("external/tahoe_lidar_bareearth.tif",
package="gdalUtils")
test <- raster(x=src_dataset)

writeRaster(test, "test.tif", overwrite=T)
gdal_setInstallation(search_path="C:/ProgramData/QGIS/QGISDufour/bin",
rescan=T, verbose=T)
gdalwarp(srcfile=src_dataset, dstfile="test_gdal.tif", of="GTiff",
r="average", ot="Float32", tr=res(test)*3, overwrite=TRUE,
verbose=TRUE)

aggregate(x=raster(src_dataset), fact=3, filename="test_raster.tif",
format="GTiff", NAflag=-99999,
  progress="text", overwrite=T)

From bishop.dev at gmail.com  Wed Sep 24 14:25:19 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 25 Sep 2014 01:25:19 +0400
Subject: [gdal-dev] GDAL/OGR 1.11.1 RC1 Available for Review
In-Reply-To: <201409241634.36208.even.rouault@spatialys.com>
References: <201409241634.36208.even.rouault@spatialys.com>
Message-ID: <542336BF.4020706@gmail.com>

Hi,

I'm looking the http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News and 
not found the SXF bug, which I fixed (#5647).
I'll be nice to add this fix to 1.11.1 too.

Best regards,
     Dmitry

24.09.2014 18:34, Even Rouault ?????:
> Hi,
>
> As announced, I have prepared a GDAL/OGR 1.11.1 release candidate (many 1's
> eh!). Please review and test.
>
> Peek up an archive among the following ones (by ascending size):
>
>    http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.xz
>    http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.gz
>    http://download.osgeo.org/gdal/1.11.1/gdal1111RC1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
>    http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.tar.gz
>    http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.zip
>
> The NEWS file is here :
>
>    http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News
>
> I'll call for a vote promoting it to final if I don't hear of any
> serious problems in the next few days.
>
> Best regards,
>
> Even
>


From even.rouault at spatialys.com  Wed Sep 24 14:31:35 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Sep 2014 23:31:35 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.1 RC1 Available for Review
In-Reply-To: <542336BF.4020706@gmail.com>
References: <201409241634.36208.even.rouault@spatialys.com>
	<542336BF.4020706@gmail.com>
Message-ID: <201409242331.36052.even.rouault@spatialys.com>

Le mercredi 24 septembre 2014 23:25:19, Dmitriy Baryshnikov a ?crit :
> Hi,
> 
> I'm looking the http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News and
> not found the SXF bug, which I fixed (#5647).
> I'll be nice to add this fix to 1.11.1 too.

Dmitry,

Yes, it is not mentionned since it is was fixed in trunk only, and not in 1.11 
branch. You can backport it now if you wish, so that it is queued for next 
stable release (but not sure it will be worth issuing a RC2 just for that if 
there are no other issues reported).

Even

> 
> Best regards,
>      Dmitry
> 
> 24.09.2014 18:34, Even Rouault ?????:
> > Hi,
> > 
> > As announced, I have prepared a GDAL/OGR 1.11.1 release candidate (many
> > 1's eh!). Please review and test.
> > 
> > Peek up an archive among the following ones (by ascending size):
> >    http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.xz
> >    http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.gz
> >    http://download.osgeo.org/gdal/1.11.1/gdal1111RC1.zip
> > 
> > A snapshot of the gdalautotest suite is also available :
> >    http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.tar.gz
> >    http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.zip
> > 
> > The NEWS file is here :
> >    http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News
> > 
> > I'll call for a vote promoting it to final if I don't hear of any
> > serious problems in the next few days.
> > 
> > Best regards,
> > 
> > Even
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Thu Sep 25 07:10:49 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 25 Sep 2014 08:10:49 -0600
Subject: [gdal-dev] Fwd: gdalwarp -r average bug?
In-Reply-To: <CAGcGWcp5gEmvMuv3S0S8CqutLeOmES6B7TReH8f4=VMa1x+pxQ@mail.gmail.com>
References: <CAGcGWcr6ivbQVrJxRQ0_5YnaKy=TM5yYgzLE4O5LM9BigrKtQw@mail.gmail.com>
	<CAGcGWcp5gEmvMuv3S0S8CqutLeOmES6B7TReH8f4=VMa1x+pxQ@mail.gmail.com>
Message-ID: <CAJ0mEz18eHgREriJHfNm+RzPMWviJ7XEH1fgh4dtT9EXi=etgA@mail.gmail.com>

Stephen,

On Wed, Sep 24, 2014 at 2:21 PM, Stephen Roecker
<stephen.roecker at gmail.com> wrote:
> Out of curiousity the other day I compared the results of gdalwarp (-r
> average) against  the raster R package aggregate(fun=mean) function
> for aggregating a raster to a coarser resolution. I was suprized how
> different the results of gdalwarp were from raster. When zooming in
> and manually averaging the overlapping cells, the results of gdal were
> off.
>
> The elevation difference between the raster and gdal aggregated
> rasters only averaged 0.66 meters, but had a max of 12 meters. Also
> when subtracting the raster and gdal aggregated rasters, the resulting
> subtracted layer looked like a hillshade, suggesting the GDAL
> aggregated raster was shifted. However the raster and GDAL rasters
> overlapped perfectly, so I can only assume the shift occured during
> the aggregation process.
>
> Can someone explain gdal's behavior to me? Why the difference, is this
> a bug in gdal? gdalwarp claims it's averaging all the overlapping
> cells except the NA. That doesn't seem to be the case. FYI I'm using
> GDAL 1.10.1
>
> See a reproduceable R example below.
>
> Stephen
>
> library(gdalUtils)
> library(raster)
>
> src_dataset <- system.file("external/tahoe_lidar_bareearth.tif",
> package="gdalUtils")
> test <- raster(x=src_dataset)
>
> writeRaster(test, "test.tif", overwrite=T)
> gdal_setInstallation(search_path="C:/ProgramData/QGIS/QGISDufour/bin",
> rescan=T, verbose=T)
> gdalwarp(srcfile=src_dataset, dstfile="test_gdal.tif", of="GTiff",
> r="average", ot="Float32", tr=res(test)*3, overwrite=TRUE,
> verbose=TRUE)
>
> aggregate(x=raster(src_dataset), fact=3, filename="test_raster.tif",
> format="GTiff", NAflag=-99999,
>   progress="text", overwrite=T)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Without looking too far into it, it seems similar to:

http://trac.osgeo.org/gdal/ticket/5311

-- 
Kyle

From kyle at pobox.com  Thu Sep 25 07:13:08 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 25 Sep 2014 08:13:08 -0600
Subject: [gdal-dev] Fwd: gdalwarp -r average bug?
In-Reply-To: <CAJ0mEz18eHgREriJHfNm+RzPMWviJ7XEH1fgh4dtT9EXi=etgA@mail.gmail.com>
References: <CAGcGWcr6ivbQVrJxRQ0_5YnaKy=TM5yYgzLE4O5LM9BigrKtQw@mail.gmail.com>
	<CAGcGWcp5gEmvMuv3S0S8CqutLeOmES6B7TReH8f4=VMa1x+pxQ@mail.gmail.com>
	<CAJ0mEz18eHgREriJHfNm+RzPMWviJ7XEH1fgh4dtT9EXi=etgA@mail.gmail.com>
Message-ID: <CAJ0mEz1TYcohAjzrzY=rF-kG4V_LqqqGjQ9VDYuuWxoW2S7Whg@mail.gmail.com>

On Thu, Sep 25, 2014 at 8:10 AM, Kyle Shannon <kyle at pobox.com> wrote:
> Stephen,
>
> On Wed, Sep 24, 2014 at 2:21 PM, Stephen Roecker
> <stephen.roecker at gmail.com> wrote:
>> Out of curiousity the other day I compared the results of gdalwarp (-r
>> average) against  the raster R package aggregate(fun=mean) function
>> for aggregating a raster to a coarser resolution. I was suprized how
>> different the results of gdalwarp were from raster. When zooming in
>> and manually averaging the overlapping cells, the results of gdal were
>> off.
>>
>> The elevation difference between the raster and gdal aggregated
>> rasters only averaged 0.66 meters, but had a max of 12 meters. Also
>> when subtracting the raster and gdal aggregated rasters, the resulting
>> subtracted layer looked like a hillshade, suggesting the GDAL
>> aggregated raster was shifted. However the raster and GDAL rasters
>> overlapped perfectly, so I can only assume the shift occured during
>> the aggregation process.
>>
>> Can someone explain gdal's behavior to me? Why the difference, is this
>> a bug in gdal? gdalwarp claims it's averaging all the overlapping
>> cells except the NA. That doesn't seem to be the case. FYI I'm using
>> GDAL 1.10.1
>>
>> See a reproduceable R example below.
>>
>> Stephen
>>
>> library(gdalUtils)
>> library(raster)
>>
>> src_dataset <- system.file("external/tahoe_lidar_bareearth.tif",
>> package="gdalUtils")
>> test <- raster(x=src_dataset)
>>
>> writeRaster(test, "test.tif", overwrite=T)
>> gdal_setInstallation(search_path="C:/ProgramData/QGIS/QGISDufour/bin",
>> rescan=T, verbose=T)
>> gdalwarp(srcfile=src_dataset, dstfile="test_gdal.tif", of="GTiff",
>> r="average", ot="Float32", tr=res(test)*3, overwrite=TRUE,
>> verbose=TRUE)
>>
>> aggregate(x=raster(src_dataset), fact=3, filename="test_raster.tif",
>> format="GTiff", NAflag=-99999,
>>   progress="text", overwrite=T)
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Without looking too far into it, it seems similar to:
>
> http://trac.osgeo.org/gdal/ticket/5311
>
> --
> Kyle

Apologies, it does appear to be different, my mistake.

-- 
Kyle

From daniel.teske at web.de  Fri Sep 26 04:51:03 2014
From: daniel.teske at web.de (teeschke)
Date: Fri, 26 Sep 2014 04:51:03 -0700 (PDT)
Subject: [gdal-dev] projection of (maybe broken) grib file
Message-ID: <1411732263227-5164353.post@n6.nabble.com>

Hi list

We have a grib file, that gets cropped after a projection from WGS84 to
WebMercator. The issue occurs in UMN Mapserver and QGIS. ArcMap can project
the grib file correctly - so I think its a GDAL thing.

<http://osgeo-org.1560.x6.nabble.com/file/n5164353/grib_projection_cutting.jpg> 

Extracting the metadata with gdalinfo points out that the original corner
coordinates are shifted a little bit.

$ gdalinfo 2014-09-28T00\:00Z.grb
Driver: GRIB/GRIdded Binary (.grb)
Files: 2014-09-28T00:00Z.grb
Size is 1440, 721
Coordinate System is:
GEOGCS["Coordinate System imported from GRIB file",
    DATUM["unknown",
        SPHEROID["Sphere",6367470,0]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-179.875000000000000,90.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Corner Coordinates:
Upper Left  (-179.8750000,  90.1250000) (179d52'30.00"W, 90d 7'30.00"N)
Lower Left  (-179.8750000, -90.1250000) (179d52'30.00"W, 90d 7'30.00"S)
Upper Right ( 180.1250000,  90.1250000) (180d 7'30.00"E, 90d 7'30.00"N)
Lower Right ( 180.1250000, -90.1250000) (180d 7'30.00"E, 90d 7'30.00"S)
Center      (   0.1250000,   0.0000000) (  0d 7'30.00"E,  0d 0' 0.01"N)
Band 1 Block=1440x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC (Ground or water surface)
  Metadata:
    GRIB_COMMENT=Total precipitation [m]
    GRIB_ELEMENT=TP
    GRIB_FORECAST_SECONDS=172800 sec
    GRIB_REF_TIME=  1411689600 sec UTC
    GRIB_SHORT_NAME=0-SFC
    GRIB_UNIT=[m]
    GRIB_VALID_TIME=  1411862400 sec UTC

A converted GTiff from has the same behavior.
$ gdal_translate ./2014-09-28T00\:00Z.grb -of GTiff -a_srs EPSG:4326
translated_tiff.tif

Thanks and best regards
teeschke



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/projection-of-maybe-broken-grib-file-tp5164353.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Fri Sep 26 07:08:39 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 26 Sep 2014 16:08:39 +0200
Subject: [gdal-dev] projection of (maybe broken) grib file
In-Reply-To: <1411732263227-5164353.post@n6.nabble.com>
References: <1411732263227-5164353.post@n6.nabble.com>
Message-ID: <m03s3b$gi$1@ger.gmane.org>

Am 26.09.2014 13:51, schrieb teeschke:
> Hi list
>
> We have a grib file, that gets cropped after a projection from WGS84 to
> WebMercator. The issue occurs in UMN Mapserver and QGIS. ArcMap can project
> the grib file correctly - so I think its a GDAL thing.
>
> <http://osgeo-org.1560.x6.nabble.com/file/n5164353/grib_projection_cutting.jpg>
>
> Extracting the metadata with gdalinfo points out that the original corner
> coordinates are shifted a little bit.
>
> $ gdalinfo 2014-09-28T00\:00Z.grb
> Driver: GRIB/GRIdded Binary (.grb)
> Files: 2014-09-28T00:00Z.grb
> Size is 1440, 721
> Coordinate System is:
> GEOGCS["Coordinate System imported from GRIB file",
>      DATUM["unknown",
>          SPHEROID["Sphere",6367470,0]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433]]
> Origin = (-179.875000000000000,90.125000000000000)
> Pixel Size = (0.250000000000000,-0.250000000000000)
> Corner Coordinates:
> Upper Left  (-179.8750000,  90.1250000) (179d52'30.00"W, 90d 7'30.00"N)
> Lower Left  (-179.8750000, -90.1250000) (179d52'30.00"W, 90d 7'30.00"S)
> Upper Right ( 180.1250000,  90.1250000) (180d 7'30.00"E, 90d 7'30.00"N)
> Lower Right ( 180.1250000, -90.1250000) (180d 7'30.00"E, 90d 7'30.00"S)
> Center      (   0.1250000,   0.0000000) (  0d 7'30.00"E,  0d 0' 0.01"N)

90? N can not be projected to Web Mercator (it would be in infinity), so 
+/-90.125 can also not be reprojected correctly.

Cut your file to +/-179.9/89.9 degrees, then try again the reprojection 
with gdalwarp.

HTH,
Andr? Joost


From klonuo at gmail.com  Fri Sep 26 08:09:28 2014
From: klonuo at gmail.com (klo uo)
Date: Fri, 26 Sep 2014 17:09:28 +0200
Subject: [gdal-dev] netCDF: use spatial variables instead dummy dimensions
Message-ID: <CAA-8Ld-U4RPY6AFDgLAw=DzFS3iLWqL9Jnq-+qTk60AnspMNtw@mail.gmail.com>

Hi,

I want to convert netCDF dataset to GeoTiff with gdal_translate.
My netCDF dataset contains data in projected coordinates, so (x, y) grid
dimensions are just dummy enumerated grid values. However dataset contains
(lon, lat) spatial mesh variables, matching each (x, y) pair to be able to
provide valid spatial content.

When I use gdal_translate, resulting GeoTiff file is with invalid spatial
dimension, as expected as probably netCDF driver reads these (x, y) values
and translates them to geographic extent in resulting GeoTiff file.

Is there any way I can instruct gdal_translate to read spatial dimensions
from spatial variables instead these dummy dimensions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140926/73fc04f6/attachment.html>

From peter.hopfgartner at r3-gis.com  Fri Sep 26 09:14:02 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 26 Sep 2014 18:14:02 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <541C188F.6040206@r3-gis.com>
References: <541AFCDB.3020206@r3-gis.com>	<201409182211.48472.even.rouault@spatialys.com>	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>	<201409182230.10093.even.rouault@spatialys.com>
	<541C188F.6040206@r3-gis.com>
Message-ID: <542590CA.6060704@r3-gis.com>

On 09/19/2014 01:50 PM, Peter Hopfgartner wrote:
> On 09/18/2014 10:30 PM, Even Rouault wrote:
>> Le jeudi 18 septembre 2014 22:23:06, Peter Hopfgartner a ?crit :
>>> Salut Evan,
>>>
>>> thanks for you recipe. Unfortunately, what I am really interested in 
>>> is to
>>> use this from MapServer. Could you give me a pointer in the source 
>>> where
>>> the resampling takes place?
>> In gcore/rasterio.cpp : GDALRasterBand::IRasterIO(). I must warn you 
>> : quite
>> tricky code
>>
>> But perhaps you don't need code change. In MapServer did you try to 
>> define
>> PROCESSING "RESAMPLE=BILINEAR" ?
>>
>>> Thanks,
>>>
>>> Peter
>>>
>>> Am 18.09.2014 um 22:11 schrieb Even Rouault 
>>> <even.rouault at spatialys.com>:
>>>> Le jeudi 18 septembre 2014 17:40:11, Peter Hopfgartner a ?crit :
>>>>> Hi, everybody
>>>>>
>>>>> we are using the GDAL WMS driver for getting maps from a public WMTS
>>>>> service, http://www.basemap.at. Anyway, the resulting image does not
>>>>> look smooth. In particular, I would guess that the the image was 
>>>>> scaled
>>>>> with something like a nearest neighbor algorithm.
>>>>> So my question is simply, if I can switch the interpolation method in
>>>>> some place.
>>>>>
>>>>> The XML file, taken from
>>>>> http://gisforge.wordpress.com/2012/11/06/basemap-at-wmts-layer-in-qgis/, 
>>>>>
>>>>> is:
>>>>>
>>>>> <GDAL_WMS>
>>>>>
>>>>>   <Service name="TMS">
>>>>>
>>>>> <ServerUrl>http://maps.wien.gv.at/basemap/geolandbasemap/normal/google38 
>>>>>
>>>>> 57/ ${z}/${y}/${x}.jpeg</ServerUrl> </Service>
>>>>>
>>>>>   <DataWindow>
>>>>>      <UpperLeftX>-20037508.34</UpperLeftX>
>>>>>    <UpperLeftY>20037508.34</UpperLeftY>
>>>>>    <LowerRightX>20037508.34</LowerRightX>
>>>>>    <LowerRightY>-20037508.34</LowerRightY>
>>>>>    <TileLevel>18</TileLevel>
>>>>>    <TileCountX>1</TileCountX>
>>>>>    <TileCountY>1</TileCountY>
>>>>>    <YOrigin>top</YOrigin>
>>>>>     </DataWindow>
>>>>>   <Projection>EPSG:3857</Projection>
>>>>>   <BlockSizeX>256</BlockSizeX>
>>>>>   <BlockSizeY>256</BlockSizeY>
>>>>>   <BandsCount>3</BandsCount>
>>>>>   <Cache />
>>>>>
>>>>> </GDAL_WMS>
>>>>>
>>>>> The command is:
>>>>>
>>>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -of JPEG 
>>>>> -outsize
>>>>> 250 250 basemap_at.xml basemap_at.jpg
>>>> Peter,
>>>>
>>>> Resampling done by gdal_translate is nearest neighbour, so not always
>>>> that great.
>>>>
>>>> What you can do is select an outsize that is compatible with the 
>>>> source
>>>> overviews. In TMS, the ratio between sucessive overviews work with 
>>>> factor
>>>> of 2, so you should select an outsize of 10000 / 2^N. The closest is
>>>> 10000 / 256 = 390.625 -> 391
>>>>
>>>> So
>>>>
>>>> gdal_translate -srcwin 35500000 23500000 100000 100000 -outsize
>>>> 391 391 basemap_at.xml tmp.tif
>>>>
>>>> and then:
>>>>
>>>> gdalwarp tmp.tif tmp2.tif -r lanczos -ts 250 250 (you can try 
>>>> different
>>>> resampling kernel)
>>>> gdal_translate tmp2.tif basemap_at.jpg -of JPEG
>>>>
>>>> Best regards,
>>>>
>>>> Even
> I've tried to simulate the result of different algorithms to further 
> investigate the idea of having a configurable resampling step. The 
> original tile is 256 x 256 pixels and I've rescaled it to rescale it 
> to 200x200 using Gimp.
>
> The original tile was taken from 
> http://maps.wien.gv.at/basemap/geolandbasemap/normal/google3857/8/89/137.jpg, 
> a copy is stored at 
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.jpg.
>
> Results
> no interpolation, (nearest neighbor?): 
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-noint.png
> bilinear: 
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-linear.png
> bicubic: 
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-cubic.png
> lanczos: 
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/137.resampled_to_200.px-lanczos.png
>
> I'd say that the quality of the resampling respects the obove order, 
> with lanczos being the best.
>
> Regards,
>
> Peter
>
I finally took the time to have a better look at this.

The attached patch is only for our special case, where data arrives in 8 
bit bands  and is certainly far from being decent (I've written my last 
C++ code approx. 15 years ago). Anyway, the image quality seems indeed 
to improve sensibly.

I used the current SVN version as a base for the development.

Applying the patch I get from 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2000-quasiorig.jpg 
to this 
https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2000.bilinear.jpg 
.

Anyway, the execution time approximatly doubles (on my 2011 notebook it 
passes from  ~ 1.8 s to ~ 3.4 s), which in our case is not really an 
issue, but probaly for almost everybody else.

The command line is, starting from the compilation dir:

apps/gdal_translate -srcwin 35555000 23538000 2500 2500 -of JPEG 
-outsize 2000 2000 basemap.xml basemap.2000x2000.bilinear.jpg .

Any comment is highly appreciated.

Regards and a nice weekend,

Peter

-- 
Peter Hopfgartner
R3 GIS
web  : http://www.r3-gis.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: rasterio.bilinear.patch
Type: text/x-patch
Size: 4284 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140926/8a648293/attachment.bin>

From even.rouault at spatialys.com  Fri Sep 26 10:22:59 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Sep 2014 19:22:59 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <542590CA.6060704@r3-gis.com>
References: <541AFCDB.3020206@r3-gis.com> <541C188F.6040206@r3-gis.com>
	<542590CA.6060704@r3-gis.com>
Message-ID: <201409261922.59811.even.rouault@spatialys.com>

Peter,

This is an interesting proof of concept.

I have several notes :
- not sure about your naming conventions. For me your 'top' and 'bottom' must 
be inverted. In imaging convention, the y of top is < to the y of bottom
- the formula is only appropriate for a resampling up to a factor of 2
- you might have edge effects at block border since you clamp to the current 
block. For example, this could be problematic when operating on blocks with a 
1-line height.
- something ready for upstreaming would probably involve adding a new argument 
to RasterIO to specify the resampling method, and as you noted, generalizing 
to other data types.
- taking into nodata, alpha channel, etc.. would be necessary

Would probably be interesting to think if we cannot share code with overview 
computation. But not immediately trivial to do so.

Best regards,

Even

> 
> I finally took the time to have a better look at this.
> 
> The attached patch is only for our special case, where data arrives in 8
> bit bands  and is certainly far from being decent (I've written my last
> C++ code approx. 15 years ago). Anyway, the image quality seems indeed
> to improve sensibly.
> 
> I used the current SVN version as a base for the development.
> 
> Applying the patch I get from
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2
> 000-quasiorig.jpg to this
> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2
> 000.bilinear.jpg .
> 
> Anyway, the execution time approximatly doubles (on my 2011 notebook it
> passes from  ~ 1.8 s to ~ 3.4 s), which in our case is not really an
> issue, but probaly for almost everybody else.
> 
> The command line is, starting from the compilation dir:
> 
> apps/gdal_translate -srcwin 35555000 23538000 2500 2500 -of JPEG
> -outsize 2000 2000 basemap.xml basemap.2000x2000.bilinear.jpg .
> 
> Any comment is highly appreciated.
> 
> Regards and a nice weekend,
> 
> Peter

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From marcelblom at xs4all.nl  Fri Sep 26 10:41:01 2014
From: marcelblom at xs4all.nl (Marcel Blom)
Date: Fri, 26 Sep 2014 19:41:01 +0200
Subject: [gdal-dev] GDALwarp creates some darker images after update from
 1.7.0b2 to GDAL 1.11.0
Message-ID: <5425A52D.8020406@xs4all.nl>

Because of some problems with GDAL 1.7.0b2 in FWTools 2.4.7 I upgraded 
to GDAL 1.11.0 in the latest OSGeo4W distro. This solved some issues I 
had, but introduced a really annoying one and what ever I do I can't get 
rid off it. I hope someone can help me out. If BTW I try to go back to 
GDAL 1.7.0b2 with FWTools the problem is still there, so I guess it's a 
(new) driver/DLL update issue.

My problem looks exactly like this post... GDAL TIF to JPG Creates Dark 
Image 
<http://gis.stackexchange.com/questions/101393/gdal-tif-to-jpg-creates-dark-image> 
Only that I don't use JPG. And I use GDALwarp. And not all target files 
have the problem. Most target files look OK. And I only see it with 
Aerial Photo like sources. With vector like raster sources I don't see 
the problem. So when reading the other post I thought it had to do with 
a mask/alpha channel or something, but I can't see this in the source. 
And whatever option I test, the problem remains.

I already created a post here : 
http://gis.stackexchange.com/questions/114526/gdalwarp-creates-darker-target-image-sometimes
But I had no final answer... And I think this is the right place to ask.

Here are two screenshots. One from the source (Tiff) and one from a 
intersection of four target files (Tiff or BMP)

Section of Source : 
https://www.dropbox.com/s/gy2tu0h8dufv41o/Source.jpg?dl=0

Intersection of four Target files : 
https://www.dropbox.com/s/av7mdj8ivx3zgsl/Target.jpg?dl=0

The source I use is 8bit/channel RGB JPEG. And the merged Tiff is 
8bit/channel RGB.
I tested almost all options in multiple actions in my workflow. So 
cutting the source with gdaltranslate in smaller parts for editing. 
Building a VRT with gdalbuildvrt and cutting into final parts with 
gdalwarp which will show the problem.

I started with the -b 1 -b 2 -b 3 option in my gdalbuildvrt action, but 
GDAL crashes here... (?) I also tested other options that might have 
something to do with the problem... -nomd -co ALPHA=YES/No -co 
PHOTOMETRIC=RGBA/RGB -setci, you name it...

I checked good and bad source and target areas with gdalcompare and 
gdalinfo, but I saw nothing strange...

I'm now thinking of resetting GDAL driver settings if that is possible..(?)

Has anyone seen this before? Can anyone give me a hint..?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140926/caf5b226/attachment-0001.html>

From even.rouault at spatialys.com  Fri Sep 26 10:46:58 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Sep 2014 19:46:58 +0200
Subject: [gdal-dev] GDALwarp creates some darker images after update
	from 1.7.0b2 to GDAL 1.11.0
In-Reply-To: <5425A52D.8020406@xs4all.nl>
References: <5425A52D.8020406@xs4all.nl>
Message-ID: <201409261946.58340.even.rouault@spatialys.com>

Marcel,

The best would be that you prepare something that others can try in a fully 
reproducable way, i.e. provide source(s) image(s) and all the exact command 
lines you use.

Even

Le vendredi 26 septembre 2014 19:41:01, Marcel Blom a ?crit :
> Because of some problems with GDAL 1.7.0b2 in FWTools 2.4.7 I upgraded
> to GDAL 1.11.0 in the latest OSGeo4W distro. This solved some issues I
> had, but introduced a really annoying one and what ever I do I can't get
> rid off it. I hope someone can help me out. If BTW I try to go back to
> GDAL 1.7.0b2 with FWTools the problem is still there, so I guess it's a
> (new) driver/DLL update issue.
> 
> My problem looks exactly like this post... GDAL TIF to JPG Creates Dark
> Image
> <http://gis.stackexchange.com/questions/101393/gdal-tif-to-jpg-creates-dark
> -image> Only that I don't use JPG. And I use GDALwarp. And not all target
> files have the problem. Most target files look OK. And I only see it with
> Aerial Photo like sources. With vector like raster sources I don't see the
> problem. So when reading the other post I thought it had to do with a
> mask/alpha channel or something, but I can't see this in the source. And
> whatever option I test, the problem remains.
> 
> I already created a post here :
> http://gis.stackexchange.com/questions/114526/gdalwarp-creates-darker-targe
> t-image-sometimes But I had no final answer... And I think this is the
> right place to ask.
> 
> Here are two screenshots. One from the source (Tiff) and one from a
> intersection of four target files (Tiff or BMP)
> 
> Section of Source :
> https://www.dropbox.com/s/gy2tu0h8dufv41o/Source.jpg?dl=0
> 
> Intersection of four Target files :
> https://www.dropbox.com/s/av7mdj8ivx3zgsl/Target.jpg?dl=0
> 
> The source I use is 8bit/channel RGB JPEG. And the merged Tiff is
> 8bit/channel RGB.
> I tested almost all options in multiple actions in my workflow. So
> cutting the source with gdaltranslate in smaller parts for editing.
> Building a VRT with gdalbuildvrt and cutting into final parts with
> gdalwarp which will show the problem.
> 
> I started with the -b 1 -b 2 -b 3 option in my gdalbuildvrt action, but
> GDAL crashes here... (?) I also tested other options that might have
> something to do with the problem... -nomd -co ALPHA=YES/No -co
> PHOTOMETRIC=RGBA/RGB -setci, you name it...
> 
> I checked good and bad source and target areas with gdalcompare and
> gdalinfo, but I saw nothing strange...
> 
> I'm now thinking of resetting GDAL driver settings if that is possible..(?)
> 
> Has anyone seen this before? Can anyone give me a hint..?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peter.hopfgartner at r3-gis.com  Fri Sep 26 11:52:32 2014
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri, 26 Sep 2014 20:52:32 +0200
Subject: [gdal-dev] Interpolation when using the WMS format
In-Reply-To: <201409261922.59811.even.rouault@spatialys.com>
References: <541AFCDB.3020206@r3-gis.com> <541C188F.6040206@r3-gis.com>
	<542590CA.6060704@r3-gis.com>
	<201409261922.59811.even.rouault@spatialys.com>
Message-ID: <7E9A9034-2D4B-4222-9A7F-88F3A32500A6@r3-gis.com>


Am 26.09.2014 um 19:22 schrieb Even Rouault <even.rouault at spatialys.com>:

> Peter,
> 
Hi Even,

> This is an interesting proof of concept.
> 
> I have several notes :
> - not sure about your naming conventions. For me your 'top' and 'bottom' must 
> be inverted. In imaging convention, the y of top is < to the y of bottom
> - the formula is only appropriate for a resampling up to a factor of 2
> - you might have edge effects at block border since you clamp to the current 
> block. For example, this could be problematic when operating on blocks with a 
> 1-line height.
> - something ready for upstreaming would probably involve adding a new argument 
> to RasterIO to specify the resampling method, and as you noted, generalizing 
> to other data types.
> - taking into nodata, alpha channel, etc.. would be necessary
> 
> Would probably be interesting to think if we cannot share code with overview 
> computation. But not immediately trivial to do so.
> 
I agree with all of the above points. Most choices were made to keep the change simple.

> Best regards,
> 
> Even
> 
Regards,

Peter

>> 
>> I finally took the time to have a better look at this.
>> 
>> The attached patch is only for our special case, where data arrives in 8
>> bit bands  and is certainly far from being decent (I've written my last
>> C++ code approx. 15 years ago). Anyway, the image quality seems indeed
>> to improve sensibly.
>> 
>> I used the current SVN version as a base for the development.
>> 
>> Applying the patch I get from
>> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2
>> 000-quasiorig.jpg to this
>> https://dl.dropboxusercontent.com/u/4935329/resampling_tests/basemap.2000x2
>> 000.bilinear.jpg .
>> 
>> Anyway, the execution time approximatly doubles (on my 2011 notebook it
>> passes from  ~ 1.8 s to ~ 3.4 s), which in our case is not really an
>> issue, but probaly for almost everybody else.
>> 
>> The command line is, starting from the compilation dir:
>> 
>> apps/gdal_translate -srcwin 35555000 23538000 2500 2500 -of JPEG
>> -outsize 2000 2000 basemap.xml basemap.2000x2000.bilinear.jpg .
>> 
>> Any comment is highly appreciated.
>> 
>> Regards and a nice weekend,
>> 
>> Peter
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From ghostility at gmail.com  Sat Sep 27 08:45:13 2014
From: ghostility at gmail.com (Vladan Divljak)
Date: Sat, 27 Sep 2014 17:45:13 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
Message-ID: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>

Hi,

I want migrate data between PostGIS enabled Postgres database and SQL
Server spatial database. ogr2ogr seems like easiest possible way, but there
is a catch with this ticket: http://trac.osgeo.org/gdal/ticket/5239

I tried it nonetheless, but as expected Postgres tables with UTF-8 strings
show garbage in SQL Server.

I don't see any switch in org2ogr to be able to dump sql queries that
ogr2ogr executes in migration process. Is there any? That way I can
search/replace to get correct sql queries for the task.


Thanks,
Vladan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140927/2ed1415d/attachment.html>

From kyle at pobox.com  Sat Sep 27 10:48:37 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Sat, 27 Sep 2014 11:48:37 -0600
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
Message-ID: <CAJ0mEz0W1LuLmrHcOj+c=tSckff0H1VW7_FWU3YaLfomYm8uXg@mail.gmail.com>

Vladan,

On Sat, Sep 27, 2014 at 9:45 AM, Vladan Divljak <ghostility at gmail.com> wrote:
> Hi,
>
> I want migrate data between PostGIS enabled Postgres database and SQL Server
> spatial database. ogr2ogr seems like easiest possible way, but there is a
> catch with this ticket: http://trac.osgeo.org/gdal/ticket/5239
>
> I tried it nonetheless, but as expected Postgres tables with UTF-8 strings
> show garbage in SQL Server.
>
> I don't see any switch in org2ogr to be able to dump sql queries that
> ogr2ogr executes in migration process. Is there any? That way I can
> search/replace to get correct sql queries for the task.

Have you looked at the pgdump driver for ogr:

http://gdal.org/drv_pgdump.html

It may suit your needs.

>
>
> Thanks,
> Vladan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From ghostility at gmail.com  Sat Sep 27 12:08:46 2014
From: ghostility at gmail.com (Vladan Divljak)
Date: Sat, 27 Sep 2014 21:08:46 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CAJ0mEz0W1LuLmrHcOj+c=tSckff0H1VW7_FWU3YaLfomYm8uXg@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
	<CAJ0mEz0W1LuLmrHcOj+c=tSckff0H1VW7_FWU3YaLfomYm8uXg@mail.gmail.com>
Message-ID: <CAKpwtuM-0mWGprxEoo2_arZ3y6fuBSZVgWp6d8bZEK0qDDzOfA@mail.gmail.com>

On Sat, Sep 27, 2014 at 7:48 PM, Kyle Shannon wrote:

>
> Have you looked at the pgdump driver for ogr:
>
> http://gdal.org/drv_pgdump.html
>
> It may suit your needs.
>


Thanks Kyle, I didn't know about that driver. It could be a handy in future
perhaps, however I need sql dump for SQL Server, as I'm migrating from PG
to MSSQL.

It's not that I need some special driver for sql dump, but just the
statements that ogr2ogr passes to SQL Server. I run SQL Server Express so I
don't have Server Profiler to intercept transactions, and I know there is
profiler for Express version on CodePlex, but I'd rather use ogr2ogr sql
dump if such option exists.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140927/e2354e36/attachment.html>

From bishop.dev at gmail.com  Sat Sep 27 13:07:40 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 28 Sep 2014 00:07:40 +0400
Subject: [gdal-dev] GDAL/OGR 1.11.1 RC1 Available for Review
In-Reply-To: <201409242331.36052.even.rouault@spatialys.com>
References: <201409241634.36208.even.rouault@spatialys.com>
	<542336BF.4020706@gmail.com>
	<201409242331.36052.even.rouault@spatialys.com>
Message-ID: <5427190C.5000600@gmail.com>

Hi Even,

Unfortunately I have no time, so let it be in next release.

Best regards,
     Dmitry

25.09.2014 01:31, Even Rouault ?????:
> Le mercredi 24 septembre 2014 23:25:19, Dmitriy Baryshnikov a ?crit :
>> Hi,
>>
>> I'm looking the http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News and
>> not found the SXF bug, which I fixed (#5647).
>> I'll be nice to add this fix to 1.11.1 too.
> Dmitry,
>
> Yes, it is not mentionned since it is was fixed in trunk only, and not in 1.11
> branch. You can backport it now if you wish, so that it is queued for next
> stable release (but not sure it will be worth issuing a RC2 just for that if
> there are no other issues reported).
>
> Even
>
>> Best regards,
>>       Dmitry
>>
>> 24.09.2014 18:34, Even Rouault ?????:
>>> Hi,
>>>
>>> As announced, I have prepared a GDAL/OGR 1.11.1 release candidate (many
>>> 1's eh!). Please review and test.
>>>
>>> Peek up an archive among the following ones (by ascending size):
>>>     http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.xz
>>>     http://download.osgeo.org/gdal/1.11.1/gdal-1.11.1RC1.tar.gz
>>>     http://download.osgeo.org/gdal/1.11.1/gdal1111RC1.zip
>>>
>>> A snapshot of the gdalautotest suite is also available :
>>>     http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.tar.gz
>>>     http://download.osgeo.org/gdal/1.11.1/gdalautotest-1.11.1.zip
>>>
>>> The NEWS file is here :
>>>     http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News
>>>
>>> I'll call for a vote promoting it to final if I don't hear of any
>>> serious problems in the next few days.
>>>
>>> Best regards,
>>>
>>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Sat Sep 27 14:39:01 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 27 Sep 2014 23:39:01 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
Message-ID: <CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>

This is something that can be fixed by binding the UTF8 strings as unicode
when passing to the ODBC driver. Going to provide a fix for this issue in
the MSSQL driver soon.

Best regards,

Tamas


2014-09-27 17:45 GMT+02:00 Vladan Divljak <ghostility at gmail.com>:

> Hi,
>
> I want migrate data between PostGIS enabled Postgres database and SQL
> Server spatial database. ogr2ogr seems like easiest possible way, but there
> is a catch with this ticket: http://trac.osgeo.org/gdal/ticket/5239
>
> I tried it nonetheless, but as expected Postgres tables with UTF-8 strings
> show garbage in SQL Server.
>
> I don't see any switch in org2ogr to be able to dump sql queries that
> ogr2ogr executes in migration process. Is there any? That way I can
> search/replace to get correct sql queries for the task.
>
>
> Thanks,
> Vladan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140927/19718911/attachment.html>

From marcelblom at xs4all.nl  Sat Sep 27 16:17:08 2014
From: marcelblom at xs4all.nl (Marcel Blom)
Date: Sun, 28 Sep 2014 01:17:08 +0200
Subject: [gdal-dev] GDALwarp creates some darker images after update
 from 1.7.0b2 to GDAL 1.11.0
In-Reply-To: <201409261946.58340.even.rouault@spatialys.com>
References: <5425A52D.8020406@xs4all.nl>
	<201409261946.58340.even.rouault@spatialys.com>
Message-ID: <54274574.2030309@xs4all.nl>

Hi Even,

I uploaded stuff for testing in Dropbox : 
https://www.dropbox.com/sh/0f1zrs295s75u5n/AAAZI2tTokaYZtJ6cfj9zxe0a?dl=0

Because I had too much data I wanted to use lower resolution files and 
guess what? On other resolutions the problems were gone.
So it might have something to do with size/resolution..(?)
I also tested warping direct from one source file and the results were 
the same. But because I use a VRT with multiple source files I added a 
VRT file and made these target files via the VRT file.
I have only space to upload one source file. When I used multiple source 
files in the VRT the target file was even darker (svt-08+.bmp)

I uploaded :
- !buildvrt.bat (with commands to build the VRT file)
- !warp.bat (with commands to warp the VRT into target files)
- _Source.tif (as source file)
- _gdalbuild.vrt (as VRT file)

Resulting target files:
- svt-02.bmp (Source > VRT > Target 2048x2048 = normal)
- svt-04.bmp (Source > VRT > Target 4096x4096 = normal)
- svt-08.bmp (Source > VRT > Target 8192x8192 = darker)
- svt-08+.bmp (Source > VRT with multiple files > Target 8192x8192 = 
even darker)
- svt-16.bmp (Source > VRT > Target 16384x16384 = normal)

Really strange.
I didn't see this behaviour with the older GDAL.

Marcel

Even Rouault schreef op 26-9-2014 om 19:46:
> Marcel,
>
> The best would be that you prepare something that others can try in a fully
> reproducable way, i.e. provide source(s) image(s) and all the exact command
> lines you use.
>
> Even
>
> Le vendredi 26 septembre 2014 19:41:01, Marcel Blom a ?crit :
>> Because of some problems with GDAL 1.7.0b2 in FWTools 2.4.7 I upgraded
>> to GDAL 1.11.0 in the latest OSGeo4W distro. This solved some issues I
>> had, but introduced a really annoying one and what ever I do I can't get
>> rid off it. I hope someone can help me out. If BTW I try to go back to
>> GDAL 1.7.0b2 with FWTools the problem is still there, so I guess it's a
>> (new) driver/DLL update issue.
>>
>> My problem looks exactly like this post... GDAL TIF to JPG Creates Dark
>> Image
>> <http://gis.stackexchange.com/questions/101393/gdal-tif-to-jpg-creates-dark
>> -image> Only that I don't use JPG. And I use GDALwarp. And not all target
>> files have the problem. Most target files look OK. And I only see it with
>> Aerial Photo like sources. With vector like raster sources I don't see the
>> problem. So when reading the other post I thought it had to do with a
>> mask/alpha channel or something, but I can't see this in the source. And
>> whatever option I test, the problem remains.
>>
>> I already created a post here :
>> http://gis.stackexchange.com/questions/114526/gdalwarp-creates-darker-targe
>> t-image-sometimes But I had no final answer... And I think this is the
>> right place to ask.
>>
>> Here are two screenshots. One from the source (Tiff) and one from a
>> intersection of four target files (Tiff or BMP)
>>
>> Section of Source :
>> https://www.dropbox.com/s/gy2tu0h8dufv41o/Source.jpg?dl=0
>>
>> Intersection of four Target files :
>> https://www.dropbox.com/s/av7mdj8ivx3zgsl/Target.jpg?dl=0
>>
>> The source I use is 8bit/channel RGB JPEG. And the merged Tiff is
>> 8bit/channel RGB.
>> I tested almost all options in multiple actions in my workflow. So
>> cutting the source with gdaltranslate in smaller parts for editing.
>> Building a VRT with gdalbuildvrt and cutting into final parts with
>> gdalwarp which will show the problem.
>>
>> I started with the -b 1 -b 2 -b 3 option in my gdalbuildvrt action, but
>> GDAL crashes here... (?) I also tested other options that might have
>> something to do with the problem... -nomd -co ALPHA=YES/No -co
>> PHOTOMETRIC=RGBA/RGB -setci, you name it...
>>
>> I checked good and bad source and target areas with gdalcompare and
>> gdalinfo, but I saw nothing strange...
>>
>> I'm now thinking of resetting GDAL driver settings if that is possible..(?)
>>
>> Has anyone seen this before? Can anyone give me a hint..?


From jukka.rahkonen at mmmtike.fi  Sun Sep 28 01:47:00 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 28 Sep 2014 08:47:00 +0000 (UTC)
Subject: [gdal-dev] GDAL/OGR 1.11.1 RC1 Available for Review
References: <201409241634.36208.even.rouault@spatialys.com>
Message-ID: <loom.20140928T104507-937@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:


> As announced, I have prepared a GDAL/OGR 1.11.1 release candidate (many 1's 
> eh!). Please review and test.
> 
 
> I'll call for a vote promoting it to final if I don't hear of any
> serious problems in the next few days.

+1 for accepting RC1 as final.

-Jukka Rahkonen-




From jukka.rahkonen at mmmtike.fi  Sun Sep 28 01:59:35 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 28 Sep 2014 08:59:35 +0000 (UTC)
Subject: [gdal-dev] Interpolation when using the WMS format
References: <541AFCDB.3020206@r3-gis.com>	<201409182211.48472.even.rouault@spatialys.com>	<291B7304-4724-4026-98F3-CAE382E42657@r3-gis.com>	<201409182230.10093.even.rouault@spatialys.com>
	<541C188F.6040206@r3-gis.com> <542590CA.6060704@r3-gis.com>
Message-ID: <loom.20140928T105129-445@post.gmane.org>

Peter Hopfgartner <peter.hopfgartner <at> r3-gis.com> writes:


> I finally took the time to have a better look at this.
> 
> The attached patch is only for our special case, where data arrives in 8 
> bit bands  and is certainly far from being decent (I've written my last 
> C++ code approx. 15 years ago). Anyway, the image quality seems indeed 
> to improve sensibly.
> 
> I used the current SVN version as a base for the development.
> 
> Applying the patch I get from
> 
>
https://dl.dropboxusercontent.com/u/4935329/resampling_tests
/basemap.2000x2000-quasiorig.jpg

> to this
> 
>
https://dl.dropboxusercontent.com/u/4935329/resampling_tests
/basemap.2000x2000.bilinear.jpg



Hi Peter,

The improvement in quality is big, from almost unusable into rather good.

One more thing came into my mind because you said you are going to use this
for cascading tiles with Mapserver. From the Mapcache documentation
http://mapserver.org/mapcache/config.html I understood that this product of
Mapserver family can also do bilinear resampling:

<full_wms>assemble</full_wms>
<!-- resample mode
filter applied when resampling tiles for full wms requests.
can be either:
- nearest : fastest, poor quality
- bilinear: slower, higher qulity
-->
<resample_mode>bilinear</resample_mode>

It might be interesting for you to compare the code, speed and quality with
your solution.

-Jukka Rahkonen-
 






From szekerest at gmail.com  Sun Sep 28 03:29:08 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 28 Sep 2014 12:29:08 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
	<CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>
Message-ID: <CACALY+Q_qRD3pujDMZ7cV-uvK3CO+rDFNHx7--8dR37Z2W1-dQ@mail.gmail.com>

Committed a fix in trunk (http://trac.osgeo.org/gdal/changeset/27746)

Best regards,

Tamas


2014-09-27 23:39 GMT+02:00 Tamas Szekeres <szekerest at gmail.com>:

> This is something that can be fixed by binding the UTF8 strings as unicode
> when passing to the ODBC driver. Going to provide a fix for this issue in
> the MSSQL driver soon.
>
> Best regards,
>
> Tamas
>
>
> 2014-09-27 17:45 GMT+02:00 Vladan Divljak <ghostility at gmail.com>:
>
>> Hi,
>>
>> I want migrate data between PostGIS enabled Postgres database and SQL
>> Server spatial database. ogr2ogr seems like easiest possible way, but there
>> is a catch with this ticket: http://trac.osgeo.org/gdal/ticket/5239
>>
>> I tried it nonetheless, but as expected Postgres tables with UTF-8
>> strings show garbage in SQL Server.
>>
>> I don't see any switch in org2ogr to be able to dump sql queries that
>> ogr2ogr executes in migration process. Is there any? That way I can
>> search/replace to get correct sql queries for the task.
>>
>>
>> Thanks,
>> Vladan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140928/9cc1a977/attachment-0001.html>

From even.rouault at spatialys.com  Sun Sep 28 05:19:39 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Sep 2014 14:19:39 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.1RC1 for release
Message-ID: <201409281419.39707.even.rouault@spatialys.com>

Hi,

No issue has been specifically reported on RC1 so far (*), so I invite PSC 
members to vote on this motion after doing your own testing and validation. 
Input from everyone else who can test it is also very welcome.

(*) Robert Coup raised to me that the 1.11 branch still contains the OGR WCTS 
code that has the security issues explained in 
http://lists.osgeo.org/pipermail/gdal-dev/2014-September/040084.html . Perhaps 
we can let it as such and add a notice in 
http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News ?

---

Motion: The GDAL/OGR 1.11.1RC1 package is promoted as the
final GDAL/OGR 1.11.1 release.

+1 Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ghostility at gmail.com  Sun Sep 28 09:16:10 2014
From: ghostility at gmail.com (Vladan Divljak)
Date: Sun, 28 Sep 2014 18:16:10 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CACALY+Q_qRD3pujDMZ7cV-uvK3CO+rDFNHx7--8dR37Z2W1-dQ@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
	<CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>
	<CACALY+Q_qRD3pujDMZ7cV-uvK3CO+rDFNHx7--8dR37Z2W1-dQ@mail.gmail.com>
Message-ID: <CAKpwtuP9RipL5_jwaugi8g1qP4Q0MChFPT5d3SE+9xNecbUZng@mail.gmail.com>

On Sun, Sep 28, 2014 at 12:29 PM, Tamas Szekeres wrote:

> Committed a fix in trunk (http://trac.osgeo.org/gdal/changeset/27746)
>
>
Tamas,

Thank you for the quick fix. Very nice gesture.

I'm excited to try it as soon as available on
http://www.gisinternals.com/sdk
Will report back


Regards,
Vladan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140928/b9f5c602/attachment.html>

From szekerest at gmail.com  Sun Sep 28 10:32:11 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 28 Sep 2014 19:32:11 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.1RC1 for release
In-Reply-To: <201409281419.39707.even.rouault@spatialys.com>
References: <201409281419.39707.even.rouault@spatialys.com>
Message-ID: <CACALY+RJ5m=WE+ZnQAXkRHFZ0UsEKWDQz1WsvhXHxvYJdXHmMA@mail.gmail.com>

+1

Tamas

2014-09-28 14:19 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> No issue has been specifically reported on RC1 so far (*), so I invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> (*) Robert Coup raised to me that the 1.11 branch still contains the OGR
> WCTS
> code that has the security issues explained in
> http://lists.osgeo.org/pipermail/gdal-dev/2014-September/040084.html .
> Perhaps
> we can let it as such and add a notice in
> http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News ?
>
> ---
>
> Motion: The GDAL/OGR 1.11.1RC1 package is promoted as the
> final GDAL/OGR 1.11.1 release.
>
> +1 Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140928/626e0a3d/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Sep 29 01:03:31 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 29 Sep 2014 08:03:31 +0000 (UTC)
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.1RC1 for release
References: <201409281419.39707.even.rouault@spatialys.com>
Message-ID: <loom.20140929T095907-505@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> Motion: The GDAL/OGR 1.11.1RC1 package is promoted as the
> final GDAL/OGR 1.11.1 release.
> 
> +1 Even

+1 if you did not already count my vote.
For me it is also OK to let the OGR WCTS code live in v. 1.11.

-Jukka Rahkonen-





From ghostility at gmail.com  Mon Sep 29 05:07:02 2014
From: ghostility at gmail.com (Vladan Divljak)
Date: Mon, 29 Sep 2014 14:07:02 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CAKpwtuP9RipL5_jwaugi8g1qP4Q0MChFPT5d3SE+9xNecbUZng@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
	<CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>
	<CACALY+Q_qRD3pujDMZ7cV-uvK3CO+rDFNHx7--8dR37Z2W1-dQ@mail.gmail.com>
	<CAKpwtuP9RipL5_jwaugi8g1qP4Q0MChFPT5d3SE+9xNecbUZng@mail.gmail.com>
Message-ID: <CAKpwtuNyguxLLPd_oPw5=xJaMea4o_z2pmqvJPNpV3j5QFJKGA@mail.gmail.com>

Tamas,

I tested r27766 briefly. Unlike stable release this dev version fails to
migrate most of the tables that otherwise migrate fine with stable. Those
that do migrate fine have correct encoding. Thanks.

This could mean that there is some patch between stable and dev that causes
a problem, and maybe it's not related to your patch.

Those tables that do not migrate crash ogr2ogr. Before ogr2ogr crashes here
are some logs:

ERROR 1: INSERT command for new feature failed. [Microsoft][ODBC SQL Server
Driver][SQL Server]Unclosed quotation mark after the character string
'POLYGON ((...'
OGR2OGR: Unable to write feature 28082 into layer test.

I don't know if that's related to the crash or it is just debug info.

If you wish me to test some data I'm willing to cooperate.


Regards,
Vladan


On Sun, Sep 28, 2014 at 6:16 PM, Vladan Divljak <ghostility at gmail.com>
wrote:

> On Sun, Sep 28, 2014 at 12:29 PM, Tamas Szekeres wrote:
>
>> Committed a fix in trunk (http://trac.osgeo.org/gdal/changeset/27746)
>>
>>
> Tamas,
>
> Thank you for the quick fix. Very nice gesture.
>
> I'm excited to try it as soon as available on
> http://www.gisinternals.com/sdk
> Will report back
>
>
> Regards,
> Vladan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/6f52a531/attachment.html>

From szekerest at gmail.com  Mon Sep 29 05:10:25 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 29 Sep 2014 14:10:25 +0200
Subject: [gdal-dev] ogr2ogr sqldump?
In-Reply-To: <CAKpwtuNyguxLLPd_oPw5=xJaMea4o_z2pmqvJPNpV3j5QFJKGA@mail.gmail.com>
References: <CAKpwtuMmQzD=YxNTxkOuv5Z6rj+DZ+q+RbyU6EPqQfOj-17_Mg@mail.gmail.com>
	<CACALY+Qz91eFDN3EbqyvrE1DODtnCG6z+Lux55XOWxp7tZ3EDQ@mail.gmail.com>
	<CACALY+Q_qRD3pujDMZ7cV-uvK3CO+rDFNHx7--8dR37Z2W1-dQ@mail.gmail.com>
	<CAKpwtuP9RipL5_jwaugi8g1qP4Q0MChFPT5d3SE+9xNecbUZng@mail.gmail.com>
	<CAKpwtuNyguxLLPd_oPw5=xJaMea4o_z2pmqvJPNpV3j5QFJKGA@mail.gmail.com>
Message-ID: <CACALY+TJ_DZQuH3s_jYUF22k_DYnaJm41g=uPdn1EOyK3cFTMg@mail.gmail.com>

Yes, some test data would be helpful to reproduce this problem.

Thanks,

Tamas

2014-09-29 14:07 GMT+02:00 Vladan Divljak <ghostility at gmail.com>:

> Tamas,
>
> I tested r27766 briefly. Unlike stable release this dev version fails to
> migrate most of the tables that otherwise migrate fine with stable. Those
> that do migrate fine have correct encoding. Thanks.
>
> This could mean that there is some patch between stable and dev that
> causes a problem, and maybe it's not related to your patch.
>
> Those tables that do not migrate crash ogr2ogr. Before ogr2ogr crashes
> here are some logs:
>
> ERROR 1: INSERT command for new feature failed. [Microsoft][ODBC SQL
> Server Driver][SQL Server]Unclosed quotation mark after the character
> string 'POLYGON ((...'
> OGR2OGR: Unable to write feature 28082 into layer test.
>
> I don't know if that's related to the crash or it is just debug info.
>
> If you wish me to test some data I'm willing to cooperate.
>
>
> Regards,
> Vladan
>
>
> On Sun, Sep 28, 2014 at 6:16 PM, Vladan Divljak <ghostility at gmail.com>
> wrote:
>
>> On Sun, Sep 28, 2014 at 12:29 PM, Tamas Szekeres wrote:
>>
>>> Committed a fix in trunk (http://trac.osgeo.org/gdal/changeset/27746)
>>>
>>>
>> Tamas,
>>
>> Thank you for the quick fix. Very nice gesture.
>>
>> I'm excited to try it as soon as available on
>> http://www.gisinternals.com/sdk
>> Will report back
>>
>>
>> Regards,
>> Vladan
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/0271a0b2/attachment.html>

From stephen.roecker at gmail.com  Mon Sep 29 05:32:27 2014
From: stephen.roecker at gmail.com (Stephen Roecker)
Date: Mon, 29 Sep 2014 08:32:27 -0400
Subject: [gdal-dev] Fwd: gdalwarp -r average bug?
In-Reply-To: <CAJ0mEz1TYcohAjzrzY=rF-kG4V_LqqqGjQ9VDYuuWxoW2S7Whg@mail.gmail.com>
References: <CAGcGWcr6ivbQVrJxRQ0_5YnaKy=TM5yYgzLE4O5LM9BigrKtQw@mail.gmail.com>
	<CAGcGWcp5gEmvMuv3S0S8CqutLeOmES6B7TReH8f4=VMa1x+pxQ@mail.gmail.com>
	<CAJ0mEz18eHgREriJHfNm+RzPMWviJ7XEH1fgh4dtT9EXi=etgA@mail.gmail.com>
	<CAJ0mEz1TYcohAjzrzY=rF-kG4V_LqqqGjQ9VDYuuWxoW2S7Whg@mail.gmail.com>
Message-ID: <CAGcGWcqA133uZuE6JNcUeCxVvA0ybz3xmvpUg2-p+OY408CZTw@mail.gmail.com>

After doing some more testing with gdal 11.0 from the QGIS installer,
I noticed that the gdalwarp -r average function works as advertisted
when applied to a raster dataset using a projected cooridinate system.
The dataset from my example was using a geographic coordinate system.

Stephen

On Thu, Sep 25, 2014 at 10:13 AM, Kyle Shannon <kyle at pobox.com> wrote:
> On Thu, Sep 25, 2014 at 8:10 AM, Kyle Shannon <kyle at pobox.com> wrote:
>> Stephen,
>>
>> On Wed, Sep 24, 2014 at 2:21 PM, Stephen Roecker
>> <stephen.roecker at gmail.com> wrote:
>>> Out of curiousity the other day I compared the results of gdalwarp (-r
>>> average) against  the raster R package aggregate(fun=mean) function
>>> for aggregating a raster to a coarser resolution. I was suprized how
>>> different the results of gdalwarp were from raster. When zooming in
>>> and manually averaging the overlapping cells, the results of gdal were
>>> off.
>>>
>>> The elevation difference between the raster and gdal aggregated
>>> rasters only averaged 0.66 meters, but had a max of 12 meters. Also
>>> when subtracting the raster and gdal aggregated rasters, the resulting
>>> subtracted layer looked like a hillshade, suggesting the GDAL
>>> aggregated raster was shifted. However the raster and GDAL rasters
>>> overlapped perfectly, so I can only assume the shift occured during
>>> the aggregation process.
>>>
>>> Can someone explain gdal's behavior to me? Why the difference, is this
>>> a bug in gdal? gdalwarp claims it's averaging all the overlapping
>>> cells except the NA. That doesn't seem to be the case. FYI I'm using
>>> GDAL 1.10.1
>>>
>>> See a reproduceable R example below.
>>>
>>> Stephen
>>>
>>> library(gdalUtils)
>>> library(raster)
>>>
>>> src_dataset <- system.file("external/tahoe_lidar_bareearth.tif",
>>> package="gdalUtils")
>>> test <- raster(x=src_dataset)
>>>
>>> writeRaster(test, "test.tif", overwrite=T)
>>> gdal_setInstallation(search_path="C:/ProgramData/QGIS/QGISDufour/bin",
>>> rescan=T, verbose=T)
>>> gdalwarp(srcfile=src_dataset, dstfile="test_gdal.tif", of="GTiff",
>>> r="average", ot="Float32", tr=res(test)*3, overwrite=TRUE,
>>> verbose=TRUE)
>>>
>>> aggregate(x=raster(src_dataset), fact=3, filename="test_raster.tif",
>>> format="GTiff", NAflag=-99999,
>>>   progress="text", overwrite=T)
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> Without looking too far into it, it seems similar to:
>>
>> http://trac.osgeo.org/gdal/ticket/5311
>>
>> --
>> Kyle
>
> Apologies, it does appear to be different, my mistake.
>
> --
> Kyle

From dmorissette at mapgears.com  Mon Sep 29 06:10:35 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 29 Sep 2014 09:10:35 -0400
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.1RC1 for release
In-Reply-To: <201409281419.39707.even.rouault@spatialys.com>
References: <201409281419.39707.even.rouault@spatialys.com>
Message-ID: <54295A4B.3020502@mapgears.com>

+0. I'm supportive but haven't been able to test.

Daniel

On 14-09-28 8:19 AM, Even Rouault wrote:
> Hi,
>
> No issue has been specifically reported on RC1 so far (*), so I invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> (*) Robert Coup raised to me that the 1.11 branch still contains the OGR WCTS
> code that has the security issues explained in
> http://lists.osgeo.org/pipermail/gdal-dev/2014-September/040084.html . Perhaps
> we can let it as such and add a notice in
> http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News ?
>
> ---
>
> Motion: The GDAL/OGR 1.11.1RC1 package is promoted as the
> final GDAL/OGR 1.11.1 release.
>
> +1 Even
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From jukka.rahkonen at mmmtike.fi  Mon Sep 29 08:45:14 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 29 Sep 2014 15:45:14 +0000 (UTC)
Subject: [gdal-dev] Tell that compressed geodatabases are not supported
Message-ID: <loom.20140929T174055-800@post.gmane.org>

Hi,

It seems that several users wonder why they can't open compressed ESRI
geodatabases with GDAL or QGIS. It could be mentioned in
http://www.gdal.org/drv_filegdb.html and in
http://www.gdal.org/drv_openfilegdb.html. Now it is documented only in
http://trac.osgeo.org/gdal/ticket/5659

-Jukka Rahkonen-


From bontepaarden at gmail.com  Mon Sep 29 11:32:36 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 29 Sep 2014 20:32:36 +0200
Subject: [gdal-dev] Migrate to GDAL v2 or not?
Message-ID: <CAHNf2YQt3TEbD+tDpWC6f91TFjXA7qx=wQKSFsp22B5XLP-Y2g@mail.gmail.com>

We, at the MapWinGIS project, have been using GDAL for years and since last
year we're using Tamas his pre-build binaries.
We're now in the middle of upgrading from Visual Studio 2008 to Visual
Studio 2013 and wonder if this is also a good moment to upgrade from GDAl
v1.11 to GDAL v2.
We already recompiled using GDAL v2 and it seems we have only a few issues
which seems to be easily fixed.
We won't release a new version of MapWinGIS within a few months, probably
around X-Mas.

What is recommended?

Thanks,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/f5f84f81/attachment-0001.html>

From j.tosovsky at email.cz  Mon Sep 29 11:33:52 2014
From: j.tosovsky at email.cz (Jan Tosovsky)
Date: Mon, 29 Sep 2014 20:33:52 +0200
Subject: [gdal-dev] gdal2tiles for 16bit data
In-Reply-To: <5420B0D8.2010206@stripfamily.net>
References: <004c01cfd4cd$4c470260$e4d50720$@tosovsky@email.cz>	<541D8B71.4000602@stripfamily.net>	<006601cfd4e3$dc8656d0$95930470$@tosovsky@email.cz>	<541E3300.5010001@stripfamily.net>
	<010801cfd6a2$54b83c80$fe28b580$@tosovsky@email.cz>
	<5420B0D8.2010206@stripfamily.net>
Message-ID: <00aa01cfdc13$ebd92680$c38b7380$@tosovsky@email.cz>

On 2014-09-23 David Strip wrote:
> On 9/22/2014 2:18 PM, Jan Tosovsky wrote:
> > On 2014-09-21 David Strip wrote:
> > >
> > > If this still doesn't fix it, the first thing to do is run gdalinfo
> > > against one of the tiles and let us know the result.
> >
> > Thanks for the hint. I've checked the tiling source (correct file):
> >
> > ...
> > Metadata:
> >   AREA_OR_POINT=Area
> > Image Structure Metadata:
> >   INTERLEAVE=BAND
> > Corner Coordinates:
> > ...
> > Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
> >   NoData Value=0
> >
> > While my tile is:
> > ...
> > Image Structure Metadata:
> >   INTERLEAVE=PIXEL
> > Corner Coordinates:
> > ...
> > Band 1 Block=256x8 Type=UInt16, ColorInterp=Gray
> > Band 2 Block=256x8 Type=UInt16, ColorInterp=Undefined
> >
> > What exactly is 'Block=256x256' and is 'Block=256x8' in the second
> > case correct?
> 
> The block  describes how the pixels are laid out in the file. The fact
> that the input and output block sizes are different is not an error.
> Likewise, interleave = band vs. pixel is a matter of internal
> organization and shouldn't matter.
> 

Thanks, this led me to a conclusion something was wrong in the Java part.
I've investigated related objects and found a different method for reading
values for cases with multiple bands in the image.

Now everything works as expected.

Thanks for patience,

Jan


From even.rouault at spatialys.com  Mon Sep 29 12:00:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Sep 2014 21:00:30 +0200
Subject: [gdal-dev] Migrate to GDAL v2 or not?
In-Reply-To: <CAHNf2YQt3TEbD+tDpWC6f91TFjXA7qx=wQKSFsp22B5XLP-Y2g@mail.gmail.com>
References: <CAHNf2YQt3TEbD+tDpWC6f91TFjXA7qx=wQKSFsp22B5XLP-Y2g@mail.gmail.com>
Message-ID: <201409292100.30542.even.rouault@spatialys.com>

Paul,

It is difficult to answer on your behalf. If you need new features of GDAL 2, 
then it is pretty obvious. Otherwise it depends on if you are confortable with 
using a "non vetted" development version (but whose quality you can assess by 
running the autotest suite), because you want to do progressive adoption (it 
is not excluded that there will be extra interface changes before GDAL 2), or 
want to stick with something with a more official label. But we definitely need 
early adopters to make it a memorable release.

Best regards,

Even

> We, at the MapWinGIS project, have been using GDAL for years and since last
> year we're using Tamas his pre-build binaries.
> We're now in the middle of upgrading from Visual Studio 2008 to Visual
> Studio 2013 and wonder if this is also a good moment to upgrade from GDAl
> v1.11 to GDAL v2.
> We already recompiled using GDAL v2 and it seems we have only a few issues
> which seems to be easily fixed.
> We won't release a new version of MapWinGIS within a few months, probably
> around X-Mas.
> 
> What is recommended?
> 
> Thanks,
> 
> Paul
> 
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
> 
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
> 
> 
> 
> *The English presentations of the MapWindow GIS Conference 2014 are online.
> <http://www.slideshare.net/mapwindow>*

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Sep 29 12:11:05 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Sep 2014 21:11:05 +0200
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
Message-ID: <201409292111.05622.even.rouault@spatialys.com>

Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
---

I'd like to make it easier for Jukka to do documentation improvements and fixes 
by giving him direct access to SVN. It will be a great asset for the project 
to benefit from Jukka's great knowledge of the software and his lights as a 
power user.

Jukka, could you answer to this email to state that you have read and agreed
to the GDAL commiter guideline :
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the voting with:

+1 Even

Best regards,

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Mon Sep 29 12:14:27 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 29 Sep 2014 23:14:27 +0400
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
In-Reply-To: <201409292111.05622.even.rouault@spatialys.com>
References: <201409292111.05622.even.rouault@spatialys.com>
Message-ID: <5429AF93.6050001@gmail.com>

Hi,

I'm not PSC, but my 5 cents
+1

Best regards,
     Dmitry

29.09.2014 23:11, Even Rouault ?????:
> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
> ---
>
> I'd like to make it easier for Jukka to do documentation improvements and fixes
> by giving him direct access to SVN. It will be a great asset for the project
> to benefit from Jukka's great knowledge of the software and his lights as a
> power user.
>
> Jukka, could you answer to this email to state that you have read and agreed
> to the GDAL commiter guideline :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>


From bontepaarden at gmail.com  Mon Sep 29 12:50:52 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 29 Sep 2014 21:50:52 +0200
Subject: [gdal-dev] Migrate to GDAL v2 or not?
In-Reply-To: <201409292100.30542.even.rouault@spatialys.com>
References: <CAHNf2YQt3TEbD+tDpWC6f91TFjXA7qx=wQKSFsp22B5XLP-Y2g@mail.gmail.com>
	<201409292100.30542.even.rouault@spatialys.com>
Message-ID: <CAHNf2YQbE_hK9DYi9ywAv1_PqH1LwAF54xixVVatF5KYChyCWA@mail.gmail.com>

Thanks Even for the quick reply.

We like bleeding edge technology ;) So we'll be using GDAL v2.
If we stumble on something I'll post it on this list.

Thanks,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*

2014-09-29 21:00 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Paul,
>
> It is difficult to answer on your behalf. If you need new features of GDAL
> 2,
> then it is pretty obvious. Otherwise it depends on if you are confortable
> with
> using a "non vetted" development version (but whose quality you can assess
> by
> running the autotest suite), because you want to do progressive adoption
> (it
> is not excluded that there will be extra interface changes before GDAL 2),
> or
> want to stick with something with a more official label. But we definitely
> need
> early adopters to make it a memorable release.
>
> Best regards,
>
> Even
>
> > We, at the MapWinGIS project, have been using GDAL for years and since
> last
> > year we're using Tamas his pre-build binaries.
> > We're now in the middle of upgrading from Visual Studio 2008 to Visual
> > Studio 2013 and wonder if this is also a good moment to upgrade from GDAl
> > v1.11 to GDAL v2.
> > We already recompiled using GDAL v2 and it seems we have only a few
> issues
> > which seems to be easily fixed.
> > We won't release a new version of MapWinGIS within a few months, probably
> > around X-Mas.
> >
> > What is recommended?
> >
> > Thanks,
> >
> > Paul
> >
> > *Paul Meems *
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> >
> >
> > *The English presentations of the MapWindow GIS Conference 2014 are
> online.
> > <http://www.slideshare.net/mapwindow>*
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/94483dae/attachment.html>

From warmerdam at pobox.com  Mon Sep 29 14:00:02 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 29 Sep 2014 14:00:02 -0700
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
In-Reply-To: <201409292111.05622.even.rouault@spatialys.com>
References: <201409292111.05622.even.rouault@spatialys.com>
Message-ID: <CA+YzLBc_FRJy--b==xmxkQ8rCEsRODkogjw_AJSqkQo8DjMDfQ@mail.gmail.com>

+1 Frank


On Mon, Sep 29, 2014 at 12:11 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
> ---
>
> I'd like to make it easier for Jukka to do documentation improvements and
> fixes
> by giving him direct access to SVN. It will be a great asset for the
> project
> to benefit from Jukka's great knowledge of the software and his lights as a
> power user.
>
> Jukka, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guideline :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/575a548a/attachment.html>

From szekerest at gmail.com  Mon Sep 29 14:16:18 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 29 Sep 2014 23:16:18 +0200
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
In-Reply-To: <201409292111.05622.even.rouault@spatialys.com>
References: <201409292111.05622.even.rouault@spatialys.com>
Message-ID: <CACALY+R6s+M==Q72suRe9=6RJ1VHRa=yE1AhTtORGUckbbfYkg@mail.gmail.com>

+1

Tamas


2014-09-29 21:11 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
> ---
>
> I'd like to make it easier for Jukka to do documentation improvements and
> fixes
> by giving him direct access to SVN. It will be a great asset for the
> project
> to benefit from Jukka's great knowledge of the software and his lights as a
> power user.
>
> Jukka, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guideline :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/c6fb67b3/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Sep 29 14:35:35 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka (Tike))
Date: Mon, 29 Sep 2014 21:35:35 +0000
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A11B2A6E0@FITLK-EXMBX04.msvyvi.vaha.local>

Even Rouault wrote:
> 
> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
> ---
> 
> I'd like to make it easier for Jukka to do documentation improvements and fixes
> by giving him direct access to SVN. It will be a great asset for the project to
> benefit from Jukka's great knowledge of the software and his lights as a power
> user.
> 
> Jukka, could you answer to this email to state that you have read and agreed to
> the GDAL commiter guideline :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I have read and I agree to the GDAL commiter guidelines.

-Jukka Rahkonen- 



From jukka.rahkonen at mmmtike.fi  Mon Sep 29 14:44:30 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 29 Sep 2014 21:44:30 +0000 (UTC)
Subject: [gdal-dev] About DateTime detection
Message-ID: <loom.20140929T233946-504@post.gmane.org>

Hi,

I noticed http://trac.osgeo.org/gdal/changeset/27768 and by looking at the
different date and time formats I remembered that I have just received some
data where dates were expressed as "2014-09-27T" which lead to some trouble.

I do not know if it is valid to end date with "T" without giving time as well.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Mon Sep 29 14:50:14 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Sep 2014 23:50:14 +0200
Subject: [gdal-dev] About DateTime detection
In-Reply-To: <loom.20140929T233946-504@post.gmane.org>
References: <loom.20140929T233946-504@post.gmane.org>
Message-ID: <201409292350.15035.even.rouault@spatialys.com>

Le lundi 29 septembre 2014 23:44:30, Jukka Rahkonen a ?crit :
> Hi,
> 
> I noticed http://trac.osgeo.org/gdal/changeset/27768 and by looking at the
> different date and time formats I remembered that I have just received some
> data where dates were expressed as "2014-09-27T" which lead to some
> trouble.
> 
> I do not know if it is valid to end date with "T" without giving time as
> well.

I would say no, as according to http://en.wikipedia.org/wiki/ISO_8601, 
http://www.w3.org/TR/NOTE-datetime or http://tools.ietf.org/html/rfc3339. The 
T is means as separating the date part from the time part.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From a.furieri at lqt.it  Mon Sep 29 14:50:32 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Mon, 29 Sep 2014 23:50:32 +0200
Subject: [gdal-dev] About DateTime detection
In-Reply-To: <loom.20140929T233946-504@post.gmane.org>
References: <loom.20140929T233946-504@post.gmane.org>
Message-ID: <5a3a1e34311951a96c1fca44d931d6f0@lqt.it>

On Mon, 29 Sep 2014 21:44:30 +0000 (UTC), Jukka Rahkonen wrote:
> Hi,
>
> I noticed http://trac.osgeo.org/gdal/changeset/27768 and by looking 
> at the
> different date and time formats I remembered that I have just 
> received some
> data where dates were expressed as "2014-09-27T" which lead to some 
> trouble.
>
> I do not know if it is valid to end date with "T" without giving time
> as well.
>

Hi Jukka,

doesn't seems to be a valid format accordingly to ISO 8601 
specifications:

"the 'T' appears literally in the string, to indicate the beginning of 
the time element"

please see: http://www.w3.org/TR/NOTE-datetime

bye Sandro

From markus.u.mueller at zoho.com  Mon Sep 29 15:19:41 2014
From: markus.u.mueller at zoho.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Mon, 29 Sep 2014 15:19:41 -0700
Subject: [gdal-dev] Support for dimap v2
Message-ID: <148c37b4f2a.10b33536964722.891253099254309520@zoho.com>


Dear listers,

I have some SPOT6 data that I would like to read and convert which comes as dimap v2 (http://www.astrium-geo.com/en/3030-pleiades-and-spot-6-7-format-delivery; the data I have uses georeferenced geotiffs). According to http://www.gdal.org/frmt_various.html it seems that gdal generally supports read access to dimap, no v2 is mentioned though. I tried a simple gdalinfo - which failed:


$ gdalinfo --version
GDAL 1.11.0, released 2014/04/16
$ gdalinfo DIM_SPOT6_PMS_201409222143250_SEN_1026528101.XML 
ERROR 4: Failed to find &lt;Raster_Dimensions&gt; in document.
gdalinfo failed - unable to open 'DIM_SPOT6_PMS_201409222143250_SEN_1026528101.XML'.



Does anybody know how to open/convert dimap v2 using GDAL (or another open source package)?




Any help appreciated,


Markus

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140929/a2db23f4/attachment.html>

From dmorissette at mapgears.com  Mon Sep 29 17:25:03 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 29 Sep 2014 20:25:03 -0400
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
In-Reply-To: <201409292111.05622.even.rouault@spatialys.com>
References: <201409292111.05622.even.rouault@spatialys.com>
Message-ID: <5429F85F.2000700@mapgears.com>

+1

Daniel

On 14-09-29 3:11 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
> ---
>
> I'd like to make it easier for Jukka to do documentation improvements and fixes
> by giving him direct access to SVN. It will be a great asset for the project
> to benefit from Jukka's great knowledge of the software and his lights as a
> power user.
>
> Jukka, could you answer to this email to state that you have read and agreed
> to the GDAL commiter guideline :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From jukka.rahkonen at mmmtike.fi  Tue Sep 30 03:02:10 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 30 Sep 2014 10:02:10 +0000 (UTC)
Subject: [gdal-dev] About DateTime detection (bug somewhere)
References: <loom.20140929T233946-504@post.gmane.org>
	<5a3a1e34311951a96c1fca44d931d6f0@lqt.it>
Message-ID: <loom.20140930T094833-868@post.gmane.org>

 <a.furieri <at> lqt.it> writes:

> 
> On Mon, 29 Sep 2014 21:44:30 +0000 (UTC), Jukka Rahkonen wrote:
> > Hi,
> >
> > I noticed http://trac.osgeo.org/gdal/changeset/27768 and by looking 
> > at the
> > different date and time formats I remembered that I have just 
> > received some
> > data where dates were expressed as "2014-09-27T" which lead to some 
> > trouble.
> >
> > I do not know if it is valid to end date with "T" without giving time
> > as well.
> >
> 
> Hi Jukka,
> 
> doesn't seems to be a valid format accordingly to ISO 8601 
> specifications:
> 
> "the 'T' appears literally in the string, to indicate the beginning of 
> the time element"
> 
> please see: http://www.w3.org/TR/NOTE-datetime
> 
> bye Sandro

Hi Sandro,

Funny coincident, dates as "2014-09-27T" appear just in Spatialite when I
convert some shapefiles with ogr2ogr.

I tried to find out what happens by myself but it is somehow odd so here are
some data for reproducing the issue:
http://latuviitta.org/downloads/Date_with_ending_T.zip

Convert data into Spatialite with ogr2ogr like
ogr2ogr -f SQLite -dsco spatialite=yes test.sqlite test.shp

The problematic field is named "timestamp" and the datatype in shapefile is
Date. In the resulting Spatialite db the CREATE statement seems to create
the column as 'timestamp' DATE.

Now see what happens if I query this field with SQL either from
spatialite-gui or from command window with "spatialite.exe" 

spatialite> select "timestamp" from test limit 5;
2013-12-19T
2013-12-19T
2013-12-19T
2013-12-19T
2013-12-19T

I made some tests and noticed that if I import shapefile with spatialite-gui
the "timestamp" column is marked to type "double" and for reading dates I
must query it as SELECT date("timestamp")...

The dates with ending "T" make real headache for me because the program I
use for reading data from Spatialite does not accept such dates and I must
read all those tables through views.

Perhaps you two, Even and Sandro, could chat a moment and think about what
would be the best way for converting dates into Spatialite?

Regards,

-Jukka Rahkonen-


From even.rouault at spatialys.com  Tue Sep 30 03:49:50 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Sep 2014 12:49:50 +0200
Subject: [gdal-dev] About DateTime detection (bug somewhere)
In-Reply-To: <loom.20140930T094833-868@post.gmane.org>
References: <loom.20140929T233946-504@post.gmane.org>
	<5a3a1e34311951a96c1fca44d931d6f0@lqt.it>
	<loom.20140930T094833-868@post.gmane.org>
Message-ID: <201409301249.51182.even.rouault@spatialys.com>

Le mardi 30 septembre 2014 12:02:10, Jukka Rahkonen a ?crit :
>  <a.furieri <at> lqt.it> writes:
> > On Mon, 29 Sep 2014 21:44:30 +0000 (UTC), Jukka Rahkonen wrote:
> > > Hi,
> > > 
> > > I noticed http://trac.osgeo.org/gdal/changeset/27768 and by looking
> > > at the
> > > different date and time formats I remembered that I have just
> > > received some
> > > data where dates were expressed as "2014-09-27T" which lead to some
> > > trouble.
> > > 
> > > I do not know if it is valid to end date with "T" without giving time
> > > as well.
> > 
> > Hi Jukka,
> > 
> > doesn't seems to be a valid format accordingly to ISO 8601
> > specifications:
> > 
> > "the 'T' appears literally in the string, to indicate the beginning of
> > the time element"
> > 
> > please see: http://www.w3.org/TR/NOTE-datetime
> > 
> > bye Sandro
> 
> Hi Sandro,
> 
> Funny coincident, dates as "2014-09-27T" appear just in Spatialite when I
> convert some shapefiles with ogr2ogr.
> 
> I tried to find out what happens by myself but it is somehow odd so here
> are some data for reproducing the issue:
> http://latuviitta.org/downloads/Date_with_ending_T.zip
> 
> Convert data into Spatialite with ogr2ogr like
> ogr2ogr -f SQLite -dsco spatialite=yes test.sqlite test.shp
> 
> The problematic field is named "timestamp" and the datatype in shapefile is
> Date. In the resulting Spatialite db the CREATE statement seems to create
> the column as 'timestamp' DATE.
> 
> Now see what happens if I query this field with SQL either from
> spatialite-gui or from command window with "spatialite.exe"
> 
> spatialite> select "timestamp" from test limit 5;
> 2013-12-19T
> 2013-12-19T
> 2013-12-19T
> 2013-12-19T
> 2013-12-19T

Jukka, Sandro,

Upon investigation, the T suffix was added by the OGR SQLite driver. I've 
removed it in trunk for now per http://trac.osgeo.org/gdal/ticket/5672

> 
> I made some tests and noticed that if I import shapefile with
> spatialite-gui the "timestamp" column is marked to type "double" and for
> reading dates I must query it as SELECT date("timestamp")...
> 
> The dates with ending "T" make real headache for me because the program I
> use for reading data from Spatialite does not accept such dates and I must
> read all those tables through views.
> 
> Perhaps you two, Even and Sandro, could chat a moment and think about what
> would be the best way for converting dates into Spatialite?

The general issue is the lack of SQLite of strong typing, and the multiple 
ways allowed by SQLite in ?1.2 of http://www.sqlite.org/datatype3.html to 
express dates.
The OGR driver text storage with ISO8601 strings, and uses the following 
custom typenames: TIMESTAMP (for OFTDateTime), DATE (for OFTDate) and TIME 
(for OFTTime). That way it can correctly round-trips the data types. The 
content of records are respectively YYYY-MM-DDTHH:MM:SS, YYYY-MM-DD (after the 
fix) and HH:MM:SS

Those data types are likely not understood by spatialite-gui.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From a.furieri at lqt.it  Tue Sep 30 04:29:12 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Tue, 30 Sep 2014 13:29:12 +0200
Subject: [gdal-dev] About DateTime detection (bug somewhere)
In-Reply-To: <201409301249.51182.even.rouault@spatialys.com>
References: <loom.20140929T233946-504@post.gmane.org>
	<5a3a1e34311951a96c1fca44d931d6f0@lqt.it>
	<loom.20140930T094833-868@post.gmane.org>
	<201409301249.51182.even.rouault@spatialys.com>
Message-ID: <1c84c4b0ee3115fd4a76656fa50b5afa@lqt.it>

On Tue, 30 Sep 2014 12:49:50 +0200, Even Rouault wrote:
> Jukka, Sandro,
>
> Upon investigation, the T suffix was added by the OGR SQLite driver. 
> I've
> removed it in trunk for now per 
> http://trac.osgeo.org/gdal/ticket/5672
>

Even, Jukka,

the patch #5672 seems to definitively resolve this issue.


> The general issue is the lack of SQLite of strong typing, and the 
> multiple
> ways allowed by SQLite in ?1.2 of 
> http://www.sqlite.org/datatype3.html to
> express dates.
>

yes, that's true.
SQLite doesn't support real DATE / TIME / DATETIME / TIMESTAMP 
datatypes:
we are necessarily forced to use DOUBLE or TEXT as a possible 
replacement.

a) the DOUBLE way
    SQLite nicely supports Julian Day Numbers (JDN) [1]
    a date(time) expressed as a JDN always is a floating point value;
    the integer part represents the number of days passed since the 
origin
    of the time (March 1, 4801 BC) and the fractional part represents
    the number of seconds passed since midnight.
    PROS: you can directly perform arithmetic operations on behalf of
          JDN values
    CONS: it surely isn't a "natural" notation; the end user is forced
          to always use some SQL function in order to properly format
          an "human readable" date/time value
          anyway SQLite support plenty of date/time formatting functions

[1] http://en.wikipedia.org/wiki/Julian_day

b) the TEXT way
    alternatively you can directly store a text string (possibily
    formatted accordingly to ISO8601)
    PROS: this way all data(time) are directly "human readable";
          and you can safely apply comparison operators as e.g.
          SELECT * FROM a WHERE day > '1950-01-15' AND day < 
'1950-02-07';
    CONS: the end user will be anyway forced to call some conversion
          function in order to perform aritmetic operations on behalf
          of date/time values.
          malformed values (not at all a remote possibily when using an
          uncenstrained text string) could easily lead to odd results.


> The OGR driver text storage with ISO8601 strings, and uses the 
> following
> custom typenames: TIMESTAMP (for OFTDateTime), DATE (for OFTDate) and 
> TIME
> (for OFTTime). That way it can correctly round-trips the data types. 
> The
> content of records are respectively YYYY-MM-DDTHH:MM:SS, YYYY-MM-DD
> (after the fix) and HH:MM:SS
>

SpatiaLite adopts the opposite approach when importing from Shapefiles;
JDN is the preferred option.
Anyway the latest 4.2.1 allows the user to freely choice between the
JDN and the textual interpretation. please see this (very long) thread:
https://groups.google.com/forum/#!searchin/spatialite-users/jdn/spatialite-users/lvd7uPJ3Big/9x38y32-cGYJ


> Those data types are likely not understood by spatialite-gui.
>

there is no problem at all from the spatialite-gui side; users will
simply be required to call conversion functions if and when they'll
eventually whish to perform arithmetic operations on dates.
there is no other practical consequence.

bye Sandro

From howard at hobu.co  Tue Sep 30 05:59:04 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 30 Sep 2014 07:59:04 -0500
Subject: [gdal-dev] Motion: Commit access for Jukka Rahkonen
In-Reply-To: <5429F85F.2000700@mapgears.com>
References: <201409292111.05622.even.rouault@spatialys.com>
	<5429F85F.2000700@mapgears.com>
Message-ID: <FCAF3289-EBA2-4066-AA0D-3B296012E410@hobu.co>

+1

Howard

On Sep 29, 2014, at 7:25 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:

> +1
> 
> Daniel
> 
> On 14-09-29 3:11 PM, Even Rouault wrote:
>> Motion: Extend GDAL/OGR commit access to Jukka Rahkonen
>> ---
>> 
>> I'd like to make it easier for Jukka to do documentation improvements and fixes
>> by giving him direct access to SVN. It will be a great asset for the project
>> to benefit from Jukka's great knowledge of the software and his lights as a
>> power user.
>> 
>> Jukka, could you answer to this email to state that you have read and agreed
>> to the GDAL commiter guideline :
>> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>> 
>> I'll start the voting with:
>> 
>> +1 Even
>> 
>> Best regards,
>> 
> 
> 
> -- 
> Daniel Morissette
> T: +1 418-696-5056 #201
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From howard at hobu.co  Tue Sep 30 05:59:49 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 30 Sep 2014 07:59:49 -0500
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.1RC1 for release
In-Reply-To: <54295A4B.3020502@mapgears.com>
References: <201409281419.39707.even.rouault@spatialys.com>
	<54295A4B.3020502@mapgears.com>
Message-ID: <77D33962-11E7-4873-9A1B-06285E3CF2DD@hobu.co>

+1

Howard

On Sep 29, 2014, at 8:10 AM, Daniel Morissette <dmorissette at mapgears.com> wrote:

> +0. I'm supportive but haven't been able to test.
> 
> Daniel
> 
> On 14-09-28 8:19 AM, Even Rouault wrote:
>> Hi,
>> 
>> No issue has been specifically reported on RC1 so far (*), so I invite PSC
>> members to vote on this motion after doing your own testing and validation.
>> Input from everyone else who can test it is also very welcome.
>> 
>> (*) Robert Coup raised to me that the 1.11 branch still contains the OGR WCTS
>> code that has the security issues explained in
>> http://lists.osgeo.org/pipermail/gdal-dev/2014-September/040084.html . Perhaps
>> we can let it as such and add a notice in
>> http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News ?
>> 
>> ---
>> 
>> Motion: The GDAL/OGR 1.11.1RC1 package is promoted as the
>> final GDAL/OGR 1.11.1 release.
>> 
>> +1 Even
>> 
> 
> 
> -- 
> Daniel Morissette
> T: +1 418-696-5056 #201
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From andre.vautour at caris.com  Tue Sep 30 11:20:14 2014
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 30 Sep 2014 15:20:14 -0300
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
Message-ID: <542AF45E.3060705@caris.com>

Hi all,

I am trying to use a geometry binary predicate (ST_Intersects) in 
ExecuteSQL() with the SQLite dialect and keep getting back an 
"ST_Intersect function does not exist" error back from SQLite.

GDAL is built with SpatiaLite (HAVE_SPATIALITE is defined), but I 
believe the problem is that SpatiaLite is built without GEOS in our 
case, so those predicate functions end-up not being available in 
SpatiaLite. The end result is that OGRSQLiteRegisterSQLFunctions does 
not add the OGR-based predicate functions as SpatiaLite is present, but 
SpatiaLite does not contain the predicate functions.

I would build SpatiaLite with GEOS support, but unfortunately its LGPL 
licensing is too restrictive for our application. So, would it make 
sense to change the logic in OGRSQLiteRegisterSQLFunctions to account 
for the case of SpatiaLite being built without GEOS?

Andr?

From even.rouault at spatialys.com  Tue Sep 30 13:08:25 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Sep 2014 22:08:25 +0200
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
In-Reply-To: <542AF45E.3060705@caris.com>
References: <542AF45E.3060705@caris.com>
Message-ID: <201409302208.26031.even.rouault@spatialys.com>

Le mardi 30 septembre 2014 20:20:14, Andre Vautour a ?crit :
> Hi all,
> 
> I am trying to use a geometry binary predicate (ST_Intersects) in
> ExecuteSQL() with the SQLite dialect and keep getting back an
> "ST_Intersect function does not exist" error back from SQLite.
> 
> GDAL is built with SpatiaLite (HAVE_SPATIALITE is defined), but I
> believe the problem is that SpatiaLite is built without GEOS in our
> case, so those predicate functions end-up not being available in
> SpatiaLite. The end result is that OGRSQLiteRegisterSQLFunctions does
> not add the OGR-based predicate functions as SpatiaLite is present, but
> SpatiaLite does not contain the predicate functions.
> 
> I would build SpatiaLite with GEOS support, but unfortunately its LGPL
> licensing is too restrictive for our application. So, would it make
> sense to change the logic in OGRSQLiteRegisterSQLFunctions to account
> for the case of SpatiaLite being built without GEOS?

Andre,

That makes sense. I guess that can only be checked at runtime though, probably 
by issuing a ST_Intersects() and checking the error code.

I'd note that the spatial predicates in OGR geometry are also based on GEOS. 
Except OGRGeometry::Intersects() that has a simplified implementation based on 
bounding box intersection when GEOS is not available.

Some time ago, I had a look at boost geometry (
http://www.boost.org/doc/libs/1_56_0/libs/geometry/doc/html/index.html ). That 
could be used as an alternative backend to GEOS for most predicates and 
functions returning geometries, and the boost licence is a modified X/MIT.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at mmmtike.fi  Tue Sep 30 14:20:12 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 30 Sep 2014 21:20:12 +0000 (UTC)
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
References: <542AF45E.3060705@caris.com>
	<201409302208.26031.even.rouault@spatialys.com>
Message-ID: <loom.20140930T230436-442@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Le mardi 30 septembre 2014 20:20:14, Andre Vautour a ?crit :

...

> > I would build SpatiaLite with GEOS support, but unfortunately its LGPL
> > licensing is too restrictive for our application. So, would it make
> > sense to change the logic in OGRSQLiteRegisterSQLFunctions to account
> > for the case of SpatiaLite being built without GEOS?
> 
> Andre,
> 
> That makes sense. I guess that can only be checked at runtime though,
probably 
> by issuing a ST_Intersects() and checking the error code.
> 
> I'd note that the spatial predicates in OGR geometry are also based on GEOS. 
> Except OGRGeometry::Intersects() that has a simplified implementation
based on 
> bounding box intersection when GEOS is not available.

Hi,

>From the end user's point of view this example feels unpleasant. If
"Intersects" gives different results with OGR and SQLite dialects because of
different implementations, a somewhat clever user can handle it now by
selecting the dialect. But if selecting SQLite dialect might still lead to
use of  OGRGeometry::Intersects() depending on how Spatialite has been built
I would say that an end user can't manage the situation.

How about renaming it into "OGR_Intersects" in such case?

-Jukka Rahkonen-





From even.rouault at spatialys.com  Tue Sep 30 14:38:04 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Sep 2014 23:38:04 +0200
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
In-Reply-To: <loom.20140930T230436-442@post.gmane.org>
References: <542AF45E.3060705@caris.com>
	<201409302208.26031.even.rouault@spatialys.com>
	<loom.20140930T230436-442@post.gmane.org>
Message-ID: <201409302338.04806.even.rouault@spatialys.com>

Le mardi 30 septembre 2014 23:20:12, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Le mardi 30 septembre 2014 20:20:14, Andre Vautour a ?crit :
> ...
> 
> > > I would build SpatiaLite with GEOS support, but unfortunately its LGPL
> > > licensing is too restrictive for our application. So, would it make
> > > sense to change the logic in OGRSQLiteRegisterSQLFunctions to account
> > > for the case of SpatiaLite being built without GEOS?
> > 
> > Andre,
> > 
> > That makes sense. I guess that can only be checked at runtime though,
> 
> probably
> 
> > by issuing a ST_Intersects() and checking the error code.
> > 
> > I'd note that the spatial predicates in OGR geometry are also based on
> > GEOS. Except OGRGeometry::Intersects() that has a simplified
> > implementation
> 
> based on
> 
> > bounding box intersection when GEOS is not available.
> 
> Hi,
> 
> From the end user's point of view this example feels unpleasant. If
> "Intersects" gives different results with OGR and SQLite dialects because
> of different implementations, a somewhat clever user can handle it now by
> selecting the dialect. 

Actually the OGR SQL dialect doesn't support directly spatial predicates. That 
can only be done through the SetSpatialFilter() API that is typically 
triggered with the -spat option of ogrinfo/ogr2ogr.

What was discussed here is SQLite user functions installed by OGR. Currently 
even if Spatialite isn't available, there's an implementation of the most 
common spatial predicates that goes through the OGRGeometry methods. Kind of 
"poor-man" spatialite.

> But if selecting SQLite dialect might still lead to
> use of  OGRGeometry::Intersects() depending on how Spatialite has been
> built I would say that an end user can't manage the situation.
> 
> How about renaming it into "OGR_Intersects" in such case?

I'm not sure that would help for consistency, because 
OGRGeometry::Intersects() can be equivalent to Spatialite ST_Intersects() when 
GDAL is compiled with GEOS support. So OGR_Intersects would have different 
behaviour.

Perhaps that should rather be a OGR_Envelope_Intersects() that is guaranteed 
to always do bounding box intersection

I don't know if we must worry too much about that, as most users should have 
GDAL and Spatialite binaries with GEOS support. I'd say that only people that 
know what they do will build them without GEOS support, and in which case they 
must be aware of the implications.


> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at mmmtike.fi  Tue Sep 30 14:57:20 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka (Tike))
Date: Tue, 30 Sep 2014 21:57:20 +0000
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
In-Reply-To: <201409302338.04806.even.rouault@spatialys.com>
References: <542AF45E.3060705@caris.com>
	<201409302208.26031.even.rouault@spatialys.com>
	<loom.20140930T230436-442@post.gmane.org>,
	<201409302338.04806.even.rouault@spatialys.com>
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A11B2AD51@FITLK-EXMBX04.msvyvi.vaha.local>

Even Rouault wrote:

> Le mardi 30 septembre 2014 23:20:12, Jukka Rahkonen a ?crit :
>> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Le mardi 30 septembre 2014 20:20:14, Andre Vautour a ?crit :
> ...
>
>> > > I would build SpatiaLite with GEOS support, but unfortunately its LGPL
> > > licensing is too restrictive for our application. So, would it make
> > > sense to change the logic in OGRSQLiteRegisterSQLFunctions to account
> > > for the case of SpatiaLite being built without GEOS?
> >
>> > Andre,
> >
>> > That makes sense. I guess that can only be checked at runtime though,
>
>> probably
>
>> > by issuing a ST_Intersects() and checking the error code.
> >
>> > I'd note that the spatial predicates in OGR geometry are also based on
>> > GEOS. Except OGRGeometry::Intersects() that has a simplified
>> > implementation
>
>>> based on
>
>> > bounding box intersection when GEOS is not available.
>>
>> Hi,
>>
>> From the end user's point of view this example feels unpleasant. If
>> "Intersects" gives different results with OGR and SQLite dialects because
>> of different implementations, a somewhat clever user can handle it now by
>> selecting the dialect.

> Actually the OGR SQL dialect doesn't support directly spatial predicates. That
> can only be done through the SetSpatialFilter() API that is typically
> triggered with the -spat option of ogrinfo/ogr2ogr.

> What was discussed here is SQLite user functions installed by OGR. Currently
> even if Spatialite isn't available, there's an implementation of the most
> common spatial predicates that goes through the OGRGeometry methods. Kind of
> "poor-man" spatialite.

>> But if selecting SQLite dialect might still lead to
>> use of  OGRGeometry::Intersects() depending on how Spatialite has been
>> built I would say that an end user can't manage the situation.
>>
>> How about renaming it into "OGR_Intersects" in such case?

> I'm not sure that would help for consistency, because
> OGRGeometry::Intersects() can be equivalent to Spatialite ST_Intersects() when
> GDAL is compiled with GEOS support. So OGR_Intersects would have different
> behaviour.

> Perhaps that should rather be a OGR_Envelope_Intersects() that is guaranteed
> to always do bounding box intersection

> I don't know if we must worry too much about that, as most users should have
> GDAL and Spatialite binaries with GEOS support. I'd say that only people that
> know what they do will build them without GEOS support, and in which case they
> must be aware of the implications.

You are right and I feel rather relaxed. What I was worried about was that people who know what they do when they build GDAL can package the result into applications which they deliver to poor people who have no idea about all that. You read QGIS users mailing lists and for sure have noticed how users are asking why QGIS sometimes, on some computers is behaving in a different way than it used to behave because of differences in GDAL used for builds. You know, different SQLite and Spatialite versions as a typical example, or the variety of JPEG2000 drivers.

 -Jukka-

From even.rouault at spatialys.com  Tue Sep 30 15:53:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Oct 2014 00:53:30 +0200
Subject: [gdal-dev] Binary Predicates in SQLite SQL dialect
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A11B2AD51@FITLK-EXMBX04.msvyvi.vaha.local>
References: <542AF45E.3060705@caris.com>
	<201409302338.04806.even.rouault@spatialys.com>
	<EFE5D7EE2EC8D3438FE02E356F81E35A11B2AD51@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <201410010053.30880.even.rouault@spatialys.com>

Le mardi 30 septembre 2014 23:57:20, Rahkonen Jukka (Tike) a ?crit :
> Even Rouault wrote:
> > Le mardi 30 septembre 2014 23:20:12, Jukka Rahkonen a ?crit :
> >> Even Rouault <even.rouault <at> spatialys.com> writes:
> > > Le mardi 30 septembre 2014 20:20:14, Andre Vautour a ?crit :
> > ...
> > 
> >> > > I would build SpatiaLite with GEOS support, but unfortunately its
> >> > > LGPL
> > > > 
> > > > licensing is too restrictive for our application. So, would it make
> > > > sense to change the logic in OGRSQLiteRegisterSQLFunctions to account
> > > > for the case of SpatiaLite being built without GEOS?
> >> > 
> >> > Andre,
> >> > 
> >> > That makes sense. I guess that can only be checked at runtime though,
> >> 
> >> probably
> >> 
> >> > by issuing a ST_Intersects() and checking the error code.
> >> > 
> >> > I'd note that the spatial predicates in OGR geometry are also based on
> >> > GEOS. Except OGRGeometry::Intersects() that has a simplified
> >> > implementation
> >>> 
> >>> based on
> >>> 
> >> > bounding box intersection when GEOS is not available.
> >> 
> >> Hi,
> >> 
> >> From the end user's point of view this example feels unpleasant. If
> >> "Intersects" gives different results with OGR and SQLite dialects
> >> because of different implementations, a somewhat clever user can handle
> >> it now by selecting the dialect.
> > 
> > Actually the OGR SQL dialect doesn't support directly spatial predicates.
> > That can only be done through the SetSpatialFilter() API that is
> > typically triggered with the -spat option of ogrinfo/ogr2ogr.
> > 
> > What was discussed here is SQLite user functions installed by OGR.
> > Currently even if Spatialite isn't available, there's an implementation
> > of the most common spatial predicates that goes through the OGRGeometry
> > methods. Kind of "poor-man" spatialite.
> > 
> >> But if selecting SQLite dialect might still lead to
> >> use of  OGRGeometry::Intersects() depending on how Spatialite has been
> >> built I would say that an end user can't manage the situation.
> >> 
> >> How about renaming it into "OGR_Intersects" in such case?
> > 
> > I'm not sure that would help for consistency, because
> > OGRGeometry::Intersects() can be equivalent to Spatialite ST_Intersects()
> > when GDAL is compiled with GEOS support. So OGR_Intersects would have
> > different behaviour.
> > 
> > Perhaps that should rather be a OGR_Envelope_Intersects() that is
> > guaranteed to always do bounding box intersection
> > 
> > I don't know if we must worry too much about that, as most users should
> > have GDAL and Spatialite binaries with GEOS support. I'd say that only
> > people that know what they do will build them without GEOS support, and
> > in which case they must be aware of the implications.
> 
> You are right and I feel rather relaxed. What I was worried about was that
> people who know what they do when they build GDAL can package the result
> into applications which they deliver to poor people who have no idea about
> all that. 

Well, that could still happen by accident if someone builds their own GDAL and 
for some reason forget to install GEOS first.

> You read QGIS users mailing lists and for sure have noticed how
> users are asking why QGIS sometimes, on some computers is behaving in a
> different way than it used to behave because of differences in GDAL used
> for builds. You know, different SQLite and Spatialite versions as a
> typical example, or the variety of JPEG2000 drivers.

Yes, that's both a strength and weakness of GDAL. Many ways of configuring it 
to adapt to your needs & constraints. Propietary software editors have a much  
simpler life ;-) !

> 
>  -Jukka-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

